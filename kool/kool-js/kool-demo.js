!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["kool-demo"]=e():t["kool-demo"]=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},s={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e,i){(function(i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(t){var e,n,r,o,s,a,l,u,p=t;function c(t){if(!("kotlinHashCodeValue$"in t)){var e=4294967296*Math.random()|0;Object.defineProperty(t,"kotlinHashCodeValue$",{value:e,enumerable:!1})}return t.kotlinHashCodeValue$}function h(){throw new Error("This marker function should never been called. Looks like compiler did not eliminate it properly. Please, report an issue if you caught this exception.")}function d(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0}t.isBooleanArray=function(t){return(Array.isArray(t)||t instanceof Int8Array)&&"BooleanArray"===t.$type$},t.isByteArray=function(t){return t instanceof Int8Array&&"BooleanArray"!==t.$type$},t.isShortArray=function(t){return t instanceof Int16Array},t.isCharArray=function(t){return t instanceof Uint16Array&&"CharArray"===t.$type$},t.isIntArray=function(t){return t instanceof Int32Array},t.isFloatArray=function(t){return t instanceof Float32Array},t.isDoubleArray=function(t){return t instanceof Float64Array},t.isLongArray=function(t){return Array.isArray(t)&&"LongArray"===t.$type$},t.isArray=function(t){return Array.isArray(t)&&!t.$type$},t.isArrayish=function(t){return Array.isArray(t)||ArrayBuffer.isView(t)},t.arrayToString=function(e){if(null===e)return"null";var i=t.isCharArray(e)?String.fromCharCode:t.toString;return"["+Array.prototype.map.call(e,(function(t){return i(t)})).join(", ")+"]"},t.arrayEquals=function(e,i){if(e===i)return!0;if(null===e||null===i||!t.isArrayish(i)||e.length!==i.length)return!1;for(var n=0,r=e.length;n<r;n++)if(!t.equals(e[n],i[n]))return!1;return!0},t.arrayHashCode=function(e){if(null===e)return 0;for(var i=1,n=0,r=e.length;n<r;n++)i=(31*i|0)+t.hashCode(e[n])|0;return i},t.getCallableRef=function(t,e){return e.callableName=t,e},t.toShort=function(t){return(65535&t)<<16>>16},t.toByte=function(t){return(255&t)<<24>>24},t.toChar=function(t){return 65535&t},t.numberToInt=function(e){return e instanceof t.Long?e.toInt():t.doubleToInt(e)},t.doubleToInt=function(t){return t>2147483647?2147483647:t<-2147483648?-2147483648:0|t},t.toBoxedChar=function(e){return null==e||e instanceof t.BoxedChar?e:new t.BoxedChar(e)},t.unboxChar=function(e){return null==e?e:t.toChar(e)},t.equals=function(t,e){return null==t?null==e:null!=e&&(t!=t?e!=e:"object"==typeof t&&"function"==typeof t.equals?t.equals(e):"number"==typeof t&&"number"==typeof e?t===e&&(0!==t||1/t==1/e):t===e)},t.hashCode=function(e){if(null==e)return 0;var i=typeof e;return"object"===i?"function"==typeof e.hashCode?e.hashCode():c(e):"function"===i?c(e):"number"===i?t.numberHashCode(e):"boolean"===i?Number(e):function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);e=31*e+n|0}return e}(String(e))},t.toString=function(e){return null==e?"null":t.isArrayish(e)?"[...]":e.toString()},t.identityHashCode=c,t.Long=function(t,e){this.low_=0|t,this.high_=0|e},t.Long.$metadata$={kind:"class",simpleName:"Long",interfaces:[]},t.Long.IntCache_={},t.Long.fromInt=function(e){if(-128<=e&&e<128){var i=t.Long.IntCache_[e];if(i)return i}var n=new t.Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(t.Long.IntCache_[e]=n),n},t.Long.fromNumber=function(e){return isNaN(e)?t.Long.ZERO:e<=-t.Long.TWO_PWR_63_DBL_?t.Long.MIN_VALUE:e+1>=t.Long.TWO_PWR_63_DBL_?t.Long.MAX_VALUE:e<0?t.Long.fromNumber(-e).negate():new t.Long(e%t.Long.TWO_PWR_32_DBL_|0,e/t.Long.TWO_PWR_32_DBL_|0)},t.Long.fromBits=function(e,i){return new t.Long(e,i)},t.Long.fromString=function(e,i){if(0==e.length)throw Error("number format error: empty string");var n=i||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return t.Long.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var r=t.Long.fromNumber(Math.pow(n,8)),o=t.Long.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var u=t.Long.fromNumber(Math.pow(n,a));o=o.multiply(u).add(t.Long.fromNumber(l))}else o=(o=o.multiply(r)).add(t.Long.fromNumber(l))}return o},t.Long.TWO_PWR_16_DBL_=65536,t.Long.TWO_PWR_24_DBL_=1<<24,t.Long.TWO_PWR_32_DBL_=t.Long.TWO_PWR_16_DBL_*t.Long.TWO_PWR_16_DBL_,t.Long.TWO_PWR_31_DBL_=t.Long.TWO_PWR_32_DBL_/2,t.Long.TWO_PWR_48_DBL_=t.Long.TWO_PWR_32_DBL_*t.Long.TWO_PWR_16_DBL_,t.Long.TWO_PWR_64_DBL_=t.Long.TWO_PWR_32_DBL_*t.Long.TWO_PWR_32_DBL_,t.Long.TWO_PWR_63_DBL_=t.Long.TWO_PWR_64_DBL_/2,t.Long.ZERO=t.Long.fromInt(0),t.Long.ONE=t.Long.fromInt(1),t.Long.NEG_ONE=t.Long.fromInt(-1),t.Long.MAX_VALUE=t.Long.fromBits(-1,2147483647),t.Long.MIN_VALUE=t.Long.fromBits(0,-2147483648),t.Long.TWO_PWR_24_=t.Long.fromInt(1<<24),t.Long.prototype.toInt=function(){return this.low_},t.Long.prototype.toNumber=function(){return this.high_*t.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},t.Long.prototype.hashCode=function(){return this.high_^this.low_},t.Long.prototype.toString=function(e){var i=e||10;if(i<2||36<i)throw Error("radix out of range: "+i);if(this.isZero())return"0";if(this.isNegative()){if(this.equalsLong(t.Long.MIN_VALUE)){var n=t.Long.fromNumber(i),r=this.div(n),o=r.multiply(n).subtract(this);return r.toString(i)+o.toInt().toString(i)}return"-"+this.negate().toString(i)}for(var s=t.Long.fromNumber(Math.pow(i,6)),a=(o=this,"");;){var l=o.div(s),u=o.subtract(l.multiply(s)).toInt().toString(i);if((o=l).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},t.Long.prototype.getHighBits=function(){return this.high_},t.Long.prototype.getLowBits=function(){return this.low_},t.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:t.Long.TWO_PWR_32_DBL_+this.low_},t.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equalsLong(t.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high_?i+33:i+1},t.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},t.Long.prototype.isNegative=function(){return this.high_<0},t.Long.prototype.isOdd=function(){return 1==(1&this.low_)},t.Long.prototype.equalsLong=function(t){return this.high_==t.high_&&this.low_==t.low_},t.Long.prototype.notEqualsLong=function(t){return this.high_!=t.high_||this.low_!=t.low_},t.Long.prototype.lessThan=function(t){return this.compare(t)<0},t.Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},t.Long.prototype.greaterThan=function(t){return this.compare(t)>0},t.Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},t.Long.prototype.compare=function(t){if(this.equalsLong(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.subtract(t).isNegative()?-1:1},t.Long.prototype.negate=function(){return this.equalsLong(t.Long.MIN_VALUE)?t.Long.MIN_VALUE:this.not().add(t.Long.ONE)},t.Long.prototype.add=function(e){var i=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,l=e.low_>>>16,u=0,p=0,c=0,h=0;return c+=(h+=o+(65535&e.low_))>>>16,h&=65535,p+=(c+=r+l)>>>16,c&=65535,u+=(p+=n+a)>>>16,p&=65535,u+=i+s,u&=65535,t.Long.fromBits(c<<16|h,u<<16|p)},t.Long.prototype.subtract=function(t){return this.add(t.negate())},t.Long.prototype.multiply=function(e){if(this.isZero())return t.Long.ZERO;if(e.isZero())return t.Long.ZERO;if(this.equalsLong(t.Long.MIN_VALUE))return e.isOdd()?t.Long.MIN_VALUE:t.Long.ZERO;if(e.equalsLong(t.Long.MIN_VALUE))return this.isOdd()?t.Long.MIN_VALUE:t.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(t.Long.TWO_PWR_24_)&&e.lessThan(t.Long.TWO_PWR_24_))return t.Long.fromNumber(this.toNumber()*e.toNumber());var i=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,l=e.low_>>>16,u=65535&e.low_,p=0,c=0,h=0,d=0;return h+=(d+=o*u)>>>16,d&=65535,c+=(h+=r*u)>>>16,h&=65535,c+=(h+=o*l)>>>16,h&=65535,p+=(c+=n*u)>>>16,c&=65535,p+=(c+=r*l)>>>16,c&=65535,p+=(c+=o*a)>>>16,c&=65535,p+=i*u+n*l+r*a+o*s,p&=65535,t.Long.fromBits(h<<16|d,p<<16|c)},t.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return t.Long.ZERO;if(this.equalsLong(t.Long.MIN_VALUE)){if(e.equalsLong(t.Long.ONE)||e.equalsLong(t.Long.NEG_ONE))return t.Long.MIN_VALUE;if(e.equalsLong(t.Long.MIN_VALUE))return t.Long.ONE;if((r=this.shiftRight(1).div(e).shiftLeft(1)).equalsLong(t.Long.ZERO))return e.isNegative()?t.Long.ONE:t.Long.NEG_ONE;var i=this.subtract(e.multiply(r));return r.add(i.div(e))}if(e.equalsLong(t.Long.MIN_VALUE))return t.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var n=t.Long.ZERO;for(i=this;i.greaterThanOrEqual(e);){for(var r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())),o=Math.ceil(Math.log(r)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.Long.fromNumber(r),l=a.multiply(e);l.isNegative()||l.greaterThan(i);)r-=s,l=(a=t.Long.fromNumber(r)).multiply(e);a.isZero()&&(a=t.Long.ONE),n=n.add(a),i=i.subtract(l)}return n},t.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},t.Long.prototype.not=function(){return t.Long.fromBits(~this.low_,~this.high_)},t.Long.prototype.and=function(e){return t.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},t.Long.prototype.or=function(e){return t.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},t.Long.prototype.xor=function(e){return t.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},t.Long.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var i=this.low_;if(e<32){var n=this.high_;return t.Long.fromBits(i<<e,n<<e|i>>>32-e)}return t.Long.fromBits(0,i<<e-32)},t.Long.prototype.shiftRight=function(e){if(0==(e&=63))return this;var i=this.high_;if(e<32){var n=this.low_;return t.Long.fromBits(n>>>e|i<<32-e,i>>e)}return t.Long.fromBits(i>>e-32,i>=0?0:-1)},t.Long.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var i=this.high_;if(e<32){var n=this.low_;return t.Long.fromBits(n>>>e|i<<32-e,i>>>e)}return 32==e?t.Long.fromBits(i,0):t.Long.fromBits(i>>>e-32,0)},t.Long.prototype.equals=function(e){return e instanceof t.Long&&this.equalsLong(e)},t.Long.prototype.compareTo_11rb$=t.Long.prototype.compare,t.Long.prototype.inc=function(){return this.add(t.Long.ONE)},t.Long.prototype.dec=function(){return this.add(t.Long.NEG_ONE)},t.Long.prototype.valueOf=function(){return this.toNumber()},t.Long.prototype.unaryPlus=function(){return this},t.Long.prototype.unaryMinus=t.Long.prototype.negate,t.Long.prototype.inv=t.Long.prototype.not,t.Long.prototype.rangeTo=function(e){return new t.kotlin.ranges.LongRange(this,e)},t.defineInlineFunction=function(t,e){return e},t.wrapFunction=function(t){var e=function(){return(e=t()).apply(this,arguments)};return function(){return e.apply(this,arguments)}},t.suspendCall=function(t){return t},t.coroutineResult=function(t){h()},t.coroutineReceiver=function(t){h()},t.setCoroutineResult=function(t,e){h()},t.getReifiedTypeParameterKType=function(t){h()},t.compareTo=function(e,i){var n=typeof e;return"number"===n?"number"==typeof i?t.doubleCompareTo(e,i):t.primitiveCompareTo(e,i):"string"===n||"boolean"===n?t.primitiveCompareTo(e,i):e.compareTo_11rb$(i)},t.primitiveCompareTo=function(t,e){return t<e?-1:t>e?1:0},t.doubleCompareTo=function(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e){if(0!==t)return 0;var i=1/t;return i===1/e?0:i<0?-1:1}return t!=t?e!=e?0:1:-1},t.imul=Math.imul||d,t.imulEmulated=d,e=new ArrayBuffer(8),n=new Float64Array(e),r=new Float32Array(e),o=new Int32Array(e),s=0,a=1,n[0]=-1,0!==o[s]&&(s=1,a=0),t.doubleToRawBits=function(e){return n[0]=e,t.Long.fromBits(o[s],o[a])},t.doubleFromBits=function(t){return o[s]=t.low_,o[a]=t.high_,n[0]},t.floatFromBits=function(t){return o[0]=t,r[0]},t.numberHashCode=function(t){return(0|t)===t?0|t:(n[0]=t,(31*o[a]|0)+o[s]|0)},t.ensureNotNull=function(e){return null!=e?e:t.throwNPE()},void 0===String.prototype.startsWith&&Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),void 0===String.prototype.endsWith&&Object.defineProperty(String.prototype,"endsWith",{value:function(t,e){var i=this.toString();(void 0===e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}}),void 0===Math.sign&&(Math.sign=function(t){return 0==(t=+t)||isNaN(t)?Number(t):t>0?1:-1}),void 0===Math.trunc&&(Math.trunc=function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)}),function(){var t=Math.sqrt(2220446049250313e-31),e=Math.sqrt(t),i=1/t,n=1/e;if(void 0===Math.sinh&&(Math.sinh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n+=i*i*i/6),n}var r=Math.exp(i),o=1/r;return isFinite(r)?isFinite(o)?(r-o)/2:-Math.exp(-i-Math.LN2):Math.exp(i-Math.LN2)}),void 0===Math.cosh&&(Math.cosh=function(t){var e=Math.exp(t),i=1/e;return isFinite(e)&&isFinite(i)?(e+i)/2:Math.exp(Math.abs(t)-Math.LN2)}),void 0===Math.tanh&&(Math.tanh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n-=i*i*i/3),n}var r=Math.exp(+i),o=Math.exp(-i);return r===1/0?1:o===1/0?-1:(r-o)/(r+o)}),void 0===Math.asinh){var r=function(o){if(o>=+e)return o>n?o>i?Math.log(o)+Math.LN2:Math.log(2*o+1/(2*o)):Math.log(o+Math.sqrt(o*o+1));if(o<=-e)return-r(-o);var s=o;return Math.abs(o)>=t&&(s-=o*o*o/6),s};Math.asinh=r}void 0===Math.acosh&&(Math.acosh=function(n){if(n<1)return NaN;if(n-1>=e)return n>i?Math.log(n)+Math.LN2:Math.log(n+Math.sqrt(n*n-1));var r=Math.sqrt(n-1),o=r;return r>=t&&(o-=r*r*r/12),Math.sqrt(2)*o}),void 0===Math.atanh&&(Math.atanh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n+=i*i*i/3),n}return Math.log((1+i)/(1-i))/2}),void 0===Math.log1p&&(Math.log1p=function(t){if(Math.abs(t)<e){var i=t*t,n=i*t;return-n*t/4+n/3-i/2+t}return Math.log(t+1)}),void 0===Math.expm1&&(Math.expm1=function(t){if(Math.abs(t)<e){var i=t*t,n=i*t;return n*t/24+n/6+i/2+t}return Math.exp(t)-1})}(),void 0===Math.hypot&&(Math.hypot=function(){for(var t=0,e=arguments.length,i=0;i<e;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)}),void 0===Math.log10&&(Math.log10=function(t){return Math.log(t)*Math.LOG10E}),void 0===Math.log2&&(Math.log2=function(t){return Math.log(t)*Math.LOG2E}),void 0===Math.clz32&&(Math.clz32=(l=Math.log,u=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(l(e)/u|0)|0})),void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=n>>0,o=r<0?Math.max(i+r,0):Math.min(r,i),s=arguments[2],a=void 0===s?i:s>>0,l=a<0?Math.max(i+a,0):Math.min(a,i);o<l;)e[o]=t,o++;return e}}),function(){function t(t,e){return t<0?Math.max(0,t+e):Math.min(t,e)}function e(e,i){return void 0===i&&(i=this.length),e=t(e||0,this.length),i=Math.max(e,t(i,this.length)),new this.constructor(this.subarray(e,i))}for(var i=[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array],n=0;n<i.length;++n)void 0===(s=i[n]).prototype.fill&&Object.defineProperty(s.prototype,"fill",{value:Array.prototype.fill}),void 0===s.prototype.slice&&Object.defineProperty(s.prototype,"slice",{value:e});try{(function(){}).apply(null,new Int32Array(0))}catch(t){var r=Function.prototype.apply;Object.defineProperty(Function.prototype,"apply",{value:function(t,e){return r.call(this,t,[].slice.call(e))}})}for(n=0;n<i.length;++n)void 0===(s=i[n]).prototype.map&&Object.defineProperty(s.prototype,"map",{value:function(t,e){return[].slice.call(this).map(t,e)}});var o=function(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e){if(0!==t)return 0;var i=1/t;return i===1/e?0:i<0?-1:1}return t!=t?e!=e?0:1:-1};for(n=0;n<i.length;++n){var s;void 0===(s=i[n]).prototype.sort&&Object.defineProperty(s.prototype,"sort",{value:function(t){return Array.prototype.sort.call(this,t||o)}})}}(),t.Kind={CLASS:"class",INTERFACE:"interface",OBJECT:"object"},t.callGetter=function(e,i,n){var r=Object.getOwnPropertyDescriptor(i,n);return null!=r&&null!=r.get?r.get.call(e):null!=(r=Object.getOwnPropertyDescriptor(e,n))&&"value"in r?e[n]:t.callGetter(e,Object.getPrototypeOf(i),n)},t.isType=function(e,i){if(i===Object)switch(typeof e){case"string":case"number":case"boolean":case"function":return!0;default:return e instanceof Object}if(null==e||null==i||"object"!=typeof e&&"function"!=typeof e)return!1;if("function"==typeof i&&e instanceof i)return!0;var n=Object.getPrototypeOf(i),r=null!=n?n.constructor:null;if(null!=r&&"$metadata$"in r&&r.$metadata$.kind===t.Kind.OBJECT)return e===i;var o=i.$metadata$;return null==o?e instanceof i:o.kind===t.Kind.INTERFACE&&null!=e.constructor&&function t(e,i){if(e===i)return!0;var n=e.$metadata$;if(null!=n)for(var r=n.interfaces,o=0;o<r.length;o++)if(t(r[o],i))return!0;var s=null!=e.prototype?Object.getPrototypeOf(e.prototype):null,a=null!=s?s.constructor:null;return null!=a&&t(a,i)}(e.constructor,i)},t.isNumber=function(e){return"number"==typeof e||e instanceof t.Long},t.isChar=function(e){return e instanceof t.BoxedChar},t.isComparable=function(e){var i=typeof e;return"string"===i||"boolean"===i||t.isNumber(e)||t.isType(e,t.kotlin.Comparable)},t.isCharSequence=function(e){return"string"==typeof e||t.isType(e,t.kotlin.CharSequence)},function(){"use strict";var e=t.Kind.INTERFACE,i=t.Kind.OBJECT,n=t.Kind.CLASS,r=(t.defineInlineFunction,t.wrapFunction,t.equals),o=t.Long.ZERO;function s(){}function a(){c(),this.name$="",this.ordinal$=0}function l(){u=this}s.$metadata$={kind:e,simpleName:"Comparable",interfaces:[]},Object.defineProperty(a.prototype,"name",{configurable:!0,get:function(){return this.name$}}),Object.defineProperty(a.prototype,"ordinal",{configurable:!0,get:function(){return this.ordinal$}}),a.prototype.compareTo_11rb$=function(e){return t.primitiveCompareTo(this.ordinal,e.ordinal)},a.prototype.equals=function(t){return this===t},a.prototype.hashCode=function(){return t.identityHashCode(this)},a.prototype.toString=function(){return this.name},l.$metadata$={kind:i,simpleName:"Companion",interfaces:[]};var u=null;function c(){return null===u&&new l,u}function h(t,e){var i;i=t.length-1|0;for(var n=0;n<=i;n++)t[n]=e;return t}function d(){f=this,this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}a.$metadata$={kind:n,simpleName:"Enum",interfaces:[s]},d.$metadata$={kind:i,simpleName:"DoubleCompanionObject",interfaces:[]};var f=null;function _(){m=this,this.MIN_VALUE=14e-46,this.MAX_VALUE=34028235e31,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=4,this.SIZE_BITS=32}_.$metadata$={kind:i,simpleName:"FloatCompanionObject",interfaces:[]};var m=null;function $(){y=this,this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}$.$metadata$={kind:i,simpleName:"IntCompanionObject",interfaces:[]};var y=null;function v(){g=this,this.MIN_VALUE=t.Long.MIN_VALUE,this.MAX_VALUE=t.Long.MAX_VALUE,this.SIZE_BYTES=8,this.SIZE_BITS=64}v.$metadata$={kind:i,simpleName:"LongCompanionObject",interfaces:[]};var g=null;function b(){x=this,this.MIN_VALUE=-32768,this.MAX_VALUE=32767,this.SIZE_BYTES=2,this.SIZE_BITS=16}b.$metadata$={kind:i,simpleName:"ShortCompanionObject",interfaces:[]};var x=null;function w(){z=this,this.MIN_VALUE=-128,this.MAX_VALUE=127,this.SIZE_BYTES=1,this.SIZE_BITS=8}w.$metadata$={kind:i,simpleName:"ByteCompanionObject",interfaces:[]};var z=null;function k(){S=this,this.MIN_VALUE=0,this.MAX_VALUE=65535,this.MIN_HIGH_SURROGATE=55296,this.MAX_HIGH_SURROGATE=56319,this.MIN_LOW_SURROGATE=56320,this.MAX_LOW_SURROGATE=57343,this.MIN_SURROGATE=this.MIN_HIGH_SURROGATE,this.MAX_SURROGATE=this.MAX_LOW_SURROGATE,this.SIZE_BYTES=2,this.SIZE_BITS=16}k.$metadata$={kind:i,simpleName:"CharCompanionObject",interfaces:[]};var S=null;function C(){N=this}C.$metadata$={kind:i,simpleName:"StringCompanionObject",interfaces:[]};var N=null;function E(){P=this}E.$metadata$={kind:i,simpleName:"BooleanCompanionObject",interfaces:[]};var P=null,T=p.kotlin||(p.kotlin={});T.Comparable=s,Object.defineProperty(a,"Companion",{get:c}),T.Enum=a,p.newArray=function(t,e){return h(Array(t),e)},p.booleanArray=function(t,e){var i,n=Array(t);if(n.$type$="BooleanArray",null==e||r(e,!0))i=h(n,!1);else if(r(e,!1))i=n;else{var o;o=n.length-1|0;for(var s=0;s<=o;s++)n[s]=e(s);i=n}return i},p.charArray=function(t,e){var i,n=new Uint16Array(t);if(n.$type$="CharArray",null==e||r(e,!0)||r(e,!1))i=n;else{var o;o=n.length-1|0;for(var s=0;s<=o;s++)n[s]=e(s);i=n}return i},p.longArray=function(t,e){var i,n=Array(t);if(n.$type$="LongArray",null==e||r(e,!0))i=h(n,o);else if(r(e,!1))i=n;else{var s;s=n.length-1|0;for(var a=0;a<=s;a++)n[a]=e(a);i=n}return i};var O=T.js||(T.js={}),M=O.internal||(O.internal={});Object.defineProperty(M,"DoubleCompanionObject",{get:function(){return null===f&&new d,f}}),Object.defineProperty(M,"FloatCompanionObject",{get:function(){return null===m&&new _,m}}),Object.defineProperty(M,"IntCompanionObject",{get:function(){return null===y&&new $,y}}),Object.defineProperty(M,"LongCompanionObject",{get:function(){return null===g&&new v,g}}),Object.defineProperty(M,"ShortCompanionObject",{get:function(){return null===x&&new b,x}}),Object.defineProperty(M,"ByteCompanionObject",{get:function(){return null===z&&new w,z}}),Object.defineProperty(M,"CharCompanionObject",{get:function(){return null===S&&new k,S}}),Object.defineProperty(M,"StringCompanionObject",{get:function(){return null===N&&new C,N}}),Object.defineProperty(M,"BooleanCompanionObject",{get:function(){return null===P&&new E,P}})}(),function(){"use strict";var e,n=t.defineInlineFunction,r=t.wrapFunction,o=t.equals,s=t.toBoxedChar,a=t.unboxChar,l=t.kotlin.js.internal.DoubleCompanionObject,u=t.Long.ZERO,c=Math,h=t.Kind.CLASS,d=t.toChar,f=t.Long.NEG_ONE,_=t.toByte,m=(t.Long.fromInt(-128),t.Long.fromInt(127),t.kotlin.js.internal.ByteCompanionObject),$=t.numberToInt,y=(t.Long.fromInt(-2147483648),t.Long.fromInt(2147483647),t.Long.MIN_VALUE),v=t.Long.MAX_VALUE,g=t.toShort,b=(t.Long.fromInt(-32768),t.Long.fromInt(32767),t.kotlin.js.internal.ShortCompanionObject),x=t.toString,w=(t.getCallableRef,t.arrayEquals,t.arrayHashCode,t.Long.fromInt(255),new t.Long(-1,0)),z=(t.Long.fromInt(65535),t.Kind.INTERFACE),k=Object,S=t.Kind.OBJECT,C=t.Long.ONE,N=t.kotlin.Enum,E=t.kotlin.Comparable,P=t.ensureNotNull,T=t.throwCCE,O=Error,M=t.arrayToString,j=t.hashCode,A=t.doubleToRawBits,R=t.kotlin.js.internal.FloatCompanionObject,I=t.kotlin.js.internal.CharCompanionObject,L=new t.Long(-1478467534,-1720727600),D=new t.Long(-888910638,1920087921),q=new t.Long(1993859828,793161749),B=new t.Long(1,-2147483648),F=new t.Long(1908874354,-59652324),U=t.Long.fromInt(2047);function V(t,e){return G(t,e)>=0}function G(t,e){if(null==e){for(var i=0;i!==t.length;++i)if(null==t[i])return i}else for(var n=0;n!==t.length;++n)if(o(e,t[n]))return n;return-1}function H(t,e){var i,n;if(null==e)for(i=$t(K(t)).iterator();i.hasNext();){var r=i.next();if(null==t[r])return r}else for(n=$t(K(t)).iterator();n.hasNext();){var s=n.next();if(o(e,t[s]))return s}return-1}function W(t){var e;switch(t.length){case 0:throw new Ni("Array is empty.");case 1:e=t[0];break;default:throw yi("Array has more than one element.")}return e}function K(t){return new be(0,X(t))}function X(t){return t.length-1|0}function Y(t){return t.length-1|0}function Z(t){return t.length-1|0}function J(t,e){var i;for(i=0;i!==t.length;++i){var n=t[i];e.add_11rb$(n)}return e}function Q(t){return dn(Yo(t))}function tt(t){var e;switch(t.length){case 0:e=Is();break;case 1:e=Hi(t[0]);break;default:e=J(t,Kn(t.length))}return e}function et(t,e,i,n,r,o,s,a){var l;void 0===i&&(i=", "),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=-1),void 0===s&&(s="..."),void 0===a&&(a=null),e.append_gw00v9$(n);var u=0;for(l=0;l!==t.length;++l){var p=t[l];if((u=u+1|0)>1&&e.append_gw00v9$(i),!(o<0||u<=o))break;null!=a?e.append_gw00v9$(a(p)):e.append_gw00v9$(p.toString())}return o>=0&&u>o&&e.append_gw00v9$(s),e.append_gw00v9$(r),e}function it(t){if(t.isEmpty())throw new Ni("List is empty.");return t.get_za3lpa$(0)}function nt(e,i){var n;if(t.isType(e,At))return e.indexOf_11rb$(i);var r=0;for(n=e.iterator();n.hasNext();){var s=n.next();if(Xi(r),o(i,s))return r;r=r+1|0}return-1}function rt(e){if(t.isType(e,At))return ot(e);var i=e.iterator();if(!i.hasNext())throw new Ni("Collection is empty.");var n=i.next();if(i.hasNext())throw yi("Collection has more than one element.");return n}function ot(t){var e;switch(t.size){case 0:throw new Ni("List is empty.");case 1:e=t.get_za3lpa$(0);break;default:throw yi("List has more than one element.")}return e}function st(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();null!=n&&e.add_11rb$(n)}return e}function at(t,e){for(var i=ts(t);i>=1;i--){var n=e.nextInt_za3lpa$(i+1|0);t.set_wxm5ur$(n,t.set_wxm5ur$(i,t.get_za3lpa$(n)))}}function lt(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n)}return e}function ut(e){var i;if(t.isType(e,Mt)){switch(e.size){case 0:i=Jo();break;case 1:i=Gi(t.isType(e,At)?e.get_za3lpa$(0):e.iterator().next());break;default:i=ct(e)}return i}return es(pt(e))}function pt(e){return t.isType(e,Mt)?ct(e):lt(e,cn())}function ct(t){return dn(t)}function ht(e){return t.isType(e,Mt)?Hn(e):lt(e,Gn())}function dt(e){var i=e.iterator();if(!i.hasNext())return null;for(var n=i.next();i.hasNext();){var r=i.next();t.compareTo(n,r)>0&&(n=r)}return n}function ft(t,e,i,n,r,o,s,a){var l;void 0===i&&(i=", "),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=-1),void 0===s&&(s="..."),void 0===a&&(a=null),e.append_gw00v9$(n);var u=0;for(l=t.iterator();l.hasNext();){var p=l.next();if((u=u+1|0)>1&&e.append_gw00v9$(i),!(o<0||u<=o))break;Ea(e,p,a)}return o>=0&&u>o&&e.append_gw00v9$(s),e.append_gw00v9$(r),e}function _t(t,e,i,n,r,o,s){return void 0===e&&(e=", "),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=-1),void 0===o&&(o="..."),void 0===s&&(s=null),ft(t,lo(),e,i,n,r,o,s).toString()}function mt(t,e){return ce().fromClosedRange_qt1dr2$(t,e,-1)}function $t(t){return ce().fromClosedRange_qt1dr2$(t.last,t.first,0|-t.step)}function yt(t,e){return e<=-2147483648?ze().EMPTY:new be(t,e-1|0)}function vt(t,e){return t<e?e:t}function gt(t,e){return t>e?e:t}function bt(t,e,i){if(e>i)throw yi("Cannot coerce value to an empty range: maximum "+i+" is less than minimum "+e+".");return t<e?e:t>i?i:t}function xt(t){this.closure$iterator=t}function wt(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n)}return e}function zt(t){return es(kt(t))}function kt(t){return wt(t,cn())}function St(t,e){return new Ps(t,e)}function Ct(t){return new xt((e=t,function(){return e.iterator()}));var e}function Nt(t,e){if(!(e>=0))throw yi(("Requested character count "+e+" is less than zero.").toString());return t.substring(gt(e,t.length))}function Et(){}function Pt(){}function Tt(){}function Ot(){}function Mt(){}function jt(){}function At(){}function Rt(){}function It(){}function Lt(){}function Dt(){}function qt(){}function Bt(){}function Ft(){}function Ut(){}function Vt(){}function Gt(){}function Ht(){}function Wt(){}function Kt(){}function Xt(){}function Yt(){}function Zt(){}function Jt(){}function Qt(){}function te(){}function ee(t,e,i){Kt.call(this),this.step=i,this.finalElement_0=0|e,this.hasNext_0=this.step>0?t<=e:t>=e,this.next_0=this.hasNext_0?0|t:this.finalElement_0}function ie(t,e,i){Yt.call(this),this.step=i,this.finalElement_0=e,this.hasNext_0=this.step>0?t<=e:t>=e,this.next_0=this.hasNext_0?t:this.finalElement_0}function ne(t,e,i){Zt.call(this),this.step=i,this.finalElement_0=e,this.hasNext_0=this.step.toNumber()>0?t.compareTo_11rb$(e)<=0:t.compareTo_11rb$(e)>=0,this.next_0=this.hasNext_0?t:this.finalElement_0}function re(t,e,i){if(ae(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=d(Re(0|t,0|e,i)),this.step=i}function oe(){se=this}di.prototype=Object.create(O.prototype),di.prototype.constructor=di,_i.prototype=Object.create(di.prototype),_i.prototype.constructor=_i,ee.prototype=Object.create(Kt.prototype),ee.prototype.constructor=ee,ie.prototype=Object.create(Yt.prototype),ie.prototype.constructor=ie,ne.prototype=Object.create(Zt.prototype),ne.prototype.constructor=ne,$e.prototype=Object.create(re.prototype),$e.prototype.constructor=$e,be.prototype=Object.create(le.prototype),be.prototype.constructor=be,ke.prototype=Object.create(he.prototype),ke.prototype.constructor=ke,De.prototype=Object.create(te.prototype),De.prototype.constructor=De,Be.prototype=Object.create(Wt.prototype),Be.prototype.constructor=Be,Ue.prototype=Object.create(Xt.prototype),Ue.prototype.constructor=Ue,Ge.prototype=Object.create(Kt.prototype),Ge.prototype.constructor=Ge,We.prototype=Object.create(Yt.prototype),We.prototype.constructor=We,Xe.prototype=Object.create(Jt.prototype),Xe.prototype.constructor=Xe,Ze.prototype=Object.create(Qt.prototype),Ze.prototype.constructor=Ze,Qe.prototype=Object.create(Zt.prototype),Qe.prototype.constructor=Qe,ci.prototype=Object.create(O.prototype),ci.prototype.constructor=ci,$i.prototype=Object.create(_i.prototype),$i.prototype.constructor=$i,vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,bi.prototype=Object.create(_i.prototype),bi.prototype.constructor=bi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,ki.prototype=Object.create($i.prototype),ki.prototype.constructor=ki,Si.prototype=Object.create(_i.prototype),Si.prototype.constructor=Si,Ci.prototype=Object.create(_i.prototype),Ci.prototype.constructor=Ci,Ni.prototype=Object.create(_i.prototype),Ni.prototype.constructor=Ni,Pi.prototype=Object.create(_i.prototype),Pi.prototype.constructor=Pi,Ti.prototype=Object.create(_i.prototype),Ti.prototype.constructor=Ti,Mi.prototype=Object.create(_i.prototype),Mi.prototype.constructor=Mi,Zi.prototype=Object.create(Co.prototype),Zi.prototype.constructor=Zi,tn.prototype=Object.create(Qi.prototype),tn.prototype.constructor=tn,Ji.prototype=Object.create(Zi.prototype),Ji.prototype.constructor=Ji,en.prototype=Object.create(Ji.prototype),en.prototype.constructor=en,un.prototype=Object.create(Zi.prototype),un.prototype.constructor=un,on.prototype=Object.create(un.prototype),on.prototype.constructor=on,an.prototype=Object.create(Zi.prototype),an.prototype.constructor=an,nn.prototype=Object.create(Oo.prototype),nn.prototype.constructor=nn,pn.prototype=Object.create(Ji.prototype),pn.prototype.constructor=pn,zn.prototype=Object.create(un.prototype),zn.prototype.constructor=zn,wn.prototype=Object.create(nn.prototype),wn.prototype.constructor=wn,En.prototype=Object.create(un.prototype),En.prototype.constructor=En,Ln.prototype=Object.create(rn.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(un.prototype),Dn.prototype.constructor=Dn,In.prototype=Object.create(wn.prototype),In.prototype.constructor=In,Vn.prototype=Object.create(En.prototype),Vn.prototype.constructor=Vn,Zn.prototype=Object.create(Yn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Yn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Jn.prototype),Qn.prototype.constructor=Qn,mr.prototype=Object.create(_r.prototype),mr.prototype.constructor=mr,$r.prototype=Object.create(_r.prototype),$r.prototype.constructor=$r,yr.prototype=Object.create(_r.prototype),yr.prototype.constructor=yr,oo.prototype=Object.create(di.prototype),oo.prototype.constructor=oo,qo.prototype=Object.create(Co.prototype),qo.prototype.constructor=qo,Mo.prototype=Object.create(qo.prototype),Mo.prototype.constructor=Mo,Ao.prototype=Object.create(Co.prototype),Ao.prototype.constructor=Ao,Es.prototype=Object.create(Ns.prototype),Es.prototype.constructor=Es,la.prototype=Object.create(N.prototype),la.prototype.constructor=la,fa.prototype=Object.create(da.prototype),fa.prototype.constructor=fa,za.prototype=Object.create(da.prototype),za.prototype.constructor=za,Ua.prototype=Object.create(Kt.prototype),Ua.prototype.constructor=Ua,gl.prototype=Object.create(ci.prototype),gl.prototype.constructor=gl,Ol.prototype=Object.create(Rl.prototype),Ol.prototype.constructor=Ol,ql.prototype=Object.create(Bl.prototype),ql.prototype.constructor=ql,Wl.prototype=Object.create(Zl.prototype),Wl.prototype.constructor=Wl,eu.prototype=Object.create(Fl.prototype),eu.prototype.constructor=eu,xt.prototype.iterator=function(){return this.closure$iterator()},xt.$metadata$={kind:h,interfaces:[Tt]},Et.$metadata$={kind:z,simpleName:"Annotation",interfaces:[]},Pt.$metadata$={kind:z,simpleName:"CharSequence",interfaces:[]},Tt.$metadata$={kind:z,simpleName:"Iterable",interfaces:[]},Ot.$metadata$={kind:z,simpleName:"MutableIterable",interfaces:[Tt]},Mt.$metadata$={kind:z,simpleName:"Collection",interfaces:[Tt]},jt.$metadata$={kind:z,simpleName:"MutableCollection",interfaces:[Ot,Mt]},At.$metadata$={kind:z,simpleName:"List",interfaces:[Mt]},Rt.$metadata$={kind:z,simpleName:"MutableList",interfaces:[jt,At]},It.$metadata$={kind:z,simpleName:"Set",interfaces:[Mt]},Lt.$metadata$={kind:z,simpleName:"MutableSet",interfaces:[jt,It]},Dt.prototype.getOrDefault_xwzc9p$=function(t,e){return null},qt.$metadata$={kind:z,simpleName:"Entry",interfaces:[]},Dt.$metadata$={kind:z,simpleName:"Map",interfaces:[]},Bt.prototype.remove_xwzc9p$=function(t,e){return!0},Ft.$metadata$={kind:z,simpleName:"MutableEntry",interfaces:[qt]},Bt.$metadata$={kind:z,simpleName:"MutableMap",interfaces:[Dt]},Ut.$metadata$={kind:z,simpleName:"Iterator",interfaces:[]},Vt.$metadata$={kind:z,simpleName:"MutableIterator",interfaces:[Ut]},Gt.$metadata$={kind:z,simpleName:"ListIterator",interfaces:[Ut]},Ht.$metadata$={kind:z,simpleName:"MutableListIterator",interfaces:[Vt,Gt]},Wt.prototype.next=function(){return this.nextByte()},Wt.$metadata$={kind:h,simpleName:"ByteIterator",interfaces:[Ut]},Kt.prototype.next=function(){return s(this.nextChar())},Kt.$metadata$={kind:h,simpleName:"CharIterator",interfaces:[Ut]},Xt.prototype.next=function(){return this.nextShort()},Xt.$metadata$={kind:h,simpleName:"ShortIterator",interfaces:[Ut]},Yt.prototype.next=function(){return this.nextInt()},Yt.$metadata$={kind:h,simpleName:"IntIterator",interfaces:[Ut]},Zt.prototype.next=function(){return this.nextLong()},Zt.$metadata$={kind:h,simpleName:"LongIterator",interfaces:[Ut]},Jt.prototype.next=function(){return this.nextFloat()},Jt.$metadata$={kind:h,simpleName:"FloatIterator",interfaces:[Ut]},Qt.prototype.next=function(){return this.nextDouble()},Qt.$metadata$={kind:h,simpleName:"DoubleIterator",interfaces:[Ut]},te.prototype.next=function(){return this.nextBoolean()},te.$metadata$={kind:h,simpleName:"BooleanIterator",interfaces:[Ut]},ee.prototype.hasNext=function(){return this.hasNext_0},ee.prototype.nextChar=function(){var t=this.next_0;if(t===this.finalElement_0){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0+this.step|0;return d(t)},ee.$metadata$={kind:h,simpleName:"CharProgressionIterator",interfaces:[Kt]},ie.prototype.hasNext=function(){return this.hasNext_0},ie.prototype.nextInt=function(){var t=this.next_0;if(t===this.finalElement_0){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0+this.step|0;return t},ie.$metadata$={kind:h,simpleName:"IntProgressionIterator",interfaces:[Yt]},ne.prototype.hasNext=function(){return this.hasNext_0},ne.prototype.nextLong=function(){var t=this.next_0;if(o(t,this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0.add(this.step);return t},ne.$metadata$={kind:h,simpleName:"LongProgressionIterator",interfaces:[Zt]},re.prototype.iterator=function(){return new ee(this.first,this.last,this.step)},re.prototype.isEmpty=function(){return this.step>0?this.first>this.last:this.first<this.last},re.prototype.equals=function(e){return t.isType(e,re)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last&&this.step===e.step)},re.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*(0|this.first)|0)+(0|this.last)|0)|0)+this.step|0},re.prototype.toString=function(){return this.step>0?String.fromCharCode(this.first)+".."+String.fromCharCode(this.last)+" step "+this.step:String.fromCharCode(this.first)+" downTo "+String.fromCharCode(this.last)+" step "+(0|-this.step)},oe.prototype.fromClosedRange_ayra44$=function(t,e,i){return new re(t,e,i)},oe.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var se=null;function ae(){return null===se&&new oe,se}function le(t,e,i){if(ce(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=Re(t,e,i),this.step=i}function ue(){pe=this}re.$metadata$={kind:h,simpleName:"CharProgression",interfaces:[Tt]},le.prototype.iterator=function(){return new ie(this.first,this.last,this.step)},le.prototype.isEmpty=function(){return this.step>0?this.first>this.last:this.first<this.last},le.prototype.equals=function(e){return t.isType(e,le)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last&&this.step===e.step)},le.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*this.first|0)+this.last|0)|0)+this.step|0},le.prototype.toString=function(){return this.step>0?this.first.toString()+".."+this.last+" step "+this.step:this.first.toString()+" downTo "+this.last+" step "+(0|-this.step)},ue.prototype.fromClosedRange_qt1dr2$=function(t,e,i){return new le(t,e,i)},ue.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var pe=null;function ce(){return null===pe&&new ue,pe}function he(t,e,i){if(_e(),o(i,u))throw yi("Step must be non-zero.");if(o(i,y))throw yi("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=Ie(t,e,i),this.step=i}function de(){fe=this}le.$metadata$={kind:h,simpleName:"IntProgression",interfaces:[Tt]},he.prototype.iterator=function(){return new ne(this.first,this.last,this.step)},he.prototype.isEmpty=function(){return this.step.toNumber()>0?this.first.compareTo_11rb$(this.last)>0:this.first.compareTo_11rb$(this.last)<0},he.prototype.equals=function(e){return t.isType(e,he)&&(this.isEmpty()&&e.isEmpty()||o(this.first,e.first)&&o(this.last,e.last)&&o(this.step,e.step))},he.prototype.hashCode=function(){return this.isEmpty()?-1:t.Long.fromInt(31).multiply(t.Long.fromInt(31).multiply(this.first.xor(this.first.shiftRightUnsigned(32))).add(this.last.xor(this.last.shiftRightUnsigned(32)))).add(this.step.xor(this.step.shiftRightUnsigned(32))).toInt()},he.prototype.toString=function(){return this.step.toNumber()>0?this.first.toString()+".."+this.last.toString()+" step "+this.step.toString():this.first.toString()+" downTo "+this.last.toString()+" step "+this.step.unaryMinus().toString()},de.prototype.fromClosedRange_b9bd0d$=function(t,e,i){return new he(t,e,i)},de.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var fe=null;function _e(){return null===fe&&new de,fe}function me(){}function $e(t,e){ge(),re.call(this,t,e,1)}function ye(){ve=this,this.EMPTY=new $e(d(1),d(0))}he.$metadata$={kind:h,simpleName:"LongProgression",interfaces:[Tt]},me.prototype.contains_mef7kx$=function(e){return t.compareTo(e,this.start)>=0&&t.compareTo(e,this.endInclusive)<=0},me.prototype.isEmpty=function(){return t.compareTo(this.start,this.endInclusive)>0},me.$metadata$={kind:z,simpleName:"ClosedRange",interfaces:[]},Object.defineProperty($e.prototype,"start",{configurable:!0,get:function(){return s(this.first)}}),Object.defineProperty($e.prototype,"endInclusive",{configurable:!0,get:function(){return s(this.last)}}),$e.prototype.contains_mef7kx$=function(t){return this.first<=t&&t<=this.last},$e.prototype.isEmpty=function(){return this.first>this.last},$e.prototype.equals=function(e){return t.isType(e,$e)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last)},$e.prototype.hashCode=function(){return this.isEmpty()?-1:(31*(0|this.first)|0)+(0|this.last)|0},$e.prototype.toString=function(){return String.fromCharCode(this.first)+".."+String.fromCharCode(this.last)},ye.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var ve=null;function ge(){return null===ve&&new ye,ve}function be(t,e){ze(),le.call(this,t,e,1)}function xe(){we=this,this.EMPTY=new be(1,0)}$e.$metadata$={kind:h,simpleName:"CharRange",interfaces:[me,re]},Object.defineProperty(be.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(be.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),be.prototype.contains_mef7kx$=function(t){return this.first<=t&&t<=this.last},be.prototype.isEmpty=function(){return this.first>this.last},be.prototype.equals=function(e){return t.isType(e,be)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last)},be.prototype.hashCode=function(){return this.isEmpty()?-1:(31*this.first|0)+this.last|0},be.prototype.toString=function(){return this.first.toString()+".."+this.last},xe.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var we=null;function ze(){return null===we&&new xe,we}function ke(t,e){Ne(),he.call(this,t,e,C)}function Se(){Ce=this,this.EMPTY=new ke(C,u)}be.$metadata$={kind:h,simpleName:"IntRange",interfaces:[me,le]},Object.defineProperty(ke.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(ke.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),ke.prototype.contains_mef7kx$=function(t){return this.first.compareTo_11rb$(t)<=0&&t.compareTo_11rb$(this.last)<=0},ke.prototype.isEmpty=function(){return this.first.compareTo_11rb$(this.last)>0},ke.prototype.equals=function(e){return t.isType(e,ke)&&(this.isEmpty()&&e.isEmpty()||o(this.first,e.first)&&o(this.last,e.last))},ke.prototype.hashCode=function(){return this.isEmpty()?-1:t.Long.fromInt(31).multiply(this.first.xor(this.first.shiftRightUnsigned(32))).add(this.last.xor(this.last.shiftRightUnsigned(32))).toInt()},ke.prototype.toString=function(){return this.first.toString()+".."+this.last.toString()},Se.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ce=null;function Ne(){return null===Ce&&new Se,Ce}function Ee(){Pe=this}ke.$metadata$={kind:h,simpleName:"LongRange",interfaces:[me,he]},Ee.prototype.toString=function(){return"kotlin.Unit"},Ee.$metadata$={kind:S,simpleName:"Unit",interfaces:[]};var Pe=null;function Te(){return null===Pe&&new Ee,Pe}function Oe(t,e){var i=t%e;return i>=0?i:i+e|0}function Me(t,e){var i=t.modulo(e);return i.toNumber()>=0?i:i.add(e)}function je(t,e,i){return Oe(Oe(t,i)-Oe(e,i)|0,i)}function Ae(t,e,i){return Me(Me(t,i).subtract(Me(e,i)),i)}function Re(t,e,i){if(i>0)return t>=e?e:e-je(e,t,i)|0;if(i<0)return t<=e?e:e+je(t,e,0|-i)|0;throw yi("Step is zero.")}function Ie(t,e,i){if(i.toNumber()>0)return t.compareTo_11rb$(e)>=0?e:e.subtract(Ae(e,t,i));if(i.toNumber()<0)return t.compareTo_11rb$(e)<=0?e:e.add(Ae(t,e,i.unaryMinus()));throw yi("Step is zero.")}function Le(t){this.closure$arr=t,this.index=0}function De(t){this.closure$array=t,te.call(this),this.index=0}function qe(t){return new De(t)}function Be(t){this.closure$array=t,Wt.call(this),this.index=0}function Fe(t){return new Be(t)}function Ue(t){this.closure$array=t,Xt.call(this),this.index=0}function Ve(t){return new Ue(t)}function Ge(t){this.closure$array=t,Kt.call(this),this.index=0}function He(t){return new Ge(t)}function We(t){this.closure$array=t,Yt.call(this),this.index=0}function Ke(t){return new We(t)}function Xe(t){this.closure$array=t,Jt.call(this),this.index=0}function Ye(t){return new Xe(t)}function Ze(t){this.closure$array=t,Qt.call(this),this.index=0}function Je(t){return new Ze(t)}function Qe(t){this.closure$array=t,Zt.call(this),this.index=0}function ti(t){return new Qe(t)}function ei(t){this.c=t}function ii(t){this.resultContinuation_0=t,this.state_0=0,this.exceptionState_0=0,this.result_0=null,this.exception_0=null,this.finallyPath_0=null,this.context_hxcuhl$_0=this.resultContinuation_0.context,this.intercepted__0=null}function ni(){oi=this}Le.prototype.hasNext=function(){return this.index<this.closure$arr.length},Le.prototype.next=function(){var t;if(this.index<this.closure$arr.length)return this.closure$arr[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Le.$metadata$={kind:h,interfaces:[Ut]},De.prototype.hasNext=function(){return this.index<this.closure$array.length},De.prototype.nextBoolean=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},De.$metadata$={kind:h,interfaces:[te]},Be.prototype.hasNext=function(){return this.index<this.closure$array.length},Be.prototype.nextByte=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Be.$metadata$={kind:h,interfaces:[Wt]},Ue.prototype.hasNext=function(){return this.index<this.closure$array.length},Ue.prototype.nextShort=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ue.$metadata$={kind:h,interfaces:[Xt]},Ge.prototype.hasNext=function(){return this.index<this.closure$array.length},Ge.prototype.nextChar=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ge.$metadata$={kind:h,interfaces:[Kt]},We.prototype.hasNext=function(){return this.index<this.closure$array.length},We.prototype.nextInt=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},We.$metadata$={kind:h,interfaces:[Yt]},Xe.prototype.hasNext=function(){return this.index<this.closure$array.length},Xe.prototype.nextFloat=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Xe.$metadata$={kind:h,interfaces:[Jt]},Ze.prototype.hasNext=function(){return this.index<this.closure$array.length},Ze.prototype.nextDouble=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ze.$metadata$={kind:h,interfaces:[Qt]},Qe.prototype.hasNext=function(){return this.index<this.closure$array.length},Qe.prototype.nextLong=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Qe.$metadata$={kind:h,interfaces:[Zt]},ei.prototype.equals=function(e){return t.isType(e,ei)&&this.c===e.c},ei.prototype.hashCode=function(){return this.c},ei.prototype.toString=function(){return String.fromCharCode(a(this.c))},ei.prototype.compareTo_11rb$=function(t){return this.c-t},ei.prototype.valueOf=function(){return this.c},ei.$metadata$={kind:h,simpleName:"BoxedChar",interfaces:[E]},Object.defineProperty(ii.prototype,"context",{configurable:!0,get:function(){return this.context_hxcuhl$_0}}),ii.prototype.intercepted=function(){var t,e,i,n;if(null!=(i=this.intercepted__0))n=i;else{var r=null!=(e=null!=(t=this.context.get_j3r2sn$(Us()))?t.interceptContinuation_wj8d80$(this):null)?e:this;this.intercepted__0=r,n=r}return n},ii.prototype.resumeWith_tl1gpc$=function(e){for(var i,n={v:this},r={v:e.isFailure?null:null==(i=e.value)||t.isType(i,k)?i:T()},o={v:e.exceptionOrNull()};;){var s,a,l=n.v,u=l.resultContinuation_0;null==o.v?l.result_0=r.v:(l.state_0=l.exceptionState_0,l.exception_0=o.v);try{var p=l.doResume();if(p===aa())return;r.v=p,o.v=null}catch(t){r.v=null,o.v=t}if(l.releaseIntercepted_0(),!t.isType(u,ii))return null!=(s=o.v)?(u.resumeWith_tl1gpc$(new dl(yl(s))),a=Ee):a=null,void(null==a&&u.resumeWith_tl1gpc$(new dl(r.v)));n.v=u}},ii.prototype.releaseIntercepted_0=function(){var t=this.intercepted__0;null!=t&&t!==this&&P(this.context.get_j3r2sn$(Us())).releaseInterceptedContinuation_k98bjh$(t),this.intercepted__0=si()},ii.$metadata$={kind:h,simpleName:"CoroutineImpl",interfaces:[Ds]},Object.defineProperty(ni.prototype,"context",{configurable:!0,get:function(){throw gi("This continuation is already complete".toString())}}),ni.prototype.resumeWith_tl1gpc$=function(t){throw gi("This continuation is already complete".toString())},ni.prototype.toString=function(){return"This continuation is already complete"},ni.$metadata$={kind:S,simpleName:"CompletedContinuation",interfaces:[Ds]};var ri,oi=null;function si(){return null===oi&&new ni,oi}function ai(t,e){this.closure$block=t,ii.call(this,e)}function li(e,i){return 2==e.length?e(i,!0):new ai((r=e,o=i,function(){return r(o)}),t.isType(n=i,Ds)?n:ir());var n,r,o}function ui(e,i,n){return 3==e.length?e(i,n,!0):new ai((o=e,s=i,a=n,function(){return o(s,a)}),t.isType(r=n,Ds)?r:ir());var r,o,s,a}function pi(e){var i,n,r;return null!=(r=null!=(n=t.isType(i=e,ii)?i:null)?n.intercepted():null)?r:e}function ci(e,i){var n;O.call(this),n=null!=i?i:null,this.message_q7r8iu$_0=void 0===e&&null!=n?t.toString(n):e,this.cause_us9j0c$_0=n,t.captureStack(O,this),this.name="Error"}function hi(t,e){return e=e||Object.create(ci.prototype),ci.call(e,t,null),e}function di(e,i){var n;O.call(this),n=null!=i?i:null,this.message_8yp7un$_0=void 0===e&&null!=n?t.toString(n):e,this.cause_th0jdv$_0=n,t.captureStack(O,this),this.name="Exception"}function fi(t,e){return e=e||Object.create(di.prototype),di.call(e,t,null),e}function _i(t,e){di.call(this,t,e),this.name="RuntimeException"}function mi(t,e){return e=e||Object.create(_i.prototype),_i.call(e,t,null),e}function $i(t,e){_i.call(this,t,e),this.name="IllegalArgumentException"}function yi(t,e){return e=e||Object.create($i.prototype),$i.call(e,t,null),e}function vi(t,e){_i.call(this,t,e),this.name="IllegalStateException"}function gi(t,e){return e=e||Object.create(vi.prototype),vi.call(e,t,null),e}function bi(t){mi(t,this),this.name="IndexOutOfBoundsException"}function xi(t,e){_i.call(this,t,e),this.name="UnsupportedOperationException"}function wi(t){return t=t||Object.create(xi.prototype),xi.call(t,null,null),t}function zi(t,e){return e=e||Object.create(xi.prototype),xi.call(e,t,null),e}function ki(t){yi(t,this),this.name="NumberFormatException"}function Si(t){mi(t,this),this.name="NullPointerException"}function Ci(t){mi(t,this),this.name="ClassCastException"}function Ni(t){mi(t,this),this.name="NoSuchElementException"}function Ei(t){return t=t||Object.create(Ni.prototype),Ni.call(t,null),t}function Pi(t){mi(t,this),this.name="ArithmeticException"}function Ti(t,e){_i.call(this,t,e),this.name="NoWhenBranchMatchedException"}function Oi(t){return t=t||Object.create(Ti.prototype),Ti.call(t,null,null),t}function Mi(t,e){_i.call(this,t,e),this.name="UninitializedPropertyAccessException"}function ji(t,e){return e=e||Object.create(Mi.prototype),Mi.call(e,t,null),e}function Ai(t,e){for(var i,n=t.length,r=e.length,o=0;o<n&&o<r;)e[o]=t[(i=o,o=i+1|0,i)];return e}function Ri(t,e,i){var n,r=t.slice(0,e);void 0!==t.$type$&&(r.$type$=t.$type$);var o=t.length;if(e>o)for(r.length=e;o<e;)r[(n=o,o=n+1|0,n)]=i;return r}function Ii(t,e){return t.toString(fo(e))}function Li(t){return new pn(t)}function Di(t,e,i){return To().checkRangeIndexes_cub51b$(e,i,t.length),t.slice(e,i)}function qi(t){var e=(t.size/2|0)-1|0;if(!(e<0))for(var i=ts(t),n=0;n<=e;n++){var r=t.get_za3lpa$(n);t.set_wxm5ur$(n,t.get_za3lpa$(i)),t.set_wxm5ur$(i,r),i=i-1|0}}function Bi(t){this.function$=t}function Fi(t){return void 0!==t.toArray?t.toArray():Ui(t)}function Ui(t){for(var e=[],i=t.iterator();i.hasNext();)e.push(i.next());return e}function Vi(t,e){var i;if(e.length<t.size)return Ui(t);for(var n=t.iterator(),r=0;n.hasNext();)e[(i=r,r=i+1|0,i)]=n.next();return r<e.length&&(e[r]=null),e}function Gi(t){return Qo([t])}function Hi(t){return Ls([t])}function Wi(t){return ms([t])}function Ki(t){at(t,ma())}function Xi(t){return t<0&&is(),t}function Yi(t){return t}function Zi(){Co.call(this)}function Ji(){Zi.call(this),this.modCount=0}function Qi(t){this.$outer=t,this.index_0=0,this.last_0=-1}function tn(t,e){this.$outer=t,Qi.call(this,this.$outer),To().checkPositionIndex_6xvm5r$(e,this.$outer.size),this.index_0=e}function en(t,e,i){Ji.call(this),this.list_0=t,this.fromIndex_0=e,this._size_0=0,To().checkRangeIndexes_cub51b$(this.fromIndex_0,i,this.list_0.size),this._size_0=i-this.fromIndex_0|0}function nn(){Oo.call(this),this._keys_qe2m0n$_0=null,this._values_kxdlqh$_0=null}function rn(t,e){this.key_5xhq3d$_0=t,this._value_0=e}function on(t){this.this$AbstractMutableMap=t,un.call(this)}function sn(t){this.closure$entryIterator=t}function an(t){this.this$AbstractMutableMap=t,Zi.call(this)}function ln(t){this.closure$entryIterator=t}function un(){Zi.call(this)}function pn(t){Ji.call(this),this.array_hd7ov6$_0=t,this.isReadOnly_dbt2oh$_0=!1}function cn(t){return t=t||Object.create(pn.prototype),pn.call(t,[]),t}function hn(t,e){return void 0===t&&(t=0),e=e||Object.create(pn.prototype),pn.call(e,[]),e}function dn(t,e){return e=e||Object.create(pn.prototype),pn.call(e,Fi(t)),e}function fn(e,i){if(function(){if(null!=ri)return ri;ri=!1;for(var t=[],e=0;e<600;e++)t.push(e);var i=_n;t.sort(i);for(var n=1;n<t.length;n++){var r=t[n-1|0],o=t[n];if((3&r)==(3&o)&&r>=o)return!1}return ri=!0,!0}()){var n=(r=i,function(t,e){return r.compare(t,e)});e.sort(n)}else!function(e,i,n,r){var o=t.newArray(e.length,null),s=function t(e,i,n,r,o){if(n===r)return e;for(var s=(n+r|0)/2|0,a=t(e,i,n,s,o),l=t(e,i,s+1|0,r,o),u=a===i?e:i,p=n,c=s+1|0,h=n;h<=r;h++)if(p<=s&&c<=r){var d=a[p],f=l[c];o.compare(d,f)<=0?(u[h]=d,p=p+1|0):(u[h]=f,c=c+1|0)}else p<=s?(u[h]=a[p],p=p+1|0):(u[h]=l[c],c=c+1|0);return u}(e,o,i,n,r);if(s!==e)for(var a=i;a<=n;a++)e[a]=s[a]}(e,0,X(e),i);var r}function _n(t,e){return(3&t)-(3&e)|0}function mn(){}function $n(){bn=this}ai.prototype=Object.create(ii.prototype),ai.prototype.constructor=ai,ai.prototype.doResume=function(){var t;if(null!=(t=this.exception_0))throw t;return this.closure$block()},ai.$metadata$={kind:h,interfaces:[ii]},Object.defineProperty(ci.prototype,"message",{get:function(){return this.message_q7r8iu$_0}}),Object.defineProperty(ci.prototype,"cause",{get:function(){return this.cause_us9j0c$_0}}),ci.$metadata$={kind:h,simpleName:"Error",interfaces:[O]},Object.defineProperty(di.prototype,"message",{get:function(){return this.message_8yp7un$_0}}),Object.defineProperty(di.prototype,"cause",{get:function(){return this.cause_th0jdv$_0}}),di.$metadata$={kind:h,simpleName:"Exception",interfaces:[O]},_i.$metadata$={kind:h,simpleName:"RuntimeException",interfaces:[di]},$i.$metadata$={kind:h,simpleName:"IllegalArgumentException",interfaces:[_i]},vi.$metadata$={kind:h,simpleName:"IllegalStateException",interfaces:[_i]},bi.$metadata$={kind:h,simpleName:"IndexOutOfBoundsException",interfaces:[_i]},xi.$metadata$={kind:h,simpleName:"UnsupportedOperationException",interfaces:[_i]},ki.$metadata$={kind:h,simpleName:"NumberFormatException",interfaces:[$i]},Si.$metadata$={kind:h,simpleName:"NullPointerException",interfaces:[_i]},Ci.$metadata$={kind:h,simpleName:"ClassCastException",interfaces:[_i]},Ni.$metadata$={kind:h,simpleName:"NoSuchElementException",interfaces:[_i]},Pi.$metadata$={kind:h,simpleName:"ArithmeticException",interfaces:[_i]},Ti.$metadata$={kind:h,simpleName:"NoWhenBranchMatchedException",interfaces:[_i]},Mi.$metadata$={kind:h,simpleName:"UninitializedPropertyAccessException",interfaces:[_i]},Bi.prototype.compare=function(t,e){return this.function$(t,e)},Bi.$metadata$={kind:z,simpleName:"Comparator",interfaces:[]},Zi.prototype.remove_11rb$=function(t){this.checkIsMutable();for(var e=this.iterator();e.hasNext();)if(o(e.next(),t))return e.remove(),!0;return!1},Zi.prototype.addAll_brywnq$=function(t){var e;this.checkIsMutable();var i=!1;for(e=t.iterator();e.hasNext();){var n=e.next();this.add_11rb$(n)&&(i=!0)}return i},Zi.prototype.removeAll_brywnq$=function(e){var i;return this.checkIsMutable(),xs(t.isType(this,Ot)?this:ir(),(i=e,function(t){return i.contains_11rb$(t)}))},Zi.prototype.retainAll_brywnq$=function(e){var i;return this.checkIsMutable(),xs(t.isType(this,Ot)?this:ir(),(i=e,function(t){return!i.contains_11rb$(t)}))},Zi.prototype.clear=function(){this.checkIsMutable();for(var t=this.iterator();t.hasNext();)t.next(),t.remove()},Zi.prototype.toJSON=function(){return this.toArray()},Zi.prototype.checkIsMutable=function(){},Zi.$metadata$={kind:h,simpleName:"AbstractMutableCollection",interfaces:[jt,Co]},Ji.prototype.add_11rb$=function(t){return this.checkIsMutable(),this.add_wxm5ur$(this.size,t),!0},Ji.prototype.addAll_u57x28$=function(t,e){var i,n;this.checkIsMutable();var r=t,o=!1;for(i=e.iterator();i.hasNext();){var s=i.next();this.add_wxm5ur$((r=(n=r)+1|0,n),s),o=!0}return o},Ji.prototype.clear=function(){this.checkIsMutable(),this.removeRange_vux9f0$(0,this.size)},Ji.prototype.removeAll_brywnq$=function(t){return this.checkIsMutable(),zs(this,(e=t,function(t){return e.contains_11rb$(t)}));var e},Ji.prototype.retainAll_brywnq$=function(t){return this.checkIsMutable(),zs(this,(e=t,function(t){return!e.contains_11rb$(t)}));var e},Ji.prototype.iterator=function(){return new Qi(this)},Ji.prototype.contains_11rb$=function(t){return this.indexOf_11rb$(t)>=0},Ji.prototype.indexOf_11rb$=function(t){var e;e=ts(this);for(var i=0;i<=e;i++)if(o(this.get_za3lpa$(i),t))return i;return-1},Ji.prototype.lastIndexOf_11rb$=function(t){for(var e=ts(this);e>=0;e--)if(o(this.get_za3lpa$(e),t))return e;return-1},Ji.prototype.listIterator=function(){return this.listIterator_za3lpa$(0)},Ji.prototype.listIterator_za3lpa$=function(t){return new tn(this,t)},Ji.prototype.subList_vux9f0$=function(t,e){return new en(this,t,e)},Ji.prototype.removeRange_vux9f0$=function(t,e){for(var i=this.listIterator_za3lpa$(t),n=e-t|0,r=0;r<n;r++)i.next(),i.remove()},Ji.prototype.equals=function(e){return e===this||!!t.isType(e,At)&&To().orderedEquals_e92ka7$(this,e)},Ji.prototype.hashCode=function(){return To().orderedHashCode_nykoif$(this)},Qi.prototype.hasNext=function(){return this.index_0<this.$outer.size},Qi.prototype.next=function(){var t;if(!this.hasNext())throw Ei();return this.last_0=(t=this.index_0,this.index_0=t+1|0,t),this.$outer.get_za3lpa$(this.last_0)},Qi.prototype.remove=function(){if(-1===this.last_0)throw gi("Call next() or previous() before removing element from the iterator.".toString());this.$outer.removeAt_za3lpa$(this.last_0),this.index_0=this.last_0,this.last_0=-1},Qi.$metadata$={kind:h,simpleName:"IteratorImpl",interfaces:[Vt]},tn.prototype.hasPrevious=function(){return this.index_0>0},tn.prototype.nextIndex=function(){return this.index_0},tn.prototype.previous=function(){if(!this.hasPrevious())throw Ei();return this.last_0=(this.index_0=this.index_0-1|0,this.index_0),this.$outer.get_za3lpa$(this.last_0)},tn.prototype.previousIndex=function(){return this.index_0-1|0},tn.prototype.add_11rb$=function(t){this.$outer.add_wxm5ur$(this.index_0,t),this.index_0=this.index_0+1|0,this.last_0=-1},tn.prototype.set_11rb$=function(t){if(-1===this.last_0)throw gi("Call next() or previous() before updating element value with the iterator.".toString());this.$outer.set_wxm5ur$(this.last_0,t)},tn.$metadata$={kind:h,simpleName:"ListIteratorImpl",interfaces:[Ht,Qi]},en.prototype.add_wxm5ur$=function(t,e){To().checkPositionIndex_6xvm5r$(t,this._size_0),this.list_0.add_wxm5ur$(this.fromIndex_0+t|0,e),this._size_0=this._size_0+1|0},en.prototype.get_za3lpa$=function(t){return To().checkElementIndex_6xvm5r$(t,this._size_0),this.list_0.get_za3lpa$(this.fromIndex_0+t|0)},en.prototype.removeAt_za3lpa$=function(t){To().checkElementIndex_6xvm5r$(t,this._size_0);var e=this.list_0.removeAt_za3lpa$(this.fromIndex_0+t|0);return this._size_0=this._size_0-1|0,e},en.prototype.set_wxm5ur$=function(t,e){return To().checkElementIndex_6xvm5r$(t,this._size_0),this.list_0.set_wxm5ur$(this.fromIndex_0+t|0,e)},Object.defineProperty(en.prototype,"size",{configurable:!0,get:function(){return this._size_0}}),en.prototype.checkIsMutable=function(){this.list_0.checkIsMutable()},en.$metadata$={kind:h,simpleName:"SubList",interfaces:[Xn,Ji]},Ji.$metadata$={kind:h,simpleName:"AbstractMutableList",interfaces:[Rt,Zi]},Object.defineProperty(rn.prototype,"key",{get:function(){return this.key_5xhq3d$_0}}),Object.defineProperty(rn.prototype,"value",{configurable:!0,get:function(){return this._value_0}}),rn.prototype.setValue_11rc$=function(t){var e=this._value_0;return this._value_0=t,e},rn.prototype.hashCode=function(){return Do().entryHashCode_9fthdn$(this)},rn.prototype.toString=function(){return Do().entryToString_9fthdn$(this)},rn.prototype.equals=function(t){return Do().entryEquals_js7fox$(this,t)},rn.$metadata$={kind:h,simpleName:"SimpleEntry",interfaces:[Ft]},nn.prototype.clear=function(){this.entries.clear()},on.prototype.add_11rb$=function(t){throw zi("Add is not supported on keys")},on.prototype.clear=function(){this.this$AbstractMutableMap.clear()},on.prototype.contains_11rb$=function(t){return this.this$AbstractMutableMap.containsKey_11rb$(t)},sn.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},sn.prototype.next=function(){return this.closure$entryIterator.next().key},sn.prototype.remove=function(){this.closure$entryIterator.remove()},sn.$metadata$={kind:h,interfaces:[Vt]},on.prototype.iterator=function(){return new sn(this.this$AbstractMutableMap.entries.iterator())},on.prototype.remove_11rb$=function(t){return this.checkIsMutable(),!!this.this$AbstractMutableMap.containsKey_11rb$(t)&&(this.this$AbstractMutableMap.remove_11rb$(t),!0)},Object.defineProperty(on.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMutableMap.size}}),on.prototype.checkIsMutable=function(){this.this$AbstractMutableMap.checkIsMutable()},on.$metadata$={kind:h,interfaces:[un]},Object.defineProperty(nn.prototype,"keys",{configurable:!0,get:function(){return null==this._keys_qe2m0n$_0&&(this._keys_qe2m0n$_0=new on(this)),P(this._keys_qe2m0n$_0)}}),nn.prototype.putAll_a2k3zr$=function(t){var e;for(this.checkIsMutable(),e=t.entries.iterator();e.hasNext();){var i=e.next(),n=i.key,r=i.value;this.put_xwzc9p$(n,r)}},an.prototype.add_11rb$=function(t){throw zi("Add is not supported on values")},an.prototype.clear=function(){this.this$AbstractMutableMap.clear()},an.prototype.contains_11rb$=function(t){return this.this$AbstractMutableMap.containsValue_11rc$(t)},ln.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},ln.prototype.next=function(){return this.closure$entryIterator.next().value},ln.prototype.remove=function(){this.closure$entryIterator.remove()},ln.$metadata$={kind:h,interfaces:[Vt]},an.prototype.iterator=function(){return new ln(this.this$AbstractMutableMap.entries.iterator())},Object.defineProperty(an.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMutableMap.size}}),an.prototype.equals=function(e){return this===e||!!t.isType(e,Mt)&&To().orderedEquals_e92ka7$(this,e)},an.prototype.hashCode=function(){return To().orderedHashCode_nykoif$(this)},an.prototype.checkIsMutable=function(){this.this$AbstractMutableMap.checkIsMutable()},an.$metadata$={kind:h,interfaces:[Zi]},Object.defineProperty(nn.prototype,"values",{configurable:!0,get:function(){return null==this._values_kxdlqh$_0&&(this._values_kxdlqh$_0=new an(this)),P(this._values_kxdlqh$_0)}}),nn.prototype.remove_11rb$=function(t){this.checkIsMutable();for(var e=this.entries.iterator();e.hasNext();){var i=e.next(),n=i.key;if(o(t,n)){var r=i.value;return e.remove(),r}}return null},nn.prototype.checkIsMutable=function(){},nn.$metadata$={kind:h,simpleName:"AbstractMutableMap",interfaces:[Bt,Oo]},un.prototype.equals=function(e){return e===this||!!t.isType(e,It)&&Uo().setEquals_y8f7en$(this,e)},un.prototype.hashCode=function(){return Uo().unorderedHashCode_nykoif$(this)},un.$metadata$={kind:h,simpleName:"AbstractMutableSet",interfaces:[Lt,Zi]},pn.prototype.build=function(){return this.checkIsMutable(),this.isReadOnly_dbt2oh$_0=!0,this},pn.prototype.trimToSize=function(){},pn.prototype.ensureCapacity_za3lpa$=function(t){},Object.defineProperty(pn.prototype,"size",{configurable:!0,get:function(){return this.array_hd7ov6$_0.length}}),pn.prototype.get_za3lpa$=function(e){var i;return null==(i=this.array_hd7ov6$_0[this.rangeCheck_xcmk5o$_0(e)])||t.isType(i,k)?i:ir()},pn.prototype.set_wxm5ur$=function(e,i){var n;this.checkIsMutable(),this.rangeCheck_xcmk5o$_0(e);var r=this.array_hd7ov6$_0[e];return this.array_hd7ov6$_0[e]=i,null==(n=r)||t.isType(n,k)?n:ir()},pn.prototype.add_11rb$=function(t){return this.checkIsMutable(),this.array_hd7ov6$_0.push(t),this.modCount=this.modCount+1|0,!0},pn.prototype.add_wxm5ur$=function(t,e){this.checkIsMutable(),this.array_hd7ov6$_0.splice(this.insertionRangeCheck_xwivfl$_0(t),0,e),this.modCount=this.modCount+1|0},pn.prototype.addAll_brywnq$=function(t){return this.checkIsMutable(),!t.isEmpty()&&(this.array_hd7ov6$_0=this.array_hd7ov6$_0.concat(Fi(t)),this.modCount=this.modCount+1|0,!0)},pn.prototype.addAll_u57x28$=function(t,e){return this.checkIsMutable(),this.insertionRangeCheck_xwivfl$_0(t),t===this.size?this.addAll_brywnq$(e):!e.isEmpty()&&(t===this.size?this.addAll_brywnq$(e):(this.array_hd7ov6$_0=0===t?Fi(e).concat(this.array_hd7ov6$_0):Di(this.array_hd7ov6$_0,0,t).concat(Fi(e),Di(this.array_hd7ov6$_0,t,this.size)),this.modCount=this.modCount+1|0,!0))},pn.prototype.removeAt_za3lpa$=function(t){return this.checkIsMutable(),this.rangeCheck_xcmk5o$_0(t),this.modCount=this.modCount+1|0,t===ts(this)?this.array_hd7ov6$_0.pop():this.array_hd7ov6$_0.splice(t,1)[0]},pn.prototype.remove_11rb$=function(t){var e;this.checkIsMutable(),e=this.array_hd7ov6$_0;for(var i=0;i!==e.length;++i)if(o(this.array_hd7ov6$_0[i],t))return this.array_hd7ov6$_0.splice(i,1),this.modCount=this.modCount+1|0,!0;return!1},pn.prototype.removeRange_vux9f0$=function(t,e){this.checkIsMutable(),this.modCount=this.modCount+1|0,this.array_hd7ov6$_0.splice(t,e-t|0)},pn.prototype.clear=function(){this.checkIsMutable(),this.array_hd7ov6$_0=[],this.modCount=this.modCount+1|0},pn.prototype.indexOf_11rb$=function(t){return G(this.array_hd7ov6$_0,t)},pn.prototype.lastIndexOf_11rb$=function(t){return H(this.array_hd7ov6$_0,t)},pn.prototype.toString=function(){return M(this.array_hd7ov6$_0)},pn.prototype.toArray=function(){return[].slice.call(this.array_hd7ov6$_0)},pn.prototype.checkIsMutable=function(){if(this.isReadOnly_dbt2oh$_0)throw wi()},pn.prototype.rangeCheck_xcmk5o$_0=function(t){return To().checkElementIndex_6xvm5r$(t,this.size),t},pn.prototype.insertionRangeCheck_xwivfl$_0=function(t){return To().checkPositionIndex_6xvm5r$(t,this.size),t},pn.$metadata$={kind:h,simpleName:"ArrayList",interfaces:[Xn,Ji,Rt]},$n.prototype.equals_oaftn8$=function(t,e){return o(t,e)},$n.prototype.getHashCode_s8jyv4$=function(t){var e;return null!=(e=null!=t?j(t):null)?e:0},$n.$metadata$={kind:S,simpleName:"HashCode",interfaces:[mn]};var yn,vn,gn,bn=null;function xn(){return null===bn&&new $n,bn}function wn(){this.internalMap_uxhen5$_0=null,this.equality_vgh6cm$_0=null,this._entries_7ih87x$_0=null}function zn(t){this.$outer=t,un.call(this)}function kn(t,e){return e=e||Object.create(wn.prototype),nn.call(e),wn.call(e),e.internalMap_uxhen5$_0=t,e.equality_vgh6cm$_0=t.equality,e}function Sn(t){return t=t||Object.create(wn.prototype),kn(new Mn(xn()),t),t}function Cn(t,e,i){if(void 0===e&&(e=0),Sn(i=i||Object.create(wn.prototype)),!(t>=0))throw yi(("Negative initial capacity: "+t).toString());if(!(e>=0))throw yi(("Non-positive load factor: "+e).toString());return i}function Nn(t,e){return Cn(t,0,e=e||Object.create(wn.prototype)),e}function En(){this.map_8be2vx$=null}function Pn(t,e,i){return void 0===e&&(e=0),i=i||Object.create(En.prototype),un.call(i),En.call(i),i.map_8be2vx$=Cn(t,e),i}function Tn(t,e){return Pn(t,0,e=e||Object.create(En.prototype)),e}function On(t,e){return e=e||Object.create(En.prototype),un.call(e),En.call(e),e.map_8be2vx$=t,e}function Mn(t){this.equality_mamlu8$_0=t,this.backingMap_0=this.createJsMap(),this.size_x3bm7r$_0=0}function jn(t){this.this$InternalHashCodeMap=t,this.state=-1,this.keys=Object.keys(t.backingMap_0),this.keyIndex=-1,this.chainOrEntry=null,this.isChain=!1,this.itemIndex=-1,this.lastEntry=null}function An(){}function Rn(t){this.equality_qma612$_0=t,this.backingMap_0=this.createJsMap(),this.size_6u3ykz$_0=0}function In(){this.head_1lr44l$_0=null,this.map_97q5dv$_0=null,this.isReadOnly_uhyvn5$_0=!1}function Ln(t,e,i){this.$outer=t,rn.call(this,e,i),this.next_8be2vx$=null,this.prev_8be2vx$=null}function Dn(t){this.$outer=t,un.call(this)}function qn(t){this.$outer=t,this.last_0=null,this.next_0=null,this.next_0=this.$outer.$outer.head_1lr44l$_0}function Bn(t){return Sn(t=t||Object.create(In.prototype)),In.call(t),t.map_97q5dv$_0=Sn(),t}function Fn(t,e,i){return void 0===e&&(e=0),Cn(t,e,i=i||Object.create(In.prototype)),In.call(i),i.map_97q5dv$_0=Sn(),i}function Un(t,e){return Fn(t,0,e=e||Object.create(In.prototype)),e}function Vn(){}function Gn(t){return t=t||Object.create(Vn.prototype),On(Bn(),t),Vn.call(t),t}function Hn(t,e){return e=e||Object.create(Vn.prototype),On(Bn(),e),Vn.call(e),e.addAll_brywnq$(t),e}function Wn(t,e,i){return void 0===e&&(e=0),i=i||Object.create(Vn.prototype),On(Fn(t,e),i),Vn.call(i),i}function Kn(t,e){return Wn(t,0,e=e||Object.create(Vn.prototype)),e}function Xn(){}function Yn(){}function Zn(t){Yn.call(this),this.outputStream=t}function Jn(){Yn.call(this),this.buffer=""}function Qn(){Jn.call(this)}function tr(t,e){this.delegate_0=t,this.result_0=e}function er(t,e){this.closure$context=t,this.closure$resumeWith=e}function ir(){throw new Ci("Illegal cast")}function nr(t){throw gi(t)}function rr(){}function or(e){if(sr(e)||e===l.NEGATIVE_INFINITY)return e;if(0===e)return-l.MIN_VALUE;var i=A(e).add(t.Long.fromInt(e>0?-1:1));return t.doubleFromBits(i)}function sr(t){return t!=t}function ar(t){return t!=t}function lr(t){return t===l.POSITIVE_INFINITY||t===l.NEGATIVE_INFINITY}function ur(t){return t===R.POSITIVE_INFINITY||t===R.NEGATIVE_INFINITY}function pr(t){return!lr(t)&&!sr(t)}function cr(){return $a(Math.random()*Math.pow(2,32)|0)}function hr(t,e){return t*vn+e*gn}function dr(){}function fr(){}function _r(t){this.jClass_1ppatx$_0=t}function mr(t){var e;_r.call(this,t),this.simpleName_m7mxi0$_0=null!=(e=t.$metadata$)?e.simpleName:null}function $r(t,e,i){_r.call(this,t),this.givenSimpleName_0=e,this.isInstanceFunction_0=i}function yr(){vr=this,_r.call(this,Object),this.simpleName_lnzy73$_0="Nothing"}mn.$metadata$={kind:z,simpleName:"EqualityComparator",interfaces:[]},zn.prototype.add_11rb$=function(t){throw zi("Add is not supported on entries")},zn.prototype.clear=function(){this.$outer.clear()},zn.prototype.contains_11rb$=function(t){return this.$outer.containsEntry_8hxqw4$(t)},zn.prototype.iterator=function(){return this.$outer.internalMap_uxhen5$_0.iterator()},zn.prototype.remove_11rb$=function(t){return!!this.contains_11rb$(t)&&(this.$outer.remove_11rb$(t.key),!0)},Object.defineProperty(zn.prototype,"size",{configurable:!0,get:function(){return this.$outer.size}}),zn.$metadata$={kind:h,simpleName:"EntrySet",interfaces:[un]},wn.prototype.clear=function(){this.internalMap_uxhen5$_0.clear()},wn.prototype.containsKey_11rb$=function(t){return this.internalMap_uxhen5$_0.contains_11rb$(t)},wn.prototype.containsValue_11rc$=function(e){var i,n=this.internalMap_uxhen5$_0;t:do{var r;if(t.isType(n,Mt)&&n.isEmpty()){i=!1;break t}for(r=n.iterator();r.hasNext();){var o=r.next();if(this.equality_vgh6cm$_0.equals_oaftn8$(o.value,e)){i=!0;break t}}i=!1}while(0);return i},Object.defineProperty(wn.prototype,"entries",{configurable:!0,get:function(){return null==this._entries_7ih87x$_0&&(this._entries_7ih87x$_0=this.createEntrySet()),P(this._entries_7ih87x$_0)}}),wn.prototype.createEntrySet=function(){return new zn(this)},wn.prototype.get_11rb$=function(t){return this.internalMap_uxhen5$_0.get_11rb$(t)},wn.prototype.put_xwzc9p$=function(t,e){return this.internalMap_uxhen5$_0.put_xwzc9p$(t,e)},wn.prototype.remove_11rb$=function(t){return this.internalMap_uxhen5$_0.remove_11rb$(t)},Object.defineProperty(wn.prototype,"size",{configurable:!0,get:function(){return this.internalMap_uxhen5$_0.size}}),wn.$metadata$={kind:h,simpleName:"HashMap",interfaces:[nn,Bt]},En.prototype.add_11rb$=function(t){return null==this.map_8be2vx$.put_xwzc9p$(t,this)},En.prototype.clear=function(){this.map_8be2vx$.clear()},En.prototype.contains_11rb$=function(t){return this.map_8be2vx$.containsKey_11rb$(t)},En.prototype.isEmpty=function(){return this.map_8be2vx$.isEmpty()},En.prototype.iterator=function(){return this.map_8be2vx$.keys.iterator()},En.prototype.remove_11rb$=function(t){return null!=this.map_8be2vx$.remove_11rb$(t)},Object.defineProperty(En.prototype,"size",{configurable:!0,get:function(){return this.map_8be2vx$.size}}),En.$metadata$={kind:h,simpleName:"HashSet",interfaces:[un,Lt]},Object.defineProperty(Mn.prototype,"equality",{get:function(){return this.equality_mamlu8$_0}}),Object.defineProperty(Mn.prototype,"size",{configurable:!0,get:function(){return this.size_x3bm7r$_0},set:function(t){this.size_x3bm7r$_0=t}}),Mn.prototype.put_xwzc9p$=function(e,i){var n=this.equality.getHashCode_s8jyv4$(e),r=this.getChainOrEntryOrNull_0(n);if(null==r)this.backingMap_0[n]=new rn(e,i);else{if(!t.isArray(r)){var o=r;return this.equality.equals_oaftn8$(o.key,e)?o.setValue_11rc$(i):(this.backingMap_0[n]=[o,new rn(e,i)],this.size=this.size+1|0,null)}var s=r,a=this.findEntryInChain_0(s,e);if(null!=a)return a.setValue_11rc$(i);s.push(new rn(e,i))}return this.size=this.size+1|0,null},Mn.prototype.remove_11rb$=function(e){var i,n=this.equality.getHashCode_s8jyv4$(e);if(null==(i=this.getChainOrEntryOrNull_0(n)))return null;var r=i;if(!t.isArray(r)){var o=r;return this.equality.equals_oaftn8$(o.key,e)?(delete this.backingMap_0[n],this.size=this.size-1|0,o.value):null}for(var s=r,a=0;a!==s.length;++a){var l=s[a];if(this.equality.equals_oaftn8$(e,l.key))return 1===s.length?(s.length=0,delete this.backingMap_0[n]):s.splice(a,1),this.size=this.size-1|0,l.value}return null},Mn.prototype.clear=function(){this.backingMap_0=this.createJsMap(),this.size=0},Mn.prototype.contains_11rb$=function(t){return null!=this.getEntry_0(t)},Mn.prototype.get_11rb$=function(t){var e;return null!=(e=this.getEntry_0(t))?e.value:null},Mn.prototype.getEntry_0=function(e){var i;if(null==(i=this.getChainOrEntryOrNull_0(this.equality.getHashCode_s8jyv4$(e))))return null;var n=i;if(t.isArray(n)){var r=n;return this.findEntryInChain_0(r,e)}var o=n;return this.equality.equals_oaftn8$(o.key,e)?o:null},Mn.prototype.findEntryInChain_0=function(t,e){var i;t:do{var n;for(n=0;n!==t.length;++n){var r=t[n];if(this.equality.equals_oaftn8$(r.key,e)){i=r;break t}}i=null}while(0);return i},jn.prototype.computeNext_0=function(){if(null!=this.chainOrEntry&&this.isChain){var e=this.chainOrEntry.length;if(this.itemIndex=this.itemIndex+1|0,this.itemIndex<e)return 0}return this.keyIndex=this.keyIndex+1|0,this.keyIndex<this.keys.length?(this.chainOrEntry=this.this$InternalHashCodeMap.backingMap_0[this.keys[this.keyIndex]],this.isChain=t.isArray(this.chainOrEntry),this.itemIndex=0,0):(this.chainOrEntry=null,1)},jn.prototype.hasNext=function(){return-1===this.state&&(this.state=this.computeNext_0()),0===this.state},jn.prototype.next=function(){if(!this.hasNext())throw Ei();var t=this.isChain?this.chainOrEntry[this.itemIndex]:this.chainOrEntry;return this.lastEntry=t,this.state=-1,t},jn.prototype.remove=function(){if(null==this.lastEntry)throw gi("Required value was null.".toString());this.this$InternalHashCodeMap.remove_11rb$(P(this.lastEntry).key),this.lastEntry=null,this.itemIndex=this.itemIndex-1|0},jn.$metadata$={kind:h,interfaces:[Vt]},Mn.prototype.iterator=function(){return new jn(this)},Mn.prototype.getChainOrEntryOrNull_0=function(t){var e=this.backingMap_0[t];return void 0===e?null:e},Mn.$metadata$={kind:h,simpleName:"InternalHashCodeMap",interfaces:[An]},An.prototype.createJsMap=function(){var t=Object.create(null);return t.foo=1,delete t.foo,t},An.$metadata$={kind:z,simpleName:"InternalMap",interfaces:[Ot]},Ln.prototype.setValue_11rc$=function(t){return this.$outer.checkIsMutable(),rn.prototype.setValue_11rc$.call(this,t)},Ln.$metadata$={kind:h,simpleName:"ChainEntry",interfaces:[rn]},qn.prototype.hasNext=function(){return null!==this.next_0},qn.prototype.next=function(){if(!this.hasNext())throw Ei();var t=P(this.next_0);this.last_0=t;var e=t.next_8be2vx$;return this.$outer.$outer,this.next_0=e!==this.$outer.$outer.head_1lr44l$_0?e:null,t},qn.prototype.remove=function(){if(null==this.last_0)throw gi("Check failed.".toString());this.$outer.checkIsMutable(),this.$outer.$outer.remove_njjxy0$_0(P(this.last_0)),this.$outer.$outer.map_97q5dv$_0.remove_11rb$(P(this.last_0).key),this.last_0=null},qn.$metadata$={kind:h,simpleName:"EntryIterator",interfaces:[Vt]},Dn.prototype.add_11rb$=function(t){throw zi("Add is not supported on entries")},Dn.prototype.clear=function(){this.$outer.clear()},Dn.prototype.contains_11rb$=function(t){return this.$outer.containsEntry_8hxqw4$(t)},Dn.prototype.iterator=function(){return new qn(this)},Dn.prototype.remove_11rb$=function(t){return this.checkIsMutable(),!!this.contains_11rb$(t)&&(this.$outer.remove_11rb$(t.key),!0)},Object.defineProperty(Dn.prototype,"size",{configurable:!0,get:function(){return this.$outer.size}}),Dn.prototype.checkIsMutable=function(){this.$outer.checkIsMutable()},Dn.$metadata$={kind:h,simpleName:"EntrySet",interfaces:[un]},In.prototype.addToEnd_lfi3hf$_0=function(t){if(null!=t.next_8be2vx$||null!=t.prev_8be2vx$)throw gi("Check failed.".toString());var e=this.head_1lr44l$_0;if(null==e)this.head_1lr44l$_0=t,t.next_8be2vx$=t,t.prev_8be2vx$=t;else{var i=e.prev_8be2vx$;if(null==i)throw gi("Required value was null.".toString());var n=i;t.prev_8be2vx$=n,t.next_8be2vx$=e,e.prev_8be2vx$=t,n.next_8be2vx$=t}},In.prototype.remove_njjxy0$_0=function(t){t.next_8be2vx$===t?this.head_1lr44l$_0=null:(this.head_1lr44l$_0===t&&(this.head_1lr44l$_0=t.next_8be2vx$),P(t.next_8be2vx$).prev_8be2vx$=t.prev_8be2vx$,P(t.prev_8be2vx$).next_8be2vx$=t.next_8be2vx$),t.next_8be2vx$=null,t.prev_8be2vx$=null},In.prototype.build=function(){return this.checkIsMutable(),this.isReadOnly_uhyvn5$_0=!0,this},In.prototype.clear=function(){this.checkIsMutable(),this.map_97q5dv$_0.clear(),this.head_1lr44l$_0=null},In.prototype.containsKey_11rb$=function(t){return this.map_97q5dv$_0.containsKey_11rb$(t)},In.prototype.containsValue_11rc$=function(t){var e;if(null==(e=this.head_1lr44l$_0))return!1;var i=e;do{if(o(i.value,t))return!0;i=P(i.next_8be2vx$)}while(i!==this.head_1lr44l$_0);return!1},In.prototype.createEntrySet=function(){return new Dn(this)},In.prototype.get_11rb$=function(t){var e;return null!=(e=this.map_97q5dv$_0.get_11rb$(t))?e.value:null},In.prototype.put_xwzc9p$=function(t,e){this.checkIsMutable();var i=this.map_97q5dv$_0.get_11rb$(t);if(null==i){var n=new Ln(this,t,e);return this.map_97q5dv$_0.put_xwzc9p$(t,n),this.addToEnd_lfi3hf$_0(n),null}return i.setValue_11rc$(e)},In.prototype.remove_11rb$=function(t){this.checkIsMutable();var e=this.map_97q5dv$_0.remove_11rb$(t);return null!=e?(this.remove_njjxy0$_0(e),e.value):null},Object.defineProperty(In.prototype,"size",{configurable:!0,get:function(){return this.map_97q5dv$_0.size}}),In.prototype.checkIsMutable=function(){if(this.isReadOnly_uhyvn5$_0)throw wi()},In.$metadata$={kind:h,simpleName:"LinkedHashMap",interfaces:[wn,Bt]},Vn.prototype.build=function(){var e;return(t.isType(e=this.map_8be2vx$,In)?e:ir()).build(),this},Vn.prototype.checkIsMutable=function(){this.map_8be2vx$.checkIsMutable()},Vn.$metadata$={kind:h,simpleName:"LinkedHashSet",interfaces:[En,Lt]},Xn.$metadata$={kind:z,simpleName:"RandomAccess",interfaces:[]},Yn.prototype.println=function(){this.print_s8jyv4$("\n")},Yn.prototype.println_s8jyv4$=function(t){this.print_s8jyv4$(t),this.println()},Yn.prototype.flush=function(){},Yn.$metadata$={kind:h,simpleName:"BaseOutput",interfaces:[]},Zn.prototype.print_s8jyv4$=function(t){var e=String(t);this.outputStream.write(e)},Zn.$metadata$={kind:h,simpleName:"NodeJsOutput",interfaces:[Yn]},Jn.prototype.print_s8jyv4$=function(t){this.buffer+=String(t)},Jn.prototype.flush=function(){this.buffer=""},Jn.$metadata$={kind:h,simpleName:"BufferedOutput",interfaces:[Yn]},Qn.prototype.print_s8jyv4$=function(t){var e=String(t),i=e.lastIndexOf("\n",0);i>=0&&(this.buffer=this.buffer+e.substring(0,i),this.flush(),e=e.substring(i+1|0)),this.buffer=this.buffer+e},Qn.prototype.flush=function(){console.log(this.buffer),this.buffer=""},Qn.$metadata$={kind:h,simpleName:"BufferedOutputToConsoleLog",interfaces:[Jn]},Object.defineProperty(tr.prototype,"context",{configurable:!0,get:function(){return this.delegate_0.context}}),tr.prototype.resumeWith_tl1gpc$=function(t){var e=this.result_0;if(e===ca())this.result_0=t.value;else{if(e!==aa())throw gi("Already resumed");this.result_0=ha(),this.delegate_0.resumeWith_tl1gpc$(t)}},tr.prototype.getOrThrow=function(){var e;if(this.result_0===ca())return this.result_0=aa(),aa();var i=this.result_0;if(i===ha())e=aa();else{if(t.isType(i,$l))throw i.exception;e=i}return e},tr.$metadata$={kind:h,simpleName:"SafeContinuation",interfaces:[Ds]},Object.defineProperty(er.prototype,"context",{configurable:!0,get:function(){return this.closure$context}}),er.prototype.resumeWith_tl1gpc$=function(t){this.closure$resumeWith(t)},er.$metadata$={kind:h,interfaces:[Ds]},rr.$metadata$={kind:z,simpleName:"Serializable",interfaces:[]},dr.$metadata$={kind:z,simpleName:"KCallable",interfaces:[]},fr.$metadata$={kind:z,simpleName:"KClass",interfaces:[Na]},Object.defineProperty(_r.prototype,"jClass",{get:function(){return this.jClass_1ppatx$_0}}),Object.defineProperty(_r.prototype,"qualifiedName",{configurable:!0,get:function(){throw new gl}}),_r.prototype.equals=function(e){return t.isType(e,_r)&&o(this.jClass,e.jClass)},_r.prototype.hashCode=function(){var t,e;return null!=(e=null!=(t=this.simpleName)?j(t):null)?e:0},_r.prototype.toString=function(){return"class "+x(this.simpleName)},_r.$metadata$={kind:h,simpleName:"KClassImpl",interfaces:[fr]},Object.defineProperty(mr.prototype,"simpleName",{configurable:!0,get:function(){return this.simpleName_m7mxi0$_0}}),mr.prototype.isInstance_s8jyv4$=function(e){var i=this.jClass;return t.isType(e,i)},mr.$metadata$={kind:h,simpleName:"SimpleKClassImpl",interfaces:[_r]},$r.prototype.equals=function(e){return!!t.isType(e,$r)&&_r.prototype.equals.call(this,e)&&o(this.givenSimpleName_0,e.givenSimpleName_0)},Object.defineProperty($r.prototype,"simpleName",{configurable:!0,get:function(){return this.givenSimpleName_0}}),$r.prototype.isInstance_s8jyv4$=function(t){return this.isInstanceFunction_0(t)},$r.$metadata$={kind:h,simpleName:"PrimitiveKClassImpl",interfaces:[_r]},Object.defineProperty(yr.prototype,"simpleName",{configurable:!0,get:function(){return this.simpleName_lnzy73$_0}}),yr.prototype.isInstance_s8jyv4$=function(t){return!1},Object.defineProperty(yr.prototype,"jClass",{configurable:!0,get:function(){throw zi("There's no native JS class for Nothing type")}}),yr.prototype.equals=function(t){return t===this},yr.prototype.hashCode=function(){return 0},yr.$metadata$={kind:S,simpleName:"NothingKClassImpl",interfaces:[_r]};var vr=null;function gr(){return null===vr&&new yr,vr}function br(){}function xr(){}function wr(){}function zr(){}function kr(){}function Sr(){}function Cr(){}function Nr(){}function Er(t,e,i){this.classifier_50lv52$_0=t,this.arguments_lev63t$_0=e,this.isMarkedNullable_748rxs$_0=i}function Pr(e){switch(e.name){case"INVARIANT":return"";case"IN":return"in ";case"OUT":return"out ";default:return t.noWhenBranchMatched()}}function Tr(){Qr=this,this.anyClass=new $r(Object,"Any",Or),this.numberClass=new $r(Number,"Number",Mr),this.nothingClass=gr(),this.booleanClass=new $r(Boolean,"Boolean",jr),this.byteClass=new $r(Number,"Byte",Ar),this.shortClass=new $r(Number,"Short",Rr),this.intClass=new $r(Number,"Int",Ir),this.floatClass=new $r(Number,"Float",Lr),this.doubleClass=new $r(Number,"Double",Dr),this.arrayClass=new $r(Array,"Array",qr),this.stringClass=new $r(String,"String",Br),this.throwableClass=new $r(Error,"Throwable",Fr),this.booleanArrayClass=new $r(Array,"BooleanArray",Ur),this.charArrayClass=new $r(Uint16Array,"CharArray",Vr),this.byteArrayClass=new $r(Int8Array,"ByteArray",Gr),this.shortArrayClass=new $r(Int16Array,"ShortArray",Hr),this.intArrayClass=new $r(Int32Array,"IntArray",Wr),this.longArrayClass=new $r(Array,"LongArray",Kr),this.floatArrayClass=new $r(Float32Array,"FloatArray",Xr),this.doubleArrayClass=new $r(Float64Array,"DoubleArray",Yr)}function Or(e){return t.isType(e,k)}function Mr(e){return t.isNumber(e)}function jr(t){return"boolean"==typeof t}function Ar(t){return"number"==typeof t}function Rr(t){return"number"==typeof t}function Ir(t){return"number"==typeof t}function Lr(t){return"number"==typeof t}function Dr(t){return"number"==typeof t}function qr(e){return t.isArray(e)}function Br(t){return"string"==typeof t}function Fr(e){return t.isType(e,O)}function Ur(e){return t.isBooleanArray(e)}function Vr(e){return t.isCharArray(e)}function Gr(e){return t.isByteArray(e)}function Hr(e){return t.isShortArray(e)}function Wr(e){return t.isIntArray(e)}function Kr(e){return t.isLongArray(e)}function Xr(e){return t.isFloatArray(e)}function Yr(e){return t.isDoubleArray(e)}Object.defineProperty(br.prototype,"simpleName",{configurable:!0,get:function(){throw gi("Unknown simpleName for ErrorKClass".toString())}}),Object.defineProperty(br.prototype,"qualifiedName",{configurable:!0,get:function(){throw gi("Unknown qualifiedName for ErrorKClass".toString())}}),br.prototype.isInstance_s8jyv4$=function(t){throw gi("Can's check isInstance on ErrorKClass".toString())},br.prototype.equals=function(t){return t===this},br.prototype.hashCode=function(){return 0},br.$metadata$={kind:h,simpleName:"ErrorKClass",interfaces:[fr]},xr.$metadata$={kind:z,simpleName:"KProperty",interfaces:[dr]},wr.$metadata$={kind:z,simpleName:"KMutableProperty",interfaces:[xr]},zr.$metadata$={kind:z,simpleName:"KProperty0",interfaces:[xr]},kr.$metadata$={kind:z,simpleName:"KMutableProperty0",interfaces:[wr,zr]},Sr.$metadata$={kind:z,simpleName:"KProperty1",interfaces:[xr]},Cr.$metadata$={kind:z,simpleName:"KMutableProperty1",interfaces:[wr,Sr]},Nr.$metadata$={kind:z,simpleName:"KType",interfaces:[]},Object.defineProperty(Er.prototype,"classifier",{get:function(){return this.classifier_50lv52$_0}}),Object.defineProperty(Er.prototype,"arguments",{get:function(){return this.arguments_lev63t$_0}}),Object.defineProperty(Er.prototype,"isMarkedNullable",{get:function(){return this.isMarkedNullable_748rxs$_0}}),Er.prototype.equals=function(e){return t.isType(e,Er)&&o(this.classifier,e.classifier)&&o(this.arguments,e.arguments)&&this.isMarkedNullable===e.isMarkedNullable},Er.prototype.hashCode=function(){return(31*((31*j(this.classifier)|0)+j(this.arguments)|0)|0)+j(this.isMarkedNullable)|0},Er.prototype.toString=function(){var e,i,n=t.isType(e=this.classifier,fr)?e:null;return(null==n?this.classifier.toString():null!=n.simpleName?n.simpleName:"(non-denotable type)")+(this.arguments.isEmpty()?"":_t(this.arguments,", ","<",">",void 0,void 0,(i=this,function(t){return i.asString_0(t)})))+(this.isMarkedNullable?"?":"")},Er.prototype.asString_0=function(t){return null==t.variance?"*":Pr(t.variance)+x(t.type)},Er.$metadata$={kind:h,simpleName:"KTypeImpl",interfaces:[Nr]},Tr.prototype.functionClass=function(t){var e,i,n;if(null!=(e=Zr[t]))i=e;else{var r=new $r(Function,"Function"+t,(n=t,function(t){return"function"==typeof t&&t.length===n}));Zr[t]=r,i=r}return i},Tr.$metadata$={kind:S,simpleName:"PrimitiveClasses",interfaces:[]};var Zr,Jr,Qr=null;function to(){return null===Qr&&new Tr,Qr}function eo(t){return Array.isArray(t)?io(t):no(t)}function io(t){switch(t.length){case 1:return no(t[0]);case 0:return gr();default:return new br}}function no(t){var e;if(t===String)return to().stringClass;var i=t.$metadata$;if(null!=i)if(null==i.$kClass$){var n=new mr(t);i.$kClass$=n,e=n}else e=i.$kClass$;else e=new mr(t);return e}function ro(){}function oo(t){fi(t,this),this.name="CharacterCodingException"}function so(t){this.string_0=void 0!==t?t:""}function ao(t,e){return lo(e=e||Object.create(so.prototype)),e}function lo(t){return t=t||Object.create(so.prototype),so.call(t,""),t}function uo(t){return vo(String.fromCharCode(t),"[\\s\\xA0]")}function po(t){return new $e(I.MIN_HIGH_SURROGATE,I.MAX_HIGH_SURROGATE).contains_mef7kx$(t)}function co(t){return new $e(I.MIN_LOW_SURROGATE,I.MAX_LOW_SURROGATE).contains_mef7kx$(t)}function ho(t){switch(t.toLowerCase()){case"nan":case"+nan":case"-nan":return!0;default:return!1}}function fo(t){if(!(2<=t&&t<=36))throw yi("radix "+t+" was not in valid range 2..36");return t}function _o(t,e){var i;return(i=t>=48&&t<=57?t-48:t>=65&&t<=90?t-65+10|0:t>=97&&t<=122?t-97+10|0:-1)>=e?-1:i}function mo(t){var e,i="";for(e=0;e!==t.length;++e){var n=a(t[e]);i+=String.fromCharCode(n)}return i}function $o(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length),To().checkBoundsIndexes_cub51b$(e,i,t.length);for(var n="",r=e;r<i;r++)n+=String.fromCharCode(t[r]);return n}function yo(e,i,n){if(void 0===n&&(n=!1),n){var r=e.length,s=i.length,a=c.min(r,s);if(0===a)return r-s|0;for(var l=0;;){var u=c.min(l+16|0,a),p=e.substring(l,u),h=i.substring(l,u);if(!o(p,h)&&(p=p.toUpperCase(),h=h.toUpperCase(),!o(p,h)&&(p=p.toLowerCase(),h=h.toLowerCase(),!o(p,h))))return t.compareTo(p,h);if(u===a)break;l=u}return r-s|0}return t.compareTo(e,i)}function vo(t,e){var i=t.match(e);return null!=i&&0!==i.length}function go(t){return 0===t.length||vo("string"==typeof t?t:t.toString(),"^[\\s\\xA0]+$")}function bo(t,e,i,n,r,o){return void 0===o&&(o=!1),Wa(t,e,i,n,r,o)}function xo(t,e,i){if(i)throw new oo("Malformed sequence starting at "+(e-1|0));return 0|-t}function wo(t,e,i,n,r){if(0==(30&e)||i>=n)return xo(0,i,r);var o=t[i];return 128!=(192&o)?xo(0,i,r):e<<6^o^3968}function zo(t,e,i,n,r){if(i>=n)return xo(0,i,r);var o=t[i];if(0==(15&e)){if(160!=(224&o))return xo(0,i,r)}else if(13==(15&e)){if(128!=(224&o))return xo(0,i,r)}else if(128!=(192&o))return xo(0,i,r);if((i+1|0)===n)return xo(1,i,r);var s=t[i+1|0];return 128!=(192&s)?xo(1,i,r):e<<12^o<<6^s^-123008}function ko(t,e,i,n,r){i>=n&&xo(0,i,r);var o=t[i];if(0==(15&e)){if((240&o)<=128)return xo(0,i,r)}else if(4==(15&e)){if(128!=(240&o))return xo(0,i,r)}else{if((15&e)>4)return xo(0,i,r);if(128!=(192&o))return xo(0,i,r)}if((i+1|0)===n)return xo(1,i,r);var s=t[i+1|0];if(128!=(192&s))return xo(1,i,r);if((i+2|0)===n)return xo(2,i,r);var a=t[i+2|0];return 128!=(192&a)?xo(2,i,r):e<<18^o<<12^s<<6^a^3678080}function So(t,e,i,n){var r;if(!(e>=0&&i<=t.length&&e<=i))throw yi("Failed requirement.".toString());for(var o=e,s=lo();o<i;){var a=t[(r=o,o=r+1|0,r)];if(a>=0)s.append_s8itvh$(d(a));else if(a>>5==-2){var l=wo(t,a,o,i,n);l<=0?(s.append_s8itvh$(Jr),o=o+(0|-l)|0):(s.append_s8itvh$(d(l)),o=o+1|0)}else if(a>>4==-2){var u=zo(t,a,o,i,n);u<=0?(s.append_s8itvh$(Jr),o=o+(0|-u)|0):(s.append_s8itvh$(d(u)),o=o+2|0)}else if(a>>3==-2){var p=ko(t,a,o,i,n);if(p<=0)s.append_s8itvh$(Jr),o=o+(0|-p)|0;else{var c=p-65536>>10|55296,h=1023&p|56320;s.append_s8itvh$(d(c)),s.append_s8itvh$(d(h)),o=o+3|0}}else xo(0,o,n),s.append_s8itvh$(Jr)}return s.toString()}function Co(){}function No(){To(),Co.call(this)}function Eo(){Po=this}ro.$metadata$={kind:z,simpleName:"Appendable",interfaces:[]},oo.$metadata$={kind:h,simpleName:"CharacterCodingException",interfaces:[di]},Object.defineProperty(so.prototype,"length",{configurable:!0,get:function(){return this.string_0.length}}),so.prototype.charCodeAt=function(t){var e=this.string_0;if(!(t>=0&&t<=Ga(e)))throw new bi("index: "+t+", length: "+this.length+"}");return e.charCodeAt(t)},so.prototype.subSequence_vux9f0$=function(t,e){return this.string_0.substring(t,e)},so.prototype.append_s8itvh$=function(t){return this.string_0+=String.fromCharCode(t),this},so.prototype.append_gw00v9$=function(t){return this.string_0+=x(t),this},so.prototype.append_ezbsdh$=function(t,e,i){return this.appendRange_3peag4$(null!=t?t:"null",e,i)},so.prototype.reverse=function(){for(var t,e,i="",n=this.string_0.length-1|0;n>=0;){var r=this.string_0.charCodeAt((n=(t=n)-1|0,t));if(co(r)&&n>=0){var o=this.string_0.charCodeAt((n=(e=n)-1|0,e));i=po(o)?i+String.fromCharCode(s(o))+String.fromCharCode(s(r)):i+String.fromCharCode(s(r))+String.fromCharCode(s(o))}else i+=String.fromCharCode(r)}return this.string_0=i,this},so.prototype.append_s8jyv4$=function(t){return this.string_0+=x(t),this},so.prototype.append_6taknv$=function(t){return this.string_0+=t,this},so.prototype.append_4hbowm$=function(t){return this.string_0+=mo(t),this},so.prototype.append_61zpoe$=function(t){return this.append_pdl1vj$(t)},so.prototype.append_pdl1vj$=function(t){return this.string_0=this.string_0+(null!=t?t:"null"),this},so.prototype.capacity=function(){return this.length},so.prototype.ensureCapacity_za3lpa$=function(t){},so.prototype.indexOf_61zpoe$=function(t){return this.string_0.indexOf(t)},so.prototype.indexOf_bm4lxs$=function(t,e){return this.string_0.indexOf(t,e)},so.prototype.lastIndexOf_61zpoe$=function(t){return this.string_0.lastIndexOf(t)},so.prototype.lastIndexOf_bm4lxs$=function(t,e){return 0===t.length&&e<0?-1:this.string_0.lastIndexOf(t,e)},so.prototype.insert_fzusl$=function(t,e){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},so.prototype.insert_6t1mh3$=function(t,e){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+String.fromCharCode(s(e))+this.string_0.substring(t),this},so.prototype.insert_7u455s$=function(t,e){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+mo(e)+this.string_0.substring(t),this},so.prototype.insert_1u9bqd$=function(t,e){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},so.prototype.insert_6t2rgq$=function(t,e){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},so.prototype.insert_19mbxw$=function(t,e){return this.insert_vqvrqt$(t,e)},so.prototype.insert_vqvrqt$=function(t,e){To().checkPositionIndex_6xvm5r$(t,this.length);var i=null!=e?e:"null";return this.string_0=this.string_0.substring(0,t)+i+this.string_0.substring(t),this},so.prototype.setLength_za3lpa$=function(t){if(t<0)throw yi("Negative new length: "+t+".");if(t<=this.length)this.string_0=this.string_0.substring(0,t);else for(var e=this.length;e<t;e++)this.string_0+=String.fromCharCode(0)},so.prototype.substring_za3lpa$=function(t){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0.substring(t)},so.prototype.substring_vux9f0$=function(t,e){return To().checkBoundsIndexes_cub51b$(t,e,this.length),this.string_0.substring(t,e)},so.prototype.trimToSize=function(){},so.prototype.toString=function(){return this.string_0},so.prototype.clear=function(){return this.string_0="",this},so.prototype.set_6t1mh3$=function(t,e){To().checkElementIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+String.fromCharCode(s(e))+this.string_0.substring(t+1|0)},so.prototype.setRange_98i29q$=function(t,e,i){return this.checkReplaceRange_0(t,e,this.length),this.string_0=this.string_0.substring(0,t)+i+this.string_0.substring(e),this},so.prototype.checkReplaceRange_0=function(t,e,i){if(t<0||t>i)throw new bi("startIndex: "+t+", length: "+i);if(t>e)throw yi("startIndex("+t+") > endIndex("+e+")")},so.prototype.deleteAt_za3lpa$=function(t){return To().checkElementIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+this.string_0.substring(t+1|0),this},so.prototype.deleteRange_vux9f0$=function(t,e){return this.checkReplaceRange_0(t,e,this.length),this.string_0=this.string_0.substring(0,t)+this.string_0.substring(e),this},so.prototype.toCharArray_pqkatk$=function(t,e,i,n){var r;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=this.length),To().checkBoundsIndexes_cub51b$(i,n,this.length),To().checkBoundsIndexes_cub51b$(e,e+n-i|0,t.length);for(var o=e,s=i;s<n;s++)t[(r=o,o=r+1|0,r)]=this.string_0.charCodeAt(s)},so.prototype.appendRange_8chfmy$=function(t,e,i){return this.string_0+=$o(t,e,i),this},so.prototype.appendRange_3peag4$=function(t,e,i){var n=t.toString();return To().checkBoundsIndexes_cub51b$(e,i,n.length),this.string_0+=n.substring(e,i),this},so.prototype.insertRange_ar8yzk$=function(t,e,i,n){return To().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+$o(e,i,n)+this.string_0.substring(t),this},so.prototype.insertRange_mnv9ne$=function(t,e,i,n){To().checkPositionIndex_6xvm5r$(t,this.length);var r=e.toString();return To().checkBoundsIndexes_cub51b$(i,n,r.length),this.string_0=this.string_0.substring(0,t)+r.substring(i,n)+this.string_0.substring(t),this},so.$metadata$={kind:h,simpleName:"StringBuilder",interfaces:[Pt,ro]},Co.prototype.contains_11rb$=function(e){var i;t:do{var n;if(t.isType(this,Mt)&&this.isEmpty()){i=!1;break t}for(n=this.iterator();n.hasNext();){var r=n.next();if(o(r,e)){i=!0;break t}}i=!1}while(0);return i},Co.prototype.containsAll_brywnq$=function(e){var i;t:do{var n;if(t.isType(e,Mt)&&e.isEmpty()){i=!0;break t}for(n=e.iterator();n.hasNext();){var r=n.next();if(!this.contains_11rb$(r)){i=!1;break t}}i=!0}while(0);return i},Co.prototype.isEmpty=function(){return 0===this.size},Co.prototype.toString=function(){return _t(this,", ","[","]",void 0,void 0,(t=this,function(e){return e===t?"(this Collection)":x(e)}));var t},Co.prototype.toArray=function(){return Ui(this)},Co.prototype.toArray_ro6dgy$=function(t){return Vi(this,t)},Co.$metadata$={kind:h,simpleName:"AbstractCollection",interfaces:[Mt]},Eo.prototype.checkElementIndex_6xvm5r$=function(t,e){if(t<0||t>=e)throw new bi("index: "+t+", size: "+e)},Eo.prototype.checkPositionIndex_6xvm5r$=function(t,e){if(t<0||t>e)throw new bi("index: "+t+", size: "+e)},Eo.prototype.checkRangeIndexes_cub51b$=function(t,e,i){if(t<0||e>i)throw new bi("fromIndex: "+t+", toIndex: "+e+", size: "+i);if(t>e)throw yi("fromIndex: "+t+" > toIndex: "+e)},Eo.prototype.checkBoundsIndexes_cub51b$=function(t,e,i){if(t<0||e>i)throw new bi("startIndex: "+t+", endIndex: "+e+", size: "+i);if(t>e)throw yi("startIndex: "+t+" > endIndex: "+e)},Eo.prototype.orderedHashCode_nykoif$=function(t){var e,i,n=1;for(e=t.iterator();e.hasNext();){var r=e.next();n=(31*n|0)+(null!=(i=null!=r?j(r):null)?i:0)|0}return n},Eo.prototype.orderedEquals_e92ka7$=function(t,e){var i;if(t.size!==e.size)return!1;var n=e.iterator();for(i=t.iterator();i.hasNext();){var r=i.next(),s=n.next();if(!o(r,s))return!1}return!0},Eo.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Po=null;function To(){return null===Po&&new Eo,Po}function Oo(){Do(),this._keys_up5z3z$_0=null,this._values_6nw1f1$_0=null}function Mo(t){this.this$AbstractMap=t,qo.call(this)}function jo(t){this.closure$entryIterator=t}function Ao(t){this.this$AbstractMap=t,Co.call(this)}function Ro(t){this.closure$entryIterator=t}function Io(){Lo=this}Oo.prototype.containsKey_11rb$=function(t){return null!=this.implFindEntry_8k1i24$_0(t)},Oo.prototype.containsValue_11rc$=function(e){var i,n=this.entries;t:do{var r;if(t.isType(n,Mt)&&n.isEmpty()){i=!1;break t}for(r=n.iterator();r.hasNext();){var s=r.next();if(o(s.value,e)){i=!0;break t}}i=!1}while(0);return i},Oo.prototype.containsEntry_8hxqw4$=function(e){if(!t.isType(e,qt))return!1;var i=e.key,n=e.value,r=(t.isType(this,Dt)?this:T()).get_11rb$(i);if(!o(n,r))return!1;var s=null==r;return s&&(s=!(t.isType(this,Dt)?this:T()).containsKey_11rb$(i)),!s},Oo.prototype.equals=function(e){if(e===this)return!0;if(!t.isType(e,Dt))return!1;if(this.size!==e.size)return!1;var i,n=e.entries;t:do{var r;if(t.isType(n,Mt)&&n.isEmpty()){i=!0;break t}for(r=n.iterator();r.hasNext();){var o=r.next();if(!this.containsEntry_8hxqw4$(o)){i=!1;break t}}i=!0}while(0);return i},Oo.prototype.get_11rb$=function(t){var e;return null!=(e=this.implFindEntry_8k1i24$_0(t))?e.value:null},Oo.prototype.hashCode=function(){return j(this.entries)},Oo.prototype.isEmpty=function(){return 0===this.size},Object.defineProperty(Oo.prototype,"size",{configurable:!0,get:function(){return this.entries.size}}),Mo.prototype.contains_11rb$=function(t){return this.this$AbstractMap.containsKey_11rb$(t)},jo.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},jo.prototype.next=function(){return this.closure$entryIterator.next().key},jo.$metadata$={kind:h,interfaces:[Ut]},Mo.prototype.iterator=function(){return new jo(this.this$AbstractMap.entries.iterator())},Object.defineProperty(Mo.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMap.size}}),Mo.$metadata$={kind:h,interfaces:[qo]},Object.defineProperty(Oo.prototype,"keys",{configurable:!0,get:function(){return null==this._keys_up5z3z$_0&&(this._keys_up5z3z$_0=new Mo(this)),P(this._keys_up5z3z$_0)}}),Oo.prototype.toString=function(){return _t(this.entries,", ","{","}",void 0,void 0,(t=this,function(e){return t.toString_55he67$_0(e)}));var t},Oo.prototype.toString_55he67$_0=function(t){return this.toString_kthv8s$_0(t.key)+"="+this.toString_kthv8s$_0(t.value)},Oo.prototype.toString_kthv8s$_0=function(t){return t===this?"(this Map)":x(t)},Ao.prototype.contains_11rb$=function(t){return this.this$AbstractMap.containsValue_11rc$(t)},Ro.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},Ro.prototype.next=function(){return this.closure$entryIterator.next().value},Ro.$metadata$={kind:h,interfaces:[Ut]},Ao.prototype.iterator=function(){return new Ro(this.this$AbstractMap.entries.iterator())},Object.defineProperty(Ao.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMap.size}}),Ao.$metadata$={kind:h,interfaces:[Co]},Object.defineProperty(Oo.prototype,"values",{configurable:!0,get:function(){return null==this._values_6nw1f1$_0&&(this._values_6nw1f1$_0=new Ao(this)),P(this._values_6nw1f1$_0)}}),Oo.prototype.implFindEntry_8k1i24$_0=function(t){var e,i=this.entries;t:do{var n;for(n=i.iterator();n.hasNext();){var r=n.next();if(o(r.key,t)){e=r;break t}}e=null}while(0);return e},Io.prototype.entryHashCode_9fthdn$=function(t){var e,i,n,r;return(null!=(i=null!=(e=t.key)?j(e):null)?i:0)^(null!=(r=null!=(n=t.value)?j(n):null)?r:0)},Io.prototype.entryToString_9fthdn$=function(t){return x(t.key)+"="+x(t.value)},Io.prototype.entryEquals_js7fox$=function(e,i){return!!t.isType(i,qt)&&o(e.key,i.key)&&o(e.value,i.value)},Io.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Lo=null;function Do(){return null===Lo&&new Io,Lo}function qo(){Uo(),Co.call(this)}function Bo(){Fo=this}Oo.$metadata$={kind:h,simpleName:"AbstractMap",interfaces:[Dt]},qo.prototype.equals=function(e){return e===this||!!t.isType(e,It)&&Uo().setEquals_y8f7en$(this,e)},qo.prototype.hashCode=function(){return Uo().unorderedHashCode_nykoif$(this)},Bo.prototype.unorderedHashCode_nykoif$=function(t){var e,i=0;for(e=t.iterator();e.hasNext();){var n,r=e.next();i=i+(null!=(n=null!=r?j(r):null)?n:0)|0}return i},Bo.prototype.setEquals_y8f7en$=function(t,e){return t.size===e.size&&t.containsAll_brywnq$(e)},Bo.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Fo=null;function Uo(){return null===Fo&&new Bo,Fo}function Vo(){Go=this}qo.$metadata$={kind:h,simpleName:"AbstractSet",interfaces:[It,Co]},Vo.prototype.hasNext=function(){return!1},Vo.prototype.hasPrevious=function(){return!1},Vo.prototype.nextIndex=function(){return 0},Vo.prototype.previousIndex=function(){return-1},Vo.prototype.next=function(){throw Ei()},Vo.prototype.previous=function(){throw Ei()},Vo.$metadata$={kind:S,simpleName:"EmptyIterator",interfaces:[Gt]};var Go=null;function Ho(){return null===Go&&new Vo,Go}function Wo(){Ko=this,this.serialVersionUID_0=L}Wo.prototype.equals=function(e){return t.isType(e,At)&&e.isEmpty()},Wo.prototype.hashCode=function(){return 1},Wo.prototype.toString=function(){return"[]"},Object.defineProperty(Wo.prototype,"size",{configurable:!0,get:function(){return 0}}),Wo.prototype.isEmpty=function(){return!0},Wo.prototype.contains_11rb$=function(t){return!1},Wo.prototype.containsAll_brywnq$=function(t){return t.isEmpty()},Wo.prototype.get_za3lpa$=function(t){throw new bi("Empty list doesn't contain element at index "+t+".")},Wo.prototype.indexOf_11rb$=function(t){return-1},Wo.prototype.lastIndexOf_11rb$=function(t){return-1},Wo.prototype.iterator=function(){return Ho()},Wo.prototype.listIterator=function(){return Ho()},Wo.prototype.listIterator_za3lpa$=function(t){if(0!==t)throw new bi("Index: "+t);return Ho()},Wo.prototype.subList_vux9f0$=function(t,e){if(0===t&&0===e)return this;throw new bi("fromIndex: "+t+", toIndex: "+e)},Wo.prototype.readResolve_0=function(){return Xo()},Wo.$metadata$={kind:S,simpleName:"EmptyList",interfaces:[Xn,rr,At]};var Ko=null;function Xo(){return null===Ko&&new Wo,Ko}function Yo(t){return new Zo(t,!1)}function Zo(t,e){this.values=t,this.isVarargs=e}function Jo(){return Xo()}function Qo(t){return 0===t.length?cn():dn(new Zo(t,!0))}function ts(t){return t.size-1|0}function es(t){switch(t.size){case 0:return Jo();case 1:return Gi(t.get_za3lpa$(0));default:return t}}function is(){throw new Pi("Index overflow has happened.")}function ns(){}function rs(t,e){this.index=t,this.value=e}function os(t){this.iteratorFactory_0=t}function ss(e,i){return t.isType(e,Mt)?e.size:i}function as(t){this.iterator_0=t,this.index_0=0}function ls(e,i){if(t.isType(e,us))return e.getOrImplicitDefault_11rb$(i);var n,r=e.get_11rb$(i);if(null==r&&!e.containsKey_11rb$(i))throw new Ni("Key "+i+" is missing in the map.");return null==(n=r)||t.isType(n,k)?n:T()}function us(){}function ps(){}function cs(t,e){this.map_a09uzx$_0=t,this.default_0=e}function hs(){ds=this,this.serialVersionUID_0=D}Object.defineProperty(Zo.prototype,"size",{configurable:!0,get:function(){return this.values.length}}),Zo.prototype.isEmpty=function(){return 0===this.values.length},Zo.prototype.contains_11rb$=function(t){return V(this.values,t)},Zo.prototype.containsAll_brywnq$=function(e){var i;t:do{var n;if(t.isType(e,Mt)&&e.isEmpty()){i=!0;break t}for(n=e.iterator();n.hasNext();){var r=n.next();if(!this.contains_11rb$(r)){i=!1;break t}}i=!0}while(0);return i},Zo.prototype.iterator=function(){return t.arrayIterator(this.values)},Zo.prototype.toArray=function(){var t=this.values;return this.isVarargs?t:t.slice()},Zo.$metadata$={kind:h,simpleName:"ArrayAsCollection",interfaces:[Mt]},ns.$metadata$={kind:z,simpleName:"Grouping",interfaces:[]},rs.$metadata$={kind:h,simpleName:"IndexedValue",interfaces:[]},rs.prototype.component1=function(){return this.index},rs.prototype.component2=function(){return this.value},rs.prototype.copy_wxm5ur$=function(t,e){return new rs(void 0===t?this.index:t,void 0===e?this.value:e)},rs.prototype.toString=function(){return"IndexedValue(index="+t.toString(this.index)+", value="+t.toString(this.value)+")"},rs.prototype.hashCode=function(){var e=0;return e=31*(e=31*e+t.hashCode(this.index)|0)+t.hashCode(this.value)|0},rs.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.index,e.index)&&t.equals(this.value,e.value)},os.prototype.iterator=function(){return new as(this.iteratorFactory_0())},os.$metadata$={kind:h,simpleName:"IndexingIterable",interfaces:[Tt]},as.prototype.hasNext=function(){return this.iterator_0.hasNext()},as.prototype.next=function(){var t;return new rs(Xi((t=this.index_0,this.index_0=t+1|0,t)),this.iterator_0.next())},as.$metadata$={kind:h,simpleName:"IndexingIterator",interfaces:[Ut]},us.$metadata$={kind:z,simpleName:"MapWithDefault",interfaces:[Dt]},hs.prototype.equals=function(e){return t.isType(e,Dt)&&e.isEmpty()},hs.prototype.hashCode=function(){return 0},hs.prototype.toString=function(){return"{}"},Object.defineProperty(hs.prototype,"size",{configurable:!0,get:function(){return 0}}),hs.prototype.isEmpty=function(){return!0},hs.prototype.containsKey_11rb$=function(t){return!1},hs.prototype.containsValue_11rc$=function(t){return!1},hs.prototype.get_11rb$=function(t){return null},Object.defineProperty(hs.prototype,"entries",{configurable:!0,get:function(){return Rs()}}),Object.defineProperty(hs.prototype,"keys",{configurable:!0,get:function(){return Rs()}}),Object.defineProperty(hs.prototype,"values",{configurable:!0,get:function(){return Xo()}}),hs.prototype.readResolve_0=function(){return fs()},hs.$metadata$={kind:S,simpleName:"EmptyMap",interfaces:[rr,Dt]};var ds=null;function fs(){return null===ds&&new hs,ds}function _s(){var e;return t.isType(e=fs(),Dt)?e:ir()}function ms(t){var e=Nn(t.length);return $s(e,t),e}function $s(t,e){var i;for(i=0;i!==e.length;++i){var n=e[i],r=n.component1(),o=n.component2();t.put_xwzc9p$(r,o)}}function ys(t,e){var i;for(i=e.iterator();i.hasNext();){var n=i.next(),r=n.component1(),o=n.component2();t.put_xwzc9p$(r,o)}}function vs(t,e){return ys(e,t),e}function gs(t,e){return $s(e,t),e}function bs(t){switch(t.size){case 0:return _s();case 1:default:return t}}function xs(t,e){return ws(t,e,!0)}function ws(t,e,i){for(var n={v:!1},r=t.iterator();r.hasNext();)e(r.next())===i&&(r.remove(),n.v=!0);return n.v}function zs(e,i){return function(e,i,n){var r,o,s,a;if(!t.isType(e,Xn))return ws(t.isType(r=e,Ot)?r:ir(),i,n);var l=0;o=ts(e);for(var u=0;u<=o;u++){var p=e.get_za3lpa$(u);i(p)!==n&&(l!==u&&e.set_wxm5ur$(l,p),l=l+1|0)}if(l<e.size){s=ts(e),a=l;for(var c=s;c>=a;c--)e.removeAt_za3lpa$(c);return!0}return!1}(e,i,!0)}function ks(){}function Ss(t){this.closure$iterator=t}function Cs(t){var e=new Es;return e.nextStep=ui(t,e,e),e}function Ns(){}function Es(){Ns.call(this),this.state_0=0,this.nextValue_0=null,this.nextIterator_0=null,this.nextStep=null}function Ps(t,e){this.sequence_0=t,this.transformer_0=e}function Ts(t){this.this$TransformingSequence=t,this.iterator=t.sequence_0.iterator()}function Os(t,e,i){this.sequence_0=t,this.transformer_0=e,this.iterator_0=i}function Ms(t){this.this$FlatteningSequence=t,this.iterator=t.sequence_0.iterator(),this.itemIterator=null}function js(){As=this,this.serialVersionUID_0=q}ks.$metadata$={kind:z,simpleName:"Sequence",interfaces:[]},Ss.prototype.iterator=function(){return this.closure$iterator()},Ss.$metadata$={kind:h,interfaces:[ks]},Ns.prototype.yieldAll_p1ys8y$=function(e,i){if(!t.isType(e,Mt)||!e.isEmpty())return this.yieldAll_1phuh2$(e.iterator(),i)},Ns.prototype.yieldAll_swo9gw$=function(t,e){return this.yieldAll_1phuh2$(t.iterator(),e)},Ns.$metadata$={kind:h,simpleName:"SequenceScope",interfaces:[]},Es.prototype.hasNext=function(){for(;;){switch(this.state_0){case 0:break;case 1:if(P(this.nextIterator_0).hasNext())return this.state_0=2,!0;this.nextIterator_0=null;break;case 4:return!1;case 3:case 2:return!0;default:throw this.exceptionalState_0()}this.state_0=5;var t=P(this.nextStep);this.nextStep=null,t.resumeWith_tl1gpc$(new dl(Te()))}},Es.prototype.next=function(){var e;switch(this.state_0){case 0:case 1:return this.nextNotReady_0();case 2:return this.state_0=1,P(this.nextIterator_0).next();case 3:this.state_0=0;var i=null==(e=this.nextValue_0)||t.isType(e,k)?e:ir();return this.nextValue_0=null,i;default:throw this.exceptionalState_0()}},Es.prototype.nextNotReady_0=function(){if(this.hasNext())return this.next();throw Ei()},Es.prototype.exceptionalState_0=function(){switch(this.state_0){case 4:return Ei();case 5:return gi("Iterator has failed.");default:return gi("Unexpected state of the iterator: "+this.state_0)}},Es.prototype.yield_11rb$=function(t,e){return this.nextValue_0=t,this.state_0=3,(i=this,function(t){return i.nextStep=t,aa()})(e);var i},Es.prototype.yieldAll_1phuh2$=function(t,e){var i;if(t.hasNext())return this.nextIterator_0=t,this.state_0=2,(i=this,function(t){return i.nextStep=t,aa()})(e)},Es.prototype.resumeWith_tl1gpc$=function(e){var i;vl(e),null==(i=e.value)||t.isType(i,k)||T(),this.state_0=4},Object.defineProperty(Es.prototype,"context",{configurable:!0,get:function(){return Js()}}),Es.$metadata$={kind:h,simpleName:"SequenceBuilderIterator",interfaces:[Ds,Ut,Ns]},Ts.prototype.next=function(){return this.this$TransformingSequence.transformer_0(this.iterator.next())},Ts.prototype.hasNext=function(){return this.iterator.hasNext()},Ts.$metadata$={kind:h,interfaces:[Ut]},Ps.prototype.iterator=function(){return new Ts(this)},Ps.prototype.flatten_1tglza$=function(t){return new Os(this.sequence_0,this.transformer_0,t)},Ps.$metadata$={kind:h,simpleName:"TransformingSequence",interfaces:[ks]},Ms.prototype.next=function(){if(!this.ensureItemIterator_0())throw Ei();return P(this.itemIterator).next()},Ms.prototype.hasNext=function(){return this.ensureItemIterator_0()},Ms.prototype.ensureItemIterator_0=function(){var t;for(!1===(null!=(t=this.itemIterator)?t.hasNext():null)&&(this.itemIterator=null);null==this.itemIterator;){if(!this.iterator.hasNext())return!1;var e=this.iterator.next(),i=this.this$FlatteningSequence.iterator_0(this.this$FlatteningSequence.transformer_0(e));if(i.hasNext())return this.itemIterator=i,!0}return!0},Ms.$metadata$={kind:h,interfaces:[Ut]},Os.prototype.iterator=function(){return new Ms(this)},Os.$metadata$={kind:h,simpleName:"FlatteningSequence",interfaces:[ks]},js.prototype.equals=function(e){return t.isType(e,It)&&e.isEmpty()},js.prototype.hashCode=function(){return 0},js.prototype.toString=function(){return"[]"},Object.defineProperty(js.prototype,"size",{configurable:!0,get:function(){return 0}}),js.prototype.isEmpty=function(){return!0},js.prototype.contains_11rb$=function(t){return!1},js.prototype.containsAll_brywnq$=function(t){return t.isEmpty()},js.prototype.iterator=function(){return Ho()},js.prototype.readResolve_0=function(){return Rs()},js.$metadata$={kind:S,simpleName:"EmptySet",interfaces:[rr,It]};var As=null;function Rs(){return null===As&&new js,As}function Is(){return Rs()}function Ls(t){return J(t,Tn(t.length))}function Ds(){}function qs(){Us()}function Bs(){Fs=this}Ds.$metadata$={kind:z,simpleName:"Continuation",interfaces:[]},n("kotlin.kotlin.coroutines.suspendCoroutine_922awp$",r((function(){var e=p.kotlin.coroutines.intrinsics.intercepted_f9mg25$,i=p.kotlin.coroutines.SafeContinuation_init_wj8d80$;return function(n,r){var o;return t.suspendCall((o=n,function(t){var n=i(e(t));return o(n),n.getOrThrow()})(t.coroutineReceiver())),t.coroutineResult(t.coroutineReceiver())}}))),Bs.$metadata$={kind:S,simpleName:"Key",interfaces:[Hs]};var Fs=null;function Us(){return null===Fs&&new Bs,Fs}function Vs(){}function Gs(t,e){var i=t.minusKey_yeqjby$(e.key);if(i===Js())return e;var n=i.get_j3r2sn$(Us());if(null==n)return new Qs(i,e);var r=i.minusKey_yeqjby$(Us());return r===Js()?new Qs(e,n):new Qs(new Qs(r,e),n)}function Hs(){}function Ws(){}function Ks(t){this.key_no4tas$_0=t}function Xs(e,i){this.safeCast_9rw4bk$_0=i,this.topmostKey_3x72pn$_0=t.isType(e,Xs)?e.topmostKey_3x72pn$_0:e}function Ys(){Zs=this,this.serialVersionUID_0=u}qs.prototype.releaseInterceptedContinuation_k98bjh$=function(t){},qs.prototype.get_j3r2sn$=function(e){var i;return t.isType(e,Xs)?e.isSubKey_i2ksv9$(this.key)&&t.isType(i=e.tryCast_m1180o$(this),Ws)?i:null:Us()===e?t.isType(this,Ws)?this:ir():null},qs.prototype.minusKey_yeqjby$=function(e){return t.isType(e,Xs)?e.isSubKey_i2ksv9$(this.key)&&null!=e.tryCast_m1180o$(this)?Js():this:Us()===e?Js():this},qs.$metadata$={kind:z,simpleName:"ContinuationInterceptor",interfaces:[Ws]},Vs.prototype.plus_1fupul$=function(t){return t===Js()?this:t.fold_3cc69b$(this,Gs)},Hs.$metadata$={kind:z,simpleName:"Key",interfaces:[]},Ws.prototype.get_j3r2sn$=function(e){return o(this.key,e)?t.isType(this,Ws)?this:ir():null},Ws.prototype.fold_3cc69b$=function(t,e){return e(t,this)},Ws.prototype.minusKey_yeqjby$=function(t){return o(this.key,t)?Js():this},Ws.$metadata$={kind:z,simpleName:"Element",interfaces:[Vs]},Vs.$metadata$={kind:z,simpleName:"CoroutineContext",interfaces:[]},Object.defineProperty(Ks.prototype,"key",{get:function(){return this.key_no4tas$_0}}),Ks.$metadata$={kind:h,simpleName:"AbstractCoroutineContextElement",interfaces:[Ws]},Xs.prototype.tryCast_m1180o$=function(t){return this.safeCast_9rw4bk$_0(t)},Xs.prototype.isSubKey_i2ksv9$=function(t){return t===this||this.topmostKey_3x72pn$_0===t},Xs.$metadata$={kind:h,simpleName:"AbstractCoroutineContextKey",interfaces:[Hs]},Ys.prototype.readResolve_0=function(){return Js()},Ys.prototype.get_j3r2sn$=function(t){return null},Ys.prototype.fold_3cc69b$=function(t,e){return t},Ys.prototype.plus_1fupul$=function(t){return t},Ys.prototype.minusKey_yeqjby$=function(t){return this},Ys.prototype.hashCode=function(){return 0},Ys.prototype.toString=function(){return"EmptyCoroutineContext"},Ys.$metadata$={kind:S,simpleName:"EmptyCoroutineContext",interfaces:[rr,Vs]};var Zs=null;function Js(){return null===Zs&&new Ys,Zs}function Qs(t,e){this.left_0=t,this.element_0=e}function ta(t,e){return 0===t.length?e.toString():t+", "+e}function ea(t){null===sa&&new ia,this.elements=t}function ia(){sa=this,this.serialVersionUID_0=u}Qs.prototype.get_j3r2sn$=function(e){for(var i,n=this;;){if(null!=(i=n.element_0.get_j3r2sn$(e)))return i;var r=n.left_0;if(!t.isType(r,Qs))return r.get_j3r2sn$(e);n=r}},Qs.prototype.fold_3cc69b$=function(t,e){return e(this.left_0.fold_3cc69b$(t,e),this.element_0)},Qs.prototype.minusKey_yeqjby$=function(t){if(null!=this.element_0.get_j3r2sn$(t))return this.left_0;var e=this.left_0.minusKey_yeqjby$(t);return e===this.left_0?this:e===Js()?this.element_0:new Qs(e,this.element_0)},Qs.prototype.size_0=function(){for(var e,i,n=this,r=2;;){if(null==(i=t.isType(e=n.left_0,Qs)?e:null))return r;n=i,r=r+1|0}},Qs.prototype.contains_0=function(t){return o(this.get_j3r2sn$(t.key),t)},Qs.prototype.containsAll_0=function(e){for(var i,n=e;;){if(!this.contains_0(n.element_0))return!1;var r=n.left_0;if(!t.isType(r,Qs))return this.contains_0(t.isType(i=r,Ws)?i:ir());n=r}},Qs.prototype.equals=function(e){return this===e||t.isType(e,Qs)&&e.size_0()===this.size_0()&&e.containsAll_0(this)},Qs.prototype.hashCode=function(){return j(this.left_0)+j(this.element_0)|0},Qs.prototype.toString=function(){return"["+this.fold_3cc69b$("",ta)+"]"},Qs.prototype.writeReplace_0=function(){var e,i,n,r=this.size_0(),o=t.newArray(r,null),s={v:0};if(this.fold_3cc69b$(Te(),(i=o,n=s,function(t,e){var r;return i[(r=n.v,n.v=r+1|0,r)]=e,Ee})),s.v!==r)throw gi("Check failed.".toString());return new ea(t.isArray(e=o)?e:ir())},ia.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var na,ra,oa,sa=null;function aa(){return pa()}function la(t,e){N.call(this),this.name$=t,this.ordinal$=e}function ua(){ua=function(){},na=new la("COROUTINE_SUSPENDED",0),ra=new la("UNDECIDED",1),oa=new la("RESUMED",2)}function pa(){return ua(),na}function ca(){return ua(),ra}function ha(){return ua(),oa}function da(){ma()}function fa(){_a=this,da.call(this),this.defaultRandom_0=cr()}ea.prototype.readResolve_0=function(){var t,e=this.elements,i=Js();for(t=0;t!==e.length;++t){var n=e[t];i=i.plus_1fupul$(n)}return i},ea.$metadata$={kind:h,simpleName:"Serialized",interfaces:[rr]},Qs.$metadata$={kind:h,simpleName:"CombinedContext",interfaces:[rr,Vs]},n("kotlin.kotlin.coroutines.intrinsics.suspendCoroutineUninterceptedOrReturn_zb0pmy$",r((function(){var t=p.kotlin.NotImplementedError;return function(e,i){throw new t("Implementation of suspendCoroutineUninterceptedOrReturn is intrinsic")}}))),la.$metadata$={kind:h,simpleName:"CoroutineSingletons",interfaces:[N]},la.values=function(){return[pa(),ca(),ha()]},la.valueOf_61zpoe$=function(t){switch(t){case"COROUTINE_SUSPENDED":return pa();case"UNDECIDED":return ca();case"RESUMED":return ha();default:nr("No enum constant kotlin.coroutines.intrinsics.CoroutineSingletons."+t)}},da.prototype.nextInt=function(){return this.nextBits_za3lpa$(32)},da.prototype.nextInt_za3lpa$=function(t){return this.nextInt_vux9f0$(0,t)},da.prototype.nextInt_vux9f0$=function(t,e){var i;ga(t,e);var n=e-t|0;if(n>0||-2147483648===n){if((n&(0|-n))===n){var r=ya(n);i=this.nextBits_za3lpa$(r)}else{var o;do{var s=this.nextInt()>>>1;o=s%n}while((s-o+(n-1)|0)<0);i=o}return t+i|0}for(;;){var a=this.nextInt();if(t<=a&&a<e)return a}},da.prototype.nextLong=function(){return t.Long.fromInt(this.nextInt()).shiftLeft(32).add(t.Long.fromInt(this.nextInt()))},da.prototype.nextLong_s8cxhz$=function(t){return this.nextLong_3pjtqy$(u,t)},da.prototype.nextLong_3pjtqy$=function(e,i){var n;ba(e,i);var r=i.subtract(e);if(r.toNumber()>0){var s;if(o(r.and(r.unaryMinus()),r)){var a=r.toInt(),l=r.shiftRightUnsigned(32).toInt();if(0!==a){var u=ya(a);n=t.Long.fromInt(this.nextBits_za3lpa$(u)).and(w)}else if(1===l)n=t.Long.fromInt(this.nextInt()).and(w);else{var p=ya(l);n=t.Long.fromInt(this.nextBits_za3lpa$(p)).shiftLeft(32).add(t.Long.fromInt(this.nextInt()))}s=n}else{var c;do{var h=this.nextLong().shiftRightUnsigned(1);c=h.modulo(r)}while(h.subtract(c).add(r.subtract(t.Long.fromInt(1))).toNumber()<0);s=c}return e.add(s)}for(;;){var d=this.nextLong();if(e.lessThanOrEqual(d)&&d.lessThan(i))return d}},da.prototype.nextBoolean=function(){return 0!==this.nextBits_za3lpa$(1)},da.prototype.nextDouble=function(){return hr(this.nextBits_za3lpa$(26),this.nextBits_za3lpa$(27))},da.prototype.nextDouble_14dthe$=function(t){return this.nextDouble_lu1900$(0,t)},da.prototype.nextDouble_lu1900$=function(t,e){var i;xa(t,e);var n=e-t;if(lr(n)&&pr(t)&&pr(e)){var r=this.nextDouble()*(e/2-t/2);i=t+r+r}else i=t+this.nextDouble()*n;var o=i;return o>=e?or(e):o},da.prototype.nextFloat=function(){return this.nextBits_za3lpa$(24)/16777216},da.prototype.nextBytes_mj6st8$$default=function(t,e,i){var n,r,o;if(!(0<=e&&e<=t.length&&0<=i&&i<=t.length))throw yi((n=e,r=i,o=t,function(){return"fromIndex ("+n+") or toIndex ("+r+") are out of range: 0.."+o.length+"."})().toString());if(!(e<=i))throw yi(("fromIndex ("+e+") must be not greater than toIndex ("+i+").").toString());for(var s=(i-e|0)/4|0,a={v:e},l=0;l<s;l++){var u=this.nextInt();t[a.v]=_(u),t[a.v+1|0]=_(u>>>8),t[a.v+2|0]=_(u>>>16),t[a.v+3|0]=_(u>>>24),a.v=a.v+4|0}for(var p=i-a.v|0,c=this.nextBits_za3lpa$(8*p|0),h=0;h<p;h++)t[a.v+h|0]=_(c>>>(8*h|0));return t},da.prototype.nextBytes_mj6st8$=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=t.length),n?n(t,e,i):this.nextBytes_mj6st8$$default(t,e,i)},da.prototype.nextBytes_fqrh44$=function(t){return this.nextBytes_mj6st8$(t,0,t.length)},da.prototype.nextBytes_za3lpa$=function(t){return this.nextBytes_fqrh44$(new Int8Array(t))},fa.prototype.nextBits_za3lpa$=function(t){return this.defaultRandom_0.nextBits_za3lpa$(t)},fa.prototype.nextInt=function(){return this.defaultRandom_0.nextInt()},fa.prototype.nextInt_za3lpa$=function(t){return this.defaultRandom_0.nextInt_za3lpa$(t)},fa.prototype.nextInt_vux9f0$=function(t,e){return this.defaultRandom_0.nextInt_vux9f0$(t,e)},fa.prototype.nextLong=function(){return this.defaultRandom_0.nextLong()},fa.prototype.nextLong_s8cxhz$=function(t){return this.defaultRandom_0.nextLong_s8cxhz$(t)},fa.prototype.nextLong_3pjtqy$=function(t,e){return this.defaultRandom_0.nextLong_3pjtqy$(t,e)},fa.prototype.nextBoolean=function(){return this.defaultRandom_0.nextBoolean()},fa.prototype.nextDouble=function(){return this.defaultRandom_0.nextDouble()},fa.prototype.nextDouble_14dthe$=function(t){return this.defaultRandom_0.nextDouble_14dthe$(t)},fa.prototype.nextDouble_lu1900$=function(t,e){return this.defaultRandom_0.nextDouble_lu1900$(t,e)},fa.prototype.nextFloat=function(){return this.defaultRandom_0.nextFloat()},fa.prototype.nextBytes_fqrh44$=function(t){return this.defaultRandom_0.nextBytes_fqrh44$(t)},fa.prototype.nextBytes_za3lpa$=function(t){return this.defaultRandom_0.nextBytes_za3lpa$(t)},fa.prototype.nextBytes_mj6st8$$default=function(t,e,i){return this.defaultRandom_0.nextBytes_mj6st8$(t,e,i)},fa.$metadata$={kind:S,simpleName:"Default",interfaces:[da]};var _a=null;function ma(){return null===_a&&new fa,_a}function $a(t){return ka(t,t>>31)}function ya(t){return 31-c.clz32(t)|0}function va(t,e){return t>>>32-e&(0|-e)>>31}function ga(t,e){if(!(e>t))throw yi(wa(t,e).toString())}function ba(t,e){if(!(e.compareTo_11rb$(t)>0))throw yi(wa(t,e).toString())}function xa(t,e){if(!(e>t))throw yi(wa(t,e).toString())}function wa(t,e){return"Random range is empty: ["+t.toString()+", "+e.toString()+")."}function za(t,e,i,n,r,o){if(da.call(this),this.x_0=t,this.y_0=e,this.z_0=i,this.w_0=n,this.v_0=r,this.addend_0=o,0==(this.x_0|this.y_0|this.z_0|this.w_0|this.v_0))throw yi("Initial state must have at least one non-zero element.".toString());for(var s=0;s<64;s++)this.nextInt()}function ka(t,e,i){return i=i||Object.create(za.prototype),za.call(i,t,e,0,0,~t,t<<10^e>>>4),i}function Sa(t,e){this.start_p1gsmm$_0=t,this.endInclusive_jj4lf7$_0=e}function Ca(t,e){if(!t)throw yi("Step must be positive, was: "+e.toString()+".")}function Na(){}function Ea(e,i,n){null!=n?e.append_gw00v9$(n(i)):null==i||t.isCharSequence(i)?e.append_gw00v9$(i):t.isChar(i)?e.append_s8itvh$(a(i)):e.append_gw00v9$(x(i))}function Pa(t,e,i){return void 0===i&&(i=!1),t===e||!!i&&(d(String.fromCharCode(0|t).toUpperCase().charCodeAt(0))===d(String.fromCharCode(0|e).toUpperCase().charCodeAt(0))||d(String.fromCharCode(0|t).toLowerCase().charCodeAt(0))===d(String.fromCharCode(0|e).toLowerCase().charCodeAt(0)))}function Ta(e,i){var n;void 0===i&&(i="");var r,o=sl(e),s=cn();for(r=o.iterator();r.hasNext();){var a=r.next();go(a)||s.add_11rb$(a)}var l,u=s,p=hn(ss(u,10));for(l=u.iterator();l.hasNext();){var c=l.next();p.add_11rb$(Oa(c))}var h,d,f,_,m=null!=(n=dt(p))?n:0,$=(e.length,t.imul(i.length,o.size),0===(h=i).length?Ma:(d=h,function(t){return d+t})),y=ts(o),v=cn(),g=0;for(f=o.iterator();f.hasNext();){var b,x,w,z=f.next(),k=Xi((g=(_=g)+1|0,_));null!=(b=0!==k&&k!==y||!go(z)?null!=(w=null!=(x=Nt(z,m))?$(x):null)?w:z:null)&&v.add_11rb$(b)}return ft(v,ao(),"\n").toString()}function Oa(t){var e;t:do{var i,n,r,o;n=(i=Va(t)).first,r=i.last,o=i.step;for(var l=n;l<=r;l+=o)if(!uo(a(s(t.charCodeAt(l))))){e=l;break t}e=-1}while(0);var u=e;return-1===u?t.length:u}function Ma(t){return t}function ja(t){return Aa(t,10)}function Aa(t,e){var i;if(null==(i=Da(t,e)))return null;var n=i;return n<m.MIN_VALUE||n>m.MAX_VALUE?null:_(n)}function Ra(t){return Ia(t,10)}function Ia(t,e){var i;if(null==(i=Da(t,e)))return null;var n=i;return n<b.MIN_VALUE||n>b.MAX_VALUE?null:g(n)}function La(t){return Da(t,10)}function Da(e,i){fo(i);var n,r,o,s=e.length;if(0===s)return null;var a=e.charCodeAt(0);if(a<48){if(1===s)return null;if(n=1,45===a)r=!0,o=-2147483648;else{if(43!==a)return null;r=!1,o=-2147483647}}else n=0,r=!1,o=-2147483647;for(var l=-59652323,u=0,p=n;p<s;p++){var c=_o(e.charCodeAt(p),i);if(c<0)return null;if(u<l){if(-59652323!==l)return null;if(u<(l=o/i|0))return null}if((u=t.imul(u,i))<(o+c|0))return null;u=u-c|0}return r?u:0|-u}function qa(t){return Ba(t,10)}function Ba(e,i){fo(i);var n,r,s,a=e.length;if(0===a)return null;var l=e.charCodeAt(0);if(l<48){if(1===a)return null;if(n=1,45===l)r=!0,s=y;else{if(43!==l)return null;r=!1,s=B}}else n=0,r=!1,s=B;for(var p=F,c=p,h=u,d=n;d<a;d++){var f=_o(e.charCodeAt(d),i);if(f<0)return null;if(h.compareTo_11rb$(c)<0){if(!o(c,p))return null;if(c=s.div(t.Long.fromInt(i)),h.compareTo_11rb$(c)<0)return null}if((h=h.multiply(t.Long.fromInt(i))).compareTo_11rb$(s.add(t.Long.fromInt(f)))<0)return null;h=h.subtract(t.Long.fromInt(f))}return r?h:h.unaryMinus()}function Fa(t){throw new ki("Invalid number format: '"+t+"'")}function Ua(t){this.this$iterator=t,Kt.call(this),this.index_0=0}function Va(t){return new be(0,t.length-1|0)}function Ga(t){return t.length-1|0}function Ha(e,i){return t.subSequence(e,i.start,i.endInclusive+1|0).toString()}function Wa(t,e,i,n,r,o){if(n<0||e<0||e>(t.length-r|0)||n>(i.length-r|0))return!1;for(var s=0;s<r;s++)if(!Pa(t.charCodeAt(e+s|0),i.charCodeAt(n+s|0),o))return!1;return!0}function Ka(t,e,i,n){var r,o;if(void 0===i&&(i=0),void 0===n&&(n=!1),!n&&1===e.length&&"string"==typeof t){var l=W(e);return t.indexOf(String.fromCharCode(l),i)}r=vt(i,0),o=Ga(t);for(var u=r;u<=o;u++){var p,c=t.charCodeAt(u);t:do{var h;for(h=0;h!==e.length;++h){var d=a(e[h]);if(Pa(a(s(d)),c,n)){p=!0;break t}}p=!1}while(0);if(p)return u}return-1}function Xa(t,e,i,n){if(void 0===i&&(i=Ga(t)),void 0===n&&(n=!1),!n&&1===e.length&&"string"==typeof t){var r=W(e);return t.lastIndexOf(String.fromCharCode(r),i)}for(var o=gt(i,Ga(t));o>=0;o--){var l,u=t.charCodeAt(o);t:do{var p;for(p=0;p!==e.length;++p){var c=a(e[p]);if(Pa(a(s(c)),u,n)){l=!0;break t}}l=!1}while(0);if(l)return o}return-1}function Ya(t,e,i,n,r,o){var s,a;void 0===o&&(o=!1);var l=o?mt(gt(i,Ga(t)),vt(n,0)):new be(vt(i,0),gt(n,t.length));if("string"==typeof t&&"string"==typeof e)for(s=l.iterator();s.hasNext();){var u=s.next();if(bo(e,0,t,u,e.length,r))return u}else for(a=l.iterator();a.hasNext();){var p=a.next();if(Wa(e,0,t,p,e.length,r))return p}return-1}function Za(e,i,n,r){return void 0===n&&(n=0),void 0===r&&(r=!1),r||"string"!=typeof e?Ka(e,t.charArrayOf(i),n,r):e.indexOf(String.fromCharCode(i),n)}function Ja(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=!1),n||"string"!=typeof t?Ya(t,e,i,t.length,n):t.indexOf(e,i)}function Qa(t,e,i,n){return void 0===i&&(i=Ga(t)),void 0===n&&(n=!1),n||"string"!=typeof t?Ya(t,e,i,0,n,!0):t.lastIndexOf(e,i)}function tl(t,e,i,n){this.input_0=t,this.startIndex_0=e,this.limit_0=i,this.getNextMatch_0=n}function el(t){this.this$DelimitedRangesSequence=t,this.nextState=-1,this.currentStartIndex=bt(t.startIndex_0,0,t.input_0.length),this.nextSearchIndex=this.currentStartIndex,this.nextItem=null,this.counter=0}function il(t,e){return function(i,n){var r;return null!=(r=function(t,e,i,n,r){var o,s;if(!n&&1===e.size){var a=rt(e),l=r?Qa(t,a,i):Ja(t,a,i);return l<0?null:xl(l,a)}var u=r?mt(gt(i,Ga(t)),0):new be(vt(i,0),t.length);if("string"==typeof t)for(o=u.iterator();o.hasNext();){var p,c=o.next();t:do{var h;for(h=e.iterator();h.hasNext();){var d=h.next();if(bo(d,0,t,c,d.length,n)){p=d;break t}}p=null}while(0);if(null!=p)return xl(c,p)}else for(s=u.iterator();s.hasNext();){var f,_=s.next();t:do{var m;for(m=e.iterator();m.hasNext();){var $=m.next();if(Wa($,0,t,_,$.length,n)){f=$;break t}}f=null}while(0);if(null!=f)return xl(_,f)}return null}(i,t,n,e,!1))?xl(r.first,r.second.length):null}}function nl(t,e,i,n,r){if(void 0===i&&(i=0),void 0===n&&(n=!1),void 0===r&&(r=0),!(r>=0))throw yi(("Limit must be non-negative, but was "+r+".").toString());return new tl(t,i,r,il(Li(e),n))}function rl(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=0),St(nl(t,e,void 0,i,n),(r=t,function(t){return Ha(r,t)}));var r}function ol(t){return rl(t,["\r\n","\n","\r"])}function sl(t){return zt(ol(t))}function al(){}function ll(){ul=this}da.$metadata$={kind:h,simpleName:"Random",interfaces:[]},za.prototype.nextInt=function(){var t=this.x_0;t^=t>>>2,this.x_0=this.y_0,this.y_0=this.z_0,this.z_0=this.w_0;var e=this.v_0;return this.w_0=e,t=t^t<<1^e^e<<4,this.v_0=t,this.addend_0=this.addend_0+362437|0,t+this.addend_0|0},za.prototype.nextBits_za3lpa$=function(t){return va(this.nextInt(),t)},za.$metadata$={kind:h,simpleName:"XorWowRandom",interfaces:[da]},Na.$metadata$={kind:z,simpleName:"KClassifier",interfaces:[]},Ua.prototype.nextChar=function(){var t,e;return t=this.index_0,this.index_0=t+1|0,e=t,this.this$iterator.charCodeAt(e)},Ua.prototype.hasNext=function(){return this.index_0<this.this$iterator.length},Ua.$metadata$={kind:h,interfaces:[Kt]},el.prototype.calcNext_0=function(){if(this.nextSearchIndex<0)this.nextState=0,this.nextItem=null;else{if(this.this$DelimitedRangesSequence.limit_0>0&&(this.counter=this.counter+1|0,this.counter>=this.this$DelimitedRangesSequence.limit_0)||this.nextSearchIndex>this.this$DelimitedRangesSequence.input_0.length)this.nextItem=new be(this.currentStartIndex,Ga(this.this$DelimitedRangesSequence.input_0)),this.nextSearchIndex=-1;else{var t=this.this$DelimitedRangesSequence.getNextMatch_0(this.this$DelimitedRangesSequence.input_0,this.nextSearchIndex);if(null==t)this.nextItem=new be(this.currentStartIndex,Ga(this.this$DelimitedRangesSequence.input_0)),this.nextSearchIndex=-1;else{var e=t.component1(),i=t.component2();this.nextItem=yt(this.currentStartIndex,e),this.currentStartIndex=e+i|0,this.nextSearchIndex=this.currentStartIndex+(0===i?1:0)|0}}this.nextState=1}},el.prototype.next=function(){var e;if(-1===this.nextState&&this.calcNext_0(),0===this.nextState)throw Ei();var i=t.isType(e=this.nextItem,be)?e:ir();return this.nextItem=null,this.nextState=-1,i},el.prototype.hasNext=function(){return-1===this.nextState&&this.calcNext_0(),1===this.nextState},el.$metadata$={kind:h,interfaces:[Ut]},tl.prototype.iterator=function(){return new el(this)},tl.$metadata$={kind:h,simpleName:"DelimitedRangesSequence",interfaces:[ks]},al.$metadata$={kind:z,simpleName:"Lazy",interfaces:[]},ll.$metadata$={kind:S,simpleName:"UNINITIALIZED_VALUE",interfaces:[]};var ul=null;function pl(){return null===ul&&new ll,ul}function cl(t){this.initializer_0=t,this._value_0=pl()}function hl(t){this.value_7taq70$_0=t}function dl(t){ml(),this.value=t}function fl(){_l=this}Object.defineProperty(cl.prototype,"value",{configurable:!0,get:function(){var e;return this._value_0===pl()&&(this._value_0=P(this.initializer_0)(),this.initializer_0=null),null==(e=this._value_0)||t.isType(e,k)?e:ir()}}),cl.prototype.isInitialized=function(){return this._value_0!==pl()},cl.prototype.toString=function(){return this.isInitialized()?x(this.value):"Lazy value not initialized yet."},cl.prototype.writeReplace_0=function(){return new hl(this.value)},cl.$metadata$={kind:h,simpleName:"UnsafeLazyImpl",interfaces:[rr,al]},Object.defineProperty(hl.prototype,"value",{get:function(){return this.value_7taq70$_0}}),hl.prototype.isInitialized=function(){return!0},hl.prototype.toString=function(){return x(this.value)},hl.$metadata$={kind:h,simpleName:"InitializedLazyImpl",interfaces:[rr,al]},Object.defineProperty(dl.prototype,"isSuccess",{configurable:!0,get:function(){return!t.isType(this.value,$l)}}),Object.defineProperty(dl.prototype,"isFailure",{configurable:!0,get:function(){return t.isType(this.value,$l)}}),dl.prototype.getOrNull=n("kotlin.kotlin.Result.getOrNull",r((function(){var e=Object,i=t.throwCCE;return function(){var n;return this.isFailure?null:null==(n=this.value)||t.isType(n,e)?n:i()}}))),dl.prototype.exceptionOrNull=function(){return t.isType(this.value,$l)?this.value.exception:null},dl.prototype.toString=function(){return t.isType(this.value,$l)?this.value.toString():"Success("+x(this.value)+")"},fl.prototype.success_mh5how$=n("kotlin.kotlin.Result.Companion.success_mh5how$",r((function(){var t=p.kotlin.Result;return function(e){return new t(e)}}))),fl.prototype.failure_lsqlk3$=n("kotlin.kotlin.Result.Companion.failure_lsqlk3$",r((function(){var t=p.kotlin.createFailure_tcv7n7$,e=p.kotlin.Result;return function(i){return new e(t(i))}}))),fl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var _l=null;function ml(){return null===_l&&new fl,_l}function $l(t){this.exception=t}function yl(t){return new $l(t)}function vl(e){if(t.isType(e.value,$l))throw e.value.exception}function gl(t){void 0===t&&(t="An operation is not implemented."),hi(t,this),this.name="NotImplementedError"}function bl(t,e){this.first=t,this.second=e}function xl(t,e){return new bl(t,e)}function wl(t,e,i){this.first=t,this.second=e,this.third=i}function zl(t){Cl(),this.data=t}function kl(){Sl=this,this.MIN_VALUE=new zl(0),this.MAX_VALUE=new zl(-1),this.SIZE_BYTES=1,this.SIZE_BITS=8}$l.prototype.equals=function(e){return t.isType(e,$l)&&o(this.exception,e.exception)},$l.prototype.hashCode=function(){return j(this.exception)},$l.prototype.toString=function(){return"Failure("+this.exception+")"},$l.$metadata$={kind:h,simpleName:"Failure",interfaces:[rr]},dl.$metadata$={kind:h,simpleName:"Result",interfaces:[rr]},dl.prototype.unbox=function(){return this.value},dl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.value)|0},dl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.value,e.value)},gl.$metadata$={kind:h,simpleName:"NotImplementedError",interfaces:[ci]},bl.prototype.toString=function(){return"("+this.first+", "+this.second+")"},bl.$metadata$={kind:h,simpleName:"Pair",interfaces:[rr]},bl.prototype.component1=function(){return this.first},bl.prototype.component2=function(){return this.second},bl.prototype.copy_xwzc9p$=function(t,e){return new bl(void 0===t?this.first:t,void 0===e?this.second:e)},bl.prototype.hashCode=function(){var e=0;return e=31*(e=31*e+t.hashCode(this.first)|0)+t.hashCode(this.second)|0},bl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.first,e.first)&&t.equals(this.second,e.second)},wl.prototype.toString=function(){return"("+this.first+", "+this.second+", "+this.third+")"},wl.$metadata$={kind:h,simpleName:"Triple",interfaces:[rr]},wl.prototype.component1=function(){return this.first},wl.prototype.component2=function(){return this.second},wl.prototype.component3=function(){return this.third},wl.prototype.copy_1llc0w$=function(t,e,i){return new wl(void 0===t?this.first:t,void 0===e?this.second:e,void 0===i?this.third:i)},wl.prototype.hashCode=function(){var e=0;return e=31*(e=31*(e=31*e+t.hashCode(this.first)|0)+t.hashCode(this.second)|0)+t.hashCode(this.third)|0},wl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.first,e.first)&&t.equals(this.second,e.second)&&t.equals(this.third,e.third)},kl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Sl=null;function Cl(){return null===Sl&&new kl,Sl}function Nl(t){Tl(),this.data=t}function El(){Pl=this,this.MIN_VALUE=new Nl(0),this.MAX_VALUE=new Nl(-1),this.SIZE_BYTES=4,this.SIZE_BITS=32}zl.prototype.compareTo_11rb$=n("kotlin.kotlin.UByte.compareTo_11rb$",(function(e){return t.primitiveCompareTo(255&this.data,255&e.data)})),zl.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.UByte.compareTo_6hrhkk$",(function(e){return t.primitiveCompareTo(255&this.data,65535&e.data)})),zl.prototype.compareTo_s87ys9$=n("kotlin.kotlin.UByte.compareTo_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(new t(255&this.data).data,i.data)}}))),zl.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UByte.compareTo_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)).data,r.data)}}))),zl.prototype.plus_mpmjao$=n("kotlin.kotlin.UByte.plus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+new t(255&e.data).data|0)}}))),zl.prototype.plus_6hrhkk$=n("kotlin.kotlin.UByte.plus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+new t(65535&e.data).data|0)}}))),zl.prototype.plus_s87ys9$=n("kotlin.kotlin.UByte.plus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+e.data|0)}}))),zl.prototype.plus_mpgczg$=n("kotlin.kotlin.UByte.plus_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),zl.prototype.minus_mpmjao$=n("kotlin.kotlin.UByte.minus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-new t(255&e.data).data|0)}}))),zl.prototype.minus_6hrhkk$=n("kotlin.kotlin.UByte.minus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-new t(65535&e.data).data|0)}}))),zl.prototype.minus_s87ys9$=n("kotlin.kotlin.UByte.minus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-e.data|0)}}))),zl.prototype.minus_mpgczg$=n("kotlin.kotlin.UByte.minus_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),zl.prototype.times_mpmjao$=n("kotlin.kotlin.UByte.times_mpmjao$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,new e(255&i.data).data))}}))),zl.prototype.times_6hrhkk$=n("kotlin.kotlin.UByte.times_6hrhkk$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,new e(65535&i.data).data))}}))),zl.prototype.times_s87ys9$=n("kotlin.kotlin.UByte.times_s87ys9$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,i.data))}}))),zl.prototype.times_mpgczg$=n("kotlin.kotlin.UByte.times_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),zl.prototype.div_mpmjao$=n("kotlin.kotlin.UByte.div_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),new t(255&i.data))}}))),zl.prototype.div_6hrhkk$=n("kotlin.kotlin.UByte.div_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),new t(65535&i.data))}}))),zl.prototype.div_s87ys9$=n("kotlin.kotlin.UByte.div_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),i)}}))),zl.prototype.div_mpgczg$=n("kotlin.kotlin.UByte.div_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),zl.prototype.rem_mpmjao$=n("kotlin.kotlin.UByte.rem_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),new t(255&i.data))}}))),zl.prototype.rem_6hrhkk$=n("kotlin.kotlin.UByte.rem_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),new t(65535&i.data))}}))),zl.prototype.rem_s87ys9$=n("kotlin.kotlin.UByte.rem_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),i)}}))),zl.prototype.rem_mpgczg$=n("kotlin.kotlin.UByte.rem_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),zl.prototype.inc=n("kotlin.kotlin.UByte.inc",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data+1))}}))),zl.prototype.dec=n("kotlin.kotlin.UByte.dec",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data-1))}}))),zl.prototype.rangeTo_mpmjao$=n("kotlin.kotlin.UByte.rangeTo_mpmjao$",r((function(){var t=p.kotlin.ranges.UIntRange,e=p.kotlin.UInt;return function(i){return new t(new e(255&this.data),new e(255&i.data))}}))),zl.prototype.and_mpmjao$=n("kotlin.kotlin.UByte.and_mpmjao$",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data&t.data))}}))),zl.prototype.or_mpmjao$=n("kotlin.kotlin.UByte.or_mpmjao$",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data|t.data))}}))),zl.prototype.xor_mpmjao$=n("kotlin.kotlin.UByte.xor_mpmjao$",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data^t.data))}}))),zl.prototype.inv=n("kotlin.kotlin.UByte.inv",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(){return new e(i(~this.data))}}))),zl.prototype.toByte=n("kotlin.kotlin.UByte.toByte",(function(){return this.data})),zl.prototype.toShort=n("kotlin.kotlin.UByte.toShort",r((function(){var e=t.toShort;return function(){return e(255&this.data)}}))),zl.prototype.toInt=n("kotlin.kotlin.UByte.toInt",(function(){return 255&this.data})),zl.prototype.toLong=n("kotlin.kotlin.UByte.toLong",r((function(){var e=t.Long.fromInt(255);return function(){return t.Long.fromInt(this.data).and(e)}}))),zl.prototype.toUByte=n("kotlin.kotlin.UByte.toUByte",(function(){return this})),zl.prototype.toUShort=n("kotlin.kotlin.UByte.toUShort",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(){return new e(i(255&this.data))}}))),zl.prototype.toUInt=n("kotlin.kotlin.UByte.toUInt",r((function(){var t=p.kotlin.UInt;return function(){return new t(255&this.data)}}))),zl.prototype.toULong=n("kotlin.kotlin.UByte.toULong",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),zl.prototype.toFloat=n("kotlin.kotlin.UByte.toFloat",(function(){return 255&this.data})),zl.prototype.toDouble=n("kotlin.kotlin.UByte.toDouble",(function(){return 255&this.data})),zl.prototype.toString=function(){return(255&this.data).toString()},zl.$metadata$={kind:h,simpleName:"UByte",interfaces:[E]},zl.prototype.unbox=function(){return this.data},zl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},zl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},El.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Pl=null;function Tl(){return null===Pl&&new El,Pl}function Ol(t,e){Al(),Rl.call(this,t,e,1)}function Ml(){jl=this,this.EMPTY=new Ol(Tl().MAX_VALUE,Tl().MIN_VALUE)}Nl.prototype.compareTo_mpmjao$=n("kotlin.kotlin.UInt.compareTo_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(this.data,new t(255&i.data).data)}}))),Nl.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.UInt.compareTo_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(this.data,new t(65535&i.data).data)}}))),Nl.prototype.compareTo_11rb$=n("kotlin.kotlin.UInt.compareTo_11rb$",r((function(){var t=p.kotlin.uintCompare_vux9f0$;return function(e){return t(this.data,e.data)}}))),Nl.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UInt.compareTo_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)).data,r.data)}}))),Nl.prototype.plus_mpmjao$=n("kotlin.kotlin.UInt.plus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+new t(255&e.data).data|0)}}))),Nl.prototype.plus_6hrhkk$=n("kotlin.kotlin.UInt.plus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+new t(65535&e.data).data|0)}}))),Nl.prototype.plus_s87ys9$=n("kotlin.kotlin.UInt.plus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+e.data|0)}}))),Nl.prototype.plus_mpgczg$=n("kotlin.kotlin.UInt.plus_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),Nl.prototype.minus_mpmjao$=n("kotlin.kotlin.UInt.minus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-new t(255&e.data).data|0)}}))),Nl.prototype.minus_6hrhkk$=n("kotlin.kotlin.UInt.minus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-new t(65535&e.data).data|0)}}))),Nl.prototype.minus_s87ys9$=n("kotlin.kotlin.UInt.minus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-e.data|0)}}))),Nl.prototype.minus_mpgczg$=n("kotlin.kotlin.UInt.minus_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),Nl.prototype.times_mpmjao$=n("kotlin.kotlin.UInt.times_mpmjao$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,new e(255&i.data).data))}}))),Nl.prototype.times_6hrhkk$=n("kotlin.kotlin.UInt.times_6hrhkk$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,new e(65535&i.data).data))}}))),Nl.prototype.times_s87ys9$=n("kotlin.kotlin.UInt.times_s87ys9$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,i.data))}}))),Nl.prototype.times_mpgczg$=n("kotlin.kotlin.UInt.times_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),Nl.prototype.div_mpmjao$=n("kotlin.kotlin.UInt.div_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(this,new t(255&i.data))}}))),Nl.prototype.div_6hrhkk$=n("kotlin.kotlin.UInt.div_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(this,new t(65535&i.data))}}))),Nl.prototype.div_s87ys9$=n("kotlin.kotlin.UInt.div_s87ys9$",r((function(){var t=p.kotlin.uintDivide_oqfnby$;return function(e){return t(this,e)}}))),Nl.prototype.div_mpgczg$=n("kotlin.kotlin.UInt.div_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),Nl.prototype.rem_mpmjao$=n("kotlin.kotlin.UInt.rem_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(this,new t(255&i.data))}}))),Nl.prototype.rem_6hrhkk$=n("kotlin.kotlin.UInt.rem_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(this,new t(65535&i.data))}}))),Nl.prototype.rem_s87ys9$=n("kotlin.kotlin.UInt.rem_s87ys9$",r((function(){var t=p.kotlin.uintRemainder_oqfnby$;return function(e){return t(this,e)}}))),Nl.prototype.rem_mpgczg$=n("kotlin.kotlin.UInt.rem_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),Nl.prototype.inc=n("kotlin.kotlin.UInt.inc",r((function(){var t=p.kotlin.UInt;return function(){return new t(this.data+1|0)}}))),Nl.prototype.dec=n("kotlin.kotlin.UInt.dec",r((function(){var t=p.kotlin.UInt;return function(){return new t(this.data-1|0)}}))),Nl.prototype.rangeTo_s87ys9$=n("kotlin.kotlin.UInt.rangeTo_s87ys9$",r((function(){var t=p.kotlin.ranges.UIntRange;return function(e){return new t(this,e)}}))),Nl.prototype.shl_za3lpa$=n("kotlin.kotlin.UInt.shl_za3lpa$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data<<e)}}))),Nl.prototype.shr_za3lpa$=n("kotlin.kotlin.UInt.shr_za3lpa$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data>>>e)}}))),Nl.prototype.and_s87ys9$=n("kotlin.kotlin.UInt.and_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data&e.data)}}))),Nl.prototype.or_s87ys9$=n("kotlin.kotlin.UInt.or_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data|e.data)}}))),Nl.prototype.xor_s87ys9$=n("kotlin.kotlin.UInt.xor_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data^e.data)}}))),Nl.prototype.inv=n("kotlin.kotlin.UInt.inv",r((function(){var t=p.kotlin.UInt;return function(){return new t(~this.data)}}))),Nl.prototype.toByte=n("kotlin.kotlin.UInt.toByte",r((function(){var e=t.toByte;return function(){return e(this.data)}}))),Nl.prototype.toShort=n("kotlin.kotlin.UInt.toShort",r((function(){var e=t.toShort;return function(){return e(this.data)}}))),Nl.prototype.toInt=n("kotlin.kotlin.UInt.toInt",(function(){return this.data})),Nl.prototype.toLong=n("kotlin.kotlin.UInt.toLong",r((function(){var e=new t.Long(-1,0);return function(){return t.Long.fromInt(this.data).and(e)}}))),Nl.prototype.toUByte=n("kotlin.kotlin.UInt.toUByte",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data))}}))),Nl.prototype.toUShort=n("kotlin.kotlin.UInt.toUShort",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data))}}))),Nl.prototype.toUInt=n("kotlin.kotlin.UInt.toUInt",(function(){return this})),Nl.prototype.toULong=n("kotlin.kotlin.UInt.toULong",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),Nl.prototype.toFloat=n("kotlin.kotlin.UInt.toFloat",r((function(){var t=p.kotlin.uintToDouble_za3lpa$;return function(){return t(this.data)}}))),Nl.prototype.toDouble=n("kotlin.kotlin.UInt.toDouble",r((function(){var t=p.kotlin.uintToDouble_za3lpa$;return function(){return t(this.data)}}))),Nl.prototype.toString=function(){return t.Long.fromInt(this.data).and(w).toString()},Nl.$metadata$={kind:h,simpleName:"UInt",interfaces:[E]},Nl.prototype.unbox=function(){return this.data},Nl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},Nl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},Object.defineProperty(Ol.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(Ol.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),Ol.prototype.contains_mef7kx$=function(t){var e=pu(this.first.data,t.data)<=0;return e&&(e=pu(t.data,this.last.data)<=0),e},Ol.prototype.isEmpty=function(){return pu(this.first.data,this.last.data)>0},Ol.prototype.equals=function(e){var i,n;return t.isType(e,Ol)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null))},Ol.prototype.hashCode=function(){return this.isEmpty()?-1:(31*this.first.data|0)+this.last.data|0},Ol.prototype.toString=function(){return this.first.toString()+".."+this.last},Ml.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var jl=null;function Al(){return null===jl&&new Ml,jl}function Rl(t,e,i){if(Dl(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=ru(t,e,i),this.step=i}function Il(){Ll=this}Ol.$metadata$={kind:h,simpleName:"UIntRange",interfaces:[me,Rl]},Rl.prototype.iterator=function(){return new ql(this.first,this.last,this.step)},Rl.prototype.isEmpty=function(){return this.step>0?pu(this.first.data,this.last.data)>0:pu(this.first.data,this.last.data)<0},Rl.prototype.equals=function(e){var i,n;return t.isType(e,Rl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null)&&this.step===e.step)},Rl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*this.first.data|0)+this.last.data|0)|0)+this.step|0},Rl.prototype.toString=function(){return this.step>0?this.first.toString()+".."+this.last+" step "+this.step:this.first.toString()+" downTo "+this.last+" step "+(0|-this.step)},Il.prototype.fromClosedRange_fjk8us$=function(t,e,i){return new Rl(t,e,i)},Il.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ll=null;function Dl(){return null===Ll&&new Il,Ll}function ql(t,e,i){Bl.call(this),this.finalElement_0=e,this.hasNext_0=i>0?pu(t.data,e.data)<=0:pu(t.data,e.data)>=0,this.step_0=new Nl(i),this.next_0=this.hasNext_0?t:this.finalElement_0}function Bl(){}function Fl(){}function Ul(t){Hl(),this.data=t}function Vl(){Gl=this,this.MIN_VALUE=new Ul(u),this.MAX_VALUE=new Ul(f),this.SIZE_BYTES=8,this.SIZE_BITS=64}Rl.$metadata$={kind:h,simpleName:"UIntProgression",interfaces:[Tt]},ql.prototype.hasNext=function(){return this.hasNext_0},ql.prototype.nextUInt=function(){var t=this.next_0;if(null!=t&&t.equals(this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=new Nl(this.next_0.data+this.step_0.data|0);return t},ql.$metadata$={kind:h,simpleName:"UIntProgressionIterator",interfaces:[Bl]},Bl.prototype.next=function(){return this.nextUInt()},Bl.$metadata$={kind:h,simpleName:"UIntIterator",interfaces:[Ut]},Fl.prototype.next=function(){return this.nextULong()},Fl.$metadata$={kind:h,simpleName:"ULongIterator",interfaces:[Ut]},Vl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Gl=null;function Hl(){return null===Gl&&new Vl,Gl}function Wl(t,e){Yl(),Zl.call(this,t,e,C)}function Kl(){Xl=this,this.EMPTY=new Wl(Hl().MAX_VALUE,Hl().MIN_VALUE)}Ul.prototype.compareTo_mpmjao$=n("kotlin.kotlin.ULong.compareTo_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(this.data,new i(t.Long.fromInt(r.data).and(e)).data)}}))),Ul.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.ULong.compareTo_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(this.data,new i(t.Long.fromInt(r.data).and(e)).data)}}))),Ul.prototype.compareTo_s87ys9$=n("kotlin.kotlin.ULong.compareTo_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(this.data,new i(t.Long.fromInt(r.data).and(e)).data)}}))),Ul.prototype.compareTo_11rb$=n("kotlin.kotlin.ULong.compareTo_11rb$",r((function(){var t=p.kotlin.ulongCompare_3pjtqy$;return function(e){return t(this.data,e.data)}}))),Ul.prototype.plus_mpmjao$=n("kotlin.kotlin.ULong.plus_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_6hrhkk$=n("kotlin.kotlin.ULong.plus_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_s87ys9$=n("kotlin.kotlin.ULong.plus_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_mpgczg$=n("kotlin.kotlin.ULong.plus_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.add(e.data))}}))),Ul.prototype.minus_mpmjao$=n("kotlin.kotlin.ULong.minus_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_6hrhkk$=n("kotlin.kotlin.ULong.minus_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_s87ys9$=n("kotlin.kotlin.ULong.minus_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_mpgczg$=n("kotlin.kotlin.ULong.minus_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.subtract(e.data))}}))),Ul.prototype.times_mpmjao$=n("kotlin.kotlin.ULong.times_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_6hrhkk$=n("kotlin.kotlin.ULong.times_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_s87ys9$=n("kotlin.kotlin.ULong.times_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_mpgczg$=n("kotlin.kotlin.ULong.times_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.multiply(e.data))}}))),Ul.prototype.div_mpmjao$=n("kotlin.kotlin.ULong.div_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.div_6hrhkk$=n("kotlin.kotlin.ULong.div_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.div_s87ys9$=n("kotlin.kotlin.ULong.div_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.div_mpgczg$=n("kotlin.kotlin.ULong.div_mpgczg$",r((function(){var t=p.kotlin.ulongDivide_jpm79w$;return function(e){return t(this,e)}}))),Ul.prototype.rem_mpmjao$=n("kotlin.kotlin.ULong.rem_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.rem_6hrhkk$=n("kotlin.kotlin.ULong.rem_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.rem_s87ys9$=n("kotlin.kotlin.ULong.rem_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.rem_mpgczg$=n("kotlin.kotlin.ULong.rem_mpgczg$",r((function(){var t=p.kotlin.ulongRemainder_jpm79w$;return function(e){return t(this,e)}}))),Ul.prototype.inc=n("kotlin.kotlin.ULong.inc",r((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.inc())}}))),Ul.prototype.dec=n("kotlin.kotlin.ULong.dec",r((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.dec())}}))),Ul.prototype.rangeTo_mpgczg$=n("kotlin.kotlin.ULong.rangeTo_mpgczg$",r((function(){var t=p.kotlin.ranges.ULongRange;return function(e){return new t(this,e)}}))),Ul.prototype.shl_za3lpa$=n("kotlin.kotlin.ULong.shl_za3lpa$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.shiftLeft(e))}}))),Ul.prototype.shr_za3lpa$=n("kotlin.kotlin.ULong.shr_za3lpa$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.shiftRightUnsigned(e))}}))),Ul.prototype.and_mpgczg$=n("kotlin.kotlin.ULong.and_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.and(e.data))}}))),Ul.prototype.or_mpgczg$=n("kotlin.kotlin.ULong.or_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.or(e.data))}}))),Ul.prototype.xor_mpgczg$=n("kotlin.kotlin.ULong.xor_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.xor(e.data))}}))),Ul.prototype.inv=n("kotlin.kotlin.ULong.inv",r((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.inv())}}))),Ul.prototype.toByte=n("kotlin.kotlin.ULong.toByte",r((function(){var e=t.toByte;return function(){return e(this.data.toInt())}}))),Ul.prototype.toShort=n("kotlin.kotlin.ULong.toShort",r((function(){var e=t.toShort;return function(){return e(this.data.toInt())}}))),Ul.prototype.toInt=n("kotlin.kotlin.ULong.toInt",(function(){return this.data.toInt()})),Ul.prototype.toLong=n("kotlin.kotlin.ULong.toLong",(function(){return this.data})),Ul.prototype.toUByte=n("kotlin.kotlin.ULong.toUByte",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data.toInt()))}}))),Ul.prototype.toUShort=n("kotlin.kotlin.ULong.toUShort",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data.toInt()))}}))),Ul.prototype.toUInt=n("kotlin.kotlin.ULong.toUInt",r((function(){var t=p.kotlin.UInt;return function(){return new t(this.data.toInt())}}))),Ul.prototype.toULong=n("kotlin.kotlin.ULong.toULong",(function(){return this})),Ul.prototype.toFloat=n("kotlin.kotlin.ULong.toFloat",r((function(){var t=p.kotlin.ulongToDouble_s8cxhz$;return function(){return t(this.data)}}))),Ul.prototype.toDouble=n("kotlin.kotlin.ULong.toDouble",r((function(){var t=p.kotlin.ulongToDouble_s8cxhz$;return function(){return t(this.data)}}))),Ul.prototype.toString=function(){return fu(this.data)},Ul.$metadata$={kind:h,simpleName:"ULong",interfaces:[E]},Ul.prototype.unbox=function(){return this.data},Ul.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},Ul.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},Object.defineProperty(Wl.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(Wl.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),Wl.prototype.contains_mef7kx$=function(t){var e=cu(this.first.data,t.data)<=0;return e&&(e=cu(t.data,this.last.data)<=0),e},Wl.prototype.isEmpty=function(){return cu(this.first.data,this.last.data)>0},Wl.prototype.equals=function(e){var i,n;return t.isType(e,Wl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null))},Wl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*new Ul(this.first.data.xor(new Ul(this.first.data.shiftRightUnsigned(32)).data)).data.toInt()|0)+new Ul(this.last.data.xor(new Ul(this.last.data.shiftRightUnsigned(32)).data)).data.toInt()|0},Wl.prototype.toString=function(){return this.first.toString()+".."+this.last},Kl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Xl=null;function Yl(){return null===Xl&&new Kl,Xl}function Zl(t,e,i){if(tu(),o(i,u))throw yi("Step must be non-zero.");if(o(i,y))throw yi("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=ou(t,e,i),this.step=i}function Jl(){Ql=this}Wl.$metadata$={kind:h,simpleName:"ULongRange",interfaces:[me,Zl]},Zl.prototype.iterator=function(){return new eu(this.first,this.last,this.step)},Zl.prototype.isEmpty=function(){return this.step.toNumber()>0?cu(this.first.data,this.last.data)>0:cu(this.first.data,this.last.data)<0},Zl.prototype.equals=function(e){var i,n;return t.isType(e,Zl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null)&&o(this.step,e.step))},Zl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*new Ul(this.first.data.xor(new Ul(this.first.data.shiftRightUnsigned(32)).data)).data.toInt()|0)+new Ul(this.last.data.xor(new Ul(this.last.data.shiftRightUnsigned(32)).data)).data.toInt()|0)|0)+this.step.xor(this.step.shiftRightUnsigned(32)).toInt()|0},Zl.prototype.toString=function(){return this.step.toNumber()>0?this.first.toString()+".."+this.last+" step "+this.step.toString():this.first.toString()+" downTo "+this.last+" step "+this.step.unaryMinus().toString()},Jl.prototype.fromClosedRange_15zasp$=function(t,e,i){return new Zl(t,e,i)},Jl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ql=null;function tu(){return null===Ql&&new Jl,Ql}function eu(t,e,i){Fl.call(this),this.finalElement_0=e,this.hasNext_0=i.toNumber()>0?cu(t.data,e.data)<=0:cu(t.data,e.data)>=0,this.step_0=new Ul(i),this.next_0=this.hasNext_0?t:this.finalElement_0}function iu(t,e,i){var n=hu(t,i),r=hu(e,i);return pu(n.data,r.data)>=0?new Nl(n.data-r.data|0):new Nl(new Nl(n.data-r.data|0).data+i.data|0)}function nu(t,e,i){var n=du(t,i),r=du(e,i);return cu(n.data,r.data)>=0?new Ul(n.data.subtract(r.data)):new Ul(new Ul(n.data.subtract(r.data)).data.add(i.data))}function ru(t,e,i){if(i>0)return pu(t.data,e.data)>=0?e:new Nl(e.data-iu(e,t,new Nl(i)).data|0);if(i<0)return pu(t.data,e.data)<=0?e:new Nl(e.data+iu(t,e,new Nl(0|-i)).data|0);throw yi("Step is zero.")}function ou(t,e,i){if(i.toNumber()>0)return cu(t.data,e.data)>=0?e:new Ul(e.data.subtract(nu(e,t,new Ul(i)).data));if(i.toNumber()<0)return cu(t.data,e.data)<=0?e:new Ul(e.data.add(nu(t,e,new Ul(i.unaryMinus())).data));throw yi("Step is zero.")}function su(t){uu(),this.data=t}function au(){lu=this,this.MIN_VALUE=new su(0),this.MAX_VALUE=new su(-1),this.SIZE_BYTES=2,this.SIZE_BITS=16}Zl.$metadata$={kind:h,simpleName:"ULongProgression",interfaces:[Tt]},eu.prototype.hasNext=function(){return this.hasNext_0},eu.prototype.nextULong=function(){var t=this.next_0;if(null!=t&&t.equals(this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=new Ul(this.next_0.data.add(this.step_0.data));return t},eu.$metadata$={kind:h,simpleName:"ULongProgressionIterator",interfaces:[Fl]},au.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var lu=null;function uu(){return null===lu&&new au,lu}function pu(e,i){return t.primitiveCompareTo(-2147483648^e,-2147483648^i)}function cu(t,e){return t.xor(y).compareTo_11rb$(e.xor(y))}function hu(e,i){return new Nl(t.Long.fromInt(e.data).and(w).modulo(t.Long.fromInt(i.data).and(w)).toInt())}function du(t,e){var i=t.data,n=e.data;if(n.toNumber()<0)return cu(t.data,e.data)<0?t:new Ul(t.data.subtract(e.data));if(i.toNumber()>=0)return new Ul(i.modulo(n));var r=i.shiftRightUnsigned(1).div(n).shiftLeft(1),o=i.subtract(r.multiply(n));return new Ul(o.subtract(cu(new Ul(o).data,new Ul(n).data)>=0?n:u))}function fu(t){return _u(t,10)}function _u(e,i){if(e.toNumber()>=0)return Ii(e,i);var n=e.shiftRightUnsigned(1).div(t.Long.fromInt(i)).shiftLeft(1),r=e.subtract(n.multiply(t.Long.fromInt(i)));return r.toNumber()>=i&&(r=r.subtract(t.Long.fromInt(i)),n=n.add(t.Long.fromInt(1))),Ii(n,i)+Ii(r,i)}su.prototype.compareTo_mpmjao$=n("kotlin.kotlin.UShort.compareTo_mpmjao$",(function(e){return t.primitiveCompareTo(65535&this.data,255&e.data)})),su.prototype.compareTo_11rb$=n("kotlin.kotlin.UShort.compareTo_11rb$",(function(e){return t.primitiveCompareTo(65535&this.data,65535&e.data)})),su.prototype.compareTo_s87ys9$=n("kotlin.kotlin.UShort.compareTo_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(new t(65535&this.data).data,i.data)}}))),su.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UShort.compareTo_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)).data,r.data)}}))),su.prototype.plus_mpmjao$=n("kotlin.kotlin.UShort.plus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+new t(255&e.data).data|0)}}))),su.prototype.plus_6hrhkk$=n("kotlin.kotlin.UShort.plus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+new t(65535&e.data).data|0)}}))),su.prototype.plus_s87ys9$=n("kotlin.kotlin.UShort.plus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+e.data|0)}}))),su.prototype.plus_mpgczg$=n("kotlin.kotlin.UShort.plus_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),su.prototype.minus_mpmjao$=n("kotlin.kotlin.UShort.minus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-new t(255&e.data).data|0)}}))),su.prototype.minus_6hrhkk$=n("kotlin.kotlin.UShort.minus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-new t(65535&e.data).data|0)}}))),su.prototype.minus_s87ys9$=n("kotlin.kotlin.UShort.minus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-e.data|0)}}))),su.prototype.minus_mpgczg$=n("kotlin.kotlin.UShort.minus_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),su.prototype.times_mpmjao$=n("kotlin.kotlin.UShort.times_mpmjao$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,new e(255&i.data).data))}}))),su.prototype.times_6hrhkk$=n("kotlin.kotlin.UShort.times_6hrhkk$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,new e(65535&i.data).data))}}))),su.prototype.times_s87ys9$=n("kotlin.kotlin.UShort.times_s87ys9$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,i.data))}}))),su.prototype.times_mpgczg$=n("kotlin.kotlin.UShort.times_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),su.prototype.div_mpmjao$=n("kotlin.kotlin.UShort.div_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),new t(255&i.data))}}))),su.prototype.div_6hrhkk$=n("kotlin.kotlin.UShort.div_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),new t(65535&i.data))}}))),su.prototype.div_s87ys9$=n("kotlin.kotlin.UShort.div_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),i)}}))),su.prototype.div_mpgczg$=n("kotlin.kotlin.UShort.div_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),su.prototype.rem_mpmjao$=n("kotlin.kotlin.UShort.rem_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),new t(255&i.data))}}))),su.prototype.rem_6hrhkk$=n("kotlin.kotlin.UShort.rem_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),new t(65535&i.data))}}))),su.prototype.rem_s87ys9$=n("kotlin.kotlin.UShort.rem_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),i)}}))),su.prototype.rem_mpgczg$=n("kotlin.kotlin.UShort.rem_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),su.prototype.inc=n("kotlin.kotlin.UShort.inc",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data+1))}}))),su.prototype.dec=n("kotlin.kotlin.UShort.dec",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data-1))}}))),su.prototype.rangeTo_6hrhkk$=n("kotlin.kotlin.UShort.rangeTo_6hrhkk$",r((function(){var t=p.kotlin.ranges.UIntRange,e=p.kotlin.UInt;return function(i){return new t(new e(65535&this.data),new e(65535&i.data))}}))),su.prototype.and_6hrhkk$=n("kotlin.kotlin.UShort.and_6hrhkk$",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data&t.data))}}))),su.prototype.or_6hrhkk$=n("kotlin.kotlin.UShort.or_6hrhkk$",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data|t.data))}}))),su.prototype.xor_6hrhkk$=n("kotlin.kotlin.UShort.xor_6hrhkk$",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data^t.data))}}))),su.prototype.inv=n("kotlin.kotlin.UShort.inv",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(){return new e(i(~this.data))}}))),su.prototype.toByte=n("kotlin.kotlin.UShort.toByte",r((function(){var e=t.toByte;return function(){return e(this.data)}}))),su.prototype.toShort=n("kotlin.kotlin.UShort.toShort",(function(){return this.data})),su.prototype.toInt=n("kotlin.kotlin.UShort.toInt",(function(){return 65535&this.data})),su.prototype.toLong=n("kotlin.kotlin.UShort.toLong",r((function(){var e=t.Long.fromInt(65535);return function(){return t.Long.fromInt(this.data).and(e)}}))),su.prototype.toUByte=n("kotlin.kotlin.UShort.toUByte",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data))}}))),su.prototype.toUShort=n("kotlin.kotlin.UShort.toUShort",(function(){return this})),su.prototype.toUInt=n("kotlin.kotlin.UShort.toUInt",r((function(){var t=p.kotlin.UInt;return function(){return new t(65535&this.data)}}))),su.prototype.toULong=n("kotlin.kotlin.UShort.toULong",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),su.prototype.toFloat=n("kotlin.kotlin.UShort.toFloat",(function(){return 65535&this.data})),su.prototype.toDouble=n("kotlin.kotlin.UShort.toDouble",(function(){return 65535&this.data})),su.prototype.toString=function(){return(65535&this.data).toString()},su.$metadata$={kind:h,simpleName:"UShort",interfaces:[E]},su.prototype.unbox=function(){return this.data},su.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},su.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)};var mu=p.kotlin||(p.kotlin={}),$u=mu.collections||(mu.collections={});$u.contains_mjy6jw$=V,$u.get_lastIndex_m7z4lg$=X,$u.get_lastIndex_tmsbgo$=Y,$u.get_lastIndex_l1lu5t$=Z,$u.first_us0mfu$=function(t){if(0===t.length)throw new Ni("Array is empty.");return t[0]},$u.indexOf_mjy6jw$=G,$u.get_indices_m7z4lg$=K;var yu=mu.ranges||(mu.ranges={});yu.reversed_zf1xzc$=$t,$u.get_indices_tmsbgo$=function(t){return new be(0,Y(t))},$u.get_indices_l1lu5t$=function(t){return new be(0,Z(t))},$u.last_us0mfu$=function(t){if(0===t.length)throw new Ni("Array is empty.");return t[X(t)]},$u.lastIndexOf_mjy6jw$=H;var vu=mu.random||(mu.random={});vu.Random=da,$u.single_355ntz$=W,mu.IllegalArgumentException_init_pdl1vj$=yi,$u.emptyList_287e2$=Jo,$u.ArrayList_init_287e2$=cn,$u.toList_us0mfu$=function(t){var e;switch(t.length){case 0:e=Jo();break;case 1:e=Gi(t[0]);break;default:e=Q(t)}return e},$u.sortWith_iwcb0m$=function(t,e){t.length>1&&fn(t,e)},$u.mapCapacity_za3lpa$=Yi,yu.coerceAtLeast_dqglrj$=vt,$u.LinkedHashMap_init_bwtc7$=Un,yu.coerceAtMost_dqglrj$=gt,$u.toCollection_5n4o2z$=J,$u.toMutableList_us0mfu$=Q,$u.toSet_us0mfu$=tt,$u.addAll_ipc267$=function(e,i){var n;if(t.isType(i,Mt))return e.addAll_brywnq$(i);var r=!1;for(n=i.iterator();n.hasNext();){var o=n.next();e.add_11rb$(o)&&(r=!0)}return r},$u.LinkedHashMap_init_q3lmfv$=Bn,$u.Grouping=ns,$u.ArrayList_init_ww73n8$=hn,$u.withIndex_us0mfu$=function(e){return new os((i=e,function(){return t.arrayIterator(i)}));var i},$u.HashSet_init_287e2$=function(t){return t=t||Object.create(En.prototype),un.call(t),En.call(t),t.map_8be2vx$=Sn(),t},mu.NoSuchElementException_init=Ei,mu.UnsupportedOperationException_init_pdl1vj$=zi,$u.listOf_mh5how$=Gi,$u.zip_r9t3v7$=function(t,e){for(var i=c.min(t.length,e.length),n=hn(i),r=0;r<i;r++)n.add_11rb$(xl(t[r],e[r]));return n},$u.collectionSizeOrDefault_ba2ldo$=ss,$u.joinTo_ohfn4r$=et,$u.joinToString_cph1y3$=function(t,e,i,n,r,o,s){return void 0===e&&(e=", "),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=-1),void 0===o&&(o="..."),void 0===s&&(s=null),et(t,lo(),e,i,n,r,o,s).toString()},$u.contains_2ws7j4$=function(e,i){return t.isType(e,Mt)?e.contains_11rb$(i):nt(e,i)>=0},$u.get_lastIndex_55thoc$=ts,$u.first_7wnvza$=function(e){if(t.isType(e,At))return it(e);var i=e.iterator();if(!i.hasNext())throw new Ni("Collection is empty.");return i.next()},$u.first_2p1efm$=it,$u.firstOrNull_2p1efm$=function(t){return t.isEmpty()?null:t.get_za3lpa$(0)},$u.indexOf_2ws7j4$=nt,$u.checkIndexOverflow_za3lpa$=Xi,$u.last_2p1efm$=function(t){if(t.isEmpty())throw new Ni("List is empty.");return t.get_za3lpa$(ts(t))},$u.lastOrNull_2p1efm$=function(t){return t.isEmpty()?null:t.get_za3lpa$(t.size-1|0)},$u.single_7wnvza$=rt,$u.single_2p1efm$=ot,$u.filterNotNull_m3lr2h$=function(t){return st(t,cn())},$u.filterNotNullTo_u9kwcl$=st,$u.toList_7wnvza$=ut,$u.reversed_7wnvza$=function(e){if(t.isType(e,Mt)&&e.size<=1)return ut(e);var i=pt(e);return qi(i),i},$u.shuffle_9jeydg$=at,$u.sortWith_nqfjgj$=function(t,e){!function(t,e){if(!(t.size<=1)){var i=Fi(t);fn(i,e);for(var n=0;n<i.length;n++)t.set_wxm5ur$(n,i[n])}}(t,e)},$u.toBooleanArray_xmyvgf$=function(e){var i,n,r=t.booleanArray(e.size),o=0;for(i=e.iterator();i.hasNext();){var s=i.next();r[(n=o,o=n+1|0,n)]=s}return r},$u.toIntArray_fx3nzu$=function(t){var e,i,n=new Int32Array(t.size),r=0;for(e=t.iterator();e.hasNext();){var o=e.next();n[(i=r,r=i+1|0,i)]=o}return n},$u.toCollection_5cfyqp$=lt,$u.toMutableList_7wnvza$=pt,$u.toMutableList_4c7yge$=ct,$u.distinct_7wnvza$=function(t){return ut(ht(t))},$u.toMutableSet_7wnvza$=ht,$u.Collection=Mt,$u.maxOrNull_lvsncp$=function(t){var e=t.iterator();if(!e.hasNext())return null;for(var i=e.next();e.hasNext();){var n=e.next();i=c.max(i,n)}return i},$u.minOrNull_exjks8$=dt,$u.joinTo_gcc71v$=ft,$u.joinToString_fmv235$=_t;var gu=mu.comparisons||(mu.comparisons={});yu.downTo_dqglrj$=mt,yu.step_xsgg7u$=function(t,e){return Ca(e>0,e),ce().fromClosedRange_qt1dr2$(t.first,t.last,t.step>0?e:0|-e)},yu.until_dqglrj$=yt,yu.coerceIn_e4yvb3$=bt,yu.coerceIn_ekzx8g$=function(t,e,i){if(e.compareTo_11rb$(i)>0)throw yi("Cannot coerce value to an empty range: maximum "+i.toString()+" is less than minimum "+e.toString()+".");return t.compareTo_11rb$(e)<0?e:t.compareTo_11rb$(i)>0?i:t};var bu=mu.sequences||(mu.sequences={});bu.Sequence=ks,bu.toCollection_gtszxp$=wt,bu.toList_veqyi0$=zt,bu.toMutableList_veqyi0$=kt,bu.map_z5avom$=St,bu.asIterable_veqyi0$=Ct;var xu=mu.text||(mu.text={});xu.get_lastIndex_gw00vp$=Ga,xu.iterator_gw00vp$=function(t){return new Ua(t)},xu.get_indices_gw00vp$=Va,xu.single_gw00vp$=function(t){var e;switch(t.length){case 0:throw new Ni("Char sequence is empty.");case 1:e=t.charCodeAt(0);break;default:throw yi("Char sequence has more than one element.")}return e},xu.drop_6ic1pp$=Nt,xu.StringBuilder_init=lo,mu.UInt=Nl,mu.ULong=Ul,mu.UByte=zl,mu.UShort=su,$u.copyOf_c03ot6$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int32Array(e))},$u.copyOf_3aefkx$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());var i=Ri(t,e,u);return i.$type$="LongArray",i},$u.copyOf_mrm5p$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int8Array(e))},$u.copyOf_m2jy6x$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int16Array(e))};var wu=mu.js||(mu.js={}),zu=mu.math||(mu.math={});Object.defineProperty(zu,"PI",{get:function(){return e}}),mu.Annotation=Et,mu.CharSequence=Pt,$u.Iterable=Tt,$u.MutableIterable=Ot,$u.MutableCollection=jt,$u.List=At,$u.MutableList=Rt,$u.Set=It,$u.MutableSet=Lt,Dt.Entry=qt,$u.Map=Dt,Bt.MutableEntry=Ft,$u.MutableMap=Bt,$u.Iterator=Ut,$u.MutableIterator=Vt,$u.ListIterator=Gt,$u.MutableListIterator=Ht,$u.ByteIterator=Wt,$u.CharIterator=Kt,$u.ShortIterator=Xt,$u.IntIterator=Yt,$u.LongIterator=Zt,$u.FloatIterator=Jt,$u.DoubleIterator=Qt,$u.BooleanIterator=te,yu.CharProgressionIterator=ee,yu.IntProgressionIterator=ie,yu.LongProgressionIterator=ne,Object.defineProperty(re,"Companion",{get:ae}),yu.CharProgression=re,Object.defineProperty(le,"Companion",{get:ce}),yu.IntProgression=le,Object.defineProperty(he,"Companion",{get:_e}),yu.LongProgression=he,yu.ClosedRange=me,Object.defineProperty($e,"Companion",{get:ge}),yu.CharRange=$e,Object.defineProperty(be,"Companion",{get:ze}),yu.IntRange=be,Object.defineProperty(ke,"Companion",{get:Ne}),yu.LongRange=ke,Object.defineProperty(mu,"Unit",{get:Te});var ku=mu.internal||(mu.internal={});ku.getProgressionLastElement_qt1dr2$=Re,ku.getProgressionLastElement_b9bd0d$=Ie,p.arrayIterator=function(t,e){if(null==e)return new Le(t);switch(e){case"BooleanArray":return qe(t);case"ByteArray":return Fe(t);case"ShortArray":return Ve(t);case"CharArray":return He(t);case"IntArray":return Ke(t);case"LongArray":return ti(t);case"FloatArray":return Ye(t);case"DoubleArray":return Je(t);default:throw gi("Unsupported type argument for arrayIterator: "+x(e))}},p.booleanArrayIterator=qe,p.byteArrayIterator=Fe,p.shortArrayIterator=Ve,p.charArrayIterator=He,p.intArrayIterator=Ke,p.floatArrayIterator=Ye,p.doubleArrayIterator=Je,p.longArrayIterator=ti,p.noWhenBranchMatched=function(){throw Oi()},p.subSequence=function(t,e,i){return"string"==typeof t?t.substring(e,i):t.subSequence_vux9f0$(e,i)},p.captureStack=function(t,e){Error.captureStackTrace?Error.captureStackTrace(e):e.stack=(new Error).stack},p.BoxedChar=ei,p.charArrayOf=function(){var t="CharArray",e=new Uint16Array([].slice.call(arguments));return e.$type$=t,e};var Su=mu.coroutines||(mu.coroutines={});Su.CoroutineImpl=ii,Object.defineProperty(Su,"CompletedContinuation",{get:si});var Cu=Su.intrinsics||(Su.intrinsics={});Cu.createCoroutineUnintercepted_x18nsh$=li,Cu.createCoroutineUnintercepted_3a617i$=ui,Cu.intercepted_f9mg25$=pi,mu.Error_init_pdl1vj$=hi,mu.Error=ci,mu.Exception_init_pdl1vj$=fi,mu.Exception=di,mu.RuntimeException_init_pdl1vj$=mi,mu.RuntimeException=_i,mu.IllegalArgumentException=$i,mu.IllegalStateException_init=function(t){return t=t||Object.create(vi.prototype),vi.call(t,null,null),t},mu.IllegalStateException_init_pdl1vj$=gi,mu.IllegalStateException=vi,mu.IndexOutOfBoundsException=bi,mu.UnsupportedOperationException_init=wi,mu.UnsupportedOperationException=xi,mu.NumberFormatException=ki,mu.NullPointerException=Si,mu.ClassCastException=Ci,mu.NoSuchElementException=Ni,mu.ArithmeticException=Pi,mu.NoWhenBranchMatchedException_init=Oi,mu.NoWhenBranchMatchedException=Ti,mu.UninitializedPropertyAccessException_init_pdl1vj$=ji,mu.UninitializedPropertyAccessException=Mi,mu.lazy_klfg04$=function(t){return new cl(t)},mu.fillFrom_dgzutr$=Ai,mu.arrayCopyResize_xao4iu$=Ri,p.findAssociatedObject_yjf3nl$=function(t,e){return null},xu.toString_if0zpk$=Ii,$u.asList_us0mfu$=Li,$u.arrayCopy=function(t,e,i,n,r){To().checkRangeIndexes_cub51b$(n,r,t.length);var o=r-n|0;if(To().checkRangeIndexes_cub51b$(i,i+o|0,e.length),ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){var s=t.subarray(n,r);e.set(s,i)}else if(t!==e||i<=n)for(var a=0;a<o;a++)e[i+a|0]=t[n+a|0];else for(var l=o-1|0;l>=0;l--)e[i+l|0]=t[n+l|0]},$u.copyOf_rblqex$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Float32Array(e))},$u.copyOf_xgrzbe$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Float64Array(e))},$u.copyOf_1qu12l$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());var i=Ri(t,e,!1);return i.$type$="BooleanArray",i},$u.copyOf_gtcw5h$=function(e,i){if(!(i>=0))throw yi(("Invalid new array size: "+i+".").toString());var n=Ai(e,t.charArray(i));return n.$type$="CharArray",n},$u.copyOfRange_5f8l3u$=Di,$u.reverse_vvxzk3$=qi,mu.Comparator=Bi,$u.copyToArray=Fi,$u.copyToArrayImpl=Ui,$u.copyToExistingArrayImpl=Vi,$u.setOf_mh5how$=Hi,$u.LinkedHashSet_init_287e2$=Gn,$u.LinkedHashSet_init_ww73n8$=Kn,$u.mapOf_x2b85n$=Wi,$u.shuffle_vvxzk3$=Ki,$u.shuffled_7wnvza$=function(t){var e=pt(t);return Ki(e),e},$u.AbstractMutableCollection=Zi,$u.AbstractMutableList=Ji,nn.SimpleEntry_init_trwmqg$=function(t,e){return e=e||Object.create(rn.prototype),rn.call(e,t.key,t.value),e},nn.SimpleEntry=rn,$u.AbstractMutableMap=nn,$u.AbstractMutableSet=un,$u.ArrayList_init_mqih57$=dn,$u.ArrayList=pn,$u.sortArrayWith_6xblhi$=fn,Object.defineProperty(mn,"HashCode",{get:xn}),$u.EqualityComparator=mn,$u.HashMap_init_va96d4$=kn,$u.HashMap_init_q3lmfv$=Sn,$u.HashMap_init_xf5xz2$=Cn,$u.HashMap_init_bwtc7$=Nn,$u.HashMap_init_73mtqc$=function(t,e){return Sn(e=e||Object.create(wn.prototype)),e.putAll_a2k3zr$(t),e},$u.HashMap=wn,$u.HashSet_init_mqih57$=function(t,e){return e=e||Object.create(En.prototype),un.call(e),En.call(e),e.map_8be2vx$=Nn(t.size),e.addAll_brywnq$(t),e},$u.HashSet_init_2wofer$=Pn,$u.HashSet_init_ww73n8$=Tn,$u.HashSet_init_nn01ho$=On,$u.HashSet=En,$u.InternalHashCodeMap=Mn,$u.InternalMap=An,$u.InternalStringMap=Rn,$u.LinkedHashMap_init_xf5xz2$=Fn,$u.LinkedHashMap_init_73mtqc$=function(t,e){return Sn(e=e||Object.create(In.prototype)),In.call(e),e.map_97q5dv$_0=Sn(),e.putAll_a2k3zr$(t),e},$u.LinkedHashMap=In,$u.LinkedHashSet_init_mqih57$=Hn,$u.LinkedHashSet_init_2wofer$=Wn,$u.LinkedHashSet=Vn,$u.RandomAccess=Xn;var Nu=mu.io||(mu.io={});Nu.BaseOutput=Yn,Nu.NodeJsOutput=Zn,Nu.BufferedOutput=Jn,Nu.BufferedOutputToConsoleLog=Qn,Nu.println=function(){yn.println()},Nu.println_s8jyv4$=function(t){yn.println_s8jyv4$(t)},Nu.print_s8jyv4$=function(t){yn.print_s8jyv4$(t)},Su.SafeContinuation_init_wj8d80$=function(t,e){return e=e||Object.create(tr.prototype),tr.call(e,t,ca()),e},Su.SafeContinuation=tr,p.throwNPE=function(t){throw new Si(t)},p.throwCCE=ir,p.throwISE=nr,p.throwUPAE=function(t){throw ji("lateinit property "+t+" has not been initialized")},Nu.Serializable=rr,zu.log_lu1900$=function(t,e){return e<=0||1===e?l.NaN:Math.log(t)/Math.log(e)},zu.round_14dthe$=function(t){if(t%.5!=0)return Math.round(t);var e=c.floor(t);return e%2==0?e:c.ceil(t)},zu.nextDown_yrwdxr$=or,zu.roundToInt_yrwdxr$=function(t){if(sr(t))throw yi("Cannot round NaN value.");return t>2147483647?2147483647:t<-2147483648?-2147483648:$(Math.round(t))},zu.roundToLong_yrwdxr$=function(e){if(sr(e))throw yi("Cannot round NaN value.");return e>v.toNumber()?v:e<y.toNumber()?y:t.Long.fromNumber(Math.round(e))},zu.abs_za3lpa$=function(t){return t<0?0|-t:t},zu.abs_s8cxhz$=function(t){return t.toNumber()<0?t.unaryMinus():t},mu.isNaN_yrwdxr$=sr,mu.isNaN_81szk$=ar,mu.isInfinite_yrwdxr$=lr,mu.isInfinite_81szk$=ur,mu.isFinite_yrwdxr$=pr,mu.isFinite_81szk$=function(t){return!ur(t)&&!ar(t)},vu.defaultPlatformRandom_8be2vx$=cr,vu.doubleFromParts_6xvm5r$=hr;var Eu=mu.reflect||(mu.reflect={});wu.get_js_1yb8b7$=function(e){var i;return(t.isType(i=e,_r)?i:ir()).jClass},Eu.KCallable=dr,Eu.KClass=fr;var Pu=Eu.js||(Eu.js={}),Tu=Pu.internal||(Pu.internal={});Tu.KClassImpl=_r,Tu.SimpleKClassImpl=mr,Tu.PrimitiveKClassImpl=$r,Object.defineProperty(Tu,"NothingKClassImpl",{get:gr}),Tu.ErrorKClass=br,Eu.KProperty=xr,Eu.KMutableProperty=wr,Eu.KProperty0=zr,Eu.KMutableProperty0=kr,Eu.KProperty1=Sr,Eu.KMutableProperty1=Cr,Eu.KType=Nr,p.createKType=function(t,e,i){return new Er(t,Li(e),i)},Tu.KTypeImpl=Er,Tu.prefixString_knho38$=Pr,Object.defineProperty(Tu,"PrimitiveClasses",{get:to}),p.getKClass=eo,p.getKClassM=io,p.getKClassFromExpression=function(e){var i;switch(typeof e){case"string":i=to().stringClass;break;case"number":i=(0|e)===e?to().intClass:to().doubleClass;break;case"boolean":i=to().booleanClass;break;case"function":i=to().functionClass(e.length);break;default:if(t.isBooleanArray(e))i=to().booleanArrayClass;else if(t.isCharArray(e))i=to().charArrayClass;else if(t.isByteArray(e))i=to().byteArrayClass;else if(t.isShortArray(e))i=to().shortArrayClass;else if(t.isIntArray(e))i=to().intArrayClass;else if(t.isLongArray(e))i=to().longArrayClass;else if(t.isFloatArray(e))i=to().floatArrayClass;else if(t.isDoubleArray(e))i=to().doubleArrayClass;else if(t.isType(e,fr))i=eo(fr);else if(t.isArray(e))i=to().arrayClass;else{var n=Object.getPrototypeOf(e).constructor;i=n===Object?to().anyClass:n===Error?to().throwableClass:no(n)}}return i},p.getKClass1=no,xu.Appendable=ro,xu.CharacterCodingException=oo,xu.StringBuilder_init_za3lpa$=ao,xu.StringBuilder=so,xu.isWhitespace_myv2d0$=uo,xu.isHighSurrogate_myv2d0$=po,xu.isLowSurrogate_myv2d0$=co,xu.toBoolean_5cw0du$=function(t){var e=null!=t;return e&&(e=o(t.toLowerCase(),"true")),e},xu.toByte_pdl1vz$=function(t){var e;return null!=(e=ja(t))?e:Fa(t)},xu.toShort_pdl1vz$=function(t){var e;return null!=(e=Ra(t))?e:Fa(t)},xu.toInt_pdl1vz$=function(t){var e;return null!=(e=La(t))?e:Fa(t)},xu.toInt_6ic1pp$=function(t,e){var i;return null!=(i=Da(t,e))?i:Fa(t)},xu.toLong_pdl1vz$=function(t){var e;return null!=(e=qa(t))?e:Fa(t)},xu.toDouble_pdl1vz$=function(t){var e=+t;return(sr(e)&&!ho(t)||0===e&&go(t))&&Fa(t),e},xu.toDoubleOrNull_pdl1vz$=function(t){var e=+t;return sr(e)&&!ho(t)||0===e&&go(t)?null:e},xu.checkRadix_za3lpa$=fo,xu.digitOf_xvg9q0$=_o,xu.concatToString_355ntz$=mo,xu.concatToString_wlitf7$=$o,xu.decodeToString_964n91$=function(t){return So(t,0,t.length,!1)},xu.compareTo_7epoxm$=yo,xu.startsWith_7epoxm$=function(t,e,i){return void 0===i&&(i=!1),i?bo(t,0,e,0,e.length,i):t.startsWith(e,0)},xu.endsWith_7epoxm$=function(t,e,i){return void 0===i&&(i=!1),i?bo(t,t.length-e.length|0,e,0,e.length,i):t.endsWith(e)},xu.matches_rjktp$=vo,xu.isBlank_gw00vp$=go,xu.equals_igcy3c$=function(t,e,i){var n;if(void 0===i&&(i=!1),null==t)n=null==e;else{var r;if(i){var s=null!=e;s&&(s=o(t.toLowerCase(),e.toLowerCase())),r=s}else r=o(t,e);n=r}return n},xu.regionMatches_h3ii2q$=bo,xu.capitalize_pdl1vz$=function(t){return t.length>0?t.substring(0,1).toUpperCase()+t.substring(1):t},xu.decodeUtf8_bndkiu$=So,$u.AbstractCollection=Co,Object.defineProperty(No,"Companion",{get:To}),$u.AbstractList=No,Object.defineProperty(Oo,"Companion",{get:Do}),$u.AbstractMap=Oo,Object.defineProperty(qo,"Companion",{get:Uo}),$u.AbstractSet=qo,Object.defineProperty($u,"EmptyIterator",{get:Ho}),Object.defineProperty($u,"EmptyList",{get:Xo}),$u.asCollection_vj43ah$=Yo,$u.listOf_i5x0yv$=function(t){return t.length>0?Li(t):Jo()},$u.mutableListOf_i5x0yv$=function(t){return 0===t.length?cn():dn(new Zo(t,!0))},$u.arrayListOf_i5x0yv$=Qo,$u.get_indices_gzk92b$=function(t){return new be(0,t.size-1|0)},$u.shuffled_4173s5$=function(t,e){var i=pt(t);return at(i,e),i},$u.optimizeReadOnlyList_qzupvv$=es,gu.compareValues_s00gnj$=function(e,i){var n;return e===i?0:null==e?-1:null==i?1:t.compareTo(t.isComparable(n=e)?n:ir(),i)},$u.throwIndexOverflow=is,$u.IndexedValue=rs,$u.IndexingIterable=os,$u.IndexingIterator=as,$u.getOrImplicitDefault_t9ocha$=ls,$u.emptyMap_q3lmfv$=_s,$u.mapOf_qfcya0$=function(t){return t.length>0?gs(t,Un(t.length)):_s()},$u.mutableMapOf_qfcya0$=function(t){var e=Un(t.length);return $s(e,t),e},$u.hashMapOf_qfcya0$=ms,$u.getValue_t9ocha$=function(t,e){return ls(t,e)},$u.putAll_5gv49o$=$s,$u.putAll_cweazw$=ys,$u.toMap_6hr0sd$=function(e){var i;if(t.isType(e,Mt)){switch(e.size){case 0:i=_s();break;case 1:i=Wi(t.isType(e,At)?e.get_za3lpa$(0):e.iterator().next());break;default:i=vs(e,Un(e.size))}return i}return bs(vs(e,Bn()))},$u.toMap_jbpz7q$=vs,$u.toMap_ujwnei$=gs,$u.optimizeReadOnlyMap_1vp4qn$=bs,$u.addAll_ye1y7v$=function(t,e){return t.addAll_brywnq$(Li(e))},$u.removeAll_uhyeqt$=xs,$u.removeAll_qafx1e$=zs,bu.sequence_o0x0bg$=function(t){return new Ss((e=t,function(){return Cs(e)}));var e},bu.iterator_o0x0bg$=Cs,bu.SequenceScope=Ns,bu.TransformingSequence=Ps,bu.FlatteningSequence=Os,Object.defineProperty($u,"EmptySet",{get:Rs}),$u.emptySet_287e2$=Is,$u.setOf_i5x0yv$=function(t){return t.length>0?tt(t):Is()},$u.mutableSetOf_i5x0yv$=function(t){return J(t,Kn(t.length))},$u.hashSetOf_i5x0yv$=Ls,Su.Continuation=Ds,mu.Result=dl,Su.startCoroutine_x18nsh$=function(t,e){pi(li(t,e)).resumeWith_tl1gpc$(new dl(Te()))},Su.startCoroutine_3a617i$=function(t,e,i){pi(ui(t,e,i)).resumeWith_tl1gpc$(new dl(Te()))},Cu.get_COROUTINE_SUSPENDED=aa,Object.defineProperty(qs,"Key",{get:Us}),Su.ContinuationInterceptor=qs,Vs.Key=Hs,Vs.Element=Ws,Su.CoroutineContext=Vs,Su.AbstractCoroutineContextElement=Ks,Su.AbstractCoroutineContextKey=Xs,Object.defineProperty(Su,"EmptyCoroutineContext",{get:Js}),Su.CombinedContext=Qs,Object.defineProperty(Cu,"COROUTINE_SUSPENDED",{get:aa}),Object.defineProperty(la,"COROUTINE_SUSPENDED",{get:pa}),Object.defineProperty(la,"UNDECIDED",{get:ca}),Object.defineProperty(la,"RESUMED",{get:ha}),Cu.CoroutineSingletons=la,Object.defineProperty(da,"Default",{get:ma}),vu.Random_za3lpa$=$a,vu.fastLog2_kcn2v3$=ya,vu.takeUpperBits_b6l1hq$=va,vu.checkRangeBounds_6xvm5r$=ga,vu.checkRangeBounds_cfj5zr$=ba,vu.checkRangeBounds_sdh6z7$=xa,vu.boundsErrorMessage_dgzutr$=wa,vu.XorWowRandom_init_6xvm5r$=ka,vu.XorWowRandom=za,yu.checkStepIsPositive_44uddq$=Ca,Eu.KClassifier=Na,xu.appendElement_k2zgzt$=Ea,xu.equals_4lte5s$=Pa,xu.trimIndent_pdl1vz$=function(t){return Ta(t,"")},xu.replaceIndent_rjktp$=Ta,xu.toByteOrNull_pdl1vz$=ja,xu.toByteOrNull_6ic1pp$=Aa,xu.toShortOrNull_pdl1vz$=Ra,xu.toShortOrNull_6ic1pp$=Ia,xu.toIntOrNull_pdl1vz$=La,xu.toIntOrNull_6ic1pp$=Da,xu.toLongOrNull_pdl1vz$=qa,xu.toLongOrNull_6ic1pp$=Ba,xu.numberFormatError_y4putb$=Fa,xu.substring_fc3b62$=function(t,e){return t.substring(e.start,e.endInclusive+1|0)},xu.substring_i511yc$=Ha,xu.substringBefore_8cymmc$=function(t,e,i){void 0===i&&(i=t);var n=Za(t,e);return-1===n?i:t.substring(0,n)},xu.regionMatchesImpl_4c7s8r$=Wa,xu.indexOfAny_junqau$=Ka,xu.lastIndexOfAny_junqau$=Xa,xu.indexOf_8eortd$=Za,xu.indexOf_l5u8uk$=Ja,xu.lastIndexOf_8eortd$=function(e,i,n,r){return void 0===n&&(n=Ga(e)),void 0===r&&(r=!1),r||"string"!=typeof e?Xa(e,t.charArrayOf(i),n,r):e.lastIndexOf(String.fromCharCode(i),n)},xu.lastIndexOf_l5u8uk$=Qa,xu.contains_sgbm27$=function(t,e,i){return void 0===i&&(i=!1),Za(t,e,void 0,i)>=0},xu.splitToSequence_ip8yn$=rl,xu.split_ip8yn$=function(e,i,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=0),1===i.length){var o=i[0];if(0!==o.length)return function(e,i,n,r){if(!(r>=0))throw yi(("Limit must be non-negative, but was "+r+".").toString());var o=0,s=Ja(e,i,o,n);if(-1===s||1===r)return Gi(e.toString());var a=r>0,l=hn(a?gt(r,10):10);do{if(l.add_11rb$(t.subSequence(e,o,s).toString()),o=s+i.length|0,a&&l.size===(r-1|0))break;s=Ja(e,i,o,n)}while(-1!==s);return l.add_11rb$(t.subSequence(e,o,e.length).toString()),l}(e,o,n,r)}var s,a=Ct(nl(e,i,void 0,n,r)),l=hn(ss(a,10));for(s=a.iterator();s.hasNext();){var u=s.next();l.add_11rb$(Ha(e,u))}return l},xu.lineSequence_gw00vp$=ol,xu.lines_gw00vp$=sl,mu.Lazy=al,Object.defineProperty(mu,"UNINITIALIZED_VALUE",{get:pl}),mu.UnsafeLazyImpl=cl,mu.InitializedLazyImpl=hl,mu.createFailure_tcv7n7$=yl,Object.defineProperty(dl,"Companion",{get:ml}),dl.Failure=$l,mu.throwOnFailure_iacion$=vl,mu.NotImplementedError=gl,mu.Pair=bl,mu.to_ujzrz7$=xl,mu.Triple=wl,Object.defineProperty(zl,"Companion",{get:Cl}),Object.defineProperty(Nl,"Companion",{get:Tl}),mu.uintCompare_vux9f0$=pu,mu.uintDivide_oqfnby$=function(e,i){return new Nl(t.Long.fromInt(e.data).and(w).div(t.Long.fromInt(i.data).and(w)).toInt())},mu.uintRemainder_oqfnby$=hu,mu.uintToDouble_za3lpa$=function(t){return(2147483647&t)+2*(t>>>31<<30)},Object.defineProperty(Ol,"Companion",{get:Al}),yu.UIntRange=Ol,Object.defineProperty(Rl,"Companion",{get:Dl}),yu.UIntProgression=Rl,$u.UIntIterator=Bl,$u.ULongIterator=Fl,Object.defineProperty(Ul,"Companion",{get:Hl}),mu.ulongCompare_3pjtqy$=cu,mu.ulongDivide_jpm79w$=function(e,i){var n=e.data,r=i.data;if(r.toNumber()<0)return cu(e.data,i.data)<0?new Ul(u):new Ul(C);if(n.toNumber()>=0)return new Ul(n.div(r));var o=n.shiftRightUnsigned(1).div(r).shiftLeft(1),s=n.subtract(o.multiply(r));return new Ul(o.add(t.Long.fromInt(cu(new Ul(s).data,new Ul(r).data)>=0?1:0)))},mu.ulongRemainder_jpm79w$=du,mu.ulongToDouble_s8cxhz$=function(t){return 2048*t.shiftRightUnsigned(11).toNumber()+t.and(U).toNumber()},Object.defineProperty(Wl,"Companion",{get:Yl}),yu.ULongRange=Wl,Object.defineProperty(Zl,"Companion",{get:tu}),yu.ULongProgression=Zl,ku.getProgressionLastElement_fjk8us$=ru,ku.getProgressionLastElement_15zasp$=ou,Object.defineProperty(su,"Companion",{get:uu}),mu.ulongToString_8e33dg$=fu,mu.ulongToString_plstum$=_u,Bt.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,Oo.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,nn.prototype.remove_xwzc9p$=Bt.prototype.remove_xwzc9p$,Mn.prototype.createJsMap=An.prototype.createJsMap,Rn.prototype.createJsMap=An.prototype.createJsMap,us.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,ps.prototype.remove_xwzc9p$=Bt.prototype.remove_xwzc9p$,ps.prototype.getOrDefault_xwzc9p$=Bt.prototype.getOrDefault_xwzc9p$,us.prototype.getOrDefault_xwzc9p$,cs.prototype.remove_xwzc9p$=ps.prototype.remove_xwzc9p$,cs.prototype.getOrDefault_xwzc9p$=ps.prototype.getOrDefault_xwzc9p$,hs.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,Ws.prototype.plus_1fupul$=Vs.prototype.plus_1fupul$,qs.prototype.fold_3cc69b$=Ws.prototype.fold_3cc69b$,qs.prototype.plus_1fupul$=Ws.prototype.plus_1fupul$,Ks.prototype.get_j3r2sn$=Ws.prototype.get_j3r2sn$,Ks.prototype.fold_3cc69b$=Ws.prototype.fold_3cc69b$,Ks.prototype.minusKey_yeqjby$=Ws.prototype.minusKey_yeqjby$,Ks.prototype.plus_1fupul$=Ws.prototype.plus_1fupul$,Qs.prototype.plus_1fupul$=Vs.prototype.plus_1fupul$,Sa.prototype.contains_mef7kx$=me.prototype.contains_mef7kx$,Sa.prototype.isEmpty=me.prototype.isEmpty,e=3.141592653589793,ri=null;var Ou=void 0!==i&&i.versions&&!!i.versions.node;yn=Ou?new Zn(i.stdout):new Qn,new er(Js(),(function(e){var i;return vl(e),null==(i=e.value)||t.isType(i,k)||T(),Ee})),vn=c.pow(2,-26),gn=c.pow(2,-53),Zr=t.newArray(0,null),new Bi((function(t,e){return yo(t,e,!0)})),new Int8Array([_(239),_(191),_(189)]),Jr=65533,new dl(aa())}()})?n.apply(e,r):n)||(t.exports=o)}).call(this,i(3))},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],p=!1,c=-1;function h(){p&&l&&(p=!1,l.length?u=l.concat(u):c=-1,u.length&&d())}function d(){if(!p){var t=a(h);p=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,p=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function _(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new f(t,e)),1!==u.length||p||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){(function(n){var r,o,s;o=[e,i(1)],void 0===(s="function"==typeof(r=function(t,e){"use strict";var i,r=Object,o=e.throwCCE,s=e.Kind.CLASS,a=e.kotlin.coroutines.Continuation,l=(e.kotlin.Annotation,e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED),u=e.kotlin.coroutines.CoroutineImpl,p=(e.kotlin.collections.emptyList_287e2$,e.kotlin.Unit),c=e.throwUPAE,h=(e.kotlin.collections.copyToArray,e.kotlin.coroutines.intrinsics.intercepted_f9mg25$),d=e.kotlin.collections.ArrayList_init_ww73n8$,f=e.kotlin.Result,_=e.kotlin.coroutines,m=e.kotlin.coroutines.intrinsics.createCoroutineUnintercepted_3a617i$,$=e.kotlin.coroutines.ContinuationInterceptor,y=e.equals,v=e.defineInlineFunction,g=e.wrapFunction,b=e.kotlin.IllegalStateException_init_pdl1vj$,x=e.Kind.INTERFACE,w=Error,z=e.toString,k=e.Kind.OBJECT,S=e.kotlin.createFailure_tcv7n7$,C=e.kotlin.coroutines.AbstractCoroutineContextKey,N=e.kotlin.coroutines.AbstractCoroutineContextElement,E=e.kotlin.RuntimeException,P=e.kotlin.coroutines.CoroutineContext.Key,T=e.kotlin.coroutines.CoroutineContext.Element,O=e.kotlin.coroutines.startCoroutine_x18nsh$,M=e.kotlin.coroutines.startCoroutine_3a617i$,j=e.kotlin.Enum,A=e.throwISE,R=e.Long.ONE,I=e.Long.ZERO,L=e.Long.MAX_VALUE,D=new e.Long(0,1),q=(e.Long.fromInt(1e6),new e.Long(2077252342,2147),new e.Long(-1,1073741823),e.ensureNotNull),B=(e.kotlin.Comparable,e.kotlin.IllegalArgumentException_init_pdl1vj$),F=e.kotlin.Error,U=e.kotlin.IllegalStateException,V=e.kotlin.sequences.sequence_o0x0bg$,G=e.kotlin.collections.ArrayList,H=e.kotlin.text.StringBuilder_init,W=e.kotlin.UnsupportedOperationException,K=e.kotlin.UnsupportedOperationException_init_pdl1vj$,X=Function,Y=Math,Z=e.kotlin.NoSuchElementException,J=e.hashCode,Q=(e.kotlin.collections.IndexedValue,e.kotlin.IndexOutOfBoundsException,e.kotlin.collections.LinkedHashMap_init_q3lmfv$,e.kotlin.collections.ArrayList_init_287e2$),tt=(e.kotlin.collections.HashSet_init_287e2$,e.kotlin.collections.LinkedHashSet_init_287e2$,e.kotlin.Pair,e.kotlin.to_ujzrz7$,e.kotlin.collections.indexOf_mjy6jw$,e.kotlin.collections.arrayCopy),et=(e.kotlin.text.trimIndent_pdl1vz$,e.kotlin.ArithmeticException,new e.Long(0,805306368),e.Long.fromInt(1073741823),new e.Long(-1073741824,268435455),new e.Long(0,268435456),new e.Long(0,536870912),e.kotlin.text.toBoolean_5cw0du$,e.kotlin.text.toLongOrNull_pdl1vz$,e.kotlin.coroutines.intrinsics.createCoroutineUnintercepted_x18nsh$),it=e.kotlin.collections.shuffle_vvxzk3$,nt=e.Long.fromInt(2147483647),rt=e.kotlin.ranges.coerceIn_ekzx8g$,ot=e.kotlin.collections.HashSet_init_ww73n8$,st=(e.kotlin.collections.get_lastIndex_55thoc$,e.kotlin.NoSuchElementException_init,e.kotlin.collections.MutableIterator,e.kotlin.collections.AbstractMutableList,e.kotlin.UnsupportedOperationException_init);function at(t,e){void 0===e&&(e=!0),Ie.call(this,e),this.parentContext=t,this.context_p8rm81$_0=this.parentContext.plus_1fupul$(this)}function lt(t,e){at.call(this,t,e)}function ut(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function pt(t,e){lt.call(this,t,!1),this.continuation_0=m(e,this,this)}function ct(t,e){at.call(this,t,e)}function ht(t,e){ct.call(this,t,!1),this.continuation_0=m(e,this,this)}function dt(t,e){Qn.call(this,t,e)}function ft(t,e){Qn.call(this,t,e),this._decision_0=0}function _t(){}function mt(t){var i,n;return e.isType(t,Vn)?null==(n=null!=(i=t.claimReusableCancellableContinuation())&&i.resetState_8be2vx$()?i:null)?new bt(t,0):n:new bt(t,0)}function $t(t,e){t.invokeOnCancellation_f05bi3$(new vt(e))}function yt(t,e){t.invokeOnCancellation_f05bi3$(new gt(e))}function vt(t){St.call(this),this.node_0=t}function gt(t){St.call(this),this.handle_0=t}function bt(t,e){Xn.call(this,e),this.delegate_dhbmku$_0=t,this.context_xycjfy$_0=this.delegate.context,this._decision_0=0,this._state_0=kt(),this._parentHandle_0=null}function xt(){}function wt(){zt=this}at.prototype=Object.create(Ie.prototype),at.prototype.constructor=at,St.prototype=Object.create(Sr.prototype),St.prototype.constructor=St,kr.prototype=Object.create(mo.prototype),kr.prototype.constructor=kr,Xe.prototype=Object.create(kr.prototype),Xe.prototype.constructor=Xe,lt.prototype=Object.create(at.prototype),lt.prototype.constructor=lt,pt.prototype=Object.create(lt.prototype),pt.prototype.constructor=pt,ct.prototype=Object.create(at.prototype),ct.prototype.constructor=ct,ht.prototype=Object.create(ct.prototype),ht.prototype.constructor=ht,Qn.prototype=Object.create(at.prototype),Qn.prototype.constructor=Qn,dt.prototype=Object.create(Qn.prototype),dt.prototype.constructor=dt,ft.prototype=Object.create(Qn.prototype),ft.prototype.constructor=ft,vt.prototype=Object.create(St.prototype),vt.prototype.constructor=vt,gt.prototype=Object.create(St.prototype),gt.prototype.constructor=gt,Xn.prototype=Object.create(uo.prototype),Xn.prototype.constructor=Xn,bt.prototype=Object.create(Xn.prototype),bt.prototype.constructor=bt,Ct.prototype=Object.create(St.prototype),Ct.prototype.constructor=Ct,Tt.prototype=Object.create(Ie.prototype),Tt.prototype.constructor=Tt,Lt.prototype=Object.create(It.prototype),Lt.prototype.constructor=Lt,qt.prototype=Object.create(C.prototype),qt.prototype.constructor=qt,Dt.prototype=Object.create(N.prototype),Dt.prototype.constructor=Dt,ee.prototype=Object.create(j.prototype),ee.prototype.constructor=ee,he.prototype=Object.create(Dt.prototype),he.prototype.constructor=he,Ur.prototype=Object.create(he.prototype),Ur.prototype.constructor=Ur,me.prototype=Object.create(Ur.prototype),$e.prototype=Object.create(E.prototype),$e.prototype.constructor=$e,ye.prototype=Object.create(F.prototype),ye.prototype.constructor=ye,Be.prototype=Object.create(Xe.prototype),Be.prototype.constructor=Be,Fe.prototype=Object.create(bt.prototype),Fe.prototype.constructor=Fe,We.prototype=Object.create(Ie.prototype),We.prototype.constructor=We,bo.prototype=Object.create(mo.prototype),bo.prototype.constructor=bo,Ye.prototype=Object.create(bo.prototype),Ye.prototype.constructor=Ye,Je.prototype=Object.create(Xe.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Xe.prototype),Qe.prototype.constructor=Qe,ti.prototype=Object.create(Xe.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Xe.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(Xe.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Xe.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(ni.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(ni.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(ni.prototype),si.prototype.constructor=si,ai.prototype=Object.create(Dt.prototype),ai.prototype.constructor=ai,li.prototype=Object.create(N.prototype),Gr.prototype=Object.create(U.prototype),Gr.prototype.constructor=Gr,ui.prototype=Object.create(Gr.prototype),ui.prototype.constructor=ui,pi.prototype=Object.create(Dt.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(N.prototype),di.prototype.constructor=di,vo.prototype=Object.create(Un.prototype),vo.prototype.constructor=vo,$o.prototype=Object.create(vo.prototype),$o.prototype.constructor=$o,Si.prototype=Object.create($o.prototype),Si.prototype.constructor=Si,yo.prototype=Object.create(vo.prototype),yo.prototype.constructor=yo,Ei.prototype=Object.create(yo.prototype),Ei.prototype.constructor=Ei,Vi.prototype=Object.create(mo.prototype),Vi.prototype.constructor=Vi,Ti.prototype=Object.create(Vi.prototype),Ti.prototype.constructor=Ti,Oi.prototype=Object.create(Vi.prototype),Oi.prototype.constructor=Oi,Ai.prototype=Object.create(yo.prototype),Ai.prototype.constructor=Ai,Di.prototype=Object.create(St.prototype),Di.prototype.constructor=Di,Ki.prototype=Object.create(mo.prototype),Ki.prototype.constructor=Ki,Bi.prototype=Object.create(Ki.prototype),Bi.prototype.constructor=Bi,Fi.prototype=Object.create(Ki.prototype),Fi.prototype.constructor=Fi,Ui.prototype=Object.create(Ki.prototype),Ui.prototype.constructor=Ui,Mi.prototype=Object.create(ki.prototype),Mi.prototype.constructor=Mi,Hi.prototype=Object.create(Vi.prototype),Hi.prototype.constructor=Hi,Wi.prototype=Object.create(Vi.prototype),Wi.prototype.constructor=Wi,Xi.prototype=Object.create(Mi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(at.prototype),dn.prototype=Object.create(U.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(Z.prototype),fn.prototype.constructor=fn,_n.prototype=Object.create(at.prototype),$n.prototype=Object.create(Mi.prototype),$n.prototype.constructor=$n,Rn.prototype=Object.create(Mi.prototype),Rn.prototype.constructor=Rn,Ln.prototype=Object.create(Mi.prototype),Ln.prototype.constructor=Ln,Fn.prototype=Object.create(Bn.prototype),Fn.prototype.constructor=Fn,Vn.prototype=Object.create(Xn.prototype),Vn.prototype.constructor=Vn,vr.prototype=Object.create(ni.prototype),vr.prototype.constructor=vr,gr.prototype=Object.create(Bn.prototype),gr.prototype.constructor=gr,br.prototype=Object.create(Fn.prototype),br.prototype.constructor=br,xr.prototype=Object.create(mo.prototype),xr.prototype.constructor=xr,yr.prototype=Object.create(bo.prototype),yr.prototype.constructor=yr,qr.prototype=Object.create(ai.prototype),qr.prototype.constructor=qr,Fr.prototype=Object.create(he.prototype),Fr.prototype.constructor=Fr,Wr.prototype=Object.create(Gr.prototype),Wr.prototype.constructor=Wr,ao.prototype=Object.create(qn.prototype),ao.prototype.constructor=ao,Yr.prototype=Object.create(ao.prototype),Yr.prototype.constructor=Yr,Xr.prototype=Object.create(Dt.prototype),Xr.prototype.constructor=Xr,Zr.prototype=Object.create(Xr.prototype),Zr.prototype.constructor=Zr,to.prototype=Object.create(Xr.prototype),to.prototype.constructor=to,no.prototype=Object.create(St.prototype),no.prototype.constructor=no,ro.prototype=Object.create(Dt.prototype),ro.prototype.constructor=ro,so.prototype=Object.create(ao.prototype),so.prototype.constructor=so,ho.prototype=Object.create(Gr.prototype),ho.prototype.constructor=ho,go.prototype=Object.create(Bn.prototype),go.prototype.constructor=go,Object.defineProperty(at.prototype,"context",{configurable:!0,get:function(){return this.context_p8rm81$_0}}),Object.defineProperty(at.prototype,"coroutineContext",{configurable:!0,get:function(){return this.context}}),Object.defineProperty(at.prototype,"isActive",{configurable:!0,get:function(){return e.callGetter(this,Ie.prototype,"isActive")}}),at.prototype.initParentJob_8be2vx$=function(){this.initParentJobInternal_8vd9i7$(this.parentContext.get_j3r2sn$(xe()))},at.prototype.onStart=function(){},at.prototype.onStartInternal=function(){this.onStart()},at.prototype.onCompleted_11rb$=function(t){},at.prototype.onCancelled_z1nxw$=function(t,e){},at.prototype.cancellationExceptionMessage=function(){return Ar(this)+" was cancelled"},at.prototype.onCompletionInternal_s8jyv4$=function(t){var i;e.isType(t,It)?this.onCancelled_z1nxw$(t.cause,t.handled):this.onCompleted_11rb$(null==(i=t)||e.isType(i,r)?i:o())},at.prototype.resumeWith_tl1gpc$=function(t){var e=this.makeCompletingOnce_8ea4ql$(jt(t));e!==Ee&&this.afterResume_s8jyv4$(e)},at.prototype.afterResume_s8jyv4$=function(t){this.afterCompletion_s8jyv4$(t)},at.prototype.handleOnCompletionException_tcv7n7$=function(t){Vt(this.context,t)},at.prototype.nameString=function(){var t;return this.context,null==(t=null)?Ie.prototype.nameString.call(this):'"'+t+'":'+Ie.prototype.nameString.call(this)},at.prototype.start_cfq2d3$=function(t,e){this.initParentJob_8be2vx$(),t.invoke_810yno$(e,this)},at.prototype.start_b5ul0p$=function(t,e,i){this.initParentJob_8be2vx$(),t.invoke_3o0yor$(i,e,this)},at.$metadata$={kind:s,simpleName:"AbstractCoroutine",interfaces:[te,a,Ie,ve]},lt.prototype.getCompleted=function(){var t;return null==(t=this.getCompletedInternal_8be2vx$())||e.isType(t,r)?t:o()},ut.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},ut.prototype=Object.create(u.prototype),ut.prototype.constructor=ut,ut.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.$this.awaitInternal_8be2vx$(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:return null==(t=this.result_0)||e.isType(t,r)?t:o();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},lt.prototype.await=function(t,e){var i=new ut(this,t);return e?i:i.doResume(null)},Object.defineProperty(lt.prototype,"onAwait",{configurable:!0,get:function(){return this}}),lt.prototype.registerSelectClause1_o3xas4$=function(t,e){this.registerSelectClause1Internal_u6kgbh$(t,e)},lt.$metadata$={kind:s,simpleName:"DeferredCoroutine",interfaces:[fr,le,at]},pt.prototype.onStart=function(){or(this.continuation_0,this)},pt.$metadata$={kind:s,simpleName:"LazyDeferredCoroutine",interfaces:[lt]},v("kotlinx-coroutines-core.kotlinx.coroutines.invoke_5xrhu2$",g((function(){var i=t.kotlinx.coroutines.withContext_i5cbzn$;return function(t,n,r){return e.suspendCall(i(t,n,e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),ct.prototype.handleJobException_tcv7n7$=function(t){return Vt(this.context,t),!0},ct.$metadata$={kind:s,simpleName:"StandaloneCoroutine",interfaces:[at]},ht.prototype.onStart=function(){or(this.continuation_0,this)},ht.$metadata$={kind:s,simpleName:"LazyStandaloneCoroutine",interfaces:[ct]},dt.prototype.afterResume_s8jyv4$=function(t){var e=Rt(t,this.uCont);this.uCont.context,this.uCont.resumeWith_tl1gpc$(e)},dt.$metadata$={kind:s,simpleName:"UndispatchedCoroutine",interfaces:[Qn]},ft.prototype.trySuspend_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=1,1))return!0;break;case 2:return!1;default:throw b("Already suspended".toString())}},ft.prototype.tryResume_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=2,1))return!0;break;case 1:return!1;default:throw b("Already resumed".toString())}},ft.prototype.afterCompletion_s8jyv4$=function(t){this.afterResume_s8jyv4$(t)},ft.prototype.afterResume_s8jyv4$=function(t){this.tryResume_0()||Gn(h(this.uCont),Rt(t,this.uCont))},ft.prototype.getResult=function(){var t;if(this.trySuspend_0())return l;var i=Ge(this.state_8be2vx$);if(e.isType(i,It))throw i.cause;return null==(t=i)||e.isType(t,r)?t:o()},ft.$metadata$={kind:s,simpleName:"DispatchedCoroutine",interfaces:[Qn]},_t.prototype.tryResume_19pj23$=function(t,e,i){return void 0===e&&(e=null),i?i(t,e):this.tryResume_19pj23$$default(t,e)},_t.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},_t.$metadata$={kind:x,simpleName:"CancellableContinuation",interfaces:[a]},v("kotlinx-coroutines-core.kotlinx.coroutines.suspendCancellableCoroutine_o6sdx9$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,r){var o;return e.suspendCall((o=t,function(t){var e=new n(i(t),1);return e.initCancellability(),o(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutine_o6sdx9$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,r){var o;return e.suspendCall((o=t,function(t){var e=new n(i(t),0);return o(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutineReusable_mkkzkw$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.getOrCreateCancellableContinuation_3j0xf1$;return function(t,r){var o;return e.suspendCall((o=t,function(t){var e=n(i(t));return o(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutine_i8nyj0$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,r,o){var s;return void 0===t&&(t=!1),e.suspendCall((s=r,function(t){var e=new n(i(t),0);return s(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),vt.prototype.invoke=function(t){this.node_0.remove()},vt.prototype.toString=function(){return"RemoveOnCancel["+this.node_0+"]"},vt.$metadata$={kind:s,simpleName:"RemoveOnCancel",interfaces:[St]},gt.prototype.invoke=function(t){this.handle_0.dispose()},gt.prototype.toString=function(){return"DisposeOnCancel["+this.handle_0+"]"},gt.$metadata$={kind:s,simpleName:"DisposeOnCancel",interfaces:[St]},Object.defineProperty(bt.prototype,"delegate",{get:function(){return this.delegate_dhbmku$_0}}),Object.defineProperty(bt.prototype,"context",{configurable:!0,get:function(){return this.context_xycjfy$_0}}),Object.defineProperty(bt.prototype,"parentHandle_0",{configurable:!0,get:function(){return this._parentHandle_0},set:function(t){this._parentHandle_0=t}}),Object.defineProperty(bt.prototype,"state_8be2vx$",{configurable:!0,get:function(){return this._state_0}}),Object.defineProperty(bt.prototype,"isActive",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,xt)}}),Object.defineProperty(bt.prototype,"isCompleted",{configurable:!0,get:function(){return!e.isType(this.state_8be2vx$,xt)}}),Object.defineProperty(bt.prototype,"isCancelled",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,Lt)}}),bt.prototype.initCancellability=function(){this.setupCancellation_0()},bt.prototype.isReusable_0=function(){return e.isType(this.delegate,Vn)&&this.delegate.isReusable_pmw987$(this)},bt.prototype.resetState_8be2vx$=function(){var t=this._state_0;return e.isType(t,Nt)?(this.detachChild_8be2vx$(),!1):(this._decision_0=0,this._state_0=kt(),!0)},bt.prototype.setupCancellation_0=function(){var t;if(!this.checkCompleted_0()&&null===this.parentHandle_0&&null!=(t=this.delegate.context.get_j3r2sn$(xe()))){var e=t;e.start();var i=e.invokeOnCompletion_ct2b2z$(!0,void 0,new si(e,this));this.parentHandle_0=i,this.isCompleted&&!this.isReusable_0()&&(i.dispose(),this.parentHandle_0=Re())}},bt.prototype.checkCompleted_0=function(){var t,i,n,r=this.isCompleted;if(0!==this.resumeMode)return r;if(null==(i=e.isType(t=this.delegate,Vn)?t:null))return r;if(null==(n=i.checkPostponedCancellation_jp3215$(this)))return r;var o=n;return r||this.cancel_dbl4no$(o),!0},Object.defineProperty(bt.prototype,"callerFrame",{configurable:!0,get:function(){var t;return e.isType(t=this.delegate,ko)?t:null}}),bt.prototype.getStackTraceElement=function(){return null},bt.prototype.takeState=function(){return this.state_8be2vx$},bt.prototype.cancelResult_83a7kv$=function(t,i){if(e.isType(t,Et))try{t.onCancellation(i)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.cancelLater_0=function(t){var i,n;return 0===this.resumeMode&&null!=(n=e.isType(i=this.delegate,Vn)?i:null)&&n.postponeCancellation_tcv7n7$(t)},bt.prototype.cancel_dbl4no$$default=function(t){var i;for(this._state_0;;){var n=this._state_0;t:do{if(!e.isType(n,xt))return!1;var r=new Lt(this,t,e.isType(n,St));if((i=this)._state_0!==n||(i._state_0=r,0))break t;if(e.isType(n,St))try{n.invoke(t)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}return this.detachChildIfNonResuable_0(),this.dispatchResume_0(0),!0}while(0)}},bt.prototype.parentCancelled_8o0b5c$=function(t){this.cancelLater_0(t)||(this.cancel_dbl4no$(t),this.detachChildIfNonResuable_0())},bt.prototype.invokeHandlerSafely_0=function(t){try{t()}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.getContinuationCancellationCause_dqr1mp$=function(t){return t.getCancellationException()},bt.prototype.trySuspend_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=1,1))return!0;break;case 2:return!1;default:throw b("Already suspended".toString())}},bt.prototype.tryResume_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=2,1))return!0;break;case 1:return!1;default:throw b("Already resumed".toString())}},bt.prototype.getResult=function(){if(this.setupCancellation_0(),this.trySuspend_0())return l;var t=this.state_8be2vx$;if(e.isType(t,It))throw xo(t.cause);if(1===this.resumeMode){var i=this.context.get_j3r2sn$(xe());if(null!=i&&!i.isActive){var n=i.getCancellationException();throw this.cancelResult_83a7kv$(t,n),xo(n)}}return this.getSuccessfulResult_tpy1pm$(t)},bt.prototype.resumeWith_tl1gpc$=function(t){this.resumeImpl_0(At(t,this),this.resumeMode)},bt.prototype.resume_qnlsu9$=function(t,i){var n=this.resumeImpl_0(new Et(t,i),this.resumeMode);if(null!=n)try{i(n.cause)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.invokeOnCancellation_f05bi3$=function(t){var i,n={v:null};for(this._state_0;;){var r,o=this._state_0;if(e.isType(o,wt)){var s;if(null!=(r=n.v))s=r;else{var a=this.makeHandler_0(t);n.v=a,s=a}var l=s;if((i=this)._state_0===o&&(i._state_0=l,1))return}else{if(!e.isType(o,St)){if(e.isType(o,Lt)){o.makeHandled()||this.multipleHandlersError_0(t,o);try{var u,p;Cr(t,null!=(p=e.isType(u=o,It)?u:null)?p.cause:null)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}return}return}this.multipleHandlersError_0(t,o)}}},bt.prototype.multipleHandlersError_0=function(t,e){throw b(("It's prohibited to register multiple handlers, tried to register "+t+", already has "+z(e)).toString())},bt.prototype.makeHandler_0=function(t){return e.isType(t,St)?t:new Ct(t)},bt.prototype.dispatchResume_0=function(t){this.tryResume_0()||Yn(this,t)},bt.prototype.resumeImpl_0=function(t,i){var n;for(this._state_0;;){var r=this._state_0;t:do{if(e.isType(r,xt)){if((n=this)._state_0!==r||(n._state_0=t,0))break t;return this.detachChildIfNonResuable_0(),this.dispatchResume_0(i),null}if(e.isType(r,Lt)&&r.makeResumed())return r;this.alreadyResumedError_0(t)}while(0)}},bt.prototype.alreadyResumedError_0=function(t){throw b(("Already resumed, but proposed with update "+z(t)).toString())},bt.prototype.detachChildIfNonResuable_0=function(){this.isReusable_0()||this.detachChild_8be2vx$()},bt.prototype.detachChild_8be2vx$=function(){var t=this.parentHandle_0;null!=t&&t.dispose(),this.parentHandle_0=Re()},bt.prototype.tryResume_19pj23$$default=function(t,n){var r;for(this._state_0;;){var o=this._state_0;t:do{if(e.isType(o,xt)){var s=null==n?t:new Nt(n,t);if((r=this)._state_0!==o||(r._state_0=s,0))break t;return this.detachChildIfNonResuable_0(),i}return e.isType(o,Nt)&&o.idempotentResume===n?i:null}while(0)}},bt.prototype.tryResumeWithException_tcv7n7$=function(t){var n;for(this._state_0;;){var r=this._state_0;t:do{if(e.isType(r,xt)){var o=new It(t);if((n=this)._state_0!==r||(n._state_0=o,0))break t;return this.detachChildIfNonResuable_0(),i}return null}while(0)}},bt.prototype.completeResume_za3rmp$=function(t){this.dispatchResume_0(this.resumeMode)},bt.prototype.resumeUndispatched_hyuxa3$=function(t,i){var n,r=e.isType(n=this.delegate,Vn)?n:null;this.resumeImpl_0(i,(null!=r?r.dispatcher:null)===t?2:this.resumeMode)},bt.prototype.resumeUndispatchedWithException_gd0rtt$=function(t,i){var n,r=e.isType(n=this.delegate,Vn)?n:null;this.resumeImpl_0(new It(i),(null!=r?r.dispatcher:null)===t?2:this.resumeMode)},bt.prototype.getSuccessfulResult_tpy1pm$=function(t){var i,n,s;return e.isType(t,Nt)?null==(i=t.result)||e.isType(i,r)?i:o():e.isType(t,Et)?null==(n=t.result)||e.isType(n,r)?n:o():null==(s=t)||e.isType(s,r)?s:o()},bt.prototype.toString=function(){return this.nameString()+"("+Tr(this.delegate)+"){"+z(this.state_8be2vx$)+"}@"+jr(this)},bt.prototype.nameString=function(){return"CancellableContinuation"},bt.$metadata$={kind:s,simpleName:"CancellableContinuationImpl",interfaces:[ko,_t,Xn]},xt.$metadata$={kind:x,simpleName:"NotCompleted",interfaces:[]},wt.prototype.toString=function(){return"Active"},wt.$metadata$={kind:k,simpleName:"Active",interfaces:[xt]};var zt=null;function kt(){return null===zt&&new wt,zt}function St(){Sr.call(this)}function Ct(t){St.call(this),this.handler_0=t}function Nt(t,e){this.idempotentResume=t,this.result=e}function Et(t,e){this.result=t,this.onCancellation=e}function Pt(){}function Tt(t){Ie.call(this,!0),this.initParentJobInternal_8vd9i7$(t)}function Ot(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function Mt(){}function jt(t){var i,n=t.exceptionOrNull();return null==n?null==(i=t.value)||e.isType(i,r)?i:o():new It(n)}function At(t,i){var n,s=t.exceptionOrNull();return null==s?null==(n=t.value)||e.isType(n,r)?n:o():new It(xo(s))}function Rt(t,i){var n;return e.isType(t,It)?new f(S(xo(t.cause))):(f.Companion,new f(null==(n=t)||e.isType(n,r)?n:o()))}function It(t,e){void 0===e&&(e=!1),this.cause=t,this._handled_0=e}function Lt(t,e,i){It.call(this,null!=e?e:Hr("Continuation "+t+" was cancelled normally"),i),this._resumed_0=!1}function Dt(){Ut(),N.call(this,$.Key)}function qt(){Ft=this,C.call(this,$.Key,Bt)}function Bt(t){var i;return e.isType(i=t,Dt)?i:null}St.$metadata$={kind:s,simpleName:"CancelHandler",interfaces:[xt,Sr]},Ct.prototype.invoke=function(t){this.handler_0(t)},Ct.prototype.toString=function(){return"InvokeOnCancel["+Ar(this.handler_0)+"@"+jr(this)+"]"},Ct.$metadata$={kind:s,simpleName:"InvokeOnCancel",interfaces:[St]},Nt.prototype.toString=function(){return"CompletedIdempotentResult["+z(this.result)+"]"},Nt.$metadata$={kind:s,simpleName:"CompletedIdempotentResult",interfaces:[]},Et.prototype.toString=function(){return"CompletedWithCancellation["+z(this.result)+"]"},Et.$metadata$={kind:s,simpleName:"CompletedWithCancellation",interfaces:[]},Pt.$metadata$={kind:x,simpleName:"CompletableDeferred",interfaces:[le]},Object.defineProperty(Tt.prototype,"onCancelComplete",{configurable:!0,get:function(){return!0}}),Tt.prototype.getCompleted=function(){var t;return null==(t=this.getCompletedInternal_8be2vx$())||e.isType(t,r)?t:o()},Ot.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},Ot.prototype=Object.create(u.prototype),Ot.prototype.constructor=Ot,Ot.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.$this.awaitInternal_8be2vx$(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:return null==(t=this.result_0)||e.isType(t,r)?t:o();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Tt.prototype.await=function(t,e){var i=new Ot(this,t);return e?i:i.doResume(null)},Object.defineProperty(Tt.prototype,"onAwait",{configurable:!0,get:function(){return this}}),Tt.prototype.registerSelectClause1_o3xas4$=function(t,e){this.registerSelectClause1Internal_u6kgbh$(t,e)},Tt.prototype.complete_11rb$=function(t){return this.makeCompleting_8ea4ql$(t)},Tt.prototype.completeExceptionally_tcv7n7$=function(t){return this.makeCompleting_8ea4ql$(new It(t))},Tt.$metadata$={kind:s,simpleName:"CompletableDeferredImpl",interfaces:[fr,Pt,Ie]},Mt.$metadata$={kind:x,simpleName:"CompletableJob",interfaces:[ve]},Object.defineProperty(It.prototype,"handled",{configurable:!0,get:function(){return this._handled_0}}),It.prototype.makeHandled=function(){return!1===(t=this)._handled_0&&(t._handled_0=!0,!0);var t},It.prototype.toString=function(){return Ar(this)+"["+this.cause+"]"},It.$metadata$={kind:s,simpleName:"CompletedExceptionally",interfaces:[]},Lt.prototype.makeResumed=function(){return!1===(t=this)._resumed_0&&(t._resumed_0=!0,!0);var t},Lt.$metadata$={kind:s,simpleName:"CancelledContinuation",interfaces:[It]},qt.$metadata$={kind:k,simpleName:"Key",interfaces:[C]};var Ft=null;function Ut(){return null===Ft&&new qt,Ft}function Vt(t,i){var n;try{if(null!=(n=t.get_j3r2sn$(Qt())))return void n.handleException_1ur55u$(t,i)}catch(t){if(e.isType(t,w))return void Mr(0,Gt(i,t));throw t}Mr(0,i)}function Gt(t,e){return t===e?t:new E("Exception while trying to handle coroutine exception",e)}function Ht(){Qt()}function Wt(){Jt=this}Dt.prototype.isDispatchNeeded_1fupul$=function(t){return!0},Dt.prototype.dispatchYield_5bn72i$=function(t,e){this.dispatch_5bn72i$(t,e)},Dt.prototype.interceptContinuation_wj8d80$=function(t){return new Vn(this,t)},Dt.prototype.releaseInterceptedContinuation_k98bjh$=function(t){var i,n;null!=(n=(e.isType(i=t,Vn)?i:o()).reusableCancellableContinuation)&&n.detachChild_8be2vx$()},Dt.prototype.plus_9wrrq5$=function(t){return t},Dt.prototype.toString=function(){return Ar(this)+"@"+jr(this)},Dt.$metadata$={kind:s,simpleName:"CoroutineDispatcher",interfaces:[$,N]},Wt.$metadata$={kind:k,simpleName:"Key",interfaces:[P]};var Kt,Xt,Yt,Zt,Jt=null;function Qt(){return null===Jt&&new Wt,Jt}function te(){}function ee(t,e){j.call(this),this.name$=t,this.ordinal$=e}function ie(){ie=function(){},Kt=new ee("DEFAULT",0),Xt=new ee("LAZY",1),Yt=new ee("ATOMIC",2),Zt=new ee("UNDISPATCHED",3)}function ne(){return ie(),Kt}function re(){return ie(),Xt}function oe(){return ie(),Yt}function se(){return ie(),Zt}function ae(){}function le(){}function ue(t){return function(e){var i=new bt(h(e),1);return i.initCancellability(),t(i),i.getResult()}}function pe(){}function ce(t){var i,n;return null!=(n=e.isType(i=t.get_j3r2sn$($.Key),pe)?i:null)?n:Er()}function he(){Dt.call(this),this.useCount_0=I,this.shared_0=!1,this.unconfinedQueue_0=null}function de(){fe=this,this.ref_0=new Eo}te.$metadata$={kind:x,simpleName:"CoroutineScope",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.currentCoroutineContext",(function(t){return e.coroutineReceiver().context})),ee.prototype.invoke_810yno$=function(t,i){switch(this.name){case"DEFAULT":nr(t,i);break;case"ATOMIC":O(t,i);break;case"UNDISPATCHED":lr(t,i);break;case"LAZY":break;default:e.noWhenBranchMatched()}},ee.prototype.invoke_3o0yor$=function(t,i,n){switch(this.name){case"DEFAULT":rr(t,i,n);break;case"ATOMIC":M(t,i,n);break;case"UNDISPATCHED":ur(t,i,n);break;case"LAZY":break;default:e.noWhenBranchMatched()}},Object.defineProperty(ee.prototype,"isLazy",{configurable:!0,get:function(){return this===re()}}),ee.$metadata$={kind:s,simpleName:"CoroutineStart",interfaces:[j]},ee.values=function(){return[ne(),re(),oe(),se()]},ee.valueOf_61zpoe$=function(t){switch(t){case"DEFAULT":return ne();case"LAZY":return re();case"ATOMIC":return oe();case"UNDISPATCHED":return se();default:A("No enum constant kotlinx.coroutines.CoroutineStart."+t)}},ae.$metadata$={kind:x,simpleName:"CopyableThrowable",interfaces:[]},le.$metadata$={kind:x,simpleName:"Deferred",interfaces:[ve]},pe.prototype.delay_s8cxhz$=function(t,e){var i,n;if(!(t.toNumber()<=0))return ue((i=t,n=this,function(t){return n.scheduleResumeAfterDelay_egqmvs$(i,t),p}))(e)},pe.prototype.invokeOnTimeout_8irseu$=function(t,e){return Er().invokeOnTimeout_8irseu$(t,e)},pe.$metadata$={kind:x,simpleName:"Delay",interfaces:[]},he.prototype.processNextEvent=function(){return this.processUnconfinedEvent()?I:L},Object.defineProperty(he.prototype,"isEmpty",{configurable:!0,get:function(){return this.isUnconfinedQueueEmpty}}),Object.defineProperty(he.prototype,"nextTime",{configurable:!0,get:function(){var t;return null==(t=this.unconfinedQueue_0)||t.isEmpty?L:I}}),he.prototype.processUnconfinedEvent=function(){var t,e;return null!=(t=this.unconfinedQueue_0)&&null!=(e=t.removeFirstOrNull())&&(e.run(),!0)},he.prototype.shouldBeProcessedFromContext=function(){return!1},he.prototype.dispatchUnconfined_4avnfa$=function(t){var e,i;if(null!=(e=this.unconfinedQueue_0))i=e;else{var n=new qn;this.unconfinedQueue_0=n,i=n}i.addLast_trkh7z$(t)},Object.defineProperty(he.prototype,"isActive",{configurable:!0,get:function(){return this.useCount_0.toNumber()>0}}),Object.defineProperty(he.prototype,"isUnconfinedLoopActive",{configurable:!0,get:function(){return this.useCount_0.compareTo_11rb$(this.delta_0(!0))>=0}}),Object.defineProperty(he.prototype,"isUnconfinedQueueEmpty",{configurable:!0,get:function(){var t,e;return null==(e=null!=(t=this.unconfinedQueue_0)?t.isEmpty:null)||e}}),he.prototype.delta_0=function(t){return t?D:R},he.prototype.incrementUseCount_6taknv$=function(t){void 0===t&&(t=!1),this.useCount_0=this.useCount_0.add(this.delta_0(t)),t||(this.shared_0=!0)},he.prototype.decrementUseCount_6taknv$=function(t){void 0===t&&(t=!1),this.useCount_0=this.useCount_0.subtract(this.delta_0(t)),this.useCount_0.toNumber()>0||this.shared_0&&this.shutdown()},he.prototype.shutdown=function(){},he.$metadata$={kind:s,simpleName:"EventLoop",interfaces:[Dt]},Object.defineProperty(de.prototype,"eventLoop_8be2vx$",{configurable:!0,get:function(){var t,e;if(null!=(t=this.ref_0.get()))e=t;else{var i=Br();this.ref_0.set_11rb$(i),e=i}return e}}),de.prototype.currentOrNull_8be2vx$=function(){return this.ref_0.get()},de.prototype.resetEventLoop_8be2vx$=function(){this.ref_0.set_11rb$(null)},de.prototype.setEventLoop_13etkv$=function(t){this.ref_0.set_11rb$(t)},de.$metadata$={kind:k,simpleName:"ThreadLocalEventLoop",interfaces:[]};var fe=null;function _e(){return null===fe&&new de,fe}function me(){Ur.call(this),this._queue_0=null,this._delayed_0=null,this._isCompleted_0=!1}function $e(t,e){E.call(this,t,e),this.name="CompletionHandlerException"}function ye(t,e){F.call(this,t,e),this.name="CoroutinesInternalError"}function ve(){xe()}function ge(){be=this,Qt()}$e.$metadata$={kind:s,simpleName:"CompletionHandlerException",interfaces:[E]},ye.$metadata$={kind:s,simpleName:"CoroutinesInternalError",interfaces:[F]},ge.$metadata$={kind:k,simpleName:"Key",interfaces:[P]};var be=null;function xe(){return null===be&&new ge,be}function we(){}function ze(){}function ke(){}function Se(){}function Ce(){Ae=this}ve.prototype.cancel_m4sck1$=function(t,e){void 0===t&&(t=null),e?e(t):this.cancel_m4sck1$$default(t)},ve.prototype.cancel=function(){this.cancel_m4sck1$(null)},ve.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},ve.prototype.invokeOnCompletion_ct2b2z$=function(t,e,i,n){return void 0===t&&(t=!1),void 0===e&&(e=!0),n?n(t,e,i):this.invokeOnCompletion_ct2b2z$$default(t,e,i)},ve.prototype.plus_dqr1mp$=function(t){return t},ve.$metadata$={kind:x,simpleName:"Job",interfaces:[T]},we.$metadata$={kind:x,simpleName:"DisposableHandle",interfaces:[]},ze.$metadata$={kind:x,simpleName:"ChildJob",interfaces:[ve]},ke.$metadata$={kind:x,simpleName:"ParentJob",interfaces:[ve]},Se.$metadata$={kind:x,simpleName:"ChildHandle",interfaces:[we]},Ce.prototype.dispose=function(){},Ce.prototype.childCancelled_tcv7n7$=function(t){return!1},Ce.prototype.toString=function(){return"NonDisposableHandle"},Ce.$metadata$={kind:k,simpleName:"NonDisposableHandle",interfaces:[Se,we]};var Ne,Ee,Pe,Te,Oe,Me,je,Ae=null;function Re(){return null===Ae&&new Ce,Ae}function Ie(t){this._state_v70vig$_0=t?je:Me,this._parentHandle_acgcx5$_0=null}function Le(t,e){return function(){return t.state_8be2vx$===e}}function De(t,e,i,n){u.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$JobSupport=t,this.local$tmp$=void 0,this.local$tmp$_0=void 0,this.local$cur=void 0,this.local$$receiver=e}function qe(t,e,i){this.list_m9wkmb$_0=t,this._isCompleting_0=e,this._rootCause_0=i,this._exceptionsHolder_0=null}function Be(t,e,i,n){Xe.call(this,i.childJob),this.parent_0=t,this.state_0=e,this.child_0=i,this.proposedUpdate_0=n}function Fe(t,e){bt.call(this,t,1),this.job_0=e}function Ue(t){this.state=t}function Ve(t){return e.isType(t,Ke)?new Ue(t):t}function Ge(t){var i,n,r;return null!=(r=null!=(n=e.isType(i=t,Ue)?i:null)?n.state:null)?r:t}function He(t){this.isActive_hyoax9$_0=t}function We(t){Ie.call(this,!0),this.initParentJobInternal_8vd9i7$(t),this.handlesException_fejgjb$_0=this.handlesExceptionF()}function Ke(){}function Xe(t){kr.call(this),this.job=t}function Ye(){bo.call(this)}function Ze(t){this.list_afai45$_0=t}function Je(t,e){Xe.call(this,t),this.handler_0=e}function Qe(t,e){Xe.call(this,t),this.continuation_0=e}function ti(t,e){Xe.call(this,t),this.continuation_0=e}function ei(t,e,i){Xe.call(this,t),this.select_0=e,this.block_0=i}function ii(t,e,i){Xe.call(this,t),this.select_0=e,this.block_0=i}function ni(t){Xe.call(this,t)}function ri(t,e){ni.call(this,t),this.handler_0=e,this._invoked_0=0}function oi(t,e){ni.call(this,t),this.childJob=e}function si(t,e){ni.call(this,t),this.child=e}function ai(){Dt.call(this)}function li(){N.call(this,xe())}function ui(t,e){Hr(t,this),this.coroutine_8be2vx$=e,this.name="TimeoutCancellationException"}function pi(){ci=this,Dt.call(this)}Object.defineProperty(Ie.prototype,"key",{configurable:!0,get:function(){return xe()}}),Object.defineProperty(Ie.prototype,"parentHandle_8be2vx$",{configurable:!0,get:function(){return this._parentHandle_acgcx5$_0},set:function(t){this._parentHandle_acgcx5$_0=t}}),Ie.prototype.initParentJobInternal_8vd9i7$=function(t){if(null!=t){t.start();var e=t.attachChild_kx8v25$(this);this.parentHandle_8be2vx$=e,this.isCompleted&&(e.dispose(),this.parentHandle_8be2vx$=Re())}else this.parentHandle_8be2vx$=Re()},Object.defineProperty(Ie.prototype,"state_8be2vx$",{configurable:!0,get:function(){for(this._state_v70vig$_0;;){var t=this._state_v70vig$_0;if(!e.isType(t,Bn))return t;t.perform_s8jyv4$(this)}}}),Ie.prototype.loopOnState_46ivxf$_0=function(t){for(;;)t(this.state_8be2vx$)},Object.defineProperty(Ie.prototype,"isActive",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Ke)&&t.isActive}}),Object.defineProperty(Ie.prototype,"isCompleted",{configurable:!0,get:function(){return!e.isType(this.state_8be2vx$,Ke)}}),Object.defineProperty(Ie.prototype,"isCancelled",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,It)||e.isType(t,qe)&&t.isCancelling}}),Ie.prototype.finalizeFinishingState_10mr1z$_0=function(t,i){var n,r,s,a=null!=(r=e.isType(n=i,It)?n:null)?r.cause:null,l={v:!1};l.v=t.isCancelling;var u=t.sealLocked_dbl4no$(a),p=this.getFinalRootCause_3zkch4$_0(t,u);null!=p&&this.addSuppressedExceptions_85dgeo$_0(p,u);var c,h=p,d=null==h||h===a?i:new It(h);return null!=h&&(this.cancelParent_7dutpz$_0(h)||this.handleJobException_tcv7n7$(h))&&(e.isType(s=d,It)?s:o()).makeHandled(),l.v||this.onCancelling_dbl4no$(h),this.onCompletionInternal_s8jyv4$(d),(c=this)._state_v70vig$_0===t&&(c._state_v70vig$_0=Ve(d)),this.completeStateFinalization_a4ilmi$_0(t,d),d},Ie.prototype.getFinalRootCause_3zkch4$_0=function(t,i){if(i.isEmpty())return t.isCancelling?new Wr(this.cancellationExceptionMessage(),null,this):null;var n;t:do{var r;for(r=i.iterator();r.hasNext();){var o=r.next();if(!e.isType(o,Gr)){n=o;break t}}n=null}while(0);if(null!=n)return n;var s=i.get_za3lpa$(0);if(e.isType(s,ui)){var a;t:do{var l;for(l=i.iterator();l.hasNext();){var u=l.next();if(u!==s&&e.isType(u,ui)){a=u;break t}}a=null}while(0);if(null!=a)return a}return s},Ie.prototype.addSuppressedExceptions_85dgeo$_0=function(t,i){var n;if(!(i.size<=1)){var r=_o(i.size),o=t;for(n=i.iterator();n.hasNext();){var s=n.next();s!==t&&s!==o&&!e.isType(s,Gr)&&r.add_11rb$(s)}}},Ie.prototype.tryFinalizeSimpleState_5emg4m$_0=function(t,e){return(i=this)._state_v70vig$_0===t&&(i._state_v70vig$_0=Ve(e),!0)&&(this.onCancelling_dbl4no$(null),this.onCompletionInternal_s8jyv4$(e),this.completeStateFinalization_a4ilmi$_0(t,e),!0);var i},Ie.prototype.completeStateFinalization_a4ilmi$_0=function(t,i){var n,r,o,s;null!=(n=this.parentHandle_8be2vx$)&&(n.dispose(),this.parentHandle_8be2vx$=Re());var a=null!=(o=e.isType(r=i,It)?r:null)?o.cause:null;if(e.isType(t,Xe))try{t.invoke(a)}catch(i){if(!e.isType(i,w))throw i;this.handleOnCompletionException_tcv7n7$(new $e("Exception in completion handler "+t+" for "+this,i))}else null!=(s=t.list)&&this.notifyCompletion_mgxta4$_0(s,a)},Ie.prototype.notifyCancelling_xkpzb8$_0=function(t,i){var n;this.onCancelling_dbl4no$(i);for(var r={v:null},o=t._next;!y(o,t);){if(e.isType(o,ni)){var s,a=o;try{a.invoke(i)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(s=r.v)?s:null)&&(r.v=new $e("Exception in completion handler "+a+" for "+this,t))}}o=o._next}null!=(n=r.v)&&this.handleOnCompletionException_tcv7n7$(n),this.cancelParent_7dutpz$_0(i)},Ie.prototype.cancelParent_7dutpz$_0=function(t){if(this.isScopedCoroutine)return!0;var i=e.isType(t,Gr),n=this.parentHandle_8be2vx$;return null===n||n===Re()?i:n.childCancelled_tcv7n7$(t)||i},Ie.prototype.notifyCompletion_mgxta4$_0=function(t,i){for(var n,r={v:null},o=t._next;!y(o,t);){if(e.isType(o,Xe)){var s,a=o;try{a.invoke(i)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(s=r.v)?s:null)&&(r.v=new $e("Exception in completion handler "+a+" for "+this,t))}}o=o._next}null!=(n=r.v)&&this.handleOnCompletionException_tcv7n7$(n)},Ie.prototype.notifyHandlers_alhslr$_0=g((function(){var t=e.equals;return function(i,n,r,o){for(var s,a={v:null},l=r._next;!t(l,r);){if(n(l)){var u,p=l;try{p.invoke(o)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(u=a.v)?u:null)&&(a.v=new $e("Exception in completion handler "+p+" for "+this,t))}}l=l._next}null!=(s=a.v)&&this.handleOnCompletionException_tcv7n7$(s)}})),Ie.prototype.start=function(){for(;;)switch(this.startInternal_tp1bqd$_0(this.state_8be2vx$)){case 0:return!1;case 1:return!0}},Ie.prototype.startInternal_tp1bqd$_0=function(t){return e.isType(t,He)?t.isActive?0:(i=this)._state_v70vig$_0!==t||(i._state_v70vig$_0=je,0)?-1:(this.onStartInternal(),1):e.isType(t,Ze)?function(e){return e._state_v70vig$_0===t&&(e._state_v70vig$_0=t.list,!0)}(this)?(this.onStartInternal(),1):-1:0;var i},Ie.prototype.onStartInternal=function(){},Ie.prototype.getCancellationException=function(){var t,i,n=this.state_8be2vx$;if(e.isType(n,qe)){if(null==(i=null!=(t=n.rootCause)?this.toCancellationException_rg9tb7$(t,Ar(this)+" is cancelling"):null))throw b(("Job is still new or active: "+this).toString());return i}if(e.isType(n,Ke))throw b(("Job is still new or active: "+this).toString());return e.isType(n,It)?this.toCancellationException_rg9tb7$(n.cause):new Wr(Ar(this)+" has completed normally",null,this)},Ie.prototype.toCancellationException_rg9tb7$=function(t,i){var n,r;return void 0===i&&(i=null),null!=(r=e.isType(n=t,Gr)?n:null)?r:new Wr(null!=i?i:this.cancellationExceptionMessage(),t,this)},Object.defineProperty(Ie.prototype,"completionCause",{configurable:!0,get:function(){var t,i=this.state_8be2vx$;if(e.isType(i,qe)){if(null==(t=i.rootCause))throw b(("Job is still new or active: "+this).toString());return t}if(e.isType(i,Ke))throw b(("Job is still new or active: "+this).toString());return e.isType(i,It)?i.cause:null}}),Object.defineProperty(Ie.prototype,"completionCauseHandled",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,It)&&t.handled}}),Ie.prototype.invokeOnCompletion_f05bi3$=function(t){return this.invokeOnCompletion_ct2b2z$(!1,!0,t)},Ie.prototype.invokeOnCompletion_ct2b2z$$default=function(t,i,n){for(var r,s={v:null};;){var a=this.state_8be2vx$;t:do{var l,u,p,c,h;if(e.isType(a,He))if(a.isActive){var d;if(null!=(l=s.v))d=l;else{var f=this.makeNode_9qhc1i$_0(n,t);s.v=f,d=f}var _=d;if((r=this)._state_v70vig$_0===a&&(r._state_v70vig$_0=_,1))return _}else this.promoteEmptyToNodeList_lchanx$_0(a);else{if(!e.isType(a,Ke))return i&&Cr(n,null!=(h=e.isType(c=a,It)?c:null)?h.cause:null),Re();var m=a.list;if(null==m)this.promoteSingleToNodeList_ft43ca$_0(e.isType(u=a,Xe)?u:o());else{var $,y={v:null},v={v:Re()};if(t&&e.isType(a,qe)){var g;y.v=a.rootCause;var b=null==y.v;if(b||(b=e.isType(n,oi)&&!a.isCompleting),b){var x;if(null!=(g=s.v))x=g;else{var w=this.makeNode_9qhc1i$_0(n,t);s.v=w,x=w}var z=x;if(!this.addLastAtomic_qayz7c$_0(a,m,z))break t;if(null==y.v)return z;v.v=z}}if(null!=y.v)return i&&Cr(n,y.v),v.v;if(null!=(p=s.v))$=p;else{var k=this.makeNode_9qhc1i$_0(n,t);s.v=k,$=k}var S=$;if(this.addLastAtomic_qayz7c$_0(a,m,S))return S}}}while(0)}},Ie.prototype.makeNode_9qhc1i$_0=function(t,i){var n,r,o,s,a,l;return i?null!=(o=null!=(r=e.isType(n=t,ni)?n:null)?r:null)?o:new ri(this,t):null!=(l=null!=(a=e.isType(s=t,Xe)?s:null)?a:null)?l:new Je(this,t)},Ie.prototype.addLastAtomic_qayz7c$_0=function(t,e,i){var n;t:do{if(!Le(this,t)()){n=!1;break t}e.addLast_l2j9rm$(i),n=!0}while(0);return n},Ie.prototype.promoteEmptyToNodeList_lchanx$_0=function(t){var e,i=new Ye,n=t.isActive?i:new Ze(i);(e=this)._state_v70vig$_0===t&&(e._state_v70vig$_0=n)},Ie.prototype.promoteSingleToNodeList_ft43ca$_0=function(t){t.addOneIfEmpty_l2j9rm$(new Ye);var e,i=t._next;(e=this)._state_v70vig$_0===t&&(e._state_v70vig$_0=i)},Ie.prototype.join=function(t){if(this.joinInternal_ta6o25$_0())return this.joinSuspend_kfh5g8$_0(t);wi(t.context)},Ie.prototype.joinInternal_ta6o25$_0=function(){for(;;){var t=this.state_8be2vx$;if(!e.isType(t,Ke))return!1;if(this.startInternal_tp1bqd$_0(t)>=0)return!0}},Ie.prototype.joinSuspend_kfh5g8$_0=function(t){return(i=this,e=function(t){return yt(t,i.invokeOnCompletion_f05bi3$(new Qe(i,t))),p},function(t){var i=new bt(h(t),1);return i.initCancellability(),e(i),i.getResult()})(t);var e,i},Object.defineProperty(Ie.prototype,"onJoin",{configurable:!0,get:function(){return this}}),Ie.prototype.registerSelectClause0_s9h9qd$=function(t,i){for(;;){var n=this.state_8be2vx$;if(t.isSelected)return;if(!e.isType(n,Ke))return void(t.trySelect()&&sr(i,t.completion));if(0===this.startInternal_tp1bqd$_0(n))return void t.disposeOnSelect_rvfg84$(this.invokeOnCompletion_f05bi3$(new ei(this,t,i)))}},Ie.prototype.removeNode_nxb11s$=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Xe))return e.isType(i,Ke)?void(null!=i.list&&t.remove()):void 0;if(i!==t)return;if((n=this)._state_v70vig$_0===i&&(n._state_v70vig$_0=je,1))return}var n},Object.defineProperty(Ie.prototype,"onCancelComplete",{configurable:!0,get:function(){return!1}}),Ie.prototype.cancel_m4sck1$$default=function(t){this.cancelInternal_tcv7n7$(null!=t?t:new Wr(this.cancellationExceptionMessage(),null,this))},Ie.prototype.cancellationExceptionMessage=function(){return"Job was cancelled"},Ie.prototype.cancel_dbl4no$$default=function(t){var e;return this.cancelInternal_tcv7n7$(null!=(e=null!=t?this.toCancellationException_rg9tb7$(t):null)?e:new Wr(this.cancellationExceptionMessage(),null,this)),!0},Ie.prototype.cancelInternal_tcv7n7$=function(t){this.cancelImpl_8ea4ql$(t)},Ie.prototype.parentCancelled_pv1t6x$=function(t){this.cancelImpl_8ea4ql$(t)},Ie.prototype.childCancelled_tcv7n7$=function(t){return!!e.isType(t,Gr)||this.cancelImpl_8ea4ql$(t)&&this.handlesException},Ie.prototype.cancelCoroutine_dbl4no$=function(t){return this.cancelImpl_8ea4ql$(t)},Ie.prototype.cancelImpl_8ea4ql$=function(t){var e,i=Ne;return!(!this.onCancelComplete||(i=this.cancelMakeCompleting_z3ww04$_0(t))!==Ee)||(i===Ne&&(i=this.makeCancelling_xjon1g$_0(t)),i===Ne||i===Ee?e=!0:i===Te?e=!1:(this.afterCompletion_s8jyv4$(i),e=!0),e)},Ie.prototype.cancelMakeCompleting_z3ww04$_0=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Ke)||e.isType(i,qe)&&i.isCompleting)return Ne;var n=new It(this.createCauseException_kfrsk8$_0(t)),r=this.tryMakeCompleting_w5s53t$_0(i,n);if(r!==Pe)return r}},Ie.prototype.defaultCancellationException_6umzry$=v("kotlinx-coroutines-core.kotlinx.coroutines.JobSupport.defaultCancellationException_6umzry$",g((function(){var e=t.kotlinx.coroutines.JobCancellationException;return function(t,i){return void 0===t&&(t=null),void 0===i&&(i=null),new e(null!=t?t:this.cancellationExceptionMessage(),i,this)}}))),Ie.prototype.getChildJobCancellationCause=function(){var t,i,n,r=this.state_8be2vx$;if(e.isType(r,qe))t=r.rootCause;else if(e.isType(r,It))t=r.cause;else{if(e.isType(r,Ke))throw b(("Cannot be cancelling child in this state: "+z(r)).toString());t=null}var o=t;return null!=(n=e.isType(i=o,Gr)?i:null)?n:new Wr("Parent job is "+this.stateString_u2sjqg$_0(r),o,this)},Ie.prototype.createCauseException_kfrsk8$_0=function(t){var i;return null==t||e.isType(t,w)?null!=t?t:new Wr(this.cancellationExceptionMessage(),null,this):(e.isType(i=t,ke)?i:o()).getChildJobCancellationCause()},Ie.prototype.makeCancelling_xjon1g$_0=function(t){for(var i={v:null};;){var n,r,o=this.state_8be2vx$;if(e.isType(o,qe)){var s;if(o.isSealed)return Te;var a=o.isCancelling;if(null!=t||!a){var l;if(null!=(s=i.v))l=s;else{var u=this.createCauseException_kfrsk8$_0(t);i.v=u,l=u}var p=l;o.addExceptionLocked_tcv7n7$(p)}var c=o.rootCause,h=a?null:c;return null!=h&&this.notifyCancelling_xkpzb8$_0(o.list,h),Ne}if(!e.isType(o,Ke))return Te;if(null!=(n=i.v))r=n;else{var d=this.createCauseException_kfrsk8$_0(t);i.v=d,r=d}var f=r;if(o.isActive){if(this.tryMakeCancelling_v0qvyy$_0(o,f))return Ne}else{var _=this.tryMakeCompleting_w5s53t$_0(o,new It(f));if(_===Ne)throw b(("Cannot happen in "+z(o)).toString());if(_!==Pe)return _}}},Ie.prototype.getOrPromoteCancellingList_dmij2j$_0=function(t){var i,n;if(null==(n=t.list)){if(e.isType(t,He))i=new Ye;else{if(!e.isType(t,Xe))throw b(("State should have list: "+t).toString());this.promoteSingleToNodeList_ft43ca$_0(t),i=null}n=i}return n},Ie.prototype.tryMakeCancelling_v0qvyy$_0=function(t,e){var i;if(null==(i=this.getOrPromoteCancellingList_dmij2j$_0(t)))return!1;var n,r=i,o=new qe(r,!1,e);return(n=this)._state_v70vig$_0===t&&(n._state_v70vig$_0=o,!0)&&(this.notifyCancelling_xkpzb8$_0(r,e),!0)},Ie.prototype.makeCompleting_8ea4ql$=function(t){for(;;){var e=this.tryMakeCompleting_w5s53t$_0(this.state_8be2vx$,t);if(e===Ne)return!1;if(e===Ee)return!0;if(e!==Pe)return this.afterCompletion_s8jyv4$(e),!0}},Ie.prototype.makeCompletingOnce_8ea4ql$=function(t){for(;;){var e=this.tryMakeCompleting_w5s53t$_0(this.state_8be2vx$,t);if(e===Ne)throw new U("Job "+this+" is already complete or completing, but is being completed with "+z(t),this.get_exceptionOrNull_ejijbb$_0(t));if(e!==Pe)return e}},Ie.prototype.tryMakeCompleting_w5s53t$_0=function(t,i){return e.isType(t,Ke)?!e.isType(t,He)&&!e.isType(t,Xe)||e.isType(t,oi)||e.isType(i,It)?this.tryMakeCompletingSlowPath_uh1ctj$_0(t,i):this.tryFinalizeSimpleState_5emg4m$_0(t,i)?i:Pe:Ne},Ie.prototype.tryMakeCompletingSlowPath_uh1ctj$_0=function(t,i){var n,r,o,s;if(null==(n=this.getOrPromoteCancellingList_dmij2j$_0(t)))return Pe;var a,l,u,p=n,c=null!=(o=e.isType(r=t,qe)?r:null)?o:new qe(p,!1,null),h={v:null};if(c.isCompleting)return Ne;if(c.isCompleting=!0,c!==t&&((u=this)._state_v70vig$_0!==t||(u._state_v70vig$_0=c,0)))return Pe;var d=c.isCancelling;null!=(l=e.isType(a=i,It)?a:null)&&c.addExceptionLocked_tcv7n7$(l.cause);var f=c.rootCause;h.v=d?null:f,null!=(s=h.v)&&this.notifyCancelling_xkpzb8$_0(p,s);var _=this.firstChild_15hr5g$_0(t);return null!=_&&this.tryWaitForChild_dzo3im$_0(c,_,i)?Ee:this.finalizeFinishingState_10mr1z$_0(c,i)},Ie.prototype.get_exceptionOrNull_ejijbb$_0=function(t){var i,n;return null!=(n=e.isType(i=t,It)?i:null)?n.cause:null},Ie.prototype.firstChild_15hr5g$_0=function(t){var i,n,r;return null!=(r=e.isType(i=t,oi)?i:null)?r:null!=(n=t.list)?this.nextChild_n2no7k$_0(n):null},Ie.prototype.tryWaitForChild_dzo3im$_0=function(t,e,i){var n;if(e.childJob.invokeOnCompletion_ct2b2z$(void 0,!1,new Be(this,t,e,i))!==Re())return!0;if(null==(n=this.nextChild_n2no7k$_0(e)))return!1;var r=n;return this.tryWaitForChild_dzo3im$_0(t,r,i)},Ie.prototype.continueCompleting_vth2d4$_0=function(t,e,i){var n=this.nextChild_n2no7k$_0(e);if(null==n||!this.tryWaitForChild_dzo3im$_0(t,n,i)){var r=this.finalizeFinishingState_10mr1z$_0(t,i);this.afterCompletion_s8jyv4$(r)}},Ie.prototype.nextChild_n2no7k$_0=function(t){for(var i=t;i._removed;)i=i._prev;for(;;)if(!(i=i._next)._removed){if(e.isType(i,oi))return i;if(e.isType(i,Ye))return null}},De.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},De.prototype=Object.create(u.prototype),De.prototype.constructor=De,De.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.local$this$JobSupport.state_8be2vx$;if(e.isType(t,oi)){if(this.state_0=8,this.result_0=this.local$$receiver.yield_11rb$(t.childJob,this),this.result_0===l)return l;continue}if(e.isType(t,Ke)){if(null!=(this.local$tmp$=t.list)){this.local$cur=this.local$tmp$._next,this.state_0=2;continue}this.local$tmp$_0=null,this.state_0=6;continue}this.state_0=7;continue;case 1:throw this.exception_0;case 2:if(y(this.local$cur,this.local$tmp$)){this.state_0=5;continue}if(e.isType(this.local$cur,oi)){if(this.state_0=3,this.result_0=this.local$$receiver.yield_11rb$(this.local$cur.childJob,this),this.result_0===l)return l;continue}this.state_0=4;continue;case 3:this.state_0=4;continue;case 4:this.local$cur=this.local$cur._next,this.state_0=2;continue;case 5:this.local$tmp$_0=p,this.state_0=6;continue;case 6:return this.local$tmp$_0;case 7:this.state_0=9;continue;case 8:return this.result_0;case 9:return p;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(Ie.prototype,"children",{configurable:!0,get:function(){return V((t=this,function(e,i,n){var r=new De(t,e,this,i);return n?r:r.doResume(null)}));var t}}),Ie.prototype.attachChild_kx8v25$=function(t){var i;return e.isType(i=this.invokeOnCompletion_ct2b2z$(!0,void 0,new oi(this,t)),Se)?i:o()},Ie.prototype.handleOnCompletionException_tcv7n7$=function(t){throw t},Ie.prototype.onCancelling_dbl4no$=function(t){},Object.defineProperty(Ie.prototype,"isScopedCoroutine",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Ie.prototype,"handlesException",{configurable:!0,get:function(){return!0}}),Ie.prototype.handleJobException_tcv7n7$=function(t){return!1},Ie.prototype.onCompletionInternal_s8jyv4$=function(t){},Ie.prototype.afterCompletion_s8jyv4$=function(t){},Ie.prototype.toString=function(){return this.toDebugString()+"@"+jr(this)},Ie.prototype.toDebugString=function(){return this.nameString()+"{"+this.stateString_u2sjqg$_0(this.state_8be2vx$)+"}"},Ie.prototype.nameString=function(){return Ar(this)},Ie.prototype.stateString_u2sjqg$_0=function(t){return e.isType(t,qe)?t.isCancelling?"Cancelling":t.isCompleting?"Completing":"Active":e.isType(t,Ke)?t.isActive?"Active":"New":e.isType(t,It)?"Cancelled":"Completed"},Object.defineProperty(qe.prototype,"list",{get:function(){return this.list_m9wkmb$_0}}),Object.defineProperty(qe.prototype,"isCompleting",{configurable:!0,get:function(){return this._isCompleting_0},set:function(t){this._isCompleting_0=t}}),Object.defineProperty(qe.prototype,"rootCause",{configurable:!0,get:function(){return this._rootCause_0},set:function(t){this._rootCause_0=t}}),Object.defineProperty(qe.prototype,"exceptionsHolder_0",{configurable:!0,get:function(){return this._exceptionsHolder_0},set:function(t){this._exceptionsHolder_0=t}}),Object.defineProperty(qe.prototype,"isSealed",{configurable:!0,get:function(){return this.exceptionsHolder_0===Oe}}),Object.defineProperty(qe.prototype,"isCancelling",{configurable:!0,get:function(){return null!=this.rootCause}}),Object.defineProperty(qe.prototype,"isActive",{configurable:!0,get:function(){return null==this.rootCause}}),qe.prototype.sealLocked_dbl4no$=function(t){var i,n,r=this.exceptionsHolder_0;if(null==r)n=this.allocateList_0();else if(e.isType(r,w)){var s=this.allocateList_0();s.add_11rb$(r),n=s}else{if(!e.isType(r,G))throw b(("State is "+z(r)).toString());n=e.isType(i=r,G)?i:o()}var a=n,l=this.rootCause;return null!=l&&a.add_wxm5ur$(0,l),null==t||y(t,l)||a.add_11rb$(t),this.exceptionsHolder_0=Oe,a},qe.prototype.addExceptionLocked_tcv7n7$=function(t){var i,n=this.rootCause;if(null!=n){if(t!==n){var r=this.exceptionsHolder_0;if(null==r)this.exceptionsHolder_0=t;else if(e.isType(r,w)){if(t===r)return;var s=this.allocateList_0();s.add_11rb$(r),s.add_11rb$(t),this.exceptionsHolder_0=s}else{if(!e.isType(r,G))throw b(("State is "+z(r)).toString());(e.isType(i=r,G)?i:o()).add_11rb$(t)}}}else this.rootCause=t},qe.prototype.allocateList_0=function(){return d(4)},qe.prototype.toString=function(){return"Finishing[cancelling="+this.isCancelling+", completing="+this.isCompleting+", rootCause="+z(this.rootCause)+", exceptions="+z(this.exceptionsHolder_0)+", list="+this.list+"]"},qe.$metadata$={kind:s,simpleName:"Finishing",interfaces:[Ke]},Ie.prototype.get_isCancelling_dpdoz8$_0=function(t){return e.isType(t,qe)&&t.isCancelling},Be.prototype.invoke=function(t){this.parent_0.continueCompleting_vth2d4$_0(this.state_0,this.child_0,this.proposedUpdate_0)},Be.prototype.toString=function(){return"ChildCompletion["+this.child_0+", "+z(this.proposedUpdate_0)+"]"},Be.$metadata$={kind:s,simpleName:"ChildCompletion",interfaces:[Xe]},Fe.prototype.getContinuationCancellationCause_dqr1mp$=function(t){var i,n=this.job_0.state_8be2vx$;return e.isType(n,qe)&&null!=(i=n.rootCause)?i:e.isType(n,It)?n.cause:t.getCancellationException()},Fe.prototype.nameString=function(){return"AwaitContinuation"},Fe.$metadata$={kind:s,simpleName:"AwaitContinuation",interfaces:[bt]},Object.defineProperty(Ie.prototype,"isCompletedExceptionally",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,It)}}),Ie.prototype.getCompletionExceptionOrNull=function(){var t=this.state_8be2vx$;if(e.isType(t,Ke))throw b("This job has not completed yet".toString());return this.get_exceptionOrNull_ejijbb$_0(t)},Ie.prototype.getCompletedInternal_8be2vx$=function(){var t=this.state_8be2vx$;if(e.isType(t,Ke))throw b("This job has not completed yet".toString());if(e.isType(t,It))throw t.cause;return Ge(t)},Ie.prototype.awaitInternal_8be2vx$=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Ke)){if(e.isType(i,It))throw i.cause;return Ge(i)}if(this.startInternal_tp1bqd$_0(i)>=0)break}return this.awaitSuspend_ixl9xw$_0(t)},Ie.prototype.awaitSuspend_ixl9xw$_0=function(t){return(e=this,function(t){var i=new Fe(h(t),e);return yt(i,e.invokeOnCompletion_f05bi3$(new ti(e,i))),i.getResult()})(t);var e},Ie.prototype.registerSelectClause1Internal_u6kgbh$=function(t,i){for(;;){var n,s=this.state_8be2vx$;if(t.isSelected)return;if(!e.isType(s,Ke))return void(t.trySelect()&&(e.isType(s,It)?t.resumeSelectWithException_tcv7n7$(s.cause):ar(i,null==(n=Ge(s))||e.isType(n,r)?n:o(),t.completion)));if(0===this.startInternal_tp1bqd$_0(s))return void t.disposeOnSelect_rvfg84$(this.invokeOnCompletion_f05bi3$(new ii(this,t,i)))}},Ie.prototype.selectAwaitCompletion_u6kgbh$=function(t,i){var n,s=this.state_8be2vx$;e.isType(s,It)?t.resumeSelectWithException_tcv7n7$(s.cause):rr(i,null==(n=Ge(s))||e.isType(n,r)?n:o(),t.completion)},Ie.$metadata$={kind:s,simpleName:"JobSupport",interfaces:[dr,ke,ze,ve]},Ue.$metadata$={kind:s,simpleName:"IncompleteStateBox",interfaces:[]},Object.defineProperty(He.prototype,"isActive",{get:function(){return this.isActive_hyoax9$_0}}),Object.defineProperty(He.prototype,"list",{configurable:!0,get:function(){return null}}),He.prototype.toString=function(){return"Empty{"+(this.isActive?"Active":"New")+"}"},He.$metadata$={kind:s,simpleName:"Empty",interfaces:[Ke]},Object.defineProperty(We.prototype,"onCancelComplete",{configurable:!0,get:function(){return!0}}),Object.defineProperty(We.prototype,"handlesException",{configurable:!0,get:function(){return this.handlesException_fejgjb$_0}}),We.prototype.complete=function(){return this.makeCompleting_8ea4ql$(p)},We.prototype.completeExceptionally_tcv7n7$=function(t){return this.makeCompleting_8ea4ql$(new It(t))},We.prototype.handlesExceptionF=function(){var t,i,n,r,o,s;if(null==(n=null!=(i=e.isType(t=this.parentHandle_8be2vx$,oi)?t:null)?i.job:null))return!1;for(var a=n;;){if(a.handlesException)return!0;if(null==(s=null!=(o=e.isType(r=a.parentHandle_8be2vx$,oi)?r:null)?o.job:null))return!1;a=s}},We.$metadata$={kind:s,simpleName:"JobImpl",interfaces:[Mt,Ie]},Ke.$metadata$={kind:x,simpleName:"Incomplete",interfaces:[]},Object.defineProperty(Xe.prototype,"isActive",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Xe.prototype,"list",{configurable:!0,get:function(){return null}}),Xe.prototype.dispose=function(){var t;(e.isType(t=this.job,Ie)?t:o()).removeNode_nxb11s$(this)},Xe.$metadata$={kind:s,simpleName:"JobNode",interfaces:[Ke,we,kr]},Object.defineProperty(Ye.prototype,"isActive",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ye.prototype,"list",{configurable:!0,get:function(){return this}}),Ye.prototype.getString_61zpoe$=function(t){var i=H();i.append_pdl1vj$("List{"),i.append_pdl1vj$(t),i.append_pdl1vj$("}[");for(var n={v:!0},r=this._next;!y(r,this);){if(e.isType(r,Xe)){var o=r;n.v?n.v=!1:i.append_pdl1vj$(", "),i.append_s8jyv4$(o)}r=r._next}return i.append_pdl1vj$("]"),i.toString()},Ye.prototype.toString=function(){return Mn?this.getString_61zpoe$("Active"):bo.prototype.toString.call(this)},Ye.$metadata$={kind:s,simpleName:"NodeList",interfaces:[Ke,bo]},Object.defineProperty(Ze.prototype,"list",{get:function(){return this.list_afai45$_0}}),Object.defineProperty(Ze.prototype,"isActive",{configurable:!0,get:function(){return!1}}),Ze.prototype.toString=function(){return Mn?this.list.getString_61zpoe$("New"):r.prototype.toString.call(this)},Ze.$metadata$={kind:s,simpleName:"InactiveNodeList",interfaces:[Ke]},Je.prototype.invoke=function(t){this.handler_0(t)},Je.prototype.toString=function(){return"InvokeOnCompletion["+Ar(this)+"@"+jr(this)+"]"},Je.$metadata$={kind:s,simpleName:"InvokeOnCompletion",interfaces:[Xe]},Qe.prototype.invoke=function(t){this.continuation_0.resumeWith_tl1gpc$(new f(p))},Qe.prototype.toString=function(){return"ResumeOnCompletion["+this.continuation_0+"]"},Qe.$metadata$={kind:s,simpleName:"ResumeOnCompletion",interfaces:[Xe]},ti.prototype.invoke=function(t){var i,n,s=this.job.state_8be2vx$;if(e.isType(s,It)){var a=this.continuation_0,l=s.cause;a.resumeWith_tl1gpc$(new f(S(l)))}else{n=this.continuation_0;var u=null==(i=Ge(s))||e.isType(i,r)?i:o();n.resumeWith_tl1gpc$(new f(u))}},ti.prototype.toString=function(){return"ResumeAwaitOnCompletion["+this.continuation_0+"]"},ti.$metadata$={kind:s,simpleName:"ResumeAwaitOnCompletion",interfaces:[Xe]},ei.prototype.invoke=function(t){this.select_0.trySelect()&&nr(this.block_0,this.select_0.completion)},ei.prototype.toString=function(){return"SelectJoinOnCompletion["+this.select_0+"]"},ei.$metadata$={kind:s,simpleName:"SelectJoinOnCompletion",interfaces:[Xe]},ii.prototype.invoke=function(t){this.select_0.trySelect()&&this.job.selectAwaitCompletion_u6kgbh$(this.select_0,this.block_0)},ii.prototype.toString=function(){return"SelectAwaitOnCompletion["+this.select_0+"]"},ii.$metadata$={kind:s,simpleName:"SelectAwaitOnCompletion",interfaces:[Xe]},ni.$metadata$={kind:s,simpleName:"JobCancellingNode",interfaces:[Xe]},ri.prototype.invoke=function(t){var e;0===(e=this)._invoked_0&&(e._invoked_0=1,1)&&this.handler_0(t)},ri.prototype.toString=function(){return"InvokeOnCancelling["+Ar(this)+"@"+jr(this)+"]"},ri.$metadata$={kind:s,simpleName:"InvokeOnCancelling",interfaces:[ni]},oi.prototype.invoke=function(t){this.childJob.parentCancelled_pv1t6x$(this.job)},oi.prototype.childCancelled_tcv7n7$=function(t){return this.job.childCancelled_tcv7n7$(t)},oi.prototype.toString=function(){return"ChildHandle["+this.childJob+"]"},oi.$metadata$={kind:s,simpleName:"ChildHandleNode",interfaces:[Se,ni]},si.prototype.invoke=function(t){this.child.parentCancelled_8o0b5c$(this.child.getContinuationCancellationCause_dqr1mp$(this.job))},si.prototype.toString=function(){return"ChildContinuation["+this.child+"]"},si.$metadata$={kind:s,simpleName:"ChildContinuation",interfaces:[ni]},ai.prototype.toString=function(){var t;return null!=(t=this.toStringInternalImpl())?t:Ar(this)+"@"+jr(this)},ai.prototype.toStringInternalImpl=function(){var t,i=Dr().Main;if(this===i)return"Dispatchers.Main";try{t=i.immediate}catch(i){if(!e.isType(i,W))throw i;t=null}return this===t?"Dispatchers.Main.immediate":null},ai.$metadata$={kind:s,simpleName:"MainCoroutineDispatcher",interfaces:[Dt]},ui.prototype.createCopy=function(){var t,e=new ui(null!=(t=this.message)?t:"",this.coroutine_8be2vx$);return e},ui.$metadata$={kind:s,simpleName:"TimeoutCancellationException",interfaces:[ae,Gr]},pi.prototype.isDispatchNeeded_1fupul$=function(t){return!1},pi.prototype.dispatch_5bn72i$=function(t,e){var i=t.get_j3r2sn$(bi());if(null==i)throw K("Dispatchers.Unconfined.dispatch function can only be used by the yield function. If you wrap Unconfined dispatcher in your code, make sure you properly delegate isDispatchNeeded and dispatch calls.");i.dispatcherWasUnconfined=!0},pi.prototype.toString=function(){return"Dispatchers.Unconfined"},pi.$metadata$={kind:k,simpleName:"Unconfined",interfaces:[Dt]};var ci=null;function hi(){return null===ci&&new pi,ci}function di(){bi(),N.call(this,bi()),this.dispatcherWasUnconfined=!1}function fi(){gi=this}fi.$metadata$={kind:k,simpleName:"Key",interfaces:[P]};var _i,mi,$i,yi,vi,gi=null;function bi(){return null===gi&&new fi,gi}function xi(t){return function(t){var i,n,r=t.context;if(wi(r),null==(n=e.isType(i=h(t),Vn)?i:null))return p;var o=n;if(o.dispatcher.isDispatchNeeded_1fupul$(r))o.dispatchYield_6v298r$(r,p);else{var s=new di;if(o.dispatchYield_6v298r$(r.plus_1fupul$(s),p),s.dispatcherWasUnconfined)return Hn(o)?l:p}return l}(t)}function wi(t){var e=t.get_j3r2sn$(xe());if(null!=e&&!e.isActive)throw e.getCancellationException()}function zi(t){return function(e){var i=mt(h(e));return t(i),i.getResult()}}function ki(){this.queue_0=new bo,this.onCloseHandler_0=null}function Si(t,e){$o.call(this,t,new Oi(e))}function Ci(t,e,i){u.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$element=e}function Ni(t){return function(){return t.isBufferFull}}function Ei(t,e){yo.call(this,e),this.element=t}function Pi(t){this.this$AbstractSendChannel=t}function Ti(t,e,i,n){Vi.call(this),this.pollResult_m5nr4l$_0=t,this.channel=e,this.select=i,this.block=n}function Oi(t){Vi.call(this),this.element=t}function Mi(){ki.call(this)}function ji(t){return function(){return t.isBufferEmpty}}function Ai(t){yo.call(this,t)}function Ri(t){this.this$AbstractChannel=t}function Ii(t){this.this$AbstractChannel=t}function Li(t){this.this$AbstractChannel=t}function Di(t,e){this.$outer=t,St.call(this),this.receive_0=e}function qi(t){this.channel=t,this.result=$i}function Bi(t,e){Ki.call(this),this.cont=t,this.receiveMode=e}function Fi(t,e){Ki.call(this),this.iterator=t,this.cont=e}function Ui(t,e,i,n){Ki.call(this),this.channel=t,this.select=e,this.block=i,this.receiveMode=n}function Vi(){mo.call(this)}function Gi(){}function Hi(t,e){Vi.call(this),this.pollResult_vo6xxe$_0=t,this.cont=e}function Wi(t){Vi.call(this),this.closeCause=t}function Ki(){mo.call(this)}function Xi(t){if(Mi.call(this),this.capacity=t,!(this.capacity>=1)){var i="ArrayChannel capacity must be at least 1, but "+this.capacity+" was specified";throw B(i.toString())}this.lock_0=new fo;var n=this.capacity;this.buffer_0=e.newArray(Y.min(n,8),null),this.head_0=0,this.size_0=0}function Yi(t,e,i){at.call(this,t,i),this._channel_0=e}function Zi(){}function Ji(){}function Qi(){}function tn(t){on(),this.holder_0=t}function en(t){this.cause=t}function nn(){rn=this}di.$metadata$={kind:s,simpleName:"YieldContext",interfaces:[N]},ki.prototype.offerInternal_11rb$=function(t){for(var e;;){if(null==(e=this.takeFirstReceiveOrPeekClosed()))return mi;var i=e;if(null!=i.tryResumeReceive_j43gjz$(t,null))return i.completeResumeReceive_11rb$(t),i.offerResult}},ki.prototype.offerSelectInternal_ys5ufj$=function(t,e){var i=this.describeTryOffer_0(t),n=e.performAtomicTrySelect_6q0pxr$(i);if(null!=n)return n;var r=i.result;return r.completeResumeReceive_11rb$(t),r.offerResult},Object.defineProperty(ki.prototype,"closedForSend_0",{configurable:!0,get:function(){var t,i,n;return null!=(i=e.isType(t=this.queue_0._prev,Wi)?t:null)?(this.helpClose_0(i),n=i):n=null,n}}),Object.defineProperty(ki.prototype,"closedForReceive_0",{configurable:!0,get:function(){var t,i,n;return null!=(i=e.isType(t=this.queue_0._next,Wi)?t:null)?(this.helpClose_0(i),n=i):n=null,n}}),ki.prototype.takeFirstSendOrPeekClosed_0=function(){var t,i=this.queue_0;t:do{var n=i._next;if(n===i){t=null;break t}if(!e.isType(n,Vi)){t=null;break t}if(e.isType(n,Wi)){t=n;break t}if(!n.remove())throw b("Should remove".toString());t=n}while(0);return t},ki.prototype.sendBuffered_0=function(t){var i=this.queue_0,n=new Oi(t),r=i._prev;return e.isType(r,Gi)?r:(i.addLast_l2j9rm$(n),null)},ki.prototype.describeSendBuffered_0=function(t){return new Si(this.queue_0,t)},Si.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Gi)?mi:null},Si.$metadata$={kind:s,simpleName:"SendBufferedDesc",interfaces:[$o]},Object.defineProperty(ki.prototype,"isClosedForSend",{configurable:!0,get:function(){return null!=this.closedForSend_0}}),Object.defineProperty(ki.prototype,"isFull",{configurable:!0,get:function(){return this.isFullImpl_0}}),Object.defineProperty(ki.prototype,"isFullImpl_0",{configurable:!0,get:function(){return!e.isType(this.queue_0._next,Gi)&&this.isBufferFull}}),ki.prototype.send_11rb$=function(t,e){if(this.offerInternal_11rb$(t)!==_i)return this.sendSuspend_0(t,e)},Ci.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},Ci.prototype=Object.create(u.prototype),Ci.prototype.constructor=Ci,Ci.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.$this.offerInternal_11rb$(this.local$element)===_i){if(this.state_0=2,this.result_0=xi(this),this.result_0===l)return l;continue}this.state_0=3;continue;case 1:throw this.exception_0;case 2:return;case 3:if(this.state_0=4,this.result_0=this.$this.sendSuspend_0(this.local$element,this),this.result_0===l)return l;continue;case 4:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ki.prototype.sendFair_1c3m6u$=function(t,e,i){var n=new Ci(this,t,e);return i?n:n.doResume(null)},ki.prototype.offer_11rb$=function(t){var i,n=this.offerInternal_11rb$(t);if(n!==_i){if(n===mi){if(null==(i=this.closedForSend_0))return!1;throw this.helpCloseAndGetSendException_0(i)}throw e.isType(n,Wi)?this.helpCloseAndGetSendException_0(n):b(("offerInternal returned "+n.toString()).toString())}return!0},ki.prototype.helpCloseAndGetSendException_0=function(t){return this.helpClose_0(t),t.sendException},ki.prototype.sendSuspend_0=function(t,i){return zi((n=this,r=t,function(t){for(;;){if(n.isFullImpl_0){var i=new Hi(r,t),o=n.enqueueSend_vs6846$(i);if(null==o)return void $t(t,i);if(e.isType(o,Wi))return void n.helpCloseAndResumeWithSendException_0(t,o);if(o!==yi&&!e.isType(o,Ki))throw b(("enqueueSend returned "+z(o)).toString())}var s=n.offerInternal_11rb$(r);if(s===_i)return void t.resumeWith_tl1gpc$(new f(p));if(s!==mi){if(e.isType(s,Wi))return void n.helpCloseAndResumeWithSendException_0(t,s);throw b(("offerInternal returned "+s.toString()).toString())}}}))(i);var n,r},ki.prototype.helpCloseAndResumeWithSendException_0=function(t,e){this.helpClose_0(e);var i=e.sendException;t.resumeWith_tl1gpc$(new f(S(i)))},ki.prototype.enqueueSend_vs6846$=function(t){if(this.isBufferAlwaysFull){var i=this.queue_0,n=i._prev;if(e.isType(n,Gi))return n;i.addLast_l2j9rm$(t)}else{var r,o=this.queue_0;t:do{var s=o._prev;if(e.isType(s,Gi))return s;if(!Ni(this)()){r=!1;break t}o.addLast_l2j9rm$(t),r=!0}while(0);if(!r)return yi}return null},ki.prototype.close_dbl4no$$default=function(t){var i,n,r=new Wi(t),s=this.queue_0;t:do{if(e.isType(s._prev,Wi)){n=!1;break t}s.addLast_l2j9rm$(r),n=!0}while(0);var a=n,l=a?r:e.isType(i=this.queue_0._prev,Wi)?i:o();return this.helpClose_0(l),a&&this.invokeOnCloseHandler_0(t),a},ki.prototype.invokeOnCloseHandler_0=function(t){var e,i,n=this.onCloseHandler_0;null!==n&&n!==vi&&(i=this).onCloseHandler_0===n&&(i.onCloseHandler_0=vi,1)&&("function"==typeof(e=n)?e:o())(t)},ki.prototype.invokeOnClose_f05bi3$=function(t){if(null!=(i=this).onCloseHandler_0||(i.onCloseHandler_0=t,0)){var e=this.onCloseHandler_0;if(e===vi)throw b("Another handler was already registered and successfully invoked");throw b("Another handler was already registered: "+z(e))}var i,n=this.closedForSend_0;null!=n&&function(e){return e.onCloseHandler_0===t&&(e.onCloseHandler_0=vi,!0)}(this)&&t(n.closeCause)},ki.prototype.helpClose_0=function(t){for(var i,n,s=new Jn;null!=(n=e.isType(i=t._prev,Ki)?i:null);){var a=n;a.remove()?s=s.plus_11rb$(a):a.helpRemove()}var l,u,p,c=s;if(null!=(l=c.holder_0))if(e.isType(l,G))for(var h=e.isType(p=c.holder_0,G)?p:o(),d=h.size-1|0;d>=0;d--)h.get_za3lpa$(d).resumeReceiveClosed_1zqbm$(t);else(null==(u=c.holder_0)||e.isType(u,r)?u:o()).resumeReceiveClosed_1zqbm$(t);this.onClosedIdempotent_l2j9rm$(t)},ki.prototype.onClosedIdempotent_l2j9rm$=function(t){},ki.prototype.takeFirstReceiveOrPeekClosed=function(){var t,i=this.queue_0;t:do{var n=i._next;if(n===i){t=null;break t}if(!e.isType(n,Gi)){t=null;break t}if(e.isType(n,Wi)){t=n;break t}if(!n.remove())throw b("Should remove".toString());t=n}while(0);return t},ki.prototype.describeTryOffer_0=function(t){return new Ei(t,this.queue_0)},Ei.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Gi)?null:mi},Ei.prototype.onPrepare_xe32vn$=function(t){var i,n;return null==(n=(e.isType(i=t.affected,Gi)?i:o()).tryResumeReceive_j43gjz$(this.element,t))?wn:n===gn?gn:null},Ei.$metadata$={kind:s,simpleName:"TryOfferDesc",interfaces:[yo]},Pi.prototype.registerSelectClause2_rol3se$=function(t,e,i){this.this$AbstractSendChannel.registerSelectSend_0(t,e,i)},Pi.$metadata$={kind:s,interfaces:[_r]},Object.defineProperty(ki.prototype,"onSend",{configurable:!0,get:function(){return new Pi(this)}}),ki.prototype.registerSelectSend_0=function(t,i,n){for(;;){if(t.isSelected)return;if(this.isFullImpl_0){var r=new Ti(i,this,t,n),o=this.enqueueSend_vs6846$(r);if(null==o)return void t.disposeOnSelect_rvfg84$(r);if(e.isType(o,Wi))throw this.helpCloseAndGetSendException_0(o);if(o!==yi&&!e.isType(o,Ki))throw b(("enqueueSend returned "+z(o)+" ").toString())}var s=this.offerSelectInternal_ys5ufj$(i,t);if(s===kn)return;if(s!==mi&&s!==gn){if(s===_i)return void ar(n,this,t.completion);throw e.isType(s,Wi)?this.helpCloseAndGetSendException_0(s):b(("offerSelectInternal returned "+s.toString()).toString())}}},ki.prototype.toString=function(){return Ar(this)+"@"+jr(this)+"{"+this.queueDebugStateString_0+"}"+this.bufferDebugString},Object.defineProperty(ki.prototype,"queueDebugStateString_0",{configurable:!0,get:function(){var t=this.queue_0._next;if(t===this.queue_0)return"EmptyQueue";var i=e.isType(t,Wi)?t.toString():e.isType(t,Ki)?"ReceiveQueued":e.isType(t,Vi)?"SendQueued":"UNEXPECTED:"+t,n=this.queue_0._prev;return n!==t&&(i+=",queueSize="+this.countQueueSize_0(),e.isType(n,Wi)&&(i+=",closedForSend="+n)),i}}),ki.prototype.countQueueSize_0=function(){for(var t={v:0},i=this.queue_0,n=i._next;!y(n,i);)e.isType(n,mo)&&(t.v=t.v+1|0),n=n._next;return t.v},Object.defineProperty(ki.prototype,"bufferDebugString",{configurable:!0,get:function(){return""}}),Object.defineProperty(Ti.prototype,"pollResult",{get:function(){return this.pollResult_m5nr4l$_0}}),Ti.prototype.tryResumeSend_uc1cc4$=function(t){var i;return null==(i=this.select.trySelectOther_uc1cc4$(t))||e.isType(i,tr)?i:o()},Ti.prototype.completeResumeSend=function(){M(this.block,this.channel,this.select.completion)},Ti.prototype.dispose=function(){this.remove()},Ti.prototype.resumeSendClosed_1zqbm$=function(t){this.select.trySelect()&&this.select.resumeSelectWithException_tcv7n7$(t.sendException)},Ti.prototype.toString=function(){return"SendSelect@"+jr(this)+"("+z(this.pollResult)+")["+this.channel+", "+this.select+"]"},Ti.$metadata$={kind:s,simpleName:"SendSelect",interfaces:[we,Vi]},Object.defineProperty(Oi.prototype,"pollResult",{configurable:!0,get:function(){return this.element}}),Oi.prototype.tryResumeSend_uc1cc4$=function(t){return null!=t&&t.finishPrepare(),i},Oi.prototype.completeResumeSend=function(){},Oi.prototype.resumeSendClosed_1zqbm$=function(t){},Oi.prototype.toString=function(){return"SendBuffered@"+jr(this)+"("+this.element+")"},Oi.$metadata$={kind:s,simpleName:"SendBuffered",interfaces:[Vi]},ki.$metadata$={kind:s,simpleName:"AbstractSendChannel",interfaces:[Ji]},Mi.prototype.pollInternal=function(){for(var t;;){if(null==(t=this.takeFirstSendOrPeekClosed_0()))return $i;var e=t;if(null!=e.tryResumeSend_uc1cc4$(null))return e.completeResumeSend(),e.pollResult}},Mi.prototype.pollSelectInternal_y5yyj0$=function(t){var e=this.describeTryPoll_0(),i=t.performAtomicTrySelect_6q0pxr$(e);return null!=i?i:(e.result.completeResumeSend(),e.result.pollResult)},Object.defineProperty(Mi.prototype,"hasReceiveOrClosed_0",{configurable:!0,get:function(){return e.isType(this.queue_0._next,Gi)}}),Object.defineProperty(Mi.prototype,"isClosedForReceive",{configurable:!0,get:function(){return null!=this.closedForReceive_0&&this.isBufferEmpty}}),Object.defineProperty(Mi.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),Object.defineProperty(Mi.prototype,"isEmptyImpl_0",{configurable:!0,get:function(){return!e.isType(this.queue_0._next,Vi)&&this.isBufferEmpty}}),Mi.prototype.receive=function(t){var i,n=this.pollInternal();return n===$i||e.isType(n,Wi)?this.receiveSuspend_0(0,t):null==(i=n)||e.isType(i,r)?i:o()},Mi.prototype.receiveSuspend_0=function(t,i){return zi((n=t,s=this,function(t){for(var i,a,l=new Bi(e.isType(i=t,_t)?i:o(),n);;){if(s.enqueueReceive_0(l))return void s.removeReceiveOnCancel_0(t,l);var u=s.pollInternal();if(e.isType(u,Wi))return void l.resumeReceiveClosed_1zqbm$(u);if(u!==$i){var c=l.resumeValue_11rb$(null==(a=u)||e.isType(a,r)?a:o());return void t.resumeWith_tl1gpc$(new f(c))}}return p}))(i);var n,s},Mi.prototype.enqueueReceiveInternal_i292ax$=function(t){var i;if(this.isBufferAlwaysEmpty){var n,r=this.queue_0;t:do{if(e.isType(r._prev,Vi)){n=!1;break t}r.addLast_l2j9rm$(t),n=!0}while(0);i=n}else{var o,s=this.queue_0;t:do{if(e.isType(s._prev,Vi)){o=!1;break t}if(!ji(this)()){o=!1;break t}s.addLast_l2j9rm$(t),o=!0}while(0);i=o}return i},Mi.prototype.enqueueReceive_0=function(t){var e=this.enqueueReceiveInternal_i292ax$(t);return e&&this.onReceiveEnqueued(),e},Mi.prototype.receiveOrNull=function(t){var i,n=this.pollInternal();return n===$i||e.isType(n,Wi)?this.receiveSuspend_0(1,t):null==(i=n)||e.isType(i,r)?i:o()},Mi.prototype.receiveOrNullResult_0=function(t){var i;if(e.isType(t,Wi)){if(null!=t.closeCause)throw t.closeCause;return null}return null==(i=t)||e.isType(i,r)?i:o()},Mi.prototype.receiveOrClosed=function(t){var i,n,s=this.pollInternal();return s!==$i?(e.isType(s,Wi)?i=new tn(new en(s.closeCause)):(on(),i=new tn(null==(n=s)||e.isType(n,r)?n:o())),i):this.receiveSuspend_0(2,t)},Mi.prototype.poll=function(){var t=this.pollInternal();return t===$i?null:this.receiveOrNullResult_0(t)},Mi.prototype.cancel_dbl4no$$default=function(t){return this.cancelInternal_fg6mcv$(t)},Mi.prototype.cancel_m4sck1$$default=function(t){this.cancelInternal_fg6mcv$(null!=t?t:Hr(Ar(this)+" was cancelled"))},Mi.prototype.cancelInternal_fg6mcv$=function(t){var e=this.close_dbl4no$(t);return this.onCancelIdempotent_6taknv$(e),e},Mi.prototype.onCancelIdempotent_6taknv$=function(t){var i;if(null==(i=this.closedForSend_0))throw b("Cannot happen".toString());for(var n=i,s=new Jn;;){var a,l=n._prev;if(e.isType(l,bo))break;l.remove()?s=s.plus_11rb$(e.isType(a=l,Vi)?a:o()):l.helpRemove()}var u,p,c,h=s;if(null!=(u=h.holder_0))if(e.isType(u,G))for(var d=e.isType(c=h.holder_0,G)?c:o(),f=d.size-1|0;f>=0;f--)d.get_za3lpa$(f).resumeSendClosed_1zqbm$(n);else(null==(p=h.holder_0)||e.isType(p,r)?p:o()).resumeSendClosed_1zqbm$(n)},Mi.prototype.iterator=function(){return new qi(this)},Mi.prototype.describeTryPoll_0=function(){return new Ai(this.queue_0)},Ai.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Vi)?null:$i},Ai.prototype.onPrepare_xe32vn$=function(t){var i,n;return null==(n=(e.isType(i=t.affected,Vi)?i:o()).tryResumeSend_uc1cc4$(t))?wn:n===gn?gn:null},Ai.$metadata$={kind:s,simpleName:"TryPollDesc",interfaces:[yo]},Ri.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,r;r=e.isType(n=i,X)?n:o(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,0,r)},Ri.$metadata$={kind:s,interfaces:[fr]},Object.defineProperty(Mi.prototype,"onReceive",{configurable:!0,get:function(){return new Ri(this)}}),Ii.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,r;r=e.isType(n=i,X)?n:o(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,1,r)},Ii.$metadata$={kind:s,interfaces:[fr]},Object.defineProperty(Mi.prototype,"onReceiveOrNull",{configurable:!0,get:function(){return new Ii(this)}}),Li.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,r;r=e.isType(n=i,X)?n:o(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,2,r)},Li.$metadata$={kind:s,interfaces:[fr]},Object.defineProperty(Mi.prototype,"onReceiveOrClosed",{configurable:!0,get:function(){return new Li(this)}}),Mi.prototype.registerSelectReceiveMode_0=function(t,e,i){for(;;){if(t.isSelected)return;if(this.isEmptyImpl_0){if(this.enqueueReceiveSelect_0(t,i,e))return}else{var n=this.pollSelectInternal_y5yyj0$(t);if(n===kn)return;n!==$i&&n!==gn&&this.tryStartBlockUnintercepted_0(i,t,e,n)}}},Mi.prototype.tryStartBlockUnintercepted_0=function(t,i,n,s){var a,l;if(e.isType(s,Wi))switch(n){case 0:throw s.receiveException;case 2:if(!i.trySelect())return;ar(t,new tn(new en(s.closeCause)),i.completion);break;case 1:if(null!=s.closeCause)throw s.receiveException;if(!i.trySelect())return;ar(t,null,i.completion)}else 2===n?(e.isType(s,Wi)?a=new tn(new en(s.closeCause)):(on(),a=new tn(null==(l=s)||e.isType(l,r)?l:o())),ar(t,a,i.completion)):ar(t,s,i.completion)},Mi.prototype.enqueueReceiveSelect_0=function(t,e,i){var n=new Ui(this,t,e,i),r=this.enqueueReceive_0(n);return r&&t.disposeOnSelect_rvfg84$(n),r},Mi.prototype.takeFirstReceiveOrPeekClosed=function(){var t=ki.prototype.takeFirstReceiveOrPeekClosed.call(this);return null==t||e.isType(t,Wi)||this.onReceiveDequeued(),t},Mi.prototype.onReceiveEnqueued=function(){},Mi.prototype.onReceiveDequeued=function(){},Mi.prototype.removeReceiveOnCancel_0=function(t,e){t.invokeOnCancellation_f05bi3$(new Di(this,e))},Di.prototype.invoke=function(t){this.receive_0.remove()&&this.$outer.onReceiveDequeued()},Di.prototype.toString=function(){return"RemoveReceiveOnCancel["+this.receive_0+"]"},Di.$metadata$={kind:s,simpleName:"RemoveReceiveOnCancel",interfaces:[St]},qi.prototype.hasNext=function(t){return this.result!==$i?this.hasNextResult_0(this.result):(this.result=this.channel.pollInternal(),this.result!==$i?this.hasNextResult_0(this.result):this.hasNextSuspend_0(t))},qi.prototype.hasNextResult_0=function(t){if(e.isType(t,Wi)){if(null!=t.closeCause)throw t.receiveException;return!1}return!0},qi.prototype.hasNextSuspend_0=function(t){return zi((i=this,function(t){for(var n=new Fi(i,t);;){if(i.channel.enqueueReceive_0(n))return void i.channel.removeReceiveOnCancel_0(t,n);var r=i.channel.pollInternal();if(i.result=r,e.isType(r,Wi)){if(null==r.closeCause)t.resumeWith_tl1gpc$(new f(!1));else{var o=r.receiveException;t.resumeWith_tl1gpc$(new f(S(o)))}return}if(r!==$i)return void t.resumeWith_tl1gpc$(new f(!0))}return p}))(t);var i},qi.prototype.next=function(){var t,i=this.result;if(e.isType(i,Wi))throw i.receiveException;if(i!==$i)return this.result=$i,null==(t=i)||e.isType(t,r)?t:o();throw b("'hasNext' should be called prior to 'next' invocation")},qi.$metadata$={kind:s,simpleName:"Itr",interfaces:[sn]},Bi.prototype.resumeValue_11rb$=function(t){return 2===this.receiveMode?new tn(t):t},Bi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null==this.cont.tryResume_19pj23$(this.resumeValue_11rb$(t),null!=e?e.desc:null)?null:(null!=e&&e.finishPrepare(),i)},Bi.prototype.completeResumeReceive_11rb$=function(t){this.cont.completeResume_za3rmp$(i)},Bi.prototype.resumeReceiveClosed_1zqbm$=function(t){if(1===this.receiveMode&&null==t.closeCause)this.cont.resumeWith_tl1gpc$(new f(null));else if(2===this.receiveMode){var e=this.cont,i=new tn(new en(t.closeCause));e.resumeWith_tl1gpc$(new f(i))}else{var n=this.cont,r=t.receiveException;n.resumeWith_tl1gpc$(new f(S(r)))}},Bi.prototype.toString=function(){return"ReceiveElement@"+jr(this)+"[receiveMode="+this.receiveMode+"]"},Bi.$metadata$={kind:s,simpleName:"ReceiveElement",interfaces:[Ki]},Fi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null==this.cont.tryResume_19pj23$(!0,null!=e?e.desc:null)?null:(null!=e&&e.finishPrepare(),i)},Fi.prototype.completeResumeReceive_11rb$=function(t){this.iterator.result=t,this.cont.completeResume_za3rmp$(i)},Fi.prototype.resumeReceiveClosed_1zqbm$=function(t){var e=null==t.closeCause?this.cont.tryResume_19pj23$(!1):this.cont.tryResumeWithException_tcv7n7$(xo(t.receiveException,this.cont));null!=e&&(this.iterator.result=t,this.cont.completeResume_za3rmp$(e))},Fi.prototype.toString=function(){return"ReceiveHasNext@"+jr(this)},Fi.$metadata$={kind:s,simpleName:"ReceiveHasNext",interfaces:[Ki]},Ui.prototype.tryResumeReceive_j43gjz$=function(t,i){var n;return null==(n=this.select.trySelectOther_uc1cc4$(i))||e.isType(n,tr)?n:o()},Ui.prototype.completeResumeReceive_11rb$=function(t){M(this.block,2===this.receiveMode?new tn(t):t,this.select.completion)},Ui.prototype.resumeReceiveClosed_1zqbm$=function(t){if(this.select.trySelect())switch(this.receiveMode){case 0:this.select.resumeSelectWithException_tcv7n7$(t.receiveException);break;case 2:M(this.block,new tn(new en(t.closeCause)),this.select.completion);break;case 1:null==t.closeCause?M(this.block,null,this.select.completion):this.select.resumeSelectWithException_tcv7n7$(t.receiveException)}},Ui.prototype.dispose=function(){this.remove()&&this.channel.onReceiveDequeued()},Ui.prototype.toString=function(){return"ReceiveSelect@"+jr(this)+"["+this.select+",receiveMode="+this.receiveMode+"]"},Ui.$metadata$={kind:s,simpleName:"ReceiveSelect",interfaces:[we,Ki]},Mi.$metadata$={kind:s,simpleName:"AbstractChannel",interfaces:[ln,ki]},Vi.$metadata$={kind:s,simpleName:"Send",interfaces:[mo]},Gi.$metadata$={kind:x,simpleName:"ReceiveOrClosed",interfaces:[]},Object.defineProperty(Hi.prototype,"pollResult",{get:function(){return this.pollResult_vo6xxe$_0}}),Hi.prototype.tryResumeSend_uc1cc4$=function(t){return null==this.cont.tryResume_19pj23$(p,null!=t?t.desc:null)?null:(null!=t&&t.finishPrepare(),i)},Hi.prototype.completeResumeSend=function(){this.cont.completeResume_za3rmp$(i)},Hi.prototype.resumeSendClosed_1zqbm$=function(t){var e=this.cont,i=t.sendException;e.resumeWith_tl1gpc$(new f(S(i)))},Hi.prototype.toString=function(){return"SendElement@"+jr(this)+"("+z(this.pollResult)+")"},Hi.$metadata$={kind:s,simpleName:"SendElement",interfaces:[Vi]},Object.defineProperty(Wi.prototype,"sendException",{configurable:!0,get:function(){var t;return null!=(t=this.closeCause)?t:new dn(pn)}}),Object.defineProperty(Wi.prototype,"receiveException",{configurable:!0,get:function(){var t;return null!=(t=this.closeCause)?t:new fn(pn)}}),Object.defineProperty(Wi.prototype,"offerResult",{configurable:!0,get:function(){return this}}),Object.defineProperty(Wi.prototype,"pollResult",{configurable:!0,get:function(){return this}}),Wi.prototype.tryResumeSend_uc1cc4$=function(t){return null!=t&&t.finishPrepare(),i},Wi.prototype.completeResumeSend=function(){},Wi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null!=e&&e.finishPrepare(),i},Wi.prototype.completeResumeReceive_11rb$=function(t){},Wi.prototype.resumeSendClosed_1zqbm$=function(t){},Wi.prototype.toString=function(){return"Closed@"+jr(this)+"["+z(this.closeCause)+"]"},Wi.$metadata$={kind:s,simpleName:"Closed",interfaces:[Gi,Vi]},Object.defineProperty(Ki.prototype,"offerResult",{configurable:!0,get:function(){return _i}}),Ki.$metadata$={kind:s,simpleName:"Receive",interfaces:[Gi,mo]},Object.defineProperty(Xi.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Xi.prototype,"isBufferEmpty",{configurable:!0,get:function(){return 0===this.size_0}}),Object.defineProperty(Xi.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Xi.prototype,"isBufferFull",{configurable:!0,get:function(){return this.size_0===this.capacity}}),Object.defineProperty(Xi.prototype,"isFull",{configurable:!0,get:function(){return this.isFullImpl_0}}),Object.defineProperty(Xi.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),Object.defineProperty(Xi.prototype,"isClosedForReceive",{configurable:!0,get:function(){return e.callGetter(this,Mi.prototype,"isClosedForReceive")}}),Xi.prototype.offerInternal_11rb$=function(t){var i={v:null};t:do{var n,r,o=this.size_0;if(null!=(n=this.closedForSend_0))return n;if(o<this.capacity){if(this.size_0=o+1|0,0===o)for(;null!=(r=this.takeFirstReceiveOrPeekClosed());){if(i.v=r,e.isType(i.v,Wi))return this.size_0=o,q(i.v);if(null!=q(i.v).tryResumeReceive_j43gjz$(t,null)){this.size_0=o;break t}}return this.ensureCapacity_0(o),this.buffer_0[(this.head_0+o|0)%this.buffer_0.length]=t,_i}return mi}while(0);return q(i.v).completeResumeReceive_11rb$(t),q(i.v).offerResult},Xi.prototype.offerSelectInternal_ys5ufj$=function(t,i){var n={v:null};t:do{var r,o=this.size_0;if(null!=(r=this.closedForSend_0))return r;if(o<this.capacity){if(this.size_0=o+1|0,0===o)e:for(;;){var s=this.describeTryOffer_0(t),a=i.performAtomicTrySelect_6q0pxr$(s);if(null==a){this.size_0=o,n.v=s.result;break t}if(a===mi)break e;if(a!==gn){if(a===kn||e.isType(a,Wi))return this.size_0=o,a;throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(a)).toString())}}return i.trySelect()?(this.ensureCapacity_0(o),this.buffer_0[(this.head_0+o|0)%this.buffer_0.length]=t,_i):(this.size_0=o,kn)}return mi}while(0);return q(n.v).completeResumeReceive_11rb$(t),q(n.v).offerResult},Xi.prototype.enqueueSend_vs6846$=function(t){return Mi.prototype.enqueueSend_vs6846$.call(this,t)},Xi.prototype.ensureCapacity_0=function(t){if(t>=this.buffer_0.length){for(var i=2*this.buffer_0.length|0,n=this.capacity,r=Y.min(i,n),o=e.newArray(r,null),s=0;s<t;s++)o[s]=this.buffer_0[(this.head_0+s|0)%this.buffer_0.length];this.buffer_0=o,this.head_0=0}},Xi.prototype.pollInternal=function(){var t,i,n={v:null},r={v:!1},o={v:null},s=this.size_0;if(0===s)return null!=(t=this.closedForSend_0)?t:$i;o.v=this.buffer_0[this.head_0],this.buffer_0[this.head_0]=null,this.size_0=s-1|0;var a=$i;if(s===this.capacity)t:for(;null!=(i=this.takeFirstSendOrPeekClosed_0());)if(n.v=i,null!=q(n.v).tryResumeSend_uc1cc4$(null)){r.v=!0,a=q(n.v).pollResult;break t}return a===$i||e.isType(a,Wi)||(this.size_0=s,this.buffer_0[(this.head_0+s|0)%this.buffer_0.length]=a),this.head_0=(this.head_0+1|0)%this.buffer_0.length,r.v&&q(n.v).completeResumeSend(),o.v},Xi.prototype.pollSelectInternal_y5yyj0$=function(t){var i,n={v:null},r={v:!1},o={v:null},s=this.size_0;if(0===s)return null!=(i=this.closedForSend_0)?i:$i;o.v=this.buffer_0[this.head_0],this.buffer_0[this.head_0]=null,this.size_0=s-1|0;var a=$i;if(s===this.capacity)t:for(;;){var l=this.describeTryPoll_0(),u=t.performAtomicTrySelect_6q0pxr$(l);if(null==u){n.v=l.result,r.v=!0,a=q(n.v).pollResult;break t}if(u===$i)break t;if(u!==gn){if(u===kn)return this.size_0=s,this.buffer_0[this.head_0]=o.v,u;if(e.isType(u,Wi)){n.v=u,r.v=!0,a=u;break t}throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(u)).toString())}}if(a===$i||e.isType(a,Wi)){if(!t.trySelect())return this.size_0=s,this.buffer_0[this.head_0]=o.v,kn}else this.size_0=s,this.buffer_0[(this.head_0+s|0)%this.buffer_0.length]=a;return this.head_0=(this.head_0+1|0)%this.buffer_0.length,r.v&&q(n.v).completeResumeSend(),o.v},Xi.prototype.enqueueReceiveInternal_i292ax$=function(t){return Mi.prototype.enqueueReceiveInternal_i292ax$.call(this,t)},Xi.prototype.onCancelIdempotent_6taknv$=function(t){if(t){for(var e=this.size_0,i=0;i<e;i++)this.buffer_0[this.head_0]=0,this.head_0=(this.head_0+1|0)%this.buffer_0.length;this.size_0=0}Mi.prototype.onCancelIdempotent_6taknv$.call(this,t)},Object.defineProperty(Xi.prototype,"bufferDebugString",{configurable:!0,get:function(){return"(buffer:capacity="+this.capacity+",size="+this.size_0+")"}}),Xi.$metadata$={kind:s,simpleName:"ArrayChannel",interfaces:[Mi]},Ji.prototype.close_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.close_dbl4no$$default(t)},Ji.$metadata$={kind:x,simpleName:"SendChannel",interfaces:[]},Qi.prototype.cancel_m4sck1$=function(t,e){void 0===t&&(t=null),e?e(t):this.cancel_m4sck1$$default(t)},Qi.prototype.cancel=function(){this.cancel_m4sck1$(null)},Qi.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},Qi.$metadata$={kind:x,simpleName:"ReceiveChannel",interfaces:[]},Object.defineProperty(tn.prototype,"isClosed",{configurable:!0,get:function(){return e.isType(this.holder_0,en)}}),Object.defineProperty(tn.prototype,"value",{configurable:!0,get:function(){var t;if(e.isType(this.holder_0,en))throw b(pn.toString());return null==(t=this.holder_0)||e.isType(t,r)?t:o()}}),Object.defineProperty(tn.prototype,"valueOrNull",{configurable:!0,get:function(){var t;return e.isType(this.holder_0,en)?null:null==(t=this.holder_0)||e.isType(t,r)?t:o()}}),Object.defineProperty(tn.prototype,"closeCause",{configurable:!0,get:function(){if(!e.isType(this.holder_0,en))throw b("Channel was not closed".toString());return this.holder_0.cause}}),tn.prototype.toString=function(){return e.isType(this.holder_0,en)?this.holder_0.toString():"Value("+z(this.holder_0)+")"},en.prototype.equals=function(t){return e.isType(t,en)&&y(this.cause,t.cause)},en.prototype.hashCode=function(){var t,e=this.cause;return null!=(t=null!=e?J(e):null)?t:0},en.prototype.toString=function(){return"Closed("+z(this.cause)+")"},en.$metadata$={kind:s,simpleName:"Closed",interfaces:[]},nn.prototype.value_41v7ql$=v("kotlinx-coroutines-core.kotlinx.coroutines.channels.ValueOrClosed.Companion.value_41v7ql$",g((function(){var e=t.kotlinx.coroutines.channels.ValueOrClosed;return function(t){return new e(t)}}))),nn.prototype.closed_8qz7vd$=v("kotlinx-coroutines-core.kotlinx.coroutines.channels.ValueOrClosed.Companion.closed_8qz7vd$",g((function(){var e=t.kotlinx.coroutines.channels.ValueOrClosed.Closed,i=t.kotlinx.coroutines.channels.ValueOrClosed;return function(t){return new i(new e(t))}}))),nn.$metadata$={kind:k,simpleName:"Companion",interfaces:[]};var rn=null;function on(){return null===rn&&new nn,rn}function sn(){}function an(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function ln(){hn()}function un(){cn=this,this.UNLIMITED=2147483647,this.RENDEZVOUS=0,this.CONFLATED=-1,this.BUFFERED=-2,this.OPTIONAL_CHANNEL_8be2vx$=-3,this.DEFAULT_BUFFER_PROPERTY_NAME="kotlinx.coroutines.channels.defaultBuffer",this.CHANNEL_DEFAULT_CAPACITY_8be2vx$=er(this.DEFAULT_BUFFER_PROPERTY_NAME,64,1,2147483646)}tn.$metadata$={kind:s,simpleName:"ValueOrClosed",interfaces:[]},tn.prototype.unbox=function(){return this.holder_0},tn.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.holder_0)|0},tn.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.holder_0,t.holder_0)},an.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},an.prototype=Object.create(u.prototype),an.prototype.constructor=an,an.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.hasNext(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:if(!this.result_0)throw new fn(pn);return this.$this.next();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},sn.prototype.next0=function(t,e){var i=new an(this,t);return e?i:i.doResume(null)},sn.$metadata$={kind:x,simpleName:"ChannelIterator",interfaces:[]},un.$metadata$={kind:k,simpleName:"Factory",interfaces:[]};var pn,cn=null;function hn(){return null===cn&&new un,cn}function dn(t){b(t,this),this.name="ClosedSendChannelException"}function fn(t){Z.call(this,t),this.name="ClosedReceiveChannelException"}function _n(t,e,i){at.call(this,t,i),this._channel_0=e}function mn(){ConflatedBroadcastChannel$Companion_getInstance(),this._state_0=ConflatedBroadcastChannel$Companion_getInstance().INITIAL_STATE_0,this._updating_0=0,this.onCloseHandler_0=null}function $n(){An(),Mi.call(this),this.lock_0=new fo,this.value_0=An().EMPTY_0}function yn(){jn=this,this.EMPTY_0=new tr("EMPTY")}ln.$metadata$={kind:x,simpleName:"Channel",interfaces:[Qi,Ji]},dn.$metadata$={kind:s,simpleName:"ClosedSendChannelException",interfaces:[U]},fn.$metadata$={kind:s,simpleName:"ClosedReceiveChannelException",interfaces:[Z]},v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEach_ur1qrk$",g((function(){var t=e.kotlin.Unit;return function(i,n,r){var o=i.openSubscription();try{var s;for(s=o.iterator();e.suspendCall(s.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)n(s.next())}finally{o.cancel_m4sck1$()}return t}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEach_fsi0yh$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)o(l.next())}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return i}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEachIndexed_pji9r4$",g((function(){var i=e.kotlin.collections.IndexedValue,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();s(new i((c=l.v,l.v=c+1|0,c),h))}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}e.setCoroutineResult(n,e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.elementAtOrElse_m7muas$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,o,s){var a=null;try{var l,u;if(r<0)return o(r);var p=0;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=l.next();if(r===(p=(u=p)+1|0,u))return c}return o(r)}catch(t){throw e.isType(t,i)?(a=t,t):t}finally{n(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.find_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){t:do{var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var u=l.next();if(o(u)){e.setCoroutineResult(u,e.coroutineReceiver());break t}}}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}e.setCoroutineResult(i,e.coroutineReceiver()),e.setCoroutineResult(null,e.coroutineReceiver())}while(0);return e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.findLast_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:null},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o(p)&&(a.v=p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),e.setCoroutineResult(a.v,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.first_4c38lx$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.NoSuchElementException,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();if(s(p))return p}}catch(t){throw e.isType(t,r)?(l=t,t):t}finally{o(t,l)}throw e.setCoroutineResult(i,e.coroutineReceiver()),new n("ReceiveChannel contains no element matching the predicate.")}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.firstOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var u=l.next();if(o(u))return u}}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),null}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.indexOfFirst_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){if(o(u.next()))return a.v;a.v=a.v+1|0}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),-1}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.indexOfLast_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:-1},l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)o(p.next())&&(a.v=l.v),l.v=l.v+1|0}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.last_4c38lx$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.NoSuchElementException,r=Object,o=e.throwCCE,s=Error,a=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,l,u){var p,c={v:null},h={v:!1},d=null;try{var f;for(f=t.iterator();e.suspendCall(f.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var _=f.next();l(_)&&(c.v=_,h.v=!0)}}catch(t){throw e.isType(t,s)?(d=t,t):t}finally{a(t,d)}if(e.setCoroutineResult(i,e.coroutineReceiver()),!h.v)throw new n("ReceiveChannel contains no element matching the predicate.");return null==(p=c.v)||e.isType(p,r)?p:o()}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.lastOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:null},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o(p)&&(a.v=p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.single_4c38lx$",g((function(){var i=e.kotlin.IllegalArgumentException_init_pdl1vj$,n=e.kotlin.Unit,r=e.kotlin.NoSuchElementException,o=Object,s=e.throwCCE,a=Error,l=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,u,p){var c,h={v:null},d={v:!1},f=null;try{var _;for(_=t.iterator();e.suspendCall(_.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var m=_.next();if(u(m)){if(d.v)throw i("ReceiveChannel contains more than one matching element.");h.v=m,d.v=!0}}}catch(t){throw e.isType(t,a)?(f=t,t):t}finally{l(t,f)}if(e.setCoroutineResult(n,e.coroutineReceiver()),!d.v)throw new r("ReceiveChannel contains no element matching the predicate.");return null==(c=h.v)||e.isType(c,o)?c:s()}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.singleOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:null},l={v:!1},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();if(o(c)){if(l.v)return null;a.v=c,l.v=!0}}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),l.v?a.v:null}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterIndexedTo_4jknp0$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=new n((h=u.v,u.v=h+1|0,h),d),_=f.component1(),m=f.component2();a(_,m)&&s.add_11rb$(m)}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterIndexedTo_170qh7$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=new n((h=u.v,u.v=h+1|0,h),d),_=f.component1(),m=f.component2();a(_,m)&&e.suspendCall(s.send_11rb$(m,e.coroutineReceiver()))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterNotTo_ekipu8$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)||o.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterNotTo_6rlmvt$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)||e.suspendCall(o.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterTo_ekipu8$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)&&o.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterTo_6rlmvt$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)&&e.suspendCall(o.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associate_9m65rd$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=i(),u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=s(p.next());l.put_xwzc9p$(c.first,c.second)}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(l,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateBy_ku6tnm$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=i(),u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();l.put_xwzc9p$(s(c),c)}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(l,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateBy_lt7yd0$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u=i(),p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h=c.next();u.put_xwzc9p$(s(h),a(h))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(u,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateByTo_kkd6mf$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o.put_xwzc9p$(s(p),p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateByTo_pjfcwb$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a,l){var u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();o.put_xwzc9p$(s(c),a(c))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateTo_lcmuai$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=s(u.next());o.put_xwzc9p$(p.first,p.second)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupBy_ku6tnm$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.collections.ArrayList_init_287e2$,r=e.kotlin.Unit,o=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l){var u=i(),p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=a(d),_=u.get_11rb$(f);if(null==_){var m=n();u.put_xwzc9p$(f,m),h=m}else h=_;h.add_11rb$(d)}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{s(t,p)}return e.setCoroutineResult(r,e.coroutineReceiver()),e.setCoroutineResult(u,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupBy_lt7yd0$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.collections.ArrayList_init_287e2$,r=e.kotlin.Unit,o=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l,u){var p=i(),c=null;try{var h;for(h=t.iterator();e.suspendCall(h.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var d,f=h.next(),_=a(f),m=p.get_11rb$(_);if(null==m){var $=n();p.put_xwzc9p$(_,$),d=$}else d=m;d.add_11rb$(l(f))}}catch(t){throw e.isType(t,o)?(c=t,t):t}finally{s(t,c)}return e.setCoroutineResult(r,e.coroutineReceiver()),e.setCoroutineResult(p,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupByTo_l6oevu$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next(),d=a(h),f=s.get_11rb$(d);if(null==f){var _=i();s.put_xwzc9p$(d,_),c=_}else c=f;c.add_11rb$(h)}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupByTo_z9qy88$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l,u){var p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=a(d),_=s.get_11rb$(f);if(null==_){var m=i();s.put_xwzc9p$(f,m),h=m}else h=_;h.add_11rb$(l(d))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(n,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedNotNullTo_dz8aer$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d,f=c.next(),_=new n((h=u.v,u.v=h+1|0,h),f);null!=(d=a(_.component1(),_.component2()))&&s.add_11rb$(d)}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedNotNullTo_4m0vhw$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d,f=c.next(),_=new n((h=u.v,u.v=h+1|0,h),f);null!=(d=a(_.component1(),_.component2()))&&e.suspendCall(s.send_11rb$(d,e.coroutineReceiver()))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedTo_a7sgbu$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();o.add_11rb$(s((c=l.v,l.v=c+1|0,c),h))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedTo_whewhd$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();e.suspendCall(o.send_11rb$(s((c=l.v,l.v=c+1|0,c),h),e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapNotNullTo_fo1is7$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p;null!=(p=s(u.next()))&&o.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapNotNullTo_wo1rcg$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p;null!=(p=s(u.next()))&&e.suspendCall(o.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapTo_pa4xkq$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o.add_11rb$(s(p))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapTo_q9ku9f$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();e.suspendCall(o.send_11rb$(s(p),e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.all_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(!o(l.next()))return!1}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!0}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.any_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(o(l.next()))return!0}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!1}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.count_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)o(u.next())&&(a.v=a.v+1|0)}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.fold_kq4l36$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:o},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();l.v=s(l.v,c)}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),l.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.foldIndexed_wviyg6$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:0},u={v:o},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next();u.v=s((h=l.v,l.v=h+1|0,h),u.v,d)}}catch(t){throw e.isType(t,n)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),u.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.maxBy_mqfd03$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,o){var s=null;try{var a=t.iterator();if(e.suspendCall(a.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))return null;for(var l=a.next(),u=r(l);e.suspendCall(a.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=a.next(),c=r(p);e.compareTo(u,c)<0&&(l=p,u=c)}return l}catch(t){throw e.isType(t,i)?(s=t,t):t}finally{n(t,s)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.minBy_mqfd03$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,o){var s=null;try{var a=t.iterator();if(e.suspendCall(a.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))return null;for(var l=a.next(),u=r(l);e.suspendCall(a.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=a.next(),c=r(p);e.compareTo(u,c)>0&&(l=p,u=c)}return l}catch(t){throw e.isType(t,i)?(s=t,t):t}finally{n(t,s)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.none_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(o(l.next()))return!1}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!0}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.reduce_vk3vfd$",g((function(){var i=e.kotlin.UnsupportedOperationException_init_pdl1vj$,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l=t.iterator();if(e.suspendCall(l.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))throw i("Empty channel can't be reduced.");for(var u=l.next();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)u=o(u,l.next());return u}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.reduceIndexed_a6mkxp$",g((function(){var i=e.kotlin.UnsupportedOperationException_init_pdl1vj$,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l,u=t.iterator();if(e.suspendCall(u.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))throw i("Empty channel can't be reduced.");for(var p=1,c=u.next();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)c=o((p=(l=p)+1|0,l),c,u.next());return c}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.sumBy_fl2dz0$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();a.v=a.v+o(p)|0}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.sumByDouble_jy8qhg$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();a.v+=o(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.partition_4c38lx$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,r=e.kotlin.Pair,o=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l){var u=i(),p=i(),c=null;try{var h;for(h=t.iterator();e.suspendCall(h.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var d=h.next();a(d)?u.add_11rb$(d):p.add_11rb$(d)}}catch(t){throw e.isType(t,o)?(c=t,t):t}finally{s(t,c)}return e.setCoroutineResult(n,e.coroutineReceiver()),new r(u,p)}}))),Object.defineProperty($n.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isBufferEmpty",{configurable:!0,get:function(){return this.value_0===An().EMPTY_0}}),Object.defineProperty($n.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isBufferFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),yn.$metadata$={kind:k,simpleName:"Companion",interfaces:[]};var vn,gn,bn,xn,wn,zn,kn,Sn,Cn,Nn,En,Pn,Tn,On,Mn,jn=null;function An(){return null===jn&&new yn,jn}function Rn(){Mi.call(this)}function In(){}function Ln(){Mi.call(this)}function Dn(){}function qn(){this.elements_0=e.newArray(16,null),this.head_0=0,this.tail_0=0}function Bn(){}function Fn(){Bn.call(this),this._consensus_c6dvpx$_0=vn}function Un(){this.atomicOp_ss7ttb$_0=this.atomicOp_ss7ttb$_0}function Vn(t,i){var n;Xn.call(this,0),this.dispatcher=t,this.continuation=i,this._state_8be2vx$=bn,this.callerFrame_w1cgfa$_0=e.isType(n=this.continuation,ko)?n:null,this.countOrElement_8be2vx$=(this.context,0),this._reusableCancellableContinuation_0=null}function Gn(t,i){if(e.isType(t,Vn)){var n=jt(i);if(t.dispatcher.isDispatchNeeded_1fupul$(t.context))t._state_8be2vx$=n,t.resumeMode=1,t.dispatcher.dispatch_5bn72i$(t.context,t);else{var r=_e().eventLoop_8be2vx$;if(r.isUnconfinedLoopActive)t._state_8be2vx$=n,t.resumeMode=1,r.dispatchUnconfined_4avnfa$(t);else{r.incrementUseCount_6taknv$(!0);try{var o;t:do{var s=t.context.get_j3r2sn$(ve.Key);if(null!=s&&!s.isActive){var a=s.getCancellationException();t.resumeWith_tl1gpc$(new f(S(a))),o=!0;break t}o=!1}while(0);for(o||(t.context,t.continuation.resumeWith_tl1gpc$(i));r.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{r.decrementUseCount_6taknv$(!0)}}}}else t.resumeWith_tl1gpc$(i)}function Hn(t){var i;t:do{var n,r=_e().eventLoop_8be2vx$;if(r.isUnconfinedQueueEmpty){i=!1;break t}if(r.isUnconfinedLoopActive)t._state_8be2vx$=p,t.resumeMode=1,r.dispatchUnconfined_4avnfa$(t),n=!0;else{r.incrementUseCount_6taknv$(!0);try{for(t.run();r.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{r.decrementUseCount_6taknv$(!0)}n=!1}i=n}while(0);return i}function Wn(t){return 1===t}function Kn(t){return 0===t||1===t}function Xn(t){uo.call(this),this.resumeMode=t}function Yn(t,i){var n=t.delegate;if(Kn(i)&&e.isType(n,Vn)&&Wn(i)===Wn(t.resumeMode)){var r=n.dispatcher,o=n.context;r.isDispatchNeeded_1fupul$(o)?r.dispatch_5bn72i$(o,t):function(t){var i=_e().eventLoop_8be2vx$;if(i.isUnconfinedLoopActive)i.dispatchUnconfined_4avnfa$(t);else{i.incrementUseCount_6taknv$(!0);try{for(Zn(t,t.delegate,2);i.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{i.decrementUseCount_6taknv$(!0)}}}(t)}else Zn(t,n,i)}function Zn(t,i,n){var r,s,a=t.takeState(),l=null!=(r=t.getExceptionalResult_8ea4ql$(a))?xo(r):null,u=new f(null!=l?S(l):t.getSuccessfulResult_tpy1pm$(a));switch(n){case 0:i.resumeWith_tl1gpc$(u);break;case 1:Gn(i,u);break;case 2:var p=e.isType(s=i,Vn)?s:o();p.context,p.continuation.resumeWith_tl1gpc$(u);break;default:throw b(("Invalid mode "+n).toString())}}function Jn(t){void 0===t&&(t=null),this.holder_0=t}function Qn(t,e){at.call(this,t,!0),this.uCont=e}function tr(t){this.symbol=t}function er(t,i,n,r){return void 0===n&&(n=1),void 0===r&&(r=2147483647),ir(0,e.Long.fromInt(i),e.Long.fromInt(n),e.Long.fromInt(r)).toInt()}function ir(t,e,i,n){return void 0===i&&(i=R),void 0===n&&(n=L),e}function nr(t,i){try{Gn(h(et(t,i)),new f(p))}catch(t){if(!e.isType(t,w))throw t;i.resumeWith_tl1gpc$(new f(S(t)))}}function rr(t,i,n){try{Gn(h(m(t,i,n)),new f(p))}catch(t){if(!e.isType(t,w))throw t;n.resumeWith_tl1gpc$(new f(S(t)))}}function or(t,i){try{Gn(h(t),new f(p))}catch(t){if(!e.isType(t,w))throw t;i.resumeWith_tl1gpc$(new f(S(t)))}}function sr(t,i){t:do{var n,s,a=i;try{n=t(a,!1)}catch(t){if(e.isType(t,w)){var u=t;a.resumeWith_tl1gpc$(new f(S(u)));break t}throw t}if(n!==l){var p=null==(s=n)||e.isType(s,r)?s:o();a.resumeWith_tl1gpc$(new f(p))}}while(0)}function ar(t,i,n){t:do{var s,a,u=n;try{s=t(i,u,!1)}catch(t){if(e.isType(t,w)){var p=t;u.resumeWith_tl1gpc$(new f(S(p)));break t}throw t}if(s!==l){var c=null==(a=s)||e.isType(a,r)?a:o();u.resumeWith_tl1gpc$(new f(c))}}while(0)}function lr(t,i){t:do{var n,s,a=i;try{i.context,n=t(a,!1)}catch(t){if(e.isType(t,w)){var u=t;a.resumeWith_tl1gpc$(new f(S(u)));break t}throw t}if(n!==l){var p=null==(s=n)||e.isType(s,r)?s:o();a.resumeWith_tl1gpc$(new f(p))}}while(0)}function ur(t,i,n){t:do{var s,a,u=n;try{n.context,s=t(i,u,!1)}catch(t){if(e.isType(t,w)){var p=t;u.resumeWith_tl1gpc$(new f(S(p)));break t}throw t}if(s!==l){var c=null==(a=s)||e.isType(a,r)?a:o();u.resumeWith_tl1gpc$(new f(c))}}while(0)}function pr(t,i,n){var r;t.initParentJob_8be2vx$();t:do{var o;try{o=n(i,t,!1)}catch(t){if(!e.isType(t,w))throw t;o=new It(t)}var s=o;if(s===l){r=l;break t}var a=t.makeCompletingOnce_8ea4ql$(s);if(a===Ee){r=l;break t}if(e.isType(a,It))throw xo(a.cause,t.uCont);r=Ge(a)}while(0);return r}function cr(t){this.closure$block=t}function hr(){}function dr(){}function fr(){}function _r(){}function mr(){}function $r(){this.number_0=R}function yr(t){bo.call(this),this.uCont_0=t,this._state_0=zn,this._result_0=Sn,this._parentHandle_0=null}function vr(t,e){this.$outer=t,ni.call(this,e)}function gr(t){Bn.call(this),this.otherOp=t}function br(t,e){Fn.call(this),this.impl=t,this.desc=e,this.opSequence_oe6pw4$_0=Nn.next(),this.desc.atomicOp=this}function xr(t){mo.call(this),this.handle=t}function wr(t){this.instance=new yr(t),this.clauses=Q()}function zr(t){this.locked=t}function kr(){mo.call(this)}function Sr(){}function Cr(t,e){y(typeof t,"function")?t(e):t.invoke(e)}function Nr(){if(y(typeof navigator,Tn)||null==navigator||"ReactNative"!=navigator.product){if(function(){var t=!y(typeof navigator,Tn)&&null!=navigator&&null!=navigator.userAgent;t&&(t=!y(typeof navigator.userAgent,Tn));var e=t;return e&&(e=!y(typeof navigator.userAgent.match,Tn)),e&&navigator.userAgent.match("\\bjsdom\\b")}())return Qr();var t=!y(typeof window,Tn)&&null!=window;return t&&(t=!y(typeof window.addEventListener,Tn)),t?co(window):y(typeof n,Tn)?io():Qr()}return Qr()}function Er(){var t;return e.isType(t=Dr().Default,pe)?t:o()}function Pr(t,e){var i=t.coroutineContext.plus_1fupul$(e);return i!==Dr().Default&&null==i.get_j3r2sn$($.Key)?i.plus_1fupul$(Dr().Default):i}function Tr(t){return t.toString()}function Or(t){return null}function Mr(t,e){console.error(e)}function jr(t){var e,i=t.__debug_counter;return"number"!=typeof i&&(i=On=On+1|0,t.__debug_counter=i),("number"==typeof(e=i)?e:o()).toString()}function Ar(t){var i;return null!=(i=e.getKClassFromExpression(t).simpleName)?i:"Unknown"}function Rr(){Lr=this,this.Default=Nr(),this.Main=new qr(this.Default),this.Unconfined=hi()}$n.prototype.offerInternal_11rb$=function(t){var i={v:null};t:do{var n,r;if(null!=(n=this.closedForSend_0))return n;if(this.value_0===An().EMPTY_0)for(;null!=(r=this.takeFirstReceiveOrPeekClosed());){if(i.v=r,e.isType(i.v,Wi))return q(i.v);if(null!=q(i.v).tryResumeReceive_j43gjz$(t,null))break t}return this.value_0=t,_i}while(0);return q(i.v).completeResumeReceive_11rb$(t),q(i.v).offerResult},$n.prototype.offerSelectInternal_ys5ufj$=function(t,i){var n={v:null};t:do{var r;if(null!=(r=this.closedForSend_0))return r;if(this.value_0===An().EMPTY_0)e:for(;;){var o=this.describeTryOffer_0(t),s=i.performAtomicTrySelect_6q0pxr$(o);if(null==s){n.v=o.result;break t}if(s===mi)break e;if(s!==gn){if(s===kn||e.isType(s,Wi))return s;throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(s)).toString())}}return i.trySelect()?(this.value_0=t,_i):kn}while(0);return q(n.v).completeResumeReceive_11rb$(t),q(n.v).offerResult},$n.prototype.pollInternal=function(){var t,e={v:null};return this.value_0===An().EMPTY_0?null!=(t=this.closedForSend_0)?t:$i:(e.v=this.value_0,this.value_0=An().EMPTY_0,e.v)},$n.prototype.pollSelectInternal_y5yyj0$=function(t){var e,i={v:null};return this.value_0===An().EMPTY_0?null!=(e=this.closedForSend_0)?e:$i:t.trySelect()?(i.v=this.value_0,this.value_0=An().EMPTY_0,i.v):kn},$n.prototype.onCancelIdempotent_6taknv$=function(t){t&&(this.value_0=An().EMPTY_0),Mi.prototype.onCancelIdempotent_6taknv$.call(this,t)},$n.prototype.enqueueReceiveInternal_i292ax$=function(t){return Mi.prototype.enqueueReceiveInternal_i292ax$.call(this,t)},Object.defineProperty($n.prototype,"bufferDebugString",{configurable:!0,get:function(){return"(value="+z(this.value_0)+")"}}),$n.$metadata$={kind:s,simpleName:"ConflatedChannel",interfaces:[Mi]},Object.defineProperty(Rn.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Rn.prototype,"isBufferEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Rn.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Rn.prototype,"isBufferFull",{configurable:!0,get:function(){return!1}}),Rn.prototype.offerInternal_11rb$=function(t){for(;;){var i=Mi.prototype.offerInternal_11rb$.call(this,t);if(i===_i)return _i;if(i!==mi){if(e.isType(i,Wi))return i;throw b(("Invalid offerInternal result "+i.toString()).toString())}var n=this.sendBuffered_0(t);if(null==n)return _i;if(e.isType(n,Wi))return n}},Rn.prototype.offerSelectInternal_ys5ufj$=function(t,i){for(var n;;){var r=this.hasReceiveOrClosed_0?Mi.prototype.offerSelectInternal_ys5ufj$.call(this,t,i):null!=(n=i.performAtomicTrySelect_6q0pxr$(this.describeSendBuffered_0(t)))?n:_i;if(r===kn)return kn;if(r===_i)return _i;if(r!==mi&&r!==gn){if(e.isType(r,Wi))return r;throw b(("Invalid result "+r.toString()).toString())}}},Rn.$metadata$={kind:s,simpleName:"LinkedListChannel",interfaces:[Mi]},Object.defineProperty(Ln.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferFull",{configurable:!0,get:function(){return!0}}),Ln.$metadata$={kind:s,simpleName:"RendezvousChannel",interfaces:[Mi]},Dn.$metadata$={kind:x,simpleName:"FlowCollector",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collectWhile_rysrwq$",g((function(){var i=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,n=e.kotlin.coroutines.CoroutineImpl,r=t.kotlinx.coroutines.flow.internal.AbortFlowException,o=e.Kind.CLASS,s=t.kotlinx.coroutines.flow.FlowCollector,a=t.kotlinx.coroutines.flow.internal.checkOwnership_ygf9h9$;function l(t){this.closure$predicate=t}function u(t,e,i){n.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$value=e}return u.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[n]},u.prototype=Object.create(n.prototype),u.prototype.constructor=u,u.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.closure$predicate(this.local$value,this),this.result_0===i)return i;continue;case 1:throw this.exception_0;case 2:if(!this.result_0)throw new r(this.$this);return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},l.prototype.emit_11rb$=function(t,e,i){var n=new u(this,t,e);return i?n:n.doResume(null)},l.$metadata$={kind:o,interfaces:[s]},function(t,i,n){var o=new l(i);try{e.suspendCall(t.collect_42ocv1$(o,e.coroutineReceiver()))}catch(t){if(!e.isType(t,r))throw t;a(t,o)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collect_706ovd$",g((function(){var i=e.Kind.CLASS,n=t.kotlinx.coroutines.flow.FlowCollector;function r(t){this.closure$action=t}return r.prototype.emit_11rb$=function(t,e){return this.closure$action(t,e)},r.$metadata$={kind:i,interfaces:[n]},function(t,i,n){return e.suspendCall(t.collect_42ocv1$(new r(i),e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collectIndexed_57beod$",g((function(){var i=e.Kind.CLASS,n=t.kotlinx.coroutines.flow.FlowCollector,r=e.kotlin.ArithmeticException;function o(t){this.closure$action=t,this.index_0=0}return o.prototype.emit_11rb$=function(t,e){var i,n;n=this.closure$action;var o=(i=this.index_0,this.index_0=i+1|0,i);if(o<0)throw new r("Index overflow has happened");return n(o,t,e)},o.$metadata$={kind:i,interfaces:[n]},function(t,i,n){return e.suspendCall(t.collect_42ocv1$(new o(i),e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.emitAll_c14n1u$",(function(t,i,n){return e.suspendCall(i.collect_42ocv1$(t,e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())})),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.fold_usjyvu$",g((function(){var i=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,n=e.kotlin.coroutines.CoroutineImpl,r=e.kotlin.Unit,o=e.Kind.CLASS,s=t.kotlinx.coroutines.flow.FlowCollector;function a(t){this.closure$action=t}function l(t,e,i,r){n.call(this,r),this.exceptionState_0=1,this.local$closure$operation=t,this.local$closure$accumulator=e,this.local$value=i}return a.prototype.emit_11rb$=function(t,e){return this.closure$action(t,e)},a.$metadata$={kind:o,interfaces:[s]},l.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[n]},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$operation(this.local$closure$accumulator.v,this.local$value,this),this.result_0===i)return i;continue;case 1:throw this.exception_0;case 2:return this.local$closure$accumulator.v=this.result_0,r;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},function(t,i,n,r){var o,s,u={v:i};return e.suspendCall(t.collect_42ocv1$(new a((o=n,s=u,function(t,e,i){var n=new l(o,s,t,e);return i?n:n.doResume(null)})),e.coroutineReceiver())),u.v}}))),Object.defineProperty(qn.prototype,"isEmpty",{configurable:!0,get:function(){return this.head_0===this.tail_0}}),qn.prototype.addLast_trkh7z$=function(t){this.elements_0[this.tail_0]=t,this.tail_0=this.tail_0+1&this.elements_0.length-1,this.tail_0===this.head_0&&this.ensureCapacity_0()},qn.prototype.removeFirstOrNull=function(){var t;if(this.head_0===this.tail_0)return null;var i=this.elements_0[this.head_0];return this.elements_0[this.head_0]=null,this.head_0=this.head_0+1&this.elements_0.length-1,e.isType(t=i,r)?t:o()},qn.prototype.clear=function(){this.head_0=0,this.tail_0=0,this.elements_0=e.newArray(this.elements_0.length,null)},qn.prototype.ensureCapacity_0=function(){var t=this.elements_0.length,i=t<<1,n=e.newArray(i,null),r=this.elements_0;tt(r,n,0,this.head_0,r.length),tt(this.elements_0,n,this.elements_0.length-this.head_0|0,0,this.head_0),this.elements_0=n,this.head_0=0,this.tail_0=t},qn.$metadata$={kind:s,simpleName:"ArrayQueue",interfaces:[]},Bn.prototype.toString=function(){return Ar(this)+"@"+jr(this)},Bn.prototype.isEarlierThan_bfmzsr$=function(t){var e,i;if(null==(e=this.atomicOp))return!1;var n=e;if(null==(i=t.atomicOp))return!1;var r=i;return n.opSequence.compareTo_11rb$(r.opSequence)<0},Bn.$metadata$={kind:s,simpleName:"OpDescriptor",interfaces:[]},Object.defineProperty(Fn.prototype,"isDecided",{configurable:!0,get:function(){return this._consensus_c6dvpx$_0!==vn}}),Object.defineProperty(Fn.prototype,"opSequence",{configurable:!0,get:function(){return I}}),Object.defineProperty(Fn.prototype,"atomicOp",{configurable:!0,get:function(){return this}}),Fn.prototype.decide_s8jyv4$=function(t){var e,i=this._consensus_c6dvpx$_0;return i!==vn?i:(e=this)._consensus_c6dvpx$_0===vn&&(e._consensus_c6dvpx$_0=t,1)?t:this._consensus_c6dvpx$_0},Fn.prototype.perform_s8jyv4$=function(t){var i,n,s=this._consensus_c6dvpx$_0;return s===vn&&(s=this.decide_s8jyv4$(this.prepare_11rb$(null==(i=t)||e.isType(i,r)?i:o()))),this.complete_19pj23$(null==(n=t)||e.isType(n,r)?n:o(),s),s},Fn.$metadata$={kind:s,simpleName:"AtomicOp",interfaces:[Bn]},Object.defineProperty(Un.prototype,"atomicOp",{configurable:!0,get:function(){return null==this.atomicOp_ss7ttb$_0?c("atomicOp"):this.atomicOp_ss7ttb$_0},set:function(t){this.atomicOp_ss7ttb$_0=t}}),Un.$metadata$={kind:s,simpleName:"AtomicDesc",interfaces:[]},Object.defineProperty(Vn.prototype,"callerFrame",{configurable:!0,get:function(){return this.callerFrame_w1cgfa$_0}}),Vn.prototype.getStackTraceElement=function(){return null},Object.defineProperty(Vn.prototype,"reusableCancellableContinuation",{configurable:!0,get:function(){var t;return e.isType(t=this._reusableCancellableContinuation_0,bt)?t:null}}),Vn.prototype.isReusable_pmw987$=function(t){var i;if(null==(i=this._reusableCancellableContinuation_0))return!1;var n=i;return!e.isType(n,bt)||n===t},Vn.prototype.claimReusableCancellableContinuation=function(){var t;for(this._reusableCancellableContinuation_0;;){var i,n=this._reusableCancellableContinuation_0;if(null===n)return this._reusableCancellableContinuation_0=xn,null;if(!e.isType(n,bt))throw b(("Inconsistent state "+z(n)).toString());if((t=this)._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=xn,1))return e.isType(i=n,bt)?i:o()}},Vn.prototype.checkPostponedCancellation_jp3215$=function(t){var i;for(this._reusableCancellableContinuation_0;;){var n=this._reusableCancellableContinuation_0;if(n!==xn){if(null===n)return null;if(e.isType(n,w)){if(!function(t){return t._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=null,!0)}(this))throw B("Failed requirement.".toString());return n}throw b(("Inconsistent state "+z(n)).toString())}if((i=this)._reusableCancellableContinuation_0===xn&&(i._reusableCancellableContinuation_0=t,1))return null}},Vn.prototype.postponeCancellation_tcv7n7$=function(t){var i;for(this._reusableCancellableContinuation_0;;){var n=this._reusableCancellableContinuation_0;if(y(n,xn)){if((i=this)._reusableCancellableContinuation_0===xn&&(i._reusableCancellableContinuation_0=t,1))return!0}else{if(e.isType(n,w))return!0;if(function(t){return t._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=null,!0)}(this))return!1}}},Vn.prototype.takeState=function(){var t=this._state_8be2vx$;return this._state_8be2vx$=bn,t},Object.defineProperty(Vn.prototype,"delegate",{configurable:!0,get:function(){return this}}),Vn.prototype.resumeWith_tl1gpc$=function(t){var i=this.continuation.context,n=jt(t);if(this.dispatcher.isDispatchNeeded_1fupul$(i))this._state_8be2vx$=n,this.resumeMode=0,this.dispatcher.dispatch_5bn72i$(i,this);else{var r=_e().eventLoop_8be2vx$;if(r.isUnconfinedLoopActive)this._state_8be2vx$=n,this.resumeMode=0,r.dispatchUnconfined_4avnfa$(this);else{r.incrementUseCount_6taknv$(!0);try{for(this.context,this.continuation.resumeWith_tl1gpc$(t);r.processUnconfinedEvent(););}catch(t){if(!e.isType(t,w))throw t;this.handleFatalException_mseuzz$(t,null)}finally{r.decrementUseCount_6taknv$(!0)}}}},Vn.prototype.resumeCancellableWith_tl1gpc$=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeCancellableWith_tl1gpc$",g((function(){var i=t.kotlinx.coroutines.toState_dwruuz$,n=e.kotlin.Unit,r=e.wrapFunction,o=Error,s=t.kotlinx.coroutines.Job,a=e.kotlin.Result,l=e.kotlin.createFailure_tcv7n7$;return r((function(){var i=t.kotlinx.coroutines.Job,r=e.kotlin.Result,o=e.kotlin.createFailure_tcv7n7$;return function(t,e){return function(){var s,a=t;t:do{var l=a.context.get_j3r2sn$(i.Key);if(null!=l&&!l.isActive){var u=l.getCancellationException();a.resumeWith_tl1gpc$(new r(o(u))),s=!0;break t}s=!1}while(0);if(!s){var p=t,c=e;p.context,p.continuation.resumeWith_tl1gpc$(c)}return n}}})),function(t){var n=i(t);if(this.dispatcher.isDispatchNeeded_1fupul$(this.context))this._state_8be2vx$=n,this.resumeMode=1,this.dispatcher.dispatch_5bn72i$(this.context,this);else{var r=_e().eventLoop_8be2vx$;if(r.isUnconfinedLoopActive)this._state_8be2vx$=n,this.resumeMode=1,r.dispatchUnconfined_4avnfa$(this);else{r.incrementUseCount_6taknv$(!0);try{var u;t:do{var p=this.context.get_j3r2sn$(s.Key);if(null!=p&&!p.isActive){var c=p.getCancellationException();this.resumeWith_tl1gpc$(new a(l(c))),u=!0;break t}u=!1}while(0);for(u||(this.context,this.continuation.resumeWith_tl1gpc$(t));r.processUnconfinedEvent(););}catch(t){if(!e.isType(t,o))throw t;this.handleFatalException_mseuzz$(t,null)}finally{r.decrementUseCount_6taknv$(!0)}}}}}))),Vn.prototype.resumeCancelled=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeCancelled",g((function(){var i=t.kotlinx.coroutines.Job,n=e.kotlin.Result,r=e.kotlin.createFailure_tcv7n7$;return function(){var t=this.context.get_j3r2sn$(i.Key);if(null!=t&&!t.isActive){var e=t.getCancellationException();return this.resumeWith_tl1gpc$(new n(r(e))),!0}return!1}}))),Vn.prototype.resumeUndispatchedWith_tl1gpc$=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeUndispatchedWith_tl1gpc$",(function(t){this.context,this.continuation.resumeWith_tl1gpc$(t)})),Vn.prototype.dispatchYield_6v298r$=function(t,e){this._state_8be2vx$=e,this.resumeMode=1,this.dispatcher.dispatchYield_5bn72i$(t,this)},Vn.prototype.toString=function(){return"DispatchedContinuation["+this.dispatcher+", "+Tr(this.continuation)+"]"},Object.defineProperty(Vn.prototype,"context",{get:function(){return this.continuation.context}}),Vn.$metadata$={kind:s,simpleName:"DispatchedContinuation",interfaces:[a,ko,Xn]},Xn.prototype.cancelResult_83a7kv$=function(t,e){},Xn.prototype.getSuccessfulResult_tpy1pm$=function(t){var i;return null==(i=t)||e.isType(i,r)?i:o()},Xn.prototype.getExceptionalResult_8ea4ql$=function(t){var i,n;return null!=(n=e.isType(i=t,It)?i:null)?n.cause:null},Xn.prototype.run=function(){var t,i=null;try{var n=(e.isType(t=this.delegate,Vn)?t:o()).continuation,r=n.context,s=this.takeState(),a=this.getExceptionalResult_8ea4ql$(s),l=Wn(this.resumeMode)?r.get_j3r2sn$(xe()):null;if(null!=a||null==l||l.isActive)if(null!=a)n.resumeWith_tl1gpc$(new f(S(a)));else{var u=this.getSuccessfulResult_tpy1pm$(s);n.resumeWith_tl1gpc$(new f(u))}else{var c=l.getCancellationException();this.cancelResult_83a7kv$(s,c),n.resumeWith_tl1gpc$(new f(S(xo(c))))}}catch(t){if(!e.isType(t,w))throw t;i=t}finally{var h;try{h=new f(p)}catch(t){if(!e.isType(t,w))throw t;h=new f(S(t))}var d=h;this.handleFatalException_mseuzz$(i,d.exceptionOrNull())}},Xn.prototype.handleFatalException_mseuzz$=function(t,e){if(null!==t||null!==e){var i=new ye("Fatal exception in coroutines machinery for "+this+". Please read KDoc to 'handleFatalException' method and report this incident to maintainers",q(null!=t?t:e));Vt(this.delegate.context,i)}},Xn.$metadata$={kind:s,simpleName:"DispatchedTask",interfaces:[uo]},Jn.prototype.plus_11rb$=function(t){var i,n,s,a;if(null==(i=this.holder_0))a=new Jn(t);else if(e.isType(i,G))(e.isType(n=this.holder_0,G)?n:o()).add_11rb$(t),a=new Jn(this.holder_0);else{var l=d(4);l.add_11rb$(null==(s=this.holder_0)||e.isType(s,r)?s:o()),l.add_11rb$(t),a=new Jn(l)}return a},Jn.prototype.forEachReversed_qlkmfe$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.InlineList.forEachReversed_qlkmfe$",g((function(){var t=Object,i=e.throwCCE,n=e.kotlin.collections.ArrayList;return function(r){var o,s,a;if(null!=(o=this.holder_0))if(e.isType(o,n))for(var l=e.isType(a=this.holder_0,n)?a:i(),u=l.size-1|0;u>=0;u--)r(l.get_za3lpa$(u));else r(null==(s=this.holder_0)||e.isType(s,t)?s:i())}}))),Jn.$metadata$={kind:s,simpleName:"InlineList",interfaces:[]},Jn.prototype.unbox=function(){return this.holder_0},Jn.prototype.toString=function(){return"InlineList(holder="+e.toString(this.holder_0)+")"},Jn.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.holder_0)|0},Jn.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.holder_0,t.holder_0)},Object.defineProperty(Qn.prototype,"callerFrame",{configurable:!0,get:function(){var t;return null==(t=this.uCont)||e.isType(t,ko)?t:o()}}),Qn.prototype.getStackTraceElement=function(){return null},Object.defineProperty(Qn.prototype,"isScopedCoroutine",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Qn.prototype,"parent_8be2vx$",{configurable:!0,get:function(){return this.parentContext.get_j3r2sn$(xe())}}),Qn.prototype.afterCompletion_s8jyv4$=function(t){Gn(h(this.uCont),Rt(t,this.uCont))},Qn.prototype.afterResume_s8jyv4$=function(t){this.uCont.resumeWith_tl1gpc$(Rt(t,this.uCont))},Qn.$metadata$={kind:s,simpleName:"ScopeCoroutine",interfaces:[ko,at]},tr.prototype.toString=function(){return this.symbol},tr.prototype.unbox_tpy1pm$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.Symbol.unbox_tpy1pm$",g((function(){var t=Object,i=e.throwCCE;return function(n){var r;return n===this?null:null==(r=n)||e.isType(r,t)?r:i()}}))),tr.$metadata$={kind:s,simpleName:"Symbol",interfaces:[]},cr.prototype.run=function(){this.closure$block()},cr.$metadata$={kind:s,interfaces:[lo]},hr.prototype.invoke_en0wgx$=function(t,e){this.invoke_ha2bmj$(t,null,e)},hr.$metadata$={kind:x,simpleName:"SelectBuilder",interfaces:[]},dr.$metadata$={kind:x,simpleName:"SelectClause0",interfaces:[]},fr.$metadata$={kind:x,simpleName:"SelectClause1",interfaces:[]},_r.$metadata$={kind:x,simpleName:"SelectClause2",interfaces:[]},mr.$metadata$={kind:x,simpleName:"SelectInstance",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.select_wd2ujs$",g((function(){var i=t.kotlinx.coroutines.selects.SelectBuilderImpl,n=Error;return function(t,r){var o;return e.suspendCall((o=t,function(t){var r=new i(t);try{o(r)}catch(t){if(!e.isType(t,n))throw t;r.handleBuilderException_tcv7n7$(t)}return r.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),$r.prototype.next=function(){return(t=this).number_0=t.number_0.inc();var t},$r.$metadata$={kind:s,simpleName:"SeqNumber",interfaces:[]},Object.defineProperty(yr.prototype,"callerFrame",{configurable:!0,get:function(){var t;return e.isType(t=this.uCont_0,ko)?t:null}}),yr.prototype.getStackTraceElement=function(){return null},Object.defineProperty(yr.prototype,"parentHandle_0",{configurable:!0,get:function(){return this._parentHandle_0},set:function(t){this._parentHandle_0=t}}),Object.defineProperty(yr.prototype,"context",{configurable:!0,get:function(){return this.uCont_0.context}}),Object.defineProperty(yr.prototype,"completion",{configurable:!0,get:function(){return this}}),yr.prototype.doResume_0=function(t,e){var i;for(this._result_0;;){var n=this._result_0;if(n===Sn){var r=t();if((i=this)._result_0===Sn&&(i._result_0=r,1))return}else{if(n!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this))return void e()}}},yr.prototype.resumeWith_tl1gpc$=function(t){t:do{for(this._result_0;;){var e=this._result_0;if(e===Sn){var i=jt(t);if((r=this)._result_0===Sn&&(r._result_0=i,1))break t}else{if(e!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this)){if(t.isFailure){var n=this.uCont_0;n.resumeWith_tl1gpc$(new f(S(xo(q(t.exceptionOrNull())))))}else this.uCont_0.resumeWith_tl1gpc$(t);break t}}}}while(0);var r},yr.prototype.resumeSelectWithException_tcv7n7$=function(t){t:do{for(this._result_0;;){var e=this._result_0;if(e===Sn){var i=new It(xo(t,this.uCont_0));if((n=this)._result_0===Sn&&(n._result_0=i,1))break t}else{if(e!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this)){h(this.uCont_0).resumeWith_tl1gpc$(new f(S(t)));break t}}}}while(0);var n},yr.prototype.getResult=function(){this.isSelected||this.initCancellability_0();var t,i=this._result_0;if(i===Sn){if((t=this)._result_0===Sn&&(t._result_0=l,1))return l;i=this._result_0}if(i===Cn)throw b("Already resumed");if(e.isType(i,It))throw i.cause;return i},yr.prototype.initCancellability_0=function(){var t;if(null!=(t=this.context.get_j3r2sn$(xe()))){var e=t,i=e.invokeOnCompletion_ct2b2z$(!0,void 0,new vr(this,e));this.parentHandle_0=i,this.isSelected&&i.dispose()}},vr.prototype.invoke=function(t){this.$outer.trySelect()&&this.$outer.resumeSelectWithException_tcv7n7$(this.job.getCancellationException())},vr.prototype.toString=function(){return"SelectOnCancelling["+this.$outer+"]"},vr.$metadata$={kind:s,simpleName:"SelectOnCancelling",interfaces:[ni]},yr.prototype.handleBuilderException_tcv7n7$=function(t){if(this.trySelect())this.resumeWith_tl1gpc$(new f(S(t)));else if(!e.isType(t,Gr)){var i=this.getResult();e.isType(i,It)&&i.cause===t||Vt(this.context,t)}},Object.defineProperty(yr.prototype,"isSelected",{configurable:!0,get:function(){for(this._state_0;;){var t=this._state_0;if(t===zn)return!1;if(!e.isType(t,Bn))return!0;t.perform_s8jyv4$(this)}}}),yr.prototype.disposeOnSelect_rvfg84$=function(t){var e=new xr(t);(this.isSelected||(this.addLast_l2j9rm$(e),this.isSelected))&&t.dispose()},yr.prototype.doAfterSelect_0=function(){var t;null!=(t=this.parentHandle_0)&&t.dispose();for(var i=this._next;!y(i,this);)e.isType(i,xr)&&i.handle.dispose(),i=i._next},yr.prototype.trySelect=function(){var t,e=this.trySelectOther_uc1cc4$(null);if(e===i)t=!0;else{if(null!=e)throw b(("Unexpected trySelectIdempotent result "+z(e)).toString());t=!1}return t},yr.prototype.trySelectOther_uc1cc4$=function(t){var n;for(this._state_0;;){var r=this._state_0;t:do{if(r===zn){if(null==t){if((n=this)._state_0!==zn||(n._state_0=null,0))break t}else{var o=new gr(t);if(!function(t){return t._state_0===zn&&(t._state_0=o,!0)}(this))break t;var s=o.perform_s8jyv4$(this);if(null!==s)return s}return this.doAfterSelect_0(),i}if(!e.isType(r,Bn))return null==t?null:r===t.desc?i:null;if(null!=t){var a=t.atomicOp;if(e.isType(a,br)&&a.impl===this)throw b("Cannot use matching select clauses on the same object".toString());if(a.isEarlierThan_bfmzsr$(r))return gn}r.perform_s8jyv4$(this)}while(0)}},gr.prototype.perform_s8jyv4$=function(t){var i,n=e.isType(i=t,yr)?i:o();this.otherOp.finishPrepare();var r,s=this.otherOp.atomicOp.decide_s8jyv4$(null),a=null==s?this.otherOp.desc:zn;return r=this,n._state_0===r&&(n._state_0=a),s},Object.defineProperty(gr.prototype,"atomicOp",{configurable:!0,get:function(){return this.otherOp.atomicOp}}),gr.$metadata$={kind:s,simpleName:"PairSelectOp",interfaces:[Bn]},yr.prototype.performAtomicTrySelect_6q0pxr$=function(t){return new br(this,t).perform_s8jyv4$(null)},yr.prototype.toString=function(){return"SelectInstance(state="+z(this._state_0)+", result="+z(this._result_0)+")"},Object.defineProperty(br.prototype,"opSequence",{configurable:!0,get:function(){return this.opSequence_oe6pw4$_0}}),br.prototype.prepare_11rb$=function(t){var i;if(null==t&&null!=(i=this.prepareSelectOp_0()))return i;try{return this.desc.prepare_4uxf5b$(this)}catch(i){throw e.isType(i,w)?(null==t&&this.undoPrepare_0(),i):i}},br.prototype.complete_19pj23$=function(t,e){this.completeSelect_0(e),this.desc.complete_ayrq83$(this,e)},br.prototype.prepareSelectOp_0=function(){var t;for(this.impl._state_0;;){var i=this.impl._state_0;if(i===this)return null;if(e.isType(i,Bn))i.perform_s8jyv4$(this.impl);else{if(i!==zn)return kn;if((t=this).impl._state_0===zn&&(t.impl._state_0=t,1))return null}}},br.prototype.undoPrepare_0=function(){var t;(t=this).impl._state_0===t&&(t.impl._state_0=zn)},br.prototype.completeSelect_0=function(t){var e,i=null==t,n=i?null:zn;(e=this).impl._state_0===e&&(e.impl._state_0=n,1)&&i&&this.impl.doAfterSelect_0()},br.prototype.toString=function(){return"AtomicSelectOp(sequence="+this.opSequence.toString()+")"},br.$metadata$={kind:s,simpleName:"AtomicSelectOp",interfaces:[Fn]},yr.prototype.invoke_nd4vgy$=function(t,e){t.registerSelectClause0_s9h9qd$(this,e)},yr.prototype.invoke_veq140$=function(t,e){t.registerSelectClause1_o3xas4$(this,e)},yr.prototype.invoke_ha2bmj$=function(t,e,i){t.registerSelectClause2_rol3se$(this,e,i)},yr.prototype.onTimeout_7xvrws$=function(t,e){if(t.compareTo_11rb$(I)<=0)this.trySelect()&&sr(e,this.completion);else{var i,n,r=new cr((i=this,n=e,function(){return i.trySelect()&&nr(n,i.completion),p}));this.disposeOnSelect_rvfg84$(ce(this.context).invokeOnTimeout_8irseu$(t,r))}},xr.$metadata$={kind:s,simpleName:"DisposeNode",interfaces:[mo]},yr.$metadata$={kind:s,simpleName:"SelectBuilderImpl",interfaces:[ko,a,mr,hr,bo]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.selectUnbiased_wd2ujs$",g((function(){var i=t.kotlinx.coroutines.selects.UnbiasedSelectBuilderImpl,n=Error;return function(t,r){var o;return e.suspendCall((o=t,function(t){var r=new i(t);try{o(r)}catch(t){if(!e.isType(t,n))throw t;r.handleBuilderException_tcv7n7$(t)}return r.initSelectResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),wr.prototype.handleBuilderException_tcv7n7$=function(t){this.instance.handleBuilderException_tcv7n7$(t)},wr.prototype.initSelectResult=function(){if(!this.instance.isSelected)try{var t;for(it(this.clauses),t=this.clauses.iterator();t.hasNext();)t.next()()}catch(t){if(!e.isType(t,w))throw t;this.instance.handleBuilderException_tcv7n7$(t)}return this.instance.getResult()},wr.prototype.invoke_nd4vgy$=function(t,e){var i,n,r;this.clauses.add_11rb$((i=this,n=e,r=t,function(){return r.registerSelectClause0_s9h9qd$(i.instance,n),p}))},wr.prototype.invoke_veq140$=function(t,e){var i,n,r;this.clauses.add_11rb$((i=this,n=e,r=t,function(){return r.registerSelectClause1_o3xas4$(i.instance,n),p}))},wr.prototype.invoke_ha2bmj$=function(t,e,i){var n,r,o,s;this.clauses.add_11rb$((n=this,r=e,o=i,s=t,function(){return s.registerSelectClause2_rol3se$(n.instance,r,o),p}))},wr.prototype.onTimeout_7xvrws$=function(t,e){var i,n,r;this.clauses.add_11rb$((i=this,n=t,r=e,function(){return i.instance.onTimeout_7xvrws$(n,r),p}))},wr.$metadata$={kind:s,simpleName:"UnbiasedSelectBuilderImpl",interfaces:[hr]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.whileSelect_vmyjlh$",g((function(){var i=t.kotlinx.coroutines.selects.SelectBuilderImpl,n=Error;function r(t){return function(r){var o=new i(r);try{t(o)}catch(t){if(!e.isType(t,n))throw t;o.handleBuilderException_tcv7n7$(t)}return o.getResult()}}return function(t,i){for(;e.suspendCall(r(t)(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver()););}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.sync.withLock_8701tb$",(function(t,i,n,r){void 0===i&&(i=null),e.suspendCall(t.lock_s8jyv4$(i,e.coroutineReceiver()));try{return n()}finally{t.unlock_s8jyv4$(i)}})),zr.prototype.toString=function(){return"Empty["+this.locked.toString()+"]"},zr.$metadata$={kind:s,simpleName:"Empty",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.sync.withPermit_103m5a$",(function(t,i,n){e.suspendCall(t.acquire(e.coroutineReceiver()));try{return i()}finally{t.release()}})),kr.$metadata$={kind:s,simpleName:"CompletionHandlerBase",interfaces:[mo]},Sr.$metadata$={kind:s,simpleName:"CancelHandlerBase",interfaces:[]},Rr.$metadata$={kind:k,simpleName:"Dispatchers",interfaces:[]};var Ir,Lr=null;function Dr(){return null===Lr&&new Rr,Lr}function qr(t){ai.call(this),this.delegate=t}function Br(){return new Fr}function Fr(){he.call(this)}function Ur(){he.call(this)}function Vr(){throw K("runBlocking event loop is not supported")}function Gr(t,e){U.call(this,t,e),this.name="CancellationException"}function Hr(t,e){return e=e||Object.create(Gr.prototype),Gr.call(e,t,null),e}function Wr(t,e,i){Gr.call(this,t,e),this.job_8be2vx$=i,this.name="JobCancellationException"}function Kr(t){return rt(t,I,Ir).toInt()}function Xr(){Dt.call(this),this.messageQueue_8be2vx$=new Yr(this)}function Yr(t){var e;this.$outer=t,ao.call(this),this.processQueue_8be2vx$=(e=this,function(){return e.process(),p})}function Zr(){Jr=this,Xr.call(this)}Object.defineProperty(qr.prototype,"immediate",{configurable:!0,get:function(){throw K("Immediate dispatching is not supported on JS")}}),qr.prototype.dispatch_5bn72i$=function(t,e){this.delegate.dispatch_5bn72i$(t,e)},qr.prototype.isDispatchNeeded_1fupul$=function(t){return this.delegate.isDispatchNeeded_1fupul$(t)},qr.prototype.dispatchYield_5bn72i$=function(t,e){this.delegate.dispatchYield_5bn72i$(t,e)},qr.prototype.toString=function(){var t;return null!=(t=this.toStringInternalImpl())?t:this.delegate.toString()},qr.$metadata$={kind:s,simpleName:"JsMainDispatcher",interfaces:[ai]},Fr.prototype.dispatch_5bn72i$=function(t,e){Vr()},Fr.$metadata$={kind:s,simpleName:"UnconfinedEventLoop",interfaces:[he]},Ur.prototype.unpark_0=function(){Vr()},Ur.prototype.reschedule_0=function(t,e){Vr()},Ur.$metadata$={kind:s,simpleName:"EventLoopImplPlatform",interfaces:[he]},Gr.$metadata$={kind:s,simpleName:"CancellationException",interfaces:[U]},Wr.prototype.toString=function(){return Gr.prototype.toString.call(this)+"; job="+this.job_8be2vx$},Wr.prototype.equals=function(t){return t===this||e.isType(t,Wr)&&y(t.message,this.message)&&y(t.job_8be2vx$,this.job_8be2vx$)&&y(t.cause,this.cause)},Wr.prototype.hashCode=function(){var t,e;return(31*((31*J(q(this.message))|0)+J(this.job_8be2vx$)|0)|0)+(null!=(e=null!=(t=this.cause)?J(t):null)?e:0)|0},Wr.$metadata$={kind:s,simpleName:"JobCancellationException",interfaces:[Gr]},Yr.prototype.schedule=function(){this.$outer.scheduleQueueProcessing()},Yr.prototype.reschedule=function(){setTimeout(this.processQueue_8be2vx$,0)},Yr.$metadata$={kind:s,simpleName:"ScheduledMessageQueue",interfaces:[ao]},Xr.prototype.dispatch_5bn72i$=function(t,e){this.messageQueue_8be2vx$.enqueue_771g0p$(e)},Xr.prototype.invokeOnTimeout_8irseu$=function(t,e){var i;return new no(setTimeout((i=e,function(){return i.run(),p}),Kr(t)))},Xr.prototype.scheduleResumeAfterDelay_egqmvs$=function(t,e){var i,n,r=setTimeout((i=e,n=this,function(){return i.resumeUndispatched_hyuxa3$(n,p),p}),Kr(t));e.invokeOnCancellation_f05bi3$(new no(r))},Xr.$metadata$={kind:s,simpleName:"SetTimeoutBasedDispatcher",interfaces:[pe,Dt]},Zr.prototype.scheduleQueueProcessing=function(){n.nextTick(this.messageQueue_8be2vx$.processQueue_8be2vx$)},Zr.$metadata$={kind:k,simpleName:"NodeDispatcher",interfaces:[Xr]};var Jr=null;function Qr(){return null===Jr&&new Zr,Jr}function to(){eo=this,Xr.call(this)}to.prototype.scheduleQueueProcessing=function(){setTimeout(this.messageQueue_8be2vx$.processQueue_8be2vx$,0)},to.$metadata$={kind:k,simpleName:"SetTimeoutDispatcher",interfaces:[Xr]};var eo=null;function io(){return null===eo&&new to,eo}function no(t){St.call(this),this.handle_0=t}function ro(t){Dt.call(this),this.window_0=t,this.queue_0=new so(this.window_0)}function oo(t,e){this.this$WindowDispatcher=t,this.closure$handle=e}function so(t){var e;ao.call(this),this.window_0=t,this.messageName_0="dispatchCoroutine",this.window_0.addEventListener("message",(e=this,function(t){return t.source==e.window_0&&t.data==e.messageName_0&&(t.stopPropagation(),e.process()),p}),!0)}function ao(){qn.call(this),this.yieldEvery=16,this.scheduled_0=!1}function lo(){}function uo(){}function po(t){}function co(t){var e,i;if(null!=(e=t.coroutineDispatcher))i=e;else{var n=new ro(t);t.coroutineDispatcher=n,i=n}return i}function ho(t){Hr("Flow was aborted, no more elements needed",this),this.owner=t,this.name="AbortFlowException"}function fo(){}function _o(t){return ot(t)}function mo(){this._next=this,this._prev=this,this._removed=!1}function $o(t,e){vo.call(this),this.queue=t,this.node=e}function yo(t){vo.call(this),this.queue=t,this.affectedNode_rjf1fm$_0=this.queue._next}function vo(){Un.call(this)}function go(t,e,i){Bn.call(this),this.affected=t,this.desc=e,this.atomicOp_khy6pf$_0=i}function bo(){mo.call(this)}function xo(t,e){return t}function wo(t){return t}function zo(t){return t}function ko(){}function So(t,e){}function Co(t){return null}function No(t){return 0}function Eo(){this.value_0=null}no.prototype.dispose=function(){clearTimeout(this.handle_0)},no.prototype.invoke=function(t){this.dispose()},no.prototype.toString=function(){return"ClearTimeout["+this.handle_0+"]"},no.$metadata$={kind:s,simpleName:"ClearTimeout",interfaces:[we,St]},ro.prototype.dispatch_5bn72i$=function(t,e){this.queue_0.enqueue_771g0p$(e)},ro.prototype.scheduleResumeAfterDelay_egqmvs$=function(t,e){var i,n;this.window_0.setTimeout((i=e,n=this,function(){return i.resumeUndispatched_hyuxa3$(n,p),p}),Kr(t))},oo.prototype.dispose=function(){this.this$WindowDispatcher.window_0.clearTimeout(this.closure$handle)},oo.$metadata$={kind:s,interfaces:[we]},ro.prototype.invokeOnTimeout_8irseu$=function(t,e){var i;return new oo(this,this.window_0.setTimeout((i=e,function(){return i.run(),p}),Kr(t)))},ro.$metadata$={kind:s,simpleName:"WindowDispatcher",interfaces:[pe,Dt]},so.prototype.schedule=function(){var t;Promise.resolve(p).then((t=this,function(e){return t.process(),p}))},so.prototype.reschedule=function(){this.window_0.postMessage(this.messageName_0,"*")},so.$metadata$={kind:s,simpleName:"WindowMessageQueue",interfaces:[ao]},ao.prototype.enqueue_771g0p$=function(t){this.addLast_trkh7z$(t),this.scheduled_0||(this.scheduled_0=!0,this.schedule())},ao.prototype.process=function(){try{for(var t=this.yieldEvery,e=0;e<t;e++){var i;if(null==(i=this.removeFirstOrNull()))return;i.run()}}finally{this.isEmpty?this.scheduled_0=!1:this.reschedule()}},ao.$metadata$={kind:s,simpleName:"MessageQueue",interfaces:[qn]},lo.$metadata$={kind:x,simpleName:"Runnable",interfaces:[]},uo.$metadata$={kind:s,simpleName:"SchedulerTask",interfaces:[lo]},ho.$metadata$={kind:s,simpleName:"AbortFlowException",interfaces:[Gr]},fo.prototype.tryLock=function(){return!0},fo.prototype.unlock=function(){},fo.$metadata$={kind:s,simpleName:"NoOpLock",interfaces:[]},Object.defineProperty(mo.prototype,"nextNode",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_nextNode",(function(){return this._next}))}),Object.defineProperty(mo.prototype,"prevNode",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_prevNode",(function(){return this._prev}))}),Object.defineProperty(mo.prototype,"isRemoved",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_isRemoved",(function(){return this._removed}))}),mo.prototype.addLast_l2j9rm$=function(t){var e=this._prev;t._next=this,t._prev=e,e._next=t,this._prev=t},mo.prototype.remove=function(){if(this._removed)return!1;var t=this._prev,e=this._next;return t._next=e,e._prev=t,this._removed=!0,!0},mo.prototype.addOneIfEmpty_l2j9rm$=function(t){return this._next===this&&(this.addLast_l2j9rm$(t),!0)},mo.prototype.addLastIf_w327v9$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIf_w327v9$",(function(t,e){return!!e()&&(this.addLast_l2j9rm$(t),!0)})),mo.prototype.addLastIfPrev_s8xlln$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIfPrev_s8xlln$",(function(t,e){return!!e(this._prev)&&(this.addLast_l2j9rm$(t),!0)})),mo.prototype.addLastIfPrevAndIf_dzcug$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIfPrevAndIf_dzcug$",(function(t,e,i){return!!e(this._prev)&&!!i()&&(this.addLast_l2j9rm$(t),!0)})),mo.prototype.helpRemove=function(){},mo.prototype.removeFirstOrNull=function(){var t=this._next;if(t===this)return null;if(!t.remove())throw b("Should remove".toString());return t},mo.prototype.removeFirstIfIsInstanceOfOrPeekIf_14urrv$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.removeFirstIfIsInstanceOfOrPeekIf_14urrv$",g((function(){var t=e.kotlin.IllegalStateException_init_pdl1vj$;return function(e,i,n){var r=this._next;if(r===this)return null;if(!i(r))return null;if(n(r))return r;if(!r.remove())throw t("Should remove".toString());return r}}))),mo.$metadata$={kind:s,simpleName:"LinkedListNode",interfaces:[]},Object.defineProperty($o.prototype,"affectedNode",{configurable:!0,get:function(){return this.queue._prev}}),$o.prototype.finishPrepare_xe32vn$=function(t){},$o.prototype.onComplete=function(){this.queue.addLast_l2j9rm$(this.node)},$o.prototype.finishOnSuccess_bpl3tg$=function(t,e){},$o.$metadata$={kind:s,simpleName:"AddLastDesc",interfaces:[vo]},Object.defineProperty(yo.prototype,"result",{configurable:!0,get:function(){var t;return null==(t=this.affectedNode)||e.isType(t,r)?t:o()}}),Object.defineProperty(yo.prototype,"affectedNode",{configurable:!0,get:function(){return this.affectedNode_rjf1fm$_0}}),yo.prototype.finishPrepare_xe32vn$=function(t){},yo.prototype.onComplete=function(){this.queue.removeFirstOrNull()},yo.prototype.finishOnSuccess_bpl3tg$=function(t,e){},yo.$metadata$={kind:s,simpleName:"RemoveFirstDesc",interfaces:[vo]},vo.prototype.onPrepare_xe32vn$=function(t){return this.finishPrepare_xe32vn$(t),null},vo.prototype.prepare_4uxf5b$=function(t){var e=this.affectedNode,i=this.failure_l2j9rm$(e);return null!=i?i:this.onPrepare_xe32vn$(new go(e,this,t))},vo.prototype.complete_ayrq83$=function(t,e){this.onComplete()},vo.prototype.failure_l2j9rm$=function(t){return null},vo.prototype.retry_ru8hrx$=function(t,e){return!1},vo.$metadata$={kind:s,simpleName:"AbstractAtomicDesc",interfaces:[Un]},Object.defineProperty(go.prototype,"atomicOp",{get:function(){return this.atomicOp_khy6pf$_0}}),go.prototype.perform_s8jyv4$=function(t){return null},go.prototype.finishPrepare=function(){},go.$metadata$={kind:s,simpleName:"PrepareOp",interfaces:[Bn]},Object.defineProperty(bo.prototype,"isEmpty",{configurable:!0,get:function(){return this._next===this}}),bo.prototype.forEach_jgwmnf$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListHead.forEach_jgwmnf$",g((function(){var t=e.equals;return function(e,i,n){for(var r=this._next;!t(r,this);)i(r)&&n(r),r=r._next}}))),bo.prototype.remove=function(){throw st()},bo.$metadata$={kind:s,simpleName:"LinkedListHead",interfaces:[mo]},v("kotlinx-coroutines-core.kotlinx.coroutines.internal.recoverAndThrow_8o0b5c$",(function(t,e){throw t})),ko.$metadata$={kind:x,simpleName:"CoroutineStackFrame",interfaces:[]},Eo.prototype.get=function(){var t;return null==(t=this.value_0)||e.isType(t,r)?t:o()},Eo.prototype.set_11rb$=function(t){this.value_0=t},Eo.$metadata$={kind:s,simpleName:"CommonThreadLocal",interfaces:[]};var Po=t.kotlinx||(t.kotlinx={}),To=Po.coroutines||(Po.coroutines={});To.AbstractCoroutine=at,To.launch_s496o7$=function(t,e,i,n){void 0===e&&(e=_.EmptyCoroutineContext),void 0===i&&(i=ne());var r=Pr(t,e),o=i.isLazy?new ht(r,n):new ct(r,!0);return o.start_b5ul0p$(i,o,n),o},To.async_pda6u4$=function(t,e,i,n){void 0===e&&(e=_.EmptyCoroutineContext),void 0===i&&(i=ne());var r=Pr(t,e),o=i.isLazy?new pt(r,n):new lt(r,!0);return o.start_b5ul0p$(i,o,n),o},To.withContext_i5cbzn$=function(t,e,i){return(n=t,r=e,function(t){var e=t.context,i=e.plus_1fupul$(n);if(wi(i),i===e){var o=new Qn(i,t);return pr(o,o,r)}if(y(i.get_j3r2sn$($.Key),e.get_j3r2sn$($.Key))){var s=new dt(i,t);return pr(s,s,r)}var a=new ft(i,t);return a.initParentJob_8be2vx$(),rr(r,a,a),a.getResult()})(i);var n,r},To.CancellableContinuation=_t,To.getOrCreateCancellableContinuation_3j0xf1$=mt,To.removeOnCancellation_1u31dd$=$t,To.disposeOnCancellation_xredcy$=yt,To.CancellableContinuationImpl=bt,To.NotCompleted=xt,To.CancelHandler=St,To.CompletableDeferred=Pt,To.CompletableDeferred_xptg6w$=function(t){return void 0===t&&(t=null),new Tt(t)},To.CompletableJob=Mt,To.toState_dwruuz$=jt,To.toState_bd49bs$=At,To.recoverResult_nnrdi1$=Rt,To.CompletedExceptionally=It,To.CancelledContinuation=Lt,Object.defineProperty(Dt,"Key",{get:Ut}),To.CoroutineDispatcher=Dt,To.handleCoroutineException_1ur55u$=Vt,To.handlerException_l3aqr5$=Gt,To.CoroutineExceptionHandler=Ht,Object.defineProperty(Ht,"Key",{get:Qt}),To.CoroutineScope=te,Object.defineProperty(ee,"DEFAULT",{get:ne}),Object.defineProperty(ee,"LAZY",{get:re}),Object.defineProperty(ee,"ATOMIC",{get:oe}),Object.defineProperty(ee,"UNDISPATCHED",{get:se}),To.CoroutineStart=ee,To.CopyableThrowable=ae,To.Deferred=le,To.Delay=pe,To.delay_s8cxhz$=function(t,e){var i;if(!(t.toNumber()<=0))return ue((i=t,function(t){return ce(t.context).scheduleResumeAfterDelay_egqmvs$(i,t),p}))(e)},To.get_delay_tcgsej$=ce,To.EventLoop=he,Object.defineProperty(To,"ThreadLocalEventLoop",{get:_e}),To.EventLoopImplBase=me,To.CompletionHandlerException=$e,To.CoroutinesInternalError=ye,Object.defineProperty(ve,"Key",{get:xe}),To.Job=ve,To.Job_5dx9e$=function(t){return void 0===t&&(t=null),new We(t)},To.DisposableHandle=we,To.ChildJob=ze,To.ParentJob=ke,To.ChildHandle=Se,Object.defineProperty(To,"NonDisposableHandle",{get:Re}),To.JobSupport=Ie,To.boxIncomplete_ntq51o$=Ve,To.unboxState_ntq51o$=Ge,To.JobImpl=We,To.Incomplete=Ke,To.JobNode=Xe,To.NodeList=Ye,To.InactiveNodeList=Ze,To.JobCancellingNode=ni,To.ChildHandleNode=oi,To.ChildContinuation=si,To.MainCoroutineDispatcher=ai,To.TimeoutCancellationException=ui,Object.defineProperty(To,"Unconfined",{get:hi}),Object.defineProperty(di,"Key",{get:bi}),To.YieldContext=di,To.yield=xi,To.checkCompletion_tcgsej$=wi,ki.SendBuffered=Oi;var Oo=To.channels||(To.channels={});Oo.AbstractSendChannel=ki,Oo.AbstractChannel=Mi,Oo.Send=Vi,Oo.ReceiveOrClosed=Gi,Oo.SendElement=Hi,Oo.Closed=Wi,Oo.Receive=Ki,Oo.ArrayChannel=Xi,Oo.BroadcastChannel=Zi,Oo.SendChannel=Ji,Oo.ReceiveChannel=Qi,tn.Closed=en,Object.defineProperty(tn,"Companion",{get:on}),Oo.ValueOrClosed=tn,Oo.ChannelIterator=sn,Object.defineProperty(ln,"Factory",{get:hn}),Oo.Channel=ln,Oo.Channel_ww73n8$=function(t){switch(void 0===t&&(t=0),t){case 0:return new Ln;case 2147483647:return new Rn;case-1:return new $n;case-2:return new Xi(hn().CHANNEL_DEFAULT_CAPACITY_8be2vx$);default:return new Xi(t)}},Oo.ClosedSendChannelException=dn,Oo.ClosedReceiveChannelException=fn,Oo.ChannelCoroutine=_n,Oo.cancelConsumed_v57n85$=function(t,i){var n,r,o;n=null!=i?null!=(o=e.isType(r=i,Gr)?r:null)?o:new Gr("Channel was consumed, consumer had failed",i):null,t.cancel_m4sck1$(n)},Oo.ConflatedBroadcastChannel=mn,Oo.ConflatedChannel=$n,Oo.LinkedListChannel=Rn,Oo.ProducerScope=In,Oo.RendezvousChannel=Ln;var Mo=To.flow||(To.flow={});Mo.FlowCollector=Dn;var jo=Mo.internal||(Mo.internal={});jo.checkOwnership_ygf9h9$=function(t,e){if(t.owner!==e)throw t};var Ao=To.internal||(To.internal={});Ao.ArrayQueue=qn,Ao.OpDescriptor=Bn,Ao.AtomicOp=Fn,Ao.AtomicDesc=Un,To.DispatchedContinuation=Vn,To.resumeCancellableWith_j7z4j2$=Gn,To.yieldUndispatched_t90a9u$=Hn,To.get_isCancellableMode_8e50z4$=Wn,To.get_isDispatchedMode_8e50z4$=Kn,To.DispatchedTask=Xn,To.dispatch_h66hf9$=Yn,To.resume_yw0jex$=Zn,Ao.recoverStackTrace_ak2v6d$=xo,Ao.InlineList=Jn,Ao.ScopeCoroutine=Qn,Ao.Symbol=tr,Ao.systemProp_vrsuct$=er,Ao.systemProp_ornks8$=ir;var Ro=To.intrinsics||(To.intrinsics={});Ro.startCoroutineCancellable_x18nsh$=nr,Ro.startCoroutineCancellable_kew4v3$=rr,Ro.startCoroutineCancellable_he7xzw$=or,Ro.startCoroutineUnintercepted_81hn2s$=sr,Ro.startCoroutineUnintercepted_kew4v3$=ar,Ro.startCoroutineUndispatched_81hn2s$=lr,Ro.startCoroutineUndispatched_kew4v3$=ur,Ro.startUndispatchedOrReturn_nxbeil$=pr;var Io=To.selects||(To.selects={});return Io.SelectBuilder=hr,Io.SelectClause0=dr,Io.SelectClause1=fr,Io.SelectClause2=_r,Io.SelectInstance=mr,Io.SeqNumber=$r,Io.SelectBuilderImpl=yr,Io.UnbiasedSelectBuilderImpl=wr,To.CompletionHandlerBase=kr,To.CancelHandlerBase=Sr,To.invokeIt_beznmj$=Cr,To.createDefaultDispatcher_8be2vx$=Nr,Object.defineProperty(To,"DefaultDelay_8be2vx$",{get:Er}),To.newCoroutineContext_7n4184$=Pr,To.toDebugString_u0ddlz$=Tr,To.get_coroutineName_tcgsej$=Or,To.handleCoroutineExceptionImpl_yfv4gr$=Mr,To.get_hexAddress_8ea4r1$=jr,To.get_classSimpleName_8ea4r1$=Ar,Object.defineProperty(To,"Dispatchers",{get:Dr}),To.createEventLoop_8be2vx$=Br,To.UnconfinedEventLoop=Fr,To.EventLoopImplPlatform=Ur,To.CancellationException_init_pdl1vj$=Hr,To.CancellationException=Gr,To.JobCancellationException=Wr,Xr.ScheduledMessageQueue=Yr,To.SetTimeoutBasedDispatcher=Xr,Object.defineProperty(To,"NodeDispatcher",{get:Qr}),Object.defineProperty(To,"SetTimeoutDispatcher",{get:io}),To.WindowDispatcher=ro,To.MessageQueue=ao,To.Runnable=lo,To.SchedulerTask=uo,To.get_taskContext_5sfo4y$=po,To.asCoroutineDispatcher_nz12v2$=co,jo.AbortFlowException=ho,Ao.NoOpLock=fo,Ao.identitySet_46rbr$=_o,Ao.LinkedListNode=mo,Ao.AddLastDesc=$o,Ao.RemoveFirstDesc=yo,Ao.AbstractAtomicDesc=vo,Ao.PrepareOp=go,Ao.LinkedListHead=bo,Ao.recoverStackTrace_87698k$=wo,Ao.unwrap_87698k$=zo,Ao.CoroutineStackFrame=ko,Ao.initCause_oz8fe6$=So,Ao.systemProp_y4putb$=Co,Ao.threadContextElements_v4qu62$=No,Ao.CommonThreadLocal=Eo,ve.prototype.plus_1fupul$=T.prototype.plus_1fupul$,ve.prototype.fold_3cc69b$=T.prototype.fold_3cc69b$,ve.prototype.get_j3r2sn$=T.prototype.get_j3r2sn$,ve.prototype.minusKey_yeqjby$=T.prototype.minusKey_yeqjby$,ze.prototype.cancel=ve.prototype.cancel,ze.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,ze.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,ze.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,ze.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,ze.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,ze.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,ze.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ze.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,ke.prototype.cancel=ve.prototype.cancel,ke.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,ke.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,ke.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,ke.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,ke.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,ke.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,ke.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ke.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Ie.prototype.cancel=ve.prototype.cancel,Ie.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,Ie.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,Ie.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,Ie.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,Ie.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,Ie.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Ie.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,Ie.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,le.prototype.cancel=ve.prototype.cancel,le.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,le.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,le.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,le.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,le.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,le.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,le.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,le.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,bt.prototype.cancel_dbl4no$=_t.prototype.cancel_dbl4no$,bt.prototype.tryResume_19pj23$=_t.prototype.tryResume_19pj23$,Pt.prototype.cancel=le.prototype.cancel,Pt.prototype.plus_dqr1mp$=le.prototype.plus_dqr1mp$,Pt.prototype.plus_1fupul$=le.prototype.plus_1fupul$,Pt.prototype.fold_3cc69b$=le.prototype.fold_3cc69b$,Pt.prototype.get_j3r2sn$=le.prototype.get_j3r2sn$,Pt.prototype.minusKey_yeqjby$=le.prototype.minusKey_yeqjby$,Pt.prototype.cancel_m4sck1$=le.prototype.cancel_m4sck1$,Pt.prototype.cancel_dbl4no$=le.prototype.cancel_dbl4no$,Pt.prototype.invokeOnCompletion_ct2b2z$=le.prototype.invokeOnCompletion_ct2b2z$,Mt.prototype.cancel=ve.prototype.cancel,Mt.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,Mt.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,Mt.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,Mt.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,Mt.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,Mt.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,Mt.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,Mt.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Dt.prototype.get_j3r2sn$=$.prototype.get_j3r2sn$,Dt.prototype.minusKey_yeqjby$=$.prototype.minusKey_yeqjby$,Ht.prototype.fold_3cc69b$=T.prototype.fold_3cc69b$,Ht.prototype.get_j3r2sn$=T.prototype.get_j3r2sn$,Ht.prototype.minusKey_yeqjby$=T.prototype.minusKey_yeqjby$,Ht.prototype.plus_1fupul$=T.prototype.plus_1fupul$,me.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,me.prototype.invokeOnTimeout_8irseu$=pe.prototype.invokeOnTimeout_8irseu$,li.prototype.cancel=ve.prototype.cancel,li.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,li.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,li.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,li.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ki.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,qi.prototype.next0=sn.prototype.next0,ln.prototype.cancel=Qi.prototype.cancel,ln.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,ln.prototype.cancel_m4sck1$=Qi.prototype.cancel_m4sck1$,ln.prototype.cancel_dbl4no$=Qi.prototype.cancel_dbl4no$,Mi.prototype.cancel=ln.prototype.cancel,Mi.prototype.cancel_dbl4no$=ln.prototype.cancel_dbl4no$,Mi.prototype.cancel_m4sck1$=ln.prototype.cancel_m4sck1$,Zi.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,In.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,Yi.prototype.close_dbl4no$=In.prototype.close_dbl4no$,_n.prototype.close_dbl4no$=ln.prototype.close_dbl4no$,mn.prototype.close_dbl4no$=Zi.prototype.close_dbl4no$,yr.prototype.invoke_en0wgx$=hr.prototype.invoke_en0wgx$,wr.prototype.invoke_en0wgx$=hr.prototype.invoke_en0wgx$,Xr.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,ro.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,i=new tr("RESUME_TOKEN"),new tr("REMOVED_TASK"),new tr("CLOSED_EMPTY"),Ne=new tr("COMPLETING_ALREADY"),Ee=new tr("COMPLETING_WAITING_CHILDREN"),Pe=new tr("COMPLETING_RETRY"),Te=new tr("TOO_LATE_TO_CANCEL"),Oe=new tr("SEALED"),Me=new He(!1),je=new He(!0),_i=new tr("OFFER_SUCCESS"),mi=new tr("OFFER_FAILED"),$i=new tr("POLL_FAILED"),yi=new tr("ENQUEUE_FAILED"),vi=new tr("ON_CLOSE_HANDLER_INVOKED"),pn="Channel was closed",new tr("NONE"),new tr("PENDING"),new tr("NULL"),new tr("DONE"),er("kotlinx.coroutines.flow.defaultConcurrency",16,1,2147483647),vn=new tr("NO_DECISION"),gn=new tr("RETRY_ATOMIC"),new tr("CLOSED"),bn=new tr("UNDEFINED"),xn=new tr("REUSABLE_CLAIMED"),wn=new tr("REMOVE_PREPARED"),zn=new tr("NOT_SELECTED"),kn=new tr("ALREADY_SELECTED"),Sn=new tr("UNDECIDED"),Cn=new tr("RESUMED"),Nn=new $r,new tr("LOCK_FAIL"),new tr("ENQUEUE_FAIL"),new tr("UNLOCK_FAIL"),new tr("SELECT_SUCCESS"),En=new tr("LOCKED"),Pn=new tr("UNLOCKED"),new zr(En),new zr(Pn),er("kotlinx.coroutines.semaphore.maxSpinCycles",100),new tr("PERMIT"),new tr("TAKEN"),new tr("BROKEN"),new tr("CANCELLED"),er("kotlinx.coroutines.semaphore.segmentSize",16),Tn="undefined",On=0,Mn=!1,Ir=nt,t})?r.apply(e,o):r)||(t.exports=s)}).call(this,i(3))},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{o=o+(r=r+e[n++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var o=n,s=r+i;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,i){"use strict";var n=i(0),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,e.string2buf=function(t){var e,i,r,o,s,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(l),s=0,o=0;s<l;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,r,o,a=e||t.length,u=new Array(2*a);for(n=0,i=0;i<a;)if((r=t[i++])<128)u[n++]=r;else if((o=s[r])>4)u[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&i<a;)r=r<<6|63&t[i++],o--;o>1?u[n++]=65533:r<65536?u[n++]=r:(r-=65536,u[n++]=55296|r>>10&1023,u[n++]=56320|1023&r)}return l(u,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+s[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){t.exports=i(11)},function(t,e,i){var n,r,o;r=[e,i(1),i(12),i(4)],void 0===(o="function"==typeof(n=function(t,e,i,n){"use strict";var r=t.$$importsForInline$$||(t.$$importsForInline$$={}),o=e.throwUPAE,s=e.kotlin.Unit,a=i.de.fabmax.kool.scene.orbitInputTransform_uj7ww7$,l=i.de.fabmax.kool.util.SimpleShadowMap,u=i.de.fabmax.kool.util.ao.AoPipeline,p=i.de.fabmax.kool.util.ibl,c=i.de.fabmax.kool.util.gltf.GltfFile.ModelGenerateConfig,h=i.de.fabmax.kool.util.gltf.loadGltfModel_aln4ac$,d=e.ensureNotNull,f=e.kotlin.collections.first_7wnvza$,_=e.kotlin.math.abs_za3lpa$,m=i.de.fabmax.kool.util.Color,$=i.de.fabmax.kool.math.Vec3f,y=i.de.fabmax.kool.pipeline.shading.Albedo,v=i.de.fabmax.kool.pipeline.shading.pbrShader_skmpm9$,g=i.de.fabmax.kool.scene.colorMesh_gp9ews$,b=i.de.fabmax.kool.scene.textureMesh_pyaqjj$,x=i.de.fabmax.kool.scene,w=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,z=e.kotlin.coroutines.CoroutineImpl,k=i.de.fabmax.kool.math.scale_2qa7tb$,S=i.de.fabmax.kool.pipeline.shading.ModeledShader.TextureColor,C=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel,N=i.de.fabmax.kool.pipeline.shadermodel.ShaderNode,E=i.de.fabmax.kool.pipeline.shadermodel.ModelVar4f,P=i.de.fabmax.kool.pipeline.shadermodel.ShaderNodeIoVar,T=e.Kind.CLASS,O=e.Kind.OBJECT,M=e.kotlin.collections.ArrayList_init_287e2$,j=Math,A=i.de.fabmax.kool.math,R=e.kotlin.collections.addAll_ipc267$,I=i.de.fabmax.kool.scene.Scene,L=e.kotlin.math.roundToInt_yrwdxr$,D=e.kotlin.math.log_lu1900$,q=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel.VertexStageBuilder,B=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel.FragmentStageBuilder,F=e.Long.fromInt(500),U=n.kotlinx.coroutines.delay_s8cxhz$,V=e.Long.fromInt(100),G=i.de.fabmax.kool.util.deferred.DeferredPipelineConfig,H=i.de.fabmax.kool.util.deferred.DeferredPipeline,W=i.de.fabmax.kool.scene.PerspectiveCamera,K=e.throwCCE,X=i.de.fabmax.kool.math.MutableVec3f_init_czzhiu$,Y=i.de.fabmax.kool.scene.group_2ylazs$,Z=i.de.fabmax.kool.scene.Mesh,J=i.de.fabmax.kool.pipeline.Attribute,Q=i.de.fabmax.kool.util.IndexedVertexList_init_5jr6ei$,tt=i.de.fabmax.kool.scene.ui.zero,et=i.de.fabmax.kool.scene.ui.pcs_8ca0d4$,it=i.de.fabmax.kool.scene.ui.full,nt=i.de.fabmax.kool.scene.ui.Alignment,rt=i.de.fabmax.kool.scene.ui.Gravity,ot=i.de.fabmax.kool.toString_lcymw2$,st=e.numberToInt,at=i.de.fabmax.kool.math.MutableVec3f,lt=i.de.fabmax.kool.scene.Light,ut=i.de.fabmax.kool.scene.Group,pt=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,ct=i.de.fabmax.kool.pipeline.shading.PbrMaterialConfig,ht=i.de.fabmax.kool.util.deferred.DeferredPbrShader,dt=i.de.fabmax.kool.pipeline.shading.ModeledShader,ft=i.de.fabmax.kool.pipeline.DepthCompareOp,_t=i.de.fabmax.kool.pipeline.shadermodel.TextureNode,mt=i.de.fabmax.kool.math.smoothStep_y2kzbl$,$t=i.de.fabmax.kool.pipeline.shading.UnlitMaterialConfig,yt=i.de.fabmax.kool.pipeline.shading.AlphaModeBlend,vt=i.de.fabmax.kool.pipeline.shading.UnlitShader,gt=i.de.fabmax.kool.pipeline.shadermodel.UniformBufferMvp,bt=i.de.fabmax.kool.scene.Skybox.SkyboxPosNode,xt=i.de.fabmax.kool.pipeline.CullMethod,wt=i.de.fabmax.kool.pipeline.ShaderStage,zt=e.kotlin.collections.firstOrNull_2p1efm$,kt=(e.wrapFunction,i.de.fabmax.kool.pipeline.UniformMat4f),St=i.de.fabmax.kool.math.Vec2f,Ct=i.de.fabmax.kool.pipeline.shadermodel.ModelVar2fConst,Nt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar3f,Et=i.de.fabmax.kool.pipeline.shadermodel.ModelVar3fConst,Pt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar4fConst,Tt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1fConst,Ot=i.de.fabmax.kool.pipeline.Uniform3f,Mt=i.de.fabmax.kool.pipeline.Uniform1f,jt=i.de.fabmax.kool.pipeline.UniformColor,At=i.de.fabmax.kool.pipeline.BlendMode,Rt=e.equals,It=i.de.fabmax.kool.math.Mat4d,Lt=i.de.fabmax.kool.math.Vec3d,Dt=i.de.fabmax.kool.math.MutableVec3d_init_czzhiw$,qt=i.de.fabmax.kool.scene.Scene.DragHandler,Bt=i.de.fabmax.kool.util.deferred.DeferredPbrShader.MrtMultiplexNode,Ft=i.de.fabmax.kool.pipeline.shadermodel.StageInterfaceNode.OutputNode,Ut=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1f,Vt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1i,Gt=i.de.fabmax.kool.pipeline.Uniform4f,Ht=i.de.fabmax.kool.pipeline.shadermodel.PushConstantNode3f,Wt=i.de.fabmax.kool.pipeline.OffscreenRenderPass2d,Kt=i.de.fabmax.kool.pipeline.TexFormat,Xt=i.de.fabmax.kool.scene.OrthographicCamera,Yt=i.de.fabmax.kool.scene.Camera.ProjCorrectionMode,Zt=e.kotlin.collections.listOf_i5x0yv$,Jt=i.de.fabmax.kool.pipeline.OffscreenRenderPass.ConfigBuilder,Qt=i.de.fabmax.kool.pipeline.OffscreenRenderPass.Config,te=i.de.fabmax.kool.util.IndexedVertexList,ee=i.de.fabmax.kool.scene.defaultCamTransform_v4keia$,ie=i.de.fabmax.kool.util.BoundingBox_init_4lfkt4$,ne=e.kotlin.collections.listOf_mh5how$,re=(i.de.fabmax.kool.util.createUint8Buffer_za3lpa$,e.toByte,i.de.fabmax.kool.pipeline.FilterMethod),oe=i.de.fabmax.kool.pipeline.TextureProps,se=(i.de.fabmax.kool.pipeline.BufferedTextureData,i.de.fabmax.kool.pipeline.Texture),ae=e.kotlin.to_ujzrz7$,le=e.kotlin.collections.get_lastIndex_55thoc$,ue=e.kotlin.ranges.until_dqglrj$,pe=i.de.fabmax.kool.util.SimpleShape,ce=i.de.fabmax.kool.util.Profile,he=(e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,e.kotlin.collections.ArrayList_init_ww73n8$,i.de.fabmax.kool.util.MeshBuilder),de=(e.Kind.INTERFACE,i.de.fabmax.kool.math.Random),fe=i.de.fabmax.kool.math.Mat4f,_e=e.kotlin.collections.last_2p1efm$,me=i.de.fabmax.kool.util,$e=(e.kotlin.collections.get_indices_tmsbgo$,e.kotlin.ranges.step_xsgg7u$,e.kotlin.collections.reversed_7wnvza$),ye=e.kotlin.collections.checkIndexOverflow_za3lpa$,ve=(i.de.fabmax.kool.util.MultiShape,i.de.fabmax.kool.scene.ui.uiScene_2d22y4$),ge=i.de.fabmax.kool.scene.ui.dps_8ca0d4$,be=e.toString,xe=i.de.fabmax.kool.util.Font,we=i.de.fabmax.kool.util.FontProps,ze=i.de.fabmax.kool.util.uiFont_a4r08d$,ke=i.de.fabmax.kool.scene.ui.UiTheme,Se=i.de.fabmax.kool.scene.ui.BlankComponentUi,Ce=i.de.fabmax.kool.scene.ui.theme_vvurn$,Ne=i.de.fabmax.kool.scene.ui.SimpleComponentUi,Ee=i.de.fabmax.kool.scene.wireframeMesh_hjnvxh$,Pe=i.de.fabmax.kool.util.MeshInstanceList,Te=i.de.fabmax.kool.util.MutableColor_init,Oe=e.kotlin.collections.get_indices_gzk92b$,Me=e.kotlin.collections.first_2p1efm$,je=i.de.fabmax.kool.math.MutableVec3f_init,Ae=i.de.fabmax.kool.pipeline.GlslType,Re=e.kotlin.IllegalStateException_init_pdl1vj$,Ie=i.de.fabmax.kool.util.deferred.DeferredPointLights.PointLight,Le=i.de.fabmax.kool.createDefaultContext,De=i.de.fabmax.kool.scene.ui.BlurredComponentUi,qe=e.getCallableRef,Be=e.defineInlineFunction,Fe=i.de.fabmax.kool.util.DebugOverlay.Position,Ue=i.de.fabmax.kool.util.DebugOverlay,Ve=e.kotlin.collections.mutableMapOf_qfcya0$,Ge=e.kotlin.collections.List,He=e.kotlin.collections.Map,We=(i.de.fabmax.kool.pipeline.shading.ModeledShader.VertexColor,i.de.fabmax.kool.scene.ui.dp_wl4j30$,i.de.fabmax.kool.scene.ui.uns_8ca0d4$,i.de.fabmax.kool.scene.ui.embeddedUi_4gy91$,i.de.fabmax.kool.pipeline.shading.PbrShader),Ke=e.kotlin.math,Xe=i.de.fabmax.kool.math.MutableVec2f,Ye=i.de.fabmax.kool.util.gltf.loadGltfFile_7e2ead$,Ze=i.de.fabmax.kool.util.gltf.GltfFile.ModelMaterialConfig,Je=i.de.fabmax.kool.math.MutableVec3d_init,Qe=i.de.fabmax.kool.scene.OrbitInputTransform.ZoomMethod,ti=i.de.fabmax.kool.math.Vec3f_init_mx4ult$,ei=i.de.fabmax.kool.pipeline.shading.PhongShader,ii=i.de.fabmax.kool.pipeline.shading.PhongShader.PhongConfig,ni=i.de.fabmax.kool.math.randomF_dleff0$,ri=i.de.fabmax.kool.util.InstancedLodController.Instance,oi=i.de.fabmax.kool.util.InstancedLodController,si=i.de.fabmax.kool.util.MutableColor_init_d7aj7k$,ai=e.kotlin.collections.mutableListOf_i5x0yv$,li=i.de.fabmax.kool.scene.LineMesh,ui=i.de.fabmax.kool.pipeline.shading.ModeledShader.StaticColor,pi=i.de.fabmax.kool.pipeline.SingleColorTexture,ci=i.de.fabmax.kool.pipeline.shadermodel.PbrMaterialNode,hi=i.de.fabmax.kool.scene.Skybox.SkyboxCubeShader,di=Array,fi=i.de.fabmax.kool.pipeline.shadermodel.RefractionSamplerNode,_i=i.de.fabmax.kool.math.randomI,mi=i.de.fabmax.kool.util.ColorGradient_init_5tenyj$,$i=i.de.fabmax.kool.util.ColorGradient,yi=i.de.fabmax.kool.util.PerfTimer,vi=i.de.fabmax.kool.modules.mesh.ListEdgeHandler,gi=i.de.fabmax.kool.modules.mesh.HalfEdgeMesh,bi=i.de.fabmax.kool.modules.mesh.simplification.terminateOnFaceCountRel_14dthe$,xi=i.de.fabmax.kool.modules.mesh.simplification.simplify_hem9$,wi=i.de.fabmax.kool.toString_j6vyb1$,zi=e.kotlin.text.lastIndexOf_8eortd$,ki=e.kotlin.text.lastIndexOf_l5u8uk$,Si=e.kotlin.text.substring_fc3b62$,Ci=i.de.fabmax.kool.util.Log.Level,Ni=i.de.fabmax.kool.util.CascadedShadowMap,Ei=i.de.fabmax.kool.pipeline.shadermodel.PushConstantNode1f,Pi=i.de.fabmax.kool.pipeline.shading.AlphaModeMask,Ti=i.de.fabmax.kool.pipeline.shading.AlphaModeOpaque,Oi=i.de.fabmax.kool.now,Mi=i.de.fabmax.kool.util.spatial.pointKdTree_ffk80x$,ji=e.kotlin.js.internal.FloatCompanionObject,Ai=i.de.fabmax.kool.math.Vec3f_init_czzhiu$,Ri=i.de.fabmax.kool.util.spatial.InRadiusTraverser,Ii=i.de.fabmax.kool.math.PointDistribution,Li=i.de.fabmax.kool.math.MutableVec2f_init,Di=i.de.fabmax.kool.math.BSplineVec2f,qi=e.kotlin.collections.emptyList_287e2$,Bi=e.kotlin.text.split_ip8yn$;function Fi(){tn(),ho.call(this,"Ambient Occlusion"),this.autoRotate_0=!0,this.spotLight_0=!0,this.aoPipeline_953qvj$_0=this.aoPipeline_953qvj$_0,this.shadows_0=M()}function Ui(t,e,i){return function(n){n.setMouseRotation_dleff0$(0,-20),n.unaryPlus_uv0sim$(t.camera),n.zoom=8;var r=n.onUpdate,o=function(t,e,i){return function(n,r){return t.autoRotate_0&&(i.verticalRotation+=3*e.deltaT),s}}(e,i,n);return r.add_11rb$(o),s}}function Vi(t,e,i){return function(n){n.generate_v2sixm$(function(t){return function(e){for(var i=-3;i<=3;i++)for(var n=-3;n<=3;n++){var r=j.atan2(n,i)*A.RAD_2_DEG,o=_(i),a=_(n),l=j.max(o,a)/5;e.color=m.Companion.fromHsv_7b5o5w$(r,l,.75,1).toLinear(),e.transform.push();var u=t;e.translate_y2kzbl$(i,0,n),e.scale_y2kzbl$(.25,.25,.25),e.rotate_ad55pp$(-37.5,$.Companion.Y_AXIS),e.geometry_ejqx55$(u.geometry),e.transform.pop()}return s}}(t));var r=v(function(t,e){return function(i){return i.albedoSource=y.VERTEX_ALBEDO,R(i.shadowMaps,t.shadows_0),i.roughness=.1,i.useScreenSpaceAmbientOcclusion_vv6xll$(t.aoPipeline_0.aoMap),i.useImageBasedLighting_po417x$(e),s}}(e,i));return n.shader=r,s}}function Gi(t,e,i){return function(n){return n.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/brown_planks_03/brown_planks_03_diff_2k.jpg"),n.useOcclusionMap_9sobi5$(Yr().pbrBasePath+"/brown_planks_03/brown_planks_03_AO_2k.jpg"),n.useNormalMap_9sobi5$(Yr().pbrBasePath+"/brown_planks_03/brown_planks_03_Nor_2k.jpg"),n.useRoughnessMap_ivxn3r$(Yr().pbrBasePath+"/brown_planks_03/brown_planks_03_rough_2k.jpg"),n.useScreenSpaceAmbientOcclusion_vv6xll$(t.aoPipeline_0.aoMap),n.useImageBasedLighting_po417x$(e),R(n.shadowMaps,t.shadows_0),i.onDispose.add_11rb$(function(t){return function(e,i){var n,r,o,a;return null!=(n=t.albedoMap)&&n.dispose(),null!=(r=t.occlusionMap)&&r.dispose(),null!=(o=t.normalMap)&&o.dispose(),null!=(a=t.roughnessMap)&&a.dispose(),s}}(n)),s}}function Hi(t,e){return function(i){i.isCastingShadow=!1,i.generate_v2sixm$(function(t){return function(e){e.transform.push();var i=t;e.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var n=e.rectProps.defaults();n.size.set_dleff0$(12,12),n.origin.set_y2kzbl$(n.size.x,n.size.y,0).scale_mx4ult$(-.5),i.setUvs_0(n,.06,0,.1955*n.size.x,.1955*n.size.y),e.rect_e5k3t5$(e.rectProps),e.transform.pop(),e.transform.push();var r=t;e.translate_y2kzbl$(0,-.25,0),e.rotate_ad55pp$(90,$.Companion.X_AXIS);var o=e.rectProps.defaults();o.size.set_dleff0$(12,12),o.origin.set_y2kzbl$(o.size.x,o.size.y,0).scale_mx4ult$(-.5),r.setUvs_0(o,.06,0,.1955*o.size.x,.1955*o.size.y),e.rect_e5k3t5$(e.rectProps),e.transform.pop(),e.transform.push();var a=t;e.translate_y2kzbl$(-6,-.125,0),e.rotate_ad55pp$(90,$.Companion.NEG_Y_AXIS),e.rotate_ad55pp$(90,$.Companion.Z_AXIS);var l=e.rectProps.defaults();l.size.set_dleff0$(.25,12),l.origin.set_y2kzbl$(l.size.x,l.size.y,0).scale_mx4ult$(-.5),a.setUvs_0(l,.06-.1955*l.size.x,0,.1955*l.size.x,.1955*l.size.y),e.rect_e5k3t5$(e.rectProps),e.transform.pop(),e.transform.push();var u=t;e.translate_y2kzbl$(6,-.125,0),e.rotate_ad55pp$(90,$.Companion.Y_AXIS),e.rotate_ad55pp$(-90,$.Companion.Z_AXIS);var p=e.rectProps.defaults();p.size.set_dleff0$(.25,12),p.origin.set_y2kzbl$(p.size.x,p.size.y,0).scale_mx4ult$(-.5),u.setUvs_0(p,2.406,0,.1955*p.size.x,.1955*p.size.y),e.rect_e5k3t5$(e.rectProps),e.transform.pop(),e.transform.push();var c=t;e.translate_y2kzbl$(0,-.125,6);var h=e.rectProps.defaults();h.size.set_dleff0$(12,.25),h.origin.set_y2kzbl$(h.size.x,h.size.y,0).scale_mx4ult$(-.5),c.setUvs_0(h,.06,2.346,.1955*h.size.x,.1955*h.size.y),e.rect_e5k3t5$(e.rectProps),e.transform.pop(),e.transform.push();var d=t;e.translate_y2kzbl$(0,-.125,-6),e.rotate_ad55pp$(180,$.Companion.X_AXIS);var f=e.rectProps.defaults();return f.size.set_dleff0$(12,.25),f.origin.set_y2kzbl$(f.size.x,f.size.y,0).scale_mx4ult$(-.5),d.setUvs_0(f,.06,-.048875,.1955*f.size.x,.1955*f.size.y),e.rect_e5k3t5$(e.rectProps),e.transform.pop(),s}}(t));var n=v(Gi(t,e,i));return i.shader=n,s}}function Wi(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$AoDemo=e,this.local$envMaps=void 0,this.local$$receiver=i}function Ki(t){var e=new $(6,10,-6);return t.setSpot_nve3wz$(e,k(e,-1).norm(),40),t.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.2).toLinear(),500),s}function Xi(t,e){return function(i){return i.toggleButton_8v9fdr$("Enabled",t.aoPipeline_0.isEnabled,function(t){return function(e){return t.aoPipeline_0.isEnabled=e.isEnabled,s}}(t)),i.toggleButton_8v9fdr$("Show AO Map",e.isVisible,function(t){return function(e){return t.isVisible=e.isEnabled,s}}(e)),i.sliderWithValue_xbu91d$("Radius:",t.aoPipeline_0.radius,.1,3,2,void 0,function(t){return function(e){return t.aoPipeline_0.radius=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Power:",D(t.aoPipeline_0.power,10),D(.2,10),D(5,10),2,void 0,function(t){return function(e){var i=t.aoPipeline_0,n=e.value;return i.power=j.pow(10,n),s}}(t)),i.sliderWithValue_xbu91d$("Strength:",t.aoPipeline_0.strength,0,5,2,void 0,function(t){return function(e){return t.aoPipeline_0.strength=e.value,s}}(t)),i.sliderWithValue_xbu91d$("AO Samples:",t.aoPipeline_0.kernelSz,4,128,0,void 0,function(t){return function(e){return t.aoPipeline_0.kernelSz=L(e.value),s}}(t)),i.sliderWithValue_xbu91d$("Map Size:",t.aoPipeline_0.mapSize,.1,1,1,void 0,function(t){return function(e){return t.aoPipeline_0.mapSize=L(10*e.value)/10,s}}(t)),s}}function Yi(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Spot Light",t.spotLight_0,function(t){return function(e){return t.spotLight_0=e.isEnabled,t.updateLighting_0(),s}}(t)),s}}function Zi(){Qi=this}function Ji(t,e){N.call(this,"red2gray",e),this.inRed=t,this.outGray=new P(new E("outGray"),this)}Ji.prototype=Object.create(N.prototype),Ji.prototype.constructor=Ji,Fi.prototype=Object.create(ho.prototype),Fi.prototype.constructor=Fi,ln.prototype=Object.create(Z.prototype),ln.prototype.constructor=ln,en.prototype=Object.create(ho.prototype),en.prototype.constructor=en,Rn.prototype=Object.create(N.prototype),Rn.prototype.constructor=Rn,Ln.prototype=Object.create(N.prototype),Ln.prototype.constructor=Ln,qn.prototype=Object.create(N.prototype),qn.prototype.constructor=qn,Bn.prototype=Object.create(N.prototype),Bn.prototype.constructor=Bn,On.prototype=Object.create(dt.prototype),On.prototype.constructor=On,Un.prototype=Object.create(ut.prototype),Un.prototype.constructor=Un,Kn.prototype=Object.create(N.prototype),Kn.prototype.constructor=Kn,Xn.prototype=Object.create(N.prototype),Xn.prototype.constructor=Xn,Yn.prototype=Object.create(N.prototype),Yn.prototype.constructor=Yn,Vn.prototype=Object.create(ht.prototype),Vn.prototype.constructor=Vn,er.prototype=Object.create(N.prototype),er.prototype.constructor=er,Zn.prototype=Object.create(Wt.prototype),Zn.prototype.constructor=Zn,mr.prototype=Object.create(ut.prototype),mr.prototype.constructor=mr,Mr.prototype=Object.create(dt.prototype),Mr.prototype.constructor=Mr,br.prototype=Object.create(ho.prototype),br.prototype.constructor=br,fo.prototype=Object.create(ho.prototype),fo.prototype.constructor=fo,No.prototype=Object.create(ho.prototype),No.prototype.constructor=No,Eo.prototype=Object.create(ho.prototype),Eo.prototype.constructor=Eo,Ho.prototype=Object.create(ri.prototype),Ho.prototype.constructor=Ho,Bo.prototype=Object.create(ho.prototype),Bo.prototype.constructor=Bo,as.prototype=Object.create(ut.prototype),as.prototype.constructor=as,Zo.prototype=Object.create(ho.prototype),Zo.prototype.constructor=Zo,ds.prototype=Object.create(Ps.prototype),ds.prototype.constructor=ds,$s.prototype=Object.create(ho.prototype),$s.prototype.constructor=$s,qs.prototype=Object.create(Ps.prototype),qs.prototype.constructor=qs,pl.prototype=Object.create(Ps.prototype),pl.prototype.constructor=pl,vl.prototype=Object.create(ut.prototype),vl.prototype.constructor=vl,Sl.prototype=Object.create(ho.prototype),Sl.prototype.constructor=Sl,Ol.prototype=Object.create(ut.prototype),Ol.prototype.constructor=Ol,jl.prototype=Object.create(Z.prototype),jl.prototype.constructor=jl,Al.prototype=Object.create(Z.prototype),Al.prototype.constructor=Al,Rl.prototype=Object.create(ho.prototype),Rl.prototype.constructor=Rl,Ql.prototype=Object.create(N.prototype),Ql.prototype.constructor=Ql,Wl.prototype=Object.create(ho.prototype),Wl.prototype.constructor=Wl,ou.prototype=Object.create(at.prototype),ou.prototype.constructor=ou,su.prototype=Object.create(at.prototype),su.prototype.constructor=su,au.prototype=Object.create(Ii.prototype),au.prototype.constructor=au,Object.defineProperty(Fi.prototype,"aoPipeline_0",{configurable:!0,get:function(){return null==this.aoPipeline_953qvj$_0?o("aoPipeline"):this.aoPipeline_953qvj$_0},set:function(t){this.aoPipeline_953qvj$_0=t}}),Fi.prototype.lateInit_aemszp$=function(t){this.updateLighting_0()},Wi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Wi.prototype=Object.create(z.prototype),Wi.prototype.constructor=Wi,Wi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,Yr().envMapBasePath+"/mossy_forest_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:this.local$envMaps=this.result_0;var t=new c(!0,!1);if(this.state_0=3,this.result_0=h(this.local$$receiver,Yr().modelBasePath+"/teapot.gltf.gz",t,void 0,this),this.result_0===w)return w;continue;case 3:var e=d(this.result_0),i=f(e.meshes.values);return this.local$this$.unaryPlus_uv0sim$(g("teapots",Vi(i,this.local$this$AoDemo,this.local$envMaps))),this.local$this$.unaryPlus_uv0sim$(b("ground",!0,Hi(this.local$this$AoDemo,this.local$envMaps))),this.local$this$.plusAssign_f1kmr1$(x.Skybox.cube_wgmpek$(this.local$envMaps.reflectionMap,1)),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Fi.prototype.setupMainScene_aemszp$=function(t){var e,i,n=new I(null);return n.unaryPlus_uv0sim$(a(n,void 0,Ui(n,this,t))),this.shadows_0.add_11rb$(new l(n,0,2048)),this.aoPipeline_0=u.Companion.createForward_ushge7$(n),t.assetMgr.launch_eln4bt$((e=n,i=this,function(t,n,r){var o=new Wi(e,i,t,this,n);return r?o:o.doResume(null)})),n},Fi.prototype.setUvs_0=function(t,e,i,n,r){t.texCoordUpperLeft.set_dleff0$(e,i),t.texCoordUpperRight.set_dleff0$(e+n,i),t.texCoordLowerLeft.set_dleff0$(e,i+r),t.texCoordLowerRight.set_dleff0$(e+n,i+r)},Fi.prototype.updateLighting_0=function(){var t;for(this.spotLight_0?this.mainScene.lighting.singleLight_q9zcvo$(Ki):this.mainScene.lighting.lights.clear(),t=this.shadows_0.iterator();t.hasNext();)t.next().isShadowMapEnabled=this.spotLight_0},Fi.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,function(t){var i=t.image_3ds0aa$(void 0,new S(e.aoPipeline_0.aoMap,void 0,tn().aoMapColorModel()));i.isVisible=!1;var n=i;return t.section_yfmn31$("Ambient Occlusion",Xi(e,n)),t.section_yfmn31$("Scene",Yi(e)),s}));var e},Zi.prototype.aoMapColorModel=function(){var t=new C("aoMap"),e={v:null},i=new q(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new B(t),r=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("colorTex"),e.v.output),o=n.addNode_u9w9by$(new Ji(r.outColor,n.stage)).outGray;return n.colorOutput_a3v4si$(o),t},Ji.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inRed)},Ji.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outGray.declare()+" = vec4("+this.inRed.ref1f()+", "+this.inRed.ref1f()+", "+this.inRed.ref1f()+", 1.0);")},Ji.$metadata$={kind:T,simpleName:"Red2GrayNode",interfaces:[N]},Zi.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Qi=null;function tn(){return null===Qi&&new Zi,Qi}function en(){gn(),ho.call(this,"Atmosphere"),this.sunColor=m.Companion.WHITE;var t=new lt;t.setDirectional_czzhiu$($.Companion.NEG_Z_AXIS),t.setColor_y83vuj$(this.sunColor,5),this.sun=t,this.sunIntensity_0=1,this.time_0=.5,this.moonTime_0=0,this.animateTime_0=!0,this.timeSlider_0=null,this.textures=pt(),this.deferredPipeline_enh35m$_0=this.deferredPipeline_enh35m$_0,this.atmoShader=new On,this.opticalDepthLutPass_1meau0$_0=this.opticalDepthLutPass_1meau0$_0,this.sceneCompositing_0=null,this.shadows_0=M(),this.earthTransform_0=new ut("earth"),this.camTransform_0=new Un(gn().earthRadius),this.menuContainer_3y52kp$_0=this.menuContainer_3y52kp$_0,this.loadingLabel_8f6fxf$_0=this.loadingLabel_8f6fxf$_0,this.loadingComplete_0=!1,this.sceneSetupComplete_0=!1}function nn(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$AtmosphereDemo=t,this.local$$receiver=e}function rn(t,e,i,n,r){z.call(this,r),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$key=i,this.local$path=n}function on(t){var e=t.sphereProps.icoDefaults();return e.steps=7,e.radius=gn().earthRadius,t.icoSphere_mojs8w$(t.sphereProps),s}function sn(t){return function(e){e.generate_v2sixm$(on);var i=new Vn(t.textures);e.shader=i;var n=i;n.oceanNrmTex=t.textures.get_11rb$(Wn().texOceanNrm);var r=e.onUpdate,o=function(t,e){return function(i,n){var r,o,a,l,u,p,c=X(t.sun.direction).scale_mx4ult$(-1);null!=(o=null!=(r=e.uDirToSun)?r.value:null)&&(o.set_czzhiu$(c),i.toLocalCoords_w1lst9$(o,0));var h=t.cameraHeight*gn().kmPerUnit/100,d=h<0?0:h>1?1:h;return null!=(l=null!=(a=e.uWaterColor)?a.value:null)&&l.set_czzhhz$(gn().waterColorLow.mix_y83vuj$(gn().waterColorHigh,d)),null!=(p=null!=(u=e.uNormalShift)?u.value:null)&&p.set_7b5o5w$(.0051*n.time,.0037*n.time,-.0071*n.time,-.0039*n.time),t.atmoShader.dirToSun=c,s}}(t,n);return r.add_11rb$(o),s}}function an(t){return function(e){e.isFrustumChecked=!1,e.unaryPlus_uv0sim$(new ln(t));var i=e.onUpdate,n=function(t,e){return function(i,n){return t.setIdentity(),t.rotate_ad55pp$(gn().moonInclination,$.Companion.X_AXIS),t.rotate_ad55pp$(360*e.moonTime_0,$.Companion.Y_AXIS),t.translate_y2kzbl$(0,0,gn().moonDist),s}}(e,t);return i.add_11rb$(n),s}}function ln(t){this.$outer=t,Z.call(this,Q([J.Companion.POSITIONS,J.Companion.NORMALS,J.Companion.TEXTURE_COORDS]),"moon"),this.isFrustumChecked=!1,this.generate_v2sixm$(un),this.$outer;var e=new ct;e.useAlbedoMap_daqygw$(this.$outer.textures.get_11rb$(gn().texMoon)),e.roughness=.7,this.shader=new ht(e)}function un(t){t.rotate_ad55pp$(180,$.Companion.Y_AXIS);var e=t.sphereProps.icoDefaults();return e.steps=4,e.radius=gn().moonRadius,t.icoSphere_mojs8w$(t.sphereProps),s}function pn(t){return t.layoutSpec.setOrigin_4ujscr$(tt(),tt(),tt()),t.layoutSpec.setSize_4ujscr$(et(100),et(100),it()),t.textAlignment=new rt(nt.CENTER,nt.CENTER),s}function cn(t){return function(e){return t.colorSlider_0(e,"R:",m.Companion.RED,t.atmoShader.scatteringCoeffs.x,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(e.value),s}}(t)),t.colorSlider_0(e,"G:",m.Companion.GREEN,t.atmoShader.scatteringCoeffs.y,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(void 0,e.value),s}}(t)),t.colorSlider_0(e,"B:",m.Companion.BLUE,t.atmoShader.scatteringCoeffs.z,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(void 0,void 0,e.value),s}}(t)),e.gap_mx4ult$(8),e.sliderWithValueSmall_jjtbof$("Pow:",t.atmoShader.scatteringCoeffPow,1,20,2,void 0,10,void 0,function(t){return function(e){return t.atmoShader.scatteringCoeffPow=e.value,s}}(t)),e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.scatteringCoeffStrength,.01,5,2,void 0,10,void 0,function(t){return function(e){return t.atmoShader.scatteringCoeffStrength=e.value,s}}(t)),s}}function hn(t){return function(e){return t.colorSlider_0(e,"R:",m.Companion.RED,t.atmoShader.rayleighColor.r,0,4,function(t){return function(e){return t.updateRayleighColor_0(e.value),s}}(t)),t.colorSlider_0(e,"G:",m.Companion.GREEN,t.atmoShader.rayleighColor.g,0,4,function(t){return function(e){return t.updateRayleighColor_0(void 0,e.value),s}}(t)),t.colorSlider_0(e,"B:",m.Companion.BLUE,t.atmoShader.rayleighColor.b,0,4,function(t){return function(e){return t.updateRayleighColor_0(void 0,void 0,e.value),s}}(t)),e.gap_mx4ult$(8),e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.rayleighColor.a,0,2,void 0,void 0,10,void 0,function(t){return function(e){return t.updateRayleighColor_0(void 0,void 0,void 0,e.value),s}}(t)),s}}function dn(t){return function(e){return e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.mieColor.a,0,2,void 0,void 0,10,void 0,function(t){return function(e){return t.updateMieColor_0(void 0,void 0,void 0,e.value),s}}(t)),e.sliderWithValueSmall_jjtbof$("g:",t.atmoShader.mieG,.5,.999,3,void 0,10,void 0,function(t){return function(e){return t.atmoShader.mieG=e.value,s}}(t)),s}}function fn(t){return ot(t,0)+" km"}function _n(t){return function(e){var i=fn;return e.sliderWithValueSmall_jjtbof$("Thickness:",(t.atmoShader.atmosphereRadius-gn().earthRadius)*gn().kmPerUnit,10,1e3,void 0,i,24,void 0,function(t){return function(e){return t.updateAtmosphereThickness_0(e.value),s}}(t)),e.sliderWithValueSmall_jjtbof$("Falloff:",t.opticalDepthLutPass_0.densityFalloff,0,15,2,void 0,24,void 0,function(t){return function(e){return t.opticalDepthLutPass_0.densityFalloff=e.value,s}}(t)),s}}function mn(t){var e=24*t,i=st(e),n=st(e%1*60),r=n<10?"0":"";return i.toString()+":"+r+n}function $n(t){return function(e){e.sliderWithValueSmall_jjtbof$("Sun:",t.atmoShader.sunColor.a,.1,5,2,void 0,24,void 0,function(t){return function(e){return t.sunIntensity_0=e.value,t.updateSun_0(),s}}(t));var i=mn;t.timeSlider_0=e.sliderWithValueSmall_jjtbof$("Time:",t.time_0,0,1,void 0,i,24,void 0,function(t){return function(e){return t.time_0=e.value,t.updateSun_0(),s}}(t)),e.toggleButton_8v9fdr$("Animate Time",t.animateTime_0,function(t){return function(e){return t.animateTime_0=e.isEnabled,s}}(t));var n=e.textWithValue_puj7f4$("Camera Height:",""),r=t;return n.onUpdate.add_11rb$(function(t,e){return function(i,n){var r=t.cameraHeight*gn().kmPerUnit;return e.text=ot(r,1)+" km",s}}(r,n)),s}}function yn(){vn=this,this.kmPerUnit=100,this.earthRadius=6e3/this.kmPerUnit,this.moonRadius=1750/this.kmPerUnit,this.moonDistScale=.25,this.moonDist=384400/this.kmPerUnit*this.moonDistScale,this.moonInclination=5.145;var t=this.moonDist/this.moonDistScale;this.keplerC=j.pow(t,3)/j.pow(27.32,2);var e=this.moonDist;this.moonT=j.pow(e,3)/this.keplerC,this.waterColorLow=m.Companion.fromHex_61zpoe$("0D1F56").toLinear(),this.waterColorHigh=m.Companion.fromHex_61zpoe$("020514").toLinear(),this.texMilkyway="Milkyway",this.texSun="Sun",this.texSunBg="Sun Background",this.texMoon="Moon"}Fi.$metadata$={kind:T,simpleName:"AoDemo",interfaces:[ho]},Object.defineProperty(en.prototype,"deferredPipeline",{configurable:!0,get:function(){return null==this.deferredPipeline_enh35m$_0?o("deferredPipeline"):this.deferredPipeline_enh35m$_0},set:function(t){this.deferredPipeline_enh35m$_0=t}}),Object.defineProperty(en.prototype,"opticalDepthLutPass_0",{configurable:!0,get:function(){return null==this.opticalDepthLutPass_1meau0$_0?o("opticalDepthLutPass"):this.opticalDepthLutPass_1meau0$_0},set:function(t){this.opticalDepthLutPass_1meau0$_0=t}}),Object.defineProperty(en.prototype,"menuContainer_0",{configurable:!0,get:function(){return null==this.menuContainer_3y52kp$_0?o("menuContainer"):this.menuContainer_3y52kp$_0},set:function(t){this.menuContainer_3y52kp$_0=t}}),Object.defineProperty(en.prototype,"loadingLabel_0",{configurable:!0,get:function(){return null==this.loadingLabel_8f6fxf$_0?o("loadingLabel"):this.loadingLabel_8f6fxf$_0},set:function(t){this.loadingLabel_8f6fxf$_0=t}}),Object.defineProperty(en.prototype,"cameraHeight",{configurable:!0,get:function(){return this.mainScene.camera.globalPos.distance_czzhiu$($.Companion.ZERO)-gn().earthRadius}}),nn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},nn.prototype=Object.create(z.prototype),nn.prototype.constructor=nn,nn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=U(F,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,gn().texMilkyway,Yr().awsBaseUrl+"/solarsystem/milkyway-dark.jpg",this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,gn().texSun,Yr().awsBaseUrl+"/solarsystem/sun.png",this),this.result_0===w)return w;continue;case 4:if(this.state_0=5,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,gn().texSunBg,Yr().awsBaseUrl+"/solarsystem/sun_bg.png",this),this.result_0===w)return w;continue;case 5:if(this.state_0=6,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,gn().texMoon,Yr().awsBaseUrl+"/solarsystem/moon.jpg",this),this.result_0===w)return w;continue;case 6:if(this.state_0=7,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Wn().texEarthDay,Yr().awsBaseUrl+"/solarsystem/earth_day.jpg",this),this.result_0===w)return w;continue;case 7:if(this.state_0=8,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Wn().texEarthNight,Yr().awsBaseUrl+"/solarsystem/earth_night.jpg",this),this.result_0===w)return w;continue;case 8:if(this.state_0=9,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Wn().texEarthNrm,Yr().awsBaseUrl+"/solarsystem/earth_nrm.jpg",this),this.result_0===w)return w;continue;case 9:if(this.state_0=10,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Wn().texEarthHeight,Yr().awsBaseUrl+"/solarsystem/earth_height.jpg",this),this.result_0===w)return w;continue;case 10:if(this.state_0=11,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Wn().texOceanNrm,Yr().awsBaseUrl+"/solarsystem/oceanNrm.jpg",this),this.result_0===w)return w;continue;case 11:if(this.local$this$AtmosphereDemo.loadingLabel_0.text="Initializing Scene...",this.state_0=12,this.result_0=U(V,this),this.result_0===w)return w;continue;case 12:return this.local$this$AtmosphereDemo.loadingComplete_0=!0,s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},en.prototype.lateInit_aemszp$=function(t){var e,i=this.camTransform_0;this.mainScene.registerDragHandler_y44tw7$(i),i.unaryPlus_uv0sim$(this.mainScene.camera),t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var r=new nn(e,t,this,i);return n?r:r.doResume(null)}))},rn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},rn.prototype=Object.create(z.prototype),rn.prototype.constructor=rn,rn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.$this.loadingLabel_0.text='Loading texture "'+this.local$key+'"...',this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(this.local$path,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.$this.textures,e=this.result_0;return void t.put_xwzc9p$(this.local$key,e);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},en.prototype.loadTex_0=function(t,e,i,n,r){var o=new rn(this,t,e,i,n);return r?o:o.doResume(null)},en.prototype.setupMainScene_aemszp$=function(t){var i=new I(null);this.opticalDepthLutPass_0=new Zn,i.addOffscreenPass_m1c2kf$(this.opticalDepthLutPass_0),i.lighting.lights.clear();var n=i.lighting.lights,r=this.sun;n.add_11rb$(r);var o=this.shadows_0,a=new l(i,0);o.add_11rb$(a);var u=new G;u.isWithEmissive=!0,u.isWithAmbientOcclusion=!1,u.isWithScreenSpaceReflections=!1,u.maxGlobalLights=1,u.shadowMaps=this.shadows_0;var p=u;this.deferredPipeline=new H(i,p),this.deferredPipeline.pbrPass.sceneShader.ambient=new m(.05,.05,.05).toLinear();var c,h,d=this.atmoShader;for(d.opticalDepthLut=this.opticalDepthLutPass_0.colorTexture,d.sceneColor=this.deferredPipeline.pbrPass.colorTexture,d.scenePos=this.deferredPipeline.mrtPass.positionAo,d.surfaceRadius=gn().earthRadius,d.atmosphereRadius=6500/gn().kmPerUnit,d.scatteringCoeffs=new $(.75,1.15,1.35),d.rayleighColor=new m(.5,.5,1,1),d.mieColor=new m(1,.35,.35,1),d.mieG=.995,d.scatteringCoeffStrength=1,c=this.shadows_0.iterator();c.hasNext();){var f=c.next();f.drawNode=this.deferredPipeline.contentGroup,f.shadowBounds=this.earthTransform_0.bounds}return i.onUpdate.add_11rb$((h=this,function(t,i){var n,r;if(h.loadingComplete_0){h.sceneSetupComplete_0||(h.sceneSetupComplete_0=!0,h.finalizeSceneSetup_0(h.deferredPipeline));var o=e.isType(n=h.mainScene.camera,W)?n:K(),a=o.globalPos.length()-gn().earthRadius;o.position.set_czzhiu$($.Companion.ZERO),o.lookAt.set_czzhiu$($.Companion.NEG_Z_AXIS);var l,u=.5*a;if(l=u<.003?.003:u>5?5:u,o.clipNear=l,o.clipFar=1e3*o.clipNear,h.animateTime_0){var p=i.deltaT/120;null!=(r=h.timeSlider_0)&&(r.value=(h.time_0+p)%1),h.moonTime_0=h.moonTime_0+p/gn().moonT}}return s})),i.onDispose.add_11rb$(function(t){return function(e,i){var n;for(n=t.textures.values.iterator();n.hasNext();)n.next().dispose();return s}}(this)),i},en.prototype.finalizeSceneSetup_0=function(t){this.menuContainer_0.isVisible=!0,this.loadingLabel_0.isVisible=!1,this.setupContent_0(t.contentGroup),this.sceneCompositing_0=new bn(this),this.updateSun_0()},en.prototype.setupContent_0=function(t){var e,i,n=this.earthTransform_0;n.unaryPlus_uv0sim$(this.camTransform_0),n.unaryPlus_uv0sim$(b(void 0,!0,sn(this))),n.onUpdate.add_11rb$((e=n,i=this,function(t,n){return e.setIdentity(),e.rotate_ad55pp$(23.44,$.Companion.NEG_X_AXIS),e.rotate_ad55pp$(360*i.time_0,$.Companion.Y_AXIS),s})),t.unaryPlus_uv0sim$(n),t.unaryPlus_uv0sim$(Y(void 0,an(this)))},ln.prototype.collectDrawCommands_kma0q5$=function(t){var i=t.camera;if(e.isType(i,W)){var n=i.clipNear,r=i.clipFar,o=this.globalCenter.distance_czzhiu$(i.globalPos)+gn().moonRadius,s=o>r;s&&(i.clipFar=o,i.clipNear=o/1e3,i.updateCamera_fd1mc0$(t.ctx,t.viewport)),Z.prototype.collectDrawCommands_kma0q5$.call(this,t),s&&(i.clipNear=n,i.clipFar=r,i.updateCamera_fd1mc0$(t.ctx,t.viewport))}else Z.prototype.collectDrawCommands_kma0q5$.call(this,t)},ln.$metadata$={kind:T,simpleName:"Moon",interfaces:[Z]},en.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,function(t){var i=t.uiRoot,n=e;return n.loadingLabel_0=i.label_tokfmu$("Loading...",pn),i.unaryPlus_uv0sim$(n.loadingLabel_0),e.menuContainer_0=t.menuContainer,t.menuContainer.isVisible=!1,t.menuWidth=380,t.section_yfmn31$("Scattering",cn(e)),t.section_yfmn31$("Rayleigh",hn(e)),t.section_yfmn31$("Mie",dn(e)),t.section_yfmn31$("Atmosphere",_n(e)),t.section_yfmn31$("View",$n(e)),s}));var e},en.prototype.updateSun_0=function(){var t=new at(0,0,-1);this.atmoShader.dirToSun=t,this.atmoShader.sunColor=this.sunColor.withAlpha_mx4ult$(this.sunIntensity_0);var e=this.mainScene.lighting.lights.get_za3lpa$(0);e.setDirectional_czzhiu$(X(t).scale_mx4ult$(-1)),e.setColor_y83vuj$(this.sunColor,5*this.sunIntensity_0)},en.prototype.updateRayleighColor_0=function(t,e,i,n){void 0===t&&(t=this.atmoShader.rayleighColor.r),void 0===e&&(e=this.atmoShader.rayleighColor.g),void 0===i&&(i=this.atmoShader.rayleighColor.b),void 0===n&&(n=this.atmoShader.rayleighColor.a),this.atmoShader.rayleighColor=new m(t,e,i,n)},en.prototype.updateMieColor_0=function(t,e,i,n){void 0===t&&(t=this.atmoShader.mieColor.r),void 0===e&&(e=this.atmoShader.mieColor.g),void 0===i&&(i=this.atmoShader.mieColor.b),void 0===n&&(n=this.atmoShader.mieColor.a),this.atmoShader.mieColor=new m(t,e,i,n)},en.prototype.updateScatteringCoeffs_0=function(t,e,i){void 0===t&&(t=this.atmoShader.scatteringCoeffs.x),void 0===e&&(e=this.atmoShader.scatteringCoeffs.y),void 0===i&&(i=this.atmoShader.scatteringCoeffs.z),this.atmoShader.scatteringCoeffs=new $(t,e,i)},en.prototype.updateAtmosphereThickness_0=function(t){var e=gn().earthRadius+t/gn().kmPerUnit;this.atmoShader.atmosphereRadius=e,this.opticalDepthLutPass_0.atmosphereRadius=e},en.prototype.colorSlider_0=function(t,e,i,n,r,o,s){var a=t.sliderWithValueSmall_jjtbof$(e,n,r,o,void 0,void 0,10,void 0,s);return a.knobColor.setCustom_11rb$(i),a.trackColorHighlighted.setCustom_11rb$(i.mix_y83vuj$(m.Companion.BLACK,.5)),a},yn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var vn=null;function gn(){return null===vn&&new yn,vn}function bn(t){this.atmosphereDemo=t;var e=this.atmosphereDemo.mainScene;this.compositeDepth_0(e),this.compositeSkybox_0(e),this.compositeColor_0(e)}function xn(t){return t.rectProps.defaults().mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function wn(t){return t.rectProps.defaults().mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function zn(t,e,i){return t.depthTest=ft.ALWAYS,s}function kn(t){return function(i){i.isFrustumChecked=!1,i.generate_v2sixm$(wn);var n=new C,r={v:null},o=new q(n);r.v=o.stageInterfaceNode_iikjwn$("ifTexCoords",o.attrTexCoords().output),o.positionOutput=o.fullScreenQuadPositionNode_r20yfm$(o.attrTexCoords().output).outQuadPos;var a=new B(n);a.depthOutput_r20yfm$(a.textureSamplerNode_ce41yx$(a.textureNode_61zpoe$("sceneDepth"),r.v.output).outColor),a.colorOutput_a3v4si$(a.constVec4f_czzhhz$(m.Companion.BLACK));var l=new dt(n),u=t;return l.onPipelineSetup.add_11rb$(zn),l.onPipelineCreated.add_11rb$(function(t,i){return function(n,r,o){var a,l,u=i.model;t:do{var p;for(a=wt.ALL,p=u.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&a.mask)){var h,f=c.nodes,_=M();for(h=f.iterator();h.hasNext();){var m=h.next();e.isType(m,_t)&&_.add_11rb$(m)}var $=zt(_);if(null!=$){l=$;break t}}}l=null}while(0);return d(l).sampler.texture=t.atmosphereDemo.deferredPipeline.mrtPass.depthTexture,s}}(u,l)),i.shader=l,s}}function Sn(t){return t.texCoord.x=1-t.texCoord.x,s}function Cn(t){return t.vertexModFun=Sn,t.sphereProps.uvDefaults().steps=10,t.uvSphere_mojs8w$(t.sphereProps),s}function Nn(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(3,3),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.origin.z=-10,t.rect_e5k3t5$(t.rectProps),s}function En(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.origin.z=-10,t.rect_e5k3t5$(t.rectProps),s}function Pn(t,e,i,n){return function(r){r.isFrustumChecked=!1,r.unaryPlus_uv0sim$(t),r.rotate_ad55pp$(-60,$.Companion.X_AXIS);var o=r.onUpdate,a=function(t,e,i){return function(n,r){var o=t.atmosphereDemo.atmoShader.atmosphereRadius-t.atmosphereDemo.atmoShader.surfaceRadius,a=t.atmosphereDemo.cameraHeight/o,l=1.25*((a<.2?.2:a>1?1:a)-.2),u=X(t.atmosphereDemo.mainScene.camera.globalPos).norm(),p=1-(1-l)*(1-mt(.1,.3,u.times_czzhiu$(t.atmosphereDemo.sun.direction))),c=new m(p,p,p,1);return d(e.v).color=c,d(i.v).color=c.withAlpha_mx4ult$(.75),s}}(e,i,n);return o.add_11rb$(a),s}}function Tn(t,e,i){return t.cullMethod=xt.NO_CULLING,t.depthTest=ft.LESS_EQUAL,s}function On(){var t;An(),dt.call(this,An().atmosphereModel_0()),this.opticalDepthLutNode_0=null,this.sceneColorNode_0=null,this.scenePosNode_0=null,this.atmosphereNode_0=null,this.opticalDepthLut_p8nvlg$_0=null,this.sceneColor_bwjq5t$_0=null,this.scenePos_th0mjk$_0=null,this.dirToSun_auak70$_0=new $(0,0,1),this.sunColor_wzy3ch$_0=m.Companion.WHITE,this.scatteringCoeffPow_atsxc5$_0=4.5,this.scatteringCoeffStrength_31rdhy$_0=1,this.scatteringCoeffs_4w0w4q$_0=new $(.5,.8,1),this.rayleighColor_1rrtao$_0=new m(.75,.75,.75,1),this.mieColor_ii078u$_0=new m(1,.9,.8,.3),this.mieG_ochup6$_0=.99,this.planetCenter_3pilph$_0=$.Companion.ZERO,this.surfaceRadius_rmfofh$_0=600,this.atmosphereRadius_w8w0fo$_0=609,this.onPipelineSetup.add_11rb$(Fn),this.onPipelineCreated.add_11rb$((t=this,function(i,n,r){var o,a,l,u,p,c,h,d,f,_=t,m=t.model;t:do{var $;for(d=wt.ALL,$=m.stages.values.iterator();$.hasNext();){var y=$.next();if(0!=(y.stage.mask&d.mask)){var v,g,b=y.nodes;e:do{var x;for(x=b.iterator();x.hasNext();){var w=x.next();if(Rt(w.name,"tOpticalDepthLut")&&e.isType(w,_t)){g=w;break e}}g=null}while(0);var z=null==(v=g)||e.isType(v,_t)?v:K();if(null!=z){f=z;break t}}}f=null}while(0);_.opticalDepthLutNode_0=f,null!=(a=null!=(o=t.opticalDepthLutNode_0)?o.sampler:null)&&(a.texture=t.opticalDepthLut);var k,S,C=t,N=t.model;t:do{var E;for(k=wt.ALL,E=N.stages.values.iterator();E.hasNext();){var P=E.next();if(0!=(P.stage.mask&k.mask)){var T,O,j=P.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var R=A.next();if(Rt(R.name,"tSceneColor")&&e.isType(R,_t)){O=R;break e}}O=null}while(0);var I=null==(T=O)||e.isType(T,_t)?T:K();if(null!=I){S=I;break t}}}S=null}while(0);C.sceneColorNode_0=S,null!=(u=null!=(l=t.sceneColorNode_0)?l.sampler:null)&&(u.texture=t.sceneColor);var L,D,q=t,B=t.model;t:do{var F;for(L=wt.ALL,F=B.stages.values.iterator();F.hasNext();){var U=F.next();if(0!=(U.stage.mask&L.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var X=W.next();if(Rt(X.name,"tScenePos")&&e.isType(X,_t)){G=X;break e}}G=null}while(0);var Y=null==(V=G)||e.isType(V,_t)?V:K();if(null!=Y){D=Y;break t}}}D=null}while(0);q.scenePosNode_0=D,null!=(c=null!=(p=t.scenePosNode_0)?p.sampler:null)&&(c.texture=t.scenePos);var Z,J,Q=t,tt=t.model;t:do{var et;for(Z=wt.ALL,et=tt.stages.values.iterator();et.hasNext();){var it=et.next();if(0!=(it.stage.mask&Z.mask)){var nt,rt=it.nodes,ot=M();for(nt=rt.iterator();nt.hasNext();){var st=nt.next();e.isType(st,Bn)&&ot.add_11rb$(st)}var at=zt(ot);if(null!=at){J=at;break t}}}J=null}while(0);if(Q.atmosphereNode_0=J,null!=(h=t.atmosphereNode_0)){var lt=t;h.uDirToSun.value.set_czzhiu$(lt.dirToSun),h.uPlanetCenter.value.set_czzhiu$(lt.planetCenter),h.uSurfaceRadius.value=lt.surfaceRadius,h.uAtmosphereRadius.value=lt.atmosphereRadius,h.uRayleighColor.value.set_czzhhz$(lt.rayleighColor),h.uMieColor.value.set_czzhhz$(lt.mieColor),h.uMieG.value=lt.mieG,h.uSunColor.value.set_czzhhz$(lt.sunColor),lt.updateScatteringCoeffs_0()}return s}))}function Mn(){jn=this}en.$metadata$={kind:T,simpleName:"AtmosphereDemo",interfaces:[ho]},bn.prototype.compositeColor_0=function(t){var e;t.unaryPlus_uv0sim$(b(void 0,void 0,(e=this,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(xn),t.shader=e.atmosphereDemo.atmoShader,s})))},bn.prototype.compositeDepth_0=function(t){t.unaryPlus_uv0sim$(b(void 0,void 0,kn(this)))},bn.prototype.compositeSkybox_0=function(t){var e,i,n={v:null},r={v:null},o=b(void 0,void 0,(e=this,i=n,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(Cn),i.v=e.skyboxShader_0(e.atmosphereDemo.textures.get_11rb$(gn().texMilkyway)),t.shader=i.v,s})),a=b(void 0,void 0,function(t,e){return function(i){return i.isFrustumChecked=!1,i.generate_v2sixm$(Nn),e.v=t.skyboxShader_0(t.atmosphereDemo.textures.get_11rb$(gn().texSunBg)),i.shader=e.v,s}}(this,r)),l=b(void 0,void 0,function(t){return function(e){return e.isFrustumChecked=!1,e.generate_v2sixm$(En),e.shader=t.skyboxShader_0(t.atmosphereDemo.textures.get_11rb$(gn().texSun)),s}}(this));t.unaryPlus_uv0sim$(Y(void 0,Pn(o,this,n,r))),t.unaryPlus_uv0sim$(a),t.unaryPlus_uv0sim$(l)},bn.prototype.skyboxShader_0=function(t){var i=new $t;i.alphaMode=new yt,i.useColorMap_daqygw$(t,!0),i.color=m.Companion.WHITE;var n,r,o=i,s=vt.Companion.defaultUnlitModel_ws3dmo$(o),a=new q(s);t:do{var l;for(n=wt.ALL,l=s.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&n.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,gt)&&h.add_11rb$(f)}var _=zt(h);if(null!=_){r=_;break t}}}r=null}while(0);var $=d(r);a.positionOutput=a.addNode_u9w9by$(new bt($,a.attrPositions().output,a.stage)).outPosition;var y=new vt(o,s);return y.onPipelineSetup.add_11rb$(Tn),y},bn.$metadata$={kind:T,simpleName:"AtmosphereSceneCompositing",interfaces:[]},Object.defineProperty(On.prototype,"opticalDepthLut",{configurable:!0,get:function(){return this.opticalDepthLut_p8nvlg$_0},set:function(t){var e,i;this.opticalDepthLut_p8nvlg$_0=t,null!=(i=null!=(e=this.opticalDepthLutNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(On.prototype,"sceneColor",{configurable:!0,get:function(){return this.sceneColor_bwjq5t$_0},set:function(t){var e,i;this.sceneColor_bwjq5t$_0=t,null!=(i=null!=(e=this.sceneColorNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(On.prototype,"scenePos",{configurable:!0,get:function(){return this.scenePos_th0mjk$_0},set:function(t){var e,i;this.scenePos_th0mjk$_0=t,null!=(i=null!=(e=this.scenePosNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(On.prototype,"dirToSun",{configurable:!0,get:function(){return this.dirToSun_auak70$_0},set:function(t){var e,i,n;this.dirToSun_auak70$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uDirToSun:null)?i.value:null)&&n.set_czzhiu$(t)}}),Object.defineProperty(On.prototype,"sunColor",{configurable:!0,get:function(){return this.sunColor_wzy3ch$_0},set:function(t){var e,i,n;this.sunColor_wzy3ch$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uSunColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(On.prototype,"scatteringCoeffPow",{configurable:!0,get:function(){return this.scatteringCoeffPow_atsxc5$_0},set:function(t){this.scatteringCoeffPow_atsxc5$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(On.prototype,"scatteringCoeffStrength",{configurable:!0,get:function(){return this.scatteringCoeffStrength_31rdhy$_0},set:function(t){this.scatteringCoeffStrength_31rdhy$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(On.prototype,"scatteringCoeffs",{configurable:!0,get:function(){return this.scatteringCoeffs_4w0w4q$_0},set:function(t){this.scatteringCoeffs_4w0w4q$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(On.prototype,"rayleighColor",{configurable:!0,get:function(){return this.rayleighColor_1rrtao$_0},set:function(t){var e,i,n;this.rayleighColor_1rrtao$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uRayleighColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(On.prototype,"mieColor",{configurable:!0,get:function(){return this.mieColor_ii078u$_0},set:function(t){var e,i,n;this.mieColor_ii078u$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uMieColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(On.prototype,"mieG",{configurable:!0,get:function(){return this.mieG_ochup6$_0},set:function(t){var e,i;this.mieG_ochup6$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uMieG:null)&&(i.value=t)}}),Object.defineProperty(On.prototype,"planetCenter",{configurable:!0,get:function(){return this.planetCenter_3pilph$_0},set:function(t){var e,i,n;this.planetCenter_3pilph$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uPlanetCenter:null)?i.value:null)&&n.set_czzhiu$(t)}}),Object.defineProperty(On.prototype,"surfaceRadius",{configurable:!0,get:function(){return this.surfaceRadius_rmfofh$_0},set:function(t){var e,i;this.surfaceRadius_rmfofh$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uSurfaceRadius:null)&&(i.value=t)}}),Object.defineProperty(On.prototype,"atmosphereRadius",{configurable:!0,get:function(){return this.atmosphereRadius_w8w0fo$_0},set:function(t){var e,i;this.atmosphereRadius_w8w0fo$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uAtmosphereRadius:null)&&(i.value=t)}}),On.prototype.updateScatteringCoeffs_0=function(){var t,e,i;if(null!=(i=null!=(e=null!=(t=this.atmosphereNode_0)?t.uScatteringCoeffs:null)?e.value:null)){var n=this.scatteringCoeffs.x,r=this.scatteringCoeffPow;i.x=j.pow(n,r)*this.scatteringCoeffStrength;var o=this.scatteringCoeffs.y,s=this.scatteringCoeffPow;i.y=j.pow(o,s)*this.scatteringCoeffStrength;var a=this.scatteringCoeffs.z,l=this.scatteringCoeffPow;i.z=j.pow(a,l)*this.scatteringCoeffStrength}},Mn.prototype.atmosphereModel_0=function(){var t=new C,e={v:null},i={v:null},n={v:null},r=new q(t);e.v=r.mvpNode();var o=r.attrTexCoords().output,s=r.addNode_u9w9by$(new Rn(r.stage));s.inScreenPos=o;var a=s;n.v=r.stageInterfaceNode_iikjwn$("ifViewDir",a.outViewDir),i.v=r.stageInterfaceNode_iikjwn$("ifTexCoords",o),r.positionOutput=r.fullScreenQuadPositionNode_r20yfm$(o).outQuadPos;var l=new B(t);l.addNode_u9w9by$(new qn(l.stage));var u=e.v.addToStage_llmhyc$(l.stage),p=l.textureNode_61zpoe$("tOpticalDepthLut"),c=l.textureSamplerNode_ce41yx$(l.textureNode_61zpoe$("tSceneColor"),i.v.output).outColor,h=l.textureSamplerNode_ce41yx$(l.textureNode_61zpoe$("tScenePos"),i.v.output).outColor,d=l.addNode_u9w9by$(new Ln(l.stage));d.inViewPos=h;var f=d,_=l.addNode_u9w9by$(new Bn(p,l.stage));_.inSceneColor=c,_.inScenePos=f.outWorldPos,_.inViewDepth=l.splitNode_500t7j$(h,"z").output,_.inCamPos=u.outCamPos,_.inLookDir=n.v.output;var m=_;return l.colorOutput_a3v4si$(l.hdrToLdrNode_r20yfm$(m.outColor).outColor),t},Mn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var jn=null;function An(){return null===jn&&new Mn,jn}function Rn(t){N.call(this,"xyToViewDir",t),this.uInvViewProjMat_0=new kt("uInvViewProjMat"),this.inScreenPos=new P(new Ct(St.Companion.ZERO)),this.outViewDir=new P(new Nt(this.name+"_outWorldPos"),this)}function In(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewProjMat_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.uInvViewProjMat_0.value.set_d4zu6l$(i.renderPass.camera.invViewProj),s}}(t),s}}function Ln(t){N.call(this,"view2worldPos",t),this.uInvViewMat_0=new kt("uInvViewMat"),this.inViewPos=new P(new Et($.Companion.ZERO)),this.outWorldPos=new P(new E(this.name+"_outWorldPos"),this)}function Dn(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewMat_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.uInvViewMat_0.value.set_d4zu6l$(i.renderPass.camera.invView),s}}(t),s}}function qn(t){N.call(this,"raySphereIntersection",t)}function Bn(t,e){N.call(this,"atmosphereNode",e),this.opticalDepthLut=t,this.inSceneColor=new P(new Pt(m.Companion.MAGENTA)),this.inScenePos=new P(new Et($.Companion.ZERO)),this.inViewDepth=new P(new Tt(-1)),this.inCamPos=new P(new Et($.Companion.ZERO)),this.inLookDir=new P(new Et($.Companion.Z_AXIS)),this.uDirToSun=new Ot("uDirToSun"),this.uPlanetCenter=new Ot("uPlanetCenter"),this.uSurfaceRadius=new Mt("uSurfaceRadius"),this.uAtmosphereRadius=new Mt("uAtmosphereRadius"),this.uScatteringCoeffs=new Ot("uScatteringCoeffs"),this.uMieG=new Mt("uMieG"),this.uMieColor=new jt("uMieColor"),this.uRayleighColor=new jt("uRayleighColor"),this.uSunColor=new jt("uSunColor"),this.outColor=new P(new E("outColor"),this)}function Fn(t,e,i){return t.depthTest=ft.DISABLED,t.blendMode=At.BLEND_ADDITIVE,s}function Un(t){var e;ut.call(this),this.earthRadius=t,this.planetRotX=0,this.planetRotY=0,this.lookRotX=0,this.lookRotY=0,this.camRotX=0,this.zoom=2,this.minZoom=.001,this.maxZoom=20,this.planetRot_0=new It,this.lookRot_0=new It,this.camRot_0=new It,this.planetRot_0.rotate_5820x2$(13,Lt.Companion.Y_AXIS),this.planetRot_0.rotate_5820x2$(40,Lt.Companion.NEG_X_AXIS),this.onUpdate.add_11rb$((e=this,function(t,i){var n=e.invTransform.transform_j7uy7i$(Dt(Lt.Companion.X_AXIS),0),r=e.invTransform.transform_j7uy7i$(Dt(Lt.Companion.Y_AXIS),0);return e.lookRot_0.setIdentity(),e.lookRot_0.rotate_5820x2$(e.lookRotY,Lt.Companion.Z_AXIS),e.lookRot_0.rotate_5820x2$(e.lookRotX,Lt.Companion.X_AXIS),e.camRot_0.setIdentity(),e.camRot_0.rotate_5820x2$(e.camRotX,Lt.Companion.X_AXIS),e.lookRot_0.transform_j7uy7i$(n,0),e.lookRot_0.transform_j7uy7i$(r,0),e.planetRot_0.rotate_5820x2$(e.planetRotX,n),e.planetRot_0.rotate_5820x2$(e.planetRotY,r),e.setIdentity(),e.mul_d4zu6l$(e.planetRot_0),e.translate_y2kzbl$(0,0,e.earthRadius),e.mul_d4zu6l$(e.lookRot_0),e.translate_y2kzbl$(0,0,e.earthRadius*e.zoom),e.mul_d4zu6l$(e.camRot_0),s}))}function Vn(t,i){var n;Wn(),void 0===i&&(i=Wn().shaderConfig_wmdeeb$(t)),ht.call(this,i,Wn().model_2ufela$(i)),this.tOcean_0=null,this.oceanNrmTex_42rp2f$_0=null,this.uDirToSun=null,this.uNormalShift=null,this.uWaterColor=null,this.onPipelineCreated.add_11rb$((n=this,function(t,i,r){var o,a,l,u,p,c,h=n,d=n.model;t:do{var f;for(p=wt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(Rt(g.name,"uDirToSun")&&e.isType(g,Ht)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,Ht)?m:K();if(null!=b){c=b;break t}}}c=null}while(0);h.uDirToSun=null!=(o=c)?o.uniform:null;var x,w,z=n.model;t:do{var k;for(x=wt.ALL,k=z.stages.values.iterator();k.hasNext();){var S=k.next();if(0!=(S.stage.mask&x.mask)){var C,N=S.nodes,E=M();for(C=N.iterator();C.hasNext();){var P=C.next();e.isType(P,Yn)&&E.add_11rb$(P)}var T=zt(E);if(null!=T){w=T;break t}}}w=null}while(0);if(null!=(a=w)){var O=n;O.uNormalShift=a.uNormalShift,O.uWaterColor=a.uWaterColor}var j,A,R=n,I=n.model;t:do{var L;for(j=wt.ALL,L=I.stages.values.iterator();L.hasNext();){var D=L.next();if(0!=(D.stage.mask&j.mask)){var q,B,F=D.nodes;e:do{var U;for(U=F.iterator();U.hasNext();){var V=U.next();if(Rt(V.name,"tOceanNrm1")&&e.isType(V,_t)){B=V;break e}}B=null}while(0);var G=null==(q=B)||e.isType(q,_t)?q:K();if(null!=G){A=G;break t}}}A=null}while(0);return R.tOcean_0=null!=(l=A)?l.sampler:null,null!=(u=n.tOcean_0)&&(u.texture=n.oceanNrmTex),s}))}function Gn(){Hn=this,this.texEarthDay="Earth by Day",this.texEarthNight="Earth by Night",this.texEarthNrm="Earth Normal Map",this.texEarthHeight="Earth Height Map",this.texOceanNrm="Ocean Normal Map"}Rn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inScreenPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],In(this))},Rn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec4 "+this.name+"_near = "+this.uInvViewProjMat_0+" * vec4("+this.inScreenPos.ref2f()+" * 2.0 - 1.0, 0.0, 1.0);\n                vec4 "+this.name+"_far = "+this.uInvViewProjMat_0+" * vec4("+this.inScreenPos.ref2f()+" * 2.0 - 1.0, 1.0, 1.0);\n                "+this.outViewDir.declare()+" = ("+this.name+"_far.xyz / "+this.name+"_far.w) - ("+this.name+"_near.xyz / "+this.name+"_near.w);\n            ")},Rn.$metadata$={kind:T,simpleName:"XyToViewDirNode",interfaces:[N]},Ln.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Dn(this))},Ln.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outWorldPos.declare()+" = "+this.uInvViewMat_0+" * vec4("+this.inViewPos.ref3f()+", 1.0);")},Ln.$metadata$={kind:T,simpleName:"ViewToWorldPosNode",interfaces:[N]},qn.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("raySphereIntersection","\n                bool raySphereIntersection(vec3 rayOrigin, vec3 rayDir, vec3 center, float radius, out float d1, out float d2) {\n                    vec3 centerToOri = rayOrigin - center;\n                    float a = dot(rayDir, rayDir);\n                    float b = 2.0 * dot(rayDir, centerToOri);\n                    float c = dot(centerToOri, centerToOri) - radius * radius;\n                    \n                    float discriminant = b * b - 4.0 * a * c;\n                    if (discriminant < 0.0) {\n                        return false;\n                    } else {\n                        float q = -0.5 * (b + sign(b) * sqrt(discriminant));\n                        float t1 = q / a;\n                        float t2 = c / q;\n                        d1 = min(t1, t2);\n                        d2 = max(t1, t2);\n                        return d2 > 0.0;\n                    }\n                }\n            "),t.appendFunction_puj7f4$("rayPointDistance","\n                vec4 rayPointDistance(vec3 rayOrigin, vec3 rayDir, vec3 point) {\n                    vec3 w = point - rayOrigin;\n                    float c1 = dot(w, rayDir);\n                    float c2 = dot(rayDir, rayDir);\n                    vec3 pn = rayOrigin + rayDir * (c1 / c2);\n                    float dist = length(pn - point) * sign(c1);\n                    return vec4(pn, dist);\n                }\n            ")},qn.$metadata$={kind:T,simpleName:"RaySphereIntersectionNode",interfaces:[N]},Bn.prototype.setup_llmhyc$=function(t){var e;N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inSceneColor,this.inScenePos,this.inViewDepth,this.inCamPos,this.inLookDir]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uDirToSun}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uPlanetCenter}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSurfaceRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uAtmosphereRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uRayleighColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uMieColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uMieG}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uScatteringCoeffs}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSunColor}}(e)),s}))},Bn.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("phaseFunRayleigh","\n                vec3 phaseFunRayleigh(float cosTheta) {\n                    vec3 phase = vec3(1.0 + clamp(cosTheta, 0.0, 1.0));\n                    return phase * "+this.uRayleighColor+".rgb * "+this.uRayleighColor+".a;\n                }\n            "),t.appendFunction_puj7f4$("phaseFunMie","\n                vec3 phaseFunMie(float cosTheta, float g) {\n                    float g2 = g * g;\n                    float f1 = (3.0 * (1.0 - g2)) / (2.0 * (2.0 + g2));\n                    float f2 = (1.0 + cosTheta * cosTheta) / pow(1.0 + g2 - 2.0 * g * cosTheta, 1.5);\n                    return vec3(f1 * f2) * "+this.uMieColor+".rgb * "+this.uMieColor+".a;\n                }\n            "),t.appendFunction_puj7f4$("opticalDepthLut","\n                vec2 opticalDepthLut(float altitude, float cosTheta) {\n                    return "+t.sampleTexture2d_buzeal$(this.opticalDepthLut.name,"vec2(cosTheta * 0.5 + 0.5, altitude)")+".xy;\n                }\n            "),t.appendFunction_puj7f4$("opticalDepthLenLut","\n                float opticalDepthLenLut(vec3 origin, vec3 dir, float len) {\n                    float atmosphereThickness = "+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+";\n                    \n                    vec3 p1 = origin;\n                    vec3 p2 = origin + dir * len;\n                    float altitude1 = (length(p1) - "+this.uSurfaceRadius+") / atmosphereThickness;\n                    float altitude2 = (length(p2) - "+this.uSurfaceRadius+") / atmosphereThickness;\n                    \n                    if (altitude1 > altitude2) {\n                        // swap points and directionif ray is pointing downwards\n                        p1 = p2;\n                        p2 = origin;\n                        \n                        float swapAlt = altitude1;\n                        altitude1 = altitude2;\n                        altitude2 = swapAlt;\n                        \n                        dir = -dir;\n                    }\n                    \n                    float depth1 = opticalDepthLut(altitude1, dot(dir, normalize(p1))).x;\n                    float depth2 = opticalDepthLut(altitude2, dot(dir, normalize(p2))).x;\n                    return depth1 - depth2;\n                }\n            "),t.appendFunction_puj7f4$("scatterLight","\n                vec3 scatterLight(vec3 origin, vec3 dir, float rayLength, vec3 dirToSun) {\n                    float atmosphereThickness = "+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+";\n                    float stepSize = rayLength / float(11);\n                    vec3 inScatterPt = origin;\n                    vec3 inScatteredLight = vec3(0.0);\n                    \n                    for (int i = 0; i < 10; i++) {\n                        inScatterPt += dir * stepSize;\n                        \n                        float dPlanetIn, dPlanetOut;\n                        bool planetHit = raySphereIntersection(inScatterPt, dirToSun, vec3(0.0), "+this.uSurfaceRadius+", dPlanetIn, dPlanetOut);\n                        float dThroughPlanet = (dPlanetOut - dPlanetIn) * float(planetHit);\n                        float planetLenThresh = "+this.uSurfaceRadius+" / 5.0;\n                        \n                        if (dThroughPlanet < planetLenThresh) {\n                            vec3 verticalDir = normalize(inScatterPt);\n                            float cosTheta = dot(dirToSun, verticalDir);\n                            float altitude = (length(inScatterPt) - "+this.uSurfaceRadius+") / atmosphereThickness;\n    \n                            float viewRayOpticalDepth = opticalDepthLenLut(origin, dir, stepSize * float(i));\n                            vec2 opticalDepthToSun = opticalDepthLut(altitude, cosTheta);\n                            float sunRayOpticalDepth = opticalDepthToSun.x;\n                            float localDensity = opticalDepthToSun.y;\n                            vec3 transmittance = exp(-(sunRayOpticalDepth + viewRayOpticalDepth) * "+this.uScatteringCoeffs+");\n    \n                            float planetBlend = 1.0 - dThroughPlanet / planetLenThresh;\n                            inScatteredLight += localDensity * transmittance * "+this.uScatteringCoeffs+" * stepSize * planetBlend;\n                        }\n                    }\n                    \n                    float sunAngle = dot(dir, dirToSun);\n                    vec3 rayleigh = phaseFunRayleigh(sunAngle);\n                    vec3 mie = phaseFunMie(sunAngle, "+this.uMieG+");\n                    return (rayleigh + mie) * inScatteredLight * "+this.uSunColor+".rgb * "+this.uSunColor+".a;\n                }\n            "),t.appendMain_61zpoe$("\n                float dAtmoIn, dAtmoOut;\n                vec3 camOri = "+this.inCamPos.ref3f()+" - "+this.uPlanetCenter+";\n                vec3 nrmLookDir = normalize("+this.inLookDir.ref3f()+");\n                bool hitAtmo = raySphereIntersection(camOri, nrmLookDir, vec3(0.0), "+this.uAtmosphereRadius+", dAtmoIn, dAtmoOut);\n                \n                "+this.outColor.declare()+" = "+this.inSceneColor+";\n                if (hitAtmo) {\n                    // dAtmoIn is negative if camera is inside atmosphere\n                    float dToAtmo = max(0.0, dAtmoIn);\n                    float dThroughAtmo = dAtmoOut - dToAtmo;\n                    if ("+this.inViewDepth.ref1f()+" < 0.0) {\n                        float sceneDepth = length("+this.inCamPos.ref3f()+" - "+this.inScenePos.ref3f()+");\n                        dThroughAtmo = min(dThroughAtmo, sceneDepth - dToAtmo);\n                    }\n                    \n                    \n                    // scattering\n                    vec3 atmoHitPt = camOri + nrmLookDir * dToAtmo;\n                    vec3 light = scatterLight(atmoHitPt, nrmLookDir, dThroughAtmo, "+this.uDirToSun+");\n                    "+this.outColor+".rgb += light;\n\n//                    // blending\n//                    vec4 rayToPoint = rayPointDistance(camOri, nrmLookDir, vec3(0.0));\n//                    vec3 nearestPoint = rayToPoint.xyz;\n//                    float rayPointDist = rayToPoint.w;\n//\n//                    if (rayPointDist < 0.0) {\n//                        nearestPoint = camOri;\n//                        rayPointDist = length(camOri);\n//                    } else if (rayPointDist < "+this.uSurfaceRadius+") {\n//                        float dPlanetIn, dPlanetOut;\n//                        raySphereIntersection(camOri, nrmLookDir, vec3(0.0), "+this.uAtmosphereRadius+", dPlanetIn, dPlanetOut);\n//                        nearestPoint = camOri + nrmLookDir * dPlanetIn;\n//                        rayPointDist = "+this.uSurfaceRadius+";\n//                    }\n//\n//                    float normalDotSun = dot(normalize(nearestPoint), "+this.uDirToSun+");\n//                    float skyAlpha = smoothstep(-0.3, -0.1, normalDotSun);\n//                    float heightAlpha = 1.0 - smoothstep(0.3, 1.0, (rayPointDist - "+this.uSurfaceRadius+") / ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+"));\n//\n//                    "+this.outColor+".a = skyAlpha * heightAlpha;\n                }\n            ")},Bn.$metadata$={kind:T,simpleName:"AtmosphereNode",interfaces:[N]},On.$metadata$={kind:T,simpleName:"AtmosphericScatteringShader",interfaces:[dt]},Un.prototype.handleDrag_urvnay$=function(t,e,i){if(!t.isEmpty()){var n=t.get_za3lpa$(0);if(!n.isConsumed_za3lpa$()&&n.isInViewport_hrtwbc$(e.mainRenderPass.viewport,i)){var r=this.zoom,o=j.min(r,10);if(n.isLeftButtonDown)this.planetRotX=-n.deltaY/15*j.pow(o,.6),this.planetRotY=-n.deltaX/15*j.pow(o,.6);else if(n.isRightButtonDown)this.lookRotX-=n.deltaY/10,this.lookRotY-=n.deltaX/10;else if(n.isMiddleButtonDown){var s,a=this.camRotX-n.deltaY/10;s=a<0?0:a>180?180:a,this.camRotX=s,this.lookRotY-=n.deltaX/10}var l,u=this.zoom*(1-n.deltaScroll/10),p=this.minZoom,c=this.maxZoom;l=u<p?p:u>c?c:u,this.zoom=l,n.consume_za3lpa$()}}},Un.$metadata$={kind:T,simpleName:"EarthCamTransform",interfaces:[qt,ut]},Object.defineProperty(Vn.prototype,"oceanNrmTex",{configurable:!0,get:function(){return this.oceanNrmTex_42rp2f$_0},set:function(t){var e;this.oceanNrmTex_42rp2f$_0=t,null!=(e=this.tOcean_0)&&(e.texture=t)}}),Gn.prototype.shaderConfig_wmdeeb$=function(t){var e=new ct;return e.useAlbedoMap_daqygw$(t.get_11rb$(this.texEarthDay)),e.useDisplacementMap_9wkq18$(t.get_11rb$(this.texEarthHeight)),e.useEmissiveMap_daqygw$(t.get_11rb$(this.texEarthNight)),e.useNormalMap_9wkq18$(t.get_11rb$(this.texEarthNrm)),e.displacementStrength=1,e},Gn.prototype.model_2ufela$=function(t){var i,n,r=ht.Companion.defaultMrtPbrModel_2ufela$(t),o={v:null},s={v:null},a=new q(r);t:do{var l;for(i=wt.ALL,l=r.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,gt)&&h.add_11rb$(f)}var _=zt(h);if(null!=_){n=_;break t}}}n=null}while(0);var m=d(n),$=a.multiplyNode_ze33is$(m.outViewMat,m.outModelMat).output,y=a.pushConstantNode3f_61zpoe$("uDirToSun").output,v=a.vec3TransformNode_vid4wo$(y,$,0).outVec3;o.v=a.stageInterfaceNode_iikjwn$("ifSunDirViewSpace",v),s.v=a.stageInterfaceNode_iikjwn$("ifLocalNormal",a.attrNormals().output);var g,b,x=new B(r);t:do{var w;for(g=wt.ALL,w=r.stages.values.iterator();w.hasNext();){var z=w.next();if(0!=(z.stage.mask&g.mask)){var k,S=z.nodes,C=M();for(k=S.iterator();k.hasNext();){var N=k.next();e.isType(N,Bt)&&C.add_11rb$(N)}var E=zt(C);if(null!=E){b=E;break t}}}b=null}while(0);var P,T,O=d(b);t:do{var j;for(P=wt.ALL,j=r.stages.values.iterator();j.hasNext();){var A=j.next();if(0!=(A.stage.mask&P.mask)){var R,I,L=A.nodes;e:do{var D;for(D=L.iterator();D.hasNext();){var F=D.next();if(Rt(F.name,"ifTangents")&&e.isType(F,Ft)){I=F;break e}}I=null}while(0);var U=null==(R=I)||e.isType(R,Ft)?R:K();if(null!=U){T=U;break t}}}T=null}while(0);var V=d(T),G=O.inAlbedo,H=x.addNode_u9w9by$(new Xn(G,x.stage));O.inRoughness=H.outRoughness;var W=x.addNode_u9w9by$(new Yn(x.stage));W.inOceanTex1=x.textureNode_61zpoe$("tOceanNrm1"),W.inAlbedo=G,W.inIsOcean=H.outIsOcean,W.inNormal=s.v.output,W.inBumpNormal=O.inViewNormal,W.inTangent=V.output,O.inViewNormal=W.outBumpNormal;var X=W,Y=x.addNode_u9w9by$(new Kn(x.stage));return Y.inNormal=x.normalizeNode_r20yfm$(O.inViewNormal).output,Y.inSunDir=x.normalizeNode_r20yfm$(o.v.output).output,Y.inAlbedo=X.outColor,Y.inEmissive=O.inEmissive,O.inAlbedo=Y.outAlbedo,O.inEmissive=Y.outEmissive,r},Gn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Hn=null;function Wn(){return null===Hn&&new Gn,Hn}function Kn(t){N.call(this,"earthDayNightMix",t),this.inNormal_8wrcbj$_0=this.inNormal_8wrcbj$_0,this.inSunDir_3sjfkp$_0=this.inSunDir_3sjfkp$_0,this.inAlbedo_bpcifj$_0=this.inAlbedo_bpcifj$_0,this.inEmissive_rf58nj$_0=this.inEmissive_rf58nj$_0,this.outAlbedo=new P(new E(this.name+"_outAlbedo"),this),this.outEmissive=new P(new E(this.name+"_outEmissive"),this)}function Xn(t,e){N.call(this,"earthRoughness",e),this.inAlbedo=t,this.outRoughness=new P(new Ut("earth_outRoughness"),this),this.outIsOcean=new P(new Vt("earth_outIsOcean"),this)}function Yn(t){N.call(this,"earthOcean",t),this.inOceanTex1_a6m886$_0=this.inOceanTex1_a6m886$_0,this.inAlbedo_pe0e6r$_0=this.inAlbedo_pe0e6r$_0,this.inIsOcean_yg9xa2$_0=this.inIsOcean_yg9xa2$_0,this.inNormal_p0zt1b$_0=this.inNormal_p0zt1b$_0,this.inBumpNormal_ovq4rt$_0=this.inBumpNormal_ovq4rt$_0,this.inTangent_v0hpc9$_0=this.inTangent_v0hpc9$_0,this.outColor=new P(new E("ocean_outColor"),this),this.outBumpNormal=new P(new Nt("ocean_outBump"),this),this.uNormalShift=new Gt("uNormalShift"),this.uWaterColor=new jt("uWaterColor")}function Zn(){tr();var t,i=new ut,n=new Jt;n.name="OpticalDepthLutPass",n.setSize_vux9f0$(512,512),n.addColorTexture_farcsl$(Kt.RG_F16),n.clearDepthTexture(),Wt.call(this,i,new Qt(n)),this.lutNode_0=null,this.atmosphereRadius_32tfnj$_0=65,this.surfaceRadius_t0cr9a$_0=60,this.densityFalloff_isgemf$_0=9,this.clearColor=null;var r=new Xt;r.projCorrectionMode=Yt.OFFSCREEN,r.isKeepAspectRatio=!1,r.left=0,r.right=1,r.top=1,r.bottom=0,this.camera=r;var o=e.isType(t=this.drawNode,ut)?t:K(),a=new Z(new te(Zt([J.Companion.POSITIONS,J.Companion.TEXTURE_COORDS])),null);a.generate_v2sixm$(ir);var l=new C("Optical Depth LUT"),u={v:null},p=new q(l);u.v=p.stageInterfaceNode_iikjwn$("ifTexCoords",p.attrTexCoords().output),p.positionOutput=p.simpleVertexPositionNode().outVec4;var c=new B(l),h=c.addNode_u9w9by$(new er(c.stage));h.inTexCoords=u.v.output;var d=h;c.colorOutput_a3v4si$(d.outColor);var f,_,m=l,$=new dt(m);$.onPipelineCreated.add_11rb$((f=m,_=this,function(t,i,n){var r,o,a,l=_,u=f;t:do{var p;for(o=wt.ALL,p=u.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&o.mask)){var h,d=c.nodes,m=M();for(h=d.iterator();h.hasNext();){var $=h.next();e.isType($,er)&&m.add_11rb$($)}var y=zt(m);if(null!=y){a=y;break t}}}a=null}while(0);if(l.lutNode_0=a,null!=(r=_.lutNode_0)){var v=_;r.uAtmosphereRadius.value=v.atmosphereRadius,r.uSurfaceRadius.value=v.surfaceRadius,r.uDensityFalloff.value=v.densityFalloff}return s})),a.shader=$,o.unaryPlus_uv0sim$(a),this.onAfterDraw.add_11rb$(function(t){return function(e){return t.isEnabled=!1,s}}(this))}function Jn(){Qn=this,this.LUT_SIZE_X=512,this.LUT_SIZE_Y=512}Object.defineProperty(Kn.prototype,"inNormal",{configurable:!0,get:function(){return null==this.inNormal_8wrcbj$_0?o("inNormal"):this.inNormal_8wrcbj$_0},set:function(t){this.inNormal_8wrcbj$_0=t}}),Object.defineProperty(Kn.prototype,"inSunDir",{configurable:!0,get:function(){return null==this.inSunDir_3sjfkp$_0?o("inSunDir"):this.inSunDir_3sjfkp$_0},set:function(t){this.inSunDir_3sjfkp$_0=t}}),Object.defineProperty(Kn.prototype,"inAlbedo",{configurable:!0,get:function(){return null==this.inAlbedo_bpcifj$_0?o("inAlbedo"):this.inAlbedo_bpcifj$_0},set:function(t){this.inAlbedo_bpcifj$_0=t}}),Object.defineProperty(Kn.prototype,"inEmissive",{configurable:!0,get:function(){return null==this.inEmissive_rf58nj$_0?o("inEmissive"):this.inEmissive_rf58nj$_0},set:function(t){this.inEmissive_rf58nj$_0=t}}),Kn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inNormal,this.inSunDir,this.inAlbedo,this.inEmissive])},Kn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float "+this.name+"_mix = (clamp(dot("+this.inNormal+", "+this.inSunDir+"), -0.05, 0.05) + 0.05) * 10.0;\n            "+this.outAlbedo.declare()+" = "+this.inAlbedo+" * "+this.name+"_mix;\n            "+this.outEmissive.declare()+" = "+this.inEmissive+" * (1.0 - "+this.name+"_mix) * 0.6;\n        ")},Kn.$metadata$={kind:T,simpleName:"EarthDayNightMixNode",interfaces:[N]},Xn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inAlbedo)},Xn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float "+this.name+"_relBlue = min("+this.inAlbedo+".b - "+this.inAlbedo+".r, "+this.inAlbedo+".b - "+this.inAlbedo+".g) / "+this.inAlbedo+".b;\n            float "+this.name+"_brightness = dot("+this.inAlbedo+".rgb, vec3(0.333));\n            \n            "+this.outRoughness.declare()+" = 1.0 - (0.3 + "+this.name+"_brightness * 0.4);\n            bool "+this.outIsOcean+" = "+this.name+"_relBlue > 0.2 || "+this.name+"_brightness < 0.002;\n            if ("+this.outIsOcean+") {\n                "+this.outRoughness+" = 0.22;\n            }\n        ")},Xn.$metadata$={kind:T,simpleName:"EarthRoughnessNode",interfaces:[N]},Object.defineProperty(Yn.prototype,"inOceanTex1",{configurable:!0,get:function(){return null==this.inOceanTex1_a6m886$_0?o("inOceanTex1"):this.inOceanTex1_a6m886$_0},set:function(t){this.inOceanTex1_a6m886$_0=t}}),Object.defineProperty(Yn.prototype,"inAlbedo",{configurable:!0,get:function(){return null==this.inAlbedo_pe0e6r$_0?o("inAlbedo"):this.inAlbedo_pe0e6r$_0},set:function(t){this.inAlbedo_pe0e6r$_0=t}}),Object.defineProperty(Yn.prototype,"inIsOcean",{configurable:!0,get:function(){return null==this.inIsOcean_yg9xa2$_0?o("inIsOcean"):this.inIsOcean_yg9xa2$_0},set:function(t){this.inIsOcean_yg9xa2$_0=t}}),Object.defineProperty(Yn.prototype,"inNormal",{configurable:!0,get:function(){return null==this.inNormal_p0zt1b$_0?o("inNormal"):this.inNormal_p0zt1b$_0},set:function(t){this.inNormal_p0zt1b$_0=t}}),Object.defineProperty(Yn.prototype,"inBumpNormal",{configurable:!0,get:function(){return null==this.inBumpNormal_ovq4rt$_0?o("inBumpNormal"):this.inBumpNormal_ovq4rt$_0},set:function(t){this.inBumpNormal_ovq4rt$_0=t}}),Object.defineProperty(Yn.prototype,"inTangent",{configurable:!0,get:function(){return null==this.inTangent_v0hpc9$_0?o("inTangent"):this.inTangent_v0hpc9$_0},set:function(t){this.inTangent_v0hpc9$_0=t}}),Yn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inIsOcean,this.inNormal,this.inBumpNormal,this.inTangent]);var e,i=t.pushConstants;i.unaryPlus_wq3w46$((e=this,function(){return e.uNormalShift})),i.unaryPlus_wq3w46$(function(t){return function(){return t.uWaterColor}}(this))},Yn.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("cubeUv","\n                vec2 cubeUv(vec3 normal) {\n                    vec3 absN = abs(normal);\n                    bvec3 isPos = bvec3(normal.x > 0.0, normal.y > 0.0, normal.z > 0.0);\n                \n                    float maxAxis = 1.0;\n                    vec2 uvc = vec2(1.0, 1.0);\n                    \n                    if (isPos.x && absN.x > absN.y && absN.x > absN.z) {\n                        maxAxis = absN.x;\n                        uvc = vec2(-normal.z, -normal.y);\n                    } else if (!isPos.x && absN.x > absN.y && absN.x > absN.z) {\n                        maxAxis = absN.x;\n                        uvc = vec2(normal.z, -normal.y);\n                        \n                    } else if (isPos.y && absN.y > absN.x && absN.y > absN.z) {\n                        maxAxis = absN.y;\n                        uvc = vec2(normal.x, normal.z);\n                    } else if (!isPos.y && absN.y > absN.x && absN.y > absN.z) {\n                        maxAxis = absN.y;\n                        uvc = vec2(normal.x, -normal.z);\n                        \n                    } else if (isPos.z && absN.z > absN.x && absN.z > absN.y) {\n                        maxAxis = absN.z;\n                        uvc = vec2(normal.x, -normal.y);\n                    } else if (!isPos.z && absN.z > absN.x && absN.z > absN.y) {\n                        maxAxis = absN.z;\n                        uvc = vec2(-normal.x, -normal.y);\n                    }\n                    \n                    return 0.5 * (uvc / maxAxis + 1.0);\n                }\n            "),t.appendMain_61zpoe$("\n                "+this.outColor.declare()+" = "+this.inAlbedo.ref4f()+";\n                "+this.outBumpNormal.declare()+" = "+this.inBumpNormal.ref3f()+";\n                if ("+this.inIsOcean+") {\n                    vec2 oceanUvBase = cubeUv(normalize("+this.inNormal.ref3f()+"));\n                    float s = 400.0;\n                    vec2 oceanUv1 = oceanUvBase * vec2(1.0 * s, 1.5 * s) + "+this.uNormalShift+".xy;\n                    vec2 oceanUv2 = oceanUvBase * vec2(1.69751 * s, 1.27841 * s) + "+this.uNormalShift+".zw;\n                    vec2 oceanUvStrength = oceanUvBase;\n                    \n                    vec3 oceanNrm1 = "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUv1")+".rgb * 2.0 - 1.0;\n                    vec3 oceanNrm2 = "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUv2")+".rgb * 2.0 - 1.0;\n                    vec3 oceanNrm = oceanNrm1 + oceanNrm2;\n                    float nrmStrength = smoothstep(0.3, 0.6, "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUvStrength")+".r) * 0.7 + 0.3;\n                    oceanNrm.xy *= nrmStrength;\n                    \n                    //"+this.outColor+" = vec4(vec3(nrmStrength), 1.0);\n                    "+this.outColor+" = "+this.uWaterColor+";\n                    "+this.outBumpNormal+" = calcBumpedNormal("+this.inBumpNormal.ref3f()+", "+this.inTangent.ref4f()+", normalize(oceanNrm), 0.4);\n                }\n            ")},Yn.$metadata$={kind:T,simpleName:"EarthOceanNode",interfaces:[N]},Vn.$metadata$={kind:T,simpleName:"EarthShader",interfaces:[ht]},Object.defineProperty(Zn.prototype,"atmosphereRadius",{configurable:!0,get:function(){return this.atmosphereRadius_32tfnj$_0},set:function(t){var e,i;this.atmosphereRadius_32tfnj$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uAtmosphereRadius:null)&&(i.value=t),this.update()}}),Object.defineProperty(Zn.prototype,"surfaceRadius",{configurable:!0,get:function(){return this.surfaceRadius_t0cr9a$_0},set:function(t){var e,i;this.surfaceRadius_t0cr9a$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uSurfaceRadius:null)&&(i.value=t),this.update()}}),Object.defineProperty(Zn.prototype,"densityFalloff",{configurable:!0,get:function(){return this.densityFalloff_isgemf$_0},set:function(t){var e,i;this.densityFalloff_isgemf$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uDensityFalloff:null)&&(i.value=t),this.update()}}),Zn.prototype.update=function(){this.isEnabled=!0},Zn.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),Wt.prototype.dispose_aemszp$.call(this,t)},Jn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Qn=null;function tr(){return null===Qn&&new Jn,Qn}function er(t){N.call(this,"opticalDepthLut",t),this.inTexCoords=new P(new Ct(St.Companion.ZERO)),this.outColor=new P(new E("brdfLut_outColor"),this),this.uAtmosphereRadius=new Mt("uAtmosphereRadius"),this.uSurfaceRadius=new Mt("uSurfaceRadius"),this.uDensityFalloff=new Mt("uDensityFalloff")}function ir(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function nr(t,e){return ve(void 0,void 0,void 0,(i=t,n=e,function(t,e){var r=new rr(e,t,i);return n(r),r.finish(),s}));var i,n}function rr(t,e,i){this.uiScene=t,this.uiRoot=e,this.menuWidth=300,this.menuHeight=0,this.menuContainer=null,this.menuY=-40,this.smallFontProps_0=new we(xe.Companion.SYSTEM_FONT,14),this.smallFont=null;var n=this.uiRoot;this.smallFont=ze(this.smallFontProps_0.family,this.smallFontProps_0.sizePts,n.uiDpi,i,this.smallFontProps_0.style,this.smallFontProps_0.chars),n.theme=Ce(ke.Companion.DARK,fr),this.menuContainer=n.container_t34sov$("menu",_r),n.unaryPlus_uv0sim$(this.menuContainer)}function or(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.menuY),tt()),i.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),i.textAlignment=new rt(nt.START,nt.CENTER);var n=i.onClick,r=function(t){return function(e,i,n,r){return t(e),s}}(e);return n.add_11rb$(r),s}}function sr(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(et(15),ge(t.menuY),tt()),n.layoutSpec.setSize_4ujscr$(et(70),ge(35),it()),n.text=be(e.current);var r=n.onClick,o=function(t,e){return function(i,n,r,o){var a=t.current;return i.text=be(t.next()),e(t.current,a),s}}(e,i);return r.add_11rb$(o),s}}function ar(t,e,i,n){return function(r){r.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.menuY),tt()),r.layoutSpec.setSize_4ujscr$(et(20),ge(35),it()),r.text="<";var o=r.onClick,a=function(t,e,i){return function(n,r,o,a){var l=t.current;return e.text=be(t.prev()),i(t.current,l),s}}(e,i,n);return o.add_11rb$(a),s}}function lr(t,e,i,n){return function(r){r.layoutSpec.setOrigin_4ujscr$(et(80),ge(t.menuY),tt()),r.layoutSpec.setSize_4ujscr$(et(20),ge(35),it()),r.text=">";var o=r.onClick,a=function(t,e,i){return function(n,r,o,a){var l=t.current;return e.text=be(t.next()),i(t.current,l),s}}(e,i,n);return o.add_11rb$(a),s}}function ur(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.menuY),tt()),i.layoutSpec.setSize_4ujscr$(et(100),ge(35),it());var n=i.onValueChanged,r=function(t){return function(e,i){return t(e),s}}(e);return n.add_11rb$(r),s}}function pr(t,e,i,n){return function(r){r.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.menuY),tt()),r.layoutSpec.setSize_4ujscr$(et(100),ge(35),it());var o=r.onValueChanged,a=function(t,e,i){return function(n,r){return e.text=t(n.value),i(n),s}}(e,i,n);return o.add_11rb$(a),s}}function cr(t,e,i,n,r,o){return function(a){a.layoutSpec.setOrigin_4ujscr$(et(t),ge(e.menuY),tt()),a.layoutSpec.setSize_4ujscr$(et(100-t-i),ge(35),it());var l=a.onValueChanged,u=function(t,e,i){return function(n,r){return e.text=t(n.value),i(n),s}}(n,r,o);return l.add_11rb$(u),s}}function hr(t){return new Se}function dr(t){return new Se}function fr(t){return t.componentUi_mloaa0$(hr),t.containerUi_2t3ptw$(dr),s}function _r(t){return t.ui.setCustom_11rb$(new Ne(t)),s}function mr(t,e){var i,n,r;vr(),ut.call(this),this.relativeX=.05,this.relativeY=.05,this.relativeWidth=.33,this.aspectRatio=vr().ASPECT_RATIO_VIEWPORT,this.unaryPlus_uv0sim$(b("image",void 0,(i=e,n=t,function(t){return t.generate_v2sixm$(gr),t.shader=null!=i?i:new S(n),s}))),this.onUpdate.add_11rb$((r=this,function(t,e){var i=r.aspectRatio!==vr().ASPECT_RATIO_VIEWPORT?r.aspectRatio:e.viewport.aspectRatio,n=e.viewport.width*r.relativeWidth,o=n/i;r.setIdentity();var a=e.viewport.width*r.relativeX,l=e.viewport.height*r.relativeY;return r.translate_y2kzbl$(a,l,0),r.scale_y2kzbl$(n,o,1),s}))}function $r(){yr=this,this.ASPECT_RATIO_VIEWPORT=0}er.prototype.setup_llmhyc$=function(t){var e;N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inTexCoords),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uAtmosphereRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSurfaceRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uDensityFalloff}}(e)),s}))},er.prototype.generateCode_626509$=function(t){N.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("rayLength","\n                float rayLength(vec3 rayOrigin, vec3 rayDir) {\n                    float a = dot(rayDir, rayDir);\n                    float b = 2.0 * dot(rayDir, rayOrigin);\n                    float c = dot(rayOrigin, rayOrigin) - "+this.uAtmosphereRadius+" * "+this.uAtmosphereRadius+";\n                    \n                    float discriminant = b * b - 4.0 * a * c;\n                    if (discriminant < 0.0) {\n                        return -1.0;\n                    } else {\n                        float q = -0.5 * (b + sign(b) * sqrt(discriminant));\n                        float t1 = q / a;\n                        float t2 = c / q;\n                        return max(t1, t2);\n                    }\n                }\n            "),t.appendFunction_puj7f4$("densityAtAltitude","\n                float densityAtAltitude(float altitude) {\n                    float nH = clamp(altitude / ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+"), 0.0, 1.0);\n\n                    // exponential density\n                    //float h = nH;\n\n                    // exponential density with cut-off\n                    //float cutOff = 0.2;\n                    //float h = nH * (1.0 - cutOff) + cutOff;\n                    \n                    // reduced density at low altitudes\n                    float x = nH * 10.0;\n                    float f = 0.3 * (2.0 + 3.0 * x * exp(-x)) * (10.0 - x) / 10.0;\n                    float h = 1.0 - f;\n                    \n                    return exp(-clamp(h, 0.0, 1.0) * "+this.uDensityFalloff+") * (1.0 - nH);\n                }\n            "),t.appendFunction_puj7f4$("opticalDepth","\n                float opticalDepth(vec3 origin, vec3 dir, float rayLength) {\n                    vec3 samplePt = origin;\n                    float stepSize = rayLength / float(101);\n                    float opticalDepth = 0.0;\n                    for (int i = 0; i < 100; i++) {\n                        samplePt += dir * stepSize;\n                        opticalDepth += densityAtAltitude(length(samplePt) - "+this.uSurfaceRadius+") * stepSize;\n                    }\n                    return opticalDepth;\n                }\n            "),t.appendMain_61zpoe$("\n                float cosAngle = "+this.inTexCoords.ref2f()+".x * 2.0 - 1.0;\n                float altitude = "+this.inTexCoords.ref2f()+".y * ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+");\n                \n                vec3 origin = vec3("+this.uSurfaceRadius+" + altitude, 0.0, 0.0);\n                vec3 direction = vec3(cosAngle, sin(acos(cosAngle)), 0.0);\n                \n                float shift = "+this.uAtmosphereRadius+" * 2.0;\n                float rayLen = rayLength(origin - direction * shift, direction) - shift;\n                float opticalDepth = opticalDepth(origin, direction, rayLen);\n                \n                "+this.outColor.declare()+" = vec4(opticalDepth, densityAtAltitude(altitude), 0.0, 1.0);\n            ")},er.$metadata$={kind:T,simpleName:"OpticalDepthLutNode",interfaces:[N]},Zn.$metadata$={kind:T,simpleName:"OpticalDepthLutPass",interfaces:[Wt]},rr.prototype.button_9zrh0o$=function(t,e){var i={v:null};return i.v=this.uiRoot.button_9zrh0o$(t,or(this,e)),this.menuContainer.plusAssign_f1kmr1$(i.v),this.menuY-=35,i.v},rr.prototype.cycler_4ni5b8$=function(t,e,i){var n,r=this.uiRoot,o=this.menuContainer;null!=t&&(o.unaryPlus_uv0sim$(r.label_tokfmu$(t,(n=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(n.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(100),ge(35),it()),s}))),this.menuY-=35);var a=r.button_9zrh0o$("cycler-main",sr(this,e,i));o.unaryPlus_uv0sim$(a),o.unaryPlus_uv0sim$(r.button_9zrh0o$("cycle-left",ar(this,e,a,i))),o.unaryPlus_uv0sim$(r.button_9zrh0o$("cycle-right",lr(this,e,a,i))),this.menuY-=35},rr.prototype.gap_mx4ult$=function(t){this.menuY-=t},rr.prototype.image_3ds0aa$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i={v:null},n=this.uiRoot;return i.v=new mr(t,e),n.unaryPlus_uv0sim$(i.v),i.v},rr.prototype.section_yfmn31$=function(t,e){this.title_61zpoe$(t),e(this)},rr.prototype.slider_d5clx2$=function(t,e,i,n){var r={v:null},o=this.uiRoot,s=this.menuContainer;return r.v=o.slider_91a1dk$("radiusSlider",e,i,t,ur(this,n)),s.unaryPlus_uv0sim$(r.v),this.menuY-=35,r.v},rr.prototype.sliderWithValue_xbu91d$=function(t,e,i,n,r,o,a){var l;void 0===r&&(r=2),void 0===o&&(l=r,o=function(t){return ot(t,l)});var u,p={v:null},c=this.uiRoot,h=this.menuContainer;h.unaryPlus_uv0sim$(c.label_tokfmu$(t,(u=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(u.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(75),ge(35),it()),s})));var d=c.label_tokfmu$(o(e),function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(et(75),ge(t.menuY),tt()),e.layoutSpec.setSize_4ujscr$(et(25),ge(35),it()),e.textAlignment=new rt(nt.END,nt.CENTER),s}}(this));return h.unaryPlus_uv0sim$(d),this.menuY-=35,p.v=c.slider_91a1dk$("slider",i,n,e,pr(this,o,d,a)),h.unaryPlus_uv0sim$(p.v),this.menuY-=35,p.v},rr.prototype.sliderWithValueSmall_jjtbof$=function(t,e,i,n,r,o,a,l,u){var p;void 0===r&&(r=2),void 0===o&&(p=r,o=function(t){return ot(t,p)}),void 0===a&&(a=15),void 0===l&&(l=15);var c,h,d={v:null},f=this.uiRoot,_=this.menuContainer;_.unaryPlus_uv0sim$(f.label_tokfmu$(t,(c=this,h=a,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(c.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(h),ge(35),it()),s})));var m=f.label_tokfmu$(o(e),function(t,e){return function(i){return i.layoutSpec.setOrigin_4ujscr$(et(100-t),ge(e.menuY),tt()),i.layoutSpec.setSize_4ujscr$(et(t),ge(35),it()),i.textAlignment=new rt(nt.END,nt.CENTER),s}}(l,this));return _.unaryPlus_uv0sim$(m),d.v=f.slider_91a1dk$("slider",i,n,e,cr(a,this,l,o,m,u)),_.unaryPlus_uv0sim$(d.v),this.menuY-=35,d.v},rr.prototype.text_61zpoe$=function(t){var e,i={v:null};return i.v=this.uiRoot.label_tokfmu$(t,(e=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(e.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),s})),this.menuContainer.plusAssign_f1kmr1$(i.v),this.menuY-=35,i.v},rr.prototype.textWithValue_puj7f4$=function(t,e){var i,n={v:null},r=this.uiRoot;return this.menuContainer.plusAssign_f1kmr1$(r.label_tokfmu$(t,(i=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(i.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(50),ge(30),it()),s}))),n.v=r.label_tokfmu$(e,function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(et(50),ge(t.menuY),tt()),e.layoutSpec.setSize_4ujscr$(et(50),ge(30),it()),e.textAlignment=new rt(nt.END,nt.CENTER),s}}(this)),this.menuContainer.plusAssign_f1kmr1$(n.v),this.menuY-=35,n.v},rr.prototype.title_61zpoe$=function(t){var e,i,n={v:null},r=this.uiRoot;return n.v=r.label_tokfmu$(t.toUpperCase(),(e=this,i=r,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(e.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),t.font.setCustom_11rb$(e.smallFont),t.textColor.setCustom_11rb$(i.theme.accentColor),t.textAlignment=new rt(nt.CENTER,nt.CENTER),s})),this.menuContainer.plusAssign_f1kmr1$(n.v),this.menuY-=35,n.v},rr.prototype.toggleButton_8v9fdr$=function(t,e,i){var n,r,o,a={v:null};return a.v=this.uiRoot.toggleButton_6j87po$(t,(n=this,r=e,o=i,function(t){t.layoutSpec.setOrigin_4ujscr$(et(0),ge(n.menuY),tt()),t.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),t.isEnabled=r;var e=t.onStateChange,i=o;return e.add_11rb$(i),s})),this.menuContainer.plusAssign_f1kmr1$(a.v),this.menuY-=35,a.v},rr.prototype.finish=function(){var t=this.menuContainer;0===this.menuHeight&&(this.menuHeight=-this.menuY-20),t.layoutSpec.setOrigin_4ujscr$(ge(-this.menuWidth-120),ge(-this.menuHeight-120),tt()),t.layoutSpec.setSize_4ujscr$(ge(this.menuWidth),ge(this.menuHeight),it())},rr.$metadata$={kind:T,simpleName:"ControlUiBuilder",interfaces:[]},$r.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var yr=null;function vr(){return null===yr&&new $r,yr}function gr(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function br(){Dr(),ho.call(this,"Deferred Shading"),this.deferredPipeline_4e1hwv$_0=this.deferredPipeline_4e1hwv$_0,this.objects_v6o6kw$_0=this.objects_v6o6kw$_0,this.objectShader_kt711w$_0=this.objectShader_kt711w$_0,this.lightPositionMesh_cedig8$_0=this.lightPositionMesh_cedig8$_0,this.lightVolumeMesh_k6bbw9$_0=this.lightVolumeMesh_k6bbw9$_0,this.autoRotate_0=!0,this.rand_0=new de(1337),this.lightCount_0=2e3,this.lights_0=M();var t=new po(Zt([new Or("Colorful",Zt([m.Companion.MD_RED,m.Companion.MD_PINK,m.Companion.MD_PURPLE,m.Companion.MD_DEEP_PURPLE,m.Companion.MD_INDIGO,m.Companion.MD_BLUE,m.Companion.MD_LIGHT_BLUE,m.Companion.MD_CYAN,m.Companion.MD_TEAL,m.Companion.MD_GREEN,m.Companion.MD_LIGHT_GREEN,m.Companion.MD_LIME,m.Companion.MD_YELLOW,m.Companion.MD_AMBER,m.Companion.MD_ORANGE,m.Companion.MD_DEEP_ORANGE])),new Or("Hot-Cold",Zt([m.Companion.MD_PINK,m.Companion.MD_CYAN])),new Or("Summer",Zt([m.Companion.MD_ORANGE,m.Companion.MD_BLUE,m.Companion.MD_GREEN])),new Or("White",ne(m.Companion.WHITE))]));t.index=1,this.colorMap_0=t}function xr(t,e){return function(i){i.setMouseRotation_dleff0$(0,-40),i.unaryPlus_uv0sim$(t.camera),i.zoom=28,i.maxZoom=50,i.translation.set_yvo9jy$(0,-11,0);var n=i.onUpdate,r=function(t,e){return function(i,n){return t.autoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(e,i);return n.add_11rb$(r),s}}function wr(t){t.color=m.Companion.RED;var e=t.sphereProps.icoDefaults();return e.steps=1,e.radius=.05,e.center.set_czzhiu$($.Companion.ZERO),t.icoSphere_mojs8w$(t.sphereProps),s}function zr(t){return function(e){e.generate_v2sixm$(function(t){return function(e){for(var i=M(),n=0;n<=10;n++){var r=new he(Q([J.Companion.POSITIONS,J.Companion.NORMALS,J.Companion.COLORS])),o=r.geometry;i.add_11rb$(o);var a=t,l=r.sphereProps.icoDefaults();l.steps=3,l.radius=a.rand_0.randomF_dleff0$(.3,.4),l.center.set_y2kzbl$(0,.1+l.radius,0),r.icoSphere_mojs8w$(r.sphereProps)}for(var u=-19;u<=19;u++)for(var p=-19;p<=19;p++){e.color=m.Companion.WHITE,e.transform.push();var c=t;if(e.translate_y2kzbl$(u,0,p),(u+100|0)%2==(p+100|0)%2){var h=e.cubeProps.defaults();h.size.set_y2kzbl$(c.rand_0.randomF_dleff0$(.6,.8),c.rand_0.randomF_dleff0$(.6,.95),c.rand_0.randomF_dleff0$(.6,.8)),h.origin.set_y2kzbl$(-h.size.x/2,.1,-h.size.z/2),e.cube_lhbb6w$(e.cubeProps)}else e.geometry_ejqx55$(i.get_za3lpa$(c.rand_0.randomI_n8acyv$(Oe(i))));e.transform.pop()}return s}}(t));var i=new ct;i.roughness=.15;var n=i;return t.objectShader_0=new ht(n),e.shader=t.objectShader_0,s}}function kr(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.WHITE;var e=t.rectProps.defaults();return e.size.set_dleff0$(40,40),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.generateTexCoords_mx4ult$(30),t.rect_e5k3t5$(t.rectProps),s}function Sr(t){t.generate_v2sixm$(kr);var e=new ct;e.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/futuristic-panels1/futuristic-panels1-albedo1.jpg"),e.useNormalMap_9sobi5$(Yr().pbrBasePath+"/futuristic-panels1/futuristic-panels1-normal.jpg"),e.useRoughnessMap_ivxn3r$(Yr().pbrBasePath+"/futuristic-panels1/futuristic-panels1-roughness.jpg"),e.useMetallicMap_ivxn3r$(Yr().pbrBasePath+"/futuristic-panels1/futuristic-panels1-metallic.jpg"),e.useOcclusionMap_9sobi5$(Yr().pbrBasePath+"/futuristic-panels1/futuristic-panels1-ao.jpg");var i,n=new ht(e);return t.shader=n,t.onDispose.add_11rb$((i=n,function(t,e){var n,r,o,a,l,u;return null!=(n=i.albedoMap)&&n.dispose(),null!=(r=i.occlusionMap)&&r.dispose(),null!=(o=i.normalMap)&&o.dispose(),null!=(a=i.metallicMap)&&a.dispose(),null!=(l=i.roughnessMap)&&l.dispose(),null!=(u=i.displacementMap)&&u.dispose(),s})),s}function Cr(t){return function(e){return e.sliderWithValue_xbu91d$("Light Count:",t.lightCount_0,1,5e3,0,void 0,function(t){return function(e){return t.lightCount_0=st(e.value),t.updateLights_0(),s}}(t)),e.toggleButton_8v9fdr$("Light Positions",t.lightPositionMesh_0.isVisible,function(t){return function(e){return t.lightPositionMesh_0.isVisible=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Light Volumes",t.lightVolumeMesh_0.isVisible,function(t){return function(e){return t.lightVolumeMesh_0.isVisible=e.isEnabled,s}}(t)),e.cycler_4ni5b8$("Color Map:",t.colorMap_0,function(t){return function(e,i){return t.updateLightColors_0(),s}}(t)),s}}function Nr(t,e){return function(i){return i.toggleButton_8v9fdr$("Show Maps",Me(t).isVisible,function(t){return function(e){var i;for(i=t.iterator();i.hasNext();)i.next().isVisible=e.isEnabled;return s}}(t)),i.toggleButton_8v9fdr$("Ambient Occlusion",e.deferredPipeline_0.isAoEnabled,function(t){return function(e){return t.deferredPipeline_0.isAoEnabled=e.isEnabled,s}}(e)),s}}function Er(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Show Objects",t.objects_0.isVisible,function(t){return function(e){return t.objects_0.isVisible=e.isEnabled,t.updateLights_0(!0),s}}(t)),e.sliderWithValue_xbu91d$("Object Roughness:",t.objectShader_0.roughness,0,1,2,void 0,function(t){return function(e){return t.objectShader_0.roughness=e.value,s}}(t)),s}}function Pr(t,e,i,n,r){this.$outer=t,this.startConst=e,this.startIt=i,this.travelDir=n,this.rows=r}function Tr(t){this.light=t,this.startPos=je(),this.dir=je(),this.speed=1.5,this.travelPos=0,this.travelDist=10,this.startColor=m.Companion.WHITE,this.desiredColor=m.Companion.WHITE,this.colorMix=0}function Or(t,e){this.name=t,this.colors=e}function Mr(t){Rr(),dt.call(this,Rr().shaderModel()),this.mrtPass=t}function jr(){Ar=this}mr.$metadata$={kind:T,simpleName:"UiImage",interfaces:[ut]},Object.defineProperty(br.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_4e1hwv$_0?o("deferredPipeline"):this.deferredPipeline_4e1hwv$_0},set:function(t){this.deferredPipeline_4e1hwv$_0=t}}),Object.defineProperty(br.prototype,"objects_0",{configurable:!0,get:function(){return null==this.objects_v6o6kw$_0?o("objects"):this.objects_v6o6kw$_0},set:function(t){this.objects_v6o6kw$_0=t}}),Object.defineProperty(br.prototype,"objectShader_0",{configurable:!0,get:function(){return null==this.objectShader_kt711w$_0?o("objectShader"):this.objectShader_kt711w$_0},set:function(t){this.objectShader_kt711w$_0=t}}),Object.defineProperty(br.prototype,"lightPositionMesh_0",{configurable:!0,get:function(){return null==this.lightPositionMesh_cedig8$_0?o("lightPositionMesh"):this.lightPositionMesh_cedig8$_0},set:function(t){this.lightPositionMesh_cedig8$_0=t}}),Object.defineProperty(br.prototype,"lightVolumeMesh_0",{configurable:!0,get:function(){return null==this.lightVolumeMesh_k6bbw9$_0?o("lightVolumeMesh"):this.lightVolumeMesh_k6bbw9$_0},set:function(t){this.lightVolumeMesh_k6bbw9$_0=t}}),br.prototype.lateInit_aemszp$=function(t){this.updateLights_0()},br.prototype.setupMainScene_aemszp$=function(t){var e=new I(null);e.unaryPlus_uv0sim$(a(e,void 0,xr(e,this))),e.lighting.lights.clear();var i=new G;i.maxGlobalLights=0,i.isWithEmissive=!1,i.isWithAmbientOcclusion=!0,i.isWithScreenSpaceReflections=!1,i.isWithImageBasedLighting=!1;var n,r=i;return this.deferredPipeline_0=new H(e,r),this.makeContent_0(this.deferredPipeline_0.contentGroup),e.unaryPlus_uv0sim$(this.deferredPipeline_0.renderOutput),this.makeLightOverlays_0(e),e.onUpdate.add_11rb$((n=this,function(t,e){var i;for(i=n.lights_0.iterator();i.hasNext();)i.next().animate_mx4ult$(e.deltaT);return s})),e},br.prototype.makeLightOverlays_0=function(t){var e;this.lightPositionMesh_0=g(void 0,(e=this,function(t){return t.isFrustumChecked=!1,t.isVisible=!0,t.generate_v2sixm$(wr),t.shader=new dt(e.instancedLightIndicatorModel_0()),s})),t.unaryPlus_uv0sim$(this.lightPositionMesh_0);var i=Ee(this.deferredPipeline_0.pbrPass.dynamicPointLights.mesh.geometry);i.isFrustumChecked=!1,i.isVisible=!1,i.shader=new dt(this.instancedLightIndicatorModel_0()),this.lightVolumeMesh_0=i,t.unaryPlus_uv0sim$(this.lightVolumeMesh_0);var n=new Pe(Zt([Pe.Companion.MODEL_MAT,J.Companion.COLORS]),5e3),r=new Pe(Zt([Pe.Companion.MODEL_MAT,J.Companion.COLORS]),5e3);this.lightPositionMesh_0.instances=n,this.lightVolumeMesh_0.instances=r;var o=new fe;t.onUpdate.add_11rb$(function(t,e,i,n){return function(r,o){if(t.lightPositionMesh_0.isVisible||t.lightVolumeMesh_0.isVisible){e.clear(),i.clear();var a,l=Te();for(a=t.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.iterator();a.hasNext();){var u=a.next(),p=n,c=t,h=e,d=i;if(p.setIdentity(),p.translate_czzhiu$(u.position),u.color.toSrgb_b0h0gw$(l),c.lightPositionMesh_0.isVisible){h.checkBufferSize_za3lpa$();var f=h.dataF.position,_=h.dataF;_.put_q3cr5i$(p.matrix),_.put_q3cr5i$(l.array);var m=h.dataF.position-f|0;if(m!==h.instanceSizeF)throw Re("Expected data to grow by "+h.instanceSizeF+" elements, instead it grew by "+m);h.numInstances=h.numInstances+1|0,h.hasChanged=!0}if(c.lightVolumeMesh_0.isVisible){var $=u.intensity,y=j.sqrt($);p.scale_y2kzbl$(y,y,y),d.checkBufferSize_za3lpa$();var v=d.dataF.position,g=d.dataF;g.put_q3cr5i$(p.matrix),g.put_q3cr5i$(l.array);var b=d.dataF.position-v|0;if(b!==d.instanceSizeF)throw Re("Expected data to grow by "+d.instanceSizeF+" elements, instead it grew by "+b);d.numInstances=d.numInstances+1|0,d.hasChanged=!0}}}return s}}(this,n,r,o))},br.prototype.makeContent_0=function(t){this.objects_0=g(void 0,zr(this)),t.unaryPlus_uv0sim$(this.objects_0),t.unaryPlus_uv0sim$(b(void 0,!0,Sr))},br.prototype.updateLights_0=function(t){void 0===t&&(t=!1);var e=this.objects_0.isVisible?.7:0,i=Zt([new Pr(this,new $(-19.5,.45,-20.5),new $(1,0,0),new $(0,0,1),40),new Pr(this,new $(-20.5,.45,-19.5),new $(0,0,1),new $(1,0,0),40),new Pr(this,new $(-19,.45+e,20.5),new $(1,0,0),new $(0,0,-1),39),new Pr(this,new $(20.5,.45+e,-19),new $(0,0,1),new $(-1,0,0),39)]);if(t)this.lights_0.clear(),this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.clear();else for(;this.lights_0.size>this.lightCount_0;)this.lights_0.removeAt_za3lpa$(le(this.lights_0)),this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.removeAt_za3lpa$(le(this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances));for(;this.lights_0.size<this.lightCount_0;){var n=i.get_za3lpa$(this.rand_0.randomI_n8acyv$(Oe(i))),r=this.rand_0.randomI_n8acyv$(ue(0,n.rows)),o=this.deferredPipeline_0.pbrPass.dynamicPointLights,s=new Ie;s.intensity=1,o.addPointLight_at6cwi$(s);var a=new Tr(s);a.startColor=this.colorMap_0.current.getColor_za3lpa$(this.lights_0.size).toLinear(),a.desiredColor=a.startColor,a.colorMix=1;var l=a;this.lights_0.add_11rb$(l),n.setupLight_u83zut$(l,r,41,this.rand_0.randomF())}this.updateLightColors_0()},br.prototype.updateLightColors_0=function(){var t,e,i=0;for(t=this.lights_0.iterator();t.hasNext();){var n=t.next(),r=ye((i=(e=i)+1|0,e));n.startColor=n.desiredColor,n.desiredColor=this.colorMap_0.current.getColor_za3lpa$(r).toLinear(),n.colorMix=0}},br.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,function(t){var i=M(),n=t.image_3ds0aa$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.albedoMetal,0,1));e.setupImage_0(n,.025,.025),i.add_11rb$(n);var r=t.image_3ds0aa$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.normalRoughness,1,.5));e.setupImage_0(r,.025,.35),i.add_11rb$(r);var o,a=t.image_3ds0aa$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.positionAo,10,.05));e.setupImage_0(a,.025,.675),i.add_11rb$(a);var l=t.image_3ds0aa$(void 0,new S(null!=(o=e.deferredPipeline_0.aoPipeline)?o.aoMap:null,void 0,tn().aoMapColorModel()));e.setupImage_0(l,.35,.35),i.add_11rb$(l);var u=t.image_3ds0aa$(void 0,new Mr(e.deferredPipeline_0.mrtPass));return e.setupImage_0(u,.35,.675),i.add_11rb$(u),t.section_yfmn31$("Dynamic Lights",Cr(e)),t.section_yfmn31$("Deferred Shading",Nr(i,e)),t.section_yfmn31$("Scene",Er(e)),s}));var e},br.prototype.setupImage_0=function(t,e,i){t.isVisible=!1,t.relativeWidth=.3,t.relativeX=e,t.relativeY=i},Pr.prototype.setupLight_u83zut$=function(t,e,i,n){t.startPos.set_czzhiu$(this.startIt).scale_mx4ult$(e).add_czzhiu$(this.startConst),t.dir.set_czzhiu$(this.travelDir),t.travelDist=i,t.travelPos=n*i,t.speed=.25*this.$outer.rand_0.randomF_dleff0$(1,3)},Pr.$metadata$={kind:T,simpleName:"LightGroup",interfaces:[]},Tr.prototype.animate_mx4ult$=function(t){this.travelPos+=t*this.speed,this.travelPos>this.travelDist&&(this.travelPos-=this.travelDist),this.light.position.set_czzhiu$(this.dir).scale_mx4ult$(this.travelPos).add_czzhiu$(this.startPos),this.colorMix<1&&(this.colorMix+=2*t,this.colorMix>1&&(this.colorMix=1),this.startColor.mix_jpxij3$(this.desiredColor,this.colorMix,this.light.color))},Tr.$metadata$={kind:T,simpleName:"AnimatedLight",interfaces:[]},Or.prototype.getColor_za3lpa$=function(t){return this.colors.get_za3lpa$(t%this.colors.size)},Or.prototype.toString=function(){return this.name},Or.$metadata$={kind:T,simpleName:"ColorMap",interfaces:[]},br.prototype.instancedLightIndicatorModel_0=function(){var t=new C("instancedLightIndicators"),e={v:null},i=new q(t);e.v=i.stageInterfaceNode_iikjwn$("ifColors",i.instanceAttributeNode_nm2vx5$(J.Companion.COLORS).output);var n=i.premultipliedMvpNode().outMvpMat,r=i.multiplyNode_ze33is$(n,i.instanceAttrModelMat().output).output;i.positionOutput=i.vec4TransformNode_9krp9t$(i.attrPositions().output,r).outVec4;var o=new B(t);return o.colorOutput_a3v4si$(o.unlitMaterialNode_r20yfm$(e.v.output).outColor),t},br.prototype.gBufferShader_0=function(t,e,i){return new S(t,void 0,this.rgbMapColorModel_0(e,i))},br.prototype.rgbMapColorModel_0=function(t,e){var i=new C("rgbMap"),n={v:null},r=new q(i);n.v=r.stageInterfaceNode_iikjwn$("ifTexCoords",r.attrTexCoords().output),r.positionOutput=r.simpleVertexPositionNode().outVec4;var o=new B(i),s=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("colorTex"),n.v.output),a=o.splitNode_500t7j$(s.outColor,"rgb").output,l=o.multiplyNode_tuikh5$(o.addNode_ze33is$(a,new P(new Tt(t))).output,e);return o.colorOutput_a3v4si$(l.output,void 0,new P(new Tt(1))),i},Mr.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s=this.model;t:do{var a;for(r=wt.ALL,a=s.stages.values.iterator();a.hasNext();){var l=a.next();if(0!=(l.stage.mask&r.mask)){var u,p,c=l.nodes;e:do{var h;for(h=c.iterator();h.hasNext();){var f=h.next();if(Rt(f.name,"positionAo")&&e.isType(f,_t)){p=f;break e}}p=null}while(0);var _=null==(u=p)||e.isType(u,_t)?u:K();if(null!=_){o=_;break t}}}o=null}while(0);d(o).sampler.texture=this.mrtPass.positionAo;var m,$,y=this.model;t:do{var v;for(m=wt.ALL,v=y.stages.values.iterator();v.hasNext();){var g=v.next();if(0!=(g.stage.mask&m.mask)){var b,x,w=g.nodes;e:do{var z;for(z=w.iterator();z.hasNext();){var k=z.next();if(Rt(k.name,"normalRough")&&e.isType(k,_t)){x=k;break e}}x=null}while(0);var S=null==(b=x)||e.isType(b,_t)?b:K();if(null!=S){$=S;break t}}}$=null}while(0);d($).sampler.texture=this.mrtPass.normalRoughness;var C,N,E=this.model;t:do{var P;for(C=wt.ALL,P=E.stages.values.iterator();P.hasNext();){var T=P.next();if(0!=(T.stage.mask&C.mask)){var O,M,j=T.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var R=A.next();if(Rt(R.name,"albedoMetal")&&e.isType(R,_t)){M=R;break e}}M=null}while(0);var I=null==(O=M)||e.isType(O,_t)?O:K();if(null!=I){N=I;break t}}}N=null}while(0);d(N).sampler.texture=this.mrtPass.albedoMetal,dt.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},jr.prototype.shaderModel=function(){var t=new C,e={v:null},i=new q(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new B(t),r=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("positionAo"),e.v.output),o=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("normalRough"),e.v.output),s=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("albedoMetal"),e.v.output),a=n.splitNode_500t7j$(r.outColor,"a").output,l=n.splitNode_500t7j$(o.outColor,"a").output,u=n.splitNode_500t7j$(s.outColor,"a").output,p=n.combineNode_m7a9qd$(Ae.VEC_3F);p.inX=a,p.inY=l,p.inZ=u;var c=p;return n.colorOutput_a3v4si$(c.output,void 0,new P(new Tt(1))),t},jr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Ar=null;function Rr(){return null===Ar&&new jr,Ar}function Ir(){Lr=this,this.MAX_LIGHTS=5e3}Mr.$metadata$={kind:T,simpleName:"MetalRoughAoTex",interfaces:[dt]},Ir.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Lr=null;function Dr(){return null===Lr&&new Ir,Lr}function qr(t,e){void 0===t&&(t=null),void 0===e&&(e=Le());var i,n,r=null!=(n="string"==typeof(i=Yr().demoProps.get_11rb$("assetsBaseDir"))?i:null)?n:"";r.length>0&&(e.assetMgr.assetsBaseDir=r),new Br(e,t)}function Br(t,i){var n;Yr(),void 0===i&&(i=null),this.dbgOverlay_0=new Ue(t,Fe.LOWER_RIGHT),this.newScenes_0=M(),this.currentScenes_0=M(),this.defaultScene_0=new Wr("glTF Models",void 0,Zr),this.demos_0=Ve([ae("atmosphereDemo",new Wr("Atmospheric Scattering",void 0,Jr)),ae("proceduralDemo",new Wr("Procedural Geometry",void 0,Qr)),ae("gltfDemo",new Wr("glTF Models",void 0,to)),ae("deferredDemo",new Wr("Deferred Shading",void 0,eo)),ae("aoDemo",new Wr("Ambient Occlusion",void 0,io)),ae("ssrDemo",new Wr("Reflections",void 0,no)),ae("pbrDemo",new Wr("PBR Materials",void 0,ro)),ae("treeDemo",new Wr("Procedural Tree",void 0,oo)),ae("instanceDemo",new Wr("Instanced Drawing",void 0,so)),ae("simplificationDemo",new Wr("Simplification",void 0,ao)),ae("helloWorldDemo",new Wr("Hello World",!0,lo)),ae("helloGltfDemo",new Wr("Hello glTF",!0,uo))]);var r,o,a=this.dbgOverlay_0.ui,l=Yr();a.isVisible=null!=(o="boolean"==typeof(r=l.demoProps.get_11rb$("dbgOverlay.isVisible"))?r:null)&&o;var u=t.scenes,p=this.dbgOverlay_0.ui;u.add_11rb$(p);var c=t.scenes,h=this.demoOverlay_0(t);c.add_11rb$(h);var d=t.onRender,f=qe("onRender",function(t,e){return t.onRender_0(e),s}.bind(null,this));d.add_11rb$(f);var _,m=this.demos_0,$=i,y=(null!=(n=(e.isType(_=m,He)?_:K()).get_11rb$($))?n:this.defaultScene_0).sceneLoader(t);R(this.newScenes_0,y.setupScenes_aemszp$(t)),t.run()}function Fr(t){return new Se}function Ur(t){return t.componentUi_mloaa0$(Fr),t.containerUi_2t3ptw$(qe("BlurredComponentUi",(function(t){return new De(t)}))),s}function Vr(t,e,i,n,r){return function(o){o.layoutSpec.setOrigin_4ujscr$(tt(),ge(t.v,!0),tt()),o.layoutSpec.setSize_4ujscr$(et(100,!0),ge(30,!0),it()),o.textAlignment=new rt(nt.START,nt.CENTER),t.v-=35;var a=o.onClick,l=function(t,e,i,n){return function(r,o,a,l){var u=t.sceneLoader(e);return R(i.newScenes_0,u.setupScenes_aemszp$(e)),n.isOpen=!1,s}}(e,i,n,r);return a.add_11rb$(l),s}}function Gr(t){return function(e){e.layoutSpec.setOrigin_4ujscr$(tt(),ge(10,!0),tt()),e.layoutSpec.setSize_4ujscr$(et(100,!0),ge(30,!0),it()),e.text="Debug Info",e.isEnabled=t.dbgOverlay_0.ui.isVisible;var i=e.onStateChange,n=function(t){return function(e){return t.dbgOverlay_0.ui.isVisible=e.isEnabled,s}}(t);return i.add_11rb$(n),s}}function Hr(t,e,i){return function(n){return n.unaryPlus_uv0sim$(i.container_t34sov$("demos",function(t,e,i,n){return function(r){r.ui.setCustom_11rb$(new Se),r.layoutSpec.setOrigin_4ujscr$(tt(),ge(45,!0),tt()),r.layoutSpec.setSize_4ujscr$(it(),et(100,!0).minus_m986jv$(ge(110,!0)),it());var o,a,l={v:-30},u=t.demos_0.values,p=M();for(o=u.iterator();o.hasNext();){var c=o.next();c.isHidden||p.add_11rb$(c)}for(a=p.iterator();a.hasNext();){var h=a.next(),d=e,f=t,_=i;r.unaryPlus_uv0sim$(n.button_9zrh0o$(h.label,Vr(l,h,d,f,_)))}return s}}(t,e,n,i))),n.unaryPlus_uv0sim$(i.toggleButton_6j87po$("showDbg",Gr(t))),s}}function Wr(t,e,i){void 0===e&&(e=!1),this.label=t,this.isHidden=e,this.sceneLoader=i}function Kr(){Xr=this,this.demoProps=pt()}br.$metadata$={kind:T,simpleName:"DeferredDemo",interfaces:[ho]},Br.prototype.onRender_0=function(t){if(!this.newScenes_0.isEmpty()){var e,i,n;for(e=this.currentScenes_0.iterator();e.hasNext();){var r=e.next();t.scenes.remove_11rb$(r),r.dispose_aemszp$(t)}this.currentScenes_0.clear();var o=0;for(i=this.newScenes_0.iterator();i.hasNext();){var s=i.next();t.scenes.add_wxm5ur$(ye((o=(n=o)+1|0,n)),s),this.currentScenes_0.add_11rb$(s)}this.newScenes_0.clear()}},Br.prototype.demoOverlay_0=function(t){return ve(t.screenDpi,"demo-overlay",void 0,(e=this,i=t,function(t,n){return t.theme=Ce(ke.Companion.DARK,Ur),t.content.ui.setCustom_11rb$(new Se),t.unaryPlus_63m4fk$(t.drawerMenu_enmky4$("menu","Demos",void 0,Hr(e,i,t))),s}));var e,i},Wr.$metadata$={kind:T,simpleName:"DemoEntry",interfaces:[]},Object.defineProperty(Kr.prototype,"awsBaseUrl",{configurable:!0,get:function(){var t,e;return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("awsBaseUrl"))?t:null)?e:"https://fabmax-kool-pbr.s3.eu-central-1.amazonaws.com"}}),Object.defineProperty(Kr.prototype,"envMapBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/hdri";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.envMaps"))?t:null)?e:i}}),Object.defineProperty(Kr.prototype,"pbrBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/materials";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.materials"))?t:null)?e:i}}),Object.defineProperty(Kr.prototype,"modelBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/models";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.models"))?t:null)?e:i}}),Kr.prototype.setProperty_bm4g0d$=function(t,e){this.demoProps.put_xwzc9p$(t,e)},Kr.prototype.getProperty_umlfku$=Be("kool-kool-demo.de.fabmax.kool.demo.Demo.Companion.getProperty_umlfku$",(function(t,e,i,n){var r,o;return null!=(o=e(r=this.demoProps.get_11rb$(i))?r:null)?o:n})),Kr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Xr=null;function Yr(){return null===Xr&&new Kr,Xr}function Zr(t){return new fo}function Jr(t){return new en}function Qr(t){return new Sl}function to(t){return new fo}function eo(t){return new br}function io(t){return new Fi}function no(t){return new Zo}function ro(t){return new $s}function oo(t){return new Wl}function so(t){return new Bo}function ao(t){return new Rl}function lo(t){return new No}function uo(t){return new Eo}function po(t){this.$delegate_ubybqq$_0=t,this.index=0}function co(t,e){return e=e||Object.create(po.prototype),po.call(e,Zt(t.slice())),e}function ho(t){this.name=t,this.scenes=M(),this.mainScene_w78jla$_0=this.mainScene_w78jla$_0,this.menuScene=null}function fo(){ho.call(this,"glTF Models"),this.foxAnimator_0=new Co(this);var t,e=new wo(this,"Flight Helmet",Yr().modelBasePath+"/flight_helmet/FlightHelmet.gltf",4,$.Companion.ZERO,!1,new Lt(0,1.25,0),!1,3.5),i=new wo(this,"Polly",Yr().modelBasePath+"/project_polly_jpg.glb",3,$.Companion.ZERO,!1,new Lt(0,1.25,0),!1,3.5),n=new wo(this,"Coffee Cart",Yr().modelBasePath+"/CoffeeCart_01.glb",2,new $(0,-.01,0),!1,new Lt(0,1.75,0),!1,3.5),r=new wo(this,"Camera",Yr().modelBasePath+"/camera.glb",20,$.Companion.ZERO,!0,new Lt(0,.5,0),!1,5),o=new wo(this,"Fox",Yr().modelBasePath+"/fox.glb",.01,$.Companion.ZERO,!1,new Lt(0,1.25,0),!0,3.5);o.animate=(t=this,function(e,i,n){return t.foxAnimator_0.animate_t7fsfh$(e,n),s}),this.models_0=co([e,i,n,r,o,new wo(this,"Animated Box",Yr().modelBasePath+"/BoxAnimated.gltf",1,new $(0,.5,0),!1,new Lt(0,1.5,0),!1,5),new wo(this,"Morph Cube",Yr().modelBasePath+"/AnimatedMorphCube.glb",1,new $(0,1,0),!1,new Lt(0,1,0),!1,3.5),new wo(this,"Alpha Mode Test",Yr().modelBasePath+"/AlphaBlendModeTest.glb",.5,new $(0,.06,0),!1,new Lt(0,.75,0),!1,3.5)]),this.orbitTransform_w8joii$_0=this.orbitTransform_w8joii$_0,this.camTranslationTarget_0=null,this.trackModel_0=!1,this.envMaps_wlbbl4$_0=this.envMaps_wlbbl4$_0,this.shadowsForward_0=M(),this.aoPipelineForward_0=null,this.contentGroupForward_0=new ut,this.deferredPipeline_kn30ex$_0=this.deferredPipeline_kn30ex$_0,this.contentGroupDeferred_0=new ut,this.animationSpeed_0=.5,this.animationTime_0=0,this.autoRotate_0=!0,this.useDeferredPipeline_0=!0,this.isAo_ct9a5s$_0=!0}function _o(t,e,i,n,r,o){z.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$this$=t,this.local$this$GltfDemo=e,this.local$closure$ctx=i,this.local$$receiver=n}function mo(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$ctx=i}function $o(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$ctx=i}function yo(t,e){return function(i){i.setMouseRotation_dleff0$(0,-30),i.unaryPlus_uv0sim$(t.camera),i.zoom=e.models_0.current.zoom,i.translation.set_czzhiw$(e.models_0.current.lookAt);var n=i.onUpdate,r=function(t,e){return function(i,n){var r,o={v:t.camTranslationTarget_0};if(t.trackModel_0){var a=t.models_0.current.forwardModel;if(null!=a){var l=a.globalCenter;o.v=new Lt(l.x,l.y,l.z)}}else t.autoRotate_0&&(e.verticalRotation-=3*n.deltaT);if(null!=(r=o.v)){var u=e,p=t,c=Dt(u.translation).scale_14dthe$(.9).add_czzhiw$(Dt(r).scale_14dthe$(.1));u.translation.set_czzhiw$(c),c.distance_czzhiw$(r)<.01&&(p.camTranslationTarget_0=null)}return s}}(e,i);return n.add_11rb$(r),s}}function vo(t,e,i){return function(n,r){return t.autoRotate_0&&(e.setIdentity(),e.rotate_5820x2$(3*i.time,Lt.Companion.Y_AXIS)),s}}function go(t,e){return function(i){var n;i.generate_v2sixm$(function(t){return function(e){return t.roundCylinder_0(e,4.1,.2),s}}(t));var r,o,a=new ct,l=t;e||(R(a.shadowMaps,l.shadowsForward_0),a.useScreenSpaceAmbientOcclusion_vv6xll$(null!=(r=l.aoPipelineForward_0)?r.aoMap:null),a.useImageBasedLighting_po417x$(l.envMaps_0)),a.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/Fabric030/Fabric030_1K_Color2.jpg"),a.useNormalMap_9sobi5$(Yr().pbrBasePath+"/Fabric030/Fabric030_1K_Normal.jpg"),a.useOcclusionMap_9sobi5$(Yr().pbrBasePath+"/Fabric030/Fabric030_1K_AmbientOcclusion.jpg"),a.useRoughnessMap_ivxn3r$(Yr().pbrBasePath+"/Fabric030/Fabric030_1K_Roughness.jpg"),i.onDispose.add_11rb$((o=a,function(t,e){var i,n,r,a;return null!=(i=o.albedoMap)&&i.dispose(),null!=(n=o.normalMap)&&n.dispose(),null!=(r=o.roughnessMap)&&r.dispose(),null!=(a=o.occlusionMap)&&a.dispose(),s}));var u=a;return n=e?new ht(u):new We(u),i.shader=n,s}}function bo(t,e,i,n,r){z.call(this,r),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$$receiver=e,this.local$isDeferredShading=i,this.local$ctx=n}function xo(t,e){return function(i){return i.cycler_4ni5b8$("Model:",t.models_0,function(t,e){return function(i,n){return e.cycleModel_0(n,i,t),s}}(e,t)),i.sliderWithValue_xbu91d$("Animation Speed:",t.animationSpeed_0,0,1,2,void 0,function(t){return function(e){return t.animationSpeed_0=e.value,s}}(t)),i.toggleButton_8v9fdr$("Deferred Shading",t.useDeferredPipeline_0,function(t){return function(e){return t.useDeferredPipeline_0=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.toggleButton_8v9fdr$("Ambient Occlusion",t.isAo_0,function(t){return function(e){return t.isAo_0=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.toggleButton_8v9fdr$("Screen Space Reflections",!0,function(t){return function(e){return t.deferredPipeline_0.isSsrEnabled=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.sliderWithValue_xbu91d$("SSR Map Size:",.7,.1,1,1,void 0,function(t){return function(e){return t.deferredPipeline_0.reflectionMapSize=L(10*e.value)/10,s}}(t)),i.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),s}}function wo(t,e,i,n,r,o,s,a,l){this.$outer=t,this.name=e,this.assetPath=i,this.scale=n,this.translation=r,this.generateNormals=o,this.lookAt=s,this.trackModel=a,this.zoom=l,this.forwardModel=null,this.deferredModel=null,this.isVisible=!1,this.animate=So}function zo(t,e,i,n){return function(r,o){return r.isVisible=t.isVisible,t.animate(n,e.animationTime_0,i),s}}function ko(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$model=void 0,this.local$isDeferredShading=e,this.local$ctx=i}function So(t,e,i){return t.applyAnimation_14dthe$(e),s}function Co(t){this.$outer=t,this.angle=0,this.radius=3,this.position=Je()}function No(){ho.call(this,"Hello World")}function Eo(){ho.call(this,"Hello glTF")}function Po(t){var e=t.cubeProps.defaults();return e.colored_6taknv$(),e.centered(),t.cube_lhbb6w$(t.cubeProps),s}function To(t){return t.albedoSource=y.VERTEX_ALBEDO,t.metallic=0,t.roughness=.25,s}function Oo(t){return t.generate_v2sixm$(Po),t.shader=v(To),s}function Mo(t){return t.setDirectional_czzhiu$(new $(-1,-1,-1)),t.setColor_y83vuj$(m.Companion.WHITE,5),s}function jo(){var t=new I(null);return ee(t),t.unaryPlus_uv0sim$(g(void 0,Oo)),t.lighting.singleLight_q9zcvo$(Mo),t}function Ao(t){return t.setSpot_nve3wz$(new $(5,6.25,7.5),new $(-1,-1.25,-1.5),45),t.setColor_y83vuj$(m.Companion.WHITE,300),s}function Ro(t){return t.gridProps.defaults(),t.grid_gtbnl3$(t.gridProps),s}function Io(t,e){return function(i){return i.generate_v2sixm$(Ro),i.shader=v(function(t,e){return function(i){return i.useStaticAlbedo_d7aj7k$(m.Companion.WHITE),i.useScreenSpaceAmbientOcclusion_vv6xll$(t.aoMap),R(i.shadowMaps,e),s}}(t,e)),s}}function Lo(t){return function(e,i){return t.applyAnimation_14dthe$(i.time),s}}function Do(t,e,i,n,r,o){z.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$shadows=t,this.local$closure$aoPipeline=e,this.local$this$=i,this.local$$receiver=n}function qo(t){var e=new I(null);ee(e),e.lighting.singleLight_q9zcvo$(Ao);var i,n,r,o=ne(new l(e,0)),s=u.Companion.createForward_ushge7$(e);return e.unaryPlus_uv0sim$(g(void 0,Io(s,o))),t.assetMgr.launch_eln4bt$((i=o,n=s,r=e,function(t,e,o){var s=new Do(i,n,r,t,this,e);return o?s:s.doResume(null)})),e}function Bo(){ho.call(this,"Instanced Drawing"),this.nBunnies_0=10,this.isLodColors_0=!1,this.isAutoRotate_0=!0,this.modelCenter_0=je(),this.modelRadius_0=1,this.lodController_0=new oi,this.lods_0=ai([new Go(8,10,si(m.Companion.MD_PURPLE)),new Go(32,20,si(m.Companion.MD_RED)),new Go(128,30,si(m.Companion.MD_AMBER)),new Go(500,40,si(m.Companion.MD_LIME)),new Go(2e3,50,si(m.Companion.MD_GREEN)),new Go(1e4,1e3,si(m.Companion.MD_BLUE))])}function Fo(t,i){return function(n){var r=t.camera;e.isType(r,W)||K(),r.clipNear=1,r.clipFar=500,n.unaryPlus_uv0sim$(r),n.minZoom=1,n.maxZoom=250,n.zoomMethod=Qe.ZOOM_CENTER,n.zoom=40,n.setMouseRotation_dleff0$(30,-40);var o=n.onUpdate,a=function(t,e){return function(i,n){return t.isAutoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(i,n);return o.add_11rb$(a),s}}function Uo(t){return t.setDirectional_czzhiu$(ti(-1)),t.setColor_y83vuj$(m.Companion.WHITE,1),s}function Vo(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$InstanceDemo=t,this.local$$receiver=e}function Go(t,e,i){this.maxInsts=t,this.maxDist=e,this.color=i,this.mesh=null}function Ho(t,e,i){this.$outer=t,ri.call(this),this.position=e,this.rotSpeed=120*i.length(),this.rotAxis=i.norm_5s4mqq$(je()),this.color=Te()}function Wo(t){var i=L(t);return e.imul(e.imul(i,i),i).toString()}function Ko(t){return function(e){var i=Wo;return e.sliderWithValue_xbu91d$("Bunnies:",t.nBunnies_0,5,20,void 0,i,function(t){return function(e){var i=L(e.value);return i!==t.nBunnies_0&&(t.nBunnies_0=i,t.setupInstances_0(t.lodController_0)),s}}(t)),e.toggleButton_8v9fdr$("Color by LOD",t.isLodColors_0,function(t){return function(e){return t.isLodColors_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Auto Rotate",t.isAutoRotate_0,function(t){return function(e){return t.isAutoRotate_0=e.isEnabled,s}}(t)),s}}function Xo(t,i,n){return function(r,o){var a,l,u,p=t.lodController_0.getInstanceCount_za3lpa$(i),c=e.imul(p,null!=(u=null!=(l=null!=(a=t.lods_0.get_za3lpa$(i).mesh)?a.geometry:null)?l.numPrimitives:null)?u:0);return n.text=p.toString()+" insts / "+c+" tris",s}}function Yo(t){return function(e){return e.section_yfmn31$("Scene",Ko(t)),e.section_yfmn31$("Info",function(t){return function(e){var i;i=t.lods_0;for(var n=0;n!==i.size;++n){var r=e.textWithValue_puj7f4$("LOD "+n+":",""),o=t;r.onUpdate.add_11rb$(Xo(o,n,r))}return s}}(t)),s}}function Zo(){hs(),ho.call(this,"Reflections"),this.deferredPipeline_v7oinh$_0=this.deferredPipeline_v7oinh$_0,this.lights_0=Zt([new as(this,m.Companion.MD_CYAN),new as(this,m.Companion.MD_RED),new as(this,m.Companion.MD_AMBER),new as(this,m.Companion.MD_GREEN)]),this.noSsrMap_0=new pi(new m(0,0,0,0)),this.lightCount_0=4,this.lightPower_0=500,this.lightSaturation_0=.4,this.lightRandomness_0=.3,this.isScrSpcReflections_0=!0,this.autoRotate_0=!0,this.showLightIndicators_0=!0;var t=new po(hs().matColors_0);t.index=1,this.colorCycler_0=t,this.roughness_0=.1,this.metallic_0=0,this.bunnyMesh_0=null,this.groundMesh_0=null,this.modelShader_0=null}function Jo(t,e){return function(i){i.unaryPlus_uv0sim$(t.camera),i.zoomMethod=Qe.ZOOM_CENTER,i.zoom=17,i.maxZoom=50,i.translation.set_yvo9jy$(0,2,0),i.setMouseRotation_dleff0$(0,-5);var n=i.onUpdate,r=function(t,e){return function(i,n){return t.autoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(e,i);return n.add_11rb$(r),s}}function Qo(t,e,i){return function(n,r){return t.dispose(),e.dispose(),i.dispose(),s}}function ts(t){var e=t.rectProps.defaults();return t.rotate_ad55pp$(-90,$.Companion.X_AXIS),e.size.set_dleff0$(100,100),e.origin.set_y2kzbl$(-e.size.x/2,-e.size.y/2,0),e.generateTexCoords_mx4ult$(4),t.rect_e5k3t5$(t.rectProps),s}function es(t,e,i,n){return function(r){r.generate_v2sixm$(ts),r.isCastingShadow=!1,t.groundMesh_0=r;var o=new ct,a=e,l=i,u=n;return o.useAlbedoMap_daqygw$(a),o.useNormalMap_9wkq18$(l),o.useRoughnessMap_daqygw$(u),r.shader=new ht(o),s}}function is(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$MultiLightDemo=e,this.local$floorAlbedo=void 0,this.local$floorNormal=void 0,this.local$$receiver=i}function ns(t){return function(e){var i=co([1,2,3,4]);return i.index=3,e.cycler_4ni5b8$("Lights:",i,function(t){return function(e,i){return t.lightCount_0=e,t.updateLighting_0(),s}}(t)),e.sliderWithValue_xbu91d$("Strength:",t.lightPower_0,0,1e3,0,void 0,function(t){return function(e){return t.lightPower_0=e.value,t.updateLighting_0(),s}}(t)),e.sliderWithValue_xbu91d$("Saturation:",t.lightSaturation_0,0,1,void 0,void 0,function(t){return function(e){return t.lightSaturation_0=e.value,t.updateLighting_0(),s}}(t)),s}}function rs(t,e){return function(i){return i.toggleButton_8v9fdr$("Enabled",t.deferredPipeline_0.isSsrEnabled,function(t){return function(e){return t.deferredPipeline_0.isSsrEnabled=e.isEnabled,s}}(t)),i.toggleButton_8v9fdr$("Show SSR Map",e.isVisible,function(t){return function(e){return t.isVisible=e.isEnabled,s}}(e)),i.sliderWithValue_xbu91d$("Map Size:",t.deferredPipeline_0.reflectionMapSize,.1,1,1,void 0,function(t){return function(e){return t.deferredPipeline_0.reflectionMapSize=L(10*e.value)/10,s}}(t)),s}}function os(t){return function(e){return e.cycler_4ni5b8$("Color:",t.colorCycler_0,function(t){return function(e,i){var n;return null!=(n=t.modelShader_0)&&(n.albedo=e.linColor),s}}(t)),e.sliderWithValue_xbu91d$("Roughness:",t.roughness_0,0,1,void 0,void 0,function(t){return function(e){var i;return t.roughness_0=e.value,null!=(i=t.modelShader_0)&&(i.roughness=e.value),s}}(t)),e.sliderWithValue_xbu91d$("Metallic:",t.metallic_0,0,1,void 0,void 0,function(t){return function(e){var i;return t.metallic_0=e.value,null!=(i=t.modelShader_0)&&(i.metallic=e.value),s}}(t)),s}}function ss(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Light Indicators",t.showLightIndicators_0,function(t){return function(e){return t.showLightIndicators_0=e.isEnabled,t.updateLighting_0(),s}}(t)),s}}function as(t,e){this.$outer=t,ut.call(this),this.color=e,this.light=new lt;var i=new li;i.isCastingShadow=!1,this.spotAngleMesh_0=i,this.isEnabled_0=!0,this.animPos_0=0,this.lightMeshShader_0=new ui,this.meshPos_0=je(),this.anglePos_0=0,this.rotOff_0=ni(0,3),this.light.setSpot_nve3wz$($.Companion.ZERO,$.Companion.X_AXIS,50);var n,r=g(void 0,(n=this,function(t){return t.isCastingShadow=!1,t.generate_v2sixm$(ls),t.shader=n.lightMeshShader_0,s}));this.unaryPlus_uv0sim$(r),this.unaryPlus_uv0sim$(this.spotAngleMesh_0);var o=this.onUpdate,a=function(t,e){return function(i,n){t.autoRotate_0&&(e.animPos_0+=n.deltaT);var r=e.animPos_0/15+e.rotOff_0,o=j.cos(r)*t.lightRandomness_0;return e.light.spotAngle=60-20*o,e.updateSpotAngleMesh_0(),e.setIdentity(),e.rotate_ad55pp$(-10*e.animPos_0,$.Companion.Y_AXIS),e.translate_czzhiu$(e.meshPos_0),e.rotate_ad55pp$(e.anglePos_0,$.Companion.Y_AXIS),e.rotate_ad55pp$(30+20*o,$.Companion.Z_AXIS),e.transform.transform_w1lst9$(e.light.position.set_czzhiu$($.Companion.ZERO),1),e.transform.transform_w1lst9$(e.light.direction.set_czzhiu$($.Companion.NEG_X_AXIS),0),s}}(this.$outer,this);o.add_11rb$(a)}function ls(t){t.sphereProps.uvDefaults().radius=.1,t.uvSphere_mojs8w$(t.sphereProps),t.rotate_ad55pp$(90,$.Companion.Z_AXIS);var e=t.cylinderProps.defaults();e.bottomRadius=.015,e.topRadius=.015,e.height=.85,e.steps=4,t.cylinder_tnt2h$(t.cylinderProps),t.translate_y2kzbl$(0,.85,0);var i=t.cylinderProps.defaults();return i.bottomRadius=.1,i.topRadius=.0025,i.height=.15,t.cylinder_tnt2h$(t.cylinderProps),s}function us(t,e){this.name=t,this.linColor=e}function ps(){cs=this,this.matColors_0=Zt([new us("White",m.Companion.WHITE.toLinear()),new us("Red",m.Companion.MD_RED.toLinear()),new us("Pink",m.Companion.MD_PINK.toLinear()),new us("Purple",m.Companion.MD_PURPLE.toLinear()),new us("Deep Purple",m.Companion.MD_DEEP_PURPLE.toLinear()),new us("Indigo",m.Companion.MD_INDIGO.toLinear()),new us("Blue",m.Companion.MD_BLUE.toLinear()),new us("Cyan",m.Companion.MD_CYAN.toLinear()),new us("Teal",m.Companion.MD_TEAL.toLinear()),new us("Green",m.Companion.MD_GREEN.toLinear()),new us("Light Green",m.Companion.MD_LIGHT_GREEN.toLinear()),new us("Lime",m.Companion.MD_LIME.toLinear()),new us("Yellow",m.Companion.MD_YELLOW.toLinear()),new us("Amber",m.Companion.MD_AMBER.toLinear()),new us("Orange",m.Companion.MD_ORANGE.toLinear()),new us("Deep Orange",m.Companion.MD_DEEP_ORANGE.toLinear()),new us("Brown",m.Companion.MD_BROWN.toLinear()),new us("Grey",m.Companion.MD_GREY.toLinear()),new us("Blue Grey",m.Companion.MD_BLUE_GREY.toLinear()),new us("Almost Black",new m(.1,.1,.1).toLinear())])}Br.$metadata$={kind:T,simpleName:"Demo",interfaces:[]},Object.defineProperty(po.prototype,"current",{configurable:!0,get:function(){return this.get_za3lpa$(this.index)}}),po.prototype.next=function(){return this.index=(this.index+1|0)%this.size,this.current},po.prototype.prev=function(){return this.index=(this.index+this.size-1+this.size|0)%this.size,this.current},Object.defineProperty(po.prototype,"size",{get:function(){return this.$delegate_ubybqq$_0.size}}),po.prototype.contains_11rb$=function(t){return this.$delegate_ubybqq$_0.contains_11rb$(t)},po.prototype.containsAll_brywnq$=function(t){return this.$delegate_ubybqq$_0.containsAll_brywnq$(t)},po.prototype.get_za3lpa$=function(t){return this.$delegate_ubybqq$_0.get_za3lpa$(t)},po.prototype.indexOf_11rb$=function(t){return this.$delegate_ubybqq$_0.indexOf_11rb$(t)},po.prototype.isEmpty=function(){return this.$delegate_ubybqq$_0.isEmpty()},po.prototype.iterator=function(){return this.$delegate_ubybqq$_0.iterator()},po.prototype.lastIndexOf_11rb$=function(t){return this.$delegate_ubybqq$_0.lastIndexOf_11rb$(t)},po.prototype.listIterator=function(){return this.$delegate_ubybqq$_0.listIterator()},po.prototype.listIterator_za3lpa$=function(t){return this.$delegate_ubybqq$_0.listIterator_za3lpa$(t)},po.prototype.subList_vux9f0$=function(t,e){return this.$delegate_ubybqq$_0.subList_vux9f0$(t,e)},po.$metadata$={kind:T,simpleName:"Cycler",interfaces:[Ge]},Object.defineProperty(ho.prototype,"mainScene",{configurable:!0,get:function(){return null==this.mainScene_w78jla$_0?o("mainScene"):this.mainScene_w78jla$_0},set:function(t){this.mainScene_w78jla$_0=t}}),ho.prototype.setupScenes_aemszp$=function(t){var e;this.mainScene=this.setupMainScene_aemszp$(t);var i=this.scenes,n=this.mainScene;return i.add_11rb$(n),this.menuScene=this.setupMenu_aemszp$(t),null!=(e=this.menuScene)&&this.scenes.add_11rb$(e),this.lateInit_aemszp$(t),this.scenes},ho.prototype.setupMenu_aemszp$=function(t){return null},ho.prototype.lateInit_aemszp$=function(t){},ho.$metadata$={kind:T,simpleName:"DemoScene",interfaces:[]},Object.defineProperty(fo.prototype,"orbitTransform_0",{configurable:!0,get:function(){return null==this.orbitTransform_w8joii$_0?o("orbitTransform"):this.orbitTransform_w8joii$_0},set:function(t){this.orbitTransform_w8joii$_0=t}}),Object.defineProperty(fo.prototype,"envMaps_0",{configurable:!0,get:function(){return null==this.envMaps_wlbbl4$_0?o("envMaps"):this.envMaps_wlbbl4$_0},set:function(t){this.envMaps_wlbbl4$_0=t}}),Object.defineProperty(fo.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_kn30ex$_0?o("deferredPipeline"):this.deferredPipeline_kn30ex$_0},set:function(t){this.deferredPipeline_kn30ex$_0=t}}),Object.defineProperty(fo.prototype,"isAo_0",{configurable:!0,get:function(){return this.isAo_ct9a5s$_0},set:function(t){this.isAo_ct9a5s$_0=t,this.deferredPipeline_0.isAoEnabled=t}}),fo.prototype.lateInit_aemszp$=function(t){this.models_0.current.isVisible=!0,this.trackModel_0=this.models_0.current.trackModel},_o.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},_o.prototype=Object.create(z.prototype),_o.prototype.constructor=_o,_o.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,Yr().envMapBasePath+"/shanghai_bund_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.local$this$GltfDemo.envMaps_0=this.result_0,this.local$this$.unaryPlus_uv0sim$(x.Skybox.cube_wgmpek$(this.local$this$GltfDemo.envMaps_0.reflectionMap,1)),this.state_0=3,this.result_0=this.local$this$GltfDemo.makeDeferredContent_0(this.local$this$,this.local$closure$ctx,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$GltfDemo.makeForwardContent_0(this.local$this$,this.local$closure$ctx,this),this.result_0===w)return w;continue;case 4:return this.local$this$GltfDemo.setupPipelines_0(),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fo.prototype.setupMainScene_aemszp$=function(t){var e,i,n,r,o,a=new I("gltfDemo");return this.setupLighting_0(a),this.setupCamera_0(a),t.assetMgr.launch_eln4bt$((e=a,i=this,n=t,function(t,r,o){var s=new _o(e,i,n,t,this,r);return o?s:s.doResume(null)})),a.onUpdate.add_11rb$((r=t,o=this,function(t,e){return o.animationTime_0+=r.deltaT*o.animationSpeed_0,o.foxAnimator_0.updatePosition_aemszp$(r),s})),a},fo.prototype.setupPipelines_0=function(){var t,e,i=this.useDeferredPipeline_0,n=!i;for(this.contentGroupForward_0.isVisible=n,e=this.shadowsForward_0.iterator();e.hasNext();)e.next().isShadowMapEnabled=n;null!=(t=this.aoPipelineForward_0)&&(t.isEnabled=n&&this.isAo_0),this.contentGroupDeferred_0.isVisible=i,this.deferredPipeline_0.isEnabled=i,this.deferredPipeline_0.isAoEnabled=this.isAo_0},mo.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},mo.prototype=Object.create(z.prototype),mo.prototype.constructor=mo,mo.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=u.Companion.createForward_ushge7$(this.local$$receiver);if(t.radius=.2,this.$this.aoPipelineForward_0=t,R(this.$this.shadowsForward_0,Zt([new l(this.local$$receiver,0,2048,this.$this.contentGroupForward_0),new l(this.local$$receiver,1,2048,this.$this.contentGroupForward_0)])),this.state_0=2,this.result_0=this.$this.setupContentGroup_0(this.$this.contentGroupForward_0,!1,this.local$ctx,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return void this.local$$receiver.unaryPlus_uv0sim$(this.$this.contentGroupForward_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fo.prototype.makeForwardContent_0=function(t,e,i,n){var r=new mo(this,t,e,i);return n?r:r.doResume(null)},$o.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},$o.prototype=Object.create(z.prototype),$o.prototype.constructor=$o,$o.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,e=new G;e.isWithAmbientOcclusion=!0,e.isWithScreenSpaceReflections=!0,e.isWithEmissive=!0,e.baseReflectionStep=.02,e.maxGlobalLights=2,e.useImageBasedLighting_po417x$(this.$this.envMaps_0);var i=e;if(this.$this.deferredPipeline_0=new H(this.local$$receiver,i),null!=(t=this.$this.deferredPipeline_0.aoPipeline)&&(t.radius=.2),this.state_0=2,this.result_0=this.$this.setupContentGroup_0(this.$this.deferredPipeline_0.contentGroup,!0,this.local$ctx,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var n=this.$this.contentGroupDeferred_0;return n.isFrustumChecked=!1,n.unaryPlus_uv0sim$(this.$this.deferredPipeline_0.renderOutput),void this.local$$receiver.unaryPlus_uv0sim$(n);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fo.prototype.makeDeferredContent_0=function(t,e,i,n){var r=new $o(this,t,e,i);return n?r:r.doResume(null)},fo.prototype.setupCamera_0=function(t){this.orbitTransform_0=a(t,void 0,yo(t,this)),t.unaryPlus_uv0sim$(this.orbitTransform_0)},fo.prototype.setupLighting_0=function(t){t.lighting.lights.clear();var e=t.lighting.lights,i=new lt,n=new $(7,8,8),r=$.Companion.ZERO;i.setSpot_nve3wz$(n,r.subtract_2gj7b4$(n,je()).norm(),25),i.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.3).toLinear(),500),e.add_11rb$(i);var o=t.lighting.lights,s=new lt,a=new $(-7,8,8),l=$.Companion.ZERO;s.setSpot_nve3wz$(a,l.subtract_2gj7b4$(a,je()).norm(),25),s.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.3).toLinear(),500),o.add_11rb$(s)},bo.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},bo.prototype=Object.create(z.prototype),bo.prototype.constructor=bo,bo.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:this.local$$receiver.rotate_5820x2$(-60,Lt.Companion.Y_AXIS),this.local$$receiver.onUpdate.add_11rb$(vo(this.$this,this.local$$receiver,this.local$ctx)),this.local$$receiver.unaryPlus_uv0sim$(b(void 0,!0,go(this.$this,this.local$isDeferredShading))),this.local$tmp$=this.$this.models_0.iterator(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(!this.local$tmp$.hasNext()){this.state_0=4;continue}var t,e=this.local$tmp$.next();if(this.state_0=3,this.result_0=e.load_ggm1l6$(this.local$isDeferredShading,this.local$ctx,this),this.result_0===w)return w;continue;case 3:null!=(t=this.result_0)&&this.local$$receiver.unaryPlus_uv0sim$(t),this.state_0=2;continue;case 4:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fo.prototype.setupContentGroup_0=function(t,e,i,n,r){var o=new bo(this,t,e,i,n);return r?o:o.doResume(null)},fo.prototype.cycleModel_0=function(t,e,i){var n,r;t.isVisible=!1,i.runDelayed_hd6vpk$(1,(n=t,r=i,function(t){var e,i;return null!=(e=n.forwardModel)&&e.dispose_aemszp$(r),null!=(i=n.deferredModel)&&i.dispose_aemszp$(r),s})),e.isVisible=!0,this.orbitTransform_0.zoom=e.zoom,this.camTranslationTarget_0=e.lookAt,this.trackModel_0=e.trackModel},fo.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,i=t,function(t){return t.section_yfmn31$("glTF models",xo(e,i)),s}));var e,i},fo.prototype.roundCylinder_0=function(t,i,n){for(var r=n/2,o=M(),s=0;s<=20;s++){var a=Ke.PI/20*s,l=j.sin(a)*r+i,u=j.cos(a)*r-r,p=new $(l,u,0);o.add_11rb$(p)}for(var c={v:0},h=0;h<=100;h++){var d,f,_=Ke.PI/100*h*2,m=0;for(d=o.iterator();d.hasNext();){var y=d.next(),v=ye((m=(f=m)+1|0,f)),g=new Xe(i+v/o.size*Ke.PI*r,0);g.scale_mx4ult$(.3),g.rotate_mx4ult$(_*A.RAD_2_DEG);var b=y.rotate_vqa64j$(_*A.RAD_2_DEG,$.Companion.Y_AXIS,je()),x=t.vertex_n440gp$(b,$.Companion.ZERO,g);h>0&&v>0&&(t.geometry.addTriIndices_qt1dr2$(x-1|0,x-o.size-1|0,x-o.size|0),t.geometry.addTriIndices_qt1dr2$(x,x-1|0,x-o.size|0)),0===h&&0===v&&(c.v=x)}}for(var w=c.v+o.size-1|0,z=2;z<=100;z++)t.geometry.addTriIndices_qt1dr2$(c.v,c.v+e.imul(z-1|0,o.size)|0,c.v+e.imul(z,o.size)|0),t.geometry.addTriIndices_qt1dr2$(w,w+e.imul(z,o.size)|0,w+e.imul(z-1|0,o.size)|0);t.geometry.generateNormals()},wo.prototype.toString=function(){return this.name},ko.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ko.prototype=Object.create(z.prototype),ko.prototype.constructor=ko,ko.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.local$model={v:null},this.state_0=2,this.result_0=Ye(this.local$ctx.assetMgr,this.$this.assetPath,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(null!=(t=this.result_0)){this.$this.$outer;var e,i,n=this.$this.$outer,r=new Ze(this.local$isDeferredShading?n.deferredPipeline_0.shadowMaps:n.shadowsForward_0,this.local$isDeferredShading?null!=(e=n.deferredPipeline_0.aoPipeline)?e.aoMap:null:null!=(i=n.aoPipelineForward_0)?i.aoMap:null,n.envMaps_0,this.local$isDeferredShading),o=new c(this.$this.generateNormals,void 0,r,!0,!0,!0,!0,void 0,!0),s=t.makeModel_m0hq3v$(o);s.translate_czzhiu$(this.$this.translation),s.scale_mx4ult$(this.$this.scale),s.enableAnimation_za3lpa$(0),s.onUpdate.add_11rb$(zo(this.$this,n,this.local$ctx,s)),this.local$model.v=s}return this.local$isDeferredShading?this.$this.deferredModel=this.local$model.v:this.$this.forwardModel=this.local$model.v,this.local$model.v;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},wo.prototype.load_ggm1l6$=function(t,e,i,n){var r=new ko(this,t,e,i);return n?r:r.doResume(null)},wo.$metadata$={kind:T,simpleName:"GltfModel",interfaces:[]},Co.prototype.updatePosition_aemszp$=function(t){var e=2*this.$outer.animationSpeed_0;this.angle+=e*t.deltaT/this.radius},Co.prototype.animate_t7fsfh$=function(t,e){if(this.$outer.animationSpeed_0<.5){var i=2*this.$outer.animationSpeed_0,n=1-i;t.setAnimationWeight_24o109$(0,n),t.setAnimationWeight_24o109$(1,i),t.setAnimationWeight_24o109$(2,0)}else{var r=2*(this.$outer.animationSpeed_0-.5),o=1-r;t.setAnimationWeight_24o109$(0,0),t.setAnimationWeight_24o109$(1,o),t.setAnimationWeight_24o109$(2,r)}t.applyAnimation_14dthe$(e.time),t.setIdentity(),this.position.set_yvo9jy$(this.radius,0,0).rotate_5820x2$(this.angle*A.RAD_2_DEG,Lt.Companion.Y_AXIS),t.translate_czzhiw$(this.position),t.rotate_5820x2$(this.angle*A.RAD_2_DEG+180,Lt.Companion.Y_AXIS),t.scale_14dthe$(.01)},Co.$metadata$={kind:T,simpleName:"FoxAnimator",interfaces:[]},fo.$metadata$={kind:T,simpleName:"GltfDemo",interfaces:[ho]},No.prototype.setupMainScene_aemszp$=function(t){return jo()},No.$metadata$={kind:T,simpleName:"HelloWorldDemo",interfaces:[ho]},Eo.prototype.setupMainScene_aemszp$=function(t){return qo(t)},Eo.$metadata$={kind:T,simpleName:"HelloGltfDemo",interfaces:[ho]},Do.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Do.prototype=Object.create(z.prototype),Do.prototype.constructor=Do,Do.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,e=new Ze(this.local$closure$shadows,this.local$closure$aoPipeline.aoMap),i=new c(void 0,void 0,e);if(this.state_0=2,this.result_0=h(this.local$$receiver,Yr().modelBasePath+"/BoxAnimated.gltf",i,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var n;return null!=(t=this.result_0)?(this.local$this$.unaryPlus_uv0sim$(t),t.translate_y2kzbl$(0,.5,0),t.animations.isEmpty()||(t.enableAnimation_za3lpa$(0),t.onUpdate.add_11rb$(Lo(t))),n=s):n=null,n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Vo.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Vo.prototype=Object.create(z.prototype),Vo.prototype.constructor=Vo,Vo.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=Ye(this.local$$receiver,Yr().modelBasePath+"/bunny.gltf.gz",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var e;return null!=(t=this.result_0)?(this.local$this$InstanceDemo.addLods_0(t),e=s):e=null,e;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Bo.prototype.setupMainScene_aemszp$=function(t){var e,i=new I(null);return i.unaryPlus_uv0sim$(a(i,void 0,Fo(i,this))),i.lighting.singleLight_q9zcvo$(Uo),i.unaryPlus_uv0sim$(this.lodController_0),t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var r=new Vo(e,t,this,i);return n?r:r.doResume(null)})),i},Bo.prototype.addLods_0=function(t){var e;e=t.scenes;for(var i=0;i!==e.size;++i){var n,r=new c(!0,!1),o=f(t.makeModel_m0hq3v$(r,i).meshes.values),s=o.geometry;n=s.numVertices;for(var a=0;a<n;a++)s.vertexIt.index=a,s.vertexIt.position.scale_mx4ult$(.3).add_czzhiu$(new $(0,-1,0));o.geometry.rebuildBounds(),0===i&&(this.modelCenter_0.set_czzhiu$(o.geometry.bounds.center),this.modelRadius_0=o.geometry.bounds.max.distance_czzhiu$(o.geometry.bounds.center)),o.shader=new ei(new ii,this.instanceColorPhongModel_0()),o.isFrustumChecked=!1,this.lods_0.get_za3lpa$(i).mesh=o,o.instances=new Pe(Zt([Pe.Companion.MODEL_MAT,J.Companion.COLORS]),this.lods_0.get_za3lpa$(i).maxInsts),this.lodController_0.addLod_od45r7$(o,this.lods_0.get_za3lpa$(i).maxDist)}this.setupInstances_0(this.lodController_0)},Bo.prototype.setupInstances_0=function(t){var e,i,n,r=Zt([m.Companion.WHITE.toLinear(),m.Companion.MD_RED.toLinear(),m.Companion.MD_PINK.toLinear(),m.Companion.MD_PURPLE.toLinear(),m.Companion.MD_DEEP_PURPLE.toLinear(),m.Companion.MD_INDIGO.toLinear(),m.Companion.MD_BLUE.toLinear(),m.Companion.MD_CYAN.toLinear(),m.Companion.MD_TEAL.toLinear(),m.Companion.MD_GREEN.toLinear(),m.Companion.MD_LIGHT_GREEN.toLinear(),m.Companion.MD_LIME.toLinear(),m.Companion.MD_YELLOW.toLinear(),m.Companion.MD_AMBER.toLinear(),m.Companion.MD_ORANGE.toLinear(),m.Companion.MD_DEEP_ORANGE.toLinear(),m.Companion.MD_BROWN.toLinear(),m.Companion.MD_GREY.toLinear(),m.Companion.MD_BLUE_GREY.toLinear()]);t.instances.clear();var o=new de(17),s=.5*(this.nBunnies_0-1|0);e=this.nBunnies_0;for(var a=0;a<e;a++){i=this.nBunnies_0;for(var l=0;l<i;l++){n=this.nBunnies_0;for(var u=0;u<n;u++){var p=new at(5*(a-s)+ni(-2,2),5*(l-s)+ni(-2,2),5*(u-s)+ni(-2,2)),c=new at(ni(-1,1),ni(-1,1),ni(-1,1)),h=t.instances,d=new Ho(this,p,c);d.color.set_czzhhz$(r.get_za3lpa$(o.randomI_n8acyv$(Oe(r)))),d.center.set_czzhiu$(this.modelCenter_0),d.radius=this.modelRadius_0,h.add_11rb$(d)}}}},Bo.prototype.instanceColorPhongModel_0=function(){var t=new C("instanceColorPhongModel()"),e={v:null},i={v:null},n={v:null},r={v:null},o=new q(t);i.v=o.stageInterfaceNode_iikjwn$("ifColors",o.instanceAttributeNode_nm2vx5$(J.Companion.COLORS).output),r.v=o.mvpNode();var s=o.multiplyNode_ze33is$(r.v.outModelMat,o.instanceAttrModelMat().output).output,a=o.multiplyNode_ze33is$(r.v.outMvpMat,o.instanceAttrModelMat().output).output,l=o.vec3TransformNode_vid4wo$(o.attrNormals().output,s,0);e.v=o.stageInterfaceNode_iikjwn$("ifNormals",l.outVec3);var u=o.vec3TransformNode_vid4wo$(o.attrPositions().output,s,1).outVec3;n.v=o.stageInterfaceNode_iikjwn$("ifFragPos",u),o.positionOutput=o.vec4TransformNode_9krp9t$(o.attrPositions().output,a).outVec4;var p=new B(t),c=r.v.addToStage_llmhyc$(t.fragmentStageGraph),h=p.multiLightNode_za3lpa$(),d=i.v.output,f=e.v.output,_=p.phongMaterialNode_8rwtp1$(d,f,n.v.output,c.outCamPos,h);_.inShininess=p.pushConstantNode1f_61zpoe$("uShininess").output,_.inSpecularIntensity=p.pushConstantNode1f_61zpoe$("uSpecularIntensity").output;var m=_;return p.colorOutput_a3v4si$(m.outColor),t},Go.$metadata$={kind:T,simpleName:"Lod",interfaces:[]},Ho.prototype.update_l2cg23$=function(t,e,i){this.instanceModelMat.setIdentity().translate_czzhiu$(this.position).rotate_ad55pp$(i.time*this.rotSpeed,this.rotAxis),ri.prototype.update_l2cg23$.call(this,t,e,i)},Ho.prototype.addInstanceData_bgc5cs$=function(t,e,i){this.$outer,e.checkBufferSize_za3lpa$();var n=e.dataF.position,r=this.$outer,o=e.dataF;o.put_q3cr5i$(this.instanceModelMat.matrix),r.isLodColors_0?o.put_q3cr5i$(r.lods_0.get_za3lpa$(t).color.array):o.put_q3cr5i$(this.color.array);var s=e.dataF.position-n|0;if(s!==e.instanceSizeF)throw Re("Expected data to grow by "+e.instanceSizeF+" elements, instead it grew by "+s);e.numInstances=e.numInstances+1|0,e.hasChanged=!0},Ho.$metadata$={kind:T,simpleName:"BunnyInstance",interfaces:[ri]},Bo.prototype.setupMenu_aemszp$=function(t){return nr(t,Yo(this))},Bo.$metadata$={kind:T,simpleName:"InstanceDemo",interfaces:[ho]},Object.defineProperty(Zo.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_v7oinh$_0?o("deferredPipeline"):this.deferredPipeline_v7oinh$_0},set:function(t){this.deferredPipeline_v7oinh$_0=t}}),Zo.prototype.lateInit_aemszp$=function(t){this.updateLighting_0()},is.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},is.prototype=Object.create(z.prototype),is.prototype.constructor=is,is.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Yr().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_COL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.local$floorAlbedo=this.result_0,this.state_0=3,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Yr().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_NRM_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 3:if(this.local$floorNormal=this.result_0,this.state_0=4,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Yr().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_REFL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 4:var e=this.result_0;if(this.local$this$.onDispose.add_11rb$(Qo(this.local$floorAlbedo,this.local$floorNormal,e)),this.local$this$.unaryPlus_uv0sim$(b(void 0,!0,es(this.local$this$MultiLightDemo,this.local$floorAlbedo,this.local$floorNormal,e))),this.state_0=5,this.result_0=Ye(this.local$$receiver,Yr().modelBasePath+"/bunny.gltf.gz",this),this.result_0===w)return w;continue;case 5:var i;if(null!=(t=this.result_0)){var n=this.local$this$MultiLightDemo,r=this.local$this$,o=new c(!0,!1),a=t.makeModel_m0hq3v$(o);n.bunnyMesh_0=f(a.meshes.values),r.unaryPlus_uv0sim$(a);var l=new ct;l.useStaticAlbedo_d7aj7k$(n.colorCycler_0.current.linColor),l.roughness=n.roughness_0,n.modelShader_0=new ht(l),d(n.bunnyMesh_0).shader=n.modelShader_0,i=s}else i=null;return i;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Zo.prototype.setupMainScene_aemszp$=function(t){var e,i=new I(null);for(i.unaryPlus_uv0sim$(a(i,void 0,Jo(i,this))),i.lighting.lights.clear(),e=this.lights_0.iterator();e.hasNext();){var n=e.next();i.lighting.lights.add_11rb$(n.light),i.unaryPlus_uv0sim$(n)}var r=i,o=p.EnvironmentHelper.singleColorEnvironment_6zt5da$(r,new m(.15,.15,.15)),l=new G;l.isWithEmissive=!1,l.isWithAmbientOcclusion=!1,l.isWithScreenSpaceReflections=!1,l.isWithImageBasedLighting=!1,l.isWithScreenSpaceReflections=!0,l.useImageBasedLighting_po417x$(o);var u,c=l;this.deferredPipeline_0=new H(r,c),r.plusAssign_f1kmr1$(this.deferredPipeline_0.renderOutput),r.plusAssign_f1kmr1$(x.Skybox.cube_wgmpek$(o.reflectionMap,1)),r.onDispose.add_11rb$((u=this,function(t,e){return u.noSsrMap_0.dispose(),s}));var h,d,f=this.deferredPipeline_0.contentGroup;return t.assetMgr.launch_eln4bt$((h=f,d=this,function(t,e,i){var n=new is(h,d,t,this,e);return i?n:n.doResume(null)})),r},Zo.prototype.updateLighting_0=function(){var t,e,i,n=0;for(e=this.lights_0.iterator();e.hasNext();){var r=e.next(),o=ye((n=(i=n)+1|0,i));o<this.deferredPipeline_0.shadowMaps.size&&(this.deferredPipeline_0.shadowMaps.get_za3lpa$(o).isShadowMapEnabled=!1),r.disable_kc3nav$(this.mainScene.lighting)}var s,a=0,l=360/this.lightCount_0,u=this.lightCount_0,p=this.lights_0.size;t=j.min(u,p);for(var c=0;c<t;c++)this.lights_0.get_za3lpa$(c).setup_mx4ult$(a),this.lights_0.get_za3lpa$(c).enable_kc3nav$(this.mainScene.lighting),a+=l,c<this.deferredPipeline_0.shadowMaps.size&&(this.deferredPipeline_0.shadowMaps.get_za3lpa$(c).isShadowMapEnabled=!0);for(s=this.lights_0.iterator();s.hasNext();)s.next().updateVisibility()},Zo.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,function(t){var i,n=t.image_3ds0aa$(null!=(i=e.deferredPipeline_0.reflectionDenoisePass)?i.colorTexture:null);return t.section_yfmn31$("Lights",ns(e)),t.section_yfmn31$("Screen Space Reflections",rs(e,n)),t.section_yfmn31$("Material",os(e)),t.section_yfmn31$("Scene",ss(e)),s}));var e},as.prototype.updateSpotAngleMesh_0=function(){var t=this.light.spotAngle*A.DEG_2_RAD/2,e=1*j.tan(t),i=this.lightMeshShader_0.color;this.spotAngleMesh_0.clear();for(var n=0;n<40;n++){var r=n/40*2*Ke.PI,o=(n+1|0)/40*2*Ke.PI;this.spotAngleMesh_0.addLine_b8opkg$(new $(-1,j.cos(r)*e,j.sin(r)*e),i,new $(-1,j.cos(o)*e,j.sin(o)*e),i)}var s=45*A.DEG_2_RAD,a=j.cos(s)*e;this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,a,a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,a,-a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,-a,-a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,-a,a),i)},as.prototype.setup_mx4ult$=function(t){var e=t*A.DEG_2_RAD,i=10*j.cos(e),n=t*A.DEG_2_RAD,r=10*j.sin(n);this.meshPos_0.set_y2kzbl$(i,9,-r),this.anglePos_0=t;var o=m.Companion.WHITE.mix_jpxij3$(this.color,this.$outer.lightSaturation_0,Te());this.light.setColor_y83vuj$(o.toLinear(),this.$outer.lightPower_0),this.lightMeshShader_0.color=o,this.updateSpotAngleMesh_0()},as.prototype.enable_kc3nav$=function(t){this.isEnabled_0=!0;var e=t.lights;e.contains_11rb$(this.light)||e.add_11rb$(this.light),this.updateVisibility()},as.prototype.disable_kc3nav$=function(t){this.isEnabled_0=!1,t.lights.remove_11rb$(this.light),this.updateVisibility()},as.prototype.updateVisibility=function(){this.isVisible=this.isEnabled_0&&this.$outer.showLightIndicators_0},as.$metadata$={kind:T,simpleName:"LightMesh",interfaces:[ut]},us.prototype.toString=function(){return this.name},us.$metadata$={kind:T,simpleName:"MatColor",interfaces:[]},us.prototype.component1=function(){return this.name},us.prototype.component2=function(){return this.linColor},us.prototype.copy_guvy9a$=function(t,e){return new us(void 0===t?this.name:t,void 0===e?this.linColor:e)},us.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.linColor)|0},us.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.linColor,t.linColor)},ps.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var cs=null;function hs(){return null===cs&&new ps,cs}function ds(t){Ps.call(this,"Color Grid"),this.sphereProto=t,this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function fs(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(et(15),ge(t.v),tt()),i.layoutSpec.setSize_4ujscr$(et(85),ge(35),it()),i.value=10;var n=i.onValueChanged,r=function(t){return function(e,i){var n;for(n=t.shaders_0.iterator();n.hasNext();)n.next().roughness=e.value/100;return s}}(e);return n.add_11rb$(r),s}}function _s(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(et(15),ge(t.v),tt()),i.layoutSpec.setSize_4ujscr$(et(85),ge(35),it()),i.value=0;var n=i.onValueChanged,r=function(t){return function(e,i){var n;for(n=t.shaders_0.iterator();n.hasNext();)n.next().metallic=e.value/100;return s}}(e);return n.add_11rb$(r),s}}function ms(t,e,i,n){return function(r){r.isVisible=!1,r.layoutSpec.setOrigin_4ujscr$(et(0),ge(t-100),tt()),r.layoutSpec.setSize_4ujscr$(et(100),ge(100),it());var o,a={v:-30};return r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),n.font.setCustom_11rb$(e),n.text="Material",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new rt(nt.CENTER,nt.CENTER),s}}(a,e,i))),a.v-=35,r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-roughness-lbl",(o=a,function(t){return t.layoutSpec.setOrigin_4ujscr$(et(0),ge(o.v),tt()),t.layoutSpec.setSize_4ujscr$(et(10),ge(35),it()),t.text="R:",s}))),r.unaryPlus_uv0sim$(i.slider_87iqh3$("mat-roughness-slider",fs(a,n))),a.v-=35,r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-metallic-lbl",function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.v),tt()),e.layoutSpec.setSize_4ujscr$(et(10),ge(35),it()),e.text="M:",s}}(a))),r.unaryPlus_uv0sim$(i.slider_87iqh3$("mat-metallic-slider",_s(a,n))),s}}function $s(){Ds(),ho.call(this,"PBR Materials"),this.skybox_56jct1$_0=this.skybox_56jct1$_0,this.envMaps_chisr5$_0=this.envMaps_chisr5$_0,this.lightCycler_0=new po(Ds().lightSetups_0),this.hdriCycler_0=new po(Ds().hdriTextures_0);var t,e=di(Ds().hdriTextures_0.size);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=null;this.loadedHdris_0=e,this.sphereProto_0=new Ts,this.pbrContentCycler_0=new po(Zt([new qs(this.sphereProto_0),new ds(this.sphereProto_0),new pl(this.sphereProto_0)])),this.autoRotate_4vo62z$_0=!0}function ys(t){return t.isPressed}function vs(t){return t.isPressed}function gs(t,e,i){return function(n){n.unaryPlus_uv0sim$(t.camera);var r=n.onUpdate,o=function(t,e,i){return function(n,r){return t.autoRotate_0&&(i.verticalRotation+=2*e.deltaT),s}}(e,i,n);return r.add_11rb$(o),n.zoomMethod=Qe.ZOOM_CENTER,n.zoom=20,s}}function bs(t,e){return function(i){return i.cycler_4ni5b8$(null,t.hdriCycler_0,function(t,e){return function(i,n){return t.updateHdri_0(t.hdriCycler_0.index,e),s}}(t,e)),s}}function xs(t){return function(e){return e.toggleButton_8v9fdr$("IBL Enabled",!0,function(t){return function(e){var i;for(i=t.pbrContentCycler_0.iterator();i.hasNext();)i.next().setUseImageBasedLighting_6taknv$(e.isEnabled);return s}}(t)),s}}function ws(t){return function(e){return e.cycler_4ni5b8$(null,t.lightCycler_0,function(t){return function(e,i){return e.setup(t.mainScene),s}}(t)),s}}function zs(t,e){return e.hide(),t.show(),s}function ks(t){return function(e){var i;for(e.cycler_4ni5b8$(null,t.pbrContentCycler_0,zs),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.menuY+=25,i=t.pbrContentCycler_0.iterator();i.hasNext();)i.next().createMenu_7fm8wr$(e.menuContainer,e.smallFont,e.menuY);return t.pbrContentCycler_0.current.show(),s}}function Ss(t,i){return function(n){var r,o,a,l=t.envMaps_0;for(i.runDelayed_hd6vpk$(1,(o=l,function(t){return o.dispose(),s})),t.envMaps_0=p.EnvironmentHelper.hdriEnvironment_wm5s1y$(t.mainScene,n,!1),(e.isType(r=t.skybox_0.shader,hi)?r:K()).environmentMap=t.envMaps_0.reflectionMap,a=t.pbrContentCycler_0.iterator();a.hasNext();)a.next().updateEnvironmentMap_wwmv4k$(t.envMaps_0);return s}}function Cs(t,e,i,n,r,o){z.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$idx=t,this.local$this$PbrDemo=e,this.local$closure$recv=i,this.local$$receiver=n}function Ns(t,e){this.hdriPath=t,this.name=e}function Es(t,e){this.name=t,this.setup=e}function Ps(t){this.name=t,this.content=null,this.ui=null,this.autoRotate=!0}function Ts(){this.detailSphere=Q([J.Companion.POSITIONS,J.Companion.TEXTURE_COORDS,J.Companion.NORMALS,J.Companion.TANGENTS]),this.simpleSphere=Q([J.Companion.POSITIONS,J.Companion.NORMALS]);var t=new he(this.detailSphere);t.vertexModFun=Os;var e=t.sphereProps.uvDefaults();e.steps=700,e.radius=7,t.uvSphere_mojs8w$(t.sphereProps),this.detailSphere.generateTangents_mx4ult$();var i=new he(this.simpleSphere),n=i.sphereProps.uvDefaults();n.steps=100,n.radius=1,i.uvSphere_mojs8w$(i.sphereProps)}function Os(t){return t.texCoord.x=4*t.texCoord.x,t.texCoord.y=2*t.texCoord.y,s}function Ms(){var t;Ls=this,this.hdriTexProps_0=new oe(void 0,void 0,void 0,void 0,re.NEAREST,re.NEAREST,!1,1),this.hdriTextures_0=Zt([new Ns(Yr().envMapBasePath+"/syferfontein_0d_clear_1k.rgbe.png","South Africa"),new Ns(Yr().envMapBasePath+"/circus_arena_1k.rgbe.png","Circus"),new Ns(Yr().envMapBasePath+"/newport_loft.rgbe.png","Loft"),new Ns(Yr().envMapBasePath+"/shanghai_bund_1k.rgbe.png","Shanghai"),new Ns(Yr().envMapBasePath+"/mossy_forest_1k.rgbe.png","Mossy Forest")]),this.lightStrength_0=250,this.lightExtent_0=10,this.lightSetups_0=Zt([new Es("Off",js),new Es("Front x1",(t=this,function(e){var i=(new lt).setPoint_czzhiu$(new $(0,0,1.5*t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,2*t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),s})),new Es("Front x4",As(this)),new Es("Top x1",Rs(this)),new Es("Top x4",Is(this))])}function js(t){return t.lighting.lights.clear(),s}function As(t){return function(e){var i=(new lt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),n=(new lt).setPoint_czzhiu$(new $(-t.lightExtent_0,-t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),r=(new lt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),o=(new lt).setPoint_czzhiu$(new $(t.lightExtent_0,-t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),e.lighting.lights.add_11rb$(n),e.lighting.lights.add_11rb$(r),e.lighting.lights.add_11rb$(o),s}}function Rs(t){return function(e){var i=(new lt).setPoint_czzhiu$(new $(0,1.5*t.lightExtent_0,0)).setColor_y83vuj$(m.Companion.WHITE,2*t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),s}}function Is(t){return function(e){var i=(new lt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),n=(new lt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,-t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),r=(new lt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),o=(new lt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,-t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),e.lighting.lights.add_11rb$(n),e.lighting.lights.add_11rb$(r),e.lighting.lights.add_11rb$(o),s}}Zo.$metadata$={kind:T,simpleName:"MultiLightDemo",interfaces:[ho]},ds.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-color-container",ms(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},ds.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},ds.prototype.createContent_wo93gw$=function(t,e,i){var n,r;return this.content=Y(void 0,(n=e,r=this,function(t){t.isVisible=!1,t.isFrustumChecked=!1;var e=r.makeSpheres_0(!0,n),i=r.makeSpheres_0(!1,n);i.isVisible=!1;var o=i;return t.unaryPlus_uv0sim$(e),t.unaryPlus_uv0sim$(o),r.iblContent_0=e,r.nonIblContent_0=o,s})),d(this.content)},ds.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i;if(null!=(i=this.iblContent_0)){var n,r=e.isType(n=i.shader,We)?n:K();r.irradianceMap=t.irradianceMap,r.reflectionMap=t.reflectionMap,r.brdfLut=t.brdfLut}},ds.prototype.makeSpheres_0=function(t,i){var n=M();R(n,m.Companion.MD_COLORS),n.remove_11rb$(m.Companion.MD_LIGHT_BLUE),n.remove_11rb$(m.Companion.MD_GREY),n.remove_11rb$(m.Companion.MD_BLUE_GREY);var r=m.Companion.WHITE;n.add_11rb$(r);var o=m.Companion.MD_GREY;n.add_11rb$(o);var s=m.Companion.MD_BLUE_GREY;n.add_11rb$(s);var a=new m(.1,.1,.1);n.add_11rb$(a);var l=new Z(new te(Zt([J.Companion.POSITIONS,J.Companion.NORMALS])),null);l.isFrustumChecked=!1,l.geometry.addGeometry_r7nl2o$(this.sphereProto.simpleSphere);var u=this.instancedPbrShader_0(t,i);this.shaders_0.add_11rb$(u),l.shader=u;for(var p=new Pe(Zt([Pe.Companion.MODEL_MAT,J.Companion.COLORS]),e.imul(4,5)),c=new fe,h=0;h<4;h++)for(var d=0;d<5;d++){c.setIdentity(),c.translate_y2kzbl$(4.5*(-2+d),4.5*(1.5-h),0),c.scale_mx4ult$(1.5),p.checkBufferSize_za3lpa$();var f=p.dataF.position,_=p.dataF;_.put_q3cr5i$(c.matrix),_.put_q3cr5i$(n.get_za3lpa$((e.imul(h,5)+d|0)%n.size).toLinear().array);var $=p.dataF.position-f|0;if($!==p.instanceSizeF)throw Re("Expected data to grow by "+p.instanceSizeF+" elements, instead it grew by "+$);p.numInstances=p.numInstances+1|0,p.hasChanged=!0}return l.instances=p,l},ds.prototype.instancedPbrShader_0=function(t,i){var n=new ct;n.albedoSource=y.STATIC_ALBEDO,n.roughness=.1,n.metallic=0,n.isInstanced=!0,t&&n.useImageBasedLighting_po417x$(i);var r,o,s=n,a=We.Companion.defaultPbrModel_2ufela$(s),l={v:null},u=new q(a);l.v=u.stageInterfaceNode_iikjwn$("ifInstColors",u.instanceAttributeNode_nm2vx5$(J.Companion.COLORS).output),new B(a);t:do{var p;for(r=wt.ALL,p=a.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&r.mask)){var h,f,_=c.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(Rt($.name,"pbrMaterial")&&e.isType($,ci)){f=$;break e}}f=null}while(0);var v=null==(h=f)||e.isType(h,ci)?h:K();if(null!=v){o=v;break t}}}o=null}while(0);return d(o).inAlbedo=l.v.output,new We(s,a)},ds.$metadata$={kind:T,simpleName:"ColorGridContent",interfaces:[Ps]},Object.defineProperty($s.prototype,"skybox_0",{configurable:!0,get:function(){return null==this.skybox_56jct1$_0?o("skybox"):this.skybox_56jct1$_0},set:function(t){this.skybox_56jct1$_0=t}}),Object.defineProperty($s.prototype,"envMaps_0",{configurable:!0,get:function(){return null==this.envMaps_chisr5$_0?o("envMaps"):this.envMaps_chisr5$_0},set:function(t){this.envMaps_chisr5$_0=t}}),Object.defineProperty($s.prototype,"autoRotate_0",{configurable:!0,get:function(){return this.autoRotate_4vo62z$_0},set:function(t){var e;for(this.autoRotate_4vo62z$_0=t,e=this.pbrContentCycler_0.iterator();e.hasNext();)e.next().autoRotate=t}}),$s.prototype.lateInit_aemszp$=function(t){var e,i,n=t.inputMgr.registerKeyListener_aviy8w$(-25,"Next environment map",ys,(e=this,i=t,function(t){return e.hdriCycler_0.next(),e.updateHdri_0(e.hdriCycler_0.index,i),s})),r=t.inputMgr.registerKeyListener_aviy8w$(-26,"Prev environment map",vs,function(t,e){return function(i){return t.hdriCycler_0.prev(),t.updateHdri_0(t.hdriCycler_0.index,e),s}}(this,t));this.mainScene.onDispose.add_11rb$(function(t,e,i,n){return function(r,o){t.inputMgr.removeKeyListener_abhb69$(e),t.inputMgr.removeKeyListener_abhb69$(i);var a,l=n.loadedHdris_0;for(a=0;a!==l.length;++a){var u=l[a];null!=u&&u.dispose()}return n.envMaps_0.dispose(),s}}(t,n,r,this))},$s.prototype.setupMainScene_aemszp$=function(t){var e,i,n,r=new I(null);return this.lightCycler_0.current.setup(r),r.unaryPlus_uv0sim$(a(r,void 0,gs(r,this,t))),this.loadHdri_0(this.hdriCycler_0.index,t,(e=r,i=this,n=t,function(t){var r;for(i.envMaps_0=p.EnvironmentHelper.hdriEnvironment_wm5s1y$(e,t,!1),i.skybox_0=x.Skybox.cube_wgmpek$(i.envMaps_0.reflectionMap,1),e.plusAssign_f1kmr1$(i.skybox_0),r=i.pbrContentCycler_0.iterator();r.hasNext();){var o=r.next(),a=e;a.unaryPlus_uv0sim$(o.createContent_wo93gw$(a,i.envMaps_0,n))}return i.pbrContentCycler_0.current.show(),s})),r},$s.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,i=t,function(t){return t.menuHeight=440,t.section_yfmn31$("Environment",bs(e,i)),t.section_yfmn31$("Image Based Lighting",xs(e)),t.section_yfmn31$("Discrete Lighting",ws(e)),t.section_yfmn31$("Scene Content",ks(e)),s}));var e,i},$s.prototype.updateHdri_0=function(t,e){this.loadHdri_0(t,e,Ss(this,e))},Cs.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Cs.prototype=Object.create(z.prototype),Cs.prototype.constructor=Cs,Cs.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Ds().hdriTextures_0.get_za3lpa$(this.local$closure$idx).hdriPath,Ds().hdriTexProps_0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return this.local$this$PbrDemo.loadedHdris_0[this.local$closure$idx]=t,this.local$closure$recv(t);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},$s.prototype.loadHdri_0=function(t,e,i){var n,r,o,s=this.loadedHdris_0[t];null==s?e.assetMgr.launch_eln4bt$((n=t,r=this,o=i,function(t,e,i){var s=new Cs(n,r,o,t,this,e);return i?s:s.doResume(null)})):i(s)},Ns.prototype.toString=function(){return this.name},Ns.$metadata$={kind:T,simpleName:"Hdri",interfaces:[]},Es.prototype.toString=function(){return this.name},Es.$metadata$={kind:T,simpleName:"LightSetup",interfaces:[]},Ps.prototype.show=function(){var t,e;null!=(t=this.content)&&(t.isVisible=!0),null!=(e=this.ui)&&(e.isVisible=!0)},Ps.prototype.hide=function(){var t,e;null!=(t=this.content)&&(t.isVisible=!1),null!=(e=this.ui)&&(e.isVisible=!1)},Ps.prototype.toString=function(){return this.name},Ps.$metadata$={kind:T,simpleName:"PbrContent",interfaces:[]},Ts.$metadata$={kind:T,simpleName:"SphereProto",interfaces:[]},Ms.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Ls=null;function Ds(){return null===Ls&&new Ms,Ls}function qs(t){ul(),Ps.call(this,"PBR Material"),this.sphereProto=t;var e=new po(ul().materials_0);e.index=3,this.matCycler=e,this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function Bs(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(et(15),ge(t.v),tt()),i.layoutSpec.setSize_4ujscr$(et(70),ge(35),it()),i.text=e.currentMat.name;var n=i.onClick,r=function(t){return function(e,i,n,r){return e.text=t.nextMaterial_0().name,s}}(e);return n.add_11rb$(r),s}}function Fs(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(20),ge(35),it()),n.text="<";var r=n.onClick,o=function(t,e){return function(i,n,r,o){return e.text=t.prevMaterial_0().name,s}}(e,i);return r.add_11rb$(o),s}}function Us(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(et(80),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(20),ge(35),it()),n.text=">";var r=n.onClick,o=function(t,e){return function(i,n,r,o){return e.text=t.nextMaterial_0().name,s}}(e,i);return r.add_11rb$(o),s}}function Vs(t,e,i,n){return function(r){r.isVisible=!1,r.layoutSpec.setOrigin_4ujscr$(et(0),ge(t-60),tt()),r.layoutSpec.setSize_4ujscr$(et(100),ge(60),it());var o={v:-30};r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),n.font.setCustom_11rb$(e),n.text="Material",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new rt(nt.CENTER,nt.CENTER),s}}(o,e,i))),o.v-=30;var a=i.button_9zrh0o$("selected-mat",Bs(o,n));return r.unaryPlus_uv0sim$(a),r.unaryPlus_uv0sim$(i.button_9zrh0o$("mat-left",Fs(o,n,a))),r.unaryPlus_uv0sim$(i.button_9zrh0o$("mat-right",Us(o,n,a))),s}}function Gs(t,e,i,n){return function(r){r.isVisible=!1;var o=i.makeSphere_0(!0,t,e),a=i.makeSphere_0(!1,t,e);a.isVisible=!1;var l=a;r.unaryPlus_uv0sim$(o),r.unaryPlus_uv0sim$(l),i.iblContent_0=o,i.nonIblContent_0=l;var u=r.onUpdate,p=function(t,e,i){return function(n,r){return t.autoRotate&&i.rotate_ad55pp$(-2*e.deltaT,$.Companion.Y_AXIS),s}}(i,n,r);return u.add_11rb$(p),s}}function Hs(t,e,i,n){return function(r){r.geometry.addGeometry_r7nl2o$(t.sphereProto.detailSphere);var o=v(function(t,e){return function(i){return i.albedoSource=y.TEXTURE_ALBEDO,i.isNormalMapped=!0,i.isRoughnessMapped=!0,i.isMetallicMapped=!0,i.isOcclusionMapped=!0,i.isDisplacementMapped=!0,i.displacementStrength=.25,t&&i.useImageBasedLighting_po417x$(e),s}}(e,i));r.shader=o,t.shaders_0.add_11rb$(o),t.updatePbrMaterial_0();var a=n.onDispose,l=function(t){return function(e,i){var n;for(n=t.matCycler.iterator();n.hasNext();)n.next().disposeMaps();return s}}(t);return a.add_11rb$(l),s}}function Ws(t,e,i,n,r,o,s){this.name=t,this.albedo=e,this.normal=i,this.roughness=n,this.metallic=r,this.ao=o,this.displacement=s}function Ks(){var t;ll=this,this.defaultMetallicTex_0=new pi(m.Companion.BLACK),this.defaultAoTex_0=new pi(m.Companion.WHITE),this.defaultDispTex_0=new pi(m.Companion.BLACK),this.assetPath_0=Yr().pbrBasePath,this.materials_0=ai([new Ws("Bamboo",new se(void 0,void 0,(t=this,function(e,i,n,r){var o=new Xs(t,e,i,this,n);return r?o:o.doResume(null)})),new se(void 0,void 0,Zs(this)),new se(void 0,void 0,Qs(this)),null,new se(void 0,void 0,ea(this)),null),new Ws("Castle Brick",new se(void 0,void 0,na(this)),new se(void 0,void 0,oa(this)),new se(void 0,void 0,aa(this)),null,new se(void 0,void 0,ua(this)),new se(void 0,void 0,ca(this))),new Ws("Granite",new se(void 0,void 0,da(this)),new se(void 0,void 0,_a(this)),new se(void 0,void 0,$a(this)),null,null,null),new Ws("Weave Steel",new se(void 0,void 0,va(this)),new se(void 0,void 0,ba(this)),new se(void 0,void 0,wa(this)),new se(void 0,void 0,ka(this)),new se(void 0,void 0,Ca(this)),new se(void 0,void 0,Ea(this))),new Ws("Scuffed Plastic",new se(void 0,void 0,Ta(this)),new se(void 0,void 0,Ma(this)),new se(void 0,void 0,Aa(this)),null,new se(void 0,void 0,Ia(this)),null),new Ws("Snow Covered Path",new se(void 0,void 0,Da(this)),new se(void 0,void 0,Ba(this)),new se(void 0,void 0,Ua(this)),null,new se(void 0,void 0,Ga(this)),new se(void 0,void 0,Wa(this))),new Ws("Marble",new se(void 0,void 0,Xa(this)),new se(void 0,void 0,Za(this)),new se(void 0,void 0,Qa(this)),null,null,null),new Ws("Onyx Tiles",new se(void 0,void 0,el(this)),new se(void 0,void 0,nl(this)),new se(void 0,void 0,ol(this)),null,null,new se(void 0,void 0,al(this)))])}function Xs(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ys(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Zs(t){return function(e,i,n,r){var o=new Ys(t,e,i,this,n);return r?o:o.doResume(null)}}function Js(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Qs(t){return function(e,i,n,r){var o=new Js(t,e,i,this,n);return r?o:o.doResume(null)}}function ta(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ea(t){return function(e,i,n,r){var o=new ta(t,e,i,this,n);return r?o:o.doResume(null)}}function ia(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function na(t){return function(e,i,n,r){var o=new ia(t,e,i,this,n);return r?o:o.doResume(null)}}function ra(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function oa(t){return function(e,i,n,r){var o=new ra(t,e,i,this,n);return r?o:o.doResume(null)}}function sa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function aa(t){return function(e,i,n,r){var o=new sa(t,e,i,this,n);return r?o:o.doResume(null)}}function la(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ua(t){return function(e,i,n,r){var o=new la(t,e,i,this,n);return r?o:o.doResume(null)}}function pa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ca(t){return function(e,i,n,r){var o=new pa(t,e,i,this,n);return r?o:o.doResume(null)}}function ha(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function da(t){return function(e,i,n,r){var o=new ha(t,e,i,this,n);return r?o:o.doResume(null)}}function fa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function _a(t){return function(e,i,n,r){var o=new fa(t,e,i,this,n);return r?o:o.doResume(null)}}function ma(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function $a(t){return function(e,i,n,r){var o=new ma(t,e,i,this,n);return r?o:o.doResume(null)}}function ya(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function va(t){return function(e,i,n,r){var o=new ya(t,e,i,this,n);return r?o:o.doResume(null)}}function ga(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ba(t){return function(e,i,n,r){var o=new ga(t,e,i,this,n);return r?o:o.doResume(null)}}function xa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function wa(t){return function(e,i,n,r){var o=new xa(t,e,i,this,n);return r?o:o.doResume(null)}}function za(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ka(t){return function(e,i,n,r){var o=new za(t,e,i,this,n);return r?o:o.doResume(null)}}function Sa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ca(t){return function(e,i,n,r){var o=new Sa(t,e,i,this,n);return r?o:o.doResume(null)}}function Na(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ea(t){return function(e,i,n,r){var o=new Na(t,e,i,this,n);return r?o:o.doResume(null)}}function Pa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ta(t){return function(e,i,n,r){var o=new Pa(t,e,i,this,n);return r?o:o.doResume(null)}}function Oa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ma(t){return function(e,i,n,r){var o=new Oa(t,e,i,this,n);return r?o:o.doResume(null)}}function ja(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Aa(t){return function(e,i,n,r){var o=new ja(t,e,i,this,n);return r?o:o.doResume(null)}}function Ra(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ia(t){return function(e,i,n,r){var o=new Ra(t,e,i,this,n);return r?o:o.doResume(null)}}function La(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Da(t){return function(e,i,n,r){var o=new La(t,e,i,this,n);return r?o:o.doResume(null)}}function qa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ba(t){return function(e,i,n,r){var o=new qa(t,e,i,this,n);return r?o:o.doResume(null)}}function Fa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ua(t){return function(e,i,n,r){var o=new Fa(t,e,i,this,n);return r?o:o.doResume(null)}}function Va(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ga(t){return function(e,i,n,r){var o=new Va(t,e,i,this,n);return r?o:o.doResume(null)}}function Ha(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Wa(t){return function(e,i,n,r){var o=new Ha(t,e,i,this,n);return r?o:o.doResume(null)}}function Ka(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Xa(t){return function(e,i,n,r){var o=new Ka(t,e,i,this,n);return r?o:o.doResume(null)}}function Ya(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Za(t){return function(e,i,n,r){var o=new Ya(t,e,i,this,n);return r?o:o.doResume(null)}}function Ja(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Qa(t){return function(e,i,n,r){var o=new Ja(t,e,i,this,n);return r?o:o.doResume(null)}}function tl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function el(t){return function(e,i,n,r){var o=new tl(t,e,i,this,n);return r?o:o.doResume(null)}}function il(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function nl(t){return function(e,i,n,r){var o=new il(t,e,i,this,n);return r?o:o.doResume(null)}}function rl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ol(t){return function(e,i,n,r){var o=new rl(t,e,i,this,n);return r?o:o.doResume(null)}}function sl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function al(t){return function(e,i,n,r){var o=new sl(t,e,i,this,n);return r?o:o.doResume(null)}}$s.$metadata$={kind:T,simpleName:"PbrDemo",interfaces:[ho]},Object.defineProperty(qs.prototype,"currentMat",{configurable:!0,get:function(){return this.matCycler.current}}),qs.prototype.nextMaterial_0=function(){return this.currentMat.disposeMaps(),this.matCycler.next(),this.updatePbrMaterial_0(),this.currentMat},qs.prototype.prevMaterial_0=function(){return this.currentMat.disposeMaps(),this.matCycler.prev(),this.updatePbrMaterial_0(),this.currentMat},qs.prototype.updatePbrMaterial_0=function(){var t;for(t=this.shaders_0.iterator();t.hasNext();){var e,i,n,r=t.next();r.albedoMap=this.currentMat.albedo,r.normalMap=this.currentMat.normal,r.roughnessMap=this.currentMat.roughness,r.metallicMap=null!=(e=this.currentMat.metallic)?e:ul().defaultMetallicTex_0,r.occlusionMap=null!=(i=this.currentMat.ao)?i:ul().defaultAoTex_0,r.displacementMap=null!=(n=this.currentMat.displacement)?n:ul().defaultDispTex_0}},qs.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-mat-container",Vs(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},qs.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},qs.prototype.createContent_wo93gw$=function(t,e,i){return this.content=Y(void 0,Gs(t,e,this,i)),d(this.content)},qs.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i,n,r;if(null!=(n=null!=(i=this.iblContent_0)?i.children:null))for(r=n.iterator();r.hasNext();){var o,s=r.next();e.isType(s,Z)||K();var a=e.isType(o=s.shader,We)?o:K();a.irradianceMap=t.irradianceMap,a.reflectionMap=t.reflectionMap,a.brdfLut=t.brdfLut}},qs.prototype.makeSphere_0=function(t,e,i){return Y(void 0,(n=this,r=t,o=i,a=e,function(t){return t.unaryPlus_uv0sim$(b(void 0,!0,Hs(n,r,o,a))),s}));var n,r,o,a},Ws.prototype.disposeMaps=function(){var t,e,i;this.albedo.dispose(),this.normal.dispose(),this.roughness.dispose(),null!=(t=this.metallic)&&t.dispose(),null!=(e=this.ao)&&e.dispose(),null!=(i=this.displacement)&&i.dispose()},Ws.$metadata$={kind:T,simpleName:"MaterialMaps",interfaces:[]},Ws.prototype.component1=function(){return this.name},Ws.prototype.component2=function(){return this.albedo},Ws.prototype.component3=function(){return this.normal},Ws.prototype.component4=function(){return this.roughness},Ws.prototype.component5=function(){return this.metallic},Ws.prototype.component6=function(){return this.ao},Ws.prototype.component7=function(){return this.displacement},Ws.prototype.copy_chv25t$=function(t,e,i,n,r,o,s){return new Ws(void 0===t?this.name:t,void 0===e?this.albedo:e,void 0===i?this.normal:i,void 0===n?this.roughness:n,void 0===r?this.metallic:r,void 0===o?this.ao:o,void 0===s?this.displacement:s)},Ws.prototype.toString=function(){return"MaterialMaps(name="+e.toString(this.name)+", albedo="+e.toString(this.albedo)+", normal="+e.toString(this.normal)+", roughness="+e.toString(this.roughness)+", metallic="+e.toString(this.metallic)+", ao="+e.toString(this.ao)+", displacement="+e.toString(this.displacement)+")"},Ws.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.albedo)|0)+e.hashCode(this.normal)|0)+e.hashCode(this.roughness)|0)+e.hashCode(this.metallic)|0)+e.hashCode(this.ao)|0)+e.hashCode(this.displacement)|0},Ws.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.albedo,t.albedo)&&e.equals(this.normal,t.normal)&&e.equals(this.roughness,t.roughness)&&e.equals(this.metallic,t.metallic)&&e.equals(this.ao,t.ao)&&e.equals(this.displacement,t.displacement)},Xs.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Xs.prototype=Object.create(z.prototype),Xs.prototype.constructor=Xs,Xs.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-albedo.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ys.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ys.prototype=Object.create(z.prototype),Ys.prototype.constructor=Ys,Ys.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-normal.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Js.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Js.prototype=Object.create(z.prototype),Js.prototype.constructor=Js,Js.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-roughness.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ta.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ta.prototype=Object.create(z.prototype),ta.prototype.constructor=ta,ta.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-ao.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ia.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ia.prototype=Object.create(z.prototype),ia.prototype.constructor=ia,ia.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_diff_2k.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ra.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ra.prototype=Object.create(z.prototype),ra.prototype.constructor=ra,ra.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_nor_2k.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},sa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},sa.prototype=Object.create(z.prototype),sa.prototype.constructor=sa,sa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_rough_2k.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},la.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},la.prototype=Object.create(z.prototype),la.prototype.constructor=la,la.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_ao_2k.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},pa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},pa.prototype=Object.create(z.prototype),pa.prototype.constructor=pa,pa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_disp_2k.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ha.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ha.prototype=Object.create(z.prototype),ha.prototype.constructor=ha,ha.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-albedo4.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},fa.prototype=Object.create(z.prototype),fa.prototype.constructor=fa,fa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-normal2.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ma.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ma.prototype=Object.create(z.prototype),ma.prototype.constructor=ma,ma.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-roughness3.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ya.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ya.prototype=Object.create(z.prototype),ya.prototype.constructor=ya,ya.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_COL_2K_METALNESS.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ga.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ga.prototype=Object.create(z.prototype),ga.prototype.constructor=ga,ga.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_NRM_2K_METALNESS.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},xa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},xa.prototype=Object.create(z.prototype),xa.prototype.constructor=xa,xa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_ROUGHNESS_2K_METALNESS.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},za.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},za.prototype=Object.create(z.prototype),za.prototype.constructor=za,za.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_METALNESS_2K_METALNESS.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Sa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Sa.prototype=Object.create(z.prototype),Sa.prototype.constructor=Sa,Sa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_AO_2K_METALNESS.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Na.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Na.prototype=Object.create(z.prototype),Na.prototype.constructor=Na,Na.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_DISP_2K_METALNESS.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Pa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Pa.prototype=Object.create(z.prototype),Pa.prototype.constructor=Pa,Pa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic4-alb.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Oa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Oa.prototype=Object.create(z.prototype),Oa.prototype.constructor=Oa,Oa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-normal.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ja.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ja.prototype=Object.create(z.prototype),ja.prototype.constructor=ja,ja.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-rough.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ra.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ra.prototype=Object.create(z.prototype),Ra.prototype.constructor=Ra,Ra.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-ao.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},La.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},La.prototype=Object.create(z.prototype),La.prototype.constructor=La,La.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_albedo.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},qa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},qa.prototype=Object.create(z.prototype),qa.prototype.constructor=qa,qa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_normal-dx.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Fa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Fa.prototype=Object.create(z.prototype),Fa.prototype.constructor=Fa,Fa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_roughness.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Va.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Va.prototype=Object.create(z.prototype),Va.prototype.constructor=Va,Va.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_ao.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ha.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ha.prototype=Object.create(z.prototype),Ha.prototype.constructor=Ha,Ha.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_height.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ka.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ka.prototype=Object.create(z.prototype),Ka.prototype.constructor=Ka,Ka.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-albedo2.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ya.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ya.prototype=Object.create(z.prototype),Ya.prototype.constructor=Ya,Ya.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-normal.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ja.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ja.prototype=Object.create(z.prototype),Ja.prototype.constructor=Ja,Ja.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-roughness1.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},tl.prototype=Object.create(z.prototype),tl.prototype.constructor=tl,tl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_COL_2K.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},il.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},il.prototype=Object.create(z.prototype),il.prototype.constructor=il,il.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_NRM_2K.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},rl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},rl.prototype=Object.create(z.prototype),rl.prototype.constructor=rl,rl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_REFL_2K.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},sl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},sl.prototype=Object.create(z.prototype),sl.prototype.constructor=sl,sl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_DISP_2K.jpg",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ks.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var ll=null;function ul(){return null===ll&&new Ks,ll}function pl(t){yl(),Ps.call(this,"Roughness / Metal"),this.sphereProto=t,this.colors_0=new po(yl().matColors_0),this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function cl(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(et(15),ge(t.v),tt()),i.layoutSpec.setSize_4ujscr$(et(70),ge(35),it()),i.text=e.colors_0.current.name;var n=i.onClick,r=function(t){return function(e,i,n,r){var o;for(e.text=t.colors_0.next().name,o=t.shaders_0.iterator();o.hasNext();)o.next().albedo=t.colors_0.current.linColor;return s}}(e);return n.add_11rb$(r),s}}function hl(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(20),ge(35),it()),n.text="<";var r=n.onClick,o=function(t,e){return function(i,n,r,o){var a;for(e.text=t.colors_0.prev().name,a=t.shaders_0.iterator();a.hasNext();)a.next().albedo=t.colors_0.current.linColor;return s}}(e,i);return r.add_11rb$(o),s}}function dl(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(et(80),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(20),ge(35),it()),n.text=">";var r=n.onClick,o=function(t,e){return function(i,n,r,o){var a;for(e.text=t.colors_0.next().name,a=t.shaders_0.iterator();a.hasNext();)a.next().albedo=t.colors_0.current.linColor;return s}}(e,i);return r.add_11rb$(o),s}}function fl(t,e,i,n){return function(r){r.isVisible=!1,r.layoutSpec.setOrigin_4ujscr$(et(0),ge(t-60),tt()),r.layoutSpec.setSize_4ujscr$(et(100),ge(60),it());var o={v:-30};r.unaryPlus_uv0sim$(i.label_tokfmu$("color-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(et(0),ge(t.v),tt()),n.layoutSpec.setSize_4ujscr$(et(100),ge(30),it()),n.font.setCustom_11rb$(e),n.text="Color",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new rt(nt.CENTER,nt.CENTER),s}}(o,e,i))),o.v-=30;var a=i.button_9zrh0o$("selected-color",cl(o,n));return r.unaryPlus_uv0sim$(a),r.unaryPlus_uv0sim$(i.button_9zrh0o$("color-left",hl(o,n,a))),r.unaryPlus_uv0sim$(i.button_9zrh0o$("color-right",dl(o,n,a))),s}}function _l(t,e){this.name=t,this.linColor=e}function ml(){$l=this,this.matColors_0=Zt([new _l("Red",m.Companion.MD_RED.toLinear()),new _l("Pink",m.Companion.MD_PINK.toLinear()),new _l("Purple",m.Companion.MD_PURPLE.toLinear()),new _l("Deep Purple",m.Companion.MD_DEEP_PURPLE.toLinear()),new _l("Indigo",m.Companion.MD_INDIGO.toLinear()),new _l("Blue",m.Companion.MD_BLUE.toLinear()),new _l("Cyan",m.Companion.MD_CYAN.toLinear()),new _l("Teal",m.Companion.MD_TEAL.toLinear()),new _l("Green",m.Companion.MD_GREEN.toLinear()),new _l("Light Green",m.Companion.MD_LIGHT_GREEN.toLinear()),new _l("Lime",m.Companion.MD_LIME.toLinear()),new _l("Yellow",m.Companion.MD_YELLOW.toLinear()),new _l("Amber",m.Companion.MD_AMBER.toLinear()),new _l("Orange",m.Companion.MD_ORANGE.toLinear()),new _l("Deep Orange",m.Companion.MD_DEEP_ORANGE.toLinear()),new _l("Brown",m.Companion.MD_BROWN.toLinear()),new _l("White",m.Companion.WHITE.toLinear()),new _l("Grey",m.Companion.MD_GREY.toLinear()),new _l("Blue Grey",m.Companion.MD_BLUE_GREY.toLinear()),new _l("Almost Black",new m(.1,.1,.1).toLinear())])}qs.$metadata$={kind:T,simpleName:"PbrMaterialContent",interfaces:[Ps]},pl.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-rough-metal-container",fl(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},pl.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},pl.prototype.createContent_wo93gw$=function(t,e,i){var n,r;return this.content=Y(void 0,(n=e,r=this,function(t){t.isVisible=!1,t.isFrustumChecked=!1;var e=r.makeSpheres_0(!0,n),i=r.makeSpheres_0(!1,n);i.isVisible=!1;var o=i;return t.unaryPlus_uv0sim$(e),t.unaryPlus_uv0sim$(o),r.iblContent_0=e,r.nonIblContent_0=o,s})),d(this.content)},pl.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i;if(null!=(i=this.iblContent_0)){var n,r=e.isType(n=i.shader,We)?n:K();r.irradianceMap=t.irradianceMap,r.reflectionMap=t.reflectionMap,r.brdfLut=t.brdfLut}},pl.prototype.makeSpheres_0=function(t,i){var n=new Z(new te(Zt([J.Companion.POSITIONS,J.Companion.NORMALS])),null);n.isFrustumChecked=!1,n.geometry.addGeometry_r7nl2o$(this.sphereProto.simpleSphere);var r=this.instancedPbrShader_0(t,i);this.shaders_0.add_11rb$(r),n.shader=r;for(var o=new Pe(Zt([Pe.Companion.MODEL_MAT,J.Companion.COLORS]),e.imul(7,7)),s=new fe,a=0;a<7;a++)for(var l=0;l<7;l++){s.setIdentity(),s.translate_y2kzbl$(2.5*(-3+l),2.5*(3-a),0),o.checkBufferSize_za3lpa$();var u=o.dataF.position,p=o.dataF;p.put_q3cr5i$(s.matrix);var c=l/6,h=j.max(c,.05),d=a/6;p.put_mx4ult$(h),p.put_mx4ult$(d),p.put_mx4ult$(0),p.put_mx4ult$(0);var f=o.dataF.position-u|0;if(f!==o.instanceSizeF)throw Re("Expected data to grow by "+o.instanceSizeF+" elements, instead it grew by "+f);o.numInstances=o.numInstances+1|0,o.hasChanged=!0}return n.instances=o,n},pl.prototype.instancedPbrShader_0=function(t,i){var n=new ct;n.albedoSource=y.STATIC_ALBEDO,n.albedo=this.colors_0.current.linColor,n.isInstanced=!0,t&&n.useImageBasedLighting_po417x$(i);var r=n,o=We.Companion.defaultPbrModel_2ufela$(r),s={v:null},a=new q(o);s.v=a.stageInterfaceNode_iikjwn$("ifInstColors",a.instanceAttributeNode_nm2vx5$(J.Companion.COLORS).output);var l,u,p=new B(o);t:do{var c;for(l=wt.ALL,c=o.stages.values.iterator();c.hasNext();){var h=c.next();if(0!=(h.stage.mask&l.mask)){var f,_,m=h.nodes;e:do{var $;for($=m.iterator();$.hasNext();){var v=$.next();if(Rt(v.name,"pbrMaterial")&&e.isType(v,ci)){_=v;break e}}_=null}while(0);var g=null==(f=_)||e.isType(f,ci)?f:K();if(null!=g){u=g;break t}}}u=null}while(0);var b=d(u);return b.inRoughness=p.splitNode_500t7j$(s.v.output,"r").output,b.inMetallic=p.splitNode_500t7j$(s.v.output,"g").output,new We(r,o)},_l.$metadata$={kind:T,simpleName:"MatColor",interfaces:[]},_l.prototype.component1=function(){return this.name},_l.prototype.component2=function(){return this.linColor},_l.prototype.copy_guvy9a$=function(t,e){return new _l(void 0===t?this.name:t,void 0===e?this.linColor:e)},_l.prototype.toString=function(){return"MatColor(name="+e.toString(this.name)+", linColor="+e.toString(this.linColor)+")"},_l.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.linColor)|0},_l.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.linColor,t.linColor)},ml.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var $l=null;function yl(){return null===$l&&new ml,$l}function vl(t,e){kl(),ut.call(this),this.pbrColorOut=t,this.ibl=e,this.unaryPlus_uv0sim$(this.makeWine_0()),this.unaryPlus_uv0sim$(this.makeBody_0()),this.unaryPlus_uv0sim$(this.makeShaft_0()),this.translate_y2kzbl$(7.5,0,2.5),this.scale_mx4ult$(.9)}function gl(t){return function(e){return e.isOpaque=!1,e.generate_v2sixm$(function(t){return function(e){return t.makeBodyGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t)),e.shader=v(function(t){return function(e){return e.useImageBasedLighting_po417x$(t.ibl),e.roughness=0,e.alphaMode=new yt,e.reflectionStrength=.3,s}}(t)),s}}function bl(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeWineGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new ct;return i.roughness=0,i.emissive=new m(.3,0,.1).toLinear().withAlpha_mx4ult$(.8),i.useStaticAlbedo_d7aj7k$(new m(.3,0,.1).mix_y83vuj$(m.Companion.BLACK,.2).toLinear()),e.shader=new ht(i),s}}function xl(t,e,i){this.r=t,this.h=e,this.t=i}function wl(){zl=this,this.THICKNESS_0=new J("aMatThickness",Ae.FLOAT)}pl.$metadata$={kind:T,simpleName:"RoughnesMetalGridContent",interfaces:[Ps]},vl.prototype.makeBody_0=function(){return g(void 0,gl(this))},vl.prototype.makeShaft_0=function(){var t,e=new Z(new te(Zt([J.Companion.POSITIONS,J.Companion.NORMALS,J.Companion.COLORS,kl().THICKNESS_0])),null);return e.generate_v2sixm$((t=this,function(e){return t.makeShaftGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s})),e.isOpaque=!1,e.shader=this.glasShader_0(),e},vl.prototype.makeWine_0=function(){return g(void 0,bl(this))},vl.prototype.makeBodyGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.BLACK.withAlpha_mx4ult$(.1).toLinear();var e,i=new ce;for(t.circleShape_k80pjh$(i),e=$e(Zt([new xl(1.3,9.1,1.5),new xl(1.5,9.3,1),new xl(3.97,11.8,1),new xl(4.2,12.1,1),new xl(4.45,12.6,1),new xl(4.6,13.1,1),new xl(4.65,13.5,1),new xl(4.65,14.5,1),new xl(4.58,15.5,1),new xl(4.42,17,1),new xl(4,20,1),new xl(3.5,23,.5),new xl(3.475,23.05,.5),new xl(3.45,23,.5),new xl(3.95,20,.5),new xl(4.37,17,.5),new xl(4.6,14.5,.5),new xl(4.6,13.5,.5)])).iterator();e.hasNext();){var n=e.next();t.transform.push(),t.scale_y2kzbl$(n.r,n.r,1),t.translate_y2kzbl$(0,0,n.h),t.sample_afatab$(i,void 0,!0),t.transform.pop()}},vl.prototype.makeShaftGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.DARK_GRAY.withAlpha_mx4ult$(.1).toLinear();var e=new ce;t.circleShape_k80pjh$(e);var i,n,r={v:.5};for(t.vertexModFun=(i=r,function(t){var e;return null!=(e=t.getFloatAttribute_nm2vx5$(kl().THICKNESS_0))&&(e.f=i.v),s}),t.transform.push(),t.scale_y2kzbl$(4,4,1),t.sampleAndFillBottom_afatab$(e),t.transform.pop(),n=Zt([new xl(4.1,.1,.5),new xl(4,.2,.5),new xl(2,.5,.75),new xl(1.5,.65,1),new xl(1,.95,1.5),new xl(.75,1.25,2),new xl(.5,2,5),new xl(.4,3,20),new xl(.4,7,20),new xl(.5,8,20),new xl(.6,8.25,2.5),new xl(.9,8.65,1),new xl(1.3,9.1,1)]).iterator();n.hasNext();){var o=n.next();t.transform.push(),t.scale_y2kzbl$(o.r,o.r,1),t.translate_y2kzbl$(0,0,o.h),r.v=o.t,t.sample_afatab$(e),t.transform.pop()}},vl.prototype.makeWineGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var e,i=new ce;for(t.circleShape_k80pjh$(i),t.transform.push(),t.translate_y2kzbl$(0,0,10),t.sampleAndFillBottom_afatab$(i),t.transform.pop(),e=Zt([new xl(1.28,9.1,1.5),new xl(1.48,9.3,3),new xl(3.95,11.8,7),new xl(4.18,12.1,7),new xl(4.43,12.6,7),new xl(4.58,13.1,7),new xl(4.63,13.5,7),new xl(4.63,13.5,7),new xl(4.57,13.4,7),new xl(3,13.4,7),new xl(1.5,13.4,7),new xl(.5,13.4,7)]).iterator();e.hasNext();){var n=e.next();t.transform.push(),t.scale_y2kzbl$(n.r,n.r,1),t.translate_y2kzbl$(0,0,n.h),t.sample_afatab$(i),t.transform.pop()}t.fillTop_pvgy1j$(i)},vl.prototype.glasShader_0=function(){var t=new ct;t.useRefraction_vv6xll$(this.pbrColorOut),t.useImageBasedLighting_po417x$(this.ibl),t.roughness=0,t.alphaMode=new yt;var i,n,r=t,o=We.Companion.defaultPbrModel_2ufela$(r),s={v:null},a=new q(o);s.v=a.stageInterfaceNode_iikjwn$("ifThickness",a.attributeNode_nm2vx5$(kl().THICKNESS_0).output),new B(o);t:do{var l;for(i=wt.ALL,l=o.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var d=p.next();e.isType(d,fi)&&h.add_11rb$(d)}var f=zt(h);if(null!=f){n=f;break t}}}n=null}while(0);return null!=n&&(n.inMaterialThickness=s.v.output),new We(r,o)},xl.$metadata$={kind:T,simpleName:"ExtrudeProps",interfaces:[]},wl.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var zl=null;function kl(){return null===zl&&new wl,zl}function Sl(){ho.call(this,"Procedural Geometry"),this.autoRotate=!0,this.roses_wwovcl$_0=this.roses_wwovcl$_0}function Cl(t,e){return function(i){i.setMouseRotation_dleff0$(-20,-10),i.setMouseTranslation_y2kzbl$(0,16,0),i.zoom=40,i.unaryPlus_uv0sim$(t.camera);var n=i.onUpdate,r=function(t,e){return function(i,n){return t.autoRotate&&(e.verticalRotation+=5*n.deltaT),s}}(e,i);return n.add_11rb$(r),s}}function Nl(t){return t.setDirectional_czzhiu$(new $(-1,-.3,-1)),t.setColor_y83vuj$(m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.5).toLinear(),3),s}function El(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$ProceduralDemo=e,this.local$$receiver=i}function Pl(t,e){return function(i){i.button_9zrh0o$("Empty Vase",function(t,e){return function(i){var n;for(n=t.roses.children.iterator();n.hasNext();)n.next().dispose_aemszp$(e);return t.roses.removeAllChildren(),s}}(t,e));var n,r={v:null},o={v:!0};return i.button_9zrh0o$("Generate Rose",function(t,e,i,n){return function(r){var o;if(!t.roses.children.isEmpty()&&e.v){var a=_e(t.roses.children);t.roses.removeNode_f1kmr1$(a),a.dispose_aemszp$(i)}var l=_i();return null!=(o=n.v)&&(o.text=l.toString()),t.roses.makeRose_za3lpa$(l),s}}(t,o,e,r)),i.toggleButton_8v9fdr$("Replace Last Rose",o.v,(n=o,function(t){return n.v=t.isEnabled,s})),r.v=i.textWithValue_puj7f4$("Seed:",""),s}}function Tl(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function Ol(){ut.call(this),this.makeRose_za3lpa$(1234),this.makeRose_za3lpa$(6415168),this.makeRose_za3lpa$(2541685),this.makeRose_za3lpa$(-336577773),this.makeRose_za3lpa$(1339055691),this.translate_y2kzbl$(-7.5,10.5,2.5)}function Ml(t){var e;this.shaftGrad=new $i([ae(0,m.Companion.MD_BROWN_900.toLinear()),ae(.4,m.Companion.MD_BROWN.toLinear()),ae(1,m.Companion.MD_LIGHT_GREEN_600.toLinear())]),this.blossomLeafGrad=mi([m.Companion.MD_LIGHT_GREEN_600.toLinear(),m.Companion.MD_LIGHT_GREEN.mix_y83vuj$(m.Companion.MD_YELLOW_200,.5).toLinear()]),this.shaftMesh=null,this.leafMesh=null,this.shaftLeafMesh=null,this.blossomMesh=null,this.rand=new de(t),this.shaftTopTransform=new fe,this.shaftLeafTransform=new fe,this.shaftMesh=g(void 0,(e=this,function(t){t.generate_v2sixm$(function(t){return function(e){return t.makeShaftGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(e));var i=new ct;return i.roughness=.3,t.shader=new ht(i),s})),this.shaftLeafMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeShaftLeafGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new ct;return i.roughness=.5,e.shader=new ht(i),s}}(this)),this.leafMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeLeafGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new ct;return i.roughness=.5,e.shader=new ht(i),s}}(this)),this.blossomMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeBlossomGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new ct;return i.roughness=.8,e.shader=new ht(i),s}}(this)),this.applyTint_d7aj7k$(m.Companion.fromHsv_7b5o5w$(this.rand.randomF_dleff0$(0,360),.12,this.rand.randomF_dleff0$(.7,1),1).toLinear())}function jl(){var t;Z.call(this,Q([J.Companion.POSITIONS,J.Companion.NORMALS,J.Companion.TEXTURE_COORDS,J.Companion.TANGENTS])),this.isCastingShadow=!1,this.generate_v2sixm$((t=this,function(e){return t.makeGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),e.geometry.generateTangents_mx4ult$(),s}));var e=new ct;e.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/granitesmooth1/granitesmooth1-albedo4.jpg"),e.useNormalMap_9sobi5$(Yr().pbrBasePath+"/granitesmooth1/granitesmooth1-normal2.jpg"),e.useRoughnessMap_ivxn3r$(Yr().pbrBasePath+"/granitesmooth1/granitesmooth1-roughness3.jpg"),this.shader=new ht(e)}function Al(){var t;Z.call(this,Q([J.Companion.POSITIONS,J.Companion.NORMALS,J.Companion.COLORS])),this.generate_v2sixm$((t=this,function(e){return t.makeGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}));var e=new ct;e.roughness=.3,this.shader=new ht(e)}function Rl(){ho.call(this,"Simplification"),this.models=pt(),this.modelWireframe=new li,this.srcModel=null,this.dispModel=new Z(Q([J.Companion.POSITIONS,J.Companion.NORMALS])),this.heMesh=null,this.simplifcationGrade=1,this.autoRun_z6bycc$_0=this.autoRun_z6bycc$_0,this.facesValLbl_1vvnvx$_0=this.facesValLbl_1vvnvx$_0,this.vertsValLbl_bpoadb$_0=this.vertsValLbl_bpoadb$_0,this.timeValLbl_itlx8a$_0=this.timeValLbl_itlx8a$_0,this.autoRotate=!0,this.dispModel.shader=v(Hl),this.srcModel=this.makeCosGrid_0();var t=this.models,e=this.srcModel;t.put_xwzc9p$("cos",e),this.heMesh=new gi(this.srcModel)}function Il(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$SimplificationDemo=t,this.local$$receiver=e}function Ll(t,e){return function(i){i.unaryPlus_uv0sim$(t.dispModel),i.unaryPlus_uv0sim$(t.modelWireframe);var n=i.onUpdate,r=function(t,e,i){return function(n,r){return t.autoRotate&&i.rotate_ad55pp$(3*e.deltaT,$.Companion.Y_AXIS),s}}(t,e,i);return n.add_11rb$(r),s}}function Dl(t,e,i,n,r,o){z.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$name=i,this.local$scale=n,this.local$offset=r}function ql(t){return function(e){return e.button_9zrh0o$("Cow",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("cow"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Teapot",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("teapot"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Bunny",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("bunny"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Cosine Grid",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("cos"))?i:t.srcModel,t.simplify(),s}}(t)),s}}function Bl(t){return s}function Fl(t){return s}function Ul(t){return function(e){var i=e.toggleButton_8v9fdr$("Draw Solid",t.dispModel.isVisible,Bl),n=e.toggleButton_8v9fdr$("Draw Wireframe",t.modelWireframe.isVisible,Fl),r=i.onStateChange,o=function(t,e){return function(i){return t.dispModel.isVisible=i.isEnabled,i.isEnabled||e.isEnabled||(e.isEnabled=!0),s}}(t,n);r.add_11rb$(o);var a=n.onStateChange,l=function(t,e){return function(i){return t.modelWireframe.isVisible=i.isEnabled,i.isEnabled||e.isEnabled||(e.isEnabled=!0),s}}(t,i);return a.add_11rb$(l),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function Vl(t){return s}function Gl(t){return function(e){return e.sliderWithValue_xbu91d$("Ratio:",100,1,100,void 0,void 0,function(t){return function(e){return t.simplifcationGrade=e.value/100,t.autoRun.isEnabled&&t.simplify(),s}}(t)),e.button_9zrh0o$("Update Mesh",function(t){return function(e){return t.simplify(),s}}(t)),t.autoRun=e.toggleButton_8v9fdr$("Auto Update",!0,Vl),t.facesValLbl=e.textWithValue_puj7f4$("Faces:",""),t.vertsValLbl=e.textWithValue_puj7f4$("Vertices:",""),t.timeValLbl=e.textWithValue_puj7f4$("Time:",""),s}}function Hl(t){return t.albedoSource=y.STATIC_ALBEDO,t.albedo=m.Companion.WHITE,t.roughness=.15,s}function Wl(){ho.call(this,"Procedural Tree"),this.treeGen=null,this.trunkMesh=null,this.leafMesh=null,this.autoRotate=!0,this.windSpeed=2.5,this.windAnimationPos=0,this.windStrength=1,this.lightDirection=new at(-1,-1.5,-1).norm();var t=new au(2.75,3,3.5);this.treeGen=new nu(t,void 0,void 0,this.lightDirection),this.treeGen.generate_za3lpa$()}function Kl(t,i,n,r){return function(o){o.generate_v2sixm$(function(t){return function(i){var n;n=Ci.INFO;var r=Oi();t.treeGen.buildTrunkMesh_84rojv$(i);var o=me.Log,a=e.getKClassFromExpression(i).simpleName;return n.level>=o.level.level&&o.printer(n,a,"Generated "+(i.geometry.numIndices/3|0)+" trunk triangles in "+wi(Oi()-r,3)+" ms"),s}}(t));var a={v:null},l={v:null},u=new ct,p=i,c=n;u.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/bark_pine/Bark_Pine_baseColor.jpg"),u.useOcclusionMap_9sobi5$(Yr().pbrBasePath+"/bark_pine/Bark_Pine_ambientOcclusion.jpg"),u.useNormalMap_9sobi5$(Yr().pbrBasePath+"/bark_pine/Bark_Pine_normal.jpg"),u.useRoughnessMap_ivxn3r$(Yr().pbrBasePath+"/bark_pine/Bark_Pine_roughness.jpg"),u.useImageBasedLighting_po417x$(p),u.shadowMaps.addAll_brywnq$(c),u.roughness=1;var h,d=u,f=new We(d,t.treePbrModel_0(d));o.onDispose.add_11rb$((h=f,function(t,e){var i,n,r,o;return null!=(i=h.albedoMap)&&i.dispose(),null!=(n=h.occlusionMap)&&n.dispose(),null!=(r=h.normalMap)&&r.dispose(),null!=(o=h.roughnessMap)&&o.dispose(),s})),f.onPipelineCreated.add_11rb$(function(t,i,n){return function(r,o,a){var l,u,p,c,h=i,d=t.model;t:do{var f;for(p=wt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(Rt(g.name,"windAnim")&&e.isType(g,Ei)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,Ei)?m:K();if(null!=b){c=b;break t}}}c=null}while(0);h.v=null!=(l=c)?l.uniform:null;var x,w,z=n,k=t.model;t:do{var S;for(x=wt.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&x.mask)){var N,E,P=C.nodes;e:do{var T;for(T=P.iterator();T.hasNext();){var O=T.next();if(Rt(O.name,"windStrength")&&e.isType(O,Ei)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,Ei)?N:K();if(null!=M){w=M;break t}}}w=null}while(0);return z.v=null!=(u=w)?u.uniform:null,s}}(f,a,l)),o.shader=f;var _=o.onUpdate,m=function(t,e,i,n){return function(r,o){var a,l;return e.windAnimationPos+=t.deltaT*e.windSpeed,null!=(a=i.v)&&(a.value=e.windAnimationPos),null!=(l=n.v)&&(l.value=e.windStrength),s}}(r,t,a,l);return _.add_11rb$(m),s}}function Xl(t,i,n){return function(r){r.generate_v2sixm$(function(t){return function(i){var n;n=Ci.INFO;var r=Oi();t.treeGen.buildLeafMesh_84rojv$(i);var o=me.Log,a=e.getKClassFromExpression(i).simpleName;return n.level>=o.level.level&&o.printer(n,a,"Generated "+(i.geometry.numIndices/3|0)+" leaf triangles in "+wi(Oi()-r,3)+" ms"),s}}(t));var o={v:null},a={v:null},l=new ct,u=i,p=n;l.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/leaf.png"),l.useImageBasedLighting_po417x$(u),l.roughness=1,l.alphaMode=new Pi(.5),l.cullMethod=xt.NO_CULLING,l.shadowMaps.addAll_brywnq$(p);var c,h=l,f=new We(h,t.treePbrModel_0(h));r.onDispose.add_11rb$((c=f,function(t,e){return d(c.albedoMap).dispose(),s})),f.onPipelineCreated.add_11rb$(function(t,i,n){return function(r,o,a){var l,u,p,c,h=i,d=t.model;t:do{var f;for(p=wt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(Rt(g.name,"windAnim")&&e.isType(g,Ei)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,Ei)?m:K();if(null!=b){c=b;break t}}}c=null}while(0);h.v=null!=(l=c)?l.uniform:null;var x,w,z=n,k=t.model;t:do{var S;for(x=wt.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&x.mask)){var N,E,P=C.nodes;e:do{var T;for(T=P.iterator();T.hasNext();){var O=T.next();if(Rt(O.name,"windStrength")&&e.isType(O,Ei)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,Ei)?N:K();if(null!=M){w=M;break t}}}w=null}while(0);return z.v=null!=(u=w)?u.uniform:null,s}}(f,o,a)),r.shader=f;var _=r.onUpdate,m=function(t,e,i){return function(n,r){var o,a;return null!=(o=e.v)&&(o.value=t.windAnimationPos),null!=(a=i.v)&&(a.value=t.windStrength),s}}(t,o,a);return _.add_11rb$(m),s}}function Yl(t,i,n){return function(r){var o;r.unaryPlus_uv0sim$(t.camera),r.minZoom=1,r.maxZoom=50,r.zoomMethod=Qe.ZOOM_CENTER,r.zoom=6,r.setMouseRotation_dleff0$(0,-10),r.setMouseTranslation_y2kzbl$(0,2,0),(e.isType(o=t.camera,W)?o:K()).clipFar=50;var a=r.onUpdate,l=function(t,e,i){return function(n,r){return t.autoRotate&&(i.verticalRotation+=3*e.deltaT),s}}(i,n,r);return a.add_11rb$(l),s}}function Zl(t){return function(i){return i.sliderWithValue_xbu91d$("Grow Distance:",t.treeGen.growDistance,.1,.4,void 0,void 0,function(t){return function(e){return t.treeGen.growDistance=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Kill Distance:",t.treeGen.killDistance,1,4,void 0,void 0,function(t){return function(e){return t.treeGen.killDistance=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Attraction Points:",t.treeGen.numberOfAttractionPoints,100,1e4,void 0,void 0,function(t){return function(e){return t.treeGen.numberOfAttractionPoints=st(e.value),s}}(t)),i.sliderWithValue_xbu91d$("Radius of Influence:",t.treeGen.radiusOfInfluence,.25,10,void 0,void 0,function(t){return function(e){return t.treeGen.radiusOfInfluence=e.value,s}}(t)),i.button_9zrh0o$("Generate Tree",function(t){return function(i){var n,r;if(t.treeGen.generate_za3lpa$(),null!=(n=t.trunkMesh)){var o=t,a=n.geometry,l=a.isBatchUpdate;a.isBatchUpdate=!0,a.clear();var u,p=new he(a);u=Ci.INFO;var c=Oi();o.treeGen.buildTrunkMesh_84rojv$(p),a.generateTangents_mx4ult$();var h=me.Log,d=e.getKClassFromExpression(a).simpleName;u.level>=h.level.level&&h.printer(u,d,"Generated "+(a.numIndices/3|0)+" trunk triangles in "+wi(Oi()-c,3)+" ms"),a.hasChanged=!0,a.isBatchUpdate=l}if(null!=(r=t.leafMesh)){var f=t,_=r.geometry,m=_.isBatchUpdate;_.isBatchUpdate=!0,_.clear();var $,y=new he(_);$=Ci.INFO;var v=Oi();f.treeGen.buildLeafMesh_84rojv$(y);var g=me.Log,b=e.getKClassFromExpression(_).simpleName;$.level>=g.level.level&&g.printer($,b,"Generated "+(_.numIndices/3|0)+" leaf triangles in "+wi(Oi()-v,3)+" ms"),_.hasChanged=!0,_.isBatchUpdate=m}return s}}(t)),s}}function Jl(t){return function(e){return e.sliderWithValue_xbu91d$("Animation Speed",t.windSpeed,0,10,void 0,void 0,function(t){return function(e){return t.windSpeed=e.value,s}}(t)),e.sliderWithValue_xbu91d$("Animation Strength",t.windStrength,0,10,void 0,void 0,function(t){return function(e){return t.windStrength=e.value,s}}(t)),e.toggleButton_8v9fdr$("Toggle Leafs",!0,function(t){return function(e){var i;return null!=(i=t.leafMesh)&&(i.isVisible=e.isEnabled),s}}(t)),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function Ql(t){N.call(this,"windNode",t),this.inputPos=new P(new Et($.Companion.ZERO)),this.inputAnim=new P(new Tt(0)),this.inputStrength=new P(new Tt(1)),this.outputPos=new P(new Nt("windOutPos"),this)}function tu(t){return t.texCoord.set_dleff0$(t.position.x,t.position.z).scale_mx4ult$(.2),s}function eu(t){return function(e){e.transform.push();var i=t;e.color=m.Companion.LIGHT_GRAY.withAlpha_mx4ult$(.2),e.vertexModFun=tu;var n,r=e.gridProps.defaults();return r.sizeX=2*i,r.sizeY=2*i,r.stepsX=200,r.stepsY=200,r.heightFun=(n=r,function(t,e){var i=7*(t/n.stepsX-.5),r=7*(e/n.stepsY-.5),o=i*i+r*r,s=j.sqrt(o);return.2*j.cos(s)-.2}),e.grid_gtbnl3$(e.gridProps),e.transform.pop(),e.geometry.generateTangents_mx4ult$(),s}}function iu(t,e,i){return function(n){return n.useAlbedoMap_ivxn3r$(Yr().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_diff_2k.jpg"),n.useNormalMap_9sobi5$(Yr().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_Nor_2k.jpg"),n.useRoughnessMap_ivxn3r$(Yr().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_rough_2k.jpg"),n.useOcclusionMap_9sobi5$(Yr().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_AO_2k.jpg"),n.useDisplacementMap_9sobi5$(Yr().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_disp_2k.jpg"),n.useImageBasedLighting_po417x$(t),n.shadowMaps.addAll_brywnq$(e),i.onDispose.add_11rb$(function(t){return function(e,i){var n,r,o,a,l;return null!=(n=t.albedoMap)&&n.dispose(),null!=(r=t.normalMap)&&r.dispose(),null!=(o=t.roughnessMap)&&o.dispose(),null!=(a=t.occlusionMap)&&a.dispose(),null!=(l=t.displacementMap)&&l.dispose(),s}}(n)),s}}function nu(t,e,i,n,r){void 0===e&&(e=new $(0,1,0)),void 0===i&&(i=$.Companion.ZERO),void 0===n&&(n=null),void 0===r&&(r=A.defaultRandomInstance),this.distribution=t,this.baseTop=e,this.baseBot=i,this.primaryLightDir=n,this.random=r,this.radiusOfInfluence=1,this.growDistance=.15,this.killDistance=1.5,this.numberOfAttractionPoints=3e3,this.attractionPoints_0=M(),this.attractionPointsTree_0=Mi(qi()),this.attractionPointTrav_0=new Ri,this.treeNodes_0=M(),this.root_0=new su(this)}function ru(t){if(null!=t.parent){var e=d(t.parent).texV;t.texV=e+t.distance_czzhiu$(d(t.parent))/(2*t.radius*Ke.PI*1.5)}return s}function ou(t){X(t,this),this.nearestNode_3mwxa2$_0=null,this.nearestNodeDist_dewf4c$_0=ji.MAX_VALUE,this.isOpen=!0}function su(t){this.$outer=t,je(this),this.children=M(),this.parent=null,this.branchDepth=0,this.influencingPts=M(),this.isFinished=!1,this.radius=.005,this.texV=0,this.uScale=1,this.vScale=3,this.circumPts=M()}function au(t,e,i,n){void 0===n&&(n=A.defaultRandomInstance),Ii.call(this),this.centerY=t,this.width=e,this.height=i,this.random_0=n,this.borders_0=M(),this.tmpPt1_0=je(),this.tmpPt2_0=Li(),this.e00_0=Li(),this.e01_0=Li(),this.e10_0=Li(),this.e11_0=Li(),this.seedPts_0=M();for(var r=1;r<=8;r++){for(var o=new Di(3),s=0;s<=7;s++){var a=s/7*Ke.PI,l=1<=s&&s<7?this.random_0.randomF_dleff0$(.4,.6):.5,u=j.sin(a)*(this.width-.4)*l+.2,p=j.cos(a)*this.height*l+this.centerY,c=o.ctrlPoints,h=new Xe(u,p);c.add_11rb$(h)}o.ctrlPoints.add_wxm5ur$(0,new Xe(0,this.centerY+.5*this.height)),o.ctrlPoints.add_11rb$(new Xe(0,this.centerY-.5*this.height)),o.addInterpolationEndpoints();for(var d=M(),f=0;f<=20;f++){var _=o.evaluate_f6p79m$(f/20,Li());d.add_11rb$(_)}this.borders_0.add_11rb$(d)}this.seed_0()}function lu(){qr(uu().get_11rb$("demo"))}function uu(){var t,e=pt();if(window.location.search.length>1)for(t=Bi(window.location.search.substring(1),["&"]).iterator();t.hasNext();){var i=t.next(),n=Bi(i,["="]);if(2===n.size){var r=n.get_za3lpa$(0),o=n.get_za3lpa$(1),s=decodeURIComponent(r).toString(),a=decodeURIComponent(o).toString();e.put_xwzc9p$(s,a)}}return e}vl.$metadata$={kind:T,simpleName:"Glas",interfaces:[ut]},Object.defineProperty(Sl.prototype,"roses",{configurable:!0,get:function(){return null==this.roses_wwovcl$_0?o("roses"):this.roses_wwovcl$_0},set:function(t){this.roses_wwovcl$_0=t}}),El.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},El.prototype=Object.create(z.prototype),El.prototype.constructor=El,El.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,Yr().envMapBasePath+"/syferfontein_0d_clear_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;this.local$this$.unaryPlus_uv0sim$(x.Skybox.cube_wgmpek$(t.reflectionMap,1));var e=new l(this.local$this$,0);e.optimizeForDirectionalLight=!0,e.shadowBounds=ie(new $(-30,0,-30),new $(30,60,30));var i=e,n=new G;n.isWithScreenSpaceReflections=!0,n.isWithAmbientOcclusion=!0,n.isWithEmissive=!0,n.maxGlobalLights=1,n.useImageBasedLighting_po417x$(t),n.useShadowMaps_gdx315$(ne(i));var r,o=n,a=new H(this.local$this$,o),u=this.local$this$ProceduralDemo;null!=(r=a.aoPipeline)&&(r.radius=.6);var c=a.contentGroup;c.unaryPlus_uv0sim$(new vl(d(a.pbrPass.colorTexture),t)),c.unaryPlus_uv0sim$(new Al),c.unaryPlus_uv0sim$(new jl),u.roses=new Ol,c.unaryPlus_uv0sim$(u.roses);var h=a;return i.drawNode=h.contentGroup,this.local$this$.unaryPlus_uv0sim$(h.renderOutput),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Sl.prototype.setupMainScene_aemszp$=function(t){var e,i,n=new I(null);return n.unaryPlus_uv0sim$(a(n,void 0,Cl(n,this))),n.lighting.singleLight_q9zcvo$(Nl),t.assetMgr.launch_eln4bt$((e=n,i=this,function(t,n,r){var o=new El(e,i,t,this,n);return r?o:o.doResume(null)})),n},Sl.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,i=t,function(t){return t.section_yfmn31$("Roses",Pl(e,i)),t.section_yfmn31$("Scene",Tl(e)),s}));var e,i},Sl.$metadata$={kind:T,simpleName:"ProceduralDemo",interfaces:[ho]},Ol.prototype.makeRose_za3lpa$=function(t){var e,i=new Ml(t);this.unaryPlus_uv0sim$(Y(void 0,(e=i,function(t){return t.unaryPlus_uv0sim$(e.shaftMesh),t.unaryPlus_uv0sim$(e.shaftLeafMesh),t.unaryPlus_uv0sim$(e.leafMesh),t.unaryPlus_uv0sim$(e.blossomMesh),s})))},Ml.prototype.applyTint_d7aj7k$=function(t){this.applyTint_0(this.shaftMesh.geometry,t),this.applyTint_0(this.shaftLeafMesh.geometry,t),this.applyTint_0(this.leafMesh.geometry,t),this.applyTint_0(this.blossomMesh.geometry,t)},Ml.prototype.applyTint_0=function(t,e){var i;i=t.numVertices;for(var n=0;n<i;n++){t.vertexIt.index=n;var r=t.vertexIt;r.color.r=r.color.r*e.r,r.color.g=r.color.g*e.g,r.color.b=r.color.b*e.b,r.color.a=r.color.a*e.a}},Ml.prototype.makeShaftGeometry_0=function(t){t.transform.push(),t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var e,i=new ce;t.circleShape_k80pjh$(i,.2,8);for(var n=this.rand.randomI_vux9f0$(2,3),r=0;r<6;r++){var o=new at(this.rand.randomF_dleff0$(-1,1),this.rand.randomF_dleff0$(-1,1),0).norm();t.rotate_ad55pp$(this.rand.randomF_dleff0$(0,15),o);var s=this.rand.randomF_dleff0$(2,4),a=r/6;if(t.scale_y2kzbl$(.8,.8,1),t.translate_y2kzbl$(0,0,.1*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.15).mix_y83vuj$(m.Companion.BLACK,.25),t.sample_afatab$(i),t.scale_y2kzbl$(.8,.8,1),t.translate_y2kzbl$(0,0,.2*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.3),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.4*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.55),t.sample_afatab$(i),t.scale_y2kzbl$(1.25,1.25,1),t.translate_y2kzbl$(0,0,.2*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.7).mix_y83vuj$(m.Companion.BLACK,.25),t.sample_afatab$(i),t.scale_y2kzbl$(1.25,1.25,1),t.translate_y2kzbl$(0,0,.1*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.85).mix_y83vuj$(m.Companion.BLACK,.55),t.sample_afatab$(i),r===n)this.shaftLeafTransform.set_d4zu6j$(t.transform);else{e=this.rand.randomI_vux9f0$(0,1);for(var l=0;l<e;l++)this.makeThorn_0(t)}}t.translate_y2kzbl$(0,0,.2),t.transform.push(),t.scale_y2kzbl$(1.5,1.5,1),t.sample_afatab$(i),t.transform.pop(),t.translate_y2kzbl$(0,0,.15),t.transform.push(),t.scale_y2kzbl$(3,3,1),t.sample_afatab$(i),t.transform.pop(),t.fillTop_pvgy1j$(i),this.shaftTopTransform.set_d4zu6j$(t.transform),t.transform.pop()},Ml.prototype.makeThorn_0=function(t){t.transform.push();var e=new at(this.rand.randomF_dleff0$(-1,1),this.rand.randomF_dleff0$(-1,1),0).norm();t.rotate_ad55pp$(90,e);var i=new at(0,0,1).rotate_ad55pp$(-90,e).scale_mx4ult$(.1);t.translate_y2kzbl$(0,0,.1);var n=new ce;t.circleShape_k80pjh$(n,.18,8);for(var r=0;r<=4;r++){var o=r/4,s=1-o,a=j.pow(s,1.5);t.scale_y2kzbl$(a,a,1),t.sample_afatab$(n),t.scale_y2kzbl$(1/a,1/a,1),t.translate_y2kzbl$(0,0,.1*(1-o)),t.translate_czzhiu$(i)}t.transform.pop()},Ml.prototype.makeShaftLeafGeometry_0=function(t){t.transform.mul_d4zu6j$(this.shaftLeafTransform),t.rotate_ad55pp$(this.rand.randomF_dleff0$(0,360),$.Companion.Z_AXIS);for(var e=mi([this.shaftGrad.getColor_y2kzbl$(.7),m.Companion.MD_LIGHT_GREEN_900.toLinear()]),i=0;i<=1;i++){t.transform.push(),t.rotate_ad55pp$(this.rand.randomF_dleff0$(30,45),$.Companion.X_AXIS),t.color=e.getColor_y2kzbl$(0);var n=M(),r=this.rand.randomF_dleff0$(-4,4),o=this.rand.randomF_dleff0$(-4,4);t.transform.push();var s=new ce;t.circleShape_k80pjh$(s,.1,8),t.sample_afatab$(s),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.scale_y2kzbl$(.6,.6,1),t.sample_afatab$(s),t.scale_y2kzbl$(1/.6,1/.6,1),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.scale_y2kzbl$(.4,.4,1),t.sample_afatab$(s),t.scale_y2kzbl$(2.5,2.5,1);for(var a=0;a<=10;a++){t.color=e.getColor_y2kzbl$(a/10),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5)+r,$.Companion.Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5)+o,$.Companion.Z_AXIS);var l=.4*j.pow(.89,i);t.scale_y2kzbl$(l,l,1),t.sample_afatab$(s);var u=(new fe).set_d4zu6j$(t.transform).resetScale();n.add_11rb$(u),t.scale_y2kzbl$(1/l,1/l,1)}t.fillTop_pvgy1j$(s),t.transform.pop();var p=new ce;t.color=m.Companion.MD_LIGHT_GREEN_900.mix_y83vuj$(m.Companion.MD_BROWN_900,.4).toLinear();for(var c=M(),h=-6;h<=6;h++){var d=h/6,f=j.abs(d)-.5,y=j.pow(f,2)-.25,v=new $(-.5*y,.2*h,.15*_(h)*(.7+.3*d*d));c.add_11rb$(v)}var g=new pe(!0);p.shapes.add_11rb$(g);var b,x=g.positions,w=X(Me(c));for(w.x=w.x+.01,x.add_11rb$(w),b=c.iterator();b.hasNext();){var z=b.next(),k=g.positions,S=X(z);S.x=S.x+.01,k.add_11rb$(S)}var C=g.positions,N=X(_e(c));N.x=N.x+.01,C.add_11rb$(N);var E,P=g.positions,T=X(_e(c));for(T.x=T.x-.01,P.add_11rb$(T),E=$e(c).iterator();E.hasNext();){var O=E.next(),A=g.positions,R=X(O);R.x=R.x-.01,A.add_11rb$(R)}var I=g.positions,L=X(Me(c));L.x=L.x-.01,I.add_11rb$(L);var D=ai([.6,.9,1,.95,.85,.7,.5,.35,.22,.12,.05]);t.transform.push();var q,B,F=this.rand.randomF_dleff0$(-60,60),U=0;for(q=n.iterator();q.hasNext();){var V=q.next(),G=ye((U=(B=U)+1|0,B));t.transform.set_d4zu6j$(V),t.rotate_ad55pp$(F,$.Companion.Z_AXIS);for(var H=D.get_za3lpa$(G),W=G<le(D)?D.get_za3lpa$(G+1|0)+.05:0,K=1/H,Y={v:1},Z=0;Z<=4;Z++){var J=Z/4;Y.v=H*(1-J)+W*J,t.translate_y2kzbl$(0,0,.06),t.rotate_ad55pp$(o/5,$.Companion.Z_AXIS),t.transform.push(),t.scale_y2kzbl$(Y.v,Y.v,Y.v),t.sample_afatab$(p),t.transform.pop()}var Q=t.color;t.scale_y2kzbl$(.8*Y.v,Y.v,Y.v),t.translate_y2kzbl$(0,0,.02*K),t.color=Q.mix_y83vuj$(m.Companion.BLACK,.4),t.sample_afatab$(p),t.translate_y2kzbl$(0,0,.01*K),t.sample_afatab$(p),t.scale_y2kzbl$(1.25,1,1),t.color=Q,t.translate_y2kzbl$(0,0,.02*K),t.sample_afatab$(p)}t.transform.pop(),t.transform.pop(),t.rotate_ad55pp$(this.rand.randomF_dleff0$(160,220),$.Companion.Z_AXIS)}},Ml.prototype.withXyScale_0=function(t,e,i){t.scale_y2kzbl$(e,e,1),i(t),t.scale_y2kzbl$(1/e,1/e,1)},Ml.prototype.makeLeafGeometry_0=function(t){t.transform.push(),t.transform.mul_d4zu6j$(this.shaftTopTransform);for(var e=0;e<=5;e++){t.transform.push(),t.scale_y2kzbl$(.8,.8,.8),t.rotate_ad55pp$(60*e,$.Companion.Z_AXIS);for(var i=new ce,n=M(),r=.03,o=0;o<=10;o++){var s=(o/10*72-36)*A.DEG_2_RAD,a=5===o?-.05:0;if(5===o){var l=s-2*A.DEG_2_RAD,u=new St(j.cos(l)-.7+this.rand.randomF_dleff0$(-r,r),j.sin(l)+this.rand.randomF_dleff0$(-r,r));n.add_11rb$(u)}var p=new St(j.cos(s)-.7+this.rand.randomF_dleff0$(-r,r)+a,j.sin(s)+this.rand.randomF_dleff0$(-r,r));if(n.add_11rb$(p),5===o){var c=s+2*A.DEG_2_RAD,h=new St(j.cos(c)-.7+this.rand.randomF_dleff0$(-r,r),j.sin(c)+this.rand.randomF_dleff0$(-r,r));n.add_11rb$(h)}}var d,f,_=new pe(!0);for(i.shapes.add_11rb$(_),d=n.iterator();d.hasNext();){var m=d.next();_.xy_dleff0$(1.05*m.x,1.05*m.y)}for(f=$e(n).iterator();f.hasNext();){var y=f.next();_.xy_dleff0$(y.x,y.y)}t.rotate_ad55pp$(90,$.Companion.Y_AXIS);var v,g,b=Zt([.5,.7,.8,.93,1,.95,.8,.7,.6,.35,.2,.1,0]),x=0;for(v=b.iterator();v.hasNext();){var w=v.next();t.color=this.blossomLeafGrad.getColor_y2kzbl$(ye((x=(g=x)+1|0,g))/le(b)),t.translate_y2kzbl$(0,0,.3),t.rotate_ad55pp$(100/b.size+this.rand.randomF_dleff0$(-8,8),$.Companion.NEG_Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-8,8),$.Companion.X_AXIS),t.transform.push(),t.scale_y2kzbl$(w,w,1),t.sample_afatab$(i),t.transform.pop()}t.transform.pop()}t.transform.pop()},Ml.prototype.makeBlossomGeometry_0=function(t){t.transform.push(),t.transform.mul_d4zu6j$(this.shaftTopTransform);for(var e=0;e<=17;e++){t.transform.push();var i=e/17*.8+.2;t.scale_y2kzbl$(i,i,1.2),t.rotate_ad55pp$(97*e,$.Companion.Z_AXIS);for(var n=new ce,r=M(),o=0;o<=10;o++){var s=(o/10*120-60)*A.DEG_2_RAD,a=new St(j.cos(s)-.9+this.rand.randomF_dleff0$(-.03,.03),j.sin(s)+this.rand.randomF_dleff0$(-.03,.03));r.add_11rb$(a)}var l,u,p=new pe(!0);for(n.shapes.add_11rb$(p),l=r.iterator();l.hasNext();){var c=l.next();p.xy_dleff0$(1.05*c.x,1.05*c.y)}for(u=$e(r).iterator();u.hasNext();){var h=u.next();p.xy_dleff0$(h.x,h.y)}t.rotate_ad55pp$(60,$.Companion.Y_AXIS);var d,f,_=Zt([.5,.9,1,.93,.8,.7,.72,.8,.95,1.05,1,.95,.85,.5]),y=0;for(d=_.iterator();d.hasNext();){var v=d.next(),g=ye((y=(f=y)+1|0,f)),b=v*this.rand.randomF_dleff0$(.95,1.05);t.color=new m(1,.1,.1).toLinear(),t.translate_y2kzbl$(0,0,.2);var x=20*(.5-g/_.size);t.rotate_ad55pp$(x+this.rand.randomF_dleff0$(-5,5),$.Companion.NEG_Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5),$.Companion.X_AXIS),t.transform.push(),t.scale_y2kzbl$(b,b,1),t.translate_y2kzbl$(.7*(1-b),.7*(1-b),0),t.sample_afatab$(n),t.transform.pop()}t.fillTop_pvgy1j$(n),t.transform.pop()}t.transform.pop()},Ml.$metadata$={kind:T,simpleName:"GeneratedRose",interfaces:[]},Ol.$metadata$={kind:T,simpleName:"Roses",interfaces:[ut]},jl.prototype.makeGeometry_0=function(t){t.translate_y2kzbl$(0,-1,0),t.rotate_ad55pp$(90,$.Companion.X_AXIS);var e=new ce,i=new pe(!0);e.shapes.add_11rb$(i);for(var n=0;n<=100;n++){var r=2*Ke.PI*n/100;i.xy_dleff0$(30*j.cos(r),30*j.sin(r)),i.uv_dleff0$(0,0)}for(var o=i,s=0;s<=15;s++){var a=s/15;t.transform.push();var l,u,p=(1-a)*Ke.PI,c=1*j.cos(p),h=a*Ke.PI,d=(30+1*j.sin(h))/30,f=.04*(30+1*a*Ke.PI),_=0;for(l=o.texCoords.iterator();l.hasNext();){var m=l.next(),y=ye((_=(u=_)+1|0,u));m.set_dleff0$(o.positions.get_za3lpa$(y).x,o.positions.get_za3lpa$(y).y).norm().scale_mx4ult$(f)}t.translate_y2kzbl$(0,0,c),t.scale_y2kzbl$(d,d,1),0===s?t.sampleAndFillBottom_afatab$(e):t.sample_afatab$(e),t.transform.pop()}t.fillTop_pvgy1j$(e)},jl.$metadata$={kind:T,simpleName:"Table",interfaces:[Z]},Al.prototype.makeGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.translate_y2kzbl$(-7.5,-2.5,0),t.scale_y2kzbl$(1.8,1.8,1.8),t.translate_y2kzbl$(0,0,.15);var e,i=mi([m.Companion.MD_BROWN,m.Companion.MD_BLUE_300]),n=di(10);e=n.length-1|0;for(var r=0;r<=e;r++)n[r]=i.getColor_y2kzbl$(r/9).mix_y83vuj$(m.Companion.BLACK,.3);var o=mi(n.slice());this.makeGrid_0(t,i),this.makeTube_0(t,o)},Al.prototype.makeGrid_0=function(t,e){var i=new ce,n=new pe(!0);i.shapes.add_11rb$(n),n.xy_dleff0$(.8,1),n.xy_dleff0$(-.8,1),n.xy_dleff0$(-1,.8),n.xy_dleff0$(-1,-.8),n.xy_dleff0$(-.8,-1),n.xy_dleff0$(.8,-1),n.xy_dleff0$(1,-.8),n.xy_dleff0$(1,.8);for(var r=0;r<24;r++)for(var o=2*Ke.PI*r/24,s=0;s<=50;s++){t.transform.push();var a=s/50,l=180*a*(r%2==0?1:-1);t.color=e.getColor_y2kzbl$(a).toLinear(),t.rotate_ad55pp$(l,$.Companion.Z_AXIS);var u=1+(a-.5)*(a-.5)*4;t.translate_y2kzbl$(j.cos(o)*u,j.sin(o)*u,0),t.translate_y2kzbl$(0,0,10*a),t.rotate_ad55pp$(o*A.RAD_2_DEG,$.Companion.Z_AXIS),t.scale_y2kzbl$(.05,.05,1),t.sample_afatab$(i,0!==s),t.transform.pop()}},Al.prototype.makeTube_0=function(t,e){var i=new ce;t.circleShape_k80pjh$(i,2.2,60),t.transform.push();for(var n=0;n<=1;n++){var r=1===n;t.transform.push(),t.color=e.getColor_y2kzbl$(0).toLinear(),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,!1,r),t.scale_y2kzbl$(1/.97,1/.97,1),t.scale_y2kzbl$(.96,.96,1),t.sample_afatab$(i,void 0,r),t.scale_y2kzbl$(1/.96,1/.96,1),t.scale_y2kzbl$(.95,.95,1);for(var o=0;o<=20;o++){t.transform.push();var s=o/20,a=s*Ke.PI,l=1-.6*j.sin(a),u=s*Ke.PI,p=5-5*j.cos(u);t.color=e.getColor_y2kzbl$(s).toLinear(),t.translate_y2kzbl$(0,0,p),t.scale_y2kzbl$(l,l,1),t.sample_afatab$(i,void 0,r),t.transform.pop(),0===o&&t.fillTop_pvgy1j$(i)}t.translate_y2kzbl$(0,0,10),t.scale_y2kzbl$(1/.95,1/.95,1),t.scale_y2kzbl$(.96,.96,1),t.sample_afatab$(i,void 0,r),t.scale_y2kzbl$(1/.96,1/.96,1),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,void 0,r),t.transform.pop(),t.translate_y2kzbl$(0,0,-.15),t.scale_y2kzbl$(1,1,1.03)}t.transform.pop();for(var c=0;c<=1;c++)t.color=e.getColor_y2kzbl$(c).toLinear(),t.transform.push(),t.translate_y2kzbl$(0,0,10.15*c-.15),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,!1),t.scale_y2kzbl$(1/.97,1/.97,1),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.03),t.scale_y2kzbl$(1.02,1.02,1),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.09),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.03),t.scale_y2kzbl$(1/1.02,1/1.02,1),t.sample_afatab$(i),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i),t.transform.pop()},Al.$metadata$={kind:T,simpleName:"Vase",interfaces:[Z]},Object.defineProperty(Rl.prototype,"autoRun",{configurable:!0,get:function(){return null==this.autoRun_z6bycc$_0?o("autoRun"):this.autoRun_z6bycc$_0},set:function(t){this.autoRun_z6bycc$_0=t}}),Object.defineProperty(Rl.prototype,"facesValLbl",{configurable:!0,get:function(){return null==this.facesValLbl_1vvnvx$_0?o("facesValLbl"):this.facesValLbl_1vvnvx$_0},set:function(t){this.facesValLbl_1vvnvx$_0=t}}),Object.defineProperty(Rl.prototype,"vertsValLbl",{configurable:!0,get:function(){return null==this.vertsValLbl_bpoadb$_0?o("vertsValLbl"):this.vertsValLbl_bpoadb$_0},set:function(t){this.vertsValLbl_bpoadb$_0=t}}),Object.defineProperty(Rl.prototype,"timeValLbl",{configurable:!0,get:function(){return null==this.timeValLbl_itlx8a$_0?o("timeValLbl"):this.timeValLbl_itlx8a$_0},set:function(t){this.timeValLbl_itlx8a$_0=t}}),Il.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Il.prototype=Object.create(z.prototype),Il.prototype.constructor=Il,Il.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,Yr().modelBasePath+"/bunny.gltf.gz",1,new $(0,-3,0),this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,Yr().modelBasePath+"/cow.gltf.gz",1,$.Companion.ZERO,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,Yr().modelBasePath+"/teapot.gltf.gz",1,new $(0,-1.5,0),this),this.result_0===w)return w;continue;case 4:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Rl.prototype.lateInit_aemszp$=function(t){var e;t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var r=new Il(e,t,this,i);return n?r:r.doResume(null)})),this.simplify()},Rl.prototype.setupMainScene_aemszp$=function(t){var e=new I(null);ee(e);var i=e.lighting.lights;return i.clear(),i.add_11rb$((new lt).setDirectional_czzhiu$(new $(-1,-1,1)).setColor_y83vuj$(m.Companion.MD_RED.mix_y83vuj$(m.Companion.WHITE,.25).toLinear(),2)),i.add_11rb$((new lt).setDirectional_czzhiu$(new $(1,-1,-1)).setColor_y83vuj$(m.Companion.MD_CYAN.mix_y83vuj$(m.Companion.WHITE,.25).toLinear(),2)),e.unaryPlus_uv0sim$(Y(void 0,Ll(this,t))),e},Rl.prototype.simplify=function(){var t=new yi,e=this.dispModel.geometry,i=e.isBatchUpdate;e.isBatchUpdate=!0,this.dispModel.geometry.clear(),this.dispModel.geometry.addGeometry_r7nl2o$(this.srcModel),this.heMesh=new gi(this.dispModel.geometry,new vi),this.simplifcationGrade<.999&&xi(this.heMesh,bi(this.simplifcationGrade));var n=this.modelWireframe.geometry,r=n.isBatchUpdate;n.isBatchUpdate=!0,this.modelWireframe.clear(),this.heMesh.generateWireframe_6olbr4$(this.modelWireframe,m.Companion.MD_LIME),n.hasChanged=!0,n.isBatchUpdate=r;var o=t.takeSecs();o>.5&&(this.autoRun.isEnabled=!1),this.facesValLbl.text=this.heMesh.faceCount.toString(),this.vertsValLbl.text=this.heMesh.vertCount.toString(),this.timeValLbl.text=wi(o,2)+" s",e.hasChanged=!0,e.isBatchUpdate=i},Dl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Dl.prototype=Object.create(z.prototype),Dl.prototype.constructor=Dl,Dl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i=new c(!0,!1);if(this.state_0=2,this.result_0=h(this.local$$receiver,this.local$name,i,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(null!=(t=this.result_0)){var n,r=f(t.meshes.values).geometry;n=r.numVertices;for(var o=0;o<n;o++)r.vertexIt.index=o,r.vertexIt.position.scale_mx4ult$(this.local$scale).add_czzhiu$(this.local$offset);var s=Si(this.local$name,ue(zi(this.local$name,47)+1|0,ki(this.local$name,".gltf.gz")));this.$this.models.put_xwzc9p$(s,r);var a,l=me.Log,u=Ci.DEBUG,p=e.getKClassFromExpression(this.local$$receiver).simpleName;u.level>=l.level.level&&l.printer(u,p,"loaded: "+this.local$name+", bounds: "+be(null!=(a=this.$this.models.get_11rb$(this.local$name))?a.bounds:null))}return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Rl.prototype.loadModel_0=function(t,e,i,n,r,o){var s=new Dl(this,t,e,i,n,r);return o?s:s.doResume(null)},Rl.prototype.makeCosGrid_0=function(){var t=new he(Q([J.Companion.POSITIONS,J.Companion.NORMALS]));t.color=m.Companion.MD_RED;var e,i=t.gridProps.defaults();return i.sizeX=10,i.sizeY=10,i.stepsX=30,i.stepsY=30,i.heightFun=(e=i,function(t,i){var n=10*(t/e.stepsX-.5),r=10*(i/e.stepsY-.5),o=n*n+r*r,s=j.sqrt(o);return 2*j.cos(s)}),t.grid_gtbnl3$(t.gridProps),t.geometry},Rl.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,function(t){return t.section_yfmn31$("Model",ql(e)),t.section_yfmn31$("Scene",Ul(e)),t.section_yfmn31$("Simplification",Gl(e)),s}));var e},Rl.$metadata$={kind:T,simpleName:"SimplificationDemo",interfaces:[ho]},Wl.prototype.setupMainScene_aemszp$=function(t){var e,i=new I(null);i.lighting.singleLight_q9zcvo$((e=this,function(t){return t.setDirectional_czzhiu$(e.lightDirection).setColor_y83vuj$(m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),5),s}));var n=new Ni(i,0);n.maxRange=50;var r=ai([n]),o=new $i([ae(0,m.Companion.fromHex_61zpoe$("B2D7FF").mix_y83vuj$(m.Companion.BLACK,.75)),ae(.35,m.Companion.fromHex_61zpoe$("B2D7FF").mix_y83vuj$(m.Companion.BLACK,.75)),ae(.45,m.Companion.fromHex_61zpoe$("B2D7FF").mix_y83vuj$(m.Companion.BLACK,.25)),ae(.9,m.Companion.fromHex_61zpoe$("3295FF").mix_y83vuj$(m.Companion.BLACK,.45)),ae(1,m.Companion.fromHex_61zpoe$("3295FF").mix_y83vuj$(m.Companion.BLACK,.5))]),l=p.EnvironmentHelper.gradientColorEnvironment_hfkvyz$(i,o,t);return i.unaryPlus_uv0sim$(this.makeTreeGroundGrid_0(10,r,l)),i.unaryPlus_uv0sim$(x.Skybox.cube_wgmpek$(l.reflectionMap)),this.trunkMesh=b(void 0,!0,Kl(this,l,r,t)),this.leafMesh=b(void 0,void 0,Xl(this,l,r)),i.unaryPlus_uv0sim$(d(this.trunkMesh)),i.unaryPlus_uv0sim$(d(this.leafMesh)),i.unaryPlus_uv0sim$(a(i,void 0,Yl(i,this,t))),i},Wl.prototype.setupMenu_aemszp$=function(t){return nr(t,(e=this,function(t){return t.section_yfmn31$("Generator Settings",Zl(e)),t.section_yfmn31$("Scene",Jl(e)),s}));var e},Ql.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inputPos,this.inputAnim,this.inputStrength])},Ql.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float r = clamp(sqrt("+this.inputPos.ref3f()+".x * "+this.inputPos.ref3f()+".x + "+this.inputPos.ref3f()+".z * "+this.inputPos.ref3f()+".z) - 0.25, 0.0, 2.0) + \n                        clamp("+this.inputPos.ref3f()+".z - 1.0, 0.0, 1.0);\n            float windTx = cos("+this.inputPos.ref3f()+".x * 10.0 + "+this.inputPos.ref3f()+".y * 2.0 + "+this.inputAnim.ref1f()+") * r * 0.01 * "+this.inputStrength.ref1f()+";\n            float windTz = sin("+this.inputPos.ref3f()+".z * 10.0 - "+this.inputPos.ref3f()+".y * 2.0 + "+this.inputAnim.ref1f()+" * 1.1f) * r * 0.01 * "+this.inputStrength.ref1f()+";\n            "+this.outputPos.declare()+" = "+this.inputPos.ref3f()+" + vec3(windTx, 0.0, windTz);\n        ")},Ql.$metadata$={kind:T,simpleName:"WindNode",interfaces:[N]},Wl.prototype.treePbrModel_0=function(t){var i,n,r,o,s=new C("treePbrModel()"),a={v:null},u={v:null},p={v:null},c={v:null},h={v:null},f={v:null},_=M(),m=new q(s);f.v=m.mvpNode();var $=m.vec3TransformNode_vid4wo$(m.attrNormals().output,f.v.outModelMat,0);if(u.v=m.stageInterfaceNode_iikjwn$("ifNormals",$.outVec3),i=t.requiresTexCoords()?m.stageInterfaceNode_iikjwn$("ifTexCoords",m.attrTexCoords().output):null,h.v=i,t.isDisplacementMapped){var v=m.textureNode_61zpoe$("tDisplacement"),g=m.displacementMapNode_7fvjbk$(v,d(h.v).input,m.attrPositions().output,m.attrNormals().output);g.inStrength=m.pushConstantNode1f_61zpoe$("uDispStrength").output,n=g.outPosition}else n=m.attrPositions().output;var b=n,x=m.addNode_u9w9by$(new Ql(s.vertexStageGraph));x.inputPos=b,x.inputAnim=m.pushConstantNode1f_61zpoe$("windAnim").output,x.inputStrength=m.pushConstantNode1f_61zpoe$("windStrength").output;var w=x.outputPos,z=m.vec3TransformNode_vid4wo$(w,f.v.outModelMat,1).outVec3;if(c.v=m.stageInterfaceNode_iikjwn$("ifFragPos",z),r=t.albedoSource===y.VERTEX_ALBEDO?m.stageInterfaceNode_iikjwn$("ifColors",m.attrColors().output):null,a.v=r,t.isNormalMapped){var k=m.attrTangents().output,S=m.vec3TransformNode_vid4wo$(m.splitNode_500t7j$(k,"xyz").output,f.v.outModelMat,0),N=m.combineXyzWNode_ze33is$(S.outVec3,m.splitNode_500t7j$(k,"w").output);o=m.stageInterfaceNode_iikjwn$("ifTangents",N.output)}else o=null;p.v=o;var E,T,O=m.vec4TransformNode_9krp9t$(z,f.v.outViewMat).outVec4,j=0;for(E=t.shadowMaps.iterator();E.hasNext();){var A=E.next(),R=ye((j=(T=j)+1|0,T));if(e.isType(A,Ni)){var I=m.cascadedShadowMapNode_zw58l$(A,"depthMap_"+R,O,z);_.add_11rb$(I)}else if(e.isType(A,l)){var L=m.simpleShadowMapNode_7yd351$(A,"depthMap_"+R,z);_.add_11rb$(L)}}m.positionOutput=m.vec4TransformNode_9krp9t$(w,f.v.outMvpMat).outVec4;var D,F,U,V,G=new B(s);switch(t.albedoSource.name){case"VERTEX_ALBEDO":D=d(a.v).output;break;case"STATIC_ALBEDO":D=G.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var H=G.textureSamplerNode_ce41yx$(G.textureNode_61zpoe$("tAlbedo"),d(h.v).output);D=G.gammaNode_ze33is$(H.outColor).outColor;break;case"CUBE_MAP_ALBEDO":throw Re("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:D=e.noWhenBranchMatched()}var W={v:D};null!=(U=e.isType(F=t.alphaMode,Pi)?F:null)&&G.discardAlpha_ze33is$(G.splitNode_500t7j$(W.v,"a").output,G.constFloat_mx4ult$(U.cutOff));var K=G.combineNode_m7a9qd$(Ae.VEC_4F);K.inX=G.splitNode_500t7j$(W.v,"r").output,K.inY=G.splitNode_500t7j$(W.v,"g").output,K.inZ=G.splitNode_500t7j$(W.v,"b").output,K.inW=G.constFloat_mx4ult$(1),W.v=K.output;var X,Y,Z,J,Q=f.v.addToStage_llmhyc$(s.fragmentStageGraph),tt=G.multiLightNode_za3lpa$(t.maxLights);for(X=_.iterator();X.hasNext();){var et=X.next();tt.inShaodwFacs[et.lightIndex]=et.outShadowFac}if(t.isImageBasedLighting){var it=G.cubeMapNode_61zpoe$("irradianceMap");J=G.cubeMapSamplerNode_2z3a2t$(it,u.v.output,!1),Y=G.cubeMapNode_61zpoe$("reflectionMap"),Z=G.textureNode_61zpoe$("brdfLut")}else J=null,Y=null,Z=null;var nt,rt,ot=G.pbrMaterialNode_heq9k0$(tt,Y,Z),st=J;if(ot.lightBacksides=t.lightBacksides,ot.inFragPos=c.v.output,ot.inViewDir=G.viewDirNode_ze33is$(Q.outCamPos,c.v.output).output,ot.inIrradiance=null!=(nt=null!=st?st.outColor:null)?nt:G.pushConstantNodeColor_61zpoe$("uAmbient").output,ot.inAlbedo=W.v,t.isNormalMapped&&null!=p.v){var at=G.normalMapNode_j8913i$(G.textureNode_61zpoe$("tNormal"),d(h.v).output,u.v.output,p.v.output);at.inStrength=new P(new Tt(t.normalStrength)),rt=at.outNormal}else rt=u.v.output;ot.inNormal=rt;var lt=pt();if(t.isRoughnessMapped){var ut=G.textureSamplerNode_ce41yx$(G.textureNode_61zpoe$(t.roughnessTexName),d(h.v).output).outColor,ct=t.roughnessTexName;lt.put_xwzc9p$(ct,ut),ot.inRoughness=G.splitNode_500t7j$(ut,t.roughnessChannel).output}else ot.inRoughness=G.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var ht,dt=t.metallicTexName,ft=lt.get_11rb$(dt);if(null==ft){var _t=G.textureSamplerNode_ce41yx$(G.textureNode_61zpoe$(t.metallicTexName),d(h.v).output).outColor;lt.put_xwzc9p$(dt,_t),ht=_t}else ht=ft;var mt=ht,$t=t.metallicTexName;lt.put_xwzc9p$($t,mt),ot.inMetallic=G.splitNode_500t7j$(mt,t.metallicChannel).output}else ot.inMetallic=G.pushConstantNode1f_61zpoe$("uMetallic").output;if(t.isOcclusionMapped){var vt,gt=t.occlusionTexName,bt=lt.get_11rb$(gt);if(null==bt){var xt=G.textureSamplerNode_ce41yx$(G.textureNode_61zpoe$(t.occlusionTexName),d(h.v).output).outColor;lt.put_xwzc9p$(gt,xt),vt=xt}else vt=bt;var wt=vt,zt=t.occlusionTexName;lt.put_xwzc9p$(zt,wt),ot.inAmbientOccl=G.splitNode_500t7j$(wt,t.occlusionChannel).output}var kt=ot;return V=t.alphaMode,e.isType(V,yt)?G.colorOutput_a3v4si$(G.hdrToLdrNode_r20yfm$(kt.outColor).outColor):e.isType(V,Pi)||e.isType(V,Ti)?G.colorOutput_a3v4si$(G.hdrToLdrNode_r20yfm$(kt.outColor).outColor,void 0,G.constFloat_mx4ult$(1)):e.noWhenBranchMatched(),s},Wl.prototype.makeTreeGroundGrid_0=function(t,e,i){var n,r,o;return b(void 0,!0,(n=t/2|0,r=i,o=e,function(t){return t.isCastingShadow=!1,t.generate_v2sixm$(eu(n)),t.shader=v(iu(r,o,t)),s}))},Wl.$metadata$={kind:T,simpleName:"TreeDemo",interfaces:[ho]},Object.defineProperty(nu.prototype,"actualKillDistance",{configurable:!0,get:function(){return this.growDistance*this.killDistance}}),nu.prototype.seedTree=function(){this.populateAttractionPoints_0(),this.treeNodes_0.clear(),this.root_0=new su(this),this.root_0.set_czzhiu$(this.baseBot);var t=this.treeNodes_0,e=this.root_0;t.add_11rb$(e);for(var i=this.baseTop.subtract_2gj7b4$(this.baseBot,je()).norm().scale_mx4ult$(this.growDistance),n=this.root_0;n.distance_czzhiu$(this.baseTop)>this.growDistance;){var r=new su(this);r.set_czzhiu$(n).add_czzhiu$(i),n.addChild_15eqn9$(r),this.treeNodes_0.add_11rb$(r),n=r}},nu.prototype.generate_za3lpa$=function(t){void 0===t&&(t=1e3);var i,n={v:0};i=Ci.INFO;var r,o=Oi();for(this.seedTree();r=n.v,n.v=r+1|0,r<t&&this.growSingleStep(););this.finishTree();var s=me.Log,a=e.getKClassFromExpression(this).simpleName;i.level>=s.level.level&&s.printer(i,a,"Generation done, took "+n.v+" iterations, "+this.treeNodes_0.size+" nodes in "+wi(Oi()-o,3)+" ms")},nu.prototype.growSingleStep=function(){var t,e,i,n,r,o,s,a;for(a=this.attractionPoints_0.iterator();a.hasNext();)a.next().nearestNode=null;for(t=this.treeNodes_0.iterator();t.hasNext();){var l=t.next();if(l.influencingPts.clear(),!l.isFinished)for(this.attractionPointTrav_0.setup_2qa7tb$(l,this.radiusOfInfluence).traverse_7efza$(this.attractionPointsTree_0),e=this.attractionPointTrav_0.result.iterator();e.hasNext();){var u=e.next();u.isOpen&&u.checkNearest_15eqn9$(l)}}for(i=this.attractionPoints_0.iterator();i.hasNext();){var p=i.next();p.isOpen&&null!=(r=null!=(n=p.nearestNode)?n.influencingPts:null)&&r.add_11rb$(p)}var c=M(),h=!1;for(o=this.treeNodes_0.iterator();o.hasNext();){var d=o.next();if(d.influencingPts.isEmpty())d.isFinished=!0;else{var f=je();for(s=d.influencingPts.iterator();s.hasNext();){var _=s.next();f.plusAssign_czzhiu$(_.subtract_2gj7b4$(d,je()).norm())}f.norm().scale_mx4ult$(this.growDistance);var m=new su(this);if(m.set_czzhiu$(d).add_czzhiu$(f),!d.containsChild_15eqn9$(m)){var $;for(d.addChild_15eqn9$(m),c.add_11rb$(m),this.attractionPointTrav_0.setup_2qa7tb$(m,this.actualKillDistance).traverse_7efza$(this.attractionPointsTree_0),$=this.attractionPointTrav_0.result.iterator();$.hasNext();)$.next().isOpen=!1;h=!0}}}return this.treeNodes_0.addAll_brywnq$(c),h},nu.prototype.finishTree=function(){var t;this.root_0.forEachTopDown_ttqnr0$((t=this,function(e){return null!=e.parent&&(e.plusAssign_czzhiu$(X(d(e.parent)).subtract_czzhiu$(e).norm().scale_mx4ult$(.5*t.growDistance)),e.x=e.x+t.random.randomF_dleff0$(-.01,.01),e.y=e.y+t.random.randomF_dleff0$(-.01,.01),e.z=e.z+t.random.randomF_dleff0$(-.01,.01)),e.computeTrunkRadiusAndDepth(),e.computeCircumPoints(),s})),this.root_0.forEachBottomUp_ttqnr0$(ru)},nu.prototype.buildTrunkMesh_84rojv$=function(t){var e;for(e=this.treeNodes_0.iterator();e.hasNext();)e.next().buildTrunkMesh_84rojv$(t);t.geometry.removeDegeneratedTriangles()},nu.prototype.buildLeafMesh_84rojv$=function(t){var e;for(e=this.treeNodes_0.iterator();e.hasNext();)e.next().buildLeafMesh_84rojv$(t);var i,n=t.geometry;i=n.numVertices;for(var r=0;r<i;r++){n.vertexIt.index=r;var o=n.vertexIt;null!=this.primaryLightDir?o.normal.dot_czzhiu$(this.primaryLightDir)>0&&o.normal.scale_mx4ult$(-1):o.normal.y<0&&o.normal.scale_mx4ult$(-1)}t.geometry.removeDegeneratedTriangles()},nu.prototype.populateAttractionPoints_0=function(){var t;for(this.attractionPoints_0.clear(),t=this.distribution.nextPoints_za3lpa$(this.numberOfAttractionPoints).iterator();t.hasNext();){var e=t.next(),i=this.attractionPoints_0,n=new ou(e);i.add_11rb$(n)}this.attractionPointsTree_0=Mi(this.attractionPoints_0)},Object.defineProperty(ou.prototype,"nearestNode",{configurable:!0,get:function(){return this.nearestNode_3mwxa2$_0},set:function(t){this.nearestNode_3mwxa2$_0=t,null==t&&(this.nearestNodeDist=ji.MAX_VALUE)}}),Object.defineProperty(ou.prototype,"nearestNodeDist",{configurable:!0,get:function(){return this.nearestNodeDist_dewf4c$_0},set:function(t){this.nearestNodeDist_dewf4c$_0=t}}),ou.prototype.checkNearest_15eqn9$=function(t){var e=this.distance_czzhiu$(t);e<this.nearestNodeDist&&(this.nearestNode=t,this.nearestNodeDist=e)},ou.$metadata$={kind:T,simpleName:"AttractionPoint",interfaces:[at]},su.prototype.addChild_15eqn9$=function(t){this.children.add_11rb$(t),t.parent=this},su.prototype.containsChild_15eqn9$=function(t){var e;for(e=this.children.iterator();e.hasNext();)if(e.next().isFuzzyEqual_2qa7tb$(t))return!0;return!1},su.prototype.forEachBottomUp_ttqnr0$=function(t){var e;for(t(this),e=this.children.iterator();e.hasNext();)e.next().forEachBottomUp_ttqnr0$(t)},su.prototype.forEachTopDown_ttqnr0$=function(t){var e;for(e=this.children.iterator();e.hasNext();)e.next().forEachTopDown_ttqnr0$(t);t(this)},su.prototype.computeTrunkRadiusAndDepth=function(){var t,i,n;if(this.children.isEmpty())this.radius=.01,this.branchDepth=0;else{var r,o=0;for(r=this.children.iterator();r.hasNext();){var s=r.next().radius;o+=j.pow(s,2.25)}if(this.radius=j.pow(o,1/2.25),1===this.children.size)n=this.children.get_za3lpa$(0).branchDepth;else{var a,l=this.children;t:do{var u=l.iterator();if(!u.hasNext()){a=null;break t}var p=u.next();if(!u.hasNext()){a=p;break t}var c=p.branchDepth;do{var h=u.next(),d=h.branchDepth;e.compareTo(c,d)<0&&(p=h,c=d)}while(u.hasNext());a=p}while(0);n=(null!=(i=null!=(t=a)?t.branchDepth:null)?i:0)+1|0}this.branchDepth=n}null==this.parent&&(this.radius*=3,this.children.get_za3lpa$(0).radius=1.5*this.children.get_za3lpa$(0).radius,this.children.get_za3lpa$(0).computeCircumPoints())},su.prototype.computeCircumPoints=function(){this.circumPts.clear();var t=null!=this.parent?this.subtract_2gj7b4$(d(this.parent),je()).norm():this.children.get_za3lpa$(0).subtract_2gj7b4$(this,je()).norm(),e=X(t).scale_mx4ult$(-t.times_czzhiu$($.Companion.Z_AXIS)).add_czzhiu$($.Companion.Z_AXIS).norm().scale_mx4ult$(this.radius),i=e.z,n=e.x;e.rotate_ad55pp$(-j.atan2(i,n),t);for(var r=0;r<8;r++){var o=X(e).add_czzhiu$(this);this.circumPts.add_11rb$(Ai(o)),e.rotate_ad55pp$(45,t)}},su.prototype.buildTrunkMesh_84rojv$=function(t){var e=(this.radius>.05?2:1)*this.uScale,i=M();if(null!=this.parent)if(this.children.isEmpty()){var n,r,o,s=t.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);r=s.vertexSizeI;for(var l=1;l<=r;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(o=s.numVertices,s.numVertices=o+1|0,o);var u=s.vertexIt;u.position.set_czzhiu$(this),this.subtract_2gj7b4$(d(this.parent),u.normal).norm(),u.texCoord.set_dleff0$(0,this.texV*this.vScale),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0;for(var p=s.numVertices-1|0,c=0;c<=8;c++){var h,f,_,m=t.geometry;m.checkBufferSizes_za3lpa$(),h=m.vertexSizeF;for(var $=1;$<=h;$++)m.dataF.plusAssign_mx4ult$(0);f=m.vertexSizeI;for(var y=1;y<=f;y++)m.dataI.plusAssign_za3lpa$(0);m.vertexIt.index=(_=m.numVertices,m.numVertices=_+1|0,_);var v=m.vertexIt;v.position.set_czzhiu$(d(this.parent).circumPts.get_za3lpa$(c%8)),d(this.parent).circumPts.get_za3lpa$(c%8).subtract_2gj7b4$(d(this.parent),v.normal).norm(),v.texCoord.set_dleff0$(c/8*e,d(this.parent).texV*this.vScale),m.bounds.add_czzhiu$(m.vertexIt.position),m.hasChanged=!0;var g=m.numVertices-1|0;i.add_11rb$(g)}for(var b=0;b<8;b++)t.geometry.addTriIndices_qt1dr2$(p,i.get_za3lpa$(b),i.get_za3lpa$(b+1|0))}else{for(var x=0;x<=8;x++){var w,z,k,S=t.geometry;S.checkBufferSizes_za3lpa$(),w=S.vertexSizeF;for(var C=1;C<=w;C++)S.dataF.plusAssign_mx4ult$(0);z=S.vertexSizeI;for(var N=1;N<=z;N++)S.dataI.plusAssign_za3lpa$(0);S.vertexIt.index=(k=S.numVertices,S.numVertices=k+1|0,k);var E=S.vertexIt;E.position.set_czzhiu$(this.circumPts.get_za3lpa$(x%8)),this.circumPts.get_za3lpa$(x%8).subtract_2gj7b4$(this,E.normal).norm(),E.texCoord.set_dleff0$(x/8*e,this.texV*this.vScale),S.bounds.add_czzhiu$(S.vertexIt.position),S.hasChanged=!0;var P=S.numVertices-1|0;i.add_11rb$(P);var T,O,j,A=t.geometry;A.checkBufferSizes_za3lpa$(),T=A.vertexSizeF;for(var R=1;R<=T;R++)A.dataF.plusAssign_mx4ult$(0);O=A.vertexSizeI;for(var I=1;I<=O;I++)A.dataI.plusAssign_za3lpa$(0);A.vertexIt.index=(j=A.numVertices,A.numVertices=j+1|0,j);var L=A.vertexIt;L.position.set_czzhiu$(d(this.parent).circumPts.get_za3lpa$(x%8)),d(this.parent).circumPts.get_za3lpa$(x%8).subtract_2gj7b4$(d(this.parent),L.normal).norm(),L.texCoord.set_dleff0$(x/8*e,d(this.parent).texV*this.vScale),A.bounds.add_czzhiu$(A.vertexIt.position),A.hasChanged=!0;var D=A.numVertices-1|0;i.add_11rb$(D)}for(var q=0;q<8;q++)t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(2*q|0),i.get_za3lpa$(1+(2*q|0)|0),i.get_za3lpa$(2+(2*q|0)|0)),t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(1+(2*q|0)|0),i.get_za3lpa$(3+(2*q|0)|0),i.get_za3lpa$(2+(2*q|0)|0))}},su.prototype.buildLeafMesh_84rojv$=function(t){if(this.branchDepth<=1&&null!=this.parent){var e=this.subtract_2gj7b4$(d(this.parent),je()),i=e.length();e.norm();for(var n=1;n<=20;n++){this.$outer,t.transform.push();var r,o=this.$outer,s=X(this.circumPts.get_za3lpa$(0)).subtract_czzhiu$(this).norm().scale_mx4ult$(this.radius+o.random.randomF_dleff0$(0,.15));s.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),e);var a=X(e).scale_mx4ult$(o.random.randomF_dleff0$(0,i)).add_czzhiu$(s).add_czzhiu$(this);t.translate_czzhiu$(a);var l=0;do{e.dot_czzhiu$($.Companion.X_AXIS)<e.dot_czzhiu$($.Companion.Z_AXIS)?t.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),$.Companion.X_AXIS):t.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),$.Companion.Z_AXIS),t.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),e);var u=null!=o.primaryLightDir;if(u){var p=t.transform.transform_w1lst9$(X($.Companion.NEG_Z_AXIS),0).dot_czzhiu$(o.primaryLightDir);u=j.abs(p)<.1}}while(u&&(l=(r=l)+1|0,r<3));var c=t.vertex_n440gp$(new $(0,-.022,0),$.Companion.NEG_Z_AXIS,new St(0,0)),h=t.vertex_n440gp$(new $(0,.022,0),$.Companion.NEG_Z_AXIS,new St(0,1)),f=t.vertex_n440gp$(new $(.1,.022,0),$.Companion.NEG_Z_AXIS,new St(1,1)),_=t.vertex_n440gp$(new $(.1,-.022,0),$.Companion.NEG_Z_AXIS,new St(1,0));t.geometry.addIndices_pmhfmb$(new Int32Array([c,h,f,c,f,_])),t.transform.pop()}}},su.$metadata$={kind:T,simpleName:"TreeNode",interfaces:[at]},nu.$metadata$={kind:T,simpleName:"TreeGenerator",interfaces:[]},au.prototype.seed_0=function(){this.seedPts_0.clear();for(var t=1;t<=10;t++){var e=this.seedPts_0,i=this.nextPointInBounds_0();e.add_11rb$(i)}},au.prototype.drawBorders_nl2my4$=function(t){var e;e=this.borders_0;for(var i=0;i!==e.size;++i){var n,r=i/this.borders_0.size*2*Ke.PI,o=this.borders_0.get_za3lpa$(i);n=o.size;for(var s=1;s<n;s++){var a=new $(-j.cos(r)*o.get_za3lpa$(s-1|0).x,o.get_za3lpa$(s-1|0).y,-j.sin(r)*o.get_za3lpa$(s-1|0).x),l=new $(-j.cos(r)*o.get_za3lpa$(s).x,o.get_za3lpa$(s).y,-j.sin(r)*o.get_za3lpa$(s).x);t.addLine_b8opkg$(a,m.Companion.ORANGE,l,m.Companion.ORANGE)}}},au.prototype.nextPoints_za3lpa$=function(t){return this.seed_0(),Ii.prototype.nextPoints_za3lpa$.call(this,t)},au.prototype.nextPoint=function(){var t={v:null};t:for(;;){t.v=this.nextPointInBounds_0();var i,n=this.seedPts_0;e:do{var r=n.iterator();if(!r.hasNext()){i=null;break e}var o=r.next();if(!r.hasNext()){i=o;break e}var s=o.sqrDistance_czzhiu$(t.v);do{var a=r.next(),l=a.sqrDistance_czzhiu$(t.v);e.compareTo(s,l)>0&&(o=a,s=l)}while(r.hasNext());i=o}while(0);if(d(i).distance_czzhiu$(t.v)<this.random_0.randomF())break t}return t.v},au.prototype.nextPointInBounds_0=function(){for(var t=.5*this.width,e=.5*this.height;;){this.tmpPt1_0.set_y2kzbl$(this.random_0.randomF_dleff0$(-t,t),this.centerY+this.random_0.randomF_dleff0$(-e,e),this.random_0.randomF_dleff0$(-t,t));var i=this.tmpPt1_0.x*this.tmpPt1_0.x+this.tmpPt1_0.z*this.tmpPt1_0.z,n=j.sqrt(i),r=this.tmpPt1_0.y,o=this.tmpPt1_0.z,s=this.tmpPt1_0.x,a=j.atan2(o,s)/(2*Ke.PI)+.5,l=(a<0?0:a>1?1:a)*this.borders_0.size,u=st(l),p=this.borders_0.size-1|0,c=j.min(u,p),h=(c+1|0)%this.borders_0.size,d=l-c,f=1-d;if(this.nearestEdge_0(n,r,this.borders_0.get_za3lpa$(c),this.e00_0,this.e01_0),this.nearestEdge_0(n,r,this.borders_0.get_za3lpa$(h),this.e10_0,this.e11_0),this.e00_0.scale_mx4ult$(f).add_czzhjp$(this.e10_0.scale_mx4ult$(d)),this.e01_0.scale_mx4ult$(f).add_czzhjp$(this.e11_0.scale_mx4ult$(d)),(n-this.e00_0.x)*(this.e01_0.y-this.e00_0.y)-(r-this.e00_0.y)*(this.e01_0.x-this.e00_0.x)>0)return Ai(this.tmpPt1_0)}},au.prototype.nearestEdge_0=function(t,e,i,n,r){var o,s=ji.MAX_VALUE,a=0;o=i.size-1|0;for(var l=0;l<o;l++){var u=this.edgeDist_0(t,e,n.set_czzhjp$(i.get_za3lpa$(l)),r.set_czzhjp$(i.get_za3lpa$(l+1|0)));u<s&&(s=u,a=l)}n.set_czzhjp$(i.get_za3lpa$(a)),r.set_czzhjp$(i.get_za3lpa$(a+1|0))},au.prototype.edgeDist_0=function(t,e,i,n){var r;n.subtract_q2ruao$(i,this.tmpPt2_0);var o=(t*this.tmpPt2_0.x+e*this.tmpPt2_0.y-i.times_czzhjp$(this.tmpPt2_0))/this.tmpPt2_0.times_czzhjp$(this.tmpPt2_0);if(o<0){var s=i.x-t,a=i.y-e,l=s*s+a*a;r=j.sqrt(l)}else if(o>1){var u=n.x-t,p=n.y-e,c=u*u+p*p;r=j.sqrt(c)}else{this.tmpPt2_0.scale_mx4ult$(o).add_czzhjp$(i);var h=this.tmpPt2_0.x-t,d=this.tmpPt2_0.y-e,f=h*h+d*d;r=j.sqrt(f)}return r},au.$metadata$={kind:T,simpleName:"TreeTopPointDistribution",interfaces:[Ii]},r["kool-kool-core"]=i,Object.defineProperty(Fi,"Companion",{get:tn});var pu=t.de||(t.de={}),cu=pu.fabmax||(pu.fabmax={}),hu=cu.kool||(cu.kool={}),du=hu.demo||(hu.demo={});du.AoDemo=Fi,Object.defineProperty(en,"Companion",{get:gn});var fu=du.atmosphere||(du.atmosphere={});fu.AtmosphereDemo=en,fu.AtmosphereSceneCompositing=bn,Object.defineProperty(On,"Companion",{get:An}),On.ViewToWorldPosNode=Ln,On.RaySphereIntersectionNode=qn,On.AtmosphereNode=Bn,fu.AtmosphericScatteringShader=On,fu.EarthCamTransform=Un,Object.defineProperty(Vn,"Companion",{get:Wn}),fu.EarthShader=Vn,Object.defineProperty(Zn,"Companion",{get:tr}),fu.OpticalDepthLutPass=Zn,du.controlUi_egq1ks$=nr,du.ControlUiBuilder=rr,Object.defineProperty(mr,"Companion",{get:vr}),du.UiImage=mr,Object.defineProperty(br,"Companion",{get:Dr}),du.DeferredDemo=br,du.demo_tisexc$=qr,Object.defineProperty(Br,"Companion",{get:Yr}),du.Demo=Br,du.Cycler_init_i5x0yv$=co,du.Cycler=po,du.DemoScene=ho,du.GltfDemo=fo,du.HelloWorldDemo=No,du.HelloGltfDemo=Eo,du.helloWorldScene=jo,du.helloGltfScene_aemszp$=qo,du.InstanceDemo=Bo,Object.defineProperty(Zo,"Companion",{get:hs}),du.MultiLightDemo=Zo;var _u=du.pbr||(du.pbr={});_u.ColorGridContent=ds,$s.PbrContent=Ps,$s.SphereProto=Ts,Object.defineProperty($s,"Companion",{get:Ds}),_u.PbrDemo=$s,qs.MaterialMaps=Ws,Object.defineProperty(qs,"Companion",{get:ul}),_u.PbrMaterialContent=qs,Object.defineProperty(pl,"Companion",{get:yl}),_u.RoughnesMetalGridContent=pl,Object.defineProperty(vl,"Companion",{get:kl});var mu=du.procedural||(du.procedural={});return mu.Glas=vl,mu.ProceduralDemo=Sl,mu.Roses=Ol,mu.Table=jl,mu.Vase=Al,du.SimplificationDemo=Rl,du.TreeDemo=Wl,du.TreeGenerator=nu,du.TreeTopPointDistribution=au,t.main=lu,t.getParams=uu,lu(),t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1),i(4),i(13)],void 0===(o="function"==typeof(n=function(t,e,n,r){"use strict";var o=t.$$importsForInline$$||(t.$$importsForInline$$={}),s=e.kotlin.Unit,a=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,l=e.kotlin.coroutines.CoroutineImpl,u=e.kotlin.text.startsWith_7epoxm$,p=n.kotlinx.coroutines.CoroutineScope,c=e.throwCCE,h=n.kotlinx.coroutines.launch_s496o7$,d=e.kotlin.text.indexOf_8eortd$,f=e.kotlin.ranges.until_dqglrj$,_=e.kotlin.text.substring_fc3b62$,m=n.kotlinx.coroutines.CompletableDeferred_xptg6w$,$=e.Kind.CLASS,y=e.Kind.OBJECT,v=n.kotlinx.coroutines.Job_5dx9e$,g=n.kotlinx.coroutines.channels.Channel_ww73n8$,b=e.kotlin.collections.mutableListOf_i5x0yv$,x=e.ensureNotNull,w=e.kotlin.collections.ArrayList_init_ww73n8$,z=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,k=n.kotlinx.coroutines.selects.SelectBuilderImpl,S=Error,C=e.Long.ZERO,N=e.toChar,E=e.toBoxedChar,P=e.kotlin.Enum,T=e.throwISE,O=e.unboxChar,M=e.kotlin.collections.ArrayList_init_287e2$,j=e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,A=Math,R=Array,I=e.kotlin.collections.get_indices_gzk92b$,L=e.kotlin.ranges.reversed_zf1xzc$,D=e.kotlin.Exception,q=e.kotlin.collections.first_2p1efm$,B=e.kotlin.collections.last_2p1efm$,F=e.numberToInt,U=e.kotlin.math,V=e.kotlin.IllegalArgumentException_init_pdl1vj$,G=e.kotlin.io.print_s8jyv4$,H=e.kotlin.io.println,W=Object,K=e.defineInlineFunction,X=e.wrapFunction,Y=(e.kotlin.collections.get_indices_m7z4lg$,e.kotlin.collections.get_indices_tmsbgo$),Z=e.kotlin.collections.shuffled_7wnvza$,J=e.kotlin.collections.checkIndexOverflow_za3lpa$,Q=e.Long.fromInt(698769069),tt=e.kotlin.math.abs_za3lpa$,et=e.kotlin.math.abs_s8cxhz$,it=e.Long.MAX_VALUE,nt=e.kotlin.js.internal.FloatCompanionObject,rt=e.hashCode,ot=e.kotlin.math.round_14dthe$,st=e.Kind.INTERFACE,at=e.kotlin.collections.Iterable,lt=e.kotlin.collections.removeAll_qafx1e$,ut=e.kotlin.Pair,pt=e.throwUPAE,ct=e.kotlin.collections.LinkedHashSet_init_287e2$,ht=e.kotlin.NoSuchElementException_init,dt=e.kotlin.collections.Iterator,ft=e.kotlin.to_ujzrz7$,_t=e.kotlin.NoSuchElementException,mt=e.kotlin.collections.sortWith_nqfjgj$,$t=e.kotlin.Comparator,yt=e.kotlin.js.internal.DoubleCompanionObject,vt=e.kotlin.collections.emptySet_287e2$,gt=e.kotlin.IllegalStateException_init_pdl1vj$,bt=e.kotlin.collections.get_lastIndex_55thoc$,xt=e.kotlin.collections.addAll_ipc267$,wt=e.kotlin.collections.filterNotNull_m3lr2h$,zt=e.equals,kt=e.kotlin.ULong,St=e.kotlin.collections.addAll_ye1y7v$,Ct=e.toString,Nt=e.kotlin.collections.emptyList_287e2$,Et=e.kotlin.collections.mutableMapOf_qfcya0$,Pt=e.kotlin.RuntimeException_init_pdl1vj$,Tt=e.Long.ONE,Ot=e.kotlin.text.StringBuilder_init,Mt=e.kotlin.collections.joinToString_fmv235$,jt=e.kotlin.io.println_s8jyv4$,At=e.kotlin.collections.listOf_i5x0yv$,Rt=e.kotlin.text.substringBefore_8cymmc$,It=e.kotlin.collections.mutableSetOf_i5x0yv$,Lt=e.kotlin.math.roundToInt_yrwdxr$,Dt=e.toByte,qt=e.kotlin.collections.listOf_mh5how$,Bt=e.kotlin.ranges.IntRange,Ft=e.kotlin.text.toBoolean_5cw0du$,Ut=e.kotlin.text.toInt_pdl1vz$,Vt=e.kotlin.text.toDouble_pdl1vz$,Gt=e.kotlin.collections.joinTo_gcc71v$,Ht=e.kotlin.collections.MutableMap,Wt=e.kotlin.text.lastIndexOf_8eortd$,Kt=e.getCallableRef,Xt=e.kotlin.collections.maxOrNull_lvsncp$,Yt=e.kotlin.collections.distinct_7wnvza$,Zt=e.kotlin.collections.toList_7wnvza$,Jt=e.kotlin.collections.joinToString_cph1y3$,Qt=e.kotlin.random.Random_za3lpa$,te=e.kotlin.collections.shuffled_4173s5$,ee=e.Long.fromInt(1431655765),ie=new e.Long(-1431655766,0),ne=e.Long.fromInt(858993459),re=new e.Long(-858993460,0),oe=e.Long.fromInt(252645135),se=new e.Long(-252645136,0),ae=e.Long.fromInt(16711935),le=new e.Long(-16711936,0),ue=e.kotlin.text.toInt_6ic1pp$,pe=e.kotlin.NumberFormatException,ce=e.kotlin.collections.get_lastIndex_m7z4lg$,he=e.kotlin.collections.first_us0mfu$,de=e.kotlin.collections.last_us0mfu$,fe=e.kotlin.collections.sortWith_iwcb0m$,_e=e.kotlin.text.trimIndent_pdl1vz$,me=e.kotlin.text.get_indices_gw00vp$,$e=e.kotlin.collections.Map,ye=r.kotlinx.serialization.internal.NullableSerializer,ve=e.kotlin.collections.setOf_i5x0yv$,ge=r.kotlinx.serialization.internal.PluginGeneratedSerialDescriptor,be=r.kotlinx.serialization.UnknownFieldException,xe=r.kotlinx.serialization.internal,we=r.kotlinx.serialization.internal.GeneratedSerializer,ze=r.kotlinx.serialization.MissingFieldException,ke=r.kotlinx.serialization.internal.ArrayListSerializer,Se=e.kotlin.IndexOutOfBoundsException,Ce=e.kotlin.text.contains_sgbm27$,Ne=e.kotlin.text.endsWith_7epoxm$,Ee=e.kotlin.text.decodeToString_964n91$,Pe=e.getKClass,Te=e.createKType,Oe=e.kotlin.collections.contains_2ws7j4$,Me=r.kotlinx.serialization.json.Json_x26noe$,je=r.kotlinx.serialization.serializer_ca95z9$,Ae=r.kotlinx.serialization.KSerializer,Re=r.kotlinx.serialization.internal.LinkedHashMapSerializer,Ie=e.kotlin.isNaN_81szk$,Le=e.kotlin.collections.toList_us0mfu$,De=(e.kotlin.collections.MutableList,e.kotlin.ranges.step_xsgg7u$),qe=e.kotlin.collections.toMutableList_4c7yge$,Be=e.kotlin.text.iterator_gw00vp$,Fe=e.kotlin.collections.toIntArray_fx3nzu$,Ue=new e.Long(-1,0),Ve=e.kotlin.collections.copyToArray,Ge=e.kotlin.collections.Collection,He=e.kotlin.NotImplementedError,We=(e.kotlin.collections.MutableIterator,e.kotlin.collections.MutableCollection,e.kotlin.collections.removeAll_uhyeqt$),Ke=e.kotlin.collections.MutableMap.MutableEntry,Xe=e.kotlin.math.roundToLong_yrwdxr$,Ye=e.kotlin.IllegalStateException_init,Ze=n.kotlinx.coroutines.async_pda6u4$,Je=e.kotlin.text.lines_gw00vp$,Qe=e.kotlin.text.StringBuilder;function ti(t){return function(i){var n=new k(i);try{t(n)}catch(t){if(!e.isType(t,S))throw t;n.handleBuilderException_tcv7n7$(t)}return n.getResult()}}function ei(t){ci(),this.assetsBaseDir=t,this.job=v(),this.awaitedAssetsChannel_nphlkp$_0=g(),this.assetRefChannel_acu3lu$_0=g(2147483647),this.loadedAssetChannel_obd8me$_0=g();for(var e=w(8),i=0;i<8;i++){var n=e.add_11rb$;this.loadWorker_lf86lv$_0(this.assetRefChannel_acu3lu$_0,this.loadedAssetChannel_obd8me$_0),n.call(e,s)}this.workers_dv6i5$_0=e,this.loader_lxnfnl$_0=this.launch_eln4bt$(mi)}function ii(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetRefs=t,this.local$closure$loadedAssets=e,this.local$tmp$=void 0,this.local$$receiver=i}function ni(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$ref=e}function ri(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$block=t,this.local$this$AssetManager=e}function oi(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e}function si(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e}function ai(t,e,i,n,r,o,s,a){l.call(this,a),this.exceptionState_0=1,this.$this=t,this.local$ftd=void 0,this.local$bkd=void 0,this.local$ltd=void 0,this.local$rtd=void 0,this.local$upd=void 0,this.local$ft=e,this.local$bk=i,this.local$lt=n,this.local$rt=r,this.local$up=o,this.local$dn=s}function li(t,e,i){this.$outer=t,void 0===i&&(i=m(this.$outer.job)),this.ref=e,this.awaiting=i}function ui(){pi=this,this.NUM_LOAD_WORKERS=8}yi.prototype=Object.create($i.prototype),yi.prototype.constructor=yi,vi.prototype=Object.create($i.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create($i.prototype),gi.prototype.constructor=gi,bi.prototype=Object.create($i.prototype),bi.prototype.constructor=bi,wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,zi.prototype=Object.create(xi.prototype),zi.prototype.constructor=zi,Ti.prototype=Object.create(P.prototype),Ti.prototype.constructor=Ti,Mi.prototype=Object.create(Ti.prototype),Mi.prototype.constructor=Mi,Ri.prototype=Object.create(Ti.prototype),Ri.prototype.constructor=Ri,Di.prototype=Object.create(Ti.prototype),Di.prototype.constructor=Di,Fi.prototype=Object.create(Ti.prototype),Fi.prototype.constructor=Fi,Gi.prototype=Object.create(Ti.prototype),Gi.prototype.constructor=Gi,Ki.prototype=Object.create(Ti.prototype),Ki.prototype.constructor=Ki,Pi.prototype=Object.create(Ei.prototype),Pi.prototype.constructor=Pi,pn.prototype=Object.create(D.prototype),pn.prototype.constructor=pn,dn.prototype=Object.create(hn.prototype),dn.prototype.constructor=dn,kn.prototype=Object.create(bn.prototype),kn.prototype.constructor=kn,Mn.prototype=Object.create(En.prototype),Mn.prototype.constructor=Mn,ur.prototype=Object.create(rr.prototype),ur.prototype.constructor=ur,$r.prototype=Object.create(hr.prototype),$r.prototype.constructor=$r,zr.prototype=Object.create(vr.prototype),zr.prototype.constructor=zr,Or.prototype=Object.create(Sr.prototype),Or.prototype.constructor=Or,Br.prototype=Object.create(Rr.prototype),Br.prototype.constructor=Br,Kr.prototype=Object.create(Ur.prototype),Kr.prototype.constructor=Kr,io.prototype=Object.create(Yr.prototype),io.prototype.constructor=io,uo.prototype=Object.create(ro.prototype),uo.prototype.constructor=uo,No.prototype=Object.create(co.prototype),No.prototype.constructor=No,jo.prototype=Object.create(Sr.prototype),jo.prototype.constructor=jo,Fd.prototype=Object.create(ef.prototype),Fd.prototype.constructor=Fd,To.prototype=Object.create(Fd.prototype),To.prototype.constructor=To,Yk.prototype=Object.create(Xk.prototype),Yk.prototype.constructor=Yk,Jk.prototype=Object.create(Yk.prototype),Jk.prototype.constructor=Jk,Ko.prototype=Object.create(fS.prototype),Ko.prototype.constructor=Ko,Zo.prototype=Object.create(P.prototype),Zo.prototype.constructor=Zo,ta.prototype=Object.create(Cl.prototype),ta.prototype.constructor=ta,ua.prototype=Object.create(ta.prototype),ua.prototype.constructor=ua,fs.prototype=Object.create(ua.prototype),fs.prototype.constructor=fs,vs.prototype=Object.create(qu.prototype),vs.prototype.constructor=vs,ys.prototype=Object.create(fs.prototype),ys.prototype.constructor=ys,qs.prototype=Object.create(Ls.prototype),qs.prototype.constructor=qs,Ds.prototype=Object.create(Is.prototype),Ds.prototype.constructor=Ds,Fs.prototype=Object.create(Ls.prototype),Fs.prototype.constructor=Fs,Bs.prototype=Object.create(Is.prototype),Bs.prototype.constructor=Bs,Vs.prototype=Object.create(Ls.prototype),Vs.prototype.constructor=Vs,Us.prototype=Object.create(Is.prototype),Us.prototype.constructor=Us,Gs.prototype=Object.create(P.prototype),Gs.prototype.constructor=Gs,oa.prototype=Object.create(P.prototype),oa.prototype.constructor=oa,ha.prototype=Object.create(P.prototype),ha.prototype.constructor=ha,pa.prototype=Object.create(ta.prototype),pa.prototype.constructor=pa,il.prototype=Object.create(P.prototype),il.prototype.constructor=il,ll.prototype=Object.create(P.prototype),ll.prototype.constructor=ll,vl.prototype=Object.create(P.prototype),vl.prototype.constructor=vl,El.prototype=Object.create(Cl.prototype),El.prototype.constructor=El,Ol.prototype=Object.create(P.prototype),Ol.prototype.constructor=Ol,Rl.prototype=Object.create(qu.prototype),Rl.prototype.constructor=Rl,Il.prototype=Object.create(qu.prototype),Il.prototype.constructor=Il,Ll.prototype=Object.create(qu.prototype),Ll.prototype.constructor=Ll,Dl.prototype=Object.create(qu.prototype),Dl.prototype.constructor=Dl,ql.prototype=Object.create(qu.prototype),ql.prototype.constructor=ql,Bl.prototype=Object.create(qu.prototype),Bl.prototype.constructor=Bl,Fl.prototype=Object.create(qu.prototype),Fl.prototype.constructor=Fl,Ul.prototype=Object.create(qu.prototype),Ul.prototype.constructor=Ul,Vl.prototype=Object.create(Ul.prototype),Vl.prototype.constructor=Vl,Hl.prototype=Object.create(qu.prototype),Hl.prototype.constructor=Hl,Kl.prototype=Object.create(Ul.prototype),Kl.prototype.constructor=Kl,Xl.prototype=Object.create(Ul.prototype),Xl.prototype.constructor=Xl,Yl.prototype=Object.create(Ul.prototype),Yl.prototype.constructor=Yl,Zl.prototype=Object.create(qu.prototype),Zl.prototype.constructor=Zl,Jl.prototype=Object.create(qu.prototype),Jl.prototype.constructor=Jl,Ql.prototype=Object.create(qu.prototype),Ql.prototype.constructor=Ql,tu.prototype=Object.create(qu.prototype),tu.prototype.constructor=tu,eu.prototype=Object.create(qu.prototype),eu.prototype.constructor=eu,iu.prototype=Object.create(eu.prototype),iu.prototype.constructor=iu,nu.prototype=Object.create(eu.prototype),nu.prototype.constructor=nu,ru.prototype=Object.create(eu.prototype),ru.prototype.constructor=ru,ou.prototype=Object.create(eu.prototype),ou.prototype.constructor=ou,su.prototype=Object.create(eu.prototype),su.prototype.constructor=su,au.prototype=Object.create(qu.prototype),au.prototype.constructor=au,lu.prototype=Object.create(qu.prototype),lu.prototype.constructor=lu,uu.prototype=Object.create(qu.prototype),uu.prototype.constructor=uu,pu.prototype=Object.create(qu.prototype),pu.prototype.constructor=pu,cu.prototype=Object.create(qu.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(qu.prototype),hu.prototype.constructor=hu,fu.prototype=Object.create(du.prototype),fu.prototype.constructor=fu,_u.prototype=Object.create(du.prototype),_u.prototype.constructor=_u,mu.prototype=Object.create(du.prototype),mu.prototype.constructor=mu,$u.prototype=Object.create(du.prototype),$u.prototype.constructor=$u,yu.prototype=Object.create(du.prototype),yu.prototype.constructor=yu,vu.prototype=Object.create(du.prototype),vu.prototype.constructor=vu,gu.prototype=Object.create(du.prototype),gu.prototype.constructor=gu,bu.prototype=Object.create(du.prototype),bu.prototype.constructor=bu,xu.prototype=Object.create(du.prototype),xu.prototype.constructor=xu,wu.prototype=Object.create(fu.prototype),wu.prototype.constructor=wu,zu.prototype=Object.create(_u.prototype),zu.prototype.constructor=zu,ku.prototype=Object.create(mu.prototype),ku.prototype.constructor=ku,Su.prototype=Object.create($u.prototype),Su.prototype.constructor=Su,Cu.prototype=Object.create(yu.prototype),Cu.prototype.constructor=Cu,Nu.prototype=Object.create(vu.prototype),Nu.prototype.constructor=Nu,Eu.prototype=Object.create(gu.prototype),Eu.prototype.constructor=Eu,Pu.prototype=Object.create(bu.prototype),Pu.prototype.constructor=Pu,ju.prototype=Object.create(Mu.prototype),ju.prototype.constructor=ju,Au.prototype=Object.create(Mu.prototype),Au.prototype.constructor=Au,Lu.prototype=Object.create(Iu.prototype),Lu.prototype.constructor=Lu,Du.prototype=Object.create(Iu.prototype),Du.prototype.constructor=Du,Uu.prototype=Object.create(Fu.prototype),Uu.prototype.constructor=Uu,Vu.prototype=Object.create(qu.prototype),Vu.prototype.constructor=Vu,Hu.prototype=Object.create(qu.prototype),Hu.prototype.constructor=Hu,Ku.prototype=Object.create(qu.prototype),Ku.prototype.constructor=Ku,Wu.prototype=Object.create(Fu.prototype),Wu.prototype.constructor=Wu,Xu.prototype=Object.create(qu.prototype),Xu.prototype.constructor=Xu,Zu.prototype=Object.create(qu.prototype),Zu.prototype.constructor=Zu,Qu.prototype=Object.create(qu.prototype),Qu.prototype.constructor=Qu,tp.prototype=Object.create(qu.prototype),tp.prototype.constructor=tp,ep.prototype=Object.create(qu.prototype),ep.prototype.constructor=ep,op.prototype=Object.create(qu.prototype),op.prototype.constructor=op,np.prototype=Object.create(qu.prototype),np.prototype.constructor=np,lp.prototype=Object.create(qu.prototype),lp.prototype.constructor=lp,sp.prototype=Object.create(qu.prototype),sp.prototype.constructor=sp,up.prototype=Object.create(qu.prototype),up.prototype.constructor=up,pp.prototype=Object.create(qu.prototype),pp.prototype.constructor=pp,cp.prototype=Object.create(qu.prototype),cp.prototype.constructor=cp,hp.prototype=Object.create(qu.prototype),hp.prototype.constructor=hp,dp.prototype=Object.create(hp.prototype),dp.prototype.constructor=dp,fp.prototype=Object.create(hp.prototype),fp.prototype.constructor=fp,_p.prototype=Object.create(hp.prototype),_p.prototype.constructor=_p,mp.prototype=Object.create(hp.prototype),mp.prototype.constructor=mp,$p.prototype=Object.create(hp.prototype),$p.prototype.constructor=$p,yp.prototype=Object.create(hp.prototype),yp.prototype.constructor=yp,vp.prototype=Object.create(hp.prototype),vp.prototype.constructor=vp,gp.prototype=Object.create(hp.prototype),gp.prototype.constructor=gp,bp.prototype=Object.create(hp.prototype),bp.prototype.constructor=bp,xp.prototype=Object.create(qu.prototype),xp.prototype.constructor=xp,wp.prototype=Object.create(qu.prototype),wp.prototype.constructor=wp,zp.prototype=Object.create(qu.prototype),zp.prototype.constructor=zp,kp.prototype=Object.create(qu.prototype),kp.prototype.constructor=kp,Sp.prototype=Object.create(qu.prototype),Sp.prototype.constructor=Sp,Cp.prototype=Object.create(qu.prototype),Cp.prototype.constructor=Cp,Np.prototype=Object.create(qu.prototype),Np.prototype.constructor=Np,Ep.prototype=Object.create(qu.prototype),Ep.prototype.constructor=Ep,Pp.prototype=Object.create(qu.prototype),Pp.prototype.constructor=Pp,Tp.prototype=Object.create(qu.prototype),Tp.prototype.constructor=Tp,Op.prototype=Object.create(qu.prototype),Op.prototype.constructor=Op,Mp.prototype=Object.create(qu.prototype),Mp.prototype.constructor=Mp,jp.prototype=Object.create(qu.prototype),jp.prototype.constructor=jp,Rp.prototype=Object.create(qu.prototype),Rp.prototype.constructor=Rp,Ip.prototype=Object.create(qu.prototype),Ip.prototype.constructor=Ip,Lp.prototype=Object.create(qu.prototype),Lp.prototype.constructor=Lp,Dp.prototype=Object.create(qu.prototype),Dp.prototype.constructor=Dp,qp.prototype=Object.create(qu.prototype),qp.prototype.constructor=qp,Bp.prototype=Object.create(qu.prototype),Bp.prototype.constructor=Bp,Fp.prototype=Object.create(P.prototype),Fp.prototype.constructor=Fp,Yp.prototype=Object.create(P.prototype),Yp.prototype.constructor=Yp,nc.prototype=Object.create(ic.prototype),nc.prototype.constructor=nc,rc.prototype=Object.create(ic.prototype),rc.prototype.constructor=rc,oc.prototype=Object.create(ic.prototype),oc.prototype.constructor=oc,sc.prototype=Object.create(Pl.prototype),sc.prototype.constructor=sc,ac.prototype=Object.create(sc.prototype),ac.prototype.constructor=ac,lc.prototype=Object.create(sc.prototype),lc.prototype.constructor=lc,uc.prototype=Object.create(sc.prototype),uc.prototype.constructor=uc,pc.prototype=Object.create(sc.prototype),pc.prototype.constructor=pc,_c.prototype=Object.create(sc.prototype),_c.prototype.constructor=_c,vc.prototype=Object.create(sc.prototype),vc.prototype.constructor=vc,zc.prototype=Object.create(sc.prototype),zc.prototype.constructor=zc,Uc.prototype=Object.create(P.prototype),Uc.prototype.constructor=Uc,th.prototype=Object.create(P.prototype),th.prototype.constructor=th,ch.prototype=Object.create(Qc.prototype),ch.prototype.constructor=ch,bh.prototype=Object.create(Qc.prototype),bh.prototype.constructor=bh,wh.prototype=Object.create(P.prototype),wh.prototype.constructor=wh,Ch.prototype=Object.create(P.prototype),Ch.prototype.constructor=Ch,Mh.prototype=Object.create(Oh.prototype),Mh.prototype.constructor=Mh,Fh.prototype=Object.create(Oh.prototype),Fh.prototype.constructor=Fh,Vh.prototype=Object.create(Uh.prototype),Vh.prototype.constructor=Vh,Hh.prototype=Object.create(Uh.prototype),Hh.prototype.constructor=Hh,Wh.prototype=Object.create(Uh.prototype),Wh.prototype.constructor=Wh,Kh.prototype=Object.create(Uh.prototype),Kh.prototype.constructor=Kh,Xh.prototype=Object.create(Uh.prototype),Xh.prototype.constructor=Xh,Yh.prototype=Object.create(Uh.prototype),Yh.prototype.constructor=Yh,Zh.prototype=Object.create(Uh.prototype),Zh.prototype.constructor=Zh,Jh.prototype=Object.create(Uh.prototype),Jh.prototype.constructor=Jh,Qh.prototype=Object.create(Uh.prototype),Qh.prototype.constructor=Qh,td.prototype=Object.create(Uh.prototype),td.prototype.constructor=td,ed.prototype=Object.create(Uh.prototype),ed.prototype.constructor=ed,id.prototype=Object.create(Uh.prototype),id.prototype.constructor=id,nd.prototype=Object.create(Uh.prototype),nd.prototype.constructor=nd,od.prototype=Object.create(Uh.prototype),od.prototype.constructor=od,sd.prototype=Object.create(Uh.prototype),sd.prototype.constructor=sd,ad.prototype=Object.create(Uh.prototype),ad.prototype.constructor=ad,hd.prototype=Object.create(P.prototype),hd.prototype.constructor=hd,vd.prototype=Object.create(P.prototype),vd.prototype.constructor=vd,$d.prototype=Object.create(ef.prototype),$d.prototype.constructor=$d,zd.prototype=Object.create($d.prototype),zd.prototype.constructor=zd,kd.prototype=Object.create($d.prototype),kd.prototype.constructor=kd,Sd.prototype=Object.create(kd.prototype),Sd.prototype.constructor=Sd,Od.prototype=Object.create(ef.prototype),Od.prototype.constructor=Od,Ad.prototype=Object.create(P.prototype),Ad.prototype.constructor=Ad,qd.prototype=Object.create(Fd.prototype),qd.prototype.constructor=qd,tf.prototype=Object.create(Od.prototype),tf.prototype.constructor=tf,df.prototype=Object.create(P.prototype),df.prototype.constructor=df,yf.prototype=Object.create(P.prototype),yf.prototype.constructor=yf,hf.prototype=Object.create(Od.prototype),hf.prototype.constructor=hf,wf.prototype=Object.create(xf.prototype),wf.prototype.constructor=wf,zf.prototype=Object.create(Od.prototype),zf.prototype.constructor=zf,Pf.prototype=Object.create(sc.prototype),Pf.prototype.constructor=Pf,Af.prototype=Object.create(sc.prototype),Af.prototype.constructor=Af,qf.prototype=Object.create(qu.prototype),qf.prototype.constructor=qf,H_.prototype=Object.create(Od.prototype),H_.prototype.constructor=H_,r_.prototype=Object.create(H_.prototype),r_.prototype.constructor=r_,Yf.prototype=Object.create(r_.prototype),Yf.prototype.constructor=Yf,Zf.prototype=Object.create(o_.prototype),Zf.prototype.constructor=Zf,e_.prototype=Object.create(t_.prototype),e_.prototype.constructor=e_,G_.prototype=Object.create(Zf.prototype),G_.prototype.constructor=G_,n_.prototype=Object.create(G_.prototype),n_.prototype.constructor=n_,Y_.prototype=Object.create(H_.prototype),Y_.prototype.constructor=Y_,i_.prototype=Object.create(Y_.prototype),i_.prototype.constructor=i_,a_.prototype=Object.create(P.prototype),a_.prototype.constructor=a_,S_.prototype=Object.create(k_.prototype),S_.prototype.constructor=S_,E_.prototype=Object.create(P.prototype),E_.prototype.constructor=E_,j_.prototype=Object.create(H_.prototype),j_.prototype.constructor=j_,R_.prototype=Object.create(H_.prototype),R_.prototype.constructor=R_,L_.prototype=Object.create(r_.prototype),L_.prototype.constructor=L_,D_.prototype=Object.create(o_.prototype),D_.prototype.constructor=D_,V_.prototype=Object.create(Yf.prototype),V_.prototype.constructor=V_,tm.prototype=Object.create(ef.prototype),tm.prototype.constructor=tm,em.prototype=Object.create(sc.prototype),em.prototype.constructor=em,$m.prototype=Object.create(om.prototype),$m.prototype.constructor=$m,bm.prototype=Object.create(gm.prototype),bm.prototype.constructor=bm,xm.prototype=Object.create(gm.prototype),xm.prototype.constructor=xm,wm.prototype=Object.create(gm.prototype),wm.prototype.constructor=wm,zm.prototype=Object.create(gm.prototype),zm.prototype.constructor=zm,Em.prototype=Object.create(P.prototype),Em.prototype.constructor=Em,Tm.prototype=Object.create(Em.prototype),Tm.prototype.constructor=Tm,jm.prototype=Object.create(Em.prototype),jm.prototype.constructor=jm,Im.prototype=Object.create(Em.prototype),Im.prototype.constructor=Im,qm.prototype=Object.create(Nm.prototype),qm.prototype.constructor=qm,Bm.prototype=Object.create(qm.prototype),Bm.prototype.constructor=Bm,Fm.prototype=Object.create(Nm.prototype),Fm.prototype.constructor=Fm,Um.prototype=Object.create(Fm.prototype),Um.prototype.constructor=Um,Vm.prototype=Object.create(Nm.prototype),Vm.prototype.constructor=Vm,Gm.prototype=Object.create(Vm.prototype),Gm.prototype.constructor=Gm,Hm.prototype=Object.create(Nm.prototype),Hm.prototype.constructor=Hm,Wm.prototype=Object.create(Hm.prototype),Wm.prototype.constructor=Wm,Jm.prototype=Object.create(Km.prototype),Jm.prototype.constructor=Jm,Qm.prototype=Object.create(Km.prototype),Qm.prototype.constructor=Qm,e$.prototype=Object.create(t$.prototype),e$.prototype.constructor=e$,l$.prototype=Object.create(qu.prototype),l$.prototype.constructor=l$,p$.prototype=Object.create(qu.prototype),p$.prototype.constructor=p$,c$.prototype=Object.create(qu.prototype),c$.prototype.constructor=c$,s$.prototype=Object.create(ua.prototype),s$.prototype.constructor=s$,b$.prototype=Object.create(qu.prototype),b$.prototype.constructor=b$,g$.prototype=Object.create(ua.prototype),g$.prototype.constructor=g$,C$.prototype=Object.create(S$.prototype),C$.prototype.constructor=C$,N$.prototype=Object.create(S$.prototype),N$.prototype.constructor=N$,B$.prototype=Object.create(Yr.prototype),B$.prototype.constructor=B$,G$.prototype=Object.create(B$.prototype),G$.prototype.constructor=G$,ay.prototype=Object.create(P.prototype),ay.prototype.constructor=ay,my.prototype=Object.create(H_.prototype),my.prototype.constructor=my,$y.prototype=Object.create(sc.prototype),$y.prototype.constructor=$y,xy.prototype=Object.create(ua.prototype),xy.prototype.constructor=xy,Cy.prototype=Object.create(sc.prototype),Cy.prototype.constructor=Cy,Ay.prototype=Object.create(qu.prototype),Ay.prototype.constructor=Ay,Ry.prototype=Object.create(qu.prototype),Ry.prototype.constructor=Ry,Ty.prototype=Object.create(sc.prototype),Ty.prototype.constructor=Ty,Fy.prototype=Object.create(qu.prototype),Fy.prototype.constructor=Fy,Uy.prototype=Object.create(qu.prototype),Uy.prototype.constructor=Uy,Wy.prototype=Object.create(ua.prototype),Wy.prototype.constructor=Wy,Yy.prototype=Object.create(sc.prototype),Yy.prototype.constructor=Yy,iv.prototype=Object.create(qu.prototype),iv.prototype.constructor=iv,ev.prototype=Object.create(ua.prototype),ev.prototype.constructor=ev,sv.prototype=Object.create(sc.prototype),sv.prototype.constructor=sv,lv.prototype=Object.create(qu.prototype),lv.prototype.constructor=lv,ov.prototype=Object.create(ua.prototype),ov.prototype.constructor=ov,dv.prototype=Object.create(qu.prototype),dv.prototype.constructor=dv,$v.prototype=Object.create(Qc.prototype),$v.prototype.constructor=$v,rg.prototype=Object.create(ng.prototype),rg.prototype.constructor=rg,og.prototype=Object.create(ng.prototype),og.prototype.constructor=og,sg.prototype=Object.create(ng.prototype),sg.prototype.constructor=sg,ag.prototype=Object.create(ng.prototype),ag.prototype.constructor=ag,lg.prototype=Object.create(ng.prototype),lg.prototype.constructor=lg,ug.prototype=Object.create(ng.prototype),ug.prototype.constructor=ug,pg.prototype=Object.create(ng.prototype),pg.prototype.constructor=pg,lw.prototype=Object.create(qu.prototype),lw.prototype.constructor=lw,aw.prototype=Object.create(ua.prototype),aw.prototype.constructor=aw,mw.prototype=Object.create(qu.prototype),mw.prototype.constructor=mw,_w.prototype=Object.create(pa.prototype),_w.prototype.constructor=_w,vw.prototype=Object.create(qu.prototype),vw.prototype.constructor=vw,gw.prototype=Object.create(qu.prototype),gw.prototype.constructor=gw,bw.prototype=Object.create(qu.prototype),bw.prototype.constructor=bw,ww.prototype=Object.create(qu.prototype),ww.prototype.constructor=ww,xw.prototype=Object.create(pa.prototype),xw.prototype.constructor=xw,Tw.prototype=Object.create(qu.prototype),Tw.prototype.constructor=Tw,Pw.prototype=Object.create(pa.prototype),Pw.prototype.constructor=Pw,Lw.prototype=Object.create(ua.prototype),Lw.prototype.constructor=Lw,Zw.prototype=Object.create(P.prototype),Zw.prototype.constructor=Zw,iz.prototype=Object.create(P.prototype),iz.prototype.constructor=iz,dz.prototype=Object.create(ef.prototype),dz.prototype.constructor=dz,vz.prototype=Object.create(P.prototype),vz.prototype.constructor=vz,Zz.prototype=Object.create(Hz.prototype),Zz.prototype.constructor=Zz,rk.prototype=Object.create(jk.prototype),rk.prototype.constructor=rk,ok.prototype=Object.create(Sr.prototype),ok.prototype.constructor=ok,sk.prototype=Object.create(Xk.prototype),sk.prototype.constructor=sk,ak.prototype=Object.create(Xk.prototype),ak.prototype.constructor=ak,dk.prototype=Object.create(hk.prototype),dk.prototype.constructor=dk,fk.prototype=Object.create(hk.prototype),fk.prototype.constructor=fk,mk.prototype=Object.create(fs.prototype),mk.prototype.constructor=mk,bk.prototype=Object.create(Vk.prototype),bk.prototype.constructor=bk,gk.prototype=Object.create(Uk.prototype),gk.prototype.constructor=gk,Qk.prototype=Object.create(Xk.prototype),Qk.prototype.constructor=Qk,eS.prototype=Object.create(Qk.prototype),eS.prototype.constructor=eS,nS.prototype=Object.create(Qk.prototype),nS.prototype.constructor=nS,xS.prototype=Object.create(ur.prototype),xS.prototype.constructor=xS,wS.prototype=Object.create(Or.prototype),wS.prototype.constructor=wS,zS.prototype=Object.create(io.prototype),zS.prototype.constructor=zS,kS.prototype=Object.create(G$.prototype),kS.prototype.constructor=kS,CS.prototype=Object.create(zr.prototype),CS.prototype.constructor=CS,NS.prototype=Object.create(Kr.prototype),NS.prototype.constructor=NS,ES.prototype=Object.create(No.prototype),ES.prototype.constructor=ES,gS.prototype=Object.create(Or.prototype),gS.prototype.constructor=gS,GS.prototype=Object.create(Oh.prototype),GS.prototype.constructor=GS,HS.prototype=Object.create(ei.prototype),HS.prototype.constructor=HS,hC.prototype=Object.create(on.prototype),hC.prototype.constructor=hC,rN.prototype=Object.create(QC.prototype),rN.prototype.constructor=rN,oN.prototype=Object.create(QC.prototype),oN.prototype.constructor=oN,lN.prototype=Object.create(Tu.prototype),lN.prototype.constructor=lN,$N.prototype=Object.create(mN.prototype),$N.prototype.constructor=$N,vN.prototype=Object.create(mN.prototype),vN.prototype.constructor=vN,gN.prototype=Object.create(mN.prototype),gN.prototype.constructor=gN,bN.prototype=Object.create(mN.prototype),bN.prototype.constructor=bN,xN.prototype=Object.create(mN.prototype),xN.prototype.constructor=xN,Object.defineProperty(ei.prototype,"coroutineContext",{configurable:!0,get:function(){return this.job}}),ii.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ii.prototype=Object.create(l.prototype),ii.prototype.constructor=ii,ii.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;this.local$tmp$=this.local$closure$assetRefs.iterator(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$tmp$.hasNext(this),this.result_0===a)return a;continue;case 3:if(this.result_0){this.state_0=4;continue}this.state_0=7;continue;case 4:var e=this.local$tmp$.next();if(this.state_0=5,this.result_0=this.local$$receiver.loadAsset_lpb790$_0(e,this),this.result_0===a)return a;continue;case 5:if(t=this.result_0,this.state_0=6,this.result_0=this.local$closure$loadedAssets.send_11rb$(t,this),this.result_0===a)return a;continue;case 6:this.state_0=2;continue;case 7:return s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadWorker_lf86lv$_0=function(t,e){var i,n;this.launch_eln4bt$((i=t,n=e,function(t,e,r){var o=new ii(i,n,t,this,e);return r?o:o.doResume(null)}))},ei.prototype.close=function(){this.job.cancel_m4sck1$()},ni.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ni.prototype=Object.create(l.prototype),ni.prototype.constructor=ni,ni.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(e.isType(this.local$ref,yi)){if(this.state_0=8,this.result_0=this.$this.loadLocalRaw_hl6yzt$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,vi)){if(this.state_0=6,this.result_0=this.$this.loadHttpRaw_ohmb7q$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,gi)){if(this.state_0=4,this.result_0=this.$this.loadLocalTexture_68kns4$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,bi)){if(this.state_0=2,this.result_0=this.$this.loadHttpTexture_nbaz3h$(this.local$ref,this),this.result_0===a)return a;continue}this.local$tmp$=e.noWhenBranchMatched(),this.state_0=3;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=this.result_0,this.state_0=3;continue;case 3:this.state_0=5;continue;case 4:this.local$tmp$=this.result_0,this.state_0=5;continue;case 5:this.state_0=7;continue;case 6:this.local$tmp$=this.result_0,this.state_0=7;continue;case 7:this.state_0=9;continue;case 8:this.local$tmp$=this.result_0,this.state_0=9;continue;case 9:return this.local$tmp$;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadAsset_lpb790$_0=function(t,e,i){var n=new ni(this,t,e);return i?n:n.doResume(null)},ei.prototype.isHttpAsset_61zpoe$=function(t){return u(t,"http://",!0)||u(t,"https://",!0)||u(t,"data:",!0)},ri.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ri.prototype=Object.create(l.prototype),ri.prototype.constructor=ri,ri.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$block(this.local$this$AssetManager,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.launch_eln4bt$=function(t){var i,n;h(e.isType(this,p)?this:c(),void 0,void 0,(i=t,n=this,function(t,e,r){var o=new ri(i,n,t,this,e);return r?o:o.doResume(null)}))},oi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},oi.prototype=Object.create(l.prototype),oi.prototype.constructor=oi,oi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new vi(this.local$assetPath):new yi(this.$this.assetsBaseDir+"/"+this.local$assetPath);if(this.local$awaitedAsset=new li(this.$this,n),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var r=e.isType(t=this.result_0,wi)?t:c();if(null!=(i=r.data)){var o=qN.Log,s=vz.DEBUG,l=e.getKClassFromExpression(this.$this).simpleName;s.level>=o.level.level&&o.printer(s,l,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+MS(i.capacity/1024/1024,1)+" mb)")}return r.data;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadAsset_61zpoe$=function(t,e,i){var n=new oi(this,t,e);return i?n:n.doResume(null)},si.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},si.prototype=Object.create(l.prototype),si.prototype.constructor=si,si.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n,r=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new bi(this.local$assetPath):new gi(this.$this.assetsBaseDir+"/"+this.local$assetPath);if(this.local$awaitedAsset=new li(this.$this,r),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var o=e.isType(t=this.result_0,zi)?t:c();if(null!=(i=o.data)){var s=qN.Log,l=vz.DEBUG,u=e.getKClassFromExpression(this.$this).simpleName;l.level>=s.level.level&&s.printer(l,u,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+i.format+", "+i.width+"x"+i.height+")")}if(null==(n=o.data))throw cn("Failed loading texture");return n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadTextureData_61zpoe$=function(t,e,i){var n=new si(this,t,e);return i?n:n.doResume(null)},ai.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ai.prototype=Object.create(l.prototype),ai.prototype.constructor=ai,ai.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$ft,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.local$ftd=this.result_0,this.state_0=3,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$bk,this),this.result_0===a)return a;continue;case 3:if(this.local$bkd=this.result_0,this.state_0=4,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$lt,this),this.result_0===a)return a;continue;case 4:if(this.local$ltd=this.result_0,this.state_0=5,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$rt,this),this.result_0===a)return a;continue;case 5:if(this.local$rtd=this.result_0,this.state_0=6,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$up,this),this.result_0===a)return a;continue;case 6:if(this.local$upd=this.result_0,this.state_0=7,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$dn,this),this.result_0===a)return a;continue;case 7:var t=this.result_0;return new Fh(this.local$ftd,this.local$bkd,this.local$ltd,this.local$rtd,this.local$upd,t);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadCubeMapTextureData_r3y0ew$=function(t,e,i,n,r,o,s,a){var l=new ai(this,t,e,i,n,r,o,s);return a?l:l.doResume(null)},ei.prototype.loadAndPrepareTexture_va0f2y$=function(t,e,i,n){return void 0===e&&(e=new xh),n?n(t,e,i):this.loadAndPrepareTexture_va0f2y$$default(t,e,i)},ei.prototype.loadAndPrepareCubeMap_oecnw4$=function(t,e,i,n,r,o,s,a,l){return void 0===s&&(s=new xh),l?l(t,e,i,n,r,o,s,a):this.loadAndPrepareCubeMap_oecnw4$$default(t,e,i,n,r,o,s,a)},ei.prototype.loadAndPrepareTexture_siesr9$=function(t,e,i,n){return void 0===e&&(e=new xh),void 0===i&&(i=null),n?n(t,e,i):this.loadAndPrepareTexture_siesr9$$default(t,e,i)},ei.prototype.loadAndPrepareCubeMap_hol3hm$=function(t,e,i,n){return void 0===e&&(e=new xh),void 0===i&&(i=null),n?n(t,e,i):this.loadAndPrepareCubeMap_hol3hm$$default(t,e,i)},ei.prototype.assetPathToName_61zpoe$=function(t){var e;if(u(t,"data:",!0)){var i=d(t,59);e=_(t,f(0,i))}else e=t;return e},ei.prototype.cubeMapAssetPathToName_r3y0ew$=function(t,e,i,n,r,o){return"cubeMap(ft:"+this.assetPathToName_61zpoe$(t)+", bk:"+this.assetPathToName_61zpoe$(e)+", lt:"+this.assetPathToName_61zpoe$(i)+", rt:"+this.assetPathToName_61zpoe$(n)+", up:"+this.assetPathToName_61zpoe$(r)+", dn:"+this.assetPathToName_61zpoe$(o)+")"},li.$metadata$={kind:$,simpleName:"AwaitedAsset",interfaces:[]},ui.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pi=null;function ci(){return null===pi&&new ui,pi}function hi(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.local$closure$requested=t,this.local$this$=e,this.local$awaited=i}function di(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$closure$requested=t,this.local$loaded=e}function fi(t,e){return function(i){var n,r;return i.invoke_veq140$(t.awaitedAssetsChannel_nphlkp$_0.onReceive,(n=e,r=t,function(t,e,i){var o=new hi(n,r,t,e);return i?o:o.doResume(null)})),i.invoke_veq140$(t.loadedAssetChannel_obd8me$_0.onReceive,function(t){return function(e,i,n){var r=new di(t,e,i);return n?r:r.doResume(null)}}(e)),s}}function _i(t,e,i){l.call(this,i),this.$controller=e,this.exceptionState_0=1,this.local$requested=void 0,this.local$$receiver=t}function mi(t,e,i){var n=new _i(t,this,e);return i?n:n.doResume(null)}function $i(){}function yi(t){$i.call(this),this.url=t}function vi(t){$i.call(this),this.url=t}function gi(t){$i.call(this),this.url=t}function bi(t){$i.call(this),this.url=t}function xi(t,e){this.ref=t,this.successfull=e}function wi(t,e){xi.call(this,t,null!=e),this.data=e}function zi(t,e){xi.call(this,t,null!=e),this.data=e}function ki(){this.bufferAllocations=z(),this.totalBufferSize_mh5cfj$_0=C,this.textureAllocations=z(),this.totalTextureSize_4hd4e0$_0=C,this.pipelines=z(),this.numPipelineInstances_ikf7d6$_0=0,this.numDrawCommands_4id88y$_0=0,this.numPrimitives_jhh8ci$_0=0}function Si(){rn(),this.queuedKeyEvents_0=M(),this.keyEvents=M(),this.keyHandlers_0=z(),this.pointerState=new tn}function Ci(t){return t.isCharTyped}function Ni(t){return!0}function Ei(){this.id_yfac1g$_0=0,this.x_5rhhjp$_0=0,this.y_5rhhkk$_0=0,this.deltaX_8nh2op$_0=0,this.deltaY_8nh2nu$_0=0,this.dragDeltaX_yg2vql$_0=0,this.dragDeltaY_yg2vpq$_0=0,this.deltaScroll_trurwo$_0=0,this.buttonMask_uq1vpl$_0=0,this.buttonEventMask_dc8ngn$_0=0,this.isValid_cde91$_0=!1,this.consumptionMask_8be2vx$=0}function Pi(){Ei.call(this),this.updateState_0=Yi(),this.processedState_0=Yi(),this.lastUpdate=0}function Ti(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Oi(){Oi=function(){},new Mi,new Ri,new Di,new Fi,new Gi,new Ki}function Mi(){ji=this,Ti.call(this,"STARTED",0)}hi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},hi.prototype=Object.create(l.prototype),hi.prototype.constructor=hi,hi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.local$closure$requested.get_11rb$(this.local$awaited.ref);if(null==t){var e=this.local$closure$requested,i=this.local$awaited.ref,n=b([this.local$awaited]);if(e.put_xwzc9p$(i,n),this.state_0=2,this.result_0=this.local$this$.assetRefChannel_acu3lu$_0.send_11rb$(this.local$awaited.ref,this),this.result_0===a)return a;continue}return t.add_11rb$(this.local$awaited);case 1:throw this.exception_0;case 2:return this.result_0;case 3:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},di.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},di.prototype=Object.create(l.prototype),di.prototype.constructor=di,di.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;for(t=x(this.local$closure$requested.remove_11rb$(this.local$loaded.ref)).iterator();t.hasNext();)t.next().awaiting.complete_11rb$(this.local$loaded);return s;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},_i.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},_i.prototype=Object.create(l.prototype),_i.prototype.constructor=_i,_i.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:this.local$requested=z(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=ti(fi(this.local$$receiver,this.local$requested))(this),this.result_0===a)return a;continue;case 3:this.result_0,this.state_0=2;continue;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.$metadata$={kind:$,simpleName:"AssetManager",interfaces:[p]},$i.$metadata$={kind:$,simpleName:"AssetRef",interfaces:[]},yi.$metadata$={kind:$,simpleName:"LocalRawAssetRef",interfaces:[$i]},yi.prototype.component1=function(){return this.url},yi.prototype.copy_61zpoe$=function(t){return new yi(void 0===t?this.url:t)},yi.prototype.toString=function(){return"LocalRawAssetRef(url="+e.toString(this.url)+")"},yi.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.url)|0},yi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)},vi.$metadata$={kind:$,simpleName:"HttpRawAssetRef",interfaces:[$i]},vi.prototype.component1=function(){return this.url},vi.prototype.copy_61zpoe$=function(t){return new vi(void 0===t?this.url:t)},vi.prototype.toString=function(){return"HttpRawAssetRef(url="+e.toString(this.url)+")"},vi.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.url)|0},vi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)},gi.$metadata$={kind:$,simpleName:"LocalTextureAssetRef",interfaces:[$i]},gi.prototype.component1=function(){return this.url},gi.prototype.copy_61zpoe$=function(t){return new gi(void 0===t?this.url:t)},gi.prototype.toString=function(){return"LocalTextureAssetRef(url="+e.toString(this.url)+")"},gi.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.url)|0},gi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)},bi.$metadata$={kind:$,simpleName:"HttpTextureAssetRef",interfaces:[$i]},bi.prototype.component1=function(){return this.url},bi.prototype.copy_61zpoe$=function(t){return new bi(void 0===t?this.url:t)},bi.prototype.toString=function(){return"HttpTextureAssetRef(url="+e.toString(this.url)+")"},bi.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.url)|0},bi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)},xi.$metadata$={kind:$,simpleName:"LoadedAsset",interfaces:[]},wi.$metadata$={kind:$,simpleName:"LoadedRawAsset",interfaces:[xi]},zi.$metadata$={kind:$,simpleName:"LoadedTextureAsset",interfaces:[xi]},Object.defineProperty(ki.prototype,"totalBufferSize",{configurable:!0,get:function(){return this.totalBufferSize_mh5cfj$_0},set:function(t){this.totalBufferSize_mh5cfj$_0=t}}),Object.defineProperty(ki.prototype,"totalTextureSize",{configurable:!0,get:function(){return this.totalTextureSize_4hd4e0$_0},set:function(t){this.totalTextureSize_4hd4e0$_0=t}}),Object.defineProperty(ki.prototype,"numPipelineInstances",{configurable:!0,get:function(){return this.numPipelineInstances_ikf7d6$_0},set:function(t){this.numPipelineInstances_ikf7d6$_0=t}}),Object.defineProperty(ki.prototype,"numDrawCommands",{configurable:!0,get:function(){return this.numDrawCommands_4id88y$_0},set:function(t){this.numDrawCommands_4id88y$_0=t}}),Object.defineProperty(ki.prototype,"numPrimitives",{configurable:!0,get:function(){return this.numPrimitives_jhh8ci$_0},set:function(t){this.numPrimitives_jhh8ci$_0=t}}),ki.prototype.bufferAllocated_yhmem3$=function(t,i){var n;null!=(n=this.bufferAllocations.put_xwzc9p$(t,i))&&(this.totalBufferSize=this.totalBufferSize.subtract(e.Long.fromInt(n))),this.totalBufferSize=this.totalBufferSize.add(e.Long.fromInt(i))},ki.prototype.bufferDeleted_s8cxhz$=function(t){var i;null!=(i=this.bufferAllocations.remove_11rb$(t))&&(this.totalBufferSize=this.totalBufferSize.subtract(e.Long.fromInt(i)))},ki.prototype.textureAllocated_yhmem3$=function(t,i){var n;null!=(n=this.textureAllocations.put_xwzc9p$(t,i))&&(this.totalTextureSize=this.totalTextureSize.subtract(e.Long.fromInt(n))),this.totalTextureSize=this.totalTextureSize.add(e.Long.fromInt(i))},ki.prototype.textureDeleted_s8cxhz$=function(t){var i;null!=(i=this.textureAllocations.remove_11rb$(t))&&(this.totalTextureSize=this.totalTextureSize.subtract(e.Long.fromInt(i)))},ki.prototype.pipelineInstanceCreated_s8cxhz$=function(t){var e,i=(null!=(e=this.pipelines.get_11rb$(t))?e:0)+1|0;this.pipelines.put_xwzc9p$(t,i),this.numPipelineInstances=this.numPipelineInstances+1|0},ki.prototype.pipelineInstanceDestroyed_s8cxhz$=function(t){var e,i=(null!=(e=this.pipelines.get_11rb$(t))?e:0)-1|0;i>=0&&(this.pipelines.put_xwzc9p$(t,i),this.numPipelineInstances=this.numPipelineInstances-1|0)},ki.prototype.pipelineDestroyed_s8cxhz$=function(t){var e;null!=(e=this.pipelines.remove_11rb$(t))&&(this.numPipelineInstances=this.numPipelineInstances-e|0)},ki.prototype.resetPerFrameCounts=function(){this.numDrawCommands=0,this.numPrimitives=0},ki.prototype.addDrawCommandCount_za3lpa$=function(t){this.numDrawCommands=this.numDrawCommands+t|0},ki.prototype.addPrimitiveCount_za3lpa$=function(t){this.numPrimitives=this.numPrimitives+t|0},ki.$metadata$={kind:$,simpleName:"EngineStats",interfaces:[]},Si.prototype.registerKeyListener_i13a8v$=function(t,e,i,n){return void 0===i&&(i=Ci),this.registerKeyListener_aviy8w$(0|t,e,i,n)},Si.prototype.registerKeyListener_aviy8w$=function(t,i,n,r){void 0===n&&(n=Ni);var o,s=32<=t&&t<=126?"'"+String.fromCharCode(N(t))+"'":t.toString(),a=this.keyHandlers_0,l=a.get_11rb$(t);if(null==l){var u=M();a.put_xwzc9p$(t,u),o=u}else o=l;var p=o;if(!p.isEmpty()){var c=qN.Log,h=vz.WARN,d=e.getKClassFromExpression(this).simpleName;if(h.level>=c.level.level){var f,_=c.printer,m="Multiple bindings for key "+s+": ",$=w(j(p,10));for(f=p.iterator();f.hasNext();){var y=f.next();$.add_11rb$(y.name)}_.call(c,h,d,m+$)}}var v=new Zi(t,i,n,r);p.add_11rb$(v);var g=qN.Log,b=vz.DEBUG,x=e.getKClassFromExpression(this).simpleName;return b.level>=g.level.level&&g.printer(b,x,'Registered key handler: "'+i+'" [keyCode='+s+"]"),v},Si.prototype.removeKeyListener_abhb69$=function(t){var e;null!=(e=this.keyHandlers_0.get_11rb$(t.keyCode))&&e.remove_11rb$(t)},Si.prototype.onNewFrame_cwprtu$=function(t){var e;this.pointerState.onNewFrame_cwprtu$(t),this.keyEvents.clear(),this.keyEvents.addAll_brywnq$(this.queuedKeyEvents_0),this.queuedKeyEvents_0.clear(),e=this.keyEvents;for(var i=0;i!==e.size;++i){var n=this.keyEvents.get_za3lpa$(i),r=this.keyHandlers_0.get_11rb$(n.keyCode);if(null!=r)for(var o=0;o!==r.size;++o)r.get_za3lpa$(o).filter(n)&&r.get_za3lpa$(o).invoke_9cgpoj$(n)}},Si.prototype.keyEvent_qt1dr2$=function(t,e,i){var n=new Qi;n.keyCode=t,n.event=i,n.modifiers=e,this.queuedKeyEvents_0.add_11rb$(n)},Si.prototype.charTyped_s8itvh$=function(t){var e=new Qi;e.event=8,e.typedChar=E(t),e.keyCode=0|t,this.queuedKeyEvents_0.add_11rb$(e)},Si.prototype.handleTouchStart_nhq4am$=function(t,e,i){this.pointerState.handleTouchStart_qlj5un$(t,e,i)},Si.prototype.handleTouchEnd_za3lpa$=function(t){this.pointerState.handleTouchEnd_kcn2v3$(t)},Si.prototype.handleTouchCancel_za3lpa$=function(t){this.pointerState.handleTouchCancel_kcn2v3$(t)},Si.prototype.handleTouchMove_nhq4am$=function(t,e,i){this.pointerState.handleTouchMove_qlj5un$(t,e,i)},Si.prototype.handleMouseMove_dleff0$=function(t,e){this.pointerState.handleMouseMove_dob1fz$(t,e)},Si.prototype.handleMouseButtonState_fzusl$=function(t,e){this.pointerState.handleMouseButtonState_iwgtk$(t,e)},Si.prototype.handleMouseButtonStates_za3lpa$=function(t){this.pointerState.handleMouseButtonStates_kcn2v3$(t)},Si.prototype.handleMouseScroll_mx4ult$=function(t){this.pointerState.handleMouseScroll_nwfnho$(t)},Si.prototype.handleMouseExit=function(){this.pointerState.handleMouseExit_8be2vx$()},Object.defineProperty(Ei.prototype,"id",{configurable:!0,get:function(){return this.id_yfac1g$_0},set:function(t){this.id_yfac1g$_0=t}}),Object.defineProperty(Ei.prototype,"x",{configurable:!0,get:function(){return this.x_5rhhjp$_0},set:function(t){this.x_5rhhjp$_0=t}}),Object.defineProperty(Ei.prototype,"y",{configurable:!0,get:function(){return this.y_5rhhkk$_0},set:function(t){this.y_5rhhkk$_0=t}}),Object.defineProperty(Ei.prototype,"deltaX",{configurable:!0,get:function(){return this.deltaX_8nh2op$_0},set:function(t){this.deltaX_8nh2op$_0=t}}),Object.defineProperty(Ei.prototype,"deltaY",{configurable:!0,get:function(){return this.deltaY_8nh2nu$_0},set:function(t){this.deltaY_8nh2nu$_0=t}}),Object.defineProperty(Ei.prototype,"dragDeltaX",{configurable:!0,get:function(){return this.dragDeltaX_yg2vql$_0},set:function(t){this.dragDeltaX_yg2vql$_0=t}}),Object.defineProperty(Ei.prototype,"dragDeltaY",{configurable:!0,get:function(){return this.dragDeltaY_yg2vpq$_0},set:function(t){this.dragDeltaY_yg2vpq$_0=t}}),Object.defineProperty(Ei.prototype,"deltaScroll",{configurable:!0,get:function(){return this.deltaScroll_trurwo$_0},set:function(t){this.deltaScroll_trurwo$_0=t}}),Object.defineProperty(Ei.prototype,"buttonMask",{configurable:!0,get:function(){return this.buttonMask_uq1vpl$_0},set:function(t){this.buttonEventMask=this.buttonEventMask|this.buttonMask_uq1vpl$_0^t,this.buttonMask_uq1vpl$_0=t}}),Object.defineProperty(Ei.prototype,"buttonEventMask",{configurable:!0,get:function(){return this.buttonEventMask_dc8ngn$_0},set:function(t){this.buttonEventMask_dc8ngn$_0=t}}),Object.defineProperty(Ei.prototype,"isValid",{configurable:!0,get:function(){return this.isValid_cde91$_0},set:function(t){this.isValid_cde91$_0=t}}),Object.defineProperty(Ei.prototype,"isLeftButtonDown",{configurable:!0,get:function(){return 0!=(1&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isRightButtonDown",{configurable:!0,get:function(){return 0!=(2&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isMiddleButtonDown",{configurable:!0,get:function(){return 0!=(4&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isBackButtonDown",{configurable:!0,get:function(){return 0!=(8&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isForwardButtonDown",{configurable:!0,get:function(){return 0!=(16&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isLeftButtonEvent",{configurable:!0,get:function(){return 0!=(1&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isRightButtonEvent",{configurable:!0,get:function(){return 0!=(2&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isMiddleButtonEvent",{configurable:!0,get:function(){return 0!=(4&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isBackButtonEvent",{configurable:!0,get:function(){return 0!=(8&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isForwardButtonEvent",{configurable:!0,get:function(){return 0!=(16&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isLeftButtonPressed",{configurable:!0,get:function(){return this.isLeftButtonEvent&&this.isLeftButtonDown}}),Object.defineProperty(Ei.prototype,"isRightButtonPressed",{configurable:!0,get:function(){return this.isRightButtonEvent&&this.isRightButtonDown}}),Object.defineProperty(Ei.prototype,"isMiddleButtonPressed",{configurable:!0,get:function(){return this.isMiddleButtonEvent&&this.isMiddleButtonDown}}),Object.defineProperty(Ei.prototype,"isBackButtonPressed",{configurable:!0,get:function(){return this.isBackButtonEvent&&this.isBackButtonDown}}),Object.defineProperty(Ei.prototype,"isForwardButtonPressed",{configurable:!0,get:function(){return this.isForwardButtonEvent&&this.isForwardButtonDown}}),Object.defineProperty(Ei.prototype,"isLeftButtonReleased",{configurable:!0,get:function(){return this.isLeftButtonEvent&&!this.isLeftButtonDown}}),Object.defineProperty(Ei.prototype,"isRightButtonReleased",{configurable:!0,get:function(){return this.isRightButtonEvent&&!this.isRightButtonDown}}),Object.defineProperty(Ei.prototype,"isMiddleButtonReleased",{configurable:!0,get:function(){return this.isMiddleButtonEvent&&!this.isMiddleButtonDown}}),Object.defineProperty(Ei.prototype,"isBackButtonReleased",{configurable:!0,get:function(){return this.isBackButtonEvent&&!this.isBackButtonDown}}),Object.defineProperty(Ei.prototype,"isForwardButtonReleased",{configurable:!0,get:function(){return this.isForwardButtonEvent&&!this.isForwardButtonDown}}),Object.defineProperty(Ei.prototype,"isLeftButtonClicked",{configurable:!0,get:function(){var t=this.isLeftButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isRightButtonClicked",{configurable:!0,get:function(){var t=this.isRightButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isMiddleButtonClicked",{configurable:!0,get:function(){var t=this.isMiddleButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isBackButtonClicked",{configurable:!0,get:function(){var t=this.isBackButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isForwardButtonClicked",{configurable:!0,get:function(){var t=this.isForwardButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Ei.prototype.consume_za3lpa$=function(t){void 0===t&&(t=-1),this.consumptionMask_8be2vx$=this.consumptionMask_8be2vx$|t},Ei.prototype.isConsumed_za3lpa$=function(t){return void 0===t&&(t=-1),0!=(this.consumptionMask_8be2vx$&t)},Ei.prototype.isInViewport_hrtwbc$=function(t,e){var i=e.windowHeight-this.y;return this.isValid&&t.isInViewport_dleff0$(this.x,i)},Ei.$metadata$={kind:$,simpleName:"Pointer",interfaces:[]},Pi.prototype.setButtonMask_za3lpa$=function(t){this.buttonMask=t,(this.isLeftButtonPressed||this.isRightButtonPressed||this.isMiddleButtonPressed)&&(this.dragDeltaX=0,this.dragDeltaY=0)},Pi.prototype.startPointer_nhq4am$=function(t,e,i){this.movePointer_dleff0$(e,i),this.id=t,this.deltaX=0,this.deltaY=0,this.dragDeltaX=0,this.dragDeltaY=0,this.deltaScroll=0,this.updateState_0=Ai(),this.isValid=!0},Pi.prototype.movePointer_dleff0$=function(t,e){0!==this.buttonMask&&(this.dragDeltaX=this.dragDeltaX+(t-this.x),this.dragDeltaY=this.dragDeltaY+(e-this.y)),this.deltaX=this.deltaX+(t-this.x),this.deltaY=this.deltaY+(e-this.y),this.x=t,this.y=e,this.lastUpdate=OS()},Pi.prototype.endPointer=function(){var t;switch(this.processedState_0.name){case"ACTIVE":t=Wi();break;case"STARTED":t=Vi();break;default:t=Bi()}this.updateState_0=t},Pi.prototype.cancelPointer=function(){this.buttonMask=0,this.buttonEventMask=0,this.deltaX=0,this.deltaY=0,this.deltaScroll=0,this.dragDeltaX=0,this.dragDeltaY=0,this.updateState_0=Yi(),this.isValid=!1},Pi.prototype.update_sjovm5$=function(t,i){if(this.updateState_0!==Yi()&&i-this.lastUpdate>200){var n=qN.Log,r=vz.WARN,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"Pointer "+this.id+" timed out!"),this.cancelPointer()}switch(t.id=this.id,t.deltaX=this.deltaX,t.deltaY=this.deltaY,t.dragDeltaX=this.dragDeltaX,t.dragDeltaY=this.dragDeltaY,t.deltaScroll=this.deltaScroll,t.x=this.x,t.y=this.y,t.isValid=!0,t.consumptionMask_8be2vx$=0,t.buttonEventMask=0,this.updateState_0.name){case"STARTED":case"ENDED_BEFORE_STARTED":t.buttonMask=0;break;case"ACTIVE":case"ENDED_BEFORE_ACTIVE":t.buttonMask=this.buttonMask;break;case"ENDED":t.buttonMask=0;break;case"INVALID":this.isValid=!1,t.isValid=!1}this.deltaX=0,this.deltaY=0,this.deltaScroll=0,this.buttonEventMask=0,this.processedState_0=this.updateState_0,this.updateState_0=this.updateState_0.next()},Mi.prototype.next=function(){return Li()},Mi.$metadata$={kind:$,simpleName:"STARTED",interfaces:[Ti]};var ji=null;function Ai(){return Oi(),ji}function Ri(){Ii=this,Ti.call(this,"ACTIVE",1)}Ri.prototype.next=function(){return Li()},Ri.$metadata$={kind:$,simpleName:"ACTIVE",interfaces:[Ti]};var Ii=null;function Li(){return Oi(),Ii}function Di(){qi=this,Ti.call(this,"ENDED_BEFORE_STARTED",2)}Di.prototype.next=function(){return Vi()},Di.$metadata$={kind:$,simpleName:"ENDED_BEFORE_STARTED",interfaces:[Ti]};var qi=null;function Bi(){return Oi(),qi}function Fi(){Ui=this,Ti.call(this,"ENDED_BEFORE_ACTIVE",3)}Fi.prototype.next=function(){return Wi()},Fi.$metadata$={kind:$,simpleName:"ENDED_BEFORE_ACTIVE",interfaces:[Ti]};var Ui=null;function Vi(){return Oi(),Ui}function Gi(){Hi=this,Ti.call(this,"ENDED",4)}Gi.prototype.next=function(){return Yi()},Gi.$metadata$={kind:$,simpleName:"ENDED",interfaces:[Ti]};var Hi=null;function Wi(){return Oi(),Hi}function Ki(){Xi=this,Ti.call(this,"INVALID",5)}Ki.prototype.next=function(){return Yi()},Ki.$metadata$={kind:$,simpleName:"INVALID",interfaces:[Ti]};var Xi=null;function Yi(){return Oi(),Xi}function Zi(t,e,i,n){void 0===i&&(i=Ji),this.keyCode=t,this.name=e,this.filter=i,this.callback=n}function Ji(t){return!0}function Qi(){this.keyCode_56t57j$_0=0,this.modifiers_cmws0f$_0=0,this.event_4ycnw1$_0=0,this.typedChar_ne8il1$_0=N(0)}function tn(){var t,e=R(10);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=new Ei;this.pointers=e,this.lastPtrInput_0=0;var n,r=R(10);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=new Pi;this.inputPointers_0=r,this.compatGestureEvaluator_0=new uS,this.isEvaluatingCompatGestures=!0,this.primaryPointer=this.pointers[0]}function en(){nn=this,this.LEFT_BUTTON=0,this.LEFT_BUTTON_MASK=1,this.RIGHT_BUTTON=1,this.RIGHT_BUTTON_MASK=2,this.MIDDLE_BUTTON=2,this.MIDDLE_BUTTON_MASK=4,this.BACK_BUTTON=3,this.BACK_BUTTON_MASK=8,this.FORWARD_BUTTON=4,this.FORWARD_BUTTON_MASK=16,this.MAX_POINTERS=10,this.MOUSE_POINTER_ID=-1e6,this.CONSUMED_ALL=-1,this.CONSUMED_X=1,this.CONSUMED_Y=2,this.CONSUMED_SCROLL=4,this.CONSUMED_LEFT_BUTTON=8,this.CONSUMED_RIGHT_BUTTON=16,this.CONSUMED_MIDDLE_BUTTON=32,this.CONSUMED_BACK_BUTTON=64,this.CONSUMED_FORWARD_BUTTON=128,this.KEY_EV_UP=1,this.KEY_EV_DOWN=2,this.KEY_EV_REPEATED=4,this.KEY_EV_CHAR_TYPED=8,this.KEY_MOD_SHIFT=1,this.KEY_MOD_CTRL=2,this.KEY_MOD_ALT=4,this.KEY_MOD_SUPER=8,this.KEY_CTRL_LEFT=-1,this.KEY_CTRL_RIGHT=-2,this.KEY_SHIFT_LEFT=-3,this.KEY_SHIFT_RIGHT=-4,this.KEY_ALT_LEFT=-5,this.KEY_ALT_RIGHT=-6,this.KEY_SUPER_LEFT=-7,this.KEY_SUPER_RIGHT=-8,this.KEY_ESC=-9,this.KEY_MENU=-10,this.KEY_ENTER=-11,this.KEY_NP_ENTER=-12,this.KEY_NP_DIV=-13,this.KEY_NP_MUL=-14,this.KEY_NP_PLUS=-15,this.KEY_NP_MINUS=-16,this.KEY_BACKSPACE=-17,this.KEY_TAB=-18,this.KEY_DEL=-19,this.KEY_INSERT=-20,this.KEY_HOME=-21,this.KEY_END=-22,this.KEY_PAGE_UP=-23,this.KEY_PAGE_DOWN=-24,this.KEY_CURSOR_LEFT=-25,this.KEY_CURSOR_RIGHT=-26,this.KEY_CURSOR_UP=-27,this.KEY_CURSOR_DOWN=-28,this.KEY_F1=-29,this.KEY_F2=-30,this.KEY_F3=-31,this.KEY_F4=-32,this.KEY_F5=-33,this.KEY_F6=-34,this.KEY_F7=-35,this.KEY_F8=-36,this.KEY_F9=-37,this.KEY_F10=-38,this.KEY_F11=-39,this.KEY_F12=-40}Ti.$metadata$={kind:$,simpleName:"UpdateState",interfaces:[P]},Ti.values=function(){return[Ai(),Li(),Bi(),Vi(),Wi(),Yi()]},Ti.valueOf_61zpoe$=function(t){switch(t){case"STARTED":return Ai();case"ACTIVE":return Li();case"ENDED_BEFORE_STARTED":return Bi();case"ENDED_BEFORE_ACTIVE":return Vi();case"ENDED":return Wi();case"INVALID":return Yi();default:T("No enum constant de.fabmax.kool.InputManager.BufferedPointerInput.UpdateState."+t)}},Pi.$metadata$={kind:$,simpleName:"BufferedPointerInput",interfaces:[Ei]},Zi.prototype.invoke_9cgpoj$=function(t){this.callback(t)},Zi.$metadata$={kind:$,simpleName:"KeyEventListener",interfaces:[]},Object.defineProperty(Qi.prototype,"keyCode",{configurable:!0,get:function(){return this.keyCode_56t57j$_0},set:function(t){this.keyCode_56t57j$_0=t}}),Object.defineProperty(Qi.prototype,"modifiers",{configurable:!0,get:function(){return this.modifiers_cmws0f$_0},set:function(t){this.modifiers_cmws0f$_0=t}}),Object.defineProperty(Qi.prototype,"event",{configurable:!0,get:function(){return this.event_4ycnw1$_0},set:function(t){this.event_4ycnw1$_0=t}}),Object.defineProperty(Qi.prototype,"typedChar",{configurable:!0,get:function(){return E(this.typedChar_ne8il1$_0)},set:function(t){this.typedChar_ne8il1$_0=O(t)}}),Object.defineProperty(Qi.prototype,"isPressed",{configurable:!0,get:function(){return 0!=(2&this.event)}}),Object.defineProperty(Qi.prototype,"isRepeated",{configurable:!0,get:function(){return 0!=(4&this.event)}}),Object.defineProperty(Qi.prototype,"isReleased",{configurable:!0,get:function(){return 0!=(1&this.event)}}),Object.defineProperty(Qi.prototype,"isCharTyped",{configurable:!0,get:function(){return 0!=(8&this.event)}}),Object.defineProperty(Qi.prototype,"isShiftDown",{configurable:!0,get:function(){return 0!=(1&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isCtrlDown",{configurable:!0,get:function(){return 0!=(2&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isAltDown",{configurable:!0,get:function(){return 0!=(4&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isSuperDown",{configurable:!0,get:function(){return 0!=(8&this.modifiers)}}),Qi.$metadata$={kind:$,simpleName:"KeyEvent",interfaces:[]},tn.prototype.getActivePointers_j71cmr$=function(t,e){var i;void 0===e&&(e=-1),t.clear(),i=this.pointers;for(var n=0;n!==i.length;++n)this.pointers[n].isValid&&!this.pointers[n].isConsumed_za3lpa$(e)&&t.add_11rb$(this.pointers[n])},tn.prototype.onNewFrame_cwprtu$=function(t){var e;e=this.pointers;for(var i=0;i!==e.length;++i)this.inputPointers_0[i].update_sjovm5$(this.pointers[i],this.lastPtrInput_0);if(this.isEvaluatingCompatGestures)switch(this.compatGestureEvaluator_0.evaluate_19cf9$(this,t),this.compatGestureEvaluator_0.currentGesture.type){case 1:this.primaryPointer.consumptionMask_8be2vx$=0,this.primaryPointer.deltaScroll=this.compatGestureEvaluator_0.currentGesture.dPinchAmount/20,this.primaryPointer.x=this.compatGestureEvaluator_0.currentGesture.centerCurrent.x,this.primaryPointer.y=this.compatGestureEvaluator_0.currentGesture.centerCurrent.y,this.primaryPointer.deltaX=this.compatGestureEvaluator_0.currentGesture.dCenter.x,this.primaryPointer.deltaY=this.compatGestureEvaluator_0.currentGesture.dCenter.y;break;case 2:this.primaryPointer.consumptionMask_8be2vx$=0,this.primaryPointer.x=this.compatGestureEvaluator_0.currentGesture.centerCurrent.x,this.primaryPointer.y=this.compatGestureEvaluator_0.currentGesture.centerCurrent.y,this.primaryPointer.deltaX=this.compatGestureEvaluator_0.currentGesture.dCenter.x,this.primaryPointer.deltaY=this.compatGestureEvaluator_0.currentGesture.dCenter.y,1===this.primaryPointer.buttonMask&&(this.primaryPointer.buttonMask=2,this.compatGestureEvaluator_0.currentGesture.numUpdates>1&&(this.primaryPointer.buttonEventMask=0))}},tn.prototype.getFreeInputPointer_8be2vx$=function(){var t;t=this.inputPointers_0;for(var e=0;e!==t.length;++e)if(!this.inputPointers_0[e].isValid)return this.inputPointers_0[e];return null},tn.prototype.findInputPointer_kcn2v3$=function(t){var e;e=this.inputPointers_0;for(var i=0;i!==e.length;++i)if(this.inputPointers_0[i].isValid&&this.inputPointers_0[i].id===t)return this.inputPointers_0[i];return null},tn.prototype.handleTouchStart_qlj5un$=function(t,e,i){var n;if(this.lastPtrInput_0=OS(),null!=(n=this.getFreeInputPointer_8be2vx$())){var r=n;r.startPointer_nhq4am$(t,e,i),r.buttonMask=1}},tn.prototype.handleTouchEnd_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(t))&&e.endPointer()},tn.prototype.handleTouchCancel_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(t))&&e.cancelPointer()},tn.prototype.handleTouchMove_qlj5un$=function(t,e,i){var n;this.lastPtrInput_0=OS(),null!=(n=this.findInputPointer_kcn2v3$(t))&&n.movePointer_dleff0$(e,i)},tn.prototype.handleMouseMove_dob1fz$=function(t,e){var i;this.lastPtrInput_0=OS();var n=this.findInputPointer_kcn2v3$(-1e6);if(null==n){if(null==(i=this.getFreeInputPointer_8be2vx$()))return;i.startPointer_nhq4am$(-1e6,t,e)}else n.movePointer_dleff0$(t,e)},tn.prototype.handleMouseButtonState_iwgtk$=function(t,e){var i;if(null!=(i=this.findInputPointer_kcn2v3$(-1e6))){var n=i;e?n.setButtonMask_za3lpa$(n.buttonMask|1<<t):n.setButtonMask_za3lpa$(n.buttonMask&~(1<<t))}},tn.prototype.handleMouseButtonStates_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(-1e6))&&e.setButtonMask_za3lpa$(t)},tn.prototype.handleMouseScroll_nwfnho$=function(t){var e;if(null!=(e=this.findInputPointer_kcn2v3$(-1e6))){var i=e;i.deltaScroll=i.deltaScroll+t}},tn.prototype.handleMouseExit_8be2vx$=function(){var t;null!=(t=this.findInputPointer_kcn2v3$(-1e6))&&t.cancelPointer()},tn.$metadata$={kind:$,simpleName:"PointerState",interfaces:[]},en.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var nn=null;function rn(){return null===nn&&new en,nn}function on(){un(),this.screenDpi=96,this.inputMgr=new Si,this.engineStats=new ki,this.projCorrectionMatrixScreen=new bn,this.projCorrectionMatrixOffscreen=new bn,this.depthBiasMatrix=(new bn).translate_yvo9jy$(.5,.5,.5).scale_yvo9jy$(.5,.5,.5),this.onRender=M(),this.time_q5mkh0$_0=0,this.deltaT_wdv5hn$_0=0,this.frameIdx_2g8w1r$_0=0,this.fps_a02wsa$_0=60,this.scenes=M(),this.backgroundScene_ibwr5x$_0=new zf("backgroundScene"),this.delayedCallbacks_puvmt7$_0=M(),this.disposablePipelines_8be2vx$=M();var t,e=new Float64Array(25);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=.017;this.frameTimes_6eiyeg$_0=e}function sn(t,e){this.callOnFrame=t,this.callback=e}function an(){ln=this,this.KOOL_VERSION="0.6.0-200831.2256"}Si.$metadata$={kind:$,simpleName:"InputManager",interfaces:[]},Object.defineProperty(on.prototype,"time",{configurable:!0,get:function(){return this.time_q5mkh0$_0},set:function(t){this.time_q5mkh0$_0=t}}),Object.defineProperty(on.prototype,"deltaT",{configurable:!0,get:function(){return this.deltaT_wdv5hn$_0},set:function(t){this.deltaT_wdv5hn$_0=t}}),Object.defineProperty(on.prototype,"frameIdx",{configurable:!0,get:function(){return this.frameIdx_2g8w1r$_0},set:function(t){this.frameIdx_2g8w1r$_0=t}}),Object.defineProperty(on.prototype,"fps",{configurable:!0,get:function(){return this.fps_a02wsa$_0},set:function(t){this.fps_a02wsa$_0=t}}),Object.defineProperty(on.prototype,"backgroundPasses",{configurable:!0,get:function(){return this.backgroundScene_ibwr5x$_0.offscreenPasses}}),on.prototype.runDelayed_hd6vpk$=function(t,e){var i=this.delayedCallbacks_puvmt7$_0,n=new sn(this.frameIdx+t|0,e);i.add_11rb$(n)},on.prototype.disposePipeline_i7l2g2$=function(t){this.disposablePipelines_8be2vx$.add_11rb$(t)},on.prototype.addBackgroundRenderPass_m1c2kf$=function(t){this.backgroundScene_ibwr5x$_0.addOffscreenPass_m1c2kf$(t)},on.prototype.removeBackgroundRenderPass_m1c2kf$=function(t){this.backgroundScene_ibwr5x$_0.removeOffscreenPass_m1c2kf$(t)},on.prototype.render_14dthe$=function(t){var e,i,n,r,o;if(!this.delayedCallbacks_puvmt7$_0.isEmpty())for(e=L(I(this.delayedCallbacks_puvmt7$_0)).iterator();e.hasNext();){var s=e.next(),a=this.delayedCallbacks_puvmt7$_0.get_za3lpa$(s);a.callOnFrame<=this.frameIdx&&(a.callback(this),this.delayedCallbacks_puvmt7$_0.removeAt_za3lpa$(s))}this.deltaT=t,this.time=this.time+t,this.frameIdx=this.frameIdx+1|0,this.frameTimes_6eiyeg$_0[this.frameIdx%this.frameTimes_6eiyeg$_0.length]=t;var l=0;i=this.frameTimes_6eiyeg$_0;for(var u=0;u!==i.length;++u)l+=this.frameTimes_6eiyeg$_0[u];this.fps=this.frameTimes_6eiyeg$_0.length/l*.1+.9*this.fps,this.inputMgr.onNewFrame_cwprtu$(this),n=this.onRender;for(var p=0;p!==n.size;++p)this.onRender.get_za3lpa$(p)(this);for(r=L(I(this.scenes)).iterator();r.hasNext();){var c=r.next();this.scenes.get_za3lpa$(c).isVisible&&this.scenes.get_za3lpa$(c).processInput_aemszp$(this)}this.backgroundScene_ibwr5x$_0.renderScene_aemszp$(this),o=this.scenes;for(var h=0;h!==o.size;++h)this.scenes.get_za3lpa$(h).isVisible&&this.scenes.get_za3lpa$(h).renderScene_aemszp$(this)},sn.$metadata$={kind:$,simpleName:"DelayedCallback",interfaces:[]},an.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ln=null;function un(){return null===ln&&new an,ln}function pn(t,e){D.call(this,t,e),this.name="KoolException"}function cn(t,e){return e=e||Object.create(pn.prototype),pn.call(e,t,null),e}function hn(t,e,i,n){this.degree=t,this.factory_o8y0vc$_0=e,this.copy_1qqihf$_0=i,this.mix_rjp6wa$_0=n,this.ctrlPoints=M(),this.knots_ks2m93$_0=M(),this.d_c5f19u$_0=M()}function dn(t){hn.call(this,t,fn,_n,mn)}function fn(){return pr()}function _n(t,e){return e.set_czzhjp$(t),s}function mn(t,e,i,n,r){return r.x=e.x*t+n.x*i,r.y=e.y*t+n.y*i,s}function $n(){gn(),this.matrix=new Float32Array(9),this.setIdentity()}function yn(){vn=this,this.tmpMat_0=new $n}on.$metadata$={kind:$,simpleName:"KoolContext",interfaces:[]},pn.$metadata$={kind:$,simpleName:"KoolException",interfaces:[D]},hn.prototype.addInterpolationEndpoints=function(){var t;t=this.degree;for(var e=0;e<t;e++){this.ctrlPoints.add_wxm5ur$(0,q(this.ctrlPoints));var i=this.ctrlPoints,n=B(this.ctrlPoints);i.add_11rb$(n)}},hn.prototype.evaluate_f6p79m$=function(t,e){if(t<=0)this.copy_1qqihf$_0(q(this.ctrlPoints),e);else if(t>=1)this.copy_1qqihf$_0(B(this.ctrlPoints),e);else{this.checkTemps_dp4s6j$_0();var i=this.degree+t*(this.ctrlPoints.size-(2*this.degree|0)+1|0);this.deBoor_47z15v$_0(F(i),i,e)}return e},hn.prototype.deBoor_47z15v$_0=function(t,e,i){var n,r,o=this.degree,s=this.ctrlPoints.size-1|0,a=t<o?o:t>s?s:t;n=this.degree;for(var l=0;l<=n;l++)this.copy_1qqihf$_0(this.ctrlPoints.get_za3lpa$(l+a-this.degree|0),this.d_c5f19u$_0.get_za3lpa$(l));r=this.degree;for(var u=1;u<=r;u++)for(var p=this.degree;p>=u;p--){var c=(e-this.knots_ks2m93$_0.get_za3lpa$(p+a-this.degree|0))/(this.knots_ks2m93$_0.get_za3lpa$(p+1+a-u|0)-this.knots_ks2m93$_0.get_za3lpa$(p+a-this.degree|0));this.mix_rjp6wa$_0(1-c,this.d_c5f19u$_0.get_za3lpa$(p-1|0),c,this.d_c5f19u$_0.get_za3lpa$(p),this.d_c5f19u$_0.get_za3lpa$(p))}this.copy_1qqihf$_0(this.d_c5f19u$_0.get_za3lpa$(this.degree),i)},hn.prototype.checkTemps_dp4s6j$_0=function(){var t,e;if(this.knots_ks2m93$_0.size!==(this.ctrlPoints.size+this.degree|0)){this.knots_ks2m93$_0.clear(),t=this.ctrlPoints.size+this.degree|0;for(var i=0;i<t;i++)this.knots_ks2m93$_0.add_11rb$(i)}if(this.d_c5f19u$_0.size!==(this.degree+1|0)){this.d_c5f19u$_0.clear(),e=this.degree;for(var n=0;n<=e;n++){var r=this.d_c5f19u$_0,o=this.factory_o8y0vc$_0();r.add_11rb$(o)}}},hn.$metadata$={kind:$,simpleName:"BSpline",interfaces:[]},dn.$metadata$={kind:$,simpleName:"BSplineVec2f",interfaces:[hn]},$n.prototype.rotate_7b5o5w$=function(t,e,i,n){var r,o=e,s=i,a=n,l=o*o+s*s+a*a,u=A.sqrt(l),p=1-u;if(r=PN.FUZZY_EQ_D,!(A.abs(p)<=r)){var c=1/u;o*=c,s*=c,a*=c}var h=t*(U.PI/180),d=A.sin(h),f=A.cos(h),_=1-f,m=o*s,$=s*a,y=a*o,v=o*d,g=s*d,b=a*d;return this.set_24o109$(0,o*o*_+f),this.set_24o109$(3,m*_-b),this.set_24o109$(6,y*_+g),this.set_24o109$(1,m*_+b),this.set_24o109$(4,s*s*_+f),this.set_24o109$(7,$*_-v),this.set_24o109$(2,y*_-g),this.set_24o109$(5,$*_+v),this.set_24o109$(8,a*a*_+f),this},$n.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},$n.prototype.rotate_c240ly$=function(t,e,i,n,r){return r.set_d4zu7e$(this),r.rotate_7b5o5w$(t,e,i,n),r},$n.prototype.rotate_phvhih$=function(t,e,i){return this.rotate_c240ly$(t,e.x,e.y,e.z,i)},$n.prototype.transpose=function(){var t=this.get_za3lpa$(1);return this.set_24o109$(1,this.get_za3lpa$(3)),this.set_24o109$(3,t),t=this.get_za3lpa$(2),this.set_24o109$(2,this.get_za3lpa$(6)),this.set_24o109$(6,t),t=this.get_za3lpa$(5),this.set_24o109$(5,this.get_za3lpa$(7)),this.set_24o109$(7,t),this},$n.prototype.transpose_d4zu6j$=function(t){return t.set_24o109$(0,this.get_za3lpa$(0)),t.set_24o109$(1,this.get_za3lpa$(3)),t.set_24o109$(2,this.get_za3lpa$(6)),t.set_24o109$(3,this.get_za3lpa$(1)),t.set_24o109$(4,this.get_za3lpa$(4)),t.set_24o109$(5,this.get_za3lpa$(7)),t.set_24o109$(6,this.get_za3lpa$(2)),t.set_24o109$(7,this.get_za3lpa$(5)),t.set_24o109$(8,this.get_za3lpa$(8)),t},$n.prototype.invert=function(){gn().tmpMat_0;var t=this.invert_d4zu7e$(gn().tmpMat_0);return t&&this.set_d4zu7e$(gn().tmpMat_0),t},$n.prototype.invert_d4zu7e$=function(t){for(var e,i=0,n=0;n<=2;n++)i+=this.get_za3lpa$(n)*(this.get_za3lpa$(3+(n+1|0)%3|0)*this.get_za3lpa$(6+(n+2|0)%3|0)-this.get_za3lpa$(3+(n+2|0)%3|0)*this.get_za3lpa$(6+(n+1|0)%3|0));if(i>0){i=1/i;for(var r=0;r<=2;r++)for(var o=0;o<=2;o++)t.set_24o109$((3*r|0)+o|0,(this.get_za3lpa$(((o+1|0)%3*3|0)+(r+1|0)%3|0)*this.get_za3lpa$(((o+2|0)%3*3|0)+(r+2|0)%3|0)-this.get_za3lpa$(((o+1|0)%3*3|0)+(r+2|0)%3|0)*this.get_za3lpa$(((o+2|0)%3*3|0)+(r+1|0)%3|0))*i);e=!0}else e=!1;return e},$n.prototype.transform_5s4mqq$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2);return t.set_y2kzbl$(e,i,n)},$n.prototype.transform_2gj7b4$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2),e},$n.prototype.mul_d4zu7e$=function(t){return gn().tmpMat_0,this.mul_4w76o0$(t,gn().tmpMat_0),this.set_d4zu7e$(gn().tmpMat_0)},$n.prototype.mul_4w76o0$=function(t,e){for(var i=0;i<=2;i++)for(var n=0;n<=2;n++){for(var r=0,o=0;o<=2;o++)r+=this.get_za3lpa$(n+(3*o|0)|0)*t.get_za3lpa$((3*i|0)+o|0);e.set_24o109$((3*i|0)+n|0,r)}return e},$n.prototype.scale_y2kzbl$=function(t,e,i){for(var n=0;n<=2;n++)this.matrix[n]=this.matrix[n]*t,this.matrix[3+n|0]=this.matrix[3+n|0]*e,this.matrix[6+n|0]=this.matrix[6+n|0]*i;return this},$n.prototype.scale_czzhiu$=function(t){return this.scale_y2kzbl$(t.x,t.y,t.z)},$n.prototype.scale_g84k61$=function(t,e,i,n){for(var r=0;r<=2;r++)n.matrix[r]=this.matrix[r]*t,n.matrix[3+r|0]=this.matrix[3+r|0]*e,n.matrix[6+r|0]=this.matrix[6+r|0]*i;return n},$n.prototype.set_d4zu7e$=function(t){for(var e=0;e<=8;e++)this.set_24o109$(e,t.get_za3lpa$(e));return this},$n.prototype.set_hcyabg$=function(t){for(var e=0;e<=8;e++)this.set_24o109$(e,t.get_za3lpa$(e))},$n.prototype.setIdentity=function(){for(var t=1;t<=8;t++)this.set_24o109$(t,0);for(var e=0;e<=8;e+=4)this.set_24o109$(e,1);return this},$n.prototype.setRotate_7b5o5w$=function(t,e,i,n){return this.setIdentity(),this.rotate_7b5o5w$(t,e,i,n),this},$n.prototype.setRotate_czzhhz$=function(t){var e=t.w,i=t.x,n=t.y,r=t.z,o=e*e+i*i+n*n+r*r,s=A.sqrt(o);return s=1/(s*s),this.set_n0b4r3$(0,0,1-2*s*(n*n+r*r)),this.set_n0b4r3$(0,1,2*s*(i*n-r*e)),this.set_n0b4r3$(0,2,2*s*(i*r+n*e)),this.set_n0b4r3$(1,0,2*s*(i*n+r*e)),this.set_n0b4r3$(1,1,1-2*s*(i*i+r*r)),this.set_n0b4r3$(1,2,2*s*(n*r-i*e)),this.set_n0b4r3$(2,0,2*s*(i*r-n*e)),this.set_n0b4r3$(2,1,2*s*(n*r+i*e)),this.set_n0b4r3$(2,2,1-2*s*(i*i+n*n)),this},$n.prototype.getRotation_5s4mpv$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var r=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,o=(r+1|0)%3,s=(r+2|0)%3,a=this.get_vux9f0$(r,r)-this.get_vux9f0$(o,o)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_24o109$(r,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,o)-this.get_vux9f0$(o,s))*l,t.set_24o109$(o,(this.get_vux9f0$(o,r)+this.get_vux9f0$(r,o))*l),t.set_24o109$(s,(this.get_vux9f0$(s,r)+this.get_vux9f0$(r,s))*l)}return t},$n.prototype.get_za3lpa$=function(t){return this.matrix[t]},$n.prototype.get_vux9f0$=function(t,e){return this.matrix[(3*e|0)+t|0]},$n.prototype.set_24o109$=function(t,e){this.matrix[t]=e},$n.prototype.set_n0b4r3$=function(t,e,i){this.matrix[(3*e|0)+t|0]=i},$n.prototype.setColVec_ky00qo$=function(t,e){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z)},$n.prototype.getColVec_8irwuw$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e},$n.prototype.toBuffer_he122g$=function(t){return t.put_kgymra$(this.matrix,0,9),t.flip(),t},yn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vn=null;function gn(){return null===vn&&new yn,vn}function bn(){zn(),this.matrix_ntz8bm$_0=new Float64Array(16),this.offset_7ocvpo$_0=0,this.setIdentity()}function xn(){wn=this,this.tmpMatLock_0=new W,this.tmpMatA_0=new bn,this.tmpMatB_0=new bn}$n.$metadata$={kind:$,simpleName:"Mat3f",interfaces:[]},Object.defineProperty(bn.prototype,"matrix",{configurable:!0,get:function(){return this.matrix_ntz8bm$_0},set:function(t){this.matrix_ntz8bm$_0=t}}),Object.defineProperty(bn.prototype,"offset",{configurable:!0,get:function(){return this.offset_7ocvpo$_0},set:function(t){this.offset_7ocvpo$_0=t}}),bn.prototype.translate_yvo9jy$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[12+r|0]=this.matrix[12+r|0]+(this.matrix[r]*t+this.matrix[4+r|0]*e+this.matrix[8+r|0]*i)}return this},bn.prototype.translate_czzhiw$=function(t){return this.translate_yvo9jy$(t.x,t.y,t.z)},bn.prototype.translate_p4gs15$=function(t,e,i,n){for(var r=0;r<=11;r++)n.matrix[n.offset+r|0]=this.matrix[this.offset+r|0];for(var o=0;o<=3;o++){var s=this.offset+o|0;n.matrix[n.offset+12+o|0]=this.matrix[s]*t+this.matrix[4+s|0]*e+this.matrix[8+s|0]*i+this.matrix[12+s|0]}return n},bn.prototype.rotate_6y0v78$=function(t,e,i,n){return zn().tmpMatLock_0,zn().tmpMatA_0.setRotate_6y0v78$(t,e,i,n),this.set_d4zu6l$(this.mul_u47j3u$(zn().tmpMatA_0,zn().tmpMatB_0))},bn.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},bn.prototype.rotate_app323$=function(t,e,i,n,r){return zn().tmpMatLock_0,zn().tmpMatA_0.setRotate_6y0v78$(t,e,i,n),this.mul_u47j3u$(zn().tmpMatA_0,r)},bn.prototype.rotate_wwd6w1$=function(t,e,i){return this.rotate_app323$(t,e.x,e.y,e.z,i)},bn.prototype.scale_14dthe$=function(t){return this.scale_yvo9jy$(t,t,t)},bn.prototype.scale_yvo9jy$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[r]=this.matrix[r]*t,this.matrix[4+r|0]=this.matrix[4+r|0]*e,this.matrix[8+r|0]=this.matrix[8+r|0]*i}return this},bn.prototype.scale_czzhiw$=function(t){return this.scale_yvo9jy$(t.x,t.y,t.z)},bn.prototype.scale_p4gs15$=function(t,e,i,n){for(var r=0;r<=3;r++){var o=n.offset+r|0,s=this.offset+r|0;n.matrix[o]=this.matrix[s]*t,n.matrix[4+o|0]=this.matrix[4+s|0]*e,n.matrix[8+o|0]=this.matrix[8+s|0]*i,n.matrix[12+o|0]=this.matrix[12+s|0]}return n},bn.prototype.resetScale=function(){var t=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0),e=1/A.sqrt(t),i=this.get_vux9f0$(0,1)*this.get_vux9f0$(0,1)+this.get_vux9f0$(1,1)*this.get_vux9f0$(1,1)+this.get_vux9f0$(2,1)*this.get_vux9f0$(2,1),n=1/A.sqrt(i),r=this.get_vux9f0$(0,2)*this.get_vux9f0$(0,2)+this.get_vux9f0$(1,2)*this.get_vux9f0$(1,2)+this.get_vux9f0$(2,2)*this.get_vux9f0$(2,2),o=1/A.sqrt(r);return this.scale_yvo9jy$(e,n,o),this},bn.prototype.transpose=function(){return zn().tmpMatLock_0,this.set_d4zu6l$(this.transpose_d4zu6l$(zn().tmpMatA_0))},bn.prototype.transpose_d4zu6l$=function(t){for(var e=0;e<=3;e++){var i=(4*e|0)+this.offset|0;t.matrix[e+t.offset|0]=this.matrix[i],t.matrix[e+4+t.offset|0]=this.matrix[i+1|0],t.matrix[e+8+t.offset|0]=this.matrix[i+2|0],t.matrix[e+12+t.offset|0]=this.matrix[i+3|0]}return t},bn.prototype.invert_14dthe$=function(t){void 0===t&&(t=0),zn().tmpMatLock_0;var e=this.invert_23yxad$(zn().tmpMatA_0,t);return e&&this.set_d4zu6l$(zn().tmpMatA_0),e},bn.prototype.invert_23yxad$=function(t,e){void 0===e&&(e=0);var i=this.matrix[this.offset+0|0],n=this.matrix[this.offset+1|0],r=this.matrix[this.offset+2|0],o=this.matrix[this.offset+3|0],s=this.matrix[this.offset+4|0],a=this.matrix[this.offset+5|0],l=this.matrix[this.offset+6|0],u=this.matrix[this.offset+7|0],p=this.matrix[this.offset+8|0],c=this.matrix[this.offset+9|0],h=this.matrix[this.offset+10|0],d=this.matrix[this.offset+11|0],f=this.matrix[this.offset+12|0],_=this.matrix[this.offset+13|0],m=this.matrix[this.offset+14|0],$=this.matrix[this.offset+15|0],y=h*$,v=m*d,g=l*$,b=m*u,x=l*d,w=h*u,z=r*$,k=m*o,S=r*d,C=h*o,N=r*u,E=l*o,P=y*a+b*c+x*_-(v*a+g*c+w*_),T=v*n+z*c+C*_-(y*n+k*c+S*_),O=g*n+k*a+N*_-(b*n+z*a+E*_),M=w*n+S*a+E*c-(x*n+C*a+N*c),j=v*s+g*p+w*f-(y*s+b*p+x*f),R=y*i+k*p+S*f-(v*i+z*p+C*f),I=b*i+z*s+E*f-(g*i+k*s+N*f),L=x*i+C*s+N*p-(w*i+S*s+E*p),D=p*_,q=f*c,B=s*_,F=f*a,U=s*c,V=p*a,G=i*_,H=f*n,W=i*c,K=p*n,X=i*a,Y=s*n,Z=D*u+F*d+U*$-(q*u+B*d+V*$),J=q*o+G*d+K*$-(D*o+H*d+W*$),Q=B*o+H*u+X*$-(F*o+G*u+Y*$),tt=V*o+W*u+Y*d-(U*o+K*u+X*d),et=B*h+V*m+q*l-(U*m+D*l+F*h),it=W*m+D*r+H*h-(G*h+K*m+q*r),nt=G*l+Y*m+F*r-(X*m+B*r+H*l),rt=X*h+U*r+K*l-(W*l+Y*h+V*r),ot=i*P+s*T+p*O+f*M;if(A.abs(ot)<=e)return!1;var st=1/ot;return t.matrix[t.offset]=P*st,t.matrix[1+t.offset|0]=T*st,t.matrix[2+t.offset|0]=O*st,t.matrix[3+t.offset|0]=M*st,t.matrix[4+t.offset|0]=j*st,t.matrix[5+t.offset|0]=R*st,t.matrix[6+t.offset|0]=I*st,t.matrix[7+t.offset|0]=L*st,t.matrix[8+t.offset|0]=Z*st,t.matrix[9+t.offset|0]=J*st,t.matrix[10+t.offset|0]=Q*st,t.matrix[11+t.offset|0]=tt*st,t.matrix[12+t.offset|0]=et*st,t.matrix[13+t.offset|0]=it*st,t.matrix[14+t.offset|0]=nt*st,t.matrix[15+t.offset|0]=rt*st,!0},bn.prototype.transform_w1lst9$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),r=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_y2kzbl$(i,n,r)},bn.prototype.transform_a6wx89$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},bn.prototype.transform_5s4mpv$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),r=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_7b5o5w$(e,i,n,r)},bn.prototype.transform_uzu8ww$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},bn.prototype.transform_j7uy7i$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),r=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_yvo9jy$(i,n,r)},bn.prototype.transform_3odno2$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},bn.prototype.transform_5s4mpx$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),r=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_6y0v78$(e,i,n,r)},bn.prototype.transform_2x9ggw$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},bn.prototype.add_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=this.matrix[this.offset+e|0]+t.matrix[t.offset+e|0];return this},bn.prototype.mul_d4zu6l$=function(t){return zn().tmpMatLock_0,this.mul_u47j3u$(t,zn().tmpMatA_0),this.set_d4zu6l$(zn().tmpMatA_0)},bn.prototype.mul_u47j3u$=function(t,e){for(var i=0;i<=3;i++)for(var n=0;n<=3;n++){for(var r=0,o=0;o<=3;o++)r+=this.matrix[this.offset+n+(4*o|0)|0]*t.matrix[t.offset+(4*i|0)+o|0];e.matrix[e.offset+(4*i|0)+n|0]=r}return e},bn.prototype.set_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},bn.prototype.set_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},bn.prototype.set_d3e2cz$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.get_za3lpa$(e);return this},bn.prototype.setZero=function(){for(var t=0;t<=15;t++)this.matrix[this.offset+t|0]=0;return this},bn.prototype.setIdentity=function(){for(var t=1;t<=15;t++)this.matrix[this.offset+t|0]=0;return this.matrix[this.offset]=1,this.matrix[this.offset+5|0]=1,this.matrix[this.offset+10|0]=1,this.matrix[this.offset+15|0]=1,this},bn.prototype.setRotate_6y0v78$=function(t,e,i,n){var r=t*PN.DEG_2_RAD,o=e,s=i,a=n;this.matrix[this.offset+3|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1;var l=A.sin(r),u=A.cos(r);if(1===o&&0===s&&0===a)this.matrix[this.offset+5|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+6|0]=l,this.matrix[this.offset+9|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+0|0]=1;else if(0===o&&1===s&&0===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+8|0]=l,this.matrix[this.offset+2|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+5|0]=1;else if(0===o&&0===s&&1===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=u,this.matrix[this.offset+1|0]=l,this.matrix[this.offset+4|0]=-l,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=1;else{var p,c=o*o+s*s+a*a,h=A.sqrt(c);p=PN.FUZZY_EQ_D;var d=h-1;if(!(A.abs(d)<=p)){var f=1/h;o*=f,s*=f,a*=f}var _=1-u,m=o*s,$=s*a,y=a*o,v=o*l,g=s*l,b=a*l;this.matrix[this.offset+0|0]=o*o*_+u,this.matrix[this.offset+4|0]=m*_-b,this.matrix[this.offset+8|0]=y*_+g,this.matrix[this.offset+1|0]=m*_+b,this.matrix[this.offset+5|0]=s*s*_+u,this.matrix[this.offset+9|0]=$*_-v,this.matrix[this.offset+2|0]=y*_-g,this.matrix[this.offset+6|0]=$*_+v,this.matrix[this.offset+10|0]=a*a*_+u}return this},bn.prototype.setRotate_czzhi1$=function(t){var e=t.w,i=t.x,n=t.y,r=t.z,o=e*e+i*i+n*n+r*r,s=A.sqrt(o);return s=1/(s*s),this.set_224j3y$(0,0,1-2*s*(n*n+r*r)),this.set_224j3y$(0,1,2*s*(i*n-r*e)),this.set_224j3y$(0,2,2*s*(i*r+n*e)),this.set_224j3y$(0,3,0),this.set_224j3y$(1,0,2*s*(i*n+r*e)),this.set_224j3y$(1,1,1-2*s*(i*i+r*r)),this.set_224j3y$(1,2,2*s*(n*r-i*e)),this.set_224j3y$(1,3,0),this.set_224j3y$(2,0,2*s*(i*r-n*e)),this.set_224j3y$(2,1,2*s*(n*r+i*e)),this.set_224j3y$(2,2,1-2*s*(i*i+n*n)),this.set_224j3y$(2,3,0),this.set_224j3y$(3,0,0),this.set_224j3y$(3,1,0),this.set_224j3y$(3,2,0),this.set_224j3y$(3,3,1),this},bn.prototype.setLookAt_n440fu$=function(t,e,i){return this.setLookAt_enh5fx$_0(t.x,t.y,t.z,e.x,e.y,e.z,i.x,i.y,i.z)},bn.prototype.setLookAt_8ro9c0$=function(t,e,i){return this.setLookAt_enh5fx$_0(t.x,t.y,t.z,e.x,e.y,e.z,i.x,i.y,i.z)},bn.prototype.setLookAt_enh5fx$_0=function(t,e,i,n,r,o,s,a,l){var u=n-t,p=r-e,c=o-i,h=u*u+p*p+c*c,d=1/A.sqrt(h),f=(p*=d)*l-(c*=d)*a,_=c*s-(u*=d)*l,m=u*a-p*s,$=f*f+_*_+m*m,y=1/A.sqrt($),v=(_*=y)*c-(m*=y)*p,g=m*u-(f*=y)*c,b=f*p-_*u;return this.matrix[this.offset+0|0]=f,this.matrix[this.offset+1|0]=v,this.matrix[this.offset+2|0]=-u,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=_,this.matrix[this.offset+5|0]=g,this.matrix[this.offset+6|0]=-p,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=m,this.matrix[this.offset+9|0]=b,this.matrix[this.offset+10|0]=-c,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1,this.translate_yvo9jy$(-t,-e,-i)},bn.prototype.setOrthographic_w8lrqs$=function(t,e,i,n,r,o){return this.setOrthographic_15yvbs$(t,e,i,n,r,o)},bn.prototype.setOrthographic_15yvbs$=function(t,e,i,n,r,o){if(t===e)throw V("left == right");if(i===n)throw V("bottom == top");if(r===o)throw V("near == far");var s=1/(e-t),a=1/(n-i),l=1/(o-r),u=2*s,p=2*a,c=-2*l,h=-(e+t)*s,d=-(n+i)*a,f=-(o+r)*l;return this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=p,this.matrix[this.offset+10|0]=c,this.matrix[this.offset+12|0]=h,this.matrix[this.offset+13|0]=d,this.matrix[this.offset+14|0]=f,this.matrix[this.offset+15|0]=1,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+11|0]=0,this},bn.prototype.setPerspective_7b5o5w$=function(t,e,i,n){return this.setPerspective_6y0v78$(t,e,i,n)},bn.prototype.setPerspective_6y0v78$=function(t,e,i,n){var r=t*(U.PI/360),o=1/A.tan(r),s=1/(i-n);return this.matrix[this.offset+0|0]=o/e,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+5|0]=o,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=(n+i)*s,this.matrix[this.offset+11|0]=-1,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=2*n*i*s,this.matrix[this.offset+15|0]=0,this},bn.prototype.get_za3lpa$=function(t){return this.matrix[this.offset+t|0]},bn.prototype.get_vux9f0$=function(t,e){return this.matrix[this.offset+(4*e|0)+t|0]},bn.prototype.set_5wr77w$=function(t,e){this.matrix[this.offset+t|0]=e},bn.prototype.set_224j3y$=function(t,e,i){this.matrix[this.offset+(4*e|0)+t|0]=i},bn.prototype.setRow_umtdzk$=function(t,e,i){this.set_224j3y$(t,0,e.x),this.set_224j3y$(t,1,e.y),this.set_224j3y$(t,2,e.z),this.set_224j3y$(t,3,i)},bn.prototype.setRow_ky00rh$=function(t,e){this.set_224j3y$(t,0,e.x),this.set_224j3y$(t,1,e.y),this.set_224j3y$(t,2,e.z),this.set_224j3y$(t,3,e.w)},bn.prototype.getRow_8irwu3$=function(t,e){return e.x=this.get_vux9f0$(t,0),e.y=this.get_vux9f0$(t,1),e.z=this.get_vux9f0$(t,2),e.w=this.get_vux9f0$(t,3),e},bn.prototype.setCol_umtdzk$=function(t,e,i){this.set_224j3y$(0,t,e.x),this.set_224j3y$(1,t,e.y),this.set_224j3y$(2,t,e.z),this.set_224j3y$(3,t,i)},bn.prototype.setCol_ky00rh$=function(t,e){this.set_224j3y$(0,t,e.x),this.set_224j3y$(1,t,e.y),this.set_224j3y$(2,t,e.z),this.set_224j3y$(3,t,e.w)},bn.prototype.getCol_8irwu3$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e.w=this.get_vux9f0$(3,t),e},bn.prototype.getOrigin_5s4mqs$=function(t){return t.x=this.get_vux9f0$(0,3),t.y=this.get_vux9f0$(1,3),t.z=this.get_vux9f0$(2,3),t},bn.prototype.getRotation_5s4mpx$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var r=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,o=(r+1|0)%3,s=(r+2|0)%3,a=this.get_vux9f0$(r,r)-this.get_vux9f0$(o,o)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_5wr77w$(r,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,o)-this.get_vux9f0$(o,s))*l,t.set_5wr77w$(o,(this.get_vux9f0$(o,r)+this.get_vux9f0$(r,o))*l),t.set_5wr77w$(s,(this.get_vux9f0$(s,r)+this.get_vux9f0$(r,s))*l)}return t},bn.prototype.toBuffer_he122g$=function(t){for(var e=0;e<16;e++)t.put_mx4ult$(this.matrix[this.offset+e|0]);return t.flip(),t},bn.prototype.toList=function(){for(var t=M(),e=0;e<=15;e++){var i=this.matrix[this.offset+e|0];t.add_11rb$(i)}return t},bn.prototype.dump=function(){for(var t=0;t<=3;t++){for(var e=0;e<=3;e++)G(this.get_vux9f0$(t,e).toString()+" ");H()}},xn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var wn=null;function zn(){return null===wn&&new xn,wn}function kn(t){Nn(),void 0===t&&(t=32),bn.call(this),this.stackSize=t,this.stackIndex_51r8af$_0=0,this.matrix=new Float64Array(16*this.stackSize|0),this.setIdentity()}function Sn(){Cn=this,this.DEFAULT_STACK_SIZE=32}bn.$metadata$={kind:$,simpleName:"Mat4d",interfaces:[]},Sn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cn=null;function Nn(){return null===Cn&&new Sn,Cn}function En(){On(),this.matrix_cl37xc$_0=new Float32Array(16),this.offset_ix8w3y$_0=0,this.setIdentity()}function Pn(){Tn=this,this.tmpMatLock_0=new W,this.tmpMatA_0=new En,this.tmpMatB_0=new En}Object.defineProperty(kn.prototype,"stackIndex",{configurable:!0,get:function(){return this.stackIndex_51r8af$_0},set:function(t){this.stackIndex_51r8af$_0=t,this.offset=16*t|0}}),kn.prototype.push=function(){if(this.stackIndex>=this.stackSize)throw cn("Matrix stack overflow");for(var t=0;t<=15;t++)this.matrix[this.offset+16+t|0]=this.matrix[this.offset+t|0];return this.stackIndex=this.stackIndex+1|0,this},kn.prototype.pop=function(){if(this.stackIndex<=0)throw cn("Matrix stack underflow");return this.stackIndex=this.stackIndex-1|0,this},kn.prototype.reset=function(){return this.stackIndex=0,this.setIdentity(),this},kn.$metadata$={kind:$,simpleName:"Mat4dStack",interfaces:[bn]},Object.defineProperty(En.prototype,"matrix",{configurable:!0,get:function(){return this.matrix_cl37xc$_0},set:function(t){this.matrix_cl37xc$_0=t}}),Object.defineProperty(En.prototype,"offset",{configurable:!0,get:function(){return this.offset_ix8w3y$_0},set:function(t){this.offset_ix8w3y$_0=t}}),En.prototype.translate_y2kzbl$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[12+r|0]=this.matrix[12+r|0]+(this.matrix[r]*t+this.matrix[4+r|0]*e+this.matrix[8+r|0]*i)}return this},En.prototype.translate_czzhiu$=function(t){return this.translate_y2kzbl$(t.x,t.y,t.z)},En.prototype.translate_g84k6w$=function(t,e,i,n){for(var r=0;r<=11;r++)n.matrix[n.offset+r|0]=this.matrix[this.offset+r|0];for(var o=0;o<=3;o++){var s=this.offset+o|0;n.matrix[n.offset+12+o|0]=this.matrix[s]*t+this.matrix[4+s|0]*e+this.matrix[8+s|0]*i+this.matrix[12+s|0]}return n},En.prototype.rotate_7b5o5w$=function(t,e,i,n){return On().tmpMatLock_0,On().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.set_d4zu6j$(this.mul_93v2ma$(On().tmpMatA_0,On().tmpMatB_0))},En.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},En.prototype.rotate_c240mt$=function(t,e,i,n,r){return On().tmpMatLock_0,On().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.mul_93v2ma$(On().tmpMatA_0,r)},En.prototype.rotate_phvhhm$=function(t,e,i){return this.rotate_c240mt$(t,e.x,e.y,e.z,i)},En.prototype.rotate_d4zu7e$=function(t){return On().tmpMatLock_0,On().tmpMatA_0.setIdentity().setRotation_d4zu7e$(t),this.set_d4zu6j$(this.mul_93v2ma$(On().tmpMatA_0,On().tmpMatB_0)),s},En.prototype.scale_mx4ult$=function(t){return this.scale_y2kzbl$(t,t,t)},En.prototype.scale_y2kzbl$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[r]=this.matrix[r]*t,this.matrix[4+r|0]=this.matrix[4+r|0]*e,this.matrix[8+r|0]=this.matrix[8+r|0]*i}return this},En.prototype.scale_czzhiu$=function(t){return this.scale_y2kzbl$(t.x,t.y,t.z)},En.prototype.scale_g84k6w$=function(t,e,i,n){for(var r=0;r<=3;r++){var o=n.offset+r|0,s=this.offset+r|0;n.matrix[o]=this.matrix[s]*t,n.matrix[4+o|0]=this.matrix[4+s|0]*e,n.matrix[8+o|0]=this.matrix[8+s|0]*i,n.matrix[12+o|0]=this.matrix[12+s|0]}return n},En.prototype.resetScale=function(){var t=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0),e=1/A.sqrt(t),i=this.get_vux9f0$(0,1)*this.get_vux9f0$(0,1)+this.get_vux9f0$(1,1)*this.get_vux9f0$(1,1)+this.get_vux9f0$(2,1)*this.get_vux9f0$(2,1),n=1/A.sqrt(i),r=this.get_vux9f0$(0,2)*this.get_vux9f0$(0,2)+this.get_vux9f0$(1,2)*this.get_vux9f0$(1,2)+this.get_vux9f0$(2,2)*this.get_vux9f0$(2,2),o=1/A.sqrt(r);return this.scale_y2kzbl$(e,n,o),this},En.prototype.transpose=function(){return On().tmpMatLock_0,this.set_d4zu6j$(this.transpose_d4zu6j$(On().tmpMatA_0))},En.prototype.transpose_d4zu6j$=function(t){for(var e=0;e<=3;e++){var i=(4*e|0)+this.offset|0;t.matrix[e+t.offset|0]=this.matrix[i],t.matrix[e+4+t.offset|0]=this.matrix[i+1|0],t.matrix[e+8+t.offset|0]=this.matrix[i+2|0],t.matrix[e+12+t.offset|0]=this.matrix[i+3|0]}return t},En.prototype.invert_mx4ult$=function(t){void 0===t&&(t=0),On().tmpMatLock_0;var e=this.invert_8kv2li$(On().tmpMatA_0,t);return e&&this.set_d4zu6j$(On().tmpMatA_0),e},En.prototype.invert_8kv2li$=function(t,e){void 0===e&&(e=0);var i=this.matrix[this.offset+0|0],n=this.matrix[this.offset+1|0],r=this.matrix[this.offset+2|0],o=this.matrix[this.offset+3|0],s=this.matrix[this.offset+4|0],a=this.matrix[this.offset+5|0],l=this.matrix[this.offset+6|0],u=this.matrix[this.offset+7|0],p=this.matrix[this.offset+8|0],c=this.matrix[this.offset+9|0],h=this.matrix[this.offset+10|0],d=this.matrix[this.offset+11|0],f=this.matrix[this.offset+12|0],_=this.matrix[this.offset+13|0],m=this.matrix[this.offset+14|0],$=this.matrix[this.offset+15|0],y=h*$,v=m*d,g=l*$,b=m*u,x=l*d,w=h*u,z=r*$,k=m*o,S=r*d,C=h*o,N=r*u,E=l*o,P=y*a+b*c+x*_-(v*a+g*c+w*_),T=v*n+z*c+C*_-(y*n+k*c+S*_),O=g*n+k*a+N*_-(b*n+z*a+E*_),M=w*n+S*a+E*c-(x*n+C*a+N*c),j=v*s+g*p+w*f-(y*s+b*p+x*f),R=y*i+k*p+S*f-(v*i+z*p+C*f),I=b*i+z*s+E*f-(g*i+k*s+N*f),L=x*i+C*s+N*p-(w*i+S*s+E*p),D=p*_,q=f*c,B=s*_,F=f*a,U=s*c,V=p*a,G=i*_,H=f*n,W=i*c,K=p*n,X=i*a,Y=s*n,Z=D*u+F*d+U*$-(q*u+B*d+V*$),J=q*o+G*d+K*$-(D*o+H*d+W*$),Q=B*o+H*u+X*$-(F*o+G*u+Y*$),tt=V*o+W*u+Y*d-(U*o+K*u+X*d),et=B*h+V*m+q*l-(U*m+D*l+F*h),it=W*m+D*r+H*h-(G*h+K*m+q*r),nt=G*l+Y*m+F*r-(X*m+B*r+H*l),rt=X*h+U*r+K*l-(W*l+Y*h+V*r),ot=i*P+s*T+p*O+f*M;if(A.abs(ot)<=e)return!1;var st=1/ot;return t.matrix[t.offset]=P*st,t.matrix[1+t.offset|0]=T*st,t.matrix[2+t.offset|0]=O*st,t.matrix[3+t.offset|0]=M*st,t.matrix[4+t.offset|0]=j*st,t.matrix[5+t.offset|0]=R*st,t.matrix[6+t.offset|0]=I*st,t.matrix[7+t.offset|0]=L*st,t.matrix[8+t.offset|0]=Z*st,t.matrix[9+t.offset|0]=J*st,t.matrix[10+t.offset|0]=Q*st,t.matrix[11+t.offset|0]=tt*st,t.matrix[12+t.offset|0]=et*st,t.matrix[13+t.offset|0]=it*st,t.matrix[14+t.offset|0]=nt*st,t.matrix[15+t.offset|0]=rt*st,!0},En.prototype.transform_w1lst9$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),r=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_y2kzbl$(i,n,r)},En.prototype.transform_a6wx89$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},En.prototype.transform_5s4mpv$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),r=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_7b5o5w$(e,i,n,r)},En.prototype.transform_uzu8ww$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},En.prototype.add_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=this.matrix[this.offset+e|0]+t.matrix[t.offset+e|0];return this},En.prototype.mul_d4zu6j$=function(t){return On().tmpMatLock_0,this.mul_93v2ma$(t,On().tmpMatA_0),this.set_d4zu6j$(On().tmpMatA_0)},En.prototype.mul_93v2ma$=function(t,e){for(var i=0;i<=3;i++)for(var n=0;n<=3;n++){for(var r=0,o=0;o<=3;o++)r+=this.matrix[this.offset+n+(4*o|0)|0]*t.matrix[t.offset+(4*i|0)+o|0];e.matrix[e.offset+(4*i|0)+n|0]=r}return e},En.prototype.set_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},En.prototype.set_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},En.prototype.set_hcyabg$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.get_za3lpa$(e);return this},En.prototype.setZero=function(){for(var t=0;t<=15;t++)this.matrix[this.offset+t|0]=0;return this},En.prototype.setIdentity=function(){for(var t=1;t<=15;t++)this.matrix[this.offset+t|0]=0;return this.matrix[this.offset]=1,this.matrix[this.offset+5|0]=1,this.matrix[this.offset+10|0]=1,this.matrix[this.offset+15|0]=1,this},En.prototype.setRotate_7b5o5w$=function(t,e,i,n){var r=t*PN.DEG_2_RAD,o=e,s=i,a=n;this.matrix[this.offset+3|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1;var l=A.sin(r),u=A.cos(r);if(1===o&&0===s&&0===a)this.matrix[this.offset+5|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+6|0]=l,this.matrix[this.offset+9|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+0|0]=1;else if(0===o&&1===s&&0===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+8|0]=l,this.matrix[this.offset+2|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+5|0]=1;else if(0===o&&0===s&&1===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=u,this.matrix[this.offset+1|0]=l,this.matrix[this.offset+4|0]=-l,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=1;else{var p,c=o*o+s*s+a*a,h=A.sqrt(c);p=PN.FUZZY_EQ_F;var d=h-1;if(!(A.abs(d)<=p)){var f=1/h;o*=f,s*=f,a*=f}var _=1-u,m=o*s,$=s*a,y=a*o,v=o*l,g=s*l,b=a*l;this.matrix[this.offset+0|0]=o*o*_+u,this.matrix[this.offset+4|0]=m*_-b,this.matrix[this.offset+8|0]=y*_+g,this.matrix[this.offset+1|0]=m*_+b,this.matrix[this.offset+5|0]=s*s*_+u,this.matrix[this.offset+9|0]=$*_-v,this.matrix[this.offset+2|0]=y*_-g,this.matrix[this.offset+6|0]=$*_+v,this.matrix[this.offset+10|0]=a*a*_+u}return this},En.prototype.setRotate_czzhhz$=function(t){var e=t.w,i=t.x,n=t.y,r=t.z,o=e*e+i*i+n*n+r*r,s=A.sqrt(o);return s=1/(s*s),this.set_n0b4r3$(0,0,1-2*s*(n*n+r*r)),this.set_n0b4r3$(0,1,2*s*(i*n-r*e)),this.set_n0b4r3$(0,2,2*s*(i*r+n*e)),this.set_n0b4r3$(0,3,0),this.set_n0b4r3$(1,0,2*s*(i*n+r*e)),this.set_n0b4r3$(1,1,1-2*s*(i*i+r*r)),this.set_n0b4r3$(1,2,2*s*(n*r-i*e)),this.set_n0b4r3$(1,3,0),this.set_n0b4r3$(2,0,2*s*(i*r-n*e)),this.set_n0b4r3$(2,1,2*s*(n*r+i*e)),this.set_n0b4r3$(2,2,1-2*s*(i*i+n*n)),this.set_n0b4r3$(2,3,0),this.set_n0b4r3$(3,0,0),this.set_n0b4r3$(3,1,0),this.set_n0b4r3$(3,2,0),this.set_n0b4r3$(3,3,1),this},En.prototype.setRotation_d4zu7e$=function(t){for(var e=0;e<=2;e++)for(var i=0;i<=2;i++)this.set_n0b4r3$(e,i,t.get_vux9f0$(e,i));var n=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0)+this.get_vux9f0$(3,0)*this.get_vux9f0$(3,0),r=1/A.sqrt(n);this.scale_y2kzbl$(r,r,r)},En.prototype.setRotation_d4zu6j$=function(t){for(var e=0;e<=2;e++)for(var i=0;i<=2;i++)this.set_n0b4r3$(e,i,t.get_vux9f0$(e,i));var n=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0)+this.get_vux9f0$(3,0)*this.get_vux9f0$(3,0),r=1/A.sqrt(n);this.scale_y2kzbl$(r,r,r)},En.prototype.setLookAt_n440fu$=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n*n+r*r+o*o,a=1/A.sqrt(s);n*=a,o*=a;var l=(r*=a)*i.z-o*i.y,u=o*i.x-n*i.z,p=n*i.y-r*i.x,c=l*l+u*u+p*p,h=1/A.sqrt(c),d=(u*=h)*o-(p*=h)*r,f=p*n-(l*=h)*o,_=l*r-u*n;return this.matrix[this.offset+0|0]=l,this.matrix[this.offset+1|0]=d,this.matrix[this.offset+2|0]=-n,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=u,this.matrix[this.offset+5|0]=f,this.matrix[this.offset+6|0]=-r,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=p,this.matrix[this.offset+9|0]=_,this.matrix[this.offset+10|0]=-o,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1,this.translate_y2kzbl$(-t.x,-t.y,-t.z)},En.prototype.setOrthographic_w8lrqs$=function(t,e,i,n,r,o){if(t===e)throw V("left == right");if(i===n)throw V("bottom == top");if(r===o)throw V("near == far");var s=1/(e-t),a=1/(n-i),l=1/(o-r),u=2*s,p=2*a,c=-2*l,h=-(e+t)*s,d=-(n+i)*a,f=-(o+r)*l;return this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=p,this.matrix[this.offset+10|0]=c,this.matrix[this.offset+12|0]=h,this.matrix[this.offset+13|0]=d,this.matrix[this.offset+14|0]=f,this.matrix[this.offset+15|0]=1,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+11|0]=0,this},En.prototype.setPerspective_7b5o5w$=function(t,e,i,n){var r=t*(U.PI/360),o=1/A.tan(r),s=1/(i-n);return this.matrix[this.offset+0|0]=o/e,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+5|0]=o,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=(n+i)*s,this.matrix[this.offset+11|0]=-1,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=2*n*i*s,this.matrix[this.offset+15|0]=0,this},En.prototype.get_za3lpa$=function(t){return this.matrix[this.offset+t|0]},En.prototype.get_vux9f0$=function(t,e){return this.matrix[this.offset+(4*e|0)+t|0]},En.prototype.set_24o109$=function(t,e){this.matrix[this.offset+t|0]=e},En.prototype.set_n0b4r3$=function(t,e,i){this.matrix[this.offset+(4*e|0)+t|0]=i},En.prototype.setRow_gdg6t7$=function(t,e,i){this.set_n0b4r3$(t,0,e.x),this.set_n0b4r3$(t,1,e.y),this.set_n0b4r3$(t,2,e.z),this.set_n0b4r3$(t,3,i)},En.prototype.setRow_ky00rj$=function(t,e){this.set_n0b4r3$(t,0,e.x),this.set_n0b4r3$(t,1,e.y),this.set_n0b4r3$(t,2,e.z),this.set_n0b4r3$(t,3,e.w)},En.prototype.getRow_8irwu1$=function(t,e){return e.x=this.get_vux9f0$(t,0),e.y=this.get_vux9f0$(t,1),e.z=this.get_vux9f0$(t,2),e.w=this.get_vux9f0$(t,3),e},En.prototype.setCol_gdg6t7$=function(t,e,i){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z),this.set_n0b4r3$(3,t,i)},En.prototype.setCol_ky00rj$=function(t,e){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z),this.set_n0b4r3$(3,t,e.w)},En.prototype.getCol_8irwu1$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e.w=this.get_vux9f0$(3,t),e},En.prototype.getOrigin_5s4mqq$=function(t){return t.x=this.get_vux9f0$(0,3),t.y=this.get_vux9f0$(1,3),t.z=this.get_vux9f0$(2,3),t},En.prototype.getOrientation_d4zu7e$=function(t){return t.set_n0b4r3$(0,0,this.get_vux9f0$(0,0)),t.set_n0b4r3$(0,1,this.get_vux9f0$(0,1)),t.set_n0b4r3$(0,2,this.get_vux9f0$(0,2)),t.set_n0b4r3$(1,0,this.get_vux9f0$(1,0)),t.set_n0b4r3$(1,1,this.get_vux9f0$(1,1)),t.set_n0b4r3$(1,2,this.get_vux9f0$(1,2)),t.set_n0b4r3$(2,0,this.get_vux9f0$(2,0)),t.set_n0b4r3$(2,1,this.get_vux9f0$(2,1)),t.set_n0b4r3$(2,2,this.get_vux9f0$(2,2)),t},En.prototype.getOrientationTransposed_d4zu7e$=function(t){return t.set_n0b4r3$(0,0,this.get_vux9f0$(0,0)),t.set_n0b4r3$(0,1,this.get_vux9f0$(1,0)),t.set_n0b4r3$(0,2,this.get_vux9f0$(2,0)),t.set_n0b4r3$(1,0,this.get_vux9f0$(0,1)),t.set_n0b4r3$(1,1,this.get_vux9f0$(1,1)),t.set_n0b4r3$(1,2,this.get_vux9f0$(2,1)),t.set_n0b4r3$(2,0,this.get_vux9f0$(0,2)),t.set_n0b4r3$(2,1,this.get_vux9f0$(1,2)),t.set_n0b4r3$(2,2,this.get_vux9f0$(2,2)),t},En.prototype.getRotation_5s4mpv$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var r=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,o=(r+1|0)%3,s=(r+2|0)%3,a=this.get_vux9f0$(r,r)-this.get_vux9f0$(o,o)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_24o109$(r,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,o)-this.get_vux9f0$(o,s))*l,t.set_24o109$(o,(this.get_vux9f0$(o,r)+this.get_vux9f0$(r,o))*l),t.set_24o109$(s,(this.get_vux9f0$(s,r)+this.get_vux9f0$(r,s))*l)}return t},En.prototype.toBuffer_he122g$=function(t){return t.put_kgymra$(this.matrix,this.offset,16),t.flip(),t},En.prototype.toList=function(){for(var t=M(),e=0;e<=15;e++){var i=this.matrix[this.offset+e|0];t.add_11rb$(i)}return t},En.prototype.dump=function(){for(var t=0;t<=3;t++){for(var e=0;e<=3;e++)G(this.get_vux9f0$(t,e).toString()+" ");H()}},Pn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Tn=null;function On(){return null===Tn&&new Pn,Tn}function Mn(t){Fn(),void 0===t&&(t=32),En.call(this),this.stackSize=t,this.stackIndex_rxi7m3$_0=0,this.matrix=new Float32Array(16*this.stackSize|0),this.setIdentity()}function jn(){Bn=this,this.DEFAULT_STACK_SIZE=32}En.$metadata$={kind:$,simpleName:"Mat4f",interfaces:[]},jn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var An,Rn,In,Ln,Dn,qn,Bn=null;function Fn(){return null===Bn&&new jn,Bn}function Un(t,e){var i=A.max(t,e),n=A.log2(i);return F(A.floor(n))+1|0}function Vn(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=i.x-t.x,a=i.y-t.y,l=i.z-t.z,u=n*s+r*a+o*l,p=(n*n+r*r+o*o)*(s*s+a*a+l*l)-u*u;return.5*A.sqrt(p)}function Gn(t,e,i){var n=t.distance_czzhiu$(e),r=e.distance_czzhiu$(i),o=i.distance_czzhiu$(t),s=(n+r+o)/2,a=n*r*o/(8*(s-n)*(s-r)*(s-o));return A.abs(a)}function Hn(t,e){return t.get_za3lpa$(e)}function Wn(t,e,i){var n=t.get_za3lpa$(i);return t.set_wxm5ur$(i,t.get_za3lpa$(e)),t.set_wxm5ur$(e,n),s}function Kn(t,e,i,n){Xn(t,e.first,e.last,i,Hn,n,Wn)}function Xn(t,e,i,n,r,o,s){for(var a=e,l=i;l>a;){if((l-a|0)>600){var u=l-a+1|0,p=n-a+1|0,c=A.log(u),h=2*c/3,d=.5*A.exp(h),f=c*d*(u-d)/u,_=p-u/2,m=.5*A.sqrt(f)*A.sign(_),$=a,y=F(n-p*d/u+m),v=A.max($,y),g=l,b=F(n+(u-p|0)*d/u+m);Xn(t,v,A.min(g,b),n,r,o,s)}var x=r(t,n),w=a,z=l;for(s(t,a,n),o(r(t,l),x)>0&&s(t,l,a);w<z;){for(s(t,w,z),w=w+1|0,z=z-1|0;o(r(t,w),x)<0;)w=w+1|0;for(;z>=0&&o(r(t,z),x)>0;)z=z-1|0}0===o(r(t,a),x)?s(t,a,z):s(t,z=z+1|0,l),z<=n&&(a=z+1|0),n<=z&&(l=z-1|0)}}function Yn(){this.p=Mr(),this.n=Ar(Er().Y_AXIS)}function Zn(t,e,i){var n=Jn(t,e,i);return A.sqrt(n)}function Jn(t,e,i){return Qn(t.x,t.y,t.z,e,i)}function Qn(t,e,i,n,r){var o,s,a,l=(t*r.x+e*r.y+i*r.z-n.times_czzhiu$(r))/r.times_czzhiu$(r);return l<=0?(o=n.x-t,s=n.y-e,a=n.z-i):(o=r.x*l+n.x-t,s=r.y*l+n.y-e,a=r.z*l+n.z-i),o*o+s*s+a*a}function tr(){}function er(t){this.x_i5bv4$_0=t,this.y_i5bu9$_0=362436e3,this.z_i5bte$_0=521288629,this.c_i5cd7$_0=7654321}function ir(){this.origin=Mr(),this.direction=Mr()}function nr(){this.ray=new ir,this.intHitPosition_0=Mr(),this.intHitPositionLocal_0=Mr(),this.hitNode_s1zft8$_0=null,this.hitDistanceSqr_fy7zgf$_0=nt.MAX_VALUE}function rr(t,e){ar(),this.fields=new Float32Array(2),this.fields[0]=t,this.fields[1]=e}function or(){sr=this,this.ZERO=lr(0),this.X_AXIS=new rr(1,0),this.Y_AXIS=new rr(0,1),this.NEG_X_AXIS=new rr(-1,0),this.NEG_Y_AXIS=new rr(0,-1)}Object.defineProperty(Mn.prototype,"stackIndex",{configurable:!0,get:function(){return this.stackIndex_rxi7m3$_0},set:function(t){this.stackIndex_rxi7m3$_0=t,this.offset=16*t|0}}),Mn.prototype.push=function(){if(this.stackIndex>=this.stackSize)throw cn("Matrix stack overflow");for(var t=0;t<=15;t++)this.matrix[this.offset+16+t|0]=this.matrix[this.offset+t|0];return this.stackIndex=this.stackIndex+1|0,this},Mn.prototype.pop=function(){if(this.stackIndex<=0)throw cn("Matrix stack underflow");return this.stackIndex=this.stackIndex-1|0,this},Mn.prototype.reset=function(){return this.stackIndex=0,this.setIdentity(),this},Mn.$metadata$={kind:$,simpleName:"Mat4fStack",interfaces:[En]},Yn.prototype.intersectionPoint_lplggz$=function(t,e){var i,n=this.n.dot_czzhiu$(t.direction);if(i=PN.FUZZY_EQ_F,!(A.abs(n)<=i)){var r=this.p.subtract_2gj7b4$(t.origin,e).dot_czzhiu$(this.n)/n;return e.set_czzhiu$(t.direction).scale_mx4ult$(r).add_czzhiu$(t.origin),r>=0}return!1},Yn.prototype.toVec4=function(){return this.toVec4_5s4mpv$(no())},Yn.prototype.toVec4_5s4mpv$=function(t){return t.x=this.n.x,t.y=this.n.y,t.z=this.n.z,t.w=this.n.times_czzhiu$(this.p),t},Yn.$metadata$={kind:$,simpleName:"Plane",interfaces:[]},tr.prototype.nextPoints_za3lpa$=function(t){for(var e=M(),i=1;i<=t;i++){var n=this.nextPoint();e.add_11rb$(n)}return e},tr.$metadata$={kind:$,simpleName:"PointDistribution",interfaces:[]},er.prototype.randomI=function(){this.x_i5bv4$_0=12345+(69069*this.x_i5bv4$_0|0)|0,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0<<13,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0>>17,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0<<5;var t=Q.multiply(e.Long.fromInt(this.z_i5bte$_0)).add(e.Long.fromInt(this.c_i5cd7$_0));return this.c_i5cd7$_0=t.shiftRight(32).toInt(),this.z_i5bte$_0=t.toInt(),this.x_i5bv4$_0+this.y_i5bu9$_0+this.z_i5bte$_0|0},er.prototype.randomI_vux9f0$=function(t,e){return tt(this.randomI())%(e-t+1|0)+t|0},er.prototype.randomI_n8acyv$=function(t){return this.randomI_vux9f0$(t.first,t.last)},er.prototype.randomF=function(){return tt(this.randomI())/2147483647},er.prototype.randomF_dleff0$=function(t,e){return this.randomF()*(e-t)+t},er.prototype.randomD=function(){var t=et(e.Long.fromInt(this.randomI())).shiftLeft(32).or(et(e.Long.fromInt(this.randomI())));return et(t).toNumber()/it.toNumber()},er.prototype.randomD_lu1900$=function(t,e){return this.randomD()*(e-t)+t},er.$metadata$={kind:$,simpleName:"Random",interfaces:[]},ir.prototype.set_nvyeur$=function(t){this.origin.set_czzhiu$(t.origin),this.direction.set_czzhiu$(t.direction)},ir.prototype.setFromLookAt_4lfkt4$=function(t,e){this.origin.set_czzhiu$(t),this.direction.set_czzhiu$(e).subtract_czzhiu$(t).norm()},ir.prototype.distanceToPoint_czzhiu$=function(t){return Zn(t,this.origin,this.direction)},ir.prototype.sqrDistanceToPoint_czzhiu$=function(t){return Jn(t,this.origin,this.direction)},ir.prototype.sqrDistanceToPoint_y2kzbl$=function(t,e,i){return Qn(t,e,i,this.origin,this.direction)},ir.prototype.transformBy_d4zu6j$=function(t){t.transform_w1lst9$(this.origin),t.transform_w1lst9$(this.direction,0).norm()},ir.prototype.transformBy_d4zu6l$=function(t){t.transform_w1lst9$(this.origin),t.transform_w1lst9$(this.direction,0).norm()},ir.prototype.toString=function(){return"{origin="+this.origin+", direction="+this.direction+"}"},ir.$metadata$={kind:$,simpleName:"Ray",interfaces:[]},Object.defineProperty(nr.prototype,"hitPosition",{configurable:!0,get:function(){return this.intHitPosition_0}}),Object.defineProperty(nr.prototype,"hitPositionLocal",{configurable:!0,get:function(){return this.intHitPositionLocal_0}}),Object.defineProperty(nr.prototype,"hitNode",{configurable:!0,get:function(){return this.hitNode_s1zft8$_0},set:function(t){this.hitNode_s1zft8$_0=t}}),Object.defineProperty(nr.prototype,"hitDistanceSqr",{configurable:!0,get:function(){return this.hitDistanceSqr_fy7zgf$_0},set:function(t){this.hitDistanceSqr_fy7zgf$_0=t}}),Object.defineProperty(nr.prototype,"isHit",{configurable:!0,get:function(){return this.hitDistanceSqr<nt.MAX_VALUE}}),nr.prototype.clear=function(){this.intHitPosition_0.set_czzhiu$(Er().ZERO),this.intHitPositionLocal_0.set_czzhiu$(Er().ZERO),this.hitNode=null,this.hitDistanceSqr=nt.MAX_VALUE},nr.prototype.setHit_vfk0k2$=function(t,e){this.intHitPosition_0.set_czzhiu$(this.ray.direction).scale_mx4ult$(e).add_czzhiu$(this.ray.origin),this.setHit_ulhqnp$(t,this.intHitPosition_0)},nr.prototype.setHit_ulhqnp$=function(t,e){this.intHitPosition_0.set_czzhiu$(e),this.intHitPositionLocal_0.set_czzhiu$(e),this.hitNode=t,this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin)},nr.prototype.transformBy_d4zu6j$=function(t){this.ray.transformBy_d4zu6j$(t),this.isHit&&(t.transform_w1lst9$(this.intHitPosition_0),this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin))},nr.prototype.transformBy_d4zu6l$=function(t){this.ray.transformBy_d4zu6l$(t),this.isHit&&(t.transform_w1lst9$(this.intHitPosition_0),this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin))},nr.$metadata$={kind:$,simpleName:"RayTest",interfaces:[]},Object.defineProperty(rr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(rr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),rr.prototype.add_q2ruao$=function(t,e){return e.set_czzhjp$(this).add_czzhjp$(t)},rr.prototype.distance_czzhjp$=function(t){var e=this.sqrDistance_czzhjp$(t);return A.sqrt(e)},rr.prototype.dot_czzhjp$=function(t){return this.x*t.x+this.y*t.y},rr.prototype.isFuzzyEqual_rnua8g$=function(t,e){void 0===e&&(e=In);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}return n},rr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},rr.prototype.mix_5uckat$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i},rr.prototype.mul_q2ruao$=function(t,e){return e.set_czzhjp$(this).mul_czzhjp$(t)},rr.prototype.norm_5s4mrl$=function(t){return t.set_czzhjp$(this).norm()},rr.prototype.rotate_749b9g$=function(t,e){return e.set_czzhjp$(this).rotate_mx4ult$(t)},rr.prototype.scale_749b9g$=function(t,e){return e.set_czzhjp$(this).scale_mx4ult$(t)},rr.prototype.sqrDistance_czzhjp$=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},rr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y},rr.prototype.subtract_q2ruao$=function(t,e){return e.set_czzhjp$(this).subtract_czzhjp$(t)},rr.prototype.get_za3lpa$=function(t){return this.fields[t]},rr.prototype.times_czzhjp$=function(t){return this.dot_czzhjp$(t)},rr.prototype.toString=function(){return"("+this.x+", "+this.y+")"},rr.prototype.toVec2d=function(){return new hr(this.x,this.y)},rr.prototype.toMutableVec2d=function(){return this.toMutableVec2d_5s4mrn$(yr())},rr.prototype.toMutableVec2d_5s4mrn$=function(t){return t.set_lu1900$(this.x,this.y)},rr.prototype.equals=function(t){return this===t||!!e.isType(t,rr)&&this.x===t.x&&this.y===t.y},rr.prototype.hashCode=function(){var t=rt(this.x);return t=(31*t|0)+rt(this.y)|0},or.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var sr=null;function ar(){return null===sr&&new or,sr}function lr(t,e){return e=e||Object.create(rr.prototype),rr.call(e,t,t),e}function ur(t,e){rr.call(this,t,e)}function pr(t){return t=t||Object.create(ur.prototype),ur.call(t,0,0),t}function cr(t,e){return e=e||Object.create(ur.prototype),ur.call(e,t.x,t.y),e}function hr(t,e){_r(),this.fields=new Float64Array(2),this.fields[0]=t,this.fields[1]=e}function dr(){fr=this,this.ZERO=mr(0),this.X_AXIS=new hr(1,0),this.Y_AXIS=new hr(0,1),this.NEG_X_AXIS=new hr(-1,0),this.NEG_Y_AXIS=new hr(0,-1)}rr.$metadata$={kind:$,simpleName:"Vec2f",interfaces:[]},Object.defineProperty(ur.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(ur.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(ur.prototype,"array",{configurable:!0,get:function(){return this.fields}}),ur.prototype.add_czzhjp$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},ur.prototype.mul_czzhjp$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},ur.prototype.norm=function(){return this.scale_mx4ult$(1/this.length())},ur.prototype.rotate_mx4ult$=function(t){var e=t*PN.DEG_2_RAD,i=A.cos(e),n=A.sin(e),r=this.x*i-this.y*n,o=this.x*n+this.y*i;return this.x=r,this.y=o,this},ur.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this},ur.prototype.set_dleff0$=function(t,e){return this.x=t,this.y=e,this},ur.prototype.set_czzhjp$=function(t){return this.x=t.x,this.y=t.y,this},ur.prototype.subtract_czzhjp$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},ur.prototype.divAssign_mx4ult$=function(t){this.scale_mx4ult$(1/t)},ur.prototype.minusAssign_czzhjp$=function(t){this.subtract_czzhjp$(t)},ur.prototype.plusAssign_czzhjp$=function(t){this.add_czzhjp$(t)},ur.prototype.set_24o109$=function(t,e){this.fields[t]=e},ur.prototype.timesAssign_mx4ult$=function(t){this.scale_mx4ult$(t)},ur.$metadata$={kind:$,simpleName:"MutableVec2f",interfaces:[rr]},Object.defineProperty(hr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(hr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),hr.prototype.add_b18iao$=function(t,e){return e.set_czzhjr$(this).add_czzhjr$(t)},hr.prototype.distance_czzhjr$=function(t){var e=this.sqrDistance_czzhjr$(t);return A.sqrt(e)},hr.prototype.dot_czzhjr$=function(t){return this.x*t.x+this.y*t.y},hr.prototype.isFuzzyEqual_f3xr3v$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}return n},hr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},hr.prototype.mix_3jrcj6$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i},hr.prototype.mul_b18iao$=function(t,e){return e.set_czzhjr$(this).mul_czzhjr$(t)},hr.prototype.norm_5s4mrn$=function(t){return t.set_czzhjr$(this).norm()},hr.prototype.rotate_b0flcl$=function(t,e){return e.set_czzhjr$(this).rotate_14dthe$(t)},hr.prototype.scale_b0flcl$=function(t,e){return e.set_czzhjr$(this).scale_14dthe$(t)},hr.prototype.sqrDistance_czzhjr$=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},hr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y},hr.prototype.subtract_b18iao$=function(t,e){return e.set_czzhjr$(this).subtract_czzhjr$(t)},hr.prototype.get_za3lpa$=function(t){return this.fields[t]},hr.prototype.times_czzhjr$=function(t){return this.dot_czzhjr$(t)},hr.prototype.toString=function(){return"("+this.x+", "+this.y+")"},hr.prototype.toVec2f=function(){return new rr(this.x,this.y)},hr.prototype.toMutableVec2f=function(){return this.toMutableVec2f_5s4mrl$(pr())},hr.prototype.toMutableVec2f_5s4mrl$=function(t){return t.set_dleff0$(this.x,this.y)},hr.prototype.equals=function(t){return this===t||!!e.isType(t,hr)&&this.x===t.x&&this.y===t.y},hr.prototype.hashCode=function(){var t=rt(this.x);return t=(31*t|0)+rt(this.y)|0},dr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fr=null;function _r(){return null===fr&&new dr,fr}function mr(t,e){return e=e||Object.create(hr.prototype),hr.call(e,t,t),e}function $r(t,e){hr.call(this,t,e)}function yr(t){return t=t||Object.create($r.prototype),$r.call(t,0,0),t}function vr(t,e){xr(),this.fields=new Int32Array(2),this.fields[0]=t,this.fields[1]=e}function gr(){br=this,this.ZERO=wr(0),this.X_AXIS=new vr(1,0),this.Y_AXIS=new vr(0,1),this.NEG_X_AXIS=new vr(-1,0),this.NEG_Y_AXIS=new vr(0,-1)}hr.$metadata$={kind:$,simpleName:"Vec2d",interfaces:[]},Object.defineProperty($r.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty($r.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),$r.prototype.add_czzhjr$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},$r.prototype.mul_czzhjr$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},$r.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},$r.prototype.rotate_14dthe$=function(t){var e=t*PN.DEG_2_RAD,i=A.cos(e),n=A.sin(e),r=this.x*i-this.y*n,o=this.x*n+this.y*i;return this.x=r,this.y=o,this},$r.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this},$r.prototype.set_lu1900$=function(t,e){return this.x=t,this.y=e,this},$r.prototype.set_czzhjr$=function(t){return this.x=t.x,this.y=t.y,this},$r.prototype.subtract_czzhjr$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},$r.prototype.divAssign_14dthe$=function(t){this.scale_14dthe$(1/t)},$r.prototype.minusAssign_czzhjr$=function(t){this.subtract_czzhjr$(t)},$r.prototype.plusAssign_czzhjr$=function(t){this.add_czzhjr$(t)},$r.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},$r.prototype.timesAssign_14dthe$=function(t){this.scale_14dthe$(t)},$r.$metadata$={kind:$,simpleName:"MutableVec2d",interfaces:[hr]},Object.defineProperty(vr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(vr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),vr.prototype.get_za3lpa$=function(t){return this.fields[t]},vr.prototype.toString=function(){return"("+this.x+", "+this.y+")"},vr.prototype.equals=function(t){return this===t||!!e.isType(t,co)&&this.x===t.x&&this.y===t.y},vr.prototype.hashCode=function(){var t=rt(this.x);return t=(31*t|0)+rt(this.y)|0},gr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var br=null;function xr(){return null===br&&new gr,br}function wr(t,e){return e=e||Object.create(vr.prototype),vr.call(e,t,t),e}function zr(t,e){vr.call(this,t,e),this.fields[0]=t,this.fields[1]=e}function kr(t){return t=t||Object.create(zr.prototype),zr.call(t,0,0),t}function Sr(t,e,i){Er(),this.fields=new Float32Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Cr(){Nr=this,this.ZERO=Pr(0),this.X_AXIS=new Sr(1,0,0),this.Y_AXIS=new Sr(0,1,0),this.Z_AXIS=new Sr(0,0,1),this.NEG_X_AXIS=new Sr(-1,0,0),this.NEG_Y_AXIS=new Sr(0,-1,0),this.NEG_Z_AXIS=new Sr(0,0,-1)}vr.$metadata$={kind:$,simpleName:"Vec2i",interfaces:[]},Object.defineProperty(zr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.fields[0]=t}}),Object.defineProperty(zr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.fields[1]=t}}),Object.defineProperty(zr.prototype,"array",{configurable:!0,get:function(){return this.fields}}),zr.prototype.set_czzhjm$=function(t){return this.x=t.x,this.y=t.y,this},zr.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},zr.$metadata$={kind:$,simpleName:"MutableVec2i",interfaces:[vr]},Object.defineProperty(Sr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Sr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Sr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Sr.prototype.add_2gj7b4$=function(t,e){return e.set_czzhiu$(this).add_czzhiu$(t)},Sr.prototype.cross_2gj7b4$=function(t,e){return e.x=this.y*t.z-this.z*t.y,e.y=this.z*t.x-this.x*t.z,e.z=this.x*t.y-this.y*t.x,e},Sr.prototype.distance_czzhiu$=function(t){var e=this.sqrDistance_czzhiu$(t);return A.sqrt(e)},Sr.prototype.dot_czzhiu$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Sr.prototype.isFuzzyEqual_2qa7tb$=function(t,e){void 0===e&&(e=In);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}return o},Sr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Sr.prototype.mix_a6wx89$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i},Sr.prototype.mul_2gj7b4$=function(t,e){return e.set_czzhiu$(this).mul_czzhiu$(t)},Sr.prototype.norm_5s4mqq$=function(t){return t.set_czzhiu$(this).norm()},Sr.prototype.planeSpace_t87wgk$=function(t,e){var i=this.z;if(A.abs(i)>Dn){var n=this.y*this.y+this.z*this.z,r=1/A.sqrt(n);t.x=0,t.y=-this.z*r,t.z=this.y*r,e.x=n*r,e.y=-this.x*t.z,e.z=this.x*t.y}else{var o=this.x*this.x+this.y*this.y,s=1/A.sqrt(o);t.x=-this.y*s,t.y=this.x*s,t.z=0,e.x=-this.z*t.y,e.y=this.z*t.x,e.z=o*s}},Sr.prototype.rotate_hx2y1u$=function(t,e,i,n,r){return r.set_czzhiu$(this).rotate_7b5o5w$(t,e,i,n)},Sr.prototype.rotate_vqa64j$=function(t,e,i){return i.set_czzhiu$(this).rotate_7b5o5w$(t,e.x,e.y,e.z)},Sr.prototype.scale_749b8l$=function(t,e){return e.set_czzhiu$(this).scale_mx4ult$(t)},Sr.prototype.sqrDistance_czzhiu$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},Sr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},Sr.prototype.subtract_2gj7b4$=function(t,e){return e.set_czzhiu$(this).subtract_czzhiu$(t)},Sr.prototype.get_za3lpa$=function(t){return this.fields[t]},Sr.prototype.times_czzhiu$=function(t){return this.dot_czzhiu$(t)},Sr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Sr.prototype.toVec3d=function(){return new Rr(this.x,this.y,this.z)},Sr.prototype.toMutableVec3d=function(){return this.toMutableVec3d_5s4mqs$(Fr())},Sr.prototype.toMutableVec3d_5s4mqs$=function(t){return t.set_yvo9jy$(this.x,this.y,this.z)},Sr.prototype.equals=function(t){return this===t||!!e.isType(t,Sr)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Sr.prototype.hashCode=function(){var t=rt(this.x);return t=(31*(t=(31*t|0)+rt(this.y)|0)|0)+rt(this.z)|0},Cr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Nr=null;function Er(){return null===Nr&&new Cr,Nr}function Pr(t,e){return e=e||Object.create(Sr.prototype),Sr.call(e,t,t,t),e}function Tr(t,e){return e=e||Object.create(Sr.prototype),Sr.call(e,t.x,t.y,t.z),e}function Or(t,e,i){Sr.call(this,t,e,i)}function Mr(t){return t=t||Object.create(Or.prototype),Or.call(t,0,0,0),t}function jr(t,e){return e=e||Object.create(Or.prototype),Or.call(e,t,t,t),e}function Ar(t,e){return e=e||Object.create(Or.prototype),Or.call(e,t.x,t.y,t.z),e}function Rr(t,e,i){Dr(),this.fields=new Float64Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Ir(){Lr=this,this.ZERO=qr(0),this.X_AXIS=new Rr(1,0,0),this.Y_AXIS=new Rr(0,1,0),this.Z_AXIS=new Rr(0,0,1),this.NEG_X_AXIS=new Rr(-1,0,0),this.NEG_Y_AXIS=new Rr(0,-1,0),this.NEG_Z_AXIS=new Rr(0,0,-1)}Sr.$metadata$={kind:$,simpleName:"Vec3f",interfaces:[]},Object.defineProperty(Or.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(Or.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(Or.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(Or.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Or.prototype.add_czzhiu$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this},Or.prototype.mul_czzhiu$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this},Or.prototype.norm=function(){var t=this.length();return 0!==t?this.scale_mx4ult$(1/t):this.set_czzhiu$(Er().ZERO)},Or.prototype.rotate_7b5o5w$=function(t,e,i,n){var r=t*PN.DEG_2_RAD,o=A.cos(r),s=1-o,a=A.sin(r),l=this.x*(e*e*s+o)+this.y*(e*i*s-n*a)+this.z*(e*n*s+i*a),u=this.x*(i*e*s+n*a)+this.y*(i*i*s+o)+this.z*(i*n*s-e*a),p=this.x*(e*n*s-i*a)+this.y*(i*n*s+e*a)+this.z*(n*n*s+o);return this.x=l,this.y=u,this.z=p,this},Or.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},Or.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this},Or.prototype.set_y2kzbl$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Or.prototype.set_czzhiu$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Or.prototype.subtract_czzhiu$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this},Or.prototype.divAssign_mx4ult$=function(t){this.scale_mx4ult$(1/t)},Or.prototype.minusAssign_czzhiu$=function(t){this.subtract_czzhiu$(t)},Or.prototype.plusAssign_czzhiu$=function(t){this.add_czzhiu$(t)},Or.prototype.set_24o109$=function(t,e){this.fields[t]=e},Or.prototype.timesAssign_mx4ult$=function(t){this.scale_mx4ult$(t)},Or.$metadata$={kind:$,simpleName:"MutableVec3f",interfaces:[Sr]},Object.defineProperty(Rr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Rr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Rr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Rr.prototype.add_vgki2o$=function(t,e){return e.set_czzhiw$(this).add_czzhiw$(t)},Rr.prototype.cross_vgki2o$=function(t,e){return e.x=this.y*t.z-this.z*t.y,e.y=this.z*t.x-this.x*t.z,e.z=this.x*t.y-this.y*t.x,e},Rr.prototype.distance_czzhiw$=function(t){var e=this.sqrDistance_czzhiw$(t);return A.sqrt(e)},Rr.prototype.dot_czzhiw$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Rr.prototype.isFuzzyEqual_6nz8ey$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}return o},Rr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Rr.prototype.mix_3odno2$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i},Rr.prototype.mul_vgki2o$=function(t,e){return e.set_czzhiw$(this).mul_czzhiw$(t)},Rr.prototype.norm_5s4mqs$=function(t){return t.set_czzhiw$(this).norm()},Rr.prototype.planeSpace_7vsg4s$=function(t,e){var i=this.z;if(A.abs(i)>Dn){var n=this.y*this.y+this.z*this.z,r=1/A.sqrt(n);t.x=0,t.y=-this.z*r,t.z=this.y*r,e.x=n*r,e.y=-this.x*t.z,e.z=this.x*t.y}else{var o=this.x*this.x+this.y*this.y,s=1/A.sqrt(o);t.x=-this.y*s,t.y=this.x*s,t.z=0,e.x=-this.z*t.y,e.y=this.z*t.x,e.z=o*s}},Rr.prototype.rotate_8uuoh8$=function(t,e,i,n,r){return r.set_czzhiw$(this).rotate_6y0v78$(t,e,i,n)},Rr.prototype.rotate_cvw8z2$=function(t,e,i){return i.set_czzhiw$(this).rotate_6y0v78$(t,e.x,e.y,e.z)},Rr.prototype.scale_b0flbq$=function(t,e){return e.set_czzhiw$(this).scale_14dthe$(t)},Rr.prototype.sqrDistance_czzhiw$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},Rr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},Rr.prototype.subtract_vgki2o$=function(t,e){return e.set_czzhiw$(this).subtract_czzhiw$(t)},Rr.prototype.get_za3lpa$=function(t){return this.fields[t]},Rr.prototype.times_czzhiw$=function(t){return this.dot_czzhiw$(t)},Rr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Rr.prototype.toVec3f=function(){return new Sr(this.x,this.y,this.z)},Rr.prototype.toMutableVec3f=function(){return this.toMutableVec3f_5s4mqq$(Mr())},Rr.prototype.toMutableVec3f_5s4mqq$=function(t){return t.set_y2kzbl$(this.x,this.y,this.z)},Rr.prototype.equals=function(t){return this===t||!!e.isType(t,Rr)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Rr.prototype.hashCode=function(){var t=rt(this.x);return t=(31*(t=(31*t|0)+rt(this.y)|0)|0)+rt(this.z)|0},Ir.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Lr=null;function Dr(){return null===Lr&&new Ir,Lr}function qr(t,e){return e=e||Object.create(Rr.prototype),Rr.call(e,t,t,t),e}function Br(t,e,i){Rr.call(this,t,e,i)}function Fr(t){return t=t||Object.create(Br.prototype),Br.call(t,0,0,0),t}function Ur(t,e,i){Hr(),this.fields=new Int32Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Vr(){Gr=this,this.ZERO=Wr(0),this.X_AXIS=new Ur(1,0,0),this.Y_AXIS=new Ur(0,1,0),this.Z_AXIS=new Ur(0,0,1),this.NEG_X_AXIS=new Ur(-1,0,0),this.NEG_Y_AXIS=new Ur(0,-1,0),this.NEG_Z_AXIS=new Ur(0,0,-1)}Rr.$metadata$={kind:$,simpleName:"Vec3d",interfaces:[]},Object.defineProperty(Br.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(Br.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),Object.defineProperty(Br.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_5wr77w$(2,t)}}),Br.prototype.add_czzhiw$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this},Br.prototype.mul_czzhiw$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this},Br.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},Br.prototype.rotate_6y0v78$=function(t,e,i,n){var r=t*PN.DEG_2_RAD,o=A.cos(r),s=1-o,a=A.sin(r),l=this.x*(e*e*s+o)+this.y*(e*i*s-n*a)+this.z*(e*n*s+i*a),u=this.x*(i*e*s+n*a)+this.y*(i*i*s+o)+this.z*(i*n*s-e*a),p=this.x*(e*n*s-i*a)+this.y*(i*n*s+e*a)+this.z*(n*n*s+o);return this.x=l,this.y=u,this.z=p,this},Br.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},Br.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this},Br.prototype.set_yvo9jy$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Br.prototype.set_czzhiw$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Br.prototype.subtract_czzhiw$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this},Br.prototype.divAssign_14dthe$=function(t){this.scale_14dthe$(1/t)},Br.prototype.minusAssign_czzhiw$=function(t){this.subtract_czzhiw$(t)},Br.prototype.plusAssign_czzhiw$=function(t){this.add_czzhiw$(t)},Br.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},Br.prototype.timesAssign_14dthe$=function(t){this.scale_14dthe$(t)},Br.$metadata$={kind:$,simpleName:"MutableVec3d",interfaces:[Rr]},Object.defineProperty(Ur.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Ur.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Ur.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Ur.prototype.get_za3lpa$=function(t){return this.fields[t]},Ur.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ur.prototype.equals=function(t){return this===t||!!e.isType(t,co)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Ur.prototype.hashCode=function(){var t=rt(this.x);return t=(31*(t=(31*t|0)+rt(this.y)|0)|0)+rt(this.z)|0},Vr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gr=null;function Hr(){return null===Gr&&new Vr,Gr}function Wr(t,e){return e=e||Object.create(Ur.prototype),Ur.call(e,t,t,t),e}function Kr(t,e,i){Ur.call(this,t,e,i),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Xr(t){return t=t||Object.create(Kr.prototype),Kr.call(t,0,0,0),t}function Yr(t,e,i,n){Qr(),this.fields=new Float32Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function Zr(){Jr=this,this.ZERO=to(0),this.X_AXIS=new Yr(1,0,0,0),this.Y_AXIS=new Yr(0,1,0,0),this.Z_AXIS=new Yr(0,0,1,0),this.W_AXIS=new Yr(0,0,0,1),this.NEG_X_AXIS=new Yr(-1,0,0,0),this.NEG_Y_AXIS=new Yr(0,-1,0,0),this.NEG_Z_AXIS=new Yr(0,0,-1,0),this.NEG_W_AXIS=new Yr(0,0,0,-1)}Ur.$metadata$={kind:$,simpleName:"Vec3i",interfaces:[]},Object.defineProperty(Kr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_vux9f0$(0,t)}}),Object.defineProperty(Kr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_vux9f0$(1,t)}}),Object.defineProperty(Kr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_vux9f0$(2,t)}}),Object.defineProperty(Kr.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Kr.prototype.set_qt1dr2$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Kr.prototype.set_czzhir$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Kr.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},Kr.$metadata$={kind:$,simpleName:"MutableVec3i",interfaces:[Ur]},Object.defineProperty(Yr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Yr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Yr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(Yr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),Yr.prototype.add_uzu8ww$=function(t,e){return e.set_czzhhz$(this).add_czzhhz$(t)},Yr.prototype.distance_czzhhz$=function(t){var e=this.sqrDistance_czzhhz$(t);return A.sqrt(e)},Yr.prototype.dot_czzhhz$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},Yr.prototype.isFuzzyEqual_m79ulu$=function(t,e){void 0===e&&(e=In);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}var a=o;if(a){var l=this.w-t.w;a=A.abs(l)<=e}return a},Yr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Yr.prototype.mix_q86erb$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i.w=t.w*e+this.w*(1-e),i},Yr.prototype.mul_uzu8ww$=function(t,e){return e.set_czzhhz$(this).mul_czzhhz$(t)},Yr.prototype.norm_5s4mpv$=function(t){return t.set_czzhhz$(this).norm()},Yr.prototype.quatProduct_uzu8ww$=function(t,e){return e.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,e.y=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e.z=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,e.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,e},Yr.prototype.scale_749b7q$=function(t,e){return e.set_czzhhz$(this).scale_mx4ult$(t)},Yr.prototype.sqrDistance_czzhhz$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,r=this.z-t.w;return e*e+i*i+n*n+r*r},Yr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Yr.prototype.subtract_uzu8ww$=function(t,e){return e.set_czzhhz$(this).subtract_czzhhz$(t)},Yr.prototype.getXyz_5s4mqq$=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t},Yr.prototype.get_za3lpa$=function(t){return this.fields[t]},Yr.prototype.times_czzhhz$=function(t){return this.dot_czzhhz$(t)},Yr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Yr.prototype.toVec4d=function(){return new ro(this.x,this.y,this.z,this.w)},Yr.prototype.toMutableVec4d=function(){return this.toMutableVec4d_5s4mpx$(po())},Yr.prototype.toMutableVec4d_5s4mpx$=function(t){return t.set_6y0v78$(this.x,this.y,this.z,this.w)},Yr.prototype.equals=function(t){return this===t||!!e.isType(t,Yr)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},Yr.prototype.hashCode=function(){var t=rt(this.x);return t=(31*(t=(31*(t=(31*t|0)+rt(this.y)|0)|0)+rt(this.z)|0)|0)+rt(this.w)|0},Zr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jr=null;function Qr(){return null===Jr&&new Zr,Jr}function to(t,e){return e=e||Object.create(Yr.prototype),Yr.call(e,t,t,t,t),e}function eo(t,e,i){return i=i||Object.create(Yr.prototype),Yr.call(i,t.x,t.y,t.z,e),i}function io(t,e,i,n){Yr.call(this,t,e,i,n)}function no(t){return t=t||Object.create(io.prototype),io.call(t,0,0,0,0),t}function ro(t,e,i,n){ao(),this.fields=new Float64Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function oo(){so=this,this.ZERO=lo(0),this.X_AXIS=new ro(1,0,0,0),this.Y_AXIS=new ro(0,1,0,0),this.Z_AXIS=new ro(0,0,1,0),this.W_AXIS=new ro(0,0,0,1),this.NEG_X_AXIS=new ro(-1,0,0,0),this.NEG_Y_AXIS=new ro(0,-1,0,0),this.NEG_Z_AXIS=new ro(0,0,-1,0),this.NEG_W_AXIS=new ro(0,0,0,-1)}Yr.$metadata$={kind:$,simpleName:"Vec4f",interfaces:[]},Object.defineProperty(io.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(io.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(io.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(io.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_24o109$(3,t)}}),Object.defineProperty(io.prototype,"array",{configurable:!0,get:function(){return this.fields}}),io.prototype.add_czzhhz$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this},io.prototype.mul_czzhhz$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this},io.prototype.norm=function(){return this.scale_mx4ult$(1/this.length())},io.prototype.quatProduct_czzhhz$=function(t){var e=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,n=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,r=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return this.set_7b5o5w$(e,i,n,r),this},io.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this},io.prototype.set_7b5o5w$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},io.prototype.set_czzhhz$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},io.prototype.set_2qa7tb$=function(t,e){return void 0===e&&(e=0),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this},io.prototype.subtract_czzhhz$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this},io.prototype.plusAssign_czzhhz$=function(t){this.add_czzhhz$(t)},io.prototype.minusAssign_czzhhz$=function(t){this.subtract_czzhhz$(t)},io.prototype.set_24o109$=function(t,e){this.fields[t]=e},io.$metadata$={kind:$,simpleName:"MutableVec4f",interfaces:[Yr]},Object.defineProperty(ro.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(ro.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(ro.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(ro.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),ro.prototype.add_2x9ggw$=function(t,e){return e.set_czzhi1$(this).add_czzhi1$(t)},ro.prototype.distance_czzhi1$=function(t){var e=this.sqrDistance_czzhi1$(t);return A.sqrt(e)},ro.prototype.dot_czzhi1$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},ro.prototype.isFuzzyEqual_1rza9z$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}var a=o;if(a){var l=this.w-t.w;a=A.abs(l)<=e}return a},ro.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},ro.prototype.mix_3szysy$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i.w=t.w*e+this.w*(1-e),i},ro.prototype.mul_2x9ggw$=function(t,e){return e.set_czzhi1$(this).mul_czzhi1$(t)},ro.prototype.norm_5s4mpx$=function(t){return t.set_czzhi1$(this).norm()},ro.prototype.quatProduct_2x9ggw$=function(t,e){return e.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,e.y=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e.z=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,e.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,e},ro.prototype.scale_b0flav$=function(t,e){return e.set_czzhi1$(this).scale_14dthe$(t)},ro.prototype.sqrDistance_czzhi1$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,r=this.z-t.w;return e*e+i*i+n*n+r*r},ro.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},ro.prototype.subtract_2x9ggw$=function(t,e){return e.set_czzhi1$(this).subtract_czzhi1$(t)},ro.prototype.getXyz_5s4mqs$=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t},ro.prototype.get_za3lpa$=function(t){return this.fields[t]},ro.prototype.times_czzhi1$=function(t){return this.dot_czzhi1$(t)},ro.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},ro.prototype.toVec4f=function(){return new Yr(this.x,this.y,this.z,this.w)},ro.prototype.toMutableVec4f=function(){return this.toMutableVec4f_5s4mpv$(no())},ro.prototype.toMutableVec4f_5s4mpv$=function(t){return t.set_7b5o5w$(this.x,this.y,this.z,this.w)},ro.prototype.equals=function(t){return this===t||!!e.isType(t,ro)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},ro.prototype.hashCode=function(){var t=rt(this.x);return t=(31*(t=(31*(t=(31*t|0)+rt(this.y)|0)|0)+rt(this.z)|0)|0)+rt(this.w)|0},oo.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var so=null;function ao(){return null===so&&new oo,so}function lo(t,e){return e=e||Object.create(ro.prototype),ro.call(e,t,t,t,t),e}function uo(t,e,i,n){ro.call(this,t,e,i,n)}function po(t){return t=t||Object.create(uo.prototype),uo.call(t,0,0,0,0),t}function co(t,e,i,n){So(),this.fields=new Int32Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function ho(){ko=this,this.ZERO=Co(0),this.X_AXIS=new co(1,0,0,0),this.Y_AXIS=new co(0,1,0,0),this.Z_AXIS=new co(0,0,1,0),this.W_AXIS=new co(0,0,0,1),this.NEG_X_AXIS=new co(-1,0,0,0),this.NEG_Y_AXIS=new co(0,-1,0,0),this.NEG_Z_AXIS=new co(0,0,-1,0),this.NEG_W_AXIS=new co(0,0,0,-1)}ro.$metadata$={kind:$,simpleName:"Vec4d",interfaces:[]},Object.defineProperty(uo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(uo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),Object.defineProperty(uo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_5wr77w$(2,t)}}),Object.defineProperty(uo.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_5wr77w$(3,t)}}),uo.prototype.add_czzhi1$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this},uo.prototype.mul_czzhi1$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this},uo.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},uo.prototype.quatProduct_czzhi1$=function(t){var e=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,n=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,r=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return this.set_6y0v78$(e,i,n,r),this},uo.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this},uo.prototype.set_6y0v78$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},uo.prototype.set_czzhi1$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},uo.prototype.set_6nz8ey$=function(t,e){return void 0===e&&(e=0),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this},uo.prototype.subtract_czzhi1$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this},uo.prototype.plusAssign_czzhi1$=function(t){this.add_czzhi1$(t)},uo.prototype.minusAssign_czzhi1$=function(t){this.subtract_czzhi1$(t)},uo.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},uo.$metadata$={kind:$,simpleName:"MutableVec4d",interfaces:[ro]},Object.defineProperty(co.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(co.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(co.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(co.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),co.prototype.get_za3lpa$=function(t){return this.fields[t]},co.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},co.prototype.equals=function(t){return this===t||!!e.isType(t,co)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},co.prototype.hashCode=function(){var t=rt(this.x);return t=(31*(t=(31*(t=(31*t|0)+rt(this.y)|0)|0)+rt(this.z)|0)|0)+rt(this.w)|0},ho.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fo,_o,mo,$o,yo,vo,go,bo,xo,wo,zo,ko=null;function So(){return null===ko&&new ho,ko}function Co(t,e){return e=e||Object.create(co.prototype),co.call(e,t,t,t,t),e}function No(t,e,i,n){co.call(this,t,e,i,n),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function Eo(t){return t=t||Object.create(No.prototype),No.call(t,0,0,0,0),t}function Po(t,e){return t.cross_2gj7b4$(e,Mr())}function To(t,e){var i,n,r,o;void 0===e&&(e=new Ro),Fd.call(this,t),this.edgeHandler=e,this.verts_0=null,this.positionOffset_0=x(t.attributeByteOffsets.get_11rb$(ds().POSITIONS)),this.tmpVec1_0=Mr(),this.tmpVec2_0=Mr(),this.tmpVec3_0=Mr(),this.vertexIt1_0=t.get_za3lpa$(0),this.vertexIt2_0=t.get_za3lpa$(0);for(var s=t.numVertices,a=w(s),l=0;l<s;l++)a.add_11rb$(new jo(this,l));this.verts_0=a,i=t.numIndices;for(var u=0;u<i;u+=3){var p=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u)),c=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u+1|0)),h=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u+2|0)),d=new Ao(this,p,c),f=new Ao(this,c,h);d.next=f;var _=f,m=new Ao(this,h,p);_.next=m,m.next=d;var $,y,v,g=m;null!=(n=c.getEdgeTo_n38rgs$(p))?(n.opp=d,$=n):$=null,d.opp=$,null!=(r=h.getEdgeTo_n38rgs$(c))?(r.opp=_,y=r):y=null,_.opp=y,null!=(o=p.getEdgeTo_n38rgs$(h))?(o.opp=g,v=o):v=null,g.opp=v,this.edgeHandler.plusAssign_ebe40$(d),this.edgeHandler.plusAssign_ebe40$(_),this.edgeHandler.plusAssign_ebe40$(g)}}function Oo(){}function Mo(t,i){return function(n){if(n.isDeleted){var r=i,o=qN.Log,s=vz.WARN,a=e.getKClassFromExpression(r).simpleName;s.level>=o.level.level&&o.printer(s,a,"Deleted edge in v, edge.from == v: "+(n.from===t))}return n.isDeleted}}function jo(t,e){this.$outer=t,Pr(0,this),this.index=e,this.edges=M(),this.isDeleted_st01j9$_0=!1,this.meshDataIndex_8be2vx$=this.index}function Ao(t,e,i){this.$outer=t,this.from_t0m3rm$_0=e,this.to_z50l7l$_0=i,this.isDeleted_tjy89$_0=!1,this.treeNode_u2e3i4$_0=null,this.next_t4scix$_0=this.next_t4scix$_0,this.opp_nuqb1l$_0=null,e.edges.add_11rb$(this)}function Ro(){this.edgeList=M(),this.numEdges_wlm1ja$_0=0}function Io(t){return t.isDeleted}function Lo(t){this.this$ListEdgeHandler=t,this.i=0}function Do(t){OcTreeEdgeHandler$Companion_getInstance(),this.edgeTree=new OcTree(OcTreeEdgeHandler$Companion$HalfEdgeAdapter_getInstance(),void 0,t)}function qo(){}function Bo(){}function Fo(){this.tmpQ=new bn,this.tmpNrm0=Mr(),this.tmpNrm1=Mr(),this.tmpPos0=Mr(),this.tmpPos1=Mr()}function Uo(){return new Fo}function Vo(t){var e;this.vertex=t,this.errQuadric=(new bn).setZero(),this.isStickyVertex=!1,this.isBorder_qaaj7p$_0=!1,this.isDeleted_clri7e$_0=!1,this.tmpVec4_0=no(),e=this.vertex.edges;for(var i=0;i!==e.size;++i){var n=this.vertex.edges.get_za3lpa$(i);if(this.addPlane_0(n.computeTriPlane_5s4mpv$(this.tmpVec4_0)),null==n.opp){var r=this.tmpVec4_0.getXyz_5s4mqq$(Mr()),o=Ar(this.vertex).subtract_czzhiu$(n.to).norm(),s=r.cross_2gj7b4$(o,Mr());this.tmpVec4_0.set_2qa7tb$(s,-s.dot_czzhiu$(this.vertex)),this.addPlane_0(this.tmpVec4_0),this.isBorder=!0}if(null==n.next.next.opp){null==n.opp&&n.computeTriPlane_5s4mpv$(this.tmpVec4_0);var a=this.tmpVec4_0.getXyz_5s4mqq$(Mr()),l=Ar(n.next.next.from).subtract_czzhiu$(this.vertex).norm(),u=a.cross_2gj7b4$(l,Mr());this.tmpVec4_0.set_2qa7tb$(u,-u.dot_czzhiu$(this.vertex)),this.addPlane_0(this.tmpVec4_0),this.isBorder=!0}}}function Go(t,e){void 0===e&&(e=Uo()),this.termCrit=t,this.collapseStrategy=e,this.quadrics_h71pfh$_0=z(),this.candidates_gym04f$_0=new Ko,this.mesh_c14x7o$_aesyuh$_0=this.mesh_c14x7o$_aesyuh$_0,this.excludedEdges=ct(),this.stickyVertices=ct(),this.keepBorders=!1}function Ho(t,e,i,n){this.$outer=t,this.edge=e,this.q1=i,this.q2=n,this.error=0,this.collapsePos=Mr(),this.edgeId=new Wo(this.edge.from.index,this.edge.to.index),this.updateCollapsePosAndError()}function Wo(t,e){this.fromId=t,this.toId=e}function Ko(){fS.call(this),this.candidateMap=z()}function Xo(){}function Yo(t){this.closure$factor=t,this.targetFaceCnt=2147483647}function Zo(t,e,i,n,r){P.call(this),this.byteSize=i,this.isInt=n,this.glslType=r,this.name$=t,this.ordinal$=e}function Jo(){Jo=function(){},fo=new Zo("FLOAT",0,4,!1,"float"),_o=new Zo("VEC_2F",1,8,!1,"vec2"),mo=new Zo("VEC_3F",2,12,!1,"vec3"),$o=new Zo("VEC_4F",3,16,!1,"vec4"),yo=new Zo("INT",4,4,!0,"int"),vo=new Zo("VEC_2I",5,8,!0,"ivec2"),go=new Zo("VEC_3I",6,12,!0,"ivec3"),bo=new Zo("VEC_4I",7,16,!0,"ivec4"),xo=new Zo("MAT_2F",8,16,!1,"mat2"),wo=new Zo("MAT_3F",9,36,!1,"mat3"),zo=new Zo("MAT_4F",10,64,!1,"mat4")}function Qo(){return Jo(),fo}function ts(){return Jo(),_o}function es(){return Jo(),mo}function is(){return Jo(),$o}function ns(){return Jo(),yo}function rs(){return Jo(),vo}function os(){return Jo(),go}function ss(){return Jo(),bo}function as(){return Jo(),xo}function ls(){return Jo(),wo}function us(){return Jo(),zo}function ps(t,e){ds(),this.name=t,this.type=e,this.props=new FS(this)}function cs(){hs=this,this.POSITIONS=new ps("attrib_positions",es()),this.NORMALS=new ps("attrib_normals",es()),this.TANGENTS=new ps("attrib_tangents",is()),this.TEXTURE_COORDS=new ps("attrib_texture_coords",ts()),this.COLORS=new ps("attrib_colors",is()),this.JOINTS=new ps("attrib_joints",ss()),this.WEIGHTS=new ps("attrib_weights",is())}co.$metadata$={kind:$,simpleName:"Vec4i",interfaces:[]},Object.defineProperty(No.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_vux9f0$(0,t)}}),Object.defineProperty(No.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_vux9f0$(1,t)}}),Object.defineProperty(No.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_vux9f0$(2,t)}}),Object.defineProperty(No.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_vux9f0$(3,t)}}),Object.defineProperty(No.prototype,"array",{configurable:!0,get:function(){return this.fields}}),No.prototype.set_tjonv8$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},No.prototype.set_czzhhw$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},No.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},No.$metadata$={kind:$,simpleName:"MutableVec4i",interfaces:[co]},Object.defineProperty(To.prototype,"vertices",{configurable:!0,get:function(){return this.verts_0}}),Object.defineProperty(To.prototype,"vertCount",{configurable:!0,get:function(){return this.verts_0.size}}),Object.defineProperty(To.prototype,"faceCount",{configurable:!0,get:function(){return this.edgeHandler.numEdges/3|0}}),Oo.prototype.distinctTriangleEdges=function(){var t,e=M();for(t=this.iterator();t.hasNext();){var i=t.next();i.id.compareTo_11rb$(i.next.id)<0&&i.id.compareTo_11rb$(i.next.next.id)<0&&e.add_11rb$(i)}return e},Oo.$metadata$={kind:st,simpleName:"EdgeHandler",interfaces:[at]},To.prototype.generateWireframe_6olbr4$=function(t,e){void 0===e&&(e=V$().MD_PINK);var i,n,r=Mr(),o=Mr(),s=this.edgeHandler,a=M();for(i=s.iterator();i.hasNext();){var l=i.next();(null==l.opp||l.from.index<l.to.index)&&a.add_11rb$(l)}for(n=a.iterator();n.hasNext();){var u=n.next();r.set_czzhiu$(u.from),o.set_czzhiu$(u.to),t.addLine_b8opkg$(r,e,o,e)}},To.prototype.sanitize=function(){for(var t,i,n,r=this.verts_0.iterator(),o=0;r.hasNext();){var s=r.next();s.isDeleted?r.remove():s.index=(o=(t=o)+1|0,t)}var a=this.verts_0.size;if(this.edgeHandler.rebuild(),this.edgeHandler.numEdges%3!=0){var l=qN.Log,u=vz.WARN,p=e.getKClassFromExpression(this).simpleName;u.level>=l.level.level&&l.printer(u,p,"Uneven edge count: "+this.edgeHandler.numEdges%3)}var c,h,d=M();for(i=this.verts_0.iterator();i.hasNext();){var f=i.next();for(lt(f.edges,Mo(f,this)),n=f.edges.iterator();n.hasNext();){var _=n.next(),m=_.from.index,$=_.next.from.index,y=_.next.next.from.index;if(m>=a||$>=a||y>=a){var v=qN.Log,g=vz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Inconsistent triangle indices: i0="+m+", i1="+$+", i2="+y+", mesh has only "+a+" vertices"),d.add_11rb$(_)}}}for(c=this.edgeHandler.iterator();c.hasNext();){var x=c.next();if(x.from.isDeleted||x.from.index>=a||x.to.isDeleted||x.to.index>=a){var w=qN.Log,z=vz.WARN,k=e.getKClassFromExpression(this).simpleName;z.level>=w.level.level&&w.printer(z,k,"Inconsistent edge: "+x.from.index+" (del="+x.from.isDeleted+") -> "+x.to.index+" (del="+x.to.isDeleted+"), mesh has only "+a+" vertices"),d.add_11rb$(x)}if(x===x.next||x===x.next.next){var S=qN.Log,C=vz.WARN,N=e.getKClassFromExpression(this).simpleName;C.level>=S.level.level&&S.printer(C,N,"Invalid edge linkage: he == he.next || he == he.next.next"),d.add_11rb$(x)}}for(h=d.iterator();h.hasNext();)h.next().deleteTriangle()},To.prototype.rebuild_dqye30$=function(t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.sanitize();var n,r,o,a=this.geometry,l=a.isBatchUpdate;a.isBatchUpdate=!0,(n=this,r=t,o=i,function(t){var i,a,l=n.geometry.vertexSizeF,u=n.geometry.vertexSizeI,p=n.verts_0.size,c=kN(e.imul(p,l)),h=u>0?zN(e.imul(p,u)):n.geometry.dataI;i=n.verts_0;for(var d=0;d!==i.size;++d){var f=n.verts_0.get_za3lpa$(d).meshDataIndex_8be2vx$;n.verts_0.get_za3lpa$(d).meshDataIndex_8be2vx$=n.verts_0.get_za3lpa$(d).index;for(var _=0;_<l;_++)c.put_mx4ult$(n.geometry.dataF.get_za3lpa$(e.imul(f,l)+_|0));if(u>0)for(var m=0;m<u;m++)h.put_za3lpa$(n.geometry.dataI.get_za3lpa$(e.imul(f,u)+m|0))}for(n.geometry.clearIndices(),a=n.edgeHandler.distinctTriangleEdges().iterator();a.hasNext();){var $=a.next();n.geometry.addIndex_za3lpa$($.from.index),n.geometry.addIndex_za3lpa$($.next.from.index),n.geometry.addIndex_za3lpa$($.next.next.from.index)}if(n.geometry.numIndices!==(3*n.faceCount|0)){var y=qN.Log,v=vz.WARN,g=e.getKClassFromExpression(t).simpleName;if(v.level>=y.level.level){var b=y.printer,x=n;b.call(y,v,g,"Inconsistent triangle count! MeshData: "+(x.geometry.numIndices/3|0)+", HalfEdgeMesh: "+x.faceCount)}}return n.geometry.dataF=c,n.geometry.dataI=h,n.geometry.numVertices=p,r&&n.geometry.generateNormals(),o&&n.geometry.generateTangents_mx4ult$(),s})(a),a.hasChanged=!0,a.isBatchUpdate=l,a.rebuildBounds()},To.prototype.selectBorders=function(){var t,e,i=M(),n=ct(),r=M();for(t=this.edgeHandler.iterator();t.hasNext();){var o=t.next();if(null==o.opp){for(var s=o;!n.contains_11rb$(s);){r.add_11rb$(s),n.add_11rb$(s);var a,l=s.to.edges;t:do{var u;for(u=l.iterator();u.hasNext();){var p=u.next();if(null==p.opp&&!n.contains_11rb$(p)){a=p;break t}}a=null}while(0);if(null==(e=a))break;s=e}r.isEmpty()||(i.add_11rb$(r),r=M())}}return i},To.prototype.subSelect_ojfeji$=function(t,e){void 0===e&&(e=0);for(var i=M(),n=ct(),r=ct(),o=b([t]);!o.isEmpty()&&(0===e||(i.size/3|0)<e);){var s=o.removeAt_za3lpa$(0);if(!r.contains_11rb$(s.id)){var a=s.id;r.add_11rb$(a),i.add_11rb$(s);var l=s.next,u=l.id;r.add_11rb$(u),i.add_11rb$(l);var p=s.next.next,c=p.id;if(r.add_11rb$(c),i.add_11rb$(p),null!=s.opp&&!r.contains_11rb$(x(s.opp).id)&&!n.contains_11rb$(x(s.opp).id)){var h=x(s.opp);o.add_11rb$(h)}if(null!=s.next.opp&&!r.contains_11rb$(x(s.next.opp).id)&&!n.contains_11rb$(x(s.next.opp).id)){var d=x(s.next.opp);o.add_11rb$(d)}if(null!=s.next.next.opp&&!r.contains_11rb$(x(s.next.next.opp).id)&&!n.contains_11rb$(x(s.next.next.opp).id)){var f=x(s.next.next.opp);o.add_11rb$(f)}}}return new ut(o,i)},To.prototype.splitEdge_b49or$=function(t,e){var i,n,r,o=this.geometry;o.checkBufferSizes_za3lpa$(),i=o.vertexSizeF;for(var s=1;s<=i;s++)o.dataF.plusAssign_mx4ult$(0);n=o.vertexSizeI;for(var a=1;a<=n;a++)o.dataI.plusAssign_za3lpa$(0);o.vertexIt.index=(r=o.numVertices,o.numVertices=r+1|0,r);var l=o.vertexIt;l.position.set_czzhiu$(t.to).subtract_czzhiu$(t.from).scale_mx4ult$(e).add_czzhiu$(t.from),t.from.getMeshVertex_fs4kvg$(this.vertexIt1_0),t.to.getMeshVertex_fs4kvg$(this.vertexIt2_0),l.texCoord.set_czzhjp$(this.vertexIt2_0.texCoord).subtract_czzhjp$(this.vertexIt1_0.texCoord).scale_mx4ult$(e).add_czzhjp$(this.vertexIt1_0.texCoord),l.normal.set_czzhiu$(this.vertexIt2_0.normal).subtract_czzhiu$(this.vertexIt1_0.normal).scale_mx4ult$(e).add_czzhiu$(this.vertexIt1_0.normal),o.bounds.add_czzhiu$(o.vertexIt.position),o.hasChanged=!0;var u=new jo(this,o.numVertices-1|0);this.verts_0.add_11rb$(u);var p=t.to;t.updateTo_n38rgs$(u);var c=t.next.from.edges,h=t.next;c.remove_11rb$(h),t.next.updateFrom_n38rgs$(u);var d=u.edges,f=t.next;d.add_11rb$(f);var _,m=new Ao(this,u,p),$=new Ao(this,p,t.next.to);m.next=$,$.opp=t.next.opp,null!=(_=$.opp)&&(_.opp=$);var y=$,v=new Ao(this,t.next.to,u);y.next=v,v.next=m,v.opp=t.next,t.next.opp=v;var g=v;this.edgeHandler.plusAssign_ebe40$(m),this.edgeHandler.plusAssign_ebe40$(y),this.edgeHandler.plusAssign_ebe40$(g);var b=t.opp;if(null!=b){var x=b.to;b.updateTo_n38rgs$(u);var w=b.next.from.edges,z=b.next;w.remove_11rb$(z),b.next.updateFrom_n38rgs$(u);var k=u.edges,S=b.next;k.add_11rb$(S);var C,N=new Ao(this,u,x),E=new Ao(this,x,b.next.to);N.next=E,E.opp=b.next.opp,null!=(C=E.opp)&&(C.opp=E);var P=E,T=new Ao(this,b.next.to,u);P.next=T,T.next=N,T.opp=b.next,b.next.opp=T;var O=T;N.opp=t,t.opp=N,m.opp=b,b.opp=m,this.edgeHandler.plusAssign_ebe40$(N),this.edgeHandler.plusAssign_ebe40$(P),this.edgeHandler.plusAssign_ebe40$(O)}return u},To.prototype.collapseEdge_b49or$=function(t,e){var i,n=t.from,r=t.to,o=t.next.opp;null!=o&&(t.next.opp=null,o.opp=null,o.updateTo_n38rgs$(n));var s=t.next.next.opp;null!=s&&(t.next.next.opp=null,s.opp=o,null!=o&&(o.opp=s));var a=t.opp;if(null!=a){var l=a.next.opp;null!=l&&(a.next.opp=null,l.opp=null);var u=a.next.next.opp;null!=u&&(r.edges.remove_11rb$(u),n.edges.add_11rb$(u),u.updateFrom_n38rgs$(n),u.next.next.updateTo_n38rgs$(n),a.next.next.opp=null,u.opp=l,null!=l&&(l.opp=u))}t.deleteTriangle(),null!=a&&a.deleteTriangle(),i=r.edges;for(var p=0;p!==i.size;++p){var c=r.edges.get_za3lpa$(p);c.updateFrom_n38rgs$(n),c.next.next.updateTo_n38rgs$(n);var h=c.opp;null!=h&&(h.updateTo_n38rgs$(n),h.next.updateFrom_n38rgs$(n)),n.edges.add_11rb$(c)}if(r.edges.clear(),r.delete(),0!==e){var d=n.x+(r.x-n.x)*e,f=n.y+(r.y-n.y)*e,_=n.z+(r.z-n.z)*e;n.updatePosition_y2kzbl$(d,f,_)}},To.prototype.subMeshOf_u28ozl$=function(t){var e,i=new Bw(this.geometry.vertexAttributes),n=z(),r=this.geometry.vertexIt;for(e=t.iterator();e.hasNext();){var o=e.next();if(!n.keys.contains_11rb$(o.from.index)){var s,a,l,u=o.from.index;i.checkBufferSizes_za3lpa$(),s=i.vertexSizeF;for(var p=1;p<=s;p++)i.dataF.plusAssign_mx4ult$(0);a=i.vertexSizeI;for(var c=1;c<=a;c++)i.dataI.plusAssign_za3lpa$(0);i.vertexIt.index=(l=i.numVertices,i.numVertices=l+1|0,l);var h=i.vertexIt;r.index=o.from.index,h.set_fs4kvg$(r),i.bounds.add_czzhiu$(i.vertexIt.position),i.hasChanged=!0;var d=i.numVertices-1|0;n.put_xwzc9p$(u,d)}if(!n.keys.contains_11rb$(o.to.index)){var f,_,m,$=o.to.index;i.checkBufferSizes_za3lpa$(),f=i.vertexSizeF;for(var y=1;y<=f;y++)i.dataF.plusAssign_mx4ult$(0);_=i.vertexSizeI;for(var v=1;v<=_;v++)i.dataI.plusAssign_za3lpa$(0);i.vertexIt.index=(m=i.numVertices,i.numVertices=m+1|0,m);var g=i.vertexIt;r.index=o.to.index,g.set_fs4kvg$(r),i.bounds.add_czzhiu$(i.vertexIt.position),i.hasChanged=!0;var b=i.numVertices-1|0;n.put_xwzc9p$($,b)}}var w,k=ct();for(w=t.iterator();w.hasNext();){var S=w.next();if(!k.contains_11rb$(S.id)){i.addTriIndices_qt1dr2$(x(n.get_11rb$(S.from.index)),x(n.get_11rb$(S.next.from.index)),x(n.get_11rb$(S.next.next.from.index)));var C=S.id;k.add_11rb$(C);var N=S.next.id;k.add_11rb$(N);var E=S.next.next.id;k.add_11rb$(E)}}return i},Object.defineProperty(jo.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_st01j9$_0},set:function(t){this.isDeleted_st01j9$_0=t}}),Object.defineProperty(jo.prototype,"x",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0|0)}}),Object.defineProperty(jo.prototype,"y",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+1|0)}}),Object.defineProperty(jo.prototype,"z",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+2|0)}}),jo.prototype.setPosition_eyxpjg$=function(t,i,n){this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0|0,t),this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+1|0,i),this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+2|0,n)},jo.prototype.getMeshVertex_fs4kvg$=function(t){return t.index=this.index,t},jo.prototype.getEdgeTo_n38rgs$=function(t){var e;e=this.edges;for(var i=0;i!==e.size;++i)if(this.edges.get_za3lpa$(i).to===t)return this.edges.get_za3lpa$(i);return null},jo.prototype.delete=function(){for(;!this.edges.isEmpty();)B(this.edges).deleteTriangle();this.isDeleted=!0},jo.prototype.updatePosition_czzhiu$=function(t){this.updatePosition_y2kzbl$(t.x,t.y,t.z)},jo.prototype.updatePosition_y2kzbl$=function(t,e,i){this.$outer.edgeHandler.checkedUpdateVertexPosition_efzdnr$(this,t,e,i)},jo.$metadata$={kind:$,simpleName:"HalfEdgeVertex",interfaces:[Sr]},Object.defineProperty(Ao.prototype,"from",{configurable:!0,get:function(){return this.from_t0m3rm$_0},set:function(t){this.from_t0m3rm$_0=t}}),Object.defineProperty(Ao.prototype,"to",{configurable:!0,get:function(){return this.to_z50l7l$_0},set:function(t){this.to_z50l7l$_0=t}}),Object.defineProperty(Ao.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_tjy89$_0},set:function(t){this.isDeleted_tjy89$_0=t}}),Object.defineProperty(Ao.prototype,"treeNode",{configurable:!0,get:function(){return this.treeNode_u2e3i4$_0},set:function(t){this.treeNode_u2e3i4$_0=t}}),Object.defineProperty(Ao.prototype,"id",{configurable:!0,get:function(){return e.Long.fromInt(this.from.index).shiftLeft(32).or(e.Long.fromInt(this.to.index))}}),Object.defineProperty(Ao.prototype,"triId",{configurable:!0,get:function(){var t=this.id,e=this.next.id,i=this.next.next.id,n=e.compareTo_11rb$(i)<=0?e:i;return t.compareTo_11rb$(n)<=0?t:n}}),Object.defineProperty(Ao.prototype,"next",{configurable:!0,get:function(){return null==this.next_t4scix$_0?pt("next"):this.next_t4scix$_0},set:function(t){this.next_t4scix$_0=t}}),Object.defineProperty(Ao.prototype,"opp",{configurable:!0,get:function(){return this.opp_nuqb1l$_0},set:function(t){this.opp_nuqb1l$_0=t}}),Ao.prototype.computeLength=function(){return this.from.distance_czzhiu$(this.to)},Ao.prototype.computeTriArea=function(){return Vn(this.from,this.to,this.next.to)},Ao.prototype.computeTriAspectRatio=function(){return Gn(this.from,this.to,this.next.to)},Ao.prototype.computeTriNormal_5s4mqq$=function(t){return this.to.subtract_2gj7b4$(this.from,this.$outer.tmpVec1_0),this.next.to.subtract_2gj7b4$(this.from,this.$outer.tmpVec2_0),this.$outer.tmpVec1_0.cross_2gj7b4$(this.$outer.tmpVec2_0,t),t.norm()},Ao.prototype.computeTriPlane_5s4mpv$=function(t){return this.computeTriNormal_5s4mqq$(this.$outer.tmpVec3_0),t.set_2qa7tb$(this.$outer.tmpVec3_0,-this.$outer.tmpVec3_0.dot_czzhiu$(this.from)),t},Ao.prototype.collapse_mx4ult$=function(t){this.$outer.collapseEdge_b49or$(this,t)},Ao.prototype.split_mx4ult$=function(t){return this.$outer.splitEdge_b49or$(this,t)},Ao.prototype.deleteEdge_0=function(){var t;this.$outer.edgeHandler.minusAssign_ebe40$(this),this.isDeleted=!0,this.from.edges.remove_11rb$(this),null!=(t=this.opp)&&(t.opp=null),this.treeNode=null,this.opp=null},Ao.prototype.deleteTriangle=function(){this.deleteEdge_0(),this.next.deleteEdge_0(),this.next.next.deleteEdge_0()},Ao.prototype.updateFrom_n38rgs$=function(t){this.$outer.edgeHandler.checkedUpdateEdgeFrom_870n7c$(this,t)},Ao.prototype.updateTo_n38rgs$=function(t){this.$outer.edgeHandler.checkedUpdateEdgeTo_870n7c$(this,t)},Ao.prototype.toString=function(){return this.from.index.toString()+" -> "+this.to.index},Ao.$metadata$={kind:$,simpleName:"HalfEdge",interfaces:[]},To.$metadata$={kind:$,simpleName:"HalfEdgeMesh",interfaces:[Fd]},Object.defineProperty(Ro.prototype,"numEdges",{configurable:!0,get:function(){return this.numEdges_wlm1ja$_0},set:function(t){this.numEdges_wlm1ja$_0=t}}),Ro.prototype.plusAssign_ebe40$=function(t){if(t.isDeleted){var i=qN.Log,n=vz.WARN,r=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,r,"edge was deleted before"),t.isDeleted=!1,this.rebuild()}this.edgeList.add_11rb$(t),this.numEdges=this.numEdges+1|0},Ro.prototype.minusAssign_ebe40$=function(t){if(t.isDeleted){var i=qN.Log,n=vz.WARN,r=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,r,"edge is already deleted"),this.rebuild()}else this.numEdges=this.numEdges-1|0},Ro.prototype.checkedUpdateEdgeTo_870n7c$=function(t,e){t.to=e},Ro.prototype.checkedUpdateEdgeFrom_870n7c$=function(t,e){t.from=e},Ro.prototype.checkedUpdateVertexPosition_efzdnr$=function(t,e,i,n){t.setPosition_eyxpjg$(e,i,n)},Ro.prototype.rebuild=function(){if(lt(this.edgeList,Io),this.numEdges!==this.edgeList.size){var t=qN.Log,i=vz.WARN,n=e.getKClassFromExpression(this).simpleName;i.level>=t.level.level&&t.printer(i,n,"Wrong edge count: "+this.numEdges+" != "+this.edgeList.size),this.numEdges=this.edgeList.size}},Lo.prototype.hasNext=function(){for(;this.i<this.this$ListEdgeHandler.edgeList.size&&this.this$ListEdgeHandler.edgeList.get_za3lpa$(this.i).isDeleted;)this.i=this.i+1|0;return this.i<this.this$ListEdgeHandler.edgeList.size},Lo.prototype.next=function(){var t;if(!this.hasNext())throw ht();return this.this$ListEdgeHandler.edgeList.get_za3lpa$((t=this.i,this.i=t+1|0,t))},Lo.$metadata$={kind:$,interfaces:[dt]},Ro.prototype.iterator=function(){return new Lo(this)},Ro.$metadata$={kind:$,simpleName:"ListEdgeHandler",interfaces:[Oo]},Bo.$metadata$={kind:st,simpleName:"CollapseStrategy",interfaces:[]},Fo.prototype.computeCollapsePosition_2pqe3s$=function(t,e,i){var n,r,o,s,a=0;n=t.vertex.edges;for(var l=0;l!==n.size;++l){var u=t.vertex.edges.get_za3lpa$(l);u.to!==e.vertex&&u.next.to!==e.vertex||(a=a+1|0)}if(a>2||a<(t.isBorder&&e.isBorder?1:2))return yt.MAX_VALUE;if(t.isStickyVertex&&e.isStickyVertex)return yt.MAX_VALUE;if(t.isStickyVertex)return i.set_czzhiu$(t.vertex),t.getError_czzhiu$(i)+e.getError_czzhiu$(i);if(e.isStickyVertex)return i.set_czzhiu$(e.vertex),t.getError_czzhiu$(i)+e.getError_czzhiu$(i);if(null!=(r=t.vertex.getEdgeTo_n38rgs$(e.vertex))&&null==r.next.opp&&null==r.next.next.opp)return yt.MAX_VALUE;if(null!=(o=e.vertex.getEdgeTo_n38rgs$(t.vertex))&&null==o.next.opp&&null==o.next.next.opp)return yt.MAX_VALUE;this.tmpQ.set_d4zu6l$(t.errQuadric),this.tmpQ.add_d4zu6l$(e.errQuadric),this.tmpQ.setRow_ky00rh$(3,ao().W_AXIS),this.tmpQ.invert_14dthe$(Ln)?(i.set_y2kzbl$(this.tmpQ.get_vux9f0$(0,3),this.tmpQ.get_vux9f0$(1,3),this.tmpQ.get_vux9f0$(2,3)),s=t.getError_czzhiu$(i)+e.getError_czzhiu$(i)):(e.vertex.subtract_2gj7b4$(t.vertex,i).scale_mx4ult$(.5).add_czzhiu$(t.vertex),s=t.vertex.distance_czzhiu$(e.vertex)/1e100);var p=s;return this.isRejected_0(t.vertex,e.vertex,i)||this.isRejected_0(e.vertex,t.vertex,i)?yt.MAX_VALUE:p},Fo.prototype.isRejected_0=function(t,e,i){var n,r;for(n=t.edges.iterator();n.hasNext();){var o=n.next();if(null==(r=o.to)||!r.equals(e)){if(o.computeTriNormal_5s4mqq$(this.tmpNrm0),this.newNormal_0(o,i,this.tmpNrm1),this.tmpNrm0.dot_czzhiu$(this.tmpNrm1)<0)return!0;if(Gn(i,o.to,o.next.to)>1e4)return!0}}return!1},Fo.prototype.newNormal_0=function(t,e,i){t.to.subtract_2gj7b4$(e,this.tmpPos0),t.next.to.subtract_2gj7b4$(e,this.tmpPos1),this.tmpPos0.cross_2gj7b4$(this.tmpPos1,i),i.norm()},Fo.$metadata$={kind:$,interfaces:[Bo]},Object.defineProperty(Vo.prototype,"isBorder",{configurable:!0,get:function(){return this.isBorder_qaaj7p$_0},set:function(t){this.isBorder_qaaj7p$_0=t}}),Object.defineProperty(Vo.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_clri7e$_0},set:function(t){this.isDeleted_clri7e$_0=t}}),Vo.prototype.consume_zdf47l$=function(t){this.isBorder=this.isBorder||t.isBorder,this.errQuadric.add_d4zu6l$(t.errQuadric),t.isDeleted=!0},Vo.prototype.getError_czzhiu$=function(t){return this.errQuadric.transform_5s4mpv$(this.tmpVec4_0.set_2qa7tb$(t,1)),this.tmpVec4_0.x*t.x+this.tmpVec4_0.y*t.y+this.tmpVec4_0.z*t.z+this.tmpVec4_0.w},Vo.prototype.addPlane_0=function(t){this.errQuadric.set_224j3y$(0,0,this.errQuadric.get_vux9f0$(0,0)+t.x*t.x),this.errQuadric.set_224j3y$(1,0,this.errQuadric.get_vux9f0$(1,0)+t.x*t.y),this.errQuadric.set_224j3y$(2,0,this.errQuadric.get_vux9f0$(2,0)+t.x*t.z),this.errQuadric.set_224j3y$(3,0,this.errQuadric.get_vux9f0$(3,0)+t.x*t.w),this.errQuadric.set_224j3y$(0,1,this.errQuadric.get_vux9f0$(0,1)+t.y*t.x),this.errQuadric.set_224j3y$(1,1,this.errQuadric.get_vux9f0$(1,1)+t.y*t.y),this.errQuadric.set_224j3y$(2,1,this.errQuadric.get_vux9f0$(2,1)+t.y*t.z),this.errQuadric.set_224j3y$(3,1,this.errQuadric.get_vux9f0$(3,1)+t.y*t.w),this.errQuadric.set_224j3y$(0,2,this.errQuadric.get_vux9f0$(0,2)+t.z*t.x),this.errQuadric.set_224j3y$(1,2,this.errQuadric.get_vux9f0$(1,2)+t.z*t.y),this.errQuadric.set_224j3y$(2,2,this.errQuadric.get_vux9f0$(2,2)+t.z*t.z),this.errQuadric.set_224j3y$(3,2,this.errQuadric.get_vux9f0$(3,2)+t.z*t.w),this.errQuadric.set_224j3y$(0,3,this.errQuadric.get_vux9f0$(0,3)+t.w*t.x),this.errQuadric.set_224j3y$(1,3,this.errQuadric.get_vux9f0$(1,3)+t.w*t.y),this.errQuadric.set_224j3y$(2,3,this.errQuadric.get_vux9f0$(2,3)+t.w*t.z),this.errQuadric.set_224j3y$(3,3,this.errQuadric.get_vux9f0$(3,3)+t.w*t.w)},Vo.$metadata$={kind:$,simpleName:"ErrorQuadric",interfaces:[]},Object.defineProperty(Go.prototype,"mesh_c14x7o$_0",{configurable:!0,get:function(){return null==this.mesh_c14x7o$_aesyuh$_0?pt("mesh"):this.mesh_c14x7o$_aesyuh$_0},set:function(t){this.mesh_c14x7o$_aesyuh$_0=t}}),Go.prototype.simplifyMesh_mnbsaa$=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.mesh_c14x7o$_0=t;var r=qN.Log,o=vz.DEBUG,s=e.getKClassFromExpression(this).simpleName;o.level>=r.level.level&&r.printer(o,s,"Simplifying mesh: "+t.faceCount+" faces / "+t.vertCount+" vertices...");var a=new Jz;this.quadrics_h71pfh$_0.clear(),this.candidates_gym04f$_0.clear(),this.termCrit.init_nbf0q6$(t);var l=t.faceCount/2|0;this.rebuildCollapseQueue_sifma0$_0();for(var u={v:0};this.candidates_gym04f$_0.isNotEmpty()&&this.candidates_gym04f$_0.peek().error<yt.MAX_VALUE&&!this.termCrit.isFinished_6w1xds$(t,u.v);){t.faceCount<l&&(this.reshapeTriangles_ps2mgc$_0(),l=t.faceCount/2|0);var p=this.candidates_gym04f$_0.poll();if(p.edge.isDeleted||p.q1.isDeleted||p.q2.isDeleted){var c=qN.Log,h=vz.WARN,d=e.getKClassFromExpression(this).simpleName;h.level>=c.level.level&&c.printer(h,d,"Invalid edge: already deleted!")}else if(p.edgeId.fromId===p.edge.from.index&&p.edgeId.toId===p.edge.to.index){var f=p.error;if(p.updateCollapsePosAndError(),f===p.error){if(!(p.error<yt.MAX_VALUE)){var _=qN.Log,m=vz.DEBUG,$=e.getKClassFromExpression(this).simpleName;m.level>=_.level.level&&_.printer(m,$,"No more collapsable edges");break}u.v=p.collapse()}else this.candidates_gym04f$_0.plusAssign_g91td9$(p)}else{var y=qN.Log,v=vz.ERROR,g=e.getKClassFromExpression(this).simpleName;v.level>=y.level.level&&y.printer(v,g,"Invalid edge: inconsistent vertex indices"),this.rebuildCollapseQueue_sifma0$_0()}}t.rebuild_dqye30$(i,n);var b=qN.Log,x=vz.DEBUG,w=e.getKClassFromExpression(this).simpleName;x.level>=b.level.level&&b.printer(x,w,"Mesh simplification done! "+t.faceCount+" faces / "+t.vertCount+" vertices remain, last error: "+u.v+", took "+MS(a.takeSecs(),3)+" s")},Go.prototype.reshapeTriangles_ps2mgc$_0=function(){var t,e=Mr(),i=Mr();for(t=this.mesh_c14x7o$_0.edgeHandler.distinctTriangleEdges().iterator();t.hasNext();){var n=t.next();if(n.computeTriAspectRatio()>50){var r=n.computeLength(),o=n.next.computeLength(),s=n.next.next.computeLength(),a=r>o&&r>s?n:o>r&&o>s?n.next:n.next.next;e.set_czzhiu$(n.to).subtract_czzhiu$(n.from).norm(),i.set_czzhiu$(n.next.from).subtract_czzhiu$(n.next.to);var l=1-e.dot_czzhiu$(i)/a.computeLength();l>.1&&l<.9&&a.split_mx4ult$(l)}}this.rebuildCollapseQueue_sifma0$_0()},Go.prototype.rebuildCollapseQueue_sifma0$_0=function(){var t;for(this.candidates_gym04f$_0.clear(),t=this.mesh_c14x7o$_0.edgeHandler.iterator();t.hasNext();){var e=t.next();this.insertEdge_56qw8l$_0(e)}},Go.prototype.insertEdge_56qw8l$_0=function(t){if(!this.excludedEdges.contains_11rb$(t)&&(t.from.index<t.to.index||null==t.opp)){var e,i=this.quadrics_h71pfh$_0,n=t.from.index,r=i.get_11rb$(n);if(null==r){var o=new Vo(t.from);o.isStickyVertex=this.stickyVertices.contains_11rb$(t.from);var s=o;i.put_xwzc9p$(n,s),e=s}else e=r;var a,l=e,u=this.quadrics_h71pfh$_0,p=t.to.index,c=u.get_11rb$(p);if(null==c){var h=new Vo(t.to);h.isStickyVertex=this.stickyVertices.contains_11rb$(t.to);var d=h;u.put_xwzc9p$(p,d),a=d}else a=c;var f=a;l.isStickyVertex&&f.isStickyVertex||this.keepBorders&&(l.isBorder||f.isBorder)||this.candidates_gym04f$_0.plusAssign_g91td9$(new Ho(this,t,l,f))}},Ho.prototype.updateCollapsePosAndError=function(){this.error=this.$outer.collapseStrategy.computeCollapsePosition_2pqe3s$(this.q1,this.q2,this.collapsePos)},Ho.prototype.collapse=function(){if(this.$outer.quadrics_h71pfh$_0.remove_11rb$(this.q2.vertex.index)!==this.q2)throw gt("Quadric removal failed!");var t,e,i=ct();for(this.collectAffectedEdges_0(this.q1.vertex,i),this.collectAffectedEdges_0(this.q2.vertex,i),this.$outer,t=i.iterator();t.hasNext();){var n=t.next();this.$outer.candidates_gym04f$_0.removeByVertexIndices_vux9f0$(n.from.index,n.to.index)}for(this.q1.consume_zdf47l$(this.q2),this.edge.collapse_mx4ult$(0),this.q1.vertex.updatePosition_czzhiu$(this.collapsePos),i.clear(),this.collectAffectedEdges_0(this.q1.vertex,i),this.$outer,e=i.iterator();e.hasNext();){var r=e.next();this.$outer.insertEdge_56qw8l$_0(r)}return this.error},Ho.prototype.collectAffectedEdges_0=function(t,e){var i;for(i=t.edges.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n);var r=n.next.next;e.add_11rb$(r)}},Ho.$metadata$={kind:$,simpleName:"CollapseCandidate",interfaces:[]},Wo.$metadata$={kind:$,simpleName:"EdgeId",interfaces:[]},Wo.prototype.component1=function(){return this.fromId},Wo.prototype.component2=function(){return this.toId},Wo.prototype.copy_vux9f0$=function(t,e){return new Wo(void 0===t?this.fromId:t,void 0===e?this.toId:e)},Wo.prototype.toString=function(){return"EdgeId(fromId="+e.toString(this.fromId)+", toId="+e.toString(this.toId)+")"},Wo.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.fromId)|0)+e.hashCode(this.toId)|0},Wo.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.fromId,t.fromId)&&e.equals(this.toId,t.toId)},Ko.prototype.isNotEmpty=function(){return!this.isEmpty()},Ko.prototype.peek=function(){return q(this.firstValue())},Ko.prototype.poll=function(){var t=this.firstValue(),e=t.removeAt_za3lpa$(bt(t));t.isEmpty()&&this.remove_11rb$(this.firstKey());var i=this.candidateMap,n=e.edgeId;return i.remove_11rb$(n),e},Ko.prototype.clear=function(){fS.prototype.clear.call(this),this.candidateMap.clear()},Ko.prototype.removeByVertexIndices_vux9f0$=function(t,e){var i=this.candidateMap.remove_11rb$(new Wo(t,e));return null!=i&&this.minusAssign_g91td9$(i),i},Ko.prototype.plusAssign_g91td9$=function(t){var e,i=t.error,n=this.get_11rb$(i);if(null==n){var r=M();this.put_xwzc9p$(i,r),e=r}else e=n;e.add_11rb$(t);var o=this.candidateMap,s=t.edgeId;o.put_xwzc9p$(s,t)},Ko.prototype.minusAssign_g91td9$=function(t){var e=this.get_11rb$(t.error);null!=e&&(e.remove_11rb$(t),e.isEmpty()&&this.remove_11rb$(t.error));var i=this.candidateMap,n=t.edgeId;i.remove_11rb$(n)},Ko.$metadata$={kind:$,simpleName:"CollapseCandidates",interfaces:[fS]},Go.$metadata$={kind:$,simpleName:"MeshSimplifier",interfaces:[]},Xo.prototype.init_nbf0q6$=function(t){},Xo.$metadata$={kind:st,simpleName:"TermCriterion",interfaces:[]},Yo.prototype.init_nbf0q6$=function(t){this.targetFaceCnt=F(ot(t.faceCount*this.closure$factor))},Yo.prototype.isFinished_6w1xds$=function(t,e){return t.faceCount<=this.targetFaceCnt},Yo.$metadata$={kind:$,interfaces:[Xo]},Zo.$metadata$={kind:$,simpleName:"GlslType",interfaces:[P]},Zo.values=function(){return[Qo(),ts(),es(),is(),ns(),rs(),os(),ss(),as(),ls(),us()]},Zo.valueOf_61zpoe$=function(t){switch(t){case"FLOAT":return Qo();case"VEC_2F":return ts();case"VEC_3F":return es();case"VEC_4F":return is();case"INT":return ns();case"VEC_2I":return rs();case"VEC_3I":return os();case"VEC_4I":return ss();case"MAT_2F":return as();case"MAT_3F":return ls();case"MAT_4F":return us();default:T("No enum constant de.fabmax.kool.pipeline.GlslType."+t)}},ps.prototype.toString=function(){return this.name},cs.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hs=null;function ds(){return null===hs&&new cs,hs}function fs(t,e){var i;$s(),ua.call(this,t,e),this.shadowPipelines_j0os6i$_0=z(),this.cullMethod=null,this.onAfterCollectDrawCommands.add_11rb$((i=this,function(t){var e;for(e=i.drawQueue.commands.iterator();e.hasNext();){var n=e.next();n.pipeline=i.getShadowPipeline_sbx4mf$(n.mesh,t)}return s}))}function _s(){ms=this}ps.$metadata$={kind:$,simpleName:"Attribute",interfaces:[]},ps.prototype.component1=function(){return this.name},ps.prototype.component2=function(){return this.type},ps.prototype.copy_xzl57b$=function(t,e){return new ps(void 0===t?this.name:t,void 0===e?this.type:e)},ps.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.type)|0},ps.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.type,t.type)},fs.prototype.getShadowPipeline_sbx4mf$=function(t,e){var i,n,r,o,s=null!=(r=null!=(n=this.cullMethod)?n:null!=(i=t.getPipeline_aemszp$(e))?i.cullMethod:null)?r:xl(),a=this.shadowPipelines_j0os6i$_0,l=t.id,u=a.get_11rb$(l);if(null==u){var p=this.createPipeline_wgobnr$(t,s,e);a.put_xwzc9p$(l,p),o=p}else o=u;return o},fs.prototype.createPipeline_wgobnr$=function(t,e,i){var n,r=new Ru("DepthShader"),o=new Lu(r),a=o.premultipliedMvpNode().outMvpMat;if(null!=t.instances&&(a=o.multiplyNode_ze33is$(a,o.instanceAttrModelMat().output).output),null!=t.skin){var l=o.skinTransformNode_78eraa$(o.attrJoints().output,o.attrWeights().output);a=o.multiplyNode_ze33is$(a,l.outJointMat).output}var p={v:o.attrPositions().output};if(null!=(n=t.morphWeights)){var c=t.geometry.getMorphAttributes();if(!c.isEmpty()){var h,d,f=o.morphWeightsNode_za3lpa$(n.length),_=M();for(h=c.iterator();h.hasNext();){var m=h.next();u(m.name,ds().POSITIONS.name)&&_.add_11rb$(m)}for(d=_.iterator();d.hasNext();){var $=d.next(),y=o.getMorphWeightNode_dcktnw$(c.indexOf_11rb$($),f),v=o.multiplyNode_ze33is$(o.attributeNode_nm2vx5$($).output,y.outWeight);p.v=o.addNode_ze33is$(p.v,v.output).output}}}o.positionOutput=o.vec4TransformNode_9krp9t$(p.v,a).outVec4;var g=new Du(r);g.colorOutput_a3v4si$(g.constVec4f_czzhhz$(V$().RED));var b,x=new sc(r);return x.onPipelineSetup.add_11rb$((b=e,function(t,e,i){return t.blendMode=rl(),t.cullMethod=b,s})),x.createPipeline_sbx4mf$(t,i)},fs.prototype.dispose_aemszp$=function(t){var e;for(ua.prototype.dispose_aemszp$.call(this,t),e=wt(this.shadowPipelines_j0os6i$_0.values).iterator();e.hasNext();){var i=e.next();t.disposePipeline_i7l2g2$(i)}},_s.prototype.defaultSetup_vux9f0$=function(t,e){var i=new ia;return i.name="DepthMapPass",i.setSize_vux9f0$(t,e),i.clearColorTexture(),i.setDepthTexture_6taknv$(!1),new ea(i)},_s.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ms=null;function $s(){return null===ms&&new _s,ms}function ys(t,e){var i;Ms(),fs.call(this,t,e),this.name="NormalLinearDepthMapPass",this.onAfterCollectDrawCommands.add_11rb$((i=this,function(t){return i.clearColor=new B$(0,1,0,1),s}))}function vs(t,e){qu.call(this,"normalLinearDepth",e),this.inNormals=t,this.outColor=new Bu(new $u("normaLinearDepth"),this)}function gs(){Os=this}fs.$metadata$={kind:$,simpleName:"DepthMapPass",interfaces:[ua]},ys.prototype.createPipeline_wgobnr$=function(t,e,i){if(!t.geometry.hasAttribute_nm2vx5$(ds().NORMALS))return null;var n,r=new Ru("NormalLinearDepth Shader"),o={v:null},a=new Lu(r),l=a.mvpNode(),p=a.multiplyNode_ze33is$(l.outViewMat,l.outModelMat).output,c=l.outMvpMat;if(null!=t.instances&&(c=a.multiplyNode_ze33is$(c,a.instanceAttrModelMat().output).output,p=a.multiplyNode_ze33is$(p,a.instanceAttrModelMat().output).output),null!=t.skin){var h=a.skinTransformNode_78eraa$(a.attrJoints().output,a.attrWeights().output);c=a.multiplyNode_ze33is$(c,h.outJointMat).output,p=a.multiplyNode_ze33is$(p,h.outJointMat).output}var d={v:a.attrPositions().output},f={v:a.attrNormals().output};if(null!=(n=t.morphWeights)){var _=t.geometry.getMorphAttributes();if(!_.isEmpty()){var m,$,y=a.morphWeightsNode_za3lpa$(n.length),v=M();for(m=_.iterator();m.hasNext();){var g=m.next();u(g.name,ds().POSITIONS.name)&&v.add_11rb$(g)}for($=v.iterator();$.hasNext();){var b=$.next(),x=a.getMorphWeightNode_dcktnw$(_.indexOf_11rb$(b),y),w=a.multiplyNode_ze33is$(a.attributeNode_nm2vx5$(b).output,x.outWeight);d.v=a.addNode_ze33is$(d.v,w.output).output}var z,k,S=M();for(z=_.iterator();z.hasNext();){var C=z.next();u(C.name,ds().NORMALS.name)&&S.add_11rb$(C)}for(k=S.iterator();k.hasNext();){var N=k.next(),E=a.getMorphWeightNode_dcktnw$(_.indexOf_11rb$(N),y),P=a.multiplyNode_ze33is$(a.attributeNode_nm2vx5$(N).output,E.outWeight);f.v=a.addNode_ze33is$(f.v,P.output).output}}}var T=a.vec3TransformNode_vid4wo$(f.v,p,0);o.v=a.stageInterfaceNode_iikjwn$("ifNormals",T.outVec3),a.positionOutput=a.vec4TransformNode_9krp9t$(d.v,c).outVec4;var O=new Du(r),j=O.flipBacksideNormalNode_r20yfm$(o.v.output).outNormal,A=O.addNode_u9w9by$(new vs(j,O.stage));O.colorOutput_a3v4si$(A.outColor);var R,I=new sc(r);return I.onPipelineSetup.add_11rb$((R=e,function(t,e,i){return t.blendMode=rl(),t.cullMethod=R,s})),I.createPipeline_sbx4mf$(t,i)},vs.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                float d = gl_FragCoord.z / gl_FragCoord.w;\n                "+this.outColor.declare()+" = vec4(normalize("+this.inNormals.ref3f()+"), -d);\n            ")},vs.$metadata$={kind:$,simpleName:"NormalLinearDepthNode",interfaces:[qu]},gs.prototype.normalLinearDepthSetup_0=function(t,e){var i=new ia;return i.name="NormalLinearDepthMapPass",i.setSize_vux9f0$(t,e),i.clearDepthTexture(),i.addColorTexture_farcsl$(Jc()),new ea(i)},gs.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bs,xs,ws,zs,ks,Ss,Cs,Ns,Es,Ps,Ts,Os=null;function Ms(){return null===Os&&new gs,Os}function js(t,e,i,n){return void 0===i&&(i=e),n=n||Object.create(ys.prototype),ys.call(n,t,Ms().normalLinearDepthSetup_0(e,i)),n}function As(t,i){this.set=t,this.descriptors=i,this.longHash=null;var n,r={v:new kt(e.Long.ZERO)};for(n=this.descriptors.iterator();n.hasNext();){var o=n.next(),s=r.v,a=new kt(e.Long.fromInt(71023)),l=new kt(s.data.multiply(a.data)),u=o.longHash;r.v=new kt(l.data.add(u.data))}this.longHash=r.v}function Rs(){this.descriptors=M()}function Is(t,i,n,r){this.binding=i,this.type=n,this.name=t.name,this.stages=q$(t.stages),this.longHash=null;var o=r,s=o,a=new kt(e.Long.fromInt(71023)),l=new kt(s.data.multiply(a.data)),u=rt(t.name),p=new kt(e.Long.fromInt(u)),c=o=new kt(l.data.add(p.data)),h=new kt(e.Long.fromInt(71023)),d=new kt(c.data.multiply(h.data)),f=this.type.hashCode(),_=new kt(e.Long.fromInt(f));o=new kt(d.data.add(_.data)),this.longHash=o}function Ls(){this.name="",this.stages=ct()}function Ds(t,e,i){Is.call(this,t,e,Ws(),i),this.arraySize=t.arraySize,this.isDepthSampler=t.isDepthSampler,this.onUpdate=t.onUpdate;var n,r=R(this.arraySize);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.textures=r}function qs(){Ls.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="texture"}function Bs(t,e,i){Is.call(this,t,e,Ks(),i),this.arraySize=t.arraySize,this.isDepthSampler=t.isDepthSampler,this.onUpdate=t.onUpdate;var n,r=R(this.arraySize);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.textures=r}function Fs(){Ls.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="cubeTexture"}function Us(t,e,i,n){Is.call(this,t,e,Xs(),n),this.uniforms=i,this.instanceName=t.instanceName,this.onUpdate=t.onUpdate,this.layout_0=new Bc(this.uniforms),this.size=this.layout_0.size}function Vs(){Ls.call(this),this.instanceName=null,this.uniforms=M(),this.onUpdate=null,this.onCreate=null,this.name="Ubo"}function Gs(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Hs(){Hs=function(){},bs=new Gs("IMAGE_SAMPLER",0),xs=new Gs("CUBE_IMAGE_SAMPLER",1),ws=new Gs("UNIFORM_BUFFER",2)}function Ws(){return Hs(),bs}function Ks(){return Hs(),xs}function Xs(){return Hs(),ws}function Ys(t){this.renderPass=t,this.mesh_aolzlu$_0=this.mesh_aolzlu$_0,this.pipeline=null,this.modelMat=new En,this.viewMat=new En,this.projMat=new En,this.mvpMat=new En,this.mvpMatD_0=new bn}function Zs(t){this.renderPass=t,this.mutCommands_0=M(),this.commandPool_0=M(),this.meshFilter=Js}function Js(t){return!0}function Qs(){}function ta(t,e){Cl.call(this,t),this.config=e,this.isEnabled=!0,this.width_6fsav1$_0=this.config.width,this.height_4loxs4$_0=this.config.height;var i=new kd;i.projCorrectionMode=wd(),this.camera_et6fa$_0=i,this.onSetupMipLevel=null,this.name=this.config.name;var n,r=R(this.config.nColorAttachments);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.clearColors=r,this.applyMipViewport_za3lpa$(0),0===this.width&&(this.width=16),0===this.height&&(this.height=16)}function ea(t){var i,n,r;if(this.name=t.name,this.width=t.width,this.height=t.height,this.mipLevels=t.mipLevels,this.drawMipLevels=t.drawMipLevels,this.depthRenderTarget=t.depthRenderTarget,this.colorRenderTarget=t.colorRenderTarget,n=this.depthRenderTarget===aa()&&null!=(i=t.depthAttachment)?new na(i):null,this.depthAttachment=n,this.colorRenderTarget===aa()){var o,s=t.colorAttachments,a=w(j(s,10));for(o=s.iterator();o.hasNext();){var l=o.next();a.add_11rb$(new na(l))}r=a}else r=Nt();if(this.colorAttachments=r,this.nColorAttachments=this.colorAttachments.size,this.colorRenderTarget===aa()&&this.colorAttachments.isEmpty())throw gt("colorAttachments must be configured if colorRenderTarget is TEXTURE");var u=this.colorRenderTarget===la();if(u&&(u=!t.colorAttachments.isEmpty()),u){var p=qN.Log,c=vz.WARN,h=e.getKClassFromExpression(this).simpleName;c.level>=p.level.level&&p.printer(c,h,"colorAttachments are ignored if colorRenderTarget is RENDER_BUFFER")}if(this.depthRenderTarget===aa()&&null==this.depthAttachment)throw gt("depthAttachment must be configured if depthRenderTarget is TEXTURE");if(this.depthRenderTarget===la()&&null!=t.depthAttachment){var d=qN.Log,f=vz.WARN,_=e.getKClassFromExpression(this).simpleName;f.level>=d.level.level&&d.printer(f,_,"depthAttachment is ignored if depthRenderTarget is RENDER_BUFFER")}}function ia(){this.name="OffscreenRenderPass",this.width=0,this.height=0,this.mipLevels=1,this.drawMipLevels=!0,this.colorRenderTarget=aa(),this.depthRenderTarget=la(),this.colorAttachments=M(),this.depthAttachment=null}function na(t){this.colorFormat=t.colorFormat,this.minFilter=t.minFilter,this.magFilter=t.magFilter,this.addressModeU=t.addressModeU,this.addressModeV=t.addressModeV,this.depthCompareOp=t.depthCompareOp,this.maxAnisotropy=1,this.providedTexture=t.providedTexture}function ra(){this.colorFormat=Kc(),this.minFilter=Sh(),this.magFilter=Sh(),this.addressModeU=Eh(),this.addressModeV=Eh(),this.depthCompareOp=pl(),this.providedTexture=null}function oa(t,e){P.call(this),this.name$=t,this.ordinal$=e}function sa(){sa=function(){},zs=new oa("TEXTURE",0),ks=new oa("RENDER_BUFFER",1)}function aa(){return sa(),zs}function la(){return sa(),ks}function ua(t,e){ta.call(this,t,e),this.impl_8be2vx$=new IS(this),this.depthTexture=this.makeDepthAttachmentTex_qnmoqa$_0(),this.colorTextures=this.makeColorAttachmentTexs_o5wgst$_0(),this.copyTargetsColor=M()}function pa(t,e){ta.call(this,t,e),this.impl_8be2vx$=new LS(this),this.depthTexture=this.makeDepthAttachmentTex_17p1u7$_0(),this.colorTextures=this.makeColorAttachmentTexs_gs6cwg$_0(),this.copyTargetsColor=M(),this.onSetupView_3plctr$_0=this.onSetupView_3plctr$_0;var i,n=R(6);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new Zs(this);if(this.drawQueues=n,this.defaultCubeMapCameraConfig_ubu93h$_0(),e.depthRenderTarget===aa())throw Pt("CubeMapDepthTexture not yet implemented");if(e.colorAttachments.size>1)throw Pt("CubeMap multiple render targets not yet implemented")}function ca(t,e){this.lookAt=t,this.up=e}function ha(t,e,i){P.call(this),this.index=i,this.name$=t,this.ordinal$=e}function da(){da=function(){},Ss=new ha("FRONT",0,0),Cs=new ha("BACK",1,1),Ns=new ha("LEFT",2,2),Es=new ha("RIGHT",3,3),Ps=new ha("UP",4,4),Ts=new ha("DOWN",5,5)}function fa(){return da(),Ss}function _a(){return da(),Cs}function ma(){return da(),Ns}function $a(){return da(),Es}function ya(){return da(),Ps}function va(){return da(),Ts}function ga(){return[fa(),_a(),ma(),$a(),ya(),va()]}function ba(t){var i;el(),this.name=t.name,this.pipelineHash=null,this.pipelineInstanceId=(i=el().instanceId_0,el().instanceId_0=i.inc(),i),this.cullMethod=t.cullMethod,this.blendMode=t.blendMode,this.depthCompareOp=t.depthTest,this.isWriteDepth=t.isWriteDepth,this.lineWidth=t.lineWidth,this.layout=null,this.shaderCode=null;var n,r,o=t.vertexLayout.create(),s=t.descriptorSetLayouts,a=w(j(s,10)),l=0;for(n=s.iterator();n.hasNext();){var u=n.next();a.add_11rb$(u.create_za3lpa$(J((l=(r=l)+1|0,r))))}var p,c=a,h=t.pushConstantRanges,d=w(j(h,10));for(p=h.iterator();p.hasNext();){var f=p.next();d.add_11rb$(f.create())}var _=d;this.layout=new xa(o,c,_),this.shaderCode=t.shaderCodeGenerator(this.layout);var m=this.cullMethod.hashCode(),$={v:new kt(e.Long.fromInt(m))},y=$.v,v=new kt(e.Long.fromInt(71023)),g=new kt(y.data.multiply(v.data)),b=this.depthCompareOp.hashCode(),x=new kt(e.Long.fromInt(b));$.v=new kt(g.data.add(x.data));var z=$.v,k=new kt(e.Long.fromInt(71023)),S=new kt(z.data.multiply(k.data)),C=rt(this.isWriteDepth),N=new kt(e.Long.fromInt(C));$.v=new kt(S.data.add(N.data));var E=$.v,P=new kt(e.Long.fromInt(71023)),T=new kt(E.data.multiply(P.data)),O=rt(this.lineWidth),M=new kt(e.Long.fromInt(O));$.v=new kt(T.data.add(M.data));var A=$.v,R=new kt(e.Long.fromInt(71023)),I=new kt(A.data.multiply(R.data)),L=o.longHash;$.v=new kt(I.data.add(L.data));var D,q,B=$.v,F=new kt(e.Long.fromInt(71023)),U=new kt(B.data.multiply(F.data)),V=this.shaderCode.longHash;for($.v=new kt(U.data.add(V.data)),D=c.iterator();D.hasNext();){var G=D.next(),H=$.v,W=new kt(e.Long.fromInt(71023)),K=new kt(H.data.multiply(W.data)),X=G.longHash;$.v=new kt(K.data.add(X.data))}for(q=_.iterator();q.hasNext();){var Y=q.next(),Z=$.v,Q=new kt(e.Long.fromInt(71023)),tt=new kt(Z.data.multiply(Q.data)),et=Y.longHash;$.v=new kt(tt.data.add(et.data))}this.pipelineHash=$.v}function xa(t,e,i){this.vertices=t,this.descriptorSets=e,this.pushConstantRanges=i}function wa(){this.name="pipeline",this.cullMethod=xl(),this.blendMode=rl(),this.depthTest=dl(),this.isWriteDepth=!0,this.lineWidth=1,this.shaderCodeGenerator_j5ii45$_0=this.shaderCodeGenerator_j5ii45$_0,this.vertexLayout=new cd,this.descriptorSetLayouts=M(),this.pushConstantRanges=M()}function za(){tl=this,this.instanceId_0=Tt}ys.$metadata$={kind:$,simpleName:"NormalLinearDepthMapPass",interfaces:[fs]},As.prototype.getUniformBuffer_61zpoe$=function(t){var i,n,r=this.descriptors;t:do{var o;for(o=r.iterator();o.hasNext();){var s=o.next();if(e.isType(s,Us)&&zt(s.name,t)){n=s;break t}}throw new _t("Collection contains no element matching the predicate.")}while(0);return e.isType(i=n,Us)?i:c()},As.prototype.getTextureSampler_61zpoe$=function(t){var i,n,r=this.descriptors;t:do{var o;for(o=r.iterator();o.hasNext();){var s=o.next();if(e.isType(s,Ds)&&zt(s.name,t)){n=s;break t}}throw new _t("Collection contains no element matching the predicate.")}while(0);return e.isType(i=n,Ds)?i:c()},Rs.prototype.unaryPlus_ngusss$=function(t){this.descriptors.add_11rb$(t)},Rs.prototype.uniformBuffer_2ydyu8$=function(t,e,i){var n=new Vs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Rs.prototype.texture_j3b8s3$=function(t,e,i){var n=new qs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Rs.prototype.cubeMap_kh2rdl$=function(t,e,i){var n=new Fs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Rs.prototype.create_za3lpa$=function(t){for(var e=this.descriptors.size,i=w(e),n=0;n<e;n++)i.add_11rb$(this.descriptors.get_za3lpa$(n).create_za3lpa$(n));return new As(t,i)},Rs.prototype.clear=function(){this.descriptors.clear()},Rs.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},As.$metadata$={kind:$,simpleName:"DescriptorSetLayout",interfaces:[]},Ls.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Is.$metadata$={kind:$,simpleName:"Descriptor",interfaces:[]},Object.defineProperty(Ds.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),qs.prototype.create_za3lpa$=function(t){var i,n=Ws().hashCode(),r=new kt(e.Long.fromInt(n)),o=new kt(e.Long.fromInt(71023)),s=new Ds(this,t,new kt(r.data.multiply(o.data)));return null!=(i=this.onCreate)&&i(s),s},qs.$metadata$={kind:$,simpleName:"Builder",interfaces:[Ls]},Ds.$metadata$={kind:$,simpleName:"TextureSampler",interfaces:[Is]},Object.defineProperty(Bs.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),Fs.prototype.create_za3lpa$=function(t){var i,n=Ks().hashCode(),r=new kt(e.Long.fromInt(n)),o=new kt(e.Long.fromInt(71023)),s=new Bs(this,t,new kt(r.data.multiply(o.data)));return null!=(i=this.onCreate)&&i(s),s},Fs.$metadata$={kind:$,simpleName:"Builder",interfaces:[Ls]},Bs.$metadata$={kind:$,simpleName:"CubeMapSampler",interfaces:[Is]},Us.prototype.putTo_l6oshk$=function(t){this.layout_0.putTo_l6oshk$(t),t.flip()},Us.prototype.uniform_ww73n8$=function(t){var i;return null==(i=this.uniforms.get_za3lpa$(t))||e.isType(i,W)?i:c()},Vs.prototype.unaryPlus_wq3w46$=function(t){this.uniforms.add_11rb$(t)},Vs.prototype.create_za3lpa$=function(t){for(var i,n=this.uniforms.size,r=w(n),o=0;o<n;o++)r.add_11rb$(this.uniforms.get_za3lpa$(o)());var s,a=r,l=Xs().hashCode(),u=new kt(e.Long.fromInt(l)),p=new kt(e.Long.fromInt(71023)),c={v:new kt(u.data.multiply(p.data))};for(s=a.iterator();s.hasNext();){var h=s.next(),d=c.v,f=new kt(e.Long.fromInt(71023)),_=new kt(d.data.multiply(f.data)),m=e.getKClassFromExpression(h).hashCode(),$=new kt(e.Long.fromInt(m));c.v=new kt(_.data.add($.data));var y=c.v,v=new kt(e.Long.fromInt(71023)),g=new kt(y.data.multiply(v.data)),b=rt(h.name),x=new kt(e.Long.fromInt(b));c.v=new kt(g.data.add(x.data))}var z=new Us(this,t,a,c.v);return null!=(i=this.onCreate)&&i(z),z},Vs.$metadata$={kind:$,simpleName:"Builder",interfaces:[Ls]},Us.$metadata$={kind:$,simpleName:"UniformBuffer",interfaces:[Is]},Gs.$metadata$={kind:$,simpleName:"DescriptorType",interfaces:[P]},Gs.values=function(){return[Ws(),Ks(),Xs()]},Gs.valueOf_61zpoe$=function(t){switch(t){case"IMAGE_SAMPLER":return Ws();case"CUBE_IMAGE_SAMPLER":return Ks();case"UNIFORM_BUFFER":return Xs();default:T("No enum constant de.fabmax.kool.pipeline.DescriptorType."+t)}},Object.defineProperty(Ys.prototype,"mesh",{configurable:!0,get:function(){return null==this.mesh_aolzlu$_0?pt("mesh"):this.mesh_aolzlu$_0},set:function(t){this.mesh_aolzlu$_0=t}}),Ys.prototype.captureMatrices=function(){this.modelMat.set_d4zu6l$(this.mesh.modelMat),this.viewMat.set_d4zu6l$(this.renderPass.camera.view),this.projMat.set_d4zu6l$(this.renderPass.camera.proj),this.renderPass.camera.viewProj.mul_u47j3u$(this.mesh.modelMat,this.mvpMatD_0),this.mvpMat.set_d4zu6l$(this.mvpMatD_0)},Ys.$metadata$={kind:$,simpleName:"DrawCommand",interfaces:[]},Object.defineProperty(Zs.prototype,"commands",{configurable:!0,get:function(){return this.mutCommands_0}}),Zs.prototype.clear=function(){this.commandPool_0.addAll_brywnq$(this.mutCommands_0),this.mutCommands_0.clear()},Zs.prototype.addMesh_sbx4mf$=function(t,e){var i;if(this.meshFilter(t)){var n=this.commandPool_0.isEmpty()?new Ys(this.renderPass):this.commandPool_0.removeAt_za3lpa$(bt(this.commandPool_0));n.mesh=t,n.pipeline=t.getPipeline_aemszp$(e),n.captureMatrices(),this.mutCommands_0.add_11rb$(n),i=n}else i=null;return i},Zs.$metadata$={kind:$,simpleName:"DrawQueue",interfaces:[]},Qs.$metadata$={kind:st,simpleName:"LoadedTexture",interfaces:[]},Object.defineProperty(ta.prototype,"width",{configurable:!0,get:function(){return this.width_6fsav1$_0},set:function(t){this.width_6fsav1$_0=t}}),Object.defineProperty(ta.prototype,"height",{configurable:!0,get:function(){return this.height_4loxs4$_0},set:function(t){this.height_4loxs4$_0=t}}),Object.defineProperty(ta.prototype,"camera",{configurable:!0,get:function(){return this.camera_et6fa$_0},set:function(t){this.camera_et6fa$_0=t}}),ta.prototype.getColorTexProps_za3lpa$=function(t){return void 0===t&&(t=0),this.config.colorAttachments.get_za3lpa$(t).getTextureProps_6taknv$(this.config.mipLevels>1)},ta.prototype.getMipWidth_za3lpa$=function(t){return t<=0?this.width:this.width>>t},ta.prototype.getMipHeight_za3lpa$=function(t){return t<=0?this.height:this.height>>t},ta.prototype.applyMipViewport_za3lpa$=function(t){this.viewport.set_tjonv8$(0,0,this.getMipWidth_za3lpa$(t),this.getMipHeight_za3lpa$(t))},ta.prototype.resize_w70mbp$=function(t,i,n){var r=qN.Log,o=vz.DEBUG,s=e.getKClassFromExpression(this).simpleName;if(o.level>=r.level.level&&r.printer(o,s,"OffscreenPass "+Ct(this.name)+" resized to "+t+" x "+i),0===this.config.width&&0===this.config.height)this.applySize_w70mbp$(t,i,n),this.applyMipViewport_za3lpa$(0);else{var a=qN.Log,l=vz.ERROR,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"OffscreenRenderPass "+Ct(this.name)+" cannot be resized: Size is fixed to "+this.config.width+" x "+this.config.height)}},ta.prototype.applySize_w70mbp$=function(t,e,i){this.width=t,this.height=e},ea.$metadata$={kind:$,simpleName:"Config",interfaces:[]},ia.prototype.setDynamicSize=function(){this.width=0,this.height=0},ia.prototype.setSize_vux9f0$=function(t,e){this.width=t,this.height=e},ia.prototype.addMipLevels_ydzd23$=function(t,e,i){void 0===t&&(t=this.width),void 0===e&&(e=this.height),void 0===i&&(i=!0),this.mipLevels=Un(t,e),this.drawMipLevels=i},ia.prototype.clearDepthTexture=function(){this.depthRenderTarget=la(),this.depthAttachment=null},ia.prototype.setDepthTexture_6taknv$=function(t){this.depthRenderTarget=aa();var e=new ra;t?(e.minFilter=Sh(),e.magFilter=Sh(),e.depthCompareOp=dl()):(e.minFilter=kh(),e.magFilter=kh(),e.depthCompareOp=pl()),this.depthAttachment=e},ia.prototype.clearColorTexture=function(){this.colorRenderTarget=la(),this.colorAttachments.clear()},ia.prototype.addColorTexture_farcsl$=function(t){this.colorRenderTarget=aa();var e=this.colorAttachments,i=new ra;i.colorFormat=t,e.add_11rb$(i)},ia.$metadata$={kind:$,simpleName:"ConfigBuilder",interfaces:[]},Object.defineProperty(na.prototype,"isProvided",{configurable:!0,get:function(){return null!=this.providedTexture}}),na.prototype.getTextureProps_6taknv$=function(t){return new xh(this.colorFormat,this.addressModeU,this.addressModeV,Eh(),this.minFilter,this.magFilter,t,this.maxAnisotropy)},na.$metadata$={kind:$,simpleName:"TextureAttachmentConfig",interfaces:[]},ra.$metadata$={kind:$,simpleName:"TextureAttachmentConfigBuilder",interfaces:[]},oa.$metadata$={kind:$,simpleName:"RenderTarget",interfaces:[P]},oa.values=function(){return[aa(),la()]},oa.valueOf_61zpoe$=function(t){switch(t){case"TEXTURE":return aa();case"RENDER_BUFFER":return la();default:T("No enum constant de.fabmax.kool.pipeline.OffscreenRenderPass.RenderTarget."+t)}},ta.$metadata$={kind:$,simpleName:"OffscreenRenderPass",interfaces:[Cl]},Object.defineProperty(ua.prototype,"colorTexture",{configurable:!0,get:function(){return this.colorTextures.isEmpty()?null:this.colorTextures.get_za3lpa$(0)}}),ua.prototype.copyColor=function(){var t=new Qc(Ct(this.name)+"-copy-"+this.copyTargetsColor.size,this.getColorTexProps_za3lpa$());return this.copyTargetsColor.add_11rb$(t),t},ua.prototype.dispose_aemszp$=function(t){var e;ta.prototype.dispose_aemszp$.call(this,t),this.impl_8be2vx$.dispose_aemszp$(t),t.runDelayed_hd6vpk$(3,(e=this,function(t){var i,n;null==(null!=(i=e.config.depthAttachment)?i.providedTexture:null)&&null!=(n=e.depthTexture)&&n.dispose();var r,o,a=0;for(r=e.colorTextures.iterator();r.hasNext();){var l=r.next(),u=e,p=J((a=(o=a)+1|0,o));u.config.colorAttachments.get_za3lpa$(p).isProvided||l.dispose()}return s}))},ua.prototype.applySize_w70mbp$=function(t,e,i){ta.prototype.applySize_w70mbp$.call(this,t,e,i),this.impl_8be2vx$.applySize_w70mbp$(t,e,i)},ua.prototype.makeColorAttachmentTexs_o5wgst$_0=function(){var t,e,i=this.config.colorAttachments,n=w(j(i,10)),r=0;for(t=i.iterator();t.hasNext();){var o,s=t.next(),a=n.add_11rb$,l=J((r=(e=r)+1|0,e));o=s.isProvided?x(s.providedTexture):new Qc(Ct(this.name)+"_color["+l+"]",s.getTextureProps_6taknv$(this.config.mipLevels>1)),a.call(n,o)}return n},ua.prototype.makeDepthAttachmentTex_qnmoqa$_0=function(){var t,e,i;null!=(t=this.config.depthAttachment)?(i=t.isProvided?x(t.providedTexture):new Qc(Ct(this.name)+"_depth",t.getTextureProps_6taknv$(this.config.mipLevels>1)),e=i):e=null;return e},ua.$metadata$={kind:$,simpleName:"OffscreenRenderPass2d",interfaces:[ta]},Object.defineProperty(pa.prototype,"colorTexture",{configurable:!0,get:function(){return this.colorTextures.isEmpty()?null:this.colorTextures.get_za3lpa$(0)}}),Object.defineProperty(pa.prototype,"onSetupView",{configurable:!0,get:function(){return null==this.onSetupView_3plctr$_0?pt("onSetupView"):this.onSetupView_3plctr$_0},set:function(t){this.onSetupView_3plctr$_0=t}}),pa.prototype.copyColor=function(){var t=new bh(Ct(this.name)+"-"+this.copyTargetsColor.size,this.getColorTexProps_za3lpa$());return this.copyTargetsColor.add_11rb$(t),t},pa.prototype.collectDrawCommands_aemszp$=function(t){var e,i;for(e=ga(),i=0;i!==e.length;++i){var n=e[i];this.drawQueue=this.drawQueues[n.index],this.onSetupView(n,t),ta.prototype.collectDrawCommands_aemszp$.call(this,t)}},pa.prototype.dispose_aemszp$=function(t){var e;ta.prototype.dispose_aemszp$.call(this,t),this.impl_8be2vx$.dispose_aemszp$(t),t.runDelayed_hd6vpk$(3,(e=this,function(t){var i,n;null==(null!=(i=e.config.depthAttachment)?i.providedTexture:null)&&null!=(n=e.depthTexture)&&n.dispose();var r,o,a=0;for(r=e.colorTextures.iterator();r.hasNext();){var l=r.next(),u=e,p=J((a=(o=a)+1|0,o));null==u.config.colorAttachments.get_za3lpa$(p).providedTexture&&l.dispose()}return s}))},pa.prototype.applySize_w70mbp$=function(t,e,i){ta.prototype.applySize_w70mbp$.call(this,t,e,i),this.impl_8be2vx$.applySize_w70mbp$(t,e,i)},pa.prototype.makeColorAttachmentTexs_gs6cwg$_0=function(){var t,i,n=this.config.colorAttachments,r=w(j(n,10)),o=0;for(t=n.iterator();t.hasNext();){var s,a,l=t.next(),u=r.add_11rb$,p=J((o=(i=o)+1|0,i));s=l.isProvided?e.isType(a=l.providedTexture,bh)?a:c():new bh(Ct(this.name)+"_color["+p+"]",l.getTextureProps_6taknv$(this.config.mipLevels>1)),u.call(r,s)}return r},pa.prototype.makeDepthAttachmentTex_17p1u7$_0=function(){var t,i,n,r;null!=(t=this.config.depthAttachment)?(n=t.isProvided?e.isType(r=t.providedTexture,bh)?r:c():new bh(Ct(this.name)+"_depth",t.getTextureProps_6taknv$(this.config.mipLevels>1)),i=n):i=null;return i},pa.prototype.defaultCubeMapCameraConfig_ubu93h$_0=function(){var t,i,n=Et([ft(fa(),new ca(new Sr(0,0,1),Er().NEG_Y_AXIS)),ft(_a(),new ca(new Sr(0,0,-1),Er().NEG_Y_AXIS)),ft(ma(),new ca(new Sr(-1,0,0),Er().NEG_Y_AXIS)),ft($a(),new ca(new Sr(1,0,0),Er().NEG_Y_AXIS)),ft(ya(),new ca(new Sr(0,1,0),Er().Z_AXIS)),ft(va(),new ca(new Sr(0,-1,0),Er().NEG_Z_AXIS))]),r=this.camera;e.isType(r,kd)&&(r.position.set_czzhiu$(Er().ZERO),r.fovY=90,r.clipNear=.1,r.clipFar=10,r.projCorrectionMode=wd()),this.onSetupView=(t=n,i=this,function(e,n){var r=x(t.get_11rb$(e));return i.camera.lookAt.set_czzhiu$(r.lookAt),i.camera.up.set_czzhiu$(r.up),s})},ca.$metadata$={kind:$,simpleName:"ViewConfig",interfaces:[]},ha.$metadata$={kind:$,simpleName:"ViewDirection",interfaces:[P]},ha.values=ga,ha.valueOf_61zpoe$=function(t){switch(t){case"FRONT":return fa();case"BACK":return _a();case"LEFT":return ma();case"RIGHT":return $a();case"UP":return ya();case"DOWN":return va();default:T("No enum constant de.fabmax.kool.pipeline.OffscreenRenderPassCube.ViewDirection."+t)}},pa.$metadata$={kind:$,simpleName:"OffscreenRenderPassCube",interfaces:[ta]},ba.prototype.equals=function(t){var i;return this===t||!!e.isType(t,ba)&&(null!=(i=this.pipelineHash)?i.equals(t.pipelineHash):null)},ba.prototype.hashCode=function(){return this.pipelineHash.hashCode()},xa.$metadata$={kind:$,simpleName:"Layout",interfaces:[]},Object.defineProperty(wa.prototype,"shaderCodeGenerator",{configurable:!0,get:function(){return null==this.shaderCodeGenerator_j5ii45$_0?pt("shaderCodeGenerator"):this.shaderCodeGenerator_j5ii45$_0},set:function(t){this.shaderCodeGenerator_j5ii45$_0=t}}),wa.prototype.create=function(){return new ba(this)},wa.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},za.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ka,Sa,Ca,Na,Ea,Pa,Ta,Oa,Ma,ja,Aa,Ra,Ia,La,Da,qa,Ba,Fa,Ua,Va,Ga,Ha,Wa,Ka,Xa,Ya,Za,Ja,Qa,tl=null;function el(){return null===tl&&new za,tl}function il(t,e){P.call(this),this.name$=t,this.ordinal$=e}function nl(){nl=function(){},ka=new il("DISABLED",0),Sa=new il("BLEND_ADDITIVE",1),Ca=new il("BLEND_MULTIPLY_ALPHA",2),Na=new il("BLEND_PREMULTIPLIED_ALPHA",3)}function rl(){return nl(),ka}function ol(){return nl(),Sa}function sl(){return nl(),Ca}function al(){return nl(),Na}function ll(t,e){P.call(this),this.name$=t,this.ordinal$=e}function ul(){ul=function(){},Ea=new ll("DISABLED",0),Pa=new ll("ALWAYS",1),Ta=new ll("NEVER",2),Oa=new ll("LESS",3),Ma=new ll("LESS_EQUAL",4),ja=new ll("GREATER",5),Aa=new ll("GREATER_EQUAL",6),Ra=new ll("EQUAL",7),Ia=new ll("NOT_EQUAL",8)}function pl(){return ul(),Ea}function cl(){return ul(),Pa}function hl(){return ul(),Ta}function dl(){return ul(),Oa}function fl(){return ul(),Ma}function _l(){return ul(),ja}function ml(){return ul(),Aa}function $l(){return ul(),Ra}function yl(){return ul(),Ia}function vl(t,e){P.call(this),this.name$=t,this.ordinal$=e}function gl(){gl=function(){},La=new vl("DEFAULT",0),Da=new vl("CULL_BACK_FACES",1),qa=new vl("CULL_FRONT_FACES",2),Ba=new vl("NO_CULLING",3)}function bl(){return gl(),La}function xl(){return gl(),Da}function wl(){return gl(),qa}function zl(){return gl(),Ba}function kl(t,e,i){this.longHash=e,this.pushConstants=i,this.name=t.name,this.instanceName=t.instanceName,this.stages=q$(t.stages),this.layout_0=new Bc(this.pushConstants),this.size=this.layout_0.size,this.buffer_0=SN(this.size),this.onUpdate=t.onUpdate}function Sl(){this.name="PushConstants",this.instanceName=null,this.stages=ct(),this.pushConstants=M(),this.onUpdate=null}function Cl(t){this.drawNode=t,this.name=null,this.dependencies=M(),this.viewport=new PS(0,0,0,0),this.lighting=null,this.isUpdateDrawNode=!0,this.updateEvent_2t7tkj$_0=null;var e,i=R(1);e=i.length-1|0;for(var n=0;n<=e;n++)i[n]=new B$(.15,.15,.15,1);this.clearColors_ynhttt$_0=i,this.clearDepth=!0,this.drawQueue_mxdtqn$_0=new Zs(this),this.onBeforeCollectDrawCommands=M(),this.onAfterCollectDrawCommands=M(),this.onAfterDraw=M()}function Nl(t,e){this.renderPass=t,this.ctx=e}function El(t){Cl.call(this,t),this.scene=t,this.useWindowViewport=!0,this.name="onscreen/"+Ct(this.scene.name),this.lighting=this.scene.lighting}function Pl(){this.onPipelineSetup=M(),this.onPipelineCreated=M()}function Tl(){}function Ol(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Ml(){Ml=function(){},Fa=new Ol("Y_UP",0),Ua=new Ol("Y_DOWN",1)}function jl(){return Ml(),Fa}function Al(){return Ml(),Ua}function Rl(t){qu.call(this,"colorAlphaNode_"+t.nextNodeId,t),this.inColor=new Bu(new Su(V$().MAGENTA),null),this.inAlpha=new Bu(new wu(1),null),this.outAlphaColor=new Bu(new $u(this.name+"_outColor"),this)}function Il(t){qu.call(this,"colorPreMult_"+t.nextNodeId,t),this.inColor=new Bu(new Su(V$().MAGENTA)),this.outColor=new Bu(new $u(this.name+"_outColor"),this)}function Ll(t){qu.call(this,"gamma_"+t.nextNodeId,t),this.inColor=new Bu(new Su(V$().MAGENTA)),this.inGamma=new Bu(new wu(1/2.2)),this.outColor=new Bu(new $u(this.name+"_outColor"),this)}function Dl(t){qu.call(this,"hdrToLdr_"+t.nextNodeId,t),this.inColor=new Bu(new Su(V$().MAGENTA)),this.inGamma=new Bu(new wu(2.2)),this.outColor=new Bu(new $u(this.name+"_outColor"),this)}function ql(t,e){void 0===e&&(e=1),qu.call(this,"fragmentColorOut",t,Kp().mask),this.channels=e,this.alpha=null;var i,n=R(this.channels);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new Bu(new Su(V$().MAGENTA));this.inColors=n}function Bl(t){qu.call(this,"fragmentDepthOut",t,Kp().mask),this.inDepth=new Bu(new wu(.5))}function Fl(t){qu.call(this,"discardAlpha_"+t.nextNodeId,t,Kp().mask),this.inAlpha=new Bu(new wu(1)),this.inAlphaCutoff=new Bu(new wu(0))}function Ul(t,e){qu.call(this,t,e)}function Vl(t,e){void 0===e&&(e=4),Ul.call(this,"lightNd_"+t.nextNodeId,t),this.maxLights=e,this.uLightCnt_0=new nd("lightCount"),this.uPositions_0=new Qh("lightPositions",this.maxLights),this.uColors_0=new Qh("lightColors",this.maxLights),this.uDirections_0=new Qh("lightDirections",this.maxLights);var i,n=R(this.maxLights);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new Bu(new wu(1));this.inShaodwFacs=n,this.outLightCount_ig9mtx$_0=new Bu(new yu(this.uLightCnt_0.name),this),this.isReducedSoi=!1}function Gl(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uPositions_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uColors_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uDirections_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uLightCnt_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.encodeLightSetup_0(i),s}}(t),s}}function Hl(t){qu.call(this,"lightUniformDataNd_"+t.nextNodeId,t),this.light=null,this.uPosition_0=new Kh("u"+this.name+"_pos"),this.uColor_0=new Kh("u"+this.name+"_color"),this.uDirection_0=new Kh("u"+this.name+"_dir"),this.outLightPos=new Bu(new $u(this.uPosition_0.name),this),this.outLightColor=new Bu(new $u(this.uColor_0.name),this),this.outLightDir=new Bu(new $u(this.uDirection_0.name),this)}function Wl(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uPosition_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uColor_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uDirection_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.encodeLightSetup_0(),s}}(t),s}}function Kl(t){Ul.call(this,"lightNd_"+t.nextNodeId,t),this.inLightPos=new Bu(new Su(Qr().ZERO)),this.inLightColor=new Bu(new Su(Qr().ZERO)),this.inLightDir=new Bu(new Su(new Yr(1,0,0,60))),this.inShaodwFac=new Bu(new wu(1)),this.outLightCount_9pb9nm$_0=new Bu(new Cu(1)),this.isReducedSoi=!1}function Xl(t){Ul.call(this,"pointLightNd_"+t.nextNodeId,t),this.inLightPos=new Bu(new Su(Qr().ZERO)),this.inLightColor=new Bu(new Su(Qr().ZERO)),this.inShaodwFac=new Bu(new wu(1)),this.outLightCount_qc530c$_0=new Bu(new Cu(1)),this.isReducedSoi=!1}function Yl(t){Ul.call(this,"spotLightNd_"+t.nextNodeId,t),this.inLightPos=new Bu(new Su(Qr().ZERO)),this.inLightColor=new Bu(new Su(Qr().ZERO)),this.inLightDir=new Bu(new Su(new Yr(1,0,0,60))),this.inShaodwFac=new Bu(new wu(1)),this.outLightCount_paxz40$_0=new Bu(new Cu(1)),this.isReducedSoi=!1}function Zl(t){qu.call(this,"Unlit Material",t,Kp().mask),this.inColor=new Bu(new Su(V$().MAGENTA)),this.outColor=new Bu(new $u("unlitMat_outColor"),this)}function Jl(t,e){qu.call(this,"Phong Material",e,Kp().mask),this.lightNode=t,this.inAlbedo=new Bu(new Su(V$().MAGENTA)),this.inNormal=new Bu(new ku(Er().Z_AXIS)),this.inFragPos=new Bu(new ku(Er().ZERO)),this.inCamPos=new Bu(new ku(Er().ZERO)),this.inSpotInnerAngle=new Bu(new wu(.8)),this.inAmbient=new Bu(new ku(Pr(.22))),this.inShininess=new Bu(new wu(20)),this.inSpecularIntensity=new Bu(new wu(1)),this.outColor=new Bu(new $u("phongMat_outColor"),this),this.lightBacksides=!1}function Ql(t,e,i,n){qu.call(this,"pbrMaterial",n,Kp().mask),this.lightNode=t,this.reflectionMap=e,this.brdfLut=i,this.inAlbedo=new Bu(new Su(V$().MAGENTA)),this.inEmissive=new Bu(new Su(V$().BLACK)),this.inNormal=new Bu(new ku(Er().Z_AXIS)),this.inFragPos=new Bu(new ku(Er().ZERO)),this.inViewDir=new Bu(new ku(Er().ZERO)),this.inSpotInnerAngle=new Bu(new wu(.8)),this.inMetallic=new Bu(new wu(0)),this.inRoughness=new Bu(new wu(.1)),this.inAmbientOccl=new Bu(new wu(1)),this.inIrradiance=new Bu(new ku(Pr(.03))),this.inReflectionStrength=new Bu(new wu(1)),this.inReflectionColor=new Bu(new ku(Er().ZERO)),this.inReflectionWeight=new Bu(new wu(0)),this.outColor=new Bu(new $u("pbrMat_outColor"),this),this.lightBacksides=!1}function tu(t,e){qu.call(this,"pbrLightNode",e,Kp().mask),this.lightNode=t,this.inAlbedo=new Bu(new Su(V$().MAGENTA)),this.inNormal=new Bu(new ku(Er().Z_AXIS)),this.inFragPos=new Bu(new ku(Er().ZERO)),this.inCamPos=new Bu(new ku(Er().ZERO)),this.inSpotInnerAngle=new Bu(new wu(.8)),this.inMetallic=new Bu(new wu(0)),this.inRoughness=new Bu(new wu(.1)),this.inIrradiance=new Bu(new ku(Pr(.03))),this.outColor=new Bu(new $u("pbrLight_outColor"),this),this.lightBacksides=!1}function eu(t,e){qu.call(this,"multiply_"+e.nextNodeId,e),this.left_8p0ptp$_0=new Bu(new ku(Er().X_AXIS)),this.right=new Bu(new wu(1)),this.output_q2fkhv$_0=new Bu(new mu(t+"_out"),this)}function iu(t){eu.call(this,"add_"+t.nextNodeId,t)}function nu(t){eu.call(this,"add_"+t.nextNodeId,t)}function ru(t){eu.call(this,"divide_"+t.nextNodeId,t)}function ou(t){eu.call(this,"multiply_"+t.nextNodeId,t)}function su(t){eu.call(this,"mix_"+t.nextNodeId,t),this.mixFac=new Bu(new wu(.5))}function au(t){qu.call(this,"vecFromColor_"+t.nextNodeId,t),this.input=new Bu(new ku(Er().X_AXIS)),this.output=new Bu(new mu(this.name+"_out"),this)}function lu(t){qu.call(this,"dist_"+t.nextNodeId,t),this.inA=new Bu(new ku(Er().ZERO)),this.inB=new Bu(new ku(Er().ZERO)),this.output=new Bu(new fu(this.name+"_out"),this)}function uu(t){qu.call(this,"normalize_"+t.nextNodeId,t),this.input=new Bu(new ku(Er().X_AXIS)),this.output=new Bu(new mu(this.name+"_out"),this)}function pu(t){qu.call(this,"viewDir_"+t.nextNodeId,t),this.inCamPos=new Bu(new ku(Er().Z_AXIS)),this.inWorldPos=new Bu(new ku(Er().ZERO)),this.output=new Bu(new mu(this.name+"_out"),this)}function cu(t){qu.call(this,"reflect_"+t.nextNodeId,t),this.inDirection=new Bu(new ku(Er().X_AXIS)),this.inNormal=new Bu(new ku(Er().Y_AXIS)),this.outDirection=new Bu(new mu(this.name+"_out"),this)}function hu(t){qu.call(this,"refract_"+t.nextNodeId,t),this.inDirection=new Bu(new ku(Er().X_AXIS)),this.inNormal=new Bu(new ku(Er().Y_AXIS)),this.inIor=new Bu(new wu(1.4)),this.outDirection=new Bu(new mu(this.name+"_out"),this)}function du(t,e){this.name=t,this.type=e}function fu(t){du.call(this,t,Qo())}function _u(t){du.call(this,t,ts())}function mu(t){du.call(this,t,es())}function $u(t){du.call(this,t,is())}function yu(t){du.call(this,t,ns())}function vu(t){du.call(this,t,rs())}function gu(t){du.call(this,t,os())}function bu(t){du.call(this,t,ss())}function xu(t){du.call(this,t,us())}function wu(t){fu.call(this,"_"),this.value=t}function zu(t){_u.call(this,"_"),this.value=t}function ku(t){mu.call(this,"_"),this.value=t}function Su(t){$u.call(this,"_"),this.value=t}function Cu(t){yu.call(this,"_"),this.value=t}function Nu(t){vu.call(this,"_"),this.value=t}function Eu(t){gu.call(this,"_"),this.value=t}function Pu(t){bu.call(this,"_"),this.value=t}function Tu(){}function Ou(t,e,i,n){void 0===n&&(n=1),this.location=t,this.variable=e,this.isFlat=i,this.locationInc=n}function Mu(t,e){this.model=t,this.stage=e,this.descriptorSet=new Rs,this.pushConstants=new Sl,this.inputs=M(),this.mutOutputs_rh28ou$_0=M(),this.mutNodes=M(),this.nextNodeId_bjjntk$_0=1}function ju(t){Mu.call(this,t,Vp()),this.requiredVertexAttributes=ct(),this.requiredInstanceAttributes=ct(),this.positionOutput=new Bu(new Su(Qr().ZERO),null)}function Au(t){Mu.call(this,t,Kp())}function Ru(t){void 0===t&&(t=""),this.modelInfo=t,this.stages=Et([ft(Vp(),new ju(this)),ft(Kp(),new Au(this))]),this.dumpCode=!1}function Iu(t,e){this.$outer=t,this.stage=e}function Lu(t){this.$outer=t,Iu.call(this,this.$outer,this.$outer.vertexStageGraph)}function Du(t){this.$outer=t,Iu.call(this,this.$outer,this.$outer.fragmentStageGraph)}function qu(t,e,i){var n,r;void 0===i&&(i=Xp().mask),this.name=t,this.graph=e,this.allowedStages=i,this.dependencies=ct(),n=(r=this.graph).nextNodeId,r.nextNodeId=n+1|0,this.nodeId=n}function Bu(t,e){void 0===e&&(e=null),this.variable=t,this.node=e}function Fu(){this.lightIndex=0,this.depthMap_25rtms$_0=null}function Uu(t,e,i){Fu.call(this),this.ifPosLightSpace_0=new Ap("posLightSpace_"+e.nextNodeId,e,i),this.vertexNode=new Vu(t,e),this.fragmentNode=new Hu(t,i),this.lightIndex=t.lightIndex,e.addNode_j0v1fw$(this.ifPosLightSpace_0.vertexNode),i.addNode_j0v1fw$(this.ifPosLightSpace_0.fragmentNode),this.ifPosLightSpace_0.input=this.vertexNode.outPosLightSpace,this.fragmentNode.inPosLightSpace=this.ifPosLightSpace_0.output}function Vu(t,e){qu.call(this,"lightSpaceTf_"+e.nextNodeId,e),this.shadowMap=t,this.uShadowMapVP=new ed(this.name+"_shadowMapVP"),this.inWorldPos=new Bu(new ku(Er().ZERO)),this.outPosLightSpace=new Bu(new $u(this.name+"_posLightSpace"),this)}function Gu(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uShadowMapVP}}(t)),e.onUpdate=function(t){return function(e,i){return t.uShadowMapVP.value.set_d4zu6l$(t.shadowMap.lightViewProjMat),s}}(t),s}}function Hu(t,e){qu.call(this,"shadowMap_"+e.nextNodeId,e,Kp().mask),this.depthMap=null,this.inDepthOffset=new Bu(new wu(t.optimizeForDirectionalLight?-.001:-.005)),this.inPosLightSpace=new Bu(new Su(Qr().ZERO)),this.outShadowFac=new Bu(new fu(this.name+"_shadowFac"),this),this.useDithering=!1}function Wu(t,e,i){Fu.call(this),this.shadowMap=t,this.vertexGraph=e,this.fragmentGraph=i,this.inViewPosition=new Bu(new ku(Er().ZERO)),this.vertexNode=new Xu(this.shadowMap,this.vertexGraph),this.fragmentNode=new Zu(this.shadowMap,this.fragmentGraph),this.helperNd_0=new Ku(this,this.vertexGraph),this.posLightSpace_0=new Bu(new $u("ifPosLightSpace_"+this.vertexGraph.nextNodeId+"["+this.shadowMap.numCascades+"]")),this.ifViewZ_0=new Bu(new fu("outViewZ_"+this.helperNd_0.nodeId)),this.lightIndex=this.shadowMap.lightIndex,this.vertexGraph.addNode_j0v1fw$(this.helperNd_0),this.fragmentNode.inPosLightSpace=this.posLightSpace_0,this.fragmentNode.inViewZ=this.ifViewZ_0}function Ku(t,e){this.$outer=t,qu.call(this,"cascadedShadowHelper_"+e.nextNodeId,e)}function Xu(t,e){qu.call(this,"lightSpaceTf_"+e.nextNodeId,e),this.shadowMap=t,this.uShadowMapVP=new id(this.name+"_shadowMapVPs",this.shadowMap.numCascades),this.inWorldPos=new Bu(new ku(Er().ZERO)),this.outPosLightSpace=new Bu(new $u(this.name+"_posLightSpace["+this.shadowMap.numCascades+"]"),this)}function Yu(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uShadowMapVP}}(t)),e.onUpdate=function(t){return function(e,i){var n;n=t.shadowMap.numCascades;for(var r=0;r<n;r++)t.uShadowMapVP.value[r].set_d4zu6l$(t.shadowMap.cascades[r].lightViewProjMat);return s}}(t),s}}function Zu(t,e){qu.call(this,"cascadedShadowMap_"+e.nextNodeId,e,Kp().mask),this.shadowMap=t,this.uViewSpaceRanges_0=new Yh("uClipSpaceRanges_"+this.name,this.shadowMap.numCascades),this.depthMap=null,this.inDepthOffset=new Bu(new wu(-.0025)),this.inPosLightSpace=new Bu(new Su(Qr().ZERO)),this.inViewZ=new Bu(new wu(0)),this.outShadowFac=new Bu(new fu(this.name+"_shadowFac"),this),this.useDithering=!1}function Ju(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewSpaceRanges_0}}(t)),e.onUpdate=function(t){return function(e,i){var n;n=t.shadowMap.numCascades;for(var r=0;r<n;r++)t.uViewSpaceRanges_0.value[r]=t.shadowMap.viewSpaceRanges[r];return s}}(t),s}}function Qu(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),qu.call(this,"vec3MatTransform",t),this.w=e,this.invert=i,this.inMat=null,this.inVec=new Bu(new ku(Er().ZERO)),this.outVec3=new Bu(new mu("vec3MatTransform"+this.nodeId+"_out"),this)}function tp(t,e){void 0===e&&(e=1),qu.call(this,"vec4MatTransform",t),this.w=e,this.inMat=null,this.inVec=new Bu(new ku(Er().ZERO)),this.outVec4=new Bu(new $u("vec4MatTransform"+this.nodeId+"_out"),this)}function ep(t,e){qu.call(this,"skinTransform_"+t.nextNodeId,t),this.inJoints=new Bu(new Pu(So().ZERO)),this.inWeights=new Bu(new Su(Qr().X_AXIS)),this.uJointTransforms=new id("uJointTransforms",e),this.outJointMat=new Bu(new xu(this.name+"_outMat"),this)}function ip(t){return function(e){var i=e.stages,n=t.graph.stage;return i.add_11rb$(n),e.unaryPlus_wq3w46$(function(t){return function(){return t.uJointTransforms}}(t)),e.onUpdate=function(t){return function(e,i){var n;if(null!=(n=i.mesh.skin)){var r,o=t,a=n.nodes.size,l=o.uJointTransforms.length;r=A.min(a,l);for(var u=0;u<r;u++){var p=n.nodes.get_za3lpa$(u);o.uJointTransforms.value[u].set_d4zu6j$(p.jointTransform)}}return s}}(t),s}}function np(t){qu.call(this,"UboPremultipliedMvp",t),this.uMvp=new ed("modelViewProj"),this.outMvpMat=new Bu(new xu(this.uMvp.name),this),this.visibleIn_0=It([t.stage])}function rp(t){return function(e){return xt(e.stages,t.visibleIn_0),e.unaryPlus_wq3w46$(function(t){return function(){return t.uMvp}}(t)),e.onUpdate=function(t){return function(e,i){return t.uMvp.value.set_d4zu6j$(i.mvpMat),s}}(t),s}}function op(t,e){this.$outer=t,qu.call(this,"UboPremultipliedMvp.copy",e),this.outMvpMat=new Bu(new xu(this.$outer.uMvp.name),this)}function sp(t){qu.call(this,"UboMvp",t),this.uModelMat=new ed("uModelMat"),this.uViewMat=new ed("uViewMat"),this.uProjMat=new ed("uProjMat"),this.uCamPos=new Kh("uCamPos"),this.uViewport=new Kh("uViewport"),this.outModelMat=new Bu(new xu(this.uModelMat.name),this),this.outViewMat=new Bu(new xu(this.uViewMat.name),this),this.outProjMat=new Bu(new xu(this.uProjMat.name),this),this.outCamPos=new Bu(new $u(this.uCamPos.name),this),this.outViewport=new Bu(new $u(this.uViewport.name),this),this.outMvpMat=new Bu(new xu("uMvp_outMvp"),this),this.visibleIn_0=It([t.stage])}function ap(t){return function(e){return xt(e.stages,t.visibleIn_0),e.unaryPlus_wq3w46$(function(t){return function(){return t.uModelMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uProjMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uCamPos}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewport}}(t)),e.onUpdate=function(t){return function(e,i){t.uModelMat.value.set_d4zu6j$(i.modelMat),t.uViewMat.value.set_d4zu6j$(i.viewMat),t.uProjMat.value.set_d4zu6j$(i.projMat),t.uCamPos.value.set_2qa7tb$(i.renderPass.camera.globalPos,1);var n=i.renderPass.viewport;return t.uViewport.value.set_7b5o5w$(n.x,n.ySigned,n.width,n.heightSigned),s}}(t),s}}function lp(t,e){this.$outer=t,qu.call(this,"UboPremultipliedMvp.copy",e),this.outModelMat=new Bu(new xu(this.$outer.uModelMat.name),this),this.outViewMat=new Bu(new xu(this.$outer.uViewMat.name),this),this.outProjMat=new Bu(new xu(this.$outer.uProjMat.name),this),this.outCamPos=new Bu(new $u(this.$outer.uCamPos.name),this),this.outViewport=new Bu(new $u(this.$outer.uViewport.name),this),this.outMvpMat=new Bu(new xu("uMvp_outMvp"),this)}function up(t,e){void 0===e&&(e="tex2d_"+t.nextNodeId),qu.call(this,e,t),this.visibleIn=It([t.stage]),this.sampler_put5e8$_0=this.sampler_put5e8$_0,this.arraySize=1,this.isDepthTexture=!1}function pp(t,e){void 0===e&&(e="texCube_"+t.nextNodeId),qu.call(this,e,t),this.visibleIn=It([t.stage]),this.sampler_1a0grg$_0=this.sampler_1a0grg$_0}function cp(t,i){if(qu.call(this,"morphWeights_"+i.nextNodeId,i),this.nWeights=t,this.uWeights0_0=new Kh(this.name+"_w0"),this.uWeights1_0=new Kh(this.name+"_w1"),this.outWeights0=new Bu(new $u(this.uWeights0_0.name)),this.outWeights1=new Bu(new $u(this.uWeights1_0.name)),this.nWeights>8){var n=qN.Log,r=vz.ERROR,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"Currently only up to 8 morph target attributes are supported")}}function hp(t,e){qu.call(this,t,e),this.visibleIn=It([e.stage]),this.onUpdate=null}function dp(t,e){hp.call(this,t.name,e),this.uniform_24s88i$_0=t,this.output_6ls89f$_0=new Bu(new fu(this.name),this)}function fp(t,e){hp.call(this,t.name,e),this.uniform_rl2ob1$_0=t,this.output_9us71w$_0=new Bu(new _u(this.name),this)}function _p(t,e){hp.call(this,t.name,e),this.uniform_dq6h4k$_0=t,this.output_d3s5ud$_0=new Bu(new mu(this.name),this)}function mp(t,e){hp.call(this,t.name,e),this.uniform_fzofez$_0=t,this.output_gcs4mu$_0=new Bu(new $u(this.name),this)}function $p(t,e){hp.call(this,t.name,e),this.uniform_o737wi$_0=t,this.output_yy7l5r$_0=new Bu(new $u(this.name),this)}function yp(t,e){hp.call(this,t.name,e),this.uniform_7m7o4x$_0=t,this.output_p908nk$_0=new Bu(new yu(this.name),this)}function vp(t,e){hp.call(this,t.name,e),this.uniform_xp1hao$_0=t,this.output_si07g1$_0=new Bu(new vu(this.name),this)}function gp(t,e){hp.call(this,t.name,e),this.uniform_3z6kr5$_0=t,this.output_vr068i$_0=new Bu(new gu(this.name),this)}function bp(t,e){hp.call(this,t.name,e),this.uniform_pqobse$_0=t,this.output_z0050z$_0=new Bu(new bu(this.name),this)}function xp(t,e,i){void 0===i&&(i=!1),qu.call(this,"tex_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.premultiply=i,this.inTexCoord=new Bu(new zu(ar().ZERO)),this.outColor=new Bu(new $u(this.name+"_outColor"),this),this.texLod=null}function wp(t,e){qu.call(this,"noise_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.inTexSize=new Bu(new Nu(new vr(16,16))),this.outNoise=new Bu(new $u(this.name+"_outNoise"),this)}function zp(t,e,i){void 0===i&&(i=!1),qu.call(this,"cubeSampler_"+t.name+"_"+e.nextNodeId,e),this.cubeMap=t,this.premultiply=i,this.inTexCoord=new Bu(new ku(Er().NEG_X_AXIS)),this.outColor=new Bu(new $u(this.name+"_outColor"),this),this.texLod=null}function kp(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),qu.call(this,"equi_rect_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.decodeRgbe=i,this.premultiply=n,this.inTexCoord=new Bu(new ku(Er().X_AXIS)),this.outColor=new Bu(new $u(this.name+"_outColor"),this),this.texLod=null}function Sp(t,e){qu.call(this,"aoMapSampleNode_"+e.nextNodeId,e),this.aoMap=t,this.inViewport=new Bu(new Su(Qr().ZERO)),this.outAo=new Bu(new fu(this.name+"_outAo"),this)}function Cp(t,e){qu.call(this,"normalMapping_"+e.nextNodeId,e),this.texture=t,this.inTexCoord=new Bu(new zu(ar().NEG_X_AXIS)),this.inNormal=new Bu(new ku(Er().Y_AXIS)),this.inTangent=new Bu(new ku(Er().X_AXIS)),this.inStrength=new Bu(new wu(1)),this.outNormal=new Bu(new mu(this.name+"_outNormal"),this)}function Np(t){qu.call(this,"flipBacksideNormal_"+t.nextNodeId,t,Kp().mask),this.inNormal=new Bu(new ku(Er().Y_AXIS)),this.outNormal=new Bu(new mu(this.name+"_outNormal"),this)}function Ep(t,e){qu.call(this,"dispMap_"+e.nextNodeId,e),this.texture=t,this.inTexCoord=new Bu(new zu(ar().NEG_X_AXIS)),this.inNormal=new Bu(new ku(Er().Y_AXIS)),this.inPosition=new Bu(new ku(Er().ZERO)),this.inStrength=new Bu(new wu(.1)),this.outPosition=new Bu(new mu(this.name+"_outPos"),this)}function Pp(t,e){var i;switch(qu.call(this,"split_"+e.nextNodeId,e),this.outChannels=t,this.input=new Bu(new Su(Qr().ZERO)),this.outChannels.length){case 1:i=new Bu(new fu(this.name+"_out"),this);break;case 2:i=new Bu(new _u(this.name+"_out"),this);break;case 3:i=new Bu(new mu(this.name+"_out"),this);break;case 4:i=new Bu(new $u(this.name+"_out"),this);break;default:throw V("outChannels parameter must be between 1 and 4 characters long (e.g. 'xyz')")}this.output=i}function Tp(t,e){var i;switch(qu.call(this,"combine_"+e.nextNodeId,e),this.inX=new Bu(new wu(0)),this.inY=new Bu(new wu(0)),this.inZ=new Bu(new wu(0)),this.inW=new Bu(new wu(0)),t.name){case"VEC_2F":i=new Bu(new _u(this.name+"_out"),this);break;case"VEC_3F":i=new Bu(new mu(this.name+"_out"),this);break;case"VEC_4F":i=new Bu(new $u(this.name+"_out"),this);break;default:throw V("Only allowed out types are VEC_2F, VEC_3F and VEC_4F")}this.output=i}function Op(t){qu.call(this,"combine31_"+t.nextNodeId,t),this.inXyz=new Bu(new ku(Er().ZERO)),this.inW=new Bu(new wu(0)),this.output=new Bu(new $u(this.name+"_out"),this)}function Mp(t,e){qu.call(this,t.name,e,Vp().mask),this.attribute=t,this.output=new Bu(new du(this.attribute.name,this.attribute.type),this)}function jp(t,e){qu.call(this,t.name,e,Vp().mask),this.attribute=t,this.output=new Bu(new du(this.attribute.name,this.attribute.type),this)}function Ap(t,e,i){this.name=t,this.input_h7hmfg$_0=new Bu(new wu(0)),this.output_ftovqj$_0=new Bu(new fu(this.name)),this.isFlat=!1,this.ifVar_hcczpo$_0=this.ifVar_hcczpo$_0,this.vertexNode=new Rp(this,e),this.fragmentNode=new Ip(this,i)}function Rp(t,e){this.$outer=t,qu.call(this,this.$outer.name,e,Vp().mask),this.ifNode=this.$outer}function Ip(t,e){this.$outer=t,qu.call(this,this.$outer.name,e,Kp().mask),this.ifNode=this.$outer}function Lp(t){qu.call(this,"screenCoord_"+t.nextNodeId,t,Kp().mask),this.inViewport=new Bu(new Su(Qr().ZERO)),this.outScreenCoord=new Bu(new $u("gl_FragCoord"),this),this.outNormalizedScreenCoord=new Bu(new mu(this.name+"_outNormalizedCoord"),this)}function Dp(t){qu.call(this,"fullScreenQuad_"+t.nextNodeId,t),this.inTexCoord=new Bu(new zu(ar().ZERO)),this.inDepth=new Bu(new wu(.999)),this.outQuadPos=new Bu(new $u(this.name+"_outPos"),this)}function qp(t,e){qu.call(this,"getMorphWeight_"+e.nextNodeId,e),this.iWeight=t,this.inWeights0=new Bu(new Su(Qr().ZERO)),this.inWeights1=new Bu(new Su(Qr().ZERO)),this.outWeight=new Bu(new fu(this.name+"_outW"),this)}function Bp(t){qu.call(this,"refractionSampler_"+t.nextNodeId,t),this.reflectionMap=null,this.refractionColor_dpnwa6$_0=this.refractionColor_dpnwa6$_0,this.viewProj_5bee0e$_0=this.viewProj_5bee0e$_0,this.inMaterialThickness=new Bu(new wu(1)),this.inRefractionDir=new Bu(new ku(Er().ZERO)),this.inFragPos=new Bu(new ku(Er().ZERO)),this.outColor=new Bu(new $u(this.name+"_outColor"),this)}function Fp(t,e,i){P.call(this),this.mask=i,this.name$=t,this.ordinal$=e}function Up(){Up=function(){},Va=new Fp("VERTEX_SHADER",0,1),Ga=new Fp("TESSELEATION_CTRL",1,2),Ha=new Fp("TESSELATION_EVAL",2,4),Wa=new Fp("GEOMETRY_SHADER",3,8),Ka=new Fp("FRAGMENT_SHADER",4,16),Xa=new Fp("ALL",5,-1)}function Vp(){return Up(),Va}function Gp(){return Up(),Ga}function Hp(){return Up(),Ha}function Wp(){return Up(),Wa}function Kp(){return Up(),Ka}function Xp(){return Up(),Xa}function Yp(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Zp(){Zp=function(){},Ya=new Yp("CUBE_MAP_ALBEDO",0),Za=new Yp("STATIC_ALBEDO",1),Ja=new Yp("TEXTURE_ALBEDO",2),Qa=new Yp("VERTEX_ALBEDO",3)}function Jp(){return Zp(),Ya}function Qp(){return Zp(),Za}function tc(){return Zp(),Ja}function ec(){return Zp(),Qa}function ic(){}function nc(){ic.call(this)}function rc(){ic.call(this)}function oc(t){ic.call(this),this.cutOff=t}function sc(t){dc(),Pl.call(this),this.model=t}function ac(t,e){void 0===t&&(t=V$().GRAY),void 0===e&&(e=dc().staticColorModel_0()),sc.call(this,e),this.uColor_0=null,this.color_cjijrc$_0=t}function lc(t){void 0===t&&(t=dc().vertexColorModel_0()),sc.call(this,t)}function uc(t,e,i){void 0===t&&(t=null),void 0===e&&(e="colorTex"),void 0===i&&(i=dc().textureColorModel_0(e)),sc.call(this,i),this.texName_0=e,this.textureSampler_0=null,this.texture_smcrab$_0=t}function pc(t,e,i){void 0===t&&(t=null),void 0===e&&(e="cubeMap"),void 0===i&&(i=dc().cubeMapColorModel_0(e)),sc.call(this,i),this.texName_0=e,this.cubeMapSampler_0=null,this.texture_mz7wkp$_0=t}function cc(){hc=this}ba.$metadata$={kind:$,simpleName:"Pipeline",interfaces:[]},il.$metadata$={kind:$,simpleName:"BlendMode",interfaces:[P]},il.values=function(){return[rl(),ol(),sl(),al()]},il.valueOf_61zpoe$=function(t){switch(t){case"DISABLED":return rl();case"BLEND_ADDITIVE":return ol();case"BLEND_MULTIPLY_ALPHA":return sl();case"BLEND_PREMULTIPLIED_ALPHA":return al();default:T("No enum constant de.fabmax.kool.pipeline.BlendMode."+t)}},ll.$metadata$={kind:$,simpleName:"DepthCompareOp",interfaces:[P]},ll.values=function(){return[pl(),cl(),hl(),dl(),fl(),_l(),ml(),$l(),yl()]},ll.valueOf_61zpoe$=function(t){switch(t){case"DISABLED":return pl();case"ALWAYS":return cl();case"NEVER":return hl();case"LESS":return dl();case"LESS_EQUAL":return fl();case"GREATER":return _l();case"GREATER_EQUAL":return ml();case"EQUAL":return $l();case"NOT_EQUAL":return yl();default:T("No enum constant de.fabmax.kool.pipeline.DepthCompareOp."+t)}},vl.$metadata$={kind:$,simpleName:"CullMethod",interfaces:[P]},vl.values=function(){return[bl(),xl(),wl(),zl()]},vl.valueOf_61zpoe$=function(t){switch(t){case"DEFAULT":return bl();case"CULL_BACK_FACES":return xl();case"CULL_FRONT_FACES":return wl();case"NO_CULLING":return zl();default:T("No enum constant de.fabmax.kool.pipeline.CullMethod."+t)}},kl.prototype.toBuffer=function(){return this.layout_0.putTo_l6oshk$(this.buffer_0),this.buffer_0.flip(),this.buffer_0},Sl.prototype.unaryPlus_wq3w46$=function(t){this.pushConstants.add_11rb$(t)},Sl.prototype.create=function(){for(var t=this.pushConstants.size,i=w(t),n=0;n<t;n++)i.add_11rb$(this.pushConstants.get_za3lpa$(n)());var r,o,s=i,a=rt(this.name),l={v:new kt(e.Long.fromInt(a))};for(r=this.stages.iterator();r.hasNext();){var u=r.next(),p=l.v,c=new kt(e.Long.fromInt(71023)),h=new kt(p.data.multiply(c.data)),d=u.hashCode(),f=new kt(e.Long.fromInt(d));l.v=new kt(h.data.add(f.data))}for(o=s.iterator();o.hasNext();){var _=o.next(),m=l.v,$=new kt(e.Long.fromInt(71023)),y=new kt(m.data.multiply($.data)),v=e.getKClassFromExpression(_).hashCode(),g=new kt(e.Long.fromInt(v));l.v=new kt(y.data.add(g.data));var b=l.v,x=new kt(e.Long.fromInt(71023)),z=new kt(b.data.multiply(x.data)),k=rt(_.name),S=new kt(e.Long.fromInt(k));l.v=new kt(z.data.add(S.data))}return new kl(this,l.v,s)},Sl.prototype.clear=function(){this.stages.clear(),this.pushConstants.clear()},Sl.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},kl.$metadata$={kind:$,simpleName:"PushConstantRange",interfaces:[]},Object.defineProperty(Cl.prototype,"clearColors",{configurable:!0,get:function(){return this.clearColors_ynhttt$_0},set:function(t){this.clearColors_ynhttt$_0=t}}),Object.defineProperty(Cl.prototype,"clearColor",{configurable:!0,get:function(){return this.clearColors[0]},set:function(t){this.clearColors[0]=t}}),Object.defineProperty(Cl.prototype,"drawQueue",{configurable:!0,get:function(){return this.drawQueue_mxdtqn$_0},set:function(t){this.drawQueue_mxdtqn$_0=t}}),Cl.prototype.updateEvent_nkvecu$_0=function(t){var e,i;if(null!=(e=this.updateEvent_2t7tkj$_0))i=e;else{var n=new Nl(this,t);this.updateEvent_2t7tkj$_0=n,i=n}return i},Cl.prototype.dependsOn_yqp8fe$=function(t){this.dependencies.add_11rb$(t)},Cl.prototype.update_aemszp$=function(t){this.isUpdateDrawNode&&this.drawNode.update_kma0q5$(this.updateEvent_nkvecu$_0(t))},Cl.prototype.collectDrawCommands_aemszp$=function(t){this.beforeCollectDrawCommands_aemszp$(t),this.drawNode.collectDrawCommands_kma0q5$(this.updateEvent_nkvecu$_0(t)),this.afterCollectDrawCommands_aemszp$(t)},Cl.prototype.addMesh_sbx4mf$=function(t,e){return this.drawQueue.addMesh_sbx4mf$(t,e)},Cl.prototype.beforeCollectDrawCommands_aemszp$=function(t){var e;this.drawQueue.clear(),e=this.onBeforeCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onBeforeCollectDrawCommands.get_za3lpa$(i)(t);this.camera.updateCamera_fd1mc0$(t,this.viewport)},Cl.prototype.afterCollectDrawCommands_aemszp$=function(t){var e;e=this.onAfterCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onAfterCollectDrawCommands.get_za3lpa$(i)(t)},Cl.prototype.afterDraw_aemszp$=function(t){var e;e=this.onAfterDraw;for(var i=0;i!==e.size;++i)this.onAfterDraw.get_za3lpa$(i)(t)},Cl.prototype.dispose_aemszp$=function(t){},Object.defineProperty(Nl.prototype,"time",{configurable:!0,get:function(){return this.ctx.time}}),Object.defineProperty(Nl.prototype,"deltaT",{configurable:!0,get:function(){return this.ctx.deltaT}}),Object.defineProperty(Nl.prototype,"frameIndex",{configurable:!0,get:function(){return this.ctx.frameIdx}}),Object.defineProperty(Nl.prototype,"camera",{configurable:!0,get:function(){return this.renderPass.camera}}),Object.defineProperty(Nl.prototype,"viewport",{configurable:!0,get:function(){return this.renderPass.viewport}}),Nl.prototype.component1=function(){return this.renderPass},Nl.prototype.component2=function(){return this.ctx},Nl.$metadata$={kind:$,simpleName:"UpdateEvent",interfaces:[]},Cl.$metadata$={kind:$,simpleName:"RenderPass",interfaces:[]},Object.defineProperty(El.prototype,"camera",{configurable:!0,get:function(){return this.scene.camera}}),El.prototype.collectDrawCommands_aemszp$=function(t){this.useWindowViewport&&t.getWindowViewport_ahq5yh$(this.viewport),Cl.prototype.collectDrawCommands_aemszp$.call(this,t)},El.$metadata$={kind:$,simpleName:"ScreenRenderPass",interfaces:[Cl]},Pl.prototype.createPipeline_sbx4mf$=function(t,e){var i=new wa;i.vertexLayout.primitiveType=t.geometry.primitiveType,this.onPipelineSetup_x08qbx$(i,t,e);var n=i.create();return this.onPipelineCreated_vp7qhs$(n,t,e),n},Pl.prototype.onPipelineSetup_x08qbx$=function(t,e,i){var n;for(n=this.onPipelineSetup.iterator();n.hasNext();)n.next()(t,e,i)},Pl.prototype.onPipelineCreated_vp7qhs$=function(t,e,i){var n;for(n=this.onPipelineCreated.iterator();n.hasNext();)n.next()(t,e,i)},Pl.$metadata$={kind:$,simpleName:"Shader",interfaces:[]},Tl.prototype.sampleTexture2d_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTexture2d_buzeal$$default(t,e,i)},Tl.prototype.sampleTextureCube_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTextureCube_buzeal$$default(t,e,i)},Ol.$metadata$={kind:$,simpleName:"ClipSpaceOrientation",interfaces:[P]},Ol.values=function(){return[jl(),Al()]},Ol.valueOf_61zpoe$=function(t){switch(t){case"Y_UP":return jl();case"Y_DOWN":return Al();default:T("No enum constant de.fabmax.kool.pipeline.shadermodel.CodeGenerator.ClipSpaceOrientation."+t)}},Tl.$metadata$={kind:st,simpleName:"CodeGenerator",interfaces:[]},Rl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inAlpha])},Rl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outAlphaColor.declare()+" = vec4("+this.inColor.ref3f()+", "+this.inColor.ref4f()+".a * "+this.inAlpha.ref1f()+");\n            ")},Rl.$metadata$={kind:$,simpleName:"ColorAlphaNode",interfaces:[qu]},Il.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inColor)},Il.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4("+this.inColor.ref3f()+" * "+this.inColor.ref4f()+".a, "+this.inColor.ref4f()+".a);")},Il.$metadata$={kind:$,simpleName:"PremultiplyColorNode",interfaces:[qu]},Ll.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inGamma])},Ll.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4(pow("+this.inColor.ref3f()+", vec3(1.0/"+this.inGamma.ref1f()+")), "+this.inColor.ref4f()+".a);")},Ll.$metadata$={kind:$,simpleName:"GammaNode",interfaces:[qu]},Dl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inGamma])},Dl.prototype.generateUncharted2_0=function(t){t.appendFunction_puj7f4$("uncharted2","\n            vec3 uncharted2Tonemap_func(vec3 x) {\n                float A = 0.15;     // shoulder strength\n                float B = 0.50;     // linear strength\n                float C = 0.10;     // linear angle\n                float D = 0.20;     // toe strength\n                float E = 0.02;     // toe numerator\n                float F = 0.30;     // toe denominator  --\x3e E/F = toe angle\n                return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n            }\n            \n            vec3 uncharted2Tonemap(vec3 rgbLinear) {\n                float W = 11.2;     // linear white point value\n                float ExposureBias = 2.0;\n                vec3 curr = uncharted2Tonemap_func(ExposureBias * rgbLinear);\n                vec3 whiteScale = 1.0 / uncharted2Tonemap_func(vec3(W));\n                return curr * whiteScale;\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = uncharted2Tonemap("+this.inColor.ref3f()+");\n            "+this.outColor.declare()+" = vec4(pow("+this.name+"_color, vec3(1.0/"+this.inGamma.ref1f()+")), "+this.inColor.ref4f()+".a);\n        ")},Dl.prototype.generateReinhard_0=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = "+this.inColor.ref3f()+" / ("+this.inColor.ref3f()+" + vec3(1.0));\n            "+this.outColor.declare()+" = vec4(pow("+this.name+"_color, vec3(1.0/"+this.inGamma.ref1f()+")), "+this.inColor.ref4f()+".a);\n        ")},Dl.prototype.generateJimHejlRichardBurgessDawson_0=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = max(vec3(0), "+this.inColor.ref3f()+" - 0.004);\n            "+this.outColor.declare()+" = vec4(("+this.name+"_color * (6.2 * "+this.name+"_color + 0.5)) / ("+this.name+"_color * (6.2 * "+this.name+"_color + 1.7) + 0.06), 1.0);\n        ")},Dl.prototype.generateCode_626509$=function(t){this.generateUncharted2_0(t)},Dl.$metadata$={kind:$,simpleName:"HdrToLdrNode",interfaces:[qu]},ql.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$(this.inColors.slice()),null!=(e=this.alpha)&&this.dependsOn_7qvs0d$(e)},ql.prototype.generateCode_626509$=function(t){var e,i,n=Ot();e=this.channels;for(var r=0;r<e;r++)n.append_pdl1vj$("layout(location="+r+") out vec4 fragOutColor_"+r+";\n");t.appendFunction_puj7f4$("fragOut",n.toString()),i=this.channels;for(var o=0;o<i;o++){var s=this.alpha;null!=s?t.appendMain_61zpoe$("fragOutColor_"+o+" = vec4("+this.inColors[o].ref3f()+", "+s.ref1f()+");"):t.appendMain_61zpoe$("fragOutColor_"+o+" = "+this.inColors[o].ref4f()+";")}},ql.$metadata$={kind:$,simpleName:"FragmentColorOutNode",interfaces:[qu]},Bl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inDepth)},Bl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("gl_FragDepth = "+this.inDepth.ref1f()+";")},Bl.$metadata$={kind:$,simpleName:"FragmentDepthOutNode",interfaces:[qu]},Fl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlpha,this.inAlphaCutoff])},Fl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("if ("+this.inAlpha.ref1f()+" <= "+this.inAlphaCutoff.ref1f()+") { discard; }")},Fl.$metadata$={kind:$,simpleName:"DiscardAlphaNode",interfaces:[qu]},Ul.$metadata$={kind:$,simpleName:"LightNode",interfaces:[qu]},Object.defineProperty(Vl.prototype,"outLightCount",{configurable:!0,get:function(){return this.outLightCount_ig9mtx$_0}}),Vl.prototype.setup_llmhyc$=function(t){Ul.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$(this.inShaodwFacs.slice()),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Gl(this))},Vl.prototype.encodeLightSetup_0=function(t){var e,i=t.renderPass.lighting;if(null!=i){var n=this.uLightCnt_0,r=i.lights.size,o=this.maxLights;n.value=A.min(r,o),e=this.uLightCnt_0.value;for(var s=0;s<e;s++){var a=i.lights.get_za3lpa$(s);this.uColors_0.value[s].set_czzhhz$(a.color),this.uPositions_0.value[s].set_2qa7tb$(a.position,a.type.encoded);var l=this.uDirections_0.value[s],u=a.direction,p=a.spotAngle/2*PN.DEG_2_RAD;l.set_2qa7tb$(u,A.cos(p))}}else this.uLightCnt_0.value=0},Vl.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("light_getFragToLight","\n            vec3 light_getFragToLight(int idx, vec3 fragPos) {\n                if ("+this.uPositions_0.name+"[idx].w == float("+Id().encoded+")) {\n                    return -"+this.uDirections_0.name+"[idx].xyz;\n                }\n                // same for point and spot lights\n                return "+this.uPositions_0.name+"[idx].xyz - fragPos;\n            }\n            ");var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("light_getRadiance","\n            vec3 light_getRadiance(int idx, vec3 fragToLight, float innerAngle) {\n                if ("+this.uPositions_0.name+"[idx].w == float("+Id().encoded+")) {\n                    return "+this.uColors_0.name+"[idx].rgb * "+this.uColors_0.name+"[idx].w;\n                }\n                float dist = length(fragToLight);\n                float power = "+this.uColors_0.name+"[idx].w;\n                "+e+"\n                if ("+this.uPositions_0.name+"[idx].w == float("+Ld().encoded+")) {\n                    return "+this.uColors_0.name+"[idx].rgb * strength;\n                } else {\n                    // spot light\n                    vec3 lightDir = -normalize(fragToLight);\n                    float spotAng = "+this.uDirections_0.name+"[idx].w;\n                    float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                    float ang = dot(lightDir, "+this.uDirections_0.name+"[idx].xyz);\n                    float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                    return "+this.uColors_0.name+"[idx].rgb * strength * angVal;\n                }\n            }\n            ");var i,n=f(0,this.maxLights),r=w(j(n,10));for(i=n.iterator();i.hasNext();){var o=i.next();r.add_11rb$(this.inShaodwFacs[o].ref1f())}var s=Mt(r,", ");t.appendMain_61zpoe$("float[] "+this.name+"_shadowFacs = float[] ("+s+");")},Vl.prototype.callVec3GetFragToLight_puj7f4$=function(t,e){return"light_getFragToLight("+t+", "+e+")"},Vl.prototype.callVec3GetRadiance_6hosri$=function(t,e,i){return"(light_getRadiance("+t+", "+e+", "+i+") * "+this.name+"_shadowFacs["+t+"])"},Vl.$metadata$={kind:$,simpleName:"MultiLightNode",interfaces:[Ul]},Hl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Wl(this))},Hl.prototype.encodeLightSetup_0=function(){var t=this.light;if(null!=t){this.uColor_0.value.set_czzhhz$(t.color),this.uPosition_0.value.set_2qa7tb$(t.position,t.type.encoded);var e=this.uDirection_0.value,i=t.direction,n=t.spotAngle/2*PN.DEG_2_RAD;e.set_2qa7tb$(i,A.cos(n))}else this.uColor_0.value.set_czzhhz$(Qr().ZERO)},Hl.$metadata$={kind:$,simpleName:"SingleLightUniformDataNode",interfaces:[qu]},Object.defineProperty(Kl.prototype,"outLightCount",{configurable:!0,get:function(){return this.outLightCount_9pb9nm$_0}}),Kl.prototype.setup_llmhyc$=function(t){Ul.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShaodwFac,this.inLightPos,this.inLightDir,this.inLightColor])},Kl.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$(this.name+"_getFragToLight","\n            vec3 "+this.name+"_getFragToLight(vec3 fragPos, vec4 lightPos, vec4 lightDir) {\n                if (lightPos.w == float("+Id().encoded+")) {\n                    return -lightDir.xyz;\n                }\n                // same for point and spot lights\n                return lightPos.xyz - fragPos;\n            }\n            ");var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$(this.name+"_getRadiance","\n            vec3 "+this.name+"_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor, vec4 lightDir, float innerAngle) {\n                if (lightPos.w == float("+Id().encoded+")) {\n                    return lightColor.rgb * lightColor.w;\n                }\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                if (lightPos.w == float("+Ld().encoded+")) {\n                    return lightColor.rgb * strength;\n                } else {\n                    // spot light\n                    vec3 negFtl = -normalize(fragToLight);\n                    float spotAng = lightDir.w;\n                    float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                    float ang = dot(negFtl, lightDir.xyz);\n                    float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                    return lightColor.rgb * strength * angVal;\n                }\n            }\n            ")},Kl.prototype.callVec3GetFragToLight_puj7f4$=function(t,e){return this.name+"_getFragToLight("+e+", "+this.inLightPos.ref4f()+", "+this.inLightDir.ref4f()+")"},Kl.prototype.callVec3GetRadiance_6hosri$=function(t,e,i){return"("+this.name+"_getRadiance("+e+", "+this.inLightPos.ref4f()+", "+this.inLightColor.ref4f()+", "+this.inLightDir.ref4f()+", "+i+") * "+this.inShaodwFac.ref1f()+")"},Kl.$metadata$={kind:$,simpleName:"SingleLightNode",interfaces:[Ul]},Object.defineProperty(Xl.prototype,"outLightCount",{configurable:!0,get:function(){return this.outLightCount_qc530c$_0}}),Xl.prototype.setup_llmhyc$=function(t){Ul.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShaodwFac,this.inLightPos,this.inLightColor])},Xl.prototype.generateCode_626509$=function(t){var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$(this.name+"_getRadiance","\n            vec3 "+this.name+"_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor) {\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                return lightColor.rgb * strength;\n            }\n            ")},Xl.prototype.callVec3GetFragToLight_puj7f4$=function(t,e){return"("+this.inLightPos.ref3f()+" - "+e+")"},Xl.prototype.callVec3GetRadiance_6hosri$=function(t,e,i){return"("+this.name+"_getRadiance("+e+", "+this.inLightPos.ref4f()+", "+this.inLightColor.ref4f()+") * "+this.inShaodwFac.ref1f()+")"},Xl.$metadata$={kind:$,simpleName:"SinglePointLightNode",interfaces:[Ul]},Object.defineProperty(Yl.prototype,"outLightCount",{configurable:!0,get:function(){return this.outLightCount_paxz40$_0}}),Yl.prototype.setup_llmhyc$=function(t){Ul.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShaodwFac,this.inLightPos,this.inLightDir,this.inLightColor])},Yl.prototype.generateCode_626509$=function(t){var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$(this.name+"_getRadiance","\n            vec3 "+this.name+"_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor, vec4 lightDir, float innerAngle) {\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                vec3 negFtl = -normalize(fragToLight);\n                float spotAng = lightDir.w;\n                float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                float ang = dot(negFtl, lightDir.xyz);\n                float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                return lightColor.rgb * strength * angVal;\n            }\n            ")},Yl.prototype.callVec3GetFragToLight_puj7f4$=function(t,e){return"("+this.inLightPos.ref3f()+" - "+e+")"},Yl.prototype.callVec3GetRadiance_6hosri$=function(t,e,i){return"("+this.name+"_getRadiance("+e+", "+this.inLightPos.ref4f()+", "+this.inLightColor.ref4f()+", "+this.inLightDir.ref4f()+", "+i+") * "+this.inShaodwFac.ref1f()+")"},Yl.$metadata$={kind:$,simpleName:"SingleSpotLightNode",interfaces:[Ul]},Zl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inColor)},Zl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4("+this.inColor.ref3f()+" * "+this.inColor.ref4f()+".a, "+this.inColor.ref4f()+".a);")},Zl.$metadata$={kind:$,simpleName:"UnlitMaterialNode",interfaces:[qu]},Jl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inNormal,this.inFragPos,this.inCamPos]),this.dependsOn_lhtstx$(this.lightNode)},Jl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec3 phongMat_v = normalize("+this.inFragPos.ref3f()+" - "+this.inCamPos.ref3f()+");\n            vec3 phongMat_n = normalize("+this.inNormal.ref3f()+");\n            \n            vec3 phongMat_ambient = "+this.inAlbedo.ref3f()+" * "+this.inAmbient.ref3f()+";\n            vec3 phongMat_diffuse = vec3(0);\n            vec3 phongMat_specular = vec3(0);\n            for (int i = 0; i < "+this.lightNode.outLightCount.ref1i()+"; i++) {\n                vec3 phongMat_l = "+this.lightNode.callVec3GetFragToLight_puj7f4$("i",this.inFragPos.ref3f())+";\n                vec3 radiance = "+this.lightNode.callVec3GetRadiance_6hosri$("i","phongMat_l",this.inSpotInnerAngle.ref1f())+";\n                phongMat_l = normalize(phongMat_l);\n                \n                "+(this.lightBacksides?"if (dot(phongMat_n, phongMat_l) < 0.0) { phongMat_n *= -1.0; }":"")+"\n        \n                float phongMat_cosTheta = clamp(dot(phongMat_n, phongMat_l), 0.0, 1.0);\n                vec3 phongMat_r = reflect(phongMat_l, phongMat_n);\n                float phongMat_cosAlpha = clamp(dot(phongMat_v, phongMat_r), 0.0, 1.0);\n                \n                phongMat_diffuse += "+this.inAlbedo.ref4f()+".rgb * radiance * phongMat_cosTheta;\n                phongMat_specular += "+this.inSpecularIntensity.ref1f()+" * radiance *\n                        pow(phongMat_cosAlpha, "+this.inShininess.ref1f()+") * "+this.inAlbedo.ref4f()+".a;\n            } \n            \n            vec3 phongMat_color = phongMat_ambient + phongMat_diffuse + phongMat_specular;\n            "+this.outColor.declare()+" = vec4(phongMat_color * "+this.inAlbedo.ref4f()+".a, "+this.inAlbedo.ref4f()+".a);\n            ")},Jl.$metadata$={kind:$,simpleName:"PhongMaterialNode",interfaces:[qu]},Ql.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inEmissive,this.inNormal,this.inFragPos,this.inViewDir]),this.dependsOn_8ak6wm$([this.inSpotInnerAngle,this.inMetallic,this.inRoughness,this.inAmbientOccl]),this.dependsOn_8ak6wm$([this.inIrradiance,this.inReflectionColor,this.inReflectionWeight]),this.dependsOn_lhtstx$(this.lightNode),this.dependsOn_lhtstx$(this.reflectionMap),this.dependsOn_lhtstx$(this.brdfLut)},Ql.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("fresnelSchlick","\n            vec3 fresnelSchlick(float cosTheta, vec3 F0) {\n                return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("fresnelSchlickRoughness","\n            vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness) {\n                return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("DistributionGGX","\n            float DistributionGGX(vec3 N, vec3 H, float roughness) {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0);\n                float NdotH2 = NdotH*NdotH;\n            \t\n                float num = a2;\n                float denom = (NdotH2 * (a2 - 1.0) + 1.0);\n                denom = 3.141592653589793 * denom * denom;\n            \t\n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySchlickGGX","\n            float GeometrySchlickGGX(float NdotV, float roughness) {\n                float r = (roughness + 1.0);\n                float k = (r*r) / 8.0;\n                \n                float num   = NdotV;\n                float denom = NdotV * (1.0 - k) + k;\n                \n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySmith","\n            float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                float NdotV = max(dot(N, V), 0.0);\n                float NdotL = max(dot(N, L), 0.0);\n                float ggx2  = GeometrySchlickGGX(NdotV, roughness);\n                float ggx1  = GeometrySchlickGGX(NdotL, roughness);\n                \n                return ggx1 * ggx2;\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 albedo = "+this.inAlbedo.ref3f()+";\n            vec3 V = -"+this.inViewDir.ref3f()+";\n            vec3 N = "+this.inNormal.ref3f()+";\n            \n            float rough = clamp("+this.inRoughness.ref1f()+", 0.05, 1.0);\n            float metal = "+this.inMetallic.ref1f()+";\n            \n            vec3 F0 = vec3(0.04); \n            F0 = mix(F0, albedo, metal);\n    \n            vec3 Lo = vec3(0.0);"),null!=this.lightNode&&t.appendMain_61zpoe$("\n                for (int i = 0; i < "+this.lightNode.outLightCount.ref1i()+"; i++) {\n                    // calculate per-light radiance\n                    vec3 fragToLight = "+this.lightNode.callVec3GetFragToLight_puj7f4$("i",this.inFragPos.ref3f())+";\n                    vec3 L = normalize(fragToLight);\n                    vec3 H = normalize(V + L);\n                    vec3 radiance = "+this.lightNode.callVec3GetRadiance_6hosri$("i","fragToLight",this.inSpotInnerAngle.ref1f())+";\n            \n                    "+(this.lightBacksides?"N *= sign(dot(N, L));":"")+"\n            \n                    // cook-torrance BRDF\n                    float NDF = DistributionGGX(N, H, rough); \n                    float G = GeometrySmith(N, V, L, rough);\n                    vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);\n                    \n                    vec3 kS = F;\n                    vec3 kD = vec3(1.0) - kS;\n                    kD *= 1.0 - metal;\n                    \n                    vec3 numerator = NDF * G * F;\n                    float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0);\n                    vec3 specular = numerator / max(denominator, 0.001);\n                        \n                    // add to outgoing radiance Lo\n                    float NdotL = max(dot(N, L), 0.0);\n                    Lo += (kD * albedo / "+U.PI+" + specular) * radiance * NdotL;\n                }\n                "),null!=this.reflectionMap&&null!=this.brdfLut?this.generateFinalIbl_0(t,this.reflectionMap,this.brdfLut):this.generateFinalNonIbl_0(t)},Ql.prototype.generateFinalNonIbl_0=function(t){t.appendMain_61zpoe$("\n            vec3 kS = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, rough);\n            vec3 kD = 1.0 - kS;\n            vec3 diffuse = "+this.inIrradiance.ref3f()+" * albedo;\n            vec3 ambient = (kD * diffuse) * "+this.inAmbientOccl.ref1f()+";\n\n            vec3 color = (ambient + Lo + "+this.inEmissive.ref3f()+") * "+this.inAlbedo.ref4f()+".a;\n            "+this.outColor.declare()+" = vec4(color, "+this.inAlbedo.ref4f()+".a);\n        ")},Ql.prototype.generateFinalIbl_0=function(t,e,i){t.appendMain_61zpoe$("\n            vec3 F = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, rough);\n            vec3 kS = F;\n            vec3 kD = 1.0 - kS;\n            kD *= 1.0 - metal;\n            vec3 diffuse = "+this.inIrradiance.ref3f()+" * albedo;\n\n            // sample reflection map\n            vec3 R = reflect(-V, N);\n            const float MAX_REFLECTION_LOD = 6.0;\n            vec3 prefilteredColor = "+t.sampleTexture2d_buzeal$(e.name,"R","rough * MAX_REFLECTION_LOD")+".rgb;\n            prefilteredColor = mix(prefilteredColor, clamp("+this.inReflectionColor.ref3f()+", 0.0, 5.0), "+this.inReflectionWeight.ref1f()+");\n\n            vec2 brdfUv = vec2(max(dot(N, V), 0.0), rough);\n            vec2 envBRDF = "+t.sampleTexture2d_buzeal$(i.name,"brdfUv")+".rg;\n            vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);\n            vec3 ambient = (kD * diffuse) * "+this.inAmbientOccl.ref1f()+";\n            vec3 reflection = specular * "+this.inAmbientOccl.ref1f()+" * "+this.inReflectionStrength.ref1f()+";\n            vec3 color = (ambient + Lo + "+this.inEmissive.ref3f()+") * "+this.inAlbedo.ref4f()+".a + reflection;\n            "+this.outColor.declare()+" = vec4(color, "+this.inAlbedo.ref4f()+".a);\n        ")},Ql.$metadata$={kind:$,simpleName:"PbrMaterialNode",interfaces:[qu]},tu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inNormal,this.inFragPos,this.inCamPos,this.inIrradiance]),this.dependsOn_lhtstx$(this.lightNode)},tu.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("fresnelSchlick","\n            vec3 fresnelSchlick(float cosTheta, vec3 F0) {\n                return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("DistributionGGX","\n            float DistributionGGX(vec3 N, vec3 H, float roughness) {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0);\n                float NdotH2 = NdotH*NdotH;\n            \t\n                float num = a2;\n                float denom = (NdotH2 * (a2 - 1.0) + 1.0);\n                denom = 3.141592653589793 * denom * denom;\n            \t\n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySchlickGGX","\n            float GeometrySchlickGGX(float NdotV, float roughness) {\n                float r = (roughness + 1.0);\n                float k = (r*r) / 8.0;\n                \n                float num   = NdotV;\n                float denom = NdotV * (1.0 - k) + k;\n                \n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySmith","\n            float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                float NdotV = max(dot(N, V), 0.0);\n                float NdotL = max(dot(N, L), 0.0);\n                float ggx2  = GeometrySchlickGGX(NdotV, roughness);\n                float ggx1  = GeometrySchlickGGX(NdotL, roughness);\n                \n                return ggx1 * ggx2;\n            }\n        ");var e=this.lightBacksides?"true":"dot(fragToLight, "+this.inNormal.ref3f()+") > 0.0";t.appendMain_61zpoe$("\n            vec3 radiance = vec3(0.0);\n            vec3 fragToLight = "+this.lightNode.callVec3GetFragToLight_puj7f4$("0",this.inFragPos.ref3f())+";\n            bool normalOk = "+e+";\n            if (normalOk) {\n                radiance = "+this.lightNode.callVec3GetRadiance_6hosri$("0","fragToLight",this.inSpotInnerAngle.ref1f())+";\n            }\n            \n            "+this.outColor.declare()+" = vec4(0.0, 0.0, 0.0, 1.0);\n            if (normalOk && dot(radiance, radiance) > 0.0) {\n                vec3 albedo = "+this.inAlbedo.ref3f()+";\n                vec3 V = normalize("+this.inCamPos.ref3f()+" - "+this.inFragPos.ref3f()+");\n                vec3 N = normalize("+this.inNormal.ref3f()+");\n                \n                float rough = clamp("+this.inRoughness.ref1f()+", 0.05, 1.0);\n                float metal = "+this.inMetallic.ref1f()+";\n                \n                vec3 F0 = vec3(0.04); \n                F0 = mix(F0, albedo, metal);\n        \n                vec3 L = normalize(fragToLight);\n                vec3 H = normalize(V + L);\n                "+(this.lightBacksides?"N *= sign(dot(N, L));":"")+"\n        \n                // cook-torrance BRDF\n                float NDF = DistributionGGX(N, H, rough); \n                float G = GeometrySmith(N, V, L, rough);\n                vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);\n                \n                vec3 kS = F;\n                vec3 kD = vec3(1.0) - kS;\n                kD *= 1.0 - metal;\n                \n                vec3 numerator = NDF * G * F;\n                float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0);\n                vec3 specular = numerator / max(denominator, 0.001);\n                    \n                // add to outgoing radiance Lo\n                float NdotL = max(dot(N, L), 0.0);\n                "+this.outColor.name+" = vec4((kD * albedo / "+U.PI+" + specular) * radiance * NdotL, 1.0);\n            }\n            ")},tu.$metadata$={kind:$,simpleName:"PbrLightNode",interfaces:[qu]},Object.defineProperty(eu.prototype,"left",{configurable:!0,get:function(){return this.left_8p0ptp$_0},set:function(t){this.output=new Bu(new du(this.name+"_out",t.variable.type),this),this.left_8p0ptp$_0=t}}),Object.defineProperty(eu.prototype,"output",{configurable:!0,get:function(){return this.output_q2fkhv$_0},set:function(t){this.output_q2fkhv$_0=t}}),eu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.left,this.right])},eu.$metadata$={kind:$,simpleName:"MathOpNode",interfaces:[qu]},iu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" + "+this.right+";")},iu.$metadata$={kind:$,simpleName:"AddNode",interfaces:[eu]},nu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" - "+this.right+";")},nu.$metadata$={kind:$,simpleName:"SubtractNode",interfaces:[eu]},ru.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" / "+this.right+";")},ru.$metadata$={kind:$,simpleName:"DivideNode",interfaces:[eu]},ou.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" * "+this.right+";")},ou.$metadata$={kind:$,simpleName:"MultiplyNode",interfaces:[eu]},su.prototype.setup_llmhyc$=function(t){eu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.mixFac)},su.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = mix("+this.left+", "+this.right+", "+this.mixFac.ref1f()+");")},su.$metadata$={kind:$,simpleName:"MixNode",interfaces:[eu]},au.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},au.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = ("+this.input.ref3f()+" - 0.5) * 2.0;")},au.$metadata$={kind:$,simpleName:"VecFromColorNode",interfaces:[qu]},lu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inA,this.inB])},lu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = length("+this.inA+" - "+this.inB+");")},lu.$metadata$={kind:$,simpleName:"DistanceNode",interfaces:[qu]},uu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},uu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = normalize("+this.input.ref3f()+");")},uu.$metadata$={kind:$,simpleName:"NormalizeNode",interfaces:[qu]},pu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inCamPos,this.inWorldPos])},pu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = normalize("+this.inWorldPos.ref3f()+" - "+this.inCamPos.ref3f()+");")},pu.$metadata$={kind:$,simpleName:"ViewDirNode",interfaces:[qu]},cu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDirection,this.inNormal])},cu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outDirection.declare()+" = reflect("+this.inDirection.ref3f()+", "+this.inNormal.ref3f()+");")},cu.$metadata$={kind:$,simpleName:"ReflectNode",interfaces:[qu]},hu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDirection,this.inNormal])},hu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outDirection.declare()+" = refract("+this.inDirection.ref3f()+", "+this.inNormal.ref3f()+", "+this.inIor.ref1f()+");")},hu.$metadata$={kind:$,simpleName:"RefractNode",interfaces:[qu]},du.prototype.glslType=function(){return this.type.glslType},du.prototype.declare=function(){return this.glslType()+" "+this.name},du.prototype.refAsType_m7a9qd$=function(t){switch(t.name){case"FLOAT":return this.ref1f();case"VEC_2F":return this.ref2f();case"VEC_3F":return this.ref3f();case"VEC_4F":return this.ref4f();default:if(t===this.type)return this.name;throw cn(this.type.toString()+" cannot be converted to "+t)}},du.prototype.ref1f=function(){switch(this.type.name){case"FLOAT":return this.name;case"VEC_2F":case"VEC_3F":case"VEC_4F":return this.name+".x";case"INT":return"float("+this.name+")";case"VEC_2I":case"VEC_3I":case"VEC_4I":return"float("+this.name+".x)";default:throw cn(this.type.toString()+" cannot be converted to float")}},du.prototype.ref2f=function(){switch(this.type.name){case"FLOAT":return"vec2("+this.name+", 0.0)";case"VEC_2F":return this.name;case"VEC_3F":case"VEC_4F":return this.name+".xy";case"INT":return"vec2(float("+this.name+"), 0.0)";case"VEC_2I":case"VEC_3I":case"VEC_4I":return"vec2(float("+this.name+".x), float("+this.name+".y))";default:throw cn(this.type.toString()+" cannot be converted to vec2")}},du.prototype.ref3f=function(){switch(this.type.name){case"FLOAT":return"vec3("+this.name+", 0.0, 0.0)";case"VEC_2F":return"vec3("+this.name+", 0.0)";case"VEC_3F":return this.name;case"VEC_4F":return this.name+".xyz";case"INT":return"vec3(float("+this.name+"), 0.0, 0.0)";case"VEC_2I":return"vec3(float("+this.name+".x), float("+this.name+".y), 0.0)";case"VEC_3I":case"VEC_4I":return"vec3(float("+this.name+".x), float("+this.name+".y), float("+this.name+".z))";default:throw cn(this.type.toString()+" cannot be converted to vec3")}},du.prototype.ref4f=function(){switch(this.type.name){case"FLOAT":return"vec4("+this.name+", 0.0, 0.0, 0.0)";case"VEC_2F":return"vec4("+this.name+", 0.0, 0.0)";case"VEC_3F":return"vec4("+this.name+", 0.0)";case"VEC_4F":return this.name;case"INT":return"vec4(float("+this.name+"), 0.0, 0.0, 0.0)";case"VEC_2I":return"vec4(float("+this.name+".x), float("+this.name+".y), 0.0, 0.0)";case"VEC_3I":return"vec4(float("+this.name+".x), float("+this.name+".y), float("+this.name+".z), 0.0)";case"VEC_4I":return"vec4(float("+this.name+".x), float("+this.name+".y), float("+this.name+".z), float("+this.name+".w))";default:throw cn(this.type.toString()+" cannot be converted to vec4")}},du.prototype.ref1i=function(){switch(this.type.name){case"FLOAT":return"int(name)";case"VEC_2F":case"VEC_3F":case"VEC_4F":return"int("+this.name+".x)";case"INT":return this.name;case"VEC_2I":case"VEC_3I":case"VEC_4I":return this.name+".x";default:throw cn(this.type.toString()+" cannot be converted to int")}},du.prototype.ref2i=function(){switch(this.type.name){case"FLOAT":return"ivec2(int("+this.name+"), 0)";case"VEC_2F":case"VEC_3F":case"VEC_4F":return"ivec2(int("+this.name+".x), int("+this.name+".y))";case"INT":return"ivec2("+this.name+", 0)";case"VEC_2I":return this.name;case"VEC_3I":case"VEC_4I":return"ivec2("+this.name+".xy)";default:throw cn(this.type.toString()+" cannot be converted to ivec2")}},du.prototype.ref3i=function(){switch(this.type.name){case"FLOAT":return"ivec3(int("+this.name+"), 0, 0)";case"VEC_2F":return"ivec3(int("+this.name+".x), int("+this.name+".y), 0)";case"VEC_3F":case"VEC_4F":return"ivec3(int("+this.name+".x), int("+this.name+".y), int("+this.name+".z))";case"INT":return"ivec3("+this.name+", 0, 0)";case"VEC_2I":return"ivec3("+this.name+", 0)";case"VEC_3I":return this.name;case"VEC_4I":return"ivec3("+this.name+".xyz)";default:throw cn(this.type.toString()+" cannot be converted to ivec3")}},du.prototype.ref4i=function(){switch(this.type.name){case"FLOAT":return"ivec4(int("+this.name+"), 0, 0, 0)";case"VEC_2F":return"ivec4(int("+this.name+".x), int("+this.name+".y), 0, 0)";case"VEC_3F":return"ivec4(int("+this.name+".x), int("+this.name+".x), int("+this.name+".z), 0)";case"VEC_4F":return"ivec4(int("+this.name+".x), int("+this.name+".x), int("+this.name+".z), int("+this.name+".w))";case"INT":return"ivec4("+this.name+", 0, 0, 0)";case"VEC_2I":return"ivec4("+this.name+", 0, 0)";case"VEC_3I":return"ivec4("+this.name+", 0)";case"VEC_4I":return this.name;default:throw cn(this.type.toString()+" cannot be converted to ivec4")}},du.$metadata$={kind:$,simpleName:"ModelVar",interfaces:[]},fu.$metadata$={kind:$,simpleName:"ModelVar1f",interfaces:[du]},_u.$metadata$={kind:$,simpleName:"ModelVar2f",interfaces:[du]},mu.$metadata$={kind:$,simpleName:"ModelVar3f",interfaces:[du]},$u.$metadata$={kind:$,simpleName:"ModelVar4f",interfaces:[du]},yu.$metadata$={kind:$,simpleName:"ModelVar1i",interfaces:[du]},vu.$metadata$={kind:$,simpleName:"ModelVar2i",interfaces:[du]},gu.$metadata$={kind:$,simpleName:"ModelVar3i",interfaces:[du]},bu.$metadata$={kind:$,simpleName:"ModelVar4i",interfaces:[du]},xu.$metadata$={kind:$,simpleName:"ModelVarMat4f",interfaces:[du]},wu.prototype.ref1f=function(){return"float("+this.value+")"},wu.prototype.ref2f=function(){return"vec2(float("+this.value+"), 0.0)"},wu.prototype.ref3f=function(){return"vec3(float("+this.value+"), 0.0, 0.0)"},wu.prototype.ref4f=function(){return"vec4(float("+this.value+"), 0.0, 0.0, 0.0)"},wu.prototype.ref1i=function(){return"int("+this.value+")"},wu.prototype.ref2i=function(){return"ivec2(int("+this.value+"), 0)"},wu.prototype.ref3i=function(){return"ivec3(int("+this.value+"), 0, 0)"},wu.prototype.ref4i=function(){return"ivec4(int("+this.value+"), 0, 0, 0)"},wu.$metadata$={kind:$,simpleName:"ModelVar1fConst",interfaces:[fu]},zu.prototype.ref1f=function(){return"float("+this.value.x+")"},zu.prototype.ref2f=function(){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},zu.prototype.ref3f=function(){return"vec3(float("+this.value.x+"), float("+this.value.y+"), 0.0)"},zu.prototype.ref4f=function(){return"vec4(float("+this.value.x+"), float("+this.value.y+"), 0.0, 0.0)"},zu.prototype.ref1i=function(){return"int("+this.value.x+")"},zu.prototype.ref2i=function(){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},zu.prototype.ref3i=function(){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), 0)"},zu.prototype.ref4i=function(){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), 0, 0)"},zu.$metadata$={kind:$,simpleName:"ModelVar2fConst",interfaces:[_u]},ku.prototype.ref1f=function(){return"float("+this.value.x+")"},ku.prototype.ref2f=function(){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},ku.prototype.ref3f=function(){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},ku.prototype.ref4f=function(){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), 0.0)"},ku.prototype.ref1i=function(){return"int("+this.value.x+")"},ku.prototype.ref2i=function(){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},ku.prototype.ref3i=function(){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"))"},ku.prototype.ref4i=function(){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"), 0)"},ku.$metadata$={kind:$,simpleName:"ModelVar3fConst",interfaces:[mu]},Su.prototype.ref1f=function(){return"float("+this.value.x+")"},Su.prototype.ref2f=function(){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Su.prototype.ref3f=function(){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Su.prototype.ref4f=function(){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), float("+this.value.w+"))"},Su.prototype.ref1i=function(){return"int("+this.value.x+")"},Su.prototype.ref2i=function(){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},Su.prototype.ref3i=function(){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"))"},Su.prototype.ref4i=function(){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"), int("+this.value.w+"))"},Su.$metadata$={kind:$,simpleName:"ModelVar4fConst",interfaces:[$u]},Cu.prototype.ref1f=function(){return"float("+this.value+")"},Cu.prototype.ref2f=function(){return"vec2(float("+this.value+"), 0.0)"},Cu.prototype.ref3f=function(){return"vec3(float("+this.value+"), 0.0, 0.0)"},Cu.prototype.ref4f=function(){return"vec4(float("+this.value+"), 0.0, 0.0, 0.0)"},Cu.prototype.ref1i=function(){return this.value.toString()},Cu.prototype.ref2i=function(){return"ivec2("+this.value+", 0)"},Cu.prototype.ref3i=function(){return"ivec3("+this.value+", 0, 0)"},Cu.prototype.ref4i=function(){return"ivec4("+this.value+", 0, 0, 0)"},Cu.$metadata$={kind:$,simpleName:"ModelVar1iConst",interfaces:[yu]},Nu.prototype.ref1f=function(){return"float("+this.value.x+")"},Nu.prototype.ref2f=function(){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Nu.prototype.ref3f=function(){return"vec3(float("+this.value.x+"), float("+this.value.y+"), 0.0)"},Nu.prototype.ref4f=function(){return"vec4(float("+this.value.x+"), float("+this.value.y+"), 0.0, 0.0)"},Nu.prototype.ref1i=function(){return"int("+this.value.x+")"},Nu.prototype.ref2i=function(){return"ivec2("+this.value.x+", "+this.value.y+")"},Nu.prototype.ref3i=function(){return"ivec3("+this.value.x+", "+this.value.y+", 0)"},Nu.prototype.ref4i=function(){return"ivec4("+this.value.x+", "+this.value.y+", 0, 0)"},Nu.$metadata$={kind:$,simpleName:"ModelVar2iConst",interfaces:[vu]},Eu.prototype.ref1f=function(){return"float("+this.value.x+")"},Eu.prototype.ref2f=function(){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Eu.prototype.ref3f=function(){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Eu.prototype.ref4f=function(){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), 0.0)"},Eu.prototype.ref1i=function(){return"int("+this.value.x+")"},Eu.prototype.ref2i=function(){return"ivec2("+this.value.x+", "+this.value.y+")"},Eu.prototype.ref3i=function(){return"ivec3("+this.value.x+", "+this.value.y+", "+this.value.z+")"},Eu.prototype.ref4i=function(){return"ivec4("+this.value.x+", "+this.value.y+", "+this.value.z+", 0)"},Eu.$metadata$={kind:$,simpleName:"ModelVar3iConst",interfaces:[gu]},Pu.prototype.ref1f=function(){return"float("+this.value.x+")"},Pu.prototype.ref2f=function(){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Pu.prototype.ref3f=function(){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Pu.prototype.ref4f=function(){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), float("+this.value.w+"))"},Pu.prototype.ref1i=function(){return"int("+this.value.x+")"},Pu.prototype.ref2i=function(){return"ivec2("+this.value.x+", "+this.value.y+")"},Pu.prototype.ref3i=function(){return"ivec3("+this.value.x+", "+this.value.y+", "+this.value.z+")"},Pu.prototype.ref4i=function(){return"ivec4("+this.value.x+", "+this.value.y+", "+this.value.z+", "+this.value.w+")"},Pu.$metadata$={kind:$,simpleName:"ModelVar4iConst",interfaces:[bu]},Tu.$metadata$={kind:$,simpleName:"ShaderGenerator",interfaces:[]},Ou.$metadata$={kind:$,simpleName:"ShaderInterfaceIoVar",interfaces:[]},Object.defineProperty(Mu.prototype,"outputs",{configurable:!0,get:function(){return this.mutOutputs_rh28ou$_0}}),Object.defineProperty(Mu.prototype,"nodes",{configurable:!0,get:function(){return this.mutNodes}}),Object.defineProperty(Mu.prototype,"nextNodeId",{configurable:!0,get:function(){return this.nextNodeId_bjjntk$_0},set:function(t){this.nextNodeId_bjjntk$_0=t}}),Mu.prototype.findNode_45s15y$=K("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderGraph.findNode_45s15y$",X((function(){var t=e.equals,i=e.throwCCE;return function(e,n,r){var o,s,a=this.nodes;t:do{var l;for(l=a.iterator();l.hasNext();){var u=l.next();if(t(u.name,r)&&n(u)){s=u;break t}}s=null}while(0);return null==(o=s)||n(o)?o:i()}}))),Mu.prototype.addStageOutput_ca2n0y$=function(t,e,i){var n;void 0===i&&(i=1);var r=0;for(n=this.mutOutputs_rh28ou$_0.iterator();n.hasNext();)r=r+n.next().locationInc|0;var o=new Ou(r,t,e,i);return this.mutOutputs_rh28ou$_0.add_11rb$(o),o},Mu.prototype.addNode_j0v1fw$=function(t){if(t.graph!==this)throw gt("Node can only be added to it's parent graph");this.mutNodes.add_11rb$(t)},Mu.prototype.clear=function(){this.descriptorSet.clear(),this.pushConstants.clear(),this.inputs.clear(),this.mutOutputs_rh28ou$_0.clear()},Mu.prototype.setup=function(){var t;for(t=this.nodes.iterator();t.hasNext();)t.next().setup_llmhyc$(this)},Mu.prototype.generateCode_626509$=function(t){var e;for(this.sortNodesByDependencies_dlleyv$_0(),e=this.nodes.iterator();e.hasNext();)e.next().generateCode_626509$(t)},Mu.prototype.sortNodesByDependencies_dlleyv$_0=function(){for(var t=ct();!this.nodes.isEmpty();){for(var e=this.mutNodes.iterator(),i=!1;e.hasNext();){var n=e.next();t.containsAll_brywnq$(n.dependencies)&&(t.add_11rb$(n),e.remove(),i=!0)}if(!i){var r;for(jt(this.model.modelInfo+" - Remaining nodes:"),r=this.nodes.iterator();r.hasNext();){var o,s=r.next();for(jt(s.name),o=s.dependencies.iterator();o.hasNext();){var a=o.next(),l=t.contains_11rb$(a)?"[ok]":"[missing]";jt("    -> "+a.name+" "+l)}}throw gt("Unable to resolve shader graph (circular or missing dependency?)")}}this.mutNodes.addAll_brywnq$(t)},Mu.$metadata$={kind:$,simpleName:"ShaderGraph",interfaces:[]},ju.$metadata$={kind:$,simpleName:"VertexShaderGraph",interfaces:[Mu]},Au.$metadata$={kind:$,simpleName:"FragmentShaderGraph",interfaces:[Mu]},Object.defineProperty(Ru.prototype,"vertexStageGraph",{configurable:!0,get:function(){var t;return e.isType(t=this.stages.get_11rb$(Vp()),ju)?t:c()}}),Object.defineProperty(Ru.prototype,"fragmentStageGraph",{configurable:!0,get:function(){var t;return e.isType(t=this.stages.get_11rb$(Kp()),Au)?t:c()}}),Ru.prototype.findNode_3klnlw$=K("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderModel.findNode_3klnlw$",X((function(){var i=t.de.fabmax.kool.pipeline.ShaderStage,n=e.kotlin.Unit,r=e.wrapFunction,o=e.equals,s=e.throwCCE;return r((function(){var t=e.equals,i=e.throwCCE;return function(e,r,o,s){return function(o){if(0!=(o.stage.mask&e.mask)){var a,l,u=s,p=r,c=o.nodes;t:do{var h;for(h=c.iterator();h.hasNext();){var d=h.next();if(t(d.name,p)&&u(d)){l=d;break t}}l=null}while(0);var f=null==(a=l)||u(a)?a:i();if(null!=f)return f}return n}}})),function(t,e,n,r){var a;for(void 0===r&&(r=i.ALL),a=this.stages.values.iterator();a.hasNext();){var l=a.next();if(0!=(l.stage.mask&r.mask)){var u,p,c=l.nodes;t:do{var h;for(h=c.iterator();h.hasNext();){var d=h.next();if(o(d.name,n)&&e(d)){p=d;break t}}p=null}while(0);var f=null==(u=p)||e(u)?u:s();if(null!=f)return f}}return null}}))),Ru.prototype.findNodeByType_vinsr2$=K("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderModel.findNodeByType_vinsr2$",X((function(){var i=t.de.fabmax.kool.pipeline.ShaderStage,n=e.kotlin.collections.firstOrNull_2p1efm$,r=e.kotlin.Unit,o=e.wrapFunction,s=e.kotlin.collections.ArrayList_init_287e2$;return o((function(){var t=e.kotlin.collections.ArrayList_init_287e2$;return function(e,i,o){return function(i){if(0!=(i.stage.mask&e.mask)){var s,a=o,l=i.nodes,u=t();for(s=l.iterator();s.hasNext();){var p=s.next();a(p)&&u.add_11rb$(p)}var c=n(u);if(null!=c)return c}return r}}})),function(t,e,r){var o;for(void 0===r&&(r=i.ALL),o=this.stages.values.iterator();o.hasNext();){var a=o.next();if(0!=(a.stage.mask&r.mask)){var l,u=a.nodes,p=s();for(l=u.iterator();l.hasNext();){var c=l.next();e(c)&&p.add_11rb$(c)}var h=n(p);if(null!=h)return h}}return null}}))),Ru.prototype.setup_xbeod6$=function(t,e){var i,n;for(e.name=this.modelInfo,i=this.stages.values.iterator();i.hasNext();)i.next().clear();for(n=this.stages.values.iterator();n.hasNext();)n.next().setup();this.setupAttributes_0(t,e);var r,o,a=new Sl,l=M(),u=new Rs;for(r=this.stages.values.iterator();r.hasNext();){var p,c=r.next();xt(u.descriptors,c.descriptorSet.descriptors),xt(a.pushConstants,c.pushConstants.pushConstants),xt(a.stages,c.pushConstants.stages),null!=(p=c.pushConstants.onUpdate)&&l.add_11rb$(p)}u.descriptors.isEmpty()||e.descriptorSetLayouts.add_11rb$(u),a.pushConstants.isEmpty()||(e.pushConstantRanges.add_11rb$(a),l.isEmpty()||(a.onUpdate=(o=l,function(t,e){for(var i=0;i!==o.size;++i)o.get_za3lpa$(i)(t,e);return s})))},Ru.prototype.setupAttributes_0=function(t,e){var i,n,r,o={v:0},s=t.geometry,a=M(),l=M(),u=0;for(i=this.vertexStageGraph.requiredVertexAttributes.iterator();i.hasNext();){var p,c=i.next();if(null==(p=s.attributeByteOffsets.get_11rb$(c)))throw new _t("Mesh does not include required vertex attribute: "+c.name);var h=p;if(c.type.isInt){var d=new pd(o.v,h,c);l.add_11rb$(d)}else{var f=new pd(o.v,h,c);a.add_11rb$(f)}o.v=o.v+c.props.nSlots|0}n=e.vertexLayout.bindings;var _=new ud((u=(r=u)+1|0,r),fd(),a,s.byteStrideF);if(n.add_11rb$(_),!l.isEmpty()){var m,$;m=e.vertexLayout.bindings;var y=new ud((u=($=u)+1|0,$),fd(),l,s.byteStrideI);m.add_11rb$(y)}var v=t.instances;if(null!=v){var g,b=M();for(g=this.vertexStageGraph.requiredInstanceAttributes.iterator();g.hasNext();){var x,w=g.next();if(null==(x=v.attributeOffsets.get_11rb$(w)))throw new _t("Mesh does not include required instance attribute: "+w.name);var z=x,k=new pd(o.v,z,w);b.add_11rb$(k),o.v=o.v+w.props.nSlots|0}var S=e.vertexLayout.bindings,C=new ud(u,_d(),b,v.strideBytesF);S.add_11rb$(C)}else if(!this.vertexStageGraph.requiredInstanceAttributes.isEmpty())throw gt("Shader model requires instance attributes, but mesh doesn't provide any")},Iu.prototype.addNode_u9w9by$=function(t){return this.stage.addNode_j0v1fw$(t),t},Iu.prototype.combineNode_m7a9qd$=function(t){return this.addNode_u9w9by$(new Tp(t,this.stage))},Iu.prototype.combineXyzWNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Op(this.stage));return null!=t&&(i.inXyz=t),null!=e&&(i.inW=e),i},Iu.prototype.splitNode_500t7j$=function(t,e){var i=this.addNode_u9w9by$(new Pp(e,this.stage));return i.input=t,i},Iu.prototype.addNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new iu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Iu.prototype.subtractNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new nu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Iu.prototype.divideNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new ru(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Iu.prototype.multiplyNode_tuikh5$=function(t,e){return this.multiplyNode_ze33is$(t,new Bu(new wu(e)))},Iu.prototype.multiplyNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new ou(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Iu.prototype.mixNode_92v6he$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new su(this.stage));return null!=t&&(n.left=t),null!=e&&(n.right=e),null!=i&&(n.mixFac=i),n},Iu.prototype.vecFromColorNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new au(this.stage));return null!=t&&(e.input=t),e},Iu.prototype.viewDirNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new pu(this.stage));return null!=t&&(i.inCamPos=t),null!=e&&(i.inWorldPos=e),i},Iu.prototype.distanceNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new lu(this.stage));return null!=t&&(i.inA=t),null!=e&&(i.inB=e),i},Iu.prototype.normalizeNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new uu(this.stage));return null!=t&&(e.input=t),e},Iu.prototype.reflectNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new cu(this.stage));return null!=t&&(i.inDirection=t),null!=e&&(i.inNormal=e),i},Iu.prototype.refractNode_92v6he$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new hu(this.stage));return null!=t&&(n.inDirection=t),null!=e&&(n.inNormal=e),null!=i&&(n.inIor=i),n},Iu.prototype.normalMapNode_j8913i$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=this.addNode_u9w9by$(new Cp(t,this.stage));return null!=e&&(r.inTexCoord=e),null!=i&&(r.inNormal=i),null!=n&&(r.inTangent=n),r},Iu.prototype.displacementMapNode_7fvjbk$=function(t,e,i,n,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=this.addNode_u9w9by$(new Ep(t,this.stage));return null!=e&&(o.inTexCoord=e),null!=i&&(o.inPosition=i),null!=n&&(o.inNormal=n),null!=r&&(o.inStrength=r),o},Iu.prototype.gammaNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Ll(this.stage));return null!=t&&(i.inColor=t),null!=e&&(i.inGamma=e),i},Iu.prototype.hdrToLdrNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Dl(this.stage));return null!=t&&(e.inColor=t),e},Iu.prototype.premultiplyColorNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Il(this.stage));return null!=t&&(e.inColor=t),e},Iu.prototype.colorAlphaNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Rl(this.stage));return null!=t&&(i.inColor=t),null!=e&&(i.inAlpha=e),i},Iu.prototype.constFloat_mx4ult$=function(t){return new Bu(new wu(t))},Iu.prototype.constVec2f_czzhjp$=function(t){return new Bu(new zu(t))},Iu.prototype.constVec3f_czzhiu$=function(t){return new Bu(new ku(t))},Iu.prototype.constVec4f_czzhhz$=function(t){return new Bu(new Su(t))},Iu.prototype.constInt_za3lpa$=function(t){return new Bu(new Cu(t))},Iu.prototype.constVec2i_czzhjm$=function(t){return new Bu(new Nu(t))},Iu.prototype.constVec3i_czzhir$=function(t){return new Bu(new Eu(t))},Iu.prototype.constVec4i_czzhhw$=function(t){return new Bu(new Pu(t))},Iu.prototype.pushConstantNode1f_61zpoe$=function(t){return this.addNode_u9w9by$(new dp(new Vh(t),this.stage))},Iu.prototype.pushConstantNode2f_61zpoe$=function(t){return this.addNode_u9w9by$(new fp(new Hh(t),this.stage))},Iu.prototype.pushConstantNode3f_61zpoe$=function(t){return this.addNode_u9w9by$(new _p(new Wh(t),this.stage))},Iu.prototype.pushConstantNode4f_61zpoe$=function(t){return this.addNode_u9w9by$(new mp(new Kh(t),this.stage))},Iu.prototype.pushConstantNodeColor_61zpoe$=function(t){return this.addNode_u9w9by$(new $p(new Xh(t),this.stage))},Iu.prototype.pushConstantNode1f_978i2u$=function(t){return this.addNode_u9w9by$(new dp(t,this.stage))},Iu.prototype.pushConstantNode2f_978i3p$=function(t){return this.addNode_u9w9by$(new fp(t,this.stage))},Iu.prototype.pushConstantNode3f_978i4k$=function(t){return this.addNode_u9w9by$(new _p(t,this.stage))},Iu.prototype.pushConstantNode4f_978i5f$=function(t){return this.addNode_u9w9by$(new mp(t,this.stage))},Iu.prototype.pushConstantNodeColor_uqrny$=function(t){return this.addNode_u9w9by$(new $p(t,this.stage))},Iu.prototype.pushConstantNode1i_61zpoe$=function(t){return this.addNode_u9w9by$(new yp(new nd(t),this.stage))},Iu.prototype.pushConstantNode2i_61zpoe$=function(t){return this.addNode_u9w9by$(new vp(new od(t),this.stage))},Iu.prototype.pushConstantNode3i_61zpoe$=function(t){return this.addNode_u9w9by$(new gp(new sd(t),this.stage))},Iu.prototype.pushConstantNode4i_61zpoe$=function(t){return this.addNode_u9w9by$(new bp(new ad(t),this.stage))},Iu.prototype.pushConstantNode1i_978i2x$=function(t){return this.addNode_u9w9by$(new yp(t,this.stage))},Iu.prototype.pushConstantNode2i_978i3s$=function(t){return this.addNode_u9w9by$(new vp(t,this.stage))},Iu.prototype.pushConstantNode3i_978i4n$=function(t){return this.addNode_u9w9by$(new gp(t,this.stage))},Iu.prototype.pushConstantNode4i_978i5i$=function(t){return this.addNode_u9w9by$(new bp(t,this.stage))},Iu.prototype.morphWeightsNode_za3lpa$=function(t){return this.addNode_u9w9by$(new cp(t,this.stage))},Iu.prototype.getMorphWeightNode_dcktnw$=function(t,e){return this.getMorphWeightNode_5bdpk2$(t,e.outWeights0,e.outWeights1)},Iu.prototype.getMorphWeightNode_5bdpk2$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new qp(t,this.stage));return null!=e&&(n.inWeights0=e),null!=i&&(n.inWeights1=i),n},Iu.prototype.textureNode_61zpoe$=function(t){return this.addNode_u9w9by$(new up(this.stage,t))},Iu.prototype.textureSamplerNode_ce41yx$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new xp(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},Iu.prototype.noiseTextureSamplerNode_gwl5ki$=function(t,e){void 0===e&&(e=null);var i=this.addNode_u9w9by$(new wp(t,this.stage));return null!=e&&(i.inTexSize=e),i},Iu.prototype.equiRectSamplerNode_v8d7vy$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.addNode_u9w9by$(new kp(t,this.stage,i,n));return null!=e&&(r.inTexCoord=e),r},Iu.prototype.cubeMapNode_61zpoe$=function(t){return this.addNode_u9w9by$(new pp(this.stage,t))},Iu.prototype.cubeMapSamplerNode_2z3a2t$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new zp(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},Iu.prototype.vec3TransformNode_vid4wo$=function(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),void 0===n&&(n=!1);var r=this.addNode_u9w9by$(new Qu(this.stage,i,n));return null!=t&&(r.inVec=t),null!=e&&(r.inMat=e),r},Iu.prototype.vec4TransformNode_9krp9t$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1);var n=this.addNode_u9w9by$(new tp(this.stage,i));return null!=t&&(n.inVec=t),null!=e&&(n.inMat=e),n},Iu.$metadata$={kind:$,simpleName:"StageBuilder",interfaces:[]},Object.defineProperty(Lu.prototype,"positionOutput",{configurable:!0,get:function(){return this.$outer.vertexStageGraph.positionOutput},set:function(t){this.$outer.vertexStageGraph.positionOutput=t}}),Lu.prototype.attrColors=function(){return this.attributeNode_nm2vx5$(ds().COLORS)},Lu.prototype.attrNormals=function(){return this.attributeNode_nm2vx5$(ds().NORMALS)},Lu.prototype.attrPositions=function(){return this.attributeNode_nm2vx5$(ds().POSITIONS)},Lu.prototype.attrTangents=function(){return this.attributeNode_nm2vx5$(ds().TANGENTS)},Lu.prototype.attrTexCoords=function(){return this.attributeNode_nm2vx5$(ds().TEXTURE_COORDS)},Lu.prototype.attrJoints=function(){return this.attributeNode_nm2vx5$(ds().JOINTS)},Lu.prototype.attrWeights=function(){return this.attributeNode_nm2vx5$(ds().WEIGHTS)},Lu.prototype.attributeNode_nm2vx5$=function(t){return this.addNode_u9w9by$(new Mp(t,this.stage))},Lu.prototype.instanceAttrModelMat=function(){return this.instanceAttributeNode_nm2vx5$(Gz().MODEL_MAT)},Lu.prototype.instanceAttributeNode_nm2vx5$=function(t){return this.addNode_u9w9by$(new jp(t,this.stage))},Lu.prototype.stageInterfaceNode_iikjwn$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=new Ap(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);return n.isFlat=i,null!=e&&(n.input=e),this.addNode_u9w9by$(n.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(n.fragmentNode),n},Lu.prototype.mvpNode=function(){return this.addNode_u9w9by$(new sp(this.stage))},Lu.prototype.skinTransformNode_78eraa$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=64);var n=this.addNode_u9w9by$(new ep(this.stage,i));return null!=t&&(n.inJoints=t),null!=e&&(n.inWeights=e),n},Lu.prototype.premultipliedMvpNode=function(){return this.addNode_u9w9by$(new np(this.stage))},Lu.prototype.simpleShadowMapNode_7yd351$=function(t,e,i){void 0===i&&(i=null);var n=new Uu(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);this.addNode_u9w9by$(n.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(n.fragmentNode);var r=new up(this.$outer.fragmentStageGraph,e);r.isDepthTexture=!0;var o=r;return this.$outer.fragmentStageGraph.addNode_j0v1fw$(o),null!=i&&(n.inWorldPos=i),n.depthMap=o,n},Lu.prototype.cascadedShadowMapNode_zw58l$=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=new Wu(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);this.addNode_u9w9by$(r.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(r.fragmentNode);var o=new up(this.$outer.fragmentStageGraph,e);o.isDepthTexture=!0,o.arraySize=t.numCascades;var s=o;return this.$outer.fragmentStageGraph.addNode_j0v1fw$(s),null!=n&&(r.inWorldPos=n),null!=i&&(r.inViewPosition=i),r.depthMap=s,r},Lu.prototype.simpleVertexPositionNode=function(){return this.vec4TransformNode_9krp9t$(this.attrPositions().output,this.premultipliedMvpNode().outMvpMat)},Lu.prototype.fullScreenQuadPositionNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Dp(this.stage));return null!=t&&(e.inTexCoord=t),e},Lu.$metadata$={kind:$,simpleName:"VertexStageBuilder",interfaces:[Iu]},Du.prototype.flipBacksideNormalNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Np(this.stage));return null!=t&&(e.inNormal=t),e},Du.prototype.multiLightNode_za3lpa$=function(t){return void 0===t&&(t=4),this.addNode_u9w9by$(new Vl(this.stage,t))},Du.prototype.singleLightNode_ycjtt8$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Kl(this.stage));if(null!=t){var i=this.addNode_u9w9by$(new Hl(this.stage));i.light=t,e.inLightPos=i.outLightPos,e.inLightDir=i.outLightDir,e.inLightColor=i.outLightColor}return e},Du.prototype.screenCoordNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Lp(this.stage));return null!=t&&(e.inViewport=t),e},Du.prototype.deferredSimpleShadowMapNode_dhoqzq$=function(t,e,i){var n=this.addNode_u9w9by$(new up(this.stage,e));n.isDepthTexture=!0;var r=n,o=this.addNode_u9w9by$(new Vu(t,this.stage));o.inWorldPos=i;var s=o,a=this.addNode_u9w9by$(new Hu(t,this.stage));return a.inPosLightSpace=s.outPosLightSpace,a.depthMap=r,a},Du.prototype.deferredCascadedShadowMapNode_y1yrn$=function(t,e,i,n){var r=this.addNode_u9w9by$(new up(this.stage,e));r.isDepthTexture=!0,r.arraySize=t.numCascades;var o=r,s=this.addNode_u9w9by$(new Xu(t,this.stage));s.inWorldPos=n;var a=s,l=this.addNode_u9w9by$(new Zu(t,this.stage));return l.inViewZ=this.splitNode_500t7j$(i,"z").output,l.inPosLightSpace=a.outPosLightSpace,l.depthMap=o,l},Du.prototype.unlitMaterialNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Zl(this.stage));return null!=t&&(e.inColor=t),e},Du.prototype.phongMaterialNode_8rwtp1$=function(t,e,i,n,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=this.addNode_u9w9by$(new Jl(r,this.stage));return null!=t&&(o.inAlbedo=t),null!=e&&(o.inNormal=e),null!=n&&(o.inCamPos=n),null!=i&&(o.inFragPos=i),o},Du.prototype.pbrMaterialNode_heq9k0$=function(t,e,i,n,r,o,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null);var a=this.addNode_u9w9by$(new Ql(t,e,i,this.stage));return null!=n&&(a.inAlbedo=n),null!=r&&(a.inNormal=r),null!=s&&(a.inViewDir=s),null!=o&&(a.inFragPos=o),a},Du.prototype.pbrLightNode_mvnx9n$=function(t){return this.addNode_u9w9by$(new tu(t,this.stage))},Du.prototype.colorOutput_a3v4si$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new ql(this.stage,e));return null!=t&&(n.inColors[0]=t),n.alpha=i,n},Du.prototype.discardAlpha_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Fl(this.stage));return null!=t&&(i.inAlpha=t),null!=e&&(i.inAlphaCutoff=e),i},Du.prototype.depthOutput_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Bl(this.stage));return null!=t&&(e.inDepth=t),e},Du.$metadata$={kind:$,simpleName:"FragmentStageBuilder",interfaces:[Iu]},Ru.$metadata$={kind:$,simpleName:"ShaderModel",interfaces:[]},qu.prototype.dependsOn_lhtstx$=function(t){null!=t&&t!==this&&this.dependencies.add_11rb$(t)},qu.prototype.dependsOn_7qvs0d$=function(t){this.dependsOn_lhtstx$(t.node)},qu.prototype.dependsOn_8ak6wm$=function(t){var e;for(e=0;e!==t.length;++e){var i=t[e];this.dependsOn_7qvs0d$(i)}},qu.prototype.setup_llmhyc$=function(t){if(0==(t.stage.mask&this.allowedStages)){var e="Unallowed shader stage ("+t.stage+" for node "+this.name;throw gt(e.toString())}},qu.prototype.generateCode_626509$=function(t){},qu.$metadata$={kind:$,simpleName:"ShaderNode",interfaces:[]},Object.defineProperty(Bu.prototype,"name",{configurable:!0,get:function(){return this.variable.name}}),Bu.prototype.declare=function(){return this.variable.declare()},Bu.prototype.ref1f=function(){return this.variable.ref1f()},Bu.prototype.ref2f=function(){return this.variable.ref2f()},Bu.prototype.ref3f=function(){return this.variable.ref3f()},Bu.prototype.ref4f=function(){return this.variable.ref4f()},Bu.prototype.ref1i=function(){return this.variable.ref1i()},Bu.prototype.ref2i=function(){return this.variable.ref2i()},Bu.prototype.ref3i=function(){return this.variable.ref3i()},Bu.prototype.ref4i=function(){return this.variable.ref4i()},Bu.prototype.refAsType_m7a9qd$=function(t){return this.variable.refAsType_m7a9qd$(t)},Bu.prototype.toString=function(){var t;switch(this.variable.type.name){case"FLOAT":t=this.ref1f();break;case"VEC_2F":t=this.ref2f();break;case"VEC_3F":t=this.ref3f();break;case"VEC_4F":t=this.ref4f();break;default:t=this.refAsType_m7a9qd$(this.variable.type)}return t},Bu.$metadata$={kind:$,simpleName:"ShaderNodeIoVar",interfaces:[]},Object.defineProperty(Fu.prototype,"depthMap",{configurable:!0,get:function(){return this.depthMap_25rtms$_0},set:function(t){this.depthMap_25rtms$_0=t}}),Fu.$metadata$={kind:$,simpleName:"ShadowMapNode",interfaces:[]},Object.defineProperty(Uu.prototype,"inWorldPos",{configurable:!0,get:function(){return this.vertexNode.inWorldPos},set:function(t){this.vertexNode.inWorldPos=t}}),Object.defineProperty(Uu.prototype,"inDepthOffset",{configurable:!0,get:function(){return this.fragmentNode.inDepthOffset},set:function(t){this.fragmentNode.inDepthOffset=t}}),Object.defineProperty(Uu.prototype,"depthMap",{configurable:!0,get:function(){return this.fragmentNode.depthMap},set:function(t){this.fragmentNode.depthMap=t}}),Object.defineProperty(Uu.prototype,"outShadowFac",{configurable:!0,get:function(){return this.fragmentNode.outShadowFac}}),Uu.$metadata$={kind:$,simpleName:"SimpleShadowMapNode",interfaces:[Fu]},Vu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inWorldPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Gu(this))},Vu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outPosLightSpace.declare()+" = "+this.uShadowMapVP.name+" * vec4("+this.inWorldPos.ref3f()+", 1.0);")},Vu.$metadata$={kind:$,simpleName:"SimpleShadowMapTransformNode",interfaces:[qu]},Hu.prototype.setup_llmhyc$=function(t){var e;if(qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDepthOffset,this.inPosLightSpace]),null==(e=this.depthMap))throw cn("Depth map input not set");this.dependsOn_lhtstx$(e)},Hu.prototype.generateCode_626509$=function(t){var e;if(null==(e=this.depthMap))throw cn("Depth map input not set");var i=e,n=Ot(),r={v:0};if(this.useDithering){var o;for(n.append_pdl1vj$("vec2 "+this.name+"_offset = vec2(float(fract(gl_FragCoord.x * 0.5) > 0.25), float(fract(gl_FragCoord.y * 0.5) > 0.25));"),o=At([new rr(-1.5,.5),new rr(.5,.5),new rr(-1.5,-1.5),new rr(.5,-1.5)]).iterator();o.hasNext();){var s=o.next(),a="vec4("+this.name+"_pos.xy + ("+this.name+"_offset + vec2("+s.x+", "+s.y+")) * "+this.name+"_scale * "+this.name+"_pos.w, "+this.name+"_pos.z, "+this.name+"_pos.w)";n.append_pdl1vj$(this.outShadowFac.name+" += "+t.sampleTexture2dDepth_puj7f4$(i.name,a)+";\n"),r.v=r.v+1|0}}else{for(var l,u=M(),p=0;p<=3;p++)for(var c=0;c<=3;c++){var h=new rr(-1.5+c,-1.5+p);u.add_11rb$(h)}for(l=u.iterator();l.hasNext();){var d=l.next(),f="vec4("+this.name+"_pos.xy + (vec2("+d.x+", "+d.y+")) * "+this.name+"_scale * "+this.name+"_pos.w, "+this.name+"_pos.z, "+this.name+"_pos.w)";n.append_pdl1vj$(this.outShadowFac.name+" += "+t.sampleTexture2dDepth_puj7f4$(i.name,f)+";\n"),r.v=r.v+1|0}}t.appendMain_61zpoe$("\n            vec4 "+this.name+"_pos = "+this.inPosLightSpace.ref4f()+";\n            \n            // check shadow map bounds\n            "+this.outShadowFac.declare()+" = 1.0;\n            vec3 "+this.name+"_posW = "+this.name+"_pos.xyz / "+this.name+"_pos.w;\n            if ("+this.name+"_posW.x > 0.0 && "+this.name+"_posW.x < 1.0\n                && "+this.name+"_posW.y > 0.0 && "+this.name+"_posW.y < 1.0\n                && "+this.name+"_posW.z > -1.0 && "+this.name+"_posW.z < 1.0) {\n            \n                float "+this.name+"_size = float(textureSize("+i.name+", 0).x);\n                float "+this.name+"_scale = 1.0 / float("+this.name+"_size);\n                "+this.name+"_pos.z += "+this.inDepthOffset.ref1f()+";\n                "+this.outShadowFac.name+" = 0.0;\n                "+n+"\n                "+this.outShadowFac.name+" *= "+1/r.v+";\n            }\n        ")},Hu.$metadata$={kind:$,simpleName:"SimpleShadowMapFragmentNode",interfaces:[qu]},Object.defineProperty(Wu.prototype,"inWorldPos",{configurable:!0,get:function(){return this.vertexNode.inWorldPos},set:function(t){this.vertexNode.inWorldPos=t}}),Object.defineProperty(Wu.prototype,"inDepthOffset",{configurable:!0,get:function(){return this.fragmentNode.inDepthOffset},set:function(t){this.fragmentNode.inDepthOffset=t}}),Object.defineProperty(Wu.prototype,"depthMap",{configurable:!0,get:function(){return this.fragmentNode.depthMap},set:function(t){this.fragmentNode.depthMap=t}}),Object.defineProperty(Wu.prototype,"outShadowFac",{configurable:!0,get:function(){return this.fragmentNode.outShadowFac}}),Ku.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.$outer.inViewPosition,this.$outer.vertexNode.outPosLightSpace]);var e=this.$outer.fragmentGraph.inputs,i=this.$outer.vertexGraph.addStageOutput_ca2n0y$(this.$outer.posLightSpace_0.variable,!1,this.$outer.shadowMap.numCascades);e.add_11rb$(i);var n=this.$outer.fragmentGraph.inputs,r=this.$outer.vertexGraph.addStageOutput_ca2n0y$(this.$outer.ifViewZ_0.variable,!1);n.add_11rb$(r)},Ku.prototype.generateCode_626509$=function(t){var e;t.appendMain_61zpoe$(this.$outer.ifViewZ_0.name+" = "+this.$outer.inViewPosition+".z;"),e=this.$outer.shadowMap.numCascades;for(var i=0;i<e;i++)t.appendMain_61zpoe$(Rt(this.$outer.posLightSpace_0.name,91)+"["+i+"] = "+Rt(this.$outer.vertexNode.outPosLightSpace.name,91)+"["+i+"];")},Ku.$metadata$={kind:$,simpleName:"CascadedShadowHelperNd",interfaces:[qu]},Wu.$metadata$={kind:$,simpleName:"CascadedShadowMapNode",interfaces:[Fu]},Xu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inWorldPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Yu(this))},Xu.prototype.generateCode_626509$=function(t){var e;t.appendMain_61zpoe$(this.outPosLightSpace.declare()+";"),e=this.shadowMap.numCascades;for(var i=0;i<e;i++)t.appendMain_61zpoe$(Rt(this.outPosLightSpace.name,91)+"["+i+"] = "+this.uShadowMapVP.name+"["+i+"] * vec4("+this.inWorldPos.ref3f()+", 1.0);")},Xu.$metadata$={kind:$,simpleName:"CascadedShadowMapTransformNode",interfaces:[qu]},Zu.prototype.setup_llmhyc$=function(t){var e;if(qu.prototype.setup_llmhyc$.call(this,t),null==(e=this.depthMap))throw cn("Depth map input not set");this.dependsOn_lhtstx$(e),this.dependsOn_8ak6wm$([this.inDepthOffset,this.inPosLightSpace,this.inViewZ]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Ju(this))},Zu.prototype.generateCode_626509$=function(t){var e,i;if(null==(e=this.depthMap))throw cn("Depth map input not set");var n=e,r=Ot(),o={v:0};if(this.useDithering){var s;for(r.append_pdl1vj$("vec2 offset = vec2(float(fract(gl_FragCoord.x * 0.5) > 0.25), float(fract(gl_FragCoord.y * 0.5) > 0.25));"),s=At([new rr(-1.5,.5),new rr(.5,.5),new rr(-1.5,-1.5),new rr(.5,-1.5)]).iterator();s.hasNext();){var a=s.next(),l="vec4(projPos.xy + (offset + vec2("+a.x+", "+a.y+")) * texScale * projPos.w, projPos.z, projPos.w)";r.append_pdl1vj$("shadowFac += "+t.sampleTexture2dDepth_puj7f4$("shadowTex",l)+";\n"),o.v=o.v+1|0}}else{for(var u,p=M(),c=0;c<=3;c++)for(var h=0;h<=3;h++){var d=new rr(-1.5+h,-1.5+c);p.add_11rb$(d)}for(u=p.iterator();u.hasNext();){var f=u.next(),_="vec4(projPos.xy + (vec2("+f.x+", "+f.y+")) * texScale * projPos.w, projPos.z, projPos.w)";r.append_pdl1vj$("shadowFac += "+t.sampleTexture2dDepth_puj7f4$("shadowTex",_)+";\n"),o.v=o.v+1|0}}t.appendFunction_puj7f4$("cascadedShadowFac","\n            float cascadedShadowFac(sampler2DShadow shadowTex, vec4 projPos, float depthOffset) {\n                float texSize = float(textureSize(shadowTex, 0).x);\n                float texScale = 1.0 / float(texSize);\n                projPos.z += depthOffset;\n                float shadowFac = 0.0;\n                if (projPos.z >= 1.0) {\n                    shadowFac = 1.0;\n                } else {\n                    "+r+"\n                    shadowFac *= "+1/o.v+";\n                }\n                return shadowFac;\n            }\n        "),t.appendMain_61zpoe$("\n                "+this.outShadowFac.declare()+" = 1.0;\n            "),i=this.shadowMap.numCascades;for(var m=0;m<i;m++)t.appendMain_61zpoe$("\n                    if ("+this.inViewZ.ref1f()+" >= "+this.uViewSpaceRanges_0.name+"["+m+"]) {\n                        "+this.outShadowFac.name+" = cascadedShadowFac("+n.name+"["+m+"], "+Rt(this.inPosLightSpace.name,91)+"["+m+"], "+this.inDepthOffset.ref1f()+");\n                    }\n                "),m<(this.shadowMap.numCascades-1|0)&&t.appendMain_61zpoe$(" else ")},Zu.$metadata$={kind:$,simpleName:"CascadedShadowMapFragmentNode",interfaces:[qu]},Qu.prototype.setup_llmhyc$=function(t){var e,i;if(qu.prototype.setup_llmhyc$.call(this,t),e=this.inVec,null==(i=this.inMat))throw cn("Matrix input not set");this.dependsOn_8ak6wm$([e,i])},Qu.prototype.generateCode_626509$=function(t){var e;if(null==(e=this.inMat))throw cn("Matrix input not set");var i=e,n=this.inVec.variable.type===is()?this.inVec.ref4f():"vec4("+this.inVec.ref3f()+", "+this.w+")",r=this.invert?"-":"";t.appendMain_61zpoe$(this.outVec3.declare()+" = "+r+"("+i.refAsType_m7a9qd$(us())+" * "+n+").xyz;")},Qu.$metadata$={kind:$,simpleName:"Vec3TransformNode",interfaces:[qu]},tp.prototype.setup_llmhyc$=function(t){var e,i;if(qu.prototype.setup_llmhyc$.call(this,t),e=this.inVec,null==(i=this.inMat))throw cn("Matrix input not set");this.dependsOn_8ak6wm$([e,i])},tp.prototype.generateCode_626509$=function(t){var e,i;if(null==(i=null!=(e=this.inMat)?e.variable:null))throw cn("Matrix input not set");var n=i,r=this.inVec.variable.type===is()?this.inVec.ref4f():"vec4("+this.inVec.ref3f()+", "+this.w+")";t.appendMain_61zpoe$(this.outVec4.declare()+" = "+n.refAsType_m7a9qd$(us())+" * "+r+";")},tp.$metadata$={kind:$,simpleName:"Vec4TransformNode",interfaces:[qu]},ep.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inJoints,this.inWeights]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[],ip(this))},ep.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outJointMat.declare()+" = "+this.uJointTransforms+"["+this.inJoints.ref4i()+".x] * "+this.inWeights.ref4f()+".x;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i()+".y] * "+this.inWeights.ref4f()+".y;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i()+".z] * "+this.inWeights.ref4f()+".z;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i()+".w] * "+this.inWeights.ref4f()+".w;\n        ")},ep.$metadata$={kind:$,simpleName:"SkinTransformNode",interfaces:[qu]},np.prototype.addToStage_llmhyc$=function(t){var e=new op(this,t);return this.visibleIn_0.add_11rb$(t.stage),t.addNode_j0v1fw$(e),e},np.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[],rp(this))},op.$metadata$={kind:$,simpleName:"StageCopy",interfaces:[qu]},np.$metadata$={kind:$,simpleName:"UniformBufferPremultipliedMvp",interfaces:[qu]},sp.prototype.addToStage_llmhyc$=function(t){var e=new lp(this,t);return this.visibleIn_0.add_11rb$(t.stage),t.addNode_j0v1fw$(e),e},sp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],ap(this))},sp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outMvpMat.declare()+" = "+this.outProjMat.name+" * "+this.outViewMat.name+" * "+this.outModelMat.name+";")},lp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outMvpMat.declare()+" = "+this.outProjMat.name+" * "+this.outViewMat.name+" * "+this.outModelMat.name+";")},lp.$metadata$={kind:$,simpleName:"StageCopy",interfaces:[qu]},sp.$metadata$={kind:$,simpleName:"UniformBufferMvp",interfaces:[qu]},Object.defineProperty(up.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_put5e8$_0?pt("sampler"):this.sampler_put5e8$_0},set:function(t){this.sampler_put5e8$_0=t}}),up.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e,i=t.descriptorSet,n=new qs;n.arraySize=this.arraySize,n.isDepthSampler=this.isDepthTexture,xt(n.stages,this.visibleIn),n.name=this.name,n.onCreate=(e=this,function(t){return e.sampler=t,s}),i.unaryPlus_ngusss$(n)},up.$metadata$={kind:$,simpleName:"TextureNode",interfaces:[qu]},Object.defineProperty(pp.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_1a0grg$_0?pt("sampler"):this.sampler_1a0grg$_0},set:function(t){this.sampler_1a0grg$_0=t}}),pp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e,i=t.descriptorSet,n=new Fs;xt(n.stages,this.visibleIn),n.name=this.name,n.onCreate=(e=this,function(t){return e.sampler=t,s}),i.unaryPlus_ngusss$(n)},pp.$metadata$={kind:$,simpleName:"CubeMapNode",interfaces:[qu]},cp.prototype.setup_llmhyc$=function(t){if(qu.prototype.setup_llmhyc$.call(this,t),this.nWeights>0){var e=t.pushConstants,i=e.stages,n=t.stage;i.add_11rb$(n),e.unaryPlus_wq3w46$((r=this,function(){return r.uWeights0_0})),this.nWeights>4&&e.unaryPlus_wq3w46$(function(t){return function(){return t.uWeights1_0}}(this)),e.onUpdate=function(t){return function(e,i){var n;if(null!=(n=i.mesh.morphWeights)){var r,o,a=t;r=A.min(4,n.length);for(var l=0;l<r;l++)a.uWeights0_0.value.set_24o109$(l,n[l]);var u=n.length-4|0;o=A.min(4,u);for(var p=0;p<o;p++)a.uWeights1_0.value.set_24o109$(p,n[p+4|0])}return s}}(this)}var r},cp.$metadata$={kind:$,simpleName:"MorphWeightsNode",interfaces:[qu]},hp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e,i=t.pushConstants;xt(i.stages,this.visibleIn),i.unaryPlus_wq3w46$((e=this,function(){return e.uniform})),i.onUpdate=this.onUpdate},hp.$metadata$={kind:$,simpleName:"PushConstantNode",interfaces:[qu]},Object.defineProperty(dp.prototype,"uniform",{get:function(){return this.uniform_24s88i$_0}}),Object.defineProperty(dp.prototype,"output",{configurable:!0,get:function(){return this.output_6ls89f$_0}}),dp.$metadata$={kind:$,simpleName:"PushConstantNode1f",interfaces:[hp]},Object.defineProperty(fp.prototype,"uniform",{get:function(){return this.uniform_rl2ob1$_0}}),Object.defineProperty(fp.prototype,"output",{configurable:!0,get:function(){return this.output_9us71w$_0}}),fp.$metadata$={kind:$,simpleName:"PushConstantNode2f",interfaces:[hp]},Object.defineProperty(_p.prototype,"uniform",{get:function(){return this.uniform_dq6h4k$_0}}),Object.defineProperty(_p.prototype,"output",{configurable:!0,get:function(){return this.output_d3s5ud$_0}}),_p.$metadata$={kind:$,simpleName:"PushConstantNode3f",interfaces:[hp]},Object.defineProperty(mp.prototype,"uniform",{get:function(){return this.uniform_fzofez$_0}}),Object.defineProperty(mp.prototype,"output",{configurable:!0,get:function(){return this.output_gcs4mu$_0}}),mp.$metadata$={kind:$,simpleName:"PushConstantNode4f",interfaces:[hp]},Object.defineProperty($p.prototype,"uniform",{get:function(){return this.uniform_o737wi$_0}}),Object.defineProperty($p.prototype,"output",{configurable:!0,get:function(){return this.output_yy7l5r$_0}}),$p.$metadata$={kind:$,simpleName:"PushConstantNodeColor",interfaces:[hp]},Object.defineProperty(yp.prototype,"uniform",{get:function(){return this.uniform_7m7o4x$_0}}),Object.defineProperty(yp.prototype,"output",{configurable:!0,get:function(){return this.output_p908nk$_0}}),yp.$metadata$={kind:$,simpleName:"PushConstantNode1i",interfaces:[hp]},Object.defineProperty(vp.prototype,"uniform",{get:function(){return this.uniform_xp1hao$_0}}),Object.defineProperty(vp.prototype,"output",{configurable:!0,get:function(){return this.output_si07g1$_0}}),vp.$metadata$={kind:$,simpleName:"PushConstantNode2i",interfaces:[hp]},Object.defineProperty(gp.prototype,"uniform",{get:function(){return this.uniform_3z6kr5$_0}}),Object.defineProperty(gp.prototype,"output",{configurable:!0,get:function(){return this.output_vr068i$_0}}),gp.$metadata$={kind:$,simpleName:"PushConstantNode3i",interfaces:[hp]},Object.defineProperty(bp.prototype,"uniform",{get:function(){return this.uniform_pqobse$_0}}),Object.defineProperty(bp.prototype,"output",{configurable:!0,get:function(){return this.output_z0050z$_0}}),bp.$metadata$={kind:$,simpleName:"PushConstantNode4i",interfaces:[hp]},xp.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},xp.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f(),e.ref1f())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f()+" *= "+this.outColor.ref4f()+".a;")},xp.$metadata$={kind:$,simpleName:"TextureSamplerNode",interfaces:[qu]},wp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexSize)},wp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec2 "+this.name+"_texCoord = (vec2(ivec2(gl_FragCoord.xy) % "+this.inTexSize.ref2i()+") + 0.5) / "+this.inTexSize.ref2f()+";\n            "+this.outNoise.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_texCoord")+";\n        ")},wp.$metadata$={kind:$,simpleName:"NoiseTextureSamplerNode",interfaces:[qu]},zp.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.cubeMap),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},zp.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTextureCube_buzeal$(this.cubeMap.name,this.inTexCoord.ref3f(),e.ref1f())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTextureCube_buzeal$(this.cubeMap.name,this.inTexCoord.ref3f())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f()+" *= "+this.outColor.ref4f()+".a;")},zp.$metadata$={kind:$,simpleName:"CubeMapSamplerNode",interfaces:[qu]},kp.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},kp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_in = normalize("+this.inTexCoord.ref3f()+");\n            vec2 "+this.name+"_uv = vec2(atan("+this.name+"_in.z, "+this.name+"_in.x), -asin("+this.name+"_in.y));\n            "+this.name+"_uv *= vec2(0.1591, 0.3183);\n            "+this.name+"_uv += 0.5;            \n        ");var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_uv",e.ref1f())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_uv")+";"),this.decodeRgbe&&t.appendMain_61zpoe$("\n                vec3 "+this.name+"_fRgb = "+this.outColor+".rgb;\n                float "+this.name+"_fExp = "+this.outColor+".a * 255.0 - 128.0;\n                "+this.outColor+" = vec4("+this.name+"_fRgb * pow(2.0, "+this.name+"_fExp), 1.0);\n            "),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f()+" *= "+this.outColor.ref4f()+".a;")},kp.$metadata$={kind:$,simpleName:"EquiRectSamplerNode",interfaces:[qu]},Sp.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.aoMap),this.dependsOn_7qvs0d$(this.inViewport),qu.prototype.setup_llmhyc$.call(this,t)},Sp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec2 aoMapSamplePos = gl_FragCoord.xy - "+this.inViewport.ref2f()+";\n                aoMapSamplePos.x /= "+this.inViewport+".z;\n                aoMapSamplePos.y /= "+this.inViewport+".w;\n                "+this.outAo.declare()+" = "+t.sampleTexture2d_buzeal$(this.aoMap.name,"aoMapSamplePos")+".r;\n            ")},Sp.$metadata$={kind:$,simpleName:"AoMapSampleNode",interfaces:[qu]},Cp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inTangent,this.inStrength])},Cp.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("calcBumpedNormal","\n            vec3 calcBumpedNormal(vec3 n, vec4 t, vec3 bumpN, float strength) {\n                vec3 normal = normalize(n);\n                vec3 tangent = normalize(t.xyz);\n                tangent = normalize(tangent - dot(tangent, normal) * normal);\n                vec3 bitangent = cross(normal, tangent) * t.w;\n                mat3 tbn = mat3(tangent, bitangent, normal);\n                return normalize(mix(normal, tbn * bumpN, strength));\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_bumpN = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f())+".xyz * 2.0 - 1.0;\n            "+this.outNormal.declare()+" = calcBumpedNormal("+this.inNormal.ref3f()+", "+this.inTangent.ref4f()+", "+this.name+"_bumpN, "+this.inStrength.ref1f()+");\n        ")},Cp.$metadata$={kind:$,simpleName:"NormalMapNode",interfaces:[qu]},Np.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inNormal)},Np.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendMain_61zpoe$("\n            "+this.outNormal.declare()+" = "+this.inNormal.ref3f()+" * (float(gl_FrontFacing) * 2.0 - 1.0);\n        ")},Np.$metadata$={kind:$,simpleName:"FlipBacksideNormalNode",interfaces:[qu]},Ep.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inPosition,this.inStrength])},Ep.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendMain_61zpoe$("\n            float "+this.name+"_disp = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f())+".x * "+this.inStrength.ref1f()+";\n            "+this.outPosition.declare()+" = "+this.inPosition.ref3f()+" + "+this.inNormal.ref3f()+" * "+this.name+"_disp;\n        ")},Ep.$metadata$={kind:$,simpleName:"DisplacementMapNode",interfaces:[qu]},Pp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},Pp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.input.name+"."+this.outChannels+";")},Pp.$metadata$={kind:$,simpleName:"SplitNode",interfaces:[qu]},Tp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inX,this.inY,this.inZ,this.inW])},Tp.prototype.generateCode_626509$=function(t){switch(this.output.variable.type.name){case"VEC_2F":t.appendMain_61zpoe$(this.output.declare()+" = vec2("+this.inX.ref1f()+", "+this.inY.ref1f()+");");break;case"VEC_3F":t.appendMain_61zpoe$(this.output.declare()+" = vec3("+this.inX.ref1f()+", "+this.inY.ref1f()+", "+this.inZ.ref1f()+");");break;case"VEC_4F":t.appendMain_61zpoe$(this.output.declare()+" = vec4("+this.inX.ref1f()+", "+this.inY.ref1f()+", "+this.inZ.ref1f()+", "+this.inW.ref1f()+");");break;default:throw V("Only allowed out types are VEC_2F, VEC_3F and VEC_4F")}},Tp.$metadata$={kind:$,simpleName:"CombineNode",interfaces:[qu]},Op.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inXyz,this.inW])},Op.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = vec4("+this.inXyz.ref3f()+", "+this.inW.ref1f()+");")},Op.$metadata$={kind:$,simpleName:"Combine31Node",interfaces:[qu]},Mp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),e.isType(t,ju)||c();var i=t.requiredVertexAttributes,n=this.attribute;i.add_11rb$(n)},Mp.$metadata$={kind:$,simpleName:"AttributeNode",interfaces:[qu]},jp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),e.isType(t,ju)||c();var i=t.requiredInstanceAttributes,n=this.attribute;i.add_11rb$(n)},jp.$metadata$={kind:$,simpleName:"InstanceAttributeNode",interfaces:[qu]},Object.defineProperty(Ap.prototype,"input",{configurable:!0,get:function(){return this.input_h7hmfg$_0},set:function(t){this.output=new Bu(new du(this.name,t.variable.type),this.fragmentNode),this.input_h7hmfg$_0=t}}),Object.defineProperty(Ap.prototype,"output",{configurable:!0,get:function(){return this.output_ftovqj$_0},set:function(t){this.output_ftovqj$_0=t}}),Object.defineProperty(Ap.prototype,"ifVar_0",{configurable:!0,get:function(){return null==this.ifVar_hcczpo$_0?pt("ifVar"):this.ifVar_hcczpo$_0},set:function(t){this.ifVar_hcczpo$_0=t}}),Object.defineProperty(Rp.prototype,"input",{configurable:!0,get:function(){return this.ifNode.input}}),Rp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input),this.$outer.ifVar_0=t.addStageOutput_ca2n0y$(this.$outer.output.variable,this.$outer.isFlat)},Rp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.$outer.output.name+" = "+this.input.refAsType_m7a9qd$(this.$outer.output.variable.type)+";")},Rp.$metadata$={kind:$,simpleName:"InputNode",interfaces:[qu]},Object.defineProperty(Ip.prototype,"output",{configurable:!0,get:function(){return this.ifNode.output}}),Ip.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e=t.inputs,i=this.$outer.ifVar_0;e.add_11rb$(i)},Ip.$metadata$={kind:$,simpleName:"OutputNode",interfaces:[qu]},Ap.$metadata$={kind:$,simpleName:"StageInterfaceNode",interfaces:[]},Lp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewport)},Lp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outNormalizedScreenCoord.declare()+" = "+this.outScreenCoord.ref3f()+";\n            "+this.outNormalizedScreenCoord+".xy - "+this.inViewport.ref2f()+";\n            "+this.outNormalizedScreenCoord+".xy /= "+this.inViewport.ref4f()+".zw;\n        ")},Lp.$metadata$={kind:$,simpleName:"ScreenCoordNode",interfaces:[qu]},Dp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inDepth])},Dp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outQuadPos.declare()+" = vec4("+this.inTexCoord.ref2f()+" * 2.0 - 1.0, "+this.inDepth.ref1f()+", 1.0);")},Dp.$metadata$={kind:$,simpleName:"FullScreenQuadTexPosNode",interfaces:[qu]},qp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inWeights0,this.inWeights1])},qp.prototype.generateCode_626509$=function(t){var e,i=this.iWeight<4?this.inWeights0:this.inWeights1;switch(this.iWeight%4){case 0:e="x";break;case 1:e="y";break;case 2:e="z";break;default:e="w"}var n=e;t.appendMain_61zpoe$(this.outWeight.declare()+" = "+i.ref4f()+"."+n+";")},qp.$metadata$={kind:$,simpleName:"GetMorphWeightNode",interfaces:[qu]},Object.defineProperty(Bp.prototype,"refractionColor",{configurable:!0,get:function(){return null==this.refractionColor_dpnwa6$_0?pt("refractionColor"):this.refractionColor_dpnwa6$_0},set:function(t){this.refractionColor_dpnwa6$_0=t}}),Object.defineProperty(Bp.prototype,"viewProj",{configurable:!0,get:function(){return null==this.viewProj_5bee0e$_0?pt("viewProj"):this.viewProj_5bee0e$_0},set:function(t){this.viewProj_5bee0e$_0=t}}),Bp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.refractionColor),this.dependsOn_lhtstx$(this.reflectionMap),this.dependsOn_8ak6wm$([this.viewProj,this.inRefractionDir,this.inFragPos,this.inMaterialThickness])},Bp.prototype.generateCode_626509$=function(t){var e,i,n=null!=(i=null!=(e=this.reflectionMap)?t.sampleTextureCube_buzeal$(e.name,this.inRefractionDir.ref3f()):null)?i:"vec4(0.0)";t.appendMain_61zpoe$("\n                vec3 "+this.name+"_refrPos = "+this.inFragPos.ref3f()+" + "+this.inRefractionDir.ref3f()+" * "+this.inMaterialThickness.ref1f()+";\n                vec4 "+this.name+"_clip = "+this.viewProj+" * vec4("+this.name+"_refrPos, 1.0);\n                vec2 "+this.name+"_refrSample = ("+this.name+"_clip.xy / "+this.name+"_clip.w) * 0.5 + 0.5;\n                \n                bool "+this.name+"_useReflMap = "+this.name+"_refrSample.x < 0.0 || "+this.name+"_refrSample.x > 1.0\n                                        || "+this.name+"_refrSample.y < 0.0 || "+this.name+"_refrSample.y > 1.0;\n                \n                "+this.outColor.declare()+" = vec4(0.0);\n                if (!"+this.name+"_useReflMap) {\n                    "+this.outColor+" = "+t.sampleTexture2d_buzeal$(this.refractionColor.name,this.name+"_refrSample")+";\n                }\n                if ("+this.outColor+".a == 0.0) {\n                    "+this.outColor+" = "+n+";\n                }\n            ")},Bp.$metadata$={kind:$,simpleName:"RefractionSamplerNode",interfaces:[qu]},Fp.$metadata$={kind:$,simpleName:"ShaderStage",interfaces:[P]},Fp.values=function(){return[Vp(),Gp(),Hp(),Wp(),Kp(),Xp()]},Fp.valueOf_61zpoe$=function(t){switch(t){case"VERTEX_SHADER":return Vp();case"TESSELEATION_CTRL":return Gp();case"TESSELATION_EVAL":return Hp();case"GEOMETRY_SHADER":return Wp();case"FRAGMENT_SHADER":return Kp();case"ALL":return Xp();default:T("No enum constant de.fabmax.kool.pipeline.ShaderStage."+t)}},Yp.$metadata$={kind:$,simpleName:"Albedo",interfaces:[P]},Yp.values=function(){return[Jp(),Qp(),tc(),ec()]},Yp.valueOf_61zpoe$=function(t){switch(t){case"CUBE_MAP_ALBEDO":return Jp();case"STATIC_ALBEDO":return Qp();case"TEXTURE_ALBEDO":return tc();case"VERTEX_ALBEDO":return ec();default:T("No enum constant de.fabmax.kool.pipeline.shading.Albedo."+t)}},ic.$metadata$={kind:$,simpleName:"AlphaMode",interfaces:[]},nc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))},nc.prototype.hashCode=function(){return e.getKClassFromExpression(this).hashCode()},nc.$metadata$={kind:$,simpleName:"AlphaModeBlend",interfaces:[ic]},rc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))},rc.prototype.hashCode=function(){return e.getKClassFromExpression(this).hashCode()},rc.$metadata$={kind:$,simpleName:"AlphaModeOpaque",interfaces:[ic]},oc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,oc)||c(),this.cutOff===t.cutOff)},oc.prototype.hashCode=function(){return rt(this.cutOff)},oc.$metadata$={kind:$,simpleName:"AlphaModeMask",interfaces:[ic]},sc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){var n,r;this.model.setup_xbeod6$(e,t),t.shaderCodeGenerator=(n=i,r=this,function(t){return n.shaderGenerator.generateShader_lvmec3$(r.model,t,n)}),Pl.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Object.defineProperty(ac.prototype,"color",{configurable:!0,get:function(){return this.color_cjijrc$_0},set:function(t){var e,i;this.color_cjijrc$_0=t,null!=(i=null!=(e=this.uColor_0)?e.value:null)&&i.set_czzhhz$(t)}}),ac.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u=this.model;t:do{var p;for(a=Fp.ALL,p=u.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&a.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(zt($.name,"uStaticColor")&&e.isType($,$p)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,$p)?d:c();if(null!=y){l=y;break t}}}l=null}while(0);this.uColor_0=null!=(r=l)?r.uniform:null,null!=(s=null!=(o=this.uColor_0)?o.value:null)&&s.set_czzhhz$(this.color),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},ac.$metadata$={kind:$,simpleName:"StaticColor",interfaces:[sc]},lc.$metadata$={kind:$,simpleName:"VertexColor",interfaces:[sc]},Object.defineProperty(uc.prototype,"texture",{configurable:!0,get:function(){return this.texture_smcrab$_0},set:function(t){var e;this.texture_smcrab$_0=t,null!=(e=this.textureSampler_0)&&(e.texture=t)}}),uc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l=this.model,u=this.texName_0;t:do{var p;for(s=Fp.ALL,p=l.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&s.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(zt($.name,u)&&e.isType($,up)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,up)?d:c();if(null!=y){a=y;break t}}}a=null}while(0);this.textureSampler_0=null!=(r=a)?r.sampler:null,null!=(o=this.textureSampler_0)&&(o.texture=this.texture),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},uc.$metadata$={kind:$,simpleName:"TextureColor",interfaces:[sc]},Object.defineProperty(pc.prototype,"texture",{configurable:!0,get:function(){return this.texture_mz7wkp$_0},set:function(t){var e;this.texture_mz7wkp$_0=t,null!=(e=this.cubeMapSampler_0)&&(e.texture=t)}}),pc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l=this.model,u=this.texName_0;t:do{var p;for(s=Fp.ALL,p=l.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&s.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(zt($.name,u)&&e.isType($,pp)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,pp)?d:c();if(null!=y){a=y;break t}}}a=null}while(0);this.cubeMapSampler_0=null!=(r=a)?r.sampler:null,null!=(o=this.cubeMapSampler_0)&&(o.texture=this.texture),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},pc.$metadata$={kind:$,simpleName:"CubeMapColor",interfaces:[sc]},cc.prototype.staticColorModel_0=function(){var t=new Ru("ModeledShader.staticColor()"),e=new Lu(t);e.positionOutput=e.simpleVertexPositionNode().outVec4;var i=new Du(t),n=i.pushConstantNodeColor_61zpoe$("uStaticColor");return i.colorOutput_a3v4si$(i.unlitMaterialNode_r20yfm$(n.output).outColor),t},cc.prototype.vertexColorModel_0=function(){var t=new Ru("ModeledShader.vertexColor()"),e={v:null},i=new Lu(t);e.v=i.stageInterfaceNode_iikjwn$("ifColors",i.attrColors().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new Du(t);return n.colorOutput_a3v4si$(n.unlitMaterialNode_r20yfm$(e.v.output).outColor),t},cc.prototype.textureColorModel_0=function(t){var e=new Ru("ModeledShader.textureColor()"),i={v:null},n=new Lu(e);i.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),n.positionOutput=n.simpleVertexPositionNode().outVec4;var r=new Du(e),o=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$(t),i.v.output);return r.colorOutput_a3v4si$(r.unlitMaterialNode_r20yfm$(o.outColor).outColor),e},cc.prototype.cubeMapColorModel_0=function(t){var e=new Ru("ModeledShader.cubeMapColor()"),i={v:null},n=new Lu(e),r=n.mvpNode(),o=n.vec4TransformNode_9krp9t$(n.attrPositions().output,r.outModelMat,1);i.v=n.stageInterfaceNode_iikjwn$("ifFragPos",o.outVec4),n.positionOutput=n.vec4TransformNode_9krp9t$(n.attrPositions().output,r.outMvpMat).outVec4;var s=new Du(e),a=s.normalizeNode_r20yfm$(i.v.output),l=s.cubeMapSamplerNode_2z3a2t$(s.cubeMapNode_61zpoe$(t),a.output);return s.colorOutput_a3v4si$(s.unlitMaterialNode_r20yfm$(l.outColor).outColor),e},cc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hc=null;function dc(){return null===hc&&new cc,hc}function fc(){this.albedoSource=ec(),this.isEmissiveMapped=!1,this.isNormalMapped=!1,this.isRoughnessMapped=!1,this.isMetallicMapped=!1,this.isOcclusionMapped=!1,this.isDisplacementMapped=!1,this.isInstanced=!1,this.isSkinned=!1,this.maxJoints=64,this.morphAttributes=M(),this.isMultiplyAlbedoMap=!1,this.isMultiplyEmissiveMap=!1,this.isMultiplyRoughnessMap=!1,this.isMultiplyMetallicMap=!1,this.isImageBasedLighting=!1,this.isScrSpcAmbientOcclusion=!1,this.isRefraction=!1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.cullMethod=xl(),this.alphaMode=new rc,this.isHdrOutput=!1,this.roughnessChannel="r",this.roughnessTexName="tRoughness",this.metallicChannel="r",this.metallicTexName="tMetallic",this.occlusionChannel="r",this.occlusionTexName="tOcclusion",this.albedo=V$().GRAY,this.emissive=V$().BLACK,this.roughness=.5,this.metallic=0,this.refractionIor=1.4,this.materialThickness=1,this.normalStrength=1,this.displacementStrength=.1,this.occlusionStrength=1,this.reflectionStrength=1,this.albedoMap=null,this.emissiveMap=null,this.normalMap=null,this.displacementMap=null,this.roughnessMap=null,this.metallicMap=null,this.occlusionMap=null,this.environmentMaps=null,this.scrSpcAmbientOcclusionMap=null,this.refractionColorMap=null}function _c(t,i){yc(),void 0===i&&(i=yc().defaultPbrModel_2ufela$(t)),sc.call(this,i),this.cullMethod_0=t.cullMethod,this.isBlending_0=e.isType(t.alphaMode,nc);var n,r=R(t.shadowMaps.size);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=t.shadowMaps.get_za3lpa$(o);this.shadowMaps_0=r,this.isReceivingShadow_0=!t.shadowMaps.isEmpty(),this.uRoughness_0=null,this.uMetallic_0=null,this.uAlbedo_0=null,this.uEmissive_0=null,this.uReflectionStrength_0=null,this.metallic_3y0qh7$_0=t.metallic,this.roughness_6ti3qe$_0=t.roughness,this.albedo_iz6fyn$_0=t.albedo,this.emissive_ybel2l$_0=t.emissive,this.reflectionStrength_itx8hq$_0=t.reflectionStrength,this.albedoSampler_0=null,this.emissiveSampler_0=null,this.normalSampler_0=null,this.metallicSampler_0=null,this.roughnessSampler_0=null,this.occlusionSampler_0=null,this.displacementSampler_0=null,this.uDispStrength_0=null,this.metallicTexName_0=t.metallicTexName,this.roughnessTexName_0=t.roughnessTexName,this.occlusionTexName_0=t.occlusionTexName,this.albedoMap_el88rd$_0=t.albedoMap,this.emissiveMap_frsh8l$_0=t.emissiveMap,this.normalMap_4f5ej9$_0=t.normalMap,this.metallicMap_uadmur$_0=t.metallicMap,this.roughnessMap_c1s1r6$_0=t.roughnessMap,this.occlusionMap_npdkt7$_0=t.occlusionMap,this.displacementMap_lffg8r$_0=t.displacementMap,this.displacementStrength_mpg4z2$_0=t.displacementStrength,this.uAmbient_0=null;var s,a,l,u,p=R(this.shadowMaps_0.length);s=p.length-1|0;for(var c=0;c<=s;c++)p[c]=null;this.depthSamplers_0=p,this.ambient_5b16r2$_0=new B$(.03,.03,.03,1),this.irradianceMapSampler_0=null,this.reflectionMapSampler_0=null,this.brdfLutSampler_0=null,this.irradianceMap_wb8dgm$_0=null!=(a=t.environmentMaps)?a.irradianceMap:null,this.reflectionMap_oydyp3$_0=null!=(l=t.environmentMaps)?l.reflectionMap:null,this.brdfLut_qrgoz5$_0=null!=(u=t.environmentMaps)?u.brdfLut:null,this.ssaoSampler_0=null,this.scrSpcAmbientOcclusionMap_94u3nd$_0=t.scrSpcAmbientOcclusionMap,this.uMaterialThickness_0=null,this.materialThickness_egefyb$_0=t.materialThickness,this.refractionColorSampler_0=null,this.refractionColorMap_mqtkjo$_0=t.refractionColorMap}function mc(){$c=this}sc.$metadata$={kind:$,simpleName:"ModeledShader",interfaces:[Pl]},fc.prototype.useStaticAlbedo_d7aj7k$=function(t){this.albedoSource=Qp(),this.albedo=t},fc.prototype.useAlbedoMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useAlbedoMap_daqygw$(uh(t),e)},fc.prototype.useAlbedoMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.albedoMap=t,this.isMultiplyAlbedoMap=e,this.albedoSource=tc()},fc.prototype.useNormalMap_9sobi5$=function(t,e){void 0===e&&(e=this.normalStrength),this.useNormalMap_9wkq18$(uh(t),e)},fc.prototype.useNormalMap_9wkq18$=function(t,e){void 0===e&&(e=this.normalStrength),this.normalMap=t,this.normalStrength=e,this.isNormalMapped=!0},fc.prototype.useOcclusionMap_9sobi5$=function(t,e){void 0===e&&(e=this.occlusionStrength),this.useOcclusionMap_9wkq18$(uh(t),e)},fc.prototype.useOcclusionMap_9wkq18$=function(t,e){void 0===e&&(e=this.occlusionStrength),this.occlusionMap=t,this.occlusionStrength=e,this.isOcclusionMapped=!0},fc.prototype.useDisplacementMap_9sobi5$=function(t,e){void 0===e&&(e=this.displacementStrength),this.useDisplacementMap_9wkq18$(uh(t),e)},fc.prototype.useDisplacementMap_9wkq18$=function(t,e){void 0===e&&(e=this.displacementStrength),this.displacementMap=t,this.displacementStrength=e,this.isDisplacementMapped=!0},fc.prototype.useEmissiveMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useEmissiveMap_daqygw$(uh(t),e)},fc.prototype.useEmissiveMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.emissiveMap=t,this.isMultiplyEmissiveMap=e,this.isEmissiveMapped=!0},fc.prototype.useMetallicMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useMetallicMap_daqygw$(uh(t),e)},fc.prototype.useMetallicMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.metallicMap=t,this.isMultiplyMetallicMap=e,this.isMetallicMapped=!0},fc.prototype.useRoughnessMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useRoughnessMap_daqygw$(uh(t),e)},fc.prototype.useRoughnessMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.roughnessMap=t,this.isMultiplyRoughnessMap=e,this.isRoughnessMapped=!0},fc.prototype.useScreenSpaceAmbientOcclusion_vv6xll$=function(t){this.scrSpcAmbientOcclusionMap=t,this.isScrSpcAmbientOcclusion=!0},fc.prototype.useRefraction_vv6xll$=function(t){this.refractionColorMap=t,this.isRefraction=null!=this.refractionColorMap},fc.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isImageBasedLighting=null!=t},fc.prototype.requiresTexCoords=function(){return this.albedoSource===tc()||this.isNormalMapped||this.isRoughnessMapped||this.isMetallicMapped||this.isOcclusionMapped||this.isDisplacementMapped},fc.$metadata$={kind:$,simpleName:"PbrMaterialConfig",interfaces:[]},Object.defineProperty(_c.prototype,"metallic",{configurable:!0,get:function(){return this.metallic_3y0qh7$_0},set:function(t){var e,i;this.metallic_3y0qh7$_0=t,null!=(i=null!=(e=this.uMetallic_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(_c.prototype,"roughness",{configurable:!0,get:function(){return this.roughness_6ti3qe$_0},set:function(t){var e,i;this.roughness_6ti3qe$_0=t,null!=(i=null!=(e=this.uRoughness_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(_c.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_iz6fyn$_0},set:function(t){var e,i,n;this.albedo_iz6fyn$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(_c.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_ybel2l$_0},set:function(t){var e,i,n;this.emissive_ybel2l$_0=t,null!=(n=null!=(i=null!=(e=this.uEmissive_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(_c.prototype,"reflectionStrength",{configurable:!0,get:function(){return this.reflectionStrength_itx8hq$_0},set:function(t){var e,i;this.reflectionStrength_itx8hq$_0=t,null!=(i=null!=(e=this.uReflectionStrength_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(_c.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_el88rd$_0},set:function(t){var e;this.albedoMap_el88rd$_0=t,null!=(e=this.albedoSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"emissiveMap",{configurable:!0,get:function(){return this.emissiveMap_frsh8l$_0},set:function(t){var e;this.emissiveMap_frsh8l$_0=t,null!=(e=this.emissiveSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_4f5ej9$_0},set:function(t){var e;this.normalMap_4f5ej9$_0=t,null!=(e=this.normalSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"metallicMap",{configurable:!0,get:function(){return this.metallicMap_uadmur$_0},set:function(t){var e;this.metallicMap_uadmur$_0=t,null!=(e=this.metallicSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"roughnessMap",{configurable:!0,get:function(){return this.roughnessMap_c1s1r6$_0},set:function(t){var e;this.roughnessMap_c1s1r6$_0=t,null!=(e=this.roughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"occlusionMap",{configurable:!0,get:function(){return this.occlusionMap_npdkt7$_0},set:function(t){var e;this.occlusionMap_npdkt7$_0=t,null!=(e=this.occlusionSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"displacementMap",{configurable:!0,get:function(){return this.displacementMap_lffg8r$_0},set:function(t){var e;this.displacementMap_lffg8r$_0=t,null!=(e=this.displacementSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"displacementStrength",{configurable:!0,get:function(){return this.displacementStrength_mpg4z2$_0},set:function(t){var e,i;this.displacementStrength_mpg4z2$_0=t,null!=(i=null!=(e=this.uDispStrength_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(_c.prototype,"ambient",{configurable:!0,get:function(){return this.ambient_5b16r2$_0},set:function(t){var e,i,n;this.ambient_5b16r2$_0=t,null!=(n=null!=(i=null!=(e=this.uAmbient_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(_c.prototype,"irradianceMap",{configurable:!0,get:function(){return this.irradianceMap_wb8dgm$_0},set:function(t){var e;this.irradianceMap_wb8dgm$_0=t,null!=(e=this.irradianceMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"reflectionMap",{configurable:!0,get:function(){return this.reflectionMap_oydyp3$_0},set:function(t){var e;this.reflectionMap_oydyp3$_0=t,null!=(e=this.reflectionMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"brdfLut",{configurable:!0,get:function(){return this.brdfLut_qrgoz5$_0},set:function(t){var e;this.brdfLut_qrgoz5$_0=t,null!=(e=this.brdfLutSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"scrSpcAmbientOcclusionMap",{configurable:!0,get:function(){return this.scrSpcAmbientOcclusionMap_94u3nd$_0},set:function(t){var e;this.scrSpcAmbientOcclusionMap_94u3nd$_0=t,null!=(e=this.ssaoSampler_0)&&(e.texture=t)}}),Object.defineProperty(_c.prototype,"materialThickness",{configurable:!0,get:function(){return this.materialThickness_egefyb$_0},set:function(t){var e,i;this.materialThickness_egefyb$_0=t,null!=(i=null!=(e=this.uMaterialThickness_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(_c.prototype,"refractionColorMap",{configurable:!0,get:function(){return this.refractionColorMap_mqtkjo$_0},set:function(t){var e;this.refractionColorMap_mqtkjo$_0=t,null!=(e=this.refractionColorSampler_0)&&(e.texture=t)}}),_c.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_0,t.blendMode=this.isBlending_0?al():rl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},_c.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,P,T,O,M,j,A,R,I,L,D,q,B,F,U,V,G,H,W=this.model;t:do{var K;for(G=Fp.ALL,K=W.stages.values.iterator();K.hasNext();){var X=K.next();if(0!=(X.stage.mask&G.mask)){var Y,Z,J=X.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(zt(tt.name,"uMetallic")&&e.isType(tt,dp)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,dp)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);this.uMetallic_0=H,null!=(r=this.uMetallic_0)&&(r.uniform.value=this.metallic);var it,nt,rt=this.model;t:do{var ot;for(it=Fp.ALL,ot=rt.stages.values.iterator();ot.hasNext();){var st=ot.next();if(0!=(st.stage.mask&it.mask)){var at,lt,ut=st.nodes;e:do{var pt;for(pt=ut.iterator();pt.hasNext();){var ct=pt.next();if(zt(ct.name,"uRoughness")&&e.isType(ct,dp)){lt=ct;break e}}lt=null}while(0);var ht=null==(at=lt)||e.isType(at,dp)?at:c();if(null!=ht){nt=ht;break t}}}nt=null}while(0);this.uRoughness_0=nt,null!=(o=this.uRoughness_0)&&(o.uniform.value=this.roughness);var dt,ft,_t=this.model;t:do{var mt;for(dt=Fp.ALL,mt=_t.stages.values.iterator();mt.hasNext();){var $t=mt.next();if(0!=($t.stage.mask&dt.mask)){var yt,vt,gt=$t.nodes;e:do{var bt;for(bt=gt.iterator();bt.hasNext();){var xt=bt.next();if(zt(xt.name,"uAlbedo")&&e.isType(xt,$p)){vt=xt;break e}}vt=null}while(0);var wt=null==(yt=vt)||e.isType(yt,$p)?yt:c();if(null!=wt){ft=wt;break t}}}ft=null}while(0);this.uAlbedo_0=ft,null!=(l=null!=(a=null!=(s=this.uAlbedo_0)?s.uniform:null)?a.value:null)&&l.set_czzhhz$(this.albedo);var kt,St,Ct=this.model;t:do{var Nt;for(kt=Fp.ALL,Nt=Ct.stages.values.iterator();Nt.hasNext();){var Et=Nt.next();if(0!=(Et.stage.mask&kt.mask)){var Pt,Tt,Ot=Et.nodes;e:do{var Mt;for(Mt=Ot.iterator();Mt.hasNext();){var jt=Mt.next();if(zt(jt.name,"uEmissive")&&e.isType(jt,$p)){Tt=jt;break e}}Tt=null}while(0);var At=null==(Pt=Tt)||e.isType(Pt,$p)?Pt:c();if(null!=At){St=At;break t}}}St=null}while(0);this.uEmissive_0=St,null!=(h=null!=(p=null!=(u=this.uEmissive_0)?u.uniform:null)?p.value:null)&&h.set_czzhhz$(this.emissive);var Rt,It,Lt=this.model;t:do{var Dt;for(Rt=Fp.ALL,Dt=Lt.stages.values.iterator();Dt.hasNext();){var qt=Dt.next();if(0!=(qt.stage.mask&Rt.mask)){var Bt,Ft,Ut=qt.nodes;e:do{var Vt;for(Vt=Ut.iterator();Vt.hasNext();){var Gt=Vt.next();if(zt(Gt.name,"uReflectionStrength")&&e.isType(Gt,dp)){Ft=Gt;break e}}Ft=null}while(0);var Ht=null==(Bt=Ft)||e.isType(Bt,dp)?Bt:c();if(null!=Ht){It=Ht;break t}}}It=null}while(0);this.uReflectionStrength_0=It,null!=(f=null!=(d=this.uReflectionStrength_0)?d.uniform:null)&&(f.value=this.reflectionStrength);var Wt,Kt,Xt=this.model;t:do{var Yt;for(Wt=Fp.ALL,Yt=Xt.stages.values.iterator();Yt.hasNext();){var Zt=Yt.next();if(0!=(Zt.stage.mask&Wt.mask)){var Jt,Qt,te=Zt.nodes;e:do{var ee;for(ee=te.iterator();ee.hasNext();){var ie=ee.next();if(zt(ie.name,"uAmbient")&&e.isType(ie,$p)){Qt=ie;break e}}Qt=null}while(0);var ne=null==(Jt=Qt)||e.isType(Jt,$p)?Jt:c();if(null!=ne){Kt=ne;break t}}}Kt=null}while(0);if(this.uAmbient_0=Kt,null!=($=null!=(m=null!=(_=this.uAmbient_0)?_.uniform:null)?m.value:null)&&$.set_czzhhz$(this.ambient),this.isReceivingShadow_0){y=this.depthSamplers_0;for(var re=0;re!==y.length;++re){var oe,se,ae,le=this.model,ue="depthMap_"+re;t:do{var pe;for(se=Fp.ALL,pe=le.stages.values.iterator();pe.hasNext();){var ce=pe.next();if(0!=(ce.stage.mask&se.mask)){var he,de,fe=ce.nodes;e:do{var _e;for(_e=fe.iterator();_e.hasNext();){var me=_e.next();if(zt(me.name,ue)&&e.isType(me,up)){de=me;break e}}de=null}while(0);var $e=null==(he=de)||e.isType(he,up)?he:c();if(null!=$e){ae=$e;break t}}}ae=null}while(0);var ye=null!=(oe=ae)?oe.sampler:null;this.depthSamplers_0[re]=ye,this.shadowMaps_0[re].setupSampler_s70oj3$(ye)}}var ve,ge,be=this.model;t:do{var xe;for(ve=Fp.ALL,xe=be.stages.values.iterator();xe.hasNext();){var we=xe.next();if(0!=(we.stage.mask&ve.mask)){var ze,ke,Se=we.nodes;e:do{var Ce;for(Ce=Se.iterator();Ce.hasNext();){var Ne=Ce.next();if(zt(Ne.name,"irradianceMap")&&e.isType(Ne,pp)){ke=Ne;break e}}ke=null}while(0);var Ee=null==(ze=ke)||e.isType(ze,pp)?ze:c();if(null!=Ee){ge=Ee;break t}}}ge=null}while(0);this.irradianceMapSampler_0=null!=(v=ge)?v.sampler:null,null!=(g=this.irradianceMapSampler_0)&&(g.texture=this.irradianceMap);var Pe,Te,Oe=this.model;t:do{var Me;for(Pe=Fp.ALL,Me=Oe.stages.values.iterator();Me.hasNext();){var je=Me.next();if(0!=(je.stage.mask&Pe.mask)){var Ae,Re,Ie=je.nodes;e:do{var Le;for(Le=Ie.iterator();Le.hasNext();){var De=Le.next();if(zt(De.name,"reflectionMap")&&e.isType(De,pp)){Re=De;break e}}Re=null}while(0);var qe=null==(Ae=Re)||e.isType(Ae,pp)?Ae:c();if(null!=qe){Te=qe;break t}}}Te=null}while(0);this.reflectionMapSampler_0=null!=(b=Te)?b.sampler:null,null!=(x=this.reflectionMapSampler_0)&&(x.texture=this.reflectionMap);var Be,Fe,Ue=this.model;t:do{var Ve;for(Be=Fp.ALL,Ve=Ue.stages.values.iterator();Ve.hasNext();){var Ge=Ve.next();if(0!=(Ge.stage.mask&Be.mask)){var He,We,Ke=Ge.nodes;e:do{var Xe;for(Xe=Ke.iterator();Xe.hasNext();){var Ye=Xe.next();if(zt(Ye.name,"brdfLut")&&e.isType(Ye,up)){We=Ye;break e}}We=null}while(0);var Ze=null==(He=We)||e.isType(He,up)?He:c();if(null!=Ze){Fe=Ze;break t}}}Fe=null}while(0);this.brdfLutSampler_0=null!=(w=Fe)?w.sampler:null,null!=(z=this.brdfLutSampler_0)&&(z.texture=this.brdfLut);var Je,Qe,ti=this.model;t:do{var ei;for(Je=Fp.ALL,ei=ti.stages.values.iterator();ei.hasNext();){var ii=ei.next();if(0!=(ii.stage.mask&Je.mask)){var ni,ri,oi=ii.nodes;e:do{var si;for(si=oi.iterator();si.hasNext();){var ai=si.next();if(zt(ai.name,"ssaoMap")&&e.isType(ai,up)){ri=ai;break e}}ri=null}while(0);var li=null==(ni=ri)||e.isType(ni,up)?ni:c();if(null!=li){Qe=li;break t}}}Qe=null}while(0);this.ssaoSampler_0=null!=(k=Qe)?k.sampler:null,null!=(S=this.ssaoSampler_0)&&(S.texture=this.scrSpcAmbientOcclusionMap);var ui,pi,ci=this.model;t:do{var hi;for(ui=Fp.ALL,hi=ci.stages.values.iterator();hi.hasNext();){var di=hi.next();if(0!=(di.stage.mask&ui.mask)){var fi,_i,mi=di.nodes;e:do{var $i;for($i=mi.iterator();$i.hasNext();){var yi=$i.next();if(zt(yi.name,"uMaterialThickness")&&e.isType(yi,dp)){_i=yi;break e}}_i=null}while(0);var vi=null==(fi=_i)||e.isType(fi,dp)?fi:c();if(null!=vi){pi=vi;break t}}}pi=null}while(0);this.uMaterialThickness_0=pi,null!=(C=this.uMaterialThickness_0)&&(C.uniform.value=this.materialThickness);var gi,bi,xi=this.model;t:do{var wi;for(gi=Fp.ALL,wi=xi.stages.values.iterator();wi.hasNext();){var zi=wi.next();if(0!=(zi.stage.mask&gi.mask)){var ki,Si,Ci=zi.nodes;e:do{var Ni;for(Ni=Ci.iterator();Ni.hasNext();){var Ei=Ni.next();if(zt(Ei.name,"tRefractionColor")&&e.isType(Ei,up)){Si=Ei;break e}}Si=null}while(0);var Pi=null==(ki=Si)||e.isType(ki,up)?ki:c();if(null!=Pi){bi=Pi;break t}}}bi=null}while(0);this.refractionColorSampler_0=null!=(N=bi)?N.sampler:null,null!=(E=this.refractionColorSampler_0)&&(E.texture=this.refractionColorMap);var Ti,Oi,Mi=this.model;t:do{var ji;for(Ti=Fp.ALL,ji=Mi.stages.values.iterator();ji.hasNext();){var Ai=ji.next();if(0!=(Ai.stage.mask&Ti.mask)){var Ri,Ii,Li=Ai.nodes;e:do{var Di;for(Di=Li.iterator();Di.hasNext();){var qi=Di.next();if(zt(qi.name,"tAlbedo")&&e.isType(qi,up)){Ii=qi;break e}}Ii=null}while(0);var Bi=null==(Ri=Ii)||e.isType(Ri,up)?Ri:c();if(null!=Bi){Oi=Bi;break t}}}Oi=null}while(0);this.albedoSampler_0=null!=(P=Oi)?P.sampler:null,null!=(T=this.albedoSampler_0)&&(T.texture=this.albedoMap);var Fi,Ui,Vi=this.model;t:do{var Gi;for(Fi=Fp.ALL,Gi=Vi.stages.values.iterator();Gi.hasNext();){var Hi=Gi.next();if(0!=(Hi.stage.mask&Fi.mask)){var Wi,Ki,Xi=Hi.nodes;e:do{var Yi;for(Yi=Xi.iterator();Yi.hasNext();){var Zi=Yi.next();if(zt(Zi.name,"tEmissive")&&e.isType(Zi,up)){Ki=Zi;break e}}Ki=null}while(0);var Ji=null==(Wi=Ki)||e.isType(Wi,up)?Wi:c();if(null!=Ji){Ui=Ji;break t}}}Ui=null}while(0);this.emissiveSampler_0=null!=(O=Ui)?O.sampler:null,null!=(M=this.emissiveSampler_0)&&(M.texture=this.emissiveMap);var Qi,tn,en=this.model;t:do{var nn;for(Qi=Fp.ALL,nn=en.stages.values.iterator();nn.hasNext();){var rn=nn.next();if(0!=(rn.stage.mask&Qi.mask)){var on,sn,an=rn.nodes;e:do{var ln;for(ln=an.iterator();ln.hasNext();){var un=ln.next();if(zt(un.name,"tNormal")&&e.isType(un,up)){sn=un;break e}}sn=null}while(0);var pn=null==(on=sn)||e.isType(on,up)?on:c();if(null!=pn){tn=pn;break t}}}tn=null}while(0);this.normalSampler_0=null!=(j=tn)?j.sampler:null,null!=(A=this.normalSampler_0)&&(A.texture=this.normalMap);var cn,hn,dn=this.model,fn=this.metallicTexName_0;t:do{var _n;for(cn=Fp.ALL,_n=dn.stages.values.iterator();_n.hasNext();){var mn=_n.next();if(0!=(mn.stage.mask&cn.mask)){var $n,yn,vn=mn.nodes;e:do{var gn;for(gn=vn.iterator();gn.hasNext();){var bn=gn.next();if(zt(bn.name,fn)&&e.isType(bn,up)){yn=bn;break e}}yn=null}while(0);var xn=null==($n=yn)||e.isType($n,up)?$n:c();if(null!=xn){hn=xn;break t}}}hn=null}while(0);this.metallicSampler_0=null!=(R=hn)?R.sampler:null,null!=(I=this.metallicSampler_0)&&(I.texture=this.metallicMap);var wn,zn,kn=this.model,Sn=this.roughnessTexName_0;t:do{var Cn;for(wn=Fp.ALL,Cn=kn.stages.values.iterator();Cn.hasNext();){var Nn=Cn.next();if(0!=(Nn.stage.mask&wn.mask)){var En,Pn,Tn=Nn.nodes;e:do{var On;for(On=Tn.iterator();On.hasNext();){var Mn=On.next();if(zt(Mn.name,Sn)&&e.isType(Mn,up)){Pn=Mn;break e}}Pn=null}while(0);var jn=null==(En=Pn)||e.isType(En,up)?En:c();if(null!=jn){zn=jn;break t}}}zn=null}while(0);this.roughnessSampler_0=null!=(L=zn)?L.sampler:null,null!=(D=this.roughnessSampler_0)&&(D.texture=this.roughnessMap);var An,Rn,In=this.model,Ln=this.occlusionTexName_0;t:do{var Dn;for(An=Fp.ALL,Dn=In.stages.values.iterator();Dn.hasNext();){var qn=Dn.next();if(0!=(qn.stage.mask&An.mask)){var Bn,Fn,Un=qn.nodes;e:do{var Vn;for(Vn=Un.iterator();Vn.hasNext();){var Gn=Vn.next();if(zt(Gn.name,Ln)&&e.isType(Gn,up)){Fn=Gn;break e}}Fn=null}while(0);var Hn=null==(Bn=Fn)||e.isType(Bn,up)?Bn:c();if(null!=Hn){Rn=Hn;break t}}}Rn=null}while(0);this.occlusionSampler_0=null!=(q=Rn)?q.sampler:null,null!=(B=this.occlusionSampler_0)&&(B.texture=this.occlusionMap);var Wn,Kn,Xn=this.model;t:do{var Yn;for(Wn=Fp.ALL,Yn=Xn.stages.values.iterator();Yn.hasNext();){var Zn=Yn.next();if(0!=(Zn.stage.mask&Wn.mask)){var Jn,Qn,tr=Zn.nodes;e:do{var er;for(er=tr.iterator();er.hasNext();){var ir=er.next();if(zt(ir.name,"tDisplacement")&&e.isType(ir,up)){Qn=ir;break e}}Qn=null}while(0);var nr=null==(Jn=Qn)||e.isType(Jn,up)?Jn:c();if(null!=nr){Kn=nr;break t}}}Kn=null}while(0);this.displacementSampler_0=null!=(F=Kn)?F.sampler:null,null!=(U=this.displacementSampler_0)&&(U.texture=this.displacementMap);var rr,or,sr=this.model;t:do{var ar;for(rr=Fp.ALL,ar=sr.stages.values.iterator();ar.hasNext();){var lr=ar.next();if(0!=(lr.stage.mask&rr.mask)){var ur,pr,cr=lr.nodes;e:do{var hr;for(hr=cr.iterator();hr.hasNext();){var dr=hr.next();if(zt(dr.name,"uDispStrength")&&e.isType(dr,dp)){pr=dr;break e}}pr=null}while(0);var fr=null==(ur=pr)||e.isType(ur,dp)?ur:c();if(null!=fr){or=fr;break t}}}or=null}while(0);this.uDispStrength_0=or,null!=(V=this.uDispStrength_0)&&(V.uniform.value=this.displacementStrength),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},mc.prototype.defaultPbrModel_2ufela$=function(t){var i,n,r,o,s,a=new Ru("defaultPbrModel()"),l={v:null},p={v:null},c={v:null},h={v:null},d={v:null},f={v:null},_=M(),m=new Lu(a);if(f.v=m.mvpNode(),t.isInstanced?(o=m.multiplyNode_ze33is$(f.v.outModelMat,m.instanceAttrModelMat().output).output,s=m.multiplyNode_ze33is$(f.v.outMvpMat,m.instanceAttrModelMat().output).output):(o=f.v.outModelMat,s=f.v.outMvpMat),t.isSkinned){var $=m.skinTransformNode_78eraa$(m.attrJoints().output,m.attrWeights().output,t.maxJoints);o=m.multiplyNode_ze33is$(o,$.outJointMat).output,s=m.multiplyNode_ze33is$(s,$.outJointMat).output}i=t.requiresTexCoords()?m.stageInterfaceNode_iikjwn$("ifTexCoords",m.attrTexCoords().output):null,d.v=i,n=t.albedoSource===ec()?m.stageInterfaceNode_iikjwn$("ifColors",m.attrColors().output):null,l.v=n;var y,v,g=t.morphAttributes.isEmpty()?null:m.morphWeightsNode_za3lpa$(t.morphAttributes.size),b={v:m.attrPositions().output},w=t.morphAttributes,k=M();for(y=w.iterator();y.hasNext();){var S=y.next();u(S.name,ds().POSITIONS.name)&&k.add_11rb$(S)}for(v=k.iterator();v.hasNext();){var C=v.next(),N=m.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(C),x(g)),E=m.multiplyNode_ze33is$(m.attributeNode_nm2vx5$(C).output,N.outWeight);b.v=m.addNode_ze33is$(b.v,E.output).output}var P,T,O={v:m.attrNormals().output},j=t.morphAttributes,A=M();for(P=j.iterator();P.hasNext();){var R=P.next();u(R.name,ds().NORMALS.name)&&A.add_11rb$(R)}for(T=A.iterator();T.hasNext();){var I=T.next(),L=m.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(I),x(g)),D=m.multiplyNode_ze33is$(m.attributeNode_nm2vx5$(I).output,L.outWeight);O.v=m.addNode_ze33is$(O.v,D.output).output}if(t.isNormalMapped){var q,B,F=m.attrTangents().output,U={v:m.splitNode_500t7j$(F,"xyz").output},V=t.morphAttributes,G=M();for(q=V.iterator();q.hasNext();){var H=q.next();u(H.name,ds().TANGENTS.name)&&G.add_11rb$(H)}for(B=G.iterator();B.hasNext();){var W=B.next(),K=m.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(W),x(g)),X=m.multiplyNode_ze33is$(m.attributeNode_nm2vx5$(W).output,K.outWeight);U.v=m.addNode_ze33is$(U.v,X.output).output}var Y=m.vec3TransformNode_vid4wo$(U.v,o,0),Z=m.combineXyzWNode_ze33is$(Y.outVec3,m.splitNode_500t7j$(F,"w").output);r=m.stageInterfaceNode_iikjwn$("ifTangents",Z.output)}else r=null;if(c.v=r,t.isDisplacementMapped){var Q=m.textureNode_61zpoe$("tDisplacement"),tt=m.displacementMapNode_7fvjbk$(Q,x(d.v).input,b.v,O.v);tt.inStrength=m.pushConstantNode1f_61zpoe$("uDispStrength").output;var et=tt;b.v=et.outPosition}var it=m.vec3TransformNode_vid4wo$(b.v,o,1).outVec3;h.v=m.stageInterfaceNode_iikjwn$("ifFragPos",it);var nt=m.vec3TransformNode_vid4wo$(O.v,o,0);p.v=m.stageInterfaceNode_iikjwn$("ifNormals",nt.outVec3);var rt,ot,st=m.vec4TransformNode_9krp9t$(it,f.v.outViewMat).outVec4,at=0;for(rt=t.shadowMaps.iterator();rt.hasNext();){var lt=rt.next(),ut=J((at=(ot=at)+1|0,ot));if(e.isType(lt,yk)){var pt=m.cascadedShadowMapNode_zw58l$(lt,"depthMap_"+ut,st,it);_.add_11rb$(pt)}else if(e.isType(lt,mk)){var ct=m.simpleShadowMapNode_7yd351$(lt,"depthMap_"+ut,it);_.add_11rb$(ct)}}m.positionOutput=m.vec4TransformNode_9krp9t$(b.v,s).outVec4;var ht,dt,ft,_t,mt,$t=new Du(a);switch(t.albedoSource.name){case"VERTEX_ALBEDO":ht=x(l.v).output;break;case"STATIC_ALBEDO":ht=$t.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var yt=$t.textureSamplerNode_ce41yx$($t.textureNode_61zpoe$("tAlbedo"),x(d.v).output),vt=$t.gammaNode_ze33is$(yt.outColor);if(t.isMultiplyAlbedoMap){var bt=$t.pushConstantNodeColor_61zpoe$("uAlbedo").output;ht=$t.multiplyNode_ze33is$(vt.outColor,bt).output}else ht=vt.outColor;break;case"CUBE_MAP_ALBEDO":throw gt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:ht=e.noWhenBranchMatched()}var xt={v:ht};null!=(ft=e.isType(dt=t.alphaMode,oc)?dt:null)&&$t.discardAlpha_ze33is$($t.splitNode_500t7j$(xt.v,"a").output,$t.constFloat_mx4ult$(ft.cutOff)),e.isType(t.alphaMode,nc)||(xt.v=$t.combineXyzWNode_ze33is$(xt.v,$t.constFloat_mx4ult$(1)).output);var wt,zt=f.v.addToStage_llmhyc$(a.fragmentStageGraph),kt=$t.multiLightNode_za3lpa$(t.maxLights);for(wt=_.iterator();wt.hasNext();){var St=wt.next();kt.inShaodwFacs[St.lightIndex]=St.outShadowFac}if(t.isNormalMapped&&null!=c.v){var Ct=$t.normalMapNode_j8913i$($t.textureNode_61zpoe$("tNormal"),x(d.v).output,p.v.output,c.v.output);Ct.inStrength=$t.constFloat_mx4ult$(t.normalStrength),_t=Ct.outNormal}else _t=p.v.output;var Nt={v:_t};Nt.v=$t.normalizeNode_r20yfm$($t.flipBacksideNormalNode_r20yfm$(Nt.v).outNormal).output;var Et,Pt,Tt,Ot=$t.viewDirNode_ze33is$(zt.outCamPos,h.v.output).output;if(t.isImageBasedLighting){var Mt=$t.cubeMapNode_61zpoe$("irradianceMap");Tt=$t.cubeMapSamplerNode_2z3a2t$(Mt,p.v.output),Et=$t.cubeMapNode_61zpoe$("reflectionMap"),Pt=$t.textureNode_61zpoe$("brdfLut")}else Tt=null,Et=null,Pt=null;var jt,At,Rt,It,Lt,Dt=$t.pbrMaterialNode_heq9k0$(kt,Et,Pt),qt=Tt;if(Dt.inAlbedo=xt.v,Dt.inNormal=Nt.v,Dt.lightBacksides=t.lightBacksides,Dt.inFragPos=h.v.output,Dt.inViewDir=Ot,Dt.inReflectionStrength=$t.pushConstantNode1f_61zpoe$("uReflectionStrength").output,Dt.inIrradiance=null!=(jt=null!=qt?qt.outColor:null)?jt:$t.pushConstantNodeColor_61zpoe$("uAmbient").output,t.isEmissiveMapped){var Bt=$t.textureSamplerNode_ce41yx$($t.textureNode_61zpoe$("tEmissive"),x(d.v).output).outColor,Ft=$t.gammaNode_ze33is$(Bt).outColor;if(t.isMultiplyEmissiveMap){var Ut=$t.pushConstantNodeColor_61zpoe$("uEmissive").output;At=$t.multiplyNode_ze33is$(Ft,Ut).output}else At=Ft;Dt.inEmissive=At}else Dt.inEmissive=$t.pushConstantNodeColor_61zpoe$("uEmissive").output;var Vt=z();if(t.isRoughnessMapped){var Gt=$t.textureSamplerNode_ce41yx$($t.textureNode_61zpoe$(t.roughnessTexName),x(d.v).output).outColor,Ht=t.roughnessTexName;Vt.put_xwzc9p$(Ht,Gt);var Wt=$t.splitNode_500t7j$(Gt,t.roughnessChannel).output;if(t.isMultiplyRoughnessMap){var Kt=$t.pushConstantNode1f_61zpoe$("uRoughness").output;Rt=$t.multiplyNode_ze33is$(Wt,Kt).output}else Rt=Wt;Dt.inRoughness=Rt}else Dt.inRoughness=$t.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var Xt,Yt=t.metallicTexName,Zt=Vt.get_11rb$(Yt);if(null==Zt){var Jt=$t.textureSamplerNode_ce41yx$($t.textureNode_61zpoe$(t.metallicTexName),x(d.v).output).outColor;Vt.put_xwzc9p$(Yt,Jt),Xt=Jt}else Xt=Zt;var Qt=Xt,te=t.metallicTexName;Vt.put_xwzc9p$(te,Qt);var ee=$t.splitNode_500t7j$(Qt,t.metallicChannel).output;if(t.isMultiplyMetallicMap){var ie=$t.pushConstantNode1f_61zpoe$("uMetallic").output;It=$t.multiplyNode_ze33is$(ee,ie).output}else It=ee;Dt.inMetallic=It}else Dt.inMetallic=$t.pushConstantNode1f_61zpoe$("uMetallic").output;var ne=$t.constFloat_mx4ult$(1);if(t.isOcclusionMapped){var re,oe=t.occlusionTexName,se=Vt.get_11rb$(oe);if(null==se){var ae=$t.textureSamplerNode_ce41yx$($t.textureNode_61zpoe$(t.occlusionTexName),x(d.v).output).outColor;Vt.put_xwzc9p$(oe,ae),re=ae}else re=se;var le=re,ue=t.occlusionTexName;Vt.put_xwzc9p$(ue,le);var pe=$t.splitNode_500t7j$(le,t.occlusionChannel).output;if(1!==t.occlusionStrength){var ce=t.occlusionStrength;Lt=$t.addNode_ze33is$($t.constFloat_mx4ult$(1-ce),$t.multiplyNode_tuikh5$(pe,ce).output).output}else Lt=pe;ne=Lt}if(t.isScrSpcAmbientOcclusion){var he=$t.textureNode_61zpoe$("ssaoMap"),de=$t.addNode_u9w9by$(new Sp(he,$t.stage));de.inViewport=zt.outViewport,ne=t.isOcclusionMapped?$t.multiplyNode_ze33is$(ne,de.outAo).output:de.outAo}Dt.inAmbientOccl=ne;var fe=Dt,_e=fe.outColor;if(t.isRefraction){var me=$t.addNode_u9w9by$(new Bp($t.stage));me.reflectionMap=Et,me.refractionColor=$t.textureNode_61zpoe$("tRefractionColor"),me.viewProj=$t.multiplyNode_ze33is$(zt.outProjMat,zt.outViewMat).output,me.inMaterialThickness=$t.pushConstantNode1f_61zpoe$("uMaterialThickness").output,me.inFragPos=h.v.output,me.inRefractionDir=$t.refractNode_92v6he$(Ot,Nt.v,$t.constFloat_mx4ult$(1/t.refractionIor)).outDirection;var $e=me.outColor,ye=$t.subtractNode_ze33is$($t.constFloat_mx4ult$(1),$t.splitNode_500t7j$(fe.outColor,"a").output).output,ve=$t.multiplyNode_ze33is$($e,ye).output;_e=$t.combineXyzWNode_ze33is$($t.addNode_ze33is$(_e,ve).output,$t.constFloat_mx4ult$(1)).output}return t.isHdrOutput||(_e=$t.hdrToLdrNode_r20yfm$(_e).outColor),mt=t.alphaMode,e.isType(mt,nc)?$t.colorOutput_a3v4si$(_e):e.isType(mt,oc)||e.isType(mt,rc)?$t.colorOutput_a3v4si$(_e,void 0,$t.constFloat_mx4ult$(1)):e.noWhenBranchMatched(),a},mc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var $c=null;function yc(){return null===$c&&new mc,$c}function vc(t,i){xc(),void 0===i&&(i=xc().defaultPhongModel_m663ta$(t)),sc.call(this,i),this.cullMethod_0=t.cullMethod,this.isBlending_0=e.isType(t.alphaMode,nc);var n,r=R(t.shadowMaps.size);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=t.shadowMaps.get_za3lpa$(o);this.shadowMaps_0=r,this.isReceivingShadow_0=!t.shadowMaps.isEmpty(),this.uShininess_0=null,this.uSpecularIntensity_0=null,this.albedoSampler_0=null,this.normalSampler_0=null,this.uAlbedo_0=null,this.shininess_9rzino$_0=t.shininess,this.specularIntensity_immrg6$_0=t.specularIntensity,this.albedo_xrasdd$_0=t.albedo,this.albedoMap_wcysax$_0=t.albedoMap,this.normalMap_dcl50b$_0=t.normalMap;var s,a=R(this.shadowMaps_0.length);s=a.length-1|0;for(var l=0;l<=s;l++)a[l]=null;this.depthSamplers_0=a}function gc(){bc=this}_c.$metadata$={kind:$,simpleName:"PbrShader",interfaces:[sc]},Object.defineProperty(vc.prototype,"shininess",{configurable:!0,get:function(){return this.shininess_9rzino$_0},set:function(t){var e,i;this.shininess_9rzino$_0=t,null!=(i=null!=(e=this.uShininess_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(vc.prototype,"specularIntensity",{configurable:!0,get:function(){return this.specularIntensity_immrg6$_0},set:function(t){var e,i;this.specularIntensity_immrg6$_0=t,null!=(i=null!=(e=this.uSpecularIntensity_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(vc.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_xrasdd$_0},set:function(t){var e,i,n;this.albedo_xrasdd$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(vc.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_wcysax$_0},set:function(t){var e;this.albedoMap_wcysax$_0=t,null!=(e=this.albedoSampler_0)&&(e.texture=t)}}),Object.defineProperty(vc.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_dcl50b$_0},set:function(t){var e;this.normalMap_dcl50b$_0=t,null!=(e=this.normalSampler_0)&&(e.texture=t)}}),vc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_0,t.blendMode=this.isBlending_0?al():rl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},vc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v=this.model;t:do{var g;for($=Fp.ALL,g=v.stages.values.iterator();g.hasNext();){var b=g.next();if(0!=(b.stage.mask&$.mask)){var x,w,z=b.nodes;e:do{var k;for(k=z.iterator();k.hasNext();){var S=k.next();if(zt(S.name,"uShininess")&&e.isType(S,dp)){w=S;break e}}w=null}while(0);var C=null==(x=w)||e.isType(x,dp)?x:c();if(null!=C){y=C;break t}}}y=null}while(0);this.uShininess_0=y,null!=(o=null!=(r=this.uShininess_0)?r.uniform:null)&&(o.value=this.shininess);var N,E,P=this.model;t:do{var T;for(N=Fp.ALL,T=P.stages.values.iterator();T.hasNext();){var O=T.next();if(0!=(O.stage.mask&N.mask)){var M,j,A=O.nodes;e:do{var R;for(R=A.iterator();R.hasNext();){var I=R.next();if(zt(I.name,"uSpecularIntensity")&&e.isType(I,dp)){j=I;break e}}j=null}while(0);var L=null==(M=j)||e.isType(M,dp)?M:c();if(null!=L){E=L;break t}}}E=null}while(0);this.uSpecularIntensity_0=E,null!=(a=null!=(s=this.uSpecularIntensity_0)?s.uniform:null)&&(a.value=this.specularIntensity);var D,q,B=this.model;t:do{var F;for(D=Fp.ALL,F=B.stages.values.iterator();F.hasNext();){var U=F.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var K=W.next();if(zt(K.name,"uAlbedo")&&e.isType(K,$p)){G=K;break e}}G=null}while(0);var X=null==(V=G)||e.isType(V,$p)?V:c();if(null!=X){q=X;break t}}}q=null}while(0);this.uAlbedo_0=q,null!=(p=null!=(u=null!=(l=this.uAlbedo_0)?l.uniform:null)?u.value:null)&&p.set_czzhhz$(this.albedo);var Y,Z,J=this.model;t:do{var Q;for(Y=Fp.ALL,Q=J.stages.values.iterator();Q.hasNext();){var tt=Q.next();if(0!=(tt.stage.mask&Y.mask)){var et,it,nt=tt.nodes;e:do{var rt;for(rt=nt.iterator();rt.hasNext();){var ot=rt.next();if(zt(ot.name,"tAlbedo")&&e.isType(ot,up)){it=ot;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,up)?et:c();if(null!=st){Z=st;break t}}}Z=null}while(0);this.albedoSampler_0=null!=(h=Z)?h.sampler:null,null!=(d=this.albedoSampler_0)&&(d.texture=this.albedoMap);var at,lt,ut=this.model;t:do{var pt;for(at=Fp.ALL,pt=ut.stages.values.iterator();pt.hasNext();){var ct=pt.next();if(0!=(ct.stage.mask&at.mask)){var ht,dt,ft=ct.nodes;e:do{var _t;for(_t=ft.iterator();_t.hasNext();){var mt=_t.next();if(zt(mt.name,"tNormal")&&e.isType(mt,up)){dt=mt;break e}}dt=null}while(0);var $t=null==(ht=dt)||e.isType(ht,up)?ht:c();if(null!=$t){lt=$t;break t}}}lt=null}while(0);if(this.normalSampler_0=null!=(f=lt)?f.sampler:null,null!=(_=this.normalSampler_0)&&(_.texture=this.normalMap),this.isReceivingShadow_0){m=this.depthSamplers_0;for(var yt=0;yt!==m.length;++yt){var vt,gt,bt,xt=this.model,wt="depthMap_"+yt;t:do{var kt;for(gt=Fp.ALL,kt=xt.stages.values.iterator();kt.hasNext();){var St=kt.next();if(0!=(St.stage.mask&gt.mask)){var Ct,Nt,Et=St.nodes;e:do{var Pt;for(Pt=Et.iterator();Pt.hasNext();){var Tt=Pt.next();if(zt(Tt.name,wt)&&e.isType(Tt,up)){Nt=Tt;break e}}Nt=null}while(0);var Ot=null==(Ct=Nt)||e.isType(Ct,up)?Ct:c();if(null!=Ot){bt=Ot;break t}}}bt=null}while(0);var Mt=null!=(vt=bt)?vt.sampler:null;this.depthSamplers_0[yt]=Mt,this.shadowMaps_0[yt].setupSampler_s70oj3$(Mt)}}sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},gc.prototype.defaultPhongModel_m663ta$=function(t){var i,n,r,o,s,a=new Ru("defaultPhongModel()"),l={v:null},u={v:null},p={v:null},c={v:null},h={v:null},d={v:null},f=M(),_=new Lu(a);if(d.v=_.mvpNode(),t.isInstanced?(o=_.multiplyNode_ze33is$(d.v.outModelMat,_.instanceAttrModelMat().output).output,s=_.multiplyNode_ze33is$(d.v.outMvpMat,_.instanceAttrModelMat().output).output):(o=d.v.outModelMat,s=d.v.outMvpMat),i=t.albedoSource===ec()?_.stageInterfaceNode_iikjwn$("ifColors",_.attrColors().output):null,u.v=i,n=t.requiresTexCoords()?_.stageInterfaceNode_iikjwn$("ifTexCoords",_.attrTexCoords().output):null,p.v=n,t.isNormalMapped){var m=_.attrTangents().output,$=_.vec3TransformNode_vid4wo$(_.splitNode_500t7j$(m,"xyz").output,o,0),y=_.combineXyzWNode_ze33is$($.outVec3,_.splitNode_500t7j$(m,"w").output);r=_.stageInterfaceNode_iikjwn$("ifTangents",y.output)}else r=null;c.v=r;var v=_.vec3TransformNode_vid4wo$(_.attrNormals().output,o,0);l.v=_.stageInterfaceNode_iikjwn$("ifNormals",v.outVec3);var g=_.vec3TransformNode_vid4wo$(_.attrPositions().output,o,1).outVec3;h.v=_.stageInterfaceNode_iikjwn$("ifFragPos",g);var b,w,z=_.vec4TransformNode_9krp9t$(g,d.v.outViewMat).outVec4,k=0;for(b=t.shadowMaps.iterator();b.hasNext();){var S=b.next(),C=J((k=(w=k)+1|0,w));if(e.isType(S,yk)){var N=_.cascadedShadowMapNode_zw58l$(S,"depthMap_"+C,z,g);f.add_11rb$(N)}else if(e.isType(S,mk)){var E=_.simpleShadowMapNode_7yd351$(S,"depthMap_"+C,g);f.add_11rb$(E)}}_.positionOutput=_.vec4TransformNode_9krp9t$(g,s).outVec4;var P,T,O=new Du(a),j=d.v.addToStage_llmhyc$(a.fragmentStageGraph),A=O.multiLightNode_za3lpa$(t.maxLights);for(T=f.iterator();T.hasNext();){var R=T.next();A.inShaodwFacs[R.lightIndex]=R.outShadowFac}switch(t.albedoSource.name){case"VERTEX_ALBEDO":P=x(u.v).output;break;case"STATIC_ALBEDO":P=O.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":P=O.textureSamplerNode_ce41yx$(O.textureNode_61zpoe$("tAlbedo"),x(p.v).output,!1).outColor;break;case"CUBE_MAP_ALBEDO":throw gt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:P=e.noWhenBranchMatched()}var I=P,L=t.isNormalMapped&&null!=c.v?O.normalMapNode_j8913i$(O.textureNode_61zpoe$("tNormal"),x(p.v).output,l.v.output,c.v.output).outNormal:l.v.output,D=O.phongMaterialNode_8rwtp1$(I,L,h.v.output,j.outCamPos,A);D.lightBacksides=t.lightBacksides,D.inShininess=O.pushConstantNode1f_61zpoe$("uShininess").output,D.inSpecularIntensity=O.pushConstantNode1f_61zpoe$("uSpecularIntensity").output;var q=D;return O.colorOutput_a3v4si$(q.outColor),a},gc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bc=null;function xc(){return null===bc&&new gc,bc}function wc(){this.albedoSource=ec(),this.isNormalMapped=!1,this.albedo=V$().GRAY,this.shininess=20,this.specularIntensity=1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.cullMethod=xl(),this.alphaMode=new rc,this.isInstanced=!1,this.albedoMap=null,this.normalMap=null}function zc(t,i){Dc(),void 0===i&&(i=Dc().defaultUnlitModel_ws3dmo$(t)),sc.call(this,i),this.cullMethod_ci460b$_0=t.cullMethod,this.isBlending_6tbhot$_0=e.isType(t.alphaMode,nc),this.uColor_cc6m7u$_0=null,this.color_l79ks7$_0=t.color,this.colorSampler_he8fz1$_0=null,this.colorMap_h0jju9$_0=t.colorMap,this.colorCubeSampler_b56oeg$_0=null,this.colorCubeMap_moycys$_0=t.colorCubeMap}function kc(){Lc=this}wc.prototype.useAlbedoMap_61zpoe$=function(t){this.useAlbedoMap_vv6xll$(uh(t))},wc.prototype.useAlbedoMap_vv6xll$=function(t){this.albedoMap=t,this.albedoSource=tc()},wc.prototype.useNormalMap_61zpoe$=function(t){this.useNormalMap_vv6xll$(uh(t))},wc.prototype.useNormalMap_vv6xll$=function(t){this.normalMap=t,this.isNormalMapped=!0},wc.prototype.requiresTexCoords=function(){return this.albedoSource===tc()||this.isNormalMapped},wc.$metadata$={kind:$,simpleName:"PhongConfig",interfaces:[]},vc.$metadata$={kind:$,simpleName:"PhongShader",interfaces:[sc]},Object.defineProperty(zc.prototype,"color",{configurable:!0,get:function(){return this.color_l79ks7$_0},set:function(t){var e,i,n;this.color_l79ks7$_0=t,null!=(n=null!=(i=null!=(e=this.uColor_cc6m7u$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(zc.prototype,"colorMap",{configurable:!0,get:function(){return this.colorMap_h0jju9$_0},set:function(t){var e;this.colorMap_h0jju9$_0=t,null!=(e=this.colorSampler_he8fz1$_0)&&(e.texture=t)}}),Object.defineProperty(zc.prototype,"colorCubeMap",{configurable:!0,get:function(){return this.colorCubeMap_moycys$_0},set:function(t){var e;this.colorCubeMap_moycys$_0=t,null!=(e=this.colorCubeSampler_b56oeg$_0)&&(e.texture=t)}}),zc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_ci460b$_0,t.blendMode=this.isBlending_6tbhot$_0?al():rl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},zc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h=this.model;t:do{var d;for(u=Fp.ALL,d=h.stages.values.iterator();d.hasNext();){var f=d.next();if(0!=(f.stage.mask&u.mask)){var _,m,$=f.nodes;e:do{var y;for(y=$.iterator();y.hasNext();){var v=y.next();if(zt(v.name,"uColor")&&e.isType(v,$p)){m=v;break e}}m=null}while(0);var g=null==(_=m)||e.isType(_,$p)?_:c();if(null!=g){p=g;break t}}}p=null}while(0);this.uColor_cc6m7u$_0=p,null!=(s=null!=(o=null!=(r=this.uColor_cc6m7u$_0)?r.uniform:null)?o.value:null)&&s.set_czzhhz$(this.color);var b,x,w=this.model;t:do{var z;for(b=Fp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&b.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var P=E.next();if(zt(P.name,"tColor")&&e.isType(P,up)){C=P;break e}}C=null}while(0);var T=null==(S=C)||e.isType(S,up)?S:c();if(null!=T){x=T;break t}}}x=null}while(0);this.colorSampler_he8fz1$_0=null!=(a=x)?a.sampler:null,null!=(l=this.colorSampler_he8fz1$_0)&&(l.texture=this.colorMap),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},kc.prototype.defaultUnlitModel_ws3dmo$=function(t){var i,n,r,o,s,a=new Ru("defaultPbrModel()"),l={v:null},p={v:null},c={v:null},h=new Lu(a),d=h.mvpNode();if(t.isInstanced?(o=h.multiplyNode_ze33is$(d.outModelMat,h.instanceAttrModelMat().output).output,s=h.multiplyNode_ze33is$(d.outMvpMat,h.instanceAttrModelMat().output).output):(o=d.outModelMat,s=d.outMvpMat),t.isSkinned){var f=h.skinTransformNode_78eraa$(h.attrJoints().output,h.attrWeights().output,t.maxJoints);o=h.multiplyNode_ze33is$(o,f.outJointMat).output,s=h.multiplyNode_ze33is$(s,f.outJointMat).output}i=t.requiresTexCoords()?h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output):null,p.v=i,n=t.colorSource===ec()?h.stageInterfaceNode_iikjwn$("ifColors",h.attrColors().output):null,l.v=n;var _,m,$=t.morphAttributes.isEmpty()?null:h.morphWeightsNode_za3lpa$(t.morphAttributes.size),y={v:h.attrPositions().output},v=t.morphAttributes,g=M();for(_=v.iterator();_.hasNext();){var b=_.next();u(b.name,ds().POSITIONS.name)&&g.add_11rb$(b)}for(m=g.iterator();m.hasNext();){var w=m.next(),z=h.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(w),x($)),k=h.multiplyNode_ze33is$(h.attributeNode_nm2vx5$(w).output,z.outWeight);y.v=h.addNode_ze33is$(y.v,k.output).output}if(t.colorSource===Jp()){var S=h.vec3TransformNode_vid4wo$(y.v,o,1).outVec3;r=h.stageInterfaceNode_iikjwn$("ifFragPos",S)}else r=null;c.v=r,h.positionOutput=h.vec4TransformNode_9krp9t$(y.v,s).outVec4;var C,N,E,P=new Du(a);switch(t.colorSource.name){case"VERTEX_ALBEDO":C=x(l.v).output;break;case"STATIC_ALBEDO":C=P.pushConstantNodeColor_61zpoe$("uColor").output;break;case"TEXTURE_ALBEDO":var T=P.textureSamplerNode_ce41yx$(P.textureNode_61zpoe$("tColor"),x(p.v).output);if(t.isMultiplyColorMap){var O=P.pushConstantNodeColor_61zpoe$("uColor").output;C=P.multiplyNode_ze33is$(T.outColor,O).output}else C=T.outColor;break;case"CUBE_MAP_ALBEDO":var j=P.cubeMapSamplerNode_2z3a2t$(P.cubeMapNode_61zpoe$("tCubeColor"),x(c.v).output);if(t.isMultiplyColorMap){var A=P.pushConstantNodeColor_61zpoe$("uColor").output;C=P.multiplyNode_ze33is$(j.outColor,A).output}else C=j.outColor;break;default:C=e.noWhenBranchMatched()}var R={v:C};return null!=(E=e.isType(N=t.alphaMode,oc)?N:null)&&P.discardAlpha_ze33is$(P.splitNode_500t7j$(R.v,"a").output,P.constFloat_mx4ult$(E.cutOff)),e.isType(t.alphaMode,nc)||(R.v=P.combineXyzWNode_ze33is$(R.v,P.constFloat_mx4ult$(1)).output),P.colorOutput_a3v4si$(P.unlitMaterialNode_r20yfm$(R.v).outColor),a},kc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Sc,Cc,Nc,Ec,Pc,Tc,Oc,Mc,jc,Ac,Rc,Ic,Lc=null;function Dc(){return null===Lc&&new kc,Lc}function qc(){this.colorSource=ec(),this.isMultiplyColorMap=!1,this.isInstanced=!1,this.isSkinned=!1,this.maxJoints=64,this.morphAttributes=M(),this.cullMethod=xl(),this.alphaMode=new rc,this.color=V$().GRAY,this.colorMap=null,this.colorCubeMap=null}function Bc(t){var e;this.elements_0=M(),this.size=0;var i=0;for(e=t.iterator();e.hasNext();){var n=e.next(),r=new Fc(n,i);this.elements_0.add_11rb$(r),i=i+(n.size+r.padding)|0}this.size=i}function Fc(t,i){var n;switch(this.uniform=t,this.offset=0,this.padding=0,this.uniform.typeSize){case 4:n=4;break;case 8:n=8;break;default:n=16}var r=n;this.offset=e.imul((i+r-1|0)/r|0,r),this.padding=this.offset-i|0}function Uc(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Vc(){Vc=function(){},Sc=new Uc("R",0),Cc=new Uc("RG",1),Nc=new Uc("RGB",2),Ec=new Uc("RGBA",3),Pc=new Uc("R_F16",4),Tc=new Uc("RG_F16",5),Oc=new Uc("RGB_F16",6),Mc=new Uc("RGBA_F16",7)}function Gc(){return Vc(),Sc}function Hc(){return Vc(),Cc}function Wc(){return Vc(),Nc}function Kc(){return Vc(),Ec}function Xc(){return Vc(),Pc}function Yc(){return Vc(),Tc}function Zc(){return Vc(),Oc}function Jc(){return Vc(),Mc}function Qc(t,e,i){lh(),void 0===t&&(t=null),void 0===e&&(e=new xh),void 0===i&&(i=null),this.name=t,this.props=e,this.loader=i,this.loadedTexture=null,this.loadingState=ih()}function th(t,e){P.call(this),this.name$=t,this.ordinal$=e}function eh(){eh=function(){},jc=new th("NOT_LOADED",0),Ac=new th("LOADING",1),Rc=new th("LOADED",2),Ic=new th("LOADING_FAILED",3)}function ih(){return eh(),jc}function nh(){return eh(),Ac}function rh(){return eh(),Rc}function oh(){return eh(),Ic}function sh(){ah=this}zc.$metadata$={kind:$,simpleName:"UnlitShader",interfaces:[sc]},qc.prototype.useStaticColor_d7aj7k$=function(t){this.colorSource=Qp(),this.color=t},qc.prototype.useColorMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useColorMap_daqygw$(uh(t),e)},qc.prototype.useColorMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.colorMap=t,this.isMultiplyColorMap=e,this.colorSource=tc()},qc.prototype.useColorCubeMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useColorMap_daqygw$(new bh(t),e)},qc.prototype.useColorCubeMap_a54iyn$=function(t,e){void 0===e&&(e=!1),this.colorCubeMap=t,this.isMultiplyColorMap=e,this.colorSource=Jp()},qc.prototype.requiresTexCoords=function(){return this.colorSource===tc()},qc.$metadata$={kind:$,simpleName:"UnlitMaterialConfig",interfaces:[]},Bc.prototype.putTo_l6oshk$=function(t){var e;e=this.elements_0;for(var i=0;i!==e.size;++i)this.elements_0.get_za3lpa$(i).putTo_l6oshk$(t)},Fc.prototype.putTo_l6oshk$=function(t){var e;e=this.padding;for(var i=0;i<e;i++)t.putUint8_s8j3t7$(0);this.uniform.putTo_l6oshk$(t)},Fc.$metadata$={kind:$,simpleName:"Element",interfaces:[]},Bc.$metadata$={kind:$,simpleName:"Std140Layout",interfaces:[]},Uc.$metadata$={kind:$,simpleName:"TexFormat",interfaces:[P]},Uc.values=function(){return[Gc(),Hc(),Wc(),Kc(),Xc(),Yc(),Zc(),Jc()]},Uc.valueOf_61zpoe$=function(t){switch(t){case"R":return Gc();case"RG":return Hc();case"RGB":return Wc();case"RGBA":return Kc();case"R_F16":return Xc();case"RG_F16":return Yc();case"RGB_F16":return Zc();case"RGBA_F16":return Jc();default:T("No enum constant de.fabmax.kool.pipeline.TexFormat."+t)}},Qc.prototype.dispose=function(){var t;null!=(t=this.loadedTexture)&&t.dispose(),this.loadedTexture=null,this.loadingState=ih()},Qc.prototype.toString=function(){return"Texture(name: "+Ct(this.name)+")"},th.$metadata$={kind:$,simpleName:"LoadingState",interfaces:[P]},th.values=function(){return[ih(),nh(),rh(),oh()]},th.valueOf_61zpoe$=function(t){switch(t){case"NOT_LOADED":return ih();case"LOADING":return nh();case"LOADED":return rh();case"LOADING_FAILED":return oh();default:T("No enum constant de.fabmax.kool.pipeline.Texture.LoadingState."+t)}},sh.prototype.estimatedTexSize_4qozqa$=function(t,i,n,r,o){for(var s=1,a=.25,l=2;l<=o;l++)s+=a,a*=.25;return Lt(e.imul(e.imul(e.imul(t,i),r),n)*s)},sh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ah=null;function lh(){return null===ah&&new sh,ah}function uh(t,e,i,n){var r;return void 0===e&&(e=null),void 0===i&&(i=new xh),n=n||Object.create(Qc.prototype),Qc.call(n,e,i,(r=t,function(t,e,i,n){var o=new ph(r,t,e,this,i);return n?o:o.doResume(null)})),n}function ph(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetPath=t,this.local$it=i}function ch(t){var e;vh(),Qc.call(this,t.toString(),new xh(void 0,void 0,void 0,void 0,kh(),kh(),!1,1),(e=t,function(t,i,n,r){var o=new gh(e,t,i,this,n);return r?o:o.doResume(null)}))}function hh(){yh=this,this.colorData_0=z()}Qc.$metadata$={kind:$,simpleName:"Texture",interfaces:[]},ph.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ph.prototype=Object.create(l.prototype),ph.prototype.constructor=ph,ph.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$closure$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},hh.prototype.getColorTextureData_0=function(t){var e,i=this.colorData_0,n=i.get_11rb$(t);if(null==n){var r=Bh().singleColor_d7aj7k$(t);i.put_xwzc9p$(t,r),e=r}else e=n;return e},hh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var dh,fh,_h,mh,$h,yh=null;function vh(){return null===yh&&new hh,yh}function gh(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$color=t}function bh(t,e,i){void 0===t&&(t=null),void 0===e&&(e=new xh),void 0===i&&(i=null),Qc.call(this,t,e,i)}function xh(t,e,i,n,r,o,s,a){void 0===t&&(t=Kc()),void 0===e&&(e=Th()),void 0===i&&(i=Th()),void 0===n&&(n=Th()),void 0===r&&(r=Sh()),void 0===o&&(o=Sh()),void 0===s&&(s=!0),void 0===a&&(a=4),this.format=t,this.addressModeU=e,this.addressModeV=i,this.addressModeW=n,this.minFilter=r,this.magFilter=o,this.mipMapping=s,this.maxAnisotropy=a}function wh(t,e){P.call(this),this.name$=t,this.ordinal$=e}function zh(){zh=function(){},dh=new wh("NEAREST",0),fh=new wh("LINEAR",1)}function kh(){return zh(),dh}function Sh(){return zh(),fh}function Ch(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Nh(){Nh=function(){},_h=new Ch("CLAMP_TO_EDGE",0),mh=new Ch("MIRRORED_REPEAT",1),$h=new Ch("REPEAT",2)}function Eh(){return Nh(),_h}function Ph(){return Nh(),mh}function Th(){return Nh(),$h}function Oh(){this.width_g2mups$_0=0,this.height_9y5xsp$_0=0,this.format_yfgg89$_0=Kc()}function Mh(t,e,i,n){Bh(),Oh.call(this),this.width=e,this.height=i,this.format=n,this.data_glz8b$_0=t}function jh(){qh=this}gh.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},gh.prototype=Object.create(l.prototype),gh.prototype.constructor=gh,gh.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return vh().getColorTextureData_0(this.local$closure$color);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ch.$metadata$={kind:$,simpleName:"SingleColorTexture",interfaces:[Qc]},bh.$metadata$={kind:$,simpleName:"CubeMapTexture",interfaces:[Qc]},xh.$metadata$={kind:$,simpleName:"TextureProps",interfaces:[]},xh.prototype.component1=function(){return this.format},xh.prototype.component2=function(){return this.addressModeU},xh.prototype.component3=function(){return this.addressModeV},xh.prototype.component4=function(){return this.addressModeW},xh.prototype.component5=function(){return this.minFilter},xh.prototype.component6=function(){return this.magFilter},xh.prototype.component7=function(){return this.mipMapping},xh.prototype.component8=function(){return this.maxAnisotropy},xh.prototype.copy_1w7iuy$=function(t,e,i,n,r,o,s,a){return new xh(void 0===t?this.format:t,void 0===e?this.addressModeU:e,void 0===i?this.addressModeV:i,void 0===n?this.addressModeW:n,void 0===r?this.minFilter:r,void 0===o?this.magFilter:o,void 0===s?this.mipMapping:s,void 0===a?this.maxAnisotropy:a)},xh.prototype.toString=function(){return"TextureProps(format="+e.toString(this.format)+", addressModeU="+e.toString(this.addressModeU)+", addressModeV="+e.toString(this.addressModeV)+", addressModeW="+e.toString(this.addressModeW)+", minFilter="+e.toString(this.minFilter)+", magFilter="+e.toString(this.magFilter)+", mipMapping="+e.toString(this.mipMapping)+", maxAnisotropy="+e.toString(this.maxAnisotropy)+")"},xh.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.format)|0)+e.hashCode(this.addressModeU)|0)+e.hashCode(this.addressModeV)|0)+e.hashCode(this.addressModeW)|0)+e.hashCode(this.minFilter)|0)+e.hashCode(this.magFilter)|0)+e.hashCode(this.mipMapping)|0)+e.hashCode(this.maxAnisotropy)|0},xh.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.format,t.format)&&e.equals(this.addressModeU,t.addressModeU)&&e.equals(this.addressModeV,t.addressModeV)&&e.equals(this.addressModeW,t.addressModeW)&&e.equals(this.minFilter,t.minFilter)&&e.equals(this.magFilter,t.magFilter)&&e.equals(this.mipMapping,t.mipMapping)&&e.equals(this.maxAnisotropy,t.maxAnisotropy)},wh.$metadata$={kind:$,simpleName:"FilterMethod",interfaces:[P]},wh.values=function(){return[kh(),Sh()]},wh.valueOf_61zpoe$=function(t){switch(t){case"NEAREST":return kh();case"LINEAR":return Sh();default:T("No enum constant de.fabmax.kool.pipeline.FilterMethod."+t)}},Ch.$metadata$={kind:$,simpleName:"AddressMode",interfaces:[P]},Ch.values=function(){return[Eh(),Ph(),Th()]},Ch.valueOf_61zpoe$=function(t){switch(t){case"CLAMP_TO_EDGE":return Eh();case"MIRRORED_REPEAT":return Ph();case"REPEAT":return Th();default:T("No enum constant de.fabmax.kool.pipeline.AddressMode."+t)}},Object.defineProperty(Oh.prototype,"width",{configurable:!0,get:function(){return this.width_g2mups$_0},set:function(t){this.width_g2mups$_0=t}}),Object.defineProperty(Oh.prototype,"height",{configurable:!0,get:function(){return this.height_9y5xsp$_0},set:function(t){this.height_9y5xsp$_0=t}}),Object.defineProperty(Oh.prototype,"format",{configurable:!0,get:function(){return this.format_yfgg89$_0},set:function(t){this.format_yfgg89$_0=t}}),Oh.$metadata$={kind:$,simpleName:"TextureData",interfaces:[]},Object.defineProperty(Mh.prototype,"data",{configurable:!0,get:function(){return this.data_glz8b$_0}}),jh.prototype.singleColor_d7aj7k$=function(t){var e=wN(4);return e.set_6t1wet$(0,Dt(Lt(255*t.r))),e.set_6t1wet$(1,Dt(Lt(255*t.g))),e.set_6t1wet$(2,Dt(Lt(255*t.b))),e.set_6t1wet$(3,Dt(Lt(255*t.a))),new Mh(e,1,1,Kc())},jh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ah,Rh,Ih,Lh,Dh,qh=null;function Bh(){return null===qh&&new jh,qh}function Fh(t,e,i,n,r,o){Oh.call(this),this.front=t,this.back=e,this.left=i,this.right=n,this.up=r,this.down=o,this.width=this.front.width,this.height=this.front.height,this.format=this.front.format}function Uh(t,e){this.value=t,this.name=e,this.length_pgm1d5$_0=1}function Vh(t){Uh.call(this,0,t),this.size_i0aw35$_0=4}function Gh(t,e,i){return i=i||Object.create(Vh.prototype),Vh.call(i,e),i.value=t,i}function Hh(t){Uh.call(this,pr(),t),this.size_o76ots$_0=8}function Wh(t){Uh.call(this,Mr(),t),this.size_4mfs8f$_0=16}function Kh(t){Uh.call(this,no(),t),this.size_xg29am$_0=16}function Xh(t){Uh.call(this,H$(),t),this.size_tg5r8j$_0=16}function Yh(t,e){Uh.call(this,new Float32Array(e),t),this.length_4yln86$_0=e,this.size_jukhwb$_0=16*this.length|0,this.typeSize_inwio1$_0=4}function Zh(t,e){var i,n=R(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=pr();Uh.call(this,n,t),this.length_or99bd$_0=e,this.size_a1jiw4$_0=16*this.length|0}function Jh(t,e){var i,n=R(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=Mr();Uh.call(this,n,t),this.length_gjzw48$_0=e,this.size_v3gial$_0=16*this.length|0}function Qh(t,e){var i,n=R(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=no();Uh.call(this,n,t),this.length_d5v0fb$_0=e,this.size_17chi6$_0=16*this.length|0}function td(t){Uh.call(this,new $n,t),this.size_aq1f2r$_0=36}function ed(t){Uh.call(this,new En,t),this.size_i3l1zg$_0=64}function id(t,e){var i,n=R(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new En;Uh.call(this,n,t),this.length_m05swr$_0=e,this.size_mobkps$_0=64*this.length|0}function nd(t){Uh.call(this,0,t),this.size_8zmb7w$_0=4}function rd(t,e,i){return i=i||Object.create(nd.prototype),nd.call(i,e),i.value=t,i}function od(t){Uh.call(this,kr(),t),this.size_ju05ub$_0=8}function sd(t){Uh.call(this,Xr(),t),this.size_mdhf2m$_0=12}function ad(t){Uh.call(this,Eo(),t),this.size_6g51zl$_0=16}function ld(t,i){this.bindings=t,this.primitiveType=i,this.longHash=null;var n,r=this.primitiveType.hashCode();n=new kt(e.Long.fromInt(r));var o,s={v:new kt(new kt(e.Long.fromInt(71023)).data.multiply(n.data))};for(o=this.bindings.iterator();o.hasNext();){var a=o.next(),l=s.v,u=new kt(e.Long.fromInt(71023)),p=new kt(l.data.multiply(u.data)),c=a.longHash;s.v=new kt(p.data.add(c.data))}this.longHash=s.v}function ud(t,i,n,r){if(void 0===r){var o,s=0;for(o=n.iterator();o.hasNext();)s=s+o.next().attribute.type.byteSize|0;r=s}this.binding=t,this.inputRate=i,this.vertexAttributes=n,this.strideBytes=r,this.longHash=null;var a=this.binding,l={v:new kt(e.Long.fromInt(a))},u=l.v,p=new kt(e.Long.fromInt(71023)),c=new kt(u.data.multiply(p.data)),h=this.inputRate.hashCode(),d=new kt(e.Long.fromInt(h));l.v=new kt(c.data.add(d.data));var f,_=l.v,m=new kt(e.Long.fromInt(71023)),$=new kt(_.data.multiply(m.data)),y=this.strideBytes,v=new kt(e.Long.fromInt(y));for(l.v=new kt($.data.add(v.data)),f=this.vertexAttributes.iterator();f.hasNext();){var g=f.next(),b=l.v,x=new kt(e.Long.fromInt(71023)),w=new kt(b.data.multiply(x.data)),z=g.hashCode(),k=new kt(e.Long.fromInt(z));l.v=new kt(w.data.add(k.data))}this.longHash=l.v}function pd(t,e,i){this.location=t,this.offset=e,this.attribute=i}function cd(){this.primitiveType=ez(),this.bindings=M()}function hd(t,e){P.call(this),this.name$=t,this.ordinal$=e}function dd(){dd=function(){},Ah=new hd("VERTEX",0),Rh=new hd("INSTANCE",1)}function fd(){return dd(),Ah}function _d(){return dd(),Rh}function md(t,e){return MS(t,e)}function $d(t){var e;void 0===t&&(t="camera"),ef.call(this,t),this.position=new Or(0,0,1),this.lookAt=Ar(Er().ZERO),this.up=Ar(Er().Y_AXIS),this.aspectRatio=1,this.useViewportAspectRatio=!0,this.globalRange_4hi0xu$_0=0,this.globalPosMut=Mr(),this.globalLookAtMut=Mr(),this.globalUpMut=Mr(),this.globalRightMut=Mr(),this.globalLookDirMut=Mr(),this.proj=new bn,this.view=new bn,this.lazyInvProj_tohv7i$_0=new yd((e=this,function(t){return e.proj.invert_23yxad$(t),s})),this.lazyInvView_trmos6$_0=new yd(function(t){return function(e){return t.view.invert_23yxad$(e),s}}(this)),this.lazyViewProj_dqyl7q$_0=new yd(function(t){return function(e){return t.proj.mul_u47j3u$(t.view,e),s}}(this)),this.lazyInvViewProj_vy3fmv$_0=new yd(function(t){return function(e){return t.viewProj.invert_23yxad$(e),s}}(this)),this.projCorrectionMode=xd(),this.projCorrected_2lfajw$_0=new bn,this.tmpVec3_txabpe$_0=Mr(),this.tmpVec4_txabq9$_0=no()}function yd(t){this.update=t,this.isDirty=!0,this.mat_0=new bn}function vd(t,e){P.call(this),this.name$=t,this.ordinal$=e}function gd(){gd=function(){},Ih=new vd("NONE",0),Lh=new vd("ONSCREEN",1),Dh=new vd("OFFSCREEN",2)}function bd(){return gd(),Ih}function xd(){return gd(),Lh}function wd(){return gd(),Dh}function zd(t){void 0===t&&(t="orthographicCam"),$d.call(this,t),this.left=-10,this.right=10,this.bottom=-10,this.top=10,this.near=-10,this.far=10,this.isClipToViewport=!1,this.isKeepAspectRatio=!0,this.tmpNodeCenter_dwzowq$_0=Mr()}function kd(t){void 0===t&&(t="perspectiveCam"),$d.call(this,t),this.clipNear=.1,this.clipFar=100,this.fovY=60,this.fovX_7k9npl$_0=0,this.sphereFacX_87yued$_0=1,this.sphereFacY_87yuf8$_0=1,this.tangX_ey6fwg$_0=1,this.tangY_ey6fvl$_0=1,this.tmpNodeCenter_hw7d0$_0=Mr()}function Sd(t){kd.call(this),this.master=t,this.useViewportAspectRatio=!1,this.projCorrectionMode=wd()}function Cd(){this.upperLeft=Mr(),this.upperRight=Mr(),this.lowerLeft=Mr(),this.lowerRight=Mr()}Mh.$metadata$={kind:$,simpleName:"BufferedTextureData",interfaces:[Oh]},Object.defineProperty(Fh.prototype,"data",{configurable:!0,get:function(){return this.front.data}}),Fh.$metadata$={kind:$,simpleName:"CubeMapTextureData",interfaces:[Oh]},Object.defineProperty(Uh.prototype,"typeSize",{configurable:!0,get:function(){return this.size}}),Object.defineProperty(Uh.prototype,"length",{configurable:!0,get:function(){return this.length_pgm1d5$_0}}),Uh.prototype.toString=function(){return this.name},Uh.$metadata$={kind:$,simpleName:"Uniform",interfaces:[]},Object.defineProperty(Vh.prototype,"size",{configurable:!0,get:function(){return this.size_i0aw35$_0}}),Vh.prototype.putTo_l6oshk$=function(t){t.putFloat32_mx4ult$(this.value)},Vh.$metadata$={kind:$,simpleName:"Uniform1f",interfaces:[Uh]},Object.defineProperty(Hh.prototype,"size",{configurable:!0,get:function(){return this.size_o76ots$_0}}),Hh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},Hh.$metadata$={kind:$,simpleName:"Uniform2f",interfaces:[Uh]},Object.defineProperty(Wh.prototype,"size",{configurable:!0,get:function(){return this.size_4mfs8f$_0}}),Wh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array),t.putUint32_za3lpa$(0)},Wh.$metadata$={kind:$,simpleName:"Uniform3f",interfaces:[Uh]},Object.defineProperty(Kh.prototype,"size",{configurable:!0,get:function(){return this.size_xg29am$_0}}),Kh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},Kh.$metadata$={kind:$,simpleName:"Uniform4f",interfaces:[Uh]},Object.defineProperty(Xh.prototype,"size",{configurable:!0,get:function(){return this.size_tg5r8j$_0}}),Xh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},Xh.$metadata$={kind:$,simpleName:"UniformColor",interfaces:[Uh]},Object.defineProperty(Yh.prototype,"length",{get:function(){return this.length_4yln86$_0}}),Object.defineProperty(Yh.prototype,"size",{configurable:!0,get:function(){return this.size_jukhwb$_0}}),Object.defineProperty(Yh.prototype,"typeSize",{configurable:!0,get:function(){return this.typeSize_inwio1$_0}}),Yh.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_mx4ult$(this.value[i]),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0)},Yh.$metadata$={kind:$,simpleName:"Uniform1fv",interfaces:[Uh]},Object.defineProperty(Zh.prototype,"length",{get:function(){return this.length_or99bd$_0}}),Object.defineProperty(Zh.prototype,"size",{configurable:!0,get:function(){return this.size_a1jiw4$_0}}),Zh.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0)},Zh.$metadata$={kind:$,simpleName:"Uniform2fv",interfaces:[Uh]},Object.defineProperty(Jh.prototype,"length",{get:function(){return this.length_gjzw48$_0}}),Object.defineProperty(Jh.prototype,"size",{configurable:!0,get:function(){return this.size_v3gial$_0}}),Jh.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array),t.putUint32_za3lpa$(0)},Jh.$metadata$={kind:$,simpleName:"Uniform3fv",interfaces:[Uh]},Object.defineProperty(Qh.prototype,"length",{get:function(){return this.length_d5v0fb$_0}}),Object.defineProperty(Qh.prototype,"size",{configurable:!0,get:function(){return this.size_17chi6$_0}}),Qh.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array)},Qh.$metadata$={kind:$,simpleName:"Uniform4fv",interfaces:[Uh]},Object.defineProperty(td.prototype,"size",{configurable:!0,get:function(){return this.size_aq1f2r$_0}}),td.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.matrix)},td.$metadata$={kind:$,simpleName:"UniformMat3f",interfaces:[Uh]},Object.defineProperty(ed.prototype,"size",{configurable:!0,get:function(){return this.size_i3l1zg$_0}}),ed.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.matrix)},ed.$metadata$={kind:$,simpleName:"UniformMat4f",interfaces:[Uh]},Object.defineProperty(id.prototype,"length",{get:function(){return this.length_m05swr$_0}}),Object.defineProperty(id.prototype,"size",{configurable:!0,get:function(){return this.size_mobkps$_0}}),id.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].matrix)},id.$metadata$={kind:$,simpleName:"UniformMat4fv",interfaces:[Uh]},Object.defineProperty(nd.prototype,"size",{configurable:!0,get:function(){return this.size_8zmb7w$_0}}),nd.prototype.putTo_l6oshk$=function(t){t.putInt32_za3lpa$(this.value)},nd.$metadata$={kind:$,simpleName:"Uniform1i",interfaces:[Uh]},Object.defineProperty(od.prototype,"size",{configurable:!0,get:function(){return this.size_ju05ub$_0}}),od.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},od.$metadata$={kind:$,simpleName:"Uniform2i",interfaces:[Uh]},Object.defineProperty(sd.prototype,"size",{configurable:!0,get:function(){return this.size_mdhf2m$_0}}),sd.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},sd.$metadata$={kind:$,simpleName:"Uniform3i",interfaces:[Uh]},Object.defineProperty(ad.prototype,"size",{configurable:!0,get:function(){return this.size_6g51zl$_0}}),ad.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},ad.$metadata$={kind:$,simpleName:"Uniform4i",interfaces:[Uh]},ud.$metadata$={kind:$,simpleName:"Binding",interfaces:[]},ud.prototype.component1=function(){return this.binding},ud.prototype.component2=function(){return this.inputRate},ud.prototype.component3=function(){return this.vertexAttributes},ud.prototype.component4=function(){return this.strideBytes},ud.prototype.copy_beujkh$=function(t,e,i,n){return new ud(void 0===t?this.binding:t,void 0===e?this.inputRate:e,void 0===i?this.vertexAttributes:i,void 0===n?this.strideBytes:n)},ud.prototype.toString=function(){return"Binding(binding="+e.toString(this.binding)+", inputRate="+e.toString(this.inputRate)+", vertexAttributes="+e.toString(this.vertexAttributes)+", strideBytes="+e.toString(this.strideBytes)+")"},ud.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.binding)|0)+e.hashCode(this.inputRate)|0)+e.hashCode(this.vertexAttributes)|0)+e.hashCode(this.strideBytes)|0},ud.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.binding,t.binding)&&e.equals(this.inputRate,t.inputRate)&&e.equals(this.vertexAttributes,t.vertexAttributes)&&e.equals(this.strideBytes,t.strideBytes)},Object.defineProperty(pd.prototype,"name",{configurable:!0,get:function(){return this.attribute.name}}),Object.defineProperty(pd.prototype,"type",{configurable:!0,get:function(){return this.attribute.type}}),pd.$metadata$={kind:$,simpleName:"VertexAttribute",interfaces:[]},pd.prototype.component1=function(){return this.location},pd.prototype.component2=function(){return this.offset},pd.prototype.component3=function(){return this.attribute},pd.prototype.copy_767q6x$=function(t,e,i){return new pd(void 0===t?this.location:t,void 0===e?this.offset:e,void 0===i?this.attribute:i)},pd.prototype.toString=function(){return"VertexAttribute(location="+e.toString(this.location)+", offset="+e.toString(this.offset)+", attribute="+e.toString(this.attribute)+")"},pd.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.location)|0)+e.hashCode(this.offset)|0)+e.hashCode(this.attribute)|0},pd.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.location,t.location)&&e.equals(this.offset,t.offset)&&e.equals(this.attribute,t.attribute)},cd.prototype.create=function(){return new ld(D$(this.bindings),this.primitiveType)},cd.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},ld.$metadata$={kind:$,simpleName:"VertexLayout",interfaces:[]},hd.$metadata$={kind:$,simpleName:"InputRate",interfaces:[P]},hd.values=function(){return[fd(),_d()]},hd.valueOf_61zpoe$=function(t){switch(t){case"VERTEX":return fd();case"INSTANCE":return _d();default:T("No enum constant de.fabmax.kool.pipeline.InputRate."+t)}},Object.defineProperty($d.prototype,"globalPos",{configurable:!0,get:function(){return this.globalPosMut}}),Object.defineProperty($d.prototype,"globalLookAt",{configurable:!0,get:function(){return this.globalLookAtMut}}),Object.defineProperty($d.prototype,"globalUp",{configurable:!0,get:function(){return this.globalUpMut}}),Object.defineProperty($d.prototype,"globalRight",{configurable:!0,get:function(){return this.globalRightMut}}),Object.defineProperty($d.prototype,"globalLookDir",{configurable:!0,get:function(){return this.globalLookDirMut}}),Object.defineProperty($d.prototype,"globalRange",{configurable:!0,get:function(){return this.globalRange_4hi0xu$_0},set:function(t){this.globalRange_4hi0xu$_0=t}}),Object.defineProperty($d.prototype,"invProj",{configurable:!0,get:function(){return this.lazyInvProj_tohv7i$_0.get()}}),Object.defineProperty($d.prototype,"invView",{configurable:!0,get:function(){return this.lazyInvView_trmos6$_0.get()}}),Object.defineProperty($d.prototype,"viewProj",{configurable:!0,get:function(){return this.lazyViewProj_dqyl7q$_0.get()}}),Object.defineProperty($d.prototype,"invViewProj",{configurable:!0,get:function(){return this.lazyInvViewProj_vy3fmv$_0.get()}}),$d.prototype.updateCamera_fd1mc0$=function(t,e){this.useViewportAspectRatio&&(this.aspectRatio=e.aspectRatio),this.updateViewMatrix(),this.updateProjectionMatrix(),this.projCorrectionMode===xd()?(t.projCorrectionMatrixScreen.mul_u47j3u$(this.proj,this.projCorrected_2lfajw$_0),this.proj.set_d4zu6l$(this.projCorrected_2lfajw$_0)):this.projCorrectionMode===wd()&&(t.projCorrectionMatrixOffscreen.mul_u47j3u$(this.proj,this.projCorrected_2lfajw$_0),this.proj.set_d4zu6l$(this.projCorrected_2lfajw$_0)),this.lazyInvProj_tohv7i$_0.isDirty=!0,this.lazyViewProj_dqyl7q$_0.isDirty=!0,this.lazyInvViewProj_vy3fmv$_0.isDirty=!0},$d.prototype.updateViewMatrix=function(){this.toGlobalCoords_w1lst9$(this.globalPosMut.set_czzhiu$(this.position)),this.toGlobalCoords_w1lst9$(this.globalLookAtMut.set_czzhiu$(this.lookAt)),this.toGlobalCoords_w1lst9$(this.globalUpMut.set_czzhiu$(this.up),0).norm(),this.globalLookDirMut.set_czzhiu$(this.globalLookAtMut).subtract_czzhiu$(this.globalPosMut),this.globalRange=this.globalLookDirMut.length(),this.globalLookDirMut.scale_mx4ult$(1/this.globalRange),this.globalLookDirMut.cross_2gj7b4$(this.globalUpMut,this.globalRightMut).norm(),this.globalRightMut.cross_2gj7b4$(this.globalLookDirMut,this.globalUpMut).norm(),this.view.setLookAt_n440fu$(this.globalPosMut,this.globalLookAtMut,this.globalUpMut),this.lazyInvView_trmos6$_0.isDirty=!0},$d.prototype.computePickRay_2cu1go$=function(t,e,i,n){return e.isValid&&this.computePickRay_k7d561$(t,e.x,e.y,i,n)},$d.prototype.computePickRay_k7d561$=function(t,e,i,n,r){var o=this.unProjectScreen_c0y950$(this.tmpVec3_txabpe$_0.set_y2kzbl$(e,i,0),n,r,t.origin);return(o=o&&this.unProjectScreen_c0y950$(this.tmpVec3_txabpe$_0.set_y2kzbl$(e,i,1),n,r,t.direction))&&(t.direction.subtract_czzhiu$(t.origin),t.direction.norm()),o},$d.prototype.initRayTes_clwnka$=function(t,e,i,n){return e.isValid&&this.initRayTes_r53qw5$(t,e.x,e.y,i,n)},$d.prototype.initRayTes_r53qw5$=function(t,e,i,n,r){return t.clear(),this.computePickRay_k7d561$(t.ray,e,i,n,r)},$d.prototype.isInFrustum_f1kmr1$=function(t){return this.isInFrustum_2qa7tb$(t.globalCenter,t.globalRadius)},$d.prototype.project_2gj7b4$=function(t,e){this.tmpVec4_txabq9$_0.set_7b5o5w$(t.x,t.y,t.z,1),this.viewProj.transform_5s4mpv$(this.tmpVec4_txabq9$_0);var i,n=this.tmpVec4_txabq9$_0.w;return i=PN.FUZZY_EQ_F,!(A.abs(n)<=i||(e.set_y2kzbl$(this.tmpVec4_txabq9$_0.x,this.tmpVec4_txabq9$_0.y,this.tmpVec4_txabq9$_0.z).scale_mx4ult$(1/this.tmpVec4_txabq9$_0.w),0))},$d.prototype.project_2gj7bz$=function(t,e){return this.viewProj.transform_5s4mpv$(e.set_7b5o5w$(t.x,t.y,t.z,1))},$d.prototype.projectScreen_c0y950$=function(t,e,i,n){return!!this.project_2gj7b4$(t,n)&&(n.x=.5*(1+n.x)*e.width+e.x,n.y=i.windowHeight-.5*(1+n.y)*e.height+e.y,n.z=.5*(1+n.z),!0)},$d.prototype.unProjectScreen_c0y950$=function(t,e,i,n){var r=t.x-e.x,o=i.windowHeight-t.y-e.y;this.tmpVec4_txabq9$_0.set_7b5o5w$(2*r/e.width-1,2*o/e.height-1,2*t.z-1,1),this.invViewProj.transform_5s4mpv$(this.tmpVec4_txabq9$_0);var s=1/this.tmpVec4_txabq9$_0.w;return n.set_y2kzbl$(this.tmpVec4_txabq9$_0.x*s,this.tmpVec4_txabq9$_0.y*s,this.tmpVec4_txabq9$_0.z*s),!0},yd.prototype.get=function(){return this.isDirty&&(this.update(this.mat_0),this.isDirty=!1),this.mat_0},yd.$metadata$={kind:$,simpleName:"LazyMatrix",interfaces:[]},vd.$metadata$={kind:$,simpleName:"ProjCorrectionMode",interfaces:[P]},vd.values=function(){return[bd(),xd(),wd()]},vd.valueOf_61zpoe$=function(t){switch(t){case"NONE":return bd();case"ONSCREEN":return xd();case"OFFSCREEN":return wd();default:T("No enum constant de.fabmax.kool.scene.Camera.ProjCorrectionMode."+t)}},$d.$metadata$={kind:$,simpleName:"Camera",interfaces:[ef]},zd.prototype.setCentered_y2kzbl$=function(t,e,i){this.top=.5*t,this.bottom=-this.top,this.right=this.aspectRatio*this.top,this.left=-this.right,this.near=e,this.far=i},zd.prototype.updateCamera_fd1mc0$=function(t,e){if(this.isClipToViewport)this.left=0,this.right=e.width,this.bottom=0,this.top=e.height;else if(this.isKeepAspectRatio){var i=this.top-this.bottom,n=e.aspectRatio*i,r=this.left+.5*(this.right-this.left);this.left=r-.5*n,this.right=r+.5*n}$d.prototype.updateCamera_fd1mc0$.call(this,t,e)},zd.prototype.updateProjectionMatrix=function(){this.left!==this.right&&this.bottom!==this.top&&this.near!==this.far&&this.proj.setOrthographic_w8lrqs$(this.left,this.right,this.bottom,this.top,this.near,this.far)},zd.prototype.computeFrustumPlane_jwr40o$=function(t,e){this.invView.transform_w1lst9$(e.upperLeft.set_y2kzbl$(this.left,this.top,-t)),this.invView.transform_w1lst9$(e.upperRight.set_y2kzbl$(this.right,this.top,-t)),this.invView.transform_w1lst9$(e.lowerLeft.set_y2kzbl$(this.left,this.bottom,-t)),this.invView.transform_w1lst9$(e.lowerRight.set_y2kzbl$(this.right,this.bottom,-t))},zd.prototype.isInFrustum_2qa7tb$=function(t,e){this.tmpNodeCenter_dwzowq$_0.set_czzhiu$(t),this.tmpNodeCenter_dwzowq$_0.subtract_czzhiu$(this.globalPos);var i=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalRight);if(i>this.right+e||i<this.left-e)return!1;var n=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalUp);if(n>this.top+e||n<this.bottom-e)return!1;var r=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalLookDir);return!(r>this.far+e||r<this.near-e)},zd.$metadata$={kind:$,simpleName:"OrthographicCamera",interfaces:[$d]},Object.defineProperty(kd.prototype,"fovX",{configurable:!0,get:function(){return this.fovX_7k9npl$_0},set:function(t){this.fovX_7k9npl$_0=t}}),kd.prototype.updateProjectionMatrix=function(){this.proj.setPerspective_7b5o5w$(this.fovY,this.aspectRatio,this.clipNear,this.clipFar);var t=this.fovY*PN.DEG_2_RAD/2;this.sphereFacY_87yuf8$_0=1/A.cos(t),this.tangY_ey6fvl$_0=A.tan(t);var e=this.tangY_ey6fvl$_0*this.aspectRatio,i=A.atan(e);this.sphereFacX_87yued$_0=1/A.cos(i),this.tangX_ey6fwg$_0=A.tan(i),this.fovX=2*i*PN.RAD_2_DEG},kd.prototype.computeFrustumPlane_jwr40o$=function(t,e){var i=t*this.tangX_ey6fwg$_0,n=t*this.tangY_ey6fvl$_0;this.invView.transform_w1lst9$(e.upperLeft.set_y2kzbl$(-i,n,-t)),this.invView.transform_w1lst9$(e.upperRight.set_y2kzbl$(i,n,-t)),this.invView.transform_w1lst9$(e.lowerLeft.set_y2kzbl$(-i,-n,-t)),this.invView.transform_w1lst9$(e.lowerRight.set_y2kzbl$(i,-n,-t))},kd.prototype.isInFrustum_2qa7tb$=function(t,e){this.tmpNodeCenter_hw7d0$_0.set_czzhiu$(t),this.tmpNodeCenter_hw7d0$_0.subtract_czzhiu$(this.globalPos);var i=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalLookDir);if(i>this.clipFar+e||i<this.clipNear-e)return!1;var n=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalUp),r=e*this.sphereFacY_87yuf8$_0;if(n>(i*=this.tangY_ey6fvl$_0)+r||n<-i-r)return!1;var o=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalRight);return r=e*this.sphereFacX_87yued$_0,!(o>(i*=this.aspectRatio)+r||o<-i-r)},Sd.prototype.sync_hrtwbc$=function(t,e){this.master.updateCamera_fd1mc0$(e,t),this.position.set_czzhiu$(this.master.globalPos),this.lookAt.set_czzhiu$(this.master.globalLookAt),this.up.set_czzhiu$(this.master.globalUp),this.aspectRatio=this.master.aspectRatio,this.fovY=this.master.fovY,this.clipNear=this.master.clipNear,this.clipFar=this.master.clipFar},Sd.$metadata$={kind:$,simpleName:"Proxy",interfaces:[kd]},kd.$metadata$={kind:$,simpleName:"PerspectiveCamera",interfaces:[$d]},Cd.prototype.set_lj9zd1$=function(t){this.upperLeft.set_czzhiu$(t.upperLeft),this.upperRight.set_czzhiu$(t.upperRight),this.lowerLeft.set_czzhiu$(t.lowerLeft),this.lowerRight.set_czzhiu$(t.lowerRight)},Cd.$metadata$={kind:$,simpleName:"FrustumPlane",interfaces:[]};var Nd,Ed,Pd,Td=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function Od(t){void 0===t&&(t=null),ef.call(this,t),this.intChildren=M(),this.childrenBounds=new O$,this.transform=new bn,this.invTransform=new bn,this.isIdentity=!1,this.isDirty=!1,this.tmpTransformVec_vl4onp$_0=Mr(),this.tmpBounds_8xwcjs$_0=new O$,this.setIdentity()}function Md(){this.lights=b([(new jd).setDirectional_czzhiu$(Pr(-1)).setColor_y83vuj$(V$().WHITE,1)])}function jd(){this.color=W$(V$().WHITE),this.type=Id(),this.direction=jr(1),this.position=Mr(),this.spotAngle=60}function Ad(t,e,i){P.call(this),this.encoded=i,this.name$=t,this.ordinal$=e}function Rd(){Rd=function(){},Nd=new Ad("DIRECTIONAL",0,0),Ed=new Ad("POINT",1,1),Pd=new Ad("SPOT",2,2)}function Id(){return Rd(),Nd}function Ld(){return Rd(),Ed}function Dd(){return Rd(),Pd}function qd(t,e){void 0===t&&(t=Yw([ds().POSITIONS,ds().COLORS])),void 0===e&&(e=null),Fd.call(this,t,e),t.primitiveType=Qw(),this.rayTest=Qd().nopTest();var i=new qc;this.shader=new zc(i)}function Bd(t,e,i){void 0===t&&(t=null),void 0===e&&(e=!1);var n=b([ds().POSITIONS,ds().NORMALS,ds().TEXTURE_COORDS]);if(e){var r=ds().TANGENTS;n.add_11rb$(r)}var o=new Fd(new Bw(n),t);i(o);var s=o;return e&&s.geometry.generateTangents_mx4ult$(),s}function Fd(t,e){var i;Gd(),void 0===e&&(e=null),ef.call(this,e),this.geometry=t,this.id=(i=Gd().instanceId_0,Gd().instanceId_0=i.inc(),i),this.instances=null,this.morphWeights=null,this.skin=null,this.isOpaque=!0,this.shader_cdun6p$_0=null,this.pipeline_fj0dqa$_0=null,this.discardedPipelines_d0j47k$_0=M(),this.rayTest=Qd().boundsTest()}function Ud(){Vd=this,this.instanceId_0=Tt}Object.defineProperty(Od.prototype,"children",{configurable:!0,get:function(){return this.intChildren}}),Object.defineProperty(Od.prototype,"size",{configurable:!0,get:function(){return this.intChildren.size}}),Od.prototype.checkInverse=function(){this.isDirty&&(this.transform.invert_23yxad$(this.invTransform),this.isDirty=!1)},Od.prototype.setDirty=function(){this.isDirty=!0,this.isIdentity=!1},Od.prototype.update_kma0q5$=function(t){var e;ef.prototype.update_kma0q5$.call(this,t),this.childrenBounds.clear(),e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).update_kma0q5$(t),this.childrenBounds.add_ea4od8$(this.intChildren.get_za3lpa$(i).bounds);this.setLocalBounds(),this.globalCenterMut.set_czzhiu$(this.bounds.center),this.globalExtentMut.set_czzhiu$(this.bounds.max),this.modelMat.transform_w1lst9$(this.globalCenterMut),this.modelMat.transform_w1lst9$(this.globalExtentMut),this.globalRadius=this.globalCenter.distance_czzhiu$(this.globalExtentMut),this.bounds.isEmpty||this.isIdentity||(this.tmpBounds_8xwcjs$_0.clear(),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.min.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.min.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.max.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.max.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.min.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.min.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.max.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.max.y,this.bounds.max.z),1)),this.bounds.set_ea4od8$(this.tmpBounds_8xwcjs$_0))},Od.prototype.setLocalBounds=function(){this.bounds.set_ea4od8$(this.childrenBounds)},Od.prototype.updateModelMat=function(){ef.prototype.updateModelMat.call(this),this.isIdentity||this.modelMat.mul_d4zu6l$(this.transform)},Od.prototype.rayTest_jljx4v$=function(t){var e;this.isIdentity||(this.checkInverse(),t.transformBy_d4zu6l$(this.invTransform)),e=this.intChildren;for(var i=0;i!==e.size;++i){var n=this.intChildren.get_za3lpa$(i);if(n.isPickable&&n.isVisible){var r=n.bounds.hitDistanceSqr_nvyeur$(t.ray);r<nt.MAX_VALUE&&r<=t.hitDistanceSqr&&n.rayTest_jljx4v$(t)}}this.isIdentity||t.transformBy_d4zu6l$(this.transform)},Od.prototype.getTransform_d4zu6j$=function(t){return t.set_d4zu6l$(this.transform)},Od.prototype.getInverseTransform_d4zu6j$=function(t){return this.checkInverse(),t.set_d4zu6l$(this.invTransform)},Od.prototype.collectDrawCommands_kma0q5$=function(t){var e;if(ef.prototype.collectDrawCommands_kma0q5$.call(this,t),this.isRendered){e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).collectDrawCommands_kma0q5$(t)}},Od.prototype.dispose_aemszp$=function(t){var e;ef.prototype.dispose_aemszp$.call(this,t),e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).dispose_aemszp$(t)},Od.prototype.get_61zpoe$=function(t){var e;if(zt(t,this.name))return this;e=this.intChildren;for(var i=0;i!==e.size;++i){var n=this.intChildren.get_za3lpa$(i).get_61zpoe$(t);if(null!=n)return n}return null},Od.prototype.addNode_xtids1$$default=function(t,e){e>=0?this.intChildren.add_wxm5ur$(e,t):this.intChildren.add_11rb$(t),t.parent=this,this.bounds.add_ea4od8$(t.bounds)},Od.prototype.addNode_xtids1$=function(t,e,i){void 0===e&&(e=-1),i?i(t,e):this.addNode_xtids1$$default(t,e)},Od.prototype.sortChildrenBy_mq7kdd$=function(t){var e=this.intChildren;e.size>1&&mt(e,new $t(Td(t)))},Od.prototype.removeNode_f1kmr1$=function(t){return!!this.intChildren.remove_11rb$(t)&&(t.parent=null,!0)},Od.prototype.removeAllChildren=function(){var t;t=this.intChildren;for(var e=0;e!==t.size;++e)this.intChildren.get_za3lpa$(e).parent=null;this.intChildren.clear()},Od.prototype.findNode_61zpoe$=function(t){var e;if(zt(t,this.name))return this;e=this.children;for(var i=0;i!==e.size;++i){var n=this.children.get_za3lpa$(i).findNode_61zpoe$(t);if(null!=n)return n}return null},Od.prototype.containsNode_f1kmr1$=function(t){return this.intChildren.contains_11rb$(t)},Od.prototype.plusAssign_f1kmr1$=function(t){this.addNode_xtids1$(t)},Od.prototype.minusAssign_f1kmr1$=function(t){this.removeNode_f1kmr1$(t)},Od.prototype.unaryPlus_uv0sim$=function(t){this.addNode_xtids1$(t)},Od.prototype.translate_czzhiu$=function(t){return this.translate_y2kzbl$(t.x,t.y,t.z)},Od.prototype.translate_y2kzbl$=function(t,e,i){return this.translate_yvo9jy$(t,e,i)},Od.prototype.translate_czzhiw$=function(t){return this.translate_yvo9jy$(t.x,t.y,t.z)},Od.prototype.translate_yvo9jy$=function(t,e,i){return this.transform.translate_yvo9jy$(t,e,i),this.setDirty(),this},Od.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},Od.prototype.rotate_7b5o5w$=function(t,e,i,n){return this.rotate_6y0v78$(t,e,i,n)},Od.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},Od.prototype.rotate_6y0v78$=function(t,e,i,n){return this.transform.rotate_6y0v78$(t,e,i,n),this.setDirty(),this},Od.prototype.scale_mx4ult$=function(t){return this.scale_yvo9jy$(t,t,t)},Od.prototype.scale_y2kzbl$=function(t,e,i){return this.scale_yvo9jy$(t,e,i)},Od.prototype.scale_14dthe$=function(t){return this.scale_yvo9jy$(t,t,t)},Od.prototype.scale_yvo9jy$=function(t,e,i){return this.transform.scale_yvo9jy$(t,e,i),this.setDirty(),this},Od.prototype.mul_d4zu6l$=function(t){return this.transform.mul_d4zu6l$(t),this.setDirty(),this},Od.prototype.set_d4zu6j$=function(t){return this.transform.set_d4zu6j$(t),this.setDirty(),this},Od.prototype.set_d4zu6l$=function(t){return this.transform.set_d4zu6l$(t),this.setDirty(),this},Od.prototype.setIdentity=function(){return this.transform.setIdentity(),this.invTransform.setIdentity(),this.isDirty=!1,this.isIdentity=!0,this},Od.$metadata$={kind:$,simpleName:"Group",interfaces:[ef]},Md.prototype.singleLight_q9zcvo$=function(t){this.lights.clear();var e=this.lights,i=new jd;t(i),e.add_11rb$(i)},Md.$metadata$={kind:$,simpleName:"Lighting",interfaces:[]},jd.prototype.setColor_y83vuj$=function(t,e){return this.color.set_czzhhz$(t),this.color.a=e,this},jd.prototype.setDirectional_czzhiu$=function(t){return this.type=Id(),this.direction.set_czzhiu$(t).norm(),this.position.set_czzhiu$(Er().ZERO),this.spotAngle=0,this},jd.prototype.setPoint_czzhiu$=function(t){return this.type=Ld(),this.position.set_czzhiu$(t),this.direction.set_czzhiu$(Er().ZERO),this.spotAngle=0,this},jd.prototype.setSpot_nve3wz$=function(t,e,i){return this.type=Dd(),this.position.set_czzhiu$(t),this.direction.set_czzhiu$(e).norm(),this.spotAngle=i,this},Ad.$metadata$={kind:$,simpleName:"Type",interfaces:[P]},Ad.values=function(){return[Id(),Ld(),Dd()]},Ad.valueOf_61zpoe$=function(t){switch(t){case"DIRECTIONAL":return Id();case"POINT":return Ld();case"SPOT":return Dd();default:T("No enum constant de.fabmax.kool.scene.Light.Type."+t)}},jd.$metadata$={kind:$,simpleName:"Light",interfaces:[]},qd.prototype.addLine_nbf24k$=function(t,e,i){return this.addLine_b8opkg$(t,i,e,i)},qd.prototype.addLine_b8opkg$=function(t,e,i,n){var r,o,a,l,u,p={v:0},c=this.geometry,h=c.isBatchUpdate;return c.isBatchUpdate=!0,(r=t,o=e,a=p,l=i,u=n,function(t){return a.v=t.addVertex_lv7vxo$(r,null,o,null),t.addVertex_lv7vxo$(l,null,u,null),t.addIndex_za3lpa$(a.v),t.addIndex_za3lpa$(a.v+1|0),s})(c),c.hasChanged=!0,c.isBatchUpdate=h,p.v},qd.prototype.addLineString_k3xgzo$=function(t,e){var i;i=bt(t);for(var n=0;n<i;n++)this.addLine_b8opkg$(t.get_za3lpa$(n),e,t.get_za3lpa$(n+1|0),e)},qd.prototype.addWireframe_hjnvxh$=function(t,i){if(void 0===i&&(i=null),t.primitiveType!==ez())throw cn("Supplied mesh is not a triangle mesh: "+t.primitiveType);var n,r,o,a,l=ct(),u=this.geometry,p=u.isBatchUpdate;u.isBatchUpdate=!0,(n=t,r=this,o=i,a=l,function(t){var i,l,u=n.get_za3lpa$(0),p=t.numVertices;i=n.numVertices;for(var c=0;c<i;c++){u.index=c;var h,d,f,_=r.geometry;_.checkBufferSizes_za3lpa$(),h=_.vertexSizeF;for(var m=1;m<=h;m++)_.dataF.plusAssign_mx4ult$(0);d=_.vertexSizeI;for(var $=1;$<=d;$++)_.dataI.plusAssign_za3lpa$(0);_.vertexIt.index=(f=_.numVertices,_.numVertices=f+1|0,f);var y=o,v=_.vertexIt;v.position.set_czzhiu$(u.position),v.color.set_czzhhz$(null!=y?y:u.color),_.bounds.add_czzhiu$(_.vertexIt.position),_.hasChanged=!0,_.numVertices}l=n.numIndices;for(var g=0;g<l;g+=3){var b=p+n.indices.get_za3lpa$(g)|0,x=p+n.indices.get_za3lpa$(g+1|0)|0,w=p+n.indices.get_za3lpa$(g+2|0)|0,z=e.Long.fromInt(A.min(b,x)).shiftLeft(32).or(e.Long.fromInt(A.max(b,x))),k=e.Long.fromInt(A.min(x,w)).shiftLeft(32).or(e.Long.fromInt(A.max(x,w))),S=e.Long.fromInt(A.min(w,b)).shiftLeft(32).or(e.Long.fromInt(A.max(w,b)));a.contains_11rb$(z)||(r.geometry.addIndex_za3lpa$(b),r.geometry.addIndex_za3lpa$(x),a.add_11rb$(z)),a.contains_11rb$(k)||(r.geometry.addIndex_za3lpa$(x),r.geometry.addIndex_za3lpa$(w),a.add_11rb$(k)),a.contains_11rb$(S)||(r.geometry.addIndex_za3lpa$(w),r.geometry.addIndex_za3lpa$(b),a.add_11rb$(S))}return s})(u),u.hasChanged=!0,u.isBatchUpdate=p},qd.prototype.addNormals_325j0g$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=1);var n,r,o,a,l=t.isBatchUpdate;t.isBatchUpdate=!0,(n=t,r=i,o=e,a=this,function(t){var e,i=Mr(),l=n;e=l.numVertices;for(var u=0;u<e;u++){l.vertexIt.index=u;var p=r,c=o,h=a,d=l.vertexIt;i.set_czzhiu$(d.normal).scale_mx4ult$(p).add_czzhiu$(d.position);var f=null!=c?c:d.color;h.addLine_b8opkg$(d.position,f,i,f)}return s})(t),t.hasChanged=!0,t.isBatchUpdate=l},qd.prototype.clear=function(){this.geometry.clear(),this.bounds.clear()},qd.prototype.addBoundingBox_j1pmtk$=function(t,e){var i,n,r=this.geometry,o=r.isBatchUpdate;r.isBatchUpdate=!0,(i=t,n=e,function(t){var e,r,o;t.checkBufferSizes_za3lpa$(),e=t.vertexSizeF;for(var a=1;a<=e;a++)t.dataF.plusAssign_mx4ult$(0);r=t.vertexSizeI;for(var l=1;l<=r;l++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(o=t.numVertices,t.numVertices=o+1|0,o);var u=i,p=n,c=t.vertexIt;c.position.set_y2kzbl$(u.min.x,u.min.y,u.min.z),c.color.set_czzhhz$(p),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var h,d,f,_=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),h=t.vertexSizeF;for(var m=1;m<=h;m++)t.dataF.plusAssign_mx4ult$(0);d=t.vertexSizeI;for(var $=1;$<=d;$++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(f=t.numVertices,t.numVertices=f+1|0,f);var y=i,v=n,g=t.vertexIt;g.position.set_y2kzbl$(y.min.x,y.min.y,y.max.z),g.color.set_czzhhz$(v),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var b,x,w,z=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),b=t.vertexSizeF;for(var k=1;k<=b;k++)t.dataF.plusAssign_mx4ult$(0);x=t.vertexSizeI;for(var S=1;S<=x;S++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(w=t.numVertices,t.numVertices=w+1|0,w);var C=i,N=n,E=t.vertexIt;E.position.set_y2kzbl$(C.min.x,C.max.y,C.max.z),E.color.set_czzhhz$(N),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var P,T,O,M=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),P=t.vertexSizeF;for(var j=1;j<=P;j++)t.dataF.plusAssign_mx4ult$(0);T=t.vertexSizeI;for(var A=1;A<=T;A++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(O=t.numVertices,t.numVertices=O+1|0,O);var R=i,I=n,L=t.vertexIt;L.position.set_y2kzbl$(R.min.x,R.max.y,R.min.z),L.color.set_czzhhz$(I),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var D,q,B,F=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),D=t.vertexSizeF;for(var U=1;U<=D;U++)t.dataF.plusAssign_mx4ult$(0);q=t.vertexSizeI;for(var V=1;V<=q;V++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(B=t.numVertices,t.numVertices=B+1|0,B);var G=i,H=n,W=t.vertexIt;W.position.set_y2kzbl$(G.max.x,G.min.y,G.min.z),W.color.set_czzhhz$(H),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var K,X,Y,Z=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),K=t.vertexSizeF;for(var J=1;J<=K;J++)t.dataF.plusAssign_mx4ult$(0);X=t.vertexSizeI;for(var Q=1;Q<=X;Q++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(Y=t.numVertices,t.numVertices=Y+1|0,Y);var tt=i,et=n,it=t.vertexIt;it.position.set_y2kzbl$(tt.max.x,tt.min.y,tt.max.z),it.color.set_czzhhz$(et),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var nt,rt,ot,st=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),nt=t.vertexSizeF;for(var at=1;at<=nt;at++)t.dataF.plusAssign_mx4ult$(0);rt=t.vertexSizeI;for(var lt=1;lt<=rt;lt++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(ot=t.numVertices,t.numVertices=ot+1|0,ot);var ut=i,pt=n,ct=t.vertexIt;ct.position.set_y2kzbl$(ut.max.x,ut.max.y,ut.max.z),ct.color.set_czzhhz$(pt),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var ht,dt,ft,_t=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),ht=t.vertexSizeF;for(var mt=1;mt<=ht;mt++)t.dataF.plusAssign_mx4ult$(0);dt=t.vertexSizeI;for(var $t=1;$t<=dt;$t++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(ft=t.numVertices,t.numVertices=ft+1|0,ft);var yt=i,vt=n,gt=t.vertexIt;gt.position.set_y2kzbl$(yt.max.x,yt.max.y,yt.min.z),gt.color.set_czzhhz$(vt),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var bt=t.numVertices-1|0;return t.addIndices_pmhfmb$(new Int32Array([_,z,z,M,M,F,F,_,Z,st,st,_t,_t,bt,bt,Z,_,Z,z,st,M,_t,F,bt])),s})(r),r.hasChanged=!0,r.isBatchUpdate=o},qd.$metadata$={kind:$,simpleName:"LineMesh",interfaces:[Fd]},Object.defineProperty(Fd.prototype,"shader",{configurable:!0,get:function(){return this.shader_cdun6p$_0},set:function(t){var e;this.shader_cdun6p$_0=t,null!=(e=this.pipeline_fj0dqa$_0)&&this.discardedPipelines_d0j47k$_0.add_11rb$(e),this.pipeline_fj0dqa$_0=null}}),Object.defineProperty(Fd.prototype,"bounds",{configurable:!0,get:function(){return this.geometry.bounds}}),Fd.prototype.generate_v2sixm$=function(t){var e,i=this.geometry,n=i.isBatchUpdate;i.isBatchUpdate=!0,(e=t,function(t){return t.clear(),e(new Ez(t)),s})(i),i.hasChanged=!0,i.isBatchUpdate=n},Fd.prototype.getPipeline_aemszp$=function(t){var e,i,n;if(!this.discardedPipelines_d0j47k$_0.isEmpty()){var r;for(r=this.discardedPipelines_d0j47k$_0.iterator();r.hasNext();){var o=r.next();t.disposePipeline_i7l2g2$(o)}this.discardedPipelines_d0j47k$_0.clear()}if(null!=(i=this.pipeline_fj0dqa$_0))n=i;else{var s;if(null!=(e=this.shader)){var a=e.createPipeline_sbx4mf$(this,t);this.pipeline_fj0dqa$_0=a,s=a}else s=null;n=s}return n},Fd.prototype.rayTest_jljx4v$=function(t){this.rayTest.rayTest_jljx4v$(t)},Fd.prototype.dispose_aemszp$=function(t){var e;ef.prototype.dispose_aemszp$.call(this,t),null!=(e=this.pipeline_fj0dqa$_0)&&t.disposePipeline_i7l2g2$(e),this.pipeline_fj0dqa$_0=null},Fd.prototype.collectDrawCommands_kma0q5$=function(t){ef.prototype.collectDrawCommands_kma0q5$.call(this,t),this.isRendered&&(this.geometry.hasChanged&&!this.geometry.isBatchUpdate&&(this.geometry.isRebuildBoundsOnSync&&this.geometry.rebuildBounds(),this.rayTest.onMeshDataChanged_f1jspk$(this)),t.renderPass.addMesh_sbx4mf$(this,t.ctx))},Ud.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Vd=null;function Gd(){return null===Vd&&new Ud,Vd}function Hd(){Qd()}function Wd(){Jd=this}function Kd(){}function Xd(){this.mesh=null}function Yd(t){this.closure$mesh=t,this.triangleTree=null,this.rayTraverser=new nS}function Zd(t){this.closure$mesh=t,this.edgeTree=null,this.rayTraverser=new eS}Fd.$metadata$={kind:$,simpleName:"Mesh",interfaces:[ef]},Hd.prototype.onMeshDataChanged_f1jspk$=function(t){},Kd.prototype.rayTest_jljx4v$=function(t){},Kd.$metadata$={kind:$,interfaces:[Hd]},Wd.prototype.nopTest=function(){return new Kd},Xd.prototype.onMeshDataChanged_f1jspk$=function(t){this.mesh=t},Xd.prototype.rayTest_jljx4v$=function(t){var e;if(null!=(e=this.mesh)){var i=e,n=i.bounds.hitDistanceSqr_nvyeur$(t.ray);n<nt.MAX_VALUE&&n<=t.hitDistanceSqr&&t.setHit_vfk0k2$(i,A.sqrt(n))}},Xd.$metadata$={kind:$,interfaces:[Hd]},Wd.prototype.boundsTest=function(){return new Xd},Yd.prototype.onMeshDataChanged_f1jspk$=function(t){this.triangleTree=xk(Bk().getTriangles_r7nl2o$(t.geometry))},Yd.prototype.rayTest_jljx4v$=function(t){var e;this.rayTraverser.setup_nvyeur$(t.ray),null!=(e=this.triangleTree)&&this.rayTraverser.traverse_7efza$(e),this.rayTraverser.distanceSqr<t.hitDistanceSqr&&t.setHit_vfk0k2$(this.closure$mesh,this.rayTraverser.distance)},Yd.$metadata$={kind:$,interfaces:[Hd]},Zd.prototype.onMeshDataChanged_f1jspk$=function(t){this.edgeTree=wk(Ik().getEdges_r7nl2o$(t.geometry))},Zd.prototype.rayTest_jljx4v$=function(t){var e;this.rayTraverser.setup_nvyeur$(t.ray),null!=(e=this.edgeTree)&&this.rayTraverser.traverse_7efza$(e),this.rayTraverser.distanceSqr<t.hitDistanceSqr&&t.setHit_vfk0k2$(this.closure$mesh,this.rayTraverser.distance)},Zd.$metadata$={kind:$,interfaces:[Hd]},Wd.prototype.geometryTest_f1jspk$=function(t){var e;switch(t.geometry.primitiveType.name){case"TRIANGLES":e=new Yd(t);break;case"LINES":e=new Zd(t);break;default:throw V("Mesh primitive type must be either GL_TRIANGLES or GL_LINES")}return e},Wd.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jd=null;function Qd(){return null===Jd&&new Wd,Jd}function tf(t){void 0===t&&(t=null),Od.call(this,t),this.nodes=z(),this.meshes=z(),this.textures=z(),this.animations=M(),this.skins=M()}function ef(t){pf(),void 0===t&&(t=null),this.name=t,this.onUpdate=M(),this.onCollectDrawCommands=M(),this.onDispose=M(),this.onHoverEnter=M(),this.onHover=M(),this.onHoverExit=M(),this.tags=new Xf,this.bounds_ba5obo$_0=new O$,this.globalRadius_3g00fw$_0=0,this.globalCenterMut=Mr(),this.globalExtentMut=Mr(),this.modelMat=new bn,this.modelMatDirty=!1,this.modelMatInvLazy_yq9j4d$_0=new bn,this.parent_302581$_0=null,this.isVisible_mqrc8j$_0=!0,this.isCastingShadow=!0,this.isPickable_b77vbo$_0=!0,this.isFrustumChecked_un4x7a$_0=!0,this.isRendered=!0}function nf(){uf=this,this.MODEL_MAT_IDENTITY_0=new bn}Hd.$metadata$={kind:st,simpleName:"MeshRayTest",interfaces:[]},tf.prototype.disableAllAnimations=function(){this.enableAnimation_za3lpa$(-1)},tf.prototype.enableAnimation_za3lpa$=function(t){var e;e=this.animations;for(var i=0;i!==e.size;++i)this.animations.get_za3lpa$(i).weight=i===t?1:0},tf.prototype.setAnimationWeight_24o109$=function(t,e){I(this.animations).contains_mef7kx$(t)&&(this.animations.get_za3lpa$(t).weight=e)},tf.prototype.applyAnimation_14dthe$=function(t){var e,i,n=!0;e=this.animations;for(var r=0;r!==e.size;++r)this.animations.get_za3lpa$(r).weight>0&&(this.animations.get_za3lpa$(r).apply_8555vt$(t,n),n=!1);i=this.skins;for(var o=0;o!==i.size;++o)this.skins.get_za3lpa$(o).updateJointTransforms()},tf.prototype.printHierarchy=function(){this.printHierarchy_0(this,"")},tf.prototype.printHierarchy_0=function(t,i){var n,r,o=i+Ct(t.name)+" [",s=t.children,a=M();for(n=s.iterator();n.hasNext();){var l=n.next();e.isType(l,Fd)&&a.add_11rb$(l)}for(jt(o+a.size+" meshes]"),r=t.children.iterator();r.hasNext();){var u=r.next();e.isType(u,Od)?this.printHierarchy_0(u,i+"    "):jt(i+"    "+Ct(u.name))}},tf.prototype.dispose_aemszp$=function(t){var e;for(e=this.textures.values.iterator();e.hasNext();)e.next().dispose();Od.prototype.dispose_aemszp$.call(this,t)},tf.$metadata$={kind:$,simpleName:"Model",interfaces:[Od]},Object.defineProperty(ef.prototype,"bounds",{configurable:!0,get:function(){return this.bounds_ba5obo$_0}}),Object.defineProperty(ef.prototype,"globalCenter",{configurable:!0,get:function(){return this.globalCenterMut}}),Object.defineProperty(ef.prototype,"globalRadius",{configurable:!0,get:function(){return this.globalRadius_3g00fw$_0},set:function(t){this.globalRadius_3g00fw$_0=t}}),Object.defineProperty(ef.prototype,"modelMatInv",{configurable:!0,get:function(){return this.checkModelMatInv_vk7bqf$_0()}}),Object.defineProperty(ef.prototype,"parent",{configurable:!0,get:function(){return this.parent_302581$_0},set:function(t){this.parent_302581$_0=t}}),Object.defineProperty(ef.prototype,"isVisible",{configurable:!0,get:function(){return this.isVisible_mqrc8j$_0},set:function(t){this.isVisible_mqrc8j$_0=t}}),Object.defineProperty(ef.prototype,"isPickable",{configurable:!0,get:function(){return this.isPickable_b77vbo$_0},set:function(t){this.isPickable_b77vbo$_0=t}}),Object.defineProperty(ef.prototype,"isFrustumChecked",{configurable:!0,get:function(){return this.isFrustumChecked_un4x7a$_0},set:function(t){this.isFrustumChecked_un4x7a$_0=t}}),ef.prototype.update_kma0q5$=function(t){var e;e=this.onUpdate;for(var i=0;i!==e.size;++i)this.onUpdate.get_za3lpa$(i)(this,t);this.updateModelMat(),this.globalCenterMut.set_czzhiu$(this.bounds.center),this.globalExtentMut.set_czzhiu$(this.bounds.max),this.modelMat.transform_w1lst9$(this.globalCenterMut),this.modelMat.transform_w1lst9$(this.globalExtentMut),this.globalRadius=this.globalCenter.distance_czzhiu$(this.globalExtentMut)},ef.prototype.updateModelMat=function(){var t,e;this.modelMat.set_d4zu6l$(null!=(e=null!=(t=this.parent)?t.modelMat:null)?e:pf().MODEL_MAT_IDENTITY_0),this.modelMatDirty=!0},ef.prototype.collectDrawCommands_kma0q5$=function(t){var e;if(this.isRendered=this.checkIsVisible_6otzq7$(t.camera,t.ctx),this.isRendered){e=this.onCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onCollectDrawCommands.get_za3lpa$(i)(this,t)}},ef.prototype.dispose_aemszp$=function(t){var e;e=this.onDispose;for(var i=0;i!==e.size;++i)this.onDispose.get_za3lpa$(i)(this,t)},ef.prototype.toGlobalCoords_w1lst9$$default=function(t,e){return this.modelMat.transform_w1lst9$(t,e),t},ef.prototype.toGlobalCoords_w1lst9$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toGlobalCoords_w1lst9$$default(t,e)},ef.prototype.toGlobalCoords_j7uy7i$$default=function(t,e){return this.modelMat.transform_j7uy7i$(t,e),t},ef.prototype.toGlobalCoords_j7uy7i$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toGlobalCoords_j7uy7i$$default(t,e)},ef.prototype.toLocalCoords_w1lst9$$default=function(t,e){return this.modelMatInv.transform_w1lst9$(t,e),t},ef.prototype.toLocalCoords_w1lst9$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toLocalCoords_w1lst9$$default(t,e)},ef.prototype.toLocalCoords_j7uy7i$$default=function(t,e){return this.modelMatInv.transform_j7uy7i$(t,e),t},ef.prototype.toLocalCoords_j7uy7i$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toLocalCoords_j7uy7i$$default(t,e)},ef.prototype.rayTest_jljx4v$=function(t){},ef.prototype.get_61zpoe$=function(t){return zt(t,this.name)?this:null},ef.prototype.checkIsVisible_6otzq7$=function(t,e){return!!this.isVisible&&(!(this.isFrustumChecked&&!this.bounds.isEmpty)||t.isInFrustum_f1kmr1$(this))},ef.prototype.findNode_61zpoe$=function(t){return zt(t,this.name)?this:null},ef.prototype.findParentOfType_287e2$=K("kool-kool-core.de.fabmax.kool.scene.Node.findParentOfType_287e2$",X((function(){var t=e.throwCCE;return function(e,i){for(var n,r=this.parent;null!=r&&!i(r);)r=r.parent;return i(n=r)?n:t()}}))),ef.prototype.checkModelMatInv_vk7bqf$_0=function(){return this.modelMatDirty&&(this.modelMat.invert_23yxad$(this.modelMatInvLazy_yq9j4d$_0),this.modelMatDirty=!1),this.modelMatInvLazy_yq9j4d$_0},nf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var rf,of,sf,af,lf,uf=null;function pf(){return null===uf&&new nf,uf}function cf(t,e,i){void 0===e&&(e=null);var n=new hf(t,e);return i(n),n}function hf(t,e){var i;void 0===e&&(e=null),Od.call(this,e),this.leftDragMethod=mf(),this.middleDragMethod=_f(),this.rightDragMethod=$f(),this.zoomMethod=bf(),this.verticalAxis=Dr().Y_AXIS,this.horizontalAxis=Dr().X_AXIS,this.minHorizontalRot=-90,this.maxHorizontalRot=90,this.translation=Fr(),this.verticalRotation=0,this.horizontalRotation=0,this.zoom_os17wm$_0=10,this.isKeepingStandardTransform=!1,this.invertRotX=!1,this.invertRotY=!1,this.minZoom=1,this.maxZoom=100,this.translationBounds=null,this.panMethod=new wf,this.vertRotAnimator=new n$(0),this.horiRotAnimator=new n$(0),this.zoomAnimator=new n$(this.zoom),this.prevButtonMask_ajfzw$_0=0,this.dragMethod_errtco$_0=_f(),this.dragStart_84bd5l$_0=!1,this.deltaPos_l16i4v$_0=pr(),this.deltaScroll_dymhuq$_0=0,this.ptrPos_jb68ux$_0=pr(),this.panPlane_eoagge$_0=new Yn,this.pointerHitStart_dvxvk5$_0=Mr(),this.pointerHit_a6l7qh$_0=Mr(),this.tmpVec1_ioqh9p$_0=Mr(),this.tmpVec2_ioqh8u$_0=Mr(),this.mouseTransform_3g2ewq$_0=new bn,this.mouseTransformInv_t9oczn$_0=new bn,this.smoothness_swf2pk$_0=0,this.smoothness=.5,this.panPlane_eoagge$_0.p.set_czzhiu$(Er().ZERO),this.panPlane_eoagge$_0.n.set_czzhiu$(Er().Y_AXIS),t.registerDragHandler_y44tw7$(this),this.onUpdate.add_11rb$((i=this,function(t,e){var n=e.component1(),r=e.component2();return i.doCamTransform_kff6gu$_0(n,r),s}))}function df(t,e){P.call(this),this.name$=t,this.ordinal$=e}function ff(){ff=function(){},rf=new df("NONE",0),of=new df("ROTATE",1),sf=new df("PAN",2)}function _f(){return ff(),rf}function mf(){return ff(),of}function $f(){return ff(),sf}function yf(t,e){P.call(this),this.name$=t,this.ordinal$=e}function vf(){vf=function(){},af=new yf("ZOOM_CENTER",0),lf=new yf("ZOOM_TRANSLATE",1)}function gf(){return vf(),af}function bf(){return vf(),lf}function xf(){}function wf(){xf.call(this),this.panPlane=new Yn,this.pointerRay_0=new ir}function zf(t){void 0===t&&(t=null),Od.call(this,t),this.lighting=new Md,this.camera=new kd,this.onRenderScene=M(),this.mainRenderPass=new El(this),this.mutOffscreenPasses_2k8cox$_0=M(),this.addOffscreenPasses_g83fdg$_0=M(),this.remOffscreenPasses_yrwi31$_0=M(),this.isPickingEnabled=!0,this.rayTest_odjp91$_0=new nr,this.hoverNode_ab2f3d$_0=null,this.dragPtrs_mbcqtw$_0=M(),this.dragHandlers_ipew8g$_0=M(),this.disposables_mcwga4$_0=M()}function kf(){}function Sf(){Kf=this}function Cf(t){return t.cubeProps.defaults().centered(),t.cube_lhbb6w$(t.cubeProps),s}function Nf(t){return t.texCoord.x=1-t.texCoord.x,s}function Ef(t){return t.vertexModFun=Nf,t.sphereProps.uvDefaults().steps=10,t.uvSphere_mojs8w$(t.sphereProps),s}function Pf(t,i,n,r){var o,a;Mf(),void 0===i&&(i=0),sc.call(this,Mf().skyboxCubeShaderModel_vzi7zj$(i,n,r)),this.cubeMapSampler_0=null,this.environmentMap_dc5v0g$_0=t,this.onPipelineSetup.add_11rb$(jf),this.onPipelineCreated.add_11rb$((o=this,a=t,function(t,i,n){var r,l,u,p,h=o,d=o.model;t:do{var f;for(u=Fp.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&u.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(zt(g.name,"skyboxCube")&&e.isType(g,pp)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,pp)?m:c();if(null!=b){p=b;break t}}}p=null}while(0);return h.cubeMapSampler_0=null!=(r=p)?r.sampler:null,null!=(l=o.cubeMapSampler_0)&&(l.texture=a),s}))}function Tf(){Of=this}ef.$metadata$={kind:$,simpleName:"Node",interfaces:[fv]},Object.defineProperty(hf.prototype,"zoom",{configurable:!0,get:function(){return this.zoom_os17wm$_0},set:function(t){var e,i=this.minZoom,n=this.maxZoom;e=t<i?i:t>n?n:t,this.zoom_os17wm$_0=e}}),Object.defineProperty(hf.prototype,"smoothness",{configurable:!0,get:function(){return this.smoothness_swf2pk$_0},set:function(t){var e;this.smoothness_swf2pk$_0=t,e=PN.FUZZY_EQ_D;var i=A.abs(t)<=e?0:50/t;this.vertRotAnimator.stiffness=i,this.horiRotAnimator.stiffness=i,this.zoomAnimator.stiffness=i}}),hf.prototype.setMouseRotation_dleff0$=function(t,e){this.setMouseRotation_lu1900$(t,e)},hf.prototype.setMouseRotation_lu1900$=function(t,e){this.vertRotAnimator.set_14dthe$(t),this.horiRotAnimator.set_14dthe$(e),this.verticalRotation=t,this.horizontalRotation=e},hf.prototype.setMouseTranslation_y2kzbl$=function(t,e,i){this.setMouseTranslation_yvo9jy$(t,e,i)},hf.prototype.setMouseTranslation_yvo9jy$=function(t,e,i){this.translation.set_yvo9jy$(t,e,i)},hf.prototype.resetZoom_mx4ult$=function(t){this.resetZoom_14dthe$(t)},hf.prototype.resetZoom_14dthe$=function(t){this.zoom=t,this.zoomAnimator.set_14dthe$(this.zoom)},hf.prototype.updateTransform=function(){var t;null!=(t=this.translationBounds)&&t.clampToBounds_5s4mqs$(this.translation),this.isKeepingStandardTransform&&(this.mouseTransform_3g2ewq$_0.invert_23yxad$(this.mouseTransformInv_t9oczn$_0),this.mul_d4zu6l$(this.mouseTransformInv_t9oczn$_0));var e=this.zoomAnimator.actual,i=this.vertRotAnimator.actual,n=this.horiRotAnimator.actual;this.mouseTransform_3g2ewq$_0.setIdentity(),this.mouseTransform_3g2ewq$_0.translate_yvo9jy$(this.translation.x,this.translation.y,this.translation.z),this.mouseTransform_3g2ewq$_0.scale_yvo9jy$(e,e,e),this.mouseTransform_3g2ewq$_0.rotate_5820x2$(i,this.verticalAxis),this.mouseTransform_3g2ewq$_0.rotate_5820x2$(n,this.horizontalAxis),this.isKeepingStandardTransform?this.mul_d4zu6l$(this.mouseTransform_3g2ewq$_0):this.set_d4zu6l$(this.mouseTransform_3g2ewq$_0)},hf.prototype.doCamTransform_kff6gu$_0=function(t,e){var i,n,r,o,s,a,l;if(this.dragMethod_errtco$_0===$f()&&this.panMethod.computePanPoint_467c2i$(this.pointerHit_a6l7qh$_0,t,this.ptrPos_jb68ux$_0,e))if(this.dragStart_84bd5l$_0)this.dragStart_84bd5l$_0=!1,this.pointerHitStart_dvxvk5$_0.set_czzhiu$(this.pointerHit_a6l7qh$_0),this.stopSmoothMotion_ph0bif$_0();else{var u=1-this.smoothness,p=u<.1?.1:u>1?1:u;this.tmpVec1_ioqh9p$_0.set_czzhiu$(this.pointerHitStart_dvxvk5$_0).subtract_czzhiu$(this.pointerHit_a6l7qh$_0).scale_mx4ult$(p),null!=(i=this.parent)&&i.toLocalCoords_w1lst9$(this.tmpVec1_ioqh9p$_0,0);var c=this.tmpVec1_ioqh9p$_0.length();c>.5*t.camera.globalRange&&this.tmpVec1_ioqh9p$_0.scale_mx4ult$(.5*t.camera.globalRange/c),this.add_1k1qf7$_0(this.translation,this.tmpVec1_ioqh9p$_0)}else this.pointerHit_a6l7qh$_0.set_czzhiu$(t.camera.globalLookAt);var h,d=this.deltaScroll_dymhuq$_0;if(h=PN.FUZZY_EQ_F,A.abs(d)<=h||(this.zoom=this.zoom*(1-this.deltaScroll_dymhuq$_0/10),this.deltaScroll_dymhuq$_0=0),this.dragMethod_errtco$_0===mf()){o=this.verticalRotation,r=this.deltaPos_l16i4v$_0.x/3,n=this.invertRotX?-1:1,this.verticalRotation=o-r*n,l=this.horizontalRotation,a=this.deltaPos_l16i4v$_0.y/3,s=this.invertRotY?-1:1,this.horizontalRotation=l-a*s;var f,_=this.horizontalRotation,m=this.minHorizontalRot,$=this.maxHorizontalRot;f=_<m?m:_>$?$:_,this.horizontalRotation=f,this.deltaPos_l16i4v$_0.set_czzhjp$(ar().ZERO)}this.vertRotAnimator.desired=this.verticalRotation,this.horiRotAnimator.desired=this.horizontalRotation,this.zoomAnimator.desired=this.zoom;var y,v=this.zoomAnimator.actual,g=this.zoomAnimator.animate_mx4ult$(e.deltaT);y=PN.FUZZY_EQ_D;var b=v-g;A.abs(b)<=y||this.zoomMethod!==bf()||this.computeZoomTranslationPerspective_axn3gs$(t.camera,v,g),this.vertRotAnimator.animate_mx4ult$(e.deltaT),this.horiRotAnimator.animate_mx4ult$(e.deltaT),this.updateTransform()},hf.prototype.computeZoomTranslationPerspective_axn3gs$=function(t,e,i){var n,r=i/e;t.globalPos.subtract_2gj7b4$(this.pointerHit_a6l7qh$_0,this.tmpVec1_ioqh9p$_0).scale_mx4ult$(r).add_czzhiu$(this.pointerHit_a6l7qh$_0),t.globalPos.subtract_2gj7b4$(t.globalLookAt,this.tmpVec2_ioqh8u$_0).scale_mx4ult$(r).add_czzhiu$(t.globalLookAt),this.tmpVec1_ioqh9p$_0.subtract_czzhiu$(this.tmpVec2_ioqh8u$_0),null!=(n=this.parent)&&n.toLocalCoords_w1lst9$(this.tmpVec1_ioqh9p$_0,0),this.add_1k1qf7$_0(this.translation,this.tmpVec1_ioqh9p$_0)},hf.prototype.stopSmoothMotion_ph0bif$_0=function(){this.vertRotAnimator.set_14dthe$(this.vertRotAnimator.actual),this.horiRotAnimator.set_14dthe$(this.horiRotAnimator.actual),this.zoomAnimator.set_14dthe$(this.zoomAnimator.actual),this.verticalRotation=this.vertRotAnimator.actual,this.horizontalRotation=this.horiRotAnimator.actual,this.zoom=this.zoomAnimator.actual},hf.prototype.handleDrag_urvnay$=function(t,e,i){var n;t.isEmpty()||t.get_za3lpa$(0).isConsumed_za3lpa$()||!t.get_za3lpa$(0).isInViewport_hrtwbc$(e.mainRenderPass.viewport,i)?(this.deltaPos_l16i4v$_0.set_czzhjp$(ar().ZERO),this.deltaScroll_dymhuq$_0=0):(0===t.get_za3lpa$(0).buttonEventMask&&t.get_za3lpa$(0).buttonMask===this.prevButtonMask_ajfzw$_0||(n=t.get_za3lpa$(0).isLeftButtonDown?this.leftDragMethod:t.get_za3lpa$(0).isRightButtonDown?this.rightDragMethod:t.get_za3lpa$(0).isMiddleButtonDown?this.middleDragMethod:_f(),this.dragMethod_errtco$_0=n,this.dragStart_84bd5l$_0=this.dragMethod_errtco$_0!==_f()),this.prevButtonMask_ajfzw$_0=t.get_za3lpa$(0).buttonMask,this.ptrPos_jb68ux$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y),this.deltaPos_l16i4v$_0.set_dleff0$(t.get_za3lpa$(0).deltaX,t.get_za3lpa$(0).deltaY),this.deltaScroll_dymhuq$_0=t.get_za3lpa$(0).deltaScroll,t.get_za3lpa$(0).consume_za3lpa$())},hf.prototype.add_1k1qf7$_0=function(t,e){t.x=t.x+e.x,t.y=t.y+e.y,t.z=t.z+e.z},df.$metadata$={kind:$,simpleName:"DragMethod",interfaces:[P]},df.values=function(){return[_f(),mf(),$f()]},df.valueOf_61zpoe$=function(t){switch(t){case"NONE":return _f();case"ROTATE":return mf();case"PAN":return $f();default:T("No enum constant de.fabmax.kool.scene.OrbitInputTransform.DragMethod."+t)}},yf.$metadata$={kind:$,simpleName:"ZoomMethod",interfaces:[P]},yf.values=function(){return[gf(),bf()]},yf.valueOf_61zpoe$=function(t){switch(t){case"ZOOM_CENTER":return gf();case"ZOOM_TRANSLATE":return bf();default:T("No enum constant de.fabmax.kool.scene.OrbitInputTransform.ZoomMethod."+t)}},hf.$metadata$={kind:$,simpleName:"OrbitInputTransform",interfaces:[kf,Od]},xf.$metadata$={kind:$,simpleName:"PanBase",interfaces:[]},wf.prototype.computePanPoint_467c2i$=function(t,e,i,n){return this.panPlane.p.set_czzhiu$(e.camera.globalLookAt),this.panPlane.n.set_czzhiu$(e.camera.globalLookDir),e.camera.computePickRay_k7d561$(this.pointerRay_0,i.x,i.y,e.viewport,n)&&this.panPlane.intersectionPoint_lplggz$(this.pointerRay_0,t)},wf.$metadata$={kind:$,simpleName:"CameraOrthogonalPan",interfaces:[xf]},Object.defineProperty(zf.prototype,"offscreenPasses",{configurable:!0,get:function(){return this.mutOffscreenPasses_2k8cox$_0}}),Object.defineProperty(zf.prototype,"isFrustumChecked",{configurable:!0,get:function(){return!1},set:function(t){}}),zf.prototype.addOffscreenPass_m1c2kf$=function(t){this.addOffscreenPasses_g83fdg$_0.add_11rb$(t)},zf.prototype.removeOffscreenPass_m1c2kf$=function(t){this.remOffscreenPasses_yrwi31$_0.add_11rb$(t)},zf.prototype.addOffscreenPasses_g83fdg$_1=function(){if(!this.addOffscreenPasses_g83fdg$_0.isEmpty()){var t;for(t=this.addOffscreenPasses_g83fdg$_0.iterator();t.hasNext();){var e=t.next();this.mutOffscreenPasses_2k8cox$_0.contains_11rb$(e)||this.mutOffscreenPasses_2k8cox$_0.add_11rb$(e)}this.addOffscreenPasses_g83fdg$_0.clear()}},zf.prototype.removeOffscreenPasses_fgywi7$_0=function(){this.remOffscreenPasses_yrwi31$_0.isEmpty()||(this.mutOffscreenPasses_2k8cox$_0.removeAll_brywnq$(this.remOffscreenPasses_yrwi31$_0),this.remOffscreenPasses_yrwi31$_0.clear())},zf.prototype.renderScene_aemszp$=function(t){var e,i;this.removeOffscreenPasses_fgywi7$_0(),this.addOffscreenPasses_g83fdg$_1(),e=this.onRenderScene;for(var n=0;n!==e.size;++n)this.onRenderScene.get_za3lpa$(n)(this,t);this.mainRenderPass.update_aemszp$(t),i=this.offscreenPasses;for(var r=0;r!==i.size;++r){var o=this.offscreenPasses.get_za3lpa$(r);o.isEnabled&&(o.update_aemszp$(t),o.collectDrawCommands_aemszp$(t))}this.mainRenderPass.collectDrawCommands_aemszp$(t)},zf.prototype.processInput_aemszp$=function(t){this.handleInput_gqm22e$_0(t)},zf.prototype.update_kma0q5$=function(t){var e;e=this.disposables_mcwga4$_0;for(var i=0;i!==e.size;++i)this.disposables_mcwga4$_0.get_za3lpa$(i).dispose_aemszp$(t.ctx);this.disposables_mcwga4$_0.clear(),Od.prototype.update_kma0q5$.call(this,t)},zf.prototype.dispose_ipew3$=function(t){this.disposables_mcwga4$_0.add_11rb$(t)},zf.prototype.dispose_aemszp$=function(t){var e,i;for(i=this.disposables_mcwga4$_0.iterator();i.hasNext();)i.next().dispose_aemszp$(t);this.disposables_mcwga4$_0.clear(),this.mainRenderPass.dispose_aemszp$(t),e=this.offscreenPasses;for(var n=0;n!==e.size;++n)this.offscreenPasses.get_za3lpa$(n).dispose_aemszp$(t);this.remOffscreenPasses_yrwi31$_0.clear(),this.mutOffscreenPasses_2k8cox$_0.clear(),Od.prototype.dispose_aemszp$.call(this,t)},zf.prototype.registerDragHandler_y44tw7$=function(t){this.dragHandlers_ipew8g$_0.contains_11rb$(t)||this.dragHandlers_ipew8g$_0.add_11rb$(t)},zf.prototype.removeDragHandler_y44tw7$=function(t){this.dragHandlers_ipew8g$_0.remove_11rb$(t)},zf.prototype.computeRay_wswg9$=function(t,e,i){return this.camera.computePickRay_2cu1go$(i,t,this.mainRenderPass.viewport,e)},zf.prototype.handleInput_gqm22e$_0=function(t){var e,i,n,r=null,o=this.hoverNode_ab2f3d$_0,s=t.inputMgr.pointerState.primaryPointer;if(this.isPickingEnabled&&s.isValid&&!s.isConsumed_za3lpa$()){if(s.isInViewport_hrtwbc$(this.mainRenderPass.viewport,t)&&this.camera.initRayTes_clwnka$(this.rayTest_odjp91$_0,s,this.mainRenderPass.viewport,t)&&(this.rayTest_jljx4v$(this.rayTest_odjp91$_0),this.rayTest_odjp91$_0.isHit&&(r=this.rayTest_odjp91$_0.hitNode)),!zt(o,r)){if(null!=o){e=o.onHoverExit;for(var a=0;a!==e.size;++a)o.onHoverExit.get_za3lpa$(a)(o,s,this.rayTest_odjp91$_0,t)}if(null!=r){i=r.onHoverEnter;for(var l=0;l!==i.size;++l)r.onHoverEnter.get_za3lpa$(l)(r,s,this.rayTest_odjp91$_0,t)}this.hoverNode_ab2f3d$_0=r}if(null!=r&&zt(o,r)){n=r.onHover;for(var u=0;u!==n.size;++u)r.onHover.get_za3lpa$(u)(r,s,this.rayTest_odjp91$_0,t)}this.handleDrag_dsfjhm$_0(t)}},zf.prototype.handleDrag_dsfjhm$_0=function(t){var e,i;this.dragPtrs_mbcqtw$_0.clear(),e=t.inputMgr.pointerState.pointers;for(var n=0;n!==e.length;++n){var r=t.inputMgr.pointerState.pointers[n];r.isValid&&r.isInViewport_hrtwbc$(this.mainRenderPass.viewport,t)&&(0!==r.buttonMask||0!==r.buttonEventMask||0!==r.deltaScroll)&&this.dragPtrs_mbcqtw$_0.add_11rb$(r)}for(i=L(I(this.dragHandlers_ipew8g$_0)).iterator();i.hasNext();){var o=i.next();this.dragHandlers_ipew8g$_0.get_za3lpa$(o).handleDrag_urvnay$(this.dragPtrs_mbcqtw$_0,this,t)}},kf.$metadata$={kind:st,simpleName:"DragHandler",interfaces:[]},zf.$metadata$={kind:$,simpleName:"Scene",interfaces:[Od]},Sf.prototype.cube_wgmpek$=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=!1);var r=new Fd(new Bw(qt(ds().POSITIONS)),"skybox-cube");return r.generate_v2sixm$(Cf),r.isFrustumChecked=!1,r.isCastingShadow=!1,r.shader=new Pf(t,e,i,n),r},Sf.prototype.sphere_mu0k3h$=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=!1);var r=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),"skybox-cube");return r.generate_v2sixm$(Ef),r.isFrustumChecked=!1,r.isCastingShadow=!1,r.shader=new Af(t,e,i,n),r},Object.defineProperty(Pf.prototype,"environmentMap",{configurable:!0,get:function(){return this.environmentMap_dc5v0g$_0},set:function(t){var e;this.environmentMap_dc5v0g$_0=t,null!=(e=this.cubeMapSampler_0)&&(e.texture=t)}}),Tf.prototype.skyboxCubeShaderModel_vzi7zj$=function(t,e,i){var n=new Ru("skybox-cube"),r={v:null},o=new Lu(n),s=o.mvpNode(),a=o.vec3TransformNode_vid4wo$(o.attrPositions().output,s.outModelMat,1);r.v=o.stageInterfaceNode_iikjwn$("ifLocalPos",a.outVec3),o.positionOutput=o.addNode_u9w9by$(new qf(s,o.attrPositions().output,o.stage)).outPosition;var l=new Du(n),u=l.cubeMapSamplerNode_2z3a2t$(l.cubeMapNode_61zpoe$("skyboxCube"),r.v.output);return 0!==t&&(u.texLod=new Bu(new wu(t))),e===i?l.colorOutput_a3v4si$(u.outColor):e?l.colorOutput_a3v4si$(l.hdrToLdrNode_r20yfm$(u.outColor).outColor):l.colorOutput_a3v4si$(l.gammaNode_ze33is$(u.outColor).outColor),n},Tf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Of=null;function Mf(){return null===Of&&new Tf,Of}function jf(t,e,i){return t.cullMethod=wl(),t.depthTest=fl(),s}function Af(t,i,n,r){var o,a;Lf(),void 0===i&&(i=0),sc.call(this,Lf().skyboxSphereShaderModel_vzi7zj$(i,n,r)),this.textureSampler_0=null,this.environmentMap_gq82hk$_0=t,this.onPipelineSetup.add_11rb$(Df),this.onPipelineCreated.add_11rb$((o=this,a=t,function(t,i,n){var r,l,u,p,h=o,d=o.model;t:do{var f;for(u=Fp.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&u.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(zt(g.name,"skyboxSphere")&&e.isType(g,up)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,up)?m:c();if(null!=b){p=b;break t}}}p=null}while(0);return h.textureSampler_0=null!=(r=p)?r.sampler:null,null!=(l=o.textureSampler_0)&&(l.texture=a),s}))}function Rf(){If=this}Pf.$metadata$={kind:$,simpleName:"SkyboxCubeShader",interfaces:[sc]},Object.defineProperty(Af.prototype,"environmentMap",{configurable:!0,get:function(){return this.environmentMap_gq82hk$_0},set:function(t){var e;this.environmentMap_gq82hk$_0=t,null!=(e=this.textureSampler_0)&&(e.texture=t)}}),Rf.prototype.skyboxSphereShaderModel_vzi7zj$=function(t,e,i){var n=new Ru("skybox-sphere"),r={v:null},o=new Lu(n),s=o.mvpNode();r.v=o.stageInterfaceNode_iikjwn$("ifUv",o.attrTexCoords().output),o.positionOutput=o.addNode_u9w9by$(new qf(s,o.attrPositions().output,o.stage)).outPosition;var a=new Du(n),l=a.textureSamplerNode_ce41yx$(a.textureNode_61zpoe$("skyboxSphere"),r.v.output);return 0!==t&&(l.texLod=new Bu(new wu(t))),e===i?a.colorOutput_a3v4si$(l.outColor):e?a.colorOutput_a3v4si$(a.hdrToLdrNode_r20yfm$(l.outColor).outColor):a.colorOutput_a3v4si$(a.gammaNode_ze33is$(l.outColor).outColor),n},Rf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var If=null;function Lf(){return null===If&&new Rf,If}function Df(t,e,i){return t.cullMethod=wl(),t.depthTest=fl(),s}function qf(t,e,i){qu.call(this,"skyboxPos",i,Vp().mask),this.mvp=t,this.inPos=e,this.outPosition=new Bu(new $u("skyboxPos_outPosition"),this)}Af.$metadata$={kind:$,simpleName:"SkyboxSphereShader",interfaces:[sc]},qf.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inPos),this.dependsOn_lhtstx$(this.mvp)},qf.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outPosition.declare()+" = ("+this.mvp.outMvpMat+" * vec4("+this.inPos.ref3f()+", 0.0)).xyww;")},qf.$metadata$={kind:$,simpleName:"SkyboxPosNode",interfaces:[qu]},Sf.$metadata$={kind:y,simpleName:"Skybox",interfaces:[]};var Bf,Ff,Uf,Vf,Gf,Hf,Wf,Kf=null;function Xf(t){void 0===t&&(t=z()),this.tags_0=t}function Yf(t,e){var i;r_.call(this,t,e),this.onClick=M(),this.textColorHovered=new ym(V$().WHITE),this.isPressed_xi0anj$_0=!1,this.isHovered_k6sd62$_0=!1,this.ptrDownPos=pr(),this.textAlignment=new N_(O_(),O_()),this.onHoverEnter.add_11rb$((i=this,function(t,e,n,r){return i.isHovered=!0,s})),this.onHoverExit.add_11rb$(function(t){return function(e,i,n,r){return t.isHovered=!1,t.isPressed=!1,s}}(this)),this.onHover.add_11rb$(function(t){return function(e,i,n,r){return i.isLeftButtonEvent&&(i.isLeftButtonDown?(t.ptrDownPos.set_dleff0$(n.hitPositionLocal.x-t.componentBounds.min.x,n.hitPositionLocal.y-t.componentBounds.min.y),t.isPressed=!0):t.isPressed&&(t.isPressed=!1,t.ptrDownPos.x=t.ptrDownPos.x-(n.hitPositionLocal.x-t.componentBounds.min.x),t.ptrDownPos.y=t.ptrDownPos.y-(n.hitPositionLocal.y-t.componentBounds.min.y),t.ptrDownPos.length()<b_(t,5)&&t.fireOnClick_kjsf19$(i,n,r))),s}}(this))}function Zf(t,e){var i;o_.call(this,t,e),this.button=t,this.hoverAnimator=new Jm(new e$(0,1)),this.colorWeightStd=1,this.colorWeightHovered=0,this.hoverEnterListener=(i=this,function(t,e,n,r){return i.hoverAnimator.duration=.1,i.hoverAnimator.speed=1,s}),this.hoverExitListener=function(t){return function(e,i,n,r){return t.hoverAnimator.duration=.2,t.hoverAnimator.speed=-1,s}}(this)}function Jf(){}function Qf(){}function t_(t){this.component=t,this.geometry=new Bw(rm().UI_MESH_ATTRIBS),this.meshBuilder=new Ez(this.geometry),this.mesh=new Fd(this.geometry),this.shader=new em,this.color=new ym(V$().BLACK.withAlpha_mx4ult$(.5))}function e_(t){t_.call(this,t)}function i_(t,e,i,n){var r,o,a;Y_.call(this,i,n),this.menuAnimator_0=new Qm(new e$(0,1)),this.menuButton_8be2vx$_2ldp8u$_0=this.menuButton_8be2vx$_2ldp8u$_0,this.menuAnimator_0.duration=.25,this.menuAnimator_0.speed=-1,this.menuAnimator_0.value.onUpdate=(r=this,function(t){return r.setScrollOffset_y2kzbl$(b_(r,40)*(1-t),0,0),r.alpha=t,s}),this.layoutSpec.setOrigin_4ujscr$(d_(),d_(),d_()),this.layoutSpec.setSize_4ujscr$(t,$_(100,!0),f_()),this.alpha=0,null!=e&&(this.unaryPlus_uv0sim$(n.label_tokfmu$("title",(o=e,a=n,function(t){return t.layoutSpec.setOrigin_4ujscr$(d_(),m_(-50,!0),d_()),t.layoutSpec.setSize_4ujscr$($_(100,!0),m_(40,!0),f_()),t.textAlignment=new N_(O_(),O_()),t.text=o,t.textColor.setCustom_11rb$(a.theme.accentColor),t.onUpdate.add_11rb$(function(t,e){return function(i,n){return t.v&&(t.v=!1,e.font.setCustom_11rb$(_m(e,n.ctx))),s}}({v:!0},t)),s}))),this.unaryPlus_uv0sim$(n.component_qphi6d$("divider",function(t){return function(e){e.layoutSpec.setOrigin_4ujscr$($_(5),m_(-58,!0),d_()),e.layoutSpec.setSize_4ujscr$($_(90),m_(1,!0),f_());var i=new t_(e);return i.color.setCustom_11rb$(t.theme.accentColor),e.ui.setCustom_11rb$(i),s}}(n)))),n.toggleButton_6j87po$(i+"-menuButton",function(t){return function(e){return t.menuButton_8be2vx$=e,e.ui.setCustom_11rb$(new n_(t,e)),e.layoutSpec.setOrigin_4ujscr$(m_(10,!0),m_(-50,!0),d_()),e.layoutSpec.setSize_4ujscr$(m_(40,!0),m_(40,!0),f_()),s}}(this))}function n_(t,e){this.$outer=t,G_.call(this,e,new Qf)}function r_(t,e){H_.call(this,t,e),this.text_qvo458$_0=t,this.textAlignment_ux8xbn$_0=new N_(T_(),O_()),this.font=new ym(null),this.textColor=new ym(V$().WHITE)}function o_(t,e){this.label=t,this.baseUi_tctiu8$_0=e,this.font=this.label.font.prop,this.textColor=H$(),this.geom=new Bw(rm().UI_MESH_ATTRIBS),this.meshBuilder=new Ez(this.geom),this.mesh=new Fd(this.geom),this.shader=new em,this.textStartX=0,this.textWidth=0,this.textBaseline=0}function s_(){this.width=__(0),this.height=__(0),this.depth=__(0),this.x=__(0),this.y=__(0),this.z=__(0)}function a_(t,e){P.call(this),this.name$=t,this.ordinal$=e}function l_(){l_=function(){},Bf=new a_("UN",0),Ff=new a_("DP",1),Uf=new a_("MM",2),Vf=new a_("PC",3)}function u_(){return l_(),Bf}function p_(){return l_(),Ff}function c_(){return l_(),Uf}function h_(){return l_(),Vf}function d_(){return new k_(0,u_())}function f_(){return new k_(100,h_())}function __(t,e){return void 0===e&&(e=!0),new k_(t,u_(),e)}function m_(t,e){return void 0===e&&(e=!0),new k_(t,p_(),e)}function $_(t,e){return void 0===e&&(e=!0),new k_(t,h_(),e)}function y_(t,e){return e*t/100}function v_(t,e){return t*e/96}function g_(t,e){return t*e/25.4}function b_(t,e){return v_(e,t.dpi)}function x_(t,e){return ot(e*t/100)}function w_(t,e){return ot(t*e/96)}function z_(t,e){return ot(t*e/25.4)}function k_(t,e,i){void 0===i&&(i=!0),this.value=t,this.unit=e,this.roundToUnit=i}function S_(t,e,i){k_.call(this,0,u_()),this.left=t,this.right=e,this.add=i}function C_(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n}function N_(t,e){this.xAlignment=t,this.yAlignment=e}function E_(t,e){P.call(this),this.name$=t,this.ordinal$=e}function P_(){P_=function(){},Gf=new E_("START",0),Hf=new E_("CENTER",1),Wf=new E_("END",2)}function T_(){return P_(),Gf}function O_(){return P_(),Hf}function M_(){return P_(),Wf}function j_(t,e,i){void 0===i&&(i=Ct(e.name)+"-scroll"),H_.call(this,i,e.root),this.scrollTarget=e,this.trackColor=V$().GRAY.withAlpha_mx4ult$(.2),this.handleColor=V$().GRAY.withAlpha_mx4ult$(.75),this.verticalTrackBounds=new O$,this.verticalHandleBounds=new O$,this.horizontalTrackBounds=new O$,this.horizontalHandleBounds=new O$,this.scrollPosY_ted4vc$_0=new i$(0),this.scrollPosYGuard_vhhi7b$_0=new i$(0),this.pickRay_m6hrch$_0=new ir,this.padding.set_m986jv$(m_(3)),this.layoutSpec.setOrigin_4ujscr$(d_(),d_(),d_()),this.layoutSpec.setSize_4ujscr$(this.scrollTarget.layoutSpec.width,this.scrollTarget.layoutSpec.height,this.scrollTarget.layoutSpec.depth),this.scrollPosY_ted4vc$_0.stiffness=300,this.scrollPosYGuard_vhhi7b$_0.stiffness=500,t.registerDragHandler_y44tw7$(this)}function A_(t){this.scrollHandler=t,this.geom=Yw([ds().POSITIONS,ds().NORMALS,ds().COLORS]),this.meshBuilder=new Ez(this.geom),this.mesh=new Fd(this.geom)}function R_(t,e,i,n,r){var o,a;H_.call(this,t,r),this.onValueChanged=M(),this.trackColor=V$().GRAY,this.trackColorHighlighted=new ym(V$().LIGHT_GRAY),this.knobColor=new ym(V$().WHITE),this.trackWidth=0,this.knobSize=0,this.knobPosition=pr(),this.min_c38r2y$_0=e,this.max_c38wrw$_0=i,this.value_ymubdz$_0=n,this.pickRay_0=new ir,this.hitPlane_0=new Yn,this.hitPos_0=Mr(),this.initHitPos_0=Mr(),this.startDrag_0=!1,this.startDragValue_0=0,this.hitPlane_0.n.set_czzhiu$(Er().Z_AXIS),this.onHover.add_11rb$((o=this,a=r,function(t,e,i,n){var r=i.hitPositionLocal.x-o.componentBounds.min.x,l=i.hitPositionLocal.y-o.componentBounds.min.y;return e.isLeftButtonEvent&&e.isLeftButtonDown&&o.isOverKnob_0(r,l)&&(a.scene.registerDragHandler_y44tw7$(o),o.startDrag_0=!0),s}))}function I_(t,e){this.slider=t,this.baseUi=e,this.geom=new Bw(rm().UI_MESH_ATTRIBS),this.meshBuilder=new Ez(this.geom),this.mesh=new Fd(this.geom),this.shader=new em}function L_(t,e){var i;r_.call(this,t,e),this.editText=new q_,this.onUpdate.add_11rb$((i=this,function(t,e){var n,r=e.ctx;if(!r.inputMgr.keyEvents.isEmpty()){for(n=r.inputMgr.keyEvents.iterator();n.hasNext();){var o=n.next();if(o.isCharTyped)i.editText.charTyped_s8itvh$(O(o.typedChar));else if(o.isPressed)switch(o.keyCode){case-17:i.editText.backspace();break;case-19:i.editText.deleteSelection();break;case-25:o.isCtrlDown?i.editText.moveCaret_fzusl$(3,o.isShiftDown):i.editText.moveCaret_fzusl$(1,o.isShiftDown);break;case-26:o.isCtrlDown?i.editText.moveCaret_fzusl$(4,o.isShiftDown):i.editText.moveCaret_fzusl$(2,o.isShiftDown);break;case-21:i.editText.moveCaret_fzusl$(5,o.isShiftDown);break;case-22:i.editText.moveCaret_fzusl$(6,o.isShiftDown)}}i.text=i.editText.toString()}return s}))}function D_(t,e){o_.call(this,t,e),this.textField=t,this.caretAlphaAnimator_mmbcs$_0=new Qm(new e$(0,1)),this.caretColor_qpd03i$_0=H$(),this.caretDrawPos_hkh11t$_0=new e$(0,0),this.caretPosAnimator_3ucebe$_0=new Jm(this.caretDrawPos_hkh11t$_0),this.caretAlphaAnimator_mmbcs$_0.duration=.5,this.caretAlphaAnimator_mmbcs$_0.repeating=Zm().REPEAT_TOGGLE_DIR,this.caretPosAnimator_3ucebe$_0.duration=.1}function q_(t){U_(),void 0===t&&(t=""),this.text_x0rs8x$_0=t,this.caretPosition_lco9r8$_0=0,this.selectionStart_trwhxy$_0=0}function B_(){F_=this,this.MOVE_LEFT=1,this.MOVE_RIGHT=2,this.MOVE_WORD_LEFT=3,this.MOVE_WORD_RIGHT=4,this.MOVE_START=5,this.MOVE_END=6}Xf.prototype.addTag_61zpoe$=function(t){var e=d(t,61);if(e>=0){var i=_(t,new Bt(0,e-1|0)),n=e+1|0,r=t.substring(n);this.set_4w9ihe$(i,r)}else this.set_4w9ihe$(t,null)},Xf.prototype.set_4w9ihe$=function(t,e){this.put_xwzc9p$(t,null!=e?e.toString():null)},Xf.prototype.plusAssign_61zpoe$=function(t){this.addTag_61zpoe$(t)},Xf.prototype.hasTag_jyasbz$=function(t,e){return void 0===e&&(e=null),this.containsKey_11rb$(t)&&zt(this.get_11rb$(t),e)},Xf.prototype.getBoolean_ivxn3r$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Ft(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},Xf.prototype.getInt_bm4lxs$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Ut(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},Xf.prototype.getFloat_9sobi5$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Vt(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},Xf.prototype.getDouble_io5o9c$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Vt(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},Xf.prototype.getTyped_pt3pci$=K("kool-kool-core.de.fabmax.kool.scene.Tags.getTyped_pt3pci$",X((function(){var t=e.kotlin.Exception;return function(i,n,r){var o,s=this.get_11rb$(i);if(null==s)o=n;else try{o=r(s)}catch(i){if(!e.isType(i,t))throw i;o=n}return o}}))),Xf.prototype.toString=function(){var t,e=Ot(),i=w(this.size);for(t=this.entries.iterator();t.hasNext();){var n=t.next(),r=i.add_11rb$,o=n.key,s=n.value;r.call(i,null!=s?o+"="+Ct(s):o)}return Gt(i,e,void 0,"[","]"),e.toString()},Object.defineProperty(Xf.prototype,"entries",{get:function(){return this.tags_0.entries}}),Object.defineProperty(Xf.prototype,"keys",{get:function(){return this.tags_0.keys}}),Object.defineProperty(Xf.prototype,"size",{get:function(){return this.tags_0.size}}),Object.defineProperty(Xf.prototype,"values",{get:function(){return this.tags_0.values}}),Xf.prototype.clear=function(){return this.tags_0.clear()},Xf.prototype.containsKey_11rb$=function(t){return this.tags_0.containsKey_11rb$(t)},Xf.prototype.containsValue_11rc$=function(t){return this.tags_0.containsValue_11rc$(t)},Xf.prototype.get_11rb$=function(t){return this.tags_0.get_11rb$(t)},Xf.prototype.isEmpty=function(){return this.tags_0.isEmpty()},Xf.prototype.put_xwzc9p$=function(t,e){return this.tags_0.put_xwzc9p$(t,e)},Xf.prototype.putAll_a2k3zr$=function(t){return this.tags_0.putAll_a2k3zr$(t)},Xf.prototype.remove_11rb$=function(t){return this.tags_0.remove_11rb$(t)},Xf.$metadata$={kind:$,simpleName:"Tags",interfaces:[Ht]},Object.defineProperty(Yf.prototype,"isPressed",{configurable:!0,get:function(){return this.isPressed_xi0anj$_0},set:function(t){this.isPressed_xi0anj$_0=t}}),Object.defineProperty(Yf.prototype,"isHovered",{configurable:!0,get:function(){return this.isHovered_k6sd62$_0},set:function(t){this.isHovered_k6sd62$_0=t}}),Yf.prototype.fireOnClick_kjsf19$=function(t,e,i){var n;n=this.onClick;for(var r=0;r!==n.size;++r)this.onClick.get_za3lpa$(r)(this,t,e,i)},Yf.prototype.setThemeProps_aemszp$=function(t){r_.prototype.setThemeProps_aemszp$.call(this,t),this.textColorHovered.setTheme_11rb$(this.root.theme.accentColor)},Yf.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newButtonUi_t4rm0v$(this)},Yf.$metadata$={kind:$,simpleName:"Button",interfaces:[r_]},Zf.prototype.createUi_aemszp$=function(t){var e;o_.prototype.createUi_aemszp$.call(this,t),this.hoverAnimator.speed=0,this.hoverAnimator.value.onUpdate=(e=this,function(t){return e.colorWeightHovered=t,e.colorWeightStd=1-t,e.button.requestUiUpdate(),s});var i=this.button.onHoverEnter,n=this.hoverEnterListener;i.add_11rb$(n);var r=this.button.onHoverExit,o=this.hoverExitListener;r.add_11rb$(o)},Zf.prototype.updateTextColor=function(){this.textColor.clear(),this.textColor.add_m79ulu$(this.button.textColor.apply(),this.colorWeightStd),this.textColor.add_m79ulu$(this.button.textColorHovered.apply(),this.colorWeightHovered)},Zf.prototype.dispose_aemszp$=function(t){o_.prototype.dispose_aemszp$.call(this,t);var e=this.button.onHoverEnter,i=this.hoverEnterListener;e.remove_11rb$(i);var n=this.button.onHoverExit,r=this.hoverExitListener;n.remove_11rb$(r)},Zf.prototype.onRender_aemszp$=function(t){o_.prototype.onRender_aemszp$.call(this,t),this.hoverAnimator.tick_aemszp$(t)},Zf.$metadata$={kind:$,simpleName:"ButtonUi",interfaces:[o_]},Jf.prototype.updateComponentAlpha=function(){},Jf.prototype.createUi_aemszp$=function(t){},Jf.prototype.updateUi_aemszp$=function(t){},Jf.prototype.onRender_aemszp$=function(t){},Jf.prototype.dispose_aemszp$=function(t){},Jf.$metadata$={kind:st,simpleName:"ComponentUi",interfaces:[fv]},Qf.$metadata$={kind:$,simpleName:"BlankComponentUi",interfaces:[Jf]},t_.prototype.updateComponentAlpha=function(){this.shader.alpha=this.component.alpha},t_.prototype.createUi_aemszp$=function(t){this.color.setTheme_11rb$(this.component.root.theme.backgroundColor).apply(),this.mesh.shader=this.shader,this.component.addNode_xtids1$(this.mesh,0)},t_.prototype.dispose_aemszp$=function(t){this.component.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},t_.prototype.updateUi_aemszp$=function(t){this.color.setTheme_11rb$(this.component.root.theme.backgroundColor).apply(),this.component.setupBuilder_84rojv$(this.meshBuilder),this.meshBuilder.color=this.color.prop;var e=this.meshBuilder,i=e.rectProps.defaults();i.size.set_dleff0$(this.component.width,this.component.height),i.zeroTexCoords(),e.rect_e5k3t5$(e.rectProps)},t_.prototype.onRender_aemszp$=function(t){},t_.$metadata$={kind:$,simpleName:"SimpleComponentUi",interfaces:[Jf]},e_.$metadata$={kind:$,simpleName:"BlurredComponentUi",interfaces:[t_]},Object.defineProperty(i_.prototype,"menuButton_8be2vx$",{configurable:!0,get:function(){return null==this.menuButton_8be2vx$_2ldp8u$_0?pt("menuButton"):this.menuButton_8be2vx$_2ldp8u$_0},set:function(t){this.menuButton_8be2vx$_2ldp8u$_0=t}}),Object.defineProperty(i_.prototype,"isOpen",{configurable:!0,get:function(){return this.menuButton_8be2vx$.isEnabled},set:function(t){this.menuButton_8be2vx$.isEnabled=t}}),Object.defineProperty(i_.prototype,"animationPos",{configurable:!0,get:function(){return this.menuAnimator_0.value.value}}),n_.prototype.createUi_aemszp$=function(t){G_.prototype.createUi_aemszp$.call(this,t),this.knobAnimator.duration=.5,this.knobAnimator.value.onUpdate;var e,i,n=this.tb.onStateChange,r=(e=this,i=this.$outer,function(t){return i.menuAnimator_0.speed=e.tb.isEnabled?1:-1,s});n.add_11rb$(r),this.mesh.shader=new em},n_.prototype.onRender_aemszp$=function(t){G_.prototype.onRender_aemszp$.call(this,t),this.$outer.menuAnimator_0.tick_aemszp$(t)},n_.prototype.updateUi_aemszp$=function(t){var e=.5*this.tb.width,i=.18*this.tb.height,n=-e/2,r=b_(this.tb,2.5);this.updateTextColor(),this.tb.setupBuilder_84rojv$(this.meshBuilder);var o=this.meshBuilder;o.color=new B$(0,0,0,0);var s=o.circleProps.defaults(),a=this.tb.width,l=this.tb.height;s.radius=A.min(a,l)/2,s.center.set_y2kzbl$(this.tb.width/2,this.tb.height/2,-4),s.steps=30,o.circle_59f34t$(o.circleProps);var u=this.knobAnimator.value.value*-e*.1,p=e-this.knobAnimator.value.value*e*.4;o.color=this.textColor,o.translate_y2kzbl$(this.tb.width/2,this.tb.height/2,0),o.rotate_ad55pp$(180-180*this.knobAnimator.value.value,Er().Z_AXIS),o.transform.push(),o.translate_y2kzbl$(u,i,0),o.rotate_ad55pp$(45*this.knobAnimator.value.value,Er().Z_AXIS);var c=o.rectProps.defaults();c.origin.set_y2kzbl$(n,-r/2,0),c.size.set_dleff0$(p,r),c.zeroTexCoords(),o.rect_e5k3t5$(o.rectProps),o.transform.pop();var h=o.rectProps.defaults();h.origin.set_y2kzbl$(n,-r/2,0),h.size.set_dleff0$(e,r),o.rect_e5k3t5$(o.rectProps),o.transform.push(),o.translate_y2kzbl$(u,-i,0),o.rotate_ad55pp$(-45*this.knobAnimator.value.value,Er().Z_AXIS);var d=o.rectProps.defaults();d.origin.set_y2kzbl$(n,-r/2,0),d.size.set_dleff0$(p,r),o.rect_e5k3t5$(o.rectProps),o.transform.pop()},n_.$metadata$={kind:$,simpleName:"MenuButtonUi",interfaces:[G_]},i_.$metadata$={kind:$,simpleName:"DrawerMenu",interfaces:[Y_]},Object.defineProperty(r_.prototype,"text",{configurable:!0,get:function(){return this.text_qvo458$_0},set:function(t){zt(t,this.text_qvo458$_0)||(this.text_qvo458$_0=t,this.requestUiUpdate())}}),Object.defineProperty(r_.prototype,"textAlignment",{configurable:!0,get:function(){return this.textAlignment_ux8xbn$_0},set:function(t){null!=t&&t.equals(this.textAlignment_ux8xbn$_0)||(this.textAlignment_ux8xbn$_0=t,this.requestUiUpdate())}}),r_.prototype.setThemeProps_aemszp$=function(t){H_.prototype.setThemeProps_aemszp$.call(this,t),this.font.setTheme_11rb$(fm(this,t)),this.textColor.setTheme_11rb$(this.root.theme.foregroundColor)},r_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newLabelUi_wviu0r$(this)},r_.$metadata$={kind:$,simpleName:"Label",interfaces:[H_]},o_.prototype.updateComponentAlpha=function(){this.baseUi_tctiu8$_0.updateComponentAlpha(),this.shader.alpha=this.label.alpha},o_.prototype.createUi_aemszp$=function(t){this.baseUi_tctiu8$_0.createUi_aemszp$(t),this.mesh.shader=this.shader,this.label.plusAssign_f1kmr1$(this.mesh)},o_.prototype.updateUi_aemszp$=function(t){this.baseUi_tctiu8$_0.updateUi_aemszp$(t),this.label.font.isUpdate||null!=this.label.font.prop||this.label.font.setCustom_11rb$(gv().defaultFont_aemszp$(t)),this.label.font.isUpdate&&(this.font=this.label.font.apply(),this.shader.font=this.font),this.label.setupBuilder_84rojv$(this.meshBuilder),this.updateTextColor(),this.computeTextMetrics(),this.renderText_aemszp$(t)},o_.prototype.onRender_aemszp$=function(t){this.baseUi_tctiu8$_0.onRender_aemszp$(t)},o_.prototype.dispose_aemszp$=function(t){this.baseUi_tctiu8$_0.dispose_aemszp$(t),this.label.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},o_.prototype.computeTextMetrics=function(){var t,i,n,r,o,s,a,l;switch(this.textWidth=null!=(i=null!=(t=this.font)?t.textWidth_61zpoe$(this.label.text):null)?i:0,this.label.textAlignment.xAlignment.name){case"START":n=this.label.padding.left.toUnits_dleff0$(this.label.width,this.label.dpi);break;case"CENTER":n=(this.label.width-this.textWidth)/2;break;case"END":n=this.label.width-this.textWidth-this.label.padding.right.toUnits_dleff0$(this.label.width,this.label.dpi);break;default:n=e.noWhenBranchMatched()}switch(this.textStartX=n,this.label.textAlignment.yAlignment.name){case"START":l=this.label.height-this.label.padding.top.toUnits_dleff0$(this.label.width,this.label.dpi)-(null!=(o=null!=(r=this.font)?r.normHeight:null)?o:0);break;case"CENTER":l=(this.label.height-(null!=(a=null!=(s=this.font)?s.normHeight:null)?a:0))/2;break;case"END":l=this.label.padding.bottom.toUnits_dleff0$(this.label.height,this.label.dpi);break;default:l=e.noWhenBranchMatched()}this.textBaseline=l},o_.prototype.renderText_aemszp$=function(t){this.meshBuilder.color=this.textColor;var e=this.font;if(null!=e){var i,n,r=this.meshBuilder;if(null!=(i=r.textProps))n=i;else{var o=new Bz(e);r.textProps=o,n=o}var s=n;s.defaults(),s.font=e,s.origin.set_y2kzbl$(this.textStartX,this.textBaseline,b_(this.label,.1)),s.text=this.label.text,r.text_s8z339$(s,0)}},o_.prototype.updateTextColor=function(){this.textColor.set_czzhhz$(this.label.textColor.apply())},o_.$metadata$={kind:$,simpleName:"LabelUi",interfaces:[Jf]},s_.prototype.setOrigin_4ujscr$=function(t,e,i){this.x=t,this.y=e,this.z=i},s_.prototype.setSize_4ujscr$=function(t,e,i){this.width=t,this.height=e,this.depth=i},s_.prototype.set_m6ih2k$=function(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.x=t.x,this.y=t.y,this.z=t.z},s_.$metadata$={kind:$,simpleName:"LayoutSpec",interfaces:[]},a_.$metadata$={kind:$,simpleName:"SizeUnit",interfaces:[P]},a_.values=function(){return[u_(),p_(),c_(),h_()]},a_.valueOf_61zpoe$=function(t){switch(t){case"UN":return u_();case"DP":return p_();case"MM":return c_();case"PC":return h_();default:T("No enum constant de.fabmax.kool.scene.ui.SizeUnit."+t)}},k_.prototype.toUnits_dleff0$=function(t,i){var n;if(this.roundToUnit)switch(this.unit.name){case"UN":n=ot(this.value);break;case"DP":n=w_(this.value,i);break;case"MM":n=z_(this.value,i);break;case"PC":n=x_(this.value,t);break;default:n=e.noWhenBranchMatched()}else switch(this.unit.name){case"UN":n=this.value;break;case"DP":n=v_(this.value,i);break;case"MM":n=g_(this.value,i);break;case"PC":n=y_(this.value,t);break;default:n=e.noWhenBranchMatched()}return n},k_.prototype.plus_m986jv$=function(t){return new S_(this,t,!0)},k_.prototype.minus_m986jv$=function(t){return new S_(this,t,!1)},k_.prototype.equals=function(t){return this===t||!!e.isType(t,k_)&&this.value===t.value&&this.unit===t.unit&&this.roundToUnit===t.roundToUnit},k_.prototype.hashCode=function(){var t=rt(this.value);return t=(31*(t=(31*t|0)+this.unit.hashCode()|0)|0)+rt(this.roundToUnit)|0},k_.$metadata$={kind:$,simpleName:"SizeSpec",interfaces:[]},S_.prototype.toUnits_dleff0$=function(t,e){var i=this.left.toUnits_dleff0$(t,e),n=this.right.toUnits_dleff0$(t,e);return this.add?i+n:i-n},S_.$metadata$={kind:$,simpleName:"CombSizeSpec",interfaces:[k_]},C_.prototype.set_m986jv$=function(t){this.set_107250$(t,t,t,t)},C_.prototype.set_107250$=function(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n},C_.$metadata$={kind:$,simpleName:"Margin",interfaces:[]},C_.prototype.component1=function(){return this.top},C_.prototype.component2=function(){return this.bottom},C_.prototype.component3=function(){return this.left},C_.prototype.component4=function(){return this.right},C_.prototype.copy_107250$=function(t,e,i,n){return new C_(void 0===t?this.top:t,void 0===e?this.bottom:e,void 0===i?this.left:i,void 0===n?this.right:n)},C_.prototype.toString=function(){return"Margin(top="+e.toString(this.top)+", bottom="+e.toString(this.bottom)+", left="+e.toString(this.left)+", right="+e.toString(this.right)+")"},C_.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.top)|0)+e.hashCode(this.bottom)|0)+e.hashCode(this.left)|0)+e.hashCode(this.right)|0},C_.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.top,t.top)&&e.equals(this.bottom,t.bottom)&&e.equals(this.left,t.left)&&e.equals(this.right,t.right)},N_.$metadata$={kind:$,simpleName:"Gravity",interfaces:[]},N_.prototype.component1=function(){return this.xAlignment},N_.prototype.component2=function(){return this.yAlignment},N_.prototype.copy_9pkgn0$=function(t,e){return new N_(void 0===t?this.xAlignment:t,void 0===e?this.yAlignment:e)},N_.prototype.toString=function(){return"Gravity(xAlignment="+e.toString(this.xAlignment)+", yAlignment="+e.toString(this.yAlignment)+")"},N_.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.xAlignment)|0)+e.hashCode(this.yAlignment)|0},N_.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.xAlignment,t.xAlignment)&&e.equals(this.yAlignment,t.yAlignment)},E_.$metadata$={kind:$,simpleName:"Alignment",interfaces:[P]},E_.values=function(){return[T_(),O_(),M_()]},E_.valueOf_61zpoe$=function(t){switch(t){case"START":return T_();case"CENTER":return O_();case"END":return M_();default:T("No enum constant de.fabmax.kool.scene.ui.Alignment."+t)}},j_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newScrollHandlerUi_dz938y$(this)},j_.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){this.drawBounds.set_ea4od8$(this.scrollTarget.drawBounds),this.bounds.set_ea4od8$(this.drawBounds)},j_.prototype.handleDrag_urvnay$=function(t,e,i){if(0!==this.alpha){!t.isEmpty()&&!t.get_za3lpa$(0).isConsumed_za3lpa$()&&this.computeLocalPickRay_wswg9$(t.get_za3lpa$(0),i,this.pickRay_m6hrch$_0)&&this.bounds.hitDistanceSqr_nvyeur$(this.pickRay_m6hrch$_0)<nt.MAX_VALUE&&(this.scrollPosY_ted4vc$_0.desired=this.scrollPosY_ted4vc$_0.desired+50*t.get_za3lpa$(0).deltaScroll,t.get_za3lpa$(0).consume_za3lpa$()),this.scrollPosY_ted4vc$_0.desired>0&&(this.scrollPosY_ted4vc$_0.desired>this.scrollPosYGuard_vhhi7b$_0.actual&&(this.scrollPosYGuard_vhhi7b$_0.actual=this.scrollPosY_ted4vc$_0.desired),this.scrollPosYGuard_vhhi7b$_0.desired=0,this.scrollPosY_ted4vc$_0.desired=this.scrollPosYGuard_vhhi7b$_0.animate_mx4ult$(i.deltaT));var n=this.scrollTarget.drawBounds.size.y-this.scrollTarget.contentBounds.size.y;this.scrollPosY_ted4vc$_0.desired<n&&(this.scrollPosY_ted4vc$_0.desired<this.scrollPosYGuard_vhhi7b$_0.actual&&(this.scrollPosYGuard_vhhi7b$_0.actual=this.scrollPosY_ted4vc$_0.desired),this.scrollPosYGuard_vhhi7b$_0.desired=n,this.scrollPosY_ted4vc$_0.desired=this.scrollPosYGuard_vhhi7b$_0.animate_mx4ult$(i.deltaT)),this.scrollPosY_ted4vc$_0.animate_mx4ult$(i.deltaT);var r,o=this.scrollTarget.scrollOffset.y,s=this.scrollPosY_ted4vc$_0.actual;r=PN.FUZZY_EQ_F;var a=o-s;A.abs(a)<=r||this.scrollTarget.setScrollOffset_y2kzbl$(0,this.scrollPosY_ted4vc$_0.actual,0)}},j_.prototype.rayTest_jljx4v$=function(t){if(0!==this.alpha){var e=this.verticalTrackBounds.hitDistanceSqr_nvyeur$(t.ray),i=this.horizontalTrackBounds.hitDistanceSqr_nvyeur$(t.ray),n=A.min(e,i);n<nt.MAX_VALUE&&n<=t.hitDistanceSqr&&t.setHit_vfk0k2$(this,A.sqrt(n))}},j_.$metadata$={kind:$,simpleName:"ScrollHandler",interfaces:[kf,H_]},A_.prototype.updateComponentAlpha=function(){},A_.prototype.createUi_aemszp$=function(t){this.scrollHandler.plusAssign_f1kmr1$(this.mesh)},A_.prototype.updateUi_aemszp$=function(t){this.meshBuilder.clear(),this.meshBuilder.identity(),this.computeTrackBounds(),this.drawVerticalBar(),this.drawHorizontalBar()},A_.prototype.computeTrackBounds=function(){var t=this.scrollHandler.scrollTarget,e=t.drawBounds.size.y<t.contentBounds.size.y,i=t.drawBounds.size.x<t.contentBounds.size.x,n=t.drawBounds.size.x,r=t.drawBounds.size.y,o=this.scrollHandler.padding.top.toUnits_dleff0$(r,this.scrollHandler.dpi),s=this.scrollHandler.padding.bottom.toUnits_dleff0$(r,this.scrollHandler.dpi),a=this.scrollHandler.padding.left.toUnits_dleff0$(n,this.scrollHandler.dpi),l=this.scrollHandler.padding.right.toUnits_dleff0$(n,this.scrollHandler.dpi),u=b_(this.scrollHandler,6),p=b_(this.scrollHandler,.1),c=b_(this.scrollHandler,.25);if(e){var h=n-l-u,d=this.scrollHandler.padding.bottom.toUnits_dleff0$(r,this.scrollHandler.dpi)+(i?u+l:0),f=u,_=r-o-s-(i?u+l:0);this.scrollHandler.verticalTrackBounds.set_w8lrqs$(h,d,p,h+f,d+_,p).move_czzhiu$(t.drawBounds.min);var m=t.drawBounds.size.y/t.contentBounds.size.y*_,$=b_(this.scrollHandler,12),y=m<$?$:m>_?_:m,v=y-m,g=_-(v<0?0:v>_?_:v),b=(t.drawBounds.min.y-t.contentBounds.min.y)/t.contentBounds.size.y*g+d,x=d+_-y,w=b<d?d:b>x?x:b;this.scrollHandler.verticalHandleBounds.set_w8lrqs$(h,w,c,h+f,w+y,c).move_czzhiu$(t.drawBounds.min)}else this.scrollHandler.verticalTrackBounds.clear(),this.scrollHandler.verticalHandleBounds.clear();if(i){var z=a,k=s,S=this.scrollHandler.width-a-l-(e?u+l:0),C=u;this.scrollHandler.horizontalTrackBounds.set_w8lrqs$(z,k,p,z+S,k+C,p).move_czzhiu$(t.drawBounds.min);var N=t.drawBounds.size.x/t.contentBounds.size.x*S,E=b_(this.scrollHandler,12),P=N<E?E:N>S?S:N,T=P-N,O=S-(T<0?0:T>S?S:T),M=(t.drawBounds.min.x-t.contentBounds.min.x)/t.contentBounds.size.x*O+z,j=z+S-P,A=M<z?z:M>j?j:M;this.scrollHandler.horizontalHandleBounds.set_w8lrqs$(A,k,c,A+P,k+C,c).move_czzhiu$(t.drawBounds.min)}else this.scrollHandler.horizontalTrackBounds.clear(),this.scrollHandler.horizontalHandleBounds.clear()},A_.prototype.drawVerticalBar=function(){this.drawDefaultBar_xyh9j8$_0(this.scrollHandler.verticalTrackBounds,this.scrollHandler.verticalHandleBounds)},A_.prototype.drawHorizontalBar=function(){this.drawDefaultBar_xyh9j8$_0(this.scrollHandler.horizontalTrackBounds,this.scrollHandler.horizontalHandleBounds)},A_.prototype.drawDefaultBar_xyh9j8$_0=function(t,e){if(!t.isEmpty){this.meshBuilder.color=this.scrollHandler.trackColor;var i=this.meshBuilder,n=i.rectProps.defaults();n.origin.set_y2kzbl$(t.min.x,t.min.y,t.min.z),n.size.set_dleff0$(t.size.x,t.size.y);var r=t.size.x,o=t.size.y;n.cornerRadius=A.min(r,o)/2,n.cornerSteps=4,n.zeroTexCoords(),i.rect_e5k3t5$(i.rectProps)}if(!e.isEmpty){this.meshBuilder.color=this.scrollHandler.handleColor;var s=this.meshBuilder,a=s.rectProps.defaults();a.origin.set_y2kzbl$(e.min.x,e.min.y,e.min.z),a.size.set_dleff0$(e.size.x,e.size.y);var l=e.size.x,u=e.size.y;a.cornerRadius=A.min(l,u)/2,a.cornerSteps=4,a.zeroTexCoords(),s.rect_e5k3t5$(s.rectProps)}},A_.prototype.onRender_aemszp$=function(t){},A_.prototype.dispose_aemszp$=function(t){this.scrollHandler.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},A_.$metadata$={kind:$,simpleName:"ScrollHandlerUi",interfaces:[Jf]},Object.defineProperty(R_.prototype,"min",{configurable:!0,get:function(){return this.min_c38r2y$_0},set:function(t){t!==this.min_c38r2y$_0&&(this.min_c38r2y$_0=t,this.requestUiUpdate())}}),Object.defineProperty(R_.prototype,"max",{configurable:!0,get:function(){return this.max_c38wrw$_0},set:function(t){t!==this.max_c38wrw$_0&&(this.max_c38wrw$_0=t,this.requestUiUpdate())}}),Object.defineProperty(R_.prototype,"value",{configurable:!0,get:function(){return this.value_ymubdz$_0},set:function(t){var e;if(t!==this.value_ymubdz$_0){var i,n=this.min,r=this.max;i=t<n?n:t>r?r:t,this.value_ymubdz$_0=i,this.requestUiUpdate(),e=this.onValueChanged;for(var o=0;o!==e.size;++o)this.onValueChanged.get_za3lpa$(o)(this,this.value_ymubdz$_0)}}}),R_.prototype.setValue_y2kzbl$=function(t,e,i){this.min=t,this.max=e,this.value=i},R_.prototype.isOverKnob_0=function(t,e){var i=t-this.knobPosition.x,n=e-this.knobPosition.y;return i*i+n*n<this.knobSize*this.knobSize},R_.prototype.handleDrag_urvnay$=function(t,e,i){if(1===t.size&&!t.get_za3lpa$(0).isConsumed_za3lpa$()&&t.get_za3lpa$(0).isLeftButtonDown&&this.computeLocalPickRay_wswg9$(t.get_za3lpa$(0),i,this.pickRay_0)){if(this.hitPlane_0.intersectionPoint_lplggz$(this.pickRay_0,this.hitPos_0)){this.startDrag_0&&(this.startDrag_0=!1,this.initHitPos_0.set_czzhiu$(this.hitPos_0),this.startDragValue_0=this.value);var n=this.hitPos_0.x-this.initHitPos_0.x;this.value=this.startDragValue_0+n/this.trackWidth*(this.max-this.min)}t.get_za3lpa$(0).consume_za3lpa$()}else e.removeDragHandler_y44tw7$(this)},R_.prototype.setThemeProps_aemszp$=function(t){H_.prototype.setThemeProps_aemszp$.call(this,t),this.knobColor.setTheme_11rb$(this.root.theme.accentColor),this.trackColorHighlighted.setTheme_11rb$(H$().add_m79ulu$(this.root.theme.accentColor,.4))},R_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newSliderUi_l85jm8$(this)},R_.$metadata$={kind:$,simpleName:"Slider",interfaces:[kf,H_]},I_.prototype.updateComponentAlpha=function(){this.baseUi.updateComponentAlpha(),this.shader.alpha=this.slider.alpha},I_.prototype.createUi_aemszp$=function(t){this.baseUi.createUi_aemszp$(t),this.mesh.shader=this.shader,this.slider.plusAssign_f1kmr1$(this.mesh)},I_.prototype.dispose_aemszp$=function(t){this.baseUi.dispose_aemszp$(t),this.mesh.dispose_aemszp$(t),this.slider.minusAssign_f1kmr1$(this.mesh)},I_.prototype.updateUi_aemszp$=function(t){this.baseUi.updateUi_aemszp$(t),this.slider.knobSize=b_(this.slider,10);var e=b_(this.slider,6),i=this.slider.padding.left.toUnits_dleff0$(this.slider.width,this.slider.dpi)+this.slider.knobSize,n=(this.slider.height-e)/2,r=(this.slider.value-this.slider.min)/(this.slider.max-this.slider.min);if(this.slider.trackWidth=this.slider.width-i-this.slider.knobSize-this.slider.padding.right.toUnits_dleff0$(this.slider.width,this.slider.dpi),this.slider.knobPosition.set_dleff0$(i+this.slider.trackWidth*r,this.slider.height/2),this.slider.setupBuilder_84rojv$(this.meshBuilder),this.slider.value>this.slider.min){this.meshBuilder.color=this.slider.trackColorHighlighted.apply();var o=this.meshBuilder,s=o.rectProps.defaults();s.origin.set_y2kzbl$(i,n,b_(this.slider,.1)),s.size.set_dleff0$(this.slider.knobPosition.x-i+e,e),s.cornerRadius=e/2,s.cornerSteps=4,s.zeroTexCoords(),o.rect_e5k3t5$(o.rectProps)}if(this.slider.value<this.slider.max){this.meshBuilder.color=this.slider.trackColor;var a=this.meshBuilder,l=a.rectProps.defaults();l.origin.set_y2kzbl$(this.slider.knobPosition.x-e,n,b_(this.slider,.1)),l.size.set_dleff0$(this.slider.trackWidth-this.slider.knobPosition.x+i+e,e),l.cornerRadius=e/2,l.cornerSteps=4,l.zeroTexCoords(),a.rect_e5k3t5$(a.rectProps)}this.meshBuilder.color=this.slider.knobColor.apply();var u=this.meshBuilder,p=u.circleProps.defaults();p.center.set_y2kzbl$(this.slider.knobPosition.x,this.slider.knobPosition.y,b_(this.slider,.2)),p.radius=this.slider.knobSize,p.steps=30,u.circle_59f34t$(u.circleProps)},I_.prototype.onRender_aemszp$=function(t){this.baseUi.onRender_aemszp$(t)},I_.$metadata$={kind:$,simpleName:"SliderUi",interfaces:[Jf]},L_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newTextFieldUi_p39bdq$(this)},L_.$metadata$={kind:$,simpleName:"TextField",interfaces:[r_]},D_.prototype.onRender_aemszp$=function(t){this.textField.requestUiUpdate(),o_.prototype.onRender_aemszp$.call(this,t)},D_.prototype.renderText_aemszp$=function(t){var e,i,n,r,o,s,a,l=this.label.padding.left.toUnits_dleff0$(this.label.width,this.label.dpi),u=this.label.width-this.label.padding.right.toUnits_dleff0$(this.label.width,this.label.dpi),p=this.textBaseline-.2*(null!=(r=null!=(n=null!=(i=null!=(e=this.font)?e.charMap:null)?i.fontProps:null)?n.sizePts:null)?r:0),c={v:this.textStartX},h={v:this.textStartX};if(this.textField.editText.caretPosition>0||this.textField.editText.selectionStart>0){var d=this.textField.editText.caretPosition,f=this.textField.editText.selectionStart;o=A.max(d,f)-1|0;for(var _=0;_<=o;_++){var m=null!=(a=null!=(s=this.font)?s.charWidth_s8itvh$(O(this.textField.editText.get_za3lpa$(_))):null)?a:0;_<this.textField.editText.caretPosition&&(c.v+=m),_<this.textField.editText.selectionStart&&(h.v+=m)}}c.v!==this.caretDrawPos_hkh11t$_0.to&&(this.caretDrawPos_hkh11t$_0.from=this.caretDrawPos_hkh11t$_0.value,this.caretDrawPos_hkh11t$_0.to=c.v,this.caretPosAnimator_3ucebe$_0.progress=0,this.caretPosAnimator_3ucebe$_0.speed=1),c.v=this.caretPosAnimator_3ucebe$_0.tick_aemszp$(t);var $,y,v,g,b=this.meshBuilder;if(b.transform.push(),b.translate_y2kzbl$(0,0,b_(this.label,.1)),this.meshBuilder.color=this.label.root.theme.accentColor,this.meshBuilder.line_s2l86p$(l,p,u,p,b_(this.label,1.5)),this.textField.editText.selectionStart!==this.textField.editText.caretPosition){this.caretColor_qpd03i$_0.set_czzhhz$(this.label.root.theme.accentColor),this.caretColor_qpd03i$_0.a=.4,this.meshBuilder.color=this.caretColor_qpd03i$_0;var x,w,z,k,S=this.meshBuilder,C=S.rectProps.defaults();C.origin.set_y2kzbl$(c.v,p,0),C.size.set_dleff0$(h.v-c.v,1.2*(null!=(k=null!=(z=null!=(w=null!=(x=this.font)?x.charMap:null)?w.fontProps:null)?z.sizePts:null)?k:0)),C.zeroTexCoords(),S.rect_e5k3t5$(S.rectProps)}this.caretColor_qpd03i$_0.set_czzhhz$(this.label.root.theme.accentColor),this.caretColor_qpd03i$_0.a=this.caretAlphaAnimator_mmbcs$_0.tick_aemszp$(t),this.meshBuilder.color=this.caretColor_qpd03i$_0,this.meshBuilder.line_s2l86p$(c.v,p,c.v,this.textBaseline+(null!=(g=null!=(v=null!=(y=null!=($=this.font)?$.charMap:null)?y.fontProps:null)?v.sizePts:null)?g:0),b_(this.label,1.5)),b.transform.pop(),o_.prototype.renderText_aemszp$.call(this,t)},D_.$metadata$={kind:$,simpleName:"TextFieldUi",interfaces:[o_]},Object.defineProperty(q_.prototype,"text",{configurable:!0,get:function(){return this.text_x0rs8x$_0},set:function(t){this.caretPosition>t.length&&(this.caretPosition=t.length),this.selectionStart>t.length&&(this.selectionStart=t.length),this.text_x0rs8x$_0=t}}),Object.defineProperty(q_.prototype,"caretPosition",{configurable:!0,get:function(){return this.caretPosition_lco9r8$_0},set:function(t){var e,i=this.text.length;e=t<0?0:t>i?i:t,this.caretPosition_lco9r8$_0=e}}),Object.defineProperty(q_.prototype,"selectionStart",{configurable:!0,get:function(){return this.selectionStart_trwhxy$_0},set:function(t){var e,i=this.text.length;e=t<0?0:t>i?i:t,this.selectionStart_trwhxy$_0=e}}),q_.prototype.charTyped_s8itvh$=function(t){this.replaceSelection_61zpoe$(String.fromCharCode(t))},q_.prototype.moveCaret_fzusl$=function(t,e){switch(t){case 1:this.caretPosition=this.caretPosition-1|0;break;case 2:this.caretPosition=this.caretPosition+1|0;break;case 5:this.caretPosition=0;break;case 6:this.caretPosition=this.text.length;break;case 3:this.moveWordLeft_0();break;case 4:this.moveWordRight_0()}e||(this.selectionStart=this.caretPosition)},q_.prototype.moveWordLeft_0=function(){if(this.caretPosition>0){var t=this.text,e=this.caretPosition,i=Wt(t.substring(0,e),32);this.caretPosition=i<0?0:i}},q_.prototype.moveWordRight_0=function(){if(this.caretPosition<this.text.length){var t=d(this.text,32,this.caretPosition);this.caretPosition=t<0?this.text.length:t+1|0}},q_.prototype.backspace=function(){if(this.selectionStart!==this.caretPosition)this.replaceSelection_61zpoe$("");else if(this.caretPosition>0){this.selectionStart=(this.caretPosition=this.caretPosition-1|0,this.caretPosition);var t=this.text,e=this.caretPosition,i=t.substring(0,e),n=this.text,r=this.caretPosition+1|0;this.text=i+n.substring(r)}},q_.prototype.deleteSelection=function(){if(this.selectionStart!==this.caretPosition)this.replaceSelection_61zpoe$("");else if(this.caretPosition<this.text.length){var t=this.text,e=this.caretPosition,i=t.substring(0,e),n=this.text,r=this.caretPosition+1|0;this.text=i+n.substring(r)}},q_.prototype.replaceSelection_61zpoe$=function(t){var e=this.selectionStart,i=this.caretPosition,n=A.min(e,i),r=this.selectionStart,o=this.caretPosition,s=A.max(r,o);this.text=this.text.substring(0,n)+t+this.text.substring(s);var a=this.selectionStart,l=this.caretPosition;this.caretPosition=A.min(a,l)+t.length|0,this.selectionStart=this.caretPosition},q_.prototype.get_za3lpa$=function(t){return E(this.text.charCodeAt(t))},q_.prototype.toString=function(){return this.text},B_.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var F_=null;function U_(){return null===F_&&new B_,F_}function V_(t,e,i){void 0===i&&(i=!1),Yf.call(this,t,e),this.onStateChange=M(),this.knobColorOn=V$().WHITE,this.knobColorOff=V$().LIGHT_GRAY,this.trackColorOff=V$().GRAY,this.trackColorOn=V$().LIGHT_GRAY,this.isEnabled_gffhto$_0=i,this.textAlignment=new N_(T_(),O_())}function G_(t,e){var i;Zf.call(this,t,e),this.tb=t,this.knobAnimator=new Qm(new e$(0,1)),this.knobColor=H$(),this.trackColor=H$(),this.stateChangedListener=(i=this,function(t){return t.isEnabled?i.knobAnimator.speed=1:i.knobAnimator.speed=-1,s})}function H_(t,e){Od.call(this,t),this.root=e,this.componentBounds=new O$,this.drawBounds=new O$,this.layoutSpec=new s_,this.padding_iyk9nn$_0=new C_(m_(16),m_(16),m_(16),m_(16)),this.ui=new ym(new Qf),this.alpha_e9jtsg$_0=1,this.isThemeUpdate_yv706e$_0=!0,this.isUiUpdate_l4k16n$_0=!0,this.onHoverEnter.add_11rb$(W_),this.onHoverExit.add_11rb$(K_),this.onHover.add_11rb$(X_)}function W_(t,i,n,r){var o,a,l=e.isType(o=t.parent,H_)?o:null;if(null!=l){a=l.onHoverEnter;for(var u=0;u!==a.size;++u)l.onHoverEnter.get_za3lpa$(u)(l,i,n,r)}return s}function K_(t,i,n,r){var o,a,l=e.isType(o=t.parent,H_)?o:null;if(null!=l){a=l.onHoverExit;for(var u=0;u!==a.size;++u)l.onHoverExit.get_za3lpa$(u)(l,i,n,r)}return s}function X_(t,i,n,r){var o,a,l=e.isType(o=t.parent,H_)?o:null;if(null!=l){a=l.onHover;for(var u=0;u!==a.size;++u)l.onHover.get_za3lpa$(u)(l,i,n,r)}return s}function Y_(t,e){H_.call(this,t,e),this.posInParent=Mr(),this.contentScale=1,this.customTransform=Z_,this.scrollOffsetMut=Mr(),this.isScrollDirty=!0,this.childComponents_65igag$_0=M(),this.scrollHandler_xer21f$_0=null,this.tmpChildBounds_j2uogg$_0=new O$,this.tmpVec1_md9h9y$_0=Mr(),this.tmpVec2_md9hat$_0=Mr()}function Z_(t){return s}function J_(t,e,i,n,r,o){void 0===r&&(r=300);var s=new tm(t,r);return s.contentHeight=n,s.globalWidth=e,s.globalHeight=i,o(s),s}function Q_(t,e,i,n){void 0===t&&(t=96),void 0===e&&(e=null),void 0===i&&(i=!0);var r,o,a=new zf(null!=e?e:"uiScene"),l=new zd;return l.isClipToViewport=!0,l.near=-1e3,l.far=1e3,a.camera=l,i&&(a.mainRenderPass.clearColor=null),a.unaryPlus_uv0sim$(J_(a,1,1,null,t,(r=n,o=a,function(t){return t.isFillViewport=!0,r(t,o),s}))),a}function tm(t,e,i){void 0===i&&(i="UiRoot"),ef.call(this,i),this.scene=t,this.uiDpi=e,this.globalWidth_rlfw80$_0=1,this.globalHeight_5sxs8p$_0=1,this.globalDepth_ijlk77$_0=1,this.isFillViewport_fr53nm$_0=!1,this.theme_208sxy$_0=hm().DARK,this.content=new Y_(i+"-content",this),this.contentHeight_17xsyl$_0=null,this.isLayoutNeeded_0=!0,this.content.parent=this,this.content.layoutSpec.setSize_4ujscr$($_(100),$_(100),$_(100))}function em(t){rm(),void 0===t&&(t=new ch(V$().WHITE)),sc.call(this,rm().uiShaderModel_0()),this.uAlpha_0=null,this.uFontSampler_0=null,this.alpha_dkua5e$_0=1,this.font_1rx0e3$_0=t}function im(){nm=this,this.UI_MESH_ATTRIBS=At([ds().POSITIONS,ds().TEXTURE_COORDS,ds().COLORS]),this.U_ALPHA_0="uAlpha",this.U_FONT_TEX_0="uFontTex"}q_.$metadata$={kind:$,simpleName:"EditableText",interfaces:[]},Object.defineProperty(V_.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_gffhto$_0},set:function(t){t!==this.isEnabled_gffhto$_0&&(this.isEnabled_gffhto$_0=t,this.fireStateChanged())}}),V_.prototype.fireStateChanged=function(){var t;t=this.onStateChange;for(var e=0;e!==t.size;++e)this.onStateChange.get_za3lpa$(e)(this)},V_.prototype.fireOnClick_kjsf19$=function(t,e,i){this.isEnabled=!this.isEnabled,Yf.prototype.fireOnClick_kjsf19$.call(this,t,e,i)},V_.prototype.setThemeProps_aemszp$=function(t){Yf.prototype.setThemeProps_aemszp$.call(this,t),this.knobColorOn=this.root.theme.accentColor,this.trackColorOn=H$().add_m79ulu$(this.root.theme.accentColor,.4)},V_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newToggleButtonUi_r83hfv$(this)},V_.$metadata$={kind:$,simpleName:"ToggleButton",interfaces:[Yf]},G_.prototype.createUi_aemszp$=function(t){var e,i,n;Zf.prototype.createUi_aemszp$.call(this,t),this.knobAnimator.speed=0,this.knobAnimator.duration=.15,i=this.knobAnimator.value,e=this.tb.isEnabled?1:0,i.value=e,this.knobAnimator.value.onUpdate=(n=this,function(t){return n.tb.requestUiUpdate(),s});var r=this.tb.onStateChange,o=this.stateChangedListener;r.add_11rb$(o)},G_.prototype.dispose_aemszp$=function(t){Zf.prototype.dispose_aemszp$.call(this,t);var e=this.tb.onStateChange,i=this.stateChangedListener;e.remove_11rb$(i)},G_.prototype.updateUi_aemszp$=function(t){Zf.prototype.updateUi_aemszp$.call(this,t);var e=this.tb.padding.right.toUnits_dleff0$(this.tb.width,this.tb.dpi),i=b_(this.tb,24),n=b_(this.tb,6),r=b_(this.tb,10),o=this.tb.width-e-i-r,s=(this.tb.height-n)/2,a=this.knobAnimator.value.value;this.trackColor.clear(),this.trackColor.add_m79ulu$(this.tb.trackColorOff,1-a),this.trackColor.add_m79ulu$(this.tb.trackColorOn,a),this.meshBuilder.color=this.trackColor;var l=this.meshBuilder,u=l.rectProps.defaults();u.origin.set_y2kzbl$(o,s,b_(this.tb,.1)),u.size.set_dleff0$(i,n),u.cornerRadius=n/2,u.cornerSteps=4,u.zeroTexCoords(),l.rect_e5k3t5$(l.rectProps),this.knobColor.clear(),this.knobColor.add_m79ulu$(this.tb.knobColorOff,1-a),this.knobColor.add_m79ulu$(this.tb.knobColorOn,a),this.meshBuilder.color=this.knobColor;var p=this.meshBuilder,c=p.circleProps.defaults();c.center.set_y2kzbl$(o+i*a,s+n/2,b_(this.tb,.2)),c.radius=r,c.steps=30,p.circle_59f34t$(p.circleProps)},G_.prototype.onRender_aemszp$=function(t){Zf.prototype.onRender_aemszp$.call(this,t),this.knobAnimator.tick_aemszp$(t)},G_.$metadata$={kind:$,simpleName:"ToggleButtonUi",interfaces:[Zf]},Object.defineProperty(H_.prototype,"posX",{configurable:!0,get:function(){return this.componentBounds.min.x}}),Object.defineProperty(H_.prototype,"posY",{configurable:!0,get:function(){return this.componentBounds.min.y}}),Object.defineProperty(H_.prototype,"posZ",{configurable:!0,get:function(){return this.componentBounds.min.z}}),Object.defineProperty(H_.prototype,"width",{configurable:!0,get:function(){return this.componentBounds.size.x}}),Object.defineProperty(H_.prototype,"height",{configurable:!0,get:function(){return this.componentBounds.size.y}}),Object.defineProperty(H_.prototype,"depth",{configurable:!0,get:function(){return this.componentBounds.size.z}}),Object.defineProperty(H_.prototype,"padding",{configurable:!0,get:function(){return this.padding_iyk9nn$_0},set:function(t){var e;null!=(e=this.padding_iyk9nn$_0)&&e.equals(t)||(this.padding_iyk9nn$_0=t,this.isUiUpdate_l4k16n$_0=!0)}}),Object.defineProperty(H_.prototype,"alpha",{configurable:!0,get:function(){return this.alpha_e9jtsg$_0},set:function(t){this.alpha_e9jtsg$_0!==t&&(this.alpha_e9jtsg$_0=t,this.updateComponentAlpha())}}),Object.defineProperty(H_.prototype,"dpi",{configurable:!0,get:function(){return this.root.uiDpi}}),H_.prototype.addNode_xtids1$$default=function(t,i){this.addNode_xtids1$(t,i,Od.prototype.addNode_xtids1$$default.bind(this)),e.isType(t,H_)&&(t.alpha=this.alpha)},H_.prototype.setupBuilder_84rojv$=function(t){t.clear(),t.identity(),t.translate_czzhiu$(this.componentBounds.min)},H_.prototype.requestThemeUpdate=function(){this.isThemeUpdate_yv706e$_0=!0},H_.prototype.requestUiUpdate=function(){this.isUiUpdate_l4k16n$_0=!0},H_.prototype.updateComponentAlpha=function(){this.ui.prop.updateComponentAlpha()},H_.prototype.updateUi_aemszp$=function(t){this.ui.prop.updateUi_aemszp$(t)},H_.prototype.updateTheme_aemszp$=function(t){this.ui.prop.dispose_aemszp$(t),this.ui.setTheme_11rb$(this.createThemeUi_aemszp$(t)).apply(),this.setThemeProps_aemszp$(t),this.ui.prop.createUi_aemszp$(t),this.ui.prop.updateComponentAlpha(),this.requestUiUpdate()},H_.prototype.updateComponent_aemszp$=function(t){var i,n;if(this.isThemeUpdate_yv706e$_0&&(this.isThemeUpdate_yv706e$_0=!1,this.updateTheme_aemszp$(t)),this.isUiUpdate_l4k16n$_0)for(this.isUiUpdate_l4k16n$_0=!1,this.updateUi_aemszp$(t),this.isFrustumChecked=this.root.isFrustumChecked,n=this.children.iterator();n.hasNext();)n.next().isFrustumChecked=this.root.isFrustumChecked;this.setDrawBoundsFromWrappedComponentBounds_hf6scw$(e.isType(i=this.parent,Y_)?i:null,t)},H_.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){if(null!=t){var i=this.componentBounds.min.x,n=t.drawBounds.min.x,r=A.max(i,n),o=this.componentBounds.min.y,s=t.drawBounds.min.y,a=A.max(o,s),l=this.componentBounds.min.z,u=t.drawBounds.min.z,p=A.max(l,u),c=this.componentBounds.max.x,h=t.drawBounds.max.x,d=A.min(c,h),f=this.componentBounds.max.y,_=t.drawBounds.max.y,m=A.min(f,_),$=this.componentBounds.max.z,y=t.drawBounds.max.z,v=A.min($,y);r>=d||a>=m||p>=v?this.drawBounds.clear():this.drawBounds.set_w8lrqs$(r,a,p,d,m,v)}else this.drawBounds.set_ea4od8$(this.componentBounds);this.bounds.set_ea4od8$(this.drawBounds)},H_.prototype.setLocalBounds=function(){this.bounds.set_ea4od8$(this.drawBounds)},H_.prototype.setThemeProps_aemszp$=function(t){},H_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.componentUi(this)},H_.prototype.collectDrawCommands_kma0q5$=function(t){this.isVisible&&this.alpha>0&&!this.bounds.isEmpty&&(this.ui.prop.onRender_aemszp$(t.ctx),Od.prototype.collectDrawCommands_kma0q5$.call(this,t))},H_.prototype.doLayout_sq5703$=function(t,i){var n;this.componentBounds.isFuzzyEqual_ea4od8$(t)||(this.componentBounds.set_ea4od8$(t),this.requestUiUpdate()),this.setDrawBoundsFromWrappedComponentBounds_hf6scw$(e.isType(n=this.parent,Y_)?n:null,i)},H_.prototype.rayTest_jljx4v$=function(t){if(0!==this.alpha){var i=t.hitNode;Od.prototype.rayTest_jljx4v$.call(this,t),i===t.hitNode||e.isType(t.hitNode,H_)||t.setHit_ulhqnp$(this,t.hitPosition)}},H_.prototype.computeLocalPickRay_wswg9$=function(t,e,i){var n=this.root.scene.computeRay_wswg9$(t,e,i);return n&&(this.toLocalCoords_w1lst9$(i.origin),this.toLocalCoords_w1lst9$(i.direction,0).norm()),n},H_.$metadata$={kind:$,simpleName:"UiComponent",interfaces:[Od]},Object.defineProperty(Y_.prototype,"contentBounds",{configurable:!0,get:function(){return this.childrenBounds}}),Object.defineProperty(Y_.prototype,"scrollOffset",{configurable:!0,get:function(){return this.scrollOffsetMut}}),Y_.prototype.updateTheme_aemszp$=function(t){var e;H_.prototype.updateTheme_aemszp$.call(this,t),e=this.childComponents_65igag$_0;for(var i=0;i!==e.size;++i)this.childComponents_65igag$_0.get_za3lpa$(i).requestThemeUpdate()},Y_.prototype.updateComponentAlpha=function(){var t;H_.prototype.updateComponentAlpha.call(this),t=this.childComponents_65igag$_0;for(var e=0;e!==t.size;++e)this.childComponents_65igag$_0.get_za3lpa$(e).alpha=this.alpha},Y_.prototype.updateComponent_aemszp$=function(t){var e,i;this.isScrollDirty&&(this.isScrollDirty=!1,null!=(e=this.scrollHandler_xer21f$_0)&&e.requestUiUpdate(),this.updateTransform()),H_.prototype.updateComponent_aemszp$.call(this,t),i=this.childComponents_65igag$_0;for(var n=0;n!==i.size;++n)this.childComponents_65igag$_0.get_za3lpa$(n).updateComponent_aemszp$(t)},Y_.prototype.doLayout_sq5703$=function(t,e){var i;this.applyBounds_sq5703$(t,e),this.contentBounds.clear(),i=this.childComponents_65igag$_0;for(var n=0;n!==i.size;++n){var r=this.childComponents_65igag$_0.get_za3lpa$(n);this.computeChildLayoutBounds_q1axsv$(this.tmpChildBounds_j2uogg$_0,r,e),this.contentBounds.add_ea4od8$(this.tmpChildBounds_j2uogg$_0),r.doLayout_sq5703$(this.tmpChildBounds_j2uogg$_0,e)}},Y_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.containerUi(this)},Y_.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){H_.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$.call(this,t,e),this.drawBounds.isEmpty?this.bounds.clear():(this.drawBounds.move_czzhiu$(this.scrollOffset),this.syncNodeBounds_aemszp$(e))},Y_.prototype.setLocalBounds=function(){var t;this.childrenBounds.clear(),t=this.childComponents_65igag$_0;for(var e=0;e!==t.size;++e)this.childrenBounds.add_ea4od8$(this.childComponents_65igag$_0.get_za3lpa$(e).componentBounds);this.bounds.set_ea4od8$(this.childrenBounds)},Y_.prototype.applyBounds_sq5703$=function(t,e){t.size.isFuzzyEqual_2qa7tb$(this.componentBounds.size)&&t.min.isFuzzyEqual_2qa7tb$(this.posInParent)||(this.posInParent.set_czzhiu$(t.min),this.updateTransform(),this.componentBounds.set_4lfkt4$(Er().ZERO,t.size),this.drawBounds.set_ea4od8$(this.componentBounds),this.syncNodeBounds_aemszp$(e),this.requestUiUpdate())},Y_.prototype.syncNodeBounds_aemszp$=function(t){var e,i,n,r,o,s;this.tmpVec1_md9h9y$_0.set_czzhiu$(this.drawBounds.min),this.tmpVec2_md9hat$_0.set_czzhiu$(this.drawBounds.max),this.transform.transform_w1lst9$(this.tmpVec1_md9h9y$_0),this.transform.transform_w1lst9$(this.tmpVec2_md9hat$_0),this.tmpVec1_md9h9y$_0.x<this.tmpVec2_md9hat$_0.x?(e=this.tmpVec1_md9h9y$_0.x,i=this.tmpVec2_md9hat$_0.x):(e=this.tmpVec2_md9hat$_0.x,i=this.tmpVec2_md9hat$_0.x),this.tmpVec1_md9h9y$_0.y<this.tmpVec2_md9hat$_0.y?(n=this.tmpVec1_md9h9y$_0.y,r=this.tmpVec2_md9hat$_0.y):(n=this.tmpVec2_md9hat$_0.y,r=this.tmpVec1_md9h9y$_0.y),this.tmpVec1_md9h9y$_0.z<this.tmpVec2_md9hat$_0.z?(o=this.tmpVec1_md9h9y$_0.z,s=this.tmpVec2_md9hat$_0.z):(o=this.tmpVec2_md9hat$_0.z,s=this.tmpVec1_md9h9y$_0.z),this.bounds.set_w8lrqs$(e,n,o,i,r,s)},Y_.prototype.updateTransform=function(){this.customTransform(this.setIdentity().scale_y2kzbl$(this.contentScale,this.contentScale,this.contentScale).translate_czzhiu$(this.posInParent).translate_y2kzbl$(-this.scrollOffsetMut.x,-this.scrollOffsetMut.y,-this.scrollOffsetMut.z))},Y_.prototype.computeChildLayoutBounds_q1axsv$=function(t,e,i){var n=e.layoutSpec.x.toUnits_dleff0$(this.componentBounds.size.x,this.dpi),r=e.layoutSpec.y.toUnits_dleff0$(this.componentBounds.size.y,this.dpi),o=e.layoutSpec.z.toUnits_dleff0$(this.componentBounds.size.z,this.dpi),s=e.layoutSpec.width.toUnits_dleff0$(this.componentBounds.size.x,this.dpi),a=e.layoutSpec.height.toUnits_dleff0$(this.componentBounds.size.y,this.dpi),l=e.layoutSpec.depth.toUnits_dleff0$(this.componentBounds.size.z,this.dpi);n<0&&(n+=this.width),r<0&&(r+=this.height),o<0&&(o+=this.depth),t.set_w8lrqs$(n,r,o,n+s,r+a,o+l)},Y_.prototype.setScrollOffset_czzhiu$=function(t){this.setScrollOffset_y2kzbl$(t.x,t.y,t.z)},Y_.prototype.setScrollOffset_y2kzbl$=function(t,e,i){t===this.scrollOffsetMut.x&&e===this.scrollOffsetMut.y&&i===this.scrollOffsetMut.z||(this.scrollOffsetMut.set_y2kzbl$(t,e,i),this.isScrollDirty=!0)},Y_.prototype.requestUpdateTransform=function(){this.isScrollDirty=!0},Y_.prototype.addNode_xtids1$$default=function(t,i){var n=!this.children.isEmpty()&&i<0&&e.isType(B(this.children),j_)?bt(this.children):i;this.addNode_xtids1$(t,n,H_.prototype.addNode_xtids1$$default.bind(this)),e.isType(t,H_)&&(this.childComponents_65igag$_0.add_11rb$(t),e.isType(t,j_)&&(this.scrollHandler_xer21f$_0=t))},Y_.prototype.removeNode_f1kmr1$=function(t){return e.isType(t,H_)&&(this.childComponents_65igag$_0.remove_11rb$(t),zt(t,this.scrollHandler_xer21f$_0)&&(this.scrollHandler_xer21f$_0=null)),H_.prototype.removeNode_f1kmr1$.call(this,t)},Y_.prototype.removeAllChildren=function(){H_.prototype.removeAllChildren.call(this),this.childComponents_65igag$_0.clear(),this.scrollHandler_xer21f$_0=null},Y_.$metadata$={kind:$,simpleName:"UiContainer",interfaces:[H_]},Object.defineProperty(tm.prototype,"globalWidth",{configurable:!0,get:function(){return this.globalWidth_rlfw80$_0},set:function(t){t!==this.globalWidth_rlfw80$_0&&(this.globalWidth_rlfw80$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(tm.prototype,"globalHeight",{configurable:!0,get:function(){return this.globalHeight_5sxs8p$_0},set:function(t){t!==this.globalHeight_5sxs8p$_0&&(this.globalHeight_5sxs8p$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(tm.prototype,"globalDepth",{configurable:!0,get:function(){return this.globalDepth_ijlk77$_0},set:function(t){t!==this.globalDepth_ijlk77$_0&&(this.globalDepth_ijlk77$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(tm.prototype,"isFillViewport",{configurable:!0,get:function(){return this.isFillViewport_fr53nm$_0},set:function(t){t!==this.isFillViewport_fr53nm$_0&&(this.isFillViewport_fr53nm$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(tm.prototype,"theme",{configurable:!0,get:function(){return this.theme_208sxy$_0},set:function(t){zt(t,this.theme_208sxy$_0)||(this.theme_208sxy$_0=t,this.content.requestThemeUpdate())}}),Object.defineProperty(tm.prototype,"contentHeight",{configurable:!0,get:function(){return this.contentHeight_17xsyl$_0},set:function(t){this.contentHeight_17xsyl$_0=t,this.isLayoutNeeded_0=!0}}),Object.defineProperty(tm.prototype,"bounds",{configurable:!0,get:function(){return this.content.bounds}}),tm.prototype.setGlobalSize_y2kzbl$=function(t,e,i){this.isFillViewport=!1,this.globalWidth=t,this.globalHeight=e,this.globalDepth=i},tm.prototype.requestLayout=function(){this.isLayoutNeeded_0=!0},tm.prototype.update_kma0q5$=function(t){var e=this.scene.mainRenderPass.viewport;if(!this.isFillViewport||this.globalWidth===e.width&&this.globalHeight===e.height||(this.globalWidth=e.width,this.globalHeight=e.height),this.isLayoutNeeded_0){this.isLayoutNeeded_0=!1;var i=1,n=this.contentHeight;null!=n&&(i=1/(n.toUnits_dleff0$(this.globalHeight,this.uiDpi)/this.globalHeight));var r=(new O$).set_w8lrqs$(0,0,0,this.globalWidth/i,this.globalHeight/i,this.globalDepth/i);this.content.contentScale=i,this.content.doLayout_sq5703$(r,t.ctx)}this.content.update_kma0q5$(t),ef.prototype.update_kma0q5$.call(this,t),this.content.updateComponent_aemszp$(t.ctx)},tm.prototype.collectDrawCommands_kma0q5$=function(t){ef.prototype.collectDrawCommands_kma0q5$.call(this,t),this.content.collectDrawCommands_kma0q5$(t)},tm.prototype.dispose_aemszp$=function(t){ef.prototype.dispose_aemszp$.call(this,t),this.content.dispose_aemszp$(t)},tm.prototype.rayTest_jljx4v$=function(t){ef.prototype.rayTest_jljx4v$.call(this,t),this.content.rayTest_jljx4v$(t)},tm.prototype.unaryPlus_uv0sim$=function(t){this.content.addNode_xtids1$(t)},tm.prototype.unaryPlus_63m4fk$=function(t){this.content.addNode_xtids1$(t),this.content.addNode_xtids1$(t.menuButton_8be2vx$)},tm.prototype.component_qphi6d$=function(t,e){var i=new H_(t,this);return e(i),i},tm.prototype.container_t34sov$=function(t,e){var i=new Y_(t,this);return e(i),i},tm.prototype.drawerMenu_enmky4$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=m_(250,!0));var r=new i_(i,e,t,this);return n(r),r},tm.prototype.button_9zrh0o$=function(t,e){var i=new Yf(t,this);return e(i),i},tm.prototype.label_tokfmu$=function(t,e){var i=new r_(t,this);return e(i),i},tm.prototype.slider_87iqh3$=function(t,e){return this.slider_91a1dk$(t,0,100,50,e)},tm.prototype.slider_91a1dk$=function(t,e,i,n,r){var o=new R_(t,e,i,n,this);return r(o),o},tm.prototype.textField_peizi7$=function(t,e){var i=new L_(t,this);return e(i),i},tm.prototype.toggleButton_6j87po$=function(t,e){var i=new V_(t,this);return e(i),i},tm.$metadata$={kind:$,simpleName:"UiRoot",interfaces:[ef]},Object.defineProperty(em.prototype,"alpha",{configurable:!0,get:function(){return this.alpha_dkua5e$_0},set:function(t){var e,i;this.alpha_dkua5e$_0=t,null!=(i=null!=(e=this.uAlpha_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(em.prototype,"font",{configurable:!0,get:function(){return this.font_1rx0e3$_0},set:function(t){var e;this.font_1rx0e3$_0=t,null!=(e=this.uFontSampler_0)&&(e.texture=t)}}),em.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.blendMode=al(),t.cullMethod=zl(),t.depthTest=fl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},em.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p=this.model,h=rm().U_ALPHA_0;t:do{var d;for(l=Fp.ALL,d=p.stages.values.iterator();d.hasNext();){var f=d.next();if(0!=(f.stage.mask&l.mask)){var _,m,$=f.nodes;e:do{var y;for(y=$.iterator();y.hasNext();){var v=y.next();if(zt(v.name,h)&&e.isType(v,dp)){m=v;break e}}m=null}while(0);var g=null==(_=m)||e.isType(_,dp)?_:c();if(null!=g){u=g;break t}}}u=null}while(0);this.uAlpha_0=u,null!=(o=null!=(r=this.uAlpha_0)?r.uniform:null)&&(o.value=this.alpha);var b,x,w=this.model,z=rm().U_FONT_TEX_0;t:do{var k;for(b=Fp.ALL,k=w.stages.values.iterator();k.hasNext();){var S=k.next();if(0!=(S.stage.mask&b.mask)){var C,N,E=S.nodes;e:do{var P;for(P=E.iterator();P.hasNext();){var T=P.next();if(zt(T.name,z)&&e.isType(T,up)){N=T;break e}}N=null}while(0);var O=null==(C=N)||e.isType(C,up)?C:c();if(null!=O){x=O;break t}}}x=null}while(0);this.uFontSampler_0=null!=(s=x)?s.sampler:null,null!=(a=this.uFontSampler_0)&&(a.texture=this.font),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},im.prototype.uiShaderModel_0=function(){var t=new Ru("UI Shader"),e={v:null},i={v:null},n=new Lu(t);e.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),i.v=n.stageInterfaceNode_iikjwn$("ifColors",n.attrColors().output),n.positionOutput=n.simpleVertexPositionNode().outVec4;var r=new Du(t),o=r.pushConstantNode1f_61zpoe$(this.U_ALPHA_0),s=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$(this.U_FONT_TEX_0),e.v.output),a=r.multiplyNode_ze33is$(s.outColor,o.output),l=r.colorAlphaNode_ze33is$(i.v.output,a.output);return r.colorOutput_a3v4si$(r.unlitMaterialNode_r20yfm$(l.outAlphaColor).outColor),t},im.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var nm=null;function rm(){return null===nm&&new im,nm}function om(){hm(),this.backgroundColor_yt8dmb$_0=V$().BLACK,this.foregroundColor_sxfy5a$_0=V$().WHITE,this.accentColor_2rzgrt$_0=V$().LIME,this.standardFontProps_v4eg6a$_0=new mv(gv().SYSTEM_FONT,20),this.titleFontProps_idgbxl$_0=new mv(gv().SYSTEM_FONT,28),this.componentUi_rare29$_0=Kt("BlurredComponentUi",(function(t){return new e_(t)})),this.containerUi_233tf$_0=dm,this.buttonUi_667cek$_0=Kt("ButtonUi",(function(t,e){return new Zf(t,e)})),this.labelUi_9aobqe$_0=Kt("LabelUi",(function(t,e){return new o_(t,e)})),this.scrollHandlerUi_k8xkq9$_0=Kt("ScrollHandlerUi",(function(t){return new A_(t)})),this.sliderUi_76d1mr$_0=Kt("SliderUi",(function(t,e){return new I_(t,e)})),this.textFieldUi_fr4mch$_0=Kt("TextFieldUi",(function(t,e){return new D_(t,e)})),this.toggleButtonUi_2tk5m0$_0=Kt("ToggleButtonUi",(function(t,e){return new G_(t,e)}))}function sm(){cm=this,this.DARK=mm(void 0,am),this.DARK_SIMPLE=mm(this.DARK,lm),this.LIGHT=mm(void 0,um),this.LIGHT_SIMPLE=mm(this.LIGHT,pm)}function am(t){return t.backgroundColor_d7aj7k$(V$().fromHex_61zpoe$("00141980")),t.foregroundColor_d7aj7k$(V$().WHITE),t.accentColor_d7aj7k$(V$().LIME),s}function lm(t){return t.componentUi_mloaa0$(Kt("SimpleComponentUi",(function(t){return new t_(t)}))),s}function um(t){return t.backgroundColor_d7aj7k$(V$().WHITE.withAlpha_mx4ult$(.6)),t.foregroundColor_d7aj7k$(V$().MD_BLUE_GREY_900),t.accentColor_d7aj7k$(V$().MD_PINK),s}function pm(t){return t.componentUi_mloaa0$(Kt("SimpleComponentUi",(function(t){return new t_(t)}))),s}em.$metadata$={kind:$,simpleName:"UiShader",interfaces:[sc]},Object.defineProperty(om.prototype,"backgroundColor",{configurable:!0,get:function(){return this.backgroundColor_yt8dmb$_0},set:function(t){this.backgroundColor_yt8dmb$_0=t}}),Object.defineProperty(om.prototype,"foregroundColor",{configurable:!0,get:function(){return this.foregroundColor_sxfy5a$_0},set:function(t){this.foregroundColor_sxfy5a$_0=t}}),Object.defineProperty(om.prototype,"accentColor",{configurable:!0,get:function(){return this.accentColor_2rzgrt$_0},set:function(t){this.accentColor_2rzgrt$_0=t}}),om.prototype.standardFont_oei9ky$=function(t,e){return _v(this.standardFontProps.family,this.standardFontProps.sizePts,t,e,this.standardFontProps.style,this.standardFontProps.chars)},Object.defineProperty(om.prototype,"standardFontProps",{configurable:!0,get:function(){return this.standardFontProps_v4eg6a$_0},set:function(t){this.standardFontProps_v4eg6a$_0=t}}),om.prototype.titleFont_oei9ky$=function(t,e){return _v(this.titleFontProps.family,this.titleFontProps.sizePts,t,e,this.titleFontProps.style,this.titleFontProps.chars)},Object.defineProperty(om.prototype,"titleFontProps",{configurable:!0,get:function(){return this.titleFontProps_idgbxl$_0},set:function(t){this.titleFontProps_idgbxl$_0=t}}),om.prototype.newComponentUi_gzmg0q$=function(t){return this.componentUi(t)},Object.defineProperty(om.prototype,"componentUi",{configurable:!0,get:function(){return this.componentUi_rare29$_0},set:function(t){this.componentUi_rare29$_0=t}}),om.prototype.newContainerUi_xcf31a$=function(t){return this.containerUi(t)},Object.defineProperty(om.prototype,"containerUi",{configurable:!0,get:function(){return this.containerUi_233tf$_0},set:function(t){this.containerUi_233tf$_0=t}}),om.prototype.newButtonUi_t4rm0v$=function(t){return this.buttonUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(om.prototype,"buttonUi",{configurable:!0,get:function(){return this.buttonUi_667cek$_0},set:function(t){this.buttonUi_667cek$_0=t}}),om.prototype.newLabelUi_wviu0r$=function(t){return this.labelUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(om.prototype,"labelUi",{configurable:!0,get:function(){return this.labelUi_9aobqe$_0},set:function(t){this.labelUi_9aobqe$_0=t}}),om.prototype.newScrollHandlerUi_dz938y$=function(t){return this.scrollHandlerUi(t)},Object.defineProperty(om.prototype,"scrollHandlerUi",{configurable:!0,get:function(){return this.scrollHandlerUi_k8xkq9$_0},set:function(t){this.scrollHandlerUi_k8xkq9$_0=t}}),om.prototype.newSliderUi_l85jm8$=function(t){return this.sliderUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(om.prototype,"sliderUi",{configurable:!0,get:function(){return this.sliderUi_76d1mr$_0},set:function(t){this.sliderUi_76d1mr$_0=t}}),om.prototype.newTextFieldUi_p39bdq$=function(t){return this.textFieldUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(om.prototype,"textFieldUi",{configurable:!0,get:function(){return this.textFieldUi_fr4mch$_0},set:function(t){this.textFieldUi_fr4mch$_0=t}}),om.prototype.newToggleButtonUi_r83hfv$=function(t){return this.toggleButtonUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(om.prototype,"toggleButtonUi",{configurable:!0,get:function(){return this.toggleButtonUi_2tk5m0$_0},set:function(t){this.toggleButtonUi_2tk5m0$_0=t}}),sm.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var cm=null;function hm(){return null===cm&&new sm,cm}function dm(t){return new Qf}function fm(t,e){return t.root.theme.standardFont_oei9ky$(t.dpi,e)}function _m(t,e){return t.root.theme.titleFont_oei9ky$(t.dpi,e)}function mm(t,e){void 0===t&&(t=null);var i=new $m(t);return e(i),i}function $m(t){om.call(this),null!=t&&(this.backgroundColor=t.backgroundColor,this.foregroundColor=t.foregroundColor,this.accentColor=t.accentColor,this.standardFontProps=t.standardFontProps,this.titleFontProps=t.titleFontProps,this.componentUi=t.componentUi,this.containerUi=t.containerUi,this.buttonUi=t.buttonUi,this.labelUi=t.labelUi,this.scrollHandlerUi=t.scrollHandlerUi,this.sliderUi=t.sliderUi,this.textFieldUi=t.textFieldUi,this.toggleButtonUi=t.toggleButtonUi)}function ym(t){this.prop_5ushja$_0=t,this.themeVal_jacv1h$_0=t,this.isThemeSet_n9zltm$_0=!1,this.customVal_5f7u1l$_0=t,this.isCustom_s2c3c2$_0=!1}function vm(t){this.name=t,this.channels=M(),this.weight=1,this.speed=1,this.duration_dwtdbj$_0=1,this.animationNodes_0=M()}function gm(t,e){this.name=t,this.animationNode=e,this.keys=new fS,this.duration=0}function bm(t,e){gm.call(this,t,e)}function xm(t,e){gm.call(this,t,e)}function wm(t,e){gm.call(this,t,e)}function zm(t,e){gm.call(this,t,e)}function km(){}function Sm(t){this.target=t,this.initTranslation_0=Fr(),this.initRotation_0=po(),this.initScale_0=new Br(1,1,1),this.animTranslation_0=Fr(),this.animRotation_0=po(),this.animScale_0=Fr(),this.quatRotMat_0=new bn,this.weightedTransformMat_0=new bn;var e=po();this.target.transform.getCol_8irwu3$(3,e),this.initTranslation_0.set_yvo9jy$(e.x,e.y,e.z),this.target.transform.getRotation_5s4mpx$(this.initRotation_0);var i=this.target.transform.getCol_8irwu3$(0,e).length(),n=this.target.transform.getCol_8irwu3$(0,e).length(),r=this.target.transform.getCol_8irwu3$(0,e).length();this.initScale_0.set_yvo9jy$(i,n,r)}function Cm(t){this.target=t,this.weights_0=new Float32Array(1)}function Nm(t){this.time=t,this.interpolation=Mm()}function Em(t,e){P.call(this),this.name$=t,this.ordinal$=e}function Pm(){Pm=function(){},new Tm,new jm,new Im}function Tm(){Om=this,Em.call(this,"LINEAR",0)}om.$metadata$={kind:$,simpleName:"UiTheme",interfaces:[]},$m.prototype.backgroundColor_d7aj7k$=function(t){this.backgroundColor=t},$m.prototype.foregroundColor_d7aj7k$=function(t){this.foregroundColor=t},$m.prototype.accentColor_d7aj7k$=function(t){this.accentColor=t},$m.prototype.standardFont_ttufcy$=function(t){this.standardFontProps=t},$m.prototype.titleFont_ttufcy$=function(t){this.titleFontProps=t},$m.prototype.componentUi_mloaa0$=function(t){this.componentUi=t},$m.prototype.containerUi_2t3ptw$=function(t){this.containerUi=t},$m.prototype.buttonUi_layl6g$=function(t){this.buttonUi=t},$m.prototype.labelUi_zicoma$=function(t){this.labelUi=t},$m.prototype.scrollHandlerUi_4p1ygc$=function(t){this.scrollHandlerUi=t},$m.prototype.sliderUi_artm94$=function(t){this.sliderUi=t},$m.prototype.textFieldUi_5ax6ok$=function(t){this.textFieldUi=t},$m.prototype.toggleButtonUi_50ge0o$=function(t){this.toggleButtonUi=t},$m.$metadata$={kind:$,simpleName:"ThemeBuilder",interfaces:[om]},Object.defineProperty(ym.prototype,"prop",{configurable:!0,get:function(){return this.prop_5ushja$_0},set:function(t){this.prop_5ushja$_0=t}}),Object.defineProperty(ym.prototype,"themeVal",{configurable:!0,get:function(){return this.themeVal_jacv1h$_0},set:function(t){this.themeVal_jacv1h$_0=t}}),Object.defineProperty(ym.prototype,"isThemeSet",{configurable:!0,get:function(){return this.isThemeSet_n9zltm$_0},set:function(t){this.isThemeSet_n9zltm$_0=t}}),Object.defineProperty(ym.prototype,"customVal",{configurable:!0,get:function(){return this.customVal_5f7u1l$_0},set:function(t){this.customVal_5f7u1l$_0=t}}),Object.defineProperty(ym.prototype,"isCustom",{configurable:!0,get:function(){return this.isCustom_s2c3c2$_0},set:function(t){this.isCustom_s2c3c2$_0=t}}),Object.defineProperty(ym.prototype,"isUpdate",{configurable:!0,get:function(){return this.isCustom&&!zt(this.prop,this.customVal)||!this.isCustom&&this.isThemeSet&&!zt(this.prop,this.themeVal)}}),ym.prototype.setTheme_11rb$=function(t){return this.themeVal=t,this.isThemeSet=!0,this},ym.prototype.setCustom_11rb$=function(t){return this.customVal=t,this.isCustom=!0,this},ym.prototype.clearCustom=function(){this.isCustom=!1},ym.prototype.apply=function(){return this.isCustom?this.prop=this.customVal:this.isThemeSet&&(this.prop=this.themeVal),this.prop},ym.$metadata$={kind:$,simpleName:"ThemeOrCustomProp",interfaces:[]},Object.defineProperty(vm.prototype,"duration",{configurable:!0,get:function(){return this.duration_dwtdbj$_0},set:function(t){this.duration_dwtdbj$_0=t}}),vm.prototype.prepareAnimation=function(){var t,e,i,n=this.channels,r=w(j(n,10));for(e=n.iterator();e.hasNext();){var o=e.next();r.add_11rb$(o.lastKeyTime)}for(this.duration=null!=(t=Xt(r))?t:0,i=this.channels.iterator();i.hasNext();)i.next().duration=this.duration;var s,a=this.animationNodes_0,l=this.channels,u=w(j(l,10));for(s=l.iterator();s.hasNext();){var p=s.next();u.add_11rb$(p.animationNode)}xt(a,Yt(u))},vm.prototype.apply_8555vt$=function(t,e){var i,n,r,o;void 0===e&&(e=!0);var s=t*this.speed%this.duration;i=this.animationNodes_0;for(var a=0;a!==i.size;++a)this.animationNodes_0.get_za3lpa$(a).initTransform();n=this.channels;for(var l=0;l!==n.size;++l)this.channels.get_za3lpa$(l).apply_mx4ult$(s);if(1===this.weight){r=this.animationNodes_0;for(var u=0;u!==r.size;++u)this.animationNodes_0.get_za3lpa$(u).applyTransform()}else{o=this.animationNodes_0;for(var p=0;p!==o.size;++p)this.animationNodes_0.get_za3lpa$(p).applyTransformWeighted_8ca0d4$(this.weight,e)}},vm.prototype.printChannels=function(){var t;for(jt(Ct(this.name)+" channels:"),t=this.channels.iterator();t.hasNext();){var e=t.next();jt("  "+Ct(e.name)+" [node: "+Ct(e.animationNode.name)+"]"),e.printKeys_61zpoe$("    ")}},vm.$metadata$={kind:$,simpleName:"Animation",interfaces:[]},Object.defineProperty(gm.prototype,"lastKeyTime",{configurable:!0,get:function(){return this.keys.lastKey()}}),gm.prototype.apply_mx4ult$=function(t){var e=this.keys.floorValue_trkh7z$(t);if(null==e){var i,n=this.lastKeyTime,r=this.duration;i=PN.FUZZY_EQ_F;var o=n-r;e=A.abs(o)<=i?this.keys.lastValue():this.keys.firstValue()}e.apply_8kwor9$(t,this.keys.higherValue_trkh7z$(t),this.animationNode)},gm.prototype.printKeys_61zpoe$=function(t){var e;void 0===t&&(t="");var i=Zt(this.keys.values),n=i.size;e=A.min(5,n);for(var r=0;r<e;r++)jt(t+i.get_za3lpa$(r));i.size>5&&jt(t+"  ..."+(i.size-5|0)+" more")},gm.$metadata$={kind:$,simpleName:"AnimationChannel",interfaces:[]},bm.$metadata$={kind:$,simpleName:"TranslationAnimationChannel",interfaces:[gm]},xm.$metadata$={kind:$,simpleName:"RotationAnimationChannel",interfaces:[gm]},wm.$metadata$={kind:$,simpleName:"ScaleAnimationChannel",interfaces:[gm]},zm.$metadata$={kind:$,simpleName:"WeightAnimationChannel",interfaces:[gm]},km.prototype.initTransform=function(){},km.prototype.setTranslation_czzhiw$=function(t){},km.prototype.setRotation_czzhi1$=function(t){},km.prototype.setScale_czzhiw$=function(t){},km.prototype.setWeights_q3cr5i$=function(t){},km.$metadata$={kind:st,simpleName:"AnimationNode",interfaces:[]},Object.defineProperty(Sm.prototype,"name",{configurable:!0,get:function(){return this.target.name}}),Sm.prototype.initTransform=function(){this.animTranslation_0.set_czzhiw$(this.initTranslation_0),this.animRotation_0.set_czzhi1$(this.initRotation_0),this.animScale_0.set_czzhiw$(this.initScale_0)},Sm.prototype.applyTransform=function(){this.target.setIdentity(),this.target.translate_czzhiw$(this.animTranslation_0),this.target.mul_d4zu6l$(this.quatRotMat_0.setRotate_czzhi1$(this.animRotation_0)),this.target.scale_yvo9jy$(this.animScale_0.x,this.animScale_0.y,this.animScale_0.z)},Sm.prototype.applyTransformWeighted_8ca0d4$=function(t,e){if(this.weightedTransformMat_0.setIdentity(),this.weightedTransformMat_0.translate_czzhiw$(this.animTranslation_0),this.weightedTransformMat_0.mul_d4zu6l$(this.quatRotMat_0.setRotate_czzhi1$(this.animRotation_0)),this.weightedTransformMat_0.scale_yvo9jy$(this.animScale_0.x,this.animScale_0.y,this.animScale_0.z),e)for(var i=0;i<=15;i++)this.target.transform.matrix[i]=this.weightedTransformMat_0.matrix[i]*t;else for(var n=0;n<=15;n++)this.target.transform.matrix[n]=this.target.transform.matrix[n]+this.weightedTransformMat_0.matrix[n]*t;this.target.setDirty()},Sm.prototype.setTranslation_czzhiw$=function(t){this.animTranslation_0.set_czzhiw$(t)},Sm.prototype.setRotation_czzhi1$=function(t){this.animRotation_0.set_czzhi1$(t)},Sm.prototype.setScale_czzhiw$=function(t){this.animScale_0.set_czzhiw$(t)},Sm.$metadata$={kind:$,simpleName:"AnimatedTransformGroup",interfaces:[km]},Object.defineProperty(Cm.prototype,"name",{configurable:!0,get:function(){return this.target.name}}),Cm.prototype.applyTransform=function(){this.target.morphWeights=this.weights_0},Cm.prototype.applyTransformWeighted_8ca0d4$=function(t,e){var i,n=this.target.morphWeights;null!=n&&n.length===this.weights_0.length||(n=new Float32Array(this.weights_0.length),this.target.morphWeights=n),i=this.weights_0;for(var r=0;r!==i.length;++r)n[r]=e?this.weights_0[r]*t:n[r]+this.weights_0[r]*t},Cm.prototype.setWeights_q3cr5i$=function(t){this.weights_0.length!==t.length&&(this.weights_0=new Float32Array(t.length));for(var e=0;e!==t.length;++e)this.weights_0[e]=t[e]},Cm.$metadata$={kind:$,simpleName:"MorphAnimatedMesh",interfaces:[km]},Nm.prototype.interpolationPos_dleff0$=function(t,e){var i;if(this.time!==e){var n=this.time<e?this.time:0;i=this.interpolation.getInterpolationPos_mx4ult$((t-n)/(e-n))}else i=0;return i},Nm.prototype.toString=function(){return md(this.time,2)+" -> ["+this.interpolation+"]"},Tm.prototype.getInterpolationPos_mx4ult$=function(t){return t},Tm.$metadata$={kind:$,simpleName:"LINEAR",interfaces:[Em]};var Om=null;function Mm(){return Pm(),Om}function jm(){Am=this,Em.call(this,"STEP",1)}jm.prototype.getInterpolationPos_mx4ult$=function(t){return 0},jm.$metadata$={kind:$,simpleName:"STEP",interfaces:[Em]};var Am=null;function Rm(){return Pm(),Am}function Im(){Lm=this,Em.call(this,"CUBICSPLINE",2)}Im.prototype.getInterpolationPos_mx4ult$=function(t){return t},Im.$metadata$={kind:$,simpleName:"CUBICSPLINE",interfaces:[Em]};var Lm=null;function Dm(){return Pm(),Lm}function qm(t,e){Nm.call(this,t),this.rotation=e,this.tmpRotation_2somu9$_0=po(),this.qa_lcvm40$_0=po(),this.qb_lcvm4v$_0=po(),this.qc_lcvm5q$_0=po()}function Bm(t,e,i,n){qm.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=po(),this.p1_0=po(),this.m0_0=po(),this.m1_0=po()}function Fm(t,e){Nm.call(this,t),this.translation=e,this.tmpTranslation_1fj65v$_0=Fr()}function Um(t,e,i,n){Fm.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=Fr(),this.p1_0=Fr(),this.m0_0=Fr(),this.m1_0=Fr()}function Vm(t,e){Nm.call(this,t),this.scale=e,this.tmpScale_fz7pzv$_0=Fr()}function Gm(t,e,i,n){Vm.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=Fr(),this.p1_0=Fr(),this.m0_0=Fr(),this.m1_0=Fr()}function Hm(t,e){Nm.call(this,t),this.weights=e,this.tmpW=new Float32Array(1)}function Wm(t,e,i,n){Hm.call(this,t,e),this.startTan=i,this.endTan=n}function Km(t){Zm(),this.value=t,this.duration=1,this.speed=1,this.repeating=Zm().ONCE,this.progress=0}function Xm(){Ym=this,this.ONCE=1,this.REPEAT=2,this.REPEAT_TOGGLE_DIR=3}Em.$metadata$={kind:$,simpleName:"Interpolation",interfaces:[P]},Em.values=function(){return[Mm(),Rm(),Dm()]},Em.valueOf_61zpoe$=function(t){switch(t){case"LINEAR":return Mm();case"STEP":return Rm();case"CUBICSPLINE":return Dm();default:T("No enum constant de.fabmax.kool.util.animation.AnimationKey.Interpolation."+t)}},Nm.$metadata$={kind:$,simpleName:"AnimationKey",interfaces:[]},qm.prototype.apply_8kwor9$=function(t,e,i){null==e?this.tmpRotation_2somu9$_0.set_czzhi1$(this.rotation):this.slerp_6dcy83$_0(this.rotation,e.rotation,this.interpolationPos_dleff0$(t,e.time),this.tmpRotation_2somu9$_0),i.setRotation_czzhi1$(this.tmpRotation_2somu9$_0)},qm.prototype.toString=function(){return md(this.time,2)+" -> rotation: "+this.rotation+" ["+this.interpolation+"]"},qm.prototype.slerp_6dcy83$_0=function(t,e,i,n){t.norm_5s4mpx$(this.qa_lcvm40$_0),e.norm_5s4mpx$(this.qb_lcvm4v$_0);var r=i<0?0:i>1?1:i,o=this.qa_lcvm40$_0.dot_czzhi1$(this.qb_lcvm4v$_0),s=o<-1?-1:o>1?1:o;if(s<0&&(this.qa_lcvm40$_0.scale_14dthe$(-1),s=-s),s>.9999995)this.qb_lcvm4v$_0.subtract_2x9ggw$(this.qa_lcvm40$_0,n).scale_14dthe$(r).add_czzhi1$(this.qa_lcvm40$_0).norm();else{var a=s,l=A.acos(a)*r;this.qa_lcvm40$_0.scale_b0flav$(-s,this.qc_lcvm5q$_0).add_czzhi1$(this.qb_lcvm4v$_0).norm(),this.qa_lcvm40$_0.scale_14dthe$(A.cos(l)),this.qc_lcvm5q$_0.scale_14dthe$(A.sin(l)),n.set_czzhi1$(this.qa_lcvm40$_0).add_czzhi1$(this.qc_lcvm5q$_0)}return n},qm.$metadata$={kind:$,simpleName:"RotationKey",interfaces:[Nm]},Bm.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setRotation_czzhi1$(this.rotation);else{var n=this.interpolationPos_dleff0$(t,e.time),r=n*n,o=n*n*n,s=2*o-3*r+1,a=o-2*r+n,l=-2*o+3*r,u=o-r;this.p0_0.set_czzhi1$(this.rotation).scale_14dthe$(s),this.m0_0.set_czzhi1$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhi1$(e.rotation).scale_14dthe$(l),this.m1_0.set_czzhi1$(this.endTan).scale_14dthe$(u),i.setRotation_czzhi1$(this.p0_0.add_czzhi1$(this.m0_0).add_czzhi1$(this.p1_0).add_czzhi1$(this.m1_0).norm())}},Bm.$metadata$={kind:$,simpleName:"CubicRotationKey",interfaces:[qm]},Fm.prototype.apply_8kwor9$=function(t,e,i){null==e?i.setTranslation_czzhiw$(this.translation):(e.translation.subtract_vgki2o$(this.translation,this.tmpTranslation_1fj65v$_0).scale_14dthe$(this.interpolationPos_dleff0$(t,e.time)).add_czzhiw$(this.translation),i.setTranslation_czzhiw$(this.tmpTranslation_1fj65v$_0))},Fm.prototype.toString=function(){return md(this.time,2)+" -> translation: "+this.translation+" ["+this.interpolation+"]"},Fm.$metadata$={kind:$,simpleName:"TranslationKey",interfaces:[Nm]},Um.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setTranslation_czzhiw$(this.translation);else{var n=this.interpolationPos_dleff0$(t,e.time),r=n*n,o=n*n*n,s=2*o-3*r+1,a=o-2*r+n,l=-2*o+3*r,u=o-r;this.p0_0.set_czzhiw$(this.translation).scale_14dthe$(s),this.m0_0.set_czzhiw$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhiw$(e.translation).scale_14dthe$(l),this.m1_0.set_czzhiw$(this.endTan).scale_14dthe$(u),i.setTranslation_czzhiw$(this.p0_0.add_czzhiw$(this.m0_0).add_czzhiw$(this.p1_0).add_czzhiw$(this.m1_0))}},Um.$metadata$={kind:$,simpleName:"CubicTranslationKey",interfaces:[Fm]},Vm.prototype.apply_8kwor9$=function(t,e,i){null==e?i.setScale_czzhiw$(this.scale):(e.scale.subtract_vgki2o$(this.scale,this.tmpScale_fz7pzv$_0).scale_14dthe$(this.interpolationPos_dleff0$(t,e.time)).add_czzhiw$(this.scale),i.setScale_czzhiw$(this.tmpScale_fz7pzv$_0))},Vm.prototype.toString=function(){return md(this.time,2)+" -> scale: "+this.scale+" ["+this.interpolation+"]"},Vm.$metadata$={kind:$,simpleName:"ScaleKey",interfaces:[Nm]},Gm.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setScale_czzhiw$(this.scale);else{var n=this.interpolationPos_dleff0$(t,e.time),r=n*n,o=n*n*n,s=2*o-3*r+1,a=o-2*r+n,l=-2*o+3*r,u=o-r;this.p0_0.set_czzhiw$(this.scale).scale_14dthe$(s),this.m0_0.set_czzhiw$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhiw$(e.scale).scale_14dthe$(l),this.m1_0.set_czzhiw$(this.endTan).scale_14dthe$(u),i.setScale_czzhiw$(this.p0_0.add_czzhiw$(this.m0_0).add_czzhiw$(this.p1_0).add_czzhiw$(this.m1_0))}},Gm.$metadata$={kind:$,simpleName:"CubicScaleKey",interfaces:[Vm]},Hm.prototype.apply_8kwor9$=function(t,e,i){var n,r;if(this.tmpW.length!==this.weights.length&&(this.tmpW=new Float32Array(this.weights.length)),null==e){n=this.weights;for(var o=0;o!==n.length;++o)this.tmpW[o]=this.weights[o]}else{r=this.weights;for(var s=0;s!==r.length;++s)this.tmpW[s]=(e.weights[s]-this.weights[s])*this.interpolationPos_dleff0$(t,e.time)+this.weights[s]}i.setWeights_q3cr5i$(this.tmpW)},Hm.prototype.toString=function(){return md(this.time,2)+" -> weight: ("+Jt(this.weights,", ")+") ["+this.interpolation+"]"},Hm.$metadata$={kind:$,simpleName:"WeightKey",interfaces:[Nm]},Wm.prototype.apply_8kwor9$=function(t,e,i){var n,r;if(this.tmpW.length!==this.weights.length&&(this.tmpW=new Float32Array(this.weights.length)),null==e){n=this.weights;for(var o=0;o!==n.length;++o)this.tmpW[o]=this.weights[o]}else{var s=this.interpolationPos_dleff0$(t,e.time),a=s*s,l=s*s*s,u=2*l-3*a+1,p=l-2*a+s,c=-2*l+3*a,h=l-a;r=this.weights;for(var d=0;d!==r.length;++d){var f=this.weights[d]*u,_=this.startTan[d]*p,m=e.weights[d]*c,$=this.endTan[d]*h;this.tmpW[d]=f+_+m+$}}i.setWeights_q3cr5i$(this.tmpW)},Wm.$metadata$={kind:$,simpleName:"CubicWeightKey",interfaces:[Hm]},Xm.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ym=null;function Zm(){return null===Ym&&new Xm,Ym}function Jm(t){Km.call(this,t)}function Qm(t){Km.call(this,t)}function t$(t){this.value=t,this.onUpdate=null}function e$(t,e){t$.call(this,t),this.from=t,this.to=e}function i$(t){this.desired=t,this.actual=t,this.speed_t20eng$_0=0,this.damping_0=0,this.stiffness_h7kl9w$_0=0,this.stiffness=100}function n$(t){this.desired=t,this.actual=t,this.speed_e6bbiv$_0=0,this.damping_0=0,this.stiffness_bla035$_0=0,this.stiffness=100}function r$(){this.nodes=M()}function o$(t,e){this.joint=t,this.inverseBindMatrix=e,this.jointTransform=new En,this.tmpMat4f_0=new En,this.parent_0=null,this.children_0=M()}function s$(t,i,n,r){f$();var o,a=new Od,l=new ia;l.name="AmbientOcclusionPass",l.setSize_vux9f0$(n,r),l.clearDepthTexture(),l.addColorTexture_farcsl$(Kc()),ua.call(this,a,new ea(l)),this.aoSetup=i,this.radius=1,this.strength=1.25,this.power=1.5,this.bias=.05,this.kernelSz_cjciej$_0=32,this.aoUniforms_0=null,this.aoNode_0=null,this.noiseTex_0=this.makeNoiseTexture_0(),this.clearColor=V$().WHITE;var u=e.isType(o=this.drawNode,Od)?o:c(),p=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);p.generate_v2sixm$(_$);var h=new Ru("AoPass"),d={v:null},f=new Lu(h);d.v=f.stageInterfaceNode_iikjwn$("ifTexCoords",f.attrTexCoords().output),f.positionOutput=f.fullScreenQuadPositionNode_r20yfm$(f.attrTexCoords().output).outQuadPos;var _,m,$,y,v=new Du(h),g=v.textureNode_61zpoe$("noiseTex"),b=v.addNode_u9w9by$(new l$(this,t,!0,v.stage));if(this.aoSetup.isDeferred)_=v.textureNode_61zpoe$("positionTex"),m="z",$=v.splitNode_500t7j$(v.textureSamplerNode_ce41yx$(_,d.v.output).outColor,"xyz").output,y=v.splitNode_500t7j$(v.textureSamplerNode_ce41yx$(v.textureNode_61zpoe$("normalTex"),d.v.output).outColor,"xyz").output;else{_=v.textureNode_61zpoe$("normalDepthTex"),m="a";var w=v.textureSamplerNode_ce41yx$(_,d.v.output).outColor;y=v.splitNode_500t7j$(w,"xyz").output;var z=v.addNode_u9w9by$(new p$(b,v.stage));z.inDepth=v.splitNode_500t7j$(w,"a").output,z.inScreenPos=d.v.output,$=z.outPosition}var k=v.addNode_u9w9by$(new c$(this,b,g,_,m,v.stage));k.inScreenPos=d.v.output,k.inOrigin=$,k.inNormal=y,v.colorOutput_a3v4si$(k.outColor);var S,C,N=h,E=new sc(N);E.onPipelineCreated.add_11rb$((S=this,C=N,function(t,i,n){var r,o,a;if(S.aoSetup.isForward){var l,u,p=C;t:do{var h;for(l=Fp.ALL,h=p.stages.values.iterator();h.hasNext();){var d=h.next();if(0!=(d.stage.mask&l.mask)){var f,_,m=d.nodes;e:do{var $;for($=m.iterator();$.hasNext();){var y=$.next();if(zt(y.name,"normalDepthTex")&&e.isType(y,up)){_=y;break e}}_=null}while(0);var v=null==(f=_)||e.isType(f,up)?f:c();if(null!=v){u=v;break t}}}u=null}while(0);x(u).sampler.texture=null!=(r=S.aoSetup.linearDepthPass)?r.colorTexture:null}else{var g,b,w=C;t:do{var z;for(g=Fp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&g.mask)){var N,E,P=k.nodes;e:do{var T;for(T=P.iterator();T.hasNext();){var O=T.next();if(zt(O.name,"positionTex")&&e.isType(O,up)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,up)?N:c();if(null!=M){b=M;break t}}}b=null}while(0);x(b).sampler.texture=null!=(o=S.aoSetup.mrtPass)?o.positionAo:null;var j,A,R=C;t:do{var I;for(j=Fp.ALL,I=R.stages.values.iterator();I.hasNext();){var L=I.next();if(0!=(L.stage.mask&j.mask)){var D,q,B=L.nodes;e:do{var F;for(F=B.iterator();F.hasNext();){var U=F.next();if(zt(U.name,"normalTex")&&e.isType(U,up)){q=U;break e}}q=null}while(0);var V=null==(D=q)||e.isType(D,up)?D:c();if(null!=V){A=V;break t}}}A=null}while(0);x(A).sampler.texture=null!=(a=S.aoSetup.mrtPass)?a.normalRoughness:null}var G,H,W=C;t:do{var K;for(G=Fp.ALL,K=W.stages.values.iterator();K.hasNext();){var X=K.next();if(0!=(X.stage.mask&G.mask)){var Y,Z,J=X.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(zt(tt.name,"noiseTex")&&e.isType(tt,up)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,up)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);x(H).sampler.texture=S.noiseTex_0;var it,nt,rt=S,ot=C;t:do{var st;for(it=Fp.ALL,st=ot.stages.values.iterator();st.hasNext();){var at=st.next();if(0!=(at.stage.mask&it.mask)){var lt,ut,pt=at.nodes;e:do{var ct;for(ct=pt.iterator();ct.hasNext();){var ht=ct.next();if(zt(ht.name,"aoUniforms")&&e.isType(ht,l$)){ut=ht;break e}}ut=null}while(0);var dt=null==(lt=ut)||e.isType(lt,l$)?lt:c();if(null!=dt){nt=dt;break t}}}nt=null}while(0);rt.aoUniforms_0=nt;var ft,_t,mt=S,$t=C;t:do{var yt;for(ft=Fp.ALL,yt=$t.stages.values.iterator();yt.hasNext();){var vt=yt.next();if(0!=(vt.stage.mask&ft.mask)){var gt,bt,xt=vt.nodes;e:do{var wt;for(wt=xt.iterator();wt.hasNext();){var kt=wt.next();if(zt(kt.name,"aoNode")&&e.isType(kt,c$)){bt=kt;break e}}bt=null}while(0);var St=null==(gt=bt)||e.isType(gt,c$)?gt:c();if(null!=St){_t=St;break t}}}_t=null}while(0);return mt.aoNode_0=_t,S.setKernelSize_0(S.kernelSz),s})),p.shader=E,u.unaryPlus_uv0sim$(p)}function a$(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$data=t}function l$(t,e,i,n){this.$outer=t,qu.call(this,"aoUniforms",n),this.cam=e,this.withInvProj=i,this.uKernel=new Jh("uKernel",128),this.uKernelN=rd(32,"uKernelN"),this.uProj=new ed("uProj"),this.uInvProj=new ed("uInvProj"),this.uNoiseScale=new Hh("uNoiseScale"),this.uRadius=new Vh("uRadius"),this.uStrength=new Vh("uStrength"),this.uPower=new Vh("uPower"),this.uBias=new Vh("uBias")}function u$(t,e){return function(i){return i.unaryPlus_wq3w46$(function(t){return function(){return t.uKernel}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uProj}}(t)),t.withInvProj&&i.unaryPlus_wq3w46$(function(t){return function(){return t.uInvProj}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uNoiseScale}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uRadius}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uStrength}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uPower}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uBias}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uKernelN}}(t)),i.onUpdate=function(t,e){return function(i,n){return t.uProj.value.set_d4zu6l$(t.cam.proj),t.uNoiseScale.value.set_dleff0$(e.width/4,e.height/4),t.uRadius.value=e.radius,t.uStrength.value=e.strength,t.uPower.value=e.power,t.uBias.value=e.bias,t.withInvProj&&t.uInvProj.value.set_d4zu6l$(t.cam.invProj),s}}(t,e),s}}function p$(t,e){qu.call(this,"unprojectPos",e),this.aoUniforms=t,this.inDepth=new Bu(new wu(1)),this.inScreenPos=new Bu(new zu(ar().ZERO)),this.outPosition=new Bu(new mu(this.name+"_outPos"),this)}function c$(t,e,i,n,r,o){this.$outer=t,qu.call(this,"aoNode",o),this.aoUniforms=e,this.noiseTex=i,this.depthTex=n,this.depthComponent=r,this.inScreenPos=new Bu(new zu(ar().ZERO)),this.inOrigin=new Bu(new ku(Er().ZERO)),this.inNormal=new Bu(new ku(Er().Y_AXIS)),this.outColor=new Bu(new $u("colorOut"),this)}function h$(){d$=this,this.MAX_KERNEL_SIZE=128}Km.prototype.tick_aemszp$=function(t){var e,i=this.speed;if(e=PN.FUZZY_EQ_F,!(A.abs(i)<=e)){if(this.progress+=t.deltaT*this.speed/this.duration,this.progress>=1&&this.speed>0)switch(this.repeating){case 1:this.progress=1,this.speed=0;break;case 2:this.progress=0;break;case 3:this.progress=1,this.speed=-this.speed}else if(this.progress<=0&&this.speed<0)switch(this.repeating){case 1:this.progress=0,this.speed=0;break;case 2:this.progress=1;break;case 3:this.progress=0,this.speed=-this.speed}var n,r=this.progress;n=r<0?0:r>1?1:r,this.progress=n,this.value.interpolate_mx4ult$(this.interpolate_mx4ult$(this.progress))}return this.value.value},Km.$metadata$={kind:$,simpleName:"Animator",interfaces:[]},Jm.prototype.interpolate_mx4ult$=function(t){return t},Jm.$metadata$={kind:$,simpleName:"LinearAnimator",interfaces:[Km]},Qm.prototype.interpolate_mx4ult$=function(t){var e=t*U.PI;return.5-.5*A.cos(e)},Qm.$metadata$={kind:$,simpleName:"CosAnimator",interfaces:[Km]},t$.prototype.interpolate_mx4ult$=function(t){var e;this.updateValue_mx4ult$(t),null!=(e=this.onUpdate)&&e(this.value)},t$.$metadata$={kind:$,simpleName:"InterpolatedValue",interfaces:[]},e$.prototype.updateValue_mx4ult$=function(t){this.value=this.from+(this.to-this.from)*t},e$.$metadata$={kind:$,simpleName:"InterpolatedFloat",interfaces:[t$]},Object.defineProperty(i$.prototype,"speed",{configurable:!0,get:function(){return this.speed_t20eng$_0},set:function(t){this.speed_t20eng$_0=t}}),Object.defineProperty(i$.prototype,"stiffness",{configurable:!0,get:function(){return this.stiffness_h7kl9w$_0},set:function(t){this.stiffness_h7kl9w$_0=t;var e=this.stiffness;this.damping_0=2*A.sqrt(e)}}),i$.prototype.set_mx4ult$=function(t){this.desired=t,this.actual=t,this.speed=0},i$.prototype.animate_mx4ult$=function(t){if(0===this.stiffness||t>.2)return this.actual=this.desired,this.actual;for(var e=0;e<t;){var i=t-e,n=A.min(.05,i);e+=n+.001;var r=this.desired-this.actual;this.speed=this.speed+(r*this.stiffness-this.speed*this.damping_0)*n;var o,s=this.speed*n,a=A.abs(s);o=PN.FUZZY_EQ_F,A.abs(a)<=o?this.actual=this.desired:this.actual+=s}return this.actual},i$.$metadata$={kind:$,simpleName:"SpringDamperFloat",interfaces:[]},Object.defineProperty(n$.prototype,"speed",{configurable:!0,get:function(){return this.speed_e6bbiv$_0},set:function(t){this.speed_e6bbiv$_0=t}}),Object.defineProperty(n$.prototype,"stiffness",{configurable:!0,get:function(){return this.stiffness_bla035$_0},set:function(t){this.stiffness_bla035$_0=t;var e=this.stiffness;this.damping_0=2*A.sqrt(e)}}),n$.prototype.set_14dthe$=function(t){this.desired=t,this.actual=t,this.speed=0},n$.prototype.animate_mx4ult$=function(t){if(0===this.stiffness||t>.2)return this.actual=this.desired,this.actual;for(var e=0;e<t;){var i=t-e,n=A.min(.05,i);e+=n+.001;var r=this.desired-this.actual;this.speed=this.speed+(r*this.stiffness-this.speed*this.damping_0)*n;var o,s=this.speed*n,a=A.abs(s);o=PN.FUZZY_EQ_D,A.abs(a)<=o?this.actual=this.desired:this.actual+=s}return this.actual},n$.$metadata$={kind:$,simpleName:"SpringDamperDouble",interfaces:[]},r$.prototype.updateJointTransforms=function(){var t;t=this.nodes;for(var e=0;e!==t.size;++e)this.nodes.get_za3lpa$(e).hasParent||this.nodes.get_za3lpa$(e).updateJointTransform()},r$.prototype.printHierarchy=function(){var t,e,i=this.nodes,n=M();for(t=i.iterator();t.hasNext();){var r=t.next();r.hasParent||n.add_11rb$(r)}for(e=n.iterator();e.hasNext();)e.next().printHierarchy_61zpoe$("")},Object.defineProperty(o$.prototype,"hasParent",{configurable:!0,get:function(){return null!=this.parent_0}}),o$.prototype.addChild_j3a3b7$=function(t){t.parent_0=this,this.children_0.add_11rb$(t)},o$.prototype.updateJointTransform=function(){var t;this.jointTransform.set_d4zu6l$(this.joint.transform),t=this.children_0;for(var e=0;e!==t.size;++e)this.children_0.get_za3lpa$(e).updateJointTransform_0(this.jointTransform);this.jointTransform.mul_d4zu6j$(this.inverseBindMatrix)},o$.prototype.updateJointTransform_0=function(t){var e;this.tmpMat4f_0.set_d4zu6l$(this.joint.transform),this.jointTransform.set_d4zu6j$(t).mul_d4zu6j$(this.tmpMat4f_0),e=this.children_0;for(var i=0;i!==e.size;++i)this.children_0.get_za3lpa$(i).updateJointTransform_0(this.jointTransform);this.jointTransform.mul_d4zu6j$(this.inverseBindMatrix)},o$.prototype.printHierarchy_61zpoe$=function(t){var e;for(jt(t+Ct(this.joint.name)),e=this.children_0.iterator();e.hasNext();)e.next().printHierarchy_61zpoe$(t+"    ")},o$.$metadata$={kind:$,simpleName:"SkinNode",interfaces:[]},r$.$metadata$={kind:$,simpleName:"Skin",interfaces:[]},Object.defineProperty(s$.prototype,"kernelSz",{configurable:!0,get:function(){return this.kernelSz_cjciej$_0},set:function(t){this.kernelSz_cjciej$_0=t,this.setKernelSize_0(t)}}),s$.prototype.setKernelSize_0=function(t){var e,i=A.min(t,128);if(null!=(e=this.aoNode_0)){var n,r=f(0,i),o=w(j(r,10));for(n=r.iterator();n.hasNext();){var s=n.next()/i;o.add_11rb$.call(o,this.lerp_0(.1,1,A.pow(s,2)))}for(var a=te(o,Qt(17)),l=0;l<i;l++){var u=this.hammersley_0(l,i),p=2*U.PI*u.x,c=1-u.y,h=A.sqrt(c),d=1-h*h,_=A.sqrt(d),m=new Or(_*A.cos(p),_*A.sin(p),h);e.aoUniforms.uKernel.value[l]=m.norm().scale_mx4ult$(a.get_za3lpa$(l))}e.aoUniforms.uKernelN.value=i}},s$.prototype.radicalInverse_0=function(t){var i=e.Long.fromInt(t);return 2.3283064e-10*(i=(i=(i=(i=(i=i.shiftLeft(16).or(i.shiftRight(16))).and(ee).shiftLeft(1).or(i.and(ie).shiftRight(1))).and(ne).shiftLeft(2).or(i.and(re).shiftRight(2))).and(oe).shiftLeft(4).or(i.and(se).shiftRight(4))).and(ae).shiftLeft(8).or(i.and(le).shiftRight(8))).toNumber()},s$.prototype.hammersley_0=function(t,e){return new rr(t/e,this.radicalInverse_0(t))},s$.prototype.lerp_0=function(t,e,i){return t+i*(e-t)},a$.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},a$.prototype=Object.create(l.prototype),a$.prototype.constructor=a$,a$.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$data;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},s$.prototype.makeNoiseTexture_0=function(){var t,e=wN(64),i=f(0,16),n=w(j(i,10));for(t=i.iterator();t.hasNext();){var r=t.next();n.add_11rb$(U.PI*r/8)}for(var o=Z(n),s=0;s<16;s++){var a=o.get_za3lpa$(s),l=A.cos(a),u=A.sin(a);e.set_6t1wet$(0+(4*s|0)|0,Dt(F(255*(.5*l+.5)))),e.set_6t1wet$(1+(4*s|0)|0,Dt(F(255*(.5*u+.5)))),e.set_6t1wet$(2+(4*s|0)|0,0),e.set_6t1wet$(3+(4*s|0)|0,1)}var p,c=new Mh(e,4,4,Kc());return new Qc("ao_noise_tex",new xh(Kc(),Th(),Th(),void 0,kh(),kh(),!1,1),(p=c,function(t,e,i,n){var r=new a$(p,t,e,this,i);return n?r:r.doResume(null)}))},s$.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),this.noiseTex_0.dispose(),ua.prototype.dispose_aemszp$.call(this,t)},l$.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e=t.descriptorSet;this.$outer;var i=this.$outer;e.uniformBuffer_2ydyu8$(this.name,[t.stage],u$(this,i))},l$.$metadata$={kind:$,simpleName:"AoUniforms",interfaces:[qu]},p$.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDepth,this.inScreenPos])},p$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec4 projPos = vec4("+this.inScreenPos.ref2f()+" * 2.0 - vec2(1.0), 1.0, 1.0);\n                vec4 viewPos = "+this.aoUniforms.uInvProj+" * projPos;\n                "+this.outPosition.declare()+" = viewPos.xyz / viewPos.w;\n                "+this.outPosition+" *= ("+this.inDepth.ref1f()+" / "+this.outPosition+".z);\n            ")},p$.$metadata$={kind:$,simpleName:"UnprojectPosNode",interfaces:[qu]},c$.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noiseTex),this.dependsOn_8ak6wm$([this.inScreenPos,this.inOrigin]),qu.prototype.setup_llmhyc$.call(this,t)},c$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                if ("+this.inOrigin+".z > 0.0) {\n                    discard;\n                }\n                \n                // compute kernel rotation\n                vec2 noiseCoord = "+this.inScreenPos.ref2f()+" * "+this.aoUniforms.uNoiseScale+";\n                vec3 rotVec = "+t.sampleTexture2d_buzeal$(this.noiseTex.name,"noiseCoord")+".xyz * 2.0 - 1.0;\n                vec3 tangent = normalize(rotVec - "+this.inNormal.ref3f()+" * dot(rotVec, "+this.inNormal.ref3f()+"));\n                vec3 bitangent = cross("+this.inNormal.ref3f()+", tangent);\n                mat3 tbn = mat3(tangent, bitangent, "+this.inNormal.ref3f()+");\n                \n                float occlusion = 0.0;\n                float bias = "+this.aoUniforms.uBias+" * "+this.aoUniforms.uRadius+";\n                for (int i = 0; i < "+this.aoUniforms.uKernelN+"; i++) {\n                    vec3 kernel = tbn * "+this.aoUniforms.uKernel+"[i];\n                    vec3 samplePos = "+this.inOrigin+" + kernel * "+this.aoUniforms.uRadius+";\n                    \n                    vec4 sampleProj = "+this.aoUniforms.uProj+" * vec4(samplePos, 1.0);\n                    sampleProj.xyz /= sampleProj.w;\n                    sampleProj.xy = sampleProj.xy * 0.5 + 0.5;\n                    \n                    if (sampleProj.x > 0.0 && sampleProj.x < 1.0 && sampleProj.y > 0.0 && sampleProj.y < 1.0 && sampleProj.z > 0.0) {\n                        float sampleDepth = "+t.sampleTexture2d_buzeal$(this.depthTex.name,"sampleProj.xy")+"."+this.depthComponent+";\n                        float rangeCheck = 1.0 - smoothstep(0.0, 1.0, abs("+this.inOrigin+".z - sampleDepth) / (4.0 * "+this.aoUniforms.uRadius+"));\n                        float occlusionInc = clamp((sampleDepth - (samplePos.z + bias)) * 10.0, 0.0, 1.0);\n                        occlusion += occlusionInc * rangeCheck;\n                    }\n                }\n                occlusion /= float("+this.aoUniforms.uKernelN+");\n                float occlFac = pow(clamp(1.0 - occlusion * "+this.aoUniforms.uStrength+", 0.0, 1.0), "+this.aoUniforms.uPower+");\n                \n                "+this.outColor.declare()+" = vec4(occlFac, 0.0, 0.0, 1.0);\n            ")},c$.$metadata$={kind:$,simpleName:"AoNode",interfaces:[qu]},h$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var d$=null;function f$(){return null===d$&&new h$,d$}function _$(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function m$(t,e){v$(),this.mrtPass=t,this.linearDepthPass=e}function $$(){y$=this}s$.$metadata$={kind:$,simpleName:"AmbientOcclusionPass",interfaces:[ua]},Object.defineProperty(m$.prototype,"isDeferred",{configurable:!0,get:function(){return null!=this.mrtPass}}),Object.defineProperty(m$.prototype,"isForward",{configurable:!0,get:function(){return null!=this.linearDepthPass}}),$$.prototype.deferred_u6tred$=function(t){return new m$(t,null)},$$.prototype.forward_xscw1l$=function(t){return new m$(null,t)},$$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var y$=null;function v$(){return null===y$&&new $$,y$}function g$(t,i,n){var r,o=new Od,a=new ia;a.name="AoDenoisePass",a.setSize_vux9f0$(t.config.width,t.config.height),a.addColorTexture_farcsl$(Gc()),a.clearDepthTexture(),ua.call(this,o,new ea(a)),this.uRadius_0=Gh(1,"uRadius"),this.clearAndDisable=!1,this.denoiseMesh_0=null,this.clearMesh_0=null,this.clearColor=V$().BLACK;var l=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(x$);var u=new Ru("AoDenoisePass"),p={v:null},h=new Lu(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.fullScreenQuadPositionNode_r20yfm$(h.attrTexCoords().output).outQuadPos;var d=new Du(u),f=d.textureNode_61zpoe$("noisyAo"),_=d.textureNode_61zpoe$("depth"),m=d.pushConstantNode1f_978i2u$(this.uRadius_0),$=d.addNode_u9w9by$(new b$(f,_,n,d.stage));$.inScreenPos=p.v.output,$.radius=m.output,d.colorOutput_a3v4si$($.outColor);var y,v,g,b=u,w=new sc(b);w.onPipelineSetup.add_11rb$(w$),w.onPipelineCreated.add_11rb$((y=t,v=b,g=i,function(t,i,n){var r,o,a=v;t:do{var l;for(r=Fp.ALL,l=a.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&r.mask)){var p,h,d=u.nodes;e:do{var f;for(f=d.iterator();f.hasNext();){var _=f.next();if(zt(_.name,"noisyAo")&&e.isType(_,up)){h=_;break e}}h=null}while(0);var m=null==(p=h)||e.isType(p,up)?p:c();if(null!=m){o=m;break t}}}o=null}while(0);x(o).sampler.texture=y.colorTexture;var $,b,w=v;t:do{var z;for($=Fp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&$.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var P=E.next();if(zt(P.name,"depth")&&e.isType(P,up)){C=P;break e}}C=null}while(0);var T=null==(S=C)||e.isType(S,up)?S:c();if(null!=T){b=T;break t}}}b=null}while(0);return x(b).sampler.texture=g,s})),l.shader=w,this.denoiseMesh_0=l;var z=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);z.isVisible=!1,z.generate_v2sixm$(z$);var k=new Ru("ClearAoDenoisePass"),S=new Lu(k);S.mvpNode(),S.positionOutput=S.fullScreenQuadPositionNode_r20yfm$(S.attrTexCoords().output).outQuadPos;var C=new Du(k);C.colorOutput_a3v4si$(C.constVec4f_czzhhz$(V$().WHITE));var N=new sc(k);N.onPipelineSetup.add_11rb$(k$),z.shader=N,this.clearMesh_0=z;var E=e.isType(r=this.drawNode,Od)?r:c();E.unaryPlus_uv0sim$(this.denoiseMesh_0),E.unaryPlus_uv0sim$(this.clearMesh_0)}function b$(t,e,i,n){qu.call(this,"blurNode",n),this.noisyAo=t,this.depth=e,this.depthComponent=i,this.inScreenPos=new Bu(new zu(ar().ZERO)),this.radius=new Bu(new wu(1)),this.outColor=new Bu(new $u("colorOut"),this)}function x$(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function w$(t,e,i){return t.blendMode=rl(),t.depthTest=pl(),s}function z$(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function k$(t,e,i){return t.blendMode=rl(),t.depthTest=pl(),s}function S$(){T$(),this.mapSize=.5,this.isEnabled_ubfkyk$_0=!0}function C$(t){var i;S$.call(this),this.depthPass=null,this.aoPass_i8vqld$_0=null,this.denoisePass_wz7oly$_0=null,this.mapWidth_0=0,this.mapHeight_0=0;var n,r,o,a=new Sd(e.isType(i=t.camera,kd)?i:c());this.depthPass=js(t,this.mapWidth_0,this.mapHeight_0),this.depthPass.camera=a,this.depthPass.isUpdateDrawNode=!1,this.depthPass.onBeforeCollectDrawCommands.add_11rb$((n=a,r=t,function(t){return n.sync_hrtwbc$(r.mainRenderPass.viewport,t),s})),this.aoPass_i8vqld$_0=new s$(a,v$().forward_xscw1l$(this.depthPass),this.mapWidth_0,this.mapHeight_0),this.aoPass.dependsOn_yqp8fe$(this.depthPass),this.denoisePass_wz7oly$_0=new g$(this.aoPass,x(this.depthPass.colorTexture),"a"),t.addOffscreenPass_m1c2kf$(this.depthPass),t.addOffscreenPass_m1c2kf$(this.aoPass),t.addOffscreenPass_m1c2kf$(this.denoisePass),t.onRenderScene.add_11rb$((o=this,function(t,e){var i=F(t.mainRenderPass.viewport.width*o.mapSize),n=F(t.mainRenderPass.viewport.height*o.mapSize);return o.isEnabled&&i>0&&n>0&&(i!==o.aoPass.width||n!==o.aoPass.height)&&(o.depthPass.resize_w70mbp$(i,n,e),o.aoPass.resize_w70mbp$(i,n,e)),o.isEnabled&&i>0&&n>0&&(i!==o.denoisePass.width||n!==o.denoisePass.height)&&o.denoisePass.resize_w70mbp$(i,n,e),s}))}function N$(t,e){var i,n;S$.call(this),this.aoPass_6v2ifx$_0=null,this.denoisePass_mxbezy$_0=null,this.mapWidth_0=0,this.mapHeight_0=0,this.aoPass_6v2ifx$_0=new s$(e.camera,v$().deferred_u6tred$(e),this.mapWidth_0,this.mapHeight_0),this.aoPass.dependsOn_yqp8fe$(e),this.denoisePass_mxbezy$_0=new g$(this.aoPass,e.positionAo,"z"),t.addOffscreenPass_m1c2kf$(this.aoPass),t.addOffscreenPass_m1c2kf$(this.denoisePass),t.onRenderScene.add_11rb$((i=e,n=this,function(t,e){var r=F(i.width*n.mapSize),o=F(i.height*n.mapSize);return n.isEnabled&&r>0&&o>0&&(r!==n.aoPass.width||o!==n.aoPass.height)&&n.aoPass.resize_w70mbp$(r,o,e),n.isEnabled&&r>0&&o>0&&(r!==n.denoisePass.width||o!==n.denoisePass.height)&&n.denoisePass.resize_w70mbp$(r,o,e),s}))}function E$(){P$=this}m$.$metadata$={kind:$,simpleName:"AoSetup",interfaces:[]},Object.defineProperty(g$.prototype,"radius",{configurable:!0,get:function(){return this.uRadius_0.value},set:function(t){this.uRadius_0.value=t}}),g$.prototype.update_aemszp$=function(t){var e;this.clearAndDisable&&(this.resize_w70mbp$(1,1,t),this.clearAndDisable=!1,this.denoiseMesh_0.isVisible=!1,this.clearMesh_0.isVisible=!0,t.runDelayed_hd6vpk$(5,(e=this,function(t){return e.isEnabled=!1,e.denoiseMesh_0.isVisible=!0,e.clearMesh_0.isVisible=!1,s}))),ua.prototype.update_aemszp$.call(this,t)},g$.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},b$.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noisyAo),this.dependsOn_lhtstx$(this.depth),this.dependsOn_8ak6wm$([this.inScreenPos,this.radius]),qu.prototype.setup_llmhyc$.call(this,t)},b$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                int blurSize = 4;\n                vec2 texelSize = 1.0 / vec2(textureSize("+this.noisyAo.name+", 0));\n                float depthOri = "+t.sampleTexture2d_buzeal$(this.depth.name,this.inScreenPos.ref2f())+"."+this.depthComponent+";\n                float depthThreshold = "+this.radius.ref1f()+" * 0.1;\n                \n                float result = 0.0;\n                float weight = 0.0;\n                vec2 hlim = vec2(float(-blurSize) * 0.5 + 0.5);\n                for (int x = 0; x < blurSize; x++) {\n                    for (int y = 0; y < blurSize; y++) {\n                        vec2 uv = "+this.inScreenPos.ref2f()+" + (hlim + vec2(float(x), float(y))) * texelSize;\n                        float w = 1.0 - step(depthThreshold, abs("+t.sampleTexture2d_buzeal$(this.depth.name,"uv")+"."+this.depthComponent+" - depthOri)) * 0.99;\n                        \n                        result += "+t.sampleTexture2d_buzeal$(this.noisyAo.name,"uv")+".r * w;\n                        weight += w;\n                    }\n                }\n                result /= weight;\n                "+this.outColor.declare()+" = vec4(result, result, result, 1.0);\n            ")},b$.$metadata$={kind:$,simpleName:"BlurNode",interfaces:[qu]},g$.$metadata$={kind:$,simpleName:"AoDenoisePass",interfaces:[ua]},Object.defineProperty(S$.prototype,"aoMap",{configurable:!0,get:function(){return x(this.denoisePass.colorTexture)}}),Object.defineProperty(S$.prototype,"radius",{configurable:!0,get:function(){return this.aoPass.radius},set:function(t){this.aoPass.radius=t,this.denoisePass.radius=t}}),Object.defineProperty(S$.prototype,"strength",{configurable:!0,get:function(){return this.aoPass.strength},set:function(t){this.aoPass.strength=t}}),Object.defineProperty(S$.prototype,"power",{configurable:!0,get:function(){return this.aoPass.power},set:function(t){this.aoPass.power=t}}),Object.defineProperty(S$.prototype,"bias",{configurable:!0,get:function(){return this.aoPass.bias},set:function(t){this.aoPass.bias=t}}),Object.defineProperty(S$.prototype,"kernelSz",{configurable:!0,get:function(){return this.aoPass.kernelSz},set:function(t){this.aoPass.kernelSz=t}}),Object.defineProperty(S$.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_ubfkyk$_0},set:function(t){this.isEnabled_ubfkyk$_0=t,this.updateEnabled()}}),S$.prototype.updateEnabled=function(){this.aoPass.isEnabled=this.isEnabled,this.isEnabled?(this.denoisePass.isEnabled=!0,this.denoisePass.clearAndDisable=!1):this.denoisePass.clearAndDisable=!0},Object.defineProperty(C$.prototype,"aoPass",{configurable:!0,get:function(){return this.aoPass_i8vqld$_0}}),Object.defineProperty(C$.prototype,"denoisePass",{configurable:!0,get:function(){return this.denoisePass_wz7oly$_0}}),C$.prototype.updateEnabled=function(){S$.prototype.updateEnabled.call(this),this.depthPass.isEnabled=this.isEnabled},C$.$metadata$={kind:$,simpleName:"ForwardAoPipeline",interfaces:[S$]},Object.defineProperty(N$.prototype,"aoPass",{configurable:!0,get:function(){return this.aoPass_6v2ifx$_0}}),Object.defineProperty(N$.prototype,"denoisePass",{configurable:!0,get:function(){return this.denoisePass_mxbezy$_0}}),N$.$metadata$={kind:$,simpleName:"DeferredAoPipeline",interfaces:[S$]},E$.prototype.createForward_ushge7$=function(t){return new C$(t)},E$.prototype.createDeferred_4lrvgg$=function(t,e){return new N$(t,e)},E$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var P$=null;function T$(){return null===P$&&new E$,P$}function O$(){this.mutMin_0=Mr(),this.mutMax_0=Mr(),this.mutSize_0=Mr(),this.mutCenter_0=Mr(),this.isEmpty_xiuk4h$_0=!0,this.min=this.mutMin_0,this.max=this.mutMax_0,this.size=this.mutSize_0,this.center=this.mutCenter_0,this.isBatchUpdate_4nlnat$_0=!1}function M$(){}function j$(){}function A$(){}function R$(){}function I$(){}function L$(){}function D$(t){for(var e=t.size,i=w(e),n=0;n<e;n++)i.add_11rb$(t.get_za3lpa$(n));return i}function q$(t){var e=ct();return e.addAll_brywnq$(t),e}function B$(t,e,i,n){V$(),void 0===n&&(n=1),Yr.call(this,t,e,i,n)}function F$(){U$=this,this.BLACK=new B$(0,0,0,1),this.DARK_GRAY=new B$(.25,.25,.25,1),this.GRAY=new B$(.5,.5,.5,1),this.LIGHT_GRAY=new B$(.75,.75,.75,1),this.WHITE=new B$(1,1,1,1),this.RED=new B$(1,0,0,1),this.GREEN=new B$(0,1,0,1),this.BLUE=new B$(0,0,1,1),this.YELLOW=new B$(1,1,0,1),this.CYAN=new B$(0,1,1,1),this.MAGENTA=new B$(1,0,1,1),this.ORANGE=new B$(1,.5,0,1),this.LIME=new B$(.7,1,0,1),this.LIGHT_RED=new B$(1,.5,.5,1),this.LIGHT_GREEN=new B$(.5,1,.5,1),this.LIGHT_BLUE=new B$(.5,.5,1,1),this.LIGHT_YELLOW=new B$(1,1,.5,1),this.LIGHT_CYAN=new B$(.5,1,1,1),this.LIGHT_MAGENTA=new B$(1,.5,1,1),this.LIGHT_ORANGE=new B$(1,.75,.5,1),this.DARK_RED=new B$(.5,0,0,1),this.DARK_GREEN=new B$(0,.5,0,1),this.DARK_BLUE=new B$(0,0,.5,1),this.DARK_YELLOW=new B$(.5,.5,0,1),this.DARK_CYAN=new B$(0,.5,.5,1),this.DARK_MAGENTA=new B$(.5,0,.5,1),this.DARK_ORANGE=new B$(.5,.25,0,1),this.MD_RED_50=this.fromHex_61zpoe$("FFEBEE"),this.MD_RED_100=this.fromHex_61zpoe$("FFCDD2"),this.MD_RED_200=this.fromHex_61zpoe$("EF9A9A"),this.MD_RED_300=this.fromHex_61zpoe$("E57373"),this.MD_RED_400=this.fromHex_61zpoe$("EF5350"),this.MD_RED_500=this.fromHex_61zpoe$("F44336"),this.MD_RED_600=this.fromHex_61zpoe$("E53935"),this.MD_RED_700=this.fromHex_61zpoe$("D32F2F"),this.MD_RED_800=this.fromHex_61zpoe$("C62828"),this.MD_RED_900=this.fromHex_61zpoe$("B71C1C"),this.MD_RED_A100=this.fromHex_61zpoe$("FF8A80"),this.MD_RED_A200=this.fromHex_61zpoe$("FF5252"),this.MD_RED_A400=this.fromHex_61zpoe$("FF1744"),this.MD_RED_A700=this.fromHex_61zpoe$("D50000"),this.MD_RED=this.MD_RED_500,this.MD_PINK_50=this.fromHex_61zpoe$("FCE4EC"),this.MD_PINK_100=this.fromHex_61zpoe$("F8BBD0"),this.MD_PINK_200=this.fromHex_61zpoe$("F48FB1"),this.MD_PINK_300=this.fromHex_61zpoe$("F06292"),this.MD_PINK_400=this.fromHex_61zpoe$("EC407A"),this.MD_PINK_500=this.fromHex_61zpoe$("E91E63"),this.MD_PINK_600=this.fromHex_61zpoe$("D81B60"),this.MD_PINK_700=this.fromHex_61zpoe$("C2185B"),this.MD_PINK_800=this.fromHex_61zpoe$("AD1457"),this.MD_PINK_900=this.fromHex_61zpoe$("880E4F"),this.MD_PINK_A100=this.fromHex_61zpoe$("FF80AB"),this.MD_PINK_A200=this.fromHex_61zpoe$("FF4081"),this.MD_PINK_A400=this.fromHex_61zpoe$("F50057"),this.MD_PINK_A700=this.fromHex_61zpoe$("C51162"),this.MD_PINK=this.MD_PINK_500,this.MD_PURPLE_50=this.fromHex_61zpoe$("F3E5F5"),this.MD_PURPLE_100=this.fromHex_61zpoe$("E1BEE7"),this.MD_PURPLE_200=this.fromHex_61zpoe$("CE93D8"),this.MD_PURPLE_300=this.fromHex_61zpoe$("BA68C8"),this.MD_PURPLE_400=this.fromHex_61zpoe$("AB47BC"),this.MD_PURPLE_500=this.fromHex_61zpoe$("9C27B0"),this.MD_PURPLE_600=this.fromHex_61zpoe$("8E24AA"),this.MD_PURPLE_700=this.fromHex_61zpoe$("7B1FA2"),this.MD_PURPLE_800=this.fromHex_61zpoe$("6A1B9A"),this.MD_PURPLE_900=this.fromHex_61zpoe$("4A148C"),this.MD_PURPLE_A100=this.fromHex_61zpoe$("EA80FC"),this.MD_PURPLE_A200=this.fromHex_61zpoe$("E040FB"),this.MD_PURPLE_A400=this.fromHex_61zpoe$("D500F9"),this.MD_PURPLE_A700=this.fromHex_61zpoe$("AA00FF"),this.MD_PURPLE=this.MD_PURPLE_500,this.MD_DEEP_PURPLE_50=this.fromHex_61zpoe$("EDE7F6"),this.MD_DEEP_PURPLE_100=this.fromHex_61zpoe$("D1C4E9"),this.MD_DEEP_PURPLE_200=this.fromHex_61zpoe$("B39DDB"),this.MD_DEEP_PURPLE_300=this.fromHex_61zpoe$("9575CD"),this.MD_DEEP_PURPLE_400=this.fromHex_61zpoe$("7E57C2"),this.MD_DEEP_PURPLE_500=this.fromHex_61zpoe$("673AB7"),this.MD_DEEP_PURPLE_600=this.fromHex_61zpoe$("5E35B1"),this.MD_DEEP_PURPLE_700=this.fromHex_61zpoe$("512DA8"),this.MD_DEEP_PURPLE_800=this.fromHex_61zpoe$("4527A0"),this.MD_DEEP_PURPLE_900=this.fromHex_61zpoe$("311B92"),this.MD_DEEP_PURPLE_A100=this.fromHex_61zpoe$("B388FF"),this.MD_DEEP_PURPLE_A200=this.fromHex_61zpoe$("7C4DFF"),this.MD_DEEP_PURPLE_A400=this.fromHex_61zpoe$("651FFF"),this.MD_DEEP_PURPLE_A700=this.fromHex_61zpoe$("6200EA"),this.MD_DEEP_PURPLE=this.MD_DEEP_PURPLE_500,this.MD_INDIGO_50=this.fromHex_61zpoe$("E8EAF6"),this.MD_INDIGO_100=this.fromHex_61zpoe$("C5CAE9"),this.MD_INDIGO_200=this.fromHex_61zpoe$("9FA8DA"),this.MD_INDIGO_300=this.fromHex_61zpoe$("7986CB"),this.MD_INDIGO_400=this.fromHex_61zpoe$("5C6BC0"),this.MD_INDIGO_500=this.fromHex_61zpoe$("3F51B5"),this.MD_INDIGO_600=this.fromHex_61zpoe$("3949AB"),this.MD_INDIGO_700=this.fromHex_61zpoe$("303F9F"),this.MD_INDIGO_800=this.fromHex_61zpoe$("283593"),this.MD_INDIGO_900=this.fromHex_61zpoe$("1A237E"),this.MD_INDIGO_A100=this.fromHex_61zpoe$("8C9EFF"),this.MD_INDIGO_A200=this.fromHex_61zpoe$("536DFE"),this.MD_INDIGO_A400=this.fromHex_61zpoe$("3D5AFE"),this.MD_INDIGO_A700=this.fromHex_61zpoe$("304FFE"),this.MD_INDIGO=this.MD_INDIGO_500,this.MD_BLUE_50=this.fromHex_61zpoe$("E3F2FD"),this.MD_BLUE_100=this.fromHex_61zpoe$("BBDEFB"),this.MD_BLUE_200=this.fromHex_61zpoe$("90CAF9"),this.MD_BLUE_300=this.fromHex_61zpoe$("64B5F6"),this.MD_BLUE_400=this.fromHex_61zpoe$("42A5F5"),this.MD_BLUE_500=this.fromHex_61zpoe$("2196F3"),this.MD_BLUE_600=this.fromHex_61zpoe$("1E88E5"),this.MD_BLUE_700=this.fromHex_61zpoe$("1976D2"),this.MD_BLUE_800=this.fromHex_61zpoe$("1565C0"),this.MD_BLUE_900=this.fromHex_61zpoe$("0D47A1"),this.MD_BLUE_A100=this.fromHex_61zpoe$("82B1FF"),this.MD_BLUE_A200=this.fromHex_61zpoe$("448AFF"),this.MD_BLUE_A400=this.fromHex_61zpoe$("2979FF"),this.MD_BLUE_A700=this.fromHex_61zpoe$("2962FF"),this.MD_BLUE=this.MD_BLUE_500,this.MD_LIGHT_BLUE_50=this.fromHex_61zpoe$("E1F5FE"),this.MD_LIGHT_BLUE_100=this.fromHex_61zpoe$("B3E5FC"),this.MD_LIGHT_BLUE_200=this.fromHex_61zpoe$("81D4FA"),this.MD_LIGHT_BLUE_300=this.fromHex_61zpoe$("4FC3F7"),this.MD_LIGHT_BLUE_400=this.fromHex_61zpoe$("29B6F6"),this.MD_LIGHT_BLUE_500=this.fromHex_61zpoe$("03A9F4"),this.MD_LIGHT_BLUE_600=this.fromHex_61zpoe$("039BE5"),this.MD_LIGHT_BLUE_700=this.fromHex_61zpoe$("0288D1"),this.MD_LIGHT_BLUE_800=this.fromHex_61zpoe$("0277BD"),this.MD_LIGHT_BLUE_900=this.fromHex_61zpoe$("01579B"),this.MD_LIGHT_BLUE_A100=this.fromHex_61zpoe$("80D8FF"),this.MD_LIGHT_BLUE_A200=this.fromHex_61zpoe$("40C4FF"),this.MD_LIGHT_BLUE_A400=this.fromHex_61zpoe$("00B0FF"),this.MD_LIGHT_BLUE_A700=this.fromHex_61zpoe$("0091EA"),this.MD_LIGHT_BLUE=this.MD_LIGHT_BLUE_500,this.MD_CYAN_50=this.fromHex_61zpoe$("E0F7FA"),this.MD_CYAN_100=this.fromHex_61zpoe$("B2EBF2"),this.MD_CYAN_200=this.fromHex_61zpoe$("80DEEA"),this.MD_CYAN_300=this.fromHex_61zpoe$("4DD0E1"),this.MD_CYAN_400=this.fromHex_61zpoe$("26C6DA"),this.MD_CYAN_500=this.fromHex_61zpoe$("00BCD4"),this.MD_CYAN_600=this.fromHex_61zpoe$("00ACC1"),this.MD_CYAN_700=this.fromHex_61zpoe$("0097A7"),this.MD_CYAN_800=this.fromHex_61zpoe$("00838F"),this.MD_CYAN_900=this.fromHex_61zpoe$("006064"),this.MD_CYAN_A100=this.fromHex_61zpoe$("84FFFF"),this.MD_CYAN_A200=this.fromHex_61zpoe$("18FFFF"),this.MD_CYAN_A400=this.fromHex_61zpoe$("00E5FF"),this.MD_CYAN_A700=this.fromHex_61zpoe$("00B8D4"),this.MD_CYAN=this.MD_CYAN_500,this.MD_TEAL_50=this.fromHex_61zpoe$("E0F2F1"),this.MD_TEAL_100=this.fromHex_61zpoe$("B2DFDB"),this.MD_TEAL_200=this.fromHex_61zpoe$("80CBC4"),this.MD_TEAL_300=this.fromHex_61zpoe$("4DB6AC"),this.MD_TEAL_400=this.fromHex_61zpoe$("26A69A"),this.MD_TEAL_500=this.fromHex_61zpoe$("009688"),this.MD_TEAL_600=this.fromHex_61zpoe$("00897B"),this.MD_TEAL_700=this.fromHex_61zpoe$("00796B"),this.MD_TEAL_800=this.fromHex_61zpoe$("00695C"),this.MD_TEAL_900=this.fromHex_61zpoe$("004D40"),this.MD_TEAL_A100=this.fromHex_61zpoe$("A7FFEB"),this.MD_TEAL_A200=this.fromHex_61zpoe$("64FFDA"),this.MD_TEAL_A400=this.fromHex_61zpoe$("1DE9B6"),this.MD_TEAL_A700=this.fromHex_61zpoe$("00BFA5"),this.MD_TEAL=this.MD_TEAL_500,this.MD_GREEN_50=this.fromHex_61zpoe$("E8F5E9"),this.MD_GREEN_100=this.fromHex_61zpoe$("C8E6C9"),this.MD_GREEN_200=this.fromHex_61zpoe$("A5D6A7"),this.MD_GREEN_300=this.fromHex_61zpoe$("81C784"),this.MD_GREEN_400=this.fromHex_61zpoe$("66BB6A"),this.MD_GREEN_500=this.fromHex_61zpoe$("4CAF50"),this.MD_GREEN_600=this.fromHex_61zpoe$("43A047"),this.MD_GREEN_700=this.fromHex_61zpoe$("388E3C"),this.MD_GREEN_800=this.fromHex_61zpoe$("2E7D32"),this.MD_GREEN_900=this.fromHex_61zpoe$("1B5E20"),this.MD_GREEN_A100=this.fromHex_61zpoe$("B9F6CA"),this.MD_GREEN_A200=this.fromHex_61zpoe$("69F0AE"),this.MD_GREEN_A400=this.fromHex_61zpoe$("00E676"),this.MD_GREEN_A700=this.fromHex_61zpoe$("00C853"),this.MD_GREEN=this.MD_GREEN_500,this.MD_LIGHT_GREEN_50=this.fromHex_61zpoe$("F1F8E9"),this.MD_LIGHT_GREEN_100=this.fromHex_61zpoe$("DCEDC8"),this.MD_LIGHT_GREEN_200=this.fromHex_61zpoe$("C5E1A5"),this.MD_LIGHT_GREEN_300=this.fromHex_61zpoe$("AED581"),this.MD_LIGHT_GREEN_400=this.fromHex_61zpoe$("9CCC65"),this.MD_LIGHT_GREEN_500=this.fromHex_61zpoe$("8BC34A"),this.MD_LIGHT_GREEN_600=this.fromHex_61zpoe$("7CB342"),this.MD_LIGHT_GREEN_700=this.fromHex_61zpoe$("689F38"),this.MD_LIGHT_GREEN_800=this.fromHex_61zpoe$("558B2F"),this.MD_LIGHT_GREEN_900=this.fromHex_61zpoe$("33691E"),this.MD_LIGHT_GREEN_A100=this.fromHex_61zpoe$("CCFF90"),this.MD_LIGHT_GREEN_A200=this.fromHex_61zpoe$("B2FF59"),this.MD_LIGHT_GREEN_A400=this.fromHex_61zpoe$("76FF03"),this.MD_LIGHT_GREEN_A700=this.fromHex_61zpoe$("64DD17"),this.MD_LIGHT_GREEN=this.MD_LIGHT_GREEN_500,this.MD_LIME_50=this.fromHex_61zpoe$("F9FBE7"),this.MD_LIME_100=this.fromHex_61zpoe$("F0F4C3"),this.MD_LIME_200=this.fromHex_61zpoe$("E6EE9C"),this.MD_LIME_300=this.fromHex_61zpoe$("DCE775"),this.MD_LIME_400=this.fromHex_61zpoe$("D4E157"),this.MD_LIME_500=this.fromHex_61zpoe$("CDDC39"),this.MD_LIME_600=this.fromHex_61zpoe$("C0CA33"),this.MD_LIME_700=this.fromHex_61zpoe$("AFB42B"),this.MD_LIME_800=this.fromHex_61zpoe$("9E9D24"),this.MD_LIME_900=this.fromHex_61zpoe$("827717"),this.MD_LIME_A100=this.fromHex_61zpoe$("F4FF81"),this.MD_LIME_A200=this.fromHex_61zpoe$("EEFF41"),this.MD_LIME_A400=this.fromHex_61zpoe$("C6FF00"),this.MD_LIME_A700=this.fromHex_61zpoe$("AEEA00"),this.MD_LIME=this.MD_LIME_500,this.MD_YELLOW_50=this.fromHex_61zpoe$("FFFDE7"),this.MD_YELLOW_100=this.fromHex_61zpoe$("FFF9C4"),this.MD_YELLOW_200=this.fromHex_61zpoe$("FFF59D"),this.MD_YELLOW_300=this.fromHex_61zpoe$("FFF176"),this.MD_YELLOW_400=this.fromHex_61zpoe$("FFEE58"),this.MD_YELLOW_500=this.fromHex_61zpoe$("FFEB3B"),this.MD_YELLOW_600=this.fromHex_61zpoe$("FDD835"),this.MD_YELLOW_700=this.fromHex_61zpoe$("FBC02D"),this.MD_YELLOW_800=this.fromHex_61zpoe$("F9A825"),this.MD_YELLOW_900=this.fromHex_61zpoe$("F57F17"),this.MD_YELLOW_A100=this.fromHex_61zpoe$("FFFF8D"),this.MD_YELLOW_A200=this.fromHex_61zpoe$("FFFF00"),this.MD_YELLOW_A400=this.fromHex_61zpoe$("FFEA00"),this.MD_YELLOW_A700=this.fromHex_61zpoe$("FFD600"),this.MD_YELLOW=this.MD_YELLOW_500,this.MD_AMBER_50=this.fromHex_61zpoe$("FFF8E1"),this.MD_AMBER_100=this.fromHex_61zpoe$("FFECB3"),this.MD_AMBER_200=this.fromHex_61zpoe$("FFE082"),this.MD_AMBER_300=this.fromHex_61zpoe$("FFD54F"),this.MD_AMBER_400=this.fromHex_61zpoe$("FFCA28"),this.MD_AMBER_500=this.fromHex_61zpoe$("FFC107"),this.MD_AMBER_600=this.fromHex_61zpoe$("FFB300"),this.MD_AMBER_700=this.fromHex_61zpoe$("FFA000"),this.MD_AMBER_800=this.fromHex_61zpoe$("FF8F00"),this.MD_AMBER_900=this.fromHex_61zpoe$("FF6F00"),this.MD_AMBER_A100=this.fromHex_61zpoe$("FFE57F"),this.MD_AMBER_A200=this.fromHex_61zpoe$("FFD740"),this.MD_AMBER_A400=this.fromHex_61zpoe$("FFC400"),this.MD_AMBER_A700=this.fromHex_61zpoe$("FFAB00"),this.MD_AMBER=this.MD_AMBER_500,this.MD_ORANGE_50=this.fromHex_61zpoe$("FFF3E0"),this.MD_ORANGE_100=this.fromHex_61zpoe$("FFE0B2"),this.MD_ORANGE_200=this.fromHex_61zpoe$("FFCC80"),this.MD_ORANGE_300=this.fromHex_61zpoe$("FFB74D"),this.MD_ORANGE_400=this.fromHex_61zpoe$("FFA726"),this.MD_ORANGE_500=this.fromHex_61zpoe$("FF9800"),this.MD_ORANGE_600=this.fromHex_61zpoe$("FB8C00"),this.MD_ORANGE_700=this.fromHex_61zpoe$("F57C00"),this.MD_ORANGE_800=this.fromHex_61zpoe$("EF6C00"),this.MD_ORANGE_900=this.fromHex_61zpoe$("E65100"),this.MD_ORANGE_A100=this.fromHex_61zpoe$("FFD180"),this.MD_ORANGE_A200=this.fromHex_61zpoe$("FFAB40"),this.MD_ORANGE_A400=this.fromHex_61zpoe$("FF9100"),this.MD_ORANGE_A700=this.fromHex_61zpoe$("FF6D00"),this.MD_ORANGE=this.MD_ORANGE_500,this.MD_DEEP_ORANGE_50=this.fromHex_61zpoe$("FBE9E7"),this.MD_DEEP_ORANGE_100=this.fromHex_61zpoe$("FFCCBC"),this.MD_DEEP_ORANGE_200=this.fromHex_61zpoe$("FFAB91"),this.MD_DEEP_ORANGE_300=this.fromHex_61zpoe$("FF8A65"),this.MD_DEEP_ORANGE_400=this.fromHex_61zpoe$("FF7043"),this.MD_DEEP_ORANGE_500=this.fromHex_61zpoe$("FF5722"),this.MD_DEEP_ORANGE_600=this.fromHex_61zpoe$("F4511E"),this.MD_DEEP_ORANGE_700=this.fromHex_61zpoe$("E64A19"),this.MD_DEEP_ORANGE_800=this.fromHex_61zpoe$("D84315"),this.MD_DEEP_ORANGE_900=this.fromHex_61zpoe$("BF360C"),this.MD_DEEP_ORANGE_A100=this.fromHex_61zpoe$("FF9E80"),this.MD_DEEP_ORANGE_A200=this.fromHex_61zpoe$("FF6E40"),this.MD_DEEP_ORANGE_A400=this.fromHex_61zpoe$("FF3D00"),this.MD_DEEP_ORANGE_A700=this.fromHex_61zpoe$("DD2C00"),this.MD_DEEP_ORANGE=this.MD_DEEP_ORANGE_500,this.MD_BROWN_50=this.fromHex_61zpoe$("EFEBE9"),this.MD_BROWN_100=this.fromHex_61zpoe$("D7CCC8"),this.MD_BROWN_200=this.fromHex_61zpoe$("BCAAA4"),this.MD_BROWN_300=this.fromHex_61zpoe$("A1887F"),this.MD_BROWN_400=this.fromHex_61zpoe$("8D6E63"),this.MD_BROWN_500=this.fromHex_61zpoe$("795548"),this.MD_BROWN_600=this.fromHex_61zpoe$("6D4C41"),this.MD_BROWN_700=this.fromHex_61zpoe$("5D4037"),this.MD_BROWN_800=this.fromHex_61zpoe$("4E342E"),this.MD_BROWN_900=this.fromHex_61zpoe$("3E2723"),this.MD_BROWN=this.MD_BROWN_500,this.MD_GREY_50=this.fromHex_61zpoe$("FAFAFA"),this.MD_GREY_100=this.fromHex_61zpoe$("F5F5F5"),this.MD_GREY_200=this.fromHex_61zpoe$("EEEEEE"),this.MD_GREY_300=this.fromHex_61zpoe$("E0E0E0"),this.MD_GREY_400=this.fromHex_61zpoe$("BDBDBD"),this.MD_GREY_500=this.fromHex_61zpoe$("9E9E9E"),this.MD_GREY_600=this.fromHex_61zpoe$("757575"),this.MD_GREY_700=this.fromHex_61zpoe$("616161"),this.MD_GREY_800=this.fromHex_61zpoe$("424242"),this.MD_GREY_900=this.fromHex_61zpoe$("212121"),this.MD_GREY=this.MD_GREY_500,this.MD_BLUE_GREY_50=this.fromHex_61zpoe$("ECEFF1"),this.MD_BLUE_GREY_100=this.fromHex_61zpoe$("CFD8DC"),this.MD_BLUE_GREY_200=this.fromHex_61zpoe$("B0BEC5"),this.MD_BLUE_GREY_300=this.fromHex_61zpoe$("90A4AE"),this.MD_BLUE_GREY_400=this.fromHex_61zpoe$("78909C"),this.MD_BLUE_GREY_500=this.fromHex_61zpoe$("607D8B"),this.MD_BLUE_GREY_600=this.fromHex_61zpoe$("546E7A"),this.MD_BLUE_GREY_700=this.fromHex_61zpoe$("455A64"),this.MD_BLUE_GREY_800=this.fromHex_61zpoe$("37474F"),this.MD_BLUE_GREY_900=this.fromHex_61zpoe$("263238"),this.MD_BLUE_GREY=this.MD_BLUE_GREY_500,this.MD_COLORS=At([this.MD_RED,this.MD_PINK,this.MD_PURPLE,this.MD_DEEP_PURPLE,this.MD_INDIGO,this.MD_BLUE,this.MD_LIGHT_BLUE,this.MD_CYAN,this.MD_TEAL,this.MD_GREEN,this.MD_LIGHT_GREEN,this.MD_LIME,this.MD_YELLOW,this.MD_AMBER,this.MD_ORANGE,this.MD_DEEP_ORANGE,this.MD_BROWN,this.MD_GREY,this.MD_BLUE_GREY])}S$.$metadata$={kind:$,simpleName:"AoPipeline",interfaces:[]},Object.defineProperty(O$.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmpty_xiuk4h$_0},set:function(t){this.isEmpty_xiuk4h$_0=t}}),Object.defineProperty(O$.prototype,"isBatchUpdate",{configurable:!0,get:function(){return this.isBatchUpdate_4nlnat$_0},set:function(t){this.isBatchUpdate_4nlnat$_0=t,t||this.updateSizeAndCenter_0()}}),O$.prototype.updateSizeAndCenter_0=function(){this.isBatchUpdate||(this.mutMax_0.subtract_2gj7b4$(this.mutMin_0,this.mutSize_0),this.size.scale_749b8l$(.5,this.mutCenter_0).add_czzhiu$(this.min))},O$.prototype.addPoint_0=function(t){this.isEmpty?(this.mutMin_0.set_czzhiu$(t),this.mutMax_0.set_czzhiu$(t),this.isEmpty=!1):(t.x<this.min.x&&(this.mutMin_0.x=t.x),t.y<this.min.y&&(this.mutMin_0.y=t.y),t.z<this.min.z&&(this.mutMin_0.z=t.z),t.x>this.max.x&&(this.mutMax_0.x=t.x),t.y>this.max.y&&(this.mutMax_0.y=t.y),t.z>this.max.z&&(this.mutMax_0.z=t.z))},O$.prototype.batchUpdate_xanadp$=K("kool-kool-core.de.fabmax.kool.util.BoundingBox.batchUpdate_xanadp$",(function(t){var e=this.isBatchUpdate;this.isBatchUpdate=!0,t(this),this.isBatchUpdate=e})),O$.prototype.isFuzzyEqual_ea4od8$=function(t){return this.isEmpty===t.isEmpty&&this.min.isFuzzyEqual_2qa7tb$(t.min)&&this.max.isFuzzyEqual_2qa7tb$(t.max)},O$.prototype.clear=function(){return this.isEmpty=!0,this.mutMin_0.set_czzhiu$(Er().ZERO),this.mutMax_0.set_czzhiu$(Er().ZERO),this.updateSizeAndCenter_0(),this},O$.prototype.add_czzhiu$=function(t){return this.addPoint_0(t),this.updateSizeAndCenter_0(),this},O$.prototype.add_uqk38n$=function(t){return this.add_3y53ni$(t,I(t)),this},O$.prototype.add_3y53ni$=function(t,e){var i,n,r;i=e.first,n=e.last,r=e.step;for(var o=i;o<=n;o+=r)this.addPoint_0(t.get_za3lpa$(o));return this.updateSizeAndCenter_0(),this},O$.prototype.add_ea4od8$=function(t){return t.isEmpty||(this.addPoint_0(t.min),this.addPoint_0(t.max),this.updateSizeAndCenter_0()),this},O$.prototype.expand_czzhiu$=function(t){if(this.isEmpty)throw cn("Empty BoundingBox cannot be expanded");return this.mutMin_0.minusAssign_czzhiu$(t),this.mutMax_0.plusAssign_czzhiu$(t),this.updateSizeAndCenter_0(),this},O$.prototype.signedExpand_czzhiu$=function(t){if(this.isEmpty)throw cn("Empty BoundingBox cannot be expanded");return t.x>0?this.mutMax_0.x=this.mutMax_0.x+t.x:this.mutMin_0.x=this.mutMin_0.x+t.x,t.y>0?this.mutMax_0.y=this.mutMax_0.y+t.y:this.mutMin_0.y=this.mutMin_0.y+t.y,t.z>0?this.mutMax_0.z=this.mutMax_0.z+t.z:this.mutMin_0.z=this.mutMin_0.z+t.z,this.updateSizeAndCenter_0(),this},O$.prototype.set_ea4od8$=function(t){return this.mutMin_0.set_czzhiu$(t.min),this.mutMax_0.set_czzhiu$(t.max),this.mutSize_0.set_czzhiu$(t.size),this.mutCenter_0.set_czzhiu$(t.center),this.isEmpty=t.isEmpty,this},O$.prototype.set_4lfkt4$=function(t,e){return this.isEmpty=!1,this.mutMin_0.set_czzhiu$(t),this.mutMax_0.set_czzhiu$(e),this.updateSizeAndCenter_0(),this},O$.prototype.set_w8lrqs$=function(t,e,i,n,r,o){return this.isEmpty=!1,this.mutMin_0.set_y2kzbl$(t,e,i),this.mutMax_0.set_y2kzbl$(n,r,o),this.updateSizeAndCenter_0(),this},O$.prototype.move_czzhiu$=function(t){return this.move_y2kzbl$(t.x,t.y,t.z)},O$.prototype.move_y2kzbl$=function(t,e,i){if(this.isEmpty)throw cn("Empty BoundingBox cannot be moved");return this.mutMin_0.x=this.mutMin_0.x+t,this.mutMin_0.y=this.mutMin_0.y+e,this.mutMin_0.z=this.mutMin_0.z+i,this.mutMax_0.x=this.mutMax_0.x+t,this.mutMax_0.y=this.mutMax_0.y+e,this.mutMax_0.z=this.mutMax_0.z+i,this.mutCenter_0.x=this.mutCenter_0.x+t,this.mutCenter_0.y=this.mutCenter_0.y+e,this.mutCenter_0.z=this.mutCenter_0.z+i,this},O$.prototype.setMerged_hnxjto$=function(t,e){var i=this.mutMin_0,n=t.min.x,r=e.min.x;i.x=A.min(n,r);var o=this.mutMin_0,s=t.min.y,a=e.min.y;o.y=A.min(s,a);var l=this.mutMin_0,u=t.min.z,p=e.min.z;l.z=A.min(u,p);var c=this.mutMax_0,h=t.max.x,d=e.max.x;c.x=A.max(h,d);var f=this.mutMax_0,_=t.max.y,m=e.max.y;f.y=A.max(_,m);var $=this.mutMax_0,y=t.max.z,v=e.max.z;return $.z=A.max(y,v),this.isEmpty=!1,this.updateSizeAndCenter_0(),this},O$.prototype.contains_czzhiu$=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z},O$.prototype.contains_y2kzbl$=function(t,e,i){return t>=this.min.x&&t<=this.max.x&&e>=this.min.y&&e<=this.max.y&&i>=this.min.z&&i<=this.max.z},O$.prototype.contains_ea4od8$=function(t){return this.contains_czzhiu$(t.min)&&this.contains_czzhiu$(t.max)},O$.prototype.isIntersecting_ea4od8$=function(t){return this.min.x<=t.max.x&&this.max.x>=t.min.x&&this.min.y<=t.max.y&&this.max.y>=t.min.y&&this.min.z<=t.max.z&&this.max.z>=t.min.z},O$.prototype.clampToBounds_5s4mqq$=function(t){var e,i=t.x,n=this.min.x,r=this.max.x;e=i<n?n:i>r?r:i,t.x=e;var o,s=t.y,a=this.min.y,l=this.max.y;o=s<a?a:s>l?l:s,t.y=o;var u,p=t.z,c=this.min.z,h=this.max.z;u=p<c?c:p>h?h:p,t.z=u},O$.prototype.clampToBounds_5s4mqs$=function(t){var e,i=t.x,n=this.min.x,r=this.max.x;e=i<n?n:i>r?r:i,t.x=e;var o,s=t.y,a=this.min.y,l=this.max.y;o=s<a?a:s>l?l:s,t.y=o;var u,p=t.z,c=this.min.z,h=this.max.z;u=p<c?c:p>h?h:p,t.z=u},O$.prototype.pointDistance_czzhiu$=function(t){var e=this.pointDistanceSqr_czzhiu$(t);return A.sqrt(e)},O$.prototype.pointDistanceSqr_czzhiu$=function(t){if(this.contains_czzhiu$(t))return 0;var e=0,i=0,n=0,r=t.x-this.min.x;return(r<0||(r=this.max.x-t.x)<0)&&(e=r),((r=t.y-this.min.y)<0||(r=this.max.y-t.y)<0)&&(i=r),((r=t.z-this.min.z)<0||(r=this.max.z-t.z)<0)&&(n=r),e*e+i*i+n*n},O$.prototype.hitDistanceSqr_nvyeur$=function(t){var e,i,n,r,o,s;if(this.isEmpty)return nt.MAX_VALUE;if(this.contains_czzhiu$(t.origin))return 0;var a=1/t.direction.x;if(a>=0?(e=(this.min.x-t.origin.x)*a,i=(this.max.x-t.origin.x)*a):(e=(this.max.x-t.origin.x)*a,i=(this.min.x-t.origin.x)*a),(a=1/t.direction.y)>=0?(n=(this.min.y-t.origin.y)*a,r=(this.max.y-t.origin.y)*a):(n=(this.max.y-t.origin.y)*a,r=(this.min.y-t.origin.y)*a),e>r||n>i)return nt.MAX_VALUE;if(n>e&&(e=n),r<i&&(i=r),(a=1/t.direction.z)>=0?(o=(this.min.z-t.origin.z)*a,s=(this.max.z-t.origin.z)*a):(o=(this.max.z-t.origin.z)*a,s=(this.min.z-t.origin.z)*a),e>s||o>i)return nt.MAX_VALUE;if(o>e&&(e=o),e>0){var l=t.direction.x*e,u=l*l;return u+=(l=t.direction.y*e)*l,(u+=(l=t.direction.z*e)*l)/t.direction.sqrLength()}return nt.MAX_VALUE},O$.prototype.toString=function(){return this.isEmpty?"[empty]":"[min="+this.min+", max="+this.max+"]"},O$.prototype.equals=function(t){var i,n;return this===t||!!e.isType(t,O$)&&this.isEmpty===t.isEmpty&&!(null==(i=this.min)||!i.equals(t.min))&&!(null==(n=this.max)||!n.equals(t.max))},O$.prototype.hashCode=function(){var t=rt(this.isEmpty);return t=(31*(t=(31*t|0)+this.min.hashCode()|0)|0)+this.max.hashCode()|0},O$.$metadata$={kind:$,simpleName:"BoundingBox",interfaces:[]},M$.prototype.removeAt_za3lpa$=function(t){this.position>t&&(this.position=this.position-1|0),this.limit>t&&(this.limit=this.limit-1|0)},M$.$metadata$={kind:st,simpleName:"Buffer",interfaces:[]},j$.prototype.plusAssign_s8j3t7$=function(t){this.put_s8j3t7$(t)},j$.prototype.put_fqrh44$=function(t){return this.put_mj6st8$(t,0,t.length)},j$.prototype.toArray=function(){var t,e=new Int8Array(this.capacity);t=this.capacity;for(var i=0;i<t;i++)e[i]=this.get_za3lpa$(i);return e},j$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_6t1wet$(i,this.get_za3lpa$(i+1|0));M$.prototype.removeAt_za3lpa$.call(this,t)},j$.$metadata$={kind:st,simpleName:"Uint8Buffer",interfaces:[M$]},A$.prototype.plusAssign_mq22fl$=function(t){this.put_mq22fl$(t)},A$.prototype.put_gmedm2$=function(t){return this.put_359eei$(t,0,t.length)},A$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_2bqt6h$(i,this.get_za3lpa$(i+1|0));M$.prototype.removeAt_za3lpa$.call(this,t)},A$.$metadata$={kind:st,simpleName:"Uint16Buffer",interfaces:[M$]},R$.prototype.plusAssign_za3lpa$=function(t){this.put_za3lpa$(t)},R$.prototype.put_q5rwfd$=function(t){return this.put_nd5v6f$(t,0,t.length)},R$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_vux9f0$(i,this.get_za3lpa$(i+1|0));M$.prototype.removeAt_za3lpa$.call(this,t)},R$.$metadata$={kind:st,simpleName:"Uint32Buffer",interfaces:[M$]},I$.prototype.plusAssign_mx4ult$=function(t){this.put_mx4ult$(t)},I$.prototype.put_q3cr5i$=function(t){return this.put_kgymra$(t,0,t.length)},I$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_24o109$(i,this.get_za3lpa$(i+1|0));M$.prototype.removeAt_za3lpa$.call(this,t)},I$.$metadata$={kind:st,simpleName:"Float32Buffer",interfaces:[M$]},L$.prototype.putInt8_s8j3t7$=function(t){return this.putUint8_s8j3t7$(t)},L$.prototype.putInt8_fqrh44$=function(t){return this.putUint8_fqrh44$(t)},L$.prototype.putInt8_mj6st8$=function(t,e,i){return this.putUint8_mj6st8$(t,e,i)},L$.prototype.putInt8_ay2i3f$=function(t){return this.putUint8_ay2i3f$(t)},L$.prototype.putInt16_mq22fl$=function(t){return this.putUint16_mq22fl$(t)},L$.prototype.putInt16_gmedm2$=function(t){return this.putUint16_gmedm2$(t)},L$.prototype.putInt16_359eei$=function(t,e,i){return this.putUint16_359eei$(t,e,i)},L$.prototype.putInt16_8k344i$=function(t){return this.putUint16_8k344i$(t)},L$.prototype.putInt32_za3lpa$=function(t){return this.putUint32_za3lpa$(t)},L$.prototype.putInt32_q5rwfd$=function(t){return this.putUint32_q5rwfd$(t)},L$.prototype.putInt32_nd5v6f$=function(t,e,i){return this.putUint32_nd5v6f$(t,e,i)},L$.prototype.putInt32_7hqxcs$=function(t){return this.putUint32_7hqxcs$(t)},L$.prototype.putUint8_fqrh44$=function(t){return this.putUint8_mj6st8$(t,0,t.length)},L$.prototype.putUint16_gmedm2$=function(t){return this.putUint16_359eei$(t,0,t.length)},L$.prototype.putUint32_q5rwfd$=function(t){return this.putUint32_nd5v6f$(t,0,t.length)},L$.prototype.putFloat32_q3cr5i$=function(t){return this.putFloat32_kgymra$(t,0,t.length)},L$.prototype.removeAt_za3lpa$=function(t){throw cn("MixedBuffer does not support element removal")},L$.$metadata$={kind:st,simpleName:"MixedBuffer",interfaces:[M$]},Object.defineProperty(B$.prototype,"r",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(B$.prototype,"g",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(B$.prototype,"b",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(B$.prototype,"a",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),B$.prototype.mix_y83vuj$=function(t,e){return this.mix_jpxij3$(t,e,H$())},B$.prototype.mix_jpxij3$=function(t,e,i){return i.r=t.r*e+this.r*(1-e),i.g=t.g*e+this.g*(1-e),i.b=t.b*e+this.b*(1-e),i.a=t.a*e+this.a*(1-e),i},B$.prototype.withAlpha_mx4ult$=function(t){return new G$(this.r,this.g,this.b,t)},B$.prototype.toLinear=function(){return this.gamma_mx4ult$(2.2)},B$.prototype.toLinear_b0h0gw$=function(t){return this.gamma_ccloyr$(2.2,t)},B$.prototype.toSrgb=function(){return this.gamma_mx4ult$(1/2.2)},B$.prototype.toSrgb_b0h0gw$=function(t){return this.gamma_ccloyr$(1/2.2,t)},B$.prototype.gamma_mx4ult$=function(t){return this.gamma_ccloyr$(t,H$())},B$.prototype.gamma_ccloyr$=function(t,e){var i=this.r,n=A.pow(i,t),r=this.g,o=A.pow(r,t),s=this.b;return e.set_7b5o5w$(n,o,A.pow(s,t),this.a)},F$.prototype.fromHsv_7b5o5w$=function(t,e,i,n){return H$().setHsv_7b5o5w$(t,e,i,n)},F$.prototype.fromHex_61zpoe$=function(t){if(0===t.length)return this.BLACK;var i=t;35===i.charCodeAt(0)&&(i=i.substring(1));var n=0,r=0,o=0,s=1;try{if(3===i.length){var a=ue(i.substring(0,1),16),l=ue(i.substring(1,2),16),u=ue(i.substring(2,3),16);n=(a|a<<4)/255,r=(l|l<<4)/255,o=(u|u<<4)/255}else if(4===i.length){var p=ue(i.substring(0,1),16),c=ue(i.substring(1,2),16),h=ue(i.substring(2,3),16),d=ue(i.substring(2,3),16);n=(p|p<<4)/255,r=(c|c<<4)/255,o=(h|h<<4)/255,s=(d|d<<4)/255}else 6===i.length?(n=ue(i.substring(0,2),16)/255,r=ue(i.substring(2,4),16)/255,o=ue(i.substring(4,6),16)/255):8===i.length&&(n=ue(i.substring(0,2),16)/255,r=ue(i.substring(2,4),16)/255,o=ue(i.substring(4,6),16)/255,s=ue(i.substring(6,8),16)/255)}catch(i){if(!e.isType(i,pe))throw i;var f=qN.Log,_=vz.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"invalid color code: "+t+", "+i)}return new B$(n,r,o,s)},F$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var U$=null;function V$(){return null===U$&&new F$,U$}function G$(t,e,i,n){B$.call(this,t,e,i,n)}function H$(t){return t=t||Object.create(G$.prototype),G$.call(t,0,0,0,1),t}function W$(t,e){return e=e||Object.create(G$.prototype),G$.call(e,t.r,t.g,t.b,t.a),e}B$.$metadata$={kind:$,simpleName:"Color",interfaces:[Yr]},Object.defineProperty(G$.prototype,"r",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(G$.prototype,"g",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(G$.prototype,"b",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(G$.prototype,"a",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_24o109$(3,t)}}),Object.defineProperty(G$.prototype,"array",{configurable:!0,get:function(){return this.fields}}),G$.prototype.add_czzhhz$=function(t){return this.r=this.r+t.x,this.g=this.g+t.y,this.b=this.b+t.z,this.a=this.a+t.w,this},G$.prototype.add_m79ulu$=function(t,e){return this.r=this.r+t.x*e,this.g=this.g+t.y*e,this.b=this.b+t.z*e,this.a=this.a+t.w*e,this},G$.prototype.subtract_czzhhz$=function(t){return this.r=this.r-t.x,this.g=this.g-t.y,this.b=this.b-t.z,this.a=this.a-t.w,this},G$.prototype.scale_mx4ult$=function(t){return this.r=this.r*t,this.g=this.g*t,this.b=this.b*t,this.a=this.a*t,this},G$.prototype.scaleRgb_mx4ult$=function(t){return this.r=this.r*t,this.g=this.g*t,this.b=this.b*t,this},G$.prototype.clear=function(){return this.set_7b5o5w$(0,0,0,0),this},G$.prototype.set_7b5o5w$=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this},G$.prototype.set_czzhhz$=function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this.a=t.w,this},G$.prototype.set_24o109$=function(t,e){this.fields[t]=e},G$.prototype.setHsv_7b5o5w$=function(t,e,i,n){var r=t%360;r<0&&(r+=360);var o=F(r/60),s=r/60-o,a=i*(1-e),l=i*(1-e*s),u=i*(1-e*(1-s));switch(o){case 1:this.set_7b5o5w$(l,i,a,n);break;case 2:this.set_7b5o5w$(a,i,u,n);break;case 3:this.set_7b5o5w$(a,l,i,n);break;case 4:this.set_7b5o5w$(u,a,i,n);break;case 5:this.set_7b5o5w$(i,a,l,n);break;default:this.set_7b5o5w$(i,u,a,n)}return this},G$.$metadata$={kind:$,simpleName:"MutableColor",interfaces:[B$]};var K$=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function X$(t,e){iy(),void 0===e&&(e=256);var i,n,r,o,s,a=R(e);i=a.length-1|0;for(var l=0;l<=i;l++)a[l]=H$();if(this.gradient_0=a,t.length<2)throw cn("ColorGradient requires at least two colors");t.length>1&&fe(t,new $t(K$(ny)));var u=he(t).first,p=de(t).first,c=0,h=t[(n=c,c=n+1|0,n)],d=t[(r=c,c=r+1|0,r)];o=e;for(var f=0;f<o;f++){for(var _=f/(e-1)*(p-u)+u;_>d.first;){h=d;var m=(c=(s=c)+1|0,s);d=t[A.min(m,t.length)]}var $=1-(_-h.first)/(d.first-h.first);this.gradient_0[f].set_czzhhz$(h.second).scale_mx4ult$($).add_m79ulu$(d.second,1-$)}}function Y$(){ey=this,this.DEFAULT_N=256,this.JET=ry([V$().BLUE,V$().CYAN,V$().GREEN,V$().YELLOW,V$().RED,V$().MAGENTA]),this.JET_MD=ry([V$().MD_BLUE,V$().MD_CYAN,V$().MD_GREEN,V$().MD_YELLOW,V$().MD_RED,V$().MD_PURPLE]),this.RED_YELLOW_GREEN=ry([V$().RED,V$().YELLOW,V$().GREEN]),this.RED_YELLOW_GREEN_MD=ry([V$().MD_RED,V$().MD_YELLOW,V$().MD_GREEN]),this.RED_WHITE_BLUE=new X$([ft(0,new B$(.35,0,0,1)),ft(.35,new B$(.81,.39,0,1)),ft(.5,V$().WHITE),ft(.75,new B$(0,.5,1,1)),ft(1,new B$(0,.18,.47,1))]),this.PLASMA=ry([new B$(.0504,.0298,.528,1),new B$(.1324,.0223,.5633,1),new B$(.1934,.0184,.5903,1),new B$(.2546,.0139,.6154,1),new B$(.3062,.0089,.6337,1),new B$(.3564,.0038,.6478,1),new B$(.4055,7e-4,.657,1),new B$(.4596,.0036,.6603,1),new B$(.5065,.0163,.6562,1),new B$(.5517,.0431,.6453,1),new B$(.595,.0772,.6279,1),new B$(.636,.1121,.6052,1),new B$(.6792,.1518,.5752,1),new B$(.7149,.1873,.5463,1),new B$(.7483,.2227,.5168,1),new B$(.7796,.2581,.4875,1),new B$(.8126,.2979,.4553,1),new B$(.8402,.3336,.4275,1),new B$(.8661,.3697,.4001,1),new B$(.8903,.4064,.3731,1),new B$(.9155,.4488,.3429,1),new B$(.9356,.4877,.316,1),new B$(.9534,.528,.2889,1),new B$(.9685,.5697,.2617,1),new B$(.9806,.613,.2346,1),new B$(.9899,.6638,.2049,1),new B$(.9941,.7107,.1801,1),new B$(.9939,.7593,.1591,1),new B$(.9886,.8096,.1454,1),new B$(.9763,.868,.1434,1),new B$(.9593,.9214,.1516,1),new B$(.94,.9752,.1313,1)]),this.VIRIDIS=ry([new B$(.267,.0049,.3294,1),new B$(.277,.0503,.3757,1),new B$(.2823,.095,.4173,1),new B$(.2826,.1409,.4575,1),new B$(.278,.1804,.4867,1),new B$(.2693,.2188,.5096,1),new B$(.2573,.2561,.5266,1),new B$(.2412,.2965,.5397,1),new B$(.2259,.3308,.5473,1),new B$(.2105,.3637,.5522,1),new B$(.1959,.3954,.5553,1),new B$(.1823,.4262,.5571,1),new B$(.1681,.46,.5581,1),new B$(.1563,.4896,.5579,1),new B$(.1448,.5191,.5566,1),new B$(.1337,.5485,.5535,1),new B$(.1235,.5817,.5474,1),new B$(.1194,.6111,.539,1),new B$(.1248,.6405,.5271,1),new B$(.1433,.6695,.5112,1),new B$(.1807,.7014,.4882,1),new B$(.2264,.7289,.4628,1),new B$(.2815,.7552,.4326,1),new B$(.3441,.78,.3974,1),new B$(.4129,.803,.3573,1),new B$(.4966,.8264,.3064,1),new B$(.5756,.8446,.2564,1),new B$(.6576,.8602,.2031,1),new B$(.7414,.8734,.1496,1),new B$(.8353,.886,.1026,1),new B$(.9162,.8961,.1007,1),new B$(.9932,.9062,.1439,1)])}X$.prototype.getColor_y2kzbl$=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var n=this.gradient_0,r=F((t-e)/(i-e)*this.gradient_0.length),o=this.gradient_0.length-1|0;return n[r<0?0:r>o?o:r]},X$.prototype.inverted=function(){var t,e=R(this.gradient_0.length);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=ft(i,this.gradient_0[ce(this.gradient_0)-i|0]);return new X$(e.slice(),this.gradient_0.length)},Y$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Z$,J$,Q$,ty,ey=null;function iy(){return null===ey&&new Y$,ey}function ny(t){return t.first}function ry(t,e,i){void 0===e&&(e=256),i=i||Object.create(X$.prototype);var n,r=R(t.length);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=ft(o,t[o]);return X$.call(i,r.slice(),e),i}function oy(t,e){void 0===e&&(e=0),this.data=t,this.byteOffset=e,this.index=0}function sy(t,e){var i,n,r;void 0===e&&(e=py()),this.ui=null,this.xOffset_un9ppf$_0=0,this.menuContainer_pm7z9i$_0=this.menuContainer_pm7z9i$_0,this.ui=Q_(t.screenDpi,"debug-overlay",void 0,(i=this,n=t,r=e,function(t,e){return t.theme=mm(hm().DARK_SIMPLE,fy),t.content.ui.setCustom_11rb$(new Qf),t.unaryPlus_uv0sim$(t.container_t34sov$("dbgPanel",function(t,e,i,n){return function(r){var o;t.menuContainer_0=r,r.customTransform=function(t){return function(e){return e.translate_y2kzbl$(t.xOffset,0,0),s}}(t);var a=168+18*e.getSysInfos().size;switch(i.name){case"UPPER_LEFT":r.layoutSpec.setOrigin_4ujscr$(d_(),m_(-a,!0),d_());break;case"UPPER_RIGHT":r.layoutSpec.setOrigin_4ujscr$(m_(-180,!0),m_(-a,!0),d_());break;case"LOWER_LEFT":r.layoutSpec.setOrigin_4ujscr$(d_(),d_(),d_());break;case"LOWER_RIGHT":r.layoutSpec.setOrigin_4ujscr$(m_(-180,!0),d_(),d_())}r.layoutSpec.setSize_4ujscr$(m_(180,!0),m_(a,!0),f_());var l=new my(n);l.layoutSpec.setOrigin_4ujscr$(d_(),m_(-40,!0),d_()),l.layoutSpec.setSize_4ujscr$(m_(180,!0),m_(40,!0),f_()),r.unaryPlus_uv0sim$(l),r.unaryPlus_uv0sim$(n.label_tokfmu$("lblFps",function(t,e){return function(i){var n;return i.layoutSpec.setOrigin_4ujscr$(d_(),m_(-37,!0),d_()),i.layoutSpec.setSize_4ujscr$(m_(t,!0),m_(37,!0),f_()),i.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),i.textAlignment=new N_(O_(),O_()),i.text="",i.font.setCustom_11rb$(hm().DARK_SIMPLE.standardFont_oei9ky$(i.dpi,e)),i.textColor.setCustom_11rb$(i.root.theme.accentColor),i.onUpdate.add_11rb$((n=i,function(t,e){return n.text=MS(e.ctx.fps,1)+" fps",s})),s}}(180,e)));var u,p,c={v:-60};r.unaryPlus_uv0sim$(n.label_tokfmu$("lblKoolVersion",(u=c,p=180,function(t){return t.layoutSpec.setOrigin_4ujscr$(d_(),m_(u.v,!0),d_()),t.layoutSpec.setSize_4ujscr$(m_(p,!0),m_(18,!0),f_()),t.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),t.textAlignment=new N_(M_(),O_()),t.text="Kool v0.6.0-200831.2256",s}))),c.v-=18,o=e.getSysInfos();for(var h=0;h!==o.size;++h)r.unaryPlus_uv0sim$(n.label_tokfmu$("lblSysInfo_"+h,_y(c,180,h))),c.v-=18;return r.unaryPlus_uv0sim$(n.label_tokfmu$("lblVpSize",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){return t.windowWidth===e.v&&t.windowHeight===i.v||(e.v=t.windowWidth,i.v=t.windowHeight,n.text="Viewport: "+t.windowWidth+"x"+t.windowHeight),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblUpTime",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_()),n.text="Up: 00:00.00";var r=n.onUpdate,o=function(t,e,i){return function(n,r){if(e.v-=t.deltaT,e.v<0){e.v+=1;var o=""+Ct(F(t.time/3600));1===o.length&&(o="0"+o);var a=""+Ct(F(t.time%3600/60));1===a.length&&(a="0"+a);var l=""+Ct(F(t.time%60));1===l.length&&(l="0"+l),i.text="Up: "+o+":"+a+"."+l}return s}}(i,{v:1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumTextures",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){var a=t.engineStats.textureAllocations.size,l=t.engineStats.totalTextureSize.toNumber();return a===e.v&&l===i.v||(e.v=a,i.v=l,n.text=a.toString()+" Textures: "+MS(l/1048576,1)+"M"),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumBuffers",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){var a=t.engineStats.bufferAllocations.size,l=t.engineStats.totalBufferSize.toNumber();return a===e.v&&l===i.v||(e.v=a,i.v=l,n.text=a.toString()+" Buffers: "+MS(l/1048576,1)+"M"),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumShaders",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){var a=t.engineStats.pipelines.size,l=t.engineStats.numDrawCommands;return l===e.v&&a===i.v||(i.v=a,e.v=l,n.text=a.toString()+" Shaders / "+l+" Cmds"),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumFaces",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_());var r=n.onUpdate,o=function(t,e,i){return function(n,r){var o=t.engineStats.numPrimitives;return o!==e.v&&(e.v=o,i.text=o.toString()+" Faces"),s}}(i,{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),s}}(i,n,r,t))),s})),this.ui.isPickingEnabled=!1}function ay(t,e){P.call(this),this.name$=t,this.ordinal$=e}function ly(){ly=function(){},Z$=new ay("UPPER_LEFT",0),J$=new ay("UPPER_RIGHT",1),Q$=new ay("LOWER_LEFT",2),ty=new ay("LOWER_RIGHT",3)}function uy(){return ly(),Z$}function py(){return ly(),J$}function cy(){return ly(),Q$}function hy(){return ly(),ty}function dy(t){return new Qf}function fy(t){return t.componentUi_mloaa0$(dy),t.containerUi_2t3ptw$(Kt("SimpleComponentUi",(function(t){return new t_(t)}))),t.standardFont_ttufcy$(new mv(gv().SYSTEM_FONT,12)),s}function _y(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(d_(),m_(t.v,!0),d_()),n.layoutSpec.setSize_4ujscr$(m_(e,!0),m_(18,!0),f_()),n.padding=new C_(d_(),d_(),m_(4,!0),m_(4,!0)),n.textAlignment=new N_(M_(),O_()),n.text="";var r=n.onUpdate,o=function(t,e){return function(i,n){return e.text=n.ctx.getSysInfos().get_za3lpa$(t),s}}(i,n);return r.add_11rb$(o),s}}function my(t){H_.call(this,"deltaT",t),this.graphMesh=null,this.graphGeom=new Bw(rm().UI_MESH_ATTRIBS),this.graphBuilder=new Ez(this.graphGeom),this.graphVertex=this.graphGeom.get_za3lpa$(0),this.graphIdx=0,this.prevDeltaT=0,this.graphMesh=new Fd(this.graphGeom),this.graphMesh.geometry.usage=rz(),this.graphMesh.shader=new em}function $y(t){gy(),sc.call(this,gy().shaderModel_l5ebkw$(t)),this.deferredCameraNode_0=null,this.sceneCamera_f7edkp$_0=t.sceneCamera,this.positionAoSampler_0=null,this.normalRoughnessSampler_0=null,this.albedoMetalSampler_0=null,this.positionAo_ot9dej$_0=t.positionAo,this.normalRoughness_mouyfl$_0=t.normalRoughness,this.albedoMetal_35ktqu$_0=t.albedoMetal}function yy(){vy=this,this.LIGHT_POS=new ps("aLightPos",is()),this.LIGHT_DIR=new ps("aLightDir",is())}X$.$metadata$={kind:$,simpleName:"ColorGradient",interfaces:[]},oy.prototype.hasRemaining=function(){return this.index<this.data.capacity},oy.prototype.readByte=function(){var t;return this.data.get_za3lpa$(this.byteOffset+(t=this.index,this.index=t+1|0,t)|0)},oy.prototype.readUByte=function(){var t;return 255&this.data.get_za3lpa$(this.byteOffset+(t=this.index,this.index=t+1|0,t)|0)},oy.prototype.readShort=function(){var t=this.readUShort();return t>32767&&(t=t-65536|0),t},oy.prototype.readUShort=function(){for(var t=0,e=0;e<=1;e++)t|=this.readUByte()<<(8*e|0);return t},oy.prototype.readInt=function(){return this.readUInt()},oy.prototype.readUInt=function(){for(var t=0,e=0;e<=3;e++)t|=this.readUByte()<<(8*e|0);return t},oy.prototype.readFloat=function(){var t=this.readUInt();return e.floatFromBits(t)},oy.prototype.readData_za3lpa$=function(t){for(var e,i=wN(t),n=0;n<t;n++)i.set_6t1wet$(n,this.data.get_za3lpa$((e=this.index,this.index=e+1|0,e)));return i},oy.prototype.skipBytes_za3lpa$=function(t){this.index=this.index+t|0},oy.$metadata$={kind:$,simpleName:"DataStream",interfaces:[]},Object.defineProperty(sy.prototype,"xOffset",{configurable:!0,get:function(){return this.xOffset_un9ppf$_0},set:function(t){this.xOffset_un9ppf$_0!==t&&(this.xOffset_un9ppf$_0=t,this.menuContainer_0.requestUpdateTransform())}}),Object.defineProperty(sy.prototype,"menuContainer_0",{configurable:!0,get:function(){return null==this.menuContainer_pm7z9i$_0?pt("menuContainer"):this.menuContainer_pm7z9i$_0},set:function(t){this.menuContainer_pm7z9i$_0=t}}),ay.$metadata$={kind:$,simpleName:"Position",interfaces:[P]},ay.values=function(){return[uy(),py(),cy(),hy()]},ay.valueOf_61zpoe$=function(t){switch(t){case"UPPER_LEFT":return uy();case"UPPER_RIGHT":return py();case"LOWER_LEFT":return cy();case"LOWER_RIGHT":return hy();default:T("No enum constant de.fabmax.kool.util.DebugOverlay.Position."+t)}},sy.$metadata$={kind:$,simpleName:"DebugOverlay",interfaces:[]},my.prototype.collectDrawCommands_kma0q5$=function(t){var e=V$().WHITE;this.prevDeltaT>.05?e=V$().RED:this.prevDeltaT>.025&&(e=V$().YELLOW),this.setCurrentBarColor_d7aj7k$(e),this.prevDeltaT=t.deltaT,this.graphIdx=(this.graphIdx+4|0)%(4*F(this.width)|0),this.graphVertex.index=this.graphIdx;var i,n,r=this.graphVertex.position.y,o=250*t.deltaT,s=this.height,a=A.min(o,s);(i=this.graphVertex).index=i.index+1|0,this.graphVertex.position.y=r+a,(n=this.graphVertex).index=n.index+1|0,this.graphVertex.position.y=r+a,this.setCurrentBarColor_d7aj7k$(V$().MAGENTA),this.graphGeom.hasChanged=!0,H_.prototype.collectDrawCommands_kma0q5$.call(this,t)},my.prototype.setCurrentBarColor_d7aj7k$=function(t){this.graphVertex.index=this.graphIdx;for(var e=0;e<=3;e++)this.graphVertex.index=this.graphIdx+e|0,this.graphVertex.color.set_czzhhz$(t)},my.prototype.updateUi_aemszp$=function(t){H_.prototype.updateUi_aemszp$.call(this,t),this.setupBuilder_84rojv$(this.graphBuilder),this.graphBuilder.color=V$().WHITE;var e,i=this.graphBuilder;i.transform.push(),i.translate_y2kzbl$(0,0,0),e=F(this.width);for(var n=1;n<=e;n++)this.graphBuilder.line_s2l86p$(n-.5,0,n-.5,1,1);i.transform.pop()},my.prototype.updateTheme_aemszp$=function(t){H_.prototype.updateTheme_aemszp$.call(this,t),this.minusAssign_f1kmr1$(this.graphMesh),this.plusAssign_f1kmr1$(this.graphMesh)},my.$metadata$={kind:$,simpleName:"DeltaTGraph",interfaces:[H_]},Object.defineProperty($y.prototype,"sceneCamera",{configurable:!0,get:function(){return this.sceneCamera_f7edkp$_0},set:function(t){var e;this.sceneCamera_f7edkp$_0=t,null!=(e=this.deferredCameraNode_0)&&(e.sceneCam=t)}}),Object.defineProperty($y.prototype,"positionAo",{configurable:!0,get:function(){return this.positionAo_ot9dej$_0},set:function(t){var e;this.positionAo_ot9dej$_0=t,null!=(e=this.positionAoSampler_0)&&(e.texture=t)}}),Object.defineProperty($y.prototype,"normalRoughness",{configurable:!0,get:function(){return this.normalRoughness_mouyfl$_0},set:function(t){var e;this.normalRoughness_mouyfl$_0=t,null!=(e=this.normalRoughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty($y.prototype,"albedoMetal",{configurable:!0,get:function(){return this.albedoMetal_35ktqu$_0},set:function(t){var e;this.albedoMetal_35ktqu$_0=t,null!=(e=this.albedoMetalSampler_0)&&(e.texture=t)}}),$y.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.blendMode=ol(),t.cullMethod=wl(),t.depthTest=pl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},$y.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f=this.model;t:do{var _;for(h=Fp.ALL,_=f.stages.values.iterator();_.hasNext();){var m=_.next();if(0!=(m.stage.mask&h.mask)){var $,y,v=m.nodes;e:do{var g;for(g=v.iterator();g.hasNext();){var b=g.next();if(zt(b.name,"deferredCam")&&e.isType(b,Uy)){y=b;break e}}y=null}while(0);var x=null==($=y)||e.isType($,Uy)?$:c();if(null!=x){d=x;break t}}}d=null}while(0);this.deferredCameraNode_0=d,null!=(r=this.deferredCameraNode_0)&&(r.sceneCam=this.sceneCamera);var w,z,k=this.model;t:do{var S;for(w=Fp.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&w.mask)){var N,E,P=C.nodes;e:do{var T;for(T=P.iterator();T.hasNext();){var O=T.next();if(zt(O.name,"positionAo")&&e.isType(O,up)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,up)?N:c();if(null!=M){z=M;break t}}}z=null}while(0);this.positionAoSampler_0=null!=(o=z)?o.sampler:null,null!=(s=this.positionAoSampler_0)&&(s.texture=this.positionAo);var j,A,R=this.model;t:do{var I;for(j=Fp.ALL,I=R.stages.values.iterator();I.hasNext();){var L=I.next();if(0!=(L.stage.mask&j.mask)){var D,q,B=L.nodes;e:do{var F;for(F=B.iterator();F.hasNext();){var U=F.next();if(zt(U.name,"normalRoughness")&&e.isType(U,up)){q=U;break e}}q=null}while(0);var V=null==(D=q)||e.isType(D,up)?D:c();if(null!=V){A=V;break t}}}A=null}while(0);this.normalRoughnessSampler_0=null!=(a=A)?a.sampler:null,null!=(l=this.normalRoughnessSampler_0)&&(l.texture=this.normalRoughness);var G,H,W=this.model;t:do{var K;for(G=Fp.ALL,K=W.stages.values.iterator();K.hasNext();){var X=K.next();if(0!=(X.stage.mask&G.mask)){var Y,Z,J=X.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(zt(tt.name,"albedoMetal")&&e.isType(tt,up)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,up)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);this.albedoMetalSampler_0=null!=(u=H)?u.sampler:null,null!=(p=this.albedoMetalSampler_0)&&(p.texture=this.albedoMetal),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},yy.prototype.shaderModel_l5ebkw$=function(t){var e,i=new Ru("point light shader model"),n={v:null},r={v:null},o={v:null},s={v:null},a=new Lu(i),l=a.instanceAttrModelMat().output,u=a.multiplyNode_ze33is$(a.premultipliedMvpNode().outMvpMat,l).output;a.positionOutput=a.vec4TransformNode_9krp9t$(a.attrPositions().output,u).outVec4,n.v=a.stageInterfaceNode_iikjwn$("ifFragCoords",a.positionOutput),r.v=a.stageInterfaceNode_iikjwn$("ifLightColor",a.instanceAttributeNode_nm2vx5$(ds().COLORS).output,!0),o.v=a.stageInterfaceNode_iikjwn$("ifLightPos",a.instanceAttributeNode_nm2vx5$(this.LIGHT_POS).output,!0),e=t.lightType===Ld()?null:a.stageInterfaceNode_iikjwn$("ifLightDir",a.instanceAttributeNode_nm2vx5$(this.LIGHT_DIR).output,!0),s.v=e;var p,c=new Du(i),h=c.divideNode_ze33is$(c.splitNode_500t7j$(n.v.output,"xy").output,c.splitNode_500t7j$(n.v.output,"w").output).output,d=c.addNode_ze33is$(c.multiplyNode_tuikh5$(h,.5).output,new Bu(new wu(.5))).output,f=c.addNode_u9w9by$(new Ry(c.stage));f.inPositionAo=c.textureSamplerNode_ce41yx$(c.textureNode_61zpoe$("positionAo"),d).outColor,f.inNormalRough=c.textureSamplerNode_ce41yx$(c.textureNode_61zpoe$("normalRoughness"),d).outColor,f.inAlbedoMetallic=c.textureSamplerNode_ce41yx$(c.textureNode_61zpoe$("albedoMetal"),d).outColor;var _=f;c.addNode_u9w9by$(new Fy(c.stage)).inViewPos=_.outViewPos;var m=c.addNode_u9w9by$(new Uy(c.stage)),$=c.vec3TransformNode_vid4wo$(_.outViewPos,m.outInvViewMat,1).outVec3,y=c.vec3TransformNode_vid4wo$(_.outViewNormal,m.outInvViewMat,0).outVec3;if(t.lightType===Dd()){var v=c.addNode_u9w9by$(new Yl(c.stage));v.isReducedSoi=!0,v.inLightPos=o.v.output,v.inLightColor=r.v.output,v.inLightDir=x(s.v).output,p=v}else{var g=c.addNode_u9w9by$(new Xl(c.stage));g.isReducedSoi=!0,g.inLightPos=o.v.output,g.inLightColor=r.v.output,p=g}var b=p,w=c.pbrLightNode_mvnx9n$(b);w.lightBacksides=t.lightBacksides,w.inFragPos=$,w.inNormal=y,w.inCamPos=m.outCamPos,w.inAlbedo=_.outAlbedo,w.inMetallic=_.outMetallic,w.inRoughness=_.outRoughness;var z=w;return c.colorOutput_a3v4si$(z.outColor),i},yy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vy=null;function gy(){return null===vy&&new yy,vy}function by(){this.lightType_vh4r6w$_0=Ld(),this.sceneCamera=null,this.lightBacksides=!1,this.positionAo=null,this.normalRoughness=null,this.albedoMetal=null}function xy(t,i){ky(),void 0===i&&(i=!1);var n,r,o,a=new Od,l=new ia,u=i;for(l.name="DeferredMrtPass",l.setDynamicSize(),l.setDepthTexture_6taknv$(!1),n=(u?ky().FORMATS_DEFERRED_EMISSIVE:ky().FORMATS_DEFERRED).iterator();n.hasNext();){var p=n.next();l.addColorTexture_farcsl$(p)}ua.call(this,a,new ea(l)),this.withEmissive=i,this.content=e.isType(r=this.drawNode,Od)?r:c(),this.alphaMeshes_8be2vx$=M();var h,d,f=new Sd(e.isType(o=t.camera,kd)?o:c());this.camera=f,this.onBeforeCollectDrawCommands.add_11rb$((h=f,d=t,function(t){return h.sync_hrtwbc$(d.mainRenderPass.viewport,t),s})),t.addOffscreenPass_m1c2kf$(this),this.clearColors[0]=new B$(0,0,1,0),this.clearColors[1]=null,this.clearColors[2]=null,this.withEmissive&&(this.clearColors[3]=null),this.content.isFrustumChecked=!1,this.drawQueue.meshFilter=Sy}function wy(){zy=this,this.FMT_POSITION_AO=Jc(),this.FMT_NORMAL_ROUGH=Jc(),this.FMT_ALBEDO_METAL=Kc(),this.FMT_EMISSIVE=Kc(),this.FORMATS_DEFERRED=At([this.FMT_POSITION_AO,this.FMT_NORMAL_ROUGH,this.FMT_ALBEDO_METAL]),this.FORMATS_DEFERRED_EMISSIVE=At([this.FMT_POSITION_AO,this.FMT_NORMAL_ROUGH,this.FMT_ALBEDO_METAL,this.FMT_EMISSIVE])}Object.defineProperty(by.prototype,"lightType",{configurable:!0,get:function(){return this.lightType_vh4r6w$_0},set:function(t){var i;if(t===Id()){var n=qN.Log,r=vz.ERROR,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"Directional lights are not supported for deferred lights, use global lighting instead."),i=Ld()}else i=t;this.lightType_vh4r6w$_0=i}}),by.$metadata$={kind:$,simpleName:"Config",interfaces:[]},$y.$metadata$={kind:$,simpleName:"DeferredLightShader",interfaces:[sc]},Object.defineProperty(xy.prototype,"positionAo",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(0)}}),Object.defineProperty(xy.prototype,"normalRoughness",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(1)}}),Object.defineProperty(xy.prototype,"albedoMetal",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(2)}}),Object.defineProperty(xy.prototype,"emissive",{configurable:!0,get:function(){return this.withEmissive?this.colorTextures.get_za3lpa$(3):null}}),xy.prototype.collectDrawCommands_aemszp$=function(t){this.alphaMeshes_8be2vx$.clear(),ua.prototype.collectDrawCommands_aemszp$.call(this,t)},xy.prototype.addMesh_sbx4mf$=function(t,e){var i;return t.isOpaque?i=ua.prototype.addMesh_sbx4mf$.call(this,t,e):(this.alphaMeshes_8be2vx$.add_11rb$(t),i=null),i},xy.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},wy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var zy=null;function ky(){return null===zy&&new wy,zy}function Sy(t){return t.isOpaque}function Cy(t,e){Py(),sc.call(this,Py().outputModel_0()),this.pbrOutput_0=t,this.depth_0=e}function Ny(){Ey=this}xy.$metadata$={kind:$,simpleName:"DeferredMrtPass",interfaces:[ua]},Cy.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l=this.model;t:do{var u;for(s=Fp.ALL,u=l.stages.values.iterator();u.hasNext();){var p=u.next();if(0!=(p.stage.mask&s.mask)){var h,d,f=p.nodes;e:do{var _;for(_=f.iterator();_.hasNext();){var m=_.next();if(zt(m.name,"deferredPbrOutput")&&e.isType(m,up)){d=m;break e}}d=null}while(0);var $=null==(h=d)||e.isType(h,up)?h:c();if(null!=$){a=$;break t}}}a=null}while(0);var y=null!=(r=a)?r.sampler:null;null!=y&&(y.texture=this.pbrOutput_0);var v,g,b=this.model;t:do{var x;for(v=Fp.ALL,x=b.stages.values.iterator();x.hasNext();){var w=x.next();if(0!=(w.stage.mask&v.mask)){var z,k,S=w.nodes;e:do{var C;for(C=S.iterator();C.hasNext();){var N=C.next();if(zt(N.name,"deferredDepthOutput")&&e.isType(N,up)){k=N;break e}}k=null}while(0);var E=null==(z=k)||e.isType(z,up)?z:c();if(null!=E){g=E;break t}}}g=null}while(0);var P=null!=(o=g)?o.sampler:null;null!=P&&(P.texture=this.depth_0),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Ny.prototype.outputModel_0=function(){var t=new Ru("DeferredOutputShader"),e={v:null},i=new Lu(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.fullScreenQuadPositionNode_r20yfm$(i.attrTexCoords().output).outQuadPos;var n=new Du(t),r=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("deferredPbrOutput"),e.v.output);n.colorOutput_a3v4si$(n.hdrToLdrNode_r20yfm$(r.outColor).outColor);var o=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("deferredDepthOutput"),e.v.output);return n.depthOutput_r20yfm$(o.outColor),t},Ny.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ey=null;function Py(){return null===Ey&&new Ny,Ey}function Ty(t,e){jy(),void 0===e&&(e=jy().defaultMrtPbrModel_2ufela$(t)),sc.call(this,e),this.cullMethod_aft819$_0=t.cullMethod,this.uRoughness_l04x3p$_0=null,this.uMetallic_zgqm06$_0=null,this.uAlbedo_4phmdc$_0=null,this.uEmissive_2p1vku$_0=null,this.metallic_mwthg9$_0=t.metallic,this.roughness_cztq66$_0=t.roughness,this.albedo_9owvlf$_0=t.albedo,this.emissive_9uv8z3$_0=t.emissive,this.albedoSampler_4xngv3$_0=null,this.emissiveSampler_7gr0w3$_0=null,this.normalSampler_9dwwj7$_0=null,this.metallicSampler_2ylj7p$_0=null,this.roughnessSampler_3dp96a$_0=null,this.occlusionSampler_slvtxn$_0=null,this.displacementSampler_8zs1vn$_0=null,this.uDispStrength_86lbd6$_0=null,this.metallicTexName_o5b24b$_0=t.metallicTexName,this.roughnessTexName_ht09qc$_0=t.roughnessTexName,this.occlusionTexName_l8ip4v$_0=t.occlusionTexName,this.albedoMap_583l57$_0=t.albedoMap,this.emissiveMap_lef1wp$_0=t.emissiveMap,this.normalMap_o8h8ft$_0=t.normalMap,this.metallicMap_onr26n$_0=t.metallicMap,this.roughnessMap_kdfn22$_0=t.roughnessMap,this.occlusionMap_ewiscp$_0=t.occlusionMap,this.displacementMap_1yztpl$_0=t.displacementMap,this.displacementStrength_i48dea$_0=t.displacementStrength}function Oy(){My=this}Cy.$metadata$={kind:$,simpleName:"DeferredOutputShader",interfaces:[sc]},Object.defineProperty(Ty.prototype,"metallic",{configurable:!0,get:function(){return this.metallic_mwthg9$_0},set:function(t){var e,i;this.metallic_mwthg9$_0=t,null!=(i=null!=(e=this.uMetallic_zgqm06$_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Ty.prototype,"roughness",{configurable:!0,get:function(){return this.roughness_cztq66$_0},set:function(t){var e,i;this.roughness_cztq66$_0=t,null!=(i=null!=(e=this.uRoughness_l04x3p$_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Ty.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_9owvlf$_0},set:function(t){var e,i,n;this.albedo_9owvlf$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_4phmdc$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Ty.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_9uv8z3$_0},set:function(t){var e,i,n;this.emissive_9uv8z3$_0=t,null!=(n=null!=(i=null!=(e=this.uEmissive_2p1vku$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Ty.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_583l57$_0},set:function(t){var e;this.albedoMap_583l57$_0=t,null!=(e=this.albedoSampler_4xngv3$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"emissiveMap",{configurable:!0,get:function(){return this.emissiveMap_lef1wp$_0},set:function(t){var e;this.emissiveMap_lef1wp$_0=t,null!=(e=this.emissiveSampler_7gr0w3$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_o8h8ft$_0},set:function(t){var e;this.normalMap_o8h8ft$_0=t,null!=(e=this.normalSampler_9dwwj7$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"metallicMap",{configurable:!0,get:function(){return this.metallicMap_onr26n$_0},set:function(t){var e;this.metallicMap_onr26n$_0=t,null!=(e=this.metallicSampler_2ylj7p$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"roughnessMap",{configurable:!0,get:function(){return this.roughnessMap_kdfn22$_0},set:function(t){var e;this.roughnessMap_kdfn22$_0=t,null!=(e=this.roughnessSampler_3dp96a$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"occlusionMap",{configurable:!0,get:function(){return this.occlusionMap_ewiscp$_0},set:function(t){var e;this.occlusionMap_ewiscp$_0=t,null!=(e=this.occlusionSampler_slvtxn$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"displacementMap",{configurable:!0,get:function(){return this.displacementMap_1yztpl$_0},set:function(t){var e;this.displacementMap_1yztpl$_0=t,null!=(e=this.displacementSampler_8zs1vn$_0)&&(e.texture=t)}}),Object.defineProperty(Ty.prototype,"displacementStrength",{configurable:!0,get:function(){return this.displacementStrength_i48dea$_0},set:function(t){var e,i;this.displacementStrength_i48dea$_0=t,null!=(i=null!=(e=this.uDispStrength_86lbd6$_0)?e.uniform:null)&&(i.value=t)}}),Ty.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_aft819$_0,t.blendMode=rl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Ty.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,P=this.model;t:do{var T;for(N=Fp.ALL,T=P.stages.values.iterator();T.hasNext();){var O=T.next();if(0!=(O.stage.mask&N.mask)){var M,j,A=O.nodes;e:do{var R;for(R=A.iterator();R.hasNext();){var I=R.next();if(zt(I.name,"uMetallic")&&e.isType(I,dp)){j=I;break e}}j=null}while(0);var L=null==(M=j)||e.isType(M,dp)?M:c();if(null!=L){E=L;break t}}}E=null}while(0);this.uMetallic_zgqm06$_0=E,null!=(r=this.uMetallic_zgqm06$_0)&&(r.uniform.value=this.metallic);var D,q,B=this.model;t:do{var F;for(D=Fp.ALL,F=B.stages.values.iterator();F.hasNext();){var U=F.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var K=W.next();if(zt(K.name,"uRoughness")&&e.isType(K,dp)){G=K;break e}}G=null}while(0);var X=null==(V=G)||e.isType(V,dp)?V:c();if(null!=X){q=X;break t}}}q=null}while(0);this.uRoughness_l04x3p$_0=q,null!=(o=this.uRoughness_l04x3p$_0)&&(o.uniform.value=this.roughness);var Y,Z,J=this.model;t:do{var Q;for(Y=Fp.ALL,Q=J.stages.values.iterator();Q.hasNext();){var tt=Q.next();if(0!=(tt.stage.mask&Y.mask)){var et,it,nt=tt.nodes;e:do{var rt;for(rt=nt.iterator();rt.hasNext();){var ot=rt.next();if(zt(ot.name,"uAlbedo")&&e.isType(ot,$p)){it=ot;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,$p)?et:c();if(null!=st){Z=st;break t}}}Z=null}while(0);this.uAlbedo_4phmdc$_0=Z,null!=(l=null!=(a=null!=(s=this.uAlbedo_4phmdc$_0)?s.uniform:null)?a.value:null)&&l.set_czzhhz$(this.albedo);var at,lt,ut=this.model;t:do{var pt;for(at=Fp.ALL,pt=ut.stages.values.iterator();pt.hasNext();){var ct=pt.next();if(0!=(ct.stage.mask&at.mask)){var ht,dt,ft=ct.nodes;e:do{var _t;for(_t=ft.iterator();_t.hasNext();){var mt=_t.next();if(zt(mt.name,"uEmissive")&&e.isType(mt,$p)){dt=mt;break e}}dt=null}while(0);var $t=null==(ht=dt)||e.isType(ht,$p)?ht:c();if(null!=$t){lt=$t;break t}}}lt=null}while(0);this.uEmissive_2p1vku$_0=lt,null!=(h=null!=(p=null!=(u=this.uEmissive_2p1vku$_0)?u.uniform:null)?p.value:null)&&h.set_czzhhz$(this.emissive);var yt,vt,gt=this.model;t:do{var bt;for(yt=Fp.ALL,bt=gt.stages.values.iterator();bt.hasNext();){var xt=bt.next();if(0!=(xt.stage.mask&yt.mask)){var wt,kt,St=xt.nodes;e:do{var Ct;for(Ct=St.iterator();Ct.hasNext();){var Nt=Ct.next();if(zt(Nt.name,"tAlbedo")&&e.isType(Nt,up)){kt=Nt;break e}}kt=null}while(0);var Et=null==(wt=kt)||e.isType(wt,up)?wt:c();if(null!=Et){vt=Et;break t}}}vt=null}while(0);this.albedoSampler_4xngv3$_0=null!=(d=vt)?d.sampler:null,null!=(f=this.albedoSampler_4xngv3$_0)&&(f.texture=this.albedoMap);var Pt,Tt,Ot=this.model;t:do{var Mt;for(Pt=Fp.ALL,Mt=Ot.stages.values.iterator();Mt.hasNext();){var jt=Mt.next();if(0!=(jt.stage.mask&Pt.mask)){var At,Rt,It=jt.nodes;e:do{var Lt;for(Lt=It.iterator();Lt.hasNext();){var Dt=Lt.next();if(zt(Dt.name,"tEmissive")&&e.isType(Dt,up)){Rt=Dt;break e}}Rt=null}while(0);var qt=null==(At=Rt)||e.isType(At,up)?At:c();if(null!=qt){Tt=qt;break t}}}Tt=null}while(0);this.emissiveSampler_7gr0w3$_0=null!=(_=Tt)?_.sampler:null,null!=(m=this.emissiveSampler_7gr0w3$_0)&&(m.texture=this.emissiveMap);var Bt,Ft,Ut=this.model;t:do{var Vt;for(Bt=Fp.ALL,Vt=Ut.stages.values.iterator();Vt.hasNext();){var Gt=Vt.next();if(0!=(Gt.stage.mask&Bt.mask)){var Ht,Wt,Kt=Gt.nodes;e:do{var Xt;for(Xt=Kt.iterator();Xt.hasNext();){var Yt=Xt.next();if(zt(Yt.name,"tNormal")&&e.isType(Yt,up)){Wt=Yt;break e}}Wt=null}while(0);var Zt=null==(Ht=Wt)||e.isType(Ht,up)?Ht:c();if(null!=Zt){Ft=Zt;break t}}}Ft=null}while(0);this.normalSampler_9dwwj7$_0=null!=($=Ft)?$.sampler:null,null!=(y=this.normalSampler_9dwwj7$_0)&&(y.texture=this.normalMap);var Jt,Qt,te=this.model,ee=this.metallicTexName_o5b24b$_0;t:do{var ie;for(Jt=Fp.ALL,ie=te.stages.values.iterator();ie.hasNext();){var ne=ie.next();if(0!=(ne.stage.mask&Jt.mask)){var re,oe,se=ne.nodes;e:do{var ae;for(ae=se.iterator();ae.hasNext();){var le=ae.next();if(zt(le.name,ee)&&e.isType(le,up)){oe=le;break e}}oe=null}while(0);var ue=null==(re=oe)||e.isType(re,up)?re:c();if(null!=ue){Qt=ue;break t}}}Qt=null}while(0);this.metallicSampler_2ylj7p$_0=null!=(v=Qt)?v.sampler:null,null!=(g=this.metallicSampler_2ylj7p$_0)&&(g.texture=this.metallicMap);var pe,ce,he=this.model,de=this.roughnessTexName_ht09qc$_0;t:do{var fe;for(pe=Fp.ALL,fe=he.stages.values.iterator();fe.hasNext();){var _e=fe.next();if(0!=(_e.stage.mask&pe.mask)){var me,$e,ye=_e.nodes;e:do{var ve;for(ve=ye.iterator();ve.hasNext();){var ge=ve.next();if(zt(ge.name,de)&&e.isType(ge,up)){$e=ge;break e}}$e=null}while(0);var be=null==(me=$e)||e.isType(me,up)?me:c();if(null!=be){ce=be;break t}}}ce=null}while(0);this.roughnessSampler_3dp96a$_0=null!=(b=ce)?b.sampler:null,null!=(x=this.roughnessSampler_3dp96a$_0)&&(x.texture=this.roughnessMap);var xe,we,ze=this.model,ke=this.occlusionTexName_l8ip4v$_0;t:do{var Se;for(xe=Fp.ALL,Se=ze.stages.values.iterator();Se.hasNext();){var Ce=Se.next();if(0!=(Ce.stage.mask&xe.mask)){var Ne,Ee,Pe=Ce.nodes;e:do{var Te;for(Te=Pe.iterator();Te.hasNext();){var Oe=Te.next();if(zt(Oe.name,ke)&&e.isType(Oe,up)){Ee=Oe;break e}}Ee=null}while(0);var Me=null==(Ne=Ee)||e.isType(Ne,up)?Ne:c();if(null!=Me){we=Me;break t}}}we=null}while(0);this.occlusionSampler_slvtxn$_0=null!=(w=we)?w.sampler:null,null!=(z=this.occlusionSampler_slvtxn$_0)&&(z.texture=this.occlusionMap);var je,Ae,Re=this.model;t:do{var Ie;for(je=Fp.ALL,Ie=Re.stages.values.iterator();Ie.hasNext();){var Le=Ie.next();if(0!=(Le.stage.mask&je.mask)){var De,qe,Be=Le.nodes;e:do{var Fe;for(Fe=Be.iterator();Fe.hasNext();){var Ue=Fe.next();if(zt(Ue.name,"tDisplacement")&&e.isType(Ue,up)){qe=Ue;break e}}qe=null}while(0);var Ve=null==(De=qe)||e.isType(De,up)?De:c();if(null!=Ve){Ae=Ve;break t}}}Ae=null}while(0);this.displacementSampler_8zs1vn$_0=null!=(k=Ae)?k.sampler:null,null!=(S=this.displacementSampler_8zs1vn$_0)&&(S.texture=this.displacementMap);var Ge,He,We=this.model;t:do{var Ke;for(Ge=Fp.ALL,Ke=We.stages.values.iterator();Ke.hasNext();){var Xe=Ke.next();if(0!=(Xe.stage.mask&Ge.mask)){var Ye,Ze,Je=Xe.nodes;e:do{var Qe;for(Qe=Je.iterator();Qe.hasNext();){var ti=Qe.next();if(zt(ti.name,"uDispStrength")&&e.isType(ti,dp)){Ze=ti;break e}}Ze=null}while(0);var ei=null==(Ye=Ze)||e.isType(Ye,dp)?Ye:c();if(null!=ei){He=ei;break t}}}He=null}while(0);this.uDispStrength_86lbd6$_0=He,null!=(C=this.uDispStrength_86lbd6$_0)&&(C.uniform.value=this.displacementStrength),sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Oy.prototype.defaultMrtPbrModel_2ufela$=function(t){var i,n,r,o,s,a=new Ru("defaultMrtPbrModel()"),l={v:null},p={v:null},c={v:null},h={v:null},d={v:null},f={v:null},_=new Lu(a);if(f.v=_.mvpNode(),t.isInstanced){var m=_.multiplyNode_ze33is$(f.v.outModelMat,_.instanceAttrModelMat().output).output;o=_.multiplyNode_ze33is$(f.v.outViewMat,m).output,s=_.multiplyNode_ze33is$(f.v.outMvpMat,_.instanceAttrModelMat().output).output}else o=_.multiplyNode_ze33is$(f.v.outViewMat,f.v.outModelMat).output,s=f.v.outMvpMat;if(t.isSkinned){var $=_.skinTransformNode_78eraa$(_.attrJoints().output,_.attrWeights().output,t.maxJoints);o=_.multiplyNode_ze33is$(o,$.outJointMat).output,s=_.multiplyNode_ze33is$(s,$.outJointMat).output}i=t.requiresTexCoords()?_.stageInterfaceNode_iikjwn$("ifTexCoords",_.attrTexCoords().output):null,d.v=i,n=t.albedoSource===ec()?_.stageInterfaceNode_iikjwn$("ifColors",_.attrColors().output):null,l.v=n;var y,v,g=t.morphAttributes.isEmpty()?null:_.morphWeightsNode_za3lpa$(t.morphAttributes.size),b={v:_.attrPositions().output},w=t.morphAttributes,k=M();for(y=w.iterator();y.hasNext();){var S=y.next();u(S.name,ds().POSITIONS.name)&&k.add_11rb$(S)}for(v=k.iterator();v.hasNext();){var C=v.next(),N=_.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(C),x(g)),E=_.multiplyNode_ze33is$(_.attributeNode_nm2vx5$(C).output,N.outWeight);b.v=_.addNode_ze33is$(b.v,E.output).output}var P,T,O={v:_.attrNormals().output},j=t.morphAttributes,A=M();for(P=j.iterator();P.hasNext();){var R=P.next();u(R.name,ds().NORMALS.name)&&A.add_11rb$(R)}for(T=A.iterator();T.hasNext();){var I=T.next(),L=_.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(I),x(g)),D=_.multiplyNode_ze33is$(_.attributeNode_nm2vx5$(I).output,L.outWeight);O.v=_.addNode_ze33is$(O.v,D.output).output}if(t.isNormalMapped){var q,B,F=_.attrTangents().output,U={v:_.splitNode_500t7j$(F,"xyz").output},V=t.morphAttributes,G=M();for(q=V.iterator();q.hasNext();){var H=q.next();u(H.name,ds().TANGENTS.name)&&G.add_11rb$(H)}for(B=G.iterator();B.hasNext();){var W=B.next(),K=_.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(W),x(g)),X=_.multiplyNode_ze33is$(_.attributeNode_nm2vx5$(W).output,K.outWeight);U.v=_.addNode_ze33is$(U.v,X.output).output}var Y=_.vec3TransformNode_vid4wo$(U.v,o,0),Z=_.combineXyzWNode_ze33is$(Y.outVec3,_.splitNode_500t7j$(F,"w").output);r=_.stageInterfaceNode_iikjwn$("ifTangents",Z.output)}else r=null;if(c.v=r,t.isDisplacementMapped){var J=_.textureNode_61zpoe$("tDisplacement"),Q=_.displacementMapNode_7fvjbk$(J,x(d.v).input,b.v,O.v);Q.inStrength=_.pushConstantNode1f_61zpoe$("uDispStrength").output;var tt=Q;b.v=tt.outPosition}var et=_.vec3TransformNode_vid4wo$(_.attrNormals().output,o,0).outVec3;p.v=_.stageInterfaceNode_iikjwn$("ifNormals",et);var it=_.vec3TransformNode_vid4wo$(b.v,o,1).outVec3;h.v=_.stageInterfaceNode_iikjwn$("ifViewPos",it),_.positionOutput=_.vec4TransformNode_9krp9t$(b.v,s).outVec4;var nt,rt,ot,st,at,lt,ut,pt,ct=new Du(a),ht=h.v.output;switch(t.albedoSource.name){case"VERTEX_ALBEDO":nt=x(l.v).output;break;case"STATIC_ALBEDO":nt=ct.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var dt=ct.textureSamplerNode_ce41yx$(ct.textureNode_61zpoe$("tAlbedo"),x(d.v).output),ft=ct.gammaNode_ze33is$(dt.outColor);if(t.isMultiplyAlbedoMap){var _t=ct.pushConstantNodeColor_61zpoe$("uAlbedo").output;nt=ct.multiplyNode_ze33is$(ft.outColor,_t).output}else nt=ft.outColor;break;case"CUBE_MAP_ALBEDO":throw gt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:nt=e.noWhenBranchMatched()}var mt={v:nt};if(null!=(ot=e.isType(rt=t.alphaMode,oc)?rt:null)&&ct.discardAlpha_ze33is$(ct.splitNode_500t7j$(mt.v,"a").output,ct.constFloat_mx4ult$(ot.cutOff)),e.isType(t.alphaMode,nc)||(mt.v=ct.combineXyzWNode_ze33is$(mt.v,ct.constFloat_mx4ult$(1)).output),t.isEmissiveMapped){var $t=ct.textureSamplerNode_ce41yx$(ct.textureNode_61zpoe$("tEmissive"),x(d.v).output).outColor;if(t.isMultiplyEmissiveMap){var yt=ct.pushConstantNodeColor_61zpoe$("uEmissive").output;st=ct.multiplyNode_ze33is$($t,yt).output}else st=$t}else st=ct.pushConstantNodeColor_61zpoe$("uEmissive").output;var vt=st,bt=ct.normalizeNode_r20yfm$(p.v.output).output;if(t.isNormalMapped&&null!=c.v){var xt=ct.normalMapNode_j8913i$(ct.textureNode_61zpoe$("tNormal"),x(d.v).output,bt,c.v.output);xt.inStrength=new Bu(new wu(t.normalStrength)),at=xt.outNormal}else at=bt;var wt,zt,kt={v:at};kt.v=ct.flipBacksideNormalNode_r20yfm$(kt.v).outNormal;var St={v:ct.constFloat_mx4ult$(1)},Ct=z();if(t.isRoughnessMapped){var Nt=ct.textureSamplerNode_ce41yx$(ct.textureNode_61zpoe$(t.roughnessTexName),x(d.v).output).outColor,Et=t.roughnessTexName;Ct.put_xwzc9p$(Et,Nt);var Pt=ct.splitNode_500t7j$(Nt,t.roughnessChannel).output;if(t.isMultiplyRoughnessMap){var Tt=ct.pushConstantNode1f_61zpoe$("uRoughness").output;lt=ct.multiplyNode_ze33is$(Pt,Tt).output}else lt=Pt;wt=lt}else wt=ct.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var Ot,Mt=t.metallicTexName,jt=Ct.get_11rb$(Mt);if(null==jt){var At=ct.textureSamplerNode_ce41yx$(ct.textureNode_61zpoe$(t.metallicTexName),x(d.v).output).outColor;Ct.put_xwzc9p$(Mt,At),Ot=At}else Ot=jt;var Rt=Ot,It=t.metallicTexName;Ct.put_xwzc9p$(It,Rt);var Lt=ct.splitNode_500t7j$(Rt,t.metallicChannel).output;if(t.isMultiplyMetallicMap){var Dt=ct.pushConstantNode1f_61zpoe$("uMetallic").output;ut=ct.multiplyNode_ze33is$(Lt,Dt).output}else ut=Lt;zt=ut}else zt=ct.pushConstantNode1f_61zpoe$("uMetallic").output;if(t.isOcclusionMapped){var qt,Bt=t.occlusionTexName,Ft=Ct.get_11rb$(Bt);if(null==Ft){var Ut=ct.textureSamplerNode_ce41yx$(ct.textureNode_61zpoe$(t.occlusionTexName),x(d.v).output).outColor;Ct.put_xwzc9p$(Bt,Ut),qt=Ut}else qt=Ft;var Vt=qt,Gt=t.occlusionTexName;Ct.put_xwzc9p$(Gt,Vt);var Ht=ct.splitNode_500t7j$(Vt,t.occlusionChannel).output;if(1!==t.occlusionStrength){var Wt=t.occlusionStrength;pt=ct.addNode_ze33is$(ct.constFloat_mx4ult$(1-Wt),ct.multiplyNode_tuikh5$(Ht,Wt).output).output}else pt=Ht;St.v=pt}var Kt=ct.addNode_u9w9by$(new Ay(ct.stage)),Xt=wt,Yt=zt;Kt.inViewPos=ht,Kt.inAlbedo=mt.v,Kt.inEmissive=vt,Kt.inViewNormal=kt.v,Kt.inRoughness=Xt,Kt.inMetallic=Yt,Kt.inAo=St.v;var Zt=Kt,Jt=ct.colorOutput_a3v4si$(void 0,4);return Jt.inColors[0]=Zt.outPositionAo,Jt.inColors[1]=Zt.outNormalRough,Jt.inColors[2]=Zt.outAlbedoMetallic,Jt.inColors[3]=Zt.outEmissive,a},Oy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var My=null;function jy(){return null===My&&new Oy,My}function Ay(t){qu.call(this,"mrtMultiplex",t,Kp().mask),this.inViewPos=new Bu(new ku(Er().ZERO)),this.inAlbedo=new Bu(new ku(Er().ZERO)),this.inEmissive=new Bu(new ku(Er().ZERO)),this.inViewNormal=new Bu(new ku(Er().ZERO)),this.inRoughness=new Bu(new wu(.5)),this.inMetallic=new Bu(new wu(0)),this.inAo=new Bu(new wu(1)),this.outPositionAo=new Bu(new $u("outPositionAo"),this),this.outNormalRough=new Bu(new $u("outNormalRough"),this),this.outAlbedoMetallic=new Bu(new $u("outAlbedoMetallic"),this),this.outEmissive=new Bu(new $u("outEmissive"),this)}function Ry(t){qu.call(this,"mrtDeMultiplex",t,Kp().mask),this.inPositionAo=new Bu(new Su(Qr().ZERO)),this.inNormalRough=new Bu(new Su(Qr().ZERO)),this.inAlbedoMetallic=new Bu(new Su(Qr().ZERO)),this.inEmissive=new Bu(new ku(Er().ZERO)),this.outViewPos=new Bu(new $u("outViewPos"),this),this.outAlbedo=new Bu(new $u("outAlbedo"),this),this.outEmissive=new Bu(new mu("outEmissive"),this),this.outViewNormal=new Bu(new mu("outViewNormal"),this),this.outRoughness=new Bu(new fu("outRoughness"),this),this.outMetallic=new Bu(new fu("outMetallic"),this),this.outAo=new Bu(new fu("outAo"),this)}function Iy(t,e){var i,n;this.scene=t,this.mrtPass=null,this.pbrPass=null,this.aoPipeline=null,this.reflectionPass=null,this.reflectionDenoisePass=null,this.shadowMaps=null,this.renderOutput=null,this.noSsrMap_0=new ch(new B$(0,0,0,0)),this.maxGlobalLights_0=e.maxGlobalLights,this.isAoAvailable_0=e.isWithAmbientOcclusion,this.isssrAvailable_0=e.isWithScreenSpaceReflections,this.isEnabled_4awwas$_0=!0,this.isAoEnabled_1ruccy$_0=this.isAoAvailable_0,this.isSsrEnabled_blaxhc$_0=this.isssrAvailable_0,this.reflectionMapSize=.7,this.mrtPass=new xy(this.scene,e.isWithEmissive),this.aoPipeline=e.isWithAmbientOcclusion?T$().createDeferred_4lrvgg$(this.scene,this.mrtPass):null,this.shadowMaps=null!=(i=e.shadowMaps)?i:this.createShadowMapsFromSceneLights_0();var r=new tv;r.isWithEmissive=e.isWithEmissive,r.isScrSpcAmbientOcclusion=e.isWithAmbientOcclusion,r.isScrSpcReflections=e.isWithScreenSpaceReflections,r.maxLights=e.maxGlobalLights,xt(r.shadowMaps,this.shadowMaps),r.useImageBasedLighting_po417x$(e.environmentMaps);var o,a=r;this.pbrPass=new Wy(this.scene,this.mrtPass,a),this.pbrPass.sceneShader.scrSpcAmbientOcclusionMap=null!=(n=this.aoPipeline)?n.aoMap:null,e.isWithScreenSpaceReflections?(this.reflectionPass=new ov(this.mrtPass,this.pbrPass,e.baseReflectionStep),this.reflectionDenoisePass=new ev(this.reflectionPass,this.mrtPass.positionAo),this.pbrPass.sceneShader.scrSpcReflectionMap=this.reflectionDenoisePass.colorTexture,this.scene.addOffscreenPass_m1c2kf$(this.reflectionPass),this.scene.addOffscreenPass_m1c2kf$(this.reflectionDenoisePass)):(this.reflectionPass=null,this.reflectionDenoisePass=null),this.renderOutput=this.pbrPass.createOutputQuad(),this.scene.onRenderScene.add_11rb$((o=this,function(t,e){var i,n=t.mainRenderPass.viewport.width,r=t.mainRenderPass.viewport.height;if(n>0&&r>0&&(n!==o.mrtPass.width||r!==o.mrtPass.height)&&(o.mrtPass.resize_w70mbp$(n,r,e),o.pbrPass.resize_w70mbp$(n,r,e)),null!=(i=o.reflectionPass)){var a,l=o,u=Lt(n*l.reflectionMapSize),p=Lt(r*l.reflectionMapSize);u>0&&p>0&&(u!==i.width||p!==i.height)&&(i.resize_w70mbp$(u,p,e),null!=(a=l.reflectionDenoisePass)&&a.resize_w70mbp$(u,p,e))}return s})),this.scene.onDispose.add_11rb$(function(t){return function(e,i){return t.noSsrMap_0.dispose(),s}}(this))}function Ly(){this.isWithEmissive=!1,this.isWithAmbientOcclusion=!0,this.isWithScreenSpaceReflections=!0,this.isWithImageBasedLighting=!1,this.maxGlobalLights=4,this.lightBacksides=!1,this.baseReflectionStep=.1,this.environmentMaps=null,this.shadowMaps=null}function Dy(t){this.lightInstances=M(),this.isDynamic=!0,this.lightInstanceData_0=new Fz(At([Gz().MODEL_MAT,gy().LIGHT_POS,ds().COLORS]),1e4),this.modelMat_0=new En,this.encodedLightData_0=new Float32Array(8);var e=new Fd(new Bw(qt(ds().POSITIONS)),null);e.isFrustumChecked=!1,e.instances=this.lightInstanceData_0,e.generate_v2sixm$(By);var i=new by;i.lightType=Ld(),i.sceneCamera=t.camera,i.positionAo=t.positionAo,i.normalRoughness=t.normalRoughness,i.albedoMetal=t.albedoMetal;var n,r=i;e.shader=new $y(r),e.onUpdate.add_11rb$((n=this,function(t,e){return n.isDynamic&&n.updateLightData(),s})),this.mesh=e}function qy(){this.position=Mr(),this.color=W$(V$().WHITE),this.intensity=1}function By(t){var e=t.sphereProps.icoDefaults();return e.steps=0,e.radius=1.176,t.icoSphere_mojs8w$(t.sphereProps),s}function Fy(t){qu.call(this,"discardClear",t),this.inViewPos=new Bu(new Su(Qr().ZERO))}function Uy(t){qu.call(this,"deferredCam",t),this.uProjMat_0=new ed("uProjMat"),this.uInvViewMat_0=new ed("uInvViewMat"),this.uCamPos_0=new Kh("uCamPos"),this.uViewport_0=new Kh("uViewport"),this.outProjMat=new Bu(new xu(this.uProjMat_0.name),this),this.outInvViewMat=new Bu(new xu(this.uInvViewMat_0.name),this),this.outCamPos=new Bu(new $u(this.uCamPos_0.name),this),this.outViewport=new Bu(new $u(this.uViewport_0.name),this),this.sceneCam=null}function Vy(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uProjMat_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewMat_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uCamPos_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewport_0}}(t)),e.onUpdate=function(t){return function(e,i){var n=t.sceneCam;null!=n&&(t.uProjMat_0.value.set_d4zu6l$(n.proj),t.uInvViewMat_0.value.set_d4zu6l$(n.invView),t.uCamPos_0.value.set_2qa7tb$(n.globalPos,1));var r=i.renderPass.viewport;return t.uViewport_0.value.set_7b5o5w$(r.x,r.y,r.width,r.height),s}}(t),s}}function Gy(t,e){this.maxSpotAngle=t,this.lightInstances=M(),this.isDynamic=!0,this.lightInstanceData_0=new Fz(At([Gz().MODEL_MAT,gy().LIGHT_POS,gy().LIGHT_DIR,ds().COLORS]),1e4),this.modelMat_0=new En,this.encodedLightData_0=new Float32Array(12),this.tmpLightDir_0=Mr();var i,n=new Fd(new Bw(qt(ds().POSITIONS)),null);n.isFrustumChecked=!1,n.instances=this.lightInstanceData_0,n.generate_v2sixm$((i=this,function(t){return i.makeHalfSphereCone_0(t,i.maxSpotAngle,1.17),s}));var r=new by;r.lightType=Dd(),r.sceneCamera=e.camera,r.positionAo=e.positionAo,r.normalRoughness=e.normalRoughness,r.albedoMetal=e.albedoMetal;var o=r;n.shader=new $y(o),n.onUpdate.add_11rb$(function(t){return function(e,i){return t.isDynamic&&t.updateLightData(),s}}(this)),this.mesh=n}function Hy(){this.position=Mr(),this.orientation=new $n,this.spotAngle=60,this.color=W$(V$().WHITE),this.intensity=1}function Wy(t,i,n){void 0===n&&(n=new tv);var r,o=new Od,a=new ia;a.name="PbrLightingPass",a.setSize_vux9f0$(i.config.width,i.config.height),a.addColorTexture_farcsl$(Jc()),a.clearDepthTexture(),ua.call(this,o,new ea(a)),this.mrtPass=i,this.dynamicPointLights=new Dy(this.mrtPass),this.staticPointLights=new Dy(this.mrtPass),this.mutSpotLights_0=M(),this.content=e.isType(r=this.drawNode,Od)?r:c(),this.sceneShader=null,this.dynamicPointLights.isDynamic=!0,this.staticPointLights.isDynamic=!1,this.lighting=t.lighting,this.clearColor=new B$(0,0,0,0),this.camera=this.mrtPass.camera,t.addOffscreenPass_m1c2kf$(this),n.useMrtPass_u6tred$(this.mrtPass),this.sceneShader=new Yy(n);var l=this.content;l.isFrustumChecked=!1;var u,p,h=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);h.isFrustumChecked=!1,h.generate_v2sixm$(Xy),h.shader=this.sceneShader,l.unaryPlus_uv0sim$(h),l.unaryPlus_uv0sim$(this.dynamicPointLights.mesh),l.unaryPlus_uv0sim$(this.staticPointLights.mesh),this.dependsOn_yqp8fe$(this.mrtPass),t.mainRenderPass.onAfterCollectDrawCommands.add_11rb$((u=this,p=t,function(t){var e;if(u.isEnabled){e=u.mrtPass.alphaMeshes_8be2vx$;for(var i=0;i!==e.size;++i)p.mainRenderPass.drawQueue.addMesh_sbx4mf$(u.mrtPass.alphaMeshes_8be2vx$.get_za3lpa$(i),t)}return s}))}function Ky(t){return t.rectProps.defaults().mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function Xy(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function Yy(t,e){var i,n,r;Qy(),void 0===e&&(e=Qy().defaultDeferredPbrModel_ijjr66$(t)),sc.call(this,e),this.deferredCameraNode_0=null,this.sceneCamera_79hi92$_0=t.sceneCamera,this.depthSampler_0=null,this.positionAoSampler_0=null,this.normalRoughnessSampler_0=null,this.albedoMetalSampler_0=null,this.emissiveSampler_0=null,this.depth_tvzo14$_0=t.depth,this.positionAo_xpzjm6$_0=t.positionAo,this.normalRoughness_ruv8si$_0=t.normalRoughness,this.albedoMetal_4sc1kt$_0=t.albedoMetal,this.emissive_4k8acu$_0=t.emissive,this.uAmbient_0=null,this.ambient_kdw3d9$_0=new B$(.03,.03,.03,1),this.irradianceMapSampler_0=null,this.reflectionMapSampler_0=null,this.brdfLutSampler_0=null,this.irradianceMap_33niit$_0=null!=(i=t.environmentMaps)?i.irradianceMap:null,this.reflectionMap_496w8q$_0=null!=(n=t.environmentMaps)?n.reflectionMap:null,this.brdfLut_bolscy$_0=null!=(r=t.environmentMaps)?r.brdfLut:null,this.ssaoSampler_0=null,this.scrSpcAmbientOcclusionMap_4r7yg8$_0=null,this.ssrSampler_0=null,this.scrSpcReflectionMap_b22z3y$_0=null;var o,s=R(t.shadowMaps.size);o=s.length-1|0;for(var a=0;a<=o;a++)s[a]=t.shadowMaps.get_za3lpa$(a);this.shadowMaps_0=s;var l,u=R(this.shadowMaps_0.length);l=u.length-1|0;for(var p=0;p<=l;p++)u[p]=null;this.depthSamplers_0=u,this.isReceivingShadow_0=!t.shadowMaps.isEmpty()}function Zy(){Jy=this}Ay.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inViewPos,this.inAlbedo,this.inEmissive,this.inViewNormal,this.inRoughness,this.inMetallic,this.inAo])},Ay.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                "+this.outPositionAo.declare()+" = vec4("+this.inViewPos.ref3f()+", "+this.inAo.ref1f()+");\n                "+this.outNormalRough.declare()+" = vec4("+this.inViewNormal.ref3f()+", "+this.inRoughness.ref1f()+");\n                "+this.outAlbedoMetallic.declare()+" = vec4("+this.inAlbedo.ref3f()+", "+this.inMetallic.ref1f()+");\n                "+this.outEmissive.declare()+" = vec4("+this.inEmissive.ref3f()+", 1.0);\n            ")},Ay.$metadata$={kind:$,simpleName:"MrtMultiplexNode",interfaces:[qu]},Ry.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inPositionAo,this.inNormalRough,this.inAlbedoMetallic])},Ry.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                "+this.outViewPos.declare()+" = vec4("+this.inPositionAo.ref3f()+", 1.0);\n                "+this.outAlbedo.declare()+" = vec4("+this.inAlbedoMetallic.ref3f()+", 1.0);\n                "+this.outEmissive.declare()+" = "+this.inEmissive.ref3f()+";\n                "+this.outViewNormal.declare()+" = normalize("+this.inNormalRough.ref3f()+");\n                "+this.outRoughness.declare()+" = "+this.inNormalRough.ref4f()+".a;\n                "+this.outMetallic.declare()+" = "+this.inAlbedoMetallic.ref4f()+".a;\n                "+this.outAo.declare()+" = "+this.inPositionAo.ref4f()+".a;\n            ")},Ry.$metadata$={kind:$,simpleName:"MrtDeMultiplexNode",interfaces:[qu]},Ty.$metadata$={kind:$,simpleName:"DeferredPbrShader",interfaces:[sc]},Object.defineProperty(Iy.prototype,"contentGroup",{configurable:!0,get:function(){return this.mrtPass.content}}),Object.defineProperty(Iy.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_4awwas$_0},set:function(t){this.isEnabled_4awwas$_0=t,this.updateEnabled_0()}}),Object.defineProperty(Iy.prototype,"isAoEnabled",{configurable:!0,get:function(){return this.isAoEnabled_1ruccy$_0},set:function(t){this.isAoEnabled_1ruccy$_0=t&&this.isAoAvailable_0,this.updateEnabled_0()}}),Object.defineProperty(Iy.prototype,"isSsrEnabled",{configurable:!0,get:function(){return this.isSsrEnabled_blaxhc$_0},set:function(t){this.isSsrEnabled_blaxhc$_0=t&&this.isssrAvailable_0,this.updateEnabled_0()}}),Iy.prototype.updateEnabled_0=function(){var t,e,i,n,r;for(r=this.shadowMaps.iterator();r.hasNext();)r.next().isShadowMapEnabled=this.isEnabled;null!=(t=this.aoPipeline)&&(t.isEnabled=this.isEnabled&&this.isAoEnabled),this.mrtPass.isEnabled=this.isEnabled,this.pbrPass.isEnabled=this.isEnabled,null!=(e=this.reflectionPass)&&(e.isEnabled=this.isEnabled&&this.isSsrEnabled),null!=(i=this.reflectionDenoisePass)&&(i.isEnabled=this.isEnabled&&this.isSsrEnabled),this.pbrPass.sceneShader.scrSpcReflectionMap=this.isSsrEnabled?null!=(n=this.reflectionDenoisePass)?n.colorTexture:null:this.noSsrMap_0},Iy.prototype.createShadowMapsFromSceneLights_0=function(){var t,i,n=M(),r=this.maxGlobalLights_0,o=this.scene.lighting.lights.size;t=A.min(r,o);for(var s=0;s<t;s++){switch(this.scene.lighting.lights.get_za3lpa$(s).type.name){case"DIRECTIONAL":i=new yk(this.scene,s,void 0,void 0,void 0,this.mrtPass.content);break;case"SPOT":i=new mk(this.scene,s,void 0,this.mrtPass.content);break;case"POINT":var a=qN.Log,l=vz.WARN,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"Point light shadow maps not yet supported"),i=null;break;default:i=e.noWhenBranchMatched()}var p=i;null!=p&&n.add_11rb$(p)}return n},Iy.$metadata$={kind:$,simpleName:"DeferredPipeline",interfaces:[]},Ly.prototype.useShadowMaps_gdx315$=function(t){this.shadowMaps=t},Ly.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isWithImageBasedLighting=null!=t},Ly.$metadata$={kind:$,simpleName:"DeferredPipelineConfig",interfaces:[]},Dy.prototype.updateLightData=function(){var t;this.lightInstanceData_0.clear();var e=this.lightInstances.size,i=this.lightInstanceData_0.maxInstances;t=A.min(e,i);for(var n=0;n<t;n++){var r=this.lightInstanceData_0;r.checkBufferSize_za3lpa$();var o=r.dataF.position,s=r.dataF;this.encodeLight_0(this.lightInstances.get_za3lpa$(n)),s.put_q3cr5i$(this.modelMat_0.matrix),s.put_q3cr5i$(this.encodedLightData_0);var a=r.dataF.position-o|0;if(a!==r.instanceSizeF)throw gt("Expected data to grow by "+r.instanceSizeF+" elements, instead it grew by "+a);r.numInstances=r.numInstances+1|0,r.hasChanged=!0}},Dy.prototype.encodeLight_0=function(t){this.modelMat_0.setIdentity(),this.modelMat_0.translate_czzhiu$(t.position);var e=t.intensity,i=A.sqrt(e);this.modelMat_0.scale_y2kzbl$(i,i,i),this.encodedLightData_0[0]=t.position.x,this.encodedLightData_0[1]=t.position.y,this.encodedLightData_0[2]=t.position.z,this.encodedLightData_0[3]=Ld().encoded,this.encodedLightData_0[4]=t.color.r,this.encodedLightData_0[5]=t.color.g,this.encodedLightData_0[6]=t.color.b,this.encodedLightData_0[7]=t.intensity},Dy.prototype.addPointLight_at6cwi$=function(t){this.lightInstances.add_11rb$(t)},Dy.prototype.addPointLight_v2bnrz$=K("kool-kool-core.de.fabmax.kool.util.deferred.DeferredPointLights.addPointLight_v2bnrz$",X((function(){var e=t.de.fabmax.kool.util.deferred.DeferredPointLights.PointLight;return function(t){var i=new e;return t(i),this.addPointLight_at6cwi$(i),i}}))),Dy.prototype.removePointLight_at6cwi$=function(t){this.lightInstances.remove_11rb$(t)},qy.$metadata$={kind:$,simpleName:"PointLight",interfaces:[]},Dy.$metadata$={kind:$,simpleName:"DeferredPointLights",interfaces:[]},Fy.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewPos)},Fy.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("if ("+this.inViewPos.name+".z > 0.0) { discard; }")},Fy.$metadata$={kind:$,simpleName:"DiscardClearNode",interfaces:[qu]},Uy.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Vy(this))},Uy.$metadata$={kind:$,simpleName:"DeferredCameraNode",interfaces:[qu]},Gy.prototype.updateLightData=function(){var t;this.lightInstanceData_0.clear();var e=this.lightInstances.size,i=this.lightInstanceData_0.maxInstances;t=A.min(e,i);for(var n=0;n<t;n++){var r=this.lightInstanceData_0;r.checkBufferSize_za3lpa$();var o=r.dataF.position,s=r.dataF;this.encodeLight_0(this.lightInstances.get_za3lpa$(n)),s.put_q3cr5i$(this.modelMat_0.matrix),s.put_q3cr5i$(this.encodedLightData_0);var a=r.dataF.position-o|0;if(a!==r.instanceSizeF)throw gt("Expected data to grow by "+r.instanceSizeF+" elements, instead it grew by "+a);r.numInstances=r.numInstances+1|0,r.hasChanged=!0}},Gy.prototype.encodeLight_0=function(t){this.modelMat_0.setIdentity(),this.modelMat_0.translate_czzhiu$(t.position);var e=t.intensity,i=A.sqrt(e);this.modelMat_0.scale_y2kzbl$(i,i,i),this.modelMat_0.rotate_d4zu7e$(t.orientation),this.tmpLightDir_0.set_czzhiu$(Er().X_AXIS),t.orientation.transform_5s4mqq$(this.tmpLightDir_0),this.encodedLightData_0[0]=t.position.x,this.encodedLightData_0[1]=t.position.y,this.encodedLightData_0[2]=t.position.z,this.encodedLightData_0[3]=Dd().encoded,this.encodedLightData_0[4]=this.tmpLightDir_0.x,this.encodedLightData_0[5]=this.tmpLightDir_0.y,this.encodedLightData_0[6]=this.tmpLightDir_0.z;var n=this.encodedLightData_0,r=this.maxSpotAngle,o=t.spotAngle,s=A.min(r,o)/2*PN.DEG_2_RAD;n[7]=A.cos(s),this.encodedLightData_0[8]=t.color.r,this.encodedLightData_0[9]=t.color.g,this.encodedLightData_0[10]=t.color.b,this.encodedLightData_0[11]=t.intensity},Gy.prototype.addSpotLight_sdnkeo$=function(t){this.lightInstances.add_11rb$(t)},Gy.prototype.addSpotLight_g3dtq9$=K("kool-kool-core.de.fabmax.kool.util.deferred.DeferredSpotLights.addSpotLight_g3dtq9$",X((function(){var e=t.de.fabmax.kool.util.deferred.DeferredSpotLights.SpotLight;return function(t){var i=new e;return t(i),this.addSpotLight_sdnkeo$(i),i}}))),Gy.prototype.removeSpotLight_sdnkeo$=function(t){this.lightInstances.remove_11rb$(t)},Hy.prototype.setDirection_czzhiu$=function(t){var e=t.dot_czzhiu$(Er().Y_AXIS),i=A.abs(e)>.9?Er().X_AXIS:Er().Y_AXIS,n=t.cross_2gj7b4$(i,Mr()),r=t.cross_2gj7b4$(n,Mr());this.orientation.setColVec_ky00qo$(0,t),this.orientation.setColVec_ky00qo$(1,n),this.orientation.setColVec_ky00qo$(2,r)},Hy.$metadata$={kind:$,simpleName:"SpotLight",interfaces:[]},Gy.prototype.makeHalfSphereCone_0=function(t,e,i){for(var n=(e<0?0:e>360?360:e)/2,r=F(4*n/180),o=t.vertex_n440gp$(new Sr(i,0,0),Er().X_AXIS),s=0;s<8;s++){var a=45*PN.DEG_2_RAD,l=n*PN.DEG_2_RAD,u=A.min(a,l),p=A.cos(u)*i,c=A.sin(u)*i,h=2*U.PI*s/8,d=A.sin(h)*c,f=2*U.PI*s/8,_=new Sr(p,d,A.cos(f)*c),m=t.vertex_n440gp$(_,_);s>0&&t.geometry.addTriIndices_qt1dr2$(o,m,m-1|0),7===s&&t.geometry.addTriIndices_qt1dr2$(o,m-8+1|0,m)}for(var $=0;$<r;$++)for(var y=$<(r-1|0)?45*($+2|0)*PN.DEG_2_RAD:n*PN.DEG_2_RAD,v=0;v<8;v++){var g=A.cos(y)*i,b=A.sin(y)*i,x=2*U.PI*v/8,w=A.sin(x)*b,z=2*U.PI*v/8,k=new Sr(g,w,A.cos(z)*b),S=t.vertex_n440gp$(k,k);v>0&&(t.geometry.addTriIndices_qt1dr2$(S,S-1|0,S-8|0),t.geometry.addTriIndices_qt1dr2$(S-1|0,S-8-1|0,S-8|0)),7===v&&(t.geometry.addTriIndices_qt1dr2$(S,S-8|0,S-16+1|0),t.geometry.addTriIndices_qt1dr2$(S-8+1|0,S,S-16+1|0))}for(var C=t.vertex_n440gp$(new Sr(-.1,0,0),Er().NEG_X_AXIS),N=0;N<8;N++)N<7?t.geometry.addTriIndices_qt1dr2$(C,C-8+N|0,C-8+N+1|0):t.geometry.addTriIndices_qt1dr2$(C,C-1|0,C-8|0)},Gy.$metadata$={kind:$,simpleName:"DeferredSpotLights",interfaces:[]},Object.defineProperty(Wy.prototype,"spotLights",{configurable:!0,get:function(){return this.mutSpotLights_0}}),Wy.prototype.addSpotLights_mx4ult$=function(t){var e=new Gy(t,this.mrtPass);return this.content.plusAssign_f1kmr1$(e.mesh),this.mutSpotLights_0.add_11rb$(e),e},Wy.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},Wy.prototype.createOutputQuad=function(){return Bd(void 0,void 0,(t=this,function(e){return e.isFrustumChecked=!1,e.generate_v2sixm$(Ky),e.shader=new Cy(x(t.colorTexture),x(t.mrtPass.depthTexture)),s}));var t},Wy.$metadata$={kind:$,simpleName:"PbrLightingPass",interfaces:[ua]},Object.defineProperty(Yy.prototype,"sceneCamera",{configurable:!0,get:function(){return this.sceneCamera_79hi92$_0},set:function(t){var e;this.sceneCamera_79hi92$_0=t,null!=(e=this.deferredCameraNode_0)&&(e.sceneCam=t)}}),Object.defineProperty(Yy.prototype,"depth",{configurable:!0,get:function(){return this.depth_tvzo14$_0},set:function(t){var e;this.depth_tvzo14$_0=t,null!=(e=this.depthSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"positionAo",{configurable:!0,get:function(){return this.positionAo_xpzjm6$_0},set:function(t){var e;this.positionAo_xpzjm6$_0=t,null!=(e=this.positionAoSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"normalRoughness",{configurable:!0,get:function(){return this.normalRoughness_ruv8si$_0},set:function(t){var e;this.normalRoughness_ruv8si$_0=t,null!=(e=this.normalRoughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"albedoMetal",{configurable:!0,get:function(){return this.albedoMetal_4sc1kt$_0},set:function(t){var e;this.albedoMetal_4sc1kt$_0=t,null!=(e=this.albedoMetalSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_4k8acu$_0},set:function(t){var e;this.emissive_4k8acu$_0=t,null!=(e=this.emissiveSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"ambient",{configurable:!0,get:function(){return this.ambient_kdw3d9$_0},set:function(t){var e,i,n;this.ambient_kdw3d9$_0=t,null!=(n=null!=(i=null!=(e=this.uAmbient_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Yy.prototype,"irradianceMap",{configurable:!0,get:function(){return this.irradianceMap_33niit$_0},set:function(t){var e;this.irradianceMap_33niit$_0=t,null!=(e=this.irradianceMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"reflectionMap",{configurable:!0,get:function(){return this.reflectionMap_496w8q$_0},set:function(t){var e;this.reflectionMap_496w8q$_0=t,null!=(e=this.reflectionMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"brdfLut",{configurable:!0,get:function(){return this.brdfLut_bolscy$_0},set:function(t){var e;this.brdfLut_bolscy$_0=t,null!=(e=this.brdfLutSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"scrSpcAmbientOcclusionMap",{configurable:!0,get:function(){return this.scrSpcAmbientOcclusionMap_4r7yg8$_0},set:function(t){var e;this.scrSpcAmbientOcclusionMap_4r7yg8$_0=t,null!=(e=this.ssaoSampler_0)&&(e.texture=t)}}),Object.defineProperty(Yy.prototype,"scrSpcReflectionMap",{configurable:!0,get:function(){return this.scrSpcReflectionMap_b22z3y$_0},set:function(t){var e;this.scrSpcReflectionMap_b22z3y$_0=t,null!=(e=this.ssrSampler_0)&&(e.texture=t)}}),Yy.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.depthTest=cl(),t.blendMode=rl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Yy.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,P,T,O=this.model;t:do{var M;for(P=Fp.ALL,M=O.stages.values.iterator();M.hasNext();){var j=M.next();if(0!=(j.stage.mask&P.mask)){var A,R,I=j.nodes;e:do{var L;for(L=I.iterator();L.hasNext();){var D=L.next();if(zt(D.name,"deferredCam")&&e.isType(D,Uy)){R=D;break e}}R=null}while(0);var q=null==(A=R)||e.isType(A,Uy)?A:c();if(null!=q){T=q;break t}}}T=null}while(0);this.deferredCameraNode_0=T,null!=(r=this.deferredCameraNode_0)&&(r.sceneCam=this.sceneCamera);var B,F,U=this.model;t:do{var V;for(B=Fp.ALL,V=U.stages.values.iterator();V.hasNext();){var G=V.next();if(0!=(G.stage.mask&B.mask)){var H,W,K=G.nodes;e:do{var X;for(X=K.iterator();X.hasNext();){var Y=X.next();if(zt(Y.name,"depth")&&e.isType(Y,up)){W=Y;break e}}W=null}while(0);var Z=null==(H=W)||e.isType(H,up)?H:c();if(null!=Z){F=Z;break t}}}F=null}while(0);this.depthSampler_0=null!=(o=F)?o.sampler:null,null!=(s=this.depthSampler_0)&&(s.texture=this.depth);var J,Q,tt=this.model;t:do{var et;for(J=Fp.ALL,et=tt.stages.values.iterator();et.hasNext();){var it=et.next();if(0!=(it.stage.mask&J.mask)){var nt,rt,ot=it.nodes;e:do{var st;for(st=ot.iterator();st.hasNext();){var at=st.next();if(zt(at.name,"positionAo")&&e.isType(at,up)){rt=at;break e}}rt=null}while(0);var lt=null==(nt=rt)||e.isType(nt,up)?nt:c();if(null!=lt){Q=lt;break t}}}Q=null}while(0);this.positionAoSampler_0=null!=(a=Q)?a.sampler:null,null!=(l=this.positionAoSampler_0)&&(l.texture=this.positionAo);var ut,pt,ct=this.model;t:do{var ht;for(ut=Fp.ALL,ht=ct.stages.values.iterator();ht.hasNext();){var dt=ht.next();if(0!=(dt.stage.mask&ut.mask)){var ft,_t,mt=dt.nodes;e:do{var $t;for($t=mt.iterator();$t.hasNext();){var yt=$t.next();if(zt(yt.name,"normalRoughness")&&e.isType(yt,up)){_t=yt;break e}}_t=null}while(0);var vt=null==(ft=_t)||e.isType(ft,up)?ft:c();if(null!=vt){pt=vt;break t}}}pt=null}while(0);this.normalRoughnessSampler_0=null!=(u=pt)?u.sampler:null,null!=(p=this.normalRoughnessSampler_0)&&(p.texture=this.normalRoughness);var gt,bt,xt=this.model;t:do{var wt;for(gt=Fp.ALL,wt=xt.stages.values.iterator();wt.hasNext();){var kt=wt.next();if(0!=(kt.stage.mask&gt.mask)){var St,Ct,Nt=kt.nodes;e:do{var Et;for(Et=Nt.iterator();Et.hasNext();){var Pt=Et.next();if(zt(Pt.name,"albedoMetal")&&e.isType(Pt,up)){Ct=Pt;break e}}Ct=null}while(0);var Tt=null==(St=Ct)||e.isType(St,up)?St:c();if(null!=Tt){bt=Tt;break t}}}bt=null}while(0);this.albedoMetalSampler_0=null!=(h=bt)?h.sampler:null,null!=(d=this.albedoMetalSampler_0)&&(d.texture=this.albedoMetal);var Ot,Mt,jt=this.model;t:do{var At;for(Ot=Fp.ALL,At=jt.stages.values.iterator();At.hasNext();){var Rt=At.next();if(0!=(Rt.stage.mask&Ot.mask)){var It,Lt,Dt=Rt.nodes;e:do{var qt;for(qt=Dt.iterator();qt.hasNext();){var Bt=qt.next();if(zt(Bt.name,"emissive")&&e.isType(Bt,up)){Lt=Bt;break e}}Lt=null}while(0);var Ft=null==(It=Lt)||e.isType(It,up)?It:c();if(null!=Ft){Mt=Ft;break t}}}Mt=null}while(0);this.emissiveSampler_0=null!=(f=Mt)?f.sampler:null,null!=(_=this.emissiveSampler_0)&&(_.texture=this.emissive);var Ut,Vt,Gt=this.model;t:do{var Ht;for(Ut=Fp.ALL,Ht=Gt.stages.values.iterator();Ht.hasNext();){var Wt=Ht.next();if(0!=(Wt.stage.mask&Ut.mask)){var Kt,Xt,Yt=Wt.nodes;e:do{var Zt;for(Zt=Yt.iterator();Zt.hasNext();){var Jt=Zt.next();if(zt(Jt.name,"uAmbient")&&e.isType(Jt,$p)){Xt=Jt;break e}}Xt=null}while(0);var Qt=null==(Kt=Xt)||e.isType(Kt,$p)?Kt:c();if(null!=Qt){Vt=Qt;break t}}}Vt=null}while(0);this.uAmbient_0=Vt,null!=(y=null!=($=null!=(m=this.uAmbient_0)?m.uniform:null)?$.value:null)&&y.set_czzhhz$(this.ambient);var te,ee,ie=this.model;t:do{var ne;for(te=Fp.ALL,ne=ie.stages.values.iterator();ne.hasNext();){var re=ne.next();if(0!=(re.stage.mask&te.mask)){var oe,se,ae=re.nodes;e:do{var le;for(le=ae.iterator();le.hasNext();){var ue=le.next();if(zt(ue.name,"irradianceMap")&&e.isType(ue,pp)){se=ue;break e}}se=null}while(0);var pe=null==(oe=se)||e.isType(oe,pp)?oe:c();if(null!=pe){ee=pe;break t}}}ee=null}while(0);this.irradianceMapSampler_0=null!=(v=ee)?v.sampler:null,null!=(g=this.irradianceMapSampler_0)&&(g.texture=this.irradianceMap);var ce,he,de=this.model;t:do{var fe;for(ce=Fp.ALL,fe=de.stages.values.iterator();fe.hasNext();){var _e=fe.next();if(0!=(_e.stage.mask&ce.mask)){var me,$e,ye=_e.nodes;e:do{var ve;for(ve=ye.iterator();ve.hasNext();){var ge=ve.next();if(zt(ge.name,"reflectionMap")&&e.isType(ge,pp)){$e=ge;break e}}$e=null}while(0);var be=null==(me=$e)||e.isType(me,pp)?me:c();if(null!=be){he=be;break t}}}he=null}while(0);this.reflectionMapSampler_0=null!=(b=he)?b.sampler:null,null!=(x=this.reflectionMapSampler_0)&&(x.texture=this.reflectionMap);var xe,we,ze=this.model;t:do{var ke;for(xe=Fp.ALL,ke=ze.stages.values.iterator();ke.hasNext();){var Se=ke.next();if(0!=(Se.stage.mask&xe.mask)){var Ce,Ne,Ee=Se.nodes;e:do{var Pe;for(Pe=Ee.iterator();Pe.hasNext();){var Te=Pe.next();if(zt(Te.name,"brdfLut")&&e.isType(Te,up)){Ne=Te;break e}}Ne=null}while(0);var Oe=null==(Ce=Ne)||e.isType(Ce,up)?Ce:c();if(null!=Oe){we=Oe;break t}}}we=null}while(0);this.brdfLutSampler_0=null!=(w=we)?w.sampler:null,null!=(z=this.brdfLutSampler_0)&&(z.texture=this.brdfLut);var Me,je,Ae=this.model;t:do{var Re;for(Me=Fp.ALL,Re=Ae.stages.values.iterator();Re.hasNext();){var Ie=Re.next();if(0!=(Ie.stage.mask&Me.mask)){var Le,De,qe=Ie.nodes;e:do{var Be;for(Be=qe.iterator();Be.hasNext();){var Fe=Be.next();if(zt(Fe.name,"ssaoMap")&&e.isType(Fe,up)){De=Fe;break e}}De=null}while(0);var Ue=null==(Le=De)||e.isType(Le,up)?Le:c();if(null!=Ue){je=Ue;break t}}}je=null}while(0);this.ssaoSampler_0=null!=(k=je)?k.sampler:null,null!=(S=this.ssaoSampler_0)&&(S.texture=this.scrSpcAmbientOcclusionMap);var Ve,Ge,He=this.model;t:do{var We;for(Ve=Fp.ALL,We=He.stages.values.iterator();We.hasNext();){var Ke=We.next();if(0!=(Ke.stage.mask&Ve.mask)){var Xe,Ye,Ze=Ke.nodes;e:do{var Je;for(Je=Ze.iterator();Je.hasNext();){var Qe=Je.next();if(zt(Qe.name,"ssrMap")&&e.isType(Qe,up)){Ye=Qe;break e}}Ye=null}while(0);var ti=null==(Xe=Ye)||e.isType(Xe,up)?Xe:c();if(null!=ti){Ge=ti;break t}}}Ge=null}while(0);if(this.ssrSampler_0=null!=(C=Ge)?C.sampler:null,null!=(N=this.ssrSampler_0)&&(N.texture=this.scrSpcReflectionMap),this.isReceivingShadow_0){E=this.depthSamplers_0;for(var ei=0;ei!==E.length;++ei){var ii,ni,ri,oi=this.model,si="depthMap_"+ei;t:do{var ai;for(ni=Fp.ALL,ai=oi.stages.values.iterator();ai.hasNext();){var li=ai.next();if(0!=(li.stage.mask&ni.mask)){var ui,pi,ci=li.nodes;e:do{var hi;for(hi=ci.iterator();hi.hasNext();){var di=hi.next();if(zt(di.name,si)&&e.isType(di,up)){pi=di;break e}}pi=null}while(0);var fi=null==(ui=pi)||e.isType(ui,up)?ui:c();if(null!=fi){ri=fi;break t}}}ri=null}while(0);var _i=null!=(ii=ri)?ii.sampler:null;this.depthSamplers_0[ei]=_i,this.shadowMaps_0[ei].setupSampler_s70oj3$(_i)}}sc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Zy.prototype.defaultDeferredPbrModel_ijjr66$=function(t){var i=new Ru("defaultDeferredPbrModel()"),n={v:null},r=new Lu(i);n.v=r.stageInterfaceNode_iikjwn$("ifTexCoords",r.attrTexCoords().output),r.positionOutput=r.fullScreenQuadPositionNode_r20yfm$(r.attrTexCoords().output).outQuadPos;var o=new Du(i),s=n.v.output,a=o.textureNode_61zpoe$("positionAo"),l=o.addNode_u9w9by$(new Ry(o.stage));l.inPositionAo=o.textureSamplerNode_ce41yx$(a,s).outColor,l.inNormalRough=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("normalRoughness"),s).outColor,l.inAlbedoMetallic=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("albedoMetal"),s).outColor,t.isWithEmissive&&(l.inEmissive=o.gammaNode_ze33is$(o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("emissive"),s).outColor).outColor);var u=l;o.addNode_u9w9by$(new Fy(o.stage)).inViewPos=u.outViewPos;var p,c,h,d=o.addNode_u9w9by$(new Uy(o.stage)),f=o.vec3TransformNode_vid4wo$(u.outViewPos,d.outInvViewMat,1).outVec3,_=o.vec3TransformNode_vid4wo$(u.outViewNormal,d.outInvViewMat,0).outVec3,m={v:null};if(t.maxLights>0){var $,y;m.v=o.multiLightNode_za3lpa$(t.maxLights);var v=0;for($=t.shadowMaps.iterator();$.hasNext();){var g,b=$.next(),x=J((v=(y=v)+1|0,y));g=e.isType(b,yk)?o.deferredCascadedShadowMapNode_y1yrn$(b,"depthMap_"+x,u.outViewPos,f).outShadowFac:e.isType(b,mk)?o.deferredSimpleShadowMapNode_dhoqzq$(b,"depthMap_"+x,f).outShadowFac:new Bu(new wu(1)),m.v.inShaodwFacs[x]=g}}if(t.isImageBasedLighting){var w=o.cubeMapNode_61zpoe$("irradianceMap");h=o.cubeMapSamplerNode_2z3a2t$(w,_),p=o.cubeMapNode_61zpoe$("reflectionMap"),c=o.textureNode_61zpoe$("brdfLut")}else h=null,p=null,c=null;var z,k=o.pbrMaterialNode_heq9k0$(m.v,p,c),S=h;k.lightBacksides=t.lightBacksides,k.inFragPos=f,k.inNormal=_,k.inViewDir=o.viewDirNode_ze33is$(d.outCamPos,f).output,k.inIrradiance=null!=(z=null!=S?S.outColor:null)?z:o.pushConstantNodeColor_61zpoe$("uAmbient").output,k.inAlbedo=u.outAlbedo,k.inEmissive=u.outEmissive,k.inMetallic=u.outMetallic,k.inRoughness=u.outRoughness;var C=u.outAo;if(t.isScrSpcAmbientOcclusion){var N=o.textureNode_61zpoe$("ssaoMap"),E=o.addNode_u9w9by$(new Sp(N,k.graph));E.inViewport=d.outViewport,C=o.multiplyNode_ze33is$(C,E.outAo).output}if(k.inAmbientOccl=C,t.isScrSpcReflections){var P=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("ssrMap"),s).outColor;k.inReflectionColor=o.gammaNode_ze33is$(P).outColor,k.inReflectionWeight=o.splitNode_500t7j$(P,"a").output}var T=k;o.colorOutput_a3v4si$(T.outColor);var O=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("depth"),s);return o.depthOutput_r20yfm$(O.outColor),i},Zy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jy=null;function Qy(){return null===Jy&&new Zy,Jy}function tv(){this.sceneCamera=null,this.isImageBasedLighting=!1,this.isScrSpcAmbientOcclusion=!1,this.isScrSpcReflections=!1,this.isWithEmissive=!1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.depth=null,this.positionAo=null,this.normalRoughness=null,this.albedoMetal=null,this.emissive=null,this.environmentMaps=null}function ev(t,i){var n,r=new Od,o=new ia;o.name="ReflectionDenoisePass",o.setSize_vux9f0$(t.config.width,t.config.height),o.addColorTexture_farcsl$(Kc()),o.clearDepthTexture(),ua.call(this,r,new ea(o)),this.clearColor=new B$(0,0,0,0);var a=e.isType(n=this.drawNode,Od)?n:c(),l=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(nv);var u=new Ru("ReflectionDenoisePass"),p={v:null},h=new Lu(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.fullScreenQuadPositionNode_r20yfm$(h.attrTexCoords().output).outQuadPos;var d=new Du(u),f=d.textureNode_61zpoe$("noisyRefl"),_=d.textureNode_61zpoe$("positionAo"),m=d.addNode_u9w9by$(new iv(this,f,_,d.stage));m.inScreenPos=p.v.output,d.colorOutput_a3v4si$(m.outColor);var $,y,v,g=u,b=new sc(g);b.onPipelineSetup.add_11rb$(rv),b.onPipelineCreated.add_11rb$(($=t,y=g,v=i,function(t,i,n){var r,o,a=y;t:do{var l;for(r=Fp.ALL,l=a.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&r.mask)){var p,h,d=u.nodes;e:do{var f;for(f=d.iterator();f.hasNext();){var _=f.next();if(zt(_.name,"noisyRefl")&&e.isType(_,up)){h=_;break e}}h=null}while(0);var m=null==(p=h)||e.isType(p,up)?p:c();if(null!=m){o=m;break t}}}o=null}while(0);x(o).sampler.texture=$.colorTexture;var g,b,w=y;t:do{var z;for(g=Fp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&g.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var P=E.next();if(zt(P.name,"positionAo")&&e.isType(P,up)){C=P;break e}}C=null}while(0);var T=null==(S=C)||e.isType(S,up)?S:c();if(null!=T){b=T;break t}}}b=null}while(0);return x(b).sampler.texture=v,s})),l.shader=b,a.unaryPlus_uv0sim$(l),this.dependsOn_yqp8fe$(t)}function iv(t,e,i,n){this.$outer=t,qu.call(this,"blurNode",n),this.noisyRefl=e,this.depthTex=i,this.inScreenPos=new Bu(new zu(ar().ZERO)),this.outColor=new Bu(new $u("colorOut"),this)}function nv(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function rv(t,e,i){return t.depthTest=cl(),t.blendMode=rl(),s}function ov(t,i,n){cv();var r,o=new Od,s=new ia;s.name="ReflectionPass",s.setSize_vux9f0$(i.config.width,i.config.height),s.addColorTexture_farcsl$(Kc()),s.clearDepthTexture(),ua.call(this,o,new ea(s)),this.mrtPass=t,this.pbrLightingPass=i,this.baseReflectionStep=n,this.uRoughThreshLow_0=null,this.roughnessThresholdLow_2pd7lz$_0=.5,this.uRoughThreshHigh_0=null,this.roughnessThresholdHigh_cqy6xj$_0=.6,this.uMaxIterations_0=null,this.scrSpcReflectionIterations_4w6b2n$_0=24,this.noiseTex_0=this.generateScrSpcReflectionNoiseTex_0(),this.clearColor=new B$(0,0,0,0);var a=e.isType(r=this.drawNode,Od)?r:c();a.isFrustumChecked=!1;var l=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.isFrustumChecked=!1,l.generate_v2sixm$(hv),l.shader=new sv(this),a.unaryPlus_uv0sim$(l),this.dependsOn_yqp8fe$(this.mrtPass)}function sv(t){this.$outer=t,sc.call(this,this.$outer.reflectionShaderModel_0())}function av(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$data=t}function lv(t){qu.call(this,"discardRough",t),this.inRoughness=new Bu(new wu(0)),this.inThreshHigh=new Bu(new wu(.6)),this.inThreshLow=new Bu(new wu(.5)),this.outWeight=new Bu(new fu("outRoughWeight"),this)}function uv(){pv=this,this.NOISE_SIZE=4}tv.prototype.useMrtPass_u6tred$=function(t){this.sceneCamera=t.camera,this.depth=t.depthTexture,this.positionAo=t.positionAo,this.normalRoughness=t.normalRoughness,this.albedoMetal=t.albedoMetal,this.isWithEmissive=t.withEmissive,this.isWithEmissive&&(this.emissive=t.emissive)},tv.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isImageBasedLighting=null!=t},tv.$metadata$={kind:$,simpleName:"DeferredPbrConfig",interfaces:[]},Yy.$metadata$={kind:$,simpleName:"PbrSceneShader",interfaces:[sc]},ev.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},iv.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noisyRefl),this.dependsOn_lhtstx$(this.depthTex),qu.prototype.setup_llmhyc$.call(this,t)},iv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                int blurSize = 4;\n                vec2 texelSize = 1.0 / vec2(textureSize("+this.noisyRefl.name+", 0));\n                float depthOri = "+t.sampleTexture2d_buzeal$(this.depthTex.name,this.inScreenPos.ref2f())+".z;\n                float depthThreshold = max(0.3, depthOri * 0.05);\n                "+this.outColor.declare()+" = vec4(0.0);\n                \n                float weight = 0.0;\n                vec2 hlim = vec2(float(-blurSize) * 0.5 + 0.5);\n                for (int x = 0; x < blurSize; x++) {\n                    for (int y = 0; y < blurSize; y++) {\n                        vec2 uv = "+this.inScreenPos.ref2f()+" + (hlim + vec2(float(x), float(y))) * texelSize;\n                        float w = 1.0 - step(depthThreshold, abs("+t.sampleTexture2d_buzeal$(this.depthTex.name,"uv")+".z - depthOri)) * 0.99;\n                        \n                        "+this.outColor+" += "+t.sampleTexture2d_buzeal$(this.noisyRefl.name,"uv")+" * w;\n                        weight += w;\n                    }\n                }\n                "+this.outColor+" /= weight;\n            ")},iv.$metadata$={kind:$,simpleName:"BlurNode",interfaces:[qu]},ev.$metadata$={kind:$,simpleName:"ReflectionDenoisePass",interfaces:[ua]},Object.defineProperty(ov.prototype,"roughnessThresholdLow",{configurable:!0,get:function(){return this.roughnessThresholdLow_2pd7lz$_0},set:function(t){var e,i;this.roughnessThresholdLow_2pd7lz$_0=t,null!=(i=null!=(e=this.uRoughThreshLow_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(ov.prototype,"roughnessThresholdHigh",{configurable:!0,get:function(){return this.roughnessThresholdHigh_cqy6xj$_0},set:function(t){var e,i;this.roughnessThresholdHigh_cqy6xj$_0=t,null!=(i=null!=(e=this.uRoughThreshHigh_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(ov.prototype,"scrSpcReflectionIterations",{configurable:!0,get:function(){return this.scrSpcReflectionIterations_4w6b2n$_0},set:function(t){var e,i;this.scrSpcReflectionIterations_4w6b2n$_0=t,null!=(i=null!=(e=this.uMaxIterations_0)?e.uniform:null)&&(i.value=t)}}),ov.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),this.noiseTex_0.dispose(),ua.prototype.dispose_aemszp$.call(this,t)},sv.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.depthTest=cl(),t.blendMode=rl(),sc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},sv.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$=this.model;t:do{var y;for(_=Fp.ALL,y=$.stages.values.iterator();y.hasNext();){var v=y.next();if(0!=(v.stage.mask&_.mask)){var g,b,x=v.nodes;e:do{var w;for(w=x.iterator();w.hasNext();){var z=w.next();if(zt(z.name,"deferredCam")&&e.isType(z,Uy)){b=z;break e}}b=null}while(0);var k=null==(g=b)||e.isType(g,Uy)?g:c();if(null!=k){m=k;break t}}}m=null}while(0);var S=m;null!=S&&(this.$outer,S.sceneCam=this.$outer.mrtPass.camera);var C,N,E=this.model;t:do{var P;for(C=Fp.ALL,P=E.stages.values.iterator();P.hasNext();){var T=P.next();if(0!=(T.stage.mask&C.mask)){var O,M,j=T.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var R=A.next();if(zt(R.name,"positionAo")&&e.isType(R,up)){M=R;break e}}M=null}while(0);var I=null==(O=M)||e.isType(O,up)?O:c();if(null!=I){N=I;break t}}}N=null}while(0);var L=null!=(r=N)?r.sampler:null;null!=L&&(this.$outer,L.texture=this.$outer.mrtPass.positionAo);var D,q,B=this.model;t:do{var F;for(D=Fp.ALL,F=B.stages.values.iterator();F.hasNext();){var U=F.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var K=W.next();if(zt(K.name,"normalRoughness")&&e.isType(K,up)){G=K;break e}}G=null}while(0);var X=null==(V=G)||e.isType(V,up)?V:c();if(null!=X){q=X;break t}}}q=null}while(0);var Y=null!=(o=q)?o.sampler:null;null!=Y&&(this.$outer,Y.texture=this.$outer.mrtPass.normalRoughness);var Z,J,Q=this.model;t:do{var tt;for(Z=Fp.ALL,tt=Q.stages.values.iterator();tt.hasNext();){var et=tt.next();if(0!=(et.stage.mask&Z.mask)){var it,nt,rt=et.nodes;e:do{var ot;for(ot=rt.iterator();ot.hasNext();){var st=ot.next();if(zt(st.name,"ssrMap")&&e.isType(st,up)){nt=st;break e}}nt=null}while(0);var at=null==(it=nt)||e.isType(it,up)?it:c();if(null!=at){J=at;break t}}}J=null}while(0);var lt=null!=(s=J)?s.sampler:null;null!=lt&&(this.$outer,lt.texture=this.$outer.pbrLightingPass.colorTexture);var ut,pt,ct=this.model;t:do{var ht;for(ut=Fp.ALL,ht=ct.stages.values.iterator();ht.hasNext();){var dt=ht.next();if(0!=(dt.stage.mask&ut.mask)){var ft,_t,mt=dt.nodes;e:do{var $t;for($t=mt.iterator();$t.hasNext();){var yt=$t.next();if(zt(yt.name,"ssrNoiseTex")&&e.isType(yt,up)){_t=yt;break e}}_t=null}while(0);var vt=null==(ft=_t)||e.isType(ft,up)?ft:c();if(null!=vt){pt=vt;break t}}}pt=null}while(0);var gt=null!=(a=pt)?a.sampler:null;null!=gt&&(this.$outer,gt.texture=this.$outer.noiseTex_0);var bt,xt,wt=this.$outer,kt=this.model;t:do{var St;for(bt=Fp.ALL,St=kt.stages.values.iterator();St.hasNext();){var Ct=St.next();if(0!=(Ct.stage.mask&bt.mask)){var Nt,Et,Pt=Ct.nodes;e:do{var Tt;for(Tt=Pt.iterator();Tt.hasNext();){var Ot=Tt.next();if(zt(Ot.name,"uRoughThreshLow")&&e.isType(Ot,dp)){Et=Ot;break e}}Et=null}while(0);var Mt=null==(Nt=Et)||e.isType(Nt,dp)?Nt:c();if(null!=Mt){xt=Mt;break t}}}xt=null}while(0);wt.uRoughThreshLow_0=xt,null!=(u=null!=(l=this.$outer.uRoughThreshLow_0)?l.uniform:null)&&(u.value=this.$outer.roughnessThresholdLow);var jt,At,Rt=this.$outer,It=this.model;t:do{var Lt;for(jt=Fp.ALL,Lt=It.stages.values.iterator();Lt.hasNext();){var Dt=Lt.next();if(0!=(Dt.stage.mask&jt.mask)){var qt,Bt,Ft=Dt.nodes;e:do{var Ut;for(Ut=Ft.iterator();Ut.hasNext();){var Vt=Ut.next();if(zt(Vt.name,"uRoughThreshHigh")&&e.isType(Vt,dp)){Bt=Vt;break e}}Bt=null}while(0);var Gt=null==(qt=Bt)||e.isType(qt,dp)?qt:c();if(null!=Gt){At=Gt;break t}}}At=null}while(0);Rt.uRoughThreshHigh_0=At,null!=(h=null!=(p=this.$outer.uRoughThreshHigh_0)?p.uniform:null)&&(h.value=this.$outer.roughnessThresholdHigh);var Ht,Wt,Kt=this.$outer,Xt=this.model;t:do{var Yt;for(Ht=Fp.ALL,Yt=Xt.stages.values.iterator();Yt.hasNext();){var Zt=Yt.next();if(0!=(Zt.stage.mask&Ht.mask)){var Jt,Qt,te=Zt.nodes;e:do{var ee;for(ee=te.iterator();ee.hasNext();){var ie=ee.next();if(zt(ie.name,"uMaxIterations")&&e.isType(ie,yp)){Qt=ie;break e}}Qt=null}while(0);var ne=null==(Jt=Qt)||e.isType(Jt,yp)?Jt:c();if(null!=ne){Wt=ne;break t}}}Wt=null}while(0);Kt.uMaxIterations_0=Wt,null!=(f=null!=(d=this.$outer.uMaxIterations_0)?d.uniform:null)&&(f.value=this.$outer.scrSpcReflectionIterations)},sv.$metadata$={kind:$,simpleName:"ReflectionShader",interfaces:[sc]},ov.prototype.reflectionShaderModel_0=function(){var t=new Ru("ReflectionShaderModel"),e={v:null},i=new Lu(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.fullScreenQuadPositionNode_r20yfm$(i.attrTexCoords().output).outQuadPos;var n=new Du(t),r=e.v.output,o=n.textureNode_61zpoe$("positionAo"),s=n.addNode_u9w9by$(new Ry(n.stage));s.inPositionAo=n.textureSamplerNode_ce41yx$(o,r).outColor,s.inNormalRough=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("normalRoughness"),r).outColor;var a=s,l=n.addNode_u9w9by$(new lv(n.stage));l.inRoughness=a.outRoughness,l.inThreshLow=n.pushConstantNode1f_61zpoe$("uRoughThreshLow").output,l.inThreshHigh=n.pushConstantNode1f_61zpoe$("uRoughThreshHigh").output;var u=l,p=n.addNode_u9w9by$(new Uy(n.stage)),c=n.textureNode_61zpoe$("ssrNoiseTex"),h=n.noiseTextureSamplerNode_gwl5ki$(c,n.constVec2i_czzhjm$(new vr(4,4))).outNoise,d=n.textureNode_61zpoe$("ssrMap"),f=a.outViewPos,_=n.normalizeNode_r20yfm$(f).output,m=n.splitNode_500t7j$(h,"a").output,$=n.reflectNode_ze33is$(_,n.normalizeNode_r20yfm$(a.outViewNormal).output).outDirection,y=n.vecFromColorNode_r20yfm$(n.splitNode_500t7j$(h,"xyz").output).output,v=n.multiplyNode_ze33is$(y,a.outRoughness).output,g=n.normalizeNode_r20yfm$(n.addNode_ze33is$($,v).output).output,b=n.addNode_u9w9by$(new dv(o,n.stage));b.inProjMat=p.outProjMat,b.inRayOrigin=f,b.inRayDirection=g,b.inRayOffset=m,b.maxIterations=n.pushConstantNode1i_61zpoe$("uMaxIterations").output,b.baseStepFac=n.constFloat_mx4ult$(this.baseReflectionStep);var x=b,w=n.textureSamplerNode_ce41yx$(d,x.outSamplePos).outColor,z=n.multiplyNode_ze33is$(x.outSampleWeight,u.outWeight).output,k=n.gammaNode_ze33is$(w,n.constFloat_mx4ult$(2.2)).outColor;return n.colorOutput_a3v4si$(n.combineXyzWNode_ze33is$(k,z).output),t},av.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},av.prototype=Object.create(l.prototype),av.prototype.constructor=av,av.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$data;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ov.prototype.generateScrSpcReflectionNoiseTex_0=function(){var t,i=wN(4*e.imul(4,4)|0),n=new er(501930763),r=Mr();t=e.imul(4,4);for(var o=0;o<t;o++){do{r.set_y2kzbl$(n.randomF_dleff0$(-1,1),n.randomF_dleff0$(-1,1),n.randomF_dleff0$(-1,1))}while(r.length()>1);r.norm().scale_mx4ult$(.25),i.set_6t1wet$(0+(4*o|0)|0,Dt(F(127.5*(r.x+1)))),i.set_6t1wet$(1+(4*o|0)|0,Dt(F(127.5*(r.y+1)))),i.set_6t1wet$(2+(4*o|0)|0,Dt(F(127.5*(r.z+1)))),i.set_6t1wet$(3+(4*o|0)|0,Dt(n.randomI_n8acyv$(new Bt(0,255))))}var s,a=new Mh(i,4,4,Kc());return new Qc("ssr_noise_tex",new xh(Kc(),Th(),Th(),void 0,kh(),kh(),!1,1),(s=a,function(t,e,i,n){var r=new av(s,t,e,this,i);return n?r:r.doResume(null)}))},lv.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inRoughness,this.inThreshHigh,this.inThreshLow])},lv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                if ("+this.inRoughness.ref1f()+" > "+this.inThreshHigh.ref1f()+") discard;\n                "+this.outWeight.declare()+" = 1.0 - (clamp("+this.inRoughness.ref1f()+", "+this.inThreshLow.ref1f()+", "+this.inThreshHigh.ref1f()+") - "+this.inThreshLow.ref1f()+")\n                        / ("+this.inThreshHigh.ref1f()+" - "+this.inThreshLow.ref1f()+");\n            ")},lv.$metadata$={kind:$,simpleName:"DiscardRoughSurfacesNode",interfaces:[qu]},uv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pv=null;function cv(){return null===pv&&new uv,pv}function hv(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function dv(t,e){qu.call(this,"rayTrace_"+e.nextNodeId,e),this.positionTex=t,this.baseStepFac=new Bu(new wu(.02)),this.stepIncFac=new Bu(new wu(1.2)),this.maxIterations=new Bu(new Cu(24)),this.maxRefinements=new Bu(new Cu(5)),this.inProjMat=new Bu(new xu("_")),this.inRayOrigin=new Bu(new ku(Er().ZERO)),this.inRayDirection=new Bu(new ku(Er().Z_AXIS)),this.inRayOffset=new Bu(new ku(Er().Z_AXIS)),this.outRayPos=new Bu(new mu(this.name+"_outPos"),this),this.outSamplePos=new Bu(new mu(this.name+"_outSamplePos"),this),this.outSampleWeight=new Bu(new fu(this.name+"_outHitWeight"),this),this.outCost=new Bu(new fu(this.name+"_outSteps"),this)}function fv(){}function _v(t,e,i,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=gv().STD_CHARS),xv(new mv(t,e*i/96,r,o),n)}function mv(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=gv().STD_CHARS),this.family=t,this.sizePts=e,this.style=i,this.chars=n}function $v(t){var e;gv(),Qc.call(this,t.toString(),new xh(void 0,Eh(),Eh()),(e=t,function(t,i,n,r){var o=new bv(e,t,i,this,n);return r?o:o.doResume(null)})),this.charMap=t,this.lineSpace=1.2*this.charMap.fontProps.sizePts,this.normHeight=.7*this.charMap.fontProps.sizePts}function yv(){vv=this,this.PLAIN=0,this.BOLD=1,this.ITALIC=2,this.SYSTEM_FONT='-apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',this.STD_CHARS=null,this.DEFAULT_FONT_PROPS=null;for(var t="",e=32;e<=126;e++)t+=String.fromCharCode(N(e));t+="",this.STD_CHARS=t,this.DEFAULT_FONT_PROPS=new mv(this.SYSTEM_FONT,12)}ov.$metadata$={kind:$,simpleName:"ReflectionPass",interfaces:[ua]},dv.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.baseStepFac,this.stepIncFac,this.maxIterations,this.maxRefinements]),this.dependsOn_8ak6wm$([this.inProjMat,this.inRayOrigin,this.inRayDirection,this.inRayOffset])},dv.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("projectViewPos","\n            vec3 projectViewPos(vec3 viewPos) {\n                vec4 proj = "+this.inProjMat+" * vec4(viewPos, 1.0);\n                return (proj.xyz / proj.w) * 0.5 + 0.5;\n            }\n        "),t.appendFunction_puj7f4$("linearStep",_e("\n            float linearStep(float edge0, float edge1, float x) {\n                float f = clamp(x, edge0, edge1);\n                return (f - edge0) / (edge1 - edge0);\n            }\n        ")),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_rayPos = "+this.inRayOrigin.ref3f()+";\n            vec3 "+this.name+"_rayStepPos = "+this.name+"_rayPos;\n            float "+this.name+"_rayStep = -"+this.name+"_rayPos.z * "+this.baseStepFac.ref1f()+";\n            float "+this.name+"_rayOffset = "+this.inRayOffset.ref1f()+";\n            \n            float "+this.name+"_sampleDepth = 0.0;\n            float "+this.name+"_dDepth = 0.0;\n            bool "+this.name+"_refineHit = false;\n\n            int "+this.name+"_iSteps, "+this.name+"_iRef;\n            for ("+this.name+"_iSteps = 0, "+this.name+"_iRef = 0; "+this.name+"_iSteps < "+this.maxIterations.ref1i()+" && "+this.name+"_iRef < "+this.maxRefinements.ref1i()+"; "+this.name+"_iSteps++) {\n                "+this.name+"_rayStepPos += "+this.inRayDirection.ref3f()+" * "+this.name+"_rayStep;\n                "+this.name+"_rayPos = "+this.name+"_rayStepPos + "+this.inRayDirection.ref3f()+" * "+this.name+"_rayStep * "+this.name+"_rayOffset * "+this.stepIncFac.ref1f()+";\n                \n                vec2 "+this.name+"_samplePos = projectViewPos("+this.name+"_rayPos).xy;\n                if ("+this.name+"_samplePos.x < 0.0 || "+this.name+"_samplePos.x > 1.0\n                        || "+this.name+"_samplePos.x < 0.0 || "+this.name+"_samplePos.x > 1.0\n                        || "+this.name+"_rayPos.z > 0.0) {\n                    break;\n                }\n                \n                "+this.name+"_sampleDepth = "+t.sampleTexture2d_buzeal$(this.positionTex.name,this.name+"_samplePos")+".z;\n\n                // set a large depth if sampleDepth is positive (clear value)\n                "+this.name+"_sampleDepth -= 1e5 * step(0.1, "+this.name+"_sampleDepth);\n                \n                // diff between ray position depth and scene depth\n                //   negative -> ray pos is behind scene depth, i.e. covered by an object\n                //   positive -> ray pos is in front of scene\n                "+this.name+"_dDepth = "+this.name+"_rayPos.z - "+this.name+"_sampleDepth;\n                \n                if (!"+this.name+"_refineHit) {\n                    // search for hit\n                    if ("+this.name+"_dDepth < 0.0 && "+this.name+"_dDepth > (-"+this.name+"_rayStep - 0.2)) {\n                        // hit -> roll back position to previous ray position and start refinement\n                        "+this.name+"_rayStepPos = "+this.name+"_rayPos - "+this.inRayDirection.ref3f()+" * "+this.name+"_rayStep;\n                        "+this.name+"_rayOffset = 0.0;\n                        "+this.name+"_rayStep *= 0.5;\n                        "+this.name+"_refineHit = true;\n                    } else {\n                        // no hit, increase step size\n                        "+this.name+"_rayStep *= "+this.stepIncFac.ref1f()+";\n                    }\n\n                } else {\n                    // refine hit position\n                    "+this.name+"_rayStep = 0.5 * abs("+this.name+"_rayStep) * sign("+this.name+"_dDepth);\n                    "+this.name+"_iRef++;\n                }\n            }\n            \n            "+this.outCost.declare()+" = float("+this.name+"_iSteps) / "+this.maxIterations.ref1f()+";\n            "+this.outSampleWeight.declare()+" = 0.0;\n            "+this.outRayPos.declare()+" = vec3(0.0);\n            "+this.outSamplePos.declare()+" = vec3(0.0);\n            \n            if ("+this.maxIterations.ref1i()+" > 0) {\n                "+this.outRayPos+" = "+this.name+"_rayPos + "+this.inRayDirection.ref3f()+" * "+this.name+"_rayStep;\n                "+this.outSamplePos+" = projectViewPos("+this.outRayPos+");\n                \n                "+this.outSampleWeight+" = \n                              linearStep(0.0, 0.1, "+this.outSamplePos+".x) * (1.0 - linearStep(0.9, 1.0, "+this.outSamplePos+".x))\n                            * linearStep(0.0, 0.1, "+this.outSamplePos+".y) * (1.0 - linearStep(0.9, 1.0, "+this.outSamplePos+".y))\n                            * (1.0 - step(0.9999, "+this.outSamplePos+".z))\n                            * (1.0 - linearStep(0.0, -"+this.name+"_rayPos.z / 10.0, abs("+this.name+"_dDepth)));\n            }\n        ")},dv.$metadata$={kind:$,simpleName:"ScreenSpaceRayTraceNode",interfaces:[qu]},fv.$metadata$={kind:st,simpleName:"Disposable",interfaces:[]},mv.prototype.toString=function(){return"FontProps("+this.family+", "+this.sizePts+"pts, "+this.style+")"},mv.$metadata$={kind:$,simpleName:"FontProps",interfaces:[]},mv.prototype.component1=function(){return this.family},mv.prototype.component2=function(){return this.sizePts},mv.prototype.component3=function(){return this.style},mv.prototype.component4=function(){return this.chars},mv.prototype.copy_aw0137$=function(t,e,i,n){return new mv(void 0===t?this.family:t,void 0===e?this.sizePts:e,void 0===i?this.style:i,void 0===n?this.chars:n)},mv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.family)|0)+e.hashCode(this.sizePts)|0)+e.hashCode(this.style)|0)+e.hashCode(this.chars)|0},mv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.family,t.family)&&e.equals(this.sizePts,t.sizePts)&&e.equals(this.style,t.style)&&e.equals(this.chars,t.chars)},$v.prototype.textWidth_61zpoe$=function(t){var e,i,n,r,o=0,s=0;i=(e=me(t)).first,n=e.last,r=e.step;for(var a=i;a<=n;a+=r){var l=t.charCodeAt(a);(o+=this.charWidth_s8itvh$(l))>s&&(s=o),10===l&&(o=0)}return s},$v.prototype.charWidth_s8itvh$=function(t){var e,i;return null!=(i=null!=(e=this.charMap.get_11rb$(E(t)))?e.advance:null)?i:0},$v.prototype.toString=function(){return"Font("+this.charMap.fontProps+")"},yv.prototype.defaultFont_aemszp$=function(t){return xv(this.DEFAULT_FONT_PROPS,t)},yv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vv=null;function gv(){return null===vv&&new yv,vv}function bv(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$charMap=t}function xv(t,e,i){return i=i||Object.create($v.prototype),$v.call(i,e.assetMgr.createCharMap_ttufcy$(t)),i}function wv(){this.width=0,this.height=0,this.xOffset=0,this.yBaseline=0,this.advance=0,this.uvMin=pr(),this.uvMax=pr()}function zv(t,e,i){this.textureData=t,this.map_0=e,this.fontProps=i}function kv(t,e,i,n,r,o,s,a,l,u){Nv(),void 0===t&&(t=-1),void 0===e&&(e=0),void 0===n&&(n=!1),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===u&&(u=null),this.bufferView=t,this.byteOffset=e,this.componentType=i,this.normalized=n,this.count=r,this.type=o,this.max=s,this.min=a,this.sparse=l,this.name=u,this.bufferViewRef=null}function Sv(){Cv=this,this.TYPE_SCALAR="SCALAR",this.TYPE_VEC2="VEC2",this.TYPE_VEC3="VEC3",this.TYPE_VEC4="VEC4",this.TYPE_MAT2="MAT2",this.TYPE_MAT3="MAT3",this.TYPE_MAT4="MAT4",this.COMP_TYPE_BYTE=5120,this.COMP_TYPE_UNSIGNED_BYTE=5121,this.COMP_TYPE_SHORT=5122,this.COMP_TYPE_UNSIGNED_SHORT=5123,this.COMP_TYPE_INT=5124,this.COMP_TYPE_UNSIGNED_INT=5125,this.COMP_TYPE_FLOAT=5126,this.COMP_INT_TYPES=ve([5120,5121,5122,5123,5124,5125])}bv.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},bv.prototype=Object.create(l.prototype),bv.prototype.constructor=bv,bv.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$charMap.textureData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},$v.$metadata$={kind:$,simpleName:"Font",interfaces:[Qc]},wv.$metadata$={kind:$,simpleName:"CharMetrics",interfaces:[]},Object.defineProperty(zv.prototype,"entries",{get:function(){return this.map_0.entries}}),Object.defineProperty(zv.prototype,"keys",{get:function(){return this.map_0.keys}}),Object.defineProperty(zv.prototype,"size",{get:function(){return this.map_0.size}}),Object.defineProperty(zv.prototype,"values",{get:function(){return this.map_0.values}}),zv.prototype.containsKey_11rb$=function(t){return this.map_0.containsKey_11rb$(t)},zv.prototype.containsValue_11rc$=function(t){return this.map_0.containsValue_11rc$(t)},zv.prototype.get_11rb$=function(t){return this.map_0.get_11rb$(t)},zv.prototype.isEmpty=function(){return this.map_0.isEmpty()},zv.$metadata$={kind:$,simpleName:"CharMap",interfaces:[$e]},Sv.prototype.serializer=function(){return eg()},Sv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cv=null;function Nv(){return null===Cv&&new Sv,Cv}function Ev(t,e,i){Ov(),this.count=t,this.indices=e,this.values=i}function Pv(){Tv=this}Pv.prototype.serializer=function(){return Av()},Pv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Tv=null;function Ov(){return null===Tv&&new Pv,Tv}function Mv(){this.descriptor_xehwm7$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor.Sparse",this,3),this.descriptor.addElement_ivxn3r$("count",!1),this.descriptor.addElement_ivxn3r$("indices",!1),this.descriptor.addElement_ivxn3r$("values",!1),jv=this}Object.defineProperty(Mv.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_xehwm7$_0}}),Mv.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.count),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,Uv(),e.indices),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,Zv(),e.values),i.endStructure_24f42q$(this.descriptor)},Mv.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeSerializableElement_12e8id$(this.descriptor,1,Uv(),n),o|=2;break;case 2:r=s.decodeSerializableElement_12e8id$(this.descriptor,2,Zv(),r),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Rv(o,i,n,r,null)},Mv.prototype.childSerializers=function(){return[xe.IntSerializer,Uv(),Zv()]},Mv.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var jv=null;function Av(){return null===jv&&new Mv,jv}function Rv(t,e,i,n,r){var o=r||Object.create(Ev.prototype);if(0==(1&t))throw new ze("count");if(o.count=e,0==(2&t))throw new ze("indices");if(o.indices=i,0==(4&t))throw new ze("values");return o.values=n,o}function Iv(t,e,i){qv(),void 0===e&&(e=0),this.bufferView=t,this.byteOffset=e,this.componentType=i,this.bufferViewRef_8okve9$_0=this.bufferViewRef_8okve9$_0}function Lv(){Dv=this}Ev.$metadata$={kind:$,simpleName:"Sparse",interfaces:[]},Ev.prototype.component1=function(){return this.count},Ev.prototype.component2=function(){return this.indices},Ev.prototype.component3=function(){return this.values},Ev.prototype.copy_x8d0af$=function(t,e,i){return new Ev(void 0===t?this.count:t,void 0===e?this.indices:e,void 0===i?this.values:i)},Ev.prototype.toString=function(){return"Sparse(count="+e.toString(this.count)+", indices="+e.toString(this.indices)+", values="+e.toString(this.values)+")"},Ev.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.count)|0)+e.hashCode(this.indices)|0)+e.hashCode(this.values)|0},Ev.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.count,t.count)&&e.equals(this.indices,t.indices)&&e.equals(this.values,t.values)},Object.defineProperty(Iv.prototype,"bufferViewRef",{configurable:!0,get:function(){return null==this.bufferViewRef_8okve9$_0?pt("bufferViewRef"):this.bufferViewRef_8okve9$_0},set:function(t){this.bufferViewRef_8okve9$_0=t}}),Lv.prototype.serializer=function(){return Uv()},Lv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Dv=null;function qv(){return null===Dv&&new Lv,Dv}function Bv(){this.descriptor_9z4dbk$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor.SparseIndices",this,3),this.descriptor.addElement_ivxn3r$("bufferView",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("componentType",!1),Fv=this}Object.defineProperty(Bv.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_9z4dbk$_0}}),Bv.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.componentType),i.endStructure_24f42q$(this.descriptor)},Bv.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeIntElement_szpzho$(this.descriptor,2),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Vv(o,i,n,r,null)},Bv.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,xe.IntSerializer]},Bv.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Fv=null;function Uv(){return null===Fv&&new Bv,Fv}function Vv(t,e,i,n,r){var o=r||Object.create(Iv.prototype);if(0==(1&t))throw new ze("bufferView");if(o.bufferView=e,o.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ze("componentType");return o.componentType=n,o}function Gv(t,e){Kv(),void 0===e&&(e=0),this.bufferView=t,this.byteOffset=e,this.bufferViewRef_s3axfo$_0=this.bufferViewRef_s3axfo$_0}function Hv(){Wv=this}Iv.$metadata$={kind:$,simpleName:"SparseIndices",interfaces:[]},Iv.prototype.component1=function(){return this.bufferView},Iv.prototype.component2=function(){return this.byteOffset},Iv.prototype.component3=function(){return this.componentType},Iv.prototype.copy_qt1dr2$=function(t,e,i){return new Iv(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e,void 0===i?this.componentType:i)},Iv.prototype.toString=function(){return"SparseIndices(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+", componentType="+e.toString(this.componentType)+")"},Iv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.componentType)|0},Iv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.componentType,t.componentType)},Object.defineProperty(Gv.prototype,"bufferViewRef",{configurable:!0,get:function(){return null==this.bufferViewRef_s3axfo$_0?pt("bufferViewRef"):this.bufferViewRef_s3axfo$_0},set:function(t){this.bufferViewRef_s3axfo$_0=t}}),Hv.prototype.serializer=function(){return Zv()},Hv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Wv=null;function Kv(){return null===Wv&&new Hv,Wv}function Xv(){this.descriptor_qz2of1$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor.SparseValues",this,2),this.descriptor.addElement_ivxn3r$("bufferView",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),Yv=this}Object.defineProperty(Xv.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_qz2of1$_0}}),Xv.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.endStructure_24f42q$(this.descriptor)},Xv.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=o.decodeIntElement_szpzho$(this.descriptor,1),r|=2;break;case-1:break t;default:throw new be(e)}return o.endStructure_24f42q$(this.descriptor),Jv(r,i,n,null)},Xv.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer]},Xv.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Yv=null;function Zv(){return null===Yv&&new Xv,Yv}function Jv(t,e,i,n){var r=n||Object.create(Gv.prototype);if(0==(1&t))throw new ze("bufferView");return r.bufferView=e,r.byteOffset=0==(2&t)?0:i,r}function Qv(){this.descriptor_6qddyh$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor",this,10),this.descriptor.addElement_ivxn3r$("bufferView",!0),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("componentType",!1),this.descriptor.addElement_ivxn3r$("normalized",!0),this.descriptor.addElement_ivxn3r$("count",!1),this.descriptor.addElement_ivxn3r$("type",!1),this.descriptor.addElement_ivxn3r$("max",!0),this.descriptor.addElement_ivxn3r$("min",!0),this.descriptor.addElement_ivxn3r$("sparse",!0),this.descriptor.addElement_ivxn3r$("name",!0),tg=this}Gv.$metadata$={kind:$,simpleName:"SparseValues",interfaces:[]},Gv.prototype.component1=function(){return this.bufferView},Gv.prototype.component2=function(){return this.byteOffset},Gv.prototype.copy_vux9f0$=function(t,e){return new Gv(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e)},Gv.prototype.toString=function(){return"SparseValues(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+")"},Gv.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0},Gv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)},Object.defineProperty(Qv.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_6qddyh$_0}}),Qv.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.bufferView,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.componentType),zt(e.normalized,!1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeBooleanElement_qh7jdn$(this.descriptor,3,e.normalized),i.encodeIntElement_ptg7oe$(this.descriptor,4,e.count),i.encodeStringElement_iij8qq$(this.descriptor,5,e.type),zt(e.max,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,6,new ke(xe.FloatSerializer),e.max),zt(e.min,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,7,new ke(xe.FloatSerializer),e.min),zt(e.sparse,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,8,Av(),e.sparse),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,9,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Qv.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c,h=0,d=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=d.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=d.decodeIntElement_szpzho$(this.descriptor,0),h|=1;break;case 1:n=d.decodeIntElement_szpzho$(this.descriptor,1),h|=2;break;case 2:r=d.decodeIntElement_szpzho$(this.descriptor,2),h|=4;break;case 3:o=d.decodeBooleanElement_szpzho$(this.descriptor,3),h|=8;break;case 4:s=d.decodeIntElement_szpzho$(this.descriptor,4),h|=16;break;case 5:a=d.decodeStringElement_szpzho$(this.descriptor,5),h|=32;break;case 6:l=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,6,new ke(xe.FloatSerializer),l),h|=64;break;case 7:u=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,7,new ke(xe.FloatSerializer),u),h|=128;break;case 8:p=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,8,Av(),p),h|=256;break;case 9:c=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,9,xe.StringSerializer,c),h|=512;break;case-1:break t;default:throw new be(e)}return d.endStructure_24f42q$(this.descriptor),ig(h,i,n,r,o,s,a,l,u,p,c,null)},Qv.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,xe.BooleanSerializer,xe.IntSerializer,xe.StringSerializer,new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(Av()),new ye(xe.StringSerializer)]},Qv.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var tg=null;function eg(){return null===tg&&new Qv,tg}function ig(t,e,i,n,r,o,s,a,l,u,p,c){var h=c||Object.create(kv.prototype);if(h.bufferView=0==(1&t)?-1:e,h.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ze("componentType");if(h.componentType=n,h.normalized=0!=(8&t)&&r,0==(16&t))throw new ze("count");if(h.count=o,0==(32&t))throw new ze("type");return h.type=s,h.max=0==(64&t)?null:a,h.min=0==(128&t)?null:l,h.sparse=0==(256&t)?null:u,h.name=0==(512&t)?null:p,h.bufferViewRef=null,h}function ng(t){var i,n,r,o;switch(this.accessor=t,this.elemByteSize_7rvvqx$_0=0,this.byteStride_tkyqsw$_0=0,this.buffer_erynjj$_0=this.accessor.bufferViewRef,this.stream_lcz6z5$_0=null,this.sparseIndexStream_2vmodr$_0=null,this.sparseValueStream_1f0jfy$_0=null,this.sparseIndexType_mlp9rd$_0=0,this.nextSparseIndex_bp7us$_0=0,this.index_hw47f3$_0=0,i=null!=this.buffer_erynjj$_0?new oy(this.buffer_erynjj$_0.bufferRef.data,this.accessor.byteOffset+this.buffer_erynjj$_0.byteOffset|0):null,this.stream_lcz6z5$_0=i,null!=this.accessor.sparse?(this.sparseIndexStream_2vmodr$_0=new oy(this.accessor.sparse.indices.bufferViewRef.bufferRef.data,this.accessor.sparse.indices.bufferViewRef.byteOffset),this.sparseValueStream_1f0jfy$_0=new oy(this.accessor.sparse.values.bufferViewRef.bufferRef.data,this.accessor.sparse.values.bufferViewRef.byteOffset),this.sparseIndexType_mlp9rd$_0=this.accessor.sparse.indices.componentType,this.nextSparseIndex_bp7us$_0=this.nextIntComponent_jcyej8$_0(this.sparseIndexStream_2vmodr$_0,this.sparseIndexType_mlp9rd$_0)):(this.sparseIndexStream_2vmodr$_0=null,this.sparseValueStream_1f0jfy$_0=null,this.sparseIndexType_mlp9rd$_0=0,this.nextSparseIndex_bp7us$_0=-1),this.accessor.componentType){case 5120:case 5121:n=1;break;case 5122:case 5123:n=2;break;case 5124:case 5125:case 5126:n=4;break;default:throw V("Unknown accessor component type: "+this.accessor.componentType)}var s=n;switch(this.accessor.type){case"SCALAR":r=1;break;case"VEC2":r=2;break;case"VEC3":r=3;break;case"VEC4":case"MAT2":r=4;break;case"MAT3":r=9;break;case"MAT4":r=16;break;default:throw V("Unsupported accessor type: "+this.accessor.type)}var a=r;this.elemByteSize_7rvvqx$_0=e.imul(s,a),o=null!=this.buffer_erynjj$_0&&this.buffer_erynjj$_0.byteStride>0?this.buffer_erynjj$_0.byteStride:this.elemByteSize_7rvvqx$_0,this.byteStride_tkyqsw$_0=o}function rg(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_SCALAR))throw V("IntAccessor requires accessor type "+Nv().TYPE_SCALAR+", provided was "+t.type);if(!Nv().COMP_INT_TYPES.contains_11rb$(t.componentType))throw V("IntAccessor requires a (byte / short / int) component type, provided was "+t.componentType)}function og(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_SCALAR))throw V("Vec2fAccessor requires accessor type "+Nv().TYPE_SCALAR+", provided was "+t.type);if(5126!==t.componentType)throw V("FloatAccessor requires a float component type, provided was "+t.componentType)}function sg(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_VEC2))throw V("Vec2fAccessor requires accessor type "+Nv().TYPE_VEC2+", provided was "+t.type);if(5126!==t.componentType)throw V("Vec2fAccessor requires a float component type, provided was "+t.componentType)}function ag(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_VEC3))throw V("Vec3fAccessor requires accessor type "+Nv().TYPE_VEC3+", provided was "+t.type);if(5126!==t.componentType)throw V("Vec3fAccessor requires a float component type, provided was "+t.componentType)}function lg(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_VEC4))throw V("Vec4fAccessor requires accessor type "+Nv().TYPE_VEC4+", provided was "+t.type);if(5126!==t.componentType)throw V("Vec4fAccessor requires a float component type, provided was "+t.componentType)}function ug(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_VEC4))throw V("Vec4iAccessor requires accessor type "+Nv().TYPE_VEC4+", provided was "+t.type);if(!Nv().COMP_INT_TYPES.contains_11rb$(t.componentType))throw V("Vec4fAccessor requires a (byte / short / int) component type, provided was "+t.componentType)}function pg(t){if(ng.call(this,t),!zt(t.type,Nv().TYPE_MAT4))throw V("Mat4fAccessor requires accessor type "+Nv().TYPE_MAT4+", provided was "+t.type);if(5126!==t.componentType)throw V("Mat4fAccessor requires a float component type, provided was "+t.componentType)}function cg(t,e,i){Lg(),void 0===i&&(i=null),this.channels=t,this.samplers=e,this.name=i}function hg(t,e){_g(),this.sampler=t,this.target=e,this.samplerRef_jhnz8x$_0=this.samplerRef_jhnz8x$_0}function dg(){fg=this}kv.$metadata$={kind:$,simpleName:"GltfAccessor",interfaces:[]},kv.prototype.component1=function(){return this.bufferView},kv.prototype.component2=function(){return this.byteOffset},kv.prototype.component3=function(){return this.componentType},kv.prototype.component4=function(){return this.normalized},kv.prototype.component5=function(){return this.count},kv.prototype.component6=function(){return this.type},kv.prototype.component7=function(){return this.max},kv.prototype.component8=function(){return this.min},kv.prototype.component9=function(){return this.sparse},kv.prototype.component10=function(){return this.name},kv.prototype.copy_4gbanh$=function(t,e,i,n,r,o,s,a,l,u){return new kv(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e,void 0===i?this.componentType:i,void 0===n?this.normalized:n,void 0===r?this.count:r,void 0===o?this.type:o,void 0===s?this.max:s,void 0===a?this.min:a,void 0===l?this.sparse:l,void 0===u?this.name:u)},kv.prototype.toString=function(){return"GltfAccessor(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+", componentType="+e.toString(this.componentType)+", normalized="+e.toString(this.normalized)+", count="+e.toString(this.count)+", type="+e.toString(this.type)+", max="+e.toString(this.max)+", min="+e.toString(this.min)+", sparse="+e.toString(this.sparse)+", name="+e.toString(this.name)+")"},kv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.componentType)|0)+e.hashCode(this.normalized)|0)+e.hashCode(this.count)|0)+e.hashCode(this.type)|0)+e.hashCode(this.max)|0)+e.hashCode(this.min)|0)+e.hashCode(this.sparse)|0)+e.hashCode(this.name)|0},kv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.componentType,t.componentType)&&e.equals(this.normalized,t.normalized)&&e.equals(this.count,t.count)&&e.equals(this.type,t.type)&&e.equals(this.max,t.max)&&e.equals(this.min,t.min)&&e.equals(this.sparse,t.sparse)&&e.equals(this.name,t.name)},Object.defineProperty(ng.prototype,"index",{configurable:!0,get:function(){return this.index_hw47f3$_0},set:function(t){var i;this.index_hw47f3$_0=t,null!=(i=this.stream_lcz6z5$_0)&&(i.index=e.imul(t,this.byteStride_tkyqsw$_0))}}),ng.prototype.selectDataStream_ji0jaj$_0=function(){return this.index!==this.nextSparseIndex_bp7us$_0?this.stream_lcz6z5$_0:this.sparseValueStream_1f0jfy$_0},ng.prototype.nextInt=function(){var t,e;if(this.index<this.accessor.count)return null!=(e=null!=(t=this.selectDataStream_ji0jaj$_0())?this.nextIntComponent_jcyej8$_0(t,this.accessor.componentType):null)?e:0;throw new Se("Accessor overflow")},ng.prototype.nextFloat=function(){var t,e;if(this.index<this.accessor.count)return null!=(e=null!=(t=this.selectDataStream_ji0jaj$_0())?t.readFloat():null)?e:0;throw new Se("Accessor overflow")},ng.prototype.nextDouble=function(){return this.nextFloat()},ng.prototype.nextIntComponent_jcyej8$_0=function(t,e){var i;switch(e){case 5120:i=t.readByte();break;case 5121:i=t.readUByte();break;case 5122:i=t.readShort();break;case 5123:i=t.readUShort();break;case 5124:i=t.readInt();break;case 5125:i=t.readUInt();break;default:throw V("Invalid component type: "+e)}return i},ng.prototype.advance=function(){var t;this.index===this.nextSparseIndex_bp7us$_0&&!0===(null!=(t=this.sparseIndexStream_2vmodr$_0)?t.hasRemaining():null)&&(this.nextSparseIndex_bp7us$_0=this.nextIntComponent_jcyej8$_0(this.sparseIndexStream_2vmodr$_0,this.sparseIndexType_mlp9rd$_0)),this.index=this.index+1|0},ng.$metadata$={kind:$,simpleName:"DataStreamAccessor",interfaces:[]},rg.prototype.next=function(){if(this.index<this.accessor.count){var t=this.nextInt();return this.advance(),t}throw new Se("Accessor overflow")},rg.$metadata$={kind:$,simpleName:"IntAccessor",interfaces:[ng]},og.prototype.next=function(){var t=this.nextFloat();return this.advance(),t},og.prototype.nextD=function(){return this.next()},og.$metadata$={kind:$,simpleName:"FloatAccessor",interfaces:[ng]},sg.prototype.next=function(){return this.next_5s4mrl$(pr())},sg.prototype.next_5s4mrl$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),this.advance(),t},sg.prototype.nextD=function(){return this.nextD_5s4mrn$(yr())},sg.prototype.nextD_5s4mrn$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),this.advance(),t},sg.$metadata$={kind:$,simpleName:"Vec2fAccessor",interfaces:[ng]},ag.prototype.next=function(){return this.next_5s4mqq$(Mr())},ag.prototype.next_5s4mqq$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),t.z=this.nextFloat(),this.advance(),t},ag.prototype.nextD=function(){return this.nextD_5s4mqs$(Fr())},ag.prototype.nextD_5s4mqs$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),t.z=this.nextDouble(),this.advance(),t},ag.$metadata$={kind:$,simpleName:"Vec3fAccessor",interfaces:[ng]},lg.prototype.next=function(){return this.next_5s4mpv$(no())},lg.prototype.next_5s4mpv$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),t.z=this.nextFloat(),t.w=this.nextFloat(),this.advance(),t},lg.prototype.nextD=function(){return this.nextD_5s4mpx$(po())},lg.prototype.nextD_5s4mpx$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),t.z=this.nextDouble(),t.w=this.nextDouble(),this.advance(),t},lg.$metadata$={kind:$,simpleName:"Vec4fAccessor",interfaces:[ng]},ug.prototype.next=function(){return this.next_5s4mps$(Eo())},ug.prototype.next_5s4mps$=function(t){return t.x=this.nextInt(),t.y=this.nextInt(),t.z=this.nextInt(),t.w=this.nextInt(),this.advance(),t},ug.$metadata$={kind:$,simpleName:"Vec4iAccessor",interfaces:[ng]},pg.prototype.next=function(){return this.next_d4zu6j$(new En)},pg.prototype.next_d4zu6j$=function(t){for(var e=0;e<=15;e++)t.matrix[e]=this.nextFloat();return this.advance(),t},pg.prototype.nextD=function(){return this.nextD_d4zu6l$(new bn)},pg.prototype.nextD_d4zu6l$=function(t){for(var e=0;e<=15;e++)t.matrix[e]=this.nextDouble();return this.advance(),t},pg.$metadata$={kind:$,simpleName:"Mat4fAccessor",interfaces:[ng]},Object.defineProperty(hg.prototype,"samplerRef",{configurable:!0,get:function(){return null==this.samplerRef_jhnz8x$_0?pt("samplerRef"):this.samplerRef_jhnz8x$_0},set:function(t){this.samplerRef_jhnz8x$_0=t}}),dg.prototype.serializer=function(){return yg()},dg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fg=null;function _g(){return null===fg&&new dg,fg}function mg(){this.descriptor_lxi57x$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation.Channel",this,2),this.descriptor.addElement_ivxn3r$("sampler",!1),this.descriptor.addElement_ivxn3r$("target",!1),$g=this}Object.defineProperty(mg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_lxi57x$_0}}),mg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.sampler),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,Sg(),e.target),i.endStructure_24f42q$(this.descriptor)},mg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=o.decodeSerializableElement_12e8id$(this.descriptor,1,Sg(),n),r|=2;break;case-1:break t;default:throw new be(e)}return o.endStructure_24f42q$(this.descriptor),vg(r,i,n,null)},mg.prototype.childSerializers=function(){return[xe.IntSerializer,Sg()]},mg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var $g=null;function yg(){return null===$g&&new mg,$g}function vg(t,e,i,n){var r=n||Object.create(hg.prototype);if(0==(1&t))throw new ze("sampler");if(r.sampler=e,0==(2&t))throw new ze("target");return r.target=i,r}function gg(t,e){wg(),void 0===t&&(t=-1),this.node=t,this.path=e,this.nodeRef=null}function bg(){xg=this,this.PATH_TRANSLATION="translation",this.PATH_ROTATION="rotation",this.PATH_SCALE="scale",this.PATH_WEIGHTS="weights"}hg.$metadata$={kind:$,simpleName:"Channel",interfaces:[]},hg.prototype.component1=function(){return this.sampler},hg.prototype.component2=function(){return this.target},hg.prototype.copy_16lfz8$=function(t,e){return new hg(void 0===t?this.sampler:t,void 0===e?this.target:e)},hg.prototype.toString=function(){return"Channel(sampler="+e.toString(this.sampler)+", target="+e.toString(this.target)+")"},hg.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.sampler)|0)+e.hashCode(this.target)|0},hg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.sampler,t.sampler)&&e.equals(this.target,t.target)},bg.prototype.serializer=function(){return Sg()},bg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var xg=null;function wg(){return null===xg&&new bg,xg}function zg(){this.descriptor_8uby97$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation.Target",this,2),this.descriptor.addElement_ivxn3r$("node",!0),this.descriptor.addElement_ivxn3r$("path",!1),kg=this}Object.defineProperty(zg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_8uby97$_0}}),zg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.node,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.node),i.encodeStringElement_iij8qq$(this.descriptor,1,e.path),i.endStructure_24f42q$(this.descriptor)},zg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=o.decodeStringElement_szpzho$(this.descriptor,1),r|=2;break;case-1:break t;default:throw new be(e)}return o.endStructure_24f42q$(this.descriptor),Cg(r,i,n,null)},zg.prototype.childSerializers=function(){return[xe.IntSerializer,xe.StringSerializer]},zg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var kg=null;function Sg(){return null===kg&&new zg,kg}function Cg(t,e,i,n){var r=n||Object.create(gg.prototype);if(r.node=0==(1&t)?-1:e,0==(2&t))throw new ze("path");return r.path=i,r.nodeRef=null,r}function Ng(t,e,i){Tg(),void 0===e&&(e=Tg().INTERPOLATION_LINEAR),this.input=t,this.interpolation=e,this.output=i,this.inputAccessorRef_83hs5f$_0=this.inputAccessorRef_83hs5f$_0,this.outputAccessorRef_fq2m6i$_0=this.outputAccessorRef_fq2m6i$_0}function Eg(){Pg=this,this.INTERPOLATION_LINEAR="LINEAR",this.INTERPOLATION_STEP="STEP",this.INTERPOLATION_CUBICSPLINE="CUBICSPLINE"}gg.$metadata$={kind:$,simpleName:"Target",interfaces:[]},gg.prototype.component1=function(){return this.node},gg.prototype.component2=function(){return this.path},gg.prototype.copy_19mbxw$=function(t,e){return new gg(void 0===t?this.node:t,void 0===e?this.path:e)},gg.prototype.toString=function(){return"Target(node="+e.toString(this.node)+", path="+e.toString(this.path)+")"},gg.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.node)|0)+e.hashCode(this.path)|0},gg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.node,t.node)&&e.equals(this.path,t.path)},Object.defineProperty(Ng.prototype,"inputAccessorRef",{configurable:!0,get:function(){return null==this.inputAccessorRef_83hs5f$_0?pt("inputAccessorRef"):this.inputAccessorRef_83hs5f$_0},set:function(t){this.inputAccessorRef_83hs5f$_0=t}}),Object.defineProperty(Ng.prototype,"outputAccessorRef",{configurable:!0,get:function(){return null==this.outputAccessorRef_fq2m6i$_0?pt("outputAccessorRef"):this.outputAccessorRef_fq2m6i$_0},set:function(t){this.outputAccessorRef_fq2m6i$_0=t}}),Eg.prototype.serializer=function(){return jg()},Eg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Pg=null;function Tg(){return null===Pg&&new Eg,Pg}function Og(){this.descriptor_vtcpaw$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation.Sampler",this,3),this.descriptor.addElement_ivxn3r$("input",!1),this.descriptor.addElement_ivxn3r$("interpolation",!0),this.descriptor.addElement_ivxn3r$("output",!1),Mg=this}Object.defineProperty(Og.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vtcpaw$_0}}),Og.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.input),zt(e.interpolation,Tg().INTERPOLATION_LINEAR)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeStringElement_iij8qq$(this.descriptor,1,e.interpolation),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.output),i.endStructure_24f42q$(this.descriptor)},Og.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeStringElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeIntElement_szpzho$(this.descriptor,2),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Ag(o,i,n,r,null)},Og.prototype.childSerializers=function(){return[xe.IntSerializer,xe.StringSerializer,xe.IntSerializer]},Og.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Mg=null;function jg(){return null===Mg&&new Og,Mg}function Ag(t,e,i,n,r){var o=r||Object.create(Ng.prototype);if(0==(1&t))throw new ze("input");if(o.input=e,o.interpolation=0==(2&t)?Tg().INTERPOLATION_LINEAR:i,0==(4&t))throw new ze("output");return o.output=n,o}function Rg(){Ig=this}Ng.$metadata$={kind:$,simpleName:"Sampler",interfaces:[]},Ng.prototype.component1=function(){return this.input},Ng.prototype.component2=function(){return this.interpolation},Ng.prototype.component3=function(){return this.output},Ng.prototype.copy_jl0c9m$=function(t,e,i){return new Ng(void 0===t?this.input:t,void 0===e?this.interpolation:e,void 0===i?this.output:i)},Ng.prototype.toString=function(){return"Sampler(input="+e.toString(this.input)+", interpolation="+e.toString(this.interpolation)+", output="+e.toString(this.output)+")"},Ng.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.input)|0)+e.hashCode(this.interpolation)|0)+e.hashCode(this.output)|0},Ng.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.input,t.input)&&e.equals(this.interpolation,t.interpolation)&&e.equals(this.output,t.output)},Rg.prototype.serializer=function(){return Bg()},Rg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ig=null;function Lg(){return null===Ig&&new Rg,Ig}function Dg(){this.descriptor_tnzh7m$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation",this,3),this.descriptor.addElement_ivxn3r$("channels",!1),this.descriptor.addElement_ivxn3r$("samplers",!1),this.descriptor.addElement_ivxn3r$("name",!0),qg=this}Object.defineProperty(Dg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_tnzh7m$_0}}),Dg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(yg()),e.channels),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new ke(jg()),e.samplers),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Dg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(yg()),i),o|=1;break;case 1:n=s.decodeSerializableElement_12e8id$(this.descriptor,1,new ke(jg()),n),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,r),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Fg(o,i,n,r,null)},Dg.prototype.childSerializers=function(){return[new ke(yg()),new ke(jg()),new ye(xe.StringSerializer)]},Dg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var qg=null;function Bg(){return null===qg&&new Dg,qg}function Fg(t,e,i,n,r){var o=r||Object.create(cg.prototype);if(0==(1&t))throw new ze("channels");if(o.channels=e,0==(2&t))throw new ze("samplers");return o.samplers=i,o.name=0==(4&t)?null:n,o}function Ug(t,e,i,n){Hg(),void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.copyright=t,this.generator=e,this.version=i,this.minVersion=n}function Vg(){Gg=this}cg.$metadata$={kind:$,simpleName:"GltfAnimation",interfaces:[]},cg.prototype.component1=function(){return this.channels},cg.prototype.component2=function(){return this.samplers},cg.prototype.component3=function(){return this.name},cg.prototype.copy_gie5zu$=function(t,e,i){return new cg(void 0===t?this.channels:t,void 0===e?this.samplers:e,void 0===i?this.name:i)},cg.prototype.toString=function(){return"GltfAnimation(channels="+e.toString(this.channels)+", samplers="+e.toString(this.samplers)+", name="+e.toString(this.name)+")"},cg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.channels)|0)+e.hashCode(this.samplers)|0)+e.hashCode(this.name)|0},cg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.channels,t.channels)&&e.equals(this.samplers,t.samplers)&&e.equals(this.name,t.name)},Vg.prototype.serializer=function(){return Xg()},Vg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gg=null;function Hg(){return null===Gg&&new Vg,Gg}function Wg(){this.descriptor_jo73ey$_0=new ge("de.fabmax.kool.util.gltf.GltfAsset",this,4),this.descriptor.addElement_ivxn3r$("copyright",!0),this.descriptor.addElement_ivxn3r$("generator",!0),this.descriptor.addElement_ivxn3r$("version",!1),this.descriptor.addElement_ivxn3r$("minVersion",!0),Kg=this}Object.defineProperty(Wg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_jo73ey$_0}}),Wg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.copyright,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.copyright),zt(e.generator,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,xe.StringSerializer,e.generator),i.encodeStringElement_iij8qq$(this.descriptor,2,e.version),zt(e.minVersion,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,xe.StringSerializer,e.minVersion),i.endStructure_24f42q$(this.descriptor)},Wg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),s|=1;break;case 1:n=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,xe.StringSerializer,n),s|=2;break;case 2:r=a.decodeStringElement_szpzho$(this.descriptor,2),s|=4;break;case 3:o=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,xe.StringSerializer,o),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),Yg(s,i,n,r,o,null)},Wg.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),new ye(xe.StringSerializer),xe.StringSerializer,new ye(xe.StringSerializer)]},Wg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Kg=null;function Xg(){return null===Kg&&new Wg,Kg}function Yg(t,e,i,n,r,o){var s=o||Object.create(Ug.prototype);if(s.copyright=0==(1&t)?null:e,s.generator=0==(2&t)?null:i,0==(4&t))throw new ze("version");return s.version=n,s.minVersion=0==(8&t)?null:r,s}function Zg(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$tmp$=void 0,this.local$file=void 0,this.local$modelBasePath=void 0,this.local$tmp$_1=void 0,this.local$element=void 0,this.local$$receiver=t,this.local$assetPath=e}function Jg(t,e,i,n){var r=new Zg(t,e,i);return n?r:r.doResume(null)}function Qg(t,e,i,n,r){l.call(this,r),this.exceptionState_0=1,this.local$$receiver=t,this.local$assetPath=e,this.local$modelCfg=i,this.local$scene=n}function tb(t){return Ne(t,".glb",!0)||Ne(t,".glb.gz",!0)}function eb(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$$receiver=t,this.local$assetPath=e}function ib(t,e,i,n){var r=new eb(t,e,i);return n?r:r.doResume(null)}function nb(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$tmp$=void 0,this.local$$receiver=t,this.local$assetPath=e}function rb(t,e,i,n){var r=new nb(t,e,i);return n?r:r.doResume(null)}function ob(t,e,i){lb(),void 0===t&&(t=null),void 0===i&&(i=null),this.uri=t,this.byteLength=e,this.name=i,this.data_5ej3ir$_0=this.data_5ej3ir$_0}function sb(){ab=this}Ug.$metadata$={kind:$,simpleName:"GltfAsset",interfaces:[]},Ug.prototype.component1=function(){return this.copyright},Ug.prototype.component2=function(){return this.generator},Ug.prototype.component3=function(){return this.version},Ug.prototype.component4=function(){return this.minVersion},Ug.prototype.copy_iz7fdb$=function(t,e,i,n){return new Ug(void 0===t?this.copyright:t,void 0===e?this.generator:e,void 0===i?this.version:i,void 0===n?this.minVersion:n)},Ug.prototype.toString=function(){return"GltfAsset(copyright="+e.toString(this.copyright)+", generator="+e.toString(this.generator)+", version="+e.toString(this.version)+", minVersion="+e.toString(this.minVersion)+")"},Ug.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.copyright)|0)+e.hashCode(this.generator)|0)+e.hashCode(this.version)|0)+e.hashCode(this.minVersion)|0},Ug.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.copyright,t.copyright)&&e.equals(this.generator,t.generator)&&e.equals(this.version,t.version)&&e.equals(this.minVersion,t.minVersion)},Zg.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Zg.prototype=Object.create(l.prototype),Zg.prototype.constructor=Zg,Zg.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(m=this.local$assetPath,Ne(m,".gltf",!0)||Ne(m,".gltf.gz",!0)){if(this.state_0=4,this.result_0=ib(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue}if(tb(this.local$assetPath)){if(this.state_0=2,this.result_0=rb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue}this.local$tmp$=null,this.state_0=3;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=this.result_0,this.state_0=3;continue;case 3:this.state_0=5;continue;case 4:this.local$tmp$=this.result_0,this.state_0=5;continue;case 5:if(this.local$file=this.local$tmp$,Ce(this.local$assetPath,47)){var e=Wt(this.local$assetPath,47);t=this.local$assetPath.substring(0,e)}else t=".";if(this.local$modelBasePath=t,null!=this.local$file){var i,n=this.local$file.buffers,r=M();for(i=n.iterator();i.hasNext();){var o=i.next();null!=o.uri&&r.add_11rb$(o)}this.local$tmp$_1=r.iterator(),this.state_0=6;continue}this.state_0=9;continue;case 6:if(!this.local$tmp$_1.hasNext()){this.state_0=8;continue}this.local$element=this.local$tmp$_1.next();var s=x(this.local$element.uri),l=u(s,"data:",!0)?s:this.local$modelBasePath+"/"+s;if(this.state_0=7,this.result_0=this.local$$receiver.loadAsset_61zpoe$(l,this),this.result_0===a)return a;continue;case 7:this.local$element.data=x(this.result_0),this.state_0=6;continue;case 8:var p,c,h=this.local$file.images,d=M();for(p=h.iterator();p.hasNext();){var f=p.next();null!=f.uri&&d.add_11rb$(f)}for(c=d.iterator();c.hasNext();){var _=c.next();_.uri=this.local$modelBasePath+"/"+Ct(_.uri)}this.local$file.updateReferences_8be2vx$(),this.state_0=9;continue;case 9:return this.local$file;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}var m},Qg.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Qg.prototype=Object.create(l.prototype),Qg.prototype.constructor=Qg,Qg.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(void 0===this.local$modelCfg&&(this.local$modelCfg=new xb),void 0===this.local$scene&&(this.local$scene=0),this.state_0=2,this.result_0=Jg(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return null!=(t=this.result_0)?t.makeModel_m0hq3v$(this.local$modelCfg,this.local$scene):null;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},eb.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},eb.prototype=Object.create(l.prototype),eb.prototype.constructor=eb,eb.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAsset_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return null!=t&&Ne(this.local$assetPath,".gz",!0)&&(t=this.local$$receiver.inflate_ay2i3f$(t)),null!=t?Eb().fromJson_61zpoe$(Ee(t.toArray())):null;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},nb.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},nb.prototype=Object.create(l.prototype),nb.prototype.constructor=nb,nb.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAsset_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.local$tmp$=this.result_0,null==this.local$tmp$)return null;this.state_0=3;continue;case 3:var t=this.local$tmp$;Ne(this.local$assetPath,".gz",!0)&&(t=this.local$$receiver.inflate_ay2i3f$(t));var i=new oy(t),n=i.readUInt(),r=i.readUInt();if(i.readUInt(),1179937895!==n)throw cn("Unexpected glTF magic number: "+n+" (should be 1179937895 / 'glTF')");if(2!==r){var o=qN.Log,s=vz.WARN,l=e.getKClassFromExpression(this.local$$receiver).simpleName;s.level>=o.level.level&&o.printer(s,l,"Unexpected glTF version: "+r+" (should be 2) - stuff might not work as expected")}var u=i.readUInt(),p={v:i.readUInt()};if(1313821514!==p.v)throw cn("Unexpected chunk type for chunk 0: "+p.v+" (should be 1313821514 / 'JSON')");for(var c=i.readData_za3lpa$(u).toArray(),h=Eb().fromJson_61zpoe$(Ee(c)),d={v:1};i.hasRemaining();){if(u=i.readUInt(),p.v=i.readUInt(),5130562===p.v)h.buffers.get_za3lpa$(d.v-1|0).data=i.readData_za3lpa$(u);else{var f=qN.Log,_=vz.WARN,m=e.getKClassFromExpression(this.local$$receiver).simpleName;_.level>=f.level.level&&f.printer(_,m,"Unexpected chunk type for chunk "+d.v+": "+p.v+" (should be 5130562 / ' BIN')"),i.index=i.index+u|0}d.v=d.v+1|0}return h;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(ob.prototype,"data",{configurable:!0,get:function(){return null==this.data_5ej3ir$_0?pt("data"):this.data_5ej3ir$_0},set:function(t){this.data_5ej3ir$_0=t}}),sb.prototype.serializer=function(){return cb()},sb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ab=null;function lb(){return null===ab&&new sb,ab}function ub(){this.descriptor_ou5fio$_0=new ge("de.fabmax.kool.util.gltf.GltfBuffer",this,3),this.descriptor.addElement_ivxn3r$("uri",!0),this.descriptor.addElement_ivxn3r$("byteLength",!1),this.descriptor.addElement_ivxn3r$("name",!0),pb=this}Object.defineProperty(ub.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_ou5fio$_0}}),ub.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.uri,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.uri),i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteLength),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},ub.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),o|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,r),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),hb(o,i,n,r,null)},ub.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),xe.IntSerializer,new ye(xe.StringSerializer)]},ub.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var pb=null;function cb(){return null===pb&&new ub,pb}function hb(t,e,i,n,r){var o=r||Object.create(ob.prototype);if(o.uri=0==(1&t)?null:e,0==(2&t))throw new ze("byteLength");return o.byteLength=i,o.name=0==(4&t)?null:n,o}function db(t,e,i,n,r,o){mb(),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=null),this.buffer=t,this.byteOffset=e,this.byteLength=i,this.byteStride=n,this.target=r,this.name=o,this.bufferRef_y7hzt1$_0=this.bufferRef_y7hzt1$_0}function fb(){_b=this}ob.$metadata$={kind:$,simpleName:"GltfBuffer",interfaces:[]},ob.prototype.component1=function(){return this.uri},ob.prototype.component2=function(){return this.byteLength},ob.prototype.component3=function(){return this.name},ob.prototype.copy_xf6674$=function(t,e,i){return new ob(void 0===t?this.uri:t,void 0===e?this.byteLength:e,void 0===i?this.name:i)},ob.prototype.toString=function(){return"GltfBuffer(uri="+e.toString(this.uri)+", byteLength="+e.toString(this.byteLength)+", name="+e.toString(this.name)+")"},ob.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.uri)|0)+e.hashCode(this.byteLength)|0)+e.hashCode(this.name)|0},ob.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.uri,t.uri)&&e.equals(this.byteLength,t.byteLength)&&e.equals(this.name,t.name)},Object.defineProperty(db.prototype,"bufferRef",{configurable:!0,get:function(){return null==this.bufferRef_y7hzt1$_0?pt("bufferRef"):this.bufferRef_y7hzt1$_0},set:function(t){this.bufferRef_y7hzt1$_0=t}}),db.prototype.getData=function(){var t,e=wN(this.byteLength);t=this.byteLength;for(var i=0;i<t;i++)e.set_6t1wet$(i,this.bufferRef.data.get_za3lpa$(this.byteOffset+i|0));return e},fb.prototype.serializer=function(){return vb()},fb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _b=null;function mb(){return null===_b&&new fb,_b}function $b(){this.descriptor_7gwufp$_0=new ge("de.fabmax.kool.util.gltf.GltfBufferView",this,6),this.descriptor.addElement_ivxn3r$("buffer",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("byteLength",!1),this.descriptor.addElement_ivxn3r$("byteStride",!0),this.descriptor.addElement_ivxn3r$("target",!0),this.descriptor.addElement_ivxn3r$("name",!0),yb=this}Object.defineProperty($b.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7gwufp$_0}}),$b.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.buffer),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.byteLength),zt(e.byteStride,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeIntElement_ptg7oe$(this.descriptor,3,e.byteStride),zt(e.target,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeIntElement_ptg7oe$(this.descriptor,4,e.target),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},$b.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l=0,u=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=u.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=u.decodeIntElement_szpzho$(this.descriptor,0),l|=1;break;case 1:n=u.decodeIntElement_szpzho$(this.descriptor,1),l|=2;break;case 2:r=u.decodeIntElement_szpzho$(this.descriptor,2),l|=4;break;case 3:o=u.decodeIntElement_szpzho$(this.descriptor,3),l|=8;break;case 4:s=u.decodeIntElement_szpzho$(this.descriptor,4),l|=16;break;case 5:a=u.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,xe.StringSerializer,a),l|=32;break;case-1:break t;default:throw new be(e)}return u.endStructure_24f42q$(this.descriptor),gb(l,i,n,r,o,s,a,null)},$b.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,new ye(xe.StringSerializer)]},$b.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var yb=null;function vb(){return null===yb&&new $b,yb}function gb(t,e,i,n,r,o,s,a){var l=a||Object.create(db.prototype);if(0==(1&t))throw new ze("buffer");if(l.buffer=e,l.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ze("byteLength");return l.byteLength=n,l.byteStride=0==(8&t)?0:r,l.target=0==(16&t)?0:o,l.name=0==(32&t)?null:s,l}function bb(t,e,i,n,r,o,s,a,l,u,p,c,h,d,f){Eb(),void 0===t&&(t=Nt()),void 0===e&&(e=Nt()),void 0===i&&(i=Nt()),void 0===n&&(n=Nt()),void 0===o&&(o=Nt()),void 0===s&&(s=Nt()),void 0===a&&(a=Nt()),void 0===l&&(l=Nt()),void 0===u&&(u=Nt()),void 0===p&&(p=Nt()),void 0===c&&(c=0),void 0===h&&(h=Nt()),void 0===d&&(d=Nt()),void 0===f&&(f=Nt()),this.extensionsUsed=t,this.extensionsRequired=e,this.accessors=i,this.animations=n,this.asset=r,this.buffers=o,this.bufferViews=s,this.images=a,this.materials=l,this.meshes=u,this.nodes=p,this.scene=c,this.scenes=h,this.skins=d,this.textures=f}function xb(t,e,i,n,r,o,s,a,l,u,p){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=new wb),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===l&&(l=!1),void 0===u&&(u=!0),void 0===p&&(p=null),this.generateNormals=t,this.applyMaterials=e,this.materialConfig=i,this.loadAnimations=n,this.applySkins=r,this.applyMorphTargets=o,this.applyTransforms=s,this.removeEmptyNodes=a,this.mergeMeshesByMaterial=l,this.sortNodesByAlpha=u,this.pbrBlock=p}function wb(t,e,i,n){void 0===t&&(t=Nt()),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),this.shadowMaps=t,this.scrSpcAmbientOcclusionMap=e,this.environmentMaps=i,this.isDeferredShading=n}function zb(t,e){this.$outer=t,this.cfg=e,this.modelAnimations=M(),this.modelNodes=z(),this.meshesByMaterial=z(),this.meshMaterials=z()}function kb(t){return function(e){var i;i=e.numVertices;for(var n=0;n<i;n++){e.vertexIt.index=n;var r=t,o=e.vertexIt;r.transform_w1lst9$(o.position,1),r.transform_w1lst9$(o.normal,0);var a=o.tangent.getXyz_5s4mqq$(Mr());r.transform_w1lst9$(a,0),o.tangent.set_2qa7tb$(a,o.tangent.w)}return s}}function Sb(){Nb=this,this.GLB_FILE_MAGIC=1179937895,this.GLB_CHUNK_MAGIC_JSON=1313821514,this.GLB_CHUNK_MAGIC_BIN=5130562}function Cb(t){return t.isLenient=!0,t.ignoreUnknownKeys=!0,t.allowSpecialFloatingPointValues=!0,t.useArrayPolymorphism=!0,s}db.$metadata$={kind:$,simpleName:"GltfBufferView",interfaces:[]},db.prototype.component1=function(){return this.buffer},db.prototype.component2=function(){return this.byteOffset},db.prototype.component3=function(){return this.byteLength},db.prototype.component4=function(){return this.byteStride},db.prototype.component5=function(){return this.target},db.prototype.component6=function(){return this.name},db.prototype.copy_o3471x$=function(t,e,i,n,r,o){return new db(void 0===t?this.buffer:t,void 0===e?this.byteOffset:e,void 0===i?this.byteLength:i,void 0===n?this.byteStride:n,void 0===r?this.target:r,void 0===o?this.name:o)},db.prototype.toString=function(){return"GltfBufferView(buffer="+e.toString(this.buffer)+", byteOffset="+e.toString(this.byteOffset)+", byteLength="+e.toString(this.byteLength)+", byteStride="+e.toString(this.byteStride)+", target="+e.toString(this.target)+", name="+e.toString(this.name)+")"},db.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.buffer)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.byteLength)|0)+e.hashCode(this.byteStride)|0)+e.hashCode(this.target)|0)+e.hashCode(this.name)|0},db.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.buffer,t.buffer)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.byteLength,t.byteLength)&&e.equals(this.byteStride,t.byteStride)&&e.equals(this.target,t.target)&&e.equals(this.name,t.name)},bb.prototype.makeModel_m0hq3v$=function(t,e){return void 0===t&&(t=new xb),void 0===e&&(e=this.scene),new zb(this,t).makeModel_m76q01$(this.scenes.get_za3lpa$(e))},bb.prototype.updateReferences_8be2vx$=function(){var t,e,i;for(t=this.accessors.iterator();t.hasNext();){var n,r=t.next();r.bufferView>=0&&(r.bufferViewRef=this.bufferViews.get_za3lpa$(r.bufferView)),null!=(n=r.sparse)&&(n.indices.bufferViewRef=this.bufferViews.get_za3lpa$(n.indices.bufferView),n.values.bufferViewRef=this.bufferViews.get_za3lpa$(n.values.bufferView))}for(e=this.animations.iterator();e.hasNext();){var o,s,a=e.next();for(o=a.samplers.iterator();o.hasNext();){var l=o.next();l.inputAccessorRef=this.accessors.get_za3lpa$(l.input),l.outputAccessorRef=this.accessors.get_za3lpa$(l.output)}for(s=a.channels.iterator();s.hasNext();){var u=s.next();u.samplerRef=a.samplers.get_za3lpa$(u.sampler),u.target.node>=0&&(u.target.nodeRef=this.nodes.get_za3lpa$(u.target.node))}}for(i=this.bufferViews.iterator();i.hasNext();){var p=i.next();p.bufferRef=this.buffers.get_za3lpa$(p.buffer)}var c,h,d,f,_,m,$,y=this.images,v=M();for(c=y.iterator();c.hasNext();){var g=c.next();g.bufferView>=0&&v.add_11rb$(g)}for(h=v.iterator();h.hasNext();){var b=h.next();b.bufferViewRef=this.bufferViews.get_za3lpa$(b.bufferView)}for(d=this.meshes.iterator();d.hasNext();){var x;for(x=d.next().primitives.iterator();x.hasNext();){var z=x.next();z.material>=0&&(z.materialRef=this.materials.get_za3lpa$(z.material))}}for(f=this.nodes.iterator();f.hasNext();){var k,S=f.next(),C=S.children,N=w(j(C,10));for(k=C.iterator();k.hasNext();){var E=k.next();N.add_11rb$(this.nodes.get_za3lpa$(E))}S.childRefs=N,S.mesh>=0&&(S.meshRef=this.meshes.get_za3lpa$(S.mesh)),S.skin>=0&&(S.skinRef=this.skins.get_za3lpa$(S.skin))}for(_=this.scenes.iterator();_.hasNext();){var P,T=_.next(),O=T.nodes,A=w(j(O,10));for(P=O.iterator();P.hasNext();){var R=P.next();A.add_11rb$(this.nodes.get_za3lpa$(R))}T.nodeRefs=A}for(m=this.skins.iterator();m.hasNext();){var I=m.next();I.inverseBindMatrices>=0&&(I.inverseBindMatrixAccessorRef=this.accessors.get_za3lpa$(I.inverseBindMatrices));var L,D=I.joints,q=w(j(D,10));for(L=D.iterator();L.hasNext();){var B=L.next();q.add_11rb$(this.nodes.get_za3lpa$(B))}I.jointRefs=q}for($=this.textures.iterator();$.hasNext();){var F=$.next();F.imageRef=this.images.get_za3lpa$(F.source)}},xb.$metadata$={kind:$,simpleName:"ModelGenerateConfig",interfaces:[]},wb.$metadata$={kind:$,simpleName:"ModelMaterialConfig",interfaces:[]},zb.prototype.makeModel_m76q01$=function(t){var e,i,n,r=new tf(null!=(e=t.name)?e:"model_scene");for(i=t.nodeRefs.iterator();i.hasNext();){var o=i.next();r.plusAssign_f1kmr1$(this.makeNode_0(o,r,this.cfg))}for(this.cfg.loadAnimations&&this.makeTrsAnimations_0(),this.cfg.loadAnimations&&this.makeSkins_0(r),n=this.modelNodes.entries.iterator();n.hasNext();){var s=n.next(),a=s.key,l=s.value;this.createMeshes_0(a,r,l,this.cfg)}this.cfg.loadAnimations&&this.makeMorphAnimations_0();var u,p,c=this.modelAnimations,h=M();for(u=c.iterator();u.hasNext();){var d=u.next();d.channels.isEmpty()||h.add_11rb$(d)}for(p=h.iterator();p.hasNext();){var f=p.next();f.prepareAnimation(),r.animations.add_11rb$(f)}return r.disableAllAnimations(),this.cfg.applyTransforms&&r.animations.isEmpty()&&this.applyTransforms_0(r),this.cfg.mergeMeshesByMaterial&&this.mergeMeshesByMaterial_0(r),this.cfg.sortNodesByAlpha&&this.sortNodesByAlpha_0(r),this.cfg.removeEmptyNodes&&this.removeEmpty_0(r),r},zb.prototype.removeEmpty_0=function(t){var i,n,r=t.children,o=M();for(i=r.iterator();i.hasNext();){var s=i.next();e.isType(s,Od)&&o.add_11rb$(s)}for(n=o.iterator();n.hasNext();){var a=n.next();this.removeEmpty_0(a),a.children.isEmpty()&&t.removeNode_f1kmr1$(a)}},zb.prototype.makeTrsAnimations_0=function(){var t;for(t=this.$outer.animations.iterator();t.hasNext();){var i=t.next(),n=new vm(i.name);this.modelAnimations.add_11rb$(n);var r,o=z();for(r=i.channels.iterator();r.hasNext();){var s,a=r.next(),l=this.modelNodes,u=a.target.nodeRef,p=(e.isType(s=l,$e)?s:c()).get_11rb$(u);if(null!=p){var h,d=o.get_11rb$(p);if(null==d){var f=new Sm(p);o.put_xwzc9p$(p,f),h=f}else h=d;var _=h;switch(a.target.path){case"translation":this.makeTranslationAnimation_0(a,_,n);break;case"rotation":this.makeRotationAnimation_0(a,_,n);break;case"scale":this.makeScaleAnimation_0(a,_,n)}}}}},zb.prototype.makeTranslationAnimation_0=function(t,i,n){var r,o,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(zt(a.type,Nv().TYPE_SCALAR)&&5126===a.componentType)if(zt(l.type,Nv().TYPE_VEC3)&&5126===l.componentType){var u=new bm(Ct(n.name)+"_translation",i);switch(t.samplerRef.interpolation){case"STEP":r=Rm();break;case"CUBICSPLINE":r=Dm();break;default:r=Mm()}var p=r;n.channels.add_11rb$(u);var c=new og(a),h=new ag(l),d=a.count,f=l.count;o=A.min(d,f);for(var _=0;_<o;_++){var m=c.next();if(p===Dm()){var $=h.nextD();s=new Um(m,h.nextD(),$,h.nextD())}else s=new Fm(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=qN.Log,g=vz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported translation animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var x=qN.Log,w=vz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported translation animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},zb.prototype.makeRotationAnimation_0=function(t,i,n){var r,o,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(zt(a.type,Nv().TYPE_SCALAR)&&5126===a.componentType)if(zt(l.type,Nv().TYPE_VEC4)&&5126===l.componentType){var u=new xm(Ct(n.name)+"_rotation",i);switch(t.samplerRef.interpolation){case"STEP":r=Rm();break;case"CUBICSPLINE":r=Dm();break;default:r=Mm()}var p=r;n.channels.add_11rb$(u);var c=new og(a),h=new lg(l),d=a.count,f=l.count;o=A.min(d,f);for(var _=0;_<o;_++){var m=c.next();if(p===Dm()){var $=h.nextD();s=new Bm(m,h.nextD(),$,h.nextD())}else s=new qm(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=qN.Log,g=vz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported rotation animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC4 and 5126 (float)")}else{var x=qN.Log,w=vz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported rotation animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},zb.prototype.makeScaleAnimation_0=function(t,i,n){var r,o,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(zt(a.type,Nv().TYPE_SCALAR)&&5126===a.componentType)if(zt(l.type,Nv().TYPE_VEC3)&&5126===l.componentType){var u=new wm(Ct(n.name)+"_scale",i);switch(t.samplerRef.interpolation){case"STEP":r=Rm();break;case"CUBICSPLINE":r=Dm();break;default:r=Mm()}var p=r;n.channels.add_11rb$(u);var c=new og(a),h=new ag(l),d=a.count,f=l.count;o=A.min(d,f);for(var _=0;_<o;_++){var m=c.next();if(p===Dm()){var $=h.nextD();s=new Gm(m,h.nextD(),$,h.nextD())}else s=new Vm(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=qN.Log,g=vz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported scale animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var x=qN.Log,w=vz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported scale animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},zb.prototype.makeMorphAnimations_0=function(){var t,i,n=0;for(t=this.$outer.animations.iterator();t.hasNext();){var r,o=t.next(),s=J((n=(i=n)+1|0,i));for(r=o.channels.iterator();r.hasNext();){var a,l,u,p=r.next();if(zt(p.target.path,wg().PATH_WEIGHTS)){var h,d,f,_=this.modelAnimations.get_za3lpa$(s),m=null!=(a=p.target.nodeRef)?a.meshRef:null,$=this.modelNodes,y=p.target.nodeRef,v=(e.isType(h=$,$e)?h:c()).get_11rb$(y);if(null!=(l=null!=v?v.children:null)){var g,b=M();for(g=l.iterator();g.hasNext();){var w=g.next();e.isType(w,Fd)&&b.add_11rb$(w)}d=b}else d=null;if(null!=(u=d))for(f=u.iterator();f.hasNext();){var z=f.next();this.makeWeightAnimation_0(x(m),p,new Cm(z),_)}}}}},zb.prototype.makeWeightAnimation_0=function(t,i,n,r){var o,s,a,l=i.samplerRef.inputAccessorRef,u=i.samplerRef.outputAccessorRef;if(zt(l.type,Nv().TYPE_SCALAR)&&5126===l.componentType)if(zt(u.type,Nv().TYPE_SCALAR)&&5126===u.componentType){var p=new zm(Ct(r.name)+"_weight",n);switch(i.samplerRef.interpolation){case"STEP":o=Rm();break;case"CUBICSPLINE":o=Dm();break;default:o=Mm()}var c=o;r.channels.add_11rb$(p);var h,d=t.primitives.get_za3lpa$(0).targets,f=0;for(h=t.primitives.get_za3lpa$(0).targets.iterator();h.hasNext();)f=f+h.next().size|0;var _=f,m=new og(l),$=new og(u),y=l.count,v=u.count;s=A.min(y,v);for(var g=0;g<s;g++){var b=m.next();if(c===Dm()){for(var x=new Float32Array(_),w=new Float32Array(_),z=new Float32Array(_),k=0,S=0;S!==d.size;++S){var C,N,E=$.next();C=d.get_za3lpa$(S).size;for(var P=0;P<C;P++)x[(N=k,k=N+1|0,N)]=E}k=0;for(var T=0;T!==d.size;++T){var O,M,j=$.next();O=d.get_za3lpa$(T).size;for(var R=0;R<O;R++)w[(M=k,k=M+1|0,M)]=j}k=0;for(var I=0;I!==d.size;++I){var L,D,q=$.next();L=d.get_za3lpa$(I).size;for(var B=0;B<L;B++)z[(D=k,k=D+1|0,D)]=q}a=new Wm(b,w,x,z)}else{for(var F=new Float32Array(_),U=0,V=0;V!==d.size;++V){var G,H,W=$.next();G=d.get_za3lpa$(V).size;for(var K=0;K<G;K++)F[(H=U,U=H+1|0,H)]=W}a=new Hm(b,F)}var X=a;X.interpolation=c,p.keys.put_xwzc9p$(b,X)}}else{var Y=qN.Log,Z=vz.WARN,J=e.getKClassFromExpression(this).simpleName;Z.level>=Y.level.level&&Y.printer(Z,J,"Unsupported weight animation output accessor: type = "+u.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var Q=qN.Log,tt=vz.WARN,et=e.getKClassFromExpression(this).simpleName;tt.level>=Q.level.level&&Q.printer(tt,et,"Unsupported weight animation input accessor: type = "+l.type+", component type = "+l.componentType+", should be SCALAR and 5126 (float)")}},zb.prototype.makeSkins_0=function(t){var e;for(e=this.$outer.skins.iterator();e.hasNext();){var i,n=e.next(),r=new r$,o=null!=(i=n.inverseBindMatrixAccessorRef)?new pg(i):null;if(null!=o){var s,a,l=z();for(s=n.jointRefs.iterator();s.hasNext();){var u=s.next(),p=new o$(x(this.modelNodes.get_11rb$(u)),o.next());r.nodes.add_11rb$(p),l.put_xwzc9p$(u,p)}for(a=n.jointRefs.iterator();a.hasNext();){var c,h=a.next(),d=l.get_11rb$(h);if(null!=d)for(c=h.childRefs.iterator();c.hasNext();){var f=c.next(),_=l.get_11rb$(f);null!=_&&d.addChild_j3a3b7$(_)}}t.skins.add_11rb$(r)}}},zb.prototype.sortNodesByAlpha_0=function(t){var i,n,r=z(),o=0;for(i=t.children.iterator();i.hasNext();){var s=i.next(),a=1;e.isType(s,Fd)&&!s.isOpaque?a=0:e.isType(s,Od)&&(a=this.sortNodesByAlpha_0(s));var l=a;r.put_xwzc9p$(s,l),o+=a}return t.sortChildrenBy_mq7kdd$((n=r,function(t){var e;return-(null!=(e=n.get_11rb$(t))?e:1)})),t.children.isEmpty()||(o/=t.children.size),o},zb.prototype.mergeMeshesByMaterial_0=function(t){this.mergeMeshesByMaterial_1(t)},zb.prototype.mergeMeshesByMaterial_1=function(t){var i,n,r,o=t.children,s=M();for(i=o.iterator();i.hasNext();){var a=i.next();e.isType(a,Od)&&s.add_11rb$(a)}for(n=s.iterator();n.hasNext();){var l=n.next();this.mergeMeshesByMaterial_1(l)}for(r=this.meshesByMaterial.values.iterator();r.hasNext();){var u,p,h=r.next(),d=t.children,f=M();for(p=d.iterator();p.hasNext();){var _=p.next();Oe(h,_)&&f.add_11rb$(_)}var m,$=w(j(f,10));for(m=f.iterator();m.hasNext();){var y,v=m.next();$.add_11rb$(e.isType(y=v,Fd)?y:c())}var g=$;if(g.size>1){var b=g.get_za3lpa$(0);u=g.size;for(var x=1;x<u;x++){var z=g.get_za3lpa$(x);zt(z.geometry.attributeHash,b.geometry.attributeHash)&&(b.geometry.addGeometry_r7nl2o$(z.geometry),t.removeNode_f1kmr1$(z))}}}},zb.prototype.applyTransforms_0=function(t){var e=new kn;e.setIdentity(),this.applyTransforms_1(t,e,t)},zb.prototype.applyTransforms_1=function(t,i,n){i.push(),i.mul_d4zu6l$(t.transform);var r,o,s=t.children,a=M();for(r=s.iterator();r.hasNext();){var l=r.next();e.isType(l,Fd)&&a.add_11rb$(l)}for(o=a.iterator();o.hasNext();){var u=o.next(),p=u.geometry,c=p.isBatchUpdate;p.isBatchUpdate=!0,kb(i)(p),p.hasChanged=!0,p.isBatchUpdate=c,p.rebuildBounds(),zt(n,t)||n.plusAssign_f1kmr1$(u)}var h,d,f=t.children,_=M();for(h=f.iterator();h.hasNext();){var m=h.next();e.isType(m,Od)&&_.add_11rb$(m)}for(d=_.iterator();d.hasNext();){var $=d.next();this.applyTransforms_1($,i,n),t.removeNode_f1kmr1$($)}i.pop()},zb.prototype.makeNode_0=function(t,e,i){var n,r,o=null!=(n=t.name)?n:"node_"+e.nodes.size,s=new Od(o);if(this.modelNodes.put_xwzc9p$(t,s),e.nodes.put_xwzc9p$(o,s),null!=t.matrix){var a,l=s.transform,u=t.matrix,p=w(j(u,10));for(a=u.iterator();a.hasNext();){var c=a.next();p.add_11rb$(c)}l.set_d3e2cz$(p)}else{if(null!=t.translation&&s.translate_y2kzbl$(t.translation.get_za3lpa$(0),t.translation.get_za3lpa$(1),t.translation.get_za3lpa$(2)),null!=t.rotation){var h=(new bn).setRotate_czzhi1$(new ro(t.rotation.get_za3lpa$(0),t.rotation.get_za3lpa$(1),t.rotation.get_za3lpa$(2),t.rotation.get_za3lpa$(3)));s.transform.mul_d4zu6l$(h)}null!=t.scale&&s.scale_y2kzbl$(t.scale.get_za3lpa$(0),t.scale.get_za3lpa$(1),t.scale.get_za3lpa$(2))}for(r=t.childRefs.iterator();r.hasNext();){var d=r.next();s.plusAssign_f1kmr1$(this.makeNode_0(d,e,i))}return s},zb.prototype.createMeshes_0=function(t,i,n,r){var o,s;if(null!=(s=null!=(o=t.meshRef)?o.primitives:null)){var a,l;this.$outer;var u=0;for(a=s.iterator();a.hasNext();){var p,c,h=a.next(),d=this.$outer,f=J((u=(l=u)+1|0,l)),_=(null!=(c=null!=(p=t.meshRef)?p.name:null)?c:Ct(n.name)+".mesh")+"_"+f,m=h.toGeometry_pfr3gu$(r.generateNormals,d.accessors);if(!m.isEmpty()){var $=new Fd(m,_);n.plusAssign_f1kmr1$($);var y,v=this.meshesByMaterial,g=h.material,b=v.get_11rb$(g);if(null==b){var w=ct();v.put_xwzc9p$(g,w),y=w}else y=b;y.add_11rb$($);var z=this.meshMaterials,k=h.materialRef;if(z.put_xwzc9p$($,k),r.loadAnimations&&r.applySkins&&t.skin>=0){$.skin=i.skins.get_za3lpa$(t.skin);var S=d.skins.get_za3lpa$(t.skin).skeleton;S>=0&&(n.minusAssign_f1kmr1$($),x(this.modelNodes.get_11rb$(d.nodes.get_za3lpa$(S))).plusAssign_f1kmr1$($)),$.isFrustumChecked=!1}var C=r.loadAnimations&&r.applyMorphTargets;if(C&&(C=!h.targets.isEmpty()),C){var N,E=Float32Array,P=0;for(N=h.targets.iterator();N.hasNext();)P=P+N.next().size|0;$.morphWeights=new E(P),$.isFrustumChecked=!1}if(r.applyMaterials){var T,O,M,j,A,R,I,L,D={v:r.materialConfig.isDeferredShading},q=h.attributes.containsKey_11rb$(lx().ATTRIBUTE_COLOR_0),B=new fc,F=h.materialRef;null!=F?F.applyTo_rmmby8$(B,q,d):(B.albedo=V$().GRAY,B.albedoSource=Qp()),null!=$.skin&&(B.isSkinned=!0),null!=$.morphWeights&&xt(B.morphAttributes,$.geometry.getMorphAttributes());var U,V=r.materialConfig;if(xt(B.shadowMaps,V.shadowMaps),null!=(U=V.scrSpcAmbientOcclusionMap)&&B.useScreenSpaceAmbientOcclusion_vv6xll$(U),B.useImageBasedLighting_po417x$(V.environmentMaps),null!=(T=r.pbrBlock)&&T(B,h),e.isType(B.alphaMode,nc)&&($.isOpaque=!1,D.v=!1),null!=(O=B.albedoMap)){var G,H;H=i.textures;var W=null!=(G=O.name)?G:"tex_"+i.textures.size;H.put_xwzc9p$(W,O)}if(null!=(M=B.emissiveMap)){var K,X;X=i.textures;var Y=null!=(K=M.name)?K:"tex_"+i.textures.size;X.put_xwzc9p$(Y,M)}if(null!=(j=B.normalMap)){var Z,Q;Q=i.textures;var tt=null!=(Z=j.name)?Z:"tex_"+i.textures.size;Q.put_xwzc9p$(tt,j)}if(null!=(A=B.roughnessMap)){var et,it;it=i.textures;var nt=null!=(et=A.name)?et:"tex_"+i.textures.size;it.put_xwzc9p$(nt,A)}if(null!=(R=B.metallicMap)){var rt,ot;ot=i.textures;var st=null!=(rt=R.name)?rt:"tex_"+i.textures.size;ot.put_xwzc9p$(st,R)}if(null!=(I=B.occlusionMap)){var at,lt;lt=i.textures;var ut=null!=(at=I.name)?at:"tex_"+i.textures.size;lt.put_xwzc9p$(ut,I)}if(null!=(L=B.displacementMap)){var pt,ht;ht=i.textures;var dt=null!=(pt=L.name)?pt:"tex_"+i.textures.size;ht.put_xwzc9p$(dt,L)}var ft=B;D.v?(ft.isHdrOutput=!0,$.shader=new Ty(ft)):(ft.isHdrOutput=!1,$.shader=new _c(ft))}i.meshes.put_xwzc9p$(_,$)}}}},zb.$metadata$={kind:$,simpleName:"ModelGenerator",interfaces:[]},Sb.prototype.fromJson_61zpoe$=function(t){var i,n=Me(void 0,Cb);return n.decodeFromString_awif5v$(e.isType(i=je(n.serializersModule,Te(Pe(bb),[],!1)),Ae)?i:c(),t)},Sb.prototype.serializer=function(){return Ob()},Sb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Nb=null;function Eb(){return null===Nb&&new Sb,Nb}function Pb(){this.descriptor_sl1tf8$_0=new ge("de.fabmax.kool.util.gltf.GltfFile",this,15),this.descriptor.addElement_ivxn3r$("extensionsUsed",!0),this.descriptor.addElement_ivxn3r$("extensionsRequired",!0),this.descriptor.addElement_ivxn3r$("accessors",!0),this.descriptor.addElement_ivxn3r$("animations",!0),this.descriptor.addElement_ivxn3r$("asset",!1),this.descriptor.addElement_ivxn3r$("buffers",!0),this.descriptor.addElement_ivxn3r$("bufferViews",!0),this.descriptor.addElement_ivxn3r$("images",!0),this.descriptor.addElement_ivxn3r$("materials",!0),this.descriptor.addElement_ivxn3r$("meshes",!0),this.descriptor.addElement_ivxn3r$("nodes",!0),this.descriptor.addElement_ivxn3r$("scene",!0),this.descriptor.addElement_ivxn3r$("scenes",!0),this.descriptor.addElement_ivxn3r$("skins",!0),this.descriptor.addElement_ivxn3r$("textures",!0),Tb=this}Object.defineProperty(Pb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_sl1tf8$_0}}),Pb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.extensionsUsed,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(xe.StringSerializer),e.extensionsUsed),zt(e.extensionsRequired,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new ke(xe.StringSerializer),e.extensionsRequired),zt(e.accessors,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeSerializableElement_r4qlx7$(this.descriptor,2,new ke(eg()),e.accessors),zt(e.animations,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeSerializableElement_r4qlx7$(this.descriptor,3,new ke(Bg()),e.animations),i.encodeSerializableElement_r4qlx7$(this.descriptor,4,Xg(),e.asset),zt(e.buffers,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeSerializableElement_r4qlx7$(this.descriptor,5,new ke(cb()),e.buffers),zt(e.bufferViews,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeSerializableElement_r4qlx7$(this.descriptor,6,new ke(vb()),e.bufferViews),zt(e.images,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeSerializableElement_r4qlx7$(this.descriptor,7,new ke(qb()),e.images),zt(e.materials,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeSerializableElement_r4qlx7$(this.descriptor,8,new ke(ix()),e.materials),zt(e.meshes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeSerializableElement_r4qlx7$(this.descriptor,9,new ke(yx()),e.meshes),zt(e.nodes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,10)||i.encodeSerializableElement_r4qlx7$(this.descriptor,10,new ke(Sx()),e.nodes),zt(e.scene,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,11)||i.encodeIntElement_ptg7oe$(this.descriptor,11,e.scene),zt(e.scenes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,12)||i.encodeSerializableElement_r4qlx7$(this.descriptor,12,new ke(jx()),e.scenes),zt(e.skins,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,13)||i.encodeSerializableElement_r4qlx7$(this.descriptor,13,new ke(Fx()),e.skins),zt(e.textures,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,14)||i.encodeSerializableElement_r4qlx7$(this.descriptor,14,new ke(Zx()),e.textures),i.endStructure_24f42q$(this.descriptor)},Pb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,$=0,y=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=y.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=y.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(xe.StringSerializer),i),$|=1;break;case 1:n=y.decodeSerializableElement_12e8id$(this.descriptor,1,new ke(xe.StringSerializer),n),$|=2;break;case 2:r=y.decodeSerializableElement_12e8id$(this.descriptor,2,new ke(eg()),r),$|=4;break;case 3:o=y.decodeSerializableElement_12e8id$(this.descriptor,3,new ke(Bg()),o),$|=8;break;case 4:s=y.decodeSerializableElement_12e8id$(this.descriptor,4,Xg(),s),$|=16;break;case 5:a=y.decodeSerializableElement_12e8id$(this.descriptor,5,new ke(cb()),a),$|=32;break;case 6:l=y.decodeSerializableElement_12e8id$(this.descriptor,6,new ke(vb()),l),$|=64;break;case 7:u=y.decodeSerializableElement_12e8id$(this.descriptor,7,new ke(qb()),u),$|=128;break;case 8:p=y.decodeSerializableElement_12e8id$(this.descriptor,8,new ke(ix()),p),$|=256;break;case 9:c=y.decodeSerializableElement_12e8id$(this.descriptor,9,new ke(yx()),c),$|=512;break;case 10:h=y.decodeSerializableElement_12e8id$(this.descriptor,10,new ke(Sx()),h),$|=1024;break;case 11:d=y.decodeIntElement_szpzho$(this.descriptor,11),$|=2048;break;case 12:f=y.decodeSerializableElement_12e8id$(this.descriptor,12,new ke(jx()),f),$|=4096;break;case 13:_=y.decodeSerializableElement_12e8id$(this.descriptor,13,new ke(Fx()),_),$|=8192;break;case 14:m=y.decodeSerializableElement_12e8id$(this.descriptor,14,new ke(Zx()),m),$|=16384;break;case-1:break t;default:throw new be(e)}return y.endStructure_24f42q$(this.descriptor),Mb($,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,null)},Pb.prototype.childSerializers=function(){return[new ke(xe.StringSerializer),new ke(xe.StringSerializer),new ke(eg()),new ke(Bg()),Xg(),new ke(cb()),new ke(vb()),new ke(qb()),new ke(ix()),new ke(yx()),new ke(Sx()),xe.IntSerializer,new ke(jx()),new ke(Fx()),new ke(Zx())]},Pb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Tb=null;function Ob(){return null===Tb&&new Pb,Tb}function Mb(t,e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m){var $=m||Object.create(bb.prototype);if($.extensionsUsed=0==(1&t)?Nt():e,$.extensionsRequired=0==(2&t)?Nt():i,$.accessors=0==(4&t)?Nt():n,$.animations=0==(8&t)?Nt():r,0==(16&t))throw new ze("asset");return $.asset=o,$.buffers=0==(32&t)?Nt():s,$.bufferViews=0==(64&t)?Nt():a,$.images=0==(128&t)?Nt():l,$.materials=0==(256&t)?Nt():u,$.meshes=0==(512&t)?Nt():p,$.nodes=0==(1024&t)?Nt():c,$.scene=0==(2048&t)?0:h,$.scenes=0==(4096&t)?Nt():d,$.skins=0==(8192&t)?Nt():f,$.textures=0==(16384&t)?Nt():_,$}function jb(t,e,i,n){Ib(),void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=-1),void 0===n&&(n=null),this.uri=t,this.mimeType=e,this.bufferView=i,this.name=n,this.bufferViewRef=null}function Ab(){Rb=this}bb.$metadata$={kind:$,simpleName:"GltfFile",interfaces:[]},bb.prototype.component1=function(){return this.extensionsUsed},bb.prototype.component2=function(){return this.extensionsRequired},bb.prototype.component3=function(){return this.accessors},bb.prototype.component4=function(){return this.animations},bb.prototype.component5=function(){return this.asset},bb.prototype.component6=function(){return this.buffers},bb.prototype.component7=function(){return this.bufferViews},bb.prototype.component8=function(){return this.images},bb.prototype.component9=function(){return this.materials},bb.prototype.component10=function(){return this.meshes},bb.prototype.component11=function(){return this.nodes},bb.prototype.component12=function(){return this.scene},bb.prototype.component13=function(){return this.scenes},bb.prototype.component14=function(){return this.skins},bb.prototype.component15=function(){return this.textures},bb.prototype.copy_2qvmcu$=function(t,e,i,n,r,o,s,a,l,u,p,c,h,d,f){return new bb(void 0===t?this.extensionsUsed:t,void 0===e?this.extensionsRequired:e,void 0===i?this.accessors:i,void 0===n?this.animations:n,void 0===r?this.asset:r,void 0===o?this.buffers:o,void 0===s?this.bufferViews:s,void 0===a?this.images:a,void 0===l?this.materials:l,void 0===u?this.meshes:u,void 0===p?this.nodes:p,void 0===c?this.scene:c,void 0===h?this.scenes:h,void 0===d?this.skins:d,void 0===f?this.textures:f)},bb.prototype.toString=function(){return"GltfFile(extensionsUsed="+e.toString(this.extensionsUsed)+", extensionsRequired="+e.toString(this.extensionsRequired)+", accessors="+e.toString(this.accessors)+", animations="+e.toString(this.animations)+", asset="+e.toString(this.asset)+", buffers="+e.toString(this.buffers)+", bufferViews="+e.toString(this.bufferViews)+", images="+e.toString(this.images)+", materials="+e.toString(this.materials)+", meshes="+e.toString(this.meshes)+", nodes="+e.toString(this.nodes)+", scene="+e.toString(this.scene)+", scenes="+e.toString(this.scenes)+", skins="+e.toString(this.skins)+", textures="+e.toString(this.textures)+")"},bb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.extensionsUsed)|0)+e.hashCode(this.extensionsRequired)|0)+e.hashCode(this.accessors)|0)+e.hashCode(this.animations)|0)+e.hashCode(this.asset)|0)+e.hashCode(this.buffers)|0)+e.hashCode(this.bufferViews)|0)+e.hashCode(this.images)|0)+e.hashCode(this.materials)|0)+e.hashCode(this.meshes)|0)+e.hashCode(this.nodes)|0)+e.hashCode(this.scene)|0)+e.hashCode(this.scenes)|0)+e.hashCode(this.skins)|0)+e.hashCode(this.textures)|0},bb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.extensionsUsed,t.extensionsUsed)&&e.equals(this.extensionsRequired,t.extensionsRequired)&&e.equals(this.accessors,t.accessors)&&e.equals(this.animations,t.animations)&&e.equals(this.asset,t.asset)&&e.equals(this.buffers,t.buffers)&&e.equals(this.bufferViews,t.bufferViews)&&e.equals(this.images,t.images)&&e.equals(this.materials,t.materials)&&e.equals(this.meshes,t.meshes)&&e.equals(this.nodes,t.nodes)&&e.equals(this.scene,t.scene)&&e.equals(this.scenes,t.scenes)&&e.equals(this.skins,t.skins)&&e.equals(this.textures,t.textures)},Ab.prototype.serializer=function(){return qb()},Ab.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Rb=null;function Ib(){return null===Rb&&new Ab,Rb}function Lb(){this.descriptor_bk6hkl$_0=new ge("de.fabmax.kool.util.gltf.GltfImage",this,4),this.descriptor.addElement_ivxn3r$("uri",!0),this.descriptor.addElement_ivxn3r$("mimeType",!0),this.descriptor.addElement_ivxn3r$("bufferView",!0),this.descriptor.addElement_ivxn3r$("name",!0),Db=this}Object.defineProperty(Lb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_bk6hkl$_0}}),Lb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.uri,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.uri),zt(e.mimeType,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,xe.StringSerializer,e.mimeType),zt(e.bufferView,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.bufferView),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Lb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),s|=1;break;case 1:n=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,xe.StringSerializer,n),s|=2;break;case 2:r=a.decodeIntElement_szpzho$(this.descriptor,2),s|=4;break;case 3:o=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,xe.StringSerializer,o),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),Bb(s,i,n,r,o,null)},Lb.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),new ye(xe.StringSerializer),xe.IntSerializer,new ye(xe.StringSerializer)]},Lb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Db=null;function qb(){return null===Db&&new Lb,Db}function Bb(t,e,i,n,r,o){var s=o||Object.create(jb.prototype);return s.uri=0==(1&t)?null:e,s.mimeType=0==(2&t)?null:i,s.bufferView=0==(4&t)?-1:n,s.name=0==(8&t)?null:r,s.bufferViewRef=null,s}function Fb(t,e,i,n,r,o,s,a,l){Qb(),void 0===t&&(t=null),void 0===e&&(e=new Ub(At([.5,.5,.5,1]))),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=Qb().ALPHA_MODE_OPAQUE),void 0===a&&(a=.5),void 0===l&&(l=!1),this.name=t,this.pbrMetallicRoughness=e,this.normalTexture=i,this.occlusionTexture=n,this.emissiveTexture=r,this.emissiveFactor=o,this.alphaMode=s,this.alphaCutoff=a,this.doubleSided=l}function Ub(t,e,i,n,r){Hb(),void 0===t&&(t=At([1,1,1,1])),void 0===e&&(e=null),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=null),this.baseColorFactor=t,this.baseColorTexture=e,this.metallicFactor=i,this.roughnessFactor=n,this.metallicRoughnessTexture=r}function Vb(){Gb=this}jb.$metadata$={kind:$,simpleName:"GltfImage",interfaces:[]},jb.prototype.component1=function(){return this.uri},jb.prototype.component2=function(){return this.mimeType},jb.prototype.component3=function(){return this.bufferView},jb.prototype.component4=function(){return this.name},jb.prototype.copy_82a7yt$=function(t,e,i,n){return new jb(void 0===t?this.uri:t,void 0===e?this.mimeType:e,void 0===i?this.bufferView:i,void 0===n?this.name:n)},jb.prototype.toString=function(){return"GltfImage(uri="+e.toString(this.uri)+", mimeType="+e.toString(this.mimeType)+", bufferView="+e.toString(this.bufferView)+", name="+e.toString(this.name)+")"},jb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.uri)|0)+e.hashCode(this.mimeType)|0)+e.hashCode(this.bufferView)|0)+e.hashCode(this.name)|0},jb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.uri,t.uri)&&e.equals(this.mimeType,t.mimeType)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.name,t.name)},Fb.prototype.applyTo_rmmby8$=function(t,e,i){var n,r,o,s,a,l,u,p,c,h,d,f,_=null!=(n=this.pbrMetallicRoughness.baseColorTexture)?n.getTexture_vd9sc9$(i):null,m=null!=(r=this.emissiveTexture)?r.getTexture_vd9sc9$(i):null,$=null!=(o=this.normalTexture)?o.getTexture_vd9sc9$(i):null,y=null!=(s=this.pbrMetallicRoughness.metallicRoughnessTexture)?s.getTexture_vd9sc9$(i):null,v=null!=(a=this.pbrMetallicRoughness.metallicRoughnessTexture)?a.getTexture_vd9sc9$(i):null,g=null!=(l=this.occlusionTexture)?l.getTexture_vd9sc9$(i):null,b=this.pbrMetallicRoughness.baseColorFactor;switch(this.alphaMode){case"BLEND":u=new nc;break;case"MASK":u=new oc(this.alphaCutoff);break;default:u=new rc}t.alphaMode=u,p=this.doubleSided?zl():xl(),t.cullMethod=p,c=4===b.size?new B$(b.get_za3lpa$(0),b.get_za3lpa$(1),b.get_za3lpa$(2),b.get_za3lpa$(3)):V$().WHITE,t.albedo=c,e?t.albedoSource=ec():null!=_?(t.albedoSource=tc(),t.albedoMap=_,null!=(h=t.albedo)&&h.equals(V$().WHITE)||(t.isMultiplyAlbedoMap=!0)):t.albedoSource=Qp(),null!=m&&(t.isEmissiveMapped=!0,t.emissiveMap=m,null!=this.emissiveFactor&&(t.isMultiplyEmissiveMap=!0)),null!=this.emissiveFactor&&(t.emissive=new B$(this.emissiveFactor.get_za3lpa$(0),this.emissiveFactor.get_za3lpa$(1),this.emissiveFactor.get_za3lpa$(2),1)),null!=$?(t.isNormalMapped=!0,t.normalMap=$):t.isNormalMapped=!1,t.roughness=this.pbrMetallicRoughness.roughnessFactor,null!=v?(t.isRoughnessMapped=!0,t.roughnessMap=v,1!==this.pbrMetallicRoughness.roughnessFactor&&(t.isMultiplyRoughnessMap=!0)):t.isRoughnessMapped=!1,t.metallic=this.pbrMetallicRoughness.metallicFactor,null!=y?(t.isMetallicMapped=!0,t.metallicMap=y,1!==this.pbrMetallicRoughness.metallicFactor&&(t.isMultiplyMetallicMap=!0)):t.isMetallicMapped=!1,null!=g?(t.isOcclusionMapped=!0,t.occlusionMap=g,t.occlusionStrength=null!=(f=null!=(d=this.occlusionTexture)?d.strength:null)?f:1):t.isOcclusionMapped=!1,t.isRoughnessMapped&&(v!==y&&v!==g?(t.roughnessChannel="r",t.roughnessTexName="tRoughness"):(t.roughnessChannel="g",t.roughnessTexName=v===y&&v===g?"tOcclRoughMetal":v===y?"tRoughMetal":"tOcclRough")),t.isMetallicMapped&&(y!==v&&y!==g?(t.metallicChannel="r",t.metallicTexName="tMetallic"):(t.metallicChannel="b",y===v&&y===g?t.metallicTexName="tOcclRoughMetal":y===v?t.metallicTexName="tRoughMetal":t.roughnessTexName="tOcclMetal")),t.isOcclusionMapped&&(g!==v&&g!==y?(t.occlusionChannel="r",t.occlusionTexName="tOcclusion"):(t.occlusionChannel="r",g===v&&g===y?t.occlusionTexName="tOcclRoughMetal":t.roughnessTexName=g===v?"tOcclRough":"tOcclMetal"))},Vb.prototype.serializer=function(){return Xb()},Vb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gb=null;function Hb(){return null===Gb&&new Vb,Gb}function Wb(){this.descriptor_2b7y8e$_0=new ge("de.fabmax.kool.util.gltf.GltfMaterial.PbrMetallicRoughness",this,5),this.descriptor.addElement_ivxn3r$("baseColorFactor",!0),this.descriptor.addElement_ivxn3r$("baseColorTexture",!0),this.descriptor.addElement_ivxn3r$("metallicFactor",!0),this.descriptor.addElement_ivxn3r$("roughnessFactor",!0),this.descriptor.addElement_ivxn3r$("metallicRoughnessTexture",!0),Kb=this}Object.defineProperty(Wb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_2b7y8e$_0}}),Wb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.baseColorFactor,At([1,1,1,1]))&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(xe.FloatSerializer),e.baseColorFactor),zt(e.baseColorTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,ow(),e.baseColorTexture),zt(e.metallicFactor,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeFloatElement_lf6hpt$(this.descriptor,2,e.metallicFactor),zt(e.roughnessFactor,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeFloatElement_lf6hpt$(this.descriptor,3,e.roughnessFactor),zt(e.metallicRoughnessTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,4,ow(),e.metallicRoughnessTexture),i.endStructure_24f42q$(this.descriptor)},Wb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a=0,l=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=l.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=l.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(xe.FloatSerializer),i),a|=1;break;case 1:n=l.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,ow(),n),a|=2;break;case 2:r=l.decodeFloatElement_szpzho$(this.descriptor,2),a|=4;break;case 3:o=l.decodeFloatElement_szpzho$(this.descriptor,3),a|=8;break;case 4:s=l.decodeNullableSerializableElement_8viuyw$(this.descriptor,4,ow(),s),a|=16;break;case-1:break t;default:throw new be(e)}return l.endStructure_24f42q$(this.descriptor),Yb(a,i,n,r,o,s,null)},Wb.prototype.childSerializers=function(){return[new ke(xe.FloatSerializer),new ye(ow()),xe.FloatSerializer,xe.FloatSerializer,new ye(ow())]},Wb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Kb=null;function Xb(){return null===Kb&&new Wb,Kb}function Yb(t,e,i,n,r,o,s){var a=s||Object.create(Ub.prototype);return a.baseColorFactor=0==(1&t)?At([1,1,1,1]):e,a.baseColorTexture=0==(2&t)?null:i,a.metallicFactor=0==(4&t)?1:n,a.roughnessFactor=0==(8&t)?1:r,a.metallicRoughnessTexture=0==(16&t)?null:o,a}function Zb(){Jb=this,this.ALPHA_MODE_BLEND="BLEND",this.ALPHA_MODE_MASK="MASK",this.ALPHA_MODE_OPAQUE="OPAQUE"}Ub.$metadata$={kind:$,simpleName:"PbrMetallicRoughness",interfaces:[]},Ub.prototype.component1=function(){return this.baseColorFactor},Ub.prototype.component2=function(){return this.baseColorTexture},Ub.prototype.component3=function(){return this.metallicFactor},Ub.prototype.component4=function(){return this.roughnessFactor},Ub.prototype.component5=function(){return this.metallicRoughnessTexture},Ub.prototype.copy_x3y116$=function(t,e,i,n,r){return new Ub(void 0===t?this.baseColorFactor:t,void 0===e?this.baseColorTexture:e,void 0===i?this.metallicFactor:i,void 0===n?this.roughnessFactor:n,void 0===r?this.metallicRoughnessTexture:r)},Ub.prototype.toString=function(){return"PbrMetallicRoughness(baseColorFactor="+e.toString(this.baseColorFactor)+", baseColorTexture="+e.toString(this.baseColorTexture)+", metallicFactor="+e.toString(this.metallicFactor)+", roughnessFactor="+e.toString(this.roughnessFactor)+", metallicRoughnessTexture="+e.toString(this.metallicRoughnessTexture)+")"},Ub.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.baseColorFactor)|0)+e.hashCode(this.baseColorTexture)|0)+e.hashCode(this.metallicFactor)|0)+e.hashCode(this.roughnessFactor)|0)+e.hashCode(this.metallicRoughnessTexture)|0},Ub.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.baseColorFactor,t.baseColorFactor)&&e.equals(this.baseColorTexture,t.baseColorTexture)&&e.equals(this.metallicFactor,t.metallicFactor)&&e.equals(this.roughnessFactor,t.roughnessFactor)&&e.equals(this.metallicRoughnessTexture,t.metallicRoughnessTexture)},Zb.prototype.serializer=function(){return ix()},Zb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jb=null;function Qb(){return null===Jb&&new Zb,Jb}function tx(){this.descriptor_esy7m1$_0=new ge("de.fabmax.kool.util.gltf.GltfMaterial",this,9),this.descriptor.addElement_ivxn3r$("name",!0),this.descriptor.addElement_ivxn3r$("pbrMetallicRoughness",!0),this.descriptor.addElement_ivxn3r$("normalTexture",!0),this.descriptor.addElement_ivxn3r$("occlusionTexture",!0),this.descriptor.addElement_ivxn3r$("emissiveTexture",!0),this.descriptor.addElement_ivxn3r$("emissiveFactor",!0),this.descriptor.addElement_ivxn3r$("alphaMode",!0),this.descriptor.addElement_ivxn3r$("alphaCutoff",!0),this.descriptor.addElement_ivxn3r$("doubleSided",!0),ex=this}Object.defineProperty(tx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_esy7m1$_0}}),tx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.name),zt(e.pbrMetallicRoughness,new Ub(At([.5,.5,.5,1])))&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,Xb(),e.pbrMetallicRoughness),zt(e.normalTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,ow(),e.normalTexture),zt(e.occlusionTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,ow(),e.occlusionTexture),zt(e.emissiveTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,4,ow(),e.emissiveTexture),zt(e.emissiveFactor,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,new ke(xe.FloatSerializer),e.emissiveFactor),zt(e.alphaMode,Qb().ALPHA_MODE_OPAQUE)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeStringElement_iij8qq$(this.descriptor,6,e.alphaMode),zt(e.alphaCutoff,.5)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeFloatElement_lf6hpt$(this.descriptor,7,e.alphaCutoff),zt(e.doubleSided,!1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeBooleanElement_qh7jdn$(this.descriptor,8,e.doubleSided),i.endStructure_24f42q$(this.descriptor)},tx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c=0,h=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=h.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),c|=1;break;case 1:n=h.decodeSerializableElement_12e8id$(this.descriptor,1,Xb(),n),c|=2;break;case 2:r=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,ow(),r),c|=4;break;case 3:o=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,ow(),o),c|=8;break;case 4:s=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,4,ow(),s),c|=16;break;case 5:a=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,new ke(xe.FloatSerializer),a),c|=32;break;case 6:l=h.decodeStringElement_szpzho$(this.descriptor,6),c|=64;break;case 7:u=h.decodeFloatElement_szpzho$(this.descriptor,7),c|=128;break;case 8:p=h.decodeBooleanElement_szpzho$(this.descriptor,8),c|=256;break;case-1:break t;default:throw new be(e)}return h.endStructure_24f42q$(this.descriptor),nx(c,i,n,r,o,s,a,l,u,p,null)},tx.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),Xb(),new ye(ow()),new ye(ow()),new ye(ow()),new ye(new ke(xe.FloatSerializer)),xe.StringSerializer,xe.FloatSerializer,xe.BooleanSerializer]},tx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var ex=null;function ix(){return null===ex&&new tx,ex}function nx(t,e,i,n,r,o,s,a,l,u,p){var c=p||Object.create(Fb.prototype);return c.name=0==(1&t)?null:e,c.pbrMetallicRoughness=0==(2&t)?new Ub(At([.5,.5,.5,1])):i,c.normalTexture=0==(4&t)?null:n,c.occlusionTexture=0==(8&t)?null:r,c.emissiveTexture=0==(16&t)?null:o,c.emissiveFactor=0==(32&t)?null:s,c.alphaMode=0==(64&t)?Qb().ALPHA_MODE_OPAQUE:a,c.alphaCutoff=0==(128&t)?.5:l,c.doubleSided=0!=(256&t)&&u,c}function rx(t,e,i){_x(),void 0===e&&(e=null),void 0===i&&(i=null),this.primitives=t,this.weights=e,this.name=i}function ox(t,e,i,n,r){lx(),void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===n&&(n=4),void 0===r&&(r=Nt()),this.attributes=t,this.indices=e,this.material=i,this.mode=n,this.targets=r,this.materialRef=null}function sx(){ax=this,this.MODE_POINTS=0,this.MODE_LINES=1,this.MODE_LINE_LOOP=2,this.MODE_LINE_STRIP=3,this.MODE_TRIANGLES=4,this.MODE_TRIANGLE_STRIP=5,this.MODE_TRIANGLE_FAN=6,this.MODE_QUADS=7,this.MODE_QUAD_STRIP=8,this.MODE_POLYGON=9,this.ATTRIBUTE_POSITION="POSITION",this.ATTRIBUTE_NORMAL="NORMAL",this.ATTRIBUTE_TANGENT="TANGENT",this.ATTRIBUTE_TEXCOORD_0="TEXCOORD_0",this.ATTRIBUTE_TEXCOORD_1="TEXCOORD_1",this.ATTRIBUTE_COLOR_0="COLOR_0",this.ATTRIBUTE_JOINTS_0="JOINTS_0",this.ATTRIBUTE_WEIGHTS_0="WEIGHTS_0"}Fb.$metadata$={kind:$,simpleName:"GltfMaterial",interfaces:[]},Fb.prototype.component1=function(){return this.name},Fb.prototype.component2=function(){return this.pbrMetallicRoughness},Fb.prototype.component3=function(){return this.normalTexture},Fb.prototype.component4=function(){return this.occlusionTexture},Fb.prototype.component5=function(){return this.emissiveTexture},Fb.prototype.component6=function(){return this.emissiveFactor},Fb.prototype.component7=function(){return this.alphaMode},Fb.prototype.component8=function(){return this.alphaCutoff},Fb.prototype.component9=function(){return this.doubleSided},Fb.prototype.copy_rgcvd8$=function(t,e,i,n,r,o,s,a,l){return new Fb(void 0===t?this.name:t,void 0===e?this.pbrMetallicRoughness:e,void 0===i?this.normalTexture:i,void 0===n?this.occlusionTexture:n,void 0===r?this.emissiveTexture:r,void 0===o?this.emissiveFactor:o,void 0===s?this.alphaMode:s,void 0===a?this.alphaCutoff:a,void 0===l?this.doubleSided:l)},Fb.prototype.toString=function(){return"GltfMaterial(name="+e.toString(this.name)+", pbrMetallicRoughness="+e.toString(this.pbrMetallicRoughness)+", normalTexture="+e.toString(this.normalTexture)+", occlusionTexture="+e.toString(this.occlusionTexture)+", emissiveTexture="+e.toString(this.emissiveTexture)+", emissiveFactor="+e.toString(this.emissiveFactor)+", alphaMode="+e.toString(this.alphaMode)+", alphaCutoff="+e.toString(this.alphaCutoff)+", doubleSided="+e.toString(this.doubleSided)+")"},Fb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.pbrMetallicRoughness)|0)+e.hashCode(this.normalTexture)|0)+e.hashCode(this.occlusionTexture)|0)+e.hashCode(this.emissiveTexture)|0)+e.hashCode(this.emissiveFactor)|0)+e.hashCode(this.alphaMode)|0)+e.hashCode(this.alphaCutoff)|0)+e.hashCode(this.doubleSided)|0},Fb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.pbrMetallicRoughness,t.pbrMetallicRoughness)&&e.equals(this.normalTexture,t.normalTexture)&&e.equals(this.occlusionTexture,t.occlusionTexture)&&e.equals(this.emissiveTexture,t.emissiveTexture)&&e.equals(this.emissiveFactor,t.emissiveFactor)&&e.equals(this.alphaMode,t.alphaMode)&&e.equals(this.alphaCutoff,t.alphaCutoff)&&e.equals(this.doubleSided,t.doubleSided)},ox.prototype.toGeometry_pfr3gu$=function(t,i){var n,r,o,s,a,l,u,p,c,h,d,f=this.indices>=0?i.get_za3lpa$(this.indices):null,_=null!=(n=this.attributes.get_11rb$(lx().ATTRIBUTE_POSITION))?i.get_za3lpa$(n):null,m=null!=(r=this.attributes.get_11rb$(lx().ATTRIBUTE_NORMAL))?i.get_za3lpa$(r):null,$=null!=(o=this.attributes.get_11rb$(lx().ATTRIBUTE_TANGENT))?i.get_za3lpa$(o):null,y=null!=(s=this.attributes.get_11rb$(lx().ATTRIBUTE_TEXCOORD_0))?i.get_za3lpa$(s):null,v=null!=(a=this.attributes.get_11rb$(lx().ATTRIBUTE_COLOR_0))?i.get_za3lpa$(a):null,g=null!=(l=this.attributes.get_11rb$(lx().ATTRIBUTE_JOINTS_0))?i.get_za3lpa$(l):null,b=null!=(u=this.attributes.get_11rb$(lx().ATTRIBUTE_WEIGHTS_0))?i.get_za3lpa$(u):null;if(this.attributes.containsKey_11rb$(lx().ATTRIBUTE_TEXCOORD_1)){var x=qN.Log,w=vz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Second set of UVs is not yet supported and therefore ignored")}if(null==_){var k=qN.Log,S=vz.WARN,C=e.getKClassFromExpression(this).simpleName;return S.level>=k.level.level&&k.printer(S,C,"MeshPrimitive without position attribute"),Yw([])}var N=!1,E=M(),P=ds().POSITIONS;E.add_11rb$(P);var T=ds().NORMALS;if(E.add_11rb$(T),null!=v){var O=ds().COLORS;E.add_11rb$(O)}if(null!=y){var j=ds().TEXTURE_COORDS;E.add_11rb$(j)}if(null!=$){var A=ds().TANGENTS;E.add_11rb$(A)}else if(null!=(null!=(p=this.materialRef)?p.normalTexture:null)){var R=ds().TANGENTS;E.add_11rb$(R),N=!0}if(null!=g){var I=ds().JOINTS;E.add_11rb$(I)}if(null!=b){var L=ds().WEIGHTS;E.add_11rb$(L)}var D=this.makeMorphTargetAccessors_0(i);xt(E,D.keys);var q=new Bw(E),B=new ag(_),F=null!=m?new ag(m):null,U=null!=$?new lg($):null,V=null!=y?new sg(y):null,G=null!=v?new lg(v):null,H=null!=g?new ug(g):null,W=null!=b?new lg(b):null;c=_.count;for(var K=0;K<c;K++){var X,Y,Z;q.checkBufferSizes_za3lpa$(),X=q.vertexSizeF;for(var J=1;J<=X;J++)q.dataF.plusAssign_mx4ult$(0);Y=q.vertexSizeI;for(var Q=1;Q<=Y;Q++)q.dataI.plusAssign_za3lpa$(0);q.vertexIt.index=(Z=q.numVertices,q.numVertices=Z+1|0,Z);var tt,et,it=q.vertexIt;for(B.next_5s4mqq$(it.position),null!=F&&F.next_5s4mqq$(it.normal),null!=U&&U.next_5s4mpv$(it.tangent),null!=V&&V.next_5s4mrl$(it.texCoord),null!=(tt=null!=G?G.next():null)&&it.color.set_czzhhz$(tt),null!=H&&H.next_5s4mps$(it.joints),null!=W&&W.next_5s4mpv$(it.weights),et=D.entries.iterator();et.hasNext();){var nt,rt=et.next(),ot=rt.key,st=rt.value;null!=(nt=it.getVec3fAttribute_nm2vx5$(ot))&&st.next_5s4mqq$(nt)}q.bounds.add_czzhiu$(q.vertexIt.position),q.hasChanged=!0,q.numVertices}if(null!=f){var at=new rg(f);h=f.count;for(var lt=0;lt<h;lt++)q.addIndex_za3lpa$(at.next())}else{d=_.count;for(var ut=0;ut<d;ut++)q.addIndex_za3lpa$(ut)}return N&&q.generateTangents_mx4ult$(),(t||null==m)&&q.generateNormals(),q},ox.prototype.makeMorphTargetAccessors_0=function(t){var e,i,n=z(),r=0;for(e=this.targets.iterator();e.hasNext();){var o,s,a,l=e.next(),u="_"+(J((r=(i=r)+1|0,i))+1|0);if(null!=(o=l.get_11rb$(lx().ATTRIBUTE_NORMAL))){var p=new ps(ds().NORMALS.name+u,es()),c=new ag(t.get_za3lpa$(o));n.put_xwzc9p$(p,c)}if(null!=(s=l.get_11rb$(lx().ATTRIBUTE_POSITION))){var h=new ps(ds().POSITIONS.name+u,es()),d=new ag(t.get_za3lpa$(s));n.put_xwzc9p$(h,d)}if(null!=(a=l.get_11rb$(lx().ATTRIBUTE_TANGENT))){var f=new ps(ds().TANGENTS.name+u,es()),_=new ag(t.get_za3lpa$(a));n.put_xwzc9p$(f,_)}}return n},sx.prototype.serializer=function(){return cx()},sx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ax=null;function lx(){return null===ax&&new sx,ax}function ux(){this.descriptor_6bhnca$_0=new ge("de.fabmax.kool.util.gltf.GltfMesh.Primitive",this,5),this.descriptor.addElement_ivxn3r$("attributes",!1),this.descriptor.addElement_ivxn3r$("indices",!0),this.descriptor.addElement_ivxn3r$("material",!0),this.descriptor.addElement_ivxn3r$("mode",!0),this.descriptor.addElement_ivxn3r$("targets",!0),px=this}Object.defineProperty(ux.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_6bhnca$_0}}),ux.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Re(xe.StringSerializer,xe.IntSerializer),e.attributes),zt(e.indices,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.indices),zt(e.material,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.material),zt(e.mode,4)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeIntElement_ptg7oe$(this.descriptor,3,e.mode),zt(e.targets,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeSerializableElement_r4qlx7$(this.descriptor,4,new ke(new Re(xe.StringSerializer,xe.IntSerializer)),e.targets),i.endStructure_24f42q$(this.descriptor)},ux.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a=0,l=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=l.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=l.decodeSerializableElement_12e8id$(this.descriptor,0,new Re(xe.StringSerializer,xe.IntSerializer),i),a|=1;break;case 1:n=l.decodeIntElement_szpzho$(this.descriptor,1),a|=2;break;case 2:r=l.decodeIntElement_szpzho$(this.descriptor,2),a|=4;break;case 3:o=l.decodeIntElement_szpzho$(this.descriptor,3),a|=8;break;case 4:s=l.decodeSerializableElement_12e8id$(this.descriptor,4,new ke(new Re(xe.StringSerializer,xe.IntSerializer)),s),a|=16;break;case-1:break t;default:throw new be(e)}return l.endStructure_24f42q$(this.descriptor),hx(a,i,n,r,o,s,null)},ux.prototype.childSerializers=function(){return[new Re(xe.StringSerializer,xe.IntSerializer),xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,new ke(new Re(xe.StringSerializer,xe.IntSerializer))]},ux.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var px=null;function cx(){return null===px&&new ux,px}function hx(t,e,i,n,r,o,s){var a=s||Object.create(ox.prototype);if(0==(1&t))throw new ze("attributes");return a.attributes=e,a.indices=0==(2&t)?-1:i,a.material=0==(4&t)?-1:n,a.mode=0==(8&t)?4:r,a.targets=0==(16&t)?Nt():o,a.materialRef=null,a}function dx(){fx=this}ox.$metadata$={kind:$,simpleName:"Primitive",interfaces:[]},ox.prototype.component1=function(){return this.attributes},ox.prototype.component2=function(){return this.indices},ox.prototype.component3=function(){return this.material},ox.prototype.component4=function(){return this.mode},ox.prototype.component5=function(){return this.targets},ox.prototype.copy_nzvr0p$=function(t,e,i,n,r){return new ox(void 0===t?this.attributes:t,void 0===e?this.indices:e,void 0===i?this.material:i,void 0===n?this.mode:n,void 0===r?this.targets:r)},ox.prototype.toString=function(){return"Primitive(attributes="+e.toString(this.attributes)+", indices="+e.toString(this.indices)+", material="+e.toString(this.material)+", mode="+e.toString(this.mode)+", targets="+e.toString(this.targets)+")"},ox.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.attributes)|0)+e.hashCode(this.indices)|0)+e.hashCode(this.material)|0)+e.hashCode(this.mode)|0)+e.hashCode(this.targets)|0},ox.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.attributes,t.attributes)&&e.equals(this.indices,t.indices)&&e.equals(this.material,t.material)&&e.equals(this.mode,t.mode)&&e.equals(this.targets,t.targets)},dx.prototype.serializer=function(){return yx()},dx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fx=null;function _x(){return null===fx&&new dx,fx}function mx(){this.descriptor_82b5j7$_0=new ge("de.fabmax.kool.util.gltf.GltfMesh",this,3),this.descriptor.addElement_ivxn3r$("primitives",!1),this.descriptor.addElement_ivxn3r$("weights",!0),this.descriptor.addElement_ivxn3r$("name",!0),$x=this}Object.defineProperty(mx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_82b5j7$_0}}),mx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(cx()),e.primitives),zt(e.weights,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,new ke(xe.FloatSerializer),e.weights),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},mx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(cx()),i),o|=1;break;case 1:n=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,new ke(xe.FloatSerializer),n),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,r),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),vx(o,i,n,r,null)},mx.prototype.childSerializers=function(){return[new ke(cx()),new ye(new ke(xe.FloatSerializer)),new ye(xe.StringSerializer)]},mx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var $x=null;function yx(){return null===$x&&new mx,$x}function vx(t,e,i,n,r){var o=r||Object.create(rx.prototype);if(0==(1&t))throw new ze("primitives");return o.primitives=e,o.weights=0==(2&t)?null:i,o.name=0==(4&t)?null:n,o}function gx(t,e,i,n,r,o,s,a,l,u){wx(),void 0===t&&(t=-1),void 0===e&&(e=Nt()),void 0===i&&(i=-1),void 0===n&&(n=null),void 0===r&&(r=-1),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===u&&(u=null),this.camera=t,this.children=e,this.skin=i,this.matrix=n,this.mesh=r,this.rotation=o,this.scale=s,this.translation=a,this.weights=l,this.name=u,this.childRefs_cmm67z$_0=this.childRefs_cmm67z$_0,this.meshRef=null,this.skinRef=null}function bx(){xx=this}rx.$metadata$={kind:$,simpleName:"GltfMesh",interfaces:[]},rx.prototype.component1=function(){return this.primitives},rx.prototype.component2=function(){return this.weights},rx.prototype.component3=function(){return this.name},rx.prototype.copy_fdi4sq$=function(t,e,i){return new rx(void 0===t?this.primitives:t,void 0===e?this.weights:e,void 0===i?this.name:i)},rx.prototype.toString=function(){return"GltfMesh(primitives="+e.toString(this.primitives)+", weights="+e.toString(this.weights)+", name="+e.toString(this.name)+")"},rx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.primitives)|0)+e.hashCode(this.weights)|0)+e.hashCode(this.name)|0},rx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.primitives,t.primitives)&&e.equals(this.weights,t.weights)&&e.equals(this.name,t.name)},Object.defineProperty(gx.prototype,"childRefs",{configurable:!0,get:function(){return null==this.childRefs_cmm67z$_0?pt("childRefs"):this.childRefs_cmm67z$_0},set:function(t){this.childRefs_cmm67z$_0=t}}),bx.prototype.serializer=function(){return Sx()},bx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var xx=null;function wx(){return null===xx&&new bx,xx}function zx(){this.descriptor_t10j82$_0=new ge("de.fabmax.kool.util.gltf.GltfNode",this,10),this.descriptor.addElement_ivxn3r$("camera",!0),this.descriptor.addElement_ivxn3r$("children",!0),this.descriptor.addElement_ivxn3r$("skin",!0),this.descriptor.addElement_ivxn3r$("matrix",!0),this.descriptor.addElement_ivxn3r$("mesh",!0),this.descriptor.addElement_ivxn3r$("rotation",!0),this.descriptor.addElement_ivxn3r$("scale",!0),this.descriptor.addElement_ivxn3r$("translation",!0),this.descriptor.addElement_ivxn3r$("weights",!0),this.descriptor.addElement_ivxn3r$("name",!0),kx=this}Object.defineProperty(zx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_t10j82$_0}}),zx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.camera,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.camera),zt(e.children,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new ke(xe.IntSerializer),e.children),zt(e.skin,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.skin),zt(e.matrix,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,new ke(xe.FloatSerializer),e.matrix),zt(e.mesh,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeIntElement_ptg7oe$(this.descriptor,4,e.mesh),zt(e.rotation,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,new ke(xe.FloatSerializer),e.rotation),zt(e.scale,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,6,new ke(xe.FloatSerializer),e.scale),zt(e.translation,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,7,new ke(xe.FloatSerializer),e.translation),zt(e.weights,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,8,new ke(xe.FloatSerializer),e.weights),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,9,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},zx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c,h=0,d=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=d.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=d.decodeIntElement_szpzho$(this.descriptor,0),h|=1;break;case 1:n=d.decodeSerializableElement_12e8id$(this.descriptor,1,new ke(xe.IntSerializer),n),h|=2;break;case 2:r=d.decodeIntElement_szpzho$(this.descriptor,2),h|=4;break;case 3:o=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,new ke(xe.FloatSerializer),o),h|=8;break;case 4:s=d.decodeIntElement_szpzho$(this.descriptor,4),h|=16;break;case 5:a=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,new ke(xe.FloatSerializer),a),h|=32;break;case 6:l=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,6,new ke(xe.FloatSerializer),l),h|=64;break;case 7:u=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,7,new ke(xe.FloatSerializer),u),h|=128;break;case 8:p=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,8,new ke(xe.FloatSerializer),p),h|=256;break;case 9:c=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,9,xe.StringSerializer,c),h|=512;break;case-1:break t;default:throw new be(e)}return d.endStructure_24f42q$(this.descriptor),Cx(h,i,n,r,o,s,a,l,u,p,c,null)},zx.prototype.childSerializers=function(){return[xe.IntSerializer,new ke(xe.IntSerializer),xe.IntSerializer,new ye(new ke(xe.FloatSerializer)),xe.IntSerializer,new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(xe.StringSerializer)]},zx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var kx=null;function Sx(){return null===kx&&new zx,kx}function Cx(t,e,i,n,r,o,s,a,l,u,p,c){var h=c||Object.create(gx.prototype);return h.camera=0==(1&t)?-1:e,h.children=0==(2&t)?Nt():i,h.skin=0==(4&t)?-1:n,h.matrix=0==(8&t)?null:r,h.mesh=0==(16&t)?-1:o,h.rotation=0==(32&t)?null:s,h.scale=0==(64&t)?null:a,h.translation=0==(128&t)?null:l,h.weights=0==(256&t)?null:u,h.name=0==(512&t)?null:p,h.meshRef=null,h.skinRef=null,h}function Nx(t,e){Tx(),void 0===e&&(e=null),this.nodes=t,this.name=e,this.nodeRefs_fy674b$_0=this.nodeRefs_fy674b$_0}function Ex(){Px=this}gx.$metadata$={kind:$,simpleName:"GltfNode",interfaces:[]},gx.prototype.component1=function(){return this.camera},gx.prototype.component2=function(){return this.children},gx.prototype.component3=function(){return this.skin},gx.prototype.component4=function(){return this.matrix},gx.prototype.component5=function(){return this.mesh},gx.prototype.component6=function(){return this.rotation},gx.prototype.component7=function(){return this.scale},gx.prototype.component8=function(){return this.translation},gx.prototype.component9=function(){return this.weights},gx.prototype.component10=function(){return this.name},gx.prototype.copy_gbbj5h$=function(t,e,i,n,r,o,s,a,l,u){return new gx(void 0===t?this.camera:t,void 0===e?this.children:e,void 0===i?this.skin:i,void 0===n?this.matrix:n,void 0===r?this.mesh:r,void 0===o?this.rotation:o,void 0===s?this.scale:s,void 0===a?this.translation:a,void 0===l?this.weights:l,void 0===u?this.name:u)},gx.prototype.toString=function(){return"GltfNode(camera="+e.toString(this.camera)+", children="+e.toString(this.children)+", skin="+e.toString(this.skin)+", matrix="+e.toString(this.matrix)+", mesh="+e.toString(this.mesh)+", rotation="+e.toString(this.rotation)+", scale="+e.toString(this.scale)+", translation="+e.toString(this.translation)+", weights="+e.toString(this.weights)+", name="+e.toString(this.name)+")"},gx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.camera)|0)+e.hashCode(this.children)|0)+e.hashCode(this.skin)|0)+e.hashCode(this.matrix)|0)+e.hashCode(this.mesh)|0)+e.hashCode(this.rotation)|0)+e.hashCode(this.scale)|0)+e.hashCode(this.translation)|0)+e.hashCode(this.weights)|0)+e.hashCode(this.name)|0},gx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.camera,t.camera)&&e.equals(this.children,t.children)&&e.equals(this.skin,t.skin)&&e.equals(this.matrix,t.matrix)&&e.equals(this.mesh,t.mesh)&&e.equals(this.rotation,t.rotation)&&e.equals(this.scale,t.scale)&&e.equals(this.translation,t.translation)&&e.equals(this.weights,t.weights)&&e.equals(this.name,t.name)},Object.defineProperty(Nx.prototype,"nodeRefs",{configurable:!0,get:function(){return null==this.nodeRefs_fy674b$_0?pt("nodeRefs"):this.nodeRefs_fy674b$_0},set:function(t){this.nodeRefs_fy674b$_0=t}}),Ex.prototype.serializer=function(){return jx()},Ex.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Px=null;function Tx(){return null===Px&&new Ex,Px}function Ox(){this.descriptor_mfdw2u$_0=new ge("de.fabmax.kool.util.gltf.GltfScene",this,2),this.descriptor.addElement_ivxn3r$("nodes",!1),this.descriptor.addElement_ivxn3r$("name",!0),Mx=this}Object.defineProperty(Ox.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_mfdw2u$_0}}),Ox.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(xe.IntSerializer),e.nodes),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Ox.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(xe.IntSerializer),i),r|=1;break;case 1:n=o.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,xe.StringSerializer,n),r|=2;break;case-1:break t;default:throw new be(e)}return o.endStructure_24f42q$(this.descriptor),Ax(r,i,n,null)},Ox.prototype.childSerializers=function(){return[new ke(xe.IntSerializer),new ye(xe.StringSerializer)]},Ox.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Mx=null;function jx(){return null===Mx&&new Ox,Mx}function Ax(t,e,i,n){var r=n||Object.create(Nx.prototype);if(0==(1&t))throw new ze("nodes");return r.nodes=e,r.name=0==(2&t)?null:i,r}function Rx(t,e,i,n){Dx(),void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=null),this.inverseBindMatrices=t,this.skeleton=e,this.joints=i,this.name=n,this.inverseBindMatrixAccessorRef=null,this.jointRefs_tdme4q$_0=this.jointRefs_tdme4q$_0}function Ix(){Lx=this}Nx.$metadata$={kind:$,simpleName:"GltfScene",interfaces:[]},Nx.prototype.component1=function(){return this.nodes},Nx.prototype.component2=function(){return this.name},Nx.prototype.copy_jfrl1g$=function(t,e){return new Nx(void 0===t?this.nodes:t,void 0===e?this.name:e)},Nx.prototype.toString=function(){return"GltfScene(nodes="+e.toString(this.nodes)+", name="+e.toString(this.name)+")"},Nx.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.nodes)|0)+e.hashCode(this.name)|0},Nx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.nodes,t.nodes)&&e.equals(this.name,t.name)},Object.defineProperty(Rx.prototype,"jointRefs",{configurable:!0,get:function(){return null==this.jointRefs_tdme4q$_0?pt("jointRefs"):this.jointRefs_tdme4q$_0},set:function(t){this.jointRefs_tdme4q$_0=t}}),Ix.prototype.serializer=function(){return Fx()},Ix.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Lx=null;function Dx(){return null===Lx&&new Ix,Lx}function qx(){this.descriptor_73xgz7$_0=new ge("de.fabmax.kool.util.gltf.GltfSkin",this,4),this.descriptor.addElement_ivxn3r$("inverseBindMatrices",!0),this.descriptor.addElement_ivxn3r$("skeleton",!0),this.descriptor.addElement_ivxn3r$("joints",!1),this.descriptor.addElement_ivxn3r$("name",!0),Bx=this}Object.defineProperty(qx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_73xgz7$_0}}),qx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.inverseBindMatrices,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.inverseBindMatrices),zt(e.skeleton,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.skeleton),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,new ke(xe.IntSerializer),e.joints),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},qx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeIntElement_szpzho$(this.descriptor,0),s|=1;break;case 1:n=a.decodeIntElement_szpzho$(this.descriptor,1),s|=2;break;case 2:r=a.decodeSerializableElement_12e8id$(this.descriptor,2,new ke(xe.IntSerializer),r),s|=4;break;case 3:o=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,xe.StringSerializer,o),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),Ux(s,i,n,r,o,null)},qx.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,new ke(xe.IntSerializer),new ye(xe.StringSerializer)]},qx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Bx=null;function Fx(){return null===Bx&&new qx,Bx}function Ux(t,e,i,n,r,o){var s=o||Object.create(Rx.prototype);if(s.inverseBindMatrices=0==(1&t)?-1:e,s.skeleton=0==(2&t)?-1:i,0==(4&t))throw new ze("joints");return s.joints=n,s.name=0==(8&t)?null:r,s.inverseBindMatrixAccessorRef=null,s}function Vx(t,e,i){Kx(),void 0===t&&(t=-1),void 0===e&&(e=0),void 0===i&&(i=null),this.sampler=t,this.source=e,this.name=i,this.imageRef_gjfsvw$_0=this.imageRef_gjfsvw$_0,this.createdTex_0=null}function Gx(t,e,i,n,r,o){l.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$uri=t,this.local$this$GltfTexture=e,this.local$assetMgr=n}function Hx(){Wx=this}Rx.$metadata$={kind:$,simpleName:"GltfSkin",interfaces:[]},Rx.prototype.component1=function(){return this.inverseBindMatrices},Rx.prototype.component2=function(){return this.skeleton},Rx.prototype.component3=function(){return this.joints},Rx.prototype.component4=function(){return this.name},Rx.prototype.copy_1a8yv8$=function(t,e,i,n){return new Rx(void 0===t?this.inverseBindMatrices:t,void 0===e?this.skeleton:e,void 0===i?this.joints:i,void 0===n?this.name:n)},Rx.prototype.toString=function(){return"GltfSkin(inverseBindMatrices="+e.toString(this.inverseBindMatrices)+", skeleton="+e.toString(this.skeleton)+", joints="+e.toString(this.joints)+", name="+e.toString(this.name)+")"},Rx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.inverseBindMatrices)|0)+e.hashCode(this.skeleton)|0)+e.hashCode(this.joints)|0)+e.hashCode(this.name)|0},Rx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.inverseBindMatrices,t.inverseBindMatrices)&&e.equals(this.skeleton,t.skeleton)&&e.equals(this.joints,t.joints)&&e.equals(this.name,t.name)},Object.defineProperty(Vx.prototype,"imageRef",{configurable:!0,get:function(){return null==this.imageRef_gjfsvw$_0?pt("imageRef"):this.imageRef_gjfsvw$_0},set:function(t){this.imageRef_gjfsvw$_0=t}}),Gx.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Gx.prototype=Object.create(l.prototype),Gx.prototype.constructor=Gx,Gx.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(null!=this.local$closure$uri){if(this.state_0=3,this.result_0=this.local$assetMgr.loadTextureData_61zpoe$(this.local$closure$uri,this),this.result_0===a)return a;continue}if(this.state_0=2,this.result_0=this.local$assetMgr.createTextureData_asds6l$(x(this.local$this$GltfTexture.imageRef.bufferViewRef).getData(),x(this.local$this$GltfTexture.imageRef.mimeType),this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:case 3:return this.result_0;case 4:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Vx.prototype.makeTexture=function(){var t,e;if(null==this.createdTex_0){var i=this.imageRef.uri,n=null==i||u(i,"data:",!0)?"gltf_tex_"+this.source:i;this.createdTex_0=new Qc(n,void 0,(t=i,e=this,function(i,n,r,o){var s=new Gx(t,e,i,n,this,r);return o?s:s.doResume(null)}))}return x(this.createdTex_0)},Hx.prototype.serializer=function(){return Zx()},Hx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Wx=null;function Kx(){return null===Wx&&new Hx,Wx}function Xx(){this.descriptor_grd8gb$_0=new ge("de.fabmax.kool.util.gltf.GltfTexture",this,3),this.descriptor.addElement_ivxn3r$("sampler",!0),this.descriptor.addElement_ivxn3r$("source",!0),this.descriptor.addElement_ivxn3r$("name",!0),Yx=this}Object.defineProperty(Xx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_grd8gb$_0}}),Xx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.sampler,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.sampler),zt(e.source,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.source),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Xx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,r),o|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Jx(o,i,n,r,null)},Xx.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,new ye(xe.StringSerializer)]},Xx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Yx=null;function Zx(){return null===Yx&&new Xx,Yx}function Jx(t,e,i,n,r){var o=r||Object.create(Vx.prototype);return o.sampler=0==(1&t)?-1:e,o.source=0==(2&t)?0:i,o.name=0==(4&t)?null:n,o.createdTex_0=null,o}function Qx(t,e,i,n){iw(),void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=1),this.index=t,this.strength=e,this.texCoord=i,this.scale=n}function tw(){ew=this}Vx.$metadata$={kind:$,simpleName:"GltfTexture",interfaces:[]},Vx.prototype.component1=function(){return this.sampler},Vx.prototype.component2=function(){return this.source},Vx.prototype.component3=function(){return this.name},Vx.prototype.copy_273qip$=function(t,e,i){return new Vx(void 0===t?this.sampler:t,void 0===e?this.source:e,void 0===i?this.name:i)},Vx.prototype.toString=function(){return"GltfTexture(sampler="+e.toString(this.sampler)+", source="+e.toString(this.source)+", name="+e.toString(this.name)+")"},Vx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.sampler)|0)+e.hashCode(this.source)|0)+e.hashCode(this.name)|0},Vx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.sampler,t.sampler)&&e.equals(this.source,t.source)&&e.equals(this.name,t.name)},Qx.prototype.getTexture_vd9sc9$=function(t){return t.textures.get_za3lpa$(this.index).makeTexture()},tw.prototype.serializer=function(){return ow()},tw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ew=null;function iw(){return null===ew&&new tw,ew}function nw(){this.descriptor_yo1hoj$_0=new ge("de.fabmax.kool.util.gltf.GltfTextureInfo",this,4),this.descriptor.addElement_ivxn3r$("index",!1),this.descriptor.addElement_ivxn3r$("strength",!0),this.descriptor.addElement_ivxn3r$("texCoord",!0),this.descriptor.addElement_ivxn3r$("scale",!0),rw=this}Object.defineProperty(nw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yo1hoj$_0}}),nw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.index),zt(e.strength,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeFloatElement_lf6hpt$(this.descriptor,1,e.strength),zt(e.texCoord,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.texCoord),zt(e.scale,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeFloatElement_lf6hpt$(this.descriptor,3,e.scale),i.endStructure_24f42q$(this.descriptor)},nw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeIntElement_szpzho$(this.descriptor,0),s|=1;break;case 1:n=a.decodeFloatElement_szpzho$(this.descriptor,1),s|=2;break;case 2:r=a.decodeIntElement_szpzho$(this.descriptor,2),s|=4;break;case 3:o=a.decodeFloatElement_szpzho$(this.descriptor,3),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),sw(s,i,n,r,o,null)},nw.prototype.childSerializers=function(){return[xe.IntSerializer,xe.FloatSerializer,xe.IntSerializer,xe.FloatSerializer]},nw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var rw=null;function ow(){return null===rw&&new nw,rw}function sw(t,e,i,n,r,o){var s=o||Object.create(Qx.prototype);if(0==(1&t))throw new ze("index");return s.index=e,s.strength=0==(2&t)?1:i,s.texCoord=0==(4&t)?0:n,s.scale=0==(8&t)?1:r,s}function aw(t){var i,n=new Od,r=new ia;r.name="BrdfLutPass",r.setSize_vux9f0$(512,512),r.addColorTexture_farcsl$(Yc()),r.clearDepthTexture(),ua.call(this,n,new ea(r)),this.clearColor=null;var o=new zd;o.projCorrectionMode=wd(),o.isKeepAspectRatio=!1,o.left=0,o.right=1,o.top=1,o.bottom=0,this.camera=o;var a=e.isType(i=this.drawNode,Od)?i:c(),l=new Fd(new Bw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(uw);var u=new Ru("BRDF LUT"),p={v:null},h=new Lu(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.simpleVertexPositionNode().outVec4;var d=new Du(u),f=d.addNode_u9w9by$(new lw(d.stage));f.inTexCoords=p.v.output;var _=f;d.colorOutput_a3v4si$(_.outColor);var m,$,y=u;l.shader=new sc(y),a.unaryPlus_uv0sim$(l),this.onAfterDraw.add_11rb$((m=this,$=t,function(t){var i=m,n=qN.Log,r=vz.DEBUG,o=e.getKClassFromExpression(i).simpleName;return r.level>=n.level.level&&n.printer(r,o,"Generated BRDF look-up table"),$.removeOffscreenPass_m1c2kf$(m),t.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(t,m)),s}))}function lw(t){qu.call(this,"brdfLut",t),this.inTexCoords=new Bu(new zu(ar().ZERO)),this.outColor=new Bu(new $u("brdfLut_outColor"),this)}function uw(t){var e=t.rectProps.defaults();return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(t.rectProps),s}function pw(){dw=this}function cw(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$bgColor=t}function hw(t,e,i,n,r,o){l.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$scene=e,this.local$hdriPath=i,this.local$assetManager=n,this.local$autoDispose=r}Qx.$metadata$={kind:$,simpleName:"GltfTextureInfo",interfaces:[]},Qx.prototype.component1=function(){return this.index},Qx.prototype.component2=function(){return this.strength},Qx.prototype.component3=function(){return this.texCoord},Qx.prototype.component4=function(){return this.scale},Qx.prototype.copy_scorqy$=function(t,e,i,n){return new Qx(void 0===t?this.index:t,void 0===e?this.strength:e,void 0===i?this.texCoord:i,void 0===n?this.scale:n)},Qx.prototype.toString=function(){return"GltfTextureInfo(index="+e.toString(this.index)+", strength="+e.toString(this.strength)+", texCoord="+e.toString(this.texCoord)+", scale="+e.toString(this.scale)+")"},Qx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.index)|0)+e.hashCode(this.strength)|0)+e.hashCode(this.texCoord)|0)+e.hashCode(this.scale)|0},Qx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.index,t.index)&&e.equals(this.strength,t.strength)&&e.equals(this.texCoord,t.texCoord)&&e.equals(this.scale,t.scale)},aw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},lw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inTexCoords)},lw.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("brdfLut","\n                float RadicalInverse_VdC(uint bits) {\n                    bits = (bits << 16u) | (bits >> 16u);\n                    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n                }\n                \n                vec2 Hammersley(uint i, uint N) {\n                    return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n                }\n                \n                vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) {\n                    float a = roughness*roughness;\n                    \n                    float phi = 2.0 * 3.141592653589793 * Xi.x;\n                    float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\n                    float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n                    \n                    // from spherical coordinates to cartesian coordinates\n                    vec3 H;\n                    H.x = cos(phi) * sinTheta;\n                    H.y = sin(phi) * sinTheta;\n                    H.z = cosTheta;\n                    \n                    // from tangent-space vector to world-space sample vector\n                    vec3 up = abs(N.z) < 0.9999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n                    vec3 tangent = normalize(cross(up, N));\n                    vec3 bitangent = cross(N, tangent);\n                    \n                    vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                    return normalize(sampleVec);\n                }\n                \n                float GeometrySchlickGGX(float NdotV, float roughness) {\n                    float a = roughness;\n                    float k = (a * a) / 2.0;\n                \n                    float nom   = NdotV;\n                    float denom = NdotV * (1.0 - k) + k;\n                \n                    return nom / denom;\n                }\n                \n                float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                    float NdotV = max(dot(N, V), 0.0);\n                    float NdotL = max(dot(N, L), 0.0);\n                    float ggx2 = GeometrySchlickGGX(NdotV, roughness);\n                    float ggx1 = GeometrySchlickGGX(NdotL, roughness);\n                \n                    return ggx1 * ggx2;\n                }\n                \n                vec2 IntegrateBRDF(float NdotV, float roughness) {\n                    vec3 V;\n                    V.x = sqrt(1.0 - NdotV*NdotV);\n                    V.y = 0.0;\n                    V.z = NdotV;\n                \n                    float A = 0.0;\n                    float B = 0.0;\n                \n                    vec3 N = vec3(0.0, 0.0, 1.0);\n                \n                    const uint SAMPLE_COUNT = 1024u;\n                    for(uint i = 0u; i < SAMPLE_COUNT; ++i) {\n                        vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                        vec3 H  = ImportanceSampleGGX(Xi, N, roughness);\n                        vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n                \n                        float NdotL = max(L.z, 0.0);\n                        float NdotH = max(H.z, 0.0);\n                        float VdotH = max(dot(V, H), 0.0);\n                \n                        if(NdotL > 0.0) {\n                            float G = GeometrySmith(N, V, L, roughness);\n                            float G_Vis = (G * VdotH) / (NdotH * NdotV);\n                            float Fc = pow(1.0 - VdotH, 5.0);\n                \n                            A += (1.0 - Fc) * G_Vis;\n                            B += Fc * G_Vis;\n                        }\n                    }\n                    A /= float(SAMPLE_COUNT);\n                    B /= float(SAMPLE_COUNT);\n                    return vec2(A, B);\n                }\n            "),t.appendMain_61zpoe$("\n                vec2 integratedBRDF = IntegrateBRDF("+this.inTexCoords.ref2f()+".x, "+this.inTexCoords.ref2f()+".y);\n                "+this.outColor.declare()+" = vec4(integratedBRDF, 0.0, 1.0);\n            ")},lw.$metadata$={kind:$,simpleName:"BrdfLutNode",interfaces:[qu]},aw.$metadata$={kind:$,simpleName:"BrdfLutPass",interfaces:[ua]},cw.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},cw.prototype=Object.create(l.prototype),cw.prototype.constructor=cw,cw.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return new Fh(this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},pw.prototype.singleColorEnvironment_6zt5da$=function(t,e,i){void 0===i&&(i=!0);var n,r=Bh().singleColor_d7aj7k$(e.toLinear()),o=new bh("singleColorEnv-"+e,new xh(void 0,Eh(),Eh(),Eh(),kh(),kh(),!1,1),(n=r,function(t,e,i,r){var o=new cw(n,t,e,this,i);return r?o:o.doResume(null)})),a=new aw(t),l=new Qc("singleColorEnv-brdf",a.config.colorAttachments.get_za3lpa$(0).getTextureProps_6taknv$(!1));a.copyTargetsColor.add_11rb$(l);var u,p=new fw(o,o,l);return i&&t.onDispose.add_11rb$((u=p,function(t,e){return u.dispose(),s})),t.addOffscreenPass_m1c2kf$(a),p},pw.prototype.gradientColorEnvironment_hfkvyz$=function(t,e,i,n){void 0===n&&(n=!0);var r=new _w(t,e,i),o=Sw().irradianceMapFromCube_53y80y$(t,x(r.colorTexture)),a=jw().reflectionMapFromCube_53y80y$(t,x(r.colorTexture)),l=new aw(t);o.dependsOn_yqp8fe$(r),a.dependsOn_yqp8fe$(r);var u,p=new fw(o.copyColor(),a.copyColor(),l.copyColor());return n&&t.onDispose.add_11rb$((u=p,function(t,e){return u.dispose(),s})),t.addOffscreenPass_m1c2kf$(r),t.addOffscreenPass_m1c2kf$(o),t.addOffscreenPass_m1c2kf$(a),t.addOffscreenPass_m1c2kf$(l),p},hw.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},hw.prototype=Object.create(l.prototype),hw.prototype.constructor=hw,hw.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:void 0===this.local$autoDispose&&(this.local$autoDispose=!0);var t=new xh(void 0,void 0,void 0,void 0,kh(),kh(),!1,1);if(this.state_0=2,this.result_0=this.local$assetManager.loadAndPrepareTexture_va0f2y$(this.local$hdriPath,t,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var e=this.result_0;return this.$this.hdriEnvironment_wm5s1y$(this.local$scene,e,this.local$autoDispose);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},pw.prototype.hdriEnvironment_cj1d96$=function(t,e,i,n,r,o){var s=new hw(this,t,e,i,n,r);return o?s:s.doResume(null)},pw.prototype.hdriEnvironment_wm5s1y$=function(t,e,i){void 0===i&&(i=!0);var n=new Lw(t,e),r=Sw().irradianceMapFromHdri_tstyqb$(t,x(n.colorTexture)),o=jw().reflectionMapFromHdri_tstyqb$(t,x(n.colorTexture)),a=new aw(t);r.dependsOn_yqp8fe$(n),o.dependsOn_yqp8fe$(n);var l,u=new fw(r.copyColor(),o.copyColor(),a.copyColor());return i&&t.onDispose.add_11rb$((l=u,function(t,e){return l.dispose(),s})),t.addOffscreenPass_m1c2kf$(n),t.addOffscreenPass_m1c2kf$(r),t.addOffscreenPass_m1c2kf$(o),t.addOffscreenPass_m1c2kf$(a),u},pw.$metadata$={kind:y,simpleName:"EnvironmentHelper",interfaces:[]};var dw=null;function fw(t,e,i){this.irradianceMap=t,this.reflectionMap=e,this.brdfLut=i}function _w(t,i,n,r){void 0===r&&(r=128);var o,a,l=new Od,u=new ia,p=r;u.name="GradientEnvGenerator",u.setSize_vux9f0$(p,p),u.addColorTexture_farcsl$(Jc()),u.clearDepthTexture(),pa.call(this,l,new ea(u)),this.gradientTex_0=this.makeGradientTex_0(i,2*r|0,n),(e.isType(o=this.drawNode,Od)?o:c()).unaryPlus_uv0sim$(Bd(void 0,void 0,(a=this,function(t){return t.generate_v2sixm$($w),t.shader=new uc(a.gradientTex_0,"gradTex",a.gradientEnvModel_0()),x(t.shader).onPipelineSetup.add_11rb$(yw),s}))),this.onAfterDraw.add_11rb$(function(t,i,n){return function(r){var o=t,a=qN.Log,l=vz.DEBUG,u=e.getKClassFromExpression(o).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Generated gradient cube map"),i.removeOffscreenPass_m1c2kf$(t),n.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(n,t)),s}}(this,t,n))}function mw(t){qu.call(this,"posToUv",t),this.inPos=new Bu(new ku(Er().Y_AXIS)),this.outUv=new Bu(new _u("outUv"),this)}function $w(t){return t.cubeProps.defaults().centered(),t.cube_lhbb6w$(t.cubeProps),s}function yw(t,e,i){return t.depthTest=pl(),t.cullMethod=zl(),s}function vw(t,e){qu.call(this,"envCubeSampler",e),this.texture=t,this.maxLightIntensity=new Bu(new wu(5e3))}function gw(t,e){qu.call(this,"envEquiRectSampler",e),this.texture=t}function bw(t){qu.call(this,"rgbeDecoder",t),this.inRgbe=new Bu(new Su(Qr().ZERO)),this.maxLightIntensity=new Bu(new wu(20)),this.outColor=new Bu(new mu("decodedRgbe"),this)}function xw(t,i,n){Sw();var r,o=new Od,a=new ia;a.name="IrradianceMapPass",a.setSize_vux9f0$(16,16),a.addColorTexture_farcsl$(Jc()),a.clearDepthTexture(),pa.call(this,o,new ea(a)),this.clearColor=null;var l=e.isType(r=this.drawNode,Od)?r:c(),u=new Fd(new Bw(qt(ds().POSITIONS)),null);u.generate_v2sixm$(Cw);var p=new Ru("IrradianceMapPass"),h={v:null},d=new Lu(p);h.v=d.stageInterfaceNode_iikjwn$("ifLocalPos",d.attrPositions().output),d.positionOutput=d.simpleVertexPositionNode().outVec4;var f=new Du(p);null!=i?f.addNode_u9w9by$(new gw(f.textureNode_61zpoe$("colorTex"),f.stage)):f.addNode_u9w9by$(new vw(f.cubeMapNode_61zpoe$("colorTex"),f.stage));var _=f.addNode_u9w9by$(new ww(f.stage));_.inLocalPos=h.v.output;var m=_;f.colorOutput_a3v4si$(m.outColor);var $,y,v,g,b=p;if(null!=i){var x=new uc(i,"colorTex",b);x.onPipelineSetup.add_11rb$(Nw),u.shader=x}else{var w=new pc(n,"colorTex",b);w.onPipelineSetup.add_11rb$(Ew),u.shader=w}l.unaryPlus_uv0sim$(u),this.onAfterDraw.add_11rb$(($=i,y=this,v=n,g=t,function(t){if(null!=$){var i=y,n=qN.Log,r=vz.DEBUG,o=e.getKClassFromExpression(i).simpleName;r.level>=n.level.level&&n.printer(r,o,"Generated irradiance map from HDRI: "+Ct($.name))}else{var a=y,l=qN.Log,u=vz.DEBUG,p=e.getKClassFromExpression(a).simpleName;if(u.level>=l.level.level){var c=l.printer,h=v;c.call(l,u,p,"Generated irradiance map from cube map: "+Ct(null!=h?h.name:null))}}return g.removeOffscreenPass_m1c2kf$(y),t.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(t,y)),s}))}function ww(t){qu.call(this,"convIrradiance",t),this.inLocalPos=new Bu(new ku(Er().X_AXIS)),this.outColor=new Bu(new $u("convIrradiance_outColor"),this)}function zw(){kw=this}fw.prototype.dispose=function(){this.irradianceMap.dispose(),this.reflectionMap.dispose(),this.brdfLut.dispose()},fw.$metadata$={kind:$,simpleName:"EnvironmentMaps",interfaces:[]},_w.prototype.makeGradientTex_0=function(t,e,i){for(var n=wN(4*e|0),r=0;r<e;r++){var o=t.getColor_y2kzbl$(1-r/e);n.set_6t1wet$(0+(4*r|0)|0,Dt(F(255*o.r))),n.set_6t1wet$(1+(4*r|0)|0,Dt(F(255*o.g))),n.set_6t1wet$(2+(4*r|0)|0,Dt(F(255*o.b))),n.set_6t1wet$(3+(4*r|0)|0,Dt(255))}var s=new Mh(n,e,1,Kc()),a=new xh(void 0,Eh(),Eh(),void 0,void 0,void 0,!1,1);return i.assetMgr.loadAndPrepareTexture_siesr9$(s,a,"gradientEnvTex")},_w.prototype.gradientEnvModel_0=function(){var t=new Ru("gradientEnvModel()"),e={v:null},i=new Lu(t),n=i.mvpNode(),r=i.attrPositions().output,o=i.vec3TransformNode_vid4wo$(r,n.outModelMat,1).outVec3;e.v=i.stageInterfaceNode_iikjwn$("ifFragPos",o),i.positionOutput=i.vec4TransformNode_9krp9t$(r,n.outMvpMat).outVec4;var s=new Du(t),a=s.addNode_u9w9by$(new mw(s.stage));a.inPos=e.v.output;var l=s.textureSamplerNode_ce41yx$(s.textureNode_61zpoe$("gradTex"),a.outUv),u=s.gammaNode_ze33is$(l.outColor).outColor;return s.colorOutput_a3v4si$(u),t},mw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inPos)},mw.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outUv.declare()+" = vec2(acos(normalize("+this.inPos.ref3f()+").y) / "+U.PI+", 0.0);")},mw.$metadata$={kind:$,simpleName:"PosToUvNode",interfaces:[qu]},_w.$metadata$={kind:$,simpleName:"GradientCubeGenerator",interfaces:[pa]},vw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture)},vw.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("sampleEnv","\n                vec3 sampleEnv(vec3 texCoord, float mipLevel) {\n                    vec3 envColor = "+t.sampleTextureCube_buzeal$(this.texture.name,"texCoord","mipLevel")+".rgb;\n                    return min(envColor, vec3("+this.maxLightIntensity.ref1f()+"));\n                }\n            ")},vw.$metadata$={kind:$,simpleName:"EnvCubeSamplerNode",interfaces:[qu]},gw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture)},gw.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("sampleEnv","\n                vec3 sampleEnv(vec3 texCoord, float mipLevel) {\n                    vec3 equiRect_in = normalize(texCoord);\n                    vec2 uv = vec2(atan(equiRect_in.z, equiRect_in.x), -asin(equiRect_in.y));\n                    uv *= vec2(0.1591, 0.3183);\n                    uv += 0.5;\n                    return "+t.sampleTexture2d_buzeal$(this.texture.name,"uv","mipLevel")+".rgb;\n                }\n            ")},gw.$metadata$={kind:$,simpleName:"EnvEquiRectSamplerNode",interfaces:[qu]},bw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inRgbe,this.maxLightIntensity])},bw.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec3 fRgb = "+this.inRgbe.ref3f()+";\n                float fExp = "+this.inRgbe.ref4f()+".a * 255.0 - 128.0;\n                "+this.outColor.declare()+" = min(fRgb * pow(2.0, fExp), vec3("+this.maxLightIntensity.ref1f()+"));\n            ")},bw.$metadata$={kind:$,simpleName:"RgbeDecoderNode",interfaces:[qu]},xw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),pa.prototype.dispose_aemszp$.call(this,t)},ww.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inLocalPos)},ww.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t);var e=2*U.PI,i=.5*U.PI;t.appendMain_61zpoe$("\n                vec3 normal = normalize("+this.inLocalPos.ref3f()+");\n                vec3 up = vec3(0.0, 1.0, 0.0);\n                vec3 right = normalize(cross(up, normal));\n                up = cross(normal, right);\n\n                float sampleDelta = 0.03737;\n                vec3 irradiance = vec3(0.0);\n                int nrSamples = 0; \n\n                for (float theta = 0.0; theta < "+i+"; theta += sampleDelta) {\n                    float deltaPhi = sampleDelta / sin(theta);\n                    for (float phi = 0.0; phi < "+e+"; phi += deltaPhi) {\n                        vec3 tempVec = cos(phi) * right + sin(phi) * up;\n                        vec3 sampleVector = cos(theta) * normal + sin(theta) * tempVec;\n                        vec3 envColor = sampleEnv(sampleVector, 3.0);\n                        irradiance += envColor * cos(theta) * 0.6;\n                        nrSamples++;\n                    }\n                }\n                irradiance = irradiance * "+U.PI+" / float(nrSamples);\n                "+this.outColor.declare()+" = vec4(irradiance, 1.0);\n            ")},ww.$metadata$={kind:$,simpleName:"ConvoluteIrradianceNode",interfaces:[qu]},zw.prototype.irradianceMapFromHdri_tstyqb$=function(t,e){return new xw(t,e,null)},zw.prototype.irradianceMapFromCube_53y80y$=function(t,e){return new xw(t,null,e)},zw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var kw=null;function Sw(){return null===kw&&new zw,kw}function Cw(t){return t.cubeProps.defaults().centered(),t.cube_lhbb6w$(t.cubeProps),s}function Nw(t,e,i){return t.cullMethod=wl(),s}function Ew(t,e,i){return t.cullMethod=wl(),s}function Pw(t,i,n){jw();var r,o,a=new Od,l=new ia;l.name="ReflectionMapPass",l.setSize_vux9f0$(256,256),l.mipLevels=7,l.addColorTexture_farcsl$(Jc()),l.clearDepthTexture(),pa.call(this,a,new ea(l)),this.parentScene=t,this.uRoughness_0=Gh(.5,"uRoughness"),this.isEnabled=!0,this.onSetupMipLevel=(o=this,function(t,e){return o.uRoughness_0.value=t/(o.config.mipLevels-1|0),s});var u=e.isType(r=this.drawNode,Od)?r:c(),p=new Fd(new Bw(qt(ds().POSITIONS)),"reflectionMap");p.generate_v2sixm$(Aw);var h=new Ru("Reflectance Convolution Sampler"),d={v:null},f=new Lu(h);d.v=f.stageInterfaceNode_iikjwn$("ifLocalPos",f.attrPositions().output),f.positionOutput=f.simpleVertexPositionNode().outVec4;var _=new Du(h);null!=i?_.addNode_u9w9by$(new gw(_.textureNode_61zpoe$("colorTex"),_.stage)):_.addNode_u9w9by$(new vw(_.cubeMapNode_61zpoe$("colorTex"),_.stage));var m=_.addNode_u9w9by$(new Tw(_.stage));m.inLocalPos=d.v.output,m.inRoughness=_.pushConstantNode1f_978i2u$(this.uRoughness_0).output;var $=m;_.colorOutput_a3v4si$($.outColor);var y=h;if(null!=i){var v=new uc(i,"colorTex",y);v.onPipelineSetup.add_11rb$(Rw),p.shader=v}else{var g=new pc(n,"colorTex",y);g.onPipelineSetup.add_11rb$(Iw),p.shader=g}u.unaryPlus_uv0sim$(p),this.onAfterDraw.add_11rb$(function(t,i,n){return function(r){if(null!=t){var o=i,a=qN.Log,l=vz.DEBUG,u=e.getKClassFromExpression(o).simpleName;l.level>=a.level.level&&a.printer(l,u,"Generated reflection map from HDRI: "+Ct(t.name))}else{var p=i,c=qN.Log,h=vz.DEBUG,d=e.getKClassFromExpression(p).simpleName;if(h.level>=c.level.level){var f=c.printer,_=n;f.call(c,h,d,"Generated reflection map from cube map: "+Ct(null!=_?_.name:null))}}return i.parentScene.removeOffscreenPass_m1c2kf$(i),r.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(r,i)),s}}(i,this,n))}function Tw(t){qu.call(this,"convIrradiance",t),this.inLocalPos=new Bu(new ku(Er().X_AXIS)),this.inRoughness=new Bu(new wu(0)),this.maxLightIntensity=new Bu(new wu(5e3)),this.outColor=new Bu(new $u("convReflection_outColor"),this)}function Ow(){Mw=this}xw.$metadata$={kind:$,simpleName:"IrradianceMapPass",interfaces:[pa]},Pw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),pa.prototype.dispose_aemszp$.call(this,t)},Tw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inLocalPos),this.dependsOn_7qvs0d$(this.maxLightIntensity)},Tw.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("reflMapFuncs","\n                float RadicalInverse_VdC(uint bits) {\n                    bits = (bits << 16u) | (bits >> 16u);\n                    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n                }\n                \n                vec2 Hammersley(uint i, uint N) {\n                    return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n                }\n                \n                vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) {\n                    float a = roughness*roughness;\n                    \n                    float phi = 2.0 * 3.141592653589793 * Xi.x;\n                    float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\n                    float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n                    \n                    // from spherical coordinates to cartesian coordinates\n                    vec3 H;\n                    H.x = cos(phi) * sinTheta;\n                    H.y = sin(phi) * sinTheta;\n                    H.z = cosTheta;\n                    \n                    // from tangent-space vector to world-space sample vector\n                    vec3 up = abs(N.z) < 0.9999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n                    vec3 tangent = normalize(cross(up, N));\n                    vec3 bitangent = cross(N, tangent);\n                    \n                    vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                    return normalize(sampleVec);\n                }\n            "),t.appendMain_61zpoe$("\n                vec3 N = normalize("+this.inLocalPos.ref3f()+");\n                vec3 R = N;\n                vec3 V = R;\n                \n                float mipLevel = "+this.inRoughness.ref1f()+" * 16.0;\n                uint SAMPLE_COUNT = uint(1024.0 * (1.0 + mipLevel));\n                float totalWeight = 0.0;\n                vec3 prefilteredColor = vec3(0.0);\n                for(uint i = 0u; i < SAMPLE_COUNT; ++i) {\n                    vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                    vec3 H  = ImportanceSampleGGX(Xi, N, "+this.inRoughness.ref1f()+");\n                    vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n            \n                    float NdotL = max(dot(N, L), 0.0);\n                    if(NdotL > 0.0) {\n                        prefilteredColor += sampleEnv(L, mipLevel) * NdotL;\n                        totalWeight += NdotL;\n                    }\n                }\n                prefilteredColor = prefilteredColor / totalWeight;\n                "+this.outColor.declare()+" = vec4(prefilteredColor, 1.0);\n            ")},Tw.$metadata$={kind:$,simpleName:"ConvoluteReflectionNode",interfaces:[qu]},Ow.prototype.reflectionMapFromHdri_tstyqb$=function(t,e){return new Pw(t,e,null)},Ow.prototype.reflectionMapFromCube_53y80y$=function(t,e){return new Pw(t,null,e)},Ow.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Mw=null;function jw(){return null===Mw&&new Ow,Mw}function Aw(t){return t.cubeProps.defaults().centered(),t.cube_lhbb6w$(t.cubeProps),s}function Rw(t,e,i){return t.cullMethod=wl(),s}function Iw(t,e,i){return t.cullMethod=wl(),s}function Lw(t,i){var n,r,o,a,l,u,p=new Od,h=new ia,d=null!=(r=null!=(n=i.loadedTexture)?n.width:null)?r:1024,f=null!=(a=null!=(o=i.loadedTexture)?o.height:null)?a:512,_=A.max(d,f);h.name="RgbeDecoder",h.setSize_vux9f0$(_,_),h.addColorTexture_farcsl$(Jc()),h.clearDepthTexture(),h.addMipLevels_ydzd23$(void 0,void 0,!1),ua.call(this,p,new ea(h)),(e.isType(l=this.drawNode,Od)?l:c()).unaryPlus_uv0sim$(Bd(void 0,void 0,(u=i,function(t){t.isFrustumChecked=!1,t.generate_v2sixm$(Dw);var e=new Ru("RgbeDecoder"),i={v:null},n=new Lu(e);i.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),n.positionOutput=n.fullScreenQuadPositionNode_r20yfm$(n.attrTexCoords().output).outQuadPos;var r=new Du(e),o=r.addNode_u9w9by$(new bw(r.stage));o.inRgbe=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("colorTex"),i.v.output).outColor;var a=o;r.colorOutput_a3v4si$(a.outColor);var l=new uc(u,"colorTex",e);return l.onPipelineSetup.add_11rb$(qw),t.shader=l,s}))),this.onAfterDraw.add_11rb$(function(t,i,n){return function(r){var o=i,a=qN.Log,l=vz.DEBUG,u=e.getKClassFromExpression(o).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Converted RGBe to linear: "+Ct(t.name)),n.removeOffscreenPass_m1c2kf$(i),r.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(r,i)),s}}(i,this,t))}function Dw(t){return t.rectProps.defaults(),t.rect_e5k3t5$(t.rectProps),s}function qw(t,e,i){return t.cullMethod=zl(),s}function Bw(t){Xw(),this.vertexAttributes=t;var i,n,r=this.vertexAttributes,o=C;for(i=r.iterator();i.hasNext();){var s=i.next();o=o.multiply(e.Long.fromInt(31)).add(e.Long.fromInt(s.hashCode()))}this.attributeHash=o,this.vertexSizeF=0,this.byteStrideF=0,this.vertexSizeI=0,this.byteStrideI=0,this.attributeByteOffsets=null,this.primitiveType=ez(),this.usage=oz(),this.numVertices=0,this.dataF=null,this.dataI=null,this.indices=zN(1e3),this.bounds=new O$,this.vertexIt=null,this.isRebuildBoundsOnSync=!1,this.hasChanged=!0,this.isBatchUpdate=!1;var a=0,l=0,u=z();for(n=this.vertexAttributes.iterator();n.hasNext();){var p=n.next();if(p.type===as()||p.type===ls()||p.type===us())throw V("Matrix types are not supported as vertex attributes");if(p.type.isInt){var c=l;u.put_xwzc9p$(p,c),l=l+p.type.byteSize|0}else{var h=a;u.put_xwzc9p$(p,h),a=a+p.type.byteSize|0}}this.attributeByteOffsets=u,this.vertexSizeF=a/4|0,this.byteStrideF=a,this.vertexSizeI=l/4|0,this.byteStrideI=l,this.dataF=kN(1e3*a|0),this.dataI=zN(1e3*l|0),this.vertexIt=new gS(this,0)}function Fw(){Kw=this,this.INITIAL_SIZE_0=1e3,this.GROW_FACTOR_0=2}Pw.$metadata$={kind:$,simpleName:"ReflectionMapPass",interfaces:[pa]},Lw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},Lw.$metadata$={kind:$,simpleName:"RgbeDecoder",interfaces:[ua]},Object.defineProperty(Bw.prototype,"numIndices",{configurable:!0,get:function(){return this.indices.position}}),Object.defineProperty(Bw.prototype,"numPrimitives",{configurable:!0,get:function(){return this.numIndices/this.primitiveType.nVertices|0}}),Object.defineProperty(Bw.prototype,"lastIndex",{configurable:!0,get:function(){return this.numVertices-1|0}}),Bw.prototype.getMorphAttributes=function(){var t,e=M();for(t=this.vertexAttributes.iterator();t.hasNext();){var i=t.next();(u(i.name,ds().NORMALS.name+"_")||u(i.name,ds().POSITIONS.name+"_")||u(i.name,ds().TANGENTS.name+"_"))&&e.add_11rb$(i)}return e},Bw.prototype.isEmpty=function(){return 0===this.numVertices||0===this.numIndices},Bw.prototype.increaseDataSizeF_0=function(t){var e=kN(t);this.dataF.flip(),e.put_he122g$(this.dataF),this.dataF=e},Bw.prototype.increaseDataSizeI_0=function(t){var e=zN(t);this.dataI.flip(),e.put_7hqxcs$(this.dataI),this.dataI=e},Bw.prototype.increaseIndicesSize_0=function(t){var e=zN(t);this.indices.flip(),e.put_7hqxcs$(this.indices),this.indices=e},Bw.prototype.checkBufferSizes_za3lpa$=function(t){if(void 0===t&&(t=1),this.dataF.remaining<e.imul(this.vertexSizeF,t)){var i=F(ot(this.dataF.capacity*Xw().GROW_FACTOR_0)),n=e.imul(this.numVertices+t|0,this.vertexSizeF);this.increaseDataSizeF_0(A.max(i,n))}if(this.dataI.remaining<e.imul(this.vertexSizeI,t)){var r=F(ot(this.dataI.capacity*Xw().GROW_FACTOR_0)),o=e.imul(this.numVertices+t|0,this.vertexSizeI);this.increaseDataSizeI_0(A.max(r,o))}},Bw.prototype.checkIndexSize_za3lpa$=function(t){if(void 0===t&&(t=1),this.indices.remaining<t){var e=F(ot(this.indices.capacity*Xw().GROW_FACTOR_0)),i=this.numVertices+t|0;this.increaseIndicesSize_0(A.max(e,i))}},Bw.prototype.hasAttribute_nm2vx5$=function(t){return this.vertexAttributes.contains_11rb$(t)},Bw.prototype.batchUpdate_gj3khe$=K("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.batchUpdate_gj3khe$",(function(t,e){void 0===t&&(t=!1);var i=this.isBatchUpdate;this.isBatchUpdate=!0,e(this),this.hasChanged=!0,this.isBatchUpdate=i,t&&this.rebuildBounds()})),Bw.prototype.addVertex_tohjaj$=K("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.addVertex_tohjaj$",(function(t){var e,i,n;this.checkBufferSizes_za3lpa$(),e=this.vertexSizeF;for(var r=1;r<=e;r++)this.dataF.plusAssign_mx4ult$(0);i=this.vertexSizeI;for(var o=1;o<=i;o++)this.dataI.plusAssign_za3lpa$(0);return this.vertexIt.index=(n=this.numVertices,this.numVertices=n+1|0,n),t(this.vertexIt),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices-1|0})),Bw.prototype.addVertex_lv7vxo$=function(t,e,i,n){var r,o,s;void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.checkBufferSizes_za3lpa$(),r=this.vertexSizeF;for(var a=1;a<=r;a++)this.dataF.plusAssign_mx4ult$(0);o=this.vertexSizeI;for(var l=1;l<=o;l++)this.dataI.plusAssign_za3lpa$(0);this.vertexIt.index=(s=this.numVertices,this.numVertices=s+1|0,s);var u=this.vertexIt;return u.position.set_czzhiu$(t),null!=e&&u.normal.set_czzhiu$(e),null!=i&&u.color.set_czzhhz$(i),null!=n&&u.texCoord.set_czzhjp$(n),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices-1|0},Bw.prototype.addGeometry_r7nl2o$=function(t){var e,i,n=this.numVertices;this.checkBufferSizes_za3lpa$(t.numVertices),e=t.numVertices;for(var r=0;r<e;r++){var o,s,a;this.checkBufferSizes_za3lpa$(),o=this.vertexSizeF;for(var l=1;l<=o;l++)this.dataF.plusAssign_mx4ult$(0);s=this.vertexSizeI;for(var u=1;u<=s;u++)this.dataI.plusAssign_za3lpa$(0);this.vertexIt.index=(a=this.numVertices,this.numVertices=a+1|0,a);var p=this.vertexIt;t.vertexIt.index=r,p.set_fs4kvg$(t.vertexIt),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices}this.checkIndexSize_za3lpa$(t.indices.position),i=t.indices.position;for(var c=0;c<i;c++)this.addIndex_za3lpa$(n+t.indices.get_za3lpa$(c)|0)},Bw.prototype.addIndex_za3lpa$=function(t){0===this.indices.remaining&&this.checkIndexSize_za3lpa$(),this.indices.plusAssign_za3lpa$(t)},Bw.prototype.addIndices_pmhfmb$=function(t){for(var e=0;e!==t.length;++e)this.addIndex_za3lpa$(t[e]);this.hasChanged=!0},Bw.prototype.addIndices_pqoyrt$=function(t){for(var e=0;e!==t.size;++e)this.addIndex_za3lpa$(t.get_za3lpa$(e))},Bw.prototype.addTriIndices_qt1dr2$=function(t,e,i){this.addIndex_za3lpa$(t),this.addIndex_za3lpa$(e),this.addIndex_za3lpa$(i)},Bw.prototype.rebuildBounds=function(){var t;this.bounds.clear(),t=this.numVertices;for(var e=0;e<t;e++)this.vertexIt.index=e,this.bounds.add_czzhiu$(this.vertexIt.position)},Bw.prototype.clear=function(){this.numVertices=0,this.dataF.position=0,this.dataF.limit=this.dataF.capacity,this.dataI.position=0,this.dataI.limit=this.dataI.capacity,this.indices.position=0,this.indices.limit=this.indices.capacity,this.hasChanged=!0},Bw.prototype.clearIndices=function(){this.indices.position=0,this.indices.limit=this.indices.capacity},Bw.prototype.shrinkIndices_za3lpa$=function(t){if(t>this.indices.position)throw cn("new size must be less (or equal) than old size");this.indices.position=t,this.indices.limit=this.indices.capacity},Bw.prototype.shrinkVertices_za3lpa$=function(t){if(t>this.numVertices)throw cn("new size must be less (or equal) than old size");this.numVertices=t,this.dataF.position=e.imul(t,this.vertexSizeF),this.dataF.limit=this.dataF.capacity,this.dataI.position=e.imul(t,this.vertexSizeI),this.dataI.limit=this.dataI.capacity},Bw.prototype.get_za3lpa$=function(t){if(t<0||t>=(this.dataF.capacity/this.vertexSizeF|0))throw cn("Vertex index out of bounds: "+t);return new gS(this,t)},Bw.prototype.forEach_tohjaj$=K("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.forEach_tohjaj$",(function(t){var e;e=this.numVertices;for(var i=0;i<e;i++)this.vertexIt.index=i,t(this.vertexIt)})),Bw.prototype.removeDegeneratedTriangles=function(){var t,e,i,n,r=this.get_za3lpa$(0),o=this.get_za3lpa$(1),s=this.get_za3lpa$(2),a=Mr(),l=Mr(),u=new Int32Array(this.numIndices),p=0;t=this.numIndices;for(var c=0;c<t;c+=3){r.index=this.indices.get_za3lpa$(c),o.index=this.indices.get_za3lpa$(c+1|0),s.index=this.indices.get_za3lpa$(c+2|0),o.position.subtract_2gj7b4$(r.position,a).norm(),s.position.subtract_2gj7b4$(r.position,l).norm();var h=Vn(r.position,o.position,s.position),d=!(null!=a&&a.equals(Er().ZERO)||null!=l&&l.equals(Er().ZERO));if(d){var f=a.times_czzhiu$(l);d=1!==A.abs(f)}d&&!Ie(h)&&h>0&&(u[(e=p,p=e+1|0,e)]=this.indices.get_za3lpa$(c),u[(i=p,p=i+1|0,i)]=this.indices.get_za3lpa$(c+1|0),u[(n=p,p=n+1|0,n)]=this.indices.get_za3lpa$(c+2|0))}p!==this.numIndices&&(this.indices.clear(),this.indices.put_nd5v6f$(u,0,p))},Bw.prototype.generateNormals=function(){var t,i,n;if(this.vertexAttributes.contains_11rb$(ds().NORMALS)){if(this.primitiveType!==ez())throw cn("Normal generation is only supported for triangle meshes");var r=this.get_za3lpa$(0),o=this.get_za3lpa$(1),s=this.get_za3lpa$(2),a=Mr(),l=Mr(),u=Mr();t=this.numVertices;for(var p=0;p<t;p++)r.index=p,r.normal.set_czzhiu$(Er().ZERO);i=this.numIndices;for(var c=0;c<i;c+=3){if(r.index=this.indices.get_za3lpa$(c),o.index=this.indices.get_za3lpa$(c+1|0),s.index=this.indices.get_za3lpa$(c+2|0),r.index>this.numVertices||o.index>this.numVertices||s.index>this.numVertices){var h=qN.Log,d=vz.ERROR,f=e.getKClassFromExpression(this).simpleName;d.level>=h.level.level&&h.printer(d,f,"index to large "+r.index+", "+o.index+", "+s.index+", sz: "+this.numVertices)}o.position.subtract_2gj7b4$(r.position,a).norm(),s.position.subtract_2gj7b4$(r.position,l).norm();var _=Vn(r.position,o.position,s.position);if(a.cross_2gj7b4$(l,u).norm().scale_mx4ult$(_),null!=u&&u.equals(Er().ZERO)||Ie(u.x)||Ie(u.y)||Ie(u.z)){var m=qN.Log,$=vz.WARN,y=e.getKClassFromExpression(this).simpleName;$.level>=m.level.level&&m.printer($,y,"generate normals: degenerated triangle, a = "+_+", e1 = "+a+", e2 = "+l)}else r.normal.plusAssign_czzhiu$(u),o.normal.plusAssign_czzhiu$(u),s.normal.plusAssign_czzhiu$(u)}n=this.numVertices;for(var v=0;v<n;v++)r.index=v,r.normal.norm()}},Bw.prototype.generateTangents_mx4ult$=function(t){var i,n,r;if(void 0===t&&(t=1),this.vertexAttributes.contains_11rb$(ds().TANGENTS)){if(this.primitiveType!==ez())throw cn("Normal generation is only supported for triangle meshes");var o=this.get_za3lpa$(0),s=this.get_za3lpa$(1),a=this.get_za3lpa$(2),l=Mr(),u=Mr(),p=Mr();i=this.numVertices;for(var c=0;c<i;c++)o.index=c,o.tangent.set_2qa7tb$(Er().ZERO);n=this.numIndices;for(var h=0;h<n;h+=3){o.index=this.indices.get_za3lpa$(h),s.index=this.indices.get_za3lpa$(h+1|0),a.index=this.indices.get_za3lpa$(h+2|0),s.position.subtract_2gj7b4$(o.position,l),a.position.subtract_2gj7b4$(o.position,u);var d=s.texCoord.x-o.texCoord.x,f=s.texCoord.y-o.texCoord.y,_=a.texCoord.x-o.texCoord.x,m=a.texCoord.y-o.texCoord.y,$=1/(d*m-_*f);if(Ie($)){var y=qN.Log,v=vz.WARN,g=e.getKClassFromExpression(this).simpleName;v.level>=y.level.level&&y.printer(v,g,"generate tangents: degenerated triangle, e1 = "+l+", e2 = "+u)}else p.x=$*(m*l.x-f*u.x),p.y=$*(m*l.y-f*u.y),p.z=$*(m*l.z-f*u.z),o.tangent.plusAssign_czzhhz$(eo(p,0)),s.tangent.plusAssign_czzhhz$(eo(p,0)),a.tangent.plusAssign_czzhhz$(eo(p,0))}r=this.numVertices;for(var b=0;b<r;b++)o.index=b,0===o.normal.sqrLength()&&o.normal.set_czzhiu$(Er().Y_AXIS),0!==o.tangent.sqrLength()?(o.tangent.norm(),o.tangent.w=t):o.tangent.set_2qa7tb$(Er().X_AXIS)}},Fw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Uw,Vw,Gw,Hw,Ww,Kw=null;function Xw(){return null===Kw&&new Fw,Kw}function Yw(t,e){return e=e||Object.create(Bw.prototype),Bw.call(e,Le(t)),e}function Zw(t,e,i){P.call(this),this.nVertices=i,this.name$=t,this.ordinal$=e}function Jw(){Jw=function(){},Uw=new Zw("LINES",0,2),Vw=new Zw("POINTS",1,1),Gw=new Zw("TRIANGLES",2,3)}function Qw(){return Jw(),Uw}function tz(){return Jw(),Vw}function ez(){return Jw(),Gw}function iz(t,e){P.call(this),this.name$=t,this.ordinal$=e}function nz(){nz=function(){},Hw=new iz("DYNAMIC",0),Ww=new iz("STATIC",1)}function rz(){return nz(),Hw}function oz(){return nz(),Ww}Bw.$metadata$={kind:$,simpleName:"IndexedVertexList",interfaces:[]},Zw.$metadata$={kind:$,simpleName:"PrimitiveType",interfaces:[P]},Zw.values=function(){return[Qw(),tz(),ez()]},Zw.valueOf_61zpoe$=function(t){switch(t){case"LINES":return Qw();case"POINTS":return tz();case"TRIANGLES":return ez();default:T("No enum constant de.fabmax.kool.util.PrimitiveType."+t)}},iz.$metadata$={kind:$,simpleName:"Usage",interfaces:[P]},iz.values=function(){return[rz(),oz()]},iz.valueOf_61zpoe$=function(t){switch(t){case"DYNAMIC":return rz();case"STATIC":return oz();default:T("No enum constant de.fabmax.kool.util.Usage."+t)}};var sz,az,lz,uz,pz,cz,hz=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function dz(t){void 0===t&&(t=null),ef.call(this,t),this.instances=M(),this.lods_0=M()}function fz(t){return t.maxDistance}function _z(t){return t.camDistance}function mz(t,e,i){this.$outer=t,this.mesh=e,this.maxDistance=i,this.instances=M()}function $z(){this.instanceModelMat=new En,this.center=Mr(),this.radius=1,this.globalRadius_jgtua1$_0=0,this.camDistance_n2u3ce$_0=0,this.isInFrustum_77t0d9$_0=!1,this.globalCenterMut_46d76q$_0=Mr(),this.globalExtentMut_q2k453$_0=Mr()}function yz(){Nz=this,this.DEFAULT_PRINTER=Cz,this.level=xz(),this.printer=this.DEFAULT_PRINTER}function vz(t,e,i,n){P.call(this),this.level=i,this.indicator=E(n),this.name$=t,this.ordinal$=e}function gz(){gz=function(){},sz=new vz("TRACE",0,0,84),az=new vz("DEBUG",1,1,68),lz=new vz("INFO",2,2,73),uz=new vz("WARN",3,3,87),pz=new vz("ERROR",4,4,69),cz=new vz("OFF",5,5,120)}function bz(){return gz(),sz}function xz(){return gz(),az}function wz(){return gz(),lz}function zz(){return gz(),uz}function kz(){return gz(),pz}function Sz(){return gz(),cz}function Cz(t,e,i){return jt(String.fromCharCode(O(t.indicator))+"/"+Ct(e)+": "+i),s}Object.defineProperty(dz.prototype,"isFrustumChecked",{configurable:!0,get:function(){return!1},set:function(t){}}),dz.prototype.getInstanceCount_za3lpa$=function(t){return t<this.lods_0.size?this.lods_0.get_za3lpa$(t).instances.size:0},dz.prototype.addLod_od45r7$=function(t,e){var i=this.lods_0,n=new mz(this,t,e);i.add_11rb$(n);var r=this.lods_0;r.size>1&&mt(r,new $t(hz(fz))),t.parent=this},dz.prototype.update_kma0q5$=function(t){var e,i,n;ef.prototype.update_kma0q5$.call(this,t),e=this.lods_0;for(var r=0;r!==e.size;++r)this.lods_0.get_za3lpa$(r).instances.clear();var o=t.camera;i=this.instances;for(var s=0;s!==i.size;++s){var a=this.instances.get_za3lpa$(s);if(a.update_l2cg23$(this,o,t.ctx),a.isInFrustum)for(var l=bt(this.lods_0);l>=0;l--)if(0===l||a.camDistance>this.lods_0.get_za3lpa$(l-1|0).maxDistance){this.lods_0.get_za3lpa$(l).instances.add_11rb$(a);break}}n=this.lods_0;for(var u=0;u!==n.size;++u){var p=this.lods_0.get_za3lpa$(u);if(p.instances.size>p.maxInstances){var c=p.instances;for(c.size>1&&mt(c,new $t(hz(_z)));p.instances.size>p.maxInstances;){var h=p.instances.removeAt_za3lpa$(bt(p.instances));u<bt(this.lods_0)&&this.lods_0.get_za3lpa$(u+1|0).instances.add_11rb$(h)}}p.updateInstances_2shagh$(u,t.ctx),p.mesh.update_kma0q5$(t)}},dz.prototype.collectDrawCommands_kma0q5$=function(t){var e;ef.prototype.collectDrawCommands_kma0q5$.call(this,t),e=this.lods_0;for(var i=0;i!==e.size;++i)this.lods_0.get_za3lpa$(i).mesh.collectDrawCommands_kma0q5$(t)},dz.prototype.dispose_aemszp$=function(t){var e;ef.prototype.dispose_aemszp$.call(this,t),e=this.lods_0;for(var i=0;i!==e.size;++i)this.lods_0.get_za3lpa$(i).mesh.dispose_aemszp$(t)},Object.defineProperty(mz.prototype,"maxInstances",{configurable:!0,get:function(){var t,e;return null!=(e=null!=(t=this.mesh.instances)?t.maxInstances:null)?e:0}}),mz.prototype.updateInstances_2shagh$=function(t,e){var i,n;if(null!=(i=this.mesh.instances))for(i.clear(),n=this.instances.iterator();n.hasNext();)n.next().addInstanceData_bgc5cs$(t,i,e)},mz.$metadata$={kind:$,simpleName:"Lod",interfaces:[]},Object.defineProperty($z.prototype,"globalCenter",{configurable:!0,get:function(){return this.globalCenterMut_46d76q$_0}}),Object.defineProperty($z.prototype,"globalRadius",{configurable:!0,get:function(){return this.globalRadius_jgtua1$_0},set:function(t){this.globalRadius_jgtua1$_0=t}}),Object.defineProperty($z.prototype,"camDistance",{configurable:!0,get:function(){return this.camDistance_n2u3ce$_0},set:function(t){this.camDistance_n2u3ce$_0=t}}),Object.defineProperty($z.prototype,"isInFrustum",{configurable:!0,get:function(){return this.isInFrustum_77t0d9$_0},set:function(t){this.isInFrustum_77t0d9$_0=t}}),$z.prototype.update_l2cg23$=function(t,e,i){this.globalCenterMut_46d76q$_0.set_czzhiu$(this.center),this.globalExtentMut_q2k453$_0.set_czzhiu$(this.center).x=this.globalExtentMut_q2k453$_0.set_czzhiu$(this.center).x+this.radius,this.instanceModelMat.transform_w1lst9$(this.globalCenterMut_46d76q$_0),this.instanceModelMat.transform_w1lst9$(this.globalExtentMut_q2k453$_0),t.modelMat.transform_w1lst9$(this.globalCenterMut_46d76q$_0),t.modelMat.transform_w1lst9$(this.globalExtentMut_q2k453$_0),this.globalRadius=this.globalCenterMut_46d76q$_0.distance_czzhiu$(this.globalExtentMut_q2k453$_0),this.isInFrustum=e.isInFrustum_2qa7tb$(this.globalCenterMut_46d76q$_0,this.globalRadius),this.camDistance=e.globalPos.distance_czzhiu$(this.globalCenterMut_46d76q$_0)},$z.prototype.addInstanceData_bgc5cs$=function(t,e,i){e.checkBufferSize_za3lpa$();var n=e.dataF.position;e.dataF.put_q3cr5i$(this.instanceModelMat.matrix);var r=e.dataF.position-n|0;if(r!==e.instanceSizeF)throw gt("Expected data to grow by "+e.instanceSizeF+" elements, instead it grew by "+r);e.numInstances=e.numInstances+1|0,e.hasChanged=!0},$z.$metadata$={kind:$,simpleName:"Instance",interfaces:[]},dz.$metadata$={kind:$,simpleName:"InstancedLodController",interfaces:[ef]},yz.prototype.tExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.tExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.TRACE,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),yz.prototype.t_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.t_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.TRACE;n.level>=this.level.level&&this.printer(n,t,i())}}))),yz.prototype.dExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.dExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.DEBUG,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),yz.prototype.d_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.d_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.DEBUG;n.level>=this.level.level&&this.printer(n,t,i())}}))),yz.prototype.iExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.iExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.INFO,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),yz.prototype.i_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.i_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.INFO;n.level>=this.level.level&&this.printer(n,t,i())}}))),yz.prototype.wExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.wExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.WARN,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),yz.prototype.w_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.w_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.WARN;n.level>=this.level.level&&this.printer(n,t,i())}}))),yz.prototype.eExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.eExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.ERROR,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),yz.prototype.e_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.e_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.ERROR;n.level>=this.level.level&&this.printer(n,t,i())}}))),yz.prototype.logExt_askb8u$=K("kool-kool-core.de.fabmax.kool.util.Log.logExt_askb8u$",(function(t,i,n){var r=e.getKClassFromExpression(i).simpleName;t.level>=this.level.level&&this.printer(t,r,n())})),yz.prototype.log_f0yxhs$=K("kool-kool-core.de.fabmax.kool.util.Log.log_f0yxhs$",(function(t,e,i){t.level>=this.level.level&&this.printer(t,e,i())})),vz.$metadata$={kind:$,simpleName:"Level",interfaces:[P]},vz.values=function(){return[bz(),xz(),wz(),zz(),kz(),Sz()]},vz.valueOf_61zpoe$=function(t){switch(t){case"TRACE":return bz();case"DEBUG":return xz();case"INFO":return wz();case"WARN":return zz();case"ERROR":return kz();case"OFF":return Sz();default:T("No enum constant de.fabmax.kool.util.Log.Level."+t)}},yz.$metadata$={kind:y,simpleName:"Log",interfaces:[]};var Nz=null;function Ez(t){this.geometry=t,this.transform=new Mn,this.color=V$().GRAY,this.vertexModFun=null,this.hasNormals_c51zdn$_0=this.geometry.hasAttribute_nm2vx5$(ds().NORMALS),this.tmpPos_5ud41y$_0=Mr(),this.tmpNrm_5ueby3$_0=Mr(),this.tmpUv_b9nk9x$_0=pr(),this.circleProps=new Tz,this.cubeProps=new Dz,this.cylinderProps=new qz,this.gridProps=new Oz,this.rectProps=new Lz,this.sphereProps=new Iz,this.textProps=null}function Pz(){this.x=.5257311,this.z=.8506508,this.n=0,this.verts=b([new Sr(-this.x,this.n,this.z),new Sr(this.x,this.n,this.z),new Sr(-this.x,this.n,-this.z),new Sr(this.x,this.n,-this.z),new Sr(this.n,this.z,this.x),new Sr(this.n,this.z,-this.x),new Sr(this.n,-this.z,this.x),new Sr(this.n,-this.z,-this.x),new Sr(this.z,this.x,this.n),new Sr(-this.z,this.x,this.n),new Sr(this.z,-this.x,this.n),new Sr(-this.z,-this.x,this.n)]),this.uvVerts=M(),this.faces=b([4,0,1,9,0,4,5,9,4,5,4,8,8,4,1,10,8,1,3,8,10,3,5,8,2,5,3,7,2,3,10,7,3,6,7,10,11,7,6,0,11,6,1,0,6,1,6,10,0,9,11,11,9,2,2,9,5,2,7,11]),this.midVerts_0=z()}function Tz(){this.radius=1,this.steps=20,this.center=Mr(),this.startDeg=0,this.sweepDeg=360,this.uvCenter=pr(),this.uvRadius=0}function Oz(){Rz(),this.center=Mr(),this.xDir=Mr(),this.yDir=Mr(),this.sizeX=0,this.sizeY=0,this.stepsX=0,this.stepsY=0,this.heightFun=Rz().ZERO_HEIGHT,this.defaults()}function Mz(){Az=this,this.ZERO_HEIGHT=jz}function jz(t,e){return 0}Ez.prototype.vertex_n440gp$$default=function(t,e,i){var n,r,o,s=this.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);r=s.vertexSizeI;for(var l=1;l<=r;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(o=s.numVertices,s.numVertices=o+1|0,o);var u,p=s.vertexIt;return p.position.set_czzhiu$(t),p.normal.set_czzhiu$(e),p.texCoord.set_czzhjp$(i),p.color.set_czzhhz$(this.color),this.transform.transform_w1lst9$(p.position),this.hasNormals_c51zdn$_0&&0!==p.normal.sqrLength()&&(this.transform.transform_w1lst9$(p.normal,0),p.normal.norm()),null!=(u=this.vertexModFun)&&u(p),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0,s.numVertices-1|0},Ez.prototype.vertex_n440gp$=function(t,e,i,n){return void 0===i&&(i=ar().ZERO),n?n(t,e,i):this.vertex_n440gp$$default(t,e,i)},Ez.prototype.withTransform_v2sixm$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.withTransform_v2sixm$",(function(t){this.transform.push(),t(this),this.transform.pop()})),Ez.prototype.withColor_2f8443$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.withColor_2f8443$",(function(t,e){var i=this.color;null!=t&&(this.color=t),e(this),this.color=i})),Ez.prototype.clear=function(){this.geometry.clear(),this.identity()},Ez.prototype.identity=function(){return this.transform.setIdentity()},Ez.prototype.translate_czzhiu$=function(t){return this.transform.translate_y2kzbl$(t.x,t.y,t.z)},Ez.prototype.translate_y2kzbl$=function(t,e,i){return this.transform.translate_y2kzbl$(t,e,i)},Ez.prototype.rotate_ad55pp$=function(t,e){return this.transform.rotate_ad55pp$(t,e)},Ez.prototype.rotate_7b5o5w$=function(t,e,i,n){return this.transform.rotate_7b5o5w$(t,e,i,n)},Ez.prototype.scale_y2kzbl$=function(t,e,i){return this.transform.scale_y2kzbl$(t,e,i)},Ez.prototype.setCoordSystem_xq1mqt$=function(t,e,i,n){void 0===n&&(n=null);var r=n;null==r&&(r=Po(e,i)),this.transform.setIdentity(),this.transform.set_n0b4r3$(0,0,e.x),this.transform.set_n0b4r3$(1,0,e.y),this.transform.set_n0b4r3$(2,0,e.z),this.transform.set_n0b4r3$(0,1,i.x),this.transform.set_n0b4r3$(1,1,i.y),this.transform.set_n0b4r3$(2,1,i.z),this.transform.set_n0b4r3$(0,2,r.x),this.transform.set_n0b4r3$(1,2,r.y),this.transform.set_n0b4r3$(2,2,r.z),this.transform.set_n0b4r3$(0,3,t.x),this.transform.set_n0b4r3$(1,3,t.y),this.transform.set_n0b4r3$(2,3,t.z)},Ez.prototype.profile_qgzkbv$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.profile_qgzkbv$",X((function(){var e=t.de.fabmax.kool.util.Profile;return function(t){var i=new e;return t(i),i}}))),Ez.prototype.multiShape_itjjuo$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.multiShape_itjjuo$",X((function(){var e=t.de.fabmax.kool.util.MultiShape;return function(t,i){var n=new e;return t.shapes.add_11rb$(n),i(n),n}}))),Ez.prototype.simpleShape_ggyesq$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.simpleShape_ggyesq$",X((function(){var e=t.de.fabmax.kool.util.SimpleShape;return function(t,i,n){var r=new e(i);return t.shapes.add_11rb$(r),n(r),r}}))),Ez.prototype.circleShape_k80pjh$=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=40);var n=new dk(!0);t.shapes.add_11rb$(n);for(var r=0;r<i;r++){var o=2*U.PI*r/i;n.xy_dleff0$(A.cos(o)*e,A.sin(o)*e)}return n},Ez.prototype.sample_afatab$=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i)},Ez.prototype.sampleAndFillBottom_afatab$=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i),t.fillBottom_84rojv$(this)},Ez.prototype.fillBottom_pvgy1j$=function(t){t.fillBottom_84rojv$(this)},Ez.prototype.sampleAndFillTop_afatab$=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i),t.fillTop_84rojv$(this)},Ez.prototype.fillTop_pvgy1j$=function(t){t.fillTop_84rojv$(this)},Ez.prototype.circle_5yji8k$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.circle_5yji8k$",(function(t){t(this.circleProps.defaults()),this.circle_59f34t$(this.circleProps)})),Ez.prototype.circle_59f34t$=function(t){var e,i=0,n=this.vertex_n440gp$(t.center,Er().Z_AXIS,t.uvCenter);e=t.steps;for(var r=0;r<=e;r++){var o=(t.startDeg+t.sweepDeg*r/t.steps)*PN.DEG_2_RAD,s=A.cos(o),a=A.sin(o),l=t.center.x+t.radius*s,u=t.center.y+t.radius*a;this.tmpUv_b9nk9x$_0.set_dleff0$(s,-a).scale_mx4ult$(t.uvRadius).add_czzhjp$(t.uvCenter);var p=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(l,u,t.center.z),Er().Z_AXIS,this.tmpUv_b9nk9x$_0);r>0&&this.geometry.addTriIndices_qt1dr2$(n,i,p),i=p}},Ez.prototype.uvSphere_ybunu9$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.uvSphere_ybunu9$",(function(t){t(this.sphereProps.uvDefaults()),this.uvSphere_mojs8w$(this.sphereProps)})),Ez.prototype.uvSphere_mojs8w$=function(t){var e,i,n,r,o=t.steps/2|0,s=A.max(o,4),a=new Int32Array(1+(2*s|0)|0),l=new Int32Array(1+(2*s|0)|0),u=U.PI*(s-1|0)/s,p=u,c=A.sin(p)*t.radius,h=u,d=A.cos(h)*t.radius;e=2*s|0;for(var f=0;f<=e;f++){var _=U.PI*f/s,m=-_,$=A.cos(m)*c,y=-_,v=A.sin(y)*c,g=t.texCoordGenerator(u,_);if(l[f]=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$($,d,v).add_czzhiu$(t.center),this.tmpNrm_5ueby3$_0.set_y2kzbl$($,d,v).scale_mx4ult$(1/t.radius),g),f>0){g=t.texCoordGenerator(U.PI,_),this.tmpPos_5ud41y$_0.set_y2kzbl$(t.center.x,t.center.y-t.radius,t.center.z);var b=this.vertex_n440gp$(this.tmpPos_5ud41y$_0,Er().NEG_Y_AXIS,g);this.geometry.addTriIndices_qt1dr2$(b,l[f],l[f-1|0])}}i=s-1|0;for(var x=2;x<=i;x++){var w=a;a=l,l=w;var z=u=U.PI*(s-x|0)/s;c=A.sin(z)*t.radius;var k=u;d=A.cos(k)*t.radius,n=2*s|0;for(var S=0;S<=n;S++){var C=U.PI*S/s,N=-C,E=A.cos(N)*c,P=-C,T=A.sin(P)*c,O=t.texCoordGenerator(u,C);l[S]=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(E,d,T).add_czzhiu$(t.center),this.tmpNrm_5ueby3$_0.set_y2kzbl$(E,d,T).scale_mx4ult$(1/t.radius),O),S>0&&(this.geometry.addTriIndices_qt1dr2$(a[S-1|0],l[S],l[S-1|0]),this.geometry.addTriIndices_qt1dr2$(a[S-1|0],a[S],l[S]))}}r=2*s|0;for(var M=1;M<=r;M++){var j=t.texCoordGenerator(0,U.PI*M/s),R=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.center.x,t.center.y+t.radius,t.center.z),Er().Y_AXIS,j);this.geometry.addTriIndices_qt1dr2$(R,l[M-1|0],l[M])}},Ez.prototype.icoSphere_ybunu9$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.icoSphere_ybunu9$",(function(t){t(this.sphereProps.icoDefaults()),this.icoSphere_mojs8w$(this.sphereProps)})),Pz.prototype.getMidVertex_vux9f0$=function(t,e){var i,n=1048576*A.min(t,e)+A.max(t,e),r=this.midVerts_0,o=r.get_11rb$(n);if(null==o){var s=this.verts.size,a=this.verts,l=Ar(this.verts.get_za3lpa$(t)).add_czzhiu$(this.verts.get_za3lpa$(e)).norm();a.add_11rb$(l);var u=s;r.put_xwzc9p$(n,u),i=u}else i=o;return i},Pz.prototype.subdivide=function(){var t,e,i,n,r,o,s,a,l,u,p,c,h,d,f=new Int32Array(4*this.faces.size|0),_=0;for(t=De(I(this.faces),3).iterator();t.hasNext();){var m=t.next(),$=this.faces.get_za3lpa$(m),y=this.faces.get_za3lpa$(m+1|0),v=this.faces.get_za3lpa$(m+2|0),g=this.getMidVertex_vux9f0$($,y),b=this.getMidVertex_vux9f0$(y,v),x=this.getMidVertex_vux9f0$(v,$);f[(e=_,_=e+1|0,e)]=$,f[(i=_,_=i+1|0,i)]=g,f[(n=_,_=n+1|0,n)]=x,f[(r=_,_=r+1|0,r)]=y,f[(o=_,_=o+1|0,o)]=b,f[(s=_,_=s+1|0,s)]=g,f[(a=_,_=a+1|0,a)]=v,f[(l=_,_=l+1|0,l)]=x,f[(u=_,_=u+1|0,u)]=b,f[(p=_,_=p+1|0,p)]=g,f[(c=_,_=c+1|0,c)]=b,f[(h=_,_=h+1|0,h)]=x}for(this.faces.clear(),d=0;d!==f.length;++d){var w=f[d];this.faces.add_11rb$(w)}},Pz.prototype.subdivide_za3lpa$=function(t){var i;if(t<=8)i=t;else{var n=qN.Log,r=vz.WARN,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"clamping too large number of iterations for ico-sphere ("+t+") to 8"),i=8}for(var s=i,a=0;a<s;a++)this.subdivide()},Pz.prototype.generateUvs=function(){var t,e,i=U.PI,n=this.verts,r=w(j(n,10));for(e=n.iterator();e.hasNext();){var o=e.next(),s=r.add_11rb$,a=o.x,l=o.z,u=(A.atan2(a,l)+i)/(2*i),p=o.y;s.call(r,ft(o,new rr(u,A.acos(p)/i)))}var c=qe(r);for(this.uvVerts=c,t=De(I(this.faces),3).iterator();t.hasNext();)for(var h=t.next(),d=0;d<=2;d++){var f=h+d|0,_=h+(d+1|0)%3|0,m=h+(d+2|0)%3|0,$=c.get_za3lpa$(this.faces.get_za3lpa$(f)).second.x,y=c.get_za3lpa$(this.faces.get_za3lpa$(_)).second.x,v=c.get_za3lpa$(this.faces.get_za3lpa$(m)).second.x;if($-y>.5&&$-v>.5){var g=Tr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).first),b=cr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).second);b.x=b.x-1;var x=b;this.faces.set_wxm5ur$(f,c.size);var z=ft(g,x);c.add_11rb$(z)}else if(y-$>.5&&v-$>.5){var k=Tr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).first),S=cr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).second);S.x=S.x+1;var C=S;this.faces.set_wxm5ur$(f,c.size);var N=ft(k,C);c.add_11rb$(N)}}},Pz.$metadata$={kind:$,simpleName:"IcoGenerator",interfaces:[]},Ez.prototype.icoSphere_mojs8w$=function(t){var e,i,n=new Pz;n.subdivide_za3lpa$(t.steps),n.generateUvs();var r=U.PI,o=Mr(),s=Mr(),a=this.geometry.numVertices;for(e=n.uvVerts.iterator();e.hasNext();){var l=e.next();o.set_czzhiu$(l.first).norm(),s.set_czzhiu$(o).scale_mx4ult$(t.radius).add_czzhiu$(t.center);var u=t.texCoordGenerator(l.second.y*r,2*l.second.x*r);this.vertex_n440gp$(s,o,u)}for(i=De(I(n.faces),3).iterator();i.hasNext();){var p=i.next();this.geometry.addTriIndices_qt1dr2$(a+n.faces.get_za3lpa$(p)|0,a+n.faces.get_za3lpa$(1+p|0)|0,a+n.faces.get_za3lpa$(2+p|0)|0)}},Ez.prototype.rect_6h1xlk$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.rect_6h1xlk$",(function(t){t(this.rectProps.defaults()),this.rect_e5k3t5$(this.rectProps)})),Ez.prototype.rect_e5k3t5$=function(t){if(t.fixNegativeSize(),0===t.cornerRadius){var e=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().Z_AXIS,t.texCoordLowerLeft),i=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().Z_AXIS,t.texCoordLowerRight),n=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().Z_AXIS,t.texCoordUpperRight),r=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().Z_AXIS,t.texCoordUpperLeft);this.geometry.addTriIndices_qt1dr2$(e,i,n),this.geometry.addTriIndices_qt1dr2$(e,n,r)}else{var o=t.origin.x,s=t.origin.y,a=t.origin.z,l=t.size.x,u=t.size.y,p=o+t.cornerRadius,c=s+t.cornerRadius,h=l-2*t.cornerRadius,d=u-2*t.cornerRadius,f=Er().Z_AXIS,_=(t.texCoordUpperRight.x-t.texCoordUpperLeft.x)*t.cornerRadius/l,m=(t.texCoordUpperRight.y-t.texCoordLowerRight.y)*t.cornerRadius/u;if(d>0){var $=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(o,c,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(0,m).add_czzhjp$(t.texCoordLowerLeft)),y=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(o+l,c,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(0,m).add_czzhjp$(t.texCoordLowerRight)),v=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(o+l,c+d,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(0,-m).add_czzhjp$(t.texCoordUpperRight)),g=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(o,c+d,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(0,-m).add_czzhjp$(t.texCoordUpperLeft));this.geometry.addTriIndices_qt1dr2$($,y,v),this.geometry.addTriIndices_qt1dr2$($,v,g)}if(h>0){var b=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p,s,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(_,0).add_czzhjp$(t.texCoordLowerLeft)),x=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p+h,s,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(-_,0).add_czzhjp$(t.texCoordLowerRight)),w=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p+h,c,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(-_,m).add_czzhjp$(t.texCoordLowerRight)),z=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p,c,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(_,m).add_czzhjp$(t.texCoordLowerLeft));this.geometry.addTriIndices_qt1dr2$(b,x,w),this.geometry.addTriIndices_qt1dr2$(b,w,z),b=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p,c+d,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(_,-m).add_czzhjp$(t.texCoordUpperLeft)),x=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p+h,c+d,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(-_,-m).add_czzhjp$(t.texCoordUpperRight)),w=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p+h,s+u,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(-_,0).add_czzhjp$(t.texCoordUpperRight)),z=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(p,s+u,a),f,this.tmpUv_b9nk9x$_0.set_dleff0$(_,0).add_czzhjp$(t.texCoordUpperLeft)),this.geometry.addTriIndices_qt1dr2$(b,x,w),this.geometry.addTriIndices_qt1dr2$(b,w,z)}var k=this.circleProps.defaults();k.center.set_y2kzbl$(p+h,c+d,a),k.startDeg=0,k.sweepDeg=90,k.radius=t.cornerRadius,k.steps=t.cornerSteps,k.uvCenter.set_dleff0$(-_,-m).add_czzhjp$(t.texCoordUpperRight),k.uvRadius=_,this.circle_59f34t$(this.circleProps);var S=this.circleProps.defaults();S.center.set_y2kzbl$(p,c+d,a),S.startDeg=90,S.sweepDeg=90,S.radius=t.cornerRadius,S.steps=t.cornerSteps,S.uvCenter.set_dleff0$(_,-m).add_czzhjp$(t.texCoordUpperLeft),S.uvRadius=_,this.circle_59f34t$(this.circleProps);var C=this.circleProps.defaults();C.center.set_y2kzbl$(p,c,a),C.startDeg=180,C.sweepDeg=90,C.radius=t.cornerRadius,C.steps=t.cornerSteps,C.uvCenter.set_dleff0$(_,m).add_czzhjp$(t.texCoordLowerLeft),C.uvRadius=_,this.circle_59f34t$(this.circleProps);var N=this.circleProps.defaults();N.center.set_y2kzbl$(p+h,c,a),N.startDeg=270,N.sweepDeg=90,N.radius=t.cornerRadius,N.steps=t.cornerSteps,N.uvCenter.set_dleff0$(-_,m).add_czzhjp$(t.texCoordLowerRight),N.uvRadius=_,this.circle_59f34t$(this.circleProps)}},Ez.prototype.line_uy9yj5$=function(t,e,i){this.line_s2l86p$(t.x,t.y,e.x,e.y,i)},Ez.prototype.line_s2l86p$=function(t,e,i,n,r){var o=i-t,s=n-e,a=o*o+s*s,l=A.sqrt(a),u=.25*r*o/l,p=.25*r*s/l,c=(o+=u+u)/(l+=.5*r)*r/2,h=(s+=p+p)/l*r/2,d=t-u+h,f=e-p-c,_=i+u+h,m=n+p-c,$=i+u-h,y=n+p+c,v=t-u-h,g=e-p+c,b=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(d,f,0),Er().Z_AXIS),x=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(_,m,0),Er().Z_AXIS),w=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$($,y,0),Er().Z_AXIS),z=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(v,g,0),Er().Z_AXIS);this.geometry.addTriIndices_qt1dr2$(b,x,w),this.geometry.addTriIndices_qt1dr2$(b,w,z)},Ez.prototype.lineArc_b3rrsf$=function(t,e,i,n,r,o,s){void 0===s&&(s=3);for(var a=F(ot(A.abs(r)/s)),l=A.max(1,a),u=r/l,p=n*PN.DEG_2_RAD,c=u*PN.DEG_2_RAD,h=0;h<l;h++){var d=p+c*h,f=d+c,_=t+A.cos(d)*i,m=e+A.sin(d)*i,$=t+A.cos(f)*i,y=e+A.sin(f)*i;this.line_s2l86p$(_,m,$,y,o)}},Ez.prototype.cube_xdlx95$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.cube_xdlx95$",(function(t){t(this.cubeProps.defaults()),this.cube_lhbb6w$(this.cubeProps)})),Ez.prototype.cube_lhbb6w$=function(t){t.fixNegativeSize();var e=t.frontColor,i=this.color;null!=e&&(this.color=e);var n=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(0,1)),r=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(1,1)),o=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(1,0)),s=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(0,0));this.geometry.addTriIndices_qt1dr2$(n,r,o),this.geometry.addTriIndices_qt1dr2$(n,o,s),this.color=i;var a=t.rightColor,l=this.color;null!=a&&(this.color=a);var u=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().X_AXIS,new rr(1,1)),p=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().X_AXIS,new rr(1,0)),c=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().X_AXIS,new rr(0,0)),h=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),Er().X_AXIS,new rr(0,1));this.geometry.addTriIndices_qt1dr2$(u,p,c),this.geometry.addTriIndices_qt1dr2$(u,c,h),this.color=l;var d=t.backColor,f=this.color;null!=d&&(this.color=d);var _=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().NEG_Z_AXIS,new rr(1,0)),m=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().NEG_Z_AXIS,new rr(0,0)),$=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().NEG_Z_AXIS,new rr(0,1)),y=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().NEG_Z_AXIS,new rr(1,1));this.geometry.addTriIndices_qt1dr2$(_,m,$),this.geometry.addTriIndices_qt1dr2$(_,$,y),this.color=f;var v=t.leftColor,g=this.color;null!=v&&(this.color=v);var b=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),Er().NEG_X_AXIS,new rr(1,1)),x=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().NEG_X_AXIS,new rr(1,0)),w=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().NEG_X_AXIS,new rr(0,0)),z=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().NEG_X_AXIS,new rr(0,1));this.geometry.addTriIndices_qt1dr2$(b,x,w),this.geometry.addTriIndices_qt1dr2$(b,w,z),this.color=g;var k=t.topColor,S=this.color;null!=k&&(this.color=k);var C=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Y_AXIS,new rr(0,1)),N=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Y_AXIS,new rr(1,1)),E=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().Y_AXIS,new rr(1,0)),P=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().Y_AXIS,new rr(0,0));this.geometry.addTriIndices_qt1dr2$(C,N,E),this.geometry.addTriIndices_qt1dr2$(C,E,P),this.color=S;var T=t.bottomColor,O=this.color;null!=T&&(this.color=T);var M=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().NEG_Y_AXIS,new rr(0,1)),j=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().NEG_Y_AXIS,new rr(1,1)),A=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),Er().NEG_Y_AXIS,new rr(1,0)),R=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),Er().NEG_Y_AXIS,new rr(0,0));this.geometry.addTriIndices_qt1dr2$(M,j,A),this.geometry.addTriIndices_qt1dr2$(M,A,R),this.color=O},Ez.prototype.cylinder_z0gg86$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.cylinder_z0gg86$",(function(t){t(this.cylinderProps.defaults()),this.cylinder_tnt2h$(this.cylinderProps)})),Ez.prototype.cylinder_tnt2h$=function(t){var e;if(t.fixNegativeSize(),t.bottomFill){this.transform.push(),this.translate_czzhiu$(t.origin),this.rotate_ad55pp$(90,Er().X_AXIS);var i=this.circleProps.defaults();i.steps=t.steps,i.radius=t.bottomRadius,this.circle_59f34t$(this.circleProps),this.transform.pop()}if(t.topFill){this.transform.push(),this.translate_y2kzbl$(t.origin.x,t.origin.y+t.height,t.origin.z),this.rotate_ad55pp$(-90,Er().X_AXIS);var n=this.circleProps.defaults();n.steps=t.steps,n.radius=t.topRadius,this.circle_59f34t$(this.circleProps),this.transform.pop()}var r=t.bottomRadius-t.topRadius,o=r*r+t.height*t.height,s=r/A.sqrt(o),a=90-A.acos(s)*PN.RAD_2_DEG,l=0,u=0;e=t.steps;for(var p=0;p<=e;p++){var c=p*U.PI*2/t.steps,h=A.cos(c),d=p*U.PI*2/t.steps,f=A.sin(d),_=t.origin.x+t.bottomRadius*h,m=t.origin.z+t.bottomRadius*f,$=t.origin.x+t.topRadius*h,y=t.origin.z+t.topRadius*f;this.tmpNrm_5ueby3$_0.set_y2kzbl$(h,0,f).rotate_7b5o5w$(a,f,0,h);var v=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$(_,t.origin.y,m),this.tmpNrm_5ueby3$_0),g=this.vertex_n440gp$(this.tmpPos_5ud41y$_0.set_y2kzbl$($,t.origin.y+t.height,y),this.tmpNrm_5ueby3$_0);p>0&&(this.geometry.addTriIndices_qt1dr2$(l,u,v),this.geometry.addTriIndices_qt1dr2$(u,g,v)),l=v,u=g}},Ez.prototype.grid_vs3byi$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.grid_vs3byi$",(function(t){t(this.gridProps.defaults()),this.grid_gtbnl3$(this.gridProps)})),Ez.prototype.grid_gtbnl3$=function(t){var i,n,r,o,s=-t.sizeX/2,a=-t.sizeY/2,l=t.sizeX/t.stepsX,u=t.sizeY/t.stepsY,p=t.stepsX+1|0;t.xDir.cross_2gj7b4$(t.yDir,this.tmpNrm_5ueby3$_0).norm(),i=t.stepsY;for(var c=0;c<=i;c++){n=t.stepsX;for(var h=0;h<=n;h++){var d=s+h*l,f=a+c*u,_=t.heightFun(h,c);this.tmpPos_5ud41y$_0.set_czzhiu$(t.center),this.tmpPos_5ud41y$_0.x=this.tmpPos_5ud41y$_0.x+(t.xDir.x*d+t.yDir.x*f+this.tmpNrm_5ueby3$_0.x*_),this.tmpPos_5ud41y$_0.y=this.tmpPos_5ud41y$_0.y+(t.xDir.y*d+t.yDir.y*f+this.tmpNrm_5ueby3$_0.y*_),this.tmpPos_5ud41y$_0.z=this.tmpPos_5ud41y$_0.z+(t.xDir.z*d+t.yDir.z*f+this.tmpNrm_5ueby3$_0.z*_);var m=this.vertex_n440gp$(this.tmpPos_5ud41y$_0,Er().ZERO);h>0&&c>0&&(h%2==c%2?(this.geometry.addTriIndices_qt1dr2$(m-p-1|0,m,m-1|0),this.geometry.addTriIndices_qt1dr2$(m-p|0,m,m-p-1|0)):(this.geometry.addTriIndices_qt1dr2$(m-p|0,m,m-1|0),this.geometry.addTriIndices_qt1dr2$(m-p|0,m-1|0,m-p-1|0)))}}var $=this.geometry.numIndices-(6*e.imul(t.stepsX,t.stepsY)|0)|0,y=Mr(),v=Mr(),g=this.geometry.get_za3lpa$(0),b=this.geometry.get_za3lpa$(0),x=this.geometry.get_za3lpa$(0);r=this.geometry.numIndices;for(var w=$;w<r;w+=3)g.index=this.geometry.indices.get_za3lpa$(w),b.index=this.geometry.indices.get_za3lpa$(w+1|0),x.index=this.geometry.indices.get_za3lpa$(w+2|0),b.position.subtract_2gj7b4$(g.position,y).norm(),x.position.subtract_2gj7b4$(g.position,v).norm(),y.cross_2gj7b4$(v,this.tmpNrm_5ueby3$_0).norm(),g.normal.add_czzhiu$(this.tmpNrm_5ueby3$_0),b.normal.add_czzhiu$(this.tmpNrm_5ueby3$_0),x.normal.add_czzhiu$(this.tmpNrm_5ueby3$_0);var z=this.geometry.numVertices-e.imul(t.stepsX+1|0,t.stepsY+1|0)|0;o=this.geometry.numVertices;for(var k=z;k<o;k++)g.index=k,g.normal.norm()},Ez.prototype.geometry_ejqx55$=function(t,e){var i;if(void 0===e&&(e=!1),t.primitiveType!==ez())throw cn("Only triangle geometry can be added");var n,r=this.geometry.numVertices,o=this.color;n=t.numVertices;for(var s=0;s<n;s++){t.vertexIt.index=s;var a=t.vertexIt;e&&(this.color=a.color),this.vertex_n440gp$(a.position,a.normal,a.texCoord)}i=t.numIndices;for(var l=0;l<i;l++)this.geometry.addIndex_za3lpa$(r+t.indices.get_za3lpa$(l)|0);this.color=o},Ez.prototype.text_7d71kc$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.text_7d71kc$",X((function(){var e=t.de.fabmax.kool.util.TextProps;return function(t,i,n){var r,o;if(void 0===i&&(i=0),null!=(r=this.textProps))o=r;else{var s=new e(t);this.textProps=s,o=s}var a=o;a.defaults(),a.font=t,n(a),this.text_s8z339$(a,i)}}))),Ez.prototype.text_s8z339$=function(t,e){var i;if(void 0===e&&(e=0),this.transform.push(),0!==e){var n=e/t.font.charMap.fontProps.sizePts;this.scale_y2kzbl$(n,n,n)}this.translate_czzhiu$(t.origin);var r={v:0};for(i=Be(t.text);i.hasNext();){var o=O(i.next());10===o&&(this.translate_y2kzbl$(0,-t.font.lineSpace,0),r.v=0);var s=t.font.charMap.get_11rb$(E(o));if(null!=s){var a=this.rectProps.defaults();a.origin.set_y2kzbl$(r.v-s.xOffset,s.yBaseline-s.height,0),a.size.set_dleff0$(s.width,s.height),a.texCoordUpperLeft.set_czzhjp$(s.uvMin),a.texCoordUpperRight.set_dleff0$(s.uvMax.x,s.uvMin.y),a.texCoordLowerLeft.set_dleff0$(s.uvMin.x,s.uvMax.y),a.texCoordLowerRight.set_czzhjp$(s.uvMax),this.rect_e5k3t5$(this.rectProps),r.v+=s.advance}}this.transform.pop()},Ez.$metadata$={kind:$,simpleName:"MeshBuilder",interfaces:[]},Tz.prototype.defaults=function(){return this.radius=1,this.steps=20,this.center.set_czzhiu$(Er().ZERO),this.startDeg=0,this.sweepDeg=360,this.zeroTexCoords(),this},Tz.prototype.zeroTexCoords=function(){this.uvCenter.set_czzhjp$(ar().ZERO),this.uvRadius=0},Tz.prototype.fullTexCoords=function(){this.uvCenter.set_dleff0$(.5,.5),this.uvRadius=.5},Tz.$metadata$={kind:$,simpleName:"CircleProps",interfaces:[]},Oz.prototype.defaults=function(){return this.center.set_czzhiu$(Er().ZERO),this.xDir.set_czzhiu$(Er().X_AXIS),this.yDir.set_czzhiu$(Er().NEG_Z_AXIS),this.sizeX=10,this.sizeY=10,this.stepsX=10,this.stepsY=10,this},Mz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Az=null;function Rz(){return null===Az&&new Mz,Az}function Iz(){var t;this.radius=1,this.steps=20,this.center=Mr(),this.uv_0=pr(),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)})}function Lz(){this.cornerRadius=0,this.cornerSteps=8,this.origin=Mr(),this.size=pr(),this.texCoordUpperLeft=pr(),this.texCoordUpperRight=pr(),this.texCoordLowerLeft=pr(),this.texCoordLowerRight=pr(),this.generateTexCoords_mx4ult$(1)}function Dz(){this.origin=Mr(),this.size=Mr(),this.topColor=null,this.bottomColor=null,this.leftColor=null,this.rightColor=null,this.frontColor=null,this.backColor=null}function qz(){this.bottomRadius=1,this.topRadius=1,this.steps=20,this.height=1,this.topFill=!0,this.bottomFill=!0,this.origin=Mr()}function Bz(t){this.font=t,this.text="",this.origin=Mr()}function Fz(t,i){var n;Gz(),void 0===i&&(i=1e3),this.instanceAttributes=t,this.maxInstances=i,this.attributeOffsets=null,this.instanceSizeF=0,this.strideBytesF=0,this.usage=rz(),this.numInstances=0,this.dataF=null,this.hasChanged=!0;var r=0,o=z();for(n=this.instanceAttributes.iterator();n.hasNext();){var s=n.next();if(s.type.isInt)throw V("For now only float attributes are supported");var a=r;o.put_xwzc9p$(s,a),r=r+s.type.byteSize|0}this.attributeOffsets=o,this.instanceSizeF=r/4|0,this.strideBytesF=r,this.dataF=kN(e.imul(r,this.maxInstances))}function Uz(){Vz=this,this.MODEL_MAT=new ps("attrib_model_mat",us())}Oz.$metadata$={kind:$,simpleName:"GridProps",interfaces:[]},Iz.prototype.defaultTexCoordGenerator_0=function(t,e){return this.uv_0.set_dleff0$(e/(2*U.PI),t/U.PI)},Iz.prototype.icoDefaults=function(){var t;return this.radius=1,this.steps=2,this.center.set_czzhiu$(Er().ZERO),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)}),this},Iz.prototype.uvDefaults=function(){var t;return this.radius=1,this.steps=20,this.center.set_czzhiu$(Er().ZERO),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)}),this},Iz.$metadata$={kind:$,simpleName:"SphereProps",interfaces:[]},Object.defineProperty(Lz.prototype,"width",{configurable:!0,get:function(){return this.size.x},set:function(t){this.size.x=t}}),Object.defineProperty(Lz.prototype,"height",{configurable:!0,get:function(){return this.size.y},set:function(t){this.size.y=t}}),Lz.prototype.fixNegativeSize=function(){this.size.x<0&&(this.origin.x=this.origin.x+this.size.x,this.size.x=-this.size.x),this.size.y<0&&(this.origin.y=this.origin.y+this.size.y,this.size.y=-this.size.y)},Lz.prototype.zeroTexCoords=function(){this.generateTexCoords_mx4ult$(0)},Lz.prototype.generateTexCoords_mx4ult$=function(t){void 0===t&&(t=1),this.texCoordUpperLeft.set_dleff0$(0,0),this.texCoordUpperRight.set_dleff0$(t,0),this.texCoordLowerLeft.set_dleff0$(0,t),this.texCoordLowerRight.set_dleff0$(t,t)},Lz.prototype.mirrorTexCoordsX=function(){var t=this.texCoordUpperLeft.x,e=this.texCoordLowerLeft.x;this.texCoordUpperLeft.x=this.texCoordUpperRight.x,this.texCoordUpperRight.x=t,this.texCoordLowerLeft.x=this.texCoordLowerRight.x,this.texCoordLowerRight.x=e},Lz.prototype.mirrorTexCoordsY=function(){var t=this.texCoordUpperLeft.y,e=this.texCoordUpperRight.y;this.texCoordUpperLeft.y=this.texCoordLowerLeft.y,this.texCoordLowerLeft.y=t,this.texCoordUpperRight.y=this.texCoordLowerRight.y,this.texCoordLowerRight.y=e},Lz.prototype.defaults=function(){return this.cornerRadius=0,this.cornerSteps=8,this.origin.set_czzhiu$(Er().ZERO),this.size.set_dleff0$(1,1),this.generateTexCoords_mx4ult$(1),this},Lz.$metadata$={kind:$,simpleName:"RectProps",interfaces:[]},Object.defineProperty(Dz.prototype,"width",{configurable:!0,get:function(){return this.size.x},set:function(t){this.size.x=t}}),Object.defineProperty(Dz.prototype,"height",{configurable:!0,get:function(){return this.size.y},set:function(t){this.size.y=t}}),Object.defineProperty(Dz.prototype,"depth",{configurable:!0,get:function(){return this.size.z},set:function(t){this.size.z=t}}),Dz.prototype.fixNegativeSize=function(){this.size.x<0&&(this.origin.x=this.origin.x+this.size.x,this.size.x=-this.size.x),this.size.y<0&&(this.origin.y=this.origin.y+this.size.y,this.size.y=-this.size.y),this.size.z<0&&(this.origin.z=this.origin.z+this.size.z,this.size.z=-this.size.z)},Dz.prototype.centered=function(){this.origin.x=this.origin.x-this.size.x/2,this.origin.y=this.origin.y-this.size.y/2,this.origin.z=this.origin.z-this.size.z/2},Dz.prototype.colored_6taknv$=function(t){void 0===t&&(t=!0),t?(this.frontColor=V$().MD_RED.toLinear(),this.rightColor=V$().MD_AMBER.toLinear(),this.backColor=V$().MD_INDIGO.toLinear(),this.leftColor=V$().MD_CYAN.toLinear(),this.topColor=V$().MD_PURPLE.toLinear(),this.bottomColor=V$().MD_GREEN.toLinear()):(this.frontColor=V$().MD_RED,this.rightColor=V$().MD_AMBER,this.backColor=V$().MD_INDIGO,this.leftColor=V$().MD_CYAN,this.topColor=V$().MD_PURPLE,this.bottomColor=V$().MD_GREEN)},Dz.prototype.defaults=function(){return this.size.x=1,this.size.y=1,this.size.z=1,this.origin.set_czzhiu$(Er().ZERO),this.topColor=null,this.bottomColor=null,this.leftColor=null,this.rightColor=null,this.frontColor=null,this.backColor=null,this},Dz.$metadata$={kind:$,simpleName:"CubeProps",interfaces:[]},qz.prototype.defaults=function(){return this.bottomRadius=1,this.topRadius=1,this.steps=20,this.height=1,this.topFill=!0,this.bottomFill=!0,this.origin.set_czzhiu$(Er().ZERO),this},qz.prototype.fixNegativeSize=function(){this.height<0&&(this.origin.y=this.origin.y+this.height,this.height=-this.height)},qz.$metadata$={kind:$,simpleName:"CylinderProps",interfaces:[]},Bz.prototype.defaults=function(){return this.text="",this.origin.set_czzhiu$(Er().ZERO),this},Bz.$metadata$={kind:$,simpleName:"TextProps",interfaces:[]},Fz.prototype.checkBufferSize_za3lpa$=function(t){if(void 0===t&&(t=1),(this.numInstances+t|0)>this.maxInstances)throw cn("Maximum number of instances exceeded, create with increased maxInstances")},Fz.prototype.addInstance_u9cxs7$=K("kool-kool-core.de.fabmax.kool.util.MeshInstanceList.addInstance_u9cxs7$",X((function(){var t=e.kotlin.IllegalStateException_init_pdl1vj$;return function(e){this.checkBufferSize_za3lpa$();var i=this.dataF.position;e(this.dataF);var n=this.dataF.position-i|0;if(n!==this.instanceSizeF)throw t("Expected data to grow by "+this.instanceSizeF+" elements, instead it grew by "+n);this.numInstances=this.numInstances+1|0,this.hasChanged=!0}}))),Fz.prototype.clear=function(){this.numInstances=0,this.dataF.position=0,this.dataF.limit=this.dataF.capacity,this.hasChanged=!0},Uz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Vz=null;function Gz(){return null===Vz&&new Uz,Vz}function Hz(t,e){Xz(),this.maxSize_tysx8i$_0=t,this.factory_vv2li5$_0=e,this.recyclingStack_cbi09h$_0=M()}function Wz(){Kz=this,this.DEFAULT_MAX_SIZE=1e4}Fz.$metadata$={kind:$,simpleName:"MeshInstanceList",interfaces:[]},Hz.prototype.get=function(){return this.recyclingStack_cbi09h$_0.isEmpty()?this.factory_vv2li5$_0():this.recyclingStack_cbi09h$_0.removeAt_za3lpa$(bt(this.recyclingStack_cbi09h$_0))},Hz.prototype.recycle_trkh7z$=function(t){if(this.recyclingStack_cbi09h$_0.size<this.maxSize_tysx8i$_0)this.recyclingStack_cbi09h$_0.add_11rb$(t);else{var i=qN.Log,n=vz.DEBUG,r=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,r,"Discarding recycled object "+e.getKClassFromExpression(t)+", stack is full: "+this.recyclingStack_cbi09h$_0.size)}return this},Wz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Kz=null;function Xz(){return null===Kz&&new Wz,Kz}function Yz(t,e){return e=e||Object.create(Hz.prototype),Hz.call(e,1e4,t),e}function Zz(t){Yz(t,this),this.liveObjects_0=M()}function Jz(){this.tStart_0=0,this.reset()}function Qz(){lk=this}function tk(t,e,i){this.vertices=t,this.indices=e,this.normal=i}function ek(t,i){this.outerRing=null,this.innerRings=M(),this.verts=M(),this.vertTree=null,this.edgeTree=null,this.vertInTriTrav=new sk,this.edgeIntersectionTrav=new ak,this.triangles=M(),this.triEdges=z();var n,r,o,s={v:0},a=w(j(t,10));for(n=t.iterator();n.hasNext();){var l,u=n.next();a.add_11rb$(new ok((l=s.v,s.v=l+1|0,l),u))}for(this.outerRing=new nk(a),r=i.iterator();r.hasNext();){var p,c=r.next(),h=this.innerRings,d=w(j(c,10));for(p=c.iterator();p.hasNext();){var f,_=p.next();d.add_11rb$(new ok((f=s.v,s.v=f+1|0,f),_))}var m=new nk(d);h.add_11rb$(m)}for(xt(this.verts,this.outerRing.points),o=this.innerRings.iterator();o.hasNext();){var $=o.next();xt(this.verts,$.points)}var y,v,g,b=M();for(this.addRingEdges_0(b,this.outerRing),y=this.innerRings.iterator();y.hasNext();){var x=y.next();this.addRingEdges_0(b,x)}for(this.edgeTree=new gk(b,Pk()),this.vertTree=new gk(this.verts,Ck()),v=this.innerRings.iterator();v.hasNext();){var k=v.next();this.insertBridgeEdge_0(k)}for(g=this.verts.iterator();g.hasNext();){var S=g.next();this.updateIsEar_0(S)}for(var C=this.verts.size-2|0;C>0;){var N=this.nextEarTip_0();if(null==N){var E=qN.Log,P=vz.ERROR,T=e.getKClassFromExpression(this).simpleName;P.level>=E.level.level&&E.printer(P,T,"Triangulation failed: No more ear clipping candidates");break}this.clip_0(N),C=C-1|0}}function ik(t,i,n){this.v1=t,this.v2=i,this.v3=n,this.k1=e.Long.fromInt(this.v1.index).shiftLeft(32).or(e.Long.fromInt(this.v2.index)),this.k2=e.Long.fromInt(this.v2.index).shiftLeft(32).or(e.Long.fromInt(this.v3.index)),this.k3=e.Long.fromInt(this.v3.index).shiftLeft(32).or(e.Long.fromInt(this.v1.index)),this.a1=uk().interiorAngle_0(this.v3,this.v1,this.v2),this.a2=uk().interiorAngle_0(this.v1,this.v2,this.v3),this.a3=180-this.a1-this.a2;var r=this.a1,o=this.a2,s=this.a3,a=A.min(o,s);this.minA=A.min(r,a),this.longest=0,this.longestK=null;var l=this.v1.distance_czzhiu$(this.v2),u=this.v2.distance_czzhiu$(this.v3),p=this.v3.distance_czzhiu$(this.v1);l>u&&l>p?(this.longest=l,this.longestK=this.k1):u>l&&u>p?(this.longest=u,this.longestK=this.k2):(this.longest=p,this.longestK=this.k3)}function nk(t){this.points=null;var e,i=M();for(e=t.iterator();e.hasNext();){var n=e.next();(i.isEmpty()||n.distance_czzhiu$(B(i))>1e-4)&&i.add_11rb$(n)}B(i).distance_czzhiu$(q(i))<1e-4&&i.removeAt_za3lpa$(bt(i)),this.points=i}function rk(t,e){jk.call(this,t,e),t.nextEdge=this,e.prevEdge=this}function ok(t,e){Tr(e,this),this.index=t,this.interiorAngle=0,this.isEar=!1,this.isOpen=!0,this.prevEdge_gh04s7$_0=this.prevEdge_gh04s7$_0,this.nextEdge_hknyfd$_0=this.nextEdge_hknyfd$_0}function sk(){Xk.call(this),this.v1_tcfd5c$_0=this.v1_tcfd5c$_0,this.v2_tcfd4h$_0=this.v2_tcfd4h$_0,this.v3_tcfd3m$_0=this.v3_tcfd3m$_0,this.min=pr(),this.max=pr(),this.result=M()}function ak(){Xk.call(this),this.edge_ses85y$_0=this.edge_ses85y$_0,this.min=pr(),this.max=pr(),this.result=M()}Hz.$metadata$={kind:$,simpleName:"ObjectRecycler",interfaces:[]},Object.defineProperty(Zz.prototype,"size",{configurable:!0,get:function(){return this.liveObjects_0.size}}),Zz.prototype.get_za3lpa$=function(t){return this.liveObjects_0.get_za3lpa$(t)},Zz.prototype.get=function(){var t=Hz.prototype.get.call(this);return this.liveObjects_0.add_11rb$(t),t},Zz.prototype.recycle_trkh7z$=function(t){return this.liveObjects_0.remove_11rb$(t),Hz.prototype.recycle_trkh7z$.call(this,t)},Zz.prototype.use_oh3mgy$=K("kool-kool-core.de.fabmax.kool.util.ObjectPool.use_oh3mgy$",(function(t){var e=this.get();t(e),this.recycle_trkh7z$(e)})),Zz.prototype.recycleAll=function(){var t;t=this.liveObjects_0;for(var e=0;e!==t.size;++e)Hz.prototype.recycle_trkh7z$.call(this,this.liveObjects_0.get_za3lpa$(e));this.liveObjects_0.clear()},Zz.$metadata$={kind:$,simpleName:"ObjectPool",interfaces:[Hz]},Jz.prototype.reset=function(){this.tStart_0=OS()},Jz.prototype.takeSecs=function(){return this.takeMs()/1e3},Jz.prototype.takeMs=function(){return OS()-this.tStart_0},Jz.$metadata$={kind:$,simpleName:"PerfTimer",interfaces:[]},Qz.prototype.fillPolygon_3v8xej$=function(t,e){void 0===e&&(e=Nt());var i=this.computeNormal_uqk38n$(t),n=this.projectXy_gpxhmj$(t,i);this.xyArea_uqk38n$(n)<0&&(i.scale_mx4ult$(-1),n=this.projectXy_gpxhmj$(t,i));var r,o=w(j(e,10));for(r=e.iterator();r.hasNext();){var s=r.next();o.add_11rb$(this.projectXy_gpxhmj$(s,i))}var a,l=new ek(n,o),u=M();for(xt(u,t),a=e.iterator();a.hasNext();){var p=a.next();xt(u,p)}var c,h=M();for(c=l.triangles.iterator();c.hasNext();){var d=c.next(),f=d.v1.index;h.add_11rb$(f);var _=d.v2.index;h.add_11rb$(_);var m=d.v3.index;h.add_11rb$(m)}return new tk(Ve(u),Fe(h),i)},Qz.prototype.computeNormal_uqk38n$=function(t){var e,i,n=b([t.get_za3lpa$(0)]);for(i=t.iterator();i.hasNext();){var r,o=i.next(),s=o.distance_czzhiu$(B(n));r=PN.FUZZY_EQ_F,A.abs(s)<=r||n.add_11rb$(o)}for(var a=Ar(n.get_za3lpa$(1)).subtract_czzhiu$(n.get_za3lpa$(0)).norm(),l=Ar(n.get_za3lpa$(2)).subtract_czzhiu$(n.get_za3lpa$(1)).norm(),u=2;;){var p=l.times_czzhiu$(a);if(!(A.abs(p)>.8&&u<n.size))break;l.set_czzhiu$(n.get_za3lpa$((u+1|0)%n.size)).subtract_czzhiu$(n.get_za3lpa$((e=u,u=e+1|0,e))).norm()}return a.cross_2gj7b4$(l,Mr())},Qz.prototype.projectXy_gpxhmj$=function(t,e){var i=e.times_czzhiu$(Er().X_AXIS),n=A.abs(i)<.7?Ar(Er().X_AXIS):Ar(Er().Z_AXIS),r=e.cross_2gj7b4$(n,Mr()).norm();r.cross_2gj7b4$(e,n).norm();var o,s=w(j(t,10));for(o=t.iterator();o.hasNext();){var a=o.next();s.add_11rb$(new Sr(a.times_czzhiu$(n),a.times_czzhiu$(r),0))}return s},Qz.prototype.xyArea_uqk38n$=function(t){for(var e=0,i=0;i!==t.size;++i){var n=t.get_za3lpa$(i),r=t.get_za3lpa$((i+1|0)%t.size);e+=n.x*r.y-n.y*r.x}return.5*e},Qz.prototype.interiorAngle_0=function(t,e,i){var n=t.y-e.y,r=t.x-e.x,o=A.atan2(n,r),s=i.y-e.y,a=i.x-e.x,l=(o-A.atan2(s,a))*PN.RAD_2_DEG;return l<0?l+360:l},Object.defineProperty(tk.prototype,"numTriangles",{configurable:!0,get:function(){return this.indices.length/3|0}}),tk.$metadata$={kind:$,simpleName:"TriangulatedPolygon",interfaces:[]},ek.prototype.addRingEdges_0=function(t,e){var i;i=e.points;for(var n=0;n!==i.size;++n){var r=new rk(e.points.get_za3lpa$(n),e.points.get_za3lpa$((n+1|0)%e.points.size));t.add_11rb$(r)}},ek.prototype.insertBridgeEdge_0=function(t){var i,n=null;i=t.points;for(var r=0;r!==i.size;++r){var o;o=this.outerRing.points;for(var s=0;s!==o.size;++s){var a=new jk(t.points.get_za3lpa$(r),this.outerRing.points.get_za3lpa$(s));(null==n||a.length<n.length)&&this.noEdgeIntersect_0(a)&&(n=a)}}if(null!=n){var l=n.pt0,u=l.prevEdge.pt0,p=new ok(l.index,l);this.verts.add_11rb$(p);var c=n.pt1,h=c.nextEdge.pt1,d=new ok(c.index,c);this.verts.add_11rb$(d),new rk(u,p),new rk(d,h),new rk(c,l),new rk(p,d)}else{var f=qN.Log,_=vz.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"No suitable bridge edge for hole insertion")}},ek.prototype.nextEarTip_0=function(){var t,e={v:null};for(t=this.verts.iterator();t.hasNext();){var i=t.next();i.isOpen&&i.isEar&&(null==e.v||x(e.v).interiorAngle>i.interiorAngle)&&(e.v=i)}return e.v},ek.prototype.clip_0=function(t){t.isOpen=!1;var e=new ik(t.prevEdge.pt0,t,t.nextEdge.pt1);this.addTriangle_0(e);var i=new rk(t.prevEdge.pt0,t.nextEdge.pt1);this.updateIsEar_0(i.pt0),this.updateIsEar_0(i.pt1),e.minA<30&&this.trySwap_0(e)},ek.prototype.addTriangle_0=function(t){this.triangles.add_11rb$(t);var e=this.triEdges,i=t.k1;e.put_xwzc9p$(i,t);var n=this.triEdges,r=t.k2;n.put_xwzc9p$(r,t);var o=this.triEdges,s=t.k3;o.put_xwzc9p$(s,t)},ek.prototype.removeTriangle_0=function(t){this.triangles.remove_11rb$(t),this.triEdges.remove_11rb$(t.k1),this.triEdges.remove_11rb$(t.k2),this.triEdges.remove_11rb$(t.k3)},ek.prototype.trySwap_0=function(t){var e=this.triEdges.get_11rb$(this.opp_0(t.longestK));if(null!=e){var i,n,r=e.containsIndex_za3lpa$(t.v1.index)?e.containsIndex_za3lpa$(t.v2.index)?At([t.v3,t.v1,e.oppVertex_vux9f0$(t.v1.index,t.v2.index),t.v2]):At([t.v2,t.v3,e.oppVertex_vux9f0$(t.v3.index,t.v1.index),t.v1]):At([t.v1,t.v2,e.oppVertex_vux9f0$(t.v2.index,t.v3.index),t.v3]);t.containsIndex_za3lpa$(r.get_za3lpa$(0).index)&&t.containsIndex_za3lpa$(r.get_za3lpa$(1).index)&&t.containsIndex_za3lpa$(r.get_za3lpa$(2).index)?(i=new ik(r.get_za3lpa$(0),r.get_za3lpa$(1),r.get_za3lpa$(3)),n=new ik(r.get_za3lpa$(3),r.get_za3lpa$(1),r.get_za3lpa$(2))):(i=new ik(r.get_za3lpa$(0),r.get_za3lpa$(1),r.get_za3lpa$(2)),n=new ik(r.get_za3lpa$(0),r.get_za3lpa$(2),r.get_za3lpa$(3)));var o=i.minA,s=n.minA,a=A.min(o,s),l=t.minA,u=e.minA;a>A.min(l,u)&&(this.removeTriangle_0(t),this.removeTriangle_0(e),this.addTriangle_0(i),this.addTriangle_0(n))}},ek.prototype.opp_0=function(t){var e=t.shiftRight(32).and(Ue);return t.and(Ue).shiftLeft(32).or(e)},ek.prototype.updateIsEar_0=function(t){var e;t.updateInteriorAngle(),e=!(t.interiorAngle>=180)&&this.noVertexInside_0(t.prevEdge.pt0,t,t.nextEdge.pt1),t.isEar=e},ek.prototype.noVertexInside_0=function(t,e,i){return this.vertInTriTrav.setup_6vy1vz$(t,e,i).traverse_7efza$(this.vertTree),this.vertInTriTrav.result.isEmpty()},ek.prototype.noEdgeIntersect_0=function(t){return this.edgeIntersectionTrav.setup_vktcv1$(t).traverse_7efza$(this.edgeTree),this.edgeIntersectionTrav.result.isEmpty()},ek.$metadata$={kind:$,simpleName:"Triangulator",interfaces:[]},ik.prototype.oppVertex_vux9f0$=function(t,e){return this.v1.index!==t&&this.v1.index!==e?this.v1:this.v2.index!==t&&this.v2.index!==e?this.v2:this.v3},ik.prototype.containsIndex_za3lpa$=function(t){return this.v1.index===t||this.v2.index===t||this.v3.index===t},ik.$metadata$={kind:$,simpleName:"PolyTri",interfaces:[]},nk.$metadata$={kind:$,simpleName:"PolyRing",interfaces:[]},rk.$metadata$={kind:$,simpleName:"PolyEdge",interfaces:[jk]},Object.defineProperty(ok.prototype,"prevEdge",{configurable:!0,get:function(){return null==this.prevEdge_gh04s7$_0?pt("prevEdge"):this.prevEdge_gh04s7$_0},set:function(t){this.prevEdge_gh04s7$_0=t}}),Object.defineProperty(ok.prototype,"nextEdge",{configurable:!0,get:function(){return null==this.nextEdge_hknyfd$_0?pt("nextEdge"):this.nextEdge_hknyfd$_0},set:function(t){this.nextEdge_hknyfd$_0=t}}),ok.prototype.updateInteriorAngle=function(){this.interiorAngle=uk().interiorAngle_0(this.prevEdge.pt0,this,this.nextEdge.pt1)},ok.$metadata$={kind:$,simpleName:"PolyVertex",interfaces:[Sr]},Object.defineProperty(sk.prototype,"v1",{configurable:!0,get:function(){return null==this.v1_tcfd5c$_0?pt("v1"):this.v1_tcfd5c$_0},set:function(t){this.v1_tcfd5c$_0=t}}),Object.defineProperty(sk.prototype,"v2",{configurable:!0,get:function(){return null==this.v2_tcfd4h$_0?pt("v2"):this.v2_tcfd4h$_0},set:function(t){this.v2_tcfd4h$_0=t}}),Object.defineProperty(sk.prototype,"v3",{configurable:!0,get:function(){return null==this.v3_tcfd3m$_0?pt("v3"):this.v3_tcfd3m$_0},set:function(t){this.v3_tcfd3m$_0=t}}),sk.prototype.setup_6vy1vz$=function(t,e,i){this.v1=t,this.v2=e,this.v3=i,this.result.clear();var n=this.min,r=t.x,o=e.x,s=i.x,a=A.min(o,s),l=A.min(r,a),u=t.y,p=e.y,c=i.y,h=A.min(p,c);n.set_dleff0$(l,A.min(u,h));var d=this.max,f=t.x,_=e.x,m=i.x,$=A.max(_,m),y=A.max(f,$),v=t.y,g=e.y,b=i.y,x=A.max(g,b);return d.set_dleff0$(y,A.max(v,x)),this},sk.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var r=e.children.get_za3lpa$(n),o=r.bounds;this.min.x<=o.max.x&&this.max.x>=o.min.x&&this.min.y<=o.max.y&&this.max.y>=o.min.y&&this.traverseNode_4w85ke$(t,r)}},sk.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s),l=a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y,u=a.index!==this.v1.index&&a.index!==this.v2.index&&a.index!==this.v3.index;l&&u&&this.isPointInTriangle_0(a,this.v1,this.v2,this.v3)&&this.result.add_11rb$(a)}},sk.prototype.isPointInTriangle_0=function(t,e,i,n){var r=this.pointEdgeSign_0(t,e,i),o=this.pointEdgeSign_0(t,i,n),s=this.pointEdgeSign_0(t,n,e);return!((r<0||o<0||s<0)&&(r>0||o>0||s>0))},sk.prototype.pointEdgeSign_0=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},sk.$metadata$={kind:$,simpleName:"VertsInTriTraverser",interfaces:[Xk]},Object.defineProperty(ak.prototype,"edge",{configurable:!0,get:function(){return null==this.edge_ses85y$_0?pt("edge"):this.edge_ses85y$_0},set:function(t){this.edge_ses85y$_0=t}}),ak.prototype.setup_vktcv1$=function(t){this.edge=t,this.result.clear();var e=this.min,i=t.pt0.x,n=t.pt1.x,r=A.min(i,n),o=t.pt0.y,s=t.pt1.y;e.set_dleff0$(r,A.min(o,s));var a=this.max,l=t.pt0.x,u=t.pt1.x,p=A.max(l,u),c=t.pt0.y,h=t.pt1.y;return a.set_dleff0$(p,A.max(c,h)),this},ak.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var r=e.children.get_za3lpa$(n),o=r.bounds;this.min.x<=o.max.x&&this.max.x>=o.min.x&&this.min.y<=o.max.y&&this.max.y>=o.min.y&&this.traverseNode_4w85ke$(t,r)}},ak.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s),l=a.pt0.x,u=a.pt1.x,p=A.min(l,u),c=a.pt0.y,h=a.pt1.y,d=A.min(c,h),f=a.pt0.x,_=a.pt1.x,m=A.max(f,_),$=a.pt0.y,y=a.pt1.y,v=A.max($,y);this.min.x<=m&&this.max.x>=p&&this.min.y<=v&&this.max.y>=d&&this.isEdgeIntersect_0(this.edge.pt0,this.edge.pt1,a.pt0,a.pt1)&&this.result.add_11rb$(a)}},ak.prototype.isEdgeIntersect_0=function(t,e,i,n){var r,o=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(r=PN.FUZZY_EQ_F,!(A.abs(o)<=r)){var s=t.x*e.y-t.y*e.x,a=i.x*n.y-i.y*n.x,l=(s*(i.x-n.x)-a*(t.x-e.x))/o,u=(s*(i.y-n.y)-a*(t.y-e.y))/o,p=l-t.x,c=u-t.y,h=e.x-t.x,d=e.y-t.y,f=l-i.x,_=u-i.y,m=n.x-i.x,$=n.y-i.y;return p*p+c*c<h*h+d*d&&f*f+_*_<m*m+$*$&&p*h+c*d>0&&f*m+_*$>0}return!1},ak.$metadata$={kind:$,simpleName:"EdgeIntersectTraverser",interfaces:[Xk]},Qz.$metadata$={kind:y,simpleName:"PolyUtil",interfaces:[]};var lk=null;function uk(){return null===lk&&new Qz,lk}function pk(){}function ck(){this.shapes_h2hckg$_0=M()}function hk(){}function dk(t){hk.call(this),this.isClosed=t,this.positions_4d3v1q$_0=M(),this.normals=M(),this.texCoords=M(),this.color=null,this.prevIndices_0=M(),this.vertIndices_0=M()}function fk(){hk.call(this),this.shapes_tpeukb$_0=M()}function _k(){}function mk(t,e,i,n){void 0===i&&(i=2048),void 0===n&&(n=t);var r,o=n,a=new ia,l=i;a.name="SimpleShadowMap",a.setSize_vux9f0$(l,l),a.setDepthTexture_6taknv$(!0),a.clearColorTexture(),fs.call(this,o,new ea(a)),this.scene=t,this.lightIndex=e,this.lightViewProjMat=new bn,this.optimizeForDirectionalLight=!1,this.sceneCam=this.scene.camera,this.clipNear=1,this.clipFar=100,this.shadowBounds=null,this.nearSceneCamPlane_0=new Cd,this.farSceneCamPlane_0=new Cd,this.shadowCamBounds_0=new O$,this.tmpVec_0=Mr(),this.isUpdateDrawNode=!1,this.scene.addOffscreenPass_m1c2kf$(this),this.drawQueue.meshFilter=$k,this.onBeforeCollectDrawCommands.add_11rb$((r=this,function(t){if(r.lightIndex<r.scene.lighting.lights.size){var e=r.scene.lighting.lights.get_za3lpa$(r.lightIndex);r.setupCamera_0(e),r.camera.updateCamera_fd1mc0$(t,r.viewport),t.depthBiasMatrix.mul_u47j3u$(r.camera.viewProj,r.lightViewProjMat)}return s}))}function $k(t){return t.isCastingShadow}function yk(t,e,i,n,r,o){void 0===i&&(i=100),void 0===n&&(n=3),void 0===r&&(r=2048),void 0===o&&(o=t),this.lightIndex=e,this.maxRange=i,this.numCascades=n;var a,l=R(this.numCascades);a=l.length-1|0;for(var u=0;u<=a;u++){var p=A.pow(u,2),c=this.numCascades,h=p/A.pow(c,2),d=u+1|0,f=A.pow(d,2),_=this.numCascades,m=f/A.pow(_,2);l[u]=new vk(h,m)}this.mapRanges=l;var $,y,v=R(this.numCascades);$=v.length-1|0;for(var g=0;g<=$;g++){var b=new mk(t,this.lightIndex,r,o);b.optimizeForDirectionalLight=!0,v[g]=b}if(this.cascades=v,this.viewSpaceRanges=new Float32Array(this.numCascades),this.numCascades>8)throw cn("Too many shadow cascades: "+this.numCascades+" (maximum is 8)");this.cascades[0].onBeforeCollectDrawCommands.add_11rb$((y=this,function(t){var e;e=y.numCascades;for(var i=0;i<e;i++){var n=y.mapRanges[i].near*y.maxRange,r=y.mapRanges[i].far*y.maxRange,o=2*A.sqrt(r);y.cascades[i].clipNear=n,y.cascades[i].clipFar=r+o,y.viewSpaceRanges[i]=-r}return s}))}function vk(t,e){this.near=t,this.far=e}function gk(t,i,n){void 0===n&&(n=20),Uk.call(this,i),this.root_7kvd7y$_0=null;for(var r,o=t.size,s=Kt("get",function(t,e){return t.get_za3lpa$(e)}.bind(null,t)),a=w(o),l=0;l<o;l++)a.add_11rb$(s(l));this.items_0=a,this.cmpX_0=(r=i,function(t,i){return e.compareTo(r.getMinX_trkh7z$(t),r.getMinX_trkh7z$(i))}),this.cmpY_0=function(t){return function(i,n){return e.compareTo(t.getMinY_trkh7z$(i),t.getMinY_trkh7z$(n))}}(i),this.cmpZ_0=function(t){return function(i,n){return e.compareTo(t.getMinZ_trkh7z$(i),t.getMinZ_trkh7z$(n))}}(i),this.root_7kvd7y$_0=new bk(this,I(t),0,n)}function bk(t,e,i,n){var r,o,s,a;this.$outer=t,Vk.call(this,this.$outer,i),this.nodeRange_cforgo$_0=e,this.children_ay15fy$_0=M(),this.size_ugdyxc$_0=0;var l=Mr();this.size_ugdyxc$_0=this.nodeRange.last-this.nodeRange.first+1|0;var u=this.bounds;this.$outer;var p=u.isBatchUpdate;u.isBatchUpdate=!0;var c,h,d,f,_=this.$outer;h=(c=this.nodeRange).first,d=c.last,f=c.step;for(var m=h;m<=d;m+=f){var $=this.items.get_za3lpa$(m);u.add_czzhiu$(_.itemAdapter.getMin_hm1yd1$($,l)),u.add_czzhiu$(_.itemAdapter.getMax_hm1yd1$($,l))}if(u.isBatchUpdate=p,(this.nodeRange.last-this.nodeRange.first|0)>n){var y=this.$outer.cmpX_0;this.bounds.size.y>this.bounds.size.x&&this.bounds.size.y>this.bounds.size.z?y=this.$outer.cmpY_0:this.bounds.size.z>this.bounds.size.x&&this.bounds.size.z>this.bounds.size.y&&(y=this.$outer.cmpZ_0);var v=this.nodeRange.first+((this.nodeRange.last-this.nodeRange.first|0)/2|0)|0;Kn(this.$outer.items_0,this.nodeRange,v,y),this.children.add_11rb$(new bk(this.$outer,new Bt(this.nodeRange.first,v),i+1|0,n)),this.children.add_11rb$(new bk(this.$outer,new Bt(v+1|0,this.nodeRange.last),i+1|0,n))}else{o=(r=this.nodeRange).first,s=r.last,a=r.step;for(var g=o;g<=s;g+=a)this.$outer.itemAdapter.setNode_kvimhn$(this.items.get_za3lpa$(g),this)}}function xk(t,e){return void 0===e&&(e=10),new gk(t,Mk(),e)}function wk(t,e){return void 0===e&&(e=10),new gk(t,Pk(),e)}function zk(){}function kk(){Sk=this}pk.$metadata$={kind:st,simpleName:"ShapeContainer",interfaces:[]},Object.defineProperty(ck.prototype,"shapes",{configurable:!0,get:function(){return this.shapes_h2hckg$_0}}),ck.prototype.sample_l28n3f$=function(t,e,i){var n;for(n=this.shapes.iterator();n.hasNext();)n.next().sample_l28n3f$(t,e,i)},ck.prototype.fillTop_84rojv$=function(t){var e;for(e=this.shapes.iterator();e.hasNext();)e.next().fillTop_84rojv$(t)},ck.prototype.fillBottom_84rojv$=function(t){var e;for(e=this.shapes.iterator();e.hasNext();)e.next().fillBottom_84rojv$(t)},ck.$metadata$={kind:$,simpleName:"Profile",interfaces:[pk]},hk.$metadata$={kind:$,simpleName:"Shape",interfaces:[]},Object.defineProperty(dk.prototype,"positions",{configurable:!0,get:function(){return this.positions_4d3v1q$_0}}),Object.defineProperty(dk.prototype,"sampledVertIndices",{configurable:!0,get:function(){return this.vertIndices_0}}),Object.defineProperty(dk.prototype,"nVerts",{configurable:!0,get:function(){return this.positions.size}}),dk.prototype.getNormal_za3lpa$=function(t){return t<this.normals.size?this.normals.get_za3lpa$(t):Er().ZERO},dk.prototype.getTexCoord_za3lpa$=function(t){return t<this.texCoords.size?this.texCoords.get_za3lpa$(t):ar().ZERO},dk.prototype.xy_dleff0$=function(t,e){var i=this.positions,n=new Or(t,e,0);i.add_11rb$(n)},dk.prototype.xz_dleff0$=function(t,e){var i=this.positions,n=new Or(t,0,e);i.add_11rb$(n)},dk.prototype.uv_dleff0$=function(t,e){var i=this.texCoords,n=new ur(t,e);i.add_11rb$(n)},dk.prototype.normal_y2kzbl$=function(t,e,i){var n=this.normals,r=new Or(t,e,i);n.add_11rb$(r)},dk.prototype.setTexCoordsX_mx4ult$=function(t){var e;for(e=this.texCoords.iterator();e.hasNext();)e.next().x=t},dk.prototype.setTexCoordsY_mx4ult$=function(t){var e;for(e=this.texCoords.iterator();e.hasNext();)e.next().y=t},dk.prototype.sample_l28n3f$=function(t,e,i){var n,r,o;this.prevIndices_0.clear(),this.prevIndices_0.addAll_brywnq$(this.vertIndices_0),this.vertIndices_0.clear(),null!=(n=this.color)&&(t.color=n);var s=0;for(r=this.positions.iterator();r.hasNext();){var a=r.next(),l=J((s=(o=s)+1|0,o)),u=this.vertIndices_0,p=t.vertex_n440gp$(a,this.getNormal_za3lpa$(l),this.getTexCoord_za3lpa$(l));u.add_11rb$(p)}e&&this.connect_xe2xvh$(t,this.prevIndices_0,i)},dk.prototype.connect_xe2xvh$=function(t,e,i){var n;if(!e.isEmpty()){n=e.size;for(var r=1;r<n;r++)i?(t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r),e.get_za3lpa$(r)),t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r))):(t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),e.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(r)),t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(r-1|0)));var o=this.isClosed;o&&(o=!this.prevIndices_0.isEmpty()),o&&(i?(t.geometry.addTriIndices_qt1dr2$(B(e),q(this.vertIndices_0),q(e)),t.geometry.addTriIndices_qt1dr2$(B(e),B(this.vertIndices_0),q(this.vertIndices_0))):(t.geometry.addTriIndices_qt1dr2$(B(e),q(e),q(this.vertIndices_0)),t.geometry.addTriIndices_qt1dr2$(B(e),q(this.vertIndices_0),B(this.vertIndices_0))))}},dk.prototype.fillTop_84rojv$=function(t){var e,i=uk().fillPolygon_3v8xej$(this.positions);for(e=De(Y(i.indices),3).iterator();e.hasNext();){var n=e.next(),r=i.indices[n],o=i.indices[n+1|0],s=i.indices[n+2|0];t.geometry.addTriIndices_qt1dr2$(this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(o),this.vertIndices_0.get_za3lpa$(s))}},dk.prototype.fillBottom_84rojv$=function(t){var e,i=uk().fillPolygon_3v8xej$(this.positions);for(e=De(Y(i.indices),3).iterator();e.hasNext();){var n=e.next(),r=i.indices[n],o=i.indices[n+1|0],s=i.indices[n+2|0];t.geometry.addTriIndices_qt1dr2$(this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(s),this.vertIndices_0.get_za3lpa$(o))}},dk.$metadata$={kind:$,simpleName:"SimpleShape",interfaces:[hk]},Object.defineProperty(fk.prototype,"shapes",{configurable:!0,get:function(){return this.shapes_tpeukb$_0}}),Object.defineProperty(fk.prototype,"positions",{configurable:!0,get:function(){var t,e=this.shapes,i=M();for(t=e.iterator();t.hasNext();){var n=t.next().positions;xt(i,n)}return i}}),Object.defineProperty(fk.prototype,"sampledVertIndices",{configurable:!0,get:function(){var t,e=this.shapes,i=M();for(t=e.iterator();t.hasNext();){var n=t.next().sampledVertIndices;xt(i,n)}return i}}),fk.prototype.sample_l28n3f$=function(t,e,i){var n;for(n=this.shapes.iterator();n.hasNext();)n.next().sample_l28n3f$(t,e,i)},fk.prototype.fillTop_84rojv$=function(t){var e,i=this.sampledVertIndices,n=uk().fillPolygon_3v8xej$(this.positions);for(e=De(Y(n.indices),3).iterator();e.hasNext();){var r=e.next(),o=n.indices[r],s=n.indices[r+1|0],a=n.indices[r+2|0];t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(o),i.get_za3lpa$(s),i.get_za3lpa$(a))}},fk.prototype.fillBottom_84rojv$=function(t){var e,i=this.sampledVertIndices,n=uk().fillPolygon_3v8xej$(this.positions);for(e=De(Y(n.indices),3).iterator();e.hasNext();){var r=e.next(),o=n.indices[r],s=n.indices[r+1|0],a=n.indices[r+2|0];t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(o),i.get_za3lpa$(a),i.get_za3lpa$(s))}},fk.$metadata$={kind:$,simpleName:"MultiShape",interfaces:[pk,hk]},_k.$metadata$={kind:st,simpleName:"ShadowMap",interfaces:[]},Object.defineProperty(mk.prototype,"isShadowMapEnabled",{configurable:!0,get:function(){return this.isEnabled},set:function(t){this.isEnabled=t}}),mk.prototype.dispose_aemszp$=function(t){this.scene.removeOffscreenPass_m1c2kf$(this),fs.prototype.dispose_aemszp$.call(this,t)},mk.prototype.setupSampler_s70oj3$=function(t){null!=t&&(t.texture=this.depthTexture)},mk.prototype.setupCamera_0=function(t){switch(t.type.name){case"DIRECTIONAL":this.setupDirectionalLightCamera_0(t);break;case"SPOT":this.setupSpotLightCamera_0(t);break;case"POINT":throw new He}},mk.prototype.setupSpotLightCamera_0=function(t){var i=this.camera;e.isType(i,kd)||((i=new kd).projCorrectionMode=wd(),this.camera=i),i.position.set_czzhiu$(t.position),i.lookAt.set_czzhiu$(t.position).add_czzhiu$(t.direction),i.fovY=t.spotAngle,i.clipNear=this.clipNear,i.clipFar=this.clipFar},mk.prototype.setupDirectionalLightCamera_0=function(t){var i=this.camera;e.isType(i,zd)||((i=new zd).projCorrectionMode=wd(),this.camera=i),i.position.set_czzhiu$(Er().ZERO),i.lookAt.set_czzhiu$(t.direction);var n=this.shadowBounds;null!=n?(this.shadowCamBounds_0.clear(),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.min.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.min.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.max.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.max.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.min.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.min.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.max.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.max.y,n.max.z),1))):(this.sceneCam.computeFrustumPlane_jwr40o$(this.clipNear,this.nearSceneCamPlane_0),this.sceneCam.computeFrustumPlane_jwr40o$(this.clipFar,this.farSceneCamPlane_0),this.transform_0(i.view,this.nearSceneCamPlane_0),this.transform_0(i.view,this.farSceneCamPlane_0),this.setPlanes_0(this.shadowCamBounds_0,this.nearSceneCamPlane_0,this.farSceneCamPlane_0)),i.left=this.shadowCamBounds_0.min.x,i.right=this.shadowCamBounds_0.max.x,i.bottom=this.shadowCamBounds_0.min.y,i.top=this.shadowCamBounds_0.max.y,i.near=-this.shadowCamBounds_0.max.z-20,i.far=-this.shadowCamBounds_0.min.z},mk.prototype.transform_0=function(t,e){t.transform_w1lst9$(e.upperLeft),t.transform_w1lst9$(e.upperRight),t.transform_w1lst9$(e.lowerLeft),t.transform_w1lst9$(e.lowerRight)},mk.prototype.setPlanes_0=function(t,e,i){var n=t.isBatchUpdate;t.isBatchUpdate=!0,t.clear(),t.add_czzhiu$(e.upperLeft),t.add_czzhiu$(e.upperRight),t.add_czzhiu$(e.lowerLeft),t.add_czzhiu$(e.lowerRight),t.add_czzhiu$(i.upperLeft),t.add_czzhiu$(i.upperRight),t.add_czzhiu$(i.lowerLeft),t.add_czzhiu$(i.lowerRight),t.isBatchUpdate=n},mk.$metadata$={kind:$,simpleName:"SimpleShadowMap",interfaces:[_k,fs]},Object.defineProperty(yk.prototype,"drawNode",{configurable:!0,get:function(){return this.cascades[0].drawNode},set:function(t){var e,i=this.cascades;for(e=0;e!==i.length;++e)i[e].drawNode=t}}),Object.defineProperty(yk.prototype,"isShadowMapEnabled",{configurable:!0,get:function(){return this.cascades[0].isEnabled},set:function(t){var e,i=this.cascades;for(e=0;e!==i.length;++e)i[e].isEnabled=t}}),yk.prototype.setMapRanges_8cqhcw$=function(t){var e,i=0,n=this.mapRanges.length;e=A.min(t.length,n);for(var r=0;r<e;r++)this.mapRanges[r].near=i,this.mapRanges[r].far=t[r],i=t[r]},yk.prototype.setupSampler_s70oj3$=function(t){if(null!=t){var e,i,n=this.cascades,r=0;for(e=0;e!==n.length;++e){var o=n[e];t.textures[(i=r,r=i+1|0,i)]=o.depthTexture}}},vk.prototype.toString=function(){return"["+this.near+".."+this.far+"]"},vk.$metadata$={kind:$,simpleName:"MapRange",interfaces:[]},yk.$metadata$={kind:$,simpleName:"CascadedShadowMap",interfaces:[_k]},Object.defineProperty(gk.prototype,"root",{configurable:!0,get:function(){return this.root_7kvd7y$_0}}),Object.defineProperty(gk.prototype,"size",{configurable:!0,get:function(){return this.items_0.size}}),gk.prototype.contains_11rb$=function(t){return this.root.contains_uargzz$(t)},gk.prototype.containsAll_brywnq$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next();if(!this.contains_11rb$(i))return!1}return!0},gk.prototype.isEmpty=function(){return this.items_0.isEmpty()},gk.prototype.iterator=function(){return this.items_0.iterator()},Object.defineProperty(bk.prototype,"nodeRange",{get:function(){return this.nodeRange_cforgo$_0}}),Object.defineProperty(bk.prototype,"children",{configurable:!0,get:function(){return this.children_ay15fy$_0}}),Object.defineProperty(bk.prototype,"size",{configurable:!0,get:function(){return this.size_ugdyxc$_0}}),Object.defineProperty(bk.prototype,"items",{configurable:!0,get:function(){return this.$outer.items_0}}),bk.prototype.contains_uargzz$=function(t){var e,i,n,r;if(this.isLeaf){i=(e=this.nodeRange).first,n=e.last,r=e.step;for(var o=i;o<=n;o+=r)if(zt(this.items.get_za3lpa$(o),t))return!0;return!1}return this.children.get_za3lpa$(0).bounds.contains_y2kzbl$(this.$outer.itemAdapter.getMinX_trkh7z$(t),this.$outer.itemAdapter.getMinY_trkh7z$(t),this.$outer.itemAdapter.getMinZ_trkh7z$(t))?this.children.get_za3lpa$(0).contains_uargzz$(t):!!this.children.get_za3lpa$(1).bounds.contains_y2kzbl$(this.$outer.itemAdapter.getMinX_trkh7z$(t),this.$outer.itemAdapter.getMinY_trkh7z$(t),this.$outer.itemAdapter.getMinZ_trkh7z$(t))&&this.children.get_za3lpa$(1).contains_uargzz$(t)},bk.$metadata$={kind:$,simpleName:"KdNode",interfaces:[Vk]},gk.$metadata$={kind:$,simpleName:"KdTree",interfaces:[Uk]},zk.prototype.getCenterX_trkh7z$=function(t){return.5*(this.getMinX_trkh7z$(t)+this.getMaxX_trkh7z$(t))},zk.prototype.getCenterY_trkh7z$=function(t){return.5*(this.getMinY_trkh7z$(t)+this.getMaxY_trkh7z$(t))},zk.prototype.getCenterZ_trkh7z$=function(t){return.5*(this.getMinZ_trkh7z$(t)+this.getMaxZ_trkh7z$(t))},zk.prototype.getSzX_trkh7z$=function(t){return this.getMaxX_trkh7z$(t)-this.getMinX_trkh7z$(t)},zk.prototype.getSzY_trkh7z$=function(t){return this.getMaxY_trkh7z$(t)-this.getMinY_trkh7z$(t)},zk.prototype.getSzZ_trkh7z$=function(t){return this.getMaxZ_trkh7z$(t)-this.getMinZ_trkh7z$(t)},zk.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getMinX_trkh7z$(t),this.getMinY_trkh7z$(t),this.getMinZ_trkh7z$(t))},zk.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getMaxX_trkh7z$(t),this.getMaxY_trkh7z$(t),this.getMaxZ_trkh7z$(t))},zk.prototype.getCenter_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getCenterX_trkh7z$(t),this.getCenterY_trkh7z$(t),this.getCenterZ_trkh7z$(t))},zk.prototype.setNode_kvimhn$=function(t,e){},zk.$metadata$={kind:st,simpleName:"ItemAdapter",interfaces:[]},kk.prototype.getMinX_trkh7z$=function(t){return t.x},kk.prototype.getMinY_trkh7z$=function(t){return t.y},kk.prototype.getMinZ_trkh7z$=function(t){return t.z},kk.prototype.getMaxX_trkh7z$=function(t){return t.x},kk.prototype.getMaxY_trkh7z$=function(t){return t.y},kk.prototype.getMaxZ_trkh7z$=function(t){return t.z},kk.prototype.getCenterX_trkh7z$=function(t){return t.x},kk.prototype.getCenterY_trkh7z$=function(t){return t.y},kk.prototype.getCenterZ_trkh7z$=function(t){return t.z},kk.prototype.getSzX_trkh7z$=function(t){return 0},kk.prototype.getSzY_trkh7z$=function(t){return 0},kk.prototype.getSzZ_trkh7z$=function(t){return 0},kk.prototype.getMin_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},kk.prototype.getCenter_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},kk.prototype.getMax_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},kk.$metadata$={kind:y,simpleName:"Vec3fAdapter",interfaces:[zk]};var Sk=null;function Ck(){return null===Sk&&new kk,Sk}function Nk(){Ek=this}Nk.prototype.getMinX_trkh7z$=function(t){return t.minX},Nk.prototype.getMinY_trkh7z$=function(t){return t.minY},Nk.prototype.getMinZ_trkh7z$=function(t){return t.minZ},Nk.prototype.getMaxX_trkh7z$=function(t){return t.maxX},Nk.prototype.getMaxY_trkh7z$=function(t){return t.maxY},Nk.prototype.getMaxZ_trkh7z$=function(t){return t.maxZ},Nk.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.minX,t.minY,t.minZ)},Nk.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.maxX,t.maxY,t.maxZ)},Nk.$metadata$={kind:y,simpleName:"EdgeAdapter",interfaces:[zk]};var Ek=null;function Pk(){return null===Ek&&new Nk,Ek}function Tk(){Ok=this}Tk.prototype.getMinX_trkh7z$=function(t){return t.minX},Tk.prototype.getMinY_trkh7z$=function(t){return t.minY},Tk.prototype.getMinZ_trkh7z$=function(t){return t.minZ},Tk.prototype.getMaxX_trkh7z$=function(t){return t.maxX},Tk.prototype.getMaxY_trkh7z$=function(t){return t.maxY},Tk.prototype.getMaxZ_trkh7z$=function(t){return t.maxZ},Tk.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.minX,t.minY,t.minZ)},Tk.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.maxX,t.maxY,t.maxZ)},Tk.$metadata$={kind:y,simpleName:"TriangleAdapter",interfaces:[zk]};var Ok=null;function Mk(){return null===Ok&&new Tk,Ok}function jk(t,e){Ik(),this.pt0=t,this.pt1=e,this.e=null,this.length=0,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.tmpVec_j9agx3$_0=Mr(),this.tmpResult_bszuwa$_0=Mr(),this.e=this.pt1.subtract_2gj7b4$(this.pt0,Mr()).norm(),this.length=this.pt0.distance_czzhiu$(this.pt1);var i=this.pt0.x,n=this.pt1.x;this.minX=A.min(i,n);var r=this.pt0.y,o=this.pt1.y;this.minY=A.min(r,o);var s=this.pt0.z,a=this.pt1.z;this.minZ=A.min(s,a);var l=this.pt0.x,u=this.pt1.x;this.maxX=A.max(l,u);var p=this.pt0.y,c=this.pt1.y;this.maxY=A.max(p,c);var h=this.pt0.z,d=this.pt1.z;this.maxZ=A.max(h,d)}function Ak(){Rk=this}jk.prototype.rayDistanceSqr_nvyeur$=function(t){return t.sqrDistanceToPoint_czzhiu$(this.nearestPointOnEdge_lplggz$(t,this.tmpResult_bszuwa$_0))},jk.prototype.nearestPointOnEdge_lplggz$=function(t,e){var i,n=this.e.times_czzhiu$(t.direction),r=1-n*n;if(i=PN.FUZZY_EQ_F,A.abs(r)<=i)return e.set_czzhiu$(this.pt0.sqrDistance_czzhiu$(t.origin)<this.pt1.sqrDistance_czzhiu$(t.origin)?this.pt0:this.pt1);t.origin.subtract_2gj7b4$(this.pt0,this.tmpVec_j9agx3$_0);var o,s=(this.tmpVec_j9agx3$_0.times_czzhiu$(this.e)-this.tmpVec_j9agx3$_0.times_czzhiu$(t.direction)*n)/r;if(s>0){var a=this.e,l=this.length;o=a.scale_749b8l$(A.min(s,l),e).add_czzhiu$(this.pt0)}else o=e.set_czzhiu$(this.pt0);return o},Ak.prototype.getEdges_r7nl2o$=function(t){var e;if(t.primitiveType!==Qw())throw V("Supplied meshData must have primitiveType GL_LINES");var i=M();e=t.numIndices;for(var n=0;n<e;n+=2){var r=t.indices.get_za3lpa$(n),o=t.indices.get_za3lpa$(n+1|0),s=t.vertexIt;s.index=r;var a=Tr(s),l=t.vertexIt;l.index=o;var u=new jk(a,Tr(l));i.add_11rb$(u)}return i},Ak.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Rk=null;function Ik(){return null===Rk&&new Ak,Rk}function Lk(t,e,i){Bk(),this.pt0=t,this.pt1=e,this.pt2=i,this.e1=null,this.e2=null,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.tmpS_4hszl1$_0=Mr(),this.tmpP_4hszig$_0=Mr(),this.tmpQ_4hszjb$_0=Mr(),this.e1=this.pt1.subtract_2gj7b4$(this.pt0,Mr()),this.e2=this.pt2.subtract_2gj7b4$(this.pt0,Mr());var n=this.pt0.x,r=this.pt1.x,o=this.pt2.x;this.minX=A.min(n,r,o);var s=this.pt0.y,a=this.pt1.y,l=this.pt2.y;this.minY=A.min(s,a,l);var u=this.pt0.z,p=this.pt1.z,c=this.pt2.z;this.minZ=A.min(u,p,c);var h=this.pt0.x,d=this.pt1.x,f=this.pt2.x;this.maxX=A.max(h,d,f);var _=this.pt0.y,m=this.pt1.y,$=this.pt2.y;this.maxY=A.max(_,m,$);var y=this.pt0.z,v=this.pt1.z,g=this.pt2.z;this.maxZ=A.max(y,v,g)}function Dk(){qk=this}jk.$metadata$={kind:$,simpleName:"Edge",interfaces:[]},Lk.prototype.hitDistance_nvyeur$=function(t){t.origin.subtract_2gj7b4$(this.pt0,this.tmpS_4hszl1$_0),t.direction.cross_2gj7b4$(this.e2,this.tmpP_4hszig$_0),this.tmpS_4hszl1$_0.cross_2gj7b4$(this.e1,this.tmpQ_4hszjb$_0);var e=1/this.tmpP_4hszig$_0.times_czzhiu$(this.e1),i=e*this.tmpQ_4hszjb$_0.times_czzhiu$(this.e2),n=e*this.tmpP_4hszig$_0.times_czzhiu$(this.tmpS_4hszl1$_0),r=e*this.tmpQ_4hszjb$_0.times_czzhiu$(t.direction);return n>=0&&r>=0&&n+r<=1&&i>=0?i:nt.MAX_VALUE},Dk.prototype.getTriangles_r7nl2o$=function(t){var e,i=M();e=t.numIndices;for(var n=0;n<e;n+=3){var r=Fk(t,n);i.add_11rb$(r)}return i},Dk.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var qk=null;function Bk(){return null===qk&&new Dk,qk}function Fk(t,e,i){i=i||Object.create(Lk.prototype);var n=Mr();t.vertexIt.index=t.indices.get_za3lpa$(e),n.set_czzhiu$(t.vertexIt.position);var r=Mr();t.vertexIt.index=t.indices.get_za3lpa$(e+1|0),r.set_czzhiu$(t.vertexIt.position);var o=Mr();if(t.vertexIt.index=t.indices.get_za3lpa$(e+2|0),o.set_czzhiu$(t.vertexIt.position),Lk.call(i,n,r,o),t.primitiveType!==ez())throw V("Supplied geometry data must have primitiveType TRIANGLES");return i}function Uk(t){this.itemAdapter=t}function Vk(t,e){this.$outer=t,this.depth=e,this.bounds=new O$,this.traversalOrder=0}Lk.$metadata$={kind:$,simpleName:"Triangle",interfaces:[]},Uk.prototype.drawNodeBounds_nl2my4$=function(t){this.root.drawNodeBounds_nl2my4$(t)},Object.defineProperty(Vk.prototype,"isLeaf",{configurable:!0,get:function(){return this.children.isEmpty()}}),Vk.prototype.drawNodeBounds_nl2my4$=function(t){var e,i=iy().JET_MD.getColor_y2kzbl$(this.depth%6.7/6.7);t.addBoundingBox_j1pmtk$(this.bounds,i),e=this.children;for(var n=0;n!==e.size;++n)this.children.get_za3lpa$(n).drawNodeBounds_nl2my4$(t)},Vk.$metadata$={kind:$,simpleName:"Node",interfaces:[]},Uk.$metadata$={kind:$,simpleName:"SpatialTree",interfaces:[Ge]};var Gk=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function Hk(){}function Wk(){}function Kk(){}function Xk(){}function Yk(){Xk.call(this),this.center=Mr(),this.pointDistance=new Zk}function Zk(){}function Jk(){Yk.call(this),this.result=M(),this.radius_z1vvhm$_0=1,this.radiusSqr=1}function Qk(){var t;Xk.call(this),this.ray=new ir,this.nearest_75fjy0$_0=null,this.distance_vfh9yx$_0=0,this.distanceSqr_1nwg87$_0=nt.MAX_VALUE,this.rayDistance=new tS,this.childLists_3dbot1$_0=new oS((t=this,function(e){return t.rayDistance.nodeSqrDistanceToRay_m0emyn$(e,t.ray)}))}function tS(){}function eS(){Qk.call(this),this.rayDistance=new iS}function iS(){}function nS(){Qk.call(this),this.hitPoint=Mr(),this.rayDistance=new rS}function rS(){}function oS(t){this.childDist=t,this.childListRecycler=new Zz(aS),this.childComparator=new $t(Gk(lS))}function sS(t,e,i){this.$outer=t,this.dist=e,this.node=i}function aS(){return M()}function lS(t){return t.dist}function uS(){hS(),this.currentGesture_nrwzky$_0=new dS,this.activePointers_ajelte$_0=M(),this.tmpVec1_vwccvm$_0=pr(),this.tmpVec2_vwccwh$_0=pr(),this.startPositions=z(),this.screenDpi=96}function pS(){cS=this,this.INVALID=0,this.INDETERMINATE=-1,this.PINCH=1,this.TWO_FINGER_DRAG=2}Hk.prototype.nodeSqrDistanceToPoint_fpn9fm$=function(t,e){return t.bounds.pointDistanceSqr_czzhiu$(e)},Hk.prototype.itemSqrDistanceToPoint_xpaqv3$=function(t,e,i){var n=t.itemAdapter.getCenterX_trkh7z$(e)-i.x,r=t.itemAdapter.getCenterY_trkh7z$(e)-i.y,o=t.itemAdapter.getCenterZ_trkh7z$(e)-i.z;return n*n+r*r+o*o},Hk.$metadata$={kind:st,simpleName:"PointDistance",interfaces:[]},Kk.prototype.nodeSqrDistanceToRay_m0emyn$=function(t,e){return t.bounds.hitDistanceSqr_nvyeur$(e)},Kk.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){return i.sqrDistanceToPoint_y2kzbl$(t.itemAdapter.getCenterX_trkh7z$(e),t.itemAdapter.getCenterY_trkh7z$(e),t.itemAdapter.getCenterZ_trkh7z$(e))},Kk.$metadata$={kind:st,simpleName:"RayDistance",interfaces:[]},Xk.prototype.traverse_7efza$=function(t){this.traverseNode_4w85ke$(t,t.root)},Xk.prototype.traverseNode_4w85ke$=function(t,e){e.isLeaf?this.traverseLeaf_4w85ke$(t,e):this.traverseChildren_4w85ke$(t,e)},Xk.$metadata$={kind:$,simpleName:"SpatialTreeTraverser",interfaces:[]},Yk.prototype.setup_czzhiu$=function(t){this.center.set_czzhiu$(t)},Zk.$metadata$={kind:$,interfaces:[Hk]},Yk.$metadata$={kind:$,simpleName:"CenterPointTraverser",interfaces:[Xk]},Object.defineProperty(Jk.prototype,"radius",{configurable:!0,get:function(){return this.radius_z1vvhm$_0},set:function(t){this.radius_z1vvhm$_0=t}}),Jk.prototype.setup_2qa7tb$=function(t,e){return Yk.prototype.setup_czzhiu$.call(this,t),this.radius=e,this.radiusSqr=e*e,this},Jk.prototype.traverse_7efza$=function(t){this.result.clear(),Yk.prototype.traverse_7efza$.call(this,t)},Jk.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var r=e.children.get_za3lpa$(n);this.pointDistance.nodeSqrDistanceToPoint_fpn9fm$(r,this.center)<this.radiusSqr&&this.traverseNode_4w85ke$(t,r)}},Jk.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s);this.pointDistance.itemSqrDistanceToPoint_xpaqv3$(t,a,this.center)<this.radiusSqr&&this.result.add_11rb$(a)}},Jk.$metadata$={kind:$,simpleName:"InRadiusTraverser",interfaces:[Yk]},Object.defineProperty(Qk.prototype,"nearest",{configurable:!0,get:function(){return this.nearest_75fjy0$_0},set:function(t){this.nearest_75fjy0$_0=t}}),Object.defineProperty(Qk.prototype,"distance",{configurable:!0,get:function(){return this.distance_vfh9yx$_0},set:function(t){this.distance_vfh9yx$_0=t}}),Object.defineProperty(Qk.prototype,"distanceSqr",{configurable:!0,get:function(){return this.distanceSqr_1nwg87$_0},set:function(t){this.distanceSqr_1nwg87$_0=t}}),Qk.prototype.setup_nvyeur$=function(t){return this.ray.set_nvyeur$(t),this.nearest=null,this.distanceSqr=nt.MAX_VALUE,this},Qk.prototype.traverse_7efza$=function(t){var e;if(Xk.prototype.traverse_7efza$.call(this,t),this.distanceSqr!==nt.MAX_VALUE){var i=this.distanceSqr;e=A.sqrt(i)}else e=nt.MAX_VALUE;this.distance=e},Qk.prototype.traverseChildren_4w85ke$=function(t,e){var i,n,r,o=this.childLists_3dbot1$_0,s=e.children.size,a=o.childListRecycler,l=a.get();if(l.size!==s)if(l.size<s){i=s-l.size|0;for(var u=1;u<=i;u++){var p=new sS(o,0,null);l.add_11rb$(p)}}else for(;l.size>s;)l.removeAt_za3lpa$(bt(l));n=e.children;for(var c=0;c!==n.size;++c)l.get_za3lpa$(c).setChildNode_wy56ps$(e.children.get_za3lpa$(c));this.childLists_3dbot1$_0.sortByDistance_pjnhek$(l),r=e.children;for(var h=0;h!==r.size;++h){var d=l.get_za3lpa$(h);if(!(d.dist<this.distanceSqr))break;this.traverseNode_4w85ke$(t,x(d.node))}a.recycle_trkh7z$(l)},Qk.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s),l=this.rayDistance.itemSqrDistanceToRay_bo5c3m$(t,a,this.ray);l<this.distanceSqr&&(this.nearest=a,this.distanceSqr=l)}},tS.$metadata$={kind:$,interfaces:[Kk]},Qk.$metadata$={kind:$,simpleName:"NearestToRayTraverser",interfaces:[Xk]},iS.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){return e.rayDistanceSqr_nvyeur$(i)},iS.$metadata$={kind:$,interfaces:[Kk]},eS.$metadata$={kind:$,simpleName:"NearestEdgeToRayTraverser",interfaces:[Qk]},Object.defineProperty(nS.prototype,"isHit",{configurable:!0,get:function(){return null!=this.nearest}}),nS.prototype.setup_nvyeur$=function(t){return this.hitPoint.set_czzhiu$(Er().ZERO),Qk.prototype.setup_nvyeur$.call(this,t),this},nS.prototype.traverse_7efza$=function(t){Qk.prototype.traverse_7efza$.call(this,t),this.isHit&&this.hitPoint.set_czzhiu$(this.ray.direction).scale_mx4ult$(this.distance).add_czzhiu$(this.ray.origin)},rS.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){var n=e.hitDistance_nvyeur$(i);return n<nt.MAX_VALUE?n*n:nt.MAX_VALUE},rS.$metadata$={kind:$,interfaces:[Kk]},nS.$metadata$={kind:$,simpleName:"TriangleHitTraverser",interfaces:[Qk]},oS.prototype.use_swptr5$=K("kool-kool-core.de.fabmax.kool.util.spatial.ChildNodesWithDistance.use_swptr5$",X((function(){var i=t.de.fabmax.kool.util.spatial.ChildNodesWithDistance.Child,n=e.kotlin.collections.get_lastIndex_55thoc$;return function(t,e){var r,o=this.childListRecycler,s=o.get();if(s.size!==t)if(s.size<t){r=t-s.size|0;for(var a=1;a<=r;a++){var l=new i(this,0,null);s.add_11rb$(l)}}else for(;s.size>t;)s.removeAt_za3lpa$(n(s));e(s),o.recycle_trkh7z$(s)}}))),oS.prototype.sortByDistance_pjnhek$=function(t){mt(t,this.childComparator)},sS.prototype.setChildNode_wy56ps$=function(t){this.node=t,this.dist=this.$outer.childDist(t)},sS.$metadata$={kind:$,simpleName:"Child",interfaces:[]},oS.$metadata$={kind:$,simpleName:"ChildNodesWithDistance",interfaces:[]},Object.defineProperty(uS.prototype,"currentGesture",{configurable:!0,get:function(){return this.currentGesture_nrwzky$_0},set:function(t){this.currentGesture_nrwzky$_0=t}}),uS.prototype.evaluate_19cf9$=function(t,e){if(this.screenDpi=e.screenDpi,t.getActivePointers_j71cmr$(this.activePointers_ajelte$_0),this.activePointers_ajelte$_0.size>1)switch(this.currentGesture.type){case 0:this.onGestureInit_mcn869$(this.activePointers_ajelte$_0);break;case-1:this.onDetermineGesture_mcn869$(this.activePointers_ajelte$_0);break;case 1:case 2:this.handleGesture_mcn869$(this.activePointers_ajelte$_0)}else this.currentGesture.type=0,this.startPositions.clear()},uS.prototype.onGestureInit_mcn869$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next(),n=this.startPositions,r=i.id,o=new rr(i.x,i.y);n.put_xwzc9p$(r,o)}this.currentGesture.type=-1},uS.prototype.onDetermineGesture_mcn869$=function(t){var e;We(this.startPositions.keys,(e=t,function(t){var i,n=e;t:do{var r;for(r=n.iterator();r.hasNext();){var o=r.next();if(o.id===t){i=o;break t}}i=null}while(0);return null==i}));var i,n,r=M();for(i=t.iterator();i.hasNext();){var o=i.next();this.startPositions.containsKey_11rb$(o.id)||r.add_11rb$(o)}for(n=r.iterator();n.hasNext();){var s=n.next(),a=this.startPositions,l=s.id,u=new rr(s.x,s.y);a.put_xwzc9p$(l,u)}this.isPinch_mcn869$(t)?this.currentGesture.type=1:this.isTwoFingerDrag_mcn869$(t)&&(this.currentGesture.type=2)},uS.prototype.isPinch_mcn869$=function(t){return 2===t.size&&(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.tmpVec1_vwccvm$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec2_vwccwh$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec1_vwccvm$_0.length()>5&&this.tmpVec2_vwccwh$_0.length()>5&&this.tmpVec1_vwccvm$_0.times_czzhjp$(this.tmpVec2_vwccwh$_0)<0)&&(this.tmpVec1_vwccvm$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.currentGesture.init_4s1jvi$(1,this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),this.handleGesture_mcn869$(t),!0)},uS.prototype.isTwoFingerDrag_mcn869$=function(t){return 2===t.size&&(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.tmpVec1_vwccvm$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec2_vwccwh$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec1_vwccvm$_0.length()>5&&this.tmpVec2_vwccwh$_0.length()>5&&this.tmpVec1_vwccvm$_0.times_czzhjp$(this.tmpVec2_vwccwh$_0)>0)&&(this.tmpVec1_vwccvm$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.currentGesture.init_4s1jvi$(2,this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),this.handleGesture_mcn869$(t),!0)},uS.prototype.handleGesture_mcn869$=function(t){2===t.size?(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y),this.currentGesture.update_enjys2$(this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),t.get_za3lpa$(0).consume_za3lpa$(),t.get_za3lpa$(1).consume_za3lpa$()):this.currentGesture.type=0},pS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var cS=null;function hS(){return null===cS&&new pS,cS}function dS(){this.centerStart=pr(),this.centerCurrent=pr(),this.centerShift=pr(),this.dCenter=pr(),this.pinchAmountStart=0,this.pinchAmountCurrent=0,this.dPinchAmount=0,this.type=0,this.numUpdates=0}function fS(){yS(),this.cmp_ta02bd$_0=vS,this.root_g0oxgl$_0=null,this.size_g153xi$_0=0}function _S(t,e,i,n){this.$outer=t,this.parent=n,this.key_qa5ejk$_0=e,this.value_owqnua$_0=i,this.left=null,this.right=null,this.color=yS().BLACK_0}function mS(){$S=this,this.BLACK_0=!1,this.RED_0=!0}Object.defineProperty(dS.prototype,"pinchAmountRel",{configurable:!0,get:function(){return(this.pinchAmountCurrent-this.pinchAmountStart)/this.pinchAmountStart+1}}),dS.prototype.init_4s1jvi$=function(t,e,i,n){this.type=t,this.centerStart.set_czzhjp$(e).add_czzhjp$(i).scale_mx4ult$(.5),this.centerCurrent.set_czzhjp$(this.centerStart),this.centerShift.set_czzhjp$(ar().ZERO),this.dCenter.set_czzhjp$(ar().ZERO),this.pinchAmountStart=96*e.distance_czzhjp$(i)/n,this.pinchAmountCurrent=this.pinchAmountStart,this.dPinchAmount=0,this.numUpdates=0},dS.prototype.update_enjys2$=function(t,e,i){this.dCenter.set_czzhjp$(t).add_czzhjp$(e).scale_mx4ult$(.5).subtract_czzhjp$(this.centerCurrent),this.centerCurrent.set_czzhjp$(t).add_czzhjp$(e).scale_mx4ult$(.5),this.centerShift.set_czzhjp$(this.centerCurrent).subtract_czzhjp$(this.centerStart);var n=96*t.distance_czzhjp$(e)/i;this.dPinchAmount=n-this.pinchAmountCurrent,this.pinchAmountCurrent=n,this.numUpdates=this.numUpdates+1|0},dS.$metadata$={kind:$,simpleName:"Gesture",interfaces:[]},uS.$metadata$={kind:$,simpleName:"TouchGestureEvaluator",interfaces:[]},Object.defineProperty(fS.prototype,"size",{configurable:!0,get:function(){return this.size_g153xi$_0},set:function(t){this.size_g153xi$_0=t}}),fS.prototype.clear=function(){this.root_g0oxgl$_0=null,this.size=0},fS.prototype.isEmpty=function(){return 0===this.size},fS.prototype.firstEntry=function(){var t=this.root_g0oxgl$_0;if(null!=t)for(;null!=(null!=t?t.left:null);)t=x(t.left);if(null==t)throw ht();return t},fS.prototype.firstValue=function(){return this.firstEntry().value},fS.prototype.firstKey=function(){return this.firstEntry().key},fS.prototype.lastEntry=function(){var t=this.root_g0oxgl$_0;if(null!=t)for(;null!=(null!=t?t.right:null);)t=x(t.right);if(null==t)throw ht();return t},fS.prototype.lastValue=function(){return this.lastEntry().value},fS.prototype.lastKey=function(){return this.lastEntry().key},fS.prototype.ceilingEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;){var i=this.cmp_ta02bd$_0(t,e.key);if(i<0){if(null==e.left)return e;e=e.left}else{if(!(i>0))return e;if(null==e.right){for(var n=e.parent,r=e;null!=n&&r===n.right;)r=n,n=n.parent;return n}e=e.right}}return null},fS.prototype.ceilingKey_trkh7z$=function(t){var e;return null!=(e=this.ceilingEntry_trkh7z$(t))?e.key:null},fS.prototype.ceilingValue_trkh7z$=function(t){var e;return null!=(e=this.ceilingEntry_trkh7z$(t))?e.value:null},fS.prototype.floorEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;){var i=this.cmp_ta02bd$_0(t,e.key);if(i>0){if(null==e.right)return e;e=e.right}else{if(!(i<0))return e;if(null==e.left){for(var n=e.parent,r=e;null!=n&&r===n.left;)r=n,n=n.parent;return n}e=e.left}}return null},fS.prototype.floorKey_trkh7z$=function(t){var e;return null!=(e=this.floorEntry_trkh7z$(t))?e.key:null},fS.prototype.floorValue_trkh7z$=function(t){var e;return null!=(e=this.floorEntry_trkh7z$(t))?e.value:null},fS.prototype.higherEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;)if(this.cmp_ta02bd$_0(t,e.key)<0){if(null==e.left)return e;e=e.left}else{if(null==e.right){for(var i=e.parent,n=e;null!=i&&n===i.right;)n=i,i=i.parent;return i}e=e.right}return null},fS.prototype.higherKey_trkh7z$=function(t){var e;return null!=(e=this.higherEntry_trkh7z$(t))?e.key:null},fS.prototype.higherValue_trkh7z$=function(t){var e;return null!=(e=this.higherEntry_trkh7z$(t))?e.value:null},fS.prototype.lowerEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;)if(this.cmp_ta02bd$_0(t,e.key)>0){if(null==e.right)return e;e=e.right}else{if(null==e.left){for(var i=e.parent,n=e;null!=i&&n===i.left;)n=i,i=i.parent;return i}e=e.left}return null},fS.prototype.lowerKey_trkh7z$=function(t){var e;return null!=(e=this.lowerEntry_trkh7z$(t))?e.key:null},fS.prototype.lowerValue_trkh7z$=function(t){var e;return null!=(e=this.lowerEntry_trkh7z$(t))?e.value:null},fS.prototype.put_xwzc9p$=function(t,e){var i;if(null==this.root_g0oxgl$_0)this.root_g0oxgl$_0=new _S(this,t,e,null);else{var n,r=this.root_g0oxgl$_0;do{if(n=x(r),this.cmp_ta02bd$_0(t,r.key)<0)i=r.left;else{if(!(this.cmp_ta02bd$_0(t,r.key)>0))return r.setValue_11rc$(e);i=r.right}r=i}while(null!=r);var o=new _S(this,t,e,n);this.cmp_ta02bd$_0(t,n.key)<0?n.left=o:n.right=o,this.fixAfterInsertion_9avj2i$_0(o)}return this.size=this.size+1|0,null},fS.prototype.remove_11rb$=function(t){var e,i;if(null!=(e=this.getEntry_iowdmk$_0(t))){var n=e.value;this.deleteEntry_xb9s9j$_0(e),i=n}else i=null;return i},fS.prototype.get_11rb$=function(t){var e;return null!=(e=this.getEntry_iowdmk$_0(t))?e.value:null},Object.defineProperty(fS.prototype,"entries",{configurable:!0,get:function(){var t,i=ct();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,_S)?t:c();null!=n;){var r=n;i.add_11rb$(r),n=this.successor_78gl9k$_0(n)}return i}}),Object.defineProperty(fS.prototype,"keys",{configurable:!0,get:function(){var t,i=ct();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,_S)?t:c();null!=n;){var r=n.key;i.add_11rb$(r),n=this.successor_78gl9k$_0(n)}return i}}),Object.defineProperty(fS.prototype,"values",{configurable:!0,get:function(){var t,i=ct();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,_S)?t:c();null!=n;){var r=n.value;i.add_11rb$(r),n=this.successor_78gl9k$_0(n)}return i}}),fS.prototype.containsKey_11rb$=function(t){return null!=this.getEntry_iowdmk$_0(t)},fS.prototype.containsValue_11rc$=function(t){return this.values.contains_11rb$(t)},fS.prototype.putAll_a2k3zr$=function(t){var e;for(e=t.entries.iterator();e.hasNext();){var i=e.next();this.put_xwzc9p$(i.key,i.value)}},fS.prototype.getEntry_iowdmk$_0=function(t){for(var e,i=this.root_g0oxgl$_0;null!=i;){if(this.cmp_ta02bd$_0(t,i.key)<0)e=i.left;else{if(!(this.cmp_ta02bd$_0(t,i.key)>0))return i;e=i.right}i=e}return null},fS.prototype.deleteEntry_xb9s9j$_0=function(t){var e=t;if(this.size=this.size-1|0,null!=e.left&&null!=e.right){var i=x(this.successor_78gl9k$_0(e));e.key=i.key,e.value=i.value,e=i}var n=null!=e.left?e.left:e.right;null!=n?(n.parent=e.parent,null==e.parent?this.root_g0oxgl$_0=n:e===x(e.parent).left?x(e.parent).left=n:x(e.parent).right=n,e.left=null,e.right=null,e.parent=null,e.color===yS().BLACK_0&&this.fixAfterDeletion_6ssue5$_0(n)):null==e.parent?this.root_g0oxgl$_0=null:(e.color===yS().BLACK_0&&this.fixAfterDeletion_6ssue5$_0(e),null!=e.parent&&(e===x(e.parent).left?x(e.parent).left=null:e===x(e.parent).right&&(x(e.parent).right=null),e.parent=null))},fS.prototype.fixAfterInsertion_9avj2i$_0=function(t){var e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S=t;for(null!=S&&(S.color=yS().RED_0);null!=S&&!zt(S,this.root_g0oxgl$_0)&&this.color_3jivvv$_0(S.parent)===yS().RED_0;)if(S.parent===(null!=(i=null!=(e=S.parent)?e.parent:null)?i.left:null)){var C=null!=(r=null!=(n=S.parent)?n.parent:null)?r.right:null;this.color_3jivvv$_0(C)===yS().RED_0?(null!=(o=S.parent)&&(o.color=yS().BLACK_0),null!=C&&(C.color=yS().BLACK_0),null!=(a=null!=(s=S.parent)?s.parent:null)&&(a.color=yS().RED_0),S=null!=(l=S.parent)?l.parent:null):(S===(null!=(u=S.parent)?u.right:null)&&(S=S.parent,this.rotateLeft_xtlw1j$_0(S)),null!=(p=null!=S?S.parent:null)&&(p.color=yS().BLACK_0),null!=(h=null!=(c=null!=S?S.parent:null)?c.parent:null)&&(h.color=yS().RED_0),this.rotateRight_ltp9a$_0(null!=(d=null!=S?S.parent:null)?d.parent:null))}else{var N=null!=(_=null!=(f=S.parent)?f.parent:null)?_.left:null;this.color_3jivvv$_0(N)===yS().RED_0?(null!=(m=S.parent)&&(m.color=yS().BLACK_0),null!=N&&(N.color=yS().BLACK_0),null!=(y=null!=($=S.parent)?$.parent:null)&&(y.color=yS().RED_0),S=null!=(v=S.parent)?v.parent:null):(S===(null!=(g=S.parent)?g.left:null)&&(S=S.parent,this.rotateRight_ltp9a$_0(S)),null!=(b=null!=S?S.parent:null)&&(b.color=yS().BLACK_0),null!=(w=null!=(x=null!=S?S.parent:null)?x.parent:null)&&(w.color=yS().RED_0),this.rotateLeft_xtlw1j$_0(null!=(z=null!=S?S.parent:null)?z.parent:null))}null!=(k=this.root_g0oxgl$_0)&&(k.color=yS().BLACK_0)},fS.prototype.fixAfterDeletion_6ssue5$_0=function(t){for(var e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m=t;!zt(m,this.root_g0oxgl$_0)&&m.color===yS().BLACK_0;)if(zt(m,null!=(e=m.parent)?e.left:null)){var $=null!=(i=m.parent)?i.right:null;this.color_3jivvv$_0($)===yS().RED_0&&(null!=$&&($.color=yS().BLACK_0),null!=(n=m.parent)&&(n.color=yS().RED_0),this.rotateLeft_xtlw1j$_0(m.parent),$=null!=(r=m.parent)?r.right:null),this.color_3jivvv$_0(null!=$?$.left:null)===yS().BLACK_0&&this.color_3jivvv$_0(null!=$?$.right:null)===yS().BLACK_0?(null!=$&&($.color=yS().RED_0),m=x(m.parent)):(this.color_3jivvv$_0(null!=$?$.right:null)===yS().BLACK_0&&(null!=(o=null!=$?$.left:null)&&(o.color=yS().BLACK_0),null!=$&&($.color=yS().RED_0),this.rotateRight_ltp9a$_0($),$=null!=(s=m.parent)?s.right:null),null!=$&&($.color=this.color_3jivvv$_0(m.parent)),null!=(a=m.parent)&&(a.color=yS().BLACK_0),null!=(l=null!=$?$.right:null)&&(l.color=yS().BLACK_0),this.rotateLeft_xtlw1j$_0(m.parent),m=x(this.root_g0oxgl$_0))}else{var y=null!=(u=m.parent)?u.left:null;this.color_3jivvv$_0(y)===yS().RED_0&&(null!=y&&(y.color=yS().BLACK_0),null!=(p=null!=y?y.parent:null)&&(p.color=yS().RED_0),this.rotateRight_ltp9a$_0(m.parent),y=null!=(c=m.parent)?c.left:null),this.color_3jivvv$_0(null!=y?y.right:null)===yS().BLACK_0&&this.color_3jivvv$_0(null!=y?y.left:null)===yS().BLACK_0?(null!=y&&(y.color=yS().RED_0),m=x(m.parent)):(this.color_3jivvv$_0(null!=y?y.left:null)===yS().BLACK_0&&(null!=(h=null!=y?y.right:null)&&(h.color=yS().BLACK_0),null!=y&&(y.color=yS().RED_0),this.rotateLeft_xtlw1j$_0(y),y=null!=(d=m.parent)?d.left:null),null!=y&&(y.color=this.color_3jivvv$_0(m.parent)),null!=(f=m.parent)&&(f.color=yS().BLACK_0),null!=(_=null!=y?y.left:null)&&(_.color=yS().BLACK_0),this.rotateRight_ltp9a$_0(m.parent),m=x(this.root_g0oxgl$_0))}m.color=yS().BLACK_0},fS.prototype.rotateLeft_xtlw1j$_0=function(t){var e,i,n;if(null!=t){var r,o=t.right;t.right=null!=o?o.left:null,null!=(null!=o?o.left:null)&&null!=(e=o.left)&&(e.parent=t),null!=o&&(o.parent=t.parent),null==t.parent?this.root_g0oxgl$_0=o:(null!=(r=t.parent)?r.left:null)===t?null!=(i=t.parent)&&(i.left=o):null!=(n=t.parent)&&(n.right=o),null!=o&&(o.left=t),t.parent=o}},fS.prototype.rotateRight_ltp9a$_0=function(t){var e,i,n;if(null!=t){var r,o=t.left;t.left=null!=o?o.right:null,null!=(null!=o?o.right:null)&&null!=(e=o.right)&&(e.parent=t),null!=o&&(o.parent=t.parent),null==t.parent?this.root_g0oxgl$_0=o:(null!=(r=t.parent)?r.right:null)===t?null!=(i=t.parent)&&(i.right=o):null!=(n=t.parent)&&(n.left=o),null!=o&&(o.right=t),t.parent=o}},fS.prototype.color_3jivvv$_0=function(t){var e;return null!=(e=null!=t?t.color:null)?e:yS().BLACK_0},fS.prototype.successor_78gl9k$_0=function(t){var e;if(null==t)e=null;else if(null!=t.right){for(var i=x(t.right);null!=i.left;)i=x(i.left);e=i}else{for(var n=t.parent,r=t;null!=n&&zt(r,n.right);)r=n,n=n.parent;e=n}return e},fS.prototype.predecessor_3j2kg5$_0=function(t){var e;if(null==t)e=null;else if(null!=t.left){for(var i=x(t.left);null!=i.right;)i=x(i.right);e=i}else{for(var n=t.parent,r=t;null!=n&&zt(r,n.left);)r=n,n=n.parent;e=n}return e},Object.defineProperty(_S.prototype,"key",{configurable:!0,get:function(){return this.key_qa5ejk$_0},set:function(t){this.key_qa5ejk$_0=t}}),Object.defineProperty(_S.prototype,"value",{configurable:!0,get:function(){return this.value_owqnua$_0},set:function(t){this.value_owqnua$_0=t}}),_S.prototype.setValue_11rc$=function(t){var e=this.value;return this.value=t,e},_S.$metadata$={kind:$,simpleName:"MapEntry",interfaces:[Ke]},mS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var $S=null;function yS(){return null===$S&&new mS,$S}function vS(t,i){var n;return e.compareTo(e.isComparable(n=t)?n:c(),i)}function gS(t,i){var n,r,o,s,a,l,u,p;Mr(this),this.data=t,this.offsetF_0=e.imul(i,this.data.vertexSizeF),this.offsetI_0=e.imul(i,this.data.vertexSizeI),this.index_qsqbze$_0=i,this.position=null,this.normal=null,this.tangent=null,this.color=null,this.texCoord=null,this.joints=null,this.weights=null,this.attributeViews_0=null;var c=z();for(this.attributeViews_0=c,n=this.data.attributeByteOffsets.entries.iterator();n.hasNext();){var h=n.next();switch(h.key.type.name){case"FLOAT":var d=h.key,f=new bS(this,h.value/4|0);c.put_xwzc9p$(d,f);break;case"VEC_2F":var _=h.key,m=new xS(this,h.value/4|0);c.put_xwzc9p$(_,m);break;case"VEC_3F":var $=h.key,y=new wS(this,h.value/4|0);c.put_xwzc9p$($,y);break;case"VEC_4F":var v=h.key,g=new zS(this,h.value/4|0);c.put_xwzc9p$(v,g);break;case"INT":var b=h.key,x=new SS(this,h.value/4|0);c.put_xwzc9p$(b,x);break;case"VEC_2I":var w=h.key,k=new CS(this,h.value/4|0);c.put_xwzc9p$(w,k);break;case"VEC_3I":var S=h.key,C=new NS(this,h.value/4|0);c.put_xwzc9p$(S,C);break;case"VEC_4I":var N=h.key,E=new ES(this,h.value/4|0);c.put_xwzc9p$(N,E);break;default:throw V(h.key.type.toString()+" is not a valid vertex attribute")}}this.position=null!=(r=this.getVec3fAttribute_nm2vx5$(ds().POSITIONS))?r:new wS(this,-1),this.normal=null!=(o=this.getVec3fAttribute_nm2vx5$(ds().NORMALS))?o:new wS(this,-1),this.tangent=null!=(s=this.getVec4fAttribute_nm2vx5$(ds().TANGENTS))?s:new zS(this,-1),this.texCoord=null!=(a=this.getVec2fAttribute_nm2vx5$(ds().TEXTURE_COORDS))?a:new xS(this,-1),this.color=null!=(l=this.getColorAttribute_nm2vx5$(ds().COLORS))?l:new kS(this,new zS(this,-1)),this.joints=null!=(u=this.getVec4iAttribute_nm2vx5$(ds().JOINTS))?u:new ES(this,-1),this.weights=null!=(p=this.getVec4fAttribute_nm2vx5$(ds().WEIGHTS))?p:new zS(this,-1)}function bS(t,e){this.$outer=t,this.attribOffset_0=e}function xS(t,e){this.$outer=t,pr(this),this.attribOffset_0=e}function wS(t,e){this.$outer=t,Mr(this),this.attribOffset=e}function zS(t,e){this.$outer=t,no(this),this.attribOffset=e}function kS(t,e){this.$outer=t,H$(this),this.vecView=e}function SS(t,e){this.$outer=t,this.attribOffset_0=e}function CS(t,e){this.$outer=t,kr(this),this.attribOffset_0=e}function NS(t,e){this.$outer=t,Xr(this),this.attribOffset_0=e}function ES(t,e){this.$outer=t,Eo(this),this.attribOffset_0=e}function PS(t,e,i,n){this.x=t,this.ySigned=e,this.width=i,this.heightSigned=n}function TS(t){return RS().createContext_s8od96$(t)}function OS(){var t;return"number"==typeof(t=performance.now())?t:c()}function MS(t,i){var n=i<0?0:i>12?12:i,r=t<0?"-":"",o=A.abs(t);if(0===n)return r+Xe(o).toString();var s=Xe(A.pow(10,n)),a=Xe(o%1*s.toNumber());zt(a,s)&&(a=C,o+=1);for(var l=a.toString();l.length<n;)l="0"+l;return r+e.Long.fromNumber(o).toString()+"."+l}function jS(){var t,i;AS=this,this.dpi=0,this.ctx=null;var n=document.getElementById("dpiMeasure");if(null==n){var r=qN.Log,o=vz.WARN,s=e.getKClassFromExpression(this).simpleName;o.level>=r.level.level&&r.printer(o,s,"dpiMeasure element not found, falling back to 96 dpi");var a=qN.Log,l=vz.WARN,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"Add this hidden div to your html:");var p=qN.Log,h=vz.WARN,d=e.getKClassFromExpression(this).simpleName;h.level>=p.level.level&&p.printer(h,d,'<div id="dpiMeasure" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>'),i=96}else i=(e.isType(t=n,HTMLDivElement)?t:c()).offsetWidth;this.dpi=i}fS.$metadata$={kind:$,simpleName:"TreeMap",interfaces:[Ht]},Object.defineProperty(gS.prototype,"index",{configurable:!0,get:function(){return this.index_qsqbze$_0},set:function(t){this.index_qsqbze$_0=t,this.offsetF_0=e.imul(t,this.data.vertexSizeF),this.offsetI_0=e.imul(t,this.data.vertexSizeI)}}),gS.prototype.get_za3lpa$=function(t){return this.position.get_za3lpa$(t)},gS.prototype.set_24o109$=function(t,e){this.position.set_24o109$(t,e)},gS.prototype.set_fs4kvg$=function(t){var i,n,r,o,s,a,l,u,p;for(i=this.attributeViews_0.keys.iterator();i.hasNext();){var h=i.next(),d=t.attributeViews_0.get_11rb$(h);null!=d&&(e.isType(d,bS)?(e.isType(n=this.attributeViews_0.get_11rb$(h),bS)?n:c()).f=d.f:e.isType(d,xS)?(e.isType(r=this.attributeViews_0.get_11rb$(h),xS)?r:c()).set_czzhjp$(d):e.isType(d,wS)?(e.isType(o=this.attributeViews_0.get_11rb$(h),wS)?o:c()).set_czzhiu$(d):e.isType(d,zS)?(e.isType(s=this.attributeViews_0.get_11rb$(h),zS)?s:c()).set_czzhhz$(d):e.isType(d,SS)?(e.isType(a=this.attributeViews_0.get_11rb$(h),SS)?a:c()).i=d.i:e.isType(d,CS)?(e.isType(l=this.attributeViews_0.get_11rb$(h),CS)?l:c()).set_czzhjm$(d):e.isType(d,NS)?(e.isType(u=this.attributeViews_0.get_11rb$(h),NS)?u:c()).set_czzhir$(d):e.isType(d,ES)&&(e.isType(p=this.attributeViews_0.get_11rb$(h),ES)?p:c()).set_czzhhw$(d))}},gS.prototype.getFloatAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,bS)?i:c()},gS.prototype.getVec2fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,ur)?i:c()},gS.prototype.getVec3fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,Or)?i:c()},gS.prototype.getVec4fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,io)?i:c()},gS.prototype.getColorAttribute_nm2vx5$=function(t){var i,n;return null!=(i=this.attributeViews_0.get_11rb$(t))?new kS(this,e.isType(n=i,zS)?n:c()):null},gS.prototype.getIntAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,SS)?i:c()},gS.prototype.getVec2iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,CS)?i:c()},gS.prototype.getVec3iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,NS)?i:c()},gS.prototype.getVec4iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,ES)?i:c()},Object.defineProperty(bS.prototype,"f",{configurable:!0,get:function(){return this.attribOffset_0<0?0:this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset_0|0)},set:function(t){this.attribOffset_0>=0&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset_0|0,t)}}),bS.$metadata$={kind:$,simpleName:"FloatView",interfaces:[]},xS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=1?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset_0+t|0):0},xS.prototype.set_24o109$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=1&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset_0+t|0,e)},xS.$metadata$={kind:$,simpleName:"Vec2fView",interfaces:[ur]},wS.prototype.get_za3lpa$=function(t){return this.attribOffset>=0&&0<=t&&t<=2?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset+t|0):0},wS.prototype.set_24o109$=function(t,e){this.attribOffset>=0&&0<=t&&t<=2&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset+t|0,e)},wS.$metadata$={kind:$,simpleName:"Vec3fView",interfaces:[Or]},zS.prototype.get_za3lpa$=function(t){return this.attribOffset>=0&&0<=t&&t<=3?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset+t|0):0},zS.prototype.set_24o109$=function(t,e){this.attribOffset>=0&&0<=t&&t<=3&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset+t|0,e)},zS.$metadata$={kind:$,simpleName:"Vec4fView",interfaces:[io]},kS.prototype.get_za3lpa$=function(t){return this.vecView.get_za3lpa$(t)},kS.prototype.set_24o109$=function(t,e){this.vecView.set_24o109$(t,e)},kS.$metadata$={kind:$,simpleName:"ColorWrapView",interfaces:[G$]},Object.defineProperty(SS.prototype,"i",{configurable:!0,get:function(){return this.attribOffset_0<0?0:this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0|0)},set:function(t){this.attribOffset_0>=0&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0|0,t)}}),SS.$metadata$={kind:$,simpleName:"IntView",interfaces:[]},CS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=1?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},CS.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=1&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},CS.$metadata$={kind:$,simpleName:"Vec2iView",interfaces:[zr]},NS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=2?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},NS.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=2&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},NS.$metadata$={kind:$,simpleName:"Vec3iView",interfaces:[Kr]},ES.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=3?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},ES.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=3&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},ES.$metadata$={kind:$,simpleName:"Vec4iView",interfaces:[No]},gS.$metadata$={kind:$,simpleName:"VertexView",interfaces:[Or]},Object.defineProperty(PS.prototype,"y",{configurable:!0,get:function(){return this.heightSigned<0?this.ySigned+this.heightSigned|0:this.ySigned}}),Object.defineProperty(PS.prototype,"height",{configurable:!0,get:function(){return tt(this.heightSigned)}}),Object.defineProperty(PS.prototype,"aspectRatio",{configurable:!0,get:function(){return this.width/this.height}}),PS.prototype.isInViewport_dleff0$=function(t,e){return t>=this.x&&t<(this.x+this.width|0)&&e>=e&&e<e+this.height},PS.prototype.set_tjonv8$=function(t,e,i,n){this.x=t,this.width=i,this.ySigned=e,this.heightSigned=n},PS.$metadata$={kind:$,simpleName:"Viewport",interfaces:[]},Object.defineProperty(jS.prototype,"gl",{configurable:!0,get:function(){var t,e;if(null==(e=null!=(t=this.ctx)?t.gl_8be2vx$:null))throw cn("Platform.createContext() not called");return e}}),jS.prototype.createContext_s8od96$=function(t){if(null!=this.ctx)throw cn("Context was already created (multi-context is currently not supported in js");return this.ctx=new hC(t),x(this.ctx)},jS.$metadata$={kind:y,simpleName:"JsImpl",interfaces:[]};var AS=null;function RS(){return null===AS&&new jS,AS}function IS(t){var e;this.offscreenPass=t,this.fbos_0=M(),this.rbos_0=M(),this.drawMipLevels_0=this.offscreenPass.config.drawMipLevels,e=this.drawMipLevels_0?this.offscreenPass.config.mipLevels:1,this.renderMipLevels_0=e,this.isCreated_0=!1;var i,n=R(this.offscreenPass.config.nColorAttachments);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=null;this.colorTexs_0=n,this.depthTex_0=null}function LS(t){BS(),this.offscreenPass=t,this.fbos_0=M(),this.rbos_0=M(),this.isCreated_0=!1,this.colorTex_0=null}function DS(){qS=this;var t,e=R(6);t=e.length-1|0;for(var i=0;i<=t;i++){var n;t:do{switch(i){case 0:n=$a();break t;case 1:n=ma();break t;case 2:n=ya();break t;case 3:n=va();break t;case 4:n=fa();break t;case 5:n=_a();break t;default:throw Ye()}}while(0);e[i]=n}this.VIEWS_0=e}IS.prototype.draw_44a5h0$=function(t){var e,i,n;if(this.isCreated_0||this.create_0(t),this.isCreated_0){e=this.renderMipLevels_0;for(var r=0;r<e;r++)null!=(i=this.offscreenPass.onSetupMipLevel)&&i(r,t),this.offscreenPass.applyMipViewport_za3lpa$(r),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(r)),t.queueRenderer_8be2vx$.renderQueue_e0goaf$(this.offscreenPass.drawQueue);if(!this.drawMipLevels_0){n=this.colorTexs_0;for(var o=0;o!==n.length;++o)t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.colorTexs_0[o]),t.gl_8be2vx$.generateMipmap(WebGLRenderingContext.TEXTURE_2D)}this.copyToTextures_0(t),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)}},IS.prototype.copyToTextures_0=function(t){var i,n,r;i=this.renderMipLevels_0;for(var o=0;o<i;o++){t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(o)),t.gl_8be2vx$.readBuffer(WebGLRenderingContext.COLOR_ATTACHMENT0),n=this.offscreenPass.copyTargetsColor;for(var s=0;s!==n.size;++s){var a,l,u,p,h,d,f=this.offscreenPass.copyTargetsColor.get_za3lpa$(s),_=null!=(l=null!=(a=f.loadedTexture)?a.width:null)?l:0,m=null!=(p=null!=(u=f.loadedTexture)?u.height:null)?p:0;_===this.offscreenPass.width&&m===this.offscreenPass.height||(null!=(h=f.loadedTexture)&&h.dispose(),this.createCopyTexColor_0(f,t),_=x(f.loadedTexture).width,m=x(f.loadedTexture).height),_>>=o,m>>=o;var $=e.isType(d=f.loadedTexture,OC)?d:c();t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,$.texture),t.gl_8be2vx$.copyTexSubImage2D(WebGLRenderingContext.TEXTURE_2D,o,0,0,0,0,_,m)}}if(!this.drawMipLevels_0){r=this.offscreenPass.copyTargetsColor;for(var y=0;y!==r.size;++y){var v,g=this.offscreenPass.copyTargetsColor.get_za3lpa$(y),b=e.isType(v=g.loadedTexture,OC)?v:c();t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,b.texture),t.gl_8be2vx$.generateMipmap(WebGLRenderingContext.TEXTURE_2D)}}},IS.prototype.dispose_aemszp$=function(t){var i,n,r,o,s;for(e.isType(t,hC)||c(),r=this.fbos_0.iterator();r.hasNext();){var a=r.next();t.gl_8be2vx$.deleteFramebuffer(a)}for(o=this.rbos_0.iterator();o.hasNext();){var l=o.next();t.gl_8be2vx$.deleteRenderbuffer(l)}for(this.fbos_0.clear(),this.rbos_0.clear(),s=this.offscreenPass.colorTextures.iterator();s.hasNext();){var u=s.next();u.loadingState===rh()&&u.dispose()}null!=(i=this.offscreenPass.depthTexture)&&i.loadingState===rh()&&i.dispose(),n=this.colorTexs_0;for(var p=0;p!==n.length;++p)this.colorTexs_0[p]=null;this.depthTex_0=null,this.isCreated_0=!1},IS.prototype.applySize_w70mbp$=function(t,i,n){var r;this.dispose_aemszp$(n),this.create_0(e.isType(r=n,hC)?r:c())},IS.prototype.create_0=function(t){var e,i=t.gl_8be2vx$;this.offscreenPass.config.colorRenderTarget===aa()&&this.createColorTexs_0(t),this.offscreenPass.config.depthRenderTarget===aa()&&this.createDepthTex_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){var r=this.offscreenPass.getMipWidth_za3lpa$(n),o=this.offscreenPass.getMipHeight_za3lpa$(n),s=i.createFramebuffer();if(i.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,s),this.offscreenPass.config.colorRenderTarget===aa()){var a,l,u=this.colorTexs_0,p=0;for(a=0;a!==u.length;++a){var c=u[a],h=(p=(l=p)+1|0,l);i.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0+h|0,WebGLRenderingContext.TEXTURE_2D,c,n)}var d,f=new Int32Array(this.colorTexs_0.length);d=f.length-1|0;for(var _=0;_<=d;_++)f[_]=WebGLRenderingContext.COLOR_ATTACHMENT0+_|0;var m=f;i.drawBuffers(m)}else{var $=i.createRenderbuffer();i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,$),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,gC(Gc()),r,o),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,WebGLRenderingContext.RENDERBUFFER,$),this.rbos_0.add_11rb$($)}if(this.offscreenPass.config.depthRenderTarget===aa())i.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.TEXTURE_2D,this.depthTex_0,n);else{var y=i.createRenderbuffer();i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,y),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,WebGL2RenderingContext.DEPTH_COMPONENT24,r,o),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.RENDERBUFFER,y),this.rbos_0.add_11rb$(y)}this.fbos_0.add_11rb$(s)}this.isCreated_0=!0},IS.prototype.createColorTexs_0=function(t){var i;i=this.offscreenPass.colorTextures;for(var n=0;n!==i.size;++n){var r,o=this.offscreenPass.config.colorAttachments.get_za3lpa$(n);if(null!=o.providedTexture)this.colorTexs_0[n]=(e.isType(r=o.providedTexture.loadedTexture,OC)?r:c()).texture;else{var s=o.colorFormat,a=gC(s),l=this.offscreenPass.width,u=this.offscreenPass.height,p=this.offscreenPass.config.mipLevels,h=lh().estimatedTexSize_4qozqa$(l,u,wC(s),1,p),d=new OC(t,WebGLRenderingContext.TEXTURE_2D,t.gl_8be2vx$.createTexture(),h);d.setSize_vux9f0$(l,u),d.applySamplerProps_xetyfc$(this.offscreenPass.colorTextures.get_za3lpa$(n).props),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,p,a,l,u),this.colorTexs_0[n]=d.texture,this.offscreenPass.colorTextures.get_za3lpa$(n).loadedTexture=d,this.offscreenPass.colorTextures.get_za3lpa$(n).loadingState=rh()}}},IS.prototype.createDepthTex_0=function(t){var i,n=x(this.offscreenPass.config.depthAttachment);if(null!=n.providedTexture)this.depthTex_0=(e.isType(i=n.providedTexture.loadedTexture,OC)?i:c()).texture;else{var r=WebGL2RenderingContext.DEPTH_COMPONENT24,o=this.offscreenPass.width,s=this.offscreenPass.height,a=this.offscreenPass.config.mipLevels,l=this.offscreenPass.config.depthAttachment,u=lh().estimatedTexSize_4qozqa$(o,s,4,1,a),p=new OC(t,WebGLRenderingContext.TEXTURE_2D,t.gl_8be2vx$.createTexture(),u);p.setSize_vux9f0$(o,s),p.applySamplerProps_xetyfc$(x(this.offscreenPass.depthTexture).props),l.depthCompareOp!==pl()&&(t.gl_8be2vx$.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGL2RenderingContext.TEXTURE_COMPARE_MODE,WebGL2RenderingContext.COMPARE_REF_TO_TEXTURE),t.gl_8be2vx$.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGL2RenderingContext.TEXTURE_COMPARE_FUNC,zC(l.depthCompareOp))),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,a,r,o,s),this.depthTex_0=p.texture,this.offscreenPass.depthTexture.loadedTexture=p,this.offscreenPass.depthTexture.loadingState=rh()}},IS.prototype.createCopyTexColor_0=function(t,e){var i=gC(t.props.format),n=this.offscreenPass.width,r=this.offscreenPass.height,o=this.offscreenPass.config.mipLevels,s=lh().estimatedTexSize_4qozqa$(n,r,wC(t.props.format),1,o),a=new OC(e,WebGLRenderingContext.TEXTURE_2D,e.gl_8be2vx$.createTexture(),s);a.setSize_vux9f0$(n,r),a.applySamplerProps_xetyfc$(t.props),e.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,o,i,n,r),t.loadedTexture=a,t.loadingState=rh()},IS.$metadata$={kind:$,simpleName:"OffscreenPass2dImpl",interfaces:[]},LS.prototype.draw_44a5h0$=function(t){var e,i;this.isCreated_0||this.create_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){null!=(i=this.offscreenPass.onSetupMipLevel)&&i(n,t),this.offscreenPass.applyMipViewport_za3lpa$(n),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(n));for(var r=0;r<6;r++){var o=BS().VIEWS_0[r],s=this.offscreenPass.drawQueues[o.index];t.gl_8be2vx$.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X+r|0,this.colorTex_0,n),t.queueRenderer_8be2vx$.renderQueue_e0goaf$(s),this.copyToTextures_0(r,n,t)}}t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)},LS.prototype.copyToTextures_0=function(t,i,n){var r;n.gl_8be2vx$.readBuffer(WebGLRenderingContext.COLOR_ATTACHMENT0),r=this.offscreenPass.copyTargetsColor;for(var o=0;o!==r.size;++o){var s,a,l,u,p,h,d=this.offscreenPass.copyTargetsColor.get_za3lpa$(o),f=null!=(a=null!=(s=d.loadedTexture)?s.width:null)?a:0,_=null!=(u=null!=(l=d.loadedTexture)?l.height:null)?u:0;f===this.offscreenPass.width&&_===this.offscreenPass.height||(null!=(p=d.loadedTexture)&&p.dispose(),this.createCopyTexColor_0(d,n),f=x(d.loadedTexture).width,_=x(d.loadedTexture).height),f>>=i,_>>=i;var m=e.isType(h=d.loadedTexture,OC)?h:c();n.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_CUBE_MAP,m.texture),n.gl_8be2vx$.copyTexSubImage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X+t|0,i,0,0,0,0,f,_)}},LS.prototype.dispose_aemszp$=function(t){var i,n,r,o;for(e.isType(t,hC)||c(),n=this.fbos_0.iterator();n.hasNext();){var s=n.next();t.gl_8be2vx$.deleteFramebuffer(s)}for(r=this.rbos_0.iterator();r.hasNext();){var a=r.next();t.gl_8be2vx$.deleteRenderbuffer(a)}for(this.fbos_0.clear(),this.rbos_0.clear(),o=this.offscreenPass.colorTextures.iterator();o.hasNext();){var l=o.next();l.loadingState===rh()&&l.dispose()}null!=(i=this.offscreenPass.depthTexture)&&i.loadingState===rh()&&i.dispose(),this.colorTex_0=null,this.isCreated_0=!1},LS.prototype.applySize_w70mbp$=function(t,i,n){var r;this.dispose_aemszp$(n),this.create_0(e.isType(r=n,hC)?r:c())},LS.prototype.create_0=function(t){var e,i=t.gl_8be2vx$;this.createColorTex_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){var r=i.createFramebuffer(),o=i.createRenderbuffer(),s=this.offscreenPass.getMipWidth_za3lpa$(n),a=this.offscreenPass.getMipHeight_za3lpa$(n);i.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,r),i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,o),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,WebGL2RenderingContext.DEPTH_COMPONENT24,s,a),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.RENDERBUFFER,o),this.fbos_0.add_11rb$(r),this.rbos_0.add_11rb$(o)}this.isCreated_0=!0},LS.prototype.createColorTex_0=function(t){var e=this.offscreenPass.config.colorAttachments.get_za3lpa$(0).colorFormat,i=gC(e),n=this.offscreenPass.width,r=this.offscreenPass.height,o=this.offscreenPass.config.mipLevels,s=lh().estimatedTexSize_4qozqa$(n,r,wC(e),6,o),a=new OC(t,WebGLRenderingContext.TEXTURE_CUBE_MAP,t.gl_8be2vx$.createTexture(),s);a.setSize_vux9f0$(n,r),a.applySamplerProps_xetyfc$(x(this.offscreenPass.colorTexture).props),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP,o,i,n,r),this.colorTex_0=a.texture,x(this.offscreenPass.colorTexture).loadedTexture=a,x(this.offscreenPass.colorTexture).loadingState=rh()},LS.prototype.createCopyTexColor_0=function(t,e){var i=gC(t.props.format),n=this.offscreenPass.width,r=this.offscreenPass.height,o=this.offscreenPass.config.mipLevels,s=lh().estimatedTexSize_4qozqa$(n,r,wC(t.props.format),6,o),a=new OC(e,WebGLRenderingContext.TEXTURE_CUBE_MAP,e.gl_8be2vx$.createTexture(),s);a.setSize_vux9f0$(n,r),a.applySamplerProps_xetyfc$(t.props),e.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP,o,i,n,r),t.loadedTexture=a,t.loadingState=rh()},DS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var qS=null;function BS(){return null===qS&&new DS,qS}function FS(t){switch(this.nSlots=0,this.attribSize=0,t.type.name){case"FLOAT":this.nSlots=1,this.attribSize=1;break;case"VEC_2F":this.nSlots=1,this.attribSize=2;break;case"VEC_3F":this.nSlots=1,this.attribSize=3;break;case"VEC_4F":this.nSlots=1,this.attribSize=4;break;case"MAT_2F":this.nSlots=2,this.attribSize=2;break;case"MAT_3F":this.nSlots=3,this.attribSize=3;break;case"MAT_4F":this.nSlots=4,this.attribSize=4;break;case"INT":this.nSlots=1,this.attribSize=1;break;case"VEC_2I":this.nSlots=1,this.attribSize=2;break;case"VEC_3I":this.nSlots=1,this.attribSize=3;break;case"VEC_4I":this.nSlots=1,this.attribSize=4;break;default:e.noWhenBranchMatched()}}function US(t,i){this.vertexSrc=t,this.fragmentSrc=i;var n=rt(this.vertexSrc),r=new kt(new kt(e.Long.fromInt(n)).data.shiftLeft(32)),o=rt(this.fragmentSrc),s=new kt(e.Long.fromInt(o));this.longHash=new kt(r.data.add(s.data))}function VS(t,i){var n,r;this.maxWidth=t,this.maxHeight=i,this.canvas_0=e.isType(n=document.createElement("canvas"),HTMLCanvasElement)?n:c(),this.canvasCtx_0=null,this.charMaps_0=z(),this.canvas_0.width=this.maxWidth,this.canvas_0.height=this.maxHeight,this.canvasCtx_0=e.isType(r=this.canvas_0.getContext("2d"),CanvasRenderingContext2D)?r:c()}function GS(t){if(Oh.call(this),this.data_a0fx42$_0=t,!t.complete)throw gt("Image must be complete");this.width=t.width,this.height=t.height}function HS(t,e){cC(),ei.call(this,t),this.ctx=e,this.pako_0=i(14),this.fontGenerator_0=new VS(2048,2048)}function WS(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$localRawRef=e}function KS(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$httpRawRef=e}function XS(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$httpTextureRef=e}function YS(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$localTextureRef=e}function ZS(t,e){return function(i){return t.complete_11rb$(e)}}function JS(t,e){return function(i,n,r,o,s){return u(t,"data:")?e.completeExceptionally_tcv7n7$(cn("Failed loading tex from data URL")):e.completeExceptionally_tcv7n7$(cn("Failed loading tex from "+t))}}function QS(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$url=e}function tC(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$loader=t,this.local$this$JsAssetManager=e,this.local$$receiver=i}function eC(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetPath=t,this.local$it=i}function iC(t){return function(e,i,n,r){var o=new eC(t,e,i,this,n);return r?o:o.doResume(null)}}function nC(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$tex=void 0,this.local$assetPath=e,this.local$props=i}function rC(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$texData=t}function oC(t,e,i,n,r,o,s,a,u,p){l.call(this,p),this.$controller=u,this.exceptionState_0=1,this.local$closure$ft=t,this.local$closure$bk=e,this.local$closure$lt=i,this.local$closure$rt=n,this.local$closure$up=r,this.local$closure$dn=o,this.local$it=a}function sC(t,e,i,n,r,o){return function(s,a,l,u){var p=new oC(t,e,i,n,r,o,s,a,this,l);return u?p:p.doResume(null)}}function aC(t,e,i,n,r,o,s,a,u){l.call(this,u),this.exceptionState_0=1,this.$this=t,this.local$tex=void 0,this.local$ft=e,this.local$bk=i,this.local$lt=n,this.local$rt=r,this.local$up=o,this.local$dn=s,this.local$props=a}function lC(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$texData=t}function uC(){pC=this,this.MAX_GENERATED_TEX_WIDTH_0=2048,this.MAX_GENERATED_TEX_HEIGHT_0=2048}LS.$metadata$={kind:$,simpleName:"OffscreenPassCubeImpl",interfaces:[]},FS.$metadata$={kind:$,simpleName:"PlatformAttributeProps",interfaces:[]},US.$metadata$={kind:$,simpleName:"ShaderCode",interfaces:[]},VS.prototype.getCharMap_ttufcy$=function(t){var e,i=this.charMaps_0,n=i.get_11rb$(t);if(null==n){var r=this.generateCharMap_0(t);i.put_xwzc9p$(t,r),e=r}else e=n;return e},VS.prototype.generateCharMap_0=function(t){var i;this.canvasCtx_0.clearRect(0,0,this.maxWidth,this.maxHeight);var n="lighter ";0!=(1&t.style)&&(n="bold "),0!=(2&t.style)&&(n+="italic ");var r=z(),o=this.makeMap_0(t,n,r),s=this.canvasCtx_0.getImageData(0,0,this.maxWidth,o),a=wN(e.imul(this.maxWidth,o));i=a.capacity;for(var l=0;l<i;l++)a.put_s8j3t7$(s.data[3+(4*l|0)|0]);return new zv(new Mh(a,this.maxWidth,o,Gc()),r,t)},VS.prototype.makeMap_0=function(t,e,i){var n,r;this.canvasCtx_0.font=e+t.sizePts+"px "+t.family,this.canvasCtx_0.fillStyle="#ffffff";var o=ot(1.1*t.sizePts),s=ot(.5*t.sizePts),a=ot(1.6*t.sizePts);this.canvasCtx_0.beginPath(),this.canvasCtx_0.moveTo(.5,0),this.canvasCtx_0.lineTo(.5,1),this.canvasCtx_0.stroke();var l=1,u=o;for(n=Be(t.chars);n.hasNext();){var p=O(n.next());106===p&&(l+=.1*t.sizePts);var c=String.fromCharCode(p),h=ot(this.canvasCtx_0.measureText(c).width),d=ot(h+6);if(l+d>this.maxWidth&&(l=0,(u+=a+10)+s>this.maxHeight))break;var f=h,_=a,m=new wv;m.width=f,m.height=_,m.xOffset=0,m.yBaseline=o,m.advance=m.width,m.uvMin.set_dleff0$(l+3,u-o),m.uvMax.set_dleff0$(l+3+f,u-o+_);var $=E(p);i.put_xwzc9p$($,m),this.canvasCtx_0.fillText(c,l+3,u),l+=d}var y=this.maxWidth,v=this.nextPow2_0(u+s);for(r=i.values.iterator();r.hasNext();){var g=r.next();g.uvMin.x=g.uvMin.x/y,g.uvMin.y=g.uvMin.y/v,g.uvMax.x=g.uvMax.x/y,g.uvMax.y=g.uvMax.y/v}return v},VS.prototype.nextPow2_0=function(t){for(var e=16;e<t&&e<this.maxHeight;)e<<=1;return e},VS.$metadata$={kind:$,simpleName:"FontMapGenerator",interfaces:[]},Object.defineProperty(GS.prototype,"data",{configurable:!0,get:function(){return this.data_a0fx42$_0}}),GS.$metadata$={kind:$,simpleName:"ImageTextureData",interfaces:[Oh]},WS.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},WS.prototype=Object.create(l.prototype),WS.prototype.constructor=WS,WS.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadRaw_0(this.local$localRawRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new wi(this.local$localRawRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadLocalRaw_hl6yzt$=function(t,e,i){var n=new WS(this,t,e);return i?n:n.doResume(null)},KS.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},KS.prototype=Object.create(l.prototype),KS.prototype.constructor=KS,KS.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadRaw_0(this.local$httpRawRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new wi(this.local$httpRawRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadHttpRaw_ohmb7q$=function(t,e,i){var n=new KS(this,t,e);return i?n:n.doResume(null)},XS.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},XS.prototype=Object.create(l.prototype),XS.prototype.constructor=XS,XS.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadImage_0(this.local$httpTextureRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new zi(this.local$httpTextureRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadHttpTexture_nbaz3h$=function(t,e,i){var n=new XS(this,t,e);return i?n:n.doResume(null)},YS.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},YS.prototype=Object.create(l.prototype),YS.prototype.constructor=YS,YS.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadImage_0(this.local$localTextureRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new zi(this.local$localTextureRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadLocalTexture_68kns4$=function(t,e,i){var n=new YS(this,t,e);return i?n:n.doResume(null)},HS.prototype.loadRaw_0=function(t,i){var n,r,o=m(this.job),a=new XMLHttpRequest;return a.responseType="arraybuffer",a.onload=(n=a,r=o,function(t){var i,o=new Uint8Array(e.isType(i=n.response,ArrayBuffer)?i:c());return r.complete_11rb$(new $N(o))}),a.onerror=function(t,i,n){return function(r){t.complete_11rb$(null);var o=n,a=qN.Log,l=vz.ERROR,u=e.getKClassFromExpression(o).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Failed loading resource "+i+": "+r),s}}(o,t,this),a.open("GET",t),a.send(),o.await(i)},QS.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},QS.prototype=Object.create(l.prototype),QS.prototype.constructor=QS,QS.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=m(),e=new Image;if(e.onload=ZS(t,e),e.onerror=JS(this.local$url,t),e.crossOrigin="","decoding"in e&&(e.decoding="async"),e.src=this.local$url,this.state_0=2,this.result_0=t.await(this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new GS(this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadImage_0=function(t,e,i){var n=new QS(this,t,e);return i?n:n.doResume(null)},tC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},tC.prototype=Object.create(l.prototype),tC.prototype.constructor=tC,tC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$loader(this.local$$receiver,this.local$this$JsAssetManager,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadTextureAsync_72pzmk$=function(t){return Ze(this,void 0,void 0,(e=t,i=this,function(t,n,r){var o=new tC(e,i,t,this,n);return r?o:o.doResume(null)}));var e,i},HS.prototype.createCharMap_ttufcy$=function(t){return this.fontGenerator_0.getCharMap_ttufcy$(t)},HS.prototype.inflate_ay2i3f$=function(t){var i,n,r=(e.isType(i=t,$N)?i:c()).buffer;return new $N(e.isType(n=this.pako_0.inflate(r),Uint8Array)?n:c())},HS.prototype.createTextureData_asds6l$=function(t,i,n){for(var r,o,s,a=(e.isType(r=t,$N)?r:c()).buffer,l=[],u=0;u<a.length;u+=32768)l.push(String.fromCharCode.apply(null,a.subarray(u,u+32768)));s=l.join("");var p="string"==typeof(o=window.btoa(s))?o:c();return this.loadImage_0("data:"+i+";base64,"+p,n)},eC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},eC.prototype=Object.create(l.prototype),eC.prototype.constructor=eC,eC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_61zpoe$(this.local$closure$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},nC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},nC.prototype=Object.create(l.prototype),nC.prototype.constructor=nC,nC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.local$tex=new Qc(this.$this.assetPathToName_61zpoe$(this.local$assetPath),this.local$props,iC(this.local$assetPath)),this.state_0=2,this.result_0=this.$this.loadTextureData_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return this.local$tex.loadedTexture=fN().loadTexture_hlfduu$(this.$this.ctx,this.local$props,t),this.local$tex.loadingState=rh(),this.local$tex;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadAndPrepareTexture_va0f2y$$default=function(t,e,i,n){var r=new nC(this,t,e,i);return n?r:r.doResume(null)},rC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},rC.prototype=Object.create(l.prototype),rC.prototype.constructor=rC,rC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$texData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadAndPrepareTexture_siesr9$$default=function(t,e,i){var n,r=new Qc(i,e,(n=t,function(t,e,i,r){var o=new rC(n,t,e,this,i);return r?o:o.doResume(null)}));return r.loadedTexture=fN().loadTexture_hlfduu$(this.ctx,e,t),r.loadingState=rh(),r},oC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},oC.prototype=Object.create(l.prototype),oC.prototype.constructor=oC,oC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadCubeMapTextureData_r3y0ew$(this.local$closure$ft,this.local$closure$bk,this.local$closure$lt,this.local$closure$rt,this.local$closure$up,this.local$closure$dn,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},aC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},aC.prototype=Object.create(l.prototype),aC.prototype.constructor=aC,aC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.$this.cubeMapAssetPathToName_r3y0ew$(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn);if(this.local$tex=new bh(t,this.local$props,sC(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn)),this.state_0=2,this.result_0=this.$this.loadCubeMapTextureData_r3y0ew$(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var e=this.result_0;return this.local$tex.loadedTexture=fN().loadTexture_hlfduu$(this.$this.ctx,this.local$props,e),this.local$tex.loadingState=rh(),this.local$tex;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadAndPrepareCubeMap_oecnw4$$default=function(t,e,i,n,r,o,s,a,l){var u=new aC(this,t,e,i,n,r,o,s,a);return l?u:u.doResume(null)},lC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},lC.prototype=Object.create(l.prototype),lC.prototype.constructor=lC,lC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$texData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},HS.prototype.loadAndPrepareCubeMap_hol3hm$$default=function(t,e,i){var n,r=new bh(i,e,(n=t,function(t,e,i,r){var o=new lC(n,t,e,this,i);return r?o:o.doResume(null)}));return r.loadedTexture=fN().loadTexture_hlfduu$(this.ctx,e,t),r.loadingState=rh(),r},uC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pC=null;function cC(){return null===pC&&new uC,pC}function hC(t){var i,n,r,o,a;mC(),on.call(this),this.props=t,this.assetMgr_z54vt4$_0=new HS(this.props.assetsBaseDir,this),this.shaderGenerator_d0v5kq$_0=new lN,this.queueRenderer_8be2vx$=new sN(this),this.afterRenderActions_8be2vx$=M(),this.windowWidth_7sdnb6$_0=0,this.windowHeight_xsf9ux$_0=0,this.canvas_0=null,this.gl_8be2vx$=null,this.sysInfo_0=M(),this.animationMillis_0=0,this.glCapabilities=new $C,this.canvas_0=e.isType(i=document.getElementById(this.props.canvasName),HTMLCanvasElement)?i:c();var l=this.canvas_0.getContext("webgl2");if(null==l&&(l=this.canvas_0.getContext("experimental-webgl2")),null==l)throw alert("Unable to initialize WebGL2 context. Your browser may not support it."),cn("WebGL2 context required");this.gl_8be2vx$=e.isType(n=l,WebGL2RenderingContext)?n:c(),this.sysInfo_0.add_11rb$("WebGL 2.0"),this.glCapabilities.maxTexUnits=this.gl_8be2vx$.getParameter(WebGLRenderingContext.MAX_TEXTURE_IMAGE_UNITS),this.glCapabilities.hasFloatTextures=null!=this.gl_8be2vx$.getExtension("EXT_color_buffer_float");var u,p=null!=(o=null!=(r=this.gl_8be2vx$.getExtension("EXT_texture_filter_anisotropic"))?r:this.gl_8be2vx$.getExtension("MOZ_EXT_texture_filter_anisotropic"))?o:this.gl_8be2vx$.getExtension("WEBKIT_EXT_texture_filter_anisotropic");null!=p&&(this.glCapabilities.maxAnisotropy="number"==typeof(a=this.gl_8be2vx$.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT))?a:c(),this.glCapabilities.glTextureMaxAnisotropyExt=p.TEXTURE_MAX_ANISOTROPY_EXT),this.screenDpi=RS().dpi,this.windowWidth=this.canvas_0.clientWidth,this.windowHeight=this.canvas_0.clientHeight,this.canvas_0.oncontextmenu=Kt("preventDefault",(function(t){return t.preventDefault(),s})),this.canvas_0.onmousemove=(u=this,function(t){var e=u.canvas_0.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top;return u.inputMgr.handleMouseMove_dleff0$(i,n),s}),this.canvas_0.onmousedown=function(t){return function(e){return t.inputMgr.handleMouseButtonStates_za3lpa$(e.buttons),s}}(this),this.canvas_0.onmouseup=function(t){return function(e){return t.inputMgr.handleMouseButtonStates_za3lpa$(e.buttons),s}}(this),this.canvas_0.onmouseleave=function(t){return function(e){return t.inputMgr.handleMouseExit(),s}}(this),this.canvas_0.onwheel=function(t){return function(e){var i=-e.deltaY/3;return 0===e.deltaMode&&(i/=30),t.inputMgr.handleMouseScroll_mx4ult$(i),e.preventDefault(),s}}(this),this.canvas_0.addEventListener("touchstart",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchStart_nhq4am$(l.identifier,yC(l),vC(l))}return s}}(this),!1),this.canvas_0.addEventListener("touchend",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchEnd_za3lpa$(l.identifier)}return s}}(this),!1),this.canvas_0.addEventListener("touchcancel",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchCancel_za3lpa$(l.identifier)}return s}}(this),!1),this.canvas_0.addEventListener("touchmove",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchMove_nhq4am$(l.identifier,yC(l),vC(l))}return s}}(this),!1),document.onkeydown=function(t){return function(e){return t.handleKeyDown_0(e),s}}(this),document.onkeyup=function(t){return function(e){return t.handleKeyUp_0(e),s}}(this)}function dC(){this.canvasName="glCanvas",this.excludedKeyCodes=It(["F5"]),this.assetsBaseDir="./assets"}function fC(){_C=this,this.KEY_CODE_MAP=Et([ft("ControlLeft",-1),ft("ControlRight",-2),ft("ShiftLeft",-3),ft("ShiftRight",-4),ft("AltLeft",-5),ft("AltRight",-6),ft("MetaLeft",-7),ft("MetaRight",-8),ft("Escape",-9),ft("ContextMenu",-10),ft("Enter",-11),ft("NumpadEnter",-12),ft("NumpadDivide",-13),ft("NumpadMultiply",-14),ft("NumpadAdd",-15),ft("NumpadSubtract",-16),ft("Backspace",-17),ft("Tab",-18),ft("Delete",-19),ft("Insert",-20),ft("Home",-21),ft("End",-22),ft("PageUp",-23),ft("PageDown",-24),ft("ArrowLeft",-25),ft("ArrowRight",-26),ft("ArrowUp",-27),ft("ArrowDown",-28),ft("F1",-29),ft("F2",-30),ft("F3",-31),ft("F4",-32),ft("F5",-33),ft("F6",-34),ft("F7",-35),ft("F8",-36),ft("F9",-37),ft("F10",-38),ft("F11",-39),ft("F12",-40),ft("Space",32)])}HS.$metadata$={kind:$,simpleName:"JsAssetManager",interfaces:[ei]},Object.defineProperty(hC.prototype,"assetMgr",{configurable:!0,get:function(){return this.assetMgr_z54vt4$_0}}),Object.defineProperty(hC.prototype,"shaderGenerator",{configurable:!0,get:function(){return this.shaderGenerator_d0v5kq$_0}}),Object.defineProperty(hC.prototype,"windowWidth",{configurable:!0,get:function(){return this.windowWidth_7sdnb6$_0},set:function(t){this.windowWidth_7sdnb6$_0=t}}),Object.defineProperty(hC.prototype,"windowHeight",{configurable:!0,get:function(){return this.windowHeight_xsf9ux$_0},set:function(t){this.windowHeight_xsf9ux$_0=t}}),hC.prototype.handleKeyDown_0=function(t){var e=this.translateKeyCode_0(t.code);if(0!==e){var i=0;t.altKey&&(i|=4),t.ctrlKey&&(i|=2),t.shiftKey&&(i|=1),t.metaKey&&(i|=8);var n=2;t.repeat&&(n|=4),this.inputMgr.keyEvent_qt1dr2$(e,i,n)}1===t.key.length&&this.inputMgr.charTyped_s8itvh$(t.key.charCodeAt(0)),this.props.excludedKeyCodes.contains_11rb$(t.code)||t.preventDefault()},hC.prototype.handleKeyUp_0=function(t){var e=this.translateKeyCode_0(t.code);if(0!==e){var i=0;t.altKey&&(i|=4),t.ctrlKey&&(i|=2),t.shiftKey&&(i|=1),t.metaKey&&(i|=8),this.inputMgr.keyEvent_qt1dr2$(e,i,1)}this.props.excludedKeyCodes.contains_11rb$(t.code)||t.preventDefault()},hC.prototype.translateKeyCode_0=function(t){var e;return 4===t.length&&u(t,"Key")?0|t.charCodeAt(3):null!=(e=mC().KEY_CODE_MAP.get_11rb$(t))?e:0},hC.prototype.renderFrame_0=function(t){var e,i=(t-this.animationMillis_0)/1e3;this.animationMillis_0=t,this.windowWidth=this.canvas_0.clientWidth,this.windowHeight=this.canvas_0.clientHeight,this.windowWidth===this.canvas_0.width&&this.windowHeight===this.canvas_0.height||(this.canvas_0.width=this.windowWidth,this.canvas_0.height=this.windowHeight),this.render_14dthe$(i),this.draw_0(),this.gl_8be2vx$.finish(),window.requestAnimationFrame((e=this,function(t){return e.renderFrame_0(t),s}))},hC.prototype.draw_0=function(){var t,e;this.disposablePipelines_8be2vx$.isEmpty()||(this.queueRenderer_8be2vx$.disposePipelines_z4np8a$(this.disposablePipelines_8be2vx$),this.disposablePipelines_8be2vx$.clear()),this.engineStats.resetPerFrameCounts(),t=this.backgroundPasses;for(var i=0;i!==t.size;++i)this.backgroundPasses.get_za3lpa$(i).isEnabled&&(this.drawOffscreen_0(this.backgroundPasses.get_za3lpa$(i)),this.backgroundPasses.get_za3lpa$(i).afterDraw_aemszp$(this));e=this.scenes;for(var n=0;n!==e.size;++n){var r,o=this.scenes.get_za3lpa$(n);if(o.isVisible){r=o.offscreenPasses;for(var s=0;s!==r.size;++s)o.offscreenPasses.get_za3lpa$(s).isEnabled&&(this.drawOffscreen_0(o.offscreenPasses.get_za3lpa$(s)),o.offscreenPasses.get_za3lpa$(s).afterDraw_aemszp$(this));this.queueRenderer_8be2vx$.renderQueue_e0goaf$(o.mainRenderPass.drawQueue),o.mainRenderPass.afterDraw_aemszp$(this)}}if(!this.afterRenderActions_8be2vx$.isEmpty()){var a;for(a=this.afterRenderActions_8be2vx$.iterator();a.hasNext();)a.next()();this.afterRenderActions_8be2vx$.clear()}},hC.prototype.drawOffscreen_0=function(t){if(e.isType(t,ua))t.impl_8be2vx$.draw_44a5h0$(this);else{if(!e.isType(t,pa))throw V("Offscreen pass type not implemented: "+t);t.impl_8be2vx$.draw_44a5h0$(this)}},hC.prototype.openUrl_61zpoe$=function(t){window.open(t)},hC.prototype.run=function(){var t;window.requestAnimationFrame((t=this,function(e){return t.renderFrame_0(e),s}))},hC.prototype.destroy=function(){},hC.prototype.getSysInfos=function(){return this.sysInfo_0},hC.prototype.getWindowViewport_ahq5yh$=function(t){t.set_tjonv8$(0,0,this.windowWidth,this.windowHeight)},dC.$metadata$={kind:$,simpleName:"InitProps",interfaces:[]},fC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _C=null;function mC(){return null===_C&&new fC,_C}function $C(){this.maxTexUnits_pg826n$_0=16,this.hasFloatTextures_jm9wjj$_0=!1,this.maxAnisotropy_q24ucr$_0=1,this.glTextureMaxAnisotropyExt_a0zvh2$_0=0}function yC(t){var i,n,r,o;return t.clientX-(null!=(o=null!=(r=null!=(n=e.isType(i=t.target,HTMLCanvasElement)?i:null)?n.clientLeft:null)?r:null)?o:0)}function vC(t){var i,n,r,o;return t.clientY-(null!=(o=null!=(r=null!=(n=e.isType(i=t.target,HTMLCanvasElement)?i:null)?n.clientTop:null)?r:null)?o:0)}function gC(t){switch(t.name){case"R":return WebGL2RenderingContext.R8;case"RG":return WebGL2RenderingContext.RG8;case"RGB":return WebGL2RenderingContext.RGB8;case"RGBA":return WebGL2RenderingContext.RGBA8;case"R_F16":return WebGL2RenderingContext.R16F;case"RG_F16":return WebGL2RenderingContext.RG16F;case"RGB_F16":return WebGL2RenderingContext.RGB16F;case"RGBA_F16":return WebGL2RenderingContext.RGBA16F;default:return e.noWhenBranchMatched()}}function bC(t){switch(t.name){case"R":case"RG":case"RGB":case"RGBA":return WebGLRenderingContext.UNSIGNED_BYTE;case"R_F16":case"RG_F16":case"RGB_F16":case"RGBA_F16":return WebGLRenderingContext.FLOAT;default:return e.noWhenBranchMatched()}}function xC(t){switch(t.name){case"R":return WebGL2RenderingContext.RED;case"RG":return WebGL2RenderingContext.RG;case"RGB":return WebGLRenderingContext.RGB;case"RGBA":return WebGLRenderingContext.RGBA;case"R_F16":return WebGL2RenderingContext.RED;case"RG_F16":return WebGL2RenderingContext.RG;case"RGB_F16":return WebGLRenderingContext.RGB;case"RGBA_F16":return WebGLRenderingContext.RGBA;default:return e.noWhenBranchMatched()}}function wC(t){switch(t.name){case"R":return 1;case"RG":return 2;case"RGB":return 3;case"RGBA":return 4;case"R_F16":return 2;case"RG_F16":return 4;case"RGB_F16":return 6;case"RGBA_F16":return 8;default:return e.noWhenBranchMatched()}}function zC(t){switch(t.name){case"DISABLED":return 0;case"ALWAYS":return WebGLRenderingContext.ALWAYS;case"NEVER":return WebGLRenderingContext.NEVER;case"LESS":return WebGLRenderingContext.LESS;case"LESS_EQUAL":return WebGLRenderingContext.LEQUAL;case"GREATER":return WebGLRenderingContext.GREATER;case"GREATER_EQUAL":return WebGLRenderingContext.GEQUAL;case"EQUAL":return WebGLRenderingContext.EQUAL;case"NOT_EQUAL":return WebGLRenderingContext.NOTEQUAL;default:return e.noWhenBranchMatched()}}function kC(t,e){var i;NC(),this.target=t,this.bufferId=(i=NC().nextBufferId_0,NC().nextBufferId_0=i.inc(),i),this.buffer=e.gl_8be2vx$.createBuffer()}function SC(){CC=this,this.nextBufferId_0=Tt}hC.$metadata$={kind:$,simpleName:"JsContext",interfaces:[on]},Object.defineProperty($C.prototype,"maxTexUnits",{configurable:!0,get:function(){return this.maxTexUnits_pg826n$_0},set:function(t){this.maxTexUnits_pg826n$_0=t}}),Object.defineProperty($C.prototype,"hasFloatTextures",{configurable:!0,get:function(){return this.hasFloatTextures_jm9wjj$_0},set:function(t){this.hasFloatTextures_jm9wjj$_0=t}}),Object.defineProperty($C.prototype,"maxAnisotropy",{configurable:!0,get:function(){return this.maxAnisotropy_q24ucr$_0},set:function(t){this.maxAnisotropy_q24ucr$_0=t}}),Object.defineProperty($C.prototype,"glTextureMaxAnisotropyExt",{configurable:!0,get:function(){return this.glTextureMaxAnisotropyExt_a0zvh2$_0},set:function(t){this.glTextureMaxAnisotropyExt_a0zvh2$_0=t}}),$C.$metadata$={kind:$,simpleName:"GlCapabilities",interfaces:[]},kC.prototype.delete_44a5h0$=function(t){t.engineStats.bufferDeleted_s8cxhz$(this.bufferId),t.gl_8be2vx$.deleteBuffer(this.buffer)},kC.prototype.bind_44a5h0$=function(t){t.gl_8be2vx$.bindBuffer(this.target,this.buffer)},kC.prototype.setData_phhdsy$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,bN)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,4*t.capacity|0),t.limit=o,t.position=s},kC.prototype.setData_1p7ty3$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,$N)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,t.capacity),t.limit=o,t.position=s},kC.prototype.setData_8qu3as$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,vN)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,2*t.capacity|0),t.limit=o,t.position=s},kC.prototype.setData_ysni9y$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,gN)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,4*t.capacity|0),t.limit=o,t.position=s},kC.prototype.unbind_44a5h0$=function(t){t.gl_8be2vx$.bindBuffer(this.target,null)},SC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var CC=null;function NC(){return null===CC&&new SC,CC}function EC(t,i,n){var r,o,s;for(this.prog=t,this.ctx=n,this.pipelineId_0=i.pipelineHash.data,this.attributes_0=z(),this.instanceAttributes_0=z(),this.uniformLocations_0=z(),this.instances_0=z(),r=i.layout.vertices.bindings.iterator();r.hasNext();){var a,l=r.next();for(a=l.vertexAttributes.iterator();a.hasNext();){var u=a.next();switch(l.inputRate.name){case"VERTEX":var p=this.attributes_0,c=u.attribute.name;p.put_xwzc9p$(c,u);break;case"INSTANCE":var h=this.instanceAttributes_0,d=u.attribute.name;h.put_xwzc9p$(d,u)}}}for(o=i.layout.descriptorSets.iterator();o.hasNext();){var f;for(f=o.next().descriptors.iterator();f.hasNext();){var _,m=f.next();if(e.isType(m,Us))for(_=m.uniforms.iterator();_.hasNext();){var $=_.next(),y=this.uniformLocations_0,v=$.name,g=qt(this.ctx.gl_8be2vx$.getUniformLocation(this.prog,$.name));y.put_xwzc9p$(v,g)}else if(e.isType(m,Ds)){var b=this.uniformLocations_0,x=m.name,w=this.getUniformLocations_0(m.name,m.arraySize);b.put_xwzc9p$(x,w)}else if(e.isType(m,Bs)){var k=this.uniformLocations_0,S=m.name,C=this.getUniformLocations_0(m.name,m.arraySize);k.put_xwzc9p$(S,C)}}}for(s=i.layout.pushConstantRanges.iterator();s.hasNext();){var N;for(N=s.next().pushConstants.iterator();N.hasNext();){var E=N.next(),P=this.uniformLocations_0,T=E.name,O=qt(this.ctx.gl_8be2vx$.getUniformLocation(this.prog,E.name));P.put_xwzc9p$(T,O)}}}function PC(t,i,n){var r,o;for(this.$outer=t,this.mesh=i,this.pipeline=n,this.pushConstants_0=M(),this.ubos_0=M(),this.textures_0=M(),this.cubeMaps_0=M(),this.mappings_0=M(),this.attributeBinders_0=M(),this.instanceAttribBinders_0=M(),this.dataBufferF_0=null,this.dataBufferI_0=null,this.indexBuffer_0=null,this.instanceBuffer_0=null,this.buffersSet_0=!1,this.nextTexUnit_0=WebGLRenderingContext.TEXTURE0,this.numIndices=0,this.indexType=0,this.primitiveType=0,r=this.pipeline.layout.descriptorSets.iterator();r.hasNext();){var s;for(s=r.next().descriptors.iterator();s.hasNext();){var a=s.next();if(e.isType(a,Us))this.mapUbo_0(a);else if(e.isType(a,Ds))this.mapTexture_0(a);else{if(!e.isType(a,Bs))throw new He("An operation is not implemented: "+a.toString());this.mapCubeMap_0(a)}}}for(o=this.pipeline.layout.pushConstantRanges.iterator();o.hasNext();){var l=o.next();this.mapPushConstants_0(l)}this.$outer.ctx.engineStats.pipelineInstanceCreated_s8cxhz$(this.$outer.pipelineId_0)}function TC(t,e){this.vbo=t,this.loc=e}function OC(t,e,i,n){var r;AC(),this.ctx=t,this.target=e,this.texture=i,this.texId=(r=AC().nextTexId_0,AC().nextTexId_0=r.inc(),r),this.isDestroyed_hoph69$_0=!1,this.width_8gbh1k$_0=0,this.height_d6ao4v$_0=0,this.ctx.engineStats.textureAllocated_yhmem3$(this.texId,n)}function MC(){jC=this,this.nextTexId_0=Tt}kC.$metadata$={kind:$,simpleName:"BufferResource",interfaces:[]},EC.prototype.getUniformLocations_0=function(t,e){var i=M();if(e>1)for(var n=0;n<e;n++){var r=this.ctx.gl_8be2vx$.getUniformLocation(this.prog,t+"["+n+"]");i.add_11rb$(r)}else{var o=this.ctx.gl_8be2vx$.getUniformLocation(this.prog,t);i.add_11rb$(o)}return i},EC.prototype.use=function(){var t,e;for(this.ctx.gl_8be2vx$.useProgram(this.prog),t=this.attributes_0.values.iterator();t.hasNext();){var i,n=t.next();i=n.attribute.props.nSlots;for(var r=0;r<i;r++){var o=n.location+r|0;this.ctx.gl_8be2vx$.enableVertexAttribArray(o),this.ctx.gl_8be2vx$.vertexAttribDivisor(o,0)}}for(e=this.instanceAttributes_0.values.iterator();e.hasNext();){var s,a=e.next();s=a.attribute.props.nSlots;for(var l=0;l<s;l++){var u=a.location+l|0;this.ctx.gl_8be2vx$.enableVertexAttribArray(u),this.ctx.gl_8be2vx$.vertexAttribDivisor(u,1)}}},EC.prototype.unUse=function(){var t,e;for(t=this.attributes_0.values.iterator();t.hasNext();){var i,n=t.next();i=n.attribute.props.nSlots;for(var r=0;r<i;r++)this.ctx.gl_8be2vx$.disableVertexAttribArray(n.location+r|0)}for(e=this.instanceAttributes_0.values.iterator();e.hasNext();){var o,s=e.next();o=s.attribute.props.nSlots;for(var a=0;a<o;a++)this.ctx.gl_8be2vx$.disableVertexAttribArray(s.location+a|0)}},EC.prototype.bindInstance_ye1q9v$=function(t){var e,i=x(t.pipeline),n=this.instances_0,r=i.pipelineInstanceId,o=n.get_11rb$(r);if(null==o){var s=new PC(this,t.mesh,i);n.put_xwzc9p$(r,s),e=s}else e=o;var a=e;return a.bindInstance_ye1q9v$(t)?a:null},EC.prototype.destroyInstance_lfrgcb$=function(t){var e;null!=(e=this.instances_0.remove_11rb$(t.pipelineInstanceId))&&(e.destroyInstance(),this.ctx.engineStats.pipelineInstanceDestroyed_s8cxhz$(this.pipelineId_0))},EC.prototype.isEmpty=function(){return this.instances_0.isEmpty()},EC.prototype.destroy=function(){this.ctx.engineStats.pipelineDestroyed_s8cxhz$(this.pipelineId_0),this.ctx.gl_8be2vx$.deleteProgram(this.prog)},PC.prototype.mapPushConstants_0=function(t){this.pushConstants_0.add_11rb$(t);var e,i=t.pushConstants;for(this.$outer,e=i.iterator();e.hasNext();){var n,r,o=e.next(),s=this.$outer;n=this.mappings_0;var a=DC().mappedUniform_lwhlub$(o,null!=(r=s.uniformLocations_0.get_11rb$(o.name))?r.get_za3lpa$(0):null);n.add_11rb$(a)}},PC.prototype.mapUbo_0=function(t){this.ubos_0.add_11rb$(t);var e,i=t.uniforms;for(this.$outer,e=i.iterator();e.hasNext();){var n,r,o=e.next(),s=this.$outer;n=this.mappings_0;var a=DC().mappedUniform_lwhlub$(o,null!=(r=s.uniformLocations_0.get_11rb$(o.name))?r.get_za3lpa$(0):null);n.add_11rb$(a)}},PC.prototype.mapTexture_0=function(t){var e;if(this.textures_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new rN(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},PC.prototype.mapCubeMap_0=function(t){var e;if(this.cubeMaps_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new oN(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},PC.prototype.bindInstance_ye1q9v$=function(t){var e,i,n,r,o,s;e=this.pushConstants_0;for(var a=0;a!==e.size;++a){var l;null!=(l=this.pushConstants_0.get_za3lpa$(a).onUpdate)&&l(this.pushConstants_0.get_za3lpa$(a),t)}i=this.ubos_0;for(var u=0;u!==i.size;++u){var p;null!=(p=this.ubos_0.get_za3lpa$(u).onUpdate)&&p(this.ubos_0.get_za3lpa$(u),t)}n=this.textures_0;for(var c=0;c!==n.size;++c){var h;null!=(h=this.textures_0.get_za3lpa$(c).onUpdate)&&h(this.textures_0.get_za3lpa$(c),t)}r=this.cubeMaps_0;for(var d=0;d!==r.size;++d){var f;null!=(f=this.cubeMaps_0.get_za3lpa$(d).onUpdate)&&f(this.cubeMaps_0.get_za3lpa$(d),t)}var _=!0;o=this.mappings_0;for(var m=0;m!==o.size;++m)_=_&&this.mappings_0.get_za3lpa$(m).setUniform_44a5h0$(this.$outer.ctx);if(this.checkBuffers_0(),_){null!=(s=this.indexBuffer_0)&&s.bind_44a5h0$(this.$outer.ctx);var $,y=this.attributeBinders_0;for(this.$outer,$=y.iterator();$.hasNext();){var v=$.next();v.vbo.bindAttribute_9sni52$(v.loc,this.$outer.ctx)}var g,b=this.instanceAttribBinders_0;for(this.$outer,g=b.iterator();g.hasNext();){var x=g.next();x.vbo.bindAttribute_9sni52$(x.loc,this.$outer.ctx)}}return _},PC.prototype.destroyInstance=function(){var t,e,i,n;null!=(t=this.dataBufferF_0)&&t.delete_44a5h0$(this.$outer.ctx),null!=(e=this.dataBufferI_0)&&e.delete_44a5h0$(this.$outer.ctx),null!=(i=this.indexBuffer_0)&&i.delete_44a5h0$(this.$outer.ctx),null!=(n=this.instanceBuffer_0)&&n.delete_44a5h0$(this.$outer.ctx),this.dataBufferF_0=null,this.dataBufferI_0=null,this.indexBuffer_0=null,this.instanceBuffer_0=null,this.pushConstants_0.clear(),this.ubos_0.clear(),this.textures_0.clear(),this.cubeMaps_0.clear(),this.mappings_0.clear(),this.attributeBinders_0.clear(),this.instanceAttribBinders_0.clear()},PC.prototype.checkBuffers_0=function(){var t,e,i,n,r,o,a,l=this.mesh.geometry;null==this.indexBuffer_0&&(this.indexBuffer_0=new kC(WebGLRenderingContext.ELEMENT_ARRAY_BUFFER,this.$outer.ctx));var u=!1;if(null==this.dataBufferF_0)for(this.dataBufferF_0=new kC(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),t=l.vertexAttributes.iterator();t.hasNext();){var p=t.next();if(p.type.isInt)u=!0;else{var c=l.byteStrideF,h=x(l.attributeByteOffsets.get_11rb$(p))/4|0;xt(this.instanceAttribBinders_0,this.$outer.makeAttribBinders_0(this.$outer.attributes_0,p,x(this.dataBufferF_0),c,h))}}if(u&&null==this.dataBufferI_0)for(this.dataBufferI_0=new kC(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),e=l.vertexAttributes.iterator();e.hasNext();){var d=e.next();if(d.type.isInt&&null!=(i=this.$outer.attributes_0.get_11rb$(d.name))){var f=new _N(x(this.dataBufferI_0),d.type.byteSize/4|0,l.byteStrideI,x(l.attributeByteOffsets.get_11rb$(d))/4|0,WebGLRenderingContext.INT),_=this.attributeBinders_0,m=new TC(f,i.location);_.add_11rb$(m)}}var $,y,v=this.mesh.instances;if(null!=v){var g=this.instanceBuffer_0;if(null==g)for(g=new kC(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),this.instanceBuffer_0=g,n=v.instanceAttributes.iterator();n.hasNext();){var b=n.next(),w=v.strideBytesF,z=x(v.attributeOffsets.get_11rb$(b))/4|0;xt(this.instanceAttribBinders_0,this.$outer.makeAttribBinders_0(this.$outer.instanceAttributes_0,b,x(this.instanceBuffer_0),w,z))}v.hasChanged&&(g.setData_phhdsy$(v.dataF,this.$outer.glUsage_0(v.usage),this.$outer.ctx),this.$outer.ctx.afterRenderActions_8be2vx$.add_11rb$(($=v,function(){return $.hasChanged=!1,s})))}if(!l.isBatchUpdate&&(l.hasChanged||!this.buffersSet_0)){var k=this.$outer.glUsage_0(l.usage);this.indexType=WebGLRenderingContext.UNSIGNED_INT,null!=(r=this.indexBuffer_0)&&r.setData_ysni9y$(l.indices,k,this.$outer.ctx),this.primitiveType=this.$outer.glElemType_0(this.pipeline.layout.vertices.primitiveType),this.numIndices=l.numIndices,null!=(o=this.dataBufferF_0)&&o.setData_phhdsy$(l.dataF,k,this.$outer.ctx),null!=(a=this.dataBufferI_0)&&a.setData_ysni9y$(l.dataI,k,this.$outer.ctx),this.$outer.ctx.afterRenderActions_8be2vx$.add_11rb$((y=l,function(){return y.hasChanged=!1,s})),this.buffersSet_0=!0}},PC.$metadata$={kind:$,simpleName:"ShaderInstance",interfaces:[]},EC.prototype.makeAttribBinders_0=function(t,i,n,r,o){var s,a=M();if(null!=(s=t.get_11rb$(i.name))){var l;l=i.props.nSlots;for(var u=0;u<l;u++){var p=o+e.imul(i.props.attribSize,u)|0,c=new TC(new _N(n,i.props.attribSize,r,p,WebGLRenderingContext.FLOAT),s.location+u|0);a.add_11rb$(c)}}return a},EC.prototype.glElemType_0=function(t){var i;switch(t.name){case"LINES":i=WebGLRenderingContext.LINES;break;case"POINTS":i=WebGLRenderingContext.POINTS;break;case"TRIANGLES":i=WebGLRenderingContext.TRIANGLES;break;default:i=e.noWhenBranchMatched()}return i},EC.prototype.glUsage_0=function(t){var i;switch(t.name){case"DYNAMIC":i=WebGLRenderingContext.DYNAMIC_DRAW;break;case"STATIC":i=WebGLRenderingContext.STATIC_DRAW;break;default:i=e.noWhenBranchMatched()}return i},TC.$metadata$={kind:$,simpleName:"AttributeOnLocation",interfaces:[]},TC.prototype.component1=function(){return this.vbo},TC.prototype.component2=function(){return this.loc},TC.prototype.copy_oubs2w$=function(t,e){return new TC(void 0===t?this.vbo:t,void 0===e?this.loc:e)},TC.prototype.toString=function(){return"AttributeOnLocation(vbo="+e.toString(this.vbo)+", loc="+e.toString(this.loc)+")"},TC.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.vbo)|0)+e.hashCode(this.loc)|0},TC.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.vbo,t.vbo)&&e.equals(this.loc,t.loc)},EC.$metadata$={kind:$,simpleName:"CompiledShader",interfaces:[]},Object.defineProperty(OC.prototype,"isDestroyed",{configurable:!0,get:function(){return this.isDestroyed_hoph69$_0},set:function(t){this.isDestroyed_hoph69$_0=t}}),Object.defineProperty(OC.prototype,"width",{configurable:!0,get:function(){return this.width_8gbh1k$_0},set:function(t){this.width_8gbh1k$_0=t}}),Object.defineProperty(OC.prototype,"height",{configurable:!0,get:function(){return this.height_d6ao4v$_0},set:function(t){this.height_d6ao4v$_0=t}}),OC.prototype.setSize_vux9f0$=function(t,e){this.width=t,this.height=e},OC.prototype.applySamplerProps_xetyfc$=function(t){var i=this.ctx.gl_8be2vx$;i.bindTexture(this.target,this.texture),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_MIN_FILTER,this.glMinFilterMethod_0(t.minFilter,t.mipMapping)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_MAG_FILTER,this.glMagFilterMethod_0(t.magFilter)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_WRAP_S,this.glAddressMode_0(t.addressModeU)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_WRAP_T,this.glAddressMode_0(t.addressModeV));var n=t.maxAnisotropy,r=this.ctx.glCapabilities.maxAnisotropy,o=A.min(n,r);if(o>1&&i.texParameteri(this.target,this.ctx.glCapabilities.glTextureMaxAnisotropyExt,o),o>1&&(t.minFilter===kh()||t.magFilter===kh())){var s=qN.Log,a=vz.WARN,l=e.getKClassFromExpression(this).simpleName;a.level>=s.level.level&&s.printer(a,l,"Texture filtering is NEAREST but anisotropy is "+o+" (> 1)")}},OC.prototype.dispose=function(){this.isDestroyed=!0,this.ctx.gl_8be2vx$.deleteTexture(this.texture),this.ctx.engineStats.textureDeleted_s8cxhz$(this.texId)},OC.prototype.glMinFilterMethod_0=function(t,i){var n;switch(t.name){case"NEAREST":n=i?WebGLRenderingContext.NEAREST_MIPMAP_NEAREST:WebGLRenderingContext.NEAREST;break;case"LINEAR":n=i?WebGLRenderingContext.LINEAR_MIPMAP_LINEAR:WebGLRenderingContext.LINEAR;break;default:n=e.noWhenBranchMatched()}return n},OC.prototype.glMagFilterMethod_0=function(t){var i;switch(t.name){case"NEAREST":i=WebGLRenderingContext.NEAREST;break;case"LINEAR":i=WebGLRenderingContext.LINEAR;break;default:i=e.noWhenBranchMatched()}return i},OC.prototype.glAddressMode_0=function(t){var i;switch(t.name){case"CLAMP_TO_EDGE":i=WebGLRenderingContext.CLAMP_TO_EDGE;break;case"MIRRORED_REPEAT":i=WebGLRenderingContext.MIRRORED_REPEAT;break;case"REPEAT":i=WebGLRenderingContext.REPEAT;break;default:i=e.noWhenBranchMatched()}return i},MC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var jC=null;function AC(){return null===jC&&new MC,jC}function RC(){DC()}function IC(){LC=this}OC.$metadata$={kind:$,simpleName:"LoadedTextureWebGl",interfaces:[Qs]},IC.prototype.mappedUniform_lwhlub$=function(t,i){var n;if(e.isType(t,Vh))n=new qC(t,i);else if(e.isType(t,Hh))n=new BC(t,i);else if(e.isType(t,Wh))n=new FC(t,i);else if(e.isType(t,Kh))n=new UC(t,i);else if(e.isType(t,Yh))n=new VC(t,i);else if(e.isType(t,Zh))n=new GC(t,i);else if(e.isType(t,Jh))n=new HC(t,i);else if(e.isType(t,Qh))n=new WC(t,i);else if(e.isType(t,Xh))n=new KC(t,i);else if(e.isType(t,td))n=new XC(t,i);else if(e.isType(t,ed))n=new YC(t,i);else if(e.isType(t,id))n=new ZC(t,i);else{if(!e.isType(t,nd))throw new He("An operation is not implemented: Uniform type mapping not implemented");n=new JC(t,i)}return n},IC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var LC=null;function DC(){return null===LC&&new IC,LC}function qC(t,e){this.uniform=t,this.location=e}function BC(t,e){this.uniform=t,this.location=e}function FC(t,e){this.uniform=t,this.location=e}function UC(t,e){this.uniform=t,this.location=e}function VC(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(this.uniform.length)}function GC(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(2*this.uniform.length|0)}function HC(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(3*this.uniform.length|0)}function WC(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(4*this.uniform.length|0)}function KC(t,e){this.uniform=t,this.location=e}function XC(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(9)}function YC(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(16)}function ZC(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(16*this.uniform.length|0)}function JC(t,e){this.uniform=t,this.location=e}function QC(t,e){nN(),this.texUnit=t,this.target=e}function tN(){iN=this,this.loadedTextures_0=z()}function eN(t){return t.isDestroyed}RC.$metadata$={kind:st,simpleName:"MappedUniform",interfaces:[]},qC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform1f(this.location,this.uniform.value),!0},qC.$metadata$={kind:$,simpleName:"MappedUniform1f",interfaces:[RC]},BC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform2f(this.location,this.uniform.value.x,this.uniform.value.y),!0},BC.$metadata$={kind:$,simpleName:"MappedUniform2f",interfaces:[RC]},FC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform3f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z),!0},FC.$metadata$={kind:$,simpleName:"MappedUniform3f",interfaces:[RC]},UC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform4f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z,this.uniform.value.w),!0},UC.$metadata$={kind:$,simpleName:"MappedUniform4f",interfaces:[RC]},VC.prototype.setUniform_44a5h0$=function(t){var e;e=this.uniform.length;for(var i=0;i<e;i++)this.buffer_0[i]=this.uniform.value[i];return t.gl_8be2vx$.uniform1fv(this.location,this.buffer_0),!0},VC.$metadata$={kind:$,simpleName:"MappedUniform1fv",interfaces:[RC]},GC.prototype.setUniform_44a5h0$=function(t){var e,i,n,r=0;e=this.uniform.length;for(var o=0;o<e;o++)this.buffer_0[(i=r,r=i+1|0,i)]=this.uniform.value[o].x,this.buffer_0[(n=r,r=n+1|0,n)]=this.uniform.value[o].y;return t.gl_8be2vx$.uniform2fv(this.location,this.buffer_0),!0},GC.$metadata$={kind:$,simpleName:"MappedUniform2fv",interfaces:[RC]},HC.prototype.setUniform_44a5h0$=function(t){var e,i,n,r,o=0;e=this.uniform.length;for(var s=0;s<e;s++)this.buffer_0[(i=o,o=i+1|0,i)]=this.uniform.value[s].x,this.buffer_0[(n=o,o=n+1|0,n)]=this.uniform.value[s].y,this.buffer_0[(r=o,o=r+1|0,r)]=this.uniform.value[s].z;return t.gl_8be2vx$.uniform3fv(this.location,this.buffer_0),!0},HC.$metadata$={kind:$,simpleName:"MappedUniform3fv",interfaces:[RC]},WC.prototype.setUniform_44a5h0$=function(t){var e,i,n,r,o,s=0;e=this.uniform.length;for(var a=0;a<e;a++)this.buffer_0[(i=s,s=i+1|0,i)]=this.uniform.value[a].x,this.buffer_0[(n=s,s=n+1|0,n)]=this.uniform.value[a].y,this.buffer_0[(r=s,s=r+1|0,r)]=this.uniform.value[a].z,this.buffer_0[(o=s,s=o+1|0,o)]=this.uniform.value[a].w;return t.gl_8be2vx$.uniform4fv(this.location,this.buffer_0),!0},WC.$metadata$={kind:$,simpleName:"MappedUniform4fv",interfaces:[RC]},KC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform4f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z,this.uniform.value.w),!0},KC.$metadata$={kind:$,simpleName:"MappedUniformColor",interfaces:[RC]},XC.prototype.setUniform_44a5h0$=function(t){for(var e=0;e<=8;e++)this.buf_0[e]=this.uniform.value.matrix[e];return t.gl_8be2vx$.uniformMatrix3fv(this.location,!1,this.buf_0),!0},XC.$metadata$={kind:$,simpleName:"MappedUniformMat3f",interfaces:[RC]},YC.prototype.setUniform_44a5h0$=function(t){for(var e=0;e<=15;e++)this.buf_0[e]=this.uniform.value.matrix[e];return t.gl_8be2vx$.uniformMatrix4fv(this.location,!1,this.buf_0),!0},YC.$metadata$={kind:$,simpleName:"MappedUniformMat4f",interfaces:[RC]},ZC.prototype.setUniform_44a5h0$=function(t){var e,i,n=0;e=this.uniform.length;for(var r=0;r<e;r++)for(var o=0;o<16;o++)this.buf_0[(i=n,n=i+1|0,i)]=this.uniform.value[r].matrix[o];return t.gl_8be2vx$.uniformMatrix4fv(this.location,!1,this.buf_0),!0},ZC.$metadata$={kind:$,simpleName:"MappedUniformMat4fv",interfaces:[RC]},JC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform1i(this.location,this.uniform.value),!0},JC.$metadata$={kind:$,simpleName:"MappedUniform1i",interfaces:[RC]},QC.prototype.checkLoadingState_1iftbi$=function(t,i,n){var r,o,a,l,u,p,h=t.gl_8be2vx$;if(i.loadingState===ih()&&null!=(r=i.loader)){i.loadingState=nh();var d=t.assetMgr.loadTextureAsync_72pzmk$(r);d.invokeOnCompletion_f05bi3$((a=this,l=i,u=d,p=t,function(t){if(null!=t){var i=a,n=qN.Log,r=vz.ERROR,o=e.getKClassFromExpression(i).simpleName;r.level>=n.level.level&&n.printer(r,o,"Texture loading failed: "+Ct(t)),l.loadingState=oh()}else l.loadedTexture=nN().getLoadedTex_0(u.getCompleted(),l.props,p),l.loadingState=rh();return s}))}if(i.loadingState===rh()){var f=e.isType(o=i.loadedTexture,OC)?o:c();return h.activeTexture(this.texUnit+n|0),h.bindTexture(this.target,f.texture),!0}return!1},tN.prototype.getLoadedTex_0=function(t,e,i){We(this.loadedTextures_0.values,eN);var n,r=this.loadedTextures_0,o=r.get_11rb$(t);if(null==o){var s=fN().loadTexture_hlfduu$(i,e,t);r.put_xwzc9p$(t,s),n=s}else n=o;return n},tN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var iN=null;function nN(){return null===iN&&new tN,iN}function rN(t,e,i){QC.call(this,e,WebGLRenderingContext.TEXTURE_2D),this.sampler2d_0=t,this.locations=i}function oN(t,e,i){QC.call(this,e,WebGLRenderingContext.TEXTURE_CUBE_MAP),this.samplerCube_0=t,this.locations=i}function sN(t){this.ctx=t,this.glAttribs_0=new aN(this),this.shaderMgr_0=new cN(this.ctx),this.colorBuffer_0=new Float32Array(4)}function aN(t){this.$outer=t,this.actIsWriteDepth=!0,this.depthTest=null,this.cullMethod=null,this.lineWidth=0}function lN(){Tu.call(this)}function uN(t){return"// "+t+"\n"}function pN(){this.functions=z(),this.mainCode=M()}function cN(t){this.ctx=t,this.shaders=z(),this.currentShader=null}function hN(){dN=this}QC.$metadata$={kind:$,simpleName:"MappedUniformTex",interfaces:[RC]},rN.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.sampler2d_0.arraySize;for(var r=0;r<e;r++){var o=this.sampler2d_0.textures[r];null!=o&&this.checkLoadingState_1iftbi$(t,o,r)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(r),this.texUnit-WebGLRenderingContext.TEXTURE0+r|0):n=!1,i=i+1|0}return n},rN.$metadata$={kind:$,simpleName:"MappedUniformTex2d",interfaces:[QC]},oN.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.samplerCube_0.arraySize;for(var r=0;r<e;r++){var o=this.samplerCube_0.textures[r];null!=o&&this.checkLoadingState_1iftbi$(t,o,r)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(r),this.texUnit-WebGLRenderingContext.TEXTURE0+r|0):n=!1,i=i+1|0}return n},oN.$metadata$={kind:$,simpleName:"MappedUniformCubeMap",interfaces:[QC]},Object.defineProperty(sN.prototype,"gl_0",{configurable:!0,get:function(){return this.ctx.gl_8be2vx$}}),sN.prototype.disposePipelines_z4np8a$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next();this.shaderMgr_0.deleteShader_lfrgcb$(i)}},sN.prototype.renderQueue_e0goaf$=function(t){var i,n,r,o,s,a,l=t.renderPass;if(this.ctx.gl_8be2vx$.viewport(l.viewport.x,l.viewport.y,l.viewport.width,l.viewport.height),e.isType(l,ua)){r=l.config.nColorAttachments;for(var u=0;u<r;u++)null!=(s=null!=(o=l.clearColors[u])?o:l.clearColor)&&(this.colorBuffer_0[0]=s.r,this.colorBuffer_0[1]=s.g,this.colorBuffer_0[2]=s.b,this.colorBuffer_0[3]=s.a,this.ctx.gl_8be2vx$.clearBufferfv(WebGL2RenderingContext.COLOR,u,this.colorBuffer_0));l.clearDepth&&this.ctx.gl_8be2vx$.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT)}else{null!=(a=l.clearColor)&&this.ctx.gl_8be2vx$.clearColor(a.r,a.g,a.b,a.a);var p=this.clearMask_0(l);0!==p&&this.ctx.gl_8be2vx$.clear(p)}for(i=t.commands.iterator();i.hasNext();){var c,h=i.next();if(null!=(n=h.pipeline)&&(this.glAttribs_0.setupPipelineAttribs_lfrgcb$(n),h.mesh.geometry.numIndices>0&&null!=(c=this.shaderMgr_0.setupShader_ye1q9v$(h))&&0!==c.primitiveType&&0!==c.indexType)){var d=h.mesh.instances;null==d?(this.gl_0.drawElements(c.primitiveType,c.numIndices,c.indexType,0),this.ctx.engineStats.addPrimitiveCount_za3lpa$(h.mesh.geometry.numPrimitives)):d.numInstances>0&&(this.gl_0.drawElementsInstanced(c.primitiveType,c.numIndices,c.indexType,0,d.numInstances),this.ctx.engineStats.addPrimitiveCount_za3lpa$(e.imul(h.mesh.geometry.numPrimitives,d.numInstances))),this.ctx.engineStats.addDrawCommandCount_za3lpa$(1)}}},aN.prototype.setupPipelineAttribs_lfrgcb$=function(t){this.setBlendMode_0(t.blendMode),this.setDepthTest_0(t.depthCompareOp),this.setWriteDepth_0(t.isWriteDepth),this.setCullMethod_0(t.cullMethod),this.lineWidth!==t.lineWidth&&(this.lineWidth=t.lineWidth,this.$outer.gl_0.lineWidth(t.lineWidth))},aN.prototype.setCullMethod_0=function(t){if(!zt(this.cullMethod,t))switch(this.cullMethod=t,t.name){case"DEFAULT":case"CULL_BACK_FACES":this.$outer.gl_0.enable(WebGLRenderingContext.CULL_FACE),this.$outer.gl_0.cullFace(WebGLRenderingContext.BACK);break;case"CULL_FRONT_FACES":this.$outer.gl_0.enable(WebGLRenderingContext.CULL_FACE),this.$outer.gl_0.cullFace(WebGLRenderingContext.FRONT);break;case"NO_CULLING":this.$outer.gl_0.disable(WebGLRenderingContext.CULL_FACE)}},aN.prototype.setWriteDepth_0=function(t){this.actIsWriteDepth!==t&&(this.actIsWriteDepth=t,this.$outer.gl_0.depthMask(t))},aN.prototype.setDepthTest_0=function(t){zt(this.depthTest,t)||(this.depthTest=t,t===pl()?this.$outer.gl_0.disable(WebGLRenderingContext.DEPTH_TEST):(this.$outer.gl_0.enable(WebGLRenderingContext.DEPTH_TEST),this.$outer.gl_0.depthFunc(zC(t))))},aN.prototype.setBlendMode_0=function(t){switch(t.name){case"DISABLED":this.$outer.gl_0.disable(WebGLRenderingContext.BLEND);break;case"BLEND_ADDITIVE":this.$outer.gl_0.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND);break;case"BLEND_MULTIPLY_ALPHA":this.$outer.gl_0.blendFunc(WebGLRenderingContext.SRC_ALPHA,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND);break;case"BLEND_PREMULTIPLIED_ALPHA":this.$outer.gl_0.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND)}},aN.$metadata$={kind:$,simpleName:"GlAttribs",interfaces:[]},sN.prototype.clearMask_0=function(t){var e=0;return t.clearDepth&&(e=WebGLRenderingContext.DEPTH_BUFFER_BIT),null!=t.clearColor&&(e|=WebGLRenderingContext.COLOR_BUFFER_BIT),e},sN.$metadata$={kind:$,simpleName:"QueueRendererWebGl",interfaces:[]},lN.prototype.generateShader_lvmec3$=function(t,e,i){var n=this.generateCode_0(t,e);return new US(n.component1(),n.component2())},lN.prototype.generateCode_0=function(t,e){var i=this.generateVertexShaderCode_0(t,e),n=this.generateFragmentShaderCode_0(t,e);return t.dumpCode&&(jt("Vertex shader:\n"+i),jt("Fragment shader:\n"+n)),ft(i,n)},lN.prototype.generateVertexShaderCode_0=function(t,e){var i=new pN;return t.vertexStageGraph.generateCode_626509$(i),_e("\n            #version 300 es\n            "+this.infoStr_0(t)+"\n            \n            // descriptor layout / uniforms "+this.generateDescriptorBindings_0(e,Vp())+"\n            // vertex attributes "+this.generateAttributeBindings_0(e)+"\n            // outputs "+this.generateStageOutputs_0(t.vertexStageGraph)+"\n            // functions\n            "+i.generateFunctions()+"\n            \n            void main() {\n                "+i.generateMain()+"\n                gl_Position = "+t.vertexStageGraph.positionOutput.variable.ref4f()+";\n            }\n        ")},lN.prototype.generateFragmentShaderCode_0=function(t,e){var i=new pN;return t.fragmentStageGraph.generateCode_626509$(i),_e("\n            #version 300 es\n            precision highp float;\n            precision highp sampler2DShadow;\n            "+this.infoStr_0(t)+"\n\n            // descriptor layout / uniforms "+this.generateDescriptorBindings_0(e,Kp())+"\n            // inputs "+this.generateStageInputs_0(t.fragmentStageGraph)+"\n            // functions\n            "+i.generateFunctions()+"\n            \n            void main() {\n                "+i.generateMain()+"\n            }\n        ")},lN.prototype.infoStr_0=function(t){return Mt(Je(t.modelInfo),void 0,void 0,void 0,void 0,void 0,uN)},lN.prototype.generateDescriptorBindings_0=function(t,i){var n,r=new Qe("\n");for(n=t.descriptorSets.iterator();n.hasNext();){var o;for(o=n.next().descriptors.iterator();o.hasNext();){var s=o.next();if(s.stages.contains_11rb$(i))if(e.isType(s,Us))r.append_pdl1vj$(this.generateUniformBuffer_0(s));else if(e.isType(s,Ds))r.append_pdl1vj$(this.generateTextureSampler_0(s));else{if(!e.isType(s,Bs))throw new He("An operation is not implemented: Descriptor type not implemented: "+s);r.append_pdl1vj$(this.generateCubeMapSampler_0(s))}}}var a,l,u=t.pushConstantRanges,p=M();for(a=u.iterator();a.hasNext();){var c=a.next();c.stages.contains_11rb$(i)&&p.add_11rb$(c)}if(!p.isEmpty())for(l=t.pushConstantRanges.iterator();l.hasNext();){var h;for(h=l.next().pushConstants.iterator();h.hasNext();){var d=h.next();this.appendln_0(r,"uniform "+this.declare_0(d)+";")}}return r.toString()},lN.prototype.generateUniformBuffer_0=function(t){var e,i=Ot();for(e=t.uniforms.iterator();e.hasNext();){var n=e.next();this.appendln_0(i,"uniform "+this.declare_0(n)+";")}return i.toString()},lN.prototype.generateTextureSampler_0=function(t){var e=t.isDepthSampler?"sampler2DShadow":"sampler2D",i=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform "+e+" "+t.name+i+";\n"},lN.prototype.generateCubeMapSampler_0=function(t){var e=t.isDepthSampler?"samplerCubeShadow":"samplerCube",i=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform "+e+" "+t.name+i+";\n"},lN.prototype.generateAttributeBindings_0=function(t){var e,i=new Qe("\n");for(e=t.vertices.bindings.iterator();e.hasNext();){var n;for(n=e.next().vertexAttributes.iterator();n.hasNext();){var r=n.next();this.appendln_0(i,"layout(location="+r.location+") in "+r.type.glslType+" "+r.name+";")}}return i.toString()},lN.prototype.generateStageInputs_0=function(t){var e,i=new Qe("\n");for(e=t.inputs.iterator();e.hasNext();){var n=e.next(),r=n.isFlat?"flat":"";this.appendln_0(i,r+" in "+n.variable.glslType()+" "+n.variable.name+";")}return i.toString()},lN.prototype.generateStageOutputs_0=function(t){var e,i=new Qe("\n");for(e=t.outputs.iterator();e.hasNext();){var n=e.next(),r=n.isFlat?"flat":"";this.appendln_0(i,r+" out "+n.variable.glslType()+" "+n.variable.name+";")}return i.toString()},lN.prototype.appendln_0=function(t,e){return t.append_pdl1vj$(e+"\n")},lN.prototype.declare_0=function(t){var i;if(e.isType(t,Vh))i="float "+t.name;else if(e.isType(t,Hh))i="vec2 "+t.name;else if(e.isType(t,Wh))i="vec3 "+t.name;else if(e.isType(t,Kh))i="vec4 "+t.name;else if(e.isType(t,Xh))i="vec4 "+t.name;else if(e.isType(t,Yh))i="float "+t.name+"["+t.length+"]";else if(e.isType(t,Zh))i="vec2 "+t.name+"["+t.length+"]";else if(e.isType(t,Jh))i="vec3 "+t.name+"["+t.length+"]";else if(e.isType(t,Qh))i="vec4 "+t.name+"["+t.length+"]";else if(e.isType(t,td))i="mat3 "+t.name;else if(e.isType(t,ed))i="mat4 "+t.name;else if(e.isType(t,id))i="mat4 "+t.name+"["+t.length+"]";else{if(!e.isType(t,nd))throw new He("An operation is not implemented: Uniform type name not implemented: "+t);i="int "+t.name}return i},pN.prototype.appendFunction_puj7f4$=function(t,e){this.functions.put_xwzc9p$(t,e)},pN.prototype.appendMain_61zpoe$=function(t){this.mainCode.add_11rb$(t)},pN.prototype.sampleTexture2d_buzeal$$default=function(t,e,i){return null==i?"texture("+t+", "+e+")":"textureLod("+t+", "+e+", "+Ct(i)+")"},pN.prototype.sampleTexture2dDepth_puj7f4$=function(t,e){return"textureProj("+t+", "+e+")"},pN.prototype.sampleTextureCube_buzeal$$default=function(t,e,i){return this.sampleTexture2d_buzeal$(t,e,i)},pN.prototype.generateFunctions=function(){return Mt(this.functions.values,"\n")},pN.prototype.generateMain=function(){return Mt(this.mainCode,"\n")},pN.$metadata$={kind:$,simpleName:"CodeGen",interfaces:[Tl]},lN.$metadata$={kind:$,simpleName:"ShaderGeneratorImplWebGl",interfaces:[Tu]},Object.defineProperty(cN.prototype,"gl_0",{configurable:!0,get:function(){return this.ctx.gl_8be2vx$}}),cN.prototype.setupShader_ye1q9v$=function(t){var e,i,n=x(t.pipeline),r=this.shaders,o=r.get_11rb$(n);if(null==o){var s=new EC(this.compileShader_0(n.shaderCode),n,this.ctx);r.put_xwzc9p$(n,s),i=s}else i=o;var a=i;return a!==this.currentShader&&(null!=(e=this.currentShader)&&e.unUse(),this.currentShader=a,a.use()),a.bindInstance_ye1q9v$(t)},cN.prototype.deleteShader_lfrgcb$=function(t){var e=this.shaders.get_11rb$(t);null!=e&&(e.destroyInstance_lfrgcb$(t),e.isEmpty()&&(zt(e,this.currentShader)&&(e.unUse(),this.currentShader=null),e.destroy(),this.shaders.remove_11rb$(t)))},cN.prototype.compileShader_0=function(t){var i=this.gl_0.createShader(WebGLRenderingContext.VERTEX_SHADER);this.gl_0.shaderSource(i,t.vertexSrc),this.gl_0.compileShader(i);var n=this.gl_0.getShaderParameter(i,WebGLRenderingContext.COMPILE_STATUS);if(!zt(n,!0)){var r=this.gl_0.getShaderInfoLog(i),o=qN.Log,s=vz.ERROR,a=e.getKClassFromExpression(this).simpleName;s.level>=o.level.level&&o.printer(s,a,"Vertex shader compilation failed:\n"+Ct(r));var l=qN.Log,u=vz.ERROR,p=e.getKClassFromExpression(this).simpleName;throw u.level>=l.level.level&&l.printer(u,p,"Shader source: \n"+this.formatShaderSrc_0(t.vertexSrc)),cn("Vertex shader compilation failed: "+Ct(r))}var c=this.gl_0.createShader(WebGLRenderingContext.FRAGMENT_SHADER);this.gl_0.shaderSource(c,t.fragmentSrc),this.gl_0.compileShader(c);var h=this.gl_0.getShaderParameter(c,WebGLRenderingContext.COMPILE_STATUS);if(!zt(h,!0)){var d=this.gl_0.getShaderInfoLog(c),f=qN.Log,_=vz.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"Fragment shader compilation failed:\n"+Ct(d));var $=qN.Log,y=vz.ERROR,v=e.getKClassFromExpression(this).simpleName;throw y.level>=$.level.level&&$.printer(y,v,"Shader source: \n"+this.formatShaderSrc_0(t.fragmentSrc)),cn("Fragment shader compilation failed: "+Ct(d))}var g=this.gl_0.createProgram();if(this.gl_0.attachShader(g,i),this.gl_0.attachShader(g,c),this.gl_0.linkProgram(g),this.gl_0.deleteShader(i),this.gl_0.deleteShader(c),!zt(this.gl_0.getProgramParameter(g,WebGLRenderingContext.LINK_STATUS),!0)){var b=this.gl_0.getProgramInfoLog(g),x=qN.Log,w=vz.ERROR,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Shader linkage failed:\n"+Ct(b));var k=qN.Log,S=vz.ERROR,C=e.getKClassFromExpression(this).simpleName;S.level>=k.level.level&&k.printer(S,C,"Vertex shader source: \n"+this.formatShaderSrc_0(t.vertexSrc));var N=qN.Log,E=vz.ERROR,P=e.getKClassFromExpression(this).simpleName;throw E.level>=N.level.level&&N.printer(E,P,"Fragment shader source: \n"+this.formatShaderSrc_0(t.fragmentSrc)),cn("Shader linkage failed: "+Ct(b))}return g},cN.prototype.formatShaderSrc_0=function(t){var e,i,n=Ot(),r=0;for(e=Je(t).iterator();e.hasNext();){var o=e.next();n.append_pdl1vj$((J((i=r,r=i+1|0,i))+1|0).toString()+" "+o+"\n")}return n.toString()},cN.$metadata$={kind:$,simpleName:"ShaderManager",interfaces:[]},hN.prototype.loadTexture_hlfduu$=function(t,i,n){var r;if(e.isType(n,Mh))r=this.loadTexture2d_0(t,i,n);else if(e.isType(n,GS))r=this.loadTexture2d_0(t,i,n);else{if(!e.isType(n,Fh))throw V("TextureData type not supported: "+n);r=this.loadTextureCube_0(t,i,n)}return r},hN.prototype.loadTextureCube_0=function(t,e,i){var n=t.gl_8be2vx$,r=new OC(t,WebGLRenderingContext.TEXTURE_CUBE_MAP,n.createTexture(),this.estimateTexSize_0(i));return r.setSize_vux9f0$(i.width,i.height),r.applySamplerProps_xetyfc$(e),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X,i.right),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_X,i.left),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_Y,i.up),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_Y,i.down),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_Z,i.back),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_Z,i.front),e.mipMapping&&n.generateMipmap(WebGLRenderingContext.TEXTURE_CUBE_MAP),r},hN.prototype.loadTexture2d_0=function(t,e,i){var n=t.gl_8be2vx$,r=new OC(t,WebGLRenderingContext.TEXTURE_2D,n.createTexture(),this.estimateTexSize_0(i));return r.setSize_vux9f0$(i.width,i.height),r.applySamplerProps_xetyfc$(e),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_2D,i),e.mipMapping&&n.generateMipmap(WebGLRenderingContext.TEXTURE_2D),r},hN.prototype.estimateTexSize_0=function(t){var i=e.isType(t,Fh)?6:1,n=t.width,r=t.height,o=A.max(n,r),s=A.log2(o),a=F(A.floor(s))+1|0;return lh().estimatedTexSize_4qozqa$(t.width,t.height,wC(t.format),i,a)},hN.prototype.texImage2d_0=function(t,i,n){var r;if(t.pixelStorei(WebGLRenderingContext.UNPACK_COLORSPACE_CONVERSION_WEBGL,WebGLRenderingContext.NONE),e.isType(n,Mh))t.texImage2D(i,0,gC(n.format),n.width,n.height,0,xC(n.format),bC(n.format),(e.isType(r=n.data,$N)?r:c()).buffer);else{if(!e.isType(n,GS))throw V("Invalid TextureData type for texImage2d: "+n);t.texImage2D(i,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,n.data)}},hN.$metadata$={kind:y,simpleName:"TextureLoader",interfaces:[]};var dN=null;function fN(){return null===dN&&new hN,dN}function _N(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=WebGLRenderingContext.FLOAT),this.vbo=t,this.elemSize=e,this.strideBytes=i,this.offset=n,this.type=r}function mN(t,e){this.capacity_tfbtga$_0=t,this.buffer=e(),this.limit_wr5sjr$_0=this.capacity,this.position_xkur2v$_0=0}function $N(t){var e;mN.call(this,t.length,(e=t,function(){return e}))}function yN(t,e){return e=e||Object.create($N.prototype),$N.call(e,new Uint8Array(t)),e}function vN(t){var e;mN.call(this,t,(e=t,function(){return new Uint16Array(e)}))}function gN(t){var e;mN.call(this,t,(e=t,function(){return new Uint32Array(e)}))}function bN(t){var e;mN.call(this,t,(e=t,function(){return new Float32Array(e)}))}function xN(t){var e;mN.call(this,t,(e=t,function(){return new DataView(new ArrayBuffer(e))}))}function wN(t){return yN(t)}function zN(t){return new gN(t)}function kN(t){return new bN(t)}function SN(t){return new xN(t)}_N.prototype.bindAttribute_9sni52$=function(t,e){this.vbo.bind_44a5h0$(e),this.type===WebGLRenderingContext.INT||this.type===WebGLRenderingContext.UNSIGNED_INT?e.gl_8be2vx$.vertexAttribIPointer(t,this.elemSize,this.type,this.strideBytes,4*this.offset|0):e.gl_8be2vx$.vertexAttribPointer(t,this.elemSize,this.type,!1,this.strideBytes,4*this.offset|0)},_N.$metadata$={kind:$,simpleName:"VboBinder",interfaces:[]},Object.defineProperty(mN.prototype,"capacity",{get:function(){return this.capacity_tfbtga$_0}}),Object.defineProperty(mN.prototype,"limit",{configurable:!0,get:function(){return this.limit_wr5sjr$_0},set:function(t){if(t<0||t>this.capacity)throw cn("Limit is out of bounds: "+t+" (capacity: "+this.capacity+")");this.limit_wr5sjr$_0=t,this.position>t&&(this.position=t)}}),Object.defineProperty(mN.prototype,"position",{configurable:!0,get:function(){return this.position_xkur2v$_0},set:function(t){this.position_xkur2v$_0=t}}),Object.defineProperty(mN.prototype,"remaining",{configurable:!0,get:function(){return this.limit-this.position|0}}),mN.prototype.flip=function(){this.limit=this.position,this.position=0},mN.prototype.clear=function(){this.limit=this.capacity,this.position=0},mN.$metadata$={kind:$,simpleName:"GenericBuffer",interfaces:[M$]},$N.prototype.get_za3lpa$=function(t){return this.buffer[t]},$N.prototype.set_6t1wet$=function(t,e){this.buffer[t]=e},$N.prototype.put_mj6st8$=function(t,e,i){var n,r;n=e+i|0;for(var o=e;o<n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},$N.prototype.put_s8j3t7$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},$N.prototype.put_ay2i3f$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_s8j3t7$(t.get_za3lpa$(n));return this},$N.$metadata$={kind:$,simpleName:"Uint8BufferImpl",interfaces:[mN,j$]},vN.prototype.get_za3lpa$=function(t){return this.buffer[t]},vN.prototype.set_2bqt6h$=function(t,e){this.buffer[t]=e},vN.prototype.put_359eei$=function(t,e,i){var n,r;n=e+i-1|0;for(var o=e;o<=n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},vN.prototype.put_mq22fl$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},vN.prototype.put_8k344i$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_mq22fl$(t.get_za3lpa$(n));return this},vN.$metadata$={kind:$,simpleName:"Uint16BufferImpl",interfaces:[mN,A$]},gN.prototype.get_za3lpa$=function(t){return this.buffer[t]},gN.prototype.set_vux9f0$=function(t,e){this.buffer[t]=e},gN.prototype.put_nd5v6f$=function(t,e,i){var n,r;n=e+i-1|0;for(var o=e;o<=n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},gN.prototype.put_za3lpa$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},gN.prototype.put_7hqxcs$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_za3lpa$(t.get_za3lpa$(n));return this},gN.$metadata$={kind:$,simpleName:"Uint32BufferImpl",interfaces:[mN,R$]},bN.prototype.get_za3lpa$=function(t){return this.buffer[t]},bN.prototype.set_24o109$=function(t,e){this.buffer[t]=e},bN.prototype.put_kgymra$=function(t,e,i){var n,r;n=e+i|0;for(var o=e;o<n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},bN.prototype.put_mx4ult$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},bN.prototype.put_he122g$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_mx4ult$(t.get_za3lpa$(n));return this},bN.$metadata$={kind:$,simpleName:"Float32BufferImpl",interfaces:[mN,I$]},xN.prototype.putUint8_s8j3t7$=function(t){var e;return this.buffer.setUint8((e=this.position,this.position=e+1|0,e),t),this},xN.prototype.putUint8_mj6st8$=function(t,e,i){var n,r;n=e+i|0;for(var o=e;o<n;o++)this.buffer.setUint8((r=this.position,this.position=r+1|0,r),t[o]);return this},xN.prototype.putUint8_ay2i3f$=function(t){var e,i,n;e=t.position,i=t.limit;for(var r=e;r<i;r++)this.buffer.setUint8((n=this.position,this.position=n+1|0,n),t.get_za3lpa$(r));return this},xN.prototype.putUint16_mq22fl$=function(t){return this.buffer.setUint16(this.position,t),this.position=this.position+2|0,this},xN.prototype.putUint16_359eei$=function(t,e,i){var n;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setUint16(this.position,t[r]),this.position=this.position+2|0;return this},xN.prototype.putUint16_8k344i$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setUint16(this.position,t.get_za3lpa$(n)),this.position=this.position+2|0;return this},xN.prototype.putUint32_za3lpa$=function(t){return this.buffer.setUint32(this.position,t),this.position=this.position+4|0,this},xN.prototype.putUint32_nd5v6f$=function(t,e,i){var n;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setUint32(this.position,t[r]),this.position=this.position+4|0;return this},xN.prototype.putUint32_7hqxcs$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setUint32(this.position,t.get_za3lpa$(n)),this.position=this.position+4|0;return this},xN.prototype.putFloat32_mx4ult$=function(t){return this.buffer.setFloat32(this.position,t),this.position=this.position+4|0,this},xN.prototype.putFloat32_kgymra$=function(t,e,i){var n;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setFloat32(this.position,t[r]),this.position=this.position+4|0;return this},xN.prototype.putFloat32_he122g$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setFloat32(this.position,t.get_za3lpa$(n)),this.position=this.position+4|0;return this},xN.$metadata$={kind:$,simpleName:"MixedBufferImpl",interfaces:[mN,L$]},ei.AwaitedAsset=li,Object.defineProperty(ei,"Companion",{get:ci}),o["kotlinx-coroutines-core"]=n;var CN=t.de||(t.de={}),NN=CN.fabmax||(CN.fabmax={}),EN=NN.kool||(NN.kool={});EN.AssetManager=ei,EN.AssetRef=$i,EN.LocalRawAssetRef=yi,EN.HttpRawAssetRef=vi,EN.LocalTextureAssetRef=gi,EN.HttpTextureAssetRef=bi,EN.LoadedAsset=xi,EN.LoadedRawAsset=wi,EN.LoadedTextureAsset=zi,EN.EngineStats=ki,Si.Pointer=Ei,Object.defineProperty(Ti,"STARTED",{get:Ai}),Object.defineProperty(Ti,"ACTIVE",{get:Li}),Object.defineProperty(Ti,"ENDED_BEFORE_STARTED",{get:Bi}),Object.defineProperty(Ti,"ENDED_BEFORE_ACTIVE",{get:Vi}),Object.defineProperty(Ti,"ENDED",{get:Wi}),Object.defineProperty(Ti,"INVALID",{get:Yi}),Pi.UpdateState=Ti,Si.BufferedPointerInput=Pi,Si.KeyEventListener=Zi,Si.KeyEvent=Qi,Si.PointerState=tn,Object.defineProperty(Si,"Companion",{get:rn}),EN.InputManager=Si,Object.defineProperty(on,"Companion",{get:un}),EN.KoolContext=on,EN.KoolException_init_61zpoe$=cn,EN.KoolException=pn;var PN=EN.math||(EN.math={});PN.BSpline=hn,PN.BSplineVec2f=dn,Object.defineProperty($n,"Companion",{get:gn}),PN.Mat3f=$n,Object.defineProperty(bn,"Companion",{get:zn}),PN.Mat4d=bn,Object.defineProperty(kn,"Companion",{get:Nn}),PN.Mat4dStack=kn,Object.defineProperty(En,"Companion",{get:On}),PN.Mat4f=En,Object.defineProperty(Mn,"Companion",{get:Fn}),PN.Mat4fStack=Mn,Object.defineProperty(PN,"DEG_2_RAD",{get:function(){return An}}),Object.defineProperty(PN,"RAD_2_DEG",{get:function(){return Rn}}),Object.defineProperty(PN,"FUZZY_EQ_F",{get:function(){return In}}),Object.defineProperty(PN,"FUZZY_EQ_D",{get:function(){return Ln}}),PN.getNumMipLevels_vux9f0$=Un,PN.smoothStep_y2kzbl$=function(t,e,i){var n,r=(i-t)/(e-t);return(n=r<0?0:r>1?1:r)*n*(3-2*n)},PN.triArea_n440fu$=Vn,PN.triAspectRatio_n440fu$=Gn,PN.partition_iuu93u$=Kn,PN.partition_6k0an1$=Xn,PN.Plane=Yn,PN.distanceToRay_f1pxpf$=Zn,PN.sqrDistanceToRay_f1pxpf$=Jn,PN.sqrDistancePointToRay_dthv57$=Qn,PN.PointDistribution=tr,Object.defineProperty(PN,"defaultRandomInstance",{get:function(){return qn}}),PN.randomI=function(){return qn.randomI()},PN.randomF_dleff0$=function(t,e){return qn.randomF_dleff0$(t,e)},PN.Random=er,PN.Ray=ir,PN.RayTest=nr,Object.defineProperty(rr,"Companion",{get:ar}),PN.Vec2f_init_mx4ult$=lr,PN.Vec2f=rr,PN.MutableVec2f_init=pr,PN.MutableVec2f_init_czzhjp$=cr,PN.MutableVec2f=ur,Object.defineProperty(hr,"Companion",{get:_r}),PN.Vec2d_init_14dthe$=mr,PN.Vec2d=hr,PN.MutableVec2d_init=yr,PN.MutableVec2d=$r,Object.defineProperty(vr,"Companion",{get:xr}),PN.Vec2i_init_za3lpa$=wr,PN.Vec2i=vr,PN.MutableVec2i_init=kr,PN.MutableVec2i=zr,Object.defineProperty(Sr,"Companion",{get:Er}),PN.Vec3f_init_mx4ult$=Pr,PN.Vec3f_init_czzhiu$=Tr,PN.Vec3f=Sr,PN.MutableVec3f_init=Mr,PN.MutableVec3f_init_mx4ult$=jr,PN.MutableVec3f_init_czzhiu$=Ar,PN.MutableVec3f=Or,Object.defineProperty(Rr,"Companion",{get:Dr}),PN.Vec3d_init_14dthe$=qr,PN.Vec3d=Rr,PN.MutableVec3d_init=Fr,PN.MutableVec3d_init_czzhiw$=function(t,e){return e=e||Object.create(Br.prototype),Br.call(e,t.x,t.y,t.z),e},PN.MutableVec3d=Br,Object.defineProperty(Ur,"Companion",{get:Hr}),PN.Vec3i_init_za3lpa$=Wr,PN.Vec3i=Ur,PN.MutableVec3i_init=Xr,PN.MutableVec3i=Kr,Object.defineProperty(Yr,"Companion",{get:Qr}),PN.Vec4f_init_mx4ult$=to,PN.Vec4f_init_2qa7tb$=eo,PN.Vec4f=Yr,PN.MutableVec4f_init=no,PN.MutableVec4f=io,Object.defineProperty(ro,"Companion",{get:ao}),PN.Vec4d_init_14dthe$=lo,PN.Vec4d=ro,PN.MutableVec4d_init=po,PN.MutableVec4d=uo,Object.defineProperty(co,"Companion",{get:So}),PN.Vec4i_init_za3lpa$=Co,PN.Vec4i=co,PN.MutableVec4i_init=Eo,PN.MutableVec4i=No,PN.scale_2qa7tb$=function(t,e){return t.scale_749b8l$(e,Mr())},PN.cross_4lfkt4$=Po;var TN=EN.modules||(EN.modules={});To.EdgeHandler=Oo,To.HalfEdgeVertex=jo,To.HalfEdge=Ao;var ON=TN.mesh||(TN.mesh={});ON.HalfEdgeMesh=To,ON.ListEdgeHandler=Ro,ON.OcTreeEdgeHandler=Do;var MN=ON.simplification||(ON.simplification={});MN.CollapseStrategy=Bo,MN.defaultCollapseStrategy=Uo,MN.ErrorQuadric=Vo,MN.simplify_hem9$=function(t,e,i){void 0===i&&(i=vt());var n=new Go(e);xt(n.excludedEdges,i),n.simplifyMesh_mnbsaa$(t)},MN.MeshSimplifier=Go,MN.TermCriterion=Xo,MN.terminateOnFaceCountRel_14dthe$=function(t){return new Yo(t)},Object.defineProperty(Zo,"FLOAT",{get:Qo}),Object.defineProperty(Zo,"VEC_2F",{get:ts}),Object.defineProperty(Zo,"VEC_3F",{get:es}),Object.defineProperty(Zo,"VEC_4F",{get:is}),Object.defineProperty(Zo,"INT",{get:ns}),Object.defineProperty(Zo,"VEC_2I",{get:rs}),Object.defineProperty(Zo,"VEC_3I",{get:os}),Object.defineProperty(Zo,"VEC_4I",{get:ss}),Object.defineProperty(Zo,"MAT_2F",{get:as}),Object.defineProperty(Zo,"MAT_3F",{get:ls}),Object.defineProperty(Zo,"MAT_4F",{get:us});var jN=EN.pipeline||(EN.pipeline={});jN.GlslType=Zo,Object.defineProperty(ps,"Companion",{get:ds}),jN.Attribute=ps,Object.defineProperty(fs,"Companion",{get:$s}),jN.DepthMapPass=fs,Object.defineProperty(ys,"Companion",{get:Ms}),jN.NormalLinearDepthMapPass_init_br7tm5$=js,jN.NormalLinearDepthMapPass=ys,As.Builder=Rs,jN.DescriptorSetLayout=As,Is.Builder=Ls,jN.Descriptor=Is,Ds.Builder=qs,jN.TextureSampler=Ds,Bs.Builder=Fs,jN.CubeMapSampler=Bs,Us.Builder=Vs,jN.UniformBuffer=Us,Object.defineProperty(Gs,"IMAGE_SAMPLER",{get:Ws}),Object.defineProperty(Gs,"CUBE_IMAGE_SAMPLER",{get:Ks}),Object.defineProperty(Gs,"UNIFORM_BUFFER",{get:Xs}),jN.DescriptorType=Gs;var AN=jN.drawqueue||(jN.drawqueue={});AN.DrawCommand=Ys,AN.DrawQueue=Zs,jN.LoadedTexture=Qs,jN.OffscreenRenderPass=ta,ta.Config=ea,ta.ConfigBuilder=ia,ta.TextureAttachmentConfig=na,ta.TextureAttachmentConfigBuilder=ra,Object.defineProperty(oa,"TEXTURE",{get:aa}),Object.defineProperty(oa,"RENDER_BUFFER",{get:la}),ta.RenderTarget=oa,jN.OffscreenRenderPass2d=ua,Object.defineProperty(ha,"FRONT",{get:fa}),Object.defineProperty(ha,"BACK",{get:_a}),Object.defineProperty(ha,"LEFT",{get:ma}),Object.defineProperty(ha,"RIGHT",{get:$a}),Object.defineProperty(ha,"UP",{get:ya}),Object.defineProperty(ha,"DOWN",{get:va}),pa.ViewDirection=ha,jN.OffscreenRenderPassCube=pa,ba.Layout=xa,ba.Builder=wa,Object.defineProperty(ba,"Companion",{get:el}),jN.Pipeline=ba,Object.defineProperty(il,"DISABLED",{get:rl}),Object.defineProperty(il,"BLEND_ADDITIVE",{get:ol}),Object.defineProperty(il,"BLEND_MULTIPLY_ALPHA",{get:sl}),Object.defineProperty(il,"BLEND_PREMULTIPLIED_ALPHA",{get:al}),jN.BlendMode=il,Object.defineProperty(ll,"DISABLED",{get:pl}),Object.defineProperty(ll,"ALWAYS",{get:cl}),Object.defineProperty(ll,"NEVER",{get:hl}),Object.defineProperty(ll,"LESS",{get:dl}),Object.defineProperty(ll,"LESS_EQUAL",{get:fl}),Object.defineProperty(ll,"GREATER",{get:_l}),Object.defineProperty(ll,"GREATER_EQUAL",{get:ml}),Object.defineProperty(ll,"EQUAL",{get:$l}),Object.defineProperty(ll,"NOT_EQUAL",{get:yl}),jN.DepthCompareOp=ll,Object.defineProperty(vl,"DEFAULT",{get:bl}),Object.defineProperty(vl,"CULL_BACK_FACES",{get:xl}),Object.defineProperty(vl,"CULL_FRONT_FACES",{get:wl}),Object.defineProperty(vl,"NO_CULLING",{get:zl}),jN.CullMethod=vl,kl.Builder=Sl,jN.PushConstantRange=kl,Cl.UpdateEvent=Nl,jN.RenderPass=Cl,jN.ScreenRenderPass=El,jN.Shader=Pl,Object.defineProperty(Ol,"Y_UP",{get:jl}),Object.defineProperty(Ol,"Y_DOWN",{get:Al}),Tl.ClipSpaceOrientation=Ol;var RN=jN.shadermodel||(jN.shadermodel={});RN.CodeGenerator=Tl,RN.ColorAlphaNode=Rl,RN.PremultiplyColorNode=Il,RN.GammaNode=Ll,RN.HdrToLdrNode=Dl,RN.FragmentColorOutNode=ql,RN.FragmentDepthOutNode=Bl,RN.DiscardAlphaNode=Fl,RN.LightNode=Ul,RN.MultiLightNode=Vl,RN.SingleLightUniformDataNode=Hl,RN.SingleLightNode=Kl,RN.SinglePointLightNode=Xl,RN.SingleSpotLightNode=Yl,RN.UnlitMaterialNode=Zl,RN.PhongMaterialNode=Jl,RN.PbrMaterialNode=Ql,RN.PbrLightNode=tu,RN.MathOpNode=eu,RN.AddNode=iu,RN.SubtractNode=nu,RN.DivideNode=ru,RN.MultiplyNode=ou,RN.MixNode=su,RN.VecFromColorNode=au,RN.DistanceNode=lu,RN.NormalizeNode=uu,RN.ViewDirNode=pu,RN.ReflectNode=cu,RN.RefractNode=hu,RN.ModelVar=du,RN.ModelVar1f=fu,RN.ModelVar2f=_u,RN.ModelVar3f=mu,RN.ModelVar4f=$u,RN.ModelVar1i=yu,RN.ModelVar2i=vu,RN.ModelVar3i=gu,RN.ModelVar4i=bu,RN.ModelVarMat4f=xu,RN.ModelVar1fConst=wu,RN.ModelVar2fConst=zu,RN.ModelVar3fConst=ku,RN.ModelVar4fConst=Su,RN.ModelVar1iConst=Cu,RN.ModelVar2iConst=Nu,RN.ModelVar3iConst=Eu,RN.ModelVar4iConst=Pu,RN.ShaderGenerator=Tu,RN.ShaderInterfaceIoVar=Ou,RN.ShaderGraph=Mu,RN.VertexShaderGraph=ju,RN.FragmentShaderGraph=Au,jN.ShaderStage=Fp,Ru.StageBuilder=Iu,Ru.VertexStageBuilder=Lu,Ru.FragmentStageBuilder=Du,RN.ShaderModel=Ru,RN.ShaderNode=qu,RN.ShaderNodeIoVar=Bu,RN.ShadowMapNode=Fu,RN.SimpleShadowMapNode=Uu,RN.SimpleShadowMapTransformNode=Vu,RN.SimpleShadowMapFragmentNode=Hu,RN.CascadedShadowMapNode=Wu,RN.CascadedShadowMapTransformNode=Xu,RN.CascadedShadowMapFragmentNode=Zu,RN.Vec3TransformNode=Qu,RN.Vec4TransformNode=tp,RN.SkinTransformNode=ep,np.StageCopy=op,RN.UniformBufferPremultipliedMvp=np,sp.StageCopy=lp,RN.UniformBufferMvp=sp,RN.TextureNode=up,RN.CubeMapNode=pp,RN.MorphWeightsNode=cp,RN.PushConstantNode=hp,RN.PushConstantNode1f=dp,RN.PushConstantNode2f=fp,RN.PushConstantNode3f=_p,RN.PushConstantNode4f=mp,RN.PushConstantNodeColor=$p,RN.PushConstantNode1i=yp,RN.PushConstantNode2i=vp,RN.PushConstantNode3i=gp,RN.PushConstantNode4i=bp,RN.TextureSamplerNode=xp,RN.NoiseTextureSamplerNode=wp,RN.CubeMapSamplerNode=zp,RN.EquiRectSamplerNode=kp,RN.AoMapSampleNode=Sp,RN.NormalMapNode=Cp,RN.FlipBacksideNormalNode=Np,RN.DisplacementMapNode=Ep,RN.SplitNode=Pp,RN.CombineNode=Tp,RN.Combine31Node=Op,RN.AttributeNode=Mp,RN.InstanceAttributeNode=jp,Ap.InputNode=Rp,Ap.OutputNode=Ip,RN.StageInterfaceNode=Ap,RN.ScreenCoordNode=Lp,RN.FullScreenQuadTexPosNode=Dp,RN.GetMorphWeightNode=qp,RN.RefractionSamplerNode=Bp,Object.defineProperty(Fp,"VERTEX_SHADER",{get:Vp}),Object.defineProperty(Fp,"TESSELEATION_CTRL",{get:Gp}),Object.defineProperty(Fp,"TESSELATION_EVAL",{get:Hp}),Object.defineProperty(Fp,"GEOMETRY_SHADER",{get:Wp}),Object.defineProperty(Fp,"FRAGMENT_SHADER",{get:Kp}),Object.defineProperty(Fp,"ALL",{get:Xp}),Object.defineProperty(Yp,"CUBE_MAP_ALBEDO",{get:Jp}),Object.defineProperty(Yp,"STATIC_ALBEDO",{get:Qp}),Object.defineProperty(Yp,"TEXTURE_ALBEDO",{get:tc}),Object.defineProperty(Yp,"VERTEX_ALBEDO",{get:ec});var IN=jN.shading||(jN.shading={});IN.Albedo=Yp,IN.AlphaMode=ic,IN.AlphaModeBlend=nc,IN.AlphaModeOpaque=rc,IN.AlphaModeMask=oc,sc.StaticColor=ac,sc.VertexColor=lc,sc.TextureColor=uc,sc.CubeMapColor=pc,Object.defineProperty(sc,"Companion",{get:dc}),IN.ModeledShader=sc,IN.PbrMaterialConfig=fc,IN.pbrShader_skmpm9$=function(t){var e=new fc;return t(e),new _c(e)},Object.defineProperty(_c,"Companion",{get:yc}),IN.PbrShader=_c,Object.defineProperty(vc,"Companion",{get:xc}),vc.PhongConfig=wc,IN.PhongShader=vc,Object.defineProperty(zc,"Companion",{get:Dc}),IN.UnlitShader=zc,IN.UnlitMaterialConfig=qc,jN.Std140Layout=Bc,Object.defineProperty(Uc,"R",{get:Gc}),Object.defineProperty(Uc,"RG",{get:Hc}),Object.defineProperty(Uc,"RGB",{get:Wc}),Object.defineProperty(Uc,"RGBA",{get:Kc}),Object.defineProperty(Uc,"R_F16",{get:Xc}),Object.defineProperty(Uc,"RG_F16",{get:Yc}),Object.defineProperty(Uc,"RGB_F16",{get:Zc}),Object.defineProperty(Uc,"RGBA_F16",{get:Jc}),jN.TexFormat=Uc,Object.defineProperty(th,"NOT_LOADED",{get:ih}),Object.defineProperty(th,"LOADING",{get:nh}),Object.defineProperty(th,"LOADED",{get:rh}),Object.defineProperty(th,"LOADING_FAILED",{get:oh}),Qc.LoadingState=th,Object.defineProperty(Qc,"Companion",{get:lh}),jN.Texture_init_wabggl$=uh,jN.Texture=Qc,Object.defineProperty(ch,"Companion",{get:vh}),jN.SingleColorTexture=ch,jN.CubeMapTexture=bh,jN.TextureProps=xh,Object.defineProperty(wh,"NEAREST",{get:kh}),Object.defineProperty(wh,"LINEAR",{get:Sh}),jN.FilterMethod=wh,Object.defineProperty(Ch,"CLAMP_TO_EDGE",{get:Eh}),Object.defineProperty(Ch,"MIRRORED_REPEAT",{get:Ph}),Object.defineProperty(Ch,"REPEAT",{get:Th}),jN.AddressMode=Ch,jN.TextureData=Oh,Object.defineProperty(Mh,"Companion",{get:Bh}),jN.BufferedTextureData=Mh,jN.CubeMapTextureData=Fh,jN.Uniform=Uh,jN.Uniform1f_init_1isgrl$=Gh,jN.Uniform1f=Vh,jN.Uniform2f=Hh,jN.Uniform3f=Wh,jN.Uniform4f=Kh,jN.UniformColor=Xh,jN.Uniform1fv=Yh,jN.Uniform2fv=Zh,jN.Uniform3fv=Jh,jN.Uniform4fv=Qh,jN.UniformMat3f=td,jN.UniformMat4f=ed,jN.UniformMat4fv=id,jN.Uniform1i_init_19mbxw$=rd,jN.Uniform1i=nd,jN.Uniform2i=od,jN.Uniform3i=sd,jN.Uniform4i=ad,ld.Binding=ud,ld.VertexAttribute=pd,ld.Builder=cd,jN.VertexLayout=ld,Object.defineProperty(hd,"VERTEX",{get:fd}),Object.defineProperty(hd,"INSTANCE",{get:_d}),jN.InputRate=hd,EN.toString_lcymw2$=md,Object.defineProperty(vd,"NONE",{get:bd}),Object.defineProperty(vd,"ONSCREEN",{get:xd}),Object.defineProperty(vd,"OFFSCREEN",{get:wd}),$d.ProjCorrectionMode=vd;var LN=EN.scene||(EN.scene={});LN.Camera=$d,LN.OrthographicCamera=zd,kd.Proxy=Sd,LN.PerspectiveCamera=kd,LN.FrustumPlane=Cd,LN.group_2ylazs$=function(t,e){void 0===t&&(t=null);var i=new Od(t);return e(i),i},LN.Group=Od,LN.Lighting=Md,Object.defineProperty(Ad,"DIRECTIONAL",{get:Id}),Object.defineProperty(Ad,"POINT",{get:Ld}),Object.defineProperty(Ad,"SPOT",{get:Dd}),jd.Type=Ad,LN.Light=jd,LN.wireframeMesh_hjnvxh$=function(t,e){void 0===e&&(e=null);var i=new qd;return i.addWireframe_hjnvxh$(t,e),i},LN.LineMesh=qd,LN.colorMesh_gp9ews$=function(t,e){void 0===t&&(t=null);var i=new Fd(new Bw(At([ds().POSITIONS,ds().NORMALS,ds().COLORS])),t);return e(i),i},LN.textureMesh_pyaqjj$=Bd,Object.defineProperty(Fd,"Companion",{get:Gd}),LN.Mesh=Fd,Object.defineProperty(Hd,"Companion",{get:Qd}),LN.MeshRayTest=Hd,LN.Model=tf,Object.defineProperty(ef,"Companion",{get:pf}),LN.Node=ef,LN.orbitInputTransform_uj7ww7$=cf,LN.defaultCamTransform_v4keia$=function(t){var e,i=cf(t,void 0,(e=t,function(t){return t.setMouseRotation_dleff0$(20,-30),t.unaryPlus_uv0sim$(e.camera),s}));return t.unaryPlus_uv0sim$(i),i},Object.defineProperty(df,"NONE",{get:_f}),Object.defineProperty(df,"ROTATE",{get:mf}),Object.defineProperty(df,"PAN",{get:$f}),hf.DragMethod=df,Object.defineProperty(yf,"ZOOM_CENTER",{get:gf}),Object.defineProperty(yf,"ZOOM_TRANSLATE",{get:bf}),hf.ZoomMethod=yf,LN.OrbitInputTransform=hf,LN.PanBase=xf,LN.CameraOrthogonalPan=wf,zf.DragHandler=kf,LN.Scene=zf,Object.defineProperty(Pf,"Companion",{get:Mf}),Sf.prototype.SkyboxCubeShader=Pf,Object.defineProperty(Af,"Companion",{get:Lf}),Sf.prototype.SkyboxSphereShader=Af,Sf.prototype.SkyboxPosNode=qf,Object.defineProperty(LN,"Skybox",{get:function(){return null===Kf&&new Sf,Kf}}),LN.Tags=Xf;var DN=LN.ui||(LN.ui={});DN.Button=Yf,DN.ButtonUi=Zf,DN.ComponentUi=Jf,DN.BlankComponentUi=Qf,DN.SimpleComponentUi=t_,DN.BlurredComponentUi=e_,DN.DrawerMenu=i_,DN.Label=r_,DN.LabelUi=o_,DN.LayoutSpec=s_,Object.defineProperty(a_,"UN",{get:u_}),Object.defineProperty(a_,"DP",{get:p_}),Object.defineProperty(a_,"MM",{get:c_}),Object.defineProperty(a_,"PC",{get:h_}),DN.SizeUnit=a_,DN.zero=d_,DN.full=f_,DN.uns_8ca0d4$=__,DN.dps_8ca0d4$=m_,DN.pcs_8ca0d4$=$_,DN.pc_dleff0$=y_,DN.dp_dleff0$=v_,DN.mm_dleff0$=g_,DN.dp_wl4j30$=b_,DN.pcR_dleff0$=x_,DN.dpR_dleff0$=w_,DN.mmR_dleff0$=z_,DN.SizeSpec=k_,DN.Margin=C_,DN.Gravity=N_,Object.defineProperty(E_,"START",{get:T_}),Object.defineProperty(E_,"CENTER",{get:O_}),Object.defineProperty(E_,"END",{get:M_}),DN.Alignment=E_,DN.ScrollHandler=j_,DN.ScrollHandlerUi=A_,DN.Slider=R_,DN.SliderUi=I_,DN.TextField=L_,DN.TextFieldUi=D_,Object.defineProperty(q_,"Companion",{get:U_}),DN.EditableText=q_,DN.ToggleButton=V_,DN.ToggleButtonUi=G_,DN.UiComponent=H_,DN.UiContainer=Y_,DN.embeddedUi_4gy91$=J_,DN.uiScene_2d22y4$=Q_,DN.UiRoot=tm,Object.defineProperty(em,"Companion",{get:rm}),DN.UiShader=em,Object.defineProperty(om,"Companion",{get:hm}),DN.UiTheme=om,DN.standardFont_mt8j6u$=fm,DN.titleFont_mt8j6u$=_m,DN.theme_vvurn$=mm,DN.ThemeBuilder=$m,DN.ThemeOrCustomProp=ym;var qN=EN.util||(EN.util={}),BN=qN.animation||(qN.animation={});BN.Animation=vm,BN.AnimationChannel=gm,BN.TranslationAnimationChannel=bm,BN.RotationAnimationChannel=xm,BN.ScaleAnimationChannel=wm,BN.WeightAnimationChannel=zm,BN.AnimationNode=km,BN.AnimatedTransformGroup=Sm,BN.MorphAnimatedMesh=Cm,Object.defineProperty(Em,"LINEAR",{get:Mm}),Object.defineProperty(Em,"STEP",{get:Rm}),Object.defineProperty(Em,"CUBICSPLINE",{get:Dm}),Nm.Interpolation=Em,BN.AnimationKey=Nm,BN.RotationKey=qm,BN.CubicRotationKey=Bm,BN.TranslationKey=Fm,BN.CubicTranslationKey=Um,BN.ScaleKey=Vm,BN.CubicScaleKey=Gm,BN.WeightKey=Hm,BN.CubicWeightKey=Wm,Object.defineProperty(Km,"Companion",{get:Zm}),BN.Animator=Km,BN.LinearAnimator=Jm,BN.CosAnimator=Qm,BN.InterpolatedValue=t$,BN.InterpolatedFloat=e$,BN.SpringDamperFloat=i$,BN.SpringDamperDouble=n$,r$.SkinNode=o$,BN.Skin=r$,Object.defineProperty(s$,"Companion",{get:f$});var FN=qN.ao||(qN.ao={});FN.AmbientOcclusionPass=s$,Object.defineProperty(m$,"Companion",{get:v$}),FN.AoSetup=m$,FN.AoDenoisePass=g$,S$.ForwardAoPipeline=C$,S$.DeferredAoPipeline=N$,Object.defineProperty(S$,"Companion",{get:T$}),FN.AoPipeline=S$,qN.BoundingBox_init_4lfkt4$=function(t,e,i){return i=i||Object.create(O$.prototype),O$.call(i),i.set_4lfkt4$(t,e),i},qN.BoundingBox=O$,qN.Buffer=M$,qN.Uint8Buffer=j$,qN.Uint16Buffer=A$,qN.Uint32Buffer=R$,qN.Float32Buffer=I$,qN.MixedBuffer=L$,qN.copy_2p1efm$=D$,qN.copy_cgavii$=q$,Object.defineProperty(B$,"Companion",{get:V$}),qN.Color=B$,qN.MutableColor_init=H$,qN.MutableColor_init_d7aj7k$=W$,qN.MutableColor=G$,Object.defineProperty(X$,"Companion",{get:iy}),qN.ColorGradient_init_5tenyj$=ry,qN.ColorGradient=X$,qN.DataStream=oy,Object.defineProperty(ay,"UPPER_LEFT",{get:uy}),Object.defineProperty(ay,"UPPER_RIGHT",{get:py}),Object.defineProperty(ay,"LOWER_LEFT",{get:cy}),Object.defineProperty(ay,"LOWER_RIGHT",{get:hy}),sy.Position=ay,qN.DebugOverlay=sy,Object.defineProperty($y,"Companion",{get:gy}),$y.Config=by;var UN=qN.deferred||(qN.deferred={});UN.DeferredLightShader=$y,Object.defineProperty(xy,"Companion",{get:ky}),UN.DeferredMrtPass=xy,Object.defineProperty(Cy,"Companion",{get:Py}),UN.DeferredOutputShader=Cy,Object.defineProperty(Ty,"Companion",{get:jy}),Ty.MrtMultiplexNode=Ay,Ty.MrtDeMultiplexNode=Ry,UN.DeferredPbrShader=Ty,UN.DeferredPipeline=Iy,UN.DeferredPipelineConfig=Ly,Dy.PointLight=qy,UN.DeferredPointLights=Dy,UN.DiscardClearNode=Fy,UN.DeferredCameraNode=Uy,Gy.SpotLight=Hy,UN.DeferredSpotLights=Gy,UN.PbrLightingPass=Wy,Object.defineProperty(Yy,"Companion",{get:Qy}),Yy.DeferredPbrConfig=tv,UN.PbrSceneShader=Yy,UN.ReflectionDenoisePass=ev,Object.defineProperty(ov,"Companion",{get:cv}),UN.ReflectionPass=ov,UN.ScreenSpaceRayTraceNode=dv,qN.Disposable=fv,qN.uiFont_a4r08d$=_v,qN.FontProps=mv,Object.defineProperty($v,"Companion",{get:gv}),qN.Font_init_8tzsp9$=xv,qN.Font=$v,qN.CharMetrics=wv,qN.CharMap=zv,Object.defineProperty(kv,"Companion",{get:Nv}),Object.defineProperty(Ev,"Companion",{get:Ov}),Object.defineProperty(Ev,"$serializer",{get:Av}),kv.Sparse_init_c4f9z2$=Rv,kv.Sparse=Ev,Object.defineProperty(Iv,"Companion",{get:qv}),Object.defineProperty(Iv,"$serializer",{get:Uv}),kv.SparseIndices_init_ei4ty7$=Vv,kv.SparseIndices=Iv,Object.defineProperty(Gv,"Companion",{get:Kv}),Object.defineProperty(Gv,"$serializer",{get:Zv}),kv.SparseValues_init_tup0k7$=Jv,kv.SparseValues=Gv,Object.defineProperty(kv,"$serializer",{get:eg});var VN=qN.gltf||(qN.gltf={});VN.GltfAccessor_init_xcc4mb$=ig,VN.GltfAccessor=kv,VN.DataStreamAccessor=ng,VN.IntAccessor=rg,VN.FloatAccessor=og,VN.Vec2fAccessor=sg,VN.Vec3fAccessor=ag,VN.Vec4fAccessor=lg,VN.Vec4iAccessor=ug,VN.Mat4fAccessor=pg,Object.defineProperty(hg,"Companion",{get:_g}),Object.defineProperty(hg,"$serializer",{get:yg}),cg.Channel_init_izej1q$=vg,cg.Channel=hg,Object.defineProperty(gg,"Companion",{get:wg}),Object.defineProperty(gg,"$serializer",{get:Sg}),cg.Target_init_woby6u$=Cg,cg.Target=gg,Object.defineProperty(Ng,"Companion",{get:Tg}),Object.defineProperty(Ng,"$serializer",{get:jg}),cg.Sampler_init_vbg14u$=Ag,cg.Sampler=Ng,Object.defineProperty(cg,"Companion",{get:Lg}),Object.defineProperty(cg,"$serializer",{get:Bg}),VN.GltfAnimation_init_u8627j$=Fg,VN.GltfAnimation=cg,Object.defineProperty(Ug,"Companion",{get:Hg}),Object.defineProperty(Ug,"$serializer",{get:Xg}),VN.GltfAsset_init_6zcyl3$=Yg,VN.GltfAsset=Ug,VN.loadGltfFile_7e2ead$=Jg,VN.loadGltfModel_aln4ac$=function(t,e,i,n,r,o){var s=new Qg(t,e,i,n,r);return o?s:s.doResume(null)},Object.defineProperty(ob,"Companion",{get:lb}),Object.defineProperty(ob,"$serializer",{get:cb}),VN.GltfBuffer_init_7vc2qp$=hb,VN.GltfBuffer=ob,Object.defineProperty(db,"Companion",{get:mb}),Object.defineProperty(db,"$serializer",{get:vb}),VN.GltfBufferView_init_m5zzca$=gb,VN.GltfBufferView=db,bb.ModelGenerateConfig=xb,bb.ModelMaterialConfig=wb,o["kotlinx-serialization-kotlinx-serialization-core-jsLegacy"]=r,Object.defineProperty(bb,"Companion",{get:Eb}),Object.defineProperty(bb,"$serializer",{get:Ob}),VN.GltfFile_init_iuf0kj$=Mb,VN.GltfFile=bb,Object.defineProperty(jb,"Companion",{get:Ib}),Object.defineProperty(jb,"$serializer",{get:qb}),VN.GltfImage_init_kfyxti$=Bb,VN.GltfImage=jb,Object.defineProperty(Ub,"Companion",{get:Hb}),Object.defineProperty(Ub,"$serializer",{get:Xb}),Fb.PbrMetallicRoughness_init_t9ohaw$=Yb,Fb.PbrMetallicRoughness=Ub,Object.defineProperty(Fb,"Companion",{get:Qb}),Object.defineProperty(Fb,"$serializer",{get:ix}),VN.GltfMaterial_init_6sdafb$=nx,VN.GltfMaterial=Fb,Object.defineProperty(ox,"Companion",{get:lx}),Object.defineProperty(ox,"$serializer",{get:cx}),rx.Primitive_init_g6eddi$=hx,rx.Primitive=ox,Object.defineProperty(rx,"Companion",{get:_x}),Object.defineProperty(rx,"$serializer",{get:yx}),VN.GltfMesh_init_bdgbz6$=vx,VN.GltfMesh=rx,Object.defineProperty(gx,"Companion",{get:wx}),Object.defineProperty(gx,"$serializer",{get:Sx}),VN.GltfNode_init_fw4yk9$=Cx,VN.GltfNode=gx,Object.defineProperty(Nx,"Companion",{get:Tx}),Object.defineProperty(Nx,"$serializer",{get:jx}),VN.GltfScene_init_ldvoza$=Ax,VN.GltfScene=Nx,Object.defineProperty(Rx,"Companion",{get:Dx}),Object.defineProperty(Rx,"$serializer",{get:Fx}),VN.GltfSkin_init_t9evm2$=Ux,VN.GltfSkin=Rx,Object.defineProperty(Vx,"Companion",{get:Kx}),Object.defineProperty(Vx,"$serializer",{get:Zx}),VN.GltfTexture_init_k7m1pc$=Jx,VN.GltfTexture=Vx,Object.defineProperty(Qx,"Companion",{get:iw}),Object.defineProperty(Qx,"$serializer",{get:ow}),VN.GltfTextureInfo_init_vneh73$=sw,VN.GltfTextureInfo=Qx;var GN=qN.ibl||(qN.ibl={});GN.BrdfLutPass=aw,Object.defineProperty(GN,"EnvironmentHelper",{get:function(){return null===dw&&new pw,dw}}),GN.EnvironmentMaps=fw,GN.GradientCubeGenerator=_w,GN.EnvCubeSamplerNode=vw,GN.EnvEquiRectSamplerNode=gw,GN.RgbeDecoderNode=bw,Object.defineProperty(xw,"Companion",{get:Sw}),GN.IrradianceMapPass=xw,Object.defineProperty(Pw,"Companion",{get:jw}),GN.ReflectionMapPass=Pw,GN.RgbeDecoder=Lw,Object.defineProperty(Bw,"Companion",{get:Xw}),qN.IndexedVertexList_init_5jr6ei$=Yw,qN.IndexedVertexList=Bw,Object.defineProperty(Zw,"LINES",{get:Qw}),Object.defineProperty(Zw,"POINTS",{get:tz}),Object.defineProperty(Zw,"TRIANGLES",{get:ez}),qN.PrimitiveType=Zw,Object.defineProperty(iz,"DYNAMIC",{get:rz}),Object.defineProperty(iz,"STATIC",{get:oz}),qN.Usage=iz,dz.Instance=$z,qN.InstancedLodController=dz,yz.prototype.Level=vz,Object.defineProperty(vz,"TRACE",{get:bz}),Object.defineProperty(vz,"DEBUG",{get:xz}),Object.defineProperty(vz,"INFO",{get:wz}),Object.defineProperty(vz,"WARN",{get:zz}),Object.defineProperty(vz,"ERROR",{get:kz}),Object.defineProperty(vz,"OFF",{get:Sz}),Object.defineProperty(qN,"Log",{get:function(){return null===Nz&&new yz,Nz}}),qN.MeshBuilder=Ez,qN.CircleProps=Tz,Object.defineProperty(Oz,"Companion",{get:Rz}),qN.GridProps=Oz,qN.SphereProps=Iz,qN.RectProps=Lz,qN.CubeProps=Dz,qN.CylinderProps=qz,qN.TextProps=Bz,Object.defineProperty(Fz,"Companion",{get:Gz}),qN.MeshInstanceList=Fz,Object.defineProperty(Hz,"Companion",{get:Xz}),qN.ObjectRecycler_init_9ce4rd$=Yz,qN.ObjectRecycler=Hz,qN.ObjectPool=Zz,qN.PerfTimer=Jz,EN.now=OS,EN.toString_j6vyb1$=MS,Qz.prototype.TriangulatedPolygon=tk,Object.defineProperty(qN,"PolyUtil",{get:uk}),qN.ShapeContainer=pk,qN.Profile=ck,qN.Shape=hk,qN.SimpleShape=dk,qN.MultiShape=fk,qN.ShadowMap=_k,qN.SimpleShadowMap=mk,yk.MapRange=vk,qN.CascadedShadowMap=yk,gk.KdNode=bk;var HN=qN.spatial||(qN.spatial={});HN.KdTree=gk,HN.pointKdTree_ffk80x$=function(t,e){return void 0===e&&(e=20),new gk(t,Ck(),e)},HN.triangleKdTree_uvzo00$=xk,HN.edgeKdTree_jn4zy3$=wk,HN.ItemAdapter=zk,Object.defineProperty(HN,"Vec3fAdapter",{get:Ck}),Object.defineProperty(HN,"EdgeAdapter",{get:Pk}),Object.defineProperty(HN,"TriangleAdapter",{get:Mk}),Object.defineProperty(jk,"Companion",{get:Ik}),HN.Edge=jk,Object.defineProperty(Lk,"Companion",{get:Bk}),HN.Triangle_init_olctmm$=Fk,HN.Triangle=Lk,Uk.Node=Vk,HN.SpatialTree=Uk,HN.PointDistance=Hk,HN.BoundingSphereDistance=Wk,HN.RayDistance=Kk,HN.SpatialTreeTraverser=Xk,HN.CenterPointTraverser=Yk,HN.InRadiusTraverser=Jk,HN.NearestToRayTraverser=Qk,HN.NearestEdgeToRayTraverser=eS,HN.TriangleHitTraverser=nS,oS.Child=sS,HN.ChildNodesWithDistance=oS,Object.defineProperty(uS,"Companion",{get:hS}),uS.Gesture=dS,qN.TouchGestureEvaluator=uS,Object.defineProperty(fS,"Companion",{get:yS}),qN.TreeMap=fS,gS.FloatView=bS,gS.IntView=SS,gS.Vec2iView=CS,gS.Vec3iView=NS,gS.Vec4iView=ES,qN.VertexView=gS,qN.Viewport=PS,EN.createDefaultContext=function(){return TS(new dC)},EN.createContext_s8od96$=TS,Object.defineProperty(EN,"JsImpl",{get:RS}),jN.OffscreenPass2dImpl=IS,Object.defineProperty(LS,"Companion",{get:BS}),jN.OffscreenPassCubeImpl=LS,jN.PlatformAttributeProps=FS,jN.ShaderCode=US;var WN=EN.platform||(EN.platform={});WN.FontMapGenerator=VS,WN.ImageTextureData=GS,Object.defineProperty(HS,"Companion",{get:cC}),WN.JsAssetManager=HS,hC.InitProps=dC,Object.defineProperty(hC,"Companion",{get:mC}),WN.JsContext=hC,WN.GlCapabilities=$C,WN.get_elementX_wgrwqm$=yC,WN.get_elementY_wgrwqm$=vC,WN.get_glInternalFormat_my8d90$=gC,WN.get_glType_my8d90$=bC,WN.get_glFormat_my8d90$=xC,WN.get_pxSize_my8d90$=wC,WN.get_glOp_jstu7d$=zC,Object.defineProperty(kC,"Companion",{get:NC});var KN=WN.webgl||(WN.webgl={});return KN.BufferResource=kC,EC.ShaderInstance=PC,KN.CompiledShader=EC,Object.defineProperty(OC,"Companion",{get:AC}),KN.LoadedTextureWebGl=OC,Object.defineProperty(RC,"Companion",{get:DC}),KN.MappedUniform=RC,KN.MappedUniform1f=qC,KN.MappedUniform2f=BC,KN.MappedUniform3f=FC,KN.MappedUniform4f=UC,KN.MappedUniform1fv=VC,KN.MappedUniform2fv=GC,KN.MappedUniform3fv=HC,KN.MappedUniform4fv=WC,KN.MappedUniformColor=KC,KN.MappedUniformMat3f=XC,KN.MappedUniformMat4f=YC,KN.MappedUniformMat4fv=ZC,KN.MappedUniform1i=JC,Object.defineProperty(QC,"Companion",{get:nN}),KN.MappedUniformTex=QC,KN.MappedUniformTex2d=rN,KN.MappedUniformCubeMap=oN,KN.QueueRendererWebGl=sN,KN.ShaderGeneratorImplWebGl=lN,KN.ShaderManager=cN,Object.defineProperty(KN,"TextureLoader",{get:fN}),KN.VboBinder=_N,qN.GenericBuffer=mN,qN.Uint8BufferImpl_init_za3lpa$=yN,qN.Uint8BufferImpl=$N,qN.Uint16BufferImpl=vN,qN.Uint32BufferImpl=gN,qN.Float32BufferImpl=bN,qN.MixedBufferImpl=xN,qN.createUint8Buffer_za3lpa$=wN,qN.createUint32Buffer_za3lpa$=zN,qN.createFloat32Buffer_za3lpa$=kN,qN.createMixedBuffer_za3lpa$=SN,Ro.prototype.distinctTriangleEdges=Oo.prototype.distinctTriangleEdges,qo.prototype.getMin_hm1yd1$=zk.prototype.getMin_hm1yd1$,qo.prototype.getMax_hm1yd1$=zk.prototype.getMax_hm1yd1$,qo.prototype.getCenter_hm1yd1$=zk.prototype.getCenter_hm1yd1$,Do.prototype.distinctTriangleEdges=Oo.prototype.distinctTriangleEdges,Xo.prototype.init_nbf0q6$,Xo.prototype.init_nbf0q6$,Kd.prototype.onMeshDataChanged_f1jspk$=Hd.prototype.onMeshDataChanged_f1jspk$,Qf.prototype.updateComponentAlpha=Jf.prototype.updateComponentAlpha,Qf.prototype.createUi_aemszp$=Jf.prototype.createUi_aemszp$,Qf.prototype.updateUi_aemszp$=Jf.prototype.updateUi_aemszp$,Qf.prototype.onRender_aemszp$=Jf.prototype.onRender_aemszp$,Qf.prototype.dispose_aemszp$=Jf.prototype.dispose_aemszp$,Sm.prototype.setWeights_q3cr5i$=km.prototype.setWeights_q3cr5i$,Cm.prototype.initTransform=km.prototype.initTransform,Cm.prototype.setTranslation_czzhiw$=km.prototype.setTranslation_czzhiw$,Cm.prototype.setRotation_czzhi1$=km.prototype.setRotation_czzhi1$,Cm.prototype.setScale_czzhiw$=km.prototype.setScale_czzhiw$,Mv.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Mv.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Bv.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Bv.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Xv.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Xv.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Qv.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Qv.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,mg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,mg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,zg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,zg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Og.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Og.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Dg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Dg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Wg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Wg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,ub.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,ub.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,$b.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,$b.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Pb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Pb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Lb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Lb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Wb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Wb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,tx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,tx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,ux.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,ux.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,mx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,mx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,zx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,zx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Ox.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Ox.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,qx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,qx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Xx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Xx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,nw.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,nw.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,kk.prototype.setNode_kvimhn$=zk.prototype.setNode_kvimhn$,Nk.prototype.getCenterX_trkh7z$=zk.prototype.getCenterX_trkh7z$,Nk.prototype.getCenterY_trkh7z$=zk.prototype.getCenterY_trkh7z$,Nk.prototype.getCenterZ_trkh7z$=zk.prototype.getCenterZ_trkh7z$,Nk.prototype.getSzX_trkh7z$=zk.prototype.getSzX_trkh7z$,Nk.prototype.getSzY_trkh7z$=zk.prototype.getSzY_trkh7z$,Nk.prototype.getSzZ_trkh7z$=zk.prototype.getSzZ_trkh7z$,Nk.prototype.getCenter_hm1yd1$=zk.prototype.getCenter_hm1yd1$,Nk.prototype.setNode_kvimhn$=zk.prototype.setNode_kvimhn$,Tk.prototype.getCenterX_trkh7z$=zk.prototype.getCenterX_trkh7z$,Tk.prototype.getCenterY_trkh7z$=zk.prototype.getCenterY_trkh7z$,Tk.prototype.getCenterZ_trkh7z$=zk.prototype.getCenterZ_trkh7z$,Tk.prototype.getSzX_trkh7z$=zk.prototype.getSzX_trkh7z$,Tk.prototype.getSzY_trkh7z$=zk.prototype.getSzY_trkh7z$,Tk.prototype.getSzZ_trkh7z$=zk.prototype.getSzZ_trkh7z$,Tk.prototype.getCenter_hm1yd1$=zk.prototype.getCenter_hm1yd1$,Tk.prototype.setNode_kvimhn$=zk.prototype.setNode_kvimhn$,Wk.prototype.nodeSqrDistanceToPoint_fpn9fm$=Hk.prototype.nodeSqrDistanceToPoint_fpn9fm$,Zk.prototype.nodeSqrDistanceToPoint_fpn9fm$=Hk.prototype.nodeSqrDistanceToPoint_fpn9fm$,Zk.prototype.itemSqrDistanceToPoint_xpaqv3$=Hk.prototype.itemSqrDistanceToPoint_xpaqv3$,tS.prototype.nodeSqrDistanceToRay_m0emyn$=Kk.prototype.nodeSqrDistanceToRay_m0emyn$,tS.prototype.itemSqrDistanceToRay_bo5c3m$=Kk.prototype.itemSqrDistanceToRay_bo5c3m$,iS.prototype.nodeSqrDistanceToRay_m0emyn$=Kk.prototype.nodeSqrDistanceToRay_m0emyn$,rS.prototype.nodeSqrDistanceToRay_m0emyn$=Kk.prototype.nodeSqrDistanceToRay_m0emyn$,pN.prototype.sampleTexture2d_buzeal$=Tl.prototype.sampleTexture2d_buzeal$,pN.prototype.sampleTextureCube_buzeal$=Tl.prototype.sampleTextureCube_buzeal$,mN.prototype.removeAt_za3lpa$=M$.prototype.removeAt_za3lpa$,$N.prototype.put_fqrh44$=j$.prototype.put_fqrh44$,$N.prototype.plusAssign_s8j3t7$=j$.prototype.plusAssign_s8j3t7$,$N.prototype.toArray=j$.prototype.toArray,$N.prototype.removeAt_za3lpa$=j$.prototype.removeAt_za3lpa$,vN.prototype.put_gmedm2$=A$.prototype.put_gmedm2$,vN.prototype.plusAssign_mq22fl$=A$.prototype.plusAssign_mq22fl$,vN.prototype.removeAt_za3lpa$=A$.prototype.removeAt_za3lpa$,gN.prototype.put_q5rwfd$=R$.prototype.put_q5rwfd$,gN.prototype.plusAssign_za3lpa$=R$.prototype.plusAssign_za3lpa$,gN.prototype.removeAt_za3lpa$=R$.prototype.removeAt_za3lpa$,bN.prototype.put_q3cr5i$=I$.prototype.put_q3cr5i$,bN.prototype.plusAssign_mx4ult$=I$.prototype.plusAssign_mx4ult$,bN.prototype.removeAt_za3lpa$=I$.prototype.removeAt_za3lpa$,xN.prototype.putUint8_fqrh44$=L$.prototype.putUint8_fqrh44$,xN.prototype.putUint16_gmedm2$=L$.prototype.putUint16_gmedm2$,xN.prototype.putUint32_q5rwfd$=L$.prototype.putUint32_q5rwfd$,xN.prototype.putFloat32_q3cr5i$=L$.prototype.putFloat32_q3cr5i$,xN.prototype.putInt8_s8j3t7$=L$.prototype.putInt8_s8j3t7$,xN.prototype.putInt8_fqrh44$=L$.prototype.putInt8_fqrh44$,xN.prototype.putInt8_mj6st8$=L$.prototype.putInt8_mj6st8$,xN.prototype.putInt8_ay2i3f$=L$.prototype.putInt8_ay2i3f$,xN.prototype.putInt16_mq22fl$=L$.prototype.putInt16_mq22fl$,xN.prototype.putInt16_gmedm2$=L$.prototype.putInt16_gmedm2$,xN.prototype.putInt16_359eei$=L$.prototype.putInt16_359eei$,xN.prototype.putInt16_8k344i$=L$.prototype.putInt16_8k344i$,xN.prototype.putInt32_za3lpa$=L$.prototype.putInt32_za3lpa$,xN.prototype.putInt32_q5rwfd$=L$.prototype.putInt32_q5rwfd$,xN.prototype.putInt32_nd5v6f$=L$.prototype.putInt32_nd5v6f$,xN.prototype.putInt32_7hqxcs$=L$.prototype.putInt32_7hqxcs$,xN.prototype.removeAt_za3lpa$=L$.prototype.removeAt_za3lpa$,An=U.PI/180,Rn=180/U.PI,In=1e-5,Ln=1e-10,Dn=.70710677,qn=new er(F(OS())),t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(t,e){"use strict";var i=e.getKClass,n=e.Kind.CLASS,r=e.kotlin.Annotation,o=e.throwCCE,s=e.defineInlineFunction,a=e.wrapFunction,l=e.kotlin.Unit,u=e.kotlin.text.toLong_pdl1vz$,p=e.Kind.OBJECT,c=e.kotlin.collections.emptyList_287e2$,h=e.equals,d=e.hashCode,f=e.toString,_=e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,m=e.kotlin.collections.ArrayList_init_ww73n8$,$=e.Kind.INTERFACE,y=e.kotlin.collections.Iterator,v=e.kotlin.collections.Iterable,g=e.kotlin.collections.toList_us0mfu$,b=e.kotlin.collections.ArrayList_init_287e2$,x=e.kotlin.collections.HashSet_init_287e2$,w=e.arrayEquals,z=e.kotlin.ranges.until_dqglrj$,k=e.kotlin.collections.joinToString_fmv235$,S=e.kotlin.collections.toBooleanArray_xmyvgf$,C=e.kotlin.collections.withIndex_us0mfu$,N=e.kotlin.to_ujzrz7$,E=e.kotlin.collections.toMap_6hr0sd$,P=e.kotlin.lazy_klfg04$,T=e.kotlin.text.isBlank_gw00vp$,O=e.kotlin.IllegalArgumentException_init_pdl1vj$,M=e.kotlin.collections.copyToArray,j=e.arrayHashCode,A=e.ensureNotNull,R=e.kotlin.IllegalStateException_init_pdl1vj$,I=e.toBoxedChar,L=Object,D=e.kotlin.text.toIntOrNull_pdl1vz$,q=e.kotlin.collections.getValue_t9ocha$,B=e.kotlin.collections.asList_us0mfu$,F=e.kotlin.collections.ArrayList_init_mqih57$,U=e.kotlin.collections.ArrayList,V=e.kotlin.collections.LinkedHashSet,G=e.kotlin.collections.LinkedHashSet_init_mqih57$,H=e.kotlin.collections.HashSet,W=e.kotlin.collections.HashSet_init_mqih57$,K=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,X=e.kotlin.collections.LinkedHashMap,Y=e.kotlin.collections.LinkedHashMap_init_73mtqc$,Z=e.kotlin.collections.HashMap_init_q3lmfv$,J=e.kotlin.collections.HashMap,Q=e.kotlin.collections.HashMap_init_73mtqc$,tt=e.kotlin.collections.LinkedHashSet_init_287e2$,et=(e.kotlin.collections.indexOf_mjy6jw$,e.arrayToString,e.kotlin.collections.get_indices_m7z4lg$),it=Array,nt=e.toByte,rt=e.kotlin.ranges.CharRange,ot=(e.kotlin.text.StringBuilder_init_za3lpa$,e.kotlin.collections.HashSet_init_ww73n8$),st=e.kotlin.reflect.KClass,at=e.kotlin.IndexOutOfBoundsException,lt=(e.kotlin.js.internal.ByteCompanionObject,e.kotlin.ranges.coerceAtLeast_dqglrj$),ut=e.kotlin.collections.copyOf_mrm5p$,pt=(e.kotlin.js.internal.ShortCompanionObject,e.kotlin.collections.copyOf_m2jy6x$),ct=(e.kotlin.js.internal.IntCompanionObject,e.kotlin.collections.copyOf_c03ot6$),ht=(e.kotlin.js.internal.LongCompanionObject,e.kotlin.collections.copyOf_3aefkx$),dt=(e.kotlin.js.internal.FloatCompanionObject,e.kotlin.collections.copyOf_rblqex$),ft=(e.kotlin.js.internal.DoubleCompanionObject,e.kotlin.collections.copyOf_xgrzbe$),_t=e.unboxChar,mt=(e.kotlin.js.internal.CharCompanionObject,e.kotlin.collections.copyOf_gtcw5h$),$t=(e.kotlin.js.internal.BooleanCompanionObject,e.kotlin.collections.copyOf_1qu12l$),yt=e.kotlin.reflect.js.internal.PrimitiveClasses.stringClass,vt=(e.kotlin.js.internal.StringCompanionObject,e.BoxedChar),gt=e.kotlin.reflect.js.internal.PrimitiveClasses.charArrayClass,bt=e.kotlin.reflect.js.internal.PrimitiveClasses.doubleClass,xt=e.kotlin.reflect.js.internal.PrimitiveClasses.doubleArrayClass,wt=e.kotlin.reflect.js.internal.PrimitiveClasses.floatClass,zt=e.kotlin.reflect.js.internal.PrimitiveClasses.floatArrayClass,kt=e.Long,St=e.kotlin.reflect.js.internal.PrimitiveClasses.longArrayClass,Ct=e.kotlin.reflect.js.internal.PrimitiveClasses.intClass,Nt=e.kotlin.reflect.js.internal.PrimitiveClasses.intArrayClass,Et=e.kotlin.reflect.js.internal.PrimitiveClasses.shortClass,Pt=e.kotlin.reflect.js.internal.PrimitiveClasses.shortArrayClass,Tt=e.kotlin.reflect.js.internal.PrimitiveClasses.byteClass,Ot=e.kotlin.reflect.js.internal.PrimitiveClasses.byteArrayClass,Mt=e.kotlin.reflect.js.internal.PrimitiveClasses.booleanClass,jt=e.kotlin.reflect.js.internal.PrimitiveClasses.booleanArrayClass,At=e.kotlin,Rt=e.kotlin.collections.mapOf_qfcya0$,It=e.kotlin.text.capitalize_pdl1vz$,Lt=e.kotlin.text.equals_igcy3c$,Dt=e.kotlin.text.trimIndent_pdl1vz$,qt=e.kotlin.collections.last_2p1efm$,Bt=e.kotlin.collections.lastOrNull_2p1efm$,Ft=e.kotlin.collections.get_lastIndex_55thoc$,Ut=e.kotlin.collections.Map.Entry,Vt=e.kotlin.Triple,Gt=e.kotlin.ranges.coerceAtMost_dqglrj$,Ht=e.toChar,Wt=e.kotlin.text.concatToString_wlitf7$,Kt=e.kotlin.text.toByte_pdl1vz$,Xt=e.kotlin.text.toShort_pdl1vz$,Yt=e.kotlin.text.toInt_pdl1vz$,Zt=e.kotlin.isFinite_81szk$,Jt=e.kotlin.text.toDouble_pdl1vz$,Qt=e.kotlin.isFinite_yrwdxr$,te=e.kotlin.text.single_gw00vp$,ee=Error,ie=e.kotlin.text.iterator_gw00vp$,ne=e.toShort,re=e.kotlin.collections.toList_7wnvza$,oe=e.kotlin.collections.Map,se=e.throwUPAE,ae=e.kotlin.Enum,le=e.throwISE,ue=e.kotlin.text.StringBuilder_init,pe=e.kotlin.collections.List,ce=e.kotlin.text.toLongOrNull_pdl1vz$,he=e.kotlin.text.toDoubleOrNull_pdl1vz$,de=e.kotlin.UnsupportedOperationException_init_pdl1vj$,fe=(e.kotlin.NotImplementedError,e.kotlin.collections.emptyMap_q3lmfv$),_e=e.kotlin.IllegalArgumentException,me=e.kotlin.collections.zip_r9t3v7$,$e=e.kotlin.collections.Grouping,ye=e.kotlin.collections.mapCapacity_za3lpa$,ve=e.kotlin.collections.LinkedHashMap_init_bwtc7$,ge=e.getCallableRef,be=e.kotlin.collections.MutableList,xe=e.kotlin.collections.Set,we=e.kotlin.collections.MutableSet,ze=e.kotlin.collections.MutableMap,ke=e.kotlin.Pair,Se=new e.Long(-1,2097151),Ce=(Math,e.kotlin.math.abs_s8cxhz$,e.kotlin.collections.get_indices_l1lu5t$),Ne=e.kotlin.js.get_js_1yb8b7$,Ee=e.kotlin.reflect.js.internal.PrimitiveClasses.arrayClass,Pe=e.findAssociatedObject_yjf3nl$;function Te(t){var i;return t.descriptor.isNullable?e.isType(i=t,Gl)?i:o():new or(t)}function Oe(t,e){return new hs(t,e)}function Me(t,e){return new ps(t,e)}function je(t,e,i){return new ds(t,e,i)}function Ae(t){return Co()}function Re(){return Vr()}function Ie(t){return lo()}function Le(){return gr()}function De(t){return co()}function qe(){return zr()}function Be(t){return _o()}function Fe(){return Nr()}function Ue(t){return yo()}function Ve(){return Or()}function Ge(t){return bo()}function He(){return Rr()}function We(t){return zo()}function Ke(){return qr()}function Xe(t){return oo()}function Ye(){return Xr()}function Ze(t){return io()}function Je(t){return ns()}function Qe(t,e){return new Jn(t,e)}function ti(t){return new Qn(t)}function ei(t,e){return new ir(t,e)}function ii(t,e,i){this.serializableClass_0=t,this.fallbackSerializer_0=e,this.typeParametersSerializers_0=i,this.descriptor_ay3qfp$_0=withContext(ci("kotlinx.serialization.ContextualSerializer",bi(),[]),this.serializableClass_0)}function ni(t){this.closure$iterator=t}function ri(){}function oi(t){this.this$elementDescriptors=t,this.elementsLeft_0=t.elementsCount}function si(t){return new ni((e=t,function(){return new oi(e)}));var e}function ai(t){return l}function li(t,e,i){if(void 0===i&&(i=ai),T(t))throw O("Blank serial names are prohibited".toString());var n=new di(t);return i(n),new fi(t,Qi(),n.elementNames_8be2vx$.size,g(e),n)}function ui(t,e){if(T(t))throw O("Blank serial names are prohibited".toString());return Jr(t,e)}function pi(t){return l}function ci(t,e,i,n){if(void 0===n&&(n=pi),T(t))throw O("Blank serial names are prohibited".toString());if(h(e,Qi()))throw O("For StructureKind.CLASS please use 'buildClassSerialDescriptor' instead".toString());var r=new di(t);return n(r),new fi(t,e,r.elementNames_8be2vx$.size,g(i),r)}function hi(t){return new qn(t)}function di(t){this.serialName=t,this.isNullable=!1,this.annotations=c(),this.elementNames_8be2vx$=b(),this.uniqueNames_0=x(),this.elementDescriptors_8be2vx$=b(),this.elementAnnotations_8be2vx$=b(),this.elementOptionality_8be2vx$=b()}function fi(t,e,i,n,r){this.serialName_btmdyn$_0=t,this.kind_589tly$_0=e,this.elementsCount_wewqc2$_0=i,this.annotations_efqcf6$_0=r.annotations,this.elementNames_0=M(r.elementNames_8be2vx$),this.elementDescriptors_0=ur(r.elementDescriptors_8be2vx$),this.elementAnnotations_0=M(r.elementAnnotations_8be2vx$),this.elementOptionality_0=S(r.elementOptionality_8be2vx$);var o,s,a=C(this.elementNames_0),l=m(_(a,10));for(o=a.iterator();o.hasNext();){var u=o.next();l.add_11rb$(N(u.value,u.index))}this.name2Index_0=E(l),this.typeParametersDescriptors_0=ur(n),this._hashCode_6e2cwc$_0=P((s=this,function(){var t=s,e=s.typeParametersDescriptors_0,i=d(t.serialName);i=(31*i|0)+j(e)|0;var n,r=si(t),o=1;for(n=r.iterator();n.hasNext();){var a,l=31*o|0,u=n.next().serialName;o=l+(null!=(a=null!=u?d(u):null)?a:0)|0}var p,c=o,h=1;for(p=r.iterator();p.hasNext();){var f,_=31*h|0,m=p.next().kind;h=_+(null!=(f=null!=m?d(m):null)?f:0)|0}return i=(31*(i=(31*i|0)+c|0)|0)+h|0}))}function _i(){}function mi(){$i=this,_i.call(this)}mi.prototype=Object.create(_i.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,Si.prototype=Object.create(xi.prototype),Si.prototype.constructor=Si,Ei.prototype=Object.create(xi.prototype),Ei.prototype.constructor=Ei,Oi.prototype=Object.create(xi.prototype),Oi.prototype.constructor=Oi,Ai.prototype=Object.create(xi.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(xi.prototype),Li.prototype.constructor=Li,Bi.prototype=Object.create(xi.prototype),Bi.prototype.constructor=Bi,Vi.prototype=Object.create(xi.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(xi.prototype),Wi.prototype.constructor=Wi,Yi.prototype=Object.create(_i.prototype),Yi.prototype.constructor=Yi,Zi.prototype=Object.create(Yi.prototype),Zi.prototype.constructor=Zi,tn.prototype=Object.create(Yi.prototype),tn.prototype.constructor=tn,rn.prototype=Object.create(Yi.prototype),rn.prototype.constructor=rn,an.prototype=Object.create(Yi.prototype),an.prototype.constructor=an,pn.prototype=Object.create(_i.prototype),pn.prototype.constructor=pn,cn.prototype=Object.create(pn.prototype),cn.prototype.constructor=cn,fn.prototype=Object.create(pn.prototype),fn.prototype.constructor=fn,Ln.prototype=Object.create(Rn.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(Rn.prototype),Dn.prototype.constructor=Dn,qn.prototype=Object.create(Rn.prototype),qn.prototype.constructor=qn,Bn.prototype=Object.create(Rn.prototype),Bn.prototype.constructor=Bn,Fn.prototype=Object.create(Rn.prototype),Fn.prototype.constructor=Fn,Un.prototype=Object.create(Rn.prototype),Un.prototype.constructor=Un,Vn.prototype=Object.create(In.prototype),Vn.prototype.constructor=Vn,Gn.prototype=Object.create(In.prototype),Gn.prototype.constructor=Gn,Hn.prototype=Object.create(In.prototype),Hn.prototype.constructor=Hn,Kn.prototype=Object.create(Wn.prototype),Kn.prototype.constructor=Kn,Xn.prototype=Object.create(Wn.prototype),Xn.prototype.constructor=Xn,Zn.prototype=Object.create(Kn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Kn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Kn.prototype),Qn.prototype.constructor=Qn,tr.prototype=Object.create(Kn.prototype),tr.prototype.constructor=tr,er.prototype=Object.create(Kn.prototype),er.prototype.constructor=er,ir.prototype=Object.create(Xn.prototype),ir.prototype.constructor=ir,nr.prototype=Object.create(Xn.prototype),nr.prototype.constructor=nr,yr.prototype=Object.create(Zn.prototype),yr.prototype.constructor=yr,br.prototype=Object.create(Yn.prototype),br.prototype.constructor=br,xr.prototype=Object.create(Zn.prototype),xr.prototype.constructor=xr,kr.prototype=Object.create(Yn.prototype),kr.prototype.constructor=kr,Sr.prototype=Object.create(Zn.prototype),Sr.prototype.constructor=Sr,Er.prototype=Object.create(Yn.prototype),Er.prototype.constructor=Er,Pr.prototype=Object.create(Zn.prototype),Pr.prototype.constructor=Pr,Mr.prototype=Object.create(Yn.prototype),Mr.prototype.constructor=Mr,jr.prototype=Object.create(Zn.prototype),jr.prototype.constructor=jr,Ir.prototype=Object.create(Yn.prototype),Ir.prototype.constructor=Ir,Lr.prototype=Object.create(Zn.prototype),Lr.prototype.constructor=Lr,Br.prototype=Object.create(Yn.prototype),Br.prototype.constructor=Br,Fr.prototype=Object.create(Zn.prototype),Fr.prototype.constructor=Fr,Gr.prototype=Object.create(Yn.prototype),Gr.prototype.constructor=Gr,Hr.prototype=Object.create(Zn.prototype),Hr.prototype.constructor=Hr,Yr.prototype=Object.create(Yn.prototype),Yr.prototype.constructor=Yr,ss.prototype=Object.create(os.prototype),ss.prototype.constructor=ss,ls.prototype=Object.create(as.prototype),ls.prototype.constructor=ls,ps.prototype=Object.create(us.prototype),ps.prototype.constructor=ps,hs.prototype=Object.create(us.prototype),hs.prototype.constructor=hs,uu.prototype=Object.create(_e.prototype),uu.prototype.constructor=uu,_s.prototype=Object.create(uu.prototype),_s.prototype.constructor=_s,ms.prototype=Object.create(_s.prototype),ms.prototype.constructor=ms,$s.prototype=Object.create(_s.prototype),$s.prototype.constructor=$s,Hs.prototype=Object.create(mn.prototype),Hs.prototype.constructor=Hs,Ws.prototype=Object.create($n.prototype),Ws.prototype.constructor=Ws,ia.prototype=Object.create(ls.prototype),ia.prototype.constructor=ia,na.prototype=Object.create(ia.prototype),na.prototype.constructor=na,ra.prototype=Object.create(ia.prototype),ra.prototype.constructor=ra,oa.prototype=Object.create(ra.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(ia.prototype),sa.prototype.constructor=sa,la.prototype=Object.create(ss.prototype),la.prototype.constructor=la,ua.prototype=Object.create(la.prototype),ua.prototype.constructor=ua,pa.prototype=Object.create(la.prototype),pa.prototype.constructor=pa,ca.prototype=Object.create(pa.prototype),ca.prototype.constructor=ca,ha.prototype=Object.create(la.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(ae.prototype),da.prototype.constructor=da,xa.prototype=Object.create(ba.prototype),xa.prototype.constructor=xa,Na.prototype=Object.create(ba.prototype),Na.prototype.constructor=Na,Aa.prototype=Object.create(Ta.prototype),Aa.prototype.constructor=Aa,Fa.prototype=Object.create(Aa.prototype),Fa.prototype.constructor=Fa,Ua.prototype=Object.create(Aa.prototype),Ua.prototype.constructor=Ua,Ha.prototype=Object.create(Ta.prototype),Ha.prototype.constructor=Ha,Za.prototype=Object.create(Ta.prototype),Za.prototype.constructor=Za,Kl.prototype=Object.create(ae.prototype),Kl.prototype.constructor=Kl,tu.prototype=Object.create(Ql.prototype),tu.prototype.constructor=tu,ou.prototype=Object.create(Mn.prototype),ou.prototype.constructor=ou,cu.prototype=Object.create(uu.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(uu.prototype),hu.prototype.constructor=hu,ni.prototype.iterator=function(){return this.closure$iterator()},ni.$metadata$={kind:n,interfaces:[v]},Object.defineProperty(ri.prototype,"isNullable",{configurable:!0,get:function(){return!1}}),Object.defineProperty(ri.prototype,"annotations",{configurable:!0,get:function(){return c()}}),ri.$metadata$={kind:$,simpleName:"SerialDescriptor",interfaces:[]},oi.prototype.hasNext=function(){return this.elementsLeft_0>0},oi.prototype.next=function(){var t,e,i;return i=this.this$elementDescriptors.elementsCount,t=this.elementsLeft_0,this.elementsLeft_0=t-1|0,e=t,this.this$elementDescriptors.getElementDescriptor_za3lpa$(i-e|0)},oi.$metadata$={kind:n,interfaces:[y]},di.prototype.element_vxrguq$=function(t,e,i,n){if(void 0===i&&(i=c()),void 0===n&&(n=!1),!this.uniqueNames_0.add_11rb$(t))throw O(("Element with name '"+t+"' is already registered").toString());this.elementNames_8be2vx$.add_11rb$(t),this.elementDescriptors_8be2vx$.add_11rb$(e),this.elementAnnotations_8be2vx$.add_11rb$(i),this.elementOptionality_8be2vx$.add_11rb$(n)},di.prototype.descriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.descriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.serializer_saj79j$,r=t.kotlinx.serialization.KSerializer,o=e.throwCCE;return function(t,s){var a;return(e.isType(a=n(i(t)),r)?a:o()).descriptor}}))),di.prototype.listDescriptor_24f42q$=function(t){return hi(t)},di.prototype.listDescriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.listDescriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.listSerialDescriptor_24f42q$,r=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a){var l;return n((e.isType(l=r(i(t)),o)?l:s()).descriptor)}}))),di.prototype.mapDescriptor_2ezn58$=function(t,e){return new Hn(t,e)},di.prototype.mapDescriptor_q3lmfv$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.mapDescriptor_q3lmfv$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.mapSerialDescriptor_2ezn58$,r=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a,l,u){var p,c;return n((e.isType(p=r(i(t)),o)?p:s()).descriptor,(e.isType(c=r(i(l)),o)?c:s()).descriptor)}}))),di.prototype.setDescriptor_24f42q$=function(t){return new Un(t)},di.prototype.setDescriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.setDescriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.setSerialDescriptor_24f42q$,r=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a){var l;return n((e.isType(l=r(i(t)),o)?l:s()).descriptor)}}))),di.$metadata$={kind:n,simpleName:"ClassSerialDescriptorBuilder",interfaces:[]},Object.defineProperty(fi.prototype,"serialName",{get:function(){return this.serialName_btmdyn$_0}}),Object.defineProperty(fi.prototype,"kind",{get:function(){return this.kind_589tly$_0}}),Object.defineProperty(fi.prototype,"elementsCount",{get:function(){return this.elementsCount_wewqc2$_0}}),Object.defineProperty(fi.prototype,"annotations",{configurable:!0,get:function(){return this.annotations_efqcf6$_0}}),Object.defineProperty(fi.prototype,"_hashCode_0",{configurable:!0,get:function(){return this._hashCode_6e2cwc$_0.value}}),fi.prototype.getElementName_za3lpa$=function(t){return $u(this.elementNames_0,t)},fi.prototype.getElementIndex_61zpoe$=function(t){var e;return null!=(e=this.name2Index_0.get_11rb$(t))?e:-3},fi.prototype.getElementAnnotations_za3lpa$=function(t){return $u(this.elementAnnotations_0,t)},fi.prototype.getElementDescriptor_za3lpa$=function(t){return $u(this.elementDescriptors_0,t)},fi.prototype.isElementOptional_za3lpa$=function(t){return yu(this.elementOptionality_0,t)},fi.prototype.equals=function(t){var i;t:do{var n;if(this===t){i=!0;break t}if(!e.isType(t,fi)){i=!1;break t}if(!h(this.serialName,t.serialName)){i=!1;break t}if(!w(this.typeParametersDescriptors_0,t.typeParametersDescriptors_0)){i=!1;break t}if(this.elementsCount!==t.elementsCount){i=!1;break t}n=this.elementsCount;for(var r=0;r<n;r++){if(!h(this.getElementDescriptor_za3lpa$(r).serialName,t.getElementDescriptor_za3lpa$(r).serialName)){i=!1;break t}if(!h(this.getElementDescriptor_za3lpa$(r).kind,t.getElementDescriptor_za3lpa$(r).kind)){i=!1;break t}}i=!0}while(0);return i},fi.prototype.hashCode=function(){return this._hashCode_0},fi.prototype.toString=function(){return k(z(0,this.elementsCount),", ",this.serialName+"(",")",void 0,void 0,(t=this,function(e){return t.getElementName_za3lpa$(e)+": "+t.getElementDescriptor_za3lpa$(e).serialName}));var t},fi.$metadata$={kind:n,simpleName:"SerialDescriptorImpl",interfaces:[ri]},mi.$metadata$={kind:p,simpleName:"ENUM",interfaces:[_i]};var $i=null;function yi(){return null===$i&&new mi,$i}function vi(){gi=this,_i.call(this)}vi.$metadata$={kind:p,simpleName:"CONTEXTUAL",interfaces:[_i]};var gi=null;function bi(){return null===gi&&new vi,gi}function xi(){_i.call(this)}function wi(){zi=this,xi.call(this)}_i.prototype.toString=function(){return A(e.getKClassFromExpression(this).simpleName)},_i.prototype.hashCode=function(){return d(this.toString())},_i.$metadata$={kind:n,simpleName:"SerialKind",interfaces:[]},wi.$metadata$={kind:p,simpleName:"BOOLEAN",interfaces:[xi]};var zi=null;function ki(){return null===zi&&new wi,zi}function Si(){Ci=this,xi.call(this)}Si.$metadata$={kind:p,simpleName:"BYTE",interfaces:[xi]};var Ci=null;function Ni(){return null===Ci&&new Si,Ci}function Ei(){Pi=this,xi.call(this)}Ei.$metadata$={kind:p,simpleName:"CHAR",interfaces:[xi]};var Pi=null;function Ti(){return null===Pi&&new Ei,Pi}function Oi(){Mi=this,xi.call(this)}Oi.$metadata$={kind:p,simpleName:"SHORT",interfaces:[xi]};var Mi=null;function ji(){return null===Mi&&new Oi,Mi}function Ai(){Ri=this,xi.call(this)}Ai.$metadata$={kind:p,simpleName:"INT",interfaces:[xi]};var Ri=null;function Ii(){return null===Ri&&new Ai,Ri}function Li(){Di=this,xi.call(this)}Li.$metadata$={kind:p,simpleName:"LONG",interfaces:[xi]};var Di=null;function qi(){return null===Di&&new Li,Di}function Bi(){Fi=this,xi.call(this)}Bi.$metadata$={kind:p,simpleName:"FLOAT",interfaces:[xi]};var Fi=null;function Ui(){return null===Fi&&new Bi,Fi}function Vi(){Gi=this,xi.call(this)}Vi.$metadata$={kind:p,simpleName:"DOUBLE",interfaces:[xi]};var Gi=null;function Hi(){return null===Gi&&new Vi,Gi}function Wi(){Ki=this,xi.call(this)}Wi.$metadata$={kind:p,simpleName:"STRING",interfaces:[xi]};var Ki=null;function Xi(){return null===Ki&&new Wi,Ki}function Yi(){_i.call(this)}function Zi(){Ji=this,Yi.call(this)}xi.$metadata$={kind:n,simpleName:"PrimitiveKind",interfaces:[_i]},Zi.$metadata$={kind:p,simpleName:"CLASS",interfaces:[Yi]};var Ji=null;function Qi(){return null===Ji&&new Zi,Ji}function tn(){en=this,Yi.call(this)}tn.$metadata$={kind:p,simpleName:"LIST",interfaces:[Yi]};var en=null;function nn(){return null===en&&new tn,en}function rn(){on=this,Yi.call(this)}rn.$metadata$={kind:p,simpleName:"MAP",interfaces:[Yi]};var on=null;function sn(){return null===on&&new rn,on}function an(){ln=this,Yi.call(this)}an.$metadata$={kind:p,simpleName:"OBJECT",interfaces:[Yi]};var ln=null;function un(){return null===ln&&new an,ln}function pn(){_i.call(this)}function cn(){hn=this,pn.call(this)}Yi.$metadata$={kind:n,simpleName:"StructureKind",interfaces:[_i]},cn.$metadata$={kind:p,simpleName:"SEALED",interfaces:[pn]};var hn=null;function dn(){return null===hn&&new cn,hn}function fn(){_n=this,pn.call(this)}fn.$metadata$={kind:p,simpleName:"OPEN",interfaces:[pn]};var _n=null;function mn(){this.updateMode_koclvo$_0=Zl()}function $n(){}function yn(){}function vn(){Pn()}function gn(){En=this,this.DECODE_DONE=-1,this.UNKNOWN_NAME=-3,this.READ_DONE=-1,this.READ_ALL=-2}pn.$metadata$={kind:n,simpleName:"PolymorphicKind",interfaces:[_i]},Object.defineProperty(mn.prototype,"serializersModule",{configurable:!0,get:function(){return Rl}}),Object.defineProperty(mn.prototype,"updateMode",{configurable:!0,get:function(){return this.updateMode_koclvo$_0}}),mn.prototype.decodeValue=function(){throw pu(e.getKClassFromExpression(this).toString()+" can't retrieve untyped values")},mn.prototype.decodeNotNullMark=function(){return!0},mn.prototype.decodeNull=function(){return null},mn.prototype.decodeBoolean=function(){var t;return"boolean"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeByte=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeShort=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeInt=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeLong=function(){var t;return e.isType(t=this.decodeValue(),e.Long)?t:o()},mn.prototype.decodeFloat=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeDouble=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeChar=function(){var t;return e.isChar(t=this.decodeValue())?t:o()},mn.prototype.decodeString=function(){var t;return"string"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeEnum_24f42q$=function(t){var e;return"number"==typeof(e=this.decodeValue())?e:o()},mn.prototype.decodeSerializableValue_19c8k5$$default=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},mn.prototype.decodeSerializableValue_19c8k5$=function(t,e,i){return void 0===e&&(e=null),i?i(t,e):this.decodeSerializableValue_19c8k5$$default(t,e)},mn.prototype.beginStructure_jvp2sb$=function(t,e){return this},mn.prototype.endStructure_24f42q$=function(t){},mn.prototype.decodeBooleanElement_szpzho$=function(t,e){return this.decodeBoolean()},mn.prototype.decodeByteElement_szpzho$=function(t,e){return this.decodeByte()},mn.prototype.decodeShortElement_szpzho$=function(t,e){return this.decodeShort()},mn.prototype.decodeIntElement_szpzho$=function(t,e){return this.decodeInt()},mn.prototype.decodeLongElement_szpzho$=function(t,e){return this.decodeLong()},mn.prototype.decodeFloatElement_szpzho$=function(t,e){return this.decodeFloat()},mn.prototype.decodeDoubleElement_szpzho$=function(t,e){return this.decodeDouble()},mn.prototype.decodeCharElement_szpzho$=function(t,e){return this.decodeChar()},mn.prototype.decodeStringElement_szpzho$=function(t,e){return this.decodeString()},mn.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.decodeSerializableValue_19c8k5$(i,n)},mn.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return i.descriptor.isNullable||this.decodeNotNullMark()?this.decodeSerializableValue_19c8k5$(i,n):this.decodeNull()},mn.$metadata$={kind:n,simpleName:"AbstractDecoder",interfaces:[vn,yn]},Object.defineProperty($n.prototype,"serializersModule",{configurable:!0,get:function(){return Rl}}),$n.prototype.beginStructure_jvp2sb$=function(t,e){return this},$n.prototype.endStructure_24f42q$=function(t){},$n.prototype.encodeElement_szpzho$=function(t,e){return!0},$n.prototype.encodeValue_za3rmp$=function(t){throw pu("Non-serializable "+e.getKClassFromExpression(t)+" is not supported by "+e.getKClassFromExpression(this)+" encoder")},$n.prototype.encodeNull=function(){throw pu("'null' is not supported by default")},$n.prototype.encodeBoolean_6taknv$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeByte_s8j3t7$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeShort_mq22fl$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeInt_za3lpa$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeLong_s8cxhz$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeFloat_mx4ult$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeDouble_14dthe$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeChar_s8itvh$=function(t){this.encodeValue_za3rmp$(I(t))},$n.prototype.encodeString_61zpoe$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeEnum_szpzho$=function(t,e){this.encodeValue_za3rmp$(e)},$n.prototype.encodeBooleanElement_qh7jdn$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeBoolean_6taknv$(i)},$n.prototype.encodeByteElement_j0u8y3$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeByte_s8j3t7$(i)},$n.prototype.encodeShortElement_l83pjl$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeShort_mq22fl$(i)},$n.prototype.encodeIntElement_ptg7oe$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeInt_za3lpa$(i)},$n.prototype.encodeLongElement_j0o2mv$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeLong_s8cxhz$(i)},$n.prototype.encodeFloatElement_lf6hpt$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeFloat_mx4ult$(i)},$n.prototype.encodeDoubleElement_powrwi$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeDouble_14dthe$(i)},$n.prototype.encodeCharElement_j0tz0d$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeChar_s8itvh$(i)},$n.prototype.encodeStringElement_iij8qq$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeString_61zpoe$(i)},$n.prototype.encodeSerializableElement_r4qlx7$=function(t,e,i,n){this.encodeElement_szpzho$(t,e)&&this.encodeSerializableValue_tf03ej$(i,n)},$n.prototype.encodeNullableSerializableElement_qw92s8$=function(t,e,i,n){this.encodeElement_szpzho$(t,e)&&this.encodeNullableSerializableValue_f4686g$(i,n)},$n.$metadata$={kind:n,simpleName:"AbstractEncoder",interfaces:[On,Tn]},Object.defineProperty(yn.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),yn.prototype.beginStructure_24f42q$=function(t){return this.beginStructure_jvp2sb$(t,[].slice())},yn.prototype.beginStructure_jvp2sb$=function(t,e){return this.beginStructure_24f42q$(t)},yn.prototype.decodeSerializableValue_w63s0f$=function(t){return t.deserialize_bq71mq$(this)},yn.prototype.decodeNullableSerializableValue_aae3ea$=function(t){return t.descriptor.isNullable||this.decodeNotNullMark()?this.decodeSerializableValue_w63s0f$(t):this.decodeNull()},yn.prototype.updateSerializableValue_19c8k5$=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},yn.prototype.updateNullableSerializableValue_exmlbs$=function(t,e){return this.decodeNullableSerializableValue_aae3ea$(t)},yn.$metadata$={kind:$,simpleName:"Decoder",interfaces:[]},gn.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var bn,xn,wn,zn,kn,Sn,Cn,Nn,En=null;function Pn(){return null===En&&new gn,En}function Tn(){}function On(){}function Mn(){}function jn(t,e){var i="in the scope of '"+f(e.simpleName)+"'";throw pu(null==t?"Class discriminator was missing and no default polymorphic serializers were registered "+i:"Class '"+f(t)+"' is not registered for polymorphic serialization "+i+".\nMark the base class as 'sealed' or register the serializer explicitly.")}function An(t,e){var i;return jn(null!=(i=t.simpleName)?i:t.toString(),e)}function Rn(t){this.elementDescriptor=t,this.elementsCount_axr0xc$_0=1}function In(t,e,i){this.serialName_ra35nx$_0=t,this.keyDescriptor=e,this.valueDescriptor=i,this.elementsCount_qp2ocq$_0=2}function Ln(t){Rn.call(this,t),this.serialName_reprdi$_0=t.serialName+"Array"}function Dn(t){Rn.call(this,t)}function qn(t){Rn.call(this,t)}function Bn(t,e){Rn.call(this,e),this.serialName_ej0k1l$_0=t}function Fn(t){Rn.call(this,t)}function Un(t){Rn.call(this,t)}function Vn(t,e,i){In.call(this,t,e,i)}function Gn(t,e){In.call(this,kn,t,e)}function Hn(t,e){In.call(this,Sn,t,e)}function Wn(){}function Kn(t){Wn.call(this),this.elementSerializer_6sofm1$_0=t}function Xn(t,e){Wn.call(this),this.keySerializer=t,this.valueSerializer=e}function Yn(){}function Zn(t){Kn.call(this,t),this.descriptor_o3qkn1$_0=new Ln(t.descriptor)}function Jn(t,e){Kn.call(this,e),this.kClass_0=t,this.descriptor_8482jr$_0=new Dn(e.descriptor)}function Qn(t){Kn.call(this,t),this.descriptor_7uwoa2$_0=new qn(t.descriptor)}function tr(t){Kn.call(this,t),this.descriptor_vnfc7m$_0=new Fn(t.descriptor)}function er(t){Kn.call(this,t),this.descriptor_yqpz47$_0=new Un(t.descriptor)}function ir(t,e){Xn.call(this,t,e),this.descriptor_pixp0o$_0=new Gn(t.descriptor,e.descriptor)}function nr(t,e){Xn.call(this,t,e),this.descriptor_kvyydd$_0=new Hn(t.descriptor,e.descriptor)}function rr(t,e){this.values_0=e,this.descriptor_ulj9cc$_0=ci(t,yi(),[],EnumSerializer$descriptor$lambda(this,t))}function or(t){this.serializer_0=t,this.descriptor_kbvl2k$_0=new sr(this.serializer_0.descriptor)}function sr(t){this.original_8be2vx$=t,this.serialName_szvoqg$_0=this.original_8be2vx$.serialName+"?"}function ar(t,e){this.objectInstance_0=e,this.descriptor_uhy216$_0=ci(t,un(),[])}function lr(t){var i;if(e.isType(t,_r))return t.namesSet_8be2vx$;var n=ot(t.elementsCount);i=t.elementsCount;for(var r=0;r<i;r++){var o=t.getElementName_za3lpa$(r);n.add_11rb$(o)}return n}function ur(t){var e,i;return null!=(i=null!=(e=null==t||t.isEmpty()?null:t)?M(e):null)?i:Cn}function pr(t){this.original_s64f0k$_0=P(t)}function cr(t){return new pr(t)}function hr(t){throw pu("Serializer for class '"+f(t.simpleName)+"' is not found.\nMark the class as @Serializable or provide the serializer explicitly.")}function dr(t){var i,n,r=t.classifier;if(!e.isType(r,st))throw R(("Only KClass supported as classifier, got "+f(r)).toString());return i=r,e.isType(n=i,st)?n:o()}function fr(t,e){var i=t.getElementIndex_61zpoe$(e);if(-3===i)throw pu(t.serialName+" does not contain element with name '"+e+"'");return i}function _r(t,i,n){void 0===i&&(i=null),this.serialName_igazkg$_0=t,this.generatedSerializer_0=i,this.elementsCount_qx3iur$_0=n,this.added_0=-1;var r,o,s=it(this.elementsCount);r=s.length-1|0;for(var a=0;a<=r;a++)s[a]="[UNINITIALIZED]";this.names_0=s,this.propertiesAnnotations_0=e.newArray(this.elementsCount,null),this.classAnnotations_0=null,this.elementsOptionality_0=e.booleanArray(this.elementsCount),this.indices_73aj4y$_0=P((o=this,function(){return o.buildIndices_0()})),this.typeParameterDescriptors_ggwkl6$_0=P(function(t){return function(){var e,i,n;if(null!=(i=null!=(e=t.generatedSerializer_0)?e.typeParametersSerializers():null)){var r,o=m(i.length);for(r=0;r!==i.length;++r){var s=i[r];o.add_11rb$(s.descriptor)}n=o}else n=null;return ur(n)}}(this)),this._hashCode_61j445$_0=P(function(t){return function(){var e=t,i=t.typeParameterDescriptors_0,n=d(e.serialName);n=(31*n|0)+j(i)|0;var r,o=si(e),s=1;for(r=o.iterator();r.hasNext();){var a,l=31*s|0,u=r.next().serialName;s=l+(null!=(a=null!=u?d(u):null)?a:0)|0}var p,c=s,h=1;for(p=o.iterator();p.hasNext();){var f,_=31*h|0,m=p.next().kind;h=_+(null!=(f=null!=m?d(m):null)?f:0)|0}return n=(31*(n=(31*n|0)+c|0)|0)+h|0}}(this))}function mr(){}function $r(){}function yr(){vr=this,Zn.call(this,Ie())}Object.defineProperty(vn.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),vn.prototype.decodeSequentially=function(){return!1},vn.prototype.decodeCollectionSize_24f42q$=function(t){return-1},vn.prototype.decodeSerializableElement_186mnl$=function(t,e,i){return this.decodeSerializableElement_12e8id$(t,e,i,null)},vn.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.decodeSerializableElement_186mnl$(t,e,i)},vn.prototype.decodeSerializableElement_12e8id$=function(t,e,i,n,r){return void 0===n&&(n=null),r?r(t,e,i,n):this.decodeSerializableElement_12e8id$$default(t,e,i,n)},vn.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return this.decodeNullableSerializableElement_pzkbua$(t,e,i)},vn.prototype.decodeNullableSerializableElement_8viuyw$=function(t,e,i,n,r){return void 0===n&&(n=null),r?r(t,e,i,n):this.decodeNullableSerializableElement_8viuyw$$default(t,e,i,n)},vn.prototype.decodeNullableSerializableElement_pzkbua$=function(t,e,i){return this.decodeNullableSerializableElement_8viuyw$(t,e,i,null)},vn.prototype.updateSerializableElement_12e8id$=function(t,e,i,n){return this.decodeSerializableElement_12e8id$(t,e,i,n)},vn.prototype.updateNullableSerializableElement_8viuyw$=function(t,e,i,n){return this.decodeNullableSerializableElement_8viuyw$(t,e,i,n)},vn.$metadata$={kind:$,simpleName:"CompositeDecoder",interfaces:[]},Tn.prototype.encodeNotNullMark=function(){},Tn.prototype.beginStructure_24f42q$=function(t){return this.beginStructure_jvp2sb$(t,[].slice())},Tn.prototype.beginStructure_jvp2sb$=function(t,e){return this.beginStructure_24f42q$(t)},Tn.prototype.beginCollection_szpzho$=function(t,e){return this.beginCollection_m8o8wh$(t,e,[].slice())},Tn.prototype.beginCollection_m8o8wh$=function(t,e,i){return this.beginStructure_24f42q$(t)},Tn.prototype.encodeSerializableValue_tf03ej$=function(t,e){t.serialize_55azsf$(this,e)},Tn.prototype.encodeNullableSerializableValue_f4686g$=function(t,i){var n;if(t.descriptor.isNullable)return this.encodeSerializableValue_tf03ej$(e.isType(n=t,Hl)?n:o(),i);null==i?this.encodeNull():(this.encodeNotNullMark(),this.encodeSerializableValue_tf03ej$(t,i))},Tn.$metadata$={kind:$,simpleName:"Encoder",interfaces:[]},On.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return!0},On.prototype.encodeNonSerializableElement_ptgdlt$=function(t,e,i){},On.$metadata$={kind:$,simpleName:"CompositeEncoder",interfaces:[]},Mn.prototype.serialize_55azsf$=function(t,i){var n=nu(this,t,i),r=this.descriptor,s=t.beginStructure_24f42q$(r);try{var a;s.encodeStringElement_iij8qq$(this.descriptor,0,n.descriptor.serialName),s.encodeSerializableElement_r4qlx7$(this.descriptor,1,e.isType(a=n,Hl)?a:o(),i)}finally{s.endStructure_24f42q$(r)}},Mn.prototype.deserialize_bq71mq$=function(t){var i,n=this.descriptor,r=t.beginStructure_24f42q$(n);try{var s,a,l={v:null},u=null;if(r.decodeSequentially())return this.decodeSequentially_j3xsyv$_0(r);t:for(;;){var p=r.decodeElementIndex_24f42q$(this.descriptor);switch(p){case-1:break t;case 0:l.v=r.decodeStringElement_szpzho$(this.descriptor,p);break;case 1:var c,h=l.v;if(null==h)throw O("Cannot read polymorphic value before its type token".toString());c=h,l.v=c;var d=iu(this,r,l.v);u=r.decodeSerializableElement_12e8id$(this.descriptor,p,d);break;default:throw pu("Invalid index in polymorphic deserialization of "+(null!=(s=l.v)?s:"unknown class")+"\n Expected 0, 1 or DECODE_DONE(-1), but found "+p)}}var _,m=u;if(null==m){var $="Polymorphic value has not been read for class "+f(l.v);throw O($.toString())}_=m,i=e.isType(a=_,L)?a:o()}finally{r.endStructure_24f42q$(n)}return i},Mn.prototype.decodeSequentially_j3xsyv$_0=function(t){var e=t.decodeStringElement_szpzho$(this.descriptor,0),i=iu(this,t,e);return t.decodeSerializableElement_12e8id$(this.descriptor,1,i)},Mn.prototype.findPolymorphicSerializerOrNull_ca6uye$=function(t,e){return t.serializersModule.getPolymorphic_l2fy3k$(this.baseClass,e)},Mn.prototype.findPolymorphicSerializerOrNull_kjsxpj$=function(t,e){return t.serializersModule.getPolymorphic_joiicr$(this.baseClass,e)},Mn.$metadata$={kind:n,simpleName:"AbstractPolymorphicSerializer",interfaces:[Gl]},Object.defineProperty(Rn.prototype,"kind",{configurable:!0,get:function(){return nn()}}),Object.defineProperty(Rn.prototype,"elementsCount",{configurable:!0,get:function(){return this.elementsCount_axr0xc$_0}}),Rn.prototype.getElementName_za3lpa$=function(t){return t.toString()},Rn.prototype.getElementIndex_61zpoe$=function(t){var e;if(null==(e=D(t)))throw O(t+" is not a valid list index");return e},Rn.prototype.isElementOptional_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return!1},Rn.prototype.getElementAnnotations_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return c()},Rn.prototype.getElementDescriptor_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return this.elementDescriptor},Rn.prototype.equals=function(t){return this===t||!!e.isType(t,Rn)&&!(!h(this.elementDescriptor,t.elementDescriptor)||!h(this.serialName,t.serialName))},Rn.prototype.hashCode=function(){return(31*d(this.elementDescriptor)|0)+d(this.serialName)|0},Rn.prototype.toString=function(){return this.serialName+"("+this.elementDescriptor+")"},Rn.$metadata$={kind:n,simpleName:"ListLikeDescriptor",interfaces:[ri]},Object.defineProperty(In.prototype,"serialName",{get:function(){return this.serialName_ra35nx$_0}}),Object.defineProperty(In.prototype,"kind",{configurable:!0,get:function(){return sn()}}),Object.defineProperty(In.prototype,"elementsCount",{configurable:!0,get:function(){return this.elementsCount_qp2ocq$_0}}),In.prototype.getElementName_za3lpa$=function(t){return t.toString()},In.prototype.getElementIndex_61zpoe$=function(t){var e;if(null==(e=D(t)))throw O(t+" is not a valid map index");return e},In.prototype.isElementOptional_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return!1},In.prototype.getElementAnnotations_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return c()},In.prototype.getElementDescriptor_za3lpa$=function(t){var e;if(!(t>=0)){var i="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(i.toString())}switch(t%2){case 0:e=this.keyDescriptor;break;case 1:e=this.valueDescriptor;break;default:throw R("Unreached".toString())}return e},In.prototype.equals=function(t){return this===t||!!e.isType(t,In)&&!!h(this.serialName,t.serialName)&&!!h(this.keyDescriptor,t.keyDescriptor)&&!!h(this.valueDescriptor,t.valueDescriptor)},In.prototype.hashCode=function(){var t=d(this.serialName);return t=(31*(t=(31*t|0)+d(this.keyDescriptor)|0)|0)+d(this.valueDescriptor)|0},In.prototype.toString=function(){return this.serialName+"("+this.keyDescriptor+", "+this.valueDescriptor+")"},In.$metadata$={kind:n,simpleName:"MapLikeDescriptor",interfaces:[ri]},Object.defineProperty(Ln.prototype,"serialName",{configurable:!0,get:function(){return this.serialName_reprdi$_0}}),Ln.$metadata$={kind:n,simpleName:"PrimitiveArrayDescriptor",interfaces:[Rn]},Object.defineProperty(Dn.prototype,"serialName",{configurable:!0,get:function(){return bn}}),Dn.$metadata$={kind:n,simpleName:"ArrayClassDesc",interfaces:[Rn]},Object.defineProperty(qn.prototype,"serialName",{configurable:!0,get:function(){return xn}}),qn.$metadata$={kind:n,simpleName:"ArrayListClassDesc",interfaces:[Rn]},Object.defineProperty(Bn.prototype,"serialName",{get:function(){return this.serialName_ej0k1l$_0}}),Bn.$metadata$={kind:n,simpleName:"NamedListClassDescriptor",interfaces:[Rn]},Object.defineProperty(Fn.prototype,"serialName",{configurable:!0,get:function(){return wn}}),Fn.$metadata$={kind:n,simpleName:"LinkedHashSetClassDesc",interfaces:[Rn]},Object.defineProperty(Un.prototype,"serialName",{configurable:!0,get:function(){return zn}}),Un.$metadata$={kind:n,simpleName:"HashSetClassDesc",interfaces:[Rn]},Vn.$metadata$={kind:n,simpleName:"NamedMapClassDescriptor",interfaces:[In]},Gn.$metadata$={kind:n,simpleName:"LinkedHashMapClassDesc",interfaces:[In]},Hn.$metadata$={kind:n,simpleName:"HashMapClassDesc",interfaces:[In]},Wn.prototype.merge_h7kg3q$=function(t,e){var i,n=null!=(i=null!=e?this.toBuilder_wikn$(e):null)?i:this.builder(),r=this.builderSize_wili$(n),o=t.beginStructure_24f42q$(this.descriptor);if(o.decodeSequentially())this.readAll_8oyp34$(o,n,r,this.readSize_bl0yv7$_0(o,n));else for(;;){var s=o.decodeElementIndex_24f42q$(this.descriptor);if(-1===s)break;this.readElement_8pvye7$(o,r+s|0,n)}return o.endStructure_24f42q$(this.descriptor),this.toResult_wili$(n)},Wn.prototype.deserialize_bq71mq$=function(t){return this.merge_h7kg3q$(t,null)},Wn.prototype.readSize_bl0yv7$_0=function(t,e){var i=t.decodeCollectionSize_24f42q$(this.descriptor);return this.checkCapacity_rk7bw8$(e,i),i},Wn.prototype.readElement_8pvye7$=function(t,e,i,n,r){void 0===n&&(n=!0),r?r(t,e,i,n):this.readElement_8pvye7$$default(t,e,i,n)},Wn.$metadata$={kind:n,simpleName:"AbstractCollectionSerializer",interfaces:[Gl]},Kn.prototype.serialize_55azsf$=function(t,e){for(var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i),r=this.collectionIterator_wikn$(e),o=0;o<i;o++)n.encodeSerializableElement_r4qlx7$(this.descriptor,o,this.elementSerializer_6sofm1$_0,r.next());n.endStructure_24f42q$(this.descriptor)},Kn.prototype.readAll_8oyp34$=function(t,e,i,n){if(!(n>=0))throw O("Size must be known in advance when using READ_ALL".toString());for(var r=0;r<n;r++)this.readElement_8pvye7$(t,i+r|0,e,!1)},Kn.prototype.readElement_8pvye7$$default=function(t,e,i,n){this.insert_p422l$(i,e,t.decodeSerializableElement_12e8id$(this.descriptor,e,this.elementSerializer_6sofm1$_0))},Kn.$metadata$={kind:n,simpleName:"ListLikeSerializer",interfaces:[Wn]},Xn.prototype.readAll_8oyp34$=function(t,e,i,n){var r;if(!(n>=0))throw O("Size must be known in advance when using READ_ALL".toString());r=2*n|0;for(var o=0;o<r;o+=2)this.readElement_8pvye7$(t,i+o|0,e,!1)},Xn.prototype.readElement_8pvye7$$default=function(t,i,n,r){var o,s=t.decodeSerializableElement_12e8id$(this.descriptor,i,this.keySerializer);if(r){var a=t.decodeElementIndex_24f42q$(this.descriptor);if(a!==(i+1|0))throw O(("Value must follow key in a map, index for key: "+i+", returned index for value: "+a).toString());o=a}else o=i+1|0;var l=o,u=n.containsKey_11rb$(s)&&!e.isType(this.valueSerializer.descriptor.kind,xi)?t.decodeSerializableElement_12e8id$(this.descriptor,l,this.valueSerializer,q(n,s)):t.decodeSerializableElement_12e8id$(this.descriptor,l,this.valueSerializer);n.put_xwzc9p$(s,u)},Xn.prototype.serialize_55azsf$=function(t,e){for(var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i),r=this.collectionIterator_wikn$(e),o={v:0};r.hasNext();){var s,a,l=r.next(),u=l.key,p=l.value;n.encodeSerializableElement_r4qlx7$(this.descriptor,(s=o.v,o.v=s+1|0,s),this.keySerializer,u),n.encodeSerializableElement_r4qlx7$(this.descriptor,(a=o.v,o.v=a+1|0,a),this.valueSerializer,p)}n.endStructure_24f42q$(this.descriptor)},Xn.$metadata$={kind:n,simpleName:"MapLikeSerializer",interfaces:[Wn]},Yn.prototype.ensureCapacity_za3lpa$=function(t,e){void 0===t&&(t=this.position+1|0),e?e(t):this.ensureCapacity_za3lpa$$default(t)},Yn.$metadata$={kind:n,simpleName:"PrimitiveArrayBuilder",interfaces:[]},Object.defineProperty(Zn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_o3qkn1$_0}}),Zn.prototype.builderSize_wili$=function(t){return t.position},Zn.prototype.toResult_wili$=function(t){return t.build()},Zn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Zn.prototype.collectionIterator_wikn$=function(t){throw R("This method lead to boxing and must not be used, use writeContents instead".toString())},Zn.prototype.insert_p422l$=function(t,e,i){throw R("This method lead to boxing and must not be used, use Builder.append instead".toString())},Zn.prototype.builder=function(){return this.toBuilder_wikn$(this.empty())},Zn.prototype.serialize_55azsf$=function(t,e){var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i);this.writeContent_q3xt5$(n,e,i),n.endStructure_24f42q$(this.descriptor)},Zn.prototype.deserialize_bq71mq$=function(t){return this.merge_h7kg3q$(t,null)},Zn.$metadata$={kind:n,simpleName:"PrimitiveArraySerializer",interfaces:[Kn]},Object.defineProperty(Jn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_8482jr$_0}}),Jn.prototype.collectionSize_wikn$=function(t){return t.length},Jn.prototype.collectionIterator_wikn$=function(t){return e.arrayIterator(t)},Jn.prototype.builder=function(){return b()},Jn.prototype.builderSize_wili$=function(t){return t.size},Jn.prototype.toResult_wili$=function(t){return gu(t,this.kClass_0)},Jn.prototype.toBuilder_wikn$=function(t){return F(B(t))},Jn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Jn.prototype.insert_p422l$=function(t,e,i){t.add_wxm5ur$(e,i)},Jn.$metadata$={kind:n,simpleName:"ReferenceArraySerializer",interfaces:[Kn]},Object.defineProperty(Qn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7uwoa2$_0}}),Qn.prototype.collectionSize_wikn$=function(t){return t.size},Qn.prototype.collectionIterator_wikn$=function(t){return t.iterator()},Qn.prototype.builder=function(){return b()},Qn.prototype.builderSize_wili$=function(t){return t.size},Qn.prototype.toResult_wili$=function(t){return t},Qn.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,U)?i:null)?n:F(t)},Qn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Qn.prototype.insert_p422l$=function(t,e,i){t.add_wxm5ur$(e,i)},Qn.$metadata$={kind:n,simpleName:"ArrayListSerializer",interfaces:[Kn]},Object.defineProperty(tr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vnfc7m$_0}}),tr.prototype.collectionSize_wikn$=function(t){return t.size},tr.prototype.collectionIterator_wikn$=function(t){return t.iterator()},tr.prototype.builder=function(){return tt()},tr.prototype.builderSize_wili$=function(t){return t.size},tr.prototype.toResult_wili$=function(t){return t},tr.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,V)?i:null)?n:G(t)},tr.prototype.checkCapacity_rk7bw8$=function(t,e){},tr.prototype.insert_p422l$=function(t,e,i){t.add_11rb$(i)},tr.$metadata$={kind:n,simpleName:"LinkedHashSetSerializer",interfaces:[Kn]},Object.defineProperty(er.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yqpz47$_0}}),er.prototype.collectionSize_wikn$=function(t){return t.size},er.prototype.collectionIterator_wikn$=function(t){return t.iterator()},er.prototype.builder=function(){return x()},er.prototype.builderSize_wili$=function(t){return t.size},er.prototype.toResult_wili$=function(t){return t},er.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,H)?i:null)?n:W(t)},er.prototype.checkCapacity_rk7bw8$=function(t,e){},er.prototype.insert_p422l$=function(t,e,i){t.add_11rb$(i)},er.$metadata$={kind:n,simpleName:"HashSetSerializer",interfaces:[Kn]},Object.defineProperty(ir.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_pixp0o$_0}}),ir.prototype.collectionSize_wikn$=function(t){return t.size},ir.prototype.collectionIterator_wikn$=function(t){return t.entries.iterator()},ir.prototype.builder=function(){return K()},ir.prototype.builderSize_wili$=function(t){return t.size},ir.prototype.toResult_wili$=function(t){return t},ir.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,X)?i:null)?n:Y(t)},ir.prototype.checkCapacity_rk7bw8$=function(t,e){},ir.prototype.insertKeyValuePair_fbr58l$=function(t,e,i,n){t.put_xwzc9p$(i,n)},ir.$metadata$={kind:n,simpleName:"LinkedHashMapSerializer",interfaces:[Xn]},Object.defineProperty(nr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kvyydd$_0}}),nr.prototype.collectionSize_wikn$=function(t){return t.size},nr.prototype.collectionIterator_wikn$=function(t){return t.entries.iterator()},nr.prototype.builder=function(){return Z()},nr.prototype.builderSize_wili$=function(t){return t.size},nr.prototype.toResult_wili$=function(t){return t},nr.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,J)?i:null)?n:Q(t)},nr.prototype.checkCapacity_rk7bw8$=function(t,e){},nr.prototype.insertKeyValuePair_fbr58l$=function(t,e,i,n){t.put_xwzc9p$(i,n)},nr.$metadata$={kind:n,simpleName:"HashMapSerializer",interfaces:[Xn]},Object.defineProperty(or.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kbvl2k$_0}}),or.prototype.serialize_55azsf$=function(t,e){null!=e?(t.encodeNotNullMark(),t.encodeSerializableValue_tf03ej$(this.serializer_0,e)):t.encodeNull()},or.prototype.deserialize_bq71mq$=function(t){return t.decodeNotNullMark()?t.decodeSerializableValue_w63s0f$(this.serializer_0):t.decodeNull()},or.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,or)||o(),!!h(this.serializer_0,t.serializer_0))},or.prototype.hashCode=function(){return d(this.serializer_0)},or.$metadata$={kind:n,simpleName:"NullableSerializer",interfaces:[Gl]},Object.defineProperty(sr.prototype,"serialName",{configurable:!0,get:function(){return this.serialName_szvoqg$_0}}),Object.defineProperty(sr.prototype,"isNullable",{configurable:!0,get:function(){return!0}}),sr.prototype.equals=function(t){return this===t||!!e.isType(t,sr)&&!!h(this.original_8be2vx$,t.original_8be2vx$)},sr.prototype.toString=function(){return this.original_8be2vx$.toString()+"?"},sr.prototype.hashCode=function(){return 31*d(this.original_8be2vx$)|0},Object.defineProperty(sr.prototype,"annotations",{get:function(){return this.original_8be2vx$.annotations}}),Object.defineProperty(sr.prototype,"elementsCount",{get:function(){return this.original_8be2vx$.elementsCount}}),Object.defineProperty(sr.prototype,"kind",{get:function(){return this.original_8be2vx$.kind}}),sr.prototype.getElementAnnotations_za3lpa$=function(t){return this.original_8be2vx$.getElementAnnotations_za3lpa$(t)},sr.prototype.getElementDescriptor_za3lpa$=function(t){return this.original_8be2vx$.getElementDescriptor_za3lpa$(t)},sr.prototype.getElementIndex_61zpoe$=function(t){return this.original_8be2vx$.getElementIndex_61zpoe$(t)},sr.prototype.getElementName_za3lpa$=function(t){return this.original_8be2vx$.getElementName_za3lpa$(t)},sr.prototype.isElementOptional_za3lpa$=function(t){return this.original_8be2vx$.isElementOptional_za3lpa$(t)},sr.$metadata$={kind:n,simpleName:"SerialDescriptorForNullable",interfaces:[ri]},Object.defineProperty(ar.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_uhy216$_0}}),ar.prototype.serialize_55azsf$=function(t,e){t.beginStructure_24f42q$(this.descriptor).endStructure_24f42q$(this.descriptor)},ar.prototype.deserialize_bq71mq$=function(t){return t.beginStructure_24f42q$(this.descriptor).endStructure_24f42q$(this.descriptor),this.objectInstance_0},ar.$metadata$={kind:n,simpleName:"ObjectSerializer",interfaces:[Gl]},Object.defineProperty(pr.prototype,"original_0",{configurable:!0,get:function(){return this.original_s64f0k$_0.value}}),Object.defineProperty(pr.prototype,"serialName",{configurable:!0,get:function(){return this.original_0.serialName}}),Object.defineProperty(pr.prototype,"kind",{configurable:!0,get:function(){return this.original_0.kind}}),Object.defineProperty(pr.prototype,"elementsCount",{configurable:!0,get:function(){return this.original_0.elementsCount}}),pr.prototype.getElementName_za3lpa$=function(t){return this.original_0.getElementName_za3lpa$(t)},pr.prototype.getElementIndex_61zpoe$=function(t){return this.original_0.getElementIndex_61zpoe$(t)},pr.prototype.getElementAnnotations_za3lpa$=function(t){return this.original_0.getElementAnnotations_za3lpa$(t)},pr.prototype.getElementDescriptor_za3lpa$=function(t){return this.original_0.getElementDescriptor_za3lpa$(t)},pr.prototype.isElementOptional_za3lpa$=function(t){return this.original_0.isElementOptional_za3lpa$(t)},pr.$metadata$={kind:n,interfaces:[ri]},Object.defineProperty(_r.prototype,"serialName",{get:function(){return this.serialName_igazkg$_0}}),Object.defineProperty(_r.prototype,"elementsCount",{get:function(){return this.elementsCount_qx3iur$_0}}),Object.defineProperty(_r.prototype,"kind",{configurable:!0,get:function(){return Qi()}}),Object.defineProperty(_r.prototype,"annotations",{configurable:!0,get:function(){var t;return null!=(t=this.classAnnotations_0)?t:c()}}),Object.defineProperty(_r.prototype,"namesSet_8be2vx$",{configurable:!0,get:function(){return this.indices_0.keys}}),Object.defineProperty(_r.prototype,"indices_0",{configurable:!0,get:function(){return this.indices_73aj4y$_0.value}}),Object.defineProperty(_r.prototype,"typeParameterDescriptors_0",{configurable:!0,get:function(){return this.typeParameterDescriptors_ggwkl6$_0.value}}),Object.defineProperty(_r.prototype,"_hashCode_0",{configurable:!0,get:function(){return this._hashCode_61j445$_0.value}}),_r.prototype.addElement_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.names_0[(this.added_0=this.added_0+1|0,this.added_0)]=t,this.elementsOptionality_0[this.added_0]=e,this.propertiesAnnotations_0[this.added_0]=null},_r.prototype.pushAnnotation_yj921w$=function(t){var e,i=this.propertiesAnnotations_0[this.added_0];if(null==i){var n=m(1);this.propertiesAnnotations_0[this.added_0]=n,e=n}else e=i;e.add_11rb$(t)},_r.prototype.pushClassAnnotation_yj921w$=function(t){null==this.classAnnotations_0&&(this.classAnnotations_0=m(1)),A(this.classAnnotations_0).add_11rb$(t)},_r.prototype.getElementDescriptor_za3lpa$=function(t){var e,i,n,r;if(null==(r=null!=(n=null!=(i=null!=(e=this.generatedSerializer_0)?e.childSerializers():null)?i[t]:null)?n.descriptor:null))throw new at(this.serialName+" descriptor has only "+this.elementsCount+" elements, index: "+t);return r},_r.prototype.isElementOptional_za3lpa$=function(t){return yu(this.elementsOptionality_0,t)},_r.prototype.getElementAnnotations_za3lpa$=function(t){var e;return null!=(e=$u(this.propertiesAnnotations_0,t))?e:c()},_r.prototype.getElementName_za3lpa$=function(t){return $u(this.names_0,t)},_r.prototype.getElementIndex_61zpoe$=function(t){var e;return null!=(e=this.indices_0.get_11rb$(t))?e:-3},_r.prototype.buildIndices_0=function(){var t,e=Z();t=this.names_0;for(var i=0;i!==t.length;++i){var n=this.names_0[i];e.put_xwzc9p$(n,i)}return e},_r.prototype.equals=function(t){var i;t:do{var n;if(this===t){i=!0;break t}if(!e.isType(t,_r)){i=!1;break t}if(!h(this.serialName,t.serialName)){i=!1;break t}if(!w(this.typeParameterDescriptors_0,t.typeParameterDescriptors_0)){i=!1;break t}if(this.elementsCount!==t.elementsCount){i=!1;break t}n=this.elementsCount;for(var r=0;r<n;r++){if(!h(this.getElementDescriptor_za3lpa$(r).serialName,t.getElementDescriptor_za3lpa$(r).serialName)){i=!1;break t}if(!h(this.getElementDescriptor_za3lpa$(r).kind,t.getElementDescriptor_za3lpa$(r).kind)){i=!1;break t}}i=!0}while(0);return i},_r.prototype.hashCode=function(){return this._hashCode_0},_r.prototype.toString=function(){return k(this.indices_0.entries,", ",this.serialName+"(",")",void 0,void 0,(t=this,function(e){return e.key+": "+t.getElementDescriptor_za3lpa$(e.value).serialName}));var t},_r.$metadata$={kind:n,simpleName:"PluginGeneratedSerialDescriptor",interfaces:[ri]},mr.prototype.typeParametersSerializers=function(){return Nn},mr.$metadata$={kind:$,simpleName:"GeneratedSerializer",interfaces:[Gl]},$r.$metadata$={kind:$,simpleName:"SerializerFactory",interfaces:[]},yr.prototype.collectionSize_wikn$=function(t){return t.length},yr.prototype.toBuilder_wikn$=function(t){return new br(t)},yr.prototype.empty=function(){return new Int8Array(0)},yr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e99oo$(t.decodeByteElement_szpzho$(this.descriptor,e))},yr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeByteElement_j0u8y3$(this.descriptor,n,e[n])},yr.$metadata$={kind:p,simpleName:"ByteArraySerializer",interfaces:[Zn,Gl]};var vr=null;function gr(){return null===vr&&new yr,vr}function br(t){Yn.call(this),this.buffer_0=t,this.position_8vrcnd$_0=t.length,this.ensureCapacity_za3lpa$(10)}function xr(){wr=this,Zn.call(this,De())}Object.defineProperty(br.prototype,"position",{configurable:!0,get:function(){return this.position_8vrcnd$_0},set:function(t){this.position_8vrcnd$_0=t}}),br.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ut(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},br.prototype.append_8e99oo$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},br.prototype.build=function(){return ut(this.buffer_0,this.position)},br.$metadata$={kind:n,simpleName:"ByteArrayBuilder",interfaces:[Yn]},xr.prototype.collectionSize_wikn$=function(t){return t.length},xr.prototype.toBuilder_wikn$=function(t){return new kr(t)},xr.prototype.empty=function(){return new Int16Array(0)},xr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_o3ifnw$(t.decodeShortElement_szpzho$(this.descriptor,e))},xr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeShortElement_l83pjl$(this.descriptor,n,e[n])},xr.$metadata$={kind:p,simpleName:"ShortArraySerializer",interfaces:[Zn,Gl]};var wr=null;function zr(){return null===wr&&new xr,wr}function kr(t){Yn.call(this),this.buffer_0=t,this.position_aswgsb$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Sr(){Cr=this,Zn.call(this,Be())}Object.defineProperty(kr.prototype,"position",{configurable:!0,get:function(){return this.position_aswgsb$_0},set:function(t){this.position_aswgsb$_0=t}}),kr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=pt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},kr.prototype.append_o3ifnw$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},kr.prototype.build=function(){return pt(this.buffer_0,this.position)},kr.$metadata$={kind:n,simpleName:"ShortArrayBuilder",interfaces:[Yn]},Sr.prototype.collectionSize_wikn$=function(t){return t.length},Sr.prototype.toBuilder_wikn$=function(t){return new Er(t)},Sr.prototype.empty=function(){return new Int32Array(0)},Sr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_kcn2v3$(t.decodeIntElement_szpzho$(this.descriptor,e))},Sr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeIntElement_ptg7oe$(this.descriptor,n,e[n])},Sr.$metadata$={kind:p,simpleName:"IntArraySerializer",interfaces:[Zn,Gl]};var Cr=null;function Nr(){return null===Cr&&new Sr,Cr}function Er(t){Yn.call(this),this.buffer_0=t,this.position_9owhjc$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Pr(){Tr=this,Zn.call(this,Ue())}Object.defineProperty(Er.prototype,"position",{configurable:!0,get:function(){return this.position_9owhjc$_0},set:function(t){this.position_9owhjc$_0=t}}),Er.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ct(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Er.prototype.append_kcn2v3$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Er.prototype.build=function(){return ct(this.buffer_0,this.position)},Er.$metadata$={kind:n,simpleName:"IntArrayBuilder",interfaces:[Yn]},Pr.prototype.collectionSize_wikn$=function(t){return t.length},Pr.prototype.toBuilder_wikn$=function(t){return new Mr(t)},Pr.prototype.empty=function(){return e.longArray(0)},Pr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e33dg$(t.decodeLongElement_szpzho$(this.descriptor,e))},Pr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeLongElement_j0o2mv$(this.descriptor,n,e[n])},Pr.$metadata$={kind:p,simpleName:"LongArraySerializer",interfaces:[Zn,Gl]};var Tr=null;function Or(){return null===Tr&&new Pr,Tr}function Mr(t){Yn.call(this),this.buffer_0=t,this.position_kthxoj$_0=t.length,this.ensureCapacity_za3lpa$(10)}function jr(){Ar=this,Zn.call(this,Ge())}Object.defineProperty(Mr.prototype,"position",{configurable:!0,get:function(){return this.position_kthxoj$_0},set:function(t){this.position_kthxoj$_0=t}}),Mr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ht(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Mr.prototype.append_8e33dg$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Mr.prototype.build=function(){return ht(this.buffer_0,this.position)},Mr.$metadata$={kind:n,simpleName:"LongArrayBuilder",interfaces:[Yn]},jr.prototype.collectionSize_wikn$=function(t){return t.length},jr.prototype.toBuilder_wikn$=function(t){return new Ir(t)},jr.prototype.empty=function(){return new Float32Array(0)},jr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_nwfnho$(t.decodeFloatElement_szpzho$(this.descriptor,e))},jr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeFloatElement_lf6hpt$(this.descriptor,n,e[n])},jr.$metadata$={kind:p,simpleName:"FloatArraySerializer",interfaces:[Zn,Gl]};var Ar=null;function Rr(){return null===Ar&&new jr,Ar}function Ir(t){Yn.call(this),this.buffer_0=t,this.position_gfqw9x$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Lr(){Dr=this,Zn.call(this,We())}Object.defineProperty(Ir.prototype,"position",{configurable:!0,get:function(){return this.position_gfqw9x$_0},set:function(t){this.position_gfqw9x$_0=t}}),Ir.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=dt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Ir.prototype.append_nwfnho$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Ir.prototype.build=function(){return dt(this.buffer_0,this.position)},Ir.$metadata$={kind:n,simpleName:"FloatArrayBuilder",interfaces:[Yn]},Lr.prototype.collectionSize_wikn$=function(t){return t.length},Lr.prototype.toBuilder_wikn$=function(t){return new Br(t)},Lr.prototype.empty=function(){return new Float64Array(0)},Lr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_tq0o01$(t.decodeDoubleElement_szpzho$(this.descriptor,e))},Lr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeDoubleElement_powrwi$(this.descriptor,n,e[n])},Lr.$metadata$={kind:p,simpleName:"DoubleArraySerializer",interfaces:[Zn,Gl]};var Dr=null;function qr(){return null===Dr&&new Lr,Dr}function Br(t){Yn.call(this),this.buffer_0=t,this.position_qka0uq$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Fr(){Ur=this,Zn.call(this,Ae())}Object.defineProperty(Br.prototype,"position",{configurable:!0,get:function(){return this.position_qka0uq$_0},set:function(t){this.position_qka0uq$_0=t}}),Br.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ft(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Br.prototype.append_tq0o01$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Br.prototype.build=function(){return ft(this.buffer_0,this.position)},Br.$metadata$={kind:n,simpleName:"DoubleArrayBuilder",interfaces:[Yn]},Fr.prototype.collectionSize_wikn$=function(t){return t.length},Fr.prototype.toBuilder_wikn$=function(t){return new Gr(t)},Fr.prototype.empty=function(){return e.charArray(0)},Fr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e8zqy$(_t(t.decodeCharElement_szpzho$(this.descriptor,e)))},Fr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeCharElement_j0tz0d$(this.descriptor,n,e[n])},Fr.$metadata$={kind:p,simpleName:"CharArraySerializer",interfaces:[Zn,Gl]};var Ur=null;function Vr(){return null===Ur&&new Fr,Ur}function Gr(t){Yn.call(this),this.buffer_0=t,this.position_tpcwbb$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Hr(){Kr=this,Zn.call(this,Xe())}Object.defineProperty(Gr.prototype,"position",{configurable:!0,get:function(){return this.position_tpcwbb$_0},set:function(t){this.position_tpcwbb$_0=t}}),Gr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=mt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Gr.prototype.append_8e8zqy$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Gr.prototype.build=function(){return mt(this.buffer_0,this.position)},Gr.$metadata$={kind:n,simpleName:"CharArrayBuilder",interfaces:[Yn]},Hr.prototype.collectionSize_wikn$=function(t){return t.length},Hr.prototype.toBuilder_wikn$=function(t){return new Yr(t)},Hr.prototype.empty=function(){return e.booleanArray(0)},Hr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_vft4zs$(t.decodeBooleanElement_szpzho$(this.descriptor,e))},Hr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeBooleanElement_qh7jdn$(this.descriptor,n,e[n])},Hr.$metadata$={kind:p,simpleName:"BooleanArraySerializer",interfaces:[Zn,Gl]};var Wr,Kr=null;function Xr(){return null===Kr&&new Hr,Kr}function Yr(t){Yn.call(this),this.buffer_0=t,this.position_fkn8lr$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Zr(t,e){this.serialName_h9gugr$_0=t,this.kind_rqp61y$_0=e}function Jr(t,e){return function(t){var e,i=Wr.keys;for(e=i.iterator();e.hasNext();){var n=e.next(),r=It(A(n.simpleName));if(Lt(t,"kotlin."+r,!0)||Lt(t,r,!0))throw O(Dt("\n                The name of serial descriptor should uniquely identify associated serializer.\n                For serial name "+t+" there already exist "+It(r)+"Serializer.\n                Please refer to SerialDescriptor documentation for additional information.\n            "))}}(t),new Zr(t,e)}function Qr(t){var i;return null==(i=Wr.get_11rb$(t))||e.isType(i,Gl)?i:o()}function to(){eo=this,this.$delegate_t0wm8i$_0=new ar("kotlin.Unit",l)}Object.defineProperty(Yr.prototype,"position",{configurable:!0,get:function(){return this.position_fkn8lr$_0},set:function(t){this.position_fkn8lr$_0=t}}),Yr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=$t(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Yr.prototype.append_vft4zs$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Yr.prototype.build=function(){return $t(this.buffer_0,this.position)},Yr.$metadata$={kind:n,simpleName:"BooleanArrayBuilder",interfaces:[Yn]},Object.defineProperty(Zr.prototype,"serialName",{get:function(){return this.serialName_h9gugr$_0}}),Object.defineProperty(Zr.prototype,"kind",{get:function(){return this.kind_rqp61y$_0}}),Object.defineProperty(Zr.prototype,"elementsCount",{configurable:!0,get:function(){return 0}}),Zr.prototype.getElementName_za3lpa$=function(t){return this.error_0()},Zr.prototype.getElementIndex_61zpoe$=function(t){return this.error_0()},Zr.prototype.isElementOptional_za3lpa$=function(t){return this.error_0()},Zr.prototype.getElementDescriptor_za3lpa$=function(t){return this.error_0()},Zr.prototype.getElementAnnotations_za3lpa$=function(t){return this.error_0()},Zr.prototype.toString=function(){return"PrimitiveDescriptor("+this.serialName+")"},Zr.prototype.error_0=function(){throw R("Primitive descriptor does not have elements")},Zr.$metadata$={kind:n,simpleName:"PrimitiveSerialDescriptor",interfaces:[ri]},Object.defineProperty(to.prototype,"descriptor",{get:function(){return this.$delegate_t0wm8i$_0.descriptor}}),to.prototype.deserialize_bq71mq$=function(t){return this.$delegate_t0wm8i$_0.deserialize_bq71mq$(t)},to.prototype.patch_h7kg3r$=function(t,e){return this.$delegate_t0wm8i$_0.patch_h7kg3r$(t,e)},to.prototype.serialize_55azsf$=function(t,e){return this.$delegate_t0wm8i$_0.serialize_55azsf$(t,e)},to.$metadata$={kind:p,simpleName:"UnitSerializer",interfaces:[Gl]};var eo=null;function io(){return null===eo&&new to,eo}function no(){ro=this,this.descriptor_vdtvaz$_0=new Zr("kotlin.Boolean",ki())}Object.defineProperty(no.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vdtvaz$_0}}),no.prototype.serialize_55azsf$=function(t,e){t.encodeBoolean_6taknv$(e)},no.prototype.deserialize_bq71mq$=function(t){return t.decodeBoolean()},no.$metadata$={kind:p,simpleName:"BooleanSerializer",interfaces:[Gl]};var ro=null;function oo(){return null===ro&&new no,ro}function so(){ao=this,this.descriptor_f6vlf1$_0=new Zr("kotlin.Byte",Ni())}Object.defineProperty(so.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_f6vlf1$_0}}),so.prototype.serialize_55azsf$=function(t,e){t.encodeByte_s8j3t7$(e)},so.prototype.deserialize_bq71mq$=function(t){return t.decodeByte()},so.$metadata$={kind:p,simpleName:"ByteSerializer",interfaces:[Gl]};var ao=null;function lo(){return null===ao&&new so,ao}function uo(){po=this,this.descriptor_yvjeup$_0=new Zr("kotlin.Short",ji())}Object.defineProperty(uo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yvjeup$_0}}),uo.prototype.serialize_55azsf$=function(t,e){t.encodeShort_mq22fl$(e)},uo.prototype.deserialize_bq71mq$=function(t){return t.decodeShort()},uo.$metadata$={kind:p,simpleName:"ShortSerializer",interfaces:[Gl]};var po=null;function co(){return null===po&&new uo,po}function ho(){fo=this,this.descriptor_xrjflq$_0=new Zr("kotlin.Int",Ii())}Object.defineProperty(ho.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_xrjflq$_0}}),ho.prototype.serialize_55azsf$=function(t,e){t.encodeInt_za3lpa$(e)},ho.prototype.deserialize_bq71mq$=function(t){return t.decodeInt()},ho.$metadata$={kind:p,simpleName:"IntSerializer",interfaces:[Gl]};var fo=null;function _o(){return null===fo&&new ho,fo}function mo(){$o=this,this.descriptor_q4z687$_0=new Zr("kotlin.Long",qi())}Object.defineProperty(mo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_q4z687$_0}}),mo.prototype.serialize_55azsf$=function(t,e){t.encodeLong_s8cxhz$(e)},mo.prototype.deserialize_bq71mq$=function(t){return t.decodeLong()},mo.$metadata$={kind:p,simpleName:"LongSerializer",interfaces:[Gl]};var $o=null;function yo(){return null===$o&&new mo,$o}function vo(){go=this,this.descriptor_7mw1sh$_0=new Zr("kotlin.Float",Ui())}Object.defineProperty(vo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7mw1sh$_0}}),vo.prototype.serialize_55azsf$=function(t,e){t.encodeFloat_mx4ult$(e)},vo.prototype.deserialize_bq71mq$=function(t){return t.decodeFloat()},vo.$metadata$={kind:p,simpleName:"FloatSerializer",interfaces:[Gl]};var go=null;function bo(){return null===go&&new vo,go}function xo(){wo=this,this.descriptor_2hn2sc$_0=new Zr("kotlin.Double",Hi())}Object.defineProperty(xo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_2hn2sc$_0}}),xo.prototype.serialize_55azsf$=function(t,e){t.encodeDouble_14dthe$(e)},xo.prototype.deserialize_bq71mq$=function(t){return t.decodeDouble()},xo.$metadata$={kind:p,simpleName:"DoubleSerializer",interfaces:[Gl]};var wo=null;function zo(){return null===wo&&new xo,wo}function ko(){So=this,this.descriptor_5mpy8x$_0=new Zr("kotlin.Char",Ti())}Object.defineProperty(ko.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_5mpy8x$_0}}),ko.prototype.serialize_55azsf$=function(t,e){t.encodeChar_s8itvh$(e)},ko.prototype.deserialize_bq71mq$=function(t){return t.decodeChar()},ko.$metadata$={kind:p,simpleName:"CharSerializer",interfaces:[Gl]};var So=null;function Co(){return null===So&&new ko,So}function No(){is=this,this.descriptor_sum718$_0=new Zr("kotlin.String",Xi())}Object.defineProperty(No.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_sum718$_0}}),No.prototype.serialize_55azsf$=function(t,e){t.encodeString_61zpoe$(e)},No.prototype.deserialize_bq71mq$=function(t){return t.decodeString()},No.$metadata$={kind:p,simpleName:"StringSerializer",interfaces:[Gl]};var Eo,Po,To,Oo,Mo,jo,Ao,Ro,Io,Lo,Do,qo,Bo,Fo,Uo,Vo,Go,Ho,Wo,Ko,Xo,Yo,Zo,Jo,Qo,ts,es,is=null;function ns(){return null===is&&new No,is}function rs(){}function os(){this.tagStack_cfsfm$_0=b()}function ss(t){void 0===t&&(t=""),os.call(this),this.rootName=t}function as(){this.updateMode_cp3ftw$_0=Zl(),this.tagStack_h2rpra$_0=b(),this.flag_kguhq4$_0=!1}function ls(t){void 0===t&&(t=""),as.call(this),this.rootName=t}function us(t,e){this.keySerializer=t,this.valueSerializer=e}function ps(t,e){var i,n;us.call(this,t,e),this.descriptor_cnmk75$_0=ci("kotlin.collections.Map.Entry",sn(),[],(i=t,n=e,function(t){return t.element_vxrguq$("key",i.descriptor),t.element_vxrguq$("value",n.descriptor),l}))}function cs(t,e){this.key_7uv6mv$_0=t,this.value_gjenjd$_0=e}function hs(t,e){var i,n;us.call(this,t,e),this.descriptor_utc4rp$_0=li("kotlin.Pair",[],(i=t,n=e,function(t){return t.element_vxrguq$("first",i.descriptor),t.element_vxrguq$("second",n.descriptor),l}))}function ds(t,e,i){var n;this.aSerializer_0=t,this.bSerializer_0=e,this.cSerializer_0=i,this.descriptor_73a6vr$_0=li("kotlin.Triple",[],(n=this,function(t){return t.element_vxrguq$("first",n.aSerializer_0.descriptor),t.element_vxrguq$("second",n.bSerializer_0.descriptor),t.element_vxrguq$("third",n.cSerializer_0.descriptor),l}))}function fs(t,e,i,n,r,o,s,a,l,u,p){void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o="    "),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===l&&(l="type"),void 0===u&&(u=!1),void 0===p&&(p=Rl),this.encodeDefaults=t,this.ignoreUnknownKeys=e,this.isLenient=i,this.allowStructuredMapKeys=n,this.prettyPrint=r,this.prettyPrintIndent=o,this.coerceInputValues=s,this.useArrayPolymorphism=a,this.classDiscriminator=l,this.allowSpecialFloatingPointValues=u,this.serializersModule=p}function _s(t){pu(t,this),this.name="JsonException"}function ms(t,e){_s.call(this,t>=0?"Unexpected JSON token at offset "+t+": "+e:e),this.name="JsonDecodingException"}function $s(t){_s.call(this,t),this.name="JsonEncodingException"}function ys(t,e,i){return new ms(t,e+"\nJSON input: "+Ss(i,t))}function vs(t,e){return new $s("Unexpected special floating-point value "+t.toString()+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+Ss(e))}function gs(t,e,i){return new $s(ws(t,e,i))}function bs(t,e,i){return new ms(-1,ws(t,e,i))}function xs(t,e){t.fail_bm4lxs$("Unexpected special floating-point value "+e.toString()+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. "+To)}function ws(t,e,i){return"Unexpected special floating-point value "+t.toString()+" with key "+e+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+Ss(i)}function zs(t,e){return new ms(-1,"Encountered unknown key '"+t+"'.\nUse 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.\nCurrent input: "+Ss(e))}function ks(t){return new $s("Value of type '"+t.serialName+"' can't be used in JSON as a key in the map. It should have either primitive or enum kind, but its kind is '"+t.kind+"'.\n"+Mo)}function Ss(t,e){if(void 0===e&&(e=-1),t.length<200)return t;if(-1===e){var i=t.length-60|0;return i<=0?t:"....."+t.substring(i)}var n=e-30|0,r=e+30|0,o=n<=0?"":".....",s=r>=t.length?"":".....",a=lt(n,0),l=Gt(r,t.length);return o+t.substring(a,l)+s}function Cs(t,e){this.reader_0=e,this.isLenient_0=t.isLenient}function Ns(){As=this,this.ESCAPE_2_CHAR=e.charArray(117);for(var t=0;t<=31;t++)this.initC2ESC_0(t,Vo);this.initC2ESC_0(8,98),this.initC2ESC_0(9,116),this.initC2ESC_0(10,110),this.initC2ESC_0(12,102),this.initC2ESC_0(13,114),this.initC2ESC_1(47,47),this.initC2ESC_1(Bo,Bo),this.initC2ESC_1(Fo,Fo)}Object.defineProperty(os.prototype,"serializersModule",{configurable:!0,get:function(){return Rl}}),os.prototype.encodeTaggedValue_dpg7wc$=function(t,i){throw pu("Non-serializable "+e.getKClassFromExpression(i)+" is not supported by "+e.getKClassFromExpression(this)+" encoder")},os.prototype.encodeTaggedNotNullMark_11rb$=function(t){},os.prototype.encodeTaggedNull_11rb$=function(t){throw pu("null is not supported")},os.prototype.encodeTaggedInt_dpg1yx$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedByte_19qe40$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedShort_veccj0$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedLong_19wkf8$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedFloat_vlf4p8$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedDouble_e37ph5$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedBoolean_iuyhfk$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedChar_19qo1q$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,I(e))},os.prototype.encodeTaggedString_l9l8mx$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedEnum_4xdzqf$=function(t,e,i){this.encodeTaggedValue_dpg7wc$(t,i)},os.prototype.encodeElement_qp90hq$_0=function(t,e){var i=this.getTag_av9bu7$(t,e);return this.pushTag_11rb$(i),!0},os.prototype.encodeNotNullMark=function(){this.encodeTaggedNotNullMark_11rb$(this.currentTag)},os.prototype.encodeNull=function(){this.encodeTaggedNull_11rb$(this.popTag())},os.prototype.encodeBoolean_6taknv$=function(t){this.encodeTaggedBoolean_iuyhfk$(this.popTag(),t)},os.prototype.encodeByte_s8j3t7$=function(t){this.encodeTaggedByte_19qe40$(this.popTag(),t)},os.prototype.encodeShort_mq22fl$=function(t){this.encodeTaggedShort_veccj0$(this.popTag(),t)},os.prototype.encodeInt_za3lpa$=function(t){this.encodeTaggedInt_dpg1yx$(this.popTag(),t)},os.prototype.encodeLong_s8cxhz$=function(t){this.encodeTaggedLong_19wkf8$(this.popTag(),t)},os.prototype.encodeFloat_mx4ult$=function(t){this.encodeTaggedFloat_vlf4p8$(this.popTag(),t)},os.prototype.encodeDouble_14dthe$=function(t){this.encodeTaggedDouble_e37ph5$(this.popTag(),t)},os.prototype.encodeChar_s8itvh$=function(t){this.encodeTaggedChar_19qo1q$(this.popTag(),t)},os.prototype.encodeString_61zpoe$=function(t){this.encodeTaggedString_l9l8mx$(this.popTag(),t)},os.prototype.encodeEnum_szpzho$=function(t,e){this.encodeTaggedEnum_4xdzqf$(this.popTag(),t,e)},os.prototype.beginStructure_jvp2sb$=function(t,e){return this},os.prototype.endStructure_24f42q$=function(t){this.tagStack_cfsfm$_0.isEmpty()||this.popTag(),this.endEncode_24f42q$(t)},os.prototype.endEncode_24f42q$=function(t){},os.prototype.encodeBooleanElement_qh7jdn$=function(t,e,i){this.encodeTaggedBoolean_iuyhfk$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeByteElement_j0u8y3$=function(t,e,i){this.encodeTaggedByte_19qe40$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeShortElement_l83pjl$=function(t,e,i){this.encodeTaggedShort_veccj0$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeIntElement_ptg7oe$=function(t,e,i){this.encodeTaggedInt_dpg1yx$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeLongElement_j0o2mv$=function(t,e,i){this.encodeTaggedLong_19wkf8$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeFloatElement_lf6hpt$=function(t,e,i){this.encodeTaggedFloat_vlf4p8$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeDoubleElement_powrwi$=function(t,e,i){this.encodeTaggedDouble_e37ph5$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeCharElement_j0tz0d$=function(t,e,i){this.encodeTaggedChar_19qo1q$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeStringElement_iij8qq$=function(t,e,i){this.encodeTaggedString_l9l8mx$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeSerializableElement_r4qlx7$=function(t,e,i,n){this.encodeElement_qp90hq$_0(t,e)&&this.encodeSerializableValue_tf03ej$(i,n)},os.prototype.encodeNullableSerializableElement_qw92s8$=function(t,e,i,n){this.encodeElement_qp90hq$_0(t,e)&&this.encodeNullableSerializableValue_f4686g$(i,n)},Object.defineProperty(os.prototype,"currentTag",{configurable:!0,get:function(){return qt(this.tagStack_cfsfm$_0)}}),Object.defineProperty(os.prototype,"currentTagOrNull",{configurable:!0,get:function(){return Bt(this.tagStack_cfsfm$_0)}}),os.prototype.pushTag_11rb$=function(t){this.tagStack_cfsfm$_0.add_11rb$(t)},os.prototype.popTag=function(){if(this.tagStack_cfsfm$_0.isEmpty())throw pu("No tag in stack for requested element");return this.tagStack_cfsfm$_0.removeAt_za3lpa$(Ft(this.tagStack_cfsfm$_0))},os.$metadata$={kind:n,simpleName:"TaggedEncoder",interfaces:[On,Tn]},ss.prototype.getTag_av9bu7$=function(t,e){return this.nested_61zpoe$(this.elementName_szpzho$(t,e))},ss.prototype.nested_61zpoe$=function(t){var e;return this.composeName_puj7f4$(null!=(e=this.currentTagOrNull)?e:this.rootName,t)},ss.prototype.elementName_szpzho$=function(t,e){return t.getElementName_za3lpa$(e)},ss.prototype.composeName_puj7f4$=function(t,e){return 0===t.length?e:t+"."+e},ss.$metadata$={kind:n,simpleName:"NamedValueEncoder",interfaces:[os]},Object.defineProperty(as.prototype,"serializersModule",{configurable:!0,get:function(){return Rl}}),Object.defineProperty(as.prototype,"updateMode",{configurable:!0,get:function(){return this.updateMode_cp3ftw$_0}}),as.prototype.decodeTaggedValue_11rb$=function(t){throw pu(e.getKClassFromExpression(this).toString()+" can't retrieve untyped values")},as.prototype.decodeTaggedNotNullMark_11rb$=function(t){return!0},as.prototype.decodeTaggedNull_11rb$=function(t){return null},as.prototype.decodeTaggedBoolean_11rb$=function(t){var e;return"boolean"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedByte_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedShort_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedInt_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedLong_11rb$=function(t){var i;return e.isType(i=this.decodeTaggedValue_11rb$(t),e.Long)?i:o()},as.prototype.decodeTaggedFloat_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedDouble_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedChar_11rb$=function(t){var i;return e.isChar(i=this.decodeTaggedValue_11rb$(t))?i:o()},as.prototype.decodeTaggedString_11rb$=function(t){var e;return"string"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedEnum_gaombr$=function(t,e){var i;return"number"==typeof(i=this.decodeTaggedValue_11rb$(t))?i:o()},as.prototype.decodeSerializableValue_19c8k5$=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},as.prototype.decodeNotNullMark=function(){return this.decodeTaggedNotNullMark_11rb$(this.currentTag)},as.prototype.decodeNull=function(){return null},as.prototype.decodeBoolean=function(){return this.decodeTaggedBoolean_11rb$(this.popTag())},as.prototype.decodeByte=function(){return this.decodeTaggedByte_11rb$(this.popTag())},as.prototype.decodeShort=function(){return this.decodeTaggedShort_11rb$(this.popTag())},as.prototype.decodeInt=function(){return this.decodeTaggedInt_11rb$(this.popTag())},as.prototype.decodeLong=function(){return this.decodeTaggedLong_11rb$(this.popTag())},as.prototype.decodeFloat=function(){return this.decodeTaggedFloat_11rb$(this.popTag())},as.prototype.decodeDouble=function(){return this.decodeTaggedDouble_11rb$(this.popTag())},as.prototype.decodeChar=function(){return this.decodeTaggedChar_11rb$(this.popTag())},as.prototype.decodeString=function(){return this.decodeTaggedString_11rb$(this.popTag())},as.prototype.decodeEnum_24f42q$=function(t){return this.decodeTaggedEnum_gaombr$(this.popTag(),t)},as.prototype.beginStructure_jvp2sb$=function(t,e){return this},as.prototype.endStructure_24f42q$=function(t){},as.prototype.decodeBooleanElement_szpzho$=function(t,e){return this.decodeTaggedBoolean_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeByteElement_szpzho$=function(t,e){return this.decodeTaggedByte_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeShortElement_szpzho$=function(t,e){return this.decodeTaggedShort_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeIntElement_szpzho$=function(t,e){return this.decodeTaggedInt_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeLongElement_szpzho$=function(t,e){return this.decodeTaggedLong_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeFloatElement_szpzho$=function(t,e){return this.decodeTaggedFloat_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeDoubleElement_szpzho$=function(t,e){return this.decodeTaggedDouble_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeCharElement_szpzho$=function(t,e){return this.decodeTaggedChar_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeStringElement_szpzho$=function(t,e){return this.decodeTaggedString_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.tagBlock_lngyui$_0(this.getTag_av9bu7$(t,e),(r=i,o=n,s=this,function(){return s.decodeSerializableValue_19c8k5$(r,o)}));var r,o,s},as.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return this.tagBlock_lngyui$_0(this.getTag_av9bu7$(t,e),(r=this,o=i,s=n,function(){return r.decodeNotNullMark()?r.decodeSerializableValue_19c8k5$(o,s):r.decodeNull()}));var r,o,s},as.prototype.tagBlock_lngyui$_0=function(t,e){this.pushTag_11rb$(t);var i=e();return this.flag_kguhq4$_0||this.popTag(),this.flag_kguhq4$_0=!1,i},Object.defineProperty(as.prototype,"currentTag",{configurable:!0,get:function(){return qt(this.tagStack_h2rpra$_0)}}),Object.defineProperty(as.prototype,"currentTagOrNull",{configurable:!0,get:function(){return Bt(this.tagStack_h2rpra$_0)}}),as.prototype.pushTag_11rb$=function(t){this.tagStack_h2rpra$_0.add_11rb$(t)},as.prototype.copyTagsTo_lgvuxj$=function(t){t.tagStack_h2rpra$_0.addAll_brywnq$(this.tagStack_h2rpra$_0)},as.prototype.popTag=function(){var t=this.tagStack_h2rpra$_0.removeAt_za3lpa$(Ft(this.tagStack_h2rpra$_0));return this.flag_kguhq4$_0=!0,t},as.$metadata$={kind:n,simpleName:"TaggedDecoder",interfaces:[vn,yn]},ls.prototype.getTag_av9bu7$=function(t,e){return this.nested_61zpoe$(this.elementName_szpzho$(t,e))},ls.prototype.nested_61zpoe$=function(t){var e;return this.composeName_puj7f4$(null!=(e=this.currentTagOrNull)?e:this.rootName,t)},ls.prototype.elementName_szpzho$=function(t,e){return t.getElementName_za3lpa$(e)},ls.prototype.composeName_puj7f4$=function(t,e){return 0===t.length?e:t+"."+e},ls.$metadata$={kind:n,simpleName:"NamedValueDecoder",interfaces:[as]},us.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,this.keySerializer,this.get_key_wili$(e)),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,this.valueSerializer,this.get_value_wili$(e)),i.endStructure_24f42q$(this.descriptor)},us.prototype.deserialize_bq71mq$=function(t){var i,n,r=t.beginStructure_24f42q$(this.descriptor);if(r.decodeSequentially()){var s=r.decodeSerializableElement_12e8id$(this.descriptor,0,this.keySerializer),a=r.decodeSerializableElement_12e8id$(this.descriptor,1,this.valueSerializer);return this.toResult_xwzc9p$(s,a)}var l=Eo,u=Eo;t:for(;;){var p=r.decodeElementIndex_24f42q$(this.descriptor);switch(p){case-1:break t;case 0:l=r.decodeSerializableElement_12e8id$(this.descriptor,0,this.keySerializer);break;case 1:u=r.decodeSerializableElement_12e8id$(this.descriptor,1,this.valueSerializer);break;default:throw pu("Invalid index: "+p)}}if(r.endStructure_24f42q$(this.descriptor),l===Eo)throw pu("Element 'key' is missing");if(u===Eo)throw pu("Element 'value' is missing");return this.toResult_xwzc9p$(null==(i=l)||e.isType(i,L)?i:o(),null==(n=u)||e.isType(n,L)?n:o())},us.$metadata$={kind:n,simpleName:"KeyValueSerializer",interfaces:[Gl]},Object.defineProperty(cs.prototype,"key",{get:function(){return this.key_7uv6mv$_0}}),Object.defineProperty(cs.prototype,"value",{get:function(){return this.value_gjenjd$_0}}),cs.$metadata$={kind:n,simpleName:"MapEntry",interfaces:[Ut]},cs.prototype.component1=function(){return this.key},cs.prototype.component2=function(){return this.value},cs.prototype.copy_xwzc9p$=function(t,e){return new cs(void 0===t?this.key:t,void 0===e?this.value:e)},cs.prototype.toString=function(){return"MapEntry(key="+e.toString(this.key)+", value="+e.toString(this.value)+")"},cs.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.key)|0)+e.hashCode(this.value)|0},cs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.key,t.key)&&e.equals(this.value,t.value)},Object.defineProperty(ps.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_cnmk75$_0}}),ps.prototype.get_key_wili$=function(t){return t.key},ps.prototype.get_value_wili$=function(t){return t.value},ps.prototype.toResult_xwzc9p$=function(t,e){return new cs(t,e)},ps.$metadata$={kind:n,simpleName:"MapEntrySerializer",interfaces:[us]},Object.defineProperty(hs.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_utc4rp$_0}}),hs.prototype.get_key_wili$=function(t){return t.first},hs.prototype.get_value_wili$=function(t){return t.second},hs.prototype.toResult_xwzc9p$=function(t,e){return N(t,e)},hs.$metadata$={kind:n,simpleName:"PairSerializer",interfaces:[us]},Object.defineProperty(ds.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_73a6vr$_0}}),ds.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,this.aSerializer_0,e.first),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,this.bSerializer_0,e.second),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,this.cSerializer_0,e.third),i.endStructure_24f42q$(this.descriptor)},ds.prototype.deserialize_bq71mq$=function(t){var e=t.beginStructure_24f42q$(this.descriptor);return e.decodeSequentially()?this.decodeSequentially_0(e):this.decodeStructure_0(e)},ds.prototype.decodeSequentially_0=function(t){var e=t.decodeSerializableElement_12e8id$(this.descriptor,0,this.aSerializer_0),i=t.decodeSerializableElement_12e8id$(this.descriptor,1,this.bSerializer_0),n=t.decodeSerializableElement_12e8id$(this.descriptor,2,this.cSerializer_0);return t.endStructure_24f42q$(this.descriptor),new Vt(e,i,n)},ds.prototype.decodeStructure_0=function(t){var i,n,r,s=Eo,a=Eo,l=Eo;t:for(;;){var u=t.decodeElementIndex_24f42q$(this.descriptor);switch(u){case-1:break t;case 0:s=t.decodeSerializableElement_12e8id$(this.descriptor,0,this.aSerializer_0);break;case 1:a=t.decodeSerializableElement_12e8id$(this.descriptor,1,this.bSerializer_0);break;case 2:l=t.decodeSerializableElement_12e8id$(this.descriptor,2,this.cSerializer_0);break;default:throw pu("Unexpected index "+u)}}if(t.endStructure_24f42q$(this.descriptor),s===Eo)throw pu("Element 'first' is missing");if(a===Eo)throw pu("Element 'second' is missing");if(l===Eo)throw pu("Element 'third' is missing");return new Vt(null==(i=s)||e.isType(i,L)?i:o(),null==(n=a)||e.isType(n,L)?n:o(),null==(r=l)||e.isType(r,L)?r:o())},ds.$metadata$={kind:n,simpleName:"TripleSerializer",interfaces:[Gl]},fs.$metadata$={kind:n,simpleName:"JsonConf",interfaces:[]},fs.prototype.component1=function(){return this.encodeDefaults},fs.prototype.component2=function(){return this.ignoreUnknownKeys},fs.prototype.component3=function(){return this.isLenient},fs.prototype.component4=function(){return this.allowStructuredMapKeys},fs.prototype.component5=function(){return this.prettyPrint},fs.prototype.component6=function(){return this.prettyPrintIndent},fs.prototype.component7=function(){return this.coerceInputValues},fs.prototype.component8=function(){return this.useArrayPolymorphism},fs.prototype.component9=function(){return this.classDiscriminator},fs.prototype.component10=function(){return this.allowSpecialFloatingPointValues},fs.prototype.component11=function(){return this.serializersModule},fs.prototype.copy_2joh8z$=function(t,e,i,n,r,o,s,a,l,u,p){return new fs(void 0===t?this.encodeDefaults:t,void 0===e?this.ignoreUnknownKeys:e,void 0===i?this.isLenient:i,void 0===n?this.allowStructuredMapKeys:n,void 0===r?this.prettyPrint:r,void 0===o?this.prettyPrintIndent:o,void 0===s?this.coerceInputValues:s,void 0===a?this.useArrayPolymorphism:a,void 0===l?this.classDiscriminator:l,void 0===u?this.allowSpecialFloatingPointValues:u,void 0===p?this.serializersModule:p)},fs.prototype.toString=function(){return"JsonConf(encodeDefaults="+e.toString(this.encodeDefaults)+", ignoreUnknownKeys="+e.toString(this.ignoreUnknownKeys)+", isLenient="+e.toString(this.isLenient)+", allowStructuredMapKeys="+e.toString(this.allowStructuredMapKeys)+", prettyPrint="+e.toString(this.prettyPrint)+", prettyPrintIndent="+e.toString(this.prettyPrintIndent)+", coerceInputValues="+e.toString(this.coerceInputValues)+", useArrayPolymorphism="+e.toString(this.useArrayPolymorphism)+", classDiscriminator="+e.toString(this.classDiscriminator)+", allowSpecialFloatingPointValues="+e.toString(this.allowSpecialFloatingPointValues)+", serializersModule="+e.toString(this.serializersModule)+")"},fs.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.encodeDefaults)|0)+e.hashCode(this.ignoreUnknownKeys)|0)+e.hashCode(this.isLenient)|0)+e.hashCode(this.allowStructuredMapKeys)|0)+e.hashCode(this.prettyPrint)|0)+e.hashCode(this.prettyPrintIndent)|0)+e.hashCode(this.coerceInputValues)|0)+e.hashCode(this.useArrayPolymorphism)|0)+e.hashCode(this.classDiscriminator)|0)+e.hashCode(this.allowSpecialFloatingPointValues)|0)+e.hashCode(this.serializersModule)|0},fs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.encodeDefaults,t.encodeDefaults)&&e.equals(this.ignoreUnknownKeys,t.ignoreUnknownKeys)&&e.equals(this.isLenient,t.isLenient)&&e.equals(this.allowStructuredMapKeys,t.allowStructuredMapKeys)&&e.equals(this.prettyPrint,t.prettyPrint)&&e.equals(this.prettyPrintIndent,t.prettyPrintIndent)&&e.equals(this.coerceInputValues,t.coerceInputValues)&&e.equals(this.useArrayPolymorphism,t.useArrayPolymorphism)&&e.equals(this.classDiscriminator,t.classDiscriminator)&&e.equals(this.allowSpecialFloatingPointValues,t.allowSpecialFloatingPointValues)&&e.equals(this.serializersModule,t.serializersModule)},_s.$metadata$={kind:n,simpleName:"JsonException",interfaces:[uu]},ms.$metadata$={kind:n,simpleName:"JsonDecodingException",interfaces:[_s]},$s.$metadata$={kind:n,simpleName:"JsonEncodingException",interfaces:[_s]},Cs.prototype.readObject_0=function(){var t=this.reader_0;t.tokenClass!==Xo&&(I(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected start of the object",t.tokenPosition_0)),this.reader_0.nextToken();var e=this.reader_0,i=this.reader_0.tokenClass!==Wo,n=this.reader_0.currentPosition;i||e.fail_bm4lxs$("Unexpected leading comma",n);for(var r=K(),o=!1;this.reader_0.canBeginValue;){o=!1;var s=this.isLenient_0?this.reader_0.takeString():this.reader_0.takeStringQuoted(),a=this.reader_0;a.tokenClass!==Ko&&(I(Ht(a.tokenClass)),a.fail_bm4lxs$("Expected ':'",a.tokenPosition_0)),this.reader_0.nextToken();var l=this.read();if(r.put_xwzc9p$(s,l),this.reader_0.tokenClass!==Wo){var u=this.reader_0;u.tokenClass!==Yo&&(I(Ht(u.tokenClass)),u.fail_bm4lxs$("Expected end of the object or comma",u.tokenPosition_0))}else o=!0,this.reader_0.nextToken()}var p=this.reader_0,c=!o&&this.reader_0.tokenClass===Yo,h=this.reader_0.currentPosition;return c||p.fail_bm4lxs$("Expected end of the object",h),this.reader_0.nextToken(),new Ha(r)},Cs.prototype.readArray_0=function(){var t=this.reader_0;t.tokenClass!==Zo&&(I(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected start of the array",t.tokenPosition_0)),this.reader_0.nextToken();var e=this.reader_0,i=this.reader_0.tokenClass!==Wo,n=this.reader_0.currentPosition;i||e.fail_bm4lxs$("Unexpected leading comma",n);for(var r=b(),o=!1;this.reader_0.canBeginValue;){o=!1;var s=this.read();if(r.add_11rb$(s),this.reader_0.tokenClass!==Wo){var a=this.reader_0;a.tokenClass!==Jo&&(I(Ht(a.tokenClass)),a.fail_bm4lxs$("Expected end of the array or comma",a.tokenPosition_0))}else o=!0,this.reader_0.nextToken()}var l=this.reader_0,u=!o,p=this.reader_0.currentPosition;return u||l.fail_bm4lxs$("Unexpected trailing comma",p),this.reader_0.nextToken(),new Za(r)},Cs.prototype.readValue_0=function(t){return new Fa(this.isLenient_0?this.reader_0.takeString():t?this.reader_0.takeStringQuoted():this.reader_0.takeString(),t)},Cs.prototype.read=function(){var t;switch(this.reader_0.canBeginValue||this.reader_0.fail_bm4lxs$("Can't begin reading value from here"),this.reader_0.tokenClass){case 10:var e=Ga();this.reader_0.nextToken(),t=e;break;case 1:t=this.readValue_0(!0);break;case 0:t=this.readValue_0(!1);break;case 6:t=this.readObject_0();break;case 8:t=this.readArray_0();break;default:t=this.reader_0.fail_bm4lxs$("Can't begin reading element, unexpected token")}return t},Cs.$metadata$={kind:n,simpleName:"JsonParser",interfaces:[]},Ns.prototype.initC2ESC_0=function(t,e){e!==Vo&&(this.ESCAPE_2_CHAR[0|e]=Ht(t))},Ns.prototype.initC2ESC_1=function(t,e){this.initC2ESC_0(0|t,e)},Ns.$metadata$={kind:p,simpleName:"EscapeCharMappings",interfaces:[]};var Es,Ps,Ts,Os,Ms,js,As=null;function Rs(){return null===As&&new Ns,As}function Is(t,e,i){t[e]=i}function Ls(t,e,i){Is(t,0|e,i)}function Ds(t){return(0|t)<126?es[0|t]:Go}function qs(t){return _t(t<117?Rs().ESCAPE_2_CHAR[t]:Uo)}function Bs(t){this.source_0=t,this.currentPosition=0,this.tokenClass=ts,this.tokenPosition_0=0,this.offset_0=-1,this.length_0=0,this.buf_0=e.charArray(16),this.nextToken()}function Fs(t,i,n){var r,s,a=e.isType(r=i,Mn)?r:o(),l=nu(a,t,e.isType(s=n,L)?s:o());return function(t,i,n){if(e.isType(t,ou)&&lr(i.descriptor).contains_11rb$(n)){var r=t.descriptor.serialName,o=i.descriptor.serialName;throw R(("Sealed class '"+o+"' cannot be serialized as base class '"+r+"' because it has property name that conflicts with JSON class discriminator '"+n+"'. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism").toString())}}(a,l,t.json.configuration_8be2vx$.classDiscriminator),Us(l.descriptor.kind),l}function Us(t){if(e.isType(t,mi))throw R("Enums cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead".toString());if(e.isType(t,xi))throw R("Primitives cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead".toString());if(e.isType(t,pn))throw R("Actual serializer for polymorphic cannot be polymorphic itself".toString())}function Vs(t,n){var r,s,a,l;if(!e.isType(n,Mn)||t.json.configuration_8be2vx$.useArrayPolymorphism)return n.deserialize_bq71mq$(t);var u=t.decodeJsonElement(),p=n.descriptor;if(!e.isType(u,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+p.serialName+", but had "+e.getKClassFromExpression(u));var c,h,d=u,_=t.json.configuration_8be2vx$.classDiscriminator,m=null!=(s=null!=(r=d.get_11rb$(_))?el(r):null)?s.content:null;c=null!=(a=n.findPolymorphicSerializerOrNull_ca6uye$(t,m))?e.isType(h=a,Wl)?h:o():null;var $=null!=(l=c)?l:function(t,e){throw ys(-1,"Polymorphic serializer was not found for "+(null==t?"missing class discriminator ('null')":"class discriminator '"+f(t)+"'"),e.toString())}(m,d);return ea(t.json,_,d,$)}function Gs(t,e){this.useArrayPolymorphism_0=t,this.discriminator_0=e}function Hs(t,e,i){mn.call(this),this.json_n7tmf6$_0=t,this.mode_0=e,this.reader_8be2vx$=i,this.serializersModule_5carun$_0=this.json.serializersModule,this.currentIndex_0=-1,this.configuration_0=this.json.configuration_8be2vx$}function Ws(t,e,i,n){$n.call(this),this.composer_0=t,this.json_8uu1uy$_0=e,this.mode_0=i,this.modeReuseCache_0=n,this.serializersModule_tvtxsn$_0=this.json.serializersModule,this.configuration_0=this.json.configuration_8be2vx$,this.forceQuoting_0=!1,this.writePolymorphic_0=!1;var r=this.mode_0.ordinal;null===this.modeReuseCache_0[r]&&this.modeReuseCache_0[r]===this||(this.modeReuseCache_0[r]=this)}function Ks(t,e){this.sb_8be2vx$=t,this.json_0=e,this.level_0=0,this.writingFirst_4lagic$_0=!0}function Xs(t,e,i,n,r){return r=r||Object.create(Ws.prototype),Ws.call(r,new Ks(t,e),e,i,n),r}function Ys(t){var e=15&t;return Ht(e<10?e+48|0:e-10+97|0)}function Zs(t,e){var i;t.append_s8itvh$(Bo);for(var n=0,r=e.length,o=0;o<r;o++){var s=0|e.charCodeAt(o);if(!(s>=Es.length)&&null!=(i=Es[s])){var a=i;t.append_ezbsdh$(e,n,o),t.append_pdl1vj$(a),n=o+1|0}}t.append_ezbsdh$(e,n,r),t.append_s8itvh$(Bo)}function Js(t){var e;if(null==(e=Qs(t)))throw R(t+" does not represent a Boolean");return e}function Qs(t){return!!Lt(t,"true",!0)||!Lt(t,"false",!0)&&null}function ta(t,i,n){var r;return(e.isType(i,Ha)?new ra(t,i):e.isType(i,Za)?new sa(t,i):e.isType(i,Fa)||h(i,Ga())?new na(t,e.isType(r=i,Aa)?r:o()):e.noWhenBranchMatched()).decodeSerializableValue_w63s0f$(n)}function ea(t,e,i,n){return new ra(t,i,e,n.descriptor).decodeSerializableValue_w63s0f$(n)}function ia(t,e){ls.call(this),this.json_nf7dq8$_0=t,this.value_admuh1$_0=e,this.configuration_0=this.json.configuration_8be2vx$}function na(t,e){ia.call(this,t,e),this.value_icegni$_0=e,this.pushTag_11rb$(Ps)}function ra(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),ia.call(this,t,e),this.value_nyd9q1$_0=e,this.polyDiscriminator_0=i,this.polyDescriptor_0=n,this.position_0=0}function oa(t,e){ra.call(this,t,e),this.value_ozc1lj$_0=e,this.keys_0=re(this.value.keys),this.size_0=2*this.keys_0.size|0,this.position_1=-1}function sa(t,e){ia.call(this,t,e),this.value_z81zg7$_0=e,this.size_0=this.value.size,this.currentIndex_0=-1}function aa(t,e,i){var n,r={v:null};return new pa(t,(n=r,function(t){return n.v=t,l})).encodeSerializableValue_tf03ej$(i,e),null==r.v?se("result"):r.v}function la(t,e){ss.call(this),this.json_927t60$_0=t,this.nodeConsumer=e,this.configuration_0=this.json.configuration_8be2vx$,this.writePolymorphic_0=!1}function ua(t,e){la.call(this,t,e),this.content_0=null,this.pushTag_11rb$(Ps)}function pa(t,e){la.call(this,t,e),this.content_0=K()}function ca(t,e){pa.call(this,t,e),this.tag_s622uw$_0=this.tag_s622uw$_0,this.isKey_0=!0}function ha(t,e){la.call(this,t,e),this.array_0=b()}function da(t,e,i,n){ae.call(this),this.begin=I(i),this.end=I(n),this.name$=t,this.ordinal$=e,this.beginTc=Ds(_t(this.begin)),this.endTc=Ds(_t(this.end))}function fa(){fa=function(){},Ts=new da("OBJ",0,Io,Lo),Os=new da("LIST",1,Do,qo),Ms=new da("MAP",2,Io,Lo),js=new da("POLY_OBJ",3,Do,qo)}function _a(){return fa(),Ts}function ma(){return fa(),Os}function $a(){return fa(),Ms}function ya(){return fa(),js}function va(){return[_a(),ma(),$a(),ya()]}function ga(t,i){var n;if(n=i.kind,e.isType(n,pn))return ya();if(h(n,nn()))return ma();if(h(n,sn())){var r,o=i.getElementDescriptor_za3lpa$(0),s=o.kind;if(e.isType(s,xi)||h(s,_i.ENUM))r=$a();else{if(!t.configuration_8be2vx$.allowStructuredMapKeys)throw ks(o);r=ma()}return r}return _a()}function ba(t){Sa(),this.configuration_8be2vx$=t}function xa(){ka=this,ba.call(this,new fs)}Object.defineProperty(Bs.prototype,"isDone",{configurable:!0,get:function(){return this.tokenClass===ts}}),Object.defineProperty(Bs.prototype,"canBeginValue",{configurable:!0,get:function(){switch(this.tokenClass){case 8:case 6:case 0:case 1:case 10:return!0;default:return!1}}}),Bs.prototype.requireTokenClass_mvfnf3$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.json.internal.JsonReader.requireTokenClass_mvfnf3$",a((function(){var t=e.toChar,i=e.toBoxedChar;return function(e,n){this.tokenClass!==e&&this.fail_bm4lxs$(n(i(t(this.tokenClass))),this.tokenPosition_0)}}))),Bs.prototype.takeString=function(){return this.tokenClass!==Go&&this.tokenClass!==Ho&&this.fail_bm4lxs$("Expected string or non-null literal",this.tokenPosition_0),this.takeStringInternal_0()},Bs.prototype.peekString_6taknv$=function(t){return this.tokenClass===Ho||t&&this.tokenClass===Go?this.takeStringInternal_0(!1):null},Bs.prototype.takeStringQuoted=function(){switch(this.tokenClass){case 1:break;case 10:this.fail_bm4lxs$("Expected string literal but 'null' literal was found.\nUse 'coerceInputValues = true' in 'Json {}` builder to coerce nulls to default values.",this.tokenPosition_0);break;default:this.fail_bm4lxs$("Expected string literal with quotes.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",this.tokenPosition_0)}return this.takeStringInternal_0()},Bs.prototype.takeBooleanStringUnquoted=function(){return this.tokenClass!==Go&&this.fail_bm4lxs$("Expected start of the unquoted boolean literal.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",this.tokenPosition_0),this.takeStringInternal_0()},Bs.prototype.takeStringInternal_0=function(t){var e;if(void 0===t&&(t=!0),this.offset_0<0)e=Wt(this.buf_0,0,0+this.length_0|0);else{var i=this.source_0,n=this.offset_0,r=this.offset_0+this.length_0|0;e=i.substring(n,r)}var o=e;return t&&this.nextToken(),o},Bs.prototype.append_0=function(t){var e;this.length_0>=this.buf_0.length&&(this.buf_0=mt(this.buf_0,2*this.buf_0.length|0)),this.buf_0[(e=this.length_0,this.length_0=e+1|0,e)]=t},Bs.prototype.appendRange_0=function(t,e,i){var n=i-e|0,r=this.length_0,o=r+n|0;o>this.buf_0.length&&(this.buf_0=mt(this.buf_0,lt(o,2*this.buf_0.length|0)));for(var s=0;s<n;s++)this.buf_0[r+s|0]=t.charCodeAt(e+s|0);this.length_0=this.length_0+n|0},Bs.prototype.nextToken=function(){for(var t=this.source_0,e=this.currentPosition;e<t.length;){var i=Ds(t.charCodeAt(e));switch(i){case 3:e=e+1|0;break;case 0:return void this.nextLiteral_0(t,e);case 1:return void this.nextString_0(t,e);default:return this.tokenPosition_0=e,this.tokenClass=i,void(this.currentPosition=e+1|0)}}this.tokenPosition_0=e,this.tokenClass=ts},Bs.prototype.nextLiteral_0=function(t,e){this.tokenPosition_0=e,this.offset_0=e;for(var i=e;i<t.length&&Ds(t.charCodeAt(i))===Go;)i=i+1|0;this.currentPosition=i,this.length_0=i-this.offset_0|0,this.tokenClass=function(t,e,i,n){var r=n.length;if(i!==r)return!1;for(var o=0;o<r;o++)if(t.charCodeAt(e+o|0)!==n.charCodeAt(o))return!1;return!0}(t,this.offset_0,this.length_0,jo)?Qo:Go},Bs.prototype.nextString_0=function(t,e){this.tokenPosition_0=e,this.length_0=0;for(var i=e+1|0,n=i;t.charCodeAt(i)!==Bo;)if(t.charCodeAt(i)===Fo){this.appendRange_0(t,n,i);var r=this.appendEsc_0(t,i+1|0);i=r,n=r}else(i=i+1|0)>=t.length&&this.fail_bm4lxs$("EOF",i);n===(e+1|0)?(this.offset_0=n,this.length_0=i-n|0):(this.appendRange_0(t,n,i),this.offset_0=-1),this.currentPosition=i+1|0,this.tokenClass=Ho},Bs.prototype.appendEsc_0=function(t,e){var i,n=e,r=n;n<t.length||this.fail_bm4lxs$("Unexpected EOF after escape character",r);var o=t.charCodeAt((n=(i=n)+1|0,i));if(o===Vo)return this.appendHex_0(t,n);var s=qs(0|o),a=n;return s!==Uo||this.fail_bm4lxs$("Invalid escaped char '"+String.fromCharCode(o)+"'",a),this.append_0(s),n},Bs.prototype.appendHex_0=function(t,e){var i,n,r,o,s=e;return this.append_0(Ht((this.fromHexChar_0(t,(s=(i=s)+1|0,i))<<12)+(this.fromHexChar_0(t,(s=(n=s)+1|0,n))<<8)+(this.fromHexChar_0(t,(s=(r=s)+1|0,r))<<4)+this.fromHexChar_0(t,(s=(o=s)+1|0,o))|0)),s},Bs.prototype.skipElement=function(){if(this.tokenClass===Xo||this.tokenClass===Zo){var t=b();do{switch(this.tokenClass){case 8:case 6:t.add_11rb$(this.tokenClass);break;case 9:if(qt(t)!==Zo)throw ys(this.currentPosition,"found ] instead of }",this.source_0);t.removeAt_za3lpa$(t.size-1|0);break;case 7:if(qt(t)!==Xo)throw ys(this.currentPosition,"found } instead of ]",this.source_0);t.removeAt_za3lpa$(t.size-1|0)}var e;this.nextToken(),e=!t.isEmpty()}while(e)}else this.nextToken()},Bs.prototype.toString=function(){return"JsonReader(source='"+this.source_0+"', currentPosition="+this.currentPosition+", tokenClass="+this.tokenClass+", tokenPosition="+this.tokenPosition_0+", offset="+this.offset_0+")"},Bs.prototype.fail_bm4lxs$=function(t,e){throw void 0===e&&(e=this.currentPosition),ys(e,t,this.source_0)},Bs.prototype.require_wqn2ds$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.json.internal.JsonReader.require_wqn2ds$",(function(t,e,i){void 0===e&&(e=this.currentPosition),t||this.fail_bm4lxs$(i(),e)})),Bs.prototype.fromHexChar_0=function(t,e){e<t.length||this.fail_bm4lxs$("Unexpected EOF during unicode escape",e);var i=t.charCodeAt(e);return new rt(48,57).contains_mef7kx$(i)?(0|i)-48|0:new rt(97,102).contains_mef7kx$(i)?(0|i)-97+10|0:new rt(65,70).contains_mef7kx$(i)?(0|i)-65+10|0:this.fail_bm4lxs$("Invalid toHexChar char '"+String.fromCharCode(i)+"' in unicode escape")},Bs.$metadata$={kind:n,simpleName:"JsonReader",interfaces:[]},Gs.prototype.contextual_cfhkba$=function(t,e){},Gs.prototype.polymorphic_kfyidi$=function(t,e,i){var n=i.descriptor;this.checkKind_0(n,e),this.useArrayPolymorphism_0||this.checkDiscriminatorCollisions_0(n,e)},Gs.prototype.checkKind_0=function(t,i){var n=t.kind;if(e.isType(n,pn)||h(n,bi()))throw O("Serializer for "+f(i.simpleName)+" can't be registered as a subclass for polymorphic serialization because its kind "+n+" is not concrete. To work with multiple hierarchies, register it as a base class.");if(!this.useArrayPolymorphism_0&&(h(n,nn())||h(n,sn())||e.isType(n,xi)||e.isType(n,mi)))throw O("Serializer for "+f(i.simpleName)+" of kind "+n+" cannot be serialized polymorphically with class discriminator.")},Gs.prototype.checkDiscriminatorCollisions_0=function(t,e){var i;i=t.elementsCount;for(var n=0;n<i;n++){var r=t.getElementName_za3lpa$(n);if(h(r,this.discriminator_0))throw O("Polymorphic serializer for "+e+" has property '"+r+"' that conflicts with JSON class discriminator. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism")}},Gs.prototype.polymorphicDefault_yd5wsm$=function(t,e){},Gs.$metadata$={kind:n,simpleName:"PolymorphismValidator",interfaces:[eu]},Object.defineProperty(Hs.prototype,"json",{get:function(){return this.json_n7tmf6$_0}}),Object.defineProperty(Hs.prototype,"serializersModule",{configurable:!0,get:function(){return this.serializersModule_5carun$_0}}),Object.defineProperty(Hs.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),Hs.prototype.decodeJsonElement=function(){return new Cs(this.json.configuration_8be2vx$,this.reader_8be2vx$).read()},Hs.prototype.decodeSerializableValue_w63s0f$=function(t){return Vs(this,t)},Hs.prototype.beginStructure_24f42q$=function(t){var e,i=ga(this.json,t);if(_t(i.begin)!==Uo){var n=this.reader_8be2vx$;n.tokenClass!==i.beginTc&&(I(Ht(n.tokenClass)),n.fail_bm4lxs$("Expected '"+String.fromCharCode(_t(i.begin))+", kind: "+t.kind+"'",n.tokenPosition_0)),this.reader_8be2vx$.nextToken()}switch(i.name){case"LIST":case"MAP":case"POLY_OBJ":e=new Hs(this.json,i,this.reader_8be2vx$);break;default:e=this.mode_0===i?this:new Hs(this.json,i,this.reader_8be2vx$)}return e},Hs.prototype.endStructure_24f42q$=function(t){if(_t(this.mode_0.end)!==Uo){var e=this.reader_8be2vx$;e.tokenClass!==this.mode_0.endTc&&(I(Ht(e.tokenClass)),e.fail_bm4lxs$("Expected '"+String.fromCharCode(_t(this.mode_0.end))+"'",e.tokenPosition_0)),this.reader_8be2vx$.nextToken()}},Hs.prototype.decodeNotNullMark=function(){return this.reader_8be2vx$.tokenClass!==Qo},Hs.prototype.decodeNull=function(){var t=this.reader_8be2vx$;return t.tokenClass!==Qo&&(I(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected 'null' literal",t.tokenPosition_0)),this.reader_8be2vx$.nextToken(),null},Hs.prototype.decodeElementIndex_24f42q$=function(t){var e,i=this.reader_8be2vx$.tokenClass;if(i===Wo){var n=this.reader_8be2vx$,r=-1!==this.currentIndex_0,o=this.reader_8be2vx$.currentPosition;r||n.fail_bm4lxs$("Unexpected leading comma",o),this.reader_8be2vx$.nextToken()}switch(this.mode_0.name){case"LIST":e=this.decodeListIndex_0(i);break;case"MAP":e=this.decodeMapIndex_0(i);break;case"POLY_OBJ":switch(this.currentIndex_0=this.currentIndex_0+1|0,this.currentIndex_0){case 0:e=0;break;case 1:e=1;break;default:e=-1}break;default:e=this.decodeObjectIndex_0(i,t)}return e},Hs.prototype.decodeMapIndex_0=function(t){var e;if(t!==Wo&&this.currentIndex_0%2==1){var i=this.reader_8be2vx$;i.tokenClass!==Yo&&(I(Ht(i.tokenClass)),i.fail_bm4lxs$("Expected end of the object or comma",i.tokenPosition_0))}if(this.currentIndex_0%2==0){var n=this.reader_8be2vx$;n.tokenClass!==Ko&&(I(Ht(n.tokenClass)),n.fail_bm4lxs$("Expected ':' after the key",n.tokenPosition_0)),this.reader_8be2vx$.nextToken()}if(this.reader_8be2vx$.canBeginValue)this.currentIndex_0=this.currentIndex_0+1|0,e=this.currentIndex_0;else{var r,o=this.reader_8be2vx$,s=t!==Wo;r=o.currentPosition,s||o.fail_bm4lxs$("Unexpected trailing comma",r),e=-1}return e},Hs.prototype.coerceInputValue_0=function(t,e){var i,n=t.getElementDescriptor_za3lpa$(e);if(this.reader_8be2vx$.tokenClass===Qo&&!n.isNullable)return!0;if(h(n.kind,yi())){if(null==(i=this.reader_8be2vx$.peekString_6taknv$(this.configuration_0.isLenient)))return!1;var r=i;if(-3===n.getElementIndex_61zpoe$(r))return!0}return!1},Hs.prototype.decodeObjectIndex_0=function(t,e){var i;for(t!==Wo||this.reader_8be2vx$.canBeginValue||this.reader_8be2vx$.fail_bm4lxs$("Unexpected trailing comma");this.reader_8be2vx$.canBeginValue;){this.currentIndex_0=this.currentIndex_0+1|0;var n=this.decodeString(),r=this.reader_8be2vx$;r.tokenClass!==Ko&&(I(Ht(r.tokenClass)),r.fail_bm4lxs$("Expected ':'",r.tokenPosition_0)),this.reader_8be2vx$.nextToken();var o=e.getElementIndex_61zpoe$(n);if(-3!==o){if(!this.configuration_0.coerceInputValues||!this.coerceInputValue_0(e,o))return o;i=!1}else i=!0;if(i&&!this.configuration_0.ignoreUnknownKeys?this.reader_8be2vx$.fail_bm4lxs$("Encountered an unknown key '"+n+"'.\n"+Oo):this.reader_8be2vx$.skipElement(),this.reader_8be2vx$.tokenClass===Wo){this.reader_8be2vx$.nextToken();var s=this.reader_8be2vx$,a=this.reader_8be2vx$.canBeginValue,l=this.reader_8be2vx$.currentPosition;a||s.fail_bm4lxs$("Unexpected trailing comma",l)}}return-1},Hs.prototype.decodeListIndex_0=function(t){var e;if(t!==Wo&&-1!==this.currentIndex_0){var i=this.reader_8be2vx$;i.tokenClass!==Jo&&(I(Ht(i.tokenClass)),i.fail_bm4lxs$("Expected end of the array or comma",i.tokenPosition_0))}if(this.reader_8be2vx$.canBeginValue)this.currentIndex_0=this.currentIndex_0+1|0,e=this.currentIndex_0;else{var n,r=this.reader_8be2vx$,o=t!==Wo;n=r.currentPosition,o||r.fail_bm4lxs$("Unexpected trailing comma",n),e=-1}return e},Hs.prototype.decodeBoolean=function(){return this.configuration_0.isLenient?Js(this.reader_8be2vx$.takeString()):Js(this.reader_8be2vx$.takeBooleanStringUnquoted())},Hs.prototype.decodeByte=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Kt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'byte'")}return t},Hs.prototype.decodeShort=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Xt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'short'")}return t},Hs.prototype.decodeInt=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Yt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'int'")}return t},Hs.prototype.decodeLong=function(){var t,i=this.reader_8be2vx$.takeString();try{t=u(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'long'")}return t},Hs.prototype.decodeFloat=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Jt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'float'")}var n=t;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Zt(n))return n;xs(this.reader_8be2vx$,n)},Hs.prototype.decodeDouble=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Jt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'double'")}var n=t;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Qt(n))return n;xs(this.reader_8be2vx$,n)},Hs.prototype.decodeChar=function(){var t,i=this.reader_8be2vx$.takeString();try{t=I(te(i))}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'char'")}return t},Hs.prototype.decodeString=function(){return this.configuration_0.isLenient?this.reader_8be2vx$.takeString():this.reader_8be2vx$.takeStringQuoted()},Hs.prototype.parse_0=function(t,i,n){try{return n(t)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse '"+i+"'")}},Hs.prototype.decodeEnum_24f42q$=function(t){return fr(t,this.decodeString())},Hs.$metadata$={kind:n,simpleName:"StreamingJsonDecoder",interfaces:[mn,Pa]},Object.defineProperty(Ws.prototype,"json",{get:function(){return this.json_8uu1uy$_0}}),Object.defineProperty(Ws.prototype,"serializersModule",{configurable:!0,get:function(){return this.serializersModule_tvtxsn$_0}}),Ws.prototype.encodeJsonElement_qiw0cd$=function(t){this.encodeSerializableValue_tf03ej$(vl(),t)},Ws.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return this.configuration_0.encodeDefaults},Ws.prototype.encodeSerializableValue_tf03ej$=function(t,i){t:do{var n,r;if(!e.isType(t,Mn)||this.json.configuration_8be2vx$.useArrayPolymorphism){t.serialize_55azsf$(this,i);break t}var s=Fs(this,e.isType(r=t,Gl)?r:o(),e.isType(n=i,L)?n:o());this.writePolymorphic_0=!0,s.serialize_55azsf$(this,i)}while(0)},Ws.prototype.encodeTypeInfo_0=function(t){this.composer_0.nextItem(),this.encodeString_61zpoe$(this.configuration_0.classDiscriminator),this.composer_0.print_s8itvh$(Ro),this.composer_0.space(),this.encodeString_61zpoe$(t.serialName)},Ws.prototype.beginStructure_24f42q$=function(t){var e,i=ga(this.json,t);return _t(i.begin)!==Uo&&(this.composer_0.print_s8itvh$(_t(i.begin)),this.composer_0.indent()),this.writePolymorphic_0&&(this.writePolymorphic_0=!1,this.encodeTypeInfo_0(t)),this.mode_0===i?this:null!=(e=this.modeReuseCache_0[i.ordinal])?e:new Ws(this.composer_0,this.json,i,this.modeReuseCache_0)},Ws.prototype.endStructure_24f42q$=function(t){_t(this.mode_0.end)!==Uo&&(this.composer_0.unIndent(),this.composer_0.nextItem(),this.composer_0.print_s8itvh$(_t(this.mode_0.end)))},Ws.prototype.encodeElement_szpzho$=function(t,e){var i;switch(this.mode_0.name){case"LIST":this.composer_0.writingFirst||this.composer_0.print_s8itvh$(Ao),this.composer_0.nextItem();break;case"MAP":this.composer_0.writingFirst?(this.forceQuoting_0=!0,this.composer_0.nextItem()):(e%2==0?(this.composer_0.print_s8itvh$(Ao),this.composer_0.nextItem(),i=!0):(this.composer_0.print_s8itvh$(Ro),this.composer_0.space(),i=!1),this.forceQuoting_0=i);break;case"POLY_OBJ":0===e&&(this.forceQuoting_0=!0),1===e&&(this.composer_0.print_s8itvh$(Ao),this.composer_0.space(),this.forceQuoting_0=!1);break;default:this.composer_0.writingFirst||this.composer_0.print_s8itvh$(Ao),this.composer_0.nextItem(),this.encodeString_61zpoe$(t.getElementName_za3lpa$(e)),this.composer_0.print_s8itvh$(Ro),this.composer_0.space()}return!0},Ws.prototype.encodeNull=function(){this.composer_0.print_61zpoe$(jo)},Ws.prototype.encodeBoolean_6taknv$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_6taknv$(t)},Ws.prototype.encodeByte_s8j3t7$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_s8j3t7$(t)},Ws.prototype.encodeShort_mq22fl$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_mq22fl$(t)},Ws.prototype.encodeInt_za3lpa$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_za3lpa$(t)},Ws.prototype.encodeLong_s8cxhz$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_s8cxhz$(t)},Ws.prototype.encodeFloat_mx4ult$=function(t){if(this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_mx4ult$(t),!this.configuration_0.allowSpecialFloatingPointValues&&!Zt(t))throw vs(t,this.composer_0.sb_8be2vx$.toString())},Ws.prototype.encodeDouble_14dthe$=function(t){if(this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_14dthe$(t),!this.configuration_0.allowSpecialFloatingPointValues&&!Qt(t))throw vs(t,this.composer_0.sb_8be2vx$.toString())},Ws.prototype.encodeChar_s8itvh$=function(t){this.encodeString_61zpoe$(String.fromCharCode(t))},Ws.prototype.encodeString_61zpoe$=function(t){this.composer_0.printQuoted_61zpoe$(t)},Ws.prototype.encodeEnum_szpzho$=function(t,e){this.encodeString_61zpoe$(t.getElementName_za3lpa$(e))},Object.defineProperty(Ks.prototype,"writingFirst",{configurable:!0,get:function(){return this.writingFirst_4lagic$_0},set:function(t){this.writingFirst_4lagic$_0=t}}),Ks.prototype.indent=function(){this.writingFirst=!0,this.level_0=this.level_0+1|0},Ks.prototype.unIndent=function(){this.level_0=this.level_0-1|0},Ks.prototype.nextItem=function(){if(this.writingFirst=!1,this.json_0.configuration_8be2vx$.prettyPrint){this.print_61zpoe$("\n");for(var t=this.level_0,e=0;e<t;e++)this.print_61zpoe$(this.json_0.configuration_8be2vx$.prettyPrintIndent)}},Ks.prototype.space=function(){this.json_0.configuration_8be2vx$.prettyPrint&&this.print_s8itvh$(32)},Ks.prototype.print_s8itvh$=function(t){return this.sb_8be2vx$.append_s8itvh$(t)},Ks.prototype.print_61zpoe$=function(t){return this.sb_8be2vx$.append_pdl1vj$(t)},Ks.prototype.print_mx4ult$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_14dthe$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_s8j3t7$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_mq22fl$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_za3lpa$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_s8cxhz$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_6taknv$=function(t){return this.sb_8be2vx$.append_6taknv$(t)},Ks.prototype.printQuoted_61zpoe$=function(t){Zs(this.sb_8be2vx$,t)},Ks.$metadata$={kind:n,simpleName:"Composer",interfaces:[]},Ws.$metadata$={kind:n,simpleName:"StreamingJsonEncoder",interfaces:[$n,Ul]},Object.defineProperty(ia.prototype,"json",{get:function(){return this.json_nf7dq8$_0}}),Object.defineProperty(ia.prototype,"value",{get:function(){return this.value_admuh1$_0}}),Object.defineProperty(ia.prototype,"serializersModule",{configurable:!0,get:function(){return this.json.serializersModule}}),Object.defineProperty(ia.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),ia.prototype.currentObject_0=function(){var t,e;return null!=(e=null!=(t=this.currentTagOrNull)?this.currentElement_61zpoe$(t):null)?e:this.value},ia.prototype.decodeJsonElement=function(){return this.currentObject_0()},ia.prototype.decodeSerializableValue_w63s0f$=function(t){return Vs(this,t)},ia.prototype.composeName_puj7f4$=function(t,e){return e},ia.prototype.beginStructure_24f42q$=function(t){var n,r,o=this.currentObject_0();if(n=t.kind,h(n,nn())||e.isType(n,pn)){var s=this.json;if(!e.isType(o,Za))throw new ms(-1,"Expected "+i(Za)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));r=new sa(s,o)}else if(h(n,sn())){var a,l=this.json,u=t.getElementDescriptor_za3lpa$(0),p=u.kind;if(e.isType(p,xi)||h(p,_i.ENUM)){var c=this.json;if(!e.isType(o,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));a=new oa(c,o)}else{if(!l.configuration_8be2vx$.allowStructuredMapKeys)throw ks(u);var d=this.json;if(!e.isType(o,Za))throw new ms(-1,"Expected "+i(Za)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));a=new sa(d,o)}r=a}else{var f=this.json;if(!e.isType(o,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));r=new ra(f,o)}return r},ia.prototype.endStructure_24f42q$=function(t){},ia.prototype.getValue_61zpoe$=function(t){var i,n,r=this.currentElement_61zpoe$(t);if(null==(n=e.isType(i=r,Aa)?i:null))throw ys(-1,"Expected JsonPrimitive at "+t+", found "+r,this.currentObject_0().toString());return n},ia.prototype.decodeTaggedEnum_gaombr$=function(t,e){return fr(e,this.getValue_61zpoe$(t).content)},ia.prototype.decodeTaggedNull_11rb$=function(t){return null},ia.prototype.decodeTaggedNotNullMark_11rb$=function(t){return this.currentElement_61zpoe$(t)!==Ga()},ia.prototype.decodeTaggedBoolean_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);if(!this.json.configuration_8be2vx$.isLenient&&(e.isType(i=n,Fa)?i:o()).isString)throw ys(-1,"Boolean literal for key '"+t+"' should be unquoted.\n"+Po,this.currentObject_0().toString());return ll(n)},ia.prototype.decodeTaggedByte_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=nt(il(n))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'byte'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedShort_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=ne(il(n))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'short'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedInt_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=il(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'int'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedLong_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=nl(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'long'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedFloat_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=al(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'float'",this.currentObject_0().toString()):t}var r=i;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Zt(r))return r;throw bs(r,t,this.currentObject_0().toString())},ia.prototype.decodeTaggedDouble_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=ol(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'double'",this.currentObject_0().toString()):t}var r=i;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Qt(r))return r;throw bs(r,t,this.currentObject_0().toString())},ia.prototype.decodeTaggedChar_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=I(te(n.content))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'char'",this.currentObject_0().toString()):t}return i},ia.prototype.primitive_0=function(t,i,n){try{return n(t)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse '"+i+"'",this.currentObject_0().toString()):t}},ia.prototype.decodeTaggedString_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);if(!this.json.configuration_8be2vx$.isLenient&&!(e.isType(i=n,Fa)?i:o()).isString)throw ys(-1,"String literal for key '"+t+"' should be quoted.\n"+Po,this.currentObject_0().toString());return n.content},ia.$metadata$={kind:n,simpleName:"AbstractJsonTreeDecoder",interfaces:[Pa,ls]},Object.defineProperty(na.prototype,"value",{get:function(){return this.value_icegni$_0}}),na.prototype.decodeElementIndex_24f42q$=function(t){return 0},na.prototype.currentElement_61zpoe$=function(t){if(t!==Ps)throw O("This input can only handle primitives with 'primitive' tag".toString());return this.value},na.$metadata$={kind:n,simpleName:"JsonPrimitiveDecoder",interfaces:[ia]},Object.defineProperty(ra.prototype,"value",{get:function(){return this.value_nyd9q1$_0}}),ra.prototype.coerceInputValue_0=function(t,i,n){var r,o,s,a=t.getElementDescriptor_za3lpa$(i);if(e.isType(this.currentElement_61zpoe$(n),Ua)&&!a.isNullable)return!0;if(h(a.kind,yi())){if(null==(s=null!=(o=e.isType(r=this.currentElement_61zpoe$(n),Aa)?r:null)?pl(o):null))return!1;var l=s;if(-3===a.getElementIndex_61zpoe$(l))return!0}return!1},ra.prototype.decodeElementIndex_24f42q$=function(t){for(var i;this.position_0<t.elementsCount;){var n,r=this.getTag_av9bu7$(t,(i=this.position_0,this.position_0=i+1|0,i)),s=this.value;if((e.isType(n=s,oe)?n:o()).containsKey_11rb$(r)&&(!this.configuration_0.coerceInputValues||!this.coerceInputValue_0(t,this.position_0-1|0,r)))return this.position_0-1|0}return-1},ra.prototype.currentElement_61zpoe$=function(t){return q(this.value,t)},ra.prototype.beginStructure_24f42q$=function(t){return t===this.polyDescriptor_0?this:ia.prototype.beginStructure_24f42q$.call(this,t)},ra.prototype.endStructure_24f42q$=function(t){var i;if(!this.configuration_0.ignoreUnknownKeys&&!e.isType(t.kind,pn)){var n=lr(t);for(i=this.value.keys.iterator();i.hasNext();){var r=i.next();if(!n.contains_11rb$(r)&&!h(r,this.polyDiscriminator_0))throw zs(r,this.value.toString())}}},ra.$metadata$={kind:n,simpleName:"JsonTreeDecoder",interfaces:[ia]},Object.defineProperty(oa.prototype,"value",{get:function(){return this.value_ozc1lj$_0}}),oa.prototype.elementName_szpzho$=function(t,e){var i=e/2|0;return this.keys_0.get_za3lpa$(i)},oa.prototype.decodeElementIndex_24f42q$=function(t){for(;this.position_1<(this.size_0-1|0);)return this.position_1=this.position_1+1|0,this.position_1;return-1},oa.prototype.currentElement_61zpoe$=function(t){return this.position_1%2==0?Ba(t):q(this.value,t)},oa.prototype.endStructure_24f42q$=function(t){},oa.$metadata$={kind:n,simpleName:"JsonTreeMapDecoder",interfaces:[ra]},Object.defineProperty(sa.prototype,"value",{get:function(){return this.value_z81zg7$_0}}),sa.prototype.elementName_szpzho$=function(t,e){return e.toString()},sa.prototype.currentElement_61zpoe$=function(t){return this.value.get_za3lpa$(Yt(t))},sa.prototype.decodeElementIndex_24f42q$=function(t){for(;this.currentIndex_0<(this.size_0-1|0);)return this.currentIndex_0=this.currentIndex_0+1|0,this.currentIndex_0;return-1},sa.$metadata$={kind:n,simpleName:"JsonTreeListDecoder",interfaces:[ia]},Object.defineProperty(la.prototype,"json",{get:function(){return this.json_927t60$_0}}),Object.defineProperty(la.prototype,"serializersModule",{configurable:!0,get:function(){return this.json.serializersModule}}),la.prototype.encodeJsonElement_qiw0cd$=function(t){this.encodeSerializableValue_tf03ej$(vl(),t)},la.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return this.configuration_0.encodeDefaults},la.prototype.composeName_puj7f4$=function(t,e){return e},la.prototype.encodeTaggedNull_11rb$=function(t){this.putElement_zafu29$(t,Ga())},la.prototype.encodeTaggedInt_dpg1yx$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedByte_19qe40$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedShort_veccj0$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedLong_19wkf8$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedFloat_vlf4p8$=function(t,e){if(this.putElement_zafu29$(t,qa(e)),!this.configuration_0.allowSpecialFloatingPointValues&&!Zt(e))throw gs(e,t,this.getCurrent().toString())},la.prototype.encodeSerializableValue_tf03ej$=function(t,i){if(null!=this.currentTagOrNull||!e.isType(t.descriptor.kind,xi)&&t.descriptor.kind!==yi())t:do{var n,r;if(!e.isType(t,Mn)||this.json.configuration_8be2vx$.useArrayPolymorphism){t.serialize_55azsf$(this,i);break t}var s=Fs(this,e.isType(r=t,Gl)?r:o(),e.isType(n=i,L)?n:o());this.writePolymorphic_0=!0,s.serialize_55azsf$(this,i)}while(0);else{var a=new ua(this.json,this.nodeConsumer);a.encodeSerializableValue_tf03ej$(t,i),a.endEncode_24f42q$(t.descriptor)}},la.prototype.encodeTaggedDouble_e37ph5$=function(t,e){if(this.putElement_zafu29$(t,qa(e)),!this.configuration_0.allowSpecialFloatingPointValues&&!Qt(e))throw gs(e,t,this.getCurrent().toString())},la.prototype.encodeTaggedBoolean_iuyhfk$=function(t,e){this.putElement_zafu29$(t,Da(e))},la.prototype.encodeTaggedChar_19qo1q$=function(t,e){this.putElement_zafu29$(t,Ba(String.fromCharCode(e)))},la.prototype.encodeTaggedString_l9l8mx$=function(t,e){this.putElement_zafu29$(t,Ba(e))},la.prototype.encodeTaggedEnum_4xdzqf$=function(t,e,i){this.putElement_zafu29$(t,Ba(e.getElementName_za3lpa$(i)))},la.prototype.encodeTaggedValue_dpg7wc$=function(t,e){this.putElement_zafu29$(t,Ba(e.toString()))},la.prototype.beginStructure_24f42q$=function(t){var i,n,r,o=null==this.currentTagOrNull?this.nodeConsumer:(r=this,function(t){return r.putElement_zafu29$(r.currentTag,t),l});if(i=t.kind,h(i,nn())||e.isType(i,pn))n=new ha(this.json,o);else if(h(i,sn())){var s,a=this.json,u=t.getElementDescriptor_za3lpa$(0),p=u.kind;if(e.isType(p,xi)||h(p,_i.ENUM))s=new ca(this.json,o);else{if(!a.configuration_8be2vx$.allowStructuredMapKeys)throw ks(u);s=new ha(this.json,o)}n=s}else n=new pa(this.json,o);var c=n;return this.writePolymorphic_0&&(this.writePolymorphic_0=!1,c.putElement_zafu29$(this.configuration_0.classDiscriminator,Ba(t.serialName))),c},la.prototype.endEncode_24f42q$=function(t){this.nodeConsumer(this.getCurrent())},la.$metadata$={kind:n,simpleName:"AbstractJsonTreeEncoder",interfaces:[Ul,ss]},ua.prototype.putElement_zafu29$=function(t,e){if(t!==Ps)throw O("This output can only consume primitives with 'primitive' tag".toString());if(null!=this.content_0)throw O("Primitive element was already recorded. Does call to .encodeXxx happen more than once?".toString());this.content_0=e},ua.prototype.getCurrent=function(){var t=this.content_0;if(null==t)throw O("Primitive element has not been recorded. Is call to .encodeXxx is missing in serializer?".toString());return t},ua.$metadata$={kind:n,simpleName:"JsonPrimitiveEncoder",interfaces:[la]},pa.prototype.putElement_zafu29$=function(t,e){this.content_0.put_xwzc9p$(t,e)},pa.prototype.getCurrent=function(){return new Ha(this.content_0)},pa.$metadata$={kind:n,simpleName:"JsonTreeEncoder",interfaces:[la]},Object.defineProperty(ca.prototype,"tag_0",{configurable:!0,get:function(){return null==this.tag_s622uw$_0?se("tag"):this.tag_s622uw$_0},set:function(t){this.tag_s622uw$_0=t}}),ca.prototype.putElement_zafu29$=function(t,i){var n;if(this.isKey_0){if(e.isType(i,Aa))n=i.content;else{if(e.isType(i,Ha))throw ks(Tl().descriptor);if(e.isType(i,Za))throw ks(Ll().descriptor);n=e.noWhenBranchMatched()}this.tag_0=n,this.isKey_0=!1}else{var r=this.content_0,o=this.tag_0;r.put_xwzc9p$(o,i),this.isKey_0=!0}},ca.prototype.getCurrent=function(){return new Ha(this.content_0)},ca.$metadata$={kind:n,simpleName:"JsonTreeMapEncoder",interfaces:[pa]},ha.prototype.elementName_szpzho$=function(t,e){return e.toString()},ha.prototype.putElement_zafu29$=function(t,e){var i=Yt(t);this.array_0.add_wxm5ur$(i,e)},ha.prototype.getCurrent=function(){return new Za(this.array_0)},ha.$metadata$={kind:n,simpleName:"JsonTreeListEncoder",interfaces:[la]},da.$metadata$={kind:n,simpleName:"WriteMode",interfaces:[ae]},da.values=va,da.valueOf_61zpoe$=function(t){switch(t){case"OBJ":return _a();case"LIST":return ma();case"MAP":return $a();case"POLY_OBJ":return ya();default:le("No enum constant kotlinx.serialization.json.internal.WriteMode."+t)}},Object.defineProperty(ba.prototype,"serializersModule",{configurable:!0,get:function(){return this.configuration_8be2vx$.serializersModule}}),xa.$metadata$={kind:p,simpleName:"Default",interfaces:[ba]};var wa,za,ka=null;function Sa(){return null===ka&&new xa,ka}function Ca(t){this.encodeDefaults=t.encodeDefaults,this.ignoreUnknownKeys=t.ignoreUnknownKeys,this.isLenient=t.isLenient,this.allowStructuredMapKeys=t.allowStructuredMapKeys,this.prettyPrint=t.prettyPrint,this.prettyPrintIndent=t.prettyPrintIndent,this.coerceInputValues=t.coerceInputValues,this.useArrayPolymorphism=t.useArrayPolymorphism,this.classDiscriminator=t.classDiscriminator,this.allowSpecialFloatingPointValues=t.allowSpecialFloatingPointValues,this.serializersModule=t.serializersModule,this.serializeSpecialFloatingPointValues=!1,this.indent="    ",this.strictMode=!0,this.unquoted=!1,this.unquotedPrint=!1,this.serialModule=Rl}function Na(t){ba.call(this,t),this.validateConfiguration_0()}function Ea(t){this.baseClass_saxo55$_0=t,this.descriptor_fdk25h$_0=ci("JsonContentPolymorphicSerializer<"+f(this.baseClass_saxo55$_0.simpleName)+">",dn(),[])}function Pa(){}function Ta(){ja()}function Oa(){Ma=this}ba.prototype.encodeToString_tf03ej$=function(t,i){var n=ue();return Xs(n,this,_a(),e.newArray(va().length,null)).encodeSerializableValue_tf03ej$(t,i),n.toString()},ba.prototype.decodeFromString_awif5v$=function(t,e){var i=new Bs(e),n=new Hs(this,_a(),i).decodeSerializableValue_w63s0f$(t);if(!i.isDone)throw R(("Reader has not consumed the whole input: "+i).toString());return n},ba.prototype.encodeToJsonElement_tf03ej$=function(t,e){return aa(this,e,t)},ba.prototype.decodeFromJsonElement_htt2tq$=function(t,e){return ta(this,e,t)},ba.prototype.parseToJsonElement_61zpoe$=function(t){return this.decodeFromString_awif5v$(vl(),t)},ba.$metadata$={kind:n,simpleName:"Json",interfaces:[lu]},Ca.prototype.build_8be2vx$=function(){if(this.useArrayPolymorphism&&!h(this.classDiscriminator,za))throw O("Class discriminator should not be specified when array polymorphism is specified".toString());if(this.prettyPrint){if(!h(this.prettyPrintIndent,wa)){var t,e=this.prettyPrintIndent;t:do{var i;for(i=ie(e);i.hasNext();){var n=_t(i.next()),r=I(n);if(32!==_t(r)&&9!==_t(r)&&13!==_t(r)&&10!==_t(r)){t=!1;break t}}t=!0}while(0);if(!t){var o="Only whitespace, tab, newline and carriage return are allowed as pretty print symbols. Had "+this.prettyPrintIndent;throw O(o.toString())}}}else if(!h(this.prettyPrintIndent,wa))throw O("Indent should not be specified when default printing mode is used".toString());return new fs(this.encodeDefaults,this.ignoreUnknownKeys,this.isLenient,this.allowStructuredMapKeys,this.prettyPrint,this.prettyPrintIndent,this.coerceInputValues,this.useArrayPolymorphism,this.classDiscriminator,this.allowSpecialFloatingPointValues,this.serializersModule)},Ca.prototype.buildConfiguration=function(){throw R("Deprecated and should not be called".toString())},Ca.prototype.buildModule=function(){throw R("Deprecated and should not be called".toString())},Ca.$metadata$={kind:n,simpleName:"JsonBuilder",interfaces:[]},Na.prototype.validateConfiguration_0=function(){if(!h(this.serializersModule,Rl)){var t=new Gs(this.configuration_8be2vx$.useArrayPolymorphism,this.configuration_8be2vx$.classDiscriminator);this.serializersModule.dumpTo_ukvgvw$(t)}},Na.$metadata$={kind:n,simpleName:"JsonImpl",interfaces:[ba]},Object.defineProperty(Pa.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),Pa.$metadata$={kind:$,simpleName:"JsonDecoder",interfaces:[vn,yn]},Oa.prototype.serializer=function(){return vl()},Oa.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ma=null;function ja(){return null===Ma&&new Oa,Ma}function Aa(){La(),Ta.call(this)}function Ra(){Ia=this}Ta.$metadata$={kind:n,simpleName:"JsonElement",interfaces:[]},Aa.prototype.toString=function(){return this.content},Ra.prototype.serializer=function(){return xl()},Ra.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ia=null;function La(){return null===Ia&&new Ra,Ia}function Da(t){return null==t?Ga():new Fa(t,!1)}function qa(t){return null==t?Ga():new Fa(t,!1)}function Ba(t){return null==t?Ga():new Fa(t,!0)}function Fa(t,e){Aa.call(this),this.isString_jhh1on$_0=e,this.content_prrjtz$_0=t.toString()}function Ua(){Va=this,Aa.call(this),this.content_w1vkof$_0="null"}Aa.$metadata$={kind:n,simpleName:"JsonPrimitive",interfaces:[Ta]},Object.defineProperty(Fa.prototype,"isString",{get:function(){return this.isString_jhh1on$_0}}),Object.defineProperty(Fa.prototype,"content",{configurable:!0,get:function(){return this.content_prrjtz$_0}}),Fa.prototype.toString=function(){var t;if(this.isString){var e=ue();Zs(e,this.content),t=e.toString()}else t=this.content;return t},Fa.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,Fa)||o(),this.isString===t.isString&&!!h(this.content,t.content))},Fa.prototype.hashCode=function(){var t=d(this.isString);return t=(31*t|0)+d(this.content)|0},Fa.$metadata$={kind:n,simpleName:"JsonLiteral",interfaces:[Aa]},Object.defineProperty(Ua.prototype,"isString",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Ua.prototype,"content",{configurable:!0,get:function(){return this.content_w1vkof$_0}}),Ua.$metadata$={kind:p,simpleName:"JsonNull",interfaces:[Aa]};var Va=null;function Ga(){return null===Va&&new Ua,Va}function Ha(t){Ya(),Ta.call(this),this.content_0=t}function Wa(t){return'"'+t.key+'":'+t.value}function Ka(){Xa=this}Ha.prototype.equals=function(t){return h(this.content_0,t)},Ha.prototype.hashCode=function(){return d(this.content_0)},Ha.prototype.toString=function(){return k(this.content_0.entries,",","{","}",void 0,void 0,Wa)},Ka.prototype.serializer=function(){return Tl()},Ka.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Xa=null;function Ya(){return null===Xa&&new Ka,Xa}function Za(t){tl(),Ta.call(this),this.content_0=t}function Ja(){Qa=this}Object.defineProperty(Ha.prototype,"entries",{get:function(){return this.content_0.entries}}),Object.defineProperty(Ha.prototype,"keys",{get:function(){return this.content_0.keys}}),Object.defineProperty(Ha.prototype,"size",{get:function(){return this.content_0.size}}),Object.defineProperty(Ha.prototype,"values",{get:function(){return this.content_0.values}}),Ha.prototype.containsKey_11rb$=function(t){return this.content_0.containsKey_11rb$(t)},Ha.prototype.containsValue_11rc$=function(t){return this.content_0.containsValue_11rc$(t)},Ha.prototype.get_11rb$=function(t){return this.content_0.get_11rb$(t)},Ha.prototype.isEmpty=function(){return this.content_0.isEmpty()},Ha.$metadata$={kind:n,simpleName:"JsonObject",interfaces:[oe,Ta]},Za.prototype.equals=function(t){return h(this.content_0,t)},Za.prototype.hashCode=function(){return d(this.content_0)},Za.prototype.toString=function(){return k(this.content_0,",","[","]")},Ja.prototype.serializer=function(){return Ll()},Ja.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Qa=null;function tl(){return null===Qa&&new Ja,Qa}function el(t){var i,n;return null!=(n=e.isType(i=t,Aa)?i:null)?n:function(t,i){throw O("Element "+e.getKClassFromExpression(t)+" is not a "+i)}(t,"JsonPrimitive")}function il(t){return Yt(t.content)}function nl(t){return u(t.content)}function rl(t){return ce(t.content)}function ol(t){return Jt(t.content)}function sl(t){return he(t.content)}function al(t){return Jt(t.content)}function ll(t){return Js(t.content)}function ul(t){return Qs(t.content)}function pl(t){return e.isType(t,Ua)?null:t.content}function cl(){yl=this,this.descriptor_u8kpse$_0=ci("kotlinx.serialization.json.JsonElement",dn(),[],$l)}function hl(){return xl().descriptor}function dl(){return kl().descriptor}function fl(){return Nl().descriptor}function _l(){return Tl().descriptor}function ml(){return Ll().descriptor}function $l(t){return t.element_vxrguq$("JsonPrimitive",cr(hl)),t.element_vxrguq$("JsonNull",cr(dl)),t.element_vxrguq$("JsonLiteral",cr(fl)),t.element_vxrguq$("JsonObject",cr(_l)),t.element_vxrguq$("JsonArray",cr(ml)),l}Object.defineProperty(Za.prototype,"size",{get:function(){return this.content_0.size}}),Za.prototype.contains_11rb$=function(t){return this.content_0.contains_11rb$(t)},Za.prototype.containsAll_brywnq$=function(t){return this.content_0.containsAll_brywnq$(t)},Za.prototype.get_za3lpa$=function(t){return this.content_0.get_za3lpa$(t)},Za.prototype.indexOf_11rb$=function(t){return this.content_0.indexOf_11rb$(t)},Za.prototype.isEmpty=function(){return this.content_0.isEmpty()},Za.prototype.iterator=function(){return this.content_0.iterator()},Za.prototype.lastIndexOf_11rb$=function(t){return this.content_0.lastIndexOf_11rb$(t)},Za.prototype.listIterator=function(){return this.content_0.listIterator()},Za.prototype.listIterator_za3lpa$=function(t){return this.content_0.listIterator_za3lpa$(t)},Za.prototype.subList_vux9f0$=function(t,e){return this.content_0.subList_vux9f0$(t,e)},Za.$metadata$={kind:n,simpleName:"JsonArray",interfaces:[pe,Ta]},Object.defineProperty(cl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_u8kpse$_0}}),cl.prototype.serialize_55azsf$=function(t,i){Dl(t),e.isType(i,Aa)?t.encodeSerializableValue_tf03ej$(xl(),i):e.isType(i,Ha)?t.encodeSerializableValue_tf03ej$(Tl(),i):e.isType(i,Za)&&t.encodeSerializableValue_tf03ej$(Ll(),i)},cl.prototype.deserialize_bq71mq$=function(t){return Bl(t).decodeJsonElement()},cl.$metadata$={kind:p,simpleName:"JsonElementSerializer",interfaces:[Gl]};var yl=null;function vl(){return null===yl&&new cl,yl}function gl(){bl=this,this.descriptor_1d7xi5$_0=ci("kotlinx.serialization.json.JsonPrimitive",Xi(),[])}Object.defineProperty(gl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_1d7xi5$_0}}),gl.prototype.serialize_55azsf$=function(t,i){var n;return Dl(t),e.isType(i,Ua)?t.encodeSerializableValue_tf03ej$(kl(),Ga()):t.encodeSerializableValue_tf03ej$(Nl(),e.isType(n=i,Fa)?n:o())},gl.prototype.deserialize_bq71mq$=function(t){var i=Bl(t).decodeJsonElement();if(!e.isType(i,Aa))throw ys(-1,"Unexpected JSON element, expected JsonPrimitive, had "+e.getKClassFromExpression(i),i.toString());return i},gl.$metadata$={kind:p,simpleName:"JsonPrimitiveSerializer",interfaces:[Gl]};var bl=null;function xl(){return null===bl&&new gl,bl}function wl(){zl=this,this.descriptor_kuqqdr$_0=ci("kotlinx.serialization.json.JsonNull",yi(),[])}Object.defineProperty(wl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kuqqdr$_0}}),wl.prototype.serialize_55azsf$=function(t,e){Dl(t),t.encodeNull()},wl.prototype.deserialize_bq71mq$=function(t){return ql(t),t.decodeNull(),Ga()},wl.$metadata$={kind:p,simpleName:"JsonNullSerializer",interfaces:[Gl]};var zl=null;function kl(){return null===zl&&new wl,zl}function Sl(){Cl=this,this.descriptor_fnzu3f$_0=ui("kotlinx.serialization.json.JsonLiteral",Xi())}Object.defineProperty(Sl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_fnzu3f$_0}}),Sl.prototype.serialize_55azsf$=function(t,e){if(Dl(t),e.isString)return t.encodeString_61zpoe$(e.content);var i=rl(e);if(null!=i)return t.encodeLong_s8cxhz$(i);var n=sl(e);if(null!=n)return t.encodeDouble_14dthe$(n);var r=ul(e);if(null!=r)return t.encodeBoolean_6taknv$(r);t.encodeString_61zpoe$(e.content)},Sl.prototype.deserialize_bq71mq$=function(t){var i=Bl(t).decodeJsonElement();if(!e.isType(i,Fa))throw ys(-1,"Unexpected JSON element, expected JsonLiteral, had "+e.getKClassFromExpression(i),i.toString());return i},Sl.$metadata$={kind:p,simpleName:"JsonLiteralSerializer",interfaces:[Gl]};var Cl=null;function Nl(){return null===Cl&&new Sl,Cl}function El(){Pl=this,this.descriptor_a992tj$_0=new Vn("kotlinx.serialization.json.JsonObject",Je().descriptor,vl().descriptor)}Object.defineProperty(El.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_a992tj$_0}}),El.prototype.serialize_55azsf$=function(t,e){Dl(t),ei(Je(),vl()).serialize_55azsf$(t,e)},El.prototype.deserialize_bq71mq$=function(t){return ql(t),new Ha(ei(Je(),vl()).deserialize_bq71mq$(t))},El.$metadata$={kind:p,simpleName:"JsonObjectSerializer",interfaces:[Gl]};var Pl=null;function Tl(){return null===Pl&&new El,Pl}function Ol(){Il=this,this.descriptor_935ivj$_0=new Bn("kotlinx.serialization.json.JsonArray",vl().descriptor)}Object.defineProperty(Ol.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_935ivj$_0}}),Ol.prototype.serialize_55azsf$=function(t,e){Dl(t),ti(vl()).serialize_55azsf$(t,e)},Ol.prototype.deserialize_bq71mq$=function(t){return ql(t),new Za(ti(vl()).deserialize_bq71mq$(t))},Ol.$metadata$={kind:p,simpleName:"JsonArraySerializer",interfaces:[Gl]};var Ml,jl,Al,Rl,Il=null;function Ll(){return null===Il&&new Ol,Il}function Dl(t){Fl(t)}function ql(t){Bl(t)}function Bl(t){var i,n;if(null==(n=e.isType(i=t,Pa)?i:null))throw R("This serializer can be used only with Json format.Expected Decoder to be JsonDecoder, got "+e.getKClassFromExpression(t));return n}function Fl(t){var i,n;if(null==(n=e.isType(i=t,Ul)?i:null))throw R("This serializer can be used only with Json format.Expected Encoder to be JsonEncoder, got "+e.getKClassFromExpression(t));return n}function Ul(){}function Vl(t){this.tSerializer_nuzucf$_0=t}function Gl(){}function Hl(){}function Wl(){}function Kl(t,e){ae.call(this),this.name$=t,this.ordinal$=e}function Xl(){Xl=function(){},Ml=new Kl("BANNED",0),jl=new Kl("OVERWRITE",1),Al=new Kl("UPDATE",2)}function Yl(){return Xl(),Ml}function Zl(){return Xl(),jl}function Jl(){return Xl(),Al}function Ql(){}function tu(t,e,i,n){Ql.call(this),this.class2Serializer_0=t,this.polyBase2Serializers=e,this.polyBase2NamedSerializers_0=i,this.polyBase2DefaultProvider_0=n}function eu(){}function iu(t,e,i){var n;return null!=(n=t.findPolymorphicSerializerOrNull_ca6uye$(e,i))?n:jn(i,t.baseClass)}function nu(t,i,n){var r;return null!=(r=t.findPolymorphicSerializerOrNull_kjsxpj$(i,n))?r:An(e.getKClassFromExpression(n),t.baseClass)}function ru(t,e){this.this$groupingBy=t,this.closure$keySelector=e}function ou(t,e,i,n){var r,o;if(Mn.call(this),this.baseClass_a0a98o$_0=e,this.descriptor_gganzq$_0=ci(t,dn(),[],(r=this,o=n,function(t){t.element_vxrguq$("type",Je().descriptor);var e=ci("kotlinx.serialization.Sealed<"+f(r.baseClass.simpleName)+">",bi(),[],function(t){return function(e){var i,n=t;for(i=0;i!==n.length;++i){var r=n[i].descriptor;e.element_vxrguq$(r.serialName,r)}return l}}(o));return t.element_vxrguq$("value",e),l})),this.class2Serializer_0=null,this.serialName2Serializer_0=null,i.length!==n.length)throw O("All subclasses of sealed class "+f(this.baseClass.simpleName)+" should be marked @Serializable");this.class2Serializer_0=E(me(i,n));var s,a=new ru(this.class2Serializer_0.entries,su),u=K();for(s=a.sourceIterator();s.hasNext();){var p=s.next(),c=a.keyOf_11rb$(p),h=u.get_11rb$(c),d=u.put_xwzc9p$;if(null==h&&u.containsKey_11rb$(c),null!=h)throw R(("Multiple sealed subclasses of '"+this.baseClass+"' have the same serial name '"+c+"': '"+h.key+"', '"+p.key+"'").toString());d.call(u,c,p)}var _,m=ve(ye(u.size));for(_=u.entries.iterator();_.hasNext();){var $=_.next();m.put_xwzc9p$($.key,$.value.value)}this.serialName2Serializer_0=m}function su(t){return t.value.descriptor.serialName}function au(){}function lu(){}function uu(){this.name="SerializationException"}function pu(t,e){return e=e||Object.create(uu.prototype),O(t,e),uu.call(e),e}function cu(t){pu("Field '"+t+"' is required, but it was missing",this),this.name="MissingFieldException"}function hu(t){pu("An unknown field for index "+t,this),this.name="UnknownFieldException"}function du(t,i){var n,r,s,a,l,u,p=dr(i),c=i.isMarkedNullable,h=fu(t,i);return null!=h?e.isType(a=mu(h,c),Gl)?a:o():(l=null!=(r=null!=(n=t.getContextual_lmshww$(p))?mu(n,c):null)?e.isType(u=r,Gl)?u:o():null,null!=(s=l)?s:hr(dr(i)))}function fu(t,n){var r,s,a,l=dr(n),u=n.arguments,p=m(_(u,10));for(a=u.iterator();a.hasNext();){var c,d=a.next(),$=p.add_11rb$,y=d.type;if(null==y)throw O(("Star projections in type arguments are not allowed, but had "+n).toString());c=y,$.call(p,c)}var v,g=p;return null!=(s=g.isEmpty()?null!=(r=_u(l))?r:t.getContextual_lmshww$(l):function(t,n,r){var s,a,l,u=ge("serializer",function(t,e){return du(t,e)}.bind(null,t)),p=m(_(n,10));for(l=n.iterator();l.hasNext();){var c=l.next();p.add_11rb$(u(c))}var d=p;if(h(r,i(pe))||h(r,i(be))||h(r,i(U)))a=new Qn(d.get_za3lpa$(0));else if(h(r,i(H)))a=new er(d.get_za3lpa$(0));else if(h(r,i(xe))||h(r,i(we))||h(r,i(V)))a=new tr(d.get_za3lpa$(0));else if(h(r,i(J)))a=new nr(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(oe))||h(r,i(ze))||h(r,i(X)))a=new ir(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(Ut)))a=Me(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(ke)))a=Oe(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(Vt)))a=je(d.get_za3lpa$(0),d.get_za3lpa$(1),d.get_za3lpa$(2));else{var $;if(wu(r))return e.isType($=Qe(e.isType(s=n.get_za3lpa$(0).classifier,st)?s:o(),d.get_za3lpa$(0)),Gl)?$:o();var y=xu(r,M(d).slice());if(null==y){var v="Can't find a method to construct serializer for type "+f(r.simpleName)+". Make sure this class is marked as @Serializable or provide serializer explicitly.";throw O(v.toString())}a=y}return a}(t,g,l))?e.isType(v=s,Gl)?v:o():null}function _u(t){var e;return null!=(e=vu(t))?e:Qr(t)}function mu(t,i){var n;return i?Te(t):e.isType(n=t,Gl)?n:o()}function $u(t,e){if(!et(t).contains_mef7kx$(e))throw new at("Index "+e+" out of bounds "+et(t));return t[e]}function yu(t,e){if(!Ce(t).contains_mef7kx$(e))throw new at("Index "+e+" out of bounds "+Ce(t));return t[e]}function vu(t){var i,n,r;return null!=(r=xu(t,[]))?r:e.isType(n=null!=(i=Ne(t).Companion)?i.serializer():null,Gl)?n:null}function gu(t,e){return M(t)}function bu(t,e){return e.isInstance_s8jyv4$(t)}function xu(t,n){var r,s,a;try{var l=Pe(t,i(zu));a=e.isType(l,Gl)?e.isType(r=l,Gl)?r:o():e.isType(l,$r)?e.isType(s=l.serializer_lu48y9$(n.slice()),Gl)?s:o():null}catch(t){a=null}return a}function wu(t){return null!=t?t.equals(Ee):null}function zu(t){this.serializer=t}Ul.$metadata$={kind:$,simpleName:"JsonEncoder",interfaces:[On,Tn]},Gl.prototype.patch_h7kg3r$=function(t,e){throw de("Not implemented, should not be called")},Gl.$metadata$={kind:$,simpleName:"KSerializer",interfaces:[Wl,Hl]},Hl.$metadata$={kind:$,simpleName:"SerializationStrategy",interfaces:[]},Wl.$metadata$={kind:$,simpleName:"DeserializationStrategy",interfaces:[]},Kl.$metadata$={kind:n,simpleName:"UpdateMode",interfaces:[ae]},Kl.values=function(){return[Yl(),Zl(),Jl()]},Kl.valueOf_61zpoe$=function(t){switch(t){case"BANNED":return Yl();case"OVERWRITE":return Zl();case"UPDATE":return Jl();default:le("No enum constant kotlinx.serialization.UpdateMode."+t)}},Ql.$metadata$={kind:n,simpleName:"SerializersModule",interfaces:[]},tu.prototype.getPolymorphic_joiicr$=function(t,i){var n,r;return bu(i,t)&&e.isType(r=null!=(n=this.polyBase2Serializers.get_11rb$(t))?n.get_11rb$(e.getKClassFromExpression(i)):null,Hl)?r:null},tu.prototype.getPolymorphic_l2fy3k$=function(t,i){var n,r,s,a,l,u;l=null!=(n=this.polyBase2NamedSerializers_0.get_11rb$(t))?(e.isType(u=n,oe)?u:o()).get_11rb$(i):null;var p=e.isType(r=l,Gl)?r:null;return null!=p?p:null!=(a="function"==typeof(s=this.polyBase2DefaultProvider_0.get_11rb$(t))?s:null)?a(i):null},tu.prototype.getContextual_lmshww$=function(t){var i;return e.isType(i=this.class2Serializer_0.get_11rb$(t),Gl)?i:null},tu.prototype.dumpTo_ukvgvw$=function(t){var i,n,r;for(i=this.class2Serializer_0.entries.iterator();i.hasNext();){var s,a,l=i.next(),u=l.key,p=l.value;t.contextual_cfhkba$(e.isType(s=u,st)?s:o(),e.isType(a=p,Gl)?a:o())}for(n=this.polyBase2Serializers.entries.iterator();n.hasNext();){var c,h=n.next(),d=h.key;for(c=h.value.entries.iterator();c.hasNext();){var f,_,m,$=c.next(),y=$.key,v=$.value;t.polymorphic_kfyidi$(e.isType(f=d,st)?f:o(),e.isType(_=y,st)?_:o(),e.isType(m=v,Gl)?m:o())}}for(r=this.polyBase2DefaultProvider_0.entries.iterator();r.hasNext();){var g,b,x=r.next(),w=x.key,z=x.value;t.polymorphicDefault_yd5wsm$(e.isType(g=w,st)?g:o(),"function"==typeof(b=z)?b:o())}},tu.$metadata$={kind:n,simpleName:"SerialModuleImpl",interfaces:[Ql]},eu.$metadata$={kind:$,simpleName:"SerializersModuleCollector",interfaces:[]},ru.prototype.sourceIterator=function(){return this.this$groupingBy.iterator()},ru.prototype.keyOf_11rb$=function(t){return this.closure$keySelector(t)},ru.$metadata$={kind:n,interfaces:[$e]},Object.defineProperty(ou.prototype,"baseClass",{get:function(){return this.baseClass_a0a98o$_0}}),Object.defineProperty(ou.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_gganzq$_0}}),ou.prototype.findPolymorphicSerializerOrNull_ca6uye$=function(t,i){var n,r,s=this.serialName2Serializer_0;return null!=(n=(e.isType(r=s,oe)?r:o()).get_11rb$(i))?n:Mn.prototype.findPolymorphicSerializerOrNull_ca6uye$.call(this,t,i)},ou.prototype.findPolymorphicSerializerOrNull_kjsxpj$=function(t,i){var n,r,s;return null!=(r=null!=(n=this.class2Serializer_0.get_11rb$(e.getKClassFromExpression(i)))?n:Mn.prototype.findPolymorphicSerializerOrNull_kjsxpj$.call(this,t,i))?e.isType(s=r,Hl)?s:o():null},ou.$metadata$={kind:n,simpleName:"SealedClassSerializer",interfaces:[Mn]},au.$metadata$={kind:$,simpleName:"SerialFormat",interfaces:[]},lu.$metadata$={kind:$,simpleName:"StringFormat",interfaces:[au]},uu.$metadata$={kind:n,simpleName:"SerializationException",interfaces:[_e]},cu.$metadata$={kind:n,simpleName:"MissingFieldException",interfaces:[uu]},hu.$metadata$={kind:n,simpleName:"UnknownFieldException",interfaces:[uu]},zu.$metadata$={kind:n,simpleName:"SerializableWith",interfaces:[r]};var ku=t.kotlinx||(t.kotlinx={}),Su=ku.serialization||(ku.serialization={}),Cu=Su.builtins||(Su.builtins={});Cu.get_nullable_2418p6$=Te,Cu.PairSerializer_2yqygg$=Oe,Cu.MapEntrySerializer_2yqygg$=Me,Cu.TripleSerializer_jww85o$=je,Cu.serializer_n24eoe$=Ae,Cu.CharArraySerializer=Re,Cu.serializer_k5zfx8$=Ie,Cu.ByteArraySerializer=Le,Cu.serializer_qetqea$=De,Cu.ShortArraySerializer=qe,Cu.serializer_qn7glr$=Be,Cu.IntArraySerializer=Fe,Cu.serializer_vbrujs$=Ue,Cu.LongArraySerializer=Ve,Cu.serializer_y9phqa$=Ge,Cu.FloatArraySerializer=He,Cu.serializer_6a53gt$=We,Cu.DoubleArraySerializer=Ke,Cu.serializer_jtjczu$=Xe,Cu.BooleanArraySerializer=Ye,Cu.serializer_mours2$=Ze,Cu.serializer_6eet4j$=Je,Cu.ArraySerializer_8tn5u0$=Qe,Cu.ListSerializer_swdriu$=ti,Cu.MapSerializer_2yqygg$=ei,Su.ContextualSerializer=ii;var Nu=Su.descriptors||(Su.descriptors={});Nu.SerialDescriptor=ri,Nu.get_elementDescriptors_583jlf$=si,Nu.buildClassSerialDescriptor_dowfwv$=li,Nu.PrimitiveSerialDescriptor_xytc2a$=ui,Nu.buildSerialDescriptor_2yu4m$=ci,Nu.listSerialDescriptor_24f42q$=hi,Nu.mapSerialDescriptor_2ezn58$=function(t,e){return new Hn(t,e)},Nu.setSerialDescriptor_24f42q$=function(t){return new Un(t)},Nu.ClassSerialDescriptorBuilder=di,Nu.SerialDescriptorImpl=fi,Object.defineProperty(_i,"ENUM",{get:yi}),Object.defineProperty(_i,"CONTEXTUAL",{get:bi}),Nu.SerialKind=_i,Object.defineProperty(xi,"BOOLEAN",{get:ki}),Object.defineProperty(xi,"BYTE",{get:Ni}),Object.defineProperty(xi,"CHAR",{get:Ti}),Object.defineProperty(xi,"SHORT",{get:ji}),Object.defineProperty(xi,"INT",{get:Ii}),Object.defineProperty(xi,"LONG",{get:qi}),Object.defineProperty(xi,"FLOAT",{get:Ui}),Object.defineProperty(xi,"DOUBLE",{get:Hi}),Object.defineProperty(xi,"STRING",{get:Xi}),Nu.PrimitiveKind=xi,Object.defineProperty(Yi,"CLASS",{get:Qi}),Object.defineProperty(Yi,"LIST",{get:nn}),Object.defineProperty(Yi,"MAP",{get:sn}),Object.defineProperty(Yi,"OBJECT",{get:un}),Nu.StructureKind=Yi,Object.defineProperty(pn,"SEALED",{get:dn}),Object.defineProperty(pn,"OPEN",{get:function(){return null===_n&&new fn,_n}}),Nu.PolymorphicKind=pn;var Eu=Su.encoding||(Su.encoding={});Eu.AbstractDecoder=mn,Eu.AbstractEncoder=$n,Eu.Decoder=yn,Object.defineProperty(vn,"Companion",{get:Pn}),Eu.CompositeDecoder=vn,Eu.Encoder=Tn,Eu.CompositeEncoder=On;var Pu=Su.internal||(Su.internal={});Pu.AbstractPolymorphicSerializer=Mn,Pu.throwSubtypeNotRegistered_it6qj1$=jn,Pu.throwSubtypeNotRegistered_zgnrn5$=An,Pu.ListLikeDescriptor=Rn,Pu.MapLikeDescriptor=In,Pu.PrimitiveArrayDescriptor=Ln,Pu.ArrayClassDesc=Dn,Pu.ArrayListClassDesc=qn,Pu.NamedListClassDescriptor=Bn,Pu.LinkedHashSetClassDesc=Fn,Pu.HashSetClassDesc=Un,Pu.NamedMapClassDescriptor=Vn,Pu.LinkedHashMapClassDesc=Gn,Pu.HashMapClassDesc=Hn,Pu.AbstractCollectionSerializer=Wn,Pu.ListLikeSerializer=Kn,Pu.MapLikeSerializer=Xn,Pu.PrimitiveArrayBuilder=Yn,Pu.PrimitiveArraySerializer=Zn,Pu.ReferenceArraySerializer=Jn,Pu.ArrayListSerializer=Qn,Pu.LinkedHashSetSerializer=tr,Pu.HashSetSerializer=er,Pu.LinkedHashMapSerializer=ir,Pu.HashMapSerializer=nr,Pu.EnumSerializer=rr,Pu.NullableSerializer=or,Pu.SerialDescriptorForNullable=sr,Pu.ObjectSerializer=ar,Pu.cachedSerialNames_tie8r4$=lr,Pu.compactArray_b0lhx2$=ur,Pu.defer_nmpjmt$=cr,Su.KSerializer=Gl,Su.SerializationStrategy=Hl,Su.DeserializationStrategy=Wl,Pu.serializerNotRegistered_lu5d9p$=hr,Pu.kclass_7v1px$=dr,Pu.getElementIndexOrThrow_luk6xe$=fr,Pu.PluginGeneratedSerialDescriptor=_r,Pu.GeneratedSerializer=mr,Pu.SerializerFactory=$r,Object.defineProperty(Pu,"ByteArraySerializer",{get:gr}),Pu.ByteArrayBuilder=br,Object.defineProperty(Pu,"ShortArraySerializer",{get:zr}),Pu.ShortArrayBuilder=kr,Object.defineProperty(Pu,"IntArraySerializer",{get:Nr}),Pu.IntArrayBuilder=Er,Object.defineProperty(Pu,"LongArraySerializer",{get:Or}),Pu.LongArrayBuilder=Mr,Object.defineProperty(Pu,"FloatArraySerializer",{get:Rr}),Pu.FloatArrayBuilder=Ir,Object.defineProperty(Pu,"DoubleArraySerializer",{get:qr}),Pu.DoubleArrayBuilder=Br,Object.defineProperty(Pu,"CharArraySerializer",{get:Vr}),Pu.CharArrayBuilder=Gr,Object.defineProperty(Pu,"BooleanArraySerializer",{get:Xr}),Pu.BooleanArrayBuilder=Yr,Pu.PrimitiveSerialDescriptor=Zr,Pu.PrimitiveDescriptorSafe_2z23zl$=Jr,Pu.builtinSerializerOrNull_beh9s$=Qr,Object.defineProperty(Pu,"UnitSerializer",{get:io}),Object.defineProperty(Pu,"BooleanSerializer",{get:oo}),Object.defineProperty(Pu,"ByteSerializer",{get:lo}),Object.defineProperty(Pu,"ShortSerializer",{get:co}),Object.defineProperty(Pu,"IntSerializer",{get:_o}),Object.defineProperty(Pu,"LongSerializer",{get:yo}),Object.defineProperty(Pu,"FloatSerializer",{get:bo}),Object.defineProperty(Pu,"DoubleSerializer",{get:zo}),Object.defineProperty(Pu,"CharSerializer",{get:Co}),Object.defineProperty(Pu,"StringSerializer",{get:ns}),Pu.Migration=rs,Pu.TaggedEncoder=os,Pu.NamedValueEncoder=ss,Pu.TaggedDecoder=as,Pu.NamedValueDecoder=ls,Pu.KeyValueSerializer=us,Pu.MapEntrySerializer=ps,Pu.PairSerializer=hs,Pu.TripleSerializer=ds;var Tu=Su.json||(Su.json={}),Ou=Tu.internal||(Tu.internal={});Ou.JsonConf=fs,Ou.JsonException=_s,Ou.JsonDecodingException=ms,Ou.JsonEncodingException=$s,Ou.JsonDecodingException_kx378j$=ys,Ou.InvalidFloatingPointEncoded_qwibp1$=vs,Ou.InvalidFloatingPointEncoded_x0xb19$=gs,Ou.InvalidFloatingPointDecoded_x0xb19$=bs,Ou.throwInvalidFloatingPointDecoded_nyj901$=xs,Ou.UnknownKeyException_wdz5eb$=zs,Ou.InvalidKeyKindException_jo479d$=ks,Ou.JsonParser=Cs,Object.defineProperty(Ou,"EscapeCharMappings",{get:Rs}),Ou.charToTokenClass_8e8zqy$=Ds,Ou.escapeToChar_kcn2v3$=qs,Ou.JsonReader=Bs,Ou.checkKind_x1ow4c$=Us,Ou.decodeSerializableValuePolymorphic_3uiavc$=Vs,Ou.PolymorphismValidator=Gs,Ou.StreamingJsonDecoder=Hs,Ws.Composer=Ks,Ou.StreamingJsonEncoder_init_e4t9r6$=Xs,Ou.StreamingJsonEncoder=Ws,Ou.printQuoted_jigvc$=Zs,Ou.toBooleanStrict_7efafi$=Js,Ou.toBooleanStrictOrNull_7efafi$=Qs,Ou.readJson_ijhaef$=ta,Ou.readPolymorphicJson_nnpnh6$=ea,Ou.writeJson_4dixew$=aa,Object.defineProperty(da,"OBJ",{get:_a}),Object.defineProperty(da,"LIST",{get:ma}),Object.defineProperty(da,"MAP",{get:$a}),Object.defineProperty(da,"POLY_OBJ",{get:ya}),Ou.WriteMode=da,Ou.switchMode_q3nfcb$=ga,Object.defineProperty(ba,"Default",{get:Sa}),Tu.Json=ba,Tu.Json_x26noe$=function(t,e){void 0===t&&(t=Sa());var i=new Ca(t.configuration_8be2vx$);return e(i),new Na(i.build_8be2vx$())},Tu.JsonBuilder=Ca,Tu.JsonContentPolymorphicSerializer=Ea,Tu.JsonDecoder=Pa,Object.defineProperty(Ta,"Companion",{get:ja}),Tu.JsonElement=Ta,Object.defineProperty(Aa,"Companion",{get:La}),Tu.JsonPrimitive=Aa,Tu.JsonPrimitive_1v8dbw$=Da,Tu.JsonPrimitive_rcaewn$=qa,Tu.JsonPrimitive_pdl1vj$=Ba,Tu.JsonLiteral=Fa,Object.defineProperty(Tu,"JsonNull",{get:Ga}),Object.defineProperty(Ha,"Companion",{get:Ya}),Tu.JsonObject=Ha,Object.defineProperty(Za,"Companion",{get:tl}),Tu.JsonArray=Za,Tu.get_jsonPrimitive_u3sd3g$=el,Tu.get_int_59esu7$=il,Tu.get_long_59esu7$=nl,Tu.get_longOrNull_59esu7$=rl,Tu.get_double_59esu7$=ol,Tu.get_doubleOrNull_59esu7$=sl,Tu.get_float_59esu7$=al,Tu.get_boolean_59esu7$=ll,Tu.get_booleanOrNull_59esu7$=ul,Tu.get_contentOrNull_59esu7$=pl,Object.defineProperty(Tu,"JsonElementSerializer",{get:vl}),Object.defineProperty(Tu,"JsonPrimitiveSerializer",{get:xl}),Object.defineProperty(Tu,"JsonNullSerializer",{get:kl}),Object.defineProperty(Tu,"JsonObjectSerializer",{get:Tl}),Object.defineProperty(Tu,"JsonArraySerializer",{get:Ll}),Tu.asJsonDecoder_k984l0$=Bl,Tu.asJsonEncoder_vwx09w$=Fl,Tu.JsonEncoder=Ul,Tu.JsonTransformingSerializer=Vl,Object.defineProperty(Kl,"BANNED",{get:Yl}),Object.defineProperty(Kl,"OVERWRITE",{get:Zl}),Object.defineProperty(Kl,"UPDATE",{get:Jl}),Su.UpdateMode=Kl;var Mu=Su.modules||(Su.modules={});Mu.SerializersModule=Ql,Mu.SerialModuleImpl=tu,Mu.SerializersModuleCollector=eu,Su.findPolymorphicSerializer_uce5au$=iu,Su.findPolymorphicSerializer_dz33bw$=nu,Su.SealedClassSerializer=ou,Su.SerialFormat=au,Su.StringFormat=lu,Su.SerializationException_init_pdl1vj$=pu,Su.SerializationException=uu,Su.MissingFieldException=cu,Su.UnknownFieldException=hu,Su.serializer_saj79j$=function(t){var e;return mu(null!=(e=fu(Rl,t))?e:hr(dr(t)),t.isMarkedNullable)},Su.serializer_ca95z9$=du,Su.serializerOrNull_1yb8b7$=_u,Pu.getChecked_4bqw6o$=$u,Pu.getChecked_3zu3yo$=yu,Pu.compiledSerializerImpl_beh9s$=vu,Pu.toNativeArrayImpl_wfz7v1$=gu,Pu.isInstanceOf_ofcvxk$=bu,Pu.constructSerializerForGivenTypeArgs_f7nown$=xu,Pu.isReferenceArray_79m3vz$=wu,Su.SerializableWith=zu,Gl.prototype.patch_h7kg3r$,ii.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(fi.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),mn.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,mn.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,mn.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,mn.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,mn.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,mn.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,mn.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,mn.prototype.decodeSequentially=vn.prototype.decodeSequentially,mn.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,mn.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,mn.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,mn.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,mn.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,$n.prototype.beginStructure_24f42q$=Tn.prototype.beginStructure_24f42q$,$n.prototype.encodeNotNullMark=Tn.prototype.encodeNotNullMark,$n.prototype.beginCollection_szpzho$=Tn.prototype.beginCollection_szpzho$,$n.prototype.beginCollection_m8o8wh$=Tn.prototype.beginCollection_m8o8wh$,$n.prototype.encodeSerializableValue_tf03ej$=Tn.prototype.encodeSerializableValue_tf03ej$,$n.prototype.encodeNullableSerializableValue_f4686g$=Tn.prototype.encodeNullableSerializableValue_f4686g$,$n.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,$n.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,Mn.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(Rn.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(Rn.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),Object.defineProperty(In.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(In.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),Wn.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(_r.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),rr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,or.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ar.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(pr.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(pr.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),mr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,yr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,xr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Sr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Pr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,jr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Lr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Fr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Hr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(Zr.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(Zr.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),no.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,so.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,uo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ho.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,mo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,vo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,xo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ko.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,No.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(rs.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(rs.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),os.prototype.beginStructure_24f42q$=Tn.prototype.beginStructure_24f42q$,os.prototype.beginCollection_szpzho$=Tn.prototype.beginCollection_szpzho$,os.prototype.beginCollection_m8o8wh$=Tn.prototype.beginCollection_m8o8wh$,os.prototype.encodeSerializableValue_tf03ej$=Tn.prototype.encodeSerializableValue_tf03ej$,os.prototype.encodeNullableSerializableValue_f4686g$=Tn.prototype.encodeNullableSerializableValue_f4686g$,os.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,os.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,as.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,as.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,as.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,as.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,as.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,as.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,as.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,as.prototype.decodeSequentially=vn.prototype.decodeSequentially,as.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,as.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,as.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,as.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,as.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,us.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ds.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Pa.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,Pa.prototype.beginStructure_jvp2sb$=yn.prototype.beginStructure_jvp2sb$,Pa.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,Pa.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,Pa.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,Pa.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,Pa.prototype.decodeSequentially=vn.prototype.decodeSequentially,Pa.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,Pa.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,Pa.prototype.decodeSerializableElement_12e8id$$default=vn.prototype.decodeSerializableElement_12e8id$$default,Pa.prototype.decodeNullableSerializableElement_8viuyw$$default=vn.prototype.decodeNullableSerializableElement_8viuyw$$default,Pa.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,Pa.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,Pa.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,Pa.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,Pa.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,Hs.prototype.decodeNullableSerializableValue_aae3ea$=Pa.prototype.decodeNullableSerializableValue_aae3ea$,Hs.prototype.updateSerializableValue_19c8k5$=Pa.prototype.updateSerializableValue_19c8k5$,Hs.prototype.updateNullableSerializableValue_exmlbs$=Pa.prototype.updateNullableSerializableValue_exmlbs$,Hs.prototype.decodeSequentially=Pa.prototype.decodeSequentially,Hs.prototype.decodeCollectionSize_24f42q$=Pa.prototype.decodeCollectionSize_24f42q$,Hs.prototype.decodeSerializableElement_186mnl$=Pa.prototype.decodeSerializableElement_186mnl$,Hs.prototype.decodeNullableSerializableElement_pzkbua$=Pa.prototype.decodeNullableSerializableElement_pzkbua$,Hs.prototype.updateSerializableElement_12e8id$=Pa.prototype.updateSerializableElement_12e8id$,Hs.prototype.updateNullableSerializableElement_8viuyw$=Pa.prototype.updateNullableSerializableElement_8viuyw$,Ul.prototype.encodeNotNullMark=Tn.prototype.encodeNotNullMark,Ul.prototype.beginStructure_24f42q$=Tn.prototype.beginStructure_24f42q$,Ul.prototype.beginStructure_jvp2sb$=Tn.prototype.beginStructure_jvp2sb$,Ul.prototype.beginCollection_szpzho$=Tn.prototype.beginCollection_szpzho$,Ul.prototype.beginCollection_m8o8wh$=Tn.prototype.beginCollection_m8o8wh$,Ul.prototype.encodeSerializableValue_tf03ej$=Tn.prototype.encodeSerializableValue_tf03ej$,Ul.prototype.encodeNullableSerializableValue_f4686g$=Tn.prototype.encodeNullableSerializableValue_f4686g$,Ul.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,Ul.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,Ws.prototype.encodeNotNullMark=Ul.prototype.encodeNotNullMark,Ws.prototype.beginCollection_szpzho$=Ul.prototype.beginCollection_szpzho$,Ws.prototype.beginCollection_m8o8wh$=Ul.prototype.beginCollection_m8o8wh$,Ws.prototype.encodeNullableSerializableValue_f4686g$=Ul.prototype.encodeNullableSerializableValue_f4686g$,Ws.prototype.encodeNonSerializableElement_ptgdlt$=Ul.prototype.encodeNonSerializableElement_ptgdlt$,Ea.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,cl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,gl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,wl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Sl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,El.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Ol.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Vl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,bn="kotlin.Array",xn="kotlin.collections.ArrayList",wn="kotlin.collections.LinkedHashSet",zn="kotlin.collections.HashSet",kn="kotlin.collections.LinkedHashMap",Sn="kotlin.collections.HashMap",Cn=[],Nn=[],Wr=Rt([N(yt,Je()),N(i(vt),Ae()),N(gt,Re()),N(bt,We()),N(xt,Ke()),N(wt,Ge()),N(zt,He()),N(i(kt),Ue()),N(St,Ve()),N(Ct,Be()),N(Nt,Fe()),N(Et,De()),N(Pt,qe()),N(Tt,Ie()),N(Ot,Le()),N(Mt,Xe()),N(jt,Ye()),N(i(Object.getPrototypeOf(At.Unit).constructor),Ze())]),Eo=new L,Po="Use 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",To="It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'",Oo="Use 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.",Mo="Use 'allowStructuredMapKeys = true' in 'Json {}' builder to convert such maps to [key1, value1, key2, value2,...] arrays.",jo="null",Ao=44,Ro=58,Io=123,Lo=125,Do=91,qo=93,Bo=34,Fo=92,Uo=Ht(0),Vo=117,Go=0,Ho=1,Wo=4,Ko=5,Xo=6,Yo=7,Zo=8,Jo=9,Qo=10,ts=12;for(var ju=new Int8Array(126),Au=0;Au<=32;Au++)Is(ju,Au,11);Is(ju,9,3),Is(ju,10,3),Is(ju,13,3),Is(ju,32,3),Ls(ju,Ao,Wo),Ls(ju,Ro,Ko),Ls(ju,Io,Xo),Ls(ju,Lo,Yo),Ls(ju,Do,Zo),Ls(ju,qo,Jo),Ls(ju,Bo,Ho),Ls(ju,Fo,2),es=ju;for(var Ru=e.newArray(128,null),Iu=0;Iu<=31;Iu++){var Lu=Ys(Iu>>12),Du=Ys(Iu>>8),qu=Ys(Iu>>4),Bu=Ys(Iu);Ru[Iu]="\\u"+String.fromCharCode(Lu)+String.fromCharCode(Du)+String.fromCharCode(qu)+String.fromCharCode(Bu)}return Ru[34]='\\"',Ru[92]="\\\\",Ru[9]="\\t",Ru[8]="\\b",Ru[10]="\\n",Ru[13]="\\r",Ru[12]="\\f",Es=Ru,Ps="primitive",wa="    ",za="type",Rl=new tu(fe(),fe(),fe(),fe()),Se.toNumber(),t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";var n={};(0,i(0).assign)(n,i(15),i(18),i(9)),t.exports=n},function(t,e,i){"use strict";var n=i(16),r=i(0),o=i(7),s=i(2),a=i(8),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=n.deflateSetDictionary(this.strm,p)))throw new Error(s[i]);this._dict_set=!0}}function p(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}u.prototype.push=function(t,e){var i,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(i=n.deflate(a,s))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),a.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,i){"use strict";var n,r=i(0),o=i(17),s=i(5),a=i(6),l=i(2);function u(t,e){return t.msg=l[e],e}function p(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function h(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function d(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,h(t.strm)}function f(t,e){t.pending_buf[t.pending++]=e}function _(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,p=t.w_mask,c=t.prev,h=t.strstart+258,d=u[o+s-1],f=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(i=e)+s]===f&&u[i+s-1]===d&&u[i]===u[o]&&u[++i]===u[o+1]){o+=2,i++;do{}while(u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&o<h);if(n=258-(h-o),o=h-258,n>s){if(t.match_start=e,s=n,n>=a)break;d=u[o+s-1],f=u[o+s]}}}while((e=c[e&p])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function $(t){var e,i,n,o,l,u,p,c,h,d,f=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-262)){r.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--i);e=i=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--i);o+=f}if(0===t.strm.avail_in)break;if(u=t.strm,p=t.window,c=t.strstart+t.lookahead,h=o,d=void 0,(d=u.avail_in)>h&&(d=h),i=0===d?0:(u.avail_in-=d,r.arraySet(p,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=s(u.adler,p,d,c):2===u.state.wrap&&(u.adler=a(u.adler,p,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function y(t,e){for(var i,n;;){if(t.lookahead<262){if($(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=m(t,i)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function v(t,e){for(var i,n,r;;){if(t.lookahead<262){if($(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=m(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function g(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):u(t,-2)}function w(t){var e,i=x(t);return 0===i&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function z(t,e,i,n,o,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||8!==i||n<8||n>15||e<0||e>9||s<0||s>4)return u(t,-2);8===n&&(n=9);var l=new b;return t.state=l,l.strm=t,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,w(t)}n=[new g(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if($(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new g(4,4,8,4,y),new g(4,5,16,8,y),new g(4,6,32,32,y),new g(4,4,16,16,v),new g(8,16,32,32,v),new g(8,16,128,128,v),new g(8,32,128,256,v),new g(32,128,258,1024,v),new g(32,258,258,4096,v)],e.deflateInit=function(t,e){return z(t,e,8,15,8,0)},e.deflateInit2=z,e.deflateReset=w,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var i,r,s,l;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(r.strm=t,i=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,f(r,31),f(r,139),f(r,8),r.gzhead?(f(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),f(r,255&r.gzhead.time),f(r,r.gzhead.time>>8&255),f(r,r.gzhead.time>>16&255),f(r,r.gzhead.time>>24&255),f(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),f(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(f(r,255&r.gzhead.extra.length),f(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(f(r,0),f(r,0),f(r,0),f(r,0),f(r,0),f(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),f(r,3),r.status=113);else{var m=8+(r.w_bits-8<<4)<<8;m|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(m|=32),m+=31-m%31,r.status=113,_(r,m),0!==r.strstart&&(_(r,t.adler>>>16),_(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),h(t),s=r.pending,r.pending!==r.pending_buf_size));)f(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),h(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,f(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),h(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,f(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&h(t),r.pending+2<=r.pending_buf_size&&(f(r,255&t.adler),f(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(h(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(i)&&4!==e)return u(t,-5);if(666===r.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var y=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&($(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=258){if($(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){s=t.strstart+258;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):n[r.level].func(r,e);if(3!==y&&4!==y||(r.status=666),1===y||3===y)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===y&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),h(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(f(r,255&t.adler),f(r,t.adler>>8&255),f(r,t.adler>>16&255),f(r,t.adler>>24&255),f(r,255&t.total_in),f(r,t.total_in>>8&255),f(r,t.total_in>>16&255),f(r,t.total_in>>24&255)):(_(r,t.adler>>>16),_(r,65535&t.adler)),h(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var i,n,o,a,l,u,p,h,d=e.length;if(!t||!t.state)return-2;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return-2;for(1===a&&(t.adler=s(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new r.Buf8(i.w_size),r.arraySet(h,e,d-i.w_size,i.w_size,0),e=h,d=i.w_size),l=t.avail_in,u=t.next_in,p=t.input,t.avail_in=d,t.next_in=0,t.input=e,$(i);i.lookahead>=3;){n=i.strstart,o=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--o);i.strstart=n,i.lookahead=2,$(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=u,t.input=p,t.avail_in=l,i.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(0);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);r(u);var p=new Array(60);r(p);var c=new Array(512);r(c);var h=new Array(256);r(h);var d=new Array(29);r(d);var f,_,m,$=new Array(30);function y(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function v(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function g(t){return t<256?c[t]:c[256+(t>>>7)]}function b(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function w(t,e,i){x(t,i[2*e],i[2*e+1])}function z(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function k(t,e,i){var n,r,o=new Array(16),s=0;for(n=1;n<=15;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=z(o[a]++,a))}}function S(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function C(t){t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function N(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function E(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&N(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!N(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function P(t,e,i){var n,r,a,l,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===n?w(t,r,e):(w(t,(a=h[r])+256+1,e),0!==(l=o[a])&&x(t,r-=d[a],l),w(t,a=g(--n),i),0!==(l=s[a])&&x(t,n-=$[a],l))}while(u<t.last_lit);w(t,256,e)}function T(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<l;i++)0!==o[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)E(t,o,i);r=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,E(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,o,s,a,l=e.dyn_tree,u=e.max_code,p=e.stat_desc.static_tree,c=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,_=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(o=l[2*l[2*(n=t.heap[i])+1]+1]+1)>f&&(o=f,_++),l[2*n+1]=o,n>u||(t.bl_count[o]++,s=0,n>=d&&(s=h[n-d]),a=l[2*n],t.opt_len+=a*(o+s),c&&(t.static_len+=a*(p[2*n+1]+s)));if(0!==_){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,_-=2}while(_>0);for(o=f;0!==o;o--)for(n=t.bl_count[o];0!==n;)(r=t.heap[--i])>u||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),n--)}}(t,e),k(o,u,t.bl_count)}function O(t,e,i){var n,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<l&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))}function M(t,e,i){var n,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<l&&r===s)){if(a<u)do{w(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(w(t,r,t.bl_tree),a--),w(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(w(t,17,t.bl_tree),x(t,a-3,3)):(w(t,18,t.bl_tree),x(t,a-11,7));a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4)}}r($);var j=!1;function A(t,e,i,r){x(t,0+(r?1:0),3),function(t,e,i,r){C(t),r&&(b(t,i),b(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){j||(!function(){var t,e,i,n,r,l=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<o[n];t++)h[i++]=n;for(h[i-1]=n,r=0,n=0;n<16;n++)for($[n]=r,t=0;t<1<<s[n];t++)c[r++]=n;for(r>>=7;n<30;n++)for($[n]=r<<7,t=0;t<1<<s[n]-7;t++)c[256+r++]=n;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(k(u,287,l),t=0;t<30;t++)p[2*t+1]=5,p[2*t]=z(t,5);f=new y(u,o,257,286,15),_=new y(p,s,0,30,15),m=new y(new Array(0),a,0,19,7)}(),j=!0),t.l_desc=new v(t.dyn_ltree,f),t.d_desc=new v(t.dyn_dtree,_),t.bl_desc=new v(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,S(t)},e._tr_stored_block=A,e._tr_flush_block=function(t,e,i,n){var r,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),T(t,t.l_desc),T(t,t.d_desc),s=function(t){var e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),T(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==e?A(t,e,i,n):4===t.strategy||o===r?(x(t,2+(n?1:0),3),P(t,u,p)):(x(t,4+(n?1:0),3),function(t,e,i,n){var r;for(x(t,e-257,5),x(t,i-1,5),x(t,n-4,4),r=0;r<n;r++)x(t,t.bl_tree[2*l[r]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),P(t,t.dyn_ltree,t.dyn_dtree)),S(t),n&&C(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(h[i]+256+1)]++,t.dyn_dtree[2*g(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),w(t,256,u),function(t){16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(19),r=i(0),o=i(7),s=i(9),a=i(2),l=i(8),u=i(22),p=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===p.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[i])}function h(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}c.prototype.push=function(t,e){var i,a,l,u,c,h=this.strm,d=this.options.chunkSize,f=this.options.dictionary,_=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===p.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new r.Buf8(d),h.next_out=0,h.avail_out=d),(i=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(i=n.inflateSetDictionary(this.strm,f)),i===s.Z_BUF_ERROR&&!0===_&&(i=s.Z_OK,_=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&i!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),u=h.next_out-l,c=o.buf2string(h.output,l),h.next_out=u,h.avail_out=d-u,u&&r.arraySet(h.output,h.output,l,u,0),this.onData(c)):this.onData(r.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(_=!0)}while((h.avail_in>0||0===h.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),h.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=h,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.ungzip=h},function(t,e,i){"use strict";var n=i(0),r=i(5),o=i(6),s=i(20),a=i(21);function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,p(t)):-2}function h(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,c(t))):-2}function d(t,e){var i,n;return t?(n=new u,t.state=n,n.window=null,0!==(i=h(t,e))&&(t.state=null),i):-2}var f,_,m=!0;function $(t){if(m){var e;for(f=new n.Buf32(512),_=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,f,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,_,0,t.work,{bits:5}),m=!1}t.lencode=f,t.lenbits=9,t.distcode=_,t.distbits=5}function y(t,e,i,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),n.arraySet(s.window,e,i-r,o,s.wnext),(r-=o)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=c,e.inflateReset2=h,e.inflateResetKeep=p,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var i,u,p,c,h,d,f,_,m,v,g,b,x,w,z,k,S,C,N,E,P,T,O,M,j=0,A=new n.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),h=t.next_out,p=t.output,f=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,_=i.hold,m=i.bits,v=d,g=f,T=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(2&i.wrap&&35615===_){i.check=0,A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0),_=0,m=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&_)){t.msg="unknown compression method",i.mode=30;break}if(m-=4,P=8+(15&(_>>>=4)),0===i.wbits)i.wbits=P;else if(P>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<P,t.adler=i.check=1,i.mode=512&_?10:12,_=0,m=0;break;case 2:for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(i.flags=_,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=_>>8&1),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0)),_=0,m=0,i.mode=3;case 3:for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.head&&(i.head.time=_),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,A[2]=_>>>16&255,A[3]=_>>>24&255,i.check=o(i.check,A,4,0)),_=0,m=0,i.mode=4;case 4:for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.head&&(i.head.xflags=255&_,i.head.os=_>>8),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0)),_=0,m=0,i.mode=5;case 5:if(1024&i.flags){for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.length=_,i.head&&(i.head.extra_len=_),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0)),_=0,m=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((b=i.length)>d&&(b=d),b&&(i.head&&(P=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,u,c,b,P)),512&i.flags&&(i.check=o(i.check,u,b,c)),d-=b,c+=b,i.length-=b),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===d)break t;b=0;do{P=u[c+b++],i.head&&P&&i.length<65536&&(i.head.name+=String.fromCharCode(P))}while(P&&b<d);if(512&i.flags&&(i.check=o(i.check,u,b,c)),d-=b,c+=b,P)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===d)break t;b=0;do{P=u[c+b++],i.head&&P&&i.length<65536&&(i.head.comment+=String.fromCharCode(P))}while(P&&b<d);if(512&i.flags&&(i.check=o(i.check,u,b,c)),d-=b,c+=b,P)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}_=0,m=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}t.adler=i.check=l(_),_=0,m=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){_>>>=7&m,m-=7&m,i.mode=27;break}for(;m<3;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}switch(i.last=1&_,m-=1,3&(_>>>=1)){case 0:i.mode=14;break;case 1:if($(i),i.mode=20,6===e){_>>>=2,m-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}_>>>=2,m-=2;break;case 14:for(_>>>=7&m,m-=7&m;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if((65535&_)!=(_>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&_,_=0,m=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(b=i.length){if(b>d&&(b=d),b>f&&(b=f),0===b)break t;n.arraySet(p,u,c,b,h),d-=b,c+=b,f-=b,h+=b,i.length-=b;break}i.mode=12;break;case 17:for(;m<14;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(i.nlen=257+(31&_),_>>>=5,m-=5,i.ndist=1+(31&_),_>>>=5,m-=5,i.ncode=4+(15&_),_>>>=4,m-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;m<3;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.lens[R[i.have++]]=7&_,_>>>=3,m-=3}for(;i.have<19;)i.lens[R[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},T=a(0,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,T){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;k=(j=i.lencode[_&(1<<i.lenbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(S<16)_>>>=z,m-=z,i.lens[i.have++]=S;else{if(16===S){for(M=z+2;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_>>>=z,m-=z,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}P=i.lens[i.have-1],b=3+(3&_),_>>>=2,m-=2}else if(17===S){for(M=z+3;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}m-=z,P=0,b=3+(7&(_>>>=z)),_>>>=3,m-=3}else{for(M=z+7;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}m-=z,P=0,b=11+(127&(_>>>=z)),_>>>=7,m-=7}if(i.have+b>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;b--;)i.lens[i.have++]=P}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,O={bits:i.lenbits},T=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,T){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},T=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,T){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(d>=6&&f>=258){t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,s(t,g),h=t.next_out,p=t.output,f=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,_=i.hold,m=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;k=(j=i.lencode[_&(1<<i.lenbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(k&&0==(240&k)){for(C=z,N=k,E=S;k=(j=i.lencode[E+((_&(1<<C+N)-1)>>C)])>>>16&255,S=65535&j,!(C+(z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}_>>>=C,m-=C,i.back+=C}if(_>>>=z,m-=z,i.back+=z,i.length=S,0===k){i.mode=26;break}if(32&k){i.back=-1,i.mode=12;break}if(64&k){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&k,i.mode=22;case 22:if(i.extra){for(M=i.extra;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.length+=_&(1<<i.extra)-1,_>>>=i.extra,m-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;k=(j=i.distcode[_&(1<<i.distbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(0==(240&k)){for(C=z,N=k,E=S;k=(j=i.distcode[E+((_&(1<<C+N)-1)>>C)])>>>16&255,S=65535&j,!(C+(z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}_>>>=C,m-=C,i.back+=C}if(_>>>=z,m-=z,i.back+=z,64&k){t.msg="invalid distance code",i.mode=30;break}i.offset=S,i.extra=15&k,i.mode=24;case 24:if(i.extra){for(M=i.extra;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.offset+=_&(1<<i.extra)-1,_>>>=i.extra,m-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===f)break t;if(b=g-f,i.offset>b){if((b=i.offset-b)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}b>i.wnext?(b-=i.wnext,x=i.wsize-b):x=i.wnext-b,b>i.length&&(b=i.length),w=i.window}else w=p,x=h-i.offset,b=i.length;b>f&&(b=f),f-=b,i.length-=b;do{p[h++]=w[x++]}while(--b);0===i.length&&(i.mode=21);break;case 26:if(0===f)break t;p[h++]=i.length,f--,i.mode=21;break;case 27:if(i.wrap){for(;m<32;){if(0===d)break t;d--,_|=u[c++]<<m,m+=8}if(g-=f,t.total_out+=g,i.total+=g,g&&(t.adler=i.check=i.flags?o(i.check,p,g,h-g):r(i.check,p,g,h-g)),g=f,(i.flags?_:l(_))!==i.check){t.msg="incorrect data check",i.mode=30;break}_=0,m=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}_=0,m=0}i.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,(i.wsize||g!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&y(t,t.output,t.next_out,g-t.avail_out)?(i.mode=31,-4):(v-=t.avail_in,g-=t.avail_out,t.total_in+=v,t.total_out+=g,i.total+=g,i.wrap&&g&&(t.adler=i.check=i.flags?o(i.check,p,g,t.next_out-g):r(i.check,p,g,t.next_out-g)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===v&&0===g||4===e)&&0===T&&(T=-5),T)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?-2:(i.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&r(1,e,n,0)!==i.check?-3:y(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S;i=t.state,n=t.next_in,k=t.input,r=n+(t.avail_in-5),o=t.next_out,S=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=i.dmax,u=i.wsize,p=i.whave,c=i.wnext,h=i.window,d=i.hold,f=i.bits,_=i.lencode,m=i.distcode,$=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),v=_[d&$];e:for(;;){if(d>>>=g=v>>>24,f-=g,0===(g=v>>>16&255))S[o++]=65535&v;else{if(!(16&g)){if(0==(64&g)){v=_[(65535&v)+(d&(1<<g)-1)];continue e}if(32&g){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}b=65535&v,(g&=15)&&(f<g&&(d+=k[n++]<<f,f+=8),b+=d&(1<<g)-1,d>>>=g,f-=g),f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),v=m[d&y];i:for(;;){if(d>>>=g=v>>>24,f-=g,!(16&(g=v>>>16&255))){if(0==(64&g)){v=m[(65535&v)+(d&(1<<g)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&v,f<(g&=15)&&(d+=k[n++]<<f,(f+=8)<g&&(d+=k[n++]<<f,f+=8)),(x+=d&(1<<g)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=g,f-=g,x>(g=o-s)){if((g=x-g)>p&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(w=0,z=h,0===c){if(w+=u-g,g<b){b-=g;do{S[o++]=h[w++]}while(--g);w=o-x,z=S}}else if(c<g){if(w+=u+c-g,(g-=c)<b){b-=g;do{S[o++]=h[w++]}while(--g);if(w=0,c<b){b-=g=c;do{S[o++]=h[w++]}while(--g);w=o-x,z=S}}}else if(w+=c-g,g<b){b-=g;do{S[o++]=h[w++]}while(--g);w=o-x,z=S}for(;b>2;)S[o++]=z[w++],S[o++]=z[w++],S[o++]=z[w++],b-=3;b&&(S[o++]=z[w++],b>1&&(S[o++]=z[w++]))}else{w=o-x;do{S[o++]=S[w++],S[o++]=S[w++],S[o++]=S[w++],b-=3}while(b>2);b&&(S[o++]=S[w++],b>1&&(S[o++]=S[w++]))}break}}break}}while(n<r&&o<a);n-=b=f>>3,d&=(1<<(f-=b<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=d,i.bits=f}},function(t,e,i){"use strict";var n=i(0),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,l,u,p,c,h){var d,f,_,m,$,y,v,g,b,x=h.bits,w=0,z=0,k=0,S=0,C=0,N=0,E=0,P=0,T=0,O=0,M=null,j=0,A=new n.Buf16(16),R=new n.Buf16(16),I=null,L=0;for(w=0;w<=15;w++)A[w]=0;for(z=0;z<l;z++)A[e[i+z]]++;for(C=x,S=15;S>=1&&0===A[S];S--);if(C>S&&(C=S),0===S)return u[p++]=20971520,u[p++]=20971520,h.bits=1,0;for(k=1;k<S&&0===A[k];k++);for(C<k&&(C=k),P=1,w=1;w<=15;w++)if(P<<=1,(P-=A[w])<0)return-1;if(P>0&&(0===t||1!==S))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+A[w];for(z=0;z<l;z++)0!==e[i+z]&&(c[R[e[i+z]]++]=z);if(0===t?(M=I=c,y=19):1===t?(M=r,j-=257,I=o,L-=257,y=256):(M=s,I=a,y=-1),O=0,z=0,w=k,$=p,N=C,E=0,_=-1,m=(T=1<<C)-1,1===t&&T>852||2===t&&T>592)return 1;for(;;){v=w-E,c[z]<y?(g=0,b=c[z]):c[z]>y?(g=I[L+c[z]],b=M[j+c[z]]):(g=96,b=0),d=1<<w-E,k=f=1<<N;do{u[$+(O>>E)+(f-=d)]=v<<24|g<<16|b|0}while(0!==f);for(d=1<<w-1;O&d;)d>>=1;if(0!==d?(O&=d-1,O+=d):O=0,z++,0==--A[w]){if(w===S)break;w=e[i+c[z]]}if(w>C&&(O&m)!==_){for(0===E&&(E=C),$+=k,P=1<<(N=w-E);N+E<S&&!((P-=A[N+E])<=0);)N++,P<<=1;if(T+=1<<N,1===t&&T>852||2===t&&T>592)return 1;u[_=O&m]=C<<24|N<<16|$-p|0}}return 0!==O&&(u[$+O]=w-E<<24|64<<16|0),h.bits=C,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])}));
//# sourceMappingURL=kool-demo.js.map