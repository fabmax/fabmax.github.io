!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["kool-demo"]=e():t["kool-demo"]=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)o(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,o){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),o);else for(var r=0;r<n;r++)t[o+r]=e[i+r]},flattenChunks:function(t){var e,i,n,o,r,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),o=0,e=0,i=t.length;e<i;e++)r=t[e],s.set(r,o),o+=r.length;return s}},s={arraySet:function(t,e,i,n,o){for(var r=0;r<n;r++)t[o+r]=e[i+r]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e,i){(function(i){var n,o,r;o=[e],void 0===(r="function"==typeof(n=function(t){var e,n,o,r,s,a,l,u,p=t;function c(t){if(!("kotlinHashCodeValue$"in t)){var e=4294967296*Math.random()|0;Object.defineProperty(t,"kotlinHashCodeValue$",{value:e,enumerable:!1})}return t.kotlinHashCodeValue$}function h(){throw new Error("This marker function should never been called. Looks like compiler did not eliminate it properly. Please, report an issue if you caught this exception.")}function d(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0}t.isBooleanArray=function(t){return(Array.isArray(t)||t instanceof Int8Array)&&"BooleanArray"===t.$type$},t.isByteArray=function(t){return t instanceof Int8Array&&"BooleanArray"!==t.$type$},t.isShortArray=function(t){return t instanceof Int16Array},t.isCharArray=function(t){return t instanceof Uint16Array&&"CharArray"===t.$type$},t.isIntArray=function(t){return t instanceof Int32Array},t.isFloatArray=function(t){return t instanceof Float32Array},t.isDoubleArray=function(t){return t instanceof Float64Array},t.isLongArray=function(t){return Array.isArray(t)&&"LongArray"===t.$type$},t.isArray=function(t){return Array.isArray(t)&&!t.$type$},t.isArrayish=function(t){return Array.isArray(t)||ArrayBuffer.isView(t)},t.arrayToString=function(e){if(null===e)return"null";var i=t.isCharArray(e)?String.fromCharCode:t.toString;return"["+Array.prototype.map.call(e,(function(t){return i(t)})).join(", ")+"]"},t.arrayEquals=function(e,i){if(e===i)return!0;if(null===e||null===i||!t.isArrayish(i)||e.length!==i.length)return!1;for(var n=0,o=e.length;n<o;n++)if(!t.equals(e[n],i[n]))return!1;return!0},t.arrayHashCode=function(e){if(null===e)return 0;for(var i=1,n=0,o=e.length;n<o;n++)i=(31*i|0)+t.hashCode(e[n])|0;return i},t.getCallableRef=function(t,e){return e.callableName=t,e},t.toShort=function(t){return(65535&t)<<16>>16},t.toByte=function(t){return(255&t)<<24>>24},t.toChar=function(t){return 65535&t},t.numberToInt=function(e){return e instanceof t.Long?e.toInt():t.doubleToInt(e)},t.doubleToInt=function(t){return t>2147483647?2147483647:t<-2147483648?-2147483648:0|t},t.toBoxedChar=function(e){return null==e||e instanceof t.BoxedChar?e:new t.BoxedChar(e)},t.unboxChar=function(e){return null==e?e:t.toChar(e)},t.equals=function(t,e){return null==t?null==e:null!=e&&(t!=t?e!=e:"object"==typeof t&&"function"==typeof t.equals?t.equals(e):"number"==typeof t&&"number"==typeof e?t===e&&(0!==t||1/t==1/e):t===e)},t.hashCode=function(e){if(null==e)return 0;var i=typeof e;return"object"===i?"function"==typeof e.hashCode?e.hashCode():c(e):"function"===i?c(e):"number"===i?t.numberHashCode(e):"boolean"===i?Number(e):function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);e=31*e+n|0}return e}(String(e))},t.toString=function(e){return null==e?"null":t.isArrayish(e)?"[...]":e.toString()},t.identityHashCode=c,t.Long=function(t,e){this.low_=0|t,this.high_=0|e},t.Long.$metadata$={kind:"class",simpleName:"Long",interfaces:[]},t.Long.IntCache_={},t.Long.fromInt=function(e){if(-128<=e&&e<128){var i=t.Long.IntCache_[e];if(i)return i}var n=new t.Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(t.Long.IntCache_[e]=n),n},t.Long.fromNumber=function(e){return isNaN(e)?t.Long.ZERO:e<=-t.Long.TWO_PWR_63_DBL_?t.Long.MIN_VALUE:e+1>=t.Long.TWO_PWR_63_DBL_?t.Long.MAX_VALUE:e<0?t.Long.fromNumber(-e).negate():new t.Long(e%t.Long.TWO_PWR_32_DBL_|0,e/t.Long.TWO_PWR_32_DBL_|0)},t.Long.fromBits=function(e,i){return new t.Long(e,i)},t.Long.fromString=function(e,i){if(0==e.length)throw Error("number format error: empty string");var n=i||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return t.Long.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var o=t.Long.fromNumber(Math.pow(n,8)),r=t.Long.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var u=t.Long.fromNumber(Math.pow(n,a));r=r.multiply(u).add(t.Long.fromNumber(l))}else r=(r=r.multiply(o)).add(t.Long.fromNumber(l))}return r},t.Long.TWO_PWR_16_DBL_=65536,t.Long.TWO_PWR_24_DBL_=1<<24,t.Long.TWO_PWR_32_DBL_=t.Long.TWO_PWR_16_DBL_*t.Long.TWO_PWR_16_DBL_,t.Long.TWO_PWR_31_DBL_=t.Long.TWO_PWR_32_DBL_/2,t.Long.TWO_PWR_48_DBL_=t.Long.TWO_PWR_32_DBL_*t.Long.TWO_PWR_16_DBL_,t.Long.TWO_PWR_64_DBL_=t.Long.TWO_PWR_32_DBL_*t.Long.TWO_PWR_32_DBL_,t.Long.TWO_PWR_63_DBL_=t.Long.TWO_PWR_64_DBL_/2,t.Long.ZERO=t.Long.fromInt(0),t.Long.ONE=t.Long.fromInt(1),t.Long.NEG_ONE=t.Long.fromInt(-1),t.Long.MAX_VALUE=t.Long.fromBits(-1,2147483647),t.Long.MIN_VALUE=t.Long.fromBits(0,-2147483648),t.Long.TWO_PWR_24_=t.Long.fromInt(1<<24),t.Long.prototype.toInt=function(){return this.low_},t.Long.prototype.toNumber=function(){return this.high_*t.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},t.Long.prototype.hashCode=function(){return this.high_^this.low_},t.Long.prototype.toString=function(e){var i=e||10;if(i<2||36<i)throw Error("radix out of range: "+i);if(this.isZero())return"0";if(this.isNegative()){if(this.equalsLong(t.Long.MIN_VALUE)){var n=t.Long.fromNumber(i),o=this.div(n),r=o.multiply(n).subtract(this);return o.toString(i)+r.toInt().toString(i)}return"-"+this.negate().toString(i)}for(var s=t.Long.fromNumber(Math.pow(i,6)),a=(r=this,"");;){var l=r.div(s),u=r.subtract(l.multiply(s)).toInt().toString(i);if((r=l).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},t.Long.prototype.getHighBits=function(){return this.high_},t.Long.prototype.getLowBits=function(){return this.low_},t.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:t.Long.TWO_PWR_32_DBL_+this.low_},t.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equalsLong(t.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high_?i+33:i+1},t.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},t.Long.prototype.isNegative=function(){return this.high_<0},t.Long.prototype.isOdd=function(){return 1==(1&this.low_)},t.Long.prototype.equalsLong=function(t){return this.high_==t.high_&&this.low_==t.low_},t.Long.prototype.notEqualsLong=function(t){return this.high_!=t.high_||this.low_!=t.low_},t.Long.prototype.lessThan=function(t){return this.compare(t)<0},t.Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},t.Long.prototype.greaterThan=function(t){return this.compare(t)>0},t.Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},t.Long.prototype.compare=function(t){if(this.equalsLong(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.subtract(t).isNegative()?-1:1},t.Long.prototype.negate=function(){return this.equalsLong(t.Long.MIN_VALUE)?t.Long.MIN_VALUE:this.not().add(t.Long.ONE)},t.Long.prototype.add=function(e){var i=this.high_>>>16,n=65535&this.high_,o=this.low_>>>16,r=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,l=e.low_>>>16,u=0,p=0,c=0,h=0;return c+=(h+=r+(65535&e.low_))>>>16,h&=65535,p+=(c+=o+l)>>>16,c&=65535,u+=(p+=n+a)>>>16,p&=65535,u+=i+s,u&=65535,t.Long.fromBits(c<<16|h,u<<16|p)},t.Long.prototype.subtract=function(t){return this.add(t.negate())},t.Long.prototype.multiply=function(e){if(this.isZero())return t.Long.ZERO;if(e.isZero())return t.Long.ZERO;if(this.equalsLong(t.Long.MIN_VALUE))return e.isOdd()?t.Long.MIN_VALUE:t.Long.ZERO;if(e.equalsLong(t.Long.MIN_VALUE))return this.isOdd()?t.Long.MIN_VALUE:t.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(t.Long.TWO_PWR_24_)&&e.lessThan(t.Long.TWO_PWR_24_))return t.Long.fromNumber(this.toNumber()*e.toNumber());var i=this.high_>>>16,n=65535&this.high_,o=this.low_>>>16,r=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,l=e.low_>>>16,u=65535&e.low_,p=0,c=0,h=0,d=0;return h+=(d+=r*u)>>>16,d&=65535,c+=(h+=o*u)>>>16,h&=65535,c+=(h+=r*l)>>>16,h&=65535,p+=(c+=n*u)>>>16,c&=65535,p+=(c+=o*l)>>>16,c&=65535,p+=(c+=r*a)>>>16,c&=65535,p+=i*u+n*l+o*a+r*s,p&=65535,t.Long.fromBits(h<<16|d,p<<16|c)},t.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return t.Long.ZERO;if(this.equalsLong(t.Long.MIN_VALUE)){if(e.equalsLong(t.Long.ONE)||e.equalsLong(t.Long.NEG_ONE))return t.Long.MIN_VALUE;if(e.equalsLong(t.Long.MIN_VALUE))return t.Long.ONE;if((o=this.shiftRight(1).div(e).shiftLeft(1)).equalsLong(t.Long.ZERO))return e.isNegative()?t.Long.ONE:t.Long.NEG_ONE;var i=this.subtract(e.multiply(o));return o.add(i.div(e))}if(e.equalsLong(t.Long.MIN_VALUE))return t.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var n=t.Long.ZERO;for(i=this;i.greaterThanOrEqual(e);){for(var o=Math.max(1,Math.floor(i.toNumber()/e.toNumber())),r=Math.ceil(Math.log(o)/Math.LN2),s=r<=48?1:Math.pow(2,r-48),a=t.Long.fromNumber(o),l=a.multiply(e);l.isNegative()||l.greaterThan(i);)o-=s,l=(a=t.Long.fromNumber(o)).multiply(e);a.isZero()&&(a=t.Long.ONE),n=n.add(a),i=i.subtract(l)}return n},t.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},t.Long.prototype.not=function(){return t.Long.fromBits(~this.low_,~this.high_)},t.Long.prototype.and=function(e){return t.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},t.Long.prototype.or=function(e){return t.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},t.Long.prototype.xor=function(e){return t.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},t.Long.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var i=this.low_;if(e<32){var n=this.high_;return t.Long.fromBits(i<<e,n<<e|i>>>32-e)}return t.Long.fromBits(0,i<<e-32)},t.Long.prototype.shiftRight=function(e){if(0==(e&=63))return this;var i=this.high_;if(e<32){var n=this.low_;return t.Long.fromBits(n>>>e|i<<32-e,i>>e)}return t.Long.fromBits(i>>e-32,i>=0?0:-1)},t.Long.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var i=this.high_;if(e<32){var n=this.low_;return t.Long.fromBits(n>>>e|i<<32-e,i>>>e)}return 32==e?t.Long.fromBits(i,0):t.Long.fromBits(i>>>e-32,0)},t.Long.prototype.equals=function(e){return e instanceof t.Long&&this.equalsLong(e)},t.Long.prototype.compareTo_11rb$=t.Long.prototype.compare,t.Long.prototype.inc=function(){return this.add(t.Long.ONE)},t.Long.prototype.dec=function(){return this.add(t.Long.NEG_ONE)},t.Long.prototype.valueOf=function(){return this.toNumber()},t.Long.prototype.unaryPlus=function(){return this},t.Long.prototype.unaryMinus=t.Long.prototype.negate,t.Long.prototype.inv=t.Long.prototype.not,t.Long.prototype.rangeTo=function(e){return new t.kotlin.ranges.LongRange(this,e)},t.defineInlineFunction=function(t,e){return e},t.wrapFunction=function(t){var e=function(){return(e=t()).apply(this,arguments)};return function(){return e.apply(this,arguments)}},t.suspendCall=function(t){return t},t.coroutineResult=function(t){h()},t.coroutineReceiver=function(t){h()},t.setCoroutineResult=function(t,e){h()},t.getReifiedTypeParameterKType=function(t){h()},t.compareTo=function(e,i){var n=typeof e;return"number"===n?"number"==typeof i?t.doubleCompareTo(e,i):t.primitiveCompareTo(e,i):"string"===n||"boolean"===n?t.primitiveCompareTo(e,i):e.compareTo_11rb$(i)},t.primitiveCompareTo=function(t,e){return t<e?-1:t>e?1:0},t.doubleCompareTo=function(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e){if(0!==t)return 0;var i=1/t;return i===1/e?0:i<0?-1:1}return t!=t?e!=e?0:1:-1},t.imul=Math.imul||d,t.imulEmulated=d,e=new ArrayBuffer(8),n=new Float64Array(e),o=new Float32Array(e),r=new Int32Array(e),s=0,a=1,n[0]=-1,0!==r[s]&&(s=1,a=0),t.doubleToRawBits=function(e){return n[0]=e,t.Long.fromBits(r[s],r[a])},t.doubleFromBits=function(t){return r[s]=t.low_,r[a]=t.high_,n[0]},t.floatFromBits=function(t){return r[0]=t,o[0]},t.numberHashCode=function(t){return(0|t)===t?0|t:(n[0]=t,(31*r[a]|0)+r[s]|0)},t.ensureNotNull=function(e){return null!=e?e:t.throwNPE()},void 0===String.prototype.startsWith&&Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),void 0===String.prototype.endsWith&&Object.defineProperty(String.prototype,"endsWith",{value:function(t,e){var i=this.toString();(void 0===e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}}),void 0===Math.sign&&(Math.sign=function(t){return 0==(t=+t)||isNaN(t)?Number(t):t>0?1:-1}),void 0===Math.trunc&&(Math.trunc=function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)}),function(){var t=Math.sqrt(2220446049250313e-31),e=Math.sqrt(t),i=1/t,n=1/e;if(void 0===Math.sinh&&(Math.sinh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n+=i*i*i/6),n}var o=Math.exp(i),r=1/o;return isFinite(o)?isFinite(r)?(o-r)/2:-Math.exp(-i-Math.LN2):Math.exp(i-Math.LN2)}),void 0===Math.cosh&&(Math.cosh=function(t){var e=Math.exp(t),i=1/e;return isFinite(e)&&isFinite(i)?(e+i)/2:Math.exp(Math.abs(t)-Math.LN2)}),void 0===Math.tanh&&(Math.tanh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n-=i*i*i/3),n}var o=Math.exp(+i),r=Math.exp(-i);return o===1/0?1:r===1/0?-1:(o-r)/(o+r)}),void 0===Math.asinh){var o=function(r){if(r>=+e)return r>n?r>i?Math.log(r)+Math.LN2:Math.log(2*r+1/(2*r)):Math.log(r+Math.sqrt(r*r+1));if(r<=-e)return-o(-r);var s=r;return Math.abs(r)>=t&&(s-=r*r*r/6),s};Math.asinh=o}void 0===Math.acosh&&(Math.acosh=function(n){if(n<1)return NaN;if(n-1>=e)return n>i?Math.log(n)+Math.LN2:Math.log(n+Math.sqrt(n*n-1));var o=Math.sqrt(n-1),r=o;return o>=t&&(r-=o*o*o/12),Math.sqrt(2)*r}),void 0===Math.atanh&&(Math.atanh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n+=i*i*i/3),n}return Math.log((1+i)/(1-i))/2}),void 0===Math.log1p&&(Math.log1p=function(t){if(Math.abs(t)<e){var i=t*t,n=i*t;return-n*t/4+n/3-i/2+t}return Math.log(t+1)}),void 0===Math.expm1&&(Math.expm1=function(t){if(Math.abs(t)<e){var i=t*t,n=i*t;return n*t/24+n/6+i/2+t}return Math.exp(t)-1})}(),void 0===Math.hypot&&(Math.hypot=function(){for(var t=0,e=arguments.length,i=0;i<e;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)}),void 0===Math.log10&&(Math.log10=function(t){return Math.log(t)*Math.LOG10E}),void 0===Math.log2&&(Math.log2=function(t){return Math.log(t)*Math.LOG2E}),void 0===Math.clz32&&(Math.clz32=(l=Math.log,u=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(l(e)/u|0)|0})),void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),i=e.length>>>0,n=arguments[1],o=n>>0,r=o<0?Math.max(i+o,0):Math.min(o,i),s=arguments[2],a=void 0===s?i:s>>0,l=a<0?Math.max(i+a,0):Math.min(a,i);r<l;)e[r]=t,r++;return e}}),function(){function t(t,e){return t<0?Math.max(0,t+e):Math.min(t,e)}function e(e,i){return void 0===i&&(i=this.length),e=t(e||0,this.length),i=Math.max(e,t(i,this.length)),new this.constructor(this.subarray(e,i))}for(var i=[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array],n=0;n<i.length;++n)void 0===(s=i[n]).prototype.fill&&Object.defineProperty(s.prototype,"fill",{value:Array.prototype.fill}),void 0===s.prototype.slice&&Object.defineProperty(s.prototype,"slice",{value:e});try{(function(){}).apply(null,new Int32Array(0))}catch(t){var o=Function.prototype.apply;Object.defineProperty(Function.prototype,"apply",{value:function(t,e){return o.call(this,t,[].slice.call(e))}})}for(n=0;n<i.length;++n)void 0===(s=i[n]).prototype.map&&Object.defineProperty(s.prototype,"map",{value:function(t,e){return[].slice.call(this).map(t,e)}});var r=function(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e){if(0!==t)return 0;var i=1/t;return i===1/e?0:i<0?-1:1}return t!=t?e!=e?0:1:-1};for(n=0;n<i.length;++n){var s;void 0===(s=i[n]).prototype.sort&&Object.defineProperty(s.prototype,"sort",{value:function(t){return Array.prototype.sort.call(this,t||r)}})}}(),t.Kind={CLASS:"class",INTERFACE:"interface",OBJECT:"object"},t.callGetter=function(e,i,n){var o=Object.getOwnPropertyDescriptor(i,n);return null!=o&&null!=o.get?o.get.call(e):null!=(o=Object.getOwnPropertyDescriptor(e,n))&&"value"in o?e[n]:t.callGetter(e,Object.getPrototypeOf(i),n)},t.isType=function(e,i){if(i===Object)switch(typeof e){case"string":case"number":case"boolean":case"function":return!0;default:return e instanceof Object}if(null==e||null==i||"object"!=typeof e&&"function"!=typeof e)return!1;if("function"==typeof i&&e instanceof i)return!0;var n=Object.getPrototypeOf(i),o=null!=n?n.constructor:null;if(null!=o&&"$metadata$"in o&&o.$metadata$.kind===t.Kind.OBJECT)return e===i;var r=i.$metadata$;return null==r?e instanceof i:r.kind===t.Kind.INTERFACE&&null!=e.constructor&&function t(e,i){if(e===i)return!0;var n=e.$metadata$;if(null!=n)for(var o=n.interfaces,r=0;r<o.length;r++)if(t(o[r],i))return!0;var s=null!=e.prototype?Object.getPrototypeOf(e.prototype):null,a=null!=s?s.constructor:null;return null!=a&&t(a,i)}(e.constructor,i)},t.isNumber=function(e){return"number"==typeof e||e instanceof t.Long},t.isChar=function(e){return e instanceof t.BoxedChar},t.isComparable=function(e){var i=typeof e;return"string"===i||"boolean"===i||t.isNumber(e)||t.isType(e,t.kotlin.Comparable)},t.isCharSequence=function(e){return"string"==typeof e||t.isType(e,t.kotlin.CharSequence)},function(){"use strict";var e=t.Kind.INTERFACE,i=t.Kind.OBJECT,n=t.Kind.CLASS,o=(t.defineInlineFunction,t.wrapFunction,t.equals),r=t.Long.ZERO;function s(){}function a(){c(),this.name$="",this.ordinal$=0}function l(){u=this}s.$metadata$={kind:e,simpleName:"Comparable",interfaces:[]},Object.defineProperty(a.prototype,"name",{configurable:!0,get:function(){return this.name$}}),Object.defineProperty(a.prototype,"ordinal",{configurable:!0,get:function(){return this.ordinal$}}),a.prototype.compareTo_11rb$=function(e){return t.primitiveCompareTo(this.ordinal,e.ordinal)},a.prototype.equals=function(t){return this===t},a.prototype.hashCode=function(){return t.identityHashCode(this)},a.prototype.toString=function(){return this.name},l.$metadata$={kind:i,simpleName:"Companion",interfaces:[]};var u=null;function c(){return null===u&&new l,u}function h(t,e){var i;i=t.length-1|0;for(var n=0;n<=i;n++)t[n]=e;return t}function d(){f=this,this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}a.$metadata$={kind:n,simpleName:"Enum",interfaces:[s]},d.$metadata$={kind:i,simpleName:"DoubleCompanionObject",interfaces:[]};var f=null;function _(){m=this,this.MIN_VALUE=14e-46,this.MAX_VALUE=34028235e31,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=4,this.SIZE_BITS=32}_.$metadata$={kind:i,simpleName:"FloatCompanionObject",interfaces:[]};var m=null;function $(){y=this,this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}$.$metadata$={kind:i,simpleName:"IntCompanionObject",interfaces:[]};var y=null;function v(){g=this,this.MIN_VALUE=t.Long.MIN_VALUE,this.MAX_VALUE=t.Long.MAX_VALUE,this.SIZE_BYTES=8,this.SIZE_BITS=64}v.$metadata$={kind:i,simpleName:"LongCompanionObject",interfaces:[]};var g=null;function b(){x=this,this.MIN_VALUE=-32768,this.MAX_VALUE=32767,this.SIZE_BYTES=2,this.SIZE_BITS=16}b.$metadata$={kind:i,simpleName:"ShortCompanionObject",interfaces:[]};var x=null;function w(){z=this,this.MIN_VALUE=-128,this.MAX_VALUE=127,this.SIZE_BYTES=1,this.SIZE_BITS=8}w.$metadata$={kind:i,simpleName:"ByteCompanionObject",interfaces:[]};var z=null;function k(){S=this,this.MIN_VALUE=0,this.MAX_VALUE=65535,this.MIN_HIGH_SURROGATE=55296,this.MAX_HIGH_SURROGATE=56319,this.MIN_LOW_SURROGATE=56320,this.MAX_LOW_SURROGATE=57343,this.MIN_SURROGATE=this.MIN_HIGH_SURROGATE,this.MAX_SURROGATE=this.MAX_LOW_SURROGATE,this.SIZE_BYTES=2,this.SIZE_BITS=16}k.$metadata$={kind:i,simpleName:"CharCompanionObject",interfaces:[]};var S=null;function C(){N=this}C.$metadata$={kind:i,simpleName:"StringCompanionObject",interfaces:[]};var N=null;function E(){T=this}E.$metadata$={kind:i,simpleName:"BooleanCompanionObject",interfaces:[]};var T=null,P=p.kotlin||(p.kotlin={});P.Comparable=s,Object.defineProperty(a,"Companion",{get:c}),P.Enum=a,p.newArray=function(t,e){return h(Array(t),e)},p.booleanArray=function(t,e){var i,n=Array(t);if(n.$type$="BooleanArray",null==e||o(e,!0))i=h(n,!1);else if(o(e,!1))i=n;else{var r;r=n.length-1|0;for(var s=0;s<=r;s++)n[s]=e(s);i=n}return i},p.charArray=function(t,e){var i,n=new Uint16Array(t);if(n.$type$="CharArray",null==e||o(e,!0)||o(e,!1))i=n;else{var r;r=n.length-1|0;for(var s=0;s<=r;s++)n[s]=e(s);i=n}return i},p.longArray=function(t,e){var i,n=Array(t);if(n.$type$="LongArray",null==e||o(e,!0))i=h(n,r);else if(o(e,!1))i=n;else{var s;s=n.length-1|0;for(var a=0;a<=s;a++)n[a]=e(a);i=n}return i};var O=P.js||(P.js={}),M=O.internal||(O.internal={});Object.defineProperty(M,"DoubleCompanionObject",{get:function(){return null===f&&new d,f}}),Object.defineProperty(M,"FloatCompanionObject",{get:function(){return null===m&&new _,m}}),Object.defineProperty(M,"IntCompanionObject",{get:function(){return null===y&&new $,y}}),Object.defineProperty(M,"LongCompanionObject",{get:function(){return null===g&&new v,g}}),Object.defineProperty(M,"ShortCompanionObject",{get:function(){return null===x&&new b,x}}),Object.defineProperty(M,"ByteCompanionObject",{get:function(){return null===z&&new w,z}}),Object.defineProperty(M,"CharCompanionObject",{get:function(){return null===S&&new k,S}}),Object.defineProperty(M,"StringCompanionObject",{get:function(){return null===N&&new C,N}}),Object.defineProperty(M,"BooleanCompanionObject",{get:function(){return null===T&&new E,T}})}(),function(){"use strict";var e,n=t.defineInlineFunction,o=t.wrapFunction,r=t.equals,s=t.toBoxedChar,a=t.unboxChar,l=t.kotlin.js.internal.DoubleCompanionObject,u=t.Long.ZERO,c=Math,h=t.Kind.CLASS,d=t.toChar,f=t.Long.NEG_ONE,_=t.toByte,m=(t.Long.fromInt(-128),t.Long.fromInt(127),t.kotlin.js.internal.ByteCompanionObject),$=t.numberToInt,y=(t.Long.fromInt(-2147483648),t.Long.fromInt(2147483647),t.Long.MIN_VALUE),v=t.Long.MAX_VALUE,g=t.toShort,b=(t.Long.fromInt(-32768),t.Long.fromInt(32767),t.kotlin.js.internal.ShortCompanionObject),x=t.toString,w=(t.getCallableRef,t.arrayEquals,t.arrayHashCode,t.Long.fromInt(255),new t.Long(-1,0)),z=(t.Long.fromInt(65535),t.Kind.INTERFACE),k=Object,S=t.Kind.OBJECT,C=t.Long.ONE,N=t.kotlin.Enum,E=t.kotlin.Comparable,T=t.ensureNotNull,P=t.throwCCE,O=Error,M=t.arrayToString,j=t.hashCode,A=t.doubleToRawBits,I=t.kotlin.js.internal.FloatCompanionObject,R=t.kotlin.js.internal.CharCompanionObject,L=new t.Long(-1478467534,-1720727600),D=new t.Long(-888910638,1920087921),q=new t.Long(1993859828,793161749),F=new t.Long(1,-2147483648),B=new t.Long(1908874354,-59652324),U=t.Long.fromInt(2047);function V(t,e){return G(t,e)>=0}function G(t,e){if(null==e){for(var i=0;i!==t.length;++i)if(null==t[i])return i}else for(var n=0;n!==t.length;++n)if(r(e,t[n]))return n;return-1}function H(t,e){var i,n;if(null==e)for(i=$t(K(t)).iterator();i.hasNext();){var o=i.next();if(null==t[o])return o}else for(n=$t(K(t)).iterator();n.hasNext();){var s=n.next();if(r(e,t[s]))return s}return-1}function W(t){var e;switch(t.length){case 0:throw new Ni("Array is empty.");case 1:e=t[0];break;default:throw yi("Array has more than one element.")}return e}function K(t){return new be(0,X(t))}function X(t){return t.length-1|0}function Y(t){return t.length-1|0}function Z(t){return t.length-1|0}function J(t,e){var i;for(i=0;i!==t.length;++i){var n=t[i];e.add_11rb$(n)}return e}function Q(t){return dn(Yr(t))}function tt(t){var e;switch(t.length){case 0:e=Rs();break;case 1:e=Hi(t[0]);break;default:e=J(t,Kn(t.length))}return e}function et(t,e,i,n,o,r,s,a){var l;void 0===i&&(i=", "),void 0===n&&(n=""),void 0===o&&(o=""),void 0===r&&(r=-1),void 0===s&&(s="..."),void 0===a&&(a=null),e.append_gw00v9$(n);var u=0;for(l=0;l!==t.length;++l){var p=t[l];if((u=u+1|0)>1&&e.append_gw00v9$(i),!(r<0||u<=r))break;null!=a?e.append_gw00v9$(a(p)):e.append_gw00v9$(p.toString())}return r>=0&&u>r&&e.append_gw00v9$(s),e.append_gw00v9$(o),e}function it(t){if(t.isEmpty())throw new Ni("List is empty.");return t.get_za3lpa$(0)}function nt(e,i){var n;if(t.isType(e,At))return e.indexOf_11rb$(i);var o=0;for(n=e.iterator();n.hasNext();){var s=n.next();if(Xi(o),r(i,s))return o;o=o+1|0}return-1}function ot(e){if(t.isType(e,At))return rt(e);var i=e.iterator();if(!i.hasNext())throw new Ni("Collection is empty.");var n=i.next();if(i.hasNext())throw yi("Collection has more than one element.");return n}function rt(t){var e;switch(t.size){case 0:throw new Ni("List is empty.");case 1:e=t.get_za3lpa$(0);break;default:throw yi("List has more than one element.")}return e}function st(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();null!=n&&e.add_11rb$(n)}return e}function at(t,e){for(var i=ts(t);i>=1;i--){var n=e.nextInt_za3lpa$(i+1|0);t.set_wxm5ur$(n,t.set_wxm5ur$(i,t.get_za3lpa$(n)))}}function lt(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n)}return e}function ut(e){var i;if(t.isType(e,Mt)){switch(e.size){case 0:i=Jr();break;case 1:i=Gi(t.isType(e,At)?e.get_za3lpa$(0):e.iterator().next());break;default:i=ct(e)}return i}return es(pt(e))}function pt(e){return t.isType(e,Mt)?ct(e):lt(e,cn())}function ct(t){return dn(t)}function ht(e){return t.isType(e,Mt)?Hn(e):lt(e,Gn())}function dt(e){var i=e.iterator();if(!i.hasNext())return null;for(var n=i.next();i.hasNext();){var o=i.next();t.compareTo(n,o)>0&&(n=o)}return n}function ft(t,e,i,n,o,r,s,a){var l;void 0===i&&(i=", "),void 0===n&&(n=""),void 0===o&&(o=""),void 0===r&&(r=-1),void 0===s&&(s="..."),void 0===a&&(a=null),e.append_gw00v9$(n);var u=0;for(l=t.iterator();l.hasNext();){var p=l.next();if((u=u+1|0)>1&&e.append_gw00v9$(i),!(r<0||u<=r))break;Ea(e,p,a)}return r>=0&&u>r&&e.append_gw00v9$(s),e.append_gw00v9$(o),e}function _t(t,e,i,n,o,r,s){return void 0===e&&(e=", "),void 0===i&&(i=""),void 0===n&&(n=""),void 0===o&&(o=-1),void 0===r&&(r="..."),void 0===s&&(s=null),ft(t,ur(),e,i,n,o,r,s).toString()}function mt(t,e){return ce().fromClosedRange_qt1dr2$(t,e,-1)}function $t(t){return ce().fromClosedRange_qt1dr2$(t.last,t.first,0|-t.step)}function yt(t,e){return e<=-2147483648?ze().EMPTY:new be(t,e-1|0)}function vt(t,e){return t<e?e:t}function gt(t,e){return t>e?e:t}function bt(t,e,i){if(e>i)throw yi("Cannot coerce value to an empty range: maximum "+i+" is less than minimum "+e+".");return t<e?e:t>i?i:t}function xt(t){this.closure$iterator=t}function wt(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n)}return e}function zt(t){return es(kt(t))}function kt(t){return wt(t,cn())}function St(t,e){return new Ts(t,e)}function Ct(t){return new xt((e=t,function(){return e.iterator()}));var e}function Nt(t,e){if(!(e>=0))throw yi(("Requested character count "+e+" is less than zero.").toString());return t.substring(gt(e,t.length))}function Et(){}function Tt(){}function Pt(){}function Ot(){}function Mt(){}function jt(){}function At(){}function It(){}function Rt(){}function Lt(){}function Dt(){}function qt(){}function Ft(){}function Bt(){}function Ut(){}function Vt(){}function Gt(){}function Ht(){}function Wt(){}function Kt(){}function Xt(){}function Yt(){}function Zt(){}function Jt(){}function Qt(){}function te(){}function ee(t,e,i){Kt.call(this),this.step=i,this.finalElement_0=0|e,this.hasNext_0=this.step>0?t<=e:t>=e,this.next_0=this.hasNext_0?0|t:this.finalElement_0}function ie(t,e,i){Yt.call(this),this.step=i,this.finalElement_0=e,this.hasNext_0=this.step>0?t<=e:t>=e,this.next_0=this.hasNext_0?t:this.finalElement_0}function ne(t,e,i){Zt.call(this),this.step=i,this.finalElement_0=e,this.hasNext_0=this.step.toNumber()>0?t.compareTo_11rb$(e)<=0:t.compareTo_11rb$(e)>=0,this.next_0=this.hasNext_0?t:this.finalElement_0}function oe(t,e,i){if(ae(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=d(Ie(0|t,0|e,i)),this.step=i}function re(){se=this}di.prototype=Object.create(O.prototype),di.prototype.constructor=di,_i.prototype=Object.create(di.prototype),_i.prototype.constructor=_i,ee.prototype=Object.create(Kt.prototype),ee.prototype.constructor=ee,ie.prototype=Object.create(Yt.prototype),ie.prototype.constructor=ie,ne.prototype=Object.create(Zt.prototype),ne.prototype.constructor=ne,$e.prototype=Object.create(oe.prototype),$e.prototype.constructor=$e,be.prototype=Object.create(le.prototype),be.prototype.constructor=be,ke.prototype=Object.create(he.prototype),ke.prototype.constructor=ke,De.prototype=Object.create(te.prototype),De.prototype.constructor=De,Fe.prototype=Object.create(Wt.prototype),Fe.prototype.constructor=Fe,Ue.prototype=Object.create(Xt.prototype),Ue.prototype.constructor=Ue,Ge.prototype=Object.create(Kt.prototype),Ge.prototype.constructor=Ge,We.prototype=Object.create(Yt.prototype),We.prototype.constructor=We,Xe.prototype=Object.create(Jt.prototype),Xe.prototype.constructor=Xe,Ze.prototype=Object.create(Qt.prototype),Ze.prototype.constructor=Ze,Qe.prototype=Object.create(Zt.prototype),Qe.prototype.constructor=Qe,ci.prototype=Object.create(O.prototype),ci.prototype.constructor=ci,$i.prototype=Object.create(_i.prototype),$i.prototype.constructor=$i,vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,bi.prototype=Object.create(_i.prototype),bi.prototype.constructor=bi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,ki.prototype=Object.create($i.prototype),ki.prototype.constructor=ki,Si.prototype=Object.create(_i.prototype),Si.prototype.constructor=Si,Ci.prototype=Object.create(_i.prototype),Ci.prototype.constructor=Ci,Ni.prototype=Object.create(_i.prototype),Ni.prototype.constructor=Ni,Ti.prototype=Object.create(_i.prototype),Ti.prototype.constructor=Ti,Pi.prototype=Object.create(_i.prototype),Pi.prototype.constructor=Pi,Mi.prototype=Object.create(_i.prototype),Mi.prototype.constructor=Mi,Zi.prototype=Object.create(Cr.prototype),Zi.prototype.constructor=Zi,tn.prototype=Object.create(Qi.prototype),tn.prototype.constructor=tn,Ji.prototype=Object.create(Zi.prototype),Ji.prototype.constructor=Ji,en.prototype=Object.create(Ji.prototype),en.prototype.constructor=en,un.prototype=Object.create(Zi.prototype),un.prototype.constructor=un,rn.prototype=Object.create(un.prototype),rn.prototype.constructor=rn,an.prototype=Object.create(Zi.prototype),an.prototype.constructor=an,nn.prototype=Object.create(Or.prototype),nn.prototype.constructor=nn,pn.prototype=Object.create(Ji.prototype),pn.prototype.constructor=pn,zn.prototype=Object.create(un.prototype),zn.prototype.constructor=zn,wn.prototype=Object.create(nn.prototype),wn.prototype.constructor=wn,En.prototype=Object.create(un.prototype),En.prototype.constructor=En,Ln.prototype=Object.create(on.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(un.prototype),Dn.prototype.constructor=Dn,Rn.prototype=Object.create(wn.prototype),Rn.prototype.constructor=Rn,Vn.prototype=Object.create(En.prototype),Vn.prototype.constructor=Vn,Zn.prototype=Object.create(Yn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Yn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Jn.prototype),Qn.prototype.constructor=Qn,$o.prototype=Object.create(mo.prototype),$o.prototype.constructor=$o,yo.prototype=Object.create(mo.prototype),yo.prototype.constructor=yo,vo.prototype=Object.create(mo.prototype),vo.prototype.constructor=vo,sr.prototype=Object.create(di.prototype),sr.prototype.constructor=sr,qr.prototype=Object.create(Cr.prototype),qr.prototype.constructor=qr,Mr.prototype=Object.create(qr.prototype),Mr.prototype.constructor=Mr,Ar.prototype=Object.create(Cr.prototype),Ar.prototype.constructor=Ar,Es.prototype=Object.create(Ns.prototype),Es.prototype.constructor=Es,la.prototype=Object.create(N.prototype),la.prototype.constructor=la,fa.prototype=Object.create(da.prototype),fa.prototype.constructor=fa,za.prototype=Object.create(da.prototype),za.prototype.constructor=za,Ua.prototype=Object.create(Kt.prototype),Ua.prototype.constructor=Ua,gl.prototype=Object.create(ci.prototype),gl.prototype.constructor=gl,Ol.prototype=Object.create(Il.prototype),Ol.prototype.constructor=Ol,ql.prototype=Object.create(Fl.prototype),ql.prototype.constructor=ql,Wl.prototype=Object.create(Zl.prototype),Wl.prototype.constructor=Wl,eu.prototype=Object.create(Bl.prototype),eu.prototype.constructor=eu,xt.prototype.iterator=function(){return this.closure$iterator()},xt.$metadata$={kind:h,interfaces:[Pt]},Et.$metadata$={kind:z,simpleName:"Annotation",interfaces:[]},Tt.$metadata$={kind:z,simpleName:"CharSequence",interfaces:[]},Pt.$metadata$={kind:z,simpleName:"Iterable",interfaces:[]},Ot.$metadata$={kind:z,simpleName:"MutableIterable",interfaces:[Pt]},Mt.$metadata$={kind:z,simpleName:"Collection",interfaces:[Pt]},jt.$metadata$={kind:z,simpleName:"MutableCollection",interfaces:[Ot,Mt]},At.$metadata$={kind:z,simpleName:"List",interfaces:[Mt]},It.$metadata$={kind:z,simpleName:"MutableList",interfaces:[jt,At]},Rt.$metadata$={kind:z,simpleName:"Set",interfaces:[Mt]},Lt.$metadata$={kind:z,simpleName:"MutableSet",interfaces:[jt,Rt]},Dt.prototype.getOrDefault_xwzc9p$=function(t,e){return null},qt.$metadata$={kind:z,simpleName:"Entry",interfaces:[]},Dt.$metadata$={kind:z,simpleName:"Map",interfaces:[]},Ft.prototype.remove_xwzc9p$=function(t,e){return!0},Bt.$metadata$={kind:z,simpleName:"MutableEntry",interfaces:[qt]},Ft.$metadata$={kind:z,simpleName:"MutableMap",interfaces:[Dt]},Ut.$metadata$={kind:z,simpleName:"Iterator",interfaces:[]},Vt.$metadata$={kind:z,simpleName:"MutableIterator",interfaces:[Ut]},Gt.$metadata$={kind:z,simpleName:"ListIterator",interfaces:[Ut]},Ht.$metadata$={kind:z,simpleName:"MutableListIterator",interfaces:[Vt,Gt]},Wt.prototype.next=function(){return this.nextByte()},Wt.$metadata$={kind:h,simpleName:"ByteIterator",interfaces:[Ut]},Kt.prototype.next=function(){return s(this.nextChar())},Kt.$metadata$={kind:h,simpleName:"CharIterator",interfaces:[Ut]},Xt.prototype.next=function(){return this.nextShort()},Xt.$metadata$={kind:h,simpleName:"ShortIterator",interfaces:[Ut]},Yt.prototype.next=function(){return this.nextInt()},Yt.$metadata$={kind:h,simpleName:"IntIterator",interfaces:[Ut]},Zt.prototype.next=function(){return this.nextLong()},Zt.$metadata$={kind:h,simpleName:"LongIterator",interfaces:[Ut]},Jt.prototype.next=function(){return this.nextFloat()},Jt.$metadata$={kind:h,simpleName:"FloatIterator",interfaces:[Ut]},Qt.prototype.next=function(){return this.nextDouble()},Qt.$metadata$={kind:h,simpleName:"DoubleIterator",interfaces:[Ut]},te.prototype.next=function(){return this.nextBoolean()},te.$metadata$={kind:h,simpleName:"BooleanIterator",interfaces:[Ut]},ee.prototype.hasNext=function(){return this.hasNext_0},ee.prototype.nextChar=function(){var t=this.next_0;if(t===this.finalElement_0){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0+this.step|0;return d(t)},ee.$metadata$={kind:h,simpleName:"CharProgressionIterator",interfaces:[Kt]},ie.prototype.hasNext=function(){return this.hasNext_0},ie.prototype.nextInt=function(){var t=this.next_0;if(t===this.finalElement_0){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0+this.step|0;return t},ie.$metadata$={kind:h,simpleName:"IntProgressionIterator",interfaces:[Yt]},ne.prototype.hasNext=function(){return this.hasNext_0},ne.prototype.nextLong=function(){var t=this.next_0;if(r(t,this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0.add(this.step);return t},ne.$metadata$={kind:h,simpleName:"LongProgressionIterator",interfaces:[Zt]},oe.prototype.iterator=function(){return new ee(this.first,this.last,this.step)},oe.prototype.isEmpty=function(){return this.step>0?this.first>this.last:this.first<this.last},oe.prototype.equals=function(e){return t.isType(e,oe)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last&&this.step===e.step)},oe.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*(0|this.first)|0)+(0|this.last)|0)|0)+this.step|0},oe.prototype.toString=function(){return this.step>0?String.fromCharCode(this.first)+".."+String.fromCharCode(this.last)+" step "+this.step:String.fromCharCode(this.first)+" downTo "+String.fromCharCode(this.last)+" step "+(0|-this.step)},re.prototype.fromClosedRange_ayra44$=function(t,e,i){return new oe(t,e,i)},re.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var se=null;function ae(){return null===se&&new re,se}function le(t,e,i){if(ce(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=Ie(t,e,i),this.step=i}function ue(){pe=this}oe.$metadata$={kind:h,simpleName:"CharProgression",interfaces:[Pt]},le.prototype.iterator=function(){return new ie(this.first,this.last,this.step)},le.prototype.isEmpty=function(){return this.step>0?this.first>this.last:this.first<this.last},le.prototype.equals=function(e){return t.isType(e,le)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last&&this.step===e.step)},le.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*this.first|0)+this.last|0)|0)+this.step|0},le.prototype.toString=function(){return this.step>0?this.first.toString()+".."+this.last+" step "+this.step:this.first.toString()+" downTo "+this.last+" step "+(0|-this.step)},ue.prototype.fromClosedRange_qt1dr2$=function(t,e,i){return new le(t,e,i)},ue.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var pe=null;function ce(){return null===pe&&new ue,pe}function he(t,e,i){if(_e(),r(i,u))throw yi("Step must be non-zero.");if(r(i,y))throw yi("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=Re(t,e,i),this.step=i}function de(){fe=this}le.$metadata$={kind:h,simpleName:"IntProgression",interfaces:[Pt]},he.prototype.iterator=function(){return new ne(this.first,this.last,this.step)},he.prototype.isEmpty=function(){return this.step.toNumber()>0?this.first.compareTo_11rb$(this.last)>0:this.first.compareTo_11rb$(this.last)<0},he.prototype.equals=function(e){return t.isType(e,he)&&(this.isEmpty()&&e.isEmpty()||r(this.first,e.first)&&r(this.last,e.last)&&r(this.step,e.step))},he.prototype.hashCode=function(){return this.isEmpty()?-1:t.Long.fromInt(31).multiply(t.Long.fromInt(31).multiply(this.first.xor(this.first.shiftRightUnsigned(32))).add(this.last.xor(this.last.shiftRightUnsigned(32)))).add(this.step.xor(this.step.shiftRightUnsigned(32))).toInt()},he.prototype.toString=function(){return this.step.toNumber()>0?this.first.toString()+".."+this.last.toString()+" step "+this.step.toString():this.first.toString()+" downTo "+this.last.toString()+" step "+this.step.unaryMinus().toString()},de.prototype.fromClosedRange_b9bd0d$=function(t,e,i){return new he(t,e,i)},de.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var fe=null;function _e(){return null===fe&&new de,fe}function me(){}function $e(t,e){ge(),oe.call(this,t,e,1)}function ye(){ve=this,this.EMPTY=new $e(d(1),d(0))}he.$metadata$={kind:h,simpleName:"LongProgression",interfaces:[Pt]},me.prototype.contains_mef7kx$=function(e){return t.compareTo(e,this.start)>=0&&t.compareTo(e,this.endInclusive)<=0},me.prototype.isEmpty=function(){return t.compareTo(this.start,this.endInclusive)>0},me.$metadata$={kind:z,simpleName:"ClosedRange",interfaces:[]},Object.defineProperty($e.prototype,"start",{configurable:!0,get:function(){return s(this.first)}}),Object.defineProperty($e.prototype,"endInclusive",{configurable:!0,get:function(){return s(this.last)}}),$e.prototype.contains_mef7kx$=function(t){return this.first<=t&&t<=this.last},$e.prototype.isEmpty=function(){return this.first>this.last},$e.prototype.equals=function(e){return t.isType(e,$e)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last)},$e.prototype.hashCode=function(){return this.isEmpty()?-1:(31*(0|this.first)|0)+(0|this.last)|0},$e.prototype.toString=function(){return String.fromCharCode(this.first)+".."+String.fromCharCode(this.last)},ye.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var ve=null;function ge(){return null===ve&&new ye,ve}function be(t,e){ze(),le.call(this,t,e,1)}function xe(){we=this,this.EMPTY=new be(1,0)}$e.$metadata$={kind:h,simpleName:"CharRange",interfaces:[me,oe]},Object.defineProperty(be.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(be.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),be.prototype.contains_mef7kx$=function(t){return this.first<=t&&t<=this.last},be.prototype.isEmpty=function(){return this.first>this.last},be.prototype.equals=function(e){return t.isType(e,be)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last)},be.prototype.hashCode=function(){return this.isEmpty()?-1:(31*this.first|0)+this.last|0},be.prototype.toString=function(){return this.first.toString()+".."+this.last},xe.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var we=null;function ze(){return null===we&&new xe,we}function ke(t,e){Ne(),he.call(this,t,e,C)}function Se(){Ce=this,this.EMPTY=new ke(C,u)}be.$metadata$={kind:h,simpleName:"IntRange",interfaces:[me,le]},Object.defineProperty(ke.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(ke.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),ke.prototype.contains_mef7kx$=function(t){return this.first.compareTo_11rb$(t)<=0&&t.compareTo_11rb$(this.last)<=0},ke.prototype.isEmpty=function(){return this.first.compareTo_11rb$(this.last)>0},ke.prototype.equals=function(e){return t.isType(e,ke)&&(this.isEmpty()&&e.isEmpty()||r(this.first,e.first)&&r(this.last,e.last))},ke.prototype.hashCode=function(){return this.isEmpty()?-1:t.Long.fromInt(31).multiply(this.first.xor(this.first.shiftRightUnsigned(32))).add(this.last.xor(this.last.shiftRightUnsigned(32))).toInt()},ke.prototype.toString=function(){return this.first.toString()+".."+this.last.toString()},Se.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ce=null;function Ne(){return null===Ce&&new Se,Ce}function Ee(){Te=this}ke.$metadata$={kind:h,simpleName:"LongRange",interfaces:[me,he]},Ee.prototype.toString=function(){return"kotlin.Unit"},Ee.$metadata$={kind:S,simpleName:"Unit",interfaces:[]};var Te=null;function Pe(){return null===Te&&new Ee,Te}function Oe(t,e){var i=t%e;return i>=0?i:i+e|0}function Me(t,e){var i=t.modulo(e);return i.toNumber()>=0?i:i.add(e)}function je(t,e,i){return Oe(Oe(t,i)-Oe(e,i)|0,i)}function Ae(t,e,i){return Me(Me(t,i).subtract(Me(e,i)),i)}function Ie(t,e,i){if(i>0)return t>=e?e:e-je(e,t,i)|0;if(i<0)return t<=e?e:e+je(t,e,0|-i)|0;throw yi("Step is zero.")}function Re(t,e,i){if(i.toNumber()>0)return t.compareTo_11rb$(e)>=0?e:e.subtract(Ae(e,t,i));if(i.toNumber()<0)return t.compareTo_11rb$(e)<=0?e:e.add(Ae(t,e,i.unaryMinus()));throw yi("Step is zero.")}function Le(t){this.closure$arr=t,this.index=0}function De(t){this.closure$array=t,te.call(this),this.index=0}function qe(t){return new De(t)}function Fe(t){this.closure$array=t,Wt.call(this),this.index=0}function Be(t){return new Fe(t)}function Ue(t){this.closure$array=t,Xt.call(this),this.index=0}function Ve(t){return new Ue(t)}function Ge(t){this.closure$array=t,Kt.call(this),this.index=0}function He(t){return new Ge(t)}function We(t){this.closure$array=t,Yt.call(this),this.index=0}function Ke(t){return new We(t)}function Xe(t){this.closure$array=t,Jt.call(this),this.index=0}function Ye(t){return new Xe(t)}function Ze(t){this.closure$array=t,Qt.call(this),this.index=0}function Je(t){return new Ze(t)}function Qe(t){this.closure$array=t,Zt.call(this),this.index=0}function ti(t){return new Qe(t)}function ei(t){this.c=t}function ii(t){this.resultContinuation_0=t,this.state_0=0,this.exceptionState_0=0,this.result_0=null,this.exception_0=null,this.finallyPath_0=null,this.context_hxcuhl$_0=this.resultContinuation_0.context,this.intercepted__0=null}function ni(){ri=this}Le.prototype.hasNext=function(){return this.index<this.closure$arr.length},Le.prototype.next=function(){var t;if(this.index<this.closure$arr.length)return this.closure$arr[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Le.$metadata$={kind:h,interfaces:[Ut]},De.prototype.hasNext=function(){return this.index<this.closure$array.length},De.prototype.nextBoolean=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},De.$metadata$={kind:h,interfaces:[te]},Fe.prototype.hasNext=function(){return this.index<this.closure$array.length},Fe.prototype.nextByte=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Fe.$metadata$={kind:h,interfaces:[Wt]},Ue.prototype.hasNext=function(){return this.index<this.closure$array.length},Ue.prototype.nextShort=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ue.$metadata$={kind:h,interfaces:[Xt]},Ge.prototype.hasNext=function(){return this.index<this.closure$array.length},Ge.prototype.nextChar=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ge.$metadata$={kind:h,interfaces:[Kt]},We.prototype.hasNext=function(){return this.index<this.closure$array.length},We.prototype.nextInt=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},We.$metadata$={kind:h,interfaces:[Yt]},Xe.prototype.hasNext=function(){return this.index<this.closure$array.length},Xe.prototype.nextFloat=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Xe.$metadata$={kind:h,interfaces:[Jt]},Ze.prototype.hasNext=function(){return this.index<this.closure$array.length},Ze.prototype.nextDouble=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ze.$metadata$={kind:h,interfaces:[Qt]},Qe.prototype.hasNext=function(){return this.index<this.closure$array.length},Qe.prototype.nextLong=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Qe.$metadata$={kind:h,interfaces:[Zt]},ei.prototype.equals=function(e){return t.isType(e,ei)&&this.c===e.c},ei.prototype.hashCode=function(){return this.c},ei.prototype.toString=function(){return String.fromCharCode(a(this.c))},ei.prototype.compareTo_11rb$=function(t){return this.c-t},ei.prototype.valueOf=function(){return this.c},ei.$metadata$={kind:h,simpleName:"BoxedChar",interfaces:[E]},Object.defineProperty(ii.prototype,"context",{configurable:!0,get:function(){return this.context_hxcuhl$_0}}),ii.prototype.intercepted=function(){var t,e,i,n;if(null!=(i=this.intercepted__0))n=i;else{var o=null!=(e=null!=(t=this.context.get_j3r2sn$(Us()))?t.interceptContinuation_wj8d80$(this):null)?e:this;this.intercepted__0=o,n=o}return n},ii.prototype.resumeWith_tl1gpc$=function(e){for(var i,n={v:this},o={v:e.isFailure?null:null==(i=e.value)||t.isType(i,k)?i:P()},r={v:e.exceptionOrNull()};;){var s,a,l=n.v,u=l.resultContinuation_0;null==r.v?l.result_0=o.v:(l.state_0=l.exceptionState_0,l.exception_0=r.v);try{var p=l.doResume();if(p===aa())return;o.v=p,r.v=null}catch(t){o.v=null,r.v=t}if(l.releaseIntercepted_0(),!t.isType(u,ii))return null!=(s=r.v)?(u.resumeWith_tl1gpc$(new dl(yl(s))),a=Ee):a=null,void(null==a&&u.resumeWith_tl1gpc$(new dl(o.v)));n.v=u}},ii.prototype.releaseIntercepted_0=function(){var t=this.intercepted__0;null!=t&&t!==this&&T(this.context.get_j3r2sn$(Us())).releaseInterceptedContinuation_k98bjh$(t),this.intercepted__0=si()},ii.$metadata$={kind:h,simpleName:"CoroutineImpl",interfaces:[Ds]},Object.defineProperty(ni.prototype,"context",{configurable:!0,get:function(){throw gi("This continuation is already complete".toString())}}),ni.prototype.resumeWith_tl1gpc$=function(t){throw gi("This continuation is already complete".toString())},ni.prototype.toString=function(){return"This continuation is already complete"},ni.$metadata$={kind:S,simpleName:"CompletedContinuation",interfaces:[Ds]};var oi,ri=null;function si(){return null===ri&&new ni,ri}function ai(t,e){this.closure$block=t,ii.call(this,e)}function li(e,i){return 2==e.length?e(i,!0):new ai((o=e,r=i,function(){return o(r)}),t.isType(n=i,Ds)?n:io());var n,o,r}function ui(e,i,n){return 3==e.length?e(i,n,!0):new ai((r=e,s=i,a=n,function(){return r(s,a)}),t.isType(o=n,Ds)?o:io());var o,r,s,a}function pi(e){var i,n,o;return null!=(o=null!=(n=t.isType(i=e,ii)?i:null)?n.intercepted():null)?o:e}function ci(e,i){var n;O.call(this),n=null!=i?i:null,this.message_q7r8iu$_0=void 0===e&&null!=n?t.toString(n):e,this.cause_us9j0c$_0=n,t.captureStack(O,this),this.name="Error"}function hi(t,e){return e=e||Object.create(ci.prototype),ci.call(e,t,null),e}function di(e,i){var n;O.call(this),n=null!=i?i:null,this.message_8yp7un$_0=void 0===e&&null!=n?t.toString(n):e,this.cause_th0jdv$_0=n,t.captureStack(O,this),this.name="Exception"}function fi(t,e){return e=e||Object.create(di.prototype),di.call(e,t,null),e}function _i(t,e){di.call(this,t,e),this.name="RuntimeException"}function mi(t,e){return e=e||Object.create(_i.prototype),_i.call(e,t,null),e}function $i(t,e){_i.call(this,t,e),this.name="IllegalArgumentException"}function yi(t,e){return e=e||Object.create($i.prototype),$i.call(e,t,null),e}function vi(t,e){_i.call(this,t,e),this.name="IllegalStateException"}function gi(t,e){return e=e||Object.create(vi.prototype),vi.call(e,t,null),e}function bi(t){mi(t,this),this.name="IndexOutOfBoundsException"}function xi(t,e){_i.call(this,t,e),this.name="UnsupportedOperationException"}function wi(t){return t=t||Object.create(xi.prototype),xi.call(t,null,null),t}function zi(t,e){return e=e||Object.create(xi.prototype),xi.call(e,t,null),e}function ki(t){yi(t,this),this.name="NumberFormatException"}function Si(t){mi(t,this),this.name="NullPointerException"}function Ci(t){mi(t,this),this.name="ClassCastException"}function Ni(t){mi(t,this),this.name="NoSuchElementException"}function Ei(t){return t=t||Object.create(Ni.prototype),Ni.call(t,null),t}function Ti(t){mi(t,this),this.name="ArithmeticException"}function Pi(t,e){_i.call(this,t,e),this.name="NoWhenBranchMatchedException"}function Oi(t){return t=t||Object.create(Pi.prototype),Pi.call(t,null,null),t}function Mi(t,e){_i.call(this,t,e),this.name="UninitializedPropertyAccessException"}function ji(t,e){return e=e||Object.create(Mi.prototype),Mi.call(e,t,null),e}function Ai(t,e){for(var i,n=t.length,o=e.length,r=0;r<n&&r<o;)e[r]=t[(i=r,r=i+1|0,i)];return e}function Ii(t,e,i){var n,o=t.slice(0,e);void 0!==t.$type$&&(o.$type$=t.$type$);var r=t.length;if(e>r)for(o.length=e;r<e;)o[(n=r,r=n+1|0,n)]=i;return o}function Ri(t,e){return t.toString(fr(e))}function Li(t){return new pn(t)}function Di(t,e,i){return Pr().checkRangeIndexes_cub51b$(e,i,t.length),t.slice(e,i)}function qi(t){var e=(t.size/2|0)-1|0;if(!(e<0))for(var i=ts(t),n=0;n<=e;n++){var o=t.get_za3lpa$(n);t.set_wxm5ur$(n,t.get_za3lpa$(i)),t.set_wxm5ur$(i,o),i=i-1|0}}function Fi(t){this.function$=t}function Bi(t){return void 0!==t.toArray?t.toArray():Ui(t)}function Ui(t){for(var e=[],i=t.iterator();i.hasNext();)e.push(i.next());return e}function Vi(t,e){var i;if(e.length<t.size)return Ui(t);for(var n=t.iterator(),o=0;n.hasNext();)e[(i=o,o=i+1|0,i)]=n.next();return o<e.length&&(e[o]=null),e}function Gi(t){return Qr([t])}function Hi(t){return Ls([t])}function Wi(t){return ms([t])}function Ki(t){at(t,ma())}function Xi(t){return t<0&&is(),t}function Yi(t){return t}function Zi(){Cr.call(this)}function Ji(){Zi.call(this),this.modCount=0}function Qi(t){this.$outer=t,this.index_0=0,this.last_0=-1}function tn(t,e){this.$outer=t,Qi.call(this,this.$outer),Pr().checkPositionIndex_6xvm5r$(e,this.$outer.size),this.index_0=e}function en(t,e,i){Ji.call(this),this.list_0=t,this.fromIndex_0=e,this._size_0=0,Pr().checkRangeIndexes_cub51b$(this.fromIndex_0,i,this.list_0.size),this._size_0=i-this.fromIndex_0|0}function nn(){Or.call(this),this._keys_qe2m0n$_0=null,this._values_kxdlqh$_0=null}function on(t,e){this.key_5xhq3d$_0=t,this._value_0=e}function rn(t){this.this$AbstractMutableMap=t,un.call(this)}function sn(t){this.closure$entryIterator=t}function an(t){this.this$AbstractMutableMap=t,Zi.call(this)}function ln(t){this.closure$entryIterator=t}function un(){Zi.call(this)}function pn(t){Ji.call(this),this.array_hd7ov6$_0=t,this.isReadOnly_dbt2oh$_0=!1}function cn(t){return t=t||Object.create(pn.prototype),pn.call(t,[]),t}function hn(t,e){return void 0===t&&(t=0),e=e||Object.create(pn.prototype),pn.call(e,[]),e}function dn(t,e){return e=e||Object.create(pn.prototype),pn.call(e,Bi(t)),e}function fn(e,i){if(function(){if(null!=oi)return oi;oi=!1;for(var t=[],e=0;e<600;e++)t.push(e);var i=_n;t.sort(i);for(var n=1;n<t.length;n++){var o=t[n-1|0],r=t[n];if((3&o)==(3&r)&&o>=r)return!1}return oi=!0,!0}()){var n=(o=i,function(t,e){return o.compare(t,e)});e.sort(n)}else!function(e,i,n,o){var r=t.newArray(e.length,null),s=function t(e,i,n,o,r){if(n===o)return e;for(var s=(n+o|0)/2|0,a=t(e,i,n,s,r),l=t(e,i,s+1|0,o,r),u=a===i?e:i,p=n,c=s+1|0,h=n;h<=o;h++)if(p<=s&&c<=o){var d=a[p],f=l[c];r.compare(d,f)<=0?(u[h]=d,p=p+1|0):(u[h]=f,c=c+1|0)}else p<=s?(u[h]=a[p],p=p+1|0):(u[h]=l[c],c=c+1|0);return u}(e,r,i,n,o);if(s!==e)for(var a=i;a<=n;a++)e[a]=s[a]}(e,0,X(e),i);var o}function _n(t,e){return(3&t)-(3&e)|0}function mn(){}function $n(){bn=this}ai.prototype=Object.create(ii.prototype),ai.prototype.constructor=ai,ai.prototype.doResume=function(){var t;if(null!=(t=this.exception_0))throw t;return this.closure$block()},ai.$metadata$={kind:h,interfaces:[ii]},Object.defineProperty(ci.prototype,"message",{get:function(){return this.message_q7r8iu$_0}}),Object.defineProperty(ci.prototype,"cause",{get:function(){return this.cause_us9j0c$_0}}),ci.$metadata$={kind:h,simpleName:"Error",interfaces:[O]},Object.defineProperty(di.prototype,"message",{get:function(){return this.message_8yp7un$_0}}),Object.defineProperty(di.prototype,"cause",{get:function(){return this.cause_th0jdv$_0}}),di.$metadata$={kind:h,simpleName:"Exception",interfaces:[O]},_i.$metadata$={kind:h,simpleName:"RuntimeException",interfaces:[di]},$i.$metadata$={kind:h,simpleName:"IllegalArgumentException",interfaces:[_i]},vi.$metadata$={kind:h,simpleName:"IllegalStateException",interfaces:[_i]},bi.$metadata$={kind:h,simpleName:"IndexOutOfBoundsException",interfaces:[_i]},xi.$metadata$={kind:h,simpleName:"UnsupportedOperationException",interfaces:[_i]},ki.$metadata$={kind:h,simpleName:"NumberFormatException",interfaces:[$i]},Si.$metadata$={kind:h,simpleName:"NullPointerException",interfaces:[_i]},Ci.$metadata$={kind:h,simpleName:"ClassCastException",interfaces:[_i]},Ni.$metadata$={kind:h,simpleName:"NoSuchElementException",interfaces:[_i]},Ti.$metadata$={kind:h,simpleName:"ArithmeticException",interfaces:[_i]},Pi.$metadata$={kind:h,simpleName:"NoWhenBranchMatchedException",interfaces:[_i]},Mi.$metadata$={kind:h,simpleName:"UninitializedPropertyAccessException",interfaces:[_i]},Fi.prototype.compare=function(t,e){return this.function$(t,e)},Fi.$metadata$={kind:z,simpleName:"Comparator",interfaces:[]},Zi.prototype.remove_11rb$=function(t){this.checkIsMutable();for(var e=this.iterator();e.hasNext();)if(r(e.next(),t))return e.remove(),!0;return!1},Zi.prototype.addAll_brywnq$=function(t){var e;this.checkIsMutable();var i=!1;for(e=t.iterator();e.hasNext();){var n=e.next();this.add_11rb$(n)&&(i=!0)}return i},Zi.prototype.removeAll_brywnq$=function(e){var i;return this.checkIsMutable(),xs(t.isType(this,Ot)?this:io(),(i=e,function(t){return i.contains_11rb$(t)}))},Zi.prototype.retainAll_brywnq$=function(e){var i;return this.checkIsMutable(),xs(t.isType(this,Ot)?this:io(),(i=e,function(t){return!i.contains_11rb$(t)}))},Zi.prototype.clear=function(){this.checkIsMutable();for(var t=this.iterator();t.hasNext();)t.next(),t.remove()},Zi.prototype.toJSON=function(){return this.toArray()},Zi.prototype.checkIsMutable=function(){},Zi.$metadata$={kind:h,simpleName:"AbstractMutableCollection",interfaces:[jt,Cr]},Ji.prototype.add_11rb$=function(t){return this.checkIsMutable(),this.add_wxm5ur$(this.size,t),!0},Ji.prototype.addAll_u57x28$=function(t,e){var i,n;this.checkIsMutable();var o=t,r=!1;for(i=e.iterator();i.hasNext();){var s=i.next();this.add_wxm5ur$((o=(n=o)+1|0,n),s),r=!0}return r},Ji.prototype.clear=function(){this.checkIsMutable(),this.removeRange_vux9f0$(0,this.size)},Ji.prototype.removeAll_brywnq$=function(t){return this.checkIsMutable(),zs(this,(e=t,function(t){return e.contains_11rb$(t)}));var e},Ji.prototype.retainAll_brywnq$=function(t){return this.checkIsMutable(),zs(this,(e=t,function(t){return!e.contains_11rb$(t)}));var e},Ji.prototype.iterator=function(){return new Qi(this)},Ji.prototype.contains_11rb$=function(t){return this.indexOf_11rb$(t)>=0},Ji.prototype.indexOf_11rb$=function(t){var e;e=ts(this);for(var i=0;i<=e;i++)if(r(this.get_za3lpa$(i),t))return i;return-1},Ji.prototype.lastIndexOf_11rb$=function(t){for(var e=ts(this);e>=0;e--)if(r(this.get_za3lpa$(e),t))return e;return-1},Ji.prototype.listIterator=function(){return this.listIterator_za3lpa$(0)},Ji.prototype.listIterator_za3lpa$=function(t){return new tn(this,t)},Ji.prototype.subList_vux9f0$=function(t,e){return new en(this,t,e)},Ji.prototype.removeRange_vux9f0$=function(t,e){for(var i=this.listIterator_za3lpa$(t),n=e-t|0,o=0;o<n;o++)i.next(),i.remove()},Ji.prototype.equals=function(e){return e===this||!!t.isType(e,At)&&Pr().orderedEquals_e92ka7$(this,e)},Ji.prototype.hashCode=function(){return Pr().orderedHashCode_nykoif$(this)},Qi.prototype.hasNext=function(){return this.index_0<this.$outer.size},Qi.prototype.next=function(){var t;if(!this.hasNext())throw Ei();return this.last_0=(t=this.index_0,this.index_0=t+1|0,t),this.$outer.get_za3lpa$(this.last_0)},Qi.prototype.remove=function(){if(-1===this.last_0)throw gi("Call next() or previous() before removing element from the iterator.".toString());this.$outer.removeAt_za3lpa$(this.last_0),this.index_0=this.last_0,this.last_0=-1},Qi.$metadata$={kind:h,simpleName:"IteratorImpl",interfaces:[Vt]},tn.prototype.hasPrevious=function(){return this.index_0>0},tn.prototype.nextIndex=function(){return this.index_0},tn.prototype.previous=function(){if(!this.hasPrevious())throw Ei();return this.last_0=(this.index_0=this.index_0-1|0,this.index_0),this.$outer.get_za3lpa$(this.last_0)},tn.prototype.previousIndex=function(){return this.index_0-1|0},tn.prototype.add_11rb$=function(t){this.$outer.add_wxm5ur$(this.index_0,t),this.index_0=this.index_0+1|0,this.last_0=-1},tn.prototype.set_11rb$=function(t){if(-1===this.last_0)throw gi("Call next() or previous() before updating element value with the iterator.".toString());this.$outer.set_wxm5ur$(this.last_0,t)},tn.$metadata$={kind:h,simpleName:"ListIteratorImpl",interfaces:[Ht,Qi]},en.prototype.add_wxm5ur$=function(t,e){Pr().checkPositionIndex_6xvm5r$(t,this._size_0),this.list_0.add_wxm5ur$(this.fromIndex_0+t|0,e),this._size_0=this._size_0+1|0},en.prototype.get_za3lpa$=function(t){return Pr().checkElementIndex_6xvm5r$(t,this._size_0),this.list_0.get_za3lpa$(this.fromIndex_0+t|0)},en.prototype.removeAt_za3lpa$=function(t){Pr().checkElementIndex_6xvm5r$(t,this._size_0);var e=this.list_0.removeAt_za3lpa$(this.fromIndex_0+t|0);return this._size_0=this._size_0-1|0,e},en.prototype.set_wxm5ur$=function(t,e){return Pr().checkElementIndex_6xvm5r$(t,this._size_0),this.list_0.set_wxm5ur$(this.fromIndex_0+t|0,e)},Object.defineProperty(en.prototype,"size",{configurable:!0,get:function(){return this._size_0}}),en.prototype.checkIsMutable=function(){this.list_0.checkIsMutable()},en.$metadata$={kind:h,simpleName:"SubList",interfaces:[Xn,Ji]},Ji.$metadata$={kind:h,simpleName:"AbstractMutableList",interfaces:[It,Zi]},Object.defineProperty(on.prototype,"key",{get:function(){return this.key_5xhq3d$_0}}),Object.defineProperty(on.prototype,"value",{configurable:!0,get:function(){return this._value_0}}),on.prototype.setValue_11rc$=function(t){var e=this._value_0;return this._value_0=t,e},on.prototype.hashCode=function(){return Dr().entryHashCode_9fthdn$(this)},on.prototype.toString=function(){return Dr().entryToString_9fthdn$(this)},on.prototype.equals=function(t){return Dr().entryEquals_js7fox$(this,t)},on.$metadata$={kind:h,simpleName:"SimpleEntry",interfaces:[Bt]},nn.prototype.clear=function(){this.entries.clear()},rn.prototype.add_11rb$=function(t){throw zi("Add is not supported on keys")},rn.prototype.clear=function(){this.this$AbstractMutableMap.clear()},rn.prototype.contains_11rb$=function(t){return this.this$AbstractMutableMap.containsKey_11rb$(t)},sn.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},sn.prototype.next=function(){return this.closure$entryIterator.next().key},sn.prototype.remove=function(){this.closure$entryIterator.remove()},sn.$metadata$={kind:h,interfaces:[Vt]},rn.prototype.iterator=function(){return new sn(this.this$AbstractMutableMap.entries.iterator())},rn.prototype.remove_11rb$=function(t){return this.checkIsMutable(),!!this.this$AbstractMutableMap.containsKey_11rb$(t)&&(this.this$AbstractMutableMap.remove_11rb$(t),!0)},Object.defineProperty(rn.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMutableMap.size}}),rn.prototype.checkIsMutable=function(){this.this$AbstractMutableMap.checkIsMutable()},rn.$metadata$={kind:h,interfaces:[un]},Object.defineProperty(nn.prototype,"keys",{configurable:!0,get:function(){return null==this._keys_qe2m0n$_0&&(this._keys_qe2m0n$_0=new rn(this)),T(this._keys_qe2m0n$_0)}}),nn.prototype.putAll_a2k3zr$=function(t){var e;for(this.checkIsMutable(),e=t.entries.iterator();e.hasNext();){var i=e.next(),n=i.key,o=i.value;this.put_xwzc9p$(n,o)}},an.prototype.add_11rb$=function(t){throw zi("Add is not supported on values")},an.prototype.clear=function(){this.this$AbstractMutableMap.clear()},an.prototype.contains_11rb$=function(t){return this.this$AbstractMutableMap.containsValue_11rc$(t)},ln.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},ln.prototype.next=function(){return this.closure$entryIterator.next().value},ln.prototype.remove=function(){this.closure$entryIterator.remove()},ln.$metadata$={kind:h,interfaces:[Vt]},an.prototype.iterator=function(){return new ln(this.this$AbstractMutableMap.entries.iterator())},Object.defineProperty(an.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMutableMap.size}}),an.prototype.equals=function(e){return this===e||!!t.isType(e,Mt)&&Pr().orderedEquals_e92ka7$(this,e)},an.prototype.hashCode=function(){return Pr().orderedHashCode_nykoif$(this)},an.prototype.checkIsMutable=function(){this.this$AbstractMutableMap.checkIsMutable()},an.$metadata$={kind:h,interfaces:[Zi]},Object.defineProperty(nn.prototype,"values",{configurable:!0,get:function(){return null==this._values_kxdlqh$_0&&(this._values_kxdlqh$_0=new an(this)),T(this._values_kxdlqh$_0)}}),nn.prototype.remove_11rb$=function(t){this.checkIsMutable();for(var e=this.entries.iterator();e.hasNext();){var i=e.next(),n=i.key;if(r(t,n)){var o=i.value;return e.remove(),o}}return null},nn.prototype.checkIsMutable=function(){},nn.$metadata$={kind:h,simpleName:"AbstractMutableMap",interfaces:[Ft,Or]},un.prototype.equals=function(e){return e===this||!!t.isType(e,Rt)&&Ur().setEquals_y8f7en$(this,e)},un.prototype.hashCode=function(){return Ur().unorderedHashCode_nykoif$(this)},un.$metadata$={kind:h,simpleName:"AbstractMutableSet",interfaces:[Lt,Zi]},pn.prototype.build=function(){return this.checkIsMutable(),this.isReadOnly_dbt2oh$_0=!0,this},pn.prototype.trimToSize=function(){},pn.prototype.ensureCapacity_za3lpa$=function(t){},Object.defineProperty(pn.prototype,"size",{configurable:!0,get:function(){return this.array_hd7ov6$_0.length}}),pn.prototype.get_za3lpa$=function(e){var i;return null==(i=this.array_hd7ov6$_0[this.rangeCheck_xcmk5o$_0(e)])||t.isType(i,k)?i:io()},pn.prototype.set_wxm5ur$=function(e,i){var n;this.checkIsMutable(),this.rangeCheck_xcmk5o$_0(e);var o=this.array_hd7ov6$_0[e];return this.array_hd7ov6$_0[e]=i,null==(n=o)||t.isType(n,k)?n:io()},pn.prototype.add_11rb$=function(t){return this.checkIsMutable(),this.array_hd7ov6$_0.push(t),this.modCount=this.modCount+1|0,!0},pn.prototype.add_wxm5ur$=function(t,e){this.checkIsMutable(),this.array_hd7ov6$_0.splice(this.insertionRangeCheck_xwivfl$_0(t),0,e),this.modCount=this.modCount+1|0},pn.prototype.addAll_brywnq$=function(t){return this.checkIsMutable(),!t.isEmpty()&&(this.array_hd7ov6$_0=this.array_hd7ov6$_0.concat(Bi(t)),this.modCount=this.modCount+1|0,!0)},pn.prototype.addAll_u57x28$=function(t,e){return this.checkIsMutable(),this.insertionRangeCheck_xwivfl$_0(t),t===this.size?this.addAll_brywnq$(e):!e.isEmpty()&&(t===this.size?this.addAll_brywnq$(e):(this.array_hd7ov6$_0=0===t?Bi(e).concat(this.array_hd7ov6$_0):Di(this.array_hd7ov6$_0,0,t).concat(Bi(e),Di(this.array_hd7ov6$_0,t,this.size)),this.modCount=this.modCount+1|0,!0))},pn.prototype.removeAt_za3lpa$=function(t){return this.checkIsMutable(),this.rangeCheck_xcmk5o$_0(t),this.modCount=this.modCount+1|0,t===ts(this)?this.array_hd7ov6$_0.pop():this.array_hd7ov6$_0.splice(t,1)[0]},pn.prototype.remove_11rb$=function(t){var e;this.checkIsMutable(),e=this.array_hd7ov6$_0;for(var i=0;i!==e.length;++i)if(r(this.array_hd7ov6$_0[i],t))return this.array_hd7ov6$_0.splice(i,1),this.modCount=this.modCount+1|0,!0;return!1},pn.prototype.removeRange_vux9f0$=function(t,e){this.checkIsMutable(),this.modCount=this.modCount+1|0,this.array_hd7ov6$_0.splice(t,e-t|0)},pn.prototype.clear=function(){this.checkIsMutable(),this.array_hd7ov6$_0=[],this.modCount=this.modCount+1|0},pn.prototype.indexOf_11rb$=function(t){return G(this.array_hd7ov6$_0,t)},pn.prototype.lastIndexOf_11rb$=function(t){return H(this.array_hd7ov6$_0,t)},pn.prototype.toString=function(){return M(this.array_hd7ov6$_0)},pn.prototype.toArray=function(){return[].slice.call(this.array_hd7ov6$_0)},pn.prototype.checkIsMutable=function(){if(this.isReadOnly_dbt2oh$_0)throw wi()},pn.prototype.rangeCheck_xcmk5o$_0=function(t){return Pr().checkElementIndex_6xvm5r$(t,this.size),t},pn.prototype.insertionRangeCheck_xwivfl$_0=function(t){return Pr().checkPositionIndex_6xvm5r$(t,this.size),t},pn.$metadata$={kind:h,simpleName:"ArrayList",interfaces:[Xn,Ji,It]},$n.prototype.equals_oaftn8$=function(t,e){return r(t,e)},$n.prototype.getHashCode_s8jyv4$=function(t){var e;return null!=(e=null!=t?j(t):null)?e:0},$n.$metadata$={kind:S,simpleName:"HashCode",interfaces:[mn]};var yn,vn,gn,bn=null;function xn(){return null===bn&&new $n,bn}function wn(){this.internalMap_uxhen5$_0=null,this.equality_vgh6cm$_0=null,this._entries_7ih87x$_0=null}function zn(t){this.$outer=t,un.call(this)}function kn(t,e){return e=e||Object.create(wn.prototype),nn.call(e),wn.call(e),e.internalMap_uxhen5$_0=t,e.equality_vgh6cm$_0=t.equality,e}function Sn(t){return t=t||Object.create(wn.prototype),kn(new Mn(xn()),t),t}function Cn(t,e,i){if(void 0===e&&(e=0),Sn(i=i||Object.create(wn.prototype)),!(t>=0))throw yi(("Negative initial capacity: "+t).toString());if(!(e>=0))throw yi(("Non-positive load factor: "+e).toString());return i}function Nn(t,e){return Cn(t,0,e=e||Object.create(wn.prototype)),e}function En(){this.map_8be2vx$=null}function Tn(t,e,i){return void 0===e&&(e=0),i=i||Object.create(En.prototype),un.call(i),En.call(i),i.map_8be2vx$=Cn(t,e),i}function Pn(t,e){return Tn(t,0,e=e||Object.create(En.prototype)),e}function On(t,e){return e=e||Object.create(En.prototype),un.call(e),En.call(e),e.map_8be2vx$=t,e}function Mn(t){this.equality_mamlu8$_0=t,this.backingMap_0=this.createJsMap(),this.size_x3bm7r$_0=0}function jn(t){this.this$InternalHashCodeMap=t,this.state=-1,this.keys=Object.keys(t.backingMap_0),this.keyIndex=-1,this.chainOrEntry=null,this.isChain=!1,this.itemIndex=-1,this.lastEntry=null}function An(){}function In(t){this.equality_qma612$_0=t,this.backingMap_0=this.createJsMap(),this.size_6u3ykz$_0=0}function Rn(){this.head_1lr44l$_0=null,this.map_97q5dv$_0=null,this.isReadOnly_uhyvn5$_0=!1}function Ln(t,e,i){this.$outer=t,on.call(this,e,i),this.next_8be2vx$=null,this.prev_8be2vx$=null}function Dn(t){this.$outer=t,un.call(this)}function qn(t){this.$outer=t,this.last_0=null,this.next_0=null,this.next_0=this.$outer.$outer.head_1lr44l$_0}function Fn(t){return Sn(t=t||Object.create(Rn.prototype)),Rn.call(t),t.map_97q5dv$_0=Sn(),t}function Bn(t,e,i){return void 0===e&&(e=0),Cn(t,e,i=i||Object.create(Rn.prototype)),Rn.call(i),i.map_97q5dv$_0=Sn(),i}function Un(t,e){return Bn(t,0,e=e||Object.create(Rn.prototype)),e}function Vn(){}function Gn(t){return t=t||Object.create(Vn.prototype),On(Fn(),t),Vn.call(t),t}function Hn(t,e){return e=e||Object.create(Vn.prototype),On(Fn(),e),Vn.call(e),e.addAll_brywnq$(t),e}function Wn(t,e,i){return void 0===e&&(e=0),i=i||Object.create(Vn.prototype),On(Bn(t,e),i),Vn.call(i),i}function Kn(t,e){return Wn(t,0,e=e||Object.create(Vn.prototype)),e}function Xn(){}function Yn(){}function Zn(t){Yn.call(this),this.outputStream=t}function Jn(){Yn.call(this),this.buffer=""}function Qn(){Jn.call(this)}function to(t,e){this.delegate_0=t,this.result_0=e}function eo(t,e){this.closure$context=t,this.closure$resumeWith=e}function io(){throw new Ci("Illegal cast")}function no(t){throw gi(t)}function oo(){}function ro(e){if(so(e)||e===l.NEGATIVE_INFINITY)return e;if(0===e)return-l.MIN_VALUE;var i=A(e).add(t.Long.fromInt(e>0?-1:1));return t.doubleFromBits(i)}function so(t){return t!=t}function ao(t){return t!=t}function lo(t){return t===l.POSITIVE_INFINITY||t===l.NEGATIVE_INFINITY}function uo(t){return t===I.POSITIVE_INFINITY||t===I.NEGATIVE_INFINITY}function po(t){return!lo(t)&&!so(t)}function co(){return $a(Math.random()*Math.pow(2,32)|0)}function ho(t,e){return t*vn+e*gn}function fo(){}function _o(){}function mo(t){this.jClass_1ppatx$_0=t}function $o(t){var e;mo.call(this,t),this.simpleName_m7mxi0$_0=null!=(e=t.$metadata$)?e.simpleName:null}function yo(t,e,i){mo.call(this,t),this.givenSimpleName_0=e,this.isInstanceFunction_0=i}function vo(){go=this,mo.call(this,Object),this.simpleName_lnzy73$_0="Nothing"}mn.$metadata$={kind:z,simpleName:"EqualityComparator",interfaces:[]},zn.prototype.add_11rb$=function(t){throw zi("Add is not supported on entries")},zn.prototype.clear=function(){this.$outer.clear()},zn.prototype.contains_11rb$=function(t){return this.$outer.containsEntry_8hxqw4$(t)},zn.prototype.iterator=function(){return this.$outer.internalMap_uxhen5$_0.iterator()},zn.prototype.remove_11rb$=function(t){return!!this.contains_11rb$(t)&&(this.$outer.remove_11rb$(t.key),!0)},Object.defineProperty(zn.prototype,"size",{configurable:!0,get:function(){return this.$outer.size}}),zn.$metadata$={kind:h,simpleName:"EntrySet",interfaces:[un]},wn.prototype.clear=function(){this.internalMap_uxhen5$_0.clear()},wn.prototype.containsKey_11rb$=function(t){return this.internalMap_uxhen5$_0.contains_11rb$(t)},wn.prototype.containsValue_11rc$=function(e){var i,n=this.internalMap_uxhen5$_0;t:do{var o;if(t.isType(n,Mt)&&n.isEmpty()){i=!1;break t}for(o=n.iterator();o.hasNext();){var r=o.next();if(this.equality_vgh6cm$_0.equals_oaftn8$(r.value,e)){i=!0;break t}}i=!1}while(0);return i},Object.defineProperty(wn.prototype,"entries",{configurable:!0,get:function(){return null==this._entries_7ih87x$_0&&(this._entries_7ih87x$_0=this.createEntrySet()),T(this._entries_7ih87x$_0)}}),wn.prototype.createEntrySet=function(){return new zn(this)},wn.prototype.get_11rb$=function(t){return this.internalMap_uxhen5$_0.get_11rb$(t)},wn.prototype.put_xwzc9p$=function(t,e){return this.internalMap_uxhen5$_0.put_xwzc9p$(t,e)},wn.prototype.remove_11rb$=function(t){return this.internalMap_uxhen5$_0.remove_11rb$(t)},Object.defineProperty(wn.prototype,"size",{configurable:!0,get:function(){return this.internalMap_uxhen5$_0.size}}),wn.$metadata$={kind:h,simpleName:"HashMap",interfaces:[nn,Ft]},En.prototype.add_11rb$=function(t){return null==this.map_8be2vx$.put_xwzc9p$(t,this)},En.prototype.clear=function(){this.map_8be2vx$.clear()},En.prototype.contains_11rb$=function(t){return this.map_8be2vx$.containsKey_11rb$(t)},En.prototype.isEmpty=function(){return this.map_8be2vx$.isEmpty()},En.prototype.iterator=function(){return this.map_8be2vx$.keys.iterator()},En.prototype.remove_11rb$=function(t){return null!=this.map_8be2vx$.remove_11rb$(t)},Object.defineProperty(En.prototype,"size",{configurable:!0,get:function(){return this.map_8be2vx$.size}}),En.$metadata$={kind:h,simpleName:"HashSet",interfaces:[un,Lt]},Object.defineProperty(Mn.prototype,"equality",{get:function(){return this.equality_mamlu8$_0}}),Object.defineProperty(Mn.prototype,"size",{configurable:!0,get:function(){return this.size_x3bm7r$_0},set:function(t){this.size_x3bm7r$_0=t}}),Mn.prototype.put_xwzc9p$=function(e,i){var n=this.equality.getHashCode_s8jyv4$(e),o=this.getChainOrEntryOrNull_0(n);if(null==o)this.backingMap_0[n]=new on(e,i);else{if(!t.isArray(o)){var r=o;return this.equality.equals_oaftn8$(r.key,e)?r.setValue_11rc$(i):(this.backingMap_0[n]=[r,new on(e,i)],this.size=this.size+1|0,null)}var s=o,a=this.findEntryInChain_0(s,e);if(null!=a)return a.setValue_11rc$(i);s.push(new on(e,i))}return this.size=this.size+1|0,null},Mn.prototype.remove_11rb$=function(e){var i,n=this.equality.getHashCode_s8jyv4$(e);if(null==(i=this.getChainOrEntryOrNull_0(n)))return null;var o=i;if(!t.isArray(o)){var r=o;return this.equality.equals_oaftn8$(r.key,e)?(delete this.backingMap_0[n],this.size=this.size-1|0,r.value):null}for(var s=o,a=0;a!==s.length;++a){var l=s[a];if(this.equality.equals_oaftn8$(e,l.key))return 1===s.length?(s.length=0,delete this.backingMap_0[n]):s.splice(a,1),this.size=this.size-1|0,l.value}return null},Mn.prototype.clear=function(){this.backingMap_0=this.createJsMap(),this.size=0},Mn.prototype.contains_11rb$=function(t){return null!=this.getEntry_0(t)},Mn.prototype.get_11rb$=function(t){var e;return null!=(e=this.getEntry_0(t))?e.value:null},Mn.prototype.getEntry_0=function(e){var i;if(null==(i=this.getChainOrEntryOrNull_0(this.equality.getHashCode_s8jyv4$(e))))return null;var n=i;if(t.isArray(n)){var o=n;return this.findEntryInChain_0(o,e)}var r=n;return this.equality.equals_oaftn8$(r.key,e)?r:null},Mn.prototype.findEntryInChain_0=function(t,e){var i;t:do{var n;for(n=0;n!==t.length;++n){var o=t[n];if(this.equality.equals_oaftn8$(o.key,e)){i=o;break t}}i=null}while(0);return i},jn.prototype.computeNext_0=function(){if(null!=this.chainOrEntry&&this.isChain){var e=this.chainOrEntry.length;if(this.itemIndex=this.itemIndex+1|0,this.itemIndex<e)return 0}return this.keyIndex=this.keyIndex+1|0,this.keyIndex<this.keys.length?(this.chainOrEntry=this.this$InternalHashCodeMap.backingMap_0[this.keys[this.keyIndex]],this.isChain=t.isArray(this.chainOrEntry),this.itemIndex=0,0):(this.chainOrEntry=null,1)},jn.prototype.hasNext=function(){return-1===this.state&&(this.state=this.computeNext_0()),0===this.state},jn.prototype.next=function(){if(!this.hasNext())throw Ei();var t=this.isChain?this.chainOrEntry[this.itemIndex]:this.chainOrEntry;return this.lastEntry=t,this.state=-1,t},jn.prototype.remove=function(){if(null==this.lastEntry)throw gi("Required value was null.".toString());this.this$InternalHashCodeMap.remove_11rb$(T(this.lastEntry).key),this.lastEntry=null,this.itemIndex=this.itemIndex-1|0},jn.$metadata$={kind:h,interfaces:[Vt]},Mn.prototype.iterator=function(){return new jn(this)},Mn.prototype.getChainOrEntryOrNull_0=function(t){var e=this.backingMap_0[t];return void 0===e?null:e},Mn.$metadata$={kind:h,simpleName:"InternalHashCodeMap",interfaces:[An]},An.prototype.createJsMap=function(){var t=Object.create(null);return t.foo=1,delete t.foo,t},An.$metadata$={kind:z,simpleName:"InternalMap",interfaces:[Ot]},Ln.prototype.setValue_11rc$=function(t){return this.$outer.checkIsMutable(),on.prototype.setValue_11rc$.call(this,t)},Ln.$metadata$={kind:h,simpleName:"ChainEntry",interfaces:[on]},qn.prototype.hasNext=function(){return null!==this.next_0},qn.prototype.next=function(){if(!this.hasNext())throw Ei();var t=T(this.next_0);this.last_0=t;var e=t.next_8be2vx$;return this.$outer.$outer,this.next_0=e!==this.$outer.$outer.head_1lr44l$_0?e:null,t},qn.prototype.remove=function(){if(null==this.last_0)throw gi("Check failed.".toString());this.$outer.checkIsMutable(),this.$outer.$outer.remove_njjxy0$_0(T(this.last_0)),this.$outer.$outer.map_97q5dv$_0.remove_11rb$(T(this.last_0).key),this.last_0=null},qn.$metadata$={kind:h,simpleName:"EntryIterator",interfaces:[Vt]},Dn.prototype.add_11rb$=function(t){throw zi("Add is not supported on entries")},Dn.prototype.clear=function(){this.$outer.clear()},Dn.prototype.contains_11rb$=function(t){return this.$outer.containsEntry_8hxqw4$(t)},Dn.prototype.iterator=function(){return new qn(this)},Dn.prototype.remove_11rb$=function(t){return this.checkIsMutable(),!!this.contains_11rb$(t)&&(this.$outer.remove_11rb$(t.key),!0)},Object.defineProperty(Dn.prototype,"size",{configurable:!0,get:function(){return this.$outer.size}}),Dn.prototype.checkIsMutable=function(){this.$outer.checkIsMutable()},Dn.$metadata$={kind:h,simpleName:"EntrySet",interfaces:[un]},Rn.prototype.addToEnd_lfi3hf$_0=function(t){if(null!=t.next_8be2vx$||null!=t.prev_8be2vx$)throw gi("Check failed.".toString());var e=this.head_1lr44l$_0;if(null==e)this.head_1lr44l$_0=t,t.next_8be2vx$=t,t.prev_8be2vx$=t;else{var i=e.prev_8be2vx$;if(null==i)throw gi("Required value was null.".toString());var n=i;t.prev_8be2vx$=n,t.next_8be2vx$=e,e.prev_8be2vx$=t,n.next_8be2vx$=t}},Rn.prototype.remove_njjxy0$_0=function(t){t.next_8be2vx$===t?this.head_1lr44l$_0=null:(this.head_1lr44l$_0===t&&(this.head_1lr44l$_0=t.next_8be2vx$),T(t.next_8be2vx$).prev_8be2vx$=t.prev_8be2vx$,T(t.prev_8be2vx$).next_8be2vx$=t.next_8be2vx$),t.next_8be2vx$=null,t.prev_8be2vx$=null},Rn.prototype.build=function(){return this.checkIsMutable(),this.isReadOnly_uhyvn5$_0=!0,this},Rn.prototype.clear=function(){this.checkIsMutable(),this.map_97q5dv$_0.clear(),this.head_1lr44l$_0=null},Rn.prototype.containsKey_11rb$=function(t){return this.map_97q5dv$_0.containsKey_11rb$(t)},Rn.prototype.containsValue_11rc$=function(t){var e;if(null==(e=this.head_1lr44l$_0))return!1;var i=e;do{if(r(i.value,t))return!0;i=T(i.next_8be2vx$)}while(i!==this.head_1lr44l$_0);return!1},Rn.prototype.createEntrySet=function(){return new Dn(this)},Rn.prototype.get_11rb$=function(t){var e;return null!=(e=this.map_97q5dv$_0.get_11rb$(t))?e.value:null},Rn.prototype.put_xwzc9p$=function(t,e){this.checkIsMutable();var i=this.map_97q5dv$_0.get_11rb$(t);if(null==i){var n=new Ln(this,t,e);return this.map_97q5dv$_0.put_xwzc9p$(t,n),this.addToEnd_lfi3hf$_0(n),null}return i.setValue_11rc$(e)},Rn.prototype.remove_11rb$=function(t){this.checkIsMutable();var e=this.map_97q5dv$_0.remove_11rb$(t);return null!=e?(this.remove_njjxy0$_0(e),e.value):null},Object.defineProperty(Rn.prototype,"size",{configurable:!0,get:function(){return this.map_97q5dv$_0.size}}),Rn.prototype.checkIsMutable=function(){if(this.isReadOnly_uhyvn5$_0)throw wi()},Rn.$metadata$={kind:h,simpleName:"LinkedHashMap",interfaces:[wn,Ft]},Vn.prototype.build=function(){var e;return(t.isType(e=this.map_8be2vx$,Rn)?e:io()).build(),this},Vn.prototype.checkIsMutable=function(){this.map_8be2vx$.checkIsMutable()},Vn.$metadata$={kind:h,simpleName:"LinkedHashSet",interfaces:[En,Lt]},Xn.$metadata$={kind:z,simpleName:"RandomAccess",interfaces:[]},Yn.prototype.println=function(){this.print_s8jyv4$("\n")},Yn.prototype.println_s8jyv4$=function(t){this.print_s8jyv4$(t),this.println()},Yn.prototype.flush=function(){},Yn.$metadata$={kind:h,simpleName:"BaseOutput",interfaces:[]},Zn.prototype.print_s8jyv4$=function(t){var e=String(t);this.outputStream.write(e)},Zn.$metadata$={kind:h,simpleName:"NodeJsOutput",interfaces:[Yn]},Jn.prototype.print_s8jyv4$=function(t){this.buffer+=String(t)},Jn.prototype.flush=function(){this.buffer=""},Jn.$metadata$={kind:h,simpleName:"BufferedOutput",interfaces:[Yn]},Qn.prototype.print_s8jyv4$=function(t){var e=String(t),i=e.lastIndexOf("\n",0);i>=0&&(this.buffer=this.buffer+e.substring(0,i),this.flush(),e=e.substring(i+1|0)),this.buffer=this.buffer+e},Qn.prototype.flush=function(){console.log(this.buffer),this.buffer=""},Qn.$metadata$={kind:h,simpleName:"BufferedOutputToConsoleLog",interfaces:[Jn]},Object.defineProperty(to.prototype,"context",{configurable:!0,get:function(){return this.delegate_0.context}}),to.prototype.resumeWith_tl1gpc$=function(t){var e=this.result_0;if(e===ca())this.result_0=t.value;else{if(e!==aa())throw gi("Already resumed");this.result_0=ha(),this.delegate_0.resumeWith_tl1gpc$(t)}},to.prototype.getOrThrow=function(){var e;if(this.result_0===ca())return this.result_0=aa(),aa();var i=this.result_0;if(i===ha())e=aa();else{if(t.isType(i,$l))throw i.exception;e=i}return e},to.$metadata$={kind:h,simpleName:"SafeContinuation",interfaces:[Ds]},Object.defineProperty(eo.prototype,"context",{configurable:!0,get:function(){return this.closure$context}}),eo.prototype.resumeWith_tl1gpc$=function(t){this.closure$resumeWith(t)},eo.$metadata$={kind:h,interfaces:[Ds]},oo.$metadata$={kind:z,simpleName:"Serializable",interfaces:[]},fo.$metadata$={kind:z,simpleName:"KCallable",interfaces:[]},_o.$metadata$={kind:z,simpleName:"KClass",interfaces:[Na]},Object.defineProperty(mo.prototype,"jClass",{get:function(){return this.jClass_1ppatx$_0}}),Object.defineProperty(mo.prototype,"qualifiedName",{configurable:!0,get:function(){throw new gl}}),mo.prototype.equals=function(e){return t.isType(e,mo)&&r(this.jClass,e.jClass)},mo.prototype.hashCode=function(){var t,e;return null!=(e=null!=(t=this.simpleName)?j(t):null)?e:0},mo.prototype.toString=function(){return"class "+x(this.simpleName)},mo.$metadata$={kind:h,simpleName:"KClassImpl",interfaces:[_o]},Object.defineProperty($o.prototype,"simpleName",{configurable:!0,get:function(){return this.simpleName_m7mxi0$_0}}),$o.prototype.isInstance_s8jyv4$=function(e){var i=this.jClass;return t.isType(e,i)},$o.$metadata$={kind:h,simpleName:"SimpleKClassImpl",interfaces:[mo]},yo.prototype.equals=function(e){return!!t.isType(e,yo)&&mo.prototype.equals.call(this,e)&&r(this.givenSimpleName_0,e.givenSimpleName_0)},Object.defineProperty(yo.prototype,"simpleName",{configurable:!0,get:function(){return this.givenSimpleName_0}}),yo.prototype.isInstance_s8jyv4$=function(t){return this.isInstanceFunction_0(t)},yo.$metadata$={kind:h,simpleName:"PrimitiveKClassImpl",interfaces:[mo]},Object.defineProperty(vo.prototype,"simpleName",{configurable:!0,get:function(){return this.simpleName_lnzy73$_0}}),vo.prototype.isInstance_s8jyv4$=function(t){return!1},Object.defineProperty(vo.prototype,"jClass",{configurable:!0,get:function(){throw zi("There's no native JS class for Nothing type")}}),vo.prototype.equals=function(t){return t===this},vo.prototype.hashCode=function(){return 0},vo.$metadata$={kind:S,simpleName:"NothingKClassImpl",interfaces:[mo]};var go=null;function bo(){return null===go&&new vo,go}function xo(){}function wo(){}function zo(){}function ko(){}function So(){}function Co(){}function No(){}function Eo(){}function To(t,e,i){this.classifier_50lv52$_0=t,this.arguments_lev63t$_0=e,this.isMarkedNullable_748rxs$_0=i}function Po(e){switch(e.name){case"INVARIANT":return"";case"IN":return"in ";case"OUT":return"out ";default:return t.noWhenBranchMatched()}}function Oo(){tr=this,this.anyClass=new yo(Object,"Any",Mo),this.numberClass=new yo(Number,"Number",jo),this.nothingClass=bo(),this.booleanClass=new yo(Boolean,"Boolean",Ao),this.byteClass=new yo(Number,"Byte",Io),this.shortClass=new yo(Number,"Short",Ro),this.intClass=new yo(Number,"Int",Lo),this.floatClass=new yo(Number,"Float",Do),this.doubleClass=new yo(Number,"Double",qo),this.arrayClass=new yo(Array,"Array",Fo),this.stringClass=new yo(String,"String",Bo),this.throwableClass=new yo(Error,"Throwable",Uo),this.booleanArrayClass=new yo(Array,"BooleanArray",Vo),this.charArrayClass=new yo(Uint16Array,"CharArray",Go),this.byteArrayClass=new yo(Int8Array,"ByteArray",Ho),this.shortArrayClass=new yo(Int16Array,"ShortArray",Wo),this.intArrayClass=new yo(Int32Array,"IntArray",Ko),this.longArrayClass=new yo(Array,"LongArray",Xo),this.floatArrayClass=new yo(Float32Array,"FloatArray",Yo),this.doubleArrayClass=new yo(Float64Array,"DoubleArray",Zo)}function Mo(e){return t.isType(e,k)}function jo(e){return t.isNumber(e)}function Ao(t){return"boolean"==typeof t}function Io(t){return"number"==typeof t}function Ro(t){return"number"==typeof t}function Lo(t){return"number"==typeof t}function Do(t){return"number"==typeof t}function qo(t){return"number"==typeof t}function Fo(e){return t.isArray(e)}function Bo(t){return"string"==typeof t}function Uo(e){return t.isType(e,O)}function Vo(e){return t.isBooleanArray(e)}function Go(e){return t.isCharArray(e)}function Ho(e){return t.isByteArray(e)}function Wo(e){return t.isShortArray(e)}function Ko(e){return t.isIntArray(e)}function Xo(e){return t.isLongArray(e)}function Yo(e){return t.isFloatArray(e)}function Zo(e){return t.isDoubleArray(e)}Object.defineProperty(xo.prototype,"simpleName",{configurable:!0,get:function(){throw gi("Unknown simpleName for ErrorKClass".toString())}}),Object.defineProperty(xo.prototype,"qualifiedName",{configurable:!0,get:function(){throw gi("Unknown qualifiedName for ErrorKClass".toString())}}),xo.prototype.isInstance_s8jyv4$=function(t){throw gi("Can's check isInstance on ErrorKClass".toString())},xo.prototype.equals=function(t){return t===this},xo.prototype.hashCode=function(){return 0},xo.$metadata$={kind:h,simpleName:"ErrorKClass",interfaces:[_o]},wo.$metadata$={kind:z,simpleName:"KProperty",interfaces:[fo]},zo.$metadata$={kind:z,simpleName:"KMutableProperty",interfaces:[wo]},ko.$metadata$={kind:z,simpleName:"KProperty0",interfaces:[wo]},So.$metadata$={kind:z,simpleName:"KMutableProperty0",interfaces:[zo,ko]},Co.$metadata$={kind:z,simpleName:"KProperty1",interfaces:[wo]},No.$metadata$={kind:z,simpleName:"KMutableProperty1",interfaces:[zo,Co]},Eo.$metadata$={kind:z,simpleName:"KType",interfaces:[]},Object.defineProperty(To.prototype,"classifier",{get:function(){return this.classifier_50lv52$_0}}),Object.defineProperty(To.prototype,"arguments",{get:function(){return this.arguments_lev63t$_0}}),Object.defineProperty(To.prototype,"isMarkedNullable",{get:function(){return this.isMarkedNullable_748rxs$_0}}),To.prototype.equals=function(e){return t.isType(e,To)&&r(this.classifier,e.classifier)&&r(this.arguments,e.arguments)&&this.isMarkedNullable===e.isMarkedNullable},To.prototype.hashCode=function(){return(31*((31*j(this.classifier)|0)+j(this.arguments)|0)|0)+j(this.isMarkedNullable)|0},To.prototype.toString=function(){var e,i,n=t.isType(e=this.classifier,_o)?e:null;return(null==n?this.classifier.toString():null!=n.simpleName?n.simpleName:"(non-denotable type)")+(this.arguments.isEmpty()?"":_t(this.arguments,", ","<",">",void 0,void 0,(i=this,function(t){return i.asString_0(t)})))+(this.isMarkedNullable?"?":"")},To.prototype.asString_0=function(t){return null==t.variance?"*":Po(t.variance)+x(t.type)},To.$metadata$={kind:h,simpleName:"KTypeImpl",interfaces:[Eo]},Oo.prototype.functionClass=function(t){var e,i,n;if(null!=(e=Jo[t]))i=e;else{var o=new yo(Function,"Function"+t,(n=t,function(t){return"function"==typeof t&&t.length===n}));Jo[t]=o,i=o}return i},Oo.$metadata$={kind:S,simpleName:"PrimitiveClasses",interfaces:[]};var Jo,Qo,tr=null;function er(){return null===tr&&new Oo,tr}function ir(t){return Array.isArray(t)?nr(t):or(t)}function nr(t){switch(t.length){case 1:return or(t[0]);case 0:return bo();default:return new xo}}function or(t){var e;if(t===String)return er().stringClass;var i=t.$metadata$;if(null!=i)if(null==i.$kClass$){var n=new $o(t);i.$kClass$=n,e=n}else e=i.$kClass$;else e=new $o(t);return e}function rr(){}function sr(t){fi(t,this),this.name="CharacterCodingException"}function ar(t){this.string_0=void 0!==t?t:""}function lr(t,e){return ur(e=e||Object.create(ar.prototype)),e}function ur(t){return t=t||Object.create(ar.prototype),ar.call(t,""),t}function pr(t){return vr(String.fromCharCode(t),"[\\s\\xA0]")}function cr(t){return new $e(R.MIN_HIGH_SURROGATE,R.MAX_HIGH_SURROGATE).contains_mef7kx$(t)}function hr(t){return new $e(R.MIN_LOW_SURROGATE,R.MAX_LOW_SURROGATE).contains_mef7kx$(t)}function dr(t){switch(t.toLowerCase()){case"nan":case"+nan":case"-nan":return!0;default:return!1}}function fr(t){if(!(2<=t&&t<=36))throw yi("radix "+t+" was not in valid range 2..36");return t}function _r(t,e){var i;return(i=t>=48&&t<=57?t-48:t>=65&&t<=90?t-65+10|0:t>=97&&t<=122?t-97+10|0:-1)>=e?-1:i}function mr(t){var e,i="";for(e=0;e!==t.length;++e){var n=a(t[e]);i+=String.fromCharCode(n)}return i}function $r(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length),Pr().checkBoundsIndexes_cub51b$(e,i,t.length);for(var n="",o=e;o<i;o++)n+=String.fromCharCode(t[o]);return n}function yr(e,i,n){if(void 0===n&&(n=!1),n){var o=e.length,s=i.length,a=c.min(o,s);if(0===a)return o-s|0;for(var l=0;;){var u=c.min(l+16|0,a),p=e.substring(l,u),h=i.substring(l,u);if(!r(p,h)&&(p=p.toUpperCase(),h=h.toUpperCase(),!r(p,h)&&(p=p.toLowerCase(),h=h.toLowerCase(),!r(p,h))))return t.compareTo(p,h);if(u===a)break;l=u}return o-s|0}return t.compareTo(e,i)}function vr(t,e){var i=t.match(e);return null!=i&&0!==i.length}function gr(t){return 0===t.length||vr("string"==typeof t?t:t.toString(),"^[\\s\\xA0]+$")}function br(t,e,i,n,o,r){return void 0===r&&(r=!1),Wa(t,e,i,n,o,r)}function xr(t,e,i){if(i)throw new sr("Malformed sequence starting at "+(e-1|0));return 0|-t}function wr(t,e,i,n,o){if(0==(30&e)||i>=n)return xr(0,i,o);var r=t[i];return 128!=(192&r)?xr(0,i,o):e<<6^r^3968}function zr(t,e,i,n,o){if(i>=n)return xr(0,i,o);var r=t[i];if(0==(15&e)){if(160!=(224&r))return xr(0,i,o)}else if(13==(15&e)){if(128!=(224&r))return xr(0,i,o)}else if(128!=(192&r))return xr(0,i,o);if((i+1|0)===n)return xr(1,i,o);var s=t[i+1|0];return 128!=(192&s)?xr(1,i,o):e<<12^r<<6^s^-123008}function kr(t,e,i,n,o){i>=n&&xr(0,i,o);var r=t[i];if(0==(15&e)){if((240&r)<=128)return xr(0,i,o)}else if(4==(15&e)){if(128!=(240&r))return xr(0,i,o)}else{if((15&e)>4)return xr(0,i,o);if(128!=(192&r))return xr(0,i,o)}if((i+1|0)===n)return xr(1,i,o);var s=t[i+1|0];if(128!=(192&s))return xr(1,i,o);if((i+2|0)===n)return xr(2,i,o);var a=t[i+2|0];return 128!=(192&a)?xr(2,i,o):e<<18^r<<12^s<<6^a^3678080}function Sr(t,e,i,n){var o;if(!(e>=0&&i<=t.length&&e<=i))throw yi("Failed requirement.".toString());for(var r=e,s=ur();r<i;){var a=t[(o=r,r=o+1|0,o)];if(a>=0)s.append_s8itvh$(d(a));else if(a>>5==-2){var l=wr(t,a,r,i,n);l<=0?(s.append_s8itvh$(Qo),r=r+(0|-l)|0):(s.append_s8itvh$(d(l)),r=r+1|0)}else if(a>>4==-2){var u=zr(t,a,r,i,n);u<=0?(s.append_s8itvh$(Qo),r=r+(0|-u)|0):(s.append_s8itvh$(d(u)),r=r+2|0)}else if(a>>3==-2){var p=kr(t,a,r,i,n);if(p<=0)s.append_s8itvh$(Qo),r=r+(0|-p)|0;else{var c=p-65536>>10|55296,h=1023&p|56320;s.append_s8itvh$(d(c)),s.append_s8itvh$(d(h)),r=r+3|0}}else xr(0,r,n),s.append_s8itvh$(Qo)}return s.toString()}function Cr(){}function Nr(){Pr(),Cr.call(this)}function Er(){Tr=this}rr.$metadata$={kind:z,simpleName:"Appendable",interfaces:[]},sr.$metadata$={kind:h,simpleName:"CharacterCodingException",interfaces:[di]},Object.defineProperty(ar.prototype,"length",{configurable:!0,get:function(){return this.string_0.length}}),ar.prototype.charCodeAt=function(t){var e=this.string_0;if(!(t>=0&&t<=Ga(e)))throw new bi("index: "+t+", length: "+this.length+"}");return e.charCodeAt(t)},ar.prototype.subSequence_vux9f0$=function(t,e){return this.string_0.substring(t,e)},ar.prototype.append_s8itvh$=function(t){return this.string_0+=String.fromCharCode(t),this},ar.prototype.append_gw00v9$=function(t){return this.string_0+=x(t),this},ar.prototype.append_ezbsdh$=function(t,e,i){return this.appendRange_3peag4$(null!=t?t:"null",e,i)},ar.prototype.reverse=function(){for(var t,e,i="",n=this.string_0.length-1|0;n>=0;){var o=this.string_0.charCodeAt((n=(t=n)-1|0,t));if(hr(o)&&n>=0){var r=this.string_0.charCodeAt((n=(e=n)-1|0,e));i=cr(r)?i+String.fromCharCode(s(r))+String.fromCharCode(s(o)):i+String.fromCharCode(s(o))+String.fromCharCode(s(r))}else i+=String.fromCharCode(o)}return this.string_0=i,this},ar.prototype.append_s8jyv4$=function(t){return this.string_0+=x(t),this},ar.prototype.append_6taknv$=function(t){return this.string_0+=t,this},ar.prototype.append_4hbowm$=function(t){return this.string_0+=mr(t),this},ar.prototype.append_61zpoe$=function(t){return this.append_pdl1vj$(t)},ar.prototype.append_pdl1vj$=function(t){return this.string_0=this.string_0+(null!=t?t:"null"),this},ar.prototype.capacity=function(){return this.length},ar.prototype.ensureCapacity_za3lpa$=function(t){},ar.prototype.indexOf_61zpoe$=function(t){return this.string_0.indexOf(t)},ar.prototype.indexOf_bm4lxs$=function(t,e){return this.string_0.indexOf(t,e)},ar.prototype.lastIndexOf_61zpoe$=function(t){return this.string_0.lastIndexOf(t)},ar.prototype.lastIndexOf_bm4lxs$=function(t,e){return 0===t.length&&e<0?-1:this.string_0.lastIndexOf(t,e)},ar.prototype.insert_fzusl$=function(t,e){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},ar.prototype.insert_6t1mh3$=function(t,e){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+String.fromCharCode(s(e))+this.string_0.substring(t),this},ar.prototype.insert_7u455s$=function(t,e){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+mr(e)+this.string_0.substring(t),this},ar.prototype.insert_1u9bqd$=function(t,e){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},ar.prototype.insert_6t2rgq$=function(t,e){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},ar.prototype.insert_19mbxw$=function(t,e){return this.insert_vqvrqt$(t,e)},ar.prototype.insert_vqvrqt$=function(t,e){Pr().checkPositionIndex_6xvm5r$(t,this.length);var i=null!=e?e:"null";return this.string_0=this.string_0.substring(0,t)+i+this.string_0.substring(t),this},ar.prototype.setLength_za3lpa$=function(t){if(t<0)throw yi("Negative new length: "+t+".");if(t<=this.length)this.string_0=this.string_0.substring(0,t);else for(var e=this.length;e<t;e++)this.string_0+=String.fromCharCode(0)},ar.prototype.substring_za3lpa$=function(t){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0.substring(t)},ar.prototype.substring_vux9f0$=function(t,e){return Pr().checkBoundsIndexes_cub51b$(t,e,this.length),this.string_0.substring(t,e)},ar.prototype.trimToSize=function(){},ar.prototype.toString=function(){return this.string_0},ar.prototype.clear=function(){return this.string_0="",this},ar.prototype.set_6t1mh3$=function(t,e){Pr().checkElementIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+String.fromCharCode(s(e))+this.string_0.substring(t+1|0)},ar.prototype.setRange_98i29q$=function(t,e,i){return this.checkReplaceRange_0(t,e,this.length),this.string_0=this.string_0.substring(0,t)+i+this.string_0.substring(e),this},ar.prototype.checkReplaceRange_0=function(t,e,i){if(t<0||t>i)throw new bi("startIndex: "+t+", length: "+i);if(t>e)throw yi("startIndex("+t+") > endIndex("+e+")")},ar.prototype.deleteAt_za3lpa$=function(t){return Pr().checkElementIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+this.string_0.substring(t+1|0),this},ar.prototype.deleteRange_vux9f0$=function(t,e){return this.checkReplaceRange_0(t,e,this.length),this.string_0=this.string_0.substring(0,t)+this.string_0.substring(e),this},ar.prototype.toCharArray_pqkatk$=function(t,e,i,n){var o;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=this.length),Pr().checkBoundsIndexes_cub51b$(i,n,this.length),Pr().checkBoundsIndexes_cub51b$(e,e+n-i|0,t.length);for(var r=e,s=i;s<n;s++)t[(o=r,r=o+1|0,o)]=this.string_0.charCodeAt(s)},ar.prototype.appendRange_8chfmy$=function(t,e,i){return this.string_0+=$r(t,e,i),this},ar.prototype.appendRange_3peag4$=function(t,e,i){var n=t.toString();return Pr().checkBoundsIndexes_cub51b$(e,i,n.length),this.string_0+=n.substring(e,i),this},ar.prototype.insertRange_ar8yzk$=function(t,e,i,n){return Pr().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+$r(e,i,n)+this.string_0.substring(t),this},ar.prototype.insertRange_mnv9ne$=function(t,e,i,n){Pr().checkPositionIndex_6xvm5r$(t,this.length);var o=e.toString();return Pr().checkBoundsIndexes_cub51b$(i,n,o.length),this.string_0=this.string_0.substring(0,t)+o.substring(i,n)+this.string_0.substring(t),this},ar.$metadata$={kind:h,simpleName:"StringBuilder",interfaces:[Tt,rr]},Cr.prototype.contains_11rb$=function(e){var i;t:do{var n;if(t.isType(this,Mt)&&this.isEmpty()){i=!1;break t}for(n=this.iterator();n.hasNext();){var o=n.next();if(r(o,e)){i=!0;break t}}i=!1}while(0);return i},Cr.prototype.containsAll_brywnq$=function(e){var i;t:do{var n;if(t.isType(e,Mt)&&e.isEmpty()){i=!0;break t}for(n=e.iterator();n.hasNext();){var o=n.next();if(!this.contains_11rb$(o)){i=!1;break t}}i=!0}while(0);return i},Cr.prototype.isEmpty=function(){return 0===this.size},Cr.prototype.toString=function(){return _t(this,", ","[","]",void 0,void 0,(t=this,function(e){return e===t?"(this Collection)":x(e)}));var t},Cr.prototype.toArray=function(){return Ui(this)},Cr.prototype.toArray_ro6dgy$=function(t){return Vi(this,t)},Cr.$metadata$={kind:h,simpleName:"AbstractCollection",interfaces:[Mt]},Er.prototype.checkElementIndex_6xvm5r$=function(t,e){if(t<0||t>=e)throw new bi("index: "+t+", size: "+e)},Er.prototype.checkPositionIndex_6xvm5r$=function(t,e){if(t<0||t>e)throw new bi("index: "+t+", size: "+e)},Er.prototype.checkRangeIndexes_cub51b$=function(t,e,i){if(t<0||e>i)throw new bi("fromIndex: "+t+", toIndex: "+e+", size: "+i);if(t>e)throw yi("fromIndex: "+t+" > toIndex: "+e)},Er.prototype.checkBoundsIndexes_cub51b$=function(t,e,i){if(t<0||e>i)throw new bi("startIndex: "+t+", endIndex: "+e+", size: "+i);if(t>e)throw yi("startIndex: "+t+" > endIndex: "+e)},Er.prototype.orderedHashCode_nykoif$=function(t){var e,i,n=1;for(e=t.iterator();e.hasNext();){var o=e.next();n=(31*n|0)+(null!=(i=null!=o?j(o):null)?i:0)|0}return n},Er.prototype.orderedEquals_e92ka7$=function(t,e){var i;if(t.size!==e.size)return!1;var n=e.iterator();for(i=t.iterator();i.hasNext();){var o=i.next(),s=n.next();if(!r(o,s))return!1}return!0},Er.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Tr=null;function Pr(){return null===Tr&&new Er,Tr}function Or(){Dr(),this._keys_up5z3z$_0=null,this._values_6nw1f1$_0=null}function Mr(t){this.this$AbstractMap=t,qr.call(this)}function jr(t){this.closure$entryIterator=t}function Ar(t){this.this$AbstractMap=t,Cr.call(this)}function Ir(t){this.closure$entryIterator=t}function Rr(){Lr=this}Or.prototype.containsKey_11rb$=function(t){return null!=this.implFindEntry_8k1i24$_0(t)},Or.prototype.containsValue_11rc$=function(e){var i,n=this.entries;t:do{var o;if(t.isType(n,Mt)&&n.isEmpty()){i=!1;break t}for(o=n.iterator();o.hasNext();){var s=o.next();if(r(s.value,e)){i=!0;break t}}i=!1}while(0);return i},Or.prototype.containsEntry_8hxqw4$=function(e){if(!t.isType(e,qt))return!1;var i=e.key,n=e.value,o=(t.isType(this,Dt)?this:P()).get_11rb$(i);if(!r(n,o))return!1;var s=null==o;return s&&(s=!(t.isType(this,Dt)?this:P()).containsKey_11rb$(i)),!s},Or.prototype.equals=function(e){if(e===this)return!0;if(!t.isType(e,Dt))return!1;if(this.size!==e.size)return!1;var i,n=e.entries;t:do{var o;if(t.isType(n,Mt)&&n.isEmpty()){i=!0;break t}for(o=n.iterator();o.hasNext();){var r=o.next();if(!this.containsEntry_8hxqw4$(r)){i=!1;break t}}i=!0}while(0);return i},Or.prototype.get_11rb$=function(t){var e;return null!=(e=this.implFindEntry_8k1i24$_0(t))?e.value:null},Or.prototype.hashCode=function(){return j(this.entries)},Or.prototype.isEmpty=function(){return 0===this.size},Object.defineProperty(Or.prototype,"size",{configurable:!0,get:function(){return this.entries.size}}),Mr.prototype.contains_11rb$=function(t){return this.this$AbstractMap.containsKey_11rb$(t)},jr.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},jr.prototype.next=function(){return this.closure$entryIterator.next().key},jr.$metadata$={kind:h,interfaces:[Ut]},Mr.prototype.iterator=function(){return new jr(this.this$AbstractMap.entries.iterator())},Object.defineProperty(Mr.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMap.size}}),Mr.$metadata$={kind:h,interfaces:[qr]},Object.defineProperty(Or.prototype,"keys",{configurable:!0,get:function(){return null==this._keys_up5z3z$_0&&(this._keys_up5z3z$_0=new Mr(this)),T(this._keys_up5z3z$_0)}}),Or.prototype.toString=function(){return _t(this.entries,", ","{","}",void 0,void 0,(t=this,function(e){return t.toString_55he67$_0(e)}));var t},Or.prototype.toString_55he67$_0=function(t){return this.toString_kthv8s$_0(t.key)+"="+this.toString_kthv8s$_0(t.value)},Or.prototype.toString_kthv8s$_0=function(t){return t===this?"(this Map)":x(t)},Ar.prototype.contains_11rb$=function(t){return this.this$AbstractMap.containsValue_11rc$(t)},Ir.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},Ir.prototype.next=function(){return this.closure$entryIterator.next().value},Ir.$metadata$={kind:h,interfaces:[Ut]},Ar.prototype.iterator=function(){return new Ir(this.this$AbstractMap.entries.iterator())},Object.defineProperty(Ar.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMap.size}}),Ar.$metadata$={kind:h,interfaces:[Cr]},Object.defineProperty(Or.prototype,"values",{configurable:!0,get:function(){return null==this._values_6nw1f1$_0&&(this._values_6nw1f1$_0=new Ar(this)),T(this._values_6nw1f1$_0)}}),Or.prototype.implFindEntry_8k1i24$_0=function(t){var e,i=this.entries;t:do{var n;for(n=i.iterator();n.hasNext();){var o=n.next();if(r(o.key,t)){e=o;break t}}e=null}while(0);return e},Rr.prototype.entryHashCode_9fthdn$=function(t){var e,i,n,o;return(null!=(i=null!=(e=t.key)?j(e):null)?i:0)^(null!=(o=null!=(n=t.value)?j(n):null)?o:0)},Rr.prototype.entryToString_9fthdn$=function(t){return x(t.key)+"="+x(t.value)},Rr.prototype.entryEquals_js7fox$=function(e,i){return!!t.isType(i,qt)&&r(e.key,i.key)&&r(e.value,i.value)},Rr.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Lr=null;function Dr(){return null===Lr&&new Rr,Lr}function qr(){Ur(),Cr.call(this)}function Fr(){Br=this}Or.$metadata$={kind:h,simpleName:"AbstractMap",interfaces:[Dt]},qr.prototype.equals=function(e){return e===this||!!t.isType(e,Rt)&&Ur().setEquals_y8f7en$(this,e)},qr.prototype.hashCode=function(){return Ur().unorderedHashCode_nykoif$(this)},Fr.prototype.unorderedHashCode_nykoif$=function(t){var e,i=0;for(e=t.iterator();e.hasNext();){var n,o=e.next();i=i+(null!=(n=null!=o?j(o):null)?n:0)|0}return i},Fr.prototype.setEquals_y8f7en$=function(t,e){return t.size===e.size&&t.containsAll_brywnq$(e)},Fr.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Br=null;function Ur(){return null===Br&&new Fr,Br}function Vr(){Gr=this}qr.$metadata$={kind:h,simpleName:"AbstractSet",interfaces:[Rt,Cr]},Vr.prototype.hasNext=function(){return!1},Vr.prototype.hasPrevious=function(){return!1},Vr.prototype.nextIndex=function(){return 0},Vr.prototype.previousIndex=function(){return-1},Vr.prototype.next=function(){throw Ei()},Vr.prototype.previous=function(){throw Ei()},Vr.$metadata$={kind:S,simpleName:"EmptyIterator",interfaces:[Gt]};var Gr=null;function Hr(){return null===Gr&&new Vr,Gr}function Wr(){Kr=this,this.serialVersionUID_0=L}Wr.prototype.equals=function(e){return t.isType(e,At)&&e.isEmpty()},Wr.prototype.hashCode=function(){return 1},Wr.prototype.toString=function(){return"[]"},Object.defineProperty(Wr.prototype,"size",{configurable:!0,get:function(){return 0}}),Wr.prototype.isEmpty=function(){return!0},Wr.prototype.contains_11rb$=function(t){return!1},Wr.prototype.containsAll_brywnq$=function(t){return t.isEmpty()},Wr.prototype.get_za3lpa$=function(t){throw new bi("Empty list doesn't contain element at index "+t+".")},Wr.prototype.indexOf_11rb$=function(t){return-1},Wr.prototype.lastIndexOf_11rb$=function(t){return-1},Wr.prototype.iterator=function(){return Hr()},Wr.prototype.listIterator=function(){return Hr()},Wr.prototype.listIterator_za3lpa$=function(t){if(0!==t)throw new bi("Index: "+t);return Hr()},Wr.prototype.subList_vux9f0$=function(t,e){if(0===t&&0===e)return this;throw new bi("fromIndex: "+t+", toIndex: "+e)},Wr.prototype.readResolve_0=function(){return Xr()},Wr.$metadata$={kind:S,simpleName:"EmptyList",interfaces:[Xn,oo,At]};var Kr=null;function Xr(){return null===Kr&&new Wr,Kr}function Yr(t){return new Zr(t,!1)}function Zr(t,e){this.values=t,this.isVarargs=e}function Jr(){return Xr()}function Qr(t){return 0===t.length?cn():dn(new Zr(t,!0))}function ts(t){return t.size-1|0}function es(t){switch(t.size){case 0:return Jr();case 1:return Gi(t.get_za3lpa$(0));default:return t}}function is(){throw new Ti("Index overflow has happened.")}function ns(){}function os(t,e){this.index=t,this.value=e}function rs(t){this.iteratorFactory_0=t}function ss(e,i){return t.isType(e,Mt)?e.size:i}function as(t){this.iterator_0=t,this.index_0=0}function ls(e,i){if(t.isType(e,us))return e.getOrImplicitDefault_11rb$(i);var n,o=e.get_11rb$(i);if(null==o&&!e.containsKey_11rb$(i))throw new Ni("Key "+i+" is missing in the map.");return null==(n=o)||t.isType(n,k)?n:P()}function us(){}function ps(){}function cs(t,e){this.map_a09uzx$_0=t,this.default_0=e}function hs(){ds=this,this.serialVersionUID_0=D}Object.defineProperty(Zr.prototype,"size",{configurable:!0,get:function(){return this.values.length}}),Zr.prototype.isEmpty=function(){return 0===this.values.length},Zr.prototype.contains_11rb$=function(t){return V(this.values,t)},Zr.prototype.containsAll_brywnq$=function(e){var i;t:do{var n;if(t.isType(e,Mt)&&e.isEmpty()){i=!0;break t}for(n=e.iterator();n.hasNext();){var o=n.next();if(!this.contains_11rb$(o)){i=!1;break t}}i=!0}while(0);return i},Zr.prototype.iterator=function(){return t.arrayIterator(this.values)},Zr.prototype.toArray=function(){var t=this.values;return this.isVarargs?t:t.slice()},Zr.$metadata$={kind:h,simpleName:"ArrayAsCollection",interfaces:[Mt]},ns.$metadata$={kind:z,simpleName:"Grouping",interfaces:[]},os.$metadata$={kind:h,simpleName:"IndexedValue",interfaces:[]},os.prototype.component1=function(){return this.index},os.prototype.component2=function(){return this.value},os.prototype.copy_wxm5ur$=function(t,e){return new os(void 0===t?this.index:t,void 0===e?this.value:e)},os.prototype.toString=function(){return"IndexedValue(index="+t.toString(this.index)+", value="+t.toString(this.value)+")"},os.prototype.hashCode=function(){var e=0;return e=31*(e=31*e+t.hashCode(this.index)|0)+t.hashCode(this.value)|0},os.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.index,e.index)&&t.equals(this.value,e.value)},rs.prototype.iterator=function(){return new as(this.iteratorFactory_0())},rs.$metadata$={kind:h,simpleName:"IndexingIterable",interfaces:[Pt]},as.prototype.hasNext=function(){return this.iterator_0.hasNext()},as.prototype.next=function(){var t;return new os(Xi((t=this.index_0,this.index_0=t+1|0,t)),this.iterator_0.next())},as.$metadata$={kind:h,simpleName:"IndexingIterator",interfaces:[Ut]},us.$metadata$={kind:z,simpleName:"MapWithDefault",interfaces:[Dt]},hs.prototype.equals=function(e){return t.isType(e,Dt)&&e.isEmpty()},hs.prototype.hashCode=function(){return 0},hs.prototype.toString=function(){return"{}"},Object.defineProperty(hs.prototype,"size",{configurable:!0,get:function(){return 0}}),hs.prototype.isEmpty=function(){return!0},hs.prototype.containsKey_11rb$=function(t){return!1},hs.prototype.containsValue_11rc$=function(t){return!1},hs.prototype.get_11rb$=function(t){return null},Object.defineProperty(hs.prototype,"entries",{configurable:!0,get:function(){return Is()}}),Object.defineProperty(hs.prototype,"keys",{configurable:!0,get:function(){return Is()}}),Object.defineProperty(hs.prototype,"values",{configurable:!0,get:function(){return Xr()}}),hs.prototype.readResolve_0=function(){return fs()},hs.$metadata$={kind:S,simpleName:"EmptyMap",interfaces:[oo,Dt]};var ds=null;function fs(){return null===ds&&new hs,ds}function _s(){var e;return t.isType(e=fs(),Dt)?e:io()}function ms(t){var e=Nn(t.length);return $s(e,t),e}function $s(t,e){var i;for(i=0;i!==e.length;++i){var n=e[i],o=n.component1(),r=n.component2();t.put_xwzc9p$(o,r)}}function ys(t,e){var i;for(i=e.iterator();i.hasNext();){var n=i.next(),o=n.component1(),r=n.component2();t.put_xwzc9p$(o,r)}}function vs(t,e){return ys(e,t),e}function gs(t,e){return $s(e,t),e}function bs(t){switch(t.size){case 0:return _s();case 1:default:return t}}function xs(t,e){return ws(t,e,!0)}function ws(t,e,i){for(var n={v:!1},o=t.iterator();o.hasNext();)e(o.next())===i&&(o.remove(),n.v=!0);return n.v}function zs(e,i){return function(e,i,n){var o,r,s,a;if(!t.isType(e,Xn))return ws(t.isType(o=e,Ot)?o:io(),i,n);var l=0;r=ts(e);for(var u=0;u<=r;u++){var p=e.get_za3lpa$(u);i(p)!==n&&(l!==u&&e.set_wxm5ur$(l,p),l=l+1|0)}if(l<e.size){s=ts(e),a=l;for(var c=s;c>=a;c--)e.removeAt_za3lpa$(c);return!0}return!1}(e,i,!0)}function ks(){}function Ss(t){this.closure$iterator=t}function Cs(t){var e=new Es;return e.nextStep=ui(t,e,e),e}function Ns(){}function Es(){Ns.call(this),this.state_0=0,this.nextValue_0=null,this.nextIterator_0=null,this.nextStep=null}function Ts(t,e){this.sequence_0=t,this.transformer_0=e}function Ps(t){this.this$TransformingSequence=t,this.iterator=t.sequence_0.iterator()}function Os(t,e,i){this.sequence_0=t,this.transformer_0=e,this.iterator_0=i}function Ms(t){this.this$FlatteningSequence=t,this.iterator=t.sequence_0.iterator(),this.itemIterator=null}function js(){As=this,this.serialVersionUID_0=q}ks.$metadata$={kind:z,simpleName:"Sequence",interfaces:[]},Ss.prototype.iterator=function(){return this.closure$iterator()},Ss.$metadata$={kind:h,interfaces:[ks]},Ns.prototype.yieldAll_p1ys8y$=function(e,i){if(!t.isType(e,Mt)||!e.isEmpty())return this.yieldAll_1phuh2$(e.iterator(),i)},Ns.prototype.yieldAll_swo9gw$=function(t,e){return this.yieldAll_1phuh2$(t.iterator(),e)},Ns.$metadata$={kind:h,simpleName:"SequenceScope",interfaces:[]},Es.prototype.hasNext=function(){for(;;){switch(this.state_0){case 0:break;case 1:if(T(this.nextIterator_0).hasNext())return this.state_0=2,!0;this.nextIterator_0=null;break;case 4:return!1;case 3:case 2:return!0;default:throw this.exceptionalState_0()}this.state_0=5;var t=T(this.nextStep);this.nextStep=null,t.resumeWith_tl1gpc$(new dl(Pe()))}},Es.prototype.next=function(){var e;switch(this.state_0){case 0:case 1:return this.nextNotReady_0();case 2:return this.state_0=1,T(this.nextIterator_0).next();case 3:this.state_0=0;var i=null==(e=this.nextValue_0)||t.isType(e,k)?e:io();return this.nextValue_0=null,i;default:throw this.exceptionalState_0()}},Es.prototype.nextNotReady_0=function(){if(this.hasNext())return this.next();throw Ei()},Es.prototype.exceptionalState_0=function(){switch(this.state_0){case 4:return Ei();case 5:return gi("Iterator has failed.");default:return gi("Unexpected state of the iterator: "+this.state_0)}},Es.prototype.yield_11rb$=function(t,e){return this.nextValue_0=t,this.state_0=3,(i=this,function(t){return i.nextStep=t,aa()})(e);var i},Es.prototype.yieldAll_1phuh2$=function(t,e){var i;if(t.hasNext())return this.nextIterator_0=t,this.state_0=2,(i=this,function(t){return i.nextStep=t,aa()})(e)},Es.prototype.resumeWith_tl1gpc$=function(e){var i;vl(e),null==(i=e.value)||t.isType(i,k)||P(),this.state_0=4},Object.defineProperty(Es.prototype,"context",{configurable:!0,get:function(){return Js()}}),Es.$metadata$={kind:h,simpleName:"SequenceBuilderIterator",interfaces:[Ds,Ut,Ns]},Ps.prototype.next=function(){return this.this$TransformingSequence.transformer_0(this.iterator.next())},Ps.prototype.hasNext=function(){return this.iterator.hasNext()},Ps.$metadata$={kind:h,interfaces:[Ut]},Ts.prototype.iterator=function(){return new Ps(this)},Ts.prototype.flatten_1tglza$=function(t){return new Os(this.sequence_0,this.transformer_0,t)},Ts.$metadata$={kind:h,simpleName:"TransformingSequence",interfaces:[ks]},Ms.prototype.next=function(){if(!this.ensureItemIterator_0())throw Ei();return T(this.itemIterator).next()},Ms.prototype.hasNext=function(){return this.ensureItemIterator_0()},Ms.prototype.ensureItemIterator_0=function(){var t;for(!1===(null!=(t=this.itemIterator)?t.hasNext():null)&&(this.itemIterator=null);null==this.itemIterator;){if(!this.iterator.hasNext())return!1;var e=this.iterator.next(),i=this.this$FlatteningSequence.iterator_0(this.this$FlatteningSequence.transformer_0(e));if(i.hasNext())return this.itemIterator=i,!0}return!0},Ms.$metadata$={kind:h,interfaces:[Ut]},Os.prototype.iterator=function(){return new Ms(this)},Os.$metadata$={kind:h,simpleName:"FlatteningSequence",interfaces:[ks]},js.prototype.equals=function(e){return t.isType(e,Rt)&&e.isEmpty()},js.prototype.hashCode=function(){return 0},js.prototype.toString=function(){return"[]"},Object.defineProperty(js.prototype,"size",{configurable:!0,get:function(){return 0}}),js.prototype.isEmpty=function(){return!0},js.prototype.contains_11rb$=function(t){return!1},js.prototype.containsAll_brywnq$=function(t){return t.isEmpty()},js.prototype.iterator=function(){return Hr()},js.prototype.readResolve_0=function(){return Is()},js.$metadata$={kind:S,simpleName:"EmptySet",interfaces:[oo,Rt]};var As=null;function Is(){return null===As&&new js,As}function Rs(){return Is()}function Ls(t){return J(t,Pn(t.length))}function Ds(){}function qs(){Us()}function Fs(){Bs=this}Ds.$metadata$={kind:z,simpleName:"Continuation",interfaces:[]},n("kotlin.kotlin.coroutines.suspendCoroutine_922awp$",o((function(){var e=p.kotlin.coroutines.intrinsics.intercepted_f9mg25$,i=p.kotlin.coroutines.SafeContinuation_init_wj8d80$;return function(n,o){var r;return t.suspendCall((r=n,function(t){var n=i(e(t));return r(n),n.getOrThrow()})(t.coroutineReceiver())),t.coroutineResult(t.coroutineReceiver())}}))),Fs.$metadata$={kind:S,simpleName:"Key",interfaces:[Hs]};var Bs=null;function Us(){return null===Bs&&new Fs,Bs}function Vs(){}function Gs(t,e){var i=t.minusKey_yeqjby$(e.key);if(i===Js())return e;var n=i.get_j3r2sn$(Us());if(null==n)return new Qs(i,e);var o=i.minusKey_yeqjby$(Us());return o===Js()?new Qs(e,n):new Qs(new Qs(o,e),n)}function Hs(){}function Ws(){}function Ks(t){this.key_no4tas$_0=t}function Xs(e,i){this.safeCast_9rw4bk$_0=i,this.topmostKey_3x72pn$_0=t.isType(e,Xs)?e.topmostKey_3x72pn$_0:e}function Ys(){Zs=this,this.serialVersionUID_0=u}qs.prototype.releaseInterceptedContinuation_k98bjh$=function(t){},qs.prototype.get_j3r2sn$=function(e){var i;return t.isType(e,Xs)?e.isSubKey_i2ksv9$(this.key)&&t.isType(i=e.tryCast_m1180o$(this),Ws)?i:null:Us()===e?t.isType(this,Ws)?this:io():null},qs.prototype.minusKey_yeqjby$=function(e){return t.isType(e,Xs)?e.isSubKey_i2ksv9$(this.key)&&null!=e.tryCast_m1180o$(this)?Js():this:Us()===e?Js():this},qs.$metadata$={kind:z,simpleName:"ContinuationInterceptor",interfaces:[Ws]},Vs.prototype.plus_1fupul$=function(t){return t===Js()?this:t.fold_3cc69b$(this,Gs)},Hs.$metadata$={kind:z,simpleName:"Key",interfaces:[]},Ws.prototype.get_j3r2sn$=function(e){return r(this.key,e)?t.isType(this,Ws)?this:io():null},Ws.prototype.fold_3cc69b$=function(t,e){return e(t,this)},Ws.prototype.minusKey_yeqjby$=function(t){return r(this.key,t)?Js():this},Ws.$metadata$={kind:z,simpleName:"Element",interfaces:[Vs]},Vs.$metadata$={kind:z,simpleName:"CoroutineContext",interfaces:[]},Object.defineProperty(Ks.prototype,"key",{get:function(){return this.key_no4tas$_0}}),Ks.$metadata$={kind:h,simpleName:"AbstractCoroutineContextElement",interfaces:[Ws]},Xs.prototype.tryCast_m1180o$=function(t){return this.safeCast_9rw4bk$_0(t)},Xs.prototype.isSubKey_i2ksv9$=function(t){return t===this||this.topmostKey_3x72pn$_0===t},Xs.$metadata$={kind:h,simpleName:"AbstractCoroutineContextKey",interfaces:[Hs]},Ys.prototype.readResolve_0=function(){return Js()},Ys.prototype.get_j3r2sn$=function(t){return null},Ys.prototype.fold_3cc69b$=function(t,e){return t},Ys.prototype.plus_1fupul$=function(t){return t},Ys.prototype.minusKey_yeqjby$=function(t){return this},Ys.prototype.hashCode=function(){return 0},Ys.prototype.toString=function(){return"EmptyCoroutineContext"},Ys.$metadata$={kind:S,simpleName:"EmptyCoroutineContext",interfaces:[oo,Vs]};var Zs=null;function Js(){return null===Zs&&new Ys,Zs}function Qs(t,e){this.left_0=t,this.element_0=e}function ta(t,e){return 0===t.length?e.toString():t+", "+e}function ea(t){null===sa&&new ia,this.elements=t}function ia(){sa=this,this.serialVersionUID_0=u}Qs.prototype.get_j3r2sn$=function(e){for(var i,n=this;;){if(null!=(i=n.element_0.get_j3r2sn$(e)))return i;var o=n.left_0;if(!t.isType(o,Qs))return o.get_j3r2sn$(e);n=o}},Qs.prototype.fold_3cc69b$=function(t,e){return e(this.left_0.fold_3cc69b$(t,e),this.element_0)},Qs.prototype.minusKey_yeqjby$=function(t){if(null!=this.element_0.get_j3r2sn$(t))return this.left_0;var e=this.left_0.minusKey_yeqjby$(t);return e===this.left_0?this:e===Js()?this.element_0:new Qs(e,this.element_0)},Qs.prototype.size_0=function(){for(var e,i,n=this,o=2;;){if(null==(i=t.isType(e=n.left_0,Qs)?e:null))return o;n=i,o=o+1|0}},Qs.prototype.contains_0=function(t){return r(this.get_j3r2sn$(t.key),t)},Qs.prototype.containsAll_0=function(e){for(var i,n=e;;){if(!this.contains_0(n.element_0))return!1;var o=n.left_0;if(!t.isType(o,Qs))return this.contains_0(t.isType(i=o,Ws)?i:io());n=o}},Qs.prototype.equals=function(e){return this===e||t.isType(e,Qs)&&e.size_0()===this.size_0()&&e.containsAll_0(this)},Qs.prototype.hashCode=function(){return j(this.left_0)+j(this.element_0)|0},Qs.prototype.toString=function(){return"["+this.fold_3cc69b$("",ta)+"]"},Qs.prototype.writeReplace_0=function(){var e,i,n,o=this.size_0(),r=t.newArray(o,null),s={v:0};if(this.fold_3cc69b$(Pe(),(i=r,n=s,function(t,e){var o;return i[(o=n.v,n.v=o+1|0,o)]=e,Ee})),s.v!==o)throw gi("Check failed.".toString());return new ea(t.isArray(e=r)?e:io())},ia.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var na,oa,ra,sa=null;function aa(){return pa()}function la(t,e){N.call(this),this.name$=t,this.ordinal$=e}function ua(){ua=function(){},na=new la("COROUTINE_SUSPENDED",0),oa=new la("UNDECIDED",1),ra=new la("RESUMED",2)}function pa(){return ua(),na}function ca(){return ua(),oa}function ha(){return ua(),ra}function da(){ma()}function fa(){_a=this,da.call(this),this.defaultRandom_0=co()}ea.prototype.readResolve_0=function(){var t,e=this.elements,i=Js();for(t=0;t!==e.length;++t){var n=e[t];i=i.plus_1fupul$(n)}return i},ea.$metadata$={kind:h,simpleName:"Serialized",interfaces:[oo]},Qs.$metadata$={kind:h,simpleName:"CombinedContext",interfaces:[oo,Vs]},n("kotlin.kotlin.coroutines.intrinsics.suspendCoroutineUninterceptedOrReturn_zb0pmy$",o((function(){var t=p.kotlin.NotImplementedError;return function(e,i){throw new t("Implementation of suspendCoroutineUninterceptedOrReturn is intrinsic")}}))),la.$metadata$={kind:h,simpleName:"CoroutineSingletons",interfaces:[N]},la.values=function(){return[pa(),ca(),ha()]},la.valueOf_61zpoe$=function(t){switch(t){case"COROUTINE_SUSPENDED":return pa();case"UNDECIDED":return ca();case"RESUMED":return ha();default:no("No enum constant kotlin.coroutines.intrinsics.CoroutineSingletons."+t)}},da.prototype.nextInt=function(){return this.nextBits_za3lpa$(32)},da.prototype.nextInt_za3lpa$=function(t){return this.nextInt_vux9f0$(0,t)},da.prototype.nextInt_vux9f0$=function(t,e){var i;ga(t,e);var n=e-t|0;if(n>0||-2147483648===n){if((n&(0|-n))===n){var o=ya(n);i=this.nextBits_za3lpa$(o)}else{var r;do{var s=this.nextInt()>>>1;r=s%n}while((s-r+(n-1)|0)<0);i=r}return t+i|0}for(;;){var a=this.nextInt();if(t<=a&&a<e)return a}},da.prototype.nextLong=function(){return t.Long.fromInt(this.nextInt()).shiftLeft(32).add(t.Long.fromInt(this.nextInt()))},da.prototype.nextLong_s8cxhz$=function(t){return this.nextLong_3pjtqy$(u,t)},da.prototype.nextLong_3pjtqy$=function(e,i){var n;ba(e,i);var o=i.subtract(e);if(o.toNumber()>0){var s;if(r(o.and(o.unaryMinus()),o)){var a=o.toInt(),l=o.shiftRightUnsigned(32).toInt();if(0!==a){var u=ya(a);n=t.Long.fromInt(this.nextBits_za3lpa$(u)).and(w)}else if(1===l)n=t.Long.fromInt(this.nextInt()).and(w);else{var p=ya(l);n=t.Long.fromInt(this.nextBits_za3lpa$(p)).shiftLeft(32).add(t.Long.fromInt(this.nextInt()))}s=n}else{var c;do{var h=this.nextLong().shiftRightUnsigned(1);c=h.modulo(o)}while(h.subtract(c).add(o.subtract(t.Long.fromInt(1))).toNumber()<0);s=c}return e.add(s)}for(;;){var d=this.nextLong();if(e.lessThanOrEqual(d)&&d.lessThan(i))return d}},da.prototype.nextBoolean=function(){return 0!==this.nextBits_za3lpa$(1)},da.prototype.nextDouble=function(){return ho(this.nextBits_za3lpa$(26),this.nextBits_za3lpa$(27))},da.prototype.nextDouble_14dthe$=function(t){return this.nextDouble_lu1900$(0,t)},da.prototype.nextDouble_lu1900$=function(t,e){var i;xa(t,e);var n=e-t;if(lo(n)&&po(t)&&po(e)){var o=this.nextDouble()*(e/2-t/2);i=t+o+o}else i=t+this.nextDouble()*n;var r=i;return r>=e?ro(e):r},da.prototype.nextFloat=function(){return this.nextBits_za3lpa$(24)/16777216},da.prototype.nextBytes_mj6st8$$default=function(t,e,i){var n,o,r;if(!(0<=e&&e<=t.length&&0<=i&&i<=t.length))throw yi((n=e,o=i,r=t,function(){return"fromIndex ("+n+") or toIndex ("+o+") are out of range: 0.."+r.length+"."})().toString());if(!(e<=i))throw yi(("fromIndex ("+e+") must be not greater than toIndex ("+i+").").toString());for(var s=(i-e|0)/4|0,a={v:e},l=0;l<s;l++){var u=this.nextInt();t[a.v]=_(u),t[a.v+1|0]=_(u>>>8),t[a.v+2|0]=_(u>>>16),t[a.v+3|0]=_(u>>>24),a.v=a.v+4|0}for(var p=i-a.v|0,c=this.nextBits_za3lpa$(8*p|0),h=0;h<p;h++)t[a.v+h|0]=_(c>>>(8*h|0));return t},da.prototype.nextBytes_mj6st8$=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=t.length),n?n(t,e,i):this.nextBytes_mj6st8$$default(t,e,i)},da.prototype.nextBytes_fqrh44$=function(t){return this.nextBytes_mj6st8$(t,0,t.length)},da.prototype.nextBytes_za3lpa$=function(t){return this.nextBytes_fqrh44$(new Int8Array(t))},fa.prototype.nextBits_za3lpa$=function(t){return this.defaultRandom_0.nextBits_za3lpa$(t)},fa.prototype.nextInt=function(){return this.defaultRandom_0.nextInt()},fa.prototype.nextInt_za3lpa$=function(t){return this.defaultRandom_0.nextInt_za3lpa$(t)},fa.prototype.nextInt_vux9f0$=function(t,e){return this.defaultRandom_0.nextInt_vux9f0$(t,e)},fa.prototype.nextLong=function(){return this.defaultRandom_0.nextLong()},fa.prototype.nextLong_s8cxhz$=function(t){return this.defaultRandom_0.nextLong_s8cxhz$(t)},fa.prototype.nextLong_3pjtqy$=function(t,e){return this.defaultRandom_0.nextLong_3pjtqy$(t,e)},fa.prototype.nextBoolean=function(){return this.defaultRandom_0.nextBoolean()},fa.prototype.nextDouble=function(){return this.defaultRandom_0.nextDouble()},fa.prototype.nextDouble_14dthe$=function(t){return this.defaultRandom_0.nextDouble_14dthe$(t)},fa.prototype.nextDouble_lu1900$=function(t,e){return this.defaultRandom_0.nextDouble_lu1900$(t,e)},fa.prototype.nextFloat=function(){return this.defaultRandom_0.nextFloat()},fa.prototype.nextBytes_fqrh44$=function(t){return this.defaultRandom_0.nextBytes_fqrh44$(t)},fa.prototype.nextBytes_za3lpa$=function(t){return this.defaultRandom_0.nextBytes_za3lpa$(t)},fa.prototype.nextBytes_mj6st8$$default=function(t,e,i){return this.defaultRandom_0.nextBytes_mj6st8$(t,e,i)},fa.$metadata$={kind:S,simpleName:"Default",interfaces:[da]};var _a=null;function ma(){return null===_a&&new fa,_a}function $a(t){return ka(t,t>>31)}function ya(t){return 31-c.clz32(t)|0}function va(t,e){return t>>>32-e&(0|-e)>>31}function ga(t,e){if(!(e>t))throw yi(wa(t,e).toString())}function ba(t,e){if(!(e.compareTo_11rb$(t)>0))throw yi(wa(t,e).toString())}function xa(t,e){if(!(e>t))throw yi(wa(t,e).toString())}function wa(t,e){return"Random range is empty: ["+t.toString()+", "+e.toString()+")."}function za(t,e,i,n,o,r){if(da.call(this),this.x_0=t,this.y_0=e,this.z_0=i,this.w_0=n,this.v_0=o,this.addend_0=r,0==(this.x_0|this.y_0|this.z_0|this.w_0|this.v_0))throw yi("Initial state must have at least one non-zero element.".toString());for(var s=0;s<64;s++)this.nextInt()}function ka(t,e,i){return i=i||Object.create(za.prototype),za.call(i,t,e,0,0,~t,t<<10^e>>>4),i}function Sa(t,e){this.start_p1gsmm$_0=t,this.endInclusive_jj4lf7$_0=e}function Ca(t,e){if(!t)throw yi("Step must be positive, was: "+e.toString()+".")}function Na(){}function Ea(e,i,n){null!=n?e.append_gw00v9$(n(i)):null==i||t.isCharSequence(i)?e.append_gw00v9$(i):t.isChar(i)?e.append_s8itvh$(a(i)):e.append_gw00v9$(x(i))}function Ta(t,e,i){return void 0===i&&(i=!1),t===e||!!i&&(d(String.fromCharCode(0|t).toUpperCase().charCodeAt(0))===d(String.fromCharCode(0|e).toUpperCase().charCodeAt(0))||d(String.fromCharCode(0|t).toLowerCase().charCodeAt(0))===d(String.fromCharCode(0|e).toLowerCase().charCodeAt(0)))}function Pa(e,i){var n;void 0===i&&(i="");var o,r=sl(e),s=cn();for(o=r.iterator();o.hasNext();){var a=o.next();gr(a)||s.add_11rb$(a)}var l,u=s,p=hn(ss(u,10));for(l=u.iterator();l.hasNext();){var c=l.next();p.add_11rb$(Oa(c))}var h,d,f,_,m=null!=(n=dt(p))?n:0,$=(e.length,t.imul(i.length,r.size),0===(h=i).length?Ma:(d=h,function(t){return d+t})),y=ts(r),v=cn(),g=0;for(f=r.iterator();f.hasNext();){var b,x,w,z=f.next(),k=Xi((g=(_=g)+1|0,_));null!=(b=0!==k&&k!==y||!gr(z)?null!=(w=null!=(x=Nt(z,m))?$(x):null)?w:z:null)&&v.add_11rb$(b)}return ft(v,lr(),"\n").toString()}function Oa(t){var e;t:do{var i,n,o,r;n=(i=Va(t)).first,o=i.last,r=i.step;for(var l=n;l<=o;l+=r)if(!pr(a(s(t.charCodeAt(l))))){e=l;break t}e=-1}while(0);var u=e;return-1===u?t.length:u}function Ma(t){return t}function ja(t){return Aa(t,10)}function Aa(t,e){var i;if(null==(i=Da(t,e)))return null;var n=i;return n<m.MIN_VALUE||n>m.MAX_VALUE?null:_(n)}function Ia(t){return Ra(t,10)}function Ra(t,e){var i;if(null==(i=Da(t,e)))return null;var n=i;return n<b.MIN_VALUE||n>b.MAX_VALUE?null:g(n)}function La(t){return Da(t,10)}function Da(e,i){fr(i);var n,o,r,s=e.length;if(0===s)return null;var a=e.charCodeAt(0);if(a<48){if(1===s)return null;if(n=1,45===a)o=!0,r=-2147483648;else{if(43!==a)return null;o=!1,r=-2147483647}}else n=0,o=!1,r=-2147483647;for(var l=-59652323,u=0,p=n;p<s;p++){var c=_r(e.charCodeAt(p),i);if(c<0)return null;if(u<l){if(-59652323!==l)return null;if(u<(l=r/i|0))return null}if((u=t.imul(u,i))<(r+c|0))return null;u=u-c|0}return o?u:0|-u}function qa(t){return Fa(t,10)}function Fa(e,i){fr(i);var n,o,s,a=e.length;if(0===a)return null;var l=e.charCodeAt(0);if(l<48){if(1===a)return null;if(n=1,45===l)o=!0,s=y;else{if(43!==l)return null;o=!1,s=F}}else n=0,o=!1,s=F;for(var p=B,c=p,h=u,d=n;d<a;d++){var f=_r(e.charCodeAt(d),i);if(f<0)return null;if(h.compareTo_11rb$(c)<0){if(!r(c,p))return null;if(c=s.div(t.Long.fromInt(i)),h.compareTo_11rb$(c)<0)return null}if((h=h.multiply(t.Long.fromInt(i))).compareTo_11rb$(s.add(t.Long.fromInt(f)))<0)return null;h=h.subtract(t.Long.fromInt(f))}return o?h:h.unaryMinus()}function Ba(t){throw new ki("Invalid number format: '"+t+"'")}function Ua(t){this.this$iterator=t,Kt.call(this),this.index_0=0}function Va(t){return new be(0,t.length-1|0)}function Ga(t){return t.length-1|0}function Ha(e,i){return t.subSequence(e,i.start,i.endInclusive+1|0).toString()}function Wa(t,e,i,n,o,r){if(n<0||e<0||e>(t.length-o|0)||n>(i.length-o|0))return!1;for(var s=0;s<o;s++)if(!Ta(t.charCodeAt(e+s|0),i.charCodeAt(n+s|0),r))return!1;return!0}function Ka(t,e,i,n){var o,r;if(void 0===i&&(i=0),void 0===n&&(n=!1),!n&&1===e.length&&"string"==typeof t){var l=W(e);return t.indexOf(String.fromCharCode(l),i)}o=vt(i,0),r=Ga(t);for(var u=o;u<=r;u++){var p,c=t.charCodeAt(u);t:do{var h;for(h=0;h!==e.length;++h){var d=a(e[h]);if(Ta(a(s(d)),c,n)){p=!0;break t}}p=!1}while(0);if(p)return u}return-1}function Xa(t,e,i,n){if(void 0===i&&(i=Ga(t)),void 0===n&&(n=!1),!n&&1===e.length&&"string"==typeof t){var o=W(e);return t.lastIndexOf(String.fromCharCode(o),i)}for(var r=gt(i,Ga(t));r>=0;r--){var l,u=t.charCodeAt(r);t:do{var p;for(p=0;p!==e.length;++p){var c=a(e[p]);if(Ta(a(s(c)),u,n)){l=!0;break t}}l=!1}while(0);if(l)return r}return-1}function Ya(t,e,i,n,o,r){var s,a;void 0===r&&(r=!1);var l=r?mt(gt(i,Ga(t)),vt(n,0)):new be(vt(i,0),gt(n,t.length));if("string"==typeof t&&"string"==typeof e)for(s=l.iterator();s.hasNext();){var u=s.next();if(br(e,0,t,u,e.length,o))return u}else for(a=l.iterator();a.hasNext();){var p=a.next();if(Wa(e,0,t,p,e.length,o))return p}return-1}function Za(e,i,n,o){return void 0===n&&(n=0),void 0===o&&(o=!1),o||"string"!=typeof e?Ka(e,t.charArrayOf(i),n,o):e.indexOf(String.fromCharCode(i),n)}function Ja(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=!1),n||"string"!=typeof t?Ya(t,e,i,t.length,n):t.indexOf(e,i)}function Qa(t,e,i,n){return void 0===i&&(i=Ga(t)),void 0===n&&(n=!1),n||"string"!=typeof t?Ya(t,e,i,0,n,!0):t.lastIndexOf(e,i)}function tl(t,e,i,n){this.input_0=t,this.startIndex_0=e,this.limit_0=i,this.getNextMatch_0=n}function el(t){this.this$DelimitedRangesSequence=t,this.nextState=-1,this.currentStartIndex=bt(t.startIndex_0,0,t.input_0.length),this.nextSearchIndex=this.currentStartIndex,this.nextItem=null,this.counter=0}function il(t,e){return function(i,n){var o;return null!=(o=function(t,e,i,n,o){var r,s;if(!n&&1===e.size){var a=ot(e),l=o?Qa(t,a,i):Ja(t,a,i);return l<0?null:xl(l,a)}var u=o?mt(gt(i,Ga(t)),0):new be(vt(i,0),t.length);if("string"==typeof t)for(r=u.iterator();r.hasNext();){var p,c=r.next();t:do{var h;for(h=e.iterator();h.hasNext();){var d=h.next();if(br(d,0,t,c,d.length,n)){p=d;break t}}p=null}while(0);if(null!=p)return xl(c,p)}else for(s=u.iterator();s.hasNext();){var f,_=s.next();t:do{var m;for(m=e.iterator();m.hasNext();){var $=m.next();if(Wa($,0,t,_,$.length,n)){f=$;break t}}f=null}while(0);if(null!=f)return xl(_,f)}return null}(i,t,n,e,!1))?xl(o.first,o.second.length):null}}function nl(t,e,i,n,o){if(void 0===i&&(i=0),void 0===n&&(n=!1),void 0===o&&(o=0),!(o>=0))throw yi(("Limit must be non-negative, but was "+o+".").toString());return new tl(t,i,o,il(Li(e),n))}function ol(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=0),St(nl(t,e,void 0,i,n),(o=t,function(t){return Ha(o,t)}));var o}function rl(t){return ol(t,["\r\n","\n","\r"])}function sl(t){return zt(rl(t))}function al(){}function ll(){ul=this}da.$metadata$={kind:h,simpleName:"Random",interfaces:[]},za.prototype.nextInt=function(){var t=this.x_0;t^=t>>>2,this.x_0=this.y_0,this.y_0=this.z_0,this.z_0=this.w_0;var e=this.v_0;return this.w_0=e,t=t^t<<1^e^e<<4,this.v_0=t,this.addend_0=this.addend_0+362437|0,t+this.addend_0|0},za.prototype.nextBits_za3lpa$=function(t){return va(this.nextInt(),t)},za.$metadata$={kind:h,simpleName:"XorWowRandom",interfaces:[da]},Na.$metadata$={kind:z,simpleName:"KClassifier",interfaces:[]},Ua.prototype.nextChar=function(){var t,e;return t=this.index_0,this.index_0=t+1|0,e=t,this.this$iterator.charCodeAt(e)},Ua.prototype.hasNext=function(){return this.index_0<this.this$iterator.length},Ua.$metadata$={kind:h,interfaces:[Kt]},el.prototype.calcNext_0=function(){if(this.nextSearchIndex<0)this.nextState=0,this.nextItem=null;else{if(this.this$DelimitedRangesSequence.limit_0>0&&(this.counter=this.counter+1|0,this.counter>=this.this$DelimitedRangesSequence.limit_0)||this.nextSearchIndex>this.this$DelimitedRangesSequence.input_0.length)this.nextItem=new be(this.currentStartIndex,Ga(this.this$DelimitedRangesSequence.input_0)),this.nextSearchIndex=-1;else{var t=this.this$DelimitedRangesSequence.getNextMatch_0(this.this$DelimitedRangesSequence.input_0,this.nextSearchIndex);if(null==t)this.nextItem=new be(this.currentStartIndex,Ga(this.this$DelimitedRangesSequence.input_0)),this.nextSearchIndex=-1;else{var e=t.component1(),i=t.component2();this.nextItem=yt(this.currentStartIndex,e),this.currentStartIndex=e+i|0,this.nextSearchIndex=this.currentStartIndex+(0===i?1:0)|0}}this.nextState=1}},el.prototype.next=function(){var e;if(-1===this.nextState&&this.calcNext_0(),0===this.nextState)throw Ei();var i=t.isType(e=this.nextItem,be)?e:io();return this.nextItem=null,this.nextState=-1,i},el.prototype.hasNext=function(){return-1===this.nextState&&this.calcNext_0(),1===this.nextState},el.$metadata$={kind:h,interfaces:[Ut]},tl.prototype.iterator=function(){return new el(this)},tl.$metadata$={kind:h,simpleName:"DelimitedRangesSequence",interfaces:[ks]},al.$metadata$={kind:z,simpleName:"Lazy",interfaces:[]},ll.$metadata$={kind:S,simpleName:"UNINITIALIZED_VALUE",interfaces:[]};var ul=null;function pl(){return null===ul&&new ll,ul}function cl(t){this.initializer_0=t,this._value_0=pl()}function hl(t){this.value_7taq70$_0=t}function dl(t){ml(),this.value=t}function fl(){_l=this}Object.defineProperty(cl.prototype,"value",{configurable:!0,get:function(){var e;return this._value_0===pl()&&(this._value_0=T(this.initializer_0)(),this.initializer_0=null),null==(e=this._value_0)||t.isType(e,k)?e:io()}}),cl.prototype.isInitialized=function(){return this._value_0!==pl()},cl.prototype.toString=function(){return this.isInitialized()?x(this.value):"Lazy value not initialized yet."},cl.prototype.writeReplace_0=function(){return new hl(this.value)},cl.$metadata$={kind:h,simpleName:"UnsafeLazyImpl",interfaces:[oo,al]},Object.defineProperty(hl.prototype,"value",{get:function(){return this.value_7taq70$_0}}),hl.prototype.isInitialized=function(){return!0},hl.prototype.toString=function(){return x(this.value)},hl.$metadata$={kind:h,simpleName:"InitializedLazyImpl",interfaces:[oo,al]},Object.defineProperty(dl.prototype,"isSuccess",{configurable:!0,get:function(){return!t.isType(this.value,$l)}}),Object.defineProperty(dl.prototype,"isFailure",{configurable:!0,get:function(){return t.isType(this.value,$l)}}),dl.prototype.getOrNull=n("kotlin.kotlin.Result.getOrNull",o((function(){var e=Object,i=t.throwCCE;return function(){var n;return this.isFailure?null:null==(n=this.value)||t.isType(n,e)?n:i()}}))),dl.prototype.exceptionOrNull=function(){return t.isType(this.value,$l)?this.value.exception:null},dl.prototype.toString=function(){return t.isType(this.value,$l)?this.value.toString():"Success("+x(this.value)+")"},fl.prototype.success_mh5how$=n("kotlin.kotlin.Result.Companion.success_mh5how$",o((function(){var t=p.kotlin.Result;return function(e){return new t(e)}}))),fl.prototype.failure_lsqlk3$=n("kotlin.kotlin.Result.Companion.failure_lsqlk3$",o((function(){var t=p.kotlin.createFailure_tcv7n7$,e=p.kotlin.Result;return function(i){return new e(t(i))}}))),fl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var _l=null;function ml(){return null===_l&&new fl,_l}function $l(t){this.exception=t}function yl(t){return new $l(t)}function vl(e){if(t.isType(e.value,$l))throw e.value.exception}function gl(t){void 0===t&&(t="An operation is not implemented."),hi(t,this),this.name="NotImplementedError"}function bl(t,e){this.first=t,this.second=e}function xl(t,e){return new bl(t,e)}function wl(t,e,i){this.first=t,this.second=e,this.third=i}function zl(t){Cl(),this.data=t}function kl(){Sl=this,this.MIN_VALUE=new zl(0),this.MAX_VALUE=new zl(-1),this.SIZE_BYTES=1,this.SIZE_BITS=8}$l.prototype.equals=function(e){return t.isType(e,$l)&&r(this.exception,e.exception)},$l.prototype.hashCode=function(){return j(this.exception)},$l.prototype.toString=function(){return"Failure("+this.exception+")"},$l.$metadata$={kind:h,simpleName:"Failure",interfaces:[oo]},dl.$metadata$={kind:h,simpleName:"Result",interfaces:[oo]},dl.prototype.unbox=function(){return this.value},dl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.value)|0},dl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.value,e.value)},gl.$metadata$={kind:h,simpleName:"NotImplementedError",interfaces:[ci]},bl.prototype.toString=function(){return"("+this.first+", "+this.second+")"},bl.$metadata$={kind:h,simpleName:"Pair",interfaces:[oo]},bl.prototype.component1=function(){return this.first},bl.prototype.component2=function(){return this.second},bl.prototype.copy_xwzc9p$=function(t,e){return new bl(void 0===t?this.first:t,void 0===e?this.second:e)},bl.prototype.hashCode=function(){var e=0;return e=31*(e=31*e+t.hashCode(this.first)|0)+t.hashCode(this.second)|0},bl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.first,e.first)&&t.equals(this.second,e.second)},wl.prototype.toString=function(){return"("+this.first+", "+this.second+", "+this.third+")"},wl.$metadata$={kind:h,simpleName:"Triple",interfaces:[oo]},wl.prototype.component1=function(){return this.first},wl.prototype.component2=function(){return this.second},wl.prototype.component3=function(){return this.third},wl.prototype.copy_1llc0w$=function(t,e,i){return new wl(void 0===t?this.first:t,void 0===e?this.second:e,void 0===i?this.third:i)},wl.prototype.hashCode=function(){var e=0;return e=31*(e=31*(e=31*e+t.hashCode(this.first)|0)+t.hashCode(this.second)|0)+t.hashCode(this.third)|0},wl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.first,e.first)&&t.equals(this.second,e.second)&&t.equals(this.third,e.third)},kl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Sl=null;function Cl(){return null===Sl&&new kl,Sl}function Nl(t){Pl(),this.data=t}function El(){Tl=this,this.MIN_VALUE=new Nl(0),this.MAX_VALUE=new Nl(-1),this.SIZE_BYTES=4,this.SIZE_BITS=32}zl.prototype.compareTo_11rb$=n("kotlin.kotlin.UByte.compareTo_11rb$",(function(e){return t.primitiveCompareTo(255&this.data,255&e.data)})),zl.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.UByte.compareTo_6hrhkk$",(function(e){return t.primitiveCompareTo(255&this.data,65535&e.data)})),zl.prototype.compareTo_s87ys9$=n("kotlin.kotlin.UByte.compareTo_s87ys9$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(new t(255&this.data).data,i.data)}}))),zl.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UByte.compareTo_mpgczg$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)).data,o.data)}}))),zl.prototype.plus_mpmjao$=n("kotlin.kotlin.UByte.plus_mpmjao$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+new t(255&e.data).data|0)}}))),zl.prototype.plus_6hrhkk$=n("kotlin.kotlin.UByte.plus_6hrhkk$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+new t(65535&e.data).data|0)}}))),zl.prototype.plus_s87ys9$=n("kotlin.kotlin.UByte.plus_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+e.data|0)}}))),zl.prototype.plus_mpgczg$=n("kotlin.kotlin.UByte.plus_mpgczg$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),zl.prototype.minus_mpmjao$=n("kotlin.kotlin.UByte.minus_mpmjao$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-new t(255&e.data).data|0)}}))),zl.prototype.minus_6hrhkk$=n("kotlin.kotlin.UByte.minus_6hrhkk$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-new t(65535&e.data).data|0)}}))),zl.prototype.minus_s87ys9$=n("kotlin.kotlin.UByte.minus_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-e.data|0)}}))),zl.prototype.minus_mpgczg$=n("kotlin.kotlin.UByte.minus_mpgczg$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),zl.prototype.times_mpmjao$=n("kotlin.kotlin.UByte.times_mpmjao$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,new e(255&i.data).data))}}))),zl.prototype.times_6hrhkk$=n("kotlin.kotlin.UByte.times_6hrhkk$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,new e(65535&i.data).data))}}))),zl.prototype.times_s87ys9$=n("kotlin.kotlin.UByte.times_s87ys9$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,i.data))}}))),zl.prototype.times_mpgczg$=n("kotlin.kotlin.UByte.times_mpgczg$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),zl.prototype.div_mpmjao$=n("kotlin.kotlin.UByte.div_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),new t(255&i.data))}}))),zl.prototype.div_6hrhkk$=n("kotlin.kotlin.UByte.div_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),new t(65535&i.data))}}))),zl.prototype.div_s87ys9$=n("kotlin.kotlin.UByte.div_s87ys9$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),i)}}))),zl.prototype.div_mpgczg$=n("kotlin.kotlin.UByte.div_mpgczg$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)),o)}}))),zl.prototype.rem_mpmjao$=n("kotlin.kotlin.UByte.rem_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),new t(255&i.data))}}))),zl.prototype.rem_6hrhkk$=n("kotlin.kotlin.UByte.rem_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),new t(65535&i.data))}}))),zl.prototype.rem_s87ys9$=n("kotlin.kotlin.UByte.rem_s87ys9$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),i)}}))),zl.prototype.rem_mpgczg$=n("kotlin.kotlin.UByte.rem_mpgczg$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)),o)}}))),zl.prototype.inc=n("kotlin.kotlin.UByte.inc",o((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data+1))}}))),zl.prototype.dec=n("kotlin.kotlin.UByte.dec",o((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data-1))}}))),zl.prototype.rangeTo_mpmjao$=n("kotlin.kotlin.UByte.rangeTo_mpmjao$",o((function(){var t=p.kotlin.ranges.UIntRange,e=p.kotlin.UInt;return function(i){return new t(new e(255&this.data),new e(255&i.data))}}))),zl.prototype.and_mpmjao$=n("kotlin.kotlin.UByte.and_mpmjao$",o((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data&t.data))}}))),zl.prototype.or_mpmjao$=n("kotlin.kotlin.UByte.or_mpmjao$",o((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data|t.data))}}))),zl.prototype.xor_mpmjao$=n("kotlin.kotlin.UByte.xor_mpmjao$",o((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data^t.data))}}))),zl.prototype.inv=n("kotlin.kotlin.UByte.inv",o((function(){var e=p.kotlin.UByte,i=t.toByte;return function(){return new e(i(~this.data))}}))),zl.prototype.toByte=n("kotlin.kotlin.UByte.toByte",(function(){return this.data})),zl.prototype.toShort=n("kotlin.kotlin.UByte.toShort",o((function(){var e=t.toShort;return function(){return e(255&this.data)}}))),zl.prototype.toInt=n("kotlin.kotlin.UByte.toInt",(function(){return 255&this.data})),zl.prototype.toLong=n("kotlin.kotlin.UByte.toLong",o((function(){var e=t.Long.fromInt(255);return function(){return t.Long.fromInt(this.data).and(e)}}))),zl.prototype.toUByte=n("kotlin.kotlin.UByte.toUByte",(function(){return this})),zl.prototype.toUShort=n("kotlin.kotlin.UByte.toUShort",o((function(){var e=p.kotlin.UShort,i=t.toShort;return function(){return new e(i(255&this.data))}}))),zl.prototype.toUInt=n("kotlin.kotlin.UByte.toUInt",o((function(){var t=p.kotlin.UInt;return function(){return new t(255&this.data)}}))),zl.prototype.toULong=n("kotlin.kotlin.UByte.toULong",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),zl.prototype.toFloat=n("kotlin.kotlin.UByte.toFloat",(function(){return 255&this.data})),zl.prototype.toDouble=n("kotlin.kotlin.UByte.toDouble",(function(){return 255&this.data})),zl.prototype.toString=function(){return(255&this.data).toString()},zl.$metadata$={kind:h,simpleName:"UByte",interfaces:[E]},zl.prototype.unbox=function(){return this.data},zl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},zl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},El.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Tl=null;function Pl(){return null===Tl&&new El,Tl}function Ol(t,e){Al(),Il.call(this,t,e,1)}function Ml(){jl=this,this.EMPTY=new Ol(Pl().MAX_VALUE,Pl().MIN_VALUE)}Nl.prototype.compareTo_mpmjao$=n("kotlin.kotlin.UInt.compareTo_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(this.data,new t(255&i.data).data)}}))),Nl.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.UInt.compareTo_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(this.data,new t(65535&i.data).data)}}))),Nl.prototype.compareTo_11rb$=n("kotlin.kotlin.UInt.compareTo_11rb$",o((function(){var t=p.kotlin.uintCompare_vux9f0$;return function(e){return t(this.data,e.data)}}))),Nl.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UInt.compareTo_mpgczg$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)).data,o.data)}}))),Nl.prototype.plus_mpmjao$=n("kotlin.kotlin.UInt.plus_mpmjao$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+new t(255&e.data).data|0)}}))),Nl.prototype.plus_6hrhkk$=n("kotlin.kotlin.UInt.plus_6hrhkk$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+new t(65535&e.data).data|0)}}))),Nl.prototype.plus_s87ys9$=n("kotlin.kotlin.UInt.plus_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+e.data|0)}}))),Nl.prototype.plus_mpgczg$=n("kotlin.kotlin.UInt.plus_mpgczg$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),Nl.prototype.minus_mpmjao$=n("kotlin.kotlin.UInt.minus_mpmjao$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-new t(255&e.data).data|0)}}))),Nl.prototype.minus_6hrhkk$=n("kotlin.kotlin.UInt.minus_6hrhkk$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-new t(65535&e.data).data|0)}}))),Nl.prototype.minus_s87ys9$=n("kotlin.kotlin.UInt.minus_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-e.data|0)}}))),Nl.prototype.minus_mpgczg$=n("kotlin.kotlin.UInt.minus_mpgczg$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),Nl.prototype.times_mpmjao$=n("kotlin.kotlin.UInt.times_mpmjao$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,new e(255&i.data).data))}}))),Nl.prototype.times_6hrhkk$=n("kotlin.kotlin.UInt.times_6hrhkk$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,new e(65535&i.data).data))}}))),Nl.prototype.times_s87ys9$=n("kotlin.kotlin.UInt.times_s87ys9$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,i.data))}}))),Nl.prototype.times_mpgczg$=n("kotlin.kotlin.UInt.times_mpgczg$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),Nl.prototype.div_mpmjao$=n("kotlin.kotlin.UInt.div_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(this,new t(255&i.data))}}))),Nl.prototype.div_6hrhkk$=n("kotlin.kotlin.UInt.div_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(this,new t(65535&i.data))}}))),Nl.prototype.div_s87ys9$=n("kotlin.kotlin.UInt.div_s87ys9$",o((function(){var t=p.kotlin.uintDivide_oqfnby$;return function(e){return t(this,e)}}))),Nl.prototype.div_mpgczg$=n("kotlin.kotlin.UInt.div_mpgczg$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)),o)}}))),Nl.prototype.rem_mpmjao$=n("kotlin.kotlin.UInt.rem_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(this,new t(255&i.data))}}))),Nl.prototype.rem_6hrhkk$=n("kotlin.kotlin.UInt.rem_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(this,new t(65535&i.data))}}))),Nl.prototype.rem_s87ys9$=n("kotlin.kotlin.UInt.rem_s87ys9$",o((function(){var t=p.kotlin.uintRemainder_oqfnby$;return function(e){return t(this,e)}}))),Nl.prototype.rem_mpgczg$=n("kotlin.kotlin.UInt.rem_mpgczg$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)),o)}}))),Nl.prototype.inc=n("kotlin.kotlin.UInt.inc",o((function(){var t=p.kotlin.UInt;return function(){return new t(this.data+1|0)}}))),Nl.prototype.dec=n("kotlin.kotlin.UInt.dec",o((function(){var t=p.kotlin.UInt;return function(){return new t(this.data-1|0)}}))),Nl.prototype.rangeTo_s87ys9$=n("kotlin.kotlin.UInt.rangeTo_s87ys9$",o((function(){var t=p.kotlin.ranges.UIntRange;return function(e){return new t(this,e)}}))),Nl.prototype.shl_za3lpa$=n("kotlin.kotlin.UInt.shl_za3lpa$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data<<e)}}))),Nl.prototype.shr_za3lpa$=n("kotlin.kotlin.UInt.shr_za3lpa$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data>>>e)}}))),Nl.prototype.and_s87ys9$=n("kotlin.kotlin.UInt.and_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data&e.data)}}))),Nl.prototype.or_s87ys9$=n("kotlin.kotlin.UInt.or_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data|e.data)}}))),Nl.prototype.xor_s87ys9$=n("kotlin.kotlin.UInt.xor_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data^e.data)}}))),Nl.prototype.inv=n("kotlin.kotlin.UInt.inv",o((function(){var t=p.kotlin.UInt;return function(){return new t(~this.data)}}))),Nl.prototype.toByte=n("kotlin.kotlin.UInt.toByte",o((function(){var e=t.toByte;return function(){return e(this.data)}}))),Nl.prototype.toShort=n("kotlin.kotlin.UInt.toShort",o((function(){var e=t.toShort;return function(){return e(this.data)}}))),Nl.prototype.toInt=n("kotlin.kotlin.UInt.toInt",(function(){return this.data})),Nl.prototype.toLong=n("kotlin.kotlin.UInt.toLong",o((function(){var e=new t.Long(-1,0);return function(){return t.Long.fromInt(this.data).and(e)}}))),Nl.prototype.toUByte=n("kotlin.kotlin.UInt.toUByte",o((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data))}}))),Nl.prototype.toUShort=n("kotlin.kotlin.UInt.toUShort",o((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data))}}))),Nl.prototype.toUInt=n("kotlin.kotlin.UInt.toUInt",(function(){return this})),Nl.prototype.toULong=n("kotlin.kotlin.UInt.toULong",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),Nl.prototype.toFloat=n("kotlin.kotlin.UInt.toFloat",o((function(){var t=p.kotlin.uintToDouble_za3lpa$;return function(){return t(this.data)}}))),Nl.prototype.toDouble=n("kotlin.kotlin.UInt.toDouble",o((function(){var t=p.kotlin.uintToDouble_za3lpa$;return function(){return t(this.data)}}))),Nl.prototype.toString=function(){return t.Long.fromInt(this.data).and(w).toString()},Nl.$metadata$={kind:h,simpleName:"UInt",interfaces:[E]},Nl.prototype.unbox=function(){return this.data},Nl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},Nl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},Object.defineProperty(Ol.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(Ol.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),Ol.prototype.contains_mef7kx$=function(t){var e=pu(this.first.data,t.data)<=0;return e&&(e=pu(t.data,this.last.data)<=0),e},Ol.prototype.isEmpty=function(){return pu(this.first.data,this.last.data)>0},Ol.prototype.equals=function(e){var i,n;return t.isType(e,Ol)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null))},Ol.prototype.hashCode=function(){return this.isEmpty()?-1:(31*this.first.data|0)+this.last.data|0},Ol.prototype.toString=function(){return this.first.toString()+".."+this.last},Ml.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var jl=null;function Al(){return null===jl&&new Ml,jl}function Il(t,e,i){if(Dl(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=ou(t,e,i),this.step=i}function Rl(){Ll=this}Ol.$metadata$={kind:h,simpleName:"UIntRange",interfaces:[me,Il]},Il.prototype.iterator=function(){return new ql(this.first,this.last,this.step)},Il.prototype.isEmpty=function(){return this.step>0?pu(this.first.data,this.last.data)>0:pu(this.first.data,this.last.data)<0},Il.prototype.equals=function(e){var i,n;return t.isType(e,Il)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null)&&this.step===e.step)},Il.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*this.first.data|0)+this.last.data|0)|0)+this.step|0},Il.prototype.toString=function(){return this.step>0?this.first.toString()+".."+this.last+" step "+this.step:this.first.toString()+" downTo "+this.last+" step "+(0|-this.step)},Rl.prototype.fromClosedRange_fjk8us$=function(t,e,i){return new Il(t,e,i)},Rl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ll=null;function Dl(){return null===Ll&&new Rl,Ll}function ql(t,e,i){Fl.call(this),this.finalElement_0=e,this.hasNext_0=i>0?pu(t.data,e.data)<=0:pu(t.data,e.data)>=0,this.step_0=new Nl(i),this.next_0=this.hasNext_0?t:this.finalElement_0}function Fl(){}function Bl(){}function Ul(t){Hl(),this.data=t}function Vl(){Gl=this,this.MIN_VALUE=new Ul(u),this.MAX_VALUE=new Ul(f),this.SIZE_BYTES=8,this.SIZE_BITS=64}Il.$metadata$={kind:h,simpleName:"UIntProgression",interfaces:[Pt]},ql.prototype.hasNext=function(){return this.hasNext_0},ql.prototype.nextUInt=function(){var t=this.next_0;if(null!=t&&t.equals(this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=new Nl(this.next_0.data+this.step_0.data|0);return t},ql.$metadata$={kind:h,simpleName:"UIntProgressionIterator",interfaces:[Fl]},Fl.prototype.next=function(){return this.nextUInt()},Fl.$metadata$={kind:h,simpleName:"UIntIterator",interfaces:[Ut]},Bl.prototype.next=function(){return this.nextULong()},Bl.$metadata$={kind:h,simpleName:"ULongIterator",interfaces:[Ut]},Vl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Gl=null;function Hl(){return null===Gl&&new Vl,Gl}function Wl(t,e){Yl(),Zl.call(this,t,e,C)}function Kl(){Xl=this,this.EMPTY=new Wl(Hl().MAX_VALUE,Hl().MIN_VALUE)}Ul.prototype.compareTo_mpmjao$=n("kotlin.kotlin.ULong.compareTo_mpmjao$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(o){return n(this.data,new i(t.Long.fromInt(o.data).and(e)).data)}}))),Ul.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.ULong.compareTo_6hrhkk$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(o){return n(this.data,new i(t.Long.fromInt(o.data).and(e)).data)}}))),Ul.prototype.compareTo_s87ys9$=n("kotlin.kotlin.ULong.compareTo_s87ys9$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(o){return n(this.data,new i(t.Long.fromInt(o.data).and(e)).data)}}))),Ul.prototype.compareTo_11rb$=n("kotlin.kotlin.ULong.compareTo_11rb$",o((function(){var t=p.kotlin.ulongCompare_3pjtqy$;return function(e){return t(this.data,e.data)}}))),Ul.prototype.plus_mpmjao$=n("kotlin.kotlin.ULong.plus_mpmjao$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_6hrhkk$=n("kotlin.kotlin.ULong.plus_6hrhkk$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_s87ys9$=n("kotlin.kotlin.ULong.plus_s87ys9$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_mpgczg$=n("kotlin.kotlin.ULong.plus_mpgczg$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.add(e.data))}}))),Ul.prototype.minus_mpmjao$=n("kotlin.kotlin.ULong.minus_mpmjao$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_6hrhkk$=n("kotlin.kotlin.ULong.minus_6hrhkk$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_s87ys9$=n("kotlin.kotlin.ULong.minus_s87ys9$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_mpgczg$=n("kotlin.kotlin.ULong.minus_mpgczg$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.subtract(e.data))}}))),Ul.prototype.times_mpmjao$=n("kotlin.kotlin.ULong.times_mpmjao$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_6hrhkk$=n("kotlin.kotlin.ULong.times_6hrhkk$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_s87ys9$=n("kotlin.kotlin.ULong.times_s87ys9$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_mpgczg$=n("kotlin.kotlin.ULong.times_mpgczg$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.multiply(e.data))}}))),Ul.prototype.div_mpmjao$=n("kotlin.kotlin.ULong.div_mpmjao$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(o){return n(this,new i(t.Long.fromInt(o.data).and(e)))}}))),Ul.prototype.div_6hrhkk$=n("kotlin.kotlin.ULong.div_6hrhkk$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(o){return n(this,new i(t.Long.fromInt(o.data).and(e)))}}))),Ul.prototype.div_s87ys9$=n("kotlin.kotlin.ULong.div_s87ys9$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(o){return n(this,new i(t.Long.fromInt(o.data).and(e)))}}))),Ul.prototype.div_mpgczg$=n("kotlin.kotlin.ULong.div_mpgczg$",o((function(){var t=p.kotlin.ulongDivide_jpm79w$;return function(e){return t(this,e)}}))),Ul.prototype.rem_mpmjao$=n("kotlin.kotlin.ULong.rem_mpmjao$",o((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(o){return n(this,new i(t.Long.fromInt(o.data).and(e)))}}))),Ul.prototype.rem_6hrhkk$=n("kotlin.kotlin.ULong.rem_6hrhkk$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(o){return n(this,new i(t.Long.fromInt(o.data).and(e)))}}))),Ul.prototype.rem_s87ys9$=n("kotlin.kotlin.ULong.rem_s87ys9$",o((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(o){return n(this,new i(t.Long.fromInt(o.data).and(e)))}}))),Ul.prototype.rem_mpgczg$=n("kotlin.kotlin.ULong.rem_mpgczg$",o((function(){var t=p.kotlin.ulongRemainder_jpm79w$;return function(e){return t(this,e)}}))),Ul.prototype.inc=n("kotlin.kotlin.ULong.inc",o((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.inc())}}))),Ul.prototype.dec=n("kotlin.kotlin.ULong.dec",o((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.dec())}}))),Ul.prototype.rangeTo_mpgczg$=n("kotlin.kotlin.ULong.rangeTo_mpgczg$",o((function(){var t=p.kotlin.ranges.ULongRange;return function(e){return new t(this,e)}}))),Ul.prototype.shl_za3lpa$=n("kotlin.kotlin.ULong.shl_za3lpa$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.shiftLeft(e))}}))),Ul.prototype.shr_za3lpa$=n("kotlin.kotlin.ULong.shr_za3lpa$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.shiftRightUnsigned(e))}}))),Ul.prototype.and_mpgczg$=n("kotlin.kotlin.ULong.and_mpgczg$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.and(e.data))}}))),Ul.prototype.or_mpgczg$=n("kotlin.kotlin.ULong.or_mpgczg$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.or(e.data))}}))),Ul.prototype.xor_mpgczg$=n("kotlin.kotlin.ULong.xor_mpgczg$",o((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.xor(e.data))}}))),Ul.prototype.inv=n("kotlin.kotlin.ULong.inv",o((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.inv())}}))),Ul.prototype.toByte=n("kotlin.kotlin.ULong.toByte",o((function(){var e=t.toByte;return function(){return e(this.data.toInt())}}))),Ul.prototype.toShort=n("kotlin.kotlin.ULong.toShort",o((function(){var e=t.toShort;return function(){return e(this.data.toInt())}}))),Ul.prototype.toInt=n("kotlin.kotlin.ULong.toInt",(function(){return this.data.toInt()})),Ul.prototype.toLong=n("kotlin.kotlin.ULong.toLong",(function(){return this.data})),Ul.prototype.toUByte=n("kotlin.kotlin.ULong.toUByte",o((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data.toInt()))}}))),Ul.prototype.toUShort=n("kotlin.kotlin.ULong.toUShort",o((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data.toInt()))}}))),Ul.prototype.toUInt=n("kotlin.kotlin.ULong.toUInt",o((function(){var t=p.kotlin.UInt;return function(){return new t(this.data.toInt())}}))),Ul.prototype.toULong=n("kotlin.kotlin.ULong.toULong",(function(){return this})),Ul.prototype.toFloat=n("kotlin.kotlin.ULong.toFloat",o((function(){var t=p.kotlin.ulongToDouble_s8cxhz$;return function(){return t(this.data)}}))),Ul.prototype.toDouble=n("kotlin.kotlin.ULong.toDouble",o((function(){var t=p.kotlin.ulongToDouble_s8cxhz$;return function(){return t(this.data)}}))),Ul.prototype.toString=function(){return fu(this.data)},Ul.$metadata$={kind:h,simpleName:"ULong",interfaces:[E]},Ul.prototype.unbox=function(){return this.data},Ul.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},Ul.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},Object.defineProperty(Wl.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(Wl.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),Wl.prototype.contains_mef7kx$=function(t){var e=cu(this.first.data,t.data)<=0;return e&&(e=cu(t.data,this.last.data)<=0),e},Wl.prototype.isEmpty=function(){return cu(this.first.data,this.last.data)>0},Wl.prototype.equals=function(e){var i,n;return t.isType(e,Wl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null))},Wl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*new Ul(this.first.data.xor(new Ul(this.first.data.shiftRightUnsigned(32)).data)).data.toInt()|0)+new Ul(this.last.data.xor(new Ul(this.last.data.shiftRightUnsigned(32)).data)).data.toInt()|0},Wl.prototype.toString=function(){return this.first.toString()+".."+this.last},Kl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Xl=null;function Yl(){return null===Xl&&new Kl,Xl}function Zl(t,e,i){if(tu(),r(i,u))throw yi("Step must be non-zero.");if(r(i,y))throw yi("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=ru(t,e,i),this.step=i}function Jl(){Ql=this}Wl.$metadata$={kind:h,simpleName:"ULongRange",interfaces:[me,Zl]},Zl.prototype.iterator=function(){return new eu(this.first,this.last,this.step)},Zl.prototype.isEmpty=function(){return this.step.toNumber()>0?cu(this.first.data,this.last.data)>0:cu(this.first.data,this.last.data)<0},Zl.prototype.equals=function(e){var i,n;return t.isType(e,Zl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null)&&r(this.step,e.step))},Zl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*new Ul(this.first.data.xor(new Ul(this.first.data.shiftRightUnsigned(32)).data)).data.toInt()|0)+new Ul(this.last.data.xor(new Ul(this.last.data.shiftRightUnsigned(32)).data)).data.toInt()|0)|0)+this.step.xor(this.step.shiftRightUnsigned(32)).toInt()|0},Zl.prototype.toString=function(){return this.step.toNumber()>0?this.first.toString()+".."+this.last+" step "+this.step.toString():this.first.toString()+" downTo "+this.last+" step "+this.step.unaryMinus().toString()},Jl.prototype.fromClosedRange_15zasp$=function(t,e,i){return new Zl(t,e,i)},Jl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ql=null;function tu(){return null===Ql&&new Jl,Ql}function eu(t,e,i){Bl.call(this),this.finalElement_0=e,this.hasNext_0=i.toNumber()>0?cu(t.data,e.data)<=0:cu(t.data,e.data)>=0,this.step_0=new Ul(i),this.next_0=this.hasNext_0?t:this.finalElement_0}function iu(t,e,i){var n=hu(t,i),o=hu(e,i);return pu(n.data,o.data)>=0?new Nl(n.data-o.data|0):new Nl(new Nl(n.data-o.data|0).data+i.data|0)}function nu(t,e,i){var n=du(t,i),o=du(e,i);return cu(n.data,o.data)>=0?new Ul(n.data.subtract(o.data)):new Ul(new Ul(n.data.subtract(o.data)).data.add(i.data))}function ou(t,e,i){if(i>0)return pu(t.data,e.data)>=0?e:new Nl(e.data-iu(e,t,new Nl(i)).data|0);if(i<0)return pu(t.data,e.data)<=0?e:new Nl(e.data+iu(t,e,new Nl(0|-i)).data|0);throw yi("Step is zero.")}function ru(t,e,i){if(i.toNumber()>0)return cu(t.data,e.data)>=0?e:new Ul(e.data.subtract(nu(e,t,new Ul(i)).data));if(i.toNumber()<0)return cu(t.data,e.data)<=0?e:new Ul(e.data.add(nu(t,e,new Ul(i.unaryMinus())).data));throw yi("Step is zero.")}function su(t){uu(),this.data=t}function au(){lu=this,this.MIN_VALUE=new su(0),this.MAX_VALUE=new su(-1),this.SIZE_BYTES=2,this.SIZE_BITS=16}Zl.$metadata$={kind:h,simpleName:"ULongProgression",interfaces:[Pt]},eu.prototype.hasNext=function(){return this.hasNext_0},eu.prototype.nextULong=function(){var t=this.next_0;if(null!=t&&t.equals(this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=new Ul(this.next_0.data.add(this.step_0.data));return t},eu.$metadata$={kind:h,simpleName:"ULongProgressionIterator",interfaces:[Bl]},au.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var lu=null;function uu(){return null===lu&&new au,lu}function pu(e,i){return t.primitiveCompareTo(-2147483648^e,-2147483648^i)}function cu(t,e){return t.xor(y).compareTo_11rb$(e.xor(y))}function hu(e,i){return new Nl(t.Long.fromInt(e.data).and(w).modulo(t.Long.fromInt(i.data).and(w)).toInt())}function du(t,e){var i=t.data,n=e.data;if(n.toNumber()<0)return cu(t.data,e.data)<0?t:new Ul(t.data.subtract(e.data));if(i.toNumber()>=0)return new Ul(i.modulo(n));var o=i.shiftRightUnsigned(1).div(n).shiftLeft(1),r=i.subtract(o.multiply(n));return new Ul(r.subtract(cu(new Ul(r).data,new Ul(n).data)>=0?n:u))}function fu(t){return _u(t,10)}function _u(e,i){if(e.toNumber()>=0)return Ri(e,i);var n=e.shiftRightUnsigned(1).div(t.Long.fromInt(i)).shiftLeft(1),o=e.subtract(n.multiply(t.Long.fromInt(i)));return o.toNumber()>=i&&(o=o.subtract(t.Long.fromInt(i)),n=n.add(t.Long.fromInt(1))),Ri(n,i)+Ri(o,i)}su.prototype.compareTo_mpmjao$=n("kotlin.kotlin.UShort.compareTo_mpmjao$",(function(e){return t.primitiveCompareTo(65535&this.data,255&e.data)})),su.prototype.compareTo_11rb$=n("kotlin.kotlin.UShort.compareTo_11rb$",(function(e){return t.primitiveCompareTo(65535&this.data,65535&e.data)})),su.prototype.compareTo_s87ys9$=n("kotlin.kotlin.UShort.compareTo_s87ys9$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(new t(65535&this.data).data,i.data)}}))),su.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UShort.compareTo_mpgczg$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)).data,o.data)}}))),su.prototype.plus_mpmjao$=n("kotlin.kotlin.UShort.plus_mpmjao$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+new t(255&e.data).data|0)}}))),su.prototype.plus_6hrhkk$=n("kotlin.kotlin.UShort.plus_6hrhkk$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+new t(65535&e.data).data|0)}}))),su.prototype.plus_s87ys9$=n("kotlin.kotlin.UShort.plus_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+e.data|0)}}))),su.prototype.plus_mpgczg$=n("kotlin.kotlin.UShort.plus_mpgczg$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),su.prototype.minus_mpmjao$=n("kotlin.kotlin.UShort.minus_mpmjao$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-new t(255&e.data).data|0)}}))),su.prototype.minus_6hrhkk$=n("kotlin.kotlin.UShort.minus_6hrhkk$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-new t(65535&e.data).data|0)}}))),su.prototype.minus_s87ys9$=n("kotlin.kotlin.UShort.minus_s87ys9$",o((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-e.data|0)}}))),su.prototype.minus_mpgczg$=n("kotlin.kotlin.UShort.minus_mpgczg$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),su.prototype.times_mpmjao$=n("kotlin.kotlin.UShort.times_mpmjao$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,new e(255&i.data).data))}}))),su.prototype.times_6hrhkk$=n("kotlin.kotlin.UShort.times_6hrhkk$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,new e(65535&i.data).data))}}))),su.prototype.times_s87ys9$=n("kotlin.kotlin.UShort.times_s87ys9$",o((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,i.data))}}))),su.prototype.times_mpgczg$=n("kotlin.kotlin.UShort.times_mpgczg$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),su.prototype.div_mpmjao$=n("kotlin.kotlin.UShort.div_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),new t(255&i.data))}}))),su.prototype.div_6hrhkk$=n("kotlin.kotlin.UShort.div_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),new t(65535&i.data))}}))),su.prototype.div_s87ys9$=n("kotlin.kotlin.UShort.div_s87ys9$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),i)}}))),su.prototype.div_mpgczg$=n("kotlin.kotlin.UShort.div_mpgczg$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)),o)}}))),su.prototype.rem_mpmjao$=n("kotlin.kotlin.UShort.rem_mpmjao$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),new t(255&i.data))}}))),su.prototype.rem_6hrhkk$=n("kotlin.kotlin.UShort.rem_6hrhkk$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),new t(65535&i.data))}}))),su.prototype.rem_s87ys9$=n("kotlin.kotlin.UShort.rem_s87ys9$",o((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),i)}}))),su.prototype.rem_mpgczg$=n("kotlin.kotlin.UShort.rem_mpgczg$",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(o){return n(new i(t.Long.fromInt(this.data).and(e)),o)}}))),su.prototype.inc=n("kotlin.kotlin.UShort.inc",o((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data+1))}}))),su.prototype.dec=n("kotlin.kotlin.UShort.dec",o((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data-1))}}))),su.prototype.rangeTo_6hrhkk$=n("kotlin.kotlin.UShort.rangeTo_6hrhkk$",o((function(){var t=p.kotlin.ranges.UIntRange,e=p.kotlin.UInt;return function(i){return new t(new e(65535&this.data),new e(65535&i.data))}}))),su.prototype.and_6hrhkk$=n("kotlin.kotlin.UShort.and_6hrhkk$",o((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data&t.data))}}))),su.prototype.or_6hrhkk$=n("kotlin.kotlin.UShort.or_6hrhkk$",o((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data|t.data))}}))),su.prototype.xor_6hrhkk$=n("kotlin.kotlin.UShort.xor_6hrhkk$",o((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data^t.data))}}))),su.prototype.inv=n("kotlin.kotlin.UShort.inv",o((function(){var e=p.kotlin.UShort,i=t.toShort;return function(){return new e(i(~this.data))}}))),su.prototype.toByte=n("kotlin.kotlin.UShort.toByte",o((function(){var e=t.toByte;return function(){return e(this.data)}}))),su.prototype.toShort=n("kotlin.kotlin.UShort.toShort",(function(){return this.data})),su.prototype.toInt=n("kotlin.kotlin.UShort.toInt",(function(){return 65535&this.data})),su.prototype.toLong=n("kotlin.kotlin.UShort.toLong",o((function(){var e=t.Long.fromInt(65535);return function(){return t.Long.fromInt(this.data).and(e)}}))),su.prototype.toUByte=n("kotlin.kotlin.UShort.toUByte",o((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data))}}))),su.prototype.toUShort=n("kotlin.kotlin.UShort.toUShort",(function(){return this})),su.prototype.toUInt=n("kotlin.kotlin.UShort.toUInt",o((function(){var t=p.kotlin.UInt;return function(){return new t(65535&this.data)}}))),su.prototype.toULong=n("kotlin.kotlin.UShort.toULong",o((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),su.prototype.toFloat=n("kotlin.kotlin.UShort.toFloat",(function(){return 65535&this.data})),su.prototype.toDouble=n("kotlin.kotlin.UShort.toDouble",(function(){return 65535&this.data})),su.prototype.toString=function(){return(65535&this.data).toString()},su.$metadata$={kind:h,simpleName:"UShort",interfaces:[E]},su.prototype.unbox=function(){return this.data},su.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},su.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)};var mu=p.kotlin||(p.kotlin={}),$u=mu.collections||(mu.collections={});$u.contains_mjy6jw$=V,$u.get_lastIndex_m7z4lg$=X,$u.get_lastIndex_tmsbgo$=Y,$u.get_lastIndex_l1lu5t$=Z,$u.first_us0mfu$=function(t){if(0===t.length)throw new Ni("Array is empty.");return t[0]},$u.indexOf_mjy6jw$=G,$u.get_indices_m7z4lg$=K;var yu=mu.ranges||(mu.ranges={});yu.reversed_zf1xzc$=$t,$u.get_indices_tmsbgo$=function(t){return new be(0,Y(t))},$u.get_indices_l1lu5t$=function(t){return new be(0,Z(t))},$u.last_us0mfu$=function(t){if(0===t.length)throw new Ni("Array is empty.");return t[X(t)]},$u.lastIndexOf_mjy6jw$=H;var vu=mu.random||(mu.random={});vu.Random=da,$u.single_355ntz$=W,mu.IllegalArgumentException_init_pdl1vj$=yi,$u.emptyList_287e2$=Jr,$u.ArrayList_init_287e2$=cn,$u.toList_us0mfu$=function(t){var e;switch(t.length){case 0:e=Jr();break;case 1:e=Gi(t[0]);break;default:e=Q(t)}return e},$u.sortWith_iwcb0m$=function(t,e){t.length>1&&fn(t,e)},$u.mapCapacity_za3lpa$=Yi,yu.coerceAtLeast_dqglrj$=vt,$u.LinkedHashMap_init_bwtc7$=Un,yu.coerceAtMost_dqglrj$=gt,$u.toCollection_5n4o2z$=J,$u.toMutableList_us0mfu$=Q,$u.toSet_us0mfu$=tt,$u.addAll_ipc267$=function(e,i){var n;if(t.isType(i,Mt))return e.addAll_brywnq$(i);var o=!1;for(n=i.iterator();n.hasNext();){var r=n.next();e.add_11rb$(r)&&(o=!0)}return o},$u.LinkedHashMap_init_q3lmfv$=Fn,$u.Grouping=ns,$u.ArrayList_init_ww73n8$=hn,$u.withIndex_us0mfu$=function(e){return new rs((i=e,function(){return t.arrayIterator(i)}));var i},$u.HashSet_init_287e2$=function(t){return t=t||Object.create(En.prototype),un.call(t),En.call(t),t.map_8be2vx$=Sn(),t},mu.NoSuchElementException_init=Ei,mu.UnsupportedOperationException_init_pdl1vj$=zi,$u.listOf_mh5how$=Gi,$u.zip_r9t3v7$=function(t,e){for(var i=c.min(t.length,e.length),n=hn(i),o=0;o<i;o++)n.add_11rb$(xl(t[o],e[o]));return n},$u.collectionSizeOrDefault_ba2ldo$=ss,$u.joinTo_ohfn4r$=et,$u.joinToString_cph1y3$=function(t,e,i,n,o,r,s){return void 0===e&&(e=", "),void 0===i&&(i=""),void 0===n&&(n=""),void 0===o&&(o=-1),void 0===r&&(r="..."),void 0===s&&(s=null),et(t,ur(),e,i,n,o,r,s).toString()},$u.contains_2ws7j4$=function(e,i){return t.isType(e,Mt)?e.contains_11rb$(i):nt(e,i)>=0},$u.get_lastIndex_55thoc$=ts,$u.first_7wnvza$=function(e){if(t.isType(e,At))return it(e);var i=e.iterator();if(!i.hasNext())throw new Ni("Collection is empty.");return i.next()},$u.first_2p1efm$=it,$u.firstOrNull_2p1efm$=function(t){return t.isEmpty()?null:t.get_za3lpa$(0)},$u.indexOf_2ws7j4$=nt,$u.checkIndexOverflow_za3lpa$=Xi,$u.last_2p1efm$=function(t){if(t.isEmpty())throw new Ni("List is empty.");return t.get_za3lpa$(ts(t))},$u.lastOrNull_2p1efm$=function(t){return t.isEmpty()?null:t.get_za3lpa$(t.size-1|0)},$u.single_7wnvza$=ot,$u.single_2p1efm$=rt,$u.filterNotNull_m3lr2h$=function(t){return st(t,cn())},$u.filterNotNullTo_u9kwcl$=st,$u.toList_7wnvza$=ut,$u.reversed_7wnvza$=function(e){if(t.isType(e,Mt)&&e.size<=1)return ut(e);var i=pt(e);return qi(i),i},$u.shuffle_9jeydg$=at,$u.sortWith_nqfjgj$=function(t,e){!function(t,e){if(!(t.size<=1)){var i=Bi(t);fn(i,e);for(var n=0;n<i.length;n++)t.set_wxm5ur$(n,i[n])}}(t,e)},$u.toBooleanArray_xmyvgf$=function(e){var i,n,o=t.booleanArray(e.size),r=0;for(i=e.iterator();i.hasNext();){var s=i.next();o[(n=r,r=n+1|0,n)]=s}return o},$u.toIntArray_fx3nzu$=function(t){var e,i,n=new Int32Array(t.size),o=0;for(e=t.iterator();e.hasNext();){var r=e.next();n[(i=o,o=i+1|0,i)]=r}return n},$u.toCollection_5cfyqp$=lt,$u.toMutableList_7wnvza$=pt,$u.toMutableList_4c7yge$=ct,$u.distinct_7wnvza$=function(t){return ut(ht(t))},$u.toMutableSet_7wnvza$=ht,$u.Collection=Mt,$u.maxOrNull_lvsncp$=function(t){var e=t.iterator();if(!e.hasNext())return null;for(var i=e.next();e.hasNext();){var n=e.next();i=c.max(i,n)}return i},$u.minOrNull_exjks8$=dt,$u.joinTo_gcc71v$=ft,$u.joinToString_fmv235$=_t;var gu=mu.comparisons||(mu.comparisons={});yu.downTo_dqglrj$=mt,yu.step_xsgg7u$=function(t,e){return Ca(e>0,e),ce().fromClosedRange_qt1dr2$(t.first,t.last,t.step>0?e:0|-e)},yu.until_dqglrj$=yt,yu.coerceIn_e4yvb3$=bt,yu.coerceIn_ekzx8g$=function(t,e,i){if(e.compareTo_11rb$(i)>0)throw yi("Cannot coerce value to an empty range: maximum "+i.toString()+" is less than minimum "+e.toString()+".");return t.compareTo_11rb$(e)<0?e:t.compareTo_11rb$(i)>0?i:t};var bu=mu.sequences||(mu.sequences={});bu.Sequence=ks,bu.toCollection_gtszxp$=wt,bu.toList_veqyi0$=zt,bu.toMutableList_veqyi0$=kt,bu.map_z5avom$=St,bu.asIterable_veqyi0$=Ct;var xu=mu.text||(mu.text={});xu.get_lastIndex_gw00vp$=Ga,xu.iterator_gw00vp$=function(t){return new Ua(t)},xu.get_indices_gw00vp$=Va,xu.single_gw00vp$=function(t){var e;switch(t.length){case 0:throw new Ni("Char sequence is empty.");case 1:e=t.charCodeAt(0);break;default:throw yi("Char sequence has more than one element.")}return e},xu.drop_6ic1pp$=Nt,xu.StringBuilder_init=ur,mu.UInt=Nl,mu.ULong=Ul,mu.UByte=zl,mu.UShort=su,$u.copyOf_c03ot6$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int32Array(e))},$u.copyOf_3aefkx$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());var i=Ii(t,e,u);return i.$type$="LongArray",i},$u.copyOf_mrm5p$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int8Array(e))},$u.copyOf_m2jy6x$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int16Array(e))};var wu=mu.js||(mu.js={}),zu=mu.math||(mu.math={});Object.defineProperty(zu,"PI",{get:function(){return e}}),mu.Annotation=Et,mu.CharSequence=Tt,$u.Iterable=Pt,$u.MutableIterable=Ot,$u.MutableCollection=jt,$u.List=At,$u.MutableList=It,$u.Set=Rt,$u.MutableSet=Lt,Dt.Entry=qt,$u.Map=Dt,Ft.MutableEntry=Bt,$u.MutableMap=Ft,$u.Iterator=Ut,$u.MutableIterator=Vt,$u.ListIterator=Gt,$u.MutableListIterator=Ht,$u.ByteIterator=Wt,$u.CharIterator=Kt,$u.ShortIterator=Xt,$u.IntIterator=Yt,$u.LongIterator=Zt,$u.FloatIterator=Jt,$u.DoubleIterator=Qt,$u.BooleanIterator=te,yu.CharProgressionIterator=ee,yu.IntProgressionIterator=ie,yu.LongProgressionIterator=ne,Object.defineProperty(oe,"Companion",{get:ae}),yu.CharProgression=oe,Object.defineProperty(le,"Companion",{get:ce}),yu.IntProgression=le,Object.defineProperty(he,"Companion",{get:_e}),yu.LongProgression=he,yu.ClosedRange=me,Object.defineProperty($e,"Companion",{get:ge}),yu.CharRange=$e,Object.defineProperty(be,"Companion",{get:ze}),yu.IntRange=be,Object.defineProperty(ke,"Companion",{get:Ne}),yu.LongRange=ke,Object.defineProperty(mu,"Unit",{get:Pe});var ku=mu.internal||(mu.internal={});ku.getProgressionLastElement_qt1dr2$=Ie,ku.getProgressionLastElement_b9bd0d$=Re,p.arrayIterator=function(t,e){if(null==e)return new Le(t);switch(e){case"BooleanArray":return qe(t);case"ByteArray":return Be(t);case"ShortArray":return Ve(t);case"CharArray":return He(t);case"IntArray":return Ke(t);case"LongArray":return ti(t);case"FloatArray":return Ye(t);case"DoubleArray":return Je(t);default:throw gi("Unsupported type argument for arrayIterator: "+x(e))}},p.booleanArrayIterator=qe,p.byteArrayIterator=Be,p.shortArrayIterator=Ve,p.charArrayIterator=He,p.intArrayIterator=Ke,p.floatArrayIterator=Ye,p.doubleArrayIterator=Je,p.longArrayIterator=ti,p.noWhenBranchMatched=function(){throw Oi()},p.subSequence=function(t,e,i){return"string"==typeof t?t.substring(e,i):t.subSequence_vux9f0$(e,i)},p.captureStack=function(t,e){Error.captureStackTrace?Error.captureStackTrace(e):e.stack=(new Error).stack},p.BoxedChar=ei,p.charArrayOf=function(){var t="CharArray",e=new Uint16Array([].slice.call(arguments));return e.$type$=t,e};var Su=mu.coroutines||(mu.coroutines={});Su.CoroutineImpl=ii,Object.defineProperty(Su,"CompletedContinuation",{get:si});var Cu=Su.intrinsics||(Su.intrinsics={});Cu.createCoroutineUnintercepted_x18nsh$=li,Cu.createCoroutineUnintercepted_3a617i$=ui,Cu.intercepted_f9mg25$=pi,mu.Error_init_pdl1vj$=hi,mu.Error=ci,mu.Exception_init_pdl1vj$=fi,mu.Exception=di,mu.RuntimeException_init_pdl1vj$=mi,mu.RuntimeException=_i,mu.IllegalArgumentException=$i,mu.IllegalStateException_init=function(t){return t=t||Object.create(vi.prototype),vi.call(t,null,null),t},mu.IllegalStateException_init_pdl1vj$=gi,mu.IllegalStateException=vi,mu.IndexOutOfBoundsException=bi,mu.UnsupportedOperationException_init=wi,mu.UnsupportedOperationException=xi,mu.NumberFormatException=ki,mu.NullPointerException=Si,mu.ClassCastException=Ci,mu.NoSuchElementException=Ni,mu.ArithmeticException=Ti,mu.NoWhenBranchMatchedException_init=Oi,mu.NoWhenBranchMatchedException=Pi,mu.UninitializedPropertyAccessException_init_pdl1vj$=ji,mu.UninitializedPropertyAccessException=Mi,mu.lazy_klfg04$=function(t){return new cl(t)},mu.fillFrom_dgzutr$=Ai,mu.arrayCopyResize_xao4iu$=Ii,p.findAssociatedObject_yjf3nl$=function(t,e){return null},xu.toString_if0zpk$=Ri,$u.asList_us0mfu$=Li,$u.arrayCopy=function(t,e,i,n,o){Pr().checkRangeIndexes_cub51b$(n,o,t.length);var r=o-n|0;if(Pr().checkRangeIndexes_cub51b$(i,i+r|0,e.length),ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){var s=t.subarray(n,o);e.set(s,i)}else if(t!==e||i<=n)for(var a=0;a<r;a++)e[i+a|0]=t[n+a|0];else for(var l=r-1|0;l>=0;l--)e[i+l|0]=t[n+l|0]},$u.copyOf_rblqex$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Float32Array(e))},$u.copyOf_xgrzbe$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Float64Array(e))},$u.copyOf_1qu12l$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());var i=Ii(t,e,!1);return i.$type$="BooleanArray",i},$u.copyOf_gtcw5h$=function(e,i){if(!(i>=0))throw yi(("Invalid new array size: "+i+".").toString());var n=Ai(e,t.charArray(i));return n.$type$="CharArray",n},$u.copyOfRange_5f8l3u$=Di,$u.reverse_vvxzk3$=qi,mu.Comparator=Fi,$u.copyToArray=Bi,$u.copyToArrayImpl=Ui,$u.copyToExistingArrayImpl=Vi,$u.setOf_mh5how$=Hi,$u.LinkedHashSet_init_287e2$=Gn,$u.LinkedHashSet_init_ww73n8$=Kn,$u.mapOf_x2b85n$=Wi,$u.shuffle_vvxzk3$=Ki,$u.shuffled_7wnvza$=function(t){var e=pt(t);return Ki(e),e},$u.AbstractMutableCollection=Zi,$u.AbstractMutableList=Ji,nn.SimpleEntry_init_trwmqg$=function(t,e){return e=e||Object.create(on.prototype),on.call(e,t.key,t.value),e},nn.SimpleEntry=on,$u.AbstractMutableMap=nn,$u.AbstractMutableSet=un,$u.ArrayList_init_mqih57$=dn,$u.ArrayList=pn,$u.sortArrayWith_6xblhi$=fn,Object.defineProperty(mn,"HashCode",{get:xn}),$u.EqualityComparator=mn,$u.HashMap_init_va96d4$=kn,$u.HashMap_init_q3lmfv$=Sn,$u.HashMap_init_xf5xz2$=Cn,$u.HashMap_init_bwtc7$=Nn,$u.HashMap_init_73mtqc$=function(t,e){return Sn(e=e||Object.create(wn.prototype)),e.putAll_a2k3zr$(t),e},$u.HashMap=wn,$u.HashSet_init_mqih57$=function(t,e){return e=e||Object.create(En.prototype),un.call(e),En.call(e),e.map_8be2vx$=Nn(t.size),e.addAll_brywnq$(t),e},$u.HashSet_init_2wofer$=Tn,$u.HashSet_init_ww73n8$=Pn,$u.HashSet_init_nn01ho$=On,$u.HashSet=En,$u.InternalHashCodeMap=Mn,$u.InternalMap=An,$u.InternalStringMap=In,$u.LinkedHashMap_init_xf5xz2$=Bn,$u.LinkedHashMap_init_73mtqc$=function(t,e){return Sn(e=e||Object.create(Rn.prototype)),Rn.call(e),e.map_97q5dv$_0=Sn(),e.putAll_a2k3zr$(t),e},$u.LinkedHashMap=Rn,$u.LinkedHashSet_init_mqih57$=Hn,$u.LinkedHashSet_init_2wofer$=Wn,$u.LinkedHashSet=Vn,$u.RandomAccess=Xn;var Nu=mu.io||(mu.io={});Nu.BaseOutput=Yn,Nu.NodeJsOutput=Zn,Nu.BufferedOutput=Jn,Nu.BufferedOutputToConsoleLog=Qn,Nu.println=function(){yn.println()},Nu.println_s8jyv4$=function(t){yn.println_s8jyv4$(t)},Nu.print_s8jyv4$=function(t){yn.print_s8jyv4$(t)},Su.SafeContinuation_init_wj8d80$=function(t,e){return e=e||Object.create(to.prototype),to.call(e,t,ca()),e},Su.SafeContinuation=to,p.throwNPE=function(t){throw new Si(t)},p.throwCCE=io,p.throwISE=no,p.throwUPAE=function(t){throw ji("lateinit property "+t+" has not been initialized")},Nu.Serializable=oo,zu.log_lu1900$=function(t,e){return e<=0||1===e?l.NaN:Math.log(t)/Math.log(e)},zu.round_14dthe$=function(t){if(t%.5!=0)return Math.round(t);var e=c.floor(t);return e%2==0?e:c.ceil(t)},zu.nextDown_yrwdxr$=ro,zu.roundToInt_yrwdxr$=function(t){if(so(t))throw yi("Cannot round NaN value.");return t>2147483647?2147483647:t<-2147483648?-2147483648:$(Math.round(t))},zu.roundToLong_yrwdxr$=function(e){if(so(e))throw yi("Cannot round NaN value.");return e>v.toNumber()?v:e<y.toNumber()?y:t.Long.fromNumber(Math.round(e))},zu.abs_za3lpa$=function(t){return t<0?0|-t:t},zu.abs_s8cxhz$=function(t){return t.toNumber()<0?t.unaryMinus():t},mu.isNaN_yrwdxr$=so,mu.isNaN_81szk$=ao,mu.isInfinite_yrwdxr$=lo,mu.isInfinite_81szk$=uo,mu.isFinite_yrwdxr$=po,mu.isFinite_81szk$=function(t){return!uo(t)&&!ao(t)},vu.defaultPlatformRandom_8be2vx$=co,vu.doubleFromParts_6xvm5r$=ho;var Eu=mu.reflect||(mu.reflect={});wu.get_js_1yb8b7$=function(e){var i;return(t.isType(i=e,mo)?i:io()).jClass},Eu.KCallable=fo,Eu.KClass=_o;var Tu=Eu.js||(Eu.js={}),Pu=Tu.internal||(Tu.internal={});Pu.KClassImpl=mo,Pu.SimpleKClassImpl=$o,Pu.PrimitiveKClassImpl=yo,Object.defineProperty(Pu,"NothingKClassImpl",{get:bo}),Pu.ErrorKClass=xo,Eu.KProperty=wo,Eu.KMutableProperty=zo,Eu.KProperty0=ko,Eu.KMutableProperty0=So,Eu.KProperty1=Co,Eu.KMutableProperty1=No,Eu.KType=Eo,p.createKType=function(t,e,i){return new To(t,Li(e),i)},Pu.KTypeImpl=To,Pu.prefixString_knho38$=Po,Object.defineProperty(Pu,"PrimitiveClasses",{get:er}),p.getKClass=ir,p.getKClassM=nr,p.getKClassFromExpression=function(e){var i;switch(typeof e){case"string":i=er().stringClass;break;case"number":i=(0|e)===e?er().intClass:er().doubleClass;break;case"boolean":i=er().booleanClass;break;case"function":i=er().functionClass(e.length);break;default:if(t.isBooleanArray(e))i=er().booleanArrayClass;else if(t.isCharArray(e))i=er().charArrayClass;else if(t.isByteArray(e))i=er().byteArrayClass;else if(t.isShortArray(e))i=er().shortArrayClass;else if(t.isIntArray(e))i=er().intArrayClass;else if(t.isLongArray(e))i=er().longArrayClass;else if(t.isFloatArray(e))i=er().floatArrayClass;else if(t.isDoubleArray(e))i=er().doubleArrayClass;else if(t.isType(e,_o))i=ir(_o);else if(t.isArray(e))i=er().arrayClass;else{var n=Object.getPrototypeOf(e).constructor;i=n===Object?er().anyClass:n===Error?er().throwableClass:or(n)}}return i},p.getKClass1=or,xu.Appendable=rr,xu.CharacterCodingException=sr,xu.StringBuilder_init_za3lpa$=lr,xu.StringBuilder=ar,xu.isWhitespace_myv2d0$=pr,xu.isHighSurrogate_myv2d0$=cr,xu.isLowSurrogate_myv2d0$=hr,xu.toBoolean_5cw0du$=function(t){var e=null!=t;return e&&(e=r(t.toLowerCase(),"true")),e},xu.toByte_pdl1vz$=function(t){var e;return null!=(e=ja(t))?e:Ba(t)},xu.toShort_pdl1vz$=function(t){var e;return null!=(e=Ia(t))?e:Ba(t)},xu.toInt_pdl1vz$=function(t){var e;return null!=(e=La(t))?e:Ba(t)},xu.toInt_6ic1pp$=function(t,e){var i;return null!=(i=Da(t,e))?i:Ba(t)},xu.toLong_pdl1vz$=function(t){var e;return null!=(e=qa(t))?e:Ba(t)},xu.toDouble_pdl1vz$=function(t){var e=+t;return(so(e)&&!dr(t)||0===e&&gr(t))&&Ba(t),e},xu.toDoubleOrNull_pdl1vz$=function(t){var e=+t;return so(e)&&!dr(t)||0===e&&gr(t)?null:e},xu.checkRadix_za3lpa$=fr,xu.digitOf_xvg9q0$=_r,xu.concatToString_355ntz$=mr,xu.concatToString_wlitf7$=$r,xu.decodeToString_964n91$=function(t){return Sr(t,0,t.length,!1)},xu.compareTo_7epoxm$=yr,xu.startsWith_7epoxm$=function(t,e,i){return void 0===i&&(i=!1),i?br(t,0,e,0,e.length,i):t.startsWith(e,0)},xu.endsWith_7epoxm$=function(t,e,i){return void 0===i&&(i=!1),i?br(t,t.length-e.length|0,e,0,e.length,i):t.endsWith(e)},xu.matches_rjktp$=vr,xu.isBlank_gw00vp$=gr,xu.equals_igcy3c$=function(t,e,i){var n;if(void 0===i&&(i=!1),null==t)n=null==e;else{var o;if(i){var s=null!=e;s&&(s=r(t.toLowerCase(),e.toLowerCase())),o=s}else o=r(t,e);n=o}return n},xu.regionMatches_h3ii2q$=br,xu.capitalize_pdl1vz$=function(t){return t.length>0?t.substring(0,1).toUpperCase()+t.substring(1):t},xu.decodeUtf8_bndkiu$=Sr,$u.AbstractCollection=Cr,Object.defineProperty(Nr,"Companion",{get:Pr}),$u.AbstractList=Nr,Object.defineProperty(Or,"Companion",{get:Dr}),$u.AbstractMap=Or,Object.defineProperty(qr,"Companion",{get:Ur}),$u.AbstractSet=qr,Object.defineProperty($u,"EmptyIterator",{get:Hr}),Object.defineProperty($u,"EmptyList",{get:Xr}),$u.asCollection_vj43ah$=Yr,$u.listOf_i5x0yv$=function(t){return t.length>0?Li(t):Jr()},$u.mutableListOf_i5x0yv$=function(t){return 0===t.length?cn():dn(new Zr(t,!0))},$u.arrayListOf_i5x0yv$=Qr,$u.get_indices_gzk92b$=function(t){return new be(0,t.size-1|0)},$u.shuffled_4173s5$=function(t,e){var i=pt(t);return at(i,e),i},$u.optimizeReadOnlyList_qzupvv$=es,gu.compareValues_s00gnj$=function(e,i){var n;return e===i?0:null==e?-1:null==i?1:t.compareTo(t.isComparable(n=e)?n:io(),i)},$u.throwIndexOverflow=is,$u.IndexedValue=os,$u.IndexingIterable=rs,$u.IndexingIterator=as,$u.getOrImplicitDefault_t9ocha$=ls,$u.emptyMap_q3lmfv$=_s,$u.mapOf_qfcya0$=function(t){return t.length>0?gs(t,Un(t.length)):_s()},$u.mutableMapOf_qfcya0$=function(t){var e=Un(t.length);return $s(e,t),e},$u.hashMapOf_qfcya0$=ms,$u.getValue_t9ocha$=function(t,e){return ls(t,e)},$u.putAll_5gv49o$=$s,$u.putAll_cweazw$=ys,$u.toMap_6hr0sd$=function(e){var i;if(t.isType(e,Mt)){switch(e.size){case 0:i=_s();break;case 1:i=Wi(t.isType(e,At)?e.get_za3lpa$(0):e.iterator().next());break;default:i=vs(e,Un(e.size))}return i}return bs(vs(e,Fn()))},$u.toMap_jbpz7q$=vs,$u.toMap_ujwnei$=gs,$u.optimizeReadOnlyMap_1vp4qn$=bs,$u.addAll_ye1y7v$=function(t,e){return t.addAll_brywnq$(Li(e))},$u.removeAll_uhyeqt$=xs,$u.removeAll_qafx1e$=zs,bu.sequence_o0x0bg$=function(t){return new Ss((e=t,function(){return Cs(e)}));var e},bu.iterator_o0x0bg$=Cs,bu.SequenceScope=Ns,bu.TransformingSequence=Ts,bu.FlatteningSequence=Os,Object.defineProperty($u,"EmptySet",{get:Is}),$u.emptySet_287e2$=Rs,$u.setOf_i5x0yv$=function(t){return t.length>0?tt(t):Rs()},$u.mutableSetOf_i5x0yv$=function(t){return J(t,Kn(t.length))},$u.hashSetOf_i5x0yv$=Ls,Su.Continuation=Ds,mu.Result=dl,Su.startCoroutine_x18nsh$=function(t,e){pi(li(t,e)).resumeWith_tl1gpc$(new dl(Pe()))},Su.startCoroutine_3a617i$=function(t,e,i){pi(ui(t,e,i)).resumeWith_tl1gpc$(new dl(Pe()))},Cu.get_COROUTINE_SUSPENDED=aa,Object.defineProperty(qs,"Key",{get:Us}),Su.ContinuationInterceptor=qs,Vs.Key=Hs,Vs.Element=Ws,Su.CoroutineContext=Vs,Su.AbstractCoroutineContextElement=Ks,Su.AbstractCoroutineContextKey=Xs,Object.defineProperty(Su,"EmptyCoroutineContext",{get:Js}),Su.CombinedContext=Qs,Object.defineProperty(Cu,"COROUTINE_SUSPENDED",{get:aa}),Object.defineProperty(la,"COROUTINE_SUSPENDED",{get:pa}),Object.defineProperty(la,"UNDECIDED",{get:ca}),Object.defineProperty(la,"RESUMED",{get:ha}),Cu.CoroutineSingletons=la,Object.defineProperty(da,"Default",{get:ma}),vu.Random_za3lpa$=$a,vu.fastLog2_kcn2v3$=ya,vu.takeUpperBits_b6l1hq$=va,vu.checkRangeBounds_6xvm5r$=ga,vu.checkRangeBounds_cfj5zr$=ba,vu.checkRangeBounds_sdh6z7$=xa,vu.boundsErrorMessage_dgzutr$=wa,vu.XorWowRandom_init_6xvm5r$=ka,vu.XorWowRandom=za,yu.checkStepIsPositive_44uddq$=Ca,Eu.KClassifier=Na,xu.appendElement_k2zgzt$=Ea,xu.equals_4lte5s$=Ta,xu.trimIndent_pdl1vz$=function(t){return Pa(t,"")},xu.replaceIndent_rjktp$=Pa,xu.toByteOrNull_pdl1vz$=ja,xu.toByteOrNull_6ic1pp$=Aa,xu.toShortOrNull_pdl1vz$=Ia,xu.toShortOrNull_6ic1pp$=Ra,xu.toIntOrNull_pdl1vz$=La,xu.toIntOrNull_6ic1pp$=Da,xu.toLongOrNull_pdl1vz$=qa,xu.toLongOrNull_6ic1pp$=Fa,xu.numberFormatError_y4putb$=Ba,xu.substring_fc3b62$=function(t,e){return t.substring(e.start,e.endInclusive+1|0)},xu.substring_i511yc$=Ha,xu.substringBefore_8cymmc$=function(t,e,i){void 0===i&&(i=t);var n=Za(t,e);return-1===n?i:t.substring(0,n)},xu.regionMatchesImpl_4c7s8r$=Wa,xu.indexOfAny_junqau$=Ka,xu.lastIndexOfAny_junqau$=Xa,xu.indexOf_8eortd$=Za,xu.indexOf_l5u8uk$=Ja,xu.lastIndexOf_8eortd$=function(e,i,n,o){return void 0===n&&(n=Ga(e)),void 0===o&&(o=!1),o||"string"!=typeof e?Xa(e,t.charArrayOf(i),n,o):e.lastIndexOf(String.fromCharCode(i),n)},xu.lastIndexOf_l5u8uk$=Qa,xu.contains_sgbm27$=function(t,e,i){return void 0===i&&(i=!1),Za(t,e,void 0,i)>=0},xu.splitToSequence_ip8yn$=ol,xu.split_ip8yn$=function(e,i,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=0),1===i.length){var r=i[0];if(0!==r.length)return function(e,i,n,o){if(!(o>=0))throw yi(("Limit must be non-negative, but was "+o+".").toString());var r=0,s=Ja(e,i,r,n);if(-1===s||1===o)return Gi(e.toString());var a=o>0,l=hn(a?gt(o,10):10);do{if(l.add_11rb$(t.subSequence(e,r,s).toString()),r=s+i.length|0,a&&l.size===(o-1|0))break;s=Ja(e,i,r,n)}while(-1!==s);return l.add_11rb$(t.subSequence(e,r,e.length).toString()),l}(e,r,n,o)}var s,a=Ct(nl(e,i,void 0,n,o)),l=hn(ss(a,10));for(s=a.iterator();s.hasNext();){var u=s.next();l.add_11rb$(Ha(e,u))}return l},xu.lineSequence_gw00vp$=rl,xu.lines_gw00vp$=sl,mu.Lazy=al,Object.defineProperty(mu,"UNINITIALIZED_VALUE",{get:pl}),mu.UnsafeLazyImpl=cl,mu.InitializedLazyImpl=hl,mu.createFailure_tcv7n7$=yl,Object.defineProperty(dl,"Companion",{get:ml}),dl.Failure=$l,mu.throwOnFailure_iacion$=vl,mu.NotImplementedError=gl,mu.Pair=bl,mu.to_ujzrz7$=xl,mu.Triple=wl,Object.defineProperty(zl,"Companion",{get:Cl}),Object.defineProperty(Nl,"Companion",{get:Pl}),mu.uintCompare_vux9f0$=pu,mu.uintDivide_oqfnby$=function(e,i){return new Nl(t.Long.fromInt(e.data).and(w).div(t.Long.fromInt(i.data).and(w)).toInt())},mu.uintRemainder_oqfnby$=hu,mu.uintToDouble_za3lpa$=function(t){return(2147483647&t)+2*(t>>>31<<30)},Object.defineProperty(Ol,"Companion",{get:Al}),yu.UIntRange=Ol,Object.defineProperty(Il,"Companion",{get:Dl}),yu.UIntProgression=Il,$u.UIntIterator=Fl,$u.ULongIterator=Bl,Object.defineProperty(Ul,"Companion",{get:Hl}),mu.ulongCompare_3pjtqy$=cu,mu.ulongDivide_jpm79w$=function(e,i){var n=e.data,o=i.data;if(o.toNumber()<0)return cu(e.data,i.data)<0?new Ul(u):new Ul(C);if(n.toNumber()>=0)return new Ul(n.div(o));var r=n.shiftRightUnsigned(1).div(o).shiftLeft(1),s=n.subtract(r.multiply(o));return new Ul(r.add(t.Long.fromInt(cu(new Ul(s).data,new Ul(o).data)>=0?1:0)))},mu.ulongRemainder_jpm79w$=du,mu.ulongToDouble_s8cxhz$=function(t){return 2048*t.shiftRightUnsigned(11).toNumber()+t.and(U).toNumber()},Object.defineProperty(Wl,"Companion",{get:Yl}),yu.ULongRange=Wl,Object.defineProperty(Zl,"Companion",{get:tu}),yu.ULongProgression=Zl,ku.getProgressionLastElement_fjk8us$=ou,ku.getProgressionLastElement_15zasp$=ru,Object.defineProperty(su,"Companion",{get:uu}),mu.ulongToString_8e33dg$=fu,mu.ulongToString_plstum$=_u,Ft.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,Or.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,nn.prototype.remove_xwzc9p$=Ft.prototype.remove_xwzc9p$,Mn.prototype.createJsMap=An.prototype.createJsMap,In.prototype.createJsMap=An.prototype.createJsMap,us.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,ps.prototype.remove_xwzc9p$=Ft.prototype.remove_xwzc9p$,ps.prototype.getOrDefault_xwzc9p$=Ft.prototype.getOrDefault_xwzc9p$,us.prototype.getOrDefault_xwzc9p$,cs.prototype.remove_xwzc9p$=ps.prototype.remove_xwzc9p$,cs.prototype.getOrDefault_xwzc9p$=ps.prototype.getOrDefault_xwzc9p$,hs.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,Ws.prototype.plus_1fupul$=Vs.prototype.plus_1fupul$,qs.prototype.fold_3cc69b$=Ws.prototype.fold_3cc69b$,qs.prototype.plus_1fupul$=Ws.prototype.plus_1fupul$,Ks.prototype.get_j3r2sn$=Ws.prototype.get_j3r2sn$,Ks.prototype.fold_3cc69b$=Ws.prototype.fold_3cc69b$,Ks.prototype.minusKey_yeqjby$=Ws.prototype.minusKey_yeqjby$,Ks.prototype.plus_1fupul$=Ws.prototype.plus_1fupul$,Qs.prototype.plus_1fupul$=Vs.prototype.plus_1fupul$,Sa.prototype.contains_mef7kx$=me.prototype.contains_mef7kx$,Sa.prototype.isEmpty=me.prototype.isEmpty,e=3.141592653589793,oi=null;var Ou=void 0!==i&&i.versions&&!!i.versions.node;yn=Ou?new Zn(i.stdout):new Qn,new eo(Js(),(function(e){var i;return vl(e),null==(i=e.value)||t.isType(i,k)||P(),Ee})),vn=c.pow(2,-26),gn=c.pow(2,-53),Jo=t.newArray(0,null),new Fi((function(t,e){return yr(t,e,!0)})),new Int8Array([_(239),_(191),_(189)]),Qo=65533,new dl(aa())}()})?n.apply(e,o):n)||(t.exports=r)}).call(this,i(3))},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],p=!1,c=-1;function h(){p&&l&&(p=!1,l.length?u=l.concat(u):c=-1,u.length&&d())}function d(){if(!p){var t=a(h);p=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,p=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function _(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new f(t,e)),1!==u.length||p||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){(function(n){var o,r,s;r=[e,i(1)],void 0===(s="function"==typeof(o=function(t,e){"use strict";var i,o=Object,r=e.throwCCE,s=e.Kind.CLASS,a=e.kotlin.coroutines.Continuation,l=(e.kotlin.Annotation,e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED),u=e.kotlin.coroutines.CoroutineImpl,p=(e.kotlin.collections.emptyList_287e2$,e.kotlin.Unit),c=e.throwUPAE,h=(e.kotlin.collections.copyToArray,e.kotlin.coroutines.intrinsics.intercepted_f9mg25$),d=e.kotlin.collections.ArrayList_init_ww73n8$,f=e.kotlin.Result,_=e.kotlin.coroutines,m=e.kotlin.coroutines.intrinsics.createCoroutineUnintercepted_3a617i$,$=e.kotlin.coroutines.ContinuationInterceptor,y=e.equals,v=e.defineInlineFunction,g=e.wrapFunction,b=e.kotlin.IllegalStateException_init_pdl1vj$,x=e.Kind.INTERFACE,w=Error,z=e.toString,k=e.Kind.OBJECT,S=e.kotlin.createFailure_tcv7n7$,C=e.kotlin.coroutines.AbstractCoroutineContextKey,N=e.kotlin.coroutines.AbstractCoroutineContextElement,E=e.kotlin.RuntimeException,T=e.kotlin.coroutines.CoroutineContext.Key,P=e.kotlin.coroutines.CoroutineContext.Element,O=e.kotlin.coroutines.startCoroutine_x18nsh$,M=e.kotlin.coroutines.startCoroutine_3a617i$,j=e.kotlin.Enum,A=e.throwISE,I=e.Long.ONE,R=e.Long.ZERO,L=e.Long.MAX_VALUE,D=new e.Long(0,1),q=(e.Long.fromInt(1e6),new e.Long(2077252342,2147),new e.Long(-1,1073741823),e.ensureNotNull),F=(e.kotlin.Comparable,e.kotlin.IllegalArgumentException_init_pdl1vj$),B=e.kotlin.Error,U=e.kotlin.IllegalStateException,V=e.kotlin.sequences.sequence_o0x0bg$,G=e.kotlin.collections.ArrayList,H=e.kotlin.text.StringBuilder_init,W=e.kotlin.UnsupportedOperationException,K=e.kotlin.UnsupportedOperationException_init_pdl1vj$,X=Function,Y=Math,Z=e.kotlin.NoSuchElementException,J=e.hashCode,Q=(e.kotlin.collections.IndexedValue,e.kotlin.IndexOutOfBoundsException,e.kotlin.collections.LinkedHashMap_init_q3lmfv$,e.kotlin.collections.ArrayList_init_287e2$),tt=(e.kotlin.collections.HashSet_init_287e2$,e.kotlin.collections.LinkedHashSet_init_287e2$,e.kotlin.Pair,e.kotlin.to_ujzrz7$,e.kotlin.collections.indexOf_mjy6jw$,e.kotlin.collections.arrayCopy),et=(e.kotlin.text.trimIndent_pdl1vz$,e.kotlin.ArithmeticException,new e.Long(0,805306368),e.Long.fromInt(1073741823),new e.Long(-1073741824,268435455),new e.Long(0,268435456),new e.Long(0,536870912),e.kotlin.text.toBoolean_5cw0du$,e.kotlin.text.toLongOrNull_pdl1vz$,e.kotlin.coroutines.intrinsics.createCoroutineUnintercepted_x18nsh$),it=e.kotlin.collections.shuffle_vvxzk3$,nt=e.Long.fromInt(2147483647),ot=e.kotlin.ranges.coerceIn_ekzx8g$,rt=e.kotlin.collections.HashSet_init_ww73n8$,st=(e.kotlin.collections.get_lastIndex_55thoc$,e.kotlin.NoSuchElementException_init,e.kotlin.collections.MutableIterator,e.kotlin.collections.AbstractMutableList,e.kotlin.UnsupportedOperationException_init);function at(t,e){void 0===e&&(e=!0),Re.call(this,e),this.parentContext=t,this.context_p8rm81$_0=this.parentContext.plus_1fupul$(this)}function lt(t,e){at.call(this,t,e)}function ut(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function pt(t,e){lt.call(this,t,!1),this.continuation_0=m(e,this,this)}function ct(t,e){at.call(this,t,e)}function ht(t,e){ct.call(this,t,!1),this.continuation_0=m(e,this,this)}function dt(t,e){Qn.call(this,t,e)}function ft(t,e){Qn.call(this,t,e),this._decision_0=0}function _t(){}function mt(t){var i,n;return e.isType(t,Vn)?null==(n=null!=(i=t.claimReusableCancellableContinuation())&&i.resetState_8be2vx$()?i:null)?new bt(t,0):n:new bt(t,0)}function $t(t,e){t.invokeOnCancellation_f05bi3$(new vt(e))}function yt(t,e){t.invokeOnCancellation_f05bi3$(new gt(e))}function vt(t){St.call(this),this.node_0=t}function gt(t){St.call(this),this.handle_0=t}function bt(t,e){Xn.call(this,e),this.delegate_dhbmku$_0=t,this.context_xycjfy$_0=this.delegate.context,this._decision_0=0,this._state_0=kt(),this._parentHandle_0=null}function xt(){}function wt(){zt=this}at.prototype=Object.create(Re.prototype),at.prototype.constructor=at,St.prototype=Object.create(Co.prototype),St.prototype.constructor=St,So.prototype=Object.create(mr.prototype),So.prototype.constructor=So,Xe.prototype=Object.create(So.prototype),Xe.prototype.constructor=Xe,lt.prototype=Object.create(at.prototype),lt.prototype.constructor=lt,pt.prototype=Object.create(lt.prototype),pt.prototype.constructor=pt,ct.prototype=Object.create(at.prototype),ct.prototype.constructor=ct,ht.prototype=Object.create(ct.prototype),ht.prototype.constructor=ht,Qn.prototype=Object.create(at.prototype),Qn.prototype.constructor=Qn,dt.prototype=Object.create(Qn.prototype),dt.prototype.constructor=dt,ft.prototype=Object.create(Qn.prototype),ft.prototype.constructor=ft,vt.prototype=Object.create(St.prototype),vt.prototype.constructor=vt,gt.prototype=Object.create(St.prototype),gt.prototype.constructor=gt,Xn.prototype=Object.create(pr.prototype),Xn.prototype.constructor=Xn,bt.prototype=Object.create(Xn.prototype),bt.prototype.constructor=bt,Ct.prototype=Object.create(St.prototype),Ct.prototype.constructor=Ct,Pt.prototype=Object.create(Re.prototype),Pt.prototype.constructor=Pt,Lt.prototype=Object.create(Rt.prototype),Lt.prototype.constructor=Lt,qt.prototype=Object.create(C.prototype),qt.prototype.constructor=qt,Dt.prototype=Object.create(N.prototype),Dt.prototype.constructor=Dt,ee.prototype=Object.create(j.prototype),ee.prototype.constructor=ee,he.prototype=Object.create(Dt.prototype),he.prototype.constructor=he,Vo.prototype=Object.create(he.prototype),Vo.prototype.constructor=Vo,me.prototype=Object.create(Vo.prototype),$e.prototype=Object.create(E.prototype),$e.prototype.constructor=$e,ye.prototype=Object.create(B.prototype),ye.prototype.constructor=ye,Fe.prototype=Object.create(Xe.prototype),Fe.prototype.constructor=Fe,Be.prototype=Object.create(bt.prototype),Be.prototype.constructor=Be,We.prototype=Object.create(Re.prototype),We.prototype.constructor=We,br.prototype=Object.create(mr.prototype),br.prototype.constructor=br,Ye.prototype=Object.create(br.prototype),Ye.prototype.constructor=Ye,Je.prototype=Object.create(Xe.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Xe.prototype),Qe.prototype.constructor=Qe,ti.prototype=Object.create(Xe.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Xe.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(Xe.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Xe.prototype),ni.prototype.constructor=ni,oi.prototype=Object.create(ni.prototype),oi.prototype.constructor=oi,ri.prototype=Object.create(ni.prototype),ri.prototype.constructor=ri,si.prototype=Object.create(ni.prototype),si.prototype.constructor=si,ai.prototype=Object.create(Dt.prototype),ai.prototype.constructor=ai,li.prototype=Object.create(N.prototype),Ho.prototype=Object.create(U.prototype),Ho.prototype.constructor=Ho,ui.prototype=Object.create(Ho.prototype),ui.prototype.constructor=ui,pi.prototype=Object.create(Dt.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(N.prototype),di.prototype.constructor=di,vr.prototype=Object.create(Un.prototype),vr.prototype.constructor=vr,$r.prototype=Object.create(vr.prototype),$r.prototype.constructor=$r,Si.prototype=Object.create($r.prototype),Si.prototype.constructor=Si,yr.prototype=Object.create(vr.prototype),yr.prototype.constructor=yr,Ei.prototype=Object.create(yr.prototype),Ei.prototype.constructor=Ei,Vi.prototype=Object.create(mr.prototype),Vi.prototype.constructor=Vi,Pi.prototype=Object.create(Vi.prototype),Pi.prototype.constructor=Pi,Oi.prototype=Object.create(Vi.prototype),Oi.prototype.constructor=Oi,Ai.prototype=Object.create(yr.prototype),Ai.prototype.constructor=Ai,Di.prototype=Object.create(St.prototype),Di.prototype.constructor=Di,Ki.prototype=Object.create(mr.prototype),Ki.prototype.constructor=Ki,Fi.prototype=Object.create(Ki.prototype),Fi.prototype.constructor=Fi,Bi.prototype=Object.create(Ki.prototype),Bi.prototype.constructor=Bi,Ui.prototype=Object.create(Ki.prototype),Ui.prototype.constructor=Ui,Mi.prototype=Object.create(ki.prototype),Mi.prototype.constructor=Mi,Hi.prototype=Object.create(Vi.prototype),Hi.prototype.constructor=Hi,Wi.prototype=Object.create(Vi.prototype),Wi.prototype.constructor=Wi,Xi.prototype=Object.create(Mi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(at.prototype),dn.prototype=Object.create(U.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(Z.prototype),fn.prototype.constructor=fn,_n.prototype=Object.create(at.prototype),$n.prototype=Object.create(Mi.prototype),$n.prototype.constructor=$n,In.prototype=Object.create(Mi.prototype),In.prototype.constructor=In,Ln.prototype=Object.create(Mi.prototype),Ln.prototype.constructor=Ln,Bn.prototype=Object.create(Fn.prototype),Bn.prototype.constructor=Bn,Vn.prototype=Object.create(Xn.prototype),Vn.prototype.constructor=Vn,go.prototype=Object.create(ni.prototype),go.prototype.constructor=go,bo.prototype=Object.create(Fn.prototype),bo.prototype.constructor=bo,xo.prototype=Object.create(Bn.prototype),xo.prototype.constructor=xo,wo.prototype=Object.create(mr.prototype),wo.prototype.constructor=wo,vo.prototype=Object.create(br.prototype),vo.prototype.constructor=vo,Fo.prototype=Object.create(ai.prototype),Fo.prototype.constructor=Fo,Uo.prototype=Object.create(he.prototype),Uo.prototype.constructor=Uo,Ko.prototype=Object.create(Ho.prototype),Ko.prototype.constructor=Ko,lr.prototype=Object.create(qn.prototype),lr.prototype.constructor=lr,Zo.prototype=Object.create(lr.prototype),Zo.prototype.constructor=Zo,Yo.prototype=Object.create(Dt.prototype),Yo.prototype.constructor=Yo,Jo.prototype=Object.create(Yo.prototype),Jo.prototype.constructor=Jo,er.prototype=Object.create(Yo.prototype),er.prototype.constructor=er,or.prototype=Object.create(St.prototype),or.prototype.constructor=or,rr.prototype=Object.create(Dt.prototype),rr.prototype.constructor=rr,ar.prototype=Object.create(lr.prototype),ar.prototype.constructor=ar,dr.prototype=Object.create(Ho.prototype),dr.prototype.constructor=dr,gr.prototype=Object.create(Fn.prototype),gr.prototype.constructor=gr,Object.defineProperty(at.prototype,"context",{configurable:!0,get:function(){return this.context_p8rm81$_0}}),Object.defineProperty(at.prototype,"coroutineContext",{configurable:!0,get:function(){return this.context}}),Object.defineProperty(at.prototype,"isActive",{configurable:!0,get:function(){return e.callGetter(this,Re.prototype,"isActive")}}),at.prototype.initParentJob_8be2vx$=function(){this.initParentJobInternal_8vd9i7$(this.parentContext.get_j3r2sn$(xe()))},at.prototype.onStart=function(){},at.prototype.onStartInternal=function(){this.onStart()},at.prototype.onCompleted_11rb$=function(t){},at.prototype.onCancelled_z1nxw$=function(t,e){},at.prototype.cancellationExceptionMessage=function(){return Io(this)+" was cancelled"},at.prototype.onCompletionInternal_s8jyv4$=function(t){var i;e.isType(t,Rt)?this.onCancelled_z1nxw$(t.cause,t.handled):this.onCompleted_11rb$(null==(i=t)||e.isType(i,o)?i:r())},at.prototype.resumeWith_tl1gpc$=function(t){var e=this.makeCompletingOnce_8ea4ql$(jt(t));e!==Ee&&this.afterResume_s8jyv4$(e)},at.prototype.afterResume_s8jyv4$=function(t){this.afterCompletion_s8jyv4$(t)},at.prototype.handleOnCompletionException_tcv7n7$=function(t){Vt(this.context,t)},at.prototype.nameString=function(){var t;return this.context,null==(t=null)?Re.prototype.nameString.call(this):'"'+t+'":'+Re.prototype.nameString.call(this)},at.prototype.start_cfq2d3$=function(t,e){this.initParentJob_8be2vx$(),t.invoke_810yno$(e,this)},at.prototype.start_b5ul0p$=function(t,e,i){this.initParentJob_8be2vx$(),t.invoke_3o0yor$(i,e,this)},at.$metadata$={kind:s,simpleName:"AbstractCoroutine",interfaces:[te,a,Re,ve]},lt.prototype.getCompleted=function(){var t;return null==(t=this.getCompletedInternal_8be2vx$())||e.isType(t,o)?t:r()},ut.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},ut.prototype=Object.create(u.prototype),ut.prototype.constructor=ut,ut.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.$this.awaitInternal_8be2vx$(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:return null==(t=this.result_0)||e.isType(t,o)?t:r();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},lt.prototype.await=function(t,e){var i=new ut(this,t);return e?i:i.doResume(null)},Object.defineProperty(lt.prototype,"onAwait",{configurable:!0,get:function(){return this}}),lt.prototype.registerSelectClause1_o3xas4$=function(t,e){this.registerSelectClause1Internal_u6kgbh$(t,e)},lt.$metadata$={kind:s,simpleName:"DeferredCoroutine",interfaces:[_o,le,at]},pt.prototype.onStart=function(){ro(this.continuation_0,this)},pt.$metadata$={kind:s,simpleName:"LazyDeferredCoroutine",interfaces:[lt]},v("kotlinx-coroutines-core.kotlinx.coroutines.invoke_5xrhu2$",g((function(){var i=t.kotlinx.coroutines.withContext_i5cbzn$;return function(t,n,o){return e.suspendCall(i(t,n,e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),ct.prototype.handleJobException_tcv7n7$=function(t){return Vt(this.context,t),!0},ct.$metadata$={kind:s,simpleName:"StandaloneCoroutine",interfaces:[at]},ht.prototype.onStart=function(){ro(this.continuation_0,this)},ht.$metadata$={kind:s,simpleName:"LazyStandaloneCoroutine",interfaces:[ct]},dt.prototype.afterResume_s8jyv4$=function(t){var e=It(t,this.uCont);this.uCont.context,this.uCont.resumeWith_tl1gpc$(e)},dt.$metadata$={kind:s,simpleName:"UndispatchedCoroutine",interfaces:[Qn]},ft.prototype.trySuspend_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=1,1))return!0;break;case 2:return!1;default:throw b("Already suspended".toString())}},ft.prototype.tryResume_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=2,1))return!0;break;case 1:return!1;default:throw b("Already resumed".toString())}},ft.prototype.afterCompletion_s8jyv4$=function(t){this.afterResume_s8jyv4$(t)},ft.prototype.afterResume_s8jyv4$=function(t){this.tryResume_0()||Gn(h(this.uCont),It(t,this.uCont))},ft.prototype.getResult=function(){var t;if(this.trySuspend_0())return l;var i=Ge(this.state_8be2vx$);if(e.isType(i,Rt))throw i.cause;return null==(t=i)||e.isType(t,o)?t:r()},ft.$metadata$={kind:s,simpleName:"DispatchedCoroutine",interfaces:[Qn]},_t.prototype.tryResume_19pj23$=function(t,e,i){return void 0===e&&(e=null),i?i(t,e):this.tryResume_19pj23$$default(t,e)},_t.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},_t.$metadata$={kind:x,simpleName:"CancellableContinuation",interfaces:[a]},v("kotlinx-coroutines-core.kotlinx.coroutines.suspendCancellableCoroutine_o6sdx9$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,o){var r;return e.suspendCall((r=t,function(t){var e=new n(i(t),1);return e.initCancellability(),r(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutine_o6sdx9$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,o){var r;return e.suspendCall((r=t,function(t){var e=new n(i(t),0);return r(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutineReusable_mkkzkw$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.getOrCreateCancellableContinuation_3j0xf1$;return function(t,o){var r;return e.suspendCall((r=t,function(t){var e=n(i(t));return r(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutine_i8nyj0$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,o,r){var s;return void 0===t&&(t=!1),e.suspendCall((s=o,function(t){var e=new n(i(t),0);return s(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),vt.prototype.invoke=function(t){this.node_0.remove()},vt.prototype.toString=function(){return"RemoveOnCancel["+this.node_0+"]"},vt.$metadata$={kind:s,simpleName:"RemoveOnCancel",interfaces:[St]},gt.prototype.invoke=function(t){this.handle_0.dispose()},gt.prototype.toString=function(){return"DisposeOnCancel["+this.handle_0+"]"},gt.$metadata$={kind:s,simpleName:"DisposeOnCancel",interfaces:[St]},Object.defineProperty(bt.prototype,"delegate",{get:function(){return this.delegate_dhbmku$_0}}),Object.defineProperty(bt.prototype,"context",{configurable:!0,get:function(){return this.context_xycjfy$_0}}),Object.defineProperty(bt.prototype,"parentHandle_0",{configurable:!0,get:function(){return this._parentHandle_0},set:function(t){this._parentHandle_0=t}}),Object.defineProperty(bt.prototype,"state_8be2vx$",{configurable:!0,get:function(){return this._state_0}}),Object.defineProperty(bt.prototype,"isActive",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,xt)}}),Object.defineProperty(bt.prototype,"isCompleted",{configurable:!0,get:function(){return!e.isType(this.state_8be2vx$,xt)}}),Object.defineProperty(bt.prototype,"isCancelled",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,Lt)}}),bt.prototype.initCancellability=function(){this.setupCancellation_0()},bt.prototype.isReusable_0=function(){return e.isType(this.delegate,Vn)&&this.delegate.isReusable_pmw987$(this)},bt.prototype.resetState_8be2vx$=function(){var t=this._state_0;return e.isType(t,Nt)?(this.detachChild_8be2vx$(),!1):(this._decision_0=0,this._state_0=kt(),!0)},bt.prototype.setupCancellation_0=function(){var t;if(!this.checkCompleted_0()&&null===this.parentHandle_0&&null!=(t=this.delegate.context.get_j3r2sn$(xe()))){var e=t;e.start();var i=e.invokeOnCompletion_ct2b2z$(!0,void 0,new si(e,this));this.parentHandle_0=i,this.isCompleted&&!this.isReusable_0()&&(i.dispose(),this.parentHandle_0=Ie())}},bt.prototype.checkCompleted_0=function(){var t,i,n,o=this.isCompleted;if(0!==this.resumeMode)return o;if(null==(i=e.isType(t=this.delegate,Vn)?t:null))return o;if(null==(n=i.checkPostponedCancellation_jp3215$(this)))return o;var r=n;return o||this.cancel_dbl4no$(r),!0},Object.defineProperty(bt.prototype,"callerFrame",{configurable:!0,get:function(){var t;return e.isType(t=this.delegate,kr)?t:null}}),bt.prototype.getStackTraceElement=function(){return null},bt.prototype.takeState=function(){return this.state_8be2vx$},bt.prototype.cancelResult_83a7kv$=function(t,i){if(e.isType(t,Et))try{t.onCancellation(i)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.cancelLater_0=function(t){var i,n;return 0===this.resumeMode&&null!=(n=e.isType(i=this.delegate,Vn)?i:null)&&n.postponeCancellation_tcv7n7$(t)},bt.prototype.cancel_dbl4no$$default=function(t){var i;for(this._state_0;;){var n=this._state_0;t:do{if(!e.isType(n,xt))return!1;var o=new Lt(this,t,e.isType(n,St));if((i=this)._state_0!==n||(i._state_0=o,0))break t;if(e.isType(n,St))try{n.invoke(t)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}return this.detachChildIfNonResuable_0(),this.dispatchResume_0(0),!0}while(0)}},bt.prototype.parentCancelled_8o0b5c$=function(t){this.cancelLater_0(t)||(this.cancel_dbl4no$(t),this.detachChildIfNonResuable_0())},bt.prototype.invokeHandlerSafely_0=function(t){try{t()}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.getContinuationCancellationCause_dqr1mp$=function(t){return t.getCancellationException()},bt.prototype.trySuspend_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=1,1))return!0;break;case 2:return!1;default:throw b("Already suspended".toString())}},bt.prototype.tryResume_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=2,1))return!0;break;case 1:return!1;default:throw b("Already resumed".toString())}},bt.prototype.getResult=function(){if(this.setupCancellation_0(),this.trySuspend_0())return l;var t=this.state_8be2vx$;if(e.isType(t,Rt))throw xr(t.cause);if(1===this.resumeMode){var i=this.context.get_j3r2sn$(xe());if(null!=i&&!i.isActive){var n=i.getCancellationException();throw this.cancelResult_83a7kv$(t,n),xr(n)}}return this.getSuccessfulResult_tpy1pm$(t)},bt.prototype.resumeWith_tl1gpc$=function(t){this.resumeImpl_0(At(t,this),this.resumeMode)},bt.prototype.resume_qnlsu9$=function(t,i){var n=this.resumeImpl_0(new Et(t,i),this.resumeMode);if(null!=n)try{i(n.cause)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.invokeOnCancellation_f05bi3$=function(t){var i,n={v:null};for(this._state_0;;){var o,r=this._state_0;if(e.isType(r,wt)){var s;if(null!=(o=n.v))s=o;else{var a=this.makeHandler_0(t);n.v=a,s=a}var l=s;if((i=this)._state_0===r&&(i._state_0=l,1))return}else{if(!e.isType(r,St)){if(e.isType(r,Lt)){r.makeHandled()||this.multipleHandlersError_0(t,r);try{var u,p;No(t,null!=(p=e.isType(u=r,Rt)?u:null)?p.cause:null)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}return}return}this.multipleHandlersError_0(t,r)}}},bt.prototype.multipleHandlersError_0=function(t,e){throw b(("It's prohibited to register multiple handlers, tried to register "+t+", already has "+z(e)).toString())},bt.prototype.makeHandler_0=function(t){return e.isType(t,St)?t:new Ct(t)},bt.prototype.dispatchResume_0=function(t){this.tryResume_0()||Yn(this,t)},bt.prototype.resumeImpl_0=function(t,i){var n;for(this._state_0;;){var o=this._state_0;t:do{if(e.isType(o,xt)){if((n=this)._state_0!==o||(n._state_0=t,0))break t;return this.detachChildIfNonResuable_0(),this.dispatchResume_0(i),null}if(e.isType(o,Lt)&&o.makeResumed())return o;this.alreadyResumedError_0(t)}while(0)}},bt.prototype.alreadyResumedError_0=function(t){throw b(("Already resumed, but proposed with update "+z(t)).toString())},bt.prototype.detachChildIfNonResuable_0=function(){this.isReusable_0()||this.detachChild_8be2vx$()},bt.prototype.detachChild_8be2vx$=function(){var t=this.parentHandle_0;null!=t&&t.dispose(),this.parentHandle_0=Ie()},bt.prototype.tryResume_19pj23$$default=function(t,n){var o;for(this._state_0;;){var r=this._state_0;t:do{if(e.isType(r,xt)){var s=null==n?t:new Nt(n,t);if((o=this)._state_0!==r||(o._state_0=s,0))break t;return this.detachChildIfNonResuable_0(),i}return e.isType(r,Nt)&&r.idempotentResume===n?i:null}while(0)}},bt.prototype.tryResumeWithException_tcv7n7$=function(t){var n;for(this._state_0;;){var o=this._state_0;t:do{if(e.isType(o,xt)){var r=new Rt(t);if((n=this)._state_0!==o||(n._state_0=r,0))break t;return this.detachChildIfNonResuable_0(),i}return null}while(0)}},bt.prototype.completeResume_za3rmp$=function(t){this.dispatchResume_0(this.resumeMode)},bt.prototype.resumeUndispatched_hyuxa3$=function(t,i){var n,o=e.isType(n=this.delegate,Vn)?n:null;this.resumeImpl_0(i,(null!=o?o.dispatcher:null)===t?2:this.resumeMode)},bt.prototype.resumeUndispatchedWithException_gd0rtt$=function(t,i){var n,o=e.isType(n=this.delegate,Vn)?n:null;this.resumeImpl_0(new Rt(i),(null!=o?o.dispatcher:null)===t?2:this.resumeMode)},bt.prototype.getSuccessfulResult_tpy1pm$=function(t){var i,n,s;return e.isType(t,Nt)?null==(i=t.result)||e.isType(i,o)?i:r():e.isType(t,Et)?null==(n=t.result)||e.isType(n,o)?n:r():null==(s=t)||e.isType(s,o)?s:r()},bt.prototype.toString=function(){return this.nameString()+"("+Oo(this.delegate)+"){"+z(this.state_8be2vx$)+"}@"+Ao(this)},bt.prototype.nameString=function(){return"CancellableContinuation"},bt.$metadata$={kind:s,simpleName:"CancellableContinuationImpl",interfaces:[kr,_t,Xn]},xt.$metadata$={kind:x,simpleName:"NotCompleted",interfaces:[]},wt.prototype.toString=function(){return"Active"},wt.$metadata$={kind:k,simpleName:"Active",interfaces:[xt]};var zt=null;function kt(){return null===zt&&new wt,zt}function St(){Co.call(this)}function Ct(t){St.call(this),this.handler_0=t}function Nt(t,e){this.idempotentResume=t,this.result=e}function Et(t,e){this.result=t,this.onCancellation=e}function Tt(){}function Pt(t){Re.call(this,!0),this.initParentJobInternal_8vd9i7$(t)}function Ot(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function Mt(){}function jt(t){var i,n=t.exceptionOrNull();return null==n?null==(i=t.value)||e.isType(i,o)?i:r():new Rt(n)}function At(t,i){var n,s=t.exceptionOrNull();return null==s?null==(n=t.value)||e.isType(n,o)?n:r():new Rt(xr(s))}function It(t,i){var n;return e.isType(t,Rt)?new f(S(xr(t.cause))):(f.Companion,new f(null==(n=t)||e.isType(n,o)?n:r()))}function Rt(t,e){void 0===e&&(e=!1),this.cause=t,this._handled_0=e}function Lt(t,e,i){Rt.call(this,null!=e?e:Wo("Continuation "+t+" was cancelled normally"),i),this._resumed_0=!1}function Dt(){Ut(),N.call(this,$.Key)}function qt(){Bt=this,C.call(this,$.Key,Ft)}function Ft(t){var i;return e.isType(i=t,Dt)?i:null}St.$metadata$={kind:s,simpleName:"CancelHandler",interfaces:[xt,Co]},Ct.prototype.invoke=function(t){this.handler_0(t)},Ct.prototype.toString=function(){return"InvokeOnCancel["+Io(this.handler_0)+"@"+Ao(this)+"]"},Ct.$metadata$={kind:s,simpleName:"InvokeOnCancel",interfaces:[St]},Nt.prototype.toString=function(){return"CompletedIdempotentResult["+z(this.result)+"]"},Nt.$metadata$={kind:s,simpleName:"CompletedIdempotentResult",interfaces:[]},Et.prototype.toString=function(){return"CompletedWithCancellation["+z(this.result)+"]"},Et.$metadata$={kind:s,simpleName:"CompletedWithCancellation",interfaces:[]},Tt.$metadata$={kind:x,simpleName:"CompletableDeferred",interfaces:[le]},Object.defineProperty(Pt.prototype,"onCancelComplete",{configurable:!0,get:function(){return!0}}),Pt.prototype.getCompleted=function(){var t;return null==(t=this.getCompletedInternal_8be2vx$())||e.isType(t,o)?t:r()},Ot.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},Ot.prototype=Object.create(u.prototype),Ot.prototype.constructor=Ot,Ot.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.$this.awaitInternal_8be2vx$(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:return null==(t=this.result_0)||e.isType(t,o)?t:r();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Pt.prototype.await=function(t,e){var i=new Ot(this,t);return e?i:i.doResume(null)},Object.defineProperty(Pt.prototype,"onAwait",{configurable:!0,get:function(){return this}}),Pt.prototype.registerSelectClause1_o3xas4$=function(t,e){this.registerSelectClause1Internal_u6kgbh$(t,e)},Pt.prototype.complete_11rb$=function(t){return this.makeCompleting_8ea4ql$(t)},Pt.prototype.completeExceptionally_tcv7n7$=function(t){return this.makeCompleting_8ea4ql$(new Rt(t))},Pt.$metadata$={kind:s,simpleName:"CompletableDeferredImpl",interfaces:[_o,Tt,Re]},Mt.$metadata$={kind:x,simpleName:"CompletableJob",interfaces:[ve]},Object.defineProperty(Rt.prototype,"handled",{configurable:!0,get:function(){return this._handled_0}}),Rt.prototype.makeHandled=function(){return!1===(t=this)._handled_0&&(t._handled_0=!0,!0);var t},Rt.prototype.toString=function(){return Io(this)+"["+this.cause+"]"},Rt.$metadata$={kind:s,simpleName:"CompletedExceptionally",interfaces:[]},Lt.prototype.makeResumed=function(){return!1===(t=this)._resumed_0&&(t._resumed_0=!0,!0);var t},Lt.$metadata$={kind:s,simpleName:"CancelledContinuation",interfaces:[Rt]},qt.$metadata$={kind:k,simpleName:"Key",interfaces:[C]};var Bt=null;function Ut(){return null===Bt&&new qt,Bt}function Vt(t,i){var n;try{if(null!=(n=t.get_j3r2sn$(Qt())))return void n.handleException_1ur55u$(t,i)}catch(t){if(e.isType(t,w))return void jo(0,Gt(i,t));throw t}jo(0,i)}function Gt(t,e){return t===e?t:new E("Exception while trying to handle coroutine exception",e)}function Ht(){Qt()}function Wt(){Jt=this}Dt.prototype.isDispatchNeeded_1fupul$=function(t){return!0},Dt.prototype.dispatchYield_5bn72i$=function(t,e){this.dispatch_5bn72i$(t,e)},Dt.prototype.interceptContinuation_wj8d80$=function(t){return new Vn(this,t)},Dt.prototype.releaseInterceptedContinuation_k98bjh$=function(t){var i,n;null!=(n=(e.isType(i=t,Vn)?i:r()).reusableCancellableContinuation)&&n.detachChild_8be2vx$()},Dt.prototype.plus_9wrrq5$=function(t){return t},Dt.prototype.toString=function(){return Io(this)+"@"+Ao(this)},Dt.$metadata$={kind:s,simpleName:"CoroutineDispatcher",interfaces:[$,N]},Wt.$metadata$={kind:k,simpleName:"Key",interfaces:[T]};var Kt,Xt,Yt,Zt,Jt=null;function Qt(){return null===Jt&&new Wt,Jt}function te(){}function ee(t,e){j.call(this),this.name$=t,this.ordinal$=e}function ie(){ie=function(){},Kt=new ee("DEFAULT",0),Xt=new ee("LAZY",1),Yt=new ee("ATOMIC",2),Zt=new ee("UNDISPATCHED",3)}function ne(){return ie(),Kt}function oe(){return ie(),Xt}function re(){return ie(),Yt}function se(){return ie(),Zt}function ae(){}function le(){}function ue(t){return function(e){var i=new bt(h(e),1);return i.initCancellability(),t(i),i.getResult()}}function pe(){}function ce(t){var i,n;return null!=(n=e.isType(i=t.get_j3r2sn$($.Key),pe)?i:null)?n:To()}function he(){Dt.call(this),this.useCount_0=R,this.shared_0=!1,this.unconfinedQueue_0=null}function de(){fe=this,this.ref_0=new Er}te.$metadata$={kind:x,simpleName:"CoroutineScope",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.currentCoroutineContext",(function(t){return e.coroutineReceiver().context})),ee.prototype.invoke_810yno$=function(t,i){switch(this.name){case"DEFAULT":no(t,i);break;case"ATOMIC":O(t,i);break;case"UNDISPATCHED":lo(t,i);break;case"LAZY":break;default:e.noWhenBranchMatched()}},ee.prototype.invoke_3o0yor$=function(t,i,n){switch(this.name){case"DEFAULT":oo(t,i,n);break;case"ATOMIC":M(t,i,n);break;case"UNDISPATCHED":uo(t,i,n);break;case"LAZY":break;default:e.noWhenBranchMatched()}},Object.defineProperty(ee.prototype,"isLazy",{configurable:!0,get:function(){return this===oe()}}),ee.$metadata$={kind:s,simpleName:"CoroutineStart",interfaces:[j]},ee.values=function(){return[ne(),oe(),re(),se()]},ee.valueOf_61zpoe$=function(t){switch(t){case"DEFAULT":return ne();case"LAZY":return oe();case"ATOMIC":return re();case"UNDISPATCHED":return se();default:A("No enum constant kotlinx.coroutines.CoroutineStart."+t)}},ae.$metadata$={kind:x,simpleName:"CopyableThrowable",interfaces:[]},le.$metadata$={kind:x,simpleName:"Deferred",interfaces:[ve]},pe.prototype.delay_s8cxhz$=function(t,e){var i,n;if(!(t.toNumber()<=0))return ue((i=t,n=this,function(t){return n.scheduleResumeAfterDelay_egqmvs$(i,t),p}))(e)},pe.prototype.invokeOnTimeout_8irseu$=function(t,e){return To().invokeOnTimeout_8irseu$(t,e)},pe.$metadata$={kind:x,simpleName:"Delay",interfaces:[]},he.prototype.processNextEvent=function(){return this.processUnconfinedEvent()?R:L},Object.defineProperty(he.prototype,"isEmpty",{configurable:!0,get:function(){return this.isUnconfinedQueueEmpty}}),Object.defineProperty(he.prototype,"nextTime",{configurable:!0,get:function(){var t;return null==(t=this.unconfinedQueue_0)||t.isEmpty?L:R}}),he.prototype.processUnconfinedEvent=function(){var t,e;return null!=(t=this.unconfinedQueue_0)&&null!=(e=t.removeFirstOrNull())&&(e.run(),!0)},he.prototype.shouldBeProcessedFromContext=function(){return!1},he.prototype.dispatchUnconfined_4avnfa$=function(t){var e,i;if(null!=(e=this.unconfinedQueue_0))i=e;else{var n=new qn;this.unconfinedQueue_0=n,i=n}i.addLast_trkh7z$(t)},Object.defineProperty(he.prototype,"isActive",{configurable:!0,get:function(){return this.useCount_0.toNumber()>0}}),Object.defineProperty(he.prototype,"isUnconfinedLoopActive",{configurable:!0,get:function(){return this.useCount_0.compareTo_11rb$(this.delta_0(!0))>=0}}),Object.defineProperty(he.prototype,"isUnconfinedQueueEmpty",{configurable:!0,get:function(){var t,e;return null==(e=null!=(t=this.unconfinedQueue_0)?t.isEmpty:null)||e}}),he.prototype.delta_0=function(t){return t?D:I},he.prototype.incrementUseCount_6taknv$=function(t){void 0===t&&(t=!1),this.useCount_0=this.useCount_0.add(this.delta_0(t)),t||(this.shared_0=!0)},he.prototype.decrementUseCount_6taknv$=function(t){void 0===t&&(t=!1),this.useCount_0=this.useCount_0.subtract(this.delta_0(t)),this.useCount_0.toNumber()>0||this.shared_0&&this.shutdown()},he.prototype.shutdown=function(){},he.$metadata$={kind:s,simpleName:"EventLoop",interfaces:[Dt]},Object.defineProperty(de.prototype,"eventLoop_8be2vx$",{configurable:!0,get:function(){var t,e;if(null!=(t=this.ref_0.get()))e=t;else{var i=Bo();this.ref_0.set_11rb$(i),e=i}return e}}),de.prototype.currentOrNull_8be2vx$=function(){return this.ref_0.get()},de.prototype.resetEventLoop_8be2vx$=function(){this.ref_0.set_11rb$(null)},de.prototype.setEventLoop_13etkv$=function(t){this.ref_0.set_11rb$(t)},de.$metadata$={kind:k,simpleName:"ThreadLocalEventLoop",interfaces:[]};var fe=null;function _e(){return null===fe&&new de,fe}function me(){Vo.call(this),this._queue_0=null,this._delayed_0=null,this._isCompleted_0=!1}function $e(t,e){E.call(this,t,e),this.name="CompletionHandlerException"}function ye(t,e){B.call(this,t,e),this.name="CoroutinesInternalError"}function ve(){xe()}function ge(){be=this,Qt()}$e.$metadata$={kind:s,simpleName:"CompletionHandlerException",interfaces:[E]},ye.$metadata$={kind:s,simpleName:"CoroutinesInternalError",interfaces:[B]},ge.$metadata$={kind:k,simpleName:"Key",interfaces:[T]};var be=null;function xe(){return null===be&&new ge,be}function we(){}function ze(){}function ke(){}function Se(){}function Ce(){Ae=this}ve.prototype.cancel_m4sck1$=function(t,e){void 0===t&&(t=null),e?e(t):this.cancel_m4sck1$$default(t)},ve.prototype.cancel=function(){this.cancel_m4sck1$(null)},ve.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},ve.prototype.invokeOnCompletion_ct2b2z$=function(t,e,i,n){return void 0===t&&(t=!1),void 0===e&&(e=!0),n?n(t,e,i):this.invokeOnCompletion_ct2b2z$$default(t,e,i)},ve.prototype.plus_dqr1mp$=function(t){return t},ve.$metadata$={kind:x,simpleName:"Job",interfaces:[P]},we.$metadata$={kind:x,simpleName:"DisposableHandle",interfaces:[]},ze.$metadata$={kind:x,simpleName:"ChildJob",interfaces:[ve]},ke.$metadata$={kind:x,simpleName:"ParentJob",interfaces:[ve]},Se.$metadata$={kind:x,simpleName:"ChildHandle",interfaces:[we]},Ce.prototype.dispose=function(){},Ce.prototype.childCancelled_tcv7n7$=function(t){return!1},Ce.prototype.toString=function(){return"NonDisposableHandle"},Ce.$metadata$={kind:k,simpleName:"NonDisposableHandle",interfaces:[Se,we]};var Ne,Ee,Te,Pe,Oe,Me,je,Ae=null;function Ie(){return null===Ae&&new Ce,Ae}function Re(t){this._state_v70vig$_0=t?je:Me,this._parentHandle_acgcx5$_0=null}function Le(t,e){return function(){return t.state_8be2vx$===e}}function De(t,e,i,n){u.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$JobSupport=t,this.local$tmp$=void 0,this.local$tmp$_0=void 0,this.local$cur=void 0,this.local$$receiver=e}function qe(t,e,i){this.list_m9wkmb$_0=t,this._isCompleting_0=e,this._rootCause_0=i,this._exceptionsHolder_0=null}function Fe(t,e,i,n){Xe.call(this,i.childJob),this.parent_0=t,this.state_0=e,this.child_0=i,this.proposedUpdate_0=n}function Be(t,e){bt.call(this,t,1),this.job_0=e}function Ue(t){this.state=t}function Ve(t){return e.isType(t,Ke)?new Ue(t):t}function Ge(t){var i,n,o;return null!=(o=null!=(n=e.isType(i=t,Ue)?i:null)?n.state:null)?o:t}function He(t){this.isActive_hyoax9$_0=t}function We(t){Re.call(this,!0),this.initParentJobInternal_8vd9i7$(t),this.handlesException_fejgjb$_0=this.handlesExceptionF()}function Ke(){}function Xe(t){So.call(this),this.job=t}function Ye(){br.call(this)}function Ze(t){this.list_afai45$_0=t}function Je(t,e){Xe.call(this,t),this.handler_0=e}function Qe(t,e){Xe.call(this,t),this.continuation_0=e}function ti(t,e){Xe.call(this,t),this.continuation_0=e}function ei(t,e,i){Xe.call(this,t),this.select_0=e,this.block_0=i}function ii(t,e,i){Xe.call(this,t),this.select_0=e,this.block_0=i}function ni(t){Xe.call(this,t)}function oi(t,e){ni.call(this,t),this.handler_0=e,this._invoked_0=0}function ri(t,e){ni.call(this,t),this.childJob=e}function si(t,e){ni.call(this,t),this.child=e}function ai(){Dt.call(this)}function li(){N.call(this,xe())}function ui(t,e){Wo(t,this),this.coroutine_8be2vx$=e,this.name="TimeoutCancellationException"}function pi(){ci=this,Dt.call(this)}Object.defineProperty(Re.prototype,"key",{configurable:!0,get:function(){return xe()}}),Object.defineProperty(Re.prototype,"parentHandle_8be2vx$",{configurable:!0,get:function(){return this._parentHandle_acgcx5$_0},set:function(t){this._parentHandle_acgcx5$_0=t}}),Re.prototype.initParentJobInternal_8vd9i7$=function(t){if(null!=t){t.start();var e=t.attachChild_kx8v25$(this);this.parentHandle_8be2vx$=e,this.isCompleted&&(e.dispose(),this.parentHandle_8be2vx$=Ie())}else this.parentHandle_8be2vx$=Ie()},Object.defineProperty(Re.prototype,"state_8be2vx$",{configurable:!0,get:function(){for(this._state_v70vig$_0;;){var t=this._state_v70vig$_0;if(!e.isType(t,Fn))return t;t.perform_s8jyv4$(this)}}}),Re.prototype.loopOnState_46ivxf$_0=function(t){for(;;)t(this.state_8be2vx$)},Object.defineProperty(Re.prototype,"isActive",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Ke)&&t.isActive}}),Object.defineProperty(Re.prototype,"isCompleted",{configurable:!0,get:function(){return!e.isType(this.state_8be2vx$,Ke)}}),Object.defineProperty(Re.prototype,"isCancelled",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Rt)||e.isType(t,qe)&&t.isCancelling}}),Re.prototype.finalizeFinishingState_10mr1z$_0=function(t,i){var n,o,s,a=null!=(o=e.isType(n=i,Rt)?n:null)?o.cause:null,l={v:!1};l.v=t.isCancelling;var u=t.sealLocked_dbl4no$(a),p=this.getFinalRootCause_3zkch4$_0(t,u);null!=p&&this.addSuppressedExceptions_85dgeo$_0(p,u);var c,h=p,d=null==h||h===a?i:new Rt(h);return null!=h&&(this.cancelParent_7dutpz$_0(h)||this.handleJobException_tcv7n7$(h))&&(e.isType(s=d,Rt)?s:r()).makeHandled(),l.v||this.onCancelling_dbl4no$(h),this.onCompletionInternal_s8jyv4$(d),(c=this)._state_v70vig$_0===t&&(c._state_v70vig$_0=Ve(d)),this.completeStateFinalization_a4ilmi$_0(t,d),d},Re.prototype.getFinalRootCause_3zkch4$_0=function(t,i){if(i.isEmpty())return t.isCancelling?new Ko(this.cancellationExceptionMessage(),null,this):null;var n;t:do{var o;for(o=i.iterator();o.hasNext();){var r=o.next();if(!e.isType(r,Ho)){n=r;break t}}n=null}while(0);if(null!=n)return n;var s=i.get_za3lpa$(0);if(e.isType(s,ui)){var a;t:do{var l;for(l=i.iterator();l.hasNext();){var u=l.next();if(u!==s&&e.isType(u,ui)){a=u;break t}}a=null}while(0);if(null!=a)return a}return s},Re.prototype.addSuppressedExceptions_85dgeo$_0=function(t,i){var n;if(!(i.size<=1)){var o=_r(i.size),r=t;for(n=i.iterator();n.hasNext();){var s=n.next();s!==t&&s!==r&&!e.isType(s,Ho)&&o.add_11rb$(s)}}},Re.prototype.tryFinalizeSimpleState_5emg4m$_0=function(t,e){return(i=this)._state_v70vig$_0===t&&(i._state_v70vig$_0=Ve(e),!0)&&(this.onCancelling_dbl4no$(null),this.onCompletionInternal_s8jyv4$(e),this.completeStateFinalization_a4ilmi$_0(t,e),!0);var i},Re.prototype.completeStateFinalization_a4ilmi$_0=function(t,i){var n,o,r,s;null!=(n=this.parentHandle_8be2vx$)&&(n.dispose(),this.parentHandle_8be2vx$=Ie());var a=null!=(r=e.isType(o=i,Rt)?o:null)?r.cause:null;if(e.isType(t,Xe))try{t.invoke(a)}catch(i){if(!e.isType(i,w))throw i;this.handleOnCompletionException_tcv7n7$(new $e("Exception in completion handler "+t+" for "+this,i))}else null!=(s=t.list)&&this.notifyCompletion_mgxta4$_0(s,a)},Re.prototype.notifyCancelling_xkpzb8$_0=function(t,i){var n;this.onCancelling_dbl4no$(i);for(var o={v:null},r=t._next;!y(r,t);){if(e.isType(r,ni)){var s,a=r;try{a.invoke(i)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(s=o.v)?s:null)&&(o.v=new $e("Exception in completion handler "+a+" for "+this,t))}}r=r._next}null!=(n=o.v)&&this.handleOnCompletionException_tcv7n7$(n),this.cancelParent_7dutpz$_0(i)},Re.prototype.cancelParent_7dutpz$_0=function(t){if(this.isScopedCoroutine)return!0;var i=e.isType(t,Ho),n=this.parentHandle_8be2vx$;return null===n||n===Ie()?i:n.childCancelled_tcv7n7$(t)||i},Re.prototype.notifyCompletion_mgxta4$_0=function(t,i){for(var n,o={v:null},r=t._next;!y(r,t);){if(e.isType(r,Xe)){var s,a=r;try{a.invoke(i)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(s=o.v)?s:null)&&(o.v=new $e("Exception in completion handler "+a+" for "+this,t))}}r=r._next}null!=(n=o.v)&&this.handleOnCompletionException_tcv7n7$(n)},Re.prototype.notifyHandlers_alhslr$_0=g((function(){var t=e.equals;return function(i,n,o,r){for(var s,a={v:null},l=o._next;!t(l,o);){if(n(l)){var u,p=l;try{p.invoke(r)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(u=a.v)?u:null)&&(a.v=new $e("Exception in completion handler "+p+" for "+this,t))}}l=l._next}null!=(s=a.v)&&this.handleOnCompletionException_tcv7n7$(s)}})),Re.prototype.start=function(){for(;;)switch(this.startInternal_tp1bqd$_0(this.state_8be2vx$)){case 0:return!1;case 1:return!0}},Re.prototype.startInternal_tp1bqd$_0=function(t){return e.isType(t,He)?t.isActive?0:(i=this)._state_v70vig$_0!==t||(i._state_v70vig$_0=je,0)?-1:(this.onStartInternal(),1):e.isType(t,Ze)?function(e){return e._state_v70vig$_0===t&&(e._state_v70vig$_0=t.list,!0)}(this)?(this.onStartInternal(),1):-1:0;var i},Re.prototype.onStartInternal=function(){},Re.prototype.getCancellationException=function(){var t,i,n=this.state_8be2vx$;if(e.isType(n,qe)){if(null==(i=null!=(t=n.rootCause)?this.toCancellationException_rg9tb7$(t,Io(this)+" is cancelling"):null))throw b(("Job is still new or active: "+this).toString());return i}if(e.isType(n,Ke))throw b(("Job is still new or active: "+this).toString());return e.isType(n,Rt)?this.toCancellationException_rg9tb7$(n.cause):new Ko(Io(this)+" has completed normally",null,this)},Re.prototype.toCancellationException_rg9tb7$=function(t,i){var n,o;return void 0===i&&(i=null),null!=(o=e.isType(n=t,Ho)?n:null)?o:new Ko(null!=i?i:this.cancellationExceptionMessage(),t,this)},Object.defineProperty(Re.prototype,"completionCause",{configurable:!0,get:function(){var t,i=this.state_8be2vx$;if(e.isType(i,qe)){if(null==(t=i.rootCause))throw b(("Job is still new or active: "+this).toString());return t}if(e.isType(i,Ke))throw b(("Job is still new or active: "+this).toString());return e.isType(i,Rt)?i.cause:null}}),Object.defineProperty(Re.prototype,"completionCauseHandled",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Rt)&&t.handled}}),Re.prototype.invokeOnCompletion_f05bi3$=function(t){return this.invokeOnCompletion_ct2b2z$(!1,!0,t)},Re.prototype.invokeOnCompletion_ct2b2z$$default=function(t,i,n){for(var o,s={v:null};;){var a=this.state_8be2vx$;t:do{var l,u,p,c,h;if(e.isType(a,He))if(a.isActive){var d;if(null!=(l=s.v))d=l;else{var f=this.makeNode_9qhc1i$_0(n,t);s.v=f,d=f}var _=d;if((o=this)._state_v70vig$_0===a&&(o._state_v70vig$_0=_,1))return _}else this.promoteEmptyToNodeList_lchanx$_0(a);else{if(!e.isType(a,Ke))return i&&No(n,null!=(h=e.isType(c=a,Rt)?c:null)?h.cause:null),Ie();var m=a.list;if(null==m)this.promoteSingleToNodeList_ft43ca$_0(e.isType(u=a,Xe)?u:r());else{var $,y={v:null},v={v:Ie()};if(t&&e.isType(a,qe)){var g;y.v=a.rootCause;var b=null==y.v;if(b||(b=e.isType(n,ri)&&!a.isCompleting),b){var x;if(null!=(g=s.v))x=g;else{var w=this.makeNode_9qhc1i$_0(n,t);s.v=w,x=w}var z=x;if(!this.addLastAtomic_qayz7c$_0(a,m,z))break t;if(null==y.v)return z;v.v=z}}if(null!=y.v)return i&&No(n,y.v),v.v;if(null!=(p=s.v))$=p;else{var k=this.makeNode_9qhc1i$_0(n,t);s.v=k,$=k}var S=$;if(this.addLastAtomic_qayz7c$_0(a,m,S))return S}}}while(0)}},Re.prototype.makeNode_9qhc1i$_0=function(t,i){var n,o,r,s,a,l;return i?null!=(r=null!=(o=e.isType(n=t,ni)?n:null)?o:null)?r:new oi(this,t):null!=(l=null!=(a=e.isType(s=t,Xe)?s:null)?a:null)?l:new Je(this,t)},Re.prototype.addLastAtomic_qayz7c$_0=function(t,e,i){var n;t:do{if(!Le(this,t)()){n=!1;break t}e.addLast_l2j9rm$(i),n=!0}while(0);return n},Re.prototype.promoteEmptyToNodeList_lchanx$_0=function(t){var e,i=new Ye,n=t.isActive?i:new Ze(i);(e=this)._state_v70vig$_0===t&&(e._state_v70vig$_0=n)},Re.prototype.promoteSingleToNodeList_ft43ca$_0=function(t){t.addOneIfEmpty_l2j9rm$(new Ye);var e,i=t._next;(e=this)._state_v70vig$_0===t&&(e._state_v70vig$_0=i)},Re.prototype.join=function(t){if(this.joinInternal_ta6o25$_0())return this.joinSuspend_kfh5g8$_0(t);wi(t.context)},Re.prototype.joinInternal_ta6o25$_0=function(){for(;;){var t=this.state_8be2vx$;if(!e.isType(t,Ke))return!1;if(this.startInternal_tp1bqd$_0(t)>=0)return!0}},Re.prototype.joinSuspend_kfh5g8$_0=function(t){return(i=this,e=function(t){return yt(t,i.invokeOnCompletion_f05bi3$(new Qe(i,t))),p},function(t){var i=new bt(h(t),1);return i.initCancellability(),e(i),i.getResult()})(t);var e,i},Object.defineProperty(Re.prototype,"onJoin",{configurable:!0,get:function(){return this}}),Re.prototype.registerSelectClause0_s9h9qd$=function(t,i){for(;;){var n=this.state_8be2vx$;if(t.isSelected)return;if(!e.isType(n,Ke))return void(t.trySelect()&&so(i,t.completion));if(0===this.startInternal_tp1bqd$_0(n))return void t.disposeOnSelect_rvfg84$(this.invokeOnCompletion_f05bi3$(new ei(this,t,i)))}},Re.prototype.removeNode_nxb11s$=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Xe))return e.isType(i,Ke)?void(null!=i.list&&t.remove()):void 0;if(i!==t)return;if((n=this)._state_v70vig$_0===i&&(n._state_v70vig$_0=je,1))return}var n},Object.defineProperty(Re.prototype,"onCancelComplete",{configurable:!0,get:function(){return!1}}),Re.prototype.cancel_m4sck1$$default=function(t){this.cancelInternal_tcv7n7$(null!=t?t:new Ko(this.cancellationExceptionMessage(),null,this))},Re.prototype.cancellationExceptionMessage=function(){return"Job was cancelled"},Re.prototype.cancel_dbl4no$$default=function(t){var e;return this.cancelInternal_tcv7n7$(null!=(e=null!=t?this.toCancellationException_rg9tb7$(t):null)?e:new Ko(this.cancellationExceptionMessage(),null,this)),!0},Re.prototype.cancelInternal_tcv7n7$=function(t){this.cancelImpl_8ea4ql$(t)},Re.prototype.parentCancelled_pv1t6x$=function(t){this.cancelImpl_8ea4ql$(t)},Re.prototype.childCancelled_tcv7n7$=function(t){return!!e.isType(t,Ho)||this.cancelImpl_8ea4ql$(t)&&this.handlesException},Re.prototype.cancelCoroutine_dbl4no$=function(t){return this.cancelImpl_8ea4ql$(t)},Re.prototype.cancelImpl_8ea4ql$=function(t){var e,i=Ne;return!(!this.onCancelComplete||(i=this.cancelMakeCompleting_z3ww04$_0(t))!==Ee)||(i===Ne&&(i=this.makeCancelling_xjon1g$_0(t)),i===Ne||i===Ee?e=!0:i===Pe?e=!1:(this.afterCompletion_s8jyv4$(i),e=!0),e)},Re.prototype.cancelMakeCompleting_z3ww04$_0=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Ke)||e.isType(i,qe)&&i.isCompleting)return Ne;var n=new Rt(this.createCauseException_kfrsk8$_0(t)),o=this.tryMakeCompleting_w5s53t$_0(i,n);if(o!==Te)return o}},Re.prototype.defaultCancellationException_6umzry$=v("kotlinx-coroutines-core.kotlinx.coroutines.JobSupport.defaultCancellationException_6umzry$",g((function(){var e=t.kotlinx.coroutines.JobCancellationException;return function(t,i){return void 0===t&&(t=null),void 0===i&&(i=null),new e(null!=t?t:this.cancellationExceptionMessage(),i,this)}}))),Re.prototype.getChildJobCancellationCause=function(){var t,i,n,o=this.state_8be2vx$;if(e.isType(o,qe))t=o.rootCause;else if(e.isType(o,Rt))t=o.cause;else{if(e.isType(o,Ke))throw b(("Cannot be cancelling child in this state: "+z(o)).toString());t=null}var r=t;return null!=(n=e.isType(i=r,Ho)?i:null)?n:new Ko("Parent job is "+this.stateString_u2sjqg$_0(o),r,this)},Re.prototype.createCauseException_kfrsk8$_0=function(t){var i;return null==t||e.isType(t,w)?null!=t?t:new Ko(this.cancellationExceptionMessage(),null,this):(e.isType(i=t,ke)?i:r()).getChildJobCancellationCause()},Re.prototype.makeCancelling_xjon1g$_0=function(t){for(var i={v:null};;){var n,o,r=this.state_8be2vx$;if(e.isType(r,qe)){var s;if(r.isSealed)return Pe;var a=r.isCancelling;if(null!=t||!a){var l;if(null!=(s=i.v))l=s;else{var u=this.createCauseException_kfrsk8$_0(t);i.v=u,l=u}var p=l;r.addExceptionLocked_tcv7n7$(p)}var c=r.rootCause,h=a?null:c;return null!=h&&this.notifyCancelling_xkpzb8$_0(r.list,h),Ne}if(!e.isType(r,Ke))return Pe;if(null!=(n=i.v))o=n;else{var d=this.createCauseException_kfrsk8$_0(t);i.v=d,o=d}var f=o;if(r.isActive){if(this.tryMakeCancelling_v0qvyy$_0(r,f))return Ne}else{var _=this.tryMakeCompleting_w5s53t$_0(r,new Rt(f));if(_===Ne)throw b(("Cannot happen in "+z(r)).toString());if(_!==Te)return _}}},Re.prototype.getOrPromoteCancellingList_dmij2j$_0=function(t){var i,n;if(null==(n=t.list)){if(e.isType(t,He))i=new Ye;else{if(!e.isType(t,Xe))throw b(("State should have list: "+t).toString());this.promoteSingleToNodeList_ft43ca$_0(t),i=null}n=i}return n},Re.prototype.tryMakeCancelling_v0qvyy$_0=function(t,e){var i;if(null==(i=this.getOrPromoteCancellingList_dmij2j$_0(t)))return!1;var n,o=i,r=new qe(o,!1,e);return(n=this)._state_v70vig$_0===t&&(n._state_v70vig$_0=r,!0)&&(this.notifyCancelling_xkpzb8$_0(o,e),!0)},Re.prototype.makeCompleting_8ea4ql$=function(t){for(;;){var e=this.tryMakeCompleting_w5s53t$_0(this.state_8be2vx$,t);if(e===Ne)return!1;if(e===Ee)return!0;if(e!==Te)return this.afterCompletion_s8jyv4$(e),!0}},Re.prototype.makeCompletingOnce_8ea4ql$=function(t){for(;;){var e=this.tryMakeCompleting_w5s53t$_0(this.state_8be2vx$,t);if(e===Ne)throw new U("Job "+this+" is already complete or completing, but is being completed with "+z(t),this.get_exceptionOrNull_ejijbb$_0(t));if(e!==Te)return e}},Re.prototype.tryMakeCompleting_w5s53t$_0=function(t,i){return e.isType(t,Ke)?!e.isType(t,He)&&!e.isType(t,Xe)||e.isType(t,ri)||e.isType(i,Rt)?this.tryMakeCompletingSlowPath_uh1ctj$_0(t,i):this.tryFinalizeSimpleState_5emg4m$_0(t,i)?i:Te:Ne},Re.prototype.tryMakeCompletingSlowPath_uh1ctj$_0=function(t,i){var n,o,r,s;if(null==(n=this.getOrPromoteCancellingList_dmij2j$_0(t)))return Te;var a,l,u,p=n,c=null!=(r=e.isType(o=t,qe)?o:null)?r:new qe(p,!1,null),h={v:null};if(c.isCompleting)return Ne;if(c.isCompleting=!0,c!==t&&((u=this)._state_v70vig$_0!==t||(u._state_v70vig$_0=c,0)))return Te;var d=c.isCancelling;null!=(l=e.isType(a=i,Rt)?a:null)&&c.addExceptionLocked_tcv7n7$(l.cause);var f=c.rootCause;h.v=d?null:f,null!=(s=h.v)&&this.notifyCancelling_xkpzb8$_0(p,s);var _=this.firstChild_15hr5g$_0(t);return null!=_&&this.tryWaitForChild_dzo3im$_0(c,_,i)?Ee:this.finalizeFinishingState_10mr1z$_0(c,i)},Re.prototype.get_exceptionOrNull_ejijbb$_0=function(t){var i,n;return null!=(n=e.isType(i=t,Rt)?i:null)?n.cause:null},Re.prototype.firstChild_15hr5g$_0=function(t){var i,n,o;return null!=(o=e.isType(i=t,ri)?i:null)?o:null!=(n=t.list)?this.nextChild_n2no7k$_0(n):null},Re.prototype.tryWaitForChild_dzo3im$_0=function(t,e,i){var n;if(e.childJob.invokeOnCompletion_ct2b2z$(void 0,!1,new Fe(this,t,e,i))!==Ie())return!0;if(null==(n=this.nextChild_n2no7k$_0(e)))return!1;var o=n;return this.tryWaitForChild_dzo3im$_0(t,o,i)},Re.prototype.continueCompleting_vth2d4$_0=function(t,e,i){var n=this.nextChild_n2no7k$_0(e);if(null==n||!this.tryWaitForChild_dzo3im$_0(t,n,i)){var o=this.finalizeFinishingState_10mr1z$_0(t,i);this.afterCompletion_s8jyv4$(o)}},Re.prototype.nextChild_n2no7k$_0=function(t){for(var i=t;i._removed;)i=i._prev;for(;;)if(!(i=i._next)._removed){if(e.isType(i,ri))return i;if(e.isType(i,Ye))return null}},De.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},De.prototype=Object.create(u.prototype),De.prototype.constructor=De,De.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.local$this$JobSupport.state_8be2vx$;if(e.isType(t,ri)){if(this.state_0=8,this.result_0=this.local$$receiver.yield_11rb$(t.childJob,this),this.result_0===l)return l;continue}if(e.isType(t,Ke)){if(null!=(this.local$tmp$=t.list)){this.local$cur=this.local$tmp$._next,this.state_0=2;continue}this.local$tmp$_0=null,this.state_0=6;continue}this.state_0=7;continue;case 1:throw this.exception_0;case 2:if(y(this.local$cur,this.local$tmp$)){this.state_0=5;continue}if(e.isType(this.local$cur,ri)){if(this.state_0=3,this.result_0=this.local$$receiver.yield_11rb$(this.local$cur.childJob,this),this.result_0===l)return l;continue}this.state_0=4;continue;case 3:this.state_0=4;continue;case 4:this.local$cur=this.local$cur._next,this.state_0=2;continue;case 5:this.local$tmp$_0=p,this.state_0=6;continue;case 6:return this.local$tmp$_0;case 7:this.state_0=9;continue;case 8:return this.result_0;case 9:return p;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(Re.prototype,"children",{configurable:!0,get:function(){return V((t=this,function(e,i,n){var o=new De(t,e,this,i);return n?o:o.doResume(null)}));var t}}),Re.prototype.attachChild_kx8v25$=function(t){var i;return e.isType(i=this.invokeOnCompletion_ct2b2z$(!0,void 0,new ri(this,t)),Se)?i:r()},Re.prototype.handleOnCompletionException_tcv7n7$=function(t){throw t},Re.prototype.onCancelling_dbl4no$=function(t){},Object.defineProperty(Re.prototype,"isScopedCoroutine",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Re.prototype,"handlesException",{configurable:!0,get:function(){return!0}}),Re.prototype.handleJobException_tcv7n7$=function(t){return!1},Re.prototype.onCompletionInternal_s8jyv4$=function(t){},Re.prototype.afterCompletion_s8jyv4$=function(t){},Re.prototype.toString=function(){return this.toDebugString()+"@"+Ao(this)},Re.prototype.toDebugString=function(){return this.nameString()+"{"+this.stateString_u2sjqg$_0(this.state_8be2vx$)+"}"},Re.prototype.nameString=function(){return Io(this)},Re.prototype.stateString_u2sjqg$_0=function(t){return e.isType(t,qe)?t.isCancelling?"Cancelling":t.isCompleting?"Completing":"Active":e.isType(t,Ke)?t.isActive?"Active":"New":e.isType(t,Rt)?"Cancelled":"Completed"},Object.defineProperty(qe.prototype,"list",{get:function(){return this.list_m9wkmb$_0}}),Object.defineProperty(qe.prototype,"isCompleting",{configurable:!0,get:function(){return this._isCompleting_0},set:function(t){this._isCompleting_0=t}}),Object.defineProperty(qe.prototype,"rootCause",{configurable:!0,get:function(){return this._rootCause_0},set:function(t){this._rootCause_0=t}}),Object.defineProperty(qe.prototype,"exceptionsHolder_0",{configurable:!0,get:function(){return this._exceptionsHolder_0},set:function(t){this._exceptionsHolder_0=t}}),Object.defineProperty(qe.prototype,"isSealed",{configurable:!0,get:function(){return this.exceptionsHolder_0===Oe}}),Object.defineProperty(qe.prototype,"isCancelling",{configurable:!0,get:function(){return null!=this.rootCause}}),Object.defineProperty(qe.prototype,"isActive",{configurable:!0,get:function(){return null==this.rootCause}}),qe.prototype.sealLocked_dbl4no$=function(t){var i,n,o=this.exceptionsHolder_0;if(null==o)n=this.allocateList_0();else if(e.isType(o,w)){var s=this.allocateList_0();s.add_11rb$(o),n=s}else{if(!e.isType(o,G))throw b(("State is "+z(o)).toString());n=e.isType(i=o,G)?i:r()}var a=n,l=this.rootCause;return null!=l&&a.add_wxm5ur$(0,l),null==t||y(t,l)||a.add_11rb$(t),this.exceptionsHolder_0=Oe,a},qe.prototype.addExceptionLocked_tcv7n7$=function(t){var i,n=this.rootCause;if(null!=n){if(t!==n){var o=this.exceptionsHolder_0;if(null==o)this.exceptionsHolder_0=t;else if(e.isType(o,w)){if(t===o)return;var s=this.allocateList_0();s.add_11rb$(o),s.add_11rb$(t),this.exceptionsHolder_0=s}else{if(!e.isType(o,G))throw b(("State is "+z(o)).toString());(e.isType(i=o,G)?i:r()).add_11rb$(t)}}}else this.rootCause=t},qe.prototype.allocateList_0=function(){return d(4)},qe.prototype.toString=function(){return"Finishing[cancelling="+this.isCancelling+", completing="+this.isCompleting+", rootCause="+z(this.rootCause)+", exceptions="+z(this.exceptionsHolder_0)+", list="+this.list+"]"},qe.$metadata$={kind:s,simpleName:"Finishing",interfaces:[Ke]},Re.prototype.get_isCancelling_dpdoz8$_0=function(t){return e.isType(t,qe)&&t.isCancelling},Fe.prototype.invoke=function(t){this.parent_0.continueCompleting_vth2d4$_0(this.state_0,this.child_0,this.proposedUpdate_0)},Fe.prototype.toString=function(){return"ChildCompletion["+this.child_0+", "+z(this.proposedUpdate_0)+"]"},Fe.$metadata$={kind:s,simpleName:"ChildCompletion",interfaces:[Xe]},Be.prototype.getContinuationCancellationCause_dqr1mp$=function(t){var i,n=this.job_0.state_8be2vx$;return e.isType(n,qe)&&null!=(i=n.rootCause)?i:e.isType(n,Rt)?n.cause:t.getCancellationException()},Be.prototype.nameString=function(){return"AwaitContinuation"},Be.$metadata$={kind:s,simpleName:"AwaitContinuation",interfaces:[bt]},Object.defineProperty(Re.prototype,"isCompletedExceptionally",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,Rt)}}),Re.prototype.getCompletionExceptionOrNull=function(){var t=this.state_8be2vx$;if(e.isType(t,Ke))throw b("This job has not completed yet".toString());return this.get_exceptionOrNull_ejijbb$_0(t)},Re.prototype.getCompletedInternal_8be2vx$=function(){var t=this.state_8be2vx$;if(e.isType(t,Ke))throw b("This job has not completed yet".toString());if(e.isType(t,Rt))throw t.cause;return Ge(t)},Re.prototype.awaitInternal_8be2vx$=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Ke)){if(e.isType(i,Rt))throw i.cause;return Ge(i)}if(this.startInternal_tp1bqd$_0(i)>=0)break}return this.awaitSuspend_ixl9xw$_0(t)},Re.prototype.awaitSuspend_ixl9xw$_0=function(t){return(e=this,function(t){var i=new Be(h(t),e);return yt(i,e.invokeOnCompletion_f05bi3$(new ti(e,i))),i.getResult()})(t);var e},Re.prototype.registerSelectClause1Internal_u6kgbh$=function(t,i){for(;;){var n,s=this.state_8be2vx$;if(t.isSelected)return;if(!e.isType(s,Ke))return void(t.trySelect()&&(e.isType(s,Rt)?t.resumeSelectWithException_tcv7n7$(s.cause):ao(i,null==(n=Ge(s))||e.isType(n,o)?n:r(),t.completion)));if(0===this.startInternal_tp1bqd$_0(s))return void t.disposeOnSelect_rvfg84$(this.invokeOnCompletion_f05bi3$(new ii(this,t,i)))}},Re.prototype.selectAwaitCompletion_u6kgbh$=function(t,i){var n,s=this.state_8be2vx$;e.isType(s,Rt)?t.resumeSelectWithException_tcv7n7$(s.cause):oo(i,null==(n=Ge(s))||e.isType(n,o)?n:r(),t.completion)},Re.$metadata$={kind:s,simpleName:"JobSupport",interfaces:[fo,ke,ze,ve]},Ue.$metadata$={kind:s,simpleName:"IncompleteStateBox",interfaces:[]},Object.defineProperty(He.prototype,"isActive",{get:function(){return this.isActive_hyoax9$_0}}),Object.defineProperty(He.prototype,"list",{configurable:!0,get:function(){return null}}),He.prototype.toString=function(){return"Empty{"+(this.isActive?"Active":"New")+"}"},He.$metadata$={kind:s,simpleName:"Empty",interfaces:[Ke]},Object.defineProperty(We.prototype,"onCancelComplete",{configurable:!0,get:function(){return!0}}),Object.defineProperty(We.prototype,"handlesException",{configurable:!0,get:function(){return this.handlesException_fejgjb$_0}}),We.prototype.complete=function(){return this.makeCompleting_8ea4ql$(p)},We.prototype.completeExceptionally_tcv7n7$=function(t){return this.makeCompleting_8ea4ql$(new Rt(t))},We.prototype.handlesExceptionF=function(){var t,i,n,o,r,s;if(null==(n=null!=(i=e.isType(t=this.parentHandle_8be2vx$,ri)?t:null)?i.job:null))return!1;for(var a=n;;){if(a.handlesException)return!0;if(null==(s=null!=(r=e.isType(o=a.parentHandle_8be2vx$,ri)?o:null)?r.job:null))return!1;a=s}},We.$metadata$={kind:s,simpleName:"JobImpl",interfaces:[Mt,Re]},Ke.$metadata$={kind:x,simpleName:"Incomplete",interfaces:[]},Object.defineProperty(Xe.prototype,"isActive",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Xe.prototype,"list",{configurable:!0,get:function(){return null}}),Xe.prototype.dispose=function(){var t;(e.isType(t=this.job,Re)?t:r()).removeNode_nxb11s$(this)},Xe.$metadata$={kind:s,simpleName:"JobNode",interfaces:[Ke,we,So]},Object.defineProperty(Ye.prototype,"isActive",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ye.prototype,"list",{configurable:!0,get:function(){return this}}),Ye.prototype.getString_61zpoe$=function(t){var i=H();i.append_pdl1vj$("List{"),i.append_pdl1vj$(t),i.append_pdl1vj$("}[");for(var n={v:!0},o=this._next;!y(o,this);){if(e.isType(o,Xe)){var r=o;n.v?n.v=!1:i.append_pdl1vj$(", "),i.append_s8jyv4$(r)}o=o._next}return i.append_pdl1vj$("]"),i.toString()},Ye.prototype.toString=function(){return Mn?this.getString_61zpoe$("Active"):br.prototype.toString.call(this)},Ye.$metadata$={kind:s,simpleName:"NodeList",interfaces:[Ke,br]},Object.defineProperty(Ze.prototype,"list",{get:function(){return this.list_afai45$_0}}),Object.defineProperty(Ze.prototype,"isActive",{configurable:!0,get:function(){return!1}}),Ze.prototype.toString=function(){return Mn?this.list.getString_61zpoe$("New"):o.prototype.toString.call(this)},Ze.$metadata$={kind:s,simpleName:"InactiveNodeList",interfaces:[Ke]},Je.prototype.invoke=function(t){this.handler_0(t)},Je.prototype.toString=function(){return"InvokeOnCompletion["+Io(this)+"@"+Ao(this)+"]"},Je.$metadata$={kind:s,simpleName:"InvokeOnCompletion",interfaces:[Xe]},Qe.prototype.invoke=function(t){this.continuation_0.resumeWith_tl1gpc$(new f(p))},Qe.prototype.toString=function(){return"ResumeOnCompletion["+this.continuation_0+"]"},Qe.$metadata$={kind:s,simpleName:"ResumeOnCompletion",interfaces:[Xe]},ti.prototype.invoke=function(t){var i,n,s=this.job.state_8be2vx$;if(e.isType(s,Rt)){var a=this.continuation_0,l=s.cause;a.resumeWith_tl1gpc$(new f(S(l)))}else{n=this.continuation_0;var u=null==(i=Ge(s))||e.isType(i,o)?i:r();n.resumeWith_tl1gpc$(new f(u))}},ti.prototype.toString=function(){return"ResumeAwaitOnCompletion["+this.continuation_0+"]"},ti.$metadata$={kind:s,simpleName:"ResumeAwaitOnCompletion",interfaces:[Xe]},ei.prototype.invoke=function(t){this.select_0.trySelect()&&no(this.block_0,this.select_0.completion)},ei.prototype.toString=function(){return"SelectJoinOnCompletion["+this.select_0+"]"},ei.$metadata$={kind:s,simpleName:"SelectJoinOnCompletion",interfaces:[Xe]},ii.prototype.invoke=function(t){this.select_0.trySelect()&&this.job.selectAwaitCompletion_u6kgbh$(this.select_0,this.block_0)},ii.prototype.toString=function(){return"SelectAwaitOnCompletion["+this.select_0+"]"},ii.$metadata$={kind:s,simpleName:"SelectAwaitOnCompletion",interfaces:[Xe]},ni.$metadata$={kind:s,simpleName:"JobCancellingNode",interfaces:[Xe]},oi.prototype.invoke=function(t){var e;0===(e=this)._invoked_0&&(e._invoked_0=1,1)&&this.handler_0(t)},oi.prototype.toString=function(){return"InvokeOnCancelling["+Io(this)+"@"+Ao(this)+"]"},oi.$metadata$={kind:s,simpleName:"InvokeOnCancelling",interfaces:[ni]},ri.prototype.invoke=function(t){this.childJob.parentCancelled_pv1t6x$(this.job)},ri.prototype.childCancelled_tcv7n7$=function(t){return this.job.childCancelled_tcv7n7$(t)},ri.prototype.toString=function(){return"ChildHandle["+this.childJob+"]"},ri.$metadata$={kind:s,simpleName:"ChildHandleNode",interfaces:[Se,ni]},si.prototype.invoke=function(t){this.child.parentCancelled_8o0b5c$(this.child.getContinuationCancellationCause_dqr1mp$(this.job))},si.prototype.toString=function(){return"ChildContinuation["+this.child+"]"},si.$metadata$={kind:s,simpleName:"ChildContinuation",interfaces:[ni]},ai.prototype.toString=function(){var t;return null!=(t=this.toStringInternalImpl())?t:Io(this)+"@"+Ao(this)},ai.prototype.toStringInternalImpl=function(){var t,i=qo().Main;if(this===i)return"Dispatchers.Main";try{t=i.immediate}catch(i){if(!e.isType(i,W))throw i;t=null}return this===t?"Dispatchers.Main.immediate":null},ai.$metadata$={kind:s,simpleName:"MainCoroutineDispatcher",interfaces:[Dt]},ui.prototype.createCopy=function(){var t,e=new ui(null!=(t=this.message)?t:"",this.coroutine_8be2vx$);return e},ui.$metadata$={kind:s,simpleName:"TimeoutCancellationException",interfaces:[ae,Ho]},pi.prototype.isDispatchNeeded_1fupul$=function(t){return!1},pi.prototype.dispatch_5bn72i$=function(t,e){var i=t.get_j3r2sn$(bi());if(null==i)throw K("Dispatchers.Unconfined.dispatch function can only be used by the yield function. If you wrap Unconfined dispatcher in your code, make sure you properly delegate isDispatchNeeded and dispatch calls.");i.dispatcherWasUnconfined=!0},pi.prototype.toString=function(){return"Dispatchers.Unconfined"},pi.$metadata$={kind:k,simpleName:"Unconfined",interfaces:[Dt]};var ci=null;function hi(){return null===ci&&new pi,ci}function di(){bi(),N.call(this,bi()),this.dispatcherWasUnconfined=!1}function fi(){gi=this}fi.$metadata$={kind:k,simpleName:"Key",interfaces:[T]};var _i,mi,$i,yi,vi,gi=null;function bi(){return null===gi&&new fi,gi}function xi(t){return function(t){var i,n,o=t.context;if(wi(o),null==(n=e.isType(i=h(t),Vn)?i:null))return p;var r=n;if(r.dispatcher.isDispatchNeeded_1fupul$(o))r.dispatchYield_6v298r$(o,p);else{var s=new di;if(r.dispatchYield_6v298r$(o.plus_1fupul$(s),p),s.dispatcherWasUnconfined)return Hn(r)?l:p}return l}(t)}function wi(t){var e=t.get_j3r2sn$(xe());if(null!=e&&!e.isActive)throw e.getCancellationException()}function zi(t){return function(e){var i=mt(h(e));return t(i),i.getResult()}}function ki(){this.queue_0=new br,this.onCloseHandler_0=null}function Si(t,e){$r.call(this,t,new Oi(e))}function Ci(t,e,i){u.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$element=e}function Ni(t){return function(){return t.isBufferFull}}function Ei(t,e){yr.call(this,e),this.element=t}function Ti(t){this.this$AbstractSendChannel=t}function Pi(t,e,i,n){Vi.call(this),this.pollResult_m5nr4l$_0=t,this.channel=e,this.select=i,this.block=n}function Oi(t){Vi.call(this),this.element=t}function Mi(){ki.call(this)}function ji(t){return function(){return t.isBufferEmpty}}function Ai(t){yr.call(this,t)}function Ii(t){this.this$AbstractChannel=t}function Ri(t){this.this$AbstractChannel=t}function Li(t){this.this$AbstractChannel=t}function Di(t,e){this.$outer=t,St.call(this),this.receive_0=e}function qi(t){this.channel=t,this.result=$i}function Fi(t,e){Ki.call(this),this.cont=t,this.receiveMode=e}function Bi(t,e){Ki.call(this),this.iterator=t,this.cont=e}function Ui(t,e,i,n){Ki.call(this),this.channel=t,this.select=e,this.block=i,this.receiveMode=n}function Vi(){mr.call(this)}function Gi(){}function Hi(t,e){Vi.call(this),this.pollResult_vo6xxe$_0=t,this.cont=e}function Wi(t){Vi.call(this),this.closeCause=t}function Ki(){mr.call(this)}function Xi(t){if(Mi.call(this),this.capacity=t,!(this.capacity>=1)){var i="ArrayChannel capacity must be at least 1, but "+this.capacity+" was specified";throw F(i.toString())}this.lock_0=new fr;var n=this.capacity;this.buffer_0=e.newArray(Y.min(n,8),null),this.head_0=0,this.size_0=0}function Yi(t,e,i){at.call(this,t,i),this._channel_0=e}function Zi(){}function Ji(){}function Qi(){}function tn(t){rn(),this.holder_0=t}function en(t){this.cause=t}function nn(){on=this}di.$metadata$={kind:s,simpleName:"YieldContext",interfaces:[N]},ki.prototype.offerInternal_11rb$=function(t){for(var e;;){if(null==(e=this.takeFirstReceiveOrPeekClosed()))return mi;var i=e;if(null!=i.tryResumeReceive_j43gjz$(t,null))return i.completeResumeReceive_11rb$(t),i.offerResult}},ki.prototype.offerSelectInternal_ys5ufj$=function(t,e){var i=this.describeTryOffer_0(t),n=e.performAtomicTrySelect_6q0pxr$(i);if(null!=n)return n;var o=i.result;return o.completeResumeReceive_11rb$(t),o.offerResult},Object.defineProperty(ki.prototype,"closedForSend_0",{configurable:!0,get:function(){var t,i,n;return null!=(i=e.isType(t=this.queue_0._prev,Wi)?t:null)?(this.helpClose_0(i),n=i):n=null,n}}),Object.defineProperty(ki.prototype,"closedForReceive_0",{configurable:!0,get:function(){var t,i,n;return null!=(i=e.isType(t=this.queue_0._next,Wi)?t:null)?(this.helpClose_0(i),n=i):n=null,n}}),ki.prototype.takeFirstSendOrPeekClosed_0=function(){var t,i=this.queue_0;t:do{var n=i._next;if(n===i){t=null;break t}if(!e.isType(n,Vi)){t=null;break t}if(e.isType(n,Wi)){t=n;break t}if(!n.remove())throw b("Should remove".toString());t=n}while(0);return t},ki.prototype.sendBuffered_0=function(t){var i=this.queue_0,n=new Oi(t),o=i._prev;return e.isType(o,Gi)?o:(i.addLast_l2j9rm$(n),null)},ki.prototype.describeSendBuffered_0=function(t){return new Si(this.queue_0,t)},Si.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Gi)?mi:null},Si.$metadata$={kind:s,simpleName:"SendBufferedDesc",interfaces:[$r]},Object.defineProperty(ki.prototype,"isClosedForSend",{configurable:!0,get:function(){return null!=this.closedForSend_0}}),Object.defineProperty(ki.prototype,"isFull",{configurable:!0,get:function(){return this.isFullImpl_0}}),Object.defineProperty(ki.prototype,"isFullImpl_0",{configurable:!0,get:function(){return!e.isType(this.queue_0._next,Gi)&&this.isBufferFull}}),ki.prototype.send_11rb$=function(t,e){if(this.offerInternal_11rb$(t)!==_i)return this.sendSuspend_0(t,e)},Ci.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},Ci.prototype=Object.create(u.prototype),Ci.prototype.constructor=Ci,Ci.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.$this.offerInternal_11rb$(this.local$element)===_i){if(this.state_0=2,this.result_0=xi(this),this.result_0===l)return l;continue}this.state_0=3;continue;case 1:throw this.exception_0;case 2:return;case 3:if(this.state_0=4,this.result_0=this.$this.sendSuspend_0(this.local$element,this),this.result_0===l)return l;continue;case 4:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ki.prototype.sendFair_1c3m6u$=function(t,e,i){var n=new Ci(this,t,e);return i?n:n.doResume(null)},ki.prototype.offer_11rb$=function(t){var i,n=this.offerInternal_11rb$(t);if(n!==_i){if(n===mi){if(null==(i=this.closedForSend_0))return!1;throw this.helpCloseAndGetSendException_0(i)}throw e.isType(n,Wi)?this.helpCloseAndGetSendException_0(n):b(("offerInternal returned "+n.toString()).toString())}return!0},ki.prototype.helpCloseAndGetSendException_0=function(t){return this.helpClose_0(t),t.sendException},ki.prototype.sendSuspend_0=function(t,i){return zi((n=this,o=t,function(t){for(;;){if(n.isFullImpl_0){var i=new Hi(o,t),r=n.enqueueSend_vs6846$(i);if(null==r)return void $t(t,i);if(e.isType(r,Wi))return void n.helpCloseAndResumeWithSendException_0(t,r);if(r!==yi&&!e.isType(r,Ki))throw b(("enqueueSend returned "+z(r)).toString())}var s=n.offerInternal_11rb$(o);if(s===_i)return void t.resumeWith_tl1gpc$(new f(p));if(s!==mi){if(e.isType(s,Wi))return void n.helpCloseAndResumeWithSendException_0(t,s);throw b(("offerInternal returned "+s.toString()).toString())}}}))(i);var n,o},ki.prototype.helpCloseAndResumeWithSendException_0=function(t,e){this.helpClose_0(e);var i=e.sendException;t.resumeWith_tl1gpc$(new f(S(i)))},ki.prototype.enqueueSend_vs6846$=function(t){if(this.isBufferAlwaysFull){var i=this.queue_0,n=i._prev;if(e.isType(n,Gi))return n;i.addLast_l2j9rm$(t)}else{var o,r=this.queue_0;t:do{var s=r._prev;if(e.isType(s,Gi))return s;if(!Ni(this)()){o=!1;break t}r.addLast_l2j9rm$(t),o=!0}while(0);if(!o)return yi}return null},ki.prototype.close_dbl4no$$default=function(t){var i,n,o=new Wi(t),s=this.queue_0;t:do{if(e.isType(s._prev,Wi)){n=!1;break t}s.addLast_l2j9rm$(o),n=!0}while(0);var a=n,l=a?o:e.isType(i=this.queue_0._prev,Wi)?i:r();return this.helpClose_0(l),a&&this.invokeOnCloseHandler_0(t),a},ki.prototype.invokeOnCloseHandler_0=function(t){var e,i,n=this.onCloseHandler_0;null!==n&&n!==vi&&(i=this).onCloseHandler_0===n&&(i.onCloseHandler_0=vi,1)&&("function"==typeof(e=n)?e:r())(t)},ki.prototype.invokeOnClose_f05bi3$=function(t){if(null!=(i=this).onCloseHandler_0||(i.onCloseHandler_0=t,0)){var e=this.onCloseHandler_0;if(e===vi)throw b("Another handler was already registered and successfully invoked");throw b("Another handler was already registered: "+z(e))}var i,n=this.closedForSend_0;null!=n&&function(e){return e.onCloseHandler_0===t&&(e.onCloseHandler_0=vi,!0)}(this)&&t(n.closeCause)},ki.prototype.helpClose_0=function(t){for(var i,n,s=new Jn;null!=(n=e.isType(i=t._prev,Ki)?i:null);){var a=n;a.remove()?s=s.plus_11rb$(a):a.helpRemove()}var l,u,p,c=s;if(null!=(l=c.holder_0))if(e.isType(l,G))for(var h=e.isType(p=c.holder_0,G)?p:r(),d=h.size-1|0;d>=0;d--)h.get_za3lpa$(d).resumeReceiveClosed_1zqbm$(t);else(null==(u=c.holder_0)||e.isType(u,o)?u:r()).resumeReceiveClosed_1zqbm$(t);this.onClosedIdempotent_l2j9rm$(t)},ki.prototype.onClosedIdempotent_l2j9rm$=function(t){},ki.prototype.takeFirstReceiveOrPeekClosed=function(){var t,i=this.queue_0;t:do{var n=i._next;if(n===i){t=null;break t}if(!e.isType(n,Gi)){t=null;break t}if(e.isType(n,Wi)){t=n;break t}if(!n.remove())throw b("Should remove".toString());t=n}while(0);return t},ki.prototype.describeTryOffer_0=function(t){return new Ei(t,this.queue_0)},Ei.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Gi)?null:mi},Ei.prototype.onPrepare_xe32vn$=function(t){var i,n;return null==(n=(e.isType(i=t.affected,Gi)?i:r()).tryResumeReceive_j43gjz$(this.element,t))?wn:n===gn?gn:null},Ei.$metadata$={kind:s,simpleName:"TryOfferDesc",interfaces:[yr]},Ti.prototype.registerSelectClause2_rol3se$=function(t,e,i){this.this$AbstractSendChannel.registerSelectSend_0(t,e,i)},Ti.$metadata$={kind:s,interfaces:[mo]},Object.defineProperty(ki.prototype,"onSend",{configurable:!0,get:function(){return new Ti(this)}}),ki.prototype.registerSelectSend_0=function(t,i,n){for(;;){if(t.isSelected)return;if(this.isFullImpl_0){var o=new Pi(i,this,t,n),r=this.enqueueSend_vs6846$(o);if(null==r)return void t.disposeOnSelect_rvfg84$(o);if(e.isType(r,Wi))throw this.helpCloseAndGetSendException_0(r);if(r!==yi&&!e.isType(r,Ki))throw b(("enqueueSend returned "+z(r)+" ").toString())}var s=this.offerSelectInternal_ys5ufj$(i,t);if(s===kn)return;if(s!==mi&&s!==gn){if(s===_i)return void ao(n,this,t.completion);throw e.isType(s,Wi)?this.helpCloseAndGetSendException_0(s):b(("offerSelectInternal returned "+s.toString()).toString())}}},ki.prototype.toString=function(){return Io(this)+"@"+Ao(this)+"{"+this.queueDebugStateString_0+"}"+this.bufferDebugString},Object.defineProperty(ki.prototype,"queueDebugStateString_0",{configurable:!0,get:function(){var t=this.queue_0._next;if(t===this.queue_0)return"EmptyQueue";var i=e.isType(t,Wi)?t.toString():e.isType(t,Ki)?"ReceiveQueued":e.isType(t,Vi)?"SendQueued":"UNEXPECTED:"+t,n=this.queue_0._prev;return n!==t&&(i+=",queueSize="+this.countQueueSize_0(),e.isType(n,Wi)&&(i+=",closedForSend="+n)),i}}),ki.prototype.countQueueSize_0=function(){for(var t={v:0},i=this.queue_0,n=i._next;!y(n,i);)e.isType(n,mr)&&(t.v=t.v+1|0),n=n._next;return t.v},Object.defineProperty(ki.prototype,"bufferDebugString",{configurable:!0,get:function(){return""}}),Object.defineProperty(Pi.prototype,"pollResult",{get:function(){return this.pollResult_m5nr4l$_0}}),Pi.prototype.tryResumeSend_uc1cc4$=function(t){var i;return null==(i=this.select.trySelectOther_uc1cc4$(t))||e.isType(i,to)?i:r()},Pi.prototype.completeResumeSend=function(){M(this.block,this.channel,this.select.completion)},Pi.prototype.dispose=function(){this.remove()},Pi.prototype.resumeSendClosed_1zqbm$=function(t){this.select.trySelect()&&this.select.resumeSelectWithException_tcv7n7$(t.sendException)},Pi.prototype.toString=function(){return"SendSelect@"+Ao(this)+"("+z(this.pollResult)+")["+this.channel+", "+this.select+"]"},Pi.$metadata$={kind:s,simpleName:"SendSelect",interfaces:[we,Vi]},Object.defineProperty(Oi.prototype,"pollResult",{configurable:!0,get:function(){return this.element}}),Oi.prototype.tryResumeSend_uc1cc4$=function(t){return null!=t&&t.finishPrepare(),i},Oi.prototype.completeResumeSend=function(){},Oi.prototype.resumeSendClosed_1zqbm$=function(t){},Oi.prototype.toString=function(){return"SendBuffered@"+Ao(this)+"("+this.element+")"},Oi.$metadata$={kind:s,simpleName:"SendBuffered",interfaces:[Vi]},ki.$metadata$={kind:s,simpleName:"AbstractSendChannel",interfaces:[Ji]},Mi.prototype.pollInternal=function(){for(var t;;){if(null==(t=this.takeFirstSendOrPeekClosed_0()))return $i;var e=t;if(null!=e.tryResumeSend_uc1cc4$(null))return e.completeResumeSend(),e.pollResult}},Mi.prototype.pollSelectInternal_y5yyj0$=function(t){var e=this.describeTryPoll_0(),i=t.performAtomicTrySelect_6q0pxr$(e);return null!=i?i:(e.result.completeResumeSend(),e.result.pollResult)},Object.defineProperty(Mi.prototype,"hasReceiveOrClosed_0",{configurable:!0,get:function(){return e.isType(this.queue_0._next,Gi)}}),Object.defineProperty(Mi.prototype,"isClosedForReceive",{configurable:!0,get:function(){return null!=this.closedForReceive_0&&this.isBufferEmpty}}),Object.defineProperty(Mi.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),Object.defineProperty(Mi.prototype,"isEmptyImpl_0",{configurable:!0,get:function(){return!e.isType(this.queue_0._next,Vi)&&this.isBufferEmpty}}),Mi.prototype.receive=function(t){var i,n=this.pollInternal();return n===$i||e.isType(n,Wi)?this.receiveSuspend_0(0,t):null==(i=n)||e.isType(i,o)?i:r()},Mi.prototype.receiveSuspend_0=function(t,i){return zi((n=t,s=this,function(t){for(var i,a,l=new Fi(e.isType(i=t,_t)?i:r(),n);;){if(s.enqueueReceive_0(l))return void s.removeReceiveOnCancel_0(t,l);var u=s.pollInternal();if(e.isType(u,Wi))return void l.resumeReceiveClosed_1zqbm$(u);if(u!==$i){var c=l.resumeValue_11rb$(null==(a=u)||e.isType(a,o)?a:r());return void t.resumeWith_tl1gpc$(new f(c))}}return p}))(i);var n,s},Mi.prototype.enqueueReceiveInternal_i292ax$=function(t){var i;if(this.isBufferAlwaysEmpty){var n,o=this.queue_0;t:do{if(e.isType(o._prev,Vi)){n=!1;break t}o.addLast_l2j9rm$(t),n=!0}while(0);i=n}else{var r,s=this.queue_0;t:do{if(e.isType(s._prev,Vi)){r=!1;break t}if(!ji(this)()){r=!1;break t}s.addLast_l2j9rm$(t),r=!0}while(0);i=r}return i},Mi.prototype.enqueueReceive_0=function(t){var e=this.enqueueReceiveInternal_i292ax$(t);return e&&this.onReceiveEnqueued(),e},Mi.prototype.receiveOrNull=function(t){var i,n=this.pollInternal();return n===$i||e.isType(n,Wi)?this.receiveSuspend_0(1,t):null==(i=n)||e.isType(i,o)?i:r()},Mi.prototype.receiveOrNullResult_0=function(t){var i;if(e.isType(t,Wi)){if(null!=t.closeCause)throw t.closeCause;return null}return null==(i=t)||e.isType(i,o)?i:r()},Mi.prototype.receiveOrClosed=function(t){var i,n,s=this.pollInternal();return s!==$i?(e.isType(s,Wi)?i=new tn(new en(s.closeCause)):(rn(),i=new tn(null==(n=s)||e.isType(n,o)?n:r())),i):this.receiveSuspend_0(2,t)},Mi.prototype.poll=function(){var t=this.pollInternal();return t===$i?null:this.receiveOrNullResult_0(t)},Mi.prototype.cancel_dbl4no$$default=function(t){return this.cancelInternal_fg6mcv$(t)},Mi.prototype.cancel_m4sck1$$default=function(t){this.cancelInternal_fg6mcv$(null!=t?t:Wo(Io(this)+" was cancelled"))},Mi.prototype.cancelInternal_fg6mcv$=function(t){var e=this.close_dbl4no$(t);return this.onCancelIdempotent_6taknv$(e),e},Mi.prototype.onCancelIdempotent_6taknv$=function(t){var i;if(null==(i=this.closedForSend_0))throw b("Cannot happen".toString());for(var n=i,s=new Jn;;){var a,l=n._prev;if(e.isType(l,br))break;l.remove()?s=s.plus_11rb$(e.isType(a=l,Vi)?a:r()):l.helpRemove()}var u,p,c,h=s;if(null!=(u=h.holder_0))if(e.isType(u,G))for(var d=e.isType(c=h.holder_0,G)?c:r(),f=d.size-1|0;f>=0;f--)d.get_za3lpa$(f).resumeSendClosed_1zqbm$(n);else(null==(p=h.holder_0)||e.isType(p,o)?p:r()).resumeSendClosed_1zqbm$(n)},Mi.prototype.iterator=function(){return new qi(this)},Mi.prototype.describeTryPoll_0=function(){return new Ai(this.queue_0)},Ai.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Vi)?null:$i},Ai.prototype.onPrepare_xe32vn$=function(t){var i,n;return null==(n=(e.isType(i=t.affected,Vi)?i:r()).tryResumeSend_uc1cc4$(t))?wn:n===gn?gn:null},Ai.$metadata$={kind:s,simpleName:"TryPollDesc",interfaces:[yr]},Ii.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,o;o=e.isType(n=i,X)?n:r(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,0,o)},Ii.$metadata$={kind:s,interfaces:[_o]},Object.defineProperty(Mi.prototype,"onReceive",{configurable:!0,get:function(){return new Ii(this)}}),Ri.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,o;o=e.isType(n=i,X)?n:r(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,1,o)},Ri.$metadata$={kind:s,interfaces:[_o]},Object.defineProperty(Mi.prototype,"onReceiveOrNull",{configurable:!0,get:function(){return new Ri(this)}}),Li.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,o;o=e.isType(n=i,X)?n:r(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,2,o)},Li.$metadata$={kind:s,interfaces:[_o]},Object.defineProperty(Mi.prototype,"onReceiveOrClosed",{configurable:!0,get:function(){return new Li(this)}}),Mi.prototype.registerSelectReceiveMode_0=function(t,e,i){for(;;){if(t.isSelected)return;if(this.isEmptyImpl_0){if(this.enqueueReceiveSelect_0(t,i,e))return}else{var n=this.pollSelectInternal_y5yyj0$(t);if(n===kn)return;n!==$i&&n!==gn&&this.tryStartBlockUnintercepted_0(i,t,e,n)}}},Mi.prototype.tryStartBlockUnintercepted_0=function(t,i,n,s){var a,l;if(e.isType(s,Wi))switch(n){case 0:throw s.receiveException;case 2:if(!i.trySelect())return;ao(t,new tn(new en(s.closeCause)),i.completion);break;case 1:if(null!=s.closeCause)throw s.receiveException;if(!i.trySelect())return;ao(t,null,i.completion)}else 2===n?(e.isType(s,Wi)?a=new tn(new en(s.closeCause)):(rn(),a=new tn(null==(l=s)||e.isType(l,o)?l:r())),ao(t,a,i.completion)):ao(t,s,i.completion)},Mi.prototype.enqueueReceiveSelect_0=function(t,e,i){var n=new Ui(this,t,e,i),o=this.enqueueReceive_0(n);return o&&t.disposeOnSelect_rvfg84$(n),o},Mi.prototype.takeFirstReceiveOrPeekClosed=function(){var t=ki.prototype.takeFirstReceiveOrPeekClosed.call(this);return null==t||e.isType(t,Wi)||this.onReceiveDequeued(),t},Mi.prototype.onReceiveEnqueued=function(){},Mi.prototype.onReceiveDequeued=function(){},Mi.prototype.removeReceiveOnCancel_0=function(t,e){t.invokeOnCancellation_f05bi3$(new Di(this,e))},Di.prototype.invoke=function(t){this.receive_0.remove()&&this.$outer.onReceiveDequeued()},Di.prototype.toString=function(){return"RemoveReceiveOnCancel["+this.receive_0+"]"},Di.$metadata$={kind:s,simpleName:"RemoveReceiveOnCancel",interfaces:[St]},qi.prototype.hasNext=function(t){return this.result!==$i?this.hasNextResult_0(this.result):(this.result=this.channel.pollInternal(),this.result!==$i?this.hasNextResult_0(this.result):this.hasNextSuspend_0(t))},qi.prototype.hasNextResult_0=function(t){if(e.isType(t,Wi)){if(null!=t.closeCause)throw t.receiveException;return!1}return!0},qi.prototype.hasNextSuspend_0=function(t){return zi((i=this,function(t){for(var n=new Bi(i,t);;){if(i.channel.enqueueReceive_0(n))return void i.channel.removeReceiveOnCancel_0(t,n);var o=i.channel.pollInternal();if(i.result=o,e.isType(o,Wi)){if(null==o.closeCause)t.resumeWith_tl1gpc$(new f(!1));else{var r=o.receiveException;t.resumeWith_tl1gpc$(new f(S(r)))}return}if(o!==$i)return void t.resumeWith_tl1gpc$(new f(!0))}return p}))(t);var i},qi.prototype.next=function(){var t,i=this.result;if(e.isType(i,Wi))throw i.receiveException;if(i!==$i)return this.result=$i,null==(t=i)||e.isType(t,o)?t:r();throw b("'hasNext' should be called prior to 'next' invocation")},qi.$metadata$={kind:s,simpleName:"Itr",interfaces:[sn]},Fi.prototype.resumeValue_11rb$=function(t){return 2===this.receiveMode?new tn(t):t},Fi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null==this.cont.tryResume_19pj23$(this.resumeValue_11rb$(t),null!=e?e.desc:null)?null:(null!=e&&e.finishPrepare(),i)},Fi.prototype.completeResumeReceive_11rb$=function(t){this.cont.completeResume_za3rmp$(i)},Fi.prototype.resumeReceiveClosed_1zqbm$=function(t){if(1===this.receiveMode&&null==t.closeCause)this.cont.resumeWith_tl1gpc$(new f(null));else if(2===this.receiveMode){var e=this.cont,i=new tn(new en(t.closeCause));e.resumeWith_tl1gpc$(new f(i))}else{var n=this.cont,o=t.receiveException;n.resumeWith_tl1gpc$(new f(S(o)))}},Fi.prototype.toString=function(){return"ReceiveElement@"+Ao(this)+"[receiveMode="+this.receiveMode+"]"},Fi.$metadata$={kind:s,simpleName:"ReceiveElement",interfaces:[Ki]},Bi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null==this.cont.tryResume_19pj23$(!0,null!=e?e.desc:null)?null:(null!=e&&e.finishPrepare(),i)},Bi.prototype.completeResumeReceive_11rb$=function(t){this.iterator.result=t,this.cont.completeResume_za3rmp$(i)},Bi.prototype.resumeReceiveClosed_1zqbm$=function(t){var e=null==t.closeCause?this.cont.tryResume_19pj23$(!1):this.cont.tryResumeWithException_tcv7n7$(xr(t.receiveException,this.cont));null!=e&&(this.iterator.result=t,this.cont.completeResume_za3rmp$(e))},Bi.prototype.toString=function(){return"ReceiveHasNext@"+Ao(this)},Bi.$metadata$={kind:s,simpleName:"ReceiveHasNext",interfaces:[Ki]},Ui.prototype.tryResumeReceive_j43gjz$=function(t,i){var n;return null==(n=this.select.trySelectOther_uc1cc4$(i))||e.isType(n,to)?n:r()},Ui.prototype.completeResumeReceive_11rb$=function(t){M(this.block,2===this.receiveMode?new tn(t):t,this.select.completion)},Ui.prototype.resumeReceiveClosed_1zqbm$=function(t){if(this.select.trySelect())switch(this.receiveMode){case 0:this.select.resumeSelectWithException_tcv7n7$(t.receiveException);break;case 2:M(this.block,new tn(new en(t.closeCause)),this.select.completion);break;case 1:null==t.closeCause?M(this.block,null,this.select.completion):this.select.resumeSelectWithException_tcv7n7$(t.receiveException)}},Ui.prototype.dispose=function(){this.remove()&&this.channel.onReceiveDequeued()},Ui.prototype.toString=function(){return"ReceiveSelect@"+Ao(this)+"["+this.select+",receiveMode="+this.receiveMode+"]"},Ui.$metadata$={kind:s,simpleName:"ReceiveSelect",interfaces:[we,Ki]},Mi.$metadata$={kind:s,simpleName:"AbstractChannel",interfaces:[ln,ki]},Vi.$metadata$={kind:s,simpleName:"Send",interfaces:[mr]},Gi.$metadata$={kind:x,simpleName:"ReceiveOrClosed",interfaces:[]},Object.defineProperty(Hi.prototype,"pollResult",{get:function(){return this.pollResult_vo6xxe$_0}}),Hi.prototype.tryResumeSend_uc1cc4$=function(t){return null==this.cont.tryResume_19pj23$(p,null!=t?t.desc:null)?null:(null!=t&&t.finishPrepare(),i)},Hi.prototype.completeResumeSend=function(){this.cont.completeResume_za3rmp$(i)},Hi.prototype.resumeSendClosed_1zqbm$=function(t){var e=this.cont,i=t.sendException;e.resumeWith_tl1gpc$(new f(S(i)))},Hi.prototype.toString=function(){return"SendElement@"+Ao(this)+"("+z(this.pollResult)+")"},Hi.$metadata$={kind:s,simpleName:"SendElement",interfaces:[Vi]},Object.defineProperty(Wi.prototype,"sendException",{configurable:!0,get:function(){var t;return null!=(t=this.closeCause)?t:new dn(pn)}}),Object.defineProperty(Wi.prototype,"receiveException",{configurable:!0,get:function(){var t;return null!=(t=this.closeCause)?t:new fn(pn)}}),Object.defineProperty(Wi.prototype,"offerResult",{configurable:!0,get:function(){return this}}),Object.defineProperty(Wi.prototype,"pollResult",{configurable:!0,get:function(){return this}}),Wi.prototype.tryResumeSend_uc1cc4$=function(t){return null!=t&&t.finishPrepare(),i},Wi.prototype.completeResumeSend=function(){},Wi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null!=e&&e.finishPrepare(),i},Wi.prototype.completeResumeReceive_11rb$=function(t){},Wi.prototype.resumeSendClosed_1zqbm$=function(t){},Wi.prototype.toString=function(){return"Closed@"+Ao(this)+"["+z(this.closeCause)+"]"},Wi.$metadata$={kind:s,simpleName:"Closed",interfaces:[Gi,Vi]},Object.defineProperty(Ki.prototype,"offerResult",{configurable:!0,get:function(){return _i}}),Ki.$metadata$={kind:s,simpleName:"Receive",interfaces:[Gi,mr]},Object.defineProperty(Xi.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Xi.prototype,"isBufferEmpty",{configurable:!0,get:function(){return 0===this.size_0}}),Object.defineProperty(Xi.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Xi.prototype,"isBufferFull",{configurable:!0,get:function(){return this.size_0===this.capacity}}),Object.defineProperty(Xi.prototype,"isFull",{configurable:!0,get:function(){return this.isFullImpl_0}}),Object.defineProperty(Xi.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),Object.defineProperty(Xi.prototype,"isClosedForReceive",{configurable:!0,get:function(){return e.callGetter(this,Mi.prototype,"isClosedForReceive")}}),Xi.prototype.offerInternal_11rb$=function(t){var i={v:null};t:do{var n,o,r=this.size_0;if(null!=(n=this.closedForSend_0))return n;if(r<this.capacity){if(this.size_0=r+1|0,0===r)for(;null!=(o=this.takeFirstReceiveOrPeekClosed());){if(i.v=o,e.isType(i.v,Wi))return this.size_0=r,q(i.v);if(null!=q(i.v).tryResumeReceive_j43gjz$(t,null)){this.size_0=r;break t}}return this.ensureCapacity_0(r),this.buffer_0[(this.head_0+r|0)%this.buffer_0.length]=t,_i}return mi}while(0);return q(i.v).completeResumeReceive_11rb$(t),q(i.v).offerResult},Xi.prototype.offerSelectInternal_ys5ufj$=function(t,i){var n={v:null};t:do{var o,r=this.size_0;if(null!=(o=this.closedForSend_0))return o;if(r<this.capacity){if(this.size_0=r+1|0,0===r)e:for(;;){var s=this.describeTryOffer_0(t),a=i.performAtomicTrySelect_6q0pxr$(s);if(null==a){this.size_0=r,n.v=s.result;break t}if(a===mi)break e;if(a!==gn){if(a===kn||e.isType(a,Wi))return this.size_0=r,a;throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(a)).toString())}}return i.trySelect()?(this.ensureCapacity_0(r),this.buffer_0[(this.head_0+r|0)%this.buffer_0.length]=t,_i):(this.size_0=r,kn)}return mi}while(0);return q(n.v).completeResumeReceive_11rb$(t),q(n.v).offerResult},Xi.prototype.enqueueSend_vs6846$=function(t){return Mi.prototype.enqueueSend_vs6846$.call(this,t)},Xi.prototype.ensureCapacity_0=function(t){if(t>=this.buffer_0.length){for(var i=2*this.buffer_0.length|0,n=this.capacity,o=Y.min(i,n),r=e.newArray(o,null),s=0;s<t;s++)r[s]=this.buffer_0[(this.head_0+s|0)%this.buffer_0.length];this.buffer_0=r,this.head_0=0}},Xi.prototype.pollInternal=function(){var t,i,n={v:null},o={v:!1},r={v:null},s=this.size_0;if(0===s)return null!=(t=this.closedForSend_0)?t:$i;r.v=this.buffer_0[this.head_0],this.buffer_0[this.head_0]=null,this.size_0=s-1|0;var a=$i;if(s===this.capacity)t:for(;null!=(i=this.takeFirstSendOrPeekClosed_0());)if(n.v=i,null!=q(n.v).tryResumeSend_uc1cc4$(null)){o.v=!0,a=q(n.v).pollResult;break t}return a===$i||e.isType(a,Wi)||(this.size_0=s,this.buffer_0[(this.head_0+s|0)%this.buffer_0.length]=a),this.head_0=(this.head_0+1|0)%this.buffer_0.length,o.v&&q(n.v).completeResumeSend(),r.v},Xi.prototype.pollSelectInternal_y5yyj0$=function(t){var i,n={v:null},o={v:!1},r={v:null},s=this.size_0;if(0===s)return null!=(i=this.closedForSend_0)?i:$i;r.v=this.buffer_0[this.head_0],this.buffer_0[this.head_0]=null,this.size_0=s-1|0;var a=$i;if(s===this.capacity)t:for(;;){var l=this.describeTryPoll_0(),u=t.performAtomicTrySelect_6q0pxr$(l);if(null==u){n.v=l.result,o.v=!0,a=q(n.v).pollResult;break t}if(u===$i)break t;if(u!==gn){if(u===kn)return this.size_0=s,this.buffer_0[this.head_0]=r.v,u;if(e.isType(u,Wi)){n.v=u,o.v=!0,a=u;break t}throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(u)).toString())}}if(a===$i||e.isType(a,Wi)){if(!t.trySelect())return this.size_0=s,this.buffer_0[this.head_0]=r.v,kn}else this.size_0=s,this.buffer_0[(this.head_0+s|0)%this.buffer_0.length]=a;return this.head_0=(this.head_0+1|0)%this.buffer_0.length,o.v&&q(n.v).completeResumeSend(),r.v},Xi.prototype.enqueueReceiveInternal_i292ax$=function(t){return Mi.prototype.enqueueReceiveInternal_i292ax$.call(this,t)},Xi.prototype.onCancelIdempotent_6taknv$=function(t){if(t){for(var e=this.size_0,i=0;i<e;i++)this.buffer_0[this.head_0]=0,this.head_0=(this.head_0+1|0)%this.buffer_0.length;this.size_0=0}Mi.prototype.onCancelIdempotent_6taknv$.call(this,t)},Object.defineProperty(Xi.prototype,"bufferDebugString",{configurable:!0,get:function(){return"(buffer:capacity="+this.capacity+",size="+this.size_0+")"}}),Xi.$metadata$={kind:s,simpleName:"ArrayChannel",interfaces:[Mi]},Ji.prototype.close_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.close_dbl4no$$default(t)},Ji.$metadata$={kind:x,simpleName:"SendChannel",interfaces:[]},Qi.prototype.cancel_m4sck1$=function(t,e){void 0===t&&(t=null),e?e(t):this.cancel_m4sck1$$default(t)},Qi.prototype.cancel=function(){this.cancel_m4sck1$(null)},Qi.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},Qi.$metadata$={kind:x,simpleName:"ReceiveChannel",interfaces:[]},Object.defineProperty(tn.prototype,"isClosed",{configurable:!0,get:function(){return e.isType(this.holder_0,en)}}),Object.defineProperty(tn.prototype,"value",{configurable:!0,get:function(){var t;if(e.isType(this.holder_0,en))throw b(pn.toString());return null==(t=this.holder_0)||e.isType(t,o)?t:r()}}),Object.defineProperty(tn.prototype,"valueOrNull",{configurable:!0,get:function(){var t;return e.isType(this.holder_0,en)?null:null==(t=this.holder_0)||e.isType(t,o)?t:r()}}),Object.defineProperty(tn.prototype,"closeCause",{configurable:!0,get:function(){if(!e.isType(this.holder_0,en))throw b("Channel was not closed".toString());return this.holder_0.cause}}),tn.prototype.toString=function(){return e.isType(this.holder_0,en)?this.holder_0.toString():"Value("+z(this.holder_0)+")"},en.prototype.equals=function(t){return e.isType(t,en)&&y(this.cause,t.cause)},en.prototype.hashCode=function(){var t,e=this.cause;return null!=(t=null!=e?J(e):null)?t:0},en.prototype.toString=function(){return"Closed("+z(this.cause)+")"},en.$metadata$={kind:s,simpleName:"Closed",interfaces:[]},nn.prototype.value_41v7ql$=v("kotlinx-coroutines-core.kotlinx.coroutines.channels.ValueOrClosed.Companion.value_41v7ql$",g((function(){var e=t.kotlinx.coroutines.channels.ValueOrClosed;return function(t){return new e(t)}}))),nn.prototype.closed_8qz7vd$=v("kotlinx-coroutines-core.kotlinx.coroutines.channels.ValueOrClosed.Companion.closed_8qz7vd$",g((function(){var e=t.kotlinx.coroutines.channels.ValueOrClosed.Closed,i=t.kotlinx.coroutines.channels.ValueOrClosed;return function(t){return new i(new e(t))}}))),nn.$metadata$={kind:k,simpleName:"Companion",interfaces:[]};var on=null;function rn(){return null===on&&new nn,on}function sn(){}function an(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function ln(){hn()}function un(){cn=this,this.UNLIMITED=2147483647,this.RENDEZVOUS=0,this.CONFLATED=-1,this.BUFFERED=-2,this.OPTIONAL_CHANNEL_8be2vx$=-3,this.DEFAULT_BUFFER_PROPERTY_NAME="kotlinx.coroutines.channels.defaultBuffer",this.CHANNEL_DEFAULT_CAPACITY_8be2vx$=eo(this.DEFAULT_BUFFER_PROPERTY_NAME,64,1,2147483646)}tn.$metadata$={kind:s,simpleName:"ValueOrClosed",interfaces:[]},tn.prototype.unbox=function(){return this.holder_0},tn.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.holder_0)|0},tn.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.holder_0,t.holder_0)},an.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},an.prototype=Object.create(u.prototype),an.prototype.constructor=an,an.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.hasNext(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:if(!this.result_0)throw new fn(pn);return this.$this.next();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},sn.prototype.next0=function(t,e){var i=new an(this,t);return e?i:i.doResume(null)},sn.$metadata$={kind:x,simpleName:"ChannelIterator",interfaces:[]},un.$metadata$={kind:k,simpleName:"Factory",interfaces:[]};var pn,cn=null;function hn(){return null===cn&&new un,cn}function dn(t){b(t,this),this.name="ClosedSendChannelException"}function fn(t){Z.call(this,t),this.name="ClosedReceiveChannelException"}function _n(t,e,i){at.call(this,t,i),this._channel_0=e}function mn(){ConflatedBroadcastChannel$Companion_getInstance(),this._state_0=ConflatedBroadcastChannel$Companion_getInstance().INITIAL_STATE_0,this._updating_0=0,this.onCloseHandler_0=null}function $n(){An(),Mi.call(this),this.lock_0=new fr,this.value_0=An().EMPTY_0}function yn(){jn=this,this.EMPTY_0=new to("EMPTY")}ln.$metadata$={kind:x,simpleName:"Channel",interfaces:[Qi,Ji]},dn.$metadata$={kind:s,simpleName:"ClosedSendChannelException",interfaces:[U]},fn.$metadata$={kind:s,simpleName:"ClosedReceiveChannelException",interfaces:[Z]},v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEach_ur1qrk$",g((function(){var t=e.kotlin.Unit;return function(i,n,o){var r=i.openSubscription();try{var s;for(s=r.iterator();e.suspendCall(s.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)n(s.next())}finally{r.cancel_m4sck1$()}return t}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEach_fsi0yh$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)r(l.next())}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}return i}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEachIndexed_pji9r4$",g((function(){var i=e.kotlin.collections.IndexedValue,n=e.kotlin.Unit,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();s(new i((c=l.v,l.v=c+1|0,c),h))}}catch(t){throw e.isType(t,o)?(u=t,t):t}finally{r(t,u)}e.setCoroutineResult(n,e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.elementAtOrElse_m7muas$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,r,s){var a=null;try{var l,u;if(o<0)return r(o);var p=0;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=l.next();if(o===(p=(u=p)+1|0,u))return c}return r(o)}catch(t){throw e.isType(t,i)?(a=t,t):t}finally{n(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.find_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){t:do{var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var u=l.next();if(r(u)){e.setCoroutineResult(u,e.coroutineReceiver());break t}}}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}e.setCoroutineResult(i,e.coroutineReceiver()),e.setCoroutineResult(null,e.coroutineReceiver())}while(0);return e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.findLast_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:null},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();r(p)&&(a.v=p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),e.setCoroutineResult(a.v,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.first_4c38lx$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.NoSuchElementException,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();if(s(p))return p}}catch(t){throw e.isType(t,o)?(l=t,t):t}finally{r(t,l)}throw e.setCoroutineResult(i,e.coroutineReceiver()),new n("ReceiveChannel contains no element matching the predicate.")}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.firstOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var u=l.next();if(r(u))return u}}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),null}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.indexOfFirst_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){if(r(u.next()))return a.v;a.v=a.v+1|0}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),-1}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.indexOfLast_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:-1},l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)r(p.next())&&(a.v=l.v),l.v=l.v+1|0}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.last_4c38lx$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.NoSuchElementException,o=Object,r=e.throwCCE,s=Error,a=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,l,u){var p,c={v:null},h={v:!1},d=null;try{var f;for(f=t.iterator();e.suspendCall(f.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var _=f.next();l(_)&&(c.v=_,h.v=!0)}}catch(t){throw e.isType(t,s)?(d=t,t):t}finally{a(t,d)}if(e.setCoroutineResult(i,e.coroutineReceiver()),!h.v)throw new n("ReceiveChannel contains no element matching the predicate.");return null==(p=c.v)||e.isType(p,o)?p:r()}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.lastOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:null},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();r(p)&&(a.v=p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.single_4c38lx$",g((function(){var i=e.kotlin.IllegalArgumentException_init_pdl1vj$,n=e.kotlin.Unit,o=e.kotlin.NoSuchElementException,r=Object,s=e.throwCCE,a=Error,l=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,u,p){var c,h={v:null},d={v:!1},f=null;try{var _;for(_=t.iterator();e.suspendCall(_.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var m=_.next();if(u(m)){if(d.v)throw i("ReceiveChannel contains more than one matching element.");h.v=m,d.v=!0}}}catch(t){throw e.isType(t,a)?(f=t,t):t}finally{l(t,f)}if(e.setCoroutineResult(n,e.coroutineReceiver()),!d.v)throw new o("ReceiveChannel contains no element matching the predicate.");return null==(c=h.v)||e.isType(c,r)?c:s()}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.singleOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:null},l={v:!1},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();if(r(c)){if(l.v)return null;a.v=c,l.v=!0}}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),l.v?a.v:null}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterIndexedTo_4jknp0$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=new n((h=u.v,u.v=h+1|0,h),d),_=f.component1(),m=f.component2();a(_,m)&&s.add_11rb$(m)}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterIndexedTo_170qh7$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=new n((h=u.v,u.v=h+1|0,h),d),_=f.component1(),m=f.component2();a(_,m)&&e.suspendCall(s.send_11rb$(m,e.coroutineReceiver()))}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterNotTo_ekipu8$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)||r.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterNotTo_6rlmvt$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)||e.suspendCall(r.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterTo_ekipu8$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)&&r.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterTo_6rlmvt$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)&&e.suspendCall(r.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associate_9m65rd$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=i(),u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=s(p.next());l.put_xwzc9p$(c.first,c.second)}}catch(t){throw e.isType(t,o)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(l,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateBy_ku6tnm$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=i(),u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();l.put_xwzc9p$(s(c),c)}}catch(t){throw e.isType(t,o)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(l,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateBy_lt7yd0$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u=i(),p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h=c.next();u.put_xwzc9p$(s(h),a(h))}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(u,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateByTo_kkd6mf$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();r.put_xwzc9p$(s(p),p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateByTo_pjfcwb$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a,l){var u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();r.put_xwzc9p$(s(c),a(c))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateTo_lcmuai$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=s(u.next());r.put_xwzc9p$(p.first,p.second)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupBy_ku6tnm$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.collections.ArrayList_init_287e2$,o=e.kotlin.Unit,r=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l){var u=i(),p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=a(d),_=u.get_11rb$(f);if(null==_){var m=n();u.put_xwzc9p$(f,m),h=m}else h=_;h.add_11rb$(d)}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{s(t,p)}return e.setCoroutineResult(o,e.coroutineReceiver()),e.setCoroutineResult(u,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupBy_lt7yd0$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.collections.ArrayList_init_287e2$,o=e.kotlin.Unit,r=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l,u){var p=i(),c=null;try{var h;for(h=t.iterator();e.suspendCall(h.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var d,f=h.next(),_=a(f),m=p.get_11rb$(_);if(null==m){var $=n();p.put_xwzc9p$(_,$),d=$}else d=m;d.add_11rb$(l(f))}}catch(t){throw e.isType(t,r)?(c=t,t):t}finally{s(t,c)}return e.setCoroutineResult(o,e.coroutineReceiver()),e.setCoroutineResult(p,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupByTo_l6oevu$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next(),d=a(h),f=s.get_11rb$(d);if(null==f){var _=i();s.put_xwzc9p$(d,_),c=_}else c=f;c.add_11rb$(h)}}catch(t){throw e.isType(t,o)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupByTo_z9qy88$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l,u){var p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=a(d),_=s.get_11rb$(f);if(null==_){var m=i();s.put_xwzc9p$(f,m),h=m}else h=_;h.add_11rb$(l(d))}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(n,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedNotNullTo_dz8aer$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d,f=c.next(),_=new n((h=u.v,u.v=h+1|0,h),f);null!=(d=a(_.component1(),_.component2()))&&s.add_11rb$(d)}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedNotNullTo_4m0vhw$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,o=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d,f=c.next(),_=new n((h=u.v,u.v=h+1|0,h),f);null!=(d=a(_.component1(),_.component2()))&&e.suspendCall(s.send_11rb$(d,e.coroutineReceiver()))}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedTo_a7sgbu$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();r.add_11rb$(s((c=l.v,l.v=c+1|0,c),h))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedTo_whewhd$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();e.suspendCall(r.send_11rb$(s((c=l.v,l.v=c+1|0,c),h),e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapNotNullTo_fo1is7$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p;null!=(p=s(u.next()))&&r.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapNotNullTo_wo1rcg$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p;null!=(p=s(u.next()))&&e.suspendCall(r.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapTo_pa4xkq$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();r.add_11rb$(s(p))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapTo_q9ku9f$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();e.suspendCall(r.send_11rb$(s(p),e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),r}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.all_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(!r(l.next()))return!1}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!0}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.any_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(r(l.next()))return!0}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!1}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.count_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)r(u.next())&&(a.v=a.v+1|0)}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.fold_kq4l36$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l={v:r},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();l.v=s(l.v,c)}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),l.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.foldIndexed_wviyg6$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s,a){var l={v:0},u={v:r},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next();u.v=s((h=l.v,l.v=h+1|0,h),u.v,d)}}catch(t){throw e.isType(t,n)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),u.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.maxBy_mqfd03$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,r){var s=null;try{var a=t.iterator();if(e.suspendCall(a.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))return null;for(var l=a.next(),u=o(l);e.suspendCall(a.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=a.next(),c=o(p);e.compareTo(u,c)<0&&(l=p,u=c)}return l}catch(t){throw e.isType(t,i)?(s=t,t):t}finally{n(t,s)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.minBy_mqfd03$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,r){var s=null;try{var a=t.iterator();if(e.suspendCall(a.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))return null;for(var l=a.next(),u=o(l);e.suspendCall(a.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=a.next(),c=o(p);e.compareTo(u,c)>0&&(l=p,u=c)}return l}catch(t){throw e.isType(t,i)?(s=t,t):t}finally{n(t,s)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.none_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(r(l.next()))return!1}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!0}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.reduce_vk3vfd$",g((function(){var i=e.kotlin.UnsupportedOperationException_init_pdl1vj$,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l=t.iterator();if(e.suspendCall(l.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))throw i("Empty channel can't be reduced.");for(var u=l.next();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)u=r(u,l.next());return u}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.reduceIndexed_a6mkxp$",g((function(){var i=e.kotlin.UnsupportedOperationException_init_pdl1vj$,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a=null;try{var l,u=t.iterator();if(e.suspendCall(u.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))throw i("Empty channel can't be reduced.");for(var p=1,c=u.next();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)c=r((p=(l=p)+1|0,l),c,u.next());return c}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{o(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.sumBy_fl2dz0$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();a.v=a.v+r(p)|0}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.sumByDouble_jy8qhg$",g((function(){var i=e.kotlin.Unit,n=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();a.v+=r(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{o(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.partition_4c38lx$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,o=e.kotlin.Pair,r=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l){var u=i(),p=i(),c=null;try{var h;for(h=t.iterator();e.suspendCall(h.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var d=h.next();a(d)?u.add_11rb$(d):p.add_11rb$(d)}}catch(t){throw e.isType(t,r)?(c=t,t):t}finally{s(t,c)}return e.setCoroutineResult(n,e.coroutineReceiver()),new o(u,p)}}))),Object.defineProperty($n.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isBufferEmpty",{configurable:!0,get:function(){return this.value_0===An().EMPTY_0}}),Object.defineProperty($n.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isBufferFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),yn.$metadata$={kind:k,simpleName:"Companion",interfaces:[]};var vn,gn,bn,xn,wn,zn,kn,Sn,Cn,Nn,En,Tn,Pn,On,Mn,jn=null;function An(){return null===jn&&new yn,jn}function In(){Mi.call(this)}function Rn(){}function Ln(){Mi.call(this)}function Dn(){}function qn(){this.elements_0=e.newArray(16,null),this.head_0=0,this.tail_0=0}function Fn(){}function Bn(){Fn.call(this),this._consensus_c6dvpx$_0=vn}function Un(){this.atomicOp_ss7ttb$_0=this.atomicOp_ss7ttb$_0}function Vn(t,i){var n;Xn.call(this,0),this.dispatcher=t,this.continuation=i,this._state_8be2vx$=bn,this.callerFrame_w1cgfa$_0=e.isType(n=this.continuation,kr)?n:null,this.countOrElement_8be2vx$=(this.context,0),this._reusableCancellableContinuation_0=null}function Gn(t,i){if(e.isType(t,Vn)){var n=jt(i);if(t.dispatcher.isDispatchNeeded_1fupul$(t.context))t._state_8be2vx$=n,t.resumeMode=1,t.dispatcher.dispatch_5bn72i$(t.context,t);else{var o=_e().eventLoop_8be2vx$;if(o.isUnconfinedLoopActive)t._state_8be2vx$=n,t.resumeMode=1,o.dispatchUnconfined_4avnfa$(t);else{o.incrementUseCount_6taknv$(!0);try{var r;t:do{var s=t.context.get_j3r2sn$(ve.Key);if(null!=s&&!s.isActive){var a=s.getCancellationException();t.resumeWith_tl1gpc$(new f(S(a))),r=!0;break t}r=!1}while(0);for(r||(t.context,t.continuation.resumeWith_tl1gpc$(i));o.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{o.decrementUseCount_6taknv$(!0)}}}}else t.resumeWith_tl1gpc$(i)}function Hn(t){var i;t:do{var n,o=_e().eventLoop_8be2vx$;if(o.isUnconfinedQueueEmpty){i=!1;break t}if(o.isUnconfinedLoopActive)t._state_8be2vx$=p,t.resumeMode=1,o.dispatchUnconfined_4avnfa$(t),n=!0;else{o.incrementUseCount_6taknv$(!0);try{for(t.run();o.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{o.decrementUseCount_6taknv$(!0)}n=!1}i=n}while(0);return i}function Wn(t){return 1===t}function Kn(t){return 0===t||1===t}function Xn(t){pr.call(this),this.resumeMode=t}function Yn(t,i){var n=t.delegate;if(Kn(i)&&e.isType(n,Vn)&&Wn(i)===Wn(t.resumeMode)){var o=n.dispatcher,r=n.context;o.isDispatchNeeded_1fupul$(r)?o.dispatch_5bn72i$(r,t):function(t){var i=_e().eventLoop_8be2vx$;if(i.isUnconfinedLoopActive)i.dispatchUnconfined_4avnfa$(t);else{i.incrementUseCount_6taknv$(!0);try{for(Zn(t,t.delegate,2);i.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{i.decrementUseCount_6taknv$(!0)}}}(t)}else Zn(t,n,i)}function Zn(t,i,n){var o,s,a=t.takeState(),l=null!=(o=t.getExceptionalResult_8ea4ql$(a))?xr(o):null,u=new f(null!=l?S(l):t.getSuccessfulResult_tpy1pm$(a));switch(n){case 0:i.resumeWith_tl1gpc$(u);break;case 1:Gn(i,u);break;case 2:var p=e.isType(s=i,Vn)?s:r();p.context,p.continuation.resumeWith_tl1gpc$(u);break;default:throw b(("Invalid mode "+n).toString())}}function Jn(t){void 0===t&&(t=null),this.holder_0=t}function Qn(t,e){at.call(this,t,!0),this.uCont=e}function to(t){this.symbol=t}function eo(t,i,n,o){return void 0===n&&(n=1),void 0===o&&(o=2147483647),io(0,e.Long.fromInt(i),e.Long.fromInt(n),e.Long.fromInt(o)).toInt()}function io(t,e,i,n){return void 0===i&&(i=I),void 0===n&&(n=L),e}function no(t,i){try{Gn(h(et(t,i)),new f(p))}catch(t){if(!e.isType(t,w))throw t;i.resumeWith_tl1gpc$(new f(S(t)))}}function oo(t,i,n){try{Gn(h(m(t,i,n)),new f(p))}catch(t){if(!e.isType(t,w))throw t;n.resumeWith_tl1gpc$(new f(S(t)))}}function ro(t,i){try{Gn(h(t),new f(p))}catch(t){if(!e.isType(t,w))throw t;i.resumeWith_tl1gpc$(new f(S(t)))}}function so(t,i){t:do{var n,s,a=i;try{n=t(a,!1)}catch(t){if(e.isType(t,w)){var u=t;a.resumeWith_tl1gpc$(new f(S(u)));break t}throw t}if(n!==l){var p=null==(s=n)||e.isType(s,o)?s:r();a.resumeWith_tl1gpc$(new f(p))}}while(0)}function ao(t,i,n){t:do{var s,a,u=n;try{s=t(i,u,!1)}catch(t){if(e.isType(t,w)){var p=t;u.resumeWith_tl1gpc$(new f(S(p)));break t}throw t}if(s!==l){var c=null==(a=s)||e.isType(a,o)?a:r();u.resumeWith_tl1gpc$(new f(c))}}while(0)}function lo(t,i){t:do{var n,s,a=i;try{i.context,n=t(a,!1)}catch(t){if(e.isType(t,w)){var u=t;a.resumeWith_tl1gpc$(new f(S(u)));break t}throw t}if(n!==l){var p=null==(s=n)||e.isType(s,o)?s:r();a.resumeWith_tl1gpc$(new f(p))}}while(0)}function uo(t,i,n){t:do{var s,a,u=n;try{n.context,s=t(i,u,!1)}catch(t){if(e.isType(t,w)){var p=t;u.resumeWith_tl1gpc$(new f(S(p)));break t}throw t}if(s!==l){var c=null==(a=s)||e.isType(a,o)?a:r();u.resumeWith_tl1gpc$(new f(c))}}while(0)}function po(t,i,n){var o;t.initParentJob_8be2vx$();t:do{var r;try{r=n(i,t,!1)}catch(t){if(!e.isType(t,w))throw t;r=new Rt(t)}var s=r;if(s===l){o=l;break t}var a=t.makeCompletingOnce_8ea4ql$(s);if(a===Ee){o=l;break t}if(e.isType(a,Rt))throw xr(a.cause,t.uCont);o=Ge(a)}while(0);return o}function co(t){this.closure$block=t}function ho(){}function fo(){}function _o(){}function mo(){}function $o(){}function yo(){this.number_0=I}function vo(t){br.call(this),this.uCont_0=t,this._state_0=zn,this._result_0=Sn,this._parentHandle_0=null}function go(t,e){this.$outer=t,ni.call(this,e)}function bo(t){Fn.call(this),this.otherOp=t}function xo(t,e){Bn.call(this),this.impl=t,this.desc=e,this.opSequence_oe6pw4$_0=Nn.next(),this.desc.atomicOp=this}function wo(t){mr.call(this),this.handle=t}function zo(t){this.instance=new vo(t),this.clauses=Q()}function ko(t){this.locked=t}function So(){mr.call(this)}function Co(){}function No(t,e){y(typeof t,"function")?t(e):t.invoke(e)}function Eo(){if(y(typeof navigator,Pn)||null==navigator||"ReactNative"!=navigator.product){if(function(){var t=!y(typeof navigator,Pn)&&null!=navigator&&null!=navigator.userAgent;t&&(t=!y(typeof navigator.userAgent,Pn));var e=t;return e&&(e=!y(typeof navigator.userAgent.match,Pn)),e&&navigator.userAgent.match("\\bjsdom\\b")}())return tr();var t=!y(typeof window,Pn)&&null!=window;return t&&(t=!y(typeof window.addEventListener,Pn)),t?hr(window):y(typeof n,Pn)?nr():tr()}return tr()}function To(){var t;return e.isType(t=qo().Default,pe)?t:r()}function Po(t,e){var i=t.coroutineContext.plus_1fupul$(e);return i!==qo().Default&&null==i.get_j3r2sn$($.Key)?i.plus_1fupul$(qo().Default):i}function Oo(t){return t.toString()}function Mo(t){return null}function jo(t,e){console.error(e)}function Ao(t){var e,i=t.__debug_counter;return"number"!=typeof i&&(i=On=On+1|0,t.__debug_counter=i),("number"==typeof(e=i)?e:r()).toString()}function Io(t){var i;return null!=(i=e.getKClassFromExpression(t).simpleName)?i:"Unknown"}function Ro(){Do=this,this.Default=Eo(),this.Main=new Fo(this.Default),this.Unconfined=hi()}$n.prototype.offerInternal_11rb$=function(t){var i={v:null};t:do{var n,o;if(null!=(n=this.closedForSend_0))return n;if(this.value_0===An().EMPTY_0)for(;null!=(o=this.takeFirstReceiveOrPeekClosed());){if(i.v=o,e.isType(i.v,Wi))return q(i.v);if(null!=q(i.v).tryResumeReceive_j43gjz$(t,null))break t}return this.value_0=t,_i}while(0);return q(i.v).completeResumeReceive_11rb$(t),q(i.v).offerResult},$n.prototype.offerSelectInternal_ys5ufj$=function(t,i){var n={v:null};t:do{var o;if(null!=(o=this.closedForSend_0))return o;if(this.value_0===An().EMPTY_0)e:for(;;){var r=this.describeTryOffer_0(t),s=i.performAtomicTrySelect_6q0pxr$(r);if(null==s){n.v=r.result;break t}if(s===mi)break e;if(s!==gn){if(s===kn||e.isType(s,Wi))return s;throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(s)).toString())}}return i.trySelect()?(this.value_0=t,_i):kn}while(0);return q(n.v).completeResumeReceive_11rb$(t),q(n.v).offerResult},$n.prototype.pollInternal=function(){var t,e={v:null};return this.value_0===An().EMPTY_0?null!=(t=this.closedForSend_0)?t:$i:(e.v=this.value_0,this.value_0=An().EMPTY_0,e.v)},$n.prototype.pollSelectInternal_y5yyj0$=function(t){var e,i={v:null};return this.value_0===An().EMPTY_0?null!=(e=this.closedForSend_0)?e:$i:t.trySelect()?(i.v=this.value_0,this.value_0=An().EMPTY_0,i.v):kn},$n.prototype.onCancelIdempotent_6taknv$=function(t){t&&(this.value_0=An().EMPTY_0),Mi.prototype.onCancelIdempotent_6taknv$.call(this,t)},$n.prototype.enqueueReceiveInternal_i292ax$=function(t){return Mi.prototype.enqueueReceiveInternal_i292ax$.call(this,t)},Object.defineProperty($n.prototype,"bufferDebugString",{configurable:!0,get:function(){return"(value="+z(this.value_0)+")"}}),$n.$metadata$={kind:s,simpleName:"ConflatedChannel",interfaces:[Mi]},Object.defineProperty(In.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(In.prototype,"isBufferEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(In.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty(In.prototype,"isBufferFull",{configurable:!0,get:function(){return!1}}),In.prototype.offerInternal_11rb$=function(t){for(;;){var i=Mi.prototype.offerInternal_11rb$.call(this,t);if(i===_i)return _i;if(i!==mi){if(e.isType(i,Wi))return i;throw b(("Invalid offerInternal result "+i.toString()).toString())}var n=this.sendBuffered_0(t);if(null==n)return _i;if(e.isType(n,Wi))return n}},In.prototype.offerSelectInternal_ys5ufj$=function(t,i){for(var n;;){var o=this.hasReceiveOrClosed_0?Mi.prototype.offerSelectInternal_ys5ufj$.call(this,t,i):null!=(n=i.performAtomicTrySelect_6q0pxr$(this.describeSendBuffered_0(t)))?n:_i;if(o===kn)return kn;if(o===_i)return _i;if(o!==mi&&o!==gn){if(e.isType(o,Wi))return o;throw b(("Invalid result "+o.toString()).toString())}}},In.$metadata$={kind:s,simpleName:"LinkedListChannel",interfaces:[Mi]},Object.defineProperty(Ln.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferFull",{configurable:!0,get:function(){return!0}}),Ln.$metadata$={kind:s,simpleName:"RendezvousChannel",interfaces:[Mi]},Dn.$metadata$={kind:x,simpleName:"FlowCollector",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collectWhile_rysrwq$",g((function(){var i=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,n=e.kotlin.coroutines.CoroutineImpl,o=t.kotlinx.coroutines.flow.internal.AbortFlowException,r=e.Kind.CLASS,s=t.kotlinx.coroutines.flow.FlowCollector,a=t.kotlinx.coroutines.flow.internal.checkOwnership_ygf9h9$;function l(t){this.closure$predicate=t}function u(t,e,i){n.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$value=e}return u.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[n]},u.prototype=Object.create(n.prototype),u.prototype.constructor=u,u.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.closure$predicate(this.local$value,this),this.result_0===i)return i;continue;case 1:throw this.exception_0;case 2:if(!this.result_0)throw new o(this.$this);return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},l.prototype.emit_11rb$=function(t,e,i){var n=new u(this,t,e);return i?n:n.doResume(null)},l.$metadata$={kind:r,interfaces:[s]},function(t,i,n){var r=new l(i);try{e.suspendCall(t.collect_42ocv1$(r,e.coroutineReceiver()))}catch(t){if(!e.isType(t,o))throw t;a(t,r)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collect_706ovd$",g((function(){var i=e.Kind.CLASS,n=t.kotlinx.coroutines.flow.FlowCollector;function o(t){this.closure$action=t}return o.prototype.emit_11rb$=function(t,e){return this.closure$action(t,e)},o.$metadata$={kind:i,interfaces:[n]},function(t,i,n){return e.suspendCall(t.collect_42ocv1$(new o(i),e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collectIndexed_57beod$",g((function(){var i=e.Kind.CLASS,n=t.kotlinx.coroutines.flow.FlowCollector,o=e.kotlin.ArithmeticException;function r(t){this.closure$action=t,this.index_0=0}return r.prototype.emit_11rb$=function(t,e){var i,n;n=this.closure$action;var r=(i=this.index_0,this.index_0=i+1|0,i);if(r<0)throw new o("Index overflow has happened");return n(r,t,e)},r.$metadata$={kind:i,interfaces:[n]},function(t,i,n){return e.suspendCall(t.collect_42ocv1$(new r(i),e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.emitAll_c14n1u$",(function(t,i,n){return e.suspendCall(i.collect_42ocv1$(t,e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())})),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.fold_usjyvu$",g((function(){var i=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,n=e.kotlin.coroutines.CoroutineImpl,o=e.kotlin.Unit,r=e.Kind.CLASS,s=t.kotlinx.coroutines.flow.FlowCollector;function a(t){this.closure$action=t}function l(t,e,i,o){n.call(this,o),this.exceptionState_0=1,this.local$closure$operation=t,this.local$closure$accumulator=e,this.local$value=i}return a.prototype.emit_11rb$=function(t,e){return this.closure$action(t,e)},a.$metadata$={kind:r,interfaces:[s]},l.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[n]},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$operation(this.local$closure$accumulator.v,this.local$value,this),this.result_0===i)return i;continue;case 1:throw this.exception_0;case 2:return this.local$closure$accumulator.v=this.result_0,o;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},function(t,i,n,o){var r,s,u={v:i};return e.suspendCall(t.collect_42ocv1$(new a((r=n,s=u,function(t,e,i){var n=new l(r,s,t,e);return i?n:n.doResume(null)})),e.coroutineReceiver())),u.v}}))),Object.defineProperty(qn.prototype,"isEmpty",{configurable:!0,get:function(){return this.head_0===this.tail_0}}),qn.prototype.addLast_trkh7z$=function(t){this.elements_0[this.tail_0]=t,this.tail_0=this.tail_0+1&this.elements_0.length-1,this.tail_0===this.head_0&&this.ensureCapacity_0()},qn.prototype.removeFirstOrNull=function(){var t;if(this.head_0===this.tail_0)return null;var i=this.elements_0[this.head_0];return this.elements_0[this.head_0]=null,this.head_0=this.head_0+1&this.elements_0.length-1,e.isType(t=i,o)?t:r()},qn.prototype.clear=function(){this.head_0=0,this.tail_0=0,this.elements_0=e.newArray(this.elements_0.length,null)},qn.prototype.ensureCapacity_0=function(){var t=this.elements_0.length,i=t<<1,n=e.newArray(i,null),o=this.elements_0;tt(o,n,0,this.head_0,o.length),tt(this.elements_0,n,this.elements_0.length-this.head_0|0,0,this.head_0),this.elements_0=n,this.head_0=0,this.tail_0=t},qn.$metadata$={kind:s,simpleName:"ArrayQueue",interfaces:[]},Fn.prototype.toString=function(){return Io(this)+"@"+Ao(this)},Fn.prototype.isEarlierThan_bfmzsr$=function(t){var e,i;if(null==(e=this.atomicOp))return!1;var n=e;if(null==(i=t.atomicOp))return!1;var o=i;return n.opSequence.compareTo_11rb$(o.opSequence)<0},Fn.$metadata$={kind:s,simpleName:"OpDescriptor",interfaces:[]},Object.defineProperty(Bn.prototype,"isDecided",{configurable:!0,get:function(){return this._consensus_c6dvpx$_0!==vn}}),Object.defineProperty(Bn.prototype,"opSequence",{configurable:!0,get:function(){return R}}),Object.defineProperty(Bn.prototype,"atomicOp",{configurable:!0,get:function(){return this}}),Bn.prototype.decide_s8jyv4$=function(t){var e,i=this._consensus_c6dvpx$_0;return i!==vn?i:(e=this)._consensus_c6dvpx$_0===vn&&(e._consensus_c6dvpx$_0=t,1)?t:this._consensus_c6dvpx$_0},Bn.prototype.perform_s8jyv4$=function(t){var i,n,s=this._consensus_c6dvpx$_0;return s===vn&&(s=this.decide_s8jyv4$(this.prepare_11rb$(null==(i=t)||e.isType(i,o)?i:r()))),this.complete_19pj23$(null==(n=t)||e.isType(n,o)?n:r(),s),s},Bn.$metadata$={kind:s,simpleName:"AtomicOp",interfaces:[Fn]},Object.defineProperty(Un.prototype,"atomicOp",{configurable:!0,get:function(){return null==this.atomicOp_ss7ttb$_0?c("atomicOp"):this.atomicOp_ss7ttb$_0},set:function(t){this.atomicOp_ss7ttb$_0=t}}),Un.$metadata$={kind:s,simpleName:"AtomicDesc",interfaces:[]},Object.defineProperty(Vn.prototype,"callerFrame",{configurable:!0,get:function(){return this.callerFrame_w1cgfa$_0}}),Vn.prototype.getStackTraceElement=function(){return null},Object.defineProperty(Vn.prototype,"reusableCancellableContinuation",{configurable:!0,get:function(){var t;return e.isType(t=this._reusableCancellableContinuation_0,bt)?t:null}}),Vn.prototype.isReusable_pmw987$=function(t){var i;if(null==(i=this._reusableCancellableContinuation_0))return!1;var n=i;return!e.isType(n,bt)||n===t},Vn.prototype.claimReusableCancellableContinuation=function(){var t;for(this._reusableCancellableContinuation_0;;){var i,n=this._reusableCancellableContinuation_0;if(null===n)return this._reusableCancellableContinuation_0=xn,null;if(!e.isType(n,bt))throw b(("Inconsistent state "+z(n)).toString());if((t=this)._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=xn,1))return e.isType(i=n,bt)?i:r()}},Vn.prototype.checkPostponedCancellation_jp3215$=function(t){var i;for(this._reusableCancellableContinuation_0;;){var n=this._reusableCancellableContinuation_0;if(n!==xn){if(null===n)return null;if(e.isType(n,w)){if(!function(t){return t._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=null,!0)}(this))throw F("Failed requirement.".toString());return n}throw b(("Inconsistent state "+z(n)).toString())}if((i=this)._reusableCancellableContinuation_0===xn&&(i._reusableCancellableContinuation_0=t,1))return null}},Vn.prototype.postponeCancellation_tcv7n7$=function(t){var i;for(this._reusableCancellableContinuation_0;;){var n=this._reusableCancellableContinuation_0;if(y(n,xn)){if((i=this)._reusableCancellableContinuation_0===xn&&(i._reusableCancellableContinuation_0=t,1))return!0}else{if(e.isType(n,w))return!0;if(function(t){return t._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=null,!0)}(this))return!1}}},Vn.prototype.takeState=function(){var t=this._state_8be2vx$;return this._state_8be2vx$=bn,t},Object.defineProperty(Vn.prototype,"delegate",{configurable:!0,get:function(){return this}}),Vn.prototype.resumeWith_tl1gpc$=function(t){var i=this.continuation.context,n=jt(t);if(this.dispatcher.isDispatchNeeded_1fupul$(i))this._state_8be2vx$=n,this.resumeMode=0,this.dispatcher.dispatch_5bn72i$(i,this);else{var o=_e().eventLoop_8be2vx$;if(o.isUnconfinedLoopActive)this._state_8be2vx$=n,this.resumeMode=0,o.dispatchUnconfined_4avnfa$(this);else{o.incrementUseCount_6taknv$(!0);try{for(this.context,this.continuation.resumeWith_tl1gpc$(t);o.processUnconfinedEvent(););}catch(t){if(!e.isType(t,w))throw t;this.handleFatalException_mseuzz$(t,null)}finally{o.decrementUseCount_6taknv$(!0)}}}},Vn.prototype.resumeCancellableWith_tl1gpc$=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeCancellableWith_tl1gpc$",g((function(){var i=t.kotlinx.coroutines.toState_dwruuz$,n=e.kotlin.Unit,o=e.wrapFunction,r=Error,s=t.kotlinx.coroutines.Job,a=e.kotlin.Result,l=e.kotlin.createFailure_tcv7n7$;return o((function(){var i=t.kotlinx.coroutines.Job,o=e.kotlin.Result,r=e.kotlin.createFailure_tcv7n7$;return function(t,e){return function(){var s,a=t;t:do{var l=a.context.get_j3r2sn$(i.Key);if(null!=l&&!l.isActive){var u=l.getCancellationException();a.resumeWith_tl1gpc$(new o(r(u))),s=!0;break t}s=!1}while(0);if(!s){var p=t,c=e;p.context,p.continuation.resumeWith_tl1gpc$(c)}return n}}})),function(t){var n=i(t);if(this.dispatcher.isDispatchNeeded_1fupul$(this.context))this._state_8be2vx$=n,this.resumeMode=1,this.dispatcher.dispatch_5bn72i$(this.context,this);else{var o=_e().eventLoop_8be2vx$;if(o.isUnconfinedLoopActive)this._state_8be2vx$=n,this.resumeMode=1,o.dispatchUnconfined_4avnfa$(this);else{o.incrementUseCount_6taknv$(!0);try{var u;t:do{var p=this.context.get_j3r2sn$(s.Key);if(null!=p&&!p.isActive){var c=p.getCancellationException();this.resumeWith_tl1gpc$(new a(l(c))),u=!0;break t}u=!1}while(0);for(u||(this.context,this.continuation.resumeWith_tl1gpc$(t));o.processUnconfinedEvent(););}catch(t){if(!e.isType(t,r))throw t;this.handleFatalException_mseuzz$(t,null)}finally{o.decrementUseCount_6taknv$(!0)}}}}}))),Vn.prototype.resumeCancelled=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeCancelled",g((function(){var i=t.kotlinx.coroutines.Job,n=e.kotlin.Result,o=e.kotlin.createFailure_tcv7n7$;return function(){var t=this.context.get_j3r2sn$(i.Key);if(null!=t&&!t.isActive){var e=t.getCancellationException();return this.resumeWith_tl1gpc$(new n(o(e))),!0}return!1}}))),Vn.prototype.resumeUndispatchedWith_tl1gpc$=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeUndispatchedWith_tl1gpc$",(function(t){this.context,this.continuation.resumeWith_tl1gpc$(t)})),Vn.prototype.dispatchYield_6v298r$=function(t,e){this._state_8be2vx$=e,this.resumeMode=1,this.dispatcher.dispatchYield_5bn72i$(t,this)},Vn.prototype.toString=function(){return"DispatchedContinuation["+this.dispatcher+", "+Oo(this.continuation)+"]"},Object.defineProperty(Vn.prototype,"context",{get:function(){return this.continuation.context}}),Vn.$metadata$={kind:s,simpleName:"DispatchedContinuation",interfaces:[a,kr,Xn]},Xn.prototype.cancelResult_83a7kv$=function(t,e){},Xn.prototype.getSuccessfulResult_tpy1pm$=function(t){var i;return null==(i=t)||e.isType(i,o)?i:r()},Xn.prototype.getExceptionalResult_8ea4ql$=function(t){var i,n;return null!=(n=e.isType(i=t,Rt)?i:null)?n.cause:null},Xn.prototype.run=function(){var t,i=null;try{var n=(e.isType(t=this.delegate,Vn)?t:r()).continuation,o=n.context,s=this.takeState(),a=this.getExceptionalResult_8ea4ql$(s),l=Wn(this.resumeMode)?o.get_j3r2sn$(xe()):null;if(null!=a||null==l||l.isActive)if(null!=a)n.resumeWith_tl1gpc$(new f(S(a)));else{var u=this.getSuccessfulResult_tpy1pm$(s);n.resumeWith_tl1gpc$(new f(u))}else{var c=l.getCancellationException();this.cancelResult_83a7kv$(s,c),n.resumeWith_tl1gpc$(new f(S(xr(c))))}}catch(t){if(!e.isType(t,w))throw t;i=t}finally{var h;try{h=new f(p)}catch(t){if(!e.isType(t,w))throw t;h=new f(S(t))}var d=h;this.handleFatalException_mseuzz$(i,d.exceptionOrNull())}},Xn.prototype.handleFatalException_mseuzz$=function(t,e){if(null!==t||null!==e){var i=new ye("Fatal exception in coroutines machinery for "+this+". Please read KDoc to 'handleFatalException' method and report this incident to maintainers",q(null!=t?t:e));Vt(this.delegate.context,i)}},Xn.$metadata$={kind:s,simpleName:"DispatchedTask",interfaces:[pr]},Jn.prototype.plus_11rb$=function(t){var i,n,s,a;if(null==(i=this.holder_0))a=new Jn(t);else if(e.isType(i,G))(e.isType(n=this.holder_0,G)?n:r()).add_11rb$(t),a=new Jn(this.holder_0);else{var l=d(4);l.add_11rb$(null==(s=this.holder_0)||e.isType(s,o)?s:r()),l.add_11rb$(t),a=new Jn(l)}return a},Jn.prototype.forEachReversed_qlkmfe$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.InlineList.forEachReversed_qlkmfe$",g((function(){var t=Object,i=e.throwCCE,n=e.kotlin.collections.ArrayList;return function(o){var r,s,a;if(null!=(r=this.holder_0))if(e.isType(r,n))for(var l=e.isType(a=this.holder_0,n)?a:i(),u=l.size-1|0;u>=0;u--)o(l.get_za3lpa$(u));else o(null==(s=this.holder_0)||e.isType(s,t)?s:i())}}))),Jn.$metadata$={kind:s,simpleName:"InlineList",interfaces:[]},Jn.prototype.unbox=function(){return this.holder_0},Jn.prototype.toString=function(){return"InlineList(holder="+e.toString(this.holder_0)+")"},Jn.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.holder_0)|0},Jn.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.holder_0,t.holder_0)},Object.defineProperty(Qn.prototype,"callerFrame",{configurable:!0,get:function(){var t;return null==(t=this.uCont)||e.isType(t,kr)?t:r()}}),Qn.prototype.getStackTraceElement=function(){return null},Object.defineProperty(Qn.prototype,"isScopedCoroutine",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Qn.prototype,"parent_8be2vx$",{configurable:!0,get:function(){return this.parentContext.get_j3r2sn$(xe())}}),Qn.prototype.afterCompletion_s8jyv4$=function(t){Gn(h(this.uCont),It(t,this.uCont))},Qn.prototype.afterResume_s8jyv4$=function(t){this.uCont.resumeWith_tl1gpc$(It(t,this.uCont))},Qn.$metadata$={kind:s,simpleName:"ScopeCoroutine",interfaces:[kr,at]},to.prototype.toString=function(){return this.symbol},to.prototype.unbox_tpy1pm$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.Symbol.unbox_tpy1pm$",g((function(){var t=Object,i=e.throwCCE;return function(n){var o;return n===this?null:null==(o=n)||e.isType(o,t)?o:i()}}))),to.$metadata$={kind:s,simpleName:"Symbol",interfaces:[]},co.prototype.run=function(){this.closure$block()},co.$metadata$={kind:s,interfaces:[ur]},ho.prototype.invoke_en0wgx$=function(t,e){this.invoke_ha2bmj$(t,null,e)},ho.$metadata$={kind:x,simpleName:"SelectBuilder",interfaces:[]},fo.$metadata$={kind:x,simpleName:"SelectClause0",interfaces:[]},_o.$metadata$={kind:x,simpleName:"SelectClause1",interfaces:[]},mo.$metadata$={kind:x,simpleName:"SelectClause2",interfaces:[]},$o.$metadata$={kind:x,simpleName:"SelectInstance",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.select_wd2ujs$",g((function(){var i=t.kotlinx.coroutines.selects.SelectBuilderImpl,n=Error;return function(t,o){var r;return e.suspendCall((r=t,function(t){var o=new i(t);try{r(o)}catch(t){if(!e.isType(t,n))throw t;o.handleBuilderException_tcv7n7$(t)}return o.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),yo.prototype.next=function(){return(t=this).number_0=t.number_0.inc();var t},yo.$metadata$={kind:s,simpleName:"SeqNumber",interfaces:[]},Object.defineProperty(vo.prototype,"callerFrame",{configurable:!0,get:function(){var t;return e.isType(t=this.uCont_0,kr)?t:null}}),vo.prototype.getStackTraceElement=function(){return null},Object.defineProperty(vo.prototype,"parentHandle_0",{configurable:!0,get:function(){return this._parentHandle_0},set:function(t){this._parentHandle_0=t}}),Object.defineProperty(vo.prototype,"context",{configurable:!0,get:function(){return this.uCont_0.context}}),Object.defineProperty(vo.prototype,"completion",{configurable:!0,get:function(){return this}}),vo.prototype.doResume_0=function(t,e){var i;for(this._result_0;;){var n=this._result_0;if(n===Sn){var o=t();if((i=this)._result_0===Sn&&(i._result_0=o,1))return}else{if(n!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this))return void e()}}},vo.prototype.resumeWith_tl1gpc$=function(t){t:do{for(this._result_0;;){var e=this._result_0;if(e===Sn){var i=jt(t);if((o=this)._result_0===Sn&&(o._result_0=i,1))break t}else{if(e!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this)){if(t.isFailure){var n=this.uCont_0;n.resumeWith_tl1gpc$(new f(S(xr(q(t.exceptionOrNull())))))}else this.uCont_0.resumeWith_tl1gpc$(t);break t}}}}while(0);var o},vo.prototype.resumeSelectWithException_tcv7n7$=function(t){t:do{for(this._result_0;;){var e=this._result_0;if(e===Sn){var i=new Rt(xr(t,this.uCont_0));if((n=this)._result_0===Sn&&(n._result_0=i,1))break t}else{if(e!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this)){h(this.uCont_0).resumeWith_tl1gpc$(new f(S(t)));break t}}}}while(0);var n},vo.prototype.getResult=function(){this.isSelected||this.initCancellability_0();var t,i=this._result_0;if(i===Sn){if((t=this)._result_0===Sn&&(t._result_0=l,1))return l;i=this._result_0}if(i===Cn)throw b("Already resumed");if(e.isType(i,Rt))throw i.cause;return i},vo.prototype.initCancellability_0=function(){var t;if(null!=(t=this.context.get_j3r2sn$(xe()))){var e=t,i=e.invokeOnCompletion_ct2b2z$(!0,void 0,new go(this,e));this.parentHandle_0=i,this.isSelected&&i.dispose()}},go.prototype.invoke=function(t){this.$outer.trySelect()&&this.$outer.resumeSelectWithException_tcv7n7$(this.job.getCancellationException())},go.prototype.toString=function(){return"SelectOnCancelling["+this.$outer+"]"},go.$metadata$={kind:s,simpleName:"SelectOnCancelling",interfaces:[ni]},vo.prototype.handleBuilderException_tcv7n7$=function(t){if(this.trySelect())this.resumeWith_tl1gpc$(new f(S(t)));else if(!e.isType(t,Ho)){var i=this.getResult();e.isType(i,Rt)&&i.cause===t||Vt(this.context,t)}},Object.defineProperty(vo.prototype,"isSelected",{configurable:!0,get:function(){for(this._state_0;;){var t=this._state_0;if(t===zn)return!1;if(!e.isType(t,Fn))return!0;t.perform_s8jyv4$(this)}}}),vo.prototype.disposeOnSelect_rvfg84$=function(t){var e=new wo(t);(this.isSelected||(this.addLast_l2j9rm$(e),this.isSelected))&&t.dispose()},vo.prototype.doAfterSelect_0=function(){var t;null!=(t=this.parentHandle_0)&&t.dispose();for(var i=this._next;!y(i,this);)e.isType(i,wo)&&i.handle.dispose(),i=i._next},vo.prototype.trySelect=function(){var t,e=this.trySelectOther_uc1cc4$(null);if(e===i)t=!0;else{if(null!=e)throw b(("Unexpected trySelectIdempotent result "+z(e)).toString());t=!1}return t},vo.prototype.trySelectOther_uc1cc4$=function(t){var n;for(this._state_0;;){var o=this._state_0;t:do{if(o===zn){if(null==t){if((n=this)._state_0!==zn||(n._state_0=null,0))break t}else{var r=new bo(t);if(!function(t){return t._state_0===zn&&(t._state_0=r,!0)}(this))break t;var s=r.perform_s8jyv4$(this);if(null!==s)return s}return this.doAfterSelect_0(),i}if(!e.isType(o,Fn))return null==t?null:o===t.desc?i:null;if(null!=t){var a=t.atomicOp;if(e.isType(a,xo)&&a.impl===this)throw b("Cannot use matching select clauses on the same object".toString());if(a.isEarlierThan_bfmzsr$(o))return gn}o.perform_s8jyv4$(this)}while(0)}},bo.prototype.perform_s8jyv4$=function(t){var i,n=e.isType(i=t,vo)?i:r();this.otherOp.finishPrepare();var o,s=this.otherOp.atomicOp.decide_s8jyv4$(null),a=null==s?this.otherOp.desc:zn;return o=this,n._state_0===o&&(n._state_0=a),s},Object.defineProperty(bo.prototype,"atomicOp",{configurable:!0,get:function(){return this.otherOp.atomicOp}}),bo.$metadata$={kind:s,simpleName:"PairSelectOp",interfaces:[Fn]},vo.prototype.performAtomicTrySelect_6q0pxr$=function(t){return new xo(this,t).perform_s8jyv4$(null)},vo.prototype.toString=function(){return"SelectInstance(state="+z(this._state_0)+", result="+z(this._result_0)+")"},Object.defineProperty(xo.prototype,"opSequence",{configurable:!0,get:function(){return this.opSequence_oe6pw4$_0}}),xo.prototype.prepare_11rb$=function(t){var i;if(null==t&&null!=(i=this.prepareSelectOp_0()))return i;try{return this.desc.prepare_4uxf5b$(this)}catch(i){throw e.isType(i,w)?(null==t&&this.undoPrepare_0(),i):i}},xo.prototype.complete_19pj23$=function(t,e){this.completeSelect_0(e),this.desc.complete_ayrq83$(this,e)},xo.prototype.prepareSelectOp_0=function(){var t;for(this.impl._state_0;;){var i=this.impl._state_0;if(i===this)return null;if(e.isType(i,Fn))i.perform_s8jyv4$(this.impl);else{if(i!==zn)return kn;if((t=this).impl._state_0===zn&&(t.impl._state_0=t,1))return null}}},xo.prototype.undoPrepare_0=function(){var t;(t=this).impl._state_0===t&&(t.impl._state_0=zn)},xo.prototype.completeSelect_0=function(t){var e,i=null==t,n=i?null:zn;(e=this).impl._state_0===e&&(e.impl._state_0=n,1)&&i&&this.impl.doAfterSelect_0()},xo.prototype.toString=function(){return"AtomicSelectOp(sequence="+this.opSequence.toString()+")"},xo.$metadata$={kind:s,simpleName:"AtomicSelectOp",interfaces:[Bn]},vo.prototype.invoke_nd4vgy$=function(t,e){t.registerSelectClause0_s9h9qd$(this,e)},vo.prototype.invoke_veq140$=function(t,e){t.registerSelectClause1_o3xas4$(this,e)},vo.prototype.invoke_ha2bmj$=function(t,e,i){t.registerSelectClause2_rol3se$(this,e,i)},vo.prototype.onTimeout_7xvrws$=function(t,e){if(t.compareTo_11rb$(R)<=0)this.trySelect()&&so(e,this.completion);else{var i,n,o=new co((i=this,n=e,function(){return i.trySelect()&&no(n,i.completion),p}));this.disposeOnSelect_rvfg84$(ce(this.context).invokeOnTimeout_8irseu$(t,o))}},wo.$metadata$={kind:s,simpleName:"DisposeNode",interfaces:[mr]},vo.$metadata$={kind:s,simpleName:"SelectBuilderImpl",interfaces:[kr,a,$o,ho,br]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.selectUnbiased_wd2ujs$",g((function(){var i=t.kotlinx.coroutines.selects.UnbiasedSelectBuilderImpl,n=Error;return function(t,o){var r;return e.suspendCall((r=t,function(t){var o=new i(t);try{r(o)}catch(t){if(!e.isType(t,n))throw t;o.handleBuilderException_tcv7n7$(t)}return o.initSelectResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),zo.prototype.handleBuilderException_tcv7n7$=function(t){this.instance.handleBuilderException_tcv7n7$(t)},zo.prototype.initSelectResult=function(){if(!this.instance.isSelected)try{var t;for(it(this.clauses),t=this.clauses.iterator();t.hasNext();)t.next()()}catch(t){if(!e.isType(t,w))throw t;this.instance.handleBuilderException_tcv7n7$(t)}return this.instance.getResult()},zo.prototype.invoke_nd4vgy$=function(t,e){var i,n,o;this.clauses.add_11rb$((i=this,n=e,o=t,function(){return o.registerSelectClause0_s9h9qd$(i.instance,n),p}))},zo.prototype.invoke_veq140$=function(t,e){var i,n,o;this.clauses.add_11rb$((i=this,n=e,o=t,function(){return o.registerSelectClause1_o3xas4$(i.instance,n),p}))},zo.prototype.invoke_ha2bmj$=function(t,e,i){var n,o,r,s;this.clauses.add_11rb$((n=this,o=e,r=i,s=t,function(){return s.registerSelectClause2_rol3se$(n.instance,o,r),p}))},zo.prototype.onTimeout_7xvrws$=function(t,e){var i,n,o;this.clauses.add_11rb$((i=this,n=t,o=e,function(){return i.instance.onTimeout_7xvrws$(n,o),p}))},zo.$metadata$={kind:s,simpleName:"UnbiasedSelectBuilderImpl",interfaces:[ho]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.whileSelect_vmyjlh$",g((function(){var i=t.kotlinx.coroutines.selects.SelectBuilderImpl,n=Error;function o(t){return function(o){var r=new i(o);try{t(r)}catch(t){if(!e.isType(t,n))throw t;r.handleBuilderException_tcv7n7$(t)}return r.getResult()}}return function(t,i){for(;e.suspendCall(o(t)(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver()););}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.sync.withLock_8701tb$",(function(t,i,n,o){void 0===i&&(i=null),e.suspendCall(t.lock_s8jyv4$(i,e.coroutineReceiver()));try{return n()}finally{t.unlock_s8jyv4$(i)}})),ko.prototype.toString=function(){return"Empty["+this.locked.toString()+"]"},ko.$metadata$={kind:s,simpleName:"Empty",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.sync.withPermit_103m5a$",(function(t,i,n){e.suspendCall(t.acquire(e.coroutineReceiver()));try{return i()}finally{t.release()}})),So.$metadata$={kind:s,simpleName:"CompletionHandlerBase",interfaces:[mr]},Co.$metadata$={kind:s,simpleName:"CancelHandlerBase",interfaces:[]},Ro.$metadata$={kind:k,simpleName:"Dispatchers",interfaces:[]};var Lo,Do=null;function qo(){return null===Do&&new Ro,Do}function Fo(t){ai.call(this),this.delegate=t}function Bo(){return new Uo}function Uo(){he.call(this)}function Vo(){he.call(this)}function Go(){throw K("runBlocking event loop is not supported")}function Ho(t,e){U.call(this,t,e),this.name="CancellationException"}function Wo(t,e){return e=e||Object.create(Ho.prototype),Ho.call(e,t,null),e}function Ko(t,e,i){Ho.call(this,t,e),this.job_8be2vx$=i,this.name="JobCancellationException"}function Xo(t){return ot(t,R,Lo).toInt()}function Yo(){Dt.call(this),this.messageQueue_8be2vx$=new Zo(this)}function Zo(t){var e;this.$outer=t,lr.call(this),this.processQueue_8be2vx$=(e=this,function(){return e.process(),p})}function Jo(){Qo=this,Yo.call(this)}Object.defineProperty(Fo.prototype,"immediate",{configurable:!0,get:function(){throw K("Immediate dispatching is not supported on JS")}}),Fo.prototype.dispatch_5bn72i$=function(t,e){this.delegate.dispatch_5bn72i$(t,e)},Fo.prototype.isDispatchNeeded_1fupul$=function(t){return this.delegate.isDispatchNeeded_1fupul$(t)},Fo.prototype.dispatchYield_5bn72i$=function(t,e){this.delegate.dispatchYield_5bn72i$(t,e)},Fo.prototype.toString=function(){var t;return null!=(t=this.toStringInternalImpl())?t:this.delegate.toString()},Fo.$metadata$={kind:s,simpleName:"JsMainDispatcher",interfaces:[ai]},Uo.prototype.dispatch_5bn72i$=function(t,e){Go()},Uo.$metadata$={kind:s,simpleName:"UnconfinedEventLoop",interfaces:[he]},Vo.prototype.unpark_0=function(){Go()},Vo.prototype.reschedule_0=function(t,e){Go()},Vo.$metadata$={kind:s,simpleName:"EventLoopImplPlatform",interfaces:[he]},Ho.$metadata$={kind:s,simpleName:"CancellationException",interfaces:[U]},Ko.prototype.toString=function(){return Ho.prototype.toString.call(this)+"; job="+this.job_8be2vx$},Ko.prototype.equals=function(t){return t===this||e.isType(t,Ko)&&y(t.message,this.message)&&y(t.job_8be2vx$,this.job_8be2vx$)&&y(t.cause,this.cause)},Ko.prototype.hashCode=function(){var t,e;return(31*((31*J(q(this.message))|0)+J(this.job_8be2vx$)|0)|0)+(null!=(e=null!=(t=this.cause)?J(t):null)?e:0)|0},Ko.$metadata$={kind:s,simpleName:"JobCancellationException",interfaces:[Ho]},Zo.prototype.schedule=function(){this.$outer.scheduleQueueProcessing()},Zo.prototype.reschedule=function(){setTimeout(this.processQueue_8be2vx$,0)},Zo.$metadata$={kind:s,simpleName:"ScheduledMessageQueue",interfaces:[lr]},Yo.prototype.dispatch_5bn72i$=function(t,e){this.messageQueue_8be2vx$.enqueue_771g0p$(e)},Yo.prototype.invokeOnTimeout_8irseu$=function(t,e){var i;return new or(setTimeout((i=e,function(){return i.run(),p}),Xo(t)))},Yo.prototype.scheduleResumeAfterDelay_egqmvs$=function(t,e){var i,n,o=setTimeout((i=e,n=this,function(){return i.resumeUndispatched_hyuxa3$(n,p),p}),Xo(t));e.invokeOnCancellation_f05bi3$(new or(o))},Yo.$metadata$={kind:s,simpleName:"SetTimeoutBasedDispatcher",interfaces:[pe,Dt]},Jo.prototype.scheduleQueueProcessing=function(){n.nextTick(this.messageQueue_8be2vx$.processQueue_8be2vx$)},Jo.$metadata$={kind:k,simpleName:"NodeDispatcher",interfaces:[Yo]};var Qo=null;function tr(){return null===Qo&&new Jo,Qo}function er(){ir=this,Yo.call(this)}er.prototype.scheduleQueueProcessing=function(){setTimeout(this.messageQueue_8be2vx$.processQueue_8be2vx$,0)},er.$metadata$={kind:k,simpleName:"SetTimeoutDispatcher",interfaces:[Yo]};var ir=null;function nr(){return null===ir&&new er,ir}function or(t){St.call(this),this.handle_0=t}function rr(t){Dt.call(this),this.window_0=t,this.queue_0=new ar(this.window_0)}function sr(t,e){this.this$WindowDispatcher=t,this.closure$handle=e}function ar(t){var e;lr.call(this),this.window_0=t,this.messageName_0="dispatchCoroutine",this.window_0.addEventListener("message",(e=this,function(t){return t.source==e.window_0&&t.data==e.messageName_0&&(t.stopPropagation(),e.process()),p}),!0)}function lr(){qn.call(this),this.yieldEvery=16,this.scheduled_0=!1}function ur(){}function pr(){}function cr(t){}function hr(t){var e,i;if(null!=(e=t.coroutineDispatcher))i=e;else{var n=new rr(t);t.coroutineDispatcher=n,i=n}return i}function dr(t){Wo("Flow was aborted, no more elements needed",this),this.owner=t,this.name="AbortFlowException"}function fr(){}function _r(t){return rt(t)}function mr(){this._next=this,this._prev=this,this._removed=!1}function $r(t,e){vr.call(this),this.queue=t,this.node=e}function yr(t){vr.call(this),this.queue=t,this.affectedNode_rjf1fm$_0=this.queue._next}function vr(){Un.call(this)}function gr(t,e,i){Fn.call(this),this.affected=t,this.desc=e,this.atomicOp_khy6pf$_0=i}function br(){mr.call(this)}function xr(t,e){return t}function wr(t){return t}function zr(t){return t}function kr(){}function Sr(t,e){}function Cr(t){return null}function Nr(t){return 0}function Er(){this.value_0=null}or.prototype.dispose=function(){clearTimeout(this.handle_0)},or.prototype.invoke=function(t){this.dispose()},or.prototype.toString=function(){return"ClearTimeout["+this.handle_0+"]"},or.$metadata$={kind:s,simpleName:"ClearTimeout",interfaces:[we,St]},rr.prototype.dispatch_5bn72i$=function(t,e){this.queue_0.enqueue_771g0p$(e)},rr.prototype.scheduleResumeAfterDelay_egqmvs$=function(t,e){var i,n;this.window_0.setTimeout((i=e,n=this,function(){return i.resumeUndispatched_hyuxa3$(n,p),p}),Xo(t))},sr.prototype.dispose=function(){this.this$WindowDispatcher.window_0.clearTimeout(this.closure$handle)},sr.$metadata$={kind:s,interfaces:[we]},rr.prototype.invokeOnTimeout_8irseu$=function(t,e){var i;return new sr(this,this.window_0.setTimeout((i=e,function(){return i.run(),p}),Xo(t)))},rr.$metadata$={kind:s,simpleName:"WindowDispatcher",interfaces:[pe,Dt]},ar.prototype.schedule=function(){var t;Promise.resolve(p).then((t=this,function(e){return t.process(),p}))},ar.prototype.reschedule=function(){this.window_0.postMessage(this.messageName_0,"*")},ar.$metadata$={kind:s,simpleName:"WindowMessageQueue",interfaces:[lr]},lr.prototype.enqueue_771g0p$=function(t){this.addLast_trkh7z$(t),this.scheduled_0||(this.scheduled_0=!0,this.schedule())},lr.prototype.process=function(){try{for(var t=this.yieldEvery,e=0;e<t;e++){var i;if(null==(i=this.removeFirstOrNull()))return;i.run()}}finally{this.isEmpty?this.scheduled_0=!1:this.reschedule()}},lr.$metadata$={kind:s,simpleName:"MessageQueue",interfaces:[qn]},ur.$metadata$={kind:x,simpleName:"Runnable",interfaces:[]},pr.$metadata$={kind:s,simpleName:"SchedulerTask",interfaces:[ur]},dr.$metadata$={kind:s,simpleName:"AbortFlowException",interfaces:[Ho]},fr.prototype.tryLock=function(){return!0},fr.prototype.unlock=function(){},fr.$metadata$={kind:s,simpleName:"NoOpLock",interfaces:[]},Object.defineProperty(mr.prototype,"nextNode",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_nextNode",(function(){return this._next}))}),Object.defineProperty(mr.prototype,"prevNode",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_prevNode",(function(){return this._prev}))}),Object.defineProperty(mr.prototype,"isRemoved",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_isRemoved",(function(){return this._removed}))}),mr.prototype.addLast_l2j9rm$=function(t){var e=this._prev;t._next=this,t._prev=e,e._next=t,this._prev=t},mr.prototype.remove=function(){if(this._removed)return!1;var t=this._prev,e=this._next;return t._next=e,e._prev=t,this._removed=!0,!0},mr.prototype.addOneIfEmpty_l2j9rm$=function(t){return this._next===this&&(this.addLast_l2j9rm$(t),!0)},mr.prototype.addLastIf_w327v9$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIf_w327v9$",(function(t,e){return!!e()&&(this.addLast_l2j9rm$(t),!0)})),mr.prototype.addLastIfPrev_s8xlln$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIfPrev_s8xlln$",(function(t,e){return!!e(this._prev)&&(this.addLast_l2j9rm$(t),!0)})),mr.prototype.addLastIfPrevAndIf_dzcug$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIfPrevAndIf_dzcug$",(function(t,e,i){return!!e(this._prev)&&!!i()&&(this.addLast_l2j9rm$(t),!0)})),mr.prototype.helpRemove=function(){},mr.prototype.removeFirstOrNull=function(){var t=this._next;if(t===this)return null;if(!t.remove())throw b("Should remove".toString());return t},mr.prototype.removeFirstIfIsInstanceOfOrPeekIf_14urrv$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.removeFirstIfIsInstanceOfOrPeekIf_14urrv$",g((function(){var t=e.kotlin.IllegalStateException_init_pdl1vj$;return function(e,i,n){var o=this._next;if(o===this)return null;if(!i(o))return null;if(n(o))return o;if(!o.remove())throw t("Should remove".toString());return o}}))),mr.$metadata$={kind:s,simpleName:"LinkedListNode",interfaces:[]},Object.defineProperty($r.prototype,"affectedNode",{configurable:!0,get:function(){return this.queue._prev}}),$r.prototype.finishPrepare_xe32vn$=function(t){},$r.prototype.onComplete=function(){this.queue.addLast_l2j9rm$(this.node)},$r.prototype.finishOnSuccess_bpl3tg$=function(t,e){},$r.$metadata$={kind:s,simpleName:"AddLastDesc",interfaces:[vr]},Object.defineProperty(yr.prototype,"result",{configurable:!0,get:function(){var t;return null==(t=this.affectedNode)||e.isType(t,o)?t:r()}}),Object.defineProperty(yr.prototype,"affectedNode",{configurable:!0,get:function(){return this.affectedNode_rjf1fm$_0}}),yr.prototype.finishPrepare_xe32vn$=function(t){},yr.prototype.onComplete=function(){this.queue.removeFirstOrNull()},yr.prototype.finishOnSuccess_bpl3tg$=function(t,e){},yr.$metadata$={kind:s,simpleName:"RemoveFirstDesc",interfaces:[vr]},vr.prototype.onPrepare_xe32vn$=function(t){return this.finishPrepare_xe32vn$(t),null},vr.prototype.prepare_4uxf5b$=function(t){var e=this.affectedNode,i=this.failure_l2j9rm$(e);return null!=i?i:this.onPrepare_xe32vn$(new gr(e,this,t))},vr.prototype.complete_ayrq83$=function(t,e){this.onComplete()},vr.prototype.failure_l2j9rm$=function(t){return null},vr.prototype.retry_ru8hrx$=function(t,e){return!1},vr.$metadata$={kind:s,simpleName:"AbstractAtomicDesc",interfaces:[Un]},Object.defineProperty(gr.prototype,"atomicOp",{get:function(){return this.atomicOp_khy6pf$_0}}),gr.prototype.perform_s8jyv4$=function(t){return null},gr.prototype.finishPrepare=function(){},gr.$metadata$={kind:s,simpleName:"PrepareOp",interfaces:[Fn]},Object.defineProperty(br.prototype,"isEmpty",{configurable:!0,get:function(){return this._next===this}}),br.prototype.forEach_jgwmnf$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListHead.forEach_jgwmnf$",g((function(){var t=e.equals;return function(e,i,n){for(var o=this._next;!t(o,this);)i(o)&&n(o),o=o._next}}))),br.prototype.remove=function(){throw st()},br.$metadata$={kind:s,simpleName:"LinkedListHead",interfaces:[mr]},v("kotlinx-coroutines-core.kotlinx.coroutines.internal.recoverAndThrow_8o0b5c$",(function(t,e){throw t})),kr.$metadata$={kind:x,simpleName:"CoroutineStackFrame",interfaces:[]},Er.prototype.get=function(){var t;return null==(t=this.value_0)||e.isType(t,o)?t:r()},Er.prototype.set_11rb$=function(t){this.value_0=t},Er.$metadata$={kind:s,simpleName:"CommonThreadLocal",interfaces:[]};var Tr=t.kotlinx||(t.kotlinx={}),Pr=Tr.coroutines||(Tr.coroutines={});Pr.AbstractCoroutine=at,Pr.launch_s496o7$=function(t,e,i,n){void 0===e&&(e=_.EmptyCoroutineContext),void 0===i&&(i=ne());var o=Po(t,e),r=i.isLazy?new ht(o,n):new ct(o,!0);return r.start_b5ul0p$(i,r,n),r},Pr.async_pda6u4$=function(t,e,i,n){void 0===e&&(e=_.EmptyCoroutineContext),void 0===i&&(i=ne());var o=Po(t,e),r=i.isLazy?new pt(o,n):new lt(o,!0);return r.start_b5ul0p$(i,r,n),r},Pr.withContext_i5cbzn$=function(t,e,i){return(n=t,o=e,function(t){var e=t.context,i=e.plus_1fupul$(n);if(wi(i),i===e){var r=new Qn(i,t);return po(r,r,o)}if(y(i.get_j3r2sn$($.Key),e.get_j3r2sn$($.Key))){var s=new dt(i,t);return po(s,s,o)}var a=new ft(i,t);return a.initParentJob_8be2vx$(),oo(o,a,a),a.getResult()})(i);var n,o},Pr.CancellableContinuation=_t,Pr.getOrCreateCancellableContinuation_3j0xf1$=mt,Pr.removeOnCancellation_1u31dd$=$t,Pr.disposeOnCancellation_xredcy$=yt,Pr.CancellableContinuationImpl=bt,Pr.NotCompleted=xt,Pr.CancelHandler=St,Pr.CompletableDeferred=Tt,Pr.CompletableDeferred_xptg6w$=function(t){return void 0===t&&(t=null),new Pt(t)},Pr.CompletableJob=Mt,Pr.toState_dwruuz$=jt,Pr.toState_bd49bs$=At,Pr.recoverResult_nnrdi1$=It,Pr.CompletedExceptionally=Rt,Pr.CancelledContinuation=Lt,Object.defineProperty(Dt,"Key",{get:Ut}),Pr.CoroutineDispatcher=Dt,Pr.handleCoroutineException_1ur55u$=Vt,Pr.handlerException_l3aqr5$=Gt,Pr.CoroutineExceptionHandler=Ht,Object.defineProperty(Ht,"Key",{get:Qt}),Pr.CoroutineScope=te,Object.defineProperty(ee,"DEFAULT",{get:ne}),Object.defineProperty(ee,"LAZY",{get:oe}),Object.defineProperty(ee,"ATOMIC",{get:re}),Object.defineProperty(ee,"UNDISPATCHED",{get:se}),Pr.CoroutineStart=ee,Pr.CopyableThrowable=ae,Pr.Deferred=le,Pr.Delay=pe,Pr.delay_s8cxhz$=function(t,e){var i;if(!(t.toNumber()<=0))return ue((i=t,function(t){return ce(t.context).scheduleResumeAfterDelay_egqmvs$(i,t),p}))(e)},Pr.get_delay_tcgsej$=ce,Pr.EventLoop=he,Object.defineProperty(Pr,"ThreadLocalEventLoop",{get:_e}),Pr.EventLoopImplBase=me,Pr.CompletionHandlerException=$e,Pr.CoroutinesInternalError=ye,Object.defineProperty(ve,"Key",{get:xe}),Pr.Job=ve,Pr.Job_5dx9e$=function(t){return void 0===t&&(t=null),new We(t)},Pr.DisposableHandle=we,Pr.ChildJob=ze,Pr.ParentJob=ke,Pr.ChildHandle=Se,Object.defineProperty(Pr,"NonDisposableHandle",{get:Ie}),Pr.JobSupport=Re,Pr.boxIncomplete_ntq51o$=Ve,Pr.unboxState_ntq51o$=Ge,Pr.JobImpl=We,Pr.Incomplete=Ke,Pr.JobNode=Xe,Pr.NodeList=Ye,Pr.InactiveNodeList=Ze,Pr.JobCancellingNode=ni,Pr.ChildHandleNode=ri,Pr.ChildContinuation=si,Pr.MainCoroutineDispatcher=ai,Pr.TimeoutCancellationException=ui,Object.defineProperty(Pr,"Unconfined",{get:hi}),Object.defineProperty(di,"Key",{get:bi}),Pr.YieldContext=di,Pr.yield=xi,Pr.checkCompletion_tcgsej$=wi,ki.SendBuffered=Oi;var Or=Pr.channels||(Pr.channels={});Or.AbstractSendChannel=ki,Or.AbstractChannel=Mi,Or.Send=Vi,Or.ReceiveOrClosed=Gi,Or.SendElement=Hi,Or.Closed=Wi,Or.Receive=Ki,Or.ArrayChannel=Xi,Or.BroadcastChannel=Zi,Or.SendChannel=Ji,Or.ReceiveChannel=Qi,tn.Closed=en,Object.defineProperty(tn,"Companion",{get:rn}),Or.ValueOrClosed=tn,Or.ChannelIterator=sn,Object.defineProperty(ln,"Factory",{get:hn}),Or.Channel=ln,Or.Channel_ww73n8$=function(t){switch(void 0===t&&(t=0),t){case 0:return new Ln;case 2147483647:return new In;case-1:return new $n;case-2:return new Xi(hn().CHANNEL_DEFAULT_CAPACITY_8be2vx$);default:return new Xi(t)}},Or.ClosedSendChannelException=dn,Or.ClosedReceiveChannelException=fn,Or.ChannelCoroutine=_n,Or.cancelConsumed_v57n85$=function(t,i){var n,o,r;n=null!=i?null!=(r=e.isType(o=i,Ho)?o:null)?r:new Ho("Channel was consumed, consumer had failed",i):null,t.cancel_m4sck1$(n)},Or.ConflatedBroadcastChannel=mn,Or.ConflatedChannel=$n,Or.LinkedListChannel=In,Or.ProducerScope=Rn,Or.RendezvousChannel=Ln;var Mr=Pr.flow||(Pr.flow={});Mr.FlowCollector=Dn;var jr=Mr.internal||(Mr.internal={});jr.checkOwnership_ygf9h9$=function(t,e){if(t.owner!==e)throw t};var Ar=Pr.internal||(Pr.internal={});Ar.ArrayQueue=qn,Ar.OpDescriptor=Fn,Ar.AtomicOp=Bn,Ar.AtomicDesc=Un,Pr.DispatchedContinuation=Vn,Pr.resumeCancellableWith_j7z4j2$=Gn,Pr.yieldUndispatched_t90a9u$=Hn,Pr.get_isCancellableMode_8e50z4$=Wn,Pr.get_isDispatchedMode_8e50z4$=Kn,Pr.DispatchedTask=Xn,Pr.dispatch_h66hf9$=Yn,Pr.resume_yw0jex$=Zn,Ar.recoverStackTrace_ak2v6d$=xr,Ar.InlineList=Jn,Ar.ScopeCoroutine=Qn,Ar.Symbol=to,Ar.systemProp_vrsuct$=eo,Ar.systemProp_ornks8$=io;var Ir=Pr.intrinsics||(Pr.intrinsics={});Ir.startCoroutineCancellable_x18nsh$=no,Ir.startCoroutineCancellable_kew4v3$=oo,Ir.startCoroutineCancellable_he7xzw$=ro,Ir.startCoroutineUnintercepted_81hn2s$=so,Ir.startCoroutineUnintercepted_kew4v3$=ao,Ir.startCoroutineUndispatched_81hn2s$=lo,Ir.startCoroutineUndispatched_kew4v3$=uo,Ir.startUndispatchedOrReturn_nxbeil$=po;var Rr=Pr.selects||(Pr.selects={});return Rr.SelectBuilder=ho,Rr.SelectClause0=fo,Rr.SelectClause1=_o,Rr.SelectClause2=mo,Rr.SelectInstance=$o,Rr.SeqNumber=yo,Rr.SelectBuilderImpl=vo,Rr.UnbiasedSelectBuilderImpl=zo,Pr.CompletionHandlerBase=So,Pr.CancelHandlerBase=Co,Pr.invokeIt_beznmj$=No,Pr.createDefaultDispatcher_8be2vx$=Eo,Object.defineProperty(Pr,"DefaultDelay_8be2vx$",{get:To}),Pr.newCoroutineContext_7n4184$=Po,Pr.toDebugString_u0ddlz$=Oo,Pr.get_coroutineName_tcgsej$=Mo,Pr.handleCoroutineExceptionImpl_yfv4gr$=jo,Pr.get_hexAddress_8ea4r1$=Ao,Pr.get_classSimpleName_8ea4r1$=Io,Object.defineProperty(Pr,"Dispatchers",{get:qo}),Pr.createEventLoop_8be2vx$=Bo,Pr.UnconfinedEventLoop=Uo,Pr.EventLoopImplPlatform=Vo,Pr.CancellationException_init_pdl1vj$=Wo,Pr.CancellationException=Ho,Pr.JobCancellationException=Ko,Yo.ScheduledMessageQueue=Zo,Pr.SetTimeoutBasedDispatcher=Yo,Object.defineProperty(Pr,"NodeDispatcher",{get:tr}),Object.defineProperty(Pr,"SetTimeoutDispatcher",{get:nr}),Pr.WindowDispatcher=rr,Pr.MessageQueue=lr,Pr.Runnable=ur,Pr.SchedulerTask=pr,Pr.get_taskContext_5sfo4y$=cr,Pr.asCoroutineDispatcher_nz12v2$=hr,jr.AbortFlowException=dr,Ar.NoOpLock=fr,Ar.identitySet_46rbr$=_r,Ar.LinkedListNode=mr,Ar.AddLastDesc=$r,Ar.RemoveFirstDesc=yr,Ar.AbstractAtomicDesc=vr,Ar.PrepareOp=gr,Ar.LinkedListHead=br,Ar.recoverStackTrace_87698k$=wr,Ar.unwrap_87698k$=zr,Ar.CoroutineStackFrame=kr,Ar.initCause_oz8fe6$=Sr,Ar.systemProp_y4putb$=Cr,Ar.threadContextElements_v4qu62$=Nr,Ar.CommonThreadLocal=Er,ve.prototype.plus_1fupul$=P.prototype.plus_1fupul$,ve.prototype.fold_3cc69b$=P.prototype.fold_3cc69b$,ve.prototype.get_j3r2sn$=P.prototype.get_j3r2sn$,ve.prototype.minusKey_yeqjby$=P.prototype.minusKey_yeqjby$,ze.prototype.cancel=ve.prototype.cancel,ze.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,ze.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,ze.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,ze.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,ze.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,ze.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,ze.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ze.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,ke.prototype.cancel=ve.prototype.cancel,ke.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,ke.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,ke.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,ke.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,ke.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,ke.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,ke.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ke.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Re.prototype.cancel=ve.prototype.cancel,Re.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,Re.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,Re.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,Re.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,Re.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,Re.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Re.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,Re.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,le.prototype.cancel=ve.prototype.cancel,le.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,le.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,le.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,le.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,le.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,le.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,le.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,le.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,bt.prototype.cancel_dbl4no$=_t.prototype.cancel_dbl4no$,bt.prototype.tryResume_19pj23$=_t.prototype.tryResume_19pj23$,Tt.prototype.cancel=le.prototype.cancel,Tt.prototype.plus_dqr1mp$=le.prototype.plus_dqr1mp$,Tt.prototype.plus_1fupul$=le.prototype.plus_1fupul$,Tt.prototype.fold_3cc69b$=le.prototype.fold_3cc69b$,Tt.prototype.get_j3r2sn$=le.prototype.get_j3r2sn$,Tt.prototype.minusKey_yeqjby$=le.prototype.minusKey_yeqjby$,Tt.prototype.cancel_m4sck1$=le.prototype.cancel_m4sck1$,Tt.prototype.cancel_dbl4no$=le.prototype.cancel_dbl4no$,Tt.prototype.invokeOnCompletion_ct2b2z$=le.prototype.invokeOnCompletion_ct2b2z$,Mt.prototype.cancel=ve.prototype.cancel,Mt.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,Mt.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,Mt.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,Mt.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,Mt.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,Mt.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,Mt.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,Mt.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Dt.prototype.get_j3r2sn$=$.prototype.get_j3r2sn$,Dt.prototype.minusKey_yeqjby$=$.prototype.minusKey_yeqjby$,Ht.prototype.fold_3cc69b$=P.prototype.fold_3cc69b$,Ht.prototype.get_j3r2sn$=P.prototype.get_j3r2sn$,Ht.prototype.minusKey_yeqjby$=P.prototype.minusKey_yeqjby$,Ht.prototype.plus_1fupul$=P.prototype.plus_1fupul$,me.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,me.prototype.invokeOnTimeout_8irseu$=pe.prototype.invokeOnTimeout_8irseu$,li.prototype.cancel=ve.prototype.cancel,li.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,li.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,li.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,li.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ki.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,qi.prototype.next0=sn.prototype.next0,ln.prototype.cancel=Qi.prototype.cancel,ln.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,ln.prototype.cancel_m4sck1$=Qi.prototype.cancel_m4sck1$,ln.prototype.cancel_dbl4no$=Qi.prototype.cancel_dbl4no$,Mi.prototype.cancel=ln.prototype.cancel,Mi.prototype.cancel_dbl4no$=ln.prototype.cancel_dbl4no$,Mi.prototype.cancel_m4sck1$=ln.prototype.cancel_m4sck1$,Zi.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,Rn.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,Yi.prototype.close_dbl4no$=Rn.prototype.close_dbl4no$,_n.prototype.close_dbl4no$=ln.prototype.close_dbl4no$,mn.prototype.close_dbl4no$=Zi.prototype.close_dbl4no$,vo.prototype.invoke_en0wgx$=ho.prototype.invoke_en0wgx$,zo.prototype.invoke_en0wgx$=ho.prototype.invoke_en0wgx$,Yo.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,rr.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,i=new to("RESUME_TOKEN"),new to("REMOVED_TASK"),new to("CLOSED_EMPTY"),Ne=new to("COMPLETING_ALREADY"),Ee=new to("COMPLETING_WAITING_CHILDREN"),Te=new to("COMPLETING_RETRY"),Pe=new to("TOO_LATE_TO_CANCEL"),Oe=new to("SEALED"),Me=new He(!1),je=new He(!0),_i=new to("OFFER_SUCCESS"),mi=new to("OFFER_FAILED"),$i=new to("POLL_FAILED"),yi=new to("ENQUEUE_FAILED"),vi=new to("ON_CLOSE_HANDLER_INVOKED"),pn="Channel was closed",new to("NONE"),new to("PENDING"),new to("NULL"),new to("DONE"),eo("kotlinx.coroutines.flow.defaultConcurrency",16,1,2147483647),vn=new to("NO_DECISION"),gn=new to("RETRY_ATOMIC"),new to("CLOSED"),bn=new to("UNDEFINED"),xn=new to("REUSABLE_CLAIMED"),wn=new to("REMOVE_PREPARED"),zn=new to("NOT_SELECTED"),kn=new to("ALREADY_SELECTED"),Sn=new to("UNDECIDED"),Cn=new to("RESUMED"),Nn=new yo,new to("LOCK_FAIL"),new to("ENQUEUE_FAIL"),new to("UNLOCK_FAIL"),new to("SELECT_SUCCESS"),En=new to("LOCKED"),Tn=new to("UNLOCKED"),new ko(En),new ko(Tn),eo("kotlinx.coroutines.semaphore.maxSpinCycles",100),new to("PERMIT"),new to("TAKEN"),new to("BROKEN"),new to("CANCELLED"),eo("kotlinx.coroutines.semaphore.segmentSize",16),Pn="undefined",On=0,Mn=!1,Lo=nt,t})?o.apply(e,r):o)||(t.exports=s)}).call(this,i(3))},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var o=65535&t|0,r=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{r=r+(o=o+e[n++]|0)|0}while(--s);o%=65521,r%=65521}return o|r<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,o){var r=n,s=o+i;t^=-1;for(var a=o;a<s;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}},function(t,e,i){"use strict";var n=i(0),o=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,e.string2buf=function(t){var e,i,o,r,s,a=t.length,l=0;for(r=0;r<a;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(o=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(l),s=0,r=0;s<l;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(o=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,o=e.length;i<o;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,o,r,a=e||t.length,u=new Array(2*a);for(n=0,i=0;i<a;)if((o=t[i++])<128)u[n++]=o;else if((r=s[o])>4)u[n++]=65533,i+=r-1;else{for(o&=2===r?31:3===r?15:7;r>1&&i<a;)o=o<<6|63&t[i++],r--;r>1?u[n++]=65533:o<65536?u[n++]=o:(o-=65536,u[n++]=55296|o>>10&1023,u[n++]=56320|1023&o)}return l(u,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+s[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){t.exports=i(11)},function(t,e,i){var n,o,r;o=[e,i(1),i(12),i(4)],void 0===(r="function"==typeof(n=function(t,e,i,n){"use strict";var o=t.$$importsForInline$$||(t.$$importsForInline$$={}),r=e.throwUPAE,s=e.kotlin.Unit,a=i.de.fabmax.kool.scene.orbitInputTransform_uj7ww7$,l=i.de.fabmax.kool.util.SimpleShadowMap,u=i.de.fabmax.kool.util.ao.AoPipeline,p=i.de.fabmax.kool.util.ibl,c=i.de.fabmax.kool.util.gltf.GltfFile.ModelGenerateConfig,h=i.de.fabmax.kool.util.gltf.loadGltfModel_aln4ac$,d=e.ensureNotNull,f=e.kotlin.collections.first_7wnvza$,_=e.kotlin.math.abs_za3lpa$,m=i.de.fabmax.kool.util.Color,$=i.de.fabmax.kool.math.Vec3f,y=i.de.fabmax.kool.pipeline.shading.Albedo,v=i.de.fabmax.kool.pipeline.shading.pbrShader_skmpm9$,g=i.de.fabmax.kool.scene.colorMesh_gp9ews$,b=i.de.fabmax.kool.scene.textureMesh_pyaqjj$,x=i.de.fabmax.kool.scene,w=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,z=e.kotlin.coroutines.CoroutineImpl,k=i.de.fabmax.kool.math.scale_2qa7tb$,S=i.de.fabmax.kool.pipeline.shading.ModeledShader.TextureColor,C=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel,N=i.de.fabmax.kool.pipeline.shadermodel.ShaderNode,E=i.de.fabmax.kool.pipeline.shadermodel.ModelVar4f,T=i.de.fabmax.kool.pipeline.shadermodel.ShaderNodeIoVar,P=e.Kind.CLASS,O=e.Kind.OBJECT,M=e.kotlin.collections.ArrayList_init_287e2$,j=Math,A=i.de.fabmax.kool.math,I=e.kotlin.collections.addAll_ipc267$,R=i.de.fabmax.kool.util.RectProps,L=i.de.fabmax.kool.scene.Scene,D=e.kotlin.math.roundToInt_yrwdxr$,q=e.kotlin.math.log_lu1900$,F=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel.VertexStageBuilder,B=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel.FragmentStageBuilder,U=e.Long.fromInt(500),V=n.kotlinx.coroutines.delay_s8cxhz$,G=i.de.fabmax.kool.pipeline.TexFormat,H=i.de.fabmax.kool.pipeline.AddressMode,W=i.de.fabmax.kool.pipeline.TextureProps,K=e.Long.fromInt(100),X=i.de.fabmax.kool.util.deferred.DeferredPipelineConfig,Y=i.de.fabmax.kool.util.deferred.DeferredPipeline,Z=i.de.fabmax.kool.scene.Group,J=i.de.fabmax.kool.scene.PerspectiveCamera,Q=e.throwCCE,tt=i.de.fabmax.kool.util.deferred.PbrSceneShader,et=i.de.fabmax.kool.util.deferred.PbrSceneShader.DeferredPbrConfig,it=i.de.fabmax.kool.pipeline.shadermodel.MultiLightNode,nt=i.de.fabmax.kool.pipeline.shadermodel.PbrMaterialNode,ot=e.kotlin.to_ujzrz7$,rt=i.de.fabmax.kool.util.ColorGradient,st=i.de.fabmax.kool.pipeline.GradientTexture,at=i.de.fabmax.kool.pipeline.shadermodel.TextureNode,lt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar3f,ut=i.de.fabmax.kool.math.MutableVec3f_init_czzhiu$,pt=i.de.fabmax.kool.scene.ui.zero,ct=i.de.fabmax.kool.scene.ui.pcs_8ca0d4$,ht=i.de.fabmax.kool.scene.ui.full,dt=i.de.fabmax.kool.scene.ui.Alignment,ft=i.de.fabmax.kool.scene.ui.Gravity,_t=i.de.fabmax.kool.toString_lcymw2$,mt=e.numberToInt,$t=i.de.fabmax.kool.math.MutableVec3f,yt=i.de.fabmax.kool.scene.Light,vt=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,gt=i.de.fabmax.kool.util.SphereProps,bt=i.de.fabmax.kool.pipeline.shading.UnlitMaterialConfig,xt=i.de.fabmax.kool.pipeline.shading.UnlitShader,wt=i.de.fabmax.kool.pipeline.ShaderStage,zt=e.kotlin.collections.firstOrNull_2p1efm$,kt=(e.wrapFunction,e.equals),St=i.de.fabmax.kool.pipeline.UniformMat4f,Ct=i.de.fabmax.kool.math.Vec2f,Nt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar2fConst,Et=i.de.fabmax.kool.pipeline.shadermodel.ModelVar3fConst,Tt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar4fConst,Pt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1fConst,Ot=i.de.fabmax.kool.pipeline.Uniform3f,Mt=i.de.fabmax.kool.pipeline.Uniform1f,jt=i.de.fabmax.kool.pipeline.UniformColor,At=i.de.fabmax.kool.pipeline.shading.ModeledShader,It=i.de.fabmax.kool.pipeline.DepthCompareOp,Rt=i.de.fabmax.kool.math.Mat4d,Lt=i.de.fabmax.kool.math.Vec3d,Dt=i.de.fabmax.kool.math.MutableVec3d_init_czzhiw$,qt=i.de.fabmax.kool.scene.Scene.DragHandler,Ft=i.de.fabmax.kool.pipeline.shading.PbrMaterialConfig,Bt=i.de.fabmax.kool.util.deferred.DeferredPbrShader,Ut=i.de.fabmax.kool.pipeline.shadermodel.UniformBufferMvp,Vt=i.de.fabmax.kool.pipeline.shadermodel.NamedVariableNode,Gt=i.de.fabmax.kool.util.deferred.DeferredPbrShader.MrtMultiplexNode,Ht=i.de.fabmax.kool.pipeline.shadermodel.StageInterfaceNode.OutputNode,Wt=i.de.fabmax.kool.pipeline.shadermodel.PushConstantNode3f,Kt=e.kotlin.math,Xt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1iConst,Yt=i.de.fabmax.kool.math.Vec4f,Zt=i.de.fabmax.kool.pipeline.shadermodel.ModelVarMat4f,Jt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar2f,Qt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1f,te=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1i,ee=i.de.fabmax.kool.pipeline.Uniform4f,ie=i.de.fabmax.kool.pipeline.OffscreenRenderPass2d,ne=i.de.fabmax.kool.scene.OrthographicCamera,oe=i.de.fabmax.kool.scene.Camera.ProjCorrectionMode,re=i.de.fabmax.kool.pipeline.Attribute,se=e.kotlin.collections.listOf_i5x0yv$,ae=i.de.fabmax.kool.pipeline.OffscreenRenderPass.ConfigBuilder,le=i.de.fabmax.kool.pipeline.OffscreenRenderPass.Config,ue=i.de.fabmax.kool.util.IndexedVertexList,pe=i.de.fabmax.kool.scene.Mesh,ce=i.de.fabmax.kool.math.Random,he=i.de.fabmax.kool.util.ColorGradient_init_5tenyj$,de=i.de.fabmax.kool.math.MutableVec4f_init,fe=i.de.fabmax.kool.scene.PointMesh,_e=i.de.fabmax.kool.scene.pointMesh_zhxjay$,me=i.de.fabmax.kool.math.smoothStep_y2kzbl$,$e=i.de.fabmax.kool.scene.group_2ylazs$,ye=i.de.fabmax.kool.pipeline.shading.AlphaModeBlend,ve=i.de.fabmax.kool.scene.Skybox.SkyboxPosNode,ge=i.de.fabmax.kool.pipeline.shadermodel.UnlitMaterialNode,be=i.de.fabmax.kool.pipeline.CullMethod,xe=i.de.fabmax.kool.pipeline.shadermodel.PushConstantNode1f,we=i.de.fabmax.kool.util.IndexedVertexList_init_5jr6ei$,ze=i.de.fabmax.kool.pipeline.FilterMethod,ke=i.de.fabmax.kool.scene.PerspectiveCamera.Proxy,Se=i.de.fabmax.kool.math.Mat4f,Ce=i.de.fabmax.kool.pipeline.GlslType,Ne=i.de.fabmax.kool.util.MeshInstanceList,Ee=i.de.fabmax.kool.util.MutableColor_init_d7aj7k$,Te=e.kotlin.IllegalStateException_init_pdl1vj$,Pe=i.de.fabmax.kool.scene.defaultCamTransform_v4keia$,Oe=i.de.fabmax.kool.util.BoundingBox_init_4lfkt4$,Me=e.kotlin.collections.listOf_mh5how$,je=(i.de.fabmax.kool.util.createUint8Buffer_za3lpa$,e.toByte,i.de.fabmax.kool.pipeline.BufferedTextureData,i.de.fabmax.kool.pipeline.Texture),Ae=e.kotlin.collections.get_lastIndex_55thoc$,Ie=e.kotlin.ranges.until_dqglrj$,Re=i.de.fabmax.kool.util.SimpleShape,Le=i.de.fabmax.kool.util.Profile,De=(e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,e.kotlin.collections.ArrayList_init_ww73n8$,i.de.fabmax.kool.util.MeshBuilder),qe=(e.Kind.INTERFACE,e.kotlin.collections.last_2p1efm$),Fe=i.de.fabmax.kool.util,Be=(e.kotlin.collections.get_indices_tmsbgo$,e.kotlin.ranges.step_xsgg7u$,e.kotlin.collections.reversed_7wnvza$),Ue=e.kotlin.collections.checkIndexOverflow_za3lpa$,Ve=(i.de.fabmax.kool.util.MultiShape,i.de.fabmax.kool.scene.ui.uiScene_2d22y4$),Ge=i.de.fabmax.kool.scene.ui.dps_8ca0d4$,He=e.toString,We=i.de.fabmax.kool.util.Font,Ke=i.de.fabmax.kool.util.FontProps,Xe=i.de.fabmax.kool.util.uiFont_a4r08d$,Ye=i.de.fabmax.kool.scene.ui.UiTheme,Ze=i.de.fabmax.kool.scene.ui.BlankComponentUi,Je=i.de.fabmax.kool.scene.ui.theme_vvurn$,Qe=i.de.fabmax.kool.scene.ui.SimpleComponentUi,ti=i.de.fabmax.kool.scene.wireframeMesh_hjnvxh$,ei=i.de.fabmax.kool.util.MutableColor_init,ii=e.kotlin.collections.get_indices_gzk92b$,ni=e.kotlin.collections.first_2p1efm$,oi=i.de.fabmax.kool.math.MutableVec3f_init,ri=i.de.fabmax.kool.util.CubeProps,si=i.de.fabmax.kool.util.deferred.DeferredPointLights.PointLight,ai=i.de.fabmax.kool.createDefaultContext,li=i.de.fabmax.kool.scene.ui.BlurredComponentUi,ui=e.getCallableRef,pi=e.defineInlineFunction,ci=i.de.fabmax.kool.util.DebugOverlay.Position,hi=i.de.fabmax.kool.util.DebugOverlay,di=e.kotlin.collections.mutableMapOf_qfcya0$,fi=e.kotlin.collections.List,_i=e.kotlin.collections.Map,mi=(i.de.fabmax.kool.pipeline.shading.ModeledShader.VertexColor,i.de.fabmax.kool.scene.ui.dp_wl4j30$,i.de.fabmax.kool.scene.ui.uns_8ca0d4$,i.de.fabmax.kool.scene.ui.embeddedUi_4gy91$,i.de.fabmax.kool.pipeline.shading.PbrShader),$i=i.de.fabmax.kool.math.MutableVec2f,yi=i.de.fabmax.kool.util.gltf.loadGltfFile_7e2ead$,vi=i.de.fabmax.kool.util.gltf.GltfFile.ModelMaterialConfig,gi=i.de.fabmax.kool.math.MutableVec3d_init,bi=i.de.fabmax.kool.util.GridProps,xi=i.de.fabmax.kool.scene.OrbitInputTransform.ZoomMethod,wi=i.de.fabmax.kool.math.Vec3f_init_mx4ult$,zi=i.de.fabmax.kool.math.randomF_dleff0$,ki=i.de.fabmax.kool.pipeline.shading.PhongShader,Si=i.de.fabmax.kool.pipeline.shading.PhongShader.PhongConfig,Ci=i.de.fabmax.kool.pipeline.shadermodel.PhongMaterialNode,Ni=i.de.fabmax.kool.util.InstancedLodController.Instance,Ei=i.de.fabmax.kool.util.InstancedLodController,Ti=e.kotlin.collections.mutableListOf_i5x0yv$,Pi=i.de.fabmax.kool.scene.LineMesh,Oi=i.de.fabmax.kool.pipeline.shading.ModeledShader.StaticColor,Mi=i.de.fabmax.kool.pipeline.SingleColorTexture,ji=i.de.fabmax.kool.util.CylinderProps,Ai=i.de.fabmax.kool.scene.Skybox.SkyboxCubeShader,Ii=Array,Ri=i.de.fabmax.kool.pipeline.shadermodel.RefractionSamplerNode,Li=i.de.fabmax.kool.math.randomI,Di=i.de.fabmax.kool.util.PerfTimer,qi=i.de.fabmax.kool.modules.mesh.ListEdgeHandler,Fi=i.de.fabmax.kool.modules.mesh.HalfEdgeMesh,Bi=i.de.fabmax.kool.modules.mesh.simplification.terminateOnFaceCountRel_14dthe$,Ui=i.de.fabmax.kool.modules.mesh.simplification.simplify_hem9$,Vi=i.de.fabmax.kool.toString_j6vyb1$,Gi=e.kotlin.text.lastIndexOf_8eortd$,Hi=e.kotlin.text.lastIndexOf_l5u8uk$,Wi=e.kotlin.text.substring_fc3b62$,Ki=i.de.fabmax.kool.util.Log.Level,Xi=i.de.fabmax.kool.util.CascadedShadowMap,Yi=i.de.fabmax.kool.pipeline.shading.AlphaModeMask,Zi=i.de.fabmax.kool.now,Ji=i.de.fabmax.kool.util.spatial.pointKdTree_ffk80x$,Qi=e.kotlin.js.internal.FloatCompanionObject,tn=i.de.fabmax.kool.math.Vec3f_init_czzhiu$,en=i.de.fabmax.kool.util.spatial.InRadiusTraverser,nn=i.de.fabmax.kool.math.PointDistribution,on=i.de.fabmax.kool.math.MutableVec2f_init,rn=i.de.fabmax.kool.math.BSplineVec2f,sn=e.kotlin.collections.emptyList_287e2$,an=e.kotlin.text.split_ip8yn$;function ln(){gn(),Kr.call(this,"Ambient Occlusion"),this.autoRotate_0=!0,this.spotLight_0=!0,this.aoPipeline_953qvj$_0=this.aoPipeline_953qvj$_0,this.shadows_0=M()}function un(t,e,i){return function(n){n.setMouseRotation_dleff0$(0,-20),n.unaryPlus_uv0sim$(t.camera),n.zoom=8;var o=n.onUpdate,r=function(t,e,i){return function(n,o){return t.autoRotate_0&&(i.verticalRotation+=3*e.deltaT),s}}(e,i,n);return o.add_11rb$(r),s}}function pn(t,e,i){return function(n){n.generate_v2sixm$(function(t){return function(e){for(var i=-3;i<=3;i++)for(var n=-3;n<=3;n++){var o=j.atan2(n,i)*A.RAD_2_DEG,r=_(i),a=_(n),l=j.max(r,a)/5;e.color=m.Companion.fromHsv_7b5o5w$(o,l,.75,1).toLinear(),e.transform.push();var u=t;e.translate_y2kzbl$(i,0,n),e.scale_y2kzbl$(.25,.25,.25),e.rotate_ad55pp$(-37.5,$.Companion.Y_AXIS),e.geometry_ejqx55$(u.geometry),e.transform.pop()}return s}}(t));var o=v(function(t,e){return function(i){return i.albedoSource=y.VERTEX_ALBEDO,I(i.shadowMaps,t.shadows_0),i.roughness=.1,i.useScreenSpaceAmbientOcclusion_vv6xll$(t.aoPipeline_0.aoMap),i.useImageBasedLighting_po417x$(e),s}}(e,i));return n.shader=o,s}}function cn(t,e,i){return function(n){return n.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/brown_planks_03/brown_planks_03_diff_2k.jpg"),n.useOcclusionMap_9sobi5$(Or().pbrBasePath+"/brown_planks_03/brown_planks_03_AO_2k.jpg"),n.useNormalMap_9sobi5$(Or().pbrBasePath+"/brown_planks_03/brown_planks_03_Nor_2k.jpg"),n.useRoughnessMap_ivxn3r$(Or().pbrBasePath+"/brown_planks_03/brown_planks_03_rough_2k.jpg"),n.useScreenSpaceAmbientOcclusion_vv6xll$(t.aoPipeline_0.aoMap),n.useImageBasedLighting_po417x$(e),I(n.shadowMaps,t.shadows_0),i.onDispose.add_11rb$(function(t){return function(e,i){var n,o,r,a;return null!=(n=t.albedoMap)&&n.dispose(),null!=(o=t.occlusionMap)&&o.dispose(),null!=(r=t.normalMap)&&r.dispose(),null!=(a=t.roughnessMap)&&a.dispose(),s}}(n)),s}}function hn(t,e){return function(i){i.isCastingShadow=!1,i.generate_v2sixm$(function(t){return function(e){e.transform.push();var i=t;e.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var n=new R;n.size.set_dleff0$(12,12),n.origin.set_y2kzbl$(n.size.x,n.size.y,0).scale_mx4ult$(-.5),i.setUvs_0(n,.06,0,.1955*n.size.x,.1955*n.size.y),e.rect_e5k3t5$(n),e.transform.pop(),e.transform.push();var o=t;e.translate_y2kzbl$(0,-.25,0),e.rotate_ad55pp$(90,$.Companion.X_AXIS);var r=new R;r.size.set_dleff0$(12,12),r.origin.set_y2kzbl$(r.size.x,r.size.y,0).scale_mx4ult$(-.5),o.setUvs_0(r,.06,0,.1955*r.size.x,.1955*r.size.y),e.rect_e5k3t5$(r),e.transform.pop(),e.transform.push();var a=t;e.translate_y2kzbl$(-6,-.125,0),e.rotate_ad55pp$(90,$.Companion.NEG_Y_AXIS),e.rotate_ad55pp$(90,$.Companion.Z_AXIS);var l=new R;l.size.set_dleff0$(.25,12),l.origin.set_y2kzbl$(l.size.x,l.size.y,0).scale_mx4ult$(-.5),a.setUvs_0(l,.06-.1955*l.size.x,0,.1955*l.size.x,.1955*l.size.y),e.rect_e5k3t5$(l),e.transform.pop(),e.transform.push();var u=t;e.translate_y2kzbl$(6,-.125,0),e.rotate_ad55pp$(90,$.Companion.Y_AXIS),e.rotate_ad55pp$(-90,$.Companion.Z_AXIS);var p=new R;p.size.set_dleff0$(.25,12),p.origin.set_y2kzbl$(p.size.x,p.size.y,0).scale_mx4ult$(-.5),u.setUvs_0(p,2.406,0,.1955*p.size.x,.1955*p.size.y),e.rect_e5k3t5$(p),e.transform.pop(),e.transform.push();var c=t;e.translate_y2kzbl$(0,-.125,6);var h=new R;h.size.set_dleff0$(12,.25),h.origin.set_y2kzbl$(h.size.x,h.size.y,0).scale_mx4ult$(-.5),c.setUvs_0(h,.06,2.346,.1955*h.size.x,.1955*h.size.y),e.rect_e5k3t5$(h),e.transform.pop(),e.transform.push();var d=t;e.translate_y2kzbl$(0,-.125,-6),e.rotate_ad55pp$(180,$.Companion.X_AXIS);var f=new R;return f.size.set_dleff0$(12,.25),f.origin.set_y2kzbl$(f.size.x,f.size.y,0).scale_mx4ult$(-.5),d.setUvs_0(f,.06,-.048875,.1955*f.size.x,.1955*f.size.y),e.rect_e5k3t5$(f),e.transform.pop(),s}}(t));var n=v(cn(t,e,i));return i.shader=n,s}}function dn(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$AoDemo=e,this.local$envMaps=void 0,this.local$$receiver=i}function fn(t){var e=new $(6,10,-6);return t.setSpot_nve3wz$(e,k(e,-1).norm(),40),t.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.2).toLinear(),500),s}function _n(t,e){return function(i){return i.toggleButton_8v9fdr$("Enabled",t.aoPipeline_0.isEnabled,function(t){return function(e){return t.aoPipeline_0.isEnabled=e.isEnabled,s}}(t)),i.toggleButton_8v9fdr$("Show AO Map",e.isVisible,function(t){return function(e){return t.isVisible=e.isEnabled,s}}(e)),i.sliderWithValue_xbu91d$("Radius:",t.aoPipeline_0.radius,.1,3,2,void 0,function(t){return function(e){return t.aoPipeline_0.radius=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Power:",q(t.aoPipeline_0.power,10),q(.2,10),q(5,10),2,void 0,function(t){return function(e){var i=t.aoPipeline_0,n=e.value;return i.power=j.pow(10,n),s}}(t)),i.sliderWithValue_xbu91d$("Strength:",t.aoPipeline_0.strength,0,5,2,void 0,function(t){return function(e){return t.aoPipeline_0.strength=e.value,s}}(t)),i.sliderWithValue_xbu91d$("AO Samples:",t.aoPipeline_0.kernelSz,4,128,0,void 0,function(t){return function(e){return t.aoPipeline_0.kernelSz=D(e.value),s}}(t)),i.sliderWithValue_xbu91d$("Map Size:",t.aoPipeline_0.mapSize,.1,1,1,void 0,function(t){return function(e){return t.aoPipeline_0.mapSize=D(10*e.value)/10,s}}(t)),s}}function mn(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Spot Light",t.spotLight_0,function(t){return function(e){return t.spotLight_0=e.isEnabled,t.updateLighting_0(),s}}(t)),s}}function $n(){vn=this}function yn(t,e){N.call(this,"red2gray",e),this.inRed=t,this.outGray=new T(new E("outGray"),this)}yn.prototype=Object.create(N.prototype),yn.prototype.constructor=yn,ln.prototype=Object.create(Kr.prototype),ln.prototype.constructor=ln,Sn.prototype=Object.create(N.prototype),Sn.prototype.constructor=Sn,bn.prototype=Object.create(Kr.prototype),bn.prototype.constructor=bn,Un.prototype=Object.create(N.prototype),Un.prototype.constructor=Un,Gn.prototype=Object.create(N.prototype),Gn.prototype.constructor=Gn,Wn.prototype=Object.create(N.prototype),Wn.prototype.constructor=Wn,Kn.prototype=Object.create(N.prototype),Kn.prototype.constructor=Kn,Dn.prototype=Object.create(At.prototype),Dn.prototype.constructor=Dn,Yn.prototype=Object.create(Z.prototype),Yn.prototype.constructor=Yn,eo.prototype=Object.create(N.prototype),eo.prototype.constructor=eo,Zn.prototype=Object.create(Bt.prototype),Zn.prototype.constructor=Zn,io.prototype=Object.create(N.prototype),io.prototype.constructor=io,no.prototype=Object.create(N.prototype),no.prototype.constructor=no,oo.prototype=Object.create(N.prototype),oo.prototype.constructor=oo,ro.prototype=Object.create(N.prototype),ro.prototype.constructor=ro,po.prototype=Object.create(N.prototype),po.prototype.constructor=po,so.prototype=Object.create(ie.prototype),so.prototype.constructor=so,xo.prototype=Object.create(xt.prototype),xo.prototype.constructor=xo,Co.prototype=Object.create(pe.prototype),Co.prototype.constructor=Co,ho.prototype=Object.create(ie.prototype),ho.prototype.constructor=ho,To.prototype=Object.create(pe.prototype),To.prototype.constructor=To,Jo.prototype=Object.create(Z.prototype),Jo.prototype.constructor=Jo,_r.prototype=Object.create(At.prototype),_r.prototype.constructor=_r,nr.prototype=Object.create(Kr.prototype),nr.prototype.constructor=nr,Xr.prototype=Object.create(Kr.prototype),Xr.prototype.constructor=Xr,us.prototype=Object.create(Kr.prototype),us.prototype.constructor=us,ps.prototype=Object.create(Kr.prototype),ps.prototype.constructor=ps,Cs.prototype=Object.create(Ni.prototype),Cs.prototype.constructor=Cs,xs.prototype=Object.create(Kr.prototype),xs.prototype.constructor=xs,Bs.prototype=Object.create(Z.prototype),Bs.prototype.constructor=Bs,Os.prototype=Object.create(Kr.prototype),Os.prototype.constructor=Os,Ks.prototype=Object.create(ca.prototype),Ks.prototype.constructor=Ks,Js.prototype=Object.create(Kr.prototype),Js.prototype.constructor=Js,ba.prototype=Object.create(ca.prototype),ba.prototype.constructor=ba,Gl.prototype=Object.create(ca.prototype),Gl.prototype.constructor=Gl,tu.prototype=Object.create(Z.prototype),tu.prototype.constructor=tu,au.prototype=Object.create(Kr.prototype),au.prototype.constructor=au,du.prototype=Object.create(Z.prototype),du.prototype.constructor=du,_u.prototype=Object.create(pe.prototype),_u.prototype.constructor=_u,mu.prototype=Object.create(pe.prototype),mu.prototype.constructor=mu,$u.prototype=Object.create(Kr.prototype),$u.prototype.constructor=$u,ju.prototype=Object.create(N.prototype),ju.prototype.constructor=ju,Nu.prototype=Object.create(Kr.prototype),Nu.prototype.constructor=Nu,qu.prototype=Object.create($t.prototype),qu.prototype.constructor=qu,Fu.prototype=Object.create($t.prototype),Fu.prototype.constructor=Fu,Bu.prototype=Object.create(nn.prototype),Bu.prototype.constructor=Bu,Object.defineProperty(ln.prototype,"aoPipeline_0",{configurable:!0,get:function(){return null==this.aoPipeline_953qvj$_0?r("aoPipeline"):this.aoPipeline_953qvj$_0},set:function(t){this.aoPipeline_953qvj$_0=t}}),ln.prototype.lateInit_aemszp$=function(t){this.updateLighting_0()},dn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},dn.prototype=Object.create(z.prototype),dn.prototype.constructor=dn,dn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,Or().envMapBasePath+"/mossy_forest_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:this.local$envMaps=this.result_0;var t=new c(!0,!1);if(this.state_0=3,this.result_0=h(this.local$$receiver,Or().modelBasePath+"/teapot.gltf.gz",t,void 0,this),this.result_0===w)return w;continue;case 3:var e=d(this.result_0),i=f(e.meshes.values);return this.local$this$.unaryPlus_uv0sim$(g("teapots",pn(i,this.local$this$AoDemo,this.local$envMaps))),this.local$this$.unaryPlus_uv0sim$(b("ground",!0,hn(this.local$this$AoDemo,this.local$envMaps))),this.local$this$.plusAssign_f1kmr1$(x.Skybox.cube_wgmpek$(this.local$envMaps.reflectionMap,1)),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ln.prototype.setupMainScene_aemszp$=function(t){var e,i,n=new L(null);return n.unaryPlus_uv0sim$(a(n,void 0,un(n,this,t))),this.shadows_0.add_11rb$(new l(n,0,2048)),this.aoPipeline_0=u.Companion.createForward_ushge7$(n),t.assetMgr.launch_eln4bt$((e=n,i=this,function(t,n,o){var r=new dn(e,i,t,this,n);return o?r:r.doResume(null)})),n},ln.prototype.setUvs_0=function(t,e,i,n,o){t.texCoordUpperLeft.set_dleff0$(e,i),t.texCoordUpperRight.set_dleff0$(e+n,i),t.texCoordLowerLeft.set_dleff0$(e,i+o),t.texCoordLowerRight.set_dleff0$(e+n,i+o)},ln.prototype.updateLighting_0=function(){var t;for(this.spotLight_0?this.mainScene.lighting.singleLight_q9zcvo$(fn):this.mainScene.lighting.lights.clear(),t=this.shadows_0.iterator();t.hasNext();)t.next().isShadowMapEnabled=this.spotLight_0},ln.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,function(t){var i=t.image_3ds0aa$(void 0,new S(e.aoPipeline_0.aoMap,void 0,gn().aoMapColorModel()));i.isVisible=!1;var n=i;return t.section_yfmn31$("Ambient Occlusion",_n(e,n)),t.section_yfmn31$("Scene",mn(e)),s}));var e},$n.prototype.aoMapColorModel=function(){var t=new C("aoMap"),e={v:null},i=new F(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new B(t),o=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("colorTex"),e.v.output),r=n.addNode_u9w9by$(new yn(o.outColor,n.stage)).outGray;return n.colorOutput_a3v4si$(r),t},yn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inRed)},yn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outGray.declare()+" = vec4("+this.inRed.ref1f_61zpoe$()+", "+this.inRed.ref1f_61zpoe$()+", "+this.inRed.ref1f_61zpoe$()+", 1.0);")},yn.$metadata$={kind:P,simpleName:"Red2GrayNode",interfaces:[N]},$n.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var vn=null;function gn(){return null===vn&&new $n,vn}function bn(){Ln(),Kr.call(this,"Atmosphere"),this.sunColor=m.Companion.WHITE;var t=new yt;t.setDirectional_czzhiu$($.Companion.NEG_Z_AXIS),t.setColor_y83vuj$(this.sunColor,5),this.sun=t,this.sunIntensity_0=1,this.time=.5,this.moonTime=0,this.animateTime_0=!0,this.timeSlider_0=null,this.textures=vt(),this.deferredPipeline_enh35m$_0=this.deferredPipeline_enh35m$_0,this.atmoShader=new Dn,this.earthGroup=new Z("earth"),this.opticalDepthLutPass_1meau0$_0=this.opticalDepthLutPass_1meau0$_0,this.shadows_0=M(),this.camTransform_0=new Yn(Ln().earthRadius),this.menuContainer_3y52kp$_0=this.menuContainer_3y52kp$_0,this.loadingLabel_8f6fxf$_0=this.loadingLabel_8f6fxf$_0,this.loadingComplete_0=!1,this.sceneSetupComplete_0=!1}function xn(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$AtmosphereDemo=t,this.local$$receiver=e}function wn(t,e,i,n,o,r){z.call(this,r),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$key=i,this.local$path=n,this.local$props=o}function zn(t){var e=(new gt).icoDefaults();return e.steps=5,e.radius=1*Ln().earthRadius,t.icoSphere_mojs8w$(e),s}function kn(t){t.isFrustumChecked=!1,t.generate_v2sixm$(zn);var e=new bt;return t.shader=new xt(e),s}function Sn(t,e){N.call(this,"earthLightColor",e),this.lightColorGradient=t,this.inWorldPos_widqn3$_0=this.inWorldPos_widqn3$_0,this.inFragToLight_2axofe$_0=this.inFragToLight_2axofe$_0,this.inRadiance_2axs4i$_0=this.inRadiance_2axs4i$_0,this.outRadiance=new T(new lt(this.name+"_outRadiance"),this)}function Cn(t){var e=new R;return e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Nn(t){return t.layoutSpec.setOrigin_4ujscr$(pt(),pt(),pt()),t.layoutSpec.setSize_4ujscr$(ct(100),ct(100),ht()),t.textAlignment=new ft(dt.CENTER,dt.CENTER),s}function En(t){return function(e){return t.colorSlider_0(e,"R:",m.Companion.RED,t.atmoShader.scatteringCoeffs.x,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(e.value),s}}(t)),t.colorSlider_0(e,"G:",m.Companion.GREEN,t.atmoShader.scatteringCoeffs.y,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(void 0,e.value),s}}(t)),t.colorSlider_0(e,"B:",m.Companion.BLUE,t.atmoShader.scatteringCoeffs.z,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(void 0,void 0,e.value),s}}(t)),e.gap_mx4ult$(8),e.sliderWithValueSmall_jjtbof$("Pow:",t.atmoShader.scatteringCoeffPow,1,20,2,void 0,10,void 0,function(t){return function(e){return t.atmoShader.scatteringCoeffPow=e.value,s}}(t)),e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.scatteringCoeffStrength,.01,5,2,void 0,10,void 0,function(t){return function(e){return t.atmoShader.scatteringCoeffStrength=e.value,s}}(t)),s}}function Tn(t){return function(e){return t.colorSlider_0(e,"R:",m.Companion.RED,t.atmoShader.rayleighColor.r,0,4,function(t){return function(e){return t.updateRayleighColor_0(e.value),s}}(t)),t.colorSlider_0(e,"G:",m.Companion.GREEN,t.atmoShader.rayleighColor.g,0,4,function(t){return function(e){return t.updateRayleighColor_0(void 0,e.value),s}}(t)),t.colorSlider_0(e,"B:",m.Companion.BLUE,t.atmoShader.rayleighColor.b,0,4,function(t){return function(e){return t.updateRayleighColor_0(void 0,void 0,e.value),s}}(t)),e.gap_mx4ult$(8),e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.rayleighColor.a,0,2,void 0,void 0,10,void 0,function(t){return function(e){return t.updateRayleighColor_0(void 0,void 0,void 0,e.value),s}}(t)),s}}function Pn(t){return function(e){return e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.mieColor.a,0,2,void 0,void 0,10,void 0,function(t){return function(e){return t.updateMieColor_0(void 0,void 0,void 0,e.value),s}}(t)),e.sliderWithValueSmall_jjtbof$("g:",t.atmoShader.mieG,.5,.999,3,void 0,10,void 0,function(t){return function(e){return t.atmoShader.mieG=e.value,s}}(t)),s}}function On(t){return _t(t,0)+" km"}function Mn(t){return function(e){var i=On;return e.sliderWithValueSmall_jjtbof$("Thickness:",(t.atmoShader.atmosphereRadius-Ln().earthRadius)*Ln().kmPerUnit,10,1e3,void 0,i,24,void 0,function(t){return function(e){return t.updateAtmosphereThickness_0(e.value),s}}(t)),e.sliderWithValueSmall_jjtbof$("Falloff:",t.opticalDepthLutPass_0.densityFalloff,0,15,2,void 0,24,void 0,function(t){return function(e){return t.opticalDepthLutPass_0.densityFalloff=e.value,s}}(t)),s}}function jn(t){var e=24*t,i=mt(e),n=mt(e%1*60),o=n<10?"0":"";return i.toString()+":"+o+n}function An(t){return function(e){e.sliderWithValueSmall_jjtbof$("Sun:",t.atmoShader.sunColor.a,.1,5,2,void 0,24,void 0,function(t){return function(e){return t.sunIntensity_0=e.value,t.updateSun_0(),s}}(t));var i=jn;t.timeSlider_0=e.sliderWithValueSmall_jjtbof$("Time:",t.time,0,1,void 0,i,24,void 0,function(t){return function(e){return t.time=e.value,t.updateSun_0(),s}}(t)),e.toggleButton_8v9fdr$("Animate Time",t.animateTime_0,function(t){return function(e){return t.animateTime_0=e.isEnabled,s}}(t));var n=e.textWithValue_puj7f4$("Camera Height:",""),o=t;return n.onUpdate.add_11rb$(function(t,e){return function(i,n){var o=t.cameraHeight*Ln().kmPerUnit;return e.text=_t(o,1)+" km",s}}(o,n)),s}}function In(){Rn=this,this.kmPerUnit=100,this.earthRadius=6e3/this.kmPerUnit,this.earthAxisTilt=15,this.moonRadius=1750/this.kmPerUnit,this.moonDistScale=.25,this.moonDist=384400/this.kmPerUnit*this.moonDistScale,this.moonInclination=5.145;var t=this.moonDist/this.moonDistScale;this.keplerC=j.pow(t,3)/j.pow(27.32,2);var e=this.moonDist;this.moonT=j.pow(e,3)/this.keplerC,this.waterColorLow=m.Companion.fromHex_61zpoe$("0D1F56").toLinear(),this.waterColorHigh=m.Companion.fromHex_61zpoe$("020514").toLinear(),this.texMilkyway="Milkyway",this.texSun="Sun",this.texSunBg="Sun Background",this.texMoon="Moon"}ln.$metadata$={kind:P,simpleName:"AoDemo",interfaces:[Kr]},Object.defineProperty(bn.prototype,"deferredPipeline",{configurable:!0,get:function(){return null==this.deferredPipeline_enh35m$_0?r("deferredPipeline"):this.deferredPipeline_enh35m$_0},set:function(t){this.deferredPipeline_enh35m$_0=t}}),Object.defineProperty(bn.prototype,"opticalDepthLutPass_0",{configurable:!0,get:function(){return null==this.opticalDepthLutPass_1meau0$_0?r("opticalDepthLutPass"):this.opticalDepthLutPass_1meau0$_0},set:function(t){this.opticalDepthLutPass_1meau0$_0=t}}),Object.defineProperty(bn.prototype,"menuContainer_0",{configurable:!0,get:function(){return null==this.menuContainer_3y52kp$_0?r("menuContainer"):this.menuContainer_3y52kp$_0},set:function(t){this.menuContainer_3y52kp$_0=t}}),Object.defineProperty(bn.prototype,"loadingLabel_0",{configurable:!0,get:function(){return null==this.loadingLabel_8f6fxf$_0?r("loadingLabel"):this.loadingLabel_8f6fxf$_0},set:function(t){this.loadingLabel_8f6fxf$_0=t}}),Object.defineProperty(bn.prototype,"cameraHeight",{configurable:!0,get:function(){return this.mainScene.camera.globalPos.distance_czzhiu$($.Companion.ZERO)-Ln().earthRadius}}),xn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},xn.prototype=Object.create(z.prototype),xn.prototype.constructor=xn,xn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=V(U,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Ln().texMilkyway,Or().awsBaseUrl+"/solarsystem/stars_bg.jpg",void 0,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Ln().texSun,Or().awsBaseUrl+"/solarsystem/sun.png",void 0,this),this.result_0===w)return w;continue;case 4:if(this.state_0=5,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Ln().texSunBg,Or().awsBaseUrl+"/solarsystem/sun_bg.png",void 0,this),this.result_0===w)return w;continue;case 5:if(this.state_0=6,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Ln().texMoon,Or().awsBaseUrl+"/solarsystem/moon.jpg",void 0,this),this.result_0===w)return w;continue;case 6:if(this.state_0=7,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,to().texEarthDay,Or().awsBaseUrl+"/solarsystem/earth_day.jpg",void 0,this),this.result_0===w)return w;continue;case 7:if(this.state_0=8,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,to().texEarthNight,Or().awsBaseUrl+"/solarsystem/earth_night.jpg",void 0,this),this.result_0===w)return w;continue;case 8:if(this.state_0=9,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,to().texEarthNrm,Or().awsBaseUrl+"/solarsystem/earth_nrm.jpg",void 0,this),this.result_0===w)return w;continue;case 9:if(this.state_0=10,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,to().texOceanNrm,Or().awsBaseUrl+"/solarsystem/oceanNrm.jpg",void 0,this),this.result_0===w)return w;continue;case 10:var t=new W(G.R,H.CLAMP_TO_EDGE,H.CLAMP_TO_EDGE,H.CLAMP_TO_EDGE);if(this.state_0=11,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,to().texEarthHeight,Or().awsBaseUrl+"/solarsystem/earth_height_8k.png",t,this),this.result_0===w)return w;continue;case 11:if(this.local$this$AtmosphereDemo.loadingLabel_0.text="Initializing Scene...",this.state_0=12,this.result_0=V(K,this),this.result_0===w)return w;continue;case 12:return this.local$this$AtmosphereDemo.loadingComplete_0=!0,s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},bn.prototype.lateInit_aemszp$=function(t){var e,i=this.camTransform_0;this.mainScene.registerDragHandler_y44tw7$(i),i.unaryPlus_uv0sim$(this.mainScene.camera),t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var o=new xn(e,t,this,i);return n?o:o.doResume(null)}))},wn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},wn.prototype=Object.create(z.prototype),wn.prototype.constructor=wn,wn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(void 0===this.local$props&&(this.local$props=new W),this.$this.loadingLabel_0.text='Loading texture "'+this.local$key+'"...',this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(this.local$path,this.local$props,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.$this.textures,e=this.result_0;return void t.put_xwzc9p$(this.local$key,e);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},bn.prototype.loadTex_0=function(t,e,i,n,o,r){var s=new wn(this,t,e,i,n,o);return r?s:s.doResume(null)},bn.prototype.setupMainScene_aemszp$=function(t){var i=new L(null);this.opticalDepthLutPass_0=new so,i.addOffscreenPass_m1c2kf$(this.opticalDepthLutPass_0),i.lighting.lights.clear();var n=i.lighting.lights,o=this.sun;n.add_11rb$(o);var r=this.shadows_0,a=new l(i,0);r.add_11rb$(a);var u=new X;u.isWithEmissive=!0,u.isWithAmbientOcclusion=!1,u.isWithScreenSpaceReflections=!1,u.maxGlobalLights=1,u.shadowMaps=this.shadows_0,u.pbrSceneShader=this.makeDeferredPbrShader_0(u);var p=u;this.deferredPipeline=new Y(i,p),this.deferredPipeline.pbrPass.sceneShader.ambient=new m(.05,.05,.05).toLinear();var c=this.atmoShader;c.opticalDepthLut=this.opticalDepthLutPass_0.colorTexture,c.sceneColor=this.deferredPipeline.pbrPass.colorTexture,c.scenePos=this.deferredPipeline.mrtPass.positionAo,c.surfaceRadius=Ln().earthRadius,c.atmosphereRadius=6500/Ln().kmPerUnit,c.scatteringCoeffs=new $(.75,1.1,1.35),c.rayleighColor=new m(.5,.5,1,1),c.mieColor=new m(1,.35,.35,.5),c.mieG=.8,c.scatteringCoeffStrength=1;var h=new Z;h.isFrustumChecked=!1,h.unaryPlus_uv0sim$(g("shadowEarth",kn));var d,f,_,y=h;for(this.earthGroup.plusAssign_f1kmr1$(y),d=this.shadows_0.iterator();d.hasNext();){var v=d.next();v.drawNode=y,v.shadowBounds=this.earthGroup.bounds}return i.onUpdate.add_11rb$((f=this,_=y,function(t,i){var n,o;if(f.loadingComplete_0){f.sceneSetupComplete_0||(f.sceneSetupComplete_0=!0,f.finalizeSceneSetup_0(f.deferredPipeline),f.earthGroup.minusAssign_f1kmr1$(_));var r=e.isType(n=f.mainScene.camera,J)?n:Q(),a=r.globalPos.length()-Ln().earthRadius;r.position.set_czzhiu$($.Companion.ZERO),r.lookAt.set_czzhiu$($.Companion.NEG_Z_AXIS);var l,u=.5*a;if(l=u<.003?.003:u>5?5:u,r.clipNear=l,r.clipFar=1e3*r.clipNear,f.animateTime_0){var p=i.deltaT/120;null!=(o=f.timeSlider_0)&&(o.value=(f.time+p)%1),f.moonTime=f.moonTime+p/Ln().moonT}}return s})),i.onDispose.add_11rb$(function(t){return function(e,i){var n;for(n=t.textures.values.iterator();n.hasNext();)n.next().dispose();return s}}(this)),i},bn.prototype.makeDeferredPbrShader_0=function(t){var i=new et;i.isWithEmissive=t.isWithEmissive,i.isScrSpcAmbientOcclusion=t.isWithAmbientOcclusion,i.isScrSpcReflections=t.isWithScreenSpaceReflections,i.maxLights=t.maxGlobalLights,I(i.shadowMaps,this.shadows_0),i.useImageBasedLighting_po417x$(t.environmentMaps);var n,o,r=i,a=tt.Companion.defaultDeferredPbrModel_ijjr66$(r),l=new B(a);t:do{var u;for(n=wt.ALL,u=a.stages.values.iterator();u.hasNext();){var p=u.next();if(0!=(p.stage.mask&n.mask)){var c,h=p.nodes,f=M();for(c=h.iterator();c.hasNext();){var _=c.next();e.isType(_,it)&&f.add_11rb$(_)}var $=zt(f);if(null!=$){o=$;break t}}}o=null}while(0);var y,v,g=d(o);t:do{var b;for(y=wt.ALL,b=a.stages.values.iterator();b.hasNext();){var x=b.next();if(0!=(x.stage.mask&y.mask)){var w,z=x.nodes,k=M();for(w=z.iterator();w.hasNext();){var S=w.next();e.isType(S,nt)&&k.add_11rb$(S)}var C=zt(k);if(null!=C){v=C;break t}}}v=null}while(0);var N=d(v),E=l.textureNode_61zpoe$("tLightGradient"),T=l.addNode_u9w9by$(new Sn(E,l.stage));T.inWorldPos=N.inFragPos,T.inFragToLight=g.outFragToLightDirection,T.inRadiance=g.outRadiance,N.inRadiance=T.outRadiance;var P=a,O=90*A.DEG_2_RAD,R=ot(j.cos(O),m.Companion.MD_ORANGE.mix_y83vuj$(m.Companion.WHITE,.6).toLinear()),L=85*A.DEG_2_RAD,D=ot(j.cos(L),m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.6).toLinear()),q=80*A.DEG_2_RAD,F=ot(j.cos(q),m.Companion.WHITE.toLinear()),U=0*A.DEG_2_RAD,V=new st(new rt([R,D,F,ot(j.cos(U),m.Companion.WHITE.toLinear())])),G=this.textures,H=to().texLightGradient;G.put_xwzc9p$(H,V);var W,K,X=new tt(r,P);return X.onPipelineCreated.add_11rb$((W=V,K=P,function(t,i,n){var o,r,a,l,u=K;t:do{var p;for(a=wt.ALL,p=u.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&a.mask)){var h,d,f=c.nodes;e:do{var _;for(_=f.iterator();_.hasNext();){var m=_.next();if(kt(m.name,"tLightGradient")&&e.isType(m,at)){d=m;break e}}d=null}while(0);var $=null==(h=d)||e.isType(h,at)?h:Q();if(null!=$){l=$;break t}}}l=null}while(0);return null!=(r=null!=(o=l)?o.sampler:null)&&(r.texture=W),s})),X},Object.defineProperty(Sn.prototype,"inWorldPos",{configurable:!0,get:function(){return null==this.inWorldPos_widqn3$_0?r("inWorldPos"):this.inWorldPos_widqn3$_0},set:function(t){this.inWorldPos_widqn3$_0=t}}),Object.defineProperty(Sn.prototype,"inFragToLight",{configurable:!0,get:function(){return null==this.inFragToLight_2axofe$_0?r("inFragToLight"):this.inFragToLight_2axofe$_0},set:function(t){this.inFragToLight_2axofe$_0=t}}),Object.defineProperty(Sn.prototype,"inRadiance",{configurable:!0,get:function(){return null==this.inRadiance_2axs4i$_0?r("inRadiance"):this.inRadiance_2axs4i$_0},set:function(t){this.inRadiance_2axs4i$_0=t}}),Sn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inWorldPos,this.inFragToLight,this.inRadiance])},Sn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                float "+this.name+"_l = clamp(dot(normalize("+this.inWorldPos.ref3f_61zpoe$()+"), "+this.inFragToLight.ref3f_61zpoe$()+"), 0.0, 1.0);\n                "+this.outRadiance.declare()+" = "+this.inRadiance.ref3f_61zpoe$()+" * "+t.sampleTexture2d_buzeal$(this.lightColorGradient.name,"vec2("+this.name+"_l, 0.0)")+".rgb;\n            ")},Sn.$metadata$={kind:P,simpleName:"EarthLightColorNode",interfaces:[N]},bn.prototype.finalizeSceneSetup_0=function(t){this.menuContainer_0.isVisible=!0,this.loadingLabel_0.isVisible=!1;var e,i=new ho(this);this.atmoShader.skyColor=i.colorTexture,this.setupContent_0(t.contentGroup),this.mainScene.unaryPlus_uv0sim$(b(void 0,void 0,(e=this,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(Cn),t.shader=e.atmoShader,s}))),this.updateSun_0()},bn.prototype.setupContent_0=function(t){var e=this.earthGroup;e.isFrustumChecked=!1,e.unaryPlus_uv0sim$(this.camTransform_0);var i,n,o,r=new To,a=new Zn(this.textures);a.heightMap=this.textures.get_11rb$(to().texEarthHeight),a.oceanNrmTex=this.textures.get_11rb$(to().texOceanNrm),r.shader=a,r.onUpdate.add_11rb$((i=this,n=r,o=a,function(t,e){var r,a,l,u,p,c;n.updateTiles_czzhiu$(i.mainScene.camera.globalPos);var h=i.cameraHeight*Ln().kmPerUnit/100,d=h<0?0:h>1?1:h;null!=(a=null!=(r=o.uWaterColor)?r.value:null)&&a.set_czzhhz$(Ln().waterColorLow.mix_y83vuj$(Ln().waterColorHigh,d)),null!=(u=null!=(l=o.uNormalShift)?l.value:null)&&u.set_7b5o5w$(.0051*e.time,.0037*e.time,-.0071*e.time,-.0039*e.time);var f=ut(i.sun.direction).scale_mx4ult$(-1);return null!=(c=null!=(p=o.uDirToSun)?p.value:null)&&(c.set_czzhiu$(f),t.toLocalCoords_w1lst9$(c,0)),i.atmoShader.dirToSun=f,s}));var l=r;e.unaryPlus_uv0sim$(l),e.onUpdate.add_11rb$(function(t,e){return function(i,n){return t.setIdentity(),t.rotate_ad55pp$(Ln().earthAxisTilt,$.Companion.NEG_X_AXIS),t.rotate_ad55pp$(360*e.time,$.Companion.Y_AXIS),s}}(e,this)),t.unaryPlus_uv0sim$(e)},bn.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,function(t){var i=t.uiRoot,n=e;return n.loadingLabel_0=i.label_tokfmu$("Loading...",Nn),i.unaryPlus_uv0sim$(n.loadingLabel_0),e.menuContainer_0=t.menuContainer,t.menuContainer.isVisible=!1,t.menuWidth=380,t.section_yfmn31$("Scattering",En(e)),t.section_yfmn31$("Rayleigh",Tn(e)),t.section_yfmn31$("Mie",Pn(e)),t.section_yfmn31$("Atmosphere",Mn(e)),t.section_yfmn31$("View",An(e)),s}));var e},bn.prototype.updateSun_0=function(){var t=new $t(0,0,-1);this.atmoShader.dirToSun=t,this.atmoShader.sunColor=this.sunColor.withAlpha_mx4ult$(this.sunIntensity_0);var e=this.mainScene.lighting.lights.get_za3lpa$(0);e.setDirectional_czzhiu$(ut(t).scale_mx4ult$(-1)),e.setColor_y83vuj$(this.sunColor,5*this.sunIntensity_0)},bn.prototype.updateRayleighColor_0=function(t,e,i,n){void 0===t&&(t=this.atmoShader.rayleighColor.r),void 0===e&&(e=this.atmoShader.rayleighColor.g),void 0===i&&(i=this.atmoShader.rayleighColor.b),void 0===n&&(n=this.atmoShader.rayleighColor.a),this.atmoShader.rayleighColor=new m(t,e,i,n)},bn.prototype.updateMieColor_0=function(t,e,i,n){void 0===t&&(t=this.atmoShader.mieColor.r),void 0===e&&(e=this.atmoShader.mieColor.g),void 0===i&&(i=this.atmoShader.mieColor.b),void 0===n&&(n=this.atmoShader.mieColor.a),this.atmoShader.mieColor=new m(t,e,i,n)},bn.prototype.updateScatteringCoeffs_0=function(t,e,i){void 0===t&&(t=this.atmoShader.scatteringCoeffs.x),void 0===e&&(e=this.atmoShader.scatteringCoeffs.y),void 0===i&&(i=this.atmoShader.scatteringCoeffs.z),this.atmoShader.scatteringCoeffs=new $(t,e,i)},bn.prototype.updateAtmosphereThickness_0=function(t){var e=Ln().earthRadius+t/Ln().kmPerUnit;this.atmoShader.atmosphereRadius=e,this.opticalDepthLutPass_0.atmosphereRadius=e},bn.prototype.colorSlider_0=function(t,e,i,n,o,r,s){var a=t.sliderWithValueSmall_jjtbof$(e,n,o,r,void 0,void 0,10,void 0,s);return a.knobColor.setCustom_11rb$(i),a.trackColorHighlighted.setCustom_11rb$(i.mix_y83vuj$(m.Companion.BLACK,.5)),a},In.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Rn=null;function Ln(){return null===Rn&&new In,Rn}function Dn(){var t;Bn(),At.call(this,Bn().atmosphereModel_0()),this.opticalDepthLutNode_0=null,this.sceneColorNode_0=null,this.scenePosNode_0=null,this.skyColorNode_0=null,this.atmosphereNode_0=null,this.opticalDepthLut_p8nvlg$_0=null,this.sceneColor_bwjq5t$_0=null,this.scenePos_th0mjk$_0=null,this.skyColor_mqtgu2$_0=null,this.dirToSun_auak70$_0=new $(0,0,1),this.sunColor_wzy3ch$_0=m.Companion.WHITE,this.scatteringCoeffPow_atsxc5$_0=4.5,this.scatteringCoeffStrength_31rdhy$_0=1,this.scatteringCoeffs_4w0w4q$_0=new $(.5,.8,1),this.rayleighColor_1rrtao$_0=new m(.75,.75,.75,1),this.mieColor_ii078u$_0=new m(1,.9,.8,.3),this.mieG_ochup6$_0=.99,this.planetCenter_3pilph$_0=$.Companion.ZERO,this.surfaceRadius_rmfofh$_0=600,this.atmosphereRadius_w8w0fo$_0=609,this.onPipelineSetup.add_11rb$(Xn),this.onPipelineCreated.add_11rb$((t=this,function(i,n,o){var r,a,l,u,p,c,h,d,f,_,m,$=t,y=t.model;t:do{var v;for(_=wt.ALL,v=y.stages.values.iterator();v.hasNext();){var g=v.next();if(0!=(g.stage.mask&_.mask)){var b,x,w=g.nodes;e:do{var z;for(z=w.iterator();z.hasNext();){var k=z.next();if(kt(k.name,"tOpticalDepthLut")&&e.isType(k,at)){x=k;break e}}x=null}while(0);var S=null==(b=x)||e.isType(b,at)?b:Q();if(null!=S){m=S;break t}}}m=null}while(0);$.opticalDepthLutNode_0=m,null!=(a=null!=(r=t.opticalDepthLutNode_0)?r.sampler:null)&&(a.texture=t.opticalDepthLut);var C,N,E=t,T=t.model;t:do{var P;for(C=wt.ALL,P=T.stages.values.iterator();P.hasNext();){var O=P.next();if(0!=(O.stage.mask&C.mask)){var j,A,I=O.nodes;e:do{var R;for(R=I.iterator();R.hasNext();){var L=R.next();if(kt(L.name,"tSceneColor")&&e.isType(L,at)){A=L;break e}}A=null}while(0);var D=null==(j=A)||e.isType(j,at)?j:Q();if(null!=D){N=D;break t}}}N=null}while(0);E.sceneColorNode_0=N,null!=(u=null!=(l=t.sceneColorNode_0)?l.sampler:null)&&(u.texture=t.sceneColor);var q,F,B=t,U=t.model;t:do{var V;for(q=wt.ALL,V=U.stages.values.iterator();V.hasNext();){var G=V.next();if(0!=(G.stage.mask&q.mask)){var H,W,K=G.nodes;e:do{var X;for(X=K.iterator();X.hasNext();){var Y=X.next();if(kt(Y.name,"tScenePos")&&e.isType(Y,at)){W=Y;break e}}W=null}while(0);var Z=null==(H=W)||e.isType(H,at)?H:Q();if(null!=Z){F=Z;break t}}}F=null}while(0);B.scenePosNode_0=F,null!=(c=null!=(p=t.scenePosNode_0)?p.sampler:null)&&(c.texture=t.scenePos);var J,tt,et=t,it=t.model;t:do{var nt;for(J=wt.ALL,nt=it.stages.values.iterator();nt.hasNext();){var ot=nt.next();if(0!=(ot.stage.mask&J.mask)){var rt,st,lt=ot.nodes;e:do{var ut;for(ut=lt.iterator();ut.hasNext();){var pt=ut.next();if(kt(pt.name,"tSkyColor")&&e.isType(pt,at)){st=pt;break e}}st=null}while(0);var ct=null==(rt=st)||e.isType(rt,at)?rt:Q();if(null!=ct){tt=ct;break t}}}tt=null}while(0);et.skyColorNode_0=tt,null!=(d=null!=(h=t.skyColorNode_0)?h.sampler:null)&&(d.texture=t.skyColor);var ht,dt,ft=t,_t=t.model;t:do{var mt;for(ht=wt.ALL,mt=_t.stages.values.iterator();mt.hasNext();){var $t=mt.next();if(0!=($t.stage.mask&ht.mask)){var yt,vt=$t.nodes,gt=M();for(yt=vt.iterator();yt.hasNext();){var bt=yt.next();e.isType(bt,Kn)&&gt.add_11rb$(bt)}var xt=zt(gt);if(null!=xt){dt=xt;break t}}}dt=null}while(0);if(ft.atmosphereNode_0=dt,null!=(f=t.atmosphereNode_0)){var St=t;f.uDirToSun.value.set_czzhiu$(St.dirToSun),f.uPlanetCenter.value.set_czzhiu$(St.planetCenter),f.uSurfaceRadius.value=St.surfaceRadius,f.uAtmosphereRadius.value=St.atmosphereRadius,f.uRayleighColor.value.set_czzhhz$(St.rayleighColor),f.uMieColor.value.set_czzhhz$(St.mieColor),f.uMieG.value=St.mieG,f.uSunColor.value.set_czzhhz$(St.sunColor),St.updateScatteringCoeffs_0()}return s}))}function qn(){Fn=this}bn.$metadata$={kind:P,simpleName:"AtmosphereDemo",interfaces:[Kr]},Object.defineProperty(Dn.prototype,"opticalDepthLut",{configurable:!0,get:function(){return this.opticalDepthLut_p8nvlg$_0},set:function(t){var e,i;this.opticalDepthLut_p8nvlg$_0=t,null!=(i=null!=(e=this.opticalDepthLutNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(Dn.prototype,"sceneColor",{configurable:!0,get:function(){return this.sceneColor_bwjq5t$_0},set:function(t){var e,i;this.sceneColor_bwjq5t$_0=t,null!=(i=null!=(e=this.sceneColorNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(Dn.prototype,"scenePos",{configurable:!0,get:function(){return this.scenePos_th0mjk$_0},set:function(t){var e,i;this.scenePos_th0mjk$_0=t,null!=(i=null!=(e=this.scenePosNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(Dn.prototype,"skyColor",{configurable:!0,get:function(){return this.skyColor_mqtgu2$_0},set:function(t){var e,i;this.skyColor_mqtgu2$_0=t,null!=(i=null!=(e=this.skyColorNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(Dn.prototype,"dirToSun",{configurable:!0,get:function(){return this.dirToSun_auak70$_0},set:function(t){var e,i,n;this.dirToSun_auak70$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uDirToSun:null)?i.value:null)&&n.set_czzhiu$(t)}}),Object.defineProperty(Dn.prototype,"sunColor",{configurable:!0,get:function(){return this.sunColor_wzy3ch$_0},set:function(t){var e,i,n;this.sunColor_wzy3ch$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uSunColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Dn.prototype,"scatteringCoeffPow",{configurable:!0,get:function(){return this.scatteringCoeffPow_atsxc5$_0},set:function(t){this.scatteringCoeffPow_atsxc5$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(Dn.prototype,"scatteringCoeffStrength",{configurable:!0,get:function(){return this.scatteringCoeffStrength_31rdhy$_0},set:function(t){this.scatteringCoeffStrength_31rdhy$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(Dn.prototype,"scatteringCoeffs",{configurable:!0,get:function(){return this.scatteringCoeffs_4w0w4q$_0},set:function(t){this.scatteringCoeffs_4w0w4q$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(Dn.prototype,"rayleighColor",{configurable:!0,get:function(){return this.rayleighColor_1rrtao$_0},set:function(t){var e,i,n;this.rayleighColor_1rrtao$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uRayleighColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Dn.prototype,"mieColor",{configurable:!0,get:function(){return this.mieColor_ii078u$_0},set:function(t){var e,i,n;this.mieColor_ii078u$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uMieColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Dn.prototype,"mieG",{configurable:!0,get:function(){return this.mieG_ochup6$_0},set:function(t){var e,i;this.mieG_ochup6$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uMieG:null)&&(i.value=t)}}),Object.defineProperty(Dn.prototype,"planetCenter",{configurable:!0,get:function(){return this.planetCenter_3pilph$_0},set:function(t){var e,i,n;this.planetCenter_3pilph$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uPlanetCenter:null)?i.value:null)&&n.set_czzhiu$(t)}}),Object.defineProperty(Dn.prototype,"surfaceRadius",{configurable:!0,get:function(){return this.surfaceRadius_rmfofh$_0},set:function(t){var e,i;this.surfaceRadius_rmfofh$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uSurfaceRadius:null)&&(i.value=t)}}),Object.defineProperty(Dn.prototype,"atmosphereRadius",{configurable:!0,get:function(){return this.atmosphereRadius_w8w0fo$_0},set:function(t){var e,i;this.atmosphereRadius_w8w0fo$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uAtmosphereRadius:null)&&(i.value=t)}}),Dn.prototype.updateScatteringCoeffs_0=function(){var t,e,i;if(null!=(i=null!=(e=null!=(t=this.atmosphereNode_0)?t.uScatteringCoeffs:null)?e.value:null)){var n=this.scatteringCoeffs.x,o=this.scatteringCoeffPow;i.x=j.pow(n,o)*this.scatteringCoeffStrength;var r=this.scatteringCoeffs.y,s=this.scatteringCoeffPow;i.y=j.pow(r,s)*this.scatteringCoeffStrength;var a=this.scatteringCoeffs.z,l=this.scatteringCoeffPow;i.z=j.pow(a,l)*this.scatteringCoeffStrength}},qn.prototype.atmosphereModel_0=function(){var t=new C,e={v:null},i={v:null},n={v:null},o=new F(t);e.v=o.mvpNode();var r=o.attrTexCoords().output,s=o.addNode_u9w9by$(new Un(o.stage));s.inScreenPos=r;var a=s;n.v=o.stageInterfaceNode_iikjwn$("ifViewDir",a.outViewDir),i.v=o.stageInterfaceNode_iikjwn$("ifTexCoords",r),o.positionOutput=o.fullScreenQuadPositionNode_r20yfm$(r).outQuadPos;var l=new B(t);l.addNode_u9w9by$(new Wn(l.stage));var u=e.v.addToStage_llmhyc$(l.stage),p=l.textureNode_61zpoe$("tOpticalDepthLut"),c=l.textureSamplerNode_ce41yx$(l.textureNode_61zpoe$("tSceneColor"),i.v.output).outColor,h=l.textureSamplerNode_ce41yx$(l.textureNode_61zpoe$("tSkyColor"),i.v.output).outColor,d=l.textureSamplerNode_ce41yx$(l.textureNode_61zpoe$("tScenePos"),i.v.output).outColor,f=l.addNode_u9w9by$(new Gn(l.stage));f.inViewPos=d;var _=f,m=l.addNode_u9w9by$(new Kn(p,l.stage));m.inSceneColor=c,m.inSceneDepth=l.splitNode_500t7j$(d,"z").output,m.inScenePos=_.outWorldPos,m.inSkyColor=h,m.inViewDepth=l.splitNode_500t7j$(d,"z").output,m.inCamPos=u.outCamPos,m.inLookDir=n.v.output;var $=m;return l.colorOutput_a3v4si$(l.hdrToLdrNode_r20yfm$($.outColor).outColor),t},qn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Fn=null;function Bn(){return null===Fn&&new qn,Fn}function Un(t){N.call(this,"xyToViewDir",t),this.uInvViewProjMat_0=new St("uInvViewProjMat"),this.inScreenPos=new T(new Nt(Ct.Companion.ZERO)),this.outViewDir=new T(new lt(this.name+"_outWorldPos"),this)}function Vn(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewProjMat_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.uInvViewProjMat_0.value.set_d4zu6l$(i.renderPass.camera.invViewProj),s}}(t),s}}function Gn(t){N.call(this,"view2worldPos",t),this.uInvViewMat_0=new St("uInvViewMat"),this.inViewPos=new T(new Et($.Companion.ZERO)),this.outWorldPos=new T(new E(this.name+"_outWorldPos"),this)}function Hn(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewMat_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.uInvViewMat_0.value.set_d4zu6l$(i.renderPass.camera.invView),s}}(t),s}}function Wn(t){N.call(this,"raySphereIntersection",t)}function Kn(t,e){N.call(this,"atmosphereNode",e),this.opticalDepthLut=t,this.inSceneColor=new T(new Tt(m.Companion.MAGENTA)),this.inSceneDepth=new T(new Et($.Companion.ZERO)),this.inScenePos=new T(new Et($.Companion.ZERO)),this.inSkyColor=new T(new Tt(m.Companion.MAGENTA)),this.inViewDepth=new T(new Pt(-1)),this.inCamPos=new T(new Et($.Companion.ZERO)),this.inLookDir=new T(new Et($.Companion.Z_AXIS)),this.uDirToSun=new Ot("uDirToSun"),this.uPlanetCenter=new Ot("uPlanetCenter"),this.uSurfaceRadius=new Mt("uSurfaceRadius"),this.uAtmosphereRadius=new Mt("uAtmosphereRadius"),this.uScatteringCoeffs=new Ot("uScatteringCoeffs"),this.uMieG=new Mt("uMieG"),this.uMieColor=new jt("uMieColor"),this.uRayleighColor=new jt("uRayleighColor"),this.uSunColor=new jt("uSunColor"),this.outColor=new T(new E("outColor"),this)}function Xn(t,e,i){return t.depthTest=It.DISABLED,s}function Yn(t){var e;Z.call(this),this.earthRadius=t,this.planetRotX=0,this.planetRotY=0,this.lookRotX=0,this.lookRotY=0,this.camRotX=0,this.zoom=2,this.minZoom=.001,this.maxZoom=15,this.planetRot_0=new Rt,this.lookRot_0=new Rt,this.camRot_0=new Rt,this.planetRot_0.rotate_5820x2$(13,Lt.Companion.Y_AXIS),this.planetRot_0.rotate_5820x2$(40,Lt.Companion.NEG_X_AXIS),this.onUpdate.add_11rb$((e=this,function(t,i){var n=e.invTransform.transform_j7uy7i$(Dt(Lt.Companion.X_AXIS),0),o=e.invTransform.transform_j7uy7i$(Dt(Lt.Companion.Y_AXIS),0);return e.lookRot_0.setIdentity(),e.lookRot_0.rotate_5820x2$(e.lookRotY,Lt.Companion.Z_AXIS),e.lookRot_0.rotate_5820x2$(e.lookRotX,Lt.Companion.X_AXIS),e.camRot_0.setIdentity(),e.camRot_0.rotate_5820x2$(e.camRotX,Lt.Companion.X_AXIS),e.lookRot_0.transform_j7uy7i$(n,0),e.lookRot_0.transform_j7uy7i$(o,0),e.planetRot_0.rotate_5820x2$(e.planetRotX,n),e.planetRot_0.rotate_5820x2$(e.planetRotY,o),e.setIdentity(),e.mul_d4zu6l$(e.planetRot_0),e.translate_y2kzbl$(0,0,e.earthRadius),e.mul_d4zu6l$(e.lookRot_0),e.translate_y2kzbl$(0,0,e.earthRadius*e.zoom),e.mul_d4zu6l$(e.camRot_0),s}))}function Zn(t,i){var n;to(),void 0===i&&(i=to().shaderConfig_wmdeeb$(t)),Bt.call(this,i,to().model_2ufela$(i)),this.tHeightMap_0=null,this.heightMap_etfhgu$_0=null,this.tOcean_0=null,this.oceanNrmTex_42rp2f$_0=null,this.uDirToSun=null,this.uNormalShift=null,this.uWaterColor=null,this.onPipelineCreated.add_11rb$((n=this,function(t,i,o){var r,a,l,u,p,c,h,d,f=n,_=n.model;t:do{var m;for(h=wt.ALL,m=_.stages.values.iterator();m.hasNext();){var $=m.next();if(0!=($.stage.mask&h.mask)){var y,v,g=$.nodes;e:do{var b;for(b=g.iterator();b.hasNext();){var x=b.next();if(kt(x.name,"uDirToSun")&&e.isType(x,Wt)){v=x;break e}}v=null}while(0);var w=null==(y=v)||e.isType(y,Wt)?y:Q();if(null!=w){d=w;break t}}}d=null}while(0);f.uDirToSun=null!=(r=d)?r.uniform:null;var z,k,S=n.model;t:do{var C;for(z=wt.ALL,C=S.stages.values.iterator();C.hasNext();){var N=C.next();if(0!=(N.stage.mask&z.mask)){var E,T=N.nodes,P=M();for(E=T.iterator();E.hasNext();){var O=E.next();e.isType(O,ro)&&P.add_11rb$(O)}var j=zt(P);if(null!=j){k=j;break t}}}k=null}while(0);if(null!=(a=k)){var A=n;A.uNormalShift=a.uNormalShift,A.uWaterColor=a.uWaterColor}var I,R,L=n,D=n.model;t:do{var q;for(I=wt.ALL,q=D.stages.values.iterator();q.hasNext();){var F=q.next();if(0!=(F.stage.mask&I.mask)){var B,U,V=F.nodes;e:do{var G;for(G=V.iterator();G.hasNext();){var H=G.next();if(kt(H.name,"tOceanNrm1")&&e.isType(H,at)){U=H;break e}}U=null}while(0);var W=null==(B=U)||e.isType(B,at)?B:Q();if(null!=W){R=W;break t}}}R=null}while(0);L.tOcean_0=null!=(l=R)?l.sampler:null,null!=(u=n.tOcean_0)&&(u.texture=n.oceanNrmTex);var K,X,Y=n,Z=n.model;t:do{var J;for(K=wt.ALL,J=Z.stages.values.iterator();J.hasNext();){var tt=J.next();if(0!=(tt.stage.mask&K.mask)){var et,it,nt=tt.nodes;e:do{var ot;for(ot=nt.iterator();ot.hasNext();){var rt=ot.next();if(kt(rt.name,"tHeightMap")&&e.isType(rt,at)){it=rt;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,at)?et:Q();if(null!=st){X=st;break t}}}X=null}while(0);return Y.tHeightMap_0=null!=(p=X)?p.sampler:null,null!=(c=n.tHeightMap_0)&&(c.texture=n.heightMap),s}))}function Jn(){Qn=this,this.texEarthDay="Earth by Day",this.texEarthNight="Earth by Night",this.texEarthNrm="Earth Normal Map",this.texEarthHeight="Earth Height Map",this.texOceanNrm="Ocean Normal Map",this.texLightGradient="Light Gradient"}Un.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inScreenPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Vn(this))},Un.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec4 "+this.name+"_near = "+this.uInvViewProjMat_0+" * vec4("+this.inScreenPos.ref2f_61zpoe$()+" * 2.0 - 1.0, 0.0, 1.0);\n                vec4 "+this.name+"_far = "+this.uInvViewProjMat_0+" * vec4("+this.inScreenPos.ref2f_61zpoe$()+" * 2.0 - 1.0, 1.0, 1.0);\n                "+this.outViewDir.declare()+" = ("+this.name+"_far.xyz / "+this.name+"_far.w) - ("+this.name+"_near.xyz / "+this.name+"_near.w);\n            ")},Un.$metadata$={kind:P,simpleName:"XyToViewDirNode",interfaces:[N]},Gn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Hn(this))},Gn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outWorldPos.declare()+" = "+this.uInvViewMat_0+" * vec4("+this.inViewPos.ref3f_61zpoe$()+", 1.0);")},Gn.$metadata$={kind:P,simpleName:"ViewToWorldPosNode",interfaces:[N]},Wn.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("raySphereIntersection","\n                bool raySphereIntersection(vec3 rayOrigin, vec3 rayDir, vec3 center, float radius, out float d1, out float d2) {\n                    vec3 centerToOri = rayOrigin - center;\n                    float a = dot(rayDir, rayDir);\n                    float b = 2.0 * dot(rayDir, centerToOri);\n                    float c = dot(centerToOri, centerToOri) - radius * radius;\n                    \n                    float discriminant = b * b - 4.0 * a * c;\n                    if (discriminant < 0.0) {\n                        return false;\n                    } else {\n                        float q = -0.5 * (b + sign(b) * sqrt(discriminant));\n                        float t1 = q / a;\n                        float t2 = c / q;\n                        d1 = min(t1, t2);\n                        d2 = max(t1, t2);\n                        return d2 > 0.0;\n                    }\n                }\n            "),t.appendFunction_puj7f4$("rayPointDistance","\n                vec4 rayPointDistance(vec3 rayOrigin, vec3 rayDir, vec3 point) {\n                    vec3 w = point - rayOrigin;\n                    float c1 = dot(w, rayDir);\n                    float c2 = dot(rayDir, rayDir);\n                    vec3 pn = rayOrigin + rayDir * (c1 / c2);\n                    float dist = length(pn - point) * sign(c1);\n                    return vec4(pn, dist);\n                }\n            ")},Wn.$metadata$={kind:P,simpleName:"RaySphereIntersectionNode",interfaces:[N]},Kn.prototype.setup_llmhyc$=function(t){var e;N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inSceneColor,this.inSceneDepth,this.inScenePos,this.inSkyColor,this.inViewDepth,this.inCamPos,this.inLookDir]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uDirToSun}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uPlanetCenter}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uRayleighColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uMieColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uScatteringCoeffs}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSunColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSurfaceRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uAtmosphereRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uMieG}}(e)),s}))},Kn.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("phaseFunRayleigh","\n                vec3 phaseFunRayleigh(float cosTheta) {\n                    vec3 phase = vec3(1.0 + clamp(cosTheta, 0.0, 1.0));\n                    return phase * "+this.uRayleighColor+".rgb * "+this.uRayleighColor+".a;\n                }\n            "),t.appendFunction_puj7f4$("phaseFunMie","\n                vec3 phaseFunMie(float cosTheta, float g) {\n                    float g2 = g * g;\n                    float f1 = (3.0 * (1.0 - g2)) / (2.0 * (2.0 + g2));\n                    float f2 = (1.0 + cosTheta * cosTheta) / pow(1.0 + g2 - 2.0 * g * cosTheta, 1.5);\n                    return vec3(f1 * f2) * "+this.uMieColor+".rgb * "+this.uMieColor+".a;\n                }\n            "),t.appendFunction_puj7f4$("opticalDepthLut","\n                vec2 opticalDepthLut(float altitude, float cosTheta) {\n                    return "+t.sampleTexture2d_buzeal$(this.opticalDepthLut.name,"vec2(cosTheta * 0.5 + 0.5, altitude)")+".xy;\n                }\n            "),t.appendFunction_puj7f4$("opticalDepthLenLut","\n                float opticalDepthLenLut(vec3 origin, vec3 dir, float len) {\n                    float atmosphereThickness = "+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+";\n                    \n                    vec3 p1 = origin;\n                    vec3 p2 = origin + dir * len;\n                    float altitude1 = (length(p1) - "+this.uSurfaceRadius+") / atmosphereThickness;\n                    float altitude2 = (length(p2) - "+this.uSurfaceRadius+") / atmosphereThickness;\n                    \n                    if (altitude1 > altitude2) {\n                        // swap points and directionif ray is pointing downwards\n                        p1 = p2;\n                        p2 = origin;\n                        \n                        float swapAlt = altitude1;\n                        altitude1 = altitude2;\n                        altitude2 = swapAlt;\n                        \n                        dir = -dir;\n                    }\n                    \n                    float depth1 = opticalDepthLut(altitude1, dot(dir, normalize(p1))).x;\n                    float depth2 = opticalDepthLut(altitude2, dot(dir, normalize(p2))).x;\n                    return depth1 - depth2;\n                }\n            "),t.appendFunction_puj7f4$("scatterLight","\n                vec3 scatterLight(vec3 origin, vec3 dir, float rayLength, vec3 dirToSun) {\n                    float atmosphereThickness = "+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+";\n                    float stepSize = rayLength / float(11);\n                    vec3 inScatterPt = origin;\n                    vec3 inScatteredLight = vec3(0.0);\n                    \n                    for (int i = 0; i < 10; i++) {\n                        inScatterPt += dir * stepSize;\n                        \n                        float dPlanetIn, dPlanetOut;\n                        bool planetHit = raySphereIntersection(inScatterPt, dirToSun, vec3(0.0), "+this.uSurfaceRadius+", dPlanetIn, dPlanetOut);\n                        float dThroughPlanet = (dPlanetOut - dPlanetIn) * float(planetHit);\n                        float planetLenThresh = "+this.uSurfaceRadius+" / 3.0;\n                        \n                        if (dThroughPlanet < planetLenThresh) {\n                            vec3 verticalDir = normalize(inScatterPt);\n                            float cosTheta = dot(dirToSun, verticalDir);\n                            float altitude = (length(inScatterPt) - "+this.uSurfaceRadius+") / atmosphereThickness;\n    \n                            float viewRayOpticalDepth = opticalDepthLenLut(origin, dir, stepSize * float(i));\n                            vec2 opticalDepthToSun = opticalDepthLut(altitude, cosTheta);\n                            float sunRayOpticalDepth = opticalDepthToSun.x;\n                            float localDensity = opticalDepthToSun.y;\n                            vec3 transmittance = exp(-(sunRayOpticalDepth + viewRayOpticalDepth) * "+this.uScatteringCoeffs+");\n    \n                            float planetBlend = 1.0 - dThroughPlanet / planetLenThresh;\n                            inScatteredLight += localDensity * transmittance * "+this.uScatteringCoeffs+" * stepSize * planetBlend;\n                        }\n                    }\n                    \n                    float sunAngle = dot(dir, dirToSun);\n                    vec3 rayleigh = phaseFunRayleigh(sunAngle);\n                    vec3 mie = phaseFunMie(sunAngle, "+this.uMieG+");\n                    return (rayleigh + mie) * inScatteredLight * "+this.uSunColor+".rgb * "+this.uSunColor+".a;\n                }\n            "),t.appendMain_61zpoe$("\n                float dAtmoIn, dAtmoOut;\n                vec3 camOri = "+this.inCamPos.ref3f_61zpoe$()+" - "+this.uPlanetCenter+";\n                vec3 nrmLookDir = normalize("+this.inLookDir.ref3f_61zpoe$()+");\n                bool hitAtmo = raySphereIntersection(camOri, nrmLookDir, vec3(0.0), "+this.uAtmosphereRadius+", dAtmoIn, dAtmoOut);\n                \n                "+this.outColor.declare()+" = "+this.inSceneColor+";\n                if ("+this.inSceneDepth+" > 0.0) {\n                    "+this.outColor+" = "+this.inSkyColor+";\n                }\n                if (hitAtmo) {\n                    // dAtmoIn is negative if camera is inside atmosphere\n                    float dToAtmo = max(0.0, dAtmoIn);\n                    float dThroughAtmo = dAtmoOut - dToAtmo;\n                    if ("+this.inViewDepth.ref1f_61zpoe$()+" < 0.0) {\n                        float sceneDepth = length("+this.inCamPos.ref3f_61zpoe$()+" - "+this.inScenePos.ref3f_61zpoe$()+");\n                        dThroughAtmo = min(dThroughAtmo, sceneDepth - dToAtmo);\n                    }\n\n                    // scattering\n                    vec3 atmoHitPt = camOri + nrmLookDir * dToAtmo;\n                    vec3 light = scatterLight(atmoHitPt, nrmLookDir, dThroughAtmo, "+this.uDirToSun+");\n                    "+this.outColor+".rgb += light;\n                }\n            ")},Kn.$metadata$={kind:P,simpleName:"AtmosphereNode",interfaces:[N]},Dn.$metadata$={kind:P,simpleName:"AtmosphericScatteringShader",interfaces:[At]},Yn.prototype.handleDrag_urvnay$=function(t,e,i){if(!t.isEmpty()){var n=t.get_za3lpa$(0);if(!n.isConsumed_za3lpa$()&&n.isInViewport_hrtwbc$(e.mainRenderPass.viewport,i)){var o=this.zoom,r=j.min(o,10);if(n.isLeftButtonDown)this.planetRotX=-n.deltaY/15*j.pow(r,.6),this.planetRotY=-n.deltaX/15*j.pow(r,.6);else if(n.isRightButtonDown)this.lookRotX-=n.deltaY/10,this.lookRotY-=n.deltaX/10;else if(n.isMiddleButtonDown){var s,a=this.camRotX-n.deltaY/10;s=a<0?0:a>180?180:a,this.camRotX=s,this.lookRotY-=n.deltaX/10}var l,u=this.zoom*(1-n.deltaScroll/10),p=this.minZoom,c=this.maxZoom;l=u<p?p:u>c?c:u,this.zoom=l,n.consume_za3lpa$()}}},Yn.$metadata$={kind:P,simpleName:"EarthCamTransform",interfaces:[qt,Z]},Object.defineProperty(Zn.prototype,"heightMap",{configurable:!0,get:function(){return this.heightMap_etfhgu$_0},set:function(t){var e;this.heightMap_etfhgu$_0=t,null!=(e=this.tHeightMap_0)&&(e.texture=t)}}),Object.defineProperty(Zn.prototype,"oceanNrmTex",{configurable:!0,get:function(){return this.oceanNrmTex_42rp2f$_0},set:function(t){var e;this.oceanNrmTex_42rp2f$_0=t,null!=(e=this.tOcean_0)&&(e.texture=t)}}),Jn.prototype.shaderConfig_wmdeeb$=function(t){var e=new Ft;return e.useAlbedoMap_daqygw$(t.get_11rb$(this.texEarthDay)),e.useEmissiveMap_daqygw$(t.get_11rb$(this.texEarthNight)),e.useNormalMap_9wkq18$(t.get_11rb$(this.texEarthNrm)),e.isInstanced=!0,e},Jn.prototype.model_2ufela$=function(t){var i,n,o,r,s,a,l=Bt.Companion.defaultMrtPbrModel_2ufela$(t),u={v:null},p={v:null},c={v:null},h=new F(l);t:do{var f;for(s=wt.ALL,f=l.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&s.mask)){var m,$=_.nodes,y=M();for(m=$.iterator();m.hasNext();){var v=m.next();e.isType(v,Ut)&&y.add_11rb$(v)}var g=zt(y);if(null!=g){a=g;break t}}}a=null}while(0);var b,x,w=d(a),z=h.multiplyNode_ze33is$(w.outViewMat,w.outModelMat).output;t:do{var k;for(b=wt.ALL,k=l.stages.values.iterator();k.hasNext();){var S=k.next();if(0!=(S.stage.mask&b.mask)){var C,N,E=S.nodes;e:do{var T;for(T=E.iterator();T.hasNext();){var P=T.next();if(kt(P.name,"modelViewMat")&&e.isType(P,Vt)){N=P;break e}}N=null}while(0);var O=null==(C=N)||e.isType(C,Vt)?C:Q();if(null!=O){x=O;break t}}}x=null}while(0);var j=d(x).output,A=h.pushConstantNode3f_61zpoe$("uDirToSun").output,I=h.vec3TransformNode_vid4wo$(A,z,0).outVec3;u.v=h.stageInterfaceNode_iikjwn$("ifSunDirViewSpace",I);var R=h.instanceAttrModelMat().output,L=h.addNode_u9w9by$(new no(h.stage));L.inModelMat=R,L.inTileName=h.instanceAttributeNode_nm2vx5$(Lo().ATTRIB_TILE_NAME).output,L.inXyPos=h.attrTexCoords().output;var D=L,q=h.textureNode_61zpoe$("tHeightMap"),U=h.addNode_u9w9by$(new io(q,h.stage));U.inTileName=h.instanceAttributeNode_nm2vx5$(Lo().ATTRIB_TILE_NAME).output,U.inEdgeFlag=h.attributeNode_nm2vx5$(Lo().ATTRIB_EDGE_FLAG).output,U.inEdgeMask=h.instanceAttributeNode_nm2vx5$(Lo().ATTRIB_EDGE_MASK).output,U.inRawTexCoord=h.attrTexCoords().output,U.inModelMat=R,U.inPosition=D.outPos,U.inNormal=D.outNrm,U.inTangent=D.outTan,U.inTexCoord=D.outTex,U.inStrength=h.constFloat_mx4ult$(.005),U.inNrmStrength=h.constFloat_mx4ult$(3);var V,G,H,W,K,X,Y,Z,J=U;t:do{var tt;for(V=wt.ALL,tt=l.stages.values.iterator();tt.hasNext();){var et=tt.next();if(0!=(et.stage.mask&V.mask)){var it,nt,ot=et.nodes;e:do{var rt;for(rt=ot.iterator();rt.hasNext();){var st=rt.next();if(kt(st.name,"texCoordInput")&&e.isType(st,Vt)){nt=st;break e}}nt=null}while(0);var at=null==(it=nt)||e.isType(it,Vt)?it:Q();if(null!=at){G=at;break t}}}G=null}while(0);null!=(i=G)&&(i.input=D.outTex);t:do{var lt;for(H=wt.ALL,lt=l.stages.values.iterator();lt.hasNext();){var ut=lt.next();if(0!=(ut.stage.mask&H.mask)){var pt,ct,ht=ut.nodes;e:do{var dt;for(dt=ht.iterator();dt.hasNext();){var ft=dt.next();if(kt(ft.name,"localTangentInput")&&e.isType(ft,Vt)){ct=ft;break e}}ct=null}while(0);var _t=null==(pt=ct)||e.isType(pt,Vt)?pt:Q();if(null!=_t){W=_t;break t}}}W=null}while(0);null!=(n=W)&&(n.input=D.outTan);t:do{var mt;for(K=wt.ALL,mt=l.stages.values.iterator();mt.hasNext();){var $t=mt.next();if(0!=($t.stage.mask&K.mask)){var yt,vt,gt=$t.nodes;e:do{var bt;for(bt=gt.iterator();bt.hasNext();){var xt=bt.next();if(kt(xt.name,"localPosDisplaced")&&e.isType(xt,Vt)){vt=xt;break e}}vt=null}while(0);var St=null==(yt=vt)||e.isType(yt,Vt)?yt:Q();if(null!=St){X=St;break t}}}X=null}while(0);null!=(o=X)&&(o.input=J.outPosition);t:do{var Ct;for(Y=wt.ALL,Ct=l.stages.values.iterator();Ct.hasNext();){var Nt=Ct.next();if(0!=(Nt.stage.mask&Y.mask)){var Et,Tt,Pt=Nt.nodes;e:do{var Ot;for(Ot=Pt.iterator();Ot.hasNext();){var Mt=Ot.next();if(kt(Mt.name,"localNormalInput")&&e.isType(Mt,Vt)){Tt=Mt;break e}}Tt=null}while(0);var jt=null==(Et=Tt)||e.isType(Et,Vt)?Et:Q();if(null!=jt){Z=jt;break t}}}Z=null}while(0);null!=(r=Z)&&(r.input=J.outNormal),c.v=h.stageInterfaceNode_iikjwn$("ifNormalLocalNoBump",D.outNrm),p.v=h.stageInterfaceNode_iikjwn$("ifNormalNoBumpViewSpace",h.vec3TransformNode_vid4wo$(D.outNrm,j,0).outVec3);var At,It,Rt=new B(l);t:do{var Lt;for(At=wt.ALL,Lt=l.stages.values.iterator();Lt.hasNext();){var Dt=Lt.next();if(0!=(Dt.stage.mask&At.mask)){var qt,Ft=Dt.nodes,Wt=M();for(qt=Ft.iterator();qt.hasNext();){var Kt=qt.next();e.isType(Kt,Gt)&&Wt.add_11rb$(Kt)}var Xt=zt(Wt);if(null!=Xt){It=Xt;break t}}}It=null}while(0);var Yt,Zt,Jt=d(It);t:do{var Qt;for(Yt=wt.ALL,Qt=l.stages.values.iterator();Qt.hasNext();){var te=Qt.next();if(0!=(te.stage.mask&Yt.mask)){var ee,ie,ne=te.nodes;e:do{var oe;for(oe=ne.iterator();oe.hasNext();){var re=oe.next();if(kt(re.name,"ifTangents")&&e.isType(re,Ht)){ie=re;break e}}ie=null}while(0);var se=null==(ee=ie)||e.isType(ee,Ht)?ee:Q();if(null!=se){Zt=se;break t}}}Zt=null}while(0);var ae=d(Zt),le=Jt.inAlbedo,ue=Rt.addNode_u9w9by$(new oo(le,Rt.stage));Jt.inRoughness=ue.outRoughness;var pe=Rt.addNode_u9w9by$(new ro(Rt.stage));pe.inOceanTex1=Rt.textureNode_61zpoe$("tOceanNrm1"),pe.inAlbedo=le,pe.inIsOcean=ue.outIsOcean,pe.inNormal=c.v.output,pe.inBumpNormal=Jt.inViewNormal,pe.inTangent=ae.output,Jt.inViewNormal=pe.outBumpNormal;var ce=pe,he=Rt.addNode_u9w9by$(new eo(Rt.stage));return he.inNormal=Rt.normalizeNode_r20yfm$(p.v.output).output,he.inSunDir=Rt.normalizeNode_r20yfm$(u.v.output).output,he.inAlbedo=ce.outColor,he.inEmissive=Jt.inEmissive,Jt.inAlbedo=he.outAlbedo,Jt.inEmissive=he.outEmissive,l},Jn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Qn=null;function to(){return null===Qn&&new Jn,Qn}function eo(t){N.call(this,"earthDayNightMix",t),this.inNormal_8wrcbj$_0=this.inNormal_8wrcbj$_0,this.inSunDir_3sjfkp$_0=this.inSunDir_3sjfkp$_0,this.inAlbedo_bpcifj$_0=this.inAlbedo_bpcifj$_0,this.inEmissive_rf58nj$_0=this.inEmissive_rf58nj$_0,this.outAlbedo=new T(new E(this.name+"_outAlbedo"),this),this.outEmissive=new T(new E(this.name+"_outEmissive"),this)}function io(t,e){N.call(this,"heightMap",e),this.heightMap=t,this.inEdgeFlag=new T(new Xt(0)),this.inEdgeMask=new T(new Pt(0)),this.inSampleStep=new T(new Pt(1/40)),this.inTileName=new T(new Tt(Yt.Companion.ZERO)),this.inRawTexCoord=new T(new Nt(Ct.Companion.NEG_X_AXIS)),this.inModelMat=new T(new Zt("_")),this.inTexCoord=new T(new Nt(Ct.Companion.NEG_X_AXIS)),this.inNormal=new T(new Et($.Companion.Y_AXIS)),this.inTangent=new T(new Et($.Companion.X_AXIS)),this.inPosition=new T(new Et($.Companion.ZERO)),this.inStrength=new T(new Pt(.01)),this.inNrmStrength=new T(new Pt(5)),this.outPosition=new T(new lt(this.name+"_outPos"),this),this.outNormal=new T(new lt(this.name+"_outNrm"),this)}function no(t){N.call(this,"spherePos",t),this.inModelMat_w1xlm7$_0=this.inModelMat_w1xlm7$_0,this.inTileName_k27s37$_0=this.inTileName_k27s37$_0,this.inXyPos_4u55yz$_0=this.inXyPos_4u55yz$_0,this.outPos=new T(new lt("outSpherePos"),this),this.outNrm=new T(new lt("outSphereNrm"),this),this.outTan=new T(new E("outSphereTangent"),this),this.outTex=new T(new Jt("outSphereTexCoord"),this);var e=new St("uUnprojMat");e.value.setPerspective_7b5o5w$(90,1,1,10).invert_mx4ult$(),this.uUnprojMat=e}function oo(t,e){N.call(this,"earthRoughness",e),this.inAlbedo=t,this.outRoughness=new T(new Qt("earth_outRoughness"),this),this.outIsOcean=new T(new te("earth_outIsOcean"),this)}function ro(t){N.call(this,"earthOcean",t),this.inOceanTex1_im4351$_0=this.inOceanTex1_im4351$_0,this.inAlbedo_by8fn6$_0=this.inAlbedo_by8fn6$_0,this.inIsOcean_ouocah$_0=this.inIsOcean_ouocah$_0,this.inNormal_wkcae8$_0=this.inNormal_wkcae8$_0,this.inBumpNormal_23nj62$_0=this.inBumpNormal_23nj62$_0,this.inTangent_lew4co$_0=this.inTangent_lew4co$_0,this.outColor=new T(new E("ocean_outColor"),this),this.outBumpNormal=new T(new lt("ocean_outBump"),this),this.uNormalShift=new ee("uNormalShift"),this.uWaterColor=new jt("uWaterColor")}function so(){uo();var t,i=new Z,n=new ae;n.name="OpticalDepthLutPass",n.setSize_vux9f0$(512,512),n.addColorTexture_farcsl$(G.RG_F16),n.clearDepthTexture(),ie.call(this,i,new le(n)),this.lutNode_0=null,this.atmosphereRadius_32tfnj$_0=65,this.surfaceRadius_t0cr9a$_0=60,this.densityFalloff_isgemf$_0=9,this.clearColor=null;var o=new ne;o.projCorrectionMode=oe.OFFSCREEN,o.isKeepAspectRatio=!1,o.left=0,o.right=1,o.top=1,o.bottom=0,this.camera=o;var r=e.isType(t=this.drawNode,Z)?t:Q(),a=new pe(new ue(se([re.Companion.POSITIONS,re.Companion.TEXTURE_COORDS])),null);a.generate_v2sixm$(co);var l=new C("Optical Depth LUT"),u={v:null},p=new F(l);u.v=p.stageInterfaceNode_iikjwn$("ifTexCoords",p.attrTexCoords().output),p.positionOutput=p.simpleVertexPositionNode().outVec4;var c=new B(l),h=c.addNode_u9w9by$(new po(c.stage));h.inTexCoords=u.v.output;var d=h;c.colorOutput_a3v4si$(d.outColor);var f,_,m=l,$=new At(m);$.onPipelineCreated.add_11rb$((f=m,_=this,function(t,i,n){var o,r,a,l=_,u=f;t:do{var p;for(r=wt.ALL,p=u.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&r.mask)){var h,d=c.nodes,m=M();for(h=d.iterator();h.hasNext();){var $=h.next();e.isType($,po)&&m.add_11rb$($)}var y=zt(m);if(null!=y){a=y;break t}}}a=null}while(0);if(l.lutNode_0=a,null!=(o=_.lutNode_0)){var v=_;o.uAtmosphereRadius.value=v.atmosphereRadius,o.uSurfaceRadius.value=v.surfaceRadius,o.uDensityFalloff.value=v.densityFalloff}return s})),a.shader=$,r.unaryPlus_uv0sim$(a),this.onAfterDraw.add_11rb$(function(t){return function(e){return t.isEnabled=!1,s}}(this))}function ao(){lo=this,this.LUT_SIZE_X=512,this.LUT_SIZE_Y=512}Object.defineProperty(eo.prototype,"inNormal",{configurable:!0,get:function(){return null==this.inNormal_8wrcbj$_0?r("inNormal"):this.inNormal_8wrcbj$_0},set:function(t){this.inNormal_8wrcbj$_0=t}}),Object.defineProperty(eo.prototype,"inSunDir",{configurable:!0,get:function(){return null==this.inSunDir_3sjfkp$_0?r("inSunDir"):this.inSunDir_3sjfkp$_0},set:function(t){this.inSunDir_3sjfkp$_0=t}}),Object.defineProperty(eo.prototype,"inAlbedo",{configurable:!0,get:function(){return null==this.inAlbedo_bpcifj$_0?r("inAlbedo"):this.inAlbedo_bpcifj$_0},set:function(t){this.inAlbedo_bpcifj$_0=t}}),Object.defineProperty(eo.prototype,"inEmissive",{configurable:!0,get:function(){return null==this.inEmissive_rf58nj$_0?r("inEmissive"):this.inEmissive_rf58nj$_0},set:function(t){this.inEmissive_rf58nj$_0=t}}),eo.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inNormal,this.inSunDir,this.inAlbedo,this.inEmissive])},eo.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float "+this.name+"_mix = (clamp(dot("+this.inNormal+", "+this.inSunDir+"), -0.05, 0.05) + 0.05) * 10.0;\n            "+this.outAlbedo.declare()+" = "+this.inAlbedo+" * "+this.name+"_mix;\n            "+this.outEmissive.declare()+" = "+this.inEmissive+" * (1.0 - "+this.name+"_mix) * 0.6;\n        ")},eo.$metadata$={kind:P,simpleName:"EarthDayNightMixNode",interfaces:[N]},Zn.$metadata$={kind:P,simpleName:"EarthShader",interfaces:[Bt]},io.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inEdgeFlag,this.inEdgeMask,this.inSampleStep,this.inTileName,this.inRawTexCoord,this.inModelMat]),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inTangent,this.inPosition,this.inStrength])},io.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("calcBumpedNormal","\n            vec3 calcBumpedNormal(vec3 n, vec4 t, vec3 bumpN, float strength) {\n                vec3 normal = normalize(n);\n                vec3 tangent = normalize(t.xyz);\n                tangent = normalize(tangent - dot(tangent, normal) * normal);\n                vec3 bitangent = cross(normal, tangent) * t.w;\n                mat3 tbn = mat3(tangent, bitangent, normal);\n                return normalize(mix(normal, tbn * bumpN, strength));\n            }\n        "),t.appendFunction_puj7f4$("sampleEdgeHeight","\n            float sampleEdgeHeight(mat4 modelMat, vec3 tileName, vec2 baseUv, vec2 sampleDir) {\n                vec3 p1 = uv2localPos(tileName, baseUv - sampleDir);\n                vec3 p2 = uv2localPos(tileName, baseUv + sampleDir);\n\n                vec4 worldPos1 = modelMat * vec4(p1, 1.0);\n                vec4 worldPos2 = modelMat * vec4(p2, 1.0);\n\n                vec2 worldUv1 = vec2(atan(worldPos1.x, worldPos1.z) / "+Kt.PI+" * 0.5 + 0.5, acos(worldPos1.y) / "+Kt.PI+");\n                vec2 worldUv2 = vec2(atan(worldPos2.x, worldPos2.z) / "+Kt.PI+" * 0.5 + 0.5, acos(worldPos2.y) / "+Kt.PI+");\n\n                float h1 = "+t.sampleTexture2d_buzeal$(this.heightMap.name,"worldUv1")+".x;\n                float h2 = "+t.sampleTexture2d_buzeal$(this.heightMap.name,"worldUv2")+".x;\n                return (h1 + h2) * 0.5;\n            }\n        "),t.appendMain_61zpoe$("\n            vec2 "+this.name+"_uv = "+this.inTexCoord.ref2f_61zpoe$()+";\n            float "+this.name+"_hCt = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv")+".x;\n            float "+this.name+"_hLt = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv - vec2(1.0 / 8192.0, 0.0)")+".x;\n            float "+this.name+"_hRt = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv + vec2(1.0 / 8192.0, 0.0)")+".x;\n            float "+this.name+"_hUp = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv - vec2(0.0, 1.0 / 8192.0)")+".x;\n            float "+this.name+"_hDn = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv + vec2(0.0, 1.0 / 8192.0)")+".x;\n            \n            float "+this.name+"_dx = ("+this.name+"_hCt - "+this.name+"_hRt) + ("+this.name+"_hLt - "+this.name+"_hCt);\n            float "+this.name+"_dy = ("+this.name+"_hUp - "+this.name+"_hCt) + ("+this.name+"_hCt - "+this.name+"_hDn);\n            \n            vec3 "+this.name+"_bumpNrm = normalize(vec3("+this.name+"_dx * "+this.inNrmStrength.ref1f_61zpoe$()+", "+this.name+"_dy * "+this.inNrmStrength.ref1f_61zpoe$()+", 1.0));\n            vec3 "+this.name+"_bumpTan = "+this.inTangent.ref3f_61zpoe$()+";\n            vec3 "+this.name+"_localNrm = calcBumpedNormal("+this.inNormal.ref3f_61zpoe$()+", vec4("+this.name+"_bumpTan, 1.0), "+this.name+"_bumpNrm, 1.0);\n            "+this.outNormal.declare()+" = "+this.name+"_localNrm;\n            \n            float "+this.name+"_disp = 0.0;\n            int "+this.name+"_edge = "+this.inEdgeFlag.ref1i_61zpoe$()+" & int("+this.inEdgeMask.ref1f_61zpoe$()+");\n            if ("+this.name+"_edge == 0) {\n                "+this.name+"_disp = "+this.name+"_hCt * "+this.inStrength.ref1f_61zpoe$()+";\n            } else if ("+this.name+"_edge >= 4) {\n                // upper / lower edge\n                "+this.name+"_disp = sampleEdgeHeight("+this.inModelMat+", "+this.inTileName.ref3f_61zpoe$()+", "+this.inRawTexCoord.ref2f_61zpoe$()+", vec2("+this.inSampleStep.ref1f_61zpoe$()+", 0.0)) * "+this.inStrength.ref1f_61zpoe$()+";\n            } else if ("+this.name+"_edge >= 1) {\n                // left / right edge\n                "+this.name+"_disp = sampleEdgeHeight("+this.inModelMat+", "+this.inTileName.ref3f_61zpoe$()+", "+this.inRawTexCoord.ref2f_61zpoe$()+", vec2(0.0, "+this.inSampleStep.ref1f_61zpoe$()+")) * "+this.inStrength.ref1f_61zpoe$()+";\n            }\n            \n            "+this.outPosition.declare()+" = "+this.inPosition.ref3f_61zpoe$()+" * (1.0 + "+this.name+"_disp);\n        ")},io.$metadata$={kind:P,simpleName:"HeightMapNode",interfaces:[N]},Object.defineProperty(no.prototype,"inModelMat",{configurable:!0,get:function(){return null==this.inModelMat_w1xlm7$_0?r("inModelMat"):this.inModelMat_w1xlm7$_0},set:function(t){this.inModelMat_w1xlm7$_0=t}}),Object.defineProperty(no.prototype,"inTileName",{configurable:!0,get:function(){return null==this.inTileName_k27s37$_0?r("inTileName"):this.inTileName_k27s37$_0},set:function(t){this.inTileName_k27s37$_0=t}}),Object.defineProperty(no.prototype,"inXyPos",{configurable:!0,get:function(){return null==this.inXyPos_4u55yz$_0?r("inXyPos"):this.inXyPos_4u55yz$_0},set:function(t){this.inXyPos_4u55yz$_0=t}}),no.prototype.setup_llmhyc$=function(t){var e;N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inModelMat,this.inTileName,this.inXyPos]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uUnprojMat}}(e)),s}))},no.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("uv2localPos","\n            vec3 uv2localPos(vec3 tileName, vec2 uv) {\n                float tileScale = 1.0 / tileName.z;\n                vec2 tilePos = tileName.xy;\n                tilePos.x = tileName.z - 1.0 - tilePos.x;\n                vec2 projCoord = tilePos * tileScale + uv * tileScale;\n                projCoord = projCoord * 2.0 - 1.0;\n\n                vec4 unproj = uUnprojMat * vec4(projCoord, 1.0, 1.0);\n                return normalize(unproj.xyz / unproj.w * -1.0);\n            }\n        "),t.appendMain_61zpoe$("\n            vec2 "+this.name+"_uv = "+this.inXyPos.ref2f_61zpoe$()+";\n            "+this.name+"_uv.x = (1.0 - "+this.inTileName+".w) + "+this.name+"_uv.x * "+this.inTileName+".w;\n            \n            "+this.outNrm.declare()+" = uv2localPos("+this.inTileName.ref3f_61zpoe$()+", "+this.name+"_uv);\n            "+this.outPos.declare()+" = "+this.outNrm+" * 60.0;\n            \n            vec3 "+this.name+"_worldNrm = ("+this.inModelMat+" * vec4("+this.outNrm+", 0.0)).xyz;\n            vec3 "+this.name+"_worldTan = normalize(cross(vec3(0.0, 1.0, 0.0), "+this.name+"_worldNrm));\n            "+this.outTan.declare()+" = vec4(transpose(mat3("+this.inModelMat+")) * "+this.name+"_worldTan, 1.0);\n            "+this.outTex.declare()+" = vec2(atan("+this.name+"_worldNrm.x, "+this.name+"_worldNrm.z) / "+Kt.PI+" * 0.5 + 0.5, acos("+this.name+"_worldNrm.y) / "+Kt.PI+");\n        ")},no.$metadata$={kind:P,simpleName:"SpherePosNode",interfaces:[N]},oo.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inAlbedo)},oo.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float "+this.name+"_relBlue = min("+this.inAlbedo+".b - "+this.inAlbedo+".r, "+this.inAlbedo+".b - "+this.inAlbedo+".g) / "+this.inAlbedo+".b;\n            float "+this.name+"_brightness = dot("+this.inAlbedo+".rgb, vec3(0.333));\n            \n            "+this.outRoughness.declare()+" = 1.0 - (0.3 + "+this.name+"_brightness * 0.4);\n            bool "+this.outIsOcean+" = "+this.name+"_relBlue > 0.2 || "+this.name+"_brightness < 0.002;\n            if ("+this.outIsOcean+") {\n                "+this.outRoughness+" = 0.22;\n            }\n        ")},oo.$metadata$={kind:P,simpleName:"EarthRoughnessNode",interfaces:[N]},Object.defineProperty(ro.prototype,"inOceanTex1",{configurable:!0,get:function(){return null==this.inOceanTex1_im4351$_0?r("inOceanTex1"):this.inOceanTex1_im4351$_0},set:function(t){this.inOceanTex1_im4351$_0=t}}),Object.defineProperty(ro.prototype,"inAlbedo",{configurable:!0,get:function(){return null==this.inAlbedo_by8fn6$_0?r("inAlbedo"):this.inAlbedo_by8fn6$_0},set:function(t){this.inAlbedo_by8fn6$_0=t}}),Object.defineProperty(ro.prototype,"inIsOcean",{configurable:!0,get:function(){return null==this.inIsOcean_ouocah$_0?r("inIsOcean"):this.inIsOcean_ouocah$_0},set:function(t){this.inIsOcean_ouocah$_0=t}}),Object.defineProperty(ro.prototype,"inNormal",{configurable:!0,get:function(){return null==this.inNormal_wkcae8$_0?r("inNormal"):this.inNormal_wkcae8$_0},set:function(t){this.inNormal_wkcae8$_0=t}}),Object.defineProperty(ro.prototype,"inBumpNormal",{configurable:!0,get:function(){return null==this.inBumpNormal_23nj62$_0?r("inBumpNormal"):this.inBumpNormal_23nj62$_0},set:function(t){this.inBumpNormal_23nj62$_0=t}}),Object.defineProperty(ro.prototype,"inTangent",{configurable:!0,get:function(){return null==this.inTangent_lew4co$_0?r("inTangent"):this.inTangent_lew4co$_0},set:function(t){this.inTangent_lew4co$_0=t}}),ro.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inIsOcean,this.inNormal,this.inBumpNormal,this.inTangent]);var e,i=t.pushConstants;i.unaryPlus_wq3w46$((e=this,function(){return e.uNormalShift})),i.unaryPlus_wq3w46$(function(t){return function(){return t.uWaterColor}}(this))},ro.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("cubeUv","\n                vec2 cubeUv(vec3 normal) {\n                    vec3 absN = abs(normal);\n                    float maxAxis = 1.0;\n                    vec2 uvc = vec2(1.0, 1.0);\n                    \n                    if (absN.x > absN.y && absN.x > absN.z) {\n                        maxAxis = absN.x;\n                        uvc = vec2(-normal.z * sign(normal.x), -normal.y);\n                    } else if (absN.y > absN.x && absN.y > absN.z) {\n                        maxAxis = absN.y;\n                        uvc = vec2(normal.x, normal.z * sign(normal.y));\n                    } else {\n                        maxAxis = absN.z;\n                        uvc = vec2(normal.x * sign(normal.z), -normal.y);\n                    }\n                    return 0.5 * (uvc / maxAxis + 1.0);\n                }\n            "),t.appendMain_61zpoe$("\n                "+this.outColor.declare()+" = "+this.inAlbedo.ref4f_61zpoe$()+";\n                "+this.outBumpNormal.declare()+" = "+this.inBumpNormal.ref3f_61zpoe$()+";\n                if ("+this.inIsOcean+") {\n                    vec2 oceanUvBase = cubeUv(normalize("+this.inNormal.ref3f_61zpoe$()+"));\n                    float s = 800.0;\n                    vec2 oceanUv1 = oceanUvBase * vec2(1.0 * s, 1.5 * s) + "+this.uNormalShift+".xy;\n                    vec2 oceanUv2 = oceanUvBase * vec2(1.69751 * s, 1.27841 * s) + "+this.uNormalShift+".zw;\n                    vec2 oceanUvStrength = oceanUvBase;\n                    \n                    vec3 oceanNrm1 = "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUv1")+".rgb * 2.0 - 1.0;\n                    vec3 oceanNrm2 = "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUv2")+".rgb * 2.0 - 1.0;\n                    vec3 oceanNrm = oceanNrm1 + oceanNrm2;\n                    float nrmStrength = smoothstep(0.3, 0.6, "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUvStrength")+".r) * 0.7 + 0.3;\n                    oceanNrm.xy *= nrmStrength;\n                    \n                    //"+this.outColor+" = vec4("+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUvBase")+".rgb, 1.0);\n                    "+this.outColor+" = "+this.uWaterColor+";\n                    "+this.outBumpNormal+" = calcBumpedNormal("+this.inBumpNormal.ref3f_61zpoe$()+", "+this.inTangent.ref4f_61zpoe$()+", normalize(oceanNrm), 0.4);\n                }\n            ")},ro.$metadata$={kind:P,simpleName:"EarthOceanNode",interfaces:[N]},Object.defineProperty(so.prototype,"atmosphereRadius",{configurable:!0,get:function(){return this.atmosphereRadius_32tfnj$_0},set:function(t){var e,i;this.atmosphereRadius_32tfnj$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uAtmosphereRadius:null)&&(i.value=t),this.update()}}),Object.defineProperty(so.prototype,"surfaceRadius",{configurable:!0,get:function(){return this.surfaceRadius_t0cr9a$_0},set:function(t){var e,i;this.surfaceRadius_t0cr9a$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uSurfaceRadius:null)&&(i.value=t),this.update()}}),Object.defineProperty(so.prototype,"densityFalloff",{configurable:!0,get:function(){return this.densityFalloff_isgemf$_0},set:function(t){var e,i;this.densityFalloff_isgemf$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uDensityFalloff:null)&&(i.value=t),this.update()}}),so.prototype.update=function(){this.isEnabled=!0},so.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ie.prototype.dispose_aemszp$.call(this,t)},ao.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var lo=null;function uo(){return null===lo&&new ao,lo}function po(t){N.call(this,"opticalDepthLut",t),this.inTexCoords=new T(new Nt(Ct.Companion.ZERO)),this.outColor=new T(new E("brdfLut_outColor"),this),this.uAtmosphereRadius=new Mt("uAtmosphereRadius"),this.uSurfaceRadius=new Mt("uSurfaceRadius"),this.uDensityFalloff=new Mt("uDensityFalloff")}function co(t){var e=new R;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function ho(t){var i,n,o=new Z,r=new ae;r.name="SkyPass",r.setDynamicSize(),r.addColorTexture_1yho43$(Eo),r.clearDepthTexture(),ie.call(this,o,new le(r)),this.atmosphereDemo=t,this.content=e.isType(i=this.drawNode,Z)?i:Q();var a,l,u,p=this.atmosphereDemo.mainScene,c=new ke(e.isType(n=p.camera,J)?n:Q());this.camera=c,this.onBeforeCollectDrawCommands.add_11rb$((a=c,l=p,function(t){return a.sync_hrtwbc$(l.mainRenderPass.viewport,t),a.clipNear=5,a.clipFar=5e3,s})),this.lighting=p.lighting,p.addOffscreenPass_m1c2kf$(this),p.onRenderScene.add_11rb$((u=this,function(t,e){var i=t.mainRenderPass.viewport.width,n=t.mainRenderPass.viewport.height;return i>0&&n>0&&(i!==u.width||n!==u.height)&&u.resize_w70mbp$(i,n,e),s}));var h=this.content;h.isFrustumChecked=!1,this.setupSky_0(h)}function fo(t){return t.texCoord.x=1-t.texCoord.x,s}function _o(t){t.vertexModFun=fo;var e=(new gt).uvDefaults();return e.steps=10,t.uvSphere_mojs8w$(e),s}function mo(t){for(var e=new ce(56498561),i=he([m.Companion.WHITE,m.Companion.MD_BLUE.mix_y83vuj$(m.Companion.WHITE,.5),m.Companion.MD_PINK.mix_y83vuj$(m.Companion.WHITE,.5),m.Companion.MD_YELLOW.mix_y83vuj$(m.Companion.WHITE,.5)]),n=0;n<=3e4;n++){var o,r,a,l=t.geometry;l.checkBufferSizes_za3lpa$(),o=l.vertexSizeF;for(var u=1;u<=o;u++)l.dataF.plusAssign_mx4ult$(0);r=l.vertexSizeI;for(var p=1;p<=r;p++)l.dataI.plusAssign_za3lpa$(0);l.vertexIt.index=(a=l.numVertices,l.numVertices=a+1|0,a);var c,h=l.vertexIt;h.color.set_czzhhz$(t.color);for(var f=1,_=1;f*f+_*_>1;)f=e.randomF_dleff0$(-1,1),_=e.randomF_dleff0$(-1,1);h.position.set_y2kzbl$(1.5*f,e.randomF_dleff0$(-1,1),1.5*_),h.position.x=h.position.x-.25,h.position.norm();var $=e.randomF_dleff0$(.1,1);h.color.set_czzhhz$(i.getColor_y2kzbl$(e.randomF()).scale_749b7q$($,de())),d(h.getFloatAttribute_nm2vx5$(fe.Companion.ATTRIB_POINT_SIZE)).f=1+.75*j.pow($,3),t.transform.transform_w1lst9$(h.position),t.hasNormals&&0!==h.normal.sqrLength()&&(t.transform.transform_w1lst9$(h.normal,0),h.normal.norm()),null!=(c=t.vertexModFun)&&c(h),l.bounds.add_czzhiu$(l.vertexIt.position),l.hasChanged=!0,l.numVertices,t.geometry.addIndex_za3lpa$(n)}return s}function $o(t){var e=new R;return e.size.set_dleff0$(3,3),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.origin.z=-10,t.rect_e5k3t5$(e),s}function yo(t){var e=new R;return e.size.set_dleff0$(1,1),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.origin.z=-10,t.rect_e5k3t5$(e),s}function vo(t,e,i,n,o,r){return function(a){a.isFrustumChecked=!1,a.unaryPlus_uv0sim$(t),a.rotate_ad55pp$(-60,$.Companion.X_AXIS);var l=a.onUpdate,u=function(t,e,i,n){return function(o,r){var a,l,u=t.atmosphereDemo.atmoShader.atmosphereRadius-t.atmosphereDemo.atmoShader.surfaceRadius,p=t.atmosphereDemo.cameraHeight/u,c=1.25*((p<.2?.2:p>1?1:p)-.2),h=ut(t.atmosphereDemo.mainScene.camera.globalPos).norm(),f=1-(1-c)*(1-me(.1,.3,h.times_czzhiu$(t.atmosphereDemo.sun.direction))),_=new m(f,f,f,1);if(d(e.v).color=_,d(i.v).color=_,d(n.v).color=_.withAlpha_mx4ult$(.75),null!=(l=null!=(a=e.v)?a.uPtSizeMod:null)){var $=t.width/1920;l.value=j.max(.6,$)}return s}}(e,i,n,o);return l.add_11rb$(u),a.unaryPlus_uv0sim$(r),s}}function go(t){return function(e){e.isFrustumChecked=!1,e.unaryPlus_uv0sim$(new Co(t));var i=e.onUpdate,n=function(t,e){return function(i,n){return t.setIdentity(),t.rotate_ad55pp$(Ln().moonInclination,$.Companion.X_AXIS),t.rotate_ad55pp$(360*e.atmosphereDemo.moonTime,$.Companion.Y_AXIS),t.translate_y2kzbl$(0,0,Ln().moonDist),s}}(e,t);return i.add_11rb$(n),s}}function bo(t,e,i){return t.cullMethod=be.NO_CULLING,t.depthTest=It.DISABLED,s}function xo(){var t;ko(),xt.call(this,ko().cfg_0,ko().model_0),this.uPtSizeMod=null,this.onPipelineSetup.add_11rb$(So),this.onPipelineCreated.add_11rb$((t=this,function(i,n,o){var r,a,l,u=t,p=t.model;t:do{var c;for(a=wt.ALL,c=p.stages.values.iterator();c.hasNext();){var h=c.next();if(0!=(h.stage.mask&a.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(kt($.name,"uPtSizeMod")&&e.isType($,xe)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,xe)?d:Q();if(null!=y){l=y;break t}}}l=null}while(0);return u.uPtSizeMod=null!=(r=l)?r.uniform:null,s}))}function wo(){zo=this,this.cfg_0=new bt;var t,i,n=xt.Companion.defaultUnlitModel_ws3dmo$(this.cfg_0),o=new F(n);t:do{var r;for(t=wt.ALL,r=n.stages.values.iterator();r.hasNext();){var s=r.next();if(0!=(s.stage.mask&t.mask)){var a,l=s.nodes,u=M();for(a=l.iterator();a.hasNext();){var p=a.next();e.isType(p,Ut)&&u.add_11rb$(p)}var c=zt(u);if(null!=c){i=c;break t}}}i=null}while(0);var h=d(i),f=o.pushConstantNode1f_61zpoe$("uPtSizeMod").output;o.pointSize_r20yfm$(o.multiplyNode_ze33is$(o.attributeNode_nm2vx5$(fe.Companion.ATTRIB_POINT_SIZE).output,f).output),o.positionOutput=o.addNode_u9w9by$(new ve(h,o.attrPositions().output,o.stage)).outPosition;var _,m,$=new B(n);t:do{var y;for(_=wt.ALL,y=n.stages.values.iterator();y.hasNext();){var v=y.next();if(0!=(v.stage.mask&_.mask)){var g,b=v.nodes,x=M();for(g=b.iterator();g.hasNext();){var w=g.next();e.isType(w,ge)&&x.add_11rb$(w)}var z=zt(x);if(null!=z){m=z;break t}}}m=null}while(0);var k=d(m),S=$.pushConstantNodeColor_61zpoe$("uColor").output,C=$.multiplyNode_ze33is$(k.outColor,S).output;$.colorOutput_a3v4si$($.gammaNode_ze33is$(C).outColor),this.model_0=n}po.prototype.setup_llmhyc$=function(t){var e;N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inTexCoords),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uAtmosphereRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSurfaceRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uDensityFalloff}}(e)),s}))},po.prototype.generateCode_626509$=function(t){N.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("rayLength","\n                float rayLength(vec3 rayOrigin, vec3 rayDir) {\n                    float a = dot(rayDir, rayDir);\n                    float b = 2.0 * dot(rayDir, rayOrigin);\n                    float c = dot(rayOrigin, rayOrigin) - "+this.uAtmosphereRadius+" * "+this.uAtmosphereRadius+";\n                    \n                    float discriminant = b * b - 4.0 * a * c;\n                    if (discriminant < 0.0) {\n                        return -1.0;\n                    } else {\n                        float q = -0.5 * (b + sign(b) * sqrt(discriminant));\n                        float t1 = q / a;\n                        float t2 = c / q;\n                        return max(t1, t2);\n                    }\n                }\n            "),t.appendFunction_puj7f4$("densityAtAltitude","\n                float densityAtAltitude(float altitude) {\n                    float nH = clamp(altitude / ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+"), 0.0, 1.0);\n\n                    // exponential density\n                    //float h = nH;\n\n                    // exponential density with cut-off\n                    //float cutOff = 0.2;\n                    //float h = nH * (1.0 - cutOff) + cutOff;\n                    \n                    // reduced density at low altitudes\n                    float x = nH * 10.0;\n                    float f = 0.3 * (2.0 + 3.0 * x * exp(-x)) * (10.0 - x) / 10.0;\n                    float h = 1.0 - f;\n                    \n                    return exp(-clamp(h, 0.0, 1.0) * "+this.uDensityFalloff+") * (1.0 - nH);\n                }\n            "),t.appendFunction_puj7f4$("opticalDepth","\n                float opticalDepth(vec3 origin, vec3 dir, float rayLength) {\n                    vec3 samplePt = origin;\n                    float stepSize = rayLength / float(101);\n                    float opticalDepth = 0.0;\n                    for (int i = 0; i < 100; i++) {\n                        samplePt += dir * stepSize;\n                        opticalDepth += densityAtAltitude(length(samplePt) - "+this.uSurfaceRadius+") * stepSize;\n                    }\n                    return opticalDepth;\n                }\n            "),t.appendMain_61zpoe$("\n                float cosAngle = "+this.inTexCoords.ref2f_61zpoe$()+".x * 2.0 - 1.0;\n                float altitude = "+this.inTexCoords.ref2f_61zpoe$()+".y * ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+");\n                \n                vec3 origin = vec3("+this.uSurfaceRadius+" + altitude, 0.0, 0.0);\n                vec3 direction = vec3(cosAngle, sin(acos(cosAngle)), 0.0);\n                \n                float shift = "+this.uAtmosphereRadius+" * 2.0;\n                float rayLen = rayLength(origin - direction * shift, direction) - shift;\n                float opticalDepth = opticalDepth(origin, direction, rayLen);\n                \n                "+this.outColor.declare()+" = vec4(opticalDepth, densityAtAltitude(altitude), 0.0, 1.0);\n            ")},po.$metadata$={kind:P,simpleName:"OpticalDepthLutNode",interfaces:[N]},so.$metadata$={kind:P,simpleName:"OpticalDepthLutPass",interfaces:[ie]},ho.prototype.setupSky_0=function(t){var e,i,n,o,r=this.atmosphereDemo.textures,a={v:null},l={v:null},u={v:null},p=b(void 0,void 0,(e=r,i=this,n=a,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(_o),n.v=i.skyboxShader_0(e.get_11rb$(Ln().texMilkyway)),t.shader=n.v,s})),c=_e(void 0,(o=l,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(mo),o.v=new xo,t.shader=o.v,s})),h=b(void 0,void 0,function(t,e,i){return function(n){return n.isFrustumChecked=!1,n.generate_v2sixm$($o),i.v=e.skyboxShader_0(t.get_11rb$(Ln().texSunBg)),n.shader=i.v,s}}(r,this,u)),d=b(void 0,void 0,function(t,e){return function(i){return i.isFrustumChecked=!1,i.generate_v2sixm$(yo),i.shader=e.skyboxShader_0(t.get_11rb$(Ln().texSun)),s}}(r,this));t.unaryPlus_uv0sim$($e(void 0,vo(p,this,l,a,u,c))),t.unaryPlus_uv0sim$(h),t.unaryPlus_uv0sim$(d),t.unaryPlus_uv0sim$($e("moonGroup",go(this)))},ho.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ie.prototype.dispose_aemszp$.call(this,t)},ho.prototype.skyboxShader_0=function(t){var i=new bt;i.alphaMode=new ye,i.useColorMap_daqygw$(t,!0),i.color=m.Companion.WHITE;var n,o,r=i,s=xt.Companion.defaultUnlitModel_ws3dmo$(r),a=new F(s);t:do{var l;for(n=wt.ALL,l=s.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&n.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,Ut)&&h.add_11rb$(f)}var _=zt(h);if(null!=_){o=_;break t}}}o=null}while(0);var $=d(o);a.positionOutput=a.addNode_u9w9by$(new ve($,a.attrPositions().output,a.stage)).outPosition;var y,v,g=new B(s);t:do{var b;for(y=wt.ALL,b=s.stages.values.iterator();b.hasNext();){var x=b.next();if(0!=(x.stage.mask&y.mask)){var w,z=x.nodes,k=M();for(w=z.iterator();w.hasNext();){var S=w.next();e.isType(S,ge)&&k.add_11rb$(S)}var C=zt(k);if(null!=C){v=C;break t}}}v=null}while(0);var N=d(v);g.colorOutput_a3v4si$(g.gammaNode_ze33is$(N.outColor).outColor);var E=new xt(r,s);return E.onPipelineSetup.add_11rb$(bo),E},wo.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var zo=null;function ko(){return null===zo&&new wo,zo}function So(t,e,i){return t.depthTest=It.DISABLED,s}function Co(t){this.$outer=t,pe.call(this,we([re.Companion.POSITIONS,re.Companion.NORMALS,re.Companion.TEXTURE_COORDS]),"moon"),this.isFrustumChecked=!1,this.generate_v2sixm$(No);var e,i=v((e=this.$outer,function(t){return t.useAlbedoMap_daqygw$(e.atmosphereDemo.textures.get_11rb$(Ln().texMoon)),t.roughness=.7,t.isHdrOutput=!0,s}));i.ambient=new m(.05,.05,.05).toLinear(),this.shader=i}function No(t){t.rotate_ad55pp$(180,$.Companion.Y_AXIS);var e=(new gt).icoDefaults();return e.steps=4,e.radius=Ln().moonRadius,t.icoSphere_mojs8w$(e),s}function Eo(t){return t.colorFormat=G.RGB_F16,t.minFilter=ze.NEAREST,t.magFilter=ze.NEAREST,s}function To(){var t;Lo(),pe.call(this,new ue(se([re.Companion.POSITIONS,re.Companion.NORMALS,re.Companion.TANGENTS,re.Companion.TEXTURE_COORDS,Lo().ATTRIB_EDGE_FLAG]))),this.tiles_0=null,this.zoomColors_0=se([Ee(m.Companion.MD_PURPLE).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_RED).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_AMBER).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_LIGHT_GREEN).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_BLUE).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_DEEP_PURPLE).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_PINK).mix_y83vuj$(m.Companion.WHITE,.6).toLinear()]),this.front_0=new Ao(this,Ee(m.Companion.MD_RED)),this.back_0=new Ao(this,Ee(m.Companion.MD_GREEN)),this.right_0=new Ao(this,Ee(m.Companion.MD_BLUE)),this.left_0=new Ao(this,Ee(m.Companion.MD_YELLOW)),this.top_0=new Ao(this,Ee(m.Companion.MD_CYAN)),this.bottom_0=new Ao(this,Ee(m.Companion.MD_PURPLE)),this.faces_0=se([this.front_0,this.back_0,this.left_0,this.right_0,this.top_0,this.bottom_0]),this.centerFace_0=null,this.centerTileName_0=de(),this.oldCenterTileName_0=de(),this.tmpTileName_0=de(),this.isFrustumChecked=!1,this.front_0.up=this.top_0,this.front_0.right=this.right_0,this.front_0.down=this.bottom_0,this.front_0.left=this.left_0,this.right_0.up=this.top_0,this.right_0.right=this.back_0,this.right_0.down=this.bottom_0,this.right_0.left=this.front_0,this.back_0.up=this.top_0,this.back_0.right=this.left_0,this.back_0.down=this.bottom_0,this.back_0.left=this.right_0,this.left_0.up=this.top_0,this.left_0.right=this.front_0,this.left_0.down=this.bottom_0,this.left_0.left=this.back_0,this.top_0.up=this.back_0,this.top_0.right=this.right_0,this.top_0.down=this.front_0,this.top_0.left=this.left_0,this.bottom_0.up=this.front_0,this.bottom_0.right=this.right_0,this.bottom_0.down=this.back_0,this.bottom_0.left=this.left_0,this.generate_v2sixm$((t=this,function(e){return t.tileGrid_0(e,40),s})),this.tiles_0=new Ne(Lo().INSTANCE_ATTRIBUTES_0),this.instances=this.tiles_0}function Po(t,e,i,n){jo(),this.left=t,this.right=e,this.top=i,this.bottom=n}function Oo(){Mo=this,this.NO_EDGE=new Po(2147483647,2147483647,2147483647,2147483647)}xo.$metadata$={kind:P,simpleName:"StarShader",interfaces:[xt]},Co.$metadata$={kind:P,simpleName:"Moon",interfaces:[pe]},ho.$metadata$={kind:P,simpleName:"SkyPass",interfaces:[ie]},To.prototype.tileGrid_0=function(t,e){for(var i=e+1|0,n=0;n<=e;n++)for(var o=0;o<=e;o++){var r,s,a,l=t.geometry;l.checkBufferSizes_za3lpa$(),r=l.vertexSizeF;for(var u=1;u<=r;u++)l.dataF.plusAssign_mx4ult$(0);s=l.vertexSizeI;for(var p=1;p<=s;p++)l.dataI.plusAssign_za3lpa$(0);l.vertexIt.index=(a=l.numVertices,l.numVertices=a+1|0,a);var c,h,f=l.vertexIt;f.color.set_czzhhz$(t.color),f.texCoord.set_dleff0$(o/e,n/e),h=0===o&&n%2==1?2:o===e&&n%2==1?1:0===n&&o%2==1?4:n===e&&o%2==1?8:0,d(f.getIntAttribute_nm2vx5$(Lo().ATTRIB_EDGE_FLAG)).i=h,t.transform.transform_w1lst9$(f.position),t.hasNormals&&0!==f.normal.sqrLength()&&(t.transform.transform_w1lst9$(f.normal,0),f.normal.norm()),null!=(c=t.vertexModFun)&&c(f),l.bounds.add_czzhiu$(l.vertexIt.position),l.hasChanged=!0;var _=l.numVertices-1|0;o>0&&n>0&&(o%2==n%2?(t.geometry.addTriIndices_qt1dr2$(_-i-1|0,_,_-1|0),t.geometry.addTriIndices_qt1dr2$(_-i|0,_,_-i-1|0)):(t.geometry.addTriIndices_qt1dr2$(_-i|0,_,_-1|0),t.geometry.addTriIndices_qt1dr2$(_-i|0,_-1|0,_-i-1|0)))}},To.prototype.updateTiles_czzhiu$=function(t){var e,i,n,o=this.toLocalCoords_w1lst9$(ut(t),1),r=o.length();if(0!==r){var s=ut(o).scale_mx4ult$(1/r),a=this.cubeFaceUv_0(s),l=a.component1(),u=a.component2(),p=mt(64*l.x),c=mt(64*l.y);if(this.encodeTileName_0(p,c,6,this.centerTileName_0),null==(e=this.centerTileName_0)||!e.equals(this.oldCenterTileName_0)){this.oldCenterTileName_0.set_czzhhz$(this.centerTileName_0),u!==this.centerFace_0&&(this.centerFace_0=u,this.applyRotations_0()),this.tiles_0.clear(),i=this.faces_0;for(var h=0;h!==i.size;++h)this.faces_0.get_za3lpa$(h).tileCnt=0;u.addTile_75mr7i$(p,c,6,jo().NO_EDGE),u.buildGrid_4qozqa$(p,c,1,1,6),n=this.faces_0;for(var d=0;d!==n.size;++d)0===this.faces_0.get_za3lpa$(d).tileCnt&&this.faces_0.get_za3lpa$(d).addTile_75mr7i$(0,0,0,jo().NO_EDGE)}}},To.prototype.applyRotations_0=function(){this.front_0.mat.setIdentity(),this.back_0.mat.setIdentity(),this.left_0.mat.setIdentity(),this.right_0.mat.setIdentity(),this.top_0.mat.setIdentity(),this.bottom_0.mat.setIdentity(),this.centerFace_0===this.right_0?(this.top_0.mat.rotate_ad55pp$(90,$.Companion.Y_AXIS),this.bottom_0.mat.rotate_ad55pp$(90,$.Companion.Y_AXIS)):this.centerFace_0===this.left_0?(this.top_0.mat.rotate_ad55pp$(-90,$.Companion.Y_AXIS),this.bottom_0.mat.rotate_ad55pp$(-90,$.Companion.Y_AXIS)):this.centerFace_0===this.back_0?(this.top_0.mat.rotate_ad55pp$(180,$.Companion.Y_AXIS),this.bottom_0.mat.rotate_ad55pp$(180,$.Companion.Y_AXIS)):this.centerFace_0===this.top_0?(this.right_0.mat.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),this.back_0.mat.rotate_ad55pp$(180,$.Companion.Z_AXIS),this.left_0.mat.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS)):this.centerFace_0===this.bottom_0&&(this.right_0.mat.rotate_ad55pp$(90,$.Companion.X_AXIS),this.back_0.mat.rotate_ad55pp$(180,$.Companion.Z_AXIS),this.left_0.mat.rotate_ad55pp$(90,$.Companion.X_AXIS)),this.right_0.mat.rotate_ad55pp$(90,$.Companion.Y_AXIS),this.back_0.mat.rotate_ad55pp$(180,$.Companion.Y_AXIS),this.left_0.mat.rotate_ad55pp$(270,$.Companion.Y_AXIS),this.top_0.mat.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),this.bottom_0.mat.rotate_ad55pp$(-90,$.Companion.NEG_X_AXIS)},Po.prototype.getEdgeMask_vux9f0$=function(t,e){var i=0;return t===this.left&&(i|=1),t===this.right&&(i|=2),e===this.top&&(i|=4),e===this.bottom&&(i|=8),i},Oo.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Mo=null;function jo(){return null===Mo&&new Oo,Mo}function Ao(t,e){this.$outer=t,this.faceColor=e,this.up=null,this.right=null,this.down=null,this.left=null,this.mat=new Se,this.tileCnt=0}function Io(){Ro=this,this.TILE_GRID_SIZE=40,this.EDGE_LEFT=1,this.EDGE_RIGHT=2,this.EDGE_TOP=4,this.EDGE_BOTTOM=8,this.ATTRIB_EDGE_FLAG=new re("aEdgeFlag",Ce.INT),this.ATTRIB_EDGE_MASK=new re("aEdgeMask",Ce.FLOAT),this.ATTRIB_TILE_NAME=new re("aTileName",Ce.VEC_4F),this.INSTANCE_ATTRIBUTES_0=se([Ne.Companion.MODEL_MAT,this.ATTRIB_TILE_NAME,this.ATTRIB_EDGE_MASK,re.Companion.COLORS])}Po.$metadata$={kind:P,simpleName:"ZoomLevelEdge",interfaces:[]},Ao.prototype.buildGrid_4qozqa$=function(t,e,i,n,o){var r=t-1|0,s=t+i|0,a=e-1|0,l=e+n|0,u=r%2!=0?r-1|0:r,p=s%2==0?s+1|0:s,c=a%2!=0?a-1|0:a,h=l%2==0?l+1|0:l,d=new Po(u,p,c,h);this.addTileRow_gdy3kc$(r,s,a,o,d),this.addTileRow_gdy3kc$(r,s,l,o,d),this.addTileCol_gdy3kc$(a,l,r,o,d),this.addTileCol_gdy3kc$(a,l,s,o,d),r!==u&&this.addTileCol_gdy3kc$(a,l,u,o,d),s!==p&&this.addTileCol_gdy3kc$(a,l,p,o,d),a!==c&&this.addTileRow_gdy3kc$(u,p,c,o,d),l!==h&&this.addTileRow_gdy3kc$(u,p,h,o,d),o>1&&this.buildGrid_4qozqa$(u/2|0,c/2|0,(p-u+1|0)/2|0,(h-c+1|0)/2|0,o-1|0)},Ao.prototype.addTileRow_gdy3kc$=function(t,e,i,n,o){for(var r=t;r<=e;r++)this.addTile_75mr7i$(r,i,n,o)},Ao.prototype.addTileCol_gdy3kc$=function(t,e,i,n,o){for(var r=t;r<=e;r++)this.addTile_75mr7i$(i,r,n,o)},Ao.prototype.addTile_75mr7i$=function(t,e,i,n,o,r){var s,a,l,u;void 0===o&&(o=0),void 0===r&&(r=0);var p=n.getEdgeMask_vux9f0$(t,e),c=t+o|0,h=e+r|0,d=1<<i;if(0<=c&&c<d&&0<=h&&h<d){this.tileCnt=this.tileCnt+1|0;var f=this.$outer.tiles_0;this.$outer,f.checkBufferSize_za3lpa$();var _=f.dataF.position,m=this.$outer,$=f.dataF;$.put_q3cr5i$(this.mat.matrix),$.put_q3cr5i$(m.encodeTileName_0(c,h,i,m.tmpTileName_0).array),$.put_mx4ult$(p),$.put_q3cr5i$(m.zoomColors_0.get_za3lpa$(i).array);var y=f.dataF.position-_|0;if(y!==f.instanceSizeF)throw Te("Expected data to grow by "+f.instanceSizeF+" elements, instead it grew by "+y);f.numInstances=f.numInstances+1|0,f.hasChanged=!0}else(0|-d)<=t&&t<0&&0<=e&&e<d?null!=(s=this.left)&&s.addTile_75mr7i$(t,e,i,n,d):d<=t&&t<(2*d|0)&&0<=e&&e<d?null!=(a=this.right)&&a.addTile_75mr7i$(t,e,i,n,0|-d):0<=t&&t<d&&(0|-d)<=e&&e<0?null!=(l=this.up)&&l.addTile_75mr7i$(t,e,i,n,void 0,d):0<=t&&t<d&&d<=e&&e<(2*d|0)&&null!=(u=this.down)&&u.addTile_75mr7i$(t,e,i,n,void 0,0|-d)},Ao.$metadata$={kind:P,simpleName:"Face",interfaces:[]},To.prototype.encodeTileName_0=function(t,e,i,n){var o=1<<i,r=t===((o/2|0)-1|0)?.99999:1;return n.set_7b5o5w$(t,e,o,r)},To.prototype.cubeFaceUv_0=function(t){var e,i,n,o,r=t.x,s=j.abs(r),a=t.y,l=j.abs(a),u=t.z,p=j.abs(u);if(s>l&&s>p){e=s;var c=-t.z,h=t.x;i=c*j.sign(h),n=-t.y,o=t.x>0?this.right_0:this.left_0}else if(l>s&&l>p){e=l,i=t.x;var d=t.z,f=t.y;n=d*j.sign(f),o=t.y>0?this.top_0:this.bottom_0}else{e=p;var _=t.x,m=t.z;i=_*j.sign(m),n=-t.y,o=t.z>0?this.front_0:this.back_0}return ot(new Ct(.5*(i/e+1),.5*(n/e+1)),o)},Io.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Ro=null;function Lo(){return null===Ro&&new Io,Ro}function Do(t,e){return Ve(void 0,void 0,void 0,(i=t,n=e,function(t,e){var o=new qo(e,t,i);return n(o),o.finish(),s}));var i,n}function qo(t,e,i){this.uiScene=t,this.uiRoot=e,this.menuWidth=300,this.menuHeight=0,this.menuContainer=null,this.menuY=-40,this.smallFontProps_0=new Ke(We.Companion.SYSTEM_FONT,14),this.smallFont=null;var n=this.uiRoot;this.smallFont=Xe(this.smallFontProps_0.family,this.smallFontProps_0.sizePts,n.uiDpi,i,this.smallFontProps_0.style,this.smallFontProps_0.chars),n.theme=Je(Ye.Companion.DARK,Yo),this.menuContainer=n.container_t34sov$("menu",Zo),n.unaryPlus_uv0sim$(this.menuContainer)}function Fo(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.menuY),pt()),i.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),i.textAlignment=new ft(dt.START,dt.CENTER);var n=i.onClick,o=function(t){return function(e,i,n,o){return t(e),s}}(e);return n.add_11rb$(o),s}}function Bo(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ct(15),Ge(t.menuY),pt()),n.layoutSpec.setSize_4ujscr$(ct(70),Ge(35),ht()),n.text=He(e.current);var o=n.onClick,r=function(t,e){return function(i,n,o,r){var a=t.current;return i.text=He(t.next()),e(t.current,a),s}}(e,i);return o.add_11rb$(r),s}}function Uo(t,e,i,n){return function(o){o.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.menuY),pt()),o.layoutSpec.setSize_4ujscr$(ct(20),Ge(35),ht()),o.text="<";var r=o.onClick,a=function(t,e,i){return function(n,o,r,a){var l=t.current;return e.text=He(t.prev()),i(t.current,l),s}}(e,i,n);return r.add_11rb$(a),s}}function Vo(t,e,i,n){return function(o){o.layoutSpec.setOrigin_4ujscr$(ct(80),Ge(t.menuY),pt()),o.layoutSpec.setSize_4ujscr$(ct(20),Ge(35),ht()),o.text=">";var r=o.onClick,a=function(t,e,i){return function(n,o,r,a){var l=t.current;return e.text=He(t.next()),i(t.current,l),s}}(e,i,n);return r.add_11rb$(a),s}}function Go(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.menuY),pt()),i.layoutSpec.setSize_4ujscr$(ct(100),Ge(35),ht());var n=i.onValueChanged,o=function(t){return function(e,i){return t(e),s}}(e);return n.add_11rb$(o),s}}function Ho(t,e,i,n){return function(o){o.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.menuY),pt()),o.layoutSpec.setSize_4ujscr$(ct(100),Ge(35),ht());var r=o.onValueChanged,a=function(t,e,i){return function(n,o){return e.text=t(n.value),i(n),s}}(e,i,n);return r.add_11rb$(a),s}}function Wo(t,e,i,n,o,r){return function(a){a.layoutSpec.setOrigin_4ujscr$(ct(t),Ge(e.menuY),pt()),a.layoutSpec.setSize_4ujscr$(ct(100-t-i),Ge(35),ht());var l=a.onValueChanged,u=function(t,e,i){return function(n,o){return e.text=t(n.value),i(n),s}}(n,o,r);return l.add_11rb$(u),s}}function Ko(t){return new Ze}function Xo(t){return new Ze}function Yo(t){return t.componentUi_mloaa0$(Ko),t.containerUi_2t3ptw$(Xo),s}function Zo(t){return t.ui.setCustom_11rb$(new Qe(t)),s}function Jo(t,e){var i,n,o;er(),Z.call(this),this.relativeX=.05,this.relativeY=.05,this.relativeWidth=.33,this.aspectRatio=er().ASPECT_RATIO_VIEWPORT,this.unaryPlus_uv0sim$(b("image",void 0,(i=e,n=t,function(t){return t.generate_v2sixm$(ir),t.shader=null!=i?i:new S(n),s}))),this.onUpdate.add_11rb$((o=this,function(t,e){var i=o.aspectRatio!==er().ASPECT_RATIO_VIEWPORT?o.aspectRatio:e.viewport.aspectRatio,n=e.viewport.width*o.relativeWidth,r=n/i;o.setIdentity();var a=e.viewport.width*o.relativeX,l=e.viewport.height*o.relativeY;return o.translate_y2kzbl$(a,l,0),o.scale_y2kzbl$(n,r,1),s}))}function Qo(){tr=this,this.ASPECT_RATIO_VIEWPORT=0}To.$metadata$={kind:P,simpleName:"SphereGridSystem",interfaces:[pe]},qo.prototype.button_9zrh0o$=function(t,e){var i={v:null};return i.v=this.uiRoot.button_9zrh0o$(t,Fo(this,e)),this.menuContainer.plusAssign_f1kmr1$(i.v),this.menuY-=35,i.v},qo.prototype.cycler_4ni5b8$=function(t,e,i){var n,o=this.uiRoot,r=this.menuContainer;null!=t&&(r.unaryPlus_uv0sim$(o.label_tokfmu$(t,(n=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(n.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(100),Ge(35),ht()),s}))),this.menuY-=35);var a=o.button_9zrh0o$("cycler-main",Bo(this,e,i));r.unaryPlus_uv0sim$(a),r.unaryPlus_uv0sim$(o.button_9zrh0o$("cycle-left",Uo(this,e,a,i))),r.unaryPlus_uv0sim$(o.button_9zrh0o$("cycle-right",Vo(this,e,a,i))),this.menuY-=35},qo.prototype.gap_mx4ult$=function(t){this.menuY-=t},qo.prototype.image_3ds0aa$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i={v:null},n=this.uiRoot;return i.v=new Jo(t,e),n.unaryPlus_uv0sim$(i.v),i.v},qo.prototype.section_yfmn31$=function(t,e){this.title_61zpoe$(t),e(this)},qo.prototype.slider_d5clx2$=function(t,e,i,n){var o={v:null},r=this.uiRoot,s=this.menuContainer;return o.v=r.slider_91a1dk$("radiusSlider",e,i,t,Go(this,n)),s.unaryPlus_uv0sim$(o.v),this.menuY-=35,o.v},qo.prototype.sliderWithValue_xbu91d$=function(t,e,i,n,o,r,a){var l;void 0===o&&(o=2),void 0===r&&(l=o,r=function(t){return _t(t,l)});var u,p={v:null},c=this.uiRoot,h=this.menuContainer;h.unaryPlus_uv0sim$(c.label_tokfmu$(t,(u=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(u.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(75),Ge(35),ht()),s})));var d=c.label_tokfmu$(r(e),function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(ct(75),Ge(t.menuY),pt()),e.layoutSpec.setSize_4ujscr$(ct(25),Ge(35),ht()),e.textAlignment=new ft(dt.END,dt.CENTER),s}}(this));return h.unaryPlus_uv0sim$(d),this.menuY-=35,p.v=c.slider_91a1dk$("slider",i,n,e,Ho(this,r,d,a)),h.unaryPlus_uv0sim$(p.v),this.menuY-=35,p.v},qo.prototype.sliderWithValueSmall_jjtbof$=function(t,e,i,n,o,r,a,l,u){var p;void 0===o&&(o=2),void 0===r&&(p=o,r=function(t){return _t(t,p)}),void 0===a&&(a=15),void 0===l&&(l=15);var c,h,d={v:null},f=this.uiRoot,_=this.menuContainer;_.unaryPlus_uv0sim$(f.label_tokfmu$(t,(c=this,h=a,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(c.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(h),Ge(35),ht()),s})));var m=f.label_tokfmu$(r(e),function(t,e){return function(i){return i.layoutSpec.setOrigin_4ujscr$(ct(100-t),Ge(e.menuY),pt()),i.layoutSpec.setSize_4ujscr$(ct(t),Ge(35),ht()),i.textAlignment=new ft(dt.END,dt.CENTER),s}}(l,this));return _.unaryPlus_uv0sim$(m),d.v=f.slider_91a1dk$("slider",i,n,e,Wo(a,this,l,r,m,u)),_.unaryPlus_uv0sim$(d.v),this.menuY-=35,d.v},qo.prototype.text_61zpoe$=function(t){var e,i={v:null};return i.v=this.uiRoot.label_tokfmu$(t,(e=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(e.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),s})),this.menuContainer.plusAssign_f1kmr1$(i.v),this.menuY-=35,i.v},qo.prototype.textWithValue_puj7f4$=function(t,e){var i,n={v:null},o=this.uiRoot;return this.menuContainer.plusAssign_f1kmr1$(o.label_tokfmu$(t,(i=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(i.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(50),Ge(30),ht()),s}))),n.v=o.label_tokfmu$(e,function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(ct(50),Ge(t.menuY),pt()),e.layoutSpec.setSize_4ujscr$(ct(50),Ge(30),ht()),e.textAlignment=new ft(dt.END,dt.CENTER),s}}(this)),this.menuContainer.plusAssign_f1kmr1$(n.v),this.menuY-=35,n.v},qo.prototype.title_61zpoe$=function(t){var e,i,n={v:null},o=this.uiRoot;return n.v=o.label_tokfmu$(t.toUpperCase(),(e=this,i=o,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(e.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),t.font.setCustom_11rb$(e.smallFont),t.textColor.setCustom_11rb$(i.theme.accentColor),t.textAlignment=new ft(dt.CENTER,dt.CENTER),s})),this.menuContainer.plusAssign_f1kmr1$(n.v),this.menuY-=35,n.v},qo.prototype.toggleButton_8v9fdr$=function(t,e,i){var n,o,r,a={v:null};return a.v=this.uiRoot.toggleButton_6j87po$(t,(n=this,o=e,r=i,function(t){t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(n.menuY),pt()),t.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),t.isEnabled=o;var e=t.onStateChange,i=r;return e.add_11rb$(i),s})),this.menuContainer.plusAssign_f1kmr1$(a.v),this.menuY-=35,a.v},qo.prototype.finish=function(){var t=this.menuContainer;0===this.menuHeight&&(this.menuHeight=-this.menuY-20),t.layoutSpec.setOrigin_4ujscr$(Ge(-this.menuWidth-120),Ge(-this.menuHeight-120),pt()),t.layoutSpec.setSize_4ujscr$(Ge(this.menuWidth),Ge(this.menuHeight),ht())},qo.$metadata$={kind:P,simpleName:"ControlUiBuilder",interfaces:[]},Qo.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var tr=null;function er(){return null===tr&&new Qo,tr}function ir(t){var e=new R;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function nr(){br(),Kr.call(this,"Deferred Shading"),this.deferredPipeline_4e1hwv$_0=this.deferredPipeline_4e1hwv$_0,this.objects_v6o6kw$_0=this.objects_v6o6kw$_0,this.objectShader_kt711w$_0=this.objectShader_kt711w$_0,this.lightPositionMesh_cedig8$_0=this.lightPositionMesh_cedig8$_0,this.lightVolumeMesh_k6bbw9$_0=this.lightVolumeMesh_k6bbw9$_0,this.autoRotate_0=!0,this.rand_0=new ce(1337),this.lightCount_0=2e3,this.lights_0=M();var t=new Hr(se([new fr("Colorful",se([m.Companion.MD_RED,m.Companion.MD_PINK,m.Companion.MD_PURPLE,m.Companion.MD_DEEP_PURPLE,m.Companion.MD_INDIGO,m.Companion.MD_BLUE,m.Companion.MD_LIGHT_BLUE,m.Companion.MD_CYAN,m.Companion.MD_TEAL,m.Companion.MD_GREEN,m.Companion.MD_LIGHT_GREEN,m.Companion.MD_LIME,m.Companion.MD_YELLOW,m.Companion.MD_AMBER,m.Companion.MD_ORANGE,m.Companion.MD_DEEP_ORANGE])),new fr("Hot-Cold",se([m.Companion.MD_PINK,m.Companion.MD_CYAN])),new fr("Summer",se([m.Companion.MD_ORANGE,m.Companion.MD_BLUE,m.Companion.MD_GREEN])),new fr("White",Me(m.Companion.WHITE))]));t.index=1,this.colorMap_0=t}function or(t,e){return function(i){i.setMouseRotation_dleff0$(0,-40),i.unaryPlus_uv0sim$(t.camera),i.zoom=28,i.maxZoom=50,i.translation.set_yvo9jy$(0,-11,0);var n=i.onUpdate,o=function(t,e){return function(i,n){return t.autoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(e,i);return n.add_11rb$(o),s}}function rr(t){t.color=m.Companion.RED;var e=(new gt).icoDefaults();return e.steps=1,e.radius=.05,e.center.set_czzhiu$($.Companion.ZERO),t.icoSphere_mojs8w$(e),s}function sr(t){return function(e){e.generate_v2sixm$(function(t){return function(e){for(var i=M(),n=0;n<=10;n++){var o=new De(we([re.Companion.POSITIONS,re.Companion.NORMALS,re.Companion.COLORS])),r=o.geometry;i.add_11rb$(r);var a=t,l=(new gt).icoDefaults();l.steps=3,l.radius=a.rand_0.randomF_dleff0$(.3,.4),l.center.set_y2kzbl$(0,.1+l.radius,0),o.icoSphere_mojs8w$(l)}for(var u=-19;u<=19;u++)for(var p=-19;p<=19;p++){e.color=m.Companion.WHITE,e.transform.push();var c=t;if(e.translate_y2kzbl$(u,0,p),(u+100|0)%2==(p+100|0)%2){var h=new ri;h.size.set_y2kzbl$(c.rand_0.randomF_dleff0$(.6,.8),c.rand_0.randomF_dleff0$(.6,.95),c.rand_0.randomF_dleff0$(.6,.8)),h.origin.set_y2kzbl$(-h.size.x/2,.1,-h.size.z/2),e.cube_lhbb6w$(h)}else e.geometry_ejqx55$(i.get_za3lpa$(c.rand_0.randomI_n8acyv$(ii(i))));e.transform.pop()}return s}}(t));var i=new Ft;i.roughness=.15;var n=i;return t.objectShader_0=new Bt(n),e.shader=t.objectShader_0,s}}function ar(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.WHITE;var e=new R;return e.size.set_dleff0$(40,40),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.generateTexCoords_mx4ult$(30),t.rect_e5k3t5$(e),s}function lr(t){t.generate_v2sixm$(ar);var e=new Ft;e.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/futuristic-panels1/futuristic-panels1-albedo1.jpg"),e.useNormalMap_9sobi5$(Or().pbrBasePath+"/futuristic-panels1/futuristic-panels1-normal.jpg"),e.useRoughnessMap_ivxn3r$(Or().pbrBasePath+"/futuristic-panels1/futuristic-panels1-roughness.jpg"),e.useMetallicMap_ivxn3r$(Or().pbrBasePath+"/futuristic-panels1/futuristic-panels1-metallic.jpg"),e.useOcclusionMap_9sobi5$(Or().pbrBasePath+"/futuristic-panels1/futuristic-panels1-ao.jpg");var i,n=new Bt(e);return t.shader=n,t.onDispose.add_11rb$((i=n,function(t,e){var n,o,r,a,l,u;return null!=(n=i.albedoMap)&&n.dispose(),null!=(o=i.occlusionMap)&&o.dispose(),null!=(r=i.normalMap)&&r.dispose(),null!=(a=i.metallicMap)&&a.dispose(),null!=(l=i.roughnessMap)&&l.dispose(),null!=(u=i.displacementMap)&&u.dispose(),s})),s}function ur(t){return function(e){return e.sliderWithValue_xbu91d$("Light Count:",t.lightCount_0,1,5e3,0,void 0,function(t){return function(e){return t.lightCount_0=mt(e.value),t.updateLights_0(),s}}(t)),e.toggleButton_8v9fdr$("Light Positions",t.lightPositionMesh_0.isVisible,function(t){return function(e){return t.lightPositionMesh_0.isVisible=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Light Volumes",t.lightVolumeMesh_0.isVisible,function(t){return function(e){return t.lightVolumeMesh_0.isVisible=e.isEnabled,s}}(t)),e.cycler_4ni5b8$("Color Map:",t.colorMap_0,function(t){return function(e,i){return t.updateLightColors_0(),s}}(t)),s}}function pr(t,e){return function(i){return i.toggleButton_8v9fdr$("Show Maps",ni(t).isVisible,function(t){return function(e){var i;for(i=t.iterator();i.hasNext();)i.next().isVisible=e.isEnabled;return s}}(t)),i.toggleButton_8v9fdr$("Ambient Occlusion",e.deferredPipeline_0.isAoEnabled,function(t){return function(e){return t.deferredPipeline_0.isAoEnabled=e.isEnabled,s}}(e)),s}}function cr(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Show Objects",t.objects_0.isVisible,function(t){return function(e){return t.objects_0.isVisible=e.isEnabled,t.updateLights_0(!0),s}}(t)),e.sliderWithValue_xbu91d$("Object Roughness:",t.objectShader_0.roughness,0,1,2,void 0,function(t){return function(e){return t.objectShader_0.roughness=e.value,s}}(t)),s}}function hr(t,e,i,n,o){this.$outer=t,this.startConst=e,this.startIt=i,this.travelDir=n,this.rows=o}function dr(t){this.light=t,this.startPos=oi(),this.dir=oi(),this.speed=1.5,this.travelPos=0,this.travelDist=10,this.startColor=m.Companion.WHITE,this.desiredColor=m.Companion.WHITE,this.colorMix=0}function fr(t,e){this.name=t,this.colors=e}function _r(t){yr(),At.call(this,yr().shaderModel()),this.mrtPass=t}function mr(){$r=this}Jo.$metadata$={kind:P,simpleName:"UiImage",interfaces:[Z]},Object.defineProperty(nr.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_4e1hwv$_0?r("deferredPipeline"):this.deferredPipeline_4e1hwv$_0},set:function(t){this.deferredPipeline_4e1hwv$_0=t}}),Object.defineProperty(nr.prototype,"objects_0",{configurable:!0,get:function(){return null==this.objects_v6o6kw$_0?r("objects"):this.objects_v6o6kw$_0},set:function(t){this.objects_v6o6kw$_0=t}}),Object.defineProperty(nr.prototype,"objectShader_0",{configurable:!0,get:function(){return null==this.objectShader_kt711w$_0?r("objectShader"):this.objectShader_kt711w$_0},set:function(t){this.objectShader_kt711w$_0=t}}),Object.defineProperty(nr.prototype,"lightPositionMesh_0",{configurable:!0,get:function(){return null==this.lightPositionMesh_cedig8$_0?r("lightPositionMesh"):this.lightPositionMesh_cedig8$_0},set:function(t){this.lightPositionMesh_cedig8$_0=t}}),Object.defineProperty(nr.prototype,"lightVolumeMesh_0",{configurable:!0,get:function(){return null==this.lightVolumeMesh_k6bbw9$_0?r("lightVolumeMesh"):this.lightVolumeMesh_k6bbw9$_0},set:function(t){this.lightVolumeMesh_k6bbw9$_0=t}}),nr.prototype.lateInit_aemszp$=function(t){this.updateLights_0()},nr.prototype.setupMainScene_aemszp$=function(t){var e=new L(null);e.unaryPlus_uv0sim$(a(e,void 0,or(e,this))),e.lighting.lights.clear();var i=new X;i.maxGlobalLights=0,i.isWithEmissive=!1,i.isWithAmbientOcclusion=!0,i.isWithScreenSpaceReflections=!1,i.isWithImageBasedLighting=!1;var n,o=i;return this.deferredPipeline_0=new Y(e,o),this.makeContent_0(this.deferredPipeline_0.contentGroup),e.unaryPlus_uv0sim$(this.deferredPipeline_0.renderOutput),this.makeLightOverlays_0(e),e.onUpdate.add_11rb$((n=this,function(t,e){var i;for(i=n.lights_0.iterator();i.hasNext();)i.next().animate_mx4ult$(e.deltaT);return s})),e},nr.prototype.makeLightOverlays_0=function(t){var e;this.lightPositionMesh_0=g(void 0,(e=this,function(t){return t.isFrustumChecked=!1,t.isVisible=!0,t.generate_v2sixm$(rr),t.shader=new At(e.instancedLightIndicatorModel_0()),s})),t.unaryPlus_uv0sim$(this.lightPositionMesh_0);var i=ti(this.deferredPipeline_0.pbrPass.dynamicPointLights.mesh.geometry);i.isFrustumChecked=!1,i.isVisible=!1,i.shader=new At(this.instancedLightIndicatorModel_0()),this.lightVolumeMesh_0=i,t.unaryPlus_uv0sim$(this.lightVolumeMesh_0);var n=new Ne(se([Ne.Companion.MODEL_MAT,re.Companion.COLORS]),5e3),o=new Ne(se([Ne.Companion.MODEL_MAT,re.Companion.COLORS]),5e3);this.lightPositionMesh_0.instances=n,this.lightVolumeMesh_0.instances=o;var r=new Se;t.onUpdate.add_11rb$(function(t,e,i,n){return function(o,r){if(t.lightPositionMesh_0.isVisible||t.lightVolumeMesh_0.isVisible){e.clear(),i.clear();var a,l=ei();for(a=t.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.iterator();a.hasNext();){var u=a.next(),p=n,c=t,h=e,d=i;if(p.setIdentity(),p.translate_czzhiu$(u.position),u.color.toSrgb_b0h0gw$(l),c.lightPositionMesh_0.isVisible){h.checkBufferSize_za3lpa$();var f=h.dataF.position,_=h.dataF;_.put_q3cr5i$(p.matrix),_.put_q3cr5i$(l.array);var m=h.dataF.position-f|0;if(m!==h.instanceSizeF)throw Te("Expected data to grow by "+h.instanceSizeF+" elements, instead it grew by "+m);h.numInstances=h.numInstances+1|0,h.hasChanged=!0}if(c.lightVolumeMesh_0.isVisible){var $=u.intensity,y=j.sqrt($);p.scale_y2kzbl$(y,y,y),d.checkBufferSize_za3lpa$();var v=d.dataF.position,g=d.dataF;g.put_q3cr5i$(p.matrix),g.put_q3cr5i$(l.array);var b=d.dataF.position-v|0;if(b!==d.instanceSizeF)throw Te("Expected data to grow by "+d.instanceSizeF+" elements, instead it grew by "+b);d.numInstances=d.numInstances+1|0,d.hasChanged=!0}}}return s}}(this,n,o,r))},nr.prototype.makeContent_0=function(t){this.objects_0=g(void 0,sr(this)),t.unaryPlus_uv0sim$(this.objects_0),t.unaryPlus_uv0sim$(b(void 0,!0,lr))},nr.prototype.updateLights_0=function(t){void 0===t&&(t=!1);var e=this.objects_0.isVisible?.7:0,i=se([new hr(this,new $(-19.5,.45,-20.5),new $(1,0,0),new $(0,0,1),40),new hr(this,new $(-20.5,.45,-19.5),new $(0,0,1),new $(1,0,0),40),new hr(this,new $(-19,.45+e,20.5),new $(1,0,0),new $(0,0,-1),39),new hr(this,new $(20.5,.45+e,-19),new $(0,0,1),new $(-1,0,0),39)]);if(t)this.lights_0.clear(),this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.clear();else for(;this.lights_0.size>this.lightCount_0;)this.lights_0.removeAt_za3lpa$(Ae(this.lights_0)),this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.removeAt_za3lpa$(Ae(this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances));for(;this.lights_0.size<this.lightCount_0;){var n=i.get_za3lpa$(this.rand_0.randomI_n8acyv$(ii(i))),o=this.rand_0.randomI_n8acyv$(Ie(0,n.rows)),r=this.deferredPipeline_0.pbrPass.dynamicPointLights,s=new si;s.intensity=1,r.addPointLight_at6cwi$(s);var a=new dr(s);a.startColor=this.colorMap_0.current.getColor_za3lpa$(this.lights_0.size).toLinear(),a.desiredColor=a.startColor,a.colorMix=1;var l=a;this.lights_0.add_11rb$(l),n.setupLight_u83zut$(l,o,41,this.rand_0.randomF())}this.updateLightColors_0()},nr.prototype.updateLightColors_0=function(){var t,e,i=0;for(t=this.lights_0.iterator();t.hasNext();){var n=t.next(),o=Ue((i=(e=i)+1|0,e));n.startColor=n.desiredColor,n.desiredColor=this.colorMap_0.current.getColor_za3lpa$(o).toLinear(),n.colorMix=0}},nr.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,function(t){var i=M(),n=t.image_3ds0aa$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.albedoMetal,0,1));e.setupImage_0(n,.025,.025),i.add_11rb$(n);var o=t.image_3ds0aa$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.normalRoughness,1,.5));e.setupImage_0(o,.025,.35),i.add_11rb$(o);var r,a=t.image_3ds0aa$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.positionAo,10,.05));e.setupImage_0(a,.025,.675),i.add_11rb$(a);var l=t.image_3ds0aa$(void 0,new S(null!=(r=e.deferredPipeline_0.aoPipeline)?r.aoMap:null,void 0,gn().aoMapColorModel()));e.setupImage_0(l,.35,.35),i.add_11rb$(l);var u=t.image_3ds0aa$(void 0,new _r(e.deferredPipeline_0.mrtPass));return e.setupImage_0(u,.35,.675),i.add_11rb$(u),t.section_yfmn31$("Dynamic Lights",ur(e)),t.section_yfmn31$("Deferred Shading",pr(i,e)),t.section_yfmn31$("Scene",cr(e)),s}));var e},nr.prototype.setupImage_0=function(t,e,i){t.isVisible=!1,t.relativeWidth=.3,t.relativeX=e,t.relativeY=i},hr.prototype.setupLight_u83zut$=function(t,e,i,n){t.startPos.set_czzhiu$(this.startIt).scale_mx4ult$(e).add_czzhiu$(this.startConst),t.dir.set_czzhiu$(this.travelDir),t.travelDist=i,t.travelPos=n*i,t.speed=.25*this.$outer.rand_0.randomF_dleff0$(1,3)},hr.$metadata$={kind:P,simpleName:"LightGroup",interfaces:[]},dr.prototype.animate_mx4ult$=function(t){this.travelPos+=t*this.speed,this.travelPos>this.travelDist&&(this.travelPos-=this.travelDist),this.light.position.set_czzhiu$(this.dir).scale_mx4ult$(this.travelPos).add_czzhiu$(this.startPos),this.colorMix<1&&(this.colorMix+=2*t,this.colorMix>1&&(this.colorMix=1),this.startColor.mix_jpxij3$(this.desiredColor,this.colorMix,this.light.color))},dr.$metadata$={kind:P,simpleName:"AnimatedLight",interfaces:[]},fr.prototype.getColor_za3lpa$=function(t){return this.colors.get_za3lpa$(t%this.colors.size)},fr.prototype.toString=function(){return this.name},fr.$metadata$={kind:P,simpleName:"ColorMap",interfaces:[]},nr.prototype.instancedLightIndicatorModel_0=function(){var t=new C("instancedLightIndicators"),e={v:null},i=new F(t);e.v=i.stageInterfaceNode_iikjwn$("ifColors",i.instanceAttributeNode_nm2vx5$(re.Companion.COLORS).output);var n=i.premultipliedMvpNode().outMvpMat,o=i.multiplyNode_ze33is$(n,i.instanceAttrModelMat().output).output;i.positionOutput=i.vec4TransformNode_9krp9t$(i.attrPositions().output,o).outVec4;var r=new B(t);return r.colorOutput_a3v4si$(r.unlitMaterialNode_r20yfm$(e.v.output).outColor),t},nr.prototype.gBufferShader_0=function(t,e,i){return new S(t,void 0,this.rgbMapColorModel_0(e,i))},nr.prototype.rgbMapColorModel_0=function(t,e){var i=new C("rgbMap"),n={v:null},o=new F(i);n.v=o.stageInterfaceNode_iikjwn$("ifTexCoords",o.attrTexCoords().output),o.positionOutput=o.simpleVertexPositionNode().outVec4;var r=new B(i),s=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("colorTex"),n.v.output),a=r.splitNode_500t7j$(s.outColor,"rgb").output,l=r.multiplyNode_tuikh5$(r.addNode_ze33is$(a,new T(new Pt(t))).output,e);return r.colorOutput_a3v4si$(l.output,void 0,new T(new Pt(1))),i},_r.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s=this.model;t:do{var a;for(o=wt.ALL,a=s.stages.values.iterator();a.hasNext();){var l=a.next();if(0!=(l.stage.mask&o.mask)){var u,p,c=l.nodes;e:do{var h;for(h=c.iterator();h.hasNext();){var f=h.next();if(kt(f.name,"positionAo")&&e.isType(f,at)){p=f;break e}}p=null}while(0);var _=null==(u=p)||e.isType(u,at)?u:Q();if(null!=_){r=_;break t}}}r=null}while(0);d(r).sampler.texture=this.mrtPass.positionAo;var m,$,y=this.model;t:do{var v;for(m=wt.ALL,v=y.stages.values.iterator();v.hasNext();){var g=v.next();if(0!=(g.stage.mask&m.mask)){var b,x,w=g.nodes;e:do{var z;for(z=w.iterator();z.hasNext();){var k=z.next();if(kt(k.name,"normalRough")&&e.isType(k,at)){x=k;break e}}x=null}while(0);var S=null==(b=x)||e.isType(b,at)?b:Q();if(null!=S){$=S;break t}}}$=null}while(0);d($).sampler.texture=this.mrtPass.normalRoughness;var C,N,E=this.model;t:do{var T;for(C=wt.ALL,T=E.stages.values.iterator();T.hasNext();){var P=T.next();if(0!=(P.stage.mask&C.mask)){var O,M,j=P.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var I=A.next();if(kt(I.name,"albedoMetal")&&e.isType(I,at)){M=I;break e}}M=null}while(0);var R=null==(O=M)||e.isType(O,at)?O:Q();if(null!=R){N=R;break t}}}N=null}while(0);d(N).sampler.texture=this.mrtPass.albedoMetal,At.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},mr.prototype.shaderModel=function(){var t=new C,e={v:null},i=new F(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new B(t),o=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("positionAo"),e.v.output),r=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("normalRough"),e.v.output),s=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("albedoMetal"),e.v.output),a=n.splitNode_500t7j$(o.outColor,"a").output,l=n.splitNode_500t7j$(r.outColor,"a").output,u=n.splitNode_500t7j$(s.outColor,"a").output,p=n.combineNode_m7a9qd$(Ce.VEC_3F);p.inX=a,p.inY=l,p.inZ=u;var c=p;return n.colorOutput_a3v4si$(c.output,void 0,new T(new Pt(1))),t},mr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var $r=null;function yr(){return null===$r&&new mr,$r}function vr(){gr=this,this.MAX_LIGHTS=5e3}_r.$metadata$={kind:P,simpleName:"MetalRoughAoTex",interfaces:[At]},vr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var gr=null;function br(){return null===gr&&new vr,gr}function xr(t,e){void 0===t&&(t=null),void 0===e&&(e=ai());var i,n,o=null!=(n="string"==typeof(i=Or().demoProps.get_11rb$("assetsBaseDir"))?i:null)?n:"";o.length>0&&(e.assetMgr.assetsBaseDir=o),new wr(e,t)}function wr(t,i){var n;Or(),void 0===i&&(i=null),this.dbgOverlay_0=new hi(t,ci.LOWER_RIGHT),this.newScenes_0=M(),this.currentScenes_0=M(),this.defaultScene_0=new Er("glTF Models",void 0,Mr),this.demos_0=di([ot("atmosphereDemo",new Er("Atmospheric Scattering",void 0,jr)),ot("proceduralDemo",new Er("Procedural Geometry",void 0,Ar)),ot("gltfDemo",new Er("glTF Models",void 0,Ir)),ot("deferredDemo",new Er("Deferred Shading",void 0,Rr)),ot("aoDemo",new Er("Ambient Occlusion",void 0,Lr)),ot("ssrDemo",new Er("Reflections",void 0,Dr)),ot("pbrDemo",new Er("PBR Materials",void 0,qr)),ot("treeDemo",new Er("Procedural Tree",void 0,Fr)),ot("instanceDemo",new Er("Instanced Drawing",void 0,Br)),ot("simplificationDemo",new Er("Simplification",void 0,Ur)),ot("helloWorldDemo",new Er("Hello World",!0,Vr)),ot("helloGltfDemo",new Er("Hello glTF",!0,Gr))]);var o,r,a=this.dbgOverlay_0.ui,l=Or();a.isVisible=null!=(r="boolean"==typeof(o=l.demoProps.get_11rb$("dbgOverlay.isVisible"))?o:null)&&r;var u=t.scenes,p=this.dbgOverlay_0.ui;u.add_11rb$(p);var c=t.scenes,h=this.demoOverlay_0(t);c.add_11rb$(h);var d=t.onRender,f=ui("onRender",function(t,e){return t.onRender_0(e),s}.bind(null,this));d.add_11rb$(f);var _,m=this.demos_0,$=i,y=(null!=(n=(e.isType(_=m,_i)?_:Q()).get_11rb$($))?n:this.defaultScene_0).sceneLoader(t);I(this.newScenes_0,y.setupScenes_aemszp$(t)),t.run()}function zr(t){return new Ze}function kr(t){return t.componentUi_mloaa0$(zr),t.containerUi_2t3ptw$(ui("BlurredComponentUi",(function(t){return new li(t)}))),s}function Sr(t,e,i,n,o){return function(r){r.layoutSpec.setOrigin_4ujscr$(pt(),Ge(t.v,!0),pt()),r.layoutSpec.setSize_4ujscr$(ct(100,!0),Ge(30,!0),ht()),r.textAlignment=new ft(dt.START,dt.CENTER),t.v-=35;var a=r.onClick,l=function(t,e,i,n){return function(o,r,a,l){var u=t.sceneLoader(e);return I(i.newScenes_0,u.setupScenes_aemszp$(e)),n.isOpen=!1,s}}(e,i,n,o);return a.add_11rb$(l),s}}function Cr(t){return function(e){e.layoutSpec.setOrigin_4ujscr$(pt(),Ge(10,!0),pt()),e.layoutSpec.setSize_4ujscr$(ct(100,!0),Ge(30,!0),ht()),e.text="Debug Info",e.isEnabled=t.dbgOverlay_0.ui.isVisible;var i=e.onStateChange,n=function(t){return function(e){return t.dbgOverlay_0.ui.isVisible=e.isEnabled,s}}(t);return i.add_11rb$(n),s}}function Nr(t,e,i){return function(n){return n.unaryPlus_uv0sim$(i.container_t34sov$("demos",function(t,e,i,n){return function(o){o.ui.setCustom_11rb$(new Ze),o.layoutSpec.setOrigin_4ujscr$(pt(),Ge(45,!0),pt()),o.layoutSpec.setSize_4ujscr$(ht(),ct(100,!0).minus_m986jv$(Ge(110,!0)),ht());var r,a,l={v:-30},u=t.demos_0.values,p=M();for(r=u.iterator();r.hasNext();){var c=r.next();c.isHidden||p.add_11rb$(c)}for(a=p.iterator();a.hasNext();){var h=a.next(),d=e,f=t,_=i;o.unaryPlus_uv0sim$(n.button_9zrh0o$(h.label,Sr(l,h,d,f,_)))}return s}}(t,e,n,i))),n.unaryPlus_uv0sim$(i.toggleButton_6j87po$("showDbg",Cr(t))),s}}function Er(t,e,i){void 0===e&&(e=!1),this.label=t,this.isHidden=e,this.sceneLoader=i}function Tr(){Pr=this,this.demoProps=vt()}nr.$metadata$={kind:P,simpleName:"DeferredDemo",interfaces:[Kr]},wr.prototype.onRender_0=function(t){if(!this.newScenes_0.isEmpty()){var e,i,n;for(e=this.currentScenes_0.iterator();e.hasNext();){var o=e.next();t.scenes.remove_11rb$(o),o.dispose_aemszp$(t)}this.currentScenes_0.clear();var r=0;for(i=this.newScenes_0.iterator();i.hasNext();){var s=i.next();t.scenes.add_wxm5ur$(Ue((r=(n=r)+1|0,n)),s),this.currentScenes_0.add_11rb$(s)}this.newScenes_0.clear()}},wr.prototype.demoOverlay_0=function(t){return Ve(t.screenDpi,"demo-overlay",void 0,(e=this,i=t,function(t,n){return t.theme=Je(Ye.Companion.DARK,kr),t.content.ui.setCustom_11rb$(new Ze),t.unaryPlus_63m4fk$(t.drawerMenu_enmky4$("menu","Demos",void 0,Nr(e,i,t))),s}));var e,i},Er.$metadata$={kind:P,simpleName:"DemoEntry",interfaces:[]},Object.defineProperty(Tr.prototype,"awsBaseUrl",{configurable:!0,get:function(){var t,e;return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("awsBaseUrl"))?t:null)?e:"https://fabmax-kool-pbr.s3.eu-central-1.amazonaws.com"}}),Object.defineProperty(Tr.prototype,"envMapBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/hdri";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.envMaps"))?t:null)?e:i}}),Object.defineProperty(Tr.prototype,"pbrBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/materials";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.materials"))?t:null)?e:i}}),Object.defineProperty(Tr.prototype,"modelBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/models";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.models"))?t:null)?e:i}}),Tr.prototype.setProperty_bm4g0d$=function(t,e){this.demoProps.put_xwzc9p$(t,e)},Tr.prototype.getProperty_umlfku$=pi("kool-kool-demo.de.fabmax.kool.demo.Demo.Companion.getProperty_umlfku$",(function(t,e,i,n){var o,r;return null!=(r=e(o=this.demoProps.get_11rb$(i))?o:null)?r:n})),Tr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Pr=null;function Or(){return null===Pr&&new Tr,Pr}function Mr(t){return new Xr}function jr(t){return new bn}function Ar(t){return new au}function Ir(t){return new Xr}function Rr(t){return new nr}function Lr(t){return new ln}function Dr(t){return new Os}function qr(t){return new Js}function Fr(t){return new Nu}function Br(t){return new xs}function Ur(t){return new $u}function Vr(t){return new us}function Gr(t){return new ps}function Hr(t){this.$delegate_ubybqq$_0=t,this.index=0}function Wr(t,e){return e=e||Object.create(Hr.prototype),Hr.call(e,se(t.slice())),e}function Kr(t){this.name=t,this.scenes=M(),this.mainScene_w78jla$_0=this.mainScene_w78jla$_0,this.menuScene=null}function Xr(){Kr.call(this,"glTF Models"),this.foxAnimator_0=new ls(this);var t,e=new os(this,"Flight Helmet",Or().modelBasePath+"/flight_helmet/FlightHelmet.gltf",4,$.Companion.ZERO,!1,new Lt(0,1.25,0),!1,3.5),i=new os(this,"Polly",Or().modelBasePath+"/project_polly_jpg.glb",3,$.Companion.ZERO,!1,new Lt(0,1.25,0),!1,3.5),n=new os(this,"Coffee Cart",Or().modelBasePath+"/CoffeeCart_01.glb",2,new $(0,-.01,0),!1,new Lt(0,1.75,0),!1,3.5),o=new os(this,"Camera",Or().modelBasePath+"/camera.glb",20,$.Companion.ZERO,!0,new Lt(0,.5,0),!1,5),r=new os(this,"Fox",Or().modelBasePath+"/fox.glb",.01,$.Companion.ZERO,!1,new Lt(0,1.25,0),!0,3.5);r.animate=(t=this,function(e,i,n){return t.foxAnimator_0.animate_t7fsfh$(e,n),s}),this.models_0=Wr([e,i,n,o,r,new os(this,"Animated Box",Or().modelBasePath+"/BoxAnimated.gltf",1,new $(0,.5,0),!1,new Lt(0,1.5,0),!1,5),new os(this,"Morph Cube",Or().modelBasePath+"/AnimatedMorphCube.glb",1,new $(0,1,0),!1,new Lt(0,1,0),!1,3.5),new os(this,"Alpha Mode Test",Or().modelBasePath+"/AlphaBlendModeTest.glb",.5,new $(0,.06,0),!1,new Lt(0,.75,0),!1,3.5)]),this.orbitTransform_w8joii$_0=this.orbitTransform_w8joii$_0,this.camTranslationTarget_0=null,this.trackModel_0=!1,this.envMaps_wlbbl4$_0=this.envMaps_wlbbl4$_0,this.shadowsForward_0=M(),this.aoPipelineForward_0=null,this.contentGroupForward_0=new Z,this.deferredPipeline_kn30ex$_0=this.deferredPipeline_kn30ex$_0,this.contentGroupDeferred_0=new Z,this.animationSpeed_0=.5,this.animationTime_0=0,this.autoRotate_0=!0,this.useDeferredPipeline_0=!0,this.isAo_ct9a5s$_0=!0}function Yr(t,e,i,n,o,r){z.call(this,r),this.$controller=o,this.exceptionState_0=1,this.local$this$=t,this.local$this$GltfDemo=e,this.local$closure$ctx=i,this.local$$receiver=n}function Zr(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$ctx=i}function Jr(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$ctx=i}function Qr(t,e){return function(i){i.setMouseRotation_dleff0$(0,-30),i.unaryPlus_uv0sim$(t.camera),i.zoom=e.models_0.current.zoom,i.translation.set_czzhiw$(e.models_0.current.lookAt);var n=i.onUpdate,o=function(t,e){return function(i,n){var o,r={v:t.camTranslationTarget_0};if(t.trackModel_0){var a=t.models_0.current.forwardModel;if(null!=a){var l=a.globalCenter;r.v=new Lt(l.x,l.y,l.z)}}else t.autoRotate_0&&(e.verticalRotation-=3*n.deltaT);if(null!=(o=r.v)){var u=e,p=t,c=Dt(u.translation).scale_14dthe$(.9).add_czzhiw$(Dt(o).scale_14dthe$(.1));u.translation.set_czzhiw$(c),c.distance_czzhiw$(o)<.01&&(p.camTranslationTarget_0=null)}return s}}(e,i);return n.add_11rb$(o),s}}function ts(t,e,i){return function(n,o){return t.autoRotate_0&&(e.setIdentity(),e.rotate_5820x2$(3*i.time,Lt.Companion.Y_AXIS)),s}}function es(t,e){return function(i){var n;i.generate_v2sixm$(function(t){return function(e){return t.roundCylinder_0(e,4.1,.2),s}}(t));var o,r,a=new Ft,l=t;e||(I(a.shadowMaps,l.shadowsForward_0),a.useScreenSpaceAmbientOcclusion_vv6xll$(null!=(o=l.aoPipelineForward_0)?o.aoMap:null),a.useImageBasedLighting_po417x$(l.envMaps_0)),a.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/Fabric030/Fabric030_1K_Color2.jpg"),a.useNormalMap_9sobi5$(Or().pbrBasePath+"/Fabric030/Fabric030_1K_Normal.jpg"),a.useOcclusionMap_9sobi5$(Or().pbrBasePath+"/Fabric030/Fabric030_1K_AmbientOcclusion.jpg"),a.useRoughnessMap_ivxn3r$(Or().pbrBasePath+"/Fabric030/Fabric030_1K_Roughness.jpg"),i.onDispose.add_11rb$((r=a,function(t,e){var i,n,o,a;return null!=(i=r.albedoMap)&&i.dispose(),null!=(n=r.normalMap)&&n.dispose(),null!=(o=r.roughnessMap)&&o.dispose(),null!=(a=r.occlusionMap)&&a.dispose(),s}));var u=a;return n=e?new Bt(u):new mi(u),i.shader=n,s}}function is(t,e,i,n,o){z.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$$receiver=e,this.local$isDeferredShading=i,this.local$ctx=n}function ns(t,e){return function(i){return i.cycler_4ni5b8$("Model:",t.models_0,function(t,e){return function(i,n){return e.cycleModel_0(n,i,t),s}}(e,t)),i.sliderWithValue_xbu91d$("Animation Speed:",t.animationSpeed_0,0,1,2,void 0,function(t){return function(e){return t.animationSpeed_0=e.value,s}}(t)),i.toggleButton_8v9fdr$("Deferred Shading",t.useDeferredPipeline_0,function(t){return function(e){return t.useDeferredPipeline_0=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.toggleButton_8v9fdr$("Ambient Occlusion",t.isAo_0,function(t){return function(e){return t.isAo_0=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.toggleButton_8v9fdr$("Screen Space Reflections",!0,function(t){return function(e){return t.deferredPipeline_0.isSsrEnabled=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.sliderWithValue_xbu91d$("SSR Map Size:",.7,.1,1,1,void 0,function(t){return function(e){return t.deferredPipeline_0.reflectionMapSize=D(10*e.value)/10,s}}(t)),i.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),s}}function os(t,e,i,n,o,r,s,a,l){this.$outer=t,this.name=e,this.assetPath=i,this.scale=n,this.translation=o,this.generateNormals=r,this.lookAt=s,this.trackModel=a,this.zoom=l,this.forwardModel=null,this.deferredModel=null,this.isVisible=!1,this.animate=as}function rs(t,e,i,n){return function(o,r){return o.isVisible=t.isVisible,t.animate(n,e.animationTime_0,i),s}}function ss(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$model=void 0,this.local$isDeferredShading=e,this.local$ctx=i}function as(t,e,i){return t.applyAnimation_14dthe$(e),s}function ls(t){this.$outer=t,this.angle=0,this.radius=3,this.position=gi()}function us(){Kr.call(this,"Hello World")}function ps(){Kr.call(this,"Hello glTF")}function cs(t){var e=new ri;return e.colored_6taknv$(),e.centered(),t.cube_lhbb6w$(e),s}function hs(t){return t.albedoSource=y.VERTEX_ALBEDO,t.metallic=0,t.roughness=.25,s}function ds(t){return t.generate_v2sixm$(cs),t.shader=v(hs),s}function fs(t){return t.setDirectional_czzhiu$(new $(-1,-1,-1)),t.setColor_y83vuj$(m.Companion.WHITE,5),s}function _s(){var t=new L(null);return Pe(t),t.unaryPlus_uv0sim$(g(void 0,ds)),t.lighting.singleLight_q9zcvo$(fs),t}function ms(t){return t.setSpot_nve3wz$(new $(5,6.25,7.5),new $(-1,-1.25,-1.5),45),t.setColor_y83vuj$(m.Companion.WHITE,300),s}function $s(t){var e=new bi;return t.grid_gtbnl3$(e),s}function ys(t,e){return function(i){return i.generate_v2sixm$($s),i.shader=v(function(t,e){return function(i){return i.useStaticAlbedo_d7aj7k$(m.Companion.WHITE),i.useScreenSpaceAmbientOcclusion_vv6xll$(t.aoMap),I(i.shadowMaps,e),s}}(t,e)),s}}function vs(t){return function(e,i){return t.applyAnimation_14dthe$(i.time),s}}function gs(t,e,i,n,o,r){z.call(this,r),this.$controller=o,this.exceptionState_0=1,this.local$closure$shadows=t,this.local$closure$aoPipeline=e,this.local$this$=i,this.local$$receiver=n}function bs(t){var e=new L(null);Pe(e),e.lighting.singleLight_q9zcvo$(ms);var i,n,o,r=Me(new l(e,0)),s=u.Companion.createForward_ushge7$(e);return e.unaryPlus_uv0sim$(g(void 0,ys(s,r))),t.assetMgr.launch_eln4bt$((i=r,n=s,o=e,function(t,e,r){var s=new gs(i,n,o,t,this,e);return r?s:s.doResume(null)})),e}function xs(){Kr.call(this,"Instanced Drawing"),this.nBunnies_0=10,this.isLodColors_0=!1,this.isAutoRotate_0=!0,this.modelCenter_0=oi(),this.modelRadius_0=1,this.lodController_0=new Ei,this.lods_0=Ti([new Ss(8,10,Ee(m.Companion.MD_PURPLE)),new Ss(32,20,Ee(m.Companion.MD_RED)),new Ss(128,30,Ee(m.Companion.MD_AMBER)),new Ss(500,40,Ee(m.Companion.MD_LIME)),new Ss(2e3,50,Ee(m.Companion.MD_GREEN)),new Ss(1e4,1e3,Ee(m.Companion.MD_BLUE))])}function ws(t,i){return function(n){var o=t.camera;e.isType(o,J)||Q(),o.clipNear=1,o.clipFar=500,n.unaryPlus_uv0sim$(o),n.minZoom=1,n.maxZoom=250,n.zoomMethod=xi.ZOOM_CENTER,n.zoom=40,n.setMouseRotation_dleff0$(30,-40);var r=n.onUpdate,a=function(t,e){return function(i,n){return t.isAutoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(i,n);return r.add_11rb$(a),s}}function zs(t){return t.setDirectional_czzhiu$(wi(-1)),t.setColor_y83vuj$(m.Companion.WHITE,5),s}function ks(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$InstanceDemo=t,this.local$$receiver=e}function Ss(t,e,i){this.maxInsts=t,this.maxDist=e,this.color=i,this.mesh=null}function Cs(t,e,i){this.$outer=t,Ni.call(this),this.position=e,this.rotSpeed=120*i.length(),this.rotAxis=i.norm_5s4mqq$(oi()),this.color=ei()}function Ns(t){var i=D(t);return e.imul(e.imul(i,i),i).toString()}function Es(t){return function(e){var i=Ns;return e.sliderWithValue_xbu91d$("Bunnies:",t.nBunnies_0,5,20,void 0,i,function(t){return function(e){var i=D(e.value);return i!==t.nBunnies_0&&(t.nBunnies_0=i,t.setupInstances_0(t.lodController_0)),s}}(t)),e.toggleButton_8v9fdr$("Color by LOD",t.isLodColors_0,function(t){return function(e){return t.isLodColors_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Auto Rotate",t.isAutoRotate_0,function(t){return function(e){return t.isAutoRotate_0=e.isEnabled,s}}(t)),s}}function Ts(t,i,n){return function(o,r){var a,l,u,p=t.lodController_0.getInstanceCount_za3lpa$(i),c=e.imul(p,null!=(u=null!=(l=null!=(a=t.lods_0.get_za3lpa$(i).mesh)?a.geometry:null)?l.numPrimitives:null)?u:0);return n.text=p.toString()+" insts / "+c+" tris",s}}function Ps(t){return function(e){return e.section_yfmn31$("Scene",Es(t)),e.section_yfmn31$("Info",function(t){return function(e){var i;i=t.lods_0;for(var n=0;n!==i.size;++n){var o=e.textWithValue_puj7f4$("LOD "+n+":",""),r=t;o.onUpdate.add_11rb$(Ts(r,n,o))}return s}}(t)),s}}function Os(){Ws(),Kr.call(this,"Reflections"),this.deferredPipeline_v7oinh$_0=this.deferredPipeline_v7oinh$_0,this.lights_0=se([new Bs(this,m.Companion.MD_CYAN),new Bs(this,m.Companion.MD_RED),new Bs(this,m.Companion.MD_AMBER),new Bs(this,m.Companion.MD_GREEN)]),this.noSsrMap_0=new Mi(new m(0,0,0,0)),this.lightCount_0=4,this.lightPower_0=500,this.lightSaturation_0=.4,this.lightRandomness_0=.3,this.isScrSpcReflections_0=!0,this.autoRotate_0=!0,this.showLightIndicators_0=!0;var t=new Hr(Ws().matColors_0);t.index=1,this.colorCycler_0=t,this.roughness_0=.1,this.metallic_0=0,this.bunnyMesh_0=null,this.groundMesh_0=null,this.modelShader_0=null}function Ms(t,e){return function(i){i.unaryPlus_uv0sim$(t.camera),i.zoomMethod=xi.ZOOM_CENTER,i.zoom=17,i.maxZoom=50,i.translation.set_yvo9jy$(0,2,0),i.setMouseRotation_dleff0$(0,-5);var n=i.onUpdate,o=function(t,e){return function(i,n){return t.autoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(e,i);return n.add_11rb$(o),s}}function js(t,e,i){return function(n,o){return t.dispose(),e.dispose(),i.dispose(),s}}function As(t){var e=new R;return t.rotate_ad55pp$(-90,$.Companion.X_AXIS),e.size.set_dleff0$(100,100),e.origin.set_y2kzbl$(-e.size.x/2,-e.size.y/2,0),e.generateTexCoords_mx4ult$(4),t.rect_e5k3t5$(e),s}function Is(t,e,i,n){return function(o){o.generate_v2sixm$(As),o.isCastingShadow=!1,t.groundMesh_0=o;var r=new Ft,a=e,l=i,u=n;return r.useAlbedoMap_daqygw$(a),r.useNormalMap_9wkq18$(l),r.useRoughnessMap_daqygw$(u),o.shader=new Bt(r),s}}function Rs(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$MultiLightDemo=e,this.local$floorAlbedo=void 0,this.local$floorNormal=void 0,this.local$$receiver=i}function Ls(t){return function(e){var i=Wr([1,2,3,4]);return i.index=3,e.cycler_4ni5b8$("Lights:",i,function(t){return function(e,i){return t.lightCount_0=e,t.updateLighting_0(),s}}(t)),e.sliderWithValue_xbu91d$("Strength:",t.lightPower_0,0,1e3,0,void 0,function(t){return function(e){return t.lightPower_0=e.value,t.updateLighting_0(),s}}(t)),e.sliderWithValue_xbu91d$("Saturation:",t.lightSaturation_0,0,1,void 0,void 0,function(t){return function(e){return t.lightSaturation_0=e.value,t.updateLighting_0(),s}}(t)),s}}function Ds(t,e){return function(i){return i.toggleButton_8v9fdr$("Enabled",t.deferredPipeline_0.isSsrEnabled,function(t){return function(e){return t.deferredPipeline_0.isSsrEnabled=e.isEnabled,s}}(t)),i.toggleButton_8v9fdr$("Show SSR Map",e.isVisible,function(t){return function(e){return t.isVisible=e.isEnabled,s}}(e)),i.sliderWithValue_xbu91d$("Map Size:",t.deferredPipeline_0.reflectionMapSize,.1,1,1,void 0,function(t){return function(e){return t.deferredPipeline_0.reflectionMapSize=D(10*e.value)/10,s}}(t)),s}}function qs(t){return function(e){return e.cycler_4ni5b8$("Color:",t.colorCycler_0,function(t){return function(e,i){var n;return null!=(n=t.modelShader_0)&&(n.albedo=e.linColor),s}}(t)),e.sliderWithValue_xbu91d$("Roughness:",t.roughness_0,0,1,void 0,void 0,function(t){return function(e){var i;return t.roughness_0=e.value,null!=(i=t.modelShader_0)&&(i.roughness=e.value),s}}(t)),e.sliderWithValue_xbu91d$("Metallic:",t.metallic_0,0,1,void 0,void 0,function(t){return function(e){var i;return t.metallic_0=e.value,null!=(i=t.modelShader_0)&&(i.metallic=e.value),s}}(t)),s}}function Fs(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Light Indicators",t.showLightIndicators_0,function(t){return function(e){return t.showLightIndicators_0=e.isEnabled,t.updateLighting_0(),s}}(t)),s}}function Bs(t,e){this.$outer=t,Z.call(this),this.color=e,this.light=new yt;var i=new Pi;i.isCastingShadow=!1,this.spotAngleMesh_0=i,this.isEnabled_0=!0,this.animPos_0=0,this.lightMeshShader_0=new Oi,this.meshPos_0=oi(),this.anglePos_0=0,this.rotOff_0=zi(0,3),this.light.setSpot_nve3wz$($.Companion.ZERO,$.Companion.X_AXIS,50);var n,o=g(void 0,(n=this,function(t){return t.isCastingShadow=!1,t.generate_v2sixm$(Us),t.shader=n.lightMeshShader_0,s}));this.unaryPlus_uv0sim$(o),this.unaryPlus_uv0sim$(this.spotAngleMesh_0);var r=this.onUpdate,a=function(t,e){return function(i,n){t.autoRotate_0&&(e.animPos_0+=n.deltaT);var o=e.animPos_0/15+e.rotOff_0,r=j.cos(o)*t.lightRandomness_0;return e.light.spotAngle=60-20*r,e.updateSpotAngleMesh_0(),e.setIdentity(),e.rotate_ad55pp$(-10*e.animPos_0,$.Companion.Y_AXIS),e.translate_czzhiu$(e.meshPos_0),e.rotate_ad55pp$(e.anglePos_0,$.Companion.Y_AXIS),e.rotate_ad55pp$(30+20*r,$.Companion.Z_AXIS),e.transform.transform_w1lst9$(e.light.position.set_czzhiu$($.Companion.ZERO),1),e.transform.transform_w1lst9$(e.light.direction.set_czzhiu$($.Companion.NEG_X_AXIS),0),s}}(this.$outer,this);r.add_11rb$(a)}function Us(t){var e=(new gt).uvDefaults();e.radius=.1,t.uvSphere_mojs8w$(e),t.rotate_ad55pp$(90,$.Companion.Z_AXIS);var i=new ji;i.bottomRadius=.015,i.topRadius=.015,i.height=.85,i.steps=4,t.cylinder_tnt2h$(i),t.translate_y2kzbl$(0,.85,0);var n=new ji;return n.bottomRadius=.1,n.topRadius=.0025,n.height=.15,t.cylinder_tnt2h$(n),s}function Vs(t,e){this.name=t,this.linColor=e}function Gs(){Hs=this,this.matColors_0=se([new Vs("White",m.Companion.WHITE.toLinear()),new Vs("Red",m.Companion.MD_RED.toLinear()),new Vs("Pink",m.Companion.MD_PINK.toLinear()),new Vs("Purple",m.Companion.MD_PURPLE.toLinear()),new Vs("Deep Purple",m.Companion.MD_DEEP_PURPLE.toLinear()),new Vs("Indigo",m.Companion.MD_INDIGO.toLinear()),new Vs("Blue",m.Companion.MD_BLUE.toLinear()),new Vs("Cyan",m.Companion.MD_CYAN.toLinear()),new Vs("Teal",m.Companion.MD_TEAL.toLinear()),new Vs("Green",m.Companion.MD_GREEN.toLinear()),new Vs("Light Green",m.Companion.MD_LIGHT_GREEN.toLinear()),new Vs("Lime",m.Companion.MD_LIME.toLinear()),new Vs("Yellow",m.Companion.MD_YELLOW.toLinear()),new Vs("Amber",m.Companion.MD_AMBER.toLinear()),new Vs("Orange",m.Companion.MD_ORANGE.toLinear()),new Vs("Deep Orange",m.Companion.MD_DEEP_ORANGE.toLinear()),new Vs("Brown",m.Companion.MD_BROWN.toLinear()),new Vs("Grey",m.Companion.MD_GREY.toLinear()),new Vs("Blue Grey",m.Companion.MD_BLUE_GREY.toLinear()),new Vs("Almost Black",new m(.1,.1,.1).toLinear())])}wr.$metadata$={kind:P,simpleName:"Demo",interfaces:[]},Object.defineProperty(Hr.prototype,"current",{configurable:!0,get:function(){return this.get_za3lpa$(this.index)}}),Hr.prototype.next=function(){return this.index=(this.index+1|0)%this.size,this.current},Hr.prototype.prev=function(){return this.index=(this.index+this.size-1+this.size|0)%this.size,this.current},Object.defineProperty(Hr.prototype,"size",{get:function(){return this.$delegate_ubybqq$_0.size}}),Hr.prototype.contains_11rb$=function(t){return this.$delegate_ubybqq$_0.contains_11rb$(t)},Hr.prototype.containsAll_brywnq$=function(t){return this.$delegate_ubybqq$_0.containsAll_brywnq$(t)},Hr.prototype.get_za3lpa$=function(t){return this.$delegate_ubybqq$_0.get_za3lpa$(t)},Hr.prototype.indexOf_11rb$=function(t){return this.$delegate_ubybqq$_0.indexOf_11rb$(t)},Hr.prototype.isEmpty=function(){return this.$delegate_ubybqq$_0.isEmpty()},Hr.prototype.iterator=function(){return this.$delegate_ubybqq$_0.iterator()},Hr.prototype.lastIndexOf_11rb$=function(t){return this.$delegate_ubybqq$_0.lastIndexOf_11rb$(t)},Hr.prototype.listIterator=function(){return this.$delegate_ubybqq$_0.listIterator()},Hr.prototype.listIterator_za3lpa$=function(t){return this.$delegate_ubybqq$_0.listIterator_za3lpa$(t)},Hr.prototype.subList_vux9f0$=function(t,e){return this.$delegate_ubybqq$_0.subList_vux9f0$(t,e)},Hr.$metadata$={kind:P,simpleName:"Cycler",interfaces:[fi]},Object.defineProperty(Kr.prototype,"mainScene",{configurable:!0,get:function(){return null==this.mainScene_w78jla$_0?r("mainScene"):this.mainScene_w78jla$_0},set:function(t){this.mainScene_w78jla$_0=t}}),Kr.prototype.setupScenes_aemszp$=function(t){var e;this.mainScene=this.setupMainScene_aemszp$(t);var i=this.scenes,n=this.mainScene;return i.add_11rb$(n),this.menuScene=this.setupMenu_aemszp$(t),null!=(e=this.menuScene)&&this.scenes.add_11rb$(e),this.lateInit_aemszp$(t),this.scenes},Kr.prototype.setupMenu_aemszp$=function(t){return null},Kr.prototype.lateInit_aemszp$=function(t){},Kr.$metadata$={kind:P,simpleName:"DemoScene",interfaces:[]},Object.defineProperty(Xr.prototype,"orbitTransform_0",{configurable:!0,get:function(){return null==this.orbitTransform_w8joii$_0?r("orbitTransform"):this.orbitTransform_w8joii$_0},set:function(t){this.orbitTransform_w8joii$_0=t}}),Object.defineProperty(Xr.prototype,"envMaps_0",{configurable:!0,get:function(){return null==this.envMaps_wlbbl4$_0?r("envMaps"):this.envMaps_wlbbl4$_0},set:function(t){this.envMaps_wlbbl4$_0=t}}),Object.defineProperty(Xr.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_kn30ex$_0?r("deferredPipeline"):this.deferredPipeline_kn30ex$_0},set:function(t){this.deferredPipeline_kn30ex$_0=t}}),Object.defineProperty(Xr.prototype,"isAo_0",{configurable:!0,get:function(){return this.isAo_ct9a5s$_0},set:function(t){this.isAo_ct9a5s$_0=t,this.deferredPipeline_0.isAoEnabled=t}}),Xr.prototype.lateInit_aemszp$=function(t){this.models_0.current.isVisible=!0,this.trackModel_0=this.models_0.current.trackModel},Yr.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Yr.prototype=Object.create(z.prototype),Yr.prototype.constructor=Yr,Yr.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,Or().envMapBasePath+"/shanghai_bund_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.local$this$GltfDemo.envMaps_0=this.result_0,this.local$this$.unaryPlus_uv0sim$(x.Skybox.cube_wgmpek$(this.local$this$GltfDemo.envMaps_0.reflectionMap,1)),this.state_0=3,this.result_0=this.local$this$GltfDemo.makeDeferredContent_0(this.local$this$,this.local$closure$ctx,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$GltfDemo.makeForwardContent_0(this.local$this$,this.local$closure$ctx,this),this.result_0===w)return w;continue;case 4:return this.local$this$GltfDemo.setupPipelines_0(),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Xr.prototype.setupMainScene_aemszp$=function(t){var e,i,n,o,r,a=new L("gltfDemo");return this.setupLighting_0(a),this.setupCamera_0(a),t.assetMgr.launch_eln4bt$((e=a,i=this,n=t,function(t,o,r){var s=new Yr(e,i,n,t,this,o);return r?s:s.doResume(null)})),a.onUpdate.add_11rb$((o=t,r=this,function(t,e){return r.animationTime_0+=o.deltaT*r.animationSpeed_0,r.foxAnimator_0.updatePosition_aemszp$(o),s})),a},Xr.prototype.setupPipelines_0=function(){var t,e,i=this.useDeferredPipeline_0,n=!i;for(this.contentGroupForward_0.isVisible=n,e=this.shadowsForward_0.iterator();e.hasNext();)e.next().isShadowMapEnabled=n;null!=(t=this.aoPipelineForward_0)&&(t.isEnabled=n&&this.isAo_0),this.contentGroupDeferred_0.isVisible=i,this.deferredPipeline_0.isEnabled=i,this.deferredPipeline_0.isAoEnabled=this.isAo_0},Zr.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Zr.prototype=Object.create(z.prototype),Zr.prototype.constructor=Zr,Zr.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=u.Companion.createForward_ushge7$(this.local$$receiver);if(t.radius=.2,this.$this.aoPipelineForward_0=t,I(this.$this.shadowsForward_0,se([new l(this.local$$receiver,0,2048,this.$this.contentGroupForward_0),new l(this.local$$receiver,1,2048,this.$this.contentGroupForward_0)])),this.state_0=2,this.result_0=this.$this.setupContentGroup_0(this.$this.contentGroupForward_0,!1,this.local$ctx,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return void this.local$$receiver.unaryPlus_uv0sim$(this.$this.contentGroupForward_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Xr.prototype.makeForwardContent_0=function(t,e,i,n){var o=new Zr(this,t,e,i);return n?o:o.doResume(null)},Jr.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Jr.prototype=Object.create(z.prototype),Jr.prototype.constructor=Jr,Jr.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,e=new X;e.isWithAmbientOcclusion=!0,e.isWithScreenSpaceReflections=!0,e.isWithEmissive=!0,e.baseReflectionStep=.02,e.maxGlobalLights=2,e.useImageBasedLighting_po417x$(this.$this.envMaps_0);var i=e;if(this.$this.deferredPipeline_0=new Y(this.local$$receiver,i),null!=(t=this.$this.deferredPipeline_0.aoPipeline)&&(t.radius=.2),this.state_0=2,this.result_0=this.$this.setupContentGroup_0(this.$this.deferredPipeline_0.contentGroup,!0,this.local$ctx,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var n=this.$this.contentGroupDeferred_0;return n.isFrustumChecked=!1,n.unaryPlus_uv0sim$(this.$this.deferredPipeline_0.renderOutput),void this.local$$receiver.unaryPlus_uv0sim$(n);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Xr.prototype.makeDeferredContent_0=function(t,e,i,n){var o=new Jr(this,t,e,i);return n?o:o.doResume(null)},Xr.prototype.setupCamera_0=function(t){this.orbitTransform_0=a(t,void 0,Qr(t,this)),t.unaryPlus_uv0sim$(this.orbitTransform_0)},Xr.prototype.setupLighting_0=function(t){t.lighting.lights.clear();var e=t.lighting.lights,i=new yt,n=new $(7,8,8),o=$.Companion.ZERO;i.setSpot_nve3wz$(n,o.subtract_2gj7b4$(n,oi()).norm(),25),i.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.3).toLinear(),500),e.add_11rb$(i);var r=t.lighting.lights,s=new yt,a=new $(-7,8,8),l=$.Companion.ZERO;s.setSpot_nve3wz$(a,l.subtract_2gj7b4$(a,oi()).norm(),25),s.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.3).toLinear(),500),r.add_11rb$(s)},is.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},is.prototype=Object.create(z.prototype),is.prototype.constructor=is,is.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:this.local$$receiver.rotate_5820x2$(-60,Lt.Companion.Y_AXIS),this.local$$receiver.onUpdate.add_11rb$(ts(this.$this,this.local$$receiver,this.local$ctx)),this.local$$receiver.unaryPlus_uv0sim$(b(void 0,!0,es(this.$this,this.local$isDeferredShading))),this.local$tmp$=this.$this.models_0.iterator(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(!this.local$tmp$.hasNext()){this.state_0=4;continue}var t,e=this.local$tmp$.next();if(this.state_0=3,this.result_0=e.load_ggm1l6$(this.local$isDeferredShading,this.local$ctx,this),this.result_0===w)return w;continue;case 3:null!=(t=this.result_0)&&this.local$$receiver.unaryPlus_uv0sim$(t),this.state_0=2;continue;case 4:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Xr.prototype.setupContentGroup_0=function(t,e,i,n,o){var r=new is(this,t,e,i,n);return o?r:r.doResume(null)},Xr.prototype.cycleModel_0=function(t,e,i){var n,o;t.isVisible=!1,i.runDelayed_hd6vpk$(1,(n=t,o=i,function(t){var e,i;return null!=(e=n.forwardModel)&&e.dispose_aemszp$(o),null!=(i=n.deferredModel)&&i.dispose_aemszp$(o),s})),e.isVisible=!0,this.orbitTransform_0.zoom=e.zoom,this.camTranslationTarget_0=e.lookAt,this.trackModel_0=e.trackModel},Xr.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,i=t,function(t){return t.section_yfmn31$("glTF models",ns(e,i)),s}));var e,i},Xr.prototype.roundCylinder_0=function(t,i,n){for(var o=n/2,r=M(),s=0;s<=20;s++){var a=Kt.PI/20*s,l=j.sin(a)*o+i,u=j.cos(a)*o-o,p=new $(l,u,0);r.add_11rb$(p)}for(var c={v:0},h=0;h<=100;h++){var d,f,_=Kt.PI/100*h*2,m=0;for(d=r.iterator();d.hasNext();){var y=d.next(),v=Ue((m=(f=m)+1|0,f)),g=new $i(i+v/r.size*Kt.PI*o,0);g.scale_mx4ult$(.3),g.rotate_mx4ult$(_*A.RAD_2_DEG);var b=y.rotate_vqa64j$(_*A.RAD_2_DEG,$.Companion.Y_AXIS,oi()),x=t.vertex_n440gp$(b,$.Companion.ZERO,g);h>0&&v>0&&(t.geometry.addTriIndices_qt1dr2$(x-1|0,x-r.size-1|0,x-r.size|0),t.geometry.addTriIndices_qt1dr2$(x,x-1|0,x-r.size|0)),0===h&&0===v&&(c.v=x)}}for(var w=c.v+r.size-1|0,z=2;z<=100;z++)t.geometry.addTriIndices_qt1dr2$(c.v,c.v+e.imul(z-1|0,r.size)|0,c.v+e.imul(z,r.size)|0),t.geometry.addTriIndices_qt1dr2$(w,w+e.imul(z,r.size)|0,w+e.imul(z-1|0,r.size)|0);t.geometry.generateNormals()},os.prototype.toString=function(){return this.name},ss.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ss.prototype=Object.create(z.prototype),ss.prototype.constructor=ss,ss.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.local$model={v:null},this.state_0=2,this.result_0=yi(this.local$ctx.assetMgr,this.$this.assetPath,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(null!=(t=this.result_0)){this.$this.$outer;var e,i,n=this.$this.$outer,o=new vi(this.local$isDeferredShading?n.deferredPipeline_0.shadowMaps:n.shadowsForward_0,this.local$isDeferredShading?null!=(e=n.deferredPipeline_0.aoPipeline)?e.aoMap:null:null!=(i=n.aoPipelineForward_0)?i.aoMap:null,n.envMaps_0,this.local$isDeferredShading),r=new c(this.$this.generateNormals,void 0,o,!0,!0,!0,!0,void 0,!0),s=t.makeModel_m0hq3v$(r);s.translate_czzhiu$(this.$this.translation),s.scale_mx4ult$(this.$this.scale),s.enableAnimation_za3lpa$(0),s.onUpdate.add_11rb$(rs(this.$this,n,this.local$ctx,s)),this.local$model.v=s}return this.local$isDeferredShading?this.$this.deferredModel=this.local$model.v:this.$this.forwardModel=this.local$model.v,this.local$model.v;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},os.prototype.load_ggm1l6$=function(t,e,i,n){var o=new ss(this,t,e,i);return n?o:o.doResume(null)},os.$metadata$={kind:P,simpleName:"GltfModel",interfaces:[]},ls.prototype.updatePosition_aemszp$=function(t){var e=2*this.$outer.animationSpeed_0;this.angle+=e*t.deltaT/this.radius},ls.prototype.animate_t7fsfh$=function(t,e){if(this.$outer.animationSpeed_0<.5){var i=2*this.$outer.animationSpeed_0,n=1-i;t.setAnimationWeight_24o109$(0,n),t.setAnimationWeight_24o109$(1,i),t.setAnimationWeight_24o109$(2,0)}else{var o=2*(this.$outer.animationSpeed_0-.5),r=1-o;t.setAnimationWeight_24o109$(0,0),t.setAnimationWeight_24o109$(1,r),t.setAnimationWeight_24o109$(2,o)}t.applyAnimation_14dthe$(e.time),t.setIdentity(),this.position.set_yvo9jy$(this.radius,0,0).rotate_5820x2$(this.angle*A.RAD_2_DEG,Lt.Companion.Y_AXIS),t.translate_czzhiw$(this.position),t.rotate_5820x2$(this.angle*A.RAD_2_DEG+180,Lt.Companion.Y_AXIS),t.scale_14dthe$(.01)},ls.$metadata$={kind:P,simpleName:"FoxAnimator",interfaces:[]},Xr.$metadata$={kind:P,simpleName:"GltfDemo",interfaces:[Kr]},us.prototype.setupMainScene_aemszp$=function(t){return _s()},us.$metadata$={kind:P,simpleName:"HelloWorldDemo",interfaces:[Kr]},ps.prototype.setupMainScene_aemszp$=function(t){return bs(t)},ps.$metadata$={kind:P,simpleName:"HelloGltfDemo",interfaces:[Kr]},gs.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},gs.prototype=Object.create(z.prototype),gs.prototype.constructor=gs,gs.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,e=new vi(this.local$closure$shadows,this.local$closure$aoPipeline.aoMap),i=new c(void 0,void 0,e);if(this.state_0=2,this.result_0=h(this.local$$receiver,Or().modelBasePath+"/BoxAnimated.gltf",i,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var n;return null!=(t=this.result_0)?(this.local$this$.unaryPlus_uv0sim$(t),t.translate_y2kzbl$(0,.5,0),t.animations.isEmpty()||(t.enableAnimation_za3lpa$(0),t.onUpdate.add_11rb$(vs(t))),n=s):n=null,n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ks.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ks.prototype=Object.create(z.prototype),ks.prototype.constructor=ks,ks.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=yi(this.local$$receiver,Or().modelBasePath+"/bunny.gltf.gz",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var e;return null!=(t=this.result_0)?(this.local$this$InstanceDemo.addLods_0(t),e=s):e=null,e;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},xs.prototype.setupMainScene_aemszp$=function(t){var e,i=new L(null);return i.unaryPlus_uv0sim$(a(i,void 0,ws(i,this))),i.lighting.singleLight_q9zcvo$(zs),i.unaryPlus_uv0sim$(this.lodController_0),t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var o=new ks(e,t,this,i);return n?o:o.doResume(null)})),i},xs.prototype.addLods_0=function(t){var e;e=t.scenes;for(var i=0;i!==e.size;++i){var n,o=new c(!0,!1),r=f(t.makeModel_m0hq3v$(o,i).meshes.values),s=r.geometry;n=s.numVertices;for(var a=0;a<n;a++)s.vertexIt.index=a,s.vertexIt.position.scale_mx4ult$(.3).add_czzhiu$(new $(0,-1,0));r.geometry.rebuildBounds(),0===i&&(this.modelCenter_0.set_czzhiu$(r.geometry.bounds.center),this.modelRadius_0=r.geometry.bounds.max.distance_czzhiu$(r.geometry.bounds.center)),r.shader=this.instanceColorPbrShader_0(),r.isFrustumChecked=!1,this.lods_0.get_za3lpa$(i).mesh=r,r.instances=new Ne(se([Ne.Companion.MODEL_MAT,re.Companion.COLORS]),this.lods_0.get_za3lpa$(i).maxInsts),this.lodController_0.addLod_od45r7$(r,this.lods_0.get_za3lpa$(i).maxDist)}this.setupInstances_0(this.lodController_0)},xs.prototype.setupInstances_0=function(t){var e,i,n,o=se([m.Companion.WHITE.toLinear(),m.Companion.MD_RED.toLinear(),m.Companion.MD_PINK.toLinear(),m.Companion.MD_PURPLE.toLinear(),m.Companion.MD_DEEP_PURPLE.toLinear(),m.Companion.MD_INDIGO.toLinear(),m.Companion.MD_BLUE.toLinear(),m.Companion.MD_CYAN.toLinear(),m.Companion.MD_TEAL.toLinear(),m.Companion.MD_GREEN.toLinear(),m.Companion.MD_LIGHT_GREEN.toLinear(),m.Companion.MD_LIME.toLinear(),m.Companion.MD_YELLOW.toLinear(),m.Companion.MD_AMBER.toLinear(),m.Companion.MD_ORANGE.toLinear(),m.Companion.MD_DEEP_ORANGE.toLinear(),m.Companion.MD_BROWN.toLinear(),m.Companion.MD_GREY.toLinear(),m.Companion.MD_BLUE_GREY.toLinear()]);t.instances.clear();var r=new ce(17),s=.5*(this.nBunnies_0-1|0);e=this.nBunnies_0;for(var a=0;a<e;a++){i=this.nBunnies_0;for(var l=0;l<i;l++){n=this.nBunnies_0;for(var u=0;u<n;u++){var p=new $t(5*(a-s)+zi(-2,2),5*(l-s)+zi(-2,2),5*(u-s)+zi(-2,2)),c=new $t(zi(-1,1),zi(-1,1),zi(-1,1)),h=t.instances,d=new Cs(this,p,c);d.color.set_czzhhz$(o.get_za3lpa$(r.randomI_n8acyv$(ii(o))).toLinear()),d.center.set_czzhiu$(this.modelCenter_0),d.radius=this.modelRadius_0,h.add_11rb$(d)}}}},xs.prototype.instanceColorPbrShader_0=function(){var t=new Ft;t.albedoSource=y.STATIC_ALBEDO,t.isInstanced=!0,t.roughness=.3;var i,n,o=t,r=mi.Companion.defaultPbrModel_2ufela$(o),s={v:null},a=new F(r);s.v=a.stageInterfaceNode_iikjwn$("ifInstColor",a.instanceAttributeNode_nm2vx5$(re.Companion.COLORS).output),new B(r);t:do{var l;for(i=wt.ALL,l=r.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,nt)&&h.add_11rb$(f)}var _=zt(h);if(null!=_){n=_;break t}}}n=null}while(0);return d(n).inAlbedo=s.v.output,new mi(o,r)},xs.prototype.instanceColorPhongShader_0=function(){var t=new Si;t.albedoSource=y.STATIC_ALBEDO,t.isInstanced=!0;var i,n,o=t,r=ki.Companion.defaultPhongModel_m663ta$(o),s={v:null},a=new F(r);s.v=a.stageInterfaceNode_iikjwn$("ifInstColor",a.instanceAttributeNode_nm2vx5$(re.Companion.COLORS).output),new B(r);t:do{var l;for(i=wt.ALL,l=r.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,Ci)&&h.add_11rb$(f)}var _=zt(h);if(null!=_){n=_;break t}}}n=null}while(0);return d(n).inAlbedo=s.v.output,new ki(o,r)},Ss.$metadata$={kind:P,simpleName:"Lod",interfaces:[]},Cs.prototype.update_l2cg23$=function(t,e,i){this.instanceModelMat.setIdentity().translate_czzhiu$(this.position).rotate_ad55pp$(i.time*this.rotSpeed,this.rotAxis),Ni.prototype.update_l2cg23$.call(this,t,e,i)},Cs.prototype.addInstanceData_bgc5cs$=function(t,e,i){this.$outer,e.checkBufferSize_za3lpa$();var n=e.dataF.position,o=this.$outer,r=e.dataF;r.put_q3cr5i$(this.instanceModelMat.matrix),o.isLodColors_0?r.put_q3cr5i$(o.lods_0.get_za3lpa$(t).color.array):r.put_q3cr5i$(this.color.array);var s=e.dataF.position-n|0;if(s!==e.instanceSizeF)throw Te("Expected data to grow by "+e.instanceSizeF+" elements, instead it grew by "+s);e.numInstances=e.numInstances+1|0,e.hasChanged=!0},Cs.$metadata$={kind:P,simpleName:"BunnyInstance",interfaces:[Ni]},xs.prototype.setupMenu_aemszp$=function(t){return Do(t,Ps(this))},xs.$metadata$={kind:P,simpleName:"InstanceDemo",interfaces:[Kr]},Object.defineProperty(Os.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_v7oinh$_0?r("deferredPipeline"):this.deferredPipeline_v7oinh$_0},set:function(t){this.deferredPipeline_v7oinh$_0=t}}),Os.prototype.lateInit_aemszp$=function(t){this.updateLighting_0()},Rs.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Rs.prototype=Object.create(z.prototype),Rs.prototype.constructor=Rs,Rs.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Or().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_COL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.local$floorAlbedo=this.result_0,this.state_0=3,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Or().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_NRM_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 3:if(this.local$floorNormal=this.result_0,this.state_0=4,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(Or().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_REFL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 4:var e=this.result_0;if(this.local$this$.onDispose.add_11rb$(js(this.local$floorAlbedo,this.local$floorNormal,e)),this.local$this$.unaryPlus_uv0sim$(b(void 0,!0,Is(this.local$this$MultiLightDemo,this.local$floorAlbedo,this.local$floorNormal,e))),this.state_0=5,this.result_0=yi(this.local$$receiver,Or().modelBasePath+"/bunny.gltf.gz",this),this.result_0===w)return w;continue;case 5:var i;if(null!=(t=this.result_0)){var n=this.local$this$MultiLightDemo,o=this.local$this$,r=new c(!0,!1),a=t.makeModel_m0hq3v$(r);n.bunnyMesh_0=f(a.meshes.values),o.unaryPlus_uv0sim$(a);var l=new Ft;l.useStaticAlbedo_d7aj7k$(n.colorCycler_0.current.linColor),l.roughness=n.roughness_0,n.modelShader_0=new Bt(l),d(n.bunnyMesh_0).shader=n.modelShader_0,i=s}else i=null;return i;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Os.prototype.setupMainScene_aemszp$=function(t){var e,i=new L(null);for(i.unaryPlus_uv0sim$(a(i,void 0,Ms(i,this))),i.lighting.lights.clear(),e=this.lights_0.iterator();e.hasNext();){var n=e.next();i.lighting.lights.add_11rb$(n.light),i.unaryPlus_uv0sim$(n)}var o=i,r=p.EnvironmentHelper.singleColorEnvironment_6zt5da$(o,new m(.15,.15,.15)),l=new X;l.isWithEmissive=!1,l.isWithAmbientOcclusion=!1,l.isWithScreenSpaceReflections=!1,l.isWithImageBasedLighting=!1,l.isWithScreenSpaceReflections=!0,l.useImageBasedLighting_po417x$(r);var u,c=l;this.deferredPipeline_0=new Y(o,c),o.plusAssign_f1kmr1$(this.deferredPipeline_0.renderOutput),o.plusAssign_f1kmr1$(x.Skybox.cube_wgmpek$(r.reflectionMap,1)),o.onDispose.add_11rb$((u=this,function(t,e){return u.noSsrMap_0.dispose(),s}));var h,d,f=this.deferredPipeline_0.contentGroup;return t.assetMgr.launch_eln4bt$((h=f,d=this,function(t,e,i){var n=new Rs(h,d,t,this,e);return i?n:n.doResume(null)})),o},Os.prototype.updateLighting_0=function(){var t,e,i,n=0;for(e=this.lights_0.iterator();e.hasNext();){var o=e.next(),r=Ue((n=(i=n)+1|0,i));r<this.deferredPipeline_0.shadowMaps.size&&(this.deferredPipeline_0.shadowMaps.get_za3lpa$(r).isShadowMapEnabled=!1),o.disable_kc3nav$(this.mainScene.lighting)}var s,a=0,l=360/this.lightCount_0,u=this.lightCount_0,p=this.lights_0.size;t=j.min(u,p);for(var c=0;c<t;c++)this.lights_0.get_za3lpa$(c).setup_mx4ult$(a),this.lights_0.get_za3lpa$(c).enable_kc3nav$(this.mainScene.lighting),a+=l,c<this.deferredPipeline_0.shadowMaps.size&&(this.deferredPipeline_0.shadowMaps.get_za3lpa$(c).isShadowMapEnabled=!0);for(s=this.lights_0.iterator();s.hasNext();)s.next().updateVisibility()},Os.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,function(t){var i,n=t.image_3ds0aa$(null!=(i=e.deferredPipeline_0.reflectionDenoisePass)?i.colorTexture:null);return t.section_yfmn31$("Lights",Ls(e)),t.section_yfmn31$("Screen Space Reflections",Ds(e,n)),t.section_yfmn31$("Material",qs(e)),t.section_yfmn31$("Scene",Fs(e)),s}));var e},Bs.prototype.updateSpotAngleMesh_0=function(){var t=this.light.spotAngle*A.DEG_2_RAD/2,e=1*j.tan(t),i=this.lightMeshShader_0.color;this.spotAngleMesh_0.clear();for(var n=0;n<40;n++){var o=n/40*2*Kt.PI,r=(n+1|0)/40*2*Kt.PI;this.spotAngleMesh_0.addLine_b8opkg$(new $(-1,j.cos(o)*e,j.sin(o)*e),i,new $(-1,j.cos(r)*e,j.sin(r)*e),i)}var s=45*A.DEG_2_RAD,a=j.cos(s)*e;this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,a,a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,a,-a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,-a,-a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,-a,a),i)},Bs.prototype.setup_mx4ult$=function(t){var e=t*A.DEG_2_RAD,i=10*j.cos(e),n=t*A.DEG_2_RAD,o=10*j.sin(n);this.meshPos_0.set_y2kzbl$(i,9,-o),this.anglePos_0=t;var r=m.Companion.WHITE.mix_jpxij3$(this.color,this.$outer.lightSaturation_0,ei());this.light.setColor_y83vuj$(r.toLinear(),this.$outer.lightPower_0),this.lightMeshShader_0.color=r,this.updateSpotAngleMesh_0()},Bs.prototype.enable_kc3nav$=function(t){this.isEnabled_0=!0;var e=t.lights;e.contains_11rb$(this.light)||e.add_11rb$(this.light),this.updateVisibility()},Bs.prototype.disable_kc3nav$=function(t){this.isEnabled_0=!1,t.lights.remove_11rb$(this.light),this.updateVisibility()},Bs.prototype.updateVisibility=function(){this.isVisible=this.isEnabled_0&&this.$outer.showLightIndicators_0},Bs.$metadata$={kind:P,simpleName:"LightMesh",interfaces:[Z]},Vs.prototype.toString=function(){return this.name},Vs.$metadata$={kind:P,simpleName:"MatColor",interfaces:[]},Vs.prototype.component1=function(){return this.name},Vs.prototype.component2=function(){return this.linColor},Vs.prototype.copy_guvy9a$=function(t,e){return new Vs(void 0===t?this.name:t,void 0===e?this.linColor:e)},Vs.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.linColor)|0},Vs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.linColor,t.linColor)},Gs.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Hs=null;function Ws(){return null===Hs&&new Gs,Hs}function Ks(t){ca.call(this,"Color Grid"),this.sphereProto=t,this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function Xs(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ct(15),Ge(t.v),pt()),i.layoutSpec.setSize_4ujscr$(ct(85),Ge(35),ht()),i.value=10;var n=i.onValueChanged,o=function(t){return function(e,i){var n;for(n=t.shaders_0.iterator();n.hasNext();)n.next().roughness=e.value/100;return s}}(e);return n.add_11rb$(o),s}}function Ys(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ct(15),Ge(t.v),pt()),i.layoutSpec.setSize_4ujscr$(ct(85),Ge(35),ht()),i.value=0;var n=i.onValueChanged,o=function(t){return function(e,i){var n;for(n=t.shaders_0.iterator();n.hasNext();)n.next().metallic=e.value/100;return s}}(e);return n.add_11rb$(o),s}}function Zs(t,e,i,n){return function(o){o.isVisible=!1,o.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t-100),pt()),o.layoutSpec.setSize_4ujscr$(ct(100),Ge(100),ht());var r,a={v:-30};return o.unaryPlus_uv0sim$(i.label_tokfmu$("mat-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),n.font.setCustom_11rb$(e),n.text="Material",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new ft(dt.CENTER,dt.CENTER),s}}(a,e,i))),a.v-=35,o.unaryPlus_uv0sim$(i.label_tokfmu$("mat-roughness-lbl",(r=a,function(t){return t.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(r.v),pt()),t.layoutSpec.setSize_4ujscr$(ct(10),Ge(35),ht()),t.text="R:",s}))),o.unaryPlus_uv0sim$(i.slider_87iqh3$("mat-roughness-slider",Xs(a,n))),a.v-=35,o.unaryPlus_uv0sim$(i.label_tokfmu$("mat-metallic-lbl",function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.v),pt()),e.layoutSpec.setSize_4ujscr$(ct(10),Ge(35),ht()),e.text="M:",s}}(a))),o.unaryPlus_uv0sim$(i.slider_87iqh3$("mat-metallic-slider",Ys(a,n))),s}}function Js(){ga(),Kr.call(this,"PBR Materials"),this.skybox_56jct1$_0=this.skybox_56jct1$_0,this.envMaps_chisr5$_0=this.envMaps_chisr5$_0,this.lightCycler_0=new Hr(ga().lightSetups_0),this.hdriCycler_0=new Hr(ga().hdriTextures_0);var t,e=Ii(ga().hdriTextures_0.size);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=null;this.loadedHdris_0=e,this.sphereProto_0=new ha,this.pbrContentCycler_0=new Hr(se([new ba(this.sphereProto_0),new Ks(this.sphereProto_0),new Gl(this.sphereProto_0)])),this.autoRotate_4vo62z$_0=!0}function Qs(t){return t.isPressed}function ta(t){return t.isPressed}function ea(t,e,i){return function(n){n.unaryPlus_uv0sim$(t.camera);var o=n.onUpdate,r=function(t,e,i){return function(n,o){return t.autoRotate_0&&(i.verticalRotation+=2*e.deltaT),s}}(e,i,n);return o.add_11rb$(r),n.zoomMethod=xi.ZOOM_CENTER,n.zoom=20,s}}function ia(t,e){return function(i){return i.cycler_4ni5b8$(null,t.hdriCycler_0,function(t,e){return function(i,n){return t.updateHdri_0(t.hdriCycler_0.index,e),s}}(t,e)),s}}function na(t){return function(e){return e.toggleButton_8v9fdr$("IBL Enabled",!0,function(t){return function(e){var i;for(i=t.pbrContentCycler_0.iterator();i.hasNext();)i.next().setUseImageBasedLighting_6taknv$(e.isEnabled);return s}}(t)),s}}function oa(t){return function(e){return e.cycler_4ni5b8$(null,t.lightCycler_0,function(t){return function(e,i){return e.setup(t.mainScene),s}}(t)),s}}function ra(t,e){return e.hide(),t.show(),s}function sa(t){return function(e){var i;for(e.cycler_4ni5b8$(null,t.pbrContentCycler_0,ra),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.menuY+=25,i=t.pbrContentCycler_0.iterator();i.hasNext();)i.next().createMenu_7fm8wr$(e.menuContainer,e.smallFont,e.menuY);return t.pbrContentCycler_0.current.show(),s}}function aa(t,i){return function(n){var o,r,a,l=t.envMaps_0;for(i.runDelayed_hd6vpk$(1,(r=l,function(t){return r.dispose(),s})),t.envMaps_0=p.EnvironmentHelper.hdriEnvironment_wm5s1y$(t.mainScene,n,!1),(e.isType(o=t.skybox_0.shader,Ai)?o:Q()).environmentMap=t.envMaps_0.reflectionMap,a=t.pbrContentCycler_0.iterator();a.hasNext();)a.next().updateEnvironmentMap_wwmv4k$(t.envMaps_0);return s}}function la(t,e,i,n,o,r){z.call(this,r),this.$controller=o,this.exceptionState_0=1,this.local$closure$idx=t,this.local$this$PbrDemo=e,this.local$closure$recv=i,this.local$$receiver=n}function ua(t,e){this.hdriPath=t,this.name=e}function pa(t,e){this.name=t,this.setup=e}function ca(t){this.name=t,this.content=null,this.ui=null,this.autoRotate=!0}function ha(){this.detailSphere=we([re.Companion.POSITIONS,re.Companion.TEXTURE_COORDS,re.Companion.NORMALS,re.Companion.TANGENTS]),this.simpleSphere=we([re.Companion.POSITIONS,re.Companion.NORMALS]);var t=new De(this.detailSphere);t.vertexModFun=da;var e=(new gt).uvDefaults();e.steps=700,e.radius=7,t.uvSphere_mojs8w$(e),this.detailSphere.generateTangents_mx4ult$();var i=new De(this.simpleSphere),n=(new gt).uvDefaults();n.steps=100,n.radius=1,i.uvSphere_mojs8w$(n)}function da(t){return t.texCoord.x=4*t.texCoord.x,t.texCoord.y=2*t.texCoord.y,s}function fa(){var t;va=this,this.hdriTexProps_0=new W(void 0,void 0,void 0,void 0,ze.NEAREST,ze.NEAREST,!1,1),this.hdriTextures_0=se([new ua(Or().envMapBasePath+"/syferfontein_0d_clear_1k.rgbe.png","South Africa"),new ua(Or().envMapBasePath+"/circus_arena_1k.rgbe.png","Circus"),new ua(Or().envMapBasePath+"/newport_loft.rgbe.png","Loft"),new ua(Or().envMapBasePath+"/shanghai_bund_1k.rgbe.png","Shanghai"),new ua(Or().envMapBasePath+"/mossy_forest_1k.rgbe.png","Mossy Forest")]),this.lightStrength_0=250,this.lightExtent_0=10,this.lightSetups_0=se([new pa("Off",_a),new pa("Front x1",(t=this,function(e){var i=(new yt).setPoint_czzhiu$(new $(0,0,1.5*t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,2*t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),s})),new pa("Front x4",ma(this)),new pa("Top x1",$a(this)),new pa("Top x4",ya(this))])}function _a(t){return t.lighting.lights.clear(),s}function ma(t){return function(e){var i=(new yt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),n=(new yt).setPoint_czzhiu$(new $(-t.lightExtent_0,-t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),o=(new yt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),r=(new yt).setPoint_czzhiu$(new $(t.lightExtent_0,-t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),e.lighting.lights.add_11rb$(n),e.lighting.lights.add_11rb$(o),e.lighting.lights.add_11rb$(r),s}}function $a(t){return function(e){var i=(new yt).setPoint_czzhiu$(new $(0,1.5*t.lightExtent_0,0)).setColor_y83vuj$(m.Companion.WHITE,2*t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),s}}function ya(t){return function(e){var i=(new yt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),n=(new yt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,-t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),o=(new yt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),r=(new yt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,-t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),e.lighting.lights.add_11rb$(n),e.lighting.lights.add_11rb$(o),e.lighting.lights.add_11rb$(r),s}}Os.$metadata$={kind:P,simpleName:"MultiLightDemo",interfaces:[Kr]},Ks.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-color-container",Zs(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},Ks.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},Ks.prototype.createContent_wo93gw$=function(t,e,i){var n,o;return this.content=$e(void 0,(n=e,o=this,function(t){t.isVisible=!1,t.isFrustumChecked=!1;var e=o.makeSpheres_0(!0,n),i=o.makeSpheres_0(!1,n);i.isVisible=!1;var r=i;return t.unaryPlus_uv0sim$(e),t.unaryPlus_uv0sim$(r),o.iblContent_0=e,o.nonIblContent_0=r,s})),d(this.content)},Ks.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i;if(null!=(i=this.iblContent_0)){var n,o=e.isType(n=i.shader,mi)?n:Q();o.irradianceMap=t.irradianceMap,o.reflectionMap=t.reflectionMap,o.brdfLut=t.brdfLut}},Ks.prototype.makeSpheres_0=function(t,i){var n=M();I(n,m.Companion.MD_COLORS),n.remove_11rb$(m.Companion.MD_LIGHT_BLUE),n.remove_11rb$(m.Companion.MD_GREY),n.remove_11rb$(m.Companion.MD_BLUE_GREY);var o=m.Companion.WHITE;n.add_11rb$(o);var r=m.Companion.MD_GREY;n.add_11rb$(r);var s=m.Companion.MD_BLUE_GREY;n.add_11rb$(s);var a=new m(.1,.1,.1);n.add_11rb$(a);var l=new pe(new ue(se([re.Companion.POSITIONS,re.Companion.NORMALS])),null);l.isFrustumChecked=!1,l.geometry.addGeometry_r7nl2o$(this.sphereProto.simpleSphere);var u=this.instancedPbrShader_0(t,i);this.shaders_0.add_11rb$(u),l.shader=u;for(var p=new Ne(se([Ne.Companion.MODEL_MAT,re.Companion.COLORS]),e.imul(4,5)),c=new Se,h=0;h<4;h++)for(var d=0;d<5;d++){c.setIdentity(),c.translate_y2kzbl$(4.5*(-2+d),4.5*(1.5-h),0),c.scale_mx4ult$(1.5),p.checkBufferSize_za3lpa$();var f=p.dataF.position,_=p.dataF;_.put_q3cr5i$(c.matrix),_.put_q3cr5i$(n.get_za3lpa$((e.imul(h,5)+d|0)%n.size).toLinear().array);var $=p.dataF.position-f|0;if($!==p.instanceSizeF)throw Te("Expected data to grow by "+p.instanceSizeF+" elements, instead it grew by "+$);p.numInstances=p.numInstances+1|0,p.hasChanged=!0}return l.instances=p,l},Ks.prototype.instancedPbrShader_0=function(t,i){var n=new Ft;n.albedoSource=y.STATIC_ALBEDO,n.roughness=.1,n.metallic=0,n.isInstanced=!0,t&&n.useImageBasedLighting_po417x$(i);var o,r,s=n,a=mi.Companion.defaultPbrModel_2ufela$(s),l={v:null},u=new F(a);l.v=u.stageInterfaceNode_iikjwn$("ifInstColors",u.instanceAttributeNode_nm2vx5$(re.Companion.COLORS).output),new B(a);t:do{var p;for(o=wt.ALL,p=a.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&o.mask)){var h,f,_=c.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(kt($.name,"pbrMaterial")&&e.isType($,nt)){f=$;break e}}f=null}while(0);var v=null==(h=f)||e.isType(h,nt)?h:Q();if(null!=v){r=v;break t}}}r=null}while(0);return d(r).inAlbedo=l.v.output,new mi(s,a)},Ks.$metadata$={kind:P,simpleName:"ColorGridContent",interfaces:[ca]},Object.defineProperty(Js.prototype,"skybox_0",{configurable:!0,get:function(){return null==this.skybox_56jct1$_0?r("skybox"):this.skybox_56jct1$_0},set:function(t){this.skybox_56jct1$_0=t}}),Object.defineProperty(Js.prototype,"envMaps_0",{configurable:!0,get:function(){return null==this.envMaps_chisr5$_0?r("envMaps"):this.envMaps_chisr5$_0},set:function(t){this.envMaps_chisr5$_0=t}}),Object.defineProperty(Js.prototype,"autoRotate_0",{configurable:!0,get:function(){return this.autoRotate_4vo62z$_0},set:function(t){var e;for(this.autoRotate_4vo62z$_0=t,e=this.pbrContentCycler_0.iterator();e.hasNext();)e.next().autoRotate=t}}),Js.prototype.lateInit_aemszp$=function(t){var e,i,n=t.inputMgr.registerKeyListener_aviy8w$(-25,"Next environment map",Qs,(e=this,i=t,function(t){return e.hdriCycler_0.next(),e.updateHdri_0(e.hdriCycler_0.index,i),s})),o=t.inputMgr.registerKeyListener_aviy8w$(-26,"Prev environment map",ta,function(t,e){return function(i){return t.hdriCycler_0.prev(),t.updateHdri_0(t.hdriCycler_0.index,e),s}}(this,t));this.mainScene.onDispose.add_11rb$(function(t,e,i,n){return function(o,r){t.inputMgr.removeKeyListener_abhb69$(e),t.inputMgr.removeKeyListener_abhb69$(i);var a,l=n.loadedHdris_0;for(a=0;a!==l.length;++a){var u=l[a];null!=u&&u.dispose()}return n.envMaps_0.dispose(),s}}(t,n,o,this))},Js.prototype.setupMainScene_aemszp$=function(t){var e,i,n,o=new L(null);return this.lightCycler_0.current.setup(o),o.unaryPlus_uv0sim$(a(o,void 0,ea(o,this,t))),this.loadHdri_0(this.hdriCycler_0.index,t,(e=o,i=this,n=t,function(t){var o;for(i.envMaps_0=p.EnvironmentHelper.hdriEnvironment_wm5s1y$(e,t,!1),i.skybox_0=x.Skybox.cube_wgmpek$(i.envMaps_0.reflectionMap,1),e.plusAssign_f1kmr1$(i.skybox_0),o=i.pbrContentCycler_0.iterator();o.hasNext();){var r=o.next(),a=e;a.unaryPlus_uv0sim$(r.createContent_wo93gw$(a,i.envMaps_0,n))}return i.pbrContentCycler_0.current.show(),s})),o},Js.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,i=t,function(t){return t.menuHeight=440,t.section_yfmn31$("Environment",ia(e,i)),t.section_yfmn31$("Image Based Lighting",na(e)),t.section_yfmn31$("Discrete Lighting",oa(e)),t.section_yfmn31$("Scene Content",sa(e)),s}));var e,i},Js.prototype.updateHdri_0=function(t,e){this.loadHdri_0(t,e,aa(this,e))},la.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},la.prototype=Object.create(z.prototype),la.prototype.constructor=la,la.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(ga().hdriTextures_0.get_za3lpa$(this.local$closure$idx).hdriPath,ga().hdriTexProps_0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return this.local$this$PbrDemo.loadedHdris_0[this.local$closure$idx]=t,this.local$closure$recv(t);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Js.prototype.loadHdri_0=function(t,e,i){var n,o,r,s=this.loadedHdris_0[t];null==s?e.assetMgr.launch_eln4bt$((n=t,o=this,r=i,function(t,e,i){var s=new la(n,o,r,t,this,e);return i?s:s.doResume(null)})):i(s)},ua.prototype.toString=function(){return this.name},ua.$metadata$={kind:P,simpleName:"Hdri",interfaces:[]},pa.prototype.toString=function(){return this.name},pa.$metadata$={kind:P,simpleName:"LightSetup",interfaces:[]},ca.prototype.show=function(){var t,e;null!=(t=this.content)&&(t.isVisible=!0),null!=(e=this.ui)&&(e.isVisible=!0)},ca.prototype.hide=function(){var t,e;null!=(t=this.content)&&(t.isVisible=!1),null!=(e=this.ui)&&(e.isVisible=!1)},ca.prototype.toString=function(){return this.name},ca.$metadata$={kind:P,simpleName:"PbrContent",interfaces:[]},ha.$metadata$={kind:P,simpleName:"SphereProto",interfaces:[]},fa.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var va=null;function ga(){return null===va&&new fa,va}function ba(t){Vl(),ca.call(this,"PBR Material"),this.sphereProto=t;var e=new Hr(Vl().materials_0);e.index=3,this.matCycler=e,this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function xa(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ct(15),Ge(t.v),pt()),i.layoutSpec.setSize_4ujscr$(ct(70),Ge(35),ht()),i.text=e.currentMat.name;var n=i.onClick,o=function(t){return function(e,i,n,o){return e.text=t.nextMaterial_0().name,s}}(e);return n.add_11rb$(o),s}}function wa(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(20),Ge(35),ht()),n.text="<";var o=n.onClick,r=function(t,e){return function(i,n,o,r){return e.text=t.prevMaterial_0().name,s}}(e,i);return o.add_11rb$(r),s}}function za(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ct(80),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(20),Ge(35),ht()),n.text=">";var o=n.onClick,r=function(t,e){return function(i,n,o,r){return e.text=t.nextMaterial_0().name,s}}(e,i);return o.add_11rb$(r),s}}function ka(t,e,i,n){return function(o){o.isVisible=!1,o.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t-60),pt()),o.layoutSpec.setSize_4ujscr$(ct(100),Ge(60),ht());var r={v:-30};o.unaryPlus_uv0sim$(i.label_tokfmu$("mat-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),n.font.setCustom_11rb$(e),n.text="Material",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new ft(dt.CENTER,dt.CENTER),s}}(r,e,i))),r.v-=30;var a=i.button_9zrh0o$("selected-mat",xa(r,n));return o.unaryPlus_uv0sim$(a),o.unaryPlus_uv0sim$(i.button_9zrh0o$("mat-left",wa(r,n,a))),o.unaryPlus_uv0sim$(i.button_9zrh0o$("mat-right",za(r,n,a))),s}}function Sa(t,e,i,n){return function(o){o.isVisible=!1;var r=i.makeSphere_0(!0,t,e),a=i.makeSphere_0(!1,t,e);a.isVisible=!1;var l=a;o.unaryPlus_uv0sim$(r),o.unaryPlus_uv0sim$(l),i.iblContent_0=r,i.nonIblContent_0=l;var u=o.onUpdate,p=function(t,e,i){return function(n,o){return t.autoRotate&&i.rotate_ad55pp$(-2*e.deltaT,$.Companion.Y_AXIS),s}}(i,n,o);return u.add_11rb$(p),s}}function Ca(t,e,i,n){return function(o){o.geometry.addGeometry_r7nl2o$(t.sphereProto.detailSphere);var r=v(function(t,e){return function(i){return i.albedoSource=y.TEXTURE_ALBEDO,i.isNormalMapped=!0,i.isRoughnessMapped=!0,i.isMetallicMapped=!0,i.isOcclusionMapped=!0,i.isDisplacementMapped=!0,i.displacementStrength=.25,t&&i.useImageBasedLighting_po417x$(e),s}}(e,i));o.shader=r,t.shaders_0.add_11rb$(r),t.updatePbrMaterial_0();var a=n.onDispose,l=function(t){return function(e,i){var n;for(n=t.matCycler.iterator();n.hasNext();)n.next().disposeMaps();return s}}(t);return a.add_11rb$(l),s}}function Na(t,e,i,n,o,r,s){this.name=t,this.albedo=e,this.normal=i,this.roughness=n,this.metallic=o,this.ao=r,this.displacement=s}function Ea(){var t;Ul=this,this.defaultMetallicTex_0=new Mi(m.Companion.BLACK),this.defaultAoTex_0=new Mi(m.Companion.WHITE),this.defaultDispTex_0=new Mi(m.Companion.BLACK),this.assetPath_0=Or().pbrBasePath,this.materials_0=Ti([new Na("Bamboo",new je(void 0,void 0,(t=this,function(e,i,n,o){var r=new Ta(t,e,i,this,n);return o?r:r.doResume(null)})),new je(void 0,void 0,Oa(this)),new je(void 0,void 0,ja(this)),null,new je(void 0,void 0,Ia(this)),null),new Na("Castle Brick",new je(void 0,void 0,La(this)),new je(void 0,void 0,qa(this)),new je(void 0,void 0,Ba(this)),null,new je(void 0,void 0,Va(this)),new je(void 0,void 0,Ha(this))),new Na("Granite",new je(void 0,void 0,Ka(this)),new je(void 0,void 0,Ya(this)),new je(void 0,void 0,Ja(this)),null,null,null),new Na("Weave Steel",new je(void 0,void 0,tl(this)),new je(void 0,void 0,il(this)),new je(void 0,void 0,ol(this)),new je(void 0,void 0,sl(this)),new je(void 0,void 0,ll(this)),new je(void 0,void 0,pl(this))),new Na("Scuffed Plastic",new je(void 0,void 0,hl(this)),new je(void 0,void 0,fl(this)),new je(void 0,void 0,ml(this)),null,new je(void 0,void 0,yl(this)),null),new Na("Snow Covered Path",new je(void 0,void 0,gl(this)),new je(void 0,void 0,xl(this)),new je(void 0,void 0,zl(this)),null,new je(void 0,void 0,Sl(this)),new je(void 0,void 0,Nl(this))),new Na("Marble",new je(void 0,void 0,Tl(this)),new je(void 0,void 0,Ol(this)),new je(void 0,void 0,jl(this)),null,null,null),new Na("Onyx Tiles",new je(void 0,void 0,Il(this)),new je(void 0,void 0,Ll(this)),new je(void 0,void 0,ql(this)),null,null,new je(void 0,void 0,Bl(this)))])}function Ta(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Pa(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Oa(t){return function(e,i,n,o){var r=new Pa(t,e,i,this,n);return o?r:r.doResume(null)}}function Ma(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ja(t){return function(e,i,n,o){var r=new Ma(t,e,i,this,n);return o?r:r.doResume(null)}}function Aa(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ia(t){return function(e,i,n,o){var r=new Aa(t,e,i,this,n);return o?r:r.doResume(null)}}function Ra(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function La(t){return function(e,i,n,o){var r=new Ra(t,e,i,this,n);return o?r:r.doResume(null)}}function Da(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function qa(t){return function(e,i,n,o){var r=new Da(t,e,i,this,n);return o?r:r.doResume(null)}}function Fa(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ba(t){return function(e,i,n,o){var r=new Fa(t,e,i,this,n);return o?r:r.doResume(null)}}function Ua(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Va(t){return function(e,i,n,o){var r=new Ua(t,e,i,this,n);return o?r:r.doResume(null)}}function Ga(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ha(t){return function(e,i,n,o){var r=new Ga(t,e,i,this,n);return o?r:r.doResume(null)}}function Wa(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ka(t){return function(e,i,n,o){var r=new Wa(t,e,i,this,n);return o?r:r.doResume(null)}}function Xa(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ya(t){return function(e,i,n,o){var r=new Xa(t,e,i,this,n);return o?r:r.doResume(null)}}function Za(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ja(t){return function(e,i,n,o){var r=new Za(t,e,i,this,n);return o?r:r.doResume(null)}}function Qa(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function tl(t){return function(e,i,n,o){var r=new Qa(t,e,i,this,n);return o?r:r.doResume(null)}}function el(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function il(t){return function(e,i,n,o){var r=new el(t,e,i,this,n);return o?r:r.doResume(null)}}function nl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ol(t){return function(e,i,n,o){var r=new nl(t,e,i,this,n);return o?r:r.doResume(null)}}function rl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function sl(t){return function(e,i,n,o){var r=new rl(t,e,i,this,n);return o?r:r.doResume(null)}}function al(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ll(t){return function(e,i,n,o){var r=new al(t,e,i,this,n);return o?r:r.doResume(null)}}function ul(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function pl(t){return function(e,i,n,o){var r=new ul(t,e,i,this,n);return o?r:r.doResume(null)}}function cl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function hl(t){return function(e,i,n,o){var r=new cl(t,e,i,this,n);return o?r:r.doResume(null)}}function dl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function fl(t){return function(e,i,n,o){var r=new dl(t,e,i,this,n);return o?r:r.doResume(null)}}function _l(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ml(t){return function(e,i,n,o){var r=new _l(t,e,i,this,n);return o?r:r.doResume(null)}}function $l(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function yl(t){return function(e,i,n,o){var r=new $l(t,e,i,this,n);return o?r:r.doResume(null)}}function vl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function gl(t){return function(e,i,n,o){var r=new vl(t,e,i,this,n);return o?r:r.doResume(null)}}function bl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function xl(t){return function(e,i,n,o){var r=new bl(t,e,i,this,n);return o?r:r.doResume(null)}}function wl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function zl(t){return function(e,i,n,o){var r=new wl(t,e,i,this,n);return o?r:r.doResume(null)}}function kl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Sl(t){return function(e,i,n,o){var r=new kl(t,e,i,this,n);return o?r:r.doResume(null)}}function Cl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Nl(t){return function(e,i,n,o){var r=new Cl(t,e,i,this,n);return o?r:r.doResume(null)}}function El(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Tl(t){return function(e,i,n,o){var r=new El(t,e,i,this,n);return o?r:r.doResume(null)}}function Pl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ol(t){return function(e,i,n,o){var r=new Pl(t,e,i,this,n);return o?r:r.doResume(null)}}function Ml(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function jl(t){return function(e,i,n,o){var r=new Ml(t,e,i,this,n);return o?r:r.doResume(null)}}function Al(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Il(t){return function(e,i,n,o){var r=new Al(t,e,i,this,n);return o?r:r.doResume(null)}}function Rl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ll(t){return function(e,i,n,o){var r=new Rl(t,e,i,this,n);return o?r:r.doResume(null)}}function Dl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ql(t){return function(e,i,n,o){var r=new Dl(t,e,i,this,n);return o?r:r.doResume(null)}}function Fl(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Bl(t){return function(e,i,n,o){var r=new Fl(t,e,i,this,n);return o?r:r.doResume(null)}}Js.$metadata$={kind:P,simpleName:"PbrDemo",interfaces:[Kr]},Object.defineProperty(ba.prototype,"currentMat",{configurable:!0,get:function(){return this.matCycler.current}}),ba.prototype.nextMaterial_0=function(){return this.currentMat.disposeMaps(),this.matCycler.next(),this.updatePbrMaterial_0(),this.currentMat},ba.prototype.prevMaterial_0=function(){return this.currentMat.disposeMaps(),this.matCycler.prev(),this.updatePbrMaterial_0(),this.currentMat},ba.prototype.updatePbrMaterial_0=function(){var t;for(t=this.shaders_0.iterator();t.hasNext();){var e,i,n,o=t.next();o.albedoMap=this.currentMat.albedo,o.normalMap=this.currentMat.normal,o.roughnessMap=this.currentMat.roughness,o.metallicMap=null!=(e=this.currentMat.metallic)?e:Vl().defaultMetallicTex_0,o.occlusionMap=null!=(i=this.currentMat.ao)?i:Vl().defaultAoTex_0,o.displacementMap=null!=(n=this.currentMat.displacement)?n:Vl().defaultDispTex_0}},ba.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-mat-container",ka(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},ba.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},ba.prototype.createContent_wo93gw$=function(t,e,i){return this.content=$e(void 0,Sa(t,e,this,i)),d(this.content)},ba.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i,n,o;if(null!=(n=null!=(i=this.iblContent_0)?i.children:null))for(o=n.iterator();o.hasNext();){var r,s=o.next();e.isType(s,pe)||Q();var a=e.isType(r=s.shader,mi)?r:Q();a.irradianceMap=t.irradianceMap,a.reflectionMap=t.reflectionMap,a.brdfLut=t.brdfLut}},ba.prototype.makeSphere_0=function(t,e,i){return $e(void 0,(n=this,o=t,r=i,a=e,function(t){return t.unaryPlus_uv0sim$(b(void 0,!0,Ca(n,o,r,a))),s}));var n,o,r,a},Na.prototype.disposeMaps=function(){var t,e,i;this.albedo.dispose(),this.normal.dispose(),this.roughness.dispose(),null!=(t=this.metallic)&&t.dispose(),null!=(e=this.ao)&&e.dispose(),null!=(i=this.displacement)&&i.dispose()},Na.$metadata$={kind:P,simpleName:"MaterialMaps",interfaces:[]},Na.prototype.component1=function(){return this.name},Na.prototype.component2=function(){return this.albedo},Na.prototype.component3=function(){return this.normal},Na.prototype.component4=function(){return this.roughness},Na.prototype.component5=function(){return this.metallic},Na.prototype.component6=function(){return this.ao},Na.prototype.component7=function(){return this.displacement},Na.prototype.copy_chv25t$=function(t,e,i,n,o,r,s){return new Na(void 0===t?this.name:t,void 0===e?this.albedo:e,void 0===i?this.normal:i,void 0===n?this.roughness:n,void 0===o?this.metallic:o,void 0===r?this.ao:r,void 0===s?this.displacement:s)},Na.prototype.toString=function(){return"MaterialMaps(name="+e.toString(this.name)+", albedo="+e.toString(this.albedo)+", normal="+e.toString(this.normal)+", roughness="+e.toString(this.roughness)+", metallic="+e.toString(this.metallic)+", ao="+e.toString(this.ao)+", displacement="+e.toString(this.displacement)+")"},Na.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.albedo)|0)+e.hashCode(this.normal)|0)+e.hashCode(this.roughness)|0)+e.hashCode(this.metallic)|0)+e.hashCode(this.ao)|0)+e.hashCode(this.displacement)|0},Na.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.albedo,t.albedo)&&e.equals(this.normal,t.normal)&&e.equals(this.roughness,t.roughness)&&e.equals(this.metallic,t.metallic)&&e.equals(this.ao,t.ao)&&e.equals(this.displacement,t.displacement)},Ta.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ta.prototype=Object.create(z.prototype),Ta.prototype.constructor=Ta,Ta.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-albedo.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Pa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Pa.prototype=Object.create(z.prototype),Pa.prototype.constructor=Pa,Pa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-normal.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ma.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ma.prototype=Object.create(z.prototype),Ma.prototype.constructor=Ma,Ma.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-roughness.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Aa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Aa.prototype=Object.create(z.prototype),Aa.prototype.constructor=Aa,Aa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-ao.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ra.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ra.prototype=Object.create(z.prototype),Ra.prototype.constructor=Ra,Ra.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_diff_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Da.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Da.prototype=Object.create(z.prototype),Da.prototype.constructor=Da,Da.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_nor_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Fa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Fa.prototype=Object.create(z.prototype),Fa.prototype.constructor=Fa,Fa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_rough_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ua.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ua.prototype=Object.create(z.prototype),Ua.prototype.constructor=Ua,Ua.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_ao_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ga.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ga.prototype=Object.create(z.prototype),Ga.prototype.constructor=Ga,Ga.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_disp_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Wa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Wa.prototype=Object.create(z.prototype),Wa.prototype.constructor=Wa,Wa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-albedo4.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Xa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Xa.prototype=Object.create(z.prototype),Xa.prototype.constructor=Xa,Xa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-normal2.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Za.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Za.prototype=Object.create(z.prototype),Za.prototype.constructor=Za,Za.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-roughness3.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Qa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Qa.prototype=Object.create(z.prototype),Qa.prototype.constructor=Qa,Qa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_COL_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},el.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},el.prototype=Object.create(z.prototype),el.prototype.constructor=el,el.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_NRM_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},nl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},nl.prototype=Object.create(z.prototype),nl.prototype.constructor=nl,nl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_ROUGHNESS_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},rl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},rl.prototype=Object.create(z.prototype),rl.prototype.constructor=rl,rl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_METALNESS_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},al.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},al.prototype=Object.create(z.prototype),al.prototype.constructor=al,al.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_AO_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ul.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ul.prototype=Object.create(z.prototype),ul.prototype.constructor=ul,ul.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_DISP_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},cl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},cl.prototype=Object.create(z.prototype),cl.prototype.constructor=cl,cl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic4-alb.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},dl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},dl.prototype=Object.create(z.prototype),dl.prototype.constructor=dl,dl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-normal.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},_l.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},_l.prototype=Object.create(z.prototype),_l.prototype.constructor=_l,_l.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-rough.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},$l.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},$l.prototype=Object.create(z.prototype),$l.prototype.constructor=$l,$l.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-ao.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},vl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},vl.prototype=Object.create(z.prototype),vl.prototype.constructor=vl,vl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_albedo.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},bl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},bl.prototype=Object.create(z.prototype),bl.prototype.constructor=bl,bl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_normal-dx.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},wl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},wl.prototype=Object.create(z.prototype),wl.prototype.constructor=wl,wl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_roughness.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},kl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},kl.prototype=Object.create(z.prototype),kl.prototype.constructor=kl,kl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_ao.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Cl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Cl.prototype=Object.create(z.prototype),Cl.prototype.constructor=Cl,Cl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_height.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},El.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},El.prototype=Object.create(z.prototype),El.prototype.constructor=El,El.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-albedo2.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Pl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Pl.prototype=Object.create(z.prototype),Pl.prototype.constructor=Pl,Pl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-normal.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ml.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ml.prototype=Object.create(z.prototype),Ml.prototype.constructor=Ml,Ml.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-roughness1.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Al.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Al.prototype=Object.create(z.prototype),Al.prototype.constructor=Al,Al.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_COL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Rl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Rl.prototype=Object.create(z.prototype),Rl.prototype.constructor=Rl,Rl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_NRM_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Dl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Dl.prototype=Object.create(z.prototype),Dl.prototype.constructor=Dl,Dl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_REFL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Fl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Fl.prototype=Object.create(z.prototype),Fl.prototype.constructor=Fl,Fl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_DISP_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ea.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Ul=null;function Vl(){return null===Ul&&new Ea,Ul}function Gl(t){Ql(),ca.call(this,"Roughness / Metal"),this.sphereProto=t,this.colors_0=new Hr(Ql().matColors_0),this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function Hl(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ct(15),Ge(t.v),pt()),i.layoutSpec.setSize_4ujscr$(ct(70),Ge(35),ht()),i.text=e.colors_0.current.name;var n=i.onClick,o=function(t){return function(e,i,n,o){var r;for(e.text=t.colors_0.next().name,r=t.shaders_0.iterator();r.hasNext();)r.next().albedo=t.colors_0.current.linColor;return s}}(e);return n.add_11rb$(o),s}}function Wl(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(20),Ge(35),ht()),n.text="<";var o=n.onClick,r=function(t,e){return function(i,n,o,r){var a;for(e.text=t.colors_0.prev().name,a=t.shaders_0.iterator();a.hasNext();)a.next().albedo=t.colors_0.current.linColor;return s}}(e,i);return o.add_11rb$(r),s}}function Kl(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ct(80),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(20),Ge(35),ht()),n.text=">";var o=n.onClick,r=function(t,e){return function(i,n,o,r){var a;for(e.text=t.colors_0.next().name,a=t.shaders_0.iterator();a.hasNext();)a.next().albedo=t.colors_0.current.linColor;return s}}(e,i);return o.add_11rb$(r),s}}function Xl(t,e,i,n){return function(o){o.isVisible=!1,o.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t-60),pt()),o.layoutSpec.setSize_4ujscr$(ct(100),Ge(60),ht());var r={v:-30};o.unaryPlus_uv0sim$(i.label_tokfmu$("color-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(ct(0),Ge(t.v),pt()),n.layoutSpec.setSize_4ujscr$(ct(100),Ge(30),ht()),n.font.setCustom_11rb$(e),n.text="Color",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new ft(dt.CENTER,dt.CENTER),s}}(r,e,i))),r.v-=30;var a=i.button_9zrh0o$("selected-color",Hl(r,n));return o.unaryPlus_uv0sim$(a),o.unaryPlus_uv0sim$(i.button_9zrh0o$("color-left",Wl(r,n,a))),o.unaryPlus_uv0sim$(i.button_9zrh0o$("color-right",Kl(r,n,a))),s}}function Yl(t,e){this.name=t,this.linColor=e}function Zl(){Jl=this,this.matColors_0=se([new Yl("Red",m.Companion.MD_RED.toLinear()),new Yl("Pink",m.Companion.MD_PINK.toLinear()),new Yl("Purple",m.Companion.MD_PURPLE.toLinear()),new Yl("Deep Purple",m.Companion.MD_DEEP_PURPLE.toLinear()),new Yl("Indigo",m.Companion.MD_INDIGO.toLinear()),new Yl("Blue",m.Companion.MD_BLUE.toLinear()),new Yl("Cyan",m.Companion.MD_CYAN.toLinear()),new Yl("Teal",m.Companion.MD_TEAL.toLinear()),new Yl("Green",m.Companion.MD_GREEN.toLinear()),new Yl("Light Green",m.Companion.MD_LIGHT_GREEN.toLinear()),new Yl("Lime",m.Companion.MD_LIME.toLinear()),new Yl("Yellow",m.Companion.MD_YELLOW.toLinear()),new Yl("Amber",m.Companion.MD_AMBER.toLinear()),new Yl("Orange",m.Companion.MD_ORANGE.toLinear()),new Yl("Deep Orange",m.Companion.MD_DEEP_ORANGE.toLinear()),new Yl("Brown",m.Companion.MD_BROWN.toLinear()),new Yl("White",m.Companion.WHITE.toLinear()),new Yl("Grey",m.Companion.MD_GREY.toLinear()),new Yl("Blue Grey",m.Companion.MD_BLUE_GREY.toLinear()),new Yl("Almost Black",new m(.1,.1,.1).toLinear())])}ba.$metadata$={kind:P,simpleName:"PbrMaterialContent",interfaces:[ca]},Gl.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-rough-metal-container",Xl(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},Gl.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},Gl.prototype.createContent_wo93gw$=function(t,e,i){var n,o;return this.content=$e(void 0,(n=e,o=this,function(t){t.isVisible=!1,t.isFrustumChecked=!1;var e=o.makeSpheres_0(!0,n),i=o.makeSpheres_0(!1,n);i.isVisible=!1;var r=i;return t.unaryPlus_uv0sim$(e),t.unaryPlus_uv0sim$(r),o.iblContent_0=e,o.nonIblContent_0=r,s})),d(this.content)},Gl.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i;if(null!=(i=this.iblContent_0)){var n,o=e.isType(n=i.shader,mi)?n:Q();o.irradianceMap=t.irradianceMap,o.reflectionMap=t.reflectionMap,o.brdfLut=t.brdfLut}},Gl.prototype.makeSpheres_0=function(t,i){var n=new pe(new ue(se([re.Companion.POSITIONS,re.Companion.NORMALS])),null);n.isFrustumChecked=!1,n.geometry.addGeometry_r7nl2o$(this.sphereProto.simpleSphere);var o=this.instancedPbrShader_0(t,i);this.shaders_0.add_11rb$(o),n.shader=o;for(var r=new Ne(se([Ne.Companion.MODEL_MAT,re.Companion.COLORS]),e.imul(7,7)),s=new Se,a=0;a<7;a++)for(var l=0;l<7;l++){s.setIdentity(),s.translate_y2kzbl$(2.5*(-3+l),2.5*(3-a),0),r.checkBufferSize_za3lpa$();var u=r.dataF.position,p=r.dataF;p.put_q3cr5i$(s.matrix);var c=l/6,h=j.max(c,.05),d=a/6;p.put_mx4ult$(h),p.put_mx4ult$(d),p.put_mx4ult$(0),p.put_mx4ult$(0);var f=r.dataF.position-u|0;if(f!==r.instanceSizeF)throw Te("Expected data to grow by "+r.instanceSizeF+" elements, instead it grew by "+f);r.numInstances=r.numInstances+1|0,r.hasChanged=!0}return n.instances=r,n},Gl.prototype.instancedPbrShader_0=function(t,i){var n=new Ft;n.albedoSource=y.STATIC_ALBEDO,n.albedo=this.colors_0.current.linColor,n.isInstanced=!0,t&&n.useImageBasedLighting_po417x$(i);var o=n,r=mi.Companion.defaultPbrModel_2ufela$(o),s={v:null},a=new F(r);s.v=a.stageInterfaceNode_iikjwn$("ifInstColors",a.instanceAttributeNode_nm2vx5$(re.Companion.COLORS).output);var l,u,p=new B(r);t:do{var c;for(l=wt.ALL,c=r.stages.values.iterator();c.hasNext();){var h=c.next();if(0!=(h.stage.mask&l.mask)){var f,_,m=h.nodes;e:do{var $;for($=m.iterator();$.hasNext();){var v=$.next();if(kt(v.name,"pbrMaterial")&&e.isType(v,nt)){_=v;break e}}_=null}while(0);var g=null==(f=_)||e.isType(f,nt)?f:Q();if(null!=g){u=g;break t}}}u=null}while(0);var b=d(u);return b.inRoughness=p.splitNode_500t7j$(s.v.output,"r").output,b.inMetallic=p.splitNode_500t7j$(s.v.output,"g").output,new mi(o,r)},Yl.$metadata$={kind:P,simpleName:"MatColor",interfaces:[]},Yl.prototype.component1=function(){return this.name},Yl.prototype.component2=function(){return this.linColor},Yl.prototype.copy_guvy9a$=function(t,e){return new Yl(void 0===t?this.name:t,void 0===e?this.linColor:e)},Yl.prototype.toString=function(){return"MatColor(name="+e.toString(this.name)+", linColor="+e.toString(this.linColor)+")"},Yl.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.linColor)|0},Yl.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.linColor,t.linColor)},Zl.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Jl=null;function Ql(){return null===Jl&&new Zl,Jl}function tu(t,e){su(),Z.call(this),this.pbrColorOut=t,this.ibl=e,this.unaryPlus_uv0sim$(this.makeWine_0()),this.unaryPlus_uv0sim$(this.makeBody_0()),this.unaryPlus_uv0sim$(this.makeShaft_0()),this.translate_y2kzbl$(7.5,0,2.5),this.scale_mx4ult$(.9)}function eu(t){return function(e){return e.isOpaque=!1,e.generate_v2sixm$(function(t){return function(e){return t.makeBodyGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t)),e.shader=v(function(t){return function(e){return e.useImageBasedLighting_po417x$(t.ibl),e.roughness=0,e.alphaMode=new ye,e.reflectionStrength=.3,s}}(t)),s}}function iu(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeWineGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new Ft;return i.roughness=0,i.emissive=new m(.3,0,.1).toLinear().withAlpha_mx4ult$(.8),i.useStaticAlbedo_d7aj7k$(new m(.3,0,.1).mix_y83vuj$(m.Companion.BLACK,.2).toLinear()),e.shader=new Bt(i),s}}function nu(t,e,i){this.r=t,this.h=e,this.t=i}function ou(){ru=this,this.THICKNESS_0=new re("aMatThickness",Ce.FLOAT)}Gl.$metadata$={kind:P,simpleName:"RoughnesMetalGridContent",interfaces:[ca]},tu.prototype.makeBody_0=function(){return g(void 0,eu(this))},tu.prototype.makeShaft_0=function(){var t,e=new pe(new ue(se([re.Companion.POSITIONS,re.Companion.NORMALS,re.Companion.COLORS,su().THICKNESS_0])),null);return e.generate_v2sixm$((t=this,function(e){return t.makeShaftGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s})),e.isOpaque=!1,e.shader=this.glasShader_0(),e},tu.prototype.makeWine_0=function(){return g(void 0,iu(this))},tu.prototype.makeBodyGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.BLACK.withAlpha_mx4ult$(.1).toLinear();var e,i=new Le;for(t.circleShape_k80pjh$(i),e=Be(se([new nu(1.3,9.1,1.5),new nu(1.5,9.3,1),new nu(3.97,11.8,1),new nu(4.2,12.1,1),new nu(4.45,12.6,1),new nu(4.6,13.1,1),new nu(4.65,13.5,1),new nu(4.65,14.5,1),new nu(4.58,15.5,1),new nu(4.42,17,1),new nu(4,20,1),new nu(3.5,23,.5),new nu(3.475,23.05,.5),new nu(3.45,23,.5),new nu(3.95,20,.5),new nu(4.37,17,.5),new nu(4.6,14.5,.5),new nu(4.6,13.5,.5)])).iterator();e.hasNext();){var n=e.next();t.transform.push(),t.scale_y2kzbl$(n.r,n.r,1),t.translate_y2kzbl$(0,0,n.h),t.sample_afatab$(i,void 0,!0),t.transform.pop()}},tu.prototype.makeShaftGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.DARK_GRAY.withAlpha_mx4ult$(.1).toLinear();var e=new Le;t.circleShape_k80pjh$(e);var i,n,o={v:.5};for(t.vertexModFun=(i=o,function(t){var e;return null!=(e=t.getFloatAttribute_nm2vx5$(su().THICKNESS_0))&&(e.f=i.v),s}),t.transform.push(),t.scale_y2kzbl$(4,4,1),t.sampleAndFillBottom_afatab$(e),t.transform.pop(),n=se([new nu(4.1,.1,.5),new nu(4,.2,.5),new nu(2,.5,.75),new nu(1.5,.65,1),new nu(1,.95,1.5),new nu(.75,1.25,2),new nu(.5,2,5),new nu(.4,3,20),new nu(.4,7,20),new nu(.5,8,20),new nu(.6,8.25,2.5),new nu(.9,8.65,1),new nu(1.3,9.1,1)]).iterator();n.hasNext();){var r=n.next();t.transform.push(),t.scale_y2kzbl$(r.r,r.r,1),t.translate_y2kzbl$(0,0,r.h),o.v=r.t,t.sample_afatab$(e),t.transform.pop()}},tu.prototype.makeWineGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var e,i=new Le;for(t.circleShape_k80pjh$(i),t.transform.push(),t.translate_y2kzbl$(0,0,10),t.sampleAndFillBottom_afatab$(i),t.transform.pop(),e=se([new nu(1.28,9.1,1.5),new nu(1.48,9.3,3),new nu(3.95,11.8,7),new nu(4.18,12.1,7),new nu(4.43,12.6,7),new nu(4.58,13.1,7),new nu(4.63,13.5,7),new nu(4.63,13.5,7),new nu(4.57,13.4,7),new nu(3,13.4,7),new nu(1.5,13.4,7),new nu(.5,13.4,7)]).iterator();e.hasNext();){var n=e.next();t.transform.push(),t.scale_y2kzbl$(n.r,n.r,1),t.translate_y2kzbl$(0,0,n.h),t.sample_afatab$(i),t.transform.pop()}t.fillTop_pvgy1j$(i)},tu.prototype.glasShader_0=function(){var t=new Ft;t.useRefraction_vv6xll$(this.pbrColorOut),t.useImageBasedLighting_po417x$(this.ibl),t.roughness=0,t.alphaMode=new ye;var i,n,o=t,r=mi.Companion.defaultPbrModel_2ufela$(o),s={v:null},a=new F(r);s.v=a.stageInterfaceNode_iikjwn$("ifThickness",a.attributeNode_nm2vx5$(su().THICKNESS_0).output),new B(r);t:do{var l;for(i=wt.ALL,l=r.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var d=p.next();e.isType(d,Ri)&&h.add_11rb$(d)}var f=zt(h);if(null!=f){n=f;break t}}}n=null}while(0);return null!=n&&(n.inMaterialThickness=s.v.output),new mi(o,r)},nu.$metadata$={kind:P,simpleName:"ExtrudeProps",interfaces:[]},ou.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var ru=null;function su(){return null===ru&&new ou,ru}function au(){Kr.call(this,"Procedural Geometry"),this.autoRotate=!0,this.roses_wwovcl$_0=this.roses_wwovcl$_0}function lu(t,e){return function(i){i.setMouseRotation_dleff0$(-20,-10),i.setMouseTranslation_y2kzbl$(0,16,0),i.zoom=40,i.unaryPlus_uv0sim$(t.camera);var n=i.onUpdate,o=function(t,e){return function(i,n){return t.autoRotate&&(e.verticalRotation+=5*n.deltaT),s}}(e,i);return n.add_11rb$(o),s}}function uu(t){return t.setDirectional_czzhiu$(new $(-1,-.3,-1)),t.setColor_y83vuj$(m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.5).toLinear(),3),s}function pu(t,e,i,n,o){z.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$ProceduralDemo=e,this.local$$receiver=i}function cu(t,e){return function(i){i.button_9zrh0o$("Empty Vase",function(t,e){return function(i){var n;for(n=t.roses.children.iterator();n.hasNext();)n.next().dispose_aemszp$(e);return t.roses.removeAllChildren(),s}}(t,e));var n,o={v:null},r={v:!0};return i.button_9zrh0o$("Generate Rose",function(t,e,i,n){return function(o){var r;if(!t.roses.children.isEmpty()&&e.v){var a=qe(t.roses.children);t.roses.removeNode_f1kmr1$(a),a.dispose_aemszp$(i)}var l=Li();return null!=(r=n.v)&&(r.text=l.toString()),t.roses.makeRose_za3lpa$(l),s}}(t,r,e,o)),i.toggleButton_8v9fdr$("Replace Last Rose",r.v,(n=r,function(t){return n.v=t.isEnabled,s})),o.v=i.textWithValue_puj7f4$("Seed:",""),s}}function hu(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function du(){Z.call(this),this.makeRose_za3lpa$(1234),this.makeRose_za3lpa$(6415168),this.makeRose_za3lpa$(2541685),this.makeRose_za3lpa$(-336577773),this.makeRose_za3lpa$(1339055691),this.translate_y2kzbl$(-7.5,10.5,2.5)}function fu(t){var e;this.shaftGrad=new rt([ot(0,m.Companion.MD_BROWN_900.toLinear()),ot(.4,m.Companion.MD_BROWN.toLinear()),ot(1,m.Companion.MD_LIGHT_GREEN_600.toLinear())]),this.blossomLeafGrad=he([m.Companion.MD_LIGHT_GREEN_600.toLinear(),m.Companion.MD_LIGHT_GREEN.mix_y83vuj$(m.Companion.MD_YELLOW_200,.5).toLinear()]),this.shaftMesh=null,this.leafMesh=null,this.shaftLeafMesh=null,this.blossomMesh=null,this.rand=new ce(t),this.shaftTopTransform=new Se,this.shaftLeafTransform=new Se,this.shaftMesh=g(void 0,(e=this,function(t){t.generate_v2sixm$(function(t){return function(e){return t.makeShaftGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(e));var i=new Ft;return i.roughness=.3,t.shader=new Bt(i),s})),this.shaftLeafMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeShaftLeafGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new Ft;return i.roughness=.5,e.shader=new Bt(i),s}}(this)),this.leafMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeLeafGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new Ft;return i.roughness=.5,e.shader=new Bt(i),s}}(this)),this.blossomMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeBlossomGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new Ft;return i.roughness=.8,e.shader=new Bt(i),s}}(this)),this.applyTint_d7aj7k$(m.Companion.fromHsv_7b5o5w$(this.rand.randomF_dleff0$(0,360),.12,this.rand.randomF_dleff0$(.7,1),1).toLinear())}function _u(){var t;pe.call(this,we([re.Companion.POSITIONS,re.Companion.NORMALS,re.Companion.TEXTURE_COORDS,re.Companion.TANGENTS])),this.isCastingShadow=!1,this.generate_v2sixm$((t=this,function(e){return t.makeGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),e.geometry.generateTangents_mx4ult$(),s}));var e=new Ft;e.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/granitesmooth1/granitesmooth1-albedo4.jpg"),e.useNormalMap_9sobi5$(Or().pbrBasePath+"/granitesmooth1/granitesmooth1-normal2.jpg"),e.useRoughnessMap_ivxn3r$(Or().pbrBasePath+"/granitesmooth1/granitesmooth1-roughness3.jpg"),this.shader=new Bt(e)}function mu(){var t;pe.call(this,we([re.Companion.POSITIONS,re.Companion.NORMALS,re.Companion.COLORS])),this.generate_v2sixm$((t=this,function(e){return t.makeGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}));var e=new Ft;e.roughness=.3,this.shader=new Bt(e)}function $u(){Kr.call(this,"Simplification"),this.models=vt(),this.modelWireframe=new Pi,this.srcModel=null,this.dispModel=new pe(we([re.Companion.POSITIONS,re.Companion.NORMALS])),this.heMesh=null,this.simplifcationGrade=1,this.autoRun_z6bycc$_0=this.autoRun_z6bycc$_0,this.facesValLbl_1vvnvx$_0=this.facesValLbl_1vvnvx$_0,this.vertsValLbl_bpoadb$_0=this.vertsValLbl_bpoadb$_0,this.timeValLbl_itlx8a$_0=this.timeValLbl_itlx8a$_0,this.autoRotate=!0,this.dispModel.shader=v(Cu),this.srcModel=this.makeCosGrid_0();var t=this.models,e=this.srcModel;t.put_xwzc9p$("cos",e),this.heMesh=new Fi(this.srcModel)}function yu(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$SimplificationDemo=t,this.local$$receiver=e}function vu(t,e){return function(i){i.unaryPlus_uv0sim$(t.dispModel),i.unaryPlus_uv0sim$(t.modelWireframe);var n=i.onUpdate,o=function(t,e,i){return function(n,o){return t.autoRotate&&i.rotate_ad55pp$(3*e.deltaT,$.Companion.Y_AXIS),s}}(t,e,i);return n.add_11rb$(o),s}}function gu(t,e,i,n,o,r){z.call(this,r),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$name=i,this.local$scale=n,this.local$offset=o}function bu(t){return function(e){return e.button_9zrh0o$("Cow",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("cow"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Teapot",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("teapot"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Bunny",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("bunny"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Cosine Grid",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("cos"))?i:t.srcModel,t.simplify(),s}}(t)),s}}function xu(t){return s}function wu(t){return s}function zu(t){return function(e){var i=e.toggleButton_8v9fdr$("Draw Solid",t.dispModel.isVisible,xu),n=e.toggleButton_8v9fdr$("Draw Wireframe",t.modelWireframe.isVisible,wu),o=i.onStateChange,r=function(t,e){return function(i){return t.dispModel.isVisible=i.isEnabled,i.isEnabled||e.isEnabled||(e.isEnabled=!0),s}}(t,n);o.add_11rb$(r);var a=n.onStateChange,l=function(t,e){return function(i){return t.modelWireframe.isVisible=i.isEnabled,i.isEnabled||e.isEnabled||(e.isEnabled=!0),s}}(t,i);return a.add_11rb$(l),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function ku(t){return s}function Su(t){return function(e){return e.sliderWithValue_xbu91d$("Ratio:",100,1,100,void 0,void 0,function(t){return function(e){return t.simplifcationGrade=e.value/100,t.autoRun.isEnabled&&t.simplify(),s}}(t)),e.button_9zrh0o$("Update Mesh",function(t){return function(e){return t.simplify(),s}}(t)),t.autoRun=e.toggleButton_8v9fdr$("Auto Update",!0,ku),t.facesValLbl=e.textWithValue_puj7f4$("Faces:",""),t.vertsValLbl=e.textWithValue_puj7f4$("Vertices:",""),t.timeValLbl=e.textWithValue_puj7f4$("Time:",""),s}}function Cu(t){return t.albedoSource=y.STATIC_ALBEDO,t.albedo=m.Companion.WHITE,t.roughness=.15,s}function Nu(){Kr.call(this,"Procedural Tree"),this.treeGen=null,this.trunkMesh=null,this.leafMesh=null,this.autoRotate=!0,this.windSpeed=2.5,this.windAnimationPos=0,this.windStrength=1,this.lightDirection=new $t(-1,-1.5,-1).norm();var t=new Bu(2.75,3,3.5);this.treeGen=new Lu(t,void 0,void 0,this.lightDirection),this.treeGen.generate_za3lpa$()}function Eu(t,i,n,o){return function(r){r.generate_v2sixm$(function(t){return function(i){var n;n=Ki.INFO;var o=Zi();t.treeGen.buildTrunkMesh_84rojv$(i);var r=Fe.Log,a=e.getKClassFromExpression(i).simpleName;return n.level>=r.level.level&&r.printer(n,a,"Generated "+(i.geometry.numIndices/3|0)+" trunk triangles in "+Vi(Zi()-o,3)+" ms"),s}}(t));var a={v:null},l={v:null},u=new Ft,p=i,c=n;u.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/bark_pine/Bark_Pine_baseColor.jpg"),u.useOcclusionMap_9sobi5$(Or().pbrBasePath+"/bark_pine/Bark_Pine_ambientOcclusion.jpg"),u.useNormalMap_9sobi5$(Or().pbrBasePath+"/bark_pine/Bark_Pine_normal.jpg"),u.useRoughnessMap_ivxn3r$(Or().pbrBasePath+"/bark_pine/Bark_Pine_roughness.jpg"),u.useImageBasedLighting_po417x$(p),u.shadowMaps.addAll_brywnq$(c),u.roughness=1;var h,d=u,f=new mi(d,t.treePbrModel_0(d));r.onDispose.add_11rb$((h=f,function(t,e){var i,n,o,r;return null!=(i=h.albedoMap)&&i.dispose(),null!=(n=h.occlusionMap)&&n.dispose(),null!=(o=h.normalMap)&&o.dispose(),null!=(r=h.roughnessMap)&&r.dispose(),s})),f.onPipelineCreated.add_11rb$(function(t,i,n){return function(o,r,a){var l,u,p,c,h=i,d=t.model;t:do{var f;for(p=wt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(kt(g.name,"windAnim")&&e.isType(g,xe)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,xe)?m:Q();if(null!=b){c=b;break t}}}c=null}while(0);h.v=null!=(l=c)?l.uniform:null;var x,w,z=n,k=t.model;t:do{var S;for(x=wt.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&x.mask)){var N,E,T=C.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(kt(O.name,"windStrength")&&e.isType(O,xe)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,xe)?N:Q();if(null!=M){w=M;break t}}}w=null}while(0);return z.v=null!=(u=w)?u.uniform:null,s}}(f,a,l)),r.shader=f;var _=r.onUpdate,m=function(t,e,i,n){return function(o,r){var a,l;return e.windAnimationPos+=t.deltaT*e.windSpeed,null!=(a=i.v)&&(a.value=e.windAnimationPos),null!=(l=n.v)&&(l.value=e.windStrength),s}}(o,t,a,l);return _.add_11rb$(m),s}}function Tu(t,i,n){return function(o){o.generate_v2sixm$(function(t){return function(i){var n;n=Ki.INFO;var o=Zi();t.treeGen.buildLeafMesh_84rojv$(i);var r=Fe.Log,a=e.getKClassFromExpression(i).simpleName;return n.level>=r.level.level&&r.printer(n,a,"Generated "+(i.geometry.numIndices/3|0)+" leaf triangles in "+Vi(Zi()-o,3)+" ms"),s}}(t));var r={v:null},a={v:null},l=new Ft,u=i,p=n;l.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/leaf.png"),l.useImageBasedLighting_po417x$(u),l.roughness=1,l.alphaMode=new Yi(.5),l.cullMethod=be.NO_CULLING,l.shadowMaps.addAll_brywnq$(p);var c,h=l,f=new mi(h,t.treePbrModel_0(h));o.onDispose.add_11rb$((c=f,function(t,e){return d(c.albedoMap).dispose(),s})),f.onPipelineCreated.add_11rb$(function(t,i,n){return function(o,r,a){var l,u,p,c,h=i,d=t.model;t:do{var f;for(p=wt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(kt(g.name,"windAnim")&&e.isType(g,xe)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,xe)?m:Q();if(null!=b){c=b;break t}}}c=null}while(0);h.v=null!=(l=c)?l.uniform:null;var x,w,z=n,k=t.model;t:do{var S;for(x=wt.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&x.mask)){var N,E,T=C.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(kt(O.name,"windStrength")&&e.isType(O,xe)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,xe)?N:Q();if(null!=M){w=M;break t}}}w=null}while(0);return z.v=null!=(u=w)?u.uniform:null,s}}(f,r,a)),o.shader=f;var _=o.onUpdate,m=function(t,e,i){return function(n,o){var r,a;return null!=(r=e.v)&&(r.value=t.windAnimationPos),null!=(a=i.v)&&(a.value=t.windStrength),s}}(t,r,a);return _.add_11rb$(m),s}}function Pu(t,i,n){return function(o){var r;o.unaryPlus_uv0sim$(t.camera),o.minZoom=1,o.maxZoom=50,o.zoomMethod=xi.ZOOM_CENTER,o.zoom=6,o.setMouseRotation_dleff0$(0,-10),o.setMouseTranslation_y2kzbl$(0,2,0),(e.isType(r=t.camera,J)?r:Q()).clipFar=50;var a=o.onUpdate,l=function(t,e,i){return function(n,o){return t.autoRotate&&(i.verticalRotation+=3*e.deltaT),s}}(i,n,o);return a.add_11rb$(l),s}}function Ou(t){return function(i){return i.sliderWithValue_xbu91d$("Grow Distance:",t.treeGen.growDistance,.1,.4,void 0,void 0,function(t){return function(e){return t.treeGen.growDistance=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Kill Distance:",t.treeGen.killDistance,1,4,void 0,void 0,function(t){return function(e){return t.treeGen.killDistance=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Attraction Points:",t.treeGen.numberOfAttractionPoints,100,1e4,void 0,void 0,function(t){return function(e){return t.treeGen.numberOfAttractionPoints=mt(e.value),s}}(t)),i.sliderWithValue_xbu91d$("Radius of Influence:",t.treeGen.radiusOfInfluence,.25,10,void 0,void 0,function(t){return function(e){return t.treeGen.radiusOfInfluence=e.value,s}}(t)),i.button_9zrh0o$("Generate Tree",function(t){return function(i){var n,o;if(t.treeGen.generate_za3lpa$(),null!=(n=t.trunkMesh)){var r=t,a=n.geometry,l=a.isBatchUpdate;a.isBatchUpdate=!0,a.clear();var u,p=new De(a);u=Ki.INFO;var c=Zi();r.treeGen.buildTrunkMesh_84rojv$(p),a.generateTangents_mx4ult$();var h=Fe.Log,d=e.getKClassFromExpression(a).simpleName;u.level>=h.level.level&&h.printer(u,d,"Generated "+(a.numIndices/3|0)+" trunk triangles in "+Vi(Zi()-c,3)+" ms"),a.hasChanged=!0,a.isBatchUpdate=l}if(null!=(o=t.leafMesh)){var f=t,_=o.geometry,m=_.isBatchUpdate;_.isBatchUpdate=!0,_.clear();var $,y=new De(_);$=Ki.INFO;var v=Zi();f.treeGen.buildLeafMesh_84rojv$(y);var g=Fe.Log,b=e.getKClassFromExpression(_).simpleName;$.level>=g.level.level&&g.printer($,b,"Generated "+(_.numIndices/3|0)+" leaf triangles in "+Vi(Zi()-v,3)+" ms"),_.hasChanged=!0,_.isBatchUpdate=m}return s}}(t)),s}}function Mu(t){return function(e){return e.sliderWithValue_xbu91d$("Animation Speed",t.windSpeed,0,10,void 0,void 0,function(t){return function(e){return t.windSpeed=e.value,s}}(t)),e.sliderWithValue_xbu91d$("Animation Strength",t.windStrength,0,10,void 0,void 0,function(t){return function(e){return t.windStrength=e.value,s}}(t)),e.toggleButton_8v9fdr$("Toggle Leafs",!0,function(t){return function(e){var i;return null!=(i=t.leafMesh)&&(i.isVisible=e.isEnabled),s}}(t)),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function ju(t){N.call(this,"windNode",t),this.inputPos=new T(new Et($.Companion.ZERO)),this.inputAnim=new T(new Pt(0)),this.inputStrength=new T(new Pt(1)),this.outputPos=new T(new lt("windOutPos"),this)}function Au(t){return t.texCoord.set_dleff0$(t.position.x,t.position.z).scale_mx4ult$(.2),s}function Iu(t){return function(e){e.transform.push();var i=t;e.color=m.Companion.LIGHT_GRAY.withAlpha_mx4ult$(.2),e.vertexModFun=Au;var n,o=new bi;return o.sizeX=2*i,o.sizeY=2*i,o.stepsX=200,o.stepsY=200,o.heightFun=(n=o,function(t,e){var i=7*(t/n.stepsX-.5),o=7*(e/n.stepsY-.5),r=i*i+o*o,s=j.sqrt(r);return.2*j.cos(s)-.2}),e.grid_gtbnl3$(o),e.transform.pop(),e.geometry.generateTangents_mx4ult$(),s}}function Ru(t,e,i){return function(n){return n.useAlbedoMap_ivxn3r$(Or().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_diff_2k.jpg"),n.useNormalMap_9sobi5$(Or().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_Nor_2k.jpg"),n.useRoughnessMap_ivxn3r$(Or().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_rough_2k.jpg"),n.useOcclusionMap_9sobi5$(Or().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_AO_2k.jpg"),n.useDisplacementMap_9sobi5$(Or().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_disp_2k.jpg"),n.useImageBasedLighting_po417x$(t),n.shadowMaps.addAll_brywnq$(e),i.onDispose.add_11rb$(function(t){return function(e,i){var n,o,r,a,l;return null!=(n=t.albedoMap)&&n.dispose(),null!=(o=t.normalMap)&&o.dispose(),null!=(r=t.roughnessMap)&&r.dispose(),null!=(a=t.occlusionMap)&&a.dispose(),null!=(l=t.displacementMap)&&l.dispose(),s}}(n)),s}}function Lu(t,e,i,n,o){void 0===e&&(e=new $(0,1,0)),void 0===i&&(i=$.Companion.ZERO),void 0===n&&(n=null),void 0===o&&(o=A.defaultRandomInstance),this.distribution=t,this.baseTop=e,this.baseBot=i,this.primaryLightDir=n,this.random=o,this.radiusOfInfluence=1,this.growDistance=.15,this.killDistance=1.5,this.numberOfAttractionPoints=3e3,this.attractionPoints_0=M(),this.attractionPointsTree_0=Ji(sn()),this.attractionPointTrav_0=new en,this.treeNodes_0=M(),this.root_0=new Fu(this)}function Du(t){if(null!=t.parent){var e=d(t.parent).texV;t.texV=e+t.distance_czzhiu$(d(t.parent))/(2*t.radius*Kt.PI*1.5)}return s}function qu(t){ut(t,this),this.nearestNode_3mwxa2$_0=null,this.nearestNodeDist_dewf4c$_0=Qi.MAX_VALUE,this.isOpen=!0}function Fu(t){this.$outer=t,oi(this),this.children=M(),this.parent=null,this.branchDepth=0,this.influencingPts=M(),this.isFinished=!1,this.radius=.005,this.texV=0,this.uScale=1,this.vScale=3,this.circumPts=M()}function Bu(t,e,i,n){void 0===n&&(n=A.defaultRandomInstance),nn.call(this),this.centerY=t,this.width=e,this.height=i,this.random_0=n,this.borders_0=M(),this.tmpPt1_0=oi(),this.tmpPt2_0=on(),this.e00_0=on(),this.e01_0=on(),this.e10_0=on(),this.e11_0=on(),this.seedPts_0=M();for(var o=1;o<=8;o++){for(var r=new rn(3),s=0;s<=7;s++){var a=s/7*Kt.PI,l=1<=s&&s<7?this.random_0.randomF_dleff0$(.4,.6):.5,u=j.sin(a)*(this.width-.4)*l+.2,p=j.cos(a)*this.height*l+this.centerY,c=r.ctrlPoints,h=new $i(u,p);c.add_11rb$(h)}r.ctrlPoints.add_wxm5ur$(0,new $i(0,this.centerY+.5*this.height)),r.ctrlPoints.add_11rb$(new $i(0,this.centerY-.5*this.height)),r.addInterpolationEndpoints();for(var d=M(),f=0;f<=20;f++){var _=r.evaluate_f6p79m$(f/20,on());d.add_11rb$(_)}this.borders_0.add_11rb$(d)}this.seed_0()}function Uu(){Or().setProperty_bm4g0d$("assetsBaseDir","../assets"),xr(Vu().get_11rb$("demo"))}function Vu(){var t,e=vt();if(window.location.search.length>1)for(t=an(window.location.search.substring(1),["&"]).iterator();t.hasNext();){var i=t.next(),n=an(i,["="]);if(2===n.size){var o=n.get_za3lpa$(0),r=n.get_za3lpa$(1),s=decodeURIComponent(o).toString(),a=decodeURIComponent(r).toString();e.put_xwzc9p$(s,a)}}return e}tu.$metadata$={kind:P,simpleName:"Glas",interfaces:[Z]},Object.defineProperty(au.prototype,"roses",{configurable:!0,get:function(){return null==this.roses_wwovcl$_0?r("roses"):this.roses_wwovcl$_0},set:function(t){this.roses_wwovcl$_0=t}}),pu.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},pu.prototype=Object.create(z.prototype),pu.prototype.constructor=pu,pu.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,Or().envMapBasePath+"/syferfontein_0d_clear_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;this.local$this$.unaryPlus_uv0sim$(x.Skybox.cube_wgmpek$(t.reflectionMap,1));var e=new l(this.local$this$,0);e.optimizeForDirectionalLight=!0,e.shadowBounds=Oe(new $(-30,0,-30),new $(30,60,30));var i=e,n=new X;n.isWithScreenSpaceReflections=!0,n.isWithAmbientOcclusion=!0,n.isWithEmissive=!0,n.maxGlobalLights=1,n.useImageBasedLighting_po417x$(t),n.useShadowMaps_gdx315$(Me(i));var o,r=n,a=new Y(this.local$this$,r),u=this.local$this$ProceduralDemo;null!=(o=a.aoPipeline)&&(o.radius=.6);var c=a.contentGroup;c.unaryPlus_uv0sim$(new tu(d(a.pbrPass.colorTexture),t)),c.unaryPlus_uv0sim$(new mu),c.unaryPlus_uv0sim$(new _u),u.roses=new du,c.unaryPlus_uv0sim$(u.roses);var h=a;return i.drawNode=h.contentGroup,this.local$this$.unaryPlus_uv0sim$(h.renderOutput),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},au.prototype.setupMainScene_aemszp$=function(t){var e,i,n=new L(null);return n.unaryPlus_uv0sim$(a(n,void 0,lu(n,this))),n.lighting.singleLight_q9zcvo$(uu),t.assetMgr.launch_eln4bt$((e=n,i=this,function(t,n,o){var r=new pu(e,i,t,this,n);return o?r:r.doResume(null)})),n},au.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,i=t,function(t){return t.section_yfmn31$("Roses",cu(e,i)),t.section_yfmn31$("Scene",hu(e)),s}));var e,i},au.$metadata$={kind:P,simpleName:"ProceduralDemo",interfaces:[Kr]},du.prototype.makeRose_za3lpa$=function(t){var e,i=new fu(t);this.unaryPlus_uv0sim$($e(void 0,(e=i,function(t){return t.unaryPlus_uv0sim$(e.shaftMesh),t.unaryPlus_uv0sim$(e.shaftLeafMesh),t.unaryPlus_uv0sim$(e.leafMesh),t.unaryPlus_uv0sim$(e.blossomMesh),s})))},fu.prototype.applyTint_d7aj7k$=function(t){this.applyTint_0(this.shaftMesh.geometry,t),this.applyTint_0(this.shaftLeafMesh.geometry,t),this.applyTint_0(this.leafMesh.geometry,t),this.applyTint_0(this.blossomMesh.geometry,t)},fu.prototype.applyTint_0=function(t,e){var i;i=t.numVertices;for(var n=0;n<i;n++){t.vertexIt.index=n;var o=t.vertexIt;o.color.r=o.color.r*e.r,o.color.g=o.color.g*e.g,o.color.b=o.color.b*e.b,o.color.a=o.color.a*e.a}},fu.prototype.makeShaftGeometry_0=function(t){t.transform.push(),t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var e,i=new Le;t.circleShape_k80pjh$(i,.2,8);for(var n=this.rand.randomI_vux9f0$(2,3),o=0;o<6;o++){var r=new $t(this.rand.randomF_dleff0$(-1,1),this.rand.randomF_dleff0$(-1,1),0).norm();t.rotate_ad55pp$(this.rand.randomF_dleff0$(0,15),r);var s=this.rand.randomF_dleff0$(2,4),a=o/6;if(t.scale_y2kzbl$(.8,.8,1),t.translate_y2kzbl$(0,0,.1*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.15).mix_y83vuj$(m.Companion.BLACK,.25),t.sample_afatab$(i),t.scale_y2kzbl$(.8,.8,1),t.translate_y2kzbl$(0,0,.2*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.3),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.4*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.55),t.sample_afatab$(i),t.scale_y2kzbl$(1.25,1.25,1),t.translate_y2kzbl$(0,0,.2*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.7).mix_y83vuj$(m.Companion.BLACK,.25),t.sample_afatab$(i),t.scale_y2kzbl$(1.25,1.25,1),t.translate_y2kzbl$(0,0,.1*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.85).mix_y83vuj$(m.Companion.BLACK,.55),t.sample_afatab$(i),o===n)this.shaftLeafTransform.set_d4zu6j$(t.transform);else{e=this.rand.randomI_vux9f0$(0,1);for(var l=0;l<e;l++)this.makeThorn_0(t)}}t.translate_y2kzbl$(0,0,.2),t.transform.push(),t.scale_y2kzbl$(1.5,1.5,1),t.sample_afatab$(i),t.transform.pop(),t.translate_y2kzbl$(0,0,.15),t.transform.push(),t.scale_y2kzbl$(3,3,1),t.sample_afatab$(i),t.transform.pop(),t.fillTop_pvgy1j$(i),this.shaftTopTransform.set_d4zu6j$(t.transform),t.transform.pop()},fu.prototype.makeThorn_0=function(t){t.transform.push();var e=new $t(this.rand.randomF_dleff0$(-1,1),this.rand.randomF_dleff0$(-1,1),0).norm();t.rotate_ad55pp$(90,e);var i=new $t(0,0,1).rotate_ad55pp$(-90,e).scale_mx4ult$(.1);t.translate_y2kzbl$(0,0,.1);var n=new Le;t.circleShape_k80pjh$(n,.18,8);for(var o=0;o<=4;o++){var r=o/4,s=1-r,a=j.pow(s,1.5);t.scale_y2kzbl$(a,a,1),t.sample_afatab$(n),t.scale_y2kzbl$(1/a,1/a,1),t.translate_y2kzbl$(0,0,.1*(1-r)),t.translate_czzhiu$(i)}t.transform.pop()},fu.prototype.makeShaftLeafGeometry_0=function(t){t.transform.mul_d4zu6j$(this.shaftLeafTransform),t.rotate_ad55pp$(this.rand.randomF_dleff0$(0,360),$.Companion.Z_AXIS);for(var e=he([this.shaftGrad.getColor_y2kzbl$(.7),m.Companion.MD_LIGHT_GREEN_900.toLinear()]),i=0;i<=1;i++){t.transform.push(),t.rotate_ad55pp$(this.rand.randomF_dleff0$(30,45),$.Companion.X_AXIS),t.color=e.getColor_y2kzbl$(0);var n=M(),o=this.rand.randomF_dleff0$(-4,4),r=this.rand.randomF_dleff0$(-4,4);t.transform.push();var s=new Le;t.circleShape_k80pjh$(s,.1,8),t.sample_afatab$(s),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.scale_y2kzbl$(.6,.6,1),t.sample_afatab$(s),t.scale_y2kzbl$(1/.6,1/.6,1),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.scale_y2kzbl$(.4,.4,1),t.sample_afatab$(s),t.scale_y2kzbl$(2.5,2.5,1);for(var a=0;a<=10;a++){t.color=e.getColor_y2kzbl$(a/10),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5)+o,$.Companion.Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5)+r,$.Companion.Z_AXIS);var l=.4*j.pow(.89,i);t.scale_y2kzbl$(l,l,1),t.sample_afatab$(s);var u=(new Se).set_d4zu6j$(t.transform).resetScale();n.add_11rb$(u),t.scale_y2kzbl$(1/l,1/l,1)}t.fillTop_pvgy1j$(s),t.transform.pop();var p=new Le;t.color=m.Companion.MD_LIGHT_GREEN_900.mix_y83vuj$(m.Companion.MD_BROWN_900,.4).toLinear();for(var c=M(),h=-6;h<=6;h++){var d=h/6,f=j.abs(d)-.5,y=j.pow(f,2)-.25,v=new $(-.5*y,.2*h,.15*_(h)*(.7+.3*d*d));c.add_11rb$(v)}var g=new Re(!0);p.shapes.add_11rb$(g);var b,x=g.positions,w=ut(ni(c));for(w.x=w.x+.01,x.add_11rb$(w),b=c.iterator();b.hasNext();){var z=b.next(),k=g.positions,S=ut(z);S.x=S.x+.01,k.add_11rb$(S)}var C=g.positions,N=ut(qe(c));N.x=N.x+.01,C.add_11rb$(N);var E,T=g.positions,P=ut(qe(c));for(P.x=P.x-.01,T.add_11rb$(P),E=Be(c).iterator();E.hasNext();){var O=E.next(),A=g.positions,I=ut(O);I.x=I.x-.01,A.add_11rb$(I)}var R=g.positions,L=ut(ni(c));L.x=L.x-.01,R.add_11rb$(L);var D=Ti([.6,.9,1,.95,.85,.7,.5,.35,.22,.12,.05]);t.transform.push();var q,F,B=this.rand.randomF_dleff0$(-60,60),U=0;for(q=n.iterator();q.hasNext();){var V=q.next(),G=Ue((U=(F=U)+1|0,F));t.transform.set_d4zu6j$(V),t.rotate_ad55pp$(B,$.Companion.Z_AXIS);for(var H=D.get_za3lpa$(G),W=G<Ae(D)?D.get_za3lpa$(G+1|0)+.05:0,K=1/H,X={v:1},Y=0;Y<=4;Y++){var Z=Y/4;X.v=H*(1-Z)+W*Z,t.translate_y2kzbl$(0,0,.06),t.rotate_ad55pp$(r/5,$.Companion.Z_AXIS),t.transform.push(),t.scale_y2kzbl$(X.v,X.v,X.v),t.sample_afatab$(p),t.transform.pop()}var J=t.color;t.scale_y2kzbl$(.8*X.v,X.v,X.v),t.translate_y2kzbl$(0,0,.02*K),t.color=J.mix_y83vuj$(m.Companion.BLACK,.4),t.sample_afatab$(p),t.translate_y2kzbl$(0,0,.01*K),t.sample_afatab$(p),t.scale_y2kzbl$(1.25,1,1),t.color=J,t.translate_y2kzbl$(0,0,.02*K),t.sample_afatab$(p)}t.transform.pop(),t.transform.pop(),t.rotate_ad55pp$(this.rand.randomF_dleff0$(160,220),$.Companion.Z_AXIS)}},fu.prototype.withXyScale_0=function(t,e,i){t.scale_y2kzbl$(e,e,1),i(t),t.scale_y2kzbl$(1/e,1/e,1)},fu.prototype.makeLeafGeometry_0=function(t){t.transform.push(),t.transform.mul_d4zu6j$(this.shaftTopTransform);for(var e=0;e<=5;e++){t.transform.push(),t.scale_y2kzbl$(.8,.8,.8),t.rotate_ad55pp$(60*e,$.Companion.Z_AXIS);for(var i=new Le,n=M(),o=.03,r=0;r<=10;r++){var s=(r/10*72-36)*A.DEG_2_RAD,a=5===r?-.05:0;if(5===r){var l=s-2*A.DEG_2_RAD,u=new Ct(j.cos(l)-.7+this.rand.randomF_dleff0$(-o,o),j.sin(l)+this.rand.randomF_dleff0$(-o,o));n.add_11rb$(u)}var p=new Ct(j.cos(s)-.7+this.rand.randomF_dleff0$(-o,o)+a,j.sin(s)+this.rand.randomF_dleff0$(-o,o));if(n.add_11rb$(p),5===r){var c=s+2*A.DEG_2_RAD,h=new Ct(j.cos(c)-.7+this.rand.randomF_dleff0$(-o,o),j.sin(c)+this.rand.randomF_dleff0$(-o,o));n.add_11rb$(h)}}var d,f,_=new Re(!0);for(i.shapes.add_11rb$(_),d=n.iterator();d.hasNext();){var m=d.next();_.xy_dleff0$(1.05*m.x,1.05*m.y)}for(f=Be(n).iterator();f.hasNext();){var y=f.next();_.xy_dleff0$(y.x,y.y)}t.rotate_ad55pp$(90,$.Companion.Y_AXIS);var v,g,b=se([.5,.7,.8,.93,1,.95,.8,.7,.6,.35,.2,.1,0]),x=0;for(v=b.iterator();v.hasNext();){var w=v.next();t.color=this.blossomLeafGrad.getColor_y2kzbl$(Ue((x=(g=x)+1|0,g))/Ae(b)),t.translate_y2kzbl$(0,0,.3),t.rotate_ad55pp$(100/b.size+this.rand.randomF_dleff0$(-8,8),$.Companion.NEG_Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-8,8),$.Companion.X_AXIS),t.transform.push(),t.scale_y2kzbl$(w,w,1),t.sample_afatab$(i),t.transform.pop()}t.transform.pop()}t.transform.pop()},fu.prototype.makeBlossomGeometry_0=function(t){t.transform.push(),t.transform.mul_d4zu6j$(this.shaftTopTransform);for(var e=0;e<=17;e++){t.transform.push();var i=e/17*.8+.2;t.scale_y2kzbl$(i,i,1.2),t.rotate_ad55pp$(97*e,$.Companion.Z_AXIS);for(var n=new Le,o=M(),r=0;r<=10;r++){var s=(r/10*120-60)*A.DEG_2_RAD,a=new Ct(j.cos(s)-.9+this.rand.randomF_dleff0$(-.03,.03),j.sin(s)+this.rand.randomF_dleff0$(-.03,.03));o.add_11rb$(a)}var l,u,p=new Re(!0);for(n.shapes.add_11rb$(p),l=o.iterator();l.hasNext();){var c=l.next();p.xy_dleff0$(1.05*c.x,1.05*c.y)}for(u=Be(o).iterator();u.hasNext();){var h=u.next();p.xy_dleff0$(h.x,h.y)}t.rotate_ad55pp$(60,$.Companion.Y_AXIS);var d,f,_=se([.5,.9,1,.93,.8,.7,.72,.8,.95,1.05,1,.95,.85,.5]),y=0;for(d=_.iterator();d.hasNext();){var v=d.next(),g=Ue((y=(f=y)+1|0,f)),b=v*this.rand.randomF_dleff0$(.95,1.05);t.color=new m(1,.1,.1).toLinear(),t.translate_y2kzbl$(0,0,.2);var x=20*(.5-g/_.size);t.rotate_ad55pp$(x+this.rand.randomF_dleff0$(-5,5),$.Companion.NEG_Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5),$.Companion.X_AXIS),t.transform.push(),t.scale_y2kzbl$(b,b,1),t.translate_y2kzbl$(.7*(1-b),.7*(1-b),0),t.sample_afatab$(n),t.transform.pop()}t.fillTop_pvgy1j$(n),t.transform.pop()}t.transform.pop()},fu.$metadata$={kind:P,simpleName:"GeneratedRose",interfaces:[]},du.$metadata$={kind:P,simpleName:"Roses",interfaces:[Z]},_u.prototype.makeGeometry_0=function(t){t.translate_y2kzbl$(0,-1,0),t.rotate_ad55pp$(90,$.Companion.X_AXIS);var e=new Le,i=new Re(!0);e.shapes.add_11rb$(i);for(var n=0;n<=100;n++){var o=2*Kt.PI*n/100;i.xy_dleff0$(30*j.cos(o),30*j.sin(o)),i.uv_dleff0$(0,0)}for(var r=i,s=0;s<=15;s++){var a=s/15;t.transform.push();var l,u,p=(1-a)*Kt.PI,c=1*j.cos(p),h=a*Kt.PI,d=(30+1*j.sin(h))/30,f=.04*(30+1*a*Kt.PI),_=0;for(l=r.texCoords.iterator();l.hasNext();){var m=l.next(),y=Ue((_=(u=_)+1|0,u));m.set_dleff0$(r.positions.get_za3lpa$(y).x,r.positions.get_za3lpa$(y).y).norm().scale_mx4ult$(f)}t.translate_y2kzbl$(0,0,c),t.scale_y2kzbl$(d,d,1),0===s?t.sampleAndFillBottom_afatab$(e):t.sample_afatab$(e),t.transform.pop()}t.fillTop_pvgy1j$(e)},_u.$metadata$={kind:P,simpleName:"Table",interfaces:[pe]},mu.prototype.makeGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.translate_y2kzbl$(-7.5,-2.5,0),t.scale_y2kzbl$(1.8,1.8,1.8),t.translate_y2kzbl$(0,0,.15);var e,i=he([m.Companion.MD_BROWN,m.Companion.MD_BLUE_300]),n=Ii(10);e=n.length-1|0;for(var o=0;o<=e;o++)n[o]=i.getColor_y2kzbl$(o/9).mix_y83vuj$(m.Companion.BLACK,.3);var r=he(n.slice());this.makeGrid_0(t,i),this.makeTube_0(t,r)},mu.prototype.makeGrid_0=function(t,e){var i=new Le,n=new Re(!0);i.shapes.add_11rb$(n),n.xy_dleff0$(.8,1),n.xy_dleff0$(-.8,1),n.xy_dleff0$(-1,.8),n.xy_dleff0$(-1,-.8),n.xy_dleff0$(-.8,-1),n.xy_dleff0$(.8,-1),n.xy_dleff0$(1,-.8),n.xy_dleff0$(1,.8);for(var o=0;o<24;o++)for(var r=2*Kt.PI*o/24,s=0;s<=50;s++){t.transform.push();var a=s/50,l=180*a*(o%2==0?1:-1);t.color=e.getColor_y2kzbl$(a).toLinear(),t.rotate_ad55pp$(l,$.Companion.Z_AXIS);var u=1+(a-.5)*(a-.5)*4;t.translate_y2kzbl$(j.cos(r)*u,j.sin(r)*u,0),t.translate_y2kzbl$(0,0,10*a),t.rotate_ad55pp$(r*A.RAD_2_DEG,$.Companion.Z_AXIS),t.scale_y2kzbl$(.05,.05,1),t.sample_afatab$(i,0!==s),t.transform.pop()}},mu.prototype.makeTube_0=function(t,e){var i=new Le;t.circleShape_k80pjh$(i,2.2,60),t.transform.push();for(var n=0;n<=1;n++){var o=1===n;t.transform.push(),t.color=e.getColor_y2kzbl$(0).toLinear(),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,!1,o),t.scale_y2kzbl$(1/.97,1/.97,1),t.scale_y2kzbl$(.96,.96,1),t.sample_afatab$(i,void 0,o),t.scale_y2kzbl$(1/.96,1/.96,1),t.scale_y2kzbl$(.95,.95,1);for(var r=0;r<=20;r++){t.transform.push();var s=r/20,a=s*Kt.PI,l=1-.6*j.sin(a),u=s*Kt.PI,p=5-5*j.cos(u);t.color=e.getColor_y2kzbl$(s).toLinear(),t.translate_y2kzbl$(0,0,p),t.scale_y2kzbl$(l,l,1),t.sample_afatab$(i,void 0,o),t.transform.pop(),0===r&&t.fillTop_pvgy1j$(i)}t.translate_y2kzbl$(0,0,10),t.scale_y2kzbl$(1/.95,1/.95,1),t.scale_y2kzbl$(.96,.96,1),t.sample_afatab$(i,void 0,o),t.scale_y2kzbl$(1/.96,1/.96,1),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,void 0,o),t.transform.pop(),t.translate_y2kzbl$(0,0,-.15),t.scale_y2kzbl$(1,1,1.03)}t.transform.pop();for(var c=0;c<=1;c++)t.color=e.getColor_y2kzbl$(c).toLinear(),t.transform.push(),t.translate_y2kzbl$(0,0,10.15*c-.15),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,!1),t.scale_y2kzbl$(1/.97,1/.97,1),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.03),t.scale_y2kzbl$(1.02,1.02,1),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.09),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.03),t.scale_y2kzbl$(1/1.02,1/1.02,1),t.sample_afatab$(i),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i),t.transform.pop()},mu.$metadata$={kind:P,simpleName:"Vase",interfaces:[pe]},Object.defineProperty($u.prototype,"autoRun",{configurable:!0,get:function(){return null==this.autoRun_z6bycc$_0?r("autoRun"):this.autoRun_z6bycc$_0},set:function(t){this.autoRun_z6bycc$_0=t}}),Object.defineProperty($u.prototype,"facesValLbl",{configurable:!0,get:function(){return null==this.facesValLbl_1vvnvx$_0?r("facesValLbl"):this.facesValLbl_1vvnvx$_0},set:function(t){this.facesValLbl_1vvnvx$_0=t}}),Object.defineProperty($u.prototype,"vertsValLbl",{configurable:!0,get:function(){return null==this.vertsValLbl_bpoadb$_0?r("vertsValLbl"):this.vertsValLbl_bpoadb$_0},set:function(t){this.vertsValLbl_bpoadb$_0=t}}),Object.defineProperty($u.prototype,"timeValLbl",{configurable:!0,get:function(){return null==this.timeValLbl_itlx8a$_0?r("timeValLbl"):this.timeValLbl_itlx8a$_0},set:function(t){this.timeValLbl_itlx8a$_0=t}}),yu.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},yu.prototype=Object.create(z.prototype),yu.prototype.constructor=yu,yu.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,Or().modelBasePath+"/bunny.gltf.gz",1,new $(0,-3,0),this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,Or().modelBasePath+"/cow.gltf.gz",1,$.Companion.ZERO,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,Or().modelBasePath+"/teapot.gltf.gz",1,new $(0,-1.5,0),this),this.result_0===w)return w;continue;case 4:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},$u.prototype.lateInit_aemszp$=function(t){var e;t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var o=new yu(e,t,this,i);return n?o:o.doResume(null)})),this.simplify()},$u.prototype.setupMainScene_aemszp$=function(t){var e=new L(null);Pe(e);var i=e.lighting.lights;return i.clear(),i.add_11rb$((new yt).setDirectional_czzhiu$(new $(-1,-1,1)).setColor_y83vuj$(m.Companion.MD_RED.mix_y83vuj$(m.Companion.WHITE,.25).toLinear(),2)),i.add_11rb$((new yt).setDirectional_czzhiu$(new $(1,-1,-1)).setColor_y83vuj$(m.Companion.MD_CYAN.mix_y83vuj$(m.Companion.WHITE,.25).toLinear(),2)),e.unaryPlus_uv0sim$($e(void 0,vu(this,t))),e},$u.prototype.simplify=function(){var t=new Di,e=this.dispModel.geometry,i=e.isBatchUpdate;e.isBatchUpdate=!0,this.dispModel.geometry.clear(),this.dispModel.geometry.addGeometry_r7nl2o$(this.srcModel),this.heMesh=new Fi(this.dispModel.geometry,new qi),this.simplifcationGrade<.999&&Ui(this.heMesh,Bi(this.simplifcationGrade));var n=this.modelWireframe.geometry,o=n.isBatchUpdate;n.isBatchUpdate=!0,this.modelWireframe.clear(),this.heMesh.generateWireframe_6olbr4$(this.modelWireframe,m.Companion.MD_LIME),n.hasChanged=!0,n.isBatchUpdate=o;var r=t.takeSecs();r>.5&&(this.autoRun.isEnabled=!1),this.facesValLbl.text=this.heMesh.faceCount.toString(),this.vertsValLbl.text=this.heMesh.vertCount.toString(),this.timeValLbl.text=Vi(r,2)+" s",e.hasChanged=!0,e.isBatchUpdate=i},gu.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},gu.prototype=Object.create(z.prototype),gu.prototype.constructor=gu,gu.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i=new c(!0,!1);if(this.state_0=2,this.result_0=h(this.local$$receiver,this.local$name,i,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(null!=(t=this.result_0)){var n,o=f(t.meshes.values).geometry;n=o.numVertices;for(var r=0;r<n;r++)o.vertexIt.index=r,o.vertexIt.position.scale_mx4ult$(this.local$scale).add_czzhiu$(this.local$offset);var s=Wi(this.local$name,Ie(Gi(this.local$name,47)+1|0,Hi(this.local$name,".gltf.gz")));this.$this.models.put_xwzc9p$(s,o);var a,l=Fe.Log,u=Ki.DEBUG,p=e.getKClassFromExpression(this.local$$receiver).simpleName;u.level>=l.level.level&&l.printer(u,p,"loaded: "+this.local$name+", bounds: "+He(null!=(a=this.$this.models.get_11rb$(this.local$name))?a.bounds:null))}return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},$u.prototype.loadModel_0=function(t,e,i,n,o,r){var s=new gu(this,t,e,i,n,o);return r?s:s.doResume(null)},$u.prototype.makeCosGrid_0=function(){var t=new De(we([re.Companion.POSITIONS,re.Companion.NORMALS]));t.color=m.Companion.MD_RED;var e,i=new bi;return i.sizeX=10,i.sizeY=10,i.stepsX=30,i.stepsY=30,i.heightFun=(e=i,function(t,i){var n=10*(t/e.stepsX-.5),o=10*(i/e.stepsY-.5),r=n*n+o*o,s=j.sqrt(r);return 2*j.cos(s)}),t.grid_gtbnl3$(i),t.geometry},$u.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,function(t){return t.section_yfmn31$("Model",bu(e)),t.section_yfmn31$("Scene",zu(e)),t.section_yfmn31$("Simplification",Su(e)),s}));var e},$u.$metadata$={kind:P,simpleName:"SimplificationDemo",interfaces:[Kr]},Nu.prototype.setupMainScene_aemszp$=function(t){var e,i=new L(null);i.lighting.singleLight_q9zcvo$((e=this,function(t){return t.setDirectional_czzhiu$(e.lightDirection).setColor_y83vuj$(m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),5),s}));var n=new Xi(i,0);n.maxRange=50;var o=Ti([n]),r=new rt([ot(0,m.Companion.fromHex_61zpoe$("B2D7FF").mix_y83vuj$(m.Companion.BLACK,.75)),ot(.35,m.Companion.fromHex_61zpoe$("B2D7FF").mix_y83vuj$(m.Companion.BLACK,.75)),ot(.45,m.Companion.fromHex_61zpoe$("B2D7FF").mix_y83vuj$(m.Companion.BLACK,.25)),ot(.9,m.Companion.fromHex_61zpoe$("3295FF").mix_y83vuj$(m.Companion.BLACK,.45)),ot(1,m.Companion.fromHex_61zpoe$("3295FF").mix_y83vuj$(m.Companion.BLACK,.5))]),l=p.EnvironmentHelper.gradientColorEnvironment_hfkvyz$(i,r,t);return i.unaryPlus_uv0sim$(this.makeTreeGroundGrid_0(10,o,l)),i.unaryPlus_uv0sim$(x.Skybox.cube_wgmpek$(l.reflectionMap)),this.trunkMesh=b(void 0,!0,Eu(this,l,o,t)),this.leafMesh=b(void 0,void 0,Tu(this,l,o)),i.unaryPlus_uv0sim$(d(this.trunkMesh)),i.unaryPlus_uv0sim$(d(this.leafMesh)),i.unaryPlus_uv0sim$(a(i,void 0,Pu(i,this,t))),i},Nu.prototype.setupMenu_aemszp$=function(t){return Do(t,(e=this,function(t){return t.section_yfmn31$("Generator Settings",Ou(e)),t.section_yfmn31$("Scene",Mu(e)),s}));var e},ju.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inputPos,this.inputAnim,this.inputStrength])},ju.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float r = clamp(sqrt("+this.inputPos.ref3f_61zpoe$()+".x * "+this.inputPos.ref3f_61zpoe$()+".x + "+this.inputPos.ref3f_61zpoe$()+".z * "+this.inputPos.ref3f_61zpoe$()+".z) - 0.25, 0.0, 2.0) + \n                        clamp("+this.inputPos.ref3f_61zpoe$()+".z - 1.0, 0.0, 1.0);\n            float windTx = cos("+this.inputPos.ref3f_61zpoe$()+".x * 10.0 + "+this.inputPos.ref3f_61zpoe$()+".y * 2.0 + "+this.inputAnim.ref1f_61zpoe$()+") * r * 0.01 * "+this.inputStrength.ref1f_61zpoe$()+";\n            float windTz = sin("+this.inputPos.ref3f_61zpoe$()+".z * 10.0 - "+this.inputPos.ref3f_61zpoe$()+".y * 2.0 + "+this.inputAnim.ref1f_61zpoe$()+" * 1.1f) * r * 0.01 * "+this.inputStrength.ref1f_61zpoe$()+";\n            "+this.outputPos.declare()+" = "+this.inputPos.ref3f_61zpoe$()+" + vec3(windTx, 0.0, windTz);\n        ")},ju.$metadata$={kind:P,simpleName:"WindNode",interfaces:[N]},Nu.prototype.treePbrModel_0=function(t){var i,n,o=mi.Companion.defaultPbrModel_2ufela$(t),r=new F(o);t:do{var s;for(i=wt.ALL,s=o.stages.values.iterator();s.hasNext();){var a=s.next();if(0!=(a.stage.mask&i.mask)){var l,u,p=a.nodes;e:do{var c;for(c=p.iterator();c.hasNext();){var h=c.next();if(kt(h.name,"localPosInput")&&e.isType(h,Vt)){u=h;break e}}u=null}while(0);var f=null==(l=u)||e.isType(l,Vt)?l:Q();if(null!=f){n=f;break t}}}n=null}while(0);var _=d(n),m=r.addNode_u9w9by$(new ju(o.vertexStageGraph));return m.inputPos=_.input,m.inputAnim=r.pushConstantNode1f_61zpoe$("windAnim").output,m.inputStrength=r.pushConstantNode1f_61zpoe$("windStrength").output,_.input=m.outputPos,o},Nu.prototype.makeTreeGroundGrid_0=function(t,e,i){var n,o,r;return b(void 0,!0,(n=t/2|0,o=i,r=e,function(t){return t.isCastingShadow=!1,t.generate_v2sixm$(Iu(n)),t.shader=v(Ru(o,r,t)),s}))},Nu.$metadata$={kind:P,simpleName:"TreeDemo",interfaces:[Kr]},Object.defineProperty(Lu.prototype,"actualKillDistance",{configurable:!0,get:function(){return this.growDistance*this.killDistance}}),Lu.prototype.seedTree=function(){this.populateAttractionPoints_0(),this.treeNodes_0.clear(),this.root_0=new Fu(this),this.root_0.set_czzhiu$(this.baseBot);var t=this.treeNodes_0,e=this.root_0;t.add_11rb$(e);for(var i=this.baseTop.subtract_2gj7b4$(this.baseBot,oi()).norm().scale_mx4ult$(this.growDistance),n=this.root_0;n.distance_czzhiu$(this.baseTop)>this.growDistance;){var o=new Fu(this);o.set_czzhiu$(n).add_czzhiu$(i),n.addChild_15eqn9$(o),this.treeNodes_0.add_11rb$(o),n=o}},Lu.prototype.generate_za3lpa$=function(t){void 0===t&&(t=1e3);var i,n={v:0};i=Ki.INFO;var o,r=Zi();for(this.seedTree();o=n.v,n.v=o+1|0,o<t&&this.growSingleStep(););this.finishTree();var s=Fe.Log,a=e.getKClassFromExpression(this).simpleName;i.level>=s.level.level&&s.printer(i,a,"Generation done, took "+n.v+" iterations, "+this.treeNodes_0.size+" nodes in "+Vi(Zi()-r,3)+" ms")},Lu.prototype.growSingleStep=function(){var t,e,i,n,o,r,s,a;for(a=this.attractionPoints_0.iterator();a.hasNext();)a.next().nearestNode=null;for(t=this.treeNodes_0.iterator();t.hasNext();){var l=t.next();if(l.influencingPts.clear(),!l.isFinished)for(this.attractionPointTrav_0.setup_2qa7tb$(l,this.radiusOfInfluence).traverse_7efza$(this.attractionPointsTree_0),e=this.attractionPointTrav_0.result.iterator();e.hasNext();){var u=e.next();u.isOpen&&u.checkNearest_15eqn9$(l)}}for(i=this.attractionPoints_0.iterator();i.hasNext();){var p=i.next();p.isOpen&&null!=(o=null!=(n=p.nearestNode)?n.influencingPts:null)&&o.add_11rb$(p)}var c=M(),h=!1;for(r=this.treeNodes_0.iterator();r.hasNext();){var d=r.next();if(d.influencingPts.isEmpty())d.isFinished=!0;else{var f=oi();for(s=d.influencingPts.iterator();s.hasNext();){var _=s.next();f.plusAssign_czzhiu$(_.subtract_2gj7b4$(d,oi()).norm())}f.norm().scale_mx4ult$(this.growDistance);var m=new Fu(this);if(m.set_czzhiu$(d).add_czzhiu$(f),!d.containsChild_15eqn9$(m)){var $;for(d.addChild_15eqn9$(m),c.add_11rb$(m),this.attractionPointTrav_0.setup_2qa7tb$(m,this.actualKillDistance).traverse_7efza$(this.attractionPointsTree_0),$=this.attractionPointTrav_0.result.iterator();$.hasNext();)$.next().isOpen=!1;h=!0}}}return this.treeNodes_0.addAll_brywnq$(c),h},Lu.prototype.finishTree=function(){var t;this.root_0.forEachTopDown_ttqnr0$((t=this,function(e){return null!=e.parent&&(e.plusAssign_czzhiu$(ut(d(e.parent)).subtract_czzhiu$(e).norm().scale_mx4ult$(.5*t.growDistance)),e.x=e.x+t.random.randomF_dleff0$(-.01,.01),e.y=e.y+t.random.randomF_dleff0$(-.01,.01),e.z=e.z+t.random.randomF_dleff0$(-.01,.01)),e.computeTrunkRadiusAndDepth(),e.computeCircumPoints(),s})),this.root_0.forEachBottomUp_ttqnr0$(Du)},Lu.prototype.buildTrunkMesh_84rojv$=function(t){var e;for(e=this.treeNodes_0.iterator();e.hasNext();)e.next().buildTrunkMesh_84rojv$(t);t.geometry.removeDegeneratedTriangles()},Lu.prototype.buildLeafMesh_84rojv$=function(t){var e;for(e=this.treeNodes_0.iterator();e.hasNext();)e.next().buildLeafMesh_84rojv$(t);var i,n=t.geometry;i=n.numVertices;for(var o=0;o<i;o++){n.vertexIt.index=o;var r=n.vertexIt;null!=this.primaryLightDir?r.normal.dot_czzhiu$(this.primaryLightDir)>0&&r.normal.scale_mx4ult$(-1):r.normal.y<0&&r.normal.scale_mx4ult$(-1)}t.geometry.removeDegeneratedTriangles()},Lu.prototype.populateAttractionPoints_0=function(){var t;for(this.attractionPoints_0.clear(),t=this.distribution.nextPoints_za3lpa$(this.numberOfAttractionPoints).iterator();t.hasNext();){var e=t.next(),i=this.attractionPoints_0,n=new qu(e);i.add_11rb$(n)}this.attractionPointsTree_0=Ji(this.attractionPoints_0)},Object.defineProperty(qu.prototype,"nearestNode",{configurable:!0,get:function(){return this.nearestNode_3mwxa2$_0},set:function(t){this.nearestNode_3mwxa2$_0=t,null==t&&(this.nearestNodeDist=Qi.MAX_VALUE)}}),Object.defineProperty(qu.prototype,"nearestNodeDist",{configurable:!0,get:function(){return this.nearestNodeDist_dewf4c$_0},set:function(t){this.nearestNodeDist_dewf4c$_0=t}}),qu.prototype.checkNearest_15eqn9$=function(t){var e=this.distance_czzhiu$(t);e<this.nearestNodeDist&&(this.nearestNode=t,this.nearestNodeDist=e)},qu.$metadata$={kind:P,simpleName:"AttractionPoint",interfaces:[$t]},Fu.prototype.addChild_15eqn9$=function(t){this.children.add_11rb$(t),t.parent=this},Fu.prototype.containsChild_15eqn9$=function(t){var e;for(e=this.children.iterator();e.hasNext();)if(e.next().isFuzzyEqual_2qa7tb$(t))return!0;return!1},Fu.prototype.forEachBottomUp_ttqnr0$=function(t){var e;for(t(this),e=this.children.iterator();e.hasNext();)e.next().forEachBottomUp_ttqnr0$(t)},Fu.prototype.forEachTopDown_ttqnr0$=function(t){var e;for(e=this.children.iterator();e.hasNext();)e.next().forEachTopDown_ttqnr0$(t);t(this)},Fu.prototype.computeTrunkRadiusAndDepth=function(){var t,i,n;if(this.children.isEmpty())this.radius=.01,this.branchDepth=0;else{var o,r=0;for(o=this.children.iterator();o.hasNext();){var s=o.next().radius;r+=j.pow(s,2.25)}if(this.radius=j.pow(r,1/2.25),1===this.children.size)n=this.children.get_za3lpa$(0).branchDepth;else{var a,l=this.children;t:do{var u=l.iterator();if(!u.hasNext()){a=null;break t}var p=u.next();if(!u.hasNext()){a=p;break t}var c=p.branchDepth;do{var h=u.next(),d=h.branchDepth;e.compareTo(c,d)<0&&(p=h,c=d)}while(u.hasNext());a=p}while(0);n=(null!=(i=null!=(t=a)?t.branchDepth:null)?i:0)+1|0}this.branchDepth=n}null==this.parent&&(this.radius*=3,this.children.get_za3lpa$(0).radius=1.5*this.children.get_za3lpa$(0).radius,this.children.get_za3lpa$(0).computeCircumPoints())},Fu.prototype.computeCircumPoints=function(){this.circumPts.clear();var t=null!=this.parent?this.subtract_2gj7b4$(d(this.parent),oi()).norm():this.children.get_za3lpa$(0).subtract_2gj7b4$(this,oi()).norm(),e=ut(t).scale_mx4ult$(-t.times_czzhiu$($.Companion.Z_AXIS)).add_czzhiu$($.Companion.Z_AXIS).norm().scale_mx4ult$(this.radius),i=e.z,n=e.x;e.rotate_ad55pp$(-j.atan2(i,n),t);for(var o=0;o<8;o++){var r=ut(e).add_czzhiu$(this);this.circumPts.add_11rb$(tn(r)),e.rotate_ad55pp$(45,t)}},Fu.prototype.buildTrunkMesh_84rojv$=function(t){var e=(this.radius>.05?2:1)*this.uScale,i=M();if(null!=this.parent)if(this.children.isEmpty()){var n,o,r,s=t.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);o=s.vertexSizeI;for(var l=1;l<=o;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(r=s.numVertices,s.numVertices=r+1|0,r);var u=s.vertexIt;u.position.set_czzhiu$(this),this.subtract_2gj7b4$(d(this.parent),u.normal).norm(),u.texCoord.set_dleff0$(0,this.texV*this.vScale),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0;for(var p=s.numVertices-1|0,c=0;c<=8;c++){var h,f,_,m=t.geometry;m.checkBufferSizes_za3lpa$(),h=m.vertexSizeF;for(var $=1;$<=h;$++)m.dataF.plusAssign_mx4ult$(0);f=m.vertexSizeI;for(var y=1;y<=f;y++)m.dataI.plusAssign_za3lpa$(0);m.vertexIt.index=(_=m.numVertices,m.numVertices=_+1|0,_);var v=m.vertexIt;v.position.set_czzhiu$(d(this.parent).circumPts.get_za3lpa$(c%8)),d(this.parent).circumPts.get_za3lpa$(c%8).subtract_2gj7b4$(d(this.parent),v.normal).norm(),v.texCoord.set_dleff0$(c/8*e,d(this.parent).texV*this.vScale),m.bounds.add_czzhiu$(m.vertexIt.position),m.hasChanged=!0;var g=m.numVertices-1|0;i.add_11rb$(g)}for(var b=0;b<8;b++)t.geometry.addTriIndices_qt1dr2$(p,i.get_za3lpa$(b),i.get_za3lpa$(b+1|0))}else{for(var x=0;x<=8;x++){var w,z,k,S=t.geometry;S.checkBufferSizes_za3lpa$(),w=S.vertexSizeF;for(var C=1;C<=w;C++)S.dataF.plusAssign_mx4ult$(0);z=S.vertexSizeI;for(var N=1;N<=z;N++)S.dataI.plusAssign_za3lpa$(0);S.vertexIt.index=(k=S.numVertices,S.numVertices=k+1|0,k);var E=S.vertexIt;E.position.set_czzhiu$(this.circumPts.get_za3lpa$(x%8)),this.circumPts.get_za3lpa$(x%8).subtract_2gj7b4$(this,E.normal).norm(),E.texCoord.set_dleff0$(x/8*e,this.texV*this.vScale),S.bounds.add_czzhiu$(S.vertexIt.position),S.hasChanged=!0;var T=S.numVertices-1|0;i.add_11rb$(T);var P,O,j,A=t.geometry;A.checkBufferSizes_za3lpa$(),P=A.vertexSizeF;for(var I=1;I<=P;I++)A.dataF.plusAssign_mx4ult$(0);O=A.vertexSizeI;for(var R=1;R<=O;R++)A.dataI.plusAssign_za3lpa$(0);A.vertexIt.index=(j=A.numVertices,A.numVertices=j+1|0,j);var L=A.vertexIt;L.position.set_czzhiu$(d(this.parent).circumPts.get_za3lpa$(x%8)),d(this.parent).circumPts.get_za3lpa$(x%8).subtract_2gj7b4$(d(this.parent),L.normal).norm(),L.texCoord.set_dleff0$(x/8*e,d(this.parent).texV*this.vScale),A.bounds.add_czzhiu$(A.vertexIt.position),A.hasChanged=!0;var D=A.numVertices-1|0;i.add_11rb$(D)}for(var q=0;q<8;q++)t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(2*q|0),i.get_za3lpa$(1+(2*q|0)|0),i.get_za3lpa$(2+(2*q|0)|0)),t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(1+(2*q|0)|0),i.get_za3lpa$(3+(2*q|0)|0),i.get_za3lpa$(2+(2*q|0)|0))}},Fu.prototype.buildLeafMesh_84rojv$=function(t){if(this.branchDepth<=1&&null!=this.parent){var e=this.subtract_2gj7b4$(d(this.parent),oi()),i=e.length();e.norm();for(var n=1;n<=20;n++){this.$outer,t.transform.push();var o,r=this.$outer,s=ut(this.circumPts.get_za3lpa$(0)).subtract_czzhiu$(this).norm().scale_mx4ult$(this.radius+r.random.randomF_dleff0$(0,.15));s.rotate_ad55pp$(r.random.randomF_dleff0$(0,360),e);var a=ut(e).scale_mx4ult$(r.random.randomF_dleff0$(0,i)).add_czzhiu$(s).add_czzhiu$(this);t.translate_czzhiu$(a);var l=0;do{e.dot_czzhiu$($.Companion.X_AXIS)<e.dot_czzhiu$($.Companion.Z_AXIS)?t.rotate_ad55pp$(r.random.randomF_dleff0$(0,360),$.Companion.X_AXIS):t.rotate_ad55pp$(r.random.randomF_dleff0$(0,360),$.Companion.Z_AXIS),t.rotate_ad55pp$(r.random.randomF_dleff0$(0,360),e);var u=null!=r.primaryLightDir;if(u){var p=t.transform.transform_w1lst9$(ut($.Companion.NEG_Z_AXIS),0).dot_czzhiu$(r.primaryLightDir);u=j.abs(p)<.1}}while(u&&(l=(o=l)+1|0,o<3));var c=t.vertex_n440gp$(new $(0,-.022,0),$.Companion.NEG_Z_AXIS,new Ct(0,0)),h=t.vertex_n440gp$(new $(0,.022,0),$.Companion.NEG_Z_AXIS,new Ct(0,1)),f=t.vertex_n440gp$(new $(.1,.022,0),$.Companion.NEG_Z_AXIS,new Ct(1,1)),_=t.vertex_n440gp$(new $(.1,-.022,0),$.Companion.NEG_Z_AXIS,new Ct(1,0));t.geometry.addIndices_pmhfmb$(new Int32Array([c,h,f,c,f,_])),t.transform.pop()}}},Fu.$metadata$={kind:P,simpleName:"TreeNode",interfaces:[$t]},Lu.$metadata$={kind:P,simpleName:"TreeGenerator",interfaces:[]},Bu.prototype.seed_0=function(){this.seedPts_0.clear();for(var t=1;t<=10;t++){var e=this.seedPts_0,i=this.nextPointInBounds_0();e.add_11rb$(i)}},Bu.prototype.drawBorders_nl2my4$=function(t){var e;e=this.borders_0;for(var i=0;i!==e.size;++i){var n,o=i/this.borders_0.size*2*Kt.PI,r=this.borders_0.get_za3lpa$(i);n=r.size;for(var s=1;s<n;s++){var a=new $(-j.cos(o)*r.get_za3lpa$(s-1|0).x,r.get_za3lpa$(s-1|0).y,-j.sin(o)*r.get_za3lpa$(s-1|0).x),l=new $(-j.cos(o)*r.get_za3lpa$(s).x,r.get_za3lpa$(s).y,-j.sin(o)*r.get_za3lpa$(s).x);t.addLine_b8opkg$(a,m.Companion.ORANGE,l,m.Companion.ORANGE)}}},Bu.prototype.nextPoints_za3lpa$=function(t){return this.seed_0(),nn.prototype.nextPoints_za3lpa$.call(this,t)},Bu.prototype.nextPoint=function(){var t={v:null};t:for(;;){t.v=this.nextPointInBounds_0();var i,n=this.seedPts_0;e:do{var o=n.iterator();if(!o.hasNext()){i=null;break e}var r=o.next();if(!o.hasNext()){i=r;break e}var s=r.sqrDistance_czzhiu$(t.v);do{var a=o.next(),l=a.sqrDistance_czzhiu$(t.v);e.compareTo(s,l)>0&&(r=a,s=l)}while(o.hasNext());i=r}while(0);if(d(i).distance_czzhiu$(t.v)<this.random_0.randomF())break t}return t.v},Bu.prototype.nextPointInBounds_0=function(){for(var t=.5*this.width,e=.5*this.height;;){this.tmpPt1_0.set_y2kzbl$(this.random_0.randomF_dleff0$(-t,t),this.centerY+this.random_0.randomF_dleff0$(-e,e),this.random_0.randomF_dleff0$(-t,t));var i=this.tmpPt1_0.x*this.tmpPt1_0.x+this.tmpPt1_0.z*this.tmpPt1_0.z,n=j.sqrt(i),o=this.tmpPt1_0.y,r=this.tmpPt1_0.z,s=this.tmpPt1_0.x,a=j.atan2(r,s)/(2*Kt.PI)+.5,l=(a<0?0:a>1?1:a)*this.borders_0.size,u=mt(l),p=this.borders_0.size-1|0,c=j.min(u,p),h=(c+1|0)%this.borders_0.size,d=l-c,f=1-d;if(this.nearestEdge_0(n,o,this.borders_0.get_za3lpa$(c),this.e00_0,this.e01_0),this.nearestEdge_0(n,o,this.borders_0.get_za3lpa$(h),this.e10_0,this.e11_0),this.e00_0.scale_mx4ult$(f).add_czzhjp$(this.e10_0.scale_mx4ult$(d)),this.e01_0.scale_mx4ult$(f).add_czzhjp$(this.e11_0.scale_mx4ult$(d)),(n-this.e00_0.x)*(this.e01_0.y-this.e00_0.y)-(o-this.e00_0.y)*(this.e01_0.x-this.e00_0.x)>0)return tn(this.tmpPt1_0)}},Bu.prototype.nearestEdge_0=function(t,e,i,n,o){var r,s=Qi.MAX_VALUE,a=0;r=i.size-1|0;for(var l=0;l<r;l++){var u=this.edgeDist_0(t,e,n.set_czzhjp$(i.get_za3lpa$(l)),o.set_czzhjp$(i.get_za3lpa$(l+1|0)));u<s&&(s=u,a=l)}n.set_czzhjp$(i.get_za3lpa$(a)),o.set_czzhjp$(i.get_za3lpa$(a+1|0))},Bu.prototype.edgeDist_0=function(t,e,i,n){var o;n.subtract_q2ruao$(i,this.tmpPt2_0);var r=(t*this.tmpPt2_0.x+e*this.tmpPt2_0.y-i.times_czzhjp$(this.tmpPt2_0))/this.tmpPt2_0.times_czzhjp$(this.tmpPt2_0);if(r<0){var s=i.x-t,a=i.y-e,l=s*s+a*a;o=j.sqrt(l)}else if(r>1){var u=n.x-t,p=n.y-e,c=u*u+p*p;o=j.sqrt(c)}else{this.tmpPt2_0.scale_mx4ult$(r).add_czzhjp$(i);var h=this.tmpPt2_0.x-t,d=this.tmpPt2_0.y-e,f=h*h+d*d;o=j.sqrt(f)}return o},Bu.$metadata$={kind:P,simpleName:"TreeTopPointDistribution",interfaces:[nn]},o["kool-kool-core"]=i,Object.defineProperty(ln,"Companion",{get:gn});var Gu=t.de||(t.de={}),Hu=Gu.fabmax||(Gu.fabmax={}),Wu=Hu.kool||(Hu.kool={}),Ku=Wu.demo||(Wu.demo={});Ku.AoDemo=ln,Object.defineProperty(bn,"Companion",{get:Ln});var Xu=Ku.atmosphere||(Ku.atmosphere={});Xu.AtmosphereDemo=bn,Object.defineProperty(Dn,"Companion",{get:Bn}),Dn.ViewToWorldPosNode=Gn,Dn.RaySphereIntersectionNode=Wn,Dn.AtmosphereNode=Kn,Xu.AtmosphericScatteringShader=Dn,Xu.EarthCamTransform=Yn,Object.defineProperty(Zn,"Companion",{get:to}),Xu.EarthShader=Zn,Xu.HeightMapNode=io,Xu.SpherePosNode=no,Xu.EarthRoughnessNode=oo,Xu.EarthOceanNode=ro,Object.defineProperty(so,"Companion",{get:uo}),Xu.OpticalDepthLutPass=so,Object.defineProperty(xo,"Companion",{get:ko}),ho.StarShader=xo,Xu.SkyPass=ho,Object.defineProperty(To,"Companion",{get:Lo}),Xu.SphereGridSystem=To,Ku.controlUi_egq1ks$=Do,Ku.ControlUiBuilder=qo,Object.defineProperty(Jo,"Companion",{get:er}),Ku.UiImage=Jo,Object.defineProperty(nr,"Companion",{get:br}),Ku.DeferredDemo=nr,Ku.demo_tisexc$=xr,Object.defineProperty(wr,"Companion",{get:Or}),Ku.Demo=wr,Ku.Cycler_init_i5x0yv$=Wr,Ku.Cycler=Hr,Ku.DemoScene=Kr,Ku.GltfDemo=Xr,Ku.HelloWorldDemo=us,Ku.HelloGltfDemo=ps,Ku.helloWorldScene=_s,Ku.helloGltfScene_aemszp$=bs,Ku.InstanceDemo=xs,Object.defineProperty(Os,"Companion",{get:Ws}),Ku.MultiLightDemo=Os;var Yu=Ku.pbr||(Ku.pbr={});Yu.ColorGridContent=Ks,Js.PbrContent=ca,Js.SphereProto=ha,Object.defineProperty(Js,"Companion",{get:ga}),Yu.PbrDemo=Js,ba.MaterialMaps=Na,Object.defineProperty(ba,"Companion",{get:Vl}),Yu.PbrMaterialContent=ba,Object.defineProperty(Gl,"Companion",{get:Ql}),Yu.RoughnesMetalGridContent=Gl,Object.defineProperty(tu,"Companion",{get:su});var Zu=Ku.procedural||(Ku.procedural={});return Zu.Glas=tu,Zu.ProceduralDemo=au,Zu.Roses=du,Zu.Table=_u,Zu.Vase=mu,Ku.SimplificationDemo=$u,Ku.TreeDemo=Nu,Ku.TreeGenerator=Lu,Ku.TreeTopPointDistribution=Bu,t.main=Uu,t.getParams=Vu,Uu(),t})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;o=[e,i(1),i(4),i(13)],void 0===(r="function"==typeof(n=function(t,e,n,o){"use strict";var r=t.$$importsForInline$$||(t.$$importsForInline$$={}),s=e.kotlin.Unit,a=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,l=e.kotlin.coroutines.CoroutineImpl,u=e.kotlin.text.startsWith_7epoxm$,p=n.kotlinx.coroutines.CoroutineScope,c=e.throwCCE,h=n.kotlinx.coroutines.launch_s496o7$,d=e.kotlin.text.indexOf_8eortd$,f=e.kotlin.ranges.until_dqglrj$,_=e.kotlin.text.substring_fc3b62$,m=n.kotlinx.coroutines.CompletableDeferred_xptg6w$,$=e.Kind.CLASS,y=e.Kind.OBJECT,v=n.kotlinx.coroutines.Job_5dx9e$,g=n.kotlinx.coroutines.channels.Channel_ww73n8$,b=e.kotlin.collections.mutableListOf_i5x0yv$,x=e.ensureNotNull,w=e.kotlin.collections.ArrayList_init_ww73n8$,z=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,k=n.kotlinx.coroutines.selects.SelectBuilderImpl,S=Error,C=e.Long.ZERO,N=e.toChar,E=e.toBoxedChar,T=e.kotlin.Enum,P=e.throwISE,O=e.unboxChar,M=e.kotlin.collections.ArrayList_init_287e2$,j=e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,A=Math,I=Array,R=e.kotlin.collections.get_indices_gzk92b$,L=e.kotlin.ranges.reversed_zf1xzc$,D=e.kotlin.Exception,q=e.kotlin.collections.first_2p1efm$,F=e.kotlin.collections.last_2p1efm$,B=e.numberToInt,U=e.kotlin.math,V=e.kotlin.IllegalArgumentException_init_pdl1vj$,G=e.kotlin.io.print_s8jyv4$,H=e.kotlin.io.println,W=Object,K=e.defineInlineFunction,X=e.wrapFunction,Y=(e.kotlin.collections.get_indices_m7z4lg$,e.kotlin.collections.get_indices_tmsbgo$),Z=e.kotlin.collections.shuffled_7wnvza$,J=e.kotlin.collections.checkIndexOverflow_za3lpa$,Q=e.Long.fromInt(698769069),tt=e.kotlin.math.abs_za3lpa$,et=e.kotlin.math.abs_s8cxhz$,it=e.Long.MAX_VALUE,nt=e.kotlin.js.internal.FloatCompanionObject,ot=e.hashCode,rt=e.kotlin.math.round_14dthe$,st=e.Kind.INTERFACE,at=e.kotlin.collections.Iterable,lt=e.kotlin.collections.removeAll_qafx1e$,ut=e.kotlin.Pair,pt=e.throwUPAE,ct=e.kotlin.collections.LinkedHashSet_init_287e2$,ht=e.kotlin.NoSuchElementException_init,dt=e.kotlin.collections.Iterator,ft=e.kotlin.to_ujzrz7$,_t=e.kotlin.NoSuchElementException,mt=e.kotlin.collections.sortWith_nqfjgj$,$t=e.kotlin.Comparator,yt=e.kotlin.js.internal.DoubleCompanionObject,vt=e.kotlin.collections.emptySet_287e2$,gt=e.kotlin.IllegalStateException_init_pdl1vj$,bt=e.kotlin.collections.get_lastIndex_55thoc$,xt=e.kotlin.collections.addAll_ipc267$,wt=e.kotlin.collections.filterNotNull_m3lr2h$,zt=e.equals,kt=e.kotlin.ULong,St=e.kotlin.collections.addAll_ye1y7v$,Ct=e.toString,Nt=e.kotlin.collections.emptyList_287e2$,Et=e.kotlin.collections.mutableMapOf_qfcya0$,Tt=e.kotlin.RuntimeException_init_pdl1vj$,Pt=e.Long.ONE,Ot=e.kotlin.text.StringBuilder_init,Mt=e.kotlin.collections.joinToString_fmv235$,jt=e.kotlin.io.println_s8jyv4$,At=e.kotlin.collections.listOf_i5x0yv$,It=e.kotlin.text.substringBefore_8cymmc$,Rt=e.kotlin.collections.mutableSetOf_i5x0yv$,Lt=e.kotlin.math.roundToInt_yrwdxr$,Dt=e.toByte,qt=e.kotlin.collections.listOf_mh5how$,Ft=e.kotlin.ranges.IntRange,Bt=e.kotlin.text.toBoolean_5cw0du$,Ut=e.kotlin.text.toInt_pdl1vz$,Vt=e.kotlin.text.toDouble_pdl1vz$,Gt=e.kotlin.collections.joinTo_gcc71v$,Ht=e.kotlin.collections.MutableMap,Wt=e.kotlin.text.lastIndexOf_8eortd$,Kt=e.getCallableRef,Xt=e.kotlin.collections.maxOrNull_lvsncp$,Yt=e.kotlin.collections.distinct_7wnvza$,Zt=e.kotlin.collections.toList_7wnvza$,Jt=e.kotlin.collections.joinToString_cph1y3$,Qt=e.kotlin.random.Random_za3lpa$,te=e.kotlin.collections.shuffled_4173s5$,ee=e.Long.fromInt(1431655765),ie=new e.Long(-1431655766,0),ne=e.Long.fromInt(858993459),oe=new e.Long(-858993460,0),re=e.Long.fromInt(252645135),se=new e.Long(-252645136,0),ae=e.Long.fromInt(16711935),le=new e.Long(-16711936,0),ue=e.kotlin.text.toInt_6ic1pp$,pe=e.kotlin.NumberFormatException,ce=e.kotlin.collections.get_lastIndex_m7z4lg$,he=e.kotlin.collections.first_us0mfu$,de=e.kotlin.collections.last_us0mfu$,fe=e.kotlin.collections.sortWith_iwcb0m$,_e=e.kotlin.text.trimIndent_pdl1vz$,me=e.kotlin.text.get_indices_gw00vp$,$e=e.kotlin.collections.Map,ye=o.kotlinx.serialization.internal.NullableSerializer,ve=e.kotlin.collections.setOf_i5x0yv$,ge=o.kotlinx.serialization.internal.PluginGeneratedSerialDescriptor,be=o.kotlinx.serialization.UnknownFieldException,xe=o.kotlinx.serialization.internal,we=o.kotlinx.serialization.internal.GeneratedSerializer,ze=o.kotlinx.serialization.MissingFieldException,ke=o.kotlinx.serialization.internal.ArrayListSerializer,Se=e.kotlin.IndexOutOfBoundsException,Ce=e.kotlin.text.contains_sgbm27$,Ne=e.kotlin.text.endsWith_7epoxm$,Ee=e.kotlin.text.decodeToString_964n91$,Te=e.getKClass,Pe=e.createKType,Oe=e.kotlin.collections.contains_2ws7j4$,Me=o.kotlinx.serialization.json.Json_x26noe$,je=o.kotlinx.serialization.serializer_ca95z9$,Ae=o.kotlinx.serialization.KSerializer,Ie=o.kotlinx.serialization.internal.LinkedHashMapSerializer,Re=e.kotlin.isNaN_81szk$,Le=e.kotlin.collections.toList_us0mfu$,De=(e.kotlin.collections.MutableList,e.kotlin.ranges.step_xsgg7u$),qe=e.kotlin.collections.toMutableList_4c7yge$,Fe=e.kotlin.text.iterator_gw00vp$,Be=e.kotlin.collections.toIntArray_fx3nzu$,Ue=new e.Long(-1,0),Ve=e.kotlin.collections.copyToArray,Ge=e.kotlin.collections.Collection,He=e.kotlin.NotImplementedError,We=(e.kotlin.collections.MutableIterator,e.kotlin.collections.MutableCollection,e.kotlin.collections.removeAll_uhyeqt$),Ke=e.kotlin.collections.MutableMap.MutableEntry,Xe=e.kotlin.math.roundToLong_yrwdxr$,Ye=e.kotlin.IllegalStateException_init,Ze=n.kotlinx.coroutines.async_pda6u4$,Je=e.kotlin.text.lines_gw00vp$,Qe=e.kotlin.text.StringBuilder;function ti(t){return function(i){var n=new k(i);try{t(n)}catch(t){if(!e.isType(t,S))throw t;n.handleBuilderException_tcv7n7$(t)}return n.getResult()}}function ei(t){ci(),this.assetsBaseDir=t,this.job=v(),this.awaitedAssetsChannel_nphlkp$_0=g(),this.assetRefChannel_acu3lu$_0=g(2147483647),this.loadedAssetChannel_obd8me$_0=g();for(var e=w(8),i=0;i<8;i++){var n=e.add_11rb$;this.loadWorker_lf86lv$_0(this.assetRefChannel_acu3lu$_0,this.loadedAssetChannel_obd8me$_0),n.call(e,s)}this.workers_dv6i5$_0=e,this.loader_lxnfnl$_0=this.launch_eln4bt$(mi)}function ii(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetRefs=t,this.local$closure$loadedAssets=e,this.local$tmp$=void 0,this.local$$receiver=i}function ni(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$ref=e}function oi(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$block=t,this.local$this$AssetManager=e}function ri(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e}function si(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e,this.local$format=i}function ai(t,e,i,n,o,r,s,a){l.call(this,a),this.exceptionState_0=1,this.$this=t,this.local$ftd=void 0,this.local$bkd=void 0,this.local$ltd=void 0,this.local$rtd=void 0,this.local$upd=void 0,this.local$ft=e,this.local$bk=i,this.local$lt=n,this.local$rt=o,this.local$up=r,this.local$dn=s}function li(t,e,i){this.$outer=t,void 0===i&&(i=m(this.$outer.job)),this.ref=e,this.awaiting=i}function ui(){pi=this,this.NUM_LOAD_WORKERS=8}yi.prototype=Object.create($i.prototype),yi.prototype.constructor=yi,vi.prototype=Object.create($i.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create($i.prototype),gi.prototype.constructor=gi,bi.prototype=Object.create($i.prototype),bi.prototype.constructor=bi,wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,zi.prototype=Object.create(xi.prototype),zi.prototype.constructor=zi,Pi.prototype=Object.create(T.prototype),Pi.prototype.constructor=Pi,Mi.prototype=Object.create(Pi.prototype),Mi.prototype.constructor=Mi,Ii.prototype=Object.create(Pi.prototype),Ii.prototype.constructor=Ii,Di.prototype=Object.create(Pi.prototype),Di.prototype.constructor=Di,Bi.prototype=Object.create(Pi.prototype),Bi.prototype.constructor=Bi,Gi.prototype=Object.create(Pi.prototype),Gi.prototype.constructor=Gi,Ki.prototype=Object.create(Pi.prototype),Ki.prototype.constructor=Ki,Ti.prototype=Object.create(Ei.prototype),Ti.prototype.constructor=Ti,pn.prototype=Object.create(D.prototype),pn.prototype.constructor=pn,dn.prototype=Object.create(hn.prototype),dn.prototype.constructor=dn,kn.prototype=Object.create(bn.prototype),kn.prototype.constructor=kn,Mn.prototype=Object.create(En.prototype),Mn.prototype.constructor=Mn,uo.prototype=Object.create(oo.prototype),uo.prototype.constructor=uo,yo.prototype=Object.create(ho.prototype),yo.prototype.constructor=yo,ko.prototype=Object.create(go.prototype),ko.prototype.constructor=ko,Mo.prototype=Object.create(Co.prototype),Mo.prototype.constructor=Mo,Bo.prototype=Object.create(Ro.prototype),Bo.prototype.constructor=Bo,Xo.prototype=Object.create(Vo.prototype),Xo.prototype.constructor=Xo,nr.prototype=Object.create(Zo.prototype),nr.prototype.constructor=nr,pr.prototype=Object.create(rr.prototype),pr.prototype.constructor=pr,Nr.prototype=Object.create(hr.prototype),Nr.prototype.constructor=Nr,jr.prototype=Object.create(Co.prototype),jr.prototype.constructor=jr,Hd.prototype=Object.create(sf.prototype),Hd.prototype.constructor=Hd,Pr.prototype=Object.create(Hd.prototype),Pr.prototype.constructor=Pr,oS.prototype=Object.create(nS.prototype),oS.prototype.constructor=oS,sS.prototype=Object.create(oS.prototype),sS.prototype.constructor=sS,Kr.prototype=Object.create(xS.prototype),Kr.prototype.constructor=Kr,Zr.prototype=Object.create(T.prototype),Zr.prototype.constructor=Zr,ta.prototype=Object.create(Cl.prototype),ta.prototype.constructor=ta,ua.prototype=Object.create(ta.prototype),ua.prototype.constructor=ua,fs.prototype=Object.create(ua.prototype),fs.prototype.constructor=fs,vs.prototype=Object.create(qu.prototype),vs.prototype.constructor=vs,ys.prototype=Object.create(fs.prototype),ys.prototype.constructor=ys,qs.prototype=Object.create(Ls.prototype),qs.prototype.constructor=qs,Ds.prototype=Object.create(Rs.prototype),Ds.prototype.constructor=Ds,Bs.prototype=Object.create(Ls.prototype),Bs.prototype.constructor=Bs,Fs.prototype=Object.create(Rs.prototype),Fs.prototype.constructor=Fs,Vs.prototype=Object.create(Ls.prototype),Vs.prototype.constructor=Vs,Us.prototype=Object.create(Rs.prototype),Us.prototype.constructor=Us,Gs.prototype=Object.create(T.prototype),Gs.prototype.constructor=Gs,ra.prototype=Object.create(T.prototype),ra.prototype.constructor=ra,ha.prototype=Object.create(T.prototype),ha.prototype.constructor=ha,pa.prototype=Object.create(ta.prototype),pa.prototype.constructor=pa,il.prototype=Object.create(T.prototype),il.prototype.constructor=il,ll.prototype=Object.create(T.prototype),ll.prototype.constructor=ll,vl.prototype=Object.create(T.prototype),vl.prototype.constructor=vl,El.prototype=Object.create(Cl.prototype),El.prototype.constructor=El,Ol.prototype=Object.create(T.prototype),Ol.prototype.constructor=Ol,Il.prototype=Object.create(qu.prototype),Il.prototype.constructor=Il,Rl.prototype=Object.create(qu.prototype),Rl.prototype.constructor=Rl,Ll.prototype=Object.create(qu.prototype),Ll.prototype.constructor=Ll,Dl.prototype=Object.create(qu.prototype),Dl.prototype.constructor=Dl,ql.prototype=Object.create(qu.prototype),ql.prototype.constructor=ql,Fl.prototype=Object.create(qu.prototype),Fl.prototype.constructor=Fl,Bl.prototype=Object.create(qu.prototype),Bl.prototype.constructor=Bl,Ul.prototype=Object.create(qu.prototype),Ul.prototype.constructor=Ul,Gl.prototype=Object.create(qu.prototype),Gl.prototype.constructor=Gl,Wl.prototype=Object.create(qu.prototype),Wl.prototype.constructor=Wl,Kl.prototype=Object.create(qu.prototype),Kl.prototype.constructor=Kl,Xl.prototype=Object.create(qu.prototype),Xl.prototype.constructor=Xl,Yl.prototype=Object.create(qu.prototype),Yl.prototype.constructor=Yl,Zl.prototype=Object.create(qu.prototype),Zl.prototype.constructor=Zl,Jl.prototype=Object.create(qu.prototype),Jl.prototype.constructor=Jl,Ql.prototype=Object.create(qu.prototype),Ql.prototype.constructor=Ql,tu.prototype=Object.create(qu.prototype),tu.prototype.constructor=tu,eu.prototype=Object.create(tu.prototype),eu.prototype.constructor=eu,iu.prototype=Object.create(tu.prototype),iu.prototype.constructor=iu,nu.prototype=Object.create(tu.prototype),nu.prototype.constructor=nu,ou.prototype=Object.create(tu.prototype),ou.prototype.constructor=ou,ru.prototype=Object.create(tu.prototype),ru.prototype.constructor=ru,su.prototype=Object.create(qu.prototype),su.prototype.constructor=su,au.prototype=Object.create(qu.prototype),au.prototype.constructor=au,lu.prototype=Object.create(qu.prototype),lu.prototype.constructor=lu,uu.prototype=Object.create(qu.prototype),uu.prototype.constructor=uu,pu.prototype=Object.create(qu.prototype),pu.prototype.constructor=pu,cu.prototype=Object.create(qu.prototype),cu.prototype.constructor=cu,du.prototype=Object.create(hu.prototype),du.prototype.constructor=du,fu.prototype=Object.create(hu.prototype),fu.prototype.constructor=fu,_u.prototype=Object.create(hu.prototype),_u.prototype.constructor=_u,mu.prototype=Object.create(hu.prototype),mu.prototype.constructor=mu,$u.prototype=Object.create(hu.prototype),$u.prototype.constructor=$u,yu.prototype=Object.create(hu.prototype),yu.prototype.constructor=yu,vu.prototype=Object.create(hu.prototype),vu.prototype.constructor=vu,gu.prototype=Object.create(hu.prototype),gu.prototype.constructor=gu,bu.prototype=Object.create(hu.prototype),bu.prototype.constructor=bu,xu.prototype=Object.create(hu.prototype),xu.prototype.constructor=xu,wu.prototype=Object.create(du.prototype),wu.prototype.constructor=wu,zu.prototype=Object.create(fu.prototype),zu.prototype.constructor=zu,ku.prototype=Object.create(_u.prototype),ku.prototype.constructor=ku,Su.prototype=Object.create(mu.prototype),Su.prototype.constructor=Su,Cu.prototype=Object.create(yu.prototype),Cu.prototype.constructor=Cu,Nu.prototype=Object.create(vu.prototype),Nu.prototype.constructor=Nu,Eu.prototype=Object.create(gu.prototype),Eu.prototype.constructor=Eu,Tu.prototype=Object.create(bu.prototype),Tu.prototype.constructor=Tu,ju.prototype=Object.create(Mu.prototype),ju.prototype.constructor=ju,Au.prototype=Object.create(Mu.prototype),Au.prototype.constructor=Au,Lu.prototype=Object.create(Ru.prototype),Lu.prototype.constructor=Lu,Du.prototype=Object.create(Ru.prototype),Du.prototype.constructor=Du,Uu.prototype=Object.create(Bu.prototype),Uu.prototype.constructor=Uu,Vu.prototype=Object.create(qu.prototype),Vu.prototype.constructor=Vu,Hu.prototype=Object.create(qu.prototype),Hu.prototype.constructor=Hu,Ku.prototype=Object.create(qu.prototype),Ku.prototype.constructor=Ku,Wu.prototype=Object.create(Bu.prototype),Wu.prototype.constructor=Wu,Xu.prototype=Object.create(qu.prototype),Xu.prototype.constructor=Xu,Zu.prototype=Object.create(qu.prototype),Zu.prototype.constructor=Zu,Qu.prototype=Object.create(qu.prototype),Qu.prototype.constructor=Qu,tp.prototype=Object.create(qu.prototype),tp.prototype.constructor=tp,ep.prototype=Object.create(qu.prototype),ep.prototype.constructor=ep,rp.prototype=Object.create(qu.prototype),rp.prototype.constructor=rp,np.prototype=Object.create(qu.prototype),np.prototype.constructor=np,lp.prototype=Object.create(qu.prototype),lp.prototype.constructor=lp,sp.prototype=Object.create(qu.prototype),sp.prototype.constructor=sp,up.prototype=Object.create(qu.prototype),up.prototype.constructor=up,pp.prototype=Object.create(qu.prototype),pp.prototype.constructor=pp,cp.prototype=Object.create(qu.prototype),cp.prototype.constructor=cp,hp.prototype=Object.create(qu.prototype),hp.prototype.constructor=hp,dp.prototype=Object.create(hp.prototype),dp.prototype.constructor=dp,fp.prototype=Object.create(hp.prototype),fp.prototype.constructor=fp,_p.prototype=Object.create(hp.prototype),_p.prototype.constructor=_p,mp.prototype=Object.create(hp.prototype),mp.prototype.constructor=mp,$p.prototype=Object.create(hp.prototype),$p.prototype.constructor=$p,yp.prototype=Object.create(hp.prototype),yp.prototype.constructor=yp,vp.prototype=Object.create(hp.prototype),vp.prototype.constructor=vp,gp.prototype=Object.create(hp.prototype),gp.prototype.constructor=gp,bp.prototype=Object.create(hp.prototype),bp.prototype.constructor=bp,xp.prototype=Object.create(qu.prototype),xp.prototype.constructor=xp,wp.prototype=Object.create(qu.prototype),wp.prototype.constructor=wp,zp.prototype=Object.create(qu.prototype),zp.prototype.constructor=zp,kp.prototype=Object.create(qu.prototype),kp.prototype.constructor=kp,Sp.prototype=Object.create(qu.prototype),Sp.prototype.constructor=Sp,Cp.prototype=Object.create(qu.prototype),Cp.prototype.constructor=Cp,Np.prototype=Object.create(qu.prototype),Np.prototype.constructor=Np,Ep.prototype=Object.create(qu.prototype),Ep.prototype.constructor=Ep,Tp.prototype=Object.create(qu.prototype),Tp.prototype.constructor=Tp,Pp.prototype=Object.create(qu.prototype),Pp.prototype.constructor=Pp,Op.prototype=Object.create(qu.prototype),Op.prototype.constructor=Op,Mp.prototype=Object.create(qu.prototype),Mp.prototype.constructor=Mp,jp.prototype=Object.create(qu.prototype),jp.prototype.constructor=jp,Ip.prototype=Object.create(qu.prototype),Ip.prototype.constructor=Ip,Rp.prototype=Object.create(qu.prototype),Rp.prototype.constructor=Rp,Lp.prototype=Object.create(qu.prototype),Lp.prototype.constructor=Lp,Dp.prototype=Object.create(qu.prototype),Dp.prototype.constructor=Dp,qp.prototype=Object.create(qu.prototype),qp.prototype.constructor=qp,Fp.prototype=Object.create(qu.prototype),Fp.prototype.constructor=Fp,Bp.prototype=Object.create(qu.prototype),Bp.prototype.constructor=Bp,Up.prototype=Object.create(qu.prototype),Up.prototype.constructor=Up,Vp.prototype=Object.create(T.prototype),Vp.prototype.constructor=Vp,Jp.prototype=Object.create(T.prototype),Jp.prototype.constructor=Jp,rc.prototype=Object.create(oc.prototype),rc.prototype.constructor=rc,sc.prototype=Object.create(oc.prototype),sc.prototype.constructor=sc,ac.prototype=Object.create(oc.prototype),ac.prototype.constructor=ac,lc.prototype=Object.create(Tl.prototype),lc.prototype.constructor=lc,uc.prototype=Object.create(lc.prototype),uc.prototype.constructor=uc,pc.prototype=Object.create(lc.prototype),pc.prototype.constructor=pc,cc.prototype=Object.create(lc.prototype),cc.prototype.constructor=cc,hc.prototype=Object.create(lc.prototype),hc.prototype.constructor=hc,$c.prototype=Object.create(lc.prototype),$c.prototype.constructor=$c,bc.prototype=Object.create(lc.prototype),bc.prototype.constructor=bc,Sc.prototype=Object.create(lc.prototype),Sc.prototype.constructor=Sc,Gc.prototype=Object.create(T.prototype),Gc.prototype.constructor=Gc,ih.prototype=Object.create(T.prototype),ih.prototype.constructor=ih,dh.prototype=Object.create(eh.prototype),dh.prototype.constructor=dh,wh.prototype=Object.create(eh.prototype),wh.prototype.constructor=wh,kh.prototype=Object.create(eh.prototype),kh.prototype.constructor=kh,Ch.prototype=Object.create(T.prototype),Ch.prototype.constructor=Ch,Ph.prototype=Object.create(T.prototype),Ph.prototype.constructor=Ph,Rh.prototype=Object.create(Ih.prototype),Rh.prototype.constructor=Rh,Hh.prototype=Object.create(Ih.prototype),Hh.prototype.constructor=Hh,Kh.prototype=Object.create(Wh.prototype),Kh.prototype.constructor=Kh,Yh.prototype=Object.create(Wh.prototype),Yh.prototype.constructor=Yh,Zh.prototype=Object.create(Wh.prototype),Zh.prototype.constructor=Zh,Jh.prototype=Object.create(Wh.prototype),Jh.prototype.constructor=Jh,Qh.prototype=Object.create(Wh.prototype),Qh.prototype.constructor=Qh,td.prototype=Object.create(Wh.prototype),td.prototype.constructor=td,ed.prototype=Object.create(Wh.prototype),ed.prototype.constructor=ed,id.prototype=Object.create(Wh.prototype),id.prototype.constructor=id,nd.prototype=Object.create(Wh.prototype),nd.prototype.constructor=nd,od.prototype=Object.create(Wh.prototype),od.prototype.constructor=od,rd.prototype=Object.create(Wh.prototype),rd.prototype.constructor=rd,sd.prototype=Object.create(Wh.prototype),sd.prototype.constructor=sd,ad.prototype=Object.create(Wh.prototype),ad.prototype.constructor=ad,ud.prototype=Object.create(Wh.prototype),ud.prototype.constructor=ud,pd.prototype=Object.create(Wh.prototype),pd.prototype.constructor=pd,cd.prototype=Object.create(Wh.prototype),cd.prototype.constructor=cd,md.prototype=Object.create(T.prototype),md.prototype.constructor=md,wd.prototype=Object.create(T.prototype),wd.prototype.constructor=wd,bd.prototype=Object.create(sf.prototype),bd.prototype.constructor=bd,Nd.prototype=Object.create(bd.prototype),Nd.prototype.constructor=Nd,Ed.prototype=Object.create(bd.prototype),Ed.prototype.constructor=Ed,Td.prototype=Object.create(Ed.prototype),Td.prototype.constructor=Td,Id.prototype=Object.create(sf.prototype),Id.prototype.constructor=Id,Dd.prototype=Object.create(T.prototype),Dd.prototype.constructor=Dd,Vd.prototype=Object.create(Hd.prototype),Vd.prototype.constructor=Vd,rf.prototype=Object.create(Id.prototype),rf.prototype.constructor=rf,$f.prototype=Object.create(T.prototype),$f.prototype.constructor=$f,xf.prototype=Object.create(T.prototype),xf.prototype.constructor=xf,mf.prototype=Object.create(Id.prototype),mf.prototype.constructor=mf,Cf.prototype=Object.create(Sf.prototype),Cf.prototype.constructor=Cf,Nf.prototype=Object.create(Hd.prototype),Nf.prototype.constructor=Nf,Of.prototype=Object.create(Id.prototype),Of.prototype.constructor=Of,Lf.prototype=Object.create(lc.prototype),Lf.prototype.constructor=Lf,Uf.prototype=Object.create(lc.prototype),Uf.prototype.constructor=Uf,Kf.prototype=Object.create(qu.prototype),Kf.prototype.constructor=Kf,tm.prototype=Object.create(Id.prototype),tm.prototype.constructor=tm,h_.prototype=Object.create(tm.prototype),h_.prototype.constructor=h_,o_.prototype=Object.create(h_.prototype),o_.prototype.constructor=o_,r_.prototype=Object.create(d_.prototype),r_.prototype.constructor=r_,u_.prototype=Object.create(l_.prototype),u_.prototype.constructor=u_,Q_.prototype=Object.create(r_.prototype),Q_.prototype.constructor=Q_,c_.prototype=Object.create(Q_.prototype),c_.prototype.constructor=c_,om.prototype=Object.create(tm.prototype),om.prototype.constructor=om,p_.prototype=Object.create(om.prototype),p_.prototype.constructor=p_,__.prototype=Object.create(T.prototype),__.prototype.constructor=__,j_.prototype=Object.create(M_.prototype),j_.prototype.constructor=j_,R_.prototype=Object.create(T.prototype),R_.prototype.constructor=R_,B_.prototype=Object.create(tm.prototype),B_.prototype.constructor=B_,V_.prototype=Object.create(tm.prototype),V_.prototype.constructor=V_,H_.prototype=Object.create(h_.prototype),H_.prototype.constructor=H_,W_.prototype=Object.create(d_.prototype),W_.prototype.constructor=W_,J_.prototype=Object.create(o_.prototype),J_.prototype.constructor=J_,lm.prototype=Object.create(sf.prototype),lm.prototype.constructor=lm,um.prototype=Object.create(lc.prototype),um.prototype.constructor=um,km.prototype=Object.create(dm.prototype),km.prototype.constructor=km,Em.prototype=Object.create(Nm.prototype),Em.prototype.constructor=Em,Tm.prototype=Object.create(Nm.prototype),Tm.prototype.constructor=Tm,Pm.prototype=Object.create(Nm.prototype),Pm.prototype.constructor=Pm,Om.prototype=Object.create(Nm.prototype),Om.prototype.constructor=Om,Rm.prototype=Object.create(T.prototype),Rm.prototype.constructor=Rm,Dm.prototype=Object.create(Rm.prototype),Dm.prototype.constructor=Dm,Bm.prototype=Object.create(Rm.prototype),Bm.prototype.constructor=Bm,Gm.prototype=Object.create(Rm.prototype),Gm.prototype.constructor=Gm,Km.prototype=Object.create(Im.prototype),Km.prototype.constructor=Km,Xm.prototype=Object.create(Km.prototype),Xm.prototype.constructor=Xm,Ym.prototype=Object.create(Im.prototype),Ym.prototype.constructor=Ym,Zm.prototype=Object.create(Ym.prototype),Zm.prototype.constructor=Zm,Jm.prototype=Object.create(Im.prototype),Jm.prototype.constructor=Jm,Qm.prototype=Object.create(Jm.prototype),Qm.prototype.constructor=Qm,t$.prototype=Object.create(Im.prototype),t$.prototype.constructor=t$,e$.prototype=Object.create(t$.prototype),e$.prototype.constructor=e$,s$.prototype=Object.create(i$.prototype),s$.prototype.constructor=s$,a$.prototype=Object.create(i$.prototype),a$.prototype.constructor=a$,u$.prototype=Object.create(l$.prototype),u$.prototype.constructor=u$,m$.prototype=Object.create(qu.prototype),m$.prototype.constructor=m$,y$.prototype=Object.create(qu.prototype),y$.prototype.constructor=y$,v$.prototype=Object.create(qu.prototype),v$.prototype.constructor=v$,f$.prototype=Object.create(ua.prototype),f$.prototype.constructor=f$,E$.prototype=Object.create(qu.prototype),E$.prototype.constructor=E$,N$.prototype=Object.create(ua.prototype),N$.prototype.constructor=N$,A$.prototype=Object.create(j$.prototype),A$.prototype.constructor=A$,I$.prototype=Object.create(j$.prototype),I$.prototype.constructor=I$,X$.prototype=Object.create(Zo.prototype),X$.prototype.constructor=X$,Q$.prototype=Object.create(X$.prototype),Q$.prototype.constructor=Q$,_y.prototype=Object.create(T.prototype),_y.prototype.constructor=_y,zy.prototype=Object.create(tm.prototype),zy.prototype.constructor=zy,ky.prototype=Object.create(lc.prototype),ky.prototype.constructor=ky,Ty.prototype=Object.create(ua.prototype),Ty.prototype.constructor=Ty,Ay.prototype=Object.create(lc.prototype),Ay.prototype.constructor=Ay,Uy.prototype=Object.create(qu.prototype),Uy.prototype.constructor=Uy,Vy.prototype=Object.create(qu.prototype),Vy.prototype.constructor=Vy,Dy.prototype=Object.create(lc.prototype),Dy.prototype.constructor=Dy,Yy.prototype=Object.create(qu.prototype),Yy.prototype.constructor=Yy,Zy.prototype=Object.create(qu.prototype),Zy.prototype.constructor=Zy,ev.prototype=Object.create(ua.prototype),ev.prototype.constructor=ev,ov.prototype=Object.create(lc.prototype),ov.prototype.constructor=ov,pv.prototype=Object.create(qu.prototype),pv.prototype.constructor=pv,uv.prototype=Object.create(ua.prototype),uv.prototype.constructor=uv,fv.prototype=Object.create(lc.prototype),fv.prototype.constructor=fv,mv.prototype=Object.create(qu.prototype),mv.prototype.constructor=mv,dv.prototype=Object.create(ua.prototype),dv.prototype.constructor=dv,bv.prototype=Object.create(qu.prototype),bv.prototype.constructor=bv,kv.prototype=Object.create(eh.prototype),kv.prototype.constructor=kv,hg.prototype=Object.create(cg.prototype),hg.prototype.constructor=hg,dg.prototype=Object.create(cg.prototype),dg.prototype.constructor=dg,fg.prototype=Object.create(cg.prototype),fg.prototype.constructor=fg,_g.prototype=Object.create(cg.prototype),_g.prototype.constructor=_g,mg.prototype=Object.create(cg.prototype),mg.prototype.constructor=mg,$g.prototype=Object.create(cg.prototype),$g.prototype.constructor=$g,yg.prototype=Object.create(cg.prototype),yg.prototype.constructor=yg,mw.prototype=Object.create(qu.prototype),mw.prototype.constructor=mw,_w.prototype=Object.create(ua.prototype),_w.prototype.constructor=_w,zw.prototype=Object.create(qu.prototype),zw.prototype.constructor=zw,ww.prototype=Object.create(pa.prototype),ww.prototype.constructor=ww,Cw.prototype=Object.create(qu.prototype),Cw.prototype.constructor=Cw,Nw.prototype=Object.create(qu.prototype),Nw.prototype.constructor=Nw,Ew.prototype=Object.create(qu.prototype),Ew.prototype.constructor=Ew,Pw.prototype=Object.create(qu.prototype),Pw.prototype.constructor=Pw,Tw.prototype=Object.create(pa.prototype),Tw.prototype.constructor=Tw,Dw.prototype=Object.create(qu.prototype),Dw.prototype.constructor=Dw,Lw.prototype=Object.create(pa.prototype),Lw.prototype.constructor=Lw,Hw.prototype=Object.create(ua.prototype),Hw.prototype.constructor=Hw,rz.prototype=Object.create(T.prototype),rz.prototype.constructor=rz,pz.prototype=Object.create(T.prototype),pz.prototype.constructor=pz,bz.prototype=Object.create(sf.prototype),bz.prototype.constructor=bz,Cz.prototype=Object.create(T.prototype),Cz.prototype.constructor=Cz,rk.prototype=Object.create(tk.prototype),rk.prototype.constructor=rk,hk.prototype=Object.create(Bk.prototype),hk.prototype.constructor=hk,dk.prototype=Object.create(Co.prototype),dk.prototype.constructor=dk,fk.prototype=Object.create(nS.prototype),fk.prototype.constructor=fk,_k.prototype=Object.create(nS.prototype),_k.prototype.constructor=_k,bk.prototype=Object.create(gk.prototype),bk.prototype.constructor=bk,xk.prototype=Object.create(gk.prototype),xk.prototype.constructor=xk,zk.prototype=Object.create(fs.prototype),zk.prototype.constructor=zk,Ek.prototype=Object.create(Jk.prototype),Ek.prototype.constructor=Ek,Nk.prototype=Object.create(Zk.prototype),Nk.prototype.constructor=Nk,aS.prototype=Object.create(nS.prototype),aS.prototype.constructor=aS,uS.prototype=Object.create(aS.prototype),uS.prototype.constructor=uS,cS.prototype=Object.create(aS.prototype),cS.prototype.constructor=cS,TS.prototype=Object.create(uo.prototype),TS.prototype.constructor=TS,PS.prototype=Object.create(Mo.prototype),PS.prototype.constructor=PS,OS.prototype=Object.create(nr.prototype),OS.prototype.constructor=OS,MS.prototype=Object.create(Q$.prototype),MS.prototype.constructor=MS,AS.prototype=Object.create(ko.prototype),AS.prototype.constructor=AS,IS.prototype=Object.create(Xo.prototype),IS.prototype.constructor=IS,RS.prototype=Object.create(Nr.prototype),RS.prototype.constructor=RS,NS.prototype=Object.create(Mo.prototype),NS.prototype.constructor=NS,QS.prototype=Object.create(Ih.prototype),QS.prototype.constructor=QS,tC.prototype=Object.create(ei.prototype),tC.prototype.constructor=tC,gC.prototype=Object.create(rn.prototype),gC.prototype.constructor=gC,hN.prototype=Object.create(aN.prototype),hN.prototype.constructor=hN,dN.prototype=Object.create(aN.prototype),dN.prototype.constructor=dN,mN.prototype=Object.create(Pu.prototype),mN.prototype.constructor=mN,kN.prototype=Object.create(zN.prototype),kN.prototype.constructor=kN,CN.prototype=Object.create(zN.prototype),CN.prototype.constructor=CN,NN.prototype=Object.create(zN.prototype),NN.prototype.constructor=NN,EN.prototype=Object.create(zN.prototype),EN.prototype.constructor=EN,TN.prototype=Object.create(zN.prototype),TN.prototype.constructor=TN,Object.defineProperty(ei.prototype,"coroutineContext",{configurable:!0,get:function(){return this.job}}),ii.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ii.prototype=Object.create(l.prototype),ii.prototype.constructor=ii,ii.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;this.local$tmp$=this.local$closure$assetRefs.iterator(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$tmp$.hasNext(this),this.result_0===a)return a;continue;case 3:if(this.result_0){this.state_0=4;continue}this.state_0=7;continue;case 4:var e=this.local$tmp$.next();if(this.state_0=5,this.result_0=this.local$$receiver.loadAsset_lpb790$_0(e,this),this.result_0===a)return a;continue;case 5:if(t=this.result_0,this.state_0=6,this.result_0=this.local$closure$loadedAssets.send_11rb$(t,this),this.result_0===a)return a;continue;case 6:this.state_0=2;continue;case 7:return s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadWorker_lf86lv$_0=function(t,e){var i,n;this.launch_eln4bt$((i=t,n=e,function(t,e,o){var r=new ii(i,n,t,this,e);return o?r:r.doResume(null)}))},ei.prototype.close=function(){this.job.cancel_m4sck1$()},ni.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ni.prototype=Object.create(l.prototype),ni.prototype.constructor=ni,ni.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(e.isType(this.local$ref,yi)){if(this.state_0=8,this.result_0=this.$this.loadLocalRaw_hl6yzt$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,vi)){if(this.state_0=6,this.result_0=this.$this.loadHttpRaw_ohmb7q$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,gi)){if(this.state_0=4,this.result_0=this.$this.loadLocalTexture_68kns4$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,bi)){if(this.state_0=2,this.result_0=this.$this.loadHttpTexture_nbaz3h$(this.local$ref,this),this.result_0===a)return a;continue}this.local$tmp$=e.noWhenBranchMatched(),this.state_0=3;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=this.result_0,this.state_0=3;continue;case 3:this.state_0=5;continue;case 4:this.local$tmp$=this.result_0,this.state_0=5;continue;case 5:this.state_0=7;continue;case 6:this.local$tmp$=this.result_0,this.state_0=7;continue;case 7:this.state_0=9;continue;case 8:this.local$tmp$=this.result_0,this.state_0=9;continue;case 9:return this.local$tmp$;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadAsset_lpb790$_0=function(t,e,i){var n=new ni(this,t,e);return i?n:n.doResume(null)},ei.prototype.isHttpAsset_61zpoe$=function(t){return u(t,"http://",!0)||u(t,"https://",!0)||u(t,"data:",!0)},oi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},oi.prototype=Object.create(l.prototype),oi.prototype.constructor=oi,oi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$block(this.local$this$AssetManager,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.launch_eln4bt$=function(t){var i,n;h(e.isType(this,p)?this:c(),void 0,void 0,(i=t,n=this,function(t,e,o){var r=new oi(i,n,t,this,e);return o?r:r.doResume(null)}))},ri.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ri.prototype=Object.create(l.prototype),ri.prototype.constructor=ri,ri.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new vi(this.local$assetPath):new yi(this.$this.assetsBaseDir+"/"+this.local$assetPath);if(this.local$awaitedAsset=new li(this.$this,n),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var o=e.isType(t=this.result_0,wi)?t:c();if(null!=(i=o.data)){var r=KN.Log,s=Cz.DEBUG,l=e.getKClassFromExpression(this.$this).simpleName;s.level>=r.level.level&&r.printer(s,l,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+FS(i.capacity/1024/1024,1)+" mb)")}return o.data;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadAsset_61zpoe$=function(t,e,i){var n=new ri(this,t,e);return i?n:n.doResume(null)},si.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},si.prototype=Object.create(l.prototype),si.prototype.constructor=si,si.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n;void 0===this.local$format&&(this.local$format=null);var o=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new bi(this.local$assetPath,this.local$format):new gi(this.$this.assetsBaseDir+"/"+this.local$assetPath,this.local$format);if(this.local$awaitedAsset=new li(this.$this,o),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var r=e.isType(t=this.result_0,zi)?t:c();if(null!=(i=r.data)){var s=KN.Log,l=Cz.DEBUG,u=e.getKClassFromExpression(this.$this).simpleName;l.level>=s.level.level&&s.printer(l,u,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+i.format+", "+i.width+"x"+i.height+")")}if(null==(n=r.data))throw cn("Failed loading texture");return n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadTextureData_9n4zzi$=function(t,e,i,n){var o=new si(this,t,e,i);return n?o:o.doResume(null)},ai.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ai.prototype=Object.create(l.prototype),ai.prototype.constructor=ai,ai.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$ft,void 0,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.local$ftd=this.result_0,this.state_0=3,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$bk,void 0,this),this.result_0===a)return a;continue;case 3:if(this.local$bkd=this.result_0,this.state_0=4,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$lt,void 0,this),this.result_0===a)return a;continue;case 4:if(this.local$ltd=this.result_0,this.state_0=5,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$rt,void 0,this),this.result_0===a)return a;continue;case 5:if(this.local$rtd=this.result_0,this.state_0=6,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$up,void 0,this),this.result_0===a)return a;continue;case 6:if(this.local$upd=this.result_0,this.state_0=7,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$dn,void 0,this),this.result_0===a)return a;continue;case 7:var t=this.result_0;return new Hh(this.local$ftd,this.local$bkd,this.local$ltd,this.local$rtd,this.local$upd,t);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.prototype.loadCubeMapTextureData_r3y0ew$=function(t,e,i,n,o,r,s,a){var l=new ai(this,t,e,i,n,o,r,s);return a?l:l.doResume(null)},ei.prototype.loadAndPrepareTexture_va0f2y$=function(t,e,i,n){return void 0===e&&(e=new Sh),n?n(t,e,i):this.loadAndPrepareTexture_va0f2y$$default(t,e,i)},ei.prototype.loadAndPrepareCubeMap_oecnw4$=function(t,e,i,n,o,r,s,a,l){return void 0===s&&(s=new Sh),l?l(t,e,i,n,o,r,s,a):this.loadAndPrepareCubeMap_oecnw4$$default(t,e,i,n,o,r,s,a)},ei.prototype.loadAndPrepareTexture_siesr9$=function(t,e,i,n){return void 0===e&&(e=new Sh),void 0===i&&(i=null),n?n(t,e,i):this.loadAndPrepareTexture_siesr9$$default(t,e,i)},ei.prototype.loadAndPrepareCubeMap_hol3hm$=function(t,e,i,n){return void 0===e&&(e=new Sh),void 0===i&&(i=null),n?n(t,e,i):this.loadAndPrepareCubeMap_hol3hm$$default(t,e,i)},ei.prototype.assetPathToName_61zpoe$=function(t){var e;if(u(t,"data:",!0)){var i=d(t,59);e=_(t,f(0,i))}else e=t;return e},ei.prototype.cubeMapAssetPathToName_r3y0ew$=function(t,e,i,n,o,r){return"cubeMap(ft:"+this.assetPathToName_61zpoe$(t)+", bk:"+this.assetPathToName_61zpoe$(e)+", lt:"+this.assetPathToName_61zpoe$(i)+", rt:"+this.assetPathToName_61zpoe$(n)+", up:"+this.assetPathToName_61zpoe$(o)+", dn:"+this.assetPathToName_61zpoe$(r)+")"},li.$metadata$={kind:$,simpleName:"AwaitedAsset",interfaces:[]},ui.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pi=null;function ci(){return null===pi&&new ui,pi}function hi(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.local$closure$requested=t,this.local$this$=e,this.local$awaited=i}function di(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$closure$requested=t,this.local$loaded=e}function fi(t,e){return function(i){var n,o;return i.invoke_veq140$(t.awaitedAssetsChannel_nphlkp$_0.onReceive,(n=e,o=t,function(t,e,i){var r=new hi(n,o,t,e);return i?r:r.doResume(null)})),i.invoke_veq140$(t.loadedAssetChannel_obd8me$_0.onReceive,function(t){return function(e,i,n){var o=new di(t,e,i);return n?o:o.doResume(null)}}(e)),s}}function _i(t,e,i){l.call(this,i),this.$controller=e,this.exceptionState_0=1,this.local$requested=void 0,this.local$$receiver=t}function mi(t,e,i){var n=new _i(t,this,e);return i?n:n.doResume(null)}function $i(){}function yi(t){$i.call(this),this.url=t}function vi(t){$i.call(this),this.url=t}function gi(t,e){$i.call(this),this.url=t,this.fmt=e}function bi(t,e){$i.call(this),this.url=t,this.fmt=e}function xi(t,e){this.ref=t,this.successfull=e}function wi(t,e){xi.call(this,t,null!=e),this.data=e}function zi(t,e){xi.call(this,t,null!=e),this.data=e}function ki(){this.bufferAllocations=z(),this.totalBufferSize_mh5cfj$_0=C,this.textureAllocations=z(),this.totalTextureSize_4hd4e0$_0=C,this.pipelines=z(),this.numPipelineInstances_ikf7d6$_0=0,this.numDrawCommands_4id88y$_0=0,this.numPrimitives_jhh8ci$_0=0}function Si(){on(),this.queuedKeyEvents_0=M(),this.keyEvents=M(),this.keyHandlers_0=z(),this.pointerState=new tn}function Ci(t){return t.isCharTyped}function Ni(t){return!0}function Ei(){this.id_yfac1g$_0=0,this.x_5rhhjp$_0=0,this.y_5rhhkk$_0=0,this.deltaX_8nh2op$_0=0,this.deltaY_8nh2nu$_0=0,this.dragDeltaX_yg2vql$_0=0,this.dragDeltaY_yg2vpq$_0=0,this.deltaScroll_trurwo$_0=0,this.buttonMask_uq1vpl$_0=0,this.buttonEventMask_dc8ngn$_0=0,this.isValid_cde91$_0=!1,this.consumptionMask_8be2vx$=0}function Ti(){Ei.call(this),this.updateState_0=Yi(),this.processedState_0=Yi(),this.lastUpdate=0}function Pi(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Oi(){Oi=function(){},new Mi,new Ii,new Di,new Bi,new Gi,new Ki}function Mi(){ji=this,Pi.call(this,"STARTED",0)}hi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},hi.prototype=Object.create(l.prototype),hi.prototype.constructor=hi,hi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.local$closure$requested.get_11rb$(this.local$awaited.ref);if(null==t){var e=this.local$closure$requested,i=this.local$awaited.ref,n=b([this.local$awaited]);if(e.put_xwzc9p$(i,n),this.state_0=2,this.result_0=this.local$this$.assetRefChannel_acu3lu$_0.send_11rb$(this.local$awaited.ref,this),this.result_0===a)return a;continue}return t.add_11rb$(this.local$awaited);case 1:throw this.exception_0;case 2:return this.result_0;case 3:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},di.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},di.prototype=Object.create(l.prototype),di.prototype.constructor=di,di.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;for(t=x(this.local$closure$requested.remove_11rb$(this.local$loaded.ref)).iterator();t.hasNext();)t.next().awaiting.complete_11rb$(this.local$loaded);return s;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},_i.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},_i.prototype=Object.create(l.prototype),_i.prototype.constructor=_i,_i.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:this.local$requested=z(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=ti(fi(this.local$$receiver,this.local$requested))(this),this.result_0===a)return a;continue;case 3:this.result_0,this.state_0=2;continue;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ei.$metadata$={kind:$,simpleName:"AssetManager",interfaces:[p]},$i.$metadata$={kind:$,simpleName:"AssetRef",interfaces:[]},yi.$metadata$={kind:$,simpleName:"LocalRawAssetRef",interfaces:[$i]},yi.prototype.component1=function(){return this.url},yi.prototype.copy_61zpoe$=function(t){return new yi(void 0===t?this.url:t)},yi.prototype.toString=function(){return"LocalRawAssetRef(url="+e.toString(this.url)+")"},yi.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.url)|0},yi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)},vi.$metadata$={kind:$,simpleName:"HttpRawAssetRef",interfaces:[$i]},vi.prototype.component1=function(){return this.url},vi.prototype.copy_61zpoe$=function(t){return new vi(void 0===t?this.url:t)},vi.prototype.toString=function(){return"HttpRawAssetRef(url="+e.toString(this.url)+")"},vi.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.url)|0},vi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)},gi.$metadata$={kind:$,simpleName:"LocalTextureAssetRef",interfaces:[$i]},gi.prototype.component1=function(){return this.url},gi.prototype.component2=function(){return this.fmt},gi.prototype.copy_9n4zzi$=function(t,e){return new gi(void 0===t?this.url:t,void 0===e?this.fmt:e)},gi.prototype.toString=function(){return"LocalTextureAssetRef(url="+e.toString(this.url)+", fmt="+e.toString(this.fmt)+")"},gi.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.url)|0)+e.hashCode(this.fmt)|0},gi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)&&e.equals(this.fmt,t.fmt)},bi.$metadata$={kind:$,simpleName:"HttpTextureAssetRef",interfaces:[$i]},bi.prototype.component1=function(){return this.url},bi.prototype.component2=function(){return this.fmt},bi.prototype.copy_9n4zzi$=function(t,e){return new bi(void 0===t?this.url:t,void 0===e?this.fmt:e)},bi.prototype.toString=function(){return"HttpTextureAssetRef(url="+e.toString(this.url)+", fmt="+e.toString(this.fmt)+")"},bi.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.url)|0)+e.hashCode(this.fmt)|0},bi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)&&e.equals(this.fmt,t.fmt)},xi.$metadata$={kind:$,simpleName:"LoadedAsset",interfaces:[]},wi.$metadata$={kind:$,simpleName:"LoadedRawAsset",interfaces:[xi]},zi.$metadata$={kind:$,simpleName:"LoadedTextureAsset",interfaces:[xi]},Object.defineProperty(ki.prototype,"totalBufferSize",{configurable:!0,get:function(){return this.totalBufferSize_mh5cfj$_0},set:function(t){this.totalBufferSize_mh5cfj$_0=t}}),Object.defineProperty(ki.prototype,"totalTextureSize",{configurable:!0,get:function(){return this.totalTextureSize_4hd4e0$_0},set:function(t){this.totalTextureSize_4hd4e0$_0=t}}),Object.defineProperty(ki.prototype,"numPipelineInstances",{configurable:!0,get:function(){return this.numPipelineInstances_ikf7d6$_0},set:function(t){this.numPipelineInstances_ikf7d6$_0=t}}),Object.defineProperty(ki.prototype,"numDrawCommands",{configurable:!0,get:function(){return this.numDrawCommands_4id88y$_0},set:function(t){this.numDrawCommands_4id88y$_0=t}}),Object.defineProperty(ki.prototype,"numPrimitives",{configurable:!0,get:function(){return this.numPrimitives_jhh8ci$_0},set:function(t){this.numPrimitives_jhh8ci$_0=t}}),ki.prototype.bufferAllocated_yhmem3$=function(t,i){var n;null!=(n=this.bufferAllocations.put_xwzc9p$(t,i))&&(this.totalBufferSize=this.totalBufferSize.subtract(e.Long.fromInt(n))),this.totalBufferSize=this.totalBufferSize.add(e.Long.fromInt(i))},ki.prototype.bufferDeleted_s8cxhz$=function(t){var i;null!=(i=this.bufferAllocations.remove_11rb$(t))&&(this.totalBufferSize=this.totalBufferSize.subtract(e.Long.fromInt(i)))},ki.prototype.textureAllocated_yhmem3$=function(t,i){var n;null!=(n=this.textureAllocations.put_xwzc9p$(t,i))&&(this.totalTextureSize=this.totalTextureSize.subtract(e.Long.fromInt(n))),this.totalTextureSize=this.totalTextureSize.add(e.Long.fromInt(i))},ki.prototype.textureDeleted_s8cxhz$=function(t){var i;null!=(i=this.textureAllocations.remove_11rb$(t))&&(this.totalTextureSize=this.totalTextureSize.subtract(e.Long.fromInt(i)))},ki.prototype.pipelineInstanceCreated_s8cxhz$=function(t){var e,i=(null!=(e=this.pipelines.get_11rb$(t))?e:0)+1|0;this.pipelines.put_xwzc9p$(t,i),this.numPipelineInstances=this.numPipelineInstances+1|0},ki.prototype.pipelineInstanceDestroyed_s8cxhz$=function(t){var e,i=(null!=(e=this.pipelines.get_11rb$(t))?e:0)-1|0;i>=0&&(this.pipelines.put_xwzc9p$(t,i),this.numPipelineInstances=this.numPipelineInstances-1|0)},ki.prototype.pipelineDestroyed_s8cxhz$=function(t){var e;null!=(e=this.pipelines.remove_11rb$(t))&&(this.numPipelineInstances=this.numPipelineInstances-e|0)},ki.prototype.resetPerFrameCounts=function(){this.numDrawCommands=0,this.numPrimitives=0},ki.prototype.addDrawCommandCount_za3lpa$=function(t){this.numDrawCommands=this.numDrawCommands+t|0},ki.prototype.addPrimitiveCount_za3lpa$=function(t){this.numPrimitives=this.numPrimitives+t|0},ki.$metadata$={kind:$,simpleName:"EngineStats",interfaces:[]},Si.prototype.registerKeyListener_i13a8v$=function(t,e,i,n){return void 0===i&&(i=Ci),this.registerKeyListener_aviy8w$(0|t,e,i,n)},Si.prototype.registerKeyListener_aviy8w$=function(t,i,n,o){void 0===n&&(n=Ni);var r,s=32<=t&&t<=126?"'"+String.fromCharCode(N(t))+"'":t.toString(),a=this.keyHandlers_0,l=a.get_11rb$(t);if(null==l){var u=M();a.put_xwzc9p$(t,u),r=u}else r=l;var p=r;if(!p.isEmpty()){var c=KN.Log,h=Cz.WARN,d=e.getKClassFromExpression(this).simpleName;if(h.level>=c.level.level){var f,_=c.printer,m="Multiple bindings for key "+s+": ",$=w(j(p,10));for(f=p.iterator();f.hasNext();){var y=f.next();$.add_11rb$(y.name)}_.call(c,h,d,m+$)}}var v=new Zi(t,i,n,o);p.add_11rb$(v);var g=KN.Log,b=Cz.DEBUG,x=e.getKClassFromExpression(this).simpleName;return b.level>=g.level.level&&g.printer(b,x,'Registered key handler: "'+i+'" [keyCode='+s+"]"),v},Si.prototype.removeKeyListener_abhb69$=function(t){var e;null!=(e=this.keyHandlers_0.get_11rb$(t.keyCode))&&e.remove_11rb$(t)},Si.prototype.onNewFrame_cwprtu$=function(t){var e;this.pointerState.onNewFrame_cwprtu$(t),this.keyEvents.clear(),this.keyEvents.addAll_brywnq$(this.queuedKeyEvents_0),this.queuedKeyEvents_0.clear(),e=this.keyEvents;for(var i=0;i!==e.size;++i){var n=this.keyEvents.get_za3lpa$(i),o=this.keyHandlers_0.get_11rb$(n.keyCode);if(null!=o)for(var r=0;r!==o.size;++r)o.get_za3lpa$(r).filter(n)&&o.get_za3lpa$(r).invoke_9cgpoj$(n)}},Si.prototype.keyEvent_qt1dr2$=function(t,e,i){var n=new Qi;n.keyCode=t,n.event=i,n.modifiers=e,this.queuedKeyEvents_0.add_11rb$(n)},Si.prototype.charTyped_s8itvh$=function(t){var e=new Qi;e.event=8,e.typedChar=E(t),e.keyCode=0|t,this.queuedKeyEvents_0.add_11rb$(e)},Si.prototype.handleTouchStart_nhq4am$=function(t,e,i){this.pointerState.handleTouchStart_qlj5un$(t,e,i)},Si.prototype.handleTouchEnd_za3lpa$=function(t){this.pointerState.handleTouchEnd_kcn2v3$(t)},Si.prototype.handleTouchCancel_za3lpa$=function(t){this.pointerState.handleTouchCancel_kcn2v3$(t)},Si.prototype.handleTouchMove_nhq4am$=function(t,e,i){this.pointerState.handleTouchMove_qlj5un$(t,e,i)},Si.prototype.handleMouseMove_dleff0$=function(t,e){this.pointerState.handleMouseMove_dob1fz$(t,e)},Si.prototype.handleMouseButtonState_fzusl$=function(t,e){this.pointerState.handleMouseButtonState_iwgtk$(t,e)},Si.prototype.handleMouseButtonStates_za3lpa$=function(t){this.pointerState.handleMouseButtonStates_kcn2v3$(t)},Si.prototype.handleMouseScroll_mx4ult$=function(t){this.pointerState.handleMouseScroll_nwfnho$(t)},Si.prototype.handleMouseExit=function(){this.pointerState.handleMouseExit_8be2vx$()},Object.defineProperty(Ei.prototype,"id",{configurable:!0,get:function(){return this.id_yfac1g$_0},set:function(t){this.id_yfac1g$_0=t}}),Object.defineProperty(Ei.prototype,"x",{configurable:!0,get:function(){return this.x_5rhhjp$_0},set:function(t){this.x_5rhhjp$_0=t}}),Object.defineProperty(Ei.prototype,"y",{configurable:!0,get:function(){return this.y_5rhhkk$_0},set:function(t){this.y_5rhhkk$_0=t}}),Object.defineProperty(Ei.prototype,"deltaX",{configurable:!0,get:function(){return this.deltaX_8nh2op$_0},set:function(t){this.deltaX_8nh2op$_0=t}}),Object.defineProperty(Ei.prototype,"deltaY",{configurable:!0,get:function(){return this.deltaY_8nh2nu$_0},set:function(t){this.deltaY_8nh2nu$_0=t}}),Object.defineProperty(Ei.prototype,"dragDeltaX",{configurable:!0,get:function(){return this.dragDeltaX_yg2vql$_0},set:function(t){this.dragDeltaX_yg2vql$_0=t}}),Object.defineProperty(Ei.prototype,"dragDeltaY",{configurable:!0,get:function(){return this.dragDeltaY_yg2vpq$_0},set:function(t){this.dragDeltaY_yg2vpq$_0=t}}),Object.defineProperty(Ei.prototype,"deltaScroll",{configurable:!0,get:function(){return this.deltaScroll_trurwo$_0},set:function(t){this.deltaScroll_trurwo$_0=t}}),Object.defineProperty(Ei.prototype,"buttonMask",{configurable:!0,get:function(){return this.buttonMask_uq1vpl$_0},set:function(t){this.buttonEventMask=this.buttonEventMask|this.buttonMask_uq1vpl$_0^t,this.buttonMask_uq1vpl$_0=t}}),Object.defineProperty(Ei.prototype,"buttonEventMask",{configurable:!0,get:function(){return this.buttonEventMask_dc8ngn$_0},set:function(t){this.buttonEventMask_dc8ngn$_0=t}}),Object.defineProperty(Ei.prototype,"isValid",{configurable:!0,get:function(){return this.isValid_cde91$_0},set:function(t){this.isValid_cde91$_0=t}}),Object.defineProperty(Ei.prototype,"isLeftButtonDown",{configurable:!0,get:function(){return 0!=(1&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isRightButtonDown",{configurable:!0,get:function(){return 0!=(2&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isMiddleButtonDown",{configurable:!0,get:function(){return 0!=(4&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isBackButtonDown",{configurable:!0,get:function(){return 0!=(8&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isForwardButtonDown",{configurable:!0,get:function(){return 0!=(16&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isLeftButtonEvent",{configurable:!0,get:function(){return 0!=(1&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isRightButtonEvent",{configurable:!0,get:function(){return 0!=(2&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isMiddleButtonEvent",{configurable:!0,get:function(){return 0!=(4&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isBackButtonEvent",{configurable:!0,get:function(){return 0!=(8&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isForwardButtonEvent",{configurable:!0,get:function(){return 0!=(16&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isLeftButtonPressed",{configurable:!0,get:function(){return this.isLeftButtonEvent&&this.isLeftButtonDown}}),Object.defineProperty(Ei.prototype,"isRightButtonPressed",{configurable:!0,get:function(){return this.isRightButtonEvent&&this.isRightButtonDown}}),Object.defineProperty(Ei.prototype,"isMiddleButtonPressed",{configurable:!0,get:function(){return this.isMiddleButtonEvent&&this.isMiddleButtonDown}}),Object.defineProperty(Ei.prototype,"isBackButtonPressed",{configurable:!0,get:function(){return this.isBackButtonEvent&&this.isBackButtonDown}}),Object.defineProperty(Ei.prototype,"isForwardButtonPressed",{configurable:!0,get:function(){return this.isForwardButtonEvent&&this.isForwardButtonDown}}),Object.defineProperty(Ei.prototype,"isLeftButtonReleased",{configurable:!0,get:function(){return this.isLeftButtonEvent&&!this.isLeftButtonDown}}),Object.defineProperty(Ei.prototype,"isRightButtonReleased",{configurable:!0,get:function(){return this.isRightButtonEvent&&!this.isRightButtonDown}}),Object.defineProperty(Ei.prototype,"isMiddleButtonReleased",{configurable:!0,get:function(){return this.isMiddleButtonEvent&&!this.isMiddleButtonDown}}),Object.defineProperty(Ei.prototype,"isBackButtonReleased",{configurable:!0,get:function(){return this.isBackButtonEvent&&!this.isBackButtonDown}}),Object.defineProperty(Ei.prototype,"isForwardButtonReleased",{configurable:!0,get:function(){return this.isForwardButtonEvent&&!this.isForwardButtonDown}}),Object.defineProperty(Ei.prototype,"isLeftButtonClicked",{configurable:!0,get:function(){var t=this.isLeftButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isRightButtonClicked",{configurable:!0,get:function(){var t=this.isRightButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isMiddleButtonClicked",{configurable:!0,get:function(){var t=this.isMiddleButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isBackButtonClicked",{configurable:!0,get:function(){var t=this.isBackButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isForwardButtonClicked",{configurable:!0,get:function(){var t=this.isForwardButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Ei.prototype.consume_za3lpa$=function(t){void 0===t&&(t=-1),this.consumptionMask_8be2vx$=this.consumptionMask_8be2vx$|t},Ei.prototype.isConsumed_za3lpa$=function(t){return void 0===t&&(t=-1),0!=(this.consumptionMask_8be2vx$&t)},Ei.prototype.isInViewport_hrtwbc$=function(t,e){var i=e.windowHeight-this.y;return this.isValid&&t.isInViewport_dleff0$(this.x,i)},Ei.$metadata$={kind:$,simpleName:"Pointer",interfaces:[]},Ti.prototype.setButtonMask_za3lpa$=function(t){this.buttonMask=t,(this.isLeftButtonPressed||this.isRightButtonPressed||this.isMiddleButtonPressed)&&(this.dragDeltaX=0,this.dragDeltaY=0)},Ti.prototype.startPointer_nhq4am$=function(t,e,i){this.movePointer_dleff0$(e,i),this.id=t,this.deltaX=0,this.deltaY=0,this.dragDeltaX=0,this.dragDeltaY=0,this.deltaScroll=0,this.updateState_0=Ai(),this.isValid=!0},Ti.prototype.movePointer_dleff0$=function(t,e){0!==this.buttonMask&&(this.dragDeltaX=this.dragDeltaX+(t-this.x),this.dragDeltaY=this.dragDeltaY+(e-this.y)),this.deltaX=this.deltaX+(t-this.x),this.deltaY=this.deltaY+(e-this.y),this.x=t,this.y=e,this.lastUpdate=qS()},Ti.prototype.endPointer=function(){var t;switch(this.processedState_0.name){case"ACTIVE":t=Wi();break;case"STARTED":t=Vi();break;default:t=Fi()}this.updateState_0=t},Ti.prototype.cancelPointer=function(){this.buttonMask=0,this.buttonEventMask=0,this.deltaX=0,this.deltaY=0,this.deltaScroll=0,this.dragDeltaX=0,this.dragDeltaY=0,this.updateState_0=Yi(),this.isValid=!1},Ti.prototype.update_sjovm5$=function(t,i){if(this.updateState_0!==Yi()&&i-this.lastUpdate>200){var n=KN.Log,o=Cz.WARN,r=e.getKClassFromExpression(this).simpleName;o.level>=n.level.level&&n.printer(o,r,"Pointer "+this.id+" timed out!"),this.cancelPointer()}switch(t.id=this.id,t.deltaX=this.deltaX,t.deltaY=this.deltaY,t.dragDeltaX=this.dragDeltaX,t.dragDeltaY=this.dragDeltaY,t.deltaScroll=this.deltaScroll,t.x=this.x,t.y=this.y,t.isValid=!0,t.consumptionMask_8be2vx$=0,t.buttonEventMask=0,this.updateState_0.name){case"STARTED":case"ENDED_BEFORE_STARTED":t.buttonMask=0;break;case"ACTIVE":case"ENDED_BEFORE_ACTIVE":t.buttonMask=this.buttonMask;break;case"ENDED":t.buttonMask=0;break;case"INVALID":this.isValid=!1,t.isValid=!1}this.deltaX=0,this.deltaY=0,this.deltaScroll=0,this.buttonEventMask=0,this.processedState_0=this.updateState_0,this.updateState_0=this.updateState_0.next()},Mi.prototype.next=function(){return Li()},Mi.$metadata$={kind:$,simpleName:"STARTED",interfaces:[Pi]};var ji=null;function Ai(){return Oi(),ji}function Ii(){Ri=this,Pi.call(this,"ACTIVE",1)}Ii.prototype.next=function(){return Li()},Ii.$metadata$={kind:$,simpleName:"ACTIVE",interfaces:[Pi]};var Ri=null;function Li(){return Oi(),Ri}function Di(){qi=this,Pi.call(this,"ENDED_BEFORE_STARTED",2)}Di.prototype.next=function(){return Vi()},Di.$metadata$={kind:$,simpleName:"ENDED_BEFORE_STARTED",interfaces:[Pi]};var qi=null;function Fi(){return Oi(),qi}function Bi(){Ui=this,Pi.call(this,"ENDED_BEFORE_ACTIVE",3)}Bi.prototype.next=function(){return Wi()},Bi.$metadata$={kind:$,simpleName:"ENDED_BEFORE_ACTIVE",interfaces:[Pi]};var Ui=null;function Vi(){return Oi(),Ui}function Gi(){Hi=this,Pi.call(this,"ENDED",4)}Gi.prototype.next=function(){return Yi()},Gi.$metadata$={kind:$,simpleName:"ENDED",interfaces:[Pi]};var Hi=null;function Wi(){return Oi(),Hi}function Ki(){Xi=this,Pi.call(this,"INVALID",5)}Ki.prototype.next=function(){return Yi()},Ki.$metadata$={kind:$,simpleName:"INVALID",interfaces:[Pi]};var Xi=null;function Yi(){return Oi(),Xi}function Zi(t,e,i,n){void 0===i&&(i=Ji),this.keyCode=t,this.name=e,this.filter=i,this.callback=n}function Ji(t){return!0}function Qi(){this.keyCode_56t57j$_0=0,this.modifiers_cmws0f$_0=0,this.event_4ycnw1$_0=0,this.typedChar_ne8il1$_0=N(0)}function tn(){var t,e=I(10);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=new Ei;this.pointers=e,this.lastPtrInput_0=0;var n,o=I(10);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=new Ti;this.inputPointers_0=o,this.compatGestureEvaluator_0=new $S,this.isEvaluatingCompatGestures=!0,this.primaryPointer=this.pointers[0]}function en(){nn=this,this.LEFT_BUTTON=0,this.LEFT_BUTTON_MASK=1,this.RIGHT_BUTTON=1,this.RIGHT_BUTTON_MASK=2,this.MIDDLE_BUTTON=2,this.MIDDLE_BUTTON_MASK=4,this.BACK_BUTTON=3,this.BACK_BUTTON_MASK=8,this.FORWARD_BUTTON=4,this.FORWARD_BUTTON_MASK=16,this.MAX_POINTERS=10,this.MOUSE_POINTER_ID=-1e6,this.CONSUMED_ALL=-1,this.CONSUMED_X=1,this.CONSUMED_Y=2,this.CONSUMED_SCROLL=4,this.CONSUMED_LEFT_BUTTON=8,this.CONSUMED_RIGHT_BUTTON=16,this.CONSUMED_MIDDLE_BUTTON=32,this.CONSUMED_BACK_BUTTON=64,this.CONSUMED_FORWARD_BUTTON=128,this.KEY_EV_UP=1,this.KEY_EV_DOWN=2,this.KEY_EV_REPEATED=4,this.KEY_EV_CHAR_TYPED=8,this.KEY_MOD_SHIFT=1,this.KEY_MOD_CTRL=2,this.KEY_MOD_ALT=4,this.KEY_MOD_SUPER=8,this.KEY_CTRL_LEFT=-1,this.KEY_CTRL_RIGHT=-2,this.KEY_SHIFT_LEFT=-3,this.KEY_SHIFT_RIGHT=-4,this.KEY_ALT_LEFT=-5,this.KEY_ALT_RIGHT=-6,this.KEY_SUPER_LEFT=-7,this.KEY_SUPER_RIGHT=-8,this.KEY_ESC=-9,this.KEY_MENU=-10,this.KEY_ENTER=-11,this.KEY_NP_ENTER=-12,this.KEY_NP_DIV=-13,this.KEY_NP_MUL=-14,this.KEY_NP_PLUS=-15,this.KEY_NP_MINUS=-16,this.KEY_BACKSPACE=-17,this.KEY_TAB=-18,this.KEY_DEL=-19,this.KEY_INSERT=-20,this.KEY_HOME=-21,this.KEY_END=-22,this.KEY_PAGE_UP=-23,this.KEY_PAGE_DOWN=-24,this.KEY_CURSOR_LEFT=-25,this.KEY_CURSOR_RIGHT=-26,this.KEY_CURSOR_UP=-27,this.KEY_CURSOR_DOWN=-28,this.KEY_F1=-29,this.KEY_F2=-30,this.KEY_F3=-31,this.KEY_F4=-32,this.KEY_F5=-33,this.KEY_F6=-34,this.KEY_F7=-35,this.KEY_F8=-36,this.KEY_F9=-37,this.KEY_F10=-38,this.KEY_F11=-39,this.KEY_F12=-40}Pi.$metadata$={kind:$,simpleName:"UpdateState",interfaces:[T]},Pi.values=function(){return[Ai(),Li(),Fi(),Vi(),Wi(),Yi()]},Pi.valueOf_61zpoe$=function(t){switch(t){case"STARTED":return Ai();case"ACTIVE":return Li();case"ENDED_BEFORE_STARTED":return Fi();case"ENDED_BEFORE_ACTIVE":return Vi();case"ENDED":return Wi();case"INVALID":return Yi();default:P("No enum constant de.fabmax.kool.InputManager.BufferedPointerInput.UpdateState."+t)}},Ti.$metadata$={kind:$,simpleName:"BufferedPointerInput",interfaces:[Ei]},Zi.prototype.invoke_9cgpoj$=function(t){this.callback(t)},Zi.$metadata$={kind:$,simpleName:"KeyEventListener",interfaces:[]},Object.defineProperty(Qi.prototype,"keyCode",{configurable:!0,get:function(){return this.keyCode_56t57j$_0},set:function(t){this.keyCode_56t57j$_0=t}}),Object.defineProperty(Qi.prototype,"modifiers",{configurable:!0,get:function(){return this.modifiers_cmws0f$_0},set:function(t){this.modifiers_cmws0f$_0=t}}),Object.defineProperty(Qi.prototype,"event",{configurable:!0,get:function(){return this.event_4ycnw1$_0},set:function(t){this.event_4ycnw1$_0=t}}),Object.defineProperty(Qi.prototype,"typedChar",{configurable:!0,get:function(){return E(this.typedChar_ne8il1$_0)},set:function(t){this.typedChar_ne8il1$_0=O(t)}}),Object.defineProperty(Qi.prototype,"isPressed",{configurable:!0,get:function(){return 0!=(2&this.event)}}),Object.defineProperty(Qi.prototype,"isRepeated",{configurable:!0,get:function(){return 0!=(4&this.event)}}),Object.defineProperty(Qi.prototype,"isReleased",{configurable:!0,get:function(){return 0!=(1&this.event)}}),Object.defineProperty(Qi.prototype,"isCharTyped",{configurable:!0,get:function(){return 0!=(8&this.event)}}),Object.defineProperty(Qi.prototype,"isShiftDown",{configurable:!0,get:function(){return 0!=(1&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isCtrlDown",{configurable:!0,get:function(){return 0!=(2&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isAltDown",{configurable:!0,get:function(){return 0!=(4&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isSuperDown",{configurable:!0,get:function(){return 0!=(8&this.modifiers)}}),Qi.$metadata$={kind:$,simpleName:"KeyEvent",interfaces:[]},tn.prototype.getActivePointers_j71cmr$=function(t,e){var i;void 0===e&&(e=-1),t.clear(),i=this.pointers;for(var n=0;n!==i.length;++n)this.pointers[n].isValid&&!this.pointers[n].isConsumed_za3lpa$(e)&&t.add_11rb$(this.pointers[n])},tn.prototype.onNewFrame_cwprtu$=function(t){var e;e=this.pointers;for(var i=0;i!==e.length;++i)this.inputPointers_0[i].update_sjovm5$(this.pointers[i],this.lastPtrInput_0);if(this.isEvaluatingCompatGestures)switch(this.compatGestureEvaluator_0.evaluate_19cf9$(this,t),this.compatGestureEvaluator_0.currentGesture.type){case 1:this.primaryPointer.consumptionMask_8be2vx$=0,this.primaryPointer.deltaScroll=this.compatGestureEvaluator_0.currentGesture.dPinchAmount/20,this.primaryPointer.x=this.compatGestureEvaluator_0.currentGesture.centerCurrent.x,this.primaryPointer.y=this.compatGestureEvaluator_0.currentGesture.centerCurrent.y,this.primaryPointer.deltaX=this.compatGestureEvaluator_0.currentGesture.dCenter.x,this.primaryPointer.deltaY=this.compatGestureEvaluator_0.currentGesture.dCenter.y;break;case 2:this.primaryPointer.consumptionMask_8be2vx$=0,this.primaryPointer.x=this.compatGestureEvaluator_0.currentGesture.centerCurrent.x,this.primaryPointer.y=this.compatGestureEvaluator_0.currentGesture.centerCurrent.y,this.primaryPointer.deltaX=this.compatGestureEvaluator_0.currentGesture.dCenter.x,this.primaryPointer.deltaY=this.compatGestureEvaluator_0.currentGesture.dCenter.y,1===this.primaryPointer.buttonMask&&(this.primaryPointer.buttonMask=2,this.compatGestureEvaluator_0.currentGesture.numUpdates>1&&(this.primaryPointer.buttonEventMask=0))}},tn.prototype.getFreeInputPointer_8be2vx$=function(){var t;t=this.inputPointers_0;for(var e=0;e!==t.length;++e)if(!this.inputPointers_0[e].isValid)return this.inputPointers_0[e];return null},tn.prototype.findInputPointer_kcn2v3$=function(t){var e;e=this.inputPointers_0;for(var i=0;i!==e.length;++i)if(this.inputPointers_0[i].isValid&&this.inputPointers_0[i].id===t)return this.inputPointers_0[i];return null},tn.prototype.handleTouchStart_qlj5un$=function(t,e,i){var n;if(this.lastPtrInput_0=qS(),null!=(n=this.getFreeInputPointer_8be2vx$())){var o=n;o.startPointer_nhq4am$(t,e,i),o.buttonMask=1}},tn.prototype.handleTouchEnd_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(t))&&e.endPointer()},tn.prototype.handleTouchCancel_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(t))&&e.cancelPointer()},tn.prototype.handleTouchMove_qlj5un$=function(t,e,i){var n;this.lastPtrInput_0=qS(),null!=(n=this.findInputPointer_kcn2v3$(t))&&n.movePointer_dleff0$(e,i)},tn.prototype.handleMouseMove_dob1fz$=function(t,e){var i;this.lastPtrInput_0=qS();var n=this.findInputPointer_kcn2v3$(-1e6);if(null==n){if(null==(i=this.getFreeInputPointer_8be2vx$()))return;i.startPointer_nhq4am$(-1e6,t,e)}else n.movePointer_dleff0$(t,e)},tn.prototype.handleMouseButtonState_iwgtk$=function(t,e){var i;if(null!=(i=this.findInputPointer_kcn2v3$(-1e6))){var n=i;e?n.setButtonMask_za3lpa$(n.buttonMask|1<<t):n.setButtonMask_za3lpa$(n.buttonMask&~(1<<t))}},tn.prototype.handleMouseButtonStates_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(-1e6))&&e.setButtonMask_za3lpa$(t)},tn.prototype.handleMouseScroll_nwfnho$=function(t){var e;if(null!=(e=this.findInputPointer_kcn2v3$(-1e6))){var i=e;i.deltaScroll=i.deltaScroll+t}},tn.prototype.handleMouseExit_8be2vx$=function(){var t;null!=(t=this.findInputPointer_kcn2v3$(-1e6))&&t.cancelPointer()},tn.$metadata$={kind:$,simpleName:"PointerState",interfaces:[]},en.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var nn=null;function on(){return null===nn&&new en,nn}function rn(){un(),this.screenDpi=96,this.inputMgr=new Si,this.engineStats=new ki,this.projCorrectionMatrixScreen=new bn,this.projCorrectionMatrixOffscreen=new bn,this.depthBiasMatrix=(new bn).translate_yvo9jy$(.5,.5,.5).scale_yvo9jy$(.5,.5,.5),this.onRender=M(),this.time_q5mkh0$_0=0,this.deltaT_wdv5hn$_0=0,this.frameIdx_2g8w1r$_0=0,this.fps_a02wsa$_0=60,this.scenes=M(),this.backgroundScene_ibwr5x$_0=new Of("backgroundScene"),this.delayedCallbacks_puvmt7$_0=M(),this.disposablePipelines_8be2vx$=M();var t,e=new Float64Array(25);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=.017;this.frameTimes_6eiyeg$_0=e}function sn(t,e){this.callOnFrame=t,this.callback=e}function an(){ln=this,this.KOOL_VERSION="0.6.0-200909.2017"}Si.$metadata$={kind:$,simpleName:"InputManager",interfaces:[]},Object.defineProperty(rn.prototype,"time",{configurable:!0,get:function(){return this.time_q5mkh0$_0},set:function(t){this.time_q5mkh0$_0=t}}),Object.defineProperty(rn.prototype,"deltaT",{configurable:!0,get:function(){return this.deltaT_wdv5hn$_0},set:function(t){this.deltaT_wdv5hn$_0=t}}),Object.defineProperty(rn.prototype,"frameIdx",{configurable:!0,get:function(){return this.frameIdx_2g8w1r$_0},set:function(t){this.frameIdx_2g8w1r$_0=t}}),Object.defineProperty(rn.prototype,"fps",{configurable:!0,get:function(){return this.fps_a02wsa$_0},set:function(t){this.fps_a02wsa$_0=t}}),Object.defineProperty(rn.prototype,"backgroundPasses",{configurable:!0,get:function(){return this.backgroundScene_ibwr5x$_0.offscreenPasses}}),rn.prototype.runDelayed_hd6vpk$=function(t,e){var i=this.delayedCallbacks_puvmt7$_0,n=new sn(this.frameIdx+t|0,e);i.add_11rb$(n)},rn.prototype.disposePipeline_i7l2g2$=function(t){this.disposablePipelines_8be2vx$.add_11rb$(t)},rn.prototype.addBackgroundRenderPass_m1c2kf$=function(t){this.backgroundScene_ibwr5x$_0.addOffscreenPass_m1c2kf$(t)},rn.prototype.removeBackgroundRenderPass_m1c2kf$=function(t){this.backgroundScene_ibwr5x$_0.removeOffscreenPass_m1c2kf$(t)},rn.prototype.render_14dthe$=function(t){var e,i,n,o,r;if(!this.delayedCallbacks_puvmt7$_0.isEmpty())for(e=L(R(this.delayedCallbacks_puvmt7$_0)).iterator();e.hasNext();){var s=e.next(),a=this.delayedCallbacks_puvmt7$_0.get_za3lpa$(s);a.callOnFrame<=this.frameIdx&&(a.callback(this),this.delayedCallbacks_puvmt7$_0.removeAt_za3lpa$(s))}this.deltaT=t,this.time=this.time+t,this.frameIdx=this.frameIdx+1|0,this.frameTimes_6eiyeg$_0[this.frameIdx%this.frameTimes_6eiyeg$_0.length]=t;var l=0;i=this.frameTimes_6eiyeg$_0;for(var u=0;u!==i.length;++u)l+=this.frameTimes_6eiyeg$_0[u];this.fps=this.frameTimes_6eiyeg$_0.length/l*.1+.9*this.fps,this.inputMgr.onNewFrame_cwprtu$(this),n=this.onRender;for(var p=0;p!==n.size;++p)this.onRender.get_za3lpa$(p)(this);for(o=L(R(this.scenes)).iterator();o.hasNext();){var c=o.next();this.scenes.get_za3lpa$(c).isVisible&&this.scenes.get_za3lpa$(c).processInput_aemszp$(this)}this.backgroundScene_ibwr5x$_0.renderScene_aemszp$(this),r=this.scenes;for(var h=0;h!==r.size;++h)this.scenes.get_za3lpa$(h).isVisible&&this.scenes.get_za3lpa$(h).renderScene_aemszp$(this)},sn.$metadata$={kind:$,simpleName:"DelayedCallback",interfaces:[]},an.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ln=null;function un(){return null===ln&&new an,ln}function pn(t,e){D.call(this,t,e),this.name="KoolException"}function cn(t,e){return e=e||Object.create(pn.prototype),pn.call(e,t,null),e}function hn(t,e,i,n){this.degree=t,this.factory_o8y0vc$_0=e,this.copy_1qqihf$_0=i,this.mix_rjp6wa$_0=n,this.ctrlPoints=M(),this.knots_ks2m93$_0=M(),this.d_c5f19u$_0=M()}function dn(t){hn.call(this,t,fn,_n,mn)}function fn(){return po()}function _n(t,e){return e.set_czzhjp$(t),s}function mn(t,e,i,n,o){return o.x=e.x*t+n.x*i,o.y=e.y*t+n.y*i,s}function $n(){gn(),this.matrix=new Float32Array(9),this.setIdentity()}function yn(){vn=this,this.tmpMat_0=new $n}rn.$metadata$={kind:$,simpleName:"KoolContext",interfaces:[]},pn.$metadata$={kind:$,simpleName:"KoolException",interfaces:[D]},hn.prototype.addInterpolationEndpoints=function(){var t;t=this.degree;for(var e=0;e<t;e++){this.ctrlPoints.add_wxm5ur$(0,q(this.ctrlPoints));var i=this.ctrlPoints,n=F(this.ctrlPoints);i.add_11rb$(n)}},hn.prototype.evaluate_f6p79m$=function(t,e){if(t<=0)this.copy_1qqihf$_0(q(this.ctrlPoints),e);else if(t>=1)this.copy_1qqihf$_0(F(this.ctrlPoints),e);else{this.checkTemps_dp4s6j$_0();var i=this.degree+t*(this.ctrlPoints.size-(2*this.degree|0)+1|0);this.deBoor_47z15v$_0(B(i),i,e)}return e},hn.prototype.deBoor_47z15v$_0=function(t,e,i){var n,o,r=this.degree,s=this.ctrlPoints.size-1|0,a=t<r?r:t>s?s:t;n=this.degree;for(var l=0;l<=n;l++)this.copy_1qqihf$_0(this.ctrlPoints.get_za3lpa$(l+a-this.degree|0),this.d_c5f19u$_0.get_za3lpa$(l));o=this.degree;for(var u=1;u<=o;u++)for(var p=this.degree;p>=u;p--){var c=(e-this.knots_ks2m93$_0.get_za3lpa$(p+a-this.degree|0))/(this.knots_ks2m93$_0.get_za3lpa$(p+1+a-u|0)-this.knots_ks2m93$_0.get_za3lpa$(p+a-this.degree|0));this.mix_rjp6wa$_0(1-c,this.d_c5f19u$_0.get_za3lpa$(p-1|0),c,this.d_c5f19u$_0.get_za3lpa$(p),this.d_c5f19u$_0.get_za3lpa$(p))}this.copy_1qqihf$_0(this.d_c5f19u$_0.get_za3lpa$(this.degree),i)},hn.prototype.checkTemps_dp4s6j$_0=function(){var t,e;if(this.knots_ks2m93$_0.size!==(this.ctrlPoints.size+this.degree|0)){this.knots_ks2m93$_0.clear(),t=this.ctrlPoints.size+this.degree|0;for(var i=0;i<t;i++)this.knots_ks2m93$_0.add_11rb$(i)}if(this.d_c5f19u$_0.size!==(this.degree+1|0)){this.d_c5f19u$_0.clear(),e=this.degree;for(var n=0;n<=e;n++){var o=this.d_c5f19u$_0,r=this.factory_o8y0vc$_0();o.add_11rb$(r)}}},hn.$metadata$={kind:$,simpleName:"BSpline",interfaces:[]},dn.$metadata$={kind:$,simpleName:"BSplineVec2f",interfaces:[hn]},$n.prototype.rotate_7b5o5w$=function(t,e,i,n){var o,r=e,s=i,a=n,l=r*r+s*s+a*a,u=A.sqrt(l),p=1-u;if(o=LN.FUZZY_EQ_D,!(A.abs(p)<=o)){var c=1/u;r*=c,s*=c,a*=c}var h=t*(U.PI/180),d=A.sin(h),f=A.cos(h),_=1-f,m=r*s,$=s*a,y=a*r,v=r*d,g=s*d,b=a*d;return this.set_24o109$(0,r*r*_+f),this.set_24o109$(3,m*_-b),this.set_24o109$(6,y*_+g),this.set_24o109$(1,m*_+b),this.set_24o109$(4,s*s*_+f),this.set_24o109$(7,$*_-v),this.set_24o109$(2,y*_-g),this.set_24o109$(5,$*_+v),this.set_24o109$(8,a*a*_+f),this},$n.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},$n.prototype.rotate_c240ly$=function(t,e,i,n,o){return o.set_d4zu7e$(this),o.rotate_7b5o5w$(t,e,i,n),o},$n.prototype.rotate_phvhih$=function(t,e,i){return this.rotate_c240ly$(t,e.x,e.y,e.z,i)},$n.prototype.transpose=function(){var t=this.get_za3lpa$(1);return this.set_24o109$(1,this.get_za3lpa$(3)),this.set_24o109$(3,t),t=this.get_za3lpa$(2),this.set_24o109$(2,this.get_za3lpa$(6)),this.set_24o109$(6,t),t=this.get_za3lpa$(5),this.set_24o109$(5,this.get_za3lpa$(7)),this.set_24o109$(7,t),this},$n.prototype.transpose_d4zu6j$=function(t){return t.set_24o109$(0,this.get_za3lpa$(0)),t.set_24o109$(1,this.get_za3lpa$(3)),t.set_24o109$(2,this.get_za3lpa$(6)),t.set_24o109$(3,this.get_za3lpa$(1)),t.set_24o109$(4,this.get_za3lpa$(4)),t.set_24o109$(5,this.get_za3lpa$(7)),t.set_24o109$(6,this.get_za3lpa$(2)),t.set_24o109$(7,this.get_za3lpa$(5)),t.set_24o109$(8,this.get_za3lpa$(8)),t},$n.prototype.invert=function(){gn().tmpMat_0;var t=this.invert_d4zu7e$(gn().tmpMat_0);return t&&this.set_d4zu7e$(gn().tmpMat_0),t},$n.prototype.invert_d4zu7e$=function(t){for(var e,i=0,n=0;n<=2;n++)i+=this.get_za3lpa$(n)*(this.get_za3lpa$(3+(n+1|0)%3|0)*this.get_za3lpa$(6+(n+2|0)%3|0)-this.get_za3lpa$(3+(n+2|0)%3|0)*this.get_za3lpa$(6+(n+1|0)%3|0));if(i>0){i=1/i;for(var o=0;o<=2;o++)for(var r=0;r<=2;r++)t.set_24o109$((3*o|0)+r|0,(this.get_za3lpa$(((r+1|0)%3*3|0)+(o+1|0)%3|0)*this.get_za3lpa$(((r+2|0)%3*3|0)+(o+2|0)%3|0)-this.get_za3lpa$(((r+1|0)%3*3|0)+(o+2|0)%3|0)*this.get_za3lpa$(((r+2|0)%3*3|0)+(o+1|0)%3|0))*i);e=!0}else e=!1;return e},$n.prototype.transform_5s4mqq$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2);return t.set_y2kzbl$(e,i,n)},$n.prototype.transform_2gj7b4$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2),e},$n.prototype.mul_d4zu7e$=function(t){return gn().tmpMat_0,this.mul_4w76o0$(t,gn().tmpMat_0),this.set_d4zu7e$(gn().tmpMat_0)},$n.prototype.mul_4w76o0$=function(t,e){for(var i=0;i<=2;i++)for(var n=0;n<=2;n++){for(var o=0,r=0;r<=2;r++)o+=this.get_za3lpa$(n+(3*r|0)|0)*t.get_za3lpa$((3*i|0)+r|0);e.set_24o109$((3*i|0)+n|0,o)}return e},$n.prototype.scale_y2kzbl$=function(t,e,i){for(var n=0;n<=2;n++)this.matrix[n]=this.matrix[n]*t,this.matrix[3+n|0]=this.matrix[3+n|0]*e,this.matrix[6+n|0]=this.matrix[6+n|0]*i;return this},$n.prototype.scale_czzhiu$=function(t){return this.scale_y2kzbl$(t.x,t.y,t.z)},$n.prototype.scale_g84k61$=function(t,e,i,n){for(var o=0;o<=2;o++)n.matrix[o]=this.matrix[o]*t,n.matrix[3+o|0]=this.matrix[3+o|0]*e,n.matrix[6+o|0]=this.matrix[6+o|0]*i;return n},$n.prototype.set_d4zu7e$=function(t){for(var e=0;e<=8;e++)this.set_24o109$(e,t.get_za3lpa$(e));return this},$n.prototype.set_hcyabg$=function(t){for(var e=0;e<=8;e++)this.set_24o109$(e,t.get_za3lpa$(e))},$n.prototype.setIdentity=function(){for(var t=1;t<=8;t++)this.set_24o109$(t,0);for(var e=0;e<=8;e+=4)this.set_24o109$(e,1);return this},$n.prototype.setRotate_7b5o5w$=function(t,e,i,n){return this.setIdentity(),this.rotate_7b5o5w$(t,e,i,n),this},$n.prototype.setRotate_czzhhz$=function(t){var e=t.w,i=t.x,n=t.y,o=t.z,r=e*e+i*i+n*n+o*o,s=A.sqrt(r);return s=1/(s*s),this.set_n0b4r3$(0,0,1-2*s*(n*n+o*o)),this.set_n0b4r3$(0,1,2*s*(i*n-o*e)),this.set_n0b4r3$(0,2,2*s*(i*o+n*e)),this.set_n0b4r3$(1,0,2*s*(i*n+o*e)),this.set_n0b4r3$(1,1,1-2*s*(i*i+o*o)),this.set_n0b4r3$(1,2,2*s*(n*o-i*e)),this.set_n0b4r3$(2,0,2*s*(i*o-n*e)),this.set_n0b4r3$(2,1,2*s*(n*o+i*e)),this.set_n0b4r3$(2,2,1-2*s*(i*i+n*n)),this},$n.prototype.getRotation_5s4mpv$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var o=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,r=(o+1|0)%3,s=(o+2|0)%3,a=this.get_vux9f0$(o,o)-this.get_vux9f0$(r,r)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_24o109$(o,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,r)-this.get_vux9f0$(r,s))*l,t.set_24o109$(r,(this.get_vux9f0$(r,o)+this.get_vux9f0$(o,r))*l),t.set_24o109$(s,(this.get_vux9f0$(s,o)+this.get_vux9f0$(o,s))*l)}return t},$n.prototype.get_za3lpa$=function(t){return this.matrix[t]},$n.prototype.get_vux9f0$=function(t,e){return this.matrix[(3*e|0)+t|0]},$n.prototype.set_24o109$=function(t,e){this.matrix[t]=e},$n.prototype.set_n0b4r3$=function(t,e,i){this.matrix[(3*e|0)+t|0]=i},$n.prototype.setColVec_ky00qo$=function(t,e){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z)},$n.prototype.getColVec_8irwuw$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e},$n.prototype.toBuffer_he122g$=function(t){return t.put_kgymra$(this.matrix,0,9),t.flip(),t},yn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vn=null;function gn(){return null===vn&&new yn,vn}function bn(){zn(),this.matrix_ntz8bm$_0=new Float64Array(16),this.offset_7ocvpo$_0=0,this.setIdentity()}function xn(){wn=this,this.tmpMatLock_0=new W,this.tmpMatA_0=new bn,this.tmpMatB_0=new bn}$n.$metadata$={kind:$,simpleName:"Mat3f",interfaces:[]},Object.defineProperty(bn.prototype,"matrix",{configurable:!0,get:function(){return this.matrix_ntz8bm$_0},set:function(t){this.matrix_ntz8bm$_0=t}}),Object.defineProperty(bn.prototype,"offset",{configurable:!0,get:function(){return this.offset_7ocvpo$_0},set:function(t){this.offset_7ocvpo$_0=t}}),bn.prototype.translate_yvo9jy$=function(t,e,i){for(var n=0;n<=3;n++){var o=this.offset+n|0;this.matrix[12+o|0]=this.matrix[12+o|0]+(this.matrix[o]*t+this.matrix[4+o|0]*e+this.matrix[8+o|0]*i)}return this},bn.prototype.translate_czzhiw$=function(t){return this.translate_yvo9jy$(t.x,t.y,t.z)},bn.prototype.translate_p4gs15$=function(t,e,i,n){for(var o=0;o<=11;o++)n.matrix[n.offset+o|0]=this.matrix[this.offset+o|0];for(var r=0;r<=3;r++){var s=this.offset+r|0;n.matrix[n.offset+12+r|0]=this.matrix[s]*t+this.matrix[4+s|0]*e+this.matrix[8+s|0]*i+this.matrix[12+s|0]}return n},bn.prototype.rotate_6y0v78$=function(t,e,i,n){return zn().tmpMatLock_0,zn().tmpMatA_0.setRotate_6y0v78$(t,e,i,n),this.set_d4zu6l$(this.mul_u47j3u$(zn().tmpMatA_0,zn().tmpMatB_0))},bn.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},bn.prototype.rotate_app323$=function(t,e,i,n,o){return zn().tmpMatLock_0,zn().tmpMatA_0.setRotate_6y0v78$(t,e,i,n),this.mul_u47j3u$(zn().tmpMatA_0,o)},bn.prototype.rotate_wwd6w1$=function(t,e,i){return this.rotate_app323$(t,e.x,e.y,e.z,i)},bn.prototype.scale_14dthe$=function(t){return this.scale_yvo9jy$(t,t,t)},bn.prototype.scale_yvo9jy$=function(t,e,i){for(var n=0;n<=3;n++){var o=this.offset+n|0;this.matrix[o]=this.matrix[o]*t,this.matrix[4+o|0]=this.matrix[4+o|0]*e,this.matrix[8+o|0]=this.matrix[8+o|0]*i}return this},bn.prototype.scale_czzhiw$=function(t){return this.scale_yvo9jy$(t.x,t.y,t.z)},bn.prototype.scale_p4gs15$=function(t,e,i,n){for(var o=0;o<=3;o++){var r=n.offset+o|0,s=this.offset+o|0;n.matrix[r]=this.matrix[s]*t,n.matrix[4+r|0]=this.matrix[4+s|0]*e,n.matrix[8+r|0]=this.matrix[8+s|0]*i,n.matrix[12+r|0]=this.matrix[12+s|0]}return n},bn.prototype.resetScale=function(){var t=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0),e=1/A.sqrt(t),i=this.get_vux9f0$(0,1)*this.get_vux9f0$(0,1)+this.get_vux9f0$(1,1)*this.get_vux9f0$(1,1)+this.get_vux9f0$(2,1)*this.get_vux9f0$(2,1),n=1/A.sqrt(i),o=this.get_vux9f0$(0,2)*this.get_vux9f0$(0,2)+this.get_vux9f0$(1,2)*this.get_vux9f0$(1,2)+this.get_vux9f0$(2,2)*this.get_vux9f0$(2,2),r=1/A.sqrt(o);return this.scale_yvo9jy$(e,n,r),this},bn.prototype.transpose=function(){return zn().tmpMatLock_0,this.set_d4zu6l$(this.transpose_d4zu6l$(zn().tmpMatA_0))},bn.prototype.transpose_d4zu6l$=function(t){for(var e=0;e<=3;e++){var i=(4*e|0)+this.offset|0;t.matrix[e+t.offset|0]=this.matrix[i],t.matrix[e+4+t.offset|0]=this.matrix[i+1|0],t.matrix[e+8+t.offset|0]=this.matrix[i+2|0],t.matrix[e+12+t.offset|0]=this.matrix[i+3|0]}return t},bn.prototype.invert_14dthe$=function(t){void 0===t&&(t=0),zn().tmpMatLock_0;var e=this.invert_23yxad$(zn().tmpMatA_0,t);return e&&this.set_d4zu6l$(zn().tmpMatA_0),e},bn.prototype.invert_23yxad$=function(t,e){void 0===e&&(e=0);var i=this.matrix[this.offset+0|0],n=this.matrix[this.offset+1|0],o=this.matrix[this.offset+2|0],r=this.matrix[this.offset+3|0],s=this.matrix[this.offset+4|0],a=this.matrix[this.offset+5|0],l=this.matrix[this.offset+6|0],u=this.matrix[this.offset+7|0],p=this.matrix[this.offset+8|0],c=this.matrix[this.offset+9|0],h=this.matrix[this.offset+10|0],d=this.matrix[this.offset+11|0],f=this.matrix[this.offset+12|0],_=this.matrix[this.offset+13|0],m=this.matrix[this.offset+14|0],$=this.matrix[this.offset+15|0],y=h*$,v=m*d,g=l*$,b=m*u,x=l*d,w=h*u,z=o*$,k=m*r,S=o*d,C=h*r,N=o*u,E=l*r,T=y*a+b*c+x*_-(v*a+g*c+w*_),P=v*n+z*c+C*_-(y*n+k*c+S*_),O=g*n+k*a+N*_-(b*n+z*a+E*_),M=w*n+S*a+E*c-(x*n+C*a+N*c),j=v*s+g*p+w*f-(y*s+b*p+x*f),I=y*i+k*p+S*f-(v*i+z*p+C*f),R=b*i+z*s+E*f-(g*i+k*s+N*f),L=x*i+C*s+N*p-(w*i+S*s+E*p),D=p*_,q=f*c,F=s*_,B=f*a,U=s*c,V=p*a,G=i*_,H=f*n,W=i*c,K=p*n,X=i*a,Y=s*n,Z=D*u+B*d+U*$-(q*u+F*d+V*$),J=q*r+G*d+K*$-(D*r+H*d+W*$),Q=F*r+H*u+X*$-(B*r+G*u+Y*$),tt=V*r+W*u+Y*d-(U*r+K*u+X*d),et=F*h+V*m+q*l-(U*m+D*l+B*h),it=W*m+D*o+H*h-(G*h+K*m+q*o),nt=G*l+Y*m+B*o-(X*m+F*o+H*l),ot=X*h+U*o+K*l-(W*l+Y*h+V*o),rt=i*T+s*P+p*O+f*M;if(A.abs(rt)<=e)return!1;var st=1/rt;return t.matrix[t.offset]=T*st,t.matrix[1+t.offset|0]=P*st,t.matrix[2+t.offset|0]=O*st,t.matrix[3+t.offset|0]=M*st,t.matrix[4+t.offset|0]=j*st,t.matrix[5+t.offset|0]=I*st,t.matrix[6+t.offset|0]=R*st,t.matrix[7+t.offset|0]=L*st,t.matrix[8+t.offset|0]=Z*st,t.matrix[9+t.offset|0]=J*st,t.matrix[10+t.offset|0]=Q*st,t.matrix[11+t.offset|0]=tt*st,t.matrix[12+t.offset|0]=et*st,t.matrix[13+t.offset|0]=it*st,t.matrix[14+t.offset|0]=nt*st,t.matrix[15+t.offset|0]=ot*st,!0},bn.prototype.transform_w1lst9$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),o=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_y2kzbl$(i,n,o)},bn.prototype.transform_a6wx89$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},bn.prototype.transform_5s4mpv$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),o=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_7b5o5w$(e,i,n,o)},bn.prototype.transform_uzu8ww$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},bn.prototype.transform_j7uy7i$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),o=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_yvo9jy$(i,n,o)},bn.prototype.transform_3odno2$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},bn.prototype.transform_5s4mpx$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),o=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_6y0v78$(e,i,n,o)},bn.prototype.transform_2x9ggw$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},bn.prototype.add_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=this.matrix[this.offset+e|0]+t.matrix[t.offset+e|0];return this},bn.prototype.mul_d4zu6l$=function(t){return zn().tmpMatLock_0,this.mul_u47j3u$(t,zn().tmpMatA_0),this.set_d4zu6l$(zn().tmpMatA_0)},bn.prototype.mul_u47j3u$=function(t,e){for(var i=0;i<=3;i++)for(var n=0;n<=3;n++){for(var o=0,r=0;r<=3;r++)o+=this.matrix[this.offset+n+(4*r|0)|0]*t.matrix[t.offset+(4*i|0)+r|0];e.matrix[e.offset+(4*i|0)+n|0]=o}return e},bn.prototype.set_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},bn.prototype.set_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},bn.prototype.set_d3e2cz$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.get_za3lpa$(e);return this},bn.prototype.setZero=function(){for(var t=0;t<=15;t++)this.matrix[this.offset+t|0]=0;return this},bn.prototype.setIdentity=function(){for(var t=1;t<=15;t++)this.matrix[this.offset+t|0]=0;return this.matrix[this.offset]=1,this.matrix[this.offset+5|0]=1,this.matrix[this.offset+10|0]=1,this.matrix[this.offset+15|0]=1,this},bn.prototype.setRotate_6y0v78$=function(t,e,i,n){var o=t*LN.DEG_2_RAD,r=e,s=i,a=n;this.matrix[this.offset+3|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1;var l=A.sin(o),u=A.cos(o);if(1===r&&0===s&&0===a)this.matrix[this.offset+5|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+6|0]=l,this.matrix[this.offset+9|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+0|0]=1;else if(0===r&&1===s&&0===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+8|0]=l,this.matrix[this.offset+2|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+5|0]=1;else if(0===r&&0===s&&1===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=u,this.matrix[this.offset+1|0]=l,this.matrix[this.offset+4|0]=-l,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=1;else{var p,c=r*r+s*s+a*a,h=A.sqrt(c);p=LN.FUZZY_EQ_D;var d=h-1;if(!(A.abs(d)<=p)){var f=1/h;r*=f,s*=f,a*=f}var _=1-u,m=r*s,$=s*a,y=a*r,v=r*l,g=s*l,b=a*l;this.matrix[this.offset+0|0]=r*r*_+u,this.matrix[this.offset+4|0]=m*_-b,this.matrix[this.offset+8|0]=y*_+g,this.matrix[this.offset+1|0]=m*_+b,this.matrix[this.offset+5|0]=s*s*_+u,this.matrix[this.offset+9|0]=$*_-v,this.matrix[this.offset+2|0]=y*_-g,this.matrix[this.offset+6|0]=$*_+v,this.matrix[this.offset+10|0]=a*a*_+u}return this},bn.prototype.setRotate_czzhi1$=function(t){var e=t.w,i=t.x,n=t.y,o=t.z,r=e*e+i*i+n*n+o*o,s=A.sqrt(r);return s=1/(s*s),this.set_224j3y$(0,0,1-2*s*(n*n+o*o)),this.set_224j3y$(0,1,2*s*(i*n-o*e)),this.set_224j3y$(0,2,2*s*(i*o+n*e)),this.set_224j3y$(0,3,0),this.set_224j3y$(1,0,2*s*(i*n+o*e)),this.set_224j3y$(1,1,1-2*s*(i*i+o*o)),this.set_224j3y$(1,2,2*s*(n*o-i*e)),this.set_224j3y$(1,3,0),this.set_224j3y$(2,0,2*s*(i*o-n*e)),this.set_224j3y$(2,1,2*s*(n*o+i*e)),this.set_224j3y$(2,2,1-2*s*(i*i+n*n)),this.set_224j3y$(2,3,0),this.set_224j3y$(3,0,0),this.set_224j3y$(3,1,0),this.set_224j3y$(3,2,0),this.set_224j3y$(3,3,1),this},bn.prototype.setLookAt_n440fu$=function(t,e,i){return this.setLookAt_enh5fx$_0(t.x,t.y,t.z,e.x,e.y,e.z,i.x,i.y,i.z)},bn.prototype.setLookAt_8ro9c0$=function(t,e,i){return this.setLookAt_enh5fx$_0(t.x,t.y,t.z,e.x,e.y,e.z,i.x,i.y,i.z)},bn.prototype.setLookAt_enh5fx$_0=function(t,e,i,n,o,r,s,a,l){var u=n-t,p=o-e,c=r-i,h=u*u+p*p+c*c,d=1/A.sqrt(h),f=(p*=d)*l-(c*=d)*a,_=c*s-(u*=d)*l,m=u*a-p*s,$=f*f+_*_+m*m,y=1/A.sqrt($),v=(_*=y)*c-(m*=y)*p,g=m*u-(f*=y)*c,b=f*p-_*u;return this.matrix[this.offset+0|0]=f,this.matrix[this.offset+1|0]=v,this.matrix[this.offset+2|0]=-u,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=_,this.matrix[this.offset+5|0]=g,this.matrix[this.offset+6|0]=-p,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=m,this.matrix[this.offset+9|0]=b,this.matrix[this.offset+10|0]=-c,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1,this.translate_yvo9jy$(-t,-e,-i)},bn.prototype.setOrthographic_w8lrqs$=function(t,e,i,n,o,r){return this.setOrthographic_15yvbs$(t,e,i,n,o,r)},bn.prototype.setOrthographic_15yvbs$=function(t,e,i,n,o,r){if(t===e)throw V("left == right");if(i===n)throw V("bottom == top");if(o===r)throw V("near == far");var s=1/(e-t),a=1/(n-i),l=1/(r-o),u=2*s,p=2*a,c=-2*l,h=-(e+t)*s,d=-(n+i)*a,f=-(r+o)*l;return this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=p,this.matrix[this.offset+10|0]=c,this.matrix[this.offset+12|0]=h,this.matrix[this.offset+13|0]=d,this.matrix[this.offset+14|0]=f,this.matrix[this.offset+15|0]=1,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+11|0]=0,this},bn.prototype.setPerspective_7b5o5w$=function(t,e,i,n){return this.setPerspective_6y0v78$(t,e,i,n)},bn.prototype.setPerspective_6y0v78$=function(t,e,i,n){var o=t*(U.PI/360),r=1/A.tan(o),s=1/(i-n);return this.matrix[this.offset+0|0]=r/e,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+5|0]=r,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=(n+i)*s,this.matrix[this.offset+11|0]=-1,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=2*n*i*s,this.matrix[this.offset+15|0]=0,this},bn.prototype.get_za3lpa$=function(t){return this.matrix[this.offset+t|0]},bn.prototype.get_vux9f0$=function(t,e){return this.matrix[this.offset+(4*e|0)+t|0]},bn.prototype.set_5wr77w$=function(t,e){this.matrix[this.offset+t|0]=e},bn.prototype.set_224j3y$=function(t,e,i){this.matrix[this.offset+(4*e|0)+t|0]=i},bn.prototype.setRow_umtdzk$=function(t,e,i){this.set_224j3y$(t,0,e.x),this.set_224j3y$(t,1,e.y),this.set_224j3y$(t,2,e.z),this.set_224j3y$(t,3,i)},bn.prototype.setRow_ky00rh$=function(t,e){this.set_224j3y$(t,0,e.x),this.set_224j3y$(t,1,e.y),this.set_224j3y$(t,2,e.z),this.set_224j3y$(t,3,e.w)},bn.prototype.getRow_8irwu3$=function(t,e){return e.x=this.get_vux9f0$(t,0),e.y=this.get_vux9f0$(t,1),e.z=this.get_vux9f0$(t,2),e.w=this.get_vux9f0$(t,3),e},bn.prototype.setCol_umtdzk$=function(t,e,i){this.set_224j3y$(0,t,e.x),this.set_224j3y$(1,t,e.y),this.set_224j3y$(2,t,e.z),this.set_224j3y$(3,t,i)},bn.prototype.setCol_ky00rh$=function(t,e){this.set_224j3y$(0,t,e.x),this.set_224j3y$(1,t,e.y),this.set_224j3y$(2,t,e.z),this.set_224j3y$(3,t,e.w)},bn.prototype.getCol_8irwu3$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e.w=this.get_vux9f0$(3,t),e},bn.prototype.getOrigin_5s4mqs$=function(t){return t.x=this.get_vux9f0$(0,3),t.y=this.get_vux9f0$(1,3),t.z=this.get_vux9f0$(2,3),t},bn.prototype.getRotation_5s4mpx$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var o=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,r=(o+1|0)%3,s=(o+2|0)%3,a=this.get_vux9f0$(o,o)-this.get_vux9f0$(r,r)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_5wr77w$(o,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,r)-this.get_vux9f0$(r,s))*l,t.set_5wr77w$(r,(this.get_vux9f0$(r,o)+this.get_vux9f0$(o,r))*l),t.set_5wr77w$(s,(this.get_vux9f0$(s,o)+this.get_vux9f0$(o,s))*l)}return t},bn.prototype.toBuffer_he122g$=function(t){for(var e=0;e<16;e++)t.put_mx4ult$(this.matrix[this.offset+e|0]);return t.flip(),t},bn.prototype.toList=function(){for(var t=M(),e=0;e<=15;e++){var i=this.matrix[this.offset+e|0];t.add_11rb$(i)}return t},bn.prototype.dump=function(){for(var t=0;t<=3;t++){for(var e=0;e<=3;e++)G(this.get_vux9f0$(t,e).toString()+" ");H()}},xn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var wn=null;function zn(){return null===wn&&new xn,wn}function kn(t){Nn(),void 0===t&&(t=32),bn.call(this),this.stackSize=t,this.stackIndex_51r8af$_0=0,this.matrix=new Float64Array(16*this.stackSize|0),this.setIdentity()}function Sn(){Cn=this,this.DEFAULT_STACK_SIZE=32}bn.$metadata$={kind:$,simpleName:"Mat4d",interfaces:[]},Sn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cn=null;function Nn(){return null===Cn&&new Sn,Cn}function En(){On(),this.matrix_cl37xc$_0=new Float32Array(16),this.offset_ix8w3y$_0=0,this.setIdentity()}function Tn(){Pn=this,this.tmpMatLock_0=new W,this.tmpMatA_0=new En,this.tmpMatB_0=new En}Object.defineProperty(kn.prototype,"stackIndex",{configurable:!0,get:function(){return this.stackIndex_51r8af$_0},set:function(t){this.stackIndex_51r8af$_0=t,this.offset=16*t|0}}),kn.prototype.push=function(){if(this.stackIndex>=this.stackSize)throw cn("Matrix stack overflow");for(var t=0;t<=15;t++)this.matrix[this.offset+16+t|0]=this.matrix[this.offset+t|0];return this.stackIndex=this.stackIndex+1|0,this},kn.prototype.pop=function(){if(this.stackIndex<=0)throw cn("Matrix stack underflow");return this.stackIndex=this.stackIndex-1|0,this},kn.prototype.reset=function(){return this.stackIndex=0,this.setIdentity(),this},kn.$metadata$={kind:$,simpleName:"Mat4dStack",interfaces:[bn]},Object.defineProperty(En.prototype,"matrix",{configurable:!0,get:function(){return this.matrix_cl37xc$_0},set:function(t){this.matrix_cl37xc$_0=t}}),Object.defineProperty(En.prototype,"offset",{configurable:!0,get:function(){return this.offset_ix8w3y$_0},set:function(t){this.offset_ix8w3y$_0=t}}),En.prototype.translate_y2kzbl$=function(t,e,i){for(var n=0;n<=3;n++){var o=this.offset+n|0;this.matrix[12+o|0]=this.matrix[12+o|0]+(this.matrix[o]*t+this.matrix[4+o|0]*e+this.matrix[8+o|0]*i)}return this},En.prototype.translate_czzhiu$=function(t){return this.translate_y2kzbl$(t.x,t.y,t.z)},En.prototype.translate_g84k6w$=function(t,e,i,n){for(var o=0;o<=11;o++)n.matrix[n.offset+o|0]=this.matrix[this.offset+o|0];for(var r=0;r<=3;r++){var s=this.offset+r|0;n.matrix[n.offset+12+r|0]=this.matrix[s]*t+this.matrix[4+s|0]*e+this.matrix[8+s|0]*i+this.matrix[12+s|0]}return n},En.prototype.rotate_7b5o5w$=function(t,e,i,n){return On().tmpMatLock_0,On().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.set_d4zu6j$(this.mul_93v2ma$(On().tmpMatA_0,On().tmpMatB_0))},En.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},En.prototype.rotate_c240mt$=function(t,e,i,n,o){return On().tmpMatLock_0,On().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.mul_93v2ma$(On().tmpMatA_0,o)},En.prototype.rotate_phvhhm$=function(t,e,i){return this.rotate_c240mt$(t,e.x,e.y,e.z,i)},En.prototype.rotate_d4zu7e$=function(t){return On().tmpMatLock_0,On().tmpMatA_0.setIdentity().setRotation_d4zu7e$(t),this.set_d4zu6j$(this.mul_93v2ma$(On().tmpMatA_0,On().tmpMatB_0)),s},En.prototype.scale_mx4ult$=function(t){return this.scale_y2kzbl$(t,t,t)},En.prototype.scale_y2kzbl$=function(t,e,i){for(var n=0;n<=3;n++){var o=this.offset+n|0;this.matrix[o]=this.matrix[o]*t,this.matrix[4+o|0]=this.matrix[4+o|0]*e,this.matrix[8+o|0]=this.matrix[8+o|0]*i}return this},En.prototype.scale_czzhiu$=function(t){return this.scale_y2kzbl$(t.x,t.y,t.z)},En.prototype.scale_g84k6w$=function(t,e,i,n){for(var o=0;o<=3;o++){var r=n.offset+o|0,s=this.offset+o|0;n.matrix[r]=this.matrix[s]*t,n.matrix[4+r|0]=this.matrix[4+s|0]*e,n.matrix[8+r|0]=this.matrix[8+s|0]*i,n.matrix[12+r|0]=this.matrix[12+s|0]}return n},En.prototype.resetScale=function(){var t=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0),e=1/A.sqrt(t),i=this.get_vux9f0$(0,1)*this.get_vux9f0$(0,1)+this.get_vux9f0$(1,1)*this.get_vux9f0$(1,1)+this.get_vux9f0$(2,1)*this.get_vux9f0$(2,1),n=1/A.sqrt(i),o=this.get_vux9f0$(0,2)*this.get_vux9f0$(0,2)+this.get_vux9f0$(1,2)*this.get_vux9f0$(1,2)+this.get_vux9f0$(2,2)*this.get_vux9f0$(2,2),r=1/A.sqrt(o);return this.scale_y2kzbl$(e,n,r),this},En.prototype.transpose=function(){return On().tmpMatLock_0,this.set_d4zu6j$(this.transpose_d4zu6j$(On().tmpMatA_0))},En.prototype.transpose_d4zu6j$=function(t){for(var e=0;e<=3;e++){var i=(4*e|0)+this.offset|0;t.matrix[e+t.offset|0]=this.matrix[i],t.matrix[e+4+t.offset|0]=this.matrix[i+1|0],t.matrix[e+8+t.offset|0]=this.matrix[i+2|0],t.matrix[e+12+t.offset|0]=this.matrix[i+3|0]}return t},En.prototype.invert_mx4ult$=function(t){void 0===t&&(t=0),On().tmpMatLock_0;var e=this.invert_8kv2li$(On().tmpMatA_0,t);return e&&this.set_d4zu6j$(On().tmpMatA_0),e},En.prototype.invert_8kv2li$=function(t,e){void 0===e&&(e=0);var i=this.matrix[this.offset+0|0],n=this.matrix[this.offset+1|0],o=this.matrix[this.offset+2|0],r=this.matrix[this.offset+3|0],s=this.matrix[this.offset+4|0],a=this.matrix[this.offset+5|0],l=this.matrix[this.offset+6|0],u=this.matrix[this.offset+7|0],p=this.matrix[this.offset+8|0],c=this.matrix[this.offset+9|0],h=this.matrix[this.offset+10|0],d=this.matrix[this.offset+11|0],f=this.matrix[this.offset+12|0],_=this.matrix[this.offset+13|0],m=this.matrix[this.offset+14|0],$=this.matrix[this.offset+15|0],y=h*$,v=m*d,g=l*$,b=m*u,x=l*d,w=h*u,z=o*$,k=m*r,S=o*d,C=h*r,N=o*u,E=l*r,T=y*a+b*c+x*_-(v*a+g*c+w*_),P=v*n+z*c+C*_-(y*n+k*c+S*_),O=g*n+k*a+N*_-(b*n+z*a+E*_),M=w*n+S*a+E*c-(x*n+C*a+N*c),j=v*s+g*p+w*f-(y*s+b*p+x*f),I=y*i+k*p+S*f-(v*i+z*p+C*f),R=b*i+z*s+E*f-(g*i+k*s+N*f),L=x*i+C*s+N*p-(w*i+S*s+E*p),D=p*_,q=f*c,F=s*_,B=f*a,U=s*c,V=p*a,G=i*_,H=f*n,W=i*c,K=p*n,X=i*a,Y=s*n,Z=D*u+B*d+U*$-(q*u+F*d+V*$),J=q*r+G*d+K*$-(D*r+H*d+W*$),Q=F*r+H*u+X*$-(B*r+G*u+Y*$),tt=V*r+W*u+Y*d-(U*r+K*u+X*d),et=F*h+V*m+q*l-(U*m+D*l+B*h),it=W*m+D*o+H*h-(G*h+K*m+q*o),nt=G*l+Y*m+B*o-(X*m+F*o+H*l),ot=X*h+U*o+K*l-(W*l+Y*h+V*o),rt=i*T+s*P+p*O+f*M;if(A.abs(rt)<=e)return!1;var st=1/rt;return t.matrix[t.offset]=T*st,t.matrix[1+t.offset|0]=P*st,t.matrix[2+t.offset|0]=O*st,t.matrix[3+t.offset|0]=M*st,t.matrix[4+t.offset|0]=j*st,t.matrix[5+t.offset|0]=I*st,t.matrix[6+t.offset|0]=R*st,t.matrix[7+t.offset|0]=L*st,t.matrix[8+t.offset|0]=Z*st,t.matrix[9+t.offset|0]=J*st,t.matrix[10+t.offset|0]=Q*st,t.matrix[11+t.offset|0]=tt*st,t.matrix[12+t.offset|0]=et*st,t.matrix[13+t.offset|0]=it*st,t.matrix[14+t.offset|0]=nt*st,t.matrix[15+t.offset|0]=ot*st,!0},En.prototype.transform_w1lst9$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),o=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_y2kzbl$(i,n,o)},En.prototype.transform_a6wx89$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},En.prototype.transform_5s4mpv$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),o=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_7b5o5w$(e,i,n,o)},En.prototype.transform_uzu8ww$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},En.prototype.add_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=this.matrix[this.offset+e|0]+t.matrix[t.offset+e|0];return this},En.prototype.mul_d4zu6j$=function(t){return On().tmpMatLock_0,this.mul_93v2ma$(t,On().tmpMatA_0),this.set_d4zu6j$(On().tmpMatA_0)},En.prototype.mul_93v2ma$=function(t,e){for(var i=0;i<=3;i++)for(var n=0;n<=3;n++){for(var o=0,r=0;r<=3;r++)o+=this.matrix[this.offset+n+(4*r|0)|0]*t.matrix[t.offset+(4*i|0)+r|0];e.matrix[e.offset+(4*i|0)+n|0]=o}return e},En.prototype.set_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},En.prototype.set_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},En.prototype.set_hcyabg$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.get_za3lpa$(e);return this},En.prototype.setZero=function(){for(var t=0;t<=15;t++)this.matrix[this.offset+t|0]=0;return this},En.prototype.setIdentity=function(){for(var t=1;t<=15;t++)this.matrix[this.offset+t|0]=0;return this.matrix[this.offset]=1,this.matrix[this.offset+5|0]=1,this.matrix[this.offset+10|0]=1,this.matrix[this.offset+15|0]=1,this},En.prototype.setRotate_7b5o5w$=function(t,e,i,n){var o=t*LN.DEG_2_RAD,r=e,s=i,a=n;this.matrix[this.offset+3|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1;var l=A.sin(o),u=A.cos(o);if(1===r&&0===s&&0===a)this.matrix[this.offset+5|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+6|0]=l,this.matrix[this.offset+9|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+0|0]=1;else if(0===r&&1===s&&0===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+8|0]=l,this.matrix[this.offset+2|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+5|0]=1;else if(0===r&&0===s&&1===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=u,this.matrix[this.offset+1|0]=l,this.matrix[this.offset+4|0]=-l,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=1;else{var p,c=r*r+s*s+a*a,h=A.sqrt(c);p=LN.FUZZY_EQ_F;var d=h-1;if(!(A.abs(d)<=p)){var f=1/h;r*=f,s*=f,a*=f}var _=1-u,m=r*s,$=s*a,y=a*r,v=r*l,g=s*l,b=a*l;this.matrix[this.offset+0|0]=r*r*_+u,this.matrix[this.offset+4|0]=m*_-b,this.matrix[this.offset+8|0]=y*_+g,this.matrix[this.offset+1|0]=m*_+b,this.matrix[this.offset+5|0]=s*s*_+u,this.matrix[this.offset+9|0]=$*_-v,this.matrix[this.offset+2|0]=y*_-g,this.matrix[this.offset+6|0]=$*_+v,this.matrix[this.offset+10|0]=a*a*_+u}return this},En.prototype.setRotate_czzhhz$=function(t){var e=t.w,i=t.x,n=t.y,o=t.z,r=e*e+i*i+n*n+o*o,s=A.sqrt(r);return s=1/(s*s),this.set_n0b4r3$(0,0,1-2*s*(n*n+o*o)),this.set_n0b4r3$(0,1,2*s*(i*n-o*e)),this.set_n0b4r3$(0,2,2*s*(i*o+n*e)),this.set_n0b4r3$(0,3,0),this.set_n0b4r3$(1,0,2*s*(i*n+o*e)),this.set_n0b4r3$(1,1,1-2*s*(i*i+o*o)),this.set_n0b4r3$(1,2,2*s*(n*o-i*e)),this.set_n0b4r3$(1,3,0),this.set_n0b4r3$(2,0,2*s*(i*o-n*e)),this.set_n0b4r3$(2,1,2*s*(n*o+i*e)),this.set_n0b4r3$(2,2,1-2*s*(i*i+n*n)),this.set_n0b4r3$(2,3,0),this.set_n0b4r3$(3,0,0),this.set_n0b4r3$(3,1,0),this.set_n0b4r3$(3,2,0),this.set_n0b4r3$(3,3,1),this},En.prototype.setRotation_d4zu7e$=function(t){for(var e=0;e<=2;e++)for(var i=0;i<=2;i++)this.set_n0b4r3$(e,i,t.get_vux9f0$(e,i));var n=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0)+this.get_vux9f0$(3,0)*this.get_vux9f0$(3,0),o=1/A.sqrt(n);this.scale_y2kzbl$(o,o,o)},En.prototype.setRotation_d4zu6j$=function(t){for(var e=0;e<=2;e++)for(var i=0;i<=2;i++)this.set_n0b4r3$(e,i,t.get_vux9f0$(e,i));var n=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0)+this.get_vux9f0$(3,0)*this.get_vux9f0$(3,0),o=1/A.sqrt(n);this.scale_y2kzbl$(o,o,o)},En.prototype.setLookAt_n440fu$=function(t,e,i){var n=e.x-t.x,o=e.y-t.y,r=e.z-t.z,s=n*n+o*o+r*r,a=1/A.sqrt(s);n*=a,r*=a;var l=(o*=a)*i.z-r*i.y,u=r*i.x-n*i.z,p=n*i.y-o*i.x,c=l*l+u*u+p*p,h=1/A.sqrt(c),d=(u*=h)*r-(p*=h)*o,f=p*n-(l*=h)*r,_=l*o-u*n;return this.matrix[this.offset+0|0]=l,this.matrix[this.offset+1|0]=d,this.matrix[this.offset+2|0]=-n,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=u,this.matrix[this.offset+5|0]=f,this.matrix[this.offset+6|0]=-o,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=p,this.matrix[this.offset+9|0]=_,this.matrix[this.offset+10|0]=-r,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1,this.translate_y2kzbl$(-t.x,-t.y,-t.z)},En.prototype.setOrthographic_w8lrqs$=function(t,e,i,n,o,r){if(t===e)throw V("left == right");if(i===n)throw V("bottom == top");if(o===r)throw V("near == far");var s=1/(e-t),a=1/(n-i),l=1/(r-o),u=2*s,p=2*a,c=-2*l,h=-(e+t)*s,d=-(n+i)*a,f=-(r+o)*l;return this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=p,this.matrix[this.offset+10|0]=c,this.matrix[this.offset+12|0]=h,this.matrix[this.offset+13|0]=d,this.matrix[this.offset+14|0]=f,this.matrix[this.offset+15|0]=1,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+11|0]=0,this},En.prototype.setPerspective_7b5o5w$=function(t,e,i,n){var o=t*(U.PI/360),r=1/A.tan(o),s=1/(i-n);return this.matrix[this.offset+0|0]=r/e,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+5|0]=r,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=(n+i)*s,this.matrix[this.offset+11|0]=-1,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=2*n*i*s,this.matrix[this.offset+15|0]=0,this},En.prototype.get_za3lpa$=function(t){return this.matrix[this.offset+t|0]},En.prototype.get_vux9f0$=function(t,e){return this.matrix[this.offset+(4*e|0)+t|0]},En.prototype.set_24o109$=function(t,e){this.matrix[this.offset+t|0]=e},En.prototype.set_n0b4r3$=function(t,e,i){this.matrix[this.offset+(4*e|0)+t|0]=i},En.prototype.setRow_gdg6t7$=function(t,e,i){this.set_n0b4r3$(t,0,e.x),this.set_n0b4r3$(t,1,e.y),this.set_n0b4r3$(t,2,e.z),this.set_n0b4r3$(t,3,i)},En.prototype.setRow_ky00rj$=function(t,e){this.set_n0b4r3$(t,0,e.x),this.set_n0b4r3$(t,1,e.y),this.set_n0b4r3$(t,2,e.z),this.set_n0b4r3$(t,3,e.w)},En.prototype.getRow_8irwu1$=function(t,e){return e.x=this.get_vux9f0$(t,0),e.y=this.get_vux9f0$(t,1),e.z=this.get_vux9f0$(t,2),e.w=this.get_vux9f0$(t,3),e},En.prototype.setCol_gdg6t7$=function(t,e,i){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z),this.set_n0b4r3$(3,t,i)},En.prototype.setCol_ky00rj$=function(t,e){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z),this.set_n0b4r3$(3,t,e.w)},En.prototype.getCol_8irwu1$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e.w=this.get_vux9f0$(3,t),e},En.prototype.getOrigin_5s4mqq$=function(t){return t.x=this.get_vux9f0$(0,3),t.y=this.get_vux9f0$(1,3),t.z=this.get_vux9f0$(2,3),t},En.prototype.getOrientation_d4zu7e$=function(t){return t.set_n0b4r3$(0,0,this.get_vux9f0$(0,0)),t.set_n0b4r3$(0,1,this.get_vux9f0$(0,1)),t.set_n0b4r3$(0,2,this.get_vux9f0$(0,2)),t.set_n0b4r3$(1,0,this.get_vux9f0$(1,0)),t.set_n0b4r3$(1,1,this.get_vux9f0$(1,1)),t.set_n0b4r3$(1,2,this.get_vux9f0$(1,2)),t.set_n0b4r3$(2,0,this.get_vux9f0$(2,0)),t.set_n0b4r3$(2,1,this.get_vux9f0$(2,1)),t.set_n0b4r3$(2,2,this.get_vux9f0$(2,2)),t},En.prototype.getOrientationTransposed_d4zu7e$=function(t){return t.set_n0b4r3$(0,0,this.get_vux9f0$(0,0)),t.set_n0b4r3$(0,1,this.get_vux9f0$(1,0)),t.set_n0b4r3$(0,2,this.get_vux9f0$(2,0)),t.set_n0b4r3$(1,0,this.get_vux9f0$(0,1)),t.set_n0b4r3$(1,1,this.get_vux9f0$(1,1)),t.set_n0b4r3$(1,2,this.get_vux9f0$(2,1)),t.set_n0b4r3$(2,0,this.get_vux9f0$(0,2)),t.set_n0b4r3$(2,1,this.get_vux9f0$(1,2)),t.set_n0b4r3$(2,2,this.get_vux9f0$(2,2)),t},En.prototype.getRotation_5s4mpv$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var o=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,r=(o+1|0)%3,s=(o+2|0)%3,a=this.get_vux9f0$(o,o)-this.get_vux9f0$(r,r)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_24o109$(o,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,r)-this.get_vux9f0$(r,s))*l,t.set_24o109$(r,(this.get_vux9f0$(r,o)+this.get_vux9f0$(o,r))*l),t.set_24o109$(s,(this.get_vux9f0$(s,o)+this.get_vux9f0$(o,s))*l)}return t},En.prototype.toBuffer_he122g$=function(t){return t.put_kgymra$(this.matrix,this.offset,16),t.flip(),t},En.prototype.toList=function(){for(var t=M(),e=0;e<=15;e++){var i=this.matrix[this.offset+e|0];t.add_11rb$(i)}return t},En.prototype.dump=function(){for(var t=0;t<=3;t++){for(var e=0;e<=3;e++)G(this.get_vux9f0$(t,e).toString()+" ");H()}},Tn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Pn=null;function On(){return null===Pn&&new Tn,Pn}function Mn(t){Bn(),void 0===t&&(t=32),En.call(this),this.stackSize=t,this.stackIndex_rxi7m3$_0=0,this.matrix=new Float32Array(16*this.stackSize|0),this.setIdentity()}function jn(){Fn=this,this.DEFAULT_STACK_SIZE=32}En.$metadata$={kind:$,simpleName:"Mat4f",interfaces:[]},jn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var An,In,Rn,Ln,Dn,qn,Fn=null;function Bn(){return null===Fn&&new jn,Fn}function Un(t,e){var i=A.max(t,e),n=A.log2(i);return B(A.floor(n))+1|0}function Vn(t,e,i){var n=e.x-t.x,o=e.y-t.y,r=e.z-t.z,s=i.x-t.x,a=i.y-t.y,l=i.z-t.z,u=n*s+o*a+r*l,p=(n*n+o*o+r*r)*(s*s+a*a+l*l)-u*u;return.5*A.sqrt(p)}function Gn(t,e,i){var n=t.distance_czzhiu$(e),o=e.distance_czzhiu$(i),r=i.distance_czzhiu$(t),s=(n+o+r)/2,a=n*o*r/(8*(s-n)*(s-o)*(s-r));return A.abs(a)}function Hn(t,e){return t.get_za3lpa$(e)}function Wn(t,e,i){var n=t.get_za3lpa$(i);return t.set_wxm5ur$(i,t.get_za3lpa$(e)),t.set_wxm5ur$(e,n),s}function Kn(t,e,i,n){Xn(t,e.first,e.last,i,Hn,n,Wn)}function Xn(t,e,i,n,o,r,s){for(var a=e,l=i;l>a;){if((l-a|0)>600){var u=l-a+1|0,p=n-a+1|0,c=A.log(u),h=2*c/3,d=.5*A.exp(h),f=c*d*(u-d)/u,_=p-u/2,m=.5*A.sqrt(f)*A.sign(_),$=a,y=B(n-p*d/u+m),v=A.max($,y),g=l,b=B(n+(u-p|0)*d/u+m);Xn(t,v,A.min(g,b),n,o,r,s)}var x=o(t,n),w=a,z=l;for(s(t,a,n),r(o(t,l),x)>0&&s(t,l,a);w<z;){for(s(t,w,z),w=w+1|0,z=z-1|0;r(o(t,w),x)<0;)w=w+1|0;for(;z>=0&&r(o(t,z),x)>0;)z=z-1|0}0===r(o(t,a),x)?s(t,a,z):s(t,z=z+1|0,l),z<=n&&(a=z+1|0),n<=z&&(l=z-1|0)}}function Yn(){this.p=jo(),this.n=Io(To().Y_AXIS)}function Zn(t,e,i){var n=Jn(t,e,i);return A.sqrt(n)}function Jn(t,e,i){return Qn(t.x,t.y,t.z,e,i)}function Qn(t,e,i,n,o){var r,s,a,l=(t*o.x+e*o.y+i*o.z-n.times_czzhiu$(o))/o.times_czzhiu$(o);return l<=0?(r=n.x-t,s=n.y-e,a=n.z-i):(r=o.x*l+n.x-t,s=o.y*l+n.y-e,a=o.z*l+n.z-i),r*r+s*s+a*a}function to(){}function eo(t){this.x_i5bv4$_0=t,this.y_i5bu9$_0=362436e3,this.z_i5bte$_0=521288629,this.c_i5cd7$_0=7654321}function io(){this.origin=jo(),this.direction=jo()}function no(){this.ray=new io,this.intHitPosition_0=jo(),this.intHitPositionLocal_0=jo(),this.hitNode_s1zft8$_0=null,this.hitDistanceSqr_fy7zgf$_0=nt.MAX_VALUE}function oo(t,e){ao(),this.fields=new Float32Array(2),this.fields[0]=t,this.fields[1]=e}function ro(){so=this,this.ZERO=lo(0),this.X_AXIS=new oo(1,0),this.Y_AXIS=new oo(0,1),this.NEG_X_AXIS=new oo(-1,0),this.NEG_Y_AXIS=new oo(0,-1)}Object.defineProperty(Mn.prototype,"stackIndex",{configurable:!0,get:function(){return this.stackIndex_rxi7m3$_0},set:function(t){this.stackIndex_rxi7m3$_0=t,this.offset=16*t|0}}),Mn.prototype.push=function(){if(this.stackIndex>=this.stackSize)throw cn("Matrix stack overflow");for(var t=0;t<=15;t++)this.matrix[this.offset+16+t|0]=this.matrix[this.offset+t|0];return this.stackIndex=this.stackIndex+1|0,this},Mn.prototype.pop=function(){if(this.stackIndex<=0)throw cn("Matrix stack underflow");return this.stackIndex=this.stackIndex-1|0,this},Mn.prototype.reset=function(){return this.stackIndex=0,this.setIdentity(),this},Mn.$metadata$={kind:$,simpleName:"Mat4fStack",interfaces:[En]},Yn.prototype.intersectionPoint_lplggz$=function(t,e){var i,n=this.n.dot_czzhiu$(t.direction);if(i=LN.FUZZY_EQ_F,!(A.abs(n)<=i)){var o=this.p.subtract_2gj7b4$(t.origin,e).dot_czzhiu$(this.n)/n;return e.set_czzhiu$(t.direction).scale_mx4ult$(o).add_czzhiu$(t.origin),o>=0}return!1},Yn.prototype.toVec4=function(){return this.toVec4_5s4mpv$(or())},Yn.prototype.toVec4_5s4mpv$=function(t){return t.x=this.n.x,t.y=this.n.y,t.z=this.n.z,t.w=this.n.times_czzhiu$(this.p),t},Yn.$metadata$={kind:$,simpleName:"Plane",interfaces:[]},to.prototype.nextPoints_za3lpa$=function(t){for(var e=M(),i=1;i<=t;i++){var n=this.nextPoint();e.add_11rb$(n)}return e},to.$metadata$={kind:$,simpleName:"PointDistribution",interfaces:[]},eo.prototype.randomI=function(){this.x_i5bv4$_0=12345+(69069*this.x_i5bv4$_0|0)|0,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0<<13,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0>>17,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0<<5;var t=Q.multiply(e.Long.fromInt(this.z_i5bte$_0)).add(e.Long.fromInt(this.c_i5cd7$_0));return this.c_i5cd7$_0=t.shiftRight(32).toInt(),this.z_i5bte$_0=t.toInt(),this.x_i5bv4$_0+this.y_i5bu9$_0+this.z_i5bte$_0|0},eo.prototype.randomI_vux9f0$=function(t,e){return tt(this.randomI())%(e-t+1|0)+t|0},eo.prototype.randomI_n8acyv$=function(t){return this.randomI_vux9f0$(t.first,t.last)},eo.prototype.randomF=function(){return tt(this.randomI())/2147483647},eo.prototype.randomF_dleff0$=function(t,e){return this.randomF()*(e-t)+t},eo.prototype.randomD=function(){var t=et(e.Long.fromInt(this.randomI())).shiftLeft(32).or(et(e.Long.fromInt(this.randomI())));return et(t).toNumber()/it.toNumber()},eo.prototype.randomD_lu1900$=function(t,e){return this.randomD()*(e-t)+t},eo.$metadata$={kind:$,simpleName:"Random",interfaces:[]},io.prototype.set_nvyeur$=function(t){this.origin.set_czzhiu$(t.origin),this.direction.set_czzhiu$(t.direction)},io.prototype.setFromLookAt_4lfkt4$=function(t,e){this.origin.set_czzhiu$(t),this.direction.set_czzhiu$(e).subtract_czzhiu$(t).norm()},io.prototype.distanceToPoint_czzhiu$=function(t){return Zn(t,this.origin,this.direction)},io.prototype.sqrDistanceToPoint_czzhiu$=function(t){return Jn(t,this.origin,this.direction)},io.prototype.sqrDistanceToPoint_y2kzbl$=function(t,e,i){return Qn(t,e,i,this.origin,this.direction)},io.prototype.transformBy_d4zu6j$=function(t){t.transform_w1lst9$(this.origin),t.transform_w1lst9$(this.direction,0).norm()},io.prototype.transformBy_d4zu6l$=function(t){t.transform_w1lst9$(this.origin),t.transform_w1lst9$(this.direction,0).norm()},io.prototype.toString=function(){return"{origin="+this.origin+", direction="+this.direction+"}"},io.$metadata$={kind:$,simpleName:"Ray",interfaces:[]},Object.defineProperty(no.prototype,"hitPosition",{configurable:!0,get:function(){return this.intHitPosition_0}}),Object.defineProperty(no.prototype,"hitPositionLocal",{configurable:!0,get:function(){return this.intHitPositionLocal_0}}),Object.defineProperty(no.prototype,"hitNode",{configurable:!0,get:function(){return this.hitNode_s1zft8$_0},set:function(t){this.hitNode_s1zft8$_0=t}}),Object.defineProperty(no.prototype,"hitDistanceSqr",{configurable:!0,get:function(){return this.hitDistanceSqr_fy7zgf$_0},set:function(t){this.hitDistanceSqr_fy7zgf$_0=t}}),Object.defineProperty(no.prototype,"isHit",{configurable:!0,get:function(){return this.hitDistanceSqr<nt.MAX_VALUE}}),no.prototype.clear=function(){this.intHitPosition_0.set_czzhiu$(To().ZERO),this.intHitPositionLocal_0.set_czzhiu$(To().ZERO),this.hitNode=null,this.hitDistanceSqr=nt.MAX_VALUE},no.prototype.setHit_vfk0k2$=function(t,e){this.intHitPosition_0.set_czzhiu$(this.ray.direction).scale_mx4ult$(e).add_czzhiu$(this.ray.origin),this.setHit_ulhqnp$(t,this.intHitPosition_0)},no.prototype.setHit_ulhqnp$=function(t,e){this.intHitPosition_0.set_czzhiu$(e),this.intHitPositionLocal_0.set_czzhiu$(e),this.hitNode=t,this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin)},no.prototype.transformBy_d4zu6j$=function(t){this.ray.transformBy_d4zu6j$(t),this.isHit&&(t.transform_w1lst9$(this.intHitPosition_0),this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin))},no.prototype.transformBy_d4zu6l$=function(t){this.ray.transformBy_d4zu6l$(t),this.isHit&&(t.transform_w1lst9$(this.intHitPosition_0),this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin))},no.$metadata$={kind:$,simpleName:"RayTest",interfaces:[]},Object.defineProperty(oo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(oo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),oo.prototype.add_q2ruao$=function(t,e){return e.set_czzhjp$(this).add_czzhjp$(t)},oo.prototype.distance_czzhjp$=function(t){var e=this.sqrDistance_czzhjp$(t);return A.sqrt(e)},oo.prototype.dot_czzhjp$=function(t){return this.x*t.x+this.y*t.y},oo.prototype.isFuzzyEqual_rnua8g$=function(t,e){void 0===e&&(e=Rn);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var o=this.y-t.y;n=A.abs(o)<=e}return n},oo.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},oo.prototype.mix_5uckat$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i},oo.prototype.mul_q2ruao$=function(t,e){return e.set_czzhjp$(this).mul_czzhjp$(t)},oo.prototype.norm_5s4mrl$=function(t){return t.set_czzhjp$(this).norm()},oo.prototype.rotate_749b9g$=function(t,e){return e.set_czzhjp$(this).rotate_mx4ult$(t)},oo.prototype.scale_749b9g$=function(t,e){return e.set_czzhjp$(this).scale_mx4ult$(t)},oo.prototype.sqrDistance_czzhjp$=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},oo.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y},oo.prototype.subtract_q2ruao$=function(t,e){return e.set_czzhjp$(this).subtract_czzhjp$(t)},oo.prototype.get_za3lpa$=function(t){return this.fields[t]},oo.prototype.times_czzhjp$=function(t){return this.dot_czzhjp$(t)},oo.prototype.toString=function(){return"("+this.x+", "+this.y+")"},oo.prototype.toVec2d=function(){return new ho(this.x,this.y)},oo.prototype.toMutableVec2d=function(){return this.toMutableVec2d_5s4mrn$(vo())},oo.prototype.toMutableVec2d_5s4mrn$=function(t){return t.set_lu1900$(this.x,this.y)},oo.prototype.equals=function(t){return this===t||!!e.isType(t,oo)&&this.x===t.x&&this.y===t.y},oo.prototype.hashCode=function(){var t=ot(this.x);return t=(31*t|0)+ot(this.y)|0},ro.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var so=null;function ao(){return null===so&&new ro,so}function lo(t,e){return e=e||Object.create(oo.prototype),oo.call(e,t,t),e}function uo(t,e){oo.call(this,t,e)}function po(t){return t=t||Object.create(uo.prototype),uo.call(t,0,0),t}function co(t,e){return e=e||Object.create(uo.prototype),uo.call(e,t.x,t.y),e}function ho(t,e){mo(),this.fields=new Float64Array(2),this.fields[0]=t,this.fields[1]=e}function fo(){_o=this,this.ZERO=$o(0),this.X_AXIS=new ho(1,0),this.Y_AXIS=new ho(0,1),this.NEG_X_AXIS=new ho(-1,0),this.NEG_Y_AXIS=new ho(0,-1)}oo.$metadata$={kind:$,simpleName:"Vec2f",interfaces:[]},Object.defineProperty(uo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(uo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(uo.prototype,"array",{configurable:!0,get:function(){return this.fields}}),uo.prototype.add_czzhjp$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},uo.prototype.mul_czzhjp$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},uo.prototype.norm=function(){return this.scale_mx4ult$(1/this.length())},uo.prototype.rotate_mx4ult$=function(t){var e=t*LN.DEG_2_RAD,i=A.cos(e),n=A.sin(e),o=this.x*i-this.y*n,r=this.x*n+this.y*i;return this.x=o,this.y=r,this},uo.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this},uo.prototype.set_dleff0$=function(t,e){return this.x=t,this.y=e,this},uo.prototype.set_czzhjp$=function(t){return this.x=t.x,this.y=t.y,this},uo.prototype.subtract_czzhjp$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},uo.prototype.divAssign_mx4ult$=function(t){this.scale_mx4ult$(1/t)},uo.prototype.minusAssign_czzhjp$=function(t){this.subtract_czzhjp$(t)},uo.prototype.plusAssign_czzhjp$=function(t){this.add_czzhjp$(t)},uo.prototype.set_24o109$=function(t,e){this.fields[t]=e},uo.prototype.timesAssign_mx4ult$=function(t){this.scale_mx4ult$(t)},uo.$metadata$={kind:$,simpleName:"MutableVec2f",interfaces:[oo]},Object.defineProperty(ho.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(ho.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),ho.prototype.add_b18iao$=function(t,e){return e.set_czzhjr$(this).add_czzhjr$(t)},ho.prototype.distance_czzhjr$=function(t){var e=this.sqrDistance_czzhjr$(t);return A.sqrt(e)},ho.prototype.dot_czzhjr$=function(t){return this.x*t.x+this.y*t.y},ho.prototype.isFuzzyEqual_f3xr3v$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var o=this.y-t.y;n=A.abs(o)<=e}return n},ho.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},ho.prototype.mix_3jrcj6$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i},ho.prototype.mul_b18iao$=function(t,e){return e.set_czzhjr$(this).mul_czzhjr$(t)},ho.prototype.norm_5s4mrn$=function(t){return t.set_czzhjr$(this).norm()},ho.prototype.rotate_b0flcl$=function(t,e){return e.set_czzhjr$(this).rotate_14dthe$(t)},ho.prototype.scale_b0flcl$=function(t,e){return e.set_czzhjr$(this).scale_14dthe$(t)},ho.prototype.sqrDistance_czzhjr$=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},ho.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y},ho.prototype.subtract_b18iao$=function(t,e){return e.set_czzhjr$(this).subtract_czzhjr$(t)},ho.prototype.get_za3lpa$=function(t){return this.fields[t]},ho.prototype.times_czzhjr$=function(t){return this.dot_czzhjr$(t)},ho.prototype.toString=function(){return"("+this.x+", "+this.y+")"},ho.prototype.toVec2f=function(){return new oo(this.x,this.y)},ho.prototype.toMutableVec2f=function(){return this.toMutableVec2f_5s4mrl$(po())},ho.prototype.toMutableVec2f_5s4mrl$=function(t){return t.set_dleff0$(this.x,this.y)},ho.prototype.equals=function(t){return this===t||!!e.isType(t,ho)&&this.x===t.x&&this.y===t.y},ho.prototype.hashCode=function(){var t=ot(this.x);return t=(31*t|0)+ot(this.y)|0},fo.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _o=null;function mo(){return null===_o&&new fo,_o}function $o(t,e){return e=e||Object.create(ho.prototype),ho.call(e,t,t),e}function yo(t,e){ho.call(this,t,e)}function vo(t){return t=t||Object.create(yo.prototype),yo.call(t,0,0),t}function go(t,e){wo(),this.fields=new Int32Array(2),this.fields[0]=t,this.fields[1]=e}function bo(){xo=this,this.ZERO=zo(0),this.X_AXIS=new go(1,0),this.Y_AXIS=new go(0,1),this.NEG_X_AXIS=new go(-1,0),this.NEG_Y_AXIS=new go(0,-1)}ho.$metadata$={kind:$,simpleName:"Vec2d",interfaces:[]},Object.defineProperty(yo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(yo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),yo.prototype.add_czzhjr$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},yo.prototype.mul_czzhjr$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},yo.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},yo.prototype.rotate_14dthe$=function(t){var e=t*LN.DEG_2_RAD,i=A.cos(e),n=A.sin(e),o=this.x*i-this.y*n,r=this.x*n+this.y*i;return this.x=o,this.y=r,this},yo.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this},yo.prototype.set_lu1900$=function(t,e){return this.x=t,this.y=e,this},yo.prototype.set_czzhjr$=function(t){return this.x=t.x,this.y=t.y,this},yo.prototype.subtract_czzhjr$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},yo.prototype.divAssign_14dthe$=function(t){this.scale_14dthe$(1/t)},yo.prototype.minusAssign_czzhjr$=function(t){this.subtract_czzhjr$(t)},yo.prototype.plusAssign_czzhjr$=function(t){this.add_czzhjr$(t)},yo.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},yo.prototype.timesAssign_14dthe$=function(t){this.scale_14dthe$(t)},yo.$metadata$={kind:$,simpleName:"MutableVec2d",interfaces:[ho]},Object.defineProperty(go.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(go.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),go.prototype.get_za3lpa$=function(t){return this.fields[t]},go.prototype.toString=function(){return"("+this.x+", "+this.y+")"},go.prototype.equals=function(t){return this===t||!!e.isType(t,hr)&&this.x===t.x&&this.y===t.y},go.prototype.hashCode=function(){var t=ot(this.x);return t=(31*t|0)+ot(this.y)|0},bo.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var xo=null;function wo(){return null===xo&&new bo,xo}function zo(t,e){return e=e||Object.create(go.prototype),go.call(e,t,t),e}function ko(t,e){go.call(this,t,e),this.fields[0]=t,this.fields[1]=e}function So(t){return t=t||Object.create(ko.prototype),ko.call(t,0,0),t}function Co(t,e,i){To(),this.fields=new Float32Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function No(){Eo=this,this.ZERO=Po(0),this.X_AXIS=new Co(1,0,0),this.Y_AXIS=new Co(0,1,0),this.Z_AXIS=new Co(0,0,1),this.NEG_X_AXIS=new Co(-1,0,0),this.NEG_Y_AXIS=new Co(0,-1,0),this.NEG_Z_AXIS=new Co(0,0,-1)}go.$metadata$={kind:$,simpleName:"Vec2i",interfaces:[]},Object.defineProperty(ko.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.fields[0]=t}}),Object.defineProperty(ko.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.fields[1]=t}}),Object.defineProperty(ko.prototype,"array",{configurable:!0,get:function(){return this.fields}}),ko.prototype.set_czzhjm$=function(t){return this.x=t.x,this.y=t.y,this},ko.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},ko.$metadata$={kind:$,simpleName:"MutableVec2i",interfaces:[go]},Object.defineProperty(Co.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Co.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Co.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Co.prototype.add_2gj7b4$=function(t,e){return e.set_czzhiu$(this).add_czzhiu$(t)},Co.prototype.cross_2gj7b4$=function(t,e){return e.x=this.y*t.z-this.z*t.y,e.y=this.z*t.x-this.x*t.z,e.z=this.x*t.y-this.y*t.x,e},Co.prototype.distance_czzhiu$=function(t){var e=this.sqrDistance_czzhiu$(t);return A.sqrt(e)},Co.prototype.dot_czzhiu$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Co.prototype.isFuzzyEqual_2qa7tb$=function(t,e){void 0===e&&(e=Rn);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var o=this.y-t.y;n=A.abs(o)<=e}var r=n;if(r){var s=this.z-t.z;r=A.abs(s)<=e}return r},Co.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Co.prototype.mix_a6wx89$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i},Co.prototype.mul_2gj7b4$=function(t,e){return e.set_czzhiu$(this).mul_czzhiu$(t)},Co.prototype.norm_5s4mqq$=function(t){return t.set_czzhiu$(this).norm()},Co.prototype.planeSpace_t87wgk$=function(t,e){var i=this.z;if(A.abs(i)>Dn){var n=this.y*this.y+this.z*this.z,o=1/A.sqrt(n);t.x=0,t.y=-this.z*o,t.z=this.y*o,e.x=n*o,e.y=-this.x*t.z,e.z=this.x*t.y}else{var r=this.x*this.x+this.y*this.y,s=1/A.sqrt(r);t.x=-this.y*s,t.y=this.x*s,t.z=0,e.x=-this.z*t.y,e.y=this.z*t.x,e.z=r*s}},Co.prototype.rotate_hx2y1u$=function(t,e,i,n,o){return o.set_czzhiu$(this).rotate_7b5o5w$(t,e,i,n)},Co.prototype.rotate_vqa64j$=function(t,e,i){return i.set_czzhiu$(this).rotate_7b5o5w$(t,e.x,e.y,e.z)},Co.prototype.scale_749b8l$=function(t,e){return e.set_czzhiu$(this).scale_mx4ult$(t)},Co.prototype.sqrDistance_czzhiu$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},Co.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},Co.prototype.subtract_2gj7b4$=function(t,e){return e.set_czzhiu$(this).subtract_czzhiu$(t)},Co.prototype.get_za3lpa$=function(t){return this.fields[t]},Co.prototype.times_czzhiu$=function(t){return this.dot_czzhiu$(t)},Co.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Co.prototype.toVec3d=function(){return new Ro(this.x,this.y,this.z)},Co.prototype.toMutableVec3d=function(){return this.toMutableVec3d_5s4mqs$(Uo())},Co.prototype.toMutableVec3d_5s4mqs$=function(t){return t.set_yvo9jy$(this.x,this.y,this.z)},Co.prototype.equals=function(t){return this===t||!!e.isType(t,Co)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Co.prototype.hashCode=function(){var t=ot(this.x);return t=(31*(t=(31*t|0)+ot(this.y)|0)|0)+ot(this.z)|0},No.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Eo=null;function To(){return null===Eo&&new No,Eo}function Po(t,e){return e=e||Object.create(Co.prototype),Co.call(e,t,t,t),e}function Oo(t,e){return e=e||Object.create(Co.prototype),Co.call(e,t.x,t.y,t.z),e}function Mo(t,e,i){Co.call(this,t,e,i)}function jo(t){return t=t||Object.create(Mo.prototype),Mo.call(t,0,0,0),t}function Ao(t,e){return e=e||Object.create(Mo.prototype),Mo.call(e,t,t,t),e}function Io(t,e){return e=e||Object.create(Mo.prototype),Mo.call(e,t.x,t.y,t.z),e}function Ro(t,e,i){qo(),this.fields=new Float64Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Lo(){Do=this,this.ZERO=Fo(0),this.X_AXIS=new Ro(1,0,0),this.Y_AXIS=new Ro(0,1,0),this.Z_AXIS=new Ro(0,0,1),this.NEG_X_AXIS=new Ro(-1,0,0),this.NEG_Y_AXIS=new Ro(0,-1,0),this.NEG_Z_AXIS=new Ro(0,0,-1)}Co.$metadata$={kind:$,simpleName:"Vec3f",interfaces:[]},Object.defineProperty(Mo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(Mo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(Mo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(Mo.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Mo.prototype.add_czzhiu$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this},Mo.prototype.mul_czzhiu$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this},Mo.prototype.norm=function(){var t=this.length();return 0!==t?this.scale_mx4ult$(1/t):this.set_czzhiu$(To().ZERO)},Mo.prototype.rotate_7b5o5w$=function(t,e,i,n){var o=t*LN.DEG_2_RAD,r=A.cos(o),s=1-r,a=A.sin(o),l=this.x*(e*e*s+r)+this.y*(e*i*s-n*a)+this.z*(e*n*s+i*a),u=this.x*(i*e*s+n*a)+this.y*(i*i*s+r)+this.z*(i*n*s-e*a),p=this.x*(e*n*s-i*a)+this.y*(i*n*s+e*a)+this.z*(n*n*s+r);return this.x=l,this.y=u,this.z=p,this},Mo.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},Mo.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this},Mo.prototype.set_y2kzbl$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Mo.prototype.set_czzhiu$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Mo.prototype.subtract_czzhiu$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this},Mo.prototype.divAssign_mx4ult$=function(t){this.scale_mx4ult$(1/t)},Mo.prototype.minusAssign_czzhiu$=function(t){this.subtract_czzhiu$(t)},Mo.prototype.plusAssign_czzhiu$=function(t){this.add_czzhiu$(t)},Mo.prototype.set_24o109$=function(t,e){this.fields[t]=e},Mo.prototype.timesAssign_mx4ult$=function(t){this.scale_mx4ult$(t)},Mo.$metadata$={kind:$,simpleName:"MutableVec3f",interfaces:[Co]},Object.defineProperty(Ro.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Ro.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Ro.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Ro.prototype.add_vgki2o$=function(t,e){return e.set_czzhiw$(this).add_czzhiw$(t)},Ro.prototype.cross_vgki2o$=function(t,e){return e.x=this.y*t.z-this.z*t.y,e.y=this.z*t.x-this.x*t.z,e.z=this.x*t.y-this.y*t.x,e},Ro.prototype.distance_czzhiw$=function(t){var e=this.sqrDistance_czzhiw$(t);return A.sqrt(e)},Ro.prototype.dot_czzhiw$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Ro.prototype.isFuzzyEqual_6nz8ey$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var o=this.y-t.y;n=A.abs(o)<=e}var r=n;if(r){var s=this.z-t.z;r=A.abs(s)<=e}return r},Ro.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Ro.prototype.mix_3odno2$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i},Ro.prototype.mul_vgki2o$=function(t,e){return e.set_czzhiw$(this).mul_czzhiw$(t)},Ro.prototype.norm_5s4mqs$=function(t){return t.set_czzhiw$(this).norm()},Ro.prototype.planeSpace_7vsg4s$=function(t,e){var i=this.z;if(A.abs(i)>Dn){var n=this.y*this.y+this.z*this.z,o=1/A.sqrt(n);t.x=0,t.y=-this.z*o,t.z=this.y*o,e.x=n*o,e.y=-this.x*t.z,e.z=this.x*t.y}else{var r=this.x*this.x+this.y*this.y,s=1/A.sqrt(r);t.x=-this.y*s,t.y=this.x*s,t.z=0,e.x=-this.z*t.y,e.y=this.z*t.x,e.z=r*s}},Ro.prototype.rotate_8uuoh8$=function(t,e,i,n,o){return o.set_czzhiw$(this).rotate_6y0v78$(t,e,i,n)},Ro.prototype.rotate_cvw8z2$=function(t,e,i){return i.set_czzhiw$(this).rotate_6y0v78$(t,e.x,e.y,e.z)},Ro.prototype.scale_b0flbq$=function(t,e){return e.set_czzhiw$(this).scale_14dthe$(t)},Ro.prototype.sqrDistance_czzhiw$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},Ro.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},Ro.prototype.subtract_vgki2o$=function(t,e){return e.set_czzhiw$(this).subtract_czzhiw$(t)},Ro.prototype.get_za3lpa$=function(t){return this.fields[t]},Ro.prototype.times_czzhiw$=function(t){return this.dot_czzhiw$(t)},Ro.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ro.prototype.toVec3f=function(){return new Co(this.x,this.y,this.z)},Ro.prototype.toMutableVec3f=function(){return this.toMutableVec3f_5s4mqq$(jo())},Ro.prototype.toMutableVec3f_5s4mqq$=function(t){return t.set_y2kzbl$(this.x,this.y,this.z)},Ro.prototype.equals=function(t){return this===t||!!e.isType(t,Ro)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Ro.prototype.hashCode=function(){var t=ot(this.x);return t=(31*(t=(31*t|0)+ot(this.y)|0)|0)+ot(this.z)|0},Lo.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Do=null;function qo(){return null===Do&&new Lo,Do}function Fo(t,e){return e=e||Object.create(Ro.prototype),Ro.call(e,t,t,t),e}function Bo(t,e,i){Ro.call(this,t,e,i)}function Uo(t){return t=t||Object.create(Bo.prototype),Bo.call(t,0,0,0),t}function Vo(t,e,i){Wo(),this.fields=new Int32Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Go(){Ho=this,this.ZERO=Ko(0),this.X_AXIS=new Vo(1,0,0),this.Y_AXIS=new Vo(0,1,0),this.Z_AXIS=new Vo(0,0,1),this.NEG_X_AXIS=new Vo(-1,0,0),this.NEG_Y_AXIS=new Vo(0,-1,0),this.NEG_Z_AXIS=new Vo(0,0,-1)}Ro.$metadata$={kind:$,simpleName:"Vec3d",interfaces:[]},Object.defineProperty(Bo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(Bo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),Object.defineProperty(Bo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_5wr77w$(2,t)}}),Bo.prototype.add_czzhiw$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this},Bo.prototype.mul_czzhiw$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this},Bo.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},Bo.prototype.rotate_6y0v78$=function(t,e,i,n){var o=t*LN.DEG_2_RAD,r=A.cos(o),s=1-r,a=A.sin(o),l=this.x*(e*e*s+r)+this.y*(e*i*s-n*a)+this.z*(e*n*s+i*a),u=this.x*(i*e*s+n*a)+this.y*(i*i*s+r)+this.z*(i*n*s-e*a),p=this.x*(e*n*s-i*a)+this.y*(i*n*s+e*a)+this.z*(n*n*s+r);return this.x=l,this.y=u,this.z=p,this},Bo.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},Bo.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this},Bo.prototype.set_yvo9jy$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Bo.prototype.set_czzhiw$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Bo.prototype.subtract_czzhiw$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this},Bo.prototype.divAssign_14dthe$=function(t){this.scale_14dthe$(1/t)},Bo.prototype.minusAssign_czzhiw$=function(t){this.subtract_czzhiw$(t)},Bo.prototype.plusAssign_czzhiw$=function(t){this.add_czzhiw$(t)},Bo.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},Bo.prototype.timesAssign_14dthe$=function(t){this.scale_14dthe$(t)},Bo.$metadata$={kind:$,simpleName:"MutableVec3d",interfaces:[Ro]},Object.defineProperty(Vo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Vo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Vo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Vo.prototype.get_za3lpa$=function(t){return this.fields[t]},Vo.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Vo.prototype.equals=function(t){return this===t||!!e.isType(t,hr)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Vo.prototype.hashCode=function(){var t=ot(this.x);return t=(31*(t=(31*t|0)+ot(this.y)|0)|0)+ot(this.z)|0},Go.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ho=null;function Wo(){return null===Ho&&new Go,Ho}function Ko(t,e){return e=e||Object.create(Vo.prototype),Vo.call(e,t,t,t),e}function Xo(t,e,i){Vo.call(this,t,e,i),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Yo(t){return t=t||Object.create(Xo.prototype),Xo.call(t,0,0,0),t}function Zo(t,e,i,n){tr(),this.fields=new Float32Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function Jo(){Qo=this,this.ZERO=er(0),this.X_AXIS=new Zo(1,0,0,0),this.Y_AXIS=new Zo(0,1,0,0),this.Z_AXIS=new Zo(0,0,1,0),this.W_AXIS=new Zo(0,0,0,1),this.NEG_X_AXIS=new Zo(-1,0,0,0),this.NEG_Y_AXIS=new Zo(0,-1,0,0),this.NEG_Z_AXIS=new Zo(0,0,-1,0),this.NEG_W_AXIS=new Zo(0,0,0,-1)}Vo.$metadata$={kind:$,simpleName:"Vec3i",interfaces:[]},Object.defineProperty(Xo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_vux9f0$(0,t)}}),Object.defineProperty(Xo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_vux9f0$(1,t)}}),Object.defineProperty(Xo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_vux9f0$(2,t)}}),Object.defineProperty(Xo.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Xo.prototype.set_qt1dr2$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Xo.prototype.set_czzhir$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Xo.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},Xo.$metadata$={kind:$,simpleName:"MutableVec3i",interfaces:[Vo]},Object.defineProperty(Zo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Zo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Zo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(Zo.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),Zo.prototype.add_uzu8ww$=function(t,e){return e.set_czzhhz$(this).add_czzhhz$(t)},Zo.prototype.distance_czzhhz$=function(t){var e=this.sqrDistance_czzhhz$(t);return A.sqrt(e)},Zo.prototype.dot_czzhhz$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},Zo.prototype.isFuzzyEqual_m79ulu$=function(t,e){void 0===e&&(e=Rn);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var o=this.y-t.y;n=A.abs(o)<=e}var r=n;if(r){var s=this.z-t.z;r=A.abs(s)<=e}var a=r;if(a){var l=this.w-t.w;a=A.abs(l)<=e}return a},Zo.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Zo.prototype.mix_q86erb$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i.w=t.w*e+this.w*(1-e),i},Zo.prototype.mul_uzu8ww$=function(t,e){return e.set_czzhhz$(this).mul_czzhhz$(t)},Zo.prototype.norm_5s4mpv$=function(t){return t.set_czzhhz$(this).norm()},Zo.prototype.quatProduct_uzu8ww$=function(t,e){return e.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,e.y=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e.z=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,e.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,e},Zo.prototype.scale_749b7q$=function(t,e){return e.set_czzhhz$(this).scale_mx4ult$(t)},Zo.prototype.sqrDistance_czzhhz$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,o=this.z-t.w;return e*e+i*i+n*n+o*o},Zo.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Zo.prototype.subtract_uzu8ww$=function(t,e){return e.set_czzhhz$(this).subtract_czzhhz$(t)},Zo.prototype.getXyz_5s4mqq$=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t},Zo.prototype.get_za3lpa$=function(t){return this.fields[t]},Zo.prototype.times_czzhhz$=function(t){return this.dot_czzhhz$(t)},Zo.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Zo.prototype.toVec4d=function(){return new rr(this.x,this.y,this.z,this.w)},Zo.prototype.toMutableVec4d=function(){return this.toMutableVec4d_5s4mpx$(cr())},Zo.prototype.toMutableVec4d_5s4mpx$=function(t){return t.set_6y0v78$(this.x,this.y,this.z,this.w)},Zo.prototype.equals=function(t){return this===t||!!e.isType(t,Zo)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},Zo.prototype.hashCode=function(){var t=ot(this.x);return t=(31*(t=(31*(t=(31*t|0)+ot(this.y)|0)|0)+ot(this.z)|0)|0)+ot(this.w)|0},Jo.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Qo=null;function tr(){return null===Qo&&new Jo,Qo}function er(t,e){return e=e||Object.create(Zo.prototype),Zo.call(e,t,t,t,t),e}function ir(t,e,i){return i=i||Object.create(Zo.prototype),Zo.call(i,t.x,t.y,t.z,e),i}function nr(t,e,i,n){Zo.call(this,t,e,i,n)}function or(t){return t=t||Object.create(nr.prototype),nr.call(t,0,0,0,0),t}function rr(t,e,i,n){lr(),this.fields=new Float64Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function sr(){ar=this,this.ZERO=ur(0),this.X_AXIS=new rr(1,0,0,0),this.Y_AXIS=new rr(0,1,0,0),this.Z_AXIS=new rr(0,0,1,0),this.W_AXIS=new rr(0,0,0,1),this.NEG_X_AXIS=new rr(-1,0,0,0),this.NEG_Y_AXIS=new rr(0,-1,0,0),this.NEG_Z_AXIS=new rr(0,0,-1,0),this.NEG_W_AXIS=new rr(0,0,0,-1)}Zo.$metadata$={kind:$,simpleName:"Vec4f",interfaces:[]},Object.defineProperty(nr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(nr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(nr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(nr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_24o109$(3,t)}}),Object.defineProperty(nr.prototype,"array",{configurable:!0,get:function(){return this.fields}}),nr.prototype.add_czzhhz$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this},nr.prototype.mul_czzhhz$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this},nr.prototype.norm=function(){return this.scale_mx4ult$(1/this.length())},nr.prototype.quatProduct_czzhhz$=function(t){var e=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,n=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,o=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return this.set_7b5o5w$(e,i,n,o),this},nr.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this},nr.prototype.set_7b5o5w$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},nr.prototype.set_czzhhz$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},nr.prototype.set_2qa7tb$=function(t,e){return void 0===e&&(e=0),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this},nr.prototype.subtract_czzhhz$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this},nr.prototype.plusAssign_czzhhz$=function(t){this.add_czzhhz$(t)},nr.prototype.minusAssign_czzhhz$=function(t){this.subtract_czzhhz$(t)},nr.prototype.set_24o109$=function(t,e){this.fields[t]=e},nr.$metadata$={kind:$,simpleName:"MutableVec4f",interfaces:[Zo]},Object.defineProperty(rr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(rr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(rr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(rr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),rr.prototype.add_2x9ggw$=function(t,e){return e.set_czzhi1$(this).add_czzhi1$(t)},rr.prototype.distance_czzhi1$=function(t){var e=this.sqrDistance_czzhi1$(t);return A.sqrt(e)},rr.prototype.dot_czzhi1$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},rr.prototype.isFuzzyEqual_1rza9z$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var o=this.y-t.y;n=A.abs(o)<=e}var r=n;if(r){var s=this.z-t.z;r=A.abs(s)<=e}var a=r;if(a){var l=this.w-t.w;a=A.abs(l)<=e}return a},rr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},rr.prototype.mix_3szysy$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i.w=t.w*e+this.w*(1-e),i},rr.prototype.mul_2x9ggw$=function(t,e){return e.set_czzhi1$(this).mul_czzhi1$(t)},rr.prototype.norm_5s4mpx$=function(t){return t.set_czzhi1$(this).norm()},rr.prototype.quatProduct_2x9ggw$=function(t,e){return e.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,e.y=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e.z=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,e.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,e},rr.prototype.scale_b0flav$=function(t,e){return e.set_czzhi1$(this).scale_14dthe$(t)},rr.prototype.sqrDistance_czzhi1$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,o=this.z-t.w;return e*e+i*i+n*n+o*o},rr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},rr.prototype.subtract_2x9ggw$=function(t,e){return e.set_czzhi1$(this).subtract_czzhi1$(t)},rr.prototype.getXyz_5s4mqs$=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t},rr.prototype.get_za3lpa$=function(t){return this.fields[t]},rr.prototype.times_czzhi1$=function(t){return this.dot_czzhi1$(t)},rr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},rr.prototype.toVec4f=function(){return new Zo(this.x,this.y,this.z,this.w)},rr.prototype.toMutableVec4f=function(){return this.toMutableVec4f_5s4mpv$(or())},rr.prototype.toMutableVec4f_5s4mpv$=function(t){return t.set_7b5o5w$(this.x,this.y,this.z,this.w)},rr.prototype.equals=function(t){return this===t||!!e.isType(t,rr)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},rr.prototype.hashCode=function(){var t=ot(this.x);return t=(31*(t=(31*(t=(31*t|0)+ot(this.y)|0)|0)+ot(this.z)|0)|0)+ot(this.w)|0},sr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ar=null;function lr(){return null===ar&&new sr,ar}function ur(t,e){return e=e||Object.create(rr.prototype),rr.call(e,t,t,t,t),e}function pr(t,e,i,n){rr.call(this,t,e,i,n)}function cr(t){return t=t||Object.create(pr.prototype),pr.call(t,0,0,0,0),t}function hr(t,e,i,n){Sr(),this.fields=new Int32Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function dr(){kr=this,this.ZERO=Cr(0),this.X_AXIS=new hr(1,0,0,0),this.Y_AXIS=new hr(0,1,0,0),this.Z_AXIS=new hr(0,0,1,0),this.W_AXIS=new hr(0,0,0,1),this.NEG_X_AXIS=new hr(-1,0,0,0),this.NEG_Y_AXIS=new hr(0,-1,0,0),this.NEG_Z_AXIS=new hr(0,0,-1,0),this.NEG_W_AXIS=new hr(0,0,0,-1)}rr.$metadata$={kind:$,simpleName:"Vec4d",interfaces:[]},Object.defineProperty(pr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(pr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),Object.defineProperty(pr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_5wr77w$(2,t)}}),Object.defineProperty(pr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_5wr77w$(3,t)}}),pr.prototype.add_czzhi1$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this},pr.prototype.mul_czzhi1$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this},pr.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},pr.prototype.quatProduct_czzhi1$=function(t){var e=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,n=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,o=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return this.set_6y0v78$(e,i,n,o),this},pr.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this},pr.prototype.set_6y0v78$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},pr.prototype.set_czzhi1$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},pr.prototype.set_6nz8ey$=function(t,e){return void 0===e&&(e=0),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this},pr.prototype.subtract_czzhi1$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this},pr.prototype.plusAssign_czzhi1$=function(t){this.add_czzhi1$(t)},pr.prototype.minusAssign_czzhi1$=function(t){this.subtract_czzhi1$(t)},pr.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},pr.$metadata$={kind:$,simpleName:"MutableVec4d",interfaces:[rr]},Object.defineProperty(hr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(hr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(hr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(hr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),hr.prototype.get_za3lpa$=function(t){return this.fields[t]},hr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},hr.prototype.equals=function(t){return this===t||!!e.isType(t,hr)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},hr.prototype.hashCode=function(){var t=ot(this.x);return t=(31*(t=(31*(t=(31*t|0)+ot(this.y)|0)|0)+ot(this.z)|0)|0)+ot(this.w)|0},dr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fr,_r,mr,$r,yr,vr,gr,br,xr,wr,zr,kr=null;function Sr(){return null===kr&&new dr,kr}function Cr(t,e){return e=e||Object.create(hr.prototype),hr.call(e,t,t,t,t),e}function Nr(t,e,i,n){hr.call(this,t,e,i,n),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function Er(t){return t=t||Object.create(Nr.prototype),Nr.call(t,0,0,0,0),t}function Tr(t,e){return t.cross_2gj7b4$(e,jo())}function Pr(t,e){var i,n,o,r;void 0===e&&(e=new Ir),Hd.call(this,t),this.edgeHandler=e,this.verts_0=null,this.positionOffset_0=x(t.attributeByteOffsets.get_11rb$(ds().POSITIONS)),this.tmpVec1_0=jo(),this.tmpVec2_0=jo(),this.tmpVec3_0=jo(),this.vertexIt1_0=t.get_za3lpa$(0),this.vertexIt2_0=t.get_za3lpa$(0);for(var s=t.numVertices,a=w(s),l=0;l<s;l++)a.add_11rb$(new jr(this,l));this.verts_0=a,i=t.numIndices;for(var u=0;u<i;u+=3){var p=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u)),c=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u+1|0)),h=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u+2|0)),d=new Ar(this,p,c),f=new Ar(this,c,h);d.next=f;var _=f,m=new Ar(this,h,p);_.next=m,m.next=d;var $,y,v,g=m;null!=(n=c.getEdgeTo_n38rgs$(p))?(n.opp=d,$=n):$=null,d.opp=$,null!=(o=h.getEdgeTo_n38rgs$(c))?(o.opp=_,y=o):y=null,_.opp=y,null!=(r=p.getEdgeTo_n38rgs$(h))?(r.opp=g,v=r):v=null,g.opp=v,this.edgeHandler.plusAssign_ebe40$(d),this.edgeHandler.plusAssign_ebe40$(_),this.edgeHandler.plusAssign_ebe40$(g)}}function Or(){}function Mr(t,i){return function(n){if(n.isDeleted){var o=i,r=KN.Log,s=Cz.WARN,a=e.getKClassFromExpression(o).simpleName;s.level>=r.level.level&&r.printer(s,a,"Deleted edge in v, edge.from == v: "+(n.from===t))}return n.isDeleted}}function jr(t,e){this.$outer=t,Po(0,this),this.index=e,this.edges=M(),this.isDeleted_st01j9$_0=!1,this.meshDataIndex_8be2vx$=this.index}function Ar(t,e,i){this.$outer=t,this.from_t0m3rm$_0=e,this.to_z50l7l$_0=i,this.isDeleted_tjy89$_0=!1,this.treeNode_u2e3i4$_0=null,this.next_t4scix$_0=this.next_t4scix$_0,this.opp_nuqb1l$_0=null,e.edges.add_11rb$(this)}function Ir(){this.edgeList=M(),this.numEdges_wlm1ja$_0=0}function Rr(t){return t.isDeleted}function Lr(t){this.this$ListEdgeHandler=t,this.i=0}function Dr(t){OcTreeEdgeHandler$Companion_getInstance(),this.edgeTree=new OcTree(OcTreeEdgeHandler$Companion$HalfEdgeAdapter_getInstance(),void 0,t)}function qr(){}function Fr(){}function Br(){this.tmpQ=new bn,this.tmpNrm0=jo(),this.tmpNrm1=jo(),this.tmpPos0=jo(),this.tmpPos1=jo()}function Ur(){return new Br}function Vr(t){var e;this.vertex=t,this.errQuadric=(new bn).setZero(),this.isStickyVertex=!1,this.isBorder_qaaj7p$_0=!1,this.isDeleted_clri7e$_0=!1,this.tmpVec4_0=or(),e=this.vertex.edges;for(var i=0;i!==e.size;++i){var n=this.vertex.edges.get_za3lpa$(i);if(this.addPlane_0(n.computeTriPlane_5s4mpv$(this.tmpVec4_0)),null==n.opp){var o=this.tmpVec4_0.getXyz_5s4mqq$(jo()),r=Io(this.vertex).subtract_czzhiu$(n.to).norm(),s=o.cross_2gj7b4$(r,jo());this.tmpVec4_0.set_2qa7tb$(s,-s.dot_czzhiu$(this.vertex)),this.addPlane_0(this.tmpVec4_0),this.isBorder=!0}if(null==n.next.next.opp){null==n.opp&&n.computeTriPlane_5s4mpv$(this.tmpVec4_0);var a=this.tmpVec4_0.getXyz_5s4mqq$(jo()),l=Io(n.next.next.from).subtract_czzhiu$(this.vertex).norm(),u=a.cross_2gj7b4$(l,jo());this.tmpVec4_0.set_2qa7tb$(u,-u.dot_czzhiu$(this.vertex)),this.addPlane_0(this.tmpVec4_0),this.isBorder=!0}}}function Gr(t,e){void 0===e&&(e=Ur()),this.termCrit=t,this.collapseStrategy=e,this.quadrics_h71pfh$_0=z(),this.candidates_gym04f$_0=new Kr,this.mesh_c14x7o$_aesyuh$_0=this.mesh_c14x7o$_aesyuh$_0,this.excludedEdges=ct(),this.stickyVertices=ct(),this.keepBorders=!1}function Hr(t,e,i,n){this.$outer=t,this.edge=e,this.q1=i,this.q2=n,this.error=0,this.collapsePos=jo(),this.edgeId=new Wr(this.edge.from.index,this.edge.to.index),this.updateCollapsePosAndError()}function Wr(t,e){this.fromId=t,this.toId=e}function Kr(){xS.call(this),this.candidateMap=z()}function Xr(){}function Yr(t){this.closure$factor=t,this.targetFaceCnt=2147483647}function Zr(t,e,i,n,o){T.call(this),this.byteSize=i,this.isInt=n,this.glslType=o,this.name$=t,this.ordinal$=e}function Jr(){Jr=function(){},fr=new Zr("FLOAT",0,4,!1,"float"),_r=new Zr("VEC_2F",1,8,!1,"vec2"),mr=new Zr("VEC_3F",2,12,!1,"vec3"),$r=new Zr("VEC_4F",3,16,!1,"vec4"),yr=new Zr("INT",4,4,!0,"int"),vr=new Zr("VEC_2I",5,8,!0,"ivec2"),gr=new Zr("VEC_3I",6,12,!0,"ivec3"),br=new Zr("VEC_4I",7,16,!0,"ivec4"),xr=new Zr("MAT_2F",8,16,!1,"mat2"),wr=new Zr("MAT_3F",9,36,!1,"mat3"),zr=new Zr("MAT_4F",10,64,!1,"mat4")}function Qr(){return Jr(),fr}function ts(){return Jr(),_r}function es(){return Jr(),mr}function is(){return Jr(),$r}function ns(){return Jr(),yr}function os(){return Jr(),vr}function rs(){return Jr(),gr}function ss(){return Jr(),br}function as(){return Jr(),xr}function ls(){return Jr(),wr}function us(){return Jr(),zr}function ps(t,e){ds(),this.name=t,this.type=e,this.props=new YS(this)}function cs(){hs=this,this.POSITIONS=new ps("attrib_positions",es()),this.NORMALS=new ps("attrib_normals",es()),this.TANGENTS=new ps("attrib_tangents",is()),this.TEXTURE_COORDS=new ps("attrib_texture_coords",ts()),this.COLORS=new ps("attrib_colors",is()),this.JOINTS=new ps("attrib_joints",ss()),this.WEIGHTS=new ps("attrib_weights",is())}hr.$metadata$={kind:$,simpleName:"Vec4i",interfaces:[]},Object.defineProperty(Nr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_vux9f0$(0,t)}}),Object.defineProperty(Nr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_vux9f0$(1,t)}}),Object.defineProperty(Nr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_vux9f0$(2,t)}}),Object.defineProperty(Nr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_vux9f0$(3,t)}}),Object.defineProperty(Nr.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Nr.prototype.set_tjonv8$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},Nr.prototype.set_czzhhw$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},Nr.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},Nr.$metadata$={kind:$,simpleName:"MutableVec4i",interfaces:[hr]},Object.defineProperty(Pr.prototype,"vertices",{configurable:!0,get:function(){return this.verts_0}}),Object.defineProperty(Pr.prototype,"vertCount",{configurable:!0,get:function(){return this.verts_0.size}}),Object.defineProperty(Pr.prototype,"faceCount",{configurable:!0,get:function(){return this.edgeHandler.numEdges/3|0}}),Or.prototype.distinctTriangleEdges=function(){var t,e=M();for(t=this.iterator();t.hasNext();){var i=t.next();i.id.compareTo_11rb$(i.next.id)<0&&i.id.compareTo_11rb$(i.next.next.id)<0&&e.add_11rb$(i)}return e},Or.$metadata$={kind:st,simpleName:"EdgeHandler",interfaces:[at]},Pr.prototype.generateWireframe_6olbr4$=function(t,e){void 0===e&&(e=J$().MD_PINK);var i,n,o=jo(),r=jo(),s=this.edgeHandler,a=M();for(i=s.iterator();i.hasNext();){var l=i.next();(null==l.opp||l.from.index<l.to.index)&&a.add_11rb$(l)}for(n=a.iterator();n.hasNext();){var u=n.next();o.set_czzhiu$(u.from),r.set_czzhiu$(u.to),t.addLine_b8opkg$(o,e,r,e)}},Pr.prototype.sanitize=function(){for(var t,i,n,o=this.verts_0.iterator(),r=0;o.hasNext();){var s=o.next();s.isDeleted?o.remove():s.index=(r=(t=r)+1|0,t)}var a=this.verts_0.size;if(this.edgeHandler.rebuild(),this.edgeHandler.numEdges%3!=0){var l=KN.Log,u=Cz.WARN,p=e.getKClassFromExpression(this).simpleName;u.level>=l.level.level&&l.printer(u,p,"Uneven edge count: "+this.edgeHandler.numEdges%3)}var c,h,d=M();for(i=this.verts_0.iterator();i.hasNext();){var f=i.next();for(lt(f.edges,Mr(f,this)),n=f.edges.iterator();n.hasNext();){var _=n.next(),m=_.from.index,$=_.next.from.index,y=_.next.next.from.index;if(m>=a||$>=a||y>=a){var v=KN.Log,g=Cz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Inconsistent triangle indices: i0="+m+", i1="+$+", i2="+y+", mesh has only "+a+" vertices"),d.add_11rb$(_)}}}for(c=this.edgeHandler.iterator();c.hasNext();){var x=c.next();if(x.from.isDeleted||x.from.index>=a||x.to.isDeleted||x.to.index>=a){var w=KN.Log,z=Cz.WARN,k=e.getKClassFromExpression(this).simpleName;z.level>=w.level.level&&w.printer(z,k,"Inconsistent edge: "+x.from.index+" (del="+x.from.isDeleted+") -> "+x.to.index+" (del="+x.to.isDeleted+"), mesh has only "+a+" vertices"),d.add_11rb$(x)}if(x===x.next||x===x.next.next){var S=KN.Log,C=Cz.WARN,N=e.getKClassFromExpression(this).simpleName;C.level>=S.level.level&&S.printer(C,N,"Invalid edge linkage: he == he.next || he == he.next.next"),d.add_11rb$(x)}}for(h=d.iterator();h.hasNext();)h.next().deleteTriangle()},Pr.prototype.rebuild_dqye30$=function(t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.sanitize();var n,o,r,a=this.geometry,l=a.isBatchUpdate;a.isBatchUpdate=!0,(n=this,o=t,r=i,function(t){var i,a,l=n.geometry.vertexSizeF,u=n.geometry.vertexSizeI,p=n.verts_0.size,c=MN(e.imul(p,l)),h=u>0?ON(e.imul(p,u)):n.geometry.dataI;i=n.verts_0;for(var d=0;d!==i.size;++d){var f=n.verts_0.get_za3lpa$(d).meshDataIndex_8be2vx$;n.verts_0.get_za3lpa$(d).meshDataIndex_8be2vx$=n.verts_0.get_za3lpa$(d).index;for(var _=0;_<l;_++)c.put_mx4ult$(n.geometry.dataF.get_za3lpa$(e.imul(f,l)+_|0));if(u>0)for(var m=0;m<u;m++)h.put_za3lpa$(n.geometry.dataI.get_za3lpa$(e.imul(f,u)+m|0))}for(n.geometry.clearIndices(),a=n.edgeHandler.distinctTriangleEdges().iterator();a.hasNext();){var $=a.next();n.geometry.addIndex_za3lpa$($.from.index),n.geometry.addIndex_za3lpa$($.next.from.index),n.geometry.addIndex_za3lpa$($.next.next.from.index)}if(n.geometry.numIndices!==(3*n.faceCount|0)){var y=KN.Log,v=Cz.WARN,g=e.getKClassFromExpression(t).simpleName;if(v.level>=y.level.level){var b=y.printer,x=n;b.call(y,v,g,"Inconsistent triangle count! MeshData: "+(x.geometry.numIndices/3|0)+", HalfEdgeMesh: "+x.faceCount)}}return n.geometry.dataF=c,n.geometry.dataI=h,n.geometry.numVertices=p,o&&n.geometry.generateNormals(),r&&n.geometry.generateTangents_mx4ult$(),s})(a),a.hasChanged=!0,a.isBatchUpdate=l,a.rebuildBounds()},Pr.prototype.selectBorders=function(){var t,e,i=M(),n=ct(),o=M();for(t=this.edgeHandler.iterator();t.hasNext();){var r=t.next();if(null==r.opp){for(var s=r;!n.contains_11rb$(s);){o.add_11rb$(s),n.add_11rb$(s);var a,l=s.to.edges;t:do{var u;for(u=l.iterator();u.hasNext();){var p=u.next();if(null==p.opp&&!n.contains_11rb$(p)){a=p;break t}}a=null}while(0);if(null==(e=a))break;s=e}o.isEmpty()||(i.add_11rb$(o),o=M())}}return i},Pr.prototype.subSelect_ojfeji$=function(t,e){void 0===e&&(e=0);for(var i=M(),n=ct(),o=ct(),r=b([t]);!r.isEmpty()&&(0===e||(i.size/3|0)<e);){var s=r.removeAt_za3lpa$(0);if(!o.contains_11rb$(s.id)){var a=s.id;o.add_11rb$(a),i.add_11rb$(s);var l=s.next,u=l.id;o.add_11rb$(u),i.add_11rb$(l);var p=s.next.next,c=p.id;if(o.add_11rb$(c),i.add_11rb$(p),null!=s.opp&&!o.contains_11rb$(x(s.opp).id)&&!n.contains_11rb$(x(s.opp).id)){var h=x(s.opp);r.add_11rb$(h)}if(null!=s.next.opp&&!o.contains_11rb$(x(s.next.opp).id)&&!n.contains_11rb$(x(s.next.opp).id)){var d=x(s.next.opp);r.add_11rb$(d)}if(null!=s.next.next.opp&&!o.contains_11rb$(x(s.next.next.opp).id)&&!n.contains_11rb$(x(s.next.next.opp).id)){var f=x(s.next.next.opp);r.add_11rb$(f)}}}return new ut(r,i)},Pr.prototype.splitEdge_b49or$=function(t,e){var i,n,o,r=this.geometry;r.checkBufferSizes_za3lpa$(),i=r.vertexSizeF;for(var s=1;s<=i;s++)r.dataF.plusAssign_mx4ult$(0);n=r.vertexSizeI;for(var a=1;a<=n;a++)r.dataI.plusAssign_za3lpa$(0);r.vertexIt.index=(o=r.numVertices,r.numVertices=o+1|0,o);var l=r.vertexIt;l.position.set_czzhiu$(t.to).subtract_czzhiu$(t.from).scale_mx4ult$(e).add_czzhiu$(t.from),t.from.getMeshVertex_fs4kvg$(this.vertexIt1_0),t.to.getMeshVertex_fs4kvg$(this.vertexIt2_0),l.texCoord.set_czzhjp$(this.vertexIt2_0.texCoord).subtract_czzhjp$(this.vertexIt1_0.texCoord).scale_mx4ult$(e).add_czzhjp$(this.vertexIt1_0.texCoord),l.normal.set_czzhiu$(this.vertexIt2_0.normal).subtract_czzhiu$(this.vertexIt1_0.normal).scale_mx4ult$(e).add_czzhiu$(this.vertexIt1_0.normal),r.bounds.add_czzhiu$(r.vertexIt.position),r.hasChanged=!0;var u=new jr(this,r.numVertices-1|0);this.verts_0.add_11rb$(u);var p=t.to;t.updateTo_n38rgs$(u);var c=t.next.from.edges,h=t.next;c.remove_11rb$(h),t.next.updateFrom_n38rgs$(u);var d=u.edges,f=t.next;d.add_11rb$(f);var _,m=new Ar(this,u,p),$=new Ar(this,p,t.next.to);m.next=$,$.opp=t.next.opp,null!=(_=$.opp)&&(_.opp=$);var y=$,v=new Ar(this,t.next.to,u);y.next=v,v.next=m,v.opp=t.next,t.next.opp=v;var g=v;this.edgeHandler.plusAssign_ebe40$(m),this.edgeHandler.plusAssign_ebe40$(y),this.edgeHandler.plusAssign_ebe40$(g);var b=t.opp;if(null!=b){var x=b.to;b.updateTo_n38rgs$(u);var w=b.next.from.edges,z=b.next;w.remove_11rb$(z),b.next.updateFrom_n38rgs$(u);var k=u.edges,S=b.next;k.add_11rb$(S);var C,N=new Ar(this,u,x),E=new Ar(this,x,b.next.to);N.next=E,E.opp=b.next.opp,null!=(C=E.opp)&&(C.opp=E);var T=E,P=new Ar(this,b.next.to,u);T.next=P,P.next=N,P.opp=b.next,b.next.opp=P;var O=P;N.opp=t,t.opp=N,m.opp=b,b.opp=m,this.edgeHandler.plusAssign_ebe40$(N),this.edgeHandler.plusAssign_ebe40$(T),this.edgeHandler.plusAssign_ebe40$(O)}return u},Pr.prototype.collapseEdge_b49or$=function(t,e){var i,n=t.from,o=t.to,r=t.next.opp;null!=r&&(t.next.opp=null,r.opp=null,r.updateTo_n38rgs$(n));var s=t.next.next.opp;null!=s&&(t.next.next.opp=null,s.opp=r,null!=r&&(r.opp=s));var a=t.opp;if(null!=a){var l=a.next.opp;null!=l&&(a.next.opp=null,l.opp=null);var u=a.next.next.opp;null!=u&&(o.edges.remove_11rb$(u),n.edges.add_11rb$(u),u.updateFrom_n38rgs$(n),u.next.next.updateTo_n38rgs$(n),a.next.next.opp=null,u.opp=l,null!=l&&(l.opp=u))}t.deleteTriangle(),null!=a&&a.deleteTriangle(),i=o.edges;for(var p=0;p!==i.size;++p){var c=o.edges.get_za3lpa$(p);c.updateFrom_n38rgs$(n),c.next.next.updateTo_n38rgs$(n);var h=c.opp;null!=h&&(h.updateTo_n38rgs$(n),h.next.updateFrom_n38rgs$(n)),n.edges.add_11rb$(c)}if(o.edges.clear(),o.delete(),0!==e){var d=n.x+(o.x-n.x)*e,f=n.y+(o.y-n.y)*e,_=n.z+(o.z-n.z)*e;n.updatePosition_y2kzbl$(d,f,_)}},Pr.prototype.subMeshOf_u28ozl$=function(t){var e,i=new Xw(this.geometry.vertexAttributes),n=z(),o=this.geometry.vertexIt;for(e=t.iterator();e.hasNext();){var r=e.next();if(!n.keys.contains_11rb$(r.from.index)){var s,a,l,u=r.from.index;i.checkBufferSizes_za3lpa$(),s=i.vertexSizeF;for(var p=1;p<=s;p++)i.dataF.plusAssign_mx4ult$(0);a=i.vertexSizeI;for(var c=1;c<=a;c++)i.dataI.plusAssign_za3lpa$(0);i.vertexIt.index=(l=i.numVertices,i.numVertices=l+1|0,l);var h=i.vertexIt;o.index=r.from.index,h.set_fs4kvg$(o),i.bounds.add_czzhiu$(i.vertexIt.position),i.hasChanged=!0;var d=i.numVertices-1|0;n.put_xwzc9p$(u,d)}if(!n.keys.contains_11rb$(r.to.index)){var f,_,m,$=r.to.index;i.checkBufferSizes_za3lpa$(),f=i.vertexSizeF;for(var y=1;y<=f;y++)i.dataF.plusAssign_mx4ult$(0);_=i.vertexSizeI;for(var v=1;v<=_;v++)i.dataI.plusAssign_za3lpa$(0);i.vertexIt.index=(m=i.numVertices,i.numVertices=m+1|0,m);var g=i.vertexIt;o.index=r.to.index,g.set_fs4kvg$(o),i.bounds.add_czzhiu$(i.vertexIt.position),i.hasChanged=!0;var b=i.numVertices-1|0;n.put_xwzc9p$($,b)}}var w,k=ct();for(w=t.iterator();w.hasNext();){var S=w.next();if(!k.contains_11rb$(S.id)){i.addTriIndices_qt1dr2$(x(n.get_11rb$(S.from.index)),x(n.get_11rb$(S.next.from.index)),x(n.get_11rb$(S.next.next.from.index)));var C=S.id;k.add_11rb$(C);var N=S.next.id;k.add_11rb$(N);var E=S.next.next.id;k.add_11rb$(E)}}return i},Object.defineProperty(jr.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_st01j9$_0},set:function(t){this.isDeleted_st01j9$_0=t}}),Object.defineProperty(jr.prototype,"x",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0|0)}}),Object.defineProperty(jr.prototype,"y",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+1|0)}}),Object.defineProperty(jr.prototype,"z",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+2|0)}}),jr.prototype.setPosition_eyxpjg$=function(t,i,n){this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0|0,t),this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+1|0,i),this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+2|0,n)},jr.prototype.getMeshVertex_fs4kvg$=function(t){return t.index=this.index,t},jr.prototype.getEdgeTo_n38rgs$=function(t){var e;e=this.edges;for(var i=0;i!==e.size;++i)if(this.edges.get_za3lpa$(i).to===t)return this.edges.get_za3lpa$(i);return null},jr.prototype.delete=function(){for(;!this.edges.isEmpty();)F(this.edges).deleteTriangle();this.isDeleted=!0},jr.prototype.updatePosition_czzhiu$=function(t){this.updatePosition_y2kzbl$(t.x,t.y,t.z)},jr.prototype.updatePosition_y2kzbl$=function(t,e,i){this.$outer.edgeHandler.checkedUpdateVertexPosition_efzdnr$(this,t,e,i)},jr.$metadata$={kind:$,simpleName:"HalfEdgeVertex",interfaces:[Co]},Object.defineProperty(Ar.prototype,"from",{configurable:!0,get:function(){return this.from_t0m3rm$_0},set:function(t){this.from_t0m3rm$_0=t}}),Object.defineProperty(Ar.prototype,"to",{configurable:!0,get:function(){return this.to_z50l7l$_0},set:function(t){this.to_z50l7l$_0=t}}),Object.defineProperty(Ar.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_tjy89$_0},set:function(t){this.isDeleted_tjy89$_0=t}}),Object.defineProperty(Ar.prototype,"treeNode",{configurable:!0,get:function(){return this.treeNode_u2e3i4$_0},set:function(t){this.treeNode_u2e3i4$_0=t}}),Object.defineProperty(Ar.prototype,"id",{configurable:!0,get:function(){return e.Long.fromInt(this.from.index).shiftLeft(32).or(e.Long.fromInt(this.to.index))}}),Object.defineProperty(Ar.prototype,"triId",{configurable:!0,get:function(){var t=this.id,e=this.next.id,i=this.next.next.id,n=e.compareTo_11rb$(i)<=0?e:i;return t.compareTo_11rb$(n)<=0?t:n}}),Object.defineProperty(Ar.prototype,"next",{configurable:!0,get:function(){return null==this.next_t4scix$_0?pt("next"):this.next_t4scix$_0},set:function(t){this.next_t4scix$_0=t}}),Object.defineProperty(Ar.prototype,"opp",{configurable:!0,get:function(){return this.opp_nuqb1l$_0},set:function(t){this.opp_nuqb1l$_0=t}}),Ar.prototype.computeLength=function(){return this.from.distance_czzhiu$(this.to)},Ar.prototype.computeTriArea=function(){return Vn(this.from,this.to,this.next.to)},Ar.prototype.computeTriAspectRatio=function(){return Gn(this.from,this.to,this.next.to)},Ar.prototype.computeTriNormal_5s4mqq$=function(t){return this.to.subtract_2gj7b4$(this.from,this.$outer.tmpVec1_0),this.next.to.subtract_2gj7b4$(this.from,this.$outer.tmpVec2_0),this.$outer.tmpVec1_0.cross_2gj7b4$(this.$outer.tmpVec2_0,t),t.norm()},Ar.prototype.computeTriPlane_5s4mpv$=function(t){return this.computeTriNormal_5s4mqq$(this.$outer.tmpVec3_0),t.set_2qa7tb$(this.$outer.tmpVec3_0,-this.$outer.tmpVec3_0.dot_czzhiu$(this.from)),t},Ar.prototype.collapse_mx4ult$=function(t){this.$outer.collapseEdge_b49or$(this,t)},Ar.prototype.split_mx4ult$=function(t){return this.$outer.splitEdge_b49or$(this,t)},Ar.prototype.deleteEdge_0=function(){var t;this.$outer.edgeHandler.minusAssign_ebe40$(this),this.isDeleted=!0,this.from.edges.remove_11rb$(this),null!=(t=this.opp)&&(t.opp=null),this.treeNode=null,this.opp=null},Ar.prototype.deleteTriangle=function(){this.deleteEdge_0(),this.next.deleteEdge_0(),this.next.next.deleteEdge_0()},Ar.prototype.updateFrom_n38rgs$=function(t){this.$outer.edgeHandler.checkedUpdateEdgeFrom_870n7c$(this,t)},Ar.prototype.updateTo_n38rgs$=function(t){this.$outer.edgeHandler.checkedUpdateEdgeTo_870n7c$(this,t)},Ar.prototype.toString=function(){return this.from.index.toString()+" -> "+this.to.index},Ar.$metadata$={kind:$,simpleName:"HalfEdge",interfaces:[]},Pr.$metadata$={kind:$,simpleName:"HalfEdgeMesh",interfaces:[Hd]},Object.defineProperty(Ir.prototype,"numEdges",{configurable:!0,get:function(){return this.numEdges_wlm1ja$_0},set:function(t){this.numEdges_wlm1ja$_0=t}}),Ir.prototype.plusAssign_ebe40$=function(t){if(t.isDeleted){var i=KN.Log,n=Cz.WARN,o=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,o,"edge was deleted before"),t.isDeleted=!1,this.rebuild()}this.edgeList.add_11rb$(t),this.numEdges=this.numEdges+1|0},Ir.prototype.minusAssign_ebe40$=function(t){if(t.isDeleted){var i=KN.Log,n=Cz.WARN,o=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,o,"edge is already deleted"),this.rebuild()}else this.numEdges=this.numEdges-1|0},Ir.prototype.checkedUpdateEdgeTo_870n7c$=function(t,e){t.to=e},Ir.prototype.checkedUpdateEdgeFrom_870n7c$=function(t,e){t.from=e},Ir.prototype.checkedUpdateVertexPosition_efzdnr$=function(t,e,i,n){t.setPosition_eyxpjg$(e,i,n)},Ir.prototype.rebuild=function(){if(lt(this.edgeList,Rr),this.numEdges!==this.edgeList.size){var t=KN.Log,i=Cz.WARN,n=e.getKClassFromExpression(this).simpleName;i.level>=t.level.level&&t.printer(i,n,"Wrong edge count: "+this.numEdges+" != "+this.edgeList.size),this.numEdges=this.edgeList.size}},Lr.prototype.hasNext=function(){for(;this.i<this.this$ListEdgeHandler.edgeList.size&&this.this$ListEdgeHandler.edgeList.get_za3lpa$(this.i).isDeleted;)this.i=this.i+1|0;return this.i<this.this$ListEdgeHandler.edgeList.size},Lr.prototype.next=function(){var t;if(!this.hasNext())throw ht();return this.this$ListEdgeHandler.edgeList.get_za3lpa$((t=this.i,this.i=t+1|0,t))},Lr.$metadata$={kind:$,interfaces:[dt]},Ir.prototype.iterator=function(){return new Lr(this)},Ir.$metadata$={kind:$,simpleName:"ListEdgeHandler",interfaces:[Or]},Fr.$metadata$={kind:st,simpleName:"CollapseStrategy",interfaces:[]},Br.prototype.computeCollapsePosition_2pqe3s$=function(t,e,i){var n,o,r,s,a=0;n=t.vertex.edges;for(var l=0;l!==n.size;++l){var u=t.vertex.edges.get_za3lpa$(l);u.to!==e.vertex&&u.next.to!==e.vertex||(a=a+1|0)}if(a>2||a<(t.isBorder&&e.isBorder?1:2))return yt.MAX_VALUE;if(t.isStickyVertex&&e.isStickyVertex)return yt.MAX_VALUE;if(t.isStickyVertex)return i.set_czzhiu$(t.vertex),t.getError_czzhiu$(i)+e.getError_czzhiu$(i);if(e.isStickyVertex)return i.set_czzhiu$(e.vertex),t.getError_czzhiu$(i)+e.getError_czzhiu$(i);if(null!=(o=t.vertex.getEdgeTo_n38rgs$(e.vertex))&&null==o.next.opp&&null==o.next.next.opp)return yt.MAX_VALUE;if(null!=(r=e.vertex.getEdgeTo_n38rgs$(t.vertex))&&null==r.next.opp&&null==r.next.next.opp)return yt.MAX_VALUE;this.tmpQ.set_d4zu6l$(t.errQuadric),this.tmpQ.add_d4zu6l$(e.errQuadric),this.tmpQ.setRow_ky00rh$(3,lr().W_AXIS),this.tmpQ.invert_14dthe$(Ln)?(i.set_y2kzbl$(this.tmpQ.get_vux9f0$(0,3),this.tmpQ.get_vux9f0$(1,3),this.tmpQ.get_vux9f0$(2,3)),s=t.getError_czzhiu$(i)+e.getError_czzhiu$(i)):(e.vertex.subtract_2gj7b4$(t.vertex,i).scale_mx4ult$(.5).add_czzhiu$(t.vertex),s=t.vertex.distance_czzhiu$(e.vertex)/1e100);var p=s;return this.isRejected_0(t.vertex,e.vertex,i)||this.isRejected_0(e.vertex,t.vertex,i)?yt.MAX_VALUE:p},Br.prototype.isRejected_0=function(t,e,i){var n,o;for(n=t.edges.iterator();n.hasNext();){var r=n.next();if(null==(o=r.to)||!o.equals(e)){if(r.computeTriNormal_5s4mqq$(this.tmpNrm0),this.newNormal_0(r,i,this.tmpNrm1),this.tmpNrm0.dot_czzhiu$(this.tmpNrm1)<0)return!0;if(Gn(i,r.to,r.next.to)>1e4)return!0}}return!1},Br.prototype.newNormal_0=function(t,e,i){t.to.subtract_2gj7b4$(e,this.tmpPos0),t.next.to.subtract_2gj7b4$(e,this.tmpPos1),this.tmpPos0.cross_2gj7b4$(this.tmpPos1,i),i.norm()},Br.$metadata$={kind:$,interfaces:[Fr]},Object.defineProperty(Vr.prototype,"isBorder",{configurable:!0,get:function(){return this.isBorder_qaaj7p$_0},set:function(t){this.isBorder_qaaj7p$_0=t}}),Object.defineProperty(Vr.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_clri7e$_0},set:function(t){this.isDeleted_clri7e$_0=t}}),Vr.prototype.consume_zdf47l$=function(t){this.isBorder=this.isBorder||t.isBorder,this.errQuadric.add_d4zu6l$(t.errQuadric),t.isDeleted=!0},Vr.prototype.getError_czzhiu$=function(t){return this.errQuadric.transform_5s4mpv$(this.tmpVec4_0.set_2qa7tb$(t,1)),this.tmpVec4_0.x*t.x+this.tmpVec4_0.y*t.y+this.tmpVec4_0.z*t.z+this.tmpVec4_0.w},Vr.prototype.addPlane_0=function(t){this.errQuadric.set_224j3y$(0,0,this.errQuadric.get_vux9f0$(0,0)+t.x*t.x),this.errQuadric.set_224j3y$(1,0,this.errQuadric.get_vux9f0$(1,0)+t.x*t.y),this.errQuadric.set_224j3y$(2,0,this.errQuadric.get_vux9f0$(2,0)+t.x*t.z),this.errQuadric.set_224j3y$(3,0,this.errQuadric.get_vux9f0$(3,0)+t.x*t.w),this.errQuadric.set_224j3y$(0,1,this.errQuadric.get_vux9f0$(0,1)+t.y*t.x),this.errQuadric.set_224j3y$(1,1,this.errQuadric.get_vux9f0$(1,1)+t.y*t.y),this.errQuadric.set_224j3y$(2,1,this.errQuadric.get_vux9f0$(2,1)+t.y*t.z),this.errQuadric.set_224j3y$(3,1,this.errQuadric.get_vux9f0$(3,1)+t.y*t.w),this.errQuadric.set_224j3y$(0,2,this.errQuadric.get_vux9f0$(0,2)+t.z*t.x),this.errQuadric.set_224j3y$(1,2,this.errQuadric.get_vux9f0$(1,2)+t.z*t.y),this.errQuadric.set_224j3y$(2,2,this.errQuadric.get_vux9f0$(2,2)+t.z*t.z),this.errQuadric.set_224j3y$(3,2,this.errQuadric.get_vux9f0$(3,2)+t.z*t.w),this.errQuadric.set_224j3y$(0,3,this.errQuadric.get_vux9f0$(0,3)+t.w*t.x),this.errQuadric.set_224j3y$(1,3,this.errQuadric.get_vux9f0$(1,3)+t.w*t.y),this.errQuadric.set_224j3y$(2,3,this.errQuadric.get_vux9f0$(2,3)+t.w*t.z),this.errQuadric.set_224j3y$(3,3,this.errQuadric.get_vux9f0$(3,3)+t.w*t.w)},Vr.$metadata$={kind:$,simpleName:"ErrorQuadric",interfaces:[]},Object.defineProperty(Gr.prototype,"mesh_c14x7o$_0",{configurable:!0,get:function(){return null==this.mesh_c14x7o$_aesyuh$_0?pt("mesh"):this.mesh_c14x7o$_aesyuh$_0},set:function(t){this.mesh_c14x7o$_aesyuh$_0=t}}),Gr.prototype.simplifyMesh_mnbsaa$=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.mesh_c14x7o$_0=t;var o=KN.Log,r=Cz.DEBUG,s=e.getKClassFromExpression(this).simpleName;r.level>=o.level.level&&o.printer(r,s,"Simplifying mesh: "+t.faceCount+" faces / "+t.vertCount+" vertices...");var a=new sk;this.quadrics_h71pfh$_0.clear(),this.candidates_gym04f$_0.clear(),this.termCrit.init_nbf0q6$(t);var l=t.faceCount/2|0;this.rebuildCollapseQueue_sifma0$_0();for(var u={v:0};this.candidates_gym04f$_0.isNotEmpty()&&this.candidates_gym04f$_0.peek().error<yt.MAX_VALUE&&!this.termCrit.isFinished_6w1xds$(t,u.v);){t.faceCount<l&&(this.reshapeTriangles_ps2mgc$_0(),l=t.faceCount/2|0);var p=this.candidates_gym04f$_0.poll();if(p.edge.isDeleted||p.q1.isDeleted||p.q2.isDeleted){var c=KN.Log,h=Cz.WARN,d=e.getKClassFromExpression(this).simpleName;h.level>=c.level.level&&c.printer(h,d,"Invalid edge: already deleted!")}else if(p.edgeId.fromId===p.edge.from.index&&p.edgeId.toId===p.edge.to.index){var f=p.error;if(p.updateCollapsePosAndError(),f===p.error){if(!(p.error<yt.MAX_VALUE)){var _=KN.Log,m=Cz.DEBUG,$=e.getKClassFromExpression(this).simpleName;m.level>=_.level.level&&_.printer(m,$,"No more collapsable edges");break}u.v=p.collapse()}else this.candidates_gym04f$_0.plusAssign_g91td9$(p)}else{var y=KN.Log,v=Cz.ERROR,g=e.getKClassFromExpression(this).simpleName;v.level>=y.level.level&&y.printer(v,g,"Invalid edge: inconsistent vertex indices"),this.rebuildCollapseQueue_sifma0$_0()}}t.rebuild_dqye30$(i,n);var b=KN.Log,x=Cz.DEBUG,w=e.getKClassFromExpression(this).simpleName;x.level>=b.level.level&&b.printer(x,w,"Mesh simplification done! "+t.faceCount+" faces / "+t.vertCount+" vertices remain, last error: "+u.v+", took "+FS(a.takeSecs(),3)+" s")},Gr.prototype.reshapeTriangles_ps2mgc$_0=function(){var t,e=jo(),i=jo();for(t=this.mesh_c14x7o$_0.edgeHandler.distinctTriangleEdges().iterator();t.hasNext();){var n=t.next();if(n.computeTriAspectRatio()>50){var o=n.computeLength(),r=n.next.computeLength(),s=n.next.next.computeLength(),a=o>r&&o>s?n:r>o&&r>s?n.next:n.next.next;e.set_czzhiu$(n.to).subtract_czzhiu$(n.from).norm(),i.set_czzhiu$(n.next.from).subtract_czzhiu$(n.next.to);var l=1-e.dot_czzhiu$(i)/a.computeLength();l>.1&&l<.9&&a.split_mx4ult$(l)}}this.rebuildCollapseQueue_sifma0$_0()},Gr.prototype.rebuildCollapseQueue_sifma0$_0=function(){var t;for(this.candidates_gym04f$_0.clear(),t=this.mesh_c14x7o$_0.edgeHandler.iterator();t.hasNext();){var e=t.next();this.insertEdge_56qw8l$_0(e)}},Gr.prototype.insertEdge_56qw8l$_0=function(t){if(!this.excludedEdges.contains_11rb$(t)&&(t.from.index<t.to.index||null==t.opp)){var e,i=this.quadrics_h71pfh$_0,n=t.from.index,o=i.get_11rb$(n);if(null==o){var r=new Vr(t.from);r.isStickyVertex=this.stickyVertices.contains_11rb$(t.from);var s=r;i.put_xwzc9p$(n,s),e=s}else e=o;var a,l=e,u=this.quadrics_h71pfh$_0,p=t.to.index,c=u.get_11rb$(p);if(null==c){var h=new Vr(t.to);h.isStickyVertex=this.stickyVertices.contains_11rb$(t.to);var d=h;u.put_xwzc9p$(p,d),a=d}else a=c;var f=a;l.isStickyVertex&&f.isStickyVertex||this.keepBorders&&(l.isBorder||f.isBorder)||this.candidates_gym04f$_0.plusAssign_g91td9$(new Hr(this,t,l,f))}},Hr.prototype.updateCollapsePosAndError=function(){this.error=this.$outer.collapseStrategy.computeCollapsePosition_2pqe3s$(this.q1,this.q2,this.collapsePos)},Hr.prototype.collapse=function(){if(this.$outer.quadrics_h71pfh$_0.remove_11rb$(this.q2.vertex.index)!==this.q2)throw gt("Quadric removal failed!");var t,e,i=ct();for(this.collectAffectedEdges_0(this.q1.vertex,i),this.collectAffectedEdges_0(this.q2.vertex,i),this.$outer,t=i.iterator();t.hasNext();){var n=t.next();this.$outer.candidates_gym04f$_0.removeByVertexIndices_vux9f0$(n.from.index,n.to.index)}for(this.q1.consume_zdf47l$(this.q2),this.edge.collapse_mx4ult$(0),this.q1.vertex.updatePosition_czzhiu$(this.collapsePos),i.clear(),this.collectAffectedEdges_0(this.q1.vertex,i),this.$outer,e=i.iterator();e.hasNext();){var o=e.next();this.$outer.insertEdge_56qw8l$_0(o)}return this.error},Hr.prototype.collectAffectedEdges_0=function(t,e){var i;for(i=t.edges.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n);var o=n.next.next;e.add_11rb$(o)}},Hr.$metadata$={kind:$,simpleName:"CollapseCandidate",interfaces:[]},Wr.$metadata$={kind:$,simpleName:"EdgeId",interfaces:[]},Wr.prototype.component1=function(){return this.fromId},Wr.prototype.component2=function(){return this.toId},Wr.prototype.copy_vux9f0$=function(t,e){return new Wr(void 0===t?this.fromId:t,void 0===e?this.toId:e)},Wr.prototype.toString=function(){return"EdgeId(fromId="+e.toString(this.fromId)+", toId="+e.toString(this.toId)+")"},Wr.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.fromId)|0)+e.hashCode(this.toId)|0},Wr.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.fromId,t.fromId)&&e.equals(this.toId,t.toId)},Kr.prototype.isNotEmpty=function(){return!this.isEmpty()},Kr.prototype.peek=function(){return q(this.firstValue())},Kr.prototype.poll=function(){var t=this.firstValue(),e=t.removeAt_za3lpa$(bt(t));t.isEmpty()&&this.remove_11rb$(this.firstKey());var i=this.candidateMap,n=e.edgeId;return i.remove_11rb$(n),e},Kr.prototype.clear=function(){xS.prototype.clear.call(this),this.candidateMap.clear()},Kr.prototype.removeByVertexIndices_vux9f0$=function(t,e){var i=this.candidateMap.remove_11rb$(new Wr(t,e));return null!=i&&this.minusAssign_g91td9$(i),i},Kr.prototype.plusAssign_g91td9$=function(t){var e,i=t.error,n=this.get_11rb$(i);if(null==n){var o=M();this.put_xwzc9p$(i,o),e=o}else e=n;e.add_11rb$(t);var r=this.candidateMap,s=t.edgeId;r.put_xwzc9p$(s,t)},Kr.prototype.minusAssign_g91td9$=function(t){var e=this.get_11rb$(t.error);null!=e&&(e.remove_11rb$(t),e.isEmpty()&&this.remove_11rb$(t.error));var i=this.candidateMap,n=t.edgeId;i.remove_11rb$(n)},Kr.$metadata$={kind:$,simpleName:"CollapseCandidates",interfaces:[xS]},Gr.$metadata$={kind:$,simpleName:"MeshSimplifier",interfaces:[]},Xr.prototype.init_nbf0q6$=function(t){},Xr.$metadata$={kind:st,simpleName:"TermCriterion",interfaces:[]},Yr.prototype.init_nbf0q6$=function(t){this.targetFaceCnt=B(rt(t.faceCount*this.closure$factor))},Yr.prototype.isFinished_6w1xds$=function(t,e){return t.faceCount<=this.targetFaceCnt},Yr.$metadata$={kind:$,interfaces:[Xr]},Zr.$metadata$={kind:$,simpleName:"GlslType",interfaces:[T]},Zr.values=function(){return[Qr(),ts(),es(),is(),ns(),os(),rs(),ss(),as(),ls(),us()]},Zr.valueOf_61zpoe$=function(t){switch(t){case"FLOAT":return Qr();case"VEC_2F":return ts();case"VEC_3F":return es();case"VEC_4F":return is();case"INT":return ns();case"VEC_2I":return os();case"VEC_3I":return rs();case"VEC_4I":return ss();case"MAT_2F":return as();case"MAT_3F":return ls();case"MAT_4F":return us();default:P("No enum constant de.fabmax.kool.pipeline.GlslType."+t)}},ps.prototype.toString=function(){return this.name},cs.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hs=null;function ds(){return null===hs&&new cs,hs}function fs(t,e){var i;$s(),ua.call(this,t,e),this.shadowPipelines_j0os6i$_0=z(),this.cullMethod=null,this.onAfterCollectDrawCommands.add_11rb$((i=this,function(t){var e;for(e=i.drawQueue.commands.iterator();e.hasNext();){var n=e.next();n.pipeline=i.getShadowPipeline_sbx4mf$(n.mesh,t)}return s}))}function _s(){ms=this}ps.$metadata$={kind:$,simpleName:"Attribute",interfaces:[]},ps.prototype.component1=function(){return this.name},ps.prototype.component2=function(){return this.type},ps.prototype.copy_xzl57b$=function(t,e){return new ps(void 0===t?this.name:t,void 0===e?this.type:e)},ps.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.type)|0},ps.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.type,t.type)},fs.prototype.getShadowPipeline_sbx4mf$=function(t,e){var i,n,o,r,s=null!=(o=null!=(n=this.cullMethod)?n:null!=(i=t.getPipeline_aemszp$(e))?i.cullMethod:null)?o:xl(),a=this.shadowPipelines_j0os6i$_0,l=t.id,u=a.get_11rb$(l);if(null==u){var p=this.createPipeline_wgobnr$(t,s,e);a.put_xwzc9p$(l,p),r=p}else r=u;return r},fs.prototype.createPipeline_wgobnr$=function(t,e,i){var n,o=new Iu("DepthShader"),r=new Lu(o),a=r.premultipliedMvpNode().outMvpMat;if(null!=t.instances&&(a=r.multiplyNode_ze33is$(a,r.instanceAttrModelMat().output).output),null!=t.skin){var l=r.skinTransformNode_78eraa$(r.attrJoints().output,r.attrWeights().output);a=r.multiplyNode_ze33is$(a,l.outJointMat).output}var p={v:r.attrPositions().output};if(null!=(n=t.morphWeights)){var c=t.geometry.getMorphAttributes();if(!c.isEmpty()){var h,d,f=r.morphWeightsNode_za3lpa$(n.length),_=M();for(h=c.iterator();h.hasNext();){var m=h.next();u(m.name,ds().POSITIONS.name)&&_.add_11rb$(m)}for(d=_.iterator();d.hasNext();){var $=d.next(),y=r.getMorphWeightNode_dcktnw$(c.indexOf_11rb$($),f),v=r.multiplyNode_ze33is$(r.attributeNode_nm2vx5$($).output,y.outWeight);p.v=r.addNode_ze33is$(p.v,v.output).output}}}r.positionOutput=r.vec4TransformNode_9krp9t$(p.v,a).outVec4;var g=new Du(o);g.colorOutput_a3v4si$(g.constVec4f_czzhhz$(J$().RED));var b,x=new lc(o);return x.onPipelineSetup.add_11rb$((b=e,function(t,e,i){return t.blendMode=ol(),t.cullMethod=b,s})),x.createPipeline_sbx4mf$(t,i)},fs.prototype.dispose_aemszp$=function(t){var e;for(ua.prototype.dispose_aemszp$.call(this,t),e=wt(this.shadowPipelines_j0os6i$_0.values).iterator();e.hasNext();){var i=e.next();t.disposePipeline_i7l2g2$(i)}},_s.prototype.defaultSetup_vux9f0$=function(t,e){var i=new ia;return i.name="DepthMapPass",i.setSize_vux9f0$(t,e),i.clearColorTexture(),i.setDepthTexture_6taknv$(!1),new ea(i)},_s.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ms=null;function $s(){return null===ms&&new _s,ms}function ys(t,e){var i;Ms(),fs.call(this,t,e),this.name="NormalLinearDepthMapPass",this.onAfterCollectDrawCommands.add_11rb$((i=this,function(t){return i.clearColor=new X$(0,1,0,1),s}))}function vs(t,e){qu.call(this,"normalLinearDepth",e),this.inNormals=t,this.outColor=new Fu(new mu("normaLinearDepth"),this)}function gs(){Os=this}fs.$metadata$={kind:$,simpleName:"DepthMapPass",interfaces:[ua]},ys.prototype.createPipeline_wgobnr$=function(t,e,i){if(!t.geometry.hasAttribute_nm2vx5$(ds().NORMALS))return null;var n,o=new Iu("NormalLinearDepth Shader"),r={v:null},a=new Lu(o),l=a.mvpNode(),p=a.multiplyNode_ze33is$(l.outViewMat,l.outModelMat).output,c=l.outMvpMat;if(null!=t.instances&&(c=a.multiplyNode_ze33is$(c,a.instanceAttrModelMat().output).output,p=a.multiplyNode_ze33is$(p,a.instanceAttrModelMat().output).output),null!=t.skin){var h=a.skinTransformNode_78eraa$(a.attrJoints().output,a.attrWeights().output);c=a.multiplyNode_ze33is$(c,h.outJointMat).output,p=a.multiplyNode_ze33is$(p,h.outJointMat).output}var d={v:a.attrPositions().output},f={v:a.attrNormals().output};if(null!=(n=t.morphWeights)){var _=t.geometry.getMorphAttributes();if(!_.isEmpty()){var m,$,y=a.morphWeightsNode_za3lpa$(n.length),v=M();for(m=_.iterator();m.hasNext();){var g=m.next();u(g.name,ds().POSITIONS.name)&&v.add_11rb$(g)}for($=v.iterator();$.hasNext();){var b=$.next(),x=a.getMorphWeightNode_dcktnw$(_.indexOf_11rb$(b),y),w=a.multiplyNode_ze33is$(a.attributeNode_nm2vx5$(b).output,x.outWeight);d.v=a.addNode_ze33is$(d.v,w.output).output}var z,k,S=M();for(z=_.iterator();z.hasNext();){var C=z.next();u(C.name,ds().NORMALS.name)&&S.add_11rb$(C)}for(k=S.iterator();k.hasNext();){var N=k.next(),E=a.getMorphWeightNode_dcktnw$(_.indexOf_11rb$(N),y),T=a.multiplyNode_ze33is$(a.attributeNode_nm2vx5$(N).output,E.outWeight);f.v=a.addNode_ze33is$(f.v,T.output).output}}}var P=a.vec3TransformNode_vid4wo$(f.v,p,0);r.v=a.stageInterfaceNode_iikjwn$("ifNormals",P.outVec3),a.positionOutput=a.vec4TransformNode_9krp9t$(d.v,c).outVec4;var O=new Du(o),j=O.flipBacksideNormalNode_r20yfm$(r.v.output).outNormal,A=O.addNode_u9w9by$(new vs(j,O.stage));O.colorOutput_a3v4si$(A.outColor);var I,R=new lc(o);return R.onPipelineSetup.add_11rb$((I=e,function(t,e,i){return t.blendMode=ol(),t.cullMethod=I,s})),R.createPipeline_sbx4mf$(t,i)},vs.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                float d = gl_FragCoord.z / gl_FragCoord.w;\n                "+this.outColor.declare()+" = vec4(normalize("+this.inNormals.ref3f_61zpoe$()+"), -d);\n            ")},vs.$metadata$={kind:$,simpleName:"NormalLinearDepthNode",interfaces:[qu]},gs.prototype.normalLinearDepthSetup_0=function(t,e){var i=new ia;return i.name="NormalLinearDepthMapPass",i.setSize_vux9f0$(t,e),i.clearDepthTexture(),i.addColorTexture_farcsl$(th()),new ea(i)},gs.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bs,xs,ws,zs,ks,Ss,Cs,Ns,Es,Ts,Ps,Os=null;function Ms(){return null===Os&&new gs,Os}function js(t,e,i,n){return void 0===i&&(i=e),n=n||Object.create(ys.prototype),ys.call(n,t,Ms().normalLinearDepthSetup_0(e,i)),n}function As(t,i){this.set=t,this.descriptors=i,this.longHash=null;var n,o={v:new kt(e.Long.ZERO)};for(n=this.descriptors.iterator();n.hasNext();){var r=n.next(),s=o.v,a=new kt(e.Long.fromInt(71023)),l=new kt(s.data.multiply(a.data)),u=r.longHash;o.v=new kt(l.data.add(u.data))}this.longHash=o.v}function Is(){this.descriptors=M()}function Rs(t,i,n,o){this.binding=i,this.type=n,this.name=t.name,this.stages=K$(t.stages),this.longHash=null;var r=o,s=r,a=new kt(e.Long.fromInt(71023)),l=new kt(s.data.multiply(a.data)),u=ot(t.name),p=new kt(e.Long.fromInt(u)),c=r=new kt(l.data.add(p.data)),h=new kt(e.Long.fromInt(71023)),d=new kt(c.data.multiply(h.data)),f=this.type.hashCode(),_=new kt(e.Long.fromInt(f));r=new kt(d.data.add(_.data)),this.longHash=r}function Ls(){this.name="",this.stages=ct()}function Ds(t,e,i){Rs.call(this,t,e,Ws(),i),this.arraySize=t.arraySize,this.isDepthSampler=t.isDepthSampler,this.onUpdate=t.onUpdate;var n,o=I(this.arraySize);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=null;this.textures=o}function qs(){Ls.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="texture"}function Fs(t,e,i){Rs.call(this,t,e,Ks(),i),this.arraySize=t.arraySize,this.isDepthSampler=t.isDepthSampler,this.onUpdate=t.onUpdate;var n,o=I(this.arraySize);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=null;this.textures=o}function Bs(){Ls.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="cubeTexture"}function Us(t,e,i,n){Rs.call(this,t,e,Xs(),n),this.uniforms=i,this.instanceName=t.instanceName,this.onUpdate=t.onUpdate,this.layout_0=new Uc(this.uniforms),this.size=this.layout_0.size}function Vs(){Ls.call(this),this.instanceName=null,this.uniforms=M(),this.onUpdate=null,this.onCreate=null,this.name="Ubo"}function Gs(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Hs(){Hs=function(){},bs=new Gs("IMAGE_SAMPLER",0),xs=new Gs("CUBE_IMAGE_SAMPLER",1),ws=new Gs("UNIFORM_BUFFER",2)}function Ws(){return Hs(),bs}function Ks(){return Hs(),xs}function Xs(){return Hs(),ws}function Ys(t){this.renderPass=t,this.mesh_aolzlu$_0=this.mesh_aolzlu$_0,this.pipeline=null,this.modelMat=new En,this.viewMat=new En,this.projMat=new En,this.mvpMat=new En,this.mvpMatD_0=new bn}function Zs(t){this.renderPass=t,this.mutCommands_0=M(),this.commandPool_0=M(),this.meshFilter=Js}function Js(t){return!0}function Qs(){}function ta(t,e){Cl.call(this,t),this.config=e,this.isEnabled=!0,this.width_6fsav1$_0=this.config.width,this.height_4loxs4$_0=this.config.height;var i=new Ed;i.projCorrectionMode=Cd(),this.camera_et6fa$_0=i,this.onSetupMipLevel=null,this.name=this.config.name;var n,o=I(this.config.nColorAttachments);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=null;this.clearColors=o,this.applyMipViewport_za3lpa$(0),0===this.width&&(this.width=16),0===this.height&&(this.height=16)}function ea(t){var i,n,o;if(this.name=t.name,this.width=t.width,this.height=t.height,this.mipLevels=t.mipLevels,this.drawMipLevels=t.drawMipLevels,this.depthRenderTarget=t.depthRenderTarget,this.colorRenderTarget=t.colorRenderTarget,n=this.depthRenderTarget===aa()&&null!=(i=t.depthAttachment)?new na(i):null,this.depthAttachment=n,this.colorRenderTarget===aa()){var r,s=t.colorAttachments,a=w(j(s,10));for(r=s.iterator();r.hasNext();){var l=r.next();a.add_11rb$(new na(l))}o=a}else o=Nt();if(this.colorAttachments=o,this.nColorAttachments=this.colorAttachments.size,this.colorRenderTarget===aa()&&this.colorAttachments.isEmpty())throw gt("colorAttachments must be configured if colorRenderTarget is TEXTURE");var u=this.colorRenderTarget===la();if(u&&(u=!t.colorAttachments.isEmpty()),u){var p=KN.Log,c=Cz.WARN,h=e.getKClassFromExpression(this).simpleName;c.level>=p.level.level&&p.printer(c,h,"colorAttachments are ignored if colorRenderTarget is RENDER_BUFFER")}if(this.depthRenderTarget===aa()&&null==this.depthAttachment)throw gt("depthAttachment must be configured if depthRenderTarget is TEXTURE");if(this.depthRenderTarget===la()&&null!=t.depthAttachment){var d=KN.Log,f=Cz.WARN,_=e.getKClassFromExpression(this).simpleName;f.level>=d.level.level&&d.printer(f,_,"depthAttachment is ignored if depthRenderTarget is RENDER_BUFFER")}}function ia(){this.name="OffscreenRenderPass",this.width=0,this.height=0,this.mipLevels=1,this.drawMipLevels=!0,this.colorRenderTarget=aa(),this.depthRenderTarget=la(),this.colorAttachments=M(),this.depthAttachment=null}function na(t){this.colorFormat=t.colorFormat,this.minFilter=t.minFilter,this.magFilter=t.magFilter,this.addressModeU=t.addressModeU,this.addressModeV=t.addressModeV,this.depthCompareOp=t.depthCompareOp,this.maxAnisotropy=1,this.providedTexture=t.providedTexture}function oa(){this.colorFormat=Yc(),this.minFilter=Th(),this.magFilter=Th(),this.addressModeU=Mh(),this.addressModeV=Mh(),this.depthCompareOp=pl(),this.providedTexture=null}function ra(t,e){T.call(this),this.name$=t,this.ordinal$=e}function sa(){sa=function(){},zs=new ra("TEXTURE",0),ks=new ra("RENDER_BUFFER",1)}function aa(){return sa(),zs}function la(){return sa(),ks}function ua(t,e){ta.call(this,t,e),this.impl_8be2vx$=new GS(this),this.depthTexture=this.makeDepthAttachmentTex_qnmoqa$_0(),this.colorTextures=this.makeColorAttachmentTexs_o5wgst$_0(),this.copyTargetsColor=M()}function pa(t,e){ta.call(this,t,e),this.impl_8be2vx$=new HS(this),this.depthTexture=this.makeDepthAttachmentTex_17p1u7$_0(),this.colorTextures=this.makeColorAttachmentTexs_gs6cwg$_0(),this.copyTargetsColor=M(),this.onSetupView_3plctr$_0=this.onSetupView_3plctr$_0;var i,n=I(6);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=new Zs(this);if(this.drawQueues=n,this.defaultCubeMapCameraConfig_ubu93h$_0(),e.depthRenderTarget===aa())throw Tt("CubeMapDepthTexture not yet implemented");if(e.colorAttachments.size>1)throw Tt("CubeMap multiple render targets not yet implemented")}function ca(t,e){this.lookAt=t,this.up=e}function ha(t,e,i){T.call(this),this.index=i,this.name$=t,this.ordinal$=e}function da(){da=function(){},Ss=new ha("FRONT",0,0),Cs=new ha("BACK",1,1),Ns=new ha("LEFT",2,2),Es=new ha("RIGHT",3,3),Ts=new ha("UP",4,4),Ps=new ha("DOWN",5,5)}function fa(){return da(),Ss}function _a(){return da(),Cs}function ma(){return da(),Ns}function $a(){return da(),Es}function ya(){return da(),Ts}function va(){return da(),Ps}function ga(){return[fa(),_a(),ma(),$a(),ya(),va()]}function ba(t){var i;el(),this.name=t.name,this.pipelineHash=null,this.pipelineInstanceId=(i=el().instanceId_0,el().instanceId_0=i.inc(),i),this.cullMethod=t.cullMethod,this.blendMode=t.blendMode,this.depthCompareOp=t.depthTest,this.isWriteDepth=t.isWriteDepth,this.lineWidth=t.lineWidth,this.layout=null,this.shaderCode=null;var n,o,r=t.vertexLayout.create(),s=t.descriptorSetLayouts,a=w(j(s,10)),l=0;for(n=s.iterator();n.hasNext();){var u=n.next();a.add_11rb$(u.create_za3lpa$(J((l=(o=l)+1|0,o))))}var p,c=a,h=t.pushConstantRanges,d=w(j(h,10));for(p=h.iterator();p.hasNext();){var f=p.next();d.add_11rb$(f.create())}var _=d;this.layout=new xa(r,c,_),this.shaderCode=t.shaderCodeGenerator(this.layout);var m=this.cullMethod.hashCode(),$={v:new kt(e.Long.fromInt(m))},y=$.v,v=new kt(e.Long.fromInt(71023)),g=new kt(y.data.multiply(v.data)),b=this.depthCompareOp.hashCode(),x=new kt(e.Long.fromInt(b));$.v=new kt(g.data.add(x.data));var z=$.v,k=new kt(e.Long.fromInt(71023)),S=new kt(z.data.multiply(k.data)),C=ot(this.isWriteDepth),N=new kt(e.Long.fromInt(C));$.v=new kt(S.data.add(N.data));var E=$.v,T=new kt(e.Long.fromInt(71023)),P=new kt(E.data.multiply(T.data)),O=ot(this.lineWidth),M=new kt(e.Long.fromInt(O));$.v=new kt(P.data.add(M.data));var A=$.v,I=new kt(e.Long.fromInt(71023)),R=new kt(A.data.multiply(I.data)),L=r.longHash;$.v=new kt(R.data.add(L.data));var D,q,F=$.v,B=new kt(e.Long.fromInt(71023)),U=new kt(F.data.multiply(B.data)),V=this.shaderCode.longHash;for($.v=new kt(U.data.add(V.data)),D=c.iterator();D.hasNext();){var G=D.next(),H=$.v,W=new kt(e.Long.fromInt(71023)),K=new kt(H.data.multiply(W.data)),X=G.longHash;$.v=new kt(K.data.add(X.data))}for(q=_.iterator();q.hasNext();){var Y=q.next(),Z=$.v,Q=new kt(e.Long.fromInt(71023)),tt=new kt(Z.data.multiply(Q.data)),et=Y.longHash;$.v=new kt(tt.data.add(et.data))}this.pipelineHash=$.v}function xa(t,e,i){this.vertices=t,this.descriptorSets=e,this.pushConstantRanges=i}function wa(){this.name="pipeline",this.cullMethod=xl(),this.blendMode=ol(),this.depthTest=dl(),this.isWriteDepth=!0,this.lineWidth=1,this.shaderCodeGenerator_j5ii45$_0=this.shaderCodeGenerator_j5ii45$_0,this.vertexLayout=new _d,this.descriptorSetLayouts=M(),this.pushConstantRanges=M()}function za(){tl=this,this.instanceId_0=Pt}ys.$metadata$={kind:$,simpleName:"NormalLinearDepthMapPass",interfaces:[fs]},As.prototype.getUniformBuffer_61zpoe$=function(t){var i,n,o=this.descriptors;t:do{var r;for(r=o.iterator();r.hasNext();){var s=r.next();if(e.isType(s,Us)&&zt(s.name,t)){n=s;break t}}throw new _t("Collection contains no element matching the predicate.")}while(0);return e.isType(i=n,Us)?i:c()},As.prototype.getTextureSampler_61zpoe$=function(t){var i,n,o=this.descriptors;t:do{var r;for(r=o.iterator();r.hasNext();){var s=r.next();if(e.isType(s,Ds)&&zt(s.name,t)){n=s;break t}}throw new _t("Collection contains no element matching the predicate.")}while(0);return e.isType(i=n,Ds)?i:c()},Is.prototype.unaryPlus_ngusss$=function(t){this.descriptors.add_11rb$(t)},Is.prototype.uniformBuffer_2ydyu8$=function(t,e,i){var n=new Vs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Is.prototype.texture_j3b8s3$=function(t,e,i){var n=new qs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Is.prototype.cubeMap_kh2rdl$=function(t,e,i){var n=new Bs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Is.prototype.create_za3lpa$=function(t){for(var e=this.descriptors.size,i=w(e),n=0;n<e;n++)i.add_11rb$(this.descriptors.get_za3lpa$(n).create_za3lpa$(n));return new As(t,i)},Is.prototype.clear=function(){this.descriptors.clear()},Is.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},As.$metadata$={kind:$,simpleName:"DescriptorSetLayout",interfaces:[]},Ls.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Rs.$metadata$={kind:$,simpleName:"Descriptor",interfaces:[]},Object.defineProperty(Ds.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),qs.prototype.create_za3lpa$=function(t){var i,n=Ws().hashCode(),o=new kt(e.Long.fromInt(n)),r=new kt(e.Long.fromInt(71023)),s=new Ds(this,t,new kt(o.data.multiply(r.data)));return null!=(i=this.onCreate)&&i(s),s},qs.$metadata$={kind:$,simpleName:"Builder",interfaces:[Ls]},Ds.$metadata$={kind:$,simpleName:"TextureSampler",interfaces:[Rs]},Object.defineProperty(Fs.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),Bs.prototype.create_za3lpa$=function(t){var i,n=Ks().hashCode(),o=new kt(e.Long.fromInt(n)),r=new kt(e.Long.fromInt(71023)),s=new Fs(this,t,new kt(o.data.multiply(r.data)));return null!=(i=this.onCreate)&&i(s),s},Bs.$metadata$={kind:$,simpleName:"Builder",interfaces:[Ls]},Fs.$metadata$={kind:$,simpleName:"CubeMapSampler",interfaces:[Rs]},Us.prototype.putTo_l6oshk$=function(t){this.layout_0.putTo_l6oshk$(t),t.flip()},Us.prototype.uniform_ww73n8$=function(t){var i;return null==(i=this.uniforms.get_za3lpa$(t))||e.isType(i,W)?i:c()},Vs.prototype.unaryPlus_wq3w46$=function(t){this.uniforms.add_11rb$(t)},Vs.prototype.create_za3lpa$=function(t){for(var i,n=this.uniforms.size,o=w(n),r=0;r<n;r++)o.add_11rb$(this.uniforms.get_za3lpa$(r)());var s,a=o,l=Xs().hashCode(),u=new kt(e.Long.fromInt(l)),p=new kt(e.Long.fromInt(71023)),c={v:new kt(u.data.multiply(p.data))};for(s=a.iterator();s.hasNext();){var h=s.next(),d=c.v,f=new kt(e.Long.fromInt(71023)),_=new kt(d.data.multiply(f.data)),m=e.getKClassFromExpression(h).hashCode(),$=new kt(e.Long.fromInt(m));c.v=new kt(_.data.add($.data));var y=c.v,v=new kt(e.Long.fromInt(71023)),g=new kt(y.data.multiply(v.data)),b=ot(h.name),x=new kt(e.Long.fromInt(b));c.v=new kt(g.data.add(x.data))}var z=new Us(this,t,a,c.v);return null!=(i=this.onCreate)&&i(z),z},Vs.$metadata$={kind:$,simpleName:"Builder",interfaces:[Ls]},Us.$metadata$={kind:$,simpleName:"UniformBuffer",interfaces:[Rs]},Gs.$metadata$={kind:$,simpleName:"DescriptorType",interfaces:[T]},Gs.values=function(){return[Ws(),Ks(),Xs()]},Gs.valueOf_61zpoe$=function(t){switch(t){case"IMAGE_SAMPLER":return Ws();case"CUBE_IMAGE_SAMPLER":return Ks();case"UNIFORM_BUFFER":return Xs();default:P("No enum constant de.fabmax.kool.pipeline.DescriptorType."+t)}},Object.defineProperty(Ys.prototype,"mesh",{configurable:!0,get:function(){return null==this.mesh_aolzlu$_0?pt("mesh"):this.mesh_aolzlu$_0},set:function(t){this.mesh_aolzlu$_0=t}}),Ys.prototype.captureMatrices=function(){this.modelMat.set_d4zu6l$(this.mesh.modelMat),this.viewMat.set_d4zu6l$(this.renderPass.camera.view),this.projMat.set_d4zu6l$(this.renderPass.camera.proj),this.renderPass.camera.viewProj.mul_u47j3u$(this.mesh.modelMat,this.mvpMatD_0),this.mvpMat.set_d4zu6l$(this.mvpMatD_0)},Ys.$metadata$={kind:$,simpleName:"DrawCommand",interfaces:[]},Object.defineProperty(Zs.prototype,"commands",{configurable:!0,get:function(){return this.mutCommands_0}}),Zs.prototype.clear=function(){this.commandPool_0.addAll_brywnq$(this.mutCommands_0),this.mutCommands_0.clear()},Zs.prototype.addMesh_sbx4mf$=function(t,e){var i;if(this.meshFilter(t)){var n=this.commandPool_0.isEmpty()?new Ys(this.renderPass):this.commandPool_0.removeAt_za3lpa$(bt(this.commandPool_0));n.mesh=t,n.pipeline=t.getPipeline_aemszp$(e),n.captureMatrices(),this.mutCommands_0.add_11rb$(n),i=n}else i=null;return i},Zs.$metadata$={kind:$,simpleName:"DrawQueue",interfaces:[]},Qs.$metadata$={kind:st,simpleName:"LoadedTexture",interfaces:[]},Object.defineProperty(ta.prototype,"width",{configurable:!0,get:function(){return this.width_6fsav1$_0},set:function(t){this.width_6fsav1$_0=t}}),Object.defineProperty(ta.prototype,"height",{configurable:!0,get:function(){return this.height_4loxs4$_0},set:function(t){this.height_4loxs4$_0=t}}),Object.defineProperty(ta.prototype,"camera",{configurable:!0,get:function(){return this.camera_et6fa$_0},set:function(t){this.camera_et6fa$_0=t}}),ta.prototype.getColorTexProps_za3lpa$=function(t){return void 0===t&&(t=0),this.config.colorAttachments.get_za3lpa$(t).getTextureProps_6taknv$(this.config.mipLevels>1)},ta.prototype.getMipWidth_za3lpa$=function(t){return t<=0?this.width:this.width>>t},ta.prototype.getMipHeight_za3lpa$=function(t){return t<=0?this.height:this.height>>t},ta.prototype.applyMipViewport_za3lpa$=function(t){this.viewport.set_tjonv8$(0,0,this.getMipWidth_za3lpa$(t),this.getMipHeight_za3lpa$(t))},ta.prototype.resize_w70mbp$=function(t,i,n){var o=KN.Log,r=Cz.DEBUG,s=e.getKClassFromExpression(this).simpleName;if(r.level>=o.level.level&&o.printer(r,s,"OffscreenPass "+Ct(this.name)+" resized to "+t+" x "+i),0===this.config.width&&0===this.config.height)this.applySize_w70mbp$(t,i,n),this.applyMipViewport_za3lpa$(0);else{var a=KN.Log,l=Cz.ERROR,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"OffscreenRenderPass "+Ct(this.name)+" cannot be resized: Size is fixed to "+this.config.width+" x "+this.config.height)}},ta.prototype.applySize_w70mbp$=function(t,e,i){this.width=t,this.height=e},ea.$metadata$={kind:$,simpleName:"Config",interfaces:[]},ia.prototype.setDynamicSize=function(){this.width=0,this.height=0},ia.prototype.setSize_vux9f0$=function(t,e){this.width=t,this.height=e},ia.prototype.addMipLevels_ydzd23$=function(t,e,i){void 0===t&&(t=this.width),void 0===e&&(e=this.height),void 0===i&&(i=!0),this.mipLevels=Un(t,e),this.drawMipLevels=i},ia.prototype.clearDepthTexture=function(){this.depthRenderTarget=la(),this.depthAttachment=null},ia.prototype.setDepthTexture_6taknv$=function(t){this.depthRenderTarget=aa();var e=new oa;t?(e.minFilter=Th(),e.magFilter=Th(),e.depthCompareOp=dl()):(e.minFilter=Eh(),e.magFilter=Eh(),e.depthCompareOp=pl()),this.depthAttachment=e},ia.prototype.clearColorTexture=function(){this.colorRenderTarget=la(),this.colorAttachments.clear()},ia.prototype.addColorTexture_farcsl$=function(t){this.colorRenderTarget=aa();var e=this.colorAttachments,i=new oa;i.colorFormat=t,e.add_11rb$(i)},ia.prototype.addColorTexture_1yho43$=function(t){this.colorRenderTarget=aa();var e=this.colorAttachments,i=new oa;t(i),e.add_11rb$(i)},ia.$metadata$={kind:$,simpleName:"ConfigBuilder",interfaces:[]},Object.defineProperty(na.prototype,"isProvided",{configurable:!0,get:function(){return null!=this.providedTexture}}),na.prototype.getTextureProps_6taknv$=function(t){return new Sh(this.colorFormat,this.addressModeU,this.addressModeV,Mh(),this.minFilter,this.magFilter,t,this.maxAnisotropy)},na.$metadata$={kind:$,simpleName:"TextureAttachmentConfig",interfaces:[]},oa.$metadata$={kind:$,simpleName:"TextureAttachmentConfigBuilder",interfaces:[]},ra.$metadata$={kind:$,simpleName:"RenderTarget",interfaces:[T]},ra.values=function(){return[aa(),la()]},ra.valueOf_61zpoe$=function(t){switch(t){case"TEXTURE":return aa();case"RENDER_BUFFER":return la();default:P("No enum constant de.fabmax.kool.pipeline.OffscreenRenderPass.RenderTarget."+t)}},ta.$metadata$={kind:$,simpleName:"OffscreenRenderPass",interfaces:[Cl]},Object.defineProperty(ua.prototype,"colorTexture",{configurable:!0,get:function(){return this.colorTextures.isEmpty()?null:this.colorTextures.get_za3lpa$(0)}}),ua.prototype.copyColor=function(){var t=new eh(this.getColorTexProps_za3lpa$(),Ct(this.name)+"-copy-"+this.copyTargetsColor.size);return this.copyTargetsColor.add_11rb$(t),t},ua.prototype.dispose_aemszp$=function(t){var e;ta.prototype.dispose_aemszp$.call(this,t),this.impl_8be2vx$.dispose_aemszp$(t),t.runDelayed_hd6vpk$(3,(e=this,function(t){var i,n;null==(null!=(i=e.config.depthAttachment)?i.providedTexture:null)&&null!=(n=e.depthTexture)&&n.dispose();var o,r,a=0;for(o=e.colorTextures.iterator();o.hasNext();){var l=o.next(),u=e,p=J((a=(r=a)+1|0,r));u.config.colorAttachments.get_za3lpa$(p).isProvided||l.dispose()}return s}))},ua.prototype.applySize_w70mbp$=function(t,e,i){ta.prototype.applySize_w70mbp$.call(this,t,e,i),this.impl_8be2vx$.applySize_w70mbp$(t,e,i)},ua.prototype.makeColorAttachmentTexs_o5wgst$_0=function(){var t,e,i=this.config.colorAttachments,n=w(j(i,10)),o=0;for(t=i.iterator();t.hasNext();){var r,s=t.next(),a=n.add_11rb$,l=J((o=(e=o)+1|0,e));if(s.isProvided)r=x(s.providedTexture);else{var u=Ct(this.name)+"_color["+l+"]";r=new eh(s.getTextureProps_6taknv$(this.config.mipLevels>1),u)}a.call(n,r)}return n},ua.prototype.makeDepthAttachmentTex_qnmoqa$_0=function(){var t,e;if(null!=(t=this.config.depthAttachment)){var i;if(t.isProvided)i=x(t.providedTexture);else{var n=Ct(this.name)+"_depth";i=new eh(t.getTextureProps_6taknv$(this.config.mipLevels>1),n)}e=i}else e=null;return e},ua.$metadata$={kind:$,simpleName:"OffscreenRenderPass2d",interfaces:[ta]},Object.defineProperty(pa.prototype,"colorTexture",{configurable:!0,get:function(){return this.colorTextures.isEmpty()?null:this.colorTextures.get_za3lpa$(0)}}),Object.defineProperty(pa.prototype,"onSetupView",{configurable:!0,get:function(){return null==this.onSetupView_3plctr$_0?pt("onSetupView"):this.onSetupView_3plctr$_0},set:function(t){this.onSetupView_3plctr$_0=t}}),pa.prototype.copyColor=function(){var t=new kh(this.getColorTexProps_za3lpa$(),Ct(this.name)+"-"+this.copyTargetsColor.size);return this.copyTargetsColor.add_11rb$(t),t},pa.prototype.collectDrawCommands_aemszp$=function(t){var e,i;for(e=ga(),i=0;i!==e.length;++i){var n=e[i];this.drawQueue=this.drawQueues[n.index],this.onSetupView(n,t),ta.prototype.collectDrawCommands_aemszp$.call(this,t)}},pa.prototype.dispose_aemszp$=function(t){var e;ta.prototype.dispose_aemszp$.call(this,t),this.impl_8be2vx$.dispose_aemszp$(t),t.runDelayed_hd6vpk$(3,(e=this,function(t){var i,n;null==(null!=(i=e.config.depthAttachment)?i.providedTexture:null)&&null!=(n=e.depthTexture)&&n.dispose();var o,r,a=0;for(o=e.colorTextures.iterator();o.hasNext();){var l=o.next(),u=e,p=J((a=(r=a)+1|0,r));null==u.config.colorAttachments.get_za3lpa$(p).providedTexture&&l.dispose()}return s}))},pa.prototype.applySize_w70mbp$=function(t,e,i){ta.prototype.applySize_w70mbp$.call(this,t,e,i),this.impl_8be2vx$.applySize_w70mbp$(t,e,i)},pa.prototype.makeColorAttachmentTexs_gs6cwg$_0=function(){var t,i,n=this.config.colorAttachments,o=w(j(n,10)),r=0;for(t=n.iterator();t.hasNext();){var s,a,l=t.next(),u=o.add_11rb$,p=J((r=(i=r)+1|0,i));if(l.isProvided)s=e.isType(a=l.providedTexture,kh)?a:c();else{var h=Ct(this.name)+"_color["+p+"]";s=new kh(l.getTextureProps_6taknv$(this.config.mipLevels>1),h)}u.call(o,s)}return o},pa.prototype.makeDepthAttachmentTex_17p1u7$_0=function(){var t,i;if(null!=(t=this.config.depthAttachment)){var n,o;if(t.isProvided)n=e.isType(o=t.providedTexture,kh)?o:c();else{var r=Ct(this.name)+"_depth";n=new kh(t.getTextureProps_6taknv$(this.config.mipLevels>1),r)}i=n}else i=null;return i},pa.prototype.defaultCubeMapCameraConfig_ubu93h$_0=function(){var t,i,n=Et([ft(fa(),new ca(new Co(0,0,1),To().NEG_Y_AXIS)),ft(_a(),new ca(new Co(0,0,-1),To().NEG_Y_AXIS)),ft(ma(),new ca(new Co(-1,0,0),To().NEG_Y_AXIS)),ft($a(),new ca(new Co(1,0,0),To().NEG_Y_AXIS)),ft(ya(),new ca(new Co(0,1,0),To().Z_AXIS)),ft(va(),new ca(new Co(0,-1,0),To().NEG_Z_AXIS))]),o=this.camera;e.isType(o,Ed)&&(o.position.set_czzhiu$(To().ZERO),o.fovY=90,o.clipNear=.1,o.clipFar=10,o.projCorrectionMode=Cd()),this.onSetupView=(t=n,i=this,function(e,n){var o=x(t.get_11rb$(e));return i.camera.lookAt.set_czzhiu$(o.lookAt),i.camera.up.set_czzhiu$(o.up),s})},ca.$metadata$={kind:$,simpleName:"ViewConfig",interfaces:[]},ha.$metadata$={kind:$,simpleName:"ViewDirection",interfaces:[T]},ha.values=ga,ha.valueOf_61zpoe$=function(t){switch(t){case"FRONT":return fa();case"BACK":return _a();case"LEFT":return ma();case"RIGHT":return $a();case"UP":return ya();case"DOWN":return va();default:P("No enum constant de.fabmax.kool.pipeline.OffscreenRenderPassCube.ViewDirection."+t)}},pa.$metadata$={kind:$,simpleName:"OffscreenRenderPassCube",interfaces:[ta]},ba.prototype.equals=function(t){var i;return this===t||!!e.isType(t,ba)&&(null!=(i=this.pipelineHash)?i.equals(t.pipelineHash):null)},ba.prototype.hashCode=function(){return this.pipelineHash.hashCode()},xa.$metadata$={kind:$,simpleName:"Layout",interfaces:[]},Object.defineProperty(wa.prototype,"shaderCodeGenerator",{configurable:!0,get:function(){return null==this.shaderCodeGenerator_j5ii45$_0?pt("shaderCodeGenerator"):this.shaderCodeGenerator_j5ii45$_0},set:function(t){this.shaderCodeGenerator_j5ii45$_0=t}}),wa.prototype.create=function(){return new ba(this)},wa.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},za.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ka,Sa,Ca,Na,Ea,Ta,Pa,Oa,Ma,ja,Aa,Ia,Ra,La,Da,qa,Fa,Ba,Ua,Va,Ga,Ha,Wa,Ka,Xa,Ya,Za,Ja,Qa,tl=null;function el(){return null===tl&&new za,tl}function il(t,e){T.call(this),this.name$=t,this.ordinal$=e}function nl(){nl=function(){},ka=new il("DISABLED",0),Sa=new il("BLEND_ADDITIVE",1),Ca=new il("BLEND_MULTIPLY_ALPHA",2),Na=new il("BLEND_PREMULTIPLIED_ALPHA",3)}function ol(){return nl(),ka}function rl(){return nl(),Sa}function sl(){return nl(),Ca}function al(){return nl(),Na}function ll(t,e){T.call(this),this.name$=t,this.ordinal$=e}function ul(){ul=function(){},Ea=new ll("DISABLED",0),Ta=new ll("ALWAYS",1),Pa=new ll("NEVER",2),Oa=new ll("LESS",3),Ma=new ll("LESS_EQUAL",4),ja=new ll("GREATER",5),Aa=new ll("GREATER_EQUAL",6),Ia=new ll("EQUAL",7),Ra=new ll("NOT_EQUAL",8)}function pl(){return ul(),Ea}function cl(){return ul(),Ta}function hl(){return ul(),Pa}function dl(){return ul(),Oa}function fl(){return ul(),Ma}function _l(){return ul(),ja}function ml(){return ul(),Aa}function $l(){return ul(),Ia}function yl(){return ul(),Ra}function vl(t,e){T.call(this),this.name$=t,this.ordinal$=e}function gl(){gl=function(){},La=new vl("DEFAULT",0),Da=new vl("CULL_BACK_FACES",1),qa=new vl("CULL_FRONT_FACES",2),Fa=new vl("NO_CULLING",3)}function bl(){return gl(),La}function xl(){return gl(),Da}function wl(){return gl(),qa}function zl(){return gl(),Fa}function kl(t,e,i){this.longHash=e,this.pushConstants=i,this.name=t.name,this.instanceName=t.instanceName,this.stages=K$(t.stages),this.layout_0=new Uc(this.pushConstants),this.size=this.layout_0.size,this.buffer_0=jN(this.size),this.onUpdate=t.onUpdate}function Sl(){this.name="PushConstants",this.instanceName=null,this.stages=ct(),this.pushConstants=M(),this.onUpdate=null}function Cl(t){this.drawNode=t,this.name=null,this.dependencies=M(),this.viewport=new LS(0,0,0,0),this.lighting=null,this.isUpdateDrawNode=!0,this.updateEvent_2t7tkj$_0=null;var e,i=I(1);e=i.length-1|0;for(var n=0;n<=e;n++)i[n]=new X$(.15,.15,.15,1);this.clearColors_ynhttt$_0=i,this.clearDepth=!0,this.drawQueue_mxdtqn$_0=new Zs(this),this.onBeforeCollectDrawCommands=M(),this.onAfterCollectDrawCommands=M(),this.onAfterDraw=M()}function Nl(t,e){this.renderPass=t,this.ctx=e}function El(t){Cl.call(this,t),this.scene=t,this.useWindowViewport=!0,this.name="onscreen/"+Ct(this.scene.name),this.lighting=this.scene.lighting}function Tl(){this.onPipelineSetup=M(),this.onPipelineCreated=M()}function Pl(){}function Ol(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Ml(){Ml=function(){},Ba=new Ol("Y_UP",0),Ua=new Ol("Y_DOWN",1)}function jl(){return Ml(),Ba}function Al(){return Ml(),Ua}function Il(t){qu.call(this,"colorAlphaNode_"+t.nextNodeId,t),this.inColor=new Fu(new Su(J$().MAGENTA),null),this.inAlpha=new Fu(new wu(1),null),this.outAlphaColor=new Fu(new mu(this.name+"_outColor"),this)}function Rl(t){qu.call(this,"colorPreMult_"+t.nextNodeId,t),this.inColor=new Fu(new Su(J$().MAGENTA)),this.outColor=new Fu(new mu(this.name+"_outColor"),this)}function Ll(t){qu.call(this,"gamma_"+t.nextNodeId,t),this.inColor=new Fu(new Su(J$().MAGENTA)),this.inGamma=new Fu(new wu(1/2.2)),this.outColor=new Fu(new mu(this.name+"_outColor"),this)}function Dl(t){qu.call(this,"hdrToLdr_"+t.nextNodeId,t),this.inColor=new Fu(new Su(J$().MAGENTA)),this.inGamma=new Fu(new wu(2.2)),this.outColor=new Fu(new mu(this.name+"_outColor"),this)}function ql(t,e){void 0===e&&(e=1),qu.call(this,"fragmentColorOut",t,Yp().mask),this.channels=e,this.alpha=null;var i,n=I(this.channels);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=new Fu(new Su(J$().MAGENTA));this.inColors=n}function Fl(t){qu.call(this,"fragmentDepthOut",t,Yp().mask),this.inDepth=new Fu(new wu(.5))}function Bl(t){qu.call(this,"discardAlpha_"+t.nextNodeId,t,Yp().mask),this.inAlpha=new Fu(new wu(1)),this.inAlphaCutoff=new Fu(new wu(0))}function Ul(t,e){void 0===e&&(e=4),qu.call(this,"lightNd_"+t.nextNodeId,t),this.maxLights=e,this.uLightCnt_0=new ad("uLightCount"),this.uPositions_0=new nd("uLightPositions",this.maxLights),this.uColors_0=new nd("uLightColors",this.maxLights),this.uDirections_0=new nd("uLightDirections",this.maxLights);var i,n=I(this.maxLights);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=new Fu(new wu(1));this.inShadowFacs=n,this.inFragPos=new Fu(new ku(To().ZERO)),this.inSpotInnerAngle=new Fu(new wu(.8)),this.outLightCount=new Fu(new yu(this.uLightCnt_0.name),this),this.outFragToLightDirection=new Fu(new $u(this.name+"_outLightDirs"),this),this.outRadiance=new Fu(new $u(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function Vl(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uPositions_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uColors_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uDirections_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uLightCnt_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.encodeLightSetup_0(i),s}}(t),s}}function Gl(t){qu.call(this,"lightUniformDataNd_"+t.nextNodeId,t),this.light=null,this.uPosition_0=new Jh("u"+this.name+"_pos"),this.uColor_0=new Jh("u"+this.name+"_color"),this.uDirection_0=new Jh("u"+this.name+"_dir"),this.outLightPos=new Fu(new mu(this.uPosition_0.name),this),this.outLightColor=new Fu(new mu(this.uColor_0.name),this),this.outLightDir=new Fu(new mu(this.uDirection_0.name),this)}function Hl(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uPosition_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uColor_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uDirection_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.encodeLightSetup_0(),s}}(t),s}}function Wl(t){qu.call(this,"lightNd_"+t.nextNodeId,t),this.inLightPos=new Fu(new Su(tr().ZERO)),this.inLightColor=new Fu(new Su(tr().ZERO)),this.inLightDir=new Fu(new Su(new Zo(1,0,0,60))),this.inShaodwFac=new Fu(new wu(1)),this.inFragPos=new Fu(new ku(To().ZERO)),this.inSpotInnerAngle=new Fu(new wu(.8)),this.outLightCount=new Fu(new Cu(1),this),this.outFragToLightDirection=new Fu(new _u(this.name+"_outLightDirs"),this),this.outRadiance=new Fu(new _u(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function Kl(t){qu.call(this,"pointLightNd_"+t.nextNodeId,t),this.inLightPos=new Fu(new Su(tr().ZERO)),this.inLightColor=new Fu(new Su(tr().ZERO)),this.inShadowFac=new Fu(new wu(1)),this.inFragPos=new Fu(new ku(To().ZERO)),this.outLightCount=new Fu(new Cu(1),this),this.outFragToLightDirection=new Fu(new _u(this.name+"_outLightDirs"),this),this.outRadiance=new Fu(new _u(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function Xl(t){qu.call(this,"spotLightNd_"+t.nextNodeId,t),this.inLightPos=new Fu(new Su(tr().ZERO)),this.inLightColor=new Fu(new Su(tr().ZERO)),this.inLightDir=new Fu(new Su(new Zo(1,0,0,60))),this.inShadowFac=new Fu(new wu(1)),this.inFragPos=new Fu(new ku(To().ZERO)),this.inSpotInnerAngle=new Fu(new wu(.8)),this.outLightCount=new Fu(new Cu(1),this),this.outFragToLightDirection=new Fu(new _u(this.name+"_outLightDirs"),this),this.outRadiance=new Fu(new _u(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function Yl(t){qu.call(this,"Unlit Material",t,Yp().mask),this.inColor=new Fu(new Su(J$().MAGENTA)),this.outColor=new Fu(new mu("unlitMat_outColor"),this)}function Zl(t){qu.call(this,"Phong Material",t,Yp().mask),this.inAlbedo=new Fu(new Su(J$().MAGENTA)),this.inNormal=new Fu(new ku(To().Z_AXIS)),this.inFragPos=new Fu(new ku(To().ZERO)),this.inCamPos=new Fu(new ku(To().ZERO)),this.inLightCount=new Fu(new Cu(1)),this.inFragToLight=new Fu(new ku(To().Y_AXIS)),this.inRadiance=new Fu(new ku(Po(1))),this.inAmbient=new Fu(new ku(Po(.22))),this.inShininess=new Fu(new wu(20)),this.inSpecularIntensity=new Fu(new wu(1)),this.outColor=new Fu(new mu("phongMat_outColor"),this),this.lightBacksides=!1}function Jl(t,e,i){qu.call(this,"pbrMaterial",i,Yp().mask),this.reflectionMap=t,this.brdfLut=e,this.inAlbedo=new Fu(new Su(J$().MAGENTA)),this.inEmissive=new Fu(new Su(J$().BLACK)),this.inNormal=new Fu(new ku(To().Z_AXIS)),this.inFragPos=new Fu(new ku(To().ZERO)),this.inViewDir=new Fu(new ku(To().ZERO)),this.inMetallic=new Fu(new wu(0)),this.inRoughness=new Fu(new wu(.1)),this.inAmbientOccl=new Fu(new wu(1)),this.inLightCount=new Fu(new Cu(0)),this.inFragToLight=new Fu(new ku(To().Y_AXIS)),this.inRadiance=new Fu(new ku(Po(0))),this.inIrradiance=new Fu(new ku(Po(.03))),this.inReflectionStrength=new Fu(new wu(1)),this.inReflectionColor=new Fu(new ku(To().ZERO)),this.inReflectionWeight=new Fu(new wu(0)),this.outColor=new Fu(new mu("pbrMat_outColor"),this),this.lightBacksides=!1}function Ql(t){qu.call(this,"pbrLightNode",t,Yp().mask),this.inAlbedo=new Fu(new Su(J$().MAGENTA)),this.inNormal=new Fu(new ku(To().Z_AXIS)),this.inFragPos=new Fu(new ku(To().ZERO)),this.inCamPos=new Fu(new ku(To().ZERO)),this.inMetallic=new Fu(new wu(0)),this.inRoughness=new Fu(new wu(.1)),this.inFragToLight=new Fu(new ku(To().Y_AXIS)),this.inRadiance=new Fu(new ku(Po(1))),this.inIrradiance=new Fu(new ku(Po(.03))),this.outColor=new Fu(new mu("pbrLight_outColor"),this),this.lightBacksides=!1}function tu(t,e){qu.call(this,"multiply_"+e.nextNodeId,e),this.left_8p0ptp$_0=new Fu(new ku(To().X_AXIS)),this.right=new Fu(new wu(1)),this.output_q2fkhv$_0=new Fu(new _u(t+"_out"),this)}function eu(t){tu.call(this,"add_"+t.nextNodeId,t)}function iu(t){tu.call(this,"add_"+t.nextNodeId,t)}function nu(t){tu.call(this,"divide_"+t.nextNodeId,t)}function ou(t){tu.call(this,"multiply_"+t.nextNodeId,t)}function ru(t){tu.call(this,"mix_"+t.nextNodeId,t),this.mixFac=new Fu(new wu(.5))}function su(t){qu.call(this,"vecFromColor_"+t.nextNodeId,t),this.input=new Fu(new ku(To().X_AXIS)),this.output=new Fu(new _u(this.name+"_out"),this)}function au(t){qu.call(this,"dist_"+t.nextNodeId,t),this.inA=new Fu(new ku(To().ZERO)),this.inB=new Fu(new ku(To().ZERO)),this.output=new Fu(new du(this.name+"_out"),this)}function lu(t){qu.call(this,"normalize_"+t.nextNodeId,t),this.input=new Fu(new ku(To().X_AXIS)),this.output=new Fu(new _u(this.name+"_out"),this)}function uu(t){qu.call(this,"viewDir_"+t.nextNodeId,t),this.inCamPos=new Fu(new ku(To().Z_AXIS)),this.inWorldPos=new Fu(new ku(To().ZERO)),this.output=new Fu(new _u(this.name+"_out"),this)}function pu(t){qu.call(this,"reflect_"+t.nextNodeId,t),this.inDirection=new Fu(new ku(To().X_AXIS)),this.inNormal=new Fu(new ku(To().Y_AXIS)),this.outDirection=new Fu(new _u(this.name+"_out"),this)}function cu(t){qu.call(this,"refract_"+t.nextNodeId,t),this.inDirection=new Fu(new ku(To().X_AXIS)),this.inNormal=new Fu(new ku(To().Y_AXIS)),this.inIor=new Fu(new wu(1.4)),this.outDirection=new Fu(new _u(this.name+"_out"),this)}function hu(t,e,i){void 0===i&&(i=!1),this.name=t,this.type=e,this.isArray=i}function du(t){hu.call(this,t,Qr())}function fu(t){hu.call(this,t,ts())}function _u(t){hu.call(this,t,es())}function mu(t){hu.call(this,t,is())}function $u(t){hu.call(this,t,es(),!0)}function yu(t){hu.call(this,t,ns())}function vu(t){hu.call(this,t,os())}function gu(t){hu.call(this,t,rs())}function bu(t){hu.call(this,t,ss())}function xu(t){hu.call(this,t,us())}function wu(t){du.call(this,"_"),this.value=t}function zu(t){fu.call(this,"_"),this.value=t}function ku(t){_u.call(this,"_"),this.value=t}function Su(t){mu.call(this,"_"),this.value=t}function Cu(t){yu.call(this,"_"),this.value=t}function Nu(t){vu.call(this,"_"),this.value=t}function Eu(t){gu.call(this,"_"),this.value=t}function Tu(t){bu.call(this,"_"),this.value=t}function Pu(){}function Ou(t,e,i,n){void 0===n&&(n=1),this.location=t,this.variable=e,this.isFlat=i,this.locationInc=n}function Mu(t,e){this.model=t,this.stage=e,this.descriptorSet=new Is,this.pushConstants=new Sl,this.inputs=M(),this.mutOutputs_rh28ou$_0=M(),this.mutNodes=M(),this.nextNodeId_bjjntk$_0=1}function ju(t){Mu.call(this,t,Hp()),this.requiredVertexAttributes=ct(),this.requiredInstanceAttributes=ct(),this.positionOutput=new Fu(new Su(tr().ZERO),null)}function Au(t){Mu.call(this,t,Yp())}function Iu(t){void 0===t&&(t=""),this.modelInfo=t,this.stages=Et([ft(Hp(),new ju(this)),ft(Yp(),new Au(this))]),this.dumpCode=!1}function Ru(t){this.stage=t}function Lu(t){this.$outer=t,Ru.call(this,this.$outer.vertexStageGraph)}function Du(t){this.$outer=t,Ru.call(this,this.$outer.fragmentStageGraph)}function qu(t,e,i){var n,o;void 0===i&&(i=Zp().mask),this.name=t,this.graph=e,this.allowedStages=i,this.dependencies=ct(),n=(o=this.graph).nextNodeId,o.nextNodeId=n+1|0,this.nodeId=n}function Fu(t,e){void 0===e&&(e=null),this.variable=t,this.node=e}function Bu(){this.lightIndex=0,this.depthMap_25rtms$_0=null}function Uu(t,e,i){Bu.call(this),this.ifPosLightSpace_0=new Ap("posLightSpace_"+e.nextNodeId,e,i),this.vertexNode=new Vu(t,e),this.fragmentNode=new Hu(t,i),this.lightIndex=t.lightIndex,e.addNode_j0v1fw$(this.ifPosLightSpace_0.vertexNode),i.addNode_j0v1fw$(this.ifPosLightSpace_0.fragmentNode),this.ifPosLightSpace_0.input=this.vertexNode.outPosLightSpace,this.fragmentNode.inPosLightSpace=this.ifPosLightSpace_0.output}function Vu(t,e){qu.call(this,"lightSpaceTf_"+e.nextNodeId,e),this.shadowMap=t,this.uShadowMapVP=new rd(this.name+"_shadowMapVP"),this.inWorldPos=new Fu(new ku(To().ZERO)),this.outPosLightSpace=new Fu(new mu(this.name+"_posLightSpace"),this)}function Gu(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uShadowMapVP}}(t)),e.onUpdate=function(t){return function(e,i){return t.uShadowMapVP.value.set_d4zu6l$(t.shadowMap.lightViewProjMat),s}}(t),s}}function Hu(t,e){qu.call(this,"shadowMap_"+e.nextNodeId,e,Yp().mask),this.depthMap=null,this.inDepthOffset=new Fu(new wu(t.optimizeForDirectionalLight?-.001:-.005)),this.inPosLightSpace=new Fu(new Su(tr().ZERO)),this.outShadowFac=new Fu(new du(this.name+"_shadowFac"),this),this.useDithering=!1}function Wu(t,e,i){Bu.call(this),this.shadowMap=t,this.vertexGraph=e,this.fragmentGraph=i,this.inViewPosition=new Fu(new ku(To().ZERO)),this.vertexNode=new Xu(this.shadowMap,this.vertexGraph),this.fragmentNode=new Zu(this.shadowMap,this.fragmentGraph),this.helperNd_0=new Ku(this,this.vertexGraph),this.posLightSpace_0=new Fu(new mu("ifPosLightSpace_"+this.vertexGraph.nextNodeId+"["+this.shadowMap.numCascades+"]")),this.ifViewZ_0=new Fu(new du("outViewZ_"+this.helperNd_0.nodeId)),this.lightIndex=this.shadowMap.lightIndex,this.vertexGraph.addNode_j0v1fw$(this.helperNd_0),this.fragmentNode.inPosLightSpace=this.posLightSpace_0,this.fragmentNode.inViewZ=this.ifViewZ_0}function Ku(t,e){this.$outer=t,qu.call(this,"cascadedShadowHelper_"+e.nextNodeId,e)}function Xu(t,e){qu.call(this,"lightSpaceTf_"+e.nextNodeId,e),this.shadowMap=t,this.uShadowMapVP=new sd(this.name+"_shadowMapVPs",this.shadowMap.numCascades),this.inWorldPos=new Fu(new ku(To().ZERO)),this.outPosLightSpace=new Fu(new mu(this.name+"_posLightSpace["+this.shadowMap.numCascades+"]"),this)}function Yu(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uShadowMapVP}}(t)),e.onUpdate=function(t){return function(e,i){var n;n=t.shadowMap.numCascades;for(var o=0;o<n;o++)t.uShadowMapVP.value[o].set_d4zu6l$(t.shadowMap.cascades[o].lightViewProjMat);return s}}(t),s}}function Zu(t,e){qu.call(this,"cascadedShadowMap_"+e.nextNodeId,e,Yp().mask),this.shadowMap=t,this.uViewSpaceRanges_0=new td("uClipSpaceRanges_"+this.name,this.shadowMap.numCascades),this.depthMap=null,this.inDepthOffset=new Fu(new wu(-.0025)),this.inPosLightSpace=new Fu(new Su(tr().ZERO)),this.inViewZ=new Fu(new wu(0)),this.outShadowFac=new Fu(new du(this.name+"_shadowFac"),this),this.useDithering=!1}function Ju(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewSpaceRanges_0}}(t)),e.onUpdate=function(t){return function(e,i){var n;n=t.shadowMap.numCascades;for(var o=0;o<n;o++)t.uViewSpaceRanges_0.value[o]=t.shadowMap.viewSpaceRanges[o];return s}}(t),s}}function Qu(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),qu.call(this,"vec3MatTransform",t),this.w=e,this.invert=i,this.inMat=null,this.inVec=new Fu(new ku(To().ZERO)),this.outVec3=new Fu(new _u("vec3MatTransform"+this.nodeId+"_out"),this)}function tp(t,e){void 0===e&&(e=1),qu.call(this,"vec4MatTransform",t),this.w=e,this.inMat=null,this.inVec=new Fu(new ku(To().ZERO)),this.outVec4=new Fu(new mu("vec4MatTransform"+this.nodeId+"_out"),this)}function ep(t,e){qu.call(this,"skinTransform_"+t.nextNodeId,t),this.inJoints=new Fu(new Tu(Sr().ZERO)),this.inWeights=new Fu(new Su(tr().X_AXIS)),this.uJointTransforms=new sd("uJointTransforms",e),this.outJointMat=new Fu(new xu(this.name+"_outMat"),this)}function ip(t){return function(e){var i=e.stages,n=t.graph.stage;return i.add_11rb$(n),e.unaryPlus_wq3w46$(function(t){return function(){return t.uJointTransforms}}(t)),e.onUpdate=function(t){return function(e,i){var n;if(null!=(n=i.mesh.skin)){var o,r=t,a=n.nodes.size,l=r.uJointTransforms.length;o=A.min(a,l);for(var u=0;u<o;u++){var p=n.nodes.get_za3lpa$(u);r.uJointTransforms.value[u].set_d4zu6j$(p.jointTransform)}}return s}}(t),s}}function np(t){qu.call(this,"UboPremultipliedMvp",t),this.uMvp=new rd("modelViewProj"),this.outMvpMat=new Fu(new xu(this.uMvp.name),this),this.visibleIn_0=Rt([t.stage])}function op(t){return function(e){return xt(e.stages,t.visibleIn_0),e.unaryPlus_wq3w46$(function(t){return function(){return t.uMvp}}(t)),e.onUpdate=function(t){return function(e,i){return t.uMvp.value.set_d4zu6j$(i.mvpMat),s}}(t),s}}function rp(t,e){this.$outer=t,qu.call(this,"UboPremultipliedMvp.copy",e),this.outMvpMat=new Fu(new xu(this.$outer.uMvp.name),this)}function sp(t){qu.call(this,"UboMvp",t),this.uModelMat=new rd("uModelMat"),this.uViewMat=new rd("uViewMat"),this.uProjMat=new rd("uProjMat"),this.uCamPos=new Jh("uCamPos"),this.uViewport=new Jh("uViewport"),this.outModelMat=new Fu(new xu(this.uModelMat.name),this),this.outViewMat=new Fu(new xu(this.uViewMat.name),this),this.outProjMat=new Fu(new xu(this.uProjMat.name),this),this.outCamPos=new Fu(new mu(this.uCamPos.name),this),this.outViewport=new Fu(new mu(this.uViewport.name),this),this.outMvpMat=new Fu(new xu("uMvp_outMvp"),this),this.visibleIn_0=Rt([t.stage])}function ap(t){return function(e){return xt(e.stages,t.visibleIn_0),e.unaryPlus_wq3w46$(function(t){return function(){return t.uModelMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uProjMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uCamPos}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewport}}(t)),e.onUpdate=function(t){return function(e,i){t.uModelMat.value.set_d4zu6j$(i.modelMat),t.uViewMat.value.set_d4zu6j$(i.viewMat),t.uProjMat.value.set_d4zu6j$(i.projMat),t.uCamPos.value.set_2qa7tb$(i.renderPass.camera.globalPos,1);var n=i.renderPass.viewport;return t.uViewport.value.set_7b5o5w$(n.x,n.ySigned,n.width,n.heightSigned),s}}(t),s}}function lp(t,e){this.$outer=t,qu.call(this,"UboPremultipliedMvp.copy",e),this.outModelMat=new Fu(new xu(this.$outer.uModelMat.name),this),this.outViewMat=new Fu(new xu(this.$outer.uViewMat.name),this),this.outProjMat=new Fu(new xu(this.$outer.uProjMat.name),this),this.outCamPos=new Fu(new mu(this.$outer.uCamPos.name),this),this.outViewport=new Fu(new mu(this.$outer.uViewport.name),this),this.outMvpMat=new Fu(new xu("uMvp_outMvp"),this)}function up(t,e){void 0===e&&(e="tex2d_"+t.nextNodeId),qu.call(this,e,t),this.visibleIn=Rt([t.stage]),this.sampler_put5e8$_0=this.sampler_put5e8$_0,this.arraySize=1,this.isDepthTexture=!1}function pp(t,e){void 0===e&&(e="texCube_"+t.nextNodeId),qu.call(this,e,t),this.visibleIn=Rt([t.stage]),this.sampler_1a0grg$_0=this.sampler_1a0grg$_0}function cp(t,i){if(qu.call(this,"morphWeights_"+i.nextNodeId,i),this.nWeights=t,this.uWeights0_0=new Jh(this.name+"_w0"),this.uWeights1_0=new Jh(this.name+"_w1"),this.outWeights0=new Fu(new mu(this.uWeights0_0.name)),this.outWeights1=new Fu(new mu(this.uWeights1_0.name)),this.nWeights>8){var n=KN.Log,o=Cz.ERROR,r=e.getKClassFromExpression(this).simpleName;o.level>=n.level.level&&n.printer(o,r,"Currently only up to 8 morph target attributes are supported")}}function hp(t,e){qu.call(this,t,e),this.visibleIn=Rt([e.stage]),this.onUpdate=null}function dp(t,e){hp.call(this,t.name,e),this.uniform_24s88i$_0=t,this.output_6ls89f$_0=new Fu(new du(this.name),this)}function fp(t,e){hp.call(this,t.name,e),this.uniform_rl2ob1$_0=t,this.output_9us71w$_0=new Fu(new fu(this.name),this)}function _p(t,e){hp.call(this,t.name,e),this.uniform_dq6h4k$_0=t,this.output_d3s5ud$_0=new Fu(new _u(this.name),this)}function mp(t,e){hp.call(this,t.name,e),this.uniform_fzofez$_0=t,this.output_gcs4mu$_0=new Fu(new mu(this.name),this)}function $p(t,e){hp.call(this,t.name,e),this.uniform_o737wi$_0=t,this.output_yy7l5r$_0=new Fu(new mu(this.name),this)}function yp(t,e){hp.call(this,t.name,e),this.uniform_7m7o4x$_0=t,this.output_p908nk$_0=new Fu(new yu(this.name),this)}function vp(t,e){hp.call(this,t.name,e),this.uniform_xp1hao$_0=t,this.output_si07g1$_0=new Fu(new vu(this.name),this)}function gp(t,e){hp.call(this,t.name,e),this.uniform_3z6kr5$_0=t,this.output_vr068i$_0=new Fu(new gu(this.name),this)}function bp(t,e){hp.call(this,t.name,e),this.uniform_pqobse$_0=t,this.output_z0050z$_0=new Fu(new bu(this.name),this)}function xp(t,e,i){void 0===i&&(i=!1),qu.call(this,"tex_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.premultiply=i,this.inTexCoord=new Fu(new zu(ao().ZERO)),this.outColor=new Fu(new mu(this.name+"_outColor"),this),this.texLod=null}function wp(t,e){qu.call(this,"noise_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.inTexSize=new Fu(new Nu(new go(16,16))),this.outNoise=new Fu(new mu(this.name+"_outNoise"),this)}function zp(t,e,i){void 0===i&&(i=!1),qu.call(this,"cubeSampler_"+t.name+"_"+e.nextNodeId,e),this.cubeMap=t,this.premultiply=i,this.inTexCoord=new Fu(new ku(To().NEG_X_AXIS)),this.outColor=new Fu(new mu(this.name+"_outColor"),this),this.texLod=null}function kp(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),qu.call(this,"equi_rect_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.decodeRgbe=i,this.premultiply=n,this.inTexCoord=new Fu(new ku(To().X_AXIS)),this.outColor=new Fu(new mu(this.name+"_outColor"),this),this.texLod=null}function Sp(t,e){qu.call(this,"aoMapSampleNode_"+e.nextNodeId,e),this.aoMap=t,this.inViewport=new Fu(new Su(tr().ZERO)),this.outAo=new Fu(new du(this.name+"_outAo"),this)}function Cp(t,e){qu.call(this,"normalMapping_"+e.nextNodeId,e),this.texture=t,this.inTexCoord=new Fu(new zu(ao().NEG_X_AXIS)),this.inNormal=new Fu(new ku(To().Y_AXIS)),this.inTangent=new Fu(new ku(To().X_AXIS)),this.inStrength=new Fu(new wu(1)),this.outNormal=new Fu(new _u(this.name+"_outNormal"),this)}function Np(t){qu.call(this,"flipBacksideNormal_"+t.nextNodeId,t,Yp().mask),this.inNormal=new Fu(new ku(To().Y_AXIS)),this.outNormal=new Fu(new _u(this.name+"_outNormal"),this)}function Ep(t,e){qu.call(this,"dispMap_"+e.nextNodeId,e),this.texture=t,this.inTexCoord=new Fu(new zu(ao().NEG_X_AXIS)),this.inNormal=new Fu(new ku(To().Y_AXIS)),this.inPosition=new Fu(new ku(To().ZERO)),this.inStrength=new Fu(new wu(.1)),this.outPosition=new Fu(new _u(this.name+"_outPos"),this)}function Tp(t,e){var i;switch(qu.call(this,"split_"+e.nextNodeId,e),this.outChannels=t,this.input=new Fu(new Su(tr().ZERO)),this.outChannels.length){case 1:i=new Fu(new du(this.name+"_out"),this);break;case 2:i=new Fu(new fu(this.name+"_out"),this);break;case 3:i=new Fu(new _u(this.name+"_out"),this);break;case 4:i=new Fu(new mu(this.name+"_out"),this);break;default:throw V("outChannels parameter must be between 1 and 4 characters long (e.g. 'xyz')")}this.output=i}function Pp(t,e){var i;switch(qu.call(this,"combine_"+e.nextNodeId,e),this.inX=new Fu(new wu(0)),this.inY=new Fu(new wu(0)),this.inZ=new Fu(new wu(0)),this.inW=new Fu(new wu(0)),t.name){case"VEC_2F":i=new Fu(new fu(this.name+"_out"),this);break;case"VEC_3F":i=new Fu(new _u(this.name+"_out"),this);break;case"VEC_4F":i=new Fu(new mu(this.name+"_out"),this);break;default:throw V("Only allowed out types are VEC_2F, VEC_3F and VEC_4F")}this.output=i}function Op(t){qu.call(this,"combine31_"+t.nextNodeId,t),this.inXyz=new Fu(new ku(To().ZERO)),this.inW=new Fu(new wu(0)),this.output=new Fu(new mu(this.name+"_out"),this)}function Mp(t,e){qu.call(this,t.name,e,Hp().mask),this.attribute=t,this.output=new Fu(new hu(this.attribute.name,this.attribute.type),this)}function jp(t,e){qu.call(this,t.name,e,Hp().mask),this.attribute=t,this.output=new Fu(new hu(this.attribute.name,this.attribute.type),this)}function Ap(t,e,i){this.name=t,this.input_h7hmfg$_0=new Fu(new wu(0)),this.output_ftovqj$_0=new Fu(new du(this.name)),this.isFlat=!1,this.ifVar_hcczpo$_0=this.ifVar_hcczpo$_0,this.vertexNode=new Ip(this,e),this.fragmentNode=new Rp(this,i)}function Ip(t,e){this.$outer=t,qu.call(this,this.$outer.name,e,Hp().mask),this.ifNode=this.$outer}function Rp(t,e){this.$outer=t,qu.call(this,this.$outer.name,e,Yp().mask),this.ifNode=this.$outer}function Lp(t){qu.call(this,"screenCoord_"+t.nextNodeId,t,Yp().mask),this.inViewport=new Fu(new Su(tr().ZERO)),this.outScreenCoord=new Fu(new mu("gl_FragCoord"),this),this.outNormalizedScreenCoord=new Fu(new _u(this.name+"_outNormalizedCoord"),this)}function Dp(t){qu.call(this,"fullScreenQuad_"+t.nextNodeId,t),this.inTexCoord=new Fu(new zu(ao().ZERO)),this.inDepth=new Fu(new wu(.999)),this.outQuadPos=new Fu(new mu(this.name+"_outPos"),this)}function qp(t,e){qu.call(this,"getMorphWeight_"+e.nextNodeId,e),this.iWeight=t,this.inWeights0=new Fu(new Su(tr().ZERO)),this.inWeights1=new Fu(new Su(tr().ZERO)),this.outWeight=new Fu(new du(this.name+"_outW"),this)}function Fp(t){qu.call(this,"refractionSampler_"+t.nextNodeId,t),this.reflectionMap=null,this.refractionColor_dpnwa6$_0=this.refractionColor_dpnwa6$_0,this.viewProj_5bee0e$_0=this.viewProj_5bee0e$_0,this.inMaterialThickness=new Fu(new wu(1)),this.inRefractionDir=new Fu(new ku(To().ZERO)),this.inFragPos=new Fu(new ku(To().ZERO)),this.outColor=new Fu(new mu(this.name+"_outColor"),this)}function Bp(t,e){qu.call(this,t,e),this.input_llsvnw$_0=new Fu(new wu(0)),this.output_a35q23$_0=new Fu(new hu(t,Qr()),this)}function Up(t){qu.call(this,"pointSz",t,Hp().mask),this.inSize=new Fu(new wu(1))}function Vp(t,e,i){T.call(this),this.mask=i,this.name$=t,this.ordinal$=e}function Gp(){Gp=function(){},Va=new Vp("VERTEX_SHADER",0,1),Ga=new Vp("TESSELEATION_CTRL",1,2),Ha=new Vp("TESSELATION_EVAL",2,4),Wa=new Vp("GEOMETRY_SHADER",3,8),Ka=new Vp("FRAGMENT_SHADER",4,16),Xa=new Vp("ALL",5,-1)}function Hp(){return Gp(),Va}function Wp(){return Gp(),Ga}function Kp(){return Gp(),Ha}function Xp(){return Gp(),Wa}function Yp(){return Gp(),Ka}function Zp(){return Gp(),Xa}function Jp(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Qp(){Qp=function(){},Ya=new Jp("CUBE_MAP_ALBEDO",0),Za=new Jp("STATIC_ALBEDO",1),Ja=new Jp("TEXTURE_ALBEDO",2),Qa=new Jp("VERTEX_ALBEDO",3)}function tc(){return Qp(),Ya}function ec(){return Qp(),Za}function ic(){return Qp(),Ja}function nc(){return Qp(),Qa}function oc(){}function rc(){oc.call(this)}function sc(){oc.call(this)}function ac(t){oc.call(this),this.cutOff=t}function lc(t){_c(),Tl.call(this),this.model=t}function uc(t,e){void 0===t&&(t=J$().GRAY),void 0===e&&(e=_c().staticColorModel_0()),lc.call(this,e),this.uColor_0=null,this.color_cjijrc$_0=t}function pc(t){void 0===t&&(t=_c().vertexColorModel_0()),lc.call(this,t)}function cc(t,e,i){void 0===t&&(t=null),void 0===e&&(e="colorTex"),void 0===i&&(i=_c().textureColorModel_0(e)),lc.call(this,i),this.texName_0=e,this.textureSampler_0=null,this.texture_smcrab$_0=t}function hc(t,e,i){void 0===t&&(t=null),void 0===e&&(e="cubeMap"),void 0===i&&(i=_c().cubeMapColorModel_0(e)),lc.call(this,i),this.texName_0=e,this.cubeMapSampler_0=null,this.texture_mz7wkp$_0=t}function dc(){fc=this}ba.$metadata$={kind:$,simpleName:"Pipeline",interfaces:[]},il.$metadata$={kind:$,simpleName:"BlendMode",interfaces:[T]},il.values=function(){return[ol(),rl(),sl(),al()]},il.valueOf_61zpoe$=function(t){switch(t){case"DISABLED":return ol();case"BLEND_ADDITIVE":return rl();case"BLEND_MULTIPLY_ALPHA":return sl();case"BLEND_PREMULTIPLIED_ALPHA":return al();default:P("No enum constant de.fabmax.kool.pipeline.BlendMode."+t)}},ll.$metadata$={kind:$,simpleName:"DepthCompareOp",interfaces:[T]},ll.values=function(){return[pl(),cl(),hl(),dl(),fl(),_l(),ml(),$l(),yl()]},ll.valueOf_61zpoe$=function(t){switch(t){case"DISABLED":return pl();case"ALWAYS":return cl();case"NEVER":return hl();case"LESS":return dl();case"LESS_EQUAL":return fl();case"GREATER":return _l();case"GREATER_EQUAL":return ml();case"EQUAL":return $l();case"NOT_EQUAL":return yl();default:P("No enum constant de.fabmax.kool.pipeline.DepthCompareOp."+t)}},vl.$metadata$={kind:$,simpleName:"CullMethod",interfaces:[T]},vl.values=function(){return[bl(),xl(),wl(),zl()]},vl.valueOf_61zpoe$=function(t){switch(t){case"DEFAULT":return bl();case"CULL_BACK_FACES":return xl();case"CULL_FRONT_FACES":return wl();case"NO_CULLING":return zl();default:P("No enum constant de.fabmax.kool.pipeline.CullMethod."+t)}},kl.prototype.toBuffer=function(){return this.layout_0.putTo_l6oshk$(this.buffer_0),this.buffer_0.flip(),this.buffer_0},Sl.prototype.unaryPlus_wq3w46$=function(t){this.pushConstants.add_11rb$(t)},Sl.prototype.create=function(){for(var t=this.pushConstants.size,i=w(t),n=0;n<t;n++)i.add_11rb$(this.pushConstants.get_za3lpa$(n)());var o,r,s=i,a=ot(this.name),l={v:new kt(e.Long.fromInt(a))};for(o=this.stages.iterator();o.hasNext();){var u=o.next(),p=l.v,c=new kt(e.Long.fromInt(71023)),h=new kt(p.data.multiply(c.data)),d=u.hashCode(),f=new kt(e.Long.fromInt(d));l.v=new kt(h.data.add(f.data))}for(r=s.iterator();r.hasNext();){var _=r.next(),m=l.v,$=new kt(e.Long.fromInt(71023)),y=new kt(m.data.multiply($.data)),v=e.getKClassFromExpression(_).hashCode(),g=new kt(e.Long.fromInt(v));l.v=new kt(y.data.add(g.data));var b=l.v,x=new kt(e.Long.fromInt(71023)),z=new kt(b.data.multiply(x.data)),k=ot(_.name),S=new kt(e.Long.fromInt(k));l.v=new kt(z.data.add(S.data))}return new kl(this,l.v,s)},Sl.prototype.clear=function(){this.stages.clear(),this.pushConstants.clear()},Sl.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},kl.$metadata$={kind:$,simpleName:"PushConstantRange",interfaces:[]},Object.defineProperty(Cl.prototype,"clearColors",{configurable:!0,get:function(){return this.clearColors_ynhttt$_0},set:function(t){this.clearColors_ynhttt$_0=t}}),Object.defineProperty(Cl.prototype,"clearColor",{configurable:!0,get:function(){return this.clearColors[0]},set:function(t){this.clearColors[0]=t}}),Object.defineProperty(Cl.prototype,"drawQueue",{configurable:!0,get:function(){return this.drawQueue_mxdtqn$_0},set:function(t){this.drawQueue_mxdtqn$_0=t}}),Cl.prototype.updateEvent_nkvecu$_0=function(t){var e,i;if(null!=(e=this.updateEvent_2t7tkj$_0))i=e;else{var n=new Nl(this,t);this.updateEvent_2t7tkj$_0=n,i=n}return i},Cl.prototype.dependsOn_yqp8fe$=function(t){this.dependencies.add_11rb$(t)},Cl.prototype.update_aemszp$=function(t){this.isUpdateDrawNode&&this.drawNode.update_kma0q5$(this.updateEvent_nkvecu$_0(t))},Cl.prototype.collectDrawCommands_aemszp$=function(t){this.beforeCollectDrawCommands_aemszp$(t),this.drawNode.collectDrawCommands_kma0q5$(this.updateEvent_nkvecu$_0(t)),this.afterCollectDrawCommands_aemszp$(t)},Cl.prototype.addMesh_sbx4mf$=function(t,e){return this.drawQueue.addMesh_sbx4mf$(t,e)},Cl.prototype.beforeCollectDrawCommands_aemszp$=function(t){var e;this.drawQueue.clear(),e=this.onBeforeCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onBeforeCollectDrawCommands.get_za3lpa$(i)(t);this.camera.updateCamera_fd1mc0$(t,this.viewport)},Cl.prototype.afterCollectDrawCommands_aemszp$=function(t){var e;e=this.onAfterCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onAfterCollectDrawCommands.get_za3lpa$(i)(t)},Cl.prototype.afterDraw_aemszp$=function(t){var e;e=this.onAfterDraw;for(var i=0;i!==e.size;++i)this.onAfterDraw.get_za3lpa$(i)(t)},Cl.prototype.dispose_aemszp$=function(t){},Object.defineProperty(Nl.prototype,"time",{configurable:!0,get:function(){return this.ctx.time}}),Object.defineProperty(Nl.prototype,"deltaT",{configurable:!0,get:function(){return this.ctx.deltaT}}),Object.defineProperty(Nl.prototype,"frameIndex",{configurable:!0,get:function(){return this.ctx.frameIdx}}),Object.defineProperty(Nl.prototype,"camera",{configurable:!0,get:function(){return this.renderPass.camera}}),Object.defineProperty(Nl.prototype,"viewport",{configurable:!0,get:function(){return this.renderPass.viewport}}),Nl.prototype.component1=function(){return this.renderPass},Nl.prototype.component2=function(){return this.ctx},Nl.$metadata$={kind:$,simpleName:"UpdateEvent",interfaces:[]},Cl.$metadata$={kind:$,simpleName:"RenderPass",interfaces:[]},Object.defineProperty(El.prototype,"camera",{configurable:!0,get:function(){return this.scene.camera}}),El.prototype.collectDrawCommands_aemszp$=function(t){this.useWindowViewport&&t.getWindowViewport_ahq5yh$(this.viewport),Cl.prototype.collectDrawCommands_aemszp$.call(this,t)},El.$metadata$={kind:$,simpleName:"ScreenRenderPass",interfaces:[Cl]},Tl.prototype.createPipeline_sbx4mf$=function(t,e){var i=new wa;i.vertexLayout.primitiveType=t.geometry.primitiveType,this.onPipelineSetup_x08qbx$(i,t,e);var n=i.create();return this.onPipelineCreated_vp7qhs$(n,t,e),n},Tl.prototype.onPipelineSetup_x08qbx$=function(t,e,i){var n;for(n=this.onPipelineSetup.iterator();n.hasNext();)n.next()(t,e,i)},Tl.prototype.onPipelineCreated_vp7qhs$=function(t,e,i){var n;for(n=this.onPipelineCreated.iterator();n.hasNext();)n.next()(t,e,i)},Tl.$metadata$={kind:$,simpleName:"Shader",interfaces:[]},Pl.prototype.sampleTexture2d_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTexture2d_buzeal$$default(t,e,i)},Pl.prototype.sampleTextureCube_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTextureCube_buzeal$$default(t,e,i)},Ol.$metadata$={kind:$,simpleName:"ClipSpaceOrientation",interfaces:[T]},Ol.values=function(){return[jl(),Al()]},Ol.valueOf_61zpoe$=function(t){switch(t){case"Y_UP":return jl();case"Y_DOWN":return Al();default:P("No enum constant de.fabmax.kool.pipeline.shadermodel.CodeGenerator.ClipSpaceOrientation."+t)}},Pl.$metadata$={kind:st,simpleName:"CodeGenerator",interfaces:[]},Il.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inAlpha])},Il.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outAlphaColor.declare()+" = vec4("+this.inColor.ref3f_61zpoe$()+", "+this.inColor.ref4f_61zpoe$()+".a * "+this.inAlpha.ref1f_61zpoe$()+");\n            ")},Il.$metadata$={kind:$,simpleName:"ColorAlphaNode",interfaces:[qu]},Rl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inColor)},Rl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4("+this.inColor.ref3f_61zpoe$()+" * "+this.inColor.ref4f_61zpoe$()+".a, "+this.inColor.ref4f_61zpoe$()+".a);")},Rl.$metadata$={kind:$,simpleName:"PremultiplyColorNode",interfaces:[qu]},Ll.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inGamma])},Ll.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4(pow("+this.inColor.ref3f_61zpoe$()+", vec3(1.0/"+this.inGamma.ref1f_61zpoe$()+")), "+this.inColor.ref4f_61zpoe$()+".a);")},Ll.$metadata$={kind:$,simpleName:"GammaNode",interfaces:[qu]},Dl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inGamma])},Dl.prototype.generateUncharted2_0=function(t){t.appendFunction_puj7f4$("uncharted2","\n            vec3 uncharted2Tonemap_func(vec3 x) {\n                float A = 0.15;     // shoulder strength\n                float B = 0.50;     // linear strength\n                float C = 0.10;     // linear angle\n                float D = 0.20;     // toe strength\n                float E = 0.02;     // toe numerator\n                float F = 0.30;     // toe denominator  --\x3e E/F = toe angle\n                return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n            }\n            \n            vec3 uncharted2Tonemap(vec3 rgbLinear) {\n                float W = 11.2;     // linear white point value\n                float ExposureBias = 2.0;\n                vec3 curr = uncharted2Tonemap_func(ExposureBias * rgbLinear);\n                vec3 whiteScale = 1.0 / uncharted2Tonemap_func(vec3(W));\n                return curr * whiteScale;\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = uncharted2Tonemap("+this.inColor.ref3f_61zpoe$()+");\n            "+this.outColor.declare()+" = vec4(pow("+this.name+"_color, vec3(1.0/"+this.inGamma.ref1f_61zpoe$()+")), "+this.inColor.ref4f_61zpoe$()+".a);\n        ")},Dl.prototype.generateReinhard_0=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = "+this.inColor.ref3f_61zpoe$()+" / ("+this.inColor.ref3f_61zpoe$()+" + vec3(1.0));\n            "+this.outColor.declare()+" = vec4(pow("+this.name+"_color, vec3(1.0/"+this.inGamma.ref1f_61zpoe$()+")), "+this.inColor.ref4f_61zpoe$()+".a);\n        ")},Dl.prototype.generateJimHejlRichardBurgessDawson_0=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = max(vec3(0), "+this.inColor.ref3f_61zpoe$()+" - 0.004);\n            "+this.outColor.declare()+" = vec4(("+this.name+"_color * (6.2 * "+this.name+"_color + 0.5)) / ("+this.name+"_color * (6.2 * "+this.name+"_color + 1.7) + 0.06), 1.0);\n        ")},Dl.prototype.generateCode_626509$=function(t){this.generateUncharted2_0(t)},Dl.$metadata$={kind:$,simpleName:"HdrToLdrNode",interfaces:[qu]},ql.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$(this.inColors.slice()),null!=(e=this.alpha)&&this.dependsOn_7qvs0d$(e)},ql.prototype.generateCode_626509$=function(t){var e,i,n=Ot();e=this.channels;for(var o=0;o<e;o++)n.append_pdl1vj$("layout(location="+o+") out vec4 fragOutColor_"+o+";\n");t.appendFunction_puj7f4$("fragOut",n.toString()),i=this.channels;for(var r=0;r<i;r++){var s=this.alpha;null!=s?t.appendMain_61zpoe$("fragOutColor_"+r+" = vec4("+this.inColors[r].ref3f_61zpoe$()+", "+s.ref1f_61zpoe$()+");"):t.appendMain_61zpoe$("fragOutColor_"+r+" = "+this.inColors[r].ref4f_61zpoe$()+";")}},ql.$metadata$={kind:$,simpleName:"FragmentColorOutNode",interfaces:[qu]},Fl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inDepth)},Fl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("gl_FragDepth = "+this.inDepth.ref1f_61zpoe$()+";")},Fl.$metadata$={kind:$,simpleName:"FragmentDepthOutNode",interfaces:[qu]},Bl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlpha,this.inAlphaCutoff])},Bl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("if ("+this.inAlpha.ref1f_61zpoe$()+" <= "+this.inAlphaCutoff.ref1f_61zpoe$()+") { discard; }")},Bl.$metadata$={kind:$,simpleName:"DiscardAlphaNode",interfaces:[qu]},Ul.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$(this.inShadowFacs.slice()),this.dependsOn_8ak6wm$([this.inFragPos,this.inSpotInnerAngle]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Vl(this))},Ul.prototype.encodeLightSetup_0=function(t){var e,i=t.renderPass.lighting;if(null!=i){var n=this.uLightCnt_0,o=i.lights.size,r=this.maxLights;n.value=A.min(o,r),e=this.uLightCnt_0.value;for(var s=0;s<e;s++){var a=i.lights.get_za3lpa$(s);this.uColors_0.value[s].set_czzhhz$(a.color),this.uPositions_0.value[s].set_2qa7tb$(a.position,a.type.encoded);var l=this.uDirections_0.value[s],u=a.direction,p=a.spotAngle/2*LN.DEG_2_RAD;l.set_2qa7tb$(u,A.cos(p))}}else this.uLightCnt_0.value=0},Ul.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("light_getFragToLight","\n            vec3 light_getFragToLight(int idx, vec3 fragPos) {\n                if ("+this.uPositions_0.name+"[idx].w == float("+Fd().encoded+")) {\n                    return -"+this.uDirections_0.name+"[idx].xyz;\n                }\n                // same for point and spot lights\n                return "+this.uPositions_0.name+"[idx].xyz - fragPos;\n            }\n            ");var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("light_getRadiance","\n            vec3 light_getRadiance(int idx, vec3 fragToLight, float innerAngle) {\n                if ("+this.uPositions_0.name+"[idx].w == float("+Fd().encoded+")) {\n                    return "+this.uColors_0.name+"[idx].rgb * "+this.uColors_0.name+"[idx].w;\n                }\n                float dist = length(fragToLight);\n                float power = "+this.uColors_0.name+"[idx].w;\n                "+e+"\n                if ("+this.uPositions_0.name+"[idx].w == float("+Bd().encoded+")) {\n                    return "+this.uColors_0.name+"[idx].rgb * strength;\n                } else {\n                    // spot light\n                    vec3 lightDir = -normalize(fragToLight);\n                    float spotAng = "+this.uDirections_0.name+"[idx].w;\n                    float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                    float ang = dot(lightDir, "+this.uDirections_0.name+"[idx].xyz);\n                    float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                    return "+this.uColors_0.name+"[idx].rgb * strength * angVal;\n                }\n            }\n            ");var i,n=f(0,this.maxLights),o=w(j(n,10));for(i=n.iterator();i.hasNext();){var r=i.next();o.add_11rb$(this.inShadowFacs[r].ref1f_61zpoe$())}var s,a=Mt(o,", "),l=f(0,this.maxLights),u=w(j(l,10));for(s=l.iterator();s.hasNext();)s.next(),u.add_11rb$("vec3(0.0)");var p=Mt(u,", ");t.appendMain_61zpoe$("\n            float[] "+this.name+"_shadowFacs = float[] ("+a+");\n            "+this.outFragToLightDirection.declare()+" = vec3["+this.maxLights+"]("+p+");\n            "+this.outRadiance.declare()+" = vec3["+this.maxLights+"]("+p+");\n            for (int i = 0; i < "+this.uLightCnt_0+"; i++) {\n                "+this.outFragToLightDirection.ref3f_61zpoe$("i")+" = light_getFragToLight(i, "+this.inFragPos.ref3f_61zpoe$()+");\n                "+this.outRadiance.ref3f_61zpoe$("i")+" = light_getRadiance(i, "+this.outFragToLightDirection.ref3f_61zpoe$("i")+", "+this.inSpotInnerAngle.ref1f_61zpoe$("i")+") * "+this.name+"_shadowFacs[i];\n            }\n            ")},Ul.$metadata$={kind:$,simpleName:"MultiLightNode",interfaces:[qu]},Gl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Hl(this))},Gl.prototype.encodeLightSetup_0=function(){var t=this.light;if(null!=t){this.uColor_0.value.set_czzhhz$(t.color),this.uPosition_0.value.set_2qa7tb$(t.position,t.type.encoded);var e=this.uDirection_0.value,i=t.direction,n=t.spotAngle/2*LN.DEG_2_RAD;e.set_2qa7tb$(i,A.cos(n))}else this.uColor_0.value.set_czzhhz$(tr().ZERO)},Gl.$metadata$={kind:$,simpleName:"SingleLightUniformDataNode",interfaces:[qu]},Wl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShaodwFac,this.inLightPos,this.inLightDir,this.inLightColor])},Wl.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("light_getFragToLight","\n            vec3 light_getFragToLight(vec3 fragPos, vec4 lightPos, vec4 lightDir) {\n                if (lightPos.w == float("+Fd().encoded+")) {\n                    return -lightDir.xyz;\n                }\n                // same for point and spot lights\n                return lightPos.xyz - fragPos;\n            }\n            ");var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("light_getRadiance","\n            vec3 light_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor, vec4 lightDir, float innerAngle) {\n                if (lightPos.w == float("+Fd().encoded+")) {\n                    return lightColor.rgb * lightColor.w;\n                }\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                if (lightPos.w == float("+Bd().encoded+")) {\n                    return lightColor.rgb * strength;\n                } else {\n                    // spot light\n                    vec3 negFtl = -normalize(fragToLight);\n                    float spotAng = lightDir.w;\n                    float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                    float ang = dot(negFtl, lightDir.xyz);\n                    float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                    return lightColor.rgb * strength * angVal;\n                }\n            }\n            "),t.appendMain_61zpoe$("\n            "+this.outFragToLightDirection.declare()+" = light_getFragToLight("+this.inFragPos.ref3f_61zpoe$()+", "+this.inLightPos.ref3f_61zpoe$()+", "+this.inLightDir.ref3f_61zpoe$()+");\n            "+this.outRadiance.declare()+" = light_getRadiance("+this.outFragToLightDirection.ref3f_61zpoe$()+",\n                         "+this.inLightPos.ref3f_61zpoe$()+", "+this.inLightColor.ref4f_61zpoe$()+", "+this.inLightDir.ref4f_61zpoe$()+",\n                         "+this.inSpotInnerAngle.ref1f_61zpoe$()+") * "+this.inShaodwFac.ref1f_61zpoe$()+";\n        ")},Wl.$metadata$={kind:$,simpleName:"SingleLightNode",interfaces:[qu]},Kl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inLightPos,this.inLightColor,this.inShadowFac,this.inFragPos])},Kl.prototype.generateCode_626509$=function(t){var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("pointLight_getRadiance","\n            vec3 pointLight_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor) {\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                return lightColor.rgb * strength;\n            }\n            "),t.appendMain_61zpoe$("\n            "+this.outFragToLightDirection.declare()+" = "+this.inLightPos.ref3f_61zpoe$()+" - "+this.inFragPos.ref3f_61zpoe$()+";\n            "+this.outRadiance.declare()+" = pointLight_getRadiance("+this.outFragToLightDirection+", "+this.inLightPos.ref4f_61zpoe$()+",\n                        "+this.inLightColor.ref4f_61zpoe$()+") * "+this.inShadowFac.ref1f_61zpoe$()+";\n        ")},Kl.$metadata$={kind:$,simpleName:"SinglePointLightNode",interfaces:[qu]},Xl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShadowFac,this.inLightPos,this.inLightDir,this.inLightColor])},Xl.prototype.generateCode_626509$=function(t){var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("spotLight_getRadiance","\n            vec3 "+this.name+"_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor, vec4 lightDir, float innerAngle) {\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                vec3 negFtl = -normalize(fragToLight);\n                float spotAng = lightDir.w;\n                float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                float ang = dot(negFtl, lightDir.xyz);\n                float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                return lightColor.rgb * strength * angVal;\n            }\n            "),t.appendMain_61zpoe$("\n            "+this.outFragToLightDirection.declare()+" = "+this.inLightPos.ref3f_61zpoe$()+" - "+this.inFragPos.ref3f_61zpoe$()+";\n            "+this.outRadiance.declare()+" = spotLight_getRadiance("+this.outFragToLightDirection+", "+this.inLightPos.ref4f_61zpoe$()+",\n                        "+this.inLightColor.ref4f_61zpoe$()+", "+this.inSpotInnerAngle+") * "+this.inShadowFac.ref1f_61zpoe$()+";\n        ")},Xl.$metadata$={kind:$,simpleName:"SingleSpotLightNode",interfaces:[qu]},Yl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inColor)},Yl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4("+this.inColor.ref3f_61zpoe$()+" * "+this.inColor.ref4f_61zpoe$()+".a, "+this.inColor.ref4f_61zpoe$()+".a);")},Yl.$metadata$={kind:$,simpleName:"UnlitMaterialNode",interfaces:[qu]},Zl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inNormal,this.inFragPos,this.inCamPos]),this.dependsOn_8ak6wm$([this.inLightCount,this.inFragToLight,this.inRadiance,this.inAmbient,this.inShininess,this.inSpecularIntensity])},Zl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec3 phongMat_v = normalize("+this.inFragPos.ref3f_61zpoe$()+" - "+this.inCamPos.ref3f_61zpoe$()+");\n            vec3 phongMat_n = normalize("+this.inNormal.ref3f_61zpoe$()+");\n            \n            vec3 phongMat_ambient = "+this.inAlbedo.ref3f_61zpoe$()+" * "+this.inAmbient.ref3f_61zpoe$()+";\n            vec3 phongMat_diffuse = vec3(0);\n            vec3 phongMat_specular = vec3(0);\n            for (int i = 0; i < "+this.inLightCount.ref1i_61zpoe$()+"; i++) {\n                vec3 phongMat_l = normalize("+this.inFragToLight.ref3f_61zpoe$("i")+");\n                vec3 radiance = "+this.inRadiance.ref3f_61zpoe$("i")+";\n                \n                "+(this.lightBacksides?"if (dot(phongMat_n, phongMat_l) < 0.0) { phongMat_n *= -1.0; }":"")+"\n        \n                float phongMat_cosTheta = clamp(dot(phongMat_n, phongMat_l), 0.0, 1.0);\n                vec3 phongMat_r = reflect(phongMat_l, phongMat_n);\n                float phongMat_cosAlpha = clamp(dot(phongMat_v, phongMat_r), 0.0, 1.0);\n                \n                phongMat_diffuse += "+this.inAlbedo.ref4f_61zpoe$()+".rgb * radiance * phongMat_cosTheta;\n                phongMat_specular += "+this.inSpecularIntensity.ref1f_61zpoe$()+" * radiance *\n                        pow(phongMat_cosAlpha, "+this.inShininess.ref1f_61zpoe$()+") * "+this.inAlbedo.ref4f_61zpoe$()+".a;\n            } \n            \n            vec3 phongMat_color = phongMat_ambient + phongMat_diffuse + phongMat_specular;\n            "+this.outColor.declare()+" = vec4(phongMat_color * "+this.inAlbedo.ref4f_61zpoe$()+".a, "+this.inAlbedo.ref4f_61zpoe$()+".a);\n            ")},Zl.$metadata$={kind:$,simpleName:"PhongMaterialNode",interfaces:[qu]},Jl.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inEmissive,this.inNormal,this.inFragPos,this.inViewDir]),this.dependsOn_8ak6wm$([this.inMetallic,this.inRoughness,this.inAmbientOccl]),this.dependsOn_8ak6wm$([this.inFragToLight,this.inRadiance,this.inIrradiance,this.inReflectionColor,this.inReflectionWeight]),this.dependsOn_lhtstx$(this.reflectionMap),this.dependsOn_lhtstx$(this.brdfLut)},Jl.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("fresnelSchlick","\n            vec3 fresnelSchlick(float cosTheta, vec3 F0) {\n                return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("fresnelSchlickRoughness","\n            vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness) {\n                return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("DistributionGGX","\n            float DistributionGGX(vec3 N, vec3 H, float roughness) {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0);\n                float NdotH2 = NdotH*NdotH;\n            \t\n                float num = a2;\n                float denom = (NdotH2 * (a2 - 1.0) + 1.0);\n                denom = 3.141592653589793 * denom * denom;\n            \t\n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySchlickGGX","\n            float GeometrySchlickGGX(float NdotV, float roughness) {\n                float r = (roughness + 1.0);\n                float k = (r*r) / 8.0;\n                \n                float num   = NdotV;\n                float denom = NdotV * (1.0 - k) + k;\n                \n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySmith","\n            float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                float NdotV = max(dot(N, V), 0.0);\n                float NdotL = max(dot(N, L), 0.0);\n                float ggx2  = GeometrySchlickGGX(NdotV, roughness);\n                float ggx1  = GeometrySchlickGGX(NdotL, roughness);\n                \n                return ggx1 * ggx2;\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 albedo = "+this.inAlbedo.ref3f_61zpoe$()+";\n            vec3 V = -"+this.inViewDir.ref3f_61zpoe$()+";\n            vec3 N = "+this.inNormal.ref3f_61zpoe$()+";\n            \n            float rough = clamp("+this.inRoughness.ref1f_61zpoe$()+", 0.05, 1.0);\n            float metal = "+this.inMetallic.ref1f_61zpoe$()+";\n            \n            vec3 F0 = vec3(0.04); \n            F0 = mix(F0, albedo, metal);\n    \n            vec3 Lo = vec3(0.0);\n            \n            for (int i = 0; i < "+this.inLightCount.ref1i_61zpoe$()+"; i++) {\n                // calculate per-light radiance\n                vec3 L = normalize("+this.inFragToLight.ref3f_61zpoe$("i")+");\n                vec3 H = normalize(V + L);\n                vec3 radiance = "+this.inRadiance.ref3f_61zpoe$("i")+";\n        \n                "+(this.lightBacksides?"N *= sign(dot(N, L));":"")+"\n        \n                // cook-torrance BRDF\n                float NDF = DistributionGGX(N, H, rough); \n                float G = GeometrySmith(N, V, L, rough);\n                vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);\n                \n                vec3 kS = F;\n                vec3 kD = vec3(1.0) - kS;\n                kD *= 1.0 - metal;\n                \n                vec3 numerator = NDF * G * F;\n                float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0);\n                vec3 specular = numerator / max(denominator, 0.001);\n                    \n                // add to outgoing radiance Lo\n                float NdotL = max(dot(N, L), 0.0);\n                Lo += (kD * albedo / "+U.PI+" + specular) * radiance * NdotL;\n            }\n            "),null!=this.reflectionMap&&null!=this.brdfLut?this.generateFinalIbl_0(t,this.reflectionMap,this.brdfLut):this.generateFinalNonIbl_0(t)},Jl.prototype.generateFinalNonIbl_0=function(t){t.appendMain_61zpoe$("\n            vec3 kS = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, rough);\n            vec3 kD = 1.0 - kS;\n            vec3 diffuse = "+this.inIrradiance.ref3f_61zpoe$()+" * albedo;\n            vec3 ambient = (kD * diffuse) * "+this.inAmbientOccl.ref1f_61zpoe$()+";\n\n            vec3 color = (ambient + Lo + "+this.inEmissive.ref3f_61zpoe$()+") * "+this.inAlbedo.ref4f_61zpoe$()+".a;\n            "+this.outColor.declare()+" = vec4(color, "+this.inAlbedo.ref4f_61zpoe$()+".a);\n        ")},Jl.prototype.generateFinalIbl_0=function(t,e,i){t.appendMain_61zpoe$("\n            vec3 F = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, rough);\n            vec3 kS = F;\n            vec3 kD = 1.0 - kS;\n            kD *= 1.0 - metal;\n            vec3 diffuse = "+this.inIrradiance.ref3f_61zpoe$()+" * albedo;\n\n            // sample reflection map\n            vec3 R = reflect(-V, N);\n            const float MAX_REFLECTION_LOD = 6.0;\n            vec3 prefilteredColor = "+t.sampleTexture2d_buzeal$(e.name,"R","rough * MAX_REFLECTION_LOD")+".rgb;\n            prefilteredColor = mix(prefilteredColor, clamp("+this.inReflectionColor.ref3f_61zpoe$()+", 0.0, 5.0), "+this.inReflectionWeight.ref1f_61zpoe$()+");\n\n            vec2 brdfUv = vec2(max(dot(N, V), 0.0), rough);\n            vec2 envBRDF = "+t.sampleTexture2d_buzeal$(i.name,"brdfUv")+".rg;\n            vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);\n            vec3 ambient = (kD * diffuse) * "+this.inAmbientOccl.ref1f_61zpoe$()+";\n            vec3 reflection = specular * "+this.inAmbientOccl.ref1f_61zpoe$()+" * "+this.inReflectionStrength.ref1f_61zpoe$()+";\n            vec3 color = (ambient + Lo + "+this.inEmissive.ref3f_61zpoe$()+") * "+this.inAlbedo.ref4f_61zpoe$()+".a + reflection;\n            "+this.outColor.declare()+" = vec4(color, "+this.inAlbedo.ref4f_61zpoe$()+".a);\n        ")},Jl.$metadata$={kind:$,simpleName:"PbrMaterialNode",interfaces:[qu]},Ql.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inNormal,this.inFragPos,this.inCamPos,this.inFragToLight,this.inRadiance,this.inIrradiance])},Ql.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("fresnelSchlick","\n            vec3 fresnelSchlick(float cosTheta, vec3 F0) {\n                return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("DistributionGGX","\n            float DistributionGGX(vec3 N, vec3 H, float roughness) {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0);\n                float NdotH2 = NdotH*NdotH;\n            \t\n                float num = a2;\n                float denom = (NdotH2 * (a2 - 1.0) + 1.0);\n                denom = 3.141592653589793 * denom * denom;\n            \t\n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySchlickGGX","\n            float GeometrySchlickGGX(float NdotV, float roughness) {\n                float r = (roughness + 1.0);\n                float k = (r*r) / 8.0;\n                \n                float num   = NdotV;\n                float denom = NdotV * (1.0 - k) + k;\n                \n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySmith","\n            float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                float NdotV = max(dot(N, V), 0.0);\n                float NdotL = max(dot(N, L), 0.0);\n                float ggx2  = GeometrySchlickGGX(NdotV, roughness);\n                float ggx1  = GeometrySchlickGGX(NdotL, roughness);\n                \n                return ggx1 * ggx2;\n            }\n        ");var e=this.lightBacksides?"true":"dot("+this.inFragToLight+", "+this.inNormal.ref3f_61zpoe$()+") > 0.0";t.appendMain_61zpoe$("\n            vec3 radiance = vec3(0.0);\n            bool normalOk = "+e+";\n            if (normalOk) {\n                radiance = "+this.inRadiance.ref3f_61zpoe$()+";\n            }\n            \n            "+this.outColor.declare()+" = vec4(0.0, 0.0, 0.0, 1.0);\n            if (normalOk && dot(radiance, radiance) > 0.0) {\n                vec3 albedo = "+this.inAlbedo.ref3f_61zpoe$()+";\n                vec3 V = normalize("+this.inCamPos.ref3f_61zpoe$()+" - "+this.inFragPos.ref3f_61zpoe$()+");\n                vec3 N = normalize("+this.inNormal.ref3f_61zpoe$()+");\n                \n                float rough = clamp("+this.inRoughness.ref1f_61zpoe$()+", 0.05, 1.0);\n                float metal = "+this.inMetallic.ref1f_61zpoe$()+";\n                \n                vec3 F0 = vec3(0.04); \n                F0 = mix(F0, albedo, metal);\n        \n                vec3 L = normalize("+this.inFragToLight+");\n                vec3 H = normalize(V + L);\n                "+(this.lightBacksides?"N *= sign(dot(N, L));":"")+"\n        \n                // cook-torrance BRDF\n                float NDF = DistributionGGX(N, H, rough); \n                float G = GeometrySmith(N, V, L, rough);\n                vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);\n                \n                vec3 kS = F;\n                vec3 kD = vec3(1.0) - kS;\n                kD *= 1.0 - metal;\n                \n                vec3 numerator = NDF * G * F;\n                float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0);\n                vec3 specular = numerator / max(denominator, 0.001);\n                    \n                // add to outgoing radiance Lo\n                float NdotL = max(dot(N, L), 0.0);\n                "+this.outColor.name+" = vec4((kD * albedo / "+U.PI+" + specular) * radiance * NdotL, 1.0);\n            }\n            ")},Ql.$metadata$={kind:$,simpleName:"PbrLightNode",interfaces:[qu]},Object.defineProperty(tu.prototype,"left",{configurable:!0,get:function(){return this.left_8p0ptp$_0},set:function(t){this.output=new Fu(new hu(this.name+"_out",t.variable.type),this),this.left_8p0ptp$_0=t}}),Object.defineProperty(tu.prototype,"output",{configurable:!0,get:function(){return this.output_q2fkhv$_0},set:function(t){this.output_q2fkhv$_0=t}}),tu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.left,this.right])},tu.$metadata$={kind:$,simpleName:"MathOpNode",interfaces:[qu]},eu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" + "+this.right+";")},eu.$metadata$={kind:$,simpleName:"AddNode",interfaces:[tu]},iu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" - "+this.right+";")},iu.$metadata$={kind:$,simpleName:"SubtractNode",interfaces:[tu]},nu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" / "+this.right+";")},nu.$metadata$={kind:$,simpleName:"DivideNode",interfaces:[tu]},ou.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" * "+this.right+";")},ou.$metadata$={kind:$,simpleName:"MultiplyNode",interfaces:[tu]},ru.prototype.setup_llmhyc$=function(t){tu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.mixFac)},ru.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = mix("+this.left+", "+this.right+", "+this.mixFac.ref1f_61zpoe$()+");")},ru.$metadata$={kind:$,simpleName:"MixNode",interfaces:[tu]},su.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},su.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = ("+this.input.ref3f_61zpoe$()+" - 0.5) * 2.0;")},su.$metadata$={kind:$,simpleName:"VecFromColorNode",interfaces:[qu]},au.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inA,this.inB])},au.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = length("+this.inA+" - "+this.inB+");")},au.$metadata$={kind:$,simpleName:"DistanceNode",interfaces:[qu]},lu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},lu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = normalize("+this.input.ref3f_61zpoe$()+");")},lu.$metadata$={kind:$,simpleName:"NormalizeNode",interfaces:[qu]},uu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inCamPos,this.inWorldPos])},uu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = normalize("+this.inWorldPos.ref3f_61zpoe$()+" - "+this.inCamPos.ref3f_61zpoe$()+");")},uu.$metadata$={kind:$,simpleName:"ViewDirNode",interfaces:[qu]},pu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDirection,this.inNormal])},pu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outDirection.declare()+" = reflect("+this.inDirection.ref3f_61zpoe$()+", "+this.inNormal.ref3f_61zpoe$()+");")},pu.$metadata$={kind:$,simpleName:"ReflectNode",interfaces:[qu]},cu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDirection,this.inNormal])},cu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outDirection.declare()+" = refract("+this.inDirection.ref3f_61zpoe$()+", "+this.inNormal.ref3f_61zpoe$()+", "+this.inIor.ref1f_61zpoe$()+");")},cu.$metadata$={kind:$,simpleName:"RefractNode",interfaces:[qu]},hu.prototype.glslType=function(){return this.type.glslType},hu.prototype.declare=function(){var t=this.isArray?"[]":"";return this.glslType()+t+" "+this.name},hu.prototype.refAsType_fz5f65$=function(t,e){switch(void 0===e&&(e=""),t.name){case"FLOAT":return this.ref1f_61zpoe$(e);case"VEC_2F":return this.ref2f_61zpoe$(e);case"VEC_3F":return this.ref3f_61zpoe$(e);case"VEC_4F":return this.ref4f_61zpoe$(e);case"INT":return this.ref1i_61zpoe$(e);case"VEC_2I":return this.ref2i_61zpoe$(e);case"VEC_3I":return this.ref3i_61zpoe$(e);case"VEC_4I":return this.ref4i_61zpoe$(e);default:if(t===this.type)return this.name;throw cn(this.type.toString()+" cannot be converted to "+t)}},hu.prototype.ref1f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e=this.name+i;break;case"VEC_2F":case"VEC_3F":case"VEC_4F":e=this.name+i+".x";break;case"INT":e="float("+this.name+i+")";break;case"VEC_2I":case"VEC_3I":case"VEC_4I":e="float("+this.name+i+".x)";break;default:throw cn(this.type.toString()+" cannot be converted to float")}return e},hu.prototype.ref1f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref1f_61zpoe$$default(t)},hu.prototype.ref2f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="vec2("+this.name+i+", 0.0)";break;case"VEC_2F":e=this.name+i;break;case"VEC_3F":case"VEC_4F":e=this.name+i+".xy";break;case"INT":e="vec2(float("+this.name+i+"), 0.0)";break;case"VEC_2I":case"VEC_3I":case"VEC_4I":e="vec2(float("+this.name+i+".x), float("+this.name+i+".y))";break;default:throw cn(this.type.toString()+" cannot be converted to vec2")}return e},hu.prototype.ref2f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref2f_61zpoe$$default(t)},hu.prototype.ref3f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="vec3("+this.name+i+", 0.0, 0.0)";break;case"VEC_2F":e="vec3("+this.name+i+", 0.0)";break;case"VEC_3F":e=this.name+i;break;case"VEC_4F":e=this.name+i+".xyz";break;case"INT":e="vec3(float("+this.name+i+"), 0.0, 0.0)";break;case"VEC_2I":e="vec3(float("+this.name+i+".x), float("+this.name+i+".y), 0.0)";break;case"VEC_3I":case"VEC_4I":e="vec3(float("+this.name+i+".x), float("+this.name+i+".y), float("+this.name+i+".z))";break;default:throw cn(this.type.toString()+" cannot be converted to vec3")}return e},hu.prototype.ref3f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref3f_61zpoe$$default(t)},hu.prototype.ref4f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="vec4("+this.name+i+", 0.0, 0.0, 0.0)";break;case"VEC_2F":e="vec4("+this.name+i+", 0.0, 0.0)";break;case"VEC_3F":e="vec4("+this.name+i+", 0.0)";break;case"VEC_4F":e=this.name+i;break;case"INT":e="vec4(float("+this.name+i+"), 0.0, 0.0, 0.0)";break;case"VEC_2I":e="vec4(float("+this.name+i+".x), float("+this.name+i+".y), 0.0, 0.0)";break;case"VEC_3I":e="vec4(float("+this.name+i+".x), float("+this.name+i+".y), float("+this.name+i+".z), 0.0)";break;case"VEC_4I":e="vec4(float("+this.name+i+".x), float("+this.name+i+".y), float("+this.name+i+".z), float("+this.name+i+".w))";break;default:throw cn(this.type.toString()+" cannot be converted to vec4")}return e},hu.prototype.ref4f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref4f_61zpoe$$default(t)},hu.prototype.ref1i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="int("+this.name+i+")";break;case"VEC_2F":case"VEC_3F":case"VEC_4F":e="int("+this.name+i+".x)";break;case"INT":e=this.name+i;break;case"VEC_2I":case"VEC_3I":case"VEC_4I":e=this.name+i+".x";break;default:throw cn(this.type.toString()+" cannot be converted to int")}return e},hu.prototype.ref1i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref1i_61zpoe$$default(t)},hu.prototype.ref2i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="ivec2(int("+this.name+i+"), 0)";break;case"VEC_2F":case"VEC_3F":case"VEC_4F":e="ivec2(int("+this.name+i+".x), int("+this.name+i+".y))";break;case"INT":e="ivec2("+this.name+i+", 0)";break;case"VEC_2I":e=this.name+i;break;case"VEC_3I":case"VEC_4I":e="ivec2("+this.name+i+".xy)";break;default:throw cn(this.type.toString()+" cannot be converted to ivec2")}return e},hu.prototype.ref2i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref2i_61zpoe$$default(t)},hu.prototype.ref3i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="ivec3(int("+this.name+i+"), 0, 0)";break;case"VEC_2F":e="ivec3(int("+this.name+i+".x), int("+this.name+i+".y), 0)";break;case"VEC_3F":case"VEC_4F":e="ivec3(int("+this.name+i+".x), int("+this.name+i+".y), int("+this.name+i+".z))";break;case"INT":e="ivec3("+this.name+i+", 0, 0)";break;case"VEC_2I":e="ivec3("+this.name+i+", 0)";break;case"VEC_3I":e=this.name+i;break;case"VEC_4I":e="ivec3("+this.name+i+".xyz)";break;default:throw cn(this.type.toString()+" cannot be converted to ivec3")}return e},hu.prototype.ref3i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref3i_61zpoe$$default(t)},hu.prototype.ref4i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="ivec4(int("+this.name+i+"), 0, 0, 0)";break;case"VEC_2F":e="ivec4(int("+this.name+i+".x), int("+this.name+i+".y), 0, 0)";break;case"VEC_3F":e="ivec4(int("+this.name+i+".x), int("+this.name+i+".x), int("+this.name+i+".z), 0)";break;case"VEC_4F":e="ivec4(int("+this.name+i+".x), int("+this.name+i+".x), int("+this.name+i+".z), int("+this.name+i+".w))";break;case"INT":e="ivec4("+this.name+i+", 0, 0, 0)";break;case"VEC_2I":e="ivec4("+this.name+i+", 0, 0)";break;case"VEC_3I":e="ivec4("+this.name+i+", 0)";break;case"VEC_4I":e=this.name+i;break;default:throw cn(this.type.toString()+" cannot be converted to ivec4")}return e},hu.prototype.ref4i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref4i_61zpoe$$default(t)},hu.$metadata$={kind:$,simpleName:"ModelVar",interfaces:[]},du.$metadata$={kind:$,simpleName:"ModelVar1f",interfaces:[hu]},fu.$metadata$={kind:$,simpleName:"ModelVar2f",interfaces:[hu]},_u.$metadata$={kind:$,simpleName:"ModelVar3f",interfaces:[hu]},mu.$metadata$={kind:$,simpleName:"ModelVar4f",interfaces:[hu]},$u.$metadata$={kind:$,simpleName:"ModelVar3fv",interfaces:[hu]},yu.$metadata$={kind:$,simpleName:"ModelVar1i",interfaces:[hu]},vu.$metadata$={kind:$,simpleName:"ModelVar2i",interfaces:[hu]},gu.$metadata$={kind:$,simpleName:"ModelVar3i",interfaces:[hu]},bu.$metadata$={kind:$,simpleName:"ModelVar4i",interfaces:[hu]},xu.$metadata$={kind:$,simpleName:"ModelVarMat4f",interfaces:[hu]},wu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value+")"},wu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value+"), 0.0)"},wu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value+"), 0.0, 0.0)"},wu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value+"), 0.0, 0.0, 0.0)"},wu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value+")"},wu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value+"), 0)"},wu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value+"), 0, 0)"},wu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value+"), 0, 0, 0)"},wu.$metadata$={kind:$,simpleName:"ModelVar1fConst",interfaces:[du]},zu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},zu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},zu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), 0.0)"},zu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), 0.0, 0.0)"},zu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},zu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},zu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), 0)"},zu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), 0, 0)"},zu.$metadata$={kind:$,simpleName:"ModelVar2fConst",interfaces:[fu]},ku.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},ku.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},ku.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},ku.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), 0.0)"},ku.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},ku.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},ku.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"))"},ku.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"), 0)"},ku.$metadata$={kind:$,simpleName:"ModelVar3fConst",interfaces:[_u]},Su.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Su.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Su.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Su.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), float("+this.value.w+"))"},Su.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Su.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},Su.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"))"},Su.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"), int("+this.value.w+"))"},Su.$metadata$={kind:$,simpleName:"ModelVar4fConst",interfaces:[mu]},Cu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value+")"},Cu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value+"), 0.0)"},Cu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value+"), 0.0, 0.0)"},Cu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value+"), 0.0, 0.0, 0.0)"},Cu.prototype.ref1i_61zpoe$$default=function(t){return this.value.toString()},Cu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value+", 0)"},Cu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value+", 0, 0)"},Cu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value+", 0, 0, 0)"},Cu.$metadata$={kind:$,simpleName:"ModelVar1iConst",interfaces:[yu]},Nu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Nu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Nu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), 0.0)"},Nu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), 0.0, 0.0)"},Nu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Nu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value.x+", "+this.value.y+")"},Nu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value.x+", "+this.value.y+", 0)"},Nu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value.x+", "+this.value.y+", 0, 0)"},Nu.$metadata$={kind:$,simpleName:"ModelVar2iConst",interfaces:[vu]},Eu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Eu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Eu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Eu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), 0.0)"},Eu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Eu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value.x+", "+this.value.y+")"},Eu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value.x+", "+this.value.y+", "+this.value.z+")"},Eu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value.x+", "+this.value.y+", "+this.value.z+", 0)"},Eu.$metadata$={kind:$,simpleName:"ModelVar3iConst",interfaces:[gu]},Tu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Tu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Tu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Tu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), float("+this.value.w+"))"},Tu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Tu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value.x+", "+this.value.y+")"},Tu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value.x+", "+this.value.y+", "+this.value.z+")"},Tu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value.x+", "+this.value.y+", "+this.value.z+", "+this.value.w+")"},Tu.$metadata$={kind:$,simpleName:"ModelVar4iConst",interfaces:[bu]},Pu.$metadata$={kind:$,simpleName:"ShaderGenerator",interfaces:[]},Ou.$metadata$={kind:$,simpleName:"ShaderInterfaceIoVar",interfaces:[]},Object.defineProperty(Mu.prototype,"outputs",{configurable:!0,get:function(){return this.mutOutputs_rh28ou$_0}}),Object.defineProperty(Mu.prototype,"nodes",{configurable:!0,get:function(){return this.mutNodes}}),Object.defineProperty(Mu.prototype,"nextNodeId",{configurable:!0,get:function(){return this.nextNodeId_bjjntk$_0},set:function(t){this.nextNodeId_bjjntk$_0=t}}),Mu.prototype.findNode_45s15y$=K("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderGraph.findNode_45s15y$",X((function(){var t=e.equals,i=e.throwCCE;return function(e,n,o){var r,s,a=this.nodes;t:do{var l;for(l=a.iterator();l.hasNext();){var u=l.next();if(t(u.name,o)&&n(u)){s=u;break t}}s=null}while(0);return null==(r=s)||n(r)?r:i()}}))),Mu.prototype.addStageOutput_ca2n0y$=function(t,e,i){var n;void 0===i&&(i=1);var o=0;for(n=this.mutOutputs_rh28ou$_0.iterator();n.hasNext();)o=o+n.next().locationInc|0;var r=new Ou(o,t,e,i);return this.mutOutputs_rh28ou$_0.add_11rb$(r),r},Mu.prototype.addNode_j0v1fw$=function(t){if(t.graph!==this)throw gt("Node can only be added to it's parent graph");this.mutNodes.add_11rb$(t)},Mu.prototype.clear=function(){this.descriptorSet.clear(),this.pushConstants.clear(),this.inputs.clear(),this.mutOutputs_rh28ou$_0.clear()},Mu.prototype.setup=function(){var t;for(t=this.nodes.iterator();t.hasNext();)t.next().setup_llmhyc$(this)},Mu.prototype.generateCode_626509$=function(t){var e;for(this.sortNodesByDependencies_dlleyv$_0(),e=this.nodes.iterator();e.hasNext();)e.next().generateCode_626509$(t)},Mu.prototype.sortNodesByDependencies_dlleyv$_0=function(){for(var t=ct();!this.nodes.isEmpty();){for(var e=this.mutNodes.iterator(),i=!1;e.hasNext();){var n=e.next();t.containsAll_brywnq$(n.dependencies)&&(t.add_11rb$(n),e.remove(),i=!0)}if(!i){var o;for(jt(this.model.modelInfo+" - Remaining nodes:"),o=this.nodes.iterator();o.hasNext();){var r,s=o.next();for(jt(s.name),r=s.dependencies.iterator();r.hasNext();){var a=r.next(),l=t.contains_11rb$(a)?"[ok]":"[missing]";jt("    -> "+a.name+" "+l)}}throw gt("Unable to resolve shader graph (circular or missing dependency?)")}}this.mutNodes.addAll_brywnq$(t)},Mu.$metadata$={kind:$,simpleName:"ShaderGraph",interfaces:[]},ju.$metadata$={kind:$,simpleName:"VertexShaderGraph",interfaces:[Mu]},Au.$metadata$={kind:$,simpleName:"FragmentShaderGraph",interfaces:[Mu]},Object.defineProperty(Iu.prototype,"vertexStageGraph",{configurable:!0,get:function(){var t;return e.isType(t=this.stages.get_11rb$(Hp()),ju)?t:c()}}),Object.defineProperty(Iu.prototype,"fragmentStageGraph",{configurable:!0,get:function(){var t;return e.isType(t=this.stages.get_11rb$(Yp()),Au)?t:c()}}),Iu.prototype.findNode_3klnlw$=K("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderModel.findNode_3klnlw$",X((function(){var i=t.de.fabmax.kool.pipeline.ShaderStage,n=e.kotlin.Unit,o=e.wrapFunction,r=e.equals,s=e.throwCCE;return o((function(){var t=e.equals,i=e.throwCCE;return function(e,o,r,s){return function(r){if(0!=(r.stage.mask&e.mask)){var a,l,u=s,p=o,c=r.nodes;t:do{var h;for(h=c.iterator();h.hasNext();){var d=h.next();if(t(d.name,p)&&u(d)){l=d;break t}}l=null}while(0);var f=null==(a=l)||u(a)?a:i();if(null!=f)return f}return n}}})),function(t,e,n,o){var a;for(void 0===o&&(o=i.ALL),a=this.stages.values.iterator();a.hasNext();){var l=a.next();if(0!=(l.stage.mask&o.mask)){var u,p,c=l.nodes;t:do{var h;for(h=c.iterator();h.hasNext();){var d=h.next();if(r(d.name,n)&&e(d)){p=d;break t}}p=null}while(0);var f=null==(u=p)||e(u)?u:s();if(null!=f)return f}}return null}}))),Iu.prototype.findNodeByType_vinsr2$=K("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderModel.findNodeByType_vinsr2$",X((function(){var i=t.de.fabmax.kool.pipeline.ShaderStage,n=e.kotlin.collections.firstOrNull_2p1efm$,o=e.kotlin.Unit,r=e.wrapFunction,s=e.kotlin.collections.ArrayList_init_287e2$;return r((function(){var t=e.kotlin.collections.ArrayList_init_287e2$;return function(e,i,r){return function(i){if(0!=(i.stage.mask&e.mask)){var s,a=r,l=i.nodes,u=t();for(s=l.iterator();s.hasNext();){var p=s.next();a(p)&&u.add_11rb$(p)}var c=n(u);if(null!=c)return c}return o}}})),function(t,e,o){var r;for(void 0===o&&(o=i.ALL),r=this.stages.values.iterator();r.hasNext();){var a=r.next();if(0!=(a.stage.mask&o.mask)){var l,u=a.nodes,p=s();for(l=u.iterator();l.hasNext();){var c=l.next();e(c)&&p.add_11rb$(c)}var h=n(p);if(null!=h)return h}}return null}}))),Iu.prototype.setup_xbeod6$=function(t,e){var i,n;for(e.name=this.modelInfo,i=this.stages.values.iterator();i.hasNext();)i.next().clear();for(n=this.stages.values.iterator();n.hasNext();)n.next().setup();this.setupAttributes_0(t,e);var o,r,a=new Sl,l=M(),u=new Is;for(o=this.stages.values.iterator();o.hasNext();){var p,c=o.next();xt(u.descriptors,c.descriptorSet.descriptors),xt(a.pushConstants,c.pushConstants.pushConstants),xt(a.stages,c.pushConstants.stages),null!=(p=c.pushConstants.onUpdate)&&l.add_11rb$(p)}u.descriptors.isEmpty()||e.descriptorSetLayouts.add_11rb$(u),a.pushConstants.isEmpty()||(e.pushConstantRanges.add_11rb$(a),l.isEmpty()||(a.onUpdate=(r=l,function(t,e){for(var i=0;i!==r.size;++i)r.get_za3lpa$(i)(t,e);return s})))},Iu.prototype.setupAttributes_0=function(t,e){var i,n,o,r={v:0},s=t.geometry,a=M(),l=M(),u=0;for(i=this.vertexStageGraph.requiredVertexAttributes.iterator();i.hasNext();){var p,c=i.next();if(null==(p=s.attributeByteOffsets.get_11rb$(c)))throw new _t("Mesh does not include required vertex attribute: "+c.name);var h=p;if(c.type.isInt){var d=new fd(r.v,h,c);l.add_11rb$(d)}else{var f=new fd(r.v,h,c);a.add_11rb$(f)}r.v=r.v+c.props.nSlots|0}n=e.vertexLayout.bindings;var _=new dd((u=(o=u)+1|0,o),yd(),a,s.byteStrideF);if(n.add_11rb$(_),!l.isEmpty()){var m,$;m=e.vertexLayout.bindings;var y=new dd((u=($=u)+1|0,$),yd(),l,s.byteStrideI);m.add_11rb$(y)}var v=t.instances;if(null!=v){var g,b=M();for(g=this.vertexStageGraph.requiredInstanceAttributes.iterator();g.hasNext();){var x,w=g.next();if(null==(x=v.attributeOffsets.get_11rb$(w)))throw new _t("Mesh does not include required instance attribute: "+w.name);var z=x,k=new fd(r.v,z,w);b.add_11rb$(k),r.v=r.v+w.props.nSlots|0}var S=e.vertexLayout.bindings,C=new dd(u,vd(),b,v.strideBytesF);S.add_11rb$(C)}else if(!this.vertexStageGraph.requiredInstanceAttributes.isEmpty())throw gt("Shader model requires instance attributes, but mesh doesn't provide any")},Ru.prototype.addNode_u9w9by$=function(t){return this.stage.addNode_j0v1fw$(t),t},Ru.prototype.combineNode_m7a9qd$=function(t){return this.addNode_u9w9by$(new Pp(t,this.stage))},Ru.prototype.combineXyzWNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Op(this.stage));return null!=t&&(i.inXyz=t),null!=e&&(i.inW=e),i},Ru.prototype.splitNode_500t7j$=function(t,e){var i=this.addNode_u9w9by$(new Tp(e,this.stage));return i.input=t,i},Ru.prototype.addNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new eu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Ru.prototype.subtractNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new iu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Ru.prototype.divideNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new nu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Ru.prototype.multiplyNode_tuikh5$=function(t,e){return this.multiplyNode_ze33is$(t,new Fu(new wu(e)))},Ru.prototype.multiplyNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new ou(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},Ru.prototype.mixNode_92v6he$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new ru(this.stage));return null!=t&&(n.left=t),null!=e&&(n.right=e),null!=i&&(n.mixFac=i),n},Ru.prototype.vecFromColorNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new su(this.stage));return null!=t&&(e.input=t),e},Ru.prototype.viewDirNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new uu(this.stage));return null!=t&&(i.inCamPos=t),null!=e&&(i.inWorldPos=e),i},Ru.prototype.distanceNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new au(this.stage));return null!=t&&(i.inA=t),null!=e&&(i.inB=e),i},Ru.prototype.normalizeNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new lu(this.stage));return null!=t&&(e.input=t),e},Ru.prototype.reflectNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new pu(this.stage));return null!=t&&(i.inDirection=t),null!=e&&(i.inNormal=e),i},Ru.prototype.refractNode_92v6he$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new cu(this.stage));return null!=t&&(n.inDirection=t),null!=e&&(n.inNormal=e),null!=i&&(n.inIor=i),n},Ru.prototype.normalMapNode_j8913i$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=this.addNode_u9w9by$(new Cp(t,this.stage));return null!=e&&(o.inTexCoord=e),null!=i&&(o.inNormal=i),null!=n&&(o.inTangent=n),o},Ru.prototype.displacementMapNode_7fvjbk$=function(t,e,i,n,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null);var r=this.addNode_u9w9by$(new Ep(t,this.stage));return null!=e&&(r.inTexCoord=e),null!=i&&(r.inPosition=i),null!=n&&(r.inNormal=n),null!=o&&(r.inStrength=o),r},Ru.prototype.gammaNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Ll(this.stage));return null!=t&&(i.inColor=t),null!=e&&(i.inGamma=e),i},Ru.prototype.hdrToLdrNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Dl(this.stage));return null!=t&&(e.inColor=t),e},Ru.prototype.premultiplyColorNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Rl(this.stage));return null!=t&&(e.inColor=t),e},Ru.prototype.colorAlphaNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Il(this.stage));return null!=t&&(i.inColor=t),null!=e&&(i.inAlpha=e),i},Ru.prototype.namedVariable_wtmwsg$=function(t,e){void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Bp(t,this.stage));return null!=e&&(i.input=e),i},Ru.prototype.constFloat_mx4ult$=function(t){return new Fu(new wu(t))},Ru.prototype.constVec2f_czzhjp$=function(t){return new Fu(new zu(t))},Ru.prototype.constVec3f_czzhiu$=function(t){return new Fu(new ku(t))},Ru.prototype.constVec4f_czzhhz$=function(t){return new Fu(new Su(t))},Ru.prototype.constInt_za3lpa$=function(t){return new Fu(new Cu(t))},Ru.prototype.constVec2i_czzhjm$=function(t){return new Fu(new Nu(t))},Ru.prototype.constVec3i_czzhir$=function(t){return new Fu(new Eu(t))},Ru.prototype.constVec4i_czzhhw$=function(t){return new Fu(new Tu(t))},Ru.prototype.pushConstantNode1f_61zpoe$=function(t){return this.addNode_u9w9by$(new dp(new Kh(t),this.stage))},Ru.prototype.pushConstantNode2f_61zpoe$=function(t){return this.addNode_u9w9by$(new fp(new Yh(t),this.stage))},Ru.prototype.pushConstantNode3f_61zpoe$=function(t){return this.addNode_u9w9by$(new _p(new Zh(t),this.stage))},Ru.prototype.pushConstantNode4f_61zpoe$=function(t){return this.addNode_u9w9by$(new mp(new Jh(t),this.stage))},Ru.prototype.pushConstantNodeColor_61zpoe$=function(t){return this.addNode_u9w9by$(new $p(new Qh(t),this.stage))},Ru.prototype.pushConstantNode1f_978i2u$=function(t){return this.addNode_u9w9by$(new dp(t,this.stage))},Ru.prototype.pushConstantNode2f_978i3p$=function(t){return this.addNode_u9w9by$(new fp(t,this.stage))},Ru.prototype.pushConstantNode3f_978i4k$=function(t){return this.addNode_u9w9by$(new _p(t,this.stage))},Ru.prototype.pushConstantNode4f_978i5f$=function(t){return this.addNode_u9w9by$(new mp(t,this.stage))},Ru.prototype.pushConstantNodeColor_uqrny$=function(t){return this.addNode_u9w9by$(new $p(t,this.stage))},Ru.prototype.pushConstantNode1i_61zpoe$=function(t){return this.addNode_u9w9by$(new yp(new ad(t),this.stage))},Ru.prototype.pushConstantNode2i_61zpoe$=function(t){return this.addNode_u9w9by$(new vp(new ud(t),this.stage))},Ru.prototype.pushConstantNode3i_61zpoe$=function(t){return this.addNode_u9w9by$(new gp(new pd(t),this.stage))},Ru.prototype.pushConstantNode4i_61zpoe$=function(t){return this.addNode_u9w9by$(new bp(new cd(t),this.stage))},Ru.prototype.pushConstantNode1i_978i2x$=function(t){return this.addNode_u9w9by$(new yp(t,this.stage))},Ru.prototype.pushConstantNode2i_978i3s$=function(t){return this.addNode_u9w9by$(new vp(t,this.stage))},Ru.prototype.pushConstantNode3i_978i4n$=function(t){return this.addNode_u9w9by$(new gp(t,this.stage))},Ru.prototype.pushConstantNode4i_978i5i$=function(t){return this.addNode_u9w9by$(new bp(t,this.stage))},Ru.prototype.morphWeightsNode_za3lpa$=function(t){return this.addNode_u9w9by$(new cp(t,this.stage))},Ru.prototype.getMorphWeightNode_dcktnw$=function(t,e){return this.getMorphWeightNode_5bdpk2$(t,e.outWeights0,e.outWeights1)},Ru.prototype.getMorphWeightNode_5bdpk2$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new qp(t,this.stage));return null!=e&&(n.inWeights0=e),null!=i&&(n.inWeights1=i),n},Ru.prototype.textureNode_61zpoe$=function(t){return this.addNode_u9w9by$(new up(this.stage,t))},Ru.prototype.textureSamplerNode_ce41yx$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new xp(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},Ru.prototype.noiseTextureSamplerNode_gwl5ki$=function(t,e){void 0===e&&(e=null);var i=this.addNode_u9w9by$(new wp(t,this.stage));return null!=e&&(i.inTexSize=e),i},Ru.prototype.equiRectSamplerNode_v8d7vy$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var o=this.addNode_u9w9by$(new kp(t,this.stage,i,n));return null!=e&&(o.inTexCoord=e),o},Ru.prototype.cubeMapNode_61zpoe$=function(t){return this.addNode_u9w9by$(new pp(this.stage,t))},Ru.prototype.cubeMapSamplerNode_2z3a2t$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new zp(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},Ru.prototype.vec3TransformNode_vid4wo$=function(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),void 0===n&&(n=!1);var o=this.addNode_u9w9by$(new Qu(this.stage,i,n));return null!=t&&(o.inVec=t),null!=e&&(o.inMat=e),o},Ru.prototype.vec4TransformNode_9krp9t$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1);var n=this.addNode_u9w9by$(new tp(this.stage,i));return null!=t&&(n.inVec=t),null!=e&&(n.inMat=e),n},Ru.$metadata$={kind:$,simpleName:"StageBuilder",interfaces:[]},Object.defineProperty(Lu.prototype,"positionOutput",{configurable:!0,get:function(){return this.$outer.vertexStageGraph.positionOutput},set:function(t){this.$outer.vertexStageGraph.positionOutput=t}}),Lu.prototype.attrColors=function(){return this.attributeNode_nm2vx5$(ds().COLORS)},Lu.prototype.attrNormals=function(){return this.attributeNode_nm2vx5$(ds().NORMALS)},Lu.prototype.attrPositions=function(){return this.attributeNode_nm2vx5$(ds().POSITIONS)},Lu.prototype.attrTangents=function(){return this.attributeNode_nm2vx5$(ds().TANGENTS)},Lu.prototype.attrTexCoords=function(){return this.attributeNode_nm2vx5$(ds().TEXTURE_COORDS)},Lu.prototype.attrJoints=function(){return this.attributeNode_nm2vx5$(ds().JOINTS)},Lu.prototype.attrWeights=function(){return this.attributeNode_nm2vx5$(ds().WEIGHTS)},Lu.prototype.attributeNode_nm2vx5$=function(t){return this.addNode_u9w9by$(new Mp(t,this.stage))},Lu.prototype.instanceAttrModelMat=function(){return this.instanceAttributeNode_nm2vx5$(Qz().MODEL_MAT)},Lu.prototype.instanceAttributeNode_nm2vx5$=function(t){return this.addNode_u9w9by$(new jp(t,this.stage))},Lu.prototype.pointSize_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Up(this.stage));return null!=t&&(e.inSize=t),e},Lu.prototype.stageInterfaceNode_iikjwn$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=new Ap(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);return n.isFlat=i,null!=e&&(n.input=e),this.addNode_u9w9by$(n.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(n.fragmentNode),n},Lu.prototype.mvpNode=function(){return this.addNode_u9w9by$(new sp(this.stage))},Lu.prototype.skinTransformNode_78eraa$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=64);var n=this.addNode_u9w9by$(new ep(this.stage,i));return null!=t&&(n.inJoints=t),null!=e&&(n.inWeights=e),n},Lu.prototype.premultipliedMvpNode=function(){return this.addNode_u9w9by$(new np(this.stage))},Lu.prototype.simpleShadowMapNode_7yd351$=function(t,e,i){void 0===i&&(i=null);var n=new Uu(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);this.addNode_u9w9by$(n.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(n.fragmentNode);var o=new up(this.$outer.fragmentStageGraph,e);o.isDepthTexture=!0;var r=o;return this.$outer.fragmentStageGraph.addNode_j0v1fw$(r),null!=i&&(n.inWorldPos=i),n.depthMap=r,n},Lu.prototype.cascadedShadowMapNode_zw58l$=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var o=new Wu(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);this.addNode_u9w9by$(o.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(o.fragmentNode);var r=new up(this.$outer.fragmentStageGraph,e);r.isDepthTexture=!0,r.arraySize=t.numCascades;var s=r;return this.$outer.fragmentStageGraph.addNode_j0v1fw$(s),null!=n&&(o.inWorldPos=n),null!=i&&(o.inViewPosition=i),o.depthMap=s,o},Lu.prototype.simpleVertexPositionNode=function(){return this.vec4TransformNode_9krp9t$(this.attrPositions().output,this.premultipliedMvpNode().outMvpMat)},Lu.prototype.fullScreenQuadPositionNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Dp(this.stage));return null!=t&&(e.inTexCoord=t),e},Lu.$metadata$={kind:$,simpleName:"VertexStageBuilder",interfaces:[Ru]},Du.prototype.flipBacksideNormalNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Np(this.stage));return null!=t&&(e.inNormal=t),e},Du.prototype.multiLightNode_d76fwk$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=4);var i=this.addNode_u9w9by$(new Ul(this.stage,e));return null!=t&&(i.inFragPos=t),i},Du.prototype.singleLightNode_ycjtt8$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Wl(this.stage));if(null!=t){var i=this.addNode_u9w9by$(new Gl(this.stage));i.light=t,e.inLightPos=i.outLightPos,e.inLightDir=i.outLightDir,e.inLightColor=i.outLightColor}return e},Du.prototype.screenCoordNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Lp(this.stage));return null!=t&&(e.inViewport=t),e},Du.prototype.deferredSimpleShadowMapNode_dhoqzq$=function(t,e,i){var n=this.addNode_u9w9by$(new up(this.stage,e));n.isDepthTexture=!0;var o=n,r=this.addNode_u9w9by$(new Vu(t,this.stage));r.inWorldPos=i;var s=r,a=this.addNode_u9w9by$(new Hu(t,this.stage));return a.inPosLightSpace=s.outPosLightSpace,a.depthMap=o,a},Du.prototype.deferredCascadedShadowMapNode_y1yrn$=function(t,e,i,n){var o=this.addNode_u9w9by$(new up(this.stage,e));o.isDepthTexture=!0,o.arraySize=t.numCascades;var r=o,s=this.addNode_u9w9by$(new Xu(t,this.stage));s.inWorldPos=n;var a=s,l=this.addNode_u9w9by$(new Zu(t,this.stage));return l.inViewZ=this.splitNode_500t7j$(i,"z").output,l.inPosLightSpace=a.outPosLightSpace,l.depthMap=r,l},Du.prototype.unlitMaterialNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Yl(this.stage));return null!=t&&(e.inColor=t),e},Du.prototype.phongMaterialNode_4h00d0$=function(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=this.addNode_u9w9by$(new Zl(this.stage));return null!=t&&(o.inAlbedo=t),null!=e&&(o.inNormal=e),null!=n&&(o.inCamPos=n),null!=i&&(o.inFragPos=i),o},Du.prototype.pbrMaterialNode_m8txso$=function(t,e,i,n,o,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null);var s=this.addNode_u9w9by$(new Jl(t,e,this.stage));return null!=i&&(s.inAlbedo=i),null!=n&&(s.inNormal=n),null!=r&&(s.inViewDir=r),null!=o&&(s.inFragPos=o),s},Du.prototype.pbrLightNode=function(){return this.addNode_u9w9by$(new Ql(this.stage))},Du.prototype.colorOutput_a3v4si$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new ql(this.stage,e));return null!=t&&(n.inColors[0]=t),n.alpha=i,n},Du.prototype.discardAlpha_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Bl(this.stage));return null!=t&&(i.inAlpha=t),null!=e&&(i.inAlphaCutoff=e),i},Du.prototype.depthOutput_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Fl(this.stage));return null!=t&&(e.inDepth=t),e},Du.$metadata$={kind:$,simpleName:"FragmentStageBuilder",interfaces:[Ru]},Iu.$metadata$={kind:$,simpleName:"ShaderModel",interfaces:[]},qu.prototype.dependsOn_lhtstx$=function(t){null!=t&&t!==this&&this.dependencies.add_11rb$(t)},qu.prototype.dependsOn_7qvs0d$=function(t){this.dependsOn_lhtstx$(t.node)},qu.prototype.dependsOn_8ak6wm$=function(t){var e;for(e=0;e!==t.length;++e){var i=t[e];this.dependsOn_7qvs0d$(i)}},qu.prototype.setup_llmhyc$=function(t){if(0==(t.stage.mask&this.allowedStages)){var e="Unallowed shader stage ("+t.stage+" for node "+this.name;throw gt(e.toString())}},qu.prototype.generateCode_626509$=function(t){},qu.$metadata$={kind:$,simpleName:"ShaderNode",interfaces:[]},Object.defineProperty(Fu.prototype,"name",{configurable:!0,get:function(){return this.variable.name}}),Fu.prototype.declare=function(){return this.variable.declare()},Fu.prototype.ref1f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref1f_61zpoe$(t)},Fu.prototype.ref2f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref2f_61zpoe$(t)},Fu.prototype.ref3f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref3f_61zpoe$(t)},Fu.prototype.ref4f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref4f_61zpoe$(t)},Fu.prototype.ref1i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref1i_61zpoe$(t)},Fu.prototype.ref2i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref2i_61zpoe$(t)},Fu.prototype.ref3i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref3i_61zpoe$(t)},Fu.prototype.ref4i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref4i_61zpoe$(t)},Fu.prototype.refAsType_fz5f65$=function(t,e){return void 0===e&&(e="0"),this.variable.refAsType_fz5f65$(t,e)},Fu.prototype.toString=function(){var t;switch(this.variable.type.name){case"FLOAT":t=this.ref1f_61zpoe$();break;case"VEC_2F":t=this.ref2f_61zpoe$();break;case"VEC_3F":t=this.ref3f_61zpoe$();break;case"VEC_4F":t=this.ref4f_61zpoe$();break;default:t=this.refAsType_fz5f65$(this.variable.type)}return t},Fu.$metadata$={kind:$,simpleName:"ShaderNodeIoVar",interfaces:[]},Object.defineProperty(Bu.prototype,"depthMap",{configurable:!0,get:function(){return this.depthMap_25rtms$_0},set:function(t){this.depthMap_25rtms$_0=t}}),Bu.$metadata$={kind:$,simpleName:"ShadowMapNode",interfaces:[]},Object.defineProperty(Uu.prototype,"inWorldPos",{configurable:!0,get:function(){return this.vertexNode.inWorldPos},set:function(t){this.vertexNode.inWorldPos=t}}),Object.defineProperty(Uu.prototype,"inDepthOffset",{configurable:!0,get:function(){return this.fragmentNode.inDepthOffset},set:function(t){this.fragmentNode.inDepthOffset=t}}),Object.defineProperty(Uu.prototype,"depthMap",{configurable:!0,get:function(){return this.fragmentNode.depthMap},set:function(t){this.fragmentNode.depthMap=t}}),Object.defineProperty(Uu.prototype,"outShadowFac",{configurable:!0,get:function(){return this.fragmentNode.outShadowFac}}),Uu.$metadata$={kind:$,simpleName:"SimpleShadowMapNode",interfaces:[Bu]},Vu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inWorldPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Gu(this))},Vu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outPosLightSpace.declare()+" = "+this.uShadowMapVP.name+" * vec4("+this.inWorldPos.ref3f_61zpoe$()+", 1.0);")},Vu.$metadata$={kind:$,simpleName:"SimpleShadowMapTransformNode",interfaces:[qu]},Hu.prototype.setup_llmhyc$=function(t){var e;if(qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDepthOffset,this.inPosLightSpace]),null==(e=this.depthMap))throw cn("Depth map input not set");this.dependsOn_lhtstx$(e)},Hu.prototype.generateCode_626509$=function(t){var e;if(null==(e=this.depthMap))throw cn("Depth map input not set");var i=e,n=Ot(),o={v:0};if(this.useDithering){var r;for(n.append_pdl1vj$("vec2 "+this.name+"_offset = vec2(float(fract(gl_FragCoord.x * 0.5) > 0.25), float(fract(gl_FragCoord.y * 0.5) > 0.25));"),r=At([new oo(-1.5,.5),new oo(.5,.5),new oo(-1.5,-1.5),new oo(.5,-1.5)]).iterator();r.hasNext();){var s=r.next(),a="vec4("+this.name+"_pos.xy + ("+this.name+"_offset + vec2("+s.x+", "+s.y+")) * "+this.name+"_scale * "+this.name+"_pos.w, "+this.name+"_pos.z, "+this.name+"_pos.w)";n.append_pdl1vj$(this.outShadowFac.name+" += "+t.sampleTexture2dDepth_puj7f4$(i.name,a)+";\n"),o.v=o.v+1|0}}else{for(var l,u=M(),p=0;p<=3;p++)for(var c=0;c<=3;c++){var h=new oo(-1.5+c,-1.5+p);u.add_11rb$(h)}for(l=u.iterator();l.hasNext();){var d=l.next(),f="vec4("+this.name+"_pos.xy + (vec2("+d.x+", "+d.y+")) * "+this.name+"_scale * "+this.name+"_pos.w, "+this.name+"_pos.z, "+this.name+"_pos.w)";n.append_pdl1vj$(this.outShadowFac.name+" += "+t.sampleTexture2dDepth_puj7f4$(i.name,f)+";\n"),o.v=o.v+1|0}}t.appendMain_61zpoe$("\n            vec4 "+this.name+"_pos = "+this.inPosLightSpace.ref4f_61zpoe$()+";\n            \n            // check shadow map bounds\n            "+this.outShadowFac.declare()+" = 1.0;\n            vec3 "+this.name+"_posW = "+this.name+"_pos.xyz / "+this.name+"_pos.w;\n            if ("+this.name+"_posW.x > 0.0 && "+this.name+"_posW.x < 1.0\n                && "+this.name+"_posW.y > 0.0 && "+this.name+"_posW.y < 1.0\n                && "+this.name+"_posW.z > -1.0 && "+this.name+"_posW.z < 1.0) {\n            \n                float "+this.name+"_size = float(textureSize("+i.name+", 0).x);\n                float "+this.name+"_scale = 1.0 / float("+this.name+"_size);\n                "+this.name+"_pos.z += "+this.inDepthOffset.ref1f_61zpoe$()+";\n                "+this.outShadowFac.name+" = 0.0;\n                "+n+"\n                "+this.outShadowFac.name+" *= "+1/o.v+";\n            }\n        ")},Hu.$metadata$={kind:$,simpleName:"SimpleShadowMapFragmentNode",interfaces:[qu]},Object.defineProperty(Wu.prototype,"inWorldPos",{configurable:!0,get:function(){return this.vertexNode.inWorldPos},set:function(t){this.vertexNode.inWorldPos=t}}),Object.defineProperty(Wu.prototype,"inDepthOffset",{configurable:!0,get:function(){return this.fragmentNode.inDepthOffset},set:function(t){this.fragmentNode.inDepthOffset=t}}),Object.defineProperty(Wu.prototype,"depthMap",{configurable:!0,get:function(){return this.fragmentNode.depthMap},set:function(t){this.fragmentNode.depthMap=t}}),Object.defineProperty(Wu.prototype,"outShadowFac",{configurable:!0,get:function(){return this.fragmentNode.outShadowFac}}),Ku.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.$outer.inViewPosition,this.$outer.vertexNode.outPosLightSpace]);var e=this.$outer.fragmentGraph.inputs,i=this.$outer.vertexGraph.addStageOutput_ca2n0y$(this.$outer.posLightSpace_0.variable,!1,this.$outer.shadowMap.numCascades);e.add_11rb$(i);var n=this.$outer.fragmentGraph.inputs,o=this.$outer.vertexGraph.addStageOutput_ca2n0y$(this.$outer.ifViewZ_0.variable,!1);n.add_11rb$(o)},Ku.prototype.generateCode_626509$=function(t){var e;t.appendMain_61zpoe$(this.$outer.ifViewZ_0.name+" = "+this.$outer.inViewPosition+".z;"),e=this.$outer.shadowMap.numCascades;for(var i=0;i<e;i++)t.appendMain_61zpoe$(It(this.$outer.posLightSpace_0.name,91)+"["+i+"] = "+It(this.$outer.vertexNode.outPosLightSpace.name,91)+"["+i+"];")},Ku.$metadata$={kind:$,simpleName:"CascadedShadowHelperNd",interfaces:[qu]},Wu.$metadata$={kind:$,simpleName:"CascadedShadowMapNode",interfaces:[Bu]},Xu.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inWorldPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Yu(this))},Xu.prototype.generateCode_626509$=function(t){var e;t.appendMain_61zpoe$(this.outPosLightSpace.declare()+";"),e=this.shadowMap.numCascades;for(var i=0;i<e;i++)t.appendMain_61zpoe$(It(this.outPosLightSpace.name,91)+"["+i+"] = "+this.uShadowMapVP.name+"["+i+"] * vec4("+this.inWorldPos.ref3f_61zpoe$()+", 1.0);")},Xu.$metadata$={kind:$,simpleName:"CascadedShadowMapTransformNode",interfaces:[qu]},Zu.prototype.setup_llmhyc$=function(t){var e;if(qu.prototype.setup_llmhyc$.call(this,t),null==(e=this.depthMap))throw cn("Depth map input not set");this.dependsOn_lhtstx$(e),this.dependsOn_8ak6wm$([this.inDepthOffset,this.inPosLightSpace,this.inViewZ]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Ju(this))},Zu.prototype.generateCode_626509$=function(t){var e,i;if(null==(e=this.depthMap))throw cn("Depth map input not set");var n=e,o=Ot(),r={v:0};if(this.useDithering){var s;for(o.append_pdl1vj$("vec2 offset = vec2(float(fract(gl_FragCoord.x * 0.5) > 0.25), float(fract(gl_FragCoord.y * 0.5) > 0.25));"),s=At([new oo(-1.5,.5),new oo(.5,.5),new oo(-1.5,-1.5),new oo(.5,-1.5)]).iterator();s.hasNext();){var a=s.next(),l="vec4(projPos.xy + (offset + vec2("+a.x+", "+a.y+")) * texScale * projPos.w, projPos.z, projPos.w)";o.append_pdl1vj$("shadowFac += "+t.sampleTexture2dDepth_puj7f4$("shadowTex",l)+";\n"),r.v=r.v+1|0}}else{for(var u,p=M(),c=0;c<=3;c++)for(var h=0;h<=3;h++){var d=new oo(-1.5+h,-1.5+c);p.add_11rb$(d)}for(u=p.iterator();u.hasNext();){var f=u.next(),_="vec4(projPos.xy + (vec2("+f.x+", "+f.y+")) * texScale * projPos.w, projPos.z, projPos.w)";o.append_pdl1vj$("shadowFac += "+t.sampleTexture2dDepth_puj7f4$("shadowTex",_)+";\n"),r.v=r.v+1|0}}t.appendFunction_puj7f4$("cascadedShadowFac","\n            float cascadedShadowFac(sampler2DShadow shadowTex, vec4 projPos, float depthOffset) {\n                float texSize = float(textureSize(shadowTex, 0).x);\n                float texScale = 1.0 / float(texSize);\n                projPos.z += depthOffset;\n                float shadowFac = 0.0;\n                if (projPos.z >= 1.0) {\n                    shadowFac = 1.0;\n                } else {\n                    "+o+"\n                    shadowFac *= "+1/r.v+";\n                }\n                return shadowFac;\n            }\n        "),t.appendMain_61zpoe$("\n                "+this.outShadowFac.declare()+" = 1.0;\n            "),i=this.shadowMap.numCascades;for(var m=0;m<i;m++)t.appendMain_61zpoe$("\n                    if ("+this.inViewZ.ref1f_61zpoe$()+" >= "+this.uViewSpaceRanges_0.name+"["+m+"]) {\n                        "+this.outShadowFac.name+" = cascadedShadowFac("+n.name+"["+m+"], "+It(this.inPosLightSpace.name,91)+"["+m+"], "+this.inDepthOffset.ref1f_61zpoe$()+");\n                    }\n                "),m<(this.shadowMap.numCascades-1|0)&&t.appendMain_61zpoe$(" else ")},Zu.$metadata$={kind:$,simpleName:"CascadedShadowMapFragmentNode",interfaces:[qu]},Qu.prototype.setup_llmhyc$=function(t){var e,i;if(qu.prototype.setup_llmhyc$.call(this,t),e=this.inVec,null==(i=this.inMat))throw cn("Matrix input not set");this.dependsOn_8ak6wm$([e,i])},Qu.prototype.generateCode_626509$=function(t){var e;if(null==(e=this.inMat))throw cn("Matrix input not set");var i=e,n=this.inVec.variable.type===is()?this.inVec.ref4f_61zpoe$():"vec4("+this.inVec.ref3f_61zpoe$()+", "+this.w+")",o=this.invert?"-":"";t.appendMain_61zpoe$(this.outVec3.declare()+" = "+o+"("+i.refAsType_fz5f65$(us())+" * "+n+").xyz;")},Qu.$metadata$={kind:$,simpleName:"Vec3TransformNode",interfaces:[qu]},tp.prototype.setup_llmhyc$=function(t){var e,i;if(qu.prototype.setup_llmhyc$.call(this,t),e=this.inVec,null==(i=this.inMat))throw cn("Matrix input not set");this.dependsOn_8ak6wm$([e,i])},tp.prototype.generateCode_626509$=function(t){var e,i;if(null==(i=null!=(e=this.inMat)?e.variable:null))throw cn("Matrix input not set");var n=i,o=this.inVec.variable.type===is()?this.inVec.ref4f_61zpoe$():"vec4("+this.inVec.ref3f_61zpoe$()+", "+this.w+")";t.appendMain_61zpoe$(this.outVec4.declare()+" = "+n.refAsType_fz5f65$(us())+" * "+o+";")},tp.$metadata$={kind:$,simpleName:"Vec4TransformNode",interfaces:[qu]},ep.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inJoints,this.inWeights]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[],ip(this))},ep.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outJointMat.declare()+" = "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".x] * "+this.inWeights.ref4f_61zpoe$()+".x;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".y] * "+this.inWeights.ref4f_61zpoe$()+".y;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".z] * "+this.inWeights.ref4f_61zpoe$()+".z;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".w] * "+this.inWeights.ref4f_61zpoe$()+".w;\n        ")},ep.$metadata$={kind:$,simpleName:"SkinTransformNode",interfaces:[qu]},np.prototype.addToStage_llmhyc$=function(t){var e=new rp(this,t);return this.visibleIn_0.add_11rb$(t.stage),t.addNode_j0v1fw$(e),e},np.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[],op(this))},rp.$metadata$={kind:$,simpleName:"StageCopy",interfaces:[qu]},np.$metadata$={kind:$,simpleName:"UniformBufferPremultipliedMvp",interfaces:[qu]},sp.prototype.addToStage_llmhyc$=function(t){var e=new lp(this,t);return this.visibleIn_0.add_11rb$(t.stage),t.addNode_j0v1fw$(e),e},sp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],ap(this))},sp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outMvpMat.declare()+" = "+this.outProjMat.name+" * "+this.outViewMat.name+" * "+this.outModelMat.name+";")},lp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outMvpMat.declare()+" = "+this.outProjMat.name+" * "+this.outViewMat.name+" * "+this.outModelMat.name+";")},lp.$metadata$={kind:$,simpleName:"StageCopy",interfaces:[qu]},sp.$metadata$={kind:$,simpleName:"UniformBufferMvp",interfaces:[qu]},Object.defineProperty(up.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_put5e8$_0?pt("sampler"):this.sampler_put5e8$_0},set:function(t){this.sampler_put5e8$_0=t}}),up.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e,i=t.descriptorSet,n=new qs;n.arraySize=this.arraySize,n.isDepthSampler=this.isDepthTexture,xt(n.stages,this.visibleIn),n.name=this.name,n.onCreate=(e=this,function(t){return e.sampler=t,s}),i.unaryPlus_ngusss$(n)},up.$metadata$={kind:$,simpleName:"TextureNode",interfaces:[qu]},Object.defineProperty(pp.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_1a0grg$_0?pt("sampler"):this.sampler_1a0grg$_0},set:function(t){this.sampler_1a0grg$_0=t}}),pp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e,i=t.descriptorSet,n=new Bs;xt(n.stages,this.visibleIn),n.name=this.name,n.onCreate=(e=this,function(t){return e.sampler=t,s}),i.unaryPlus_ngusss$(n)},pp.$metadata$={kind:$,simpleName:"CubeMapNode",interfaces:[qu]},cp.prototype.setup_llmhyc$=function(t){if(qu.prototype.setup_llmhyc$.call(this,t),this.nWeights>0){var e=t.pushConstants,i=e.stages,n=t.stage;i.add_11rb$(n),e.unaryPlus_wq3w46$((o=this,function(){return o.uWeights0_0})),this.nWeights>4&&e.unaryPlus_wq3w46$(function(t){return function(){return t.uWeights1_0}}(this)),e.onUpdate=function(t){return function(e,i){var n;if(null!=(n=i.mesh.morphWeights)){var o,r,a=t;o=A.min(4,n.length);for(var l=0;l<o;l++)a.uWeights0_0.value.set_24o109$(l,n[l]);var u=n.length-4|0;r=A.min(4,u);for(var p=0;p<r;p++)a.uWeights1_0.value.set_24o109$(p,n[p+4|0])}return s}}(this)}var o},cp.$metadata$={kind:$,simpleName:"MorphWeightsNode",interfaces:[qu]},hp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e,i=t.pushConstants;xt(i.stages,this.visibleIn),i.unaryPlus_wq3w46$((e=this,function(){return e.uniform})),i.onUpdate=this.onUpdate},hp.$metadata$={kind:$,simpleName:"PushConstantNode",interfaces:[qu]},Object.defineProperty(dp.prototype,"uniform",{get:function(){return this.uniform_24s88i$_0}}),Object.defineProperty(dp.prototype,"output",{configurable:!0,get:function(){return this.output_6ls89f$_0}}),dp.$metadata$={kind:$,simpleName:"PushConstantNode1f",interfaces:[hp]},Object.defineProperty(fp.prototype,"uniform",{get:function(){return this.uniform_rl2ob1$_0}}),Object.defineProperty(fp.prototype,"output",{configurable:!0,get:function(){return this.output_9us71w$_0}}),fp.$metadata$={kind:$,simpleName:"PushConstantNode2f",interfaces:[hp]},Object.defineProperty(_p.prototype,"uniform",{get:function(){return this.uniform_dq6h4k$_0}}),Object.defineProperty(_p.prototype,"output",{configurable:!0,get:function(){return this.output_d3s5ud$_0}}),_p.$metadata$={kind:$,simpleName:"PushConstantNode3f",interfaces:[hp]},Object.defineProperty(mp.prototype,"uniform",{get:function(){return this.uniform_fzofez$_0}}),Object.defineProperty(mp.prototype,"output",{configurable:!0,get:function(){return this.output_gcs4mu$_0}}),mp.$metadata$={kind:$,simpleName:"PushConstantNode4f",interfaces:[hp]},Object.defineProperty($p.prototype,"uniform",{get:function(){return this.uniform_o737wi$_0}}),Object.defineProperty($p.prototype,"output",{configurable:!0,get:function(){return this.output_yy7l5r$_0}}),$p.$metadata$={kind:$,simpleName:"PushConstantNodeColor",interfaces:[hp]},Object.defineProperty(yp.prototype,"uniform",{get:function(){return this.uniform_7m7o4x$_0}}),Object.defineProperty(yp.prototype,"output",{configurable:!0,get:function(){return this.output_p908nk$_0}}),yp.$metadata$={kind:$,simpleName:"PushConstantNode1i",interfaces:[hp]},Object.defineProperty(vp.prototype,"uniform",{get:function(){return this.uniform_xp1hao$_0}}),Object.defineProperty(vp.prototype,"output",{configurable:!0,get:function(){return this.output_si07g1$_0}}),vp.$metadata$={kind:$,simpleName:"PushConstantNode2i",interfaces:[hp]},Object.defineProperty(gp.prototype,"uniform",{get:function(){return this.uniform_3z6kr5$_0}}),Object.defineProperty(gp.prototype,"output",{configurable:!0,get:function(){return this.output_vr068i$_0}}),gp.$metadata$={kind:$,simpleName:"PushConstantNode3i",interfaces:[hp]},Object.defineProperty(bp.prototype,"uniform",{get:function(){return this.uniform_pqobse$_0}}),Object.defineProperty(bp.prototype,"output",{configurable:!0,get:function(){return this.output_z0050z$_0}}),bp.$metadata$={kind:$,simpleName:"PushConstantNode4i",interfaces:[hp]},xp.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},xp.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$(),e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},xp.$metadata$={kind:$,simpleName:"TextureSamplerNode",interfaces:[qu]},wp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexSize)},wp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec2 "+this.name+"_texCoord = (vec2(ivec2(gl_FragCoord.xy) % "+this.inTexSize.ref2i_61zpoe$()+") + 0.5) / "+this.inTexSize.ref2f_61zpoe$()+";\n            "+this.outNoise.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_texCoord")+";\n        ")},wp.$metadata$={kind:$,simpleName:"NoiseTextureSamplerNode",interfaces:[qu]},zp.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.cubeMap),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},zp.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTextureCube_buzeal$(this.cubeMap.name,this.inTexCoord.ref3f_61zpoe$(),e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTextureCube_buzeal$(this.cubeMap.name,this.inTexCoord.ref3f_61zpoe$())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},zp.$metadata$={kind:$,simpleName:"CubeMapSamplerNode",interfaces:[qu]},kp.prototype.setup_llmhyc$=function(t){var e;qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},kp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_in = normalize("+this.inTexCoord.ref3f_61zpoe$()+");\n            vec2 "+this.name+"_uv = vec2(atan("+this.name+"_in.z, "+this.name+"_in.x), -asin("+this.name+"_in.y));\n            "+this.name+"_uv *= vec2(0.1591, 0.3183);\n            "+this.name+"_uv += 0.5;            \n        ");var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_uv",e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_uv")+";"),this.decodeRgbe&&t.appendMain_61zpoe$("\n                vec3 "+this.name+"_fRgb = "+this.outColor+".rgb;\n                float "+this.name+"_fExp = "+this.outColor+".a * 255.0 - 128.0;\n                "+this.outColor+" = vec4("+this.name+"_fRgb * pow(2.0, "+this.name+"_fExp), 1.0);\n            "),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},kp.$metadata$={kind:$,simpleName:"EquiRectSamplerNode",interfaces:[qu]},Sp.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.aoMap),this.dependsOn_7qvs0d$(this.inViewport),qu.prototype.setup_llmhyc$.call(this,t)},Sp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec2 aoMapSamplePos = gl_FragCoord.xy - "+this.inViewport.ref2f_61zpoe$()+";\n                aoMapSamplePos.x /= "+this.inViewport+".z;\n                aoMapSamplePos.y /= "+this.inViewport+".w;\n                "+this.outAo.declare()+" = "+t.sampleTexture2d_buzeal$(this.aoMap.name,"aoMapSamplePos")+".r;\n            ")},Sp.$metadata$={kind:$,simpleName:"AoMapSampleNode",interfaces:[qu]},Cp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inTangent,this.inStrength])},Cp.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("calcBumpedNormal","\n            vec3 calcBumpedNormal(vec3 n, vec4 t, vec3 bumpN, float strength) {\n                vec3 normal = normalize(n);\n                vec3 tangent = normalize(t.xyz);\n                tangent = normalize(tangent - dot(tangent, normal) * normal);\n                vec3 bitangent = cross(normal, tangent) * t.w;\n                mat3 tbn = mat3(tangent, bitangent, normal);\n                return normalize(mix(normal, tbn * bumpN, strength));\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_bumpN = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$())+".xyz * 2.0 - 1.0;\n            "+this.outNormal.declare()+" = calcBumpedNormal("+this.inNormal.ref3f_61zpoe$()+", "+this.inTangent.ref4f_61zpoe$()+", "+this.name+"_bumpN, "+this.inStrength.ref1f_61zpoe$()+");\n        ")},Cp.$metadata$={kind:$,simpleName:"NormalMapNode",interfaces:[qu]},Np.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inNormal)},Np.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendMain_61zpoe$("\n            "+this.outNormal.declare()+" = "+this.inNormal.ref3f_61zpoe$()+" * (float(gl_FrontFacing) * 2.0 - 1.0);\n        ")},Np.$metadata$={kind:$,simpleName:"FlipBacksideNormalNode",interfaces:[qu]},Ep.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inPosition,this.inStrength])},Ep.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendMain_61zpoe$("\n            float "+this.name+"_disp = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$())+".x * "+this.inStrength.ref1f_61zpoe$()+";\n            "+this.outPosition.declare()+" = "+this.inPosition.ref3f_61zpoe$()+" + "+this.inNormal.ref3f_61zpoe$()+" * "+this.name+"_disp;\n        ")},Ep.$metadata$={kind:$,simpleName:"DisplacementMapNode",interfaces:[qu]},Tp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},Tp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.input.name+"."+this.outChannels+";")},Tp.$metadata$={kind:$,simpleName:"SplitNode",interfaces:[qu]},Pp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inX,this.inY,this.inZ,this.inW])},Pp.prototype.generateCode_626509$=function(t){switch(this.output.variable.type.name){case"VEC_2F":t.appendMain_61zpoe$(this.output.declare()+" = vec2("+this.inX.ref1f_61zpoe$()+", "+this.inY.ref1f_61zpoe$()+");");break;case"VEC_3F":t.appendMain_61zpoe$(this.output.declare()+" = vec3("+this.inX.ref1f_61zpoe$()+", "+this.inY.ref1f_61zpoe$()+", "+this.inZ.ref1f_61zpoe$()+");");break;case"VEC_4F":t.appendMain_61zpoe$(this.output.declare()+" = vec4("+this.inX.ref1f_61zpoe$()+", "+this.inY.ref1f_61zpoe$()+", "+this.inZ.ref1f_61zpoe$()+", "+this.inW.ref1f_61zpoe$()+");");break;default:throw V("Only allowed out types are VEC_2F, VEC_3F and VEC_4F")}},Pp.$metadata$={kind:$,simpleName:"CombineNode",interfaces:[qu]},Op.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inXyz,this.inW])},Op.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = vec4("+this.inXyz.ref3f_61zpoe$()+", "+this.inW.ref1f_61zpoe$()+");")},Op.$metadata$={kind:$,simpleName:"Combine31Node",interfaces:[qu]},Mp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),e.isType(t,ju)||c();var i=t.requiredVertexAttributes,n=this.attribute;i.add_11rb$(n)},Mp.$metadata$={kind:$,simpleName:"AttributeNode",interfaces:[qu]},jp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),e.isType(t,ju)||c();var i=t.requiredInstanceAttributes,n=this.attribute;i.add_11rb$(n)},jp.$metadata$={kind:$,simpleName:"InstanceAttributeNode",interfaces:[qu]},Object.defineProperty(Ap.prototype,"input",{configurable:!0,get:function(){return this.input_h7hmfg$_0},set:function(t){this.output=new Fu(new hu(this.name,t.variable.type),this.fragmentNode),this.input_h7hmfg$_0=t}}),Object.defineProperty(Ap.prototype,"output",{configurable:!0,get:function(){return this.output_ftovqj$_0},set:function(t){this.output_ftovqj$_0=t}}),Object.defineProperty(Ap.prototype,"ifVar_0",{configurable:!0,get:function(){return null==this.ifVar_hcczpo$_0?pt("ifVar"):this.ifVar_hcczpo$_0},set:function(t){this.ifVar_hcczpo$_0=t}}),Object.defineProperty(Ip.prototype,"input",{configurable:!0,get:function(){return this.ifNode.input},set:function(t){this.ifNode.input=t}}),Ip.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input),this.$outer.ifVar_0=t.addStageOutput_ca2n0y$(this.$outer.output.variable,this.$outer.isFlat)},Ip.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.$outer.output.name+" = "+this.input.refAsType_fz5f65$(this.$outer.output.variable.type)+";")},Ip.$metadata$={kind:$,simpleName:"InputNode",interfaces:[qu]},Object.defineProperty(Rp.prototype,"output",{configurable:!0,get:function(){return this.ifNode.output}}),Rp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e=t.inputs,i=this.$outer.ifVar_0;e.add_11rb$(i)},Rp.$metadata$={kind:$,simpleName:"OutputNode",interfaces:[qu]},Ap.$metadata$={kind:$,simpleName:"StageInterfaceNode",interfaces:[]},Lp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewport)},Lp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outNormalizedScreenCoord.declare()+" = "+this.outScreenCoord.ref3f_61zpoe$()+";\n            "+this.outNormalizedScreenCoord+".xy - "+this.inViewport.ref2f_61zpoe$()+";\n            "+this.outNormalizedScreenCoord+".xy /= "+this.inViewport.ref4f_61zpoe$()+".zw;\n        ")},Lp.$metadata$={kind:$,simpleName:"ScreenCoordNode",interfaces:[qu]},Dp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inDepth])},Dp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outQuadPos.declare()+" = vec4("+this.inTexCoord.ref2f_61zpoe$()+" * 2.0 - 1.0, "+this.inDepth.ref1f_61zpoe$()+", 1.0);")},Dp.$metadata$={kind:$,simpleName:"FullScreenQuadTexPosNode",interfaces:[qu]},qp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inWeights0,this.inWeights1])},qp.prototype.generateCode_626509$=function(t){var e,i=this.iWeight<4?this.inWeights0:this.inWeights1;switch(this.iWeight%4){case 0:e="x";break;case 1:e="y";break;case 2:e="z";break;default:e="w"}var n=e;t.appendMain_61zpoe$(this.outWeight.declare()+" = "+i.ref4f_61zpoe$()+"."+n+";")},qp.$metadata$={kind:$,simpleName:"GetMorphWeightNode",interfaces:[qu]},Object.defineProperty(Fp.prototype,"refractionColor",{configurable:!0,get:function(){return null==this.refractionColor_dpnwa6$_0?pt("refractionColor"):this.refractionColor_dpnwa6$_0},set:function(t){this.refractionColor_dpnwa6$_0=t}}),Object.defineProperty(Fp.prototype,"viewProj",{configurable:!0,get:function(){return null==this.viewProj_5bee0e$_0?pt("viewProj"):this.viewProj_5bee0e$_0},set:function(t){this.viewProj_5bee0e$_0=t}}),Fp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.refractionColor),this.dependsOn_lhtstx$(this.reflectionMap),this.dependsOn_8ak6wm$([this.viewProj,this.inRefractionDir,this.inFragPos,this.inMaterialThickness])},Fp.prototype.generateCode_626509$=function(t){var e,i,n=null!=(i=null!=(e=this.reflectionMap)?t.sampleTextureCube_buzeal$(e.name,this.inRefractionDir.ref3f_61zpoe$()):null)?i:"vec4(0.0)";t.appendMain_61zpoe$("\n                vec3 "+this.name+"_refrPos = "+this.inFragPos.ref3f_61zpoe$()+" + "+this.inRefractionDir.ref3f_61zpoe$()+" * "+this.inMaterialThickness.ref1f_61zpoe$()+";\n                vec4 "+this.name+"_clip = "+this.viewProj+" * vec4("+this.name+"_refrPos, 1.0);\n                vec2 "+this.name+"_refrSample = ("+this.name+"_clip.xy / "+this.name+"_clip.w) * 0.5 + 0.5;\n                \n                bool "+this.name+"_useReflMap = "+this.name+"_refrSample.x < 0.0 || "+this.name+"_refrSample.x > 1.0\n                                        || "+this.name+"_refrSample.y < 0.0 || "+this.name+"_refrSample.y > 1.0;\n                \n                "+this.outColor.declare()+" = vec4(0.0);\n                if (!"+this.name+"_useReflMap) {\n                    "+this.outColor+" = "+t.sampleTexture2d_buzeal$(this.refractionColor.name,this.name+"_refrSample")+";\n                }\n                if ("+this.outColor+".a == 0.0) {\n                    "+this.outColor+" = "+n+";\n                }\n            ")},Fp.$metadata$={kind:$,simpleName:"RefractionSamplerNode",interfaces:[qu]},Object.defineProperty(Bp.prototype,"input",{configurable:!0,get:function(){return this.input_llsvnw$_0},set:function(t){this.input_llsvnw$_0=t,this.output=new Fu(new hu(this.name,t.variable.type),this)}}),Object.defineProperty(Bp.prototype,"output",{configurable:!0,get:function(){return this.output_a35q23$_0},set:function(t){this.output_a35q23$_0=t}}),Bp.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},Bp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.input+";")},Bp.$metadata$={kind:$,simpleName:"NamedVariableNode",interfaces:[qu]},Up.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inSize)},Up.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("gl_PointSize = "+this.inSize.ref1f_61zpoe$()+";")},Up.$metadata$={kind:$,simpleName:"PointSizeNode",interfaces:[qu]},Vp.$metadata$={kind:$,simpleName:"ShaderStage",interfaces:[T]},Vp.values=function(){return[Hp(),Wp(),Kp(),Xp(),Yp(),Zp()]},Vp.valueOf_61zpoe$=function(t){switch(t){case"VERTEX_SHADER":return Hp();case"TESSELEATION_CTRL":return Wp();case"TESSELATION_EVAL":return Kp();case"GEOMETRY_SHADER":return Xp();case"FRAGMENT_SHADER":return Yp();case"ALL":return Zp();default:P("No enum constant de.fabmax.kool.pipeline.ShaderStage."+t)}},Jp.$metadata$={kind:$,simpleName:"Albedo",interfaces:[T]},Jp.values=function(){return[tc(),ec(),ic(),nc()]},Jp.valueOf_61zpoe$=function(t){switch(t){case"CUBE_MAP_ALBEDO":return tc();case"STATIC_ALBEDO":return ec();case"TEXTURE_ALBEDO":return ic();case"VERTEX_ALBEDO":return nc();default:P("No enum constant de.fabmax.kool.pipeline.shading.Albedo."+t)}},oc.$metadata$={kind:$,simpleName:"AlphaMode",interfaces:[]},rc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))},rc.prototype.hashCode=function(){return e.getKClassFromExpression(this).hashCode()},rc.$metadata$={kind:$,simpleName:"AlphaModeBlend",interfaces:[oc]},sc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))},sc.prototype.hashCode=function(){return e.getKClassFromExpression(this).hashCode()},sc.$metadata$={kind:$,simpleName:"AlphaModeOpaque",interfaces:[oc]},ac.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,ac)||c(),this.cutOff===t.cutOff)},ac.prototype.hashCode=function(){return ot(this.cutOff)},ac.$metadata$={kind:$,simpleName:"AlphaModeMask",interfaces:[oc]},lc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){var n,o;this.model.setup_xbeod6$(e,t),t.shaderCodeGenerator=(n=i,o=this,function(t){return n.shaderGenerator.generateShader_lvmec3$(o.model,t,n)}),Tl.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Object.defineProperty(uc.prototype,"color",{configurable:!0,get:function(){return this.color_cjijrc$_0},set:function(t){var e,i;this.color_cjijrc$_0=t,null!=(i=null!=(e=this.uColor_0)?e.value:null)&&i.set_czzhhz$(t)}}),uc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u=this.model;t:do{var p;for(a=Vp.ALL,p=u.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&a.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(zt($.name,"uStaticColor")&&e.isType($,$p)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,$p)?d:c();if(null!=y){l=y;break t}}}l=null}while(0);this.uColor_0=null!=(o=l)?o.uniform:null,null!=(s=null!=(r=this.uColor_0)?r.value:null)&&s.set_czzhhz$(this.color),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},uc.$metadata$={kind:$,simpleName:"StaticColor",interfaces:[lc]},pc.$metadata$={kind:$,simpleName:"VertexColor",interfaces:[lc]},Object.defineProperty(cc.prototype,"texture",{configurable:!0,get:function(){return this.texture_smcrab$_0},set:function(t){var e;this.texture_smcrab$_0=t,null!=(e=this.textureSampler_0)&&(e.texture=t)}}),cc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l=this.model,u=this.texName_0;t:do{var p;for(s=Vp.ALL,p=l.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&s.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(zt($.name,u)&&e.isType($,up)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,up)?d:c();if(null!=y){a=y;break t}}}a=null}while(0);this.textureSampler_0=null!=(o=a)?o.sampler:null,null!=(r=this.textureSampler_0)&&(r.texture=this.texture),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},cc.$metadata$={kind:$,simpleName:"TextureColor",interfaces:[lc]},Object.defineProperty(hc.prototype,"texture",{configurable:!0,get:function(){return this.texture_mz7wkp$_0},set:function(t){var e;this.texture_mz7wkp$_0=t,null!=(e=this.cubeMapSampler_0)&&(e.texture=t)}}),hc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l=this.model,u=this.texName_0;t:do{var p;for(s=Vp.ALL,p=l.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&s.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(zt($.name,u)&&e.isType($,pp)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,pp)?d:c();if(null!=y){a=y;break t}}}a=null}while(0);this.cubeMapSampler_0=null!=(o=a)?o.sampler:null,null!=(r=this.cubeMapSampler_0)&&(r.texture=this.texture),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},hc.$metadata$={kind:$,simpleName:"CubeMapColor",interfaces:[lc]},dc.prototype.staticColorModel_0=function(){var t=new Iu("ModeledShader.staticColor()"),e=new Lu(t);e.positionOutput=e.simpleVertexPositionNode().outVec4;var i=new Du(t),n=i.pushConstantNodeColor_61zpoe$("uStaticColor");return i.colorOutput_a3v4si$(i.unlitMaterialNode_r20yfm$(n.output).outColor),t},dc.prototype.vertexColorModel_0=function(){var t=new Iu("ModeledShader.vertexColor()"),e={v:null},i=new Lu(t);e.v=i.stageInterfaceNode_iikjwn$("ifColors",i.attrColors().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new Du(t);return n.colorOutput_a3v4si$(n.unlitMaterialNode_r20yfm$(e.v.output).outColor),t},dc.prototype.textureColorModel_0=function(t){var e=new Iu("ModeledShader.textureColor()"),i={v:null},n=new Lu(e);i.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),n.positionOutput=n.simpleVertexPositionNode().outVec4;var o=new Du(e),r=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$(t),i.v.output);return o.colorOutput_a3v4si$(o.unlitMaterialNode_r20yfm$(r.outColor).outColor),e},dc.prototype.cubeMapColorModel_0=function(t){var e=new Iu("ModeledShader.cubeMapColor()"),i={v:null},n=new Lu(e),o=n.mvpNode(),r=n.vec4TransformNode_9krp9t$(n.attrPositions().output,o.outModelMat,1);i.v=n.stageInterfaceNode_iikjwn$("ifFragPos",r.outVec4),n.positionOutput=n.vec4TransformNode_9krp9t$(n.attrPositions().output,o.outMvpMat).outVec4;var s=new Du(e),a=s.normalizeNode_r20yfm$(i.v.output),l=s.cubeMapSamplerNode_2z3a2t$(s.cubeMapNode_61zpoe$(t),a.output);return s.colorOutput_a3v4si$(s.unlitMaterialNode_r20yfm$(l.outColor).outColor),e},dc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fc=null;function _c(){return null===fc&&new dc,fc}function mc(){this.albedoSource=nc(),this.isEmissiveMapped=!1,this.isNormalMapped=!1,this.isRoughnessMapped=!1,this.isMetallicMapped=!1,this.isOcclusionMapped=!1,this.isDisplacementMapped=!1,this.isInstanced=!1,this.isSkinned=!1,this.maxJoints=64,this.morphAttributes=M(),this.isMultiplyAlbedoMap=!1,this.isMultiplyEmissiveMap=!1,this.isMultiplyRoughnessMap=!1,this.isMultiplyMetallicMap=!1,this.isImageBasedLighting=!1,this.isScrSpcAmbientOcclusion=!1,this.isRefraction=!1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.cullMethod=xl(),this.alphaMode=new sc,this.isHdrOutput=!1,this.roughnessChannel="r",this.roughnessTexName="tRoughness",this.metallicChannel="r",this.metallicTexName="tMetallic",this.occlusionChannel="r",this.occlusionTexName="tOcclusion",this.albedo=J$().GRAY,this.emissive=J$().BLACK,this.roughness=.5,this.metallic=0,this.refractionIor=1.4,this.materialThickness=1,this.normalStrength=1,this.displacementStrength=.1,this.occlusionStrength=1,this.reflectionStrength=1,this.albedoMap=null,this.emissiveMap=null,this.normalMap=null,this.displacementMap=null,this.roughnessMap=null,this.metallicMap=null,this.occlusionMap=null,this.environmentMaps=null,this.scrSpcAmbientOcclusionMap=null,this.refractionColorMap=null}function $c(t,i){gc(),void 0===i&&(i=gc().defaultPbrModel_2ufela$(t)),lc.call(this,i),this.cullMethod_0=t.cullMethod,this.isBlending_0=e.isType(t.alphaMode,rc);var n,o=I(t.shadowMaps.size);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=t.shadowMaps.get_za3lpa$(r);this.shadowMaps_0=o,this.isReceivingShadow_0=!t.shadowMaps.isEmpty(),this.uRoughness_0=null,this.uMetallic_0=null,this.uAlbedo_0=null,this.uEmissive_0=null,this.uReflectionStrength_0=null,this.metallic_3y0qh7$_0=t.metallic,this.roughness_6ti3qe$_0=t.roughness,this.albedo_iz6fyn$_0=t.albedo,this.emissive_ybel2l$_0=t.emissive,this.reflectionStrength_itx8hq$_0=t.reflectionStrength,this.albedoSampler_0=null,this.emissiveSampler_0=null,this.normalSampler_0=null,this.metallicSampler_0=null,this.roughnessSampler_0=null,this.occlusionSampler_0=null,this.displacementSampler_0=null,this.uDispStrength_0=null,this.metallicTexName_0=t.metallicTexName,this.roughnessTexName_0=t.roughnessTexName,this.occlusionTexName_0=t.occlusionTexName,this.albedoMap_el88rd$_0=t.albedoMap,this.emissiveMap_frsh8l$_0=t.emissiveMap,this.normalMap_4f5ej9$_0=t.normalMap,this.metallicMap_uadmur$_0=t.metallicMap,this.roughnessMap_c1s1r6$_0=t.roughnessMap,this.occlusionMap_npdkt7$_0=t.occlusionMap,this.displacementMap_lffg8r$_0=t.displacementMap,this.displacementStrength_mpg4z2$_0=t.displacementStrength,this.uAmbient_0=null;var s,a,l,u,p=I(this.shadowMaps_0.length);s=p.length-1|0;for(var c=0;c<=s;c++)p[c]=null;this.depthSamplers_0=p,this.ambient_5b16r2$_0=new X$(.03,.03,.03,1),this.irradianceMapSampler_0=null,this.reflectionMapSampler_0=null,this.brdfLutSampler_0=null,this.irradianceMap_wb8dgm$_0=null!=(a=t.environmentMaps)?a.irradianceMap:null,this.reflectionMap_oydyp3$_0=null!=(l=t.environmentMaps)?l.reflectionMap:null,this.brdfLut_qrgoz5$_0=null!=(u=t.environmentMaps)?u.brdfLut:null,this.ssaoSampler_0=null,this.scrSpcAmbientOcclusionMap_94u3nd$_0=t.scrSpcAmbientOcclusionMap,this.uMaterialThickness_0=null,this.materialThickness_egefyb$_0=t.materialThickness,this.refractionColorSampler_0=null,this.refractionColorMap_mqtkjo$_0=t.refractionColorMap}function yc(){vc=this}lc.$metadata$={kind:$,simpleName:"ModeledShader",interfaces:[Tl]},mc.prototype.useStaticAlbedo_d7aj7k$=function(t){this.albedoSource=ec(),this.albedo=t},mc.prototype.useAlbedoMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useAlbedoMap_daqygw$(ch(t),e)},mc.prototype.useAlbedoMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.albedoMap=t,this.isMultiplyAlbedoMap=e,this.albedoSource=ic()},mc.prototype.useNormalMap_9sobi5$=function(t,e){void 0===e&&(e=this.normalStrength),this.useNormalMap_9wkq18$(ch(t),e)},mc.prototype.useNormalMap_9wkq18$=function(t,e){void 0===e&&(e=this.normalStrength),this.normalMap=t,this.normalStrength=e,this.isNormalMapped=!0},mc.prototype.useOcclusionMap_9sobi5$=function(t,e){void 0===e&&(e=this.occlusionStrength),this.useOcclusionMap_9wkq18$(ch(t),e)},mc.prototype.useOcclusionMap_9wkq18$=function(t,e){void 0===e&&(e=this.occlusionStrength),this.occlusionMap=t,this.occlusionStrength=e,this.isOcclusionMapped=!0},mc.prototype.useDisplacementMap_9sobi5$=function(t,e){void 0===e&&(e=this.displacementStrength),this.useDisplacementMap_9wkq18$(ch(t),e)},mc.prototype.useDisplacementMap_9wkq18$=function(t,e){void 0===e&&(e=this.displacementStrength),this.displacementMap=t,this.displacementStrength=e,this.isDisplacementMapped=!0},mc.prototype.useEmissiveMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useEmissiveMap_daqygw$(ch(t),e)},mc.prototype.useEmissiveMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.emissiveMap=t,this.isMultiplyEmissiveMap=e,this.isEmissiveMapped=!0},mc.prototype.useMetallicMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useMetallicMap_daqygw$(ch(t),e)},mc.prototype.useMetallicMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.metallicMap=t,this.isMultiplyMetallicMap=e,this.isMetallicMapped=!0},mc.prototype.useRoughnessMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useRoughnessMap_daqygw$(ch(t),e)},mc.prototype.useRoughnessMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.roughnessMap=t,this.isMultiplyRoughnessMap=e,this.isRoughnessMapped=!0},mc.prototype.useScreenSpaceAmbientOcclusion_vv6xll$=function(t){this.scrSpcAmbientOcclusionMap=t,this.isScrSpcAmbientOcclusion=!0},mc.prototype.useRefraction_vv6xll$=function(t){this.refractionColorMap=t,this.isRefraction=null!=this.refractionColorMap},mc.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isImageBasedLighting=null!=t},mc.prototype.requiresTexCoords=function(){return this.albedoSource===ic()||this.isNormalMapped||this.isRoughnessMapped||this.isMetallicMapped||this.isOcclusionMapped||this.isDisplacementMapped},mc.$metadata$={kind:$,simpleName:"PbrMaterialConfig",interfaces:[]},Object.defineProperty($c.prototype,"metallic",{configurable:!0,get:function(){return this.metallic_3y0qh7$_0},set:function(t){var e,i;this.metallic_3y0qh7$_0=t,null!=(i=null!=(e=this.uMetallic_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty($c.prototype,"roughness",{configurable:!0,get:function(){return this.roughness_6ti3qe$_0},set:function(t){var e,i;this.roughness_6ti3qe$_0=t,null!=(i=null!=(e=this.uRoughness_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty($c.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_iz6fyn$_0},set:function(t){var e,i,n;this.albedo_iz6fyn$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty($c.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_ybel2l$_0},set:function(t){var e,i,n;this.emissive_ybel2l$_0=t,null!=(n=null!=(i=null!=(e=this.uEmissive_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty($c.prototype,"reflectionStrength",{configurable:!0,get:function(){return this.reflectionStrength_itx8hq$_0},set:function(t){var e,i;this.reflectionStrength_itx8hq$_0=t,null!=(i=null!=(e=this.uReflectionStrength_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty($c.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_el88rd$_0},set:function(t){var e;this.albedoMap_el88rd$_0=t,null!=(e=this.albedoSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"emissiveMap",{configurable:!0,get:function(){return this.emissiveMap_frsh8l$_0},set:function(t){var e;this.emissiveMap_frsh8l$_0=t,null!=(e=this.emissiveSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_4f5ej9$_0},set:function(t){var e;this.normalMap_4f5ej9$_0=t,null!=(e=this.normalSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"metallicMap",{configurable:!0,get:function(){return this.metallicMap_uadmur$_0},set:function(t){var e;this.metallicMap_uadmur$_0=t,null!=(e=this.metallicSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"roughnessMap",{configurable:!0,get:function(){return this.roughnessMap_c1s1r6$_0},set:function(t){var e;this.roughnessMap_c1s1r6$_0=t,null!=(e=this.roughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"occlusionMap",{configurable:!0,get:function(){return this.occlusionMap_npdkt7$_0},set:function(t){var e;this.occlusionMap_npdkt7$_0=t,null!=(e=this.occlusionSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"displacementMap",{configurable:!0,get:function(){return this.displacementMap_lffg8r$_0},set:function(t){var e;this.displacementMap_lffg8r$_0=t,null!=(e=this.displacementSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"displacementStrength",{configurable:!0,get:function(){return this.displacementStrength_mpg4z2$_0},set:function(t){var e,i;this.displacementStrength_mpg4z2$_0=t,null!=(i=null!=(e=this.uDispStrength_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty($c.prototype,"ambient",{configurable:!0,get:function(){return this.ambient_5b16r2$_0},set:function(t){var e,i,n;this.ambient_5b16r2$_0=t,null!=(n=null!=(i=null!=(e=this.uAmbient_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty($c.prototype,"irradianceMap",{configurable:!0,get:function(){return this.irradianceMap_wb8dgm$_0},set:function(t){var e;this.irradianceMap_wb8dgm$_0=t,null!=(e=this.irradianceMapSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"reflectionMap",{configurable:!0,get:function(){return this.reflectionMap_oydyp3$_0},set:function(t){var e;this.reflectionMap_oydyp3$_0=t,null!=(e=this.reflectionMapSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"brdfLut",{configurable:!0,get:function(){return this.brdfLut_qrgoz5$_0},set:function(t){var e;this.brdfLut_qrgoz5$_0=t,null!=(e=this.brdfLutSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"scrSpcAmbientOcclusionMap",{configurable:!0,get:function(){return this.scrSpcAmbientOcclusionMap_94u3nd$_0},set:function(t){var e;this.scrSpcAmbientOcclusionMap_94u3nd$_0=t,null!=(e=this.ssaoSampler_0)&&(e.texture=t)}}),Object.defineProperty($c.prototype,"materialThickness",{configurable:!0,get:function(){return this.materialThickness_egefyb$_0},set:function(t){var e,i;this.materialThickness_egefyb$_0=t,null!=(i=null!=(e=this.uMaterialThickness_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty($c.prototype,"refractionColorMap",{configurable:!0,get:function(){return this.refractionColorMap_mqtkjo$_0},set:function(t){var e;this.refractionColorMap_mqtkjo$_0=t,null!=(e=this.refractionColorSampler_0)&&(e.texture=t)}}),$c.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_0,t.blendMode=this.isBlending_0?al():ol(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},$c.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,T,P,O,M,j,A,I,R,L,D,q,F,B,U,V,G,H,W=this.model;t:do{var K;for(G=Vp.ALL,K=W.stages.values.iterator();K.hasNext();){var X=K.next();if(0!=(X.stage.mask&G.mask)){var Y,Z,J=X.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(zt(tt.name,"uMetallic")&&e.isType(tt,dp)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,dp)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);this.uMetallic_0=H,null!=(o=this.uMetallic_0)&&(o.uniform.value=this.metallic);var it,nt,ot=this.model;t:do{var rt;for(it=Vp.ALL,rt=ot.stages.values.iterator();rt.hasNext();){var st=rt.next();if(0!=(st.stage.mask&it.mask)){var at,lt,ut=st.nodes;e:do{var pt;for(pt=ut.iterator();pt.hasNext();){var ct=pt.next();if(zt(ct.name,"uRoughness")&&e.isType(ct,dp)){lt=ct;break e}}lt=null}while(0);var ht=null==(at=lt)||e.isType(at,dp)?at:c();if(null!=ht){nt=ht;break t}}}nt=null}while(0);this.uRoughness_0=nt,null!=(r=this.uRoughness_0)&&(r.uniform.value=this.roughness);var dt,ft,_t=this.model;t:do{var mt;for(dt=Vp.ALL,mt=_t.stages.values.iterator();mt.hasNext();){var $t=mt.next();if(0!=($t.stage.mask&dt.mask)){var yt,vt,gt=$t.nodes;e:do{var bt;for(bt=gt.iterator();bt.hasNext();){var xt=bt.next();if(zt(xt.name,"uAlbedo")&&e.isType(xt,$p)){vt=xt;break e}}vt=null}while(0);var wt=null==(yt=vt)||e.isType(yt,$p)?yt:c();if(null!=wt){ft=wt;break t}}}ft=null}while(0);this.uAlbedo_0=ft,null!=(l=null!=(a=null!=(s=this.uAlbedo_0)?s.uniform:null)?a.value:null)&&l.set_czzhhz$(this.albedo);var kt,St,Ct=this.model;t:do{var Nt;for(kt=Vp.ALL,Nt=Ct.stages.values.iterator();Nt.hasNext();){var Et=Nt.next();if(0!=(Et.stage.mask&kt.mask)){var Tt,Pt,Ot=Et.nodes;e:do{var Mt;for(Mt=Ot.iterator();Mt.hasNext();){var jt=Mt.next();if(zt(jt.name,"uEmissive")&&e.isType(jt,$p)){Pt=jt;break e}}Pt=null}while(0);var At=null==(Tt=Pt)||e.isType(Tt,$p)?Tt:c();if(null!=At){St=At;break t}}}St=null}while(0);this.uEmissive_0=St,null!=(h=null!=(p=null!=(u=this.uEmissive_0)?u.uniform:null)?p.value:null)&&h.set_czzhhz$(this.emissive);var It,Rt,Lt=this.model;t:do{var Dt;for(It=Vp.ALL,Dt=Lt.stages.values.iterator();Dt.hasNext();){var qt=Dt.next();if(0!=(qt.stage.mask&It.mask)){var Ft,Bt,Ut=qt.nodes;e:do{var Vt;for(Vt=Ut.iterator();Vt.hasNext();){var Gt=Vt.next();if(zt(Gt.name,"uReflectionStrength")&&e.isType(Gt,dp)){Bt=Gt;break e}}Bt=null}while(0);var Ht=null==(Ft=Bt)||e.isType(Ft,dp)?Ft:c();if(null!=Ht){Rt=Ht;break t}}}Rt=null}while(0);this.uReflectionStrength_0=Rt,null!=(f=null!=(d=this.uReflectionStrength_0)?d.uniform:null)&&(f.value=this.reflectionStrength);var Wt,Kt,Xt=this.model;t:do{var Yt;for(Wt=Vp.ALL,Yt=Xt.stages.values.iterator();Yt.hasNext();){var Zt=Yt.next();if(0!=(Zt.stage.mask&Wt.mask)){var Jt,Qt,te=Zt.nodes;e:do{var ee;for(ee=te.iterator();ee.hasNext();){var ie=ee.next();if(zt(ie.name,"uAmbient")&&e.isType(ie,$p)){Qt=ie;break e}}Qt=null}while(0);var ne=null==(Jt=Qt)||e.isType(Jt,$p)?Jt:c();if(null!=ne){Kt=ne;break t}}}Kt=null}while(0);if(this.uAmbient_0=Kt,null!=($=null!=(m=null!=(_=this.uAmbient_0)?_.uniform:null)?m.value:null)&&$.set_czzhhz$(this.ambient),this.isReceivingShadow_0){y=this.depthSamplers_0;for(var oe=0;oe!==y.length;++oe){var re,se,ae,le=this.model,ue="depthMap_"+oe;t:do{var pe;for(se=Vp.ALL,pe=le.stages.values.iterator();pe.hasNext();){var ce=pe.next();if(0!=(ce.stage.mask&se.mask)){var he,de,fe=ce.nodes;e:do{var _e;for(_e=fe.iterator();_e.hasNext();){var me=_e.next();if(zt(me.name,ue)&&e.isType(me,up)){de=me;break e}}de=null}while(0);var $e=null==(he=de)||e.isType(he,up)?he:c();if(null!=$e){ae=$e;break t}}}ae=null}while(0);var ye=null!=(re=ae)?re.sampler:null;this.depthSamplers_0[oe]=ye,this.shadowMaps_0[oe].setupSampler_s70oj3$(ye)}}var ve,ge,be=this.model;t:do{var xe;for(ve=Vp.ALL,xe=be.stages.values.iterator();xe.hasNext();){var we=xe.next();if(0!=(we.stage.mask&ve.mask)){var ze,ke,Se=we.nodes;e:do{var Ce;for(Ce=Se.iterator();Ce.hasNext();){var Ne=Ce.next();if(zt(Ne.name,"irradianceMap")&&e.isType(Ne,pp)){ke=Ne;break e}}ke=null}while(0);var Ee=null==(ze=ke)||e.isType(ze,pp)?ze:c();if(null!=Ee){ge=Ee;break t}}}ge=null}while(0);this.irradianceMapSampler_0=null!=(v=ge)?v.sampler:null,null!=(g=this.irradianceMapSampler_0)&&(g.texture=this.irradianceMap);var Te,Pe,Oe=this.model;t:do{var Me;for(Te=Vp.ALL,Me=Oe.stages.values.iterator();Me.hasNext();){var je=Me.next();if(0!=(je.stage.mask&Te.mask)){var Ae,Ie,Re=je.nodes;e:do{var Le;for(Le=Re.iterator();Le.hasNext();){var De=Le.next();if(zt(De.name,"reflectionMap")&&e.isType(De,pp)){Ie=De;break e}}Ie=null}while(0);var qe=null==(Ae=Ie)||e.isType(Ae,pp)?Ae:c();if(null!=qe){Pe=qe;break t}}}Pe=null}while(0);this.reflectionMapSampler_0=null!=(b=Pe)?b.sampler:null,null!=(x=this.reflectionMapSampler_0)&&(x.texture=this.reflectionMap);var Fe,Be,Ue=this.model;t:do{var Ve;for(Fe=Vp.ALL,Ve=Ue.stages.values.iterator();Ve.hasNext();){var Ge=Ve.next();if(0!=(Ge.stage.mask&Fe.mask)){var He,We,Ke=Ge.nodes;e:do{var Xe;for(Xe=Ke.iterator();Xe.hasNext();){var Ye=Xe.next();if(zt(Ye.name,"brdfLut")&&e.isType(Ye,up)){We=Ye;break e}}We=null}while(0);var Ze=null==(He=We)||e.isType(He,up)?He:c();if(null!=Ze){Be=Ze;break t}}}Be=null}while(0);this.brdfLutSampler_0=null!=(w=Be)?w.sampler:null,null!=(z=this.brdfLutSampler_0)&&(z.texture=this.brdfLut);var Je,Qe,ti=this.model;t:do{var ei;for(Je=Vp.ALL,ei=ti.stages.values.iterator();ei.hasNext();){var ii=ei.next();if(0!=(ii.stage.mask&Je.mask)){var ni,oi,ri=ii.nodes;e:do{var si;for(si=ri.iterator();si.hasNext();){var ai=si.next();if(zt(ai.name,"ssaoMap")&&e.isType(ai,up)){oi=ai;break e}}oi=null}while(0);var li=null==(ni=oi)||e.isType(ni,up)?ni:c();if(null!=li){Qe=li;break t}}}Qe=null}while(0);this.ssaoSampler_0=null!=(k=Qe)?k.sampler:null,null!=(S=this.ssaoSampler_0)&&(S.texture=this.scrSpcAmbientOcclusionMap);var ui,pi,ci=this.model;t:do{var hi;for(ui=Vp.ALL,hi=ci.stages.values.iterator();hi.hasNext();){var di=hi.next();if(0!=(di.stage.mask&ui.mask)){var fi,_i,mi=di.nodes;e:do{var $i;for($i=mi.iterator();$i.hasNext();){var yi=$i.next();if(zt(yi.name,"uMaterialThickness")&&e.isType(yi,dp)){_i=yi;break e}}_i=null}while(0);var vi=null==(fi=_i)||e.isType(fi,dp)?fi:c();if(null!=vi){pi=vi;break t}}}pi=null}while(0);this.uMaterialThickness_0=pi,null!=(C=this.uMaterialThickness_0)&&(C.uniform.value=this.materialThickness);var gi,bi,xi=this.model;t:do{var wi;for(gi=Vp.ALL,wi=xi.stages.values.iterator();wi.hasNext();){var zi=wi.next();if(0!=(zi.stage.mask&gi.mask)){var ki,Si,Ci=zi.nodes;e:do{var Ni;for(Ni=Ci.iterator();Ni.hasNext();){var Ei=Ni.next();if(zt(Ei.name,"tRefractionColor")&&e.isType(Ei,up)){Si=Ei;break e}}Si=null}while(0);var Ti=null==(ki=Si)||e.isType(ki,up)?ki:c();if(null!=Ti){bi=Ti;break t}}}bi=null}while(0);this.refractionColorSampler_0=null!=(N=bi)?N.sampler:null,null!=(E=this.refractionColorSampler_0)&&(E.texture=this.refractionColorMap);var Pi,Oi,Mi=this.model;t:do{var ji;for(Pi=Vp.ALL,ji=Mi.stages.values.iterator();ji.hasNext();){var Ai=ji.next();if(0!=(Ai.stage.mask&Pi.mask)){var Ii,Ri,Li=Ai.nodes;e:do{var Di;for(Di=Li.iterator();Di.hasNext();){var qi=Di.next();if(zt(qi.name,"tAlbedo")&&e.isType(qi,up)){Ri=qi;break e}}Ri=null}while(0);var Fi=null==(Ii=Ri)||e.isType(Ii,up)?Ii:c();if(null!=Fi){Oi=Fi;break t}}}Oi=null}while(0);this.albedoSampler_0=null!=(T=Oi)?T.sampler:null,null!=(P=this.albedoSampler_0)&&(P.texture=this.albedoMap);var Bi,Ui,Vi=this.model;t:do{var Gi;for(Bi=Vp.ALL,Gi=Vi.stages.values.iterator();Gi.hasNext();){var Hi=Gi.next();if(0!=(Hi.stage.mask&Bi.mask)){var Wi,Ki,Xi=Hi.nodes;e:do{var Yi;for(Yi=Xi.iterator();Yi.hasNext();){var Zi=Yi.next();if(zt(Zi.name,"tEmissive")&&e.isType(Zi,up)){Ki=Zi;break e}}Ki=null}while(0);var Ji=null==(Wi=Ki)||e.isType(Wi,up)?Wi:c();if(null!=Ji){Ui=Ji;break t}}}Ui=null}while(0);this.emissiveSampler_0=null!=(O=Ui)?O.sampler:null,null!=(M=this.emissiveSampler_0)&&(M.texture=this.emissiveMap);var Qi,tn,en=this.model;t:do{var nn;for(Qi=Vp.ALL,nn=en.stages.values.iterator();nn.hasNext();){var on=nn.next();if(0!=(on.stage.mask&Qi.mask)){var rn,sn,an=on.nodes;e:do{var ln;for(ln=an.iterator();ln.hasNext();){var un=ln.next();if(zt(un.name,"tNormal")&&e.isType(un,up)){sn=un;break e}}sn=null}while(0);var pn=null==(rn=sn)||e.isType(rn,up)?rn:c();if(null!=pn){tn=pn;break t}}}tn=null}while(0);this.normalSampler_0=null!=(j=tn)?j.sampler:null,null!=(A=this.normalSampler_0)&&(A.texture=this.normalMap);var cn,hn,dn=this.model,fn=this.metallicTexName_0;t:do{var _n;for(cn=Vp.ALL,_n=dn.stages.values.iterator();_n.hasNext();){var mn=_n.next();if(0!=(mn.stage.mask&cn.mask)){var $n,yn,vn=mn.nodes;e:do{var gn;for(gn=vn.iterator();gn.hasNext();){var bn=gn.next();if(zt(bn.name,fn)&&e.isType(bn,up)){yn=bn;break e}}yn=null}while(0);var xn=null==($n=yn)||e.isType($n,up)?$n:c();if(null!=xn){hn=xn;break t}}}hn=null}while(0);this.metallicSampler_0=null!=(I=hn)?I.sampler:null,null!=(R=this.metallicSampler_0)&&(R.texture=this.metallicMap);var wn,zn,kn=this.model,Sn=this.roughnessTexName_0;t:do{var Cn;for(wn=Vp.ALL,Cn=kn.stages.values.iterator();Cn.hasNext();){var Nn=Cn.next();if(0!=(Nn.stage.mask&wn.mask)){var En,Tn,Pn=Nn.nodes;e:do{var On;for(On=Pn.iterator();On.hasNext();){var Mn=On.next();if(zt(Mn.name,Sn)&&e.isType(Mn,up)){Tn=Mn;break e}}Tn=null}while(0);var jn=null==(En=Tn)||e.isType(En,up)?En:c();if(null!=jn){zn=jn;break t}}}zn=null}while(0);this.roughnessSampler_0=null!=(L=zn)?L.sampler:null,null!=(D=this.roughnessSampler_0)&&(D.texture=this.roughnessMap);var An,In,Rn=this.model,Ln=this.occlusionTexName_0;t:do{var Dn;for(An=Vp.ALL,Dn=Rn.stages.values.iterator();Dn.hasNext();){var qn=Dn.next();if(0!=(qn.stage.mask&An.mask)){var Fn,Bn,Un=qn.nodes;e:do{var Vn;for(Vn=Un.iterator();Vn.hasNext();){var Gn=Vn.next();if(zt(Gn.name,Ln)&&e.isType(Gn,up)){Bn=Gn;break e}}Bn=null}while(0);var Hn=null==(Fn=Bn)||e.isType(Fn,up)?Fn:c();if(null!=Hn){In=Hn;break t}}}In=null}while(0);this.occlusionSampler_0=null!=(q=In)?q.sampler:null,null!=(F=this.occlusionSampler_0)&&(F.texture=this.occlusionMap);var Wn,Kn,Xn=this.model;t:do{var Yn;for(Wn=Vp.ALL,Yn=Xn.stages.values.iterator();Yn.hasNext();){var Zn=Yn.next();if(0!=(Zn.stage.mask&Wn.mask)){var Jn,Qn,to=Zn.nodes;e:do{var eo;for(eo=to.iterator();eo.hasNext();){var io=eo.next();if(zt(io.name,"tDisplacement")&&e.isType(io,up)){Qn=io;break e}}Qn=null}while(0);var no=null==(Jn=Qn)||e.isType(Jn,up)?Jn:c();if(null!=no){Kn=no;break t}}}Kn=null}while(0);this.displacementSampler_0=null!=(B=Kn)?B.sampler:null,null!=(U=this.displacementSampler_0)&&(U.texture=this.displacementMap);var oo,ro,so=this.model;t:do{var ao;for(oo=Vp.ALL,ao=so.stages.values.iterator();ao.hasNext();){var lo=ao.next();if(0!=(lo.stage.mask&oo.mask)){var uo,po,co=lo.nodes;e:do{var ho;for(ho=co.iterator();ho.hasNext();){var fo=ho.next();if(zt(fo.name,"uDispStrength")&&e.isType(fo,dp)){po=fo;break e}}po=null}while(0);var _o=null==(uo=po)||e.isType(uo,dp)?uo:c();if(null!=_o){ro=_o;break t}}}ro=null}while(0);this.uDispStrength_0=ro,null!=(V=this.uDispStrength_0)&&(V.uniform.value=this.displacementStrength),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},yc.prototype.defaultPbrModel_2ufela$=function(t){var i,n,o,r=new Iu("defaultPbrModel()"),s={v:null},a={v:null},l={v:null},p={v:null},c={v:null},h={v:null},d=M(),f=new Lu(r);h.v=f.mvpNode();var _=f.namedVariable_wtmwsg$("modelMat",h.v.outModelMat),m=f.namedVariable_wtmwsg$("mvpMat",h.v.outMvpMat),$=_.output,y=m.output;if(t.isInstanced&&(_.input=f.multiplyNode_ze33is$(h.v.outModelMat,f.instanceAttrModelMat().output).output,m.input=f.multiplyNode_ze33is$(h.v.outMvpMat,f.instanceAttrModelMat().output).output),t.isSkinned){var v=f.skinTransformNode_78eraa$(f.attrJoints().output,f.attrWeights().output,t.maxJoints);_.input=f.multiplyNode_ze33is$(_.input,v.outJointMat).output,m.input=f.multiplyNode_ze33is$(m.input,v.outJointMat).output}if(t.requiresTexCoords()){var g=f.namedVariable_wtmwsg$("texCoordInput",f.attrTexCoords().output);i=f.stageInterfaceNode_iikjwn$("ifTexCoords",g.output)}else i=null;c.v=i,n=t.albedoSource===nc()?f.stageInterfaceNode_iikjwn$("ifColors",f.attrColors().output):null,s.v=n;var b,w,k=t.morphAttributes.isEmpty()?null:f.morphWeightsNode_za3lpa$(t.morphAttributes.size),S=f.namedVariable_wtmwsg$("localPosInput",f.attrPositions().output),C=f.namedVariable_wtmwsg$("localNormalInput",f.attrNormals().output),N={v:S.output},E=t.morphAttributes,T=M();for(b=E.iterator();b.hasNext();){var P=b.next();u(P.name,ds().POSITIONS.name)&&T.add_11rb$(P)}for(w=T.iterator();w.hasNext();){var O=w.next(),j=f.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(O),x(k)),A=f.multiplyNode_ze33is$(f.attributeNode_nm2vx5$(O).output,j.outWeight);N.v=f.addNode_ze33is$(N.v,A.output).output}var I,R,L=f.namedVariable_wtmwsg$("localPosMorphed",N.v),D={v:C.output},q=t.morphAttributes,F=M();for(I=q.iterator();I.hasNext();){var B=I.next();u(B.name,ds().NORMALS.name)&&F.add_11rb$(B)}for(R=F.iterator();R.hasNext();){var U=R.next(),V=f.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(U),x(k)),G=f.multiplyNode_ze33is$(f.attributeNode_nm2vx5$(U).output,V.outWeight);D.v=f.addNode_ze33is$(D.v,G.output).output}var H=f.namedVariable_wtmwsg$("localNormalMorphed",D.v);if(t.isNormalMapped){var W,K,X=f.namedVariable_wtmwsg$("localTangentInput",f.attrTangents().output),Y={v:f.splitNode_500t7j$(X.output,"xyz").output},Z=t.morphAttributes,Q=M();for(W=Z.iterator();W.hasNext();){var tt=W.next();u(tt.name,ds().TANGENTS.name)&&Q.add_11rb$(tt)}for(K=Q.iterator();K.hasNext();){var et=K.next(),it=f.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(et),x(k)),nt=f.multiplyNode_ze33is$(f.attributeNode_nm2vx5$(et).output,it.outWeight);Y.v=f.addNode_ze33is$(Y.v,nt.output).output}var ot=f.vec3TransformNode_vid4wo$(Y.v,$,0),rt=f.combineXyzWNode_ze33is$(ot.outVec3,f.splitNode_500t7j$(X.output,"w").output);o=f.stageInterfaceNode_iikjwn$("ifTangents",rt.output)}else o=null;l.v=o;var st=f.namedVariable_wtmwsg$("localPosDisplaced",L.output);if(t.isDisplacementMapped){var at=f.textureNode_61zpoe$("tDisplacement"),lt=f.displacementMapNode_7fvjbk$(at,x(c.v).input,L.output,H.output);lt.inStrength=f.pushConstantNode1f_61zpoe$("uDispStrength").output;var ut=lt;st.input=ut.outPosition}var pt=f.vec3TransformNode_vid4wo$(st.output,$,1).outVec3;p.v=f.stageInterfaceNode_iikjwn$("ifFragPos",pt);var ct=f.vec3TransformNode_vid4wo$(H.output,$,0);a.v=f.stageInterfaceNode_iikjwn$("ifNormals",ct.outVec3);var ht,dt,ft=f.vec4TransformNode_9krp9t$(pt,h.v.outViewMat).outVec4,_t=0;for(ht=t.shadowMaps.iterator();ht.hasNext();){var mt=ht.next(),$t=J((_t=(dt=_t)+1|0,dt));if(e.isType(mt,Sk)){var yt=f.cascadedShadowMapNode_zw58l$(mt,"depthMap_"+$t,ft,pt);d.add_11rb$(yt)}else if(e.isType(mt,zk)){var vt=f.simpleShadowMapNode_7yd351$(mt,"depthMap_"+$t,pt);d.add_11rb$(vt)}}f.positionOutput=f.vec4TransformNode_9krp9t$(st.output,y).outVec4;var bt,xt,wt,zt,kt,St=new Du(r);switch(t.albedoSource.name){case"VERTEX_ALBEDO":bt=x(s.v).output;break;case"STATIC_ALBEDO":bt=St.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var Ct=St.textureSamplerNode_ce41yx$(St.textureNode_61zpoe$("tAlbedo"),x(c.v).output),Nt=St.gammaNode_ze33is$(Ct.outColor);if(t.isMultiplyAlbedoMap){var Et=St.pushConstantNodeColor_61zpoe$("uAlbedo").output;bt=St.multiplyNode_ze33is$(Nt.outColor,Et).output}else bt=Nt.outColor;break;case"CUBE_MAP_ALBEDO":throw gt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:bt=e.noWhenBranchMatched()}var Tt={v:bt};null!=(wt=e.isType(xt=t.alphaMode,ac)?xt:null)&&St.discardAlpha_ze33is$(St.splitNode_500t7j$(Tt.v,"a").output,St.constFloat_mx4ult$(wt.cutOff)),e.isType(t.alphaMode,rc)||(Tt.v=St.combineXyzWNode_ze33is$(Tt.v,St.constFloat_mx4ult$(1)).output);var Pt,Ot=h.v.addToStage_llmhyc$(r.fragmentStageGraph),Mt=St.multiLightNode_d76fwk$(p.v.output,t.maxLights);for(Pt=d.iterator();Pt.hasNext();){var jt=Pt.next();Mt.inShadowFacs[jt.lightIndex]=jt.outShadowFac}if(t.isNormalMapped&&null!=l.v){var At=St.normalMapNode_j8913i$(St.textureNode_61zpoe$("tNormal"),x(c.v).output,a.v.output,l.v.output);At.inStrength=St.constFloat_mx4ult$(t.normalStrength),zt=At.outNormal}else zt=a.v.output;var It={v:zt};It.v=St.normalizeNode_r20yfm$(St.flipBacksideNormalNode_r20yfm$(It.v).outNormal).output;var Rt,Lt,Dt,qt=St.viewDirNode_ze33is$(Ot.outCamPos,p.v.output).output;if(t.isImageBasedLighting){var Ft=St.cubeMapNode_61zpoe$("irradianceMap");Dt=St.cubeMapSamplerNode_2z3a2t$(Ft,a.v.output),Rt=St.cubeMapNode_61zpoe$("reflectionMap"),Lt=St.textureNode_61zpoe$("brdfLut")}else Dt=null,Rt=null,Lt=null;var Bt,Ut,Vt,Gt,Ht,Wt=St.pbrMaterialNode_m8txso$(Rt,Lt),Kt=Dt;if(Wt.inAlbedo=Tt.v,Wt.inNormal=It.v,Wt.lightBacksides=t.lightBacksides,Wt.inFragPos=p.v.output,Wt.inViewDir=qt,Wt.inReflectionStrength=St.pushConstantNode1f_61zpoe$("uReflectionStrength").output,Wt.inLightCount=Mt.outLightCount,Wt.inFragToLight=Mt.outFragToLightDirection,Wt.inRadiance=Mt.outRadiance,Wt.inIrradiance=null!=(Bt=null!=Kt?Kt.outColor:null)?Bt:St.pushConstantNodeColor_61zpoe$("uAmbient").output,t.isEmissiveMapped){var Xt=St.textureSamplerNode_ce41yx$(St.textureNode_61zpoe$("tEmissive"),x(c.v).output).outColor,Yt=St.gammaNode_ze33is$(Xt).outColor;if(t.isMultiplyEmissiveMap){var Zt=St.pushConstantNodeColor_61zpoe$("uEmissive").output;Ut=St.multiplyNode_ze33is$(Yt,Zt).output}else Ut=Yt;Wt.inEmissive=Ut}else Wt.inEmissive=St.pushConstantNodeColor_61zpoe$("uEmissive").output;var Jt=z();if(t.isRoughnessMapped){var Qt=St.textureSamplerNode_ce41yx$(St.textureNode_61zpoe$(t.roughnessTexName),x(c.v).output).outColor,te=t.roughnessTexName;Jt.put_xwzc9p$(te,Qt);var ee=St.splitNode_500t7j$(Qt,t.roughnessChannel).output;if(t.isMultiplyRoughnessMap){var ie=St.pushConstantNode1f_61zpoe$("uRoughness").output;Vt=St.multiplyNode_ze33is$(ee,ie).output}else Vt=ee;Wt.inRoughness=Vt}else Wt.inRoughness=St.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var ne,oe=t.metallicTexName,re=Jt.get_11rb$(oe);if(null==re){var se=St.textureSamplerNode_ce41yx$(St.textureNode_61zpoe$(t.metallicTexName),x(c.v).output).outColor;Jt.put_xwzc9p$(oe,se),ne=se}else ne=re;var ae=ne,le=t.metallicTexName;Jt.put_xwzc9p$(le,ae);var ue=St.splitNode_500t7j$(ae,t.metallicChannel).output;if(t.isMultiplyMetallicMap){var pe=St.pushConstantNode1f_61zpoe$("uMetallic").output;Gt=St.multiplyNode_ze33is$(ue,pe).output}else Gt=ue;Wt.inMetallic=Gt}else Wt.inMetallic=St.pushConstantNode1f_61zpoe$("uMetallic").output;var ce=St.constFloat_mx4ult$(1);if(t.isOcclusionMapped){var he,de=t.occlusionTexName,fe=Jt.get_11rb$(de);if(null==fe){var _e=St.textureSamplerNode_ce41yx$(St.textureNode_61zpoe$(t.occlusionTexName),x(c.v).output).outColor;Jt.put_xwzc9p$(de,_e),he=_e}else he=fe;var me=he,$e=t.occlusionTexName;Jt.put_xwzc9p$($e,me);var ye=St.splitNode_500t7j$(me,t.occlusionChannel).output;if(1!==t.occlusionStrength){var ve=t.occlusionStrength;Ht=St.addNode_ze33is$(St.constFloat_mx4ult$(1-ve),St.multiplyNode_tuikh5$(ye,ve).output).output}else Ht=ye;ce=Ht}if(t.isScrSpcAmbientOcclusion){var ge=St.textureNode_61zpoe$("ssaoMap"),be=St.addNode_u9w9by$(new Sp(ge,St.stage));be.inViewport=Ot.outViewport,ce=t.isOcclusionMapped?St.multiplyNode_ze33is$(ce,be.outAo).output:be.outAo}Wt.inAmbientOccl=ce;var xe=Wt,we=xe.outColor;if(t.isRefraction){var ze=St.addNode_u9w9by$(new Fp(St.stage));ze.reflectionMap=Rt,ze.refractionColor=St.textureNode_61zpoe$("tRefractionColor"),ze.viewProj=St.multiplyNode_ze33is$(Ot.outProjMat,Ot.outViewMat).output,ze.inMaterialThickness=St.pushConstantNode1f_61zpoe$("uMaterialThickness").output,ze.inFragPos=p.v.output,ze.inRefractionDir=St.refractNode_92v6he$(qt,It.v,St.constFloat_mx4ult$(1/t.refractionIor)).outDirection;var ke=ze.outColor,Se=St.subtractNode_ze33is$(St.constFloat_mx4ult$(1),St.splitNode_500t7j$(xe.outColor,"a").output).output,Ce=St.multiplyNode_ze33is$(ke,Se).output;we=St.combineXyzWNode_ze33is$(St.addNode_ze33is$(we,Ce).output,St.constFloat_mx4ult$(1)).output}return t.isHdrOutput||(we=St.hdrToLdrNode_r20yfm$(we).outColor),kt=t.alphaMode,e.isType(kt,rc)?St.colorOutput_a3v4si$(we):e.isType(kt,ac)||e.isType(kt,sc)?St.colorOutput_a3v4si$(we,void 0,St.constFloat_mx4ult$(1)):e.noWhenBranchMatched(),r},yc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vc=null;function gc(){return null===vc&&new yc,vc}function bc(t,i){zc(),void 0===i&&(i=zc().defaultPhongModel_m663ta$(t)),lc.call(this,i),this.cullMethod_0=t.cullMethod,this.isBlending_0=e.isType(t.alphaMode,rc);var n,o=I(t.shadowMaps.size);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=t.shadowMaps.get_za3lpa$(r);this.shadowMaps_0=o,this.isReceivingShadow_0=!t.shadowMaps.isEmpty(),this.uShininess_0=null,this.uSpecularIntensity_0=null,this.albedoSampler_0=null,this.normalSampler_0=null,this.uAlbedo_0=null,this.shininess_9rzino$_0=t.shininess,this.specularIntensity_immrg6$_0=t.specularIntensity,this.albedo_xrasdd$_0=t.albedo,this.albedoMap_wcysax$_0=t.albedoMap,this.normalMap_dcl50b$_0=t.normalMap;var s,a=I(this.shadowMaps_0.length);s=a.length-1|0;for(var l=0;l<=s;l++)a[l]=null;this.depthSamplers_0=a}function xc(){wc=this}$c.$metadata$={kind:$,simpleName:"PbrShader",interfaces:[lc]},Object.defineProperty(bc.prototype,"shininess",{configurable:!0,get:function(){return this.shininess_9rzino$_0},set:function(t){var e,i;this.shininess_9rzino$_0=t,null!=(i=null!=(e=this.uShininess_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(bc.prototype,"specularIntensity",{configurable:!0,get:function(){return this.specularIntensity_immrg6$_0},set:function(t){var e,i;this.specularIntensity_immrg6$_0=t,null!=(i=null!=(e=this.uSpecularIntensity_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(bc.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_xrasdd$_0},set:function(t){var e,i,n;this.albedo_xrasdd$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(bc.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_wcysax$_0},set:function(t){var e;this.albedoMap_wcysax$_0=t,null!=(e=this.albedoSampler_0)&&(e.texture=t)}}),Object.defineProperty(bc.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_dcl50b$_0},set:function(t){var e;this.normalMap_dcl50b$_0=t,null!=(e=this.normalSampler_0)&&(e.texture=t)}}),bc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_0,t.blendMode=this.isBlending_0?al():ol(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},bc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h,d,f,_,m,$,y,v=this.model;t:do{var g;for($=Vp.ALL,g=v.stages.values.iterator();g.hasNext();){var b=g.next();if(0!=(b.stage.mask&$.mask)){var x,w,z=b.nodes;e:do{var k;for(k=z.iterator();k.hasNext();){var S=k.next();if(zt(S.name,"uShininess")&&e.isType(S,dp)){w=S;break e}}w=null}while(0);var C=null==(x=w)||e.isType(x,dp)?x:c();if(null!=C){y=C;break t}}}y=null}while(0);this.uShininess_0=y,null!=(r=null!=(o=this.uShininess_0)?o.uniform:null)&&(r.value=this.shininess);var N,E,T=this.model;t:do{var P;for(N=Vp.ALL,P=T.stages.values.iterator();P.hasNext();){var O=P.next();if(0!=(O.stage.mask&N.mask)){var M,j,A=O.nodes;e:do{var I;for(I=A.iterator();I.hasNext();){var R=I.next();if(zt(R.name,"uSpecularIntensity")&&e.isType(R,dp)){j=R;break e}}j=null}while(0);var L=null==(M=j)||e.isType(M,dp)?M:c();if(null!=L){E=L;break t}}}E=null}while(0);this.uSpecularIntensity_0=E,null!=(a=null!=(s=this.uSpecularIntensity_0)?s.uniform:null)&&(a.value=this.specularIntensity);var D,q,F=this.model;t:do{var B;for(D=Vp.ALL,B=F.stages.values.iterator();B.hasNext();){var U=B.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var K=W.next();if(zt(K.name,"uAlbedo")&&e.isType(K,$p)){G=K;break e}}G=null}while(0);var X=null==(V=G)||e.isType(V,$p)?V:c();if(null!=X){q=X;break t}}}q=null}while(0);this.uAlbedo_0=q,null!=(p=null!=(u=null!=(l=this.uAlbedo_0)?l.uniform:null)?u.value:null)&&p.set_czzhhz$(this.albedo);var Y,Z,J=this.model;t:do{var Q;for(Y=Vp.ALL,Q=J.stages.values.iterator();Q.hasNext();){var tt=Q.next();if(0!=(tt.stage.mask&Y.mask)){var et,it,nt=tt.nodes;e:do{var ot;for(ot=nt.iterator();ot.hasNext();){var rt=ot.next();if(zt(rt.name,"tAlbedo")&&e.isType(rt,up)){it=rt;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,up)?et:c();if(null!=st){Z=st;break t}}}Z=null}while(0);this.albedoSampler_0=null!=(h=Z)?h.sampler:null,null!=(d=this.albedoSampler_0)&&(d.texture=this.albedoMap);var at,lt,ut=this.model;t:do{var pt;for(at=Vp.ALL,pt=ut.stages.values.iterator();pt.hasNext();){var ct=pt.next();if(0!=(ct.stage.mask&at.mask)){var ht,dt,ft=ct.nodes;e:do{var _t;for(_t=ft.iterator();_t.hasNext();){var mt=_t.next();if(zt(mt.name,"tNormal")&&e.isType(mt,up)){dt=mt;break e}}dt=null}while(0);var $t=null==(ht=dt)||e.isType(ht,up)?ht:c();if(null!=$t){lt=$t;break t}}}lt=null}while(0);if(this.normalSampler_0=null!=(f=lt)?f.sampler:null,null!=(_=this.normalSampler_0)&&(_.texture=this.normalMap),this.isReceivingShadow_0){m=this.depthSamplers_0;for(var yt=0;yt!==m.length;++yt){var vt,gt,bt,xt=this.model,wt="depthMap_"+yt;t:do{var kt;for(gt=Vp.ALL,kt=xt.stages.values.iterator();kt.hasNext();){var St=kt.next();if(0!=(St.stage.mask&gt.mask)){var Ct,Nt,Et=St.nodes;e:do{var Tt;for(Tt=Et.iterator();Tt.hasNext();){var Pt=Tt.next();if(zt(Pt.name,wt)&&e.isType(Pt,up)){Nt=Pt;break e}}Nt=null}while(0);var Ot=null==(Ct=Nt)||e.isType(Ct,up)?Ct:c();if(null!=Ot){bt=Ot;break t}}}bt=null}while(0);var Mt=null!=(vt=bt)?vt.sampler:null;this.depthSamplers_0[yt]=Mt,this.shadowMaps_0[yt].setupSampler_s70oj3$(Mt)}}lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},xc.prototype.defaultPhongModel_m663ta$=function(t){var i,n,o,r,s,a=new Iu("defaultPhongModel()"),l={v:null},u={v:null},p={v:null},c={v:null},h={v:null},d={v:null},f=M(),_=new Lu(a);if(d.v=_.mvpNode(),t.isInstanced?(r=_.multiplyNode_ze33is$(d.v.outModelMat,_.instanceAttrModelMat().output).output,s=_.multiplyNode_ze33is$(d.v.outMvpMat,_.instanceAttrModelMat().output).output):(r=d.v.outModelMat,s=d.v.outMvpMat),i=t.albedoSource===nc()?_.stageInterfaceNode_iikjwn$("ifColors",_.attrColors().output):null,u.v=i,n=t.requiresTexCoords()?_.stageInterfaceNode_iikjwn$("ifTexCoords",_.attrTexCoords().output):null,p.v=n,t.isNormalMapped){var m=_.attrTangents().output,$=_.vec3TransformNode_vid4wo$(_.splitNode_500t7j$(m,"xyz").output,r,0),y=_.combineXyzWNode_ze33is$($.outVec3,_.splitNode_500t7j$(m,"w").output);o=_.stageInterfaceNode_iikjwn$("ifTangents",y.output)}else o=null;c.v=o;var v=_.vec3TransformNode_vid4wo$(_.attrNormals().output,r,0);l.v=_.stageInterfaceNode_iikjwn$("ifNormals",v.outVec3);var g=_.vec3TransformNode_vid4wo$(_.attrPositions().output,r,1).outVec3;h.v=_.stageInterfaceNode_iikjwn$("ifFragPos",g);var b,w,z=_.vec4TransformNode_9krp9t$(g,d.v.outViewMat).outVec4,k=0;for(b=t.shadowMaps.iterator();b.hasNext();){var S=b.next(),C=J((k=(w=k)+1|0,w));if(e.isType(S,Sk)){var N=_.cascadedShadowMapNode_zw58l$(S,"depthMap_"+C,z,g);f.add_11rb$(N)}else if(e.isType(S,zk)){var E=_.simpleShadowMapNode_7yd351$(S,"depthMap_"+C,g);f.add_11rb$(E)}}_.positionOutput=_.vec4TransformNode_9krp9t$(_.attrPositions().output,s).outVec4;var T,P,O=new Du(a),j=d.v.addToStage_llmhyc$(a.fragmentStageGraph),A=O.multiLightNode_d76fwk$(h.v.output,t.maxLights);for(P=f.iterator();P.hasNext();){var I=P.next();A.inShadowFacs[I.lightIndex]=I.outShadowFac}switch(t.albedoSource.name){case"VERTEX_ALBEDO":T=x(u.v).output;break;case"STATIC_ALBEDO":T=O.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":T=O.textureSamplerNode_ce41yx$(O.textureNode_61zpoe$("tAlbedo"),x(p.v).output,!1).outColor;break;case"CUBE_MAP_ALBEDO":throw gt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:T=e.noWhenBranchMatched()}var R=T,L=t.isNormalMapped&&null!=c.v?O.normalMapNode_j8913i$(O.textureNode_61zpoe$("tNormal"),x(p.v).output,l.v.output,c.v.output).outNormal:l.v.output,D=O.phongMaterialNode_4h00d0$(R,L,h.v.output,j.outCamPos);D.lightBacksides=t.lightBacksides,D.inShininess=O.pushConstantNode1f_61zpoe$("uShininess").output,D.inSpecularIntensity=O.pushConstantNode1f_61zpoe$("uSpecularIntensity").output;var q=D;return O.colorOutput_a3v4si$(q.outColor),a},xc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var wc=null;function zc(){return null===wc&&new xc,wc}function kc(){this.albedoSource=nc(),this.isNormalMapped=!1,this.albedo=J$().GRAY,this.shininess=20,this.specularIntensity=1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.cullMethod=xl(),this.alphaMode=new sc,this.isInstanced=!1,this.albedoMap=null,this.normalMap=null}function Sc(t,i){Fc(),void 0===i&&(i=Fc().defaultUnlitModel_ws3dmo$(t)),lc.call(this,i),this.cullMethod_ci460b$_0=t.cullMethod,this.isBlending_6tbhot$_0=e.isType(t.alphaMode,rc),this.uColor_cc6m7u$_0=null,this.color_l79ks7$_0=t.color,this.colorSampler_he8fz1$_0=null,this.colorMap_h0jju9$_0=t.colorMap,this.colorCubeSampler_b56oeg$_0=null,this.colorCubeMap_moycys$_0=t.colorCubeMap}function Cc(){qc=this}kc.prototype.useAlbedoMap_61zpoe$=function(t){this.useAlbedoMap_vv6xll$(ch(t))},kc.prototype.useAlbedoMap_vv6xll$=function(t){this.albedoMap=t,this.albedoSource=ic()},kc.prototype.useNormalMap_61zpoe$=function(t){this.useNormalMap_vv6xll$(ch(t))},kc.prototype.useNormalMap_vv6xll$=function(t){this.normalMap=t,this.isNormalMapped=!0},kc.prototype.requiresTexCoords=function(){return this.albedoSource===ic()||this.isNormalMapped},kc.$metadata$={kind:$,simpleName:"PhongConfig",interfaces:[]},bc.$metadata$={kind:$,simpleName:"PhongShader",interfaces:[lc]},Object.defineProperty(Sc.prototype,"color",{configurable:!0,get:function(){return this.color_l79ks7$_0},set:function(t){var e,i,n;this.color_l79ks7$_0=t,null!=(n=null!=(i=null!=(e=this.uColor_cc6m7u$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Sc.prototype,"colorMap",{configurable:!0,get:function(){return this.colorMap_h0jju9$_0},set:function(t){var e;this.colorMap_h0jju9$_0=t,null!=(e=this.colorSampler_he8fz1$_0)&&(e.texture=t)}}),Object.defineProperty(Sc.prototype,"colorCubeMap",{configurable:!0,get:function(){return this.colorCubeMap_moycys$_0},set:function(t){var e;this.colorCubeMap_moycys$_0=t,null!=(e=this.colorCubeSampler_b56oeg$_0)&&(e.texture=t)}}),Sc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_ci460b$_0,t.blendMode=this.isBlending_6tbhot$_0?al():ol(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Sc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h=this.model;t:do{var d;for(u=Vp.ALL,d=h.stages.values.iterator();d.hasNext();){var f=d.next();if(0!=(f.stage.mask&u.mask)){var _,m,$=f.nodes;e:do{var y;for(y=$.iterator();y.hasNext();){var v=y.next();if(zt(v.name,"uColor")&&e.isType(v,$p)){m=v;break e}}m=null}while(0);var g=null==(_=m)||e.isType(_,$p)?_:c();if(null!=g){p=g;break t}}}p=null}while(0);this.uColor_cc6m7u$_0=p,null!=(s=null!=(r=null!=(o=this.uColor_cc6m7u$_0)?o.uniform:null)?r.value:null)&&s.set_czzhhz$(this.color);var b,x,w=this.model;t:do{var z;for(b=Vp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&b.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var T=E.next();if(zt(T.name,"tColor")&&e.isType(T,up)){C=T;break e}}C=null}while(0);var P=null==(S=C)||e.isType(S,up)?S:c();if(null!=P){x=P;break t}}}x=null}while(0);this.colorSampler_he8fz1$_0=null!=(a=x)?a.sampler:null,null!=(l=this.colorSampler_he8fz1$_0)&&(l.texture=this.colorMap),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Cc.prototype.defaultUnlitModel_ws3dmo$=function(t){var i,n,o,r,s,a=new Iu("defaultPbrModel()"),l={v:null},p={v:null},c={v:null},h=new Lu(a),d=h.mvpNode();if(t.isInstanced?(r=h.multiplyNode_ze33is$(d.outModelMat,h.instanceAttrModelMat().output).output,s=h.multiplyNode_ze33is$(d.outMvpMat,h.instanceAttrModelMat().output).output):(r=d.outModelMat,s=d.outMvpMat),t.isSkinned){var f=h.skinTransformNode_78eraa$(h.attrJoints().output,h.attrWeights().output,t.maxJoints);r=h.multiplyNode_ze33is$(r,f.outJointMat).output,s=h.multiplyNode_ze33is$(s,f.outJointMat).output}i=t.requiresTexCoords()?h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output):null,p.v=i,n=t.colorSource===nc()?h.stageInterfaceNode_iikjwn$("ifColors",h.attrColors().output):null,l.v=n;var _,m,$=t.morphAttributes.isEmpty()?null:h.morphWeightsNode_za3lpa$(t.morphAttributes.size),y={v:h.attrPositions().output},v=t.morphAttributes,g=M();for(_=v.iterator();_.hasNext();){var b=_.next();u(b.name,ds().POSITIONS.name)&&g.add_11rb$(b)}for(m=g.iterator();m.hasNext();){var w=m.next(),z=h.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(w),x($)),k=h.multiplyNode_ze33is$(h.attributeNode_nm2vx5$(w).output,z.outWeight);y.v=h.addNode_ze33is$(y.v,k.output).output}if(t.colorSource===tc()){var S=h.vec3TransformNode_vid4wo$(y.v,r,1).outVec3;o=h.stageInterfaceNode_iikjwn$("ifFragPos",S)}else o=null;c.v=o,h.positionOutput=h.vec4TransformNode_9krp9t$(y.v,s).outVec4;var C,N,E,T=new Du(a);switch(t.colorSource.name){case"VERTEX_ALBEDO":C=x(l.v).output;break;case"STATIC_ALBEDO":C=T.pushConstantNodeColor_61zpoe$("uColor").output;break;case"TEXTURE_ALBEDO":var P=T.textureSamplerNode_ce41yx$(T.textureNode_61zpoe$("tColor"),x(p.v).output);if(t.isMultiplyColorMap){var O=T.pushConstantNodeColor_61zpoe$("uColor").output;C=T.multiplyNode_ze33is$(P.outColor,O).output}else C=P.outColor;break;case"CUBE_MAP_ALBEDO":var j=T.cubeMapSamplerNode_2z3a2t$(T.cubeMapNode_61zpoe$("tCubeColor"),x(c.v).output);if(t.isMultiplyColorMap){var A=T.pushConstantNodeColor_61zpoe$("uColor").output;C=T.multiplyNode_ze33is$(j.outColor,A).output}else C=j.outColor;break;default:C=e.noWhenBranchMatched()}var I={v:C};return null!=(E=e.isType(N=t.alphaMode,ac)?N:null)&&T.discardAlpha_ze33is$(T.splitNode_500t7j$(I.v,"a").output,T.constFloat_mx4ult$(E.cutOff)),e.isType(t.alphaMode,rc)||(I.v=T.combineXyzWNode_ze33is$(I.v,T.constFloat_mx4ult$(1)).output),T.colorOutput_a3v4si$(T.unlitMaterialNode_r20yfm$(I.v).outColor),a},Cc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Nc,Ec,Tc,Pc,Oc,Mc,jc,Ac,Ic,Rc,Lc,Dc,qc=null;function Fc(){return null===qc&&new Cc,qc}function Bc(){this.colorSource=nc(),this.isMultiplyColorMap=!1,this.isInstanced=!1,this.isSkinned=!1,this.maxJoints=64,this.morphAttributes=M(),this.cullMethod=xl(),this.alphaMode=new sc,this.color=J$().GRAY,this.colorMap=null,this.colorCubeMap=null}function Uc(t){var e;this.elements_0=M(),this.size=0;var i=0;for(e=t.iterator();e.hasNext();){var n=e.next(),o=new Vc(n,i);this.elements_0.add_11rb$(o),i=i+(n.size+o.padding)|0}this.size=i}function Vc(t,i){var n;switch(this.uniform=t,this.offset=0,this.padding=0,this.uniform.typeSize){case 4:n=4;break;case 8:n=8;break;default:n=16}var o=n;this.offset=e.imul((i+o-1|0)/o|0,o),this.padding=this.offset-i|0}function Gc(t,e,i,n){T.call(this),this.channels=i,this.hasAlpha=n,this.name$=t,this.ordinal$=e}function Hc(){Hc=function(){},Nc=new Gc("R",0,1,!1),Ec=new Gc("RG",1,2,!1),Tc=new Gc("RGB",2,3,!1),Pc=new Gc("RGBA",3,4,!0),Oc=new Gc("R_F16",4,1,!1),Mc=new Gc("RG_F16",5,2,!1),jc=new Gc("RGB_F16",6,3,!1),Ac=new Gc("RGBA_F16",7,4,!0)}function Wc(){return Hc(),Nc}function Kc(){return Hc(),Ec}function Xc(){return Hc(),Tc}function Yc(){return Hc(),Pc}function Zc(){return Hc(),Oc}function Jc(){return Hc(),Mc}function Qc(){return Hc(),jc}function th(){return Hc(),Ac}function eh(t,e,i){ph(),void 0===t&&(t=new Sh),void 0===e&&(e=null),void 0===i&&(i=null),this.props=t,this.name=e,this.loader=i,this.loadedTexture=null,this.loadingState=oh()}function ih(t,e){T.call(this),this.name$=t,this.ordinal$=e}function nh(){nh=function(){},Ic=new ih("NOT_LOADED",0),Rc=new ih("LOADING",1),Lc=new ih("LOADED",2),Dc=new ih("LOADING_FAILED",3)}function oh(){return nh(),Ic}function rh(){return nh(),Rc}function sh(){return nh(),Lc}function ah(){return nh(),Dc}function lh(){uh=this}Sc.$metadata$={kind:$,simpleName:"UnlitShader",interfaces:[lc]},Bc.prototype.useStaticColor_d7aj7k$=function(t){this.colorSource=ec(),this.color=t},Bc.prototype.useColorMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useColorMap_daqygw$(ch(t),e)},Bc.prototype.useColorMap_daqygw$=function(t,e){void 0===e&&(e=!1),this.colorMap=t,this.isMultiplyColorMap=e,this.colorSource=ic()},Bc.prototype.useColorCubeMap_a54iyn$=function(t,e){void 0===e&&(e=!1),this.colorCubeMap=t,this.isMultiplyColorMap=e,this.colorSource=tc()},Bc.prototype.requiresTexCoords=function(){return this.colorSource===ic()},Bc.$metadata$={kind:$,simpleName:"UnlitMaterialConfig",interfaces:[]},Uc.prototype.putTo_l6oshk$=function(t){var e;e=this.elements_0;for(var i=0;i!==e.size;++i)this.elements_0.get_za3lpa$(i).putTo_l6oshk$(t)},Vc.prototype.putTo_l6oshk$=function(t){var e;e=this.padding;for(var i=0;i<e;i++)t.putUint8_s8j3t7$(0);this.uniform.putTo_l6oshk$(t)},Vc.$metadata$={kind:$,simpleName:"Element",interfaces:[]},Uc.$metadata$={kind:$,simpleName:"Std140Layout",interfaces:[]},Gc.$metadata$={kind:$,simpleName:"TexFormat",interfaces:[T]},Gc.values=function(){return[Wc(),Kc(),Xc(),Yc(),Zc(),Jc(),Qc(),th()]},Gc.valueOf_61zpoe$=function(t){switch(t){case"R":return Wc();case"RG":return Kc();case"RGB":return Xc();case"RGBA":return Yc();case"R_F16":return Zc();case"RG_F16":return Jc();case"RGB_F16":return Qc();case"RGBA_F16":return th();default:P("No enum constant de.fabmax.kool.pipeline.TexFormat."+t)}},eh.prototype.dispose=function(){var t;null!=(t=this.loadedTexture)&&t.dispose(),this.loadedTexture=null,this.loadingState=oh()},eh.prototype.toString=function(){return"Texture(name: "+Ct(this.name)+")"},ih.$metadata$={kind:$,simpleName:"LoadingState",interfaces:[T]},ih.values=function(){return[oh(),rh(),sh(),ah()]},ih.valueOf_61zpoe$=function(t){switch(t){case"NOT_LOADED":return oh();case"LOADING":return rh();case"LOADED":return sh();case"LOADING_FAILED":return ah();default:P("No enum constant de.fabmax.kool.pipeline.Texture.LoadingState."+t)}},lh.prototype.estimatedTexSize_4qozqa$=function(t,i,n,o,r){for(var s=1,a=.25,l=2;l<=r;l++)s+=a,a*=.25;return Lt(e.imul(e.imul(e.imul(t,i),o),n)*s)},lh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var uh=null;function ph(){return null===uh&&new lh,uh}function ch(t,e,i,n){var o,r;return void 0===e&&(e=null),void 0===i&&(i=new Sh),n=n||Object.create(eh.prototype),eh.call(n,i,e,(o=t,r=i,function(t,e,i,n){var s=new hh(o,r,t,e,this,i);return n?s:s.doResume(null)})),n}function hh(t,e,i,n,o,r){l.call(this,r),this.$controller=o,this.exceptionState_0=1,this.local$closure$assetPath=t,this.local$closure$props=e,this.local$it=n}function dh(t){var e;bh(),eh.call(this,new Sh(void 0,void 0,void 0,void 0,Eh(),Eh(),!1,1),t.toString(),(e=t,function(t,i,n,o){var r=new xh(e,t,i,this,n);return o?r:r.doResume(null)}))}function fh(){gh=this,this.colorData_0=z()}eh.$metadata$={kind:$,simpleName:"Texture",interfaces:[]},hh.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},hh.prototype=Object.create(l.prototype),hh.prototype.constructor=hh,hh.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$closure$assetPath,this.local$closure$props.format,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fh.prototype.getColorTextureData_0=function(t){var e,i=this.colorData_0,n=i.get_11rb$(t);if(null==n){var o=Gh().singleColor_d7aj7k$(t);i.put_xwzc9p$(t,o),e=o}else e=n;return e},fh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _h,mh,$h,yh,vh,gh=null;function bh(){return null===gh&&new fh,gh}function xh(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$color=t}function wh(t,e){var i,n;void 0===e&&(e=256),eh.call(this,new Sh(void 0,Mh(),Mh(),void 0,Th(),Th(),!1,1),"gradientTex-"+e,(i=t,n=e,function(t,e,o,r){var s=new zh(i,n,t,e,this,o);return r?s:s.doResume(null)}))}function zh(t,e,i,n,o,r){l.call(this,r),this.$controller=o,this.exceptionState_0=1,this.local$closure$gradient=t,this.local$closure$size=e}function kh(t,e,i){void 0===t&&(t=new Sh),void 0===e&&(e=null),void 0===i&&(i=null),eh.call(this,t,e,i)}function Sh(t,e,i,n,o,r,s,a){void 0===t&&(t=Yc()),void 0===e&&(e=Ah()),void 0===i&&(i=Ah()),void 0===n&&(n=Ah()),void 0===o&&(o=Th()),void 0===r&&(r=Th()),void 0===s&&(s=!0),void 0===a&&(a=4),this.format=t,this.addressModeU=e,this.addressModeV=i,this.addressModeW=n,this.minFilter=o,this.magFilter=r,this.mipMapping=s,this.maxAnisotropy=a}function Ch(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Nh(){Nh=function(){},_h=new Ch("NEAREST",0),mh=new Ch("LINEAR",1)}function Eh(){return Nh(),_h}function Th(){return Nh(),mh}function Ph(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Oh(){Oh=function(){},$h=new Ph("CLAMP_TO_EDGE",0),yh=new Ph("MIRRORED_REPEAT",1),vh=new Ph("REPEAT",2)}function Mh(){return Oh(),$h}function jh(){return Oh(),yh}function Ah(){return Oh(),vh}function Ih(){this.width_g2mups$_0=0,this.height_9y5xsp$_0=0,this.format_yfgg89$_0=Yc()}function Rh(t,e,i,n){Gh(),Ih.call(this),this.width=e,this.height=i,this.format=n,this.data_glz8b$_0=t}function Lh(){Vh=this}xh.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},xh.prototype=Object.create(l.prototype),xh.prototype.constructor=xh,xh.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return bh().getColorTextureData_0(this.local$closure$color);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},dh.$metadata$={kind:$,simpleName:"SingleColorTexture",interfaces:[eh]},zh.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},zh.prototype=Object.create(l.prototype),zh.prototype.constructor=zh,zh.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return Gh().gradient_mjek1u$(this.local$closure$gradient,this.local$closure$size);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},wh.$metadata$={kind:$,simpleName:"GradientTexture",interfaces:[eh]},kh.$metadata$={kind:$,simpleName:"CubeMapTexture",interfaces:[eh]},Sh.$metadata$={kind:$,simpleName:"TextureProps",interfaces:[]},Sh.prototype.component1=function(){return this.format},Sh.prototype.component2=function(){return this.addressModeU},Sh.prototype.component3=function(){return this.addressModeV},Sh.prototype.component4=function(){return this.addressModeW},Sh.prototype.component5=function(){return this.minFilter},Sh.prototype.component6=function(){return this.magFilter},Sh.prototype.component7=function(){return this.mipMapping},Sh.prototype.component8=function(){return this.maxAnisotropy},Sh.prototype.copy_1w7iuy$=function(t,e,i,n,o,r,s,a){return new Sh(void 0===t?this.format:t,void 0===e?this.addressModeU:e,void 0===i?this.addressModeV:i,void 0===n?this.addressModeW:n,void 0===o?this.minFilter:o,void 0===r?this.magFilter:r,void 0===s?this.mipMapping:s,void 0===a?this.maxAnisotropy:a)},Sh.prototype.toString=function(){return"TextureProps(format="+e.toString(this.format)+", addressModeU="+e.toString(this.addressModeU)+", addressModeV="+e.toString(this.addressModeV)+", addressModeW="+e.toString(this.addressModeW)+", minFilter="+e.toString(this.minFilter)+", magFilter="+e.toString(this.magFilter)+", mipMapping="+e.toString(this.mipMapping)+", maxAnisotropy="+e.toString(this.maxAnisotropy)+")"},Sh.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.format)|0)+e.hashCode(this.addressModeU)|0)+e.hashCode(this.addressModeV)|0)+e.hashCode(this.addressModeW)|0)+e.hashCode(this.minFilter)|0)+e.hashCode(this.magFilter)|0)+e.hashCode(this.mipMapping)|0)+e.hashCode(this.maxAnisotropy)|0},Sh.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.format,t.format)&&e.equals(this.addressModeU,t.addressModeU)&&e.equals(this.addressModeV,t.addressModeV)&&e.equals(this.addressModeW,t.addressModeW)&&e.equals(this.minFilter,t.minFilter)&&e.equals(this.magFilter,t.magFilter)&&e.equals(this.mipMapping,t.mipMapping)&&e.equals(this.maxAnisotropy,t.maxAnisotropy)},Ch.$metadata$={kind:$,simpleName:"FilterMethod",interfaces:[T]},Ch.values=function(){return[Eh(),Th()]},Ch.valueOf_61zpoe$=function(t){switch(t){case"NEAREST":return Eh();case"LINEAR":return Th();default:P("No enum constant de.fabmax.kool.pipeline.FilterMethod."+t)}},Ph.$metadata$={kind:$,simpleName:"AddressMode",interfaces:[T]},Ph.values=function(){return[Mh(),jh(),Ah()]},Ph.valueOf_61zpoe$=function(t){switch(t){case"CLAMP_TO_EDGE":return Mh();case"MIRRORED_REPEAT":return jh();case"REPEAT":return Ah();default:P("No enum constant de.fabmax.kool.pipeline.AddressMode."+t)}},Object.defineProperty(Ih.prototype,"width",{configurable:!0,get:function(){return this.width_g2mups$_0},set:function(t){this.width_g2mups$_0=t}}),Object.defineProperty(Ih.prototype,"height",{configurable:!0,get:function(){return this.height_9y5xsp$_0},set:function(t){this.height_9y5xsp$_0=t}}),Object.defineProperty(Ih.prototype,"format",{configurable:!0,get:function(){return this.format_yfgg89$_0},set:function(t){this.format_yfgg89$_0=t}}),Ih.$metadata$={kind:$,simpleName:"TextureData",interfaces:[]},Object.defineProperty(Rh.prototype,"data",{configurable:!0,get:function(){return this.data_glz8b$_0}}),Lh.prototype.singleColor_d7aj7k$=function(t){var e=PN(4);return e.set_6t1wet$(0,Dt(Lt(255*t.r))),e.set_6t1wet$(1,Dt(Lt(255*t.g))),e.set_6t1wet$(2,Dt(Lt(255*t.b))),e.set_6t1wet$(3,Dt(Lt(255*t.a))),new Rh(e,1,1,Yc())},Lh.prototype.gradient_mjek1u$=function(t,e){for(var i=PN(4*e|0),n=0;n<e;n++){var o=t.getColor_y2kzbl$(n/(e-1));i.set_6t1wet$(0+(4*n|0)|0,Dt(Lt(255*o.r))),i.set_6t1wet$(1+(4*n|0)|0,Dt(Lt(255*o.g))),i.set_6t1wet$(2+(4*n|0)|0,Dt(Lt(255*o.b))),i.set_6t1wet$(3+(4*n|0)|0,Dt(Lt(255*o.a)))}return new Rh(i,e,1,Yc())},Lh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Dh,qh,Fh,Bh,Uh,Vh=null;function Gh(){return null===Vh&&new Lh,Vh}function Hh(t,e,i,n,o,r){Ih.call(this),this.front=t,this.back=e,this.left=i,this.right=n,this.up=o,this.down=r,this.width=this.front.width,this.height=this.front.height,this.format=this.front.format}function Wh(t,e){this.value=t,this.name=e,this.length_pgm1d5$_0=1}function Kh(t){Wh.call(this,0,t),this.size_i0aw35$_0=4}function Xh(t,e,i){return i=i||Object.create(Kh.prototype),Kh.call(i,e),i.value=t,i}function Yh(t){Wh.call(this,po(),t),this.size_o76ots$_0=8}function Zh(t){Wh.call(this,jo(),t),this.size_4mfs8f$_0=16}function Jh(t){Wh.call(this,or(),t),this.size_xg29am$_0=16}function Qh(t){Wh.call(this,ty(),t),this.size_tg5r8j$_0=16}function td(t,e){Wh.call(this,new Float32Array(e),t),this.length_4yln86$_0=e,this.size_jukhwb$_0=16*this.length|0,this.typeSize_inwio1$_0=4}function ed(t,e){var i,n=I(e);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=po();Wh.call(this,n,t),this.length_or99bd$_0=e,this.size_a1jiw4$_0=16*this.length|0}function id(t,e){var i,n=I(e);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=jo();Wh.call(this,n,t),this.length_gjzw48$_0=e,this.size_v3gial$_0=16*this.length|0}function nd(t,e){var i,n=I(e);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=or();Wh.call(this,n,t),this.length_d5v0fb$_0=e,this.size_17chi6$_0=16*this.length|0}function od(t){Wh.call(this,new $n,t),this.size_aq1f2r$_0=36}function rd(t){Wh.call(this,new En,t),this.size_i3l1zg$_0=64}function sd(t,e){var i,n=I(e);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=new En;Wh.call(this,n,t),this.length_m05swr$_0=e,this.size_mobkps$_0=64*this.length|0}function ad(t){Wh.call(this,0,t),this.size_8zmb7w$_0=4}function ld(t,e,i){return i=i||Object.create(ad.prototype),ad.call(i,e),i.value=t,i}function ud(t){Wh.call(this,So(),t),this.size_ju05ub$_0=8}function pd(t){Wh.call(this,Yo(),t),this.size_mdhf2m$_0=12}function cd(t){Wh.call(this,Er(),t),this.size_6g51zl$_0=16}function hd(t,i){this.bindings=t,this.primitiveType=i,this.longHash=null;var n,o=this.primitiveType.hashCode();n=new kt(e.Long.fromInt(o));var r,s={v:new kt(new kt(e.Long.fromInt(71023)).data.multiply(n.data))};for(r=this.bindings.iterator();r.hasNext();){var a=r.next(),l=s.v,u=new kt(e.Long.fromInt(71023)),p=new kt(l.data.multiply(u.data)),c=a.longHash;s.v=new kt(p.data.add(c.data))}this.longHash=s.v}function dd(t,i,n,o){if(void 0===o){var r,s=0;for(r=n.iterator();r.hasNext();)s=s+r.next().attribute.type.byteSize|0;o=s}this.binding=t,this.inputRate=i,this.vertexAttributes=n,this.strideBytes=o,this.longHash=null;var a=this.binding,l={v:new kt(e.Long.fromInt(a))},u=l.v,p=new kt(e.Long.fromInt(71023)),c=new kt(u.data.multiply(p.data)),h=this.inputRate.hashCode(),d=new kt(e.Long.fromInt(h));l.v=new kt(c.data.add(d.data));var f,_=l.v,m=new kt(e.Long.fromInt(71023)),$=new kt(_.data.multiply(m.data)),y=this.strideBytes,v=new kt(e.Long.fromInt(y));for(l.v=new kt($.data.add(v.data)),f=this.vertexAttributes.iterator();f.hasNext();){var g=f.next(),b=l.v,x=new kt(e.Long.fromInt(71023)),w=new kt(b.data.multiply(x.data)),z=g.hashCode(),k=new kt(e.Long.fromInt(z));l.v=new kt(w.data.add(k.data))}this.longHash=l.v}function fd(t,e,i){this.location=t,this.offset=e,this.attribute=i}function _d(){this.primitiveType=uz(),this.bindings=M()}function md(t,e){T.call(this),this.name$=t,this.ordinal$=e}function $d(){$d=function(){},Dh=new md("VERTEX",0),qh=new md("INSTANCE",1)}function yd(){return $d(),Dh}function vd(){return $d(),qh}function gd(t,e){return FS(t,e)}function bd(t){var e;void 0===t&&(t="camera"),sf.call(this,t),this.position=new Mo(0,0,1),this.lookAt=Io(To().ZERO),this.up=Io(To().Y_AXIS),this.aspectRatio=1,this.useViewportAspectRatio=!0,this.globalRange_4hi0xu$_0=0,this.globalPosMut=jo(),this.globalLookAtMut=jo(),this.globalUpMut=jo(),this.globalRightMut=jo(),this.globalLookDirMut=jo(),this.proj=new bn,this.view=new bn,this.lazyInvProj_tohv7i$_0=new xd((e=this,function(t){return e.proj.invert_23yxad$(t),s})),this.lazyInvView_trmos6$_0=new xd(function(t){return function(e){return t.view.invert_23yxad$(e),s}}(this)),this.lazyViewProj_dqyl7q$_0=new xd(function(t){return function(e){return t.proj.mul_u47j3u$(t.view,e),s}}(this)),this.lazyInvViewProj_vy3fmv$_0=new xd(function(t){return function(e){return t.viewProj.invert_23yxad$(e),s}}(this)),this.projCorrectionMode=Sd(),this.projCorrected_2lfajw$_0=new bn,this.tmpVec3_txabpe$_0=jo(),this.tmpVec4_txabq9$_0=or()}function xd(t){this.update=t,this.isDirty=!0,this.mat_0=new bn}function wd(t,e){T.call(this),this.name$=t,this.ordinal$=e}function zd(){zd=function(){},Fh=new wd("NONE",0),Bh=new wd("ONSCREEN",1),Uh=new wd("OFFSCREEN",2)}function kd(){return zd(),Fh}function Sd(){return zd(),Bh}function Cd(){return zd(),Uh}function Nd(t){void 0===t&&(t="orthographicCam"),bd.call(this,t),this.left=-10,this.right=10,this.bottom=-10,this.top=10,this.near=-10,this.far=10,this.isClipToViewport=!1,this.isKeepAspectRatio=!0,this.tmpNodeCenter_dwzowq$_0=jo()}function Ed(t){void 0===t&&(t="perspectiveCam"),bd.call(this,t),this.clipNear=.1,this.clipFar=100,this.fovY=60,this.fovX_7k9npl$_0=0,this.sphereFacX_87yued$_0=1,this.sphereFacY_87yuf8$_0=1,this.tangX_ey6fwg$_0=1,this.tangY_ey6fvl$_0=1,this.tmpNodeCenter_hw7d0$_0=jo()}function Td(t){Ed.call(this),this.master=t,this.useViewportAspectRatio=!1,this.projCorrectionMode=Cd()}function Pd(){this.upperLeft=jo(),this.upperRight=jo(),this.lowerLeft=jo(),this.lowerRight=jo()}Rh.$metadata$={kind:$,simpleName:"BufferedTextureData",interfaces:[Ih]},Object.defineProperty(Hh.prototype,"data",{configurable:!0,get:function(){return this.front.data}}),Hh.$metadata$={kind:$,simpleName:"CubeMapTextureData",interfaces:[Ih]},Object.defineProperty(Wh.prototype,"typeSize",{configurable:!0,get:function(){return this.size}}),Object.defineProperty(Wh.prototype,"length",{configurable:!0,get:function(){return this.length_pgm1d5$_0}}),Wh.prototype.toString=function(){return this.name},Wh.$metadata$={kind:$,simpleName:"Uniform",interfaces:[]},Object.defineProperty(Kh.prototype,"size",{configurable:!0,get:function(){return this.size_i0aw35$_0}}),Kh.prototype.putTo_l6oshk$=function(t){t.putFloat32_mx4ult$(this.value)},Kh.$metadata$={kind:$,simpleName:"Uniform1f",interfaces:[Wh]},Object.defineProperty(Yh.prototype,"size",{configurable:!0,get:function(){return this.size_o76ots$_0}}),Yh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},Yh.$metadata$={kind:$,simpleName:"Uniform2f",interfaces:[Wh]},Object.defineProperty(Zh.prototype,"size",{configurable:!0,get:function(){return this.size_4mfs8f$_0}}),Zh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array),t.putUint32_za3lpa$(0)},Zh.$metadata$={kind:$,simpleName:"Uniform3f",interfaces:[Wh]},Object.defineProperty(Jh.prototype,"size",{configurable:!0,get:function(){return this.size_xg29am$_0}}),Jh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},Jh.$metadata$={kind:$,simpleName:"Uniform4f",interfaces:[Wh]},Object.defineProperty(Qh.prototype,"size",{configurable:!0,get:function(){return this.size_tg5r8j$_0}}),Qh.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},Qh.$metadata$={kind:$,simpleName:"UniformColor",interfaces:[Wh]},Object.defineProperty(td.prototype,"length",{get:function(){return this.length_4yln86$_0}}),Object.defineProperty(td.prototype,"size",{configurable:!0,get:function(){return this.size_jukhwb$_0}}),Object.defineProperty(td.prototype,"typeSize",{configurable:!0,get:function(){return this.typeSize_inwio1$_0}}),td.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_mx4ult$(this.value[i]),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0)},td.$metadata$={kind:$,simpleName:"Uniform1fv",interfaces:[Wh]},Object.defineProperty(ed.prototype,"length",{get:function(){return this.length_or99bd$_0}}),Object.defineProperty(ed.prototype,"size",{configurable:!0,get:function(){return this.size_a1jiw4$_0}}),ed.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0)},ed.$metadata$={kind:$,simpleName:"Uniform2fv",interfaces:[Wh]},Object.defineProperty(id.prototype,"length",{get:function(){return this.length_gjzw48$_0}}),Object.defineProperty(id.prototype,"size",{configurable:!0,get:function(){return this.size_v3gial$_0}}),id.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array),t.putUint32_za3lpa$(0)},id.$metadata$={kind:$,simpleName:"Uniform3fv",interfaces:[Wh]},Object.defineProperty(nd.prototype,"length",{get:function(){return this.length_d5v0fb$_0}}),Object.defineProperty(nd.prototype,"size",{configurable:!0,get:function(){return this.size_17chi6$_0}}),nd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array)},nd.$metadata$={kind:$,simpleName:"Uniform4fv",interfaces:[Wh]},Object.defineProperty(od.prototype,"size",{configurable:!0,get:function(){return this.size_aq1f2r$_0}}),od.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.matrix)},od.$metadata$={kind:$,simpleName:"UniformMat3f",interfaces:[Wh]},Object.defineProperty(rd.prototype,"size",{configurable:!0,get:function(){return this.size_i3l1zg$_0}}),rd.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.matrix)},rd.$metadata$={kind:$,simpleName:"UniformMat4f",interfaces:[Wh]},Object.defineProperty(sd.prototype,"length",{get:function(){return this.length_m05swr$_0}}),Object.defineProperty(sd.prototype,"size",{configurable:!0,get:function(){return this.size_mobkps$_0}}),sd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].matrix)},sd.$metadata$={kind:$,simpleName:"UniformMat4fv",interfaces:[Wh]},Object.defineProperty(ad.prototype,"size",{configurable:!0,get:function(){return this.size_8zmb7w$_0}}),ad.prototype.putTo_l6oshk$=function(t){t.putInt32_za3lpa$(this.value)},ad.$metadata$={kind:$,simpleName:"Uniform1i",interfaces:[Wh]},Object.defineProperty(ud.prototype,"size",{configurable:!0,get:function(){return this.size_ju05ub$_0}}),ud.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},ud.$metadata$={kind:$,simpleName:"Uniform2i",interfaces:[Wh]},Object.defineProperty(pd.prototype,"size",{configurable:!0,get:function(){return this.size_mdhf2m$_0}}),pd.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},pd.$metadata$={kind:$,simpleName:"Uniform3i",interfaces:[Wh]},Object.defineProperty(cd.prototype,"size",{configurable:!0,get:function(){return this.size_6g51zl$_0}}),cd.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},cd.$metadata$={kind:$,simpleName:"Uniform4i",interfaces:[Wh]},dd.$metadata$={kind:$,simpleName:"Binding",interfaces:[]},dd.prototype.component1=function(){return this.binding},dd.prototype.component2=function(){return this.inputRate},dd.prototype.component3=function(){return this.vertexAttributes},dd.prototype.component4=function(){return this.strideBytes},dd.prototype.copy_beujkh$=function(t,e,i,n){return new dd(void 0===t?this.binding:t,void 0===e?this.inputRate:e,void 0===i?this.vertexAttributes:i,void 0===n?this.strideBytes:n)},dd.prototype.toString=function(){return"Binding(binding="+e.toString(this.binding)+", inputRate="+e.toString(this.inputRate)+", vertexAttributes="+e.toString(this.vertexAttributes)+", strideBytes="+e.toString(this.strideBytes)+")"},dd.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.binding)|0)+e.hashCode(this.inputRate)|0)+e.hashCode(this.vertexAttributes)|0)+e.hashCode(this.strideBytes)|0},dd.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.binding,t.binding)&&e.equals(this.inputRate,t.inputRate)&&e.equals(this.vertexAttributes,t.vertexAttributes)&&e.equals(this.strideBytes,t.strideBytes)},Object.defineProperty(fd.prototype,"name",{configurable:!0,get:function(){return this.attribute.name}}),Object.defineProperty(fd.prototype,"type",{configurable:!0,get:function(){return this.attribute.type}}),fd.$metadata$={kind:$,simpleName:"VertexAttribute",interfaces:[]},fd.prototype.component1=function(){return this.location},fd.prototype.component2=function(){return this.offset},fd.prototype.component3=function(){return this.attribute},fd.prototype.copy_767q6x$=function(t,e,i){return new fd(void 0===t?this.location:t,void 0===e?this.offset:e,void 0===i?this.attribute:i)},fd.prototype.toString=function(){return"VertexAttribute(location="+e.toString(this.location)+", offset="+e.toString(this.offset)+", attribute="+e.toString(this.attribute)+")"},fd.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.location)|0)+e.hashCode(this.offset)|0)+e.hashCode(this.attribute)|0},fd.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.location,t.location)&&e.equals(this.offset,t.offset)&&e.equals(this.attribute,t.attribute)},_d.prototype.create=function(){return new hd(W$(this.bindings),this.primitiveType)},_d.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},hd.$metadata$={kind:$,simpleName:"VertexLayout",interfaces:[]},md.$metadata$={kind:$,simpleName:"InputRate",interfaces:[T]},md.values=function(){return[yd(),vd()]},md.valueOf_61zpoe$=function(t){switch(t){case"VERTEX":return yd();case"INSTANCE":return vd();default:P("No enum constant de.fabmax.kool.pipeline.InputRate."+t)}},Object.defineProperty(bd.prototype,"globalPos",{configurable:!0,get:function(){return this.globalPosMut}}),Object.defineProperty(bd.prototype,"globalLookAt",{configurable:!0,get:function(){return this.globalLookAtMut}}),Object.defineProperty(bd.prototype,"globalUp",{configurable:!0,get:function(){return this.globalUpMut}}),Object.defineProperty(bd.prototype,"globalRight",{configurable:!0,get:function(){return this.globalRightMut}}),Object.defineProperty(bd.prototype,"globalLookDir",{configurable:!0,get:function(){return this.globalLookDirMut}}),Object.defineProperty(bd.prototype,"globalRange",{configurable:!0,get:function(){return this.globalRange_4hi0xu$_0},set:function(t){this.globalRange_4hi0xu$_0=t}}),Object.defineProperty(bd.prototype,"invProj",{configurable:!0,get:function(){return this.lazyInvProj_tohv7i$_0.get()}}),Object.defineProperty(bd.prototype,"invView",{configurable:!0,get:function(){return this.lazyInvView_trmos6$_0.get()}}),Object.defineProperty(bd.prototype,"viewProj",{configurable:!0,get:function(){return this.lazyViewProj_dqyl7q$_0.get()}}),Object.defineProperty(bd.prototype,"invViewProj",{configurable:!0,get:function(){return this.lazyInvViewProj_vy3fmv$_0.get()}}),bd.prototype.updateCamera_fd1mc0$=function(t,e){this.useViewportAspectRatio&&(this.aspectRatio=e.aspectRatio),this.updateViewMatrix(),this.updateProjectionMatrix(),this.projCorrectionMode===Sd()?(t.projCorrectionMatrixScreen.mul_u47j3u$(this.proj,this.projCorrected_2lfajw$_0),this.proj.set_d4zu6l$(this.projCorrected_2lfajw$_0)):this.projCorrectionMode===Cd()&&(t.projCorrectionMatrixOffscreen.mul_u47j3u$(this.proj,this.projCorrected_2lfajw$_0),this.proj.set_d4zu6l$(this.projCorrected_2lfajw$_0)),this.lazyInvProj_tohv7i$_0.isDirty=!0,this.lazyViewProj_dqyl7q$_0.isDirty=!0,this.lazyInvViewProj_vy3fmv$_0.isDirty=!0},bd.prototype.updateViewMatrix=function(){this.toGlobalCoords_w1lst9$(this.globalPosMut.set_czzhiu$(this.position)),this.toGlobalCoords_w1lst9$(this.globalLookAtMut.set_czzhiu$(this.lookAt)),this.toGlobalCoords_w1lst9$(this.globalUpMut.set_czzhiu$(this.up),0).norm(),this.globalLookDirMut.set_czzhiu$(this.globalLookAtMut).subtract_czzhiu$(this.globalPosMut),this.globalRange=this.globalLookDirMut.length(),this.globalLookDirMut.scale_mx4ult$(1/this.globalRange),this.globalLookDirMut.cross_2gj7b4$(this.globalUpMut,this.globalRightMut).norm(),this.globalRightMut.cross_2gj7b4$(this.globalLookDirMut,this.globalUpMut).norm(),this.view.setLookAt_n440fu$(this.globalPosMut,this.globalLookAtMut,this.globalUpMut),this.lazyInvView_trmos6$_0.isDirty=!0},bd.prototype.computePickRay_2cu1go$=function(t,e,i,n){return e.isValid&&this.computePickRay_k7d561$(t,e.x,e.y,i,n)},bd.prototype.computePickRay_k7d561$=function(t,e,i,n,o){var r=this.unProjectScreen_c0y950$(this.tmpVec3_txabpe$_0.set_y2kzbl$(e,i,0),n,o,t.origin);return(r=r&&this.unProjectScreen_c0y950$(this.tmpVec3_txabpe$_0.set_y2kzbl$(e,i,1),n,o,t.direction))&&(t.direction.subtract_czzhiu$(t.origin),t.direction.norm()),r},bd.prototype.initRayTes_clwnka$=function(t,e,i,n){return e.isValid&&this.initRayTes_r53qw5$(t,e.x,e.y,i,n)},bd.prototype.initRayTes_r53qw5$=function(t,e,i,n,o){return t.clear(),this.computePickRay_k7d561$(t.ray,e,i,n,o)},bd.prototype.isInFrustum_f1kmr1$=function(t){return this.isInFrustum_2qa7tb$(t.globalCenter,t.globalRadius)},bd.prototype.project_2gj7b4$=function(t,e){this.tmpVec4_txabq9$_0.set_7b5o5w$(t.x,t.y,t.z,1),this.viewProj.transform_5s4mpv$(this.tmpVec4_txabq9$_0);var i,n=this.tmpVec4_txabq9$_0.w;return i=LN.FUZZY_EQ_F,!(A.abs(n)<=i||(e.set_y2kzbl$(this.tmpVec4_txabq9$_0.x,this.tmpVec4_txabq9$_0.y,this.tmpVec4_txabq9$_0.z).scale_mx4ult$(1/this.tmpVec4_txabq9$_0.w),0))},bd.prototype.project_2gj7bz$=function(t,e){return this.viewProj.transform_5s4mpv$(e.set_7b5o5w$(t.x,t.y,t.z,1))},bd.prototype.projectScreen_c0y950$=function(t,e,i,n){return!!this.project_2gj7b4$(t,n)&&(n.x=.5*(1+n.x)*e.width+e.x,n.y=i.windowHeight-.5*(1+n.y)*e.height+e.y,n.z=.5*(1+n.z),!0)},bd.prototype.unProjectScreen_c0y950$=function(t,e,i,n){var o=t.x-e.x,r=i.windowHeight-t.y-e.y;this.tmpVec4_txabq9$_0.set_7b5o5w$(2*o/e.width-1,2*r/e.height-1,2*t.z-1,1),this.invViewProj.transform_5s4mpv$(this.tmpVec4_txabq9$_0);var s=1/this.tmpVec4_txabq9$_0.w;return n.set_y2kzbl$(this.tmpVec4_txabq9$_0.x*s,this.tmpVec4_txabq9$_0.y*s,this.tmpVec4_txabq9$_0.z*s),!0},xd.prototype.get=function(){return this.isDirty&&(this.update(this.mat_0),this.isDirty=!1),this.mat_0},xd.$metadata$={kind:$,simpleName:"LazyMatrix",interfaces:[]},wd.$metadata$={kind:$,simpleName:"ProjCorrectionMode",interfaces:[T]},wd.values=function(){return[kd(),Sd(),Cd()]},wd.valueOf_61zpoe$=function(t){switch(t){case"NONE":return kd();case"ONSCREEN":return Sd();case"OFFSCREEN":return Cd();default:P("No enum constant de.fabmax.kool.scene.Camera.ProjCorrectionMode."+t)}},bd.$metadata$={kind:$,simpleName:"Camera",interfaces:[sf]},Nd.prototype.setCentered_y2kzbl$=function(t,e,i){this.top=.5*t,this.bottom=-this.top,this.right=this.aspectRatio*this.top,this.left=-this.right,this.near=e,this.far=i},Nd.prototype.updateCamera_fd1mc0$=function(t,e){if(this.isClipToViewport)this.left=0,this.right=e.width,this.bottom=0,this.top=e.height;else if(this.isKeepAspectRatio){var i=this.top-this.bottom,n=e.aspectRatio*i,o=this.left+.5*(this.right-this.left);this.left=o-.5*n,this.right=o+.5*n}bd.prototype.updateCamera_fd1mc0$.call(this,t,e)},Nd.prototype.updateProjectionMatrix=function(){this.left!==this.right&&this.bottom!==this.top&&this.near!==this.far&&this.proj.setOrthographic_w8lrqs$(this.left,this.right,this.bottom,this.top,this.near,this.far)},Nd.prototype.computeFrustumPlane_jwr40o$=function(t,e){this.invView.transform_w1lst9$(e.upperLeft.set_y2kzbl$(this.left,this.top,-t)),this.invView.transform_w1lst9$(e.upperRight.set_y2kzbl$(this.right,this.top,-t)),this.invView.transform_w1lst9$(e.lowerLeft.set_y2kzbl$(this.left,this.bottom,-t)),this.invView.transform_w1lst9$(e.lowerRight.set_y2kzbl$(this.right,this.bottom,-t))},Nd.prototype.isInFrustum_2qa7tb$=function(t,e){this.tmpNodeCenter_dwzowq$_0.set_czzhiu$(t),this.tmpNodeCenter_dwzowq$_0.subtract_czzhiu$(this.globalPos);var i=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalRight);if(i>this.right+e||i<this.left-e)return!1;var n=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalUp);if(n>this.top+e||n<this.bottom-e)return!1;var o=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalLookDir);return!(o>this.far+e||o<this.near-e)},Nd.$metadata$={kind:$,simpleName:"OrthographicCamera",interfaces:[bd]},Object.defineProperty(Ed.prototype,"fovX",{configurable:!0,get:function(){return this.fovX_7k9npl$_0},set:function(t){this.fovX_7k9npl$_0=t}}),Ed.prototype.updateProjectionMatrix=function(){this.proj.setPerspective_7b5o5w$(this.fovY,this.aspectRatio,this.clipNear,this.clipFar);var t=this.fovY*LN.DEG_2_RAD/2;this.sphereFacY_87yuf8$_0=1/A.cos(t),this.tangY_ey6fvl$_0=A.tan(t);var e=this.tangY_ey6fvl$_0*this.aspectRatio,i=A.atan(e);this.sphereFacX_87yued$_0=1/A.cos(i),this.tangX_ey6fwg$_0=A.tan(i),this.fovX=2*i*LN.RAD_2_DEG},Ed.prototype.computeFrustumPlane_jwr40o$=function(t,e){var i=t*this.tangX_ey6fwg$_0,n=t*this.tangY_ey6fvl$_0;this.invView.transform_w1lst9$(e.upperLeft.set_y2kzbl$(-i,n,-t)),this.invView.transform_w1lst9$(e.upperRight.set_y2kzbl$(i,n,-t)),this.invView.transform_w1lst9$(e.lowerLeft.set_y2kzbl$(-i,-n,-t)),this.invView.transform_w1lst9$(e.lowerRight.set_y2kzbl$(i,-n,-t))},Ed.prototype.isInFrustum_2qa7tb$=function(t,e){this.tmpNodeCenter_hw7d0$_0.set_czzhiu$(t),this.tmpNodeCenter_hw7d0$_0.subtract_czzhiu$(this.globalPos);var i=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalLookDir);if(i>this.clipFar+e||i<this.clipNear-e)return!1;var n=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalUp),o=e*this.sphereFacY_87yuf8$_0;if(n>(i*=this.tangY_ey6fvl$_0)+o||n<-i-o)return!1;var r=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalRight);return o=e*this.sphereFacX_87yued$_0,!(r>(i*=this.aspectRatio)+o||r<-i-o)},Td.prototype.sync_hrtwbc$=function(t,e){this.master.updateCamera_fd1mc0$(e,t),this.position.set_czzhiu$(this.master.globalPos),this.lookAt.set_czzhiu$(this.master.globalLookAt),this.up.set_czzhiu$(this.master.globalUp),this.aspectRatio=this.master.aspectRatio,this.fovY=this.master.fovY,this.clipNear=this.master.clipNear,this.clipFar=this.master.clipFar},Td.$metadata$={kind:$,simpleName:"Proxy",interfaces:[Ed]},Ed.$metadata$={kind:$,simpleName:"PerspectiveCamera",interfaces:[bd]},Pd.prototype.set_lj9zd1$=function(t){this.upperLeft.set_czzhiu$(t.upperLeft),this.upperRight.set_czzhiu$(t.upperRight),this.lowerLeft.set_czzhiu$(t.lowerLeft),this.lowerRight.set_czzhiu$(t.lowerRight)},Pd.$metadata$={kind:$,simpleName:"FrustumPlane",interfaces:[]};var Od,Md,jd,Ad=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var o=e;return t(o(i),o(n))}}}));function Id(t){void 0===t&&(t=null),sf.call(this,t),this.intChildren=M(),this.childrenBounds=new q$,this.transform=new bn,this.invTransform=new bn,this.isIdentity=!1,this.isDirty=!1,this.tmpTransformVec_vl4onp$_0=jo(),this.tmpBounds_8xwcjs$_0=new q$,this.setIdentity()}function Rd(){this.lights=b([(new Ld).setDirectional_czzhiu$(Po(-1)).setColor_y83vuj$(J$().WHITE,1)])}function Ld(){this.color=ey(J$().WHITE),this.type=Fd(),this.direction=Ao(1),this.position=jo(),this.spotAngle=60}function Dd(t,e,i){T.call(this),this.encoded=i,this.name$=t,this.ordinal$=e}function qd(){qd=function(){},Od=new Dd("DIRECTIONAL",0,0),Md=new Dd("POINT",1,1),jd=new Dd("SPOT",2,2)}function Fd(){return qd(),Od}function Bd(){return qd(),Md}function Ud(){return qd(),jd}function Vd(t,e){void 0===t&&(t=oz([ds().POSITIONS,ds().COLORS])),void 0===e&&(e=null),Hd.call(this,t,e),t.primitiveType=az(),this.rayTest=of().nopTest();var i=new Bc;this.shader=new Sc(i)}function Gd(t,e,i){void 0===t&&(t=null),void 0===e&&(e=!1);var n=b([ds().POSITIONS,ds().NORMALS,ds().TEXTURE_COORDS]);if(e){var o=ds().TANGENTS;n.add_11rb$(o)}var r=new Hd(new Xw(n),t);i(r);var s=r;return e&&s.geometry.generateTangents_mx4ult$(),s}function Hd(t,e){var i;Xd(),void 0===e&&(e=null),sf.call(this,e),this.geometry=t,this.id=(i=Xd().instanceId_0,Xd().instanceId_0=i.inc(),i),this.instances=null,this.morphWeights=null,this.skin=null,this.isOpaque=!0,this.shader_cdun6p$_0=null,this.pipeline_fj0dqa$_0=null,this.discardedPipelines_d0j47k$_0=M(),this.rayTest=of().boundsTest()}function Wd(){Kd=this,this.instanceId_0=Pt}Object.defineProperty(Id.prototype,"children",{configurable:!0,get:function(){return this.intChildren}}),Object.defineProperty(Id.prototype,"size",{configurable:!0,get:function(){return this.intChildren.size}}),Id.prototype.checkInverse=function(){this.isDirty&&(this.transform.invert_23yxad$(this.invTransform),this.isDirty=!1)},Id.prototype.setDirty=function(){this.isDirty=!0,this.isIdentity=!1},Id.prototype.update_kma0q5$=function(t){var e;sf.prototype.update_kma0q5$.call(this,t),this.childrenBounds.clear(),e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).update_kma0q5$(t),this.childrenBounds.add_ea4od8$(this.intChildren.get_za3lpa$(i).bounds);this.setLocalBounds(),this.globalCenterMut.set_czzhiu$(this.bounds.center),this.globalExtentMut.set_czzhiu$(this.bounds.max),this.modelMat.transform_w1lst9$(this.globalCenterMut),this.modelMat.transform_w1lst9$(this.globalExtentMut),this.globalRadius=this.globalCenter.distance_czzhiu$(this.globalExtentMut),this.bounds.isEmpty||this.isIdentity||(this.tmpBounds_8xwcjs$_0.clear(),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.min.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.min.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.max.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.max.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.min.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.min.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.max.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.max.y,this.bounds.max.z),1)),this.bounds.set_ea4od8$(this.tmpBounds_8xwcjs$_0))},Id.prototype.setLocalBounds=function(){this.bounds.set_ea4od8$(this.childrenBounds)},Id.prototype.updateModelMat=function(){sf.prototype.updateModelMat.call(this),this.isIdentity||this.modelMat.mul_d4zu6l$(this.transform)},Id.prototype.rayTest_jljx4v$=function(t){var e;this.isIdentity||(this.checkInverse(),t.transformBy_d4zu6l$(this.invTransform)),e=this.intChildren;for(var i=0;i!==e.size;++i){var n=this.intChildren.get_za3lpa$(i);if(n.isPickable&&n.isVisible){var o=n.bounds.hitDistanceSqr_nvyeur$(t.ray);o<nt.MAX_VALUE&&o<=t.hitDistanceSqr&&n.rayTest_jljx4v$(t)}}this.isIdentity||t.transformBy_d4zu6l$(this.transform)},Id.prototype.getTransform_d4zu6j$=function(t){return t.set_d4zu6l$(this.transform)},Id.prototype.getInverseTransform_d4zu6j$=function(t){return this.checkInverse(),t.set_d4zu6l$(this.invTransform)},Id.prototype.collectDrawCommands_kma0q5$=function(t){var e;if(sf.prototype.collectDrawCommands_kma0q5$.call(this,t),this.isRendered){e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).collectDrawCommands_kma0q5$(t)}},Id.prototype.dispose_aemszp$=function(t){var e;sf.prototype.dispose_aemszp$.call(this,t),e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).dispose_aemszp$(t)},Id.prototype.get_61zpoe$=function(t){var e;if(zt(t,this.name))return this;e=this.intChildren;for(var i=0;i!==e.size;++i){var n=this.intChildren.get_za3lpa$(i).get_61zpoe$(t);if(null!=n)return n}return null},Id.prototype.addNode_xtids1$$default=function(t,e){e>=0?this.intChildren.add_wxm5ur$(e,t):this.intChildren.add_11rb$(t),t.parent=this,this.bounds.add_ea4od8$(t.bounds)},Id.prototype.addNode_xtids1$=function(t,e,i){void 0===e&&(e=-1),i?i(t,e):this.addNode_xtids1$$default(t,e)},Id.prototype.sortChildrenBy_mq7kdd$=function(t){var e=this.intChildren;e.size>1&&mt(e,new $t(Ad(t)))},Id.prototype.removeNode_f1kmr1$=function(t){return!!this.intChildren.remove_11rb$(t)&&(t.parent=null,!0)},Id.prototype.removeAllChildren=function(){var t;t=this.intChildren;for(var e=0;e!==t.size;++e)this.intChildren.get_za3lpa$(e).parent=null;this.intChildren.clear()},Id.prototype.findNode_61zpoe$=function(t){var e;if(zt(t,this.name))return this;e=this.children;for(var i=0;i!==e.size;++i){var n=this.children.get_za3lpa$(i).findNode_61zpoe$(t);if(null!=n)return n}return null},Id.prototype.containsNode_f1kmr1$=function(t){return this.intChildren.contains_11rb$(t)},Id.prototype.plusAssign_f1kmr1$=function(t){this.addNode_xtids1$(t)},Id.prototype.minusAssign_f1kmr1$=function(t){this.removeNode_f1kmr1$(t)},Id.prototype.unaryPlus_uv0sim$=function(t){this.addNode_xtids1$(t)},Id.prototype.translate_czzhiu$=function(t){return this.translate_y2kzbl$(t.x,t.y,t.z)},Id.prototype.translate_y2kzbl$=function(t,e,i){return this.translate_yvo9jy$(t,e,i)},Id.prototype.translate_czzhiw$=function(t){return this.translate_yvo9jy$(t.x,t.y,t.z)},Id.prototype.translate_yvo9jy$=function(t,e,i){return this.transform.translate_yvo9jy$(t,e,i),this.setDirty(),this},Id.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},Id.prototype.rotate_7b5o5w$=function(t,e,i,n){return this.rotate_6y0v78$(t,e,i,n)},Id.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},Id.prototype.rotate_6y0v78$=function(t,e,i,n){return this.transform.rotate_6y0v78$(t,e,i,n),this.setDirty(),this},Id.prototype.scale_mx4ult$=function(t){return this.scale_yvo9jy$(t,t,t)},Id.prototype.scale_y2kzbl$=function(t,e,i){return this.scale_yvo9jy$(t,e,i)},Id.prototype.scale_14dthe$=function(t){return this.scale_yvo9jy$(t,t,t)},Id.prototype.scale_yvo9jy$=function(t,e,i){return this.transform.scale_yvo9jy$(t,e,i),this.setDirty(),this},Id.prototype.mul_d4zu6l$=function(t){return this.transform.mul_d4zu6l$(t),this.setDirty(),this},Id.prototype.set_d4zu6j$=function(t){return this.transform.set_d4zu6j$(t),this.setDirty(),this},Id.prototype.set_d4zu6l$=function(t){return this.transform.set_d4zu6l$(t),this.setDirty(),this},Id.prototype.setIdentity=function(){return this.transform.setIdentity(),this.invTransform.setIdentity(),this.isDirty=!1,this.isIdentity=!0,this},Id.$metadata$={kind:$,simpleName:"Group",interfaces:[sf]},Rd.prototype.singleLight_q9zcvo$=function(t){this.lights.clear();var e=this.lights,i=new Ld;t(i),e.add_11rb$(i)},Rd.$metadata$={kind:$,simpleName:"Lighting",interfaces:[]},Ld.prototype.setColor_y83vuj$=function(t,e){return this.color.set_czzhhz$(t),this.color.a=e,this},Ld.prototype.setDirectional_czzhiu$=function(t){return this.type=Fd(),this.direction.set_czzhiu$(t).norm(),this.position.set_czzhiu$(To().ZERO),this.spotAngle=0,this},Ld.prototype.setPoint_czzhiu$=function(t){return this.type=Bd(),this.position.set_czzhiu$(t),this.direction.set_czzhiu$(To().ZERO),this.spotAngle=0,this},Ld.prototype.setSpot_nve3wz$=function(t,e,i){return this.type=Ud(),this.position.set_czzhiu$(t),this.direction.set_czzhiu$(e).norm(),this.spotAngle=i,this},Dd.$metadata$={kind:$,simpleName:"Type",interfaces:[T]},Dd.values=function(){return[Fd(),Bd(),Ud()]},Dd.valueOf_61zpoe$=function(t){switch(t){case"DIRECTIONAL":return Fd();case"POINT":return Bd();case"SPOT":return Ud();default:P("No enum constant de.fabmax.kool.scene.Light.Type."+t)}},Ld.$metadata$={kind:$,simpleName:"Light",interfaces:[]},Vd.prototype.addLine_nbf24k$=function(t,e,i){return this.addLine_b8opkg$(t,i,e,i)},Vd.prototype.addLine_b8opkg$=function(t,e,i,n){var o,r,a,l,u,p={v:0},c=this.geometry,h=c.isBatchUpdate;return c.isBatchUpdate=!0,(o=t,r=e,a=p,l=i,u=n,function(t){return a.v=t.addVertex_lv7vxo$(o,null,r,null),t.addVertex_lv7vxo$(l,null,u,null),t.addIndex_za3lpa$(a.v),t.addIndex_za3lpa$(a.v+1|0),s})(c),c.hasChanged=!0,c.isBatchUpdate=h,p.v},Vd.prototype.addLineString_k3xgzo$=function(t,e){var i;i=bt(t);for(var n=0;n<i;n++)this.addLine_b8opkg$(t.get_za3lpa$(n),e,t.get_za3lpa$(n+1|0),e)},Vd.prototype.addWireframe_hjnvxh$=function(t,i){if(void 0===i&&(i=null),t.primitiveType!==uz())throw cn("Supplied mesh is not a triangle mesh: "+t.primitiveType);var n,o,r,a,l=ct(),u=this.geometry,p=u.isBatchUpdate;u.isBatchUpdate=!0,(n=t,o=this,r=i,a=l,function(t){var i,l,u=n.get_za3lpa$(0),p=t.numVertices;i=n.numVertices;for(var c=0;c<i;c++){u.index=c;var h,d,f,_=o.geometry;_.checkBufferSizes_za3lpa$(),h=_.vertexSizeF;for(var m=1;m<=h;m++)_.dataF.plusAssign_mx4ult$(0);d=_.vertexSizeI;for(var $=1;$<=d;$++)_.dataI.plusAssign_za3lpa$(0);_.vertexIt.index=(f=_.numVertices,_.numVertices=f+1|0,f);var y=r,v=_.vertexIt;v.position.set_czzhiu$(u.position),v.color.set_czzhhz$(null!=y?y:u.color),_.bounds.add_czzhiu$(_.vertexIt.position),_.hasChanged=!0,_.numVertices}l=n.numIndices;for(var g=0;g<l;g+=3){var b=p+n.indices.get_za3lpa$(g)|0,x=p+n.indices.get_za3lpa$(g+1|0)|0,w=p+n.indices.get_za3lpa$(g+2|0)|0,z=e.Long.fromInt(A.min(b,x)).shiftLeft(32).or(e.Long.fromInt(A.max(b,x))),k=e.Long.fromInt(A.min(x,w)).shiftLeft(32).or(e.Long.fromInt(A.max(x,w))),S=e.Long.fromInt(A.min(w,b)).shiftLeft(32).or(e.Long.fromInt(A.max(w,b)));a.contains_11rb$(z)||(o.geometry.addIndex_za3lpa$(b),o.geometry.addIndex_za3lpa$(x),a.add_11rb$(z)),a.contains_11rb$(k)||(o.geometry.addIndex_za3lpa$(x),o.geometry.addIndex_za3lpa$(w),a.add_11rb$(k)),a.contains_11rb$(S)||(o.geometry.addIndex_za3lpa$(w),o.geometry.addIndex_za3lpa$(b),a.add_11rb$(S))}return s})(u),u.hasChanged=!0,u.isBatchUpdate=p},Vd.prototype.addNormals_325j0g$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=1);var n,o,r,a,l=t.isBatchUpdate;t.isBatchUpdate=!0,(n=t,o=i,r=e,a=this,function(t){var e,i=jo(),l=n;e=l.numVertices;for(var u=0;u<e;u++){l.vertexIt.index=u;var p=o,c=r,h=a,d=l.vertexIt;i.set_czzhiu$(d.normal).scale_mx4ult$(p).add_czzhiu$(d.position);var f=null!=c?c:d.color;h.addLine_b8opkg$(d.position,f,i,f)}return s})(t),t.hasChanged=!0,t.isBatchUpdate=l},Vd.prototype.clear=function(){this.geometry.clear(),this.bounds.clear()},Vd.prototype.addBoundingBox_j1pmtk$=function(t,e){var i,n,o=this.geometry,r=o.isBatchUpdate;o.isBatchUpdate=!0,(i=t,n=e,function(t){var e,o,r;t.checkBufferSizes_za3lpa$(),e=t.vertexSizeF;for(var a=1;a<=e;a++)t.dataF.plusAssign_mx4ult$(0);o=t.vertexSizeI;for(var l=1;l<=o;l++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(r=t.numVertices,t.numVertices=r+1|0,r);var u=i,p=n,c=t.vertexIt;c.position.set_y2kzbl$(u.min.x,u.min.y,u.min.z),c.color.set_czzhhz$(p),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var h,d,f,_=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),h=t.vertexSizeF;for(var m=1;m<=h;m++)t.dataF.plusAssign_mx4ult$(0);d=t.vertexSizeI;for(var $=1;$<=d;$++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(f=t.numVertices,t.numVertices=f+1|0,f);var y=i,v=n,g=t.vertexIt;g.position.set_y2kzbl$(y.min.x,y.min.y,y.max.z),g.color.set_czzhhz$(v),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var b,x,w,z=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),b=t.vertexSizeF;for(var k=1;k<=b;k++)t.dataF.plusAssign_mx4ult$(0);x=t.vertexSizeI;for(var S=1;S<=x;S++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(w=t.numVertices,t.numVertices=w+1|0,w);var C=i,N=n,E=t.vertexIt;E.position.set_y2kzbl$(C.min.x,C.max.y,C.max.z),E.color.set_czzhhz$(N),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var T,P,O,M=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),T=t.vertexSizeF;for(var j=1;j<=T;j++)t.dataF.plusAssign_mx4ult$(0);P=t.vertexSizeI;for(var A=1;A<=P;A++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(O=t.numVertices,t.numVertices=O+1|0,O);var I=i,R=n,L=t.vertexIt;L.position.set_y2kzbl$(I.min.x,I.max.y,I.min.z),L.color.set_czzhhz$(R),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var D,q,F,B=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),D=t.vertexSizeF;for(var U=1;U<=D;U++)t.dataF.plusAssign_mx4ult$(0);q=t.vertexSizeI;for(var V=1;V<=q;V++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(F=t.numVertices,t.numVertices=F+1|0,F);var G=i,H=n,W=t.vertexIt;W.position.set_y2kzbl$(G.max.x,G.min.y,G.min.z),W.color.set_czzhhz$(H),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var K,X,Y,Z=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),K=t.vertexSizeF;for(var J=1;J<=K;J++)t.dataF.plusAssign_mx4ult$(0);X=t.vertexSizeI;for(var Q=1;Q<=X;Q++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(Y=t.numVertices,t.numVertices=Y+1|0,Y);var tt=i,et=n,it=t.vertexIt;it.position.set_y2kzbl$(tt.max.x,tt.min.y,tt.max.z),it.color.set_czzhhz$(et),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var nt,ot,rt,st=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),nt=t.vertexSizeF;for(var at=1;at<=nt;at++)t.dataF.plusAssign_mx4ult$(0);ot=t.vertexSizeI;for(var lt=1;lt<=ot;lt++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(rt=t.numVertices,t.numVertices=rt+1|0,rt);var ut=i,pt=n,ct=t.vertexIt;ct.position.set_y2kzbl$(ut.max.x,ut.max.y,ut.max.z),ct.color.set_czzhhz$(pt),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var ht,dt,ft,_t=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),ht=t.vertexSizeF;for(var mt=1;mt<=ht;mt++)t.dataF.plusAssign_mx4ult$(0);dt=t.vertexSizeI;for(var $t=1;$t<=dt;$t++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(ft=t.numVertices,t.numVertices=ft+1|0,ft);var yt=i,vt=n,gt=t.vertexIt;gt.position.set_y2kzbl$(yt.max.x,yt.max.y,yt.min.z),gt.color.set_czzhhz$(vt),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var bt=t.numVertices-1|0;return t.addIndices_pmhfmb$(new Int32Array([_,z,z,M,M,B,B,_,Z,st,st,_t,_t,bt,bt,Z,_,Z,z,st,M,_t,B,bt])),s})(o),o.hasChanged=!0,o.isBatchUpdate=r},Vd.$metadata$={kind:$,simpleName:"LineMesh",interfaces:[Hd]},Object.defineProperty(Hd.prototype,"shader",{configurable:!0,get:function(){return this.shader_cdun6p$_0},set:function(t){var e;this.shader_cdun6p$_0=t,null!=(e=this.pipeline_fj0dqa$_0)&&this.discardedPipelines_d0j47k$_0.add_11rb$(e),this.pipeline_fj0dqa$_0=null}}),Object.defineProperty(Hd.prototype,"bounds",{configurable:!0,get:function(){return this.geometry.bounds}}),Hd.prototype.generate_v2sixm$=function(t){var e,i=this.geometry,n=i.isBatchUpdate;i.isBatchUpdate=!0,(e=t,function(t){return t.clear(),e(new Rz(t)),s})(i),i.hasChanged=!0,i.isBatchUpdate=n},Hd.prototype.getPipeline_aemszp$=function(t){var e,i,n;if(!this.discardedPipelines_d0j47k$_0.isEmpty()){var o;for(o=this.discardedPipelines_d0j47k$_0.iterator();o.hasNext();){var r=o.next();t.disposePipeline_i7l2g2$(r)}this.discardedPipelines_d0j47k$_0.clear()}if(null!=(i=this.pipeline_fj0dqa$_0))n=i;else{var s;if(null!=(e=this.shader)){var a=e.createPipeline_sbx4mf$(this,t);this.pipeline_fj0dqa$_0=a,s=a}else s=null;n=s}return n},Hd.prototype.rayTest_jljx4v$=function(t){this.rayTest.rayTest_jljx4v$(t)},Hd.prototype.dispose_aemszp$=function(t){var e;sf.prototype.dispose_aemszp$.call(this,t),null!=(e=this.pipeline_fj0dqa$_0)&&t.disposePipeline_i7l2g2$(e),this.pipeline_fj0dqa$_0=null},Hd.prototype.collectDrawCommands_kma0q5$=function(t){sf.prototype.collectDrawCommands_kma0q5$.call(this,t),this.isRendered&&(this.geometry.hasChanged&&!this.geometry.isBatchUpdate&&(this.geometry.isRebuildBoundsOnSync&&this.geometry.rebuildBounds(),this.rayTest.onMeshDataChanged_f1jspk$(this)),t.renderPass.addMesh_sbx4mf$(this,t.ctx))},Wd.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Kd=null;function Xd(){return null===Kd&&new Wd,Kd}function Yd(){of()}function Zd(){nf=this}function Jd(){}function Qd(){this.mesh=null}function tf(t){this.closure$mesh=t,this.triangleTree=null,this.rayTraverser=new cS}function ef(t){this.closure$mesh=t,this.edgeTree=null,this.rayTraverser=new uS}Hd.$metadata$={kind:$,simpleName:"Mesh",interfaces:[sf]},Yd.prototype.onMeshDataChanged_f1jspk$=function(t){},Jd.prototype.rayTest_jljx4v$=function(t){},Jd.$metadata$={kind:$,interfaces:[Yd]},Zd.prototype.nopTest=function(){return new Jd},Qd.prototype.onMeshDataChanged_f1jspk$=function(t){this.mesh=t},Qd.prototype.rayTest_jljx4v$=function(t){var e;if(null!=(e=this.mesh)){var i=e,n=i.bounds.hitDistanceSqr_nvyeur$(t.ray);n<nt.MAX_VALUE&&n<=t.hitDistanceSqr&&t.setHit_vfk0k2$(i,A.sqrt(n))}},Qd.$metadata$={kind:$,interfaces:[Yd]},Zd.prototype.boundsTest=function(){return new Qd},tf.prototype.onMeshDataChanged_f1jspk$=function(t){this.triangleTree=Tk(Xk().getTriangles_r7nl2o$(t.geometry))},tf.prototype.rayTest_jljx4v$=function(t){var e;this.rayTraverser.setup_nvyeur$(t.ray),null!=(e=this.triangleTree)&&this.rayTraverser.traverse_7efza$(e),this.rayTraverser.distanceSqr<t.hitDistanceSqr&&t.setHit_vfk0k2$(this.closure$mesh,this.rayTraverser.distance)},tf.$metadata$={kind:$,interfaces:[Yd]},ef.prototype.onMeshDataChanged_f1jspk$=function(t){this.edgeTree=Pk(Gk().getEdges_r7nl2o$(t.geometry))},ef.prototype.rayTest_jljx4v$=function(t){var e;this.rayTraverser.setup_nvyeur$(t.ray),null!=(e=this.edgeTree)&&this.rayTraverser.traverse_7efza$(e),this.rayTraverser.distanceSqr<t.hitDistanceSqr&&t.setHit_vfk0k2$(this.closure$mesh,this.rayTraverser.distance)},ef.$metadata$={kind:$,interfaces:[Yd]},Zd.prototype.geometryTest_f1jspk$=function(t){var e;switch(t.geometry.primitiveType.name){case"TRIANGLES":e=new tf(t);break;case"LINES":e=new ef(t);break;default:throw V("Mesh primitive type must be either GL_TRIANGLES or GL_LINES")}return e},Zd.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var nf=null;function of(){return null===nf&&new Zd,nf}function rf(t){void 0===t&&(t=null),Id.call(this,t),this.nodes=z(),this.meshes=z(),this.textures=z(),this.animations=M(),this.skins=M()}function sf(t){ff(),void 0===t&&(t=null),this.name=t,this.onUpdate=M(),this.onCollectDrawCommands=M(),this.onDispose=M(),this.onHoverEnter=M(),this.onHover=M(),this.onHoverExit=M(),this.tags=new n_,this.bounds_ba5obo$_0=new q$,this.globalRadius_3g00fw$_0=0,this.globalCenterMut=jo(),this.globalExtentMut=jo(),this.modelMat=new bn,this.modelMatDirty=!1,this.modelMatInvLazy_yq9j4d$_0=new bn,this.parent_302581$_0=null,this.isVisible_mqrc8j$_0=!0,this.isCastingShadow=!0,this.isPickable_b77vbo$_0=!0,this.isFrustumChecked_un4x7a$_0=!0,this.isRendered=!0}function af(){df=this,this.MODEL_MAT_IDENTITY_0=new bn}Yd.$metadata$={kind:st,simpleName:"MeshRayTest",interfaces:[]},rf.prototype.disableAllAnimations=function(){this.enableAnimation_za3lpa$(-1)},rf.prototype.enableAnimation_za3lpa$=function(t){var e;e=this.animations;for(var i=0;i!==e.size;++i)this.animations.get_za3lpa$(i).weight=i===t?1:0},rf.prototype.setAnimationWeight_24o109$=function(t,e){R(this.animations).contains_mef7kx$(t)&&(this.animations.get_za3lpa$(t).weight=e)},rf.prototype.applyAnimation_14dthe$=function(t){var e,i,n=!0;e=this.animations;for(var o=0;o!==e.size;++o)this.animations.get_za3lpa$(o).weight>0&&(this.animations.get_za3lpa$(o).apply_8555vt$(t,n),n=!1);i=this.skins;for(var r=0;r!==i.size;++r)this.skins.get_za3lpa$(r).updateJointTransforms()},rf.prototype.printHierarchy=function(){this.printHierarchy_0(this,"")},rf.prototype.printHierarchy_0=function(t,i){var n,o,r=i+Ct(t.name)+" [",s=t.children,a=M();for(n=s.iterator();n.hasNext();){var l=n.next();e.isType(l,Hd)&&a.add_11rb$(l)}for(jt(r+a.size+" meshes]"),o=t.children.iterator();o.hasNext();){var u=o.next();e.isType(u,Id)?this.printHierarchy_0(u,i+"    "):jt(i+"    "+Ct(u.name))}},rf.prototype.dispose_aemszp$=function(t){var e;for(e=this.textures.values.iterator();e.hasNext();)e.next().dispose();Id.prototype.dispose_aemszp$.call(this,t)},rf.$metadata$={kind:$,simpleName:"Model",interfaces:[Id]},Object.defineProperty(sf.prototype,"bounds",{configurable:!0,get:function(){return this.bounds_ba5obo$_0}}),Object.defineProperty(sf.prototype,"globalCenter",{configurable:!0,get:function(){return this.globalCenterMut}}),Object.defineProperty(sf.prototype,"globalRadius",{configurable:!0,get:function(){return this.globalRadius_3g00fw$_0},set:function(t){this.globalRadius_3g00fw$_0=t}}),Object.defineProperty(sf.prototype,"modelMatInv",{configurable:!0,get:function(){return this.checkModelMatInv_vk7bqf$_0()}}),Object.defineProperty(sf.prototype,"parent",{configurable:!0,get:function(){return this.parent_302581$_0},set:function(t){this.parent_302581$_0=t}}),Object.defineProperty(sf.prototype,"isVisible",{configurable:!0,get:function(){return this.isVisible_mqrc8j$_0},set:function(t){this.isVisible_mqrc8j$_0=t}}),Object.defineProperty(sf.prototype,"isPickable",{configurable:!0,get:function(){return this.isPickable_b77vbo$_0},set:function(t){this.isPickable_b77vbo$_0=t}}),Object.defineProperty(sf.prototype,"isFrustumChecked",{configurable:!0,get:function(){return this.isFrustumChecked_un4x7a$_0},set:function(t){this.isFrustumChecked_un4x7a$_0=t}}),sf.prototype.update_kma0q5$=function(t){var e;e=this.onUpdate;for(var i=0;i!==e.size;++i)this.onUpdate.get_za3lpa$(i)(this,t);this.updateModelMat(),this.globalCenterMut.set_czzhiu$(this.bounds.center),this.globalExtentMut.set_czzhiu$(this.bounds.max),this.modelMat.transform_w1lst9$(this.globalCenterMut),this.modelMat.transform_w1lst9$(this.globalExtentMut),this.globalRadius=this.globalCenter.distance_czzhiu$(this.globalExtentMut)},sf.prototype.updateModelMat=function(){var t,e;this.modelMat.set_d4zu6l$(null!=(e=null!=(t=this.parent)?t.modelMat:null)?e:ff().MODEL_MAT_IDENTITY_0),this.modelMatDirty=!0},sf.prototype.collectDrawCommands_kma0q5$=function(t){var e;if(this.isRendered=this.checkIsVisible_6otzq7$(t.camera,t.ctx),this.isRendered){e=this.onCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onCollectDrawCommands.get_za3lpa$(i)(this,t)}},sf.prototype.dispose_aemszp$=function(t){var e;e=this.onDispose;for(var i=0;i!==e.size;++i)this.onDispose.get_za3lpa$(i)(this,t)},sf.prototype.toGlobalCoords_w1lst9$$default=function(t,e){return this.modelMat.transform_w1lst9$(t,e),t},sf.prototype.toGlobalCoords_w1lst9$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toGlobalCoords_w1lst9$$default(t,e)},sf.prototype.toGlobalCoords_j7uy7i$$default=function(t,e){return this.modelMat.transform_j7uy7i$(t,e),t},sf.prototype.toGlobalCoords_j7uy7i$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toGlobalCoords_j7uy7i$$default(t,e)},sf.prototype.toLocalCoords_w1lst9$$default=function(t,e){return this.modelMatInv.transform_w1lst9$(t,e),t},sf.prototype.toLocalCoords_w1lst9$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toLocalCoords_w1lst9$$default(t,e)},sf.prototype.toLocalCoords_j7uy7i$$default=function(t,e){return this.modelMatInv.transform_j7uy7i$(t,e),t},sf.prototype.toLocalCoords_j7uy7i$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toLocalCoords_j7uy7i$$default(t,e)},sf.prototype.rayTest_jljx4v$=function(t){},sf.prototype.get_61zpoe$=function(t){return zt(t,this.name)?this:null},sf.prototype.checkIsVisible_6otzq7$=function(t,e){return!!this.isVisible&&(!(this.isFrustumChecked&&!this.bounds.isEmpty)||t.isInFrustum_f1kmr1$(this))},sf.prototype.findNode_61zpoe$=function(t){return zt(t,this.name)?this:null},sf.prototype.findParentOfType_287e2$=K("kool-kool-core.de.fabmax.kool.scene.Node.findParentOfType_287e2$",X((function(){var t=e.throwCCE;return function(e,i){for(var n,o=this.parent;null!=o&&!i(o);)o=o.parent;return i(n=o)?n:t()}}))),sf.prototype.checkModelMatInv_vk7bqf$_0=function(){return this.modelMatDirty&&(this.modelMat.invert_23yxad$(this.modelMatInvLazy_yq9j4d$_0),this.modelMatDirty=!1),this.modelMatInvLazy_yq9j4d$_0},af.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var lf,uf,pf,cf,hf,df=null;function ff(){return null===df&&new af,df}function _f(t,e,i){void 0===e&&(e=null);var n=new mf(t,e);return i(n),n}function mf(t,e){var i;void 0===e&&(e=null),Id.call(this,e),this.leftDragMethod=gf(),this.middleDragMethod=vf(),this.rightDragMethod=bf(),this.zoomMethod=kf(),this.verticalAxis=qo().Y_AXIS,this.horizontalAxis=qo().X_AXIS,this.minHorizontalRot=-90,this.maxHorizontalRot=90,this.translation=Uo(),this.verticalRotation=0,this.horizontalRotation=0,this.zoom_os17wm$_0=10,this.isKeepingStandardTransform=!1,this.invertRotX=!1,this.invertRotY=!1,this.minZoom=1,this.maxZoom=100,this.translationBounds=null,this.panMethod=new Cf,this.vertRotAnimator=new c$(0),this.horiRotAnimator=new c$(0),this.zoomAnimator=new c$(this.zoom),this.prevButtonMask_ajfzw$_0=0,this.dragMethod_errtco$_0=vf(),this.dragStart_84bd5l$_0=!1,this.deltaPos_l16i4v$_0=po(),this.deltaScroll_dymhuq$_0=0,this.ptrPos_jb68ux$_0=po(),this.panPlane_eoagge$_0=new Yn,this.pointerHitStart_dvxvk5$_0=jo(),this.pointerHit_a6l7qh$_0=jo(),this.tmpVec1_ioqh9p$_0=jo(),this.tmpVec2_ioqh8u$_0=jo(),this.mouseTransform_3g2ewq$_0=new bn,this.mouseTransformInv_t9oczn$_0=new bn,this.smoothness_swf2pk$_0=0,this.smoothness=.5,this.panPlane_eoagge$_0.p.set_czzhiu$(To().ZERO),this.panPlane_eoagge$_0.n.set_czzhiu$(To().Y_AXIS),t.registerDragHandler_y44tw7$(this),this.onUpdate.add_11rb$((i=this,function(t,e){var n=e.component1(),o=e.component2();return i.doCamTransform_kff6gu$_0(n,o),s}))}function $f(t,e){T.call(this),this.name$=t,this.ordinal$=e}function yf(){yf=function(){},lf=new $f("NONE",0),uf=new $f("ROTATE",1),pf=new $f("PAN",2)}function vf(){return yf(),lf}function gf(){return yf(),uf}function bf(){return yf(),pf}function xf(t,e){T.call(this),this.name$=t,this.ordinal$=e}function wf(){wf=function(){},cf=new xf("ZOOM_CENTER",0),hf=new xf("ZOOM_TRANSLATE",1)}function zf(){return wf(),cf}function kf(){return wf(),hf}function Sf(){}function Cf(){Sf.call(this),this.panPlane=new Yn,this.pointerRay_0=new io}function Nf(t,e){Pf(),void 0===t&&(t=oz([ds().POSITIONS,Pf().ATTRIB_POINT_SIZE,ds().COLORS])),void 0===e&&(e=null),Hd.call(this,t,e),t.primitiveType=lz(),this.rayTest=of().nopTest();var i=new Bc,n=Fc().defaultUnlitModel_ws3dmo$(i),o=new Lu(n);o.pointSize_r20yfm$(o.attributeNode_nm2vx5$(Pf().ATTRIB_POINT_SIZE).output);var r=n;this.shader=new Sc(i,r)}function Ef(){Tf=this,this.ATTRIB_POINT_SIZE=new ps("aPointSize",Qr())}sf.$metadata$={kind:$,simpleName:"Node",interfaces:[xv]},Object.defineProperty(mf.prototype,"zoom",{configurable:!0,get:function(){return this.zoom_os17wm$_0},set:function(t){var e,i=this.minZoom,n=this.maxZoom;e=t<i?i:t>n?n:t,this.zoom_os17wm$_0=e}}),Object.defineProperty(mf.prototype,"smoothness",{configurable:!0,get:function(){return this.smoothness_swf2pk$_0},set:function(t){var e;this.smoothness_swf2pk$_0=t,e=LN.FUZZY_EQ_D;var i=A.abs(t)<=e?0:50/t;this.vertRotAnimator.stiffness=i,this.horiRotAnimator.stiffness=i,this.zoomAnimator.stiffness=i}}),mf.prototype.setMouseRotation_dleff0$=function(t,e){this.setMouseRotation_lu1900$(t,e)},mf.prototype.setMouseRotation_lu1900$=function(t,e){this.vertRotAnimator.set_14dthe$(t),this.horiRotAnimator.set_14dthe$(e),this.verticalRotation=t,this.horizontalRotation=e},mf.prototype.setMouseTranslation_y2kzbl$=function(t,e,i){this.setMouseTranslation_yvo9jy$(t,e,i)},mf.prototype.setMouseTranslation_yvo9jy$=function(t,e,i){this.translation.set_yvo9jy$(t,e,i)},mf.prototype.resetZoom_mx4ult$=function(t){this.resetZoom_14dthe$(t)},mf.prototype.resetZoom_14dthe$=function(t){this.zoom=t,this.zoomAnimator.set_14dthe$(this.zoom)},mf.prototype.updateTransform=function(){var t;null!=(t=this.translationBounds)&&t.clampToBounds_5s4mqs$(this.translation),this.isKeepingStandardTransform&&(this.mouseTransform_3g2ewq$_0.invert_23yxad$(this.mouseTransformInv_t9oczn$_0),this.mul_d4zu6l$(this.mouseTransformInv_t9oczn$_0));var e=this.zoomAnimator.actual,i=this.vertRotAnimator.actual,n=this.horiRotAnimator.actual;this.mouseTransform_3g2ewq$_0.setIdentity(),this.mouseTransform_3g2ewq$_0.translate_yvo9jy$(this.translation.x,this.translation.y,this.translation.z),this.mouseTransform_3g2ewq$_0.scale_yvo9jy$(e,e,e),this.mouseTransform_3g2ewq$_0.rotate_5820x2$(i,this.verticalAxis),this.mouseTransform_3g2ewq$_0.rotate_5820x2$(n,this.horizontalAxis),this.isKeepingStandardTransform?this.mul_d4zu6l$(this.mouseTransform_3g2ewq$_0):this.set_d4zu6l$(this.mouseTransform_3g2ewq$_0)},mf.prototype.doCamTransform_kff6gu$_0=function(t,e){var i,n,o,r,s,a,l;if(this.dragMethod_errtco$_0===bf()&&this.panMethod.computePanPoint_467c2i$(this.pointerHit_a6l7qh$_0,t,this.ptrPos_jb68ux$_0,e))if(this.dragStart_84bd5l$_0)this.dragStart_84bd5l$_0=!1,this.pointerHitStart_dvxvk5$_0.set_czzhiu$(this.pointerHit_a6l7qh$_0),this.stopSmoothMotion_ph0bif$_0();else{var u=1-this.smoothness,p=u<.1?.1:u>1?1:u;this.tmpVec1_ioqh9p$_0.set_czzhiu$(this.pointerHitStart_dvxvk5$_0).subtract_czzhiu$(this.pointerHit_a6l7qh$_0).scale_mx4ult$(p),null!=(i=this.parent)&&i.toLocalCoords_w1lst9$(this.tmpVec1_ioqh9p$_0,0);var c=this.tmpVec1_ioqh9p$_0.length();c>.5*t.camera.globalRange&&this.tmpVec1_ioqh9p$_0.scale_mx4ult$(.5*t.camera.globalRange/c),this.add_1k1qf7$_0(this.translation,this.tmpVec1_ioqh9p$_0)}else this.pointerHit_a6l7qh$_0.set_czzhiu$(t.camera.globalLookAt);var h,d=this.deltaScroll_dymhuq$_0;if(h=LN.FUZZY_EQ_F,A.abs(d)<=h||(this.zoom=this.zoom*(1-this.deltaScroll_dymhuq$_0/10),this.deltaScroll_dymhuq$_0=0),this.dragMethod_errtco$_0===gf()){r=this.verticalRotation,o=this.deltaPos_l16i4v$_0.x/3,n=this.invertRotX?-1:1,this.verticalRotation=r-o*n,l=this.horizontalRotation,a=this.deltaPos_l16i4v$_0.y/3,s=this.invertRotY?-1:1,this.horizontalRotation=l-a*s;var f,_=this.horizontalRotation,m=this.minHorizontalRot,$=this.maxHorizontalRot;f=_<m?m:_>$?$:_,this.horizontalRotation=f,this.deltaPos_l16i4v$_0.set_czzhjp$(ao().ZERO)}this.vertRotAnimator.desired=this.verticalRotation,this.horiRotAnimator.desired=this.horizontalRotation,this.zoomAnimator.desired=this.zoom;var y,v=this.zoomAnimator.actual,g=this.zoomAnimator.animate_mx4ult$(e.deltaT);y=LN.FUZZY_EQ_D;var b=v-g;A.abs(b)<=y||this.zoomMethod!==kf()||this.computeZoomTranslationPerspective_axn3gs$(t.camera,v,g),this.vertRotAnimator.animate_mx4ult$(e.deltaT),this.horiRotAnimator.animate_mx4ult$(e.deltaT),this.updateTransform()},mf.prototype.computeZoomTranslationPerspective_axn3gs$=function(t,e,i){var n,o=i/e;t.globalPos.subtract_2gj7b4$(this.pointerHit_a6l7qh$_0,this.tmpVec1_ioqh9p$_0).scale_mx4ult$(o).add_czzhiu$(this.pointerHit_a6l7qh$_0),t.globalPos.subtract_2gj7b4$(t.globalLookAt,this.tmpVec2_ioqh8u$_0).scale_mx4ult$(o).add_czzhiu$(t.globalLookAt),this.tmpVec1_ioqh9p$_0.subtract_czzhiu$(this.tmpVec2_ioqh8u$_0),null!=(n=this.parent)&&n.toLocalCoords_w1lst9$(this.tmpVec1_ioqh9p$_0,0),this.add_1k1qf7$_0(this.translation,this.tmpVec1_ioqh9p$_0)},mf.prototype.stopSmoothMotion_ph0bif$_0=function(){this.vertRotAnimator.set_14dthe$(this.vertRotAnimator.actual),this.horiRotAnimator.set_14dthe$(this.horiRotAnimator.actual),this.zoomAnimator.set_14dthe$(this.zoomAnimator.actual),this.verticalRotation=this.vertRotAnimator.actual,this.horizontalRotation=this.horiRotAnimator.actual,this.zoom=this.zoomAnimator.actual},mf.prototype.handleDrag_urvnay$=function(t,e,i){var n;t.isEmpty()||t.get_za3lpa$(0).isConsumed_za3lpa$()||!t.get_za3lpa$(0).isInViewport_hrtwbc$(e.mainRenderPass.viewport,i)?(this.deltaPos_l16i4v$_0.set_czzhjp$(ao().ZERO),this.deltaScroll_dymhuq$_0=0):(0===t.get_za3lpa$(0).buttonEventMask&&t.get_za3lpa$(0).buttonMask===this.prevButtonMask_ajfzw$_0||(n=t.get_za3lpa$(0).isLeftButtonDown?this.leftDragMethod:t.get_za3lpa$(0).isRightButtonDown?this.rightDragMethod:t.get_za3lpa$(0).isMiddleButtonDown?this.middleDragMethod:vf(),this.dragMethod_errtco$_0=n,this.dragStart_84bd5l$_0=this.dragMethod_errtco$_0!==vf()),this.prevButtonMask_ajfzw$_0=t.get_za3lpa$(0).buttonMask,this.ptrPos_jb68ux$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y),this.deltaPos_l16i4v$_0.set_dleff0$(t.get_za3lpa$(0).deltaX,t.get_za3lpa$(0).deltaY),this.deltaScroll_dymhuq$_0=t.get_za3lpa$(0).deltaScroll,t.get_za3lpa$(0).consume_za3lpa$())},mf.prototype.add_1k1qf7$_0=function(t,e){t.x=t.x+e.x,t.y=t.y+e.y,t.z=t.z+e.z},$f.$metadata$={kind:$,simpleName:"DragMethod",interfaces:[T]},$f.values=function(){return[vf(),gf(),bf()]},$f.valueOf_61zpoe$=function(t){switch(t){case"NONE":return vf();case"ROTATE":return gf();case"PAN":return bf();default:P("No enum constant de.fabmax.kool.scene.OrbitInputTransform.DragMethod."+t)}},xf.$metadata$={kind:$,simpleName:"ZoomMethod",interfaces:[T]},xf.values=function(){return[zf(),kf()]},xf.valueOf_61zpoe$=function(t){switch(t){case"ZOOM_CENTER":return zf();case"ZOOM_TRANSLATE":return kf();default:P("No enum constant de.fabmax.kool.scene.OrbitInputTransform.ZoomMethod."+t)}},mf.$metadata$={kind:$,simpleName:"OrbitInputTransform",interfaces:[Mf,Id]},Sf.$metadata$={kind:$,simpleName:"PanBase",interfaces:[]},Cf.prototype.computePanPoint_467c2i$=function(t,e,i,n){return this.panPlane.p.set_czzhiu$(e.camera.globalLookAt),this.panPlane.n.set_czzhiu$(e.camera.globalLookDir),e.camera.computePickRay_k7d561$(this.pointerRay_0,i.x,i.y,e.viewport,n)&&this.panPlane.intersectionPoint_lplggz$(this.pointerRay_0,t)},Cf.$metadata$={kind:$,simpleName:"CameraOrthogonalPan",interfaces:[Sf]},Nf.prototype.addPoint_tohjaj$=function(t){var e,i,n,o=this.geometry;o.checkBufferSizes_za3lpa$(),e=o.vertexSizeF;for(var r=1;r<=e;r++)o.dataF.plusAssign_mx4ult$(0);i=o.vertexSizeI;for(var s=1;s<=i;s++)o.dataI.plusAssign_za3lpa$(0);o.vertexIt.index=(n=o.numVertices,o.numVertices=n+1|0,n),t(o.vertexIt),o.bounds.add_czzhiu$(o.vertexIt.position),o.hasChanged=!0;var a=o.numVertices-1|0;return this.geometry.addIndex_za3lpa$(a),a},Nf.prototype.addPoint_y9lm7v$=function(t,e,i){var n,o,r,s=this.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);o=s.vertexSizeI;for(var l=1;l<=o;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(r=s.numVertices,s.numVertices=r+1|0,r);var u,p=s.vertexIt;p.position.set_czzhiu$(t),p.color.set_czzhhz$(i),null!=(u=p.getFloatAttribute_nm2vx5$(Pf().ATTRIB_POINT_SIZE))&&(u.f=e),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0;var c=s.numVertices-1|0;return this.geometry.addIndex_za3lpa$(c),c},Nf.prototype.clear=function(){this.geometry.clear(),this.bounds.clear()},Ef.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Tf=null;function Pf(){return null===Tf&&new Ef,Tf}function Of(t){void 0===t&&(t=null),Id.call(this,t),this.lighting=new Rd,this.camera=new Ed,this.onRenderScene=M(),this.mainRenderPass=new El(this),this.mutOffscreenPasses_2k8cox$_0=M(),this.addOffscreenPasses_g83fdg$_0=M(),this.remOffscreenPasses_yrwi31$_0=M(),this.isPickingEnabled=!0,this.rayTest_odjp91$_0=new no,this.hoverNode_ab2f3d$_0=null,this.dragPtrs_mbcqtw$_0=M(),this.dragHandlers_ipew8g$_0=M(),this.disposables_mcwga4$_0=M()}function Mf(){}function jf(){i_=this}function Af(t){var e=new Wz;return e.centered(),t.cube_lhbb6w$(e),s}function If(t){return t.texCoord.x=1-t.texCoord.x,s}function Rf(t){t.vertexModFun=If;var e=(new Gz).uvDefaults();return e.steps=10,t.uvSphere_mojs8w$(e),s}function Lf(t,i,n,o){var r,a;Ff(),void 0===i&&(i=0),lc.call(this,Ff().skyboxCubeShaderModel_vzi7zj$(i,n,o)),this.cubeMapSampler_0=null,this.environmentMap_dc5v0g$_0=t,this.onPipelineSetup.add_11rb$(Bf),this.onPipelineCreated.add_11rb$((r=this,a=t,function(t,i,n){var o,l,u,p,h=r,d=r.model;t:do{var f;for(u=Vp.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&u.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(zt(g.name,"skyboxCube")&&e.isType(g,pp)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,pp)?m:c();if(null!=b){p=b;break t}}}p=null}while(0);return h.cubeMapSampler_0=null!=(o=p)?o.sampler:null,null!=(l=r.cubeMapSampler_0)&&(l.texture=a),s}))}function Df(){qf=this}Nf.$metadata$={kind:$,simpleName:"PointMesh",interfaces:[Hd]},Object.defineProperty(Of.prototype,"offscreenPasses",{configurable:!0,get:function(){return this.mutOffscreenPasses_2k8cox$_0}}),Object.defineProperty(Of.prototype,"isFrustumChecked",{configurable:!0,get:function(){return!1},set:function(t){}}),Of.prototype.addOffscreenPass_m1c2kf$=function(t){this.addOffscreenPasses_g83fdg$_0.add_11rb$(t)},Of.prototype.removeOffscreenPass_m1c2kf$=function(t){this.remOffscreenPasses_yrwi31$_0.add_11rb$(t)},Of.prototype.addOffscreenPasses_g83fdg$_1=function(){if(!this.addOffscreenPasses_g83fdg$_0.isEmpty()){var t;for(t=this.addOffscreenPasses_g83fdg$_0.iterator();t.hasNext();){var e=t.next();this.mutOffscreenPasses_2k8cox$_0.contains_11rb$(e)||this.mutOffscreenPasses_2k8cox$_0.add_11rb$(e)}this.addOffscreenPasses_g83fdg$_0.clear()}},Of.prototype.removeOffscreenPasses_fgywi7$_0=function(){this.remOffscreenPasses_yrwi31$_0.isEmpty()||(this.mutOffscreenPasses_2k8cox$_0.removeAll_brywnq$(this.remOffscreenPasses_yrwi31$_0),this.remOffscreenPasses_yrwi31$_0.clear())},Of.prototype.renderScene_aemszp$=function(t){var e,i;this.removeOffscreenPasses_fgywi7$_0(),this.addOffscreenPasses_g83fdg$_1(),e=this.onRenderScene;for(var n=0;n!==e.size;++n)this.onRenderScene.get_za3lpa$(n)(this,t);this.mainRenderPass.update_aemszp$(t),i=this.offscreenPasses;for(var o=0;o!==i.size;++o){var r=this.offscreenPasses.get_za3lpa$(o);r.isEnabled&&(r.update_aemszp$(t),r.collectDrawCommands_aemszp$(t))}this.mainRenderPass.collectDrawCommands_aemszp$(t)},Of.prototype.processInput_aemszp$=function(t){this.handleInput_gqm22e$_0(t)},Of.prototype.update_kma0q5$=function(t){var e;e=this.disposables_mcwga4$_0;for(var i=0;i!==e.size;++i)this.disposables_mcwga4$_0.get_za3lpa$(i).dispose_aemszp$(t.ctx);this.disposables_mcwga4$_0.clear(),Id.prototype.update_kma0q5$.call(this,t)},Of.prototype.dispose_ipew3$=function(t){this.disposables_mcwga4$_0.add_11rb$(t)},Of.prototype.dispose_aemszp$=function(t){var e,i;for(i=this.disposables_mcwga4$_0.iterator();i.hasNext();)i.next().dispose_aemszp$(t);this.disposables_mcwga4$_0.clear(),this.mainRenderPass.dispose_aemszp$(t),e=this.offscreenPasses;for(var n=0;n!==e.size;++n)this.offscreenPasses.get_za3lpa$(n).dispose_aemszp$(t);this.remOffscreenPasses_yrwi31$_0.clear(),this.mutOffscreenPasses_2k8cox$_0.clear(),Id.prototype.dispose_aemszp$.call(this,t)},Of.prototype.registerDragHandler_y44tw7$=function(t){this.dragHandlers_ipew8g$_0.contains_11rb$(t)||this.dragHandlers_ipew8g$_0.add_11rb$(t)},Of.prototype.removeDragHandler_y44tw7$=function(t){this.dragHandlers_ipew8g$_0.remove_11rb$(t)},Of.prototype.computeRay_wswg9$=function(t,e,i){return this.camera.computePickRay_2cu1go$(i,t,this.mainRenderPass.viewport,e)},Of.prototype.handleInput_gqm22e$_0=function(t){var e,i,n,o=null,r=this.hoverNode_ab2f3d$_0,s=t.inputMgr.pointerState.primaryPointer;if(this.isPickingEnabled&&s.isValid&&!s.isConsumed_za3lpa$()){if(s.isInViewport_hrtwbc$(this.mainRenderPass.viewport,t)&&this.camera.initRayTes_clwnka$(this.rayTest_odjp91$_0,s,this.mainRenderPass.viewport,t)&&(this.rayTest_jljx4v$(this.rayTest_odjp91$_0),this.rayTest_odjp91$_0.isHit&&(o=this.rayTest_odjp91$_0.hitNode)),!zt(r,o)){if(null!=r){e=r.onHoverExit;for(var a=0;a!==e.size;++a)r.onHoverExit.get_za3lpa$(a)(r,s,this.rayTest_odjp91$_0,t)}if(null!=o){i=o.onHoverEnter;for(var l=0;l!==i.size;++l)o.onHoverEnter.get_za3lpa$(l)(o,s,this.rayTest_odjp91$_0,t)}this.hoverNode_ab2f3d$_0=o}if(null!=o&&zt(r,o)){n=o.onHover;for(var u=0;u!==n.size;++u)o.onHover.get_za3lpa$(u)(o,s,this.rayTest_odjp91$_0,t)}this.handleDrag_dsfjhm$_0(t)}},Of.prototype.handleDrag_dsfjhm$_0=function(t){var e,i;this.dragPtrs_mbcqtw$_0.clear(),e=t.inputMgr.pointerState.pointers;for(var n=0;n!==e.length;++n){var o=t.inputMgr.pointerState.pointers[n];o.isValid&&o.isInViewport_hrtwbc$(this.mainRenderPass.viewport,t)&&(0!==o.buttonMask||0!==o.buttonEventMask||0!==o.deltaScroll)&&this.dragPtrs_mbcqtw$_0.add_11rb$(o)}for(i=L(R(this.dragHandlers_ipew8g$_0)).iterator();i.hasNext();){var r=i.next();this.dragHandlers_ipew8g$_0.get_za3lpa$(r).handleDrag_urvnay$(this.dragPtrs_mbcqtw$_0,this,t)}},Mf.$metadata$={kind:st,simpleName:"DragHandler",interfaces:[]},Of.$metadata$={kind:$,simpleName:"Scene",interfaces:[Id]},jf.prototype.cube_wgmpek$=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=!1);var o=new Hd(new Xw(qt(ds().POSITIONS)),"skybox-cube");return o.generate_v2sixm$(Af),o.isFrustumChecked=!1,o.isCastingShadow=!1,o.shader=new Lf(t,e,i,n),o},jf.prototype.sphere_mu0k3h$=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=!1);var o=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),"skybox-cube");return o.generate_v2sixm$(Rf),o.isFrustumChecked=!1,o.isCastingShadow=!1,o.shader=new Uf(t,e,i,n),o},Object.defineProperty(Lf.prototype,"environmentMap",{configurable:!0,get:function(){return this.environmentMap_dc5v0g$_0},set:function(t){var e;this.environmentMap_dc5v0g$_0=t,null!=(e=this.cubeMapSampler_0)&&(e.texture=t)}}),Df.prototype.skyboxCubeShaderModel_vzi7zj$=function(t,e,i){var n=new Iu("skybox-cube"),o={v:null},r=new Lu(n),s=r.mvpNode(),a=r.vec3TransformNode_vid4wo$(r.attrPositions().output,s.outModelMat,1);o.v=r.stageInterfaceNode_iikjwn$("ifLocalPos",a.outVec3),r.positionOutput=r.addNode_u9w9by$(new Kf(s,r.attrPositions().output,r.stage)).outPosition;var l=new Du(n),u=l.cubeMapSamplerNode_2z3a2t$(l.cubeMapNode_61zpoe$("skyboxCube"),o.v.output);return 0!==t&&(u.texLod=new Fu(new wu(t))),e===i?l.colorOutput_a3v4si$(u.outColor):e?l.colorOutput_a3v4si$(l.hdrToLdrNode_r20yfm$(u.outColor).outColor):l.colorOutput_a3v4si$(l.gammaNode_ze33is$(u.outColor).outColor),n},Df.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var qf=null;function Ff(){return null===qf&&new Df,qf}function Bf(t,e,i){return t.cullMethod=wl(),t.depthTest=fl(),s}function Uf(t,i,n,o){var r,a;Hf(),void 0===i&&(i=0),lc.call(this,Hf().skyboxSphereShaderModel_vzi7zj$(i,n,o)),this.textureSampler_0=null,this.environmentMap_gq82hk$_0=t,this.onPipelineSetup.add_11rb$(Wf),this.onPipelineCreated.add_11rb$((r=this,a=t,function(t,i,n){var o,l,u,p,h=r,d=r.model;t:do{var f;for(u=Vp.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&u.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(zt(g.name,"skyboxSphere")&&e.isType(g,up)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,up)?m:c();if(null!=b){p=b;break t}}}p=null}while(0);return h.textureSampler_0=null!=(o=p)?o.sampler:null,null!=(l=r.textureSampler_0)&&(l.texture=a),s}))}function Vf(){Gf=this}Lf.$metadata$={kind:$,simpleName:"SkyboxCubeShader",interfaces:[lc]},Object.defineProperty(Uf.prototype,"environmentMap",{configurable:!0,get:function(){return this.environmentMap_gq82hk$_0},set:function(t){var e;this.environmentMap_gq82hk$_0=t,null!=(e=this.textureSampler_0)&&(e.texture=t)}}),Vf.prototype.skyboxSphereShaderModel_vzi7zj$=function(t,e,i){var n=new Iu("skybox-sphere"),o={v:null},r=new Lu(n),s=r.mvpNode();o.v=r.stageInterfaceNode_iikjwn$("ifUv",r.attrTexCoords().output),r.positionOutput=r.addNode_u9w9by$(new Kf(s,r.attrPositions().output,r.stage)).outPosition;var a=new Du(n),l=a.textureSamplerNode_ce41yx$(a.textureNode_61zpoe$("skyboxSphere"),o.v.output);return 0!==t&&(l.texLod=new Fu(new wu(t))),e===i?a.colorOutput_a3v4si$(l.outColor):e?a.colorOutput_a3v4si$(a.hdrToLdrNode_r20yfm$(l.outColor).outColor):a.colorOutput_a3v4si$(a.gammaNode_ze33is$(l.outColor).outColor),n},Vf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gf=null;function Hf(){return null===Gf&&new Vf,Gf}function Wf(t,e,i){return t.cullMethod=wl(),t.depthTest=fl(),s}function Kf(t,e,i){qu.call(this,"skyboxPos",i,Hp().mask),this.mvp=t,this.inPos=e,this.outPosition=new Fu(new mu("skyboxPos_outPosition"),this)}Uf.$metadata$={kind:$,simpleName:"SkyboxSphereShader",interfaces:[lc]},Kf.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inPos),this.dependsOn_lhtstx$(this.mvp)},Kf.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outPosition.declare()+" = ("+this.mvp.outMvpMat+" * vec4("+this.inPos.ref3f_61zpoe$()+", 0.0)).xyww;")},Kf.$metadata$={kind:$,simpleName:"SkyboxPosNode",interfaces:[qu]},jf.$metadata$={kind:y,simpleName:"Skybox",interfaces:[]};var Xf,Yf,Zf,Jf,Qf,t_,e_,i_=null;function n_(t){void 0===t&&(t=z()),this.tags_0=t}function o_(t,e){var i;h_.call(this,t,e),this.onClick=M(),this.textColorHovered=new Sm(J$().WHITE),this.isPressed_xi0anj$_0=!1,this.isHovered_k6sd62$_0=!1,this.ptrDownPos=po(),this.textAlignment=new I_(q_(),q_()),this.onHoverEnter.add_11rb$((i=this,function(t,e,n,o){return i.isHovered=!0,s})),this.onHoverExit.add_11rb$(function(t){return function(e,i,n,o){return t.isHovered=!1,t.isPressed=!1,s}}(this)),this.onHover.add_11rb$(function(t){return function(e,i,n,o){return i.isLeftButtonEvent&&(i.isLeftButtonDown?(t.ptrDownPos.set_dleff0$(n.hitPositionLocal.x-t.componentBounds.min.x,n.hitPositionLocal.y-t.componentBounds.min.y),t.isPressed=!0):t.isPressed&&(t.isPressed=!1,t.ptrDownPos.x=t.ptrDownPos.x-(n.hitPositionLocal.x-t.componentBounds.min.x),t.ptrDownPos.y=t.ptrDownPos.y-(n.hitPositionLocal.y-t.componentBounds.min.y),t.ptrDownPos.length()<E_(t,5)&&t.fireOnClick_kjsf19$(i,n,o))),s}}(this))}function r_(t,e){var i;d_.call(this,t,e),this.button=t,this.hoverAnimator=new s$(new u$(0,1)),this.colorWeightStd=1,this.colorWeightHovered=0,this.hoverEnterListener=(i=this,function(t,e,n,o){return i.hoverAnimator.duration=.1,i.hoverAnimator.speed=1,s}),this.hoverExitListener=function(t){return function(e,i,n,o){return t.hoverAnimator.duration=.2,t.hoverAnimator.speed=-1,s}}(this)}function s_(){}function a_(){}function l_(t){this.component=t,this.geometry=new Xw(hm().UI_MESH_ATTRIBS),this.meshBuilder=new Rz(this.geometry),this.mesh=new Hd(this.geometry),this.shader=new um,this.color=new Sm(J$().BLACK.withAlpha_mx4ult$(.5))}function u_(t){l_.call(this,t)}function p_(t,e,i,n){var o,r,a;om.call(this,i,n),this.menuAnimator_0=new a$(new u$(0,1)),this.menuButton_8be2vx$_2ldp8u$_0=this.menuButton_8be2vx$_2ldp8u$_0,this.menuAnimator_0.duration=.25,this.menuAnimator_0.speed=-1,this.menuAnimator_0.value.onUpdate=(o=this,function(t){return o.setScrollOffset_y2kzbl$(E_(o,40)*(1-t),0,0),o.alpha=t,s}),this.layoutSpec.setOrigin_4ujscr$(b_(),b_(),b_()),this.layoutSpec.setSize_4ujscr$(t,k_(100,!0),x_()),this.alpha=0,null!=e&&(this.unaryPlus_uv0sim$(n.label_tokfmu$("title",(r=e,a=n,function(t){return t.layoutSpec.setOrigin_4ujscr$(b_(),z_(-50,!0),b_()),t.layoutSpec.setSize_4ujscr$(k_(100,!0),z_(40,!0),x_()),t.textAlignment=new I_(q_(),q_()),t.text=r,t.textColor.setCustom_11rb$(a.theme.accentColor),t.onUpdate.add_11rb$(function(t,e){return function(i,n){return t.v&&(t.v=!1,e.font.setCustom_11rb$(wm(e,n.ctx))),s}}({v:!0},t)),s}))),this.unaryPlus_uv0sim$(n.component_qphi6d$("divider",function(t){return function(e){e.layoutSpec.setOrigin_4ujscr$(k_(5),z_(-58,!0),b_()),e.layoutSpec.setSize_4ujscr$(k_(90),z_(1,!0),x_());var i=new l_(e);return i.color.setCustom_11rb$(t.theme.accentColor),e.ui.setCustom_11rb$(i),s}}(n)))),n.toggleButton_6j87po$(i+"-menuButton",function(t){return function(e){return t.menuButton_8be2vx$=e,e.ui.setCustom_11rb$(new c_(t,e)),e.layoutSpec.setOrigin_4ujscr$(z_(10,!0),z_(-50,!0),b_()),e.layoutSpec.setSize_4ujscr$(z_(40,!0),z_(40,!0),x_()),s}}(this))}function c_(t,e){this.$outer=t,Q_.call(this,e,new a_)}function h_(t,e){tm.call(this,t,e),this.text_qvo458$_0=t,this.textAlignment_ux8xbn$_0=new I_(D_(),q_()),this.font=new Sm(null),this.textColor=new Sm(J$().WHITE)}function d_(t,e){this.label=t,this.baseUi_tctiu8$_0=e,this.font=this.label.font.prop,this.textColor=ty(),this.geom=new Xw(hm().UI_MESH_ATTRIBS),this.meshBuilder=new Rz(this.geom),this.mesh=new Hd(this.geom),this.shader=new um,this.textStartX=0,this.textWidth=0,this.textBaseline=0}function f_(){this.width=w_(0),this.height=w_(0),this.depth=w_(0),this.x=w_(0),this.y=w_(0),this.z=w_(0)}function __(t,e){T.call(this),this.name$=t,this.ordinal$=e}function m_(){m_=function(){},Xf=new __("UN",0),Yf=new __("DP",1),Zf=new __("MM",2),Jf=new __("PC",3)}function $_(){return m_(),Xf}function y_(){return m_(),Yf}function v_(){return m_(),Zf}function g_(){return m_(),Jf}function b_(){return new M_(0,$_())}function x_(){return new M_(100,g_())}function w_(t,e){return void 0===e&&(e=!0),new M_(t,$_(),e)}function z_(t,e){return void 0===e&&(e=!0),new M_(t,y_(),e)}function k_(t,e){return void 0===e&&(e=!0),new M_(t,g_(),e)}function S_(t,e){return e*t/100}function C_(t,e){return t*e/96}function N_(t,e){return t*e/25.4}function E_(t,e){return C_(e,t.dpi)}function T_(t,e){return rt(e*t/100)}function P_(t,e){return rt(t*e/96)}function O_(t,e){return rt(t*e/25.4)}function M_(t,e,i){void 0===i&&(i=!0),this.value=t,this.unit=e,this.roundToUnit=i}function j_(t,e,i){M_.call(this,0,$_()),this.left=t,this.right=e,this.add=i}function A_(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n}function I_(t,e){this.xAlignment=t,this.yAlignment=e}function R_(t,e){T.call(this),this.name$=t,this.ordinal$=e}function L_(){L_=function(){},Qf=new R_("START",0),t_=new R_("CENTER",1),e_=new R_("END",2)}function D_(){return L_(),Qf}function q_(){return L_(),t_}function F_(){return L_(),e_}function B_(t,e,i){void 0===i&&(i=Ct(e.name)+"-scroll"),tm.call(this,i,e.root),this.scrollTarget=e,this.trackColor=J$().GRAY.withAlpha_mx4ult$(.2),this.handleColor=J$().GRAY.withAlpha_mx4ult$(.75),this.verticalTrackBounds=new q$,this.verticalHandleBounds=new q$,this.horizontalTrackBounds=new q$,this.horizontalHandleBounds=new q$,this.scrollPosY_ted4vc$_0=new p$(0),this.scrollPosYGuard_vhhi7b$_0=new p$(0),this.pickRay_m6hrch$_0=new io,this.padding.set_m986jv$(z_(3)),this.layoutSpec.setOrigin_4ujscr$(b_(),b_(),b_()),this.layoutSpec.setSize_4ujscr$(this.scrollTarget.layoutSpec.width,this.scrollTarget.layoutSpec.height,this.scrollTarget.layoutSpec.depth),this.scrollPosY_ted4vc$_0.stiffness=300,this.scrollPosYGuard_vhhi7b$_0.stiffness=500,t.registerDragHandler_y44tw7$(this)}function U_(t){this.scrollHandler=t,this.geom=oz([ds().POSITIONS,ds().NORMALS,ds().COLORS]),this.meshBuilder=new Rz(this.geom),this.mesh=new Hd(this.geom)}function V_(t,e,i,n,o){var r,a;tm.call(this,t,o),this.onValueChanged=M(),this.trackColor=J$().GRAY,this.trackColorHighlighted=new Sm(J$().LIGHT_GRAY),this.knobColor=new Sm(J$().WHITE),this.trackWidth=0,this.knobSize=0,this.knobPosition=po(),this.min_c38r2y$_0=e,this.max_c38wrw$_0=i,this.value_ymubdz$_0=n,this.pickRay_0=new io,this.hitPlane_0=new Yn,this.hitPos_0=jo(),this.initHitPos_0=jo(),this.startDrag_0=!1,this.startDragValue_0=0,this.hitPlane_0.n.set_czzhiu$(To().Z_AXIS),this.onHover.add_11rb$((r=this,a=o,function(t,e,i,n){var o=i.hitPositionLocal.x-r.componentBounds.min.x,l=i.hitPositionLocal.y-r.componentBounds.min.y;return e.isLeftButtonEvent&&e.isLeftButtonDown&&r.isOverKnob_0(o,l)&&(a.scene.registerDragHandler_y44tw7$(r),r.startDrag_0=!0),s}))}function G_(t,e){this.slider=t,this.baseUi=e,this.geom=new Xw(hm().UI_MESH_ATTRIBS),this.meshBuilder=new Rz(this.geom),this.mesh=new Hd(this.geom),this.shader=new um}function H_(t,e){var i;h_.call(this,t,e),this.editText=new K_,this.onUpdate.add_11rb$((i=this,function(t,e){var n,o=e.ctx;if(!o.inputMgr.keyEvents.isEmpty()){for(n=o.inputMgr.keyEvents.iterator();n.hasNext();){var r=n.next();if(r.isCharTyped)i.editText.charTyped_s8itvh$(O(r.typedChar));else if(r.isPressed)switch(r.keyCode){case-17:i.editText.backspace();break;case-19:i.editText.deleteSelection();break;case-25:r.isCtrlDown?i.editText.moveCaret_fzusl$(3,r.isShiftDown):i.editText.moveCaret_fzusl$(1,r.isShiftDown);break;case-26:r.isCtrlDown?i.editText.moveCaret_fzusl$(4,r.isShiftDown):i.editText.moveCaret_fzusl$(2,r.isShiftDown);break;case-21:i.editText.moveCaret_fzusl$(5,r.isShiftDown);break;case-22:i.editText.moveCaret_fzusl$(6,r.isShiftDown)}}i.text=i.editText.toString()}return s}))}function W_(t,e){d_.call(this,t,e),this.textField=t,this.caretAlphaAnimator_mmbcs$_0=new a$(new u$(0,1)),this.caretColor_qpd03i$_0=ty(),this.caretDrawPos_hkh11t$_0=new u$(0,0),this.caretPosAnimator_3ucebe$_0=new s$(this.caretDrawPos_hkh11t$_0),this.caretAlphaAnimator_mmbcs$_0.duration=.5,this.caretAlphaAnimator_mmbcs$_0.repeating=r$().REPEAT_TOGGLE_DIR,this.caretPosAnimator_3ucebe$_0.duration=.1}function K_(t){Z_(),void 0===t&&(t=""),this.text_x0rs8x$_0=t,this.caretPosition_lco9r8$_0=0,this.selectionStart_trwhxy$_0=0}function X_(){Y_=this,this.MOVE_LEFT=1,this.MOVE_RIGHT=2,this.MOVE_WORD_LEFT=3,this.MOVE_WORD_RIGHT=4,this.MOVE_START=5,this.MOVE_END=6}n_.prototype.addTag_61zpoe$=function(t){var e=d(t,61);if(e>=0){var i=_(t,new Ft(0,e-1|0)),n=e+1|0,o=t.substring(n);this.set_4w9ihe$(i,o)}else this.set_4w9ihe$(t,null)},n_.prototype.set_4w9ihe$=function(t,e){this.put_xwzc9p$(t,null!=e?e.toString():null)},n_.prototype.plusAssign_61zpoe$=function(t){this.addTag_61zpoe$(t)},n_.prototype.hasTag_jyasbz$=function(t,e){return void 0===e&&(e=null),this.containsKey_11rb$(t)&&zt(this.get_11rb$(t),e)},n_.prototype.getBoolean_ivxn3r$=function(t,i){var n,o=this.get_11rb$(t);if(null==o)n=i;else try{n=Bt(o)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},n_.prototype.getInt_bm4lxs$=function(t,i){var n,o=this.get_11rb$(t);if(null==o)n=i;else try{n=Ut(o)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},n_.prototype.getFloat_9sobi5$=function(t,i){var n,o=this.get_11rb$(t);if(null==o)n=i;else try{n=Vt(o)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},n_.prototype.getDouble_io5o9c$=function(t,i){var n,o=this.get_11rb$(t);if(null==o)n=i;else try{n=Vt(o)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},n_.prototype.getTyped_pt3pci$=K("kool-kool-core.de.fabmax.kool.scene.Tags.getTyped_pt3pci$",X((function(){var t=e.kotlin.Exception;return function(i,n,o){var r,s=this.get_11rb$(i);if(null==s)r=n;else try{r=o(s)}catch(i){if(!e.isType(i,t))throw i;r=n}return r}}))),n_.prototype.toString=function(){var t,e=Ot(),i=w(this.size);for(t=this.entries.iterator();t.hasNext();){var n=t.next(),o=i.add_11rb$,r=n.key,s=n.value;o.call(i,null!=s?r+"="+Ct(s):r)}return Gt(i,e,void 0,"[","]"),e.toString()},Object.defineProperty(n_.prototype,"entries",{get:function(){return this.tags_0.entries}}),Object.defineProperty(n_.prototype,"keys",{get:function(){return this.tags_0.keys}}),Object.defineProperty(n_.prototype,"size",{get:function(){return this.tags_0.size}}),Object.defineProperty(n_.prototype,"values",{get:function(){return this.tags_0.values}}),n_.prototype.clear=function(){return this.tags_0.clear()},n_.prototype.containsKey_11rb$=function(t){return this.tags_0.containsKey_11rb$(t)},n_.prototype.containsValue_11rc$=function(t){return this.tags_0.containsValue_11rc$(t)},n_.prototype.get_11rb$=function(t){return this.tags_0.get_11rb$(t)},n_.prototype.isEmpty=function(){return this.tags_0.isEmpty()},n_.prototype.put_xwzc9p$=function(t,e){return this.tags_0.put_xwzc9p$(t,e)},n_.prototype.putAll_a2k3zr$=function(t){return this.tags_0.putAll_a2k3zr$(t)},n_.prototype.remove_11rb$=function(t){return this.tags_0.remove_11rb$(t)},n_.$metadata$={kind:$,simpleName:"Tags",interfaces:[Ht]},Object.defineProperty(o_.prototype,"isPressed",{configurable:!0,get:function(){return this.isPressed_xi0anj$_0},set:function(t){this.isPressed_xi0anj$_0=t}}),Object.defineProperty(o_.prototype,"isHovered",{configurable:!0,get:function(){return this.isHovered_k6sd62$_0},set:function(t){this.isHovered_k6sd62$_0=t}}),o_.prototype.fireOnClick_kjsf19$=function(t,e,i){var n;n=this.onClick;for(var o=0;o!==n.size;++o)this.onClick.get_za3lpa$(o)(this,t,e,i)},o_.prototype.setThemeProps_aemszp$=function(t){h_.prototype.setThemeProps_aemszp$.call(this,t),this.textColorHovered.setTheme_11rb$(this.root.theme.accentColor)},o_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newButtonUi_t4rm0v$(this)},o_.$metadata$={kind:$,simpleName:"Button",interfaces:[h_]},r_.prototype.createUi_aemszp$=function(t){var e;d_.prototype.createUi_aemszp$.call(this,t),this.hoverAnimator.speed=0,this.hoverAnimator.value.onUpdate=(e=this,function(t){return e.colorWeightHovered=t,e.colorWeightStd=1-t,e.button.requestUiUpdate(),s});var i=this.button.onHoverEnter,n=this.hoverEnterListener;i.add_11rb$(n);var o=this.button.onHoverExit,r=this.hoverExitListener;o.add_11rb$(r)},r_.prototype.updateTextColor=function(){this.textColor.clear(),this.textColor.add_m79ulu$(this.button.textColor.apply(),this.colorWeightStd),this.textColor.add_m79ulu$(this.button.textColorHovered.apply(),this.colorWeightHovered)},r_.prototype.dispose_aemszp$=function(t){d_.prototype.dispose_aemszp$.call(this,t);var e=this.button.onHoverEnter,i=this.hoverEnterListener;e.remove_11rb$(i);var n=this.button.onHoverExit,o=this.hoverExitListener;n.remove_11rb$(o)},r_.prototype.onRender_aemszp$=function(t){d_.prototype.onRender_aemszp$.call(this,t),this.hoverAnimator.tick_aemszp$(t)},r_.$metadata$={kind:$,simpleName:"ButtonUi",interfaces:[d_]},s_.prototype.updateComponentAlpha=function(){},s_.prototype.createUi_aemszp$=function(t){},s_.prototype.updateUi_aemszp$=function(t){},s_.prototype.onRender_aemszp$=function(t){},s_.prototype.dispose_aemszp$=function(t){},s_.$metadata$={kind:st,simpleName:"ComponentUi",interfaces:[xv]},a_.$metadata$={kind:$,simpleName:"BlankComponentUi",interfaces:[s_]},l_.prototype.updateComponentAlpha=function(){this.shader.alpha=this.component.alpha},l_.prototype.createUi_aemszp$=function(t){this.color.setTheme_11rb$(this.component.root.theme.backgroundColor).apply(),this.mesh.shader=this.shader,this.component.addNode_xtids1$(this.mesh,0)},l_.prototype.dispose_aemszp$=function(t){this.component.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},l_.prototype.updateUi_aemszp$=function(t){this.color.setTheme_11rb$(this.component.root.theme.backgroundColor).apply(),this.component.setupBuilder_84rojv$(this.meshBuilder),this.meshBuilder.color=this.color.prop;var e=this.meshBuilder,i=new Hz;i.size.set_dleff0$(this.component.width,this.component.height),i.zeroTexCoords(),e.rect_e5k3t5$(i)},l_.prototype.onRender_aemszp$=function(t){},l_.$metadata$={kind:$,simpleName:"SimpleComponentUi",interfaces:[s_]},u_.$metadata$={kind:$,simpleName:"BlurredComponentUi",interfaces:[l_]},Object.defineProperty(p_.prototype,"menuButton_8be2vx$",{configurable:!0,get:function(){return null==this.menuButton_8be2vx$_2ldp8u$_0?pt("menuButton"):this.menuButton_8be2vx$_2ldp8u$_0},set:function(t){this.menuButton_8be2vx$_2ldp8u$_0=t}}),Object.defineProperty(p_.prototype,"isOpen",{configurable:!0,get:function(){return this.menuButton_8be2vx$.isEnabled},set:function(t){this.menuButton_8be2vx$.isEnabled=t}}),Object.defineProperty(p_.prototype,"animationPos",{configurable:!0,get:function(){return this.menuAnimator_0.value.value}}),c_.prototype.createUi_aemszp$=function(t){Q_.prototype.createUi_aemszp$.call(this,t),this.knobAnimator.duration=.5,this.knobAnimator.value.onUpdate;var e,i,n=this.tb.onStateChange,o=(e=this,i=this.$outer,function(t){return i.menuAnimator_0.speed=e.tb.isEnabled?1:-1,s});n.add_11rb$(o),this.mesh.shader=new um},c_.prototype.onRender_aemszp$=function(t){Q_.prototype.onRender_aemszp$.call(this,t),this.$outer.menuAnimator_0.tick_aemszp$(t)},c_.prototype.updateUi_aemszp$=function(t){var e=.5*this.tb.width,i=.18*this.tb.height,n=-e/2,o=E_(this.tb,2.5);this.updateTextColor(),this.tb.setupBuilder_84rojv$(this.meshBuilder);var r=this.meshBuilder;r.color=new X$(0,0,0,0);var s=new Dz;s.zeroTexCoords();var a=this.tb.width,l=this.tb.height;s.radius=A.min(a,l)/2,s.center.set_y2kzbl$(this.tb.width/2,this.tb.height/2,-4),s.steps=30,r.circle_59f34t$(s);var u=this.knobAnimator.value.value*-e*.1,p=e-this.knobAnimator.value.value*e*.4;r.color=this.textColor,r.translate_y2kzbl$(this.tb.width/2,this.tb.height/2,0),r.rotate_ad55pp$(180-180*this.knobAnimator.value.value,To().Z_AXIS),r.transform.push(),r.translate_y2kzbl$(u,i,0),r.rotate_ad55pp$(45*this.knobAnimator.value.value,To().Z_AXIS);var c=new Hz;c.origin.set_y2kzbl$(n,-o/2,0),c.size.set_dleff0$(p,o),c.zeroTexCoords(),r.rect_e5k3t5$(c),r.transform.pop();var h=new Hz;h.origin.set_y2kzbl$(n,-o/2,0),h.size.set_dleff0$(e,o),r.rect_e5k3t5$(h),r.transform.push(),r.translate_y2kzbl$(u,-i,0),r.rotate_ad55pp$(-45*this.knobAnimator.value.value,To().Z_AXIS);var d=new Hz;d.origin.set_y2kzbl$(n,-o/2,0),d.size.set_dleff0$(p,o),r.rect_e5k3t5$(d),r.transform.pop()},c_.$metadata$={kind:$,simpleName:"MenuButtonUi",interfaces:[Q_]},p_.$metadata$={kind:$,simpleName:"DrawerMenu",interfaces:[om]},Object.defineProperty(h_.prototype,"text",{configurable:!0,get:function(){return this.text_qvo458$_0},set:function(t){zt(t,this.text_qvo458$_0)||(this.text_qvo458$_0=t,this.requestUiUpdate())}}),Object.defineProperty(h_.prototype,"textAlignment",{configurable:!0,get:function(){return this.textAlignment_ux8xbn$_0},set:function(t){null!=t&&t.equals(this.textAlignment_ux8xbn$_0)||(this.textAlignment_ux8xbn$_0=t,this.requestUiUpdate())}}),h_.prototype.setThemeProps_aemszp$=function(t){tm.prototype.setThemeProps_aemszp$.call(this,t),this.font.setTheme_11rb$(xm(this,t)),this.textColor.setTheme_11rb$(this.root.theme.foregroundColor)},h_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newLabelUi_wviu0r$(this)},h_.$metadata$={kind:$,simpleName:"Label",interfaces:[tm]},d_.prototype.updateComponentAlpha=function(){this.baseUi_tctiu8$_0.updateComponentAlpha(),this.shader.alpha=this.label.alpha},d_.prototype.createUi_aemszp$=function(t){this.baseUi_tctiu8$_0.createUi_aemszp$(t),this.mesh.shader=this.shader,this.label.plusAssign_f1kmr1$(this.mesh)},d_.prototype.updateUi_aemszp$=function(t){this.baseUi_tctiu8$_0.updateUi_aemszp$(t),this.label.font.isUpdate||null!=this.label.font.prop||this.label.font.setCustom_11rb$(Nv().defaultFont_aemszp$(t)),this.label.font.isUpdate&&(this.font=this.label.font.apply(),this.shader.font=this.font),this.label.setupBuilder_84rojv$(this.meshBuilder),this.updateTextColor(),this.computeTextMetrics(),this.renderText_aemszp$(t)},d_.prototype.onRender_aemszp$=function(t){this.baseUi_tctiu8$_0.onRender_aemszp$(t)},d_.prototype.dispose_aemszp$=function(t){this.baseUi_tctiu8$_0.dispose_aemszp$(t),this.label.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},d_.prototype.computeTextMetrics=function(){var t,i,n,o,r,s,a,l;switch(this.textWidth=null!=(i=null!=(t=this.font)?t.textWidth_61zpoe$(this.label.text):null)?i:0,this.label.textAlignment.xAlignment.name){case"START":n=this.label.padding.left.toUnits_dleff0$(this.label.width,this.label.dpi);break;case"CENTER":n=(this.label.width-this.textWidth)/2;break;case"END":n=this.label.width-this.textWidth-this.label.padding.right.toUnits_dleff0$(this.label.width,this.label.dpi);break;default:n=e.noWhenBranchMatched()}switch(this.textStartX=n,this.label.textAlignment.yAlignment.name){case"START":l=this.label.height-this.label.padding.top.toUnits_dleff0$(this.label.width,this.label.dpi)-(null!=(r=null!=(o=this.font)?o.normHeight:null)?r:0);break;case"CENTER":l=(this.label.height-(null!=(a=null!=(s=this.font)?s.normHeight:null)?a:0))/2;break;case"END":l=this.label.padding.bottom.toUnits_dleff0$(this.label.height,this.label.dpi);break;default:l=e.noWhenBranchMatched()}this.textBaseline=l},d_.prototype.renderText_aemszp$=function(t){this.meshBuilder.color=this.textColor;var e=this.font;if(null!=e){var i=this.meshBuilder,n=new Xz(e);n.origin.set_y2kzbl$(this.textStartX,this.textBaseline,E_(this.label,.1)),n.text=this.label.text,i.text_s8z339$(n,0)}},d_.prototype.updateTextColor=function(){this.textColor.set_czzhhz$(this.label.textColor.apply())},d_.$metadata$={kind:$,simpleName:"LabelUi",interfaces:[s_]},f_.prototype.setOrigin_4ujscr$=function(t,e,i){this.x=t,this.y=e,this.z=i},f_.prototype.setSize_4ujscr$=function(t,e,i){this.width=t,this.height=e,this.depth=i},f_.prototype.set_m6ih2k$=function(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.x=t.x,this.y=t.y,this.z=t.z},f_.$metadata$={kind:$,simpleName:"LayoutSpec",interfaces:[]},__.$metadata$={kind:$,simpleName:"SizeUnit",interfaces:[T]},__.values=function(){return[$_(),y_(),v_(),g_()]},__.valueOf_61zpoe$=function(t){switch(t){case"UN":return $_();case"DP":return y_();case"MM":return v_();case"PC":return g_();default:P("No enum constant de.fabmax.kool.scene.ui.SizeUnit."+t)}},M_.prototype.toUnits_dleff0$=function(t,i){var n;if(this.roundToUnit)switch(this.unit.name){case"UN":n=rt(this.value);break;case"DP":n=P_(this.value,i);break;case"MM":n=O_(this.value,i);break;case"PC":n=T_(this.value,t);break;default:n=e.noWhenBranchMatched()}else switch(this.unit.name){case"UN":n=this.value;break;case"DP":n=C_(this.value,i);break;case"MM":n=N_(this.value,i);break;case"PC":n=S_(this.value,t);break;default:n=e.noWhenBranchMatched()}return n},M_.prototype.plus_m986jv$=function(t){return new j_(this,t,!0)},M_.prototype.minus_m986jv$=function(t){return new j_(this,t,!1)},M_.prototype.equals=function(t){return this===t||!!e.isType(t,M_)&&this.value===t.value&&this.unit===t.unit&&this.roundToUnit===t.roundToUnit},M_.prototype.hashCode=function(){var t=ot(this.value);return t=(31*(t=(31*t|0)+this.unit.hashCode()|0)|0)+ot(this.roundToUnit)|0},M_.$metadata$={kind:$,simpleName:"SizeSpec",interfaces:[]},j_.prototype.toUnits_dleff0$=function(t,e){var i=this.left.toUnits_dleff0$(t,e),n=this.right.toUnits_dleff0$(t,e);return this.add?i+n:i-n},j_.$metadata$={kind:$,simpleName:"CombSizeSpec",interfaces:[M_]},A_.prototype.set_m986jv$=function(t){this.set_107250$(t,t,t,t)},A_.prototype.set_107250$=function(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n},A_.$metadata$={kind:$,simpleName:"Margin",interfaces:[]},A_.prototype.component1=function(){return this.top},A_.prototype.component2=function(){return this.bottom},A_.prototype.component3=function(){return this.left},A_.prototype.component4=function(){return this.right},A_.prototype.copy_107250$=function(t,e,i,n){return new A_(void 0===t?this.top:t,void 0===e?this.bottom:e,void 0===i?this.left:i,void 0===n?this.right:n)},A_.prototype.toString=function(){return"Margin(top="+e.toString(this.top)+", bottom="+e.toString(this.bottom)+", left="+e.toString(this.left)+", right="+e.toString(this.right)+")"},A_.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.top)|0)+e.hashCode(this.bottom)|0)+e.hashCode(this.left)|0)+e.hashCode(this.right)|0},A_.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.top,t.top)&&e.equals(this.bottom,t.bottom)&&e.equals(this.left,t.left)&&e.equals(this.right,t.right)},I_.$metadata$={kind:$,simpleName:"Gravity",interfaces:[]},I_.prototype.component1=function(){return this.xAlignment},I_.prototype.component2=function(){return this.yAlignment},I_.prototype.copy_9pkgn0$=function(t,e){return new I_(void 0===t?this.xAlignment:t,void 0===e?this.yAlignment:e)},I_.prototype.toString=function(){return"Gravity(xAlignment="+e.toString(this.xAlignment)+", yAlignment="+e.toString(this.yAlignment)+")"},I_.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.xAlignment)|0)+e.hashCode(this.yAlignment)|0},I_.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.xAlignment,t.xAlignment)&&e.equals(this.yAlignment,t.yAlignment)},R_.$metadata$={kind:$,simpleName:"Alignment",interfaces:[T]},R_.values=function(){return[D_(),q_(),F_()]},R_.valueOf_61zpoe$=function(t){switch(t){case"START":return D_();case"CENTER":return q_();case"END":return F_();default:P("No enum constant de.fabmax.kool.scene.ui.Alignment."+t)}},B_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newScrollHandlerUi_dz938y$(this)},B_.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){this.drawBounds.set_ea4od8$(this.scrollTarget.drawBounds),this.bounds.set_ea4od8$(this.drawBounds)},B_.prototype.handleDrag_urvnay$=function(t,e,i){if(0!==this.alpha){!t.isEmpty()&&!t.get_za3lpa$(0).isConsumed_za3lpa$()&&this.computeLocalPickRay_wswg9$(t.get_za3lpa$(0),i,this.pickRay_m6hrch$_0)&&this.bounds.hitDistanceSqr_nvyeur$(this.pickRay_m6hrch$_0)<nt.MAX_VALUE&&(this.scrollPosY_ted4vc$_0.desired=this.scrollPosY_ted4vc$_0.desired+50*t.get_za3lpa$(0).deltaScroll,t.get_za3lpa$(0).consume_za3lpa$()),this.scrollPosY_ted4vc$_0.desired>0&&(this.scrollPosY_ted4vc$_0.desired>this.scrollPosYGuard_vhhi7b$_0.actual&&(this.scrollPosYGuard_vhhi7b$_0.actual=this.scrollPosY_ted4vc$_0.desired),this.scrollPosYGuard_vhhi7b$_0.desired=0,this.scrollPosY_ted4vc$_0.desired=this.scrollPosYGuard_vhhi7b$_0.animate_mx4ult$(i.deltaT));var n=this.scrollTarget.drawBounds.size.y-this.scrollTarget.contentBounds.size.y;this.scrollPosY_ted4vc$_0.desired<n&&(this.scrollPosY_ted4vc$_0.desired<this.scrollPosYGuard_vhhi7b$_0.actual&&(this.scrollPosYGuard_vhhi7b$_0.actual=this.scrollPosY_ted4vc$_0.desired),this.scrollPosYGuard_vhhi7b$_0.desired=n,this.scrollPosY_ted4vc$_0.desired=this.scrollPosYGuard_vhhi7b$_0.animate_mx4ult$(i.deltaT)),this.scrollPosY_ted4vc$_0.animate_mx4ult$(i.deltaT);var o,r=this.scrollTarget.scrollOffset.y,s=this.scrollPosY_ted4vc$_0.actual;o=LN.FUZZY_EQ_F;var a=r-s;A.abs(a)<=o||this.scrollTarget.setScrollOffset_y2kzbl$(0,this.scrollPosY_ted4vc$_0.actual,0)}},B_.prototype.rayTest_jljx4v$=function(t){if(0!==this.alpha){var e=this.verticalTrackBounds.hitDistanceSqr_nvyeur$(t.ray),i=this.horizontalTrackBounds.hitDistanceSqr_nvyeur$(t.ray),n=A.min(e,i);n<nt.MAX_VALUE&&n<=t.hitDistanceSqr&&t.setHit_vfk0k2$(this,A.sqrt(n))}},B_.$metadata$={kind:$,simpleName:"ScrollHandler",interfaces:[Mf,tm]},U_.prototype.updateComponentAlpha=function(){},U_.prototype.createUi_aemszp$=function(t){this.scrollHandler.plusAssign_f1kmr1$(this.mesh)},U_.prototype.updateUi_aemszp$=function(t){this.meshBuilder.clear(),this.meshBuilder.identity(),this.computeTrackBounds(),this.drawVerticalBar(),this.drawHorizontalBar()},U_.prototype.computeTrackBounds=function(){var t=this.scrollHandler.scrollTarget,e=t.drawBounds.size.y<t.contentBounds.size.y,i=t.drawBounds.size.x<t.contentBounds.size.x,n=t.drawBounds.size.x,o=t.drawBounds.size.y,r=this.scrollHandler.padding.top.toUnits_dleff0$(o,this.scrollHandler.dpi),s=this.scrollHandler.padding.bottom.toUnits_dleff0$(o,this.scrollHandler.dpi),a=this.scrollHandler.padding.left.toUnits_dleff0$(n,this.scrollHandler.dpi),l=this.scrollHandler.padding.right.toUnits_dleff0$(n,this.scrollHandler.dpi),u=E_(this.scrollHandler,6),p=E_(this.scrollHandler,.1),c=E_(this.scrollHandler,.25);if(e){var h=n-l-u,d=this.scrollHandler.padding.bottom.toUnits_dleff0$(o,this.scrollHandler.dpi)+(i?u+l:0),f=u,_=o-r-s-(i?u+l:0);this.scrollHandler.verticalTrackBounds.set_w8lrqs$(h,d,p,h+f,d+_,p).move_czzhiu$(t.drawBounds.min);var m=t.drawBounds.size.y/t.contentBounds.size.y*_,$=E_(this.scrollHandler,12),y=m<$?$:m>_?_:m,v=y-m,g=_-(v<0?0:v>_?_:v),b=(t.drawBounds.min.y-t.contentBounds.min.y)/t.contentBounds.size.y*g+d,x=d+_-y,w=b<d?d:b>x?x:b;this.scrollHandler.verticalHandleBounds.set_w8lrqs$(h,w,c,h+f,w+y,c).move_czzhiu$(t.drawBounds.min)}else this.scrollHandler.verticalTrackBounds.clear(),this.scrollHandler.verticalHandleBounds.clear();if(i){var z=a,k=s,S=this.scrollHandler.width-a-l-(e?u+l:0),C=u;this.scrollHandler.horizontalTrackBounds.set_w8lrqs$(z,k,p,z+S,k+C,p).move_czzhiu$(t.drawBounds.min);var N=t.drawBounds.size.x/t.contentBounds.size.x*S,E=E_(this.scrollHandler,12),T=N<E?E:N>S?S:N,P=T-N,O=S-(P<0?0:P>S?S:P),M=(t.drawBounds.min.x-t.contentBounds.min.x)/t.contentBounds.size.x*O+z,j=z+S-T,A=M<z?z:M>j?j:M;this.scrollHandler.horizontalHandleBounds.set_w8lrqs$(A,k,c,A+T,k+C,c).move_czzhiu$(t.drawBounds.min)}else this.scrollHandler.horizontalTrackBounds.clear(),this.scrollHandler.horizontalHandleBounds.clear()},U_.prototype.drawVerticalBar=function(){this.drawDefaultBar_xyh9j8$_0(this.scrollHandler.verticalTrackBounds,this.scrollHandler.verticalHandleBounds)},U_.prototype.drawHorizontalBar=function(){this.drawDefaultBar_xyh9j8$_0(this.scrollHandler.horizontalTrackBounds,this.scrollHandler.horizontalHandleBounds)},U_.prototype.drawDefaultBar_xyh9j8$_0=function(t,e){if(!t.isEmpty){this.meshBuilder.color=this.scrollHandler.trackColor;var i=this.meshBuilder,n=new Hz;n.origin.set_y2kzbl$(t.min.x,t.min.y,t.min.z),n.size.set_dleff0$(t.size.x,t.size.y);var o=t.size.x,r=t.size.y;n.cornerRadius=A.min(o,r)/2,n.cornerSteps=4,n.zeroTexCoords(),i.rect_e5k3t5$(n)}if(!e.isEmpty){this.meshBuilder.color=this.scrollHandler.handleColor;var s=this.meshBuilder,a=new Hz;a.origin.set_y2kzbl$(e.min.x,e.min.y,e.min.z),a.size.set_dleff0$(e.size.x,e.size.y);var l=e.size.x,u=e.size.y;a.cornerRadius=A.min(l,u)/2,a.cornerSteps=4,a.zeroTexCoords(),s.rect_e5k3t5$(a)}},U_.prototype.onRender_aemszp$=function(t){},U_.prototype.dispose_aemszp$=function(t){this.scrollHandler.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},U_.$metadata$={kind:$,simpleName:"ScrollHandlerUi",interfaces:[s_]},Object.defineProperty(V_.prototype,"min",{configurable:!0,get:function(){return this.min_c38r2y$_0},set:function(t){t!==this.min_c38r2y$_0&&(this.min_c38r2y$_0=t,this.requestUiUpdate())}}),Object.defineProperty(V_.prototype,"max",{configurable:!0,get:function(){return this.max_c38wrw$_0},set:function(t){t!==this.max_c38wrw$_0&&(this.max_c38wrw$_0=t,this.requestUiUpdate())}}),Object.defineProperty(V_.prototype,"value",{configurable:!0,get:function(){return this.value_ymubdz$_0},set:function(t){var e;if(t!==this.value_ymubdz$_0){var i,n=this.min,o=this.max;i=t<n?n:t>o?o:t,this.value_ymubdz$_0=i,this.requestUiUpdate(),e=this.onValueChanged;for(var r=0;r!==e.size;++r)this.onValueChanged.get_za3lpa$(r)(this,this.value_ymubdz$_0)}}}),V_.prototype.setValue_y2kzbl$=function(t,e,i){this.min=t,this.max=e,this.value=i},V_.prototype.isOverKnob_0=function(t,e){var i=t-this.knobPosition.x,n=e-this.knobPosition.y;return i*i+n*n<this.knobSize*this.knobSize},V_.prototype.handleDrag_urvnay$=function(t,e,i){if(1===t.size&&!t.get_za3lpa$(0).isConsumed_za3lpa$()&&t.get_za3lpa$(0).isLeftButtonDown&&this.computeLocalPickRay_wswg9$(t.get_za3lpa$(0),i,this.pickRay_0)){if(this.hitPlane_0.intersectionPoint_lplggz$(this.pickRay_0,this.hitPos_0)){this.startDrag_0&&(this.startDrag_0=!1,this.initHitPos_0.set_czzhiu$(this.hitPos_0),this.startDragValue_0=this.value);var n=this.hitPos_0.x-this.initHitPos_0.x;this.value=this.startDragValue_0+n/this.trackWidth*(this.max-this.min)}t.get_za3lpa$(0).consume_za3lpa$()}else e.removeDragHandler_y44tw7$(this)},V_.prototype.setThemeProps_aemszp$=function(t){tm.prototype.setThemeProps_aemszp$.call(this,t),this.knobColor.setTheme_11rb$(this.root.theme.accentColor),this.trackColorHighlighted.setTheme_11rb$(ty().add_m79ulu$(this.root.theme.accentColor,.4))},V_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newSliderUi_l85jm8$(this)},V_.$metadata$={kind:$,simpleName:"Slider",interfaces:[Mf,tm]},G_.prototype.updateComponentAlpha=function(){this.baseUi.updateComponentAlpha(),this.shader.alpha=this.slider.alpha},G_.prototype.createUi_aemszp$=function(t){this.baseUi.createUi_aemszp$(t),this.mesh.shader=this.shader,this.slider.plusAssign_f1kmr1$(this.mesh)},G_.prototype.dispose_aemszp$=function(t){this.baseUi.dispose_aemszp$(t),this.mesh.dispose_aemszp$(t),this.slider.minusAssign_f1kmr1$(this.mesh)},G_.prototype.updateUi_aemszp$=function(t){this.baseUi.updateUi_aemszp$(t),this.slider.knobSize=E_(this.slider,10);var e=E_(this.slider,6),i=this.slider.padding.left.toUnits_dleff0$(this.slider.width,this.slider.dpi)+this.slider.knobSize,n=(this.slider.height-e)/2,o=(this.slider.value-this.slider.min)/(this.slider.max-this.slider.min);if(this.slider.trackWidth=this.slider.width-i-this.slider.knobSize-this.slider.padding.right.toUnits_dleff0$(this.slider.width,this.slider.dpi),this.slider.knobPosition.set_dleff0$(i+this.slider.trackWidth*o,this.slider.height/2),this.slider.setupBuilder_84rojv$(this.meshBuilder),this.slider.value>this.slider.min){this.meshBuilder.color=this.slider.trackColorHighlighted.apply();var r=this.meshBuilder,s=new Hz;s.origin.set_y2kzbl$(i,n,E_(this.slider,.1)),s.size.set_dleff0$(this.slider.knobPosition.x-i+e,e),s.cornerRadius=e/2,s.cornerSteps=4,s.zeroTexCoords(),r.rect_e5k3t5$(s)}if(this.slider.value<this.slider.max){this.meshBuilder.color=this.slider.trackColor;var a=this.meshBuilder,l=new Hz;l.origin.set_y2kzbl$(this.slider.knobPosition.x-e,n,E_(this.slider,.1)),l.size.set_dleff0$(this.slider.trackWidth-this.slider.knobPosition.x+i+e,e),l.cornerRadius=e/2,l.cornerSteps=4,l.zeroTexCoords(),a.rect_e5k3t5$(l)}this.meshBuilder.color=this.slider.knobColor.apply();var u=this.meshBuilder,p=new Dz;p.zeroTexCoords(),p.center.set_y2kzbl$(this.slider.knobPosition.x,this.slider.knobPosition.y,E_(this.slider,.2)),p.radius=this.slider.knobSize,p.steps=30,u.circle_59f34t$(p)},G_.prototype.onRender_aemszp$=function(t){this.baseUi.onRender_aemszp$(t)},G_.$metadata$={kind:$,simpleName:"SliderUi",interfaces:[s_]},H_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newTextFieldUi_p39bdq$(this)},H_.$metadata$={kind:$,simpleName:"TextField",interfaces:[h_]},W_.prototype.onRender_aemszp$=function(t){this.textField.requestUiUpdate(),d_.prototype.onRender_aemszp$.call(this,t)},W_.prototype.renderText_aemszp$=function(t){var e,i,n,o,r,s,a,l=this.label.padding.left.toUnits_dleff0$(this.label.width,this.label.dpi),u=this.label.width-this.label.padding.right.toUnits_dleff0$(this.label.width,this.label.dpi),p=this.textBaseline-.2*(null!=(o=null!=(n=null!=(i=null!=(e=this.font)?e.charMap:null)?i.fontProps:null)?n.sizePts:null)?o:0),c={v:this.textStartX},h={v:this.textStartX};if(this.textField.editText.caretPosition>0||this.textField.editText.selectionStart>0){var d=this.textField.editText.caretPosition,f=this.textField.editText.selectionStart;r=A.max(d,f)-1|0;for(var _=0;_<=r;_++){var m=null!=(a=null!=(s=this.font)?s.charWidth_s8itvh$(O(this.textField.editText.get_za3lpa$(_))):null)?a:0;_<this.textField.editText.caretPosition&&(c.v+=m),_<this.textField.editText.selectionStart&&(h.v+=m)}}c.v!==this.caretDrawPos_hkh11t$_0.to&&(this.caretDrawPos_hkh11t$_0.from=this.caretDrawPos_hkh11t$_0.value,this.caretDrawPos_hkh11t$_0.to=c.v,this.caretPosAnimator_3ucebe$_0.progress=0,this.caretPosAnimator_3ucebe$_0.speed=1),c.v=this.caretPosAnimator_3ucebe$_0.tick_aemszp$(t);var $,y,v,g,b=this.meshBuilder;if(b.transform.push(),b.translate_y2kzbl$(0,0,E_(this.label,.1)),this.meshBuilder.color=this.label.root.theme.accentColor,this.meshBuilder.line_s2l86p$(l,p,u,p,E_(this.label,1.5)),this.textField.editText.selectionStart!==this.textField.editText.caretPosition){this.caretColor_qpd03i$_0.set_czzhhz$(this.label.root.theme.accentColor),this.caretColor_qpd03i$_0.a=.4,this.meshBuilder.color=this.caretColor_qpd03i$_0;var x,w,z,k,S=this.meshBuilder,C=new Hz;C.origin.set_y2kzbl$(c.v,p,0),C.size.set_dleff0$(h.v-c.v,1.2*(null!=(k=null!=(z=null!=(w=null!=(x=this.font)?x.charMap:null)?w.fontProps:null)?z.sizePts:null)?k:0)),C.zeroTexCoords(),S.rect_e5k3t5$(C)}this.caretColor_qpd03i$_0.set_czzhhz$(this.label.root.theme.accentColor),this.caretColor_qpd03i$_0.a=this.caretAlphaAnimator_mmbcs$_0.tick_aemszp$(t),this.meshBuilder.color=this.caretColor_qpd03i$_0,this.meshBuilder.line_s2l86p$(c.v,p,c.v,this.textBaseline+(null!=(g=null!=(v=null!=(y=null!=($=this.font)?$.charMap:null)?y.fontProps:null)?v.sizePts:null)?g:0),E_(this.label,1.5)),b.transform.pop(),d_.prototype.renderText_aemszp$.call(this,t)},W_.$metadata$={kind:$,simpleName:"TextFieldUi",interfaces:[d_]},Object.defineProperty(K_.prototype,"text",{configurable:!0,get:function(){return this.text_x0rs8x$_0},set:function(t){this.caretPosition>t.length&&(this.caretPosition=t.length),this.selectionStart>t.length&&(this.selectionStart=t.length),this.text_x0rs8x$_0=t}}),Object.defineProperty(K_.prototype,"caretPosition",{configurable:!0,get:function(){return this.caretPosition_lco9r8$_0},set:function(t){var e,i=this.text.length;e=t<0?0:t>i?i:t,this.caretPosition_lco9r8$_0=e}}),Object.defineProperty(K_.prototype,"selectionStart",{configurable:!0,get:function(){return this.selectionStart_trwhxy$_0},set:function(t){var e,i=this.text.length;e=t<0?0:t>i?i:t,this.selectionStart_trwhxy$_0=e}}),K_.prototype.charTyped_s8itvh$=function(t){this.replaceSelection_61zpoe$(String.fromCharCode(t))},K_.prototype.moveCaret_fzusl$=function(t,e){switch(t){case 1:this.caretPosition=this.caretPosition-1|0;break;case 2:this.caretPosition=this.caretPosition+1|0;break;case 5:this.caretPosition=0;break;case 6:this.caretPosition=this.text.length;break;case 3:this.moveWordLeft_0();break;case 4:this.moveWordRight_0()}e||(this.selectionStart=this.caretPosition)},K_.prototype.moveWordLeft_0=function(){if(this.caretPosition>0){var t=this.text,e=this.caretPosition,i=Wt(t.substring(0,e),32);this.caretPosition=i<0?0:i}},K_.prototype.moveWordRight_0=function(){if(this.caretPosition<this.text.length){var t=d(this.text,32,this.caretPosition);this.caretPosition=t<0?this.text.length:t+1|0}},K_.prototype.backspace=function(){if(this.selectionStart!==this.caretPosition)this.replaceSelection_61zpoe$("");else if(this.caretPosition>0){this.selectionStart=(this.caretPosition=this.caretPosition-1|0,this.caretPosition);var t=this.text,e=this.caretPosition,i=t.substring(0,e),n=this.text,o=this.caretPosition+1|0;this.text=i+n.substring(o)}},K_.prototype.deleteSelection=function(){if(this.selectionStart!==this.caretPosition)this.replaceSelection_61zpoe$("");else if(this.caretPosition<this.text.length){var t=this.text,e=this.caretPosition,i=t.substring(0,e),n=this.text,o=this.caretPosition+1|0;this.text=i+n.substring(o)}},K_.prototype.replaceSelection_61zpoe$=function(t){var e=this.selectionStart,i=this.caretPosition,n=A.min(e,i),o=this.selectionStart,r=this.caretPosition,s=A.max(o,r);this.text=this.text.substring(0,n)+t+this.text.substring(s);var a=this.selectionStart,l=this.caretPosition;this.caretPosition=A.min(a,l)+t.length|0,this.selectionStart=this.caretPosition},K_.prototype.get_za3lpa$=function(t){return E(this.text.charCodeAt(t))},K_.prototype.toString=function(){return this.text},X_.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Y_=null;function Z_(){return null===Y_&&new X_,Y_}function J_(t,e,i){void 0===i&&(i=!1),o_.call(this,t,e),this.onStateChange=M(),this.knobColorOn=J$().WHITE,this.knobColorOff=J$().LIGHT_GRAY,this.trackColorOff=J$().GRAY,this.trackColorOn=J$().LIGHT_GRAY,this.isEnabled_gffhto$_0=i,this.textAlignment=new I_(D_(),q_())}function Q_(t,e){var i;r_.call(this,t,e),this.tb=t,this.knobAnimator=new a$(new u$(0,1)),this.knobColor=ty(),this.trackColor=ty(),this.stateChangedListener=(i=this,function(t){return t.isEnabled?i.knobAnimator.speed=1:i.knobAnimator.speed=-1,s})}function tm(t,e){Id.call(this,t),this.root=e,this.componentBounds=new q$,this.drawBounds=new q$,this.layoutSpec=new f_,this.padding_iyk9nn$_0=new A_(z_(16),z_(16),z_(16),z_(16)),this.ui=new Sm(new a_),this.alpha_e9jtsg$_0=1,this.isThemeUpdate_yv706e$_0=!0,this.isUiUpdate_l4k16n$_0=!0,this.onHoverEnter.add_11rb$(em),this.onHoverExit.add_11rb$(im),this.onHover.add_11rb$(nm)}function em(t,i,n,o){var r,a,l=e.isType(r=t.parent,tm)?r:null;if(null!=l){a=l.onHoverEnter;for(var u=0;u!==a.size;++u)l.onHoverEnter.get_za3lpa$(u)(l,i,n,o)}return s}function im(t,i,n,o){var r,a,l=e.isType(r=t.parent,tm)?r:null;if(null!=l){a=l.onHoverExit;for(var u=0;u!==a.size;++u)l.onHoverExit.get_za3lpa$(u)(l,i,n,o)}return s}function nm(t,i,n,o){var r,a,l=e.isType(r=t.parent,tm)?r:null;if(null!=l){a=l.onHover;for(var u=0;u!==a.size;++u)l.onHover.get_za3lpa$(u)(l,i,n,o)}return s}function om(t,e){tm.call(this,t,e),this.posInParent=jo(),this.contentScale=1,this.customTransform=rm,this.scrollOffsetMut=jo(),this.isScrollDirty=!0,this.childComponents_65igag$_0=M(),this.scrollHandler_xer21f$_0=null,this.tmpChildBounds_j2uogg$_0=new q$,this.tmpVec1_md9h9y$_0=jo(),this.tmpVec2_md9hat$_0=jo()}function rm(t){return s}function sm(t,e,i,n,o,r){void 0===o&&(o=300);var s=new lm(t,o);return s.contentHeight=n,s.globalWidth=e,s.globalHeight=i,r(s),s}function am(t,e,i,n){void 0===t&&(t=96),void 0===e&&(e=null),void 0===i&&(i=!0);var o,r,a=new Of(null!=e?e:"uiScene"),l=new Nd;return l.isClipToViewport=!0,l.near=-1e3,l.far=1e3,a.camera=l,i&&(a.mainRenderPass.clearColor=null),a.unaryPlus_uv0sim$(sm(a,1,1,null,t,(o=n,r=a,function(t){return t.isFillViewport=!0,o(t,r),s}))),a}function lm(t,e,i){void 0===i&&(i="UiRoot"),sf.call(this,i),this.scene=t,this.uiDpi=e,this.globalWidth_rlfw80$_0=1,this.globalHeight_5sxs8p$_0=1,this.globalDepth_ijlk77$_0=1,this.isFillViewport_fr53nm$_0=!1,this.theme_208sxy$_0=gm().DARK,this.content=new om(i+"-content",this),this.contentHeight_17xsyl$_0=null,this.isLayoutNeeded_0=!0,this.content.parent=this,this.content.layoutSpec.setSize_4ujscr$(k_(100),k_(100),k_(100))}function um(t){hm(),void 0===t&&(t=new dh(J$().WHITE)),lc.call(this,hm().uiShaderModel_0()),this.uAlpha_0=null,this.uFontSampler_0=null,this.alpha_dkua5e$_0=1,this.font_1rx0e3$_0=t}function pm(){cm=this,this.UI_MESH_ATTRIBS=At([ds().POSITIONS,ds().TEXTURE_COORDS,ds().COLORS]),this.U_ALPHA_0="uAlpha",this.U_FONT_TEX_0="uFontTex"}K_.$metadata$={kind:$,simpleName:"EditableText",interfaces:[]},Object.defineProperty(J_.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_gffhto$_0},set:function(t){t!==this.isEnabled_gffhto$_0&&(this.isEnabled_gffhto$_0=t,this.fireStateChanged())}}),J_.prototype.fireStateChanged=function(){var t;t=this.onStateChange;for(var e=0;e!==t.size;++e)this.onStateChange.get_za3lpa$(e)(this)},J_.prototype.fireOnClick_kjsf19$=function(t,e,i){this.isEnabled=!this.isEnabled,o_.prototype.fireOnClick_kjsf19$.call(this,t,e,i)},J_.prototype.setThemeProps_aemszp$=function(t){o_.prototype.setThemeProps_aemszp$.call(this,t),this.knobColorOn=this.root.theme.accentColor,this.trackColorOn=ty().add_m79ulu$(this.root.theme.accentColor,.4)},J_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newToggleButtonUi_r83hfv$(this)},J_.$metadata$={kind:$,simpleName:"ToggleButton",interfaces:[o_]},Q_.prototype.createUi_aemszp$=function(t){var e,i,n;r_.prototype.createUi_aemszp$.call(this,t),this.knobAnimator.speed=0,this.knobAnimator.duration=.15,i=this.knobAnimator.value,e=this.tb.isEnabled?1:0,i.value=e,this.knobAnimator.value.onUpdate=(n=this,function(t){return n.tb.requestUiUpdate(),s});var o=this.tb.onStateChange,r=this.stateChangedListener;o.add_11rb$(r)},Q_.prototype.dispose_aemszp$=function(t){r_.prototype.dispose_aemszp$.call(this,t);var e=this.tb.onStateChange,i=this.stateChangedListener;e.remove_11rb$(i)},Q_.prototype.updateUi_aemszp$=function(t){r_.prototype.updateUi_aemszp$.call(this,t);var e=this.tb.padding.right.toUnits_dleff0$(this.tb.width,this.tb.dpi),i=E_(this.tb,24),n=E_(this.tb,6),o=E_(this.tb,10),r=this.tb.width-e-i-o,s=(this.tb.height-n)/2,a=this.knobAnimator.value.value;this.trackColor.clear(),this.trackColor.add_m79ulu$(this.tb.trackColorOff,1-a),this.trackColor.add_m79ulu$(this.tb.trackColorOn,a),this.meshBuilder.color=this.trackColor;var l=this.meshBuilder,u=new Hz;u.origin.set_y2kzbl$(r,s,E_(this.tb,.1)),u.size.set_dleff0$(i,n),u.cornerRadius=n/2,u.cornerSteps=4,u.zeroTexCoords(),l.rect_e5k3t5$(u),this.knobColor.clear(),this.knobColor.add_m79ulu$(this.tb.knobColorOff,1-a),this.knobColor.add_m79ulu$(this.tb.knobColorOn,a),this.meshBuilder.color=this.knobColor;var p=this.meshBuilder,c=new Dz;c.zeroTexCoords(),c.center.set_y2kzbl$(r+i*a,s+n/2,E_(this.tb,.2)),c.radius=o,c.steps=30,p.circle_59f34t$(c)},Q_.prototype.onRender_aemszp$=function(t){r_.prototype.onRender_aemszp$.call(this,t),this.knobAnimator.tick_aemszp$(t)},Q_.$metadata$={kind:$,simpleName:"ToggleButtonUi",interfaces:[r_]},Object.defineProperty(tm.prototype,"posX",{configurable:!0,get:function(){return this.componentBounds.min.x}}),Object.defineProperty(tm.prototype,"posY",{configurable:!0,get:function(){return this.componentBounds.min.y}}),Object.defineProperty(tm.prototype,"posZ",{configurable:!0,get:function(){return this.componentBounds.min.z}}),Object.defineProperty(tm.prototype,"width",{configurable:!0,get:function(){return this.componentBounds.size.x}}),Object.defineProperty(tm.prototype,"height",{configurable:!0,get:function(){return this.componentBounds.size.y}}),Object.defineProperty(tm.prototype,"depth",{configurable:!0,get:function(){return this.componentBounds.size.z}}),Object.defineProperty(tm.prototype,"padding",{configurable:!0,get:function(){return this.padding_iyk9nn$_0},set:function(t){var e;null!=(e=this.padding_iyk9nn$_0)&&e.equals(t)||(this.padding_iyk9nn$_0=t,this.isUiUpdate_l4k16n$_0=!0)}}),Object.defineProperty(tm.prototype,"alpha",{configurable:!0,get:function(){return this.alpha_e9jtsg$_0},set:function(t){this.alpha_e9jtsg$_0!==t&&(this.alpha_e9jtsg$_0=t,this.updateComponentAlpha())}}),Object.defineProperty(tm.prototype,"dpi",{configurable:!0,get:function(){return this.root.uiDpi}}),tm.prototype.addNode_xtids1$$default=function(t,i){this.addNode_xtids1$(t,i,Id.prototype.addNode_xtids1$$default.bind(this)),e.isType(t,tm)&&(t.alpha=this.alpha)},tm.prototype.setupBuilder_84rojv$=function(t){t.clear(),t.identity(),t.translate_czzhiu$(this.componentBounds.min)},tm.prototype.requestThemeUpdate=function(){this.isThemeUpdate_yv706e$_0=!0},tm.prototype.requestUiUpdate=function(){this.isUiUpdate_l4k16n$_0=!0},tm.prototype.updateComponentAlpha=function(){this.ui.prop.updateComponentAlpha()},tm.prototype.updateUi_aemszp$=function(t){this.ui.prop.updateUi_aemszp$(t)},tm.prototype.updateTheme_aemszp$=function(t){this.ui.prop.dispose_aemszp$(t),this.ui.setTheme_11rb$(this.createThemeUi_aemszp$(t)).apply(),this.setThemeProps_aemszp$(t),this.ui.prop.createUi_aemszp$(t),this.ui.prop.updateComponentAlpha(),this.requestUiUpdate()},tm.prototype.updateComponent_aemszp$=function(t){var i,n;if(this.isThemeUpdate_yv706e$_0&&(this.isThemeUpdate_yv706e$_0=!1,this.updateTheme_aemszp$(t)),this.isUiUpdate_l4k16n$_0)for(this.isUiUpdate_l4k16n$_0=!1,this.updateUi_aemszp$(t),this.isFrustumChecked=this.root.isFrustumChecked,n=this.children.iterator();n.hasNext();)n.next().isFrustumChecked=this.root.isFrustumChecked;this.setDrawBoundsFromWrappedComponentBounds_hf6scw$(e.isType(i=this.parent,om)?i:null,t)},tm.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){if(null!=t){var i=this.componentBounds.min.x,n=t.drawBounds.min.x,o=A.max(i,n),r=this.componentBounds.min.y,s=t.drawBounds.min.y,a=A.max(r,s),l=this.componentBounds.min.z,u=t.drawBounds.min.z,p=A.max(l,u),c=this.componentBounds.max.x,h=t.drawBounds.max.x,d=A.min(c,h),f=this.componentBounds.max.y,_=t.drawBounds.max.y,m=A.min(f,_),$=this.componentBounds.max.z,y=t.drawBounds.max.z,v=A.min($,y);o>=d||a>=m||p>=v?this.drawBounds.clear():this.drawBounds.set_w8lrqs$(o,a,p,d,m,v)}else this.drawBounds.set_ea4od8$(this.componentBounds);this.bounds.set_ea4od8$(this.drawBounds)},tm.prototype.setLocalBounds=function(){this.bounds.set_ea4od8$(this.drawBounds)},tm.prototype.setThemeProps_aemszp$=function(t){},tm.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.componentUi(this)},tm.prototype.collectDrawCommands_kma0q5$=function(t){this.isVisible&&this.alpha>0&&!this.bounds.isEmpty&&(this.ui.prop.onRender_aemszp$(t.ctx),Id.prototype.collectDrawCommands_kma0q5$.call(this,t))},tm.prototype.doLayout_sq5703$=function(t,i){var n;this.componentBounds.isFuzzyEqual_ea4od8$(t)||(this.componentBounds.set_ea4od8$(t),this.requestUiUpdate()),this.setDrawBoundsFromWrappedComponentBounds_hf6scw$(e.isType(n=this.parent,om)?n:null,i)},tm.prototype.rayTest_jljx4v$=function(t){if(0!==this.alpha){var i=t.hitNode;Id.prototype.rayTest_jljx4v$.call(this,t),i===t.hitNode||e.isType(t.hitNode,tm)||t.setHit_ulhqnp$(this,t.hitPosition)}},tm.prototype.computeLocalPickRay_wswg9$=function(t,e,i){var n=this.root.scene.computeRay_wswg9$(t,e,i);return n&&(this.toLocalCoords_w1lst9$(i.origin),this.toLocalCoords_w1lst9$(i.direction,0).norm()),n},tm.$metadata$={kind:$,simpleName:"UiComponent",interfaces:[Id]},Object.defineProperty(om.prototype,"contentBounds",{configurable:!0,get:function(){return this.childrenBounds}}),Object.defineProperty(om.prototype,"scrollOffset",{configurable:!0,get:function(){return this.scrollOffsetMut}}),om.prototype.updateTheme_aemszp$=function(t){var e;tm.prototype.updateTheme_aemszp$.call(this,t),e=this.childComponents_65igag$_0;for(var i=0;i!==e.size;++i)this.childComponents_65igag$_0.get_za3lpa$(i).requestThemeUpdate()},om.prototype.updateComponentAlpha=function(){var t;tm.prototype.updateComponentAlpha.call(this),t=this.childComponents_65igag$_0;for(var e=0;e!==t.size;++e)this.childComponents_65igag$_0.get_za3lpa$(e).alpha=this.alpha},om.prototype.updateComponent_aemszp$=function(t){var e,i;this.isScrollDirty&&(this.isScrollDirty=!1,null!=(e=this.scrollHandler_xer21f$_0)&&e.requestUiUpdate(),this.updateTransform()),tm.prototype.updateComponent_aemszp$.call(this,t),i=this.childComponents_65igag$_0;for(var n=0;n!==i.size;++n)this.childComponents_65igag$_0.get_za3lpa$(n).updateComponent_aemszp$(t)},om.prototype.doLayout_sq5703$=function(t,e){var i;this.applyBounds_sq5703$(t,e),this.contentBounds.clear(),i=this.childComponents_65igag$_0;for(var n=0;n!==i.size;++n){var o=this.childComponents_65igag$_0.get_za3lpa$(n);this.computeChildLayoutBounds_q1axsv$(this.tmpChildBounds_j2uogg$_0,o,e),this.contentBounds.add_ea4od8$(this.tmpChildBounds_j2uogg$_0),o.doLayout_sq5703$(this.tmpChildBounds_j2uogg$_0,e)}},om.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.containerUi(this)},om.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){tm.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$.call(this,t,e),this.drawBounds.isEmpty?this.bounds.clear():(this.drawBounds.move_czzhiu$(this.scrollOffset),this.syncNodeBounds_aemszp$(e))},om.prototype.setLocalBounds=function(){var t;this.childrenBounds.clear(),t=this.childComponents_65igag$_0;for(var e=0;e!==t.size;++e)this.childrenBounds.add_ea4od8$(this.childComponents_65igag$_0.get_za3lpa$(e).componentBounds);this.bounds.set_ea4od8$(this.childrenBounds)},om.prototype.applyBounds_sq5703$=function(t,e){t.size.isFuzzyEqual_2qa7tb$(this.componentBounds.size)&&t.min.isFuzzyEqual_2qa7tb$(this.posInParent)||(this.posInParent.set_czzhiu$(t.min),this.updateTransform(),this.componentBounds.set_4lfkt4$(To().ZERO,t.size),this.drawBounds.set_ea4od8$(this.componentBounds),this.syncNodeBounds_aemszp$(e),this.requestUiUpdate())},om.prototype.syncNodeBounds_aemszp$=function(t){var e,i,n,o,r,s;this.tmpVec1_md9h9y$_0.set_czzhiu$(this.drawBounds.min),this.tmpVec2_md9hat$_0.set_czzhiu$(this.drawBounds.max),this.transform.transform_w1lst9$(this.tmpVec1_md9h9y$_0),this.transform.transform_w1lst9$(this.tmpVec2_md9hat$_0),this.tmpVec1_md9h9y$_0.x<this.tmpVec2_md9hat$_0.x?(e=this.tmpVec1_md9h9y$_0.x,i=this.tmpVec2_md9hat$_0.x):(e=this.tmpVec2_md9hat$_0.x,i=this.tmpVec2_md9hat$_0.x),this.tmpVec1_md9h9y$_0.y<this.tmpVec2_md9hat$_0.y?(n=this.tmpVec1_md9h9y$_0.y,o=this.tmpVec2_md9hat$_0.y):(n=this.tmpVec2_md9hat$_0.y,o=this.tmpVec1_md9h9y$_0.y),this.tmpVec1_md9h9y$_0.z<this.tmpVec2_md9hat$_0.z?(r=this.tmpVec1_md9h9y$_0.z,s=this.tmpVec2_md9hat$_0.z):(r=this.tmpVec2_md9hat$_0.z,s=this.tmpVec1_md9h9y$_0.z),this.bounds.set_w8lrqs$(e,n,r,i,o,s)},om.prototype.updateTransform=function(){this.customTransform(this.setIdentity().scale_y2kzbl$(this.contentScale,this.contentScale,this.contentScale).translate_czzhiu$(this.posInParent).translate_y2kzbl$(-this.scrollOffsetMut.x,-this.scrollOffsetMut.y,-this.scrollOffsetMut.z))},om.prototype.computeChildLayoutBounds_q1axsv$=function(t,e,i){var n=e.layoutSpec.x.toUnits_dleff0$(this.componentBounds.size.x,this.dpi),o=e.layoutSpec.y.toUnits_dleff0$(this.componentBounds.size.y,this.dpi),r=e.layoutSpec.z.toUnits_dleff0$(this.componentBounds.size.z,this.dpi),s=e.layoutSpec.width.toUnits_dleff0$(this.componentBounds.size.x,this.dpi),a=e.layoutSpec.height.toUnits_dleff0$(this.componentBounds.size.y,this.dpi),l=e.layoutSpec.depth.toUnits_dleff0$(this.componentBounds.size.z,this.dpi);n<0&&(n+=this.width),o<0&&(o+=this.height),r<0&&(r+=this.depth),t.set_w8lrqs$(n,o,r,n+s,o+a,r+l)},om.prototype.setScrollOffset_czzhiu$=function(t){this.setScrollOffset_y2kzbl$(t.x,t.y,t.z)},om.prototype.setScrollOffset_y2kzbl$=function(t,e,i){t===this.scrollOffsetMut.x&&e===this.scrollOffsetMut.y&&i===this.scrollOffsetMut.z||(this.scrollOffsetMut.set_y2kzbl$(t,e,i),this.isScrollDirty=!0)},om.prototype.requestUpdateTransform=function(){this.isScrollDirty=!0},om.prototype.addNode_xtids1$$default=function(t,i){var n=!this.children.isEmpty()&&i<0&&e.isType(F(this.children),B_)?bt(this.children):i;this.addNode_xtids1$(t,n,tm.prototype.addNode_xtids1$$default.bind(this)),e.isType(t,tm)&&(this.childComponents_65igag$_0.add_11rb$(t),e.isType(t,B_)&&(this.scrollHandler_xer21f$_0=t))},om.prototype.removeNode_f1kmr1$=function(t){return e.isType(t,tm)&&(this.childComponents_65igag$_0.remove_11rb$(t),zt(t,this.scrollHandler_xer21f$_0)&&(this.scrollHandler_xer21f$_0=null)),tm.prototype.removeNode_f1kmr1$.call(this,t)},om.prototype.removeAllChildren=function(){tm.prototype.removeAllChildren.call(this),this.childComponents_65igag$_0.clear(),this.scrollHandler_xer21f$_0=null},om.$metadata$={kind:$,simpleName:"UiContainer",interfaces:[tm]},Object.defineProperty(lm.prototype,"globalWidth",{configurable:!0,get:function(){return this.globalWidth_rlfw80$_0},set:function(t){t!==this.globalWidth_rlfw80$_0&&(this.globalWidth_rlfw80$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(lm.prototype,"globalHeight",{configurable:!0,get:function(){return this.globalHeight_5sxs8p$_0},set:function(t){t!==this.globalHeight_5sxs8p$_0&&(this.globalHeight_5sxs8p$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(lm.prototype,"globalDepth",{configurable:!0,get:function(){return this.globalDepth_ijlk77$_0},set:function(t){t!==this.globalDepth_ijlk77$_0&&(this.globalDepth_ijlk77$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(lm.prototype,"isFillViewport",{configurable:!0,get:function(){return this.isFillViewport_fr53nm$_0},set:function(t){t!==this.isFillViewport_fr53nm$_0&&(this.isFillViewport_fr53nm$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(lm.prototype,"theme",{configurable:!0,get:function(){return this.theme_208sxy$_0},set:function(t){zt(t,this.theme_208sxy$_0)||(this.theme_208sxy$_0=t,this.content.requestThemeUpdate())}}),Object.defineProperty(lm.prototype,"contentHeight",{configurable:!0,get:function(){return this.contentHeight_17xsyl$_0},set:function(t){this.contentHeight_17xsyl$_0=t,this.isLayoutNeeded_0=!0}}),Object.defineProperty(lm.prototype,"bounds",{configurable:!0,get:function(){return this.content.bounds}}),lm.prototype.setGlobalSize_y2kzbl$=function(t,e,i){this.isFillViewport=!1,this.globalWidth=t,this.globalHeight=e,this.globalDepth=i},lm.prototype.requestLayout=function(){this.isLayoutNeeded_0=!0},lm.prototype.update_kma0q5$=function(t){var e=this.scene.mainRenderPass.viewport;if(!this.isFillViewport||this.globalWidth===e.width&&this.globalHeight===e.height||(this.globalWidth=e.width,this.globalHeight=e.height),this.isLayoutNeeded_0){this.isLayoutNeeded_0=!1;var i=1,n=this.contentHeight;null!=n&&(i=1/(n.toUnits_dleff0$(this.globalHeight,this.uiDpi)/this.globalHeight));var o=(new q$).set_w8lrqs$(0,0,0,this.globalWidth/i,this.globalHeight/i,this.globalDepth/i);this.content.contentScale=i,this.content.doLayout_sq5703$(o,t.ctx)}this.content.update_kma0q5$(t),sf.prototype.update_kma0q5$.call(this,t),this.content.updateComponent_aemszp$(t.ctx)},lm.prototype.collectDrawCommands_kma0q5$=function(t){sf.prototype.collectDrawCommands_kma0q5$.call(this,t),this.content.collectDrawCommands_kma0q5$(t)},lm.prototype.dispose_aemszp$=function(t){sf.prototype.dispose_aemszp$.call(this,t),this.content.dispose_aemszp$(t)},lm.prototype.rayTest_jljx4v$=function(t){sf.prototype.rayTest_jljx4v$.call(this,t),this.content.rayTest_jljx4v$(t)},lm.prototype.unaryPlus_uv0sim$=function(t){this.content.addNode_xtids1$(t)},lm.prototype.unaryPlus_63m4fk$=function(t){this.content.addNode_xtids1$(t),this.content.addNode_xtids1$(t.menuButton_8be2vx$)},lm.prototype.component_qphi6d$=function(t,e){var i=new tm(t,this);return e(i),i},lm.prototype.container_t34sov$=function(t,e){var i=new om(t,this);return e(i),i},lm.prototype.drawerMenu_enmky4$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=z_(250,!0));var o=new p_(i,e,t,this);return n(o),o},lm.prototype.button_9zrh0o$=function(t,e){var i=new o_(t,this);return e(i),i},lm.prototype.label_tokfmu$=function(t,e){var i=new h_(t,this);return e(i),i},lm.prototype.slider_87iqh3$=function(t,e){return this.slider_91a1dk$(t,0,100,50,e)},lm.prototype.slider_91a1dk$=function(t,e,i,n,o){var r=new V_(t,e,i,n,this);return o(r),r},lm.prototype.textField_peizi7$=function(t,e){var i=new H_(t,this);return e(i),i},lm.prototype.toggleButton_6j87po$=function(t,e){var i=new J_(t,this);return e(i),i},lm.$metadata$={kind:$,simpleName:"UiRoot",interfaces:[sf]},Object.defineProperty(um.prototype,"alpha",{configurable:!0,get:function(){return this.alpha_dkua5e$_0},set:function(t){var e,i;this.alpha_dkua5e$_0=t,null!=(i=null!=(e=this.uAlpha_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(um.prototype,"font",{configurable:!0,get:function(){return this.font_1rx0e3$_0},set:function(t){var e;this.font_1rx0e3$_0=t,null!=(e=this.uFontSampler_0)&&(e.texture=t)}}),um.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.blendMode=al(),t.cullMethod=zl(),t.depthTest=fl(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},um.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p=this.model,h=hm().U_ALPHA_0;t:do{var d;for(l=Vp.ALL,d=p.stages.values.iterator();d.hasNext();){var f=d.next();if(0!=(f.stage.mask&l.mask)){var _,m,$=f.nodes;e:do{var y;for(y=$.iterator();y.hasNext();){var v=y.next();if(zt(v.name,h)&&e.isType(v,dp)){m=v;break e}}m=null}while(0);var g=null==(_=m)||e.isType(_,dp)?_:c();if(null!=g){u=g;break t}}}u=null}while(0);this.uAlpha_0=u,null!=(r=null!=(o=this.uAlpha_0)?o.uniform:null)&&(r.value=this.alpha);var b,x,w=this.model,z=hm().U_FONT_TEX_0;t:do{var k;for(b=Vp.ALL,k=w.stages.values.iterator();k.hasNext();){var S=k.next();if(0!=(S.stage.mask&b.mask)){var C,N,E=S.nodes;e:do{var T;for(T=E.iterator();T.hasNext();){var P=T.next();if(zt(P.name,z)&&e.isType(P,up)){N=P;break e}}N=null}while(0);var O=null==(C=N)||e.isType(C,up)?C:c();if(null!=O){x=O;break t}}}x=null}while(0);this.uFontSampler_0=null!=(s=x)?s.sampler:null,null!=(a=this.uFontSampler_0)&&(a.texture=this.font),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},pm.prototype.uiShaderModel_0=function(){var t=new Iu("UI Shader"),e={v:null},i={v:null},n=new Lu(t);e.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),i.v=n.stageInterfaceNode_iikjwn$("ifColors",n.attrColors().output),n.positionOutput=n.simpleVertexPositionNode().outVec4;var o=new Du(t),r=o.pushConstantNode1f_61zpoe$(this.U_ALPHA_0),s=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$(this.U_FONT_TEX_0),e.v.output),a=o.multiplyNode_ze33is$(s.outColor,r.output),l=o.colorAlphaNode_ze33is$(i.v.output,a.output);return o.colorOutput_a3v4si$(o.unlitMaterialNode_r20yfm$(l.outAlphaColor).outColor),t},pm.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var cm=null;function hm(){return null===cm&&new pm,cm}function dm(){gm(),this.backgroundColor_yt8dmb$_0=J$().BLACK,this.foregroundColor_sxfy5a$_0=J$().WHITE,this.accentColor_2rzgrt$_0=J$().LIME,this.standardFontProps_v4eg6a$_0=new zv(Nv().SYSTEM_FONT,20),this.titleFontProps_idgbxl$_0=new zv(Nv().SYSTEM_FONT,28),this.componentUi_rare29$_0=Kt("BlurredComponentUi",(function(t){return new u_(t)})),this.containerUi_233tf$_0=bm,this.buttonUi_667cek$_0=Kt("ButtonUi",(function(t,e){return new r_(t,e)})),this.labelUi_9aobqe$_0=Kt("LabelUi",(function(t,e){return new d_(t,e)})),this.scrollHandlerUi_k8xkq9$_0=Kt("ScrollHandlerUi",(function(t){return new U_(t)})),this.sliderUi_76d1mr$_0=Kt("SliderUi",(function(t,e){return new G_(t,e)})),this.textFieldUi_fr4mch$_0=Kt("TextFieldUi",(function(t,e){return new W_(t,e)})),this.toggleButtonUi_2tk5m0$_0=Kt("ToggleButtonUi",(function(t,e){return new Q_(t,e)}))}function fm(){vm=this,this.DARK=zm(void 0,_m),this.DARK_SIMPLE=zm(this.DARK,mm),this.LIGHT=zm(void 0,$m),this.LIGHT_SIMPLE=zm(this.LIGHT,ym)}function _m(t){return t.backgroundColor_d7aj7k$(J$().fromHex_61zpoe$("00141980")),t.foregroundColor_d7aj7k$(J$().WHITE),t.accentColor_d7aj7k$(J$().LIME),s}function mm(t){return t.componentUi_mloaa0$(Kt("SimpleComponentUi",(function(t){return new l_(t)}))),s}function $m(t){return t.backgroundColor_d7aj7k$(J$().WHITE.withAlpha_mx4ult$(.6)),t.foregroundColor_d7aj7k$(J$().MD_BLUE_GREY_900),t.accentColor_d7aj7k$(J$().MD_PINK),s}function ym(t){return t.componentUi_mloaa0$(Kt("SimpleComponentUi",(function(t){return new l_(t)}))),s}um.$metadata$={kind:$,simpleName:"UiShader",interfaces:[lc]},Object.defineProperty(dm.prototype,"backgroundColor",{configurable:!0,get:function(){return this.backgroundColor_yt8dmb$_0},set:function(t){this.backgroundColor_yt8dmb$_0=t}}),Object.defineProperty(dm.prototype,"foregroundColor",{configurable:!0,get:function(){return this.foregroundColor_sxfy5a$_0},set:function(t){this.foregroundColor_sxfy5a$_0=t}}),Object.defineProperty(dm.prototype,"accentColor",{configurable:!0,get:function(){return this.accentColor_2rzgrt$_0},set:function(t){this.accentColor_2rzgrt$_0=t}}),dm.prototype.standardFont_oei9ky$=function(t,e){return wv(this.standardFontProps.family,this.standardFontProps.sizePts,t,e,this.standardFontProps.style,this.standardFontProps.chars)},Object.defineProperty(dm.prototype,"standardFontProps",{configurable:!0,get:function(){return this.standardFontProps_v4eg6a$_0},set:function(t){this.standardFontProps_v4eg6a$_0=t}}),dm.prototype.titleFont_oei9ky$=function(t,e){return wv(this.titleFontProps.family,this.titleFontProps.sizePts,t,e,this.titleFontProps.style,this.titleFontProps.chars)},Object.defineProperty(dm.prototype,"titleFontProps",{configurable:!0,get:function(){return this.titleFontProps_idgbxl$_0},set:function(t){this.titleFontProps_idgbxl$_0=t}}),dm.prototype.newComponentUi_gzmg0q$=function(t){return this.componentUi(t)},Object.defineProperty(dm.prototype,"componentUi",{configurable:!0,get:function(){return this.componentUi_rare29$_0},set:function(t){this.componentUi_rare29$_0=t}}),dm.prototype.newContainerUi_xcf31a$=function(t){return this.containerUi(t)},Object.defineProperty(dm.prototype,"containerUi",{configurable:!0,get:function(){return this.containerUi_233tf$_0},set:function(t){this.containerUi_233tf$_0=t}}),dm.prototype.newButtonUi_t4rm0v$=function(t){return this.buttonUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(dm.prototype,"buttonUi",{configurable:!0,get:function(){return this.buttonUi_667cek$_0},set:function(t){this.buttonUi_667cek$_0=t}}),dm.prototype.newLabelUi_wviu0r$=function(t){return this.labelUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(dm.prototype,"labelUi",{configurable:!0,get:function(){return this.labelUi_9aobqe$_0},set:function(t){this.labelUi_9aobqe$_0=t}}),dm.prototype.newScrollHandlerUi_dz938y$=function(t){return this.scrollHandlerUi(t)},Object.defineProperty(dm.prototype,"scrollHandlerUi",{configurable:!0,get:function(){return this.scrollHandlerUi_k8xkq9$_0},set:function(t){this.scrollHandlerUi_k8xkq9$_0=t}}),dm.prototype.newSliderUi_l85jm8$=function(t){return this.sliderUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(dm.prototype,"sliderUi",{configurable:!0,get:function(){return this.sliderUi_76d1mr$_0},set:function(t){this.sliderUi_76d1mr$_0=t}}),dm.prototype.newTextFieldUi_p39bdq$=function(t){return this.textFieldUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(dm.prototype,"textFieldUi",{configurable:!0,get:function(){return this.textFieldUi_fr4mch$_0},set:function(t){this.textFieldUi_fr4mch$_0=t}}),dm.prototype.newToggleButtonUi_r83hfv$=function(t){return this.toggleButtonUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(dm.prototype,"toggleButtonUi",{configurable:!0,get:function(){return this.toggleButtonUi_2tk5m0$_0},set:function(t){this.toggleButtonUi_2tk5m0$_0=t}}),fm.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vm=null;function gm(){return null===vm&&new fm,vm}function bm(t){return new a_}function xm(t,e){return t.root.theme.standardFont_oei9ky$(t.dpi,e)}function wm(t,e){return t.root.theme.titleFont_oei9ky$(t.dpi,e)}function zm(t,e){void 0===t&&(t=null);var i=new km(t);return e(i),i}function km(t){dm.call(this),null!=t&&(this.backgroundColor=t.backgroundColor,this.foregroundColor=t.foregroundColor,this.accentColor=t.accentColor,this.standardFontProps=t.standardFontProps,this.titleFontProps=t.titleFontProps,this.componentUi=t.componentUi,this.containerUi=t.containerUi,this.buttonUi=t.buttonUi,this.labelUi=t.labelUi,this.scrollHandlerUi=t.scrollHandlerUi,this.sliderUi=t.sliderUi,this.textFieldUi=t.textFieldUi,this.toggleButtonUi=t.toggleButtonUi)}function Sm(t){this.prop_5ushja$_0=t,this.themeVal_jacv1h$_0=t,this.isThemeSet_n9zltm$_0=!1,this.customVal_5f7u1l$_0=t,this.isCustom_s2c3c2$_0=!1}function Cm(t){this.name=t,this.channels=M(),this.weight=1,this.speed=1,this.duration_dwtdbj$_0=1,this.animationNodes_0=M()}function Nm(t,e){this.name=t,this.animationNode=e,this.keys=new xS,this.duration=0}function Em(t,e){Nm.call(this,t,e)}function Tm(t,e){Nm.call(this,t,e)}function Pm(t,e){Nm.call(this,t,e)}function Om(t,e){Nm.call(this,t,e)}function Mm(){}function jm(t){this.target=t,this.initTranslation_0=Uo(),this.initRotation_0=cr(),this.initScale_0=new Bo(1,1,1),this.animTranslation_0=Uo(),this.animRotation_0=cr(),this.animScale_0=Uo(),this.quatRotMat_0=new bn,this.weightedTransformMat_0=new bn;var e=cr();this.target.transform.getCol_8irwu3$(3,e),this.initTranslation_0.set_yvo9jy$(e.x,e.y,e.z),this.target.transform.getRotation_5s4mpx$(this.initRotation_0);var i=this.target.transform.getCol_8irwu3$(0,e).length(),n=this.target.transform.getCol_8irwu3$(0,e).length(),o=this.target.transform.getCol_8irwu3$(0,e).length();this.initScale_0.set_yvo9jy$(i,n,o)}function Am(t){this.target=t,this.weights_0=new Float32Array(1)}function Im(t){this.time=t,this.interpolation=Fm()}function Rm(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Lm(){Lm=function(){},new Dm,new Bm,new Gm}function Dm(){qm=this,Rm.call(this,"LINEAR",0)}dm.$metadata$={kind:$,simpleName:"UiTheme",interfaces:[]},km.prototype.backgroundColor_d7aj7k$=function(t){this.backgroundColor=t},km.prototype.foregroundColor_d7aj7k$=function(t){this.foregroundColor=t},km.prototype.accentColor_d7aj7k$=function(t){this.accentColor=t},km.prototype.standardFont_ttufcy$=function(t){this.standardFontProps=t},km.prototype.titleFont_ttufcy$=function(t){this.titleFontProps=t},km.prototype.componentUi_mloaa0$=function(t){this.componentUi=t},km.prototype.containerUi_2t3ptw$=function(t){this.containerUi=t},km.prototype.buttonUi_layl6g$=function(t){this.buttonUi=t},km.prototype.labelUi_zicoma$=function(t){this.labelUi=t},km.prototype.scrollHandlerUi_4p1ygc$=function(t){this.scrollHandlerUi=t},km.prototype.sliderUi_artm94$=function(t){this.sliderUi=t},km.prototype.textFieldUi_5ax6ok$=function(t){this.textFieldUi=t},km.prototype.toggleButtonUi_50ge0o$=function(t){this.toggleButtonUi=t},km.$metadata$={kind:$,simpleName:"ThemeBuilder",interfaces:[dm]},Object.defineProperty(Sm.prototype,"prop",{configurable:!0,get:function(){return this.prop_5ushja$_0},set:function(t){this.prop_5ushja$_0=t}}),Object.defineProperty(Sm.prototype,"themeVal",{configurable:!0,get:function(){return this.themeVal_jacv1h$_0},set:function(t){this.themeVal_jacv1h$_0=t}}),Object.defineProperty(Sm.prototype,"isThemeSet",{configurable:!0,get:function(){return this.isThemeSet_n9zltm$_0},set:function(t){this.isThemeSet_n9zltm$_0=t}}),Object.defineProperty(Sm.prototype,"customVal",{configurable:!0,get:function(){return this.customVal_5f7u1l$_0},set:function(t){this.customVal_5f7u1l$_0=t}}),Object.defineProperty(Sm.prototype,"isCustom",{configurable:!0,get:function(){return this.isCustom_s2c3c2$_0},set:function(t){this.isCustom_s2c3c2$_0=t}}),Object.defineProperty(Sm.prototype,"isUpdate",{configurable:!0,get:function(){return this.isCustom&&!zt(this.prop,this.customVal)||!this.isCustom&&this.isThemeSet&&!zt(this.prop,this.themeVal)}}),Sm.prototype.setTheme_11rb$=function(t){return this.themeVal=t,this.isThemeSet=!0,this},Sm.prototype.setCustom_11rb$=function(t){return this.customVal=t,this.isCustom=!0,this},Sm.prototype.clearCustom=function(){this.isCustom=!1},Sm.prototype.apply=function(){return this.isCustom?this.prop=this.customVal:this.isThemeSet&&(this.prop=this.themeVal),this.prop},Sm.$metadata$={kind:$,simpleName:"ThemeOrCustomProp",interfaces:[]},Object.defineProperty(Cm.prototype,"duration",{configurable:!0,get:function(){return this.duration_dwtdbj$_0},set:function(t){this.duration_dwtdbj$_0=t}}),Cm.prototype.prepareAnimation=function(){var t,e,i,n=this.channels,o=w(j(n,10));for(e=n.iterator();e.hasNext();){var r=e.next();o.add_11rb$(r.lastKeyTime)}for(this.duration=null!=(t=Xt(o))?t:0,i=this.channels.iterator();i.hasNext();)i.next().duration=this.duration;var s,a=this.animationNodes_0,l=this.channels,u=w(j(l,10));for(s=l.iterator();s.hasNext();){var p=s.next();u.add_11rb$(p.animationNode)}xt(a,Yt(u))},Cm.prototype.apply_8555vt$=function(t,e){var i,n,o,r;void 0===e&&(e=!0);var s=t*this.speed%this.duration;i=this.animationNodes_0;for(var a=0;a!==i.size;++a)this.animationNodes_0.get_za3lpa$(a).initTransform();n=this.channels;for(var l=0;l!==n.size;++l)this.channels.get_za3lpa$(l).apply_mx4ult$(s);if(1===this.weight){o=this.animationNodes_0;for(var u=0;u!==o.size;++u)this.animationNodes_0.get_za3lpa$(u).applyTransform()}else{r=this.animationNodes_0;for(var p=0;p!==r.size;++p)this.animationNodes_0.get_za3lpa$(p).applyTransformWeighted_8ca0d4$(this.weight,e)}},Cm.prototype.printChannels=function(){var t;for(jt(Ct(this.name)+" channels:"),t=this.channels.iterator();t.hasNext();){var e=t.next();jt("  "+Ct(e.name)+" [node: "+Ct(e.animationNode.name)+"]"),e.printKeys_61zpoe$("    ")}},Cm.$metadata$={kind:$,simpleName:"Animation",interfaces:[]},Object.defineProperty(Nm.prototype,"lastKeyTime",{configurable:!0,get:function(){return this.keys.lastKey()}}),Nm.prototype.apply_mx4ult$=function(t){var e=this.keys.floorValue_trkh7z$(t);if(null==e){var i,n=this.lastKeyTime,o=this.duration;i=LN.FUZZY_EQ_F;var r=n-o;e=A.abs(r)<=i?this.keys.lastValue():this.keys.firstValue()}e.apply_8kwor9$(t,this.keys.higherValue_trkh7z$(t),this.animationNode)},Nm.prototype.printKeys_61zpoe$=function(t){var e;void 0===t&&(t="");var i=Zt(this.keys.values),n=i.size;e=A.min(5,n);for(var o=0;o<e;o++)jt(t+i.get_za3lpa$(o));i.size>5&&jt(t+"  ..."+(i.size-5|0)+" more")},Nm.$metadata$={kind:$,simpleName:"AnimationChannel",interfaces:[]},Em.$metadata$={kind:$,simpleName:"TranslationAnimationChannel",interfaces:[Nm]},Tm.$metadata$={kind:$,simpleName:"RotationAnimationChannel",interfaces:[Nm]},Pm.$metadata$={kind:$,simpleName:"ScaleAnimationChannel",interfaces:[Nm]},Om.$metadata$={kind:$,simpleName:"WeightAnimationChannel",interfaces:[Nm]},Mm.prototype.initTransform=function(){},Mm.prototype.setTranslation_czzhiw$=function(t){},Mm.prototype.setRotation_czzhi1$=function(t){},Mm.prototype.setScale_czzhiw$=function(t){},Mm.prototype.setWeights_q3cr5i$=function(t){},Mm.$metadata$={kind:st,simpleName:"AnimationNode",interfaces:[]},Object.defineProperty(jm.prototype,"name",{configurable:!0,get:function(){return this.target.name}}),jm.prototype.initTransform=function(){this.animTranslation_0.set_czzhiw$(this.initTranslation_0),this.animRotation_0.set_czzhi1$(this.initRotation_0),this.animScale_0.set_czzhiw$(this.initScale_0)},jm.prototype.applyTransform=function(){this.target.setIdentity(),this.target.translate_czzhiw$(this.animTranslation_0),this.target.mul_d4zu6l$(this.quatRotMat_0.setRotate_czzhi1$(this.animRotation_0)),this.target.scale_yvo9jy$(this.animScale_0.x,this.animScale_0.y,this.animScale_0.z)},jm.prototype.applyTransformWeighted_8ca0d4$=function(t,e){if(this.weightedTransformMat_0.setIdentity(),this.weightedTransformMat_0.translate_czzhiw$(this.animTranslation_0),this.weightedTransformMat_0.mul_d4zu6l$(this.quatRotMat_0.setRotate_czzhi1$(this.animRotation_0)),this.weightedTransformMat_0.scale_yvo9jy$(this.animScale_0.x,this.animScale_0.y,this.animScale_0.z),e)for(var i=0;i<=15;i++)this.target.transform.matrix[i]=this.weightedTransformMat_0.matrix[i]*t;else for(var n=0;n<=15;n++)this.target.transform.matrix[n]=this.target.transform.matrix[n]+this.weightedTransformMat_0.matrix[n]*t;this.target.setDirty()},jm.prototype.setTranslation_czzhiw$=function(t){this.animTranslation_0.set_czzhiw$(t)},jm.prototype.setRotation_czzhi1$=function(t){this.animRotation_0.set_czzhi1$(t)},jm.prototype.setScale_czzhiw$=function(t){this.animScale_0.set_czzhiw$(t)},jm.$metadata$={kind:$,simpleName:"AnimatedTransformGroup",interfaces:[Mm]},Object.defineProperty(Am.prototype,"name",{configurable:!0,get:function(){return this.target.name}}),Am.prototype.applyTransform=function(){this.target.morphWeights=this.weights_0},Am.prototype.applyTransformWeighted_8ca0d4$=function(t,e){var i,n=this.target.morphWeights;null!=n&&n.length===this.weights_0.length||(n=new Float32Array(this.weights_0.length),this.target.morphWeights=n),i=this.weights_0;for(var o=0;o!==i.length;++o)n[o]=e?this.weights_0[o]*t:n[o]+this.weights_0[o]*t},Am.prototype.setWeights_q3cr5i$=function(t){this.weights_0.length!==t.length&&(this.weights_0=new Float32Array(t.length));for(var e=0;e!==t.length;++e)this.weights_0[e]=t[e]},Am.$metadata$={kind:$,simpleName:"MorphAnimatedMesh",interfaces:[Mm]},Im.prototype.interpolationPos_dleff0$=function(t,e){var i;if(this.time!==e){var n=this.time<e?this.time:0;i=this.interpolation.getInterpolationPos_mx4ult$((t-n)/(e-n))}else i=0;return i},Im.prototype.toString=function(){return gd(this.time,2)+" -> ["+this.interpolation+"]"},Dm.prototype.getInterpolationPos_mx4ult$=function(t){return t},Dm.$metadata$={kind:$,simpleName:"LINEAR",interfaces:[Rm]};var qm=null;function Fm(){return Lm(),qm}function Bm(){Um=this,Rm.call(this,"STEP",1)}Bm.prototype.getInterpolationPos_mx4ult$=function(t){return 0},Bm.$metadata$={kind:$,simpleName:"STEP",interfaces:[Rm]};var Um=null;function Vm(){return Lm(),Um}function Gm(){Hm=this,Rm.call(this,"CUBICSPLINE",2)}Gm.prototype.getInterpolationPos_mx4ult$=function(t){return t},Gm.$metadata$={kind:$,simpleName:"CUBICSPLINE",interfaces:[Rm]};var Hm=null;function Wm(){return Lm(),Hm}function Km(t,e){Im.call(this,t),this.rotation=e,this.tmpRotation_2somu9$_0=cr(),this.qa_lcvm40$_0=cr(),this.qb_lcvm4v$_0=cr(),this.qc_lcvm5q$_0=cr()}function Xm(t,e,i,n){Km.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=cr(),this.p1_0=cr(),this.m0_0=cr(),this.m1_0=cr()}function Ym(t,e){Im.call(this,t),this.translation=e,this.tmpTranslation_1fj65v$_0=Uo()}function Zm(t,e,i,n){Ym.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=Uo(),this.p1_0=Uo(),this.m0_0=Uo(),this.m1_0=Uo()}function Jm(t,e){Im.call(this,t),this.scale=e,this.tmpScale_fz7pzv$_0=Uo()}function Qm(t,e,i,n){Jm.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=Uo(),this.p1_0=Uo(),this.m0_0=Uo(),this.m1_0=Uo()}function t$(t,e){Im.call(this,t),this.weights=e,this.tmpW=new Float32Array(1)}function e$(t,e,i,n){t$.call(this,t,e),this.startTan=i,this.endTan=n}function i$(t){r$(),this.value=t,this.duration=1,this.speed=1,this.repeating=r$().ONCE,this.progress=0}function n$(){o$=this,this.ONCE=1,this.REPEAT=2,this.REPEAT_TOGGLE_DIR=3}Rm.$metadata$={kind:$,simpleName:"Interpolation",interfaces:[T]},Rm.values=function(){return[Fm(),Vm(),Wm()]},Rm.valueOf_61zpoe$=function(t){switch(t){case"LINEAR":return Fm();case"STEP":return Vm();case"CUBICSPLINE":return Wm();default:P("No enum constant de.fabmax.kool.util.animation.AnimationKey.Interpolation."+t)}},Im.$metadata$={kind:$,simpleName:"AnimationKey",interfaces:[]},Km.prototype.apply_8kwor9$=function(t,e,i){null==e?this.tmpRotation_2somu9$_0.set_czzhi1$(this.rotation):this.slerp_6dcy83$_0(this.rotation,e.rotation,this.interpolationPos_dleff0$(t,e.time),this.tmpRotation_2somu9$_0),i.setRotation_czzhi1$(this.tmpRotation_2somu9$_0)},Km.prototype.toString=function(){return gd(this.time,2)+" -> rotation: "+this.rotation+" ["+this.interpolation+"]"},Km.prototype.slerp_6dcy83$_0=function(t,e,i,n){t.norm_5s4mpx$(this.qa_lcvm40$_0),e.norm_5s4mpx$(this.qb_lcvm4v$_0);var o=i<0?0:i>1?1:i,r=this.qa_lcvm40$_0.dot_czzhi1$(this.qb_lcvm4v$_0),s=r<-1?-1:r>1?1:r;if(s<0&&(this.qa_lcvm40$_0.scale_14dthe$(-1),s=-s),s>.9999995)this.qb_lcvm4v$_0.subtract_2x9ggw$(this.qa_lcvm40$_0,n).scale_14dthe$(o).add_czzhi1$(this.qa_lcvm40$_0).norm();else{var a=s,l=A.acos(a)*o;this.qa_lcvm40$_0.scale_b0flav$(-s,this.qc_lcvm5q$_0).add_czzhi1$(this.qb_lcvm4v$_0).norm(),this.qa_lcvm40$_0.scale_14dthe$(A.cos(l)),this.qc_lcvm5q$_0.scale_14dthe$(A.sin(l)),n.set_czzhi1$(this.qa_lcvm40$_0).add_czzhi1$(this.qc_lcvm5q$_0)}return n},Km.$metadata$={kind:$,simpleName:"RotationKey",interfaces:[Im]},Xm.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setRotation_czzhi1$(this.rotation);else{var n=this.interpolationPos_dleff0$(t,e.time),o=n*n,r=n*n*n,s=2*r-3*o+1,a=r-2*o+n,l=-2*r+3*o,u=r-o;this.p0_0.set_czzhi1$(this.rotation).scale_14dthe$(s),this.m0_0.set_czzhi1$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhi1$(e.rotation).scale_14dthe$(l),this.m1_0.set_czzhi1$(this.endTan).scale_14dthe$(u),i.setRotation_czzhi1$(this.p0_0.add_czzhi1$(this.m0_0).add_czzhi1$(this.p1_0).add_czzhi1$(this.m1_0).norm())}},Xm.$metadata$={kind:$,simpleName:"CubicRotationKey",interfaces:[Km]},Ym.prototype.apply_8kwor9$=function(t,e,i){null==e?i.setTranslation_czzhiw$(this.translation):(e.translation.subtract_vgki2o$(this.translation,this.tmpTranslation_1fj65v$_0).scale_14dthe$(this.interpolationPos_dleff0$(t,e.time)).add_czzhiw$(this.translation),i.setTranslation_czzhiw$(this.tmpTranslation_1fj65v$_0))},Ym.prototype.toString=function(){return gd(this.time,2)+" -> translation: "+this.translation+" ["+this.interpolation+"]"},Ym.$metadata$={kind:$,simpleName:"TranslationKey",interfaces:[Im]},Zm.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setTranslation_czzhiw$(this.translation);else{var n=this.interpolationPos_dleff0$(t,e.time),o=n*n,r=n*n*n,s=2*r-3*o+1,a=r-2*o+n,l=-2*r+3*o,u=r-o;this.p0_0.set_czzhiw$(this.translation).scale_14dthe$(s),this.m0_0.set_czzhiw$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhiw$(e.translation).scale_14dthe$(l),this.m1_0.set_czzhiw$(this.endTan).scale_14dthe$(u),i.setTranslation_czzhiw$(this.p0_0.add_czzhiw$(this.m0_0).add_czzhiw$(this.p1_0).add_czzhiw$(this.m1_0))}},Zm.$metadata$={kind:$,simpleName:"CubicTranslationKey",interfaces:[Ym]},Jm.prototype.apply_8kwor9$=function(t,e,i){null==e?i.setScale_czzhiw$(this.scale):(e.scale.subtract_vgki2o$(this.scale,this.tmpScale_fz7pzv$_0).scale_14dthe$(this.interpolationPos_dleff0$(t,e.time)).add_czzhiw$(this.scale),i.setScale_czzhiw$(this.tmpScale_fz7pzv$_0))},Jm.prototype.toString=function(){return gd(this.time,2)+" -> scale: "+this.scale+" ["+this.interpolation+"]"},Jm.$metadata$={kind:$,simpleName:"ScaleKey",interfaces:[Im]},Qm.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setScale_czzhiw$(this.scale);else{var n=this.interpolationPos_dleff0$(t,e.time),o=n*n,r=n*n*n,s=2*r-3*o+1,a=r-2*o+n,l=-2*r+3*o,u=r-o;this.p0_0.set_czzhiw$(this.scale).scale_14dthe$(s),this.m0_0.set_czzhiw$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhiw$(e.scale).scale_14dthe$(l),this.m1_0.set_czzhiw$(this.endTan).scale_14dthe$(u),i.setScale_czzhiw$(this.p0_0.add_czzhiw$(this.m0_0).add_czzhiw$(this.p1_0).add_czzhiw$(this.m1_0))}},Qm.$metadata$={kind:$,simpleName:"CubicScaleKey",interfaces:[Jm]},t$.prototype.apply_8kwor9$=function(t,e,i){var n,o;if(this.tmpW.length!==this.weights.length&&(this.tmpW=new Float32Array(this.weights.length)),null==e){n=this.weights;for(var r=0;r!==n.length;++r)this.tmpW[r]=this.weights[r]}else{o=this.weights;for(var s=0;s!==o.length;++s)this.tmpW[s]=(e.weights[s]-this.weights[s])*this.interpolationPos_dleff0$(t,e.time)+this.weights[s]}i.setWeights_q3cr5i$(this.tmpW)},t$.prototype.toString=function(){return gd(this.time,2)+" -> weight: ("+Jt(this.weights,", ")+") ["+this.interpolation+"]"},t$.$metadata$={kind:$,simpleName:"WeightKey",interfaces:[Im]},e$.prototype.apply_8kwor9$=function(t,e,i){var n,o;if(this.tmpW.length!==this.weights.length&&(this.tmpW=new Float32Array(this.weights.length)),null==e){n=this.weights;for(var r=0;r!==n.length;++r)this.tmpW[r]=this.weights[r]}else{var s=this.interpolationPos_dleff0$(t,e.time),a=s*s,l=s*s*s,u=2*l-3*a+1,p=l-2*a+s,c=-2*l+3*a,h=l-a;o=this.weights;for(var d=0;d!==o.length;++d){var f=this.weights[d]*u,_=this.startTan[d]*p,m=e.weights[d]*c,$=this.endTan[d]*h;this.tmpW[d]=f+_+m+$}}i.setWeights_q3cr5i$(this.tmpW)},e$.$metadata$={kind:$,simpleName:"CubicWeightKey",interfaces:[t$]},n$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var o$=null;function r$(){return null===o$&&new n$,o$}function s$(t){i$.call(this,t)}function a$(t){i$.call(this,t)}function l$(t){this.value=t,this.onUpdate=null}function u$(t,e){l$.call(this,t),this.from=t,this.to=e}function p$(t){this.desired=t,this.actual=t,this.speed_t20eng$_0=0,this.damping_0=0,this.stiffness_h7kl9w$_0=0,this.stiffness=100}function c$(t){this.desired=t,this.actual=t,this.speed_e6bbiv$_0=0,this.damping_0=0,this.stiffness_bla035$_0=0,this.stiffness=100}function h$(){this.nodes=M()}function d$(t,e){this.joint=t,this.inverseBindMatrix=e,this.jointTransform=new En,this.tmpMat4f_0=new En,this.parent_0=null,this.children_0=M()}function f$(t,i,n,o){x$();var r,a=new Id,l=new ia;l.name="AmbientOcclusionPass",l.setSize_vux9f0$(n,o),l.clearDepthTexture(),l.addColorTexture_farcsl$(Yc()),ua.call(this,a,new ea(l)),this.aoSetup=i,this.radius=1,this.strength=1.25,this.power=1.5,this.bias=.05,this.kernelSz_cjciej$_0=32,this.aoUniforms_0=null,this.aoNode_0=null,this.noiseTex_0=this.makeNoiseTexture_0(),this.clearColor=J$().WHITE;var u=e.isType(r=this.drawNode,Id)?r:c(),p=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);p.generate_v2sixm$(w$);var h=new Iu("AoPass"),d={v:null},f=new Lu(h);d.v=f.stageInterfaceNode_iikjwn$("ifTexCoords",f.attrTexCoords().output),f.positionOutput=f.fullScreenQuadPositionNode_r20yfm$(f.attrTexCoords().output).outQuadPos;var _,m,$,y,v=new Du(h),g=v.textureNode_61zpoe$("noiseTex"),b=v.addNode_u9w9by$(new m$(this,t,!0,v.stage));if(this.aoSetup.isDeferred)_=v.textureNode_61zpoe$("positionTex"),m="z",$=v.splitNode_500t7j$(v.textureSamplerNode_ce41yx$(_,d.v.output).outColor,"xyz").output,y=v.splitNode_500t7j$(v.textureSamplerNode_ce41yx$(v.textureNode_61zpoe$("normalTex"),d.v.output).outColor,"xyz").output;else{_=v.textureNode_61zpoe$("normalDepthTex"),m="a";var w=v.textureSamplerNode_ce41yx$(_,d.v.output).outColor;y=v.splitNode_500t7j$(w,"xyz").output;var z=v.addNode_u9w9by$(new y$(b,v.stage));z.inDepth=v.splitNode_500t7j$(w,"a").output,z.inScreenPos=d.v.output,$=z.outPosition}var k=v.addNode_u9w9by$(new v$(this,b,g,_,m,v.stage));k.inScreenPos=d.v.output,k.inOrigin=$,k.inNormal=y,v.colorOutput_a3v4si$(k.outColor);var S,C,N=h,E=new lc(N);E.onPipelineCreated.add_11rb$((S=this,C=N,function(t,i,n){var o,r,a;if(S.aoSetup.isForward){var l,u,p=C;t:do{var h;for(l=Vp.ALL,h=p.stages.values.iterator();h.hasNext();){var d=h.next();if(0!=(d.stage.mask&l.mask)){var f,_,m=d.nodes;e:do{var $;for($=m.iterator();$.hasNext();){var y=$.next();if(zt(y.name,"normalDepthTex")&&e.isType(y,up)){_=y;break e}}_=null}while(0);var v=null==(f=_)||e.isType(f,up)?f:c();if(null!=v){u=v;break t}}}u=null}while(0);x(u).sampler.texture=null!=(o=S.aoSetup.linearDepthPass)?o.colorTexture:null}else{var g,b,w=C;t:do{var z;for(g=Vp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&g.mask)){var N,E,T=k.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(zt(O.name,"positionTex")&&e.isType(O,up)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,up)?N:c();if(null!=M){b=M;break t}}}b=null}while(0);x(b).sampler.texture=null!=(r=S.aoSetup.mrtPass)?r.positionAo:null;var j,A,I=C;t:do{var R;for(j=Vp.ALL,R=I.stages.values.iterator();R.hasNext();){var L=R.next();if(0!=(L.stage.mask&j.mask)){var D,q,F=L.nodes;e:do{var B;for(B=F.iterator();B.hasNext();){var U=B.next();if(zt(U.name,"normalTex")&&e.isType(U,up)){q=U;break e}}q=null}while(0);var V=null==(D=q)||e.isType(D,up)?D:c();if(null!=V){A=V;break t}}}A=null}while(0);x(A).sampler.texture=null!=(a=S.aoSetup.mrtPass)?a.normalRoughness:null}var G,H,W=C;t:do{var K;for(G=Vp.ALL,K=W.stages.values.iterator();K.hasNext();){var X=K.next();if(0!=(X.stage.mask&G.mask)){var Y,Z,J=X.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(zt(tt.name,"noiseTex")&&e.isType(tt,up)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,up)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);x(H).sampler.texture=S.noiseTex_0;var it,nt,ot=S,rt=C;t:do{var st;for(it=Vp.ALL,st=rt.stages.values.iterator();st.hasNext();){var at=st.next();if(0!=(at.stage.mask&it.mask)){var lt,ut,pt=at.nodes;e:do{var ct;for(ct=pt.iterator();ct.hasNext();){var ht=ct.next();if(zt(ht.name,"aoUniforms")&&e.isType(ht,m$)){ut=ht;break e}}ut=null}while(0);var dt=null==(lt=ut)||e.isType(lt,m$)?lt:c();if(null!=dt){nt=dt;break t}}}nt=null}while(0);ot.aoUniforms_0=nt;var ft,_t,mt=S,$t=C;t:do{var yt;for(ft=Vp.ALL,yt=$t.stages.values.iterator();yt.hasNext();){var vt=yt.next();if(0!=(vt.stage.mask&ft.mask)){var gt,bt,xt=vt.nodes;e:do{var wt;for(wt=xt.iterator();wt.hasNext();){var kt=wt.next();if(zt(kt.name,"aoNode")&&e.isType(kt,v$)){bt=kt;break e}}bt=null}while(0);var St=null==(gt=bt)||e.isType(gt,v$)?gt:c();if(null!=St){_t=St;break t}}}_t=null}while(0);return mt.aoNode_0=_t,S.setKernelSize_0(S.kernelSz),s})),p.shader=E,u.unaryPlus_uv0sim$(p)}function _$(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$data=t}function m$(t,e,i,n){this.$outer=t,qu.call(this,"aoUniforms",n),this.cam=e,this.withInvProj=i,this.uKernel=new id("uKernel",128),this.uKernelN=ld(32,"uKernelN"),this.uProj=new rd("uProj"),this.uInvProj=new rd("uInvProj"),this.uNoiseScale=new Yh("uNoiseScale"),this.uRadius=new Kh("uRadius"),this.uStrength=new Kh("uStrength"),this.uPower=new Kh("uPower"),this.uBias=new Kh("uBias")}function $$(t,e){return function(i){return i.unaryPlus_wq3w46$(function(t){return function(){return t.uKernel}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uProj}}(t)),t.withInvProj&&i.unaryPlus_wq3w46$(function(t){return function(){return t.uInvProj}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uNoiseScale}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uRadius}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uStrength}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uPower}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uBias}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uKernelN}}(t)),i.onUpdate=function(t,e){return function(i,n){return t.uProj.value.set_d4zu6l$(t.cam.proj),t.uNoiseScale.value.set_dleff0$(e.width/4,e.height/4),t.uRadius.value=e.radius,t.uStrength.value=e.strength,t.uPower.value=e.power,t.uBias.value=e.bias,t.withInvProj&&t.uInvProj.value.set_d4zu6l$(t.cam.invProj),s}}(t,e),s}}function y$(t,e){qu.call(this,"unprojectPos",e),this.aoUniforms=t,this.inDepth=new Fu(new wu(1)),this.inScreenPos=new Fu(new zu(ao().ZERO)),this.outPosition=new Fu(new _u(this.name+"_outPos"),this)}function v$(t,e,i,n,o,r){this.$outer=t,qu.call(this,"aoNode",r),this.aoUniforms=e,this.noiseTex=i,this.depthTex=n,this.depthComponent=o,this.inScreenPos=new Fu(new zu(ao().ZERO)),this.inOrigin=new Fu(new ku(To().ZERO)),this.inNormal=new Fu(new ku(To().Y_AXIS)),this.outColor=new Fu(new mu("colorOut"),this)}function g$(){b$=this,this.MAX_KERNEL_SIZE=128}i$.prototype.tick_aemszp$=function(t){var e,i=this.speed;if(e=LN.FUZZY_EQ_F,!(A.abs(i)<=e)){if(this.progress+=t.deltaT*this.speed/this.duration,this.progress>=1&&this.speed>0)switch(this.repeating){case 1:this.progress=1,this.speed=0;break;case 2:this.progress=0;break;case 3:this.progress=1,this.speed=-this.speed}else if(this.progress<=0&&this.speed<0)switch(this.repeating){case 1:this.progress=0,this.speed=0;break;case 2:this.progress=1;break;case 3:this.progress=0,this.speed=-this.speed}var n,o=this.progress;n=o<0?0:o>1?1:o,this.progress=n,this.value.interpolate_mx4ult$(this.interpolate_mx4ult$(this.progress))}return this.value.value},i$.$metadata$={kind:$,simpleName:"Animator",interfaces:[]},s$.prototype.interpolate_mx4ult$=function(t){return t},s$.$metadata$={kind:$,simpleName:"LinearAnimator",interfaces:[i$]},a$.prototype.interpolate_mx4ult$=function(t){var e=t*U.PI;return.5-.5*A.cos(e)},a$.$metadata$={kind:$,simpleName:"CosAnimator",interfaces:[i$]},l$.prototype.interpolate_mx4ult$=function(t){var e;this.updateValue_mx4ult$(t),null!=(e=this.onUpdate)&&e(this.value)},l$.$metadata$={kind:$,simpleName:"InterpolatedValue",interfaces:[]},u$.prototype.updateValue_mx4ult$=function(t){this.value=this.from+(this.to-this.from)*t},u$.$metadata$={kind:$,simpleName:"InterpolatedFloat",interfaces:[l$]},Object.defineProperty(p$.prototype,"speed",{configurable:!0,get:function(){return this.speed_t20eng$_0},set:function(t){this.speed_t20eng$_0=t}}),Object.defineProperty(p$.prototype,"stiffness",{configurable:!0,get:function(){return this.stiffness_h7kl9w$_0},set:function(t){this.stiffness_h7kl9w$_0=t;var e=this.stiffness;this.damping_0=2*A.sqrt(e)}}),p$.prototype.set_mx4ult$=function(t){this.desired=t,this.actual=t,this.speed=0},p$.prototype.animate_mx4ult$=function(t){if(0===this.stiffness||t>.2)return this.actual=this.desired,this.actual;for(var e=0;e<t;){var i=t-e,n=A.min(.05,i);e+=n+.001;var o=this.desired-this.actual;this.speed=this.speed+(o*this.stiffness-this.speed*this.damping_0)*n;var r,s=this.speed*n,a=A.abs(s);r=LN.FUZZY_EQ_F,A.abs(a)<=r?this.actual=this.desired:this.actual+=s}return this.actual},p$.$metadata$={kind:$,simpleName:"SpringDamperFloat",interfaces:[]},Object.defineProperty(c$.prototype,"speed",{configurable:!0,get:function(){return this.speed_e6bbiv$_0},set:function(t){this.speed_e6bbiv$_0=t}}),Object.defineProperty(c$.prototype,"stiffness",{configurable:!0,get:function(){return this.stiffness_bla035$_0},set:function(t){this.stiffness_bla035$_0=t;var e=this.stiffness;this.damping_0=2*A.sqrt(e)}}),c$.prototype.set_14dthe$=function(t){this.desired=t,this.actual=t,this.speed=0},c$.prototype.animate_mx4ult$=function(t){if(0===this.stiffness||t>.2)return this.actual=this.desired,this.actual;for(var e=0;e<t;){var i=t-e,n=A.min(.05,i);e+=n+.001;var o=this.desired-this.actual;this.speed=this.speed+(o*this.stiffness-this.speed*this.damping_0)*n;var r,s=this.speed*n,a=A.abs(s);r=LN.FUZZY_EQ_D,A.abs(a)<=r?this.actual=this.desired:this.actual+=s}return this.actual},c$.$metadata$={kind:$,simpleName:"SpringDamperDouble",interfaces:[]},h$.prototype.updateJointTransforms=function(){var t;t=this.nodes;for(var e=0;e!==t.size;++e)this.nodes.get_za3lpa$(e).hasParent||this.nodes.get_za3lpa$(e).updateJointTransform()},h$.prototype.printHierarchy=function(){var t,e,i=this.nodes,n=M();for(t=i.iterator();t.hasNext();){var o=t.next();o.hasParent||n.add_11rb$(o)}for(e=n.iterator();e.hasNext();)e.next().printHierarchy_61zpoe$("")},Object.defineProperty(d$.prototype,"hasParent",{configurable:!0,get:function(){return null!=this.parent_0}}),d$.prototype.addChild_j3a3b7$=function(t){t.parent_0=this,this.children_0.add_11rb$(t)},d$.prototype.updateJointTransform=function(){var t;this.jointTransform.set_d4zu6l$(this.joint.transform),t=this.children_0;for(var e=0;e!==t.size;++e)this.children_0.get_za3lpa$(e).updateJointTransform_0(this.jointTransform);this.jointTransform.mul_d4zu6j$(this.inverseBindMatrix)},d$.prototype.updateJointTransform_0=function(t){var e;this.tmpMat4f_0.set_d4zu6l$(this.joint.transform),this.jointTransform.set_d4zu6j$(t).mul_d4zu6j$(this.tmpMat4f_0),e=this.children_0;for(var i=0;i!==e.size;++i)this.children_0.get_za3lpa$(i).updateJointTransform_0(this.jointTransform);this.jointTransform.mul_d4zu6j$(this.inverseBindMatrix)},d$.prototype.printHierarchy_61zpoe$=function(t){var e;for(jt(t+Ct(this.joint.name)),e=this.children_0.iterator();e.hasNext();)e.next().printHierarchy_61zpoe$(t+"    ")},d$.$metadata$={kind:$,simpleName:"SkinNode",interfaces:[]},h$.$metadata$={kind:$,simpleName:"Skin",interfaces:[]},Object.defineProperty(f$.prototype,"kernelSz",{configurable:!0,get:function(){return this.kernelSz_cjciej$_0},set:function(t){this.kernelSz_cjciej$_0=t,this.setKernelSize_0(t)}}),f$.prototype.setKernelSize_0=function(t){var e,i=A.min(t,128);if(null!=(e=this.aoNode_0)){var n,o=f(0,i),r=w(j(o,10));for(n=o.iterator();n.hasNext();){var s=n.next()/i;r.add_11rb$.call(r,this.lerp_0(.1,1,A.pow(s,2)))}for(var a=te(r,Qt(17)),l=0;l<i;l++){var u=this.hammersley_0(l,i),p=2*U.PI*u.x,c=1-u.y,h=A.sqrt(c),d=1-h*h,_=A.sqrt(d),m=new Mo(_*A.cos(p),_*A.sin(p),h);e.aoUniforms.uKernel.value[l]=m.norm().scale_mx4ult$(a.get_za3lpa$(l))}e.aoUniforms.uKernelN.value=i}},f$.prototype.radicalInverse_0=function(t){var i=e.Long.fromInt(t);return 2.3283064e-10*(i=(i=(i=(i=(i=i.shiftLeft(16).or(i.shiftRight(16))).and(ee).shiftLeft(1).or(i.and(ie).shiftRight(1))).and(ne).shiftLeft(2).or(i.and(oe).shiftRight(2))).and(re).shiftLeft(4).or(i.and(se).shiftRight(4))).and(ae).shiftLeft(8).or(i.and(le).shiftRight(8))).toNumber()},f$.prototype.hammersley_0=function(t,e){return new oo(t/e,this.radicalInverse_0(t))},f$.prototype.lerp_0=function(t,e,i){return t+i*(e-t)},_$.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},_$.prototype=Object.create(l.prototype),_$.prototype.constructor=_$,_$.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$data;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},f$.prototype.makeNoiseTexture_0=function(){var t,e=PN(64),i=f(0,16),n=w(j(i,10));for(t=i.iterator();t.hasNext();){var o=t.next();n.add_11rb$(U.PI*o/8)}for(var r=Z(n),s=0;s<16;s++){var a=r.get_za3lpa$(s),l=A.cos(a),u=A.sin(a);e.set_6t1wet$(0+(4*s|0)|0,Dt(B(255*(.5*l+.5)))),e.set_6t1wet$(1+(4*s|0)|0,Dt(B(255*(.5*u+.5)))),e.set_6t1wet$(2+(4*s|0)|0,0),e.set_6t1wet$(3+(4*s|0)|0,1)}var p,c=new Rh(e,4,4,Yc());return new eh(new Sh(Yc(),Ah(),Ah(),void 0,Eh(),Eh(),!1,1),"ao_noise_tex",(p=c,function(t,e,i,n){var o=new _$(p,t,e,this,i);return n?o:o.doResume(null)}))},f$.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),this.noiseTex_0.dispose(),ua.prototype.dispose_aemszp$.call(this,t)},m$.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t);var e=t.descriptorSet;this.$outer;var i=this.$outer;e.uniformBuffer_2ydyu8$(this.name,[t.stage],$$(this,i))},m$.$metadata$={kind:$,simpleName:"AoUniforms",interfaces:[qu]},y$.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDepth,this.inScreenPos])},y$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec4 projPos = vec4("+this.inScreenPos.ref2f_61zpoe$()+" * 2.0 - vec2(1.0), 1.0, 1.0);\n                vec4 viewPos = "+this.aoUniforms.uInvProj+" * projPos;\n                "+this.outPosition.declare()+" = viewPos.xyz / viewPos.w;\n                "+this.outPosition+" *= ("+this.inDepth.ref1f_61zpoe$()+" / "+this.outPosition+".z);\n            ")},y$.$metadata$={kind:$,simpleName:"UnprojectPosNode",interfaces:[qu]},v$.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noiseTex),this.dependsOn_8ak6wm$([this.inScreenPos,this.inOrigin]),qu.prototype.setup_llmhyc$.call(this,t)},v$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                if ("+this.inOrigin+".z > 0.0) {\n                    discard;\n                }\n                \n                // compute kernel rotation\n                vec2 noiseCoord = "+this.inScreenPos.ref2f_61zpoe$()+" * "+this.aoUniforms.uNoiseScale+";\n                vec3 rotVec = "+t.sampleTexture2d_buzeal$(this.noiseTex.name,"noiseCoord")+".xyz * 2.0 - 1.0;\n                vec3 tangent = normalize(rotVec - "+this.inNormal.ref3f_61zpoe$()+" * dot(rotVec, "+this.inNormal.ref3f_61zpoe$()+"));\n                vec3 bitangent = cross("+this.inNormal.ref3f_61zpoe$()+", tangent);\n                mat3 tbn = mat3(tangent, bitangent, "+this.inNormal.ref3f_61zpoe$()+");\n                \n                float occlusion = 0.0;\n                float bias = "+this.aoUniforms.uBias+" * "+this.aoUniforms.uRadius+";\n                for (int i = 0; i < "+this.aoUniforms.uKernelN+"; i++) {\n                    vec3 kernel = tbn * "+this.aoUniforms.uKernel+"[i];\n                    vec3 samplePos = "+this.inOrigin+" + kernel * "+this.aoUniforms.uRadius+";\n                    \n                    vec4 sampleProj = "+this.aoUniforms.uProj+" * vec4(samplePos, 1.0);\n                    sampleProj.xyz /= sampleProj.w;\n                    sampleProj.xy = sampleProj.xy * 0.5 + 0.5;\n                    \n                    if (sampleProj.x > 0.0 && sampleProj.x < 1.0 && sampleProj.y > 0.0 && sampleProj.y < 1.0 && sampleProj.z > 0.0) {\n                        float sampleDepth = "+t.sampleTexture2d_buzeal$(this.depthTex.name,"sampleProj.xy")+"."+this.depthComponent+";\n                        float rangeCheck = 1.0 - smoothstep(0.0, 1.0, abs("+this.inOrigin+".z - sampleDepth) / (4.0 * "+this.aoUniforms.uRadius+"));\n                        float occlusionInc = clamp((sampleDepth - (samplePos.z + bias)) * 10.0, 0.0, 1.0);\n                        occlusion += occlusionInc * rangeCheck;\n                    }\n                }\n                occlusion /= float("+this.aoUniforms.uKernelN+");\n                float occlFac = pow(clamp(1.0 - occlusion * "+this.aoUniforms.uStrength+", 0.0, 1.0), "+this.aoUniforms.uPower+");\n                \n                "+this.outColor.declare()+" = vec4(occlFac, 0.0, 0.0, 1.0);\n            ")},v$.$metadata$={kind:$,simpleName:"AoNode",interfaces:[qu]},g$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var b$=null;function x$(){return null===b$&&new g$,b$}function w$(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function z$(t,e){C$(),this.mrtPass=t,this.linearDepthPass=e}function k$(){S$=this}f$.$metadata$={kind:$,simpleName:"AmbientOcclusionPass",interfaces:[ua]},Object.defineProperty(z$.prototype,"isDeferred",{configurable:!0,get:function(){return null!=this.mrtPass}}),Object.defineProperty(z$.prototype,"isForward",{configurable:!0,get:function(){return null!=this.linearDepthPass}}),k$.prototype.deferred_u6tred$=function(t){return new z$(t,null)},k$.prototype.forward_xscw1l$=function(t){return new z$(null,t)},k$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var S$=null;function C$(){return null===S$&&new k$,S$}function N$(t,i,n){var o,r=new Id,a=new ia;a.name="AoDenoisePass",a.setSize_vux9f0$(t.config.width,t.config.height),a.addColorTexture_farcsl$(Wc()),a.clearDepthTexture(),ua.call(this,r,new ea(a)),this.uRadius_0=Xh(1,"uRadius"),this.clearAndDisable=!1,this.denoiseMesh_0=null,this.clearMesh_0=null,this.clearColor=J$().BLACK;var l=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(T$);var u=new Iu("AoDenoisePass"),p={v:null},h=new Lu(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.fullScreenQuadPositionNode_r20yfm$(h.attrTexCoords().output).outQuadPos;var d=new Du(u),f=d.textureNode_61zpoe$("noisyAo"),_=d.textureNode_61zpoe$("depth"),m=d.pushConstantNode1f_978i2u$(this.uRadius_0),$=d.addNode_u9w9by$(new E$(f,_,n,d.stage));$.inScreenPos=p.v.output,$.radius=m.output,d.colorOutput_a3v4si$($.outColor);var y,v,g,b=u,w=new lc(b);w.onPipelineSetup.add_11rb$(P$),w.onPipelineCreated.add_11rb$((y=t,v=b,g=i,function(t,i,n){var o,r,a=v;t:do{var l;for(o=Vp.ALL,l=a.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&o.mask)){var p,h,d=u.nodes;e:do{var f;for(f=d.iterator();f.hasNext();){var _=f.next();if(zt(_.name,"noisyAo")&&e.isType(_,up)){h=_;break e}}h=null}while(0);var m=null==(p=h)||e.isType(p,up)?p:c();if(null!=m){r=m;break t}}}r=null}while(0);x(r).sampler.texture=y.colorTexture;var $,b,w=v;t:do{var z;for($=Vp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&$.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var T=E.next();if(zt(T.name,"depth")&&e.isType(T,up)){C=T;break e}}C=null}while(0);var P=null==(S=C)||e.isType(S,up)?S:c();if(null!=P){b=P;break t}}}b=null}while(0);return x(b).sampler.texture=g,s})),l.shader=w,this.denoiseMesh_0=l;var z=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);z.isVisible=!1,z.generate_v2sixm$(O$);var k=new Iu("ClearAoDenoisePass"),S=new Lu(k);S.mvpNode(),S.positionOutput=S.fullScreenQuadPositionNode_r20yfm$(S.attrTexCoords().output).outQuadPos;var C=new Du(k);C.colorOutput_a3v4si$(C.constVec4f_czzhhz$(J$().WHITE));var N=new lc(k);N.onPipelineSetup.add_11rb$(M$),z.shader=N,this.clearMesh_0=z;var E=e.isType(o=this.drawNode,Id)?o:c();E.unaryPlus_uv0sim$(this.denoiseMesh_0),E.unaryPlus_uv0sim$(this.clearMesh_0)}function E$(t,e,i,n){qu.call(this,"blurNode",n),this.noisyAo=t,this.depth=e,this.depthComponent=i,this.inScreenPos=new Fu(new zu(ao().ZERO)),this.radius=new Fu(new wu(1)),this.outColor=new Fu(new mu("colorOut"),this)}function T$(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function P$(t,e,i){return t.blendMode=ol(),t.depthTest=pl(),s}function O$(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function M$(t,e,i){return t.blendMode=ol(),t.depthTest=pl(),s}function j$(){D$(),this.mapSize=.5,this.isEnabled_ubfkyk$_0=!0}function A$(t){var i;j$.call(this),this.depthPass=null,this.aoPass_i8vqld$_0=null,this.denoisePass_wz7oly$_0=null,this.mapWidth_0=0,this.mapHeight_0=0;var n,o,r,a=new Td(e.isType(i=t.camera,Ed)?i:c());this.depthPass=js(t,this.mapWidth_0,this.mapHeight_0),this.depthPass.camera=a,this.depthPass.isUpdateDrawNode=!1,this.depthPass.onBeforeCollectDrawCommands.add_11rb$((n=a,o=t,function(t){return n.sync_hrtwbc$(o.mainRenderPass.viewport,t),s})),this.aoPass_i8vqld$_0=new f$(a,C$().forward_xscw1l$(this.depthPass),this.mapWidth_0,this.mapHeight_0),this.aoPass.dependsOn_yqp8fe$(this.depthPass),this.denoisePass_wz7oly$_0=new N$(this.aoPass,x(this.depthPass.colorTexture),"a"),t.addOffscreenPass_m1c2kf$(this.depthPass),t.addOffscreenPass_m1c2kf$(this.aoPass),t.addOffscreenPass_m1c2kf$(this.denoisePass),t.onRenderScene.add_11rb$((r=this,function(t,e){var i=B(t.mainRenderPass.viewport.width*r.mapSize),n=B(t.mainRenderPass.viewport.height*r.mapSize);return r.isEnabled&&i>0&&n>0&&(i!==r.aoPass.width||n!==r.aoPass.height)&&(r.depthPass.resize_w70mbp$(i,n,e),r.aoPass.resize_w70mbp$(i,n,e)),r.isEnabled&&i>0&&n>0&&(i!==r.denoisePass.width||n!==r.denoisePass.height)&&r.denoisePass.resize_w70mbp$(i,n,e),s}))}function I$(t,e){var i,n;j$.call(this),this.aoPass_6v2ifx$_0=null,this.denoisePass_mxbezy$_0=null,this.mapWidth_0=0,this.mapHeight_0=0,this.aoPass_6v2ifx$_0=new f$(e.camera,C$().deferred_u6tred$(e),this.mapWidth_0,this.mapHeight_0),this.aoPass.dependsOn_yqp8fe$(e),this.denoisePass_mxbezy$_0=new N$(this.aoPass,e.positionAo,"z"),t.addOffscreenPass_m1c2kf$(this.aoPass),t.addOffscreenPass_m1c2kf$(this.denoisePass),t.onRenderScene.add_11rb$((i=e,n=this,function(t,e){var o=B(i.width*n.mapSize),r=B(i.height*n.mapSize);return n.isEnabled&&o>0&&r>0&&(o!==n.aoPass.width||r!==n.aoPass.height)&&n.aoPass.resize_w70mbp$(o,r,e),n.isEnabled&&o>0&&r>0&&(o!==n.denoisePass.width||r!==n.denoisePass.height)&&n.denoisePass.resize_w70mbp$(o,r,e),s}))}function R$(){L$=this}z$.$metadata$={kind:$,simpleName:"AoSetup",interfaces:[]},Object.defineProperty(N$.prototype,"radius",{configurable:!0,get:function(){return this.uRadius_0.value},set:function(t){this.uRadius_0.value=t}}),N$.prototype.update_aemszp$=function(t){var e;this.clearAndDisable&&(this.resize_w70mbp$(1,1,t),this.clearAndDisable=!1,this.denoiseMesh_0.isVisible=!1,this.clearMesh_0.isVisible=!0,t.runDelayed_hd6vpk$(5,(e=this,function(t){return e.isEnabled=!1,e.denoiseMesh_0.isVisible=!0,e.clearMesh_0.isVisible=!1,s}))),ua.prototype.update_aemszp$.call(this,t)},N$.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},E$.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noisyAo),this.dependsOn_lhtstx$(this.depth),this.dependsOn_8ak6wm$([this.inScreenPos,this.radius]),qu.prototype.setup_llmhyc$.call(this,t)},E$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                int blurSize = 4;\n                vec2 texelSize = 1.0 / vec2(textureSize("+this.noisyAo.name+", 0));\n                float depthOri = "+t.sampleTexture2d_buzeal$(this.depth.name,this.inScreenPos.ref2f_61zpoe$())+"."+this.depthComponent+";\n                float depthThreshold = "+this.radius.ref1f_61zpoe$()+" * 0.1;\n                \n                float result = 0.0;\n                float weight = 0.0;\n                vec2 hlim = vec2(float(-blurSize) * 0.5 + 0.5);\n                for (int x = 0; x < blurSize; x++) {\n                    for (int y = 0; y < blurSize; y++) {\n                        vec2 uv = "+this.inScreenPos.ref2f_61zpoe$()+" + (hlim + vec2(float(x), float(y))) * texelSize;\n                        float w = 1.0 - step(depthThreshold, abs("+t.sampleTexture2d_buzeal$(this.depth.name,"uv")+"."+this.depthComponent+" - depthOri)) * 0.99;\n                        \n                        result += "+t.sampleTexture2d_buzeal$(this.noisyAo.name,"uv")+".r * w;\n                        weight += w;\n                    }\n                }\n                result /= weight;\n                "+this.outColor.declare()+" = vec4(result, result, result, 1.0);\n            ")},E$.$metadata$={kind:$,simpleName:"BlurNode",interfaces:[qu]},N$.$metadata$={kind:$,simpleName:"AoDenoisePass",interfaces:[ua]},Object.defineProperty(j$.prototype,"aoMap",{configurable:!0,get:function(){return x(this.denoisePass.colorTexture)}}),Object.defineProperty(j$.prototype,"radius",{configurable:!0,get:function(){return this.aoPass.radius},set:function(t){this.aoPass.radius=t,this.denoisePass.radius=t}}),Object.defineProperty(j$.prototype,"strength",{configurable:!0,get:function(){return this.aoPass.strength},set:function(t){this.aoPass.strength=t}}),Object.defineProperty(j$.prototype,"power",{configurable:!0,get:function(){return this.aoPass.power},set:function(t){this.aoPass.power=t}}),Object.defineProperty(j$.prototype,"bias",{configurable:!0,get:function(){return this.aoPass.bias},set:function(t){this.aoPass.bias=t}}),Object.defineProperty(j$.prototype,"kernelSz",{configurable:!0,get:function(){return this.aoPass.kernelSz},set:function(t){this.aoPass.kernelSz=t}}),Object.defineProperty(j$.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_ubfkyk$_0},set:function(t){this.isEnabled_ubfkyk$_0=t,this.updateEnabled()}}),j$.prototype.updateEnabled=function(){this.aoPass.isEnabled=this.isEnabled,this.isEnabled?(this.denoisePass.isEnabled=!0,this.denoisePass.clearAndDisable=!1):this.denoisePass.clearAndDisable=!0},Object.defineProperty(A$.prototype,"aoPass",{configurable:!0,get:function(){return this.aoPass_i8vqld$_0}}),Object.defineProperty(A$.prototype,"denoisePass",{configurable:!0,get:function(){return this.denoisePass_wz7oly$_0}}),A$.prototype.updateEnabled=function(){j$.prototype.updateEnabled.call(this),this.depthPass.isEnabled=this.isEnabled},A$.$metadata$={kind:$,simpleName:"ForwardAoPipeline",interfaces:[j$]},Object.defineProperty(I$.prototype,"aoPass",{configurable:!0,get:function(){return this.aoPass_6v2ifx$_0}}),Object.defineProperty(I$.prototype,"denoisePass",{configurable:!0,get:function(){return this.denoisePass_mxbezy$_0}}),I$.$metadata$={kind:$,simpleName:"DeferredAoPipeline",interfaces:[j$]},R$.prototype.createForward_ushge7$=function(t){return new A$(t)},R$.prototype.createDeferred_4lrvgg$=function(t,e){return new I$(t,e)},R$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var L$=null;function D$(){return null===L$&&new R$,L$}function q$(){this.mutMin_0=jo(),this.mutMax_0=jo(),this.mutSize_0=jo(),this.mutCenter_0=jo(),this.isEmpty_xiuk4h$_0=!0,this.min=this.mutMin_0,this.max=this.mutMax_0,this.size=this.mutSize_0,this.center=this.mutCenter_0,this.isBatchUpdate_4nlnat$_0=!1}function F$(){}function B$(){}function U$(){}function V$(){}function G$(){}function H$(){}function W$(t){for(var e=t.size,i=w(e),n=0;n<e;n++)i.add_11rb$(t.get_za3lpa$(n));return i}function K$(t){var e=ct();return e.addAll_brywnq$(t),e}function X$(t,e,i,n){J$(),void 0===n&&(n=1),Zo.call(this,t,e,i,n)}function Y$(){Z$=this,this.BLACK=new X$(0,0,0,1),this.DARK_GRAY=new X$(.25,.25,.25,1),this.GRAY=new X$(.5,.5,.5,1),this.LIGHT_GRAY=new X$(.75,.75,.75,1),this.WHITE=new X$(1,1,1,1),this.RED=new X$(1,0,0,1),this.GREEN=new X$(0,1,0,1),this.BLUE=new X$(0,0,1,1),this.YELLOW=new X$(1,1,0,1),this.CYAN=new X$(0,1,1,1),this.MAGENTA=new X$(1,0,1,1),this.ORANGE=new X$(1,.5,0,1),this.LIME=new X$(.7,1,0,1),this.LIGHT_RED=new X$(1,.5,.5,1),this.LIGHT_GREEN=new X$(.5,1,.5,1),this.LIGHT_BLUE=new X$(.5,.5,1,1),this.LIGHT_YELLOW=new X$(1,1,.5,1),this.LIGHT_CYAN=new X$(.5,1,1,1),this.LIGHT_MAGENTA=new X$(1,.5,1,1),this.LIGHT_ORANGE=new X$(1,.75,.5,1),this.DARK_RED=new X$(.5,0,0,1),this.DARK_GREEN=new X$(0,.5,0,1),this.DARK_BLUE=new X$(0,0,.5,1),this.DARK_YELLOW=new X$(.5,.5,0,1),this.DARK_CYAN=new X$(0,.5,.5,1),this.DARK_MAGENTA=new X$(.5,0,.5,1),this.DARK_ORANGE=new X$(.5,.25,0,1),this.MD_RED_50=this.fromHex_61zpoe$("FFEBEE"),this.MD_RED_100=this.fromHex_61zpoe$("FFCDD2"),this.MD_RED_200=this.fromHex_61zpoe$("EF9A9A"),this.MD_RED_300=this.fromHex_61zpoe$("E57373"),this.MD_RED_400=this.fromHex_61zpoe$("EF5350"),this.MD_RED_500=this.fromHex_61zpoe$("F44336"),this.MD_RED_600=this.fromHex_61zpoe$("E53935"),this.MD_RED_700=this.fromHex_61zpoe$("D32F2F"),this.MD_RED_800=this.fromHex_61zpoe$("C62828"),this.MD_RED_900=this.fromHex_61zpoe$("B71C1C"),this.MD_RED_A100=this.fromHex_61zpoe$("FF8A80"),this.MD_RED_A200=this.fromHex_61zpoe$("FF5252"),this.MD_RED_A400=this.fromHex_61zpoe$("FF1744"),this.MD_RED_A700=this.fromHex_61zpoe$("D50000"),this.MD_RED=this.MD_RED_500,this.MD_PINK_50=this.fromHex_61zpoe$("FCE4EC"),this.MD_PINK_100=this.fromHex_61zpoe$("F8BBD0"),this.MD_PINK_200=this.fromHex_61zpoe$("F48FB1"),this.MD_PINK_300=this.fromHex_61zpoe$("F06292"),this.MD_PINK_400=this.fromHex_61zpoe$("EC407A"),this.MD_PINK_500=this.fromHex_61zpoe$("E91E63"),this.MD_PINK_600=this.fromHex_61zpoe$("D81B60"),this.MD_PINK_700=this.fromHex_61zpoe$("C2185B"),this.MD_PINK_800=this.fromHex_61zpoe$("AD1457"),this.MD_PINK_900=this.fromHex_61zpoe$("880E4F"),this.MD_PINK_A100=this.fromHex_61zpoe$("FF80AB"),this.MD_PINK_A200=this.fromHex_61zpoe$("FF4081"),this.MD_PINK_A400=this.fromHex_61zpoe$("F50057"),this.MD_PINK_A700=this.fromHex_61zpoe$("C51162"),this.MD_PINK=this.MD_PINK_500,this.MD_PURPLE_50=this.fromHex_61zpoe$("F3E5F5"),this.MD_PURPLE_100=this.fromHex_61zpoe$("E1BEE7"),this.MD_PURPLE_200=this.fromHex_61zpoe$("CE93D8"),this.MD_PURPLE_300=this.fromHex_61zpoe$("BA68C8"),this.MD_PURPLE_400=this.fromHex_61zpoe$("AB47BC"),this.MD_PURPLE_500=this.fromHex_61zpoe$("9C27B0"),this.MD_PURPLE_600=this.fromHex_61zpoe$("8E24AA"),this.MD_PURPLE_700=this.fromHex_61zpoe$("7B1FA2"),this.MD_PURPLE_800=this.fromHex_61zpoe$("6A1B9A"),this.MD_PURPLE_900=this.fromHex_61zpoe$("4A148C"),this.MD_PURPLE_A100=this.fromHex_61zpoe$("EA80FC"),this.MD_PURPLE_A200=this.fromHex_61zpoe$("E040FB"),this.MD_PURPLE_A400=this.fromHex_61zpoe$("D500F9"),this.MD_PURPLE_A700=this.fromHex_61zpoe$("AA00FF"),this.MD_PURPLE=this.MD_PURPLE_500,this.MD_DEEP_PURPLE_50=this.fromHex_61zpoe$("EDE7F6"),this.MD_DEEP_PURPLE_100=this.fromHex_61zpoe$("D1C4E9"),this.MD_DEEP_PURPLE_200=this.fromHex_61zpoe$("B39DDB"),this.MD_DEEP_PURPLE_300=this.fromHex_61zpoe$("9575CD"),this.MD_DEEP_PURPLE_400=this.fromHex_61zpoe$("7E57C2"),this.MD_DEEP_PURPLE_500=this.fromHex_61zpoe$("673AB7"),this.MD_DEEP_PURPLE_600=this.fromHex_61zpoe$("5E35B1"),this.MD_DEEP_PURPLE_700=this.fromHex_61zpoe$("512DA8"),this.MD_DEEP_PURPLE_800=this.fromHex_61zpoe$("4527A0"),this.MD_DEEP_PURPLE_900=this.fromHex_61zpoe$("311B92"),this.MD_DEEP_PURPLE_A100=this.fromHex_61zpoe$("B388FF"),this.MD_DEEP_PURPLE_A200=this.fromHex_61zpoe$("7C4DFF"),this.MD_DEEP_PURPLE_A400=this.fromHex_61zpoe$("651FFF"),this.MD_DEEP_PURPLE_A700=this.fromHex_61zpoe$("6200EA"),this.MD_DEEP_PURPLE=this.MD_DEEP_PURPLE_500,this.MD_INDIGO_50=this.fromHex_61zpoe$("E8EAF6"),this.MD_INDIGO_100=this.fromHex_61zpoe$("C5CAE9"),this.MD_INDIGO_200=this.fromHex_61zpoe$("9FA8DA"),this.MD_INDIGO_300=this.fromHex_61zpoe$("7986CB"),this.MD_INDIGO_400=this.fromHex_61zpoe$("5C6BC0"),this.MD_INDIGO_500=this.fromHex_61zpoe$("3F51B5"),this.MD_INDIGO_600=this.fromHex_61zpoe$("3949AB"),this.MD_INDIGO_700=this.fromHex_61zpoe$("303F9F"),this.MD_INDIGO_800=this.fromHex_61zpoe$("283593"),this.MD_INDIGO_900=this.fromHex_61zpoe$("1A237E"),this.MD_INDIGO_A100=this.fromHex_61zpoe$("8C9EFF"),this.MD_INDIGO_A200=this.fromHex_61zpoe$("536DFE"),this.MD_INDIGO_A400=this.fromHex_61zpoe$("3D5AFE"),this.MD_INDIGO_A700=this.fromHex_61zpoe$("304FFE"),this.MD_INDIGO=this.MD_INDIGO_500,this.MD_BLUE_50=this.fromHex_61zpoe$("E3F2FD"),this.MD_BLUE_100=this.fromHex_61zpoe$("BBDEFB"),this.MD_BLUE_200=this.fromHex_61zpoe$("90CAF9"),this.MD_BLUE_300=this.fromHex_61zpoe$("64B5F6"),this.MD_BLUE_400=this.fromHex_61zpoe$("42A5F5"),this.MD_BLUE_500=this.fromHex_61zpoe$("2196F3"),this.MD_BLUE_600=this.fromHex_61zpoe$("1E88E5"),this.MD_BLUE_700=this.fromHex_61zpoe$("1976D2"),this.MD_BLUE_800=this.fromHex_61zpoe$("1565C0"),this.MD_BLUE_900=this.fromHex_61zpoe$("0D47A1"),this.MD_BLUE_A100=this.fromHex_61zpoe$("82B1FF"),this.MD_BLUE_A200=this.fromHex_61zpoe$("448AFF"),this.MD_BLUE_A400=this.fromHex_61zpoe$("2979FF"),this.MD_BLUE_A700=this.fromHex_61zpoe$("2962FF"),this.MD_BLUE=this.MD_BLUE_500,this.MD_LIGHT_BLUE_50=this.fromHex_61zpoe$("E1F5FE"),this.MD_LIGHT_BLUE_100=this.fromHex_61zpoe$("B3E5FC"),this.MD_LIGHT_BLUE_200=this.fromHex_61zpoe$("81D4FA"),this.MD_LIGHT_BLUE_300=this.fromHex_61zpoe$("4FC3F7"),this.MD_LIGHT_BLUE_400=this.fromHex_61zpoe$("29B6F6"),this.MD_LIGHT_BLUE_500=this.fromHex_61zpoe$("03A9F4"),this.MD_LIGHT_BLUE_600=this.fromHex_61zpoe$("039BE5"),this.MD_LIGHT_BLUE_700=this.fromHex_61zpoe$("0288D1"),this.MD_LIGHT_BLUE_800=this.fromHex_61zpoe$("0277BD"),this.MD_LIGHT_BLUE_900=this.fromHex_61zpoe$("01579B"),this.MD_LIGHT_BLUE_A100=this.fromHex_61zpoe$("80D8FF"),this.MD_LIGHT_BLUE_A200=this.fromHex_61zpoe$("40C4FF"),this.MD_LIGHT_BLUE_A400=this.fromHex_61zpoe$("00B0FF"),this.MD_LIGHT_BLUE_A700=this.fromHex_61zpoe$("0091EA"),this.MD_LIGHT_BLUE=this.MD_LIGHT_BLUE_500,this.MD_CYAN_50=this.fromHex_61zpoe$("E0F7FA"),this.MD_CYAN_100=this.fromHex_61zpoe$("B2EBF2"),this.MD_CYAN_200=this.fromHex_61zpoe$("80DEEA"),this.MD_CYAN_300=this.fromHex_61zpoe$("4DD0E1"),this.MD_CYAN_400=this.fromHex_61zpoe$("26C6DA"),this.MD_CYAN_500=this.fromHex_61zpoe$("00BCD4"),this.MD_CYAN_600=this.fromHex_61zpoe$("00ACC1"),this.MD_CYAN_700=this.fromHex_61zpoe$("0097A7"),this.MD_CYAN_800=this.fromHex_61zpoe$("00838F"),this.MD_CYAN_900=this.fromHex_61zpoe$("006064"),this.MD_CYAN_A100=this.fromHex_61zpoe$("84FFFF"),this.MD_CYAN_A200=this.fromHex_61zpoe$("18FFFF"),this.MD_CYAN_A400=this.fromHex_61zpoe$("00E5FF"),this.MD_CYAN_A700=this.fromHex_61zpoe$("00B8D4"),this.MD_CYAN=this.MD_CYAN_500,this.MD_TEAL_50=this.fromHex_61zpoe$("E0F2F1"),this.MD_TEAL_100=this.fromHex_61zpoe$("B2DFDB"),this.MD_TEAL_200=this.fromHex_61zpoe$("80CBC4"),this.MD_TEAL_300=this.fromHex_61zpoe$("4DB6AC"),this.MD_TEAL_400=this.fromHex_61zpoe$("26A69A"),this.MD_TEAL_500=this.fromHex_61zpoe$("009688"),this.MD_TEAL_600=this.fromHex_61zpoe$("00897B"),this.MD_TEAL_700=this.fromHex_61zpoe$("00796B"),this.MD_TEAL_800=this.fromHex_61zpoe$("00695C"),this.MD_TEAL_900=this.fromHex_61zpoe$("004D40"),this.MD_TEAL_A100=this.fromHex_61zpoe$("A7FFEB"),this.MD_TEAL_A200=this.fromHex_61zpoe$("64FFDA"),this.MD_TEAL_A400=this.fromHex_61zpoe$("1DE9B6"),this.MD_TEAL_A700=this.fromHex_61zpoe$("00BFA5"),this.MD_TEAL=this.MD_TEAL_500,this.MD_GREEN_50=this.fromHex_61zpoe$("E8F5E9"),this.MD_GREEN_100=this.fromHex_61zpoe$("C8E6C9"),this.MD_GREEN_200=this.fromHex_61zpoe$("A5D6A7"),this.MD_GREEN_300=this.fromHex_61zpoe$("81C784"),this.MD_GREEN_400=this.fromHex_61zpoe$("66BB6A"),this.MD_GREEN_500=this.fromHex_61zpoe$("4CAF50"),this.MD_GREEN_600=this.fromHex_61zpoe$("43A047"),this.MD_GREEN_700=this.fromHex_61zpoe$("388E3C"),this.MD_GREEN_800=this.fromHex_61zpoe$("2E7D32"),this.MD_GREEN_900=this.fromHex_61zpoe$("1B5E20"),this.MD_GREEN_A100=this.fromHex_61zpoe$("B9F6CA"),this.MD_GREEN_A200=this.fromHex_61zpoe$("69F0AE"),this.MD_GREEN_A400=this.fromHex_61zpoe$("00E676"),this.MD_GREEN_A700=this.fromHex_61zpoe$("00C853"),this.MD_GREEN=this.MD_GREEN_500,this.MD_LIGHT_GREEN_50=this.fromHex_61zpoe$("F1F8E9"),this.MD_LIGHT_GREEN_100=this.fromHex_61zpoe$("DCEDC8"),this.MD_LIGHT_GREEN_200=this.fromHex_61zpoe$("C5E1A5"),this.MD_LIGHT_GREEN_300=this.fromHex_61zpoe$("AED581"),this.MD_LIGHT_GREEN_400=this.fromHex_61zpoe$("9CCC65"),this.MD_LIGHT_GREEN_500=this.fromHex_61zpoe$("8BC34A"),this.MD_LIGHT_GREEN_600=this.fromHex_61zpoe$("7CB342"),this.MD_LIGHT_GREEN_700=this.fromHex_61zpoe$("689F38"),this.MD_LIGHT_GREEN_800=this.fromHex_61zpoe$("558B2F"),this.MD_LIGHT_GREEN_900=this.fromHex_61zpoe$("33691E"),this.MD_LIGHT_GREEN_A100=this.fromHex_61zpoe$("CCFF90"),this.MD_LIGHT_GREEN_A200=this.fromHex_61zpoe$("B2FF59"),this.MD_LIGHT_GREEN_A400=this.fromHex_61zpoe$("76FF03"),this.MD_LIGHT_GREEN_A700=this.fromHex_61zpoe$("64DD17"),this.MD_LIGHT_GREEN=this.MD_LIGHT_GREEN_500,this.MD_LIME_50=this.fromHex_61zpoe$("F9FBE7"),this.MD_LIME_100=this.fromHex_61zpoe$("F0F4C3"),this.MD_LIME_200=this.fromHex_61zpoe$("E6EE9C"),this.MD_LIME_300=this.fromHex_61zpoe$("DCE775"),this.MD_LIME_400=this.fromHex_61zpoe$("D4E157"),this.MD_LIME_500=this.fromHex_61zpoe$("CDDC39"),this.MD_LIME_600=this.fromHex_61zpoe$("C0CA33"),this.MD_LIME_700=this.fromHex_61zpoe$("AFB42B"),this.MD_LIME_800=this.fromHex_61zpoe$("9E9D24"),this.MD_LIME_900=this.fromHex_61zpoe$("827717"),this.MD_LIME_A100=this.fromHex_61zpoe$("F4FF81"),this.MD_LIME_A200=this.fromHex_61zpoe$("EEFF41"),this.MD_LIME_A400=this.fromHex_61zpoe$("C6FF00"),this.MD_LIME_A700=this.fromHex_61zpoe$("AEEA00"),this.MD_LIME=this.MD_LIME_500,this.MD_YELLOW_50=this.fromHex_61zpoe$("FFFDE7"),this.MD_YELLOW_100=this.fromHex_61zpoe$("FFF9C4"),this.MD_YELLOW_200=this.fromHex_61zpoe$("FFF59D"),this.MD_YELLOW_300=this.fromHex_61zpoe$("FFF176"),this.MD_YELLOW_400=this.fromHex_61zpoe$("FFEE58"),this.MD_YELLOW_500=this.fromHex_61zpoe$("FFEB3B"),this.MD_YELLOW_600=this.fromHex_61zpoe$("FDD835"),this.MD_YELLOW_700=this.fromHex_61zpoe$("FBC02D"),this.MD_YELLOW_800=this.fromHex_61zpoe$("F9A825"),this.MD_YELLOW_900=this.fromHex_61zpoe$("F57F17"),this.MD_YELLOW_A100=this.fromHex_61zpoe$("FFFF8D"),this.MD_YELLOW_A200=this.fromHex_61zpoe$("FFFF00"),this.MD_YELLOW_A400=this.fromHex_61zpoe$("FFEA00"),this.MD_YELLOW_A700=this.fromHex_61zpoe$("FFD600"),this.MD_YELLOW=this.MD_YELLOW_500,this.MD_AMBER_50=this.fromHex_61zpoe$("FFF8E1"),this.MD_AMBER_100=this.fromHex_61zpoe$("FFECB3"),this.MD_AMBER_200=this.fromHex_61zpoe$("FFE082"),this.MD_AMBER_300=this.fromHex_61zpoe$("FFD54F"),this.MD_AMBER_400=this.fromHex_61zpoe$("FFCA28"),this.MD_AMBER_500=this.fromHex_61zpoe$("FFC107"),this.MD_AMBER_600=this.fromHex_61zpoe$("FFB300"),this.MD_AMBER_700=this.fromHex_61zpoe$("FFA000"),this.MD_AMBER_800=this.fromHex_61zpoe$("FF8F00"),this.MD_AMBER_900=this.fromHex_61zpoe$("FF6F00"),this.MD_AMBER_A100=this.fromHex_61zpoe$("FFE57F"),this.MD_AMBER_A200=this.fromHex_61zpoe$("FFD740"),this.MD_AMBER_A400=this.fromHex_61zpoe$("FFC400"),this.MD_AMBER_A700=this.fromHex_61zpoe$("FFAB00"),this.MD_AMBER=this.MD_AMBER_500,this.MD_ORANGE_50=this.fromHex_61zpoe$("FFF3E0"),this.MD_ORANGE_100=this.fromHex_61zpoe$("FFE0B2"),this.MD_ORANGE_200=this.fromHex_61zpoe$("FFCC80"),this.MD_ORANGE_300=this.fromHex_61zpoe$("FFB74D"),this.MD_ORANGE_400=this.fromHex_61zpoe$("FFA726"),this.MD_ORANGE_500=this.fromHex_61zpoe$("FF9800"),this.MD_ORANGE_600=this.fromHex_61zpoe$("FB8C00"),this.MD_ORANGE_700=this.fromHex_61zpoe$("F57C00"),this.MD_ORANGE_800=this.fromHex_61zpoe$("EF6C00"),this.MD_ORANGE_900=this.fromHex_61zpoe$("E65100"),this.MD_ORANGE_A100=this.fromHex_61zpoe$("FFD180"),this.MD_ORANGE_A200=this.fromHex_61zpoe$("FFAB40"),this.MD_ORANGE_A400=this.fromHex_61zpoe$("FF9100"),this.MD_ORANGE_A700=this.fromHex_61zpoe$("FF6D00"),this.MD_ORANGE=this.MD_ORANGE_500,this.MD_DEEP_ORANGE_50=this.fromHex_61zpoe$("FBE9E7"),this.MD_DEEP_ORANGE_100=this.fromHex_61zpoe$("FFCCBC"),this.MD_DEEP_ORANGE_200=this.fromHex_61zpoe$("FFAB91"),this.MD_DEEP_ORANGE_300=this.fromHex_61zpoe$("FF8A65"),this.MD_DEEP_ORANGE_400=this.fromHex_61zpoe$("FF7043"),this.MD_DEEP_ORANGE_500=this.fromHex_61zpoe$("FF5722"),this.MD_DEEP_ORANGE_600=this.fromHex_61zpoe$("F4511E"),this.MD_DEEP_ORANGE_700=this.fromHex_61zpoe$("E64A19"),this.MD_DEEP_ORANGE_800=this.fromHex_61zpoe$("D84315"),this.MD_DEEP_ORANGE_900=this.fromHex_61zpoe$("BF360C"),this.MD_DEEP_ORANGE_A100=this.fromHex_61zpoe$("FF9E80"),this.MD_DEEP_ORANGE_A200=this.fromHex_61zpoe$("FF6E40"),this.MD_DEEP_ORANGE_A400=this.fromHex_61zpoe$("FF3D00"),this.MD_DEEP_ORANGE_A700=this.fromHex_61zpoe$("DD2C00"),this.MD_DEEP_ORANGE=this.MD_DEEP_ORANGE_500,this.MD_BROWN_50=this.fromHex_61zpoe$("EFEBE9"),this.MD_BROWN_100=this.fromHex_61zpoe$("D7CCC8"),this.MD_BROWN_200=this.fromHex_61zpoe$("BCAAA4"),this.MD_BROWN_300=this.fromHex_61zpoe$("A1887F"),this.MD_BROWN_400=this.fromHex_61zpoe$("8D6E63"),this.MD_BROWN_500=this.fromHex_61zpoe$("795548"),this.MD_BROWN_600=this.fromHex_61zpoe$("6D4C41"),this.MD_BROWN_700=this.fromHex_61zpoe$("5D4037"),this.MD_BROWN_800=this.fromHex_61zpoe$("4E342E"),this.MD_BROWN_900=this.fromHex_61zpoe$("3E2723"),this.MD_BROWN=this.MD_BROWN_500,this.MD_GREY_50=this.fromHex_61zpoe$("FAFAFA"),this.MD_GREY_100=this.fromHex_61zpoe$("F5F5F5"),this.MD_GREY_200=this.fromHex_61zpoe$("EEEEEE"),this.MD_GREY_300=this.fromHex_61zpoe$("E0E0E0"),this.MD_GREY_400=this.fromHex_61zpoe$("BDBDBD"),this.MD_GREY_500=this.fromHex_61zpoe$("9E9E9E"),this.MD_GREY_600=this.fromHex_61zpoe$("757575"),this.MD_GREY_700=this.fromHex_61zpoe$("616161"),this.MD_GREY_800=this.fromHex_61zpoe$("424242"),this.MD_GREY_900=this.fromHex_61zpoe$("212121"),this.MD_GREY=this.MD_GREY_500,this.MD_BLUE_GREY_50=this.fromHex_61zpoe$("ECEFF1"),this.MD_BLUE_GREY_100=this.fromHex_61zpoe$("CFD8DC"),this.MD_BLUE_GREY_200=this.fromHex_61zpoe$("B0BEC5"),this.MD_BLUE_GREY_300=this.fromHex_61zpoe$("90A4AE"),this.MD_BLUE_GREY_400=this.fromHex_61zpoe$("78909C"),this.MD_BLUE_GREY_500=this.fromHex_61zpoe$("607D8B"),this.MD_BLUE_GREY_600=this.fromHex_61zpoe$("546E7A"),this.MD_BLUE_GREY_700=this.fromHex_61zpoe$("455A64"),this.MD_BLUE_GREY_800=this.fromHex_61zpoe$("37474F"),this.MD_BLUE_GREY_900=this.fromHex_61zpoe$("263238"),this.MD_BLUE_GREY=this.MD_BLUE_GREY_500,this.MD_COLORS=At([this.MD_RED,this.MD_PINK,this.MD_PURPLE,this.MD_DEEP_PURPLE,this.MD_INDIGO,this.MD_BLUE,this.MD_LIGHT_BLUE,this.MD_CYAN,this.MD_TEAL,this.MD_GREEN,this.MD_LIGHT_GREEN,this.MD_LIME,this.MD_YELLOW,this.MD_AMBER,this.MD_ORANGE,this.MD_DEEP_ORANGE,this.MD_BROWN,this.MD_GREY,this.MD_BLUE_GREY])}j$.$metadata$={kind:$,simpleName:"AoPipeline",interfaces:[]},Object.defineProperty(q$.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmpty_xiuk4h$_0},set:function(t){this.isEmpty_xiuk4h$_0=t}}),Object.defineProperty(q$.prototype,"isBatchUpdate",{configurable:!0,get:function(){return this.isBatchUpdate_4nlnat$_0},set:function(t){this.isBatchUpdate_4nlnat$_0=t,t||this.updateSizeAndCenter_0()}}),q$.prototype.updateSizeAndCenter_0=function(){this.isBatchUpdate||(this.mutMax_0.subtract_2gj7b4$(this.mutMin_0,this.mutSize_0),this.size.scale_749b8l$(.5,this.mutCenter_0).add_czzhiu$(this.min))},q$.prototype.addPoint_0=function(t){this.isEmpty?(this.mutMin_0.set_czzhiu$(t),this.mutMax_0.set_czzhiu$(t),this.isEmpty=!1):(t.x<this.min.x&&(this.mutMin_0.x=t.x),t.y<this.min.y&&(this.mutMin_0.y=t.y),t.z<this.min.z&&(this.mutMin_0.z=t.z),t.x>this.max.x&&(this.mutMax_0.x=t.x),t.y>this.max.y&&(this.mutMax_0.y=t.y),t.z>this.max.z&&(this.mutMax_0.z=t.z))},q$.prototype.batchUpdate_xanadp$=K("kool-kool-core.de.fabmax.kool.util.BoundingBox.batchUpdate_xanadp$",(function(t){var e=this.isBatchUpdate;this.isBatchUpdate=!0,t(this),this.isBatchUpdate=e})),q$.prototype.isFuzzyEqual_ea4od8$=function(t){return this.isEmpty===t.isEmpty&&this.min.isFuzzyEqual_2qa7tb$(t.min)&&this.max.isFuzzyEqual_2qa7tb$(t.max)},q$.prototype.clear=function(){return this.isEmpty=!0,this.mutMin_0.set_czzhiu$(To().ZERO),this.mutMax_0.set_czzhiu$(To().ZERO),this.updateSizeAndCenter_0(),this},q$.prototype.add_czzhiu$=function(t){return this.addPoint_0(t),this.updateSizeAndCenter_0(),this},q$.prototype.add_uqk38n$=function(t){return this.add_3y53ni$(t,R(t)),this},q$.prototype.add_3y53ni$=function(t,e){var i,n,o;i=e.first,n=e.last,o=e.step;for(var r=i;r<=n;r+=o)this.addPoint_0(t.get_za3lpa$(r));return this.updateSizeAndCenter_0(),this},q$.prototype.add_ea4od8$=function(t){return t.isEmpty||(this.addPoint_0(t.min),this.addPoint_0(t.max),this.updateSizeAndCenter_0()),this},q$.prototype.expand_czzhiu$=function(t){if(this.isEmpty)throw cn("Empty BoundingBox cannot be expanded");return this.mutMin_0.minusAssign_czzhiu$(t),this.mutMax_0.plusAssign_czzhiu$(t),this.updateSizeAndCenter_0(),this},q$.prototype.signedExpand_czzhiu$=function(t){if(this.isEmpty)throw cn("Empty BoundingBox cannot be expanded");return t.x>0?this.mutMax_0.x=this.mutMax_0.x+t.x:this.mutMin_0.x=this.mutMin_0.x+t.x,t.y>0?this.mutMax_0.y=this.mutMax_0.y+t.y:this.mutMin_0.y=this.mutMin_0.y+t.y,t.z>0?this.mutMax_0.z=this.mutMax_0.z+t.z:this.mutMin_0.z=this.mutMin_0.z+t.z,this.updateSizeAndCenter_0(),this},q$.prototype.set_ea4od8$=function(t){return this.mutMin_0.set_czzhiu$(t.min),this.mutMax_0.set_czzhiu$(t.max),this.mutSize_0.set_czzhiu$(t.size),this.mutCenter_0.set_czzhiu$(t.center),this.isEmpty=t.isEmpty,this},q$.prototype.set_4lfkt4$=function(t,e){return this.isEmpty=!1,this.mutMin_0.set_czzhiu$(t),this.mutMax_0.set_czzhiu$(e),this.updateSizeAndCenter_0(),this},q$.prototype.set_w8lrqs$=function(t,e,i,n,o,r){return this.isEmpty=!1,this.mutMin_0.set_y2kzbl$(t,e,i),this.mutMax_0.set_y2kzbl$(n,o,r),this.updateSizeAndCenter_0(),this},q$.prototype.move_czzhiu$=function(t){return this.move_y2kzbl$(t.x,t.y,t.z)},q$.prototype.move_y2kzbl$=function(t,e,i){if(this.isEmpty)throw cn("Empty BoundingBox cannot be moved");return this.mutMin_0.x=this.mutMin_0.x+t,this.mutMin_0.y=this.mutMin_0.y+e,this.mutMin_0.z=this.mutMin_0.z+i,this.mutMax_0.x=this.mutMax_0.x+t,this.mutMax_0.y=this.mutMax_0.y+e,this.mutMax_0.z=this.mutMax_0.z+i,this.mutCenter_0.x=this.mutCenter_0.x+t,this.mutCenter_0.y=this.mutCenter_0.y+e,this.mutCenter_0.z=this.mutCenter_0.z+i,this},q$.prototype.setMerged_hnxjto$=function(t,e){var i=this.mutMin_0,n=t.min.x,o=e.min.x;i.x=A.min(n,o);var r=this.mutMin_0,s=t.min.y,a=e.min.y;r.y=A.min(s,a);var l=this.mutMin_0,u=t.min.z,p=e.min.z;l.z=A.min(u,p);var c=this.mutMax_0,h=t.max.x,d=e.max.x;c.x=A.max(h,d);var f=this.mutMax_0,_=t.max.y,m=e.max.y;f.y=A.max(_,m);var $=this.mutMax_0,y=t.max.z,v=e.max.z;return $.z=A.max(y,v),this.isEmpty=!1,this.updateSizeAndCenter_0(),this},q$.prototype.contains_czzhiu$=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z},q$.prototype.contains_y2kzbl$=function(t,e,i){return t>=this.min.x&&t<=this.max.x&&e>=this.min.y&&e<=this.max.y&&i>=this.min.z&&i<=this.max.z},q$.prototype.contains_ea4od8$=function(t){return this.contains_czzhiu$(t.min)&&this.contains_czzhiu$(t.max)},q$.prototype.isIntersecting_ea4od8$=function(t){return this.min.x<=t.max.x&&this.max.x>=t.min.x&&this.min.y<=t.max.y&&this.max.y>=t.min.y&&this.min.z<=t.max.z&&this.max.z>=t.min.z},q$.prototype.clampToBounds_5s4mqq$=function(t){var e,i=t.x,n=this.min.x,o=this.max.x;e=i<n?n:i>o?o:i,t.x=e;var r,s=t.y,a=this.min.y,l=this.max.y;r=s<a?a:s>l?l:s,t.y=r;var u,p=t.z,c=this.min.z,h=this.max.z;u=p<c?c:p>h?h:p,t.z=u},q$.prototype.clampToBounds_5s4mqs$=function(t){var e,i=t.x,n=this.min.x,o=this.max.x;e=i<n?n:i>o?o:i,t.x=e;var r,s=t.y,a=this.min.y,l=this.max.y;r=s<a?a:s>l?l:s,t.y=r;var u,p=t.z,c=this.min.z,h=this.max.z;u=p<c?c:p>h?h:p,t.z=u},q$.prototype.pointDistance_czzhiu$=function(t){var e=this.pointDistanceSqr_czzhiu$(t);return A.sqrt(e)},q$.prototype.pointDistanceSqr_czzhiu$=function(t){if(this.contains_czzhiu$(t))return 0;var e=0,i=0,n=0,o=t.x-this.min.x;return(o<0||(o=this.max.x-t.x)<0)&&(e=o),((o=t.y-this.min.y)<0||(o=this.max.y-t.y)<0)&&(i=o),((o=t.z-this.min.z)<0||(o=this.max.z-t.z)<0)&&(n=o),e*e+i*i+n*n},q$.prototype.hitDistanceSqr_nvyeur$=function(t){var e,i,n,o,r,s;if(this.isEmpty)return nt.MAX_VALUE;if(this.contains_czzhiu$(t.origin))return 0;var a=1/t.direction.x;if(a>=0?(e=(this.min.x-t.origin.x)*a,i=(this.max.x-t.origin.x)*a):(e=(this.max.x-t.origin.x)*a,i=(this.min.x-t.origin.x)*a),(a=1/t.direction.y)>=0?(n=(this.min.y-t.origin.y)*a,o=(this.max.y-t.origin.y)*a):(n=(this.max.y-t.origin.y)*a,o=(this.min.y-t.origin.y)*a),e>o||n>i)return nt.MAX_VALUE;if(n>e&&(e=n),o<i&&(i=o),(a=1/t.direction.z)>=0?(r=(this.min.z-t.origin.z)*a,s=(this.max.z-t.origin.z)*a):(r=(this.max.z-t.origin.z)*a,s=(this.min.z-t.origin.z)*a),e>s||r>i)return nt.MAX_VALUE;if(r>e&&(e=r),e>0){var l=t.direction.x*e,u=l*l;return u+=(l=t.direction.y*e)*l,(u+=(l=t.direction.z*e)*l)/t.direction.sqrLength()}return nt.MAX_VALUE},q$.prototype.toString=function(){return this.isEmpty?"[empty]":"[min="+this.min+", max="+this.max+"]"},q$.prototype.equals=function(t){var i,n;return this===t||!!e.isType(t,q$)&&this.isEmpty===t.isEmpty&&!(null==(i=this.min)||!i.equals(t.min))&&!(null==(n=this.max)||!n.equals(t.max))},q$.prototype.hashCode=function(){var t=ot(this.isEmpty);return t=(31*(t=(31*t|0)+this.min.hashCode()|0)|0)+this.max.hashCode()|0},q$.$metadata$={kind:$,simpleName:"BoundingBox",interfaces:[]},F$.prototype.removeAt_za3lpa$=function(t){this.position>t&&(this.position=this.position-1|0),this.limit>t&&(this.limit=this.limit-1|0)},F$.$metadata$={kind:st,simpleName:"Buffer",interfaces:[]},B$.prototype.plusAssign_s8j3t7$=function(t){this.put_s8j3t7$(t)},B$.prototype.put_fqrh44$=function(t){return this.put_mj6st8$(t,0,t.length)},B$.prototype.toArray=function(){var t,e=new Int8Array(this.capacity);t=this.capacity;for(var i=0;i<t;i++)e[i]=this.get_za3lpa$(i);return e},B$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_6t1wet$(i,this.get_za3lpa$(i+1|0));F$.prototype.removeAt_za3lpa$.call(this,t)},B$.$metadata$={kind:st,simpleName:"Uint8Buffer",interfaces:[F$]},U$.prototype.plusAssign_mq22fl$=function(t){this.put_mq22fl$(t)},U$.prototype.put_gmedm2$=function(t){return this.put_359eei$(t,0,t.length)},U$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_2bqt6h$(i,this.get_za3lpa$(i+1|0));F$.prototype.removeAt_za3lpa$.call(this,t)},U$.$metadata$={kind:st,simpleName:"Uint16Buffer",interfaces:[F$]},V$.prototype.plusAssign_za3lpa$=function(t){this.put_za3lpa$(t)},V$.prototype.put_q5rwfd$=function(t){return this.put_nd5v6f$(t,0,t.length)},V$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_vux9f0$(i,this.get_za3lpa$(i+1|0));F$.prototype.removeAt_za3lpa$.call(this,t)},V$.$metadata$={kind:st,simpleName:"Uint32Buffer",interfaces:[F$]},G$.prototype.plusAssign_mx4ult$=function(t){this.put_mx4ult$(t)},G$.prototype.put_q3cr5i$=function(t){return this.put_kgymra$(t,0,t.length)},G$.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_24o109$(i,this.get_za3lpa$(i+1|0));F$.prototype.removeAt_za3lpa$.call(this,t)},G$.$metadata$={kind:st,simpleName:"Float32Buffer",interfaces:[F$]},H$.prototype.putInt8_s8j3t7$=function(t){return this.putUint8_s8j3t7$(t)},H$.prototype.putInt8_fqrh44$=function(t){return this.putUint8_fqrh44$(t)},H$.prototype.putInt8_mj6st8$=function(t,e,i){return this.putUint8_mj6st8$(t,e,i)},H$.prototype.putInt8_ay2i3f$=function(t){return this.putUint8_ay2i3f$(t)},H$.prototype.putInt16_mq22fl$=function(t){return this.putUint16_mq22fl$(t)},H$.prototype.putInt16_gmedm2$=function(t){return this.putUint16_gmedm2$(t)},H$.prototype.putInt16_359eei$=function(t,e,i){return this.putUint16_359eei$(t,e,i)},H$.prototype.putInt16_8k344i$=function(t){return this.putUint16_8k344i$(t)},H$.prototype.putInt32_za3lpa$=function(t){return this.putUint32_za3lpa$(t)},H$.prototype.putInt32_q5rwfd$=function(t){return this.putUint32_q5rwfd$(t)},H$.prototype.putInt32_nd5v6f$=function(t,e,i){return this.putUint32_nd5v6f$(t,e,i)},H$.prototype.putInt32_7hqxcs$=function(t){return this.putUint32_7hqxcs$(t)},H$.prototype.putUint8_fqrh44$=function(t){return this.putUint8_mj6st8$(t,0,t.length)},H$.prototype.putUint16_gmedm2$=function(t){return this.putUint16_359eei$(t,0,t.length)},H$.prototype.putUint32_q5rwfd$=function(t){return this.putUint32_nd5v6f$(t,0,t.length)},H$.prototype.putFloat32_q3cr5i$=function(t){return this.putFloat32_kgymra$(t,0,t.length)},H$.prototype.removeAt_za3lpa$=function(t){throw cn("MixedBuffer does not support element removal")},H$.$metadata$={kind:st,simpleName:"MixedBuffer",interfaces:[F$]},Object.defineProperty(X$.prototype,"r",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(X$.prototype,"g",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(X$.prototype,"b",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(X$.prototype,"a",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),X$.prototype.mix_y83vuj$=function(t,e){return this.mix_jpxij3$(t,e,ty())},X$.prototype.mix_jpxij3$=function(t,e,i){return i.r=t.r*e+this.r*(1-e),i.g=t.g*e+this.g*(1-e),i.b=t.b*e+this.b*(1-e),i.a=t.a*e+this.a*(1-e),i},X$.prototype.withAlpha_mx4ult$=function(t){return new Q$(this.r,this.g,this.b,t)},X$.prototype.toLinear=function(){return this.gamma_mx4ult$(2.2)},X$.prototype.toLinear_b0h0gw$=function(t){return this.gamma_ccloyr$(2.2,t)},X$.prototype.toSrgb=function(){return this.gamma_mx4ult$(1/2.2)},X$.prototype.toSrgb_b0h0gw$=function(t){return this.gamma_ccloyr$(1/2.2,t)},X$.prototype.gamma_mx4ult$=function(t){return this.gamma_ccloyr$(t,ty())},X$.prototype.gamma_ccloyr$=function(t,e){var i=this.r,n=A.pow(i,t),o=this.g,r=A.pow(o,t),s=this.b;return e.set_7b5o5w$(n,r,A.pow(s,t),this.a)},Y$.prototype.fromHsv_7b5o5w$=function(t,e,i,n){return ty().setHsv_7b5o5w$(t,e,i,n)},Y$.prototype.fromHex_61zpoe$=function(t){if(0===t.length)return this.BLACK;var i=t;35===i.charCodeAt(0)&&(i=i.substring(1));var n=0,o=0,r=0,s=1;try{if(3===i.length){var a=ue(i.substring(0,1),16),l=ue(i.substring(1,2),16),u=ue(i.substring(2,3),16);n=(a|a<<4)/255,o=(l|l<<4)/255,r=(u|u<<4)/255}else if(4===i.length){var p=ue(i.substring(0,1),16),c=ue(i.substring(1,2),16),h=ue(i.substring(2,3),16),d=ue(i.substring(2,3),16);n=(p|p<<4)/255,o=(c|c<<4)/255,r=(h|h<<4)/255,s=(d|d<<4)/255}else 6===i.length?(n=ue(i.substring(0,2),16)/255,o=ue(i.substring(2,4),16)/255,r=ue(i.substring(4,6),16)/255):8===i.length&&(n=ue(i.substring(0,2),16)/255,o=ue(i.substring(2,4),16)/255,r=ue(i.substring(4,6),16)/255,s=ue(i.substring(6,8),16)/255)}catch(i){if(!e.isType(i,pe))throw i;var f=KN.Log,_=Cz.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"invalid color code: "+t+", "+i)}return new X$(n,o,r,s)},Y$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Z$=null;function J$(){return null===Z$&&new Y$,Z$}function Q$(t,e,i,n){X$.call(this,t,e,i,n)}function ty(t){return t=t||Object.create(Q$.prototype),Q$.call(t,0,0,0,1),t}function ey(t,e){return e=e||Object.create(Q$.prototype),Q$.call(e,t.r,t.g,t.b,t.a),e}X$.$metadata$={kind:$,simpleName:"Color",interfaces:[Zo]},Object.defineProperty(Q$.prototype,"r",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(Q$.prototype,"g",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(Q$.prototype,"b",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(Q$.prototype,"a",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_24o109$(3,t)}}),Object.defineProperty(Q$.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Q$.prototype.add_czzhhz$=function(t){return this.r=this.r+t.x,this.g=this.g+t.y,this.b=this.b+t.z,this.a=this.a+t.w,this},Q$.prototype.add_m79ulu$=function(t,e){return this.r=this.r+t.x*e,this.g=this.g+t.y*e,this.b=this.b+t.z*e,this.a=this.a+t.w*e,this},Q$.prototype.subtract_czzhhz$=function(t){return this.r=this.r-t.x,this.g=this.g-t.y,this.b=this.b-t.z,this.a=this.a-t.w,this},Q$.prototype.scale_mx4ult$=function(t){return this.r=this.r*t,this.g=this.g*t,this.b=this.b*t,this.a=this.a*t,this},Q$.prototype.scaleRgb_mx4ult$=function(t){return this.r=this.r*t,this.g=this.g*t,this.b=this.b*t,this},Q$.prototype.clear=function(){return this.set_7b5o5w$(0,0,0,0),this},Q$.prototype.set_7b5o5w$=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this},Q$.prototype.set_czzhhz$=function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this.a=t.w,this},Q$.prototype.set_24o109$=function(t,e){this.fields[t]=e},Q$.prototype.setHsv_7b5o5w$=function(t,e,i,n){var o=t%360;o<0&&(o+=360);var r=B(o/60),s=o/60-r,a=i*(1-e),l=i*(1-e*s),u=i*(1-e*(1-s));switch(r){case 1:this.set_7b5o5w$(l,i,a,n);break;case 2:this.set_7b5o5w$(a,i,u,n);break;case 3:this.set_7b5o5w$(a,l,i,n);break;case 4:this.set_7b5o5w$(u,a,i,n);break;case 5:this.set_7b5o5w$(i,a,l,n);break;default:this.set_7b5o5w$(i,u,a,n)}return this},Q$.$metadata$={kind:$,simpleName:"MutableColor",interfaces:[X$]};var iy=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var o=e;return t(o(i),o(n))}}}));function ny(t,e){py(),void 0===e&&(e=256);var i,n,o,r,s,a=I(e);i=a.length-1|0;for(var l=0;l<=i;l++)a[l]=ty();if(this.gradient_0=a,t.length<2)throw cn("ColorGradient requires at least two colors");t.length>1&&fe(t,new $t(iy(cy)));var u=he(t).first,p=de(t).first,c=0,h=t[(n=c,c=n+1|0,n)],d=t[(o=c,c=o+1|0,o)];r=e;for(var f=0;f<r;f++){for(var _=f/(e-1)*(p-u)+u;_>d.first;){h=d;var m=(c=(s=c)+1|0,s);d=t[A.min(m,t.length)]}var $=1-(_-h.first)/(d.first-h.first);this.gradient_0[f].set_czzhhz$(h.second).scale_mx4ult$($).add_m79ulu$(d.second,1-$)}}function oy(){uy=this,this.DEFAULT_N=256,this.JET=hy([J$().BLUE,J$().CYAN,J$().GREEN,J$().YELLOW,J$().RED,J$().MAGENTA]),this.JET_MD=hy([J$().MD_BLUE,J$().MD_CYAN,J$().MD_GREEN,J$().MD_YELLOW,J$().MD_RED,J$().MD_PURPLE]),this.RED_YELLOW_GREEN=hy([J$().RED,J$().YELLOW,J$().GREEN]),this.RED_YELLOW_GREEN_MD=hy([J$().MD_RED,J$().MD_YELLOW,J$().MD_GREEN]),this.RED_WHITE_BLUE=new ny([ft(0,new X$(.35,0,0,1)),ft(.35,new X$(.81,.39,0,1)),ft(.5,J$().WHITE),ft(.75,new X$(0,.5,1,1)),ft(1,new X$(0,.18,.47,1))]),this.PLASMA=hy([new X$(.0504,.0298,.528,1),new X$(.1324,.0223,.5633,1),new X$(.1934,.0184,.5903,1),new X$(.2546,.0139,.6154,1),new X$(.3062,.0089,.6337,1),new X$(.3564,.0038,.6478,1),new X$(.4055,7e-4,.657,1),new X$(.4596,.0036,.6603,1),new X$(.5065,.0163,.6562,1),new X$(.5517,.0431,.6453,1),new X$(.595,.0772,.6279,1),new X$(.636,.1121,.6052,1),new X$(.6792,.1518,.5752,1),new X$(.7149,.1873,.5463,1),new X$(.7483,.2227,.5168,1),new X$(.7796,.2581,.4875,1),new X$(.8126,.2979,.4553,1),new X$(.8402,.3336,.4275,1),new X$(.8661,.3697,.4001,1),new X$(.8903,.4064,.3731,1),new X$(.9155,.4488,.3429,1),new X$(.9356,.4877,.316,1),new X$(.9534,.528,.2889,1),new X$(.9685,.5697,.2617,1),new X$(.9806,.613,.2346,1),new X$(.9899,.6638,.2049,1),new X$(.9941,.7107,.1801,1),new X$(.9939,.7593,.1591,1),new X$(.9886,.8096,.1454,1),new X$(.9763,.868,.1434,1),new X$(.9593,.9214,.1516,1),new X$(.94,.9752,.1313,1)]),this.VIRIDIS=hy([new X$(.267,.0049,.3294,1),new X$(.277,.0503,.3757,1),new X$(.2823,.095,.4173,1),new X$(.2826,.1409,.4575,1),new X$(.278,.1804,.4867,1),new X$(.2693,.2188,.5096,1),new X$(.2573,.2561,.5266,1),new X$(.2412,.2965,.5397,1),new X$(.2259,.3308,.5473,1),new X$(.2105,.3637,.5522,1),new X$(.1959,.3954,.5553,1),new X$(.1823,.4262,.5571,1),new X$(.1681,.46,.5581,1),new X$(.1563,.4896,.5579,1),new X$(.1448,.5191,.5566,1),new X$(.1337,.5485,.5535,1),new X$(.1235,.5817,.5474,1),new X$(.1194,.6111,.539,1),new X$(.1248,.6405,.5271,1),new X$(.1433,.6695,.5112,1),new X$(.1807,.7014,.4882,1),new X$(.2264,.7289,.4628,1),new X$(.2815,.7552,.4326,1),new X$(.3441,.78,.3974,1),new X$(.4129,.803,.3573,1),new X$(.4966,.8264,.3064,1),new X$(.5756,.8446,.2564,1),new X$(.6576,.8602,.2031,1),new X$(.7414,.8734,.1496,1),new X$(.8353,.886,.1026,1),new X$(.9162,.8961,.1007,1),new X$(.9932,.9062,.1439,1)])}ny.prototype.getColor_y2kzbl$=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var n=this.gradient_0,o=B((t-e)/(i-e)*this.gradient_0.length),r=this.gradient_0.length-1|0;return n[o<0?0:o>r?r:o]},ny.prototype.inverted=function(){var t,e=I(this.gradient_0.length);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=ft(i,this.gradient_0[ce(this.gradient_0)-i|0]);return new ny(e.slice(),this.gradient_0.length)},oy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ry,sy,ay,ly,uy=null;function py(){return null===uy&&new oy,uy}function cy(t){return t.first}function hy(t,e,i){void 0===e&&(e=256),i=i||Object.create(ny.prototype);var n,o=I(t.length);n=o.length-1|0;for(var r=0;r<=n;r++)o[r]=ft(r,t[r]);return ny.call(i,o.slice(),e),i}function dy(t,e){void 0===e&&(e=0),this.data=t,this.byteOffset=e,this.index=0}function fy(t,e){var i,n,o;void 0===e&&(e=yy()),this.ui=null,this.xOffset_un9ppf$_0=0,this.menuContainer_pm7z9i$_0=this.menuContainer_pm7z9i$_0,this.ui=am(t.screenDpi,"debug-overlay",void 0,(i=this,n=t,o=e,function(t,e){return t.theme=zm(gm().DARK_SIMPLE,xy),t.content.ui.setCustom_11rb$(new a_),t.unaryPlus_uv0sim$(t.container_t34sov$("dbgPanel",function(t,e,i,n){return function(o){var r;t.menuContainer_0=o,o.customTransform=function(t){return function(e){return e.translate_y2kzbl$(t.xOffset,0,0),s}}(t);var a=168+18*e.getSysInfos().size;switch(i.name){case"UPPER_LEFT":o.layoutSpec.setOrigin_4ujscr$(b_(),z_(-a,!0),b_());break;case"UPPER_RIGHT":o.layoutSpec.setOrigin_4ujscr$(z_(-180,!0),z_(-a,!0),b_());break;case"LOWER_LEFT":o.layoutSpec.setOrigin_4ujscr$(b_(),b_(),b_());break;case"LOWER_RIGHT":o.layoutSpec.setOrigin_4ujscr$(z_(-180,!0),b_(),b_())}o.layoutSpec.setSize_4ujscr$(z_(180,!0),z_(a,!0),x_());var l=new zy(n);l.layoutSpec.setOrigin_4ujscr$(b_(),z_(-40,!0),b_()),l.layoutSpec.setSize_4ujscr$(z_(180,!0),z_(40,!0),x_()),o.unaryPlus_uv0sim$(l),o.unaryPlus_uv0sim$(n.label_tokfmu$("lblFps",function(t,e){return function(i){var n;return i.layoutSpec.setOrigin_4ujscr$(b_(),z_(-37,!0),b_()),i.layoutSpec.setSize_4ujscr$(z_(t,!0),z_(37,!0),x_()),i.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),i.textAlignment=new I_(q_(),q_()),i.text="",i.font.setCustom_11rb$(gm().DARK_SIMPLE.standardFont_oei9ky$(i.dpi,e)),i.textColor.setCustom_11rb$(i.root.theme.accentColor),i.onUpdate.add_11rb$((n=i,function(t,e){return n.text=FS(e.ctx.fps,1)+" fps",s})),s}}(180,e)));var u,p,c={v:-60};o.unaryPlus_uv0sim$(n.label_tokfmu$("lblKoolVersion",(u=c,p=180,function(t){return t.layoutSpec.setOrigin_4ujscr$(b_(),z_(u.v,!0),b_()),t.layoutSpec.setSize_4ujscr$(z_(p,!0),z_(18,!0),x_()),t.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),t.textAlignment=new I_(F_(),q_()),t.text="Kool v0.6.0-200909.2017",s}))),c.v-=18,r=e.getSysInfos();for(var h=0;h!==r.size;++h)o.unaryPlus_uv0sim$(n.label_tokfmu$("lblSysInfo_"+h,wy(c,180,h))),c.v-=18;return o.unaryPlus_uv0sim$(n.label_tokfmu$("lblVpSize",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_());var o=n.onUpdate,r=function(t,e,i,n){return function(o,r){return t.windowWidth===e.v&&t.windowHeight===i.v||(e.v=t.windowWidth,i.v=t.windowHeight,n.text="Viewport: "+t.windowWidth+"x"+t.windowHeight),s}}(i,{v:-1},{v:-1},n);return o.add_11rb$(r),s}}(c,180,e))),c.v-=18,o.unaryPlus_uv0sim$(n.label_tokfmu$("lblUpTime",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_()),n.text="Up: 00:00.00";var o=n.onUpdate,r=function(t,e,i){return function(n,o){if(e.v-=t.deltaT,e.v<0){e.v+=1;var r=""+Ct(B(t.time/3600));1===r.length&&(r="0"+r);var a=""+Ct(B(t.time%3600/60));1===a.length&&(a="0"+a);var l=""+Ct(B(t.time%60));1===l.length&&(l="0"+l),i.text="Up: "+r+":"+a+"."+l}return s}}(i,{v:1},n);return o.add_11rb$(r),s}}(c,180,e))),c.v-=18,o.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumTextures",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_());var o=n.onUpdate,r=function(t,e,i,n){return function(o,r){var a=t.engineStats.textureAllocations.size,l=t.engineStats.totalTextureSize.toNumber();return a===e.v&&l===i.v||(e.v=a,i.v=l,n.text=a.toString()+" Textures: "+FS(l/1048576,1)+"M"),s}}(i,{v:-1},{v:-1},n);return o.add_11rb$(r),s}}(c,180,e))),c.v-=18,o.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumBuffers",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_());var o=n.onUpdate,r=function(t,e,i,n){return function(o,r){var a=t.engineStats.bufferAllocations.size,l=t.engineStats.totalBufferSize.toNumber();return a===e.v&&l===i.v||(e.v=a,i.v=l,n.text=a.toString()+" Buffers: "+FS(l/1048576,1)+"M"),s}}(i,{v:-1},{v:-1},n);return o.add_11rb$(r),s}}(c,180,e))),c.v-=18,o.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumShaders",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_());var o=n.onUpdate,r=function(t,e,i,n){return function(o,r){var a=t.engineStats.pipelines.size,l=t.engineStats.numDrawCommands;return l===e.v&&a===i.v||(i.v=a,e.v=l,n.text=a.toString()+" Shaders / "+l+" Cmds"),s}}(i,{v:-1},{v:-1},n);return o.add_11rb$(r),s}}(c,180,e))),c.v-=18,o.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumFaces",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_());var o=n.onUpdate,r=function(t,e,i){return function(n,o){var r=t.engineStats.numPrimitives;return r!==e.v&&(e.v=r,i.text=r.toString()+" Faces"),s}}(i,{v:-1},n);return o.add_11rb$(r),s}}(c,180,e))),s}}(i,n,o,t))),s})),this.ui.isPickingEnabled=!1}function _y(t,e){T.call(this),this.name$=t,this.ordinal$=e}function my(){my=function(){},ry=new _y("UPPER_LEFT",0),sy=new _y("UPPER_RIGHT",1),ay=new _y("LOWER_LEFT",2),ly=new _y("LOWER_RIGHT",3)}function $y(){return my(),ry}function yy(){return my(),sy}function vy(){return my(),ay}function gy(){return my(),ly}function by(t){return new a_}function xy(t){return t.componentUi_mloaa0$(by),t.containerUi_2t3ptw$(Kt("SimpleComponentUi",(function(t){return new l_(t)}))),t.standardFont_ttufcy$(new zv(Nv().SYSTEM_FONT,12)),s}function wy(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(b_(),z_(t.v,!0),b_()),n.layoutSpec.setSize_4ujscr$(z_(e,!0),z_(18,!0),x_()),n.padding=new A_(b_(),b_(),z_(4,!0),z_(4,!0)),n.textAlignment=new I_(F_(),q_()),n.text="";var o=n.onUpdate,r=function(t,e){return function(i,n){return e.text=n.ctx.getSysInfos().get_za3lpa$(t),s}}(i,n);return o.add_11rb$(r),s}}function zy(t){tm.call(this,"deltaT",t),this.graphMesh=null,this.graphGeom=new Xw(hm().UI_MESH_ATTRIBS),this.graphBuilder=new Rz(this.graphGeom),this.graphVertex=this.graphGeom.get_za3lpa$(0),this.graphIdx=0,this.prevDeltaT=0,this.graphMesh=new Hd(this.graphGeom),this.graphMesh.geometry.usage=hz(),this.graphMesh.shader=new um}function ky(t){Ny(),lc.call(this,Ny().shaderModel_l5ebkw$(t)),this.deferredCameraNode_0=null,this.sceneCamera_f7edkp$_0=t.sceneCamera,this.positionAoSampler_0=null,this.normalRoughnessSampler_0=null,this.albedoMetalSampler_0=null,this.positionAo_ot9dej$_0=t.positionAo,this.normalRoughness_mouyfl$_0=t.normalRoughness,this.albedoMetal_35ktqu$_0=t.albedoMetal}function Sy(){Cy=this,this.LIGHT_POS=new ps("aLightPos",is()),this.LIGHT_DIR=new ps("aLightDir",is())}ny.$metadata$={kind:$,simpleName:"ColorGradient",interfaces:[]},dy.prototype.hasRemaining=function(){return this.index<this.data.capacity},dy.prototype.readByte=function(){var t;return this.data.get_za3lpa$(this.byteOffset+(t=this.index,this.index=t+1|0,t)|0)},dy.prototype.readUByte=function(){var t;return 255&this.data.get_za3lpa$(this.byteOffset+(t=this.index,this.index=t+1|0,t)|0)},dy.prototype.readShort=function(){var t=this.readUShort();return t>32767&&(t=t-65536|0),t},dy.prototype.readUShort=function(){for(var t=0,e=0;e<=1;e++)t|=this.readUByte()<<(8*e|0);return t},dy.prototype.readInt=function(){return this.readUInt()},dy.prototype.readUInt=function(){for(var t=0,e=0;e<=3;e++)t|=this.readUByte()<<(8*e|0);return t},dy.prototype.readFloat=function(){var t=this.readUInt();return e.floatFromBits(t)},dy.prototype.readData_za3lpa$=function(t){for(var e,i=PN(t),n=0;n<t;n++)i.set_6t1wet$(n,this.data.get_za3lpa$((e=this.index,this.index=e+1|0,e)));return i},dy.prototype.skipBytes_za3lpa$=function(t){this.index=this.index+t|0},dy.$metadata$={kind:$,simpleName:"DataStream",interfaces:[]},Object.defineProperty(fy.prototype,"xOffset",{configurable:!0,get:function(){return this.xOffset_un9ppf$_0},set:function(t){this.xOffset_un9ppf$_0!==t&&(this.xOffset_un9ppf$_0=t,this.menuContainer_0.requestUpdateTransform())}}),Object.defineProperty(fy.prototype,"menuContainer_0",{configurable:!0,get:function(){return null==this.menuContainer_pm7z9i$_0?pt("menuContainer"):this.menuContainer_pm7z9i$_0},set:function(t){this.menuContainer_pm7z9i$_0=t}}),_y.$metadata$={kind:$,simpleName:"Position",interfaces:[T]},_y.values=function(){return[$y(),yy(),vy(),gy()]},_y.valueOf_61zpoe$=function(t){switch(t){case"UPPER_LEFT":return $y();case"UPPER_RIGHT":return yy();case"LOWER_LEFT":return vy();case"LOWER_RIGHT":return gy();default:P("No enum constant de.fabmax.kool.util.DebugOverlay.Position."+t)}},fy.$metadata$={kind:$,simpleName:"DebugOverlay",interfaces:[]},zy.prototype.collectDrawCommands_kma0q5$=function(t){var e=J$().WHITE;this.prevDeltaT>.05?e=J$().RED:this.prevDeltaT>.025&&(e=J$().YELLOW),this.setCurrentBarColor_d7aj7k$(e),this.prevDeltaT=t.deltaT,this.graphIdx=(this.graphIdx+4|0)%(4*B(this.width)|0),this.graphVertex.index=this.graphIdx;var i,n,o=this.graphVertex.position.y,r=250*t.deltaT,s=this.height,a=A.min(r,s);(i=this.graphVertex).index=i.index+1|0,this.graphVertex.position.y=o+a,(n=this.graphVertex).index=n.index+1|0,this.graphVertex.position.y=o+a,this.setCurrentBarColor_d7aj7k$(J$().MAGENTA),this.graphGeom.hasChanged=!0,tm.prototype.collectDrawCommands_kma0q5$.call(this,t)},zy.prototype.setCurrentBarColor_d7aj7k$=function(t){this.graphVertex.index=this.graphIdx;for(var e=0;e<=3;e++)this.graphVertex.index=this.graphIdx+e|0,this.graphVertex.color.set_czzhhz$(t)},zy.prototype.updateUi_aemszp$=function(t){tm.prototype.updateUi_aemszp$.call(this,t),this.setupBuilder_84rojv$(this.graphBuilder),this.graphBuilder.color=J$().WHITE;var e,i=this.graphBuilder;i.transform.push(),i.translate_y2kzbl$(0,0,0),e=B(this.width);for(var n=1;n<=e;n++)this.graphBuilder.line_s2l86p$(n-.5,0,n-.5,1,1);i.transform.pop()},zy.prototype.updateTheme_aemszp$=function(t){tm.prototype.updateTheme_aemszp$.call(this,t),this.minusAssign_f1kmr1$(this.graphMesh),this.plusAssign_f1kmr1$(this.graphMesh)},zy.$metadata$={kind:$,simpleName:"DeltaTGraph",interfaces:[tm]},Object.defineProperty(ky.prototype,"sceneCamera",{configurable:!0,get:function(){return this.sceneCamera_f7edkp$_0},set:function(t){var e;this.sceneCamera_f7edkp$_0=t,null!=(e=this.deferredCameraNode_0)&&(e.sceneCam=t)}}),Object.defineProperty(ky.prototype,"positionAo",{configurable:!0,get:function(){return this.positionAo_ot9dej$_0},set:function(t){var e;this.positionAo_ot9dej$_0=t,null!=(e=this.positionAoSampler_0)&&(e.texture=t)}}),Object.defineProperty(ky.prototype,"normalRoughness",{configurable:!0,get:function(){return this.normalRoughness_mouyfl$_0},set:function(t){var e;this.normalRoughness_mouyfl$_0=t,null!=(e=this.normalRoughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(ky.prototype,"albedoMetal",{configurable:!0,get:function(){return this.albedoMetal_35ktqu$_0},set:function(t){var e;this.albedoMetal_35ktqu$_0=t,null!=(e=this.albedoMetalSampler_0)&&(e.texture=t)}}),ky.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.blendMode=rl(),t.cullMethod=wl(),t.depthTest=pl(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},ky.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h,d,f=this.model;t:do{var _;for(h=Vp.ALL,_=f.stages.values.iterator();_.hasNext();){var m=_.next();if(0!=(m.stage.mask&h.mask)){var $,y,v=m.nodes;e:do{var g;for(g=v.iterator();g.hasNext();){var b=g.next();if(zt(b.name,"deferredCam")&&e.isType(b,Zy)){y=b;break e}}y=null}while(0);var x=null==($=y)||e.isType($,Zy)?$:c();if(null!=x){d=x;break t}}}d=null}while(0);this.deferredCameraNode_0=d,null!=(o=this.deferredCameraNode_0)&&(o.sceneCam=this.sceneCamera);var w,z,k=this.model;t:do{var S;for(w=Vp.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&w.mask)){var N,E,T=C.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(zt(O.name,"positionAo")&&e.isType(O,up)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,up)?N:c();if(null!=M){z=M;break t}}}z=null}while(0);this.positionAoSampler_0=null!=(r=z)?r.sampler:null,null!=(s=this.positionAoSampler_0)&&(s.texture=this.positionAo);var j,A,I=this.model;t:do{var R;for(j=Vp.ALL,R=I.stages.values.iterator();R.hasNext();){var L=R.next();if(0!=(L.stage.mask&j.mask)){var D,q,F=L.nodes;e:do{var B;for(B=F.iterator();B.hasNext();){var U=B.next();if(zt(U.name,"normalRoughness")&&e.isType(U,up)){q=U;break e}}q=null}while(0);var V=null==(D=q)||e.isType(D,up)?D:c();if(null!=V){A=V;break t}}}A=null}while(0);this.normalRoughnessSampler_0=null!=(a=A)?a.sampler:null,null!=(l=this.normalRoughnessSampler_0)&&(l.texture=this.normalRoughness);var G,H,W=this.model;t:do{var K;for(G=Vp.ALL,K=W.stages.values.iterator();K.hasNext();){var X=K.next();if(0!=(X.stage.mask&G.mask)){var Y,Z,J=X.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(zt(tt.name,"albedoMetal")&&e.isType(tt,up)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,up)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);this.albedoMetalSampler_0=null!=(u=H)?u.sampler:null,null!=(p=this.albedoMetalSampler_0)&&(p.texture=this.albedoMetal),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Sy.prototype.shaderModel_l5ebkw$=function(t){var e,i=new Iu("point light shader model"),n={v:null},o={v:null},r={v:null},s={v:null},a=new Lu(i),l=a.instanceAttrModelMat().output,u=a.multiplyNode_ze33is$(a.premultipliedMvpNode().outMvpMat,l).output;a.positionOutput=a.vec4TransformNode_9krp9t$(a.attrPositions().output,u).outVec4,n.v=a.stageInterfaceNode_iikjwn$("ifFragCoords",a.positionOutput),o.v=a.stageInterfaceNode_iikjwn$("ifLightColor",a.instanceAttributeNode_nm2vx5$(ds().COLORS).output,!0),r.v=a.stageInterfaceNode_iikjwn$("ifLightPos",a.instanceAttributeNode_nm2vx5$(this.LIGHT_POS).output,!0),e=t.lightType===Bd()?null:a.stageInterfaceNode_iikjwn$("ifLightDir",a.instanceAttributeNode_nm2vx5$(this.LIGHT_DIR).output,!0),s.v=e;var p=new Du(i),c=p.divideNode_ze33is$(p.splitNode_500t7j$(n.v.output,"xy").output,p.splitNode_500t7j$(n.v.output,"w").output).output,h=p.addNode_ze33is$(p.multiplyNode_tuikh5$(c,.5).output,new Fu(new wu(.5))).output,d=p.addNode_u9w9by$(new Vy(p.stage));d.inPositionAo=p.textureSamplerNode_ce41yx$(p.textureNode_61zpoe$("positionAo"),h).outColor,d.inNormalRough=p.textureSamplerNode_ce41yx$(p.textureNode_61zpoe$("normalRoughness"),h).outColor,d.inAlbedoMetallic=p.textureSamplerNode_ce41yx$(p.textureNode_61zpoe$("albedoMetal"),h).outColor;var f=d;p.addNode_u9w9by$(new Yy(p.stage)).inViewPos=f.outViewPos;var _=p.addNode_u9w9by$(new Zy(p.stage)),m=p.vec3TransformNode_vid4wo$(f.outViewPos,_.outInvViewMat,1).outVec3,$=p.vec3TransformNode_vid4wo$(f.outViewNormal,_.outInvViewMat,0).outVec3,y=p.pbrLightNode();if(y.lightBacksides=t.lightBacksides,y.inFragPos=m,y.inNormal=$,y.inCamPos=_.outCamPos,y.inAlbedo=f.outAlbedo,y.inMetallic=f.outMetallic,y.inRoughness=f.outRoughness,t.lightType===Ud()){var v=p.addNode_u9w9by$(new Xl(p.stage));v.isReducedSoi=!0,v.inLightPos=r.v.output,v.inLightColor=o.v.output,v.inLightDir=x(s.v).output,v.inFragPos=m;var g=v;y.inFragToLight=g.outFragToLightDirection,y.inRadiance=g.outRadiance}else{var b=p.addNode_u9w9by$(new Kl(p.stage));b.isReducedSoi=!0,b.inLightPos=r.v.output,b.inLightColor=o.v.output,b.inFragPos=m;var w=b;y.inFragToLight=w.outFragToLightDirection,y.inRadiance=w.outRadiance}var z=y;return p.colorOutput_a3v4si$(z.outColor),i},Sy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cy=null;function Ny(){return null===Cy&&new Sy,Cy}function Ey(){this.lightType_vh4r6w$_0=Bd(),this.sceneCamera=null,this.lightBacksides=!1,this.positionAo=null,this.normalRoughness=null,this.albedoMetal=null}function Ty(t,i){My(),void 0===i&&(i=!1);var n,o,r,a=new Id,l=new ia,u=i;for(l.name="DeferredMrtPass",l.setDynamicSize(),l.setDepthTexture_6taknv$(!1),n=(u?My().FORMATS_DEFERRED_EMISSIVE:My().FORMATS_DEFERRED).iterator();n.hasNext();){var p=n.next();l.addColorTexture_farcsl$(p)}ua.call(this,a,new ea(l)),this.withEmissive=i,this.content=e.isType(o=this.drawNode,Id)?o:c(),this.alphaMeshes_8be2vx$=M();var h,d,f=new Td(e.isType(r=t.camera,Ed)?r:c());this.camera=f,this.onBeforeCollectDrawCommands.add_11rb$((h=f,d=t,function(t){return h.sync_hrtwbc$(d.mainRenderPass.viewport,t),s})),t.addOffscreenPass_m1c2kf$(this),this.clearColors[0]=new X$(0,0,1,0),this.clearColors[1]=null,this.clearColors[2]=null,this.withEmissive&&(this.clearColors[3]=null),this.content.isFrustumChecked=!1,this.drawQueue.meshFilter=jy}function Py(){Oy=this,this.FMT_POSITION_AO=th(),this.FMT_NORMAL_ROUGH=th(),this.FMT_ALBEDO_METAL=Yc(),this.FMT_EMISSIVE=Yc(),this.FORMATS_DEFERRED=At([this.FMT_POSITION_AO,this.FMT_NORMAL_ROUGH,this.FMT_ALBEDO_METAL]),this.FORMATS_DEFERRED_EMISSIVE=At([this.FMT_POSITION_AO,this.FMT_NORMAL_ROUGH,this.FMT_ALBEDO_METAL,this.FMT_EMISSIVE])}Object.defineProperty(Ey.prototype,"lightType",{configurable:!0,get:function(){return this.lightType_vh4r6w$_0},set:function(t){var i;if(t===Fd()){var n=KN.Log,o=Cz.ERROR,r=e.getKClassFromExpression(this).simpleName;o.level>=n.level.level&&n.printer(o,r,"Directional lights are not supported for deferred lights, use global lighting instead."),i=Bd()}else i=t;this.lightType_vh4r6w$_0=i}}),Ey.$metadata$={kind:$,simpleName:"Config",interfaces:[]},ky.$metadata$={kind:$,simpleName:"DeferredLightShader",interfaces:[lc]},Object.defineProperty(Ty.prototype,"positionAo",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(0)}}),Object.defineProperty(Ty.prototype,"normalRoughness",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(1)}}),Object.defineProperty(Ty.prototype,"albedoMetal",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(2)}}),Object.defineProperty(Ty.prototype,"emissive",{configurable:!0,get:function(){return this.withEmissive?this.colorTextures.get_za3lpa$(3):null}}),Ty.prototype.collectDrawCommands_aemszp$=function(t){this.alphaMeshes_8be2vx$.clear(),ua.prototype.collectDrawCommands_aemszp$.call(this,t)},Ty.prototype.addMesh_sbx4mf$=function(t,e){var i;return t.isOpaque?i=ua.prototype.addMesh_sbx4mf$.call(this,t,e):(this.alphaMeshes_8be2vx$.add_11rb$(t),i=null),i},Ty.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},Py.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Oy=null;function My(){return null===Oy&&new Py,Oy}function jy(t){return t.isOpaque}function Ay(t,e){Ly(),lc.call(this,Ly().outputModel_0()),this.pbrOutput_0=t,this.depth_0=e}function Iy(){Ry=this}Ty.$metadata$={kind:$,simpleName:"DeferredMrtPass",interfaces:[ua]},Ay.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l=this.model;t:do{var u;for(s=Vp.ALL,u=l.stages.values.iterator();u.hasNext();){var p=u.next();if(0!=(p.stage.mask&s.mask)){var h,d,f=p.nodes;e:do{var _;for(_=f.iterator();_.hasNext();){var m=_.next();if(zt(m.name,"deferredPbrOutput")&&e.isType(m,up)){d=m;break e}}d=null}while(0);var $=null==(h=d)||e.isType(h,up)?h:c();if(null!=$){a=$;break t}}}a=null}while(0);var y=null!=(o=a)?o.sampler:null;null!=y&&(y.texture=this.pbrOutput_0);var v,g,b=this.model;t:do{var x;for(v=Vp.ALL,x=b.stages.values.iterator();x.hasNext();){var w=x.next();if(0!=(w.stage.mask&v.mask)){var z,k,S=w.nodes;e:do{var C;for(C=S.iterator();C.hasNext();){var N=C.next();if(zt(N.name,"deferredDepthOutput")&&e.isType(N,up)){k=N;break e}}k=null}while(0);var E=null==(z=k)||e.isType(z,up)?z:c();if(null!=E){g=E;break t}}}g=null}while(0);var T=null!=(r=g)?r.sampler:null;null!=T&&(T.texture=this.depth_0),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Iy.prototype.outputModel_0=function(){var t=new Iu("DeferredOutputShader"),e={v:null},i=new Lu(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.fullScreenQuadPositionNode_r20yfm$(i.attrTexCoords().output).outQuadPos;var n=new Du(t),o=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("deferredPbrOutput"),e.v.output);n.colorOutput_a3v4si$(n.hdrToLdrNode_r20yfm$(o.outColor).outColor);var r=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("deferredDepthOutput"),e.v.output);return n.depthOutput_r20yfm$(r.outColor),t},Iy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ry=null;function Ly(){return null===Ry&&new Iy,Ry}function Dy(t,e){By(),void 0===e&&(e=By().defaultMrtPbrModel_2ufela$(t)),lc.call(this,e),this.cullMethod_aft819$_0=t.cullMethod,this.uRoughness_l04x3p$_0=null,this.uMetallic_zgqm06$_0=null,this.uAlbedo_4phmdc$_0=null,this.uEmissive_2p1vku$_0=null,this.metallic_mwthg9$_0=t.metallic,this.roughness_cztq66$_0=t.roughness,this.albedo_9owvlf$_0=t.albedo,this.emissive_9uv8z3$_0=t.emissive,this.albedoSampler_4xngv3$_0=null,this.emissiveSampler_7gr0w3$_0=null,this.normalSampler_9dwwj7$_0=null,this.metallicSampler_2ylj7p$_0=null,this.roughnessSampler_3dp96a$_0=null,this.occlusionSampler_slvtxn$_0=null,this.displacementSampler_8zs1vn$_0=null,this.uDispStrength_86lbd6$_0=null,this.metallicTexName_o5b24b$_0=t.metallicTexName,this.roughnessTexName_ht09qc$_0=t.roughnessTexName,this.occlusionTexName_l8ip4v$_0=t.occlusionTexName,this.albedoMap_583l57$_0=t.albedoMap,this.emissiveMap_lef1wp$_0=t.emissiveMap,this.normalMap_o8h8ft$_0=t.normalMap,this.metallicMap_onr26n$_0=t.metallicMap,this.roughnessMap_kdfn22$_0=t.roughnessMap,this.occlusionMap_ewiscp$_0=t.occlusionMap,this.displacementMap_1yztpl$_0=t.displacementMap,this.displacementStrength_i48dea$_0=t.displacementStrength}function qy(){Fy=this}Ay.$metadata$={kind:$,simpleName:"DeferredOutputShader",interfaces:[lc]},Object.defineProperty(Dy.prototype,"metallic",{configurable:!0,get:function(){return this.metallic_mwthg9$_0},set:function(t){var e,i;this.metallic_mwthg9$_0=t,null!=(i=null!=(e=this.uMetallic_zgqm06$_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Dy.prototype,"roughness",{configurable:!0,get:function(){return this.roughness_cztq66$_0},set:function(t){var e,i;this.roughness_cztq66$_0=t,null!=(i=null!=(e=this.uRoughness_l04x3p$_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Dy.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_9owvlf$_0},set:function(t){var e,i,n;this.albedo_9owvlf$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_4phmdc$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Dy.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_9uv8z3$_0},set:function(t){var e,i,n;this.emissive_9uv8z3$_0=t,null!=(n=null!=(i=null!=(e=this.uEmissive_2p1vku$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Dy.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_583l57$_0},set:function(t){var e;this.albedoMap_583l57$_0=t,null!=(e=this.albedoSampler_4xngv3$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"emissiveMap",{configurable:!0,get:function(){return this.emissiveMap_lef1wp$_0},set:function(t){var e;this.emissiveMap_lef1wp$_0=t,null!=(e=this.emissiveSampler_7gr0w3$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_o8h8ft$_0},set:function(t){var e;this.normalMap_o8h8ft$_0=t,null!=(e=this.normalSampler_9dwwj7$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"metallicMap",{configurable:!0,get:function(){return this.metallicMap_onr26n$_0},set:function(t){var e;this.metallicMap_onr26n$_0=t,null!=(e=this.metallicSampler_2ylj7p$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"roughnessMap",{configurable:!0,get:function(){return this.roughnessMap_kdfn22$_0},set:function(t){var e;this.roughnessMap_kdfn22$_0=t,null!=(e=this.roughnessSampler_3dp96a$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"occlusionMap",{configurable:!0,get:function(){return this.occlusionMap_ewiscp$_0},set:function(t){var e;this.occlusionMap_ewiscp$_0=t,null!=(e=this.occlusionSampler_slvtxn$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"displacementMap",{configurable:!0,get:function(){return this.displacementMap_1yztpl$_0},set:function(t){var e;this.displacementMap_1yztpl$_0=t,null!=(e=this.displacementSampler_8zs1vn$_0)&&(e.texture=t)}}),Object.defineProperty(Dy.prototype,"displacementStrength",{configurable:!0,get:function(){return this.displacementStrength_i48dea$_0},set:function(t){var e,i;this.displacementStrength_i48dea$_0=t,null!=(i=null!=(e=this.uDispStrength_86lbd6$_0)?e.uniform:null)&&(i.value=t)}}),Dy.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_aft819$_0,t.blendMode=ol(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Dy.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,T=this.model;t:do{var P;for(N=Vp.ALL,P=T.stages.values.iterator();P.hasNext();){var O=P.next();if(0!=(O.stage.mask&N.mask)){var M,j,A=O.nodes;e:do{var I;for(I=A.iterator();I.hasNext();){var R=I.next();if(zt(R.name,"uMetallic")&&e.isType(R,dp)){j=R;break e}}j=null}while(0);var L=null==(M=j)||e.isType(M,dp)?M:c();if(null!=L){E=L;break t}}}E=null}while(0);this.uMetallic_zgqm06$_0=E,null!=(o=this.uMetallic_zgqm06$_0)&&(o.uniform.value=this.metallic);var D,q,F=this.model;t:do{var B;for(D=Vp.ALL,B=F.stages.values.iterator();B.hasNext();){var U=B.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var K=W.next();if(zt(K.name,"uRoughness")&&e.isType(K,dp)){G=K;break e}}G=null}while(0);var X=null==(V=G)||e.isType(V,dp)?V:c();if(null!=X){q=X;break t}}}q=null}while(0);this.uRoughness_l04x3p$_0=q,null!=(r=this.uRoughness_l04x3p$_0)&&(r.uniform.value=this.roughness);var Y,Z,J=this.model;t:do{var Q;for(Y=Vp.ALL,Q=J.stages.values.iterator();Q.hasNext();){var tt=Q.next();if(0!=(tt.stage.mask&Y.mask)){var et,it,nt=tt.nodes;e:do{var ot;for(ot=nt.iterator();ot.hasNext();){var rt=ot.next();if(zt(rt.name,"uAlbedo")&&e.isType(rt,$p)){it=rt;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,$p)?et:c();if(null!=st){Z=st;break t}}}Z=null}while(0);this.uAlbedo_4phmdc$_0=Z,null!=(l=null!=(a=null!=(s=this.uAlbedo_4phmdc$_0)?s.uniform:null)?a.value:null)&&l.set_czzhhz$(this.albedo);var at,lt,ut=this.model;t:do{var pt;for(at=Vp.ALL,pt=ut.stages.values.iterator();pt.hasNext();){var ct=pt.next();if(0!=(ct.stage.mask&at.mask)){var ht,dt,ft=ct.nodes;e:do{var _t;for(_t=ft.iterator();_t.hasNext();){var mt=_t.next();if(zt(mt.name,"uEmissive")&&e.isType(mt,$p)){dt=mt;break e}}dt=null}while(0);var $t=null==(ht=dt)||e.isType(ht,$p)?ht:c();if(null!=$t){lt=$t;break t}}}lt=null}while(0);this.uEmissive_2p1vku$_0=lt,null!=(h=null!=(p=null!=(u=this.uEmissive_2p1vku$_0)?u.uniform:null)?p.value:null)&&h.set_czzhhz$(this.emissive);var yt,vt,gt=this.model;t:do{var bt;for(yt=Vp.ALL,bt=gt.stages.values.iterator();bt.hasNext();){var xt=bt.next();if(0!=(xt.stage.mask&yt.mask)){var wt,kt,St=xt.nodes;e:do{var Ct;for(Ct=St.iterator();Ct.hasNext();){var Nt=Ct.next();if(zt(Nt.name,"tAlbedo")&&e.isType(Nt,up)){kt=Nt;break e}}kt=null}while(0);var Et=null==(wt=kt)||e.isType(wt,up)?wt:c();if(null!=Et){vt=Et;break t}}}vt=null}while(0);this.albedoSampler_4xngv3$_0=null!=(d=vt)?d.sampler:null,null!=(f=this.albedoSampler_4xngv3$_0)&&(f.texture=this.albedoMap);var Tt,Pt,Ot=this.model;t:do{var Mt;for(Tt=Vp.ALL,Mt=Ot.stages.values.iterator();Mt.hasNext();){var jt=Mt.next();if(0!=(jt.stage.mask&Tt.mask)){var At,It,Rt=jt.nodes;e:do{var Lt;for(Lt=Rt.iterator();Lt.hasNext();){var Dt=Lt.next();if(zt(Dt.name,"tEmissive")&&e.isType(Dt,up)){It=Dt;break e}}It=null}while(0);var qt=null==(At=It)||e.isType(At,up)?At:c();if(null!=qt){Pt=qt;break t}}}Pt=null}while(0);this.emissiveSampler_7gr0w3$_0=null!=(_=Pt)?_.sampler:null,null!=(m=this.emissiveSampler_7gr0w3$_0)&&(m.texture=this.emissiveMap);var Ft,Bt,Ut=this.model;t:do{var Vt;for(Ft=Vp.ALL,Vt=Ut.stages.values.iterator();Vt.hasNext();){var Gt=Vt.next();if(0!=(Gt.stage.mask&Ft.mask)){var Ht,Wt,Kt=Gt.nodes;e:do{var Xt;for(Xt=Kt.iterator();Xt.hasNext();){var Yt=Xt.next();if(zt(Yt.name,"tNormal")&&e.isType(Yt,up)){Wt=Yt;break e}}Wt=null}while(0);var Zt=null==(Ht=Wt)||e.isType(Ht,up)?Ht:c();if(null!=Zt){Bt=Zt;break t}}}Bt=null}while(0);this.normalSampler_9dwwj7$_0=null!=($=Bt)?$.sampler:null,null!=(y=this.normalSampler_9dwwj7$_0)&&(y.texture=this.normalMap);var Jt,Qt,te=this.model,ee=this.metallicTexName_o5b24b$_0;t:do{var ie;for(Jt=Vp.ALL,ie=te.stages.values.iterator();ie.hasNext();){var ne=ie.next();if(0!=(ne.stage.mask&Jt.mask)){var oe,re,se=ne.nodes;e:do{var ae;for(ae=se.iterator();ae.hasNext();){var le=ae.next();if(zt(le.name,ee)&&e.isType(le,up)){re=le;break e}}re=null}while(0);var ue=null==(oe=re)||e.isType(oe,up)?oe:c();if(null!=ue){Qt=ue;break t}}}Qt=null}while(0);this.metallicSampler_2ylj7p$_0=null!=(v=Qt)?v.sampler:null,null!=(g=this.metallicSampler_2ylj7p$_0)&&(g.texture=this.metallicMap);var pe,ce,he=this.model,de=this.roughnessTexName_ht09qc$_0;t:do{var fe;for(pe=Vp.ALL,fe=he.stages.values.iterator();fe.hasNext();){var _e=fe.next();if(0!=(_e.stage.mask&pe.mask)){var me,$e,ye=_e.nodes;e:do{var ve;for(ve=ye.iterator();ve.hasNext();){var ge=ve.next();if(zt(ge.name,de)&&e.isType(ge,up)){$e=ge;break e}}$e=null}while(0);var be=null==(me=$e)||e.isType(me,up)?me:c();if(null!=be){ce=be;break t}}}ce=null}while(0);this.roughnessSampler_3dp96a$_0=null!=(b=ce)?b.sampler:null,null!=(x=this.roughnessSampler_3dp96a$_0)&&(x.texture=this.roughnessMap);var xe,we,ze=this.model,ke=this.occlusionTexName_l8ip4v$_0;t:do{var Se;for(xe=Vp.ALL,Se=ze.stages.values.iterator();Se.hasNext();){var Ce=Se.next();if(0!=(Ce.stage.mask&xe.mask)){var Ne,Ee,Te=Ce.nodes;e:do{var Pe;for(Pe=Te.iterator();Pe.hasNext();){var Oe=Pe.next();if(zt(Oe.name,ke)&&e.isType(Oe,up)){Ee=Oe;break e}}Ee=null}while(0);var Me=null==(Ne=Ee)||e.isType(Ne,up)?Ne:c();if(null!=Me){we=Me;break t}}}we=null}while(0);this.occlusionSampler_slvtxn$_0=null!=(w=we)?w.sampler:null,null!=(z=this.occlusionSampler_slvtxn$_0)&&(z.texture=this.occlusionMap);var je,Ae,Ie=this.model;t:do{var Re;for(je=Vp.ALL,Re=Ie.stages.values.iterator();Re.hasNext();){var Le=Re.next();if(0!=(Le.stage.mask&je.mask)){var De,qe,Fe=Le.nodes;e:do{var Be;for(Be=Fe.iterator();Be.hasNext();){var Ue=Be.next();if(zt(Ue.name,"tDisplacement")&&e.isType(Ue,up)){qe=Ue;break e}}qe=null}while(0);var Ve=null==(De=qe)||e.isType(De,up)?De:c();if(null!=Ve){Ae=Ve;break t}}}Ae=null}while(0);this.displacementSampler_8zs1vn$_0=null!=(k=Ae)?k.sampler:null,null!=(S=this.displacementSampler_8zs1vn$_0)&&(S.texture=this.displacementMap);var Ge,He,We=this.model;t:do{var Ke;for(Ge=Vp.ALL,Ke=We.stages.values.iterator();Ke.hasNext();){var Xe=Ke.next();if(0!=(Xe.stage.mask&Ge.mask)){var Ye,Ze,Je=Xe.nodes;e:do{var Qe;for(Qe=Je.iterator();Qe.hasNext();){var ti=Qe.next();if(zt(ti.name,"uDispStrength")&&e.isType(ti,dp)){Ze=ti;break e}}Ze=null}while(0);var ei=null==(Ye=Ze)||e.isType(Ye,dp)?Ye:c();if(null!=ei){He=ei;break t}}}He=null}while(0);this.uDispStrength_86lbd6$_0=He,null!=(C=this.uDispStrength_86lbd6$_0)&&(C.uniform.value=this.displacementStrength),lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},qy.prototype.defaultMrtPbrModel_2ufela$=function(t){var i,n,o,r=new Iu("defaultMrtPbrModel()"),s={v:null},a={v:null},l={v:null},p={v:null},c={v:null},h={v:null},d=new Lu(r);h.v=d.mvpNode();var f=d.namedVariable_wtmwsg$("modelMat",h.v.outModelMat),_=d.namedVariable_wtmwsg$("mvpMat",h.v.outMvpMat),m=f.output,$=_.output;if(t.isInstanced&&(f.input=d.multiplyNode_ze33is$(h.v.outModelMat,d.instanceAttrModelMat().output).output,_.input=d.multiplyNode_ze33is$(h.v.outMvpMat,d.instanceAttrModelMat().output).output),t.isSkinned){var y=d.skinTransformNode_78eraa$(d.attrJoints().output,d.attrWeights().output,t.maxJoints);f.input=d.multiplyNode_ze33is$(f.input,y.outJointMat).output,_.input=d.multiplyNode_ze33is$(_.input,y.outJointMat).output}var v=d.namedVariable_wtmwsg$("modelViewMat",d.multiplyNode_ze33is$(h.v.outViewMat,m).output).output;if(t.requiresTexCoords()){var g=d.namedVariable_wtmwsg$("texCoordInput",d.attrTexCoords().output);i=d.stageInterfaceNode_iikjwn$("ifTexCoords",g.output)}else i=null;c.v=i,n=t.albedoSource===nc()?d.stageInterfaceNode_iikjwn$("ifColors",d.attrColors().output):null,s.v=n;var b,w,k=t.morphAttributes.isEmpty()?null:d.morphWeightsNode_za3lpa$(t.morphAttributes.size),S=d.namedVariable_wtmwsg$("localPosInput",d.attrPositions().output),C=d.namedVariable_wtmwsg$("localNormalInput",d.attrNormals().output),N={v:S.output},E=t.morphAttributes,T=M();for(b=E.iterator();b.hasNext();){var P=b.next();u(P.name,ds().POSITIONS.name)&&T.add_11rb$(P)}for(w=T.iterator();w.hasNext();){var O=w.next(),j=d.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(O),x(k)),A=d.multiplyNode_ze33is$(d.attributeNode_nm2vx5$(O).output,j.outWeight);N.v=d.addNode_ze33is$(N.v,A.output).output}var I,R,L=d.namedVariable_wtmwsg$("localPosMorphed",N.v),D={v:C.output},q=t.morphAttributes,F=M();for(I=q.iterator();I.hasNext();){var B=I.next();u(B.name,ds().NORMALS.name)&&F.add_11rb$(B)}for(R=F.iterator();R.hasNext();){var U=R.next(),V=d.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(U),x(k)),G=d.multiplyNode_ze33is$(d.attributeNode_nm2vx5$(U).output,V.outWeight);D.v=d.addNode_ze33is$(D.v,G.output).output}var H=d.namedVariable_wtmwsg$("localNormalMorphed",D.v);if(t.isNormalMapped){var W,K,X=d.namedVariable_wtmwsg$("localTangentInput",d.attrTangents().output),Y={v:d.splitNode_500t7j$(X.output,"xyz").output},Z=t.morphAttributes,J=M();for(W=Z.iterator();W.hasNext();){var Q=W.next();u(Q.name,ds().TANGENTS.name)&&J.add_11rb$(Q)}for(K=J.iterator();K.hasNext();){var tt=K.next(),et=d.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(tt),x(k)),it=d.multiplyNode_ze33is$(d.attributeNode_nm2vx5$(tt).output,et.outWeight);Y.v=d.addNode_ze33is$(Y.v,it.output).output}var nt=d.vec3TransformNode_vid4wo$(Y.v,v,0),ot=d.combineXyzWNode_ze33is$(nt.outVec3,d.splitNode_500t7j$(X.output,"w").output);o=d.stageInterfaceNode_iikjwn$("ifTangents",ot.output)}else o=null;l.v=o;var rt=d.namedVariable_wtmwsg$("localPosDisplaced",L.output);if(t.isDisplacementMapped){var st=d.textureNode_61zpoe$("tDisplacement"),at=d.displacementMapNode_7fvjbk$(st,x(c.v).input,L.output,H.output);at.inStrength=d.pushConstantNode1f_61zpoe$("uDispStrength").output;var lt=at;rt.input=lt.outPosition}var ut=d.vec3TransformNode_vid4wo$(H.output,v,0).outVec3;a.v=d.stageInterfaceNode_iikjwn$("ifNormals",ut);var pt=d.vec3TransformNode_vid4wo$(rt.output,v,1).outVec3;p.v=d.stageInterfaceNode_iikjwn$("ifViewPos",pt),d.positionOutput=d.vec4TransformNode_9krp9t$(rt.output,$).outVec4;var ct,ht,dt,ft,_t,mt,$t,yt,vt=new Du(r),bt=p.v.output;switch(t.albedoSource.name){case"VERTEX_ALBEDO":ct=x(s.v).output;break;case"STATIC_ALBEDO":ct=vt.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var xt=vt.textureSamplerNode_ce41yx$(vt.textureNode_61zpoe$("tAlbedo"),x(c.v).output),wt=vt.gammaNode_ze33is$(xt.outColor);if(t.isMultiplyAlbedoMap){var zt=vt.pushConstantNodeColor_61zpoe$("uAlbedo").output;ct=vt.multiplyNode_ze33is$(wt.outColor,zt).output}else ct=wt.outColor;break;case"CUBE_MAP_ALBEDO":throw gt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:ct=e.noWhenBranchMatched()}var kt={v:ct};if(null!=(dt=e.isType(ht=t.alphaMode,ac)?ht:null)&&vt.discardAlpha_ze33is$(vt.splitNode_500t7j$(kt.v,"a").output,vt.constFloat_mx4ult$(dt.cutOff)),e.isType(t.alphaMode,rc)||(kt.v=vt.combineXyzWNode_ze33is$(kt.v,vt.constFloat_mx4ult$(1)).output),t.isEmissiveMapped){var St=vt.textureSamplerNode_ce41yx$(vt.textureNode_61zpoe$("tEmissive"),x(c.v).output).outColor;if(t.isMultiplyEmissiveMap){var Ct=vt.pushConstantNodeColor_61zpoe$("uEmissive").output;ft=vt.multiplyNode_ze33is$(St,Ct).output}else ft=St}else ft=vt.pushConstantNodeColor_61zpoe$("uEmissive").output;var Nt=ft,Et=vt.normalizeNode_r20yfm$(a.v.output).output;if(t.isNormalMapped&&null!=l.v){var Tt=vt.normalMapNode_j8913i$(vt.textureNode_61zpoe$("tNormal"),x(c.v).output,Et,l.v.output);Tt.inStrength=new Fu(new wu(t.normalStrength)),_t=Tt.outNormal}else _t=Et;var Pt,Ot,Mt={v:_t};Mt.v=vt.flipBacksideNormalNode_r20yfm$(Mt.v).outNormal;var jt={v:vt.constFloat_mx4ult$(1)},At=z();if(t.isRoughnessMapped){var It=vt.textureSamplerNode_ce41yx$(vt.textureNode_61zpoe$(t.roughnessTexName),x(c.v).output).outColor,Rt=t.roughnessTexName;At.put_xwzc9p$(Rt,It);var Lt=vt.splitNode_500t7j$(It,t.roughnessChannel).output;if(t.isMultiplyRoughnessMap){var Dt=vt.pushConstantNode1f_61zpoe$("uRoughness").output;mt=vt.multiplyNode_ze33is$(Lt,Dt).output}else mt=Lt;Pt=mt}else Pt=vt.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var qt,Ft=t.metallicTexName,Bt=At.get_11rb$(Ft);if(null==Bt){var Ut=vt.textureSamplerNode_ce41yx$(vt.textureNode_61zpoe$(t.metallicTexName),x(c.v).output).outColor;At.put_xwzc9p$(Ft,Ut),qt=Ut}else qt=Bt;var Vt=qt,Gt=t.metallicTexName;At.put_xwzc9p$(Gt,Vt);var Ht=vt.splitNode_500t7j$(Vt,t.metallicChannel).output;if(t.isMultiplyMetallicMap){var Wt=vt.pushConstantNode1f_61zpoe$("uMetallic").output;$t=vt.multiplyNode_ze33is$(Ht,Wt).output}else $t=Ht;Ot=$t}else Ot=vt.pushConstantNode1f_61zpoe$("uMetallic").output;if(t.isOcclusionMapped){var Kt,Xt=t.occlusionTexName,Yt=At.get_11rb$(Xt);if(null==Yt){var Zt=vt.textureSamplerNode_ce41yx$(vt.textureNode_61zpoe$(t.occlusionTexName),x(c.v).output).outColor;At.put_xwzc9p$(Xt,Zt),Kt=Zt}else Kt=Yt;var Jt=Kt,Qt=t.occlusionTexName;At.put_xwzc9p$(Qt,Jt);var te=vt.splitNode_500t7j$(Jt,t.occlusionChannel).output;if(1!==t.occlusionStrength){var ee=t.occlusionStrength;yt=vt.addNode_ze33is$(vt.constFloat_mx4ult$(1-ee),vt.multiplyNode_tuikh5$(te,ee).output).output}else yt=te;jt.v=yt}var ie=vt.addNode_u9w9by$(new Uy(vt.stage)),ne=Pt,oe=Ot;ie.inViewPos=bt,ie.inAlbedo=kt.v,ie.inEmissive=Nt,ie.inViewNormal=Mt.v,ie.inRoughness=ne,ie.inMetallic=oe,ie.inAo=jt.v;var re=ie,se=vt.colorOutput_a3v4si$(void 0,4);return se.inColors[0]=re.outPositionAo,se.inColors[1]=re.outNormalRough,se.inColors[2]=re.outAlbedoMetallic,se.inColors[3]=re.outEmissive,r},qy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Fy=null;function By(){return null===Fy&&new qy,Fy}function Uy(t){qu.call(this,"mrtMultiplex",t,Yp().mask),this.inViewPos=new Fu(new ku(To().ZERO)),this.inAlbedo=new Fu(new ku(To().ZERO)),this.inEmissive=new Fu(new ku(To().ZERO)),this.inViewNormal=new Fu(new ku(To().ZERO)),this.inRoughness=new Fu(new wu(.5)),this.inMetallic=new Fu(new wu(0)),this.inAo=new Fu(new wu(1)),this.outPositionAo=new Fu(new mu("outPositionAo"),this),this.outNormalRough=new Fu(new mu("outNormalRough"),this),this.outAlbedoMetallic=new Fu(new mu("outAlbedoMetallic"),this),this.outEmissive=new Fu(new mu("outEmissive"),this)}function Vy(t){qu.call(this,"mrtDeMultiplex",t,Yp().mask),this.inPositionAo=new Fu(new Su(tr().ZERO)),this.inNormalRough=new Fu(new Su(tr().ZERO)),this.inAlbedoMetallic=new Fu(new Su(tr().ZERO)),this.inEmissive=new Fu(new ku(To().ZERO)),this.outViewPos=new Fu(new mu("outViewPos"),this),this.outAlbedo=new Fu(new mu("outAlbedo"),this),this.outEmissive=new Fu(new _u("outEmissive"),this),this.outViewNormal=new Fu(new _u("outViewNormal"),this),this.outRoughness=new Fu(new du("outRoughness"),this),this.outMetallic=new Fu(new du("outMetallic"),this),this.outAo=new Fu(new du("outAo"),this)}function Gy(t,e){var i,n;this.scene=t,this.mrtPass=null,this.pbrPass=null,this.aoPipeline=null,this.reflectionPass=null,this.reflectionDenoisePass=null,this.shadowMaps=null,this.renderOutput=null,this.noSsrMap_0=new dh(new X$(0,0,0,0)),this.maxGlobalLights_0=e.maxGlobalLights,this.isAoAvailable_0=e.isWithAmbientOcclusion,this.isssrAvailable_0=e.isWithScreenSpaceReflections,this.isEnabled_4awwas$_0=!0,this.isAoEnabled_1ruccy$_0=this.isAoAvailable_0,this.isSsrEnabled_blaxhc$_0=this.isssrAvailable_0,this.reflectionMapSize=.7,this.mrtPass=new Ty(this.scene,e.isWithEmissive),this.aoPipeline=e.isWithAmbientOcclusion?D$().createDeferred_4lrvgg$(this.scene,this.mrtPass):null,this.shadowMaps=null!=(i=e.shadowMaps)?i:this.createShadowMapsFromSceneLights_0();var o,r=e.pbrSceneShader;if(null==r){var a=new lv;a.isWithEmissive=e.isWithEmissive,a.isScrSpcAmbientOcclusion=e.isWithAmbientOcclusion,a.isScrSpcReflections=e.isWithScreenSpaceReflections,a.maxLights=e.maxGlobalLights,xt(a.shadowMaps,this.shadowMaps),a.useImageBasedLighting_po417x$(e.environmentMaps),r=new ov(a)}r.setMrtMaps_u6tred$(this.mrtPass),this.pbrPass=new ev(this.scene,this.mrtPass,r),this.pbrPass.sceneShader.scrSpcAmbientOcclusionMap=null!=(n=this.aoPipeline)?n.aoMap:null,e.isWithScreenSpaceReflections?(this.reflectionPass=new dv(this.mrtPass,this.pbrPass,e.baseReflectionStep),this.reflectionDenoisePass=new uv(this.reflectionPass,this.mrtPass.positionAo),this.pbrPass.sceneShader.scrSpcReflectionMap=this.reflectionDenoisePass.colorTexture,this.scene.addOffscreenPass_m1c2kf$(this.reflectionPass),this.scene.addOffscreenPass_m1c2kf$(this.reflectionDenoisePass)):(this.reflectionPass=null,this.reflectionDenoisePass=null),this.renderOutput=this.pbrPass.createOutputQuad(),this.scene.onRenderScene.add_11rb$((o=this,function(t,e){var i,n=t.mainRenderPass.viewport.width,r=t.mainRenderPass.viewport.height;if(n>0&&r>0&&(n!==o.mrtPass.width||r!==o.mrtPass.height)&&(o.mrtPass.resize_w70mbp$(n,r,e),o.pbrPass.resize_w70mbp$(n,r,e)),null!=(i=o.reflectionPass)){var a,l=o,u=Lt(n*l.reflectionMapSize),p=Lt(r*l.reflectionMapSize);u>0&&p>0&&(u!==i.width||p!==i.height)&&(i.resize_w70mbp$(u,p,e),null!=(a=l.reflectionDenoisePass)&&a.resize_w70mbp$(u,p,e))}return s})),this.scene.onDispose.add_11rb$(function(t){return function(e,i){return t.noSsrMap_0.dispose(),s}}(this))}function Hy(){this.isWithEmissive=!1,this.isWithAmbientOcclusion=!0,this.isWithScreenSpaceReflections=!0,this.isWithImageBasedLighting=!1,this.maxGlobalLights=4,this.lightBacksides=!1,this.baseReflectionStep=.1,this.environmentMaps=null,this.shadowMaps=null,this.pbrSceneShader=null}function Wy(t){this.lightInstances=M(),this.isDynamic=!0,this.lightInstanceData_0=new Yz(At([Qz().MODEL_MAT,Ny().LIGHT_POS,ds().COLORS]),1e4),this.modelMat_0=new En,this.encodedLightData_0=new Float32Array(8);var e=new Hd(new Xw(qt(ds().POSITIONS)),null);e.isFrustumChecked=!1,e.instances=this.lightInstanceData_0,e.generate_v2sixm$(Xy);var i=new Ey;i.lightType=Bd(),i.sceneCamera=t.camera,i.positionAo=t.positionAo,i.normalRoughness=t.normalRoughness,i.albedoMetal=t.albedoMetal;var n,o=i;e.shader=new ky(o),e.onUpdate.add_11rb$((n=this,function(t,e){return n.isDynamic&&n.updateLightData(),s})),this.mesh=e}function Ky(){this.position=jo(),this.color=ey(J$().WHITE),this.intensity=1}function Xy(t){var e=(new Gz).icoDefaults();return e.steps=0,e.radius=1.176,t.icoSphere_mojs8w$(e),s}function Yy(t){qu.call(this,"discardClear",t),this.inViewPos=new Fu(new Su(tr().ZERO))}function Zy(t){qu.call(this,"deferredCam",t),this.uProjMat_0=new rd("uProjMat"),this.uInvViewMat_0=new rd("uInvViewMat"),this.uCamPos_0=new Jh("uCamPos"),this.uViewport_0=new Jh("uViewport"),this.outProjMat=new Fu(new xu(this.uProjMat_0.name),this),this.outInvViewMat=new Fu(new xu(this.uInvViewMat_0.name),this),this.outCamPos=new Fu(new mu(this.uCamPos_0.name),this),this.outViewport=new Fu(new mu(this.uViewport_0.name),this),this.sceneCam=null}function Jy(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uProjMat_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewMat_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uCamPos_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewport_0}}(t)),e.onUpdate=function(t){return function(e,i){var n=t.sceneCam;null!=n&&(t.uProjMat_0.value.set_d4zu6l$(n.proj),t.uInvViewMat_0.value.set_d4zu6l$(n.invView),t.uCamPos_0.value.set_2qa7tb$(n.globalPos,1));var o=i.renderPass.viewport;return t.uViewport_0.value.set_7b5o5w$(o.x,o.y,o.width,o.height),s}}(t),s}}function Qy(t,e){this.maxSpotAngle=t,this.lightInstances=M(),this.isDynamic=!0,this.lightInstanceData_0=new Yz(At([Qz().MODEL_MAT,Ny().LIGHT_POS,Ny().LIGHT_DIR,ds().COLORS]),1e4),this.modelMat_0=new En,this.encodedLightData_0=new Float32Array(12),this.tmpLightDir_0=jo();var i,n=new Hd(new Xw(qt(ds().POSITIONS)),null);n.isFrustumChecked=!1,n.instances=this.lightInstanceData_0,n.generate_v2sixm$((i=this,function(t){return i.makeHalfSphereCone_0(t,i.maxSpotAngle,1.17),s}));var o=new Ey;o.lightType=Ud(),o.sceneCamera=e.camera,o.positionAo=e.positionAo,o.normalRoughness=e.normalRoughness,o.albedoMetal=e.albedoMetal;var r=o;n.shader=new ky(r),n.onUpdate.add_11rb$(function(t){return function(e,i){return t.isDynamic&&t.updateLightData(),s}}(this)),this.mesh=n}function tv(){this.position=jo(),this.orientation=new $n,this.spotAngle=60,this.color=ey(J$().WHITE),this.intensity=1}function ev(t,i,n){var o,r=new Id,a=new ia;a.name="PbrLightingPass",a.setSize_vux9f0$(i.config.width,i.config.height),a.addColorTexture_farcsl$(th()),a.clearDepthTexture(),ua.call(this,r,new ea(a)),this.mrtPass=i,this.sceneShader=n,this.dynamicPointLights=new Wy(this.mrtPass),this.staticPointLights=new Wy(this.mrtPass),this.mutSpotLights_0=M(),this.content=e.isType(o=this.drawNode,Id)?o:c(),this.dynamicPointLights.isDynamic=!0,this.staticPointLights.isDynamic=!1,this.lighting=t.lighting,this.clearColor=new X$(0,0,0,0),this.camera=this.mrtPass.camera,t.addOffscreenPass_m1c2kf$(this);var l=this.content;l.isFrustumChecked=!1;var u,p,h=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);h.isFrustumChecked=!1,h.generate_v2sixm$(nv),h.shader=this.sceneShader,l.unaryPlus_uv0sim$(h),l.unaryPlus_uv0sim$(this.dynamicPointLights.mesh),l.unaryPlus_uv0sim$(this.staticPointLights.mesh),this.dependsOn_yqp8fe$(this.mrtPass),t.mainRenderPass.onAfterCollectDrawCommands.add_11rb$((u=this,p=t,function(t){var e;if(u.isEnabled){e=u.mrtPass.alphaMeshes_8be2vx$;for(var i=0;i!==e.size;++i)p.mainRenderPass.drawQueue.addMesh_sbx4mf$(u.mrtPass.alphaMeshes_8be2vx$.get_za3lpa$(i),t)}return s}))}function iv(t){var e=new Hz;return e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function nv(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function ov(t,e){var i,n,o;av(),void 0===e&&(e=av().defaultDeferredPbrModel_ijjr66$(t)),lc.call(this,e),this.deferredCameraNode_0=null,this.sceneCamera_79hi92$_0=null,this.depthSampler_0=null,this.positionAoSampler_0=null,this.normalRoughnessSampler_0=null,this.albedoMetalSampler_0=null,this.emissiveSampler_0=null,this.depth_tvzo14$_0=null,this.positionAo_xpzjm6$_0=null,this.normalRoughness_ruv8si$_0=null,this.albedoMetal_4sc1kt$_0=null,this.emissive_4k8acu$_0=null,this.uAmbient_0=null,this.ambient_kdw3d9$_0=new X$(.03,.03,.03,1),this.irradianceMapSampler_0=null,this.reflectionMapSampler_0=null,this.brdfLutSampler_0=null,this.irradianceMap_33niit$_0=null!=(i=t.environmentMaps)?i.irradianceMap:null,this.reflectionMap_496w8q$_0=null!=(n=t.environmentMaps)?n.reflectionMap:null,this.brdfLut_bolscy$_0=null!=(o=t.environmentMaps)?o.brdfLut:null,this.ssaoSampler_0=null,this.scrSpcAmbientOcclusionMap_4r7yg8$_0=null,this.ssrSampler_0=null,this.scrSpcReflectionMap_b22z3y$_0=null;var r,s=I(t.shadowMaps.size);r=s.length-1|0;for(var a=0;a<=r;a++)s[a]=t.shadowMaps.get_za3lpa$(a);this.shadowMaps_0=s;var l,u=I(this.shadowMaps_0.length);l=u.length-1|0;for(var p=0;p<=l;p++)u[p]=null;this.depthSamplers_0=u,this.isReceivingShadow_0=!t.shadowMaps.isEmpty()}function rv(){sv=this}Uy.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inViewPos,this.inAlbedo,this.inEmissive,this.inViewNormal,this.inRoughness,this.inMetallic,this.inAo])},Uy.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                "+this.outPositionAo.declare()+" = vec4("+this.inViewPos.ref3f_61zpoe$()+", "+this.inAo.ref1f_61zpoe$()+");\n                "+this.outNormalRough.declare()+" = vec4("+this.inViewNormal.ref3f_61zpoe$()+", "+this.inRoughness.ref1f_61zpoe$()+");\n                "+this.outAlbedoMetallic.declare()+" = vec4("+this.inAlbedo.ref3f_61zpoe$()+", "+this.inMetallic.ref1f_61zpoe$()+");\n                "+this.outEmissive.declare()+" = vec4("+this.inEmissive.ref3f_61zpoe$()+", 1.0);\n            ")},Uy.$metadata$={kind:$,simpleName:"MrtMultiplexNode",interfaces:[qu]},Vy.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inPositionAo,this.inNormalRough,this.inAlbedoMetallic])},Vy.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                "+this.outViewPos.declare()+" = vec4("+this.inPositionAo.ref3f_61zpoe$()+", 1.0);\n                "+this.outAlbedo.declare()+" = vec4("+this.inAlbedoMetallic.ref3f_61zpoe$()+", 1.0);\n                "+this.outEmissive.declare()+" = "+this.inEmissive.ref3f_61zpoe$()+";\n                "+this.outViewNormal.declare()+" = normalize("+this.inNormalRough.ref3f_61zpoe$()+");\n                "+this.outRoughness.declare()+" = "+this.inNormalRough.ref4f_61zpoe$()+".a;\n                "+this.outMetallic.declare()+" = "+this.inAlbedoMetallic.ref4f_61zpoe$()+".a;\n                "+this.outAo.declare()+" = "+this.inPositionAo.ref4f_61zpoe$()+".a;\n            ")},Vy.$metadata$={kind:$,simpleName:"MrtDeMultiplexNode",interfaces:[qu]},Dy.$metadata$={kind:$,simpleName:"DeferredPbrShader",interfaces:[lc]},Object.defineProperty(Gy.prototype,"contentGroup",{configurable:!0,get:function(){return this.mrtPass.content}}),Object.defineProperty(Gy.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_4awwas$_0},set:function(t){this.isEnabled_4awwas$_0=t,this.updateEnabled_0()}}),Object.defineProperty(Gy.prototype,"isAoEnabled",{configurable:!0,get:function(){return this.isAoEnabled_1ruccy$_0},set:function(t){this.isAoEnabled_1ruccy$_0=t&&this.isAoAvailable_0,this.updateEnabled_0()}}),Object.defineProperty(Gy.prototype,"isSsrEnabled",{configurable:!0,get:function(){return this.isSsrEnabled_blaxhc$_0},set:function(t){this.isSsrEnabled_blaxhc$_0=t&&this.isssrAvailable_0,this.updateEnabled_0()}}),Gy.prototype.updateEnabled_0=function(){var t,e,i,n,o;for(o=this.shadowMaps.iterator();o.hasNext();)o.next().isShadowMapEnabled=this.isEnabled;null!=(t=this.aoPipeline)&&(t.isEnabled=this.isEnabled&&this.isAoEnabled),this.mrtPass.isEnabled=this.isEnabled,this.pbrPass.isEnabled=this.isEnabled,null!=(e=this.reflectionPass)&&(e.isEnabled=this.isEnabled&&this.isSsrEnabled),null!=(i=this.reflectionDenoisePass)&&(i.isEnabled=this.isEnabled&&this.isSsrEnabled),this.pbrPass.sceneShader.scrSpcReflectionMap=this.isSsrEnabled?null!=(n=this.reflectionDenoisePass)?n.colorTexture:null:this.noSsrMap_0},Gy.prototype.createShadowMapsFromSceneLights_0=function(){var t,i,n=M(),o=this.maxGlobalLights_0,r=this.scene.lighting.lights.size;t=A.min(o,r);for(var s=0;s<t;s++){switch(this.scene.lighting.lights.get_za3lpa$(s).type.name){case"DIRECTIONAL":i=new Sk(this.scene,s,void 0,void 0,void 0,this.mrtPass.content);break;case"SPOT":i=new zk(this.scene,s,void 0,this.mrtPass.content);break;case"POINT":var a=KN.Log,l=Cz.WARN,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"Point light shadow maps not yet supported"),i=null;break;default:i=e.noWhenBranchMatched()}var p=i;null!=p&&n.add_11rb$(p)}return n},Gy.$metadata$={kind:$,simpleName:"DeferredPipeline",interfaces:[]},Hy.prototype.useShadowMaps_gdx315$=function(t){this.shadowMaps=t},Hy.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isWithImageBasedLighting=null!=t},Hy.$metadata$={kind:$,simpleName:"DeferredPipelineConfig",interfaces:[]},Wy.prototype.updateLightData=function(){var t;this.lightInstanceData_0.clear();var e=this.lightInstances.size,i=this.lightInstanceData_0.maxInstances;t=A.min(e,i);for(var n=0;n<t;n++){var o=this.lightInstanceData_0;o.checkBufferSize_za3lpa$();var r=o.dataF.position,s=o.dataF;this.encodeLight_0(this.lightInstances.get_za3lpa$(n)),s.put_q3cr5i$(this.modelMat_0.matrix),s.put_q3cr5i$(this.encodedLightData_0);var a=o.dataF.position-r|0;if(a!==o.instanceSizeF)throw gt("Expected data to grow by "+o.instanceSizeF+" elements, instead it grew by "+a);o.numInstances=o.numInstances+1|0,o.hasChanged=!0}},Wy.prototype.encodeLight_0=function(t){this.modelMat_0.setIdentity(),this.modelMat_0.translate_czzhiu$(t.position);var e=t.intensity,i=A.sqrt(e);this.modelMat_0.scale_y2kzbl$(i,i,i),this.encodedLightData_0[0]=t.position.x,this.encodedLightData_0[1]=t.position.y,this.encodedLightData_0[2]=t.position.z,this.encodedLightData_0[3]=Bd().encoded,this.encodedLightData_0[4]=t.color.r,this.encodedLightData_0[5]=t.color.g,this.encodedLightData_0[6]=t.color.b,this.encodedLightData_0[7]=t.intensity},Wy.prototype.addPointLight_at6cwi$=function(t){this.lightInstances.add_11rb$(t)},Wy.prototype.addPointLight_v2bnrz$=K("kool-kool-core.de.fabmax.kool.util.deferred.DeferredPointLights.addPointLight_v2bnrz$",X((function(){var e=t.de.fabmax.kool.util.deferred.DeferredPointLights.PointLight;return function(t){var i=new e;return t(i),this.addPointLight_at6cwi$(i),i}}))),Wy.prototype.removePointLight_at6cwi$=function(t){this.lightInstances.remove_11rb$(t)},Ky.$metadata$={kind:$,simpleName:"PointLight",interfaces:[]},Wy.$metadata$={kind:$,simpleName:"DeferredPointLights",interfaces:[]},Yy.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewPos)},Yy.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("if ("+this.inViewPos.name+".z > 0.0) { discard; }")},Yy.$metadata$={kind:$,simpleName:"DiscardClearNode",interfaces:[qu]},Zy.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Jy(this))},Zy.$metadata$={kind:$,simpleName:"DeferredCameraNode",interfaces:[qu]},Qy.prototype.updateLightData=function(){var t;this.lightInstanceData_0.clear();var e=this.lightInstances.size,i=this.lightInstanceData_0.maxInstances;t=A.min(e,i);for(var n=0;n<t;n++){var o=this.lightInstanceData_0;o.checkBufferSize_za3lpa$();var r=o.dataF.position,s=o.dataF;this.encodeLight_0(this.lightInstances.get_za3lpa$(n)),s.put_q3cr5i$(this.modelMat_0.matrix),s.put_q3cr5i$(this.encodedLightData_0);var a=o.dataF.position-r|0;if(a!==o.instanceSizeF)throw gt("Expected data to grow by "+o.instanceSizeF+" elements, instead it grew by "+a);o.numInstances=o.numInstances+1|0,o.hasChanged=!0}},Qy.prototype.encodeLight_0=function(t){this.modelMat_0.setIdentity(),this.modelMat_0.translate_czzhiu$(t.position);var e=t.intensity,i=A.sqrt(e);this.modelMat_0.scale_y2kzbl$(i,i,i),this.modelMat_0.rotate_d4zu7e$(t.orientation),this.tmpLightDir_0.set_czzhiu$(To().X_AXIS),t.orientation.transform_5s4mqq$(this.tmpLightDir_0),this.encodedLightData_0[0]=t.position.x,this.encodedLightData_0[1]=t.position.y,this.encodedLightData_0[2]=t.position.z,this.encodedLightData_0[3]=Ud().encoded,this.encodedLightData_0[4]=this.tmpLightDir_0.x,this.encodedLightData_0[5]=this.tmpLightDir_0.y,this.encodedLightData_0[6]=this.tmpLightDir_0.z;var n=this.encodedLightData_0,o=this.maxSpotAngle,r=t.spotAngle,s=A.min(o,r)/2*LN.DEG_2_RAD;n[7]=A.cos(s),this.encodedLightData_0[8]=t.color.r,this.encodedLightData_0[9]=t.color.g,this.encodedLightData_0[10]=t.color.b,this.encodedLightData_0[11]=t.intensity},Qy.prototype.addSpotLight_sdnkeo$=function(t){this.lightInstances.add_11rb$(t)},Qy.prototype.addSpotLight_g3dtq9$=K("kool-kool-core.de.fabmax.kool.util.deferred.DeferredSpotLights.addSpotLight_g3dtq9$",X((function(){var e=t.de.fabmax.kool.util.deferred.DeferredSpotLights.SpotLight;return function(t){var i=new e;return t(i),this.addSpotLight_sdnkeo$(i),i}}))),Qy.prototype.removeSpotLight_sdnkeo$=function(t){this.lightInstances.remove_11rb$(t)},tv.prototype.setDirection_czzhiu$=function(t){var e=t.dot_czzhiu$(To().Y_AXIS),i=A.abs(e)>.9?To().X_AXIS:To().Y_AXIS,n=t.cross_2gj7b4$(i,jo()),o=t.cross_2gj7b4$(n,jo());this.orientation.setColVec_ky00qo$(0,t),this.orientation.setColVec_ky00qo$(1,n),this.orientation.setColVec_ky00qo$(2,o)},tv.$metadata$={kind:$,simpleName:"SpotLight",interfaces:[]},Qy.prototype.makeHalfSphereCone_0=function(t,e,i){for(var n=(e<0?0:e>360?360:e)/2,o=B(4*n/180),r=t.vertex_n440gp$(new Co(i,0,0),To().X_AXIS),s=0;s<8;s++){var a=45*LN.DEG_2_RAD,l=n*LN.DEG_2_RAD,u=A.min(a,l),p=A.cos(u)*i,c=A.sin(u)*i,h=2*U.PI*s/8,d=A.sin(h)*c,f=2*U.PI*s/8,_=new Co(p,d,A.cos(f)*c),m=t.vertex_n440gp$(_,_);s>0&&t.geometry.addTriIndices_qt1dr2$(r,m,m-1|0),7===s&&t.geometry.addTriIndices_qt1dr2$(r,m-8+1|0,m)}for(var $=0;$<o;$++)for(var y=$<(o-1|0)?45*($+2|0)*LN.DEG_2_RAD:n*LN.DEG_2_RAD,v=0;v<8;v++){var g=A.cos(y)*i,b=A.sin(y)*i,x=2*U.PI*v/8,w=A.sin(x)*b,z=2*U.PI*v/8,k=new Co(g,w,A.cos(z)*b),S=t.vertex_n440gp$(k,k);v>0&&(t.geometry.addTriIndices_qt1dr2$(S,S-1|0,S-8|0),t.geometry.addTriIndices_qt1dr2$(S-1|0,S-8-1|0,S-8|0)),7===v&&(t.geometry.addTriIndices_qt1dr2$(S,S-8|0,S-16+1|0),t.geometry.addTriIndices_qt1dr2$(S-8+1|0,S,S-16+1|0))}for(var C=t.vertex_n440gp$(new Co(-.1,0,0),To().NEG_X_AXIS),N=0;N<8;N++)N<7?t.geometry.addTriIndices_qt1dr2$(C,C-8+N|0,C-8+N+1|0):t.geometry.addTriIndices_qt1dr2$(C,C-1|0,C-8|0)},Qy.$metadata$={kind:$,simpleName:"DeferredSpotLights",interfaces:[]},Object.defineProperty(ev.prototype,"spotLights",{configurable:!0,get:function(){return this.mutSpotLights_0}}),ev.prototype.addSpotLights_mx4ult$=function(t){var e=new Qy(t,this.mrtPass);return this.content.plusAssign_f1kmr1$(e.mesh),this.mutSpotLights_0.add_11rb$(e),e},ev.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},ev.prototype.createOutputQuad=function(){return Gd(void 0,void 0,(t=this,function(e){return e.isFrustumChecked=!1,e.generate_v2sixm$(iv),e.shader=new Ay(x(t.colorTexture),x(t.mrtPass.depthTexture)),s}));var t},ev.$metadata$={kind:$,simpleName:"PbrLightingPass",interfaces:[ua]},Object.defineProperty(ov.prototype,"sceneCamera",{configurable:!0,get:function(){return this.sceneCamera_79hi92$_0},set:function(t){var e;this.sceneCamera_79hi92$_0=t,null!=(e=this.deferredCameraNode_0)&&(e.sceneCam=t)}}),Object.defineProperty(ov.prototype,"depth",{configurable:!0,get:function(){return this.depth_tvzo14$_0},set:function(t){var e;this.depth_tvzo14$_0=t,null!=(e=this.depthSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"positionAo",{configurable:!0,get:function(){return this.positionAo_xpzjm6$_0},set:function(t){var e;this.positionAo_xpzjm6$_0=t,null!=(e=this.positionAoSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"normalRoughness",{configurable:!0,get:function(){return this.normalRoughness_ruv8si$_0},set:function(t){var e;this.normalRoughness_ruv8si$_0=t,null!=(e=this.normalRoughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"albedoMetal",{configurable:!0,get:function(){return this.albedoMetal_4sc1kt$_0},set:function(t){var e;this.albedoMetal_4sc1kt$_0=t,null!=(e=this.albedoMetalSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_4k8acu$_0},set:function(t){var e;this.emissive_4k8acu$_0=t,null!=(e=this.emissiveSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"ambient",{configurable:!0,get:function(){return this.ambient_kdw3d9$_0},set:function(t){var e,i,n;this.ambient_kdw3d9$_0=t,null!=(n=null!=(i=null!=(e=this.uAmbient_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(ov.prototype,"irradianceMap",{configurable:!0,get:function(){return this.irradianceMap_33niit$_0},set:function(t){var e;this.irradianceMap_33niit$_0=t,null!=(e=this.irradianceMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"reflectionMap",{configurable:!0,get:function(){return this.reflectionMap_496w8q$_0},set:function(t){var e;this.reflectionMap_496w8q$_0=t,null!=(e=this.reflectionMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"brdfLut",{configurable:!0,get:function(){return this.brdfLut_bolscy$_0},set:function(t){var e;this.brdfLut_bolscy$_0=t,null!=(e=this.brdfLutSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"scrSpcAmbientOcclusionMap",{configurable:!0,get:function(){return this.scrSpcAmbientOcclusionMap_4r7yg8$_0},set:function(t){var e;this.scrSpcAmbientOcclusionMap_4r7yg8$_0=t,null!=(e=this.ssaoSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"scrSpcReflectionMap",{configurable:!0,get:function(){return this.scrSpcReflectionMap_b22z3y$_0},set:function(t){var e;this.scrSpcReflectionMap_b22z3y$_0=t,null!=(e=this.ssrSampler_0)&&(e.texture=t)}}),ov.prototype.setMrtMaps_u6tred$=function(t){this.sceneCamera=t.camera,this.depth=t.depthTexture,this.positionAo=t.positionAo,this.normalRoughness=t.normalRoughness,this.albedoMetal=t.albedoMetal,this.emissive=t.emissive},ov.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.depthTest=cl(),t.blendMode=ol(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},ov.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,T,P,O=this.model;t:do{var M;for(T=Vp.ALL,M=O.stages.values.iterator();M.hasNext();){var j=M.next();if(0!=(j.stage.mask&T.mask)){var A,I,R=j.nodes;e:do{var L;for(L=R.iterator();L.hasNext();){var D=L.next();if(zt(D.name,"deferredCam")&&e.isType(D,Zy)){I=D;break e}}I=null}while(0);var q=null==(A=I)||e.isType(A,Zy)?A:c();if(null!=q){P=q;break t}}}P=null}while(0);this.deferredCameraNode_0=P,null!=(o=this.deferredCameraNode_0)&&(o.sceneCam=this.sceneCamera);var F,B,U=this.model;t:do{var V;for(F=Vp.ALL,V=U.stages.values.iterator();V.hasNext();){var G=V.next();if(0!=(G.stage.mask&F.mask)){var H,W,K=G.nodes;e:do{var X;for(X=K.iterator();X.hasNext();){var Y=X.next();if(zt(Y.name,"depth")&&e.isType(Y,up)){W=Y;break e}}W=null}while(0);var Z=null==(H=W)||e.isType(H,up)?H:c();if(null!=Z){B=Z;break t}}}B=null}while(0);this.depthSampler_0=null!=(r=B)?r.sampler:null,null!=(s=this.depthSampler_0)&&(s.texture=this.depth);var J,Q,tt=this.model;t:do{var et;for(J=Vp.ALL,et=tt.stages.values.iterator();et.hasNext();){var it=et.next();if(0!=(it.stage.mask&J.mask)){var nt,ot,rt=it.nodes;e:do{var st;for(st=rt.iterator();st.hasNext();){var at=st.next();if(zt(at.name,"positionAo")&&e.isType(at,up)){ot=at;break e}}ot=null}while(0);var lt=null==(nt=ot)||e.isType(nt,up)?nt:c();if(null!=lt){Q=lt;break t}}}Q=null}while(0);this.positionAoSampler_0=null!=(a=Q)?a.sampler:null,null!=(l=this.positionAoSampler_0)&&(l.texture=this.positionAo);var ut,pt,ct=this.model;t:do{var ht;for(ut=Vp.ALL,ht=ct.stages.values.iterator();ht.hasNext();){var dt=ht.next();if(0!=(dt.stage.mask&ut.mask)){var ft,_t,mt=dt.nodes;e:do{var $t;for($t=mt.iterator();$t.hasNext();){var yt=$t.next();if(zt(yt.name,"normalRoughness")&&e.isType(yt,up)){_t=yt;break e}}_t=null}while(0);var vt=null==(ft=_t)||e.isType(ft,up)?ft:c();if(null!=vt){pt=vt;break t}}}pt=null}while(0);this.normalRoughnessSampler_0=null!=(u=pt)?u.sampler:null,null!=(p=this.normalRoughnessSampler_0)&&(p.texture=this.normalRoughness);var gt,bt,xt=this.model;t:do{var wt;for(gt=Vp.ALL,wt=xt.stages.values.iterator();wt.hasNext();){var kt=wt.next();if(0!=(kt.stage.mask&gt.mask)){var St,Ct,Nt=kt.nodes;e:do{var Et;for(Et=Nt.iterator();Et.hasNext();){var Tt=Et.next();if(zt(Tt.name,"albedoMetal")&&e.isType(Tt,up)){Ct=Tt;break e}}Ct=null}while(0);var Pt=null==(St=Ct)||e.isType(St,up)?St:c();if(null!=Pt){bt=Pt;break t}}}bt=null}while(0);this.albedoMetalSampler_0=null!=(h=bt)?h.sampler:null,null!=(d=this.albedoMetalSampler_0)&&(d.texture=this.albedoMetal);var Ot,Mt,jt=this.model;t:do{var At;for(Ot=Vp.ALL,At=jt.stages.values.iterator();At.hasNext();){var It=At.next();if(0!=(It.stage.mask&Ot.mask)){var Rt,Lt,Dt=It.nodes;e:do{var qt;for(qt=Dt.iterator();qt.hasNext();){var Ft=qt.next();if(zt(Ft.name,"emissive")&&e.isType(Ft,up)){Lt=Ft;break e}}Lt=null}while(0);var Bt=null==(Rt=Lt)||e.isType(Rt,up)?Rt:c();if(null!=Bt){Mt=Bt;break t}}}Mt=null}while(0);this.emissiveSampler_0=null!=(f=Mt)?f.sampler:null,null!=(_=this.emissiveSampler_0)&&(_.texture=this.emissive);var Ut,Vt,Gt=this.model;t:do{var Ht;for(Ut=Vp.ALL,Ht=Gt.stages.values.iterator();Ht.hasNext();){var Wt=Ht.next();if(0!=(Wt.stage.mask&Ut.mask)){var Kt,Xt,Yt=Wt.nodes;e:do{var Zt;for(Zt=Yt.iterator();Zt.hasNext();){var Jt=Zt.next();if(zt(Jt.name,"uAmbient")&&e.isType(Jt,$p)){Xt=Jt;break e}}Xt=null}while(0);var Qt=null==(Kt=Xt)||e.isType(Kt,$p)?Kt:c();if(null!=Qt){Vt=Qt;break t}}}Vt=null}while(0);this.uAmbient_0=Vt,null!=(y=null!=($=null!=(m=this.uAmbient_0)?m.uniform:null)?$.value:null)&&y.set_czzhhz$(this.ambient);var te,ee,ie=this.model;t:do{var ne;for(te=Vp.ALL,ne=ie.stages.values.iterator();ne.hasNext();){var oe=ne.next();if(0!=(oe.stage.mask&te.mask)){var re,se,ae=oe.nodes;e:do{var le;for(le=ae.iterator();le.hasNext();){var ue=le.next();if(zt(ue.name,"irradianceMap")&&e.isType(ue,pp)){se=ue;break e}}se=null}while(0);var pe=null==(re=se)||e.isType(re,pp)?re:c();if(null!=pe){ee=pe;break t}}}ee=null}while(0);this.irradianceMapSampler_0=null!=(v=ee)?v.sampler:null,null!=(g=this.irradianceMapSampler_0)&&(g.texture=this.irradianceMap);var ce,he,de=this.model;t:do{var fe;for(ce=Vp.ALL,fe=de.stages.values.iterator();fe.hasNext();){var _e=fe.next();if(0!=(_e.stage.mask&ce.mask)){var me,$e,ye=_e.nodes;e:do{var ve;for(ve=ye.iterator();ve.hasNext();){var ge=ve.next();if(zt(ge.name,"reflectionMap")&&e.isType(ge,pp)){$e=ge;break e}}$e=null}while(0);var be=null==(me=$e)||e.isType(me,pp)?me:c();if(null!=be){he=be;break t}}}he=null}while(0);this.reflectionMapSampler_0=null!=(b=he)?b.sampler:null,null!=(x=this.reflectionMapSampler_0)&&(x.texture=this.reflectionMap);var xe,we,ze=this.model;t:do{var ke;for(xe=Vp.ALL,ke=ze.stages.values.iterator();ke.hasNext();){var Se=ke.next();if(0!=(Se.stage.mask&xe.mask)){var Ce,Ne,Ee=Se.nodes;e:do{var Te;for(Te=Ee.iterator();Te.hasNext();){var Pe=Te.next();if(zt(Pe.name,"brdfLut")&&e.isType(Pe,up)){Ne=Pe;break e}}Ne=null}while(0);var Oe=null==(Ce=Ne)||e.isType(Ce,up)?Ce:c();if(null!=Oe){we=Oe;break t}}}we=null}while(0);this.brdfLutSampler_0=null!=(w=we)?w.sampler:null,null!=(z=this.brdfLutSampler_0)&&(z.texture=this.brdfLut);var Me,je,Ae=this.model;t:do{var Ie;for(Me=Vp.ALL,Ie=Ae.stages.values.iterator();Ie.hasNext();){var Re=Ie.next();if(0!=(Re.stage.mask&Me.mask)){var Le,De,qe=Re.nodes;e:do{var Fe;for(Fe=qe.iterator();Fe.hasNext();){var Be=Fe.next();if(zt(Be.name,"ssaoMap")&&e.isType(Be,up)){De=Be;break e}}De=null}while(0);var Ue=null==(Le=De)||e.isType(Le,up)?Le:c();if(null!=Ue){je=Ue;break t}}}je=null}while(0);this.ssaoSampler_0=null!=(k=je)?k.sampler:null,null!=(S=this.ssaoSampler_0)&&(S.texture=this.scrSpcAmbientOcclusionMap);var Ve,Ge,He=this.model;t:do{var We;for(Ve=Vp.ALL,We=He.stages.values.iterator();We.hasNext();){var Ke=We.next();if(0!=(Ke.stage.mask&Ve.mask)){var Xe,Ye,Ze=Ke.nodes;e:do{var Je;for(Je=Ze.iterator();Je.hasNext();){var Qe=Je.next();if(zt(Qe.name,"ssrMap")&&e.isType(Qe,up)){Ye=Qe;break e}}Ye=null}while(0);var ti=null==(Xe=Ye)||e.isType(Xe,up)?Xe:c();if(null!=ti){Ge=ti;break t}}}Ge=null}while(0);if(this.ssrSampler_0=null!=(C=Ge)?C.sampler:null,null!=(N=this.ssrSampler_0)&&(N.texture=this.scrSpcReflectionMap),this.isReceivingShadow_0){E=this.depthSamplers_0;for(var ei=0;ei!==E.length;++ei){var ii,ni,oi,ri=this.model,si="depthMap_"+ei;t:do{var ai;for(ni=Vp.ALL,ai=ri.stages.values.iterator();ai.hasNext();){var li=ai.next();if(0!=(li.stage.mask&ni.mask)){var ui,pi,ci=li.nodes;e:do{var hi;for(hi=ci.iterator();hi.hasNext();){var di=hi.next();if(zt(di.name,si)&&e.isType(di,up)){pi=di;break e}}pi=null}while(0);var fi=null==(ui=pi)||e.isType(ui,up)?ui:c();if(null!=fi){oi=fi;break t}}}oi=null}while(0);var _i=null!=(ii=oi)?ii.sampler:null;this.depthSamplers_0[ei]=_i,this.shadowMaps_0[ei].setupSampler_s70oj3$(_i)}}lc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},rv.prototype.defaultDeferredPbrModel_ijjr66$=function(t){var i=new Iu("defaultDeferredPbrModel()"),n={v:null},o=new Lu(i);n.v=o.stageInterfaceNode_iikjwn$("ifTexCoords",o.attrTexCoords().output),o.positionOutput=o.fullScreenQuadPositionNode_r20yfm$(o.attrTexCoords().output).outQuadPos;var r=new Du(i),s=n.v.output,a=r.textureNode_61zpoe$("positionAo"),l=r.addNode_u9w9by$(new Vy(r.stage));l.inPositionAo=r.textureSamplerNode_ce41yx$(a,s).outColor,l.inNormalRough=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("normalRoughness"),s).outColor,l.inAlbedoMetallic=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("albedoMetal"),s).outColor,t.isWithEmissive&&(l.inEmissive=r.gammaNode_ze33is$(r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("emissive"),s).outColor).outColor);var u=l;r.addNode_u9w9by$(new Yy(r.stage)).inViewPos=u.outViewPos;var p,c,h,d=r.addNode_u9w9by$(new Zy(r.stage)),f=r.vec3TransformNode_vid4wo$(u.outViewPos,d.outInvViewMat,1).outVec3,_=r.vec3TransformNode_vid4wo$(u.outViewNormal,d.outInvViewMat,0).outVec3,m={v:null};if(t.maxLights>0){var $,y;m.v=r.multiLightNode_d76fwk$(f,t.maxLights);var v=0;for($=t.shadowMaps.iterator();$.hasNext();){var g,b=$.next(),x=J((v=(y=v)+1|0,y));g=e.isType(b,Sk)?r.deferredCascadedShadowMapNode_y1yrn$(b,"depthMap_"+x,u.outViewPos,f).outShadowFac:e.isType(b,zk)?r.deferredSimpleShadowMapNode_dhoqzq$(b,"depthMap_"+x,f).outShadowFac:new Fu(new wu(1)),m.v.inShadowFacs[x]=g}}if(t.isImageBasedLighting){var w=r.cubeMapNode_61zpoe$("irradianceMap");h=r.cubeMapSamplerNode_2z3a2t$(w,_),p=r.cubeMapNode_61zpoe$("reflectionMap"),c=r.textureNode_61zpoe$("brdfLut")}else h=null,p=null,c=null;var z,k=r.pbrMaterialNode_m8txso$(p,c),S=h;k.lightBacksides=t.lightBacksides,k.inFragPos=f,k.inNormal=_,k.inViewDir=r.viewDirNode_ze33is$(d.outCamPos,f).output,null!=m.v&&(k.inLightCount=m.v.outLightCount,k.inFragToLight=m.v.outFragToLightDirection,k.inRadiance=m.v.outRadiance),k.inIrradiance=null!=(z=null!=S?S.outColor:null)?z:r.pushConstantNodeColor_61zpoe$("uAmbient").output,k.inAlbedo=u.outAlbedo,k.inEmissive=u.outEmissive,k.inMetallic=u.outMetallic,k.inRoughness=u.outRoughness;var C=u.outAo;if(t.isScrSpcAmbientOcclusion){var N=r.textureNode_61zpoe$("ssaoMap"),E=r.addNode_u9w9by$(new Sp(N,k.graph));E.inViewport=d.outViewport,C=r.multiplyNode_ze33is$(C,E.outAo).output}if(k.inAmbientOccl=C,t.isScrSpcReflections){var T=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("ssrMap"),s).outColor;k.inReflectionColor=r.gammaNode_ze33is$(T).outColor,k.inReflectionWeight=r.splitNode_500t7j$(T,"a").output}var P=k;r.colorOutput_a3v4si$(P.outColor);var O=r.textureSamplerNode_ce41yx$(r.textureNode_61zpoe$("depth"),s);return r.depthOutput_r20yfm$(O.outColor),i},rv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var sv=null;function av(){return null===sv&&new rv,sv}function lv(){this.isImageBasedLighting=!1,this.isScrSpcAmbientOcclusion=!1,this.isScrSpcReflections=!1,this.isWithEmissive=!1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.environmentMaps=null}function uv(t,i){var n,o=new Id,r=new ia;r.name="ReflectionDenoisePass",r.setSize_vux9f0$(t.config.width,t.config.height),r.addColorTexture_farcsl$(Yc()),r.clearDepthTexture(),ua.call(this,o,new ea(r)),this.clearColor=new X$(0,0,0,0);var a=e.isType(n=this.drawNode,Id)?n:c(),l=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(cv);var u=new Iu("ReflectionDenoisePass"),p={v:null},h=new Lu(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.fullScreenQuadPositionNode_r20yfm$(h.attrTexCoords().output).outQuadPos;var d=new Du(u),f=d.textureNode_61zpoe$("noisyRefl"),_=d.textureNode_61zpoe$("positionAo"),m=d.addNode_u9w9by$(new pv(this,f,_,d.stage));m.inScreenPos=p.v.output,d.colorOutput_a3v4si$(m.outColor);var $,y,v,g=u,b=new lc(g);b.onPipelineSetup.add_11rb$(hv),b.onPipelineCreated.add_11rb$(($=t,y=g,v=i,function(t,i,n){var o,r,a=y;t:do{var l;for(o=Vp.ALL,l=a.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&o.mask)){var p,h,d=u.nodes;e:do{var f;for(f=d.iterator();f.hasNext();){var _=f.next();if(zt(_.name,"noisyRefl")&&e.isType(_,up)){h=_;break e}}h=null}while(0);var m=null==(p=h)||e.isType(p,up)?p:c();if(null!=m){r=m;break t}}}r=null}while(0);x(r).sampler.texture=$.colorTexture;var g,b,w=y;t:do{var z;for(g=Vp.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&g.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var T=E.next();if(zt(T.name,"positionAo")&&e.isType(T,up)){C=T;break e}}C=null}while(0);var P=null==(S=C)||e.isType(S,up)?S:c();if(null!=P){b=P;break t}}}b=null}while(0);return x(b).sampler.texture=v,s})),l.shader=b,a.unaryPlus_uv0sim$(l),this.dependsOn_yqp8fe$(t)}function pv(t,e,i,n){this.$outer=t,qu.call(this,"blurNode",n),this.noisyRefl=e,this.depthTex=i,this.inScreenPos=new Fu(new zu(ao().ZERO)),this.outColor=new Fu(new mu("colorOut"),this)}function cv(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function hv(t,e,i){return t.depthTest=cl(),t.blendMode=ol(),s}function dv(t,i,n){vv();var o,r=new Id,s=new ia;s.name="ReflectionPass",s.setSize_vux9f0$(i.config.width,i.config.height),s.addColorTexture_farcsl$(Yc()),s.clearDepthTexture(),ua.call(this,r,new ea(s)),this.mrtPass=t,this.pbrLightingPass=i,this.baseReflectionStep=n,this.uRoughThreshLow_0=null,this.roughnessThresholdLow_2pd7lz$_0=.5,this.uRoughThreshHigh_0=null,this.roughnessThresholdHigh_cqy6xj$_0=.6,this.uMaxIterations_0=null,this.scrSpcReflectionIterations_4w6b2n$_0=24,this.noiseTex_0=this.generateScrSpcReflectionNoiseTex_0(),this.clearColor=new X$(0,0,0,0);var a=e.isType(o=this.drawNode,Id)?o:c();a.isFrustumChecked=!1;var l=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.isFrustumChecked=!1,l.generate_v2sixm$(gv),l.shader=new fv(this),a.unaryPlus_uv0sim$(l),this.dependsOn_yqp8fe$(this.mrtPass)}function fv(t){this.$outer=t,lc.call(this,this.$outer.reflectionShaderModel_0())}function _v(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$data=t}function mv(t){qu.call(this,"discardRough",t),this.inRoughness=new Fu(new wu(0)),this.inThreshHigh=new Fu(new wu(.6)),this.inThreshLow=new Fu(new wu(.5)),this.outWeight=new Fu(new du("outRoughWeight"),this)}function $v(){yv=this,this.NOISE_SIZE=4}lv.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isImageBasedLighting=null!=t},lv.$metadata$={kind:$,simpleName:"DeferredPbrConfig",interfaces:[]},ov.$metadata$={kind:$,simpleName:"PbrSceneShader",interfaces:[lc]},uv.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},pv.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noisyRefl),this.dependsOn_lhtstx$(this.depthTex),qu.prototype.setup_llmhyc$.call(this,t)},pv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                int blurSize = 4;\n                vec2 texelSize = 1.0 / vec2(textureSize("+this.noisyRefl.name+", 0));\n                float depthOri = "+t.sampleTexture2d_buzeal$(this.depthTex.name,this.inScreenPos.ref2f_61zpoe$())+".z;\n                float depthThreshold = max(0.3, depthOri * 0.05);\n                "+this.outColor.declare()+" = vec4(0.0);\n                \n                float weight = 0.0;\n                vec2 hlim = vec2(float(-blurSize) * 0.5 + 0.5);\n                for (int x = 0; x < blurSize; x++) {\n                    for (int y = 0; y < blurSize; y++) {\n                        vec2 uv = "+this.inScreenPos.ref2f_61zpoe$()+" + (hlim + vec2(float(x), float(y))) * texelSize;\n                        float w = 1.0 - step(depthThreshold, abs("+t.sampleTexture2d_buzeal$(this.depthTex.name,"uv")+".z - depthOri)) * 0.99;\n                        \n                        "+this.outColor+" += "+t.sampleTexture2d_buzeal$(this.noisyRefl.name,"uv")+" * w;\n                        weight += w;\n                    }\n                }\n                "+this.outColor+" /= weight;\n            ")},pv.$metadata$={kind:$,simpleName:"BlurNode",interfaces:[qu]},uv.$metadata$={kind:$,simpleName:"ReflectionDenoisePass",interfaces:[ua]},Object.defineProperty(dv.prototype,"roughnessThresholdLow",{configurable:!0,get:function(){return this.roughnessThresholdLow_2pd7lz$_0},set:function(t){var e,i;this.roughnessThresholdLow_2pd7lz$_0=t,null!=(i=null!=(e=this.uRoughThreshLow_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(dv.prototype,"roughnessThresholdHigh",{configurable:!0,get:function(){return this.roughnessThresholdHigh_cqy6xj$_0},set:function(t){var e,i;this.roughnessThresholdHigh_cqy6xj$_0=t,null!=(i=null!=(e=this.uRoughThreshHigh_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(dv.prototype,"scrSpcReflectionIterations",{configurable:!0,get:function(){return this.scrSpcReflectionIterations_4w6b2n$_0},set:function(t){var e,i;this.scrSpcReflectionIterations_4w6b2n$_0=t,null!=(i=null!=(e=this.uMaxIterations_0)?e.uniform:null)&&(i.value=t)}}),dv.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),this.noiseTex_0.dispose(),ua.prototype.dispose_aemszp$.call(this,t)},fv.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.depthTest=cl(),t.blendMode=ol(),lc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},fv.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var o,r,s,a,l,u,p,h,d,f,_,m,$=this.model;t:do{var y;for(_=Vp.ALL,y=$.stages.values.iterator();y.hasNext();){var v=y.next();if(0!=(v.stage.mask&_.mask)){var g,b,x=v.nodes;e:do{var w;for(w=x.iterator();w.hasNext();){var z=w.next();if(zt(z.name,"deferredCam")&&e.isType(z,Zy)){b=z;break e}}b=null}while(0);var k=null==(g=b)||e.isType(g,Zy)?g:c();if(null!=k){m=k;break t}}}m=null}while(0);var S=m;null!=S&&(this.$outer,S.sceneCam=this.$outer.mrtPass.camera);var C,N,E=this.model;t:do{var T;for(C=Vp.ALL,T=E.stages.values.iterator();T.hasNext();){var P=T.next();if(0!=(P.stage.mask&C.mask)){var O,M,j=P.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var I=A.next();if(zt(I.name,"positionAo")&&e.isType(I,up)){M=I;break e}}M=null}while(0);var R=null==(O=M)||e.isType(O,up)?O:c();if(null!=R){N=R;break t}}}N=null}while(0);var L=null!=(o=N)?o.sampler:null;null!=L&&(this.$outer,L.texture=this.$outer.mrtPass.positionAo);var D,q,F=this.model;t:do{var B;for(D=Vp.ALL,B=F.stages.values.iterator();B.hasNext();){var U=B.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var K=W.next();if(zt(K.name,"normalRoughness")&&e.isType(K,up)){G=K;break e}}G=null}while(0);var X=null==(V=G)||e.isType(V,up)?V:c();if(null!=X){q=X;break t}}}q=null}while(0);var Y=null!=(r=q)?r.sampler:null;null!=Y&&(this.$outer,Y.texture=this.$outer.mrtPass.normalRoughness);var Z,J,Q=this.model;t:do{var tt;for(Z=Vp.ALL,tt=Q.stages.values.iterator();tt.hasNext();){var et=tt.next();if(0!=(et.stage.mask&Z.mask)){var it,nt,ot=et.nodes;e:do{var rt;for(rt=ot.iterator();rt.hasNext();){var st=rt.next();if(zt(st.name,"ssrMap")&&e.isType(st,up)){nt=st;break e}}nt=null}while(0);var at=null==(it=nt)||e.isType(it,up)?it:c();if(null!=at){J=at;break t}}}J=null}while(0);var lt=null!=(s=J)?s.sampler:null;null!=lt&&(this.$outer,lt.texture=this.$outer.pbrLightingPass.colorTexture);var ut,pt,ct=this.model;t:do{var ht;for(ut=Vp.ALL,ht=ct.stages.values.iterator();ht.hasNext();){var dt=ht.next();if(0!=(dt.stage.mask&ut.mask)){var ft,_t,mt=dt.nodes;e:do{var $t;for($t=mt.iterator();$t.hasNext();){var yt=$t.next();if(zt(yt.name,"ssrNoiseTex")&&e.isType(yt,up)){_t=yt;break e}}_t=null}while(0);var vt=null==(ft=_t)||e.isType(ft,up)?ft:c();if(null!=vt){pt=vt;break t}}}pt=null}while(0);var gt=null!=(a=pt)?a.sampler:null;null!=gt&&(this.$outer,gt.texture=this.$outer.noiseTex_0);var bt,xt,wt=this.$outer,kt=this.model;t:do{var St;for(bt=Vp.ALL,St=kt.stages.values.iterator();St.hasNext();){var Ct=St.next();if(0!=(Ct.stage.mask&bt.mask)){var Nt,Et,Tt=Ct.nodes;e:do{var Pt;for(Pt=Tt.iterator();Pt.hasNext();){var Ot=Pt.next();if(zt(Ot.name,"uRoughThreshLow")&&e.isType(Ot,dp)){Et=Ot;break e}}Et=null}while(0);var Mt=null==(Nt=Et)||e.isType(Nt,dp)?Nt:c();if(null!=Mt){xt=Mt;break t}}}xt=null}while(0);wt.uRoughThreshLow_0=xt,null!=(u=null!=(l=this.$outer.uRoughThreshLow_0)?l.uniform:null)&&(u.value=this.$outer.roughnessThresholdLow);var jt,At,It=this.$outer,Rt=this.model;t:do{var Lt;for(jt=Vp.ALL,Lt=Rt.stages.values.iterator();Lt.hasNext();){var Dt=Lt.next();if(0!=(Dt.stage.mask&jt.mask)){var qt,Ft,Bt=Dt.nodes;e:do{var Ut;for(Ut=Bt.iterator();Ut.hasNext();){var Vt=Ut.next();if(zt(Vt.name,"uRoughThreshHigh")&&e.isType(Vt,dp)){Ft=Vt;break e}}Ft=null}while(0);var Gt=null==(qt=Ft)||e.isType(qt,dp)?qt:c();if(null!=Gt){At=Gt;break t}}}At=null}while(0);It.uRoughThreshHigh_0=At,null!=(h=null!=(p=this.$outer.uRoughThreshHigh_0)?p.uniform:null)&&(h.value=this.$outer.roughnessThresholdHigh);var Ht,Wt,Kt=this.$outer,Xt=this.model;t:do{var Yt;for(Ht=Vp.ALL,Yt=Xt.stages.values.iterator();Yt.hasNext();){var Zt=Yt.next();if(0!=(Zt.stage.mask&Ht.mask)){var Jt,Qt,te=Zt.nodes;e:do{var ee;for(ee=te.iterator();ee.hasNext();){var ie=ee.next();if(zt(ie.name,"uMaxIterations")&&e.isType(ie,yp)){Qt=ie;break e}}Qt=null}while(0);var ne=null==(Jt=Qt)||e.isType(Jt,yp)?Jt:c();if(null!=ne){Wt=ne;break t}}}Wt=null}while(0);Kt.uMaxIterations_0=Wt,null!=(f=null!=(d=this.$outer.uMaxIterations_0)?d.uniform:null)&&(f.value=this.$outer.scrSpcReflectionIterations)},fv.$metadata$={kind:$,simpleName:"ReflectionShader",interfaces:[lc]},dv.prototype.reflectionShaderModel_0=function(){var t=new Iu("ReflectionShaderModel"),e={v:null},i=new Lu(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.fullScreenQuadPositionNode_r20yfm$(i.attrTexCoords().output).outQuadPos;var n=new Du(t),o=e.v.output,r=n.textureNode_61zpoe$("positionAo"),s=n.addNode_u9w9by$(new Vy(n.stage));s.inPositionAo=n.textureSamplerNode_ce41yx$(r,o).outColor,s.inNormalRough=n.textureSamplerNode_ce41yx$(n.textureNode_61zpoe$("normalRoughness"),o).outColor;var a=s,l=n.addNode_u9w9by$(new mv(n.stage));l.inRoughness=a.outRoughness,l.inThreshLow=n.pushConstantNode1f_61zpoe$("uRoughThreshLow").output,l.inThreshHigh=n.pushConstantNode1f_61zpoe$("uRoughThreshHigh").output;var u=l,p=n.addNode_u9w9by$(new Zy(n.stage)),c=n.textureNode_61zpoe$("ssrNoiseTex"),h=n.noiseTextureSamplerNode_gwl5ki$(c,n.constVec2i_czzhjm$(new go(4,4))).outNoise,d=n.textureNode_61zpoe$("ssrMap"),f=a.outViewPos,_=n.normalizeNode_r20yfm$(f).output,m=n.splitNode_500t7j$(h,"a").output,$=n.reflectNode_ze33is$(_,n.normalizeNode_r20yfm$(a.outViewNormal).output).outDirection,y=n.vecFromColorNode_r20yfm$(n.splitNode_500t7j$(h,"xyz").output).output,v=n.multiplyNode_ze33is$(y,a.outRoughness).output,g=n.normalizeNode_r20yfm$(n.addNode_ze33is$($,v).output).output,b=n.addNode_u9w9by$(new bv(r,n.stage));b.inProjMat=p.outProjMat,b.inRayOrigin=f,b.inRayDirection=g,b.inRayOffset=m,b.maxIterations=n.pushConstantNode1i_61zpoe$("uMaxIterations").output,b.baseStepFac=n.constFloat_mx4ult$(this.baseReflectionStep);var x=b,w=n.textureSamplerNode_ce41yx$(d,x.outSamplePos).outColor,z=n.multiplyNode_ze33is$(x.outSampleWeight,u.outWeight).output,k=n.gammaNode_ze33is$(w,n.constFloat_mx4ult$(2.2)).outColor;return n.colorOutput_a3v4si$(n.combineXyzWNode_ze33is$(k,z).output),t},_v.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},_v.prototype=Object.create(l.prototype),_v.prototype.constructor=_v,_v.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$data;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},dv.prototype.generateScrSpcReflectionNoiseTex_0=function(){var t,i=PN(4*e.imul(4,4)|0),n=new eo(501930763),o=jo();t=e.imul(4,4);for(var r=0;r<t;r++){do{o.set_y2kzbl$(n.randomF_dleff0$(-1,1),n.randomF_dleff0$(-1,1),n.randomF_dleff0$(-1,1))}while(o.length()>1);o.norm().scale_mx4ult$(.25),i.set_6t1wet$(0+(4*r|0)|0,Dt(B(127.5*(o.x+1)))),i.set_6t1wet$(1+(4*r|0)|0,Dt(B(127.5*(o.y+1)))),i.set_6t1wet$(2+(4*r|0)|0,Dt(B(127.5*(o.z+1)))),i.set_6t1wet$(3+(4*r|0)|0,Dt(n.randomI_n8acyv$(new Ft(0,255))))}var s,a=new Rh(i,4,4,Yc());return new eh(new Sh(Yc(),Ah(),Ah(),void 0,Eh(),Eh(),!1,1),"ssr_noise_tex",(s=a,function(t,e,i,n){var o=new _v(s,t,e,this,i);return n?o:o.doResume(null)}))},mv.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inRoughness,this.inThreshHigh,this.inThreshLow])},mv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                if ("+this.inRoughness.ref1f_61zpoe$()+" > "+this.inThreshHigh.ref1f_61zpoe$()+") discard;\n                "+this.outWeight.declare()+" = 1.0 - (clamp("+this.inRoughness.ref1f_61zpoe$()+", "+this.inThreshLow.ref1f_61zpoe$()+", "+this.inThreshHigh.ref1f_61zpoe$()+") - "+this.inThreshLow.ref1f_61zpoe$()+")\n                        / ("+this.inThreshHigh.ref1f_61zpoe$()+" - "+this.inThreshLow.ref1f_61zpoe$()+");\n            ")},mv.$metadata$={kind:$,simpleName:"DiscardRoughSurfacesNode",interfaces:[qu]},$v.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var yv=null;function vv(){return null===yv&&new $v,yv}function gv(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function bv(t,e){qu.call(this,"rayTrace_"+e.nextNodeId,e),this.positionTex=t,this.baseStepFac=new Fu(new wu(.02)),this.stepIncFac=new Fu(new wu(1.2)),this.maxIterations=new Fu(new Cu(24)),this.maxRefinements=new Fu(new Cu(5)),this.inProjMat=new Fu(new xu("_")),this.inRayOrigin=new Fu(new ku(To().ZERO)),this.inRayDirection=new Fu(new ku(To().Z_AXIS)),this.inRayOffset=new Fu(new ku(To().Z_AXIS)),this.outRayPos=new Fu(new _u(this.name+"_outPos"),this),this.outSamplePos=new Fu(new _u(this.name+"_outSamplePos"),this),this.outSampleWeight=new Fu(new du(this.name+"_outHitWeight"),this),this.outCost=new Fu(new du(this.name+"_outSteps"),this)}function xv(){}function wv(t,e,i,n,o,r){return void 0===o&&(o=0),void 0===r&&(r=Nv().STD_CHARS),Tv(new zv(t,e*i/96,o,r),n)}function zv(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=Nv().STD_CHARS),this.family=t,this.sizePts=e,this.style=i,this.chars=n}function kv(t){var e;Nv(),eh.call(this,new Sh(void 0,Mh(),Mh()),t.toString(),(e=t,function(t,i,n,o){var r=new Ev(e,t,i,this,n);return o?r:r.doResume(null)})),this.charMap=t,this.lineSpace=1.2*this.charMap.fontProps.sizePts,this.normHeight=.7*this.charMap.fontProps.sizePts}function Sv(){Cv=this,this.PLAIN=0,this.BOLD=1,this.ITALIC=2,this.SYSTEM_FONT='-apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',this.STD_CHARS=null,this.DEFAULT_FONT_PROPS=null;for(var t="",e=32;e<=126;e++)t+=String.fromCharCode(N(e));t+="",this.STD_CHARS=t,this.DEFAULT_FONT_PROPS=new zv(this.SYSTEM_FONT,12)}dv.$metadata$={kind:$,simpleName:"ReflectionPass",interfaces:[ua]},bv.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.baseStepFac,this.stepIncFac,this.maxIterations,this.maxRefinements]),this.dependsOn_8ak6wm$([this.inProjMat,this.inRayOrigin,this.inRayDirection,this.inRayOffset])},bv.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("projectViewPos","\n            vec3 projectViewPos(vec3 viewPos) {\n                vec4 proj = "+this.inProjMat+" * vec4(viewPos, 1.0);\n                return (proj.xyz / proj.w) * 0.5 + 0.5;\n            }\n        "),t.appendFunction_puj7f4$("linearStep",_e("\n            float linearStep(float edge0, float edge1, float x) {\n                float f = clamp(x, edge0, edge1);\n                return (f - edge0) / (edge1 - edge0);\n            }\n        ")),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_rayPos = "+this.inRayOrigin.ref3f_61zpoe$()+";\n            vec3 "+this.name+"_rayStepPos = "+this.name+"_rayPos;\n            float "+this.name+"_rayStep = -"+this.name+"_rayPos.z * "+this.baseStepFac.ref1f_61zpoe$()+";\n            float "+this.name+"_rayOffset = "+this.inRayOffset.ref1f_61zpoe$()+";\n            \n            float "+this.name+"_sampleDepth = 0.0;\n            float "+this.name+"_dDepth = 0.0;\n            bool "+this.name+"_refineHit = false;\n\n            int "+this.name+"_iSteps, "+this.name+"_iRef;\n            for ("+this.name+"_iSteps = 0, "+this.name+"_iRef = 0; "+this.name+"_iSteps < "+this.maxIterations.ref1i_61zpoe$()+" && "+this.name+"_iRef < "+this.maxRefinements.ref1i_61zpoe$()+"; "+this.name+"_iSteps++) {\n                "+this.name+"_rayStepPos += "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep;\n                "+this.name+"_rayPos = "+this.name+"_rayStepPos + "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep * "+this.name+"_rayOffset * "+this.stepIncFac.ref1f_61zpoe$()+";\n                \n                vec2 "+this.name+"_samplePos = projectViewPos("+this.name+"_rayPos).xy;\n                if ("+this.name+"_samplePos.x < 0.0 || "+this.name+"_samplePos.x > 1.0\n                        || "+this.name+"_samplePos.x < 0.0 || "+this.name+"_samplePos.x > 1.0\n                        || "+this.name+"_rayPos.z > 0.0) {\n                    break;\n                }\n                \n                "+this.name+"_sampleDepth = "+t.sampleTexture2d_buzeal$(this.positionTex.name,this.name+"_samplePos")+".z;\n\n                // set a large depth if sampleDepth is positive (clear value)\n                "+this.name+"_sampleDepth -= 1e5 * step(0.1, "+this.name+"_sampleDepth);\n                \n                // diff between ray position depth and scene depth\n                //   negative -> ray pos is behind scene depth, i.e. covered by an object\n                //   positive -> ray pos is in front of scene\n                "+this.name+"_dDepth = "+this.name+"_rayPos.z - "+this.name+"_sampleDepth;\n                \n                if (!"+this.name+"_refineHit) {\n                    // search for hit\n                    if ("+this.name+"_dDepth < 0.0 && "+this.name+"_dDepth > (-"+this.name+"_rayStep - 0.2)) {\n                        // hit -> roll back position to previous ray position and start refinement\n                        "+this.name+"_rayStepPos = "+this.name+"_rayPos - "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep;\n                        "+this.name+"_rayOffset = 0.0;\n                        "+this.name+"_rayStep *= 0.5;\n                        "+this.name+"_refineHit = true;\n                    } else {\n                        // no hit, increase step size\n                        "+this.name+"_rayStep *= "+this.stepIncFac.ref1f_61zpoe$()+";\n                    }\n\n                } else {\n                    // refine hit position\n                    "+this.name+"_rayStep = 0.5 * abs("+this.name+"_rayStep) * sign("+this.name+"_dDepth);\n                    "+this.name+"_iRef++;\n                }\n            }\n            \n            "+this.outCost.declare()+" = float("+this.name+"_iSteps) / "+this.maxIterations.ref1f_61zpoe$()+";\n            "+this.outSampleWeight.declare()+" = 0.0;\n            "+this.outRayPos.declare()+" = vec3(0.0);\n            "+this.outSamplePos.declare()+" = vec3(0.0);\n            \n            if ("+this.maxIterations.ref1i_61zpoe$()+" > 0) {\n                "+this.outRayPos+" = "+this.name+"_rayPos + "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep;\n                "+this.outSamplePos+" = projectViewPos("+this.outRayPos+");\n                \n                "+this.outSampleWeight+" = \n                              linearStep(0.0, 0.1, "+this.outSamplePos+".x) * (1.0 - linearStep(0.9, 1.0, "+this.outSamplePos+".x))\n                            * linearStep(0.0, 0.1, "+this.outSamplePos+".y) * (1.0 - linearStep(0.9, 1.0, "+this.outSamplePos+".y))\n                            * (1.0 - step(0.9999, "+this.outSamplePos+".z))\n                            * (1.0 - linearStep(0.0, -"+this.name+"_rayPos.z / 10.0, abs("+this.name+"_dDepth)));\n            }\n        ")},bv.$metadata$={kind:$,simpleName:"ScreenSpaceRayTraceNode",interfaces:[qu]},xv.$metadata$={kind:st,simpleName:"Disposable",interfaces:[]},zv.prototype.toString=function(){return"FontProps("+this.family+", "+this.sizePts+"pts, "+this.style+")"},zv.$metadata$={kind:$,simpleName:"FontProps",interfaces:[]},zv.prototype.component1=function(){return this.family},zv.prototype.component2=function(){return this.sizePts},zv.prototype.component3=function(){return this.style},zv.prototype.component4=function(){return this.chars},zv.prototype.copy_aw0137$=function(t,e,i,n){return new zv(void 0===t?this.family:t,void 0===e?this.sizePts:e,void 0===i?this.style:i,void 0===n?this.chars:n)},zv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.family)|0)+e.hashCode(this.sizePts)|0)+e.hashCode(this.style)|0)+e.hashCode(this.chars)|0},zv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.family,t.family)&&e.equals(this.sizePts,t.sizePts)&&e.equals(this.style,t.style)&&e.equals(this.chars,t.chars)},kv.prototype.textWidth_61zpoe$=function(t){var e,i,n,o,r=0,s=0;i=(e=me(t)).first,n=e.last,o=e.step;for(var a=i;a<=n;a+=o){var l=t.charCodeAt(a);(r+=this.charWidth_s8itvh$(l))>s&&(s=r),10===l&&(r=0)}return s},kv.prototype.charWidth_s8itvh$=function(t){var e,i;return null!=(i=null!=(e=this.charMap.get_11rb$(E(t)))?e.advance:null)?i:0},kv.prototype.toString=function(){return"Font("+this.charMap.fontProps+")"},Sv.prototype.defaultFont_aemszp$=function(t){return Tv(this.DEFAULT_FONT_PROPS,t)},Sv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cv=null;function Nv(){return null===Cv&&new Sv,Cv}function Ev(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$charMap=t}function Tv(t,e,i){return i=i||Object.create(kv.prototype),kv.call(i,e.assetMgr.createCharMap_ttufcy$(t)),i}function Pv(){this.width=0,this.height=0,this.xOffset=0,this.yBaseline=0,this.advance=0,this.uvMin=po(),this.uvMax=po()}function Ov(t,e,i){this.textureData=t,this.map_0=e,this.fontProps=i}function Mv(t,e,i,n,o,r,s,a,l,u){Iv(),void 0===t&&(t=-1),void 0===e&&(e=0),void 0===n&&(n=!1),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===u&&(u=null),this.bufferView=t,this.byteOffset=e,this.componentType=i,this.normalized=n,this.count=o,this.type=r,this.max=s,this.min=a,this.sparse=l,this.name=u,this.bufferViewRef=null}function jv(){Av=this,this.TYPE_SCALAR="SCALAR",this.TYPE_VEC2="VEC2",this.TYPE_VEC3="VEC3",this.TYPE_VEC4="VEC4",this.TYPE_MAT2="MAT2",this.TYPE_MAT3="MAT3",this.TYPE_MAT4="MAT4",this.COMP_TYPE_BYTE=5120,this.COMP_TYPE_UNSIGNED_BYTE=5121,this.COMP_TYPE_SHORT=5122,this.COMP_TYPE_UNSIGNED_SHORT=5123,this.COMP_TYPE_INT=5124,this.COMP_TYPE_UNSIGNED_INT=5125,this.COMP_TYPE_FLOAT=5126,this.COMP_INT_TYPES=ve([5120,5121,5122,5123,5124,5125])}Ev.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Ev.prototype=Object.create(l.prototype),Ev.prototype.constructor=Ev,Ev.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$charMap.textureData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},kv.$metadata$={kind:$,simpleName:"Font",interfaces:[eh]},Pv.$metadata$={kind:$,simpleName:"CharMetrics",interfaces:[]},Object.defineProperty(Ov.prototype,"entries",{get:function(){return this.map_0.entries}}),Object.defineProperty(Ov.prototype,"keys",{get:function(){return this.map_0.keys}}),Object.defineProperty(Ov.prototype,"size",{get:function(){return this.map_0.size}}),Object.defineProperty(Ov.prototype,"values",{get:function(){return this.map_0.values}}),Ov.prototype.containsKey_11rb$=function(t){return this.map_0.containsKey_11rb$(t)},Ov.prototype.containsValue_11rc$=function(t){return this.map_0.containsValue_11rc$(t)},Ov.prototype.get_11rb$=function(t){return this.map_0.get_11rb$(t)},Ov.prototype.isEmpty=function(){return this.map_0.isEmpty()},Ov.$metadata$={kind:$,simpleName:"CharMap",interfaces:[$e]},jv.prototype.serializer=function(){return ug()},jv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Av=null;function Iv(){return null===Av&&new jv,Av}function Rv(t,e,i){qv(),this.count=t,this.indices=e,this.values=i}function Lv(){Dv=this}Lv.prototype.serializer=function(){return Uv()},Lv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Dv=null;function qv(){return null===Dv&&new Lv,Dv}function Fv(){this.descriptor_xehwm7$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor.Sparse",this,3),this.descriptor.addElement_ivxn3r$("count",!1),this.descriptor.addElement_ivxn3r$("indices",!1),this.descriptor.addElement_ivxn3r$("values",!1),Bv=this}Object.defineProperty(Fv.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_xehwm7$_0}}),Fv.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.count),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,Zv(),e.indices),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,rg(),e.values),i.endStructure_24f42q$(this.descriptor)},Fv.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=s.decodeSerializableElement_12e8id$(this.descriptor,1,Zv(),n),r|=2;break;case 2:o=s.decodeSerializableElement_12e8id$(this.descriptor,2,rg(),o),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Vv(r,i,n,o,null)},Fv.prototype.childSerializers=function(){return[xe.IntSerializer,Zv(),rg()]},Fv.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Bv=null;function Uv(){return null===Bv&&new Fv,Bv}function Vv(t,e,i,n,o){var r=o||Object.create(Rv.prototype);if(0==(1&t))throw new ze("count");if(r.count=e,0==(2&t))throw new ze("indices");if(r.indices=i,0==(4&t))throw new ze("values");return r.values=n,r}function Gv(t,e,i){Kv(),void 0===e&&(e=0),this.bufferView=t,this.byteOffset=e,this.componentType=i,this.bufferViewRef_8okve9$_0=this.bufferViewRef_8okve9$_0}function Hv(){Wv=this}Rv.$metadata$={kind:$,simpleName:"Sparse",interfaces:[]},Rv.prototype.component1=function(){return this.count},Rv.prototype.component2=function(){return this.indices},Rv.prototype.component3=function(){return this.values},Rv.prototype.copy_x8d0af$=function(t,e,i){return new Rv(void 0===t?this.count:t,void 0===e?this.indices:e,void 0===i?this.values:i)},Rv.prototype.toString=function(){return"Sparse(count="+e.toString(this.count)+", indices="+e.toString(this.indices)+", values="+e.toString(this.values)+")"},Rv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.count)|0)+e.hashCode(this.indices)|0)+e.hashCode(this.values)|0},Rv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.count,t.count)&&e.equals(this.indices,t.indices)&&e.equals(this.values,t.values)},Object.defineProperty(Gv.prototype,"bufferViewRef",{configurable:!0,get:function(){return null==this.bufferViewRef_8okve9$_0?pt("bufferViewRef"):this.bufferViewRef_8okve9$_0},set:function(t){this.bufferViewRef_8okve9$_0=t}}),Hv.prototype.serializer=function(){return Zv()},Hv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Wv=null;function Kv(){return null===Wv&&new Hv,Wv}function Xv(){this.descriptor_9z4dbk$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor.SparseIndices",this,3),this.descriptor.addElement_ivxn3r$("bufferView",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("componentType",!1),Yv=this}Object.defineProperty(Xv.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_9z4dbk$_0}}),Xv.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.componentType),i.endStructure_24f42q$(this.descriptor)},Xv.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),r|=2;break;case 2:o=s.decodeIntElement_szpzho$(this.descriptor,2),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Jv(r,i,n,o,null)},Xv.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,xe.IntSerializer]},Xv.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Yv=null;function Zv(){return null===Yv&&new Xv,Yv}function Jv(t,e,i,n,o){var r=o||Object.create(Gv.prototype);if(0==(1&t))throw new ze("bufferView");if(r.bufferView=e,r.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ze("componentType");return r.componentType=n,r}function Qv(t,e){ig(),void 0===e&&(e=0),this.bufferView=t,this.byteOffset=e,this.bufferViewRef_s3axfo$_0=this.bufferViewRef_s3axfo$_0}function tg(){eg=this}Gv.$metadata$={kind:$,simpleName:"SparseIndices",interfaces:[]},Gv.prototype.component1=function(){return this.bufferView},Gv.prototype.component2=function(){return this.byteOffset},Gv.prototype.component3=function(){return this.componentType},Gv.prototype.copy_qt1dr2$=function(t,e,i){return new Gv(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e,void 0===i?this.componentType:i)},Gv.prototype.toString=function(){return"SparseIndices(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+", componentType="+e.toString(this.componentType)+")"},Gv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.componentType)|0},Gv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.componentType,t.componentType)},Object.defineProperty(Qv.prototype,"bufferViewRef",{configurable:!0,get:function(){return null==this.bufferViewRef_s3axfo$_0?pt("bufferViewRef"):this.bufferViewRef_s3axfo$_0},set:function(t){this.bufferViewRef_s3axfo$_0=t}}),tg.prototype.serializer=function(){return rg()},tg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var eg=null;function ig(){return null===eg&&new tg,eg}function ng(){this.descriptor_qz2of1$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor.SparseValues",this,2),this.descriptor.addElement_ivxn3r$("bufferView",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),og=this}Object.defineProperty(ng.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_qz2of1$_0}}),ng.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.endStructure_24f42q$(this.descriptor)},ng.prototype.deserialize_bq71mq$=function(t){var e,i,n,o=0,r=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=r.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=r.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=r.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case-1:break t;default:throw new be(e)}return r.endStructure_24f42q$(this.descriptor),sg(o,i,n,null)},ng.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer]},ng.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var og=null;function rg(){return null===og&&new ng,og}function sg(t,e,i,n){var o=n||Object.create(Qv.prototype);if(0==(1&t))throw new ze("bufferView");return o.bufferView=e,o.byteOffset=0==(2&t)?0:i,o}function ag(){this.descriptor_6qddyh$_0=new ge("de.fabmax.kool.util.gltf.GltfAccessor",this,10),this.descriptor.addElement_ivxn3r$("bufferView",!0),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("componentType",!1),this.descriptor.addElement_ivxn3r$("normalized",!0),this.descriptor.addElement_ivxn3r$("count",!1),this.descriptor.addElement_ivxn3r$("type",!1),this.descriptor.addElement_ivxn3r$("max",!0),this.descriptor.addElement_ivxn3r$("min",!0),this.descriptor.addElement_ivxn3r$("sparse",!0),this.descriptor.addElement_ivxn3r$("name",!0),lg=this}Qv.$metadata$={kind:$,simpleName:"SparseValues",interfaces:[]},Qv.prototype.component1=function(){return this.bufferView},Qv.prototype.component2=function(){return this.byteOffset},Qv.prototype.copy_vux9f0$=function(t,e){return new Qv(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e)},Qv.prototype.toString=function(){return"SparseValues(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+")"},Qv.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0},Qv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)},Object.defineProperty(ag.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_6qddyh$_0}}),ag.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.bufferView,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.componentType),zt(e.normalized,!1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeBooleanElement_qh7jdn$(this.descriptor,3,e.normalized),i.encodeIntElement_ptg7oe$(this.descriptor,4,e.count),i.encodeStringElement_iij8qq$(this.descriptor,5,e.type),zt(e.max,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,6,new ke(xe.FloatSerializer),e.max),zt(e.min,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,7,new ke(xe.FloatSerializer),e.min),zt(e.sparse,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,8,Uv(),e.sparse),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,9,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},ag.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a,l,u,p,c,h=0,d=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=d.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=d.decodeIntElement_szpzho$(this.descriptor,0),h|=1;break;case 1:n=d.decodeIntElement_szpzho$(this.descriptor,1),h|=2;break;case 2:o=d.decodeIntElement_szpzho$(this.descriptor,2),h|=4;break;case 3:r=d.decodeBooleanElement_szpzho$(this.descriptor,3),h|=8;break;case 4:s=d.decodeIntElement_szpzho$(this.descriptor,4),h|=16;break;case 5:a=d.decodeStringElement_szpzho$(this.descriptor,5),h|=32;break;case 6:l=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,6,new ke(xe.FloatSerializer),l),h|=64;break;case 7:u=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,7,new ke(xe.FloatSerializer),u),h|=128;break;case 8:p=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,8,Uv(),p),h|=256;break;case 9:c=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,9,xe.StringSerializer,c),h|=512;break;case-1:break t;default:throw new be(e)}return d.endStructure_24f42q$(this.descriptor),pg(h,i,n,o,r,s,a,l,u,p,c,null)},ag.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,xe.BooleanSerializer,xe.IntSerializer,xe.StringSerializer,new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(Uv()),new ye(xe.StringSerializer)]},ag.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var lg=null;function ug(){return null===lg&&new ag,lg}function pg(t,e,i,n,o,r,s,a,l,u,p,c){var h=c||Object.create(Mv.prototype);if(h.bufferView=0==(1&t)?-1:e,h.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ze("componentType");if(h.componentType=n,h.normalized=0!=(8&t)&&o,0==(16&t))throw new ze("count");if(h.count=r,0==(32&t))throw new ze("type");return h.type=s,h.max=0==(64&t)?null:a,h.min=0==(128&t)?null:l,h.sparse=0==(256&t)?null:u,h.name=0==(512&t)?null:p,h.bufferViewRef=null,h}function cg(t){var i,n,o,r;switch(this.accessor=t,this.elemByteSize_7rvvqx$_0=0,this.byteStride_tkyqsw$_0=0,this.buffer_erynjj$_0=this.accessor.bufferViewRef,this.stream_lcz6z5$_0=null,this.sparseIndexStream_2vmodr$_0=null,this.sparseValueStream_1f0jfy$_0=null,this.sparseIndexType_mlp9rd$_0=0,this.nextSparseIndex_bp7us$_0=0,this.index_hw47f3$_0=0,i=null!=this.buffer_erynjj$_0?new dy(this.buffer_erynjj$_0.bufferRef.data,this.accessor.byteOffset+this.buffer_erynjj$_0.byteOffset|0):null,this.stream_lcz6z5$_0=i,null!=this.accessor.sparse?(this.sparseIndexStream_2vmodr$_0=new dy(this.accessor.sparse.indices.bufferViewRef.bufferRef.data,this.accessor.sparse.indices.bufferViewRef.byteOffset),this.sparseValueStream_1f0jfy$_0=new dy(this.accessor.sparse.values.bufferViewRef.bufferRef.data,this.accessor.sparse.values.bufferViewRef.byteOffset),this.sparseIndexType_mlp9rd$_0=this.accessor.sparse.indices.componentType,this.nextSparseIndex_bp7us$_0=this.nextIntComponent_jcyej8$_0(this.sparseIndexStream_2vmodr$_0,this.sparseIndexType_mlp9rd$_0)):(this.sparseIndexStream_2vmodr$_0=null,this.sparseValueStream_1f0jfy$_0=null,this.sparseIndexType_mlp9rd$_0=0,this.nextSparseIndex_bp7us$_0=-1),this.accessor.componentType){case 5120:case 5121:n=1;break;case 5122:case 5123:n=2;break;case 5124:case 5125:case 5126:n=4;break;default:throw V("Unknown accessor component type: "+this.accessor.componentType)}var s=n;switch(this.accessor.type){case"SCALAR":o=1;break;case"VEC2":o=2;break;case"VEC3":o=3;break;case"VEC4":case"MAT2":o=4;break;case"MAT3":o=9;break;case"MAT4":o=16;break;default:throw V("Unsupported accessor type: "+this.accessor.type)}var a=o;this.elemByteSize_7rvvqx$_0=e.imul(s,a),r=null!=this.buffer_erynjj$_0&&this.buffer_erynjj$_0.byteStride>0?this.buffer_erynjj$_0.byteStride:this.elemByteSize_7rvvqx$_0,this.byteStride_tkyqsw$_0=r}function hg(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_SCALAR))throw V("IntAccessor requires accessor type "+Iv().TYPE_SCALAR+", provided was "+t.type);if(!Iv().COMP_INT_TYPES.contains_11rb$(t.componentType))throw V("IntAccessor requires a (byte / short / int) component type, provided was "+t.componentType)}function dg(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_SCALAR))throw V("Vec2fAccessor requires accessor type "+Iv().TYPE_SCALAR+", provided was "+t.type);if(5126!==t.componentType)throw V("FloatAccessor requires a float component type, provided was "+t.componentType)}function fg(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_VEC2))throw V("Vec2fAccessor requires accessor type "+Iv().TYPE_VEC2+", provided was "+t.type);if(5126!==t.componentType)throw V("Vec2fAccessor requires a float component type, provided was "+t.componentType)}function _g(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_VEC3))throw V("Vec3fAccessor requires accessor type "+Iv().TYPE_VEC3+", provided was "+t.type);if(5126!==t.componentType)throw V("Vec3fAccessor requires a float component type, provided was "+t.componentType)}function mg(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_VEC4))throw V("Vec4fAccessor requires accessor type "+Iv().TYPE_VEC4+", provided was "+t.type);if(5126!==t.componentType)throw V("Vec4fAccessor requires a float component type, provided was "+t.componentType)}function $g(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_VEC4))throw V("Vec4iAccessor requires accessor type "+Iv().TYPE_VEC4+", provided was "+t.type);if(!Iv().COMP_INT_TYPES.contains_11rb$(t.componentType))throw V("Vec4fAccessor requires a (byte / short / int) component type, provided was "+t.componentType)}function yg(t){if(cg.call(this,t),!zt(t.type,Iv().TYPE_MAT4))throw V("Mat4fAccessor requires accessor type "+Iv().TYPE_MAT4+", provided was "+t.type);if(5126!==t.componentType)throw V("Mat4fAccessor requires a float component type, provided was "+t.componentType)}function vg(t,e,i){Hg(),void 0===i&&(i=null),this.channels=t,this.samplers=e,this.name=i}function gg(t,e){wg(),this.sampler=t,this.target=e,this.samplerRef_jhnz8x$_0=this.samplerRef_jhnz8x$_0}function bg(){xg=this}Mv.$metadata$={kind:$,simpleName:"GltfAccessor",interfaces:[]},Mv.prototype.component1=function(){return this.bufferView},Mv.prototype.component2=function(){return this.byteOffset},Mv.prototype.component3=function(){return this.componentType},Mv.prototype.component4=function(){return this.normalized},Mv.prototype.component5=function(){return this.count},Mv.prototype.component6=function(){return this.type},Mv.prototype.component7=function(){return this.max},Mv.prototype.component8=function(){return this.min},Mv.prototype.component9=function(){return this.sparse},Mv.prototype.component10=function(){return this.name},Mv.prototype.copy_4gbanh$=function(t,e,i,n,o,r,s,a,l,u){return new Mv(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e,void 0===i?this.componentType:i,void 0===n?this.normalized:n,void 0===o?this.count:o,void 0===r?this.type:r,void 0===s?this.max:s,void 0===a?this.min:a,void 0===l?this.sparse:l,void 0===u?this.name:u)},Mv.prototype.toString=function(){return"GltfAccessor(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+", componentType="+e.toString(this.componentType)+", normalized="+e.toString(this.normalized)+", count="+e.toString(this.count)+", type="+e.toString(this.type)+", max="+e.toString(this.max)+", min="+e.toString(this.min)+", sparse="+e.toString(this.sparse)+", name="+e.toString(this.name)+")"},Mv.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.componentType)|0)+e.hashCode(this.normalized)|0)+e.hashCode(this.count)|0)+e.hashCode(this.type)|0)+e.hashCode(this.max)|0)+e.hashCode(this.min)|0)+e.hashCode(this.sparse)|0)+e.hashCode(this.name)|0},Mv.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.componentType,t.componentType)&&e.equals(this.normalized,t.normalized)&&e.equals(this.count,t.count)&&e.equals(this.type,t.type)&&e.equals(this.max,t.max)&&e.equals(this.min,t.min)&&e.equals(this.sparse,t.sparse)&&e.equals(this.name,t.name)},Object.defineProperty(cg.prototype,"index",{configurable:!0,get:function(){return this.index_hw47f3$_0},set:function(t){var i;this.index_hw47f3$_0=t,null!=(i=this.stream_lcz6z5$_0)&&(i.index=e.imul(t,this.byteStride_tkyqsw$_0))}}),cg.prototype.selectDataStream_ji0jaj$_0=function(){return this.index!==this.nextSparseIndex_bp7us$_0?this.stream_lcz6z5$_0:this.sparseValueStream_1f0jfy$_0},cg.prototype.nextInt=function(){var t,e;if(this.index<this.accessor.count)return null!=(e=null!=(t=this.selectDataStream_ji0jaj$_0())?this.nextIntComponent_jcyej8$_0(t,this.accessor.componentType):null)?e:0;throw new Se("Accessor overflow")},cg.prototype.nextFloat=function(){var t,e;if(this.index<this.accessor.count)return null!=(e=null!=(t=this.selectDataStream_ji0jaj$_0())?t.readFloat():null)?e:0;throw new Se("Accessor overflow")},cg.prototype.nextDouble=function(){return this.nextFloat()},cg.prototype.nextIntComponent_jcyej8$_0=function(t,e){var i;switch(e){case 5120:i=t.readByte();break;case 5121:i=t.readUByte();break;case 5122:i=t.readShort();break;case 5123:i=t.readUShort();break;case 5124:i=t.readInt();break;case 5125:i=t.readUInt();break;default:throw V("Invalid component type: "+e)}return i},cg.prototype.advance=function(){var t;this.index===this.nextSparseIndex_bp7us$_0&&!0===(null!=(t=this.sparseIndexStream_2vmodr$_0)?t.hasRemaining():null)&&(this.nextSparseIndex_bp7us$_0=this.nextIntComponent_jcyej8$_0(this.sparseIndexStream_2vmodr$_0,this.sparseIndexType_mlp9rd$_0)),this.index=this.index+1|0},cg.$metadata$={kind:$,simpleName:"DataStreamAccessor",interfaces:[]},hg.prototype.next=function(){if(this.index<this.accessor.count){var t=this.nextInt();return this.advance(),t}throw new Se("Accessor overflow")},hg.$metadata$={kind:$,simpleName:"IntAccessor",interfaces:[cg]},dg.prototype.next=function(){var t=this.nextFloat();return this.advance(),t},dg.prototype.nextD=function(){return this.next()},dg.$metadata$={kind:$,simpleName:"FloatAccessor",interfaces:[cg]},fg.prototype.next=function(){return this.next_5s4mrl$(po())},fg.prototype.next_5s4mrl$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),this.advance(),t},fg.prototype.nextD=function(){return this.nextD_5s4mrn$(vo())},fg.prototype.nextD_5s4mrn$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),this.advance(),t},fg.$metadata$={kind:$,simpleName:"Vec2fAccessor",interfaces:[cg]},_g.prototype.next=function(){return this.next_5s4mqq$(jo())},_g.prototype.next_5s4mqq$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),t.z=this.nextFloat(),this.advance(),t},_g.prototype.nextD=function(){return this.nextD_5s4mqs$(Uo())},_g.prototype.nextD_5s4mqs$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),t.z=this.nextDouble(),this.advance(),t},_g.$metadata$={kind:$,simpleName:"Vec3fAccessor",interfaces:[cg]},mg.prototype.next=function(){return this.next_5s4mpv$(or())},mg.prototype.next_5s4mpv$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),t.z=this.nextFloat(),t.w=this.nextFloat(),this.advance(),t},mg.prototype.nextD=function(){return this.nextD_5s4mpx$(cr())},mg.prototype.nextD_5s4mpx$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),t.z=this.nextDouble(),t.w=this.nextDouble(),this.advance(),t},mg.$metadata$={kind:$,simpleName:"Vec4fAccessor",interfaces:[cg]},$g.prototype.next=function(){return this.next_5s4mps$(Er())},$g.prototype.next_5s4mps$=function(t){return t.x=this.nextInt(),t.y=this.nextInt(),t.z=this.nextInt(),t.w=this.nextInt(),this.advance(),t},$g.$metadata$={kind:$,simpleName:"Vec4iAccessor",interfaces:[cg]},yg.prototype.next=function(){return this.next_d4zu6j$(new En)},yg.prototype.next_d4zu6j$=function(t){for(var e=0;e<=15;e++)t.matrix[e]=this.nextFloat();return this.advance(),t},yg.prototype.nextD=function(){return this.nextD_d4zu6l$(new bn)},yg.prototype.nextD_d4zu6l$=function(t){for(var e=0;e<=15;e++)t.matrix[e]=this.nextDouble();return this.advance(),t},yg.$metadata$={kind:$,simpleName:"Mat4fAccessor",interfaces:[cg]},Object.defineProperty(gg.prototype,"samplerRef",{configurable:!0,get:function(){return null==this.samplerRef_jhnz8x$_0?pt("samplerRef"):this.samplerRef_jhnz8x$_0},set:function(t){this.samplerRef_jhnz8x$_0=t}}),bg.prototype.serializer=function(){return Sg()},bg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var xg=null;function wg(){return null===xg&&new bg,xg}function zg(){this.descriptor_lxi57x$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation.Channel",this,2),this.descriptor.addElement_ivxn3r$("sampler",!1),this.descriptor.addElement_ivxn3r$("target",!1),kg=this}Object.defineProperty(zg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_lxi57x$_0}}),zg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.sampler),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,jg(),e.target),i.endStructure_24f42q$(this.descriptor)},zg.prototype.deserialize_bq71mq$=function(t){var e,i,n,o=0,r=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=r.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=r.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=r.decodeSerializableElement_12e8id$(this.descriptor,1,jg(),n),o|=2;break;case-1:break t;default:throw new be(e)}return r.endStructure_24f42q$(this.descriptor),Cg(o,i,n,null)},zg.prototype.childSerializers=function(){return[xe.IntSerializer,jg()]},zg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var kg=null;function Sg(){return null===kg&&new zg,kg}function Cg(t,e,i,n){var o=n||Object.create(gg.prototype);if(0==(1&t))throw new ze("sampler");if(o.sampler=e,0==(2&t))throw new ze("target");return o.target=i,o}function Ng(t,e){Pg(),void 0===t&&(t=-1),this.node=t,this.path=e,this.nodeRef=null}function Eg(){Tg=this,this.PATH_TRANSLATION="translation",this.PATH_ROTATION="rotation",this.PATH_SCALE="scale",this.PATH_WEIGHTS="weights"}gg.$metadata$={kind:$,simpleName:"Channel",interfaces:[]},gg.prototype.component1=function(){return this.sampler},gg.prototype.component2=function(){return this.target},gg.prototype.copy_16lfz8$=function(t,e){return new gg(void 0===t?this.sampler:t,void 0===e?this.target:e)},gg.prototype.toString=function(){return"Channel(sampler="+e.toString(this.sampler)+", target="+e.toString(this.target)+")"},gg.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.sampler)|0)+e.hashCode(this.target)|0},gg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.sampler,t.sampler)&&e.equals(this.target,t.target)},Eg.prototype.serializer=function(){return jg()},Eg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Tg=null;function Pg(){return null===Tg&&new Eg,Tg}function Og(){this.descriptor_8uby97$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation.Target",this,2),this.descriptor.addElement_ivxn3r$("node",!0),this.descriptor.addElement_ivxn3r$("path",!1),Mg=this}Object.defineProperty(Og.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_8uby97$_0}}),Og.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.node,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.node),i.encodeStringElement_iij8qq$(this.descriptor,1,e.path),i.endStructure_24f42q$(this.descriptor)},Og.prototype.deserialize_bq71mq$=function(t){var e,i,n,o=0,r=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=r.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=r.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=r.decodeStringElement_szpzho$(this.descriptor,1),o|=2;break;case-1:break t;default:throw new be(e)}return r.endStructure_24f42q$(this.descriptor),Ag(o,i,n,null)},Og.prototype.childSerializers=function(){return[xe.IntSerializer,xe.StringSerializer]},Og.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Mg=null;function jg(){return null===Mg&&new Og,Mg}function Ag(t,e,i,n){var o=n||Object.create(Ng.prototype);if(o.node=0==(1&t)?-1:e,0==(2&t))throw new ze("path");return o.path=i,o.nodeRef=null,o}function Ig(t,e,i){Dg(),void 0===e&&(e=Dg().INTERPOLATION_LINEAR),this.input=t,this.interpolation=e,this.output=i,this.inputAccessorRef_83hs5f$_0=this.inputAccessorRef_83hs5f$_0,this.outputAccessorRef_fq2m6i$_0=this.outputAccessorRef_fq2m6i$_0}function Rg(){Lg=this,this.INTERPOLATION_LINEAR="LINEAR",this.INTERPOLATION_STEP="STEP",this.INTERPOLATION_CUBICSPLINE="CUBICSPLINE"}Ng.$metadata$={kind:$,simpleName:"Target",interfaces:[]},Ng.prototype.component1=function(){return this.node},Ng.prototype.component2=function(){return this.path},Ng.prototype.copy_19mbxw$=function(t,e){return new Ng(void 0===t?this.node:t,void 0===e?this.path:e)},Ng.prototype.toString=function(){return"Target(node="+e.toString(this.node)+", path="+e.toString(this.path)+")"},Ng.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.node)|0)+e.hashCode(this.path)|0},Ng.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.node,t.node)&&e.equals(this.path,t.path)},Object.defineProperty(Ig.prototype,"inputAccessorRef",{configurable:!0,get:function(){return null==this.inputAccessorRef_83hs5f$_0?pt("inputAccessorRef"):this.inputAccessorRef_83hs5f$_0},set:function(t){this.inputAccessorRef_83hs5f$_0=t}}),Object.defineProperty(Ig.prototype,"outputAccessorRef",{configurable:!0,get:function(){return null==this.outputAccessorRef_fq2m6i$_0?pt("outputAccessorRef"):this.outputAccessorRef_fq2m6i$_0},set:function(t){this.outputAccessorRef_fq2m6i$_0=t}}),Rg.prototype.serializer=function(){return Bg()},Rg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Lg=null;function Dg(){return null===Lg&&new Rg,Lg}function qg(){this.descriptor_vtcpaw$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation.Sampler",this,3),this.descriptor.addElement_ivxn3r$("input",!1),this.descriptor.addElement_ivxn3r$("interpolation",!0),this.descriptor.addElement_ivxn3r$("output",!1),Fg=this}Object.defineProperty(qg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vtcpaw$_0}}),qg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.input),zt(e.interpolation,Dg().INTERPOLATION_LINEAR)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeStringElement_iij8qq$(this.descriptor,1,e.interpolation),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.output),i.endStructure_24f42q$(this.descriptor)},qg.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=s.decodeStringElement_szpzho$(this.descriptor,1),r|=2;break;case 2:o=s.decodeIntElement_szpzho$(this.descriptor,2),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Ug(r,i,n,o,null)},qg.prototype.childSerializers=function(){return[xe.IntSerializer,xe.StringSerializer,xe.IntSerializer]},qg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Fg=null;function Bg(){return null===Fg&&new qg,Fg}function Ug(t,e,i,n,o){var r=o||Object.create(Ig.prototype);if(0==(1&t))throw new ze("input");if(r.input=e,r.interpolation=0==(2&t)?Dg().INTERPOLATION_LINEAR:i,0==(4&t))throw new ze("output");return r.output=n,r}function Vg(){Gg=this}Ig.$metadata$={kind:$,simpleName:"Sampler",interfaces:[]},Ig.prototype.component1=function(){return this.input},Ig.prototype.component2=function(){return this.interpolation},Ig.prototype.component3=function(){return this.output},Ig.prototype.copy_jl0c9m$=function(t,e,i){return new Ig(void 0===t?this.input:t,void 0===e?this.interpolation:e,void 0===i?this.output:i)},Ig.prototype.toString=function(){return"Sampler(input="+e.toString(this.input)+", interpolation="+e.toString(this.interpolation)+", output="+e.toString(this.output)+")"},Ig.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.input)|0)+e.hashCode(this.interpolation)|0)+e.hashCode(this.output)|0},Ig.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.input,t.input)&&e.equals(this.interpolation,t.interpolation)&&e.equals(this.output,t.output)},Vg.prototype.serializer=function(){return Xg()},Vg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gg=null;function Hg(){return null===Gg&&new Vg,Gg}function Wg(){this.descriptor_tnzh7m$_0=new ge("de.fabmax.kool.util.gltf.GltfAnimation",this,3),this.descriptor.addElement_ivxn3r$("channels",!1),this.descriptor.addElement_ivxn3r$("samplers",!1),this.descriptor.addElement_ivxn3r$("name",!0),Kg=this}Object.defineProperty(Wg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_tnzh7m$_0}}),Wg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(Sg()),e.channels),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new ke(Bg()),e.samplers),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Wg.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(Sg()),i),r|=1;break;case 1:n=s.decodeSerializableElement_12e8id$(this.descriptor,1,new ke(Bg()),n),r|=2;break;case 2:o=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,o),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Yg(r,i,n,o,null)},Wg.prototype.childSerializers=function(){return[new ke(Sg()),new ke(Bg()),new ye(xe.StringSerializer)]},Wg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Kg=null;function Xg(){return null===Kg&&new Wg,Kg}function Yg(t,e,i,n,o){var r=o||Object.create(vg.prototype);if(0==(1&t))throw new ze("channels");if(r.channels=e,0==(2&t))throw new ze("samplers");return r.samplers=i,r.name=0==(4&t)?null:n,r}function Zg(t,e,i,n){tb(),void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.copyright=t,this.generator=e,this.version=i,this.minVersion=n}function Jg(){Qg=this}vg.$metadata$={kind:$,simpleName:"GltfAnimation",interfaces:[]},vg.prototype.component1=function(){return this.channels},vg.prototype.component2=function(){return this.samplers},vg.prototype.component3=function(){return this.name},vg.prototype.copy_gie5zu$=function(t,e,i){return new vg(void 0===t?this.channels:t,void 0===e?this.samplers:e,void 0===i?this.name:i)},vg.prototype.toString=function(){return"GltfAnimation(channels="+e.toString(this.channels)+", samplers="+e.toString(this.samplers)+", name="+e.toString(this.name)+")"},vg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.channels)|0)+e.hashCode(this.samplers)|0)+e.hashCode(this.name)|0},vg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.channels,t.channels)&&e.equals(this.samplers,t.samplers)&&e.equals(this.name,t.name)},Jg.prototype.serializer=function(){return nb()},Jg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Qg=null;function tb(){return null===Qg&&new Jg,Qg}function eb(){this.descriptor_jo73ey$_0=new ge("de.fabmax.kool.util.gltf.GltfAsset",this,4),this.descriptor.addElement_ivxn3r$("copyright",!0),this.descriptor.addElement_ivxn3r$("generator",!0),this.descriptor.addElement_ivxn3r$("version",!1),this.descriptor.addElement_ivxn3r$("minVersion",!0),ib=this}Object.defineProperty(eb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_jo73ey$_0}}),eb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.copyright,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.copyright),zt(e.generator,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,xe.StringSerializer,e.generator),i.encodeStringElement_iij8qq$(this.descriptor,2,e.version),zt(e.minVersion,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,xe.StringSerializer,e.minVersion),i.endStructure_24f42q$(this.descriptor)},eb.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),s|=1;break;case 1:n=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,xe.StringSerializer,n),s|=2;break;case 2:o=a.decodeStringElement_szpzho$(this.descriptor,2),s|=4;break;case 3:r=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,xe.StringSerializer,r),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),ob(s,i,n,o,r,null)},eb.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),new ye(xe.StringSerializer),xe.StringSerializer,new ye(xe.StringSerializer)]},eb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var ib=null;function nb(){return null===ib&&new eb,ib}function ob(t,e,i,n,o,r){var s=r||Object.create(Zg.prototype);if(s.copyright=0==(1&t)?null:e,s.generator=0==(2&t)?null:i,0==(4&t))throw new ze("version");return s.version=n,s.minVersion=0==(8&t)?null:o,s}function rb(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$tmp$=void 0,this.local$file=void 0,this.local$modelBasePath=void 0,this.local$tmp$_1=void 0,this.local$element=void 0,this.local$$receiver=t,this.local$assetPath=e}function sb(t,e,i,n){var o=new rb(t,e,i);return n?o:o.doResume(null)}function ab(t,e,i,n,o){l.call(this,o),this.exceptionState_0=1,this.local$$receiver=t,this.local$assetPath=e,this.local$modelCfg=i,this.local$scene=n}function lb(t){return Ne(t,".glb",!0)||Ne(t,".glb.gz",!0)}function ub(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$$receiver=t,this.local$assetPath=e}function pb(t,e,i,n){var o=new ub(t,e,i);return n?o:o.doResume(null)}function cb(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$tmp$=void 0,this.local$$receiver=t,this.local$assetPath=e}function hb(t,e,i,n){var o=new cb(t,e,i);return n?o:o.doResume(null)}function db(t,e,i){mb(),void 0===t&&(t=null),void 0===i&&(i=null),this.uri=t,this.byteLength=e,this.name=i,this.data_5ej3ir$_0=this.data_5ej3ir$_0}function fb(){_b=this}Zg.$metadata$={kind:$,simpleName:"GltfAsset",interfaces:[]},Zg.prototype.component1=function(){return this.copyright},Zg.prototype.component2=function(){return this.generator},Zg.prototype.component3=function(){return this.version},Zg.prototype.component4=function(){return this.minVersion},Zg.prototype.copy_iz7fdb$=function(t,e,i,n){return new Zg(void 0===t?this.copyright:t,void 0===e?this.generator:e,void 0===i?this.version:i,void 0===n?this.minVersion:n)},Zg.prototype.toString=function(){return"GltfAsset(copyright="+e.toString(this.copyright)+", generator="+e.toString(this.generator)+", version="+e.toString(this.version)+", minVersion="+e.toString(this.minVersion)+")"},Zg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.copyright)|0)+e.hashCode(this.generator)|0)+e.hashCode(this.version)|0)+e.hashCode(this.minVersion)|0},Zg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.copyright,t.copyright)&&e.equals(this.generator,t.generator)&&e.equals(this.version,t.version)&&e.equals(this.minVersion,t.minVersion)},rb.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},rb.prototype=Object.create(l.prototype),rb.prototype.constructor=rb,rb.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(m=this.local$assetPath,Ne(m,".gltf",!0)||Ne(m,".gltf.gz",!0)){if(this.state_0=4,this.result_0=pb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue}if(lb(this.local$assetPath)){if(this.state_0=2,this.result_0=hb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue}this.local$tmp$=null,this.state_0=3;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=this.result_0,this.state_0=3;continue;case 3:this.state_0=5;continue;case 4:this.local$tmp$=this.result_0,this.state_0=5;continue;case 5:if(this.local$file=this.local$tmp$,Ce(this.local$assetPath,47)){var e=Wt(this.local$assetPath,47);t=this.local$assetPath.substring(0,e)}else t=".";if(this.local$modelBasePath=t,null!=this.local$file){var i,n=this.local$file.buffers,o=M();for(i=n.iterator();i.hasNext();){var r=i.next();null!=r.uri&&o.add_11rb$(r)}this.local$tmp$_1=o.iterator(),this.state_0=6;continue}this.state_0=9;continue;case 6:if(!this.local$tmp$_1.hasNext()){this.state_0=8;continue}this.local$element=this.local$tmp$_1.next();var s=x(this.local$element.uri),l=u(s,"data:",!0)?s:this.local$modelBasePath+"/"+s;if(this.state_0=7,this.result_0=this.local$$receiver.loadAsset_61zpoe$(l,this),this.result_0===a)return a;continue;case 7:this.local$element.data=x(this.result_0),this.state_0=6;continue;case 8:var p,c,h=this.local$file.images,d=M();for(p=h.iterator();p.hasNext();){var f=p.next();null!=f.uri&&d.add_11rb$(f)}for(c=d.iterator();c.hasNext();){var _=c.next();_.uri=this.local$modelBasePath+"/"+Ct(_.uri)}this.local$file.updateReferences_8be2vx$(),this.state_0=9;continue;case 9:return this.local$file;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}var m},ab.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ab.prototype=Object.create(l.prototype),ab.prototype.constructor=ab,ab.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(void 0===this.local$modelCfg&&(this.local$modelCfg=new Tb),void 0===this.local$scene&&(this.local$scene=0),this.state_0=2,this.result_0=sb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return null!=(t=this.result_0)?t.makeModel_m0hq3v$(this.local$modelCfg,this.local$scene):null;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ub.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ub.prototype=Object.create(l.prototype),ub.prototype.constructor=ub,ub.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAsset_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return null!=t&&Ne(this.local$assetPath,".gz",!0)&&(t=this.local$$receiver.inflate_ay2i3f$(t)),null!=t?Rb().fromJson_61zpoe$(Ee(t.toArray())):null;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},cb.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},cb.prototype=Object.create(l.prototype),cb.prototype.constructor=cb,cb.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAsset_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.local$tmp$=this.result_0,null==this.local$tmp$)return null;this.state_0=3;continue;case 3:var t=this.local$tmp$;Ne(this.local$assetPath,".gz",!0)&&(t=this.local$$receiver.inflate_ay2i3f$(t));var i=new dy(t),n=i.readUInt(),o=i.readUInt();if(i.readUInt(),1179937895!==n)throw cn("Unexpected glTF magic number: "+n+" (should be 1179937895 / 'glTF')");if(2!==o){var r=KN.Log,s=Cz.WARN,l=e.getKClassFromExpression(this.local$$receiver).simpleName;s.level>=r.level.level&&r.printer(s,l,"Unexpected glTF version: "+o+" (should be 2) - stuff might not work as expected")}var u=i.readUInt(),p={v:i.readUInt()};if(1313821514!==p.v)throw cn("Unexpected chunk type for chunk 0: "+p.v+" (should be 1313821514 / 'JSON')");for(var c=i.readData_za3lpa$(u).toArray(),h=Rb().fromJson_61zpoe$(Ee(c)),d={v:1};i.hasRemaining();){if(u=i.readUInt(),p.v=i.readUInt(),5130562===p.v)h.buffers.get_za3lpa$(d.v-1|0).data=i.readData_za3lpa$(u);else{var f=KN.Log,_=Cz.WARN,m=e.getKClassFromExpression(this.local$$receiver).simpleName;_.level>=f.level.level&&f.printer(_,m,"Unexpected chunk type for chunk "+d.v+": "+p.v+" (should be 5130562 / ' BIN')"),i.index=i.index+u|0}d.v=d.v+1|0}return h;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(db.prototype,"data",{configurable:!0,get:function(){return null==this.data_5ej3ir$_0?pt("data"):this.data_5ej3ir$_0},set:function(t){this.data_5ej3ir$_0=t}}),fb.prototype.serializer=function(){return vb()},fb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _b=null;function mb(){return null===_b&&new fb,_b}function $b(){this.descriptor_ou5fio$_0=new ge("de.fabmax.kool.util.gltf.GltfBuffer",this,3),this.descriptor.addElement_ivxn3r$("uri",!0),this.descriptor.addElement_ivxn3r$("byteLength",!1),this.descriptor.addElement_ivxn3r$("name",!0),yb=this}Object.defineProperty($b.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_ou5fio$_0}}),$b.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.uri,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.uri),i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteLength),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},$b.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),r|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),r|=2;break;case 2:o=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,o),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),gb(r,i,n,o,null)},$b.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),xe.IntSerializer,new ye(xe.StringSerializer)]},$b.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var yb=null;function vb(){return null===yb&&new $b,yb}function gb(t,e,i,n,o){var r=o||Object.create(db.prototype);if(r.uri=0==(1&t)?null:e,0==(2&t))throw new ze("byteLength");return r.byteLength=i,r.name=0==(4&t)?null:n,r}function bb(t,e,i,n,o,r){zb(),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=null),this.buffer=t,this.byteOffset=e,this.byteLength=i,this.byteStride=n,this.target=o,this.name=r,this.bufferRef_y7hzt1$_0=this.bufferRef_y7hzt1$_0}function xb(){wb=this}db.$metadata$={kind:$,simpleName:"GltfBuffer",interfaces:[]},db.prototype.component1=function(){return this.uri},db.prototype.component2=function(){return this.byteLength},db.prototype.component3=function(){return this.name},db.prototype.copy_xf6674$=function(t,e,i){return new db(void 0===t?this.uri:t,void 0===e?this.byteLength:e,void 0===i?this.name:i)},db.prototype.toString=function(){return"GltfBuffer(uri="+e.toString(this.uri)+", byteLength="+e.toString(this.byteLength)+", name="+e.toString(this.name)+")"},db.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.uri)|0)+e.hashCode(this.byteLength)|0)+e.hashCode(this.name)|0},db.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.uri,t.uri)&&e.equals(this.byteLength,t.byteLength)&&e.equals(this.name,t.name)},Object.defineProperty(bb.prototype,"bufferRef",{configurable:!0,get:function(){return null==this.bufferRef_y7hzt1$_0?pt("bufferRef"):this.bufferRef_y7hzt1$_0},set:function(t){this.bufferRef_y7hzt1$_0=t}}),bb.prototype.getData=function(){var t,e=PN(this.byteLength);t=this.byteLength;for(var i=0;i<t;i++)e.set_6t1wet$(i,this.bufferRef.data.get_za3lpa$(this.byteOffset+i|0));return e},xb.prototype.serializer=function(){return Cb()},xb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var wb=null;function zb(){return null===wb&&new xb,wb}function kb(){this.descriptor_7gwufp$_0=new ge("de.fabmax.kool.util.gltf.GltfBufferView",this,6),this.descriptor.addElement_ivxn3r$("buffer",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("byteLength",!1),this.descriptor.addElement_ivxn3r$("byteStride",!0),this.descriptor.addElement_ivxn3r$("target",!0),this.descriptor.addElement_ivxn3r$("name",!0),Sb=this}Object.defineProperty(kb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7gwufp$_0}}),kb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.buffer),zt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.byteLength),zt(e.byteStride,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeIntElement_ptg7oe$(this.descriptor,3,e.byteStride),zt(e.target,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeIntElement_ptg7oe$(this.descriptor,4,e.target),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},kb.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a,l=0,u=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=u.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=u.decodeIntElement_szpzho$(this.descriptor,0),l|=1;break;case 1:n=u.decodeIntElement_szpzho$(this.descriptor,1),l|=2;break;case 2:o=u.decodeIntElement_szpzho$(this.descriptor,2),l|=4;break;case 3:r=u.decodeIntElement_szpzho$(this.descriptor,3),l|=8;break;case 4:s=u.decodeIntElement_szpzho$(this.descriptor,4),l|=16;break;case 5:a=u.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,xe.StringSerializer,a),l|=32;break;case-1:break t;default:throw new be(e)}return u.endStructure_24f42q$(this.descriptor),Nb(l,i,n,o,r,s,a,null)},kb.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,new ye(xe.StringSerializer)]},kb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Sb=null;function Cb(){return null===Sb&&new kb,Sb}function Nb(t,e,i,n,o,r,s,a){var l=a||Object.create(bb.prototype);if(0==(1&t))throw new ze("buffer");if(l.buffer=e,l.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ze("byteLength");return l.byteLength=n,l.byteStride=0==(8&t)?0:o,l.target=0==(16&t)?0:r,l.name=0==(32&t)?null:s,l}function Eb(t,e,i,n,o,r,s,a,l,u,p,c,h,d,f){Rb(),void 0===t&&(t=Nt()),void 0===e&&(e=Nt()),void 0===i&&(i=Nt()),void 0===n&&(n=Nt()),void 0===r&&(r=Nt()),void 0===s&&(s=Nt()),void 0===a&&(a=Nt()),void 0===l&&(l=Nt()),void 0===u&&(u=Nt()),void 0===p&&(p=Nt()),void 0===c&&(c=0),void 0===h&&(h=Nt()),void 0===d&&(d=Nt()),void 0===f&&(f=Nt()),this.extensionsUsed=t,this.extensionsRequired=e,this.accessors=i,this.animations=n,this.asset=o,this.buffers=r,this.bufferViews=s,this.images=a,this.materials=l,this.meshes=u,this.nodes=p,this.scene=c,this.scenes=h,this.skins=d,this.textures=f}function Tb(t,e,i,n,o,r,s,a,l,u,p){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=new Pb),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===l&&(l=!1),void 0===u&&(u=!0),void 0===p&&(p=null),this.generateNormals=t,this.applyMaterials=e,this.materialConfig=i,this.loadAnimations=n,this.applySkins=o,this.applyMorphTargets=r,this.applyTransforms=s,this.removeEmptyNodes=a,this.mergeMeshesByMaterial=l,this.sortNodesByAlpha=u,this.pbrBlock=p}function Pb(t,e,i,n){void 0===t&&(t=Nt()),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),this.shadowMaps=t,this.scrSpcAmbientOcclusionMap=e,this.environmentMaps=i,this.isDeferredShading=n}function Ob(t,e){this.$outer=t,this.cfg=e,this.modelAnimations=M(),this.modelNodes=z(),this.meshesByMaterial=z(),this.meshMaterials=z()}function Mb(t){return function(e){var i;i=e.numVertices;for(var n=0;n<i;n++){e.vertexIt.index=n;var o=t,r=e.vertexIt;o.transform_w1lst9$(r.position,1),o.transform_w1lst9$(r.normal,0);var a=r.tangent.getXyz_5s4mqq$(jo());o.transform_w1lst9$(a,0),r.tangent.set_2qa7tb$(a,r.tangent.w)}return s}}function jb(){Ib=this,this.GLB_FILE_MAGIC=1179937895,this.GLB_CHUNK_MAGIC_JSON=1313821514,this.GLB_CHUNK_MAGIC_BIN=5130562}function Ab(t){return t.isLenient=!0,t.ignoreUnknownKeys=!0,t.allowSpecialFloatingPointValues=!0,t.useArrayPolymorphism=!0,s}bb.$metadata$={kind:$,simpleName:"GltfBufferView",interfaces:[]},bb.prototype.component1=function(){return this.buffer},bb.prototype.component2=function(){return this.byteOffset},bb.prototype.component3=function(){return this.byteLength},bb.prototype.component4=function(){return this.byteStride},bb.prototype.component5=function(){return this.target},bb.prototype.component6=function(){return this.name},bb.prototype.copy_o3471x$=function(t,e,i,n,o,r){return new bb(void 0===t?this.buffer:t,void 0===e?this.byteOffset:e,void 0===i?this.byteLength:i,void 0===n?this.byteStride:n,void 0===o?this.target:o,void 0===r?this.name:r)},bb.prototype.toString=function(){return"GltfBufferView(buffer="+e.toString(this.buffer)+", byteOffset="+e.toString(this.byteOffset)+", byteLength="+e.toString(this.byteLength)+", byteStride="+e.toString(this.byteStride)+", target="+e.toString(this.target)+", name="+e.toString(this.name)+")"},bb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.buffer)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.byteLength)|0)+e.hashCode(this.byteStride)|0)+e.hashCode(this.target)|0)+e.hashCode(this.name)|0},bb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.buffer,t.buffer)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.byteLength,t.byteLength)&&e.equals(this.byteStride,t.byteStride)&&e.equals(this.target,t.target)&&e.equals(this.name,t.name)},Eb.prototype.makeModel_m0hq3v$=function(t,e){return void 0===t&&(t=new Tb),void 0===e&&(e=this.scene),new Ob(this,t).makeModel_m76q01$(this.scenes.get_za3lpa$(e))},Eb.prototype.updateReferences_8be2vx$=function(){var t,e,i;for(t=this.accessors.iterator();t.hasNext();){var n,o=t.next();o.bufferView>=0&&(o.bufferViewRef=this.bufferViews.get_za3lpa$(o.bufferView)),null!=(n=o.sparse)&&(n.indices.bufferViewRef=this.bufferViews.get_za3lpa$(n.indices.bufferView),n.values.bufferViewRef=this.bufferViews.get_za3lpa$(n.values.bufferView))}for(e=this.animations.iterator();e.hasNext();){var r,s,a=e.next();for(r=a.samplers.iterator();r.hasNext();){var l=r.next();l.inputAccessorRef=this.accessors.get_za3lpa$(l.input),l.outputAccessorRef=this.accessors.get_za3lpa$(l.output)}for(s=a.channels.iterator();s.hasNext();){var u=s.next();u.samplerRef=a.samplers.get_za3lpa$(u.sampler),u.target.node>=0&&(u.target.nodeRef=this.nodes.get_za3lpa$(u.target.node))}}for(i=this.bufferViews.iterator();i.hasNext();){var p=i.next();p.bufferRef=this.buffers.get_za3lpa$(p.buffer)}var c,h,d,f,_,m,$,y=this.images,v=M();for(c=y.iterator();c.hasNext();){var g=c.next();g.bufferView>=0&&v.add_11rb$(g)}for(h=v.iterator();h.hasNext();){var b=h.next();b.bufferViewRef=this.bufferViews.get_za3lpa$(b.bufferView)}for(d=this.meshes.iterator();d.hasNext();){var x;for(x=d.next().primitives.iterator();x.hasNext();){var z=x.next();z.material>=0&&(z.materialRef=this.materials.get_za3lpa$(z.material))}}for(f=this.nodes.iterator();f.hasNext();){var k,S=f.next(),C=S.children,N=w(j(C,10));for(k=C.iterator();k.hasNext();){var E=k.next();N.add_11rb$(this.nodes.get_za3lpa$(E))}S.childRefs=N,S.mesh>=0&&(S.meshRef=this.meshes.get_za3lpa$(S.mesh)),S.skin>=0&&(S.skinRef=this.skins.get_za3lpa$(S.skin))}for(_=this.scenes.iterator();_.hasNext();){var T,P=_.next(),O=P.nodes,A=w(j(O,10));for(T=O.iterator();T.hasNext();){var I=T.next();A.add_11rb$(this.nodes.get_za3lpa$(I))}P.nodeRefs=A}for(m=this.skins.iterator();m.hasNext();){var R=m.next();R.inverseBindMatrices>=0&&(R.inverseBindMatrixAccessorRef=this.accessors.get_za3lpa$(R.inverseBindMatrices));var L,D=R.joints,q=w(j(D,10));for(L=D.iterator();L.hasNext();){var F=L.next();q.add_11rb$(this.nodes.get_za3lpa$(F))}R.jointRefs=q}for($=this.textures.iterator();$.hasNext();){var B=$.next();B.imageRef=this.images.get_za3lpa$(B.source)}},Tb.$metadata$={kind:$,simpleName:"ModelGenerateConfig",interfaces:[]},Pb.$metadata$={kind:$,simpleName:"ModelMaterialConfig",interfaces:[]},Ob.prototype.makeModel_m76q01$=function(t){var e,i,n,o=new rf(null!=(e=t.name)?e:"model_scene");for(i=t.nodeRefs.iterator();i.hasNext();){var r=i.next();o.plusAssign_f1kmr1$(this.makeNode_0(r,o,this.cfg))}for(this.cfg.loadAnimations&&this.makeTrsAnimations_0(),this.cfg.loadAnimations&&this.makeSkins_0(o),n=this.modelNodes.entries.iterator();n.hasNext();){var s=n.next(),a=s.key,l=s.value;this.createMeshes_0(a,o,l,this.cfg)}this.cfg.loadAnimations&&this.makeMorphAnimations_0();var u,p,c=this.modelAnimations,h=M();for(u=c.iterator();u.hasNext();){var d=u.next();d.channels.isEmpty()||h.add_11rb$(d)}for(p=h.iterator();p.hasNext();){var f=p.next();f.prepareAnimation(),o.animations.add_11rb$(f)}return o.disableAllAnimations(),this.cfg.applyTransforms&&o.animations.isEmpty()&&this.applyTransforms_0(o),this.cfg.mergeMeshesByMaterial&&this.mergeMeshesByMaterial_0(o),this.cfg.sortNodesByAlpha&&this.sortNodesByAlpha_0(o),this.cfg.removeEmptyNodes&&this.removeEmpty_0(o),o},Ob.prototype.removeEmpty_0=function(t){var i,n,o=t.children,r=M();for(i=o.iterator();i.hasNext();){var s=i.next();e.isType(s,Id)&&r.add_11rb$(s)}for(n=r.iterator();n.hasNext();){var a=n.next();this.removeEmpty_0(a),a.children.isEmpty()&&t.removeNode_f1kmr1$(a)}},Ob.prototype.makeTrsAnimations_0=function(){var t;for(t=this.$outer.animations.iterator();t.hasNext();){var i=t.next(),n=new Cm(i.name);this.modelAnimations.add_11rb$(n);var o,r=z();for(o=i.channels.iterator();o.hasNext();){var s,a=o.next(),l=this.modelNodes,u=a.target.nodeRef,p=(e.isType(s=l,$e)?s:c()).get_11rb$(u);if(null!=p){var h,d=r.get_11rb$(p);if(null==d){var f=new jm(p);r.put_xwzc9p$(p,f),h=f}else h=d;var _=h;switch(a.target.path){case"translation":this.makeTranslationAnimation_0(a,_,n);break;case"rotation":this.makeRotationAnimation_0(a,_,n);break;case"scale":this.makeScaleAnimation_0(a,_,n)}}}}},Ob.prototype.makeTranslationAnimation_0=function(t,i,n){var o,r,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(zt(a.type,Iv().TYPE_SCALAR)&&5126===a.componentType)if(zt(l.type,Iv().TYPE_VEC3)&&5126===l.componentType){var u=new Em(Ct(n.name)+"_translation",i);switch(t.samplerRef.interpolation){case"STEP":o=Vm();break;case"CUBICSPLINE":o=Wm();break;default:o=Fm()}var p=o;n.channels.add_11rb$(u);var c=new dg(a),h=new _g(l),d=a.count,f=l.count;r=A.min(d,f);for(var _=0;_<r;_++){var m=c.next();if(p===Wm()){var $=h.nextD();s=new Zm(m,h.nextD(),$,h.nextD())}else s=new Ym(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=KN.Log,g=Cz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported translation animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var x=KN.Log,w=Cz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported translation animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},Ob.prototype.makeRotationAnimation_0=function(t,i,n){var o,r,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(zt(a.type,Iv().TYPE_SCALAR)&&5126===a.componentType)if(zt(l.type,Iv().TYPE_VEC4)&&5126===l.componentType){var u=new Tm(Ct(n.name)+"_rotation",i);switch(t.samplerRef.interpolation){case"STEP":o=Vm();break;case"CUBICSPLINE":o=Wm();break;default:o=Fm()}var p=o;n.channels.add_11rb$(u);var c=new dg(a),h=new mg(l),d=a.count,f=l.count;r=A.min(d,f);for(var _=0;_<r;_++){var m=c.next();if(p===Wm()){var $=h.nextD();s=new Xm(m,h.nextD(),$,h.nextD())}else s=new Km(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=KN.Log,g=Cz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported rotation animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC4 and 5126 (float)")}else{var x=KN.Log,w=Cz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported rotation animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},Ob.prototype.makeScaleAnimation_0=function(t,i,n){var o,r,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(zt(a.type,Iv().TYPE_SCALAR)&&5126===a.componentType)if(zt(l.type,Iv().TYPE_VEC3)&&5126===l.componentType){var u=new Pm(Ct(n.name)+"_scale",i);switch(t.samplerRef.interpolation){case"STEP":o=Vm();break;case"CUBICSPLINE":o=Wm();break;default:o=Fm()}var p=o;n.channels.add_11rb$(u);var c=new dg(a),h=new _g(l),d=a.count,f=l.count;r=A.min(d,f);for(var _=0;_<r;_++){var m=c.next();if(p===Wm()){var $=h.nextD();s=new Qm(m,h.nextD(),$,h.nextD())}else s=new Jm(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=KN.Log,g=Cz.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported scale animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var x=KN.Log,w=Cz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported scale animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},Ob.prototype.makeMorphAnimations_0=function(){var t,i,n=0;for(t=this.$outer.animations.iterator();t.hasNext();){var o,r=t.next(),s=J((n=(i=n)+1|0,i));for(o=r.channels.iterator();o.hasNext();){var a,l,u,p=o.next();if(zt(p.target.path,Pg().PATH_WEIGHTS)){var h,d,f,_=this.modelAnimations.get_za3lpa$(s),m=null!=(a=p.target.nodeRef)?a.meshRef:null,$=this.modelNodes,y=p.target.nodeRef,v=(e.isType(h=$,$e)?h:c()).get_11rb$(y);if(null!=(l=null!=v?v.children:null)){var g,b=M();for(g=l.iterator();g.hasNext();){var w=g.next();e.isType(w,Hd)&&b.add_11rb$(w)}d=b}else d=null;if(null!=(u=d))for(f=u.iterator();f.hasNext();){var z=f.next();this.makeWeightAnimation_0(x(m),p,new Am(z),_)}}}}},Ob.prototype.makeWeightAnimation_0=function(t,i,n,o){var r,s,a,l=i.samplerRef.inputAccessorRef,u=i.samplerRef.outputAccessorRef;if(zt(l.type,Iv().TYPE_SCALAR)&&5126===l.componentType)if(zt(u.type,Iv().TYPE_SCALAR)&&5126===u.componentType){var p=new Om(Ct(o.name)+"_weight",n);switch(i.samplerRef.interpolation){case"STEP":r=Vm();break;case"CUBICSPLINE":r=Wm();break;default:r=Fm()}var c=r;o.channels.add_11rb$(p);var h,d=t.primitives.get_za3lpa$(0).targets,f=0;for(h=t.primitives.get_za3lpa$(0).targets.iterator();h.hasNext();)f=f+h.next().size|0;var _=f,m=new dg(l),$=new dg(u),y=l.count,v=u.count;s=A.min(y,v);for(var g=0;g<s;g++){var b=m.next();if(c===Wm()){for(var x=new Float32Array(_),w=new Float32Array(_),z=new Float32Array(_),k=0,S=0;S!==d.size;++S){var C,N,E=$.next();C=d.get_za3lpa$(S).size;for(var T=0;T<C;T++)x[(N=k,k=N+1|0,N)]=E}k=0;for(var P=0;P!==d.size;++P){var O,M,j=$.next();O=d.get_za3lpa$(P).size;for(var I=0;I<O;I++)w[(M=k,k=M+1|0,M)]=j}k=0;for(var R=0;R!==d.size;++R){var L,D,q=$.next();L=d.get_za3lpa$(R).size;for(var F=0;F<L;F++)z[(D=k,k=D+1|0,D)]=q}a=new e$(b,w,x,z)}else{for(var B=new Float32Array(_),U=0,V=0;V!==d.size;++V){var G,H,W=$.next();G=d.get_za3lpa$(V).size;for(var K=0;K<G;K++)B[(H=U,U=H+1|0,H)]=W}a=new t$(b,B)}var X=a;X.interpolation=c,p.keys.put_xwzc9p$(b,X)}}else{var Y=KN.Log,Z=Cz.WARN,J=e.getKClassFromExpression(this).simpleName;Z.level>=Y.level.level&&Y.printer(Z,J,"Unsupported weight animation output accessor: type = "+u.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var Q=KN.Log,tt=Cz.WARN,et=e.getKClassFromExpression(this).simpleName;tt.level>=Q.level.level&&Q.printer(tt,et,"Unsupported weight animation input accessor: type = "+l.type+", component type = "+l.componentType+", should be SCALAR and 5126 (float)")}},Ob.prototype.makeSkins_0=function(t){var e;for(e=this.$outer.skins.iterator();e.hasNext();){var i,n=e.next(),o=new h$,r=null!=(i=n.inverseBindMatrixAccessorRef)?new yg(i):null;if(null!=r){var s,a,l=z();for(s=n.jointRefs.iterator();s.hasNext();){var u=s.next(),p=new d$(x(this.modelNodes.get_11rb$(u)),r.next());o.nodes.add_11rb$(p),l.put_xwzc9p$(u,p)}for(a=n.jointRefs.iterator();a.hasNext();){var c,h=a.next(),d=l.get_11rb$(h);if(null!=d)for(c=h.childRefs.iterator();c.hasNext();){var f=c.next(),_=l.get_11rb$(f);null!=_&&d.addChild_j3a3b7$(_)}}t.skins.add_11rb$(o)}}},Ob.prototype.sortNodesByAlpha_0=function(t){var i,n,o=z(),r=0;for(i=t.children.iterator();i.hasNext();){var s=i.next(),a=1;e.isType(s,Hd)&&!s.isOpaque?a=0:e.isType(s,Id)&&(a=this.sortNodesByAlpha_0(s));var l=a;o.put_xwzc9p$(s,l),r+=a}return t.sortChildrenBy_mq7kdd$((n=o,function(t){var e;return-(null!=(e=n.get_11rb$(t))?e:1)})),t.children.isEmpty()||(r/=t.children.size),r},Ob.prototype.mergeMeshesByMaterial_0=function(t){this.mergeMeshesByMaterial_1(t)},Ob.prototype.mergeMeshesByMaterial_1=function(t){var i,n,o,r=t.children,s=M();for(i=r.iterator();i.hasNext();){var a=i.next();e.isType(a,Id)&&s.add_11rb$(a)}for(n=s.iterator();n.hasNext();){var l=n.next();this.mergeMeshesByMaterial_1(l)}for(o=this.meshesByMaterial.values.iterator();o.hasNext();){var u,p,h=o.next(),d=t.children,f=M();for(p=d.iterator();p.hasNext();){var _=p.next();Oe(h,_)&&f.add_11rb$(_)}var m,$=w(j(f,10));for(m=f.iterator();m.hasNext();){var y,v=m.next();$.add_11rb$(e.isType(y=v,Hd)?y:c())}var g=$;if(g.size>1){var b=g.get_za3lpa$(0);u=g.size;for(var x=1;x<u;x++){var z=g.get_za3lpa$(x);zt(z.geometry.attributeHash,b.geometry.attributeHash)&&(b.geometry.addGeometry_r7nl2o$(z.geometry),t.removeNode_f1kmr1$(z))}}}},Ob.prototype.applyTransforms_0=function(t){var e=new kn;e.setIdentity(),this.applyTransforms_1(t,e,t)},Ob.prototype.applyTransforms_1=function(t,i,n){i.push(),i.mul_d4zu6l$(t.transform);var o,r,s=t.children,a=M();for(o=s.iterator();o.hasNext();){var l=o.next();e.isType(l,Hd)&&a.add_11rb$(l)}for(r=a.iterator();r.hasNext();){var u=r.next(),p=u.geometry,c=p.isBatchUpdate;p.isBatchUpdate=!0,Mb(i)(p),p.hasChanged=!0,p.isBatchUpdate=c,p.rebuildBounds(),zt(n,t)||n.plusAssign_f1kmr1$(u)}var h,d,f=t.children,_=M();for(h=f.iterator();h.hasNext();){var m=h.next();e.isType(m,Id)&&_.add_11rb$(m)}for(d=_.iterator();d.hasNext();){var $=d.next();this.applyTransforms_1($,i,n),t.removeNode_f1kmr1$($)}i.pop()},Ob.prototype.makeNode_0=function(t,e,i){var n,o,r=null!=(n=t.name)?n:"node_"+e.nodes.size,s=new Id(r);if(this.modelNodes.put_xwzc9p$(t,s),e.nodes.put_xwzc9p$(r,s),null!=t.matrix){var a,l=s.transform,u=t.matrix,p=w(j(u,10));for(a=u.iterator();a.hasNext();){var c=a.next();p.add_11rb$(c)}l.set_d3e2cz$(p)}else{if(null!=t.translation&&s.translate_y2kzbl$(t.translation.get_za3lpa$(0),t.translation.get_za3lpa$(1),t.translation.get_za3lpa$(2)),null!=t.rotation){var h=(new bn).setRotate_czzhi1$(new rr(t.rotation.get_za3lpa$(0),t.rotation.get_za3lpa$(1),t.rotation.get_za3lpa$(2),t.rotation.get_za3lpa$(3)));s.transform.mul_d4zu6l$(h)}null!=t.scale&&s.scale_y2kzbl$(t.scale.get_za3lpa$(0),t.scale.get_za3lpa$(1),t.scale.get_za3lpa$(2))}for(o=t.childRefs.iterator();o.hasNext();){var d=o.next();s.plusAssign_f1kmr1$(this.makeNode_0(d,e,i))}return s},Ob.prototype.createMeshes_0=function(t,i,n,o){var r,s;if(null!=(s=null!=(r=t.meshRef)?r.primitives:null)){var a,l;this.$outer;var u=0;for(a=s.iterator();a.hasNext();){var p,c,h=a.next(),d=this.$outer,f=J((u=(l=u)+1|0,l)),_=(null!=(c=null!=(p=t.meshRef)?p.name:null)?c:Ct(n.name)+".mesh")+"_"+f,m=h.toGeometry_pfr3gu$(o.generateNormals,d.accessors);if(!m.isEmpty()){var $=new Hd(m,_);n.plusAssign_f1kmr1$($);var y,v=this.meshesByMaterial,g=h.material,b=v.get_11rb$(g);if(null==b){var w=ct();v.put_xwzc9p$(g,w),y=w}else y=b;y.add_11rb$($);var z=this.meshMaterials,k=h.materialRef;if(z.put_xwzc9p$($,k),o.loadAnimations&&o.applySkins&&t.skin>=0){$.skin=i.skins.get_za3lpa$(t.skin);var S=d.skins.get_za3lpa$(t.skin).skeleton;S>=0&&(n.minusAssign_f1kmr1$($),x(this.modelNodes.get_11rb$(d.nodes.get_za3lpa$(S))).plusAssign_f1kmr1$($)),$.isFrustumChecked=!1}var C=o.loadAnimations&&o.applyMorphTargets;if(C&&(C=!h.targets.isEmpty()),C){var N,E=Float32Array,T=0;for(N=h.targets.iterator();N.hasNext();)T=T+N.next().size|0;$.morphWeights=new E(T),$.isFrustumChecked=!1}if(o.applyMaterials){var P,O,M,j,A,I,R,L,D={v:o.materialConfig.isDeferredShading},q=h.attributes.containsKey_11rb$(mx().ATTRIBUTE_COLOR_0),F=new mc,B=h.materialRef;null!=B?B.applyTo_rmmby8$(F,q,d):(F.albedo=J$().GRAY,F.albedoSource=ec()),null!=$.skin&&(F.isSkinned=!0),null!=$.morphWeights&&xt(F.morphAttributes,$.geometry.getMorphAttributes());var U,V=o.materialConfig;if(xt(F.shadowMaps,V.shadowMaps),null!=(U=V.scrSpcAmbientOcclusionMap)&&F.useScreenSpaceAmbientOcclusion_vv6xll$(U),F.useImageBasedLighting_po417x$(V.environmentMaps),null!=(P=o.pbrBlock)&&P(F,h),e.isType(F.alphaMode,rc)&&($.isOpaque=!1,D.v=!1),null!=(O=F.albedoMap)){var G,H;H=i.textures;var W=null!=(G=O.name)?G:"tex_"+i.textures.size;H.put_xwzc9p$(W,O)}if(null!=(M=F.emissiveMap)){var K,X;X=i.textures;var Y=null!=(K=M.name)?K:"tex_"+i.textures.size;X.put_xwzc9p$(Y,M)}if(null!=(j=F.normalMap)){var Z,Q;Q=i.textures;var tt=null!=(Z=j.name)?Z:"tex_"+i.textures.size;Q.put_xwzc9p$(tt,j)}if(null!=(A=F.roughnessMap)){var et,it;it=i.textures;var nt=null!=(et=A.name)?et:"tex_"+i.textures.size;it.put_xwzc9p$(nt,A)}if(null!=(I=F.metallicMap)){var ot,rt;rt=i.textures;var st=null!=(ot=I.name)?ot:"tex_"+i.textures.size;rt.put_xwzc9p$(st,I)}if(null!=(R=F.occlusionMap)){var at,lt;lt=i.textures;var ut=null!=(at=R.name)?at:"tex_"+i.textures.size;lt.put_xwzc9p$(ut,R)}if(null!=(L=F.displacementMap)){var pt,ht;ht=i.textures;var dt=null!=(pt=L.name)?pt:"tex_"+i.textures.size;ht.put_xwzc9p$(dt,L)}var ft=F;D.v?(ft.isHdrOutput=!0,$.shader=new Dy(ft)):(ft.isHdrOutput=!1,$.shader=new $c(ft))}i.meshes.put_xwzc9p$(_,$)}}}},Ob.$metadata$={kind:$,simpleName:"ModelGenerator",interfaces:[]},jb.prototype.fromJson_61zpoe$=function(t){var i,n=Me(void 0,Ab);return n.decodeFromString_awif5v$(e.isType(i=je(n.serializersModule,Pe(Te(Eb),[],!1)),Ae)?i:c(),t)},jb.prototype.serializer=function(){return qb()},jb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ib=null;function Rb(){return null===Ib&&new jb,Ib}function Lb(){this.descriptor_sl1tf8$_0=new ge("de.fabmax.kool.util.gltf.GltfFile",this,15),this.descriptor.addElement_ivxn3r$("extensionsUsed",!0),this.descriptor.addElement_ivxn3r$("extensionsRequired",!0),this.descriptor.addElement_ivxn3r$("accessors",!0),this.descriptor.addElement_ivxn3r$("animations",!0),this.descriptor.addElement_ivxn3r$("asset",!1),this.descriptor.addElement_ivxn3r$("buffers",!0),this.descriptor.addElement_ivxn3r$("bufferViews",!0),this.descriptor.addElement_ivxn3r$("images",!0),this.descriptor.addElement_ivxn3r$("materials",!0),this.descriptor.addElement_ivxn3r$("meshes",!0),this.descriptor.addElement_ivxn3r$("nodes",!0),this.descriptor.addElement_ivxn3r$("scene",!0),this.descriptor.addElement_ivxn3r$("scenes",!0),this.descriptor.addElement_ivxn3r$("skins",!0),this.descriptor.addElement_ivxn3r$("textures",!0),Db=this}Object.defineProperty(Lb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_sl1tf8$_0}}),Lb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.extensionsUsed,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(xe.StringSerializer),e.extensionsUsed),zt(e.extensionsRequired,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new ke(xe.StringSerializer),e.extensionsRequired),zt(e.accessors,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeSerializableElement_r4qlx7$(this.descriptor,2,new ke(ug()),e.accessors),zt(e.animations,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeSerializableElement_r4qlx7$(this.descriptor,3,new ke(Xg()),e.animations),i.encodeSerializableElement_r4qlx7$(this.descriptor,4,nb(),e.asset),zt(e.buffers,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeSerializableElement_r4qlx7$(this.descriptor,5,new ke(vb()),e.buffers),zt(e.bufferViews,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeSerializableElement_r4qlx7$(this.descriptor,6,new ke(Cb()),e.bufferViews),zt(e.images,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeSerializableElement_r4qlx7$(this.descriptor,7,new ke(Kb()),e.images),zt(e.materials,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeSerializableElement_r4qlx7$(this.descriptor,8,new ke(px()),e.materials),zt(e.meshes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeSerializableElement_r4qlx7$(this.descriptor,9,new ke(Sx()),e.meshes),zt(e.nodes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,10)||i.encodeSerializableElement_r4qlx7$(this.descriptor,10,new ke(jx()),e.nodes),zt(e.scene,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,11)||i.encodeIntElement_ptg7oe$(this.descriptor,11,e.scene),zt(e.scenes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,12)||i.encodeSerializableElement_r4qlx7$(this.descriptor,12,new ke(Bx()),e.scenes),zt(e.skins,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,13)||i.encodeSerializableElement_r4qlx7$(this.descriptor,13,new ke(Yx()),e.skins),zt(e.textures,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,14)||i.encodeSerializableElement_r4qlx7$(this.descriptor,14,new ke(rw()),e.textures),i.endStructure_24f42q$(this.descriptor)},Lb.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a,l,u,p,c,h,d,f,_,m,$=0,y=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=y.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=y.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(xe.StringSerializer),i),$|=1;break;case 1:n=y.decodeSerializableElement_12e8id$(this.descriptor,1,new ke(xe.StringSerializer),n),$|=2;break;case 2:o=y.decodeSerializableElement_12e8id$(this.descriptor,2,new ke(ug()),o),$|=4;break;case 3:r=y.decodeSerializableElement_12e8id$(this.descriptor,3,new ke(Xg()),r),$|=8;break;case 4:s=y.decodeSerializableElement_12e8id$(this.descriptor,4,nb(),s),$|=16;break;case 5:a=y.decodeSerializableElement_12e8id$(this.descriptor,5,new ke(vb()),a),$|=32;break;case 6:l=y.decodeSerializableElement_12e8id$(this.descriptor,6,new ke(Cb()),l),$|=64;break;case 7:u=y.decodeSerializableElement_12e8id$(this.descriptor,7,new ke(Kb()),u),$|=128;break;case 8:p=y.decodeSerializableElement_12e8id$(this.descriptor,8,new ke(px()),p),$|=256;break;case 9:c=y.decodeSerializableElement_12e8id$(this.descriptor,9,new ke(Sx()),c),$|=512;break;case 10:h=y.decodeSerializableElement_12e8id$(this.descriptor,10,new ke(jx()),h),$|=1024;break;case 11:d=y.decodeIntElement_szpzho$(this.descriptor,11),$|=2048;break;case 12:f=y.decodeSerializableElement_12e8id$(this.descriptor,12,new ke(Bx()),f),$|=4096;break;case 13:_=y.decodeSerializableElement_12e8id$(this.descriptor,13,new ke(Yx()),_),$|=8192;break;case 14:m=y.decodeSerializableElement_12e8id$(this.descriptor,14,new ke(rw()),m),$|=16384;break;case-1:break t;default:throw new be(e)}return y.endStructure_24f42q$(this.descriptor),Fb($,i,n,o,r,s,a,l,u,p,c,h,d,f,_,m,null)},Lb.prototype.childSerializers=function(){return[new ke(xe.StringSerializer),new ke(xe.StringSerializer),new ke(ug()),new ke(Xg()),nb(),new ke(vb()),new ke(Cb()),new ke(Kb()),new ke(px()),new ke(Sx()),new ke(jx()),xe.IntSerializer,new ke(Bx()),new ke(Yx()),new ke(rw())]},Lb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Db=null;function qb(){return null===Db&&new Lb,Db}function Fb(t,e,i,n,o,r,s,a,l,u,p,c,h,d,f,_,m){var $=m||Object.create(Eb.prototype);if($.extensionsUsed=0==(1&t)?Nt():e,$.extensionsRequired=0==(2&t)?Nt():i,$.accessors=0==(4&t)?Nt():n,$.animations=0==(8&t)?Nt():o,0==(16&t))throw new ze("asset");return $.asset=r,$.buffers=0==(32&t)?Nt():s,$.bufferViews=0==(64&t)?Nt():a,$.images=0==(128&t)?Nt():l,$.materials=0==(256&t)?Nt():u,$.meshes=0==(512&t)?Nt():p,$.nodes=0==(1024&t)?Nt():c,$.scene=0==(2048&t)?0:h,$.scenes=0==(4096&t)?Nt():d,$.skins=0==(8192&t)?Nt():f,$.textures=0==(16384&t)?Nt():_,$}function Bb(t,e,i,n){Gb(),void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=-1),void 0===n&&(n=null),this.uri=t,this.mimeType=e,this.bufferView=i,this.name=n,this.bufferViewRef=null}function Ub(){Vb=this}Eb.$metadata$={kind:$,simpleName:"GltfFile",interfaces:[]},Eb.prototype.component1=function(){return this.extensionsUsed},Eb.prototype.component2=function(){return this.extensionsRequired},Eb.prototype.component3=function(){return this.accessors},Eb.prototype.component4=function(){return this.animations},Eb.prototype.component5=function(){return this.asset},Eb.prototype.component6=function(){return this.buffers},Eb.prototype.component7=function(){return this.bufferViews},Eb.prototype.component8=function(){return this.images},Eb.prototype.component9=function(){return this.materials},Eb.prototype.component10=function(){return this.meshes},Eb.prototype.component11=function(){return this.nodes},Eb.prototype.component12=function(){return this.scene},Eb.prototype.component13=function(){return this.scenes},Eb.prototype.component14=function(){return this.skins},Eb.prototype.component15=function(){return this.textures},Eb.prototype.copy_2qvmcu$=function(t,e,i,n,o,r,s,a,l,u,p,c,h,d,f){return new Eb(void 0===t?this.extensionsUsed:t,void 0===e?this.extensionsRequired:e,void 0===i?this.accessors:i,void 0===n?this.animations:n,void 0===o?this.asset:o,void 0===r?this.buffers:r,void 0===s?this.bufferViews:s,void 0===a?this.images:a,void 0===l?this.materials:l,void 0===u?this.meshes:u,void 0===p?this.nodes:p,void 0===c?this.scene:c,void 0===h?this.scenes:h,void 0===d?this.skins:d,void 0===f?this.textures:f)},Eb.prototype.toString=function(){return"GltfFile(extensionsUsed="+e.toString(this.extensionsUsed)+", extensionsRequired="+e.toString(this.extensionsRequired)+", accessors="+e.toString(this.accessors)+", animations="+e.toString(this.animations)+", asset="+e.toString(this.asset)+", buffers="+e.toString(this.buffers)+", bufferViews="+e.toString(this.bufferViews)+", images="+e.toString(this.images)+", materials="+e.toString(this.materials)+", meshes="+e.toString(this.meshes)+", nodes="+e.toString(this.nodes)+", scene="+e.toString(this.scene)+", scenes="+e.toString(this.scenes)+", skins="+e.toString(this.skins)+", textures="+e.toString(this.textures)+")"},Eb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.extensionsUsed)|0)+e.hashCode(this.extensionsRequired)|0)+e.hashCode(this.accessors)|0)+e.hashCode(this.animations)|0)+e.hashCode(this.asset)|0)+e.hashCode(this.buffers)|0)+e.hashCode(this.bufferViews)|0)+e.hashCode(this.images)|0)+e.hashCode(this.materials)|0)+e.hashCode(this.meshes)|0)+e.hashCode(this.nodes)|0)+e.hashCode(this.scene)|0)+e.hashCode(this.scenes)|0)+e.hashCode(this.skins)|0)+e.hashCode(this.textures)|0},Eb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.extensionsUsed,t.extensionsUsed)&&e.equals(this.extensionsRequired,t.extensionsRequired)&&e.equals(this.accessors,t.accessors)&&e.equals(this.animations,t.animations)&&e.equals(this.asset,t.asset)&&e.equals(this.buffers,t.buffers)&&e.equals(this.bufferViews,t.bufferViews)&&e.equals(this.images,t.images)&&e.equals(this.materials,t.materials)&&e.equals(this.meshes,t.meshes)&&e.equals(this.nodes,t.nodes)&&e.equals(this.scene,t.scene)&&e.equals(this.scenes,t.scenes)&&e.equals(this.skins,t.skins)&&e.equals(this.textures,t.textures)},Ub.prototype.serializer=function(){return Kb()},Ub.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Vb=null;function Gb(){return null===Vb&&new Ub,Vb}function Hb(){this.descriptor_bk6hkl$_0=new ge("de.fabmax.kool.util.gltf.GltfImage",this,4),this.descriptor.addElement_ivxn3r$("uri",!0),this.descriptor.addElement_ivxn3r$("mimeType",!0),this.descriptor.addElement_ivxn3r$("bufferView",!0),this.descriptor.addElement_ivxn3r$("name",!0),Wb=this}Object.defineProperty(Hb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_bk6hkl$_0}}),Hb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.uri,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.uri),zt(e.mimeType,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,xe.StringSerializer,e.mimeType),zt(e.bufferView,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.bufferView),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Hb.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),s|=1;break;case 1:n=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,xe.StringSerializer,n),s|=2;break;case 2:o=a.decodeIntElement_szpzho$(this.descriptor,2),s|=4;break;case 3:r=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,xe.StringSerializer,r),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),Xb(s,i,n,o,r,null)},Hb.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),new ye(xe.StringSerializer),xe.IntSerializer,new ye(xe.StringSerializer)]},Hb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Wb=null;function Kb(){return null===Wb&&new Hb,Wb}function Xb(t,e,i,n,o,r){var s=r||Object.create(Bb.prototype);return s.uri=0==(1&t)?null:e,s.mimeType=0==(2&t)?null:i,s.bufferView=0==(4&t)?-1:n,s.name=0==(8&t)?null:o,s.bufferViewRef=null,s}function Yb(t,e,i,n,o,r,s,a,l){ax(),void 0===t&&(t=null),void 0===e&&(e=new Zb(At([.5,.5,.5,1]))),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),void 0===s&&(s=ax().ALPHA_MODE_OPAQUE),void 0===a&&(a=.5),void 0===l&&(l=!1),this.name=t,this.pbrMetallicRoughness=e,this.normalTexture=i,this.occlusionTexture=n,this.emissiveTexture=o,this.emissiveFactor=r,this.alphaMode=s,this.alphaCutoff=a,this.doubleSided=l}function Zb(t,e,i,n,o){tx(),void 0===t&&(t=At([1,1,1,1])),void 0===e&&(e=null),void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=null),this.baseColorFactor=t,this.baseColorTexture=e,this.metallicFactor=i,this.roughnessFactor=n,this.metallicRoughnessTexture=o}function Jb(){Qb=this}Bb.$metadata$={kind:$,simpleName:"GltfImage",interfaces:[]},Bb.prototype.component1=function(){return this.uri},Bb.prototype.component2=function(){return this.mimeType},Bb.prototype.component3=function(){return this.bufferView},Bb.prototype.component4=function(){return this.name},Bb.prototype.copy_82a7yt$=function(t,e,i,n){return new Bb(void 0===t?this.uri:t,void 0===e?this.mimeType:e,void 0===i?this.bufferView:i,void 0===n?this.name:n)},Bb.prototype.toString=function(){return"GltfImage(uri="+e.toString(this.uri)+", mimeType="+e.toString(this.mimeType)+", bufferView="+e.toString(this.bufferView)+", name="+e.toString(this.name)+")"},Bb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.uri)|0)+e.hashCode(this.mimeType)|0)+e.hashCode(this.bufferView)|0)+e.hashCode(this.name)|0},Bb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.uri,t.uri)&&e.equals(this.mimeType,t.mimeType)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.name,t.name)},Yb.prototype.applyTo_rmmby8$=function(t,e,i){var n,o,r,s,a,l,u,p,c,h,d,f,_=null!=(n=this.pbrMetallicRoughness.baseColorTexture)?n.getTexture_vd9sc9$(i):null,m=null!=(o=this.emissiveTexture)?o.getTexture_vd9sc9$(i):null,$=null!=(r=this.normalTexture)?r.getTexture_vd9sc9$(i):null,y=null!=(s=this.pbrMetallicRoughness.metallicRoughnessTexture)?s.getTexture_vd9sc9$(i):null,v=null!=(a=this.pbrMetallicRoughness.metallicRoughnessTexture)?a.getTexture_vd9sc9$(i):null,g=null!=(l=this.occlusionTexture)?l.getTexture_vd9sc9$(i):null,b=this.pbrMetallicRoughness.baseColorFactor;switch(this.alphaMode){case"BLEND":u=new rc;break;case"MASK":u=new ac(this.alphaCutoff);break;default:u=new sc}t.alphaMode=u,p=this.doubleSided?zl():xl(),t.cullMethod=p,c=4===b.size?new X$(b.get_za3lpa$(0),b.get_za3lpa$(1),b.get_za3lpa$(2),b.get_za3lpa$(3)):J$().WHITE,t.albedo=c,e?t.albedoSource=nc():null!=_?(t.albedoSource=ic(),t.albedoMap=_,null!=(h=t.albedo)&&h.equals(J$().WHITE)||(t.isMultiplyAlbedoMap=!0)):t.albedoSource=ec(),null!=m&&(t.isEmissiveMapped=!0,t.emissiveMap=m,null!=this.emissiveFactor&&(t.isMultiplyEmissiveMap=!0)),null!=this.emissiveFactor&&(t.emissive=new X$(this.emissiveFactor.get_za3lpa$(0),this.emissiveFactor.get_za3lpa$(1),this.emissiveFactor.get_za3lpa$(2),1)),null!=$?(t.isNormalMapped=!0,t.normalMap=$):t.isNormalMapped=!1,t.roughness=this.pbrMetallicRoughness.roughnessFactor,null!=v?(t.isRoughnessMapped=!0,t.roughnessMap=v,1!==this.pbrMetallicRoughness.roughnessFactor&&(t.isMultiplyRoughnessMap=!0)):t.isRoughnessMapped=!1,t.metallic=this.pbrMetallicRoughness.metallicFactor,null!=y?(t.isMetallicMapped=!0,t.metallicMap=y,1!==this.pbrMetallicRoughness.metallicFactor&&(t.isMultiplyMetallicMap=!0)):t.isMetallicMapped=!1,null!=g?(t.isOcclusionMapped=!0,t.occlusionMap=g,t.occlusionStrength=null!=(f=null!=(d=this.occlusionTexture)?d.strength:null)?f:1):t.isOcclusionMapped=!1,t.isRoughnessMapped&&(v!==y&&v!==g?(t.roughnessChannel="r",t.roughnessTexName="tRoughness"):(t.roughnessChannel="g",t.roughnessTexName=v===y&&v===g?"tOcclRoughMetal":v===y?"tRoughMetal":"tOcclRough")),t.isMetallicMapped&&(y!==v&&y!==g?(t.metallicChannel="r",t.metallicTexName="tMetallic"):(t.metallicChannel="b",y===v&&y===g?t.metallicTexName="tOcclRoughMetal":y===v?t.metallicTexName="tRoughMetal":t.roughnessTexName="tOcclMetal")),t.isOcclusionMapped&&(g!==v&&g!==y?(t.occlusionChannel="r",t.occlusionTexName="tOcclusion"):(t.occlusionChannel="r",g===v&&g===y?t.occlusionTexName="tOcclRoughMetal":t.roughnessTexName=g===v?"tOcclRough":"tOcclMetal"))},Jb.prototype.serializer=function(){return nx()},Jb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Qb=null;function tx(){return null===Qb&&new Jb,Qb}function ex(){this.descriptor_2b7y8e$_0=new ge("de.fabmax.kool.util.gltf.GltfMaterial.PbrMetallicRoughness",this,5),this.descriptor.addElement_ivxn3r$("baseColorFactor",!0),this.descriptor.addElement_ivxn3r$("baseColorTexture",!0),this.descriptor.addElement_ivxn3r$("metallicFactor",!0),this.descriptor.addElement_ivxn3r$("roughnessFactor",!0),this.descriptor.addElement_ivxn3r$("metallicRoughnessTexture",!0),ix=this}Object.defineProperty(ex.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_2b7y8e$_0}}),ex.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.baseColorFactor,At([1,1,1,1]))&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(xe.FloatSerializer),e.baseColorFactor),zt(e.baseColorTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,dw(),e.baseColorTexture),zt(e.metallicFactor,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeFloatElement_lf6hpt$(this.descriptor,2,e.metallicFactor),zt(e.roughnessFactor,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeFloatElement_lf6hpt$(this.descriptor,3,e.roughnessFactor),zt(e.metallicRoughnessTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,4,dw(),e.metallicRoughnessTexture),i.endStructure_24f42q$(this.descriptor)},ex.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a=0,l=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=l.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=l.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(xe.FloatSerializer),i),a|=1;break;case 1:n=l.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,dw(),n),a|=2;break;case 2:o=l.decodeFloatElement_szpzho$(this.descriptor,2),a|=4;break;case 3:r=l.decodeFloatElement_szpzho$(this.descriptor,3),a|=8;break;case 4:s=l.decodeNullableSerializableElement_8viuyw$(this.descriptor,4,dw(),s),a|=16;break;case-1:break t;default:throw new be(e)}return l.endStructure_24f42q$(this.descriptor),ox(a,i,n,o,r,s,null)},ex.prototype.childSerializers=function(){return[new ke(xe.FloatSerializer),new ye(dw()),xe.FloatSerializer,xe.FloatSerializer,new ye(dw())]},ex.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var ix=null;function nx(){return null===ix&&new ex,ix}function ox(t,e,i,n,o,r,s){var a=s||Object.create(Zb.prototype);return a.baseColorFactor=0==(1&t)?At([1,1,1,1]):e,a.baseColorTexture=0==(2&t)?null:i,a.metallicFactor=0==(4&t)?1:n,a.roughnessFactor=0==(8&t)?1:o,a.metallicRoughnessTexture=0==(16&t)?null:r,a}function rx(){sx=this,this.ALPHA_MODE_BLEND="BLEND",this.ALPHA_MODE_MASK="MASK",this.ALPHA_MODE_OPAQUE="OPAQUE"}Zb.$metadata$={kind:$,simpleName:"PbrMetallicRoughness",interfaces:[]},Zb.prototype.component1=function(){return this.baseColorFactor},Zb.prototype.component2=function(){return this.baseColorTexture},Zb.prototype.component3=function(){return this.metallicFactor},Zb.prototype.component4=function(){return this.roughnessFactor},Zb.prototype.component5=function(){return this.metallicRoughnessTexture},Zb.prototype.copy_x3y116$=function(t,e,i,n,o){return new Zb(void 0===t?this.baseColorFactor:t,void 0===e?this.baseColorTexture:e,void 0===i?this.metallicFactor:i,void 0===n?this.roughnessFactor:n,void 0===o?this.metallicRoughnessTexture:o)},Zb.prototype.toString=function(){return"PbrMetallicRoughness(baseColorFactor="+e.toString(this.baseColorFactor)+", baseColorTexture="+e.toString(this.baseColorTexture)+", metallicFactor="+e.toString(this.metallicFactor)+", roughnessFactor="+e.toString(this.roughnessFactor)+", metallicRoughnessTexture="+e.toString(this.metallicRoughnessTexture)+")"},Zb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.baseColorFactor)|0)+e.hashCode(this.baseColorTexture)|0)+e.hashCode(this.metallicFactor)|0)+e.hashCode(this.roughnessFactor)|0)+e.hashCode(this.metallicRoughnessTexture)|0},Zb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.baseColorFactor,t.baseColorFactor)&&e.equals(this.baseColorTexture,t.baseColorTexture)&&e.equals(this.metallicFactor,t.metallicFactor)&&e.equals(this.roughnessFactor,t.roughnessFactor)&&e.equals(this.metallicRoughnessTexture,t.metallicRoughnessTexture)},rx.prototype.serializer=function(){return px()},rx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var sx=null;function ax(){return null===sx&&new rx,sx}function lx(){this.descriptor_esy7m1$_0=new ge("de.fabmax.kool.util.gltf.GltfMaterial",this,9),this.descriptor.addElement_ivxn3r$("name",!0),this.descriptor.addElement_ivxn3r$("pbrMetallicRoughness",!0),this.descriptor.addElement_ivxn3r$("normalTexture",!0),this.descriptor.addElement_ivxn3r$("occlusionTexture",!0),this.descriptor.addElement_ivxn3r$("emissiveTexture",!0),this.descriptor.addElement_ivxn3r$("emissiveFactor",!0),this.descriptor.addElement_ivxn3r$("alphaMode",!0),this.descriptor.addElement_ivxn3r$("alphaCutoff",!0),this.descriptor.addElement_ivxn3r$("doubleSided",!0),ux=this}Object.defineProperty(lx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_esy7m1$_0}}),lx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,xe.StringSerializer,e.name),zt(e.pbrMetallicRoughness,new Zb(At([.5,.5,.5,1])))&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,nx(),e.pbrMetallicRoughness),zt(e.normalTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,dw(),e.normalTexture),zt(e.occlusionTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,dw(),e.occlusionTexture),zt(e.emissiveTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,4,dw(),e.emissiveTexture),zt(e.emissiveFactor,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,new ke(xe.FloatSerializer),e.emissiveFactor),zt(e.alphaMode,ax().ALPHA_MODE_OPAQUE)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeStringElement_iij8qq$(this.descriptor,6,e.alphaMode),zt(e.alphaCutoff,.5)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeFloatElement_lf6hpt$(this.descriptor,7,e.alphaCutoff),zt(e.doubleSided,!1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeBooleanElement_qh7jdn$(this.descriptor,8,e.doubleSided),i.endStructure_24f42q$(this.descriptor)},lx.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a,l,u,p,c=0,h=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=h.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,xe.StringSerializer,i),c|=1;break;case 1:n=h.decodeSerializableElement_12e8id$(this.descriptor,1,nx(),n),c|=2;break;case 2:o=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,dw(),o),c|=4;break;case 3:r=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,dw(),r),c|=8;break;case 4:s=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,4,dw(),s),c|=16;break;case 5:a=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,new ke(xe.FloatSerializer),a),c|=32;break;case 6:l=h.decodeStringElement_szpzho$(this.descriptor,6),c|=64;break;case 7:u=h.decodeFloatElement_szpzho$(this.descriptor,7),c|=128;break;case 8:p=h.decodeBooleanElement_szpzho$(this.descriptor,8),c|=256;break;case-1:break t;default:throw new be(e)}return h.endStructure_24f42q$(this.descriptor),cx(c,i,n,o,r,s,a,l,u,p,null)},lx.prototype.childSerializers=function(){return[new ye(xe.StringSerializer),nx(),new ye(dw()),new ye(dw()),new ye(dw()),new ye(new ke(xe.FloatSerializer)),xe.StringSerializer,xe.FloatSerializer,xe.BooleanSerializer]},lx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var ux=null;function px(){return null===ux&&new lx,ux}function cx(t,e,i,n,o,r,s,a,l,u,p){var c=p||Object.create(Yb.prototype);return c.name=0==(1&t)?null:e,c.pbrMetallicRoughness=0==(2&t)?new Zb(At([.5,.5,.5,1])):i,c.normalTexture=0==(4&t)?null:n,c.occlusionTexture=0==(8&t)?null:o,c.emissiveTexture=0==(16&t)?null:r,c.emissiveFactor=0==(32&t)?null:s,c.alphaMode=0==(64&t)?ax().ALPHA_MODE_OPAQUE:a,c.alphaCutoff=0==(128&t)?.5:l,c.doubleSided=0!=(256&t)&&u,c}function hx(t,e,i){wx(),void 0===e&&(e=null),void 0===i&&(i=null),this.primitives=t,this.weights=e,this.name=i}function dx(t,e,i,n,o){mx(),void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===n&&(n=4),void 0===o&&(o=Nt()),this.attributes=t,this.indices=e,this.material=i,this.mode=n,this.targets=o,this.materialRef=null}function fx(){_x=this,this.MODE_POINTS=0,this.MODE_LINES=1,this.MODE_LINE_LOOP=2,this.MODE_LINE_STRIP=3,this.MODE_TRIANGLES=4,this.MODE_TRIANGLE_STRIP=5,this.MODE_TRIANGLE_FAN=6,this.MODE_QUADS=7,this.MODE_QUAD_STRIP=8,this.MODE_POLYGON=9,this.ATTRIBUTE_POSITION="POSITION",this.ATTRIBUTE_NORMAL="NORMAL",this.ATTRIBUTE_TANGENT="TANGENT",this.ATTRIBUTE_TEXCOORD_0="TEXCOORD_0",this.ATTRIBUTE_TEXCOORD_1="TEXCOORD_1",this.ATTRIBUTE_COLOR_0="COLOR_0",this.ATTRIBUTE_JOINTS_0="JOINTS_0",this.ATTRIBUTE_WEIGHTS_0="WEIGHTS_0"}Yb.$metadata$={kind:$,simpleName:"GltfMaterial",interfaces:[]},Yb.prototype.component1=function(){return this.name},Yb.prototype.component2=function(){return this.pbrMetallicRoughness},Yb.prototype.component3=function(){return this.normalTexture},Yb.prototype.component4=function(){return this.occlusionTexture},Yb.prototype.component5=function(){return this.emissiveTexture},Yb.prototype.component6=function(){return this.emissiveFactor},Yb.prototype.component7=function(){return this.alphaMode},Yb.prototype.component8=function(){return this.alphaCutoff},Yb.prototype.component9=function(){return this.doubleSided},Yb.prototype.copy_rgcvd8$=function(t,e,i,n,o,r,s,a,l){return new Yb(void 0===t?this.name:t,void 0===e?this.pbrMetallicRoughness:e,void 0===i?this.normalTexture:i,void 0===n?this.occlusionTexture:n,void 0===o?this.emissiveTexture:o,void 0===r?this.emissiveFactor:r,void 0===s?this.alphaMode:s,void 0===a?this.alphaCutoff:a,void 0===l?this.doubleSided:l)},Yb.prototype.toString=function(){return"GltfMaterial(name="+e.toString(this.name)+", pbrMetallicRoughness="+e.toString(this.pbrMetallicRoughness)+", normalTexture="+e.toString(this.normalTexture)+", occlusionTexture="+e.toString(this.occlusionTexture)+", emissiveTexture="+e.toString(this.emissiveTexture)+", emissiveFactor="+e.toString(this.emissiveFactor)+", alphaMode="+e.toString(this.alphaMode)+", alphaCutoff="+e.toString(this.alphaCutoff)+", doubleSided="+e.toString(this.doubleSided)+")"},Yb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.pbrMetallicRoughness)|0)+e.hashCode(this.normalTexture)|0)+e.hashCode(this.occlusionTexture)|0)+e.hashCode(this.emissiveTexture)|0)+e.hashCode(this.emissiveFactor)|0)+e.hashCode(this.alphaMode)|0)+e.hashCode(this.alphaCutoff)|0)+e.hashCode(this.doubleSided)|0},Yb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.pbrMetallicRoughness,t.pbrMetallicRoughness)&&e.equals(this.normalTexture,t.normalTexture)&&e.equals(this.occlusionTexture,t.occlusionTexture)&&e.equals(this.emissiveTexture,t.emissiveTexture)&&e.equals(this.emissiveFactor,t.emissiveFactor)&&e.equals(this.alphaMode,t.alphaMode)&&e.equals(this.alphaCutoff,t.alphaCutoff)&&e.equals(this.doubleSided,t.doubleSided)},dx.prototype.toGeometry_pfr3gu$=function(t,i){var n,o,r,s,a,l,u,p,c,h,d,f=this.indices>=0?i.get_za3lpa$(this.indices):null,_=null!=(n=this.attributes.get_11rb$(mx().ATTRIBUTE_POSITION))?i.get_za3lpa$(n):null,m=null!=(o=this.attributes.get_11rb$(mx().ATTRIBUTE_NORMAL))?i.get_za3lpa$(o):null,$=null!=(r=this.attributes.get_11rb$(mx().ATTRIBUTE_TANGENT))?i.get_za3lpa$(r):null,y=null!=(s=this.attributes.get_11rb$(mx().ATTRIBUTE_TEXCOORD_0))?i.get_za3lpa$(s):null,v=null!=(a=this.attributes.get_11rb$(mx().ATTRIBUTE_COLOR_0))?i.get_za3lpa$(a):null,g=null!=(l=this.attributes.get_11rb$(mx().ATTRIBUTE_JOINTS_0))?i.get_za3lpa$(l):null,b=null!=(u=this.attributes.get_11rb$(mx().ATTRIBUTE_WEIGHTS_0))?i.get_za3lpa$(u):null;if(this.attributes.containsKey_11rb$(mx().ATTRIBUTE_TEXCOORD_1)){var x=KN.Log,w=Cz.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Second set of UVs is not yet supported and therefore ignored")}if(null==_){var k=KN.Log,S=Cz.WARN,C=e.getKClassFromExpression(this).simpleName;return S.level>=k.level.level&&k.printer(S,C,"MeshPrimitive without position attribute"),oz([])}var N=!1,E=M(),T=ds().POSITIONS;E.add_11rb$(T);var P=ds().NORMALS;if(E.add_11rb$(P),null!=v){var O=ds().COLORS;E.add_11rb$(O)}if(null!=y){var j=ds().TEXTURE_COORDS;E.add_11rb$(j)}if(null!=$){var A=ds().TANGENTS;E.add_11rb$(A)}else if(null!=(null!=(p=this.materialRef)?p.normalTexture:null)){var I=ds().TANGENTS;E.add_11rb$(I),N=!0}if(null!=g){var R=ds().JOINTS;E.add_11rb$(R)}if(null!=b){var L=ds().WEIGHTS;E.add_11rb$(L)}var D=this.makeMorphTargetAccessors_0(i);xt(E,D.keys);var q=new Xw(E),F=new _g(_),B=null!=m?new _g(m):null,U=null!=$?new mg($):null,V=null!=y?new fg(y):null,G=null!=v?new mg(v):null,H=null!=g?new $g(g):null,W=null!=b?new mg(b):null;c=_.count;for(var K=0;K<c;K++){var X,Y,Z;q.checkBufferSizes_za3lpa$(),X=q.vertexSizeF;for(var J=1;J<=X;J++)q.dataF.plusAssign_mx4ult$(0);Y=q.vertexSizeI;for(var Q=1;Q<=Y;Q++)q.dataI.plusAssign_za3lpa$(0);q.vertexIt.index=(Z=q.numVertices,q.numVertices=Z+1|0,Z);var tt,et,it=q.vertexIt;for(F.next_5s4mqq$(it.position),null!=B&&B.next_5s4mqq$(it.normal),null!=U&&U.next_5s4mpv$(it.tangent),null!=V&&V.next_5s4mrl$(it.texCoord),null!=(tt=null!=G?G.next():null)&&it.color.set_czzhhz$(tt),null!=H&&H.next_5s4mps$(it.joints),null!=W&&W.next_5s4mpv$(it.weights),et=D.entries.iterator();et.hasNext();){var nt,ot=et.next(),rt=ot.key,st=ot.value;null!=(nt=it.getVec3fAttribute_nm2vx5$(rt))&&st.next_5s4mqq$(nt)}q.bounds.add_czzhiu$(q.vertexIt.position),q.hasChanged=!0,q.numVertices}if(null!=f){var at=new hg(f);h=f.count;for(var lt=0;lt<h;lt++)q.addIndex_za3lpa$(at.next())}else{d=_.count;for(var ut=0;ut<d;ut++)q.addIndex_za3lpa$(ut)}return N&&q.generateTangents_mx4ult$(),(t||null==m)&&q.generateNormals(),q},dx.prototype.makeMorphTargetAccessors_0=function(t){var e,i,n=z(),o=0;for(e=this.targets.iterator();e.hasNext();){var r,s,a,l=e.next(),u="_"+(J((o=(i=o)+1|0,i))+1|0);if(null!=(r=l.get_11rb$(mx().ATTRIBUTE_NORMAL))){var p=new ps(ds().NORMALS.name+u,es()),c=new _g(t.get_za3lpa$(r));n.put_xwzc9p$(p,c)}if(null!=(s=l.get_11rb$(mx().ATTRIBUTE_POSITION))){var h=new ps(ds().POSITIONS.name+u,es()),d=new _g(t.get_za3lpa$(s));n.put_xwzc9p$(h,d)}if(null!=(a=l.get_11rb$(mx().ATTRIBUTE_TANGENT))){var f=new ps(ds().TANGENTS.name+u,es()),_=new _g(t.get_za3lpa$(a));n.put_xwzc9p$(f,_)}}return n},fx.prototype.serializer=function(){return vx()},fx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _x=null;function mx(){return null===_x&&new fx,_x}function $x(){this.descriptor_6bhnca$_0=new ge("de.fabmax.kool.util.gltf.GltfMesh.Primitive",this,5),this.descriptor.addElement_ivxn3r$("attributes",!1),this.descriptor.addElement_ivxn3r$("indices",!0),this.descriptor.addElement_ivxn3r$("material",!0),this.descriptor.addElement_ivxn3r$("mode",!0),this.descriptor.addElement_ivxn3r$("targets",!0),yx=this}Object.defineProperty($x.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_6bhnca$_0}}),$x.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Ie(xe.StringSerializer,xe.IntSerializer),e.attributes),zt(e.indices,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.indices),zt(e.material,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.material),zt(e.mode,4)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeIntElement_ptg7oe$(this.descriptor,3,e.mode),zt(e.targets,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeSerializableElement_r4qlx7$(this.descriptor,4,new ke(new Ie(xe.StringSerializer,xe.IntSerializer)),e.targets),i.endStructure_24f42q$(this.descriptor)},$x.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a=0,l=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=l.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=l.decodeSerializableElement_12e8id$(this.descriptor,0,new Ie(xe.StringSerializer,xe.IntSerializer),i),a|=1;break;case 1:n=l.decodeIntElement_szpzho$(this.descriptor,1),a|=2;break;case 2:o=l.decodeIntElement_szpzho$(this.descriptor,2),a|=4;break;case 3:r=l.decodeIntElement_szpzho$(this.descriptor,3),a|=8;break;case 4:s=l.decodeSerializableElement_12e8id$(this.descriptor,4,new ke(new Ie(xe.StringSerializer,xe.IntSerializer)),s),a|=16;break;case-1:break t;default:throw new be(e)}return l.endStructure_24f42q$(this.descriptor),gx(a,i,n,o,r,s,null)},$x.prototype.childSerializers=function(){return[new Ie(xe.StringSerializer,xe.IntSerializer),xe.IntSerializer,xe.IntSerializer,xe.IntSerializer,new ke(new Ie(xe.StringSerializer,xe.IntSerializer))]},$x.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var yx=null;function vx(){return null===yx&&new $x,yx}function gx(t,e,i,n,o,r,s){var a=s||Object.create(dx.prototype);if(0==(1&t))throw new ze("attributes");return a.attributes=e,a.indices=0==(2&t)?-1:i,a.material=0==(4&t)?-1:n,a.mode=0==(8&t)?4:o,a.targets=0==(16&t)?Nt():r,a.materialRef=null,a}function bx(){xx=this}dx.$metadata$={kind:$,simpleName:"Primitive",interfaces:[]},dx.prototype.component1=function(){return this.attributes},dx.prototype.component2=function(){return this.indices},dx.prototype.component3=function(){return this.material},dx.prototype.component4=function(){return this.mode},dx.prototype.component5=function(){return this.targets},dx.prototype.copy_nzvr0p$=function(t,e,i,n,o){return new dx(void 0===t?this.attributes:t,void 0===e?this.indices:e,void 0===i?this.material:i,void 0===n?this.mode:n,void 0===o?this.targets:o)},dx.prototype.toString=function(){return"Primitive(attributes="+e.toString(this.attributes)+", indices="+e.toString(this.indices)+", material="+e.toString(this.material)+", mode="+e.toString(this.mode)+", targets="+e.toString(this.targets)+")"},dx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.attributes)|0)+e.hashCode(this.indices)|0)+e.hashCode(this.material)|0)+e.hashCode(this.mode)|0)+e.hashCode(this.targets)|0},dx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.attributes,t.attributes)&&e.equals(this.indices,t.indices)&&e.equals(this.material,t.material)&&e.equals(this.mode,t.mode)&&e.equals(this.targets,t.targets)},bx.prototype.serializer=function(){return Sx()},bx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var xx=null;function wx(){return null===xx&&new bx,xx}function zx(){this.descriptor_82b5j7$_0=new ge("de.fabmax.kool.util.gltf.GltfMesh",this,3),this.descriptor.addElement_ivxn3r$("primitives",!1),this.descriptor.addElement_ivxn3r$("weights",!0),this.descriptor.addElement_ivxn3r$("name",!0),kx=this}Object.defineProperty(zx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_82b5j7$_0}}),zx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(vx()),e.primitives),zt(e.weights,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,new ke(xe.FloatSerializer),e.weights),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},zx.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(vx()),i),r|=1;break;case 1:n=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,new ke(xe.FloatSerializer),n),r|=2;break;case 2:o=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,o),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),Cx(r,i,n,o,null)},zx.prototype.childSerializers=function(){return[new ke(vx()),new ye(new ke(xe.FloatSerializer)),new ye(xe.StringSerializer)]},zx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var kx=null;function Sx(){return null===kx&&new zx,kx}function Cx(t,e,i,n,o){var r=o||Object.create(hx.prototype);if(0==(1&t))throw new ze("primitives");return r.primitives=e,r.weights=0==(2&t)?null:i,r.name=0==(4&t)?null:n,r}function Nx(t,e,i,n,o,r,s,a,l,u){Px(),void 0===t&&(t=-1),void 0===e&&(e=Nt()),void 0===i&&(i=-1),void 0===n&&(n=null),void 0===o&&(o=-1),void 0===r&&(r=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===u&&(u=null),this.camera=t,this.children=e,this.skin=i,this.matrix=n,this.mesh=o,this.rotation=r,this.scale=s,this.translation=a,this.weights=l,this.name=u,this.childRefs_cmm67z$_0=this.childRefs_cmm67z$_0,this.meshRef=null,this.skinRef=null}function Ex(){Tx=this}hx.$metadata$={kind:$,simpleName:"GltfMesh",interfaces:[]},hx.prototype.component1=function(){return this.primitives},hx.prototype.component2=function(){return this.weights},hx.prototype.component3=function(){return this.name},hx.prototype.copy_fdi4sq$=function(t,e,i){return new hx(void 0===t?this.primitives:t,void 0===e?this.weights:e,void 0===i?this.name:i)},hx.prototype.toString=function(){return"GltfMesh(primitives="+e.toString(this.primitives)+", weights="+e.toString(this.weights)+", name="+e.toString(this.name)+")"},hx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.primitives)|0)+e.hashCode(this.weights)|0)+e.hashCode(this.name)|0},hx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.primitives,t.primitives)&&e.equals(this.weights,t.weights)&&e.equals(this.name,t.name)},Object.defineProperty(Nx.prototype,"childRefs",{configurable:!0,get:function(){return null==this.childRefs_cmm67z$_0?pt("childRefs"):this.childRefs_cmm67z$_0},set:function(t){this.childRefs_cmm67z$_0=t}}),Ex.prototype.serializer=function(){return jx()},Ex.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Tx=null;function Px(){return null===Tx&&new Ex,Tx}function Ox(){this.descriptor_t10j82$_0=new ge("de.fabmax.kool.util.gltf.GltfNode",this,10),this.descriptor.addElement_ivxn3r$("camera",!0),this.descriptor.addElement_ivxn3r$("children",!0),this.descriptor.addElement_ivxn3r$("skin",!0),this.descriptor.addElement_ivxn3r$("matrix",!0),this.descriptor.addElement_ivxn3r$("mesh",!0),this.descriptor.addElement_ivxn3r$("rotation",!0),this.descriptor.addElement_ivxn3r$("scale",!0),this.descriptor.addElement_ivxn3r$("translation",!0),this.descriptor.addElement_ivxn3r$("weights",!0),this.descriptor.addElement_ivxn3r$("name",!0),Mx=this}Object.defineProperty(Ox.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_t10j82$_0}}),Ox.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.camera,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.camera),zt(e.children,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new ke(xe.IntSerializer),e.children),zt(e.skin,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.skin),zt(e.matrix,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,new ke(xe.FloatSerializer),e.matrix),zt(e.mesh,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeIntElement_ptg7oe$(this.descriptor,4,e.mesh),zt(e.rotation,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,new ke(xe.FloatSerializer),e.rotation),zt(e.scale,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,6,new ke(xe.FloatSerializer),e.scale),zt(e.translation,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,7,new ke(xe.FloatSerializer),e.translation),zt(e.weights,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,8,new ke(xe.FloatSerializer),e.weights),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,9,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Ox.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s,a,l,u,p,c,h=0,d=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=d.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=d.decodeIntElement_szpzho$(this.descriptor,0),h|=1;break;case 1:n=d.decodeSerializableElement_12e8id$(this.descriptor,1,new ke(xe.IntSerializer),n),h|=2;break;case 2:o=d.decodeIntElement_szpzho$(this.descriptor,2),h|=4;break;case 3:r=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,new ke(xe.FloatSerializer),r),h|=8;break;case 4:s=d.decodeIntElement_szpzho$(this.descriptor,4),h|=16;break;case 5:a=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,new ke(xe.FloatSerializer),a),h|=32;break;case 6:l=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,6,new ke(xe.FloatSerializer),l),h|=64;break;case 7:u=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,7,new ke(xe.FloatSerializer),u),h|=128;break;case 8:p=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,8,new ke(xe.FloatSerializer),p),h|=256;break;case 9:c=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,9,xe.StringSerializer,c),h|=512;break;case-1:break t;default:throw new be(e)}return d.endStructure_24f42q$(this.descriptor),Ax(h,i,n,o,r,s,a,l,u,p,c,null)},Ox.prototype.childSerializers=function(){return[xe.IntSerializer,new ke(xe.IntSerializer),xe.IntSerializer,new ye(new ke(xe.FloatSerializer)),xe.IntSerializer,new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(new ke(xe.FloatSerializer)),new ye(xe.StringSerializer)]},Ox.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Mx=null;function jx(){return null===Mx&&new Ox,Mx}function Ax(t,e,i,n,o,r,s,a,l,u,p,c){var h=c||Object.create(Nx.prototype);return h.camera=0==(1&t)?-1:e,h.children=0==(2&t)?Nt():i,h.skin=0==(4&t)?-1:n,h.matrix=0==(8&t)?null:o,h.mesh=0==(16&t)?-1:r,h.rotation=0==(32&t)?null:s,h.scale=0==(64&t)?null:a,h.translation=0==(128&t)?null:l,h.weights=0==(256&t)?null:u,h.name=0==(512&t)?null:p,h.meshRef=null,h.skinRef=null,h}function Ix(t,e){Dx(),void 0===e&&(e=null),this.nodes=t,this.name=e,this.nodeRefs_fy674b$_0=this.nodeRefs_fy674b$_0}function Rx(){Lx=this}Nx.$metadata$={kind:$,simpleName:"GltfNode",interfaces:[]},Nx.prototype.component1=function(){return this.camera},Nx.prototype.component2=function(){return this.children},Nx.prototype.component3=function(){return this.skin},Nx.prototype.component4=function(){return this.matrix},Nx.prototype.component5=function(){return this.mesh},Nx.prototype.component6=function(){return this.rotation},Nx.prototype.component7=function(){return this.scale},Nx.prototype.component8=function(){return this.translation},Nx.prototype.component9=function(){return this.weights},Nx.prototype.component10=function(){return this.name},Nx.prototype.copy_gbbj5h$=function(t,e,i,n,o,r,s,a,l,u){return new Nx(void 0===t?this.camera:t,void 0===e?this.children:e,void 0===i?this.skin:i,void 0===n?this.matrix:n,void 0===o?this.mesh:o,void 0===r?this.rotation:r,void 0===s?this.scale:s,void 0===a?this.translation:a,void 0===l?this.weights:l,void 0===u?this.name:u)},Nx.prototype.toString=function(){return"GltfNode(camera="+e.toString(this.camera)+", children="+e.toString(this.children)+", skin="+e.toString(this.skin)+", matrix="+e.toString(this.matrix)+", mesh="+e.toString(this.mesh)+", rotation="+e.toString(this.rotation)+", scale="+e.toString(this.scale)+", translation="+e.toString(this.translation)+", weights="+e.toString(this.weights)+", name="+e.toString(this.name)+")"},Nx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.camera)|0)+e.hashCode(this.children)|0)+e.hashCode(this.skin)|0)+e.hashCode(this.matrix)|0)+e.hashCode(this.mesh)|0)+e.hashCode(this.rotation)|0)+e.hashCode(this.scale)|0)+e.hashCode(this.translation)|0)+e.hashCode(this.weights)|0)+e.hashCode(this.name)|0},Nx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.camera,t.camera)&&e.equals(this.children,t.children)&&e.equals(this.skin,t.skin)&&e.equals(this.matrix,t.matrix)&&e.equals(this.mesh,t.mesh)&&e.equals(this.rotation,t.rotation)&&e.equals(this.scale,t.scale)&&e.equals(this.translation,t.translation)&&e.equals(this.weights,t.weights)&&e.equals(this.name,t.name)},Object.defineProperty(Ix.prototype,"nodeRefs",{configurable:!0,get:function(){return null==this.nodeRefs_fy674b$_0?pt("nodeRefs"):this.nodeRefs_fy674b$_0},set:function(t){this.nodeRefs_fy674b$_0=t}}),Rx.prototype.serializer=function(){return Bx()},Rx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Lx=null;function Dx(){return null===Lx&&new Rx,Lx}function qx(){this.descriptor_mfdw2u$_0=new ge("de.fabmax.kool.util.gltf.GltfScene",this,2),this.descriptor.addElement_ivxn3r$("nodes",!1),this.descriptor.addElement_ivxn3r$("name",!0),Fx=this}Object.defineProperty(qx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_mfdw2u$_0}}),qx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new ke(xe.IntSerializer),e.nodes),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},qx.prototype.deserialize_bq71mq$=function(t){var e,i,n,o=0,r=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=r.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=r.decodeSerializableElement_12e8id$(this.descriptor,0,new ke(xe.IntSerializer),i),o|=1;break;case 1:n=r.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,xe.StringSerializer,n),o|=2;break;case-1:break t;default:throw new be(e)}return r.endStructure_24f42q$(this.descriptor),Ux(o,i,n,null)},qx.prototype.childSerializers=function(){return[new ke(xe.IntSerializer),new ye(xe.StringSerializer)]},qx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Fx=null;function Bx(){return null===Fx&&new qx,Fx}function Ux(t,e,i,n){var o=n||Object.create(Ix.prototype);if(0==(1&t))throw new ze("nodes");return o.nodes=e,o.name=0==(2&t)?null:i,o}function Vx(t,e,i,n){Wx(),void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=null),this.inverseBindMatrices=t,this.skeleton=e,this.joints=i,this.name=n,this.inverseBindMatrixAccessorRef=null,this.jointRefs_tdme4q$_0=this.jointRefs_tdme4q$_0}function Gx(){Hx=this}Ix.$metadata$={kind:$,simpleName:"GltfScene",interfaces:[]},Ix.prototype.component1=function(){return this.nodes},Ix.prototype.component2=function(){return this.name},Ix.prototype.copy_jfrl1g$=function(t,e){return new Ix(void 0===t?this.nodes:t,void 0===e?this.name:e)},Ix.prototype.toString=function(){return"GltfScene(nodes="+e.toString(this.nodes)+", name="+e.toString(this.name)+")"},Ix.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.nodes)|0)+e.hashCode(this.name)|0},Ix.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.nodes,t.nodes)&&e.equals(this.name,t.name)},Object.defineProperty(Vx.prototype,"jointRefs",{configurable:!0,get:function(){return null==this.jointRefs_tdme4q$_0?pt("jointRefs"):this.jointRefs_tdme4q$_0},set:function(t){this.jointRefs_tdme4q$_0=t}}),Gx.prototype.serializer=function(){return Yx()},Gx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Hx=null;function Wx(){return null===Hx&&new Gx,Hx}function Kx(){this.descriptor_73xgz7$_0=new ge("de.fabmax.kool.util.gltf.GltfSkin",this,4),this.descriptor.addElement_ivxn3r$("inverseBindMatrices",!0),this.descriptor.addElement_ivxn3r$("skeleton",!0),this.descriptor.addElement_ivxn3r$("joints",!1),this.descriptor.addElement_ivxn3r$("name",!0),Xx=this}Object.defineProperty(Kx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_73xgz7$_0}}),Kx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.inverseBindMatrices,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.inverseBindMatrices),zt(e.skeleton,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.skeleton),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,new ke(xe.IntSerializer),e.joints),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Kx.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeIntElement_szpzho$(this.descriptor,0),s|=1;break;case 1:n=a.decodeIntElement_szpzho$(this.descriptor,1),s|=2;break;case 2:o=a.decodeSerializableElement_12e8id$(this.descriptor,2,new ke(xe.IntSerializer),o),s|=4;break;case 3:r=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,xe.StringSerializer,r),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),Zx(s,i,n,o,r,null)},Kx.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,new ke(xe.IntSerializer),new ye(xe.StringSerializer)]},Kx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var Xx=null;function Yx(){return null===Xx&&new Kx,Xx}function Zx(t,e,i,n,o,r){var s=r||Object.create(Vx.prototype);if(s.inverseBindMatrices=0==(1&t)?-1:e,s.skeleton=0==(2&t)?-1:i,0==(4&t))throw new ze("joints");return s.joints=n,s.name=0==(8&t)?null:o,s.inverseBindMatrixAccessorRef=null,s}function Jx(t,e,i){iw(),void 0===t&&(t=-1),void 0===e&&(e=0),void 0===i&&(i=null),this.sampler=t,this.source=e,this.name=i,this.imageRef_gjfsvw$_0=this.imageRef_gjfsvw$_0,this.createdTex_0=null}function Qx(t,e,i,n,o,r){l.call(this,r),this.$controller=o,this.exceptionState_0=1,this.local$closure$uri=t,this.local$this$GltfTexture=e,this.local$assetMgr=n}function tw(){ew=this}Vx.$metadata$={kind:$,simpleName:"GltfSkin",interfaces:[]},Vx.prototype.component1=function(){return this.inverseBindMatrices},Vx.prototype.component2=function(){return this.skeleton},Vx.prototype.component3=function(){return this.joints},Vx.prototype.component4=function(){return this.name},Vx.prototype.copy_1a8yv8$=function(t,e,i,n){return new Vx(void 0===t?this.inverseBindMatrices:t,void 0===e?this.skeleton:e,void 0===i?this.joints:i,void 0===n?this.name:n)},Vx.prototype.toString=function(){return"GltfSkin(inverseBindMatrices="+e.toString(this.inverseBindMatrices)+", skeleton="+e.toString(this.skeleton)+", joints="+e.toString(this.joints)+", name="+e.toString(this.name)+")"},Vx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.inverseBindMatrices)|0)+e.hashCode(this.skeleton)|0)+e.hashCode(this.joints)|0)+e.hashCode(this.name)|0},Vx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.inverseBindMatrices,t.inverseBindMatrices)&&e.equals(this.skeleton,t.skeleton)&&e.equals(this.joints,t.joints)&&e.equals(this.name,t.name)},Object.defineProperty(Jx.prototype,"imageRef",{configurable:!0,get:function(){return null==this.imageRef_gjfsvw$_0?pt("imageRef"):this.imageRef_gjfsvw$_0},set:function(t){this.imageRef_gjfsvw$_0=t}}),Qx.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Qx.prototype=Object.create(l.prototype),Qx.prototype.constructor=Qx,Qx.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(null!=this.local$closure$uri){if(this.state_0=3,this.result_0=this.local$assetMgr.loadTextureData_9n4zzi$(this.local$closure$uri,void 0,this),this.result_0===a)return a;continue}if(this.state_0=2,this.result_0=this.local$assetMgr.createTextureData_asds6l$(x(this.local$this$GltfTexture.imageRef.bufferViewRef).getData(),x(this.local$this$GltfTexture.imageRef.mimeType),this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:case 3:return this.result_0;case 4:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Jx.prototype.makeTexture=function(){var t,e;if(null==this.createdTex_0){var i=this.imageRef.uri,n=null==i||u(i,"data:",!0)?"gltf_tex_"+this.source:i;this.createdTex_0=new eh(new Sh,n,(t=i,e=this,function(i,n,o,r){var s=new Qx(t,e,i,n,this,o);return r?s:s.doResume(null)}))}return x(this.createdTex_0)},tw.prototype.serializer=function(){return rw()},tw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ew=null;function iw(){return null===ew&&new tw,ew}function nw(){this.descriptor_grd8gb$_0=new ge("de.fabmax.kool.util.gltf.GltfTexture",this,3),this.descriptor.addElement_ivxn3r$("sampler",!0),this.descriptor.addElement_ivxn3r$("source",!0),this.descriptor.addElement_ivxn3r$("name",!0),ow=this}Object.defineProperty(nw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_grd8gb$_0}}),nw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);zt(e.sampler,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.sampler),zt(e.source,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.source),zt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,xe.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},nw.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),r|=2;break;case 2:o=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,xe.StringSerializer,o),r|=4;break;case-1:break t;default:throw new be(e)}return s.endStructure_24f42q$(this.descriptor),sw(r,i,n,o,null)},nw.prototype.childSerializers=function(){return[xe.IntSerializer,xe.IntSerializer,new ye(xe.StringSerializer)]},nw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var ow=null;function rw(){return null===ow&&new nw,ow}function sw(t,e,i,n,o){var r=o||Object.create(Jx.prototype);return r.sampler=0==(1&t)?-1:e,r.source=0==(2&t)?0:i,r.name=0==(4&t)?null:n,r.createdTex_0=null,r}function aw(t,e,i,n){pw(),void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=1),this.index=t,this.strength=e,this.texCoord=i,this.scale=n}function lw(){uw=this}Jx.$metadata$={kind:$,simpleName:"GltfTexture",interfaces:[]},Jx.prototype.component1=function(){return this.sampler},Jx.prototype.component2=function(){return this.source},Jx.prototype.component3=function(){return this.name},Jx.prototype.copy_273qip$=function(t,e,i){return new Jx(void 0===t?this.sampler:t,void 0===e?this.source:e,void 0===i?this.name:i)},Jx.prototype.toString=function(){return"GltfTexture(sampler="+e.toString(this.sampler)+", source="+e.toString(this.source)+", name="+e.toString(this.name)+")"},Jx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.sampler)|0)+e.hashCode(this.source)|0)+e.hashCode(this.name)|0},Jx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.sampler,t.sampler)&&e.equals(this.source,t.source)&&e.equals(this.name,t.name)},aw.prototype.getTexture_vd9sc9$=function(t){return t.textures.get_za3lpa$(this.index).makeTexture()},lw.prototype.serializer=function(){return dw()},lw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var uw=null;function pw(){return null===uw&&new lw,uw}function cw(){this.descriptor_yo1hoj$_0=new ge("de.fabmax.kool.util.gltf.GltfTextureInfo",this,4),this.descriptor.addElement_ivxn3r$("index",!1),this.descriptor.addElement_ivxn3r$("strength",!0),this.descriptor.addElement_ivxn3r$("texCoord",!0),this.descriptor.addElement_ivxn3r$("scale",!0),hw=this}Object.defineProperty(cw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yo1hoj$_0}}),cw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.index),zt(e.strength,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeFloatElement_lf6hpt$(this.descriptor,1,e.strength),zt(e.texCoord,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.texCoord),zt(e.scale,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeFloatElement_lf6hpt$(this.descriptor,3,e.scale),i.endStructure_24f42q$(this.descriptor)},cw.prototype.deserialize_bq71mq$=function(t){var e,i,n,o,r,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeIntElement_szpzho$(this.descriptor,0),s|=1;break;case 1:n=a.decodeFloatElement_szpzho$(this.descriptor,1),s|=2;break;case 2:o=a.decodeIntElement_szpzho$(this.descriptor,2),s|=4;break;case 3:r=a.decodeFloatElement_szpzho$(this.descriptor,3),s|=8;break;case-1:break t;default:throw new be(e)}return a.endStructure_24f42q$(this.descriptor),fw(s,i,n,o,r,null)},cw.prototype.childSerializers=function(){return[xe.IntSerializer,xe.FloatSerializer,xe.IntSerializer,xe.FloatSerializer]},cw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[we]};var hw=null;function dw(){return null===hw&&new cw,hw}function fw(t,e,i,n,o,r){var s=r||Object.create(aw.prototype);if(0==(1&t))throw new ze("index");return s.index=e,s.strength=0==(2&t)?1:i,s.texCoord=0==(4&t)?0:n,s.scale=0==(8&t)?1:o,s}function _w(t){var i,n=new Id,o=new ia;o.name="BrdfLutPass",o.setSize_vux9f0$(512,512),o.addColorTexture_farcsl$(Jc()),o.clearDepthTexture(),ua.call(this,n,new ea(o)),this.clearColor=null;var r=new Nd;r.projCorrectionMode=Cd(),r.isKeepAspectRatio=!1,r.left=0,r.right=1,r.top=1,r.bottom=0,this.camera=r;var a=e.isType(i=this.drawNode,Id)?i:c(),l=new Hd(new Xw(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$($w);var u=new Iu("BRDF LUT"),p={v:null},h=new Lu(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.simpleVertexPositionNode().outVec4;var d=new Du(u),f=d.addNode_u9w9by$(new mw(d.stage));f.inTexCoords=p.v.output;var _=f;d.colorOutput_a3v4si$(_.outColor);var m,$,y=u;l.shader=new lc(y),a.unaryPlus_uv0sim$(l),this.onAfterDraw.add_11rb$((m=this,$=t,function(t){var i=m,n=KN.Log,o=Cz.DEBUG,r=e.getKClassFromExpression(i).simpleName;return o.level>=n.level.level&&n.printer(o,r,"Generated BRDF look-up table"),$.removeOffscreenPass_m1c2kf$(m),t.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(t,m)),s}))}function mw(t){qu.call(this,"brdfLut",t),this.inTexCoords=new Fu(new zu(ao().ZERO)),this.outColor=new Fu(new mu("brdfLut_outColor"),this)}function $w(t){var e=new Hz;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function yw(){bw=this}function vw(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$bgColor=t}function gw(t,e,i,n,o,r){l.call(this,r),this.exceptionState_0=1,this.$this=t,this.local$scene=e,this.local$hdriPath=i,this.local$assetManager=n,this.local$autoDispose=o}aw.$metadata$={kind:$,simpleName:"GltfTextureInfo",interfaces:[]},aw.prototype.component1=function(){return this.index},aw.prototype.component2=function(){return this.strength},aw.prototype.component3=function(){return this.texCoord},aw.prototype.component4=function(){return this.scale},aw.prototype.copy_scorqy$=function(t,e,i,n){return new aw(void 0===t?this.index:t,void 0===e?this.strength:e,void 0===i?this.texCoord:i,void 0===n?this.scale:n)},aw.prototype.toString=function(){return"GltfTextureInfo(index="+e.toString(this.index)+", strength="+e.toString(this.strength)+", texCoord="+e.toString(this.texCoord)+", scale="+e.toString(this.scale)+")"},aw.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.index)|0)+e.hashCode(this.strength)|0)+e.hashCode(this.texCoord)|0)+e.hashCode(this.scale)|0},aw.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.index,t.index)&&e.equals(this.strength,t.strength)&&e.equals(this.texCoord,t.texCoord)&&e.equals(this.scale,t.scale)},_w.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},mw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inTexCoords)},mw.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("brdfLut","\n                float RadicalInverse_VdC(uint bits) {\n                    bits = (bits << 16u) | (bits >> 16u);\n                    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n                }\n                \n                vec2 Hammersley(uint i, uint N) {\n                    return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n                }\n                \n                vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) {\n                    float a = roughness*roughness;\n                    \n                    float phi = 2.0 * 3.141592653589793 * Xi.x;\n                    float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\n                    float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n                    \n                    // from spherical coordinates to cartesian coordinates\n                    vec3 H;\n                    H.x = cos(phi) * sinTheta;\n                    H.y = sin(phi) * sinTheta;\n                    H.z = cosTheta;\n                    \n                    // from tangent-space vector to world-space sample vector\n                    vec3 up = abs(N.z) < 0.9999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n                    vec3 tangent = normalize(cross(up, N));\n                    vec3 bitangent = cross(N, tangent);\n                    \n                    vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                    return normalize(sampleVec);\n                }\n                \n                float GeometrySchlickGGX(float NdotV, float roughness) {\n                    float a = roughness;\n                    float k = (a * a) / 2.0;\n                \n                    float nom   = NdotV;\n                    float denom = NdotV * (1.0 - k) + k;\n                \n                    return nom / denom;\n                }\n                \n                float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                    float NdotV = max(dot(N, V), 0.0);\n                    float NdotL = max(dot(N, L), 0.0);\n                    float ggx2 = GeometrySchlickGGX(NdotV, roughness);\n                    float ggx1 = GeometrySchlickGGX(NdotL, roughness);\n                \n                    return ggx1 * ggx2;\n                }\n                \n                vec2 IntegrateBRDF(float NdotV, float roughness) {\n                    vec3 V;\n                    V.x = sqrt(1.0 - NdotV*NdotV);\n                    V.y = 0.0;\n                    V.z = NdotV;\n                \n                    float A = 0.0;\n                    float B = 0.0;\n                \n                    vec3 N = vec3(0.0, 0.0, 1.0);\n                \n                    const uint SAMPLE_COUNT = 1024u;\n                    for(uint i = 0u; i < SAMPLE_COUNT; ++i) {\n                        vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                        vec3 H  = ImportanceSampleGGX(Xi, N, roughness);\n                        vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n                \n                        float NdotL = max(L.z, 0.0);\n                        float NdotH = max(H.z, 0.0);\n                        float VdotH = max(dot(V, H), 0.0);\n                \n                        if(NdotL > 0.0) {\n                            float G = GeometrySmith(N, V, L, roughness);\n                            float G_Vis = (G * VdotH) / (NdotH * NdotV);\n                            float Fc = pow(1.0 - VdotH, 5.0);\n                \n                            A += (1.0 - Fc) * G_Vis;\n                            B += Fc * G_Vis;\n                        }\n                    }\n                    A /= float(SAMPLE_COUNT);\n                    B /= float(SAMPLE_COUNT);\n                    return vec2(A, B);\n                }\n            "),t.appendMain_61zpoe$("\n                vec2 integratedBRDF = IntegrateBRDF("+this.inTexCoords.ref2f_61zpoe$()+".x, "+this.inTexCoords.ref2f_61zpoe$()+".y);\n                "+this.outColor.declare()+" = vec4(integratedBRDF, 0.0, 1.0);\n            ")},mw.$metadata$={kind:$,simpleName:"BrdfLutNode",interfaces:[qu]},_w.$metadata$={kind:$,simpleName:"BrdfLutPass",interfaces:[ua]},vw.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},vw.prototype=Object.create(l.prototype),vw.prototype.constructor=vw,vw.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return new Hh(this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},yw.prototype.singleColorEnvironment_6zt5da$=function(t,e,i){void 0===i&&(i=!0);var n,o=Gh().singleColor_d7aj7k$(e.toLinear()),r=new kh(new Sh(void 0,Mh(),Mh(),Mh(),Eh(),Eh(),!1,1),"singleColorEnv-"+e,(n=o,function(t,e,i,o){var r=new vw(n,t,e,this,i);return o?r:r.doResume(null)})),a=new _w(t),l=new eh(a.config.colorAttachments.get_za3lpa$(0).getTextureProps_6taknv$(!1),"singleColorEnv-brdf");a.copyTargetsColor.add_11rb$(l);var u,p=new xw(r,r,l);return i&&t.onDispose.add_11rb$((u=p,function(t,e){return u.dispose(),s})),t.addOffscreenPass_m1c2kf$(a),p},yw.prototype.gradientColorEnvironment_hfkvyz$=function(t,e,i,n){void 0===n&&(n=!0);var o=new ww(t,e,i),r=jw().irradianceMapFromCube_53y80y$(t,x(o.colorTexture)),a=Bw().reflectionMapFromCube_53y80y$(t,x(o.colorTexture)),l=new _w(t);r.dependsOn_yqp8fe$(o),a.dependsOn_yqp8fe$(o);var u,p=new xw(r.copyColor(),a.copyColor(),l.copyColor());return n&&t.onDispose.add_11rb$((u=p,function(t,e){return u.dispose(),s})),t.addOffscreenPass_m1c2kf$(o),t.addOffscreenPass_m1c2kf$(r),t.addOffscreenPass_m1c2kf$(a),t.addOffscreenPass_m1c2kf$(l),p},gw.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},gw.prototype=Object.create(l.prototype),gw.prototype.constructor=gw,gw.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:void 0===this.local$autoDispose&&(this.local$autoDispose=!0);var t=new Sh(void 0,void 0,void 0,void 0,Eh(),Eh(),!1,1);if(this.state_0=2,this.result_0=this.local$assetManager.loadAndPrepareTexture_va0f2y$(this.local$hdriPath,t,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var e=this.result_0;return this.$this.hdriEnvironment_wm5s1y$(this.local$scene,e,this.local$autoDispose);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},yw.prototype.hdriEnvironment_cj1d96$=function(t,e,i,n,o,r){var s=new gw(this,t,e,i,n,o);return r?s:s.doResume(null)},yw.prototype.hdriEnvironment_wm5s1y$=function(t,e,i){void 0===i&&(i=!0);var n=new Hw(t,e),o=jw().irradianceMapFromHdri_tstyqb$(t,x(n.colorTexture)),r=Bw().reflectionMapFromHdri_tstyqb$(t,x(n.colorTexture)),a=new _w(t);o.dependsOn_yqp8fe$(n),r.dependsOn_yqp8fe$(n);var l,u=new xw(o.copyColor(),r.copyColor(),a.copyColor());return i&&t.onDispose.add_11rb$((l=u,function(t,e){return l.dispose(),s})),t.addOffscreenPass_m1c2kf$(n),t.addOffscreenPass_m1c2kf$(o),t.addOffscreenPass_m1c2kf$(r),t.addOffscreenPass_m1c2kf$(a),u},yw.$metadata$={kind:y,simpleName:"EnvironmentHelper",interfaces:[]};var bw=null;function xw(t,e,i){this.irradianceMap=t,this.reflectionMap=e,this.brdfLut=i}function ww(t,i,n,o){void 0===o&&(o=128);var r,a,l=new Id,u=new ia,p=o;u.name="GradientEnvGenerator",u.setSize_vux9f0$(p,p),u.addColorTexture_farcsl$(th()),u.clearDepthTexture(),pa.call(this,l,new ea(u)),this.gradientTex_0=this.makeGradientTex_0(i,2*o|0,n),(e.isType(r=this.drawNode,Id)?r:c()).unaryPlus_uv0sim$(Gd(void 0,void 0,(a=this,function(t){return t.generate_v2sixm$(kw),t.shader=new cc(a.gradientTex_0,"gradTex",a.gradientEnvModel_0()),x(t.shader).onPipelineSetup.add_11rb$(Sw),s}))),this.onAfterDraw.add_11rb$(function(t,i,n){return function(o){var r=t,a=KN.Log,l=Cz.DEBUG,u=e.getKClassFromExpression(r).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Generated gradient cube map"),i.removeOffscreenPass_m1c2kf$(t),n.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(n,t)),s}}(this,t,n))}function zw(t){qu.call(this,"posToUv",t),this.inPos=new Fu(new ku(To().Y_AXIS)),this.outUv=new Fu(new fu("outUv"),this)}function kw(t){var e=new Wz;return e.centered(),t.cube_lhbb6w$(e),s}function Sw(t,e,i){return t.depthTest=pl(),t.cullMethod=zl(),s}function Cw(t,e){qu.call(this,"envCubeSampler",e),this.texture=t,this.maxLightIntensity=new Fu(new wu(5e3))}function Nw(t,e){qu.call(this,"envEquiRectSampler",e),this.texture=t}function Ew(t){qu.call(this,"rgbeDecoder",t),this.inRgbe=new Fu(new Su(tr().ZERO)),this.maxLightIntensity=new Fu(new wu(20)),this.outColor=new Fu(new _u("decodedRgbe"),this)}function Tw(t,i,n){jw();var o,r=new Id,a=new ia;a.name="IrradianceMapPass",a.setSize_vux9f0$(16,16),a.addColorTexture_farcsl$(th()),a.clearDepthTexture(),pa.call(this,r,new ea(a)),this.clearColor=null;var l=e.isType(o=this.drawNode,Id)?o:c(),u=new Hd(new Xw(qt(ds().POSITIONS)),null);u.generate_v2sixm$(Aw);var p=new Iu("IrradianceMapPass"),h={v:null},d=new Lu(p);h.v=d.stageInterfaceNode_iikjwn$("ifLocalPos",d.attrPositions().output),d.positionOutput=d.simpleVertexPositionNode().outVec4;var f=new Du(p);null!=i?f.addNode_u9w9by$(new Nw(f.textureNode_61zpoe$("colorTex"),f.stage)):f.addNode_u9w9by$(new Cw(f.cubeMapNode_61zpoe$("colorTex"),f.stage));var _=f.addNode_u9w9by$(new Pw(f.stage));_.inLocalPos=h.v.output;var m=_;f.colorOutput_a3v4si$(m.outColor);var $,y,v,g,b=p;if(null!=i){var x=new cc(i,"colorTex",b);x.onPipelineSetup.add_11rb$(Iw),u.shader=x}else{var w=new hc(n,"colorTex",b);w.onPipelineSetup.add_11rb$(Rw),u.shader=w}l.unaryPlus_uv0sim$(u),this.onAfterDraw.add_11rb$(($=i,y=this,v=n,g=t,function(t){if(null!=$){var i=y,n=KN.Log,o=Cz.DEBUG,r=e.getKClassFromExpression(i).simpleName;o.level>=n.level.level&&n.printer(o,r,"Generated irradiance map from HDRI: "+Ct($.name))}else{var a=y,l=KN.Log,u=Cz.DEBUG,p=e.getKClassFromExpression(a).simpleName;if(u.level>=l.level.level){var c=l.printer,h=v;c.call(l,u,p,"Generated irradiance map from cube map: "+Ct(null!=h?h.name:null))}}return g.removeOffscreenPass_m1c2kf$(y),t.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(t,y)),s}))}function Pw(t){qu.call(this,"convIrradiance",t),this.inLocalPos=new Fu(new ku(To().X_AXIS)),this.outColor=new Fu(new mu("convIrradiance_outColor"),this)}function Ow(){Mw=this}xw.prototype.dispose=function(){this.irradianceMap.dispose(),this.reflectionMap.dispose(),this.brdfLut.dispose()},xw.$metadata$={kind:$,simpleName:"EnvironmentMaps",interfaces:[]},ww.prototype.makeGradientTex_0=function(t,e,i){for(var n=PN(4*e|0),o=0;o<e;o++){var r=t.getColor_y2kzbl$(1-o/e);n.set_6t1wet$(0+(4*o|0)|0,Dt(B(255*r.r))),n.set_6t1wet$(1+(4*o|0)|0,Dt(B(255*r.g))),n.set_6t1wet$(2+(4*o|0)|0,Dt(B(255*r.b))),n.set_6t1wet$(3+(4*o|0)|0,Dt(255))}var s=new Rh(n,e,1,Yc()),a=new Sh(void 0,Mh(),Mh(),void 0,void 0,void 0,!1,1);return i.assetMgr.loadAndPrepareTexture_siesr9$(s,a,"gradientEnvTex")},ww.prototype.gradientEnvModel_0=function(){var t=new Iu("gradientEnvModel()"),e={v:null},i=new Lu(t),n=i.mvpNode(),o=i.attrPositions().output,r=i.vec3TransformNode_vid4wo$(o,n.outModelMat,1).outVec3;e.v=i.stageInterfaceNode_iikjwn$("ifFragPos",r),i.positionOutput=i.vec4TransformNode_9krp9t$(o,n.outMvpMat).outVec4;var s=new Du(t),a=s.addNode_u9w9by$(new zw(s.stage));a.inPos=e.v.output;var l=s.textureSamplerNode_ce41yx$(s.textureNode_61zpoe$("gradTex"),a.outUv),u=s.gammaNode_ze33is$(l.outColor).outColor;return s.colorOutput_a3v4si$(u),t},zw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inPos)},zw.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outUv.declare()+" = vec2(acos(normalize("+this.inPos.ref3f_61zpoe$()+").y) / "+U.PI+", 0.0);")},zw.$metadata$={kind:$,simpleName:"PosToUvNode",interfaces:[qu]},ww.$metadata$={kind:$,simpleName:"GradientCubeGenerator",interfaces:[pa]},Cw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture)},Cw.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("sampleEnv","\n                vec3 sampleEnv(vec3 texCoord, float mipLevel) {\n                    vec3 envColor = "+t.sampleTextureCube_buzeal$(this.texture.name,"texCoord","mipLevel")+".rgb;\n                    return min(envColor, vec3("+this.maxLightIntensity.ref1f_61zpoe$()+"));\n                }\n            ")},Cw.$metadata$={kind:$,simpleName:"EnvCubeSamplerNode",interfaces:[qu]},Nw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture)},Nw.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("sampleEnv","\n                vec3 sampleEnv(vec3 texCoord, float mipLevel) {\n                    vec3 equiRect_in = normalize(texCoord);\n                    vec2 uv = vec2(atan(equiRect_in.z, equiRect_in.x), -asin(equiRect_in.y));\n                    uv *= vec2(0.1591, 0.3183);\n                    uv += 0.5;\n                    return "+t.sampleTexture2d_buzeal$(this.texture.name,"uv","mipLevel")+".rgb;\n                }\n            ")},Nw.$metadata$={kind:$,simpleName:"EnvEquiRectSamplerNode",interfaces:[qu]},Ew.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inRgbe,this.maxLightIntensity])},Ew.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec3 fRgb = "+this.inRgbe.ref3f_61zpoe$()+";\n                float fExp = "+this.inRgbe.ref4f_61zpoe$()+".a * 255.0 - 128.0;\n                "+this.outColor.declare()+" = min(fRgb * pow(2.0, fExp), vec3("+this.maxLightIntensity.ref1f_61zpoe$()+"));\n            ")},Ew.$metadata$={kind:$,simpleName:"RgbeDecoderNode",interfaces:[qu]},Tw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),pa.prototype.dispose_aemszp$.call(this,t)},Pw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inLocalPos)},Pw.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t);var e=2*U.PI,i=.5*U.PI;t.appendMain_61zpoe$("\n                vec3 normal = normalize("+this.inLocalPos.ref3f_61zpoe$()+");\n                vec3 up = vec3(0.0, 1.0, 0.0);\n                vec3 right = normalize(cross(up, normal));\n                up = cross(normal, right);\n\n                float sampleDelta = 0.03737;\n                vec3 irradiance = vec3(0.0);\n                int nrSamples = 0; \n\n                for (float theta = 0.0; theta < "+i+"; theta += sampleDelta) {\n                    float deltaPhi = sampleDelta / sin(theta);\n                    for (float phi = 0.0; phi < "+e+"; phi += deltaPhi) {\n                        vec3 tempVec = cos(phi) * right + sin(phi) * up;\n                        vec3 sampleVector = cos(theta) * normal + sin(theta) * tempVec;\n                        vec3 envColor = sampleEnv(sampleVector, 3.0);\n                        irradiance += envColor * cos(theta) * 0.6;\n                        nrSamples++;\n                    }\n                }\n                irradiance = irradiance * "+U.PI+" / float(nrSamples);\n                "+this.outColor.declare()+" = vec4(irradiance, 1.0);\n            ")},Pw.$metadata$={kind:$,simpleName:"ConvoluteIrradianceNode",interfaces:[qu]},Ow.prototype.irradianceMapFromHdri_tstyqb$=function(t,e){return new Tw(t,e,null)},Ow.prototype.irradianceMapFromCube_53y80y$=function(t,e){return new Tw(t,null,e)},Ow.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Mw=null;function jw(){return null===Mw&&new Ow,Mw}function Aw(t){var e=new Wz;return e.centered(),t.cube_lhbb6w$(e),s}function Iw(t,e,i){return t.cullMethod=wl(),s}function Rw(t,e,i){return t.cullMethod=wl(),s}function Lw(t,i,n){Bw();var o,r,a=new Id,l=new ia;l.name="ReflectionMapPass",l.setSize_vux9f0$(256,256),l.mipLevels=7,l.addColorTexture_farcsl$(th()),l.clearDepthTexture(),pa.call(this,a,new ea(l)),this.parentScene=t,this.uRoughness_0=Xh(.5,"uRoughness"),this.isEnabled=!0,this.onSetupMipLevel=(r=this,function(t,e){return r.uRoughness_0.value=t/(r.config.mipLevels-1|0),s});var u=e.isType(o=this.drawNode,Id)?o:c(),p=new Hd(new Xw(qt(ds().POSITIONS)),"reflectionMap");p.generate_v2sixm$(Uw);var h=new Iu("Reflectance Convolution Sampler"),d={v:null},f=new Lu(h);d.v=f.stageInterfaceNode_iikjwn$("ifLocalPos",f.attrPositions().output),f.positionOutput=f.simpleVertexPositionNode().outVec4;var _=new Du(h);null!=i?_.addNode_u9w9by$(new Nw(_.textureNode_61zpoe$("colorTex"),_.stage)):_.addNode_u9w9by$(new Cw(_.cubeMapNode_61zpoe$("colorTex"),_.stage));var m=_.addNode_u9w9by$(new Dw(_.stage));m.inLocalPos=d.v.output,m.inRoughness=_.pushConstantNode1f_978i2u$(this.uRoughness_0).output;var $=m;_.colorOutput_a3v4si$($.outColor);var y=h;if(null!=i){var v=new cc(i,"colorTex",y);v.onPipelineSetup.add_11rb$(Vw),p.shader=v}else{var g=new hc(n,"colorTex",y);g.onPipelineSetup.add_11rb$(Gw),p.shader=g}u.unaryPlus_uv0sim$(p),this.onAfterDraw.add_11rb$(function(t,i,n){return function(o){if(null!=t){var r=i,a=KN.Log,l=Cz.DEBUG,u=e.getKClassFromExpression(r).simpleName;l.level>=a.level.level&&a.printer(l,u,"Generated reflection map from HDRI: "+Ct(t.name))}else{var p=i,c=KN.Log,h=Cz.DEBUG,d=e.getKClassFromExpression(p).simpleName;if(h.level>=c.level.level){var f=c.printer,_=n;f.call(c,h,d,"Generated reflection map from cube map: "+Ct(null!=_?_.name:null))}}return i.parentScene.removeOffscreenPass_m1c2kf$(i),o.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(o,i)),s}}(i,this,n))}function Dw(t){qu.call(this,"convIrradiance",t),this.inLocalPos=new Fu(new ku(To().X_AXIS)),this.inRoughness=new Fu(new wu(0)),this.maxLightIntensity=new Fu(new wu(5e3)),this.outColor=new Fu(new mu("convReflection_outColor"),this)}function qw(){Fw=this}Tw.$metadata$={kind:$,simpleName:"IrradianceMapPass",interfaces:[pa]},Lw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),pa.prototype.dispose_aemszp$.call(this,t)},Dw.prototype.setup_llmhyc$=function(t){qu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inLocalPos),this.dependsOn_7qvs0d$(this.maxLightIntensity)},Dw.prototype.generateCode_626509$=function(t){qu.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("reflMapFuncs","\n                float RadicalInverse_VdC(uint bits) {\n                    bits = (bits << 16u) | (bits >> 16u);\n                    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n                }\n                \n                vec2 Hammersley(uint i, uint N) {\n                    return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n                }\n                \n                vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) {\n                    float a = roughness*roughness;\n                    \n                    float phi = 2.0 * 3.141592653589793 * Xi.x;\n                    float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\n                    float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n                    \n                    // from spherical coordinates to cartesian coordinates\n                    vec3 H;\n                    H.x = cos(phi) * sinTheta;\n                    H.y = sin(phi) * sinTheta;\n                    H.z = cosTheta;\n                    \n                    // from tangent-space vector to world-space sample vector\n                    vec3 up = abs(N.z) < 0.9999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n                    vec3 tangent = normalize(cross(up, N));\n                    vec3 bitangent = cross(N, tangent);\n                    \n                    vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                    return normalize(sampleVec);\n                }\n            "),t.appendMain_61zpoe$("\n                vec3 N = normalize("+this.inLocalPos.ref3f_61zpoe$()+");\n                vec3 R = N;\n                vec3 V = R;\n                \n                float mipLevel = "+this.inRoughness.ref1f_61zpoe$()+" * 16.0;\n                uint SAMPLE_COUNT = uint(1024.0 * (1.0 + mipLevel));\n                float totalWeight = 0.0;\n                vec3 prefilteredColor = vec3(0.0);\n                for(uint i = 0u; i < SAMPLE_COUNT; ++i) {\n                    vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                    vec3 H  = ImportanceSampleGGX(Xi, N, "+this.inRoughness.ref1f_61zpoe$()+");\n                    vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n            \n                    float NdotL = max(dot(N, L), 0.0);\n                    if(NdotL > 0.0) {\n                        prefilteredColor += sampleEnv(L, mipLevel) * NdotL;\n                        totalWeight += NdotL;\n                    }\n                }\n                prefilteredColor = prefilteredColor / totalWeight;\n                "+this.outColor.declare()+" = vec4(prefilteredColor, 1.0);\n            ")},Dw.$metadata$={kind:$,simpleName:"ConvoluteReflectionNode",interfaces:[qu]},qw.prototype.reflectionMapFromHdri_tstyqb$=function(t,e){return new Lw(t,e,null)},qw.prototype.reflectionMapFromCube_53y80y$=function(t,e){return new Lw(t,null,e)},qw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Fw=null;function Bw(){return null===Fw&&new qw,Fw}function Uw(t){var e=new Wz;return e.centered(),t.cube_lhbb6w$(e),s}function Vw(t,e,i){return t.cullMethod=wl(),s}function Gw(t,e,i){return t.cullMethod=wl(),s}function Hw(t,i){var n,o,r,a,l,u,p=new Id,h=new ia,d=null!=(o=null!=(n=i.loadedTexture)?n.width:null)?o:1024,f=null!=(a=null!=(r=i.loadedTexture)?r.height:null)?a:512,_=A.max(d,f);h.name="RgbeDecoder",h.setSize_vux9f0$(_,_),h.addColorTexture_farcsl$(th()),h.clearDepthTexture(),h.addMipLevels_ydzd23$(void 0,void 0,!1),ua.call(this,p,new ea(h)),(e.isType(l=this.drawNode,Id)?l:c()).unaryPlus_uv0sim$(Gd(void 0,void 0,(u=i,function(t){t.isFrustumChecked=!1,t.generate_v2sixm$(Ww);var e=new Iu("RgbeDecoder"),i={v:null},n=new Lu(e);i.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),n.positionOutput=n.fullScreenQuadPositionNode_r20yfm$(n.attrTexCoords().output).outQuadPos;var o=new Du(e),r=o.addNode_u9w9by$(new Ew(o.stage));r.inRgbe=o.textureSamplerNode_ce41yx$(o.textureNode_61zpoe$("colorTex"),i.v.output).outColor;var a=r;o.colorOutput_a3v4si$(a.outColor);var l=new cc(u,"colorTex",e);return l.onPipelineSetup.add_11rb$(Kw),t.shader=l,s}))),this.onAfterDraw.add_11rb$(function(t,i,n){return function(o){var r=i,a=KN.Log,l=Cz.DEBUG,u=e.getKClassFromExpression(r).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Converted RGBe to linear: "+Ct(t.name)),n.removeOffscreenPass_m1c2kf$(i),o.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(o,i)),s}}(i,this,t))}function Ww(t){var e=new Hz;return t.rect_e5k3t5$(e),s}function Kw(t,e,i){return t.cullMethod=zl(),s}function Xw(t){nz(),this.vertexAttributes=t;var i,n,o=this.vertexAttributes,r=C;for(i=o.iterator();i.hasNext();){var s=i.next();r=r.multiply(e.Long.fromInt(31)).add(e.Long.fromInt(s.hashCode()))}this.attributeHash=r,this.vertexSizeF=0,this.byteStrideF=0,this.vertexSizeI=0,this.byteStrideI=0,this.attributeByteOffsets=null,this.primitiveType=uz(),this.usage=dz(),this.numVertices=0,this.dataF=null,this.dataI=null,this.indices=ON(1e3),this.bounds=new q$,this.vertexIt=null,this.isRebuildBoundsOnSync=!1,this.hasChanged=!0,this.isBatchUpdate=!1;var a=0,l=0,u=z();for(n=this.vertexAttributes.iterator();n.hasNext();){var p=n.next();if(p.type===as()||p.type===ls()||p.type===us())throw V("Matrix types are not supported as vertex attributes");if(p.type.isInt){var c=l;u.put_xwzc9p$(p,c),l=l+p.type.byteSize|0}else{var h=a;u.put_xwzc9p$(p,h),a=a+p.type.byteSize|0}}this.attributeByteOffsets=u,this.vertexSizeF=a/4|0,this.byteStrideF=a,this.vertexSizeI=l/4|0,this.byteStrideI=l,this.dataF=MN(1e3*a|0),this.dataI=ON(1e3*l|0),this.vertexIt=new NS(this,0)}function Yw(){iz=this,this.INITIAL_SIZE_0=1e3,this.GROW_FACTOR_0=2}Lw.$metadata$={kind:$,simpleName:"ReflectionMapPass",interfaces:[pa]},Hw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ua.prototype.dispose_aemszp$.call(this,t)},Hw.$metadata$={kind:$,simpleName:"RgbeDecoder",interfaces:[ua]},Object.defineProperty(Xw.prototype,"numIndices",{configurable:!0,get:function(){return this.indices.position}}),Object.defineProperty(Xw.prototype,"numPrimitives",{configurable:!0,get:function(){return this.numIndices/this.primitiveType.nVertices|0}}),Object.defineProperty(Xw.prototype,"lastIndex",{configurable:!0,get:function(){return this.numVertices-1|0}}),Xw.prototype.getMorphAttributes=function(){var t,e=M();for(t=this.vertexAttributes.iterator();t.hasNext();){var i=t.next();(u(i.name,ds().NORMALS.name+"_")||u(i.name,ds().POSITIONS.name+"_")||u(i.name,ds().TANGENTS.name+"_"))&&e.add_11rb$(i)}return e},Xw.prototype.isEmpty=function(){return 0===this.numVertices||0===this.numIndices},Xw.prototype.increaseDataSizeF_0=function(t){var e=MN(t);this.dataF.flip(),e.put_he122g$(this.dataF),this.dataF=e},Xw.prototype.increaseDataSizeI_0=function(t){var e=ON(t);this.dataI.flip(),e.put_7hqxcs$(this.dataI),this.dataI=e},Xw.prototype.increaseIndicesSize_0=function(t){var e=ON(t);this.indices.flip(),e.put_7hqxcs$(this.indices),this.indices=e},Xw.prototype.checkBufferSizes_za3lpa$=function(t){if(void 0===t&&(t=1),this.dataF.remaining<e.imul(this.vertexSizeF,t)){var i=B(rt(this.dataF.capacity*nz().GROW_FACTOR_0)),n=e.imul(this.numVertices+t|0,this.vertexSizeF);this.increaseDataSizeF_0(A.max(i,n))}if(this.dataI.remaining<e.imul(this.vertexSizeI,t)){var o=B(rt(this.dataI.capacity*nz().GROW_FACTOR_0)),r=e.imul(this.numVertices+t|0,this.vertexSizeI);this.increaseDataSizeI_0(A.max(o,r))}},Xw.prototype.checkIndexSize_za3lpa$=function(t){if(void 0===t&&(t=1),this.indices.remaining<t){var e=B(rt(this.indices.capacity*nz().GROW_FACTOR_0)),i=this.numVertices+t|0;this.increaseIndicesSize_0(A.max(e,i))}},Xw.prototype.hasAttribute_nm2vx5$=function(t){return this.vertexAttributes.contains_11rb$(t)},Xw.prototype.batchUpdate_gj3khe$=K("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.batchUpdate_gj3khe$",(function(t,e){void 0===t&&(t=!1);var i=this.isBatchUpdate;this.isBatchUpdate=!0,e(this),this.hasChanged=!0,this.isBatchUpdate=i,t&&this.rebuildBounds()})),Xw.prototype.addVertex_tohjaj$=K("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.addVertex_tohjaj$",(function(t){var e,i,n;this.checkBufferSizes_za3lpa$(),e=this.vertexSizeF;for(var o=1;o<=e;o++)this.dataF.plusAssign_mx4ult$(0);i=this.vertexSizeI;for(var r=1;r<=i;r++)this.dataI.plusAssign_za3lpa$(0);return this.vertexIt.index=(n=this.numVertices,this.numVertices=n+1|0,n),t(this.vertexIt),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices-1|0})),Xw.prototype.addVertex_lv7vxo$=function(t,e,i,n){var o,r,s;void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.checkBufferSizes_za3lpa$(),o=this.vertexSizeF;for(var a=1;a<=o;a++)this.dataF.plusAssign_mx4ult$(0);r=this.vertexSizeI;for(var l=1;l<=r;l++)this.dataI.plusAssign_za3lpa$(0);this.vertexIt.index=(s=this.numVertices,this.numVertices=s+1|0,s);var u=this.vertexIt;return u.position.set_czzhiu$(t),null!=e&&u.normal.set_czzhiu$(e),null!=i&&u.color.set_czzhhz$(i),null!=n&&u.texCoord.set_czzhjp$(n),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices-1|0},Xw.prototype.addGeometry_r7nl2o$=function(t){var e,i,n=this.numVertices;this.checkBufferSizes_za3lpa$(t.numVertices),e=t.numVertices;for(var o=0;o<e;o++){var r,s,a;this.checkBufferSizes_za3lpa$(),r=this.vertexSizeF;for(var l=1;l<=r;l++)this.dataF.plusAssign_mx4ult$(0);s=this.vertexSizeI;for(var u=1;u<=s;u++)this.dataI.plusAssign_za3lpa$(0);this.vertexIt.index=(a=this.numVertices,this.numVertices=a+1|0,a);var p=this.vertexIt;t.vertexIt.index=o,p.set_fs4kvg$(t.vertexIt),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices}this.checkIndexSize_za3lpa$(t.indices.position),i=t.indices.position;for(var c=0;c<i;c++)this.addIndex_za3lpa$(n+t.indices.get_za3lpa$(c)|0)},Xw.prototype.addIndex_za3lpa$=function(t){0===this.indices.remaining&&this.checkIndexSize_za3lpa$(),this.indices.plusAssign_za3lpa$(t)},Xw.prototype.addIndices_pmhfmb$=function(t){for(var e=0;e!==t.length;++e)this.addIndex_za3lpa$(t[e]);this.hasChanged=!0},Xw.prototype.addIndices_pqoyrt$=function(t){for(var e=0;e!==t.size;++e)this.addIndex_za3lpa$(t.get_za3lpa$(e))},Xw.prototype.addTriIndices_qt1dr2$=function(t,e,i){this.addIndex_za3lpa$(t),this.addIndex_za3lpa$(e),this.addIndex_za3lpa$(i)},Xw.prototype.rebuildBounds=function(){var t;this.bounds.clear(),t=this.numVertices;for(var e=0;e<t;e++)this.vertexIt.index=e,this.bounds.add_czzhiu$(this.vertexIt.position)},Xw.prototype.clear=function(){this.numVertices=0,this.dataF.position=0,this.dataF.limit=this.dataF.capacity,this.dataI.position=0,this.dataI.limit=this.dataI.capacity,this.indices.position=0,this.indices.limit=this.indices.capacity,this.hasChanged=!0},Xw.prototype.clearIndices=function(){this.indices.position=0,this.indices.limit=this.indices.capacity},Xw.prototype.shrinkIndices_za3lpa$=function(t){if(t>this.indices.position)throw cn("new size must be less (or equal) than old size");this.indices.position=t,this.indices.limit=this.indices.capacity},Xw.prototype.shrinkVertices_za3lpa$=function(t){if(t>this.numVertices)throw cn("new size must be less (or equal) than old size");this.numVertices=t,this.dataF.position=e.imul(t,this.vertexSizeF),this.dataF.limit=this.dataF.capacity,this.dataI.position=e.imul(t,this.vertexSizeI),this.dataI.limit=this.dataI.capacity},Xw.prototype.get_za3lpa$=function(t){if(t<0||t>=(this.dataF.capacity/this.vertexSizeF|0))throw cn("Vertex index out of bounds: "+t);return new NS(this,t)},Xw.prototype.forEach_tohjaj$=K("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.forEach_tohjaj$",(function(t){var e;e=this.numVertices;for(var i=0;i<e;i++)this.vertexIt.index=i,t(this.vertexIt)})),Xw.prototype.removeDegeneratedTriangles=function(){var t,e,i,n,o=this.get_za3lpa$(0),r=this.get_za3lpa$(1),s=this.get_za3lpa$(2),a=jo(),l=jo(),u=new Int32Array(this.numIndices),p=0;t=this.numIndices;for(var c=0;c<t;c+=3){o.index=this.indices.get_za3lpa$(c),r.index=this.indices.get_za3lpa$(c+1|0),s.index=this.indices.get_za3lpa$(c+2|0),r.position.subtract_2gj7b4$(o.position,a).norm(),s.position.subtract_2gj7b4$(o.position,l).norm();var h=Vn(o.position,r.position,s.position),d=!(null!=a&&a.equals(To().ZERO)||null!=l&&l.equals(To().ZERO));if(d){var f=a.times_czzhiu$(l);d=1!==A.abs(f)}d&&!Re(h)&&h>0&&(u[(e=p,p=e+1|0,e)]=this.indices.get_za3lpa$(c),u[(i=p,p=i+1|0,i)]=this.indices.get_za3lpa$(c+1|0),u[(n=p,p=n+1|0,n)]=this.indices.get_za3lpa$(c+2|0))}p!==this.numIndices&&(this.indices.clear(),this.indices.put_nd5v6f$(u,0,p))},Xw.prototype.generateNormals=function(){var t,i,n;if(this.vertexAttributes.contains_11rb$(ds().NORMALS)){if(this.primitiveType!==uz())throw cn("Normal generation is only supported for triangle meshes");var o=this.get_za3lpa$(0),r=this.get_za3lpa$(1),s=this.get_za3lpa$(2),a=jo(),l=jo(),u=jo();t=this.numVertices;for(var p=0;p<t;p++)o.index=p,o.normal.set_czzhiu$(To().ZERO);i=this.numIndices;for(var c=0;c<i;c+=3){if(o.index=this.indices.get_za3lpa$(c),r.index=this.indices.get_za3lpa$(c+1|0),s.index=this.indices.get_za3lpa$(c+2|0),o.index>this.numVertices||r.index>this.numVertices||s.index>this.numVertices){var h=KN.Log,d=Cz.ERROR,f=e.getKClassFromExpression(this).simpleName;d.level>=h.level.level&&h.printer(d,f,"index to large "+o.index+", "+r.index+", "+s.index+", sz: "+this.numVertices)}r.position.subtract_2gj7b4$(o.position,a).norm(),s.position.subtract_2gj7b4$(o.position,l).norm();var _=Vn(o.position,r.position,s.position);if(a.cross_2gj7b4$(l,u).norm().scale_mx4ult$(_),null!=u&&u.equals(To().ZERO)||Re(u.x)||Re(u.y)||Re(u.z)){var m=KN.Log,$=Cz.WARN,y=e.getKClassFromExpression(this).simpleName;$.level>=m.level.level&&m.printer($,y,"generate normals: degenerated triangle, a = "+_+", e1 = "+a+", e2 = "+l)}else o.normal.plusAssign_czzhiu$(u),r.normal.plusAssign_czzhiu$(u),s.normal.plusAssign_czzhiu$(u)}n=this.numVertices;for(var v=0;v<n;v++)o.index=v,o.normal.norm()}},Xw.prototype.generateTangents_mx4ult$=function(t){var i,n,o;if(void 0===t&&(t=1),this.vertexAttributes.contains_11rb$(ds().TANGENTS)){if(this.primitiveType!==uz())throw cn("Normal generation is only supported for triangle meshes");var r=this.get_za3lpa$(0),s=this.get_za3lpa$(1),a=this.get_za3lpa$(2),l=jo(),u=jo(),p=jo();i=this.numVertices;for(var c=0;c<i;c++)r.index=c,r.tangent.set_2qa7tb$(To().ZERO);n=this.numIndices;for(var h=0;h<n;h+=3){r.index=this.indices.get_za3lpa$(h),s.index=this.indices.get_za3lpa$(h+1|0),a.index=this.indices.get_za3lpa$(h+2|0),s.position.subtract_2gj7b4$(r.position,l),a.position.subtract_2gj7b4$(r.position,u);var d=s.texCoord.x-r.texCoord.x,f=s.texCoord.y-r.texCoord.y,_=a.texCoord.x-r.texCoord.x,m=a.texCoord.y-r.texCoord.y,$=1/(d*m-_*f);if(Re($)){var y=KN.Log,v=Cz.WARN,g=e.getKClassFromExpression(this).simpleName;v.level>=y.level.level&&y.printer(v,g,"generate tangents: degenerated triangle, e1 = "+l+", e2 = "+u)}else p.x=$*(m*l.x-f*u.x),p.y=$*(m*l.y-f*u.y),p.z=$*(m*l.z-f*u.z),r.tangent.plusAssign_czzhhz$(ir(p,0)),s.tangent.plusAssign_czzhhz$(ir(p,0)),a.tangent.plusAssign_czzhhz$(ir(p,0))}o=this.numVertices;for(var b=0;b<o;b++)r.index=b,0===r.normal.sqrLength()&&r.normal.set_czzhiu$(To().Y_AXIS),0!==r.tangent.sqrLength()?(r.tangent.norm(),r.tangent.w=t):r.tangent.set_2qa7tb$(To().X_AXIS)}},Yw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Zw,Jw,Qw,tz,ez,iz=null;function nz(){return null===iz&&new Yw,iz}function oz(t,e){return e=e||Object.create(Xw.prototype),Xw.call(e,Le(t)),e}function rz(t,e,i){T.call(this),this.nVertices=i,this.name$=t,this.ordinal$=e}function sz(){sz=function(){},Zw=new rz("LINES",0,2),Jw=new rz("POINTS",1,1),Qw=new rz("TRIANGLES",2,3)}function az(){return sz(),Zw}function lz(){return sz(),Jw}function uz(){return sz(),Qw}function pz(t,e){T.call(this),this.name$=t,this.ordinal$=e}function cz(){cz=function(){},tz=new pz("DYNAMIC",0),ez=new pz("STATIC",1)}function hz(){return cz(),tz}function dz(){return cz(),ez}Xw.$metadata$={kind:$,simpleName:"IndexedVertexList",interfaces:[]},rz.$metadata$={kind:$,simpleName:"PrimitiveType",interfaces:[T]},rz.values=function(){return[az(),lz(),uz()]},rz.valueOf_61zpoe$=function(t){switch(t){case"LINES":return az();case"POINTS":return lz();case"TRIANGLES":return uz();default:P("No enum constant de.fabmax.kool.util.PrimitiveType."+t)}},pz.$metadata$={kind:$,simpleName:"Usage",interfaces:[T]},pz.values=function(){return[hz(),dz()]},pz.valueOf_61zpoe$=function(t){switch(t){case"DYNAMIC":return hz();case"STATIC":return dz();default:P("No enum constant de.fabmax.kool.util.Usage."+t)}};var fz,_z,mz,$z,yz,vz,gz=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var o=e;return t(o(i),o(n))}}}));function bz(t){void 0===t&&(t=null),sf.call(this,t),this.instances=M(),this.lods_0=M()}function xz(t){return t.maxDistance}function wz(t){return t.camDistance}function zz(t,e,i){this.$outer=t,this.mesh=e,this.maxDistance=i,this.instances=M()}function kz(){this.instanceModelMat=new En,this.center=jo(),this.radius=1,this.globalRadius_jgtua1$_0=0,this.camDistance_n2u3ce$_0=0,this.isInFrustum_77t0d9$_0=!1,this.globalCenterMut_46d76q$_0=jo(),this.globalExtentMut_q2k453$_0=jo()}function Sz(){Iz=this,this.DEFAULT_PRINTER=Az,this.level=Tz(),this.printer=this.DEFAULT_PRINTER}function Cz(t,e,i,n){T.call(this),this.level=i,this.indicator=E(n),this.name$=t,this.ordinal$=e}function Nz(){Nz=function(){},fz=new Cz("TRACE",0,0,84),_z=new Cz("DEBUG",1,1,68),mz=new Cz("INFO",2,2,73),$z=new Cz("WARN",3,3,87),yz=new Cz("ERROR",4,4,69),vz=new Cz("OFF",5,5,120)}function Ez(){return Nz(),fz}function Tz(){return Nz(),_z}function Pz(){return Nz(),mz}function Oz(){return Nz(),$z}function Mz(){return Nz(),yz}function jz(){return Nz(),vz}function Az(t,e,i){return jt(String.fromCharCode(O(t.indicator))+"/"+Ct(e)+": "+i),s}Object.defineProperty(bz.prototype,"isFrustumChecked",{configurable:!0,get:function(){return!1},set:function(t){}}),bz.prototype.getInstanceCount_za3lpa$=function(t){return t<this.lods_0.size?this.lods_0.get_za3lpa$(t).instances.size:0},bz.prototype.addLod_od45r7$=function(t,e){var i=this.lods_0,n=new zz(this,t,e);i.add_11rb$(n);var o=this.lods_0;o.size>1&&mt(o,new $t(gz(xz))),t.parent=this},bz.prototype.update_kma0q5$=function(t){var e,i,n;sf.prototype.update_kma0q5$.call(this,t),e=this.lods_0;for(var o=0;o!==e.size;++o)this.lods_0.get_za3lpa$(o).instances.clear();var r=t.camera;i=this.instances;for(var s=0;s!==i.size;++s){var a=this.instances.get_za3lpa$(s);if(a.update_l2cg23$(this,r,t.ctx),a.isInFrustum)for(var l=bt(this.lods_0);l>=0;l--)if(0===l||a.camDistance>this.lods_0.get_za3lpa$(l-1|0).maxDistance){this.lods_0.get_za3lpa$(l).instances.add_11rb$(a);break}}n=this.lods_0;for(var u=0;u!==n.size;++u){var p=this.lods_0.get_za3lpa$(u);if(p.instances.size>p.maxInstances){var c=p.instances;for(c.size>1&&mt(c,new $t(gz(wz)));p.instances.size>p.maxInstances;){var h=p.instances.removeAt_za3lpa$(bt(p.instances));u<bt(this.lods_0)&&this.lods_0.get_za3lpa$(u+1|0).instances.add_11rb$(h)}}p.updateInstances_2shagh$(u,t.ctx),p.mesh.update_kma0q5$(t)}},bz.prototype.collectDrawCommands_kma0q5$=function(t){var e;sf.prototype.collectDrawCommands_kma0q5$.call(this,t),e=this.lods_0;for(var i=0;i!==e.size;++i)this.lods_0.get_za3lpa$(i).mesh.collectDrawCommands_kma0q5$(t)},bz.prototype.dispose_aemszp$=function(t){var e;sf.prototype.dispose_aemszp$.call(this,t),e=this.lods_0;for(var i=0;i!==e.size;++i)this.lods_0.get_za3lpa$(i).mesh.dispose_aemszp$(t)},Object.defineProperty(zz.prototype,"maxInstances",{configurable:!0,get:function(){var t,e;return null!=(e=null!=(t=this.mesh.instances)?t.maxInstances:null)?e:0}}),zz.prototype.updateInstances_2shagh$=function(t,e){var i,n;if(null!=(i=this.mesh.instances))for(i.clear(),n=this.instances.iterator();n.hasNext();)n.next().addInstanceData_bgc5cs$(t,i,e)},zz.$metadata$={kind:$,simpleName:"Lod",interfaces:[]},Object.defineProperty(kz.prototype,"globalCenter",{configurable:!0,get:function(){return this.globalCenterMut_46d76q$_0}}),Object.defineProperty(kz.prototype,"globalRadius",{configurable:!0,get:function(){return this.globalRadius_jgtua1$_0},set:function(t){this.globalRadius_jgtua1$_0=t}}),Object.defineProperty(kz.prototype,"camDistance",{configurable:!0,get:function(){return this.camDistance_n2u3ce$_0},set:function(t){this.camDistance_n2u3ce$_0=t}}),Object.defineProperty(kz.prototype,"isInFrustum",{configurable:!0,get:function(){return this.isInFrustum_77t0d9$_0},set:function(t){this.isInFrustum_77t0d9$_0=t}}),kz.prototype.update_l2cg23$=function(t,e,i){this.globalCenterMut_46d76q$_0.set_czzhiu$(this.center),this.globalExtentMut_q2k453$_0.set_czzhiu$(this.center).x=this.globalExtentMut_q2k453$_0.set_czzhiu$(this.center).x+this.radius,this.instanceModelMat.transform_w1lst9$(this.globalCenterMut_46d76q$_0),this.instanceModelMat.transform_w1lst9$(this.globalExtentMut_q2k453$_0),t.modelMat.transform_w1lst9$(this.globalCenterMut_46d76q$_0),t.modelMat.transform_w1lst9$(this.globalExtentMut_q2k453$_0),this.globalRadius=this.globalCenterMut_46d76q$_0.distance_czzhiu$(this.globalExtentMut_q2k453$_0),this.isInFrustum=e.isInFrustum_2qa7tb$(this.globalCenterMut_46d76q$_0,this.globalRadius),this.camDistance=e.globalPos.distance_czzhiu$(this.globalCenterMut_46d76q$_0)},kz.prototype.addInstanceData_bgc5cs$=function(t,e,i){e.checkBufferSize_za3lpa$();var n=e.dataF.position;e.dataF.put_q3cr5i$(this.instanceModelMat.matrix);var o=e.dataF.position-n|0;if(o!==e.instanceSizeF)throw gt("Expected data to grow by "+e.instanceSizeF+" elements, instead it grew by "+o);e.numInstances=e.numInstances+1|0,e.hasChanged=!0},kz.$metadata$={kind:$,simpleName:"Instance",interfaces:[]},bz.$metadata$={kind:$,simpleName:"InstancedLodController",interfaces:[sf]},Sz.prototype.tExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.tExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var o=i.TRACE,r=e.getKClassFromExpression(t).simpleName;o.level>=this.level.level&&this.printer(o,r,n())}}))),Sz.prototype.t_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.t_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.TRACE;n.level>=this.level.level&&this.printer(n,t,i())}}))),Sz.prototype.dExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.dExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var o=i.DEBUG,r=e.getKClassFromExpression(t).simpleName;o.level>=this.level.level&&this.printer(o,r,n())}}))),Sz.prototype.d_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.d_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.DEBUG;n.level>=this.level.level&&this.printer(n,t,i())}}))),Sz.prototype.iExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.iExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var o=i.INFO,r=e.getKClassFromExpression(t).simpleName;o.level>=this.level.level&&this.printer(o,r,n())}}))),Sz.prototype.i_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.i_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.INFO;n.level>=this.level.level&&this.printer(n,t,i())}}))),Sz.prototype.wExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.wExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var o=i.WARN,r=e.getKClassFromExpression(t).simpleName;o.level>=this.level.level&&this.printer(o,r,n())}}))),Sz.prototype.w_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.w_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.WARN;n.level>=this.level.level&&this.printer(n,t,i())}}))),Sz.prototype.eExt_jzryxz$=K("kool-kool-core.de.fabmax.kool.util.Log.eExt_jzryxz$",X((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var o=i.ERROR,r=e.getKClassFromExpression(t).simpleName;o.level>=this.level.level&&this.printer(o,r,n())}}))),Sz.prototype.e_fkbaij$=K("kool-kool-core.de.fabmax.kool.util.Log.e_fkbaij$",X((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.ERROR;n.level>=this.level.level&&this.printer(n,t,i())}}))),Sz.prototype.logExt_askb8u$=K("kool-kool-core.de.fabmax.kool.util.Log.logExt_askb8u$",(function(t,i,n){var o=e.getKClassFromExpression(i).simpleName;t.level>=this.level.level&&this.printer(t,o,n())})),Sz.prototype.log_f0yxhs$=K("kool-kool-core.de.fabmax.kool.util.Log.log_f0yxhs$",(function(t,e,i){t.level>=this.level.level&&this.printer(t,e,i())})),Cz.$metadata$={kind:$,simpleName:"Level",interfaces:[T]},Cz.values=function(){return[Ez(),Tz(),Pz(),Oz(),Mz(),jz()]},Cz.valueOf_61zpoe$=function(t){switch(t){case"TRACE":return Ez();case"DEBUG":return Tz();case"INFO":return Pz();case"WARN":return Oz();case"ERROR":return Mz();case"OFF":return jz();default:P("No enum constant de.fabmax.kool.util.Log.Level."+t)}},Sz.$metadata$={kind:y,simpleName:"Log",interfaces:[]};var Iz=null;function Rz(t){this.geometry=t,this.transform=new Mn,this.color=J$().GRAY,this.vertexModFun=null,this.hasNormals=this.geometry.hasAttribute_nm2vx5$(ds().NORMALS)}function Lz(){this.x=.5257311,this.z=.8506508,this.n=0,this.verts=b([new Co(-this.x,this.n,this.z),new Co(this.x,this.n,this.z),new Co(-this.x,this.n,-this.z),new Co(this.x,this.n,-this.z),new Co(this.n,this.z,this.x),new Co(this.n,this.z,-this.x),new Co(this.n,-this.z,this.x),new Co(this.n,-this.z,-this.x),new Co(this.z,this.x,this.n),new Co(-this.z,this.x,this.n),new Co(this.z,-this.x,this.n),new Co(-this.z,-this.x,this.n)]),this.uvVerts=M(),this.faces=b([4,0,1,9,0,4,5,9,4,5,4,8,8,4,1,10,8,1,3,8,10,3,5,8,2,5,3,7,2,3,10,7,3,6,7,10,11,7,6,0,11,6,1,0,6,1,6,10,0,9,11,11,9,2,2,9,5,2,7,11]),this.midVerts_0=z()}function Dz(){this.radius=1,this.steps=20,this.center=jo(),this.startDeg=0,this.sweepDeg=360,this.uvCenter=po(),this.uvRadius=0,this.fullTexCoords()}function qz(){Vz(),this.center=jo(),this.xDir=Io(To().X_AXIS),this.yDir=Io(To().NEG_Z_AXIS),this.sizeX=10,this.sizeY=10,this.stepsX=10,this.stepsY=10,this.heightFun=Vz().ZERO_HEIGHT}function Fz(){Uz=this,this.ZERO_HEIGHT=Bz}function Bz(t,e){return 0}Rz.prototype.vertex_tohjaj$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.vertex_tohjaj$",(function(t){var e,i,n,o=this.geometry;o.checkBufferSizes_za3lpa$(),e=o.vertexSizeF;for(var r=1;r<=e;r++)o.dataF.plusAssign_mx4ult$(0);i=o.vertexSizeI;for(var s=1;s<=i;s++)o.dataI.plusAssign_za3lpa$(0);o.vertexIt.index=(n=o.numVertices,o.numVertices=n+1|0,n);var a,l=o.vertexIt;return l.color.set_czzhhz$(this.color),t(l),this.transform.transform_w1lst9$(l.position),this.hasNormals&&0!==l.normal.sqrLength()&&(this.transform.transform_w1lst9$(l.normal,0),l.normal.norm()),null!=(a=this.vertexModFun)&&a(l),o.bounds.add_czzhiu$(o.vertexIt.position),o.hasChanged=!0,o.numVertices-1|0})),Rz.prototype.vertex_n440gp$$default=function(t,e,i){var n,o,r,s=this.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);o=s.vertexSizeI;for(var l=1;l<=o;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(r=s.numVertices,s.numVertices=r+1|0,r);var u,p=s.vertexIt;return p.color.set_czzhhz$(this.color),p.position.set_czzhiu$(t),p.normal.set_czzhiu$(e),p.texCoord.set_czzhjp$(i),this.transform.transform_w1lst9$(p.position),this.hasNormals&&0!==p.normal.sqrLength()&&(this.transform.transform_w1lst9$(p.normal,0),p.normal.norm()),null!=(u=this.vertexModFun)&&u(p),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0,s.numVertices-1|0},Rz.prototype.vertex_n440gp$=function(t,e,i,n){return void 0===i&&(i=ao().ZERO),n?n(t,e,i):this.vertex_n440gp$$default(t,e,i)},Rz.prototype.withTransform_v2sixm$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.withTransform_v2sixm$",(function(t){this.transform.push(),t(this),this.transform.pop()})),Rz.prototype.withColor_2f8443$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.withColor_2f8443$",(function(t,e){var i=this.color;null!=t&&(this.color=t),e(this),this.color=i})),Rz.prototype.clear=function(){this.geometry.clear(),this.identity()},Rz.prototype.identity=function(){return this.transform.setIdentity()},Rz.prototype.translate_czzhiu$=function(t){return this.transform.translate_y2kzbl$(t.x,t.y,t.z)},Rz.prototype.translate_y2kzbl$=function(t,e,i){return this.transform.translate_y2kzbl$(t,e,i)},Rz.prototype.rotate_ad55pp$=function(t,e){return this.transform.rotate_ad55pp$(t,e)},Rz.prototype.rotate_7b5o5w$=function(t,e,i,n){return this.transform.rotate_7b5o5w$(t,e,i,n)},Rz.prototype.scale_y2kzbl$=function(t,e,i){return this.transform.scale_y2kzbl$(t,e,i)},Rz.prototype.setCoordSystem_xq1mqt$=function(t,e,i,n){void 0===n&&(n=null);var o=n;null==o&&(o=Tr(e,i)),this.transform.setIdentity(),this.transform.set_n0b4r3$(0,0,e.x),this.transform.set_n0b4r3$(1,0,e.y),this.transform.set_n0b4r3$(2,0,e.z),this.transform.set_n0b4r3$(0,1,i.x),this.transform.set_n0b4r3$(1,1,i.y),this.transform.set_n0b4r3$(2,1,i.z),this.transform.set_n0b4r3$(0,2,o.x),this.transform.set_n0b4r3$(1,2,o.y),this.transform.set_n0b4r3$(2,2,o.z),this.transform.set_n0b4r3$(0,3,t.x),this.transform.set_n0b4r3$(1,3,t.y),this.transform.set_n0b4r3$(2,3,t.z)},Rz.prototype.profile_qgzkbv$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.profile_qgzkbv$",X((function(){var e=t.de.fabmax.kool.util.Profile;return function(t){var i=new e;return t(i),i}}))),Rz.prototype.multiShape_itjjuo$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.multiShape_itjjuo$",X((function(){var e=t.de.fabmax.kool.util.MultiShape;return function(t,i){var n=new e;return t.shapes.add_11rb$(n),i(n),n}}))),Rz.prototype.simpleShape_ggyesq$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.simpleShape_ggyesq$",X((function(){var e=t.de.fabmax.kool.util.SimpleShape;return function(t,i,n){var o=new e(i);return t.shapes.add_11rb$(o),n(o),o}}))),Rz.prototype.circleShape_k80pjh$=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=40);var n=new bk(!0);t.shapes.add_11rb$(n);for(var o=0;o<i;o++){var r=2*U.PI*o/i;n.xy_dleff0$(A.cos(r)*e,A.sin(r)*e)}return n},Rz.prototype.sample_afatab$=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i)},Rz.prototype.sampleAndFillBottom_afatab$=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i),t.fillBottom_84rojv$(this)},Rz.prototype.fillBottom_pvgy1j$=function(t){t.fillBottom_84rojv$(this)},Rz.prototype.sampleAndFillTop_afatab$=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i),t.fillTop_84rojv$(this)},Rz.prototype.fillTop_pvgy1j$=function(t){t.fillTop_84rojv$(this)},Rz.prototype.circle_5yji8k$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.circle_5yji8k$",X((function(){var e=t.de.fabmax.kool.util.CircleProps;return function(t){var i=new e;t(i),this.circle_59f34t$(i)}}))),Rz.prototype.circle_59f34t$=function(t){var e,i=0,n=this.vertex_n440gp$(t.center,To().Z_AXIS,t.uvCenter);e=t.steps;for(var o=0;o<=e;o++){var r,s,a,l=(t.startDeg+t.sweepDeg*o/t.steps)*LN.DEG_2_RAD,u=A.cos(l),p=A.sin(l),c=t.center.x+t.radius*u,h=t.center.y+t.radius*p,d=this.geometry;d.checkBufferSizes_za3lpa$(),r=d.vertexSizeF;for(var f=1;f<=r;f++)d.dataF.plusAssign_mx4ult$(0);s=d.vertexSizeI;for(var _=1;_<=s;_++)d.dataI.plusAssign_za3lpa$(0);d.vertexIt.index=(a=d.numVertices,d.numVertices=a+1|0,a);var m,$=d.vertexIt;$.color.set_czzhhz$(this.color),$.position.set_y2kzbl$(c,h,t.center.z),$.normal.set_czzhiu$(To().Z_AXIS),$.texCoord.set_dleff0$(u,-p).scale_mx4ult$(t.uvRadius).add_czzhjp$(t.uvCenter),this.transform.transform_w1lst9$($.position),this.hasNormals&&0!==$.normal.sqrLength()&&(this.transform.transform_w1lst9$($.normal,0),$.normal.norm()),null!=(m=this.vertexModFun)&&m($),d.bounds.add_czzhiu$(d.vertexIt.position),d.hasChanged=!0;var y=d.numVertices-1|0;o>0&&this.geometry.addTriIndices_qt1dr2$(n,i,y),i=y}},Rz.prototype.uvSphere_ybunu9$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.uvSphere_ybunu9$",X((function(){var e=t.de.fabmax.kool.util.SphereProps;return function(t){var i=(new e).uvDefaults();t(i),this.uvSphere_mojs8w$(i)}}))),Rz.prototype.uvSphere_mojs8w$=function(t){var e,i,n,o,r=t.steps/2|0,s=A.max(r,4),a=new Int32Array(1+(2*s|0)|0),l=new Int32Array(1+(2*s|0)|0),u={v:U.PI*(s-1|0)/s},p=u.v,c=A.sin(p)*t.radius,h=u.v,d={v:A.cos(h)*t.radius};e=2*s|0;for(var f=0;f<=e;f++){var _,m,$,y=U.PI*f/s,v=-y,g=A.cos(v)*c,b=-y,x=A.sin(b)*c,w=l,z=this.geometry;z.checkBufferSizes_za3lpa$(),_=z.vertexSizeF;for(var k=1;k<=_;k++)z.dataF.plusAssign_mx4ult$(0);m=z.vertexSizeI;for(var S=1;S<=m;S++)z.dataI.plusAssign_za3lpa$(0);z.vertexIt.index=($=z.numVertices,z.numVertices=$+1|0,$);var C,N=z.vertexIt;if(N.color.set_czzhhz$(this.color),N.position.set_y2kzbl$(g,d.v,x).add_czzhiu$(t.center),N.normal.set_y2kzbl$(g,d.v,x).scale_mx4ult$(1/t.radius),N.texCoord.set_czzhjp$(t.texCoordGenerator(u.v,y)),this.transform.transform_w1lst9$(N.position),this.hasNormals&&0!==N.normal.sqrLength()&&(this.transform.transform_w1lst9$(N.normal,0),N.normal.norm()),null!=(C=this.vertexModFun)&&C(N),z.bounds.add_czzhiu$(z.vertexIt.position),z.hasChanged=!0,w[f]=z.numVertices-1|0,f>0){var E,T,P,O=this.geometry;O.checkBufferSizes_za3lpa$(),E=O.vertexSizeF;for(var M=1;M<=E;M++)O.dataF.plusAssign_mx4ult$(0);T=O.vertexSizeI;for(var j=1;j<=T;j++)O.dataI.plusAssign_za3lpa$(0);O.vertexIt.index=(P=O.numVertices,O.numVertices=P+1|0,P);var I,R=O.vertexIt;R.color.set_czzhhz$(this.color),R.position.set_y2kzbl$(t.center.x,t.center.y-t.radius,t.center.z),R.normal.set_czzhiu$(To().NEG_Y_AXIS),R.texCoord.set_czzhjp$(t.texCoordGenerator(U.PI,y)),this.transform.transform_w1lst9$(R.position),this.hasNormals&&0!==R.normal.sqrLength()&&(this.transform.transform_w1lst9$(R.normal,0),R.normal.norm()),null!=(I=this.vertexModFun)&&I(R),O.bounds.add_czzhiu$(O.vertexIt.position),O.hasChanged=!0;var L=O.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(L,l[f],l[f-1|0])}}i=s-1|0;for(var D=2;D<=i;D++){var q=a;a=l,l=q,u.v=U.PI*(s-D|0)/s;var F=u.v;c=A.sin(F)*t.radius;var B=u.v;d.v=A.cos(B)*t.radius,n=2*s|0;for(var V=0;V<=n;V++){var G,H,W,K=U.PI*V/s,X=-K,Y=A.cos(X)*c,Z=-K,J=A.sin(Z)*c,Q=l,tt=this.geometry;tt.checkBufferSizes_za3lpa$(),G=tt.vertexSizeF;for(var et=1;et<=G;et++)tt.dataF.plusAssign_mx4ult$(0);H=tt.vertexSizeI;for(var it=1;it<=H;it++)tt.dataI.plusAssign_za3lpa$(0);tt.vertexIt.index=(W=tt.numVertices,tt.numVertices=W+1|0,W);var nt,ot=tt.vertexIt;ot.color.set_czzhhz$(this.color),ot.position.set_y2kzbl$(Y,d.v,J).add_czzhiu$(t.center),ot.normal.set_y2kzbl$(Y,d.v,J).scale_mx4ult$(1/t.radius),ot.texCoord.set_czzhjp$(t.texCoordGenerator(u.v,K)),this.transform.transform_w1lst9$(ot.position),this.hasNormals&&0!==ot.normal.sqrLength()&&(this.transform.transform_w1lst9$(ot.normal,0),ot.normal.norm()),null!=(nt=this.vertexModFun)&&nt(ot),tt.bounds.add_czzhiu$(tt.vertexIt.position),tt.hasChanged=!0,Q[V]=tt.numVertices-1|0,V>0&&(this.geometry.addTriIndices_qt1dr2$(a[V-1|0],l[V],l[V-1|0]),this.geometry.addTriIndices_qt1dr2$(a[V-1|0],a[V],l[V]))}}o=2*s|0;for(var rt=1;rt<=o;rt++){var st,at,lt,ut=this.geometry;ut.checkBufferSizes_za3lpa$(),st=ut.vertexSizeF;for(var pt=1;pt<=st;pt++)ut.dataF.plusAssign_mx4ult$(0);at=ut.vertexSizeI;for(var ct=1;ct<=at;ct++)ut.dataI.plusAssign_za3lpa$(0);ut.vertexIt.index=(lt=ut.numVertices,ut.numVertices=lt+1|0,lt);var ht,dt=ut.vertexIt;dt.color.set_czzhhz$(this.color),dt.position.set_y2kzbl$(t.center.x,t.center.y+t.radius,t.center.z),dt.normal.set_czzhiu$(To().Y_AXIS),dt.texCoord.set_czzhjp$(t.texCoordGenerator(0,U.PI*rt/s)),this.transform.transform_w1lst9$(dt.position),this.hasNormals&&0!==dt.normal.sqrLength()&&(this.transform.transform_w1lst9$(dt.normal,0),dt.normal.norm()),null!=(ht=this.vertexModFun)&&ht(dt),ut.bounds.add_czzhiu$(ut.vertexIt.position),ut.hasChanged=!0;var ft=ut.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(ft,l[rt-1|0],l[rt])}},Rz.prototype.icoSphere_ybunu9$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.icoSphere_ybunu9$",X((function(){var e=t.de.fabmax.kool.util.SphereProps;return function(t){var i=(new e).icoDefaults();t(i),this.icoSphere_mojs8w$(i)}}))),Lz.prototype.getMidVertex_vux9f0$=function(t,e){var i,n=1048576*A.min(t,e)+A.max(t,e),o=this.midVerts_0,r=o.get_11rb$(n);if(null==r){var s=this.verts.size,a=this.verts,l=Io(this.verts.get_za3lpa$(t)).add_czzhiu$(this.verts.get_za3lpa$(e)).norm();a.add_11rb$(l);var u=s;o.put_xwzc9p$(n,u),i=u}else i=r;return i},Lz.prototype.subdivide=function(){var t,e,i,n,o,r,s,a,l,u,p,c,h,d,f=new Int32Array(4*this.faces.size|0),_=0;for(t=De(R(this.faces),3).iterator();t.hasNext();){var m=t.next(),$=this.faces.get_za3lpa$(m),y=this.faces.get_za3lpa$(m+1|0),v=this.faces.get_za3lpa$(m+2|0),g=this.getMidVertex_vux9f0$($,y),b=this.getMidVertex_vux9f0$(y,v),x=this.getMidVertex_vux9f0$(v,$);f[(e=_,_=e+1|0,e)]=$,f[(i=_,_=i+1|0,i)]=g,f[(n=_,_=n+1|0,n)]=x,f[(o=_,_=o+1|0,o)]=y,f[(r=_,_=r+1|0,r)]=b,f[(s=_,_=s+1|0,s)]=g,f[(a=_,_=a+1|0,a)]=v,f[(l=_,_=l+1|0,l)]=x,f[(u=_,_=u+1|0,u)]=b,f[(p=_,_=p+1|0,p)]=g,f[(c=_,_=c+1|0,c)]=b,f[(h=_,_=h+1|0,h)]=x}for(this.faces.clear(),d=0;d!==f.length;++d){var w=f[d];this.faces.add_11rb$(w)}},Lz.prototype.subdivide_za3lpa$=function(t){var i;if(t<=8)i=t;else{var n=KN.Log,o=Cz.WARN,r=e.getKClassFromExpression(this).simpleName;o.level>=n.level.level&&n.printer(o,r,"clamping too large number of iterations for ico-sphere ("+t+") to 8"),i=8}for(var s=i,a=0;a<s;a++)this.subdivide()},Lz.prototype.generateUvs=function(){var t,e,i=U.PI,n=this.verts,o=w(j(n,10));for(e=n.iterator();e.hasNext();){var r=e.next(),s=o.add_11rb$,a=r.x,l=r.z,u=(A.atan2(a,l)+i)/(2*i),p=r.y;s.call(o,ft(r,new oo(u,A.acos(p)/i)))}var c=qe(o);for(this.uvVerts=c,t=De(R(this.faces),3).iterator();t.hasNext();)for(var h=t.next(),d=0;d<=2;d++){var f=h+d|0,_=h+(d+1|0)%3|0,m=h+(d+2|0)%3|0,$=c.get_za3lpa$(this.faces.get_za3lpa$(f)).second.x,y=c.get_za3lpa$(this.faces.get_za3lpa$(_)).second.x,v=c.get_za3lpa$(this.faces.get_za3lpa$(m)).second.x;if($-y>.5&&$-v>.5){var g=Oo(c.get_za3lpa$(this.faces.get_za3lpa$(f)).first),b=co(c.get_za3lpa$(this.faces.get_za3lpa$(f)).second);b.x=b.x-1;var x=b;this.faces.set_wxm5ur$(f,c.size);var z=ft(g,x);c.add_11rb$(z)}else if(y-$>.5&&v-$>.5){var k=Oo(c.get_za3lpa$(this.faces.get_za3lpa$(f)).first),S=co(c.get_za3lpa$(this.faces.get_za3lpa$(f)).second);S.x=S.x+1;var C=S;this.faces.set_wxm5ur$(f,c.size);var N=ft(k,C);c.add_11rb$(N)}}},Lz.$metadata$={kind:$,simpleName:"IcoGenerator",interfaces:[]},Rz.prototype.icoSphere_mojs8w$=function(t){var e,i,n=new Lz;n.subdivide_za3lpa$(t.steps),n.generateUvs();var o=U.PI,r=this.geometry.numVertices;for(e=n.uvVerts.iterator();e.hasNext();){var s,a,l,u=e.next(),p=this.geometry;p.checkBufferSizes_za3lpa$(),s=p.vertexSizeF;for(var c=1;c<=s;c++)p.dataF.plusAssign_mx4ult$(0);a=p.vertexSizeI;for(var h=1;h<=a;h++)p.dataI.plusAssign_za3lpa$(0);p.vertexIt.index=(l=p.numVertices,p.numVertices=l+1|0,l);var d,f=p.vertexIt;f.color.set_czzhhz$(this.color),f.normal.set_czzhiu$(u.first).norm(),f.position.set_czzhiu$(u.first).scale_mx4ult$(t.radius).add_czzhiu$(t.center),f.texCoord.set_czzhjp$(t.texCoordGenerator(u.second.y*o,2*u.second.x*o)),this.transform.transform_w1lst9$(f.position),this.hasNormals&&0!==f.normal.sqrLength()&&(this.transform.transform_w1lst9$(f.normal,0),f.normal.norm()),null!=(d=this.vertexModFun)&&d(f),p.bounds.add_czzhiu$(p.vertexIt.position),p.hasChanged=!0}for(i=De(R(n.faces),3).iterator();i.hasNext();){var _=i.next();this.geometry.addTriIndices_qt1dr2$(r+n.faces.get_za3lpa$(_)|0,r+n.faces.get_za3lpa$(1+_|0)|0,r+n.faces.get_za3lpa$(2+_|0)|0)}},Rz.prototype.rect_6h1xlk$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.rect_6h1xlk$",X((function(){var e=t.de.fabmax.kool.util.RectProps;return function(t){var i=new e;t(i),this.rect_e5k3t5$(i)}}))),Rz.prototype.rect_e5k3t5$=function(t){if(t.fixNegativeSize(),0===t.cornerRadius){var e,i,n,o=this.geometry;o.checkBufferSizes_za3lpa$(),e=o.vertexSizeF;for(var r=1;r<=e;r++)o.dataF.plusAssign_mx4ult$(0);i=o.vertexSizeI;for(var s=1;s<=i;s++)o.dataI.plusAssign_za3lpa$(0);o.vertexIt.index=(n=o.numVertices,o.numVertices=n+1|0,n);var a,l=o.vertexIt;l.color.set_czzhhz$(this.color),l.position.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),l.normal.set_czzhiu$(To().Z_AXIS),l.texCoord.set_czzhjp$(t.texCoordLowerLeft),this.transform.transform_w1lst9$(l.position),this.hasNormals&&0!==l.normal.sqrLength()&&(this.transform.transform_w1lst9$(l.normal,0),l.normal.norm()),null!=(a=this.vertexModFun)&&a(l),o.bounds.add_czzhiu$(o.vertexIt.position),o.hasChanged=!0;var u,p,c,h=o.numVertices-1|0,d=this.geometry;d.checkBufferSizes_za3lpa$(),u=d.vertexSizeF;for(var f=1;f<=u;f++)d.dataF.plusAssign_mx4ult$(0);p=d.vertexSizeI;for(var _=1;_<=p;_++)d.dataI.plusAssign_za3lpa$(0);d.vertexIt.index=(c=d.numVertices,d.numVertices=c+1|0,c);var m,$=d.vertexIt;$.color.set_czzhhz$(this.color),$.position.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),$.normal.set_czzhiu$(To().Z_AXIS),$.texCoord.set_czzhjp$(t.texCoordLowerRight),this.transform.transform_w1lst9$($.position),this.hasNormals&&0!==$.normal.sqrLength()&&(this.transform.transform_w1lst9$($.normal,0),$.normal.norm()),null!=(m=this.vertexModFun)&&m($),d.bounds.add_czzhiu$(d.vertexIt.position),d.hasChanged=!0;var y,v,g,b=d.numVertices-1|0,x=this.geometry;x.checkBufferSizes_za3lpa$(),y=x.vertexSizeF;for(var w=1;w<=y;w++)x.dataF.plusAssign_mx4ult$(0);v=x.vertexSizeI;for(var z=1;z<=v;z++)x.dataI.plusAssign_za3lpa$(0);x.vertexIt.index=(g=x.numVertices,x.numVertices=g+1|0,g);var k,S=x.vertexIt;S.color.set_czzhhz$(this.color),S.position.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),S.normal.set_czzhiu$(To().Z_AXIS),S.texCoord.set_czzhjp$(t.texCoordUpperRight),this.transform.transform_w1lst9$(S.position),this.hasNormals&&0!==S.normal.sqrLength()&&(this.transform.transform_w1lst9$(S.normal,0),S.normal.norm()),null!=(k=this.vertexModFun)&&k(S),x.bounds.add_czzhiu$(x.vertexIt.position),x.hasChanged=!0;var C,N,E,T=x.numVertices-1|0,P=this.geometry;P.checkBufferSizes_za3lpa$(),C=P.vertexSizeF;for(var O=1;O<=C;O++)P.dataF.plusAssign_mx4ult$(0);N=P.vertexSizeI;for(var M=1;M<=N;M++)P.dataI.plusAssign_za3lpa$(0);P.vertexIt.index=(E=P.numVertices,P.numVertices=E+1|0,E);var j,A=P.vertexIt;A.color.set_czzhhz$(this.color),A.position.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),A.normal.set_czzhiu$(To().Z_AXIS),A.texCoord.set_czzhjp$(t.texCoordUpperLeft),this.transform.transform_w1lst9$(A.position),this.hasNormals&&0!==A.normal.sqrLength()&&(this.transform.transform_w1lst9$(A.normal,0),A.normal.norm()),null!=(j=this.vertexModFun)&&j(A),P.bounds.add_czzhiu$(P.vertexIt.position),P.hasChanged=!0;var I=P.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(h,b,T),this.geometry.addTriIndices_qt1dr2$(h,T,I)}else{var R=t.origin.x,L=t.origin.y,D=t.origin.z,q=t.size.x,F=t.size.y,B=R+t.cornerRadius,U=L+t.cornerRadius,V=q-2*t.cornerRadius,G=F-2*t.cornerRadius,H=To().Z_AXIS,W=(t.texCoordUpperRight.x-t.texCoordUpperLeft.x)*t.cornerRadius/q,K=(t.texCoordUpperRight.y-t.texCoordLowerRight.y)*t.cornerRadius/F,X=jo(),Y=po();if(G>0){var Z=this.vertex_n440gp$(X.set_y2kzbl$(R,U,D),H,Y.set_dleff0$(0,K).add_czzhjp$(t.texCoordLowerLeft)),J=this.vertex_n440gp$(X.set_y2kzbl$(R+q,U,D),H,Y.set_dleff0$(0,K).add_czzhjp$(t.texCoordLowerRight)),Q=this.vertex_n440gp$(X.set_y2kzbl$(R+q,U+G,D),H,Y.set_dleff0$(0,-K).add_czzhjp$(t.texCoordUpperRight)),tt=this.vertex_n440gp$(X.set_y2kzbl$(R,U+G,D),H,Y.set_dleff0$(0,-K).add_czzhjp$(t.texCoordUpperLeft));this.geometry.addTriIndices_qt1dr2$(Z,J,Q),this.geometry.addTriIndices_qt1dr2$(Z,Q,tt)}if(V>0){var et=this.vertex_n440gp$(X.set_y2kzbl$(B,L,D),H,Y.set_dleff0$(W,0).add_czzhjp$(t.texCoordLowerLeft)),it=this.vertex_n440gp$(X.set_y2kzbl$(B+V,L,D),H,Y.set_dleff0$(-W,0).add_czzhjp$(t.texCoordLowerRight)),nt=this.vertex_n440gp$(X.set_y2kzbl$(B+V,U,D),H,Y.set_dleff0$(-W,K).add_czzhjp$(t.texCoordLowerRight)),ot=this.vertex_n440gp$(X.set_y2kzbl$(B,U,D),H,Y.set_dleff0$(W,K).add_czzhjp$(t.texCoordLowerLeft));this.geometry.addTriIndices_qt1dr2$(et,it,nt),this.geometry.addTriIndices_qt1dr2$(et,nt,ot),et=this.vertex_n440gp$(X.set_y2kzbl$(B,U+G,D),H,Y.set_dleff0$(W,-K).add_czzhjp$(t.texCoordUpperLeft)),it=this.vertex_n440gp$(X.set_y2kzbl$(B+V,U+G,D),H,Y.set_dleff0$(-W,-K).add_czzhjp$(t.texCoordUpperRight)),nt=this.vertex_n440gp$(X.set_y2kzbl$(B+V,L+F,D),H,Y.set_dleff0$(-W,0).add_czzhjp$(t.texCoordUpperRight)),ot=this.vertex_n440gp$(X.set_y2kzbl$(B,L+F,D),H,Y.set_dleff0$(W,0).add_czzhjp$(t.texCoordUpperLeft)),this.geometry.addTriIndices_qt1dr2$(et,it,nt),this.geometry.addTriIndices_qt1dr2$(et,nt,ot)}var rt=new Dz;rt.center.set_y2kzbl$(B+V,U+G,D),rt.startDeg=0,rt.sweepDeg=90,rt.radius=t.cornerRadius,rt.steps=t.cornerSteps,rt.uvCenter.set_dleff0$(-W,-K).add_czzhjp$(t.texCoordUpperRight),rt.uvRadius=W,this.circle_59f34t$(rt);var st=new Dz;st.center.set_y2kzbl$(B,U+G,D),st.startDeg=90,st.sweepDeg=90,st.radius=t.cornerRadius,st.steps=t.cornerSteps,st.uvCenter.set_dleff0$(W,-K).add_czzhjp$(t.texCoordUpperLeft),st.uvRadius=W,this.circle_59f34t$(st);var at=new Dz;at.center.set_y2kzbl$(B,U,D),at.startDeg=180,at.sweepDeg=90,at.radius=t.cornerRadius,at.steps=t.cornerSteps,at.uvCenter.set_dleff0$(W,K).add_czzhjp$(t.texCoordLowerLeft),at.uvRadius=W,this.circle_59f34t$(at);var lt=new Dz;lt.center.set_y2kzbl$(B+V,U,D),lt.startDeg=270,lt.sweepDeg=90,lt.radius=t.cornerRadius,lt.steps=t.cornerSteps,lt.uvCenter.set_dleff0$(-W,K).add_czzhjp$(t.texCoordLowerRight),lt.uvRadius=W,this.circle_59f34t$(lt)}},Rz.prototype.line_uy9yj5$=function(t,e,i){this.line_s2l86p$(t.x,t.y,e.x,e.y,i)},Rz.prototype.line_s2l86p$=function(t,e,i,n,o){var r,s,a,l=i-t,u=n-e,p=l*l+u*u,c=A.sqrt(p),h=.25*o*l/c,d=.25*o*u/c,f=(l+=h+h)/(c+=.5*o)*o/2,_=(u+=d+d)/c*o/2,m=t-h+_,$=e-d-f,y=i+h+_,v=n+d-f,g=i+h-_,b=n+d+f,x=t-h-_,w=e-d+f,z=this.geometry;z.checkBufferSizes_za3lpa$(),r=z.vertexSizeF;for(var k=1;k<=r;k++)z.dataF.plusAssign_mx4ult$(0);s=z.vertexSizeI;for(var S=1;S<=s;S++)z.dataI.plusAssign_za3lpa$(0);z.vertexIt.index=(a=z.numVertices,z.numVertices=a+1|0,a);var C,N=z.vertexIt;N.color.set_czzhhz$(this.color),N.position.set_y2kzbl$(m,$,0),N.normal.set_czzhiu$(To().Z_AXIS),this.transform.transform_w1lst9$(N.position),this.hasNormals&&0!==N.normal.sqrLength()&&(this.transform.transform_w1lst9$(N.normal,0),N.normal.norm()),null!=(C=this.vertexModFun)&&C(N),z.bounds.add_czzhiu$(z.vertexIt.position),z.hasChanged=!0;var E,T,P,O=z.numVertices-1|0,M=this.geometry;M.checkBufferSizes_za3lpa$(),E=M.vertexSizeF;for(var j=1;j<=E;j++)M.dataF.plusAssign_mx4ult$(0);T=M.vertexSizeI;for(var I=1;I<=T;I++)M.dataI.plusAssign_za3lpa$(0);M.vertexIt.index=(P=M.numVertices,M.numVertices=P+1|0,P);var R,L=M.vertexIt;L.color.set_czzhhz$(this.color),L.position.set_y2kzbl$(y,v,0),L.normal.set_czzhiu$(To().Z_AXIS),this.transform.transform_w1lst9$(L.position),this.hasNormals&&0!==L.normal.sqrLength()&&(this.transform.transform_w1lst9$(L.normal,0),L.normal.norm()),null!=(R=this.vertexModFun)&&R(L),M.bounds.add_czzhiu$(M.vertexIt.position),M.hasChanged=!0;var D,q,F,B=M.numVertices-1|0,U=this.geometry;U.checkBufferSizes_za3lpa$(),D=U.vertexSizeF;for(var V=1;V<=D;V++)U.dataF.plusAssign_mx4ult$(0);q=U.vertexSizeI;for(var G=1;G<=q;G++)U.dataI.plusAssign_za3lpa$(0);U.vertexIt.index=(F=U.numVertices,U.numVertices=F+1|0,F);var H,W=U.vertexIt;W.color.set_czzhhz$(this.color),W.position.set_y2kzbl$(g,b,0),W.normal.set_czzhiu$(To().Z_AXIS),this.transform.transform_w1lst9$(W.position),this.hasNormals&&0!==W.normal.sqrLength()&&(this.transform.transform_w1lst9$(W.normal,0),W.normal.norm()),null!=(H=this.vertexModFun)&&H(W),U.bounds.add_czzhiu$(U.vertexIt.position),U.hasChanged=!0;var K,X,Y,Z=U.numVertices-1|0,J=this.geometry;J.checkBufferSizes_za3lpa$(),K=J.vertexSizeF;for(var Q=1;Q<=K;Q++)J.dataF.plusAssign_mx4ult$(0);X=J.vertexSizeI;for(var tt=1;tt<=X;tt++)J.dataI.plusAssign_za3lpa$(0);J.vertexIt.index=(Y=J.numVertices,J.numVertices=Y+1|0,Y);var et,it=J.vertexIt;it.color.set_czzhhz$(this.color),it.position.set_y2kzbl$(x,w,0),it.normal.set_czzhiu$(To().Z_AXIS),this.transform.transform_w1lst9$(it.position),this.hasNormals&&0!==it.normal.sqrLength()&&(this.transform.transform_w1lst9$(it.normal,0),it.normal.norm()),null!=(et=this.vertexModFun)&&et(it),J.bounds.add_czzhiu$(J.vertexIt.position),J.hasChanged=!0;var nt=J.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(O,B,Z),this.geometry.addTriIndices_qt1dr2$(O,Z,nt)},Rz.prototype.lineArc_b3rrsf$=function(t,e,i,n,o,r,s){void 0===s&&(s=3);for(var a=B(rt(A.abs(o)/s)),l=A.max(1,a),u=o/l,p=n*LN.DEG_2_RAD,c=u*LN.DEG_2_RAD,h=0;h<l;h++){var d=p+c*h,f=d+c,_=t+A.cos(d)*i,m=e+A.sin(d)*i,$=t+A.cos(f)*i,y=e+A.sin(f)*i;this.line_s2l86p$(_,m,$,y,r)}},Rz.prototype.cube_xdlx95$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.cube_xdlx95$",X((function(){var e=t.de.fabmax.kool.util.CubeProps;return function(t){var i=new e;t(i),this.cube_lhbb6w$(i)}}))),Rz.prototype.cube_lhbb6w$=function(t){var e=jo();t.fixNegativeSize();var i=t.frontColor,n=this.color;null!=i&&(this.color=i);var o=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),To().Z_AXIS,new oo(0,1)),r=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),To().Z_AXIS,new oo(1,1)),s=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),To().Z_AXIS,new oo(1,0)),a=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),To().Z_AXIS,new oo(0,0));this.geometry.addTriIndices_qt1dr2$(o,r,s),this.geometry.addTriIndices_qt1dr2$(o,s,a),this.color=n;var l=t.rightColor,u=this.color;null!=l&&(this.color=l);var p=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),To().X_AXIS,new oo(1,1)),c=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),To().X_AXIS,new oo(1,0)),h=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),To().X_AXIS,new oo(0,0)),d=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),To().X_AXIS,new oo(0,1));this.geometry.addTriIndices_qt1dr2$(p,c,h),this.geometry.addTriIndices_qt1dr2$(p,h,d),this.color=u;var f=t.backColor,_=this.color;null!=f&&(this.color=f);var m=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),To().NEG_Z_AXIS,new oo(1,0)),$=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),To().NEG_Z_AXIS,new oo(0,0)),y=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),To().NEG_Z_AXIS,new oo(0,1)),v=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),To().NEG_Z_AXIS,new oo(1,1));this.geometry.addTriIndices_qt1dr2$(m,$,y),this.geometry.addTriIndices_qt1dr2$(m,y,v),this.color=_;var g=t.leftColor,b=this.color;null!=g&&(this.color=g);var x=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),To().NEG_X_AXIS,new oo(1,1)),w=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),To().NEG_X_AXIS,new oo(1,0)),z=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),To().NEG_X_AXIS,new oo(0,0)),k=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),To().NEG_X_AXIS,new oo(0,1));this.geometry.addTriIndices_qt1dr2$(x,w,z),this.geometry.addTriIndices_qt1dr2$(x,z,k),this.color=b;var S=t.topColor,C=this.color;null!=S&&(this.color=S);var N=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),To().Y_AXIS,new oo(0,1)),E=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),To().Y_AXIS,new oo(1,1)),T=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),To().Y_AXIS,new oo(1,0)),P=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),To().Y_AXIS,new oo(0,0));this.geometry.addTriIndices_qt1dr2$(N,E,T),this.geometry.addTriIndices_qt1dr2$(N,T,P),this.color=C;var O=t.bottomColor,M=this.color;null!=O&&(this.color=O);var j=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),To().NEG_Y_AXIS,new oo(0,1)),A=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),To().NEG_Y_AXIS,new oo(1,1)),I=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),To().NEG_Y_AXIS,new oo(1,0)),R=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),To().NEG_Y_AXIS,new oo(0,0));this.geometry.addTriIndices_qt1dr2$(j,A,I),this.geometry.addTriIndices_qt1dr2$(j,I,R),this.color=M},Rz.prototype.cylinder_z0gg86$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.cylinder_z0gg86$",X((function(){var e=t.de.fabmax.kool.util.CylinderProps;return function(t){var i=new e;t(i),this.cylinder_tnt2h$(i)}}))),Rz.prototype.cylinder_tnt2h$=function(t){var e,i=jo();if(t.fixNegativeSize(),t.bottomFill){this.transform.push(),this.translate_czzhiu$(t.origin),this.rotate_ad55pp$(90,To().X_AXIS);var n=new Dz;n.steps=t.steps,n.radius=t.bottomRadius,this.circle_59f34t$(n),this.transform.pop()}if(t.topFill){this.transform.push(),this.translate_y2kzbl$(t.origin.x,t.origin.y+t.height,t.origin.z),this.rotate_ad55pp$(-90,To().X_AXIS);var o=new Dz;o.steps=t.steps,o.radius=t.topRadius,this.circle_59f34t$(o),this.transform.pop()}var r=t.bottomRadius-t.topRadius,s=r*r+t.height*t.height,a=r/A.sqrt(s),l=90-A.acos(a)*LN.RAD_2_DEG,u=0,p=0;e=t.steps;for(var c=0;c<=e;c++){var h=c*U.PI*2/t.steps,d=A.cos(h),f=c*U.PI*2/t.steps,_=A.sin(f),m=t.origin.x+t.bottomRadius*d,$=t.origin.z+t.bottomRadius*_,y=t.origin.x+t.topRadius*d,v=t.origin.z+t.topRadius*_;i.set_y2kzbl$(d,0,_).rotate_7b5o5w$(l,_,0,d);var g,b,x,w=this.geometry;w.checkBufferSizes_za3lpa$(),g=w.vertexSizeF;for(var z=1;z<=g;z++)w.dataF.plusAssign_mx4ult$(0);b=w.vertexSizeI;for(var k=1;k<=b;k++)w.dataI.plusAssign_za3lpa$(0);w.vertexIt.index=(x=w.numVertices,w.numVertices=x+1|0,x);var S,C=w.vertexIt;C.color.set_czzhhz$(this.color),C.position.set_y2kzbl$(m,t.origin.y,$),C.normal.set_czzhiu$(i),this.transform.transform_w1lst9$(C.position),this.hasNormals&&0!==C.normal.sqrLength()&&(this.transform.transform_w1lst9$(C.normal,0),C.normal.norm()),null!=(S=this.vertexModFun)&&S(C),w.bounds.add_czzhiu$(w.vertexIt.position),w.hasChanged=!0;var N,E,T,P=w.numVertices-1|0,O=this.geometry;O.checkBufferSizes_za3lpa$(),N=O.vertexSizeF;for(var M=1;M<=N;M++)O.dataF.plusAssign_mx4ult$(0);E=O.vertexSizeI;for(var j=1;j<=E;j++)O.dataI.plusAssign_za3lpa$(0);O.vertexIt.index=(T=O.numVertices,O.numVertices=T+1|0,T);var I,R=O.vertexIt;R.color.set_czzhhz$(this.color),R.position.set_y2kzbl$(y,t.origin.y+t.height,v),R.normal.set_czzhiu$(i),this.transform.transform_w1lst9$(R.position),this.hasNormals&&0!==R.normal.sqrLength()&&(this.transform.transform_w1lst9$(R.normal,0),R.normal.norm()),null!=(I=this.vertexModFun)&&I(R),O.bounds.add_czzhiu$(O.vertexIt.position),O.hasChanged=!0;var L=O.numVertices-1|0;c>0&&(this.geometry.addTriIndices_qt1dr2$(u,p,P),this.geometry.addTriIndices_qt1dr2$(p,L,P)),u=P,p=L}},Rz.prototype.grid_vs3byi$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.grid_vs3byi$",X((function(){var e=t.de.fabmax.kool.util.GridProps;return function(t){var i=new e;t(i),this.grid_gtbnl3$(i)}}))),Rz.prototype.grid_gtbnl3$=function(t){var i,n,o,r,s=jo(),a=-t.sizeX/2,l=-t.sizeY/2,u=t.sizeX/t.stepsX,p=t.sizeY/t.stepsY,c=t.stepsX+1|0;t.xDir.cross_2gj7b4$(t.yDir,s).norm(),i=t.stepsY;for(var h=0;h<=i;h++){n=t.stepsX;for(var d=0;d<=n;d++){var f,_,m,$=a+d*u,y=l+h*p,v=t.heightFun(d,h),g=this.geometry;g.checkBufferSizes_za3lpa$(),f=g.vertexSizeF;for(var b=1;b<=f;b++)g.dataF.plusAssign_mx4ult$(0);_=g.vertexSizeI;for(var x=1;x<=_;x++)g.dataI.plusAssign_za3lpa$(0);g.vertexIt.index=(m=g.numVertices,g.numVertices=m+1|0,m);var w,z=g.vertexIt;z.color.set_czzhhz$(this.color),z.position.set_czzhiu$(t.center),z.position.x=z.position.x+(t.xDir.x*$+t.yDir.x*y+s.x*v),z.position.y=z.position.y+(t.xDir.y*$+t.yDir.y*y+s.y*v),z.position.z=z.position.z+(t.xDir.z*$+t.yDir.z*y+s.z*v),z.texCoord.set_dleff0$(d/t.stepsX,h/t.stepsY),this.transform.transform_w1lst9$(z.position),this.hasNormals&&0!==z.normal.sqrLength()&&(this.transform.transform_w1lst9$(z.normal,0),z.normal.norm()),null!=(w=this.vertexModFun)&&w(z),g.bounds.add_czzhiu$(g.vertexIt.position),g.hasChanged=!0;var k=g.numVertices-1|0;d>0&&h>0&&(d%2==h%2?(this.geometry.addTriIndices_qt1dr2$(k-c-1|0,k,k-1|0),this.geometry.addTriIndices_qt1dr2$(k-c|0,k,k-c-1|0)):(this.geometry.addTriIndices_qt1dr2$(k-c|0,k,k-1|0),this.geometry.addTriIndices_qt1dr2$(k-c|0,k-1|0,k-c-1|0)))}}var S=this.geometry.numIndices-(6*e.imul(t.stepsX,t.stepsY)|0)|0,C=jo(),N=jo(),E=this.geometry.get_za3lpa$(0),T=this.geometry.get_za3lpa$(0),P=this.geometry.get_za3lpa$(0);o=this.geometry.numIndices;for(var O=S;O<o;O+=3)E.index=this.geometry.indices.get_za3lpa$(O),T.index=this.geometry.indices.get_za3lpa$(O+1|0),P.index=this.geometry.indices.get_za3lpa$(O+2|0),T.position.subtract_2gj7b4$(E.position,C).norm(),P.position.subtract_2gj7b4$(E.position,N).norm(),C.cross_2gj7b4$(N,s).norm(),E.normal.add_czzhiu$(s),T.normal.add_czzhiu$(s),P.normal.add_czzhiu$(s);var M=this.geometry.numVertices-e.imul(t.stepsX+1|0,t.stepsY+1|0)|0;r=this.geometry.numVertices;for(var j=M;j<r;j++)E.index=j,E.normal.norm()},Rz.prototype.geometry_ejqx55$=function(t,e){var i;if(void 0===e&&(e=!1),t.primitiveType!==uz())throw cn("Only triangle geometry can be added");var n,o=this.geometry.numVertices,r=this.color;n=t.numVertices;for(var s=0;s<n;s++){t.vertexIt.index=s;var a=t.vertexIt;e&&(this.color=a.color),this.vertex_n440gp$(a.position,a.normal,a.texCoord)}i=t.numIndices;for(var l=0;l<i;l++)this.geometry.addIndex_za3lpa$(o+t.indices.get_za3lpa$(l)|0);this.color=r},Rz.prototype.text_7d71kc$=K("kool-kool-core.de.fabmax.kool.util.MeshBuilder.text_7d71kc$",X((function(){var e=t.de.fabmax.kool.util.TextProps;return function(t,i,n){void 0===i&&(i=0);var o=new e(t);n(o),this.text_s8z339$(o,i)}}))),Rz.prototype.text_s8z339$=function(t,e){var i;if(void 0===e&&(e=0),this.transform.push(),0!==e){var n=e/t.font.charMap.fontProps.sizePts;this.scale_y2kzbl$(n,n,n)}this.translate_czzhiu$(t.origin);var o={v:0};for(i=Fe(t.text);i.hasNext();){var r=O(i.next());10===r&&(this.translate_y2kzbl$(0,-t.font.lineSpace,0),o.v=0);var s=t.font.charMap.get_11rb$(E(r));if(null!=s){var a=new Hz;a.origin.set_y2kzbl$(o.v-s.xOffset,s.yBaseline-s.height,0),a.size.set_dleff0$(s.width,s.height),a.texCoordUpperLeft.set_czzhjp$(s.uvMin),a.texCoordUpperRight.set_dleff0$(s.uvMax.x,s.uvMin.y),a.texCoordLowerLeft.set_dleff0$(s.uvMin.x,s.uvMax.y),a.texCoordLowerRight.set_czzhjp$(s.uvMax),this.rect_e5k3t5$(a),o.v+=s.advance}}this.transform.pop()},Rz.$metadata$={kind:$,simpleName:"MeshBuilder",interfaces:[]},Dz.prototype.zeroTexCoords=function(){this.uvCenter.set_czzhjp$(ao().ZERO),this.uvRadius=0},Dz.prototype.fullTexCoords=function(){this.uvCenter.set_dleff0$(.5,.5),this.uvRadius=.5},Dz.$metadata$={kind:$,simpleName:"CircleProps",interfaces:[]},Fz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Uz=null;function Vz(){return null===Uz&&new Fz,Uz}function Gz(){var t;this.radius=1,this.steps=5,this.center=jo(),this.uv_0=po(),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)})}function Hz(){this.cornerRadius=0,this.cornerSteps=8,this.origin=jo(),this.size=new uo(1,1),this.texCoordUpperLeft=po(),this.texCoordUpperRight=po(),this.texCoordLowerLeft=po(),this.texCoordLowerRight=po(),this.generateTexCoords_mx4ult$(1)}function Wz(){this.origin=jo(),this.size=new Mo(1,1,1),this.topColor=null,this.bottomColor=null,this.leftColor=null,this.rightColor=null,this.frontColor=null,this.backColor=null}function Kz(){this.bottomRadius=1,this.topRadius=1,this.steps=20,this.height=1,this.topFill=!0,this.bottomFill=!0,this.origin=jo()}function Xz(t){this.font=t,this.text="",this.origin=jo()}function Yz(t,i){var n;Qz(),void 0===i&&(i=1e3),this.instanceAttributes=t,this.maxInstances=i,this.attributeOffsets=null,this.instanceSizeF=0,this.strideBytesF=0,this.usage=hz(),this.numInstances=0,this.dataF=null,this.hasChanged=!0;var o=0,r=z();for(n=this.instanceAttributes.iterator();n.hasNext();){var s=n.next();if(s.type.isInt)throw V("For now only float attributes are supported");var a=o;r.put_xwzc9p$(s,a),o=o+s.type.byteSize|0}this.attributeOffsets=r,this.instanceSizeF=o/4|0,this.strideBytesF=o,this.dataF=MN(e.imul(o,this.maxInstances))}function Zz(){Jz=this,this.MODEL_MAT=new ps("attrib_model_mat",us())}qz.$metadata$={kind:$,simpleName:"GridProps",interfaces:[]},Gz.prototype.defaultTexCoordGenerator_0=function(t,e){return this.uv_0.set_dleff0$(e/(2*U.PI),t/U.PI)},Gz.prototype.icoDefaults=function(){var t;return this.radius=1,this.steps=2,this.center.set_czzhiu$(To().ZERO),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)}),this},Gz.prototype.uvDefaults=function(){var t;return this.radius=1,this.steps=20,this.center.set_czzhiu$(To().ZERO),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)}),this},Gz.$metadata$={kind:$,simpleName:"SphereProps",interfaces:[]},Object.defineProperty(Hz.prototype,"width",{configurable:!0,get:function(){return this.size.x},set:function(t){this.size.x=t}}),Object.defineProperty(Hz.prototype,"height",{configurable:!0,get:function(){return this.size.y},set:function(t){this.size.y=t}}),Hz.prototype.fixNegativeSize=function(){this.size.x<0&&(this.origin.x=this.origin.x+this.size.x,this.size.x=-this.size.x),this.size.y<0&&(this.origin.y=this.origin.y+this.size.y,this.size.y=-this.size.y)},Hz.prototype.zeroTexCoords=function(){this.generateTexCoords_mx4ult$(0)},Hz.prototype.generateTexCoords_mx4ult$=function(t){void 0===t&&(t=1),this.texCoordUpperLeft.set_dleff0$(0,0),this.texCoordUpperRight.set_dleff0$(t,0),this.texCoordLowerLeft.set_dleff0$(0,t),this.texCoordLowerRight.set_dleff0$(t,t)},Hz.prototype.mirrorTexCoordsX=function(){var t=this.texCoordUpperLeft.x,e=this.texCoordLowerLeft.x;this.texCoordUpperLeft.x=this.texCoordUpperRight.x,this.texCoordUpperRight.x=t,this.texCoordLowerLeft.x=this.texCoordLowerRight.x,this.texCoordLowerRight.x=e},Hz.prototype.mirrorTexCoordsY=function(){var t=this.texCoordUpperLeft.y,e=this.texCoordUpperRight.y;this.texCoordUpperLeft.y=this.texCoordLowerLeft.y,this.texCoordLowerLeft.y=t,this.texCoordUpperRight.y=this.texCoordLowerRight.y,this.texCoordLowerRight.y=e},Hz.$metadata$={kind:$,simpleName:"RectProps",interfaces:[]},Object.defineProperty(Wz.prototype,"width",{configurable:!0,get:function(){return this.size.x},set:function(t){this.size.x=t}}),Object.defineProperty(Wz.prototype,"height",{configurable:!0,get:function(){return this.size.y},set:function(t){this.size.y=t}}),Object.defineProperty(Wz.prototype,"depth",{configurable:!0,get:function(){return this.size.z},set:function(t){this.size.z=t}}),Wz.prototype.fixNegativeSize=function(){this.size.x<0&&(this.origin.x=this.origin.x+this.size.x,this.size.x=-this.size.x),this.size.y<0&&(this.origin.y=this.origin.y+this.size.y,this.size.y=-this.size.y),this.size.z<0&&(this.origin.z=this.origin.z+this.size.z,this.size.z=-this.size.z)},Wz.prototype.centered=function(){this.origin.x=this.origin.x-this.size.x/2,this.origin.y=this.origin.y-this.size.y/2,this.origin.z=this.origin.z-this.size.z/2},Wz.prototype.colored_6taknv$=function(t){void 0===t&&(t=!0),t?(this.frontColor=J$().MD_RED.toLinear(),this.rightColor=J$().MD_AMBER.toLinear(),this.backColor=J$().MD_INDIGO.toLinear(),this.leftColor=J$().MD_CYAN.toLinear(),this.topColor=J$().MD_PURPLE.toLinear(),this.bottomColor=J$().MD_GREEN.toLinear()):(this.frontColor=J$().MD_RED,this.rightColor=J$().MD_AMBER,this.backColor=J$().MD_INDIGO,this.leftColor=J$().MD_CYAN,this.topColor=J$().MD_PURPLE,this.bottomColor=J$().MD_GREEN)},Wz.$metadata$={kind:$,simpleName:"CubeProps",interfaces:[]},Kz.prototype.fixNegativeSize=function(){this.height<0&&(this.origin.y=this.origin.y+this.height,this.height=-this.height)},Kz.$metadata$={kind:$,simpleName:"CylinderProps",interfaces:[]},Xz.$metadata$={kind:$,simpleName:"TextProps",interfaces:[]},Yz.prototype.checkBufferSize_za3lpa$=function(t){if(void 0===t&&(t=1),(this.numInstances+t|0)>this.maxInstances)throw cn("Maximum number of instances exceeded, create with increased maxInstances")},Yz.prototype.addInstance_u9cxs7$=K("kool-kool-core.de.fabmax.kool.util.MeshInstanceList.addInstance_u9cxs7$",X((function(){var t=e.kotlin.IllegalStateException_init_pdl1vj$;return function(e){this.checkBufferSize_za3lpa$();var i=this.dataF.position;e(this.dataF);var n=this.dataF.position-i|0;if(n!==this.instanceSizeF)throw t("Expected data to grow by "+this.instanceSizeF+" elements, instead it grew by "+n);this.numInstances=this.numInstances+1|0,this.hasChanged=!0}}))),Yz.prototype.clear=function(){this.numInstances=0,this.dataF.position=0,this.dataF.limit=this.dataF.capacity,this.hasChanged=!0},Zz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jz=null;function Qz(){return null===Jz&&new Zz,Jz}function tk(t,e){nk(),this.maxSize_tysx8i$_0=t,this.factory_vv2li5$_0=e,this.recyclingStack_cbi09h$_0=M()}function ek(){ik=this,this.DEFAULT_MAX_SIZE=1e4}Yz.$metadata$={kind:$,simpleName:"MeshInstanceList",interfaces:[]},tk.prototype.get=function(){return this.recyclingStack_cbi09h$_0.isEmpty()?this.factory_vv2li5$_0():this.recyclingStack_cbi09h$_0.removeAt_za3lpa$(bt(this.recyclingStack_cbi09h$_0))},tk.prototype.recycle_trkh7z$=function(t){if(this.recyclingStack_cbi09h$_0.size<this.maxSize_tysx8i$_0)this.recyclingStack_cbi09h$_0.add_11rb$(t);else{var i=KN.Log,n=Cz.DEBUG,o=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,o,"Discarding recycled object "+e.getKClassFromExpression(t)+", stack is full: "+this.recyclingStack_cbi09h$_0.size)}return this},ek.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ik=null;function nk(){return null===ik&&new ek,ik}function ok(t,e){return e=e||Object.create(tk.prototype),tk.call(e,1e4,t),e}function rk(t){ok(t,this),this.liveObjects_0=M()}function sk(){this.tStart_0=0,this.reset()}function ak(){mk=this}function lk(t,e,i){this.vertices=t,this.indices=e,this.normal=i}function uk(t,i){this.outerRing=null,this.innerRings=M(),this.verts=M(),this.vertTree=null,this.edgeTree=null,this.vertInTriTrav=new fk,this.edgeIntersectionTrav=new _k,this.triangles=M(),this.triEdges=z();var n,o,r,s={v:0},a=w(j(t,10));for(n=t.iterator();n.hasNext();){var l,u=n.next();a.add_11rb$(new dk((l=s.v,s.v=l+1|0,l),u))}for(this.outerRing=new ck(a),o=i.iterator();o.hasNext();){var p,c=o.next(),h=this.innerRings,d=w(j(c,10));for(p=c.iterator();p.hasNext();){var f,_=p.next();d.add_11rb$(new dk((f=s.v,s.v=f+1|0,f),_))}var m=new ck(d);h.add_11rb$(m)}for(xt(this.verts,this.outerRing.points),r=this.innerRings.iterator();r.hasNext();){var $=r.next();xt(this.verts,$.points)}var y,v,g,b=M();for(this.addRingEdges_0(b,this.outerRing),y=this.innerRings.iterator();y.hasNext();){var x=y.next();this.addRingEdges_0(b,x)}for(this.edgeTree=new Nk(b,Lk()),this.vertTree=new Nk(this.verts,Ak()),v=this.innerRings.iterator();v.hasNext();){var k=v.next();this.insertBridgeEdge_0(k)}for(g=this.verts.iterator();g.hasNext();){var S=g.next();this.updateIsEar_0(S)}for(var C=this.verts.size-2|0;C>0;){var N=this.nextEarTip_0();if(null==N){var E=KN.Log,T=Cz.ERROR,P=e.getKClassFromExpression(this).simpleName;T.level>=E.level.level&&E.printer(T,P,"Triangulation failed: No more ear clipping candidates");break}this.clip_0(N),C=C-1|0}}function pk(t,i,n){this.v1=t,this.v2=i,this.v3=n,this.k1=e.Long.fromInt(this.v1.index).shiftLeft(32).or(e.Long.fromInt(this.v2.index)),this.k2=e.Long.fromInt(this.v2.index).shiftLeft(32).or(e.Long.fromInt(this.v3.index)),this.k3=e.Long.fromInt(this.v3.index).shiftLeft(32).or(e.Long.fromInt(this.v1.index)),this.a1=$k().interiorAngle_0(this.v3,this.v1,this.v2),this.a2=$k().interiorAngle_0(this.v1,this.v2,this.v3),this.a3=180-this.a1-this.a2;var o=this.a1,r=this.a2,s=this.a3,a=A.min(r,s);this.minA=A.min(o,a),this.longest=0,this.longestK=null;var l=this.v1.distance_czzhiu$(this.v2),u=this.v2.distance_czzhiu$(this.v3),p=this.v3.distance_czzhiu$(this.v1);l>u&&l>p?(this.longest=l,this.longestK=this.k1):u>l&&u>p?(this.longest=u,this.longestK=this.k2):(this.longest=p,this.longestK=this.k3)}function ck(t){this.points=null;var e,i=M();for(e=t.iterator();e.hasNext();){var n=e.next();(i.isEmpty()||n.distance_czzhiu$(F(i))>1e-4)&&i.add_11rb$(n)}F(i).distance_czzhiu$(q(i))<1e-4&&i.removeAt_za3lpa$(bt(i)),this.points=i}function hk(t,e){Bk.call(this,t,e),t.nextEdge=this,e.prevEdge=this}function dk(t,e){Oo(e,this),this.index=t,this.interiorAngle=0,this.isEar=!1,this.isOpen=!0,this.prevEdge_gh04s7$_0=this.prevEdge_gh04s7$_0,this.nextEdge_hknyfd$_0=this.nextEdge_hknyfd$_0}function fk(){nS.call(this),this.v1_tcfd5c$_0=this.v1_tcfd5c$_0,this.v2_tcfd4h$_0=this.v2_tcfd4h$_0,this.v3_tcfd3m$_0=this.v3_tcfd3m$_0,this.min=po(),this.max=po(),this.result=M()}function _k(){nS.call(this),this.edge_ses85y$_0=this.edge_ses85y$_0,this.min=po(),this.max=po(),this.result=M()}tk.$metadata$={kind:$,simpleName:"ObjectRecycler",interfaces:[]},Object.defineProperty(rk.prototype,"size",{configurable:!0,get:function(){return this.liveObjects_0.size}}),rk.prototype.get_za3lpa$=function(t){return this.liveObjects_0.get_za3lpa$(t)},rk.prototype.get=function(){var t=tk.prototype.get.call(this);return this.liveObjects_0.add_11rb$(t),t},rk.prototype.recycle_trkh7z$=function(t){return this.liveObjects_0.remove_11rb$(t),tk.prototype.recycle_trkh7z$.call(this,t)},rk.prototype.use_oh3mgy$=K("kool-kool-core.de.fabmax.kool.util.ObjectPool.use_oh3mgy$",(function(t){var e=this.get();t(e),this.recycle_trkh7z$(e)})),rk.prototype.recycleAll=function(){var t;t=this.liveObjects_0;for(var e=0;e!==t.size;++e)tk.prototype.recycle_trkh7z$.call(this,this.liveObjects_0.get_za3lpa$(e));this.liveObjects_0.clear()},rk.$metadata$={kind:$,simpleName:"ObjectPool",interfaces:[tk]},sk.prototype.reset=function(){this.tStart_0=qS()},sk.prototype.takeSecs=function(){return this.takeMs()/1e3},sk.prototype.takeMs=function(){return qS()-this.tStart_0},sk.$metadata$={kind:$,simpleName:"PerfTimer",interfaces:[]},ak.prototype.fillPolygon_3v8xej$=function(t,e){void 0===e&&(e=Nt());var i=this.computeNormal_uqk38n$(t),n=this.projectXy_gpxhmj$(t,i);this.xyArea_uqk38n$(n)<0&&(i.scale_mx4ult$(-1),n=this.projectXy_gpxhmj$(t,i));var o,r=w(j(e,10));for(o=e.iterator();o.hasNext();){var s=o.next();r.add_11rb$(this.projectXy_gpxhmj$(s,i))}var a,l=new uk(n,r),u=M();for(xt(u,t),a=e.iterator();a.hasNext();){var p=a.next();xt(u,p)}var c,h=M();for(c=l.triangles.iterator();c.hasNext();){var d=c.next(),f=d.v1.index;h.add_11rb$(f);var _=d.v2.index;h.add_11rb$(_);var m=d.v3.index;h.add_11rb$(m)}return new lk(Ve(u),Be(h),i)},ak.prototype.computeNormal_uqk38n$=function(t){var e,i,n=b([t.get_za3lpa$(0)]);for(i=t.iterator();i.hasNext();){var o,r=i.next(),s=r.distance_czzhiu$(F(n));o=LN.FUZZY_EQ_F,A.abs(s)<=o||n.add_11rb$(r)}for(var a=Io(n.get_za3lpa$(1)).subtract_czzhiu$(n.get_za3lpa$(0)).norm(),l=Io(n.get_za3lpa$(2)).subtract_czzhiu$(n.get_za3lpa$(1)).norm(),u=2;;){var p=l.times_czzhiu$(a);if(!(A.abs(p)>.8&&u<n.size))break;l.set_czzhiu$(n.get_za3lpa$((u+1|0)%n.size)).subtract_czzhiu$(n.get_za3lpa$((e=u,u=e+1|0,e))).norm()}return a.cross_2gj7b4$(l,jo())},ak.prototype.projectXy_gpxhmj$=function(t,e){var i=e.times_czzhiu$(To().X_AXIS),n=A.abs(i)<.7?Io(To().X_AXIS):Io(To().Z_AXIS),o=e.cross_2gj7b4$(n,jo()).norm();o.cross_2gj7b4$(e,n).norm();var r,s=w(j(t,10));for(r=t.iterator();r.hasNext();){var a=r.next();s.add_11rb$(new Co(a.times_czzhiu$(n),a.times_czzhiu$(o),0))}return s},ak.prototype.xyArea_uqk38n$=function(t){for(var e=0,i=0;i!==t.size;++i){var n=t.get_za3lpa$(i),o=t.get_za3lpa$((i+1|0)%t.size);e+=n.x*o.y-n.y*o.x}return.5*e},ak.prototype.interiorAngle_0=function(t,e,i){var n=t.y-e.y,o=t.x-e.x,r=A.atan2(n,o),s=i.y-e.y,a=i.x-e.x,l=(r-A.atan2(s,a))*LN.RAD_2_DEG;return l<0?l+360:l},Object.defineProperty(lk.prototype,"numTriangles",{configurable:!0,get:function(){return this.indices.length/3|0}}),lk.$metadata$={kind:$,simpleName:"TriangulatedPolygon",interfaces:[]},uk.prototype.addRingEdges_0=function(t,e){var i;i=e.points;for(var n=0;n!==i.size;++n){var o=new hk(e.points.get_za3lpa$(n),e.points.get_za3lpa$((n+1|0)%e.points.size));t.add_11rb$(o)}},uk.prototype.insertBridgeEdge_0=function(t){var i,n=null;i=t.points;for(var o=0;o!==i.size;++o){var r;r=this.outerRing.points;for(var s=0;s!==r.size;++s){var a=new Bk(t.points.get_za3lpa$(o),this.outerRing.points.get_za3lpa$(s));(null==n||a.length<n.length)&&this.noEdgeIntersect_0(a)&&(n=a)}}if(null!=n){var l=n.pt0,u=l.prevEdge.pt0,p=new dk(l.index,l);this.verts.add_11rb$(p);var c=n.pt1,h=c.nextEdge.pt1,d=new dk(c.index,c);this.verts.add_11rb$(d),new hk(u,p),new hk(d,h),new hk(c,l),new hk(p,d)}else{var f=KN.Log,_=Cz.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"No suitable bridge edge for hole insertion")}},uk.prototype.nextEarTip_0=function(){var t,e={v:null};for(t=this.verts.iterator();t.hasNext();){var i=t.next();i.isOpen&&i.isEar&&(null==e.v||x(e.v).interiorAngle>i.interiorAngle)&&(e.v=i)}return e.v},uk.prototype.clip_0=function(t){t.isOpen=!1;var e=new pk(t.prevEdge.pt0,t,t.nextEdge.pt1);this.addTriangle_0(e);var i=new hk(t.prevEdge.pt0,t.nextEdge.pt1);this.updateIsEar_0(i.pt0),this.updateIsEar_0(i.pt1),e.minA<30&&this.trySwap_0(e)},uk.prototype.addTriangle_0=function(t){this.triangles.add_11rb$(t);var e=this.triEdges,i=t.k1;e.put_xwzc9p$(i,t);var n=this.triEdges,o=t.k2;n.put_xwzc9p$(o,t);var r=this.triEdges,s=t.k3;r.put_xwzc9p$(s,t)},uk.prototype.removeTriangle_0=function(t){this.triangles.remove_11rb$(t),this.triEdges.remove_11rb$(t.k1),this.triEdges.remove_11rb$(t.k2),this.triEdges.remove_11rb$(t.k3)},uk.prototype.trySwap_0=function(t){var e=this.triEdges.get_11rb$(this.opp_0(t.longestK));if(null!=e){var i,n,o=e.containsIndex_za3lpa$(t.v1.index)?e.containsIndex_za3lpa$(t.v2.index)?At([t.v3,t.v1,e.oppVertex_vux9f0$(t.v1.index,t.v2.index),t.v2]):At([t.v2,t.v3,e.oppVertex_vux9f0$(t.v3.index,t.v1.index),t.v1]):At([t.v1,t.v2,e.oppVertex_vux9f0$(t.v2.index,t.v3.index),t.v3]);t.containsIndex_za3lpa$(o.get_za3lpa$(0).index)&&t.containsIndex_za3lpa$(o.get_za3lpa$(1).index)&&t.containsIndex_za3lpa$(o.get_za3lpa$(2).index)?(i=new pk(o.get_za3lpa$(0),o.get_za3lpa$(1),o.get_za3lpa$(3)),n=new pk(o.get_za3lpa$(3),o.get_za3lpa$(1),o.get_za3lpa$(2))):(i=new pk(o.get_za3lpa$(0),o.get_za3lpa$(1),o.get_za3lpa$(2)),n=new pk(o.get_za3lpa$(0),o.get_za3lpa$(2),o.get_za3lpa$(3)));var r=i.minA,s=n.minA,a=A.min(r,s),l=t.minA,u=e.minA;a>A.min(l,u)&&(this.removeTriangle_0(t),this.removeTriangle_0(e),this.addTriangle_0(i),this.addTriangle_0(n))}},uk.prototype.opp_0=function(t){var e=t.shiftRight(32).and(Ue);return t.and(Ue).shiftLeft(32).or(e)},uk.prototype.updateIsEar_0=function(t){var e;t.updateInteriorAngle(),e=!(t.interiorAngle>=180)&&this.noVertexInside_0(t.prevEdge.pt0,t,t.nextEdge.pt1),t.isEar=e},uk.prototype.noVertexInside_0=function(t,e,i){return this.vertInTriTrav.setup_6vy1vz$(t,e,i).traverse_7efza$(this.vertTree),this.vertInTriTrav.result.isEmpty()},uk.prototype.noEdgeIntersect_0=function(t){return this.edgeIntersectionTrav.setup_vktcv1$(t).traverse_7efza$(this.edgeTree),this.edgeIntersectionTrav.result.isEmpty()},uk.$metadata$={kind:$,simpleName:"Triangulator",interfaces:[]},pk.prototype.oppVertex_vux9f0$=function(t,e){return this.v1.index!==t&&this.v1.index!==e?this.v1:this.v2.index!==t&&this.v2.index!==e?this.v2:this.v3},pk.prototype.containsIndex_za3lpa$=function(t){return this.v1.index===t||this.v2.index===t||this.v3.index===t},pk.$metadata$={kind:$,simpleName:"PolyTri",interfaces:[]},ck.$metadata$={kind:$,simpleName:"PolyRing",interfaces:[]},hk.$metadata$={kind:$,simpleName:"PolyEdge",interfaces:[Bk]},Object.defineProperty(dk.prototype,"prevEdge",{configurable:!0,get:function(){return null==this.prevEdge_gh04s7$_0?pt("prevEdge"):this.prevEdge_gh04s7$_0},set:function(t){this.prevEdge_gh04s7$_0=t}}),Object.defineProperty(dk.prototype,"nextEdge",{configurable:!0,get:function(){return null==this.nextEdge_hknyfd$_0?pt("nextEdge"):this.nextEdge_hknyfd$_0},set:function(t){this.nextEdge_hknyfd$_0=t}}),dk.prototype.updateInteriorAngle=function(){this.interiorAngle=$k().interiorAngle_0(this.prevEdge.pt0,this,this.nextEdge.pt1)},dk.$metadata$={kind:$,simpleName:"PolyVertex",interfaces:[Co]},Object.defineProperty(fk.prototype,"v1",{configurable:!0,get:function(){return null==this.v1_tcfd5c$_0?pt("v1"):this.v1_tcfd5c$_0},set:function(t){this.v1_tcfd5c$_0=t}}),Object.defineProperty(fk.prototype,"v2",{configurable:!0,get:function(){return null==this.v2_tcfd4h$_0?pt("v2"):this.v2_tcfd4h$_0},set:function(t){this.v2_tcfd4h$_0=t}}),Object.defineProperty(fk.prototype,"v3",{configurable:!0,get:function(){return null==this.v3_tcfd3m$_0?pt("v3"):this.v3_tcfd3m$_0},set:function(t){this.v3_tcfd3m$_0=t}}),fk.prototype.setup_6vy1vz$=function(t,e,i){this.v1=t,this.v2=e,this.v3=i,this.result.clear();var n=this.min,o=t.x,r=e.x,s=i.x,a=A.min(r,s),l=A.min(o,a),u=t.y,p=e.y,c=i.y,h=A.min(p,c);n.set_dleff0$(l,A.min(u,h));var d=this.max,f=t.x,_=e.x,m=i.x,$=A.max(_,m),y=A.max(f,$),v=t.y,g=e.y,b=i.y,x=A.max(g,b);return d.set_dleff0$(y,A.max(v,x)),this},fk.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var o=e.children.get_za3lpa$(n),r=o.bounds;this.min.x<=r.max.x&&this.max.x>=r.min.x&&this.min.y<=r.max.y&&this.max.y>=r.min.y&&this.traverseNode_4w85ke$(t,o)}},fk.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,o,r;n=(i=e.nodeRange).first,o=i.last,r=i.step;for(var s=n;s<=o;s+=r){var a=e.items.get_za3lpa$(s),l=a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y,u=a.index!==this.v1.index&&a.index!==this.v2.index&&a.index!==this.v3.index;l&&u&&this.isPointInTriangle_0(a,this.v1,this.v2,this.v3)&&this.result.add_11rb$(a)}},fk.prototype.isPointInTriangle_0=function(t,e,i,n){var o=this.pointEdgeSign_0(t,e,i),r=this.pointEdgeSign_0(t,i,n),s=this.pointEdgeSign_0(t,n,e);return!((o<0||r<0||s<0)&&(o>0||r>0||s>0))},fk.prototype.pointEdgeSign_0=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},fk.$metadata$={kind:$,simpleName:"VertsInTriTraverser",interfaces:[nS]},Object.defineProperty(_k.prototype,"edge",{configurable:!0,get:function(){return null==this.edge_ses85y$_0?pt("edge"):this.edge_ses85y$_0},set:function(t){this.edge_ses85y$_0=t}}),_k.prototype.setup_vktcv1$=function(t){this.edge=t,this.result.clear();var e=this.min,i=t.pt0.x,n=t.pt1.x,o=A.min(i,n),r=t.pt0.y,s=t.pt1.y;e.set_dleff0$(o,A.min(r,s));var a=this.max,l=t.pt0.x,u=t.pt1.x,p=A.max(l,u),c=t.pt0.y,h=t.pt1.y;return a.set_dleff0$(p,A.max(c,h)),this},_k.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var o=e.children.get_za3lpa$(n),r=o.bounds;this.min.x<=r.max.x&&this.max.x>=r.min.x&&this.min.y<=r.max.y&&this.max.y>=r.min.y&&this.traverseNode_4w85ke$(t,o)}},_k.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,o,r;n=(i=e.nodeRange).first,o=i.last,r=i.step;for(var s=n;s<=o;s+=r){var a=e.items.get_za3lpa$(s),l=a.pt0.x,u=a.pt1.x,p=A.min(l,u),c=a.pt0.y,h=a.pt1.y,d=A.min(c,h),f=a.pt0.x,_=a.pt1.x,m=A.max(f,_),$=a.pt0.y,y=a.pt1.y,v=A.max($,y);this.min.x<=m&&this.max.x>=p&&this.min.y<=v&&this.max.y>=d&&this.isEdgeIntersect_0(this.edge.pt0,this.edge.pt1,a.pt0,a.pt1)&&this.result.add_11rb$(a)}},_k.prototype.isEdgeIntersect_0=function(t,e,i,n){var o,r=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(o=LN.FUZZY_EQ_F,!(A.abs(r)<=o)){var s=t.x*e.y-t.y*e.x,a=i.x*n.y-i.y*n.x,l=(s*(i.x-n.x)-a*(t.x-e.x))/r,u=(s*(i.y-n.y)-a*(t.y-e.y))/r,p=l-t.x,c=u-t.y,h=e.x-t.x,d=e.y-t.y,f=l-i.x,_=u-i.y,m=n.x-i.x,$=n.y-i.y;return p*p+c*c<h*h+d*d&&f*f+_*_<m*m+$*$&&p*h+c*d>0&&f*m+_*$>0}return!1},_k.$metadata$={kind:$,simpleName:"EdgeIntersectTraverser",interfaces:[nS]},ak.$metadata$={kind:y,simpleName:"PolyUtil",interfaces:[]};var mk=null;function $k(){return null===mk&&new ak,mk}function yk(){}function vk(){this.shapes_h2hckg$_0=M()}function gk(){}function bk(t){gk.call(this),this.isClosed=t,this.positions_4d3v1q$_0=M(),this.normals=M(),this.texCoords=M(),this.color=null,this.prevIndices_0=M(),this.vertIndices_0=M()}function xk(){gk.call(this),this.shapes_tpeukb$_0=M()}function wk(){}function zk(t,e,i,n){void 0===i&&(i=2048),void 0===n&&(n=t);var o,r=n,a=new ia,l=i;a.name="SimpleShadowMap",a.setSize_vux9f0$(l,l),a.setDepthTexture_6taknv$(!0),a.clearColorTexture(),fs.call(this,r,new ea(a)),this.scene=t,this.lightIndex=e,this.lightViewProjMat=new bn,this.optimizeForDirectionalLight=!1,this.sceneCam=this.scene.camera,this.clipNear=1,this.clipFar=100,this.shadowBounds=null,this.nearSceneCamPlane_0=new Pd,this.farSceneCamPlane_0=new Pd,this.shadowCamBounds_0=new q$,this.tmpVec_0=jo(),this.isUpdateDrawNode=!1,this.scene.addOffscreenPass_m1c2kf$(this),this.drawQueue.meshFilter=kk,this.onBeforeCollectDrawCommands.add_11rb$((o=this,function(t){if(o.lightIndex<o.scene.lighting.lights.size){var e=o.scene.lighting.lights.get_za3lpa$(o.lightIndex);o.setupCamera_0(e),o.camera.updateCamera_fd1mc0$(t,o.viewport),t.depthBiasMatrix.mul_u47j3u$(o.camera.viewProj,o.lightViewProjMat)}return s}))}function kk(t){return t.isCastingShadow}function Sk(t,e,i,n,o,r){void 0===i&&(i=100),void 0===n&&(n=3),void 0===o&&(o=2048),void 0===r&&(r=t),this.lightIndex=e,this.maxRange=i,this.numCascades=n;var a,l=I(this.numCascades);a=l.length-1|0;for(var u=0;u<=a;u++){var p=A.pow(u,2),c=this.numCascades,h=p/A.pow(c,2),d=u+1|0,f=A.pow(d,2),_=this.numCascades,m=f/A.pow(_,2);l[u]=new Ck(h,m)}this.mapRanges=l;var $,y,v=I(this.numCascades);$=v.length-1|0;for(var g=0;g<=$;g++){var b=new zk(t,this.lightIndex,o,r);b.optimizeForDirectionalLight=!0,v[g]=b}if(this.cascades=v,this.viewSpaceRanges=new Float32Array(this.numCascades),this.numCascades>8)throw cn("Too many shadow cascades: "+this.numCascades+" (maximum is 8)");this.cascades[0].onBeforeCollectDrawCommands.add_11rb$((y=this,function(t){var e;e=y.numCascades;for(var i=0;i<e;i++){var n=y.mapRanges[i].near*y.maxRange,o=y.mapRanges[i].far*y.maxRange,r=2*A.sqrt(o);y.cascades[i].clipNear=n,y.cascades[i].clipFar=o+r,y.viewSpaceRanges[i]=-o}return s}))}function Ck(t,e){this.near=t,this.far=e}function Nk(t,i,n){void 0===n&&(n=20),Zk.call(this,i),this.root_7kvd7y$_0=null;for(var o,r=t.size,s=Kt("get",function(t,e){return t.get_za3lpa$(e)}.bind(null,t)),a=w(r),l=0;l<r;l++)a.add_11rb$(s(l));this.items_0=a,this.cmpX_0=(o=i,function(t,i){return e.compareTo(o.getMinX_trkh7z$(t),o.getMinX_trkh7z$(i))}),this.cmpY_0=function(t){return function(i,n){return e.compareTo(t.getMinY_trkh7z$(i),t.getMinY_trkh7z$(n))}}(i),this.cmpZ_0=function(t){return function(i,n){return e.compareTo(t.getMinZ_trkh7z$(i),t.getMinZ_trkh7z$(n))}}(i),this.root_7kvd7y$_0=new Ek(this,R(t),0,n)}function Ek(t,e,i,n){var o,r,s,a;this.$outer=t,Jk.call(this,this.$outer,i),this.nodeRange_cforgo$_0=e,this.children_ay15fy$_0=M(),this.size_ugdyxc$_0=0;var l=jo();this.size_ugdyxc$_0=this.nodeRange.last-this.nodeRange.first+1|0;var u=this.bounds;this.$outer;var p=u.isBatchUpdate;u.isBatchUpdate=!0;var c,h,d,f,_=this.$outer;h=(c=this.nodeRange).first,d=c.last,f=c.step;for(var m=h;m<=d;m+=f){var $=this.items.get_za3lpa$(m);u.add_czzhiu$(_.itemAdapter.getMin_hm1yd1$($,l)),u.add_czzhiu$(_.itemAdapter.getMax_hm1yd1$($,l))}if(u.isBatchUpdate=p,(this.nodeRange.last-this.nodeRange.first|0)>n){var y=this.$outer.cmpX_0;this.bounds.size.y>this.bounds.size.x&&this.bounds.size.y>this.bounds.size.z?y=this.$outer.cmpY_0:this.bounds.size.z>this.bounds.size.x&&this.bounds.size.z>this.bounds.size.y&&(y=this.$outer.cmpZ_0);var v=this.nodeRange.first+((this.nodeRange.last-this.nodeRange.first|0)/2|0)|0;Kn(this.$outer.items_0,this.nodeRange,v,y),this.children.add_11rb$(new Ek(this.$outer,new Ft(this.nodeRange.first,v),i+1|0,n)),this.children.add_11rb$(new Ek(this.$outer,new Ft(v+1|0,this.nodeRange.last),i+1|0,n))}else{r=(o=this.nodeRange).first,s=o.last,a=o.step;for(var g=r;g<=s;g+=a)this.$outer.itemAdapter.setNode_kvimhn$(this.items.get_za3lpa$(g),this)}}function Tk(t,e){return void 0===e&&(e=10),new Nk(t,Fk(),e)}function Pk(t,e){return void 0===e&&(e=10),new Nk(t,Lk(),e)}function Ok(){}function Mk(){jk=this}yk.$metadata$={kind:st,simpleName:"ShapeContainer",interfaces:[]},Object.defineProperty(vk.prototype,"shapes",{configurable:!0,get:function(){return this.shapes_h2hckg$_0}}),vk.prototype.sample_l28n3f$=function(t,e,i){var n;for(n=this.shapes.iterator();n.hasNext();)n.next().sample_l28n3f$(t,e,i)},vk.prototype.fillTop_84rojv$=function(t){var e;for(e=this.shapes.iterator();e.hasNext();)e.next().fillTop_84rojv$(t)},vk.prototype.fillBottom_84rojv$=function(t){var e;for(e=this.shapes.iterator();e.hasNext();)e.next().fillBottom_84rojv$(t)},vk.$metadata$={kind:$,simpleName:"Profile",interfaces:[yk]},gk.$metadata$={kind:$,simpleName:"Shape",interfaces:[]},Object.defineProperty(bk.prototype,"positions",{configurable:!0,get:function(){return this.positions_4d3v1q$_0}}),Object.defineProperty(bk.prototype,"sampledVertIndices",{configurable:!0,get:function(){return this.vertIndices_0}}),Object.defineProperty(bk.prototype,"nVerts",{configurable:!0,get:function(){return this.positions.size}}),bk.prototype.getNormal_za3lpa$=function(t){return t<this.normals.size?this.normals.get_za3lpa$(t):To().ZERO},bk.prototype.getTexCoord_za3lpa$=function(t){return t<this.texCoords.size?this.texCoords.get_za3lpa$(t):ao().ZERO},bk.prototype.xy_dleff0$=function(t,e){var i=this.positions,n=new Mo(t,e,0);i.add_11rb$(n)},bk.prototype.xz_dleff0$=function(t,e){var i=this.positions,n=new Mo(t,0,e);i.add_11rb$(n)},bk.prototype.uv_dleff0$=function(t,e){var i=this.texCoords,n=new uo(t,e);i.add_11rb$(n)},bk.prototype.normal_y2kzbl$=function(t,e,i){var n=this.normals,o=new Mo(t,e,i);n.add_11rb$(o)},bk.prototype.setTexCoordsX_mx4ult$=function(t){var e;for(e=this.texCoords.iterator();e.hasNext();)e.next().x=t},bk.prototype.setTexCoordsY_mx4ult$=function(t){var e;for(e=this.texCoords.iterator();e.hasNext();)e.next().y=t},bk.prototype.sample_l28n3f$=function(t,e,i){var n,o,r;this.prevIndices_0.clear(),this.prevIndices_0.addAll_brywnq$(this.vertIndices_0),this.vertIndices_0.clear(),null!=(n=this.color)&&(t.color=n);var s=0;for(o=this.positions.iterator();o.hasNext();){var a=o.next(),l=J((s=(r=s)+1|0,r)),u=this.vertIndices_0,p=t.vertex_n440gp$(a,this.getNormal_za3lpa$(l),this.getTexCoord_za3lpa$(l));u.add_11rb$(p)}e&&this.connect_xe2xvh$(t,this.prevIndices_0,i)},bk.prototype.connect_xe2xvh$=function(t,e,i){var n;if(!e.isEmpty()){n=e.size;for(var o=1;o<n;o++)i?(t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(o-1|0),this.vertIndices_0.get_za3lpa$(o),e.get_za3lpa$(o)),t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(o-1|0),this.vertIndices_0.get_za3lpa$(o-1|0),this.vertIndices_0.get_za3lpa$(o))):(t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(o-1|0),e.get_za3lpa$(o),this.vertIndices_0.get_za3lpa$(o)),t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(o-1|0),this.vertIndices_0.get_za3lpa$(o),this.vertIndices_0.get_za3lpa$(o-1|0)));var r=this.isClosed;r&&(r=!this.prevIndices_0.isEmpty()),r&&(i?(t.geometry.addTriIndices_qt1dr2$(F(e),q(this.vertIndices_0),q(e)),t.geometry.addTriIndices_qt1dr2$(F(e),F(this.vertIndices_0),q(this.vertIndices_0))):(t.geometry.addTriIndices_qt1dr2$(F(e),q(e),q(this.vertIndices_0)),t.geometry.addTriIndices_qt1dr2$(F(e),q(this.vertIndices_0),F(this.vertIndices_0))))}},bk.prototype.fillTop_84rojv$=function(t){var e,i=$k().fillPolygon_3v8xej$(this.positions);for(e=De(Y(i.indices),3).iterator();e.hasNext();){var n=e.next(),o=i.indices[n],r=i.indices[n+1|0],s=i.indices[n+2|0];t.geometry.addTriIndices_qt1dr2$(this.vertIndices_0.get_za3lpa$(o),this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(s))}},bk.prototype.fillBottom_84rojv$=function(t){var e,i=$k().fillPolygon_3v8xej$(this.positions);for(e=De(Y(i.indices),3).iterator();e.hasNext();){var n=e.next(),o=i.indices[n],r=i.indices[n+1|0],s=i.indices[n+2|0];t.geometry.addTriIndices_qt1dr2$(this.vertIndices_0.get_za3lpa$(o),this.vertIndices_0.get_za3lpa$(s),this.vertIndices_0.get_za3lpa$(r))}},bk.$metadata$={kind:$,simpleName:"SimpleShape",interfaces:[gk]},Object.defineProperty(xk.prototype,"shapes",{configurable:!0,get:function(){return this.shapes_tpeukb$_0}}),Object.defineProperty(xk.prototype,"positions",{configurable:!0,get:function(){var t,e=this.shapes,i=M();for(t=e.iterator();t.hasNext();){var n=t.next().positions;xt(i,n)}return i}}),Object.defineProperty(xk.prototype,"sampledVertIndices",{configurable:!0,get:function(){var t,e=this.shapes,i=M();for(t=e.iterator();t.hasNext();){var n=t.next().sampledVertIndices;xt(i,n)}return i}}),xk.prototype.sample_l28n3f$=function(t,e,i){var n;for(n=this.shapes.iterator();n.hasNext();)n.next().sample_l28n3f$(t,e,i)},xk.prototype.fillTop_84rojv$=function(t){var e,i=this.sampledVertIndices,n=$k().fillPolygon_3v8xej$(this.positions);for(e=De(Y(n.indices),3).iterator();e.hasNext();){var o=e.next(),r=n.indices[o],s=n.indices[o+1|0],a=n.indices[o+2|0];t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(r),i.get_za3lpa$(s),i.get_za3lpa$(a))}},xk.prototype.fillBottom_84rojv$=function(t){var e,i=this.sampledVertIndices,n=$k().fillPolygon_3v8xej$(this.positions);for(e=De(Y(n.indices),3).iterator();e.hasNext();){var o=e.next(),r=n.indices[o],s=n.indices[o+1|0],a=n.indices[o+2|0];t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(r),i.get_za3lpa$(a),i.get_za3lpa$(s))}},xk.$metadata$={kind:$,simpleName:"MultiShape",interfaces:[yk,gk]},wk.$metadata$={kind:st,simpleName:"ShadowMap",interfaces:[]},Object.defineProperty(zk.prototype,"isShadowMapEnabled",{configurable:!0,get:function(){return this.isEnabled},set:function(t){this.isEnabled=t}}),zk.prototype.dispose_aemszp$=function(t){this.scene.removeOffscreenPass_m1c2kf$(this),fs.prototype.dispose_aemszp$.call(this,t)},zk.prototype.setupSampler_s70oj3$=function(t){null!=t&&(t.texture=this.depthTexture)},zk.prototype.setupCamera_0=function(t){switch(t.type.name){case"DIRECTIONAL":this.setupDirectionalLightCamera_0(t);break;case"SPOT":this.setupSpotLightCamera_0(t);break;case"POINT":throw new He}},zk.prototype.setupSpotLightCamera_0=function(t){var i=this.camera;e.isType(i,Ed)||((i=new Ed).projCorrectionMode=Cd(),this.camera=i),i.position.set_czzhiu$(t.position),i.lookAt.set_czzhiu$(t.position).add_czzhiu$(t.direction),i.fovY=t.spotAngle,i.clipNear=this.clipNear,i.clipFar=this.clipFar},zk.prototype.setupDirectionalLightCamera_0=function(t){var i=this.camera;e.isType(i,Nd)||((i=new Nd).projCorrectionMode=Cd(),this.camera=i),i.position.set_czzhiu$(To().ZERO),i.lookAt.set_czzhiu$(t.direction);var n=this.shadowBounds;null!=n?(this.shadowCamBounds_0.clear(),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.min.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.min.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.max.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.max.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.min.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.min.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.max.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.max.y,n.max.z),1))):(this.sceneCam.computeFrustumPlane_jwr40o$(this.clipNear,this.nearSceneCamPlane_0),this.sceneCam.computeFrustumPlane_jwr40o$(this.clipFar,this.farSceneCamPlane_0),this.transform_0(i.view,this.nearSceneCamPlane_0),this.transform_0(i.view,this.farSceneCamPlane_0),this.setPlanes_0(this.shadowCamBounds_0,this.nearSceneCamPlane_0,this.farSceneCamPlane_0)),i.left=this.shadowCamBounds_0.min.x,i.right=this.shadowCamBounds_0.max.x,i.bottom=this.shadowCamBounds_0.min.y,i.top=this.shadowCamBounds_0.max.y,i.near=-this.shadowCamBounds_0.max.z-20,i.far=-this.shadowCamBounds_0.min.z},zk.prototype.transform_0=function(t,e){t.transform_w1lst9$(e.upperLeft),t.transform_w1lst9$(e.upperRight),t.transform_w1lst9$(e.lowerLeft),t.transform_w1lst9$(e.lowerRight)},zk.prototype.setPlanes_0=function(t,e,i){var n=t.isBatchUpdate;t.isBatchUpdate=!0,t.clear(),t.add_czzhiu$(e.upperLeft),t.add_czzhiu$(e.upperRight),t.add_czzhiu$(e.lowerLeft),t.add_czzhiu$(e.lowerRight),t.add_czzhiu$(i.upperLeft),t.add_czzhiu$(i.upperRight),t.add_czzhiu$(i.lowerLeft),t.add_czzhiu$(i.lowerRight),t.isBatchUpdate=n},zk.$metadata$={kind:$,simpleName:"SimpleShadowMap",interfaces:[wk,fs]},Object.defineProperty(Sk.prototype,"drawNode",{configurable:!0,get:function(){return this.cascades[0].drawNode},set:function(t){var e,i=this.cascades;for(e=0;e!==i.length;++e)i[e].drawNode=t}}),Object.defineProperty(Sk.prototype,"isShadowMapEnabled",{configurable:!0,get:function(){return this.cascades[0].isEnabled},set:function(t){var e,i=this.cascades;for(e=0;e!==i.length;++e)i[e].isEnabled=t}}),Sk.prototype.setMapRanges_8cqhcw$=function(t){var e,i=0,n=this.mapRanges.length;e=A.min(t.length,n);for(var o=0;o<e;o++)this.mapRanges[o].near=i,this.mapRanges[o].far=t[o],i=t[o]},Sk.prototype.setupSampler_s70oj3$=function(t){if(null!=t){var e,i,n=this.cascades,o=0;for(e=0;e!==n.length;++e){var r=n[e];t.textures[(i=o,o=i+1|0,i)]=r.depthTexture}}},Ck.prototype.toString=function(){return"["+this.near+".."+this.far+"]"},Ck.$metadata$={kind:$,simpleName:"MapRange",interfaces:[]},Sk.$metadata$={kind:$,simpleName:"CascadedShadowMap",interfaces:[wk]},Object.defineProperty(Nk.prototype,"root",{configurable:!0,get:function(){return this.root_7kvd7y$_0}}),Object.defineProperty(Nk.prototype,"size",{configurable:!0,get:function(){return this.items_0.size}}),Nk.prototype.contains_11rb$=function(t){return this.root.contains_uargzz$(t)},Nk.prototype.containsAll_brywnq$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next();if(!this.contains_11rb$(i))return!1}return!0},Nk.prototype.isEmpty=function(){return this.items_0.isEmpty()},Nk.prototype.iterator=function(){return this.items_0.iterator()},Object.defineProperty(Ek.prototype,"nodeRange",{get:function(){return this.nodeRange_cforgo$_0}}),Object.defineProperty(Ek.prototype,"children",{configurable:!0,get:function(){return this.children_ay15fy$_0}}),Object.defineProperty(Ek.prototype,"size",{configurable:!0,get:function(){return this.size_ugdyxc$_0}}),Object.defineProperty(Ek.prototype,"items",{configurable:!0,get:function(){return this.$outer.items_0}}),Ek.prototype.contains_uargzz$=function(t){var e,i,n,o;if(this.isLeaf){i=(e=this.nodeRange).first,n=e.last,o=e.step;for(var r=i;r<=n;r+=o)if(zt(this.items.get_za3lpa$(r),t))return!0;return!1}return this.children.get_za3lpa$(0).bounds.contains_y2kzbl$(this.$outer.itemAdapter.getMinX_trkh7z$(t),this.$outer.itemAdapter.getMinY_trkh7z$(t),this.$outer.itemAdapter.getMinZ_trkh7z$(t))?this.children.get_za3lpa$(0).contains_uargzz$(t):!!this.children.get_za3lpa$(1).bounds.contains_y2kzbl$(this.$outer.itemAdapter.getMinX_trkh7z$(t),this.$outer.itemAdapter.getMinY_trkh7z$(t),this.$outer.itemAdapter.getMinZ_trkh7z$(t))&&this.children.get_za3lpa$(1).contains_uargzz$(t)},Ek.$metadata$={kind:$,simpleName:"KdNode",interfaces:[Jk]},Nk.$metadata$={kind:$,simpleName:"KdTree",interfaces:[Zk]},Ok.prototype.getCenterX_trkh7z$=function(t){return.5*(this.getMinX_trkh7z$(t)+this.getMaxX_trkh7z$(t))},Ok.prototype.getCenterY_trkh7z$=function(t){return.5*(this.getMinY_trkh7z$(t)+this.getMaxY_trkh7z$(t))},Ok.prototype.getCenterZ_trkh7z$=function(t){return.5*(this.getMinZ_trkh7z$(t)+this.getMaxZ_trkh7z$(t))},Ok.prototype.getSzX_trkh7z$=function(t){return this.getMaxX_trkh7z$(t)-this.getMinX_trkh7z$(t)},Ok.prototype.getSzY_trkh7z$=function(t){return this.getMaxY_trkh7z$(t)-this.getMinY_trkh7z$(t)},Ok.prototype.getSzZ_trkh7z$=function(t){return this.getMaxZ_trkh7z$(t)-this.getMinZ_trkh7z$(t)},Ok.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getMinX_trkh7z$(t),this.getMinY_trkh7z$(t),this.getMinZ_trkh7z$(t))},Ok.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getMaxX_trkh7z$(t),this.getMaxY_trkh7z$(t),this.getMaxZ_trkh7z$(t))},Ok.prototype.getCenter_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getCenterX_trkh7z$(t),this.getCenterY_trkh7z$(t),this.getCenterZ_trkh7z$(t))},Ok.prototype.setNode_kvimhn$=function(t,e){},Ok.$metadata$={kind:st,simpleName:"ItemAdapter",interfaces:[]},Mk.prototype.getMinX_trkh7z$=function(t){return t.x},Mk.prototype.getMinY_trkh7z$=function(t){return t.y},Mk.prototype.getMinZ_trkh7z$=function(t){return t.z},Mk.prototype.getMaxX_trkh7z$=function(t){return t.x},Mk.prototype.getMaxY_trkh7z$=function(t){return t.y},Mk.prototype.getMaxZ_trkh7z$=function(t){return t.z},Mk.prototype.getCenterX_trkh7z$=function(t){return t.x},Mk.prototype.getCenterY_trkh7z$=function(t){return t.y},Mk.prototype.getCenterZ_trkh7z$=function(t){return t.z},Mk.prototype.getSzX_trkh7z$=function(t){return 0},Mk.prototype.getSzY_trkh7z$=function(t){return 0},Mk.prototype.getSzZ_trkh7z$=function(t){return 0},Mk.prototype.getMin_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},Mk.prototype.getCenter_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},Mk.prototype.getMax_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},Mk.$metadata$={kind:y,simpleName:"Vec3fAdapter",interfaces:[Ok]};var jk=null;function Ak(){return null===jk&&new Mk,jk}function Ik(){Rk=this}Ik.prototype.getMinX_trkh7z$=function(t){return t.minX},Ik.prototype.getMinY_trkh7z$=function(t){return t.minY},Ik.prototype.getMinZ_trkh7z$=function(t){return t.minZ},Ik.prototype.getMaxX_trkh7z$=function(t){return t.maxX},Ik.prototype.getMaxY_trkh7z$=function(t){return t.maxY},Ik.prototype.getMaxZ_trkh7z$=function(t){return t.maxZ},Ik.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.minX,t.minY,t.minZ)},Ik.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.maxX,t.maxY,t.maxZ)},Ik.$metadata$={kind:y,simpleName:"EdgeAdapter",interfaces:[Ok]};var Rk=null;function Lk(){return null===Rk&&new Ik,Rk}function Dk(){qk=this}Dk.prototype.getMinX_trkh7z$=function(t){return t.minX},Dk.prototype.getMinY_trkh7z$=function(t){return t.minY},Dk.prototype.getMinZ_trkh7z$=function(t){return t.minZ},Dk.prototype.getMaxX_trkh7z$=function(t){return t.maxX},Dk.prototype.getMaxY_trkh7z$=function(t){return t.maxY},Dk.prototype.getMaxZ_trkh7z$=function(t){return t.maxZ},Dk.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.minX,t.minY,t.minZ)},Dk.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.maxX,t.maxY,t.maxZ)},Dk.$metadata$={kind:y,simpleName:"TriangleAdapter",interfaces:[Ok]};var qk=null;function Fk(){return null===qk&&new Dk,qk}function Bk(t,e){Gk(),this.pt0=t,this.pt1=e,this.e=null,this.length=0,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.tmpVec_j9agx3$_0=jo(),this.tmpResult_bszuwa$_0=jo(),this.e=this.pt1.subtract_2gj7b4$(this.pt0,jo()).norm(),this.length=this.pt0.distance_czzhiu$(this.pt1);var i=this.pt0.x,n=this.pt1.x;this.minX=A.min(i,n);var o=this.pt0.y,r=this.pt1.y;this.minY=A.min(o,r);var s=this.pt0.z,a=this.pt1.z;this.minZ=A.min(s,a);var l=this.pt0.x,u=this.pt1.x;this.maxX=A.max(l,u);var p=this.pt0.y,c=this.pt1.y;this.maxY=A.max(p,c);var h=this.pt0.z,d=this.pt1.z;this.maxZ=A.max(h,d)}function Uk(){Vk=this}Bk.prototype.rayDistanceSqr_nvyeur$=function(t){return t.sqrDistanceToPoint_czzhiu$(this.nearestPointOnEdge_lplggz$(t,this.tmpResult_bszuwa$_0))},Bk.prototype.nearestPointOnEdge_lplggz$=function(t,e){var i,n=this.e.times_czzhiu$(t.direction),o=1-n*n;if(i=LN.FUZZY_EQ_F,A.abs(o)<=i)return e.set_czzhiu$(this.pt0.sqrDistance_czzhiu$(t.origin)<this.pt1.sqrDistance_czzhiu$(t.origin)?this.pt0:this.pt1);t.origin.subtract_2gj7b4$(this.pt0,this.tmpVec_j9agx3$_0);var r,s=(this.tmpVec_j9agx3$_0.times_czzhiu$(this.e)-this.tmpVec_j9agx3$_0.times_czzhiu$(t.direction)*n)/o;if(s>0){var a=this.e,l=this.length;r=a.scale_749b8l$(A.min(s,l),e).add_czzhiu$(this.pt0)}else r=e.set_czzhiu$(this.pt0);return r},Uk.prototype.getEdges_r7nl2o$=function(t){var e;if(t.primitiveType!==az())throw V("Supplied meshData must have primitiveType GL_LINES");var i=M();e=t.numIndices;for(var n=0;n<e;n+=2){var o=t.indices.get_za3lpa$(n),r=t.indices.get_za3lpa$(n+1|0),s=t.vertexIt;s.index=o;var a=Oo(s),l=t.vertexIt;l.index=r;var u=new Bk(a,Oo(l));i.add_11rb$(u)}return i},Uk.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Vk=null;function Gk(){return null===Vk&&new Uk,Vk}function Hk(t,e,i){Xk(),this.pt0=t,this.pt1=e,this.pt2=i,this.e1=null,this.e2=null,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.tmpS_4hszl1$_0=jo(),this.tmpP_4hszig$_0=jo(),this.tmpQ_4hszjb$_0=jo(),this.e1=this.pt1.subtract_2gj7b4$(this.pt0,jo()),this.e2=this.pt2.subtract_2gj7b4$(this.pt0,jo());var n=this.pt0.x,o=this.pt1.x,r=this.pt2.x;this.minX=A.min(n,o,r);var s=this.pt0.y,a=this.pt1.y,l=this.pt2.y;this.minY=A.min(s,a,l);var u=this.pt0.z,p=this.pt1.z,c=this.pt2.z;this.minZ=A.min(u,p,c);var h=this.pt0.x,d=this.pt1.x,f=this.pt2.x;this.maxX=A.max(h,d,f);var _=this.pt0.y,m=this.pt1.y,$=this.pt2.y;this.maxY=A.max(_,m,$);var y=this.pt0.z,v=this.pt1.z,g=this.pt2.z;this.maxZ=A.max(y,v,g)}function Wk(){Kk=this}Bk.$metadata$={kind:$,simpleName:"Edge",interfaces:[]},Hk.prototype.hitDistance_nvyeur$=function(t){t.origin.subtract_2gj7b4$(this.pt0,this.tmpS_4hszl1$_0),t.direction.cross_2gj7b4$(this.e2,this.tmpP_4hszig$_0),this.tmpS_4hszl1$_0.cross_2gj7b4$(this.e1,this.tmpQ_4hszjb$_0);var e=1/this.tmpP_4hszig$_0.times_czzhiu$(this.e1),i=e*this.tmpQ_4hszjb$_0.times_czzhiu$(this.e2),n=e*this.tmpP_4hszig$_0.times_czzhiu$(this.tmpS_4hszl1$_0),o=e*this.tmpQ_4hszjb$_0.times_czzhiu$(t.direction);return n>=0&&o>=0&&n+o<=1&&i>=0?i:nt.MAX_VALUE},Wk.prototype.getTriangles_r7nl2o$=function(t){var e,i=M();e=t.numIndices;for(var n=0;n<e;n+=3){var o=Yk(t,n);i.add_11rb$(o)}return i},Wk.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Kk=null;function Xk(){return null===Kk&&new Wk,Kk}function Yk(t,e,i){i=i||Object.create(Hk.prototype);var n=jo();t.vertexIt.index=t.indices.get_za3lpa$(e),n.set_czzhiu$(t.vertexIt.position);var o=jo();t.vertexIt.index=t.indices.get_za3lpa$(e+1|0),o.set_czzhiu$(t.vertexIt.position);var r=jo();if(t.vertexIt.index=t.indices.get_za3lpa$(e+2|0),r.set_czzhiu$(t.vertexIt.position),Hk.call(i,n,o,r),t.primitiveType!==uz())throw V("Supplied geometry data must have primitiveType TRIANGLES");return i}function Zk(t){this.itemAdapter=t}function Jk(t,e){this.$outer=t,this.depth=e,this.bounds=new q$,this.traversalOrder=0}Hk.$metadata$={kind:$,simpleName:"Triangle",interfaces:[]},Zk.prototype.drawNodeBounds_nl2my4$=function(t){this.root.drawNodeBounds_nl2my4$(t)},Object.defineProperty(Jk.prototype,"isLeaf",{configurable:!0,get:function(){return this.children.isEmpty()}}),Jk.prototype.drawNodeBounds_nl2my4$=function(t){var e,i=py().JET_MD.getColor_y2kzbl$(this.depth%6.7/6.7);t.addBoundingBox_j1pmtk$(this.bounds,i),e=this.children;for(var n=0;n!==e.size;++n)this.children.get_za3lpa$(n).drawNodeBounds_nl2my4$(t)},Jk.$metadata$={kind:$,simpleName:"Node",interfaces:[]},Zk.$metadata$={kind:$,simpleName:"SpatialTree",interfaces:[Ge]};var Qk=X((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var o=e;return t(o(i),o(n))}}}));function tS(){}function eS(){}function iS(){}function nS(){}function oS(){nS.call(this),this.center=jo(),this.pointDistance=new rS}function rS(){}function sS(){oS.call(this),this.result=M(),this.radius_z1vvhm$_0=1,this.radiusSqr=1}function aS(){var t;nS.call(this),this.ray=new io,this.nearest_75fjy0$_0=null,this.distance_vfh9yx$_0=0,this.distanceSqr_1nwg87$_0=nt.MAX_VALUE,this.rayDistance=new lS,this.childLists_3dbot1$_0=new dS((t=this,function(e){return t.rayDistance.nodeSqrDistanceToRay_m0emyn$(e,t.ray)}))}function lS(){}function uS(){aS.call(this),this.rayDistance=new pS}function pS(){}function cS(){aS.call(this),this.hitPoint=jo(),this.rayDistance=new hS}function hS(){}function dS(t){this.childDist=t,this.childListRecycler=new rk(_S),this.childComparator=new $t(Qk(mS))}function fS(t,e,i){this.$outer=t,this.dist=e,this.node=i}function _S(){return M()}function mS(t){return t.dist}function $S(){gS(),this.currentGesture_nrwzky$_0=new bS,this.activePointers_ajelte$_0=M(),this.tmpVec1_vwccvm$_0=po(),this.tmpVec2_vwccwh$_0=po(),this.startPositions=z(),this.screenDpi=96}function yS(){vS=this,this.INVALID=0,this.INDETERMINATE=-1,this.PINCH=1,this.TWO_FINGER_DRAG=2}tS.prototype.nodeSqrDistanceToPoint_fpn9fm$=function(t,e){return t.bounds.pointDistanceSqr_czzhiu$(e)},tS.prototype.itemSqrDistanceToPoint_xpaqv3$=function(t,e,i){var n=t.itemAdapter.getCenterX_trkh7z$(e)-i.x,o=t.itemAdapter.getCenterY_trkh7z$(e)-i.y,r=t.itemAdapter.getCenterZ_trkh7z$(e)-i.z;return n*n+o*o+r*r},tS.$metadata$={kind:st,simpleName:"PointDistance",interfaces:[]},iS.prototype.nodeSqrDistanceToRay_m0emyn$=function(t,e){return t.bounds.hitDistanceSqr_nvyeur$(e)},iS.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){return i.sqrDistanceToPoint_y2kzbl$(t.itemAdapter.getCenterX_trkh7z$(e),t.itemAdapter.getCenterY_trkh7z$(e),t.itemAdapter.getCenterZ_trkh7z$(e))},iS.$metadata$={kind:st,simpleName:"RayDistance",interfaces:[]},nS.prototype.traverse_7efza$=function(t){this.traverseNode_4w85ke$(t,t.root)},nS.prototype.traverseNode_4w85ke$=function(t,e){e.isLeaf?this.traverseLeaf_4w85ke$(t,e):this.traverseChildren_4w85ke$(t,e)},nS.$metadata$={kind:$,simpleName:"SpatialTreeTraverser",interfaces:[]},oS.prototype.setup_czzhiu$=function(t){this.center.set_czzhiu$(t)},rS.$metadata$={kind:$,interfaces:[tS]},oS.$metadata$={kind:$,simpleName:"CenterPointTraverser",interfaces:[nS]},Object.defineProperty(sS.prototype,"radius",{configurable:!0,get:function(){return this.radius_z1vvhm$_0},set:function(t){this.radius_z1vvhm$_0=t}}),sS.prototype.setup_2qa7tb$=function(t,e){return oS.prototype.setup_czzhiu$.call(this,t),this.radius=e,this.radiusSqr=e*e,this},sS.prototype.traverse_7efza$=function(t){this.result.clear(),oS.prototype.traverse_7efza$.call(this,t)},sS.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var o=e.children.get_za3lpa$(n);this.pointDistance.nodeSqrDistanceToPoint_fpn9fm$(o,this.center)<this.radiusSqr&&this.traverseNode_4w85ke$(t,o)}},sS.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,o,r;n=(i=e.nodeRange).first,o=i.last,r=i.step;for(var s=n;s<=o;s+=r){var a=e.items.get_za3lpa$(s);this.pointDistance.itemSqrDistanceToPoint_xpaqv3$(t,a,this.center)<this.radiusSqr&&this.result.add_11rb$(a)}},sS.$metadata$={kind:$,simpleName:"InRadiusTraverser",interfaces:[oS]},Object.defineProperty(aS.prototype,"nearest",{configurable:!0,get:function(){return this.nearest_75fjy0$_0},set:function(t){this.nearest_75fjy0$_0=t}}),Object.defineProperty(aS.prototype,"distance",{configurable:!0,get:function(){return this.distance_vfh9yx$_0},set:function(t){this.distance_vfh9yx$_0=t}}),Object.defineProperty(aS.prototype,"distanceSqr",{configurable:!0,get:function(){return this.distanceSqr_1nwg87$_0},set:function(t){this.distanceSqr_1nwg87$_0=t}}),aS.prototype.setup_nvyeur$=function(t){return this.ray.set_nvyeur$(t),this.nearest=null,this.distanceSqr=nt.MAX_VALUE,this},aS.prototype.traverse_7efza$=function(t){var e;if(nS.prototype.traverse_7efza$.call(this,t),this.distanceSqr!==nt.MAX_VALUE){var i=this.distanceSqr;e=A.sqrt(i)}else e=nt.MAX_VALUE;this.distance=e},aS.prototype.traverseChildren_4w85ke$=function(t,e){var i,n,o,r=this.childLists_3dbot1$_0,s=e.children.size,a=r.childListRecycler,l=a.get();if(l.size!==s)if(l.size<s){i=s-l.size|0;for(var u=1;u<=i;u++){var p=new fS(r,0,null);l.add_11rb$(p)}}else for(;l.size>s;)l.removeAt_za3lpa$(bt(l));n=e.children;for(var c=0;c!==n.size;++c)l.get_za3lpa$(c).setChildNode_wy56ps$(e.children.get_za3lpa$(c));this.childLists_3dbot1$_0.sortByDistance_pjnhek$(l),o=e.children;for(var h=0;h!==o.size;++h){var d=l.get_za3lpa$(h);if(!(d.dist<this.distanceSqr))break;this.traverseNode_4w85ke$(t,x(d.node))}a.recycle_trkh7z$(l)},aS.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,o,r;n=(i=e.nodeRange).first,o=i.last,r=i.step;for(var s=n;s<=o;s+=r){var a=e.items.get_za3lpa$(s),l=this.rayDistance.itemSqrDistanceToRay_bo5c3m$(t,a,this.ray);l<this.distanceSqr&&(this.nearest=a,this.distanceSqr=l)}},lS.$metadata$={kind:$,interfaces:[iS]},aS.$metadata$={kind:$,simpleName:"NearestToRayTraverser",interfaces:[nS]},pS.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){return e.rayDistanceSqr_nvyeur$(i)},pS.$metadata$={kind:$,interfaces:[iS]},uS.$metadata$={kind:$,simpleName:"NearestEdgeToRayTraverser",interfaces:[aS]},Object.defineProperty(cS.prototype,"isHit",{configurable:!0,get:function(){return null!=this.nearest}}),cS.prototype.setup_nvyeur$=function(t){return this.hitPoint.set_czzhiu$(To().ZERO),aS.prototype.setup_nvyeur$.call(this,t),this},cS.prototype.traverse_7efza$=function(t){aS.prototype.traverse_7efza$.call(this,t),this.isHit&&this.hitPoint.set_czzhiu$(this.ray.direction).scale_mx4ult$(this.distance).add_czzhiu$(this.ray.origin)},hS.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){var n=e.hitDistance_nvyeur$(i);return n<nt.MAX_VALUE?n*n:nt.MAX_VALUE},hS.$metadata$={kind:$,interfaces:[iS]},cS.$metadata$={kind:$,simpleName:"TriangleHitTraverser",interfaces:[aS]},dS.prototype.use_swptr5$=K("kool-kool-core.de.fabmax.kool.util.spatial.ChildNodesWithDistance.use_swptr5$",X((function(){var i=t.de.fabmax.kool.util.spatial.ChildNodesWithDistance.Child,n=e.kotlin.collections.get_lastIndex_55thoc$;return function(t,e){var o,r=this.childListRecycler,s=r.get();if(s.size!==t)if(s.size<t){o=t-s.size|0;for(var a=1;a<=o;a++){var l=new i(this,0,null);s.add_11rb$(l)}}else for(;s.size>t;)s.removeAt_za3lpa$(n(s));e(s),r.recycle_trkh7z$(s)}}))),dS.prototype.sortByDistance_pjnhek$=function(t){mt(t,this.childComparator)},fS.prototype.setChildNode_wy56ps$=function(t){this.node=t,this.dist=this.$outer.childDist(t)},fS.$metadata$={kind:$,simpleName:"Child",interfaces:[]},dS.$metadata$={kind:$,simpleName:"ChildNodesWithDistance",interfaces:[]},Object.defineProperty($S.prototype,"currentGesture",{configurable:!0,get:function(){return this.currentGesture_nrwzky$_0},set:function(t){this.currentGesture_nrwzky$_0=t}}),$S.prototype.evaluate_19cf9$=function(t,e){if(this.screenDpi=e.screenDpi,t.getActivePointers_j71cmr$(this.activePointers_ajelte$_0),this.activePointers_ajelte$_0.size>1)switch(this.currentGesture.type){case 0:this.onGestureInit_mcn869$(this.activePointers_ajelte$_0);break;case-1:this.onDetermineGesture_mcn869$(this.activePointers_ajelte$_0);break;case 1:case 2:this.handleGesture_mcn869$(this.activePointers_ajelte$_0)}else this.currentGesture.type=0,this.startPositions.clear()},$S.prototype.onGestureInit_mcn869$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next(),n=this.startPositions,o=i.id,r=new oo(i.x,i.y);n.put_xwzc9p$(o,r)}this.currentGesture.type=-1},$S.prototype.onDetermineGesture_mcn869$=function(t){var e;We(this.startPositions.keys,(e=t,function(t){var i,n=e;t:do{var o;for(o=n.iterator();o.hasNext();){var r=o.next();if(r.id===t){i=r;break t}}i=null}while(0);return null==i}));var i,n,o=M();for(i=t.iterator();i.hasNext();){var r=i.next();this.startPositions.containsKey_11rb$(r.id)||o.add_11rb$(r)}for(n=o.iterator();n.hasNext();){var s=n.next(),a=this.startPositions,l=s.id,u=new oo(s.x,s.y);a.put_xwzc9p$(l,u)}this.isPinch_mcn869$(t)?this.currentGesture.type=1:this.isTwoFingerDrag_mcn869$(t)&&(this.currentGesture.type=2)},$S.prototype.isPinch_mcn869$=function(t){return 2===t.size&&(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.tmpVec1_vwccvm$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec2_vwccwh$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec1_vwccvm$_0.length()>5&&this.tmpVec2_vwccwh$_0.length()>5&&this.tmpVec1_vwccvm$_0.times_czzhjp$(this.tmpVec2_vwccwh$_0)<0)&&(this.tmpVec1_vwccvm$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.currentGesture.init_4s1jvi$(1,this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),this.handleGesture_mcn869$(t),!0)},$S.prototype.isTwoFingerDrag_mcn869$=function(t){return 2===t.size&&(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.tmpVec1_vwccvm$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec2_vwccwh$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec1_vwccvm$_0.length()>5&&this.tmpVec2_vwccwh$_0.length()>5&&this.tmpVec1_vwccvm$_0.times_czzhjp$(this.tmpVec2_vwccwh$_0)>0)&&(this.tmpVec1_vwccvm$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.currentGesture.init_4s1jvi$(2,this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),this.handleGesture_mcn869$(t),!0)},$S.prototype.handleGesture_mcn869$=function(t){2===t.size?(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y),this.currentGesture.update_enjys2$(this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),t.get_za3lpa$(0).consume_za3lpa$(),t.get_za3lpa$(1).consume_za3lpa$()):this.currentGesture.type=0},yS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vS=null;function gS(){return null===vS&&new yS,vS}function bS(){this.centerStart=po(),this.centerCurrent=po(),this.centerShift=po(),this.dCenter=po(),this.pinchAmountStart=0,this.pinchAmountCurrent=0,this.dPinchAmount=0,this.type=0,this.numUpdates=0}function xS(){SS(),this.cmp_ta02bd$_0=CS,this.root_g0oxgl$_0=null,this.size_g153xi$_0=0}function wS(t,e,i,n){this.$outer=t,this.parent=n,this.key_qa5ejk$_0=e,this.value_owqnua$_0=i,this.left=null,this.right=null,this.color=SS().BLACK_0}function zS(){kS=this,this.BLACK_0=!1,this.RED_0=!0}Object.defineProperty(bS.prototype,"pinchAmountRel",{configurable:!0,get:function(){return(this.pinchAmountCurrent-this.pinchAmountStart)/this.pinchAmountStart+1}}),bS.prototype.init_4s1jvi$=function(t,e,i,n){this.type=t,this.centerStart.set_czzhjp$(e).add_czzhjp$(i).scale_mx4ult$(.5),this.centerCurrent.set_czzhjp$(this.centerStart),this.centerShift.set_czzhjp$(ao().ZERO),this.dCenter.set_czzhjp$(ao().ZERO),this.pinchAmountStart=96*e.distance_czzhjp$(i)/n,this.pinchAmountCurrent=this.pinchAmountStart,this.dPinchAmount=0,this.numUpdates=0},bS.prototype.update_enjys2$=function(t,e,i){this.dCenter.set_czzhjp$(t).add_czzhjp$(e).scale_mx4ult$(.5).subtract_czzhjp$(this.centerCurrent),this.centerCurrent.set_czzhjp$(t).add_czzhjp$(e).scale_mx4ult$(.5),this.centerShift.set_czzhjp$(this.centerCurrent).subtract_czzhjp$(this.centerStart);var n=96*t.distance_czzhjp$(e)/i;this.dPinchAmount=n-this.pinchAmountCurrent,this.pinchAmountCurrent=n,this.numUpdates=this.numUpdates+1|0},bS.$metadata$={kind:$,simpleName:"Gesture",interfaces:[]},$S.$metadata$={kind:$,simpleName:"TouchGestureEvaluator",interfaces:[]},Object.defineProperty(xS.prototype,"size",{configurable:!0,get:function(){return this.size_g153xi$_0},set:function(t){this.size_g153xi$_0=t}}),xS.prototype.clear=function(){this.root_g0oxgl$_0=null,this.size=0},xS.prototype.isEmpty=function(){return 0===this.size},xS.prototype.firstEntry=function(){var t=this.root_g0oxgl$_0;if(null!=t)for(;null!=(null!=t?t.left:null);)t=x(t.left);if(null==t)throw ht();return t},xS.prototype.firstValue=function(){return this.firstEntry().value},xS.prototype.firstKey=function(){return this.firstEntry().key},xS.prototype.lastEntry=function(){var t=this.root_g0oxgl$_0;if(null!=t)for(;null!=(null!=t?t.right:null);)t=x(t.right);if(null==t)throw ht();return t},xS.prototype.lastValue=function(){return this.lastEntry().value},xS.prototype.lastKey=function(){return this.lastEntry().key},xS.prototype.ceilingEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;){var i=this.cmp_ta02bd$_0(t,e.key);if(i<0){if(null==e.left)return e;e=e.left}else{if(!(i>0))return e;if(null==e.right){for(var n=e.parent,o=e;null!=n&&o===n.right;)o=n,n=n.parent;return n}e=e.right}}return null},xS.prototype.ceilingKey_trkh7z$=function(t){var e;return null!=(e=this.ceilingEntry_trkh7z$(t))?e.key:null},xS.prototype.ceilingValue_trkh7z$=function(t){var e;return null!=(e=this.ceilingEntry_trkh7z$(t))?e.value:null},xS.prototype.floorEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;){var i=this.cmp_ta02bd$_0(t,e.key);if(i>0){if(null==e.right)return e;e=e.right}else{if(!(i<0))return e;if(null==e.left){for(var n=e.parent,o=e;null!=n&&o===n.left;)o=n,n=n.parent;return n}e=e.left}}return null},xS.prototype.floorKey_trkh7z$=function(t){var e;return null!=(e=this.floorEntry_trkh7z$(t))?e.key:null},xS.prototype.floorValue_trkh7z$=function(t){var e;return null!=(e=this.floorEntry_trkh7z$(t))?e.value:null},xS.prototype.higherEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;)if(this.cmp_ta02bd$_0(t,e.key)<0){if(null==e.left)return e;e=e.left}else{if(null==e.right){for(var i=e.parent,n=e;null!=i&&n===i.right;)n=i,i=i.parent;return i}e=e.right}return null},xS.prototype.higherKey_trkh7z$=function(t){var e;return null!=(e=this.higherEntry_trkh7z$(t))?e.key:null},xS.prototype.higherValue_trkh7z$=function(t){var e;return null!=(e=this.higherEntry_trkh7z$(t))?e.value:null},xS.prototype.lowerEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;)if(this.cmp_ta02bd$_0(t,e.key)>0){if(null==e.right)return e;e=e.right}else{if(null==e.left){for(var i=e.parent,n=e;null!=i&&n===i.left;)n=i,i=i.parent;return i}e=e.left}return null},xS.prototype.lowerKey_trkh7z$=function(t){var e;return null!=(e=this.lowerEntry_trkh7z$(t))?e.key:null},xS.prototype.lowerValue_trkh7z$=function(t){var e;return null!=(e=this.lowerEntry_trkh7z$(t))?e.value:null},xS.prototype.put_xwzc9p$=function(t,e){var i;if(null==this.root_g0oxgl$_0)this.root_g0oxgl$_0=new wS(this,t,e,null);else{var n,o=this.root_g0oxgl$_0;do{if(n=x(o),this.cmp_ta02bd$_0(t,o.key)<0)i=o.left;else{if(!(this.cmp_ta02bd$_0(t,o.key)>0))return o.setValue_11rc$(e);i=o.right}o=i}while(null!=o);var r=new wS(this,t,e,n);this.cmp_ta02bd$_0(t,n.key)<0?n.left=r:n.right=r,this.fixAfterInsertion_9avj2i$_0(r)}return this.size=this.size+1|0,null},xS.prototype.remove_11rb$=function(t){var e,i;if(null!=(e=this.getEntry_iowdmk$_0(t))){var n=e.value;this.deleteEntry_xb9s9j$_0(e),i=n}else i=null;return i},xS.prototype.get_11rb$=function(t){var e;return null!=(e=this.getEntry_iowdmk$_0(t))?e.value:null},Object.defineProperty(xS.prototype,"entries",{configurable:!0,get:function(){var t,i=ct();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,wS)?t:c();null!=n;){var o=n;i.add_11rb$(o),n=this.successor_78gl9k$_0(n)}return i}}),Object.defineProperty(xS.prototype,"keys",{configurable:!0,get:function(){var t,i=ct();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,wS)?t:c();null!=n;){var o=n.key;i.add_11rb$(o),n=this.successor_78gl9k$_0(n)}return i}}),Object.defineProperty(xS.prototype,"values",{configurable:!0,get:function(){var t,i=ct();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,wS)?t:c();null!=n;){var o=n.value;i.add_11rb$(o),n=this.successor_78gl9k$_0(n)}return i}}),xS.prototype.containsKey_11rb$=function(t){return null!=this.getEntry_iowdmk$_0(t)},xS.prototype.containsValue_11rc$=function(t){return this.values.contains_11rb$(t)},xS.prototype.putAll_a2k3zr$=function(t){var e;for(e=t.entries.iterator();e.hasNext();){var i=e.next();this.put_xwzc9p$(i.key,i.value)}},xS.prototype.getEntry_iowdmk$_0=function(t){for(var e,i=this.root_g0oxgl$_0;null!=i;){if(this.cmp_ta02bd$_0(t,i.key)<0)e=i.left;else{if(!(this.cmp_ta02bd$_0(t,i.key)>0))return i;e=i.right}i=e}return null},xS.prototype.deleteEntry_xb9s9j$_0=function(t){var e=t;if(this.size=this.size-1|0,null!=e.left&&null!=e.right){var i=x(this.successor_78gl9k$_0(e));e.key=i.key,e.value=i.value,e=i}var n=null!=e.left?e.left:e.right;null!=n?(n.parent=e.parent,null==e.parent?this.root_g0oxgl$_0=n:e===x(e.parent).left?x(e.parent).left=n:x(e.parent).right=n,e.left=null,e.right=null,e.parent=null,e.color===SS().BLACK_0&&this.fixAfterDeletion_6ssue5$_0(n)):null==e.parent?this.root_g0oxgl$_0=null:(e.color===SS().BLACK_0&&this.fixAfterDeletion_6ssue5$_0(e),null!=e.parent&&(e===x(e.parent).left?x(e.parent).left=null:e===x(e.parent).right&&(x(e.parent).right=null),e.parent=null))},xS.prototype.fixAfterInsertion_9avj2i$_0=function(t){var e,i,n,o,r,s,a,l,u,p,c,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S=t;for(null!=S&&(S.color=SS().RED_0);null!=S&&!zt(S,this.root_g0oxgl$_0)&&this.color_3jivvv$_0(S.parent)===SS().RED_0;)if(S.parent===(null!=(i=null!=(e=S.parent)?e.parent:null)?i.left:null)){var C=null!=(o=null!=(n=S.parent)?n.parent:null)?o.right:null;this.color_3jivvv$_0(C)===SS().RED_0?(null!=(r=S.parent)&&(r.color=SS().BLACK_0),null!=C&&(C.color=SS().BLACK_0),null!=(a=null!=(s=S.parent)?s.parent:null)&&(a.color=SS().RED_0),S=null!=(l=S.parent)?l.parent:null):(S===(null!=(u=S.parent)?u.right:null)&&(S=S.parent,this.rotateLeft_xtlw1j$_0(S)),null!=(p=null!=S?S.parent:null)&&(p.color=SS().BLACK_0),null!=(h=null!=(c=null!=S?S.parent:null)?c.parent:null)&&(h.color=SS().RED_0),this.rotateRight_ltp9a$_0(null!=(d=null!=S?S.parent:null)?d.parent:null))}else{var N=null!=(_=null!=(f=S.parent)?f.parent:null)?_.left:null;this.color_3jivvv$_0(N)===SS().RED_0?(null!=(m=S.parent)&&(m.color=SS().BLACK_0),null!=N&&(N.color=SS().BLACK_0),null!=(y=null!=($=S.parent)?$.parent:null)&&(y.color=SS().RED_0),S=null!=(v=S.parent)?v.parent:null):(S===(null!=(g=S.parent)?g.left:null)&&(S=S.parent,this.rotateRight_ltp9a$_0(S)),null!=(b=null!=S?S.parent:null)&&(b.color=SS().BLACK_0),null!=(w=null!=(x=null!=S?S.parent:null)?x.parent:null)&&(w.color=SS().RED_0),this.rotateLeft_xtlw1j$_0(null!=(z=null!=S?S.parent:null)?z.parent:null))}null!=(k=this.root_g0oxgl$_0)&&(k.color=SS().BLACK_0)},xS.prototype.fixAfterDeletion_6ssue5$_0=function(t){for(var e,i,n,o,r,s,a,l,u,p,c,h,d,f,_,m=t;!zt(m,this.root_g0oxgl$_0)&&m.color===SS().BLACK_0;)if(zt(m,null!=(e=m.parent)?e.left:null)){var $=null!=(i=m.parent)?i.right:null;this.color_3jivvv$_0($)===SS().RED_0&&(null!=$&&($.color=SS().BLACK_0),null!=(n=m.parent)&&(n.color=SS().RED_0),this.rotateLeft_xtlw1j$_0(m.parent),$=null!=(o=m.parent)?o.right:null),this.color_3jivvv$_0(null!=$?$.left:null)===SS().BLACK_0&&this.color_3jivvv$_0(null!=$?$.right:null)===SS().BLACK_0?(null!=$&&($.color=SS().RED_0),m=x(m.parent)):(this.color_3jivvv$_0(null!=$?$.right:null)===SS().BLACK_0&&(null!=(r=null!=$?$.left:null)&&(r.color=SS().BLACK_0),null!=$&&($.color=SS().RED_0),this.rotateRight_ltp9a$_0($),$=null!=(s=m.parent)?s.right:null),null!=$&&($.color=this.color_3jivvv$_0(m.parent)),null!=(a=m.parent)&&(a.color=SS().BLACK_0),null!=(l=null!=$?$.right:null)&&(l.color=SS().BLACK_0),this.rotateLeft_xtlw1j$_0(m.parent),m=x(this.root_g0oxgl$_0))}else{var y=null!=(u=m.parent)?u.left:null;this.color_3jivvv$_0(y)===SS().RED_0&&(null!=y&&(y.color=SS().BLACK_0),null!=(p=null!=y?y.parent:null)&&(p.color=SS().RED_0),this.rotateRight_ltp9a$_0(m.parent),y=null!=(c=m.parent)?c.left:null),this.color_3jivvv$_0(null!=y?y.right:null)===SS().BLACK_0&&this.color_3jivvv$_0(null!=y?y.left:null)===SS().BLACK_0?(null!=y&&(y.color=SS().RED_0),m=x(m.parent)):(this.color_3jivvv$_0(null!=y?y.left:null)===SS().BLACK_0&&(null!=(h=null!=y?y.right:null)&&(h.color=SS().BLACK_0),null!=y&&(y.color=SS().RED_0),this.rotateLeft_xtlw1j$_0(y),y=null!=(d=m.parent)?d.left:null),null!=y&&(y.color=this.color_3jivvv$_0(m.parent)),null!=(f=m.parent)&&(f.color=SS().BLACK_0),null!=(_=null!=y?y.left:null)&&(_.color=SS().BLACK_0),this.rotateRight_ltp9a$_0(m.parent),m=x(this.root_g0oxgl$_0))}m.color=SS().BLACK_0},xS.prototype.rotateLeft_xtlw1j$_0=function(t){var e,i,n;if(null!=t){var o,r=t.right;t.right=null!=r?r.left:null,null!=(null!=r?r.left:null)&&null!=(e=r.left)&&(e.parent=t),null!=r&&(r.parent=t.parent),null==t.parent?this.root_g0oxgl$_0=r:(null!=(o=t.parent)?o.left:null)===t?null!=(i=t.parent)&&(i.left=r):null!=(n=t.parent)&&(n.right=r),null!=r&&(r.left=t),t.parent=r}},xS.prototype.rotateRight_ltp9a$_0=function(t){var e,i,n;if(null!=t){var o,r=t.left;t.left=null!=r?r.right:null,null!=(null!=r?r.right:null)&&null!=(e=r.right)&&(e.parent=t),null!=r&&(r.parent=t.parent),null==t.parent?this.root_g0oxgl$_0=r:(null!=(o=t.parent)?o.right:null)===t?null!=(i=t.parent)&&(i.right=r):null!=(n=t.parent)&&(n.left=r),null!=r&&(r.right=t),t.parent=r}},xS.prototype.color_3jivvv$_0=function(t){var e;return null!=(e=null!=t?t.color:null)?e:SS().BLACK_0},xS.prototype.successor_78gl9k$_0=function(t){var e;if(null==t)e=null;else if(null!=t.right){for(var i=x(t.right);null!=i.left;)i=x(i.left);e=i}else{for(var n=t.parent,o=t;null!=n&&zt(o,n.right);)o=n,n=n.parent;e=n}return e},xS.prototype.predecessor_3j2kg5$_0=function(t){var e;if(null==t)e=null;else if(null!=t.left){for(var i=x(t.left);null!=i.right;)i=x(i.right);e=i}else{for(var n=t.parent,o=t;null!=n&&zt(o,n.left);)o=n,n=n.parent;e=n}return e},Object.defineProperty(wS.prototype,"key",{configurable:!0,get:function(){return this.key_qa5ejk$_0},set:function(t){this.key_qa5ejk$_0=t}}),Object.defineProperty(wS.prototype,"value",{configurable:!0,get:function(){return this.value_owqnua$_0},set:function(t){this.value_owqnua$_0=t}}),wS.prototype.setValue_11rc$=function(t){var e=this.value;return this.value=t,e},wS.$metadata$={kind:$,simpleName:"MapEntry",interfaces:[Ke]},zS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var kS=null;function SS(){return null===kS&&new zS,kS}function CS(t,i){var n;return e.compareTo(e.isComparable(n=t)?n:c(),i)}function NS(t,i){var n,o,r,s,a,l,u,p;jo(this),this.data=t,this.offsetF_0=e.imul(i,this.data.vertexSizeF),this.offsetI_0=e.imul(i,this.data.vertexSizeI),this.index_qsqbze$_0=i,this.position=null,this.normal=null,this.tangent=null,this.color=null,this.texCoord=null,this.joints=null,this.weights=null,this.attributeViews_0=null;var c=z();for(this.attributeViews_0=c,n=this.data.attributeByteOffsets.entries.iterator();n.hasNext();){var h=n.next();switch(h.key.type.name){case"FLOAT":var d=h.key,f=new ES(this,h.value/4|0);c.put_xwzc9p$(d,f);break;case"VEC_2F":var _=h.key,m=new TS(this,h.value/4|0);c.put_xwzc9p$(_,m);break;case"VEC_3F":var $=h.key,y=new PS(this,h.value/4|0);c.put_xwzc9p$($,y);break;case"VEC_4F":var v=h.key,g=new OS(this,h.value/4|0);c.put_xwzc9p$(v,g);break;case"INT":var b=h.key,x=new jS(this,h.value/4|0);c.put_xwzc9p$(b,x);break;case"VEC_2I":var w=h.key,k=new AS(this,h.value/4|0);c.put_xwzc9p$(w,k);break;case"VEC_3I":var S=h.key,C=new IS(this,h.value/4|0);c.put_xwzc9p$(S,C);break;case"VEC_4I":var N=h.key,E=new RS(this,h.value/4|0);c.put_xwzc9p$(N,E);break;default:throw V(h.key.type.toString()+" is not a valid vertex attribute")}}this.position=null!=(o=this.getVec3fAttribute_nm2vx5$(ds().POSITIONS))?o:new PS(this,-1),this.normal=null!=(r=this.getVec3fAttribute_nm2vx5$(ds().NORMALS))?r:new PS(this,-1),this.tangent=null!=(s=this.getVec4fAttribute_nm2vx5$(ds().TANGENTS))?s:new OS(this,-1),this.texCoord=null!=(a=this.getVec2fAttribute_nm2vx5$(ds().TEXTURE_COORDS))?a:new TS(this,-1),this.color=null!=(l=this.getColorAttribute_nm2vx5$(ds().COLORS))?l:new MS(this,new OS(this,-1)),this.joints=null!=(u=this.getVec4iAttribute_nm2vx5$(ds().JOINTS))?u:new RS(this,-1),this.weights=null!=(p=this.getVec4fAttribute_nm2vx5$(ds().WEIGHTS))?p:new OS(this,-1)}function ES(t,e){this.$outer=t,this.attribOffset_0=e}function TS(t,e){this.$outer=t,po(this),this.attribOffset_0=e}function PS(t,e){this.$outer=t,jo(this),this.attribOffset=e}function OS(t,e){this.$outer=t,or(this),this.attribOffset=e}function MS(t,e){this.$outer=t,ty(this),this.vecView=e}function jS(t,e){this.$outer=t,this.attribOffset_0=e}function AS(t,e){this.$outer=t,So(this),this.attribOffset_0=e}function IS(t,e){this.$outer=t,Yo(this),this.attribOffset_0=e}function RS(t,e){this.$outer=t,Er(this),this.attribOffset_0=e}function LS(t,e,i,n){this.x=t,this.ySigned=e,this.width=i,this.heightSigned=n}function DS(t){return VS().createContext_s8od96$(t)}function qS(){var t;return"number"==typeof(t=performance.now())?t:c()}function FS(t,i){var n=i<0?0:i>12?12:i,o=t<0?"-":"",r=A.abs(t);if(0===n)return o+Xe(r).toString();var s=Xe(A.pow(10,n)),a=Xe(r%1*s.toNumber());zt(a,s)&&(a=C,r+=1);for(var l=a.toString();l.length<n;)l="0"+l;return o+e.Long.fromNumber(r).toString()+"."+l}function BS(){var t,i;US=this,this.dpi=0,this.ctx=null;var n=document.getElementById("dpiMeasure");if(null==n){var o=KN.Log,r=Cz.WARN,s=e.getKClassFromExpression(this).simpleName;r.level>=o.level.level&&o.printer(r,s,"dpiMeasure element not found, falling back to 96 dpi");var a=KN.Log,l=Cz.WARN,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"Add this hidden div to your html:");var p=KN.Log,h=Cz.WARN,d=e.getKClassFromExpression(this).simpleName;h.level>=p.level.level&&p.printer(h,d,'<div id="dpiMeasure" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>'),i=96}else i=(e.isType(t=n,HTMLDivElement)?t:c()).offsetWidth;this.dpi=i}xS.$metadata$={kind:$,simpleName:"TreeMap",interfaces:[Ht]},Object.defineProperty(NS.prototype,"index",{configurable:!0,get:function(){return this.index_qsqbze$_0},set:function(t){this.index_qsqbze$_0=t,this.offsetF_0=e.imul(t,this.data.vertexSizeF),this.offsetI_0=e.imul(t,this.data.vertexSizeI)}}),NS.prototype.get_za3lpa$=function(t){return this.position.get_za3lpa$(t)},NS.prototype.set_24o109$=function(t,e){this.position.set_24o109$(t,e)},NS.prototype.set_fs4kvg$=function(t){var i,n,o,r,s,a,l,u,p;for(i=this.attributeViews_0.keys.iterator();i.hasNext();){var h=i.next(),d=t.attributeViews_0.get_11rb$(h);null!=d&&(e.isType(d,ES)?(e.isType(n=this.attributeViews_0.get_11rb$(h),ES)?n:c()).f=d.f:e.isType(d,TS)?(e.isType(o=this.attributeViews_0.get_11rb$(h),TS)?o:c()).set_czzhjp$(d):e.isType(d,PS)?(e.isType(r=this.attributeViews_0.get_11rb$(h),PS)?r:c()).set_czzhiu$(d):e.isType(d,OS)?(e.isType(s=this.attributeViews_0.get_11rb$(h),OS)?s:c()).set_czzhhz$(d):e.isType(d,jS)?(e.isType(a=this.attributeViews_0.get_11rb$(h),jS)?a:c()).i=d.i:e.isType(d,AS)?(e.isType(l=this.attributeViews_0.get_11rb$(h),AS)?l:c()).set_czzhjm$(d):e.isType(d,IS)?(e.isType(u=this.attributeViews_0.get_11rb$(h),IS)?u:c()).set_czzhir$(d):e.isType(d,RS)&&(e.isType(p=this.attributeViews_0.get_11rb$(h),RS)?p:c()).set_czzhhw$(d))}},NS.prototype.getFloatAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,ES)?i:c()},NS.prototype.getVec2fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,uo)?i:c()},NS.prototype.getVec3fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,Mo)?i:c()},NS.prototype.getVec4fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,nr)?i:c()},NS.prototype.getColorAttribute_nm2vx5$=function(t){var i,n;return null!=(i=this.attributeViews_0.get_11rb$(t))?new MS(this,e.isType(n=i,OS)?n:c()):null},NS.prototype.getIntAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,jS)?i:c()},NS.prototype.getVec2iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,AS)?i:c()},NS.prototype.getVec3iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,IS)?i:c()},NS.prototype.getVec4iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,RS)?i:c()},Object.defineProperty(ES.prototype,"f",{configurable:!0,get:function(){return this.attribOffset_0<0?0:this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset_0|0)},set:function(t){this.attribOffset_0>=0&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset_0|0,t)}}),ES.$metadata$={kind:$,simpleName:"FloatView",interfaces:[]},TS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=1?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset_0+t|0):0},TS.prototype.set_24o109$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=1&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset_0+t|0,e)},TS.$metadata$={kind:$,simpleName:"Vec2fView",interfaces:[uo]},PS.prototype.get_za3lpa$=function(t){return this.attribOffset>=0&&0<=t&&t<=2?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset+t|0):0},PS.prototype.set_24o109$=function(t,e){this.attribOffset>=0&&0<=t&&t<=2&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset+t|0,e)},PS.$metadata$={kind:$,simpleName:"Vec3fView",interfaces:[Mo]},OS.prototype.get_za3lpa$=function(t){return this.attribOffset>=0&&0<=t&&t<=3?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset+t|0):0},OS.prototype.set_24o109$=function(t,e){this.attribOffset>=0&&0<=t&&t<=3&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset+t|0,e)},OS.$metadata$={kind:$,simpleName:"Vec4fView",interfaces:[nr]},MS.prototype.get_za3lpa$=function(t){return this.vecView.get_za3lpa$(t)},MS.prototype.set_24o109$=function(t,e){this.vecView.set_24o109$(t,e)},MS.$metadata$={kind:$,simpleName:"ColorWrapView",interfaces:[Q$]},Object.defineProperty(jS.prototype,"i",{configurable:!0,get:function(){return this.attribOffset_0<0?0:this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0|0)},set:function(t){this.attribOffset_0>=0&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0|0,t)}}),jS.$metadata$={kind:$,simpleName:"IntView",interfaces:[]},AS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=1?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},AS.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=1&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},AS.$metadata$={kind:$,simpleName:"Vec2iView",interfaces:[ko]},IS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=2?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},IS.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=2&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},IS.$metadata$={kind:$,simpleName:"Vec3iView",interfaces:[Xo]},RS.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=3?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},RS.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=3&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},RS.$metadata$={kind:$,simpleName:"Vec4iView",interfaces:[Nr]},NS.$metadata$={kind:$,simpleName:"VertexView",interfaces:[Mo]},Object.defineProperty(LS.prototype,"y",{configurable:!0,get:function(){return this.heightSigned<0?this.ySigned+this.heightSigned|0:this.ySigned}}),Object.defineProperty(LS.prototype,"height",{configurable:!0,get:function(){return tt(this.heightSigned)}}),Object.defineProperty(LS.prototype,"aspectRatio",{configurable:!0,get:function(){return this.width/this.height}}),LS.prototype.isInViewport_dleff0$=function(t,e){return t>=this.x&&t<(this.x+this.width|0)&&e>=e&&e<e+this.height},LS.prototype.set_tjonv8$=function(t,e,i,n){this.x=t,this.width=i,this.ySigned=e,this.heightSigned=n},LS.$metadata$={kind:$,simpleName:"Viewport",interfaces:[]},Object.defineProperty(BS.prototype,"gl",{configurable:!0,get:function(){var t,e;if(null==(e=null!=(t=this.ctx)?t.gl_8be2vx$:null))throw cn("Platform.createContext() not called");return e}}),BS.prototype.createContext_s8od96$=function(t){if(null!=this.ctx)throw cn("Context was already created (multi-context is currently not supported in js");return this.ctx=new gC(t),x(this.ctx)},BS.$metadata$={kind:y,simpleName:"JsImpl",interfaces:[]};var US=null;function VS(){return null===US&&new BS,US}function GS(t){var e;this.offscreenPass=t,this.fbos_0=M(),this.rbos_0=M(),this.drawMipLevels_0=this.offscreenPass.config.drawMipLevels,e=this.drawMipLevels_0?this.offscreenPass.config.mipLevels:1,this.renderMipLevels_0=e,this.isCreated_0=!1;var i,n=I(this.offscreenPass.config.nColorAttachments);i=n.length-1|0;for(var o=0;o<=i;o++)n[o]=null;this.colorTexs_0=n,this.depthTex_0=null}function HS(t){XS(),this.offscreenPass=t,this.fbos_0=M(),this.rbos_0=M(),this.isCreated_0=!1,this.colorTex_0=null}function WS(){KS=this;var t,e=I(6);t=e.length-1|0;for(var i=0;i<=t;i++){var n;t:do{switch(i){case 0:n=$a();break t;case 1:n=ma();break t;case 2:n=ya();break t;case 3:n=va();break t;case 4:n=fa();break t;case 5:n=_a();break t;default:throw Ye()}}while(0);e[i]=n}this.VIEWS_0=e}GS.prototype.draw_44a5h0$=function(t){var e,i,n;if(this.isCreated_0||this.create_0(t),this.isCreated_0){e=this.renderMipLevels_0;for(var o=0;o<e;o++)null!=(i=this.offscreenPass.onSetupMipLevel)&&i(o,t),this.offscreenPass.applyMipViewport_za3lpa$(o),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(o)),t.queueRenderer_8be2vx$.renderQueue_e0goaf$(this.offscreenPass.drawQueue);if(!this.drawMipLevels_0){n=this.colorTexs_0;for(var r=0;r!==n.length;++r)t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.colorTexs_0[r]),t.gl_8be2vx$.generateMipmap(WebGLRenderingContext.TEXTURE_2D)}this.copyToTextures_0(t),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)}},GS.prototype.copyToTextures_0=function(t){var i,n,o;i=this.renderMipLevels_0;for(var r=0;r<i;r++){t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(r)),t.gl_8be2vx$.readBuffer(WebGLRenderingContext.COLOR_ATTACHMENT0),n=this.offscreenPass.copyTargetsColor;for(var s=0;s!==n.size;++s){var a,l,u,p,h,d,f=this.offscreenPass.copyTargetsColor.get_za3lpa$(s),_=null!=(l=null!=(a=f.loadedTexture)?a.width:null)?l:0,m=null!=(p=null!=(u=f.loadedTexture)?u.height:null)?p:0;_===this.offscreenPass.width&&m===this.offscreenPass.height||(null!=(h=f.loadedTexture)&&h.dispose(),this.createCopyTexColor_0(f,t),_=x(f.loadedTexture).width,m=x(f.loadedTexture).height),_>>=r,m>>=r;var $=e.isType(d=f.loadedTexture,qC)?d:c();t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,$.texture),t.gl_8be2vx$.copyTexSubImage2D(WebGLRenderingContext.TEXTURE_2D,r,0,0,0,0,_,m)}}if(!this.drawMipLevels_0){o=this.offscreenPass.copyTargetsColor;for(var y=0;y!==o.size;++y){var v,g=this.offscreenPass.copyTargetsColor.get_za3lpa$(y),b=e.isType(v=g.loadedTexture,qC)?v:c();t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,b.texture),t.gl_8be2vx$.generateMipmap(WebGLRenderingContext.TEXTURE_2D)}}},GS.prototype.dispose_aemszp$=function(t){var i,n,o,r,s;for(e.isType(t,gC)||c(),o=this.fbos_0.iterator();o.hasNext();){var a=o.next();t.gl_8be2vx$.deleteFramebuffer(a)}for(r=this.rbos_0.iterator();r.hasNext();){var l=r.next();t.gl_8be2vx$.deleteRenderbuffer(l)}for(this.fbos_0.clear(),this.rbos_0.clear(),s=this.offscreenPass.colorTextures.iterator();s.hasNext();){var u=s.next();u.loadingState===sh()&&u.dispose()}null!=(i=this.offscreenPass.depthTexture)&&i.loadingState===sh()&&i.dispose(),n=this.colorTexs_0;for(var p=0;p!==n.length;++p)this.colorTexs_0[p]=null;this.depthTex_0=null,this.isCreated_0=!1},GS.prototype.applySize_w70mbp$=function(t,i,n){var o;this.dispose_aemszp$(n),this.create_0(e.isType(o=n,gC)?o:c())},GS.prototype.create_0=function(t){var e,i=t.gl_8be2vx$;this.offscreenPass.config.colorRenderTarget===aa()&&this.createColorTexs_0(t),this.offscreenPass.config.depthRenderTarget===aa()&&this.createDepthTex_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){var o=this.offscreenPass.getMipWidth_za3lpa$(n),r=this.offscreenPass.getMipHeight_za3lpa$(n),s=i.createFramebuffer();if(i.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,s),this.offscreenPass.config.colorRenderTarget===aa()){var a,l,u=this.colorTexs_0,p=0;for(a=0;a!==u.length;++a){var c=u[a],h=(p=(l=p)+1|0,l);i.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0+h|0,WebGLRenderingContext.TEXTURE_2D,c,n)}var d,f=new Int32Array(this.colorTexs_0.length);d=f.length-1|0;for(var _=0;_<=d;_++)f[_]=WebGLRenderingContext.COLOR_ATTACHMENT0+_|0;var m=f;i.drawBuffers(m)}else{var $=i.createRenderbuffer();i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,$),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,NC(Wc()),o,r),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,WebGLRenderingContext.RENDERBUFFER,$),this.rbos_0.add_11rb$($)}if(this.offscreenPass.config.depthRenderTarget===aa())i.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.TEXTURE_2D,this.depthTex_0,n);else{var y=i.createRenderbuffer();i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,y),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,WebGL2RenderingContext.DEPTH_COMPONENT24,o,r),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.RENDERBUFFER,y),this.rbos_0.add_11rb$(y)}this.fbos_0.add_11rb$(s)}this.isCreated_0=!0},GS.prototype.createColorTexs_0=function(t){var i;i=this.offscreenPass.colorTextures;for(var n=0;n!==i.size;++n){var o,r=this.offscreenPass.config.colorAttachments.get_za3lpa$(n);if(null!=r.providedTexture)this.colorTexs_0[n]=(e.isType(o=r.providedTexture.loadedTexture,qC)?o:c()).texture;else{var s=r.colorFormat,a=NC(s),l=this.offscreenPass.width,u=this.offscreenPass.height,p=this.offscreenPass.config.mipLevels,h=ph().estimatedTexSize_4qozqa$(l,u,PC(s),1,p),d=new qC(t,WebGLRenderingContext.TEXTURE_2D,t.gl_8be2vx$.createTexture(),h);d.setSize_vux9f0$(l,u),d.applySamplerProps_xetyfc$(this.offscreenPass.colorTextures.get_za3lpa$(n).props),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,p,a,l,u),this.colorTexs_0[n]=d.texture,this.offscreenPass.colorTextures.get_za3lpa$(n).loadedTexture=d,this.offscreenPass.colorTextures.get_za3lpa$(n).loadingState=sh()}}},GS.prototype.createDepthTex_0=function(t){var i,n=x(this.offscreenPass.config.depthAttachment);if(null!=n.providedTexture)this.depthTex_0=(e.isType(i=n.providedTexture.loadedTexture,qC)?i:c()).texture;else{var o=WebGL2RenderingContext.DEPTH_COMPONENT24,r=this.offscreenPass.width,s=this.offscreenPass.height,a=this.offscreenPass.config.mipLevels,l=this.offscreenPass.config.depthAttachment,u=ph().estimatedTexSize_4qozqa$(r,s,4,1,a),p=new qC(t,WebGLRenderingContext.TEXTURE_2D,t.gl_8be2vx$.createTexture(),u);p.setSize_vux9f0$(r,s),p.applySamplerProps_xetyfc$(x(this.offscreenPass.depthTexture).props),l.depthCompareOp!==pl()&&(t.gl_8be2vx$.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGL2RenderingContext.TEXTURE_COMPARE_MODE,WebGL2RenderingContext.COMPARE_REF_TO_TEXTURE),t.gl_8be2vx$.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGL2RenderingContext.TEXTURE_COMPARE_FUNC,OC(l.depthCompareOp))),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,a,o,r,s),this.depthTex_0=p.texture,this.offscreenPass.depthTexture.loadedTexture=p,this.offscreenPass.depthTexture.loadingState=sh()}},GS.prototype.createCopyTexColor_0=function(t,e){var i=NC(t.props.format),n=this.offscreenPass.width,o=this.offscreenPass.height,r=this.offscreenPass.config.mipLevels,s=ph().estimatedTexSize_4qozqa$(n,o,PC(t.props.format),1,r),a=new qC(e,WebGLRenderingContext.TEXTURE_2D,e.gl_8be2vx$.createTexture(),s);a.setSize_vux9f0$(n,o),a.applySamplerProps_xetyfc$(t.props),e.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,r,i,n,o),t.loadedTexture=a,t.loadingState=sh()},GS.$metadata$={kind:$,simpleName:"OffscreenPass2dImpl",interfaces:[]},HS.prototype.draw_44a5h0$=function(t){var e,i;this.isCreated_0||this.create_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){null!=(i=this.offscreenPass.onSetupMipLevel)&&i(n,t),this.offscreenPass.applyMipViewport_za3lpa$(n),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(n));for(var o=0;o<6;o++){var r=XS().VIEWS_0[o],s=this.offscreenPass.drawQueues[r.index];t.gl_8be2vx$.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X+o|0,this.colorTex_0,n),t.queueRenderer_8be2vx$.renderQueue_e0goaf$(s),this.copyToTextures_0(o,n,t)}}t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)},HS.prototype.copyToTextures_0=function(t,i,n){var o;n.gl_8be2vx$.readBuffer(WebGLRenderingContext.COLOR_ATTACHMENT0),o=this.offscreenPass.copyTargetsColor;for(var r=0;r!==o.size;++r){var s,a,l,u,p,h,d=this.offscreenPass.copyTargetsColor.get_za3lpa$(r),f=null!=(a=null!=(s=d.loadedTexture)?s.width:null)?a:0,_=null!=(u=null!=(l=d.loadedTexture)?l.height:null)?u:0;f===this.offscreenPass.width&&_===this.offscreenPass.height||(null!=(p=d.loadedTexture)&&p.dispose(),this.createCopyTexColor_0(d,n),f=x(d.loadedTexture).width,_=x(d.loadedTexture).height),f>>=i,_>>=i;var m=e.isType(h=d.loadedTexture,qC)?h:c();n.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_CUBE_MAP,m.texture),n.gl_8be2vx$.copyTexSubImage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X+t|0,i,0,0,0,0,f,_)}},HS.prototype.dispose_aemszp$=function(t){var i,n,o,r;for(e.isType(t,gC)||c(),n=this.fbos_0.iterator();n.hasNext();){var s=n.next();t.gl_8be2vx$.deleteFramebuffer(s)}for(o=this.rbos_0.iterator();o.hasNext();){var a=o.next();t.gl_8be2vx$.deleteRenderbuffer(a)}for(this.fbos_0.clear(),this.rbos_0.clear(),r=this.offscreenPass.colorTextures.iterator();r.hasNext();){var l=r.next();l.loadingState===sh()&&l.dispose()}null!=(i=this.offscreenPass.depthTexture)&&i.loadingState===sh()&&i.dispose(),this.colorTex_0=null,this.isCreated_0=!1},HS.prototype.applySize_w70mbp$=function(t,i,n){var o;this.dispose_aemszp$(n),this.create_0(e.isType(o=n,gC)?o:c())},HS.prototype.create_0=function(t){var e,i=t.gl_8be2vx$;this.createColorTex_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){var o=i.createFramebuffer(),r=i.createRenderbuffer(),s=this.offscreenPass.getMipWidth_za3lpa$(n),a=this.offscreenPass.getMipHeight_za3lpa$(n);i.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,o),i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,r),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,WebGL2RenderingContext.DEPTH_COMPONENT24,s,a),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.RENDERBUFFER,r),this.fbos_0.add_11rb$(o),this.rbos_0.add_11rb$(r)}this.isCreated_0=!0},HS.prototype.createColorTex_0=function(t){var e=this.offscreenPass.config.colorAttachments.get_za3lpa$(0).colorFormat,i=NC(e),n=this.offscreenPass.width,o=this.offscreenPass.height,r=this.offscreenPass.config.mipLevels,s=ph().estimatedTexSize_4qozqa$(n,o,PC(e),6,r),a=new qC(t,WebGLRenderingContext.TEXTURE_CUBE_MAP,t.gl_8be2vx$.createTexture(),s);a.setSize_vux9f0$(n,o),a.applySamplerProps_xetyfc$(x(this.offscreenPass.colorTexture).props),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP,r,i,n,o),this.colorTex_0=a.texture,x(this.offscreenPass.colorTexture).loadedTexture=a,x(this.offscreenPass.colorTexture).loadingState=sh()},HS.prototype.createCopyTexColor_0=function(t,e){var i=NC(t.props.format),n=this.offscreenPass.width,o=this.offscreenPass.height,r=this.offscreenPass.config.mipLevels,s=ph().estimatedTexSize_4qozqa$(n,o,PC(t.props.format),6,r),a=new qC(e,WebGLRenderingContext.TEXTURE_CUBE_MAP,e.gl_8be2vx$.createTexture(),s);a.setSize_vux9f0$(n,o),a.applySamplerProps_xetyfc$(t.props),e.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP,r,i,n,o),t.loadedTexture=a,t.loadingState=sh()},WS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var KS=null;function XS(){return null===KS&&new WS,KS}function YS(t){switch(this.nSlots=0,this.attribSize=0,t.type.name){case"FLOAT":this.nSlots=1,this.attribSize=1;break;case"VEC_2F":this.nSlots=1,this.attribSize=2;break;case"VEC_3F":this.nSlots=1,this.attribSize=3;break;case"VEC_4F":this.nSlots=1,this.attribSize=4;break;case"MAT_2F":this.nSlots=2,this.attribSize=2;break;case"MAT_3F":this.nSlots=3,this.attribSize=3;break;case"MAT_4F":this.nSlots=4,this.attribSize=4;break;case"INT":this.nSlots=1,this.attribSize=1;break;case"VEC_2I":this.nSlots=1,this.attribSize=2;break;case"VEC_3I":this.nSlots=1,this.attribSize=3;break;case"VEC_4I":this.nSlots=1,this.attribSize=4;break;default:e.noWhenBranchMatched()}}function ZS(t,i){this.vertexSrc=t,this.fragmentSrc=i;var n=ot(this.vertexSrc),o=new kt(new kt(e.Long.fromInt(n)).data.shiftLeft(32)),r=ot(this.fragmentSrc),s=new kt(e.Long.fromInt(r));this.longHash=new kt(o.data.add(s.data))}function JS(t,i){var n,o;this.maxWidth=t,this.maxHeight=i,this.canvas_0=e.isType(n=document.createElement("canvas"),HTMLCanvasElement)?n:c(),this.canvasCtx_0=null,this.charMaps_0=z(),this.canvas_0.width=this.maxWidth,this.canvas_0.height=this.maxHeight,this.canvasCtx_0=e.isType(o=this.canvas_0.getContext("2d"),CanvasRenderingContext2D)?o:c()}function QS(t,e){if(Ih.call(this),this.data_a0fx42$_0=t,!t.complete)throw gt("Image must be complete");this.width=t.width,this.height=t.height,null!=e&&(this.format=e)}function tC(t,e){vC(),ei.call(this,t),this.ctx=e,this.pako_0=i(14),this.fontGenerator_0=new JS(2048,2048)}function eC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$localRawRef=e}function iC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$httpRawRef=e}function nC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$httpTextureRef=e}function oC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$localTextureRef=e}function rC(t,e){return function(i){return t.complete_11rb$(e)}}function sC(t,e){return function(i,n,o,r,s){return u(t,"data:")?e.completeExceptionally_tcv7n7$(cn("Failed loading tex from data URL")):e.completeExceptionally_tcv7n7$(cn("Failed loading tex from "+t))}}function aC(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$url=e,this.local$fmt=i}function lC(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$loader=t,this.local$this$JsAssetManager=e,this.local$$receiver=i}function uC(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetPath=t,this.local$it=i}function pC(t){return function(e,i,n,o){var r=new uC(t,e,i,this,n);return o?r:r.doResume(null)}}function cC(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$tex=void 0,this.local$assetPath=e,this.local$props=i}function hC(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$texData=t}function dC(t,e,i,n,o,r,s,a,u,p){l.call(this,p),this.$controller=u,this.exceptionState_0=1,this.local$closure$ft=t,this.local$closure$bk=e,this.local$closure$lt=i,this.local$closure$rt=n,this.local$closure$up=o,this.local$closure$dn=r,this.local$it=a}function fC(t,e,i,n,o,r){return function(s,a,l,u){var p=new dC(t,e,i,n,o,r,s,a,this,l);return u?p:p.doResume(null)}}function _C(t,e,i,n,o,r,s,a,u){l.call(this,u),this.exceptionState_0=1,this.$this=t,this.local$tex=void 0,this.local$ft=e,this.local$bk=i,this.local$lt=n,this.local$rt=o,this.local$up=r,this.local$dn=s,this.local$props=a}function mC(t,e,i,n,o){l.call(this,o),this.$controller=n,this.exceptionState_0=1,this.local$closure$texData=t}function $C(){yC=this,this.MAX_GENERATED_TEX_WIDTH_0=2048,this.MAX_GENERATED_TEX_HEIGHT_0=2048}HS.$metadata$={kind:$,simpleName:"OffscreenPassCubeImpl",interfaces:[]},YS.$metadata$={kind:$,simpleName:"PlatformAttributeProps",interfaces:[]},ZS.$metadata$={kind:$,simpleName:"ShaderCode",interfaces:[]},JS.prototype.getCharMap_ttufcy$=function(t){var e,i=this.charMaps_0,n=i.get_11rb$(t);if(null==n){var o=this.generateCharMap_0(t);i.put_xwzc9p$(t,o),e=o}else e=n;return e},JS.prototype.generateCharMap_0=function(t){var i;this.canvasCtx_0.clearRect(0,0,this.maxWidth,this.maxHeight);var n="lighter ";0!=(1&t.style)&&(n="bold "),0!=(2&t.style)&&(n+="italic ");var o=z(),r=this.makeMap_0(t,n,o),s=this.canvasCtx_0.getImageData(0,0,this.maxWidth,r),a=PN(e.imul(this.maxWidth,r));i=a.capacity;for(var l=0;l<i;l++)a.put_s8j3t7$(s.data[3+(4*l|0)|0]);return new Ov(new Rh(a,this.maxWidth,r,Wc()),o,t)},JS.prototype.makeMap_0=function(t,e,i){var n,o;this.canvasCtx_0.font=e+t.sizePts+"px "+t.family,this.canvasCtx_0.fillStyle="#ffffff";var r=rt(1.1*t.sizePts),s=rt(.5*t.sizePts),a=rt(1.6*t.sizePts);this.canvasCtx_0.beginPath(),this.canvasCtx_0.moveTo(.5,0),this.canvasCtx_0.lineTo(.5,1),this.canvasCtx_0.stroke();var l=1,u=r;for(n=Fe(t.chars);n.hasNext();){var p=O(n.next());106===p&&(l+=.1*t.sizePts);var c=String.fromCharCode(p),h=rt(this.canvasCtx_0.measureText(c).width),d=rt(h+6);if(l+d>this.maxWidth&&(l=0,(u+=a+10)+s>this.maxHeight))break;var f=h,_=a,m=new Pv;m.width=f,m.height=_,m.xOffset=0,m.yBaseline=r,m.advance=m.width,m.uvMin.set_dleff0$(l+3,u-r),m.uvMax.set_dleff0$(l+3+f,u-r+_);var $=E(p);i.put_xwzc9p$($,m),this.canvasCtx_0.fillText(c,l+3,u),l+=d}var y=this.maxWidth,v=this.nextPow2_0(u+s);for(o=i.values.iterator();o.hasNext();){var g=o.next();g.uvMin.x=g.uvMin.x/y,g.uvMin.y=g.uvMin.y/v,g.uvMax.x=g.uvMax.x/y,g.uvMax.y=g.uvMax.y/v}return v},JS.prototype.nextPow2_0=function(t){for(var e=16;e<t&&e<this.maxHeight;)e<<=1;return e},JS.$metadata$={kind:$,simpleName:"FontMapGenerator",interfaces:[]},Object.defineProperty(QS.prototype,"data",{configurable:!0,get:function(){return this.data_a0fx42$_0}}),QS.$metadata$={kind:$,simpleName:"ImageTextureData",interfaces:[Ih]},eC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},eC.prototype=Object.create(l.prototype),eC.prototype.constructor=eC,eC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadRaw_0(this.local$localRawRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new wi(this.local$localRawRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadLocalRaw_hl6yzt$=function(t,e,i){var n=new eC(this,t,e);return i?n:n.doResume(null)},iC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},iC.prototype=Object.create(l.prototype),iC.prototype.constructor=iC,iC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadRaw_0(this.local$httpRawRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new wi(this.local$httpRawRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadHttpRaw_ohmb7q$=function(t,e,i){var n=new iC(this,t,e);return i?n:n.doResume(null)},nC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},nC.prototype=Object.create(l.prototype),nC.prototype.constructor=nC,nC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadImage_0(this.local$httpTextureRef.url,this.local$httpTextureRef.fmt,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new zi(this.local$httpTextureRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadHttpTexture_nbaz3h$=function(t,e,i){var n=new nC(this,t,e);return i?n:n.doResume(null)},oC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},oC.prototype=Object.create(l.prototype),oC.prototype.constructor=oC,oC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadImage_0(this.local$localTextureRef.url,this.local$localTextureRef.fmt,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new zi(this.local$localTextureRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadLocalTexture_68kns4$=function(t,e,i){var n=new oC(this,t,e);return i?n:n.doResume(null)},tC.prototype.loadRaw_0=function(t,i){var n,o,r=m(this.job),a=new XMLHttpRequest;return a.responseType="arraybuffer",a.onload=(n=a,o=r,function(t){var i,r=new Uint8Array(e.isType(i=n.response,ArrayBuffer)?i:c());return o.complete_11rb$(new kN(r))}),a.onerror=function(t,i,n){return function(o){t.complete_11rb$(null);var r=n,a=KN.Log,l=Cz.ERROR,u=e.getKClassFromExpression(r).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Failed loading resource "+i+": "+o),s}}(r,t,this),a.open("GET",t),a.send(),r.await(i)},aC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},aC.prototype=Object.create(l.prototype),aC.prototype.constructor=aC,aC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=m(),e=new Image;if(e.onload=rC(t,e),e.onerror=sC(this.local$url,t),e.crossOrigin="","decoding"in e&&(e.decoding="async"),e.src=this.local$url,this.state_0=2,this.result_0=t.await(this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new QS(this.result_0,this.local$fmt);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadImage_0=function(t,e,i,n){var o=new aC(this,t,e,i);return n?o:o.doResume(null)},lC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},lC.prototype=Object.create(l.prototype),lC.prototype.constructor=lC,lC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$loader(this.local$$receiver,this.local$this$JsAssetManager,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadTextureAsync_72pzmk$=function(t){return Ze(this,void 0,void 0,(e=t,i=this,function(t,n,o){var r=new lC(e,i,t,this,n);return o?r:r.doResume(null)}));var e,i},tC.prototype.createCharMap_ttufcy$=function(t){return this.fontGenerator_0.getCharMap_ttufcy$(t)},tC.prototype.inflate_ay2i3f$=function(t){var i,n,o=(e.isType(i=t,kN)?i:c()).buffer;return new kN(e.isType(n=this.pako_0.inflate(o),Uint8Array)?n:c())},tC.prototype.createTextureData_asds6l$=function(t,i,n){for(var o,r,s,a=(e.isType(o=t,kN)?o:c()).buffer,l=[],u=0;u<a.length;u+=32768)l.push(String.fromCharCode.apply(null,a.subarray(u,u+32768)));s=l.join("");var p="string"==typeof(r=window.btoa(s))?r:c();return this.loadImage_0("data:"+i+";base64,"+p,null,n)},uC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},uC.prototype=Object.create(l.prototype),uC.prototype.constructor=uC,uC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$closure$assetPath,void 0,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},cC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},cC.prototype=Object.create(l.prototype),cC.prototype.constructor=cC,cC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.local$tex=new eh(this.local$props,this.$this.assetPathToName_61zpoe$(this.local$assetPath),pC(this.local$assetPath)),this.state_0=2,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$assetPath,this.local$props.format,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return this.local$tex.loadedTexture=xN().loadTexture_hlfduu$(this.$this.ctx,this.local$props,t),this.local$tex.loadingState=sh(),this.local$tex;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadAndPrepareTexture_va0f2y$$default=function(t,e,i,n){var o=new cC(this,t,e,i);return n?o:o.doResume(null)},hC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},hC.prototype=Object.create(l.prototype),hC.prototype.constructor=hC,hC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$texData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadAndPrepareTexture_siesr9$$default=function(t,e,i){var n,o=new eh(e,i,(n=t,function(t,e,i,o){var r=new hC(n,t,e,this,i);return o?r:r.doResume(null)}));return o.loadedTexture=xN().loadTexture_hlfduu$(this.ctx,e,t),o.loadingState=sh(),o},dC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},dC.prototype=Object.create(l.prototype),dC.prototype.constructor=dC,dC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadCubeMapTextureData_r3y0ew$(this.local$closure$ft,this.local$closure$bk,this.local$closure$lt,this.local$closure$rt,this.local$closure$up,this.local$closure$dn,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},_C.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},_C.prototype=Object.create(l.prototype),_C.prototype.constructor=_C,_C.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.$this.cubeMapAssetPathToName_r3y0ew$(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn);if(this.local$tex=new kh(this.local$props,t,fC(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn)),this.state_0=2,this.result_0=this.$this.loadCubeMapTextureData_r3y0ew$(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var e=this.result_0;return this.local$tex.loadedTexture=xN().loadTexture_hlfduu$(this.$this.ctx,this.local$props,e),this.local$tex.loadingState=sh(),this.local$tex;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadAndPrepareCubeMap_oecnw4$$default=function(t,e,i,n,o,r,s,a,l){var u=new _C(this,t,e,i,n,o,r,s,a);return l?u:u.doResume(null)},mC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},mC.prototype=Object.create(l.prototype),mC.prototype.constructor=mC,mC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$texData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tC.prototype.loadAndPrepareCubeMap_hol3hm$$default=function(t,e,i){var n,o=new kh(e,i,(n=t,function(t,e,i,o){var r=new mC(n,t,e,this,i);return o?r:r.doResume(null)}));return o.loadedTexture=xN().loadTexture_hlfduu$(this.ctx,e,t),o.loadingState=sh(),o},$C.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var yC=null;function vC(){return null===yC&&new $C,yC}function gC(t){var i,n,o,r,a;zC(),rn.call(this),this.props=t,this.assetMgr_z54vt4$_0=new tC(this.props.assetsBaseDir,this),this.shaderGenerator_d0v5kq$_0=new mN,this.queueRenderer_8be2vx$=new fN(this),this.afterRenderActions_8be2vx$=M(),this.windowWidth_7sdnb6$_0=0,this.windowHeight_xsf9ux$_0=0,this.canvas_0=null,this.gl_8be2vx$=null,this.sysInfo_0=M(),this.animationMillis_0=0,this.glCapabilities=new kC,this.canvas_0=e.isType(i=document.getElementById(this.props.canvasName),HTMLCanvasElement)?i:c();var l=this.canvas_0.getContext("webgl2");if(null==l&&(l=this.canvas_0.getContext("experimental-webgl2")),null==l)throw alert("Unable to initialize WebGL2 context. Your browser may not support it."),cn("WebGL2 context required");this.gl_8be2vx$=e.isType(n=l,WebGL2RenderingContext)?n:c(),this.sysInfo_0.add_11rb$("WebGL 2.0"),this.glCapabilities.maxTexUnits=this.gl_8be2vx$.getParameter(WebGLRenderingContext.MAX_TEXTURE_IMAGE_UNITS),this.glCapabilities.hasFloatTextures=null!=this.gl_8be2vx$.getExtension("EXT_color_buffer_float");var u,p=null!=(r=null!=(o=this.gl_8be2vx$.getExtension("EXT_texture_filter_anisotropic"))?o:this.gl_8be2vx$.getExtension("MOZ_EXT_texture_filter_anisotropic"))?r:this.gl_8be2vx$.getExtension("WEBKIT_EXT_texture_filter_anisotropic");null!=p&&(this.glCapabilities.maxAnisotropy="number"==typeof(a=this.gl_8be2vx$.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT))?a:c(),this.glCapabilities.glTextureMaxAnisotropyExt=p.TEXTURE_MAX_ANISOTROPY_EXT),this.screenDpi=VS().dpi,this.windowWidth=this.canvas_0.clientWidth,this.windowHeight=this.canvas_0.clientHeight,this.canvas_0.oncontextmenu=Kt("preventDefault",(function(t){return t.preventDefault(),s})),this.canvas_0.onmousemove=(u=this,function(t){var e=u.canvas_0.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top;return u.inputMgr.handleMouseMove_dleff0$(i,n),s}),this.canvas_0.onmousedown=function(t){return function(e){return t.inputMgr.handleMouseButtonStates_za3lpa$(e.buttons),s}}(this),this.canvas_0.onmouseup=function(t){return function(e){return t.inputMgr.handleMouseButtonStates_za3lpa$(e.buttons),s}}(this),this.canvas_0.onmouseleave=function(t){return function(e){return t.inputMgr.handleMouseExit(),s}}(this),this.canvas_0.onwheel=function(t){return function(e){var i=-e.deltaY/3;return 0===e.deltaMode&&(i/=30),t.inputMgr.handleMouseScroll_mx4ult$(i),e.preventDefault(),s}}(this),this.canvas_0.addEventListener("touchstart",function(t){return function(i){var n,o;i.preventDefault();var r=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;o=r.length;for(var a=0;a<o;a++){var l=r.item(a);t.inputMgr.handleTouchStart_nhq4am$(l.identifier,SC(l),CC(l))}return s}}(this),!1),this.canvas_0.addEventListener("touchend",function(t){return function(i){var n,o;i.preventDefault();var r=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;o=r.length;for(var a=0;a<o;a++){var l=r.item(a);t.inputMgr.handleTouchEnd_za3lpa$(l.identifier)}return s}}(this),!1),this.canvas_0.addEventListener("touchcancel",function(t){return function(i){var n,o;i.preventDefault();var r=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;o=r.length;for(var a=0;a<o;a++){var l=r.item(a);t.inputMgr.handleTouchCancel_za3lpa$(l.identifier)}return s}}(this),!1),this.canvas_0.addEventListener("touchmove",function(t){return function(i){var n,o;i.preventDefault();var r=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;o=r.length;for(var a=0;a<o;a++){var l=r.item(a);t.inputMgr.handleTouchMove_nhq4am$(l.identifier,SC(l),CC(l))}return s}}(this),!1),document.onkeydown=function(t){return function(e){return t.handleKeyDown_0(e),s}}(this),document.onkeyup=function(t){return function(e){return t.handleKeyUp_0(e),s}}(this)}function bC(){this.canvasName="glCanvas",this.excludedKeyCodes=Rt(["F5"]),this.assetsBaseDir="./assets"}function xC(){wC=this,this.KEY_CODE_MAP=Et([ft("ControlLeft",-1),ft("ControlRight",-2),ft("ShiftLeft",-3),ft("ShiftRight",-4),ft("AltLeft",-5),ft("AltRight",-6),ft("MetaLeft",-7),ft("MetaRight",-8),ft("Escape",-9),ft("ContextMenu",-10),ft("Enter",-11),ft("NumpadEnter",-12),ft("NumpadDivide",-13),ft("NumpadMultiply",-14),ft("NumpadAdd",-15),ft("NumpadSubtract",-16),ft("Backspace",-17),ft("Tab",-18),ft("Delete",-19),ft("Insert",-20),ft("Home",-21),ft("End",-22),ft("PageUp",-23),ft("PageDown",-24),ft("ArrowLeft",-25),ft("ArrowRight",-26),ft("ArrowUp",-27),ft("ArrowDown",-28),ft("F1",-29),ft("F2",-30),ft("F3",-31),ft("F4",-32),ft("F5",-33),ft("F6",-34),ft("F7",-35),ft("F8",-36),ft("F9",-37),ft("F10",-38),ft("F11",-39),ft("F12",-40),ft("Space",32)])}tC.$metadata$={kind:$,simpleName:"JsAssetManager",interfaces:[ei]},Object.defineProperty(gC.prototype,"assetMgr",{configurable:!0,get:function(){return this.assetMgr_z54vt4$_0}}),Object.defineProperty(gC.prototype,"shaderGenerator",{configurable:!0,get:function(){return this.shaderGenerator_d0v5kq$_0}}),Object.defineProperty(gC.prototype,"windowWidth",{configurable:!0,get:function(){return this.windowWidth_7sdnb6$_0},set:function(t){this.windowWidth_7sdnb6$_0=t}}),Object.defineProperty(gC.prototype,"windowHeight",{configurable:!0,get:function(){return this.windowHeight_xsf9ux$_0},set:function(t){this.windowHeight_xsf9ux$_0=t}}),gC.prototype.handleKeyDown_0=function(t){var e=this.translateKeyCode_0(t.code);if(0!==e){var i=0;t.altKey&&(i|=4),t.ctrlKey&&(i|=2),t.shiftKey&&(i|=1),t.metaKey&&(i|=8);var n=2;t.repeat&&(n|=4),this.inputMgr.keyEvent_qt1dr2$(e,i,n)}1===t.key.length&&this.inputMgr.charTyped_s8itvh$(t.key.charCodeAt(0)),this.props.excludedKeyCodes.contains_11rb$(t.code)||t.preventDefault()},gC.prototype.handleKeyUp_0=function(t){var e=this.translateKeyCode_0(t.code);if(0!==e){var i=0;t.altKey&&(i|=4),t.ctrlKey&&(i|=2),t.shiftKey&&(i|=1),t.metaKey&&(i|=8),this.inputMgr.keyEvent_qt1dr2$(e,i,1)}this.props.excludedKeyCodes.contains_11rb$(t.code)||t.preventDefault()},gC.prototype.translateKeyCode_0=function(t){var e;return 4===t.length&&u(t,"Key")?0|t.charCodeAt(3):null!=(e=zC().KEY_CODE_MAP.get_11rb$(t))?e:0},gC.prototype.renderFrame_0=function(t){var e,i=(t-this.animationMillis_0)/1e3;this.animationMillis_0=t,this.windowWidth=this.canvas_0.clientWidth,this.windowHeight=this.canvas_0.clientHeight,this.windowWidth===this.canvas_0.width&&this.windowHeight===this.canvas_0.height||(this.canvas_0.width=this.windowWidth,this.canvas_0.height=this.windowHeight),this.render_14dthe$(i),this.draw_0(),this.gl_8be2vx$.finish(),window.requestAnimationFrame((e=this,function(t){return e.renderFrame_0(t),s}))},gC.prototype.draw_0=function(){var t,e;this.disposablePipelines_8be2vx$.isEmpty()||(this.queueRenderer_8be2vx$.disposePipelines_z4np8a$(this.disposablePipelines_8be2vx$),this.disposablePipelines_8be2vx$.clear()),this.engineStats.resetPerFrameCounts(),t=this.backgroundPasses;for(var i=0;i!==t.size;++i)this.backgroundPasses.get_za3lpa$(i).isEnabled&&(this.drawOffscreen_0(this.backgroundPasses.get_za3lpa$(i)),this.backgroundPasses.get_za3lpa$(i).afterDraw_aemszp$(this));e=this.scenes;for(var n=0;n!==e.size;++n){var o,r=this.scenes.get_za3lpa$(n);if(r.isVisible){o=r.offscreenPasses;for(var s=0;s!==o.size;++s)r.offscreenPasses.get_za3lpa$(s).isEnabled&&(this.drawOffscreen_0(r.offscreenPasses.get_za3lpa$(s)),r.offscreenPasses.get_za3lpa$(s).afterDraw_aemszp$(this));this.queueRenderer_8be2vx$.renderQueue_e0goaf$(r.mainRenderPass.drawQueue),r.mainRenderPass.afterDraw_aemszp$(this)}}if(!this.afterRenderActions_8be2vx$.isEmpty()){var a;for(a=this.afterRenderActions_8be2vx$.iterator();a.hasNext();)a.next()();this.afterRenderActions_8be2vx$.clear()}},gC.prototype.drawOffscreen_0=function(t){if(e.isType(t,ua))t.impl_8be2vx$.draw_44a5h0$(this);else{if(!e.isType(t,pa))throw V("Offscreen pass type not implemented: "+t);t.impl_8be2vx$.draw_44a5h0$(this)}},gC.prototype.openUrl_61zpoe$=function(t){window.open(t)},gC.prototype.run=function(){var t;window.requestAnimationFrame((t=this,function(e){return t.renderFrame_0(e),s}))},gC.prototype.destroy=function(){},gC.prototype.getSysInfos=function(){return this.sysInfo_0},gC.prototype.getWindowViewport_ahq5yh$=function(t){t.set_tjonv8$(0,0,this.windowWidth,this.windowHeight)},bC.$metadata$={kind:$,simpleName:"InitProps",interfaces:[]},xC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var wC=null;function zC(){return null===wC&&new xC,wC}function kC(){this.maxTexUnits_pg826n$_0=16,this.hasFloatTextures_jm9wjj$_0=!1,this.maxAnisotropy_q24ucr$_0=1,this.glTextureMaxAnisotropyExt_a0zvh2$_0=0}function SC(t){var i,n,o,r;return t.clientX-(null!=(r=null!=(o=null!=(n=e.isType(i=t.target,HTMLCanvasElement)?i:null)?n.clientLeft:null)?o:null)?r:0)}function CC(t){var i,n,o,r;return t.clientY-(null!=(r=null!=(o=null!=(n=e.isType(i=t.target,HTMLCanvasElement)?i:null)?n.clientTop:null)?o:null)?r:0)}function NC(t){switch(t.name){case"R":return WebGL2RenderingContext.R8;case"RG":return WebGL2RenderingContext.RG8;case"RGB":return WebGL2RenderingContext.RGB8;case"RGBA":return WebGL2RenderingContext.RGBA8;case"R_F16":return WebGL2RenderingContext.R16F;case"RG_F16":return WebGL2RenderingContext.RG16F;case"RGB_F16":return WebGL2RenderingContext.RGB16F;case"RGBA_F16":return WebGL2RenderingContext.RGBA16F;default:return e.noWhenBranchMatched()}}function EC(t){switch(t.name){case"R":case"RG":case"RGB":case"RGBA":return WebGLRenderingContext.UNSIGNED_BYTE;case"R_F16":case"RG_F16":case"RGB_F16":case"RGBA_F16":return WebGLRenderingContext.FLOAT;default:return e.noWhenBranchMatched()}}function TC(t){switch(t.name){case"R":return WebGL2RenderingContext.RED;case"RG":return WebGL2RenderingContext.RG;case"RGB":return WebGLRenderingContext.RGB;case"RGBA":return WebGLRenderingContext.RGBA;case"R_F16":return WebGL2RenderingContext.RED;case"RG_F16":return WebGL2RenderingContext.RG;case"RGB_F16":return WebGLRenderingContext.RGB;case"RGBA_F16":return WebGLRenderingContext.RGBA;default:return e.noWhenBranchMatched()}}function PC(t){switch(t.name){case"R":return 1;case"RG":return 2;case"RGB":return 3;case"RGBA":return 4;case"R_F16":return 2;case"RG_F16":return 4;case"RGB_F16":return 6;case"RGBA_F16":return 8;default:return e.noWhenBranchMatched()}}function OC(t){switch(t.name){case"DISABLED":return 0;case"ALWAYS":return WebGLRenderingContext.ALWAYS;case"NEVER":return WebGLRenderingContext.NEVER;case"LESS":return WebGLRenderingContext.LESS;case"LESS_EQUAL":return WebGLRenderingContext.LEQUAL;case"GREATER":return WebGLRenderingContext.GREATER;case"GREATER_EQUAL":return WebGLRenderingContext.GEQUAL;case"EQUAL":return WebGLRenderingContext.EQUAL;case"NOT_EQUAL":return WebGLRenderingContext.NOTEQUAL;default:return e.noWhenBranchMatched()}}function MC(t,e){var i;IC(),this.target=t,this.bufferId=(i=IC().nextBufferId_0,IC().nextBufferId_0=i.inc(),i),this.buffer=e.gl_8be2vx$.createBuffer()}function jC(){AC=this,this.nextBufferId_0=Pt}gC.$metadata$={kind:$,simpleName:"JsContext",interfaces:[rn]},Object.defineProperty(kC.prototype,"maxTexUnits",{configurable:!0,get:function(){return this.maxTexUnits_pg826n$_0},set:function(t){this.maxTexUnits_pg826n$_0=t}}),Object.defineProperty(kC.prototype,"hasFloatTextures",{configurable:!0,get:function(){return this.hasFloatTextures_jm9wjj$_0},set:function(t){this.hasFloatTextures_jm9wjj$_0=t}}),Object.defineProperty(kC.prototype,"maxAnisotropy",{configurable:!0,get:function(){return this.maxAnisotropy_q24ucr$_0},set:function(t){this.maxAnisotropy_q24ucr$_0=t}}),Object.defineProperty(kC.prototype,"glTextureMaxAnisotropyExt",{configurable:!0,get:function(){return this.glTextureMaxAnisotropyExt_a0zvh2$_0},set:function(t){this.glTextureMaxAnisotropyExt_a0zvh2$_0=t}}),kC.$metadata$={kind:$,simpleName:"GlCapabilities",interfaces:[]},MC.prototype.delete_44a5h0$=function(t){t.engineStats.bufferDeleted_s8cxhz$(this.bufferId),t.gl_8be2vx$.deleteBuffer(this.buffer)},MC.prototype.bind_44a5h0$=function(t){t.gl_8be2vx$.bindBuffer(this.target,this.buffer)},MC.prototype.setData_phhdsy$=function(t,i,n){var o,r=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(o=t,EN)?o:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,4*t.capacity|0),t.limit=r,t.position=s},MC.prototype.setData_1p7ty3$=function(t,i,n){var o,r=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(o=t,kN)?o:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,t.capacity),t.limit=r,t.position=s},MC.prototype.setData_8qu3as$=function(t,i,n){var o,r=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(o=t,CN)?o:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,2*t.capacity|0),t.limit=r,t.position=s},MC.prototype.setData_ysni9y$=function(t,i,n){var o,r=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(o=t,NN)?o:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,4*t.capacity|0),t.limit=r,t.position=s},MC.prototype.unbind_44a5h0$=function(t){t.gl_8be2vx$.bindBuffer(this.target,null)},jC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var AC=null;function IC(){return null===AC&&new jC,AC}function RC(t,i,n){var o,r,s;for(this.prog=t,this.ctx=n,this.pipelineId_0=i.pipelineHash.data,this.attributes_0=z(),this.instanceAttributes_0=z(),this.uniformLocations_0=z(),this.instances_0=z(),o=i.layout.vertices.bindings.iterator();o.hasNext();){var a,l=o.next();for(a=l.vertexAttributes.iterator();a.hasNext();){var u=a.next();switch(l.inputRate.name){case"VERTEX":var p=this.attributes_0,c=u.attribute.name;p.put_xwzc9p$(c,u);break;case"INSTANCE":var h=this.instanceAttributes_0,d=u.attribute.name;h.put_xwzc9p$(d,u)}}}for(r=i.layout.descriptorSets.iterator();r.hasNext();){var f;for(f=r.next().descriptors.iterator();f.hasNext();){var _,m=f.next();if(e.isType(m,Us))for(_=m.uniforms.iterator();_.hasNext();){var $=_.next(),y=this.uniformLocations_0,v=$.name,g=qt(this.ctx.gl_8be2vx$.getUniformLocation(this.prog,$.name));y.put_xwzc9p$(v,g)}else if(e.isType(m,Ds)){var b=this.uniformLocations_0,x=m.name,w=this.getUniformLocations_0(m.name,m.arraySize);b.put_xwzc9p$(x,w)}else if(e.isType(m,Fs)){var k=this.uniformLocations_0,S=m.name,C=this.getUniformLocations_0(m.name,m.arraySize);k.put_xwzc9p$(S,C)}}}for(s=i.layout.pushConstantRanges.iterator();s.hasNext();){var N;for(N=s.next().pushConstants.iterator();N.hasNext();){var E=N.next(),T=this.uniformLocations_0,P=E.name,O=qt(this.ctx.gl_8be2vx$.getUniformLocation(this.prog,E.name));T.put_xwzc9p$(P,O)}}}function LC(t,i,n){var o,r;for(this.$outer=t,this.mesh=i,this.pipeline=n,this.pushConstants_0=M(),this.ubos_0=M(),this.textures_0=M(),this.cubeMaps_0=M(),this.mappings_0=M(),this.attributeBinders_0=M(),this.instanceAttribBinders_0=M(),this.dataBufferF_0=null,this.dataBufferI_0=null,this.indexBuffer_0=null,this.instanceBuffer_0=null,this.buffersSet_0=!1,this.nextTexUnit_0=WebGLRenderingContext.TEXTURE0,this.numIndices=0,this.indexType=0,this.primitiveType=0,o=this.pipeline.layout.descriptorSets.iterator();o.hasNext();){var s;for(s=o.next().descriptors.iterator();s.hasNext();){var a=s.next();if(e.isType(a,Us))this.mapUbo_0(a);else if(e.isType(a,Ds))this.mapTexture_0(a);else{if(!e.isType(a,Fs))throw new He("An operation is not implemented: "+a.toString());this.mapCubeMap_0(a)}}}for(r=this.pipeline.layout.pushConstantRanges.iterator();r.hasNext();){var l=r.next();this.mapPushConstants_0(l)}this.$outer.ctx.engineStats.pipelineInstanceCreated_s8cxhz$(this.$outer.pipelineId_0)}function DC(t,e){this.vbo=t,this.loc=e}function qC(t,e,i,n){var o;UC(),this.ctx=t,this.target=e,this.texture=i,this.texId=(o=UC().nextTexId_0,UC().nextTexId_0=o.inc(),o),this.isDestroyed_hoph69$_0=!1,this.width_8gbh1k$_0=0,this.height_d6ao4v$_0=0,this.ctx.engineStats.textureAllocated_yhmem3$(this.texId,n)}function FC(){BC=this,this.nextTexId_0=Pt}MC.$metadata$={kind:$,simpleName:"BufferResource",interfaces:[]},RC.prototype.getUniformLocations_0=function(t,e){var i=M();if(e>1)for(var n=0;n<e;n++){var o=this.ctx.gl_8be2vx$.getUniformLocation(this.prog,t+"["+n+"]");i.add_11rb$(o)}else{var r=this.ctx.gl_8be2vx$.getUniformLocation(this.prog,t);i.add_11rb$(r)}return i},RC.prototype.use=function(){var t,e;for(this.ctx.gl_8be2vx$.useProgram(this.prog),t=this.attributes_0.values.iterator();t.hasNext();){var i,n=t.next();i=n.attribute.props.nSlots;for(var o=0;o<i;o++){var r=n.location+o|0;this.ctx.gl_8be2vx$.enableVertexAttribArray(r),this.ctx.gl_8be2vx$.vertexAttribDivisor(r,0)}}for(e=this.instanceAttributes_0.values.iterator();e.hasNext();){var s,a=e.next();s=a.attribute.props.nSlots;for(var l=0;l<s;l++){var u=a.location+l|0;this.ctx.gl_8be2vx$.enableVertexAttribArray(u),this.ctx.gl_8be2vx$.vertexAttribDivisor(u,1)}}},RC.prototype.unUse=function(){var t,e;for(t=this.attributes_0.values.iterator();t.hasNext();){var i,n=t.next();i=n.attribute.props.nSlots;for(var o=0;o<i;o++)this.ctx.gl_8be2vx$.disableVertexAttribArray(n.location+o|0)}for(e=this.instanceAttributes_0.values.iterator();e.hasNext();){var r,s=e.next();r=s.attribute.props.nSlots;for(var a=0;a<r;a++)this.ctx.gl_8be2vx$.disableVertexAttribArray(s.location+a|0)}},RC.prototype.bindInstance_ye1q9v$=function(t){var e,i=x(t.pipeline),n=this.instances_0,o=i.pipelineInstanceId,r=n.get_11rb$(o);if(null==r){var s=new LC(this,t.mesh,i);n.put_xwzc9p$(o,s),e=s}else e=r;var a=e;return a.bindInstance_ye1q9v$(t)?a:null},RC.prototype.destroyInstance_lfrgcb$=function(t){var e;null!=(e=this.instances_0.remove_11rb$(t.pipelineInstanceId))&&(e.destroyInstance(),this.ctx.engineStats.pipelineInstanceDestroyed_s8cxhz$(this.pipelineId_0))},RC.prototype.isEmpty=function(){return this.instances_0.isEmpty()},RC.prototype.destroy=function(){this.ctx.engineStats.pipelineDestroyed_s8cxhz$(this.pipelineId_0),this.ctx.gl_8be2vx$.deleteProgram(this.prog)},LC.prototype.mapPushConstants_0=function(t){this.pushConstants_0.add_11rb$(t);var e,i=t.pushConstants;for(this.$outer,e=i.iterator();e.hasNext();){var n,o,r=e.next(),s=this.$outer;n=this.mappings_0;var a=WC().mappedUniform_lwhlub$(r,null!=(o=s.uniformLocations_0.get_11rb$(r.name))?o.get_za3lpa$(0):null);n.add_11rb$(a)}},LC.prototype.mapUbo_0=function(t){this.ubos_0.add_11rb$(t);var e,i=t.uniforms;for(this.$outer,e=i.iterator();e.hasNext();){var n,o,r=e.next(),s=this.$outer;n=this.mappings_0;var a=WC().mappedUniform_lwhlub$(r,null!=(o=s.uniformLocations_0.get_11rb$(r.name))?o.get_za3lpa$(0):null);n.add_11rb$(a)}},LC.prototype.mapTexture_0=function(t){var e;if(this.textures_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new hN(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},LC.prototype.mapCubeMap_0=function(t){var e;if(this.cubeMaps_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new dN(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},LC.prototype.bindInstance_ye1q9v$=function(t){var e,i,n,o,r,s;e=this.pushConstants_0;for(var a=0;a!==e.size;++a){var l;null!=(l=this.pushConstants_0.get_za3lpa$(a).onUpdate)&&l(this.pushConstants_0.get_za3lpa$(a),t)}i=this.ubos_0;for(var u=0;u!==i.size;++u){var p;null!=(p=this.ubos_0.get_za3lpa$(u).onUpdate)&&p(this.ubos_0.get_za3lpa$(u),t)}n=this.textures_0;for(var c=0;c!==n.size;++c){var h;null!=(h=this.textures_0.get_za3lpa$(c).onUpdate)&&h(this.textures_0.get_za3lpa$(c),t)}o=this.cubeMaps_0;for(var d=0;d!==o.size;++d){var f;null!=(f=this.cubeMaps_0.get_za3lpa$(d).onUpdate)&&f(this.cubeMaps_0.get_za3lpa$(d),t)}var _=!0;r=this.mappings_0;for(var m=0;m!==r.size;++m)_=_&&this.mappings_0.get_za3lpa$(m).setUniform_44a5h0$(this.$outer.ctx);if(this.checkBuffers_0(),_){null!=(s=this.indexBuffer_0)&&s.bind_44a5h0$(this.$outer.ctx);var $,y=this.attributeBinders_0;for(this.$outer,$=y.iterator();$.hasNext();){var v=$.next();v.vbo.bindAttribute_9sni52$(v.loc,this.$outer.ctx)}var g,b=this.instanceAttribBinders_0;for(this.$outer,g=b.iterator();g.hasNext();){var x=g.next();x.vbo.bindAttribute_9sni52$(x.loc,this.$outer.ctx)}}return _},LC.prototype.destroyInstance=function(){var t,e,i,n;null!=(t=this.dataBufferF_0)&&t.delete_44a5h0$(this.$outer.ctx),null!=(e=this.dataBufferI_0)&&e.delete_44a5h0$(this.$outer.ctx),null!=(i=this.indexBuffer_0)&&i.delete_44a5h0$(this.$outer.ctx),null!=(n=this.instanceBuffer_0)&&n.delete_44a5h0$(this.$outer.ctx),this.dataBufferF_0=null,this.dataBufferI_0=null,this.indexBuffer_0=null,this.instanceBuffer_0=null,this.pushConstants_0.clear(),this.ubos_0.clear(),this.textures_0.clear(),this.cubeMaps_0.clear(),this.mappings_0.clear(),this.attributeBinders_0.clear(),this.instanceAttribBinders_0.clear()},LC.prototype.checkBuffers_0=function(){var t,e,i,n,o,r,a,l=this.mesh.geometry;null==this.indexBuffer_0&&(this.indexBuffer_0=new MC(WebGLRenderingContext.ELEMENT_ARRAY_BUFFER,this.$outer.ctx));var u=!1;if(null==this.dataBufferF_0)for(this.dataBufferF_0=new MC(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),t=l.vertexAttributes.iterator();t.hasNext();){var p=t.next();if(p.type.isInt)u=!0;else{var c=l.byteStrideF,h=x(l.attributeByteOffsets.get_11rb$(p))/4|0;xt(this.instanceAttribBinders_0,this.$outer.makeAttribBinders_0(this.$outer.attributes_0,p,x(this.dataBufferF_0),c,h))}}if(u&&null==this.dataBufferI_0)for(this.dataBufferI_0=new MC(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),e=l.vertexAttributes.iterator();e.hasNext();){var d=e.next();if(d.type.isInt&&null!=(i=this.$outer.attributes_0.get_11rb$(d.name))){var f=new wN(x(this.dataBufferI_0),d.type.byteSize/4|0,l.byteStrideI,x(l.attributeByteOffsets.get_11rb$(d))/4|0,WebGLRenderingContext.INT),_=this.attributeBinders_0,m=new DC(f,i.location);_.add_11rb$(m)}}var $,y,v=this.mesh.instances;if(null!=v){var g=this.instanceBuffer_0;if(null==g)for(g=new MC(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),this.instanceBuffer_0=g,n=v.instanceAttributes.iterator();n.hasNext();){var b=n.next(),w=v.strideBytesF,z=x(v.attributeOffsets.get_11rb$(b))/4|0;xt(this.instanceAttribBinders_0,this.$outer.makeAttribBinders_0(this.$outer.instanceAttributes_0,b,x(this.instanceBuffer_0),w,z))}v.hasChanged&&(g.setData_phhdsy$(v.dataF,this.$outer.glUsage_0(v.usage),this.$outer.ctx),this.$outer.ctx.afterRenderActions_8be2vx$.add_11rb$(($=v,function(){return $.hasChanged=!1,s})))}if(!l.isBatchUpdate&&(l.hasChanged||!this.buffersSet_0)){var k=this.$outer.glUsage_0(l.usage);this.indexType=WebGLRenderingContext.UNSIGNED_INT,null!=(o=this.indexBuffer_0)&&o.setData_ysni9y$(l.indices,k,this.$outer.ctx),this.primitiveType=this.$outer.glElemType_0(this.pipeline.layout.vertices.primitiveType),this.numIndices=l.numIndices,null!=(r=this.dataBufferF_0)&&r.setData_phhdsy$(l.dataF,k,this.$outer.ctx),null!=(a=this.dataBufferI_0)&&a.setData_ysni9y$(l.dataI,k,this.$outer.ctx),this.$outer.ctx.afterRenderActions_8be2vx$.add_11rb$((y=l,function(){return y.hasChanged=!1,s})),this.buffersSet_0=!0}},LC.$metadata$={kind:$,simpleName:"ShaderInstance",interfaces:[]},RC.prototype.makeAttribBinders_0=function(t,i,n,o,r){var s,a=M();if(null!=(s=t.get_11rb$(i.name))){var l;l=i.props.nSlots;for(var u=0;u<l;u++){var p=r+e.imul(i.props.attribSize,u)|0,c=new DC(new wN(n,i.props.attribSize,o,p,WebGLRenderingContext.FLOAT),s.location+u|0);a.add_11rb$(c)}}return a},RC.prototype.glElemType_0=function(t){var i;switch(t.name){case"LINES":i=WebGLRenderingContext.LINES;break;case"POINTS":i=WebGLRenderingContext.POINTS;break;case"TRIANGLES":i=WebGLRenderingContext.TRIANGLES;break;default:i=e.noWhenBranchMatched()}return i},RC.prototype.glUsage_0=function(t){var i;switch(t.name){case"DYNAMIC":i=WebGLRenderingContext.DYNAMIC_DRAW;break;case"STATIC":i=WebGLRenderingContext.STATIC_DRAW;break;default:i=e.noWhenBranchMatched()}return i},DC.$metadata$={kind:$,simpleName:"AttributeOnLocation",interfaces:[]},DC.prototype.component1=function(){return this.vbo},DC.prototype.component2=function(){return this.loc},DC.prototype.copy_oubs2w$=function(t,e){return new DC(void 0===t?this.vbo:t,void 0===e?this.loc:e)},DC.prototype.toString=function(){return"AttributeOnLocation(vbo="+e.toString(this.vbo)+", loc="+e.toString(this.loc)+")"},DC.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.vbo)|0)+e.hashCode(this.loc)|0},DC.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.vbo,t.vbo)&&e.equals(this.loc,t.loc)},RC.$metadata$={kind:$,simpleName:"CompiledShader",interfaces:[]},Object.defineProperty(qC.prototype,"isDestroyed",{configurable:!0,get:function(){return this.isDestroyed_hoph69$_0},set:function(t){this.isDestroyed_hoph69$_0=t}}),Object.defineProperty(qC.prototype,"width",{configurable:!0,get:function(){return this.width_8gbh1k$_0},set:function(t){this.width_8gbh1k$_0=t}}),Object.defineProperty(qC.prototype,"height",{configurable:!0,get:function(){return this.height_d6ao4v$_0},set:function(t){this.height_d6ao4v$_0=t}}),qC.prototype.setSize_vux9f0$=function(t,e){this.width=t,this.height=e},qC.prototype.applySamplerProps_xetyfc$=function(t){var i=this.ctx.gl_8be2vx$;i.bindTexture(this.target,this.texture),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_MIN_FILTER,this.glMinFilterMethod_0(t.minFilter,t.mipMapping)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_MAG_FILTER,this.glMagFilterMethod_0(t.magFilter)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_WRAP_S,this.glAddressMode_0(t.addressModeU)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_WRAP_T,this.glAddressMode_0(t.addressModeV));var n=t.maxAnisotropy,o=this.ctx.glCapabilities.maxAnisotropy,r=A.min(n,o);if(r>1&&i.texParameteri(this.target,this.ctx.glCapabilities.glTextureMaxAnisotropyExt,r),r>1&&(t.minFilter===Eh()||t.magFilter===Eh())){var s=KN.Log,a=Cz.WARN,l=e.getKClassFromExpression(this).simpleName;a.level>=s.level.level&&s.printer(a,l,"Texture filtering is NEAREST but anisotropy is "+r+" (> 1)")}},qC.prototype.dispose=function(){this.isDestroyed=!0,this.ctx.gl_8be2vx$.deleteTexture(this.texture),this.ctx.engineStats.textureDeleted_s8cxhz$(this.texId)},qC.prototype.glMinFilterMethod_0=function(t,i){var n;switch(t.name){case"NEAREST":n=i?WebGLRenderingContext.NEAREST_MIPMAP_NEAREST:WebGLRenderingContext.NEAREST;break;case"LINEAR":n=i?WebGLRenderingContext.LINEAR_MIPMAP_LINEAR:WebGLRenderingContext.LINEAR;break;default:n=e.noWhenBranchMatched()}return n},qC.prototype.glMagFilterMethod_0=function(t){var i;switch(t.name){case"NEAREST":i=WebGLRenderingContext.NEAREST;break;case"LINEAR":i=WebGLRenderingContext.LINEAR;break;default:i=e.noWhenBranchMatched()}return i},qC.prototype.glAddressMode_0=function(t){var i;switch(t.name){case"CLAMP_TO_EDGE":i=WebGLRenderingContext.CLAMP_TO_EDGE;break;case"MIRRORED_REPEAT":i=WebGLRenderingContext.MIRRORED_REPEAT;break;case"REPEAT":i=WebGLRenderingContext.REPEAT;break;default:i=e.noWhenBranchMatched()}return i},FC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var BC=null;function UC(){return null===BC&&new FC,BC}function VC(){WC()}function GC(){HC=this}qC.$metadata$={kind:$,simpleName:"LoadedTextureWebGl",interfaces:[Qs]},GC.prototype.mappedUniform_lwhlub$=function(t,i){var n;if(e.isType(t,Kh))n=new KC(t,i);else if(e.isType(t,Yh))n=new XC(t,i);else if(e.isType(t,Zh))n=new YC(t,i);else if(e.isType(t,Jh))n=new ZC(t,i);else if(e.isType(t,td))n=new JC(t,i);else if(e.isType(t,ed))n=new QC(t,i);else if(e.isType(t,id))n=new tN(t,i);else if(e.isType(t,nd))n=new eN(t,i);else if(e.isType(t,Qh))n=new iN(t,i);else if(e.isType(t,od))n=new nN(t,i);else if(e.isType(t,rd))n=new oN(t,i);else if(e.isType(t,sd))n=new rN(t,i);else{if(!e.isType(t,ad))throw new He("An operation is not implemented: Uniform type mapping not implemented");n=new sN(t,i)}return n},GC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var HC=null;function WC(){return null===HC&&new GC,HC}function KC(t,e){this.uniform=t,this.location=e}function XC(t,e){this.uniform=t,this.location=e}function YC(t,e){this.uniform=t,this.location=e}function ZC(t,e){this.uniform=t,this.location=e}function JC(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(this.uniform.length)}function QC(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(2*this.uniform.length|0)}function tN(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(3*this.uniform.length|0)}function eN(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(4*this.uniform.length|0)}function iN(t,e){this.uniform=t,this.location=e}function nN(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(9)}function oN(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(16)}function rN(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(16*this.uniform.length|0)}function sN(t,e){this.uniform=t,this.location=e}function aN(t,e){cN(),this.texUnit=t,this.target=e}function lN(){pN=this,this.loadedTextures_0=z()}function uN(t){return t.isDestroyed}VC.$metadata$={kind:st,simpleName:"MappedUniform",interfaces:[]},KC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform1f(this.location,this.uniform.value),!0},KC.$metadata$={kind:$,simpleName:"MappedUniform1f",interfaces:[VC]},XC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform2f(this.location,this.uniform.value.x,this.uniform.value.y),!0},XC.$metadata$={kind:$,simpleName:"MappedUniform2f",interfaces:[VC]},YC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform3f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z),!0},YC.$metadata$={kind:$,simpleName:"MappedUniform3f",interfaces:[VC]},ZC.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform4f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z,this.uniform.value.w),!0},ZC.$metadata$={kind:$,simpleName:"MappedUniform4f",interfaces:[VC]},JC.prototype.setUniform_44a5h0$=function(t){var e;e=this.uniform.length;for(var i=0;i<e;i++)this.buffer_0[i]=this.uniform.value[i];return t.gl_8be2vx$.uniform1fv(this.location,this.buffer_0),!0},JC.$metadata$={kind:$,simpleName:"MappedUniform1fv",interfaces:[VC]},QC.prototype.setUniform_44a5h0$=function(t){var e,i,n,o=0;e=this.uniform.length;for(var r=0;r<e;r++)this.buffer_0[(i=o,o=i+1|0,i)]=this.uniform.value[r].x,this.buffer_0[(n=o,o=n+1|0,n)]=this.uniform.value[r].y;return t.gl_8be2vx$.uniform2fv(this.location,this.buffer_0),!0},QC.$metadata$={kind:$,simpleName:"MappedUniform2fv",interfaces:[VC]},tN.prototype.setUniform_44a5h0$=function(t){var e,i,n,o,r=0;e=this.uniform.length;for(var s=0;s<e;s++)this.buffer_0[(i=r,r=i+1|0,i)]=this.uniform.value[s].x,this.buffer_0[(n=r,r=n+1|0,n)]=this.uniform.value[s].y,this.buffer_0[(o=r,r=o+1|0,o)]=this.uniform.value[s].z;return t.gl_8be2vx$.uniform3fv(this.location,this.buffer_0),!0},tN.$metadata$={kind:$,simpleName:"MappedUniform3fv",interfaces:[VC]},eN.prototype.setUniform_44a5h0$=function(t){var e,i,n,o,r,s=0;e=this.uniform.length;for(var a=0;a<e;a++)this.buffer_0[(i=s,s=i+1|0,i)]=this.uniform.value[a].x,this.buffer_0[(n=s,s=n+1|0,n)]=this.uniform.value[a].y,this.buffer_0[(o=s,s=o+1|0,o)]=this.uniform.value[a].z,this.buffer_0[(r=s,s=r+1|0,r)]=this.uniform.value[a].w;return t.gl_8be2vx$.uniform4fv(this.location,this.buffer_0),!0},eN.$metadata$={kind:$,simpleName:"MappedUniform4fv",interfaces:[VC]},iN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform4f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z,this.uniform.value.w),!0},iN.$metadata$={kind:$,simpleName:"MappedUniformColor",interfaces:[VC]},nN.prototype.setUniform_44a5h0$=function(t){for(var e=0;e<=8;e++)this.buf_0[e]=this.uniform.value.matrix[e];return t.gl_8be2vx$.uniformMatrix3fv(this.location,!1,this.buf_0),!0},nN.$metadata$={kind:$,simpleName:"MappedUniformMat3f",interfaces:[VC]},oN.prototype.setUniform_44a5h0$=function(t){for(var e=0;e<=15;e++)this.buf_0[e]=this.uniform.value.matrix[e];return t.gl_8be2vx$.uniformMatrix4fv(this.location,!1,this.buf_0),!0},oN.$metadata$={kind:$,simpleName:"MappedUniformMat4f",interfaces:[VC]},rN.prototype.setUniform_44a5h0$=function(t){var e,i,n=0;e=this.uniform.length;for(var o=0;o<e;o++)for(var r=0;r<16;r++)this.buf_0[(i=n,n=i+1|0,i)]=this.uniform.value[o].matrix[r];return t.gl_8be2vx$.uniformMatrix4fv(this.location,!1,this.buf_0),!0},rN.$metadata$={kind:$,simpleName:"MappedUniformMat4fv",interfaces:[VC]},sN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform1i(this.location,this.uniform.value),!0},sN.$metadata$={kind:$,simpleName:"MappedUniform1i",interfaces:[VC]},aN.prototype.checkLoadingState_1iftbi$=function(t,i,n){var o,r,a,l,u,p,h=t.gl_8be2vx$;if(i.loadingState===oh()&&null!=(o=i.loader)){i.loadingState=rh();var d=t.assetMgr.loadTextureAsync_72pzmk$(o);d.invokeOnCompletion_f05bi3$((a=this,l=i,u=d,p=t,function(t){if(null!=t){var i=a,n=KN.Log,o=Cz.ERROR,r=e.getKClassFromExpression(i).simpleName;o.level>=n.level.level&&n.printer(o,r,"Texture loading failed: "+Ct(t)),l.loadingState=ah()}else l.loadedTexture=cN().getLoadedTex_0(u.getCompleted(),l.props,p),l.loadingState=sh();return s}))}if(i.loadingState===sh()){var f=e.isType(r=i.loadedTexture,qC)?r:c();return h.activeTexture(this.texUnit+n|0),h.bindTexture(this.target,f.texture),!0}return!1},lN.prototype.getLoadedTex_0=function(t,e,i){We(this.loadedTextures_0.values,uN);var n,o=this.loadedTextures_0,r=o.get_11rb$(t);if(null==r){var s=xN().loadTexture_hlfduu$(i,e,t);o.put_xwzc9p$(t,s),n=s}else n=r;return n},lN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pN=null;function cN(){return null===pN&&new lN,pN}function hN(t,e,i){aN.call(this,e,WebGLRenderingContext.TEXTURE_2D),this.sampler2d_0=t,this.locations=i}function dN(t,e,i){aN.call(this,e,WebGLRenderingContext.TEXTURE_CUBE_MAP),this.samplerCube_0=t,this.locations=i}function fN(t){this.ctx=t,this.glAttribs_0=new _N(this),this.shaderMgr_0=new vN(this.ctx),this.colorBuffer_0=new Float32Array(4)}function _N(t){this.$outer=t,this.actIsWriteDepth=!0,this.depthTest=null,this.cullMethod=null,this.lineWidth=0}function mN(){Pu.call(this)}function $N(t){return"// "+t+"\n"}function yN(){this.functions=z(),this.mainCode=M()}function vN(t){this.ctx=t,this.shaders=z(),this.currentShader=null}function gN(){bN=this}aN.$metadata$={kind:$,simpleName:"MappedUniformTex",interfaces:[VC]},hN.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.sampler2d_0.arraySize;for(var o=0;o<e;o++){var r=this.sampler2d_0.textures[o];null!=r&&this.checkLoadingState_1iftbi$(t,r,o)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(o),this.texUnit-WebGLRenderingContext.TEXTURE0+o|0):n=!1,i=i+1|0}return n},hN.$metadata$={kind:$,simpleName:"MappedUniformTex2d",interfaces:[aN]},dN.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.samplerCube_0.arraySize;for(var o=0;o<e;o++){var r=this.samplerCube_0.textures[o];null!=r&&this.checkLoadingState_1iftbi$(t,r,o)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(o),this.texUnit-WebGLRenderingContext.TEXTURE0+o|0):n=!1,i=i+1|0}return n},dN.$metadata$={kind:$,simpleName:"MappedUniformCubeMap",interfaces:[aN]},Object.defineProperty(fN.prototype,"gl_0",{configurable:!0,get:function(){return this.ctx.gl_8be2vx$}}),fN.prototype.disposePipelines_z4np8a$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next();this.shaderMgr_0.deleteShader_lfrgcb$(i)}},fN.prototype.renderQueue_e0goaf$=function(t){var i,n,o,r,s,a,l=t.renderPass;if(this.ctx.gl_8be2vx$.viewport(l.viewport.x,l.viewport.y,l.viewport.width,l.viewport.height),e.isType(l,ua)){o=l.config.nColorAttachments;for(var u=0;u<o;u++)null!=(s=null!=(r=l.clearColors[u])?r:l.clearColor)&&(this.colorBuffer_0[0]=s.r,this.colorBuffer_0[1]=s.g,this.colorBuffer_0[2]=s.b,this.colorBuffer_0[3]=s.a,this.ctx.gl_8be2vx$.clearBufferfv(WebGL2RenderingContext.COLOR,u,this.colorBuffer_0));l.clearDepth&&this.ctx.gl_8be2vx$.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT)}else{null!=(a=l.clearColor)&&this.ctx.gl_8be2vx$.clearColor(a.r,a.g,a.b,a.a);var p=this.clearMask_0(l);0!==p&&this.ctx.gl_8be2vx$.clear(p)}for(i=t.commands.iterator();i.hasNext();){var c,h=i.next();if(null!=(n=h.pipeline)&&(this.glAttribs_0.setupPipelineAttribs_lfrgcb$(n),h.mesh.geometry.numIndices>0&&null!=(c=this.shaderMgr_0.setupShader_ye1q9v$(h))&&0!==c.primitiveType&&0!==c.indexType)){var d=h.mesh.instances;null==d?(this.gl_0.drawElements(c.primitiveType,c.numIndices,c.indexType,0),this.ctx.engineStats.addPrimitiveCount_za3lpa$(h.mesh.geometry.numPrimitives)):d.numInstances>0&&(this.gl_0.drawElementsInstanced(c.primitiveType,c.numIndices,c.indexType,0,d.numInstances),this.ctx.engineStats.addPrimitiveCount_za3lpa$(e.imul(h.mesh.geometry.numPrimitives,d.numInstances))),this.ctx.engineStats.addDrawCommandCount_za3lpa$(1)}}},_N.prototype.setupPipelineAttribs_lfrgcb$=function(t){this.setBlendMode_0(t.blendMode),this.setDepthTest_0(t.depthCompareOp),this.setWriteDepth_0(t.isWriteDepth),this.setCullMethod_0(t.cullMethod),this.lineWidth!==t.lineWidth&&(this.lineWidth=t.lineWidth,this.$outer.gl_0.lineWidth(t.lineWidth))},_N.prototype.setCullMethod_0=function(t){if(!zt(this.cullMethod,t))switch(this.cullMethod=t,t.name){case"DEFAULT":case"CULL_BACK_FACES":this.$outer.gl_0.enable(WebGLRenderingContext.CULL_FACE),this.$outer.gl_0.cullFace(WebGLRenderingContext.BACK);break;case"CULL_FRONT_FACES":this.$outer.gl_0.enable(WebGLRenderingContext.CULL_FACE),this.$outer.gl_0.cullFace(WebGLRenderingContext.FRONT);break;case"NO_CULLING":this.$outer.gl_0.disable(WebGLRenderingContext.CULL_FACE)}},_N.prototype.setWriteDepth_0=function(t){this.actIsWriteDepth!==t&&(this.actIsWriteDepth=t,this.$outer.gl_0.depthMask(t))},_N.prototype.setDepthTest_0=function(t){zt(this.depthTest,t)||(this.depthTest=t,t===pl()?this.$outer.gl_0.disable(WebGLRenderingContext.DEPTH_TEST):(this.$outer.gl_0.enable(WebGLRenderingContext.DEPTH_TEST),this.$outer.gl_0.depthFunc(OC(t))))},_N.prototype.setBlendMode_0=function(t){switch(t.name){case"DISABLED":this.$outer.gl_0.disable(WebGLRenderingContext.BLEND);break;case"BLEND_ADDITIVE":this.$outer.gl_0.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND);break;case"BLEND_MULTIPLY_ALPHA":this.$outer.gl_0.blendFunc(WebGLRenderingContext.SRC_ALPHA,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND);break;case"BLEND_PREMULTIPLIED_ALPHA":this.$outer.gl_0.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND)}},_N.$metadata$={kind:$,simpleName:"GlAttribs",interfaces:[]},fN.prototype.clearMask_0=function(t){var e=0;return t.clearDepth&&(e=WebGLRenderingContext.DEPTH_BUFFER_BIT),null!=t.clearColor&&(e|=WebGLRenderingContext.COLOR_BUFFER_BIT),e},fN.$metadata$={kind:$,simpleName:"QueueRendererWebGl",interfaces:[]},mN.prototype.generateShader_lvmec3$=function(t,e,i){var n=this.generateCode_0(t,e);return new ZS(n.component1(),n.component2())},mN.prototype.generateCode_0=function(t,e){var i=this.generateVertexShaderCode_0(t,e),n=this.generateFragmentShaderCode_0(t,e);return t.dumpCode&&(jt("Vertex shader:\n"+i),jt("Fragment shader:\n"+n)),ft(i,n)},mN.prototype.generateVertexShaderCode_0=function(t,e){var i=new yN;return t.vertexStageGraph.generateCode_626509$(i),_e("\n            #version 300 es\n            "+this.infoStr_0(t)+"\n            \n            // descriptor layout / uniforms "+this.generateDescriptorBindings_0(e,Hp())+"\n            // vertex attributes "+this.generateAttributeBindings_0(e)+"\n            // outputs "+this.generateStageOutputs_0(t.vertexStageGraph)+"\n            // functions\n            "+i.generateFunctions()+"\n            \n            void main() {\n                "+i.generateMain()+"\n                gl_Position = "+t.vertexStageGraph.positionOutput.variable.ref4f_61zpoe$()+";\n            }\n        ")},mN.prototype.generateFragmentShaderCode_0=function(t,e){var i=new yN;return t.fragmentStageGraph.generateCode_626509$(i),_e("\n            #version 300 es\n            precision highp float;\n            precision highp sampler2DShadow;\n            "+this.infoStr_0(t)+"\n\n            // descriptor layout / uniforms "+this.generateDescriptorBindings_0(e,Yp())+"\n            // inputs "+this.generateStageInputs_0(t.fragmentStageGraph)+"\n            // functions\n            "+i.generateFunctions()+"\n            \n            void main() {\n                "+i.generateMain()+"\n            }\n        ")},mN.prototype.infoStr_0=function(t){return Mt(Je(t.modelInfo),void 0,void 0,void 0,void 0,void 0,$N)},mN.prototype.generateDescriptorBindings_0=function(t,i){var n,o=new Qe("\n");for(n=t.descriptorSets.iterator();n.hasNext();){var r;for(r=n.next().descriptors.iterator();r.hasNext();){var s=r.next();if(s.stages.contains_11rb$(i))if(e.isType(s,Us))o.append_pdl1vj$(this.generateUniformBuffer_0(s));else if(e.isType(s,Ds))o.append_pdl1vj$(this.generateTextureSampler_0(s));else{if(!e.isType(s,Fs))throw new He("An operation is not implemented: Descriptor type not implemented: "+s);o.append_pdl1vj$(this.generateCubeMapSampler_0(s))}}}var a,l,u=t.pushConstantRanges,p=M();for(a=u.iterator();a.hasNext();){var c=a.next();c.stages.contains_11rb$(i)&&p.add_11rb$(c)}if(!p.isEmpty())for(l=t.pushConstantRanges.iterator();l.hasNext();){var h;for(h=l.next().pushConstants.iterator();h.hasNext();){var d=h.next();this.appendln_0(o,"uniform "+this.declare_0(d)+";")}}return o.toString()},mN.prototype.generateUniformBuffer_0=function(t){var e,i=Ot();for(e=t.uniforms.iterator();e.hasNext();){var n=e.next();this.appendln_0(i,"uniform "+this.declare_0(n)+";")}return i.toString()},mN.prototype.generateTextureSampler_0=function(t){var e=t.isDepthSampler?"sampler2DShadow":"sampler2D",i=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform "+e+" "+t.name+i+";\n"},mN.prototype.generateCubeMapSampler_0=function(t){var e=t.isDepthSampler?"samplerCubeShadow":"samplerCube",i=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform "+e+" "+t.name+i+";\n"},mN.prototype.generateAttributeBindings_0=function(t){var e,i=new Qe("\n");for(e=t.vertices.bindings.iterator();e.hasNext();){var n;for(n=e.next().vertexAttributes.iterator();n.hasNext();){var o=n.next();this.appendln_0(i,"layout(location="+o.location+") in "+o.type.glslType+" "+o.name+";")}}return i.toString()},mN.prototype.generateStageInputs_0=function(t){var e,i=new Qe("\n");for(e=t.inputs.iterator();e.hasNext();){var n=e.next(),o=n.isFlat?"flat":"";this.appendln_0(i,o+" in "+n.variable.glslType()+" "+n.variable.name+";")}return i.toString()},mN.prototype.generateStageOutputs_0=function(t){var e,i=new Qe("\n");for(e=t.outputs.iterator();e.hasNext();){var n=e.next(),o=n.isFlat?"flat":"";this.appendln_0(i,o+" out "+n.variable.glslType()+" "+n.variable.name+";")}return i.toString()},mN.prototype.appendln_0=function(t,e){return t.append_pdl1vj$(e+"\n")},mN.prototype.declare_0=function(t){var i;if(e.isType(t,Kh))i="float "+t.name;else if(e.isType(t,Yh))i="vec2 "+t.name;else if(e.isType(t,Zh))i="vec3 "+t.name;else if(e.isType(t,Jh))i="vec4 "+t.name;else if(e.isType(t,Qh))i="vec4 "+t.name;else if(e.isType(t,td))i="float "+t.name+"["+t.length+"]";else if(e.isType(t,ed))i="vec2 "+t.name+"["+t.length+"]";else if(e.isType(t,id))i="vec3 "+t.name+"["+t.length+"]";else if(e.isType(t,nd))i="vec4 "+t.name+"["+t.length+"]";else if(e.isType(t,od))i="mat3 "+t.name;else if(e.isType(t,rd))i="mat4 "+t.name;else if(e.isType(t,sd))i="mat4 "+t.name+"["+t.length+"]";else{if(!e.isType(t,ad))throw new He("An operation is not implemented: Uniform type name not implemented: "+t);i="int "+t.name}return i},yN.prototype.appendFunction_puj7f4$=function(t,e){this.functions.put_xwzc9p$(t,e)},yN.prototype.appendMain_61zpoe$=function(t){this.mainCode.add_11rb$(t)},yN.prototype.sampleTexture2d_buzeal$$default=function(t,e,i){return null==i?"texture("+t+", "+e+")":"textureLod("+t+", "+e+", "+Ct(i)+")"},yN.prototype.sampleTexture2dDepth_puj7f4$=function(t,e){return"textureProj("+t+", "+e+")"},yN.prototype.sampleTextureCube_buzeal$$default=function(t,e,i){return this.sampleTexture2d_buzeal$(t,e,i)},yN.prototype.generateFunctions=function(){return Mt(this.functions.values,"\n")},yN.prototype.generateMain=function(){return Mt(this.mainCode,"\n")},yN.$metadata$={kind:$,simpleName:"CodeGen",interfaces:[Pl]},mN.$metadata$={kind:$,simpleName:"ShaderGeneratorImplWebGl",interfaces:[Pu]},Object.defineProperty(vN.prototype,"gl_0",{configurable:!0,get:function(){return this.ctx.gl_8be2vx$}}),vN.prototype.setupShader_ye1q9v$=function(t){var e,i,n=x(t.pipeline),o=this.shaders,r=o.get_11rb$(n);if(null==r){var s=new RC(this.compileShader_0(n.shaderCode),n,this.ctx);o.put_xwzc9p$(n,s),i=s}else i=r;var a=i;return a!==this.currentShader&&(null!=(e=this.currentShader)&&e.unUse(),this.currentShader=a,a.use()),a.bindInstance_ye1q9v$(t)},vN.prototype.deleteShader_lfrgcb$=function(t){var e=this.shaders.get_11rb$(t);null!=e&&(e.destroyInstance_lfrgcb$(t),e.isEmpty()&&(zt(e,this.currentShader)&&(e.unUse(),this.currentShader=null),e.destroy(),this.shaders.remove_11rb$(t)))},vN.prototype.compileShader_0=function(t){var i=this.gl_0.createShader(WebGLRenderingContext.VERTEX_SHADER);this.gl_0.shaderSource(i,t.vertexSrc),this.gl_0.compileShader(i);var n=this.gl_0.getShaderParameter(i,WebGLRenderingContext.COMPILE_STATUS);if(!zt(n,!0)){var o=this.gl_0.getShaderInfoLog(i),r=KN.Log,s=Cz.ERROR,a=e.getKClassFromExpression(this).simpleName;s.level>=r.level.level&&r.printer(s,a,"Vertex shader compilation failed:\n"+Ct(o));var l=KN.Log,u=Cz.ERROR,p=e.getKClassFromExpression(this).simpleName;throw u.level>=l.level.level&&l.printer(u,p,"Shader source: \n"+this.formatShaderSrc_0(t.vertexSrc)),cn("Vertex shader compilation failed: "+Ct(o))}var c=this.gl_0.createShader(WebGLRenderingContext.FRAGMENT_SHADER);this.gl_0.shaderSource(c,t.fragmentSrc),this.gl_0.compileShader(c);var h=this.gl_0.getShaderParameter(c,WebGLRenderingContext.COMPILE_STATUS);if(!zt(h,!0)){var d=this.gl_0.getShaderInfoLog(c),f=KN.Log,_=Cz.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"Fragment shader compilation failed:\n"+Ct(d));var $=KN.Log,y=Cz.ERROR,v=e.getKClassFromExpression(this).simpleName;throw y.level>=$.level.level&&$.printer(y,v,"Shader source: \n"+this.formatShaderSrc_0(t.fragmentSrc)),cn("Fragment shader compilation failed: "+Ct(d))}var g=this.gl_0.createProgram();if(this.gl_0.attachShader(g,i),this.gl_0.attachShader(g,c),this.gl_0.linkProgram(g),this.gl_0.deleteShader(i),this.gl_0.deleteShader(c),!zt(this.gl_0.getProgramParameter(g,WebGLRenderingContext.LINK_STATUS),!0)){var b=this.gl_0.getProgramInfoLog(g),x=KN.Log,w=Cz.ERROR,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Shader linkage failed:\n"+Ct(b));var k=KN.Log,S=Cz.ERROR,C=e.getKClassFromExpression(this).simpleName;S.level>=k.level.level&&k.printer(S,C,"Vertex shader source: \n"+this.formatShaderSrc_0(t.vertexSrc));var N=KN.Log,E=Cz.ERROR,T=e.getKClassFromExpression(this).simpleName;throw E.level>=N.level.level&&N.printer(E,T,"Fragment shader source: \n"+this.formatShaderSrc_0(t.fragmentSrc)),cn("Shader linkage failed: "+Ct(b))}return g},vN.prototype.formatShaderSrc_0=function(t){var e,i,n=Ot(),o=0;for(e=Je(t).iterator();e.hasNext();){var r=e.next();n.append_pdl1vj$((J((i=o,o=i+1|0,i))+1|0).toString()+" "+r+"\n")}return n.toString()},vN.$metadata$={kind:$,simpleName:"ShaderManager",interfaces:[]},gN.prototype.loadTexture_hlfduu$=function(t,i,n){var o;if(e.isType(n,Rh))o=this.loadTexture2d_0(t,i,n);else if(e.isType(n,QS))o=this.loadTexture2d_0(t,i,n);else{if(!e.isType(n,Hh))throw V("TextureData type not supported: "+n);o=this.loadTextureCube_0(t,i,n)}return o},gN.prototype.loadTextureCube_0=function(t,e,i){var n=t.gl_8be2vx$,o=new qC(t,WebGLRenderingContext.TEXTURE_CUBE_MAP,n.createTexture(),this.estimateTexSize_0(i));return o.setSize_vux9f0$(i.width,i.height),o.applySamplerProps_xetyfc$(e),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X,i.right),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_X,i.left),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_Y,i.up),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_Y,i.down),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_Z,i.back),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_Z,i.front),e.mipMapping&&n.generateMipmap(WebGLRenderingContext.TEXTURE_CUBE_MAP),o},gN.prototype.loadTexture2d_0=function(t,e,i){var n=t.gl_8be2vx$,o=new qC(t,WebGLRenderingContext.TEXTURE_2D,n.createTexture(),this.estimateTexSize_0(i));return o.setSize_vux9f0$(i.width,i.height),o.applySamplerProps_xetyfc$(e),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_2D,i),e.mipMapping&&n.generateMipmap(WebGLRenderingContext.TEXTURE_2D),o},gN.prototype.estimateTexSize_0=function(t){var i=e.isType(t,Hh)?6:1,n=t.width,o=t.height,r=A.max(n,o),s=A.log2(r),a=B(A.floor(s))+1|0;return ph().estimatedTexSize_4qozqa$(t.width,t.height,PC(t.format),i,a)},gN.prototype.texImage2d_0=function(t,i,n){var o;if(t.pixelStorei(WebGLRenderingContext.UNPACK_COLORSPACE_CONVERSION_WEBGL,WebGLRenderingContext.NONE),e.isType(n,Rh))t.texImage2D(i,0,NC(n.format),n.width,n.height,0,TC(n.format),EC(n.format),(e.isType(o=n.data,kN)?o:c()).buffer);else{if(!e.isType(n,QS))throw V("Invalid TextureData type for texImage2d: "+n);t.texImage2D(i,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,n.data)}},gN.$metadata$={kind:y,simpleName:"TextureLoader",interfaces:[]};var bN=null;function xN(){return null===bN&&new gN,bN}function wN(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=WebGLRenderingContext.FLOAT),this.vbo=t,this.elemSize=e,this.strideBytes=i,this.offset=n,this.type=o}function zN(t,e){this.capacity_tfbtga$_0=t,this.buffer=e(),this.limit_wr5sjr$_0=this.capacity,this.position_xkur2v$_0=0}function kN(t){var e;zN.call(this,t.length,(e=t,function(){return e}))}function SN(t,e){return e=e||Object.create(kN.prototype),kN.call(e,new Uint8Array(t)),e}function CN(t){var e;zN.call(this,t,(e=t,function(){return new Uint16Array(e)}))}function NN(t){var e;zN.call(this,t,(e=t,function(){return new Uint32Array(e)}))}function EN(t){var e;zN.call(this,t,(e=t,function(){return new Float32Array(e)}))}function TN(t){var e;zN.call(this,t,(e=t,function(){return new DataView(new ArrayBuffer(e))}))}function PN(t){return SN(t)}function ON(t){return new NN(t)}function MN(t){return new EN(t)}function jN(t){return new TN(t)}wN.prototype.bindAttribute_9sni52$=function(t,e){this.vbo.bind_44a5h0$(e),this.type===WebGLRenderingContext.INT||this.type===WebGLRenderingContext.UNSIGNED_INT?e.gl_8be2vx$.vertexAttribIPointer(t,this.elemSize,this.type,this.strideBytes,4*this.offset|0):e.gl_8be2vx$.vertexAttribPointer(t,this.elemSize,this.type,!1,this.strideBytes,4*this.offset|0)},wN.$metadata$={kind:$,simpleName:"VboBinder",interfaces:[]},Object.defineProperty(zN.prototype,"capacity",{get:function(){return this.capacity_tfbtga$_0}}),Object.defineProperty(zN.prototype,"limit",{configurable:!0,get:function(){return this.limit_wr5sjr$_0},set:function(t){if(t<0||t>this.capacity)throw cn("Limit is out of bounds: "+t+" (capacity: "+this.capacity+")");this.limit_wr5sjr$_0=t,this.position>t&&(this.position=t)}}),Object.defineProperty(zN.prototype,"position",{configurable:!0,get:function(){return this.position_xkur2v$_0},set:function(t){this.position_xkur2v$_0=t}}),Object.defineProperty(zN.prototype,"remaining",{configurable:!0,get:function(){return this.limit-this.position|0}}),zN.prototype.flip=function(){this.limit=this.position,this.position=0},zN.prototype.clear=function(){this.limit=this.capacity,this.position=0},zN.$metadata$={kind:$,simpleName:"GenericBuffer",interfaces:[F$]},kN.prototype.get_za3lpa$=function(t){return this.buffer[t]},kN.prototype.set_6t1wet$=function(t,e){this.buffer[t]=e},kN.prototype.put_mj6st8$=function(t,e,i){var n,o;n=e+i|0;for(var r=e;r<n;r++)this.buffer[(o=this.position,this.position=o+1|0,o)]=t[r];return this},kN.prototype.put_s8j3t7$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},kN.prototype.put_ay2i3f$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_s8j3t7$(t.get_za3lpa$(n));return this},kN.$metadata$={kind:$,simpleName:"Uint8BufferImpl",interfaces:[zN,B$]},CN.prototype.get_za3lpa$=function(t){return this.buffer[t]},CN.prototype.set_2bqt6h$=function(t,e){this.buffer[t]=e},CN.prototype.put_359eei$=function(t,e,i){var n,o;n=e+i-1|0;for(var r=e;r<=n;r++)this.buffer[(o=this.position,this.position=o+1|0,o)]=t[r];return this},CN.prototype.put_mq22fl$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},CN.prototype.put_8k344i$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_mq22fl$(t.get_za3lpa$(n));return this},CN.$metadata$={kind:$,simpleName:"Uint16BufferImpl",interfaces:[zN,U$]},NN.prototype.get_za3lpa$=function(t){return this.buffer[t]},NN.prototype.set_vux9f0$=function(t,e){this.buffer[t]=e},NN.prototype.put_nd5v6f$=function(t,e,i){var n,o;n=e+i-1|0;for(var r=e;r<=n;r++)this.buffer[(o=this.position,this.position=o+1|0,o)]=t[r];return this},NN.prototype.put_za3lpa$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},NN.prototype.put_7hqxcs$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_za3lpa$(t.get_za3lpa$(n));return this},NN.$metadata$={kind:$,simpleName:"Uint32BufferImpl",interfaces:[zN,V$]},EN.prototype.get_za3lpa$=function(t){return this.buffer[t]},EN.prototype.set_24o109$=function(t,e){this.buffer[t]=e},EN.prototype.put_kgymra$=function(t,e,i){var n,o;n=e+i|0;for(var r=e;r<n;r++)this.buffer[(o=this.position,this.position=o+1|0,o)]=t[r];return this},EN.prototype.put_mx4ult$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},EN.prototype.put_he122g$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_mx4ult$(t.get_za3lpa$(n));return this},EN.$metadata$={kind:$,simpleName:"Float32BufferImpl",interfaces:[zN,G$]},TN.prototype.putUint8_s8j3t7$=function(t){var e;return this.buffer.setUint8((e=this.position,this.position=e+1|0,e),t),this},TN.prototype.putUint8_mj6st8$=function(t,e,i){var n,o;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setUint8((o=this.position,this.position=o+1|0,o),t[r]);return this},TN.prototype.putUint8_ay2i3f$=function(t){var e,i,n;e=t.position,i=t.limit;for(var o=e;o<i;o++)this.buffer.setUint8((n=this.position,this.position=n+1|0,n),t.get_za3lpa$(o));return this},TN.prototype.putUint16_mq22fl$=function(t){return this.buffer.setUint16(this.position,t),this.position=this.position+2|0,this},TN.prototype.putUint16_359eei$=function(t,e,i){var n;n=e+i|0;for(var o=e;o<n;o++)this.buffer.setUint16(this.position,t[o]),this.position=this.position+2|0;return this},TN.prototype.putUint16_8k344i$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setUint16(this.position,t.get_za3lpa$(n)),this.position=this.position+2|0;return this},TN.prototype.putUint32_za3lpa$=function(t){return this.buffer.setUint32(this.position,t),this.position=this.position+4|0,this},TN.prototype.putUint32_nd5v6f$=function(t,e,i){var n;n=e+i|0;for(var o=e;o<n;o++)this.buffer.setUint32(this.position,t[o]),this.position=this.position+4|0;return this},TN.prototype.putUint32_7hqxcs$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setUint32(this.position,t.get_za3lpa$(n)),this.position=this.position+4|0;return this},TN.prototype.putFloat32_mx4ult$=function(t){return this.buffer.setFloat32(this.position,t),this.position=this.position+4|0,this},TN.prototype.putFloat32_kgymra$=function(t,e,i){var n;n=e+i|0;for(var o=e;o<n;o++)this.buffer.setFloat32(this.position,t[o]),this.position=this.position+4|0;return this},TN.prototype.putFloat32_he122g$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setFloat32(this.position,t.get_za3lpa$(n)),this.position=this.position+4|0;return this},TN.$metadata$={kind:$,simpleName:"MixedBufferImpl",interfaces:[zN,H$]},ei.AwaitedAsset=li,Object.defineProperty(ei,"Companion",{get:ci}),r["kotlinx-coroutines-core"]=n;var AN=t.de||(t.de={}),IN=AN.fabmax||(AN.fabmax={}),RN=IN.kool||(IN.kool={});RN.AssetManager=ei,RN.AssetRef=$i,RN.LocalRawAssetRef=yi,RN.HttpRawAssetRef=vi,RN.LocalTextureAssetRef=gi,RN.HttpTextureAssetRef=bi,RN.LoadedAsset=xi,RN.LoadedRawAsset=wi,RN.LoadedTextureAsset=zi,RN.EngineStats=ki,Si.Pointer=Ei,Object.defineProperty(Pi,"STARTED",{get:Ai}),Object.defineProperty(Pi,"ACTIVE",{get:Li}),Object.defineProperty(Pi,"ENDED_BEFORE_STARTED",{get:Fi}),Object.defineProperty(Pi,"ENDED_BEFORE_ACTIVE",{get:Vi}),Object.defineProperty(Pi,"ENDED",{get:Wi}),Object.defineProperty(Pi,"INVALID",{get:Yi}),Ti.UpdateState=Pi,Si.BufferedPointerInput=Ti,Si.KeyEventListener=Zi,Si.KeyEvent=Qi,Si.PointerState=tn,Object.defineProperty(Si,"Companion",{get:on}),RN.InputManager=Si,Object.defineProperty(rn,"Companion",{get:un}),RN.KoolContext=rn,RN.KoolException_init_61zpoe$=cn,RN.KoolException=pn;var LN=RN.math||(RN.math={});LN.BSpline=hn,LN.BSplineVec2f=dn,Object.defineProperty($n,"Companion",{get:gn}),LN.Mat3f=$n,Object.defineProperty(bn,"Companion",{get:zn}),LN.Mat4d=bn,Object.defineProperty(kn,"Companion",{get:Nn}),LN.Mat4dStack=kn,Object.defineProperty(En,"Companion",{get:On}),LN.Mat4f=En,Object.defineProperty(Mn,"Companion",{get:Bn}),LN.Mat4fStack=Mn,Object.defineProperty(LN,"DEG_2_RAD",{get:function(){return An}}),Object.defineProperty(LN,"RAD_2_DEG",{get:function(){return In}}),Object.defineProperty(LN,"FUZZY_EQ_F",{get:function(){return Rn}}),Object.defineProperty(LN,"FUZZY_EQ_D",{get:function(){return Ln}}),LN.getNumMipLevels_vux9f0$=Un,LN.smoothStep_y2kzbl$=function(t,e,i){var n,o=(i-t)/(e-t);return(n=o<0?0:o>1?1:o)*n*(3-2*n)},LN.triArea_n440fu$=Vn,LN.triAspectRatio_n440fu$=Gn,LN.partition_iuu93u$=Kn,LN.partition_6k0an1$=Xn,LN.Plane=Yn,LN.distanceToRay_f1pxpf$=Zn,LN.sqrDistanceToRay_f1pxpf$=Jn,LN.sqrDistancePointToRay_dthv57$=Qn,LN.PointDistribution=to,Object.defineProperty(LN,"defaultRandomInstance",{get:function(){return qn}}),LN.randomI=function(){return qn.randomI()},LN.randomF_dleff0$=function(t,e){return qn.randomF_dleff0$(t,e)},LN.Random=eo,LN.Ray=io,LN.RayTest=no,Object.defineProperty(oo,"Companion",{get:ao}),LN.Vec2f_init_mx4ult$=lo,LN.Vec2f=oo,LN.MutableVec2f_init=po,LN.MutableVec2f_init_czzhjp$=co,LN.MutableVec2f=uo,Object.defineProperty(ho,"Companion",{get:mo}),LN.Vec2d_init_14dthe$=$o,LN.Vec2d=ho,LN.MutableVec2d_init=vo,LN.MutableVec2d=yo,Object.defineProperty(go,"Companion",{get:wo}),LN.Vec2i_init_za3lpa$=zo,LN.Vec2i=go,LN.MutableVec2i_init=So,LN.MutableVec2i=ko,Object.defineProperty(Co,"Companion",{get:To}),LN.Vec3f_init_mx4ult$=Po,LN.Vec3f_init_czzhiu$=Oo,LN.Vec3f=Co,LN.MutableVec3f_init=jo,LN.MutableVec3f_init_mx4ult$=Ao,LN.MutableVec3f_init_czzhiu$=Io,LN.MutableVec3f=Mo,Object.defineProperty(Ro,"Companion",{get:qo}),LN.Vec3d_init_14dthe$=Fo,LN.Vec3d=Ro,LN.MutableVec3d_init=Uo,LN.MutableVec3d_init_czzhiw$=function(t,e){return e=e||Object.create(Bo.prototype),Bo.call(e,t.x,t.y,t.z),e},LN.MutableVec3d=Bo,Object.defineProperty(Vo,"Companion",{get:Wo}),LN.Vec3i_init_za3lpa$=Ko,LN.Vec3i=Vo,LN.MutableVec3i_init=Yo,LN.MutableVec3i=Xo,Object.defineProperty(Zo,"Companion",{get:tr}),LN.Vec4f_init_mx4ult$=er,LN.Vec4f_init_2qa7tb$=ir,LN.Vec4f=Zo,LN.MutableVec4f_init=or,LN.MutableVec4f=nr,Object.defineProperty(rr,"Companion",{get:lr}),LN.Vec4d_init_14dthe$=ur,LN.Vec4d=rr,LN.MutableVec4d_init=cr,LN.MutableVec4d=pr,Object.defineProperty(hr,"Companion",{get:Sr}),LN.Vec4i_init_za3lpa$=Cr,LN.Vec4i=hr,LN.MutableVec4i_init=Er,LN.MutableVec4i=Nr,LN.scale_2qa7tb$=function(t,e){return t.scale_749b8l$(e,jo())},LN.cross_4lfkt4$=Tr;var DN=RN.modules||(RN.modules={});Pr.EdgeHandler=Or,Pr.HalfEdgeVertex=jr,Pr.HalfEdge=Ar;var qN=DN.mesh||(DN.mesh={});qN.HalfEdgeMesh=Pr,qN.ListEdgeHandler=Ir,qN.OcTreeEdgeHandler=Dr;var FN=qN.simplification||(qN.simplification={});FN.CollapseStrategy=Fr,FN.defaultCollapseStrategy=Ur,FN.ErrorQuadric=Vr,FN.simplify_hem9$=function(t,e,i){void 0===i&&(i=vt());var n=new Gr(e);xt(n.excludedEdges,i),n.simplifyMesh_mnbsaa$(t)},FN.MeshSimplifier=Gr,FN.TermCriterion=Xr,FN.terminateOnFaceCountRel_14dthe$=function(t){return new Yr(t)},Object.defineProperty(Zr,"FLOAT",{get:Qr}),Object.defineProperty(Zr,"VEC_2F",{get:ts}),Object.defineProperty(Zr,"VEC_3F",{get:es}),Object.defineProperty(Zr,"VEC_4F",{get:is}),Object.defineProperty(Zr,"INT",{get:ns}),Object.defineProperty(Zr,"VEC_2I",{get:os}),Object.defineProperty(Zr,"VEC_3I",{get:rs}),Object.defineProperty(Zr,"VEC_4I",{get:ss}),Object.defineProperty(Zr,"MAT_2F",{get:as}),Object.defineProperty(Zr,"MAT_3F",{get:ls}),Object.defineProperty(Zr,"MAT_4F",{get:us});var BN=RN.pipeline||(RN.pipeline={});BN.GlslType=Zr,Object.defineProperty(ps,"Companion",{get:ds}),BN.Attribute=ps,Object.defineProperty(fs,"Companion",{get:$s}),BN.DepthMapPass=fs,Object.defineProperty(ys,"Companion",{get:Ms}),BN.NormalLinearDepthMapPass_init_br7tm5$=js,BN.NormalLinearDepthMapPass=ys,As.Builder=Is,BN.DescriptorSetLayout=As,Rs.Builder=Ls,BN.Descriptor=Rs,Ds.Builder=qs,BN.TextureSampler=Ds,Fs.Builder=Bs,BN.CubeMapSampler=Fs,Us.Builder=Vs,BN.UniformBuffer=Us,Object.defineProperty(Gs,"IMAGE_SAMPLER",{get:Ws}),Object.defineProperty(Gs,"CUBE_IMAGE_SAMPLER",{get:Ks}),Object.defineProperty(Gs,"UNIFORM_BUFFER",{get:Xs}),BN.DescriptorType=Gs;var UN=BN.drawqueue||(BN.drawqueue={});UN.DrawCommand=Ys,UN.DrawQueue=Zs,BN.LoadedTexture=Qs,BN.OffscreenRenderPass=ta,ta.Config=ea,ta.ConfigBuilder=ia,ta.TextureAttachmentConfig=na,ta.TextureAttachmentConfigBuilder=oa,Object.defineProperty(ra,"TEXTURE",{get:aa}),Object.defineProperty(ra,"RENDER_BUFFER",{get:la}),ta.RenderTarget=ra,BN.OffscreenRenderPass2d=ua,Object.defineProperty(ha,"FRONT",{get:fa}),Object.defineProperty(ha,"BACK",{get:_a}),Object.defineProperty(ha,"LEFT",{get:ma}),Object.defineProperty(ha,"RIGHT",{get:$a}),Object.defineProperty(ha,"UP",{get:ya}),Object.defineProperty(ha,"DOWN",{get:va}),pa.ViewDirection=ha,BN.OffscreenRenderPassCube=pa,ba.Layout=xa,ba.Builder=wa,Object.defineProperty(ba,"Companion",{get:el}),BN.Pipeline=ba,Object.defineProperty(il,"DISABLED",{get:ol}),Object.defineProperty(il,"BLEND_ADDITIVE",{get:rl}),Object.defineProperty(il,"BLEND_MULTIPLY_ALPHA",{get:sl}),Object.defineProperty(il,"BLEND_PREMULTIPLIED_ALPHA",{get:al}),BN.BlendMode=il,Object.defineProperty(ll,"DISABLED",{get:pl}),Object.defineProperty(ll,"ALWAYS",{get:cl}),Object.defineProperty(ll,"NEVER",{get:hl}),Object.defineProperty(ll,"LESS",{get:dl}),Object.defineProperty(ll,"LESS_EQUAL",{get:fl}),Object.defineProperty(ll,"GREATER",{get:_l}),Object.defineProperty(ll,"GREATER_EQUAL",{get:ml}),Object.defineProperty(ll,"EQUAL",{get:$l}),Object.defineProperty(ll,"NOT_EQUAL",{get:yl}),BN.DepthCompareOp=ll,Object.defineProperty(vl,"DEFAULT",{get:bl}),Object.defineProperty(vl,"CULL_BACK_FACES",{get:xl}),Object.defineProperty(vl,"CULL_FRONT_FACES",{get:wl}),Object.defineProperty(vl,"NO_CULLING",{get:zl}),BN.CullMethod=vl,kl.Builder=Sl,BN.PushConstantRange=kl,Cl.UpdateEvent=Nl,BN.RenderPass=Cl,BN.ScreenRenderPass=El,BN.Shader=Tl,Object.defineProperty(Ol,"Y_UP",{get:jl}),Object.defineProperty(Ol,"Y_DOWN",{get:Al}),Pl.ClipSpaceOrientation=Ol;var VN=BN.shadermodel||(BN.shadermodel={});VN.CodeGenerator=Pl,VN.ColorAlphaNode=Il,VN.PremultiplyColorNode=Rl,VN.GammaNode=Ll,VN.HdrToLdrNode=Dl,VN.FragmentColorOutNode=ql,VN.FragmentDepthOutNode=Fl,VN.DiscardAlphaNode=Bl,VN.MultiLightNode=Ul,VN.SingleLightUniformDataNode=Gl,VN.SingleLightNode=Wl,VN.SinglePointLightNode=Kl,VN.SingleSpotLightNode=Xl,VN.UnlitMaterialNode=Yl,VN.PhongMaterialNode=Zl,VN.PbrMaterialNode=Jl,VN.PbrLightNode=Ql,VN.MathOpNode=tu,VN.AddNode=eu,VN.SubtractNode=iu,VN.DivideNode=nu,VN.MultiplyNode=ou,VN.MixNode=ru,VN.VecFromColorNode=su,VN.DistanceNode=au,VN.NormalizeNode=lu,VN.ViewDirNode=uu,VN.ReflectNode=pu,VN.RefractNode=cu,VN.ModelVar=hu,VN.ModelVar1f=du,VN.ModelVar2f=fu,VN.ModelVar3f=_u,VN.ModelVar4f=mu,VN.ModelVar3fv=$u,VN.ModelVar1i=yu,VN.ModelVar2i=vu,VN.ModelVar3i=gu,VN.ModelVar4i=bu,VN.ModelVarMat4f=xu,VN.ModelVar1fConst=wu,VN.ModelVar2fConst=zu,VN.ModelVar3fConst=ku,VN.ModelVar4fConst=Su,VN.ModelVar1iConst=Cu,VN.ModelVar2iConst=Nu,VN.ModelVar3iConst=Eu,VN.ModelVar4iConst=Tu,VN.ShaderGenerator=Pu,VN.ShaderInterfaceIoVar=Ou,VN.ShaderGraph=Mu,VN.VertexShaderGraph=ju,VN.FragmentShaderGraph=Au,BN.ShaderStage=Vp,Iu.StageBuilder=Ru,Iu.VertexStageBuilder=Lu,Iu.FragmentStageBuilder=Du,VN.ShaderModel=Iu,VN.ShaderNode=qu,VN.ShaderNodeIoVar=Fu,VN.ShadowMapNode=Bu,VN.SimpleShadowMapNode=Uu,VN.SimpleShadowMapTransformNode=Vu,VN.SimpleShadowMapFragmentNode=Hu,VN.CascadedShadowMapNode=Wu,VN.CascadedShadowMapTransformNode=Xu,VN.CascadedShadowMapFragmentNode=Zu,VN.Vec3TransformNode=Qu,VN.Vec4TransformNode=tp,VN.SkinTransformNode=ep,np.StageCopy=rp,VN.UniformBufferPremultipliedMvp=np,sp.StageCopy=lp,VN.UniformBufferMvp=sp,VN.TextureNode=up,VN.CubeMapNode=pp,VN.MorphWeightsNode=cp,VN.PushConstantNode=hp,VN.PushConstantNode1f=dp,VN.PushConstantNode2f=fp,VN.PushConstantNode3f=_p,VN.PushConstantNode4f=mp,VN.PushConstantNodeColor=$p,VN.PushConstantNode1i=yp,VN.PushConstantNode2i=vp,VN.PushConstantNode3i=gp,VN.PushConstantNode4i=bp,VN.TextureSamplerNode=xp,VN.NoiseTextureSamplerNode=wp,VN.CubeMapSamplerNode=zp,VN.EquiRectSamplerNode=kp,VN.AoMapSampleNode=Sp,VN.NormalMapNode=Cp,VN.FlipBacksideNormalNode=Np,VN.DisplacementMapNode=Ep,VN.SplitNode=Tp,VN.CombineNode=Pp,VN.Combine31Node=Op,VN.AttributeNode=Mp,VN.InstanceAttributeNode=jp,Ap.InputNode=Ip,Ap.OutputNode=Rp,VN.StageInterfaceNode=Ap,VN.ScreenCoordNode=Lp,VN.FullScreenQuadTexPosNode=Dp,VN.GetMorphWeightNode=qp,VN.RefractionSamplerNode=Fp,VN.NamedVariableNode=Bp,VN.PointSizeNode=Up,Object.defineProperty(Vp,"VERTEX_SHADER",{get:Hp}),Object.defineProperty(Vp,"TESSELEATION_CTRL",{get:Wp}),Object.defineProperty(Vp,"TESSELATION_EVAL",{get:Kp}),Object.defineProperty(Vp,"GEOMETRY_SHADER",{get:Xp}),Object.defineProperty(Vp,"FRAGMENT_SHADER",{get:Yp}),Object.defineProperty(Vp,"ALL",{get:Zp}),Object.defineProperty(Jp,"CUBE_MAP_ALBEDO",{get:tc}),Object.defineProperty(Jp,"STATIC_ALBEDO",{get:ec}),Object.defineProperty(Jp,"TEXTURE_ALBEDO",{get:ic}),Object.defineProperty(Jp,"VERTEX_ALBEDO",{get:nc});var GN=BN.shading||(BN.shading={});GN.Albedo=Jp,GN.AlphaMode=oc,GN.AlphaModeBlend=rc,GN.AlphaModeOpaque=sc,GN.AlphaModeMask=ac,lc.StaticColor=uc,lc.VertexColor=pc,lc.TextureColor=cc,lc.CubeMapColor=hc,Object.defineProperty(lc,"Companion",{get:_c}),GN.ModeledShader=lc,GN.PbrMaterialConfig=mc,GN.pbrShader_skmpm9$=function(t){var e=new mc;return t(e),new $c(e)},Object.defineProperty($c,"Companion",{get:gc}),GN.PbrShader=$c,Object.defineProperty(bc,"Companion",{get:zc}),bc.PhongConfig=kc,GN.PhongShader=bc,Object.defineProperty(Sc,"Companion",{get:Fc}),GN.UnlitShader=Sc,GN.UnlitMaterialConfig=Bc,BN.Std140Layout=Uc,Object.defineProperty(Gc,"R",{get:Wc}),Object.defineProperty(Gc,"RG",{get:Kc}),Object.defineProperty(Gc,"RGB",{get:Xc}),Object.defineProperty(Gc,"RGBA",{get:Yc}),Object.defineProperty(Gc,"R_F16",{get:Zc}),Object.defineProperty(Gc,"RG_F16",{get:Jc}),Object.defineProperty(Gc,"RGB_F16",{get:Qc}),Object.defineProperty(Gc,"RGBA_F16",{get:th}),BN.TexFormat=Gc,Object.defineProperty(ih,"NOT_LOADED",{get:oh}),Object.defineProperty(ih,"LOADING",{get:rh}),Object.defineProperty(ih,"LOADED",{get:sh}),Object.defineProperty(ih,"LOADING_FAILED",{get:ah}),eh.LoadingState=ih,Object.defineProperty(eh,"Companion",{get:ph}),BN.Texture_init_wabggl$=ch,BN.Texture=eh,Object.defineProperty(dh,"Companion",{get:bh}),BN.SingleColorTexture=dh,BN.GradientTexture=wh,BN.CubeMapTexture=kh,BN.TextureProps=Sh,Object.defineProperty(Ch,"NEAREST",{get:Eh}),Object.defineProperty(Ch,"LINEAR",{get:Th}),BN.FilterMethod=Ch,Object.defineProperty(Ph,"CLAMP_TO_EDGE",{get:Mh}),Object.defineProperty(Ph,"MIRRORED_REPEAT",{get:jh}),Object.defineProperty(Ph,"REPEAT",{get:Ah}),BN.AddressMode=Ph,BN.TextureData=Ih,Object.defineProperty(Rh,"Companion",{get:Gh}),BN.BufferedTextureData=Rh,BN.CubeMapTextureData=Hh,BN.Uniform=Wh,BN.Uniform1f_init_1isgrl$=Xh,BN.Uniform1f=Kh,BN.Uniform2f=Yh,BN.Uniform3f=Zh,BN.Uniform4f=Jh,BN.UniformColor=Qh,BN.Uniform1fv=td,BN.Uniform2fv=ed,BN.Uniform3fv=id,BN.Uniform4fv=nd,BN.UniformMat3f=od,BN.UniformMat4f=rd,BN.UniformMat4fv=sd,BN.Uniform1i_init_19mbxw$=ld,BN.Uniform1i=ad,BN.Uniform2i=ud,BN.Uniform3i=pd,BN.Uniform4i=cd,hd.Binding=dd,hd.VertexAttribute=fd,hd.Builder=_d,BN.VertexLayout=hd,Object.defineProperty(md,"VERTEX",{get:yd}),Object.defineProperty(md,"INSTANCE",{get:vd}),BN.InputRate=md,RN.toString_lcymw2$=gd,Object.defineProperty(wd,"NONE",{get:kd}),Object.defineProperty(wd,"ONSCREEN",{get:Sd}),Object.defineProperty(wd,"OFFSCREEN",{get:Cd}),bd.ProjCorrectionMode=wd;var HN=RN.scene||(RN.scene={});HN.Camera=bd,HN.OrthographicCamera=Nd,Ed.Proxy=Td,HN.PerspectiveCamera=Ed,HN.FrustumPlane=Pd,HN.group_2ylazs$=function(t,e){void 0===t&&(t=null);var i=new Id(t);return e(i),i},HN.Group=Id,HN.Lighting=Rd,Object.defineProperty(Dd,"DIRECTIONAL",{get:Fd}),Object.defineProperty(Dd,"POINT",{get:Bd}),Object.defineProperty(Dd,"SPOT",{get:Ud}),Ld.Type=Dd,HN.Light=Ld,HN.wireframeMesh_hjnvxh$=function(t,e){void 0===e&&(e=null);var i=new Vd;return i.addWireframe_hjnvxh$(t,e),i},HN.LineMesh=Vd,HN.colorMesh_gp9ews$=function(t,e){void 0===t&&(t=null);var i=new Hd(new Xw(At([ds().POSITIONS,ds().NORMALS,ds().COLORS])),t);return e(i),i},HN.textureMesh_pyaqjj$=Gd,Object.defineProperty(Hd,"Companion",{get:Xd}),HN.Mesh=Hd,Object.defineProperty(Yd,"Companion",{get:of}),HN.MeshRayTest=Yd,HN.Model=rf,Object.defineProperty(sf,"Companion",{get:ff}),HN.Node=sf,HN.orbitInputTransform_uj7ww7$=_f,HN.defaultCamTransform_v4keia$=function(t){var e,i=_f(t,void 0,(e=t,function(t){return t.setMouseRotation_dleff0$(20,-30),t.unaryPlus_uv0sim$(e.camera),s}));return t.unaryPlus_uv0sim$(i),i},Object.defineProperty($f,"NONE",{get:vf}),Object.defineProperty($f,"ROTATE",{get:gf}),Object.defineProperty($f,"PAN",{get:bf}),mf.DragMethod=$f,Object.defineProperty(xf,"ZOOM_CENTER",{get:zf}),Object.defineProperty(xf,"ZOOM_TRANSLATE",{get:kf}),mf.ZoomMethod=xf,HN.OrbitInputTransform=mf,HN.PanBase=Sf,HN.CameraOrthogonalPan=Cf,HN.pointMesh_zhxjay$=function(t,e){void 0===t&&(t=null);var i=new Nf(void 0,t);return e(i),i},Object.defineProperty(Nf,"Companion",{get:Pf}),HN.PointMesh=Nf,Of.DragHandler=Mf,HN.Scene=Of,Object.defineProperty(Lf,"Companion",{get:Ff}),jf.prototype.SkyboxCubeShader=Lf,Object.defineProperty(Uf,"Companion",{get:Hf}),jf.prototype.SkyboxSphereShader=Uf,jf.prototype.SkyboxPosNode=Kf,Object.defineProperty(HN,"Skybox",{get:function(){return null===i_&&new jf,i_}}),HN.Tags=n_;var WN=HN.ui||(HN.ui={});WN.Button=o_,WN.ButtonUi=r_,WN.ComponentUi=s_,WN.BlankComponentUi=a_,WN.SimpleComponentUi=l_,WN.BlurredComponentUi=u_,WN.DrawerMenu=p_,WN.Label=h_,WN.LabelUi=d_,WN.LayoutSpec=f_,Object.defineProperty(__,"UN",{get:$_}),Object.defineProperty(__,"DP",{get:y_}),Object.defineProperty(__,"MM",{get:v_}),Object.defineProperty(__,"PC",{get:g_}),WN.SizeUnit=__,WN.zero=b_,WN.full=x_,WN.uns_8ca0d4$=w_,WN.dps_8ca0d4$=z_,WN.pcs_8ca0d4$=k_,WN.pc_dleff0$=S_,WN.dp_dleff0$=C_,WN.mm_dleff0$=N_,WN.dp_wl4j30$=E_,WN.pcR_dleff0$=T_,WN.dpR_dleff0$=P_,WN.mmR_dleff0$=O_,WN.SizeSpec=M_,WN.Margin=A_,WN.Gravity=I_,Object.defineProperty(R_,"START",{get:D_}),Object.defineProperty(R_,"CENTER",{get:q_}),Object.defineProperty(R_,"END",{get:F_}),WN.Alignment=R_,WN.ScrollHandler=B_,WN.ScrollHandlerUi=U_,WN.Slider=V_,WN.SliderUi=G_,WN.TextField=H_,WN.TextFieldUi=W_,Object.defineProperty(K_,"Companion",{get:Z_}),WN.EditableText=K_,WN.ToggleButton=J_,WN.ToggleButtonUi=Q_,WN.UiComponent=tm,WN.UiContainer=om,WN.embeddedUi_4gy91$=sm,WN.uiScene_2d22y4$=am,WN.UiRoot=lm,Object.defineProperty(um,"Companion",{get:hm}),WN.UiShader=um,Object.defineProperty(dm,"Companion",{get:gm}),WN.UiTheme=dm,WN.standardFont_mt8j6u$=xm,WN.titleFont_mt8j6u$=wm,WN.theme_vvurn$=zm,WN.ThemeBuilder=km,WN.ThemeOrCustomProp=Sm;var KN=RN.util||(RN.util={}),XN=KN.animation||(KN.animation={});XN.Animation=Cm,XN.AnimationChannel=Nm,XN.TranslationAnimationChannel=Em,XN.RotationAnimationChannel=Tm,XN.ScaleAnimationChannel=Pm,XN.WeightAnimationChannel=Om,XN.AnimationNode=Mm,XN.AnimatedTransformGroup=jm,XN.MorphAnimatedMesh=Am,Object.defineProperty(Rm,"LINEAR",{get:Fm}),Object.defineProperty(Rm,"STEP",{get:Vm}),Object.defineProperty(Rm,"CUBICSPLINE",{get:Wm}),Im.Interpolation=Rm,XN.AnimationKey=Im,XN.RotationKey=Km,XN.CubicRotationKey=Xm,XN.TranslationKey=Ym,XN.CubicTranslationKey=Zm,XN.ScaleKey=Jm,XN.CubicScaleKey=Qm,XN.WeightKey=t$,XN.CubicWeightKey=e$,Object.defineProperty(i$,"Companion",{get:r$}),XN.Animator=i$,XN.LinearAnimator=s$,XN.CosAnimator=a$,XN.InterpolatedValue=l$,XN.InterpolatedFloat=u$,XN.SpringDamperFloat=p$,XN.SpringDamperDouble=c$,h$.SkinNode=d$,XN.Skin=h$,Object.defineProperty(f$,"Companion",{get:x$});var YN=KN.ao||(KN.ao={});YN.AmbientOcclusionPass=f$,Object.defineProperty(z$,"Companion",{get:C$}),YN.AoSetup=z$,YN.AoDenoisePass=N$,j$.ForwardAoPipeline=A$,j$.DeferredAoPipeline=I$,Object.defineProperty(j$,"Companion",{get:D$}),YN.AoPipeline=j$,KN.BoundingBox_init_4lfkt4$=function(t,e,i){return i=i||Object.create(q$.prototype),q$.call(i),i.set_4lfkt4$(t,e),i},KN.BoundingBox=q$,KN.Buffer=F$,KN.Uint8Buffer=B$,KN.Uint16Buffer=U$,KN.Uint32Buffer=V$,KN.Float32Buffer=G$,KN.MixedBuffer=H$,KN.copy_2p1efm$=W$,KN.copy_cgavii$=K$,Object.defineProperty(X$,"Companion",{get:J$}),KN.Color=X$,KN.MutableColor_init=ty,KN.MutableColor_init_d7aj7k$=ey,KN.MutableColor=Q$,Object.defineProperty(ny,"Companion",{get:py}),KN.ColorGradient_init_5tenyj$=hy,KN.ColorGradient=ny,KN.DataStream=dy,Object.defineProperty(_y,"UPPER_LEFT",{get:$y}),Object.defineProperty(_y,"UPPER_RIGHT",{get:yy}),Object.defineProperty(_y,"LOWER_LEFT",{get:vy}),Object.defineProperty(_y,"LOWER_RIGHT",{get:gy}),fy.Position=_y,KN.DebugOverlay=fy,Object.defineProperty(ky,"Companion",{get:Ny}),ky.Config=Ey;var ZN=KN.deferred||(KN.deferred={});ZN.DeferredLightShader=ky,Object.defineProperty(Ty,"Companion",{get:My}),ZN.DeferredMrtPass=Ty,Object.defineProperty(Ay,"Companion",{get:Ly}),ZN.DeferredOutputShader=Ay,Object.defineProperty(Dy,"Companion",{get:By}),Dy.MrtMultiplexNode=Uy,Dy.MrtDeMultiplexNode=Vy,ZN.DeferredPbrShader=Dy,ZN.DeferredPipeline=Gy,ZN.DeferredPipelineConfig=Hy,Wy.PointLight=Ky,ZN.DeferredPointLights=Wy,ZN.DiscardClearNode=Yy,ZN.DeferredCameraNode=Zy,Qy.SpotLight=tv,ZN.DeferredSpotLights=Qy,ZN.PbrLightingPass=ev,Object.defineProperty(ov,"Companion",{get:av}),ov.DeferredPbrConfig=lv,ZN.PbrSceneShader=ov,ZN.ReflectionDenoisePass=uv,Object.defineProperty(dv,"Companion",{get:vv}),ZN.ReflectionPass=dv,ZN.ScreenSpaceRayTraceNode=bv,KN.Disposable=xv,KN.uiFont_a4r08d$=wv,KN.FontProps=zv,Object.defineProperty(kv,"Companion",{get:Nv}),KN.Font_init_8tzsp9$=Tv,KN.Font=kv,KN.CharMetrics=Pv,KN.CharMap=Ov,Object.defineProperty(Mv,"Companion",{get:Iv}),Object.defineProperty(Rv,"Companion",{get:qv}),Object.defineProperty(Rv,"$serializer",{get:Uv}),Mv.Sparse_init_c4f9z2$=Vv,Mv.Sparse=Rv,Object.defineProperty(Gv,"Companion",{get:Kv}),Object.defineProperty(Gv,"$serializer",{get:Zv}),Mv.SparseIndices_init_ei4ty7$=Jv,Mv.SparseIndices=Gv,Object.defineProperty(Qv,"Companion",{get:ig}),Object.defineProperty(Qv,"$serializer",{get:rg}),Mv.SparseValues_init_tup0k7$=sg,Mv.SparseValues=Qv,Object.defineProperty(Mv,"$serializer",{get:ug});var JN=KN.gltf||(KN.gltf={});JN.GltfAccessor_init_xcc4mb$=pg,JN.GltfAccessor=Mv,JN.DataStreamAccessor=cg,JN.IntAccessor=hg,JN.FloatAccessor=dg,JN.Vec2fAccessor=fg,JN.Vec3fAccessor=_g,JN.Vec4fAccessor=mg,JN.Vec4iAccessor=$g,JN.Mat4fAccessor=yg,Object.defineProperty(gg,"Companion",{get:wg}),Object.defineProperty(gg,"$serializer",{get:Sg}),vg.Channel_init_izej1q$=Cg,vg.Channel=gg,Object.defineProperty(Ng,"Companion",{get:Pg}),Object.defineProperty(Ng,"$serializer",{get:jg}),vg.Target_init_woby6u$=Ag,vg.Target=Ng,Object.defineProperty(Ig,"Companion",{get:Dg}),Object.defineProperty(Ig,"$serializer",{get:Bg}),vg.Sampler_init_vbg14u$=Ug,vg.Sampler=Ig,Object.defineProperty(vg,"Companion",{get:Hg}),Object.defineProperty(vg,"$serializer",{get:Xg}),JN.GltfAnimation_init_u8627j$=Yg,JN.GltfAnimation=vg,Object.defineProperty(Zg,"Companion",{get:tb}),Object.defineProperty(Zg,"$serializer",{get:nb}),JN.GltfAsset_init_6zcyl3$=ob,JN.GltfAsset=Zg,JN.loadGltfFile_7e2ead$=sb,JN.loadGltfModel_aln4ac$=function(t,e,i,n,o,r){var s=new ab(t,e,i,n,o);return r?s:s.doResume(null)},Object.defineProperty(db,"Companion",{get:mb}),Object.defineProperty(db,"$serializer",{get:vb}),JN.GltfBuffer_init_7vc2qp$=gb,JN.GltfBuffer=db,Object.defineProperty(bb,"Companion",{get:zb}),Object.defineProperty(bb,"$serializer",{get:Cb}),JN.GltfBufferView_init_m5zzca$=Nb,JN.GltfBufferView=bb,Eb.ModelGenerateConfig=Tb,Eb.ModelMaterialConfig=Pb,r["kotlinx-serialization-kotlinx-serialization-core-jsLegacy"]=o,Object.defineProperty(Eb,"Companion",{get:Rb}),Object.defineProperty(Eb,"$serializer",{get:qb}),JN.GltfFile_init_iuf0kj$=Fb,JN.GltfFile=Eb,Object.defineProperty(Bb,"Companion",{get:Gb}),Object.defineProperty(Bb,"$serializer",{get:Kb}),JN.GltfImage_init_kfyxti$=Xb,JN.GltfImage=Bb,Object.defineProperty(Zb,"Companion",{get:tx}),Object.defineProperty(Zb,"$serializer",{get:nx}),Yb.PbrMetallicRoughness_init_t9ohaw$=ox,Yb.PbrMetallicRoughness=Zb,Object.defineProperty(Yb,"Companion",{get:ax}),Object.defineProperty(Yb,"$serializer",{get:px}),JN.GltfMaterial_init_6sdafb$=cx,JN.GltfMaterial=Yb,Object.defineProperty(dx,"Companion",{get:mx}),Object.defineProperty(dx,"$serializer",{get:vx}),hx.Primitive_init_g6eddi$=gx,hx.Primitive=dx,Object.defineProperty(hx,"Companion",{get:wx}),Object.defineProperty(hx,"$serializer",{get:Sx}),JN.GltfMesh_init_bdgbz6$=Cx,JN.GltfMesh=hx,Object.defineProperty(Nx,"Companion",{get:Px}),Object.defineProperty(Nx,"$serializer",{get:jx}),JN.GltfNode_init_fw4yk9$=Ax,JN.GltfNode=Nx,Object.defineProperty(Ix,"Companion",{get:Dx}),Object.defineProperty(Ix,"$serializer",{get:Bx}),JN.GltfScene_init_ldvoza$=Ux,JN.GltfScene=Ix,Object.defineProperty(Vx,"Companion",{get:Wx}),Object.defineProperty(Vx,"$serializer",{get:Yx}),JN.GltfSkin_init_t9evm2$=Zx,JN.GltfSkin=Vx,Object.defineProperty(Jx,"Companion",{get:iw}),Object.defineProperty(Jx,"$serializer",{get:rw}),JN.GltfTexture_init_k7m1pc$=sw,JN.GltfTexture=Jx,Object.defineProperty(aw,"Companion",{get:pw}),Object.defineProperty(aw,"$serializer",{get:dw}),JN.GltfTextureInfo_init_vneh73$=fw,JN.GltfTextureInfo=aw;var QN=KN.ibl||(KN.ibl={});QN.BrdfLutPass=_w,Object.defineProperty(QN,"EnvironmentHelper",{get:function(){return null===bw&&new yw,bw}}),QN.EnvironmentMaps=xw,QN.GradientCubeGenerator=ww,QN.EnvCubeSamplerNode=Cw,QN.EnvEquiRectSamplerNode=Nw,QN.RgbeDecoderNode=Ew,Object.defineProperty(Tw,"Companion",{get:jw}),QN.IrradianceMapPass=Tw,Object.defineProperty(Lw,"Companion",{get:Bw}),QN.ReflectionMapPass=Lw,QN.RgbeDecoder=Hw,Object.defineProperty(Xw,"Companion",{get:nz}),KN.IndexedVertexList_init_5jr6ei$=oz,KN.IndexedVertexList=Xw,Object.defineProperty(rz,"LINES",{get:az}),Object.defineProperty(rz,"POINTS",{get:lz}),Object.defineProperty(rz,"TRIANGLES",{get:uz}),KN.PrimitiveType=rz,Object.defineProperty(pz,"DYNAMIC",{get:hz}),Object.defineProperty(pz,"STATIC",{get:dz}),KN.Usage=pz,bz.Instance=kz,KN.InstancedLodController=bz,Sz.prototype.Level=Cz,Object.defineProperty(Cz,"TRACE",{get:Ez}),Object.defineProperty(Cz,"DEBUG",{get:Tz}),Object.defineProperty(Cz,"INFO",{get:Pz}),Object.defineProperty(Cz,"WARN",{get:Oz}),Object.defineProperty(Cz,"ERROR",{get:Mz}),Object.defineProperty(Cz,"OFF",{get:jz}),Object.defineProperty(KN,"Log",{get:function(){return null===Iz&&new Sz,Iz}}),KN.MeshBuilder=Rz,KN.CircleProps=Dz,Object.defineProperty(qz,"Companion",{get:Vz}),KN.GridProps=qz,KN.SphereProps=Gz,KN.RectProps=Hz,KN.CubeProps=Wz,KN.CylinderProps=Kz,KN.TextProps=Xz,Object.defineProperty(Yz,"Companion",{get:Qz}),KN.MeshInstanceList=Yz,Object.defineProperty(tk,"Companion",{get:nk}),KN.ObjectRecycler_init_9ce4rd$=ok,KN.ObjectRecycler=tk,KN.ObjectPool=rk,KN.PerfTimer=sk,RN.now=qS,RN.toString_j6vyb1$=FS,ak.prototype.TriangulatedPolygon=lk,Object.defineProperty(KN,"PolyUtil",{get:$k}),KN.ShapeContainer=yk,KN.Profile=vk,KN.Shape=gk,KN.SimpleShape=bk,KN.MultiShape=xk,KN.ShadowMap=wk,KN.SimpleShadowMap=zk,Sk.MapRange=Ck,KN.CascadedShadowMap=Sk,Nk.KdNode=Ek;var tE=KN.spatial||(KN.spatial={});tE.KdTree=Nk,tE.pointKdTree_ffk80x$=function(t,e){return void 0===e&&(e=20),new Nk(t,Ak(),e)},tE.triangleKdTree_uvzo00$=Tk,tE.edgeKdTree_jn4zy3$=Pk,tE.ItemAdapter=Ok,Object.defineProperty(tE,"Vec3fAdapter",{get:Ak}),Object.defineProperty(tE,"EdgeAdapter",{get:Lk}),Object.defineProperty(tE,"TriangleAdapter",{get:Fk}),Object.defineProperty(Bk,"Companion",{get:Gk}),tE.Edge=Bk,Object.defineProperty(Hk,"Companion",{get:Xk}),tE.Triangle_init_olctmm$=Yk,tE.Triangle=Hk,Zk.Node=Jk,tE.SpatialTree=Zk,tE.PointDistance=tS,tE.BoundingSphereDistance=eS,tE.RayDistance=iS,tE.SpatialTreeTraverser=nS,tE.CenterPointTraverser=oS,tE.InRadiusTraverser=sS,tE.NearestToRayTraverser=aS,tE.NearestEdgeToRayTraverser=uS,tE.TriangleHitTraverser=cS,dS.Child=fS,tE.ChildNodesWithDistance=dS,Object.defineProperty($S,"Companion",{get:gS}),$S.Gesture=bS,KN.TouchGestureEvaluator=$S,Object.defineProperty(xS,"Companion",{get:SS}),KN.TreeMap=xS,NS.FloatView=ES,NS.IntView=jS,NS.Vec2iView=AS,NS.Vec3iView=IS,NS.Vec4iView=RS,KN.VertexView=NS,KN.Viewport=LS,RN.createDefaultContext=function(){return DS(new bC)},RN.createContext_s8od96$=DS,Object.defineProperty(RN,"JsImpl",{get:VS}),BN.OffscreenPass2dImpl=GS,Object.defineProperty(HS,"Companion",{get:XS}),BN.OffscreenPassCubeImpl=HS,BN.PlatformAttributeProps=YS,BN.ShaderCode=ZS;var eE=RN.platform||(RN.platform={});eE.FontMapGenerator=JS,eE.ImageTextureData=QS,Object.defineProperty(tC,"Companion",{get:vC}),eE.JsAssetManager=tC,gC.InitProps=bC,Object.defineProperty(gC,"Companion",{get:zC}),eE.JsContext=gC,eE.GlCapabilities=kC,eE.get_elementX_wgrwqm$=SC,eE.get_elementY_wgrwqm$=CC,eE.get_glInternalFormat_my8d90$=NC,eE.get_glType_my8d90$=EC,eE.get_glFormat_my8d90$=TC,eE.get_pxSize_my8d90$=PC,eE.get_glOp_jstu7d$=OC,Object.defineProperty(MC,"Companion",{get:IC});var iE=eE.webgl||(eE.webgl={});return iE.BufferResource=MC,RC.ShaderInstance=LC,iE.CompiledShader=RC,Object.defineProperty(qC,"Companion",{get:UC}),iE.LoadedTextureWebGl=qC,Object.defineProperty(VC,"Companion",{get:WC}),iE.MappedUniform=VC,iE.MappedUniform1f=KC,iE.MappedUniform2f=XC,iE.MappedUniform3f=YC,iE.MappedUniform4f=ZC,iE.MappedUniform1fv=JC,iE.MappedUniform2fv=QC,iE.MappedUniform3fv=tN,iE.MappedUniform4fv=eN,iE.MappedUniformColor=iN,iE.MappedUniformMat3f=nN,iE.MappedUniformMat4f=oN,iE.MappedUniformMat4fv=rN,iE.MappedUniform1i=sN,Object.defineProperty(aN,"Companion",{get:cN}),iE.MappedUniformTex=aN,iE.MappedUniformTex2d=hN,iE.MappedUniformCubeMap=dN,iE.QueueRendererWebGl=fN,iE.ShaderGeneratorImplWebGl=mN,iE.ShaderManager=vN,Object.defineProperty(iE,"TextureLoader",{get:xN}),iE.VboBinder=wN,KN.GenericBuffer=zN,KN.Uint8BufferImpl_init_za3lpa$=SN,KN.Uint8BufferImpl=kN,KN.Uint16BufferImpl=CN,KN.Uint32BufferImpl=NN,KN.Float32BufferImpl=EN,KN.MixedBufferImpl=TN,KN.createUint8Buffer_za3lpa$=PN,KN.createUint32Buffer_za3lpa$=ON,KN.createFloat32Buffer_za3lpa$=MN,KN.createMixedBuffer_za3lpa$=jN,Ir.prototype.distinctTriangleEdges=Or.prototype.distinctTriangleEdges,qr.prototype.getMin_hm1yd1$=Ok.prototype.getMin_hm1yd1$,qr.prototype.getMax_hm1yd1$=Ok.prototype.getMax_hm1yd1$,qr.prototype.getCenter_hm1yd1$=Ok.prototype.getCenter_hm1yd1$,Dr.prototype.distinctTriangleEdges=Or.prototype.distinctTriangleEdges,Xr.prototype.init_nbf0q6$,Xr.prototype.init_nbf0q6$,Jd.prototype.onMeshDataChanged_f1jspk$=Yd.prototype.onMeshDataChanged_f1jspk$,a_.prototype.updateComponentAlpha=s_.prototype.updateComponentAlpha,a_.prototype.createUi_aemszp$=s_.prototype.createUi_aemszp$,a_.prototype.updateUi_aemszp$=s_.prototype.updateUi_aemszp$,a_.prototype.onRender_aemszp$=s_.prototype.onRender_aemszp$,a_.prototype.dispose_aemszp$=s_.prototype.dispose_aemszp$,jm.prototype.setWeights_q3cr5i$=Mm.prototype.setWeights_q3cr5i$,Am.prototype.initTransform=Mm.prototype.initTransform,Am.prototype.setTranslation_czzhiw$=Mm.prototype.setTranslation_czzhiw$,Am.prototype.setRotation_czzhi1$=Mm.prototype.setRotation_czzhi1$,Am.prototype.setScale_czzhiw$=Mm.prototype.setScale_czzhiw$,Fv.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Fv.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Xv.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Xv.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,ng.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,ng.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,ag.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,ag.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,zg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,zg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Og.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Og.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,qg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,qg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Wg.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Wg.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,eb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,eb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,$b.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,$b.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,kb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,kb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Lb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Lb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Hb.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Hb.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,ex.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,ex.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,lx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,lx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,$x.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,$x.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,zx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,zx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Ox.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Ox.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,qx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,qx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Kx.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,Kx.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,nw.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,nw.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,cw.prototype.patch_h7kg3r$=we.prototype.patch_h7kg3r$,cw.prototype.typeParametersSerializers=we.prototype.typeParametersSerializers,Mk.prototype.setNode_kvimhn$=Ok.prototype.setNode_kvimhn$,Ik.prototype.getCenterX_trkh7z$=Ok.prototype.getCenterX_trkh7z$,Ik.prototype.getCenterY_trkh7z$=Ok.prototype.getCenterY_trkh7z$,Ik.prototype.getCenterZ_trkh7z$=Ok.prototype.getCenterZ_trkh7z$,Ik.prototype.getSzX_trkh7z$=Ok.prototype.getSzX_trkh7z$,Ik.prototype.getSzY_trkh7z$=Ok.prototype.getSzY_trkh7z$,Ik.prototype.getSzZ_trkh7z$=Ok.prototype.getSzZ_trkh7z$,Ik.prototype.getCenter_hm1yd1$=Ok.prototype.getCenter_hm1yd1$,Ik.prototype.setNode_kvimhn$=Ok.prototype.setNode_kvimhn$,Dk.prototype.getCenterX_trkh7z$=Ok.prototype.getCenterX_trkh7z$,Dk.prototype.getCenterY_trkh7z$=Ok.prototype.getCenterY_trkh7z$,Dk.prototype.getCenterZ_trkh7z$=Ok.prototype.getCenterZ_trkh7z$,Dk.prototype.getSzX_trkh7z$=Ok.prototype.getSzX_trkh7z$,Dk.prototype.getSzY_trkh7z$=Ok.prototype.getSzY_trkh7z$,Dk.prototype.getSzZ_trkh7z$=Ok.prototype.getSzZ_trkh7z$,Dk.prototype.getCenter_hm1yd1$=Ok.prototype.getCenter_hm1yd1$,Dk.prototype.setNode_kvimhn$=Ok.prototype.setNode_kvimhn$,eS.prototype.nodeSqrDistanceToPoint_fpn9fm$=tS.prototype.nodeSqrDistanceToPoint_fpn9fm$,rS.prototype.nodeSqrDistanceToPoint_fpn9fm$=tS.prototype.nodeSqrDistanceToPoint_fpn9fm$,rS.prototype.itemSqrDistanceToPoint_xpaqv3$=tS.prototype.itemSqrDistanceToPoint_xpaqv3$,lS.prototype.nodeSqrDistanceToRay_m0emyn$=iS.prototype.nodeSqrDistanceToRay_m0emyn$,lS.prototype.itemSqrDistanceToRay_bo5c3m$=iS.prototype.itemSqrDistanceToRay_bo5c3m$,pS.prototype.nodeSqrDistanceToRay_m0emyn$=iS.prototype.nodeSqrDistanceToRay_m0emyn$,hS.prototype.nodeSqrDistanceToRay_m0emyn$=iS.prototype.nodeSqrDistanceToRay_m0emyn$,yN.prototype.sampleTexture2d_buzeal$=Pl.prototype.sampleTexture2d_buzeal$,yN.prototype.sampleTextureCube_buzeal$=Pl.prototype.sampleTextureCube_buzeal$,zN.prototype.removeAt_za3lpa$=F$.prototype.removeAt_za3lpa$,kN.prototype.put_fqrh44$=B$.prototype.put_fqrh44$,kN.prototype.plusAssign_s8j3t7$=B$.prototype.plusAssign_s8j3t7$,kN.prototype.toArray=B$.prototype.toArray,kN.prototype.removeAt_za3lpa$=B$.prototype.removeAt_za3lpa$,CN.prototype.put_gmedm2$=U$.prototype.put_gmedm2$,CN.prototype.plusAssign_mq22fl$=U$.prototype.plusAssign_mq22fl$,CN.prototype.removeAt_za3lpa$=U$.prototype.removeAt_za3lpa$,NN.prototype.put_q5rwfd$=V$.prototype.put_q5rwfd$,NN.prototype.plusAssign_za3lpa$=V$.prototype.plusAssign_za3lpa$,NN.prototype.removeAt_za3lpa$=V$.prototype.removeAt_za3lpa$,EN.prototype.put_q3cr5i$=G$.prototype.put_q3cr5i$,EN.prototype.plusAssign_mx4ult$=G$.prototype.plusAssign_mx4ult$,EN.prototype.removeAt_za3lpa$=G$.prototype.removeAt_za3lpa$,TN.prototype.putUint8_fqrh44$=H$.prototype.putUint8_fqrh44$,TN.prototype.putUint16_gmedm2$=H$.prototype.putUint16_gmedm2$,TN.prototype.putUint32_q5rwfd$=H$.prototype.putUint32_q5rwfd$,TN.prototype.putFloat32_q3cr5i$=H$.prototype.putFloat32_q3cr5i$,TN.prototype.putInt8_s8j3t7$=H$.prototype.putInt8_s8j3t7$,TN.prototype.putInt8_fqrh44$=H$.prototype.putInt8_fqrh44$,TN.prototype.putInt8_mj6st8$=H$.prototype.putInt8_mj6st8$,TN.prototype.putInt8_ay2i3f$=H$.prototype.putInt8_ay2i3f$,TN.prototype.putInt16_mq22fl$=H$.prototype.putInt16_mq22fl$,TN.prototype.putInt16_gmedm2$=H$.prototype.putInt16_gmedm2$,TN.prototype.putInt16_359eei$=H$.prototype.putInt16_359eei$,TN.prototype.putInt16_8k344i$=H$.prototype.putInt16_8k344i$,TN.prototype.putInt32_za3lpa$=H$.prototype.putInt32_za3lpa$,TN.prototype.putInt32_q5rwfd$=H$.prototype.putInt32_q5rwfd$,TN.prototype.putInt32_nd5v6f$=H$.prototype.putInt32_nd5v6f$,TN.prototype.putInt32_7hqxcs$=H$.prototype.putInt32_7hqxcs$,TN.prototype.removeAt_za3lpa$=H$.prototype.removeAt_za3lpa$,An=U.PI/180,In=180/U.PI,Rn=1e-5,Ln=1e-10,Dn=.70710677,qn=new eo(B(qS())),t})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;o=[e,i(1)],void 0===(r="function"==typeof(n=function(t,e){"use strict";var i=e.getKClass,n=e.Kind.CLASS,o=e.kotlin.Annotation,r=e.throwCCE,s=e.defineInlineFunction,a=e.wrapFunction,l=e.kotlin.Unit,u=e.kotlin.text.toLong_pdl1vz$,p=e.Kind.OBJECT,c=e.kotlin.collections.emptyList_287e2$,h=e.equals,d=e.hashCode,f=e.toString,_=e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,m=e.kotlin.collections.ArrayList_init_ww73n8$,$=e.Kind.INTERFACE,y=e.kotlin.collections.Iterator,v=e.kotlin.collections.Iterable,g=e.kotlin.collections.toList_us0mfu$,b=e.kotlin.collections.ArrayList_init_287e2$,x=e.kotlin.collections.HashSet_init_287e2$,w=e.arrayEquals,z=e.kotlin.ranges.until_dqglrj$,k=e.kotlin.collections.joinToString_fmv235$,S=e.kotlin.collections.toBooleanArray_xmyvgf$,C=e.kotlin.collections.withIndex_us0mfu$,N=e.kotlin.to_ujzrz7$,E=e.kotlin.collections.toMap_6hr0sd$,T=e.kotlin.lazy_klfg04$,P=e.kotlin.text.isBlank_gw00vp$,O=e.kotlin.IllegalArgumentException_init_pdl1vj$,M=e.kotlin.collections.copyToArray,j=e.arrayHashCode,A=e.ensureNotNull,I=e.kotlin.IllegalStateException_init_pdl1vj$,R=e.toBoxedChar,L=Object,D=e.kotlin.text.toIntOrNull_pdl1vz$,q=e.kotlin.collections.getValue_t9ocha$,F=e.kotlin.collections.asList_us0mfu$,B=e.kotlin.collections.ArrayList_init_mqih57$,U=e.kotlin.collections.ArrayList,V=e.kotlin.collections.LinkedHashSet,G=e.kotlin.collections.LinkedHashSet_init_mqih57$,H=e.kotlin.collections.HashSet,W=e.kotlin.collections.HashSet_init_mqih57$,K=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,X=e.kotlin.collections.LinkedHashMap,Y=e.kotlin.collections.LinkedHashMap_init_73mtqc$,Z=e.kotlin.collections.HashMap_init_q3lmfv$,J=e.kotlin.collections.HashMap,Q=e.kotlin.collections.HashMap_init_73mtqc$,tt=e.kotlin.collections.LinkedHashSet_init_287e2$,et=(e.kotlin.collections.indexOf_mjy6jw$,e.arrayToString,e.kotlin.collections.get_indices_m7z4lg$),it=Array,nt=e.toByte,ot=e.kotlin.ranges.CharRange,rt=(e.kotlin.text.StringBuilder_init_za3lpa$,e.kotlin.collections.HashSet_init_ww73n8$),st=e.kotlin.reflect.KClass,at=e.kotlin.IndexOutOfBoundsException,lt=(e.kotlin.js.internal.ByteCompanionObject,e.kotlin.ranges.coerceAtLeast_dqglrj$),ut=e.kotlin.collections.copyOf_mrm5p$,pt=(e.kotlin.js.internal.ShortCompanionObject,e.kotlin.collections.copyOf_m2jy6x$),ct=(e.kotlin.js.internal.IntCompanionObject,e.kotlin.collections.copyOf_c03ot6$),ht=(e.kotlin.js.internal.LongCompanionObject,e.kotlin.collections.copyOf_3aefkx$),dt=(e.kotlin.js.internal.FloatCompanionObject,e.kotlin.collections.copyOf_rblqex$),ft=(e.kotlin.js.internal.DoubleCompanionObject,e.kotlin.collections.copyOf_xgrzbe$),_t=e.unboxChar,mt=(e.kotlin.js.internal.CharCompanionObject,e.kotlin.collections.copyOf_gtcw5h$),$t=(e.kotlin.js.internal.BooleanCompanionObject,e.kotlin.collections.copyOf_1qu12l$),yt=e.kotlin.reflect.js.internal.PrimitiveClasses.stringClass,vt=(e.kotlin.js.internal.StringCompanionObject,e.BoxedChar),gt=e.kotlin.reflect.js.internal.PrimitiveClasses.charArrayClass,bt=e.kotlin.reflect.js.internal.PrimitiveClasses.doubleClass,xt=e.kotlin.reflect.js.internal.PrimitiveClasses.doubleArrayClass,wt=e.kotlin.reflect.js.internal.PrimitiveClasses.floatClass,zt=e.kotlin.reflect.js.internal.PrimitiveClasses.floatArrayClass,kt=e.Long,St=e.kotlin.reflect.js.internal.PrimitiveClasses.longArrayClass,Ct=e.kotlin.reflect.js.internal.PrimitiveClasses.intClass,Nt=e.kotlin.reflect.js.internal.PrimitiveClasses.intArrayClass,Et=e.kotlin.reflect.js.internal.PrimitiveClasses.shortClass,Tt=e.kotlin.reflect.js.internal.PrimitiveClasses.shortArrayClass,Pt=e.kotlin.reflect.js.internal.PrimitiveClasses.byteClass,Ot=e.kotlin.reflect.js.internal.PrimitiveClasses.byteArrayClass,Mt=e.kotlin.reflect.js.internal.PrimitiveClasses.booleanClass,jt=e.kotlin.reflect.js.internal.PrimitiveClasses.booleanArrayClass,At=e.kotlin,It=e.kotlin.collections.mapOf_qfcya0$,Rt=e.kotlin.text.capitalize_pdl1vz$,Lt=e.kotlin.text.equals_igcy3c$,Dt=e.kotlin.text.trimIndent_pdl1vz$,qt=e.kotlin.collections.last_2p1efm$,Ft=e.kotlin.collections.lastOrNull_2p1efm$,Bt=e.kotlin.collections.get_lastIndex_55thoc$,Ut=e.kotlin.collections.Map.Entry,Vt=e.kotlin.Triple,Gt=e.kotlin.ranges.coerceAtMost_dqglrj$,Ht=e.toChar,Wt=e.kotlin.text.concatToString_wlitf7$,Kt=e.kotlin.text.toByte_pdl1vz$,Xt=e.kotlin.text.toShort_pdl1vz$,Yt=e.kotlin.text.toInt_pdl1vz$,Zt=e.kotlin.isFinite_81szk$,Jt=e.kotlin.text.toDouble_pdl1vz$,Qt=e.kotlin.isFinite_yrwdxr$,te=e.kotlin.text.single_gw00vp$,ee=Error,ie=e.kotlin.text.iterator_gw00vp$,ne=e.toShort,oe=e.kotlin.collections.toList_7wnvza$,re=e.kotlin.collections.Map,se=e.throwUPAE,ae=e.kotlin.Enum,le=e.throwISE,ue=e.kotlin.text.StringBuilder_init,pe=e.kotlin.collections.List,ce=e.kotlin.text.toLongOrNull_pdl1vz$,he=e.kotlin.text.toDoubleOrNull_pdl1vz$,de=e.kotlin.UnsupportedOperationException_init_pdl1vj$,fe=(e.kotlin.NotImplementedError,e.kotlin.collections.emptyMap_q3lmfv$),_e=e.kotlin.IllegalArgumentException,me=e.kotlin.collections.zip_r9t3v7$,$e=e.kotlin.collections.Grouping,ye=e.kotlin.collections.mapCapacity_za3lpa$,ve=e.kotlin.collections.LinkedHashMap_init_bwtc7$,ge=e.getCallableRef,be=e.kotlin.collections.MutableList,xe=e.kotlin.collections.Set,we=e.kotlin.collections.MutableSet,ze=e.kotlin.collections.MutableMap,ke=e.kotlin.Pair,Se=new e.Long(-1,2097151),Ce=(Math,e.kotlin.math.abs_s8cxhz$,e.kotlin.collections.get_indices_l1lu5t$),Ne=e.kotlin.js.get_js_1yb8b7$,Ee=e.kotlin.reflect.js.internal.PrimitiveClasses.arrayClass,Te=e.findAssociatedObject_yjf3nl$;function Pe(t){var i;return t.descriptor.isNullable?e.isType(i=t,Gl)?i:r():new ro(t)}function Oe(t,e){return new hs(t,e)}function Me(t,e){return new ps(t,e)}function je(t,e,i){return new ds(t,e,i)}function Ae(t){return Cr()}function Ie(){return Go()}function Re(t){return ur()}function Le(){return bo()}function De(t){return hr()}function qe(){return ko()}function Fe(t){return _r()}function Be(){return Eo()}function Ue(t){return yr()}function Ve(){return Mo()}function Ge(t){return br()}function He(){return Ro()}function We(t){return zr()}function Ke(){return Fo()}function Xe(t){return sr()}function Ye(){return Yo()}function Ze(t){return nr()}function Je(t){return ns()}function Qe(t,e){return new Jn(t,e)}function ti(t){return new Qn(t)}function ei(t,e){return new io(t,e)}function ii(t,e,i){this.serializableClass_0=t,this.fallbackSerializer_0=e,this.typeParametersSerializers_0=i,this.descriptor_ay3qfp$_0=withContext(ci("kotlinx.serialization.ContextualSerializer",bi(),[]),this.serializableClass_0)}function ni(t){this.closure$iterator=t}function oi(){}function ri(t){this.this$elementDescriptors=t,this.elementsLeft_0=t.elementsCount}function si(t){return new ni((e=t,function(){return new ri(e)}));var e}function ai(t){return l}function li(t,e,i){if(void 0===i&&(i=ai),P(t))throw O("Blank serial names are prohibited".toString());var n=new di(t);return i(n),new fi(t,Qi(),n.elementNames_8be2vx$.size,g(e),n)}function ui(t,e){if(P(t))throw O("Blank serial names are prohibited".toString());return Qo(t,e)}function pi(t){return l}function ci(t,e,i,n){if(void 0===n&&(n=pi),P(t))throw O("Blank serial names are prohibited".toString());if(h(e,Qi()))throw O("For StructureKind.CLASS please use 'buildClassSerialDescriptor' instead".toString());var o=new di(t);return n(o),new fi(t,e,o.elementNames_8be2vx$.size,g(i),o)}function hi(t){return new qn(t)}function di(t){this.serialName=t,this.isNullable=!1,this.annotations=c(),this.elementNames_8be2vx$=b(),this.uniqueNames_0=x(),this.elementDescriptors_8be2vx$=b(),this.elementAnnotations_8be2vx$=b(),this.elementOptionality_8be2vx$=b()}function fi(t,e,i,n,o){this.serialName_btmdyn$_0=t,this.kind_589tly$_0=e,this.elementsCount_wewqc2$_0=i,this.annotations_efqcf6$_0=o.annotations,this.elementNames_0=M(o.elementNames_8be2vx$),this.elementDescriptors_0=uo(o.elementDescriptors_8be2vx$),this.elementAnnotations_0=M(o.elementAnnotations_8be2vx$),this.elementOptionality_0=S(o.elementOptionality_8be2vx$);var r,s,a=C(this.elementNames_0),l=m(_(a,10));for(r=a.iterator();r.hasNext();){var u=r.next();l.add_11rb$(N(u.value,u.index))}this.name2Index_0=E(l),this.typeParametersDescriptors_0=uo(n),this._hashCode_6e2cwc$_0=T((s=this,function(){var t=s,e=s.typeParametersDescriptors_0,i=d(t.serialName);i=(31*i|0)+j(e)|0;var n,o=si(t),r=1;for(n=o.iterator();n.hasNext();){var a,l=31*r|0,u=n.next().serialName;r=l+(null!=(a=null!=u?d(u):null)?a:0)|0}var p,c=r,h=1;for(p=o.iterator();p.hasNext();){var f,_=31*h|0,m=p.next().kind;h=_+(null!=(f=null!=m?d(m):null)?f:0)|0}return i=(31*(i=(31*i|0)+c|0)|0)+h|0}))}function _i(){}function mi(){$i=this,_i.call(this)}mi.prototype=Object.create(_i.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,Si.prototype=Object.create(xi.prototype),Si.prototype.constructor=Si,Ei.prototype=Object.create(xi.prototype),Ei.prototype.constructor=Ei,Oi.prototype=Object.create(xi.prototype),Oi.prototype.constructor=Oi,Ai.prototype=Object.create(xi.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(xi.prototype),Li.prototype.constructor=Li,Fi.prototype=Object.create(xi.prototype),Fi.prototype.constructor=Fi,Vi.prototype=Object.create(xi.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(xi.prototype),Wi.prototype.constructor=Wi,Yi.prototype=Object.create(_i.prototype),Yi.prototype.constructor=Yi,Zi.prototype=Object.create(Yi.prototype),Zi.prototype.constructor=Zi,tn.prototype=Object.create(Yi.prototype),tn.prototype.constructor=tn,on.prototype=Object.create(Yi.prototype),on.prototype.constructor=on,an.prototype=Object.create(Yi.prototype),an.prototype.constructor=an,pn.prototype=Object.create(_i.prototype),pn.prototype.constructor=pn,cn.prototype=Object.create(pn.prototype),cn.prototype.constructor=cn,fn.prototype=Object.create(pn.prototype),fn.prototype.constructor=fn,Ln.prototype=Object.create(In.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(In.prototype),Dn.prototype.constructor=Dn,qn.prototype=Object.create(In.prototype),qn.prototype.constructor=qn,Fn.prototype=Object.create(In.prototype),Fn.prototype.constructor=Fn,Bn.prototype=Object.create(In.prototype),Bn.prototype.constructor=Bn,Un.prototype=Object.create(In.prototype),Un.prototype.constructor=Un,Vn.prototype=Object.create(Rn.prototype),Vn.prototype.constructor=Vn,Gn.prototype=Object.create(Rn.prototype),Gn.prototype.constructor=Gn,Hn.prototype=Object.create(Rn.prototype),Hn.prototype.constructor=Hn,Kn.prototype=Object.create(Wn.prototype),Kn.prototype.constructor=Kn,Xn.prototype=Object.create(Wn.prototype),Xn.prototype.constructor=Xn,Zn.prototype=Object.create(Kn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Kn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Kn.prototype),Qn.prototype.constructor=Qn,to.prototype=Object.create(Kn.prototype),to.prototype.constructor=to,eo.prototype=Object.create(Kn.prototype),eo.prototype.constructor=eo,io.prototype=Object.create(Xn.prototype),io.prototype.constructor=io,no.prototype=Object.create(Xn.prototype),no.prototype.constructor=no,vo.prototype=Object.create(Zn.prototype),vo.prototype.constructor=vo,xo.prototype=Object.create(Yn.prototype),xo.prototype.constructor=xo,wo.prototype=Object.create(Zn.prototype),wo.prototype.constructor=wo,So.prototype=Object.create(Yn.prototype),So.prototype.constructor=So,Co.prototype=Object.create(Zn.prototype),Co.prototype.constructor=Co,To.prototype=Object.create(Yn.prototype),To.prototype.constructor=To,Po.prototype=Object.create(Zn.prototype),Po.prototype.constructor=Po,jo.prototype=Object.create(Yn.prototype),jo.prototype.constructor=jo,Ao.prototype=Object.create(Zn.prototype),Ao.prototype.constructor=Ao,Lo.prototype=Object.create(Yn.prototype),Lo.prototype.constructor=Lo,Do.prototype=Object.create(Zn.prototype),Do.prototype.constructor=Do,Bo.prototype=Object.create(Yn.prototype),Bo.prototype.constructor=Bo,Uo.prototype=Object.create(Zn.prototype),Uo.prototype.constructor=Uo,Ho.prototype=Object.create(Yn.prototype),Ho.prototype.constructor=Ho,Wo.prototype=Object.create(Zn.prototype),Wo.prototype.constructor=Wo,Zo.prototype=Object.create(Yn.prototype),Zo.prototype.constructor=Zo,ss.prototype=Object.create(rs.prototype),ss.prototype.constructor=ss,ls.prototype=Object.create(as.prototype),ls.prototype.constructor=ls,ps.prototype=Object.create(us.prototype),ps.prototype.constructor=ps,hs.prototype=Object.create(us.prototype),hs.prototype.constructor=hs,uu.prototype=Object.create(_e.prototype),uu.prototype.constructor=uu,_s.prototype=Object.create(uu.prototype),_s.prototype.constructor=_s,ms.prototype=Object.create(_s.prototype),ms.prototype.constructor=ms,$s.prototype=Object.create(_s.prototype),$s.prototype.constructor=$s,Hs.prototype=Object.create(mn.prototype),Hs.prototype.constructor=Hs,Ws.prototype=Object.create($n.prototype),Ws.prototype.constructor=Ws,ia.prototype=Object.create(ls.prototype),ia.prototype.constructor=ia,na.prototype=Object.create(ia.prototype),na.prototype.constructor=na,oa.prototype=Object.create(ia.prototype),oa.prototype.constructor=oa,ra.prototype=Object.create(oa.prototype),ra.prototype.constructor=ra,sa.prototype=Object.create(ia.prototype),sa.prototype.constructor=sa,la.prototype=Object.create(ss.prototype),la.prototype.constructor=la,ua.prototype=Object.create(la.prototype),ua.prototype.constructor=ua,pa.prototype=Object.create(la.prototype),pa.prototype.constructor=pa,ca.prototype=Object.create(pa.prototype),ca.prototype.constructor=ca,ha.prototype=Object.create(la.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(ae.prototype),da.prototype.constructor=da,xa.prototype=Object.create(ba.prototype),xa.prototype.constructor=xa,Na.prototype=Object.create(ba.prototype),Na.prototype.constructor=Na,Aa.prototype=Object.create(Pa.prototype),Aa.prototype.constructor=Aa,Ba.prototype=Object.create(Aa.prototype),Ba.prototype.constructor=Ba,Ua.prototype=Object.create(Aa.prototype),Ua.prototype.constructor=Ua,Ha.prototype=Object.create(Pa.prototype),Ha.prototype.constructor=Ha,Za.prototype=Object.create(Pa.prototype),Za.prototype.constructor=Za,Kl.prototype=Object.create(ae.prototype),Kl.prototype.constructor=Kl,tu.prototype=Object.create(Ql.prototype),tu.prototype.constructor=tu,ru.prototype=Object.create(Mn.prototype),ru.prototype.constructor=ru,cu.prototype=Object.create(uu.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(uu.prototype),hu.prototype.constructor=hu,ni.prototype.iterator=function(){return this.closure$iterator()},ni.$metadata$={kind:n,interfaces:[v]},Object.defineProperty(oi.prototype,"isNullable",{configurable:!0,get:function(){return!1}}),Object.defineProperty(oi.prototype,"annotations",{configurable:!0,get:function(){return c()}}),oi.$metadata$={kind:$,simpleName:"SerialDescriptor",interfaces:[]},ri.prototype.hasNext=function(){return this.elementsLeft_0>0},ri.prototype.next=function(){var t,e,i;return i=this.this$elementDescriptors.elementsCount,t=this.elementsLeft_0,this.elementsLeft_0=t-1|0,e=t,this.this$elementDescriptors.getElementDescriptor_za3lpa$(i-e|0)},ri.$metadata$={kind:n,interfaces:[y]},di.prototype.element_vxrguq$=function(t,e,i,n){if(void 0===i&&(i=c()),void 0===n&&(n=!1),!this.uniqueNames_0.add_11rb$(t))throw O(("Element with name '"+t+"' is already registered").toString());this.elementNames_8be2vx$.add_11rb$(t),this.elementDescriptors_8be2vx$.add_11rb$(e),this.elementAnnotations_8be2vx$.add_11rb$(i),this.elementOptionality_8be2vx$.add_11rb$(n)},di.prototype.descriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.descriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,r=e.throwCCE;return function(t,s){var a;return(e.isType(a=n(i(t)),o)?a:r()).descriptor}}))),di.prototype.listDescriptor_24f42q$=function(t){return hi(t)},di.prototype.listDescriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.listDescriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.listSerialDescriptor_24f42q$,o=t.kotlinx.serialization.serializer_saj79j$,r=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a){var l;return n((e.isType(l=o(i(t)),r)?l:s()).descriptor)}}))),di.prototype.mapDescriptor_2ezn58$=function(t,e){return new Hn(t,e)},di.prototype.mapDescriptor_q3lmfv$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.mapDescriptor_q3lmfv$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.mapSerialDescriptor_2ezn58$,o=t.kotlinx.serialization.serializer_saj79j$,r=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a,l,u){var p,c;return n((e.isType(p=o(i(t)),r)?p:s()).descriptor,(e.isType(c=o(i(l)),r)?c:s()).descriptor)}}))),di.prototype.setDescriptor_24f42q$=function(t){return new Un(t)},di.prototype.setDescriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.setDescriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.setSerialDescriptor_24f42q$,o=t.kotlinx.serialization.serializer_saj79j$,r=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a){var l;return n((e.isType(l=o(i(t)),r)?l:s()).descriptor)}}))),di.$metadata$={kind:n,simpleName:"ClassSerialDescriptorBuilder",interfaces:[]},Object.defineProperty(fi.prototype,"serialName",{get:function(){return this.serialName_btmdyn$_0}}),Object.defineProperty(fi.prototype,"kind",{get:function(){return this.kind_589tly$_0}}),Object.defineProperty(fi.prototype,"elementsCount",{get:function(){return this.elementsCount_wewqc2$_0}}),Object.defineProperty(fi.prototype,"annotations",{configurable:!0,get:function(){return this.annotations_efqcf6$_0}}),Object.defineProperty(fi.prototype,"_hashCode_0",{configurable:!0,get:function(){return this._hashCode_6e2cwc$_0.value}}),fi.prototype.getElementName_za3lpa$=function(t){return $u(this.elementNames_0,t)},fi.prototype.getElementIndex_61zpoe$=function(t){var e;return null!=(e=this.name2Index_0.get_11rb$(t))?e:-3},fi.prototype.getElementAnnotations_za3lpa$=function(t){return $u(this.elementAnnotations_0,t)},fi.prototype.getElementDescriptor_za3lpa$=function(t){return $u(this.elementDescriptors_0,t)},fi.prototype.isElementOptional_za3lpa$=function(t){return yu(this.elementOptionality_0,t)},fi.prototype.equals=function(t){var i;t:do{var n;if(this===t){i=!0;break t}if(!e.isType(t,fi)){i=!1;break t}if(!h(this.serialName,t.serialName)){i=!1;break t}if(!w(this.typeParametersDescriptors_0,t.typeParametersDescriptors_0)){i=!1;break t}if(this.elementsCount!==t.elementsCount){i=!1;break t}n=this.elementsCount;for(var o=0;o<n;o++){if(!h(this.getElementDescriptor_za3lpa$(o).serialName,t.getElementDescriptor_za3lpa$(o).serialName)){i=!1;break t}if(!h(this.getElementDescriptor_za3lpa$(o).kind,t.getElementDescriptor_za3lpa$(o).kind)){i=!1;break t}}i=!0}while(0);return i},fi.prototype.hashCode=function(){return this._hashCode_0},fi.prototype.toString=function(){return k(z(0,this.elementsCount),", ",this.serialName+"(",")",void 0,void 0,(t=this,function(e){return t.getElementName_za3lpa$(e)+": "+t.getElementDescriptor_za3lpa$(e).serialName}));var t},fi.$metadata$={kind:n,simpleName:"SerialDescriptorImpl",interfaces:[oi]},mi.$metadata$={kind:p,simpleName:"ENUM",interfaces:[_i]};var $i=null;function yi(){return null===$i&&new mi,$i}function vi(){gi=this,_i.call(this)}vi.$metadata$={kind:p,simpleName:"CONTEXTUAL",interfaces:[_i]};var gi=null;function bi(){return null===gi&&new vi,gi}function xi(){_i.call(this)}function wi(){zi=this,xi.call(this)}_i.prototype.toString=function(){return A(e.getKClassFromExpression(this).simpleName)},_i.prototype.hashCode=function(){return d(this.toString())},_i.$metadata$={kind:n,simpleName:"SerialKind",interfaces:[]},wi.$metadata$={kind:p,simpleName:"BOOLEAN",interfaces:[xi]};var zi=null;function ki(){return null===zi&&new wi,zi}function Si(){Ci=this,xi.call(this)}Si.$metadata$={kind:p,simpleName:"BYTE",interfaces:[xi]};var Ci=null;function Ni(){return null===Ci&&new Si,Ci}function Ei(){Ti=this,xi.call(this)}Ei.$metadata$={kind:p,simpleName:"CHAR",interfaces:[xi]};var Ti=null;function Pi(){return null===Ti&&new Ei,Ti}function Oi(){Mi=this,xi.call(this)}Oi.$metadata$={kind:p,simpleName:"SHORT",interfaces:[xi]};var Mi=null;function ji(){return null===Mi&&new Oi,Mi}function Ai(){Ii=this,xi.call(this)}Ai.$metadata$={kind:p,simpleName:"INT",interfaces:[xi]};var Ii=null;function Ri(){return null===Ii&&new Ai,Ii}function Li(){Di=this,xi.call(this)}Li.$metadata$={kind:p,simpleName:"LONG",interfaces:[xi]};var Di=null;function qi(){return null===Di&&new Li,Di}function Fi(){Bi=this,xi.call(this)}Fi.$metadata$={kind:p,simpleName:"FLOAT",interfaces:[xi]};var Bi=null;function Ui(){return null===Bi&&new Fi,Bi}function Vi(){Gi=this,xi.call(this)}Vi.$metadata$={kind:p,simpleName:"DOUBLE",interfaces:[xi]};var Gi=null;function Hi(){return null===Gi&&new Vi,Gi}function Wi(){Ki=this,xi.call(this)}Wi.$metadata$={kind:p,simpleName:"STRING",interfaces:[xi]};var Ki=null;function Xi(){return null===Ki&&new Wi,Ki}function Yi(){_i.call(this)}function Zi(){Ji=this,Yi.call(this)}xi.$metadata$={kind:n,simpleName:"PrimitiveKind",interfaces:[_i]},Zi.$metadata$={kind:p,simpleName:"CLASS",interfaces:[Yi]};var Ji=null;function Qi(){return null===Ji&&new Zi,Ji}function tn(){en=this,Yi.call(this)}tn.$metadata$={kind:p,simpleName:"LIST",interfaces:[Yi]};var en=null;function nn(){return null===en&&new tn,en}function on(){rn=this,Yi.call(this)}on.$metadata$={kind:p,simpleName:"MAP",interfaces:[Yi]};var rn=null;function sn(){return null===rn&&new on,rn}function an(){ln=this,Yi.call(this)}an.$metadata$={kind:p,simpleName:"OBJECT",interfaces:[Yi]};var ln=null;function un(){return null===ln&&new an,ln}function pn(){_i.call(this)}function cn(){hn=this,pn.call(this)}Yi.$metadata$={kind:n,simpleName:"StructureKind",interfaces:[_i]},cn.$metadata$={kind:p,simpleName:"SEALED",interfaces:[pn]};var hn=null;function dn(){return null===hn&&new cn,hn}function fn(){_n=this,pn.call(this)}fn.$metadata$={kind:p,simpleName:"OPEN",interfaces:[pn]};var _n=null;function mn(){this.updateMode_koclvo$_0=Zl()}function $n(){}function yn(){}function vn(){Tn()}function gn(){En=this,this.DECODE_DONE=-1,this.UNKNOWN_NAME=-3,this.READ_DONE=-1,this.READ_ALL=-2}pn.$metadata$={kind:n,simpleName:"PolymorphicKind",interfaces:[_i]},Object.defineProperty(mn.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),Object.defineProperty(mn.prototype,"updateMode",{configurable:!0,get:function(){return this.updateMode_koclvo$_0}}),mn.prototype.decodeValue=function(){throw pu(e.getKClassFromExpression(this).toString()+" can't retrieve untyped values")},mn.prototype.decodeNotNullMark=function(){return!0},mn.prototype.decodeNull=function(){return null},mn.prototype.decodeBoolean=function(){var t;return"boolean"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeByte=function(){var t;return"number"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeShort=function(){var t;return"number"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeInt=function(){var t;return"number"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeLong=function(){var t;return e.isType(t=this.decodeValue(),e.Long)?t:r()},mn.prototype.decodeFloat=function(){var t;return"number"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeDouble=function(){var t;return"number"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeChar=function(){var t;return e.isChar(t=this.decodeValue())?t:r()},mn.prototype.decodeString=function(){var t;return"string"==typeof(t=this.decodeValue())?t:r()},mn.prototype.decodeEnum_24f42q$=function(t){var e;return"number"==typeof(e=this.decodeValue())?e:r()},mn.prototype.decodeSerializableValue_19c8k5$$default=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},mn.prototype.decodeSerializableValue_19c8k5$=function(t,e,i){return void 0===e&&(e=null),i?i(t,e):this.decodeSerializableValue_19c8k5$$default(t,e)},mn.prototype.beginStructure_jvp2sb$=function(t,e){return this},mn.prototype.endStructure_24f42q$=function(t){},mn.prototype.decodeBooleanElement_szpzho$=function(t,e){return this.decodeBoolean()},mn.prototype.decodeByteElement_szpzho$=function(t,e){return this.decodeByte()},mn.prototype.decodeShortElement_szpzho$=function(t,e){return this.decodeShort()},mn.prototype.decodeIntElement_szpzho$=function(t,e){return this.decodeInt()},mn.prototype.decodeLongElement_szpzho$=function(t,e){return this.decodeLong()},mn.prototype.decodeFloatElement_szpzho$=function(t,e){return this.decodeFloat()},mn.prototype.decodeDoubleElement_szpzho$=function(t,e){return this.decodeDouble()},mn.prototype.decodeCharElement_szpzho$=function(t,e){return this.decodeChar()},mn.prototype.decodeStringElement_szpzho$=function(t,e){return this.decodeString()},mn.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.decodeSerializableValue_19c8k5$(i,n)},mn.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return i.descriptor.isNullable||this.decodeNotNullMark()?this.decodeSerializableValue_19c8k5$(i,n):this.decodeNull()},mn.$metadata$={kind:n,simpleName:"AbstractDecoder",interfaces:[vn,yn]},Object.defineProperty($n.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),$n.prototype.beginStructure_jvp2sb$=function(t,e){return this},$n.prototype.endStructure_24f42q$=function(t){},$n.prototype.encodeElement_szpzho$=function(t,e){return!0},$n.prototype.encodeValue_za3rmp$=function(t){throw pu("Non-serializable "+e.getKClassFromExpression(t)+" is not supported by "+e.getKClassFromExpression(this)+" encoder")},$n.prototype.encodeNull=function(){throw pu("'null' is not supported by default")},$n.prototype.encodeBoolean_6taknv$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeByte_s8j3t7$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeShort_mq22fl$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeInt_za3lpa$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeLong_s8cxhz$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeFloat_mx4ult$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeDouble_14dthe$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeChar_s8itvh$=function(t){this.encodeValue_za3rmp$(R(t))},$n.prototype.encodeString_61zpoe$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeEnum_szpzho$=function(t,e){this.encodeValue_za3rmp$(e)},$n.prototype.encodeBooleanElement_qh7jdn$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeBoolean_6taknv$(i)},$n.prototype.encodeByteElement_j0u8y3$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeByte_s8j3t7$(i)},$n.prototype.encodeShortElement_l83pjl$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeShort_mq22fl$(i)},$n.prototype.encodeIntElement_ptg7oe$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeInt_za3lpa$(i)},$n.prototype.encodeLongElement_j0o2mv$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeLong_s8cxhz$(i)},$n.prototype.encodeFloatElement_lf6hpt$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeFloat_mx4ult$(i)},$n.prototype.encodeDoubleElement_powrwi$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeDouble_14dthe$(i)},$n.prototype.encodeCharElement_j0tz0d$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeChar_s8itvh$(i)},$n.prototype.encodeStringElement_iij8qq$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeString_61zpoe$(i)},$n.prototype.encodeSerializableElement_r4qlx7$=function(t,e,i,n){this.encodeElement_szpzho$(t,e)&&this.encodeSerializableValue_tf03ej$(i,n)},$n.prototype.encodeNullableSerializableElement_qw92s8$=function(t,e,i,n){this.encodeElement_szpzho$(t,e)&&this.encodeNullableSerializableValue_f4686g$(i,n)},$n.$metadata$={kind:n,simpleName:"AbstractEncoder",interfaces:[On,Pn]},Object.defineProperty(yn.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),yn.prototype.beginStructure_24f42q$=function(t){return this.beginStructure_jvp2sb$(t,[].slice())},yn.prototype.beginStructure_jvp2sb$=function(t,e){return this.beginStructure_24f42q$(t)},yn.prototype.decodeSerializableValue_w63s0f$=function(t){return t.deserialize_bq71mq$(this)},yn.prototype.decodeNullableSerializableValue_aae3ea$=function(t){return t.descriptor.isNullable||this.decodeNotNullMark()?this.decodeSerializableValue_w63s0f$(t):this.decodeNull()},yn.prototype.updateSerializableValue_19c8k5$=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},yn.prototype.updateNullableSerializableValue_exmlbs$=function(t,e){return this.decodeNullableSerializableValue_aae3ea$(t)},yn.$metadata$={kind:$,simpleName:"Decoder",interfaces:[]},gn.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var bn,xn,wn,zn,kn,Sn,Cn,Nn,En=null;function Tn(){return null===En&&new gn,En}function Pn(){}function On(){}function Mn(){}function jn(t,e){var i="in the scope of '"+f(e.simpleName)+"'";throw pu(null==t?"Class discriminator was missing and no default polymorphic serializers were registered "+i:"Class '"+f(t)+"' is not registered for polymorphic serialization "+i+".\nMark the base class as 'sealed' or register the serializer explicitly.")}function An(t,e){var i;return jn(null!=(i=t.simpleName)?i:t.toString(),e)}function In(t){this.elementDescriptor=t,this.elementsCount_axr0xc$_0=1}function Rn(t,e,i){this.serialName_ra35nx$_0=t,this.keyDescriptor=e,this.valueDescriptor=i,this.elementsCount_qp2ocq$_0=2}function Ln(t){In.call(this,t),this.serialName_reprdi$_0=t.serialName+"Array"}function Dn(t){In.call(this,t)}function qn(t){In.call(this,t)}function Fn(t,e){In.call(this,e),this.serialName_ej0k1l$_0=t}function Bn(t){In.call(this,t)}function Un(t){In.call(this,t)}function Vn(t,e,i){Rn.call(this,t,e,i)}function Gn(t,e){Rn.call(this,kn,t,e)}function Hn(t,e){Rn.call(this,Sn,t,e)}function Wn(){}function Kn(t){Wn.call(this),this.elementSerializer_6sofm1$_0=t}function Xn(t,e){Wn.call(this),this.keySerializer=t,this.valueSerializer=e}function Yn(){}function Zn(t){Kn.call(this,t),this.descriptor_o3qkn1$_0=new Ln(t.descriptor)}function Jn(t,e){Kn.call(this,e),this.kClass_0=t,this.descriptor_8482jr$_0=new Dn(e.descriptor)}function Qn(t){Kn.call(this,t),this.descriptor_7uwoa2$_0=new qn(t.descriptor)}function to(t){Kn.call(this,t),this.descriptor_vnfc7m$_0=new Bn(t.descriptor)}function eo(t){Kn.call(this,t),this.descriptor_yqpz47$_0=new Un(t.descriptor)}function io(t,e){Xn.call(this,t,e),this.descriptor_pixp0o$_0=new Gn(t.descriptor,e.descriptor)}function no(t,e){Xn.call(this,t,e),this.descriptor_kvyydd$_0=new Hn(t.descriptor,e.descriptor)}function oo(t,e){this.values_0=e,this.descriptor_ulj9cc$_0=ci(t,yi(),[],EnumSerializer$descriptor$lambda(this,t))}function ro(t){this.serializer_0=t,this.descriptor_kbvl2k$_0=new so(this.serializer_0.descriptor)}function so(t){this.original_8be2vx$=t,this.serialName_szvoqg$_0=this.original_8be2vx$.serialName+"?"}function ao(t,e){this.objectInstance_0=e,this.descriptor_uhy216$_0=ci(t,un(),[])}function lo(t){var i;if(e.isType(t,mo))return t.namesSet_8be2vx$;var n=rt(t.elementsCount);i=t.elementsCount;for(var o=0;o<i;o++){var r=t.getElementName_za3lpa$(o);n.add_11rb$(r)}return n}function uo(t){var e,i;return null!=(i=null!=(e=null==t||t.isEmpty()?null:t)?M(e):null)?i:Cn}function po(t){this.original_s64f0k$_0=T(t)}function co(t){return new po(t)}function ho(t){throw pu("Serializer for class '"+f(t.simpleName)+"' is not found.\nMark the class as @Serializable or provide the serializer explicitly.")}function fo(t){var i,n,o=t.classifier;if(!e.isType(o,st))throw I(("Only KClass supported as classifier, got "+f(o)).toString());return i=o,e.isType(n=i,st)?n:r()}function _o(t,e){var i=t.getElementIndex_61zpoe$(e);if(-3===i)throw pu(t.serialName+" does not contain element with name '"+e+"'");return i}function mo(t,i,n){void 0===i&&(i=null),this.serialName_igazkg$_0=t,this.generatedSerializer_0=i,this.elementsCount_qx3iur$_0=n,this.added_0=-1;var o,r,s=it(this.elementsCount);o=s.length-1|0;for(var a=0;a<=o;a++)s[a]="[UNINITIALIZED]";this.names_0=s,this.propertiesAnnotations_0=e.newArray(this.elementsCount,null),this.classAnnotations_0=null,this.elementsOptionality_0=e.booleanArray(this.elementsCount),this.indices_73aj4y$_0=T((r=this,function(){return r.buildIndices_0()})),this.typeParameterDescriptors_ggwkl6$_0=T(function(t){return function(){var e,i,n;if(null!=(i=null!=(e=t.generatedSerializer_0)?e.typeParametersSerializers():null)){var o,r=m(i.length);for(o=0;o!==i.length;++o){var s=i[o];r.add_11rb$(s.descriptor)}n=r}else n=null;return uo(n)}}(this)),this._hashCode_61j445$_0=T(function(t){return function(){var e=t,i=t.typeParameterDescriptors_0,n=d(e.serialName);n=(31*n|0)+j(i)|0;var o,r=si(e),s=1;for(o=r.iterator();o.hasNext();){var a,l=31*s|0,u=o.next().serialName;s=l+(null!=(a=null!=u?d(u):null)?a:0)|0}var p,c=s,h=1;for(p=r.iterator();p.hasNext();){var f,_=31*h|0,m=p.next().kind;h=_+(null!=(f=null!=m?d(m):null)?f:0)|0}return n=(31*(n=(31*n|0)+c|0)|0)+h|0}}(this))}function $o(){}function yo(){}function vo(){go=this,Zn.call(this,Re())}Object.defineProperty(vn.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),vn.prototype.decodeSequentially=function(){return!1},vn.prototype.decodeCollectionSize_24f42q$=function(t){return-1},vn.prototype.decodeSerializableElement_186mnl$=function(t,e,i){return this.decodeSerializableElement_12e8id$(t,e,i,null)},vn.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.decodeSerializableElement_186mnl$(t,e,i)},vn.prototype.decodeSerializableElement_12e8id$=function(t,e,i,n,o){return void 0===n&&(n=null),o?o(t,e,i,n):this.decodeSerializableElement_12e8id$$default(t,e,i,n)},vn.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return this.decodeNullableSerializableElement_pzkbua$(t,e,i)},vn.prototype.decodeNullableSerializableElement_8viuyw$=function(t,e,i,n,o){return void 0===n&&(n=null),o?o(t,e,i,n):this.decodeNullableSerializableElement_8viuyw$$default(t,e,i,n)},vn.prototype.decodeNullableSerializableElement_pzkbua$=function(t,e,i){return this.decodeNullableSerializableElement_8viuyw$(t,e,i,null)},vn.prototype.updateSerializableElement_12e8id$=function(t,e,i,n){return this.decodeSerializableElement_12e8id$(t,e,i,n)},vn.prototype.updateNullableSerializableElement_8viuyw$=function(t,e,i,n){return this.decodeNullableSerializableElement_8viuyw$(t,e,i,n)},vn.$metadata$={kind:$,simpleName:"CompositeDecoder",interfaces:[]},Pn.prototype.encodeNotNullMark=function(){},Pn.prototype.beginStructure_24f42q$=function(t){return this.beginStructure_jvp2sb$(t,[].slice())},Pn.prototype.beginStructure_jvp2sb$=function(t,e){return this.beginStructure_24f42q$(t)},Pn.prototype.beginCollection_szpzho$=function(t,e){return this.beginCollection_m8o8wh$(t,e,[].slice())},Pn.prototype.beginCollection_m8o8wh$=function(t,e,i){return this.beginStructure_24f42q$(t)},Pn.prototype.encodeSerializableValue_tf03ej$=function(t,e){t.serialize_55azsf$(this,e)},Pn.prototype.encodeNullableSerializableValue_f4686g$=function(t,i){var n;if(t.descriptor.isNullable)return this.encodeSerializableValue_tf03ej$(e.isType(n=t,Hl)?n:r(),i);null==i?this.encodeNull():(this.encodeNotNullMark(),this.encodeSerializableValue_tf03ej$(t,i))},Pn.$metadata$={kind:$,simpleName:"Encoder",interfaces:[]},On.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return!0},On.prototype.encodeNonSerializableElement_ptgdlt$=function(t,e,i){},On.$metadata$={kind:$,simpleName:"CompositeEncoder",interfaces:[]},Mn.prototype.serialize_55azsf$=function(t,i){var n=nu(this,t,i),o=this.descriptor,s=t.beginStructure_24f42q$(o);try{var a;s.encodeStringElement_iij8qq$(this.descriptor,0,n.descriptor.serialName),s.encodeSerializableElement_r4qlx7$(this.descriptor,1,e.isType(a=n,Hl)?a:r(),i)}finally{s.endStructure_24f42q$(o)}},Mn.prototype.deserialize_bq71mq$=function(t){var i,n=this.descriptor,o=t.beginStructure_24f42q$(n);try{var s,a,l={v:null},u=null;if(o.decodeSequentially())return this.decodeSequentially_j3xsyv$_0(o);t:for(;;){var p=o.decodeElementIndex_24f42q$(this.descriptor);switch(p){case-1:break t;case 0:l.v=o.decodeStringElement_szpzho$(this.descriptor,p);break;case 1:var c,h=l.v;if(null==h)throw O("Cannot read polymorphic value before its type token".toString());c=h,l.v=c;var d=iu(this,o,l.v);u=o.decodeSerializableElement_12e8id$(this.descriptor,p,d);break;default:throw pu("Invalid index in polymorphic deserialization of "+(null!=(s=l.v)?s:"unknown class")+"\n Expected 0, 1 or DECODE_DONE(-1), but found "+p)}}var _,m=u;if(null==m){var $="Polymorphic value has not been read for class "+f(l.v);throw O($.toString())}_=m,i=e.isType(a=_,L)?a:r()}finally{o.endStructure_24f42q$(n)}return i},Mn.prototype.decodeSequentially_j3xsyv$_0=function(t){var e=t.decodeStringElement_szpzho$(this.descriptor,0),i=iu(this,t,e);return t.decodeSerializableElement_12e8id$(this.descriptor,1,i)},Mn.prototype.findPolymorphicSerializerOrNull_ca6uye$=function(t,e){return t.serializersModule.getPolymorphic_l2fy3k$(this.baseClass,e)},Mn.prototype.findPolymorphicSerializerOrNull_kjsxpj$=function(t,e){return t.serializersModule.getPolymorphic_joiicr$(this.baseClass,e)},Mn.$metadata$={kind:n,simpleName:"AbstractPolymorphicSerializer",interfaces:[Gl]},Object.defineProperty(In.prototype,"kind",{configurable:!0,get:function(){return nn()}}),Object.defineProperty(In.prototype,"elementsCount",{configurable:!0,get:function(){return this.elementsCount_axr0xc$_0}}),In.prototype.getElementName_za3lpa$=function(t){return t.toString()},In.prototype.getElementIndex_61zpoe$=function(t){var e;if(null==(e=D(t)))throw O(t+" is not a valid list index");return e},In.prototype.isElementOptional_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return!1},In.prototype.getElementAnnotations_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return c()},In.prototype.getElementDescriptor_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return this.elementDescriptor},In.prototype.equals=function(t){return this===t||!!e.isType(t,In)&&!(!h(this.elementDescriptor,t.elementDescriptor)||!h(this.serialName,t.serialName))},In.prototype.hashCode=function(){return(31*d(this.elementDescriptor)|0)+d(this.serialName)|0},In.prototype.toString=function(){return this.serialName+"("+this.elementDescriptor+")"},In.$metadata$={kind:n,simpleName:"ListLikeDescriptor",interfaces:[oi]},Object.defineProperty(Rn.prototype,"serialName",{get:function(){return this.serialName_ra35nx$_0}}),Object.defineProperty(Rn.prototype,"kind",{configurable:!0,get:function(){return sn()}}),Object.defineProperty(Rn.prototype,"elementsCount",{configurable:!0,get:function(){return this.elementsCount_qp2ocq$_0}}),Rn.prototype.getElementName_za3lpa$=function(t){return t.toString()},Rn.prototype.getElementIndex_61zpoe$=function(t){var e;if(null==(e=D(t)))throw O(t+" is not a valid map index");return e},Rn.prototype.isElementOptional_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return!1},Rn.prototype.getElementAnnotations_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return c()},Rn.prototype.getElementDescriptor_za3lpa$=function(t){var e;if(!(t>=0)){var i="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(i.toString())}switch(t%2){case 0:e=this.keyDescriptor;break;case 1:e=this.valueDescriptor;break;default:throw I("Unreached".toString())}return e},Rn.prototype.equals=function(t){return this===t||!!e.isType(t,Rn)&&!!h(this.serialName,t.serialName)&&!!h(this.keyDescriptor,t.keyDescriptor)&&!!h(this.valueDescriptor,t.valueDescriptor)},Rn.prototype.hashCode=function(){var t=d(this.serialName);return t=(31*(t=(31*t|0)+d(this.keyDescriptor)|0)|0)+d(this.valueDescriptor)|0},Rn.prototype.toString=function(){return this.serialName+"("+this.keyDescriptor+", "+this.valueDescriptor+")"},Rn.$metadata$={kind:n,simpleName:"MapLikeDescriptor",interfaces:[oi]},Object.defineProperty(Ln.prototype,"serialName",{configurable:!0,get:function(){return this.serialName_reprdi$_0}}),Ln.$metadata$={kind:n,simpleName:"PrimitiveArrayDescriptor",interfaces:[In]},Object.defineProperty(Dn.prototype,"serialName",{configurable:!0,get:function(){return bn}}),Dn.$metadata$={kind:n,simpleName:"ArrayClassDesc",interfaces:[In]},Object.defineProperty(qn.prototype,"serialName",{configurable:!0,get:function(){return xn}}),qn.$metadata$={kind:n,simpleName:"ArrayListClassDesc",interfaces:[In]},Object.defineProperty(Fn.prototype,"serialName",{get:function(){return this.serialName_ej0k1l$_0}}),Fn.$metadata$={kind:n,simpleName:"NamedListClassDescriptor",interfaces:[In]},Object.defineProperty(Bn.prototype,"serialName",{configurable:!0,get:function(){return wn}}),Bn.$metadata$={kind:n,simpleName:"LinkedHashSetClassDesc",interfaces:[In]},Object.defineProperty(Un.prototype,"serialName",{configurable:!0,get:function(){return zn}}),Un.$metadata$={kind:n,simpleName:"HashSetClassDesc",interfaces:[In]},Vn.$metadata$={kind:n,simpleName:"NamedMapClassDescriptor",interfaces:[Rn]},Gn.$metadata$={kind:n,simpleName:"LinkedHashMapClassDesc",interfaces:[Rn]},Hn.$metadata$={kind:n,simpleName:"HashMapClassDesc",interfaces:[Rn]},Wn.prototype.merge_h7kg3q$=function(t,e){var i,n=null!=(i=null!=e?this.toBuilder_wikn$(e):null)?i:this.builder(),o=this.builderSize_wili$(n),r=t.beginStructure_24f42q$(this.descriptor);if(r.decodeSequentially())this.readAll_8oyp34$(r,n,o,this.readSize_bl0yv7$_0(r,n));else for(;;){var s=r.decodeElementIndex_24f42q$(this.descriptor);if(-1===s)break;this.readElement_8pvye7$(r,o+s|0,n)}return r.endStructure_24f42q$(this.descriptor),this.toResult_wili$(n)},Wn.prototype.deserialize_bq71mq$=function(t){return this.merge_h7kg3q$(t,null)},Wn.prototype.readSize_bl0yv7$_0=function(t,e){var i=t.decodeCollectionSize_24f42q$(this.descriptor);return this.checkCapacity_rk7bw8$(e,i),i},Wn.prototype.readElement_8pvye7$=function(t,e,i,n,o){void 0===n&&(n=!0),o?o(t,e,i,n):this.readElement_8pvye7$$default(t,e,i,n)},Wn.$metadata$={kind:n,simpleName:"AbstractCollectionSerializer",interfaces:[Gl]},Kn.prototype.serialize_55azsf$=function(t,e){for(var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i),o=this.collectionIterator_wikn$(e),r=0;r<i;r++)n.encodeSerializableElement_r4qlx7$(this.descriptor,r,this.elementSerializer_6sofm1$_0,o.next());n.endStructure_24f42q$(this.descriptor)},Kn.prototype.readAll_8oyp34$=function(t,e,i,n){if(!(n>=0))throw O("Size must be known in advance when using READ_ALL".toString());for(var o=0;o<n;o++)this.readElement_8pvye7$(t,i+o|0,e,!1)},Kn.prototype.readElement_8pvye7$$default=function(t,e,i,n){this.insert_p422l$(i,e,t.decodeSerializableElement_12e8id$(this.descriptor,e,this.elementSerializer_6sofm1$_0))},Kn.$metadata$={kind:n,simpleName:"ListLikeSerializer",interfaces:[Wn]},Xn.prototype.readAll_8oyp34$=function(t,e,i,n){var o;if(!(n>=0))throw O("Size must be known in advance when using READ_ALL".toString());o=2*n|0;for(var r=0;r<o;r+=2)this.readElement_8pvye7$(t,i+r|0,e,!1)},Xn.prototype.readElement_8pvye7$$default=function(t,i,n,o){var r,s=t.decodeSerializableElement_12e8id$(this.descriptor,i,this.keySerializer);if(o){var a=t.decodeElementIndex_24f42q$(this.descriptor);if(a!==(i+1|0))throw O(("Value must follow key in a map, index for key: "+i+", returned index for value: "+a).toString());r=a}else r=i+1|0;var l=r,u=n.containsKey_11rb$(s)&&!e.isType(this.valueSerializer.descriptor.kind,xi)?t.decodeSerializableElement_12e8id$(this.descriptor,l,this.valueSerializer,q(n,s)):t.decodeSerializableElement_12e8id$(this.descriptor,l,this.valueSerializer);n.put_xwzc9p$(s,u)},Xn.prototype.serialize_55azsf$=function(t,e){for(var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i),o=this.collectionIterator_wikn$(e),r={v:0};o.hasNext();){var s,a,l=o.next(),u=l.key,p=l.value;n.encodeSerializableElement_r4qlx7$(this.descriptor,(s=r.v,r.v=s+1|0,s),this.keySerializer,u),n.encodeSerializableElement_r4qlx7$(this.descriptor,(a=r.v,r.v=a+1|0,a),this.valueSerializer,p)}n.endStructure_24f42q$(this.descriptor)},Xn.$metadata$={kind:n,simpleName:"MapLikeSerializer",interfaces:[Wn]},Yn.prototype.ensureCapacity_za3lpa$=function(t,e){void 0===t&&(t=this.position+1|0),e?e(t):this.ensureCapacity_za3lpa$$default(t)},Yn.$metadata$={kind:n,simpleName:"PrimitiveArrayBuilder",interfaces:[]},Object.defineProperty(Zn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_o3qkn1$_0}}),Zn.prototype.builderSize_wili$=function(t){return t.position},Zn.prototype.toResult_wili$=function(t){return t.build()},Zn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Zn.prototype.collectionIterator_wikn$=function(t){throw I("This method lead to boxing and must not be used, use writeContents instead".toString())},Zn.prototype.insert_p422l$=function(t,e,i){throw I("This method lead to boxing and must not be used, use Builder.append instead".toString())},Zn.prototype.builder=function(){return this.toBuilder_wikn$(this.empty())},Zn.prototype.serialize_55azsf$=function(t,e){var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i);this.writeContent_q3xt5$(n,e,i),n.endStructure_24f42q$(this.descriptor)},Zn.prototype.deserialize_bq71mq$=function(t){return this.merge_h7kg3q$(t,null)},Zn.$metadata$={kind:n,simpleName:"PrimitiveArraySerializer",interfaces:[Kn]},Object.defineProperty(Jn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_8482jr$_0}}),Jn.prototype.collectionSize_wikn$=function(t){return t.length},Jn.prototype.collectionIterator_wikn$=function(t){return e.arrayIterator(t)},Jn.prototype.builder=function(){return b()},Jn.prototype.builderSize_wili$=function(t){return t.size},Jn.prototype.toResult_wili$=function(t){return gu(t,this.kClass_0)},Jn.prototype.toBuilder_wikn$=function(t){return B(F(t))},Jn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Jn.prototype.insert_p422l$=function(t,e,i){t.add_wxm5ur$(e,i)},Jn.$metadata$={kind:n,simpleName:"ReferenceArraySerializer",interfaces:[Kn]},Object.defineProperty(Qn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7uwoa2$_0}}),Qn.prototype.collectionSize_wikn$=function(t){return t.size},Qn.prototype.collectionIterator_wikn$=function(t){return t.iterator()},Qn.prototype.builder=function(){return b()},Qn.prototype.builderSize_wili$=function(t){return t.size},Qn.prototype.toResult_wili$=function(t){return t},Qn.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,U)?i:null)?n:B(t)},Qn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Qn.prototype.insert_p422l$=function(t,e,i){t.add_wxm5ur$(e,i)},Qn.$metadata$={kind:n,simpleName:"ArrayListSerializer",interfaces:[Kn]},Object.defineProperty(to.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vnfc7m$_0}}),to.prototype.collectionSize_wikn$=function(t){return t.size},to.prototype.collectionIterator_wikn$=function(t){return t.iterator()},to.prototype.builder=function(){return tt()},to.prototype.builderSize_wili$=function(t){return t.size},to.prototype.toResult_wili$=function(t){return t},to.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,V)?i:null)?n:G(t)},to.prototype.checkCapacity_rk7bw8$=function(t,e){},to.prototype.insert_p422l$=function(t,e,i){t.add_11rb$(i)},to.$metadata$={kind:n,simpleName:"LinkedHashSetSerializer",interfaces:[Kn]},Object.defineProperty(eo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yqpz47$_0}}),eo.prototype.collectionSize_wikn$=function(t){return t.size},eo.prototype.collectionIterator_wikn$=function(t){return t.iterator()},eo.prototype.builder=function(){return x()},eo.prototype.builderSize_wili$=function(t){return t.size},eo.prototype.toResult_wili$=function(t){return t},eo.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,H)?i:null)?n:W(t)},eo.prototype.checkCapacity_rk7bw8$=function(t,e){},eo.prototype.insert_p422l$=function(t,e,i){t.add_11rb$(i)},eo.$metadata$={kind:n,simpleName:"HashSetSerializer",interfaces:[Kn]},Object.defineProperty(io.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_pixp0o$_0}}),io.prototype.collectionSize_wikn$=function(t){return t.size},io.prototype.collectionIterator_wikn$=function(t){return t.entries.iterator()},io.prototype.builder=function(){return K()},io.prototype.builderSize_wili$=function(t){return t.size},io.prototype.toResult_wili$=function(t){return t},io.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,X)?i:null)?n:Y(t)},io.prototype.checkCapacity_rk7bw8$=function(t,e){},io.prototype.insertKeyValuePair_fbr58l$=function(t,e,i,n){t.put_xwzc9p$(i,n)},io.$metadata$={kind:n,simpleName:"LinkedHashMapSerializer",interfaces:[Xn]},Object.defineProperty(no.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kvyydd$_0}}),no.prototype.collectionSize_wikn$=function(t){return t.size},no.prototype.collectionIterator_wikn$=function(t){return t.entries.iterator()},no.prototype.builder=function(){return Z()},no.prototype.builderSize_wili$=function(t){return t.size},no.prototype.toResult_wili$=function(t){return t},no.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,J)?i:null)?n:Q(t)},no.prototype.checkCapacity_rk7bw8$=function(t,e){},no.prototype.insertKeyValuePair_fbr58l$=function(t,e,i,n){t.put_xwzc9p$(i,n)},no.$metadata$={kind:n,simpleName:"HashMapSerializer",interfaces:[Xn]},Object.defineProperty(ro.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kbvl2k$_0}}),ro.prototype.serialize_55azsf$=function(t,e){null!=e?(t.encodeNotNullMark(),t.encodeSerializableValue_tf03ej$(this.serializer_0,e)):t.encodeNull()},ro.prototype.deserialize_bq71mq$=function(t){return t.decodeNotNullMark()?t.decodeSerializableValue_w63s0f$(this.serializer_0):t.decodeNull()},ro.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,ro)||r(),!!h(this.serializer_0,t.serializer_0))},ro.prototype.hashCode=function(){return d(this.serializer_0)},ro.$metadata$={kind:n,simpleName:"NullableSerializer",interfaces:[Gl]},Object.defineProperty(so.prototype,"serialName",{configurable:!0,get:function(){return this.serialName_szvoqg$_0}}),Object.defineProperty(so.prototype,"isNullable",{configurable:!0,get:function(){return!0}}),so.prototype.equals=function(t){return this===t||!!e.isType(t,so)&&!!h(this.original_8be2vx$,t.original_8be2vx$)},so.prototype.toString=function(){return this.original_8be2vx$.toString()+"?"},so.prototype.hashCode=function(){return 31*d(this.original_8be2vx$)|0},Object.defineProperty(so.prototype,"annotations",{get:function(){return this.original_8be2vx$.annotations}}),Object.defineProperty(so.prototype,"elementsCount",{get:function(){return this.original_8be2vx$.elementsCount}}),Object.defineProperty(so.prototype,"kind",{get:function(){return this.original_8be2vx$.kind}}),so.prototype.getElementAnnotations_za3lpa$=function(t){return this.original_8be2vx$.getElementAnnotations_za3lpa$(t)},so.prototype.getElementDescriptor_za3lpa$=function(t){return this.original_8be2vx$.getElementDescriptor_za3lpa$(t)},so.prototype.getElementIndex_61zpoe$=function(t){return this.original_8be2vx$.getElementIndex_61zpoe$(t)},so.prototype.getElementName_za3lpa$=function(t){return this.original_8be2vx$.getElementName_za3lpa$(t)},so.prototype.isElementOptional_za3lpa$=function(t){return this.original_8be2vx$.isElementOptional_za3lpa$(t)},so.$metadata$={kind:n,simpleName:"SerialDescriptorForNullable",interfaces:[oi]},Object.defineProperty(ao.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_uhy216$_0}}),ao.prototype.serialize_55azsf$=function(t,e){t.beginStructure_24f42q$(this.descriptor).endStructure_24f42q$(this.descriptor)},ao.prototype.deserialize_bq71mq$=function(t){return t.beginStructure_24f42q$(this.descriptor).endStructure_24f42q$(this.descriptor),this.objectInstance_0},ao.$metadata$={kind:n,simpleName:"ObjectSerializer",interfaces:[Gl]},Object.defineProperty(po.prototype,"original_0",{configurable:!0,get:function(){return this.original_s64f0k$_0.value}}),Object.defineProperty(po.prototype,"serialName",{configurable:!0,get:function(){return this.original_0.serialName}}),Object.defineProperty(po.prototype,"kind",{configurable:!0,get:function(){return this.original_0.kind}}),Object.defineProperty(po.prototype,"elementsCount",{configurable:!0,get:function(){return this.original_0.elementsCount}}),po.prototype.getElementName_za3lpa$=function(t){return this.original_0.getElementName_za3lpa$(t)},po.prototype.getElementIndex_61zpoe$=function(t){return this.original_0.getElementIndex_61zpoe$(t)},po.prototype.getElementAnnotations_za3lpa$=function(t){return this.original_0.getElementAnnotations_za3lpa$(t)},po.prototype.getElementDescriptor_za3lpa$=function(t){return this.original_0.getElementDescriptor_za3lpa$(t)},po.prototype.isElementOptional_za3lpa$=function(t){return this.original_0.isElementOptional_za3lpa$(t)},po.$metadata$={kind:n,interfaces:[oi]},Object.defineProperty(mo.prototype,"serialName",{get:function(){return this.serialName_igazkg$_0}}),Object.defineProperty(mo.prototype,"elementsCount",{get:function(){return this.elementsCount_qx3iur$_0}}),Object.defineProperty(mo.prototype,"kind",{configurable:!0,get:function(){return Qi()}}),Object.defineProperty(mo.prototype,"annotations",{configurable:!0,get:function(){var t;return null!=(t=this.classAnnotations_0)?t:c()}}),Object.defineProperty(mo.prototype,"namesSet_8be2vx$",{configurable:!0,get:function(){return this.indices_0.keys}}),Object.defineProperty(mo.prototype,"indices_0",{configurable:!0,get:function(){return this.indices_73aj4y$_0.value}}),Object.defineProperty(mo.prototype,"typeParameterDescriptors_0",{configurable:!0,get:function(){return this.typeParameterDescriptors_ggwkl6$_0.value}}),Object.defineProperty(mo.prototype,"_hashCode_0",{configurable:!0,get:function(){return this._hashCode_61j445$_0.value}}),mo.prototype.addElement_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.names_0[(this.added_0=this.added_0+1|0,this.added_0)]=t,this.elementsOptionality_0[this.added_0]=e,this.propertiesAnnotations_0[this.added_0]=null},mo.prototype.pushAnnotation_yj921w$=function(t){var e,i=this.propertiesAnnotations_0[this.added_0];if(null==i){var n=m(1);this.propertiesAnnotations_0[this.added_0]=n,e=n}else e=i;e.add_11rb$(t)},mo.prototype.pushClassAnnotation_yj921w$=function(t){null==this.classAnnotations_0&&(this.classAnnotations_0=m(1)),A(this.classAnnotations_0).add_11rb$(t)},mo.prototype.getElementDescriptor_za3lpa$=function(t){var e,i,n,o;if(null==(o=null!=(n=null!=(i=null!=(e=this.generatedSerializer_0)?e.childSerializers():null)?i[t]:null)?n.descriptor:null))throw new at(this.serialName+" descriptor has only "+this.elementsCount+" elements, index: "+t);return o},mo.prototype.isElementOptional_za3lpa$=function(t){return yu(this.elementsOptionality_0,t)},mo.prototype.getElementAnnotations_za3lpa$=function(t){var e;return null!=(e=$u(this.propertiesAnnotations_0,t))?e:c()},mo.prototype.getElementName_za3lpa$=function(t){return $u(this.names_0,t)},mo.prototype.getElementIndex_61zpoe$=function(t){var e;return null!=(e=this.indices_0.get_11rb$(t))?e:-3},mo.prototype.buildIndices_0=function(){var t,e=Z();t=this.names_0;for(var i=0;i!==t.length;++i){var n=this.names_0[i];e.put_xwzc9p$(n,i)}return e},mo.prototype.equals=function(t){var i;t:do{var n;if(this===t){i=!0;break t}if(!e.isType(t,mo)){i=!1;break t}if(!h(this.serialName,t.serialName)){i=!1;break t}if(!w(this.typeParameterDescriptors_0,t.typeParameterDescriptors_0)){i=!1;break t}if(this.elementsCount!==t.elementsCount){i=!1;break t}n=this.elementsCount;for(var o=0;o<n;o++){if(!h(this.getElementDescriptor_za3lpa$(o).serialName,t.getElementDescriptor_za3lpa$(o).serialName)){i=!1;break t}if(!h(this.getElementDescriptor_za3lpa$(o).kind,t.getElementDescriptor_za3lpa$(o).kind)){i=!1;break t}}i=!0}while(0);return i},mo.prototype.hashCode=function(){return this._hashCode_0},mo.prototype.toString=function(){return k(this.indices_0.entries,", ",this.serialName+"(",")",void 0,void 0,(t=this,function(e){return e.key+": "+t.getElementDescriptor_za3lpa$(e.value).serialName}));var t},mo.$metadata$={kind:n,simpleName:"PluginGeneratedSerialDescriptor",interfaces:[oi]},$o.prototype.typeParametersSerializers=function(){return Nn},$o.$metadata$={kind:$,simpleName:"GeneratedSerializer",interfaces:[Gl]},yo.$metadata$={kind:$,simpleName:"SerializerFactory",interfaces:[]},vo.prototype.collectionSize_wikn$=function(t){return t.length},vo.prototype.toBuilder_wikn$=function(t){return new xo(t)},vo.prototype.empty=function(){return new Int8Array(0)},vo.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e99oo$(t.decodeByteElement_szpzho$(this.descriptor,e))},vo.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeByteElement_j0u8y3$(this.descriptor,n,e[n])},vo.$metadata$={kind:p,simpleName:"ByteArraySerializer",interfaces:[Zn,Gl]};var go=null;function bo(){return null===go&&new vo,go}function xo(t){Yn.call(this),this.buffer_0=t,this.position_8vrcnd$_0=t.length,this.ensureCapacity_za3lpa$(10)}function wo(){zo=this,Zn.call(this,De())}Object.defineProperty(xo.prototype,"position",{configurable:!0,get:function(){return this.position_8vrcnd$_0},set:function(t){this.position_8vrcnd$_0=t}}),xo.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ut(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},xo.prototype.append_8e99oo$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},xo.prototype.build=function(){return ut(this.buffer_0,this.position)},xo.$metadata$={kind:n,simpleName:"ByteArrayBuilder",interfaces:[Yn]},wo.prototype.collectionSize_wikn$=function(t){return t.length},wo.prototype.toBuilder_wikn$=function(t){return new So(t)},wo.prototype.empty=function(){return new Int16Array(0)},wo.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_o3ifnw$(t.decodeShortElement_szpzho$(this.descriptor,e))},wo.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeShortElement_l83pjl$(this.descriptor,n,e[n])},wo.$metadata$={kind:p,simpleName:"ShortArraySerializer",interfaces:[Zn,Gl]};var zo=null;function ko(){return null===zo&&new wo,zo}function So(t){Yn.call(this),this.buffer_0=t,this.position_aswgsb$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Co(){No=this,Zn.call(this,Fe())}Object.defineProperty(So.prototype,"position",{configurable:!0,get:function(){return this.position_aswgsb$_0},set:function(t){this.position_aswgsb$_0=t}}),So.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=pt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},So.prototype.append_o3ifnw$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},So.prototype.build=function(){return pt(this.buffer_0,this.position)},So.$metadata$={kind:n,simpleName:"ShortArrayBuilder",interfaces:[Yn]},Co.prototype.collectionSize_wikn$=function(t){return t.length},Co.prototype.toBuilder_wikn$=function(t){return new To(t)},Co.prototype.empty=function(){return new Int32Array(0)},Co.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_kcn2v3$(t.decodeIntElement_szpzho$(this.descriptor,e))},Co.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeIntElement_ptg7oe$(this.descriptor,n,e[n])},Co.$metadata$={kind:p,simpleName:"IntArraySerializer",interfaces:[Zn,Gl]};var No=null;function Eo(){return null===No&&new Co,No}function To(t){Yn.call(this),this.buffer_0=t,this.position_9owhjc$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Po(){Oo=this,Zn.call(this,Ue())}Object.defineProperty(To.prototype,"position",{configurable:!0,get:function(){return this.position_9owhjc$_0},set:function(t){this.position_9owhjc$_0=t}}),To.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ct(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},To.prototype.append_kcn2v3$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},To.prototype.build=function(){return ct(this.buffer_0,this.position)},To.$metadata$={kind:n,simpleName:"IntArrayBuilder",interfaces:[Yn]},Po.prototype.collectionSize_wikn$=function(t){return t.length},Po.prototype.toBuilder_wikn$=function(t){return new jo(t)},Po.prototype.empty=function(){return e.longArray(0)},Po.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e33dg$(t.decodeLongElement_szpzho$(this.descriptor,e))},Po.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeLongElement_j0o2mv$(this.descriptor,n,e[n])},Po.$metadata$={kind:p,simpleName:"LongArraySerializer",interfaces:[Zn,Gl]};var Oo=null;function Mo(){return null===Oo&&new Po,Oo}function jo(t){Yn.call(this),this.buffer_0=t,this.position_kthxoj$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Ao(){Io=this,Zn.call(this,Ge())}Object.defineProperty(jo.prototype,"position",{configurable:!0,get:function(){return this.position_kthxoj$_0},set:function(t){this.position_kthxoj$_0=t}}),jo.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ht(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},jo.prototype.append_8e33dg$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},jo.prototype.build=function(){return ht(this.buffer_0,this.position)},jo.$metadata$={kind:n,simpleName:"LongArrayBuilder",interfaces:[Yn]},Ao.prototype.collectionSize_wikn$=function(t){return t.length},Ao.prototype.toBuilder_wikn$=function(t){return new Lo(t)},Ao.prototype.empty=function(){return new Float32Array(0)},Ao.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_nwfnho$(t.decodeFloatElement_szpzho$(this.descriptor,e))},Ao.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeFloatElement_lf6hpt$(this.descriptor,n,e[n])},Ao.$metadata$={kind:p,simpleName:"FloatArraySerializer",interfaces:[Zn,Gl]};var Io=null;function Ro(){return null===Io&&new Ao,Io}function Lo(t){Yn.call(this),this.buffer_0=t,this.position_gfqw9x$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Do(){qo=this,Zn.call(this,We())}Object.defineProperty(Lo.prototype,"position",{configurable:!0,get:function(){return this.position_gfqw9x$_0},set:function(t){this.position_gfqw9x$_0=t}}),Lo.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=dt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Lo.prototype.append_nwfnho$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Lo.prototype.build=function(){return dt(this.buffer_0,this.position)},Lo.$metadata$={kind:n,simpleName:"FloatArrayBuilder",interfaces:[Yn]},Do.prototype.collectionSize_wikn$=function(t){return t.length},Do.prototype.toBuilder_wikn$=function(t){return new Bo(t)},Do.prototype.empty=function(){return new Float64Array(0)},Do.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_tq0o01$(t.decodeDoubleElement_szpzho$(this.descriptor,e))},Do.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeDoubleElement_powrwi$(this.descriptor,n,e[n])},Do.$metadata$={kind:p,simpleName:"DoubleArraySerializer",interfaces:[Zn,Gl]};var qo=null;function Fo(){return null===qo&&new Do,qo}function Bo(t){Yn.call(this),this.buffer_0=t,this.position_qka0uq$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Uo(){Vo=this,Zn.call(this,Ae())}Object.defineProperty(Bo.prototype,"position",{configurable:!0,get:function(){return this.position_qka0uq$_0},set:function(t){this.position_qka0uq$_0=t}}),Bo.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ft(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Bo.prototype.append_tq0o01$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Bo.prototype.build=function(){return ft(this.buffer_0,this.position)},Bo.$metadata$={kind:n,simpleName:"DoubleArrayBuilder",interfaces:[Yn]},Uo.prototype.collectionSize_wikn$=function(t){return t.length},Uo.prototype.toBuilder_wikn$=function(t){return new Ho(t)},Uo.prototype.empty=function(){return e.charArray(0)},Uo.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e8zqy$(_t(t.decodeCharElement_szpzho$(this.descriptor,e)))},Uo.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeCharElement_j0tz0d$(this.descriptor,n,e[n])},Uo.$metadata$={kind:p,simpleName:"CharArraySerializer",interfaces:[Zn,Gl]};var Vo=null;function Go(){return null===Vo&&new Uo,Vo}function Ho(t){Yn.call(this),this.buffer_0=t,this.position_tpcwbb$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Wo(){Xo=this,Zn.call(this,Xe())}Object.defineProperty(Ho.prototype,"position",{configurable:!0,get:function(){return this.position_tpcwbb$_0},set:function(t){this.position_tpcwbb$_0=t}}),Ho.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=mt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Ho.prototype.append_8e8zqy$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Ho.prototype.build=function(){return mt(this.buffer_0,this.position)},Ho.$metadata$={kind:n,simpleName:"CharArrayBuilder",interfaces:[Yn]},Wo.prototype.collectionSize_wikn$=function(t){return t.length},Wo.prototype.toBuilder_wikn$=function(t){return new Zo(t)},Wo.prototype.empty=function(){return e.booleanArray(0)},Wo.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_vft4zs$(t.decodeBooleanElement_szpzho$(this.descriptor,e))},Wo.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeBooleanElement_qh7jdn$(this.descriptor,n,e[n])},Wo.$metadata$={kind:p,simpleName:"BooleanArraySerializer",interfaces:[Zn,Gl]};var Ko,Xo=null;function Yo(){return null===Xo&&new Wo,Xo}function Zo(t){Yn.call(this),this.buffer_0=t,this.position_fkn8lr$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Jo(t,e){this.serialName_h9gugr$_0=t,this.kind_rqp61y$_0=e}function Qo(t,e){return function(t){var e,i=Ko.keys;for(e=i.iterator();e.hasNext();){var n=e.next(),o=Rt(A(n.simpleName));if(Lt(t,"kotlin."+o,!0)||Lt(t,o,!0))throw O(Dt("\n                The name of serial descriptor should uniquely identify associated serializer.\n                For serial name "+t+" there already exist "+Rt(o)+"Serializer.\n                Please refer to SerialDescriptor documentation for additional information.\n            "))}}(t),new Jo(t,e)}function tr(t){var i;return null==(i=Ko.get_11rb$(t))||e.isType(i,Gl)?i:r()}function er(){ir=this,this.$delegate_t0wm8i$_0=new ao("kotlin.Unit",l)}Object.defineProperty(Zo.prototype,"position",{configurable:!0,get:function(){return this.position_fkn8lr$_0},set:function(t){this.position_fkn8lr$_0=t}}),Zo.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=$t(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Zo.prototype.append_vft4zs$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Zo.prototype.build=function(){return $t(this.buffer_0,this.position)},Zo.$metadata$={kind:n,simpleName:"BooleanArrayBuilder",interfaces:[Yn]},Object.defineProperty(Jo.prototype,"serialName",{get:function(){return this.serialName_h9gugr$_0}}),Object.defineProperty(Jo.prototype,"kind",{get:function(){return this.kind_rqp61y$_0}}),Object.defineProperty(Jo.prototype,"elementsCount",{configurable:!0,get:function(){return 0}}),Jo.prototype.getElementName_za3lpa$=function(t){return this.error_0()},Jo.prototype.getElementIndex_61zpoe$=function(t){return this.error_0()},Jo.prototype.isElementOptional_za3lpa$=function(t){return this.error_0()},Jo.prototype.getElementDescriptor_za3lpa$=function(t){return this.error_0()},Jo.prototype.getElementAnnotations_za3lpa$=function(t){return this.error_0()},Jo.prototype.toString=function(){return"PrimitiveDescriptor("+this.serialName+")"},Jo.prototype.error_0=function(){throw I("Primitive descriptor does not have elements")},Jo.$metadata$={kind:n,simpleName:"PrimitiveSerialDescriptor",interfaces:[oi]},Object.defineProperty(er.prototype,"descriptor",{get:function(){return this.$delegate_t0wm8i$_0.descriptor}}),er.prototype.deserialize_bq71mq$=function(t){return this.$delegate_t0wm8i$_0.deserialize_bq71mq$(t)},er.prototype.patch_h7kg3r$=function(t,e){return this.$delegate_t0wm8i$_0.patch_h7kg3r$(t,e)},er.prototype.serialize_55azsf$=function(t,e){return this.$delegate_t0wm8i$_0.serialize_55azsf$(t,e)},er.$metadata$={kind:p,simpleName:"UnitSerializer",interfaces:[Gl]};var ir=null;function nr(){return null===ir&&new er,ir}function or(){rr=this,this.descriptor_vdtvaz$_0=new Jo("kotlin.Boolean",ki())}Object.defineProperty(or.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vdtvaz$_0}}),or.prototype.serialize_55azsf$=function(t,e){t.encodeBoolean_6taknv$(e)},or.prototype.deserialize_bq71mq$=function(t){return t.decodeBoolean()},or.$metadata$={kind:p,simpleName:"BooleanSerializer",interfaces:[Gl]};var rr=null;function sr(){return null===rr&&new or,rr}function ar(){lr=this,this.descriptor_f6vlf1$_0=new Jo("kotlin.Byte",Ni())}Object.defineProperty(ar.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_f6vlf1$_0}}),ar.prototype.serialize_55azsf$=function(t,e){t.encodeByte_s8j3t7$(e)},ar.prototype.deserialize_bq71mq$=function(t){return t.decodeByte()},ar.$metadata$={kind:p,simpleName:"ByteSerializer",interfaces:[Gl]};var lr=null;function ur(){return null===lr&&new ar,lr}function pr(){cr=this,this.descriptor_yvjeup$_0=new Jo("kotlin.Short",ji())}Object.defineProperty(pr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yvjeup$_0}}),pr.prototype.serialize_55azsf$=function(t,e){t.encodeShort_mq22fl$(e)},pr.prototype.deserialize_bq71mq$=function(t){return t.decodeShort()},pr.$metadata$={kind:p,simpleName:"ShortSerializer",interfaces:[Gl]};var cr=null;function hr(){return null===cr&&new pr,cr}function dr(){fr=this,this.descriptor_xrjflq$_0=new Jo("kotlin.Int",Ri())}Object.defineProperty(dr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_xrjflq$_0}}),dr.prototype.serialize_55azsf$=function(t,e){t.encodeInt_za3lpa$(e)},dr.prototype.deserialize_bq71mq$=function(t){return t.decodeInt()},dr.$metadata$={kind:p,simpleName:"IntSerializer",interfaces:[Gl]};var fr=null;function _r(){return null===fr&&new dr,fr}function mr(){$r=this,this.descriptor_q4z687$_0=new Jo("kotlin.Long",qi())}Object.defineProperty(mr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_q4z687$_0}}),mr.prototype.serialize_55azsf$=function(t,e){t.encodeLong_s8cxhz$(e)},mr.prototype.deserialize_bq71mq$=function(t){return t.decodeLong()},mr.$metadata$={kind:p,simpleName:"LongSerializer",interfaces:[Gl]};var $r=null;function yr(){return null===$r&&new mr,$r}function vr(){gr=this,this.descriptor_7mw1sh$_0=new Jo("kotlin.Float",Ui())}Object.defineProperty(vr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7mw1sh$_0}}),vr.prototype.serialize_55azsf$=function(t,e){t.encodeFloat_mx4ult$(e)},vr.prototype.deserialize_bq71mq$=function(t){return t.decodeFloat()},vr.$metadata$={kind:p,simpleName:"FloatSerializer",interfaces:[Gl]};var gr=null;function br(){return null===gr&&new vr,gr}function xr(){wr=this,this.descriptor_2hn2sc$_0=new Jo("kotlin.Double",Hi())}Object.defineProperty(xr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_2hn2sc$_0}}),xr.prototype.serialize_55azsf$=function(t,e){t.encodeDouble_14dthe$(e)},xr.prototype.deserialize_bq71mq$=function(t){return t.decodeDouble()},xr.$metadata$={kind:p,simpleName:"DoubleSerializer",interfaces:[Gl]};var wr=null;function zr(){return null===wr&&new xr,wr}function kr(){Sr=this,this.descriptor_5mpy8x$_0=new Jo("kotlin.Char",Pi())}Object.defineProperty(kr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_5mpy8x$_0}}),kr.prototype.serialize_55azsf$=function(t,e){t.encodeChar_s8itvh$(e)},kr.prototype.deserialize_bq71mq$=function(t){return t.decodeChar()},kr.$metadata$={kind:p,simpleName:"CharSerializer",interfaces:[Gl]};var Sr=null;function Cr(){return null===Sr&&new kr,Sr}function Nr(){is=this,this.descriptor_sum718$_0=new Jo("kotlin.String",Xi())}Object.defineProperty(Nr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_sum718$_0}}),Nr.prototype.serialize_55azsf$=function(t,e){t.encodeString_61zpoe$(e)},Nr.prototype.deserialize_bq71mq$=function(t){return t.decodeString()},Nr.$metadata$={kind:p,simpleName:"StringSerializer",interfaces:[Gl]};var Er,Tr,Pr,Or,Mr,jr,Ar,Ir,Rr,Lr,Dr,qr,Fr,Br,Ur,Vr,Gr,Hr,Wr,Kr,Xr,Yr,Zr,Jr,Qr,ts,es,is=null;function ns(){return null===is&&new Nr,is}function os(){}function rs(){this.tagStack_cfsfm$_0=b()}function ss(t){void 0===t&&(t=""),rs.call(this),this.rootName=t}function as(){this.updateMode_cp3ftw$_0=Zl(),this.tagStack_h2rpra$_0=b(),this.flag_kguhq4$_0=!1}function ls(t){void 0===t&&(t=""),as.call(this),this.rootName=t}function us(t,e){this.keySerializer=t,this.valueSerializer=e}function ps(t,e){var i,n;us.call(this,t,e),this.descriptor_cnmk75$_0=ci("kotlin.collections.Map.Entry",sn(),[],(i=t,n=e,function(t){return t.element_vxrguq$("key",i.descriptor),t.element_vxrguq$("value",n.descriptor),l}))}function cs(t,e){this.key_7uv6mv$_0=t,this.value_gjenjd$_0=e}function hs(t,e){var i,n;us.call(this,t,e),this.descriptor_utc4rp$_0=li("kotlin.Pair",[],(i=t,n=e,function(t){return t.element_vxrguq$("first",i.descriptor),t.element_vxrguq$("second",n.descriptor),l}))}function ds(t,e,i){var n;this.aSerializer_0=t,this.bSerializer_0=e,this.cSerializer_0=i,this.descriptor_73a6vr$_0=li("kotlin.Triple",[],(n=this,function(t){return t.element_vxrguq$("first",n.aSerializer_0.descriptor),t.element_vxrguq$("second",n.bSerializer_0.descriptor),t.element_vxrguq$("third",n.cSerializer_0.descriptor),l}))}function fs(t,e,i,n,o,r,s,a,l,u,p){void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r="    "),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===l&&(l="type"),void 0===u&&(u=!1),void 0===p&&(p=Il),this.encodeDefaults=t,this.ignoreUnknownKeys=e,this.isLenient=i,this.allowStructuredMapKeys=n,this.prettyPrint=o,this.prettyPrintIndent=r,this.coerceInputValues=s,this.useArrayPolymorphism=a,this.classDiscriminator=l,this.allowSpecialFloatingPointValues=u,this.serializersModule=p}function _s(t){pu(t,this),this.name="JsonException"}function ms(t,e){_s.call(this,t>=0?"Unexpected JSON token at offset "+t+": "+e:e),this.name="JsonDecodingException"}function $s(t){_s.call(this,t),this.name="JsonEncodingException"}function ys(t,e,i){return new ms(t,e+"\nJSON input: "+Ss(i,t))}function vs(t,e){return new $s("Unexpected special floating-point value "+t.toString()+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+Ss(e))}function gs(t,e,i){return new $s(ws(t,e,i))}function bs(t,e,i){return new ms(-1,ws(t,e,i))}function xs(t,e){t.fail_bm4lxs$("Unexpected special floating-point value "+e.toString()+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. "+Pr)}function ws(t,e,i){return"Unexpected special floating-point value "+t.toString()+" with key "+e+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+Ss(i)}function zs(t,e){return new ms(-1,"Encountered unknown key '"+t+"'.\nUse 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.\nCurrent input: "+Ss(e))}function ks(t){return new $s("Value of type '"+t.serialName+"' can't be used in JSON as a key in the map. It should have either primitive or enum kind, but its kind is '"+t.kind+"'.\n"+Mr)}function Ss(t,e){if(void 0===e&&(e=-1),t.length<200)return t;if(-1===e){var i=t.length-60|0;return i<=0?t:"....."+t.substring(i)}var n=e-30|0,o=e+30|0,r=n<=0?"":".....",s=o>=t.length?"":".....",a=lt(n,0),l=Gt(o,t.length);return r+t.substring(a,l)+s}function Cs(t,e){this.reader_0=e,this.isLenient_0=t.isLenient}function Ns(){As=this,this.ESCAPE_2_CHAR=e.charArray(117);for(var t=0;t<=31;t++)this.initC2ESC_0(t,Vr);this.initC2ESC_0(8,98),this.initC2ESC_0(9,116),this.initC2ESC_0(10,110),this.initC2ESC_0(12,102),this.initC2ESC_0(13,114),this.initC2ESC_1(47,47),this.initC2ESC_1(Fr,Fr),this.initC2ESC_1(Br,Br)}Object.defineProperty(rs.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),rs.prototype.encodeTaggedValue_dpg7wc$=function(t,i){throw pu("Non-serializable "+e.getKClassFromExpression(i)+" is not supported by "+e.getKClassFromExpression(this)+" encoder")},rs.prototype.encodeTaggedNotNullMark_11rb$=function(t){},rs.prototype.encodeTaggedNull_11rb$=function(t){throw pu("null is not supported")},rs.prototype.encodeTaggedInt_dpg1yx$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedByte_19qe40$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedShort_veccj0$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedLong_19wkf8$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedFloat_vlf4p8$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedDouble_e37ph5$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedBoolean_iuyhfk$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedChar_19qo1q$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,R(e))},rs.prototype.encodeTaggedString_l9l8mx$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},rs.prototype.encodeTaggedEnum_4xdzqf$=function(t,e,i){this.encodeTaggedValue_dpg7wc$(t,i)},rs.prototype.encodeElement_qp90hq$_0=function(t,e){var i=this.getTag_av9bu7$(t,e);return this.pushTag_11rb$(i),!0},rs.prototype.encodeNotNullMark=function(){this.encodeTaggedNotNullMark_11rb$(this.currentTag)},rs.prototype.encodeNull=function(){this.encodeTaggedNull_11rb$(this.popTag())},rs.prototype.encodeBoolean_6taknv$=function(t){this.encodeTaggedBoolean_iuyhfk$(this.popTag(),t)},rs.prototype.encodeByte_s8j3t7$=function(t){this.encodeTaggedByte_19qe40$(this.popTag(),t)},rs.prototype.encodeShort_mq22fl$=function(t){this.encodeTaggedShort_veccj0$(this.popTag(),t)},rs.prototype.encodeInt_za3lpa$=function(t){this.encodeTaggedInt_dpg1yx$(this.popTag(),t)},rs.prototype.encodeLong_s8cxhz$=function(t){this.encodeTaggedLong_19wkf8$(this.popTag(),t)},rs.prototype.encodeFloat_mx4ult$=function(t){this.encodeTaggedFloat_vlf4p8$(this.popTag(),t)},rs.prototype.encodeDouble_14dthe$=function(t){this.encodeTaggedDouble_e37ph5$(this.popTag(),t)},rs.prototype.encodeChar_s8itvh$=function(t){this.encodeTaggedChar_19qo1q$(this.popTag(),t)},rs.prototype.encodeString_61zpoe$=function(t){this.encodeTaggedString_l9l8mx$(this.popTag(),t)},rs.prototype.encodeEnum_szpzho$=function(t,e){this.encodeTaggedEnum_4xdzqf$(this.popTag(),t,e)},rs.prototype.beginStructure_jvp2sb$=function(t,e){return this},rs.prototype.endStructure_24f42q$=function(t){this.tagStack_cfsfm$_0.isEmpty()||this.popTag(),this.endEncode_24f42q$(t)},rs.prototype.endEncode_24f42q$=function(t){},rs.prototype.encodeBooleanElement_qh7jdn$=function(t,e,i){this.encodeTaggedBoolean_iuyhfk$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeByteElement_j0u8y3$=function(t,e,i){this.encodeTaggedByte_19qe40$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeShortElement_l83pjl$=function(t,e,i){this.encodeTaggedShort_veccj0$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeIntElement_ptg7oe$=function(t,e,i){this.encodeTaggedInt_dpg1yx$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeLongElement_j0o2mv$=function(t,e,i){this.encodeTaggedLong_19wkf8$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeFloatElement_lf6hpt$=function(t,e,i){this.encodeTaggedFloat_vlf4p8$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeDoubleElement_powrwi$=function(t,e,i){this.encodeTaggedDouble_e37ph5$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeCharElement_j0tz0d$=function(t,e,i){this.encodeTaggedChar_19qo1q$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeStringElement_iij8qq$=function(t,e,i){this.encodeTaggedString_l9l8mx$(this.getTag_av9bu7$(t,e),i)},rs.prototype.encodeSerializableElement_r4qlx7$=function(t,e,i,n){this.encodeElement_qp90hq$_0(t,e)&&this.encodeSerializableValue_tf03ej$(i,n)},rs.prototype.encodeNullableSerializableElement_qw92s8$=function(t,e,i,n){this.encodeElement_qp90hq$_0(t,e)&&this.encodeNullableSerializableValue_f4686g$(i,n)},Object.defineProperty(rs.prototype,"currentTag",{configurable:!0,get:function(){return qt(this.tagStack_cfsfm$_0)}}),Object.defineProperty(rs.prototype,"currentTagOrNull",{configurable:!0,get:function(){return Ft(this.tagStack_cfsfm$_0)}}),rs.prototype.pushTag_11rb$=function(t){this.tagStack_cfsfm$_0.add_11rb$(t)},rs.prototype.popTag=function(){if(this.tagStack_cfsfm$_0.isEmpty())throw pu("No tag in stack for requested element");return this.tagStack_cfsfm$_0.removeAt_za3lpa$(Bt(this.tagStack_cfsfm$_0))},rs.$metadata$={kind:n,simpleName:"TaggedEncoder",interfaces:[On,Pn]},ss.prototype.getTag_av9bu7$=function(t,e){return this.nested_61zpoe$(this.elementName_szpzho$(t,e))},ss.prototype.nested_61zpoe$=function(t){var e;return this.composeName_puj7f4$(null!=(e=this.currentTagOrNull)?e:this.rootName,t)},ss.prototype.elementName_szpzho$=function(t,e){return t.getElementName_za3lpa$(e)},ss.prototype.composeName_puj7f4$=function(t,e){return 0===t.length?e:t+"."+e},ss.$metadata$={kind:n,simpleName:"NamedValueEncoder",interfaces:[rs]},Object.defineProperty(as.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),Object.defineProperty(as.prototype,"updateMode",{configurable:!0,get:function(){return this.updateMode_cp3ftw$_0}}),as.prototype.decodeTaggedValue_11rb$=function(t){throw pu(e.getKClassFromExpression(this).toString()+" can't retrieve untyped values")},as.prototype.decodeTaggedNotNullMark_11rb$=function(t){return!0},as.prototype.decodeTaggedNull_11rb$=function(t){return null},as.prototype.decodeTaggedBoolean_11rb$=function(t){var e;return"boolean"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedByte_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedShort_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedInt_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedLong_11rb$=function(t){var i;return e.isType(i=this.decodeTaggedValue_11rb$(t),e.Long)?i:r()},as.prototype.decodeTaggedFloat_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedDouble_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedChar_11rb$=function(t){var i;return e.isChar(i=this.decodeTaggedValue_11rb$(t))?i:r()},as.prototype.decodeTaggedString_11rb$=function(t){var e;return"string"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:r()},as.prototype.decodeTaggedEnum_gaombr$=function(t,e){var i;return"number"==typeof(i=this.decodeTaggedValue_11rb$(t))?i:r()},as.prototype.decodeSerializableValue_19c8k5$=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},as.prototype.decodeNotNullMark=function(){return this.decodeTaggedNotNullMark_11rb$(this.currentTag)},as.prototype.decodeNull=function(){return null},as.prototype.decodeBoolean=function(){return this.decodeTaggedBoolean_11rb$(this.popTag())},as.prototype.decodeByte=function(){return this.decodeTaggedByte_11rb$(this.popTag())},as.prototype.decodeShort=function(){return this.decodeTaggedShort_11rb$(this.popTag())},as.prototype.decodeInt=function(){return this.decodeTaggedInt_11rb$(this.popTag())},as.prototype.decodeLong=function(){return this.decodeTaggedLong_11rb$(this.popTag())},as.prototype.decodeFloat=function(){return this.decodeTaggedFloat_11rb$(this.popTag())},as.prototype.decodeDouble=function(){return this.decodeTaggedDouble_11rb$(this.popTag())},as.prototype.decodeChar=function(){return this.decodeTaggedChar_11rb$(this.popTag())},as.prototype.decodeString=function(){return this.decodeTaggedString_11rb$(this.popTag())},as.prototype.decodeEnum_24f42q$=function(t){return this.decodeTaggedEnum_gaombr$(this.popTag(),t)},as.prototype.beginStructure_jvp2sb$=function(t,e){return this},as.prototype.endStructure_24f42q$=function(t){},as.prototype.decodeBooleanElement_szpzho$=function(t,e){return this.decodeTaggedBoolean_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeByteElement_szpzho$=function(t,e){return this.decodeTaggedByte_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeShortElement_szpzho$=function(t,e){return this.decodeTaggedShort_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeIntElement_szpzho$=function(t,e){return this.decodeTaggedInt_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeLongElement_szpzho$=function(t,e){return this.decodeTaggedLong_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeFloatElement_szpzho$=function(t,e){return this.decodeTaggedFloat_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeDoubleElement_szpzho$=function(t,e){return this.decodeTaggedDouble_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeCharElement_szpzho$=function(t,e){return this.decodeTaggedChar_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeStringElement_szpzho$=function(t,e){return this.decodeTaggedString_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.tagBlock_lngyui$_0(this.getTag_av9bu7$(t,e),(o=i,r=n,s=this,function(){return s.decodeSerializableValue_19c8k5$(o,r)}));var o,r,s},as.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return this.tagBlock_lngyui$_0(this.getTag_av9bu7$(t,e),(o=this,r=i,s=n,function(){return o.decodeNotNullMark()?o.decodeSerializableValue_19c8k5$(r,s):o.decodeNull()}));var o,r,s},as.prototype.tagBlock_lngyui$_0=function(t,e){this.pushTag_11rb$(t);var i=e();return this.flag_kguhq4$_0||this.popTag(),this.flag_kguhq4$_0=!1,i},Object.defineProperty(as.prototype,"currentTag",{configurable:!0,get:function(){return qt(this.tagStack_h2rpra$_0)}}),Object.defineProperty(as.prototype,"currentTagOrNull",{configurable:!0,get:function(){return Ft(this.tagStack_h2rpra$_0)}}),as.prototype.pushTag_11rb$=function(t){this.tagStack_h2rpra$_0.add_11rb$(t)},as.prototype.copyTagsTo_lgvuxj$=function(t){t.tagStack_h2rpra$_0.addAll_brywnq$(this.tagStack_h2rpra$_0)},as.prototype.popTag=function(){var t=this.tagStack_h2rpra$_0.removeAt_za3lpa$(Bt(this.tagStack_h2rpra$_0));return this.flag_kguhq4$_0=!0,t},as.$metadata$={kind:n,simpleName:"TaggedDecoder",interfaces:[vn,yn]},ls.prototype.getTag_av9bu7$=function(t,e){return this.nested_61zpoe$(this.elementName_szpzho$(t,e))},ls.prototype.nested_61zpoe$=function(t){var e;return this.composeName_puj7f4$(null!=(e=this.currentTagOrNull)?e:this.rootName,t)},ls.prototype.elementName_szpzho$=function(t,e){return t.getElementName_za3lpa$(e)},ls.prototype.composeName_puj7f4$=function(t,e){return 0===t.length?e:t+"."+e},ls.$metadata$={kind:n,simpleName:"NamedValueDecoder",interfaces:[as]},us.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,this.keySerializer,this.get_key_wili$(e)),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,this.valueSerializer,this.get_value_wili$(e)),i.endStructure_24f42q$(this.descriptor)},us.prototype.deserialize_bq71mq$=function(t){var i,n,o=t.beginStructure_24f42q$(this.descriptor);if(o.decodeSequentially()){var s=o.decodeSerializableElement_12e8id$(this.descriptor,0,this.keySerializer),a=o.decodeSerializableElement_12e8id$(this.descriptor,1,this.valueSerializer);return this.toResult_xwzc9p$(s,a)}var l=Er,u=Er;t:for(;;){var p=o.decodeElementIndex_24f42q$(this.descriptor);switch(p){case-1:break t;case 0:l=o.decodeSerializableElement_12e8id$(this.descriptor,0,this.keySerializer);break;case 1:u=o.decodeSerializableElement_12e8id$(this.descriptor,1,this.valueSerializer);break;default:throw pu("Invalid index: "+p)}}if(o.endStructure_24f42q$(this.descriptor),l===Er)throw pu("Element 'key' is missing");if(u===Er)throw pu("Element 'value' is missing");return this.toResult_xwzc9p$(null==(i=l)||e.isType(i,L)?i:r(),null==(n=u)||e.isType(n,L)?n:r())},us.$metadata$={kind:n,simpleName:"KeyValueSerializer",interfaces:[Gl]},Object.defineProperty(cs.prototype,"key",{get:function(){return this.key_7uv6mv$_0}}),Object.defineProperty(cs.prototype,"value",{get:function(){return this.value_gjenjd$_0}}),cs.$metadata$={kind:n,simpleName:"MapEntry",interfaces:[Ut]},cs.prototype.component1=function(){return this.key},cs.prototype.component2=function(){return this.value},cs.prototype.copy_xwzc9p$=function(t,e){return new cs(void 0===t?this.key:t,void 0===e?this.value:e)},cs.prototype.toString=function(){return"MapEntry(key="+e.toString(this.key)+", value="+e.toString(this.value)+")"},cs.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.key)|0)+e.hashCode(this.value)|0},cs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.key,t.key)&&e.equals(this.value,t.value)},Object.defineProperty(ps.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_cnmk75$_0}}),ps.prototype.get_key_wili$=function(t){return t.key},ps.prototype.get_value_wili$=function(t){return t.value},ps.prototype.toResult_xwzc9p$=function(t,e){return new cs(t,e)},ps.$metadata$={kind:n,simpleName:"MapEntrySerializer",interfaces:[us]},Object.defineProperty(hs.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_utc4rp$_0}}),hs.prototype.get_key_wili$=function(t){return t.first},hs.prototype.get_value_wili$=function(t){return t.second},hs.prototype.toResult_xwzc9p$=function(t,e){return N(t,e)},hs.$metadata$={kind:n,simpleName:"PairSerializer",interfaces:[us]},Object.defineProperty(ds.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_73a6vr$_0}}),ds.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,this.aSerializer_0,e.first),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,this.bSerializer_0,e.second),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,this.cSerializer_0,e.third),i.endStructure_24f42q$(this.descriptor)},ds.prototype.deserialize_bq71mq$=function(t){var e=t.beginStructure_24f42q$(this.descriptor);return e.decodeSequentially()?this.decodeSequentially_0(e):this.decodeStructure_0(e)},ds.prototype.decodeSequentially_0=function(t){var e=t.decodeSerializableElement_12e8id$(this.descriptor,0,this.aSerializer_0),i=t.decodeSerializableElement_12e8id$(this.descriptor,1,this.bSerializer_0),n=t.decodeSerializableElement_12e8id$(this.descriptor,2,this.cSerializer_0);return t.endStructure_24f42q$(this.descriptor),new Vt(e,i,n)},ds.prototype.decodeStructure_0=function(t){var i,n,o,s=Er,a=Er,l=Er;t:for(;;){var u=t.decodeElementIndex_24f42q$(this.descriptor);switch(u){case-1:break t;case 0:s=t.decodeSerializableElement_12e8id$(this.descriptor,0,this.aSerializer_0);break;case 1:a=t.decodeSerializableElement_12e8id$(this.descriptor,1,this.bSerializer_0);break;case 2:l=t.decodeSerializableElement_12e8id$(this.descriptor,2,this.cSerializer_0);break;default:throw pu("Unexpected index "+u)}}if(t.endStructure_24f42q$(this.descriptor),s===Er)throw pu("Element 'first' is missing");if(a===Er)throw pu("Element 'second' is missing");if(l===Er)throw pu("Element 'third' is missing");return new Vt(null==(i=s)||e.isType(i,L)?i:r(),null==(n=a)||e.isType(n,L)?n:r(),null==(o=l)||e.isType(o,L)?o:r())},ds.$metadata$={kind:n,simpleName:"TripleSerializer",interfaces:[Gl]},fs.$metadata$={kind:n,simpleName:"JsonConf",interfaces:[]},fs.prototype.component1=function(){return this.encodeDefaults},fs.prototype.component2=function(){return this.ignoreUnknownKeys},fs.prototype.component3=function(){return this.isLenient},fs.prototype.component4=function(){return this.allowStructuredMapKeys},fs.prototype.component5=function(){return this.prettyPrint},fs.prototype.component6=function(){return this.prettyPrintIndent},fs.prototype.component7=function(){return this.coerceInputValues},fs.prototype.component8=function(){return this.useArrayPolymorphism},fs.prototype.component9=function(){return this.classDiscriminator},fs.prototype.component10=function(){return this.allowSpecialFloatingPointValues},fs.prototype.component11=function(){return this.serializersModule},fs.prototype.copy_2joh8z$=function(t,e,i,n,o,r,s,a,l,u,p){return new fs(void 0===t?this.encodeDefaults:t,void 0===e?this.ignoreUnknownKeys:e,void 0===i?this.isLenient:i,void 0===n?this.allowStructuredMapKeys:n,void 0===o?this.prettyPrint:o,void 0===r?this.prettyPrintIndent:r,void 0===s?this.coerceInputValues:s,void 0===a?this.useArrayPolymorphism:a,void 0===l?this.classDiscriminator:l,void 0===u?this.allowSpecialFloatingPointValues:u,void 0===p?this.serializersModule:p)},fs.prototype.toString=function(){return"JsonConf(encodeDefaults="+e.toString(this.encodeDefaults)+", ignoreUnknownKeys="+e.toString(this.ignoreUnknownKeys)+", isLenient="+e.toString(this.isLenient)+", allowStructuredMapKeys="+e.toString(this.allowStructuredMapKeys)+", prettyPrint="+e.toString(this.prettyPrint)+", prettyPrintIndent="+e.toString(this.prettyPrintIndent)+", coerceInputValues="+e.toString(this.coerceInputValues)+", useArrayPolymorphism="+e.toString(this.useArrayPolymorphism)+", classDiscriminator="+e.toString(this.classDiscriminator)+", allowSpecialFloatingPointValues="+e.toString(this.allowSpecialFloatingPointValues)+", serializersModule="+e.toString(this.serializersModule)+")"},fs.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.encodeDefaults)|0)+e.hashCode(this.ignoreUnknownKeys)|0)+e.hashCode(this.isLenient)|0)+e.hashCode(this.allowStructuredMapKeys)|0)+e.hashCode(this.prettyPrint)|0)+e.hashCode(this.prettyPrintIndent)|0)+e.hashCode(this.coerceInputValues)|0)+e.hashCode(this.useArrayPolymorphism)|0)+e.hashCode(this.classDiscriminator)|0)+e.hashCode(this.allowSpecialFloatingPointValues)|0)+e.hashCode(this.serializersModule)|0},fs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.encodeDefaults,t.encodeDefaults)&&e.equals(this.ignoreUnknownKeys,t.ignoreUnknownKeys)&&e.equals(this.isLenient,t.isLenient)&&e.equals(this.allowStructuredMapKeys,t.allowStructuredMapKeys)&&e.equals(this.prettyPrint,t.prettyPrint)&&e.equals(this.prettyPrintIndent,t.prettyPrintIndent)&&e.equals(this.coerceInputValues,t.coerceInputValues)&&e.equals(this.useArrayPolymorphism,t.useArrayPolymorphism)&&e.equals(this.classDiscriminator,t.classDiscriminator)&&e.equals(this.allowSpecialFloatingPointValues,t.allowSpecialFloatingPointValues)&&e.equals(this.serializersModule,t.serializersModule)},_s.$metadata$={kind:n,simpleName:"JsonException",interfaces:[uu]},ms.$metadata$={kind:n,simpleName:"JsonDecodingException",interfaces:[_s]},$s.$metadata$={kind:n,simpleName:"JsonEncodingException",interfaces:[_s]},Cs.prototype.readObject_0=function(){var t=this.reader_0;t.tokenClass!==Xr&&(R(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected start of the object",t.tokenPosition_0)),this.reader_0.nextToken();var e=this.reader_0,i=this.reader_0.tokenClass!==Wr,n=this.reader_0.currentPosition;i||e.fail_bm4lxs$("Unexpected leading comma",n);for(var o=K(),r=!1;this.reader_0.canBeginValue;){r=!1;var s=this.isLenient_0?this.reader_0.takeString():this.reader_0.takeStringQuoted(),a=this.reader_0;a.tokenClass!==Kr&&(R(Ht(a.tokenClass)),a.fail_bm4lxs$("Expected ':'",a.tokenPosition_0)),this.reader_0.nextToken();var l=this.read();if(o.put_xwzc9p$(s,l),this.reader_0.tokenClass!==Wr){var u=this.reader_0;u.tokenClass!==Yr&&(R(Ht(u.tokenClass)),u.fail_bm4lxs$("Expected end of the object or comma",u.tokenPosition_0))}else r=!0,this.reader_0.nextToken()}var p=this.reader_0,c=!r&&this.reader_0.tokenClass===Yr,h=this.reader_0.currentPosition;return c||p.fail_bm4lxs$("Expected end of the object",h),this.reader_0.nextToken(),new Ha(o)},Cs.prototype.readArray_0=function(){var t=this.reader_0;t.tokenClass!==Zr&&(R(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected start of the array",t.tokenPosition_0)),this.reader_0.nextToken();var e=this.reader_0,i=this.reader_0.tokenClass!==Wr,n=this.reader_0.currentPosition;i||e.fail_bm4lxs$("Unexpected leading comma",n);for(var o=b(),r=!1;this.reader_0.canBeginValue;){r=!1;var s=this.read();if(o.add_11rb$(s),this.reader_0.tokenClass!==Wr){var a=this.reader_0;a.tokenClass!==Jr&&(R(Ht(a.tokenClass)),a.fail_bm4lxs$("Expected end of the array or comma",a.tokenPosition_0))}else r=!0,this.reader_0.nextToken()}var l=this.reader_0,u=!r,p=this.reader_0.currentPosition;return u||l.fail_bm4lxs$("Unexpected trailing comma",p),this.reader_0.nextToken(),new Za(o)},Cs.prototype.readValue_0=function(t){return new Ba(this.isLenient_0?this.reader_0.takeString():t?this.reader_0.takeStringQuoted():this.reader_0.takeString(),t)},Cs.prototype.read=function(){var t;switch(this.reader_0.canBeginValue||this.reader_0.fail_bm4lxs$("Can't begin reading value from here"),this.reader_0.tokenClass){case 10:var e=Ga();this.reader_0.nextToken(),t=e;break;case 1:t=this.readValue_0(!0);break;case 0:t=this.readValue_0(!1);break;case 6:t=this.readObject_0();break;case 8:t=this.readArray_0();break;default:t=this.reader_0.fail_bm4lxs$("Can't begin reading element, unexpected token")}return t},Cs.$metadata$={kind:n,simpleName:"JsonParser",interfaces:[]},Ns.prototype.initC2ESC_0=function(t,e){e!==Vr&&(this.ESCAPE_2_CHAR[0|e]=Ht(t))},Ns.prototype.initC2ESC_1=function(t,e){this.initC2ESC_0(0|t,e)},Ns.$metadata$={kind:p,simpleName:"EscapeCharMappings",interfaces:[]};var Es,Ts,Ps,Os,Ms,js,As=null;function Is(){return null===As&&new Ns,As}function Rs(t,e,i){t[e]=i}function Ls(t,e,i){Rs(t,0|e,i)}function Ds(t){return(0|t)<126?es[0|t]:Gr}function qs(t){return _t(t<117?Is().ESCAPE_2_CHAR[t]:Ur)}function Fs(t){this.source_0=t,this.currentPosition=0,this.tokenClass=ts,this.tokenPosition_0=0,this.offset_0=-1,this.length_0=0,this.buf_0=e.charArray(16),this.nextToken()}function Bs(t,i,n){var o,s,a=e.isType(o=i,Mn)?o:r(),l=nu(a,t,e.isType(s=n,L)?s:r());return function(t,i,n){if(e.isType(t,ru)&&lo(i.descriptor).contains_11rb$(n)){var o=t.descriptor.serialName,r=i.descriptor.serialName;throw I(("Sealed class '"+r+"' cannot be serialized as base class '"+o+"' because it has property name that conflicts with JSON class discriminator '"+n+"'. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism").toString())}}(a,l,t.json.configuration_8be2vx$.classDiscriminator),Us(l.descriptor.kind),l}function Us(t){if(e.isType(t,mi))throw I("Enums cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead".toString());if(e.isType(t,xi))throw I("Primitives cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead".toString());if(e.isType(t,pn))throw I("Actual serializer for polymorphic cannot be polymorphic itself".toString())}function Vs(t,n){var o,s,a,l;if(!e.isType(n,Mn)||t.json.configuration_8be2vx$.useArrayPolymorphism)return n.deserialize_bq71mq$(t);var u=t.decodeJsonElement(),p=n.descriptor;if(!e.isType(u,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+p.serialName+", but had "+e.getKClassFromExpression(u));var c,h,d=u,_=t.json.configuration_8be2vx$.classDiscriminator,m=null!=(s=null!=(o=d.get_11rb$(_))?el(o):null)?s.content:null;c=null!=(a=n.findPolymorphicSerializerOrNull_ca6uye$(t,m))?e.isType(h=a,Wl)?h:r():null;var $=null!=(l=c)?l:function(t,e){throw ys(-1,"Polymorphic serializer was not found for "+(null==t?"missing class discriminator ('null')":"class discriminator '"+f(t)+"'"),e.toString())}(m,d);return ea(t.json,_,d,$)}function Gs(t,e){this.useArrayPolymorphism_0=t,this.discriminator_0=e}function Hs(t,e,i){mn.call(this),this.json_n7tmf6$_0=t,this.mode_0=e,this.reader_8be2vx$=i,this.serializersModule_5carun$_0=this.json.serializersModule,this.currentIndex_0=-1,this.configuration_0=this.json.configuration_8be2vx$}function Ws(t,e,i,n){$n.call(this),this.composer_0=t,this.json_8uu1uy$_0=e,this.mode_0=i,this.modeReuseCache_0=n,this.serializersModule_tvtxsn$_0=this.json.serializersModule,this.configuration_0=this.json.configuration_8be2vx$,this.forceQuoting_0=!1,this.writePolymorphic_0=!1;var o=this.mode_0.ordinal;null===this.modeReuseCache_0[o]&&this.modeReuseCache_0[o]===this||(this.modeReuseCache_0[o]=this)}function Ks(t,e){this.sb_8be2vx$=t,this.json_0=e,this.level_0=0,this.writingFirst_4lagic$_0=!0}function Xs(t,e,i,n,o){return o=o||Object.create(Ws.prototype),Ws.call(o,new Ks(t,e),e,i,n),o}function Ys(t){var e=15&t;return Ht(e<10?e+48|0:e-10+97|0)}function Zs(t,e){var i;t.append_s8itvh$(Fr);for(var n=0,o=e.length,r=0;r<o;r++){var s=0|e.charCodeAt(r);if(!(s>=Es.length)&&null!=(i=Es[s])){var a=i;t.append_ezbsdh$(e,n,r),t.append_pdl1vj$(a),n=r+1|0}}t.append_ezbsdh$(e,n,o),t.append_s8itvh$(Fr)}function Js(t){var e;if(null==(e=Qs(t)))throw I(t+" does not represent a Boolean");return e}function Qs(t){return!!Lt(t,"true",!0)||!Lt(t,"false",!0)&&null}function ta(t,i,n){var o;return(e.isType(i,Ha)?new oa(t,i):e.isType(i,Za)?new sa(t,i):e.isType(i,Ba)||h(i,Ga())?new na(t,e.isType(o=i,Aa)?o:r()):e.noWhenBranchMatched()).decodeSerializableValue_w63s0f$(n)}function ea(t,e,i,n){return new oa(t,i,e,n.descriptor).decodeSerializableValue_w63s0f$(n)}function ia(t,e){ls.call(this),this.json_nf7dq8$_0=t,this.value_admuh1$_0=e,this.configuration_0=this.json.configuration_8be2vx$}function na(t,e){ia.call(this,t,e),this.value_icegni$_0=e,this.pushTag_11rb$(Ts)}function oa(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),ia.call(this,t,e),this.value_nyd9q1$_0=e,this.polyDiscriminator_0=i,this.polyDescriptor_0=n,this.position_0=0}function ra(t,e){oa.call(this,t,e),this.value_ozc1lj$_0=e,this.keys_0=oe(this.value.keys),this.size_0=2*this.keys_0.size|0,this.position_1=-1}function sa(t,e){ia.call(this,t,e),this.value_z81zg7$_0=e,this.size_0=this.value.size,this.currentIndex_0=-1}function aa(t,e,i){var n,o={v:null};return new pa(t,(n=o,function(t){return n.v=t,l})).encodeSerializableValue_tf03ej$(i,e),null==o.v?se("result"):o.v}function la(t,e){ss.call(this),this.json_927t60$_0=t,this.nodeConsumer=e,this.configuration_0=this.json.configuration_8be2vx$,this.writePolymorphic_0=!1}function ua(t,e){la.call(this,t,e),this.content_0=null,this.pushTag_11rb$(Ts)}function pa(t,e){la.call(this,t,e),this.content_0=K()}function ca(t,e){pa.call(this,t,e),this.tag_s622uw$_0=this.tag_s622uw$_0,this.isKey_0=!0}function ha(t,e){la.call(this,t,e),this.array_0=b()}function da(t,e,i,n){ae.call(this),this.begin=R(i),this.end=R(n),this.name$=t,this.ordinal$=e,this.beginTc=Ds(_t(this.begin)),this.endTc=Ds(_t(this.end))}function fa(){fa=function(){},Ps=new da("OBJ",0,Rr,Lr),Os=new da("LIST",1,Dr,qr),Ms=new da("MAP",2,Rr,Lr),js=new da("POLY_OBJ",3,Dr,qr)}function _a(){return fa(),Ps}function ma(){return fa(),Os}function $a(){return fa(),Ms}function ya(){return fa(),js}function va(){return[_a(),ma(),$a(),ya()]}function ga(t,i){var n;if(n=i.kind,e.isType(n,pn))return ya();if(h(n,nn()))return ma();if(h(n,sn())){var o,r=i.getElementDescriptor_za3lpa$(0),s=r.kind;if(e.isType(s,xi)||h(s,_i.ENUM))o=$a();else{if(!t.configuration_8be2vx$.allowStructuredMapKeys)throw ks(r);o=ma()}return o}return _a()}function ba(t){Sa(),this.configuration_8be2vx$=t}function xa(){ka=this,ba.call(this,new fs)}Object.defineProperty(Fs.prototype,"isDone",{configurable:!0,get:function(){return this.tokenClass===ts}}),Object.defineProperty(Fs.prototype,"canBeginValue",{configurable:!0,get:function(){switch(this.tokenClass){case 8:case 6:case 0:case 1:case 10:return!0;default:return!1}}}),Fs.prototype.requireTokenClass_mvfnf3$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.json.internal.JsonReader.requireTokenClass_mvfnf3$",a((function(){var t=e.toChar,i=e.toBoxedChar;return function(e,n){this.tokenClass!==e&&this.fail_bm4lxs$(n(i(t(this.tokenClass))),this.tokenPosition_0)}}))),Fs.prototype.takeString=function(){return this.tokenClass!==Gr&&this.tokenClass!==Hr&&this.fail_bm4lxs$("Expected string or non-null literal",this.tokenPosition_0),this.takeStringInternal_0()},Fs.prototype.peekString_6taknv$=function(t){return this.tokenClass===Hr||t&&this.tokenClass===Gr?this.takeStringInternal_0(!1):null},Fs.prototype.takeStringQuoted=function(){switch(this.tokenClass){case 1:break;case 10:this.fail_bm4lxs$("Expected string literal but 'null' literal was found.\nUse 'coerceInputValues = true' in 'Json {}` builder to coerce nulls to default values.",this.tokenPosition_0);break;default:this.fail_bm4lxs$("Expected string literal with quotes.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",this.tokenPosition_0)}return this.takeStringInternal_0()},Fs.prototype.takeBooleanStringUnquoted=function(){return this.tokenClass!==Gr&&this.fail_bm4lxs$("Expected start of the unquoted boolean literal.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",this.tokenPosition_0),this.takeStringInternal_0()},Fs.prototype.takeStringInternal_0=function(t){var e;if(void 0===t&&(t=!0),this.offset_0<0)e=Wt(this.buf_0,0,0+this.length_0|0);else{var i=this.source_0,n=this.offset_0,o=this.offset_0+this.length_0|0;e=i.substring(n,o)}var r=e;return t&&this.nextToken(),r},Fs.prototype.append_0=function(t){var e;this.length_0>=this.buf_0.length&&(this.buf_0=mt(this.buf_0,2*this.buf_0.length|0)),this.buf_0[(e=this.length_0,this.length_0=e+1|0,e)]=t},Fs.prototype.appendRange_0=function(t,e,i){var n=i-e|0,o=this.length_0,r=o+n|0;r>this.buf_0.length&&(this.buf_0=mt(this.buf_0,lt(r,2*this.buf_0.length|0)));for(var s=0;s<n;s++)this.buf_0[o+s|0]=t.charCodeAt(e+s|0);this.length_0=this.length_0+n|0},Fs.prototype.nextToken=function(){for(var t=this.source_0,e=this.currentPosition;e<t.length;){var i=Ds(t.charCodeAt(e));switch(i){case 3:e=e+1|0;break;case 0:return void this.nextLiteral_0(t,e);case 1:return void this.nextString_0(t,e);default:return this.tokenPosition_0=e,this.tokenClass=i,void(this.currentPosition=e+1|0)}}this.tokenPosition_0=e,this.tokenClass=ts},Fs.prototype.nextLiteral_0=function(t,e){this.tokenPosition_0=e,this.offset_0=e;for(var i=e;i<t.length&&Ds(t.charCodeAt(i))===Gr;)i=i+1|0;this.currentPosition=i,this.length_0=i-this.offset_0|0,this.tokenClass=function(t,e,i,n){var o=n.length;if(i!==o)return!1;for(var r=0;r<o;r++)if(t.charCodeAt(e+r|0)!==n.charCodeAt(r))return!1;return!0}(t,this.offset_0,this.length_0,jr)?Qr:Gr},Fs.prototype.nextString_0=function(t,e){this.tokenPosition_0=e,this.length_0=0;for(var i=e+1|0,n=i;t.charCodeAt(i)!==Fr;)if(t.charCodeAt(i)===Br){this.appendRange_0(t,n,i);var o=this.appendEsc_0(t,i+1|0);i=o,n=o}else(i=i+1|0)>=t.length&&this.fail_bm4lxs$("EOF",i);n===(e+1|0)?(this.offset_0=n,this.length_0=i-n|0):(this.appendRange_0(t,n,i),this.offset_0=-1),this.currentPosition=i+1|0,this.tokenClass=Hr},Fs.prototype.appendEsc_0=function(t,e){var i,n=e,o=n;n<t.length||this.fail_bm4lxs$("Unexpected EOF after escape character",o);var r=t.charCodeAt((n=(i=n)+1|0,i));if(r===Vr)return this.appendHex_0(t,n);var s=qs(0|r),a=n;return s!==Ur||this.fail_bm4lxs$("Invalid escaped char '"+String.fromCharCode(r)+"'",a),this.append_0(s),n},Fs.prototype.appendHex_0=function(t,e){var i,n,o,r,s=e;return this.append_0(Ht((this.fromHexChar_0(t,(s=(i=s)+1|0,i))<<12)+(this.fromHexChar_0(t,(s=(n=s)+1|0,n))<<8)+(this.fromHexChar_0(t,(s=(o=s)+1|0,o))<<4)+this.fromHexChar_0(t,(s=(r=s)+1|0,r))|0)),s},Fs.prototype.skipElement=function(){if(this.tokenClass===Xr||this.tokenClass===Zr){var t=b();do{switch(this.tokenClass){case 8:case 6:t.add_11rb$(this.tokenClass);break;case 9:if(qt(t)!==Zr)throw ys(this.currentPosition,"found ] instead of }",this.source_0);t.removeAt_za3lpa$(t.size-1|0);break;case 7:if(qt(t)!==Xr)throw ys(this.currentPosition,"found } instead of ]",this.source_0);t.removeAt_za3lpa$(t.size-1|0)}var e;this.nextToken(),e=!t.isEmpty()}while(e)}else this.nextToken()},Fs.prototype.toString=function(){return"JsonReader(source='"+this.source_0+"', currentPosition="+this.currentPosition+", tokenClass="+this.tokenClass+", tokenPosition="+this.tokenPosition_0+", offset="+this.offset_0+")"},Fs.prototype.fail_bm4lxs$=function(t,e){throw void 0===e&&(e=this.currentPosition),ys(e,t,this.source_0)},Fs.prototype.require_wqn2ds$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.json.internal.JsonReader.require_wqn2ds$",(function(t,e,i){void 0===e&&(e=this.currentPosition),t||this.fail_bm4lxs$(i(),e)})),Fs.prototype.fromHexChar_0=function(t,e){e<t.length||this.fail_bm4lxs$("Unexpected EOF during unicode escape",e);var i=t.charCodeAt(e);return new ot(48,57).contains_mef7kx$(i)?(0|i)-48|0:new ot(97,102).contains_mef7kx$(i)?(0|i)-97+10|0:new ot(65,70).contains_mef7kx$(i)?(0|i)-65+10|0:this.fail_bm4lxs$("Invalid toHexChar char '"+String.fromCharCode(i)+"' in unicode escape")},Fs.$metadata$={kind:n,simpleName:"JsonReader",interfaces:[]},Gs.prototype.contextual_cfhkba$=function(t,e){},Gs.prototype.polymorphic_kfyidi$=function(t,e,i){var n=i.descriptor;this.checkKind_0(n,e),this.useArrayPolymorphism_0||this.checkDiscriminatorCollisions_0(n,e)},Gs.prototype.checkKind_0=function(t,i){var n=t.kind;if(e.isType(n,pn)||h(n,bi()))throw O("Serializer for "+f(i.simpleName)+" can't be registered as a subclass for polymorphic serialization because its kind "+n+" is not concrete. To work with multiple hierarchies, register it as a base class.");if(!this.useArrayPolymorphism_0&&(h(n,nn())||h(n,sn())||e.isType(n,xi)||e.isType(n,mi)))throw O("Serializer for "+f(i.simpleName)+" of kind "+n+" cannot be serialized polymorphically with class discriminator.")},Gs.prototype.checkDiscriminatorCollisions_0=function(t,e){var i;i=t.elementsCount;for(var n=0;n<i;n++){var o=t.getElementName_za3lpa$(n);if(h(o,this.discriminator_0))throw O("Polymorphic serializer for "+e+" has property '"+o+"' that conflicts with JSON class discriminator. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism")}},Gs.prototype.polymorphicDefault_yd5wsm$=function(t,e){},Gs.$metadata$={kind:n,simpleName:"PolymorphismValidator",interfaces:[eu]},Object.defineProperty(Hs.prototype,"json",{get:function(){return this.json_n7tmf6$_0}}),Object.defineProperty(Hs.prototype,"serializersModule",{configurable:!0,get:function(){return this.serializersModule_5carun$_0}}),Object.defineProperty(Hs.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),Hs.prototype.decodeJsonElement=function(){return new Cs(this.json.configuration_8be2vx$,this.reader_8be2vx$).read()},Hs.prototype.decodeSerializableValue_w63s0f$=function(t){return Vs(this,t)},Hs.prototype.beginStructure_24f42q$=function(t){var e,i=ga(this.json,t);if(_t(i.begin)!==Ur){var n=this.reader_8be2vx$;n.tokenClass!==i.beginTc&&(R(Ht(n.tokenClass)),n.fail_bm4lxs$("Expected '"+String.fromCharCode(_t(i.begin))+", kind: "+t.kind+"'",n.tokenPosition_0)),this.reader_8be2vx$.nextToken()}switch(i.name){case"LIST":case"MAP":case"POLY_OBJ":e=new Hs(this.json,i,this.reader_8be2vx$);break;default:e=this.mode_0===i?this:new Hs(this.json,i,this.reader_8be2vx$)}return e},Hs.prototype.endStructure_24f42q$=function(t){if(_t(this.mode_0.end)!==Ur){var e=this.reader_8be2vx$;e.tokenClass!==this.mode_0.endTc&&(R(Ht(e.tokenClass)),e.fail_bm4lxs$("Expected '"+String.fromCharCode(_t(this.mode_0.end))+"'",e.tokenPosition_0)),this.reader_8be2vx$.nextToken()}},Hs.prototype.decodeNotNullMark=function(){return this.reader_8be2vx$.tokenClass!==Qr},Hs.prototype.decodeNull=function(){var t=this.reader_8be2vx$;return t.tokenClass!==Qr&&(R(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected 'null' literal",t.tokenPosition_0)),this.reader_8be2vx$.nextToken(),null},Hs.prototype.decodeElementIndex_24f42q$=function(t){var e,i=this.reader_8be2vx$.tokenClass;if(i===Wr){var n=this.reader_8be2vx$,o=-1!==this.currentIndex_0,r=this.reader_8be2vx$.currentPosition;o||n.fail_bm4lxs$("Unexpected leading comma",r),this.reader_8be2vx$.nextToken()}switch(this.mode_0.name){case"LIST":e=this.decodeListIndex_0(i);break;case"MAP":e=this.decodeMapIndex_0(i);break;case"POLY_OBJ":switch(this.currentIndex_0=this.currentIndex_0+1|0,this.currentIndex_0){case 0:e=0;break;case 1:e=1;break;default:e=-1}break;default:e=this.decodeObjectIndex_0(i,t)}return e},Hs.prototype.decodeMapIndex_0=function(t){var e;if(t!==Wr&&this.currentIndex_0%2==1){var i=this.reader_8be2vx$;i.tokenClass!==Yr&&(R(Ht(i.tokenClass)),i.fail_bm4lxs$("Expected end of the object or comma",i.tokenPosition_0))}if(this.currentIndex_0%2==0){var n=this.reader_8be2vx$;n.tokenClass!==Kr&&(R(Ht(n.tokenClass)),n.fail_bm4lxs$("Expected ':' after the key",n.tokenPosition_0)),this.reader_8be2vx$.nextToken()}if(this.reader_8be2vx$.canBeginValue)this.currentIndex_0=this.currentIndex_0+1|0,e=this.currentIndex_0;else{var o,r=this.reader_8be2vx$,s=t!==Wr;o=r.currentPosition,s||r.fail_bm4lxs$("Unexpected trailing comma",o),e=-1}return e},Hs.prototype.coerceInputValue_0=function(t,e){var i,n=t.getElementDescriptor_za3lpa$(e);if(this.reader_8be2vx$.tokenClass===Qr&&!n.isNullable)return!0;if(h(n.kind,yi())){if(null==(i=this.reader_8be2vx$.peekString_6taknv$(this.configuration_0.isLenient)))return!1;var o=i;if(-3===n.getElementIndex_61zpoe$(o))return!0}return!1},Hs.prototype.decodeObjectIndex_0=function(t,e){var i;for(t!==Wr||this.reader_8be2vx$.canBeginValue||this.reader_8be2vx$.fail_bm4lxs$("Unexpected trailing comma");this.reader_8be2vx$.canBeginValue;){this.currentIndex_0=this.currentIndex_0+1|0;var n=this.decodeString(),o=this.reader_8be2vx$;o.tokenClass!==Kr&&(R(Ht(o.tokenClass)),o.fail_bm4lxs$("Expected ':'",o.tokenPosition_0)),this.reader_8be2vx$.nextToken();var r=e.getElementIndex_61zpoe$(n);if(-3!==r){if(!this.configuration_0.coerceInputValues||!this.coerceInputValue_0(e,r))return r;i=!1}else i=!0;if(i&&!this.configuration_0.ignoreUnknownKeys?this.reader_8be2vx$.fail_bm4lxs$("Encountered an unknown key '"+n+"'.\n"+Or):this.reader_8be2vx$.skipElement(),this.reader_8be2vx$.tokenClass===Wr){this.reader_8be2vx$.nextToken();var s=this.reader_8be2vx$,a=this.reader_8be2vx$.canBeginValue,l=this.reader_8be2vx$.currentPosition;a||s.fail_bm4lxs$("Unexpected trailing comma",l)}}return-1},Hs.prototype.decodeListIndex_0=function(t){var e;if(t!==Wr&&-1!==this.currentIndex_0){var i=this.reader_8be2vx$;i.tokenClass!==Jr&&(R(Ht(i.tokenClass)),i.fail_bm4lxs$("Expected end of the array or comma",i.tokenPosition_0))}if(this.reader_8be2vx$.canBeginValue)this.currentIndex_0=this.currentIndex_0+1|0,e=this.currentIndex_0;else{var n,o=this.reader_8be2vx$,r=t!==Wr;n=o.currentPosition,r||o.fail_bm4lxs$("Unexpected trailing comma",n),e=-1}return e},Hs.prototype.decodeBoolean=function(){return this.configuration_0.isLenient?Js(this.reader_8be2vx$.takeString()):Js(this.reader_8be2vx$.takeBooleanStringUnquoted())},Hs.prototype.decodeByte=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Kt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'byte'")}return t},Hs.prototype.decodeShort=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Xt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'short'")}return t},Hs.prototype.decodeInt=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Yt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'int'")}return t},Hs.prototype.decodeLong=function(){var t,i=this.reader_8be2vx$.takeString();try{t=u(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'long'")}return t},Hs.prototype.decodeFloat=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Jt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'float'")}var n=t;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Zt(n))return n;xs(this.reader_8be2vx$,n)},Hs.prototype.decodeDouble=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Jt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'double'")}var n=t;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Qt(n))return n;xs(this.reader_8be2vx$,n)},Hs.prototype.decodeChar=function(){var t,i=this.reader_8be2vx$.takeString();try{t=R(te(i))}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'char'")}return t},Hs.prototype.decodeString=function(){return this.configuration_0.isLenient?this.reader_8be2vx$.takeString():this.reader_8be2vx$.takeStringQuoted()},Hs.prototype.parse_0=function(t,i,n){try{return n(t)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse '"+i+"'")}},Hs.prototype.decodeEnum_24f42q$=function(t){return _o(t,this.decodeString())},Hs.$metadata$={kind:n,simpleName:"StreamingJsonDecoder",interfaces:[mn,Ta]},Object.defineProperty(Ws.prototype,"json",{get:function(){return this.json_8uu1uy$_0}}),Object.defineProperty(Ws.prototype,"serializersModule",{configurable:!0,get:function(){return this.serializersModule_tvtxsn$_0}}),Ws.prototype.encodeJsonElement_qiw0cd$=function(t){this.encodeSerializableValue_tf03ej$(vl(),t)},Ws.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return this.configuration_0.encodeDefaults},Ws.prototype.encodeSerializableValue_tf03ej$=function(t,i){t:do{var n,o;if(!e.isType(t,Mn)||this.json.configuration_8be2vx$.useArrayPolymorphism){t.serialize_55azsf$(this,i);break t}var s=Bs(this,e.isType(o=t,Gl)?o:r(),e.isType(n=i,L)?n:r());this.writePolymorphic_0=!0,s.serialize_55azsf$(this,i)}while(0)},Ws.prototype.encodeTypeInfo_0=function(t){this.composer_0.nextItem(),this.encodeString_61zpoe$(this.configuration_0.classDiscriminator),this.composer_0.print_s8itvh$(Ir),this.composer_0.space(),this.encodeString_61zpoe$(t.serialName)},Ws.prototype.beginStructure_24f42q$=function(t){var e,i=ga(this.json,t);return _t(i.begin)!==Ur&&(this.composer_0.print_s8itvh$(_t(i.begin)),this.composer_0.indent()),this.writePolymorphic_0&&(this.writePolymorphic_0=!1,this.encodeTypeInfo_0(t)),this.mode_0===i?this:null!=(e=this.modeReuseCache_0[i.ordinal])?e:new Ws(this.composer_0,this.json,i,this.modeReuseCache_0)},Ws.prototype.endStructure_24f42q$=function(t){_t(this.mode_0.end)!==Ur&&(this.composer_0.unIndent(),this.composer_0.nextItem(),this.composer_0.print_s8itvh$(_t(this.mode_0.end)))},Ws.prototype.encodeElement_szpzho$=function(t,e){var i;switch(this.mode_0.name){case"LIST":this.composer_0.writingFirst||this.composer_0.print_s8itvh$(Ar),this.composer_0.nextItem();break;case"MAP":this.composer_0.writingFirst?(this.forceQuoting_0=!0,this.composer_0.nextItem()):(e%2==0?(this.composer_0.print_s8itvh$(Ar),this.composer_0.nextItem(),i=!0):(this.composer_0.print_s8itvh$(Ir),this.composer_0.space(),i=!1),this.forceQuoting_0=i);break;case"POLY_OBJ":0===e&&(this.forceQuoting_0=!0),1===e&&(this.composer_0.print_s8itvh$(Ar),this.composer_0.space(),this.forceQuoting_0=!1);break;default:this.composer_0.writingFirst||this.composer_0.print_s8itvh$(Ar),this.composer_0.nextItem(),this.encodeString_61zpoe$(t.getElementName_za3lpa$(e)),this.composer_0.print_s8itvh$(Ir),this.composer_0.space()}return!0},Ws.prototype.encodeNull=function(){this.composer_0.print_61zpoe$(jr)},Ws.prototype.encodeBoolean_6taknv$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_6taknv$(t)},Ws.prototype.encodeByte_s8j3t7$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_s8j3t7$(t)},Ws.prototype.encodeShort_mq22fl$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_mq22fl$(t)},Ws.prototype.encodeInt_za3lpa$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_za3lpa$(t)},Ws.prototype.encodeLong_s8cxhz$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_s8cxhz$(t)},Ws.prototype.encodeFloat_mx4ult$=function(t){if(this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_mx4ult$(t),!this.configuration_0.allowSpecialFloatingPointValues&&!Zt(t))throw vs(t,this.composer_0.sb_8be2vx$.toString())},Ws.prototype.encodeDouble_14dthe$=function(t){if(this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_14dthe$(t),!this.configuration_0.allowSpecialFloatingPointValues&&!Qt(t))throw vs(t,this.composer_0.sb_8be2vx$.toString())},Ws.prototype.encodeChar_s8itvh$=function(t){this.encodeString_61zpoe$(String.fromCharCode(t))},Ws.prototype.encodeString_61zpoe$=function(t){this.composer_0.printQuoted_61zpoe$(t)},Ws.prototype.encodeEnum_szpzho$=function(t,e){this.encodeString_61zpoe$(t.getElementName_za3lpa$(e))},Object.defineProperty(Ks.prototype,"writingFirst",{configurable:!0,get:function(){return this.writingFirst_4lagic$_0},set:function(t){this.writingFirst_4lagic$_0=t}}),Ks.prototype.indent=function(){this.writingFirst=!0,this.level_0=this.level_0+1|0},Ks.prototype.unIndent=function(){this.level_0=this.level_0-1|0},Ks.prototype.nextItem=function(){if(this.writingFirst=!1,this.json_0.configuration_8be2vx$.prettyPrint){this.print_61zpoe$("\n");for(var t=this.level_0,e=0;e<t;e++)this.print_61zpoe$(this.json_0.configuration_8be2vx$.prettyPrintIndent)}},Ks.prototype.space=function(){this.json_0.configuration_8be2vx$.prettyPrint&&this.print_s8itvh$(32)},Ks.prototype.print_s8itvh$=function(t){return this.sb_8be2vx$.append_s8itvh$(t)},Ks.prototype.print_61zpoe$=function(t){return this.sb_8be2vx$.append_pdl1vj$(t)},Ks.prototype.print_mx4ult$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_14dthe$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_s8j3t7$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_mq22fl$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_za3lpa$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_s8cxhz$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Ks.prototype.print_6taknv$=function(t){return this.sb_8be2vx$.append_6taknv$(t)},Ks.prototype.printQuoted_61zpoe$=function(t){Zs(this.sb_8be2vx$,t)},Ks.$metadata$={kind:n,simpleName:"Composer",interfaces:[]},Ws.$metadata$={kind:n,simpleName:"StreamingJsonEncoder",interfaces:[$n,Ul]},Object.defineProperty(ia.prototype,"json",{get:function(){return this.json_nf7dq8$_0}}),Object.defineProperty(ia.prototype,"value",{get:function(){return this.value_admuh1$_0}}),Object.defineProperty(ia.prototype,"serializersModule",{configurable:!0,get:function(){return this.json.serializersModule}}),Object.defineProperty(ia.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),ia.prototype.currentObject_0=function(){var t,e;return null!=(e=null!=(t=this.currentTagOrNull)?this.currentElement_61zpoe$(t):null)?e:this.value},ia.prototype.decodeJsonElement=function(){return this.currentObject_0()},ia.prototype.decodeSerializableValue_w63s0f$=function(t){return Vs(this,t)},ia.prototype.composeName_puj7f4$=function(t,e){return e},ia.prototype.beginStructure_24f42q$=function(t){var n,o,r=this.currentObject_0();if(n=t.kind,h(n,nn())||e.isType(n,pn)){var s=this.json;if(!e.isType(r,Za))throw new ms(-1,"Expected "+i(Za)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(r));o=new sa(s,r)}else if(h(n,sn())){var a,l=this.json,u=t.getElementDescriptor_za3lpa$(0),p=u.kind;if(e.isType(p,xi)||h(p,_i.ENUM)){var c=this.json;if(!e.isType(r,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(r));a=new ra(c,r)}else{if(!l.configuration_8be2vx$.allowStructuredMapKeys)throw ks(u);var d=this.json;if(!e.isType(r,Za))throw new ms(-1,"Expected "+i(Za)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(r));a=new sa(d,r)}o=a}else{var f=this.json;if(!e.isType(r,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(r));o=new oa(f,r)}return o},ia.prototype.endStructure_24f42q$=function(t){},ia.prototype.getValue_61zpoe$=function(t){var i,n,o=this.currentElement_61zpoe$(t);if(null==(n=e.isType(i=o,Aa)?i:null))throw ys(-1,"Expected JsonPrimitive at "+t+", found "+o,this.currentObject_0().toString());return n},ia.prototype.decodeTaggedEnum_gaombr$=function(t,e){return _o(e,this.getValue_61zpoe$(t).content)},ia.prototype.decodeTaggedNull_11rb$=function(t){return null},ia.prototype.decodeTaggedNotNullMark_11rb$=function(t){return this.currentElement_61zpoe$(t)!==Ga()},ia.prototype.decodeTaggedBoolean_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);if(!this.json.configuration_8be2vx$.isLenient&&(e.isType(i=n,Ba)?i:r()).isString)throw ys(-1,"Boolean literal for key '"+t+"' should be unquoted.\n"+Tr,this.currentObject_0().toString());return ll(n)},ia.prototype.decodeTaggedByte_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=nt(il(n))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'byte'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedShort_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=ne(il(n))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'short'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedInt_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=il(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'int'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedLong_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=nl(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'long'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedFloat_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=al(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'float'",this.currentObject_0().toString()):t}var o=i;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Zt(o))return o;throw bs(o,t,this.currentObject_0().toString())},ia.prototype.decodeTaggedDouble_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=rl(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'double'",this.currentObject_0().toString()):t}var o=i;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Qt(o))return o;throw bs(o,t,this.currentObject_0().toString())},ia.prototype.decodeTaggedChar_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=R(te(n.content))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'char'",this.currentObject_0().toString()):t}return i},ia.prototype.primitive_0=function(t,i,n){try{return n(t)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse '"+i+"'",this.currentObject_0().toString()):t}},ia.prototype.decodeTaggedString_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);if(!this.json.configuration_8be2vx$.isLenient&&!(e.isType(i=n,Ba)?i:r()).isString)throw ys(-1,"String literal for key '"+t+"' should be quoted.\n"+Tr,this.currentObject_0().toString());return n.content},ia.$metadata$={kind:n,simpleName:"AbstractJsonTreeDecoder",interfaces:[Ta,ls]},Object.defineProperty(na.prototype,"value",{get:function(){return this.value_icegni$_0}}),na.prototype.decodeElementIndex_24f42q$=function(t){return 0},na.prototype.currentElement_61zpoe$=function(t){if(t!==Ts)throw O("This input can only handle primitives with 'primitive' tag".toString());return this.value},na.$metadata$={kind:n,simpleName:"JsonPrimitiveDecoder",interfaces:[ia]},Object.defineProperty(oa.prototype,"value",{get:function(){return this.value_nyd9q1$_0}}),oa.prototype.coerceInputValue_0=function(t,i,n){var o,r,s,a=t.getElementDescriptor_za3lpa$(i);if(e.isType(this.currentElement_61zpoe$(n),Ua)&&!a.isNullable)return!0;if(h(a.kind,yi())){if(null==(s=null!=(r=e.isType(o=this.currentElement_61zpoe$(n),Aa)?o:null)?pl(r):null))return!1;var l=s;if(-3===a.getElementIndex_61zpoe$(l))return!0}return!1},oa.prototype.decodeElementIndex_24f42q$=function(t){for(var i;this.position_0<t.elementsCount;){var n,o=this.getTag_av9bu7$(t,(i=this.position_0,this.position_0=i+1|0,i)),s=this.value;if((e.isType(n=s,re)?n:r()).containsKey_11rb$(o)&&(!this.configuration_0.coerceInputValues||!this.coerceInputValue_0(t,this.position_0-1|0,o)))return this.position_0-1|0}return-1},oa.prototype.currentElement_61zpoe$=function(t){return q(this.value,t)},oa.prototype.beginStructure_24f42q$=function(t){return t===this.polyDescriptor_0?this:ia.prototype.beginStructure_24f42q$.call(this,t)},oa.prototype.endStructure_24f42q$=function(t){var i;if(!this.configuration_0.ignoreUnknownKeys&&!e.isType(t.kind,pn)){var n=lo(t);for(i=this.value.keys.iterator();i.hasNext();){var o=i.next();if(!n.contains_11rb$(o)&&!h(o,this.polyDiscriminator_0))throw zs(o,this.value.toString())}}},oa.$metadata$={kind:n,simpleName:"JsonTreeDecoder",interfaces:[ia]},Object.defineProperty(ra.prototype,"value",{get:function(){return this.value_ozc1lj$_0}}),ra.prototype.elementName_szpzho$=function(t,e){var i=e/2|0;return this.keys_0.get_za3lpa$(i)},ra.prototype.decodeElementIndex_24f42q$=function(t){for(;this.position_1<(this.size_0-1|0);)return this.position_1=this.position_1+1|0,this.position_1;return-1},ra.prototype.currentElement_61zpoe$=function(t){return this.position_1%2==0?Fa(t):q(this.value,t)},ra.prototype.endStructure_24f42q$=function(t){},ra.$metadata$={kind:n,simpleName:"JsonTreeMapDecoder",interfaces:[oa]},Object.defineProperty(sa.prototype,"value",{get:function(){return this.value_z81zg7$_0}}),sa.prototype.elementName_szpzho$=function(t,e){return e.toString()},sa.prototype.currentElement_61zpoe$=function(t){return this.value.get_za3lpa$(Yt(t))},sa.prototype.decodeElementIndex_24f42q$=function(t){for(;this.currentIndex_0<(this.size_0-1|0);)return this.currentIndex_0=this.currentIndex_0+1|0,this.currentIndex_0;return-1},sa.$metadata$={kind:n,simpleName:"JsonTreeListDecoder",interfaces:[ia]},Object.defineProperty(la.prototype,"json",{get:function(){return this.json_927t60$_0}}),Object.defineProperty(la.prototype,"serializersModule",{configurable:!0,get:function(){return this.json.serializersModule}}),la.prototype.encodeJsonElement_qiw0cd$=function(t){this.encodeSerializableValue_tf03ej$(vl(),t)},la.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return this.configuration_0.encodeDefaults},la.prototype.composeName_puj7f4$=function(t,e){return e},la.prototype.encodeTaggedNull_11rb$=function(t){this.putElement_zafu29$(t,Ga())},la.prototype.encodeTaggedInt_dpg1yx$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedByte_19qe40$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedShort_veccj0$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedLong_19wkf8$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedFloat_vlf4p8$=function(t,e){if(this.putElement_zafu29$(t,qa(e)),!this.configuration_0.allowSpecialFloatingPointValues&&!Zt(e))throw gs(e,t,this.getCurrent().toString())},la.prototype.encodeSerializableValue_tf03ej$=function(t,i){if(null!=this.currentTagOrNull||!e.isType(t.descriptor.kind,xi)&&t.descriptor.kind!==yi())t:do{var n,o;if(!e.isType(t,Mn)||this.json.configuration_8be2vx$.useArrayPolymorphism){t.serialize_55azsf$(this,i);break t}var s=Bs(this,e.isType(o=t,Gl)?o:r(),e.isType(n=i,L)?n:r());this.writePolymorphic_0=!0,s.serialize_55azsf$(this,i)}while(0);else{var a=new ua(this.json,this.nodeConsumer);a.encodeSerializableValue_tf03ej$(t,i),a.endEncode_24f42q$(t.descriptor)}},la.prototype.encodeTaggedDouble_e37ph5$=function(t,e){if(this.putElement_zafu29$(t,qa(e)),!this.configuration_0.allowSpecialFloatingPointValues&&!Qt(e))throw gs(e,t,this.getCurrent().toString())},la.prototype.encodeTaggedBoolean_iuyhfk$=function(t,e){this.putElement_zafu29$(t,Da(e))},la.prototype.encodeTaggedChar_19qo1q$=function(t,e){this.putElement_zafu29$(t,Fa(String.fromCharCode(e)))},la.prototype.encodeTaggedString_l9l8mx$=function(t,e){this.putElement_zafu29$(t,Fa(e))},la.prototype.encodeTaggedEnum_4xdzqf$=function(t,e,i){this.putElement_zafu29$(t,Fa(e.getElementName_za3lpa$(i)))},la.prototype.encodeTaggedValue_dpg7wc$=function(t,e){this.putElement_zafu29$(t,Fa(e.toString()))},la.prototype.beginStructure_24f42q$=function(t){var i,n,o,r=null==this.currentTagOrNull?this.nodeConsumer:(o=this,function(t){return o.putElement_zafu29$(o.currentTag,t),l});if(i=t.kind,h(i,nn())||e.isType(i,pn))n=new ha(this.json,r);else if(h(i,sn())){var s,a=this.json,u=t.getElementDescriptor_za3lpa$(0),p=u.kind;if(e.isType(p,xi)||h(p,_i.ENUM))s=new ca(this.json,r);else{if(!a.configuration_8be2vx$.allowStructuredMapKeys)throw ks(u);s=new ha(this.json,r)}n=s}else n=new pa(this.json,r);var c=n;return this.writePolymorphic_0&&(this.writePolymorphic_0=!1,c.putElement_zafu29$(this.configuration_0.classDiscriminator,Fa(t.serialName))),c},la.prototype.endEncode_24f42q$=function(t){this.nodeConsumer(this.getCurrent())},la.$metadata$={kind:n,simpleName:"AbstractJsonTreeEncoder",interfaces:[Ul,ss]},ua.prototype.putElement_zafu29$=function(t,e){if(t!==Ts)throw O("This output can only consume primitives with 'primitive' tag".toString());if(null!=this.content_0)throw O("Primitive element was already recorded. Does call to .encodeXxx happen more than once?".toString());this.content_0=e},ua.prototype.getCurrent=function(){var t=this.content_0;if(null==t)throw O("Primitive element has not been recorded. Is call to .encodeXxx is missing in serializer?".toString());return t},ua.$metadata$={kind:n,simpleName:"JsonPrimitiveEncoder",interfaces:[la]},pa.prototype.putElement_zafu29$=function(t,e){this.content_0.put_xwzc9p$(t,e)},pa.prototype.getCurrent=function(){return new Ha(this.content_0)},pa.$metadata$={kind:n,simpleName:"JsonTreeEncoder",interfaces:[la]},Object.defineProperty(ca.prototype,"tag_0",{configurable:!0,get:function(){return null==this.tag_s622uw$_0?se("tag"):this.tag_s622uw$_0},set:function(t){this.tag_s622uw$_0=t}}),ca.prototype.putElement_zafu29$=function(t,i){var n;if(this.isKey_0){if(e.isType(i,Aa))n=i.content;else{if(e.isType(i,Ha))throw ks(Pl().descriptor);if(e.isType(i,Za))throw ks(Ll().descriptor);n=e.noWhenBranchMatched()}this.tag_0=n,this.isKey_0=!1}else{var o=this.content_0,r=this.tag_0;o.put_xwzc9p$(r,i),this.isKey_0=!0}},ca.prototype.getCurrent=function(){return new Ha(this.content_0)},ca.$metadata$={kind:n,simpleName:"JsonTreeMapEncoder",interfaces:[pa]},ha.prototype.elementName_szpzho$=function(t,e){return e.toString()},ha.prototype.putElement_zafu29$=function(t,e){var i=Yt(t);this.array_0.add_wxm5ur$(i,e)},ha.prototype.getCurrent=function(){return new Za(this.array_0)},ha.$metadata$={kind:n,simpleName:"JsonTreeListEncoder",interfaces:[la]},da.$metadata$={kind:n,simpleName:"WriteMode",interfaces:[ae]},da.values=va,da.valueOf_61zpoe$=function(t){switch(t){case"OBJ":return _a();case"LIST":return ma();case"MAP":return $a();case"POLY_OBJ":return ya();default:le("No enum constant kotlinx.serialization.json.internal.WriteMode."+t)}},Object.defineProperty(ba.prototype,"serializersModule",{configurable:!0,get:function(){return this.configuration_8be2vx$.serializersModule}}),xa.$metadata$={kind:p,simpleName:"Default",interfaces:[ba]};var wa,za,ka=null;function Sa(){return null===ka&&new xa,ka}function Ca(t){this.encodeDefaults=t.encodeDefaults,this.ignoreUnknownKeys=t.ignoreUnknownKeys,this.isLenient=t.isLenient,this.allowStructuredMapKeys=t.allowStructuredMapKeys,this.prettyPrint=t.prettyPrint,this.prettyPrintIndent=t.prettyPrintIndent,this.coerceInputValues=t.coerceInputValues,this.useArrayPolymorphism=t.useArrayPolymorphism,this.classDiscriminator=t.classDiscriminator,this.allowSpecialFloatingPointValues=t.allowSpecialFloatingPointValues,this.serializersModule=t.serializersModule,this.serializeSpecialFloatingPointValues=!1,this.indent="    ",this.strictMode=!0,this.unquoted=!1,this.unquotedPrint=!1,this.serialModule=Il}function Na(t){ba.call(this,t),this.validateConfiguration_0()}function Ea(t){this.baseClass_saxo55$_0=t,this.descriptor_fdk25h$_0=ci("JsonContentPolymorphicSerializer<"+f(this.baseClass_saxo55$_0.simpleName)+">",dn(),[])}function Ta(){}function Pa(){ja()}function Oa(){Ma=this}ba.prototype.encodeToString_tf03ej$=function(t,i){var n=ue();return Xs(n,this,_a(),e.newArray(va().length,null)).encodeSerializableValue_tf03ej$(t,i),n.toString()},ba.prototype.decodeFromString_awif5v$=function(t,e){var i=new Fs(e),n=new Hs(this,_a(),i).decodeSerializableValue_w63s0f$(t);if(!i.isDone)throw I(("Reader has not consumed the whole input: "+i).toString());return n},ba.prototype.encodeToJsonElement_tf03ej$=function(t,e){return aa(this,e,t)},ba.prototype.decodeFromJsonElement_htt2tq$=function(t,e){return ta(this,e,t)},ba.prototype.parseToJsonElement_61zpoe$=function(t){return this.decodeFromString_awif5v$(vl(),t)},ba.$metadata$={kind:n,simpleName:"Json",interfaces:[lu]},Ca.prototype.build_8be2vx$=function(){if(this.useArrayPolymorphism&&!h(this.classDiscriminator,za))throw O("Class discriminator should not be specified when array polymorphism is specified".toString());if(this.prettyPrint){if(!h(this.prettyPrintIndent,wa)){var t,e=this.prettyPrintIndent;t:do{var i;for(i=ie(e);i.hasNext();){var n=_t(i.next()),o=R(n);if(32!==_t(o)&&9!==_t(o)&&13!==_t(o)&&10!==_t(o)){t=!1;break t}}t=!0}while(0);if(!t){var r="Only whitespace, tab, newline and carriage return are allowed as pretty print symbols. Had "+this.prettyPrintIndent;throw O(r.toString())}}}else if(!h(this.prettyPrintIndent,wa))throw O("Indent should not be specified when default printing mode is used".toString());return new fs(this.encodeDefaults,this.ignoreUnknownKeys,this.isLenient,this.allowStructuredMapKeys,this.prettyPrint,this.prettyPrintIndent,this.coerceInputValues,this.useArrayPolymorphism,this.classDiscriminator,this.allowSpecialFloatingPointValues,this.serializersModule)},Ca.prototype.buildConfiguration=function(){throw I("Deprecated and should not be called".toString())},Ca.prototype.buildModule=function(){throw I("Deprecated and should not be called".toString())},Ca.$metadata$={kind:n,simpleName:"JsonBuilder",interfaces:[]},Na.prototype.validateConfiguration_0=function(){if(!h(this.serializersModule,Il)){var t=new Gs(this.configuration_8be2vx$.useArrayPolymorphism,this.configuration_8be2vx$.classDiscriminator);this.serializersModule.dumpTo_ukvgvw$(t)}},Na.$metadata$={kind:n,simpleName:"JsonImpl",interfaces:[ba]},Object.defineProperty(Ta.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),Ta.$metadata$={kind:$,simpleName:"JsonDecoder",interfaces:[vn,yn]},Oa.prototype.serializer=function(){return vl()},Oa.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ma=null;function ja(){return null===Ma&&new Oa,Ma}function Aa(){La(),Pa.call(this)}function Ia(){Ra=this}Pa.$metadata$={kind:n,simpleName:"JsonElement",interfaces:[]},Aa.prototype.toString=function(){return this.content},Ia.prototype.serializer=function(){return xl()},Ia.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ra=null;function La(){return null===Ra&&new Ia,Ra}function Da(t){return null==t?Ga():new Ba(t,!1)}function qa(t){return null==t?Ga():new Ba(t,!1)}function Fa(t){return null==t?Ga():new Ba(t,!0)}function Ba(t,e){Aa.call(this),this.isString_jhh1on$_0=e,this.content_prrjtz$_0=t.toString()}function Ua(){Va=this,Aa.call(this),this.content_w1vkof$_0="null"}Aa.$metadata$={kind:n,simpleName:"JsonPrimitive",interfaces:[Pa]},Object.defineProperty(Ba.prototype,"isString",{get:function(){return this.isString_jhh1on$_0}}),Object.defineProperty(Ba.prototype,"content",{configurable:!0,get:function(){return this.content_prrjtz$_0}}),Ba.prototype.toString=function(){var t;if(this.isString){var e=ue();Zs(e,this.content),t=e.toString()}else t=this.content;return t},Ba.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,Ba)||r(),this.isString===t.isString&&!!h(this.content,t.content))},Ba.prototype.hashCode=function(){var t=d(this.isString);return t=(31*t|0)+d(this.content)|0},Ba.$metadata$={kind:n,simpleName:"JsonLiteral",interfaces:[Aa]},Object.defineProperty(Ua.prototype,"isString",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Ua.prototype,"content",{configurable:!0,get:function(){return this.content_w1vkof$_0}}),Ua.$metadata$={kind:p,simpleName:"JsonNull",interfaces:[Aa]};var Va=null;function Ga(){return null===Va&&new Ua,Va}function Ha(t){Ya(),Pa.call(this),this.content_0=t}function Wa(t){return'"'+t.key+'":'+t.value}function Ka(){Xa=this}Ha.prototype.equals=function(t){return h(this.content_0,t)},Ha.prototype.hashCode=function(){return d(this.content_0)},Ha.prototype.toString=function(){return k(this.content_0.entries,",","{","}",void 0,void 0,Wa)},Ka.prototype.serializer=function(){return Pl()},Ka.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Xa=null;function Ya(){return null===Xa&&new Ka,Xa}function Za(t){tl(),Pa.call(this),this.content_0=t}function Ja(){Qa=this}Object.defineProperty(Ha.prototype,"entries",{get:function(){return this.content_0.entries}}),Object.defineProperty(Ha.prototype,"keys",{get:function(){return this.content_0.keys}}),Object.defineProperty(Ha.prototype,"size",{get:function(){return this.content_0.size}}),Object.defineProperty(Ha.prototype,"values",{get:function(){return this.content_0.values}}),Ha.prototype.containsKey_11rb$=function(t){return this.content_0.containsKey_11rb$(t)},Ha.prototype.containsValue_11rc$=function(t){return this.content_0.containsValue_11rc$(t)},Ha.prototype.get_11rb$=function(t){return this.content_0.get_11rb$(t)},Ha.prototype.isEmpty=function(){return this.content_0.isEmpty()},Ha.$metadata$={kind:n,simpleName:"JsonObject",interfaces:[re,Pa]},Za.prototype.equals=function(t){return h(this.content_0,t)},Za.prototype.hashCode=function(){return d(this.content_0)},Za.prototype.toString=function(){return k(this.content_0,",","[","]")},Ja.prototype.serializer=function(){return Ll()},Ja.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Qa=null;function tl(){return null===Qa&&new Ja,Qa}function el(t){var i,n;return null!=(n=e.isType(i=t,Aa)?i:null)?n:function(t,i){throw O("Element "+e.getKClassFromExpression(t)+" is not a "+i)}(t,"JsonPrimitive")}function il(t){return Yt(t.content)}function nl(t){return u(t.content)}function ol(t){return ce(t.content)}function rl(t){return Jt(t.content)}function sl(t){return he(t.content)}function al(t){return Jt(t.content)}function ll(t){return Js(t.content)}function ul(t){return Qs(t.content)}function pl(t){return e.isType(t,Ua)?null:t.content}function cl(){yl=this,this.descriptor_u8kpse$_0=ci("kotlinx.serialization.json.JsonElement",dn(),[],$l)}function hl(){return xl().descriptor}function dl(){return kl().descriptor}function fl(){return Nl().descriptor}function _l(){return Pl().descriptor}function ml(){return Ll().descriptor}function $l(t){return t.element_vxrguq$("JsonPrimitive",co(hl)),t.element_vxrguq$("JsonNull",co(dl)),t.element_vxrguq$("JsonLiteral",co(fl)),t.element_vxrguq$("JsonObject",co(_l)),t.element_vxrguq$("JsonArray",co(ml)),l}Object.defineProperty(Za.prototype,"size",{get:function(){return this.content_0.size}}),Za.prototype.contains_11rb$=function(t){return this.content_0.contains_11rb$(t)},Za.prototype.containsAll_brywnq$=function(t){return this.content_0.containsAll_brywnq$(t)},Za.prototype.get_za3lpa$=function(t){return this.content_0.get_za3lpa$(t)},Za.prototype.indexOf_11rb$=function(t){return this.content_0.indexOf_11rb$(t)},Za.prototype.isEmpty=function(){return this.content_0.isEmpty()},Za.prototype.iterator=function(){return this.content_0.iterator()},Za.prototype.lastIndexOf_11rb$=function(t){return this.content_0.lastIndexOf_11rb$(t)},Za.prototype.listIterator=function(){return this.content_0.listIterator()},Za.prototype.listIterator_za3lpa$=function(t){return this.content_0.listIterator_za3lpa$(t)},Za.prototype.subList_vux9f0$=function(t,e){return this.content_0.subList_vux9f0$(t,e)},Za.$metadata$={kind:n,simpleName:"JsonArray",interfaces:[pe,Pa]},Object.defineProperty(cl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_u8kpse$_0}}),cl.prototype.serialize_55azsf$=function(t,i){Dl(t),e.isType(i,Aa)?t.encodeSerializableValue_tf03ej$(xl(),i):e.isType(i,Ha)?t.encodeSerializableValue_tf03ej$(Pl(),i):e.isType(i,Za)&&t.encodeSerializableValue_tf03ej$(Ll(),i)},cl.prototype.deserialize_bq71mq$=function(t){return Fl(t).decodeJsonElement()},cl.$metadata$={kind:p,simpleName:"JsonElementSerializer",interfaces:[Gl]};var yl=null;function vl(){return null===yl&&new cl,yl}function gl(){bl=this,this.descriptor_1d7xi5$_0=ci("kotlinx.serialization.json.JsonPrimitive",Xi(),[])}Object.defineProperty(gl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_1d7xi5$_0}}),gl.prototype.serialize_55azsf$=function(t,i){var n;return Dl(t),e.isType(i,Ua)?t.encodeSerializableValue_tf03ej$(kl(),Ga()):t.encodeSerializableValue_tf03ej$(Nl(),e.isType(n=i,Ba)?n:r())},gl.prototype.deserialize_bq71mq$=function(t){var i=Fl(t).decodeJsonElement();if(!e.isType(i,Aa))throw ys(-1,"Unexpected JSON element, expected JsonPrimitive, had "+e.getKClassFromExpression(i),i.toString());return i},gl.$metadata$={kind:p,simpleName:"JsonPrimitiveSerializer",interfaces:[Gl]};var bl=null;function xl(){return null===bl&&new gl,bl}function wl(){zl=this,this.descriptor_kuqqdr$_0=ci("kotlinx.serialization.json.JsonNull",yi(),[])}Object.defineProperty(wl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kuqqdr$_0}}),wl.prototype.serialize_55azsf$=function(t,e){Dl(t),t.encodeNull()},wl.prototype.deserialize_bq71mq$=function(t){return ql(t),t.decodeNull(),Ga()},wl.$metadata$={kind:p,simpleName:"JsonNullSerializer",interfaces:[Gl]};var zl=null;function kl(){return null===zl&&new wl,zl}function Sl(){Cl=this,this.descriptor_fnzu3f$_0=ui("kotlinx.serialization.json.JsonLiteral",Xi())}Object.defineProperty(Sl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_fnzu3f$_0}}),Sl.prototype.serialize_55azsf$=function(t,e){if(Dl(t),e.isString)return t.encodeString_61zpoe$(e.content);var i=ol(e);if(null!=i)return t.encodeLong_s8cxhz$(i);var n=sl(e);if(null!=n)return t.encodeDouble_14dthe$(n);var o=ul(e);if(null!=o)return t.encodeBoolean_6taknv$(o);t.encodeString_61zpoe$(e.content)},Sl.prototype.deserialize_bq71mq$=function(t){var i=Fl(t).decodeJsonElement();if(!e.isType(i,Ba))throw ys(-1,"Unexpected JSON element, expected JsonLiteral, had "+e.getKClassFromExpression(i),i.toString());return i},Sl.$metadata$={kind:p,simpleName:"JsonLiteralSerializer",interfaces:[Gl]};var Cl=null;function Nl(){return null===Cl&&new Sl,Cl}function El(){Tl=this,this.descriptor_a992tj$_0=new Vn("kotlinx.serialization.json.JsonObject",Je().descriptor,vl().descriptor)}Object.defineProperty(El.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_a992tj$_0}}),El.prototype.serialize_55azsf$=function(t,e){Dl(t),ei(Je(),vl()).serialize_55azsf$(t,e)},El.prototype.deserialize_bq71mq$=function(t){return ql(t),new Ha(ei(Je(),vl()).deserialize_bq71mq$(t))},El.$metadata$={kind:p,simpleName:"JsonObjectSerializer",interfaces:[Gl]};var Tl=null;function Pl(){return null===Tl&&new El,Tl}function Ol(){Rl=this,this.descriptor_935ivj$_0=new Fn("kotlinx.serialization.json.JsonArray",vl().descriptor)}Object.defineProperty(Ol.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_935ivj$_0}}),Ol.prototype.serialize_55azsf$=function(t,e){Dl(t),ti(vl()).serialize_55azsf$(t,e)},Ol.prototype.deserialize_bq71mq$=function(t){return ql(t),new Za(ti(vl()).deserialize_bq71mq$(t))},Ol.$metadata$={kind:p,simpleName:"JsonArraySerializer",interfaces:[Gl]};var Ml,jl,Al,Il,Rl=null;function Ll(){return null===Rl&&new Ol,Rl}function Dl(t){Bl(t)}function ql(t){Fl(t)}function Fl(t){var i,n;if(null==(n=e.isType(i=t,Ta)?i:null))throw I("This serializer can be used only with Json format.Expected Decoder to be JsonDecoder, got "+e.getKClassFromExpression(t));return n}function Bl(t){var i,n;if(null==(n=e.isType(i=t,Ul)?i:null))throw I("This serializer can be used only with Json format.Expected Encoder to be JsonEncoder, got "+e.getKClassFromExpression(t));return n}function Ul(){}function Vl(t){this.tSerializer_nuzucf$_0=t}function Gl(){}function Hl(){}function Wl(){}function Kl(t,e){ae.call(this),this.name$=t,this.ordinal$=e}function Xl(){Xl=function(){},Ml=new Kl("BANNED",0),jl=new Kl("OVERWRITE",1),Al=new Kl("UPDATE",2)}function Yl(){return Xl(),Ml}function Zl(){return Xl(),jl}function Jl(){return Xl(),Al}function Ql(){}function tu(t,e,i,n){Ql.call(this),this.class2Serializer_0=t,this.polyBase2Serializers=e,this.polyBase2NamedSerializers_0=i,this.polyBase2DefaultProvider_0=n}function eu(){}function iu(t,e,i){var n;return null!=(n=t.findPolymorphicSerializerOrNull_ca6uye$(e,i))?n:jn(i,t.baseClass)}function nu(t,i,n){var o;return null!=(o=t.findPolymorphicSerializerOrNull_kjsxpj$(i,n))?o:An(e.getKClassFromExpression(n),t.baseClass)}function ou(t,e){this.this$groupingBy=t,this.closure$keySelector=e}function ru(t,e,i,n){var o,r;if(Mn.call(this),this.baseClass_a0a98o$_0=e,this.descriptor_gganzq$_0=ci(t,dn(),[],(o=this,r=n,function(t){t.element_vxrguq$("type",Je().descriptor);var e=ci("kotlinx.serialization.Sealed<"+f(o.baseClass.simpleName)+">",bi(),[],function(t){return function(e){var i,n=t;for(i=0;i!==n.length;++i){var o=n[i].descriptor;e.element_vxrguq$(o.serialName,o)}return l}}(r));return t.element_vxrguq$("value",e),l})),this.class2Serializer_0=null,this.serialName2Serializer_0=null,i.length!==n.length)throw O("All subclasses of sealed class "+f(this.baseClass.simpleName)+" should be marked @Serializable");this.class2Serializer_0=E(me(i,n));var s,a=new ou(this.class2Serializer_0.entries,su),u=K();for(s=a.sourceIterator();s.hasNext();){var p=s.next(),c=a.keyOf_11rb$(p),h=u.get_11rb$(c),d=u.put_xwzc9p$;if(null==h&&u.containsKey_11rb$(c),null!=h)throw I(("Multiple sealed subclasses of '"+this.baseClass+"' have the same serial name '"+c+"': '"+h.key+"', '"+p.key+"'").toString());d.call(u,c,p)}var _,m=ve(ye(u.size));for(_=u.entries.iterator();_.hasNext();){var $=_.next();m.put_xwzc9p$($.key,$.value.value)}this.serialName2Serializer_0=m}function su(t){return t.value.descriptor.serialName}function au(){}function lu(){}function uu(){this.name="SerializationException"}function pu(t,e){return e=e||Object.create(uu.prototype),O(t,e),uu.call(e),e}function cu(t){pu("Field '"+t+"' is required, but it was missing",this),this.name="MissingFieldException"}function hu(t){pu("An unknown field for index "+t,this),this.name="UnknownFieldException"}function du(t,i){var n,o,s,a,l,u,p=fo(i),c=i.isMarkedNullable,h=fu(t,i);return null!=h?e.isType(a=mu(h,c),Gl)?a:r():(l=null!=(o=null!=(n=t.getContextual_lmshww$(p))?mu(n,c):null)?e.isType(u=o,Gl)?u:r():null,null!=(s=l)?s:ho(fo(i)))}function fu(t,n){var o,s,a,l=fo(n),u=n.arguments,p=m(_(u,10));for(a=u.iterator();a.hasNext();){var c,d=a.next(),$=p.add_11rb$,y=d.type;if(null==y)throw O(("Star projections in type arguments are not allowed, but had "+n).toString());c=y,$.call(p,c)}var v,g=p;return null!=(s=g.isEmpty()?null!=(o=_u(l))?o:t.getContextual_lmshww$(l):function(t,n,o){var s,a,l,u=ge("serializer",function(t,e){return du(t,e)}.bind(null,t)),p=m(_(n,10));for(l=n.iterator();l.hasNext();){var c=l.next();p.add_11rb$(u(c))}var d=p;if(h(o,i(pe))||h(o,i(be))||h(o,i(U)))a=new Qn(d.get_za3lpa$(0));else if(h(o,i(H)))a=new eo(d.get_za3lpa$(0));else if(h(o,i(xe))||h(o,i(we))||h(o,i(V)))a=new to(d.get_za3lpa$(0));else if(h(o,i(J)))a=new no(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(o,i(re))||h(o,i(ze))||h(o,i(X)))a=new io(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(o,i(Ut)))a=Me(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(o,i(ke)))a=Oe(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(o,i(Vt)))a=je(d.get_za3lpa$(0),d.get_za3lpa$(1),d.get_za3lpa$(2));else{var $;if(wu(o))return e.isType($=Qe(e.isType(s=n.get_za3lpa$(0).classifier,st)?s:r(),d.get_za3lpa$(0)),Gl)?$:r();var y=xu(o,M(d).slice());if(null==y){var v="Can't find a method to construct serializer for type "+f(o.simpleName)+". Make sure this class is marked as @Serializable or provide serializer explicitly.";throw O(v.toString())}a=y}return a}(t,g,l))?e.isType(v=s,Gl)?v:r():null}function _u(t){var e;return null!=(e=vu(t))?e:tr(t)}function mu(t,i){var n;return i?Pe(t):e.isType(n=t,Gl)?n:r()}function $u(t,e){if(!et(t).contains_mef7kx$(e))throw new at("Index "+e+" out of bounds "+et(t));return t[e]}function yu(t,e){if(!Ce(t).contains_mef7kx$(e))throw new at("Index "+e+" out of bounds "+Ce(t));return t[e]}function vu(t){var i,n,o;return null!=(o=xu(t,[]))?o:e.isType(n=null!=(i=Ne(t).Companion)?i.serializer():null,Gl)?n:null}function gu(t,e){return M(t)}function bu(t,e){return e.isInstance_s8jyv4$(t)}function xu(t,n){var o,s,a;try{var l=Te(t,i(zu));a=e.isType(l,Gl)?e.isType(o=l,Gl)?o:r():e.isType(l,yo)?e.isType(s=l.serializer_lu48y9$(n.slice()),Gl)?s:r():null}catch(t){a=null}return a}function wu(t){return null!=t?t.equals(Ee):null}function zu(t){this.serializer=t}Ul.$metadata$={kind:$,simpleName:"JsonEncoder",interfaces:[On,Pn]},Gl.prototype.patch_h7kg3r$=function(t,e){throw de("Not implemented, should not be called")},Gl.$metadata$={kind:$,simpleName:"KSerializer",interfaces:[Wl,Hl]},Hl.$metadata$={kind:$,simpleName:"SerializationStrategy",interfaces:[]},Wl.$metadata$={kind:$,simpleName:"DeserializationStrategy",interfaces:[]},Kl.$metadata$={kind:n,simpleName:"UpdateMode",interfaces:[ae]},Kl.values=function(){return[Yl(),Zl(),Jl()]},Kl.valueOf_61zpoe$=function(t){switch(t){case"BANNED":return Yl();case"OVERWRITE":return Zl();case"UPDATE":return Jl();default:le("No enum constant kotlinx.serialization.UpdateMode."+t)}},Ql.$metadata$={kind:n,simpleName:"SerializersModule",interfaces:[]},tu.prototype.getPolymorphic_joiicr$=function(t,i){var n,o;return bu(i,t)&&e.isType(o=null!=(n=this.polyBase2Serializers.get_11rb$(t))?n.get_11rb$(e.getKClassFromExpression(i)):null,Hl)?o:null},tu.prototype.getPolymorphic_l2fy3k$=function(t,i){var n,o,s,a,l,u;l=null!=(n=this.polyBase2NamedSerializers_0.get_11rb$(t))?(e.isType(u=n,re)?u:r()).get_11rb$(i):null;var p=e.isType(o=l,Gl)?o:null;return null!=p?p:null!=(a="function"==typeof(s=this.polyBase2DefaultProvider_0.get_11rb$(t))?s:null)?a(i):null},tu.prototype.getContextual_lmshww$=function(t){var i;return e.isType(i=this.class2Serializer_0.get_11rb$(t),Gl)?i:null},tu.prototype.dumpTo_ukvgvw$=function(t){var i,n,o;for(i=this.class2Serializer_0.entries.iterator();i.hasNext();){var s,a,l=i.next(),u=l.key,p=l.value;t.contextual_cfhkba$(e.isType(s=u,st)?s:r(),e.isType(a=p,Gl)?a:r())}for(n=this.polyBase2Serializers.entries.iterator();n.hasNext();){var c,h=n.next(),d=h.key;for(c=h.value.entries.iterator();c.hasNext();){var f,_,m,$=c.next(),y=$.key,v=$.value;t.polymorphic_kfyidi$(e.isType(f=d,st)?f:r(),e.isType(_=y,st)?_:r(),e.isType(m=v,Gl)?m:r())}}for(o=this.polyBase2DefaultProvider_0.entries.iterator();o.hasNext();){var g,b,x=o.next(),w=x.key,z=x.value;t.polymorphicDefault_yd5wsm$(e.isType(g=w,st)?g:r(),"function"==typeof(b=z)?b:r())}},tu.$metadata$={kind:n,simpleName:"SerialModuleImpl",interfaces:[Ql]},eu.$metadata$={kind:$,simpleName:"SerializersModuleCollector",interfaces:[]},ou.prototype.sourceIterator=function(){return this.this$groupingBy.iterator()},ou.prototype.keyOf_11rb$=function(t){return this.closure$keySelector(t)},ou.$metadata$={kind:n,interfaces:[$e]},Object.defineProperty(ru.prototype,"baseClass",{get:function(){return this.baseClass_a0a98o$_0}}),Object.defineProperty(ru.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_gganzq$_0}}),ru.prototype.findPolymorphicSerializerOrNull_ca6uye$=function(t,i){var n,o,s=this.serialName2Serializer_0;return null!=(n=(e.isType(o=s,re)?o:r()).get_11rb$(i))?n:Mn.prototype.findPolymorphicSerializerOrNull_ca6uye$.call(this,t,i)},ru.prototype.findPolymorphicSerializerOrNull_kjsxpj$=function(t,i){var n,o,s;return null!=(o=null!=(n=this.class2Serializer_0.get_11rb$(e.getKClassFromExpression(i)))?n:Mn.prototype.findPolymorphicSerializerOrNull_kjsxpj$.call(this,t,i))?e.isType(s=o,Hl)?s:r():null},ru.$metadata$={kind:n,simpleName:"SealedClassSerializer",interfaces:[Mn]},au.$metadata$={kind:$,simpleName:"SerialFormat",interfaces:[]},lu.$metadata$={kind:$,simpleName:"StringFormat",interfaces:[au]},uu.$metadata$={kind:n,simpleName:"SerializationException",interfaces:[_e]},cu.$metadata$={kind:n,simpleName:"MissingFieldException",interfaces:[uu]},hu.$metadata$={kind:n,simpleName:"UnknownFieldException",interfaces:[uu]},zu.$metadata$={kind:n,simpleName:"SerializableWith",interfaces:[o]};var ku=t.kotlinx||(t.kotlinx={}),Su=ku.serialization||(ku.serialization={}),Cu=Su.builtins||(Su.builtins={});Cu.get_nullable_2418p6$=Pe,Cu.PairSerializer_2yqygg$=Oe,Cu.MapEntrySerializer_2yqygg$=Me,Cu.TripleSerializer_jww85o$=je,Cu.serializer_n24eoe$=Ae,Cu.CharArraySerializer=Ie,Cu.serializer_k5zfx8$=Re,Cu.ByteArraySerializer=Le,Cu.serializer_qetqea$=De,Cu.ShortArraySerializer=qe,Cu.serializer_qn7glr$=Fe,Cu.IntArraySerializer=Be,Cu.serializer_vbrujs$=Ue,Cu.LongArraySerializer=Ve,Cu.serializer_y9phqa$=Ge,Cu.FloatArraySerializer=He,Cu.serializer_6a53gt$=We,Cu.DoubleArraySerializer=Ke,Cu.serializer_jtjczu$=Xe,Cu.BooleanArraySerializer=Ye,Cu.serializer_mours2$=Ze,Cu.serializer_6eet4j$=Je,Cu.ArraySerializer_8tn5u0$=Qe,Cu.ListSerializer_swdriu$=ti,Cu.MapSerializer_2yqygg$=ei,Su.ContextualSerializer=ii;var Nu=Su.descriptors||(Su.descriptors={});Nu.SerialDescriptor=oi,Nu.get_elementDescriptors_583jlf$=si,Nu.buildClassSerialDescriptor_dowfwv$=li,Nu.PrimitiveSerialDescriptor_xytc2a$=ui,Nu.buildSerialDescriptor_2yu4m$=ci,Nu.listSerialDescriptor_24f42q$=hi,Nu.mapSerialDescriptor_2ezn58$=function(t,e){return new Hn(t,e)},Nu.setSerialDescriptor_24f42q$=function(t){return new Un(t)},Nu.ClassSerialDescriptorBuilder=di,Nu.SerialDescriptorImpl=fi,Object.defineProperty(_i,"ENUM",{get:yi}),Object.defineProperty(_i,"CONTEXTUAL",{get:bi}),Nu.SerialKind=_i,Object.defineProperty(xi,"BOOLEAN",{get:ki}),Object.defineProperty(xi,"BYTE",{get:Ni}),Object.defineProperty(xi,"CHAR",{get:Pi}),Object.defineProperty(xi,"SHORT",{get:ji}),Object.defineProperty(xi,"INT",{get:Ri}),Object.defineProperty(xi,"LONG",{get:qi}),Object.defineProperty(xi,"FLOAT",{get:Ui}),Object.defineProperty(xi,"DOUBLE",{get:Hi}),Object.defineProperty(xi,"STRING",{get:Xi}),Nu.PrimitiveKind=xi,Object.defineProperty(Yi,"CLASS",{get:Qi}),Object.defineProperty(Yi,"LIST",{get:nn}),Object.defineProperty(Yi,"MAP",{get:sn}),Object.defineProperty(Yi,"OBJECT",{get:un}),Nu.StructureKind=Yi,Object.defineProperty(pn,"SEALED",{get:dn}),Object.defineProperty(pn,"OPEN",{get:function(){return null===_n&&new fn,_n}}),Nu.PolymorphicKind=pn;var Eu=Su.encoding||(Su.encoding={});Eu.AbstractDecoder=mn,Eu.AbstractEncoder=$n,Eu.Decoder=yn,Object.defineProperty(vn,"Companion",{get:Tn}),Eu.CompositeDecoder=vn,Eu.Encoder=Pn,Eu.CompositeEncoder=On;var Tu=Su.internal||(Su.internal={});Tu.AbstractPolymorphicSerializer=Mn,Tu.throwSubtypeNotRegistered_it6qj1$=jn,Tu.throwSubtypeNotRegistered_zgnrn5$=An,Tu.ListLikeDescriptor=In,Tu.MapLikeDescriptor=Rn,Tu.PrimitiveArrayDescriptor=Ln,Tu.ArrayClassDesc=Dn,Tu.ArrayListClassDesc=qn,Tu.NamedListClassDescriptor=Fn,Tu.LinkedHashSetClassDesc=Bn,Tu.HashSetClassDesc=Un,Tu.NamedMapClassDescriptor=Vn,Tu.LinkedHashMapClassDesc=Gn,Tu.HashMapClassDesc=Hn,Tu.AbstractCollectionSerializer=Wn,Tu.ListLikeSerializer=Kn,Tu.MapLikeSerializer=Xn,Tu.PrimitiveArrayBuilder=Yn,Tu.PrimitiveArraySerializer=Zn,Tu.ReferenceArraySerializer=Jn,Tu.ArrayListSerializer=Qn,Tu.LinkedHashSetSerializer=to,Tu.HashSetSerializer=eo,Tu.LinkedHashMapSerializer=io,Tu.HashMapSerializer=no,Tu.EnumSerializer=oo,Tu.NullableSerializer=ro,Tu.SerialDescriptorForNullable=so,Tu.ObjectSerializer=ao,Tu.cachedSerialNames_tie8r4$=lo,Tu.compactArray_b0lhx2$=uo,Tu.defer_nmpjmt$=co,Su.KSerializer=Gl,Su.SerializationStrategy=Hl,Su.DeserializationStrategy=Wl,Tu.serializerNotRegistered_lu5d9p$=ho,Tu.kclass_7v1px$=fo,Tu.getElementIndexOrThrow_luk6xe$=_o,Tu.PluginGeneratedSerialDescriptor=mo,Tu.GeneratedSerializer=$o,Tu.SerializerFactory=yo,Object.defineProperty(Tu,"ByteArraySerializer",{get:bo}),Tu.ByteArrayBuilder=xo,Object.defineProperty(Tu,"ShortArraySerializer",{get:ko}),Tu.ShortArrayBuilder=So,Object.defineProperty(Tu,"IntArraySerializer",{get:Eo}),Tu.IntArrayBuilder=To,Object.defineProperty(Tu,"LongArraySerializer",{get:Mo}),Tu.LongArrayBuilder=jo,Object.defineProperty(Tu,"FloatArraySerializer",{get:Ro}),Tu.FloatArrayBuilder=Lo,Object.defineProperty(Tu,"DoubleArraySerializer",{get:Fo}),Tu.DoubleArrayBuilder=Bo,Object.defineProperty(Tu,"CharArraySerializer",{get:Go}),Tu.CharArrayBuilder=Ho,Object.defineProperty(Tu,"BooleanArraySerializer",{get:Yo}),Tu.BooleanArrayBuilder=Zo,Tu.PrimitiveSerialDescriptor=Jo,Tu.PrimitiveDescriptorSafe_2z23zl$=Qo,Tu.builtinSerializerOrNull_beh9s$=tr,Object.defineProperty(Tu,"UnitSerializer",{get:nr}),Object.defineProperty(Tu,"BooleanSerializer",{get:sr}),Object.defineProperty(Tu,"ByteSerializer",{get:ur}),Object.defineProperty(Tu,"ShortSerializer",{get:hr}),Object.defineProperty(Tu,"IntSerializer",{get:_r}),Object.defineProperty(Tu,"LongSerializer",{get:yr}),Object.defineProperty(Tu,"FloatSerializer",{get:br}),Object.defineProperty(Tu,"DoubleSerializer",{get:zr}),Object.defineProperty(Tu,"CharSerializer",{get:Cr}),Object.defineProperty(Tu,"StringSerializer",{get:ns}),Tu.Migration=os,Tu.TaggedEncoder=rs,Tu.NamedValueEncoder=ss,Tu.TaggedDecoder=as,Tu.NamedValueDecoder=ls,Tu.KeyValueSerializer=us,Tu.MapEntrySerializer=ps,Tu.PairSerializer=hs,Tu.TripleSerializer=ds;var Pu=Su.json||(Su.json={}),Ou=Pu.internal||(Pu.internal={});Ou.JsonConf=fs,Ou.JsonException=_s,Ou.JsonDecodingException=ms,Ou.JsonEncodingException=$s,Ou.JsonDecodingException_kx378j$=ys,Ou.InvalidFloatingPointEncoded_qwibp1$=vs,Ou.InvalidFloatingPointEncoded_x0xb19$=gs,Ou.InvalidFloatingPointDecoded_x0xb19$=bs,Ou.throwInvalidFloatingPointDecoded_nyj901$=xs,Ou.UnknownKeyException_wdz5eb$=zs,Ou.InvalidKeyKindException_jo479d$=ks,Ou.JsonParser=Cs,Object.defineProperty(Ou,"EscapeCharMappings",{get:Is}),Ou.charToTokenClass_8e8zqy$=Ds,Ou.escapeToChar_kcn2v3$=qs,Ou.JsonReader=Fs,Ou.checkKind_x1ow4c$=Us,Ou.decodeSerializableValuePolymorphic_3uiavc$=Vs,Ou.PolymorphismValidator=Gs,Ou.StreamingJsonDecoder=Hs,Ws.Composer=Ks,Ou.StreamingJsonEncoder_init_e4t9r6$=Xs,Ou.StreamingJsonEncoder=Ws,Ou.printQuoted_jigvc$=Zs,Ou.toBooleanStrict_7efafi$=Js,Ou.toBooleanStrictOrNull_7efafi$=Qs,Ou.readJson_ijhaef$=ta,Ou.readPolymorphicJson_nnpnh6$=ea,Ou.writeJson_4dixew$=aa,Object.defineProperty(da,"OBJ",{get:_a}),Object.defineProperty(da,"LIST",{get:ma}),Object.defineProperty(da,"MAP",{get:$a}),Object.defineProperty(da,"POLY_OBJ",{get:ya}),Ou.WriteMode=da,Ou.switchMode_q3nfcb$=ga,Object.defineProperty(ba,"Default",{get:Sa}),Pu.Json=ba,Pu.Json_x26noe$=function(t,e){void 0===t&&(t=Sa());var i=new Ca(t.configuration_8be2vx$);return e(i),new Na(i.build_8be2vx$())},Pu.JsonBuilder=Ca,Pu.JsonContentPolymorphicSerializer=Ea,Pu.JsonDecoder=Ta,Object.defineProperty(Pa,"Companion",{get:ja}),Pu.JsonElement=Pa,Object.defineProperty(Aa,"Companion",{get:La}),Pu.JsonPrimitive=Aa,Pu.JsonPrimitive_1v8dbw$=Da,Pu.JsonPrimitive_rcaewn$=qa,Pu.JsonPrimitive_pdl1vj$=Fa,Pu.JsonLiteral=Ba,Object.defineProperty(Pu,"JsonNull",{get:Ga}),Object.defineProperty(Ha,"Companion",{get:Ya}),Pu.JsonObject=Ha,Object.defineProperty(Za,"Companion",{get:tl}),Pu.JsonArray=Za,Pu.get_jsonPrimitive_u3sd3g$=el,Pu.get_int_59esu7$=il,Pu.get_long_59esu7$=nl,Pu.get_longOrNull_59esu7$=ol,Pu.get_double_59esu7$=rl,Pu.get_doubleOrNull_59esu7$=sl,Pu.get_float_59esu7$=al,Pu.get_boolean_59esu7$=ll,Pu.get_booleanOrNull_59esu7$=ul,Pu.get_contentOrNull_59esu7$=pl,Object.defineProperty(Pu,"JsonElementSerializer",{get:vl}),Object.defineProperty(Pu,"JsonPrimitiveSerializer",{get:xl}),Object.defineProperty(Pu,"JsonNullSerializer",{get:kl}),Object.defineProperty(Pu,"JsonObjectSerializer",{get:Pl}),Object.defineProperty(Pu,"JsonArraySerializer",{get:Ll}),Pu.asJsonDecoder_k984l0$=Fl,Pu.asJsonEncoder_vwx09w$=Bl,Pu.JsonEncoder=Ul,Pu.JsonTransformingSerializer=Vl,Object.defineProperty(Kl,"BANNED",{get:Yl}),Object.defineProperty(Kl,"OVERWRITE",{get:Zl}),Object.defineProperty(Kl,"UPDATE",{get:Jl}),Su.UpdateMode=Kl;var Mu=Su.modules||(Su.modules={});Mu.SerializersModule=Ql,Mu.SerialModuleImpl=tu,Mu.SerializersModuleCollector=eu,Su.findPolymorphicSerializer_uce5au$=iu,Su.findPolymorphicSerializer_dz33bw$=nu,Su.SealedClassSerializer=ru,Su.SerialFormat=au,Su.StringFormat=lu,Su.SerializationException_init_pdl1vj$=pu,Su.SerializationException=uu,Su.MissingFieldException=cu,Su.UnknownFieldException=hu,Su.serializer_saj79j$=function(t){var e;return mu(null!=(e=fu(Il,t))?e:ho(fo(t)),t.isMarkedNullable)},Su.serializer_ca95z9$=du,Su.serializerOrNull_1yb8b7$=_u,Tu.getChecked_4bqw6o$=$u,Tu.getChecked_3zu3yo$=yu,Tu.compiledSerializerImpl_beh9s$=vu,Tu.toNativeArrayImpl_wfz7v1$=gu,Tu.isInstanceOf_ofcvxk$=bu,Tu.constructSerializerForGivenTypeArgs_f7nown$=xu,Tu.isReferenceArray_79m3vz$=wu,Su.SerializableWith=zu,Gl.prototype.patch_h7kg3r$,ii.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(fi.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),mn.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,mn.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,mn.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,mn.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,mn.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,mn.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,mn.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,mn.prototype.decodeSequentially=vn.prototype.decodeSequentially,mn.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,mn.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,mn.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,mn.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,mn.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,$n.prototype.beginStructure_24f42q$=Pn.prototype.beginStructure_24f42q$,$n.prototype.encodeNotNullMark=Pn.prototype.encodeNotNullMark,$n.prototype.beginCollection_szpzho$=Pn.prototype.beginCollection_szpzho$,$n.prototype.beginCollection_m8o8wh$=Pn.prototype.beginCollection_m8o8wh$,$n.prototype.encodeSerializableValue_tf03ej$=Pn.prototype.encodeSerializableValue_tf03ej$,$n.prototype.encodeNullableSerializableValue_f4686g$=Pn.prototype.encodeNullableSerializableValue_f4686g$,$n.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,$n.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,Mn.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(In.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),Object.defineProperty(In.prototype,"annotations",Object.getOwnPropertyDescriptor(oi.prototype,"annotations")),Object.defineProperty(Rn.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),Object.defineProperty(Rn.prototype,"annotations",Object.getOwnPropertyDescriptor(oi.prototype,"annotations")),Wn.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(mo.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),oo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ro.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ao.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(po.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),Object.defineProperty(po.prototype,"annotations",Object.getOwnPropertyDescriptor(oi.prototype,"annotations")),$o.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,vo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,wo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Co.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Po.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Ao.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Do.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Uo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Wo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(Jo.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),Object.defineProperty(Jo.prototype,"annotations",Object.getOwnPropertyDescriptor(oi.prototype,"annotations")),or.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ar.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,pr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,dr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,mr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,vr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,xr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,kr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Nr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(os.prototype,"isNullable",Object.getOwnPropertyDescriptor(oi.prototype,"isNullable")),Object.defineProperty(os.prototype,"annotations",Object.getOwnPropertyDescriptor(oi.prototype,"annotations")),rs.prototype.beginStructure_24f42q$=Pn.prototype.beginStructure_24f42q$,rs.prototype.beginCollection_szpzho$=Pn.prototype.beginCollection_szpzho$,rs.prototype.beginCollection_m8o8wh$=Pn.prototype.beginCollection_m8o8wh$,rs.prototype.encodeSerializableValue_tf03ej$=Pn.prototype.encodeSerializableValue_tf03ej$,rs.prototype.encodeNullableSerializableValue_f4686g$=Pn.prototype.encodeNullableSerializableValue_f4686g$,rs.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,rs.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,as.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,as.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,as.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,as.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,as.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,as.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,as.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,as.prototype.decodeSequentially=vn.prototype.decodeSequentially,as.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,as.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,as.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,as.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,as.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,us.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ds.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Ta.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,Ta.prototype.beginStructure_jvp2sb$=yn.prototype.beginStructure_jvp2sb$,Ta.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,Ta.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,Ta.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,Ta.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,Ta.prototype.decodeSequentially=vn.prototype.decodeSequentially,Ta.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,Ta.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,Ta.prototype.decodeSerializableElement_12e8id$$default=vn.prototype.decodeSerializableElement_12e8id$$default,Ta.prototype.decodeNullableSerializableElement_8viuyw$$default=vn.prototype.decodeNullableSerializableElement_8viuyw$$default,Ta.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,Ta.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,Ta.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,Ta.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,Ta.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,Hs.prototype.decodeNullableSerializableValue_aae3ea$=Ta.prototype.decodeNullableSerializableValue_aae3ea$,Hs.prototype.updateSerializableValue_19c8k5$=Ta.prototype.updateSerializableValue_19c8k5$,Hs.prototype.updateNullableSerializableValue_exmlbs$=Ta.prototype.updateNullableSerializableValue_exmlbs$,Hs.prototype.decodeSequentially=Ta.prototype.decodeSequentially,Hs.prototype.decodeCollectionSize_24f42q$=Ta.prototype.decodeCollectionSize_24f42q$,Hs.prototype.decodeSerializableElement_186mnl$=Ta.prototype.decodeSerializableElement_186mnl$,Hs.prototype.decodeNullableSerializableElement_pzkbua$=Ta.prototype.decodeNullableSerializableElement_pzkbua$,Hs.prototype.updateSerializableElement_12e8id$=Ta.prototype.updateSerializableElement_12e8id$,Hs.prototype.updateNullableSerializableElement_8viuyw$=Ta.prototype.updateNullableSerializableElement_8viuyw$,Ul.prototype.encodeNotNullMark=Pn.prototype.encodeNotNullMark,Ul.prototype.beginStructure_24f42q$=Pn.prototype.beginStructure_24f42q$,Ul.prototype.beginStructure_jvp2sb$=Pn.prototype.beginStructure_jvp2sb$,Ul.prototype.beginCollection_szpzho$=Pn.prototype.beginCollection_szpzho$,Ul.prototype.beginCollection_m8o8wh$=Pn.prototype.beginCollection_m8o8wh$,Ul.prototype.encodeSerializableValue_tf03ej$=Pn.prototype.encodeSerializableValue_tf03ej$,Ul.prototype.encodeNullableSerializableValue_f4686g$=Pn.prototype.encodeNullableSerializableValue_f4686g$,Ul.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,Ul.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,Ws.prototype.encodeNotNullMark=Ul.prototype.encodeNotNullMark,Ws.prototype.beginCollection_szpzho$=Ul.prototype.beginCollection_szpzho$,Ws.prototype.beginCollection_m8o8wh$=Ul.prototype.beginCollection_m8o8wh$,Ws.prototype.encodeNullableSerializableValue_f4686g$=Ul.prototype.encodeNullableSerializableValue_f4686g$,Ws.prototype.encodeNonSerializableElement_ptgdlt$=Ul.prototype.encodeNonSerializableElement_ptgdlt$,Ea.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,cl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,gl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,wl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Sl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,El.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Ol.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Vl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,bn="kotlin.Array",xn="kotlin.collections.ArrayList",wn="kotlin.collections.LinkedHashSet",zn="kotlin.collections.HashSet",kn="kotlin.collections.LinkedHashMap",Sn="kotlin.collections.HashMap",Cn=[],Nn=[],Ko=It([N(yt,Je()),N(i(vt),Ae()),N(gt,Ie()),N(bt,We()),N(xt,Ke()),N(wt,Ge()),N(zt,He()),N(i(kt),Ue()),N(St,Ve()),N(Ct,Fe()),N(Nt,Be()),N(Et,De()),N(Tt,qe()),N(Pt,Re()),N(Ot,Le()),N(Mt,Xe()),N(jt,Ye()),N(i(Object.getPrototypeOf(At.Unit).constructor),Ze())]),Er=new L,Tr="Use 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",Pr="It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'",Or="Use 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.",Mr="Use 'allowStructuredMapKeys = true' in 'Json {}' builder to convert such maps to [key1, value1, key2, value2,...] arrays.",jr="null",Ar=44,Ir=58,Rr=123,Lr=125,Dr=91,qr=93,Fr=34,Br=92,Ur=Ht(0),Vr=117,Gr=0,Hr=1,Wr=4,Kr=5,Xr=6,Yr=7,Zr=8,Jr=9,Qr=10,ts=12;for(var ju=new Int8Array(126),Au=0;Au<=32;Au++)Rs(ju,Au,11);Rs(ju,9,3),Rs(ju,10,3),Rs(ju,13,3),Rs(ju,32,3),Ls(ju,Ar,Wr),Ls(ju,Ir,Kr),Ls(ju,Rr,Xr),Ls(ju,Lr,Yr),Ls(ju,Dr,Zr),Ls(ju,qr,Jr),Ls(ju,Fr,Hr),Ls(ju,Br,2),es=ju;for(var Iu=e.newArray(128,null),Ru=0;Ru<=31;Ru++){var Lu=Ys(Ru>>12),Du=Ys(Ru>>8),qu=Ys(Ru>>4),Fu=Ys(Ru);Iu[Ru]="\\u"+String.fromCharCode(Lu)+String.fromCharCode(Du)+String.fromCharCode(qu)+String.fromCharCode(Fu)}return Iu[34]='\\"',Iu[92]="\\\\",Iu[9]="\\t",Iu[8]="\\b",Iu[10]="\\n",Iu[13]="\\r",Iu[12]="\\f",Es=Iu,Ts="primitive",wa="    ",za="type",Il=new tu(fe(),fe(),fe(),fe()),Se.toNumber(),t})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){"use strict";var n={};(0,i(0).assign)(n,i(15),i(18),i(9)),t.exports=n},function(t,e,i){"use strict";var n=i(16),o=i(0),r=i(7),s=i(2),a=i(8),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?r.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=n.deflateSetDictionary(this.strm,p)))throw new Error(s[i]);this._dict_set=!0}}function p(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}u.prototype.push=function(t,e){var i,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=r.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new o.Buf8(u),a.next_out=0,a.avail_out=u),1!==(i=n.deflate(a,s))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(r.buf2binstring(o.shrinkBuf(a.output,a.next_out))):this.onData(o.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),a.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,i){"use strict";var n,o=i(0),r=i(17),s=i(5),a=i(6),l=i(2);function u(t,e){return t.msg=l[e],e}function p(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function h(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(o.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function d(t,e){r._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,h(t.strm)}function f(t,e){t.pending_buf[t.pending++]=e}function _(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e){var i,n,o=t.max_chain_length,r=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,p=t.w_mask,c=t.prev,h=t.strstart+258,d=u[r+s-1],f=u[r+s];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(i=e)+s]===f&&u[i+s-1]===d&&u[i]===u[r]&&u[++i]===u[r+1]){r+=2,i++;do{}while(u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&r<h);if(n=258-(h-r),r=h-258,n>s){if(t.match_start=e,s=n,n>=a)break;d=u[r+s-1],f=u[r+s]}}}while((e=c[e&p])>l&&0!=--o);return s<=t.lookahead?s:t.lookahead}function $(t){var e,i,n,r,l,u,p,c,h,d,f=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-262)){o.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--i);e=i=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--i);r+=f}if(0===t.strm.avail_in)break;if(u=t.strm,p=t.window,c=t.strstart+t.lookahead,h=r,d=void 0,(d=u.avail_in)>h&&(d=h),i=0===d?0:(u.avail_in-=d,o.arraySet(p,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=s(u.adler,p,d,c):2===u.state.wrap&&(u.adler=a(u.adler,p,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function y(t,e){for(var i,n;;){if(t.lookahead<262){if($(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=m(t,i)),t.match_length>=3)if(n=r._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function v(t,e){for(var i,n,o;;){if(t.lookahead<262){if($(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=m(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-3,n=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=r._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function g(t,e,i,n,o){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=o}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(1146),this.dyn_dtree=new o.Buf16(122),this.bl_tree=new o.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(16),this.heap=new o.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,r._tr_init(e),0):u(t,-2)}function w(t){var e,i=x(t);return 0===i&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function z(t,e,i,n,r,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>9||8!==i||n<8||n>15||e<0||e>9||s<0||s>4)return u(t,-2);8===n&&(n=9);var l=new b;return t.state=l,l.strm=t,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new o.Buf8(2*l.w_size),l.head=new o.Buf16(l.hash_size),l.prev=new o.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new o.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,w(t)}n=[new g(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if($(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new g(4,4,8,4,y),new g(4,5,16,8,y),new g(4,6,32,32,y),new g(4,4,16,16,v),new g(8,16,32,32,v),new g(8,16,128,128,v),new g(8,32,128,256,v),new g(32,128,258,1024,v),new g(32,258,258,4096,v)],e.deflateInit=function(t,e){return z(t,e,8,15,8,0)},e.deflateInit2=z,e.deflateReset=w,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var i,o,s,l;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||666===o.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(o.strm=t,i=o.last_flush,o.last_flush=e,42===o.status)if(2===o.wrap)t.adler=0,f(o,31),f(o,139),f(o,8),o.gzhead?(f(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),f(o,255&o.gzhead.time),f(o,o.gzhead.time>>8&255),f(o,o.gzhead.time>>16&255),f(o,o.gzhead.time>>24&255),f(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),f(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(f(o,255&o.gzhead.extra.length),f(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=a(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(f(o,0),f(o,0),f(o,0),f(o,0),f(o,0),f(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),f(o,3),o.status=113);else{var m=8+(o.w_bits-8<<4)<<8;m|=(o.strategy>=2||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(m|=32),m+=31-m%31,o.status=113,_(o,m),0!==o.strstart&&(_(o,t.adler>>>16),_(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(s=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),h(t),s=o.pending,o.pending!==o.pending_buf_size));)f(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){s=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),h(t),s=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,f(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),0===l&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){s=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),h(t),s=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,f(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),0===l&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&h(t),o.pending+2<=o.pending_buf_size&&(f(o,255&t.adler),f(o,t.adler>>8&255),t.adler=0,o.status=113)):o.status=113),0!==o.pending){if(h(t),0===t.avail_out)return o.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(i)&&4!==e)return u(t,-5);if(666===o.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==o.lookahead||0!==e&&666!==o.status){var y=2===o.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&($(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(o,e):3===o.strategy?function(t,e){for(var i,n,o,s,a=t.window;;){if(t.lookahead<=258){if($(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[o=t.strstart-1])===a[++o]&&n===a[++o]&&n===a[++o]){s=t.strstart+258;do{}while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<s);t.match_length=258-(s-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=r._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(o,e):n[o.level].func(o,e);if(3!==y&&4!==y||(o.status=666),1===y||3===y)return 0===t.avail_out&&(o.last_flush=-1),0;if(2===y&&(1===e?r._tr_align(o):5!==e&&(r._tr_stored_block(o,0,0,!1),3===e&&(c(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),h(t),0===t.avail_out))return o.last_flush=-1,0}return 4!==e?0:o.wrap<=0?1:(2===o.wrap?(f(o,255&t.adler),f(o,t.adler>>8&255),f(o,t.adler>>16&255),f(o,t.adler>>24&255),f(o,255&t.total_in),f(o,t.total_in>>8&255),f(o,t.total_in>>16&255),f(o,t.total_in>>24&255)):(_(o,t.adler>>>16),_(o,65535&t.adler)),h(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var i,n,r,a,l,u,p,h,d=e.length;if(!t||!t.state)return-2;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return-2;for(1===a&&(t.adler=s(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new o.Buf8(i.w_size),o.arraySet(h,e,d-i.w_size,i.w_size,0),e=h,d=i.w_size),l=t.avail_in,u=t.next_in,p=t.input,t.avail_in=d,t.next_in=0,t.input=e,$(i);i.lookahead>=3;){n=i.strstart,r=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--r);i.strstart=n,i.lookahead=2,$(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=u,t.input=p,t.avail_in=l,i.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(0);function o(t){for(var e=t.length;--e>=0;)t[e]=0}var r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);o(u);var p=new Array(60);o(p);var c=new Array(512);o(c);var h=new Array(256);o(h);var d=new Array(29);o(d);var f,_,m,$=new Array(30);function y(t,e,i,n,o){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=t&&t.length}function v(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function g(t){return t<256?c[t]:c[256+(t>>>7)]}function b(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function w(t,e,i){x(t,i[2*e],i[2*e+1])}function z(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function k(t,e,i){var n,o,r=new Array(16),s=0;for(n=1;n<=15;n++)r[n]=s=s+i[n-1]<<1;for(o=0;o<=e;o++){var a=t[2*o+1];0!==a&&(t[2*o]=z(r[a]++,a))}}function S(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function C(t){t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function N(t,e,i,n){var o=2*e,r=2*i;return t[o]<t[r]||t[o]===t[r]&&n[e]<=n[i]}function E(t,e,i){for(var n=t.heap[i],o=i<<1;o<=t.heap_len&&(o<t.heap_len&&N(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!N(e,n,t.heap[o],t.depth));)t.heap[i]=t.heap[o],i=o,o<<=1;t.heap[i]=n}function T(t,e,i){var n,o,a,l,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],o=t.pending_buf[t.l_buf+u],u++,0===n?w(t,o,e):(w(t,(a=h[o])+256+1,e),0!==(l=r[a])&&x(t,o-=d[a],l),w(t,a=g(--n),i),0!==(l=s[a])&&x(t,n-=$[a],l))}while(u<t.last_lit);w(t,256,e)}function P(t,e){var i,n,o,r=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<l;i++)0!==r[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):r[2*i+1]=0;for(;t.heap_len<2;)r[2*(o=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[o]=0,t.opt_len--,a&&(t.static_len-=s[2*o+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)E(t,r,i);o=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,r,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,r[2*o]=r[2*i]+r[2*n],t.depth[o]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,r[2*i+1]=r[2*n+1]=o,t.heap[1]=o++,E(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,o,r,s,a,l=e.dyn_tree,u=e.max_code,p=e.stat_desc.static_tree,c=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,_=0;for(r=0;r<=15;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(r=l[2*l[2*(n=t.heap[i])+1]+1]+1)>f&&(r=f,_++),l[2*n+1]=r,n>u||(t.bl_count[r]++,s=0,n>=d&&(s=h[n-d]),a=l[2*n],t.opt_len+=a*(r+s),c&&(t.static_len+=a*(p[2*n+1]+s)));if(0!==_){do{for(r=f-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[f]--,_-=2}while(_>0);for(r=f;0!==r;r--)for(n=t.bl_count[r];0!==n;)(o=t.heap[--i])>u||(l[2*o+1]!==r&&(t.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),n--)}}(t,e),k(r,u,t.bl_count)}function O(t,e,i){var n,o,r=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)o=s,s=e[2*(n+1)+1],++a<l&&o===s||(a<u?t.bl_tree[2*o]+=a:0!==o?(o!==r&&t.bl_tree[2*o]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,r=o,0===s?(l=138,u=3):o===s?(l=6,u=3):(l=7,u=4))}function M(t,e,i){var n,o,r=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=i;n++)if(o=s,s=e[2*(n+1)+1],!(++a<l&&o===s)){if(a<u)do{w(t,o,t.bl_tree)}while(0!=--a);else 0!==o?(o!==r&&(w(t,o,t.bl_tree),a--),w(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(w(t,17,t.bl_tree),x(t,a-3,3)):(w(t,18,t.bl_tree),x(t,a-11,7));a=0,r=o,0===s?(l=138,u=3):o===s?(l=6,u=3):(l=7,u=4)}}o($);var j=!1;function A(t,e,i,o){x(t,0+(o?1:0),3),function(t,e,i,o){C(t),o&&(b(t,i),b(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){j||(!function(){var t,e,i,n,o,l=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<r[n];t++)h[i++]=n;for(h[i-1]=n,o=0,n=0;n<16;n++)for($[n]=o,t=0;t<1<<s[n];t++)c[o++]=n;for(o>>=7;n<30;n++)for($[n]=o<<7,t=0;t<1<<s[n]-7;t++)c[256+o++]=n;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(k(u,287,l),t=0;t<30;t++)p[2*t+1]=5,p[2*t]=z(t,5);f=new y(u,r,257,286,15),_=new y(p,s,0,30,15),m=new y(new Array(0),a,0,19,7)}(),j=!0),t.l_desc=new v(t.dyn_ltree,f),t.d_desc=new v(t.dyn_dtree,_),t.bl_desc=new v(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,S(t)},e._tr_stored_block=A,e._tr_flush_block=function(t,e,i,n){var o,r,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),P(t,t.l_desc),P(t,t.d_desc),s=function(t){var e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=o&&(o=r)):o=r=i+5,i+4<=o&&-1!==e?A(t,e,i,n):4===t.strategy||r===o?(x(t,2+(n?1:0),3),T(t,u,p)):(x(t,4+(n?1:0),3),function(t,e,i,n){var o;for(x(t,e-257,5),x(t,i-1,5),x(t,n-4,4),o=0;o<n;o++)x(t,t.bl_tree[2*l[o]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),T(t,t.dyn_ltree,t.dyn_dtree)),S(t),n&&C(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(h[i]+256+1)]++,t.dyn_dtree[2*g(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),w(t,256,u),function(t){16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(19),o=i(0),r=i(7),s=i(9),a=i(2),l=i(8),u=i(22),p=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=r.string2buf(e.dictionary):"[object ArrayBuffer]"===p.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[i])}function h(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}c.prototype.push=function(t,e){var i,a,l,u,c,h=this.strm,d=this.options.chunkSize,f=this.options.dictionary,_=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=r.binstring2buf(t):"[object ArrayBuffer]"===p.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new o.Buf8(d),h.next_out=0,h.avail_out=d),(i=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(i=n.inflateSetDictionary(this.strm,f)),i===s.Z_BUF_ERROR&&!0===_&&(i=s.Z_OK,_=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&i!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=r.utf8border(h.output,h.next_out),u=h.next_out-l,c=r.buf2string(h.output,l),h.next_out=u,h.avail_out=d-u,u&&o.arraySet(h.output,h.output,l,u,0),this.onData(c)):this.onData(o.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(_=!0)}while((h.avail_in>0||0===h.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),h.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=h,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.ungzip=h},function(t,e,i){"use strict";var n=i(0),o=i(5),r=i(6),s=i(20),a=i(21);function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,p(t)):-2}function h(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,c(t))):-2}function d(t,e){var i,n;return t?(n=new u,t.state=n,n.window=null,0!==(i=h(t,e))&&(t.state=null),i):-2}var f,_,m=!0;function $(t){if(m){var e;for(f=new n.Buf32(512),_=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,f,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,_,0,t.work,{bits:5}),m=!1}t.lencode=f,t.lenbits=9,t.distcode=_,t.distbits=5}function y(t,e,i,o){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),o>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>o&&(r=o),n.arraySet(s.window,e,i-o,r,s.wnext),(o-=r)?(n.arraySet(s.window,e,i-o,o,0),s.wnext=o,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}e.inflateReset=c,e.inflateReset2=h,e.inflateResetKeep=p,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var i,u,p,c,h,d,f,_,m,v,g,b,x,w,z,k,S,C,N,E,T,P,O,M,j=0,A=new n.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),h=t.next_out,p=t.output,f=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,_=i.hold,m=i.bits,v=d,g=f,P=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(2&i.wrap&&35615===_){i.check=0,A[0]=255&_,A[1]=_>>>8&255,i.check=r(i.check,A,2,0),_=0,m=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&_)){t.msg="unknown compression method",i.mode=30;break}if(m-=4,T=8+(15&(_>>>=4)),0===i.wbits)i.wbits=T;else if(T>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<T,t.adler=i.check=1,i.mode=512&_?10:12,_=0,m=0;break;case 2:for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(i.flags=_,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=_>>8&1),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=r(i.check,A,2,0)),_=0,m=0,i.mode=3;case 3:for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.head&&(i.head.time=_),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,A[2]=_>>>16&255,A[3]=_>>>24&255,i.check=r(i.check,A,4,0)),_=0,m=0,i.mode=4;case 4:for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.head&&(i.head.xflags=255&_,i.head.os=_>>8),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=r(i.check,A,2,0)),_=0,m=0,i.mode=5;case 5:if(1024&i.flags){for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.length=_,i.head&&(i.head.extra_len=_),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=r(i.check,A,2,0)),_=0,m=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((b=i.length)>d&&(b=d),b&&(i.head&&(T=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,u,c,b,T)),512&i.flags&&(i.check=r(i.check,u,b,c)),d-=b,c+=b,i.length-=b),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===d)break t;b=0;do{T=u[c+b++],i.head&&T&&i.length<65536&&(i.head.name+=String.fromCharCode(T))}while(T&&b<d);if(512&i.flags&&(i.check=r(i.check,u,b,c)),d-=b,c+=b,T)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===d)break t;b=0;do{T=u[c+b++],i.head&&T&&i.length<65536&&(i.head.comment+=String.fromCharCode(T))}while(T&&b<d);if(512&i.flags&&(i.check=r(i.check,u,b,c)),d-=b,c+=b,T)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}_=0,m=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}t.adler=i.check=l(_),_=0,m=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){_>>>=7&m,m-=7&m,i.mode=27;break}for(;m<3;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}switch(i.last=1&_,m-=1,3&(_>>>=1)){case 0:i.mode=14;break;case 1:if($(i),i.mode=20,6===e){_>>>=2,m-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}_>>>=2,m-=2;break;case 14:for(_>>>=7&m,m-=7&m;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if((65535&_)!=(_>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&_,_=0,m=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(b=i.length){if(b>d&&(b=d),b>f&&(b=f),0===b)break t;n.arraySet(p,u,c,b,h),d-=b,c+=b,f-=b,h+=b,i.length-=b;break}i.mode=12;break;case 17:for(;m<14;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(i.nlen=257+(31&_),_>>>=5,m-=5,i.ndist=1+(31&_),_>>>=5,m-=5,i.ncode=4+(15&_),_>>>=4,m-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;m<3;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.lens[I[i.have++]]=7&_,_>>>=3,m-=3}for(;i.have<19;)i.lens[I[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},P=a(0,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,P){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;k=(j=i.lencode[_&(1<<i.lenbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(S<16)_>>>=z,m-=z,i.lens[i.have++]=S;else{if(16===S){for(M=z+2;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_>>>=z,m-=z,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}T=i.lens[i.have-1],b=3+(3&_),_>>>=2,m-=2}else if(17===S){for(M=z+3;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}m-=z,T=0,b=3+(7&(_>>>=z)),_>>>=3,m-=3}else{for(M=z+7;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}m-=z,T=0,b=11+(127&(_>>>=z)),_>>>=7,m-=7}if(i.have+b>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;b--;)i.lens[i.have++]=T}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,O={bits:i.lenbits},P=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,P){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},P=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,P){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(d>=6&&f>=258){t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,s(t,g),h=t.next_out,p=t.output,f=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,_=i.hold,m=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;k=(j=i.lencode[_&(1<<i.lenbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(k&&0==(240&k)){for(C=z,N=k,E=S;k=(j=i.lencode[E+((_&(1<<C+N)-1)>>C)])>>>16&255,S=65535&j,!(C+(z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}_>>>=C,m-=C,i.back+=C}if(_>>>=z,m-=z,i.back+=z,i.length=S,0===k){i.mode=26;break}if(32&k){i.back=-1,i.mode=12;break}if(64&k){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&k,i.mode=22;case 22:if(i.extra){for(M=i.extra;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.length+=_&(1<<i.extra)-1,_>>>=i.extra,m-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;k=(j=i.distcode[_&(1<<i.distbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(0==(240&k)){for(C=z,N=k,E=S;k=(j=i.distcode[E+((_&(1<<C+N)-1)>>C)])>>>16&255,S=65535&j,!(C+(z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}_>>>=C,m-=C,i.back+=C}if(_>>>=z,m-=z,i.back+=z,64&k){t.msg="invalid distance code",i.mode=30;break}i.offset=S,i.extra=15&k,i.mode=24;case 24:if(i.extra){for(M=i.extra;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.offset+=_&(1<<i.extra)-1,_>>>=i.extra,m-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===f)break t;if(b=g-f,i.offset>b){if((b=i.offset-b)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}b>i.wnext?(b-=i.wnext,x=i.wsize-b):x=i.wnext-b,b>i.length&&(b=i.length),w=i.window}else w=p,x=h-i.offset,b=i.length;b>f&&(b=f),f-=b,i.length-=b;do{p[h++]=w[x++]}while(--b);0===i.length&&(i.mode=21);break;case 26:if(0===f)break t;p[h++]=i.length,f--,i.mode=21;break;case 27:if(i.wrap){for(;m<32;){if(0===d)break t;d--,_|=u[c++]<<m,m+=8}if(g-=f,t.total_out+=g,i.total+=g,g&&(t.adler=i.check=i.flags?r(i.check,p,g,h-g):o(i.check,p,g,h-g)),g=f,(i.flags?_:l(_))!==i.check){t.msg="incorrect data check",i.mode=30;break}_=0,m=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}_=0,m=0}i.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,(i.wsize||g!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&y(t,t.output,t.next_out,g-t.avail_out)?(i.mode=31,-4):(v-=t.avail_in,g-=t.avail_out,t.total_in+=v,t.total_out+=g,i.total+=g,i.wrap&&g&&(t.adler=i.check=i.flags?r(i.check,p,g,t.next_out-g):o(i.check,p,g,t.next_out-g)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===v&&0===g||4===e)&&0===P&&(P=-5),P)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?-2:(i.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&o(1,e,n,0)!==i.check?-3:y(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,o,r,s,a,l,u,p,c,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S;i=t.state,n=t.next_in,k=t.input,o=n+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),a=r+(t.avail_out-257),l=i.dmax,u=i.wsize,p=i.whave,c=i.wnext,h=i.window,d=i.hold,f=i.bits,_=i.lencode,m=i.distcode,$=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),v=_[d&$];e:for(;;){if(d>>>=g=v>>>24,f-=g,0===(g=v>>>16&255))S[r++]=65535&v;else{if(!(16&g)){if(0==(64&g)){v=_[(65535&v)+(d&(1<<g)-1)];continue e}if(32&g){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}b=65535&v,(g&=15)&&(f<g&&(d+=k[n++]<<f,f+=8),b+=d&(1<<g)-1,d>>>=g,f-=g),f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),v=m[d&y];i:for(;;){if(d>>>=g=v>>>24,f-=g,!(16&(g=v>>>16&255))){if(0==(64&g)){v=m[(65535&v)+(d&(1<<g)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&v,f<(g&=15)&&(d+=k[n++]<<f,(f+=8)<g&&(d+=k[n++]<<f,f+=8)),(x+=d&(1<<g)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=g,f-=g,x>(g=r-s)){if((g=x-g)>p&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(w=0,z=h,0===c){if(w+=u-g,g<b){b-=g;do{S[r++]=h[w++]}while(--g);w=r-x,z=S}}else if(c<g){if(w+=u+c-g,(g-=c)<b){b-=g;do{S[r++]=h[w++]}while(--g);if(w=0,c<b){b-=g=c;do{S[r++]=h[w++]}while(--g);w=r-x,z=S}}}else if(w+=c-g,g<b){b-=g;do{S[r++]=h[w++]}while(--g);w=r-x,z=S}for(;b>2;)S[r++]=z[w++],S[r++]=z[w++],S[r++]=z[w++],b-=3;b&&(S[r++]=z[w++],b>1&&(S[r++]=z[w++]))}else{w=r-x;do{S[r++]=S[w++],S[r++]=S[w++],S[r++]=S[w++],b-=3}while(b>2);b&&(S[r++]=S[w++],b>1&&(S[r++]=S[w++]))}break}}break}}while(n<o&&r<a);n-=b=f>>3,d&=(1<<(f-=b<<3))-1,t.next_in=n,t.next_out=r,t.avail_in=n<o?o-n+5:5-(n-o),t.avail_out=r<a?a-r+257:257-(r-a),i.hold=d,i.bits=f}},function(t,e,i){"use strict";var n=i(0),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,l,u,p,c,h){var d,f,_,m,$,y,v,g,b,x=h.bits,w=0,z=0,k=0,S=0,C=0,N=0,E=0,T=0,P=0,O=0,M=null,j=0,A=new n.Buf16(16),I=new n.Buf16(16),R=null,L=0;for(w=0;w<=15;w++)A[w]=0;for(z=0;z<l;z++)A[e[i+z]]++;for(C=x,S=15;S>=1&&0===A[S];S--);if(C>S&&(C=S),0===S)return u[p++]=20971520,u[p++]=20971520,h.bits=1,0;for(k=1;k<S&&0===A[k];k++);for(C<k&&(C=k),T=1,w=1;w<=15;w++)if(T<<=1,(T-=A[w])<0)return-1;if(T>0&&(0===t||1!==S))return-1;for(I[1]=0,w=1;w<15;w++)I[w+1]=I[w]+A[w];for(z=0;z<l;z++)0!==e[i+z]&&(c[I[e[i+z]]++]=z);if(0===t?(M=R=c,y=19):1===t?(M=o,j-=257,R=r,L-=257,y=256):(M=s,R=a,y=-1),O=0,z=0,w=k,$=p,N=C,E=0,_=-1,m=(P=1<<C)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){v=w-E,c[z]<y?(g=0,b=c[z]):c[z]>y?(g=R[L+c[z]],b=M[j+c[z]]):(g=96,b=0),d=1<<w-E,k=f=1<<N;do{u[$+(O>>E)+(f-=d)]=v<<24|g<<16|b|0}while(0!==f);for(d=1<<w-1;O&d;)d>>=1;if(0!==d?(O&=d-1,O+=d):O=0,z++,0==--A[w]){if(w===S)break;w=e[i+c[z]]}if(w>C&&(O&m)!==_){for(0===E&&(E=C),$+=k,T=1<<(N=w-E);N+E<S&&!((T-=A[N+E])<=0);)N++,T<<=1;if(P+=1<<N,1===t&&P>852||2===t&&P>592)return 1;u[_=O&m]=C<<24|N<<16|$-p|0}}return 0!==O&&(u[$+O]=w-E<<24|64<<16|0),h.bits=C,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])}));
//# sourceMappingURL=kool-demo.js.map