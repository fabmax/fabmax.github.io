!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["kool-demo"]=e():t["kool-demo"]=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},s={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e,i){(function(i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(t){var e,n,r,o,s,a,l,u,p=t;function c(t){if(!("kotlinHashCodeValue$"in t)){var e=4294967296*Math.random()|0;Object.defineProperty(t,"kotlinHashCodeValue$",{value:e,enumerable:!1})}return t.kotlinHashCodeValue$}function h(){throw new Error("This marker function should never been called. Looks like compiler did not eliminate it properly. Please, report an issue if you caught this exception.")}function d(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0}t.isBooleanArray=function(t){return(Array.isArray(t)||t instanceof Int8Array)&&"BooleanArray"===t.$type$},t.isByteArray=function(t){return t instanceof Int8Array&&"BooleanArray"!==t.$type$},t.isShortArray=function(t){return t instanceof Int16Array},t.isCharArray=function(t){return t instanceof Uint16Array&&"CharArray"===t.$type$},t.isIntArray=function(t){return t instanceof Int32Array},t.isFloatArray=function(t){return t instanceof Float32Array},t.isDoubleArray=function(t){return t instanceof Float64Array},t.isLongArray=function(t){return Array.isArray(t)&&"LongArray"===t.$type$},t.isArray=function(t){return Array.isArray(t)&&!t.$type$},t.isArrayish=function(t){return Array.isArray(t)||ArrayBuffer.isView(t)},t.arrayToString=function(e){if(null===e)return"null";var i=t.isCharArray(e)?String.fromCharCode:t.toString;return"["+Array.prototype.map.call(e,(function(t){return i(t)})).join(", ")+"]"},t.arrayEquals=function(e,i){if(e===i)return!0;if(null===e||null===i||!t.isArrayish(i)||e.length!==i.length)return!1;for(var n=0,r=e.length;n<r;n++)if(!t.equals(e[n],i[n]))return!1;return!0},t.arrayHashCode=function(e){if(null===e)return 0;for(var i=1,n=0,r=e.length;n<r;n++)i=(31*i|0)+t.hashCode(e[n])|0;return i},t.getCallableRef=function(t,e){return e.callableName=t,e},t.toShort=function(t){return(65535&t)<<16>>16},t.toByte=function(t){return(255&t)<<24>>24},t.toChar=function(t){return 65535&t},t.numberToInt=function(e){return e instanceof t.Long?e.toInt():t.doubleToInt(e)},t.doubleToInt=function(t){return t>2147483647?2147483647:t<-2147483648?-2147483648:0|t},t.toBoxedChar=function(e){return null==e||e instanceof t.BoxedChar?e:new t.BoxedChar(e)},t.unboxChar=function(e){return null==e?e:t.toChar(e)},t.equals=function(t,e){return null==t?null==e:null!=e&&(t!=t?e!=e:"object"==typeof t&&"function"==typeof t.equals?t.equals(e):"number"==typeof t&&"number"==typeof e?t===e&&(0!==t||1/t==1/e):t===e)},t.hashCode=function(e){if(null==e)return 0;var i=typeof e;return"object"===i?"function"==typeof e.hashCode?e.hashCode():c(e):"function"===i?c(e):"number"===i?t.numberHashCode(e):"boolean"===i?Number(e):function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);e=31*e+n|0}return e}(String(e))},t.toString=function(e){return null==e?"null":t.isArrayish(e)?"[...]":e.toString()},t.identityHashCode=c,t.Long=function(t,e){this.low_=0|t,this.high_=0|e},t.Long.$metadata$={kind:"class",simpleName:"Long",interfaces:[]},t.Long.IntCache_={},t.Long.fromInt=function(e){if(-128<=e&&e<128){var i=t.Long.IntCache_[e];if(i)return i}var n=new t.Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(t.Long.IntCache_[e]=n),n},t.Long.fromNumber=function(e){return isNaN(e)?t.Long.ZERO:e<=-t.Long.TWO_PWR_63_DBL_?t.Long.MIN_VALUE:e+1>=t.Long.TWO_PWR_63_DBL_?t.Long.MAX_VALUE:e<0?t.Long.fromNumber(-e).negate():new t.Long(e%t.Long.TWO_PWR_32_DBL_|0,e/t.Long.TWO_PWR_32_DBL_|0)},t.Long.fromBits=function(e,i){return new t.Long(e,i)},t.Long.fromString=function(e,i){if(0==e.length)throw Error("number format error: empty string");var n=i||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return t.Long.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var r=t.Long.fromNumber(Math.pow(n,8)),o=t.Long.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var u=t.Long.fromNumber(Math.pow(n,a));o=o.multiply(u).add(t.Long.fromNumber(l))}else o=(o=o.multiply(r)).add(t.Long.fromNumber(l))}return o},t.Long.TWO_PWR_16_DBL_=65536,t.Long.TWO_PWR_24_DBL_=1<<24,t.Long.TWO_PWR_32_DBL_=t.Long.TWO_PWR_16_DBL_*t.Long.TWO_PWR_16_DBL_,t.Long.TWO_PWR_31_DBL_=t.Long.TWO_PWR_32_DBL_/2,t.Long.TWO_PWR_48_DBL_=t.Long.TWO_PWR_32_DBL_*t.Long.TWO_PWR_16_DBL_,t.Long.TWO_PWR_64_DBL_=t.Long.TWO_PWR_32_DBL_*t.Long.TWO_PWR_32_DBL_,t.Long.TWO_PWR_63_DBL_=t.Long.TWO_PWR_64_DBL_/2,t.Long.ZERO=t.Long.fromInt(0),t.Long.ONE=t.Long.fromInt(1),t.Long.NEG_ONE=t.Long.fromInt(-1),t.Long.MAX_VALUE=t.Long.fromBits(-1,2147483647),t.Long.MIN_VALUE=t.Long.fromBits(0,-2147483648),t.Long.TWO_PWR_24_=t.Long.fromInt(1<<24),t.Long.prototype.toInt=function(){return this.low_},t.Long.prototype.toNumber=function(){return this.high_*t.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},t.Long.prototype.hashCode=function(){return this.high_^this.low_},t.Long.prototype.toString=function(e){var i=e||10;if(i<2||36<i)throw Error("radix out of range: "+i);if(this.isZero())return"0";if(this.isNegative()){if(this.equalsLong(t.Long.MIN_VALUE)){var n=t.Long.fromNumber(i),r=this.div(n),o=r.multiply(n).subtract(this);return r.toString(i)+o.toInt().toString(i)}return"-"+this.negate().toString(i)}for(var s=t.Long.fromNumber(Math.pow(i,6)),a=(o=this,"");;){var l=o.div(s),u=o.subtract(l.multiply(s)).toInt().toString(i);if((o=l).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},t.Long.prototype.getHighBits=function(){return this.high_},t.Long.prototype.getLowBits=function(){return this.low_},t.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:t.Long.TWO_PWR_32_DBL_+this.low_},t.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equalsLong(t.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high_?i+33:i+1},t.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},t.Long.prototype.isNegative=function(){return this.high_<0},t.Long.prototype.isOdd=function(){return 1==(1&this.low_)},t.Long.prototype.equalsLong=function(t){return this.high_==t.high_&&this.low_==t.low_},t.Long.prototype.notEqualsLong=function(t){return this.high_!=t.high_||this.low_!=t.low_},t.Long.prototype.lessThan=function(t){return this.compare(t)<0},t.Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},t.Long.prototype.greaterThan=function(t){return this.compare(t)>0},t.Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},t.Long.prototype.compare=function(t){if(this.equalsLong(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.subtract(t).isNegative()?-1:1},t.Long.prototype.negate=function(){return this.equalsLong(t.Long.MIN_VALUE)?t.Long.MIN_VALUE:this.not().add(t.Long.ONE)},t.Long.prototype.add=function(e){var i=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,l=e.low_>>>16,u=0,p=0,c=0,h=0;return c+=(h+=o+(65535&e.low_))>>>16,h&=65535,p+=(c+=r+l)>>>16,c&=65535,u+=(p+=n+a)>>>16,p&=65535,u+=i+s,u&=65535,t.Long.fromBits(c<<16|h,u<<16|p)},t.Long.prototype.subtract=function(t){return this.add(t.negate())},t.Long.prototype.multiply=function(e){if(this.isZero())return t.Long.ZERO;if(e.isZero())return t.Long.ZERO;if(this.equalsLong(t.Long.MIN_VALUE))return e.isOdd()?t.Long.MIN_VALUE:t.Long.ZERO;if(e.equalsLong(t.Long.MIN_VALUE))return this.isOdd()?t.Long.MIN_VALUE:t.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(t.Long.TWO_PWR_24_)&&e.lessThan(t.Long.TWO_PWR_24_))return t.Long.fromNumber(this.toNumber()*e.toNumber());var i=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,l=e.low_>>>16,u=65535&e.low_,p=0,c=0,h=0,d=0;return h+=(d+=o*u)>>>16,d&=65535,c+=(h+=r*u)>>>16,h&=65535,c+=(h+=o*l)>>>16,h&=65535,p+=(c+=n*u)>>>16,c&=65535,p+=(c+=r*l)>>>16,c&=65535,p+=(c+=o*a)>>>16,c&=65535,p+=i*u+n*l+r*a+o*s,p&=65535,t.Long.fromBits(h<<16|d,p<<16|c)},t.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return t.Long.ZERO;if(this.equalsLong(t.Long.MIN_VALUE)){if(e.equalsLong(t.Long.ONE)||e.equalsLong(t.Long.NEG_ONE))return t.Long.MIN_VALUE;if(e.equalsLong(t.Long.MIN_VALUE))return t.Long.ONE;if((r=this.shiftRight(1).div(e).shiftLeft(1)).equalsLong(t.Long.ZERO))return e.isNegative()?t.Long.ONE:t.Long.NEG_ONE;var i=this.subtract(e.multiply(r));return r.add(i.div(e))}if(e.equalsLong(t.Long.MIN_VALUE))return t.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var n=t.Long.ZERO;for(i=this;i.greaterThanOrEqual(e);){for(var r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())),o=Math.ceil(Math.log(r)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.Long.fromNumber(r),l=a.multiply(e);l.isNegative()||l.greaterThan(i);)r-=s,l=(a=t.Long.fromNumber(r)).multiply(e);a.isZero()&&(a=t.Long.ONE),n=n.add(a),i=i.subtract(l)}return n},t.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},t.Long.prototype.not=function(){return t.Long.fromBits(~this.low_,~this.high_)},t.Long.prototype.and=function(e){return t.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},t.Long.prototype.or=function(e){return t.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},t.Long.prototype.xor=function(e){return t.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},t.Long.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var i=this.low_;if(e<32){var n=this.high_;return t.Long.fromBits(i<<e,n<<e|i>>>32-e)}return t.Long.fromBits(0,i<<e-32)},t.Long.prototype.shiftRight=function(e){if(0==(e&=63))return this;var i=this.high_;if(e<32){var n=this.low_;return t.Long.fromBits(n>>>e|i<<32-e,i>>e)}return t.Long.fromBits(i>>e-32,i>=0?0:-1)},t.Long.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var i=this.high_;if(e<32){var n=this.low_;return t.Long.fromBits(n>>>e|i<<32-e,i>>>e)}return 32==e?t.Long.fromBits(i,0):t.Long.fromBits(i>>>e-32,0)},t.Long.prototype.equals=function(e){return e instanceof t.Long&&this.equalsLong(e)},t.Long.prototype.compareTo_11rb$=t.Long.prototype.compare,t.Long.prototype.inc=function(){return this.add(t.Long.ONE)},t.Long.prototype.dec=function(){return this.add(t.Long.NEG_ONE)},t.Long.prototype.valueOf=function(){return this.toNumber()},t.Long.prototype.unaryPlus=function(){return this},t.Long.prototype.unaryMinus=t.Long.prototype.negate,t.Long.prototype.inv=t.Long.prototype.not,t.Long.prototype.rangeTo=function(e){return new t.kotlin.ranges.LongRange(this,e)},t.defineInlineFunction=function(t,e){return e},t.wrapFunction=function(t){var e=function(){return(e=t()).apply(this,arguments)};return function(){return e.apply(this,arguments)}},t.suspendCall=function(t){return t},t.coroutineResult=function(t){h()},t.coroutineReceiver=function(t){h()},t.setCoroutineResult=function(t,e){h()},t.getReifiedTypeParameterKType=function(t){h()},t.compareTo=function(e,i){var n=typeof e;return"number"===n?"number"==typeof i?t.doubleCompareTo(e,i):t.primitiveCompareTo(e,i):"string"===n||"boolean"===n?t.primitiveCompareTo(e,i):e.compareTo_11rb$(i)},t.primitiveCompareTo=function(t,e){return t<e?-1:t>e?1:0},t.doubleCompareTo=function(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e){if(0!==t)return 0;var i=1/t;return i===1/e?0:i<0?-1:1}return t!=t?e!=e?0:1:-1},t.imul=Math.imul||d,t.imulEmulated=d,e=new ArrayBuffer(8),n=new Float64Array(e),r=new Float32Array(e),o=new Int32Array(e),s=0,a=1,n[0]=-1,0!==o[s]&&(s=1,a=0),t.doubleToRawBits=function(e){return n[0]=e,t.Long.fromBits(o[s],o[a])},t.doubleFromBits=function(t){return o[s]=t.low_,o[a]=t.high_,n[0]},t.floatFromBits=function(t){return o[0]=t,r[0]},t.numberHashCode=function(t){return(0|t)===t?0|t:(n[0]=t,(31*o[a]|0)+o[s]|0)},t.ensureNotNull=function(e){return null!=e?e:t.throwNPE()},void 0===String.prototype.startsWith&&Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),void 0===String.prototype.endsWith&&Object.defineProperty(String.prototype,"endsWith",{value:function(t,e){var i=this.toString();(void 0===e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}}),void 0===Math.sign&&(Math.sign=function(t){return 0==(t=+t)||isNaN(t)?Number(t):t>0?1:-1}),void 0===Math.trunc&&(Math.trunc=function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)}),function(){var t=Math.sqrt(2220446049250313e-31),e=Math.sqrt(t),i=1/t,n=1/e;if(void 0===Math.sinh&&(Math.sinh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n+=i*i*i/6),n}var r=Math.exp(i),o=1/r;return isFinite(r)?isFinite(o)?(r-o)/2:-Math.exp(-i-Math.LN2):Math.exp(i-Math.LN2)}),void 0===Math.cosh&&(Math.cosh=function(t){var e=Math.exp(t),i=1/e;return isFinite(e)&&isFinite(i)?(e+i)/2:Math.exp(Math.abs(t)-Math.LN2)}),void 0===Math.tanh&&(Math.tanh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n-=i*i*i/3),n}var r=Math.exp(+i),o=Math.exp(-i);return r===1/0?1:o===1/0?-1:(r-o)/(r+o)}),void 0===Math.asinh){var r=function(o){if(o>=+e)return o>n?o>i?Math.log(o)+Math.LN2:Math.log(2*o+1/(2*o)):Math.log(o+Math.sqrt(o*o+1));if(o<=-e)return-r(-o);var s=o;return Math.abs(o)>=t&&(s-=o*o*o/6),s};Math.asinh=r}void 0===Math.acosh&&(Math.acosh=function(n){if(n<1)return NaN;if(n-1>=e)return n>i?Math.log(n)+Math.LN2:Math.log(n+Math.sqrt(n*n-1));var r=Math.sqrt(n-1),o=r;return r>=t&&(o-=r*r*r/12),Math.sqrt(2)*o}),void 0===Math.atanh&&(Math.atanh=function(i){if(Math.abs(i)<e){var n=i;return Math.abs(i)>t&&(n+=i*i*i/3),n}return Math.log((1+i)/(1-i))/2}),void 0===Math.log1p&&(Math.log1p=function(t){if(Math.abs(t)<e){var i=t*t,n=i*t;return-n*t/4+n/3-i/2+t}return Math.log(t+1)}),void 0===Math.expm1&&(Math.expm1=function(t){if(Math.abs(t)<e){var i=t*t,n=i*t;return n*t/24+n/6+i/2+t}return Math.exp(t)-1})}(),void 0===Math.hypot&&(Math.hypot=function(){for(var t=0,e=arguments.length,i=0;i<e;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)}),void 0===Math.log10&&(Math.log10=function(t){return Math.log(t)*Math.LOG10E}),void 0===Math.log2&&(Math.log2=function(t){return Math.log(t)*Math.LOG2E}),void 0===Math.clz32&&(Math.clz32=(l=Math.log,u=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(l(e)/u|0)|0})),void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=n>>0,o=r<0?Math.max(i+r,0):Math.min(r,i),s=arguments[2],a=void 0===s?i:s>>0,l=a<0?Math.max(i+a,0):Math.min(a,i);o<l;)e[o]=t,o++;return e}}),function(){function t(t,e){return t<0?Math.max(0,t+e):Math.min(t,e)}function e(e,i){return void 0===i&&(i=this.length),e=t(e||0,this.length),i=Math.max(e,t(i,this.length)),new this.constructor(this.subarray(e,i))}for(var i=[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array],n=0;n<i.length;++n)void 0===(s=i[n]).prototype.fill&&Object.defineProperty(s.prototype,"fill",{value:Array.prototype.fill}),void 0===s.prototype.slice&&Object.defineProperty(s.prototype,"slice",{value:e});try{(function(){}).apply(null,new Int32Array(0))}catch(t){var r=Function.prototype.apply;Object.defineProperty(Function.prototype,"apply",{value:function(t,e){return r.call(this,t,[].slice.call(e))}})}for(n=0;n<i.length;++n)void 0===(s=i[n]).prototype.map&&Object.defineProperty(s.prototype,"map",{value:function(t,e){return[].slice.call(this).map(t,e)}});var o=function(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e){if(0!==t)return 0;var i=1/t;return i===1/e?0:i<0?-1:1}return t!=t?e!=e?0:1:-1};for(n=0;n<i.length;++n){var s;void 0===(s=i[n]).prototype.sort&&Object.defineProperty(s.prototype,"sort",{value:function(t){return Array.prototype.sort.call(this,t||o)}})}}(),t.Kind={CLASS:"class",INTERFACE:"interface",OBJECT:"object"},t.callGetter=function(e,i,n){var r=Object.getOwnPropertyDescriptor(i,n);return null!=r&&null!=r.get?r.get.call(e):null!=(r=Object.getOwnPropertyDescriptor(e,n))&&"value"in r?e[n]:t.callGetter(e,Object.getPrototypeOf(i),n)},t.isType=function(e,i){if(i===Object)switch(typeof e){case"string":case"number":case"boolean":case"function":return!0;default:return e instanceof Object}if(null==e||null==i||"object"!=typeof e&&"function"!=typeof e)return!1;if("function"==typeof i&&e instanceof i)return!0;var n=Object.getPrototypeOf(i),r=null!=n?n.constructor:null;if(null!=r&&"$metadata$"in r&&r.$metadata$.kind===t.Kind.OBJECT)return e===i;var o=i.$metadata$;return null==o?e instanceof i:o.kind===t.Kind.INTERFACE&&null!=e.constructor&&function t(e,i){if(e===i)return!0;var n=e.$metadata$;if(null!=n)for(var r=n.interfaces,o=0;o<r.length;o++)if(t(r[o],i))return!0;var s=null!=e.prototype?Object.getPrototypeOf(e.prototype):null,a=null!=s?s.constructor:null;return null!=a&&t(a,i)}(e.constructor,i)},t.isNumber=function(e){return"number"==typeof e||e instanceof t.Long},t.isChar=function(e){return e instanceof t.BoxedChar},t.isComparable=function(e){var i=typeof e;return"string"===i||"boolean"===i||t.isNumber(e)||t.isType(e,t.kotlin.Comparable)},t.isCharSequence=function(e){return"string"==typeof e||t.isType(e,t.kotlin.CharSequence)},function(){"use strict";var e=t.Kind.INTERFACE,i=t.Kind.OBJECT,n=t.Kind.CLASS,r=(t.defineInlineFunction,t.wrapFunction,t.equals),o=t.Long.ZERO;function s(){}function a(){c(),this.name$="",this.ordinal$=0}function l(){u=this}s.$metadata$={kind:e,simpleName:"Comparable",interfaces:[]},Object.defineProperty(a.prototype,"name",{configurable:!0,get:function(){return this.name$}}),Object.defineProperty(a.prototype,"ordinal",{configurable:!0,get:function(){return this.ordinal$}}),a.prototype.compareTo_11rb$=function(e){return t.primitiveCompareTo(this.ordinal,e.ordinal)},a.prototype.equals=function(t){return this===t},a.prototype.hashCode=function(){return t.identityHashCode(this)},a.prototype.toString=function(){return this.name},l.$metadata$={kind:i,simpleName:"Companion",interfaces:[]};var u=null;function c(){return null===u&&new l,u}function h(t,e){var i;i=t.length-1|0;for(var n=0;n<=i;n++)t[n]=e;return t}function d(){f=this,this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}a.$metadata$={kind:n,simpleName:"Enum",interfaces:[s]},d.$metadata$={kind:i,simpleName:"DoubleCompanionObject",interfaces:[]};var f=null;function _(){m=this,this.MIN_VALUE=14e-46,this.MAX_VALUE=34028235e31,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=4,this.SIZE_BITS=32}_.$metadata$={kind:i,simpleName:"FloatCompanionObject",interfaces:[]};var m=null;function $(){y=this,this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}$.$metadata$={kind:i,simpleName:"IntCompanionObject",interfaces:[]};var y=null;function v(){g=this,this.MIN_VALUE=t.Long.MIN_VALUE,this.MAX_VALUE=t.Long.MAX_VALUE,this.SIZE_BYTES=8,this.SIZE_BITS=64}v.$metadata$={kind:i,simpleName:"LongCompanionObject",interfaces:[]};var g=null;function b(){x=this,this.MIN_VALUE=-32768,this.MAX_VALUE=32767,this.SIZE_BYTES=2,this.SIZE_BITS=16}b.$metadata$={kind:i,simpleName:"ShortCompanionObject",interfaces:[]};var x=null;function w(){z=this,this.MIN_VALUE=-128,this.MAX_VALUE=127,this.SIZE_BYTES=1,this.SIZE_BITS=8}w.$metadata$={kind:i,simpleName:"ByteCompanionObject",interfaces:[]};var z=null;function k(){S=this,this.MIN_VALUE=0,this.MAX_VALUE=65535,this.MIN_HIGH_SURROGATE=55296,this.MAX_HIGH_SURROGATE=56319,this.MIN_LOW_SURROGATE=56320,this.MAX_LOW_SURROGATE=57343,this.MIN_SURROGATE=this.MIN_HIGH_SURROGATE,this.MAX_SURROGATE=this.MAX_LOW_SURROGATE,this.SIZE_BYTES=2,this.SIZE_BITS=16}k.$metadata$={kind:i,simpleName:"CharCompanionObject",interfaces:[]};var S=null;function C(){N=this}C.$metadata$={kind:i,simpleName:"StringCompanionObject",interfaces:[]};var N=null;function E(){T=this}E.$metadata$={kind:i,simpleName:"BooleanCompanionObject",interfaces:[]};var T=null,P=p.kotlin||(p.kotlin={});P.Comparable=s,Object.defineProperty(a,"Companion",{get:c}),P.Enum=a,p.newArray=function(t,e){return h(Array(t),e)},p.booleanArray=function(t,e){var i,n=Array(t);if(n.$type$="BooleanArray",null==e||r(e,!0))i=h(n,!1);else if(r(e,!1))i=n;else{var o;o=n.length-1|0;for(var s=0;s<=o;s++)n[s]=e(s);i=n}return i},p.charArray=function(t,e){var i,n=new Uint16Array(t);if(n.$type$="CharArray",null==e||r(e,!0)||r(e,!1))i=n;else{var o;o=n.length-1|0;for(var s=0;s<=o;s++)n[s]=e(s);i=n}return i},p.longArray=function(t,e){var i,n=Array(t);if(n.$type$="LongArray",null==e||r(e,!0))i=h(n,o);else if(r(e,!1))i=n;else{var s;s=n.length-1|0;for(var a=0;a<=s;a++)n[a]=e(a);i=n}return i};var O=P.js||(P.js={}),M=O.internal||(O.internal={});Object.defineProperty(M,"DoubleCompanionObject",{get:function(){return null===f&&new d,f}}),Object.defineProperty(M,"FloatCompanionObject",{get:function(){return null===m&&new _,m}}),Object.defineProperty(M,"IntCompanionObject",{get:function(){return null===y&&new $,y}}),Object.defineProperty(M,"LongCompanionObject",{get:function(){return null===g&&new v,g}}),Object.defineProperty(M,"ShortCompanionObject",{get:function(){return null===x&&new b,x}}),Object.defineProperty(M,"ByteCompanionObject",{get:function(){return null===z&&new w,z}}),Object.defineProperty(M,"CharCompanionObject",{get:function(){return null===S&&new k,S}}),Object.defineProperty(M,"StringCompanionObject",{get:function(){return null===N&&new C,N}}),Object.defineProperty(M,"BooleanCompanionObject",{get:function(){return null===T&&new E,T}})}(),function(){"use strict";var e,n=t.defineInlineFunction,r=t.wrapFunction,o=t.equals,s=t.toBoxedChar,a=t.unboxChar,l=t.kotlin.js.internal.DoubleCompanionObject,u=t.Long.ZERO,c=Math,h=t.Kind.CLASS,d=t.toChar,f=t.Long.NEG_ONE,_=t.toByte,m=(t.Long.fromInt(-128),t.Long.fromInt(127),t.kotlin.js.internal.ByteCompanionObject),$=t.numberToInt,y=(t.Long.fromInt(-2147483648),t.Long.fromInt(2147483647),t.Long.MIN_VALUE),v=t.Long.MAX_VALUE,g=t.toShort,b=(t.Long.fromInt(-32768),t.Long.fromInt(32767),t.kotlin.js.internal.ShortCompanionObject),x=t.toString,w=(t.getCallableRef,t.arrayEquals,t.arrayHashCode,t.Long.fromInt(255),new t.Long(-1,0)),z=(t.Long.fromInt(65535),t.Kind.INTERFACE),k=Object,S=t.Kind.OBJECT,C=t.Long.ONE,N=t.kotlin.Enum,E=t.kotlin.Comparable,T=t.ensureNotNull,P=t.throwCCE,O=Error,M=t.arrayToString,j=t.hashCode,A=t.doubleToRawBits,I=t.kotlin.js.internal.FloatCompanionObject,R=t.kotlin.js.internal.CharCompanionObject,L=new t.Long(-1478467534,-1720727600),D=new t.Long(-888910638,1920087921),q=new t.Long(1993859828,793161749),F=new t.Long(1,-2147483648),B=new t.Long(1908874354,-59652324),U=t.Long.fromInt(2047);function V(t,e){return G(t,e)>=0}function G(t,e){if(null==e){for(var i=0;i!==t.length;++i)if(null==t[i])return i}else for(var n=0;n!==t.length;++n)if(o(e,t[n]))return n;return-1}function H(t,e){var i,n;if(null==e)for(i=$t(X(t)).iterator();i.hasNext();){var r=i.next();if(null==t[r])return r}else for(n=$t(X(t)).iterator();n.hasNext();){var s=n.next();if(o(e,t[s]))return s}return-1}function W(t){var e;switch(t.length){case 0:throw new Ni("Array is empty.");case 1:e=t[0];break;default:throw yi("Array has more than one element.")}return e}function X(t){return new be(0,K(t))}function K(t){return t.length-1|0}function Y(t){return t.length-1|0}function Z(t){return t.length-1|0}function J(t,e){var i;for(i=0;i!==t.length;++i){var n=t[i];e.add_11rb$(n)}return e}function Q(t){return dn(Yo(t))}function tt(t){var e;switch(t.length){case 0:e=Rs();break;case 1:e=Hi(t[0]);break;default:e=J(t,Xn(t.length))}return e}function et(t,e,i,n,r,o,s,a){var l;void 0===i&&(i=", "),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=-1),void 0===s&&(s="..."),void 0===a&&(a=null),e.append_gw00v9$(n);var u=0;for(l=0;l!==t.length;++l){var p=t[l];if((u=u+1|0)>1&&e.append_gw00v9$(i),!(o<0||u<=o))break;null!=a?e.append_gw00v9$(a(p)):e.append_gw00v9$(p.toString())}return o>=0&&u>o&&e.append_gw00v9$(s),e.append_gw00v9$(r),e}function it(t){if(t.isEmpty())throw new Ni("List is empty.");return t.get_za3lpa$(0)}function nt(e,i){var n;if(t.isType(e,At))return e.indexOf_11rb$(i);var r=0;for(n=e.iterator();n.hasNext();){var s=n.next();if(Ki(r),o(i,s))return r;r=r+1|0}return-1}function rt(e){if(t.isType(e,At))return ot(e);var i=e.iterator();if(!i.hasNext())throw new Ni("Collection is empty.");var n=i.next();if(i.hasNext())throw yi("Collection has more than one element.");return n}function ot(t){var e;switch(t.size){case 0:throw new Ni("List is empty.");case 1:e=t.get_za3lpa$(0);break;default:throw yi("List has more than one element.")}return e}function st(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();null!=n&&e.add_11rb$(n)}return e}function at(t,e){for(var i=ts(t);i>=1;i--){var n=e.nextInt_za3lpa$(i+1|0);t.set_wxm5ur$(n,t.set_wxm5ur$(i,t.get_za3lpa$(n)))}}function lt(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n)}return e}function ut(e){var i;if(t.isType(e,Mt)){switch(e.size){case 0:i=Jo();break;case 1:i=Gi(t.isType(e,At)?e.get_za3lpa$(0):e.iterator().next());break;default:i=ct(e)}return i}return es(pt(e))}function pt(e){return t.isType(e,Mt)?ct(e):lt(e,cn())}function ct(t){return dn(t)}function ht(e){return t.isType(e,Mt)?Hn(e):lt(e,Gn())}function dt(e){var i=e.iterator();if(!i.hasNext())return null;for(var n=i.next();i.hasNext();){var r=i.next();t.compareTo(n,r)>0&&(n=r)}return n}function ft(t,e,i,n,r,o,s,a){var l;void 0===i&&(i=", "),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=-1),void 0===s&&(s="..."),void 0===a&&(a=null),e.append_gw00v9$(n);var u=0;for(l=t.iterator();l.hasNext();){var p=l.next();if((u=u+1|0)>1&&e.append_gw00v9$(i),!(o<0||u<=o))break;Ea(e,p,a)}return o>=0&&u>o&&e.append_gw00v9$(s),e.append_gw00v9$(r),e}function _t(t,e,i,n,r,o,s){return void 0===e&&(e=", "),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=-1),void 0===o&&(o="..."),void 0===s&&(s=null),ft(t,lo(),e,i,n,r,o,s).toString()}function mt(t,e){return ce().fromClosedRange_qt1dr2$(t,e,-1)}function $t(t){return ce().fromClosedRange_qt1dr2$(t.last,t.first,0|-t.step)}function yt(t,e){return e<=-2147483648?ze().EMPTY:new be(t,e-1|0)}function vt(t,e){return t<e?e:t}function gt(t,e){return t>e?e:t}function bt(t,e,i){if(e>i)throw yi("Cannot coerce value to an empty range: maximum "+i+" is less than minimum "+e+".");return t<e?e:t>i?i:t}function xt(t){this.closure$iterator=t}function wt(t,e){var i;for(i=t.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n)}return e}function zt(t){return es(kt(t))}function kt(t){return wt(t,cn())}function St(t,e){return new Ts(t,e)}function Ct(t){return new xt((e=t,function(){return e.iterator()}));var e}function Nt(t,e){if(!(e>=0))throw yi(("Requested character count "+e+" is less than zero.").toString());return t.substring(gt(e,t.length))}function Et(){}function Tt(){}function Pt(){}function Ot(){}function Mt(){}function jt(){}function At(){}function It(){}function Rt(){}function Lt(){}function Dt(){}function qt(){}function Ft(){}function Bt(){}function Ut(){}function Vt(){}function Gt(){}function Ht(){}function Wt(){}function Xt(){}function Kt(){}function Yt(){}function Zt(){}function Jt(){}function Qt(){}function te(){}function ee(t,e,i){Xt.call(this),this.step=i,this.finalElement_0=0|e,this.hasNext_0=this.step>0?t<=e:t>=e,this.next_0=this.hasNext_0?0|t:this.finalElement_0}function ie(t,e,i){Yt.call(this),this.step=i,this.finalElement_0=e,this.hasNext_0=this.step>0?t<=e:t>=e,this.next_0=this.hasNext_0?t:this.finalElement_0}function ne(t,e,i){Zt.call(this),this.step=i,this.finalElement_0=e,this.hasNext_0=this.step.toNumber()>0?t.compareTo_11rb$(e)<=0:t.compareTo_11rb$(e)>=0,this.next_0=this.hasNext_0?t:this.finalElement_0}function re(t,e,i){if(ae(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=d(Ie(0|t,0|e,i)),this.step=i}function oe(){se=this}di.prototype=Object.create(O.prototype),di.prototype.constructor=di,_i.prototype=Object.create(di.prototype),_i.prototype.constructor=_i,ee.prototype=Object.create(Xt.prototype),ee.prototype.constructor=ee,ie.prototype=Object.create(Yt.prototype),ie.prototype.constructor=ie,ne.prototype=Object.create(Zt.prototype),ne.prototype.constructor=ne,$e.prototype=Object.create(re.prototype),$e.prototype.constructor=$e,be.prototype=Object.create(le.prototype),be.prototype.constructor=be,ke.prototype=Object.create(he.prototype),ke.prototype.constructor=ke,De.prototype=Object.create(te.prototype),De.prototype.constructor=De,Fe.prototype=Object.create(Wt.prototype),Fe.prototype.constructor=Fe,Ue.prototype=Object.create(Kt.prototype),Ue.prototype.constructor=Ue,Ge.prototype=Object.create(Xt.prototype),Ge.prototype.constructor=Ge,We.prototype=Object.create(Yt.prototype),We.prototype.constructor=We,Ke.prototype=Object.create(Jt.prototype),Ke.prototype.constructor=Ke,Ze.prototype=Object.create(Qt.prototype),Ze.prototype.constructor=Ze,Qe.prototype=Object.create(Zt.prototype),Qe.prototype.constructor=Qe,ci.prototype=Object.create(O.prototype),ci.prototype.constructor=ci,$i.prototype=Object.create(_i.prototype),$i.prototype.constructor=$i,vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,bi.prototype=Object.create(_i.prototype),bi.prototype.constructor=bi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,ki.prototype=Object.create($i.prototype),ki.prototype.constructor=ki,Si.prototype=Object.create(_i.prototype),Si.prototype.constructor=Si,Ci.prototype=Object.create(_i.prototype),Ci.prototype.constructor=Ci,Ni.prototype=Object.create(_i.prototype),Ni.prototype.constructor=Ni,Ti.prototype=Object.create(_i.prototype),Ti.prototype.constructor=Ti,Pi.prototype=Object.create(_i.prototype),Pi.prototype.constructor=Pi,Mi.prototype=Object.create(_i.prototype),Mi.prototype.constructor=Mi,Zi.prototype=Object.create(Co.prototype),Zi.prototype.constructor=Zi,tn.prototype=Object.create(Qi.prototype),tn.prototype.constructor=tn,Ji.prototype=Object.create(Zi.prototype),Ji.prototype.constructor=Ji,en.prototype=Object.create(Ji.prototype),en.prototype.constructor=en,un.prototype=Object.create(Zi.prototype),un.prototype.constructor=un,on.prototype=Object.create(un.prototype),on.prototype.constructor=on,an.prototype=Object.create(Zi.prototype),an.prototype.constructor=an,nn.prototype=Object.create(Oo.prototype),nn.prototype.constructor=nn,pn.prototype=Object.create(Ji.prototype),pn.prototype.constructor=pn,zn.prototype=Object.create(un.prototype),zn.prototype.constructor=zn,wn.prototype=Object.create(nn.prototype),wn.prototype.constructor=wn,En.prototype=Object.create(un.prototype),En.prototype.constructor=En,Ln.prototype=Object.create(rn.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(un.prototype),Dn.prototype.constructor=Dn,Rn.prototype=Object.create(wn.prototype),Rn.prototype.constructor=Rn,Vn.prototype=Object.create(En.prototype),Vn.prototype.constructor=Vn,Zn.prototype=Object.create(Yn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Yn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Jn.prototype),Qn.prototype.constructor=Qn,mr.prototype=Object.create(_r.prototype),mr.prototype.constructor=mr,$r.prototype=Object.create(_r.prototype),$r.prototype.constructor=$r,yr.prototype=Object.create(_r.prototype),yr.prototype.constructor=yr,oo.prototype=Object.create(di.prototype),oo.prototype.constructor=oo,qo.prototype=Object.create(Co.prototype),qo.prototype.constructor=qo,Mo.prototype=Object.create(qo.prototype),Mo.prototype.constructor=Mo,Ao.prototype=Object.create(Co.prototype),Ao.prototype.constructor=Ao,Es.prototype=Object.create(Ns.prototype),Es.prototype.constructor=Es,la.prototype=Object.create(N.prototype),la.prototype.constructor=la,fa.prototype=Object.create(da.prototype),fa.prototype.constructor=fa,za.prototype=Object.create(da.prototype),za.prototype.constructor=za,Ua.prototype=Object.create(Xt.prototype),Ua.prototype.constructor=Ua,gl.prototype=Object.create(ci.prototype),gl.prototype.constructor=gl,Ol.prototype=Object.create(Il.prototype),Ol.prototype.constructor=Ol,ql.prototype=Object.create(Fl.prototype),ql.prototype.constructor=ql,Wl.prototype=Object.create(Zl.prototype),Wl.prototype.constructor=Wl,eu.prototype=Object.create(Bl.prototype),eu.prototype.constructor=eu,xt.prototype.iterator=function(){return this.closure$iterator()},xt.$metadata$={kind:h,interfaces:[Pt]},Et.$metadata$={kind:z,simpleName:"Annotation",interfaces:[]},Tt.$metadata$={kind:z,simpleName:"CharSequence",interfaces:[]},Pt.$metadata$={kind:z,simpleName:"Iterable",interfaces:[]},Ot.$metadata$={kind:z,simpleName:"MutableIterable",interfaces:[Pt]},Mt.$metadata$={kind:z,simpleName:"Collection",interfaces:[Pt]},jt.$metadata$={kind:z,simpleName:"MutableCollection",interfaces:[Ot,Mt]},At.$metadata$={kind:z,simpleName:"List",interfaces:[Mt]},It.$metadata$={kind:z,simpleName:"MutableList",interfaces:[jt,At]},Rt.$metadata$={kind:z,simpleName:"Set",interfaces:[Mt]},Lt.$metadata$={kind:z,simpleName:"MutableSet",interfaces:[jt,Rt]},Dt.prototype.getOrDefault_xwzc9p$=function(t,e){return null},qt.$metadata$={kind:z,simpleName:"Entry",interfaces:[]},Dt.$metadata$={kind:z,simpleName:"Map",interfaces:[]},Ft.prototype.remove_xwzc9p$=function(t,e){return!0},Bt.$metadata$={kind:z,simpleName:"MutableEntry",interfaces:[qt]},Ft.$metadata$={kind:z,simpleName:"MutableMap",interfaces:[Dt]},Ut.$metadata$={kind:z,simpleName:"Iterator",interfaces:[]},Vt.$metadata$={kind:z,simpleName:"MutableIterator",interfaces:[Ut]},Gt.$metadata$={kind:z,simpleName:"ListIterator",interfaces:[Ut]},Ht.$metadata$={kind:z,simpleName:"MutableListIterator",interfaces:[Vt,Gt]},Wt.prototype.next=function(){return this.nextByte()},Wt.$metadata$={kind:h,simpleName:"ByteIterator",interfaces:[Ut]},Xt.prototype.next=function(){return s(this.nextChar())},Xt.$metadata$={kind:h,simpleName:"CharIterator",interfaces:[Ut]},Kt.prototype.next=function(){return this.nextShort()},Kt.$metadata$={kind:h,simpleName:"ShortIterator",interfaces:[Ut]},Yt.prototype.next=function(){return this.nextInt()},Yt.$metadata$={kind:h,simpleName:"IntIterator",interfaces:[Ut]},Zt.prototype.next=function(){return this.nextLong()},Zt.$metadata$={kind:h,simpleName:"LongIterator",interfaces:[Ut]},Jt.prototype.next=function(){return this.nextFloat()},Jt.$metadata$={kind:h,simpleName:"FloatIterator",interfaces:[Ut]},Qt.prototype.next=function(){return this.nextDouble()},Qt.$metadata$={kind:h,simpleName:"DoubleIterator",interfaces:[Ut]},te.prototype.next=function(){return this.nextBoolean()},te.$metadata$={kind:h,simpleName:"BooleanIterator",interfaces:[Ut]},ee.prototype.hasNext=function(){return this.hasNext_0},ee.prototype.nextChar=function(){var t=this.next_0;if(t===this.finalElement_0){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0+this.step|0;return d(t)},ee.$metadata$={kind:h,simpleName:"CharProgressionIterator",interfaces:[Xt]},ie.prototype.hasNext=function(){return this.hasNext_0},ie.prototype.nextInt=function(){var t=this.next_0;if(t===this.finalElement_0){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0+this.step|0;return t},ie.$metadata$={kind:h,simpleName:"IntProgressionIterator",interfaces:[Yt]},ne.prototype.hasNext=function(){return this.hasNext_0},ne.prototype.nextLong=function(){var t=this.next_0;if(o(t,this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=this.next_0.add(this.step);return t},ne.$metadata$={kind:h,simpleName:"LongProgressionIterator",interfaces:[Zt]},re.prototype.iterator=function(){return new ee(this.first,this.last,this.step)},re.prototype.isEmpty=function(){return this.step>0?this.first>this.last:this.first<this.last},re.prototype.equals=function(e){return t.isType(e,re)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last&&this.step===e.step)},re.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*(0|this.first)|0)+(0|this.last)|0)|0)+this.step|0},re.prototype.toString=function(){return this.step>0?String.fromCharCode(this.first)+".."+String.fromCharCode(this.last)+" step "+this.step:String.fromCharCode(this.first)+" downTo "+String.fromCharCode(this.last)+" step "+(0|-this.step)},oe.prototype.fromClosedRange_ayra44$=function(t,e,i){return new re(t,e,i)},oe.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var se=null;function ae(){return null===se&&new oe,se}function le(t,e,i){if(ce(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=Ie(t,e,i),this.step=i}function ue(){pe=this}re.$metadata$={kind:h,simpleName:"CharProgression",interfaces:[Pt]},le.prototype.iterator=function(){return new ie(this.first,this.last,this.step)},le.prototype.isEmpty=function(){return this.step>0?this.first>this.last:this.first<this.last},le.prototype.equals=function(e){return t.isType(e,le)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last&&this.step===e.step)},le.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*this.first|0)+this.last|0)|0)+this.step|0},le.prototype.toString=function(){return this.step>0?this.first.toString()+".."+this.last+" step "+this.step:this.first.toString()+" downTo "+this.last+" step "+(0|-this.step)},ue.prototype.fromClosedRange_qt1dr2$=function(t,e,i){return new le(t,e,i)},ue.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var pe=null;function ce(){return null===pe&&new ue,pe}function he(t,e,i){if(_e(),o(i,u))throw yi("Step must be non-zero.");if(o(i,y))throw yi("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=Re(t,e,i),this.step=i}function de(){fe=this}le.$metadata$={kind:h,simpleName:"IntProgression",interfaces:[Pt]},he.prototype.iterator=function(){return new ne(this.first,this.last,this.step)},he.prototype.isEmpty=function(){return this.step.toNumber()>0?this.first.compareTo_11rb$(this.last)>0:this.first.compareTo_11rb$(this.last)<0},he.prototype.equals=function(e){return t.isType(e,he)&&(this.isEmpty()&&e.isEmpty()||o(this.first,e.first)&&o(this.last,e.last)&&o(this.step,e.step))},he.prototype.hashCode=function(){return this.isEmpty()?-1:t.Long.fromInt(31).multiply(t.Long.fromInt(31).multiply(this.first.xor(this.first.shiftRightUnsigned(32))).add(this.last.xor(this.last.shiftRightUnsigned(32)))).add(this.step.xor(this.step.shiftRightUnsigned(32))).toInt()},he.prototype.toString=function(){return this.step.toNumber()>0?this.first.toString()+".."+this.last.toString()+" step "+this.step.toString():this.first.toString()+" downTo "+this.last.toString()+" step "+this.step.unaryMinus().toString()},de.prototype.fromClosedRange_b9bd0d$=function(t,e,i){return new he(t,e,i)},de.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var fe=null;function _e(){return null===fe&&new de,fe}function me(){}function $e(t,e){ge(),re.call(this,t,e,1)}function ye(){ve=this,this.EMPTY=new $e(d(1),d(0))}he.$metadata$={kind:h,simpleName:"LongProgression",interfaces:[Pt]},me.prototype.contains_mef7kx$=function(e){return t.compareTo(e,this.start)>=0&&t.compareTo(e,this.endInclusive)<=0},me.prototype.isEmpty=function(){return t.compareTo(this.start,this.endInclusive)>0},me.$metadata$={kind:z,simpleName:"ClosedRange",interfaces:[]},Object.defineProperty($e.prototype,"start",{configurable:!0,get:function(){return s(this.first)}}),Object.defineProperty($e.prototype,"endInclusive",{configurable:!0,get:function(){return s(this.last)}}),$e.prototype.contains_mef7kx$=function(t){return this.first<=t&&t<=this.last},$e.prototype.isEmpty=function(){return this.first>this.last},$e.prototype.equals=function(e){return t.isType(e,$e)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last)},$e.prototype.hashCode=function(){return this.isEmpty()?-1:(31*(0|this.first)|0)+(0|this.last)|0},$e.prototype.toString=function(){return String.fromCharCode(this.first)+".."+String.fromCharCode(this.last)},ye.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var ve=null;function ge(){return null===ve&&new ye,ve}function be(t,e){ze(),le.call(this,t,e,1)}function xe(){we=this,this.EMPTY=new be(1,0)}$e.$metadata$={kind:h,simpleName:"CharRange",interfaces:[me,re]},Object.defineProperty(be.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(be.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),be.prototype.contains_mef7kx$=function(t){return this.first<=t&&t<=this.last},be.prototype.isEmpty=function(){return this.first>this.last},be.prototype.equals=function(e){return t.isType(e,be)&&(this.isEmpty()&&e.isEmpty()||this.first===e.first&&this.last===e.last)},be.prototype.hashCode=function(){return this.isEmpty()?-1:(31*this.first|0)+this.last|0},be.prototype.toString=function(){return this.first.toString()+".."+this.last},xe.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var we=null;function ze(){return null===we&&new xe,we}function ke(t,e){Ne(),he.call(this,t,e,C)}function Se(){Ce=this,this.EMPTY=new ke(C,u)}be.$metadata$={kind:h,simpleName:"IntRange",interfaces:[me,le]},Object.defineProperty(ke.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(ke.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),ke.prototype.contains_mef7kx$=function(t){return this.first.compareTo_11rb$(t)<=0&&t.compareTo_11rb$(this.last)<=0},ke.prototype.isEmpty=function(){return this.first.compareTo_11rb$(this.last)>0},ke.prototype.equals=function(e){return t.isType(e,ke)&&(this.isEmpty()&&e.isEmpty()||o(this.first,e.first)&&o(this.last,e.last))},ke.prototype.hashCode=function(){return this.isEmpty()?-1:t.Long.fromInt(31).multiply(this.first.xor(this.first.shiftRightUnsigned(32))).add(this.last.xor(this.last.shiftRightUnsigned(32))).toInt()},ke.prototype.toString=function(){return this.first.toString()+".."+this.last.toString()},Se.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ce=null;function Ne(){return null===Ce&&new Se,Ce}function Ee(){Te=this}ke.$metadata$={kind:h,simpleName:"LongRange",interfaces:[me,he]},Ee.prototype.toString=function(){return"kotlin.Unit"},Ee.$metadata$={kind:S,simpleName:"Unit",interfaces:[]};var Te=null;function Pe(){return null===Te&&new Ee,Te}function Oe(t,e){var i=t%e;return i>=0?i:i+e|0}function Me(t,e){var i=t.modulo(e);return i.toNumber()>=0?i:i.add(e)}function je(t,e,i){return Oe(Oe(t,i)-Oe(e,i)|0,i)}function Ae(t,e,i){return Me(Me(t,i).subtract(Me(e,i)),i)}function Ie(t,e,i){if(i>0)return t>=e?e:e-je(e,t,i)|0;if(i<0)return t<=e?e:e+je(t,e,0|-i)|0;throw yi("Step is zero.")}function Re(t,e,i){if(i.toNumber()>0)return t.compareTo_11rb$(e)>=0?e:e.subtract(Ae(e,t,i));if(i.toNumber()<0)return t.compareTo_11rb$(e)<=0?e:e.add(Ae(t,e,i.unaryMinus()));throw yi("Step is zero.")}function Le(t){this.closure$arr=t,this.index=0}function De(t){this.closure$array=t,te.call(this),this.index=0}function qe(t){return new De(t)}function Fe(t){this.closure$array=t,Wt.call(this),this.index=0}function Be(t){return new Fe(t)}function Ue(t){this.closure$array=t,Kt.call(this),this.index=0}function Ve(t){return new Ue(t)}function Ge(t){this.closure$array=t,Xt.call(this),this.index=0}function He(t){return new Ge(t)}function We(t){this.closure$array=t,Yt.call(this),this.index=0}function Xe(t){return new We(t)}function Ke(t){this.closure$array=t,Jt.call(this),this.index=0}function Ye(t){return new Ke(t)}function Ze(t){this.closure$array=t,Qt.call(this),this.index=0}function Je(t){return new Ze(t)}function Qe(t){this.closure$array=t,Zt.call(this),this.index=0}function ti(t){return new Qe(t)}function ei(t){this.c=t}function ii(t){this.resultContinuation_0=t,this.state_0=0,this.exceptionState_0=0,this.result_0=null,this.exception_0=null,this.finallyPath_0=null,this.context_hxcuhl$_0=this.resultContinuation_0.context,this.intercepted__0=null}function ni(){oi=this}Le.prototype.hasNext=function(){return this.index<this.closure$arr.length},Le.prototype.next=function(){var t;if(this.index<this.closure$arr.length)return this.closure$arr[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Le.$metadata$={kind:h,interfaces:[Ut]},De.prototype.hasNext=function(){return this.index<this.closure$array.length},De.prototype.nextBoolean=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},De.$metadata$={kind:h,interfaces:[te]},Fe.prototype.hasNext=function(){return this.index<this.closure$array.length},Fe.prototype.nextByte=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Fe.$metadata$={kind:h,interfaces:[Wt]},Ue.prototype.hasNext=function(){return this.index<this.closure$array.length},Ue.prototype.nextShort=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ue.$metadata$={kind:h,interfaces:[Kt]},Ge.prototype.hasNext=function(){return this.index<this.closure$array.length},Ge.prototype.nextChar=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ge.$metadata$={kind:h,interfaces:[Xt]},We.prototype.hasNext=function(){return this.index<this.closure$array.length},We.prototype.nextInt=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},We.$metadata$={kind:h,interfaces:[Yt]},Ke.prototype.hasNext=function(){return this.index<this.closure$array.length},Ke.prototype.nextFloat=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ke.$metadata$={kind:h,interfaces:[Jt]},Ze.prototype.hasNext=function(){return this.index<this.closure$array.length},Ze.prototype.nextDouble=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Ze.$metadata$={kind:h,interfaces:[Qt]},Qe.prototype.hasNext=function(){return this.index<this.closure$array.length},Qe.prototype.nextLong=function(){var t;if(this.index<this.closure$array.length)return this.closure$array[(t=this.index,this.index=t+1|0,t)];throw new Ni(this.index.toString())},Qe.$metadata$={kind:h,interfaces:[Zt]},ei.prototype.equals=function(e){return t.isType(e,ei)&&this.c===e.c},ei.prototype.hashCode=function(){return this.c},ei.prototype.toString=function(){return String.fromCharCode(a(this.c))},ei.prototype.compareTo_11rb$=function(t){return this.c-t},ei.prototype.valueOf=function(){return this.c},ei.$metadata$={kind:h,simpleName:"BoxedChar",interfaces:[E]},Object.defineProperty(ii.prototype,"context",{configurable:!0,get:function(){return this.context_hxcuhl$_0}}),ii.prototype.intercepted=function(){var t,e,i,n;if(null!=(i=this.intercepted__0))n=i;else{var r=null!=(e=null!=(t=this.context.get_j3r2sn$(Us()))?t.interceptContinuation_wj8d80$(this):null)?e:this;this.intercepted__0=r,n=r}return n},ii.prototype.resumeWith_tl1gpc$=function(e){for(var i,n={v:this},r={v:e.isFailure?null:null==(i=e.value)||t.isType(i,k)?i:P()},o={v:e.exceptionOrNull()};;){var s,a,l=n.v,u=l.resultContinuation_0;null==o.v?l.result_0=r.v:(l.state_0=l.exceptionState_0,l.exception_0=o.v);try{var p=l.doResume();if(p===aa())return;r.v=p,o.v=null}catch(t){r.v=null,o.v=t}if(l.releaseIntercepted_0(),!t.isType(u,ii))return null!=(s=o.v)?(u.resumeWith_tl1gpc$(new dl(yl(s))),a=Ee):a=null,void(null==a&&u.resumeWith_tl1gpc$(new dl(r.v)));n.v=u}},ii.prototype.releaseIntercepted_0=function(){var t=this.intercepted__0;null!=t&&t!==this&&T(this.context.get_j3r2sn$(Us())).releaseInterceptedContinuation_k98bjh$(t),this.intercepted__0=si()},ii.$metadata$={kind:h,simpleName:"CoroutineImpl",interfaces:[Ds]},Object.defineProperty(ni.prototype,"context",{configurable:!0,get:function(){throw gi("This continuation is already complete".toString())}}),ni.prototype.resumeWith_tl1gpc$=function(t){throw gi("This continuation is already complete".toString())},ni.prototype.toString=function(){return"This continuation is already complete"},ni.$metadata$={kind:S,simpleName:"CompletedContinuation",interfaces:[Ds]};var ri,oi=null;function si(){return null===oi&&new ni,oi}function ai(t,e){this.closure$block=t,ii.call(this,e)}function li(e,i){return 2==e.length?e(i,!0):new ai((r=e,o=i,function(){return r(o)}),t.isType(n=i,Ds)?n:ir());var n,r,o}function ui(e,i,n){return 3==e.length?e(i,n,!0):new ai((o=e,s=i,a=n,function(){return o(s,a)}),t.isType(r=n,Ds)?r:ir());var r,o,s,a}function pi(e){var i,n,r;return null!=(r=null!=(n=t.isType(i=e,ii)?i:null)?n.intercepted():null)?r:e}function ci(e,i){var n;O.call(this),n=null!=i?i:null,this.message_q7r8iu$_0=void 0===e&&null!=n?t.toString(n):e,this.cause_us9j0c$_0=n,t.captureStack(O,this),this.name="Error"}function hi(t,e){return e=e||Object.create(ci.prototype),ci.call(e,t,null),e}function di(e,i){var n;O.call(this),n=null!=i?i:null,this.message_8yp7un$_0=void 0===e&&null!=n?t.toString(n):e,this.cause_th0jdv$_0=n,t.captureStack(O,this),this.name="Exception"}function fi(t,e){return e=e||Object.create(di.prototype),di.call(e,t,null),e}function _i(t,e){di.call(this,t,e),this.name="RuntimeException"}function mi(t,e){return e=e||Object.create(_i.prototype),_i.call(e,t,null),e}function $i(t,e){_i.call(this,t,e),this.name="IllegalArgumentException"}function yi(t,e){return e=e||Object.create($i.prototype),$i.call(e,t,null),e}function vi(t,e){_i.call(this,t,e),this.name="IllegalStateException"}function gi(t,e){return e=e||Object.create(vi.prototype),vi.call(e,t,null),e}function bi(t){mi(t,this),this.name="IndexOutOfBoundsException"}function xi(t,e){_i.call(this,t,e),this.name="UnsupportedOperationException"}function wi(t){return t=t||Object.create(xi.prototype),xi.call(t,null,null),t}function zi(t,e){return e=e||Object.create(xi.prototype),xi.call(e,t,null),e}function ki(t){yi(t,this),this.name="NumberFormatException"}function Si(t){mi(t,this),this.name="NullPointerException"}function Ci(t){mi(t,this),this.name="ClassCastException"}function Ni(t){mi(t,this),this.name="NoSuchElementException"}function Ei(t){return t=t||Object.create(Ni.prototype),Ni.call(t,null),t}function Ti(t){mi(t,this),this.name="ArithmeticException"}function Pi(t,e){_i.call(this,t,e),this.name="NoWhenBranchMatchedException"}function Oi(t){return t=t||Object.create(Pi.prototype),Pi.call(t,null,null),t}function Mi(t,e){_i.call(this,t,e),this.name="UninitializedPropertyAccessException"}function ji(t,e){return e=e||Object.create(Mi.prototype),Mi.call(e,t,null),e}function Ai(t,e){for(var i,n=t.length,r=e.length,o=0;o<n&&o<r;)e[o]=t[(i=o,o=i+1|0,i)];return e}function Ii(t,e,i){var n,r=t.slice(0,e);void 0!==t.$type$&&(r.$type$=t.$type$);var o=t.length;if(e>o)for(r.length=e;o<e;)r[(n=o,o=n+1|0,n)]=i;return r}function Ri(t,e){return t.toString(fo(e))}function Li(t){return new pn(t)}function Di(t,e,i){return Po().checkRangeIndexes_cub51b$(e,i,t.length),t.slice(e,i)}function qi(t){var e=(t.size/2|0)-1|0;if(!(e<0))for(var i=ts(t),n=0;n<=e;n++){var r=t.get_za3lpa$(n);t.set_wxm5ur$(n,t.get_za3lpa$(i)),t.set_wxm5ur$(i,r),i=i-1|0}}function Fi(t){this.function$=t}function Bi(t){return void 0!==t.toArray?t.toArray():Ui(t)}function Ui(t){for(var e=[],i=t.iterator();i.hasNext();)e.push(i.next());return e}function Vi(t,e){var i;if(e.length<t.size)return Ui(t);for(var n=t.iterator(),r=0;n.hasNext();)e[(i=r,r=i+1|0,i)]=n.next();return r<e.length&&(e[r]=null),e}function Gi(t){return Qo([t])}function Hi(t){return Ls([t])}function Wi(t){return ms([t])}function Xi(t){at(t,ma())}function Ki(t){return t<0&&is(),t}function Yi(t){return t}function Zi(){Co.call(this)}function Ji(){Zi.call(this),this.modCount=0}function Qi(t){this.$outer=t,this.index_0=0,this.last_0=-1}function tn(t,e){this.$outer=t,Qi.call(this,this.$outer),Po().checkPositionIndex_6xvm5r$(e,this.$outer.size),this.index_0=e}function en(t,e,i){Ji.call(this),this.list_0=t,this.fromIndex_0=e,this._size_0=0,Po().checkRangeIndexes_cub51b$(this.fromIndex_0,i,this.list_0.size),this._size_0=i-this.fromIndex_0|0}function nn(){Oo.call(this),this._keys_qe2m0n$_0=null,this._values_kxdlqh$_0=null}function rn(t,e){this.key_5xhq3d$_0=t,this._value_0=e}function on(t){this.this$AbstractMutableMap=t,un.call(this)}function sn(t){this.closure$entryIterator=t}function an(t){this.this$AbstractMutableMap=t,Zi.call(this)}function ln(t){this.closure$entryIterator=t}function un(){Zi.call(this)}function pn(t){Ji.call(this),this.array_hd7ov6$_0=t,this.isReadOnly_dbt2oh$_0=!1}function cn(t){return t=t||Object.create(pn.prototype),pn.call(t,[]),t}function hn(t,e){return void 0===t&&(t=0),e=e||Object.create(pn.prototype),pn.call(e,[]),e}function dn(t,e){return e=e||Object.create(pn.prototype),pn.call(e,Bi(t)),e}function fn(e,i){if(function(){if(null!=ri)return ri;ri=!1;for(var t=[],e=0;e<600;e++)t.push(e);var i=_n;t.sort(i);for(var n=1;n<t.length;n++){var r=t[n-1|0],o=t[n];if((3&r)==(3&o)&&r>=o)return!1}return ri=!0,!0}()){var n=(r=i,function(t,e){return r.compare(t,e)});e.sort(n)}else!function(e,i,n,r){var o=t.newArray(e.length,null),s=function t(e,i,n,r,o){if(n===r)return e;for(var s=(n+r|0)/2|0,a=t(e,i,n,s,o),l=t(e,i,s+1|0,r,o),u=a===i?e:i,p=n,c=s+1|0,h=n;h<=r;h++)if(p<=s&&c<=r){var d=a[p],f=l[c];o.compare(d,f)<=0?(u[h]=d,p=p+1|0):(u[h]=f,c=c+1|0)}else p<=s?(u[h]=a[p],p=p+1|0):(u[h]=l[c],c=c+1|0);return u}(e,o,i,n,r);if(s!==e)for(var a=i;a<=n;a++)e[a]=s[a]}(e,0,K(e),i);var r}function _n(t,e){return(3&t)-(3&e)|0}function mn(){}function $n(){bn=this}ai.prototype=Object.create(ii.prototype),ai.prototype.constructor=ai,ai.prototype.doResume=function(){var t;if(null!=(t=this.exception_0))throw t;return this.closure$block()},ai.$metadata$={kind:h,interfaces:[ii]},Object.defineProperty(ci.prototype,"message",{get:function(){return this.message_q7r8iu$_0}}),Object.defineProperty(ci.prototype,"cause",{get:function(){return this.cause_us9j0c$_0}}),ci.$metadata$={kind:h,simpleName:"Error",interfaces:[O]},Object.defineProperty(di.prototype,"message",{get:function(){return this.message_8yp7un$_0}}),Object.defineProperty(di.prototype,"cause",{get:function(){return this.cause_th0jdv$_0}}),di.$metadata$={kind:h,simpleName:"Exception",interfaces:[O]},_i.$metadata$={kind:h,simpleName:"RuntimeException",interfaces:[di]},$i.$metadata$={kind:h,simpleName:"IllegalArgumentException",interfaces:[_i]},vi.$metadata$={kind:h,simpleName:"IllegalStateException",interfaces:[_i]},bi.$metadata$={kind:h,simpleName:"IndexOutOfBoundsException",interfaces:[_i]},xi.$metadata$={kind:h,simpleName:"UnsupportedOperationException",interfaces:[_i]},ki.$metadata$={kind:h,simpleName:"NumberFormatException",interfaces:[$i]},Si.$metadata$={kind:h,simpleName:"NullPointerException",interfaces:[_i]},Ci.$metadata$={kind:h,simpleName:"ClassCastException",interfaces:[_i]},Ni.$metadata$={kind:h,simpleName:"NoSuchElementException",interfaces:[_i]},Ti.$metadata$={kind:h,simpleName:"ArithmeticException",interfaces:[_i]},Pi.$metadata$={kind:h,simpleName:"NoWhenBranchMatchedException",interfaces:[_i]},Mi.$metadata$={kind:h,simpleName:"UninitializedPropertyAccessException",interfaces:[_i]},Fi.prototype.compare=function(t,e){return this.function$(t,e)},Fi.$metadata$={kind:z,simpleName:"Comparator",interfaces:[]},Zi.prototype.remove_11rb$=function(t){this.checkIsMutable();for(var e=this.iterator();e.hasNext();)if(o(e.next(),t))return e.remove(),!0;return!1},Zi.prototype.addAll_brywnq$=function(t){var e;this.checkIsMutable();var i=!1;for(e=t.iterator();e.hasNext();){var n=e.next();this.add_11rb$(n)&&(i=!0)}return i},Zi.prototype.removeAll_brywnq$=function(e){var i;return this.checkIsMutable(),xs(t.isType(this,Ot)?this:ir(),(i=e,function(t){return i.contains_11rb$(t)}))},Zi.prototype.retainAll_brywnq$=function(e){var i;return this.checkIsMutable(),xs(t.isType(this,Ot)?this:ir(),(i=e,function(t){return!i.contains_11rb$(t)}))},Zi.prototype.clear=function(){this.checkIsMutable();for(var t=this.iterator();t.hasNext();)t.next(),t.remove()},Zi.prototype.toJSON=function(){return this.toArray()},Zi.prototype.checkIsMutable=function(){},Zi.$metadata$={kind:h,simpleName:"AbstractMutableCollection",interfaces:[jt,Co]},Ji.prototype.add_11rb$=function(t){return this.checkIsMutable(),this.add_wxm5ur$(this.size,t),!0},Ji.prototype.addAll_u57x28$=function(t,e){var i,n;this.checkIsMutable();var r=t,o=!1;for(i=e.iterator();i.hasNext();){var s=i.next();this.add_wxm5ur$((r=(n=r)+1|0,n),s),o=!0}return o},Ji.prototype.clear=function(){this.checkIsMutable(),this.removeRange_vux9f0$(0,this.size)},Ji.prototype.removeAll_brywnq$=function(t){return this.checkIsMutable(),zs(this,(e=t,function(t){return e.contains_11rb$(t)}));var e},Ji.prototype.retainAll_brywnq$=function(t){return this.checkIsMutable(),zs(this,(e=t,function(t){return!e.contains_11rb$(t)}));var e},Ji.prototype.iterator=function(){return new Qi(this)},Ji.prototype.contains_11rb$=function(t){return this.indexOf_11rb$(t)>=0},Ji.prototype.indexOf_11rb$=function(t){var e;e=ts(this);for(var i=0;i<=e;i++)if(o(this.get_za3lpa$(i),t))return i;return-1},Ji.prototype.lastIndexOf_11rb$=function(t){for(var e=ts(this);e>=0;e--)if(o(this.get_za3lpa$(e),t))return e;return-1},Ji.prototype.listIterator=function(){return this.listIterator_za3lpa$(0)},Ji.prototype.listIterator_za3lpa$=function(t){return new tn(this,t)},Ji.prototype.subList_vux9f0$=function(t,e){return new en(this,t,e)},Ji.prototype.removeRange_vux9f0$=function(t,e){for(var i=this.listIterator_za3lpa$(t),n=e-t|0,r=0;r<n;r++)i.next(),i.remove()},Ji.prototype.equals=function(e){return e===this||!!t.isType(e,At)&&Po().orderedEquals_e92ka7$(this,e)},Ji.prototype.hashCode=function(){return Po().orderedHashCode_nykoif$(this)},Qi.prototype.hasNext=function(){return this.index_0<this.$outer.size},Qi.prototype.next=function(){var t;if(!this.hasNext())throw Ei();return this.last_0=(t=this.index_0,this.index_0=t+1|0,t),this.$outer.get_za3lpa$(this.last_0)},Qi.prototype.remove=function(){if(-1===this.last_0)throw gi("Call next() or previous() before removing element from the iterator.".toString());this.$outer.removeAt_za3lpa$(this.last_0),this.index_0=this.last_0,this.last_0=-1},Qi.$metadata$={kind:h,simpleName:"IteratorImpl",interfaces:[Vt]},tn.prototype.hasPrevious=function(){return this.index_0>0},tn.prototype.nextIndex=function(){return this.index_0},tn.prototype.previous=function(){if(!this.hasPrevious())throw Ei();return this.last_0=(this.index_0=this.index_0-1|0,this.index_0),this.$outer.get_za3lpa$(this.last_0)},tn.prototype.previousIndex=function(){return this.index_0-1|0},tn.prototype.add_11rb$=function(t){this.$outer.add_wxm5ur$(this.index_0,t),this.index_0=this.index_0+1|0,this.last_0=-1},tn.prototype.set_11rb$=function(t){if(-1===this.last_0)throw gi("Call next() or previous() before updating element value with the iterator.".toString());this.$outer.set_wxm5ur$(this.last_0,t)},tn.$metadata$={kind:h,simpleName:"ListIteratorImpl",interfaces:[Ht,Qi]},en.prototype.add_wxm5ur$=function(t,e){Po().checkPositionIndex_6xvm5r$(t,this._size_0),this.list_0.add_wxm5ur$(this.fromIndex_0+t|0,e),this._size_0=this._size_0+1|0},en.prototype.get_za3lpa$=function(t){return Po().checkElementIndex_6xvm5r$(t,this._size_0),this.list_0.get_za3lpa$(this.fromIndex_0+t|0)},en.prototype.removeAt_za3lpa$=function(t){Po().checkElementIndex_6xvm5r$(t,this._size_0);var e=this.list_0.removeAt_za3lpa$(this.fromIndex_0+t|0);return this._size_0=this._size_0-1|0,e},en.prototype.set_wxm5ur$=function(t,e){return Po().checkElementIndex_6xvm5r$(t,this._size_0),this.list_0.set_wxm5ur$(this.fromIndex_0+t|0,e)},Object.defineProperty(en.prototype,"size",{configurable:!0,get:function(){return this._size_0}}),en.prototype.checkIsMutable=function(){this.list_0.checkIsMutable()},en.$metadata$={kind:h,simpleName:"SubList",interfaces:[Kn,Ji]},Ji.$metadata$={kind:h,simpleName:"AbstractMutableList",interfaces:[It,Zi]},Object.defineProperty(rn.prototype,"key",{get:function(){return this.key_5xhq3d$_0}}),Object.defineProperty(rn.prototype,"value",{configurable:!0,get:function(){return this._value_0}}),rn.prototype.setValue_11rc$=function(t){var e=this._value_0;return this._value_0=t,e},rn.prototype.hashCode=function(){return Do().entryHashCode_9fthdn$(this)},rn.prototype.toString=function(){return Do().entryToString_9fthdn$(this)},rn.prototype.equals=function(t){return Do().entryEquals_js7fox$(this,t)},rn.$metadata$={kind:h,simpleName:"SimpleEntry",interfaces:[Bt]},nn.prototype.clear=function(){this.entries.clear()},on.prototype.add_11rb$=function(t){throw zi("Add is not supported on keys")},on.prototype.clear=function(){this.this$AbstractMutableMap.clear()},on.prototype.contains_11rb$=function(t){return this.this$AbstractMutableMap.containsKey_11rb$(t)},sn.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},sn.prototype.next=function(){return this.closure$entryIterator.next().key},sn.prototype.remove=function(){this.closure$entryIterator.remove()},sn.$metadata$={kind:h,interfaces:[Vt]},on.prototype.iterator=function(){return new sn(this.this$AbstractMutableMap.entries.iterator())},on.prototype.remove_11rb$=function(t){return this.checkIsMutable(),!!this.this$AbstractMutableMap.containsKey_11rb$(t)&&(this.this$AbstractMutableMap.remove_11rb$(t),!0)},Object.defineProperty(on.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMutableMap.size}}),on.prototype.checkIsMutable=function(){this.this$AbstractMutableMap.checkIsMutable()},on.$metadata$={kind:h,interfaces:[un]},Object.defineProperty(nn.prototype,"keys",{configurable:!0,get:function(){return null==this._keys_qe2m0n$_0&&(this._keys_qe2m0n$_0=new on(this)),T(this._keys_qe2m0n$_0)}}),nn.prototype.putAll_a2k3zr$=function(t){var e;for(this.checkIsMutable(),e=t.entries.iterator();e.hasNext();){var i=e.next(),n=i.key,r=i.value;this.put_xwzc9p$(n,r)}},an.prototype.add_11rb$=function(t){throw zi("Add is not supported on values")},an.prototype.clear=function(){this.this$AbstractMutableMap.clear()},an.prototype.contains_11rb$=function(t){return this.this$AbstractMutableMap.containsValue_11rc$(t)},ln.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},ln.prototype.next=function(){return this.closure$entryIterator.next().value},ln.prototype.remove=function(){this.closure$entryIterator.remove()},ln.$metadata$={kind:h,interfaces:[Vt]},an.prototype.iterator=function(){return new ln(this.this$AbstractMutableMap.entries.iterator())},Object.defineProperty(an.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMutableMap.size}}),an.prototype.equals=function(e){return this===e||!!t.isType(e,Mt)&&Po().orderedEquals_e92ka7$(this,e)},an.prototype.hashCode=function(){return Po().orderedHashCode_nykoif$(this)},an.prototype.checkIsMutable=function(){this.this$AbstractMutableMap.checkIsMutable()},an.$metadata$={kind:h,interfaces:[Zi]},Object.defineProperty(nn.prototype,"values",{configurable:!0,get:function(){return null==this._values_kxdlqh$_0&&(this._values_kxdlqh$_0=new an(this)),T(this._values_kxdlqh$_0)}}),nn.prototype.remove_11rb$=function(t){this.checkIsMutable();for(var e=this.entries.iterator();e.hasNext();){var i=e.next(),n=i.key;if(o(t,n)){var r=i.value;return e.remove(),r}}return null},nn.prototype.checkIsMutable=function(){},nn.$metadata$={kind:h,simpleName:"AbstractMutableMap",interfaces:[Ft,Oo]},un.prototype.equals=function(e){return e===this||!!t.isType(e,Rt)&&Uo().setEquals_y8f7en$(this,e)},un.prototype.hashCode=function(){return Uo().unorderedHashCode_nykoif$(this)},un.$metadata$={kind:h,simpleName:"AbstractMutableSet",interfaces:[Lt,Zi]},pn.prototype.build=function(){return this.checkIsMutable(),this.isReadOnly_dbt2oh$_0=!0,this},pn.prototype.trimToSize=function(){},pn.prototype.ensureCapacity_za3lpa$=function(t){},Object.defineProperty(pn.prototype,"size",{configurable:!0,get:function(){return this.array_hd7ov6$_0.length}}),pn.prototype.get_za3lpa$=function(e){var i;return null==(i=this.array_hd7ov6$_0[this.rangeCheck_xcmk5o$_0(e)])||t.isType(i,k)?i:ir()},pn.prototype.set_wxm5ur$=function(e,i){var n;this.checkIsMutable(),this.rangeCheck_xcmk5o$_0(e);var r=this.array_hd7ov6$_0[e];return this.array_hd7ov6$_0[e]=i,null==(n=r)||t.isType(n,k)?n:ir()},pn.prototype.add_11rb$=function(t){return this.checkIsMutable(),this.array_hd7ov6$_0.push(t),this.modCount=this.modCount+1|0,!0},pn.prototype.add_wxm5ur$=function(t,e){this.checkIsMutable(),this.array_hd7ov6$_0.splice(this.insertionRangeCheck_xwivfl$_0(t),0,e),this.modCount=this.modCount+1|0},pn.prototype.addAll_brywnq$=function(t){return this.checkIsMutable(),!t.isEmpty()&&(this.array_hd7ov6$_0=this.array_hd7ov6$_0.concat(Bi(t)),this.modCount=this.modCount+1|0,!0)},pn.prototype.addAll_u57x28$=function(t,e){return this.checkIsMutable(),this.insertionRangeCheck_xwivfl$_0(t),t===this.size?this.addAll_brywnq$(e):!e.isEmpty()&&(t===this.size?this.addAll_brywnq$(e):(this.array_hd7ov6$_0=0===t?Bi(e).concat(this.array_hd7ov6$_0):Di(this.array_hd7ov6$_0,0,t).concat(Bi(e),Di(this.array_hd7ov6$_0,t,this.size)),this.modCount=this.modCount+1|0,!0))},pn.prototype.removeAt_za3lpa$=function(t){return this.checkIsMutable(),this.rangeCheck_xcmk5o$_0(t),this.modCount=this.modCount+1|0,t===ts(this)?this.array_hd7ov6$_0.pop():this.array_hd7ov6$_0.splice(t,1)[0]},pn.prototype.remove_11rb$=function(t){var e;this.checkIsMutable(),e=this.array_hd7ov6$_0;for(var i=0;i!==e.length;++i)if(o(this.array_hd7ov6$_0[i],t))return this.array_hd7ov6$_0.splice(i,1),this.modCount=this.modCount+1|0,!0;return!1},pn.prototype.removeRange_vux9f0$=function(t,e){this.checkIsMutable(),this.modCount=this.modCount+1|0,this.array_hd7ov6$_0.splice(t,e-t|0)},pn.prototype.clear=function(){this.checkIsMutable(),this.array_hd7ov6$_0=[],this.modCount=this.modCount+1|0},pn.prototype.indexOf_11rb$=function(t){return G(this.array_hd7ov6$_0,t)},pn.prototype.lastIndexOf_11rb$=function(t){return H(this.array_hd7ov6$_0,t)},pn.prototype.toString=function(){return M(this.array_hd7ov6$_0)},pn.prototype.toArray=function(){return[].slice.call(this.array_hd7ov6$_0)},pn.prototype.checkIsMutable=function(){if(this.isReadOnly_dbt2oh$_0)throw wi()},pn.prototype.rangeCheck_xcmk5o$_0=function(t){return Po().checkElementIndex_6xvm5r$(t,this.size),t},pn.prototype.insertionRangeCheck_xwivfl$_0=function(t){return Po().checkPositionIndex_6xvm5r$(t,this.size),t},pn.$metadata$={kind:h,simpleName:"ArrayList",interfaces:[Kn,Ji,It]},$n.prototype.equals_oaftn8$=function(t,e){return o(t,e)},$n.prototype.getHashCode_s8jyv4$=function(t){var e;return null!=(e=null!=t?j(t):null)?e:0},$n.$metadata$={kind:S,simpleName:"HashCode",interfaces:[mn]};var yn,vn,gn,bn=null;function xn(){return null===bn&&new $n,bn}function wn(){this.internalMap_uxhen5$_0=null,this.equality_vgh6cm$_0=null,this._entries_7ih87x$_0=null}function zn(t){this.$outer=t,un.call(this)}function kn(t,e){return e=e||Object.create(wn.prototype),nn.call(e),wn.call(e),e.internalMap_uxhen5$_0=t,e.equality_vgh6cm$_0=t.equality,e}function Sn(t){return t=t||Object.create(wn.prototype),kn(new Mn(xn()),t),t}function Cn(t,e,i){if(void 0===e&&(e=0),Sn(i=i||Object.create(wn.prototype)),!(t>=0))throw yi(("Negative initial capacity: "+t).toString());if(!(e>=0))throw yi(("Non-positive load factor: "+e).toString());return i}function Nn(t,e){return Cn(t,0,e=e||Object.create(wn.prototype)),e}function En(){this.map_8be2vx$=null}function Tn(t,e,i){return void 0===e&&(e=0),i=i||Object.create(En.prototype),un.call(i),En.call(i),i.map_8be2vx$=Cn(t,e),i}function Pn(t,e){return Tn(t,0,e=e||Object.create(En.prototype)),e}function On(t,e){return e=e||Object.create(En.prototype),un.call(e),En.call(e),e.map_8be2vx$=t,e}function Mn(t){this.equality_mamlu8$_0=t,this.backingMap_0=this.createJsMap(),this.size_x3bm7r$_0=0}function jn(t){this.this$InternalHashCodeMap=t,this.state=-1,this.keys=Object.keys(t.backingMap_0),this.keyIndex=-1,this.chainOrEntry=null,this.isChain=!1,this.itemIndex=-1,this.lastEntry=null}function An(){}function In(t){this.equality_qma612$_0=t,this.backingMap_0=this.createJsMap(),this.size_6u3ykz$_0=0}function Rn(){this.head_1lr44l$_0=null,this.map_97q5dv$_0=null,this.isReadOnly_uhyvn5$_0=!1}function Ln(t,e,i){this.$outer=t,rn.call(this,e,i),this.next_8be2vx$=null,this.prev_8be2vx$=null}function Dn(t){this.$outer=t,un.call(this)}function qn(t){this.$outer=t,this.last_0=null,this.next_0=null,this.next_0=this.$outer.$outer.head_1lr44l$_0}function Fn(t){return Sn(t=t||Object.create(Rn.prototype)),Rn.call(t),t.map_97q5dv$_0=Sn(),t}function Bn(t,e,i){return void 0===e&&(e=0),Cn(t,e,i=i||Object.create(Rn.prototype)),Rn.call(i),i.map_97q5dv$_0=Sn(),i}function Un(t,e){return Bn(t,0,e=e||Object.create(Rn.prototype)),e}function Vn(){}function Gn(t){return t=t||Object.create(Vn.prototype),On(Fn(),t),Vn.call(t),t}function Hn(t,e){return e=e||Object.create(Vn.prototype),On(Fn(),e),Vn.call(e),e.addAll_brywnq$(t),e}function Wn(t,e,i){return void 0===e&&(e=0),i=i||Object.create(Vn.prototype),On(Bn(t,e),i),Vn.call(i),i}function Xn(t,e){return Wn(t,0,e=e||Object.create(Vn.prototype)),e}function Kn(){}function Yn(){}function Zn(t){Yn.call(this),this.outputStream=t}function Jn(){Yn.call(this),this.buffer=""}function Qn(){Jn.call(this)}function tr(t,e){this.delegate_0=t,this.result_0=e}function er(t,e){this.closure$context=t,this.closure$resumeWith=e}function ir(){throw new Ci("Illegal cast")}function nr(t){throw gi(t)}function rr(){}function or(e){if(sr(e)||e===l.NEGATIVE_INFINITY)return e;if(0===e)return-l.MIN_VALUE;var i=A(e).add(t.Long.fromInt(e>0?-1:1));return t.doubleFromBits(i)}function sr(t){return t!=t}function ar(t){return t!=t}function lr(t){return t===l.POSITIVE_INFINITY||t===l.NEGATIVE_INFINITY}function ur(t){return t===I.POSITIVE_INFINITY||t===I.NEGATIVE_INFINITY}function pr(t){return!lr(t)&&!sr(t)}function cr(){return $a(Math.random()*Math.pow(2,32)|0)}function hr(t,e){return t*vn+e*gn}function dr(){}function fr(){}function _r(t){this.jClass_1ppatx$_0=t}function mr(t){var e;_r.call(this,t),this.simpleName_m7mxi0$_0=null!=(e=t.$metadata$)?e.simpleName:null}function $r(t,e,i){_r.call(this,t),this.givenSimpleName_0=e,this.isInstanceFunction_0=i}function yr(){vr=this,_r.call(this,Object),this.simpleName_lnzy73$_0="Nothing"}mn.$metadata$={kind:z,simpleName:"EqualityComparator",interfaces:[]},zn.prototype.add_11rb$=function(t){throw zi("Add is not supported on entries")},zn.prototype.clear=function(){this.$outer.clear()},zn.prototype.contains_11rb$=function(t){return this.$outer.containsEntry_8hxqw4$(t)},zn.prototype.iterator=function(){return this.$outer.internalMap_uxhen5$_0.iterator()},zn.prototype.remove_11rb$=function(t){return!!this.contains_11rb$(t)&&(this.$outer.remove_11rb$(t.key),!0)},Object.defineProperty(zn.prototype,"size",{configurable:!0,get:function(){return this.$outer.size}}),zn.$metadata$={kind:h,simpleName:"EntrySet",interfaces:[un]},wn.prototype.clear=function(){this.internalMap_uxhen5$_0.clear()},wn.prototype.containsKey_11rb$=function(t){return this.internalMap_uxhen5$_0.contains_11rb$(t)},wn.prototype.containsValue_11rc$=function(e){var i,n=this.internalMap_uxhen5$_0;t:do{var r;if(t.isType(n,Mt)&&n.isEmpty()){i=!1;break t}for(r=n.iterator();r.hasNext();){var o=r.next();if(this.equality_vgh6cm$_0.equals_oaftn8$(o.value,e)){i=!0;break t}}i=!1}while(0);return i},Object.defineProperty(wn.prototype,"entries",{configurable:!0,get:function(){return null==this._entries_7ih87x$_0&&(this._entries_7ih87x$_0=this.createEntrySet()),T(this._entries_7ih87x$_0)}}),wn.prototype.createEntrySet=function(){return new zn(this)},wn.prototype.get_11rb$=function(t){return this.internalMap_uxhen5$_0.get_11rb$(t)},wn.prototype.put_xwzc9p$=function(t,e){return this.internalMap_uxhen5$_0.put_xwzc9p$(t,e)},wn.prototype.remove_11rb$=function(t){return this.internalMap_uxhen5$_0.remove_11rb$(t)},Object.defineProperty(wn.prototype,"size",{configurable:!0,get:function(){return this.internalMap_uxhen5$_0.size}}),wn.$metadata$={kind:h,simpleName:"HashMap",interfaces:[nn,Ft]},En.prototype.add_11rb$=function(t){return null==this.map_8be2vx$.put_xwzc9p$(t,this)},En.prototype.clear=function(){this.map_8be2vx$.clear()},En.prototype.contains_11rb$=function(t){return this.map_8be2vx$.containsKey_11rb$(t)},En.prototype.isEmpty=function(){return this.map_8be2vx$.isEmpty()},En.prototype.iterator=function(){return this.map_8be2vx$.keys.iterator()},En.prototype.remove_11rb$=function(t){return null!=this.map_8be2vx$.remove_11rb$(t)},Object.defineProperty(En.prototype,"size",{configurable:!0,get:function(){return this.map_8be2vx$.size}}),En.$metadata$={kind:h,simpleName:"HashSet",interfaces:[un,Lt]},Object.defineProperty(Mn.prototype,"equality",{get:function(){return this.equality_mamlu8$_0}}),Object.defineProperty(Mn.prototype,"size",{configurable:!0,get:function(){return this.size_x3bm7r$_0},set:function(t){this.size_x3bm7r$_0=t}}),Mn.prototype.put_xwzc9p$=function(e,i){var n=this.equality.getHashCode_s8jyv4$(e),r=this.getChainOrEntryOrNull_0(n);if(null==r)this.backingMap_0[n]=new rn(e,i);else{if(!t.isArray(r)){var o=r;return this.equality.equals_oaftn8$(o.key,e)?o.setValue_11rc$(i):(this.backingMap_0[n]=[o,new rn(e,i)],this.size=this.size+1|0,null)}var s=r,a=this.findEntryInChain_0(s,e);if(null!=a)return a.setValue_11rc$(i);s.push(new rn(e,i))}return this.size=this.size+1|0,null},Mn.prototype.remove_11rb$=function(e){var i,n=this.equality.getHashCode_s8jyv4$(e);if(null==(i=this.getChainOrEntryOrNull_0(n)))return null;var r=i;if(!t.isArray(r)){var o=r;return this.equality.equals_oaftn8$(o.key,e)?(delete this.backingMap_0[n],this.size=this.size-1|0,o.value):null}for(var s=r,a=0;a!==s.length;++a){var l=s[a];if(this.equality.equals_oaftn8$(e,l.key))return 1===s.length?(s.length=0,delete this.backingMap_0[n]):s.splice(a,1),this.size=this.size-1|0,l.value}return null},Mn.prototype.clear=function(){this.backingMap_0=this.createJsMap(),this.size=0},Mn.prototype.contains_11rb$=function(t){return null!=this.getEntry_0(t)},Mn.prototype.get_11rb$=function(t){var e;return null!=(e=this.getEntry_0(t))?e.value:null},Mn.prototype.getEntry_0=function(e){var i;if(null==(i=this.getChainOrEntryOrNull_0(this.equality.getHashCode_s8jyv4$(e))))return null;var n=i;if(t.isArray(n)){var r=n;return this.findEntryInChain_0(r,e)}var o=n;return this.equality.equals_oaftn8$(o.key,e)?o:null},Mn.prototype.findEntryInChain_0=function(t,e){var i;t:do{var n;for(n=0;n!==t.length;++n){var r=t[n];if(this.equality.equals_oaftn8$(r.key,e)){i=r;break t}}i=null}while(0);return i},jn.prototype.computeNext_0=function(){if(null!=this.chainOrEntry&&this.isChain){var e=this.chainOrEntry.length;if(this.itemIndex=this.itemIndex+1|0,this.itemIndex<e)return 0}return this.keyIndex=this.keyIndex+1|0,this.keyIndex<this.keys.length?(this.chainOrEntry=this.this$InternalHashCodeMap.backingMap_0[this.keys[this.keyIndex]],this.isChain=t.isArray(this.chainOrEntry),this.itemIndex=0,0):(this.chainOrEntry=null,1)},jn.prototype.hasNext=function(){return-1===this.state&&(this.state=this.computeNext_0()),0===this.state},jn.prototype.next=function(){if(!this.hasNext())throw Ei();var t=this.isChain?this.chainOrEntry[this.itemIndex]:this.chainOrEntry;return this.lastEntry=t,this.state=-1,t},jn.prototype.remove=function(){if(null==this.lastEntry)throw gi("Required value was null.".toString());this.this$InternalHashCodeMap.remove_11rb$(T(this.lastEntry).key),this.lastEntry=null,this.itemIndex=this.itemIndex-1|0},jn.$metadata$={kind:h,interfaces:[Vt]},Mn.prototype.iterator=function(){return new jn(this)},Mn.prototype.getChainOrEntryOrNull_0=function(t){var e=this.backingMap_0[t];return void 0===e?null:e},Mn.$metadata$={kind:h,simpleName:"InternalHashCodeMap",interfaces:[An]},An.prototype.createJsMap=function(){var t=Object.create(null);return t.foo=1,delete t.foo,t},An.$metadata$={kind:z,simpleName:"InternalMap",interfaces:[Ot]},Ln.prototype.setValue_11rc$=function(t){return this.$outer.checkIsMutable(),rn.prototype.setValue_11rc$.call(this,t)},Ln.$metadata$={kind:h,simpleName:"ChainEntry",interfaces:[rn]},qn.prototype.hasNext=function(){return null!==this.next_0},qn.prototype.next=function(){if(!this.hasNext())throw Ei();var t=T(this.next_0);this.last_0=t;var e=t.next_8be2vx$;return this.$outer.$outer,this.next_0=e!==this.$outer.$outer.head_1lr44l$_0?e:null,t},qn.prototype.remove=function(){if(null==this.last_0)throw gi("Check failed.".toString());this.$outer.checkIsMutable(),this.$outer.$outer.remove_njjxy0$_0(T(this.last_0)),this.$outer.$outer.map_97q5dv$_0.remove_11rb$(T(this.last_0).key),this.last_0=null},qn.$metadata$={kind:h,simpleName:"EntryIterator",interfaces:[Vt]},Dn.prototype.add_11rb$=function(t){throw zi("Add is not supported on entries")},Dn.prototype.clear=function(){this.$outer.clear()},Dn.prototype.contains_11rb$=function(t){return this.$outer.containsEntry_8hxqw4$(t)},Dn.prototype.iterator=function(){return new qn(this)},Dn.prototype.remove_11rb$=function(t){return this.checkIsMutable(),!!this.contains_11rb$(t)&&(this.$outer.remove_11rb$(t.key),!0)},Object.defineProperty(Dn.prototype,"size",{configurable:!0,get:function(){return this.$outer.size}}),Dn.prototype.checkIsMutable=function(){this.$outer.checkIsMutable()},Dn.$metadata$={kind:h,simpleName:"EntrySet",interfaces:[un]},Rn.prototype.addToEnd_lfi3hf$_0=function(t){if(null!=t.next_8be2vx$||null!=t.prev_8be2vx$)throw gi("Check failed.".toString());var e=this.head_1lr44l$_0;if(null==e)this.head_1lr44l$_0=t,t.next_8be2vx$=t,t.prev_8be2vx$=t;else{var i=e.prev_8be2vx$;if(null==i)throw gi("Required value was null.".toString());var n=i;t.prev_8be2vx$=n,t.next_8be2vx$=e,e.prev_8be2vx$=t,n.next_8be2vx$=t}},Rn.prototype.remove_njjxy0$_0=function(t){t.next_8be2vx$===t?this.head_1lr44l$_0=null:(this.head_1lr44l$_0===t&&(this.head_1lr44l$_0=t.next_8be2vx$),T(t.next_8be2vx$).prev_8be2vx$=t.prev_8be2vx$,T(t.prev_8be2vx$).next_8be2vx$=t.next_8be2vx$),t.next_8be2vx$=null,t.prev_8be2vx$=null},Rn.prototype.build=function(){return this.checkIsMutable(),this.isReadOnly_uhyvn5$_0=!0,this},Rn.prototype.clear=function(){this.checkIsMutable(),this.map_97q5dv$_0.clear(),this.head_1lr44l$_0=null},Rn.prototype.containsKey_11rb$=function(t){return this.map_97q5dv$_0.containsKey_11rb$(t)},Rn.prototype.containsValue_11rc$=function(t){var e;if(null==(e=this.head_1lr44l$_0))return!1;var i=e;do{if(o(i.value,t))return!0;i=T(i.next_8be2vx$)}while(i!==this.head_1lr44l$_0);return!1},Rn.prototype.createEntrySet=function(){return new Dn(this)},Rn.prototype.get_11rb$=function(t){var e;return null!=(e=this.map_97q5dv$_0.get_11rb$(t))?e.value:null},Rn.prototype.put_xwzc9p$=function(t,e){this.checkIsMutable();var i=this.map_97q5dv$_0.get_11rb$(t);if(null==i){var n=new Ln(this,t,e);return this.map_97q5dv$_0.put_xwzc9p$(t,n),this.addToEnd_lfi3hf$_0(n),null}return i.setValue_11rc$(e)},Rn.prototype.remove_11rb$=function(t){this.checkIsMutable();var e=this.map_97q5dv$_0.remove_11rb$(t);return null!=e?(this.remove_njjxy0$_0(e),e.value):null},Object.defineProperty(Rn.prototype,"size",{configurable:!0,get:function(){return this.map_97q5dv$_0.size}}),Rn.prototype.checkIsMutable=function(){if(this.isReadOnly_uhyvn5$_0)throw wi()},Rn.$metadata$={kind:h,simpleName:"LinkedHashMap",interfaces:[wn,Ft]},Vn.prototype.build=function(){var e;return(t.isType(e=this.map_8be2vx$,Rn)?e:ir()).build(),this},Vn.prototype.checkIsMutable=function(){this.map_8be2vx$.checkIsMutable()},Vn.$metadata$={kind:h,simpleName:"LinkedHashSet",interfaces:[En,Lt]},Kn.$metadata$={kind:z,simpleName:"RandomAccess",interfaces:[]},Yn.prototype.println=function(){this.print_s8jyv4$("\n")},Yn.prototype.println_s8jyv4$=function(t){this.print_s8jyv4$(t),this.println()},Yn.prototype.flush=function(){},Yn.$metadata$={kind:h,simpleName:"BaseOutput",interfaces:[]},Zn.prototype.print_s8jyv4$=function(t){var e=String(t);this.outputStream.write(e)},Zn.$metadata$={kind:h,simpleName:"NodeJsOutput",interfaces:[Yn]},Jn.prototype.print_s8jyv4$=function(t){this.buffer+=String(t)},Jn.prototype.flush=function(){this.buffer=""},Jn.$metadata$={kind:h,simpleName:"BufferedOutput",interfaces:[Yn]},Qn.prototype.print_s8jyv4$=function(t){var e=String(t),i=e.lastIndexOf("\n",0);i>=0&&(this.buffer=this.buffer+e.substring(0,i),this.flush(),e=e.substring(i+1|0)),this.buffer=this.buffer+e},Qn.prototype.flush=function(){console.log(this.buffer),this.buffer=""},Qn.$metadata$={kind:h,simpleName:"BufferedOutputToConsoleLog",interfaces:[Jn]},Object.defineProperty(tr.prototype,"context",{configurable:!0,get:function(){return this.delegate_0.context}}),tr.prototype.resumeWith_tl1gpc$=function(t){var e=this.result_0;if(e===ca())this.result_0=t.value;else{if(e!==aa())throw gi("Already resumed");this.result_0=ha(),this.delegate_0.resumeWith_tl1gpc$(t)}},tr.prototype.getOrThrow=function(){var e;if(this.result_0===ca())return this.result_0=aa(),aa();var i=this.result_0;if(i===ha())e=aa();else{if(t.isType(i,$l))throw i.exception;e=i}return e},tr.$metadata$={kind:h,simpleName:"SafeContinuation",interfaces:[Ds]},Object.defineProperty(er.prototype,"context",{configurable:!0,get:function(){return this.closure$context}}),er.prototype.resumeWith_tl1gpc$=function(t){this.closure$resumeWith(t)},er.$metadata$={kind:h,interfaces:[Ds]},rr.$metadata$={kind:z,simpleName:"Serializable",interfaces:[]},dr.$metadata$={kind:z,simpleName:"KCallable",interfaces:[]},fr.$metadata$={kind:z,simpleName:"KClass",interfaces:[Na]},Object.defineProperty(_r.prototype,"jClass",{get:function(){return this.jClass_1ppatx$_0}}),Object.defineProperty(_r.prototype,"qualifiedName",{configurable:!0,get:function(){throw new gl}}),_r.prototype.equals=function(e){return t.isType(e,_r)&&o(this.jClass,e.jClass)},_r.prototype.hashCode=function(){var t,e;return null!=(e=null!=(t=this.simpleName)?j(t):null)?e:0},_r.prototype.toString=function(){return"class "+x(this.simpleName)},_r.$metadata$={kind:h,simpleName:"KClassImpl",interfaces:[fr]},Object.defineProperty(mr.prototype,"simpleName",{configurable:!0,get:function(){return this.simpleName_m7mxi0$_0}}),mr.prototype.isInstance_s8jyv4$=function(e){var i=this.jClass;return t.isType(e,i)},mr.$metadata$={kind:h,simpleName:"SimpleKClassImpl",interfaces:[_r]},$r.prototype.equals=function(e){return!!t.isType(e,$r)&&_r.prototype.equals.call(this,e)&&o(this.givenSimpleName_0,e.givenSimpleName_0)},Object.defineProperty($r.prototype,"simpleName",{configurable:!0,get:function(){return this.givenSimpleName_0}}),$r.prototype.isInstance_s8jyv4$=function(t){return this.isInstanceFunction_0(t)},$r.$metadata$={kind:h,simpleName:"PrimitiveKClassImpl",interfaces:[_r]},Object.defineProperty(yr.prototype,"simpleName",{configurable:!0,get:function(){return this.simpleName_lnzy73$_0}}),yr.prototype.isInstance_s8jyv4$=function(t){return!1},Object.defineProperty(yr.prototype,"jClass",{configurable:!0,get:function(){throw zi("There's no native JS class for Nothing type")}}),yr.prototype.equals=function(t){return t===this},yr.prototype.hashCode=function(){return 0},yr.$metadata$={kind:S,simpleName:"NothingKClassImpl",interfaces:[_r]};var vr=null;function gr(){return null===vr&&new yr,vr}function br(){}function xr(){}function wr(){}function zr(){}function kr(){}function Sr(){}function Cr(){}function Nr(){}function Er(t,e,i){this.classifier_50lv52$_0=t,this.arguments_lev63t$_0=e,this.isMarkedNullable_748rxs$_0=i}function Tr(e){switch(e.name){case"INVARIANT":return"";case"IN":return"in ";case"OUT":return"out ";default:return t.noWhenBranchMatched()}}function Pr(){Qr=this,this.anyClass=new $r(Object,"Any",Or),this.numberClass=new $r(Number,"Number",Mr),this.nothingClass=gr(),this.booleanClass=new $r(Boolean,"Boolean",jr),this.byteClass=new $r(Number,"Byte",Ar),this.shortClass=new $r(Number,"Short",Ir),this.intClass=new $r(Number,"Int",Rr),this.floatClass=new $r(Number,"Float",Lr),this.doubleClass=new $r(Number,"Double",Dr),this.arrayClass=new $r(Array,"Array",qr),this.stringClass=new $r(String,"String",Fr),this.throwableClass=new $r(Error,"Throwable",Br),this.booleanArrayClass=new $r(Array,"BooleanArray",Ur),this.charArrayClass=new $r(Uint16Array,"CharArray",Vr),this.byteArrayClass=new $r(Int8Array,"ByteArray",Gr),this.shortArrayClass=new $r(Int16Array,"ShortArray",Hr),this.intArrayClass=new $r(Int32Array,"IntArray",Wr),this.longArrayClass=new $r(Array,"LongArray",Xr),this.floatArrayClass=new $r(Float32Array,"FloatArray",Kr),this.doubleArrayClass=new $r(Float64Array,"DoubleArray",Yr)}function Or(e){return t.isType(e,k)}function Mr(e){return t.isNumber(e)}function jr(t){return"boolean"==typeof t}function Ar(t){return"number"==typeof t}function Ir(t){return"number"==typeof t}function Rr(t){return"number"==typeof t}function Lr(t){return"number"==typeof t}function Dr(t){return"number"==typeof t}function qr(e){return t.isArray(e)}function Fr(t){return"string"==typeof t}function Br(e){return t.isType(e,O)}function Ur(e){return t.isBooleanArray(e)}function Vr(e){return t.isCharArray(e)}function Gr(e){return t.isByteArray(e)}function Hr(e){return t.isShortArray(e)}function Wr(e){return t.isIntArray(e)}function Xr(e){return t.isLongArray(e)}function Kr(e){return t.isFloatArray(e)}function Yr(e){return t.isDoubleArray(e)}Object.defineProperty(br.prototype,"simpleName",{configurable:!0,get:function(){throw gi("Unknown simpleName for ErrorKClass".toString())}}),Object.defineProperty(br.prototype,"qualifiedName",{configurable:!0,get:function(){throw gi("Unknown qualifiedName for ErrorKClass".toString())}}),br.prototype.isInstance_s8jyv4$=function(t){throw gi("Can's check isInstance on ErrorKClass".toString())},br.prototype.equals=function(t){return t===this},br.prototype.hashCode=function(){return 0},br.$metadata$={kind:h,simpleName:"ErrorKClass",interfaces:[fr]},xr.$metadata$={kind:z,simpleName:"KProperty",interfaces:[dr]},wr.$metadata$={kind:z,simpleName:"KMutableProperty",interfaces:[xr]},zr.$metadata$={kind:z,simpleName:"KProperty0",interfaces:[xr]},kr.$metadata$={kind:z,simpleName:"KMutableProperty0",interfaces:[wr,zr]},Sr.$metadata$={kind:z,simpleName:"KProperty1",interfaces:[xr]},Cr.$metadata$={kind:z,simpleName:"KMutableProperty1",interfaces:[wr,Sr]},Nr.$metadata$={kind:z,simpleName:"KType",interfaces:[]},Object.defineProperty(Er.prototype,"classifier",{get:function(){return this.classifier_50lv52$_0}}),Object.defineProperty(Er.prototype,"arguments",{get:function(){return this.arguments_lev63t$_0}}),Object.defineProperty(Er.prototype,"isMarkedNullable",{get:function(){return this.isMarkedNullable_748rxs$_0}}),Er.prototype.equals=function(e){return t.isType(e,Er)&&o(this.classifier,e.classifier)&&o(this.arguments,e.arguments)&&this.isMarkedNullable===e.isMarkedNullable},Er.prototype.hashCode=function(){return(31*((31*j(this.classifier)|0)+j(this.arguments)|0)|0)+j(this.isMarkedNullable)|0},Er.prototype.toString=function(){var e,i,n=t.isType(e=this.classifier,fr)?e:null;return(null==n?this.classifier.toString():null!=n.simpleName?n.simpleName:"(non-denotable type)")+(this.arguments.isEmpty()?"":_t(this.arguments,", ","<",">",void 0,void 0,(i=this,function(t){return i.asString_0(t)})))+(this.isMarkedNullable?"?":"")},Er.prototype.asString_0=function(t){return null==t.variance?"*":Tr(t.variance)+x(t.type)},Er.$metadata$={kind:h,simpleName:"KTypeImpl",interfaces:[Nr]},Pr.prototype.functionClass=function(t){var e,i,n;if(null!=(e=Zr[t]))i=e;else{var r=new $r(Function,"Function"+t,(n=t,function(t){return"function"==typeof t&&t.length===n}));Zr[t]=r,i=r}return i},Pr.$metadata$={kind:S,simpleName:"PrimitiveClasses",interfaces:[]};var Zr,Jr,Qr=null;function to(){return null===Qr&&new Pr,Qr}function eo(t){return Array.isArray(t)?io(t):no(t)}function io(t){switch(t.length){case 1:return no(t[0]);case 0:return gr();default:return new br}}function no(t){var e;if(t===String)return to().stringClass;var i=t.$metadata$;if(null!=i)if(null==i.$kClass$){var n=new mr(t);i.$kClass$=n,e=n}else e=i.$kClass$;else e=new mr(t);return e}function ro(){}function oo(t){fi(t,this),this.name="CharacterCodingException"}function so(t){this.string_0=void 0!==t?t:""}function ao(t,e){return lo(e=e||Object.create(so.prototype)),e}function lo(t){return t=t||Object.create(so.prototype),so.call(t,""),t}function uo(t){return vo(String.fromCharCode(t),"[\\s\\xA0]")}function po(t){return new $e(R.MIN_HIGH_SURROGATE,R.MAX_HIGH_SURROGATE).contains_mef7kx$(t)}function co(t){return new $e(R.MIN_LOW_SURROGATE,R.MAX_LOW_SURROGATE).contains_mef7kx$(t)}function ho(t){switch(t.toLowerCase()){case"nan":case"+nan":case"-nan":return!0;default:return!1}}function fo(t){if(!(2<=t&&t<=36))throw yi("radix "+t+" was not in valid range 2..36");return t}function _o(t,e){var i;return(i=t>=48&&t<=57?t-48:t>=65&&t<=90?t-65+10|0:t>=97&&t<=122?t-97+10|0:-1)>=e?-1:i}function mo(t){var e,i="";for(e=0;e!==t.length;++e){var n=a(t[e]);i+=String.fromCharCode(n)}return i}function $o(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length),Po().checkBoundsIndexes_cub51b$(e,i,t.length);for(var n="",r=e;r<i;r++)n+=String.fromCharCode(t[r]);return n}function yo(e,i,n){if(void 0===n&&(n=!1),n){var r=e.length,s=i.length,a=c.min(r,s);if(0===a)return r-s|0;for(var l=0;;){var u=c.min(l+16|0,a),p=e.substring(l,u),h=i.substring(l,u);if(!o(p,h)&&(p=p.toUpperCase(),h=h.toUpperCase(),!o(p,h)&&(p=p.toLowerCase(),h=h.toLowerCase(),!o(p,h))))return t.compareTo(p,h);if(u===a)break;l=u}return r-s|0}return t.compareTo(e,i)}function vo(t,e){var i=t.match(e);return null!=i&&0!==i.length}function go(t){return 0===t.length||vo("string"==typeof t?t:t.toString(),"^[\\s\\xA0]+$")}function bo(t,e,i,n,r,o){return void 0===o&&(o=!1),Wa(t,e,i,n,r,o)}function xo(t,e,i){if(i)throw new oo("Malformed sequence starting at "+(e-1|0));return 0|-t}function wo(t,e,i,n,r){if(0==(30&e)||i>=n)return xo(0,i,r);var o=t[i];return 128!=(192&o)?xo(0,i,r):e<<6^o^3968}function zo(t,e,i,n,r){if(i>=n)return xo(0,i,r);var o=t[i];if(0==(15&e)){if(160!=(224&o))return xo(0,i,r)}else if(13==(15&e)){if(128!=(224&o))return xo(0,i,r)}else if(128!=(192&o))return xo(0,i,r);if((i+1|0)===n)return xo(1,i,r);var s=t[i+1|0];return 128!=(192&s)?xo(1,i,r):e<<12^o<<6^s^-123008}function ko(t,e,i,n,r){i>=n&&xo(0,i,r);var o=t[i];if(0==(15&e)){if((240&o)<=128)return xo(0,i,r)}else if(4==(15&e)){if(128!=(240&o))return xo(0,i,r)}else{if((15&e)>4)return xo(0,i,r);if(128!=(192&o))return xo(0,i,r)}if((i+1|0)===n)return xo(1,i,r);var s=t[i+1|0];if(128!=(192&s))return xo(1,i,r);if((i+2|0)===n)return xo(2,i,r);var a=t[i+2|0];return 128!=(192&a)?xo(2,i,r):e<<18^o<<12^s<<6^a^3678080}function So(t,e,i,n){var r;if(!(e>=0&&i<=t.length&&e<=i))throw yi("Failed requirement.".toString());for(var o=e,s=lo();o<i;){var a=t[(r=o,o=r+1|0,r)];if(a>=0)s.append_s8itvh$(d(a));else if(a>>5==-2){var l=wo(t,a,o,i,n);l<=0?(s.append_s8itvh$(Jr),o=o+(0|-l)|0):(s.append_s8itvh$(d(l)),o=o+1|0)}else if(a>>4==-2){var u=zo(t,a,o,i,n);u<=0?(s.append_s8itvh$(Jr),o=o+(0|-u)|0):(s.append_s8itvh$(d(u)),o=o+2|0)}else if(a>>3==-2){var p=ko(t,a,o,i,n);if(p<=0)s.append_s8itvh$(Jr),o=o+(0|-p)|0;else{var c=p-65536>>10|55296,h=1023&p|56320;s.append_s8itvh$(d(c)),s.append_s8itvh$(d(h)),o=o+3|0}}else xo(0,o,n),s.append_s8itvh$(Jr)}return s.toString()}function Co(){}function No(){Po(),Co.call(this)}function Eo(){To=this}ro.$metadata$={kind:z,simpleName:"Appendable",interfaces:[]},oo.$metadata$={kind:h,simpleName:"CharacterCodingException",interfaces:[di]},Object.defineProperty(so.prototype,"length",{configurable:!0,get:function(){return this.string_0.length}}),so.prototype.charCodeAt=function(t){var e=this.string_0;if(!(t>=0&&t<=Ga(e)))throw new bi("index: "+t+", length: "+this.length+"}");return e.charCodeAt(t)},so.prototype.subSequence_vux9f0$=function(t,e){return this.string_0.substring(t,e)},so.prototype.append_s8itvh$=function(t){return this.string_0+=String.fromCharCode(t),this},so.prototype.append_gw00v9$=function(t){return this.string_0+=x(t),this},so.prototype.append_ezbsdh$=function(t,e,i){return this.appendRange_3peag4$(null!=t?t:"null",e,i)},so.prototype.reverse=function(){for(var t,e,i="",n=this.string_0.length-1|0;n>=0;){var r=this.string_0.charCodeAt((n=(t=n)-1|0,t));if(co(r)&&n>=0){var o=this.string_0.charCodeAt((n=(e=n)-1|0,e));i=po(o)?i+String.fromCharCode(s(o))+String.fromCharCode(s(r)):i+String.fromCharCode(s(r))+String.fromCharCode(s(o))}else i+=String.fromCharCode(r)}return this.string_0=i,this},so.prototype.append_s8jyv4$=function(t){return this.string_0+=x(t),this},so.prototype.append_6taknv$=function(t){return this.string_0+=t,this},so.prototype.append_4hbowm$=function(t){return this.string_0+=mo(t),this},so.prototype.append_61zpoe$=function(t){return this.append_pdl1vj$(t)},so.prototype.append_pdl1vj$=function(t){return this.string_0=this.string_0+(null!=t?t:"null"),this},so.prototype.capacity=function(){return this.length},so.prototype.ensureCapacity_za3lpa$=function(t){},so.prototype.indexOf_61zpoe$=function(t){return this.string_0.indexOf(t)},so.prototype.indexOf_bm4lxs$=function(t,e){return this.string_0.indexOf(t,e)},so.prototype.lastIndexOf_61zpoe$=function(t){return this.string_0.lastIndexOf(t)},so.prototype.lastIndexOf_bm4lxs$=function(t,e){return 0===t.length&&e<0?-1:this.string_0.lastIndexOf(t,e)},so.prototype.insert_fzusl$=function(t,e){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},so.prototype.insert_6t1mh3$=function(t,e){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+String.fromCharCode(s(e))+this.string_0.substring(t),this},so.prototype.insert_7u455s$=function(t,e){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+mo(e)+this.string_0.substring(t),this},so.prototype.insert_1u9bqd$=function(t,e){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},so.prototype.insert_6t2rgq$=function(t,e){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+x(e)+this.string_0.substring(t),this},so.prototype.insert_19mbxw$=function(t,e){return this.insert_vqvrqt$(t,e)},so.prototype.insert_vqvrqt$=function(t,e){Po().checkPositionIndex_6xvm5r$(t,this.length);var i=null!=e?e:"null";return this.string_0=this.string_0.substring(0,t)+i+this.string_0.substring(t),this},so.prototype.setLength_za3lpa$=function(t){if(t<0)throw yi("Negative new length: "+t+".");if(t<=this.length)this.string_0=this.string_0.substring(0,t);else for(var e=this.length;e<t;e++)this.string_0+=String.fromCharCode(0)},so.prototype.substring_za3lpa$=function(t){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0.substring(t)},so.prototype.substring_vux9f0$=function(t,e){return Po().checkBoundsIndexes_cub51b$(t,e,this.length),this.string_0.substring(t,e)},so.prototype.trimToSize=function(){},so.prototype.toString=function(){return this.string_0},so.prototype.clear=function(){return this.string_0="",this},so.prototype.set_6t1mh3$=function(t,e){Po().checkElementIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+String.fromCharCode(s(e))+this.string_0.substring(t+1|0)},so.prototype.setRange_98i29q$=function(t,e,i){return this.checkReplaceRange_0(t,e,this.length),this.string_0=this.string_0.substring(0,t)+i+this.string_0.substring(e),this},so.prototype.checkReplaceRange_0=function(t,e,i){if(t<0||t>i)throw new bi("startIndex: "+t+", length: "+i);if(t>e)throw yi("startIndex("+t+") > endIndex("+e+")")},so.prototype.deleteAt_za3lpa$=function(t){return Po().checkElementIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+this.string_0.substring(t+1|0),this},so.prototype.deleteRange_vux9f0$=function(t,e){return this.checkReplaceRange_0(t,e,this.length),this.string_0=this.string_0.substring(0,t)+this.string_0.substring(e),this},so.prototype.toCharArray_pqkatk$=function(t,e,i,n){var r;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=this.length),Po().checkBoundsIndexes_cub51b$(i,n,this.length),Po().checkBoundsIndexes_cub51b$(e,e+n-i|0,t.length);for(var o=e,s=i;s<n;s++)t[(r=o,o=r+1|0,r)]=this.string_0.charCodeAt(s)},so.prototype.appendRange_8chfmy$=function(t,e,i){return this.string_0+=$o(t,e,i),this},so.prototype.appendRange_3peag4$=function(t,e,i){var n=t.toString();return Po().checkBoundsIndexes_cub51b$(e,i,n.length),this.string_0+=n.substring(e,i),this},so.prototype.insertRange_ar8yzk$=function(t,e,i,n){return Po().checkPositionIndex_6xvm5r$(t,this.length),this.string_0=this.string_0.substring(0,t)+$o(e,i,n)+this.string_0.substring(t),this},so.prototype.insertRange_mnv9ne$=function(t,e,i,n){Po().checkPositionIndex_6xvm5r$(t,this.length);var r=e.toString();return Po().checkBoundsIndexes_cub51b$(i,n,r.length),this.string_0=this.string_0.substring(0,t)+r.substring(i,n)+this.string_0.substring(t),this},so.$metadata$={kind:h,simpleName:"StringBuilder",interfaces:[Tt,ro]},Co.prototype.contains_11rb$=function(e){var i;t:do{var n;if(t.isType(this,Mt)&&this.isEmpty()){i=!1;break t}for(n=this.iterator();n.hasNext();){var r=n.next();if(o(r,e)){i=!0;break t}}i=!1}while(0);return i},Co.prototype.containsAll_brywnq$=function(e){var i;t:do{var n;if(t.isType(e,Mt)&&e.isEmpty()){i=!0;break t}for(n=e.iterator();n.hasNext();){var r=n.next();if(!this.contains_11rb$(r)){i=!1;break t}}i=!0}while(0);return i},Co.prototype.isEmpty=function(){return 0===this.size},Co.prototype.toString=function(){return _t(this,", ","[","]",void 0,void 0,(t=this,function(e){return e===t?"(this Collection)":x(e)}));var t},Co.prototype.toArray=function(){return Ui(this)},Co.prototype.toArray_ro6dgy$=function(t){return Vi(this,t)},Co.$metadata$={kind:h,simpleName:"AbstractCollection",interfaces:[Mt]},Eo.prototype.checkElementIndex_6xvm5r$=function(t,e){if(t<0||t>=e)throw new bi("index: "+t+", size: "+e)},Eo.prototype.checkPositionIndex_6xvm5r$=function(t,e){if(t<0||t>e)throw new bi("index: "+t+", size: "+e)},Eo.prototype.checkRangeIndexes_cub51b$=function(t,e,i){if(t<0||e>i)throw new bi("fromIndex: "+t+", toIndex: "+e+", size: "+i);if(t>e)throw yi("fromIndex: "+t+" > toIndex: "+e)},Eo.prototype.checkBoundsIndexes_cub51b$=function(t,e,i){if(t<0||e>i)throw new bi("startIndex: "+t+", endIndex: "+e+", size: "+i);if(t>e)throw yi("startIndex: "+t+" > endIndex: "+e)},Eo.prototype.orderedHashCode_nykoif$=function(t){var e,i,n=1;for(e=t.iterator();e.hasNext();){var r=e.next();n=(31*n|0)+(null!=(i=null!=r?j(r):null)?i:0)|0}return n},Eo.prototype.orderedEquals_e92ka7$=function(t,e){var i;if(t.size!==e.size)return!1;var n=e.iterator();for(i=t.iterator();i.hasNext();){var r=i.next(),s=n.next();if(!o(r,s))return!1}return!0},Eo.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var To=null;function Po(){return null===To&&new Eo,To}function Oo(){Do(),this._keys_up5z3z$_0=null,this._values_6nw1f1$_0=null}function Mo(t){this.this$AbstractMap=t,qo.call(this)}function jo(t){this.closure$entryIterator=t}function Ao(t){this.this$AbstractMap=t,Co.call(this)}function Io(t){this.closure$entryIterator=t}function Ro(){Lo=this}Oo.prototype.containsKey_11rb$=function(t){return null!=this.implFindEntry_8k1i24$_0(t)},Oo.prototype.containsValue_11rc$=function(e){var i,n=this.entries;t:do{var r;if(t.isType(n,Mt)&&n.isEmpty()){i=!1;break t}for(r=n.iterator();r.hasNext();){var s=r.next();if(o(s.value,e)){i=!0;break t}}i=!1}while(0);return i},Oo.prototype.containsEntry_8hxqw4$=function(e){if(!t.isType(e,qt))return!1;var i=e.key,n=e.value,r=(t.isType(this,Dt)?this:P()).get_11rb$(i);if(!o(n,r))return!1;var s=null==r;return s&&(s=!(t.isType(this,Dt)?this:P()).containsKey_11rb$(i)),!s},Oo.prototype.equals=function(e){if(e===this)return!0;if(!t.isType(e,Dt))return!1;if(this.size!==e.size)return!1;var i,n=e.entries;t:do{var r;if(t.isType(n,Mt)&&n.isEmpty()){i=!0;break t}for(r=n.iterator();r.hasNext();){var o=r.next();if(!this.containsEntry_8hxqw4$(o)){i=!1;break t}}i=!0}while(0);return i},Oo.prototype.get_11rb$=function(t){var e;return null!=(e=this.implFindEntry_8k1i24$_0(t))?e.value:null},Oo.prototype.hashCode=function(){return j(this.entries)},Oo.prototype.isEmpty=function(){return 0===this.size},Object.defineProperty(Oo.prototype,"size",{configurable:!0,get:function(){return this.entries.size}}),Mo.prototype.contains_11rb$=function(t){return this.this$AbstractMap.containsKey_11rb$(t)},jo.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},jo.prototype.next=function(){return this.closure$entryIterator.next().key},jo.$metadata$={kind:h,interfaces:[Ut]},Mo.prototype.iterator=function(){return new jo(this.this$AbstractMap.entries.iterator())},Object.defineProperty(Mo.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMap.size}}),Mo.$metadata$={kind:h,interfaces:[qo]},Object.defineProperty(Oo.prototype,"keys",{configurable:!0,get:function(){return null==this._keys_up5z3z$_0&&(this._keys_up5z3z$_0=new Mo(this)),T(this._keys_up5z3z$_0)}}),Oo.prototype.toString=function(){return _t(this.entries,", ","{","}",void 0,void 0,(t=this,function(e){return t.toString_55he67$_0(e)}));var t},Oo.prototype.toString_55he67$_0=function(t){return this.toString_kthv8s$_0(t.key)+"="+this.toString_kthv8s$_0(t.value)},Oo.prototype.toString_kthv8s$_0=function(t){return t===this?"(this Map)":x(t)},Ao.prototype.contains_11rb$=function(t){return this.this$AbstractMap.containsValue_11rc$(t)},Io.prototype.hasNext=function(){return this.closure$entryIterator.hasNext()},Io.prototype.next=function(){return this.closure$entryIterator.next().value},Io.$metadata$={kind:h,interfaces:[Ut]},Ao.prototype.iterator=function(){return new Io(this.this$AbstractMap.entries.iterator())},Object.defineProperty(Ao.prototype,"size",{configurable:!0,get:function(){return this.this$AbstractMap.size}}),Ao.$metadata$={kind:h,interfaces:[Co]},Object.defineProperty(Oo.prototype,"values",{configurable:!0,get:function(){return null==this._values_6nw1f1$_0&&(this._values_6nw1f1$_0=new Ao(this)),T(this._values_6nw1f1$_0)}}),Oo.prototype.implFindEntry_8k1i24$_0=function(t){var e,i=this.entries;t:do{var n;for(n=i.iterator();n.hasNext();){var r=n.next();if(o(r.key,t)){e=r;break t}}e=null}while(0);return e},Ro.prototype.entryHashCode_9fthdn$=function(t){var e,i,n,r;return(null!=(i=null!=(e=t.key)?j(e):null)?i:0)^(null!=(r=null!=(n=t.value)?j(n):null)?r:0)},Ro.prototype.entryToString_9fthdn$=function(t){return x(t.key)+"="+x(t.value)},Ro.prototype.entryEquals_js7fox$=function(e,i){return!!t.isType(i,qt)&&o(e.key,i.key)&&o(e.value,i.value)},Ro.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Lo=null;function Do(){return null===Lo&&new Ro,Lo}function qo(){Uo(),Co.call(this)}function Fo(){Bo=this}Oo.$metadata$={kind:h,simpleName:"AbstractMap",interfaces:[Dt]},qo.prototype.equals=function(e){return e===this||!!t.isType(e,Rt)&&Uo().setEquals_y8f7en$(this,e)},qo.prototype.hashCode=function(){return Uo().unorderedHashCode_nykoif$(this)},Fo.prototype.unorderedHashCode_nykoif$=function(t){var e,i=0;for(e=t.iterator();e.hasNext();){var n,r=e.next();i=i+(null!=(n=null!=r?j(r):null)?n:0)|0}return i},Fo.prototype.setEquals_y8f7en$=function(t,e){return t.size===e.size&&t.containsAll_brywnq$(e)},Fo.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Bo=null;function Uo(){return null===Bo&&new Fo,Bo}function Vo(){Go=this}qo.$metadata$={kind:h,simpleName:"AbstractSet",interfaces:[Rt,Co]},Vo.prototype.hasNext=function(){return!1},Vo.prototype.hasPrevious=function(){return!1},Vo.prototype.nextIndex=function(){return 0},Vo.prototype.previousIndex=function(){return-1},Vo.prototype.next=function(){throw Ei()},Vo.prototype.previous=function(){throw Ei()},Vo.$metadata$={kind:S,simpleName:"EmptyIterator",interfaces:[Gt]};var Go=null;function Ho(){return null===Go&&new Vo,Go}function Wo(){Xo=this,this.serialVersionUID_0=L}Wo.prototype.equals=function(e){return t.isType(e,At)&&e.isEmpty()},Wo.prototype.hashCode=function(){return 1},Wo.prototype.toString=function(){return"[]"},Object.defineProperty(Wo.prototype,"size",{configurable:!0,get:function(){return 0}}),Wo.prototype.isEmpty=function(){return!0},Wo.prototype.contains_11rb$=function(t){return!1},Wo.prototype.containsAll_brywnq$=function(t){return t.isEmpty()},Wo.prototype.get_za3lpa$=function(t){throw new bi("Empty list doesn't contain element at index "+t+".")},Wo.prototype.indexOf_11rb$=function(t){return-1},Wo.prototype.lastIndexOf_11rb$=function(t){return-1},Wo.prototype.iterator=function(){return Ho()},Wo.prototype.listIterator=function(){return Ho()},Wo.prototype.listIterator_za3lpa$=function(t){if(0!==t)throw new bi("Index: "+t);return Ho()},Wo.prototype.subList_vux9f0$=function(t,e){if(0===t&&0===e)return this;throw new bi("fromIndex: "+t+", toIndex: "+e)},Wo.prototype.readResolve_0=function(){return Ko()},Wo.$metadata$={kind:S,simpleName:"EmptyList",interfaces:[Kn,rr,At]};var Xo=null;function Ko(){return null===Xo&&new Wo,Xo}function Yo(t){return new Zo(t,!1)}function Zo(t,e){this.values=t,this.isVarargs=e}function Jo(){return Ko()}function Qo(t){return 0===t.length?cn():dn(new Zo(t,!0))}function ts(t){return t.size-1|0}function es(t){switch(t.size){case 0:return Jo();case 1:return Gi(t.get_za3lpa$(0));default:return t}}function is(){throw new Ti("Index overflow has happened.")}function ns(){}function rs(t,e){this.index=t,this.value=e}function os(t){this.iteratorFactory_0=t}function ss(e,i){return t.isType(e,Mt)?e.size:i}function as(t){this.iterator_0=t,this.index_0=0}function ls(e,i){if(t.isType(e,us))return e.getOrImplicitDefault_11rb$(i);var n,r=e.get_11rb$(i);if(null==r&&!e.containsKey_11rb$(i))throw new Ni("Key "+i+" is missing in the map.");return null==(n=r)||t.isType(n,k)?n:P()}function us(){}function ps(){}function cs(t,e){this.map_a09uzx$_0=t,this.default_0=e}function hs(){ds=this,this.serialVersionUID_0=D}Object.defineProperty(Zo.prototype,"size",{configurable:!0,get:function(){return this.values.length}}),Zo.prototype.isEmpty=function(){return 0===this.values.length},Zo.prototype.contains_11rb$=function(t){return V(this.values,t)},Zo.prototype.containsAll_brywnq$=function(e){var i;t:do{var n;if(t.isType(e,Mt)&&e.isEmpty()){i=!0;break t}for(n=e.iterator();n.hasNext();){var r=n.next();if(!this.contains_11rb$(r)){i=!1;break t}}i=!0}while(0);return i},Zo.prototype.iterator=function(){return t.arrayIterator(this.values)},Zo.prototype.toArray=function(){var t=this.values;return this.isVarargs?t:t.slice()},Zo.$metadata$={kind:h,simpleName:"ArrayAsCollection",interfaces:[Mt]},ns.$metadata$={kind:z,simpleName:"Grouping",interfaces:[]},rs.$metadata$={kind:h,simpleName:"IndexedValue",interfaces:[]},rs.prototype.component1=function(){return this.index},rs.prototype.component2=function(){return this.value},rs.prototype.copy_wxm5ur$=function(t,e){return new rs(void 0===t?this.index:t,void 0===e?this.value:e)},rs.prototype.toString=function(){return"IndexedValue(index="+t.toString(this.index)+", value="+t.toString(this.value)+")"},rs.prototype.hashCode=function(){var e=0;return e=31*(e=31*e+t.hashCode(this.index)|0)+t.hashCode(this.value)|0},rs.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.index,e.index)&&t.equals(this.value,e.value)},os.prototype.iterator=function(){return new as(this.iteratorFactory_0())},os.$metadata$={kind:h,simpleName:"IndexingIterable",interfaces:[Pt]},as.prototype.hasNext=function(){return this.iterator_0.hasNext()},as.prototype.next=function(){var t;return new rs(Ki((t=this.index_0,this.index_0=t+1|0,t)),this.iterator_0.next())},as.$metadata$={kind:h,simpleName:"IndexingIterator",interfaces:[Ut]},us.$metadata$={kind:z,simpleName:"MapWithDefault",interfaces:[Dt]},hs.prototype.equals=function(e){return t.isType(e,Dt)&&e.isEmpty()},hs.prototype.hashCode=function(){return 0},hs.prototype.toString=function(){return"{}"},Object.defineProperty(hs.prototype,"size",{configurable:!0,get:function(){return 0}}),hs.prototype.isEmpty=function(){return!0},hs.prototype.containsKey_11rb$=function(t){return!1},hs.prototype.containsValue_11rc$=function(t){return!1},hs.prototype.get_11rb$=function(t){return null},Object.defineProperty(hs.prototype,"entries",{configurable:!0,get:function(){return Is()}}),Object.defineProperty(hs.prototype,"keys",{configurable:!0,get:function(){return Is()}}),Object.defineProperty(hs.prototype,"values",{configurable:!0,get:function(){return Ko()}}),hs.prototype.readResolve_0=function(){return fs()},hs.$metadata$={kind:S,simpleName:"EmptyMap",interfaces:[rr,Dt]};var ds=null;function fs(){return null===ds&&new hs,ds}function _s(){var e;return t.isType(e=fs(),Dt)?e:ir()}function ms(t){var e=Nn(t.length);return $s(e,t),e}function $s(t,e){var i;for(i=0;i!==e.length;++i){var n=e[i],r=n.component1(),o=n.component2();t.put_xwzc9p$(r,o)}}function ys(t,e){var i;for(i=e.iterator();i.hasNext();){var n=i.next(),r=n.component1(),o=n.component2();t.put_xwzc9p$(r,o)}}function vs(t,e){return ys(e,t),e}function gs(t,e){return $s(e,t),e}function bs(t){switch(t.size){case 0:return _s();case 1:default:return t}}function xs(t,e){return ws(t,e,!0)}function ws(t,e,i){for(var n={v:!1},r=t.iterator();r.hasNext();)e(r.next())===i&&(r.remove(),n.v=!0);return n.v}function zs(e,i){return function(e,i,n){var r,o,s,a;if(!t.isType(e,Kn))return ws(t.isType(r=e,Ot)?r:ir(),i,n);var l=0;o=ts(e);for(var u=0;u<=o;u++){var p=e.get_za3lpa$(u);i(p)!==n&&(l!==u&&e.set_wxm5ur$(l,p),l=l+1|0)}if(l<e.size){s=ts(e),a=l;for(var c=s;c>=a;c--)e.removeAt_za3lpa$(c);return!0}return!1}(e,i,!0)}function ks(){}function Ss(t){this.closure$iterator=t}function Cs(t){var e=new Es;return e.nextStep=ui(t,e,e),e}function Ns(){}function Es(){Ns.call(this),this.state_0=0,this.nextValue_0=null,this.nextIterator_0=null,this.nextStep=null}function Ts(t,e){this.sequence_0=t,this.transformer_0=e}function Ps(t){this.this$TransformingSequence=t,this.iterator=t.sequence_0.iterator()}function Os(t,e,i){this.sequence_0=t,this.transformer_0=e,this.iterator_0=i}function Ms(t){this.this$FlatteningSequence=t,this.iterator=t.sequence_0.iterator(),this.itemIterator=null}function js(){As=this,this.serialVersionUID_0=q}ks.$metadata$={kind:z,simpleName:"Sequence",interfaces:[]},Ss.prototype.iterator=function(){return this.closure$iterator()},Ss.$metadata$={kind:h,interfaces:[ks]},Ns.prototype.yieldAll_p1ys8y$=function(e,i){if(!t.isType(e,Mt)||!e.isEmpty())return this.yieldAll_1phuh2$(e.iterator(),i)},Ns.prototype.yieldAll_swo9gw$=function(t,e){return this.yieldAll_1phuh2$(t.iterator(),e)},Ns.$metadata$={kind:h,simpleName:"SequenceScope",interfaces:[]},Es.prototype.hasNext=function(){for(;;){switch(this.state_0){case 0:break;case 1:if(T(this.nextIterator_0).hasNext())return this.state_0=2,!0;this.nextIterator_0=null;break;case 4:return!1;case 3:case 2:return!0;default:throw this.exceptionalState_0()}this.state_0=5;var t=T(this.nextStep);this.nextStep=null,t.resumeWith_tl1gpc$(new dl(Pe()))}},Es.prototype.next=function(){var e;switch(this.state_0){case 0:case 1:return this.nextNotReady_0();case 2:return this.state_0=1,T(this.nextIterator_0).next();case 3:this.state_0=0;var i=null==(e=this.nextValue_0)||t.isType(e,k)?e:ir();return this.nextValue_0=null,i;default:throw this.exceptionalState_0()}},Es.prototype.nextNotReady_0=function(){if(this.hasNext())return this.next();throw Ei()},Es.prototype.exceptionalState_0=function(){switch(this.state_0){case 4:return Ei();case 5:return gi("Iterator has failed.");default:return gi("Unexpected state of the iterator: "+this.state_0)}},Es.prototype.yield_11rb$=function(t,e){return this.nextValue_0=t,this.state_0=3,(i=this,function(t){return i.nextStep=t,aa()})(e);var i},Es.prototype.yieldAll_1phuh2$=function(t,e){var i;if(t.hasNext())return this.nextIterator_0=t,this.state_0=2,(i=this,function(t){return i.nextStep=t,aa()})(e)},Es.prototype.resumeWith_tl1gpc$=function(e){var i;vl(e),null==(i=e.value)||t.isType(i,k)||P(),this.state_0=4},Object.defineProperty(Es.prototype,"context",{configurable:!0,get:function(){return Js()}}),Es.$metadata$={kind:h,simpleName:"SequenceBuilderIterator",interfaces:[Ds,Ut,Ns]},Ps.prototype.next=function(){return this.this$TransformingSequence.transformer_0(this.iterator.next())},Ps.prototype.hasNext=function(){return this.iterator.hasNext()},Ps.$metadata$={kind:h,interfaces:[Ut]},Ts.prototype.iterator=function(){return new Ps(this)},Ts.prototype.flatten_1tglza$=function(t){return new Os(this.sequence_0,this.transformer_0,t)},Ts.$metadata$={kind:h,simpleName:"TransformingSequence",interfaces:[ks]},Ms.prototype.next=function(){if(!this.ensureItemIterator_0())throw Ei();return T(this.itemIterator).next()},Ms.prototype.hasNext=function(){return this.ensureItemIterator_0()},Ms.prototype.ensureItemIterator_0=function(){var t;for(!1===(null!=(t=this.itemIterator)?t.hasNext():null)&&(this.itemIterator=null);null==this.itemIterator;){if(!this.iterator.hasNext())return!1;var e=this.iterator.next(),i=this.this$FlatteningSequence.iterator_0(this.this$FlatteningSequence.transformer_0(e));if(i.hasNext())return this.itemIterator=i,!0}return!0},Ms.$metadata$={kind:h,interfaces:[Ut]},Os.prototype.iterator=function(){return new Ms(this)},Os.$metadata$={kind:h,simpleName:"FlatteningSequence",interfaces:[ks]},js.prototype.equals=function(e){return t.isType(e,Rt)&&e.isEmpty()},js.prototype.hashCode=function(){return 0},js.prototype.toString=function(){return"[]"},Object.defineProperty(js.prototype,"size",{configurable:!0,get:function(){return 0}}),js.prototype.isEmpty=function(){return!0},js.prototype.contains_11rb$=function(t){return!1},js.prototype.containsAll_brywnq$=function(t){return t.isEmpty()},js.prototype.iterator=function(){return Ho()},js.prototype.readResolve_0=function(){return Is()},js.$metadata$={kind:S,simpleName:"EmptySet",interfaces:[rr,Rt]};var As=null;function Is(){return null===As&&new js,As}function Rs(){return Is()}function Ls(t){return J(t,Pn(t.length))}function Ds(){}function qs(){Us()}function Fs(){Bs=this}Ds.$metadata$={kind:z,simpleName:"Continuation",interfaces:[]},n("kotlin.kotlin.coroutines.suspendCoroutine_922awp$",r((function(){var e=p.kotlin.coroutines.intrinsics.intercepted_f9mg25$,i=p.kotlin.coroutines.SafeContinuation_init_wj8d80$;return function(n,r){var o;return t.suspendCall((o=n,function(t){var n=i(e(t));return o(n),n.getOrThrow()})(t.coroutineReceiver())),t.coroutineResult(t.coroutineReceiver())}}))),Fs.$metadata$={kind:S,simpleName:"Key",interfaces:[Hs]};var Bs=null;function Us(){return null===Bs&&new Fs,Bs}function Vs(){}function Gs(t,e){var i=t.minusKey_yeqjby$(e.key);if(i===Js())return e;var n=i.get_j3r2sn$(Us());if(null==n)return new Qs(i,e);var r=i.minusKey_yeqjby$(Us());return r===Js()?new Qs(e,n):new Qs(new Qs(r,e),n)}function Hs(){}function Ws(){}function Xs(t){this.key_no4tas$_0=t}function Ks(e,i){this.safeCast_9rw4bk$_0=i,this.topmostKey_3x72pn$_0=t.isType(e,Ks)?e.topmostKey_3x72pn$_0:e}function Ys(){Zs=this,this.serialVersionUID_0=u}qs.prototype.releaseInterceptedContinuation_k98bjh$=function(t){},qs.prototype.get_j3r2sn$=function(e){var i;return t.isType(e,Ks)?e.isSubKey_i2ksv9$(this.key)&&t.isType(i=e.tryCast_m1180o$(this),Ws)?i:null:Us()===e?t.isType(this,Ws)?this:ir():null},qs.prototype.minusKey_yeqjby$=function(e){return t.isType(e,Ks)?e.isSubKey_i2ksv9$(this.key)&&null!=e.tryCast_m1180o$(this)?Js():this:Us()===e?Js():this},qs.$metadata$={kind:z,simpleName:"ContinuationInterceptor",interfaces:[Ws]},Vs.prototype.plus_1fupul$=function(t){return t===Js()?this:t.fold_3cc69b$(this,Gs)},Hs.$metadata$={kind:z,simpleName:"Key",interfaces:[]},Ws.prototype.get_j3r2sn$=function(e){return o(this.key,e)?t.isType(this,Ws)?this:ir():null},Ws.prototype.fold_3cc69b$=function(t,e){return e(t,this)},Ws.prototype.minusKey_yeqjby$=function(t){return o(this.key,t)?Js():this},Ws.$metadata$={kind:z,simpleName:"Element",interfaces:[Vs]},Vs.$metadata$={kind:z,simpleName:"CoroutineContext",interfaces:[]},Object.defineProperty(Xs.prototype,"key",{get:function(){return this.key_no4tas$_0}}),Xs.$metadata$={kind:h,simpleName:"AbstractCoroutineContextElement",interfaces:[Ws]},Ks.prototype.tryCast_m1180o$=function(t){return this.safeCast_9rw4bk$_0(t)},Ks.prototype.isSubKey_i2ksv9$=function(t){return t===this||this.topmostKey_3x72pn$_0===t},Ks.$metadata$={kind:h,simpleName:"AbstractCoroutineContextKey",interfaces:[Hs]},Ys.prototype.readResolve_0=function(){return Js()},Ys.prototype.get_j3r2sn$=function(t){return null},Ys.prototype.fold_3cc69b$=function(t,e){return t},Ys.prototype.plus_1fupul$=function(t){return t},Ys.prototype.minusKey_yeqjby$=function(t){return this},Ys.prototype.hashCode=function(){return 0},Ys.prototype.toString=function(){return"EmptyCoroutineContext"},Ys.$metadata$={kind:S,simpleName:"EmptyCoroutineContext",interfaces:[rr,Vs]};var Zs=null;function Js(){return null===Zs&&new Ys,Zs}function Qs(t,e){this.left_0=t,this.element_0=e}function ta(t,e){return 0===t.length?e.toString():t+", "+e}function ea(t){null===sa&&new ia,this.elements=t}function ia(){sa=this,this.serialVersionUID_0=u}Qs.prototype.get_j3r2sn$=function(e){for(var i,n=this;;){if(null!=(i=n.element_0.get_j3r2sn$(e)))return i;var r=n.left_0;if(!t.isType(r,Qs))return r.get_j3r2sn$(e);n=r}},Qs.prototype.fold_3cc69b$=function(t,e){return e(this.left_0.fold_3cc69b$(t,e),this.element_0)},Qs.prototype.minusKey_yeqjby$=function(t){if(null!=this.element_0.get_j3r2sn$(t))return this.left_0;var e=this.left_0.minusKey_yeqjby$(t);return e===this.left_0?this:e===Js()?this.element_0:new Qs(e,this.element_0)},Qs.prototype.size_0=function(){for(var e,i,n=this,r=2;;){if(null==(i=t.isType(e=n.left_0,Qs)?e:null))return r;n=i,r=r+1|0}},Qs.prototype.contains_0=function(t){return o(this.get_j3r2sn$(t.key),t)},Qs.prototype.containsAll_0=function(e){for(var i,n=e;;){if(!this.contains_0(n.element_0))return!1;var r=n.left_0;if(!t.isType(r,Qs))return this.contains_0(t.isType(i=r,Ws)?i:ir());n=r}},Qs.prototype.equals=function(e){return this===e||t.isType(e,Qs)&&e.size_0()===this.size_0()&&e.containsAll_0(this)},Qs.prototype.hashCode=function(){return j(this.left_0)+j(this.element_0)|0},Qs.prototype.toString=function(){return"["+this.fold_3cc69b$("",ta)+"]"},Qs.prototype.writeReplace_0=function(){var e,i,n,r=this.size_0(),o=t.newArray(r,null),s={v:0};if(this.fold_3cc69b$(Pe(),(i=o,n=s,function(t,e){var r;return i[(r=n.v,n.v=r+1|0,r)]=e,Ee})),s.v!==r)throw gi("Check failed.".toString());return new ea(t.isArray(e=o)?e:ir())},ia.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var na,ra,oa,sa=null;function aa(){return pa()}function la(t,e){N.call(this),this.name$=t,this.ordinal$=e}function ua(){ua=function(){},na=new la("COROUTINE_SUSPENDED",0),ra=new la("UNDECIDED",1),oa=new la("RESUMED",2)}function pa(){return ua(),na}function ca(){return ua(),ra}function ha(){return ua(),oa}function da(){ma()}function fa(){_a=this,da.call(this),this.defaultRandom_0=cr()}ea.prototype.readResolve_0=function(){var t,e=this.elements,i=Js();for(t=0;t!==e.length;++t){var n=e[t];i=i.plus_1fupul$(n)}return i},ea.$metadata$={kind:h,simpleName:"Serialized",interfaces:[rr]},Qs.$metadata$={kind:h,simpleName:"CombinedContext",interfaces:[rr,Vs]},n("kotlin.kotlin.coroutines.intrinsics.suspendCoroutineUninterceptedOrReturn_zb0pmy$",r((function(){var t=p.kotlin.NotImplementedError;return function(e,i){throw new t("Implementation of suspendCoroutineUninterceptedOrReturn is intrinsic")}}))),la.$metadata$={kind:h,simpleName:"CoroutineSingletons",interfaces:[N]},la.values=function(){return[pa(),ca(),ha()]},la.valueOf_61zpoe$=function(t){switch(t){case"COROUTINE_SUSPENDED":return pa();case"UNDECIDED":return ca();case"RESUMED":return ha();default:nr("No enum constant kotlin.coroutines.intrinsics.CoroutineSingletons."+t)}},da.prototype.nextInt=function(){return this.nextBits_za3lpa$(32)},da.prototype.nextInt_za3lpa$=function(t){return this.nextInt_vux9f0$(0,t)},da.prototype.nextInt_vux9f0$=function(t,e){var i;ga(t,e);var n=e-t|0;if(n>0||-2147483648===n){if((n&(0|-n))===n){var r=ya(n);i=this.nextBits_za3lpa$(r)}else{var o;do{var s=this.nextInt()>>>1;o=s%n}while((s-o+(n-1)|0)<0);i=o}return t+i|0}for(;;){var a=this.nextInt();if(t<=a&&a<e)return a}},da.prototype.nextLong=function(){return t.Long.fromInt(this.nextInt()).shiftLeft(32).add(t.Long.fromInt(this.nextInt()))},da.prototype.nextLong_s8cxhz$=function(t){return this.nextLong_3pjtqy$(u,t)},da.prototype.nextLong_3pjtqy$=function(e,i){var n;ba(e,i);var r=i.subtract(e);if(r.toNumber()>0){var s;if(o(r.and(r.unaryMinus()),r)){var a=r.toInt(),l=r.shiftRightUnsigned(32).toInt();if(0!==a){var u=ya(a);n=t.Long.fromInt(this.nextBits_za3lpa$(u)).and(w)}else if(1===l)n=t.Long.fromInt(this.nextInt()).and(w);else{var p=ya(l);n=t.Long.fromInt(this.nextBits_za3lpa$(p)).shiftLeft(32).add(t.Long.fromInt(this.nextInt()))}s=n}else{var c;do{var h=this.nextLong().shiftRightUnsigned(1);c=h.modulo(r)}while(h.subtract(c).add(r.subtract(t.Long.fromInt(1))).toNumber()<0);s=c}return e.add(s)}for(;;){var d=this.nextLong();if(e.lessThanOrEqual(d)&&d.lessThan(i))return d}},da.prototype.nextBoolean=function(){return 0!==this.nextBits_za3lpa$(1)},da.prototype.nextDouble=function(){return hr(this.nextBits_za3lpa$(26),this.nextBits_za3lpa$(27))},da.prototype.nextDouble_14dthe$=function(t){return this.nextDouble_lu1900$(0,t)},da.prototype.nextDouble_lu1900$=function(t,e){var i;xa(t,e);var n=e-t;if(lr(n)&&pr(t)&&pr(e)){var r=this.nextDouble()*(e/2-t/2);i=t+r+r}else i=t+this.nextDouble()*n;var o=i;return o>=e?or(e):o},da.prototype.nextFloat=function(){return this.nextBits_za3lpa$(24)/16777216},da.prototype.nextBytes_mj6st8$$default=function(t,e,i){var n,r,o;if(!(0<=e&&e<=t.length&&0<=i&&i<=t.length))throw yi((n=e,r=i,o=t,function(){return"fromIndex ("+n+") or toIndex ("+r+") are out of range: 0.."+o.length+"."})().toString());if(!(e<=i))throw yi(("fromIndex ("+e+") must be not greater than toIndex ("+i+").").toString());for(var s=(i-e|0)/4|0,a={v:e},l=0;l<s;l++){var u=this.nextInt();t[a.v]=_(u),t[a.v+1|0]=_(u>>>8),t[a.v+2|0]=_(u>>>16),t[a.v+3|0]=_(u>>>24),a.v=a.v+4|0}for(var p=i-a.v|0,c=this.nextBits_za3lpa$(8*p|0),h=0;h<p;h++)t[a.v+h|0]=_(c>>>(8*h|0));return t},da.prototype.nextBytes_mj6st8$=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=t.length),n?n(t,e,i):this.nextBytes_mj6st8$$default(t,e,i)},da.prototype.nextBytes_fqrh44$=function(t){return this.nextBytes_mj6st8$(t,0,t.length)},da.prototype.nextBytes_za3lpa$=function(t){return this.nextBytes_fqrh44$(new Int8Array(t))},fa.prototype.nextBits_za3lpa$=function(t){return this.defaultRandom_0.nextBits_za3lpa$(t)},fa.prototype.nextInt=function(){return this.defaultRandom_0.nextInt()},fa.prototype.nextInt_za3lpa$=function(t){return this.defaultRandom_0.nextInt_za3lpa$(t)},fa.prototype.nextInt_vux9f0$=function(t,e){return this.defaultRandom_0.nextInt_vux9f0$(t,e)},fa.prototype.nextLong=function(){return this.defaultRandom_0.nextLong()},fa.prototype.nextLong_s8cxhz$=function(t){return this.defaultRandom_0.nextLong_s8cxhz$(t)},fa.prototype.nextLong_3pjtqy$=function(t,e){return this.defaultRandom_0.nextLong_3pjtqy$(t,e)},fa.prototype.nextBoolean=function(){return this.defaultRandom_0.nextBoolean()},fa.prototype.nextDouble=function(){return this.defaultRandom_0.nextDouble()},fa.prototype.nextDouble_14dthe$=function(t){return this.defaultRandom_0.nextDouble_14dthe$(t)},fa.prototype.nextDouble_lu1900$=function(t,e){return this.defaultRandom_0.nextDouble_lu1900$(t,e)},fa.prototype.nextFloat=function(){return this.defaultRandom_0.nextFloat()},fa.prototype.nextBytes_fqrh44$=function(t){return this.defaultRandom_0.nextBytes_fqrh44$(t)},fa.prototype.nextBytes_za3lpa$=function(t){return this.defaultRandom_0.nextBytes_za3lpa$(t)},fa.prototype.nextBytes_mj6st8$$default=function(t,e,i){return this.defaultRandom_0.nextBytes_mj6st8$(t,e,i)},fa.$metadata$={kind:S,simpleName:"Default",interfaces:[da]};var _a=null;function ma(){return null===_a&&new fa,_a}function $a(t){return ka(t,t>>31)}function ya(t){return 31-c.clz32(t)|0}function va(t,e){return t>>>32-e&(0|-e)>>31}function ga(t,e){if(!(e>t))throw yi(wa(t,e).toString())}function ba(t,e){if(!(e.compareTo_11rb$(t)>0))throw yi(wa(t,e).toString())}function xa(t,e){if(!(e>t))throw yi(wa(t,e).toString())}function wa(t,e){return"Random range is empty: ["+t.toString()+", "+e.toString()+")."}function za(t,e,i,n,r,o){if(da.call(this),this.x_0=t,this.y_0=e,this.z_0=i,this.w_0=n,this.v_0=r,this.addend_0=o,0==(this.x_0|this.y_0|this.z_0|this.w_0|this.v_0))throw yi("Initial state must have at least one non-zero element.".toString());for(var s=0;s<64;s++)this.nextInt()}function ka(t,e,i){return i=i||Object.create(za.prototype),za.call(i,t,e,0,0,~t,t<<10^e>>>4),i}function Sa(t,e){this.start_p1gsmm$_0=t,this.endInclusive_jj4lf7$_0=e}function Ca(t,e){if(!t)throw yi("Step must be positive, was: "+e.toString()+".")}function Na(){}function Ea(e,i,n){null!=n?e.append_gw00v9$(n(i)):null==i||t.isCharSequence(i)?e.append_gw00v9$(i):t.isChar(i)?e.append_s8itvh$(a(i)):e.append_gw00v9$(x(i))}function Ta(t,e,i){return void 0===i&&(i=!1),t===e||!!i&&(d(String.fromCharCode(0|t).toUpperCase().charCodeAt(0))===d(String.fromCharCode(0|e).toUpperCase().charCodeAt(0))||d(String.fromCharCode(0|t).toLowerCase().charCodeAt(0))===d(String.fromCharCode(0|e).toLowerCase().charCodeAt(0)))}function Pa(e,i){var n;void 0===i&&(i="");var r,o=sl(e),s=cn();for(r=o.iterator();r.hasNext();){var a=r.next();go(a)||s.add_11rb$(a)}var l,u=s,p=hn(ss(u,10));for(l=u.iterator();l.hasNext();){var c=l.next();p.add_11rb$(Oa(c))}var h,d,f,_,m=null!=(n=dt(p))?n:0,$=(e.length,t.imul(i.length,o.size),0===(h=i).length?Ma:(d=h,function(t){return d+t})),y=ts(o),v=cn(),g=0;for(f=o.iterator();f.hasNext();){var b,x,w,z=f.next(),k=Ki((g=(_=g)+1|0,_));null!=(b=0!==k&&k!==y||!go(z)?null!=(w=null!=(x=Nt(z,m))?$(x):null)?w:z:null)&&v.add_11rb$(b)}return ft(v,ao(),"\n").toString()}function Oa(t){var e;t:do{var i,n,r,o;n=(i=Va(t)).first,r=i.last,o=i.step;for(var l=n;l<=r;l+=o)if(!uo(a(s(t.charCodeAt(l))))){e=l;break t}e=-1}while(0);var u=e;return-1===u?t.length:u}function Ma(t){return t}function ja(t){return Aa(t,10)}function Aa(t,e){var i;if(null==(i=Da(t,e)))return null;var n=i;return n<m.MIN_VALUE||n>m.MAX_VALUE?null:_(n)}function Ia(t){return Ra(t,10)}function Ra(t,e){var i;if(null==(i=Da(t,e)))return null;var n=i;return n<b.MIN_VALUE||n>b.MAX_VALUE?null:g(n)}function La(t){return Da(t,10)}function Da(e,i){fo(i);var n,r,o,s=e.length;if(0===s)return null;var a=e.charCodeAt(0);if(a<48){if(1===s)return null;if(n=1,45===a)r=!0,o=-2147483648;else{if(43!==a)return null;r=!1,o=-2147483647}}else n=0,r=!1,o=-2147483647;for(var l=-59652323,u=0,p=n;p<s;p++){var c=_o(e.charCodeAt(p),i);if(c<0)return null;if(u<l){if(-59652323!==l)return null;if(u<(l=o/i|0))return null}if((u=t.imul(u,i))<(o+c|0))return null;u=u-c|0}return r?u:0|-u}function qa(t){return Fa(t,10)}function Fa(e,i){fo(i);var n,r,s,a=e.length;if(0===a)return null;var l=e.charCodeAt(0);if(l<48){if(1===a)return null;if(n=1,45===l)r=!0,s=y;else{if(43!==l)return null;r=!1,s=F}}else n=0,r=!1,s=F;for(var p=B,c=p,h=u,d=n;d<a;d++){var f=_o(e.charCodeAt(d),i);if(f<0)return null;if(h.compareTo_11rb$(c)<0){if(!o(c,p))return null;if(c=s.div(t.Long.fromInt(i)),h.compareTo_11rb$(c)<0)return null}if((h=h.multiply(t.Long.fromInt(i))).compareTo_11rb$(s.add(t.Long.fromInt(f)))<0)return null;h=h.subtract(t.Long.fromInt(f))}return r?h:h.unaryMinus()}function Ba(t){throw new ki("Invalid number format: '"+t+"'")}function Ua(t){this.this$iterator=t,Xt.call(this),this.index_0=0}function Va(t){return new be(0,t.length-1|0)}function Ga(t){return t.length-1|0}function Ha(e,i){return t.subSequence(e,i.start,i.endInclusive+1|0).toString()}function Wa(t,e,i,n,r,o){if(n<0||e<0||e>(t.length-r|0)||n>(i.length-r|0))return!1;for(var s=0;s<r;s++)if(!Ta(t.charCodeAt(e+s|0),i.charCodeAt(n+s|0),o))return!1;return!0}function Xa(t,e,i,n){var r,o;if(void 0===i&&(i=0),void 0===n&&(n=!1),!n&&1===e.length&&"string"==typeof t){var l=W(e);return t.indexOf(String.fromCharCode(l),i)}r=vt(i,0),o=Ga(t);for(var u=r;u<=o;u++){var p,c=t.charCodeAt(u);t:do{var h;for(h=0;h!==e.length;++h){var d=a(e[h]);if(Ta(a(s(d)),c,n)){p=!0;break t}}p=!1}while(0);if(p)return u}return-1}function Ka(t,e,i,n){if(void 0===i&&(i=Ga(t)),void 0===n&&(n=!1),!n&&1===e.length&&"string"==typeof t){var r=W(e);return t.lastIndexOf(String.fromCharCode(r),i)}for(var o=gt(i,Ga(t));o>=0;o--){var l,u=t.charCodeAt(o);t:do{var p;for(p=0;p!==e.length;++p){var c=a(e[p]);if(Ta(a(s(c)),u,n)){l=!0;break t}}l=!1}while(0);if(l)return o}return-1}function Ya(t,e,i,n,r,o){var s,a;void 0===o&&(o=!1);var l=o?mt(gt(i,Ga(t)),vt(n,0)):new be(vt(i,0),gt(n,t.length));if("string"==typeof t&&"string"==typeof e)for(s=l.iterator();s.hasNext();){var u=s.next();if(bo(e,0,t,u,e.length,r))return u}else for(a=l.iterator();a.hasNext();){var p=a.next();if(Wa(e,0,t,p,e.length,r))return p}return-1}function Za(e,i,n,r){return void 0===n&&(n=0),void 0===r&&(r=!1),r||"string"!=typeof e?Xa(e,t.charArrayOf(i),n,r):e.indexOf(String.fromCharCode(i),n)}function Ja(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=!1),n||"string"!=typeof t?Ya(t,e,i,t.length,n):t.indexOf(e,i)}function Qa(t,e,i,n){return void 0===i&&(i=Ga(t)),void 0===n&&(n=!1),n||"string"!=typeof t?Ya(t,e,i,0,n,!0):t.lastIndexOf(e,i)}function tl(t,e,i,n){this.input_0=t,this.startIndex_0=e,this.limit_0=i,this.getNextMatch_0=n}function el(t){this.this$DelimitedRangesSequence=t,this.nextState=-1,this.currentStartIndex=bt(t.startIndex_0,0,t.input_0.length),this.nextSearchIndex=this.currentStartIndex,this.nextItem=null,this.counter=0}function il(t,e){return function(i,n){var r;return null!=(r=function(t,e,i,n,r){var o,s;if(!n&&1===e.size){var a=rt(e),l=r?Qa(t,a,i):Ja(t,a,i);return l<0?null:xl(l,a)}var u=r?mt(gt(i,Ga(t)),0):new be(vt(i,0),t.length);if("string"==typeof t)for(o=u.iterator();o.hasNext();){var p,c=o.next();t:do{var h;for(h=e.iterator();h.hasNext();){var d=h.next();if(bo(d,0,t,c,d.length,n)){p=d;break t}}p=null}while(0);if(null!=p)return xl(c,p)}else for(s=u.iterator();s.hasNext();){var f,_=s.next();t:do{var m;for(m=e.iterator();m.hasNext();){var $=m.next();if(Wa($,0,t,_,$.length,n)){f=$;break t}}f=null}while(0);if(null!=f)return xl(_,f)}return null}(i,t,n,e,!1))?xl(r.first,r.second.length):null}}function nl(t,e,i,n,r){if(void 0===i&&(i=0),void 0===n&&(n=!1),void 0===r&&(r=0),!(r>=0))throw yi(("Limit must be non-negative, but was "+r+".").toString());return new tl(t,i,r,il(Li(e),n))}function rl(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=0),St(nl(t,e,void 0,i,n),(r=t,function(t){return Ha(r,t)}));var r}function ol(t){return rl(t,["\r\n","\n","\r"])}function sl(t){return zt(ol(t))}function al(){}function ll(){ul=this}da.$metadata$={kind:h,simpleName:"Random",interfaces:[]},za.prototype.nextInt=function(){var t=this.x_0;t^=t>>>2,this.x_0=this.y_0,this.y_0=this.z_0,this.z_0=this.w_0;var e=this.v_0;return this.w_0=e,t=t^t<<1^e^e<<4,this.v_0=t,this.addend_0=this.addend_0+362437|0,t+this.addend_0|0},za.prototype.nextBits_za3lpa$=function(t){return va(this.nextInt(),t)},za.$metadata$={kind:h,simpleName:"XorWowRandom",interfaces:[da]},Na.$metadata$={kind:z,simpleName:"KClassifier",interfaces:[]},Ua.prototype.nextChar=function(){var t,e;return t=this.index_0,this.index_0=t+1|0,e=t,this.this$iterator.charCodeAt(e)},Ua.prototype.hasNext=function(){return this.index_0<this.this$iterator.length},Ua.$metadata$={kind:h,interfaces:[Xt]},el.prototype.calcNext_0=function(){if(this.nextSearchIndex<0)this.nextState=0,this.nextItem=null;else{if(this.this$DelimitedRangesSequence.limit_0>0&&(this.counter=this.counter+1|0,this.counter>=this.this$DelimitedRangesSequence.limit_0)||this.nextSearchIndex>this.this$DelimitedRangesSequence.input_0.length)this.nextItem=new be(this.currentStartIndex,Ga(this.this$DelimitedRangesSequence.input_0)),this.nextSearchIndex=-1;else{var t=this.this$DelimitedRangesSequence.getNextMatch_0(this.this$DelimitedRangesSequence.input_0,this.nextSearchIndex);if(null==t)this.nextItem=new be(this.currentStartIndex,Ga(this.this$DelimitedRangesSequence.input_0)),this.nextSearchIndex=-1;else{var e=t.component1(),i=t.component2();this.nextItem=yt(this.currentStartIndex,e),this.currentStartIndex=e+i|0,this.nextSearchIndex=this.currentStartIndex+(0===i?1:0)|0}}this.nextState=1}},el.prototype.next=function(){var e;if(-1===this.nextState&&this.calcNext_0(),0===this.nextState)throw Ei();var i=t.isType(e=this.nextItem,be)?e:ir();return this.nextItem=null,this.nextState=-1,i},el.prototype.hasNext=function(){return-1===this.nextState&&this.calcNext_0(),1===this.nextState},el.$metadata$={kind:h,interfaces:[Ut]},tl.prototype.iterator=function(){return new el(this)},tl.$metadata$={kind:h,simpleName:"DelimitedRangesSequence",interfaces:[ks]},al.$metadata$={kind:z,simpleName:"Lazy",interfaces:[]},ll.$metadata$={kind:S,simpleName:"UNINITIALIZED_VALUE",interfaces:[]};var ul=null;function pl(){return null===ul&&new ll,ul}function cl(t){this.initializer_0=t,this._value_0=pl()}function hl(t){this.value_7taq70$_0=t}function dl(t){ml(),this.value=t}function fl(){_l=this}Object.defineProperty(cl.prototype,"value",{configurable:!0,get:function(){var e;return this._value_0===pl()&&(this._value_0=T(this.initializer_0)(),this.initializer_0=null),null==(e=this._value_0)||t.isType(e,k)?e:ir()}}),cl.prototype.isInitialized=function(){return this._value_0!==pl()},cl.prototype.toString=function(){return this.isInitialized()?x(this.value):"Lazy value not initialized yet."},cl.prototype.writeReplace_0=function(){return new hl(this.value)},cl.$metadata$={kind:h,simpleName:"UnsafeLazyImpl",interfaces:[rr,al]},Object.defineProperty(hl.prototype,"value",{get:function(){return this.value_7taq70$_0}}),hl.prototype.isInitialized=function(){return!0},hl.prototype.toString=function(){return x(this.value)},hl.$metadata$={kind:h,simpleName:"InitializedLazyImpl",interfaces:[rr,al]},Object.defineProperty(dl.prototype,"isSuccess",{configurable:!0,get:function(){return!t.isType(this.value,$l)}}),Object.defineProperty(dl.prototype,"isFailure",{configurable:!0,get:function(){return t.isType(this.value,$l)}}),dl.prototype.getOrNull=n("kotlin.kotlin.Result.getOrNull",r((function(){var e=Object,i=t.throwCCE;return function(){var n;return this.isFailure?null:null==(n=this.value)||t.isType(n,e)?n:i()}}))),dl.prototype.exceptionOrNull=function(){return t.isType(this.value,$l)?this.value.exception:null},dl.prototype.toString=function(){return t.isType(this.value,$l)?this.value.toString():"Success("+x(this.value)+")"},fl.prototype.success_mh5how$=n("kotlin.kotlin.Result.Companion.success_mh5how$",r((function(){var t=p.kotlin.Result;return function(e){return new t(e)}}))),fl.prototype.failure_lsqlk3$=n("kotlin.kotlin.Result.Companion.failure_lsqlk3$",r((function(){var t=p.kotlin.createFailure_tcv7n7$,e=p.kotlin.Result;return function(i){return new e(t(i))}}))),fl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var _l=null;function ml(){return null===_l&&new fl,_l}function $l(t){this.exception=t}function yl(t){return new $l(t)}function vl(e){if(t.isType(e.value,$l))throw e.value.exception}function gl(t){void 0===t&&(t="An operation is not implemented."),hi(t,this),this.name="NotImplementedError"}function bl(t,e){this.first=t,this.second=e}function xl(t,e){return new bl(t,e)}function wl(t,e,i){this.first=t,this.second=e,this.third=i}function zl(t){Cl(),this.data=t}function kl(){Sl=this,this.MIN_VALUE=new zl(0),this.MAX_VALUE=new zl(-1),this.SIZE_BYTES=1,this.SIZE_BITS=8}$l.prototype.equals=function(e){return t.isType(e,$l)&&o(this.exception,e.exception)},$l.prototype.hashCode=function(){return j(this.exception)},$l.prototype.toString=function(){return"Failure("+this.exception+")"},$l.$metadata$={kind:h,simpleName:"Failure",interfaces:[rr]},dl.$metadata$={kind:h,simpleName:"Result",interfaces:[rr]},dl.prototype.unbox=function(){return this.value},dl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.value)|0},dl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.value,e.value)},gl.$metadata$={kind:h,simpleName:"NotImplementedError",interfaces:[ci]},bl.prototype.toString=function(){return"("+this.first+", "+this.second+")"},bl.$metadata$={kind:h,simpleName:"Pair",interfaces:[rr]},bl.prototype.component1=function(){return this.first},bl.prototype.component2=function(){return this.second},bl.prototype.copy_xwzc9p$=function(t,e){return new bl(void 0===t?this.first:t,void 0===e?this.second:e)},bl.prototype.hashCode=function(){var e=0;return e=31*(e=31*e+t.hashCode(this.first)|0)+t.hashCode(this.second)|0},bl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.first,e.first)&&t.equals(this.second,e.second)},wl.prototype.toString=function(){return"("+this.first+", "+this.second+", "+this.third+")"},wl.$metadata$={kind:h,simpleName:"Triple",interfaces:[rr]},wl.prototype.component1=function(){return this.first},wl.prototype.component2=function(){return this.second},wl.prototype.component3=function(){return this.third},wl.prototype.copy_1llc0w$=function(t,e,i){return new wl(void 0===t?this.first:t,void 0===e?this.second:e,void 0===i?this.third:i)},wl.prototype.hashCode=function(){var e=0;return e=31*(e=31*(e=31*e+t.hashCode(this.first)|0)+t.hashCode(this.second)|0)+t.hashCode(this.third)|0},wl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.first,e.first)&&t.equals(this.second,e.second)&&t.equals(this.third,e.third)},kl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Sl=null;function Cl(){return null===Sl&&new kl,Sl}function Nl(t){Pl(),this.data=t}function El(){Tl=this,this.MIN_VALUE=new Nl(0),this.MAX_VALUE=new Nl(-1),this.SIZE_BYTES=4,this.SIZE_BITS=32}zl.prototype.compareTo_11rb$=n("kotlin.kotlin.UByte.compareTo_11rb$",(function(e){return t.primitiveCompareTo(255&this.data,255&e.data)})),zl.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.UByte.compareTo_6hrhkk$",(function(e){return t.primitiveCompareTo(255&this.data,65535&e.data)})),zl.prototype.compareTo_s87ys9$=n("kotlin.kotlin.UByte.compareTo_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(new t(255&this.data).data,i.data)}}))),zl.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UByte.compareTo_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)).data,r.data)}}))),zl.prototype.plus_mpmjao$=n("kotlin.kotlin.UByte.plus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+new t(255&e.data).data|0)}}))),zl.prototype.plus_6hrhkk$=n("kotlin.kotlin.UByte.plus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+new t(65535&e.data).data|0)}}))),zl.prototype.plus_s87ys9$=n("kotlin.kotlin.UByte.plus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data+e.data|0)}}))),zl.prototype.plus_mpgczg$=n("kotlin.kotlin.UByte.plus_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),zl.prototype.minus_mpmjao$=n("kotlin.kotlin.UByte.minus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-new t(255&e.data).data|0)}}))),zl.prototype.minus_6hrhkk$=n("kotlin.kotlin.UByte.minus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-new t(65535&e.data).data|0)}}))),zl.prototype.minus_s87ys9$=n("kotlin.kotlin.UByte.minus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(255&this.data).data-e.data|0)}}))),zl.prototype.minus_mpgczg$=n("kotlin.kotlin.UByte.minus_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),zl.prototype.times_mpmjao$=n("kotlin.kotlin.UByte.times_mpmjao$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,new e(255&i.data).data))}}))),zl.prototype.times_6hrhkk$=n("kotlin.kotlin.UByte.times_6hrhkk$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,new e(65535&i.data).data))}}))),zl.prototype.times_s87ys9$=n("kotlin.kotlin.UByte.times_s87ys9$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(255&this.data).data,i.data))}}))),zl.prototype.times_mpgczg$=n("kotlin.kotlin.UByte.times_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),zl.prototype.div_mpmjao$=n("kotlin.kotlin.UByte.div_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),new t(255&i.data))}}))),zl.prototype.div_6hrhkk$=n("kotlin.kotlin.UByte.div_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),new t(65535&i.data))}}))),zl.prototype.div_s87ys9$=n("kotlin.kotlin.UByte.div_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(255&this.data),i)}}))),zl.prototype.div_mpgczg$=n("kotlin.kotlin.UByte.div_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),zl.prototype.rem_mpmjao$=n("kotlin.kotlin.UByte.rem_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),new t(255&i.data))}}))),zl.prototype.rem_6hrhkk$=n("kotlin.kotlin.UByte.rem_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),new t(65535&i.data))}}))),zl.prototype.rem_s87ys9$=n("kotlin.kotlin.UByte.rem_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(255&this.data),i)}}))),zl.prototype.rem_mpgczg$=n("kotlin.kotlin.UByte.rem_mpgczg$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),zl.prototype.inc=n("kotlin.kotlin.UByte.inc",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data+1))}}))),zl.prototype.dec=n("kotlin.kotlin.UByte.dec",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data-1))}}))),zl.prototype.rangeTo_mpmjao$=n("kotlin.kotlin.UByte.rangeTo_mpmjao$",r((function(){var t=p.kotlin.ranges.UIntRange,e=p.kotlin.UInt;return function(i){return new t(new e(255&this.data),new e(255&i.data))}}))),zl.prototype.and_mpmjao$=n("kotlin.kotlin.UByte.and_mpmjao$",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data&t.data))}}))),zl.prototype.or_mpmjao$=n("kotlin.kotlin.UByte.or_mpmjao$",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data|t.data))}}))),zl.prototype.xor_mpmjao$=n("kotlin.kotlin.UByte.xor_mpmjao$",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(t){return new e(i(this.data^t.data))}}))),zl.prototype.inv=n("kotlin.kotlin.UByte.inv",r((function(){var e=p.kotlin.UByte,i=t.toByte;return function(){return new e(i(~this.data))}}))),zl.prototype.toByte=n("kotlin.kotlin.UByte.toByte",(function(){return this.data})),zl.prototype.toShort=n("kotlin.kotlin.UByte.toShort",r((function(){var e=t.toShort;return function(){return e(255&this.data)}}))),zl.prototype.toInt=n("kotlin.kotlin.UByte.toInt",(function(){return 255&this.data})),zl.prototype.toLong=n("kotlin.kotlin.UByte.toLong",r((function(){var e=t.Long.fromInt(255);return function(){return t.Long.fromInt(this.data).and(e)}}))),zl.prototype.toUByte=n("kotlin.kotlin.UByte.toUByte",(function(){return this})),zl.prototype.toUShort=n("kotlin.kotlin.UByte.toUShort",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(){return new e(i(255&this.data))}}))),zl.prototype.toUInt=n("kotlin.kotlin.UByte.toUInt",r((function(){var t=p.kotlin.UInt;return function(){return new t(255&this.data)}}))),zl.prototype.toULong=n("kotlin.kotlin.UByte.toULong",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),zl.prototype.toFloat=n("kotlin.kotlin.UByte.toFloat",(function(){return 255&this.data})),zl.prototype.toDouble=n("kotlin.kotlin.UByte.toDouble",(function(){return 255&this.data})),zl.prototype.toString=function(){return(255&this.data).toString()},zl.$metadata$={kind:h,simpleName:"UByte",interfaces:[E]},zl.prototype.unbox=function(){return this.data},zl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},zl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},El.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Tl=null;function Pl(){return null===Tl&&new El,Tl}function Ol(t,e){Al(),Il.call(this,t,e,1)}function Ml(){jl=this,this.EMPTY=new Ol(Pl().MAX_VALUE,Pl().MIN_VALUE)}Nl.prototype.compareTo_mpmjao$=n("kotlin.kotlin.UInt.compareTo_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(this.data,new t(255&i.data).data)}}))),Nl.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.UInt.compareTo_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(this.data,new t(65535&i.data).data)}}))),Nl.prototype.compareTo_11rb$=n("kotlin.kotlin.UInt.compareTo_11rb$",r((function(){var t=p.kotlin.uintCompare_vux9f0$;return function(e){return t(this.data,e.data)}}))),Nl.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UInt.compareTo_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)).data,r.data)}}))),Nl.prototype.plus_mpmjao$=n("kotlin.kotlin.UInt.plus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+new t(255&e.data).data|0)}}))),Nl.prototype.plus_6hrhkk$=n("kotlin.kotlin.UInt.plus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+new t(65535&e.data).data|0)}}))),Nl.prototype.plus_s87ys9$=n("kotlin.kotlin.UInt.plus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data+e.data|0)}}))),Nl.prototype.plus_mpgczg$=n("kotlin.kotlin.UInt.plus_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),Nl.prototype.minus_mpmjao$=n("kotlin.kotlin.UInt.minus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-new t(255&e.data).data|0)}}))),Nl.prototype.minus_6hrhkk$=n("kotlin.kotlin.UInt.minus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-new t(65535&e.data).data|0)}}))),Nl.prototype.minus_s87ys9$=n("kotlin.kotlin.UInt.minus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data-e.data|0)}}))),Nl.prototype.minus_mpgczg$=n("kotlin.kotlin.UInt.minus_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),Nl.prototype.times_mpmjao$=n("kotlin.kotlin.UInt.times_mpmjao$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,new e(255&i.data).data))}}))),Nl.prototype.times_6hrhkk$=n("kotlin.kotlin.UInt.times_6hrhkk$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,new e(65535&i.data).data))}}))),Nl.prototype.times_s87ys9$=n("kotlin.kotlin.UInt.times_s87ys9$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(this.data,i.data))}}))),Nl.prototype.times_mpgczg$=n("kotlin.kotlin.UInt.times_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),Nl.prototype.div_mpmjao$=n("kotlin.kotlin.UInt.div_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(this,new t(255&i.data))}}))),Nl.prototype.div_6hrhkk$=n("kotlin.kotlin.UInt.div_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(this,new t(65535&i.data))}}))),Nl.prototype.div_s87ys9$=n("kotlin.kotlin.UInt.div_s87ys9$",r((function(){var t=p.kotlin.uintDivide_oqfnby$;return function(e){return t(this,e)}}))),Nl.prototype.div_mpgczg$=n("kotlin.kotlin.UInt.div_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),Nl.prototype.rem_mpmjao$=n("kotlin.kotlin.UInt.rem_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(this,new t(255&i.data))}}))),Nl.prototype.rem_6hrhkk$=n("kotlin.kotlin.UInt.rem_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(this,new t(65535&i.data))}}))),Nl.prototype.rem_s87ys9$=n("kotlin.kotlin.UInt.rem_s87ys9$",r((function(){var t=p.kotlin.uintRemainder_oqfnby$;return function(e){return t(this,e)}}))),Nl.prototype.rem_mpgczg$=n("kotlin.kotlin.UInt.rem_mpgczg$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),Nl.prototype.inc=n("kotlin.kotlin.UInt.inc",r((function(){var t=p.kotlin.UInt;return function(){return new t(this.data+1|0)}}))),Nl.prototype.dec=n("kotlin.kotlin.UInt.dec",r((function(){var t=p.kotlin.UInt;return function(){return new t(this.data-1|0)}}))),Nl.prototype.rangeTo_s87ys9$=n("kotlin.kotlin.UInt.rangeTo_s87ys9$",r((function(){var t=p.kotlin.ranges.UIntRange;return function(e){return new t(this,e)}}))),Nl.prototype.shl_za3lpa$=n("kotlin.kotlin.UInt.shl_za3lpa$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data<<e)}}))),Nl.prototype.shr_za3lpa$=n("kotlin.kotlin.UInt.shr_za3lpa$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data>>>e)}}))),Nl.prototype.and_s87ys9$=n("kotlin.kotlin.UInt.and_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data&e.data)}}))),Nl.prototype.or_s87ys9$=n("kotlin.kotlin.UInt.or_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data|e.data)}}))),Nl.prototype.xor_s87ys9$=n("kotlin.kotlin.UInt.xor_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(this.data^e.data)}}))),Nl.prototype.inv=n("kotlin.kotlin.UInt.inv",r((function(){var t=p.kotlin.UInt;return function(){return new t(~this.data)}}))),Nl.prototype.toByte=n("kotlin.kotlin.UInt.toByte",r((function(){var e=t.toByte;return function(){return e(this.data)}}))),Nl.prototype.toShort=n("kotlin.kotlin.UInt.toShort",r((function(){var e=t.toShort;return function(){return e(this.data)}}))),Nl.prototype.toInt=n("kotlin.kotlin.UInt.toInt",(function(){return this.data})),Nl.prototype.toLong=n("kotlin.kotlin.UInt.toLong",r((function(){var e=new t.Long(-1,0);return function(){return t.Long.fromInt(this.data).and(e)}}))),Nl.prototype.toUByte=n("kotlin.kotlin.UInt.toUByte",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data))}}))),Nl.prototype.toUShort=n("kotlin.kotlin.UInt.toUShort",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data))}}))),Nl.prototype.toUInt=n("kotlin.kotlin.UInt.toUInt",(function(){return this})),Nl.prototype.toULong=n("kotlin.kotlin.UInt.toULong",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),Nl.prototype.toFloat=n("kotlin.kotlin.UInt.toFloat",r((function(){var t=p.kotlin.uintToDouble_za3lpa$;return function(){return t(this.data)}}))),Nl.prototype.toDouble=n("kotlin.kotlin.UInt.toDouble",r((function(){var t=p.kotlin.uintToDouble_za3lpa$;return function(){return t(this.data)}}))),Nl.prototype.toString=function(){return t.Long.fromInt(this.data).and(w).toString()},Nl.$metadata$={kind:h,simpleName:"UInt",interfaces:[E]},Nl.prototype.unbox=function(){return this.data},Nl.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},Nl.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},Object.defineProperty(Ol.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(Ol.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),Ol.prototype.contains_mef7kx$=function(t){var e=pu(this.first.data,t.data)<=0;return e&&(e=pu(t.data,this.last.data)<=0),e},Ol.prototype.isEmpty=function(){return pu(this.first.data,this.last.data)>0},Ol.prototype.equals=function(e){var i,n;return t.isType(e,Ol)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null))},Ol.prototype.hashCode=function(){return this.isEmpty()?-1:(31*this.first.data|0)+this.last.data|0},Ol.prototype.toString=function(){return this.first.toString()+".."+this.last},Ml.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var jl=null;function Al(){return null===jl&&new Ml,jl}function Il(t,e,i){if(Dl(),0===i)throw yi("Step must be non-zero.");if(-2147483648===i)throw yi("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=ru(t,e,i),this.step=i}function Rl(){Ll=this}Ol.$metadata$={kind:h,simpleName:"UIntRange",interfaces:[me,Il]},Il.prototype.iterator=function(){return new ql(this.first,this.last,this.step)},Il.prototype.isEmpty=function(){return this.step>0?pu(this.first.data,this.last.data)>0:pu(this.first.data,this.last.data)<0},Il.prototype.equals=function(e){var i,n;return t.isType(e,Il)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null)&&this.step===e.step)},Il.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*this.first.data|0)+this.last.data|0)|0)+this.step|0},Il.prototype.toString=function(){return this.step>0?this.first.toString()+".."+this.last+" step "+this.step:this.first.toString()+" downTo "+this.last+" step "+(0|-this.step)},Rl.prototype.fromClosedRange_fjk8us$=function(t,e,i){return new Il(t,e,i)},Rl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ll=null;function Dl(){return null===Ll&&new Rl,Ll}function ql(t,e,i){Fl.call(this),this.finalElement_0=e,this.hasNext_0=i>0?pu(t.data,e.data)<=0:pu(t.data,e.data)>=0,this.step_0=new Nl(i),this.next_0=this.hasNext_0?t:this.finalElement_0}function Fl(){}function Bl(){}function Ul(t){Hl(),this.data=t}function Vl(){Gl=this,this.MIN_VALUE=new Ul(u),this.MAX_VALUE=new Ul(f),this.SIZE_BYTES=8,this.SIZE_BITS=64}Il.$metadata$={kind:h,simpleName:"UIntProgression",interfaces:[Pt]},ql.prototype.hasNext=function(){return this.hasNext_0},ql.prototype.nextUInt=function(){var t=this.next_0;if(null!=t&&t.equals(this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=new Nl(this.next_0.data+this.step_0.data|0);return t},ql.$metadata$={kind:h,simpleName:"UIntProgressionIterator",interfaces:[Fl]},Fl.prototype.next=function(){return this.nextUInt()},Fl.$metadata$={kind:h,simpleName:"UIntIterator",interfaces:[Ut]},Bl.prototype.next=function(){return this.nextULong()},Bl.$metadata$={kind:h,simpleName:"ULongIterator",interfaces:[Ut]},Vl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Gl=null;function Hl(){return null===Gl&&new Vl,Gl}function Wl(t,e){Yl(),Zl.call(this,t,e,C)}function Xl(){Kl=this,this.EMPTY=new Wl(Hl().MAX_VALUE,Hl().MIN_VALUE)}Ul.prototype.compareTo_mpmjao$=n("kotlin.kotlin.ULong.compareTo_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(this.data,new i(t.Long.fromInt(r.data).and(e)).data)}}))),Ul.prototype.compareTo_6hrhkk$=n("kotlin.kotlin.ULong.compareTo_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(this.data,new i(t.Long.fromInt(r.data).and(e)).data)}}))),Ul.prototype.compareTo_s87ys9$=n("kotlin.kotlin.ULong.compareTo_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(this.data,new i(t.Long.fromInt(r.data).and(e)).data)}}))),Ul.prototype.compareTo_11rb$=n("kotlin.kotlin.ULong.compareTo_11rb$",r((function(){var t=p.kotlin.ulongCompare_3pjtqy$;return function(e){return t(this.data,e.data)}}))),Ul.prototype.plus_mpmjao$=n("kotlin.kotlin.ULong.plus_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_6hrhkk$=n("kotlin.kotlin.ULong.plus_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_s87ys9$=n("kotlin.kotlin.ULong.plus_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.add(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.plus_mpgczg$=n("kotlin.kotlin.ULong.plus_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.add(e.data))}}))),Ul.prototype.minus_mpmjao$=n("kotlin.kotlin.ULong.minus_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_6hrhkk$=n("kotlin.kotlin.ULong.minus_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_s87ys9$=n("kotlin.kotlin.ULong.minus_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.subtract(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.minus_mpgczg$=n("kotlin.kotlin.ULong.minus_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.subtract(e.data))}}))),Ul.prototype.times_mpmjao$=n("kotlin.kotlin.ULong.times_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_6hrhkk$=n("kotlin.kotlin.ULong.times_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_s87ys9$=n("kotlin.kotlin.ULong.times_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong;return function(n){return new i(this.data.multiply(new i(t.Long.fromInt(n.data).and(e)).data))}}))),Ul.prototype.times_mpgczg$=n("kotlin.kotlin.ULong.times_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.multiply(e.data))}}))),Ul.prototype.div_mpmjao$=n("kotlin.kotlin.ULong.div_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.div_6hrhkk$=n("kotlin.kotlin.ULong.div_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.div_s87ys9$=n("kotlin.kotlin.ULong.div_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.div_mpgczg$=n("kotlin.kotlin.ULong.div_mpgczg$",r((function(){var t=p.kotlin.ulongDivide_jpm79w$;return function(e){return t(this,e)}}))),Ul.prototype.rem_mpmjao$=n("kotlin.kotlin.ULong.rem_mpmjao$",r((function(){var e=t.Long.fromInt(255),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.rem_6hrhkk$=n("kotlin.kotlin.ULong.rem_6hrhkk$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.rem_s87ys9$=n("kotlin.kotlin.ULong.rem_s87ys9$",r((function(){var e=new t.Long(-1,0),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(this,new i(t.Long.fromInt(r.data).and(e)))}}))),Ul.prototype.rem_mpgczg$=n("kotlin.kotlin.ULong.rem_mpgczg$",r((function(){var t=p.kotlin.ulongRemainder_jpm79w$;return function(e){return t(this,e)}}))),Ul.prototype.inc=n("kotlin.kotlin.ULong.inc",r((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.inc())}}))),Ul.prototype.dec=n("kotlin.kotlin.ULong.dec",r((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.dec())}}))),Ul.prototype.rangeTo_mpgczg$=n("kotlin.kotlin.ULong.rangeTo_mpgczg$",r((function(){var t=p.kotlin.ranges.ULongRange;return function(e){return new t(this,e)}}))),Ul.prototype.shl_za3lpa$=n("kotlin.kotlin.ULong.shl_za3lpa$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.shiftLeft(e))}}))),Ul.prototype.shr_za3lpa$=n("kotlin.kotlin.ULong.shr_za3lpa$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.shiftRightUnsigned(e))}}))),Ul.prototype.and_mpgczg$=n("kotlin.kotlin.ULong.and_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.and(e.data))}}))),Ul.prototype.or_mpgczg$=n("kotlin.kotlin.ULong.or_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.or(e.data))}}))),Ul.prototype.xor_mpgczg$=n("kotlin.kotlin.ULong.xor_mpgczg$",r((function(){var t=p.kotlin.ULong;return function(e){return new t(this.data.xor(e.data))}}))),Ul.prototype.inv=n("kotlin.kotlin.ULong.inv",r((function(){var t=p.kotlin.ULong;return function(){return new t(this.data.inv())}}))),Ul.prototype.toByte=n("kotlin.kotlin.ULong.toByte",r((function(){var e=t.toByte;return function(){return e(this.data.toInt())}}))),Ul.prototype.toShort=n("kotlin.kotlin.ULong.toShort",r((function(){var e=t.toShort;return function(){return e(this.data.toInt())}}))),Ul.prototype.toInt=n("kotlin.kotlin.ULong.toInt",(function(){return this.data.toInt()})),Ul.prototype.toLong=n("kotlin.kotlin.ULong.toLong",(function(){return this.data})),Ul.prototype.toUByte=n("kotlin.kotlin.ULong.toUByte",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data.toInt()))}}))),Ul.prototype.toUShort=n("kotlin.kotlin.ULong.toUShort",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data.toInt()))}}))),Ul.prototype.toUInt=n("kotlin.kotlin.ULong.toUInt",r((function(){var t=p.kotlin.UInt;return function(){return new t(this.data.toInt())}}))),Ul.prototype.toULong=n("kotlin.kotlin.ULong.toULong",(function(){return this})),Ul.prototype.toFloat=n("kotlin.kotlin.ULong.toFloat",r((function(){var t=p.kotlin.ulongToDouble_s8cxhz$;return function(){return t(this.data)}}))),Ul.prototype.toDouble=n("kotlin.kotlin.ULong.toDouble",r((function(){var t=p.kotlin.ulongToDouble_s8cxhz$;return function(){return t(this.data)}}))),Ul.prototype.toString=function(){return fu(this.data)},Ul.$metadata$={kind:h,simpleName:"ULong",interfaces:[E]},Ul.prototype.unbox=function(){return this.data},Ul.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},Ul.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)},Object.defineProperty(Wl.prototype,"start",{configurable:!0,get:function(){return this.first}}),Object.defineProperty(Wl.prototype,"endInclusive",{configurable:!0,get:function(){return this.last}}),Wl.prototype.contains_mef7kx$=function(t){var e=cu(this.first.data,t.data)<=0;return e&&(e=cu(t.data,this.last.data)<=0),e},Wl.prototype.isEmpty=function(){return cu(this.first.data,this.last.data)>0},Wl.prototype.equals=function(e){var i,n;return t.isType(e,Wl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null))},Wl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*new Ul(this.first.data.xor(new Ul(this.first.data.shiftRightUnsigned(32)).data)).data.toInt()|0)+new Ul(this.last.data.xor(new Ul(this.last.data.shiftRightUnsigned(32)).data)).data.toInt()|0},Wl.prototype.toString=function(){return this.first.toString()+".."+this.last},Xl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Kl=null;function Yl(){return null===Kl&&new Xl,Kl}function Zl(t,e,i){if(tu(),o(i,u))throw yi("Step must be non-zero.");if(o(i,y))throw yi("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.first=t,this.last=ou(t,e,i),this.step=i}function Jl(){Ql=this}Wl.$metadata$={kind:h,simpleName:"ULongRange",interfaces:[me,Zl]},Zl.prototype.iterator=function(){return new eu(this.first,this.last,this.step)},Zl.prototype.isEmpty=function(){return this.step.toNumber()>0?cu(this.first.data,this.last.data)>0:cu(this.first.data,this.last.data)<0},Zl.prototype.equals=function(e){var i,n;return t.isType(e,Zl)&&(this.isEmpty()&&e.isEmpty()||(null!=(i=this.first)?i.equals(e.first):null)&&(null!=(n=this.last)?n.equals(e.last):null)&&o(this.step,e.step))},Zl.prototype.hashCode=function(){return this.isEmpty()?-1:(31*((31*new Ul(this.first.data.xor(new Ul(this.first.data.shiftRightUnsigned(32)).data)).data.toInt()|0)+new Ul(this.last.data.xor(new Ul(this.last.data.shiftRightUnsigned(32)).data)).data.toInt()|0)|0)+this.step.xor(this.step.shiftRightUnsigned(32)).toInt()|0},Zl.prototype.toString=function(){return this.step.toNumber()>0?this.first.toString()+".."+this.last+" step "+this.step.toString():this.first.toString()+" downTo "+this.last+" step "+this.step.unaryMinus().toString()},Jl.prototype.fromClosedRange_15zasp$=function(t,e,i){return new Zl(t,e,i)},Jl.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var Ql=null;function tu(){return null===Ql&&new Jl,Ql}function eu(t,e,i){Bl.call(this),this.finalElement_0=e,this.hasNext_0=i.toNumber()>0?cu(t.data,e.data)<=0:cu(t.data,e.data)>=0,this.step_0=new Ul(i),this.next_0=this.hasNext_0?t:this.finalElement_0}function iu(t,e,i){var n=hu(t,i),r=hu(e,i);return pu(n.data,r.data)>=0?new Nl(n.data-r.data|0):new Nl(new Nl(n.data-r.data|0).data+i.data|0)}function nu(t,e,i){var n=du(t,i),r=du(e,i);return cu(n.data,r.data)>=0?new Ul(n.data.subtract(r.data)):new Ul(new Ul(n.data.subtract(r.data)).data.add(i.data))}function ru(t,e,i){if(i>0)return pu(t.data,e.data)>=0?e:new Nl(e.data-iu(e,t,new Nl(i)).data|0);if(i<0)return pu(t.data,e.data)<=0?e:new Nl(e.data+iu(t,e,new Nl(0|-i)).data|0);throw yi("Step is zero.")}function ou(t,e,i){if(i.toNumber()>0)return cu(t.data,e.data)>=0?e:new Ul(e.data.subtract(nu(e,t,new Ul(i)).data));if(i.toNumber()<0)return cu(t.data,e.data)<=0?e:new Ul(e.data.add(nu(t,e,new Ul(i.unaryMinus())).data));throw yi("Step is zero.")}function su(t){uu(),this.data=t}function au(){lu=this,this.MIN_VALUE=new su(0),this.MAX_VALUE=new su(-1),this.SIZE_BYTES=2,this.SIZE_BITS=16}Zl.$metadata$={kind:h,simpleName:"ULongProgression",interfaces:[Pt]},eu.prototype.hasNext=function(){return this.hasNext_0},eu.prototype.nextULong=function(){var t=this.next_0;if(null!=t&&t.equals(this.finalElement_0)){if(!this.hasNext_0)throw Ei();this.hasNext_0=!1}else this.next_0=new Ul(this.next_0.data.add(this.step_0.data));return t},eu.$metadata$={kind:h,simpleName:"ULongProgressionIterator",interfaces:[Bl]},au.$metadata$={kind:S,simpleName:"Companion",interfaces:[]};var lu=null;function uu(){return null===lu&&new au,lu}function pu(e,i){return t.primitiveCompareTo(-2147483648^e,-2147483648^i)}function cu(t,e){return t.xor(y).compareTo_11rb$(e.xor(y))}function hu(e,i){return new Nl(t.Long.fromInt(e.data).and(w).modulo(t.Long.fromInt(i.data).and(w)).toInt())}function du(t,e){var i=t.data,n=e.data;if(n.toNumber()<0)return cu(t.data,e.data)<0?t:new Ul(t.data.subtract(e.data));if(i.toNumber()>=0)return new Ul(i.modulo(n));var r=i.shiftRightUnsigned(1).div(n).shiftLeft(1),o=i.subtract(r.multiply(n));return new Ul(o.subtract(cu(new Ul(o).data,new Ul(n).data)>=0?n:u))}function fu(t){return _u(t,10)}function _u(e,i){if(e.toNumber()>=0)return Ri(e,i);var n=e.shiftRightUnsigned(1).div(t.Long.fromInt(i)).shiftLeft(1),r=e.subtract(n.multiply(t.Long.fromInt(i)));return r.toNumber()>=i&&(r=r.subtract(t.Long.fromInt(i)),n=n.add(t.Long.fromInt(1))),Ri(n,i)+Ri(r,i)}su.prototype.compareTo_mpmjao$=n("kotlin.kotlin.UShort.compareTo_mpmjao$",(function(e){return t.primitiveCompareTo(65535&this.data,255&e.data)})),su.prototype.compareTo_11rb$=n("kotlin.kotlin.UShort.compareTo_11rb$",(function(e){return t.primitiveCompareTo(65535&this.data,65535&e.data)})),su.prototype.compareTo_s87ys9$=n("kotlin.kotlin.UShort.compareTo_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintCompare_vux9f0$;return function(i){return e(new t(65535&this.data).data,i.data)}}))),su.prototype.compareTo_mpgczg$=n("kotlin.kotlin.UShort.compareTo_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongCompare_3pjtqy$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)).data,r.data)}}))),su.prototype.plus_mpmjao$=n("kotlin.kotlin.UShort.plus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+new t(255&e.data).data|0)}}))),su.prototype.plus_6hrhkk$=n("kotlin.kotlin.UShort.plus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+new t(65535&e.data).data|0)}}))),su.prototype.plus_s87ys9$=n("kotlin.kotlin.UShort.plus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data+e.data|0)}}))),su.prototype.plus_mpgczg$=n("kotlin.kotlin.UShort.plus_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.add(n.data))}}))),su.prototype.minus_mpmjao$=n("kotlin.kotlin.UShort.minus_mpmjao$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-new t(255&e.data).data|0)}}))),su.prototype.minus_6hrhkk$=n("kotlin.kotlin.UShort.minus_6hrhkk$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-new t(65535&e.data).data|0)}}))),su.prototype.minus_s87ys9$=n("kotlin.kotlin.UShort.minus_s87ys9$",r((function(){var t=p.kotlin.UInt;return function(e){return new t(new t(65535&this.data).data-e.data|0)}}))),su.prototype.minus_mpgczg$=n("kotlin.kotlin.UShort.minus_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.subtract(n.data))}}))),su.prototype.times_mpmjao$=n("kotlin.kotlin.UShort.times_mpmjao$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,new e(255&i.data).data))}}))),su.prototype.times_6hrhkk$=n("kotlin.kotlin.UShort.times_6hrhkk$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,new e(65535&i.data).data))}}))),su.prototype.times_s87ys9$=n("kotlin.kotlin.UShort.times_s87ys9$",r((function(){var e=p.kotlin.UInt;return function(i){return new e(t.imul(new e(65535&this.data).data,i.data))}}))),su.prototype.times_mpgczg$=n("kotlin.kotlin.UShort.times_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(n){return new i(new i(t.Long.fromInt(this.data).and(e)).data.multiply(n.data))}}))),su.prototype.div_mpmjao$=n("kotlin.kotlin.UShort.div_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),new t(255&i.data))}}))),su.prototype.div_6hrhkk$=n("kotlin.kotlin.UShort.div_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),new t(65535&i.data))}}))),su.prototype.div_s87ys9$=n("kotlin.kotlin.UShort.div_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintDivide_oqfnby$;return function(i){return e(new t(65535&this.data),i)}}))),su.prototype.div_mpgczg$=n("kotlin.kotlin.UShort.div_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongDivide_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),su.prototype.rem_mpmjao$=n("kotlin.kotlin.UShort.rem_mpmjao$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),new t(255&i.data))}}))),su.prototype.rem_6hrhkk$=n("kotlin.kotlin.UShort.rem_6hrhkk$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),new t(65535&i.data))}}))),su.prototype.rem_s87ys9$=n("kotlin.kotlin.UShort.rem_s87ys9$",r((function(){var t=p.kotlin.UInt,e=p.kotlin.uintRemainder_oqfnby$;return function(i){return e(new t(65535&this.data),i)}}))),su.prototype.rem_mpgczg$=n("kotlin.kotlin.UShort.rem_mpgczg$",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong,n=p.kotlin.ulongRemainder_jpm79w$;return function(r){return n(new i(t.Long.fromInt(this.data).and(e)),r)}}))),su.prototype.inc=n("kotlin.kotlin.UShort.inc",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data+1))}}))),su.prototype.dec=n("kotlin.kotlin.UShort.dec",r((function(){var e=t.toShort,i=p.kotlin.UShort;return function(){return new i(e(this.data-1))}}))),su.prototype.rangeTo_6hrhkk$=n("kotlin.kotlin.UShort.rangeTo_6hrhkk$",r((function(){var t=p.kotlin.ranges.UIntRange,e=p.kotlin.UInt;return function(i){return new t(new e(65535&this.data),new e(65535&i.data))}}))),su.prototype.and_6hrhkk$=n("kotlin.kotlin.UShort.and_6hrhkk$",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data&t.data))}}))),su.prototype.or_6hrhkk$=n("kotlin.kotlin.UShort.or_6hrhkk$",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data|t.data))}}))),su.prototype.xor_6hrhkk$=n("kotlin.kotlin.UShort.xor_6hrhkk$",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(t){return new e(i(this.data^t.data))}}))),su.prototype.inv=n("kotlin.kotlin.UShort.inv",r((function(){var e=p.kotlin.UShort,i=t.toShort;return function(){return new e(i(~this.data))}}))),su.prototype.toByte=n("kotlin.kotlin.UShort.toByte",r((function(){var e=t.toByte;return function(){return e(this.data)}}))),su.prototype.toShort=n("kotlin.kotlin.UShort.toShort",(function(){return this.data})),su.prototype.toInt=n("kotlin.kotlin.UShort.toInt",(function(){return 65535&this.data})),su.prototype.toLong=n("kotlin.kotlin.UShort.toLong",r((function(){var e=t.Long.fromInt(65535);return function(){return t.Long.fromInt(this.data).and(e)}}))),su.prototype.toUByte=n("kotlin.kotlin.UShort.toUByte",r((function(){var e=t.toByte,i=p.kotlin.UByte;return function(){return new i(e(this.data))}}))),su.prototype.toUShort=n("kotlin.kotlin.UShort.toUShort",(function(){return this})),su.prototype.toUInt=n("kotlin.kotlin.UShort.toUInt",r((function(){var t=p.kotlin.UInt;return function(){return new t(65535&this.data)}}))),su.prototype.toULong=n("kotlin.kotlin.UShort.toULong",r((function(){var e=t.Long.fromInt(65535),i=p.kotlin.ULong;return function(){return new i(t.Long.fromInt(this.data).and(e))}}))),su.prototype.toFloat=n("kotlin.kotlin.UShort.toFloat",(function(){return 65535&this.data})),su.prototype.toDouble=n("kotlin.kotlin.UShort.toDouble",(function(){return 65535&this.data})),su.prototype.toString=function(){return(65535&this.data).toString()},su.$metadata$={kind:h,simpleName:"UShort",interfaces:[E]},su.prototype.unbox=function(){return this.data},su.prototype.hashCode=function(){var e=0;return e=31*e+t.hashCode(this.data)|0},su.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&t.equals(this.data,e.data)};var mu=p.kotlin||(p.kotlin={}),$u=mu.collections||(mu.collections={});$u.contains_mjy6jw$=V,$u.get_lastIndex_m7z4lg$=K,$u.get_lastIndex_tmsbgo$=Y,$u.get_lastIndex_l1lu5t$=Z,$u.first_us0mfu$=function(t){if(0===t.length)throw new Ni("Array is empty.");return t[0]},$u.indexOf_mjy6jw$=G,$u.get_indices_m7z4lg$=X;var yu=mu.ranges||(mu.ranges={});yu.reversed_zf1xzc$=$t,$u.get_indices_tmsbgo$=function(t){return new be(0,Y(t))},$u.get_indices_l1lu5t$=function(t){return new be(0,Z(t))},$u.last_us0mfu$=function(t){if(0===t.length)throw new Ni("Array is empty.");return t[K(t)]},$u.lastIndexOf_mjy6jw$=H;var vu=mu.random||(mu.random={});vu.Random=da,$u.single_355ntz$=W,mu.IllegalArgumentException_init_pdl1vj$=yi,$u.emptyList_287e2$=Jo,$u.ArrayList_init_287e2$=cn,$u.toList_us0mfu$=function(t){var e;switch(t.length){case 0:e=Jo();break;case 1:e=Gi(t[0]);break;default:e=Q(t)}return e},$u.sortWith_iwcb0m$=function(t,e){t.length>1&&fn(t,e)},$u.mapCapacity_za3lpa$=Yi,yu.coerceAtLeast_dqglrj$=vt,$u.LinkedHashMap_init_bwtc7$=Un,yu.coerceAtMost_dqglrj$=gt,$u.toCollection_5n4o2z$=J,$u.toMutableList_us0mfu$=Q,$u.toSet_us0mfu$=tt,$u.addAll_ipc267$=function(e,i){var n;if(t.isType(i,Mt))return e.addAll_brywnq$(i);var r=!1;for(n=i.iterator();n.hasNext();){var o=n.next();e.add_11rb$(o)&&(r=!0)}return r},$u.LinkedHashMap_init_q3lmfv$=Fn,$u.Grouping=ns,$u.ArrayList_init_ww73n8$=hn,$u.withIndex_us0mfu$=function(e){return new os((i=e,function(){return t.arrayIterator(i)}));var i},$u.HashSet_init_287e2$=function(t){return t=t||Object.create(En.prototype),un.call(t),En.call(t),t.map_8be2vx$=Sn(),t},mu.NoSuchElementException_init=Ei,mu.UnsupportedOperationException_init_pdl1vj$=zi,$u.listOf_mh5how$=Gi,$u.zip_r9t3v7$=function(t,e){for(var i=c.min(t.length,e.length),n=hn(i),r=0;r<i;r++)n.add_11rb$(xl(t[r],e[r]));return n},$u.collectionSizeOrDefault_ba2ldo$=ss,$u.joinTo_ohfn4r$=et,$u.joinToString_cph1y3$=function(t,e,i,n,r,o,s){return void 0===e&&(e=", "),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=-1),void 0===o&&(o="..."),void 0===s&&(s=null),et(t,lo(),e,i,n,r,o,s).toString()},$u.contains_2ws7j4$=function(e,i){return t.isType(e,Mt)?e.contains_11rb$(i):nt(e,i)>=0},$u.get_lastIndex_55thoc$=ts,$u.first_7wnvza$=function(e){if(t.isType(e,At))return it(e);var i=e.iterator();if(!i.hasNext())throw new Ni("Collection is empty.");return i.next()},$u.first_2p1efm$=it,$u.firstOrNull_2p1efm$=function(t){return t.isEmpty()?null:t.get_za3lpa$(0)},$u.indexOf_2ws7j4$=nt,$u.checkIndexOverflow_za3lpa$=Ki,$u.last_2p1efm$=function(t){if(t.isEmpty())throw new Ni("List is empty.");return t.get_za3lpa$(ts(t))},$u.lastOrNull_2p1efm$=function(t){return t.isEmpty()?null:t.get_za3lpa$(t.size-1|0)},$u.single_7wnvza$=rt,$u.single_2p1efm$=ot,$u.filterNotNull_m3lr2h$=function(t){return st(t,cn())},$u.filterNotNullTo_u9kwcl$=st,$u.toList_7wnvza$=ut,$u.reversed_7wnvza$=function(e){if(t.isType(e,Mt)&&e.size<=1)return ut(e);var i=pt(e);return qi(i),i},$u.shuffle_9jeydg$=at,$u.sortWith_nqfjgj$=function(t,e){!function(t,e){if(!(t.size<=1)){var i=Bi(t);fn(i,e);for(var n=0;n<i.length;n++)t.set_wxm5ur$(n,i[n])}}(t,e)},$u.toBooleanArray_xmyvgf$=function(e){var i,n,r=t.booleanArray(e.size),o=0;for(i=e.iterator();i.hasNext();){var s=i.next();r[(n=o,o=n+1|0,n)]=s}return r},$u.toIntArray_fx3nzu$=function(t){var e,i,n=new Int32Array(t.size),r=0;for(e=t.iterator();e.hasNext();){var o=e.next();n[(i=r,r=i+1|0,i)]=o}return n},$u.toCollection_5cfyqp$=lt,$u.toMutableList_7wnvza$=pt,$u.toMutableList_4c7yge$=ct,$u.distinct_7wnvza$=function(t){return ut(ht(t))},$u.toMutableSet_7wnvza$=ht,$u.Collection=Mt,$u.maxOrNull_lvsncp$=function(t){var e=t.iterator();if(!e.hasNext())return null;for(var i=e.next();e.hasNext();){var n=e.next();i=c.max(i,n)}return i},$u.minOrNull_exjks8$=dt,$u.joinTo_gcc71v$=ft,$u.joinToString_fmv235$=_t;var gu=mu.comparisons||(mu.comparisons={});yu.downTo_dqglrj$=mt,yu.step_xsgg7u$=function(t,e){return Ca(e>0,e),ce().fromClosedRange_qt1dr2$(t.first,t.last,t.step>0?e:0|-e)},yu.until_dqglrj$=yt,yu.coerceIn_e4yvb3$=bt,yu.coerceIn_ekzx8g$=function(t,e,i){if(e.compareTo_11rb$(i)>0)throw yi("Cannot coerce value to an empty range: maximum "+i.toString()+" is less than minimum "+e.toString()+".");return t.compareTo_11rb$(e)<0?e:t.compareTo_11rb$(i)>0?i:t};var bu=mu.sequences||(mu.sequences={});bu.Sequence=ks,bu.toCollection_gtszxp$=wt,bu.toList_veqyi0$=zt,bu.toMutableList_veqyi0$=kt,bu.map_z5avom$=St,bu.asIterable_veqyi0$=Ct;var xu=mu.text||(mu.text={});xu.get_lastIndex_gw00vp$=Ga,xu.iterator_gw00vp$=function(t){return new Ua(t)},xu.get_indices_gw00vp$=Va,xu.single_gw00vp$=function(t){var e;switch(t.length){case 0:throw new Ni("Char sequence is empty.");case 1:e=t.charCodeAt(0);break;default:throw yi("Char sequence has more than one element.")}return e},xu.drop_6ic1pp$=Nt,xu.StringBuilder_init=lo,mu.UInt=Nl,mu.ULong=Ul,mu.UByte=zl,mu.UShort=su,$u.copyOf_c03ot6$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int32Array(e))},$u.copyOf_3aefkx$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());var i=Ii(t,e,u);return i.$type$="LongArray",i},$u.copyOf_mrm5p$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int8Array(e))},$u.copyOf_m2jy6x$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Int16Array(e))};var wu=mu.js||(mu.js={}),zu=mu.math||(mu.math={});Object.defineProperty(zu,"PI",{get:function(){return e}}),mu.Annotation=Et,mu.CharSequence=Tt,$u.Iterable=Pt,$u.MutableIterable=Ot,$u.MutableCollection=jt,$u.List=At,$u.MutableList=It,$u.Set=Rt,$u.MutableSet=Lt,Dt.Entry=qt,$u.Map=Dt,Ft.MutableEntry=Bt,$u.MutableMap=Ft,$u.Iterator=Ut,$u.MutableIterator=Vt,$u.ListIterator=Gt,$u.MutableListIterator=Ht,$u.ByteIterator=Wt,$u.CharIterator=Xt,$u.ShortIterator=Kt,$u.IntIterator=Yt,$u.LongIterator=Zt,$u.FloatIterator=Jt,$u.DoubleIterator=Qt,$u.BooleanIterator=te,yu.CharProgressionIterator=ee,yu.IntProgressionIterator=ie,yu.LongProgressionIterator=ne,Object.defineProperty(re,"Companion",{get:ae}),yu.CharProgression=re,Object.defineProperty(le,"Companion",{get:ce}),yu.IntProgression=le,Object.defineProperty(he,"Companion",{get:_e}),yu.LongProgression=he,yu.ClosedRange=me,Object.defineProperty($e,"Companion",{get:ge}),yu.CharRange=$e,Object.defineProperty(be,"Companion",{get:ze}),yu.IntRange=be,Object.defineProperty(ke,"Companion",{get:Ne}),yu.LongRange=ke,Object.defineProperty(mu,"Unit",{get:Pe});var ku=mu.internal||(mu.internal={});ku.getProgressionLastElement_qt1dr2$=Ie,ku.getProgressionLastElement_b9bd0d$=Re,p.arrayIterator=function(t,e){if(null==e)return new Le(t);switch(e){case"BooleanArray":return qe(t);case"ByteArray":return Be(t);case"ShortArray":return Ve(t);case"CharArray":return He(t);case"IntArray":return Xe(t);case"LongArray":return ti(t);case"FloatArray":return Ye(t);case"DoubleArray":return Je(t);default:throw gi("Unsupported type argument for arrayIterator: "+x(e))}},p.booleanArrayIterator=qe,p.byteArrayIterator=Be,p.shortArrayIterator=Ve,p.charArrayIterator=He,p.intArrayIterator=Xe,p.floatArrayIterator=Ye,p.doubleArrayIterator=Je,p.longArrayIterator=ti,p.noWhenBranchMatched=function(){throw Oi()},p.subSequence=function(t,e,i){return"string"==typeof t?t.substring(e,i):t.subSequence_vux9f0$(e,i)},p.captureStack=function(t,e){Error.captureStackTrace?Error.captureStackTrace(e):e.stack=(new Error).stack},p.BoxedChar=ei,p.charArrayOf=function(){var t="CharArray",e=new Uint16Array([].slice.call(arguments));return e.$type$=t,e};var Su=mu.coroutines||(mu.coroutines={});Su.CoroutineImpl=ii,Object.defineProperty(Su,"CompletedContinuation",{get:si});var Cu=Su.intrinsics||(Su.intrinsics={});Cu.createCoroutineUnintercepted_x18nsh$=li,Cu.createCoroutineUnintercepted_3a617i$=ui,Cu.intercepted_f9mg25$=pi,mu.Error_init_pdl1vj$=hi,mu.Error=ci,mu.Exception_init_pdl1vj$=fi,mu.Exception=di,mu.RuntimeException_init_pdl1vj$=mi,mu.RuntimeException=_i,mu.IllegalArgumentException=$i,mu.IllegalStateException_init=function(t){return t=t||Object.create(vi.prototype),vi.call(t,null,null),t},mu.IllegalStateException_init_pdl1vj$=gi,mu.IllegalStateException=vi,mu.IndexOutOfBoundsException=bi,mu.UnsupportedOperationException_init=wi,mu.UnsupportedOperationException=xi,mu.NumberFormatException=ki,mu.NullPointerException=Si,mu.ClassCastException=Ci,mu.NoSuchElementException=Ni,mu.ArithmeticException=Ti,mu.NoWhenBranchMatchedException_init=Oi,mu.NoWhenBranchMatchedException=Pi,mu.UninitializedPropertyAccessException_init_pdl1vj$=ji,mu.UninitializedPropertyAccessException=Mi,mu.lazy_klfg04$=function(t){return new cl(t)},mu.fillFrom_dgzutr$=Ai,mu.arrayCopyResize_xao4iu$=Ii,p.findAssociatedObject_yjf3nl$=function(t,e){return null},xu.toString_if0zpk$=Ri,$u.asList_us0mfu$=Li,$u.arrayCopy=function(t,e,i,n,r){Po().checkRangeIndexes_cub51b$(n,r,t.length);var o=r-n|0;if(Po().checkRangeIndexes_cub51b$(i,i+o|0,e.length),ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){var s=t.subarray(n,r);e.set(s,i)}else if(t!==e||i<=n)for(var a=0;a<o;a++)e[i+a|0]=t[n+a|0];else for(var l=o-1|0;l>=0;l--)e[i+l|0]=t[n+l|0]},$u.copyOf_rblqex$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Float32Array(e))},$u.copyOf_xgrzbe$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());return Ai(t,new Float64Array(e))},$u.copyOf_1qu12l$=function(t,e){if(!(e>=0))throw yi(("Invalid new array size: "+e+".").toString());var i=Ii(t,e,!1);return i.$type$="BooleanArray",i},$u.copyOf_gtcw5h$=function(e,i){if(!(i>=0))throw yi(("Invalid new array size: "+i+".").toString());var n=Ai(e,t.charArray(i));return n.$type$="CharArray",n},$u.copyOfRange_5f8l3u$=Di,$u.reverse_vvxzk3$=qi,mu.Comparator=Fi,$u.copyToArray=Bi,$u.copyToArrayImpl=Ui,$u.copyToExistingArrayImpl=Vi,$u.setOf_mh5how$=Hi,$u.LinkedHashSet_init_287e2$=Gn,$u.LinkedHashSet_init_ww73n8$=Xn,$u.mapOf_x2b85n$=Wi,$u.shuffle_vvxzk3$=Xi,$u.shuffled_7wnvza$=function(t){var e=pt(t);return Xi(e),e},$u.AbstractMutableCollection=Zi,$u.AbstractMutableList=Ji,nn.SimpleEntry_init_trwmqg$=function(t,e){return e=e||Object.create(rn.prototype),rn.call(e,t.key,t.value),e},nn.SimpleEntry=rn,$u.AbstractMutableMap=nn,$u.AbstractMutableSet=un,$u.ArrayList_init_mqih57$=dn,$u.ArrayList=pn,$u.sortArrayWith_6xblhi$=fn,Object.defineProperty(mn,"HashCode",{get:xn}),$u.EqualityComparator=mn,$u.HashMap_init_va96d4$=kn,$u.HashMap_init_q3lmfv$=Sn,$u.HashMap_init_xf5xz2$=Cn,$u.HashMap_init_bwtc7$=Nn,$u.HashMap_init_73mtqc$=function(t,e){return Sn(e=e||Object.create(wn.prototype)),e.putAll_a2k3zr$(t),e},$u.HashMap=wn,$u.HashSet_init_mqih57$=function(t,e){return e=e||Object.create(En.prototype),un.call(e),En.call(e),e.map_8be2vx$=Nn(t.size),e.addAll_brywnq$(t),e},$u.HashSet_init_2wofer$=Tn,$u.HashSet_init_ww73n8$=Pn,$u.HashSet_init_nn01ho$=On,$u.HashSet=En,$u.InternalHashCodeMap=Mn,$u.InternalMap=An,$u.InternalStringMap=In,$u.LinkedHashMap_init_xf5xz2$=Bn,$u.LinkedHashMap_init_73mtqc$=function(t,e){return Sn(e=e||Object.create(Rn.prototype)),Rn.call(e),e.map_97q5dv$_0=Sn(),e.putAll_a2k3zr$(t),e},$u.LinkedHashMap=Rn,$u.LinkedHashSet_init_mqih57$=Hn,$u.LinkedHashSet_init_2wofer$=Wn,$u.LinkedHashSet=Vn,$u.RandomAccess=Kn;var Nu=mu.io||(mu.io={});Nu.BaseOutput=Yn,Nu.NodeJsOutput=Zn,Nu.BufferedOutput=Jn,Nu.BufferedOutputToConsoleLog=Qn,Nu.println=function(){yn.println()},Nu.println_s8jyv4$=function(t){yn.println_s8jyv4$(t)},Nu.print_s8jyv4$=function(t){yn.print_s8jyv4$(t)},Su.SafeContinuation_init_wj8d80$=function(t,e){return e=e||Object.create(tr.prototype),tr.call(e,t,ca()),e},Su.SafeContinuation=tr,p.throwNPE=function(t){throw new Si(t)},p.throwCCE=ir,p.throwISE=nr,p.throwUPAE=function(t){throw ji("lateinit property "+t+" has not been initialized")},Nu.Serializable=rr,zu.log_lu1900$=function(t,e){return e<=0||1===e?l.NaN:Math.log(t)/Math.log(e)},zu.round_14dthe$=function(t){if(t%.5!=0)return Math.round(t);var e=c.floor(t);return e%2==0?e:c.ceil(t)},zu.nextDown_yrwdxr$=or,zu.roundToInt_yrwdxr$=function(t){if(sr(t))throw yi("Cannot round NaN value.");return t>2147483647?2147483647:t<-2147483648?-2147483648:$(Math.round(t))},zu.roundToLong_yrwdxr$=function(e){if(sr(e))throw yi("Cannot round NaN value.");return e>v.toNumber()?v:e<y.toNumber()?y:t.Long.fromNumber(Math.round(e))},zu.abs_za3lpa$=function(t){return t<0?0|-t:t},zu.abs_s8cxhz$=function(t){return t.toNumber()<0?t.unaryMinus():t},mu.isNaN_yrwdxr$=sr,mu.isNaN_81szk$=ar,mu.isInfinite_yrwdxr$=lr,mu.isInfinite_81szk$=ur,mu.isFinite_yrwdxr$=pr,mu.isFinite_81szk$=function(t){return!ur(t)&&!ar(t)},vu.defaultPlatformRandom_8be2vx$=cr,vu.doubleFromParts_6xvm5r$=hr;var Eu=mu.reflect||(mu.reflect={});wu.get_js_1yb8b7$=function(e){var i;return(t.isType(i=e,_r)?i:ir()).jClass},Eu.KCallable=dr,Eu.KClass=fr;var Tu=Eu.js||(Eu.js={}),Pu=Tu.internal||(Tu.internal={});Pu.KClassImpl=_r,Pu.SimpleKClassImpl=mr,Pu.PrimitiveKClassImpl=$r,Object.defineProperty(Pu,"NothingKClassImpl",{get:gr}),Pu.ErrorKClass=br,Eu.KProperty=xr,Eu.KMutableProperty=wr,Eu.KProperty0=zr,Eu.KMutableProperty0=kr,Eu.KProperty1=Sr,Eu.KMutableProperty1=Cr,Eu.KType=Nr,p.createKType=function(t,e,i){return new Er(t,Li(e),i)},Pu.KTypeImpl=Er,Pu.prefixString_knho38$=Tr,Object.defineProperty(Pu,"PrimitiveClasses",{get:to}),p.getKClass=eo,p.getKClassM=io,p.getKClassFromExpression=function(e){var i;switch(typeof e){case"string":i=to().stringClass;break;case"number":i=(0|e)===e?to().intClass:to().doubleClass;break;case"boolean":i=to().booleanClass;break;case"function":i=to().functionClass(e.length);break;default:if(t.isBooleanArray(e))i=to().booleanArrayClass;else if(t.isCharArray(e))i=to().charArrayClass;else if(t.isByteArray(e))i=to().byteArrayClass;else if(t.isShortArray(e))i=to().shortArrayClass;else if(t.isIntArray(e))i=to().intArrayClass;else if(t.isLongArray(e))i=to().longArrayClass;else if(t.isFloatArray(e))i=to().floatArrayClass;else if(t.isDoubleArray(e))i=to().doubleArrayClass;else if(t.isType(e,fr))i=eo(fr);else if(t.isArray(e))i=to().arrayClass;else{var n=Object.getPrototypeOf(e).constructor;i=n===Object?to().anyClass:n===Error?to().throwableClass:no(n)}}return i},p.getKClass1=no,xu.Appendable=ro,xu.CharacterCodingException=oo,xu.StringBuilder_init_za3lpa$=ao,xu.StringBuilder=so,xu.isWhitespace_myv2d0$=uo,xu.isHighSurrogate_myv2d0$=po,xu.isLowSurrogate_myv2d0$=co,xu.toBoolean_5cw0du$=function(t){var e=null!=t;return e&&(e=o(t.toLowerCase(),"true")),e},xu.toByte_pdl1vz$=function(t){var e;return null!=(e=ja(t))?e:Ba(t)},xu.toShort_pdl1vz$=function(t){var e;return null!=(e=Ia(t))?e:Ba(t)},xu.toInt_pdl1vz$=function(t){var e;return null!=(e=La(t))?e:Ba(t)},xu.toInt_6ic1pp$=function(t,e){var i;return null!=(i=Da(t,e))?i:Ba(t)},xu.toLong_pdl1vz$=function(t){var e;return null!=(e=qa(t))?e:Ba(t)},xu.toDouble_pdl1vz$=function(t){var e=+t;return(sr(e)&&!ho(t)||0===e&&go(t))&&Ba(t),e},xu.toDoubleOrNull_pdl1vz$=function(t){var e=+t;return sr(e)&&!ho(t)||0===e&&go(t)?null:e},xu.checkRadix_za3lpa$=fo,xu.digitOf_xvg9q0$=_o,xu.concatToString_355ntz$=mo,xu.concatToString_wlitf7$=$o,xu.decodeToString_964n91$=function(t){return So(t,0,t.length,!1)},xu.compareTo_7epoxm$=yo,xu.startsWith_7epoxm$=function(t,e,i){return void 0===i&&(i=!1),i?bo(t,0,e,0,e.length,i):t.startsWith(e,0)},xu.endsWith_7epoxm$=function(t,e,i){return void 0===i&&(i=!1),i?bo(t,t.length-e.length|0,e,0,e.length,i):t.endsWith(e)},xu.matches_rjktp$=vo,xu.isBlank_gw00vp$=go,xu.equals_igcy3c$=function(t,e,i){var n;if(void 0===i&&(i=!1),null==t)n=null==e;else{var r;if(i){var s=null!=e;s&&(s=o(t.toLowerCase(),e.toLowerCase())),r=s}else r=o(t,e);n=r}return n},xu.regionMatches_h3ii2q$=bo,xu.capitalize_pdl1vz$=function(t){return t.length>0?t.substring(0,1).toUpperCase()+t.substring(1):t},xu.decodeUtf8_bndkiu$=So,$u.AbstractCollection=Co,Object.defineProperty(No,"Companion",{get:Po}),$u.AbstractList=No,Object.defineProperty(Oo,"Companion",{get:Do}),$u.AbstractMap=Oo,Object.defineProperty(qo,"Companion",{get:Uo}),$u.AbstractSet=qo,Object.defineProperty($u,"EmptyIterator",{get:Ho}),Object.defineProperty($u,"EmptyList",{get:Ko}),$u.asCollection_vj43ah$=Yo,$u.listOf_i5x0yv$=function(t){return t.length>0?Li(t):Jo()},$u.mutableListOf_i5x0yv$=function(t){return 0===t.length?cn():dn(new Zo(t,!0))},$u.arrayListOf_i5x0yv$=Qo,$u.get_indices_gzk92b$=function(t){return new be(0,t.size-1|0)},$u.shuffled_4173s5$=function(t,e){var i=pt(t);return at(i,e),i},$u.optimizeReadOnlyList_qzupvv$=es,gu.compareValues_s00gnj$=function(e,i){var n;return e===i?0:null==e?-1:null==i?1:t.compareTo(t.isComparable(n=e)?n:ir(),i)},$u.throwIndexOverflow=is,$u.IndexedValue=rs,$u.IndexingIterable=os,$u.IndexingIterator=as,$u.getOrImplicitDefault_t9ocha$=ls,$u.emptyMap_q3lmfv$=_s,$u.mapOf_qfcya0$=function(t){return t.length>0?gs(t,Un(t.length)):_s()},$u.mutableMapOf_qfcya0$=function(t){var e=Un(t.length);return $s(e,t),e},$u.hashMapOf_qfcya0$=ms,$u.getValue_t9ocha$=function(t,e){return ls(t,e)},$u.putAll_5gv49o$=$s,$u.putAll_cweazw$=ys,$u.toMap_6hr0sd$=function(e){var i;if(t.isType(e,Mt)){switch(e.size){case 0:i=_s();break;case 1:i=Wi(t.isType(e,At)?e.get_za3lpa$(0):e.iterator().next());break;default:i=vs(e,Un(e.size))}return i}return bs(vs(e,Fn()))},$u.toMap_jbpz7q$=vs,$u.toMap_ujwnei$=gs,$u.optimizeReadOnlyMap_1vp4qn$=bs,$u.addAll_ye1y7v$=function(t,e){return t.addAll_brywnq$(Li(e))},$u.removeAll_uhyeqt$=xs,$u.removeAll_qafx1e$=zs,bu.sequence_o0x0bg$=function(t){return new Ss((e=t,function(){return Cs(e)}));var e},bu.iterator_o0x0bg$=Cs,bu.SequenceScope=Ns,bu.TransformingSequence=Ts,bu.FlatteningSequence=Os,Object.defineProperty($u,"EmptySet",{get:Is}),$u.emptySet_287e2$=Rs,$u.setOf_i5x0yv$=function(t){return t.length>0?tt(t):Rs()},$u.mutableSetOf_i5x0yv$=function(t){return J(t,Xn(t.length))},$u.hashSetOf_i5x0yv$=Ls,Su.Continuation=Ds,mu.Result=dl,Su.startCoroutine_x18nsh$=function(t,e){pi(li(t,e)).resumeWith_tl1gpc$(new dl(Pe()))},Su.startCoroutine_3a617i$=function(t,e,i){pi(ui(t,e,i)).resumeWith_tl1gpc$(new dl(Pe()))},Cu.get_COROUTINE_SUSPENDED=aa,Object.defineProperty(qs,"Key",{get:Us}),Su.ContinuationInterceptor=qs,Vs.Key=Hs,Vs.Element=Ws,Su.CoroutineContext=Vs,Su.AbstractCoroutineContextElement=Xs,Su.AbstractCoroutineContextKey=Ks,Object.defineProperty(Su,"EmptyCoroutineContext",{get:Js}),Su.CombinedContext=Qs,Object.defineProperty(Cu,"COROUTINE_SUSPENDED",{get:aa}),Object.defineProperty(la,"COROUTINE_SUSPENDED",{get:pa}),Object.defineProperty(la,"UNDECIDED",{get:ca}),Object.defineProperty(la,"RESUMED",{get:ha}),Cu.CoroutineSingletons=la,Object.defineProperty(da,"Default",{get:ma}),vu.Random_za3lpa$=$a,vu.fastLog2_kcn2v3$=ya,vu.takeUpperBits_b6l1hq$=va,vu.checkRangeBounds_6xvm5r$=ga,vu.checkRangeBounds_cfj5zr$=ba,vu.checkRangeBounds_sdh6z7$=xa,vu.boundsErrorMessage_dgzutr$=wa,vu.XorWowRandom_init_6xvm5r$=ka,vu.XorWowRandom=za,yu.checkStepIsPositive_44uddq$=Ca,Eu.KClassifier=Na,xu.appendElement_k2zgzt$=Ea,xu.equals_4lte5s$=Ta,xu.trimIndent_pdl1vz$=function(t){return Pa(t,"")},xu.replaceIndent_rjktp$=Pa,xu.toByteOrNull_pdl1vz$=ja,xu.toByteOrNull_6ic1pp$=Aa,xu.toShortOrNull_pdl1vz$=Ia,xu.toShortOrNull_6ic1pp$=Ra,xu.toIntOrNull_pdl1vz$=La,xu.toIntOrNull_6ic1pp$=Da,xu.toLongOrNull_pdl1vz$=qa,xu.toLongOrNull_6ic1pp$=Fa,xu.numberFormatError_y4putb$=Ba,xu.substring_fc3b62$=function(t,e){return t.substring(e.start,e.endInclusive+1|0)},xu.substring_i511yc$=Ha,xu.substringBefore_8cymmc$=function(t,e,i){void 0===i&&(i=t);var n=Za(t,e);return-1===n?i:t.substring(0,n)},xu.regionMatchesImpl_4c7s8r$=Wa,xu.indexOfAny_junqau$=Xa,xu.lastIndexOfAny_junqau$=Ka,xu.indexOf_8eortd$=Za,xu.indexOf_l5u8uk$=Ja,xu.lastIndexOf_8eortd$=function(e,i,n,r){return void 0===n&&(n=Ga(e)),void 0===r&&(r=!1),r||"string"!=typeof e?Ka(e,t.charArrayOf(i),n,r):e.lastIndexOf(String.fromCharCode(i),n)},xu.lastIndexOf_l5u8uk$=Qa,xu.contains_sgbm27$=function(t,e,i){return void 0===i&&(i=!1),Za(t,e,void 0,i)>=0},xu.splitToSequence_ip8yn$=rl,xu.split_ip8yn$=function(e,i,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=0),1===i.length){var o=i[0];if(0!==o.length)return function(e,i,n,r){if(!(r>=0))throw yi(("Limit must be non-negative, but was "+r+".").toString());var o=0,s=Ja(e,i,o,n);if(-1===s||1===r)return Gi(e.toString());var a=r>0,l=hn(a?gt(r,10):10);do{if(l.add_11rb$(t.subSequence(e,o,s).toString()),o=s+i.length|0,a&&l.size===(r-1|0))break;s=Ja(e,i,o,n)}while(-1!==s);return l.add_11rb$(t.subSequence(e,o,e.length).toString()),l}(e,o,n,r)}var s,a=Ct(nl(e,i,void 0,n,r)),l=hn(ss(a,10));for(s=a.iterator();s.hasNext();){var u=s.next();l.add_11rb$(Ha(e,u))}return l},xu.lineSequence_gw00vp$=ol,xu.lines_gw00vp$=sl,mu.Lazy=al,Object.defineProperty(mu,"UNINITIALIZED_VALUE",{get:pl}),mu.UnsafeLazyImpl=cl,mu.InitializedLazyImpl=hl,mu.createFailure_tcv7n7$=yl,Object.defineProperty(dl,"Companion",{get:ml}),dl.Failure=$l,mu.throwOnFailure_iacion$=vl,mu.NotImplementedError=gl,mu.Pair=bl,mu.to_ujzrz7$=xl,mu.Triple=wl,Object.defineProperty(zl,"Companion",{get:Cl}),Object.defineProperty(Nl,"Companion",{get:Pl}),mu.uintCompare_vux9f0$=pu,mu.uintDivide_oqfnby$=function(e,i){return new Nl(t.Long.fromInt(e.data).and(w).div(t.Long.fromInt(i.data).and(w)).toInt())},mu.uintRemainder_oqfnby$=hu,mu.uintToDouble_za3lpa$=function(t){return(2147483647&t)+2*(t>>>31<<30)},Object.defineProperty(Ol,"Companion",{get:Al}),yu.UIntRange=Ol,Object.defineProperty(Il,"Companion",{get:Dl}),yu.UIntProgression=Il,$u.UIntIterator=Fl,$u.ULongIterator=Bl,Object.defineProperty(Ul,"Companion",{get:Hl}),mu.ulongCompare_3pjtqy$=cu,mu.ulongDivide_jpm79w$=function(e,i){var n=e.data,r=i.data;if(r.toNumber()<0)return cu(e.data,i.data)<0?new Ul(u):new Ul(C);if(n.toNumber()>=0)return new Ul(n.div(r));var o=n.shiftRightUnsigned(1).div(r).shiftLeft(1),s=n.subtract(o.multiply(r));return new Ul(o.add(t.Long.fromInt(cu(new Ul(s).data,new Ul(r).data)>=0?1:0)))},mu.ulongRemainder_jpm79w$=du,mu.ulongToDouble_s8cxhz$=function(t){return 2048*t.shiftRightUnsigned(11).toNumber()+t.and(U).toNumber()},Object.defineProperty(Wl,"Companion",{get:Yl}),yu.ULongRange=Wl,Object.defineProperty(Zl,"Companion",{get:tu}),yu.ULongProgression=Zl,ku.getProgressionLastElement_fjk8us$=ru,ku.getProgressionLastElement_15zasp$=ou,Object.defineProperty(su,"Companion",{get:uu}),mu.ulongToString_8e33dg$=fu,mu.ulongToString_plstum$=_u,Ft.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,Oo.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,nn.prototype.remove_xwzc9p$=Ft.prototype.remove_xwzc9p$,Mn.prototype.createJsMap=An.prototype.createJsMap,In.prototype.createJsMap=An.prototype.createJsMap,us.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,ps.prototype.remove_xwzc9p$=Ft.prototype.remove_xwzc9p$,ps.prototype.getOrDefault_xwzc9p$=Ft.prototype.getOrDefault_xwzc9p$,us.prototype.getOrDefault_xwzc9p$,cs.prototype.remove_xwzc9p$=ps.prototype.remove_xwzc9p$,cs.prototype.getOrDefault_xwzc9p$=ps.prototype.getOrDefault_xwzc9p$,hs.prototype.getOrDefault_xwzc9p$=Dt.prototype.getOrDefault_xwzc9p$,Ws.prototype.plus_1fupul$=Vs.prototype.plus_1fupul$,qs.prototype.fold_3cc69b$=Ws.prototype.fold_3cc69b$,qs.prototype.plus_1fupul$=Ws.prototype.plus_1fupul$,Xs.prototype.get_j3r2sn$=Ws.prototype.get_j3r2sn$,Xs.prototype.fold_3cc69b$=Ws.prototype.fold_3cc69b$,Xs.prototype.minusKey_yeqjby$=Ws.prototype.minusKey_yeqjby$,Xs.prototype.plus_1fupul$=Ws.prototype.plus_1fupul$,Qs.prototype.plus_1fupul$=Vs.prototype.plus_1fupul$,Sa.prototype.contains_mef7kx$=me.prototype.contains_mef7kx$,Sa.prototype.isEmpty=me.prototype.isEmpty,e=3.141592653589793,ri=null;var Ou=void 0!==i&&i.versions&&!!i.versions.node;yn=Ou?new Zn(i.stdout):new Qn,new er(Js(),(function(e){var i;return vl(e),null==(i=e.value)||t.isType(i,k)||P(),Ee})),vn=c.pow(2,-26),gn=c.pow(2,-53),Zr=t.newArray(0,null),new Fi((function(t,e){return yo(t,e,!0)})),new Int8Array([_(239),_(191),_(189)]),Jr=65533,new dl(aa())}()})?n.apply(e,r):n)||(t.exports=o)}).call(this,i(3))},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],p=!1,c=-1;function h(){p&&l&&(p=!1,l.length?u=l.concat(u):c=-1,u.length&&d())}function d(){if(!p){var t=a(h);p=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,p=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function _(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new f(t,e)),1!==u.length||p||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){(function(n){var r,o,s;o=[e,i(1)],void 0===(s="function"==typeof(r=function(t,e){"use strict";var i,r=Object,o=e.throwCCE,s=e.Kind.CLASS,a=e.kotlin.coroutines.Continuation,l=(e.kotlin.Annotation,e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED),u=e.kotlin.coroutines.CoroutineImpl,p=(e.kotlin.collections.emptyList_287e2$,e.kotlin.Unit),c=e.throwUPAE,h=(e.kotlin.collections.copyToArray,e.kotlin.coroutines.intrinsics.intercepted_f9mg25$),d=e.kotlin.collections.ArrayList_init_ww73n8$,f=e.kotlin.Result,_=e.kotlin.coroutines,m=e.kotlin.coroutines.intrinsics.createCoroutineUnintercepted_3a617i$,$=e.kotlin.coroutines.ContinuationInterceptor,y=e.equals,v=e.defineInlineFunction,g=e.wrapFunction,b=e.kotlin.IllegalStateException_init_pdl1vj$,x=e.Kind.INTERFACE,w=Error,z=e.toString,k=e.Kind.OBJECT,S=e.kotlin.createFailure_tcv7n7$,C=e.kotlin.coroutines.AbstractCoroutineContextKey,N=e.kotlin.coroutines.AbstractCoroutineContextElement,E=e.kotlin.RuntimeException,T=e.kotlin.coroutines.CoroutineContext.Key,P=e.kotlin.coroutines.CoroutineContext.Element,O=e.kotlin.coroutines.startCoroutine_x18nsh$,M=e.kotlin.coroutines.startCoroutine_3a617i$,j=e.kotlin.Enum,A=e.throwISE,I=e.Long.ONE,R=e.Long.ZERO,L=e.Long.MAX_VALUE,D=new e.Long(0,1),q=(e.Long.fromInt(1e6),new e.Long(2077252342,2147),new e.Long(-1,1073741823),e.ensureNotNull),F=(e.kotlin.Comparable,e.kotlin.IllegalArgumentException_init_pdl1vj$),B=e.kotlin.Error,U=e.kotlin.IllegalStateException,V=e.kotlin.sequences.sequence_o0x0bg$,G=e.kotlin.collections.ArrayList,H=e.kotlin.text.StringBuilder_init,W=e.kotlin.UnsupportedOperationException,X=e.kotlin.UnsupportedOperationException_init_pdl1vj$,K=Function,Y=Math,Z=e.kotlin.NoSuchElementException,J=e.hashCode,Q=(e.kotlin.collections.IndexedValue,e.kotlin.IndexOutOfBoundsException,e.kotlin.collections.LinkedHashMap_init_q3lmfv$,e.kotlin.collections.ArrayList_init_287e2$),tt=(e.kotlin.collections.HashSet_init_287e2$,e.kotlin.collections.LinkedHashSet_init_287e2$,e.kotlin.Pair,e.kotlin.to_ujzrz7$,e.kotlin.collections.indexOf_mjy6jw$,e.kotlin.collections.arrayCopy),et=(e.kotlin.text.trimIndent_pdl1vz$,e.kotlin.ArithmeticException,new e.Long(0,805306368),e.Long.fromInt(1073741823),new e.Long(-1073741824,268435455),new e.Long(0,268435456),new e.Long(0,536870912),e.kotlin.text.toBoolean_5cw0du$,e.kotlin.text.toLongOrNull_pdl1vz$,e.kotlin.coroutines.intrinsics.createCoroutineUnintercepted_x18nsh$),it=e.kotlin.collections.shuffle_vvxzk3$,nt=e.Long.fromInt(2147483647),rt=e.kotlin.ranges.coerceIn_ekzx8g$,ot=e.kotlin.collections.HashSet_init_ww73n8$,st=(e.kotlin.collections.get_lastIndex_55thoc$,e.kotlin.NoSuchElementException_init,e.kotlin.collections.MutableIterator,e.kotlin.collections.AbstractMutableList,e.kotlin.UnsupportedOperationException_init);function at(t,e){void 0===e&&(e=!0),Re.call(this,e),this.parentContext=t,this.context_p8rm81$_0=this.parentContext.plus_1fupul$(this)}function lt(t,e){at.call(this,t,e)}function ut(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function pt(t,e){lt.call(this,t,!1),this.continuation_0=m(e,this,this)}function ct(t,e){at.call(this,t,e)}function ht(t,e){ct.call(this,t,!1),this.continuation_0=m(e,this,this)}function dt(t,e){Qn.call(this,t,e)}function ft(t,e){Qn.call(this,t,e),this._decision_0=0}function _t(){}function mt(t){var i,n;return e.isType(t,Vn)?null==(n=null!=(i=t.claimReusableCancellableContinuation())&&i.resetState_8be2vx$()?i:null)?new bt(t,0):n:new bt(t,0)}function $t(t,e){t.invokeOnCancellation_f05bi3$(new vt(e))}function yt(t,e){t.invokeOnCancellation_f05bi3$(new gt(e))}function vt(t){St.call(this),this.node_0=t}function gt(t){St.call(this),this.handle_0=t}function bt(t,e){Kn.call(this,e),this.delegate_dhbmku$_0=t,this.context_xycjfy$_0=this.delegate.context,this._decision_0=0,this._state_0=kt(),this._parentHandle_0=null}function xt(){}function wt(){zt=this}at.prototype=Object.create(Re.prototype),at.prototype.constructor=at,St.prototype=Object.create(Sr.prototype),St.prototype.constructor=St,kr.prototype=Object.create(mo.prototype),kr.prototype.constructor=kr,Ke.prototype=Object.create(kr.prototype),Ke.prototype.constructor=Ke,lt.prototype=Object.create(at.prototype),lt.prototype.constructor=lt,pt.prototype=Object.create(lt.prototype),pt.prototype.constructor=pt,ct.prototype=Object.create(at.prototype),ct.prototype.constructor=ct,ht.prototype=Object.create(ct.prototype),ht.prototype.constructor=ht,Qn.prototype=Object.create(at.prototype),Qn.prototype.constructor=Qn,dt.prototype=Object.create(Qn.prototype),dt.prototype.constructor=dt,ft.prototype=Object.create(Qn.prototype),ft.prototype.constructor=ft,vt.prototype=Object.create(St.prototype),vt.prototype.constructor=vt,gt.prototype=Object.create(St.prototype),gt.prototype.constructor=gt,Kn.prototype=Object.create(uo.prototype),Kn.prototype.constructor=Kn,bt.prototype=Object.create(Kn.prototype),bt.prototype.constructor=bt,Ct.prototype=Object.create(St.prototype),Ct.prototype.constructor=Ct,Pt.prototype=Object.create(Re.prototype),Pt.prototype.constructor=Pt,Lt.prototype=Object.create(Rt.prototype),Lt.prototype.constructor=Lt,qt.prototype=Object.create(C.prototype),qt.prototype.constructor=qt,Dt.prototype=Object.create(N.prototype),Dt.prototype.constructor=Dt,ee.prototype=Object.create(j.prototype),ee.prototype.constructor=ee,he.prototype=Object.create(Dt.prototype),he.prototype.constructor=he,Ur.prototype=Object.create(he.prototype),Ur.prototype.constructor=Ur,me.prototype=Object.create(Ur.prototype),$e.prototype=Object.create(E.prototype),$e.prototype.constructor=$e,ye.prototype=Object.create(B.prototype),ye.prototype.constructor=ye,Fe.prototype=Object.create(Ke.prototype),Fe.prototype.constructor=Fe,Be.prototype=Object.create(bt.prototype),Be.prototype.constructor=Be,We.prototype=Object.create(Re.prototype),We.prototype.constructor=We,bo.prototype=Object.create(mo.prototype),bo.prototype.constructor=bo,Ye.prototype=Object.create(bo.prototype),Ye.prototype.constructor=Ye,Je.prototype=Object.create(Ke.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Ke.prototype),Qe.prototype.constructor=Qe,ti.prototype=Object.create(Ke.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Ke.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(Ke.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Ke.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(ni.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(ni.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(ni.prototype),si.prototype.constructor=si,ai.prototype=Object.create(Dt.prototype),ai.prototype.constructor=ai,li.prototype=Object.create(N.prototype),Gr.prototype=Object.create(U.prototype),Gr.prototype.constructor=Gr,ui.prototype=Object.create(Gr.prototype),ui.prototype.constructor=ui,pi.prototype=Object.create(Dt.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(N.prototype),di.prototype.constructor=di,vo.prototype=Object.create(Un.prototype),vo.prototype.constructor=vo,$o.prototype=Object.create(vo.prototype),$o.prototype.constructor=$o,Si.prototype=Object.create($o.prototype),Si.prototype.constructor=Si,yo.prototype=Object.create(vo.prototype),yo.prototype.constructor=yo,Ei.prototype=Object.create(yo.prototype),Ei.prototype.constructor=Ei,Vi.prototype=Object.create(mo.prototype),Vi.prototype.constructor=Vi,Pi.prototype=Object.create(Vi.prototype),Pi.prototype.constructor=Pi,Oi.prototype=Object.create(Vi.prototype),Oi.prototype.constructor=Oi,Ai.prototype=Object.create(yo.prototype),Ai.prototype.constructor=Ai,Di.prototype=Object.create(St.prototype),Di.prototype.constructor=Di,Xi.prototype=Object.create(mo.prototype),Xi.prototype.constructor=Xi,Fi.prototype=Object.create(Xi.prototype),Fi.prototype.constructor=Fi,Bi.prototype=Object.create(Xi.prototype),Bi.prototype.constructor=Bi,Ui.prototype=Object.create(Xi.prototype),Ui.prototype.constructor=Ui,Mi.prototype=Object.create(ki.prototype),Mi.prototype.constructor=Mi,Hi.prototype=Object.create(Vi.prototype),Hi.prototype.constructor=Hi,Wi.prototype=Object.create(Vi.prototype),Wi.prototype.constructor=Wi,Ki.prototype=Object.create(Mi.prototype),Ki.prototype.constructor=Ki,Yi.prototype=Object.create(at.prototype),dn.prototype=Object.create(U.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(Z.prototype),fn.prototype.constructor=fn,_n.prototype=Object.create(at.prototype),$n.prototype=Object.create(Mi.prototype),$n.prototype.constructor=$n,In.prototype=Object.create(Mi.prototype),In.prototype.constructor=In,Ln.prototype=Object.create(Mi.prototype),Ln.prototype.constructor=Ln,Bn.prototype=Object.create(Fn.prototype),Bn.prototype.constructor=Bn,Vn.prototype=Object.create(Kn.prototype),Vn.prototype.constructor=Vn,vr.prototype=Object.create(ni.prototype),vr.prototype.constructor=vr,gr.prototype=Object.create(Fn.prototype),gr.prototype.constructor=gr,br.prototype=Object.create(Bn.prototype),br.prototype.constructor=br,xr.prototype=Object.create(mo.prototype),xr.prototype.constructor=xr,yr.prototype=Object.create(bo.prototype),yr.prototype.constructor=yr,qr.prototype=Object.create(ai.prototype),qr.prototype.constructor=qr,Br.prototype=Object.create(he.prototype),Br.prototype.constructor=Br,Wr.prototype=Object.create(Gr.prototype),Wr.prototype.constructor=Wr,ao.prototype=Object.create(qn.prototype),ao.prototype.constructor=ao,Yr.prototype=Object.create(ao.prototype),Yr.prototype.constructor=Yr,Kr.prototype=Object.create(Dt.prototype),Kr.prototype.constructor=Kr,Zr.prototype=Object.create(Kr.prototype),Zr.prototype.constructor=Zr,to.prototype=Object.create(Kr.prototype),to.prototype.constructor=to,no.prototype=Object.create(St.prototype),no.prototype.constructor=no,ro.prototype=Object.create(Dt.prototype),ro.prototype.constructor=ro,so.prototype=Object.create(ao.prototype),so.prototype.constructor=so,ho.prototype=Object.create(Gr.prototype),ho.prototype.constructor=ho,go.prototype=Object.create(Fn.prototype),go.prototype.constructor=go,Object.defineProperty(at.prototype,"context",{configurable:!0,get:function(){return this.context_p8rm81$_0}}),Object.defineProperty(at.prototype,"coroutineContext",{configurable:!0,get:function(){return this.context}}),Object.defineProperty(at.prototype,"isActive",{configurable:!0,get:function(){return e.callGetter(this,Re.prototype,"isActive")}}),at.prototype.initParentJob_8be2vx$=function(){this.initParentJobInternal_8vd9i7$(this.parentContext.get_j3r2sn$(xe()))},at.prototype.onStart=function(){},at.prototype.onStartInternal=function(){this.onStart()},at.prototype.onCompleted_11rb$=function(t){},at.prototype.onCancelled_z1nxw$=function(t,e){},at.prototype.cancellationExceptionMessage=function(){return Ar(this)+" was cancelled"},at.prototype.onCompletionInternal_s8jyv4$=function(t){var i;e.isType(t,Rt)?this.onCancelled_z1nxw$(t.cause,t.handled):this.onCompleted_11rb$(null==(i=t)||e.isType(i,r)?i:o())},at.prototype.resumeWith_tl1gpc$=function(t){var e=this.makeCompletingOnce_8ea4ql$(jt(t));e!==Ee&&this.afterResume_s8jyv4$(e)},at.prototype.afterResume_s8jyv4$=function(t){this.afterCompletion_s8jyv4$(t)},at.prototype.handleOnCompletionException_tcv7n7$=function(t){Vt(this.context,t)},at.prototype.nameString=function(){var t;return this.context,null==(t=null)?Re.prototype.nameString.call(this):'"'+t+'":'+Re.prototype.nameString.call(this)},at.prototype.start_cfq2d3$=function(t,e){this.initParentJob_8be2vx$(),t.invoke_810yno$(e,this)},at.prototype.start_b5ul0p$=function(t,e,i){this.initParentJob_8be2vx$(),t.invoke_3o0yor$(i,e,this)},at.$metadata$={kind:s,simpleName:"AbstractCoroutine",interfaces:[te,a,Re,ve]},lt.prototype.getCompleted=function(){var t;return null==(t=this.getCompletedInternal_8be2vx$())||e.isType(t,r)?t:o()},ut.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},ut.prototype=Object.create(u.prototype),ut.prototype.constructor=ut,ut.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.$this.awaitInternal_8be2vx$(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:return null==(t=this.result_0)||e.isType(t,r)?t:o();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},lt.prototype.await=function(t,e){var i=new ut(this,t);return e?i:i.doResume(null)},Object.defineProperty(lt.prototype,"onAwait",{configurable:!0,get:function(){return this}}),lt.prototype.registerSelectClause1_o3xas4$=function(t,e){this.registerSelectClause1Internal_u6kgbh$(t,e)},lt.$metadata$={kind:s,simpleName:"DeferredCoroutine",interfaces:[fr,le,at]},pt.prototype.onStart=function(){or(this.continuation_0,this)},pt.$metadata$={kind:s,simpleName:"LazyDeferredCoroutine",interfaces:[lt]},v("kotlinx-coroutines-core.kotlinx.coroutines.invoke_5xrhu2$",g((function(){var i=t.kotlinx.coroutines.withContext_i5cbzn$;return function(t,n,r){return e.suspendCall(i(t,n,e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),ct.prototype.handleJobException_tcv7n7$=function(t){return Vt(this.context,t),!0},ct.$metadata$={kind:s,simpleName:"StandaloneCoroutine",interfaces:[at]},ht.prototype.onStart=function(){or(this.continuation_0,this)},ht.$metadata$={kind:s,simpleName:"LazyStandaloneCoroutine",interfaces:[ct]},dt.prototype.afterResume_s8jyv4$=function(t){var e=It(t,this.uCont);this.uCont.context,this.uCont.resumeWith_tl1gpc$(e)},dt.$metadata$={kind:s,simpleName:"UndispatchedCoroutine",interfaces:[Qn]},ft.prototype.trySuspend_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=1,1))return!0;break;case 2:return!1;default:throw b("Already suspended".toString())}},ft.prototype.tryResume_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=2,1))return!0;break;case 1:return!1;default:throw b("Already resumed".toString())}},ft.prototype.afterCompletion_s8jyv4$=function(t){this.afterResume_s8jyv4$(t)},ft.prototype.afterResume_s8jyv4$=function(t){this.tryResume_0()||Gn(h(this.uCont),It(t,this.uCont))},ft.prototype.getResult=function(){var t;if(this.trySuspend_0())return l;var i=Ge(this.state_8be2vx$);if(e.isType(i,Rt))throw i.cause;return null==(t=i)||e.isType(t,r)?t:o()},ft.$metadata$={kind:s,simpleName:"DispatchedCoroutine",interfaces:[Qn]},_t.prototype.tryResume_19pj23$=function(t,e,i){return void 0===e&&(e=null),i?i(t,e):this.tryResume_19pj23$$default(t,e)},_t.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},_t.$metadata$={kind:x,simpleName:"CancellableContinuation",interfaces:[a]},v("kotlinx-coroutines-core.kotlinx.coroutines.suspendCancellableCoroutine_o6sdx9$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,r){var o;return e.suspendCall((o=t,function(t){var e=new n(i(t),1);return e.initCancellability(),o(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutine_o6sdx9$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,r){var o;return e.suspendCall((o=t,function(t){var e=new n(i(t),0);return o(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutineReusable_mkkzkw$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.getOrCreateCancellableContinuation_3j0xf1$;return function(t,r){var o;return e.suspendCall((o=t,function(t){var e=n(i(t));return o(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.suspendAtomicCancellableCoroutine_i8nyj0$",g((function(){var i=e.kotlin.coroutines.intrinsics.intercepted_f9mg25$,n=t.kotlinx.coroutines.CancellableContinuationImpl;return function(t,r,o){var s;return void 0===t&&(t=!1),e.suspendCall((s=r,function(t){var e=new n(i(t),0);return s(e),e.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),vt.prototype.invoke=function(t){this.node_0.remove()},vt.prototype.toString=function(){return"RemoveOnCancel["+this.node_0+"]"},vt.$metadata$={kind:s,simpleName:"RemoveOnCancel",interfaces:[St]},gt.prototype.invoke=function(t){this.handle_0.dispose()},gt.prototype.toString=function(){return"DisposeOnCancel["+this.handle_0+"]"},gt.$metadata$={kind:s,simpleName:"DisposeOnCancel",interfaces:[St]},Object.defineProperty(bt.prototype,"delegate",{get:function(){return this.delegate_dhbmku$_0}}),Object.defineProperty(bt.prototype,"context",{configurable:!0,get:function(){return this.context_xycjfy$_0}}),Object.defineProperty(bt.prototype,"parentHandle_0",{configurable:!0,get:function(){return this._parentHandle_0},set:function(t){this._parentHandle_0=t}}),Object.defineProperty(bt.prototype,"state_8be2vx$",{configurable:!0,get:function(){return this._state_0}}),Object.defineProperty(bt.prototype,"isActive",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,xt)}}),Object.defineProperty(bt.prototype,"isCompleted",{configurable:!0,get:function(){return!e.isType(this.state_8be2vx$,xt)}}),Object.defineProperty(bt.prototype,"isCancelled",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,Lt)}}),bt.prototype.initCancellability=function(){this.setupCancellation_0()},bt.prototype.isReusable_0=function(){return e.isType(this.delegate,Vn)&&this.delegate.isReusable_pmw987$(this)},bt.prototype.resetState_8be2vx$=function(){var t=this._state_0;return e.isType(t,Nt)?(this.detachChild_8be2vx$(),!1):(this._decision_0=0,this._state_0=kt(),!0)},bt.prototype.setupCancellation_0=function(){var t;if(!this.checkCompleted_0()&&null===this.parentHandle_0&&null!=(t=this.delegate.context.get_j3r2sn$(xe()))){var e=t;e.start();var i=e.invokeOnCompletion_ct2b2z$(!0,void 0,new si(e,this));this.parentHandle_0=i,this.isCompleted&&!this.isReusable_0()&&(i.dispose(),this.parentHandle_0=Ie())}},bt.prototype.checkCompleted_0=function(){var t,i,n,r=this.isCompleted;if(0!==this.resumeMode)return r;if(null==(i=e.isType(t=this.delegate,Vn)?t:null))return r;if(null==(n=i.checkPostponedCancellation_jp3215$(this)))return r;var o=n;return r||this.cancel_dbl4no$(o),!0},Object.defineProperty(bt.prototype,"callerFrame",{configurable:!0,get:function(){var t;return e.isType(t=this.delegate,ko)?t:null}}),bt.prototype.getStackTraceElement=function(){return null},bt.prototype.takeState=function(){return this.state_8be2vx$},bt.prototype.cancelResult_83a7kv$=function(t,i){if(e.isType(t,Et))try{t.onCancellation(i)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.cancelLater_0=function(t){var i,n;return 0===this.resumeMode&&null!=(n=e.isType(i=this.delegate,Vn)?i:null)&&n.postponeCancellation_tcv7n7$(t)},bt.prototype.cancel_dbl4no$$default=function(t){var i;for(this._state_0;;){var n=this._state_0;t:do{if(!e.isType(n,xt))return!1;var r=new Lt(this,t,e.isType(n,St));if((i=this)._state_0!==n||(i._state_0=r,0))break t;if(e.isType(n,St))try{n.invoke(t)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}return this.detachChildIfNonResuable_0(),this.dispatchResume_0(0),!0}while(0)}},bt.prototype.parentCancelled_8o0b5c$=function(t){this.cancelLater_0(t)||(this.cancel_dbl4no$(t),this.detachChildIfNonResuable_0())},bt.prototype.invokeHandlerSafely_0=function(t){try{t()}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.getContinuationCancellationCause_dqr1mp$=function(t){return t.getCancellationException()},bt.prototype.trySuspend_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=1,1))return!0;break;case 2:return!1;default:throw b("Already suspended".toString())}},bt.prototype.tryResume_0=function(){var t;for(this._decision_0;;)switch(this._decision_0){case 0:if(0===(t=this)._decision_0&&(t._decision_0=2,1))return!0;break;case 1:return!1;default:throw b("Already resumed".toString())}},bt.prototype.getResult=function(){if(this.setupCancellation_0(),this.trySuspend_0())return l;var t=this.state_8be2vx$;if(e.isType(t,Rt))throw xo(t.cause);if(1===this.resumeMode){var i=this.context.get_j3r2sn$(xe());if(null!=i&&!i.isActive){var n=i.getCancellationException();throw this.cancelResult_83a7kv$(t,n),xo(n)}}return this.getSuccessfulResult_tpy1pm$(t)},bt.prototype.resumeWith_tl1gpc$=function(t){this.resumeImpl_0(At(t,this),this.resumeMode)},bt.prototype.resume_qnlsu9$=function(t,i){var n=this.resumeImpl_0(new Et(t,i),this.resumeMode);if(null!=n)try{i(n.cause)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}},bt.prototype.invokeOnCancellation_f05bi3$=function(t){var i,n={v:null};for(this._state_0;;){var r,o=this._state_0;if(e.isType(o,wt)){var s;if(null!=(r=n.v))s=r;else{var a=this.makeHandler_0(t);n.v=a,s=a}var l=s;if((i=this)._state_0===o&&(i._state_0=l,1))return}else{if(!e.isType(o,St)){if(e.isType(o,Lt)){o.makeHandled()||this.multipleHandlersError_0(t,o);try{var u,p;Cr(t,null!=(p=e.isType(u=o,Rt)?u:null)?p.cause:null)}catch(t){if(!e.isType(t,w))throw t;Vt(this.context,new $e("Exception in cancellation handler for "+this,t))}return}return}this.multipleHandlersError_0(t,o)}}},bt.prototype.multipleHandlersError_0=function(t,e){throw b(("It's prohibited to register multiple handlers, tried to register "+t+", already has "+z(e)).toString())},bt.prototype.makeHandler_0=function(t){return e.isType(t,St)?t:new Ct(t)},bt.prototype.dispatchResume_0=function(t){this.tryResume_0()||Yn(this,t)},bt.prototype.resumeImpl_0=function(t,i){var n;for(this._state_0;;){var r=this._state_0;t:do{if(e.isType(r,xt)){if((n=this)._state_0!==r||(n._state_0=t,0))break t;return this.detachChildIfNonResuable_0(),this.dispatchResume_0(i),null}if(e.isType(r,Lt)&&r.makeResumed())return r;this.alreadyResumedError_0(t)}while(0)}},bt.prototype.alreadyResumedError_0=function(t){throw b(("Already resumed, but proposed with update "+z(t)).toString())},bt.prototype.detachChildIfNonResuable_0=function(){this.isReusable_0()||this.detachChild_8be2vx$()},bt.prototype.detachChild_8be2vx$=function(){var t=this.parentHandle_0;null!=t&&t.dispose(),this.parentHandle_0=Ie()},bt.prototype.tryResume_19pj23$$default=function(t,n){var r;for(this._state_0;;){var o=this._state_0;t:do{if(e.isType(o,xt)){var s=null==n?t:new Nt(n,t);if((r=this)._state_0!==o||(r._state_0=s,0))break t;return this.detachChildIfNonResuable_0(),i}return e.isType(o,Nt)&&o.idempotentResume===n?i:null}while(0)}},bt.prototype.tryResumeWithException_tcv7n7$=function(t){var n;for(this._state_0;;){var r=this._state_0;t:do{if(e.isType(r,xt)){var o=new Rt(t);if((n=this)._state_0!==r||(n._state_0=o,0))break t;return this.detachChildIfNonResuable_0(),i}return null}while(0)}},bt.prototype.completeResume_za3rmp$=function(t){this.dispatchResume_0(this.resumeMode)},bt.prototype.resumeUndispatched_hyuxa3$=function(t,i){var n,r=e.isType(n=this.delegate,Vn)?n:null;this.resumeImpl_0(i,(null!=r?r.dispatcher:null)===t?2:this.resumeMode)},bt.prototype.resumeUndispatchedWithException_gd0rtt$=function(t,i){var n,r=e.isType(n=this.delegate,Vn)?n:null;this.resumeImpl_0(new Rt(i),(null!=r?r.dispatcher:null)===t?2:this.resumeMode)},bt.prototype.getSuccessfulResult_tpy1pm$=function(t){var i,n,s;return e.isType(t,Nt)?null==(i=t.result)||e.isType(i,r)?i:o():e.isType(t,Et)?null==(n=t.result)||e.isType(n,r)?n:o():null==(s=t)||e.isType(s,r)?s:o()},bt.prototype.toString=function(){return this.nameString()+"("+Pr(this.delegate)+"){"+z(this.state_8be2vx$)+"}@"+jr(this)},bt.prototype.nameString=function(){return"CancellableContinuation"},bt.$metadata$={kind:s,simpleName:"CancellableContinuationImpl",interfaces:[ko,_t,Kn]},xt.$metadata$={kind:x,simpleName:"NotCompleted",interfaces:[]},wt.prototype.toString=function(){return"Active"},wt.$metadata$={kind:k,simpleName:"Active",interfaces:[xt]};var zt=null;function kt(){return null===zt&&new wt,zt}function St(){Sr.call(this)}function Ct(t){St.call(this),this.handler_0=t}function Nt(t,e){this.idempotentResume=t,this.result=e}function Et(t,e){this.result=t,this.onCancellation=e}function Tt(){}function Pt(t){Re.call(this,!0),this.initParentJobInternal_8vd9i7$(t)}function Ot(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function Mt(){}function jt(t){var i,n=t.exceptionOrNull();return null==n?null==(i=t.value)||e.isType(i,r)?i:o():new Rt(n)}function At(t,i){var n,s=t.exceptionOrNull();return null==s?null==(n=t.value)||e.isType(n,r)?n:o():new Rt(xo(s))}function It(t,i){var n;return e.isType(t,Rt)?new f(S(xo(t.cause))):(f.Companion,new f(null==(n=t)||e.isType(n,r)?n:o()))}function Rt(t,e){void 0===e&&(e=!1),this.cause=t,this._handled_0=e}function Lt(t,e,i){Rt.call(this,null!=e?e:Hr("Continuation "+t+" was cancelled normally"),i),this._resumed_0=!1}function Dt(){Ut(),N.call(this,$.Key)}function qt(){Bt=this,C.call(this,$.Key,Ft)}function Ft(t){var i;return e.isType(i=t,Dt)?i:null}St.$metadata$={kind:s,simpleName:"CancelHandler",interfaces:[xt,Sr]},Ct.prototype.invoke=function(t){this.handler_0(t)},Ct.prototype.toString=function(){return"InvokeOnCancel["+Ar(this.handler_0)+"@"+jr(this)+"]"},Ct.$metadata$={kind:s,simpleName:"InvokeOnCancel",interfaces:[St]},Nt.prototype.toString=function(){return"CompletedIdempotentResult["+z(this.result)+"]"},Nt.$metadata$={kind:s,simpleName:"CompletedIdempotentResult",interfaces:[]},Et.prototype.toString=function(){return"CompletedWithCancellation["+z(this.result)+"]"},Et.$metadata$={kind:s,simpleName:"CompletedWithCancellation",interfaces:[]},Tt.$metadata$={kind:x,simpleName:"CompletableDeferred",interfaces:[le]},Object.defineProperty(Pt.prototype,"onCancelComplete",{configurable:!0,get:function(){return!0}}),Pt.prototype.getCompleted=function(){var t;return null==(t=this.getCompletedInternal_8be2vx$())||e.isType(t,r)?t:o()},Ot.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},Ot.prototype=Object.create(u.prototype),Ot.prototype.constructor=Ot,Ot.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.$this.awaitInternal_8be2vx$(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:return null==(t=this.result_0)||e.isType(t,r)?t:o();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Pt.prototype.await=function(t,e){var i=new Ot(this,t);return e?i:i.doResume(null)},Object.defineProperty(Pt.prototype,"onAwait",{configurable:!0,get:function(){return this}}),Pt.prototype.registerSelectClause1_o3xas4$=function(t,e){this.registerSelectClause1Internal_u6kgbh$(t,e)},Pt.prototype.complete_11rb$=function(t){return this.makeCompleting_8ea4ql$(t)},Pt.prototype.completeExceptionally_tcv7n7$=function(t){return this.makeCompleting_8ea4ql$(new Rt(t))},Pt.$metadata$={kind:s,simpleName:"CompletableDeferredImpl",interfaces:[fr,Tt,Re]},Mt.$metadata$={kind:x,simpleName:"CompletableJob",interfaces:[ve]},Object.defineProperty(Rt.prototype,"handled",{configurable:!0,get:function(){return this._handled_0}}),Rt.prototype.makeHandled=function(){return!1===(t=this)._handled_0&&(t._handled_0=!0,!0);var t},Rt.prototype.toString=function(){return Ar(this)+"["+this.cause+"]"},Rt.$metadata$={kind:s,simpleName:"CompletedExceptionally",interfaces:[]},Lt.prototype.makeResumed=function(){return!1===(t=this)._resumed_0&&(t._resumed_0=!0,!0);var t},Lt.$metadata$={kind:s,simpleName:"CancelledContinuation",interfaces:[Rt]},qt.$metadata$={kind:k,simpleName:"Key",interfaces:[C]};var Bt=null;function Ut(){return null===Bt&&new qt,Bt}function Vt(t,i){var n;try{if(null!=(n=t.get_j3r2sn$(Qt())))return void n.handleException_1ur55u$(t,i)}catch(t){if(e.isType(t,w))return void Mr(0,Gt(i,t));throw t}Mr(0,i)}function Gt(t,e){return t===e?t:new E("Exception while trying to handle coroutine exception",e)}function Ht(){Qt()}function Wt(){Jt=this}Dt.prototype.isDispatchNeeded_1fupul$=function(t){return!0},Dt.prototype.dispatchYield_5bn72i$=function(t,e){this.dispatch_5bn72i$(t,e)},Dt.prototype.interceptContinuation_wj8d80$=function(t){return new Vn(this,t)},Dt.prototype.releaseInterceptedContinuation_k98bjh$=function(t){var i,n;null!=(n=(e.isType(i=t,Vn)?i:o()).reusableCancellableContinuation)&&n.detachChild_8be2vx$()},Dt.prototype.plus_9wrrq5$=function(t){return t},Dt.prototype.toString=function(){return Ar(this)+"@"+jr(this)},Dt.$metadata$={kind:s,simpleName:"CoroutineDispatcher",interfaces:[$,N]},Wt.$metadata$={kind:k,simpleName:"Key",interfaces:[T]};var Xt,Kt,Yt,Zt,Jt=null;function Qt(){return null===Jt&&new Wt,Jt}function te(){}function ee(t,e){j.call(this),this.name$=t,this.ordinal$=e}function ie(){ie=function(){},Xt=new ee("DEFAULT",0),Kt=new ee("LAZY",1),Yt=new ee("ATOMIC",2),Zt=new ee("UNDISPATCHED",3)}function ne(){return ie(),Xt}function re(){return ie(),Kt}function oe(){return ie(),Yt}function se(){return ie(),Zt}function ae(){}function le(){}function ue(t){return function(e){var i=new bt(h(e),1);return i.initCancellability(),t(i),i.getResult()}}function pe(){}function ce(t){var i,n;return null!=(n=e.isType(i=t.get_j3r2sn$($.Key),pe)?i:null)?n:Er()}function he(){Dt.call(this),this.useCount_0=R,this.shared_0=!1,this.unconfinedQueue_0=null}function de(){fe=this,this.ref_0=new Eo}te.$metadata$={kind:x,simpleName:"CoroutineScope",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.currentCoroutineContext",(function(t){return e.coroutineReceiver().context})),ee.prototype.invoke_810yno$=function(t,i){switch(this.name){case"DEFAULT":nr(t,i);break;case"ATOMIC":O(t,i);break;case"UNDISPATCHED":lr(t,i);break;case"LAZY":break;default:e.noWhenBranchMatched()}},ee.prototype.invoke_3o0yor$=function(t,i,n){switch(this.name){case"DEFAULT":rr(t,i,n);break;case"ATOMIC":M(t,i,n);break;case"UNDISPATCHED":ur(t,i,n);break;case"LAZY":break;default:e.noWhenBranchMatched()}},Object.defineProperty(ee.prototype,"isLazy",{configurable:!0,get:function(){return this===re()}}),ee.$metadata$={kind:s,simpleName:"CoroutineStart",interfaces:[j]},ee.values=function(){return[ne(),re(),oe(),se()]},ee.valueOf_61zpoe$=function(t){switch(t){case"DEFAULT":return ne();case"LAZY":return re();case"ATOMIC":return oe();case"UNDISPATCHED":return se();default:A("No enum constant kotlinx.coroutines.CoroutineStart."+t)}},ae.$metadata$={kind:x,simpleName:"CopyableThrowable",interfaces:[]},le.$metadata$={kind:x,simpleName:"Deferred",interfaces:[ve]},pe.prototype.delay_s8cxhz$=function(t,e){var i,n;if(!(t.toNumber()<=0))return ue((i=t,n=this,function(t){return n.scheduleResumeAfterDelay_egqmvs$(i,t),p}))(e)},pe.prototype.invokeOnTimeout_8irseu$=function(t,e){return Er().invokeOnTimeout_8irseu$(t,e)},pe.$metadata$={kind:x,simpleName:"Delay",interfaces:[]},he.prototype.processNextEvent=function(){return this.processUnconfinedEvent()?R:L},Object.defineProperty(he.prototype,"isEmpty",{configurable:!0,get:function(){return this.isUnconfinedQueueEmpty}}),Object.defineProperty(he.prototype,"nextTime",{configurable:!0,get:function(){var t;return null==(t=this.unconfinedQueue_0)||t.isEmpty?L:R}}),he.prototype.processUnconfinedEvent=function(){var t,e;return null!=(t=this.unconfinedQueue_0)&&null!=(e=t.removeFirstOrNull())&&(e.run(),!0)},he.prototype.shouldBeProcessedFromContext=function(){return!1},he.prototype.dispatchUnconfined_4avnfa$=function(t){var e,i;if(null!=(e=this.unconfinedQueue_0))i=e;else{var n=new qn;this.unconfinedQueue_0=n,i=n}i.addLast_trkh7z$(t)},Object.defineProperty(he.prototype,"isActive",{configurable:!0,get:function(){return this.useCount_0.toNumber()>0}}),Object.defineProperty(he.prototype,"isUnconfinedLoopActive",{configurable:!0,get:function(){return this.useCount_0.compareTo_11rb$(this.delta_0(!0))>=0}}),Object.defineProperty(he.prototype,"isUnconfinedQueueEmpty",{configurable:!0,get:function(){var t,e;return null==(e=null!=(t=this.unconfinedQueue_0)?t.isEmpty:null)||e}}),he.prototype.delta_0=function(t){return t?D:I},he.prototype.incrementUseCount_6taknv$=function(t){void 0===t&&(t=!1),this.useCount_0=this.useCount_0.add(this.delta_0(t)),t||(this.shared_0=!0)},he.prototype.decrementUseCount_6taknv$=function(t){void 0===t&&(t=!1),this.useCount_0=this.useCount_0.subtract(this.delta_0(t)),this.useCount_0.toNumber()>0||this.shared_0&&this.shutdown()},he.prototype.shutdown=function(){},he.$metadata$={kind:s,simpleName:"EventLoop",interfaces:[Dt]},Object.defineProperty(de.prototype,"eventLoop_8be2vx$",{configurable:!0,get:function(){var t,e;if(null!=(t=this.ref_0.get()))e=t;else{var i=Fr();this.ref_0.set_11rb$(i),e=i}return e}}),de.prototype.currentOrNull_8be2vx$=function(){return this.ref_0.get()},de.prototype.resetEventLoop_8be2vx$=function(){this.ref_0.set_11rb$(null)},de.prototype.setEventLoop_13etkv$=function(t){this.ref_0.set_11rb$(t)},de.$metadata$={kind:k,simpleName:"ThreadLocalEventLoop",interfaces:[]};var fe=null;function _e(){return null===fe&&new de,fe}function me(){Ur.call(this),this._queue_0=null,this._delayed_0=null,this._isCompleted_0=!1}function $e(t,e){E.call(this,t,e),this.name="CompletionHandlerException"}function ye(t,e){B.call(this,t,e),this.name="CoroutinesInternalError"}function ve(){xe()}function ge(){be=this,Qt()}$e.$metadata$={kind:s,simpleName:"CompletionHandlerException",interfaces:[E]},ye.$metadata$={kind:s,simpleName:"CoroutinesInternalError",interfaces:[B]},ge.$metadata$={kind:k,simpleName:"Key",interfaces:[T]};var be=null;function xe(){return null===be&&new ge,be}function we(){}function ze(){}function ke(){}function Se(){}function Ce(){Ae=this}ve.prototype.cancel_m4sck1$=function(t,e){void 0===t&&(t=null),e?e(t):this.cancel_m4sck1$$default(t)},ve.prototype.cancel=function(){this.cancel_m4sck1$(null)},ve.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},ve.prototype.invokeOnCompletion_ct2b2z$=function(t,e,i,n){return void 0===t&&(t=!1),void 0===e&&(e=!0),n?n(t,e,i):this.invokeOnCompletion_ct2b2z$$default(t,e,i)},ve.prototype.plus_dqr1mp$=function(t){return t},ve.$metadata$={kind:x,simpleName:"Job",interfaces:[P]},we.$metadata$={kind:x,simpleName:"DisposableHandle",interfaces:[]},ze.$metadata$={kind:x,simpleName:"ChildJob",interfaces:[ve]},ke.$metadata$={kind:x,simpleName:"ParentJob",interfaces:[ve]},Se.$metadata$={kind:x,simpleName:"ChildHandle",interfaces:[we]},Ce.prototype.dispose=function(){},Ce.prototype.childCancelled_tcv7n7$=function(t){return!1},Ce.prototype.toString=function(){return"NonDisposableHandle"},Ce.$metadata$={kind:k,simpleName:"NonDisposableHandle",interfaces:[Se,we]};var Ne,Ee,Te,Pe,Oe,Me,je,Ae=null;function Ie(){return null===Ae&&new Ce,Ae}function Re(t){this._state_v70vig$_0=t?je:Me,this._parentHandle_acgcx5$_0=null}function Le(t,e){return function(){return t.state_8be2vx$===e}}function De(t,e,i,n){u.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$JobSupport=t,this.local$tmp$=void 0,this.local$tmp$_0=void 0,this.local$cur=void 0,this.local$$receiver=e}function qe(t,e,i){this.list_m9wkmb$_0=t,this._isCompleting_0=e,this._rootCause_0=i,this._exceptionsHolder_0=null}function Fe(t,e,i,n){Ke.call(this,i.childJob),this.parent_0=t,this.state_0=e,this.child_0=i,this.proposedUpdate_0=n}function Be(t,e){bt.call(this,t,1),this.job_0=e}function Ue(t){this.state=t}function Ve(t){return e.isType(t,Xe)?new Ue(t):t}function Ge(t){var i,n,r;return null!=(r=null!=(n=e.isType(i=t,Ue)?i:null)?n.state:null)?r:t}function He(t){this.isActive_hyoax9$_0=t}function We(t){Re.call(this,!0),this.initParentJobInternal_8vd9i7$(t),this.handlesException_fejgjb$_0=this.handlesExceptionF()}function Xe(){}function Ke(t){kr.call(this),this.job=t}function Ye(){bo.call(this)}function Ze(t){this.list_afai45$_0=t}function Je(t,e){Ke.call(this,t),this.handler_0=e}function Qe(t,e){Ke.call(this,t),this.continuation_0=e}function ti(t,e){Ke.call(this,t),this.continuation_0=e}function ei(t,e,i){Ke.call(this,t),this.select_0=e,this.block_0=i}function ii(t,e,i){Ke.call(this,t),this.select_0=e,this.block_0=i}function ni(t){Ke.call(this,t)}function ri(t,e){ni.call(this,t),this.handler_0=e,this._invoked_0=0}function oi(t,e){ni.call(this,t),this.childJob=e}function si(t,e){ni.call(this,t),this.child=e}function ai(){Dt.call(this)}function li(){N.call(this,xe())}function ui(t,e){Hr(t,this),this.coroutine_8be2vx$=e,this.name="TimeoutCancellationException"}function pi(){ci=this,Dt.call(this)}Object.defineProperty(Re.prototype,"key",{configurable:!0,get:function(){return xe()}}),Object.defineProperty(Re.prototype,"parentHandle_8be2vx$",{configurable:!0,get:function(){return this._parentHandle_acgcx5$_0},set:function(t){this._parentHandle_acgcx5$_0=t}}),Re.prototype.initParentJobInternal_8vd9i7$=function(t){if(null!=t){t.start();var e=t.attachChild_kx8v25$(this);this.parentHandle_8be2vx$=e,this.isCompleted&&(e.dispose(),this.parentHandle_8be2vx$=Ie())}else this.parentHandle_8be2vx$=Ie()},Object.defineProperty(Re.prototype,"state_8be2vx$",{configurable:!0,get:function(){for(this._state_v70vig$_0;;){var t=this._state_v70vig$_0;if(!e.isType(t,Fn))return t;t.perform_s8jyv4$(this)}}}),Re.prototype.loopOnState_46ivxf$_0=function(t){for(;;)t(this.state_8be2vx$)},Object.defineProperty(Re.prototype,"isActive",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Xe)&&t.isActive}}),Object.defineProperty(Re.prototype,"isCompleted",{configurable:!0,get:function(){return!e.isType(this.state_8be2vx$,Xe)}}),Object.defineProperty(Re.prototype,"isCancelled",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Rt)||e.isType(t,qe)&&t.isCancelling}}),Re.prototype.finalizeFinishingState_10mr1z$_0=function(t,i){var n,r,s,a=null!=(r=e.isType(n=i,Rt)?n:null)?r.cause:null,l={v:!1};l.v=t.isCancelling;var u=t.sealLocked_dbl4no$(a),p=this.getFinalRootCause_3zkch4$_0(t,u);null!=p&&this.addSuppressedExceptions_85dgeo$_0(p,u);var c,h=p,d=null==h||h===a?i:new Rt(h);return null!=h&&(this.cancelParent_7dutpz$_0(h)||this.handleJobException_tcv7n7$(h))&&(e.isType(s=d,Rt)?s:o()).makeHandled(),l.v||this.onCancelling_dbl4no$(h),this.onCompletionInternal_s8jyv4$(d),(c=this)._state_v70vig$_0===t&&(c._state_v70vig$_0=Ve(d)),this.completeStateFinalization_a4ilmi$_0(t,d),d},Re.prototype.getFinalRootCause_3zkch4$_0=function(t,i){if(i.isEmpty())return t.isCancelling?new Wr(this.cancellationExceptionMessage(),null,this):null;var n;t:do{var r;for(r=i.iterator();r.hasNext();){var o=r.next();if(!e.isType(o,Gr)){n=o;break t}}n=null}while(0);if(null!=n)return n;var s=i.get_za3lpa$(0);if(e.isType(s,ui)){var a;t:do{var l;for(l=i.iterator();l.hasNext();){var u=l.next();if(u!==s&&e.isType(u,ui)){a=u;break t}}a=null}while(0);if(null!=a)return a}return s},Re.prototype.addSuppressedExceptions_85dgeo$_0=function(t,i){var n;if(!(i.size<=1)){var r=_o(i.size),o=t;for(n=i.iterator();n.hasNext();){var s=n.next();s!==t&&s!==o&&!e.isType(s,Gr)&&r.add_11rb$(s)}}},Re.prototype.tryFinalizeSimpleState_5emg4m$_0=function(t,e){return(i=this)._state_v70vig$_0===t&&(i._state_v70vig$_0=Ve(e),!0)&&(this.onCancelling_dbl4no$(null),this.onCompletionInternal_s8jyv4$(e),this.completeStateFinalization_a4ilmi$_0(t,e),!0);var i},Re.prototype.completeStateFinalization_a4ilmi$_0=function(t,i){var n,r,o,s;null!=(n=this.parentHandle_8be2vx$)&&(n.dispose(),this.parentHandle_8be2vx$=Ie());var a=null!=(o=e.isType(r=i,Rt)?r:null)?o.cause:null;if(e.isType(t,Ke))try{t.invoke(a)}catch(i){if(!e.isType(i,w))throw i;this.handleOnCompletionException_tcv7n7$(new $e("Exception in completion handler "+t+" for "+this,i))}else null!=(s=t.list)&&this.notifyCompletion_mgxta4$_0(s,a)},Re.prototype.notifyCancelling_xkpzb8$_0=function(t,i){var n;this.onCancelling_dbl4no$(i);for(var r={v:null},o=t._next;!y(o,t);){if(e.isType(o,ni)){var s,a=o;try{a.invoke(i)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(s=r.v)?s:null)&&(r.v=new $e("Exception in completion handler "+a+" for "+this,t))}}o=o._next}null!=(n=r.v)&&this.handleOnCompletionException_tcv7n7$(n),this.cancelParent_7dutpz$_0(i)},Re.prototype.cancelParent_7dutpz$_0=function(t){if(this.isScopedCoroutine)return!0;var i=e.isType(t,Gr),n=this.parentHandle_8be2vx$;return null===n||n===Ie()?i:n.childCancelled_tcv7n7$(t)||i},Re.prototype.notifyCompletion_mgxta4$_0=function(t,i){for(var n,r={v:null},o=t._next;!y(o,t);){if(e.isType(o,Ke)){var s,a=o;try{a.invoke(i)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(s=r.v)?s:null)&&(r.v=new $e("Exception in completion handler "+a+" for "+this,t))}}o=o._next}null!=(n=r.v)&&this.handleOnCompletionException_tcv7n7$(n)},Re.prototype.notifyHandlers_alhslr$_0=g((function(){var t=e.equals;return function(i,n,r,o){for(var s,a={v:null},l=r._next;!t(l,r);){if(n(l)){var u,p=l;try{p.invoke(o)}catch(t){if(!e.isType(t,w))throw t;null==(null!=(u=a.v)?u:null)&&(a.v=new $e("Exception in completion handler "+p+" for "+this,t))}}l=l._next}null!=(s=a.v)&&this.handleOnCompletionException_tcv7n7$(s)}})),Re.prototype.start=function(){for(;;)switch(this.startInternal_tp1bqd$_0(this.state_8be2vx$)){case 0:return!1;case 1:return!0}},Re.prototype.startInternal_tp1bqd$_0=function(t){return e.isType(t,He)?t.isActive?0:(i=this)._state_v70vig$_0!==t||(i._state_v70vig$_0=je,0)?-1:(this.onStartInternal(),1):e.isType(t,Ze)?function(e){return e._state_v70vig$_0===t&&(e._state_v70vig$_0=t.list,!0)}(this)?(this.onStartInternal(),1):-1:0;var i},Re.prototype.onStartInternal=function(){},Re.prototype.getCancellationException=function(){var t,i,n=this.state_8be2vx$;if(e.isType(n,qe)){if(null==(i=null!=(t=n.rootCause)?this.toCancellationException_rg9tb7$(t,Ar(this)+" is cancelling"):null))throw b(("Job is still new or active: "+this).toString());return i}if(e.isType(n,Xe))throw b(("Job is still new or active: "+this).toString());return e.isType(n,Rt)?this.toCancellationException_rg9tb7$(n.cause):new Wr(Ar(this)+" has completed normally",null,this)},Re.prototype.toCancellationException_rg9tb7$=function(t,i){var n,r;return void 0===i&&(i=null),null!=(r=e.isType(n=t,Gr)?n:null)?r:new Wr(null!=i?i:this.cancellationExceptionMessage(),t,this)},Object.defineProperty(Re.prototype,"completionCause",{configurable:!0,get:function(){var t,i=this.state_8be2vx$;if(e.isType(i,qe)){if(null==(t=i.rootCause))throw b(("Job is still new or active: "+this).toString());return t}if(e.isType(i,Xe))throw b(("Job is still new or active: "+this).toString());return e.isType(i,Rt)?i.cause:null}}),Object.defineProperty(Re.prototype,"completionCauseHandled",{configurable:!0,get:function(){var t=this.state_8be2vx$;return e.isType(t,Rt)&&t.handled}}),Re.prototype.invokeOnCompletion_f05bi3$=function(t){return this.invokeOnCompletion_ct2b2z$(!1,!0,t)},Re.prototype.invokeOnCompletion_ct2b2z$$default=function(t,i,n){for(var r,s={v:null};;){var a=this.state_8be2vx$;t:do{var l,u,p,c,h;if(e.isType(a,He))if(a.isActive){var d;if(null!=(l=s.v))d=l;else{var f=this.makeNode_9qhc1i$_0(n,t);s.v=f,d=f}var _=d;if((r=this)._state_v70vig$_0===a&&(r._state_v70vig$_0=_,1))return _}else this.promoteEmptyToNodeList_lchanx$_0(a);else{if(!e.isType(a,Xe))return i&&Cr(n,null!=(h=e.isType(c=a,Rt)?c:null)?h.cause:null),Ie();var m=a.list;if(null==m)this.promoteSingleToNodeList_ft43ca$_0(e.isType(u=a,Ke)?u:o());else{var $,y={v:null},v={v:Ie()};if(t&&e.isType(a,qe)){var g;y.v=a.rootCause;var b=null==y.v;if(b||(b=e.isType(n,oi)&&!a.isCompleting),b){var x;if(null!=(g=s.v))x=g;else{var w=this.makeNode_9qhc1i$_0(n,t);s.v=w,x=w}var z=x;if(!this.addLastAtomic_qayz7c$_0(a,m,z))break t;if(null==y.v)return z;v.v=z}}if(null!=y.v)return i&&Cr(n,y.v),v.v;if(null!=(p=s.v))$=p;else{var k=this.makeNode_9qhc1i$_0(n,t);s.v=k,$=k}var S=$;if(this.addLastAtomic_qayz7c$_0(a,m,S))return S}}}while(0)}},Re.prototype.makeNode_9qhc1i$_0=function(t,i){var n,r,o,s,a,l;return i?null!=(o=null!=(r=e.isType(n=t,ni)?n:null)?r:null)?o:new ri(this,t):null!=(l=null!=(a=e.isType(s=t,Ke)?s:null)?a:null)?l:new Je(this,t)},Re.prototype.addLastAtomic_qayz7c$_0=function(t,e,i){var n;t:do{if(!Le(this,t)()){n=!1;break t}e.addLast_l2j9rm$(i),n=!0}while(0);return n},Re.prototype.promoteEmptyToNodeList_lchanx$_0=function(t){var e,i=new Ye,n=t.isActive?i:new Ze(i);(e=this)._state_v70vig$_0===t&&(e._state_v70vig$_0=n)},Re.prototype.promoteSingleToNodeList_ft43ca$_0=function(t){t.addOneIfEmpty_l2j9rm$(new Ye);var e,i=t._next;(e=this)._state_v70vig$_0===t&&(e._state_v70vig$_0=i)},Re.prototype.join=function(t){if(this.joinInternal_ta6o25$_0())return this.joinSuspend_kfh5g8$_0(t);wi(t.context)},Re.prototype.joinInternal_ta6o25$_0=function(){for(;;){var t=this.state_8be2vx$;if(!e.isType(t,Xe))return!1;if(this.startInternal_tp1bqd$_0(t)>=0)return!0}},Re.prototype.joinSuspend_kfh5g8$_0=function(t){return(i=this,e=function(t){return yt(t,i.invokeOnCompletion_f05bi3$(new Qe(i,t))),p},function(t){var i=new bt(h(t),1);return i.initCancellability(),e(i),i.getResult()})(t);var e,i},Object.defineProperty(Re.prototype,"onJoin",{configurable:!0,get:function(){return this}}),Re.prototype.registerSelectClause0_s9h9qd$=function(t,i){for(;;){var n=this.state_8be2vx$;if(t.isSelected)return;if(!e.isType(n,Xe))return void(t.trySelect()&&sr(i,t.completion));if(0===this.startInternal_tp1bqd$_0(n))return void t.disposeOnSelect_rvfg84$(this.invokeOnCompletion_f05bi3$(new ei(this,t,i)))}},Re.prototype.removeNode_nxb11s$=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Ke))return e.isType(i,Xe)?void(null!=i.list&&t.remove()):void 0;if(i!==t)return;if((n=this)._state_v70vig$_0===i&&(n._state_v70vig$_0=je,1))return}var n},Object.defineProperty(Re.prototype,"onCancelComplete",{configurable:!0,get:function(){return!1}}),Re.prototype.cancel_m4sck1$$default=function(t){this.cancelInternal_tcv7n7$(null!=t?t:new Wr(this.cancellationExceptionMessage(),null,this))},Re.prototype.cancellationExceptionMessage=function(){return"Job was cancelled"},Re.prototype.cancel_dbl4no$$default=function(t){var e;return this.cancelInternal_tcv7n7$(null!=(e=null!=t?this.toCancellationException_rg9tb7$(t):null)?e:new Wr(this.cancellationExceptionMessage(),null,this)),!0},Re.prototype.cancelInternal_tcv7n7$=function(t){this.cancelImpl_8ea4ql$(t)},Re.prototype.parentCancelled_pv1t6x$=function(t){this.cancelImpl_8ea4ql$(t)},Re.prototype.childCancelled_tcv7n7$=function(t){return!!e.isType(t,Gr)||this.cancelImpl_8ea4ql$(t)&&this.handlesException},Re.prototype.cancelCoroutine_dbl4no$=function(t){return this.cancelImpl_8ea4ql$(t)},Re.prototype.cancelImpl_8ea4ql$=function(t){var e,i=Ne;return!(!this.onCancelComplete||(i=this.cancelMakeCompleting_z3ww04$_0(t))!==Ee)||(i===Ne&&(i=this.makeCancelling_xjon1g$_0(t)),i===Ne||i===Ee?e=!0:i===Pe?e=!1:(this.afterCompletion_s8jyv4$(i),e=!0),e)},Re.prototype.cancelMakeCompleting_z3ww04$_0=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Xe)||e.isType(i,qe)&&i.isCompleting)return Ne;var n=new Rt(this.createCauseException_kfrsk8$_0(t)),r=this.tryMakeCompleting_w5s53t$_0(i,n);if(r!==Te)return r}},Re.prototype.defaultCancellationException_6umzry$=v("kotlinx-coroutines-core.kotlinx.coroutines.JobSupport.defaultCancellationException_6umzry$",g((function(){var e=t.kotlinx.coroutines.JobCancellationException;return function(t,i){return void 0===t&&(t=null),void 0===i&&(i=null),new e(null!=t?t:this.cancellationExceptionMessage(),i,this)}}))),Re.prototype.getChildJobCancellationCause=function(){var t,i,n,r=this.state_8be2vx$;if(e.isType(r,qe))t=r.rootCause;else if(e.isType(r,Rt))t=r.cause;else{if(e.isType(r,Xe))throw b(("Cannot be cancelling child in this state: "+z(r)).toString());t=null}var o=t;return null!=(n=e.isType(i=o,Gr)?i:null)?n:new Wr("Parent job is "+this.stateString_u2sjqg$_0(r),o,this)},Re.prototype.createCauseException_kfrsk8$_0=function(t){var i;return null==t||e.isType(t,w)?null!=t?t:new Wr(this.cancellationExceptionMessage(),null,this):(e.isType(i=t,ke)?i:o()).getChildJobCancellationCause()},Re.prototype.makeCancelling_xjon1g$_0=function(t){for(var i={v:null};;){var n,r,o=this.state_8be2vx$;if(e.isType(o,qe)){var s;if(o.isSealed)return Pe;var a=o.isCancelling;if(null!=t||!a){var l;if(null!=(s=i.v))l=s;else{var u=this.createCauseException_kfrsk8$_0(t);i.v=u,l=u}var p=l;o.addExceptionLocked_tcv7n7$(p)}var c=o.rootCause,h=a?null:c;return null!=h&&this.notifyCancelling_xkpzb8$_0(o.list,h),Ne}if(!e.isType(o,Xe))return Pe;if(null!=(n=i.v))r=n;else{var d=this.createCauseException_kfrsk8$_0(t);i.v=d,r=d}var f=r;if(o.isActive){if(this.tryMakeCancelling_v0qvyy$_0(o,f))return Ne}else{var _=this.tryMakeCompleting_w5s53t$_0(o,new Rt(f));if(_===Ne)throw b(("Cannot happen in "+z(o)).toString());if(_!==Te)return _}}},Re.prototype.getOrPromoteCancellingList_dmij2j$_0=function(t){var i,n;if(null==(n=t.list)){if(e.isType(t,He))i=new Ye;else{if(!e.isType(t,Ke))throw b(("State should have list: "+t).toString());this.promoteSingleToNodeList_ft43ca$_0(t),i=null}n=i}return n},Re.prototype.tryMakeCancelling_v0qvyy$_0=function(t,e){var i;if(null==(i=this.getOrPromoteCancellingList_dmij2j$_0(t)))return!1;var n,r=i,o=new qe(r,!1,e);return(n=this)._state_v70vig$_0===t&&(n._state_v70vig$_0=o,!0)&&(this.notifyCancelling_xkpzb8$_0(r,e),!0)},Re.prototype.makeCompleting_8ea4ql$=function(t){for(;;){var e=this.tryMakeCompleting_w5s53t$_0(this.state_8be2vx$,t);if(e===Ne)return!1;if(e===Ee)return!0;if(e!==Te)return this.afterCompletion_s8jyv4$(e),!0}},Re.prototype.makeCompletingOnce_8ea4ql$=function(t){for(;;){var e=this.tryMakeCompleting_w5s53t$_0(this.state_8be2vx$,t);if(e===Ne)throw new U("Job "+this+" is already complete or completing, but is being completed with "+z(t),this.get_exceptionOrNull_ejijbb$_0(t));if(e!==Te)return e}},Re.prototype.tryMakeCompleting_w5s53t$_0=function(t,i){return e.isType(t,Xe)?!e.isType(t,He)&&!e.isType(t,Ke)||e.isType(t,oi)||e.isType(i,Rt)?this.tryMakeCompletingSlowPath_uh1ctj$_0(t,i):this.tryFinalizeSimpleState_5emg4m$_0(t,i)?i:Te:Ne},Re.prototype.tryMakeCompletingSlowPath_uh1ctj$_0=function(t,i){var n,r,o,s;if(null==(n=this.getOrPromoteCancellingList_dmij2j$_0(t)))return Te;var a,l,u,p=n,c=null!=(o=e.isType(r=t,qe)?r:null)?o:new qe(p,!1,null),h={v:null};if(c.isCompleting)return Ne;if(c.isCompleting=!0,c!==t&&((u=this)._state_v70vig$_0!==t||(u._state_v70vig$_0=c,0)))return Te;var d=c.isCancelling;null!=(l=e.isType(a=i,Rt)?a:null)&&c.addExceptionLocked_tcv7n7$(l.cause);var f=c.rootCause;h.v=d?null:f,null!=(s=h.v)&&this.notifyCancelling_xkpzb8$_0(p,s);var _=this.firstChild_15hr5g$_0(t);return null!=_&&this.tryWaitForChild_dzo3im$_0(c,_,i)?Ee:this.finalizeFinishingState_10mr1z$_0(c,i)},Re.prototype.get_exceptionOrNull_ejijbb$_0=function(t){var i,n;return null!=(n=e.isType(i=t,Rt)?i:null)?n.cause:null},Re.prototype.firstChild_15hr5g$_0=function(t){var i,n,r;return null!=(r=e.isType(i=t,oi)?i:null)?r:null!=(n=t.list)?this.nextChild_n2no7k$_0(n):null},Re.prototype.tryWaitForChild_dzo3im$_0=function(t,e,i){var n;if(e.childJob.invokeOnCompletion_ct2b2z$(void 0,!1,new Fe(this,t,e,i))!==Ie())return!0;if(null==(n=this.nextChild_n2no7k$_0(e)))return!1;var r=n;return this.tryWaitForChild_dzo3im$_0(t,r,i)},Re.prototype.continueCompleting_vth2d4$_0=function(t,e,i){var n=this.nextChild_n2no7k$_0(e);if(null==n||!this.tryWaitForChild_dzo3im$_0(t,n,i)){var r=this.finalizeFinishingState_10mr1z$_0(t,i);this.afterCompletion_s8jyv4$(r)}},Re.prototype.nextChild_n2no7k$_0=function(t){for(var i=t;i._removed;)i=i._prev;for(;;)if(!(i=i._next)._removed){if(e.isType(i,oi))return i;if(e.isType(i,Ye))return null}},De.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},De.prototype=Object.create(u.prototype),De.prototype.constructor=De,De.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.local$this$JobSupport.state_8be2vx$;if(e.isType(t,oi)){if(this.state_0=8,this.result_0=this.local$$receiver.yield_11rb$(t.childJob,this),this.result_0===l)return l;continue}if(e.isType(t,Xe)){if(null!=(this.local$tmp$=t.list)){this.local$cur=this.local$tmp$._next,this.state_0=2;continue}this.local$tmp$_0=null,this.state_0=6;continue}this.state_0=7;continue;case 1:throw this.exception_0;case 2:if(y(this.local$cur,this.local$tmp$)){this.state_0=5;continue}if(e.isType(this.local$cur,oi)){if(this.state_0=3,this.result_0=this.local$$receiver.yield_11rb$(this.local$cur.childJob,this),this.result_0===l)return l;continue}this.state_0=4;continue;case 3:this.state_0=4;continue;case 4:this.local$cur=this.local$cur._next,this.state_0=2;continue;case 5:this.local$tmp$_0=p,this.state_0=6;continue;case 6:return this.local$tmp$_0;case 7:this.state_0=9;continue;case 8:return this.result_0;case 9:return p;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(Re.prototype,"children",{configurable:!0,get:function(){return V((t=this,function(e,i,n){var r=new De(t,e,this,i);return n?r:r.doResume(null)}));var t}}),Re.prototype.attachChild_kx8v25$=function(t){var i;return e.isType(i=this.invokeOnCompletion_ct2b2z$(!0,void 0,new oi(this,t)),Se)?i:o()},Re.prototype.handleOnCompletionException_tcv7n7$=function(t){throw t},Re.prototype.onCancelling_dbl4no$=function(t){},Object.defineProperty(Re.prototype,"isScopedCoroutine",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Re.prototype,"handlesException",{configurable:!0,get:function(){return!0}}),Re.prototype.handleJobException_tcv7n7$=function(t){return!1},Re.prototype.onCompletionInternal_s8jyv4$=function(t){},Re.prototype.afterCompletion_s8jyv4$=function(t){},Re.prototype.toString=function(){return this.toDebugString()+"@"+jr(this)},Re.prototype.toDebugString=function(){return this.nameString()+"{"+this.stateString_u2sjqg$_0(this.state_8be2vx$)+"}"},Re.prototype.nameString=function(){return Ar(this)},Re.prototype.stateString_u2sjqg$_0=function(t){return e.isType(t,qe)?t.isCancelling?"Cancelling":t.isCompleting?"Completing":"Active":e.isType(t,Xe)?t.isActive?"Active":"New":e.isType(t,Rt)?"Cancelled":"Completed"},Object.defineProperty(qe.prototype,"list",{get:function(){return this.list_m9wkmb$_0}}),Object.defineProperty(qe.prototype,"isCompleting",{configurable:!0,get:function(){return this._isCompleting_0},set:function(t){this._isCompleting_0=t}}),Object.defineProperty(qe.prototype,"rootCause",{configurable:!0,get:function(){return this._rootCause_0},set:function(t){this._rootCause_0=t}}),Object.defineProperty(qe.prototype,"exceptionsHolder_0",{configurable:!0,get:function(){return this._exceptionsHolder_0},set:function(t){this._exceptionsHolder_0=t}}),Object.defineProperty(qe.prototype,"isSealed",{configurable:!0,get:function(){return this.exceptionsHolder_0===Oe}}),Object.defineProperty(qe.prototype,"isCancelling",{configurable:!0,get:function(){return null!=this.rootCause}}),Object.defineProperty(qe.prototype,"isActive",{configurable:!0,get:function(){return null==this.rootCause}}),qe.prototype.sealLocked_dbl4no$=function(t){var i,n,r=this.exceptionsHolder_0;if(null==r)n=this.allocateList_0();else if(e.isType(r,w)){var s=this.allocateList_0();s.add_11rb$(r),n=s}else{if(!e.isType(r,G))throw b(("State is "+z(r)).toString());n=e.isType(i=r,G)?i:o()}var a=n,l=this.rootCause;return null!=l&&a.add_wxm5ur$(0,l),null==t||y(t,l)||a.add_11rb$(t),this.exceptionsHolder_0=Oe,a},qe.prototype.addExceptionLocked_tcv7n7$=function(t){var i,n=this.rootCause;if(null!=n){if(t!==n){var r=this.exceptionsHolder_0;if(null==r)this.exceptionsHolder_0=t;else if(e.isType(r,w)){if(t===r)return;var s=this.allocateList_0();s.add_11rb$(r),s.add_11rb$(t),this.exceptionsHolder_0=s}else{if(!e.isType(r,G))throw b(("State is "+z(r)).toString());(e.isType(i=r,G)?i:o()).add_11rb$(t)}}}else this.rootCause=t},qe.prototype.allocateList_0=function(){return d(4)},qe.prototype.toString=function(){return"Finishing[cancelling="+this.isCancelling+", completing="+this.isCompleting+", rootCause="+z(this.rootCause)+", exceptions="+z(this.exceptionsHolder_0)+", list="+this.list+"]"},qe.$metadata$={kind:s,simpleName:"Finishing",interfaces:[Xe]},Re.prototype.get_isCancelling_dpdoz8$_0=function(t){return e.isType(t,qe)&&t.isCancelling},Fe.prototype.invoke=function(t){this.parent_0.continueCompleting_vth2d4$_0(this.state_0,this.child_0,this.proposedUpdate_0)},Fe.prototype.toString=function(){return"ChildCompletion["+this.child_0+", "+z(this.proposedUpdate_0)+"]"},Fe.$metadata$={kind:s,simpleName:"ChildCompletion",interfaces:[Ke]},Be.prototype.getContinuationCancellationCause_dqr1mp$=function(t){var i,n=this.job_0.state_8be2vx$;return e.isType(n,qe)&&null!=(i=n.rootCause)?i:e.isType(n,Rt)?n.cause:t.getCancellationException()},Be.prototype.nameString=function(){return"AwaitContinuation"},Be.$metadata$={kind:s,simpleName:"AwaitContinuation",interfaces:[bt]},Object.defineProperty(Re.prototype,"isCompletedExceptionally",{configurable:!0,get:function(){return e.isType(this.state_8be2vx$,Rt)}}),Re.prototype.getCompletionExceptionOrNull=function(){var t=this.state_8be2vx$;if(e.isType(t,Xe))throw b("This job has not completed yet".toString());return this.get_exceptionOrNull_ejijbb$_0(t)},Re.prototype.getCompletedInternal_8be2vx$=function(){var t=this.state_8be2vx$;if(e.isType(t,Xe))throw b("This job has not completed yet".toString());if(e.isType(t,Rt))throw t.cause;return Ge(t)},Re.prototype.awaitInternal_8be2vx$=function(t){for(;;){var i=this.state_8be2vx$;if(!e.isType(i,Xe)){if(e.isType(i,Rt))throw i.cause;return Ge(i)}if(this.startInternal_tp1bqd$_0(i)>=0)break}return this.awaitSuspend_ixl9xw$_0(t)},Re.prototype.awaitSuspend_ixl9xw$_0=function(t){return(e=this,function(t){var i=new Be(h(t),e);return yt(i,e.invokeOnCompletion_f05bi3$(new ti(e,i))),i.getResult()})(t);var e},Re.prototype.registerSelectClause1Internal_u6kgbh$=function(t,i){for(;;){var n,s=this.state_8be2vx$;if(t.isSelected)return;if(!e.isType(s,Xe))return void(t.trySelect()&&(e.isType(s,Rt)?t.resumeSelectWithException_tcv7n7$(s.cause):ar(i,null==(n=Ge(s))||e.isType(n,r)?n:o(),t.completion)));if(0===this.startInternal_tp1bqd$_0(s))return void t.disposeOnSelect_rvfg84$(this.invokeOnCompletion_f05bi3$(new ii(this,t,i)))}},Re.prototype.selectAwaitCompletion_u6kgbh$=function(t,i){var n,s=this.state_8be2vx$;e.isType(s,Rt)?t.resumeSelectWithException_tcv7n7$(s.cause):rr(i,null==(n=Ge(s))||e.isType(n,r)?n:o(),t.completion)},Re.$metadata$={kind:s,simpleName:"JobSupport",interfaces:[dr,ke,ze,ve]},Ue.$metadata$={kind:s,simpleName:"IncompleteStateBox",interfaces:[]},Object.defineProperty(He.prototype,"isActive",{get:function(){return this.isActive_hyoax9$_0}}),Object.defineProperty(He.prototype,"list",{configurable:!0,get:function(){return null}}),He.prototype.toString=function(){return"Empty{"+(this.isActive?"Active":"New")+"}"},He.$metadata$={kind:s,simpleName:"Empty",interfaces:[Xe]},Object.defineProperty(We.prototype,"onCancelComplete",{configurable:!0,get:function(){return!0}}),Object.defineProperty(We.prototype,"handlesException",{configurable:!0,get:function(){return this.handlesException_fejgjb$_0}}),We.prototype.complete=function(){return this.makeCompleting_8ea4ql$(p)},We.prototype.completeExceptionally_tcv7n7$=function(t){return this.makeCompleting_8ea4ql$(new Rt(t))},We.prototype.handlesExceptionF=function(){var t,i,n,r,o,s;if(null==(n=null!=(i=e.isType(t=this.parentHandle_8be2vx$,oi)?t:null)?i.job:null))return!1;for(var a=n;;){if(a.handlesException)return!0;if(null==(s=null!=(o=e.isType(r=a.parentHandle_8be2vx$,oi)?r:null)?o.job:null))return!1;a=s}},We.$metadata$={kind:s,simpleName:"JobImpl",interfaces:[Mt,Re]},Xe.$metadata$={kind:x,simpleName:"Incomplete",interfaces:[]},Object.defineProperty(Ke.prototype,"isActive",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ke.prototype,"list",{configurable:!0,get:function(){return null}}),Ke.prototype.dispose=function(){var t;(e.isType(t=this.job,Re)?t:o()).removeNode_nxb11s$(this)},Ke.$metadata$={kind:s,simpleName:"JobNode",interfaces:[Xe,we,kr]},Object.defineProperty(Ye.prototype,"isActive",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ye.prototype,"list",{configurable:!0,get:function(){return this}}),Ye.prototype.getString_61zpoe$=function(t){var i=H();i.append_pdl1vj$("List{"),i.append_pdl1vj$(t),i.append_pdl1vj$("}[");for(var n={v:!0},r=this._next;!y(r,this);){if(e.isType(r,Ke)){var o=r;n.v?n.v=!1:i.append_pdl1vj$(", "),i.append_s8jyv4$(o)}r=r._next}return i.append_pdl1vj$("]"),i.toString()},Ye.prototype.toString=function(){return Mn?this.getString_61zpoe$("Active"):bo.prototype.toString.call(this)},Ye.$metadata$={kind:s,simpleName:"NodeList",interfaces:[Xe,bo]},Object.defineProperty(Ze.prototype,"list",{get:function(){return this.list_afai45$_0}}),Object.defineProperty(Ze.prototype,"isActive",{configurable:!0,get:function(){return!1}}),Ze.prototype.toString=function(){return Mn?this.list.getString_61zpoe$("New"):r.prototype.toString.call(this)},Ze.$metadata$={kind:s,simpleName:"InactiveNodeList",interfaces:[Xe]},Je.prototype.invoke=function(t){this.handler_0(t)},Je.prototype.toString=function(){return"InvokeOnCompletion["+Ar(this)+"@"+jr(this)+"]"},Je.$metadata$={kind:s,simpleName:"InvokeOnCompletion",interfaces:[Ke]},Qe.prototype.invoke=function(t){this.continuation_0.resumeWith_tl1gpc$(new f(p))},Qe.prototype.toString=function(){return"ResumeOnCompletion["+this.continuation_0+"]"},Qe.$metadata$={kind:s,simpleName:"ResumeOnCompletion",interfaces:[Ke]},ti.prototype.invoke=function(t){var i,n,s=this.job.state_8be2vx$;if(e.isType(s,Rt)){var a=this.continuation_0,l=s.cause;a.resumeWith_tl1gpc$(new f(S(l)))}else{n=this.continuation_0;var u=null==(i=Ge(s))||e.isType(i,r)?i:o();n.resumeWith_tl1gpc$(new f(u))}},ti.prototype.toString=function(){return"ResumeAwaitOnCompletion["+this.continuation_0+"]"},ti.$metadata$={kind:s,simpleName:"ResumeAwaitOnCompletion",interfaces:[Ke]},ei.prototype.invoke=function(t){this.select_0.trySelect()&&nr(this.block_0,this.select_0.completion)},ei.prototype.toString=function(){return"SelectJoinOnCompletion["+this.select_0+"]"},ei.$metadata$={kind:s,simpleName:"SelectJoinOnCompletion",interfaces:[Ke]},ii.prototype.invoke=function(t){this.select_0.trySelect()&&this.job.selectAwaitCompletion_u6kgbh$(this.select_0,this.block_0)},ii.prototype.toString=function(){return"SelectAwaitOnCompletion["+this.select_0+"]"},ii.$metadata$={kind:s,simpleName:"SelectAwaitOnCompletion",interfaces:[Ke]},ni.$metadata$={kind:s,simpleName:"JobCancellingNode",interfaces:[Ke]},ri.prototype.invoke=function(t){var e;0===(e=this)._invoked_0&&(e._invoked_0=1,1)&&this.handler_0(t)},ri.prototype.toString=function(){return"InvokeOnCancelling["+Ar(this)+"@"+jr(this)+"]"},ri.$metadata$={kind:s,simpleName:"InvokeOnCancelling",interfaces:[ni]},oi.prototype.invoke=function(t){this.childJob.parentCancelled_pv1t6x$(this.job)},oi.prototype.childCancelled_tcv7n7$=function(t){return this.job.childCancelled_tcv7n7$(t)},oi.prototype.toString=function(){return"ChildHandle["+this.childJob+"]"},oi.$metadata$={kind:s,simpleName:"ChildHandleNode",interfaces:[Se,ni]},si.prototype.invoke=function(t){this.child.parentCancelled_8o0b5c$(this.child.getContinuationCancellationCause_dqr1mp$(this.job))},si.prototype.toString=function(){return"ChildContinuation["+this.child+"]"},si.$metadata$={kind:s,simpleName:"ChildContinuation",interfaces:[ni]},ai.prototype.toString=function(){var t;return null!=(t=this.toStringInternalImpl())?t:Ar(this)+"@"+jr(this)},ai.prototype.toStringInternalImpl=function(){var t,i=Dr().Main;if(this===i)return"Dispatchers.Main";try{t=i.immediate}catch(i){if(!e.isType(i,W))throw i;t=null}return this===t?"Dispatchers.Main.immediate":null},ai.$metadata$={kind:s,simpleName:"MainCoroutineDispatcher",interfaces:[Dt]},ui.prototype.createCopy=function(){var t,e=new ui(null!=(t=this.message)?t:"",this.coroutine_8be2vx$);return e},ui.$metadata$={kind:s,simpleName:"TimeoutCancellationException",interfaces:[ae,Gr]},pi.prototype.isDispatchNeeded_1fupul$=function(t){return!1},pi.prototype.dispatch_5bn72i$=function(t,e){var i=t.get_j3r2sn$(bi());if(null==i)throw X("Dispatchers.Unconfined.dispatch function can only be used by the yield function. If you wrap Unconfined dispatcher in your code, make sure you properly delegate isDispatchNeeded and dispatch calls.");i.dispatcherWasUnconfined=!0},pi.prototype.toString=function(){return"Dispatchers.Unconfined"},pi.$metadata$={kind:k,simpleName:"Unconfined",interfaces:[Dt]};var ci=null;function hi(){return null===ci&&new pi,ci}function di(){bi(),N.call(this,bi()),this.dispatcherWasUnconfined=!1}function fi(){gi=this}fi.$metadata$={kind:k,simpleName:"Key",interfaces:[T]};var _i,mi,$i,yi,vi,gi=null;function bi(){return null===gi&&new fi,gi}function xi(t){return function(t){var i,n,r=t.context;if(wi(r),null==(n=e.isType(i=h(t),Vn)?i:null))return p;var o=n;if(o.dispatcher.isDispatchNeeded_1fupul$(r))o.dispatchYield_6v298r$(r,p);else{var s=new di;if(o.dispatchYield_6v298r$(r.plus_1fupul$(s),p),s.dispatcherWasUnconfined)return Hn(o)?l:p}return l}(t)}function wi(t){var e=t.get_j3r2sn$(xe());if(null!=e&&!e.isActive)throw e.getCancellationException()}function zi(t){return function(e){var i=mt(h(e));return t(i),i.getResult()}}function ki(){this.queue_0=new bo,this.onCloseHandler_0=null}function Si(t,e){$o.call(this,t,new Oi(e))}function Ci(t,e,i){u.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$element=e}function Ni(t){return function(){return t.isBufferFull}}function Ei(t,e){yo.call(this,e),this.element=t}function Ti(t){this.this$AbstractSendChannel=t}function Pi(t,e,i,n){Vi.call(this),this.pollResult_m5nr4l$_0=t,this.channel=e,this.select=i,this.block=n}function Oi(t){Vi.call(this),this.element=t}function Mi(){ki.call(this)}function ji(t){return function(){return t.isBufferEmpty}}function Ai(t){yo.call(this,t)}function Ii(t){this.this$AbstractChannel=t}function Ri(t){this.this$AbstractChannel=t}function Li(t){this.this$AbstractChannel=t}function Di(t,e){this.$outer=t,St.call(this),this.receive_0=e}function qi(t){this.channel=t,this.result=$i}function Fi(t,e){Xi.call(this),this.cont=t,this.receiveMode=e}function Bi(t,e){Xi.call(this),this.iterator=t,this.cont=e}function Ui(t,e,i,n){Xi.call(this),this.channel=t,this.select=e,this.block=i,this.receiveMode=n}function Vi(){mo.call(this)}function Gi(){}function Hi(t,e){Vi.call(this),this.pollResult_vo6xxe$_0=t,this.cont=e}function Wi(t){Vi.call(this),this.closeCause=t}function Xi(){mo.call(this)}function Ki(t){if(Mi.call(this),this.capacity=t,!(this.capacity>=1)){var i="ArrayChannel capacity must be at least 1, but "+this.capacity+" was specified";throw F(i.toString())}this.lock_0=new fo;var n=this.capacity;this.buffer_0=e.newArray(Y.min(n,8),null),this.head_0=0,this.size_0=0}function Yi(t,e,i){at.call(this,t,i),this._channel_0=e}function Zi(){}function Ji(){}function Qi(){}function tn(t){on(),this.holder_0=t}function en(t){this.cause=t}function nn(){rn=this}di.$metadata$={kind:s,simpleName:"YieldContext",interfaces:[N]},ki.prototype.offerInternal_11rb$=function(t){for(var e;;){if(null==(e=this.takeFirstReceiveOrPeekClosed()))return mi;var i=e;if(null!=i.tryResumeReceive_j43gjz$(t,null))return i.completeResumeReceive_11rb$(t),i.offerResult}},ki.prototype.offerSelectInternal_ys5ufj$=function(t,e){var i=this.describeTryOffer_0(t),n=e.performAtomicTrySelect_6q0pxr$(i);if(null!=n)return n;var r=i.result;return r.completeResumeReceive_11rb$(t),r.offerResult},Object.defineProperty(ki.prototype,"closedForSend_0",{configurable:!0,get:function(){var t,i,n;return null!=(i=e.isType(t=this.queue_0._prev,Wi)?t:null)?(this.helpClose_0(i),n=i):n=null,n}}),Object.defineProperty(ki.prototype,"closedForReceive_0",{configurable:!0,get:function(){var t,i,n;return null!=(i=e.isType(t=this.queue_0._next,Wi)?t:null)?(this.helpClose_0(i),n=i):n=null,n}}),ki.prototype.takeFirstSendOrPeekClosed_0=function(){var t,i=this.queue_0;t:do{var n=i._next;if(n===i){t=null;break t}if(!e.isType(n,Vi)){t=null;break t}if(e.isType(n,Wi)){t=n;break t}if(!n.remove())throw b("Should remove".toString());t=n}while(0);return t},ki.prototype.sendBuffered_0=function(t){var i=this.queue_0,n=new Oi(t),r=i._prev;return e.isType(r,Gi)?r:(i.addLast_l2j9rm$(n),null)},ki.prototype.describeSendBuffered_0=function(t){return new Si(this.queue_0,t)},Si.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Gi)?mi:null},Si.$metadata$={kind:s,simpleName:"SendBufferedDesc",interfaces:[$o]},Object.defineProperty(ki.prototype,"isClosedForSend",{configurable:!0,get:function(){return null!=this.closedForSend_0}}),Object.defineProperty(ki.prototype,"isFull",{configurable:!0,get:function(){return this.isFullImpl_0}}),Object.defineProperty(ki.prototype,"isFullImpl_0",{configurable:!0,get:function(){return!e.isType(this.queue_0._next,Gi)&&this.isBufferFull}}),ki.prototype.send_11rb$=function(t,e){if(this.offerInternal_11rb$(t)!==_i)return this.sendSuspend_0(t,e)},Ci.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},Ci.prototype=Object.create(u.prototype),Ci.prototype.constructor=Ci,Ci.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.$this.offerInternal_11rb$(this.local$element)===_i){if(this.state_0=2,this.result_0=xi(this),this.result_0===l)return l;continue}this.state_0=3;continue;case 1:throw this.exception_0;case 2:return;case 3:if(this.state_0=4,this.result_0=this.$this.sendSuspend_0(this.local$element,this),this.result_0===l)return l;continue;case 4:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ki.prototype.sendFair_1c3m6u$=function(t,e,i){var n=new Ci(this,t,e);return i?n:n.doResume(null)},ki.prototype.offer_11rb$=function(t){var i,n=this.offerInternal_11rb$(t);if(n!==_i){if(n===mi){if(null==(i=this.closedForSend_0))return!1;throw this.helpCloseAndGetSendException_0(i)}throw e.isType(n,Wi)?this.helpCloseAndGetSendException_0(n):b(("offerInternal returned "+n.toString()).toString())}return!0},ki.prototype.helpCloseAndGetSendException_0=function(t){return this.helpClose_0(t),t.sendException},ki.prototype.sendSuspend_0=function(t,i){return zi((n=this,r=t,function(t){for(;;){if(n.isFullImpl_0){var i=new Hi(r,t),o=n.enqueueSend_vs6846$(i);if(null==o)return void $t(t,i);if(e.isType(o,Wi))return void n.helpCloseAndResumeWithSendException_0(t,o);if(o!==yi&&!e.isType(o,Xi))throw b(("enqueueSend returned "+z(o)).toString())}var s=n.offerInternal_11rb$(r);if(s===_i)return void t.resumeWith_tl1gpc$(new f(p));if(s!==mi){if(e.isType(s,Wi))return void n.helpCloseAndResumeWithSendException_0(t,s);throw b(("offerInternal returned "+s.toString()).toString())}}}))(i);var n,r},ki.prototype.helpCloseAndResumeWithSendException_0=function(t,e){this.helpClose_0(e);var i=e.sendException;t.resumeWith_tl1gpc$(new f(S(i)))},ki.prototype.enqueueSend_vs6846$=function(t){if(this.isBufferAlwaysFull){var i=this.queue_0,n=i._prev;if(e.isType(n,Gi))return n;i.addLast_l2j9rm$(t)}else{var r,o=this.queue_0;t:do{var s=o._prev;if(e.isType(s,Gi))return s;if(!Ni(this)()){r=!1;break t}o.addLast_l2j9rm$(t),r=!0}while(0);if(!r)return yi}return null},ki.prototype.close_dbl4no$$default=function(t){var i,n,r=new Wi(t),s=this.queue_0;t:do{if(e.isType(s._prev,Wi)){n=!1;break t}s.addLast_l2j9rm$(r),n=!0}while(0);var a=n,l=a?r:e.isType(i=this.queue_0._prev,Wi)?i:o();return this.helpClose_0(l),a&&this.invokeOnCloseHandler_0(t),a},ki.prototype.invokeOnCloseHandler_0=function(t){var e,i,n=this.onCloseHandler_0;null!==n&&n!==vi&&(i=this).onCloseHandler_0===n&&(i.onCloseHandler_0=vi,1)&&("function"==typeof(e=n)?e:o())(t)},ki.prototype.invokeOnClose_f05bi3$=function(t){if(null!=(i=this).onCloseHandler_0||(i.onCloseHandler_0=t,0)){var e=this.onCloseHandler_0;if(e===vi)throw b("Another handler was already registered and successfully invoked");throw b("Another handler was already registered: "+z(e))}var i,n=this.closedForSend_0;null!=n&&function(e){return e.onCloseHandler_0===t&&(e.onCloseHandler_0=vi,!0)}(this)&&t(n.closeCause)},ki.prototype.helpClose_0=function(t){for(var i,n,s=new Jn;null!=(n=e.isType(i=t._prev,Xi)?i:null);){var a=n;a.remove()?s=s.plus_11rb$(a):a.helpRemove()}var l,u,p,c=s;if(null!=(l=c.holder_0))if(e.isType(l,G))for(var h=e.isType(p=c.holder_0,G)?p:o(),d=h.size-1|0;d>=0;d--)h.get_za3lpa$(d).resumeReceiveClosed_1zqbm$(t);else(null==(u=c.holder_0)||e.isType(u,r)?u:o()).resumeReceiveClosed_1zqbm$(t);this.onClosedIdempotent_l2j9rm$(t)},ki.prototype.onClosedIdempotent_l2j9rm$=function(t){},ki.prototype.takeFirstReceiveOrPeekClosed=function(){var t,i=this.queue_0;t:do{var n=i._next;if(n===i){t=null;break t}if(!e.isType(n,Gi)){t=null;break t}if(e.isType(n,Wi)){t=n;break t}if(!n.remove())throw b("Should remove".toString());t=n}while(0);return t},ki.prototype.describeTryOffer_0=function(t){return new Ei(t,this.queue_0)},Ei.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Gi)?null:mi},Ei.prototype.onPrepare_xe32vn$=function(t){var i,n;return null==(n=(e.isType(i=t.affected,Gi)?i:o()).tryResumeReceive_j43gjz$(this.element,t))?wn:n===gn?gn:null},Ei.$metadata$={kind:s,simpleName:"TryOfferDesc",interfaces:[yo]},Ti.prototype.registerSelectClause2_rol3se$=function(t,e,i){this.this$AbstractSendChannel.registerSelectSend_0(t,e,i)},Ti.$metadata$={kind:s,interfaces:[_r]},Object.defineProperty(ki.prototype,"onSend",{configurable:!0,get:function(){return new Ti(this)}}),ki.prototype.registerSelectSend_0=function(t,i,n){for(;;){if(t.isSelected)return;if(this.isFullImpl_0){var r=new Pi(i,this,t,n),o=this.enqueueSend_vs6846$(r);if(null==o)return void t.disposeOnSelect_rvfg84$(r);if(e.isType(o,Wi))throw this.helpCloseAndGetSendException_0(o);if(o!==yi&&!e.isType(o,Xi))throw b(("enqueueSend returned "+z(o)+" ").toString())}var s=this.offerSelectInternal_ys5ufj$(i,t);if(s===kn)return;if(s!==mi&&s!==gn){if(s===_i)return void ar(n,this,t.completion);throw e.isType(s,Wi)?this.helpCloseAndGetSendException_0(s):b(("offerSelectInternal returned "+s.toString()).toString())}}},ki.prototype.toString=function(){return Ar(this)+"@"+jr(this)+"{"+this.queueDebugStateString_0+"}"+this.bufferDebugString},Object.defineProperty(ki.prototype,"queueDebugStateString_0",{configurable:!0,get:function(){var t=this.queue_0._next;if(t===this.queue_0)return"EmptyQueue";var i=e.isType(t,Wi)?t.toString():e.isType(t,Xi)?"ReceiveQueued":e.isType(t,Vi)?"SendQueued":"UNEXPECTED:"+t,n=this.queue_0._prev;return n!==t&&(i+=",queueSize="+this.countQueueSize_0(),e.isType(n,Wi)&&(i+=",closedForSend="+n)),i}}),ki.prototype.countQueueSize_0=function(){for(var t={v:0},i=this.queue_0,n=i._next;!y(n,i);)e.isType(n,mo)&&(t.v=t.v+1|0),n=n._next;return t.v},Object.defineProperty(ki.prototype,"bufferDebugString",{configurable:!0,get:function(){return""}}),Object.defineProperty(Pi.prototype,"pollResult",{get:function(){return this.pollResult_m5nr4l$_0}}),Pi.prototype.tryResumeSend_uc1cc4$=function(t){var i;return null==(i=this.select.trySelectOther_uc1cc4$(t))||e.isType(i,tr)?i:o()},Pi.prototype.completeResumeSend=function(){M(this.block,this.channel,this.select.completion)},Pi.prototype.dispose=function(){this.remove()},Pi.prototype.resumeSendClosed_1zqbm$=function(t){this.select.trySelect()&&this.select.resumeSelectWithException_tcv7n7$(t.sendException)},Pi.prototype.toString=function(){return"SendSelect@"+jr(this)+"("+z(this.pollResult)+")["+this.channel+", "+this.select+"]"},Pi.$metadata$={kind:s,simpleName:"SendSelect",interfaces:[we,Vi]},Object.defineProperty(Oi.prototype,"pollResult",{configurable:!0,get:function(){return this.element}}),Oi.prototype.tryResumeSend_uc1cc4$=function(t){return null!=t&&t.finishPrepare(),i},Oi.prototype.completeResumeSend=function(){},Oi.prototype.resumeSendClosed_1zqbm$=function(t){},Oi.prototype.toString=function(){return"SendBuffered@"+jr(this)+"("+this.element+")"},Oi.$metadata$={kind:s,simpleName:"SendBuffered",interfaces:[Vi]},ki.$metadata$={kind:s,simpleName:"AbstractSendChannel",interfaces:[Ji]},Mi.prototype.pollInternal=function(){for(var t;;){if(null==(t=this.takeFirstSendOrPeekClosed_0()))return $i;var e=t;if(null!=e.tryResumeSend_uc1cc4$(null))return e.completeResumeSend(),e.pollResult}},Mi.prototype.pollSelectInternal_y5yyj0$=function(t){var e=this.describeTryPoll_0(),i=t.performAtomicTrySelect_6q0pxr$(e);return null!=i?i:(e.result.completeResumeSend(),e.result.pollResult)},Object.defineProperty(Mi.prototype,"hasReceiveOrClosed_0",{configurable:!0,get:function(){return e.isType(this.queue_0._next,Gi)}}),Object.defineProperty(Mi.prototype,"isClosedForReceive",{configurable:!0,get:function(){return null!=this.closedForReceive_0&&this.isBufferEmpty}}),Object.defineProperty(Mi.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),Object.defineProperty(Mi.prototype,"isEmptyImpl_0",{configurable:!0,get:function(){return!e.isType(this.queue_0._next,Vi)&&this.isBufferEmpty}}),Mi.prototype.receive=function(t){var i,n=this.pollInternal();return n===$i||e.isType(n,Wi)?this.receiveSuspend_0(0,t):null==(i=n)||e.isType(i,r)?i:o()},Mi.prototype.receiveSuspend_0=function(t,i){return zi((n=t,s=this,function(t){for(var i,a,l=new Fi(e.isType(i=t,_t)?i:o(),n);;){if(s.enqueueReceive_0(l))return void s.removeReceiveOnCancel_0(t,l);var u=s.pollInternal();if(e.isType(u,Wi))return void l.resumeReceiveClosed_1zqbm$(u);if(u!==$i){var c=l.resumeValue_11rb$(null==(a=u)||e.isType(a,r)?a:o());return void t.resumeWith_tl1gpc$(new f(c))}}return p}))(i);var n,s},Mi.prototype.enqueueReceiveInternal_i292ax$=function(t){var i;if(this.isBufferAlwaysEmpty){var n,r=this.queue_0;t:do{if(e.isType(r._prev,Vi)){n=!1;break t}r.addLast_l2j9rm$(t),n=!0}while(0);i=n}else{var o,s=this.queue_0;t:do{if(e.isType(s._prev,Vi)){o=!1;break t}if(!ji(this)()){o=!1;break t}s.addLast_l2j9rm$(t),o=!0}while(0);i=o}return i},Mi.prototype.enqueueReceive_0=function(t){var e=this.enqueueReceiveInternal_i292ax$(t);return e&&this.onReceiveEnqueued(),e},Mi.prototype.receiveOrNull=function(t){var i,n=this.pollInternal();return n===$i||e.isType(n,Wi)?this.receiveSuspend_0(1,t):null==(i=n)||e.isType(i,r)?i:o()},Mi.prototype.receiveOrNullResult_0=function(t){var i;if(e.isType(t,Wi)){if(null!=t.closeCause)throw t.closeCause;return null}return null==(i=t)||e.isType(i,r)?i:o()},Mi.prototype.receiveOrClosed=function(t){var i,n,s=this.pollInternal();return s!==$i?(e.isType(s,Wi)?i=new tn(new en(s.closeCause)):(on(),i=new tn(null==(n=s)||e.isType(n,r)?n:o())),i):this.receiveSuspend_0(2,t)},Mi.prototype.poll=function(){var t=this.pollInternal();return t===$i?null:this.receiveOrNullResult_0(t)},Mi.prototype.cancel_dbl4no$$default=function(t){return this.cancelInternal_fg6mcv$(t)},Mi.prototype.cancel_m4sck1$$default=function(t){this.cancelInternal_fg6mcv$(null!=t?t:Hr(Ar(this)+" was cancelled"))},Mi.prototype.cancelInternal_fg6mcv$=function(t){var e=this.close_dbl4no$(t);return this.onCancelIdempotent_6taknv$(e),e},Mi.prototype.onCancelIdempotent_6taknv$=function(t){var i;if(null==(i=this.closedForSend_0))throw b("Cannot happen".toString());for(var n=i,s=new Jn;;){var a,l=n._prev;if(e.isType(l,bo))break;l.remove()?s=s.plus_11rb$(e.isType(a=l,Vi)?a:o()):l.helpRemove()}var u,p,c,h=s;if(null!=(u=h.holder_0))if(e.isType(u,G))for(var d=e.isType(c=h.holder_0,G)?c:o(),f=d.size-1|0;f>=0;f--)d.get_za3lpa$(f).resumeSendClosed_1zqbm$(n);else(null==(p=h.holder_0)||e.isType(p,r)?p:o()).resumeSendClosed_1zqbm$(n)},Mi.prototype.iterator=function(){return new qi(this)},Mi.prototype.describeTryPoll_0=function(){return new Ai(this.queue_0)},Ai.prototype.failure_l2j9rm$=function(t){return e.isType(t,Wi)?t:e.isType(t,Vi)?null:$i},Ai.prototype.onPrepare_xe32vn$=function(t){var i,n;return null==(n=(e.isType(i=t.affected,Vi)?i:o()).tryResumeSend_uc1cc4$(t))?wn:n===gn?gn:null},Ai.$metadata$={kind:s,simpleName:"TryPollDesc",interfaces:[yo]},Ii.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,r;r=e.isType(n=i,K)?n:o(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,0,r)},Ii.$metadata$={kind:s,interfaces:[fr]},Object.defineProperty(Mi.prototype,"onReceive",{configurable:!0,get:function(){return new Ii(this)}}),Ri.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,r;r=e.isType(n=i,K)?n:o(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,1,r)},Ri.$metadata$={kind:s,interfaces:[fr]},Object.defineProperty(Mi.prototype,"onReceiveOrNull",{configurable:!0,get:function(){return new Ri(this)}}),Li.prototype.registerSelectClause1_o3xas4$=function(t,i){var n,r;r=e.isType(n=i,K)?n:o(),this.this$AbstractChannel.registerSelectReceiveMode_0(t,2,r)},Li.$metadata$={kind:s,interfaces:[fr]},Object.defineProperty(Mi.prototype,"onReceiveOrClosed",{configurable:!0,get:function(){return new Li(this)}}),Mi.prototype.registerSelectReceiveMode_0=function(t,e,i){for(;;){if(t.isSelected)return;if(this.isEmptyImpl_0){if(this.enqueueReceiveSelect_0(t,i,e))return}else{var n=this.pollSelectInternal_y5yyj0$(t);if(n===kn)return;n!==$i&&n!==gn&&this.tryStartBlockUnintercepted_0(i,t,e,n)}}},Mi.prototype.tryStartBlockUnintercepted_0=function(t,i,n,s){var a,l;if(e.isType(s,Wi))switch(n){case 0:throw s.receiveException;case 2:if(!i.trySelect())return;ar(t,new tn(new en(s.closeCause)),i.completion);break;case 1:if(null!=s.closeCause)throw s.receiveException;if(!i.trySelect())return;ar(t,null,i.completion)}else 2===n?(e.isType(s,Wi)?a=new tn(new en(s.closeCause)):(on(),a=new tn(null==(l=s)||e.isType(l,r)?l:o())),ar(t,a,i.completion)):ar(t,s,i.completion)},Mi.prototype.enqueueReceiveSelect_0=function(t,e,i){var n=new Ui(this,t,e,i),r=this.enqueueReceive_0(n);return r&&t.disposeOnSelect_rvfg84$(n),r},Mi.prototype.takeFirstReceiveOrPeekClosed=function(){var t=ki.prototype.takeFirstReceiveOrPeekClosed.call(this);return null==t||e.isType(t,Wi)||this.onReceiveDequeued(),t},Mi.prototype.onReceiveEnqueued=function(){},Mi.prototype.onReceiveDequeued=function(){},Mi.prototype.removeReceiveOnCancel_0=function(t,e){t.invokeOnCancellation_f05bi3$(new Di(this,e))},Di.prototype.invoke=function(t){this.receive_0.remove()&&this.$outer.onReceiveDequeued()},Di.prototype.toString=function(){return"RemoveReceiveOnCancel["+this.receive_0+"]"},Di.$metadata$={kind:s,simpleName:"RemoveReceiveOnCancel",interfaces:[St]},qi.prototype.hasNext=function(t){return this.result!==$i?this.hasNextResult_0(this.result):(this.result=this.channel.pollInternal(),this.result!==$i?this.hasNextResult_0(this.result):this.hasNextSuspend_0(t))},qi.prototype.hasNextResult_0=function(t){if(e.isType(t,Wi)){if(null!=t.closeCause)throw t.receiveException;return!1}return!0},qi.prototype.hasNextSuspend_0=function(t){return zi((i=this,function(t){for(var n=new Bi(i,t);;){if(i.channel.enqueueReceive_0(n))return void i.channel.removeReceiveOnCancel_0(t,n);var r=i.channel.pollInternal();if(i.result=r,e.isType(r,Wi)){if(null==r.closeCause)t.resumeWith_tl1gpc$(new f(!1));else{var o=r.receiveException;t.resumeWith_tl1gpc$(new f(S(o)))}return}if(r!==$i)return void t.resumeWith_tl1gpc$(new f(!0))}return p}))(t);var i},qi.prototype.next=function(){var t,i=this.result;if(e.isType(i,Wi))throw i.receiveException;if(i!==$i)return this.result=$i,null==(t=i)||e.isType(t,r)?t:o();throw b("'hasNext' should be called prior to 'next' invocation")},qi.$metadata$={kind:s,simpleName:"Itr",interfaces:[sn]},Fi.prototype.resumeValue_11rb$=function(t){return 2===this.receiveMode?new tn(t):t},Fi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null==this.cont.tryResume_19pj23$(this.resumeValue_11rb$(t),null!=e?e.desc:null)?null:(null!=e&&e.finishPrepare(),i)},Fi.prototype.completeResumeReceive_11rb$=function(t){this.cont.completeResume_za3rmp$(i)},Fi.prototype.resumeReceiveClosed_1zqbm$=function(t){if(1===this.receiveMode&&null==t.closeCause)this.cont.resumeWith_tl1gpc$(new f(null));else if(2===this.receiveMode){var e=this.cont,i=new tn(new en(t.closeCause));e.resumeWith_tl1gpc$(new f(i))}else{var n=this.cont,r=t.receiveException;n.resumeWith_tl1gpc$(new f(S(r)))}},Fi.prototype.toString=function(){return"ReceiveElement@"+jr(this)+"[receiveMode="+this.receiveMode+"]"},Fi.$metadata$={kind:s,simpleName:"ReceiveElement",interfaces:[Xi]},Bi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null==this.cont.tryResume_19pj23$(!0,null!=e?e.desc:null)?null:(null!=e&&e.finishPrepare(),i)},Bi.prototype.completeResumeReceive_11rb$=function(t){this.iterator.result=t,this.cont.completeResume_za3rmp$(i)},Bi.prototype.resumeReceiveClosed_1zqbm$=function(t){var e=null==t.closeCause?this.cont.tryResume_19pj23$(!1):this.cont.tryResumeWithException_tcv7n7$(xo(t.receiveException,this.cont));null!=e&&(this.iterator.result=t,this.cont.completeResume_za3rmp$(e))},Bi.prototype.toString=function(){return"ReceiveHasNext@"+jr(this)},Bi.$metadata$={kind:s,simpleName:"ReceiveHasNext",interfaces:[Xi]},Ui.prototype.tryResumeReceive_j43gjz$=function(t,i){var n;return null==(n=this.select.trySelectOther_uc1cc4$(i))||e.isType(n,tr)?n:o()},Ui.prototype.completeResumeReceive_11rb$=function(t){M(this.block,2===this.receiveMode?new tn(t):t,this.select.completion)},Ui.prototype.resumeReceiveClosed_1zqbm$=function(t){if(this.select.trySelect())switch(this.receiveMode){case 0:this.select.resumeSelectWithException_tcv7n7$(t.receiveException);break;case 2:M(this.block,new tn(new en(t.closeCause)),this.select.completion);break;case 1:null==t.closeCause?M(this.block,null,this.select.completion):this.select.resumeSelectWithException_tcv7n7$(t.receiveException)}},Ui.prototype.dispose=function(){this.remove()&&this.channel.onReceiveDequeued()},Ui.prototype.toString=function(){return"ReceiveSelect@"+jr(this)+"["+this.select+",receiveMode="+this.receiveMode+"]"},Ui.$metadata$={kind:s,simpleName:"ReceiveSelect",interfaces:[we,Xi]},Mi.$metadata$={kind:s,simpleName:"AbstractChannel",interfaces:[ln,ki]},Vi.$metadata$={kind:s,simpleName:"Send",interfaces:[mo]},Gi.$metadata$={kind:x,simpleName:"ReceiveOrClosed",interfaces:[]},Object.defineProperty(Hi.prototype,"pollResult",{get:function(){return this.pollResult_vo6xxe$_0}}),Hi.prototype.tryResumeSend_uc1cc4$=function(t){return null==this.cont.tryResume_19pj23$(p,null!=t?t.desc:null)?null:(null!=t&&t.finishPrepare(),i)},Hi.prototype.completeResumeSend=function(){this.cont.completeResume_za3rmp$(i)},Hi.prototype.resumeSendClosed_1zqbm$=function(t){var e=this.cont,i=t.sendException;e.resumeWith_tl1gpc$(new f(S(i)))},Hi.prototype.toString=function(){return"SendElement@"+jr(this)+"("+z(this.pollResult)+")"},Hi.$metadata$={kind:s,simpleName:"SendElement",interfaces:[Vi]},Object.defineProperty(Wi.prototype,"sendException",{configurable:!0,get:function(){var t;return null!=(t=this.closeCause)?t:new dn(pn)}}),Object.defineProperty(Wi.prototype,"receiveException",{configurable:!0,get:function(){var t;return null!=(t=this.closeCause)?t:new fn(pn)}}),Object.defineProperty(Wi.prototype,"offerResult",{configurable:!0,get:function(){return this}}),Object.defineProperty(Wi.prototype,"pollResult",{configurable:!0,get:function(){return this}}),Wi.prototype.tryResumeSend_uc1cc4$=function(t){return null!=t&&t.finishPrepare(),i},Wi.prototype.completeResumeSend=function(){},Wi.prototype.tryResumeReceive_j43gjz$=function(t,e){return null!=e&&e.finishPrepare(),i},Wi.prototype.completeResumeReceive_11rb$=function(t){},Wi.prototype.resumeSendClosed_1zqbm$=function(t){},Wi.prototype.toString=function(){return"Closed@"+jr(this)+"["+z(this.closeCause)+"]"},Wi.$metadata$={kind:s,simpleName:"Closed",interfaces:[Gi,Vi]},Object.defineProperty(Xi.prototype,"offerResult",{configurable:!0,get:function(){return _i}}),Xi.$metadata$={kind:s,simpleName:"Receive",interfaces:[Gi,mo]},Object.defineProperty(Ki.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Ki.prototype,"isBufferEmpty",{configurable:!0,get:function(){return 0===this.size_0}}),Object.defineProperty(Ki.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Ki.prototype,"isBufferFull",{configurable:!0,get:function(){return this.size_0===this.capacity}}),Object.defineProperty(Ki.prototype,"isFull",{configurable:!0,get:function(){return this.isFullImpl_0}}),Object.defineProperty(Ki.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),Object.defineProperty(Ki.prototype,"isClosedForReceive",{configurable:!0,get:function(){return e.callGetter(this,Mi.prototype,"isClosedForReceive")}}),Ki.prototype.offerInternal_11rb$=function(t){var i={v:null};t:do{var n,r,o=this.size_0;if(null!=(n=this.closedForSend_0))return n;if(o<this.capacity){if(this.size_0=o+1|0,0===o)for(;null!=(r=this.takeFirstReceiveOrPeekClosed());){if(i.v=r,e.isType(i.v,Wi))return this.size_0=o,q(i.v);if(null!=q(i.v).tryResumeReceive_j43gjz$(t,null)){this.size_0=o;break t}}return this.ensureCapacity_0(o),this.buffer_0[(this.head_0+o|0)%this.buffer_0.length]=t,_i}return mi}while(0);return q(i.v).completeResumeReceive_11rb$(t),q(i.v).offerResult},Ki.prototype.offerSelectInternal_ys5ufj$=function(t,i){var n={v:null};t:do{var r,o=this.size_0;if(null!=(r=this.closedForSend_0))return r;if(o<this.capacity){if(this.size_0=o+1|0,0===o)e:for(;;){var s=this.describeTryOffer_0(t),a=i.performAtomicTrySelect_6q0pxr$(s);if(null==a){this.size_0=o,n.v=s.result;break t}if(a===mi)break e;if(a!==gn){if(a===kn||e.isType(a,Wi))return this.size_0=o,a;throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(a)).toString())}}return i.trySelect()?(this.ensureCapacity_0(o),this.buffer_0[(this.head_0+o|0)%this.buffer_0.length]=t,_i):(this.size_0=o,kn)}return mi}while(0);return q(n.v).completeResumeReceive_11rb$(t),q(n.v).offerResult},Ki.prototype.enqueueSend_vs6846$=function(t){return Mi.prototype.enqueueSend_vs6846$.call(this,t)},Ki.prototype.ensureCapacity_0=function(t){if(t>=this.buffer_0.length){for(var i=2*this.buffer_0.length|0,n=this.capacity,r=Y.min(i,n),o=e.newArray(r,null),s=0;s<t;s++)o[s]=this.buffer_0[(this.head_0+s|0)%this.buffer_0.length];this.buffer_0=o,this.head_0=0}},Ki.prototype.pollInternal=function(){var t,i,n={v:null},r={v:!1},o={v:null},s=this.size_0;if(0===s)return null!=(t=this.closedForSend_0)?t:$i;o.v=this.buffer_0[this.head_0],this.buffer_0[this.head_0]=null,this.size_0=s-1|0;var a=$i;if(s===this.capacity)t:for(;null!=(i=this.takeFirstSendOrPeekClosed_0());)if(n.v=i,null!=q(n.v).tryResumeSend_uc1cc4$(null)){r.v=!0,a=q(n.v).pollResult;break t}return a===$i||e.isType(a,Wi)||(this.size_0=s,this.buffer_0[(this.head_0+s|0)%this.buffer_0.length]=a),this.head_0=(this.head_0+1|0)%this.buffer_0.length,r.v&&q(n.v).completeResumeSend(),o.v},Ki.prototype.pollSelectInternal_y5yyj0$=function(t){var i,n={v:null},r={v:!1},o={v:null},s=this.size_0;if(0===s)return null!=(i=this.closedForSend_0)?i:$i;o.v=this.buffer_0[this.head_0],this.buffer_0[this.head_0]=null,this.size_0=s-1|0;var a=$i;if(s===this.capacity)t:for(;;){var l=this.describeTryPoll_0(),u=t.performAtomicTrySelect_6q0pxr$(l);if(null==u){n.v=l.result,r.v=!0,a=q(n.v).pollResult;break t}if(u===$i)break t;if(u!==gn){if(u===kn)return this.size_0=s,this.buffer_0[this.head_0]=o.v,u;if(e.isType(u,Wi)){n.v=u,r.v=!0,a=u;break t}throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(u)).toString())}}if(a===$i||e.isType(a,Wi)){if(!t.trySelect())return this.size_0=s,this.buffer_0[this.head_0]=o.v,kn}else this.size_0=s,this.buffer_0[(this.head_0+s|0)%this.buffer_0.length]=a;return this.head_0=(this.head_0+1|0)%this.buffer_0.length,r.v&&q(n.v).completeResumeSend(),o.v},Ki.prototype.enqueueReceiveInternal_i292ax$=function(t){return Mi.prototype.enqueueReceiveInternal_i292ax$.call(this,t)},Ki.prototype.onCancelIdempotent_6taknv$=function(t){if(t){for(var e=this.size_0,i=0;i<e;i++)this.buffer_0[this.head_0]=0,this.head_0=(this.head_0+1|0)%this.buffer_0.length;this.size_0=0}Mi.prototype.onCancelIdempotent_6taknv$.call(this,t)},Object.defineProperty(Ki.prototype,"bufferDebugString",{configurable:!0,get:function(){return"(buffer:capacity="+this.capacity+",size="+this.size_0+")"}}),Ki.$metadata$={kind:s,simpleName:"ArrayChannel",interfaces:[Mi]},Ji.prototype.close_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.close_dbl4no$$default(t)},Ji.$metadata$={kind:x,simpleName:"SendChannel",interfaces:[]},Qi.prototype.cancel_m4sck1$=function(t,e){void 0===t&&(t=null),e?e(t):this.cancel_m4sck1$$default(t)},Qi.prototype.cancel=function(){this.cancel_m4sck1$(null)},Qi.prototype.cancel_dbl4no$=function(t,e){return void 0===t&&(t=null),e?e(t):this.cancel_dbl4no$$default(t)},Qi.$metadata$={kind:x,simpleName:"ReceiveChannel",interfaces:[]},Object.defineProperty(tn.prototype,"isClosed",{configurable:!0,get:function(){return e.isType(this.holder_0,en)}}),Object.defineProperty(tn.prototype,"value",{configurable:!0,get:function(){var t;if(e.isType(this.holder_0,en))throw b(pn.toString());return null==(t=this.holder_0)||e.isType(t,r)?t:o()}}),Object.defineProperty(tn.prototype,"valueOrNull",{configurable:!0,get:function(){var t;return e.isType(this.holder_0,en)?null:null==(t=this.holder_0)||e.isType(t,r)?t:o()}}),Object.defineProperty(tn.prototype,"closeCause",{configurable:!0,get:function(){if(!e.isType(this.holder_0,en))throw b("Channel was not closed".toString());return this.holder_0.cause}}),tn.prototype.toString=function(){return e.isType(this.holder_0,en)?this.holder_0.toString():"Value("+z(this.holder_0)+")"},en.prototype.equals=function(t){return e.isType(t,en)&&y(this.cause,t.cause)},en.prototype.hashCode=function(){var t,e=this.cause;return null!=(t=null!=e?J(e):null)?t:0},en.prototype.toString=function(){return"Closed("+z(this.cause)+")"},en.$metadata$={kind:s,simpleName:"Closed",interfaces:[]},nn.prototype.value_41v7ql$=v("kotlinx-coroutines-core.kotlinx.coroutines.channels.ValueOrClosed.Companion.value_41v7ql$",g((function(){var e=t.kotlinx.coroutines.channels.ValueOrClosed;return function(t){return new e(t)}}))),nn.prototype.closed_8qz7vd$=v("kotlinx-coroutines-core.kotlinx.coroutines.channels.ValueOrClosed.Companion.closed_8qz7vd$",g((function(){var e=t.kotlinx.coroutines.channels.ValueOrClosed.Closed,i=t.kotlinx.coroutines.channels.ValueOrClosed;return function(t){return new i(new e(t))}}))),nn.$metadata$={kind:k,simpleName:"Companion",interfaces:[]};var rn=null;function on(){return null===rn&&new nn,rn}function sn(){}function an(t,e){u.call(this,e),this.exceptionState_0=1,this.$this=t}function ln(){hn()}function un(){cn=this,this.UNLIMITED=2147483647,this.RENDEZVOUS=0,this.CONFLATED=-1,this.BUFFERED=-2,this.OPTIONAL_CHANNEL_8be2vx$=-3,this.DEFAULT_BUFFER_PROPERTY_NAME="kotlinx.coroutines.channels.defaultBuffer",this.CHANNEL_DEFAULT_CAPACITY_8be2vx$=er(this.DEFAULT_BUFFER_PROPERTY_NAME,64,1,2147483646)}tn.$metadata$={kind:s,simpleName:"ValueOrClosed",interfaces:[]},tn.prototype.unbox=function(){return this.holder_0},tn.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.holder_0)|0},tn.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.holder_0,t.holder_0)},an.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[u]},an.prototype=Object.create(u.prototype),an.prototype.constructor=an,an.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.hasNext(this),this.result_0===l)return l;continue;case 1:throw this.exception_0;case 2:if(!this.result_0)throw new fn(pn);return this.$this.next();default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},sn.prototype.next0=function(t,e){var i=new an(this,t);return e?i:i.doResume(null)},sn.$metadata$={kind:x,simpleName:"ChannelIterator",interfaces:[]},un.$metadata$={kind:k,simpleName:"Factory",interfaces:[]};var pn,cn=null;function hn(){return null===cn&&new un,cn}function dn(t){b(t,this),this.name="ClosedSendChannelException"}function fn(t){Z.call(this,t),this.name="ClosedReceiveChannelException"}function _n(t,e,i){at.call(this,t,i),this._channel_0=e}function mn(){ConflatedBroadcastChannel$Companion_getInstance(),this._state_0=ConflatedBroadcastChannel$Companion_getInstance().INITIAL_STATE_0,this._updating_0=0,this.onCloseHandler_0=null}function $n(){An(),Mi.call(this),this.lock_0=new fo,this.value_0=An().EMPTY_0}function yn(){jn=this,this.EMPTY_0=new tr("EMPTY")}ln.$metadata$={kind:x,simpleName:"Channel",interfaces:[Qi,Ji]},dn.$metadata$={kind:s,simpleName:"ClosedSendChannelException",interfaces:[U]},fn.$metadata$={kind:s,simpleName:"ClosedReceiveChannelException",interfaces:[Z]},v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEach_ur1qrk$",g((function(){var t=e.kotlin.Unit;return function(i,n,r){var o=i.openSubscription();try{var s;for(s=o.iterator();e.suspendCall(s.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)n(s.next())}finally{o.cancel_m4sck1$()}return t}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEach_fsi0yh$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)o(l.next())}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return i}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.consumeEachIndexed_pji9r4$",g((function(){var i=e.kotlin.collections.IndexedValue,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();s(new i((c=l.v,l.v=c+1|0,c),h))}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}e.setCoroutineResult(n,e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.elementAtOrElse_m7muas$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,o,s){var a=null;try{var l,u;if(r<0)return o(r);var p=0;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=l.next();if(r===(p=(u=p)+1|0,u))return c}return o(r)}catch(t){throw e.isType(t,i)?(a=t,t):t}finally{n(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.find_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){t:do{var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var u=l.next();if(o(u)){e.setCoroutineResult(u,e.coroutineReceiver());break t}}}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}e.setCoroutineResult(i,e.coroutineReceiver()),e.setCoroutineResult(null,e.coroutineReceiver())}while(0);return e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.findLast_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:null},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o(p)&&(a.v=p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),e.setCoroutineResult(a.v,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.first_4c38lx$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.NoSuchElementException,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();if(s(p))return p}}catch(t){throw e.isType(t,r)?(l=t,t):t}finally{o(t,l)}throw e.setCoroutineResult(i,e.coroutineReceiver()),new n("ReceiveChannel contains no element matching the predicate.")}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.firstOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var u=l.next();if(o(u))return u}}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),null}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.indexOfFirst_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){if(o(u.next()))return a.v;a.v=a.v+1|0}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),-1}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.indexOfLast_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:-1},l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)o(p.next())&&(a.v=l.v),l.v=l.v+1|0}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.last_4c38lx$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.NoSuchElementException,r=Object,o=e.throwCCE,s=Error,a=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,l,u){var p,c={v:null},h={v:!1},d=null;try{var f;for(f=t.iterator();e.suspendCall(f.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var _=f.next();l(_)&&(c.v=_,h.v=!0)}}catch(t){throw e.isType(t,s)?(d=t,t):t}finally{a(t,d)}if(e.setCoroutineResult(i,e.coroutineReceiver()),!h.v)throw new n("ReceiveChannel contains no element matching the predicate.");return null==(p=c.v)||e.isType(p,r)?p:o()}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.lastOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:null},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o(p)&&(a.v=p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.single_4c38lx$",g((function(){var i=e.kotlin.IllegalArgumentException_init_pdl1vj$,n=e.kotlin.Unit,r=e.kotlin.NoSuchElementException,o=Object,s=e.throwCCE,a=Error,l=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,u,p){var c,h={v:null},d={v:!1},f=null;try{var _;for(_=t.iterator();e.suspendCall(_.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var m=_.next();if(u(m)){if(d.v)throw i("ReceiveChannel contains more than one matching element.");h.v=m,d.v=!0}}}catch(t){throw e.isType(t,a)?(f=t,t):t}finally{l(t,f)}if(e.setCoroutineResult(n,e.coroutineReceiver()),!d.v)throw new r("ReceiveChannel contains no element matching the predicate.");return null==(c=h.v)||e.isType(c,o)?c:s()}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.singleOrNull_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:null},l={v:!1},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();if(o(c)){if(l.v)return null;a.v=c,l.v=!0}}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),l.v?a.v:null}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterIndexedTo_4jknp0$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=new n((h=u.v,u.v=h+1|0,h),d),_=f.component1(),m=f.component2();a(_,m)&&s.add_11rb$(m)}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterIndexedTo_170qh7$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=new n((h=u.v,u.v=h+1|0,h),d),_=f.component1(),m=f.component2();a(_,m)&&e.suspendCall(s.send_11rb$(m,e.coroutineReceiver()))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterNotTo_ekipu8$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)||o.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterNotTo_6rlmvt$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)||e.suspendCall(o.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterTo_ekipu8$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)&&o.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.filterTo_6rlmvt$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();s(p)&&e.suspendCall(o.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associate_9m65rd$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=i(),u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=s(p.next());l.put_xwzc9p$(c.first,c.second)}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(l,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateBy_ku6tnm$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a){var l=i(),u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();l.put_xwzc9p$(s(c),c)}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(l,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateBy_lt7yd0$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u=i(),p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h=c.next();u.put_xwzc9p$(s(h),a(h))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(n,e.coroutineReceiver()),e.setCoroutineResult(u,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateByTo_kkd6mf$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o.put_xwzc9p$(s(p),p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateByTo_pjfcwb$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a,l){var u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();o.put_xwzc9p$(s(c),a(c))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.associateTo_lcmuai$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=s(u.next());o.put_xwzc9p$(p.first,p.second)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupBy_ku6tnm$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.collections.ArrayList_init_287e2$,r=e.kotlin.Unit,o=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l){var u=i(),p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=a(d),_=u.get_11rb$(f);if(null==_){var m=n();u.put_xwzc9p$(f,m),h=m}else h=_;h.add_11rb$(d)}}catch(t){throw e.isType(t,o)?(p=t,t):t}finally{s(t,p)}return e.setCoroutineResult(r,e.coroutineReceiver()),e.setCoroutineResult(u,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupBy_lt7yd0$",g((function(){var i=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,n=e.kotlin.collections.ArrayList_init_287e2$,r=e.kotlin.Unit,o=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l,u){var p=i(),c=null;try{var h;for(h=t.iterator();e.suspendCall(h.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var d,f=h.next(),_=a(f),m=p.get_11rb$(_);if(null==m){var $=n();p.put_xwzc9p$(_,$),d=$}else d=m;d.add_11rb$(l(f))}}catch(t){throw e.isType(t,o)?(c=t,t):t}finally{s(t,c)}return e.setCoroutineResult(r,e.coroutineReceiver()),e.setCoroutineResult(p,e.coroutineReceiver()),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupByTo_l6oevu$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next(),d=a(h),f=s.get_11rb$(d);if(null==f){var _=i();s.put_xwzc9p$(d,_),c=_}else c=f;c.add_11rb$(h)}}catch(t){throw e.isType(t,r)?(u=t,t):t}finally{o(t,u)}return e.setCoroutineResult(n,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.groupByTo_z9qy88$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l,u){var p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next(),f=a(d),_=s.get_11rb$(f);if(null==_){var m=i();s.put_xwzc9p$(f,m),h=m}else h=_;h.add_11rb$(l(d))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(n,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedNotNullTo_dz8aer$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d,f=c.next(),_=new n((h=u.v,u.v=h+1|0,h),f);null!=(d=a(_.component1(),_.component2()))&&s.add_11rb$(d)}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedNotNullTo_4m0vhw$",g((function(){var i=e.kotlin.Unit,n=e.kotlin.collections.IndexedValue,r=Error,o=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,s,a,l){var u={v:0},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d,f=c.next(),_=new n((h=u.v,u.v=h+1|0,h),f);null!=(d=a(_.component1(),_.component2()))&&e.suspendCall(s.send_11rb$(d,e.coroutineReceiver()))}}catch(t){throw e.isType(t,r)?(p=t,t):t}finally{o(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),s}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedTo_a7sgbu$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();o.add_11rb$(s((c=l.v,l.v=c+1|0,c),h))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapIndexedTo_whewhd$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:0},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c,h=p.next();e.suspendCall(o.send_11rb$(s((c=l.v,l.v=c+1|0,c),h),e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapNotNullTo_fo1is7$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p;null!=(p=s(u.next()))&&o.add_11rb$(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapNotNullTo_wo1rcg$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p;null!=(p=s(u.next()))&&e.suspendCall(o.send_11rb$(p,e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapTo_pa4xkq$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();o.add_11rb$(s(p))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.mapTo_q9ku9f$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();e.suspendCall(o.send_11rb$(s(p),e.coroutineReceiver()))}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),o}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.all_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(!o(l.next()))return!1}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!0}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.any_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(o(l.next()))return!0}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!1}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.count_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)o(u.next())&&(a.v=a.v+1|0)}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.fold_kq4l36$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:o},u=null;try{var p;for(p=t.iterator();e.suspendCall(p.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var c=p.next();l.v=s(l.v,c)}}catch(t){throw e.isType(t,n)?(u=t,t):t}finally{r(t,u)}return e.setCoroutineResult(i,e.coroutineReceiver()),l.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.foldIndexed_wviyg6$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s,a){var l={v:0},u={v:o},p=null;try{var c;for(c=t.iterator();e.suspendCall(c.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var h,d=c.next();u.v=s((h=l.v,l.v=h+1|0,h),u.v,d)}}catch(t){throw e.isType(t,n)?(p=t,t):t}finally{r(t,p)}return e.setCoroutineResult(i,e.coroutineReceiver()),u.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.maxBy_mqfd03$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,o){var s=null;try{var a=t.iterator();if(e.suspendCall(a.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))return null;for(var l=a.next(),u=r(l);e.suspendCall(a.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=a.next(),c=r(p);e.compareTo(u,c)<0&&(l=p,u=c)}return l}catch(t){throw e.isType(t,i)?(s=t,t):t}finally{n(t,s)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.minBy_mqfd03$",g((function(){var i=Error,n=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,r,o){var s=null;try{var a=t.iterator();if(e.suspendCall(a.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))return null;for(var l=a.next(),u=r(l);e.suspendCall(a.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=a.next(),c=r(p);e.compareTo(u,c)>0&&(l=p,u=c)}return l}catch(t){throw e.isType(t,i)?(s=t,t):t}finally{n(t,s)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.none_4c38lx$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l;for(l=t.iterator();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)if(o(l.next()))return!1}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}return e.setCoroutineResult(i,e.coroutineReceiver()),!0}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.reduce_vk3vfd$",g((function(){var i=e.kotlin.UnsupportedOperationException_init_pdl1vj$,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l=t.iterator();if(e.suspendCall(l.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))throw i("Empty channel can't be reduced.");for(var u=l.next();e.suspendCall(l.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)u=o(u,l.next());return u}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.reduceIndexed_a6mkxp$",g((function(){var i=e.kotlin.UnsupportedOperationException_init_pdl1vj$,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a=null;try{var l,u=t.iterator();if(e.suspendCall(u.hasNext(e.coroutineReceiver())),!e.coroutineResult(e.coroutineReceiver()))throw i("Empty channel can't be reduced.");for(var p=1,c=u.next();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());)c=o((p=(l=p)+1|0,l),c,u.next());return c}catch(t){throw e.isType(t,n)?(a=t,t):t}finally{r(t,a)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.sumBy_fl2dz0$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();a.v=a.v+o(p)|0}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.sumByDouble_jy8qhg$",g((function(){var i=e.kotlin.Unit,n=Error,r=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,o,s){var a={v:0},l=null;try{var u;for(u=t.iterator();e.suspendCall(u.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var p=u.next();a.v+=o(p)}}catch(t){throw e.isType(t,n)?(l=t,t):t}finally{r(t,l)}return e.setCoroutineResult(i,e.coroutineReceiver()),a.v}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.channels.partition_4c38lx$",g((function(){var i=e.kotlin.collections.ArrayList_init_287e2$,n=e.kotlin.Unit,r=e.kotlin.Pair,o=Error,s=t.kotlinx.coroutines.channels.cancelConsumed_v57n85$;return function(t,a,l){var u=i(),p=i(),c=null;try{var h;for(h=t.iterator();e.suspendCall(h.hasNext(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver());){var d=h.next();a(d)?u.add_11rb$(d):p.add_11rb$(d)}}catch(t){throw e.isType(t,o)?(c=t,t):t}finally{s(t,c)}return e.setCoroutineResult(n,e.coroutineReceiver()),new r(u,p)}}))),Object.defineProperty($n.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isBufferEmpty",{configurable:!0,get:function(){return this.value_0===An().EMPTY_0}}),Object.defineProperty($n.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isBufferFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty($n.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmptyImpl_0}}),yn.$metadata$={kind:k,simpleName:"Companion",interfaces:[]};var vn,gn,bn,xn,wn,zn,kn,Sn,Cn,Nn,En,Tn,Pn,On,Mn,jn=null;function An(){return null===jn&&new yn,jn}function In(){Mi.call(this)}function Rn(){}function Ln(){Mi.call(this)}function Dn(){}function qn(){this.elements_0=e.newArray(16,null),this.head_0=0,this.tail_0=0}function Fn(){}function Bn(){Fn.call(this),this._consensus_c6dvpx$_0=vn}function Un(){this.atomicOp_ss7ttb$_0=this.atomicOp_ss7ttb$_0}function Vn(t,i){var n;Kn.call(this,0),this.dispatcher=t,this.continuation=i,this._state_8be2vx$=bn,this.callerFrame_w1cgfa$_0=e.isType(n=this.continuation,ko)?n:null,this.countOrElement_8be2vx$=(this.context,0),this._reusableCancellableContinuation_0=null}function Gn(t,i){if(e.isType(t,Vn)){var n=jt(i);if(t.dispatcher.isDispatchNeeded_1fupul$(t.context))t._state_8be2vx$=n,t.resumeMode=1,t.dispatcher.dispatch_5bn72i$(t.context,t);else{var r=_e().eventLoop_8be2vx$;if(r.isUnconfinedLoopActive)t._state_8be2vx$=n,t.resumeMode=1,r.dispatchUnconfined_4avnfa$(t);else{r.incrementUseCount_6taknv$(!0);try{var o;t:do{var s=t.context.get_j3r2sn$(ve.Key);if(null!=s&&!s.isActive){var a=s.getCancellationException();t.resumeWith_tl1gpc$(new f(S(a))),o=!0;break t}o=!1}while(0);for(o||(t.context,t.continuation.resumeWith_tl1gpc$(i));r.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{r.decrementUseCount_6taknv$(!0)}}}}else t.resumeWith_tl1gpc$(i)}function Hn(t){var i;t:do{var n,r=_e().eventLoop_8be2vx$;if(r.isUnconfinedQueueEmpty){i=!1;break t}if(r.isUnconfinedLoopActive)t._state_8be2vx$=p,t.resumeMode=1,r.dispatchUnconfined_4avnfa$(t),n=!0;else{r.incrementUseCount_6taknv$(!0);try{for(t.run();r.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{r.decrementUseCount_6taknv$(!0)}n=!1}i=n}while(0);return i}function Wn(t){return 1===t}function Xn(t){return 0===t||1===t}function Kn(t){uo.call(this),this.resumeMode=t}function Yn(t,i){var n=t.delegate;if(Xn(i)&&e.isType(n,Vn)&&Wn(i)===Wn(t.resumeMode)){var r=n.dispatcher,o=n.context;r.isDispatchNeeded_1fupul$(o)?r.dispatch_5bn72i$(o,t):function(t){var i=_e().eventLoop_8be2vx$;if(i.isUnconfinedLoopActive)i.dispatchUnconfined_4avnfa$(t);else{i.incrementUseCount_6taknv$(!0);try{for(Zn(t,t.delegate,2);i.processUnconfinedEvent(););}catch(i){if(!e.isType(i,w))throw i;t.handleFatalException_mseuzz$(i,null)}finally{i.decrementUseCount_6taknv$(!0)}}}(t)}else Zn(t,n,i)}function Zn(t,i,n){var r,s,a=t.takeState(),l=null!=(r=t.getExceptionalResult_8ea4ql$(a))?xo(r):null,u=new f(null!=l?S(l):t.getSuccessfulResult_tpy1pm$(a));switch(n){case 0:i.resumeWith_tl1gpc$(u);break;case 1:Gn(i,u);break;case 2:var p=e.isType(s=i,Vn)?s:o();p.context,p.continuation.resumeWith_tl1gpc$(u);break;default:throw b(("Invalid mode "+n).toString())}}function Jn(t){void 0===t&&(t=null),this.holder_0=t}function Qn(t,e){at.call(this,t,!0),this.uCont=e}function tr(t){this.symbol=t}function er(t,i,n,r){return void 0===n&&(n=1),void 0===r&&(r=2147483647),ir(0,e.Long.fromInt(i),e.Long.fromInt(n),e.Long.fromInt(r)).toInt()}function ir(t,e,i,n){return void 0===i&&(i=I),void 0===n&&(n=L),e}function nr(t,i){try{Gn(h(et(t,i)),new f(p))}catch(t){if(!e.isType(t,w))throw t;i.resumeWith_tl1gpc$(new f(S(t)))}}function rr(t,i,n){try{Gn(h(m(t,i,n)),new f(p))}catch(t){if(!e.isType(t,w))throw t;n.resumeWith_tl1gpc$(new f(S(t)))}}function or(t,i){try{Gn(h(t),new f(p))}catch(t){if(!e.isType(t,w))throw t;i.resumeWith_tl1gpc$(new f(S(t)))}}function sr(t,i){t:do{var n,s,a=i;try{n=t(a,!1)}catch(t){if(e.isType(t,w)){var u=t;a.resumeWith_tl1gpc$(new f(S(u)));break t}throw t}if(n!==l){var p=null==(s=n)||e.isType(s,r)?s:o();a.resumeWith_tl1gpc$(new f(p))}}while(0)}function ar(t,i,n){t:do{var s,a,u=n;try{s=t(i,u,!1)}catch(t){if(e.isType(t,w)){var p=t;u.resumeWith_tl1gpc$(new f(S(p)));break t}throw t}if(s!==l){var c=null==(a=s)||e.isType(a,r)?a:o();u.resumeWith_tl1gpc$(new f(c))}}while(0)}function lr(t,i){t:do{var n,s,a=i;try{i.context,n=t(a,!1)}catch(t){if(e.isType(t,w)){var u=t;a.resumeWith_tl1gpc$(new f(S(u)));break t}throw t}if(n!==l){var p=null==(s=n)||e.isType(s,r)?s:o();a.resumeWith_tl1gpc$(new f(p))}}while(0)}function ur(t,i,n){t:do{var s,a,u=n;try{n.context,s=t(i,u,!1)}catch(t){if(e.isType(t,w)){var p=t;u.resumeWith_tl1gpc$(new f(S(p)));break t}throw t}if(s!==l){var c=null==(a=s)||e.isType(a,r)?a:o();u.resumeWith_tl1gpc$(new f(c))}}while(0)}function pr(t,i,n){var r;t.initParentJob_8be2vx$();t:do{var o;try{o=n(i,t,!1)}catch(t){if(!e.isType(t,w))throw t;o=new Rt(t)}var s=o;if(s===l){r=l;break t}var a=t.makeCompletingOnce_8ea4ql$(s);if(a===Ee){r=l;break t}if(e.isType(a,Rt))throw xo(a.cause,t.uCont);r=Ge(a)}while(0);return r}function cr(t){this.closure$block=t}function hr(){}function dr(){}function fr(){}function _r(){}function mr(){}function $r(){this.number_0=I}function yr(t){bo.call(this),this.uCont_0=t,this._state_0=zn,this._result_0=Sn,this._parentHandle_0=null}function vr(t,e){this.$outer=t,ni.call(this,e)}function gr(t){Fn.call(this),this.otherOp=t}function br(t,e){Bn.call(this),this.impl=t,this.desc=e,this.opSequence_oe6pw4$_0=Nn.next(),this.desc.atomicOp=this}function xr(t){mo.call(this),this.handle=t}function wr(t){this.instance=new yr(t),this.clauses=Q()}function zr(t){this.locked=t}function kr(){mo.call(this)}function Sr(){}function Cr(t,e){y(typeof t,"function")?t(e):t.invoke(e)}function Nr(){if(y(typeof navigator,Pn)||null==navigator||"ReactNative"!=navigator.product){if(function(){var t=!y(typeof navigator,Pn)&&null!=navigator&&null!=navigator.userAgent;t&&(t=!y(typeof navigator.userAgent,Pn));var e=t;return e&&(e=!y(typeof navigator.userAgent.match,Pn)),e&&navigator.userAgent.match("\\bjsdom\\b")}())return Qr();var t=!y(typeof window,Pn)&&null!=window;return t&&(t=!y(typeof window.addEventListener,Pn)),t?co(window):y(typeof n,Pn)?io():Qr()}return Qr()}function Er(){var t;return e.isType(t=Dr().Default,pe)?t:o()}function Tr(t,e){var i=t.coroutineContext.plus_1fupul$(e);return i!==Dr().Default&&null==i.get_j3r2sn$($.Key)?i.plus_1fupul$(Dr().Default):i}function Pr(t){return t.toString()}function Or(t){return null}function Mr(t,e){console.error(e)}function jr(t){var e,i=t.__debug_counter;return"number"!=typeof i&&(i=On=On+1|0,t.__debug_counter=i),("number"==typeof(e=i)?e:o()).toString()}function Ar(t){var i;return null!=(i=e.getKClassFromExpression(t).simpleName)?i:"Unknown"}function Ir(){Lr=this,this.Default=Nr(),this.Main=new qr(this.Default),this.Unconfined=hi()}$n.prototype.offerInternal_11rb$=function(t){var i={v:null};t:do{var n,r;if(null!=(n=this.closedForSend_0))return n;if(this.value_0===An().EMPTY_0)for(;null!=(r=this.takeFirstReceiveOrPeekClosed());){if(i.v=r,e.isType(i.v,Wi))return q(i.v);if(null!=q(i.v).tryResumeReceive_j43gjz$(t,null))break t}return this.value_0=t,_i}while(0);return q(i.v).completeResumeReceive_11rb$(t),q(i.v).offerResult},$n.prototype.offerSelectInternal_ys5ufj$=function(t,i){var n={v:null};t:do{var r;if(null!=(r=this.closedForSend_0))return r;if(this.value_0===An().EMPTY_0)e:for(;;){var o=this.describeTryOffer_0(t),s=i.performAtomicTrySelect_6q0pxr$(o);if(null==s){n.v=o.result;break t}if(s===mi)break e;if(s!==gn){if(s===kn||e.isType(s,Wi))return s;throw b(("performAtomicTrySelect(describeTryOffer) returned "+z(s)).toString())}}return i.trySelect()?(this.value_0=t,_i):kn}while(0);return q(n.v).completeResumeReceive_11rb$(t),q(n.v).offerResult},$n.prototype.pollInternal=function(){var t,e={v:null};return this.value_0===An().EMPTY_0?null!=(t=this.closedForSend_0)?t:$i:(e.v=this.value_0,this.value_0=An().EMPTY_0,e.v)},$n.prototype.pollSelectInternal_y5yyj0$=function(t){var e,i={v:null};return this.value_0===An().EMPTY_0?null!=(e=this.closedForSend_0)?e:$i:t.trySelect()?(i.v=this.value_0,this.value_0=An().EMPTY_0,i.v):kn},$n.prototype.onCancelIdempotent_6taknv$=function(t){t&&(this.value_0=An().EMPTY_0),Mi.prototype.onCancelIdempotent_6taknv$.call(this,t)},$n.prototype.enqueueReceiveInternal_i292ax$=function(t){return Mi.prototype.enqueueReceiveInternal_i292ax$.call(this,t)},Object.defineProperty($n.prototype,"bufferDebugString",{configurable:!0,get:function(){return"(value="+z(this.value_0)+")"}}),$n.$metadata$={kind:s,simpleName:"ConflatedChannel",interfaces:[Mi]},Object.defineProperty(In.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(In.prototype,"isBufferEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(In.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!1}}),Object.defineProperty(In.prototype,"isBufferFull",{configurable:!0,get:function(){return!1}}),In.prototype.offerInternal_11rb$=function(t){for(;;){var i=Mi.prototype.offerInternal_11rb$.call(this,t);if(i===_i)return _i;if(i!==mi){if(e.isType(i,Wi))return i;throw b(("Invalid offerInternal result "+i.toString()).toString())}var n=this.sendBuffered_0(t);if(null==n)return _i;if(e.isType(n,Wi))return n}},In.prototype.offerSelectInternal_ys5ufj$=function(t,i){for(var n;;){var r=this.hasReceiveOrClosed_0?Mi.prototype.offerSelectInternal_ys5ufj$.call(this,t,i):null!=(n=i.performAtomicTrySelect_6q0pxr$(this.describeSendBuffered_0(t)))?n:_i;if(r===kn)return kn;if(r===_i)return _i;if(r!==mi&&r!==gn){if(e.isType(r,Wi))return r;throw b(("Invalid result "+r.toString()).toString())}}},In.$metadata$={kind:s,simpleName:"LinkedListChannel",interfaces:[Mi]},Object.defineProperty(Ln.prototype,"isBufferAlwaysEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferEmpty",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferAlwaysFull",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Ln.prototype,"isBufferFull",{configurable:!0,get:function(){return!0}}),Ln.$metadata$={kind:s,simpleName:"RendezvousChannel",interfaces:[Mi]},Dn.$metadata$={kind:x,simpleName:"FlowCollector",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collectWhile_rysrwq$",g((function(){var i=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,n=e.kotlin.coroutines.CoroutineImpl,r=t.kotlinx.coroutines.flow.internal.AbortFlowException,o=e.Kind.CLASS,s=t.kotlinx.coroutines.flow.FlowCollector,a=t.kotlinx.coroutines.flow.internal.checkOwnership_ygf9h9$;function l(t){this.closure$predicate=t}function u(t,e,i){n.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$value=e}return u.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[n]},u.prototype=Object.create(n.prototype),u.prototype.constructor=u,u.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.closure$predicate(this.local$value,this),this.result_0===i)return i;continue;case 1:throw this.exception_0;case 2:if(!this.result_0)throw new r(this.$this);return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},l.prototype.emit_11rb$=function(t,e,i){var n=new u(this,t,e);return i?n:n.doResume(null)},l.$metadata$={kind:o,interfaces:[s]},function(t,i,n){var o=new l(i);try{e.suspendCall(t.collect_42ocv1$(o,e.coroutineReceiver()))}catch(t){if(!e.isType(t,r))throw t;a(t,o)}}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collect_706ovd$",g((function(){var i=e.Kind.CLASS,n=t.kotlinx.coroutines.flow.FlowCollector;function r(t){this.closure$action=t}return r.prototype.emit_11rb$=function(t,e){return this.closure$action(t,e)},r.$metadata$={kind:i,interfaces:[n]},function(t,i,n){return e.suspendCall(t.collect_42ocv1$(new r(i),e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.collectIndexed_57beod$",g((function(){var i=e.Kind.CLASS,n=t.kotlinx.coroutines.flow.FlowCollector,r=e.kotlin.ArithmeticException;function o(t){this.closure$action=t,this.index_0=0}return o.prototype.emit_11rb$=function(t,e){var i,n;n=this.closure$action;var o=(i=this.index_0,this.index_0=i+1|0,i);if(o<0)throw new r("Index overflow has happened");return n(o,t,e)},o.$metadata$={kind:i,interfaces:[n]},function(t,i,n){return e.suspendCall(t.collect_42ocv1$(new o(i),e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.emitAll_c14n1u$",(function(t,i,n){return e.suspendCall(i.collect_42ocv1$(t,e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())})),v("kotlinx-coroutines-core.kotlinx.coroutines.flow.fold_usjyvu$",g((function(){var i=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,n=e.kotlin.coroutines.CoroutineImpl,r=e.kotlin.Unit,o=e.Kind.CLASS,s=t.kotlinx.coroutines.flow.FlowCollector;function a(t){this.closure$action=t}function l(t,e,i,r){n.call(this,r),this.exceptionState_0=1,this.local$closure$operation=t,this.local$closure$accumulator=e,this.local$value=i}return a.prototype.emit_11rb$=function(t,e){return this.closure$action(t,e)},a.$metadata$={kind:o,interfaces:[s]},l.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[n]},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$operation(this.local$closure$accumulator.v,this.local$value,this),this.result_0===i)return i;continue;case 1:throw this.exception_0;case 2:return this.local$closure$accumulator.v=this.result_0,r;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},function(t,i,n,r){var o,s,u={v:i};return e.suspendCall(t.collect_42ocv1$(new a((o=n,s=u,function(t,e,i){var n=new l(o,s,t,e);return i?n:n.doResume(null)})),e.coroutineReceiver())),u.v}}))),Object.defineProperty(qn.prototype,"isEmpty",{configurable:!0,get:function(){return this.head_0===this.tail_0}}),qn.prototype.addLast_trkh7z$=function(t){this.elements_0[this.tail_0]=t,this.tail_0=this.tail_0+1&this.elements_0.length-1,this.tail_0===this.head_0&&this.ensureCapacity_0()},qn.prototype.removeFirstOrNull=function(){var t;if(this.head_0===this.tail_0)return null;var i=this.elements_0[this.head_0];return this.elements_0[this.head_0]=null,this.head_0=this.head_0+1&this.elements_0.length-1,e.isType(t=i,r)?t:o()},qn.prototype.clear=function(){this.head_0=0,this.tail_0=0,this.elements_0=e.newArray(this.elements_0.length,null)},qn.prototype.ensureCapacity_0=function(){var t=this.elements_0.length,i=t<<1,n=e.newArray(i,null),r=this.elements_0;tt(r,n,0,this.head_0,r.length),tt(this.elements_0,n,this.elements_0.length-this.head_0|0,0,this.head_0),this.elements_0=n,this.head_0=0,this.tail_0=t},qn.$metadata$={kind:s,simpleName:"ArrayQueue",interfaces:[]},Fn.prototype.toString=function(){return Ar(this)+"@"+jr(this)},Fn.prototype.isEarlierThan_bfmzsr$=function(t){var e,i;if(null==(e=this.atomicOp))return!1;var n=e;if(null==(i=t.atomicOp))return!1;var r=i;return n.opSequence.compareTo_11rb$(r.opSequence)<0},Fn.$metadata$={kind:s,simpleName:"OpDescriptor",interfaces:[]},Object.defineProperty(Bn.prototype,"isDecided",{configurable:!0,get:function(){return this._consensus_c6dvpx$_0!==vn}}),Object.defineProperty(Bn.prototype,"opSequence",{configurable:!0,get:function(){return R}}),Object.defineProperty(Bn.prototype,"atomicOp",{configurable:!0,get:function(){return this}}),Bn.prototype.decide_s8jyv4$=function(t){var e,i=this._consensus_c6dvpx$_0;return i!==vn?i:(e=this)._consensus_c6dvpx$_0===vn&&(e._consensus_c6dvpx$_0=t,1)?t:this._consensus_c6dvpx$_0},Bn.prototype.perform_s8jyv4$=function(t){var i,n,s=this._consensus_c6dvpx$_0;return s===vn&&(s=this.decide_s8jyv4$(this.prepare_11rb$(null==(i=t)||e.isType(i,r)?i:o()))),this.complete_19pj23$(null==(n=t)||e.isType(n,r)?n:o(),s),s},Bn.$metadata$={kind:s,simpleName:"AtomicOp",interfaces:[Fn]},Object.defineProperty(Un.prototype,"atomicOp",{configurable:!0,get:function(){return null==this.atomicOp_ss7ttb$_0?c("atomicOp"):this.atomicOp_ss7ttb$_0},set:function(t){this.atomicOp_ss7ttb$_0=t}}),Un.$metadata$={kind:s,simpleName:"AtomicDesc",interfaces:[]},Object.defineProperty(Vn.prototype,"callerFrame",{configurable:!0,get:function(){return this.callerFrame_w1cgfa$_0}}),Vn.prototype.getStackTraceElement=function(){return null},Object.defineProperty(Vn.prototype,"reusableCancellableContinuation",{configurable:!0,get:function(){var t;return e.isType(t=this._reusableCancellableContinuation_0,bt)?t:null}}),Vn.prototype.isReusable_pmw987$=function(t){var i;if(null==(i=this._reusableCancellableContinuation_0))return!1;var n=i;return!e.isType(n,bt)||n===t},Vn.prototype.claimReusableCancellableContinuation=function(){var t;for(this._reusableCancellableContinuation_0;;){var i,n=this._reusableCancellableContinuation_0;if(null===n)return this._reusableCancellableContinuation_0=xn,null;if(!e.isType(n,bt))throw b(("Inconsistent state "+z(n)).toString());if((t=this)._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=xn,1))return e.isType(i=n,bt)?i:o()}},Vn.prototype.checkPostponedCancellation_jp3215$=function(t){var i;for(this._reusableCancellableContinuation_0;;){var n=this._reusableCancellableContinuation_0;if(n!==xn){if(null===n)return null;if(e.isType(n,w)){if(!function(t){return t._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=null,!0)}(this))throw F("Failed requirement.".toString());return n}throw b(("Inconsistent state "+z(n)).toString())}if((i=this)._reusableCancellableContinuation_0===xn&&(i._reusableCancellableContinuation_0=t,1))return null}},Vn.prototype.postponeCancellation_tcv7n7$=function(t){var i;for(this._reusableCancellableContinuation_0;;){var n=this._reusableCancellableContinuation_0;if(y(n,xn)){if((i=this)._reusableCancellableContinuation_0===xn&&(i._reusableCancellableContinuation_0=t,1))return!0}else{if(e.isType(n,w))return!0;if(function(t){return t._reusableCancellableContinuation_0===n&&(t._reusableCancellableContinuation_0=null,!0)}(this))return!1}}},Vn.prototype.takeState=function(){var t=this._state_8be2vx$;return this._state_8be2vx$=bn,t},Object.defineProperty(Vn.prototype,"delegate",{configurable:!0,get:function(){return this}}),Vn.prototype.resumeWith_tl1gpc$=function(t){var i=this.continuation.context,n=jt(t);if(this.dispatcher.isDispatchNeeded_1fupul$(i))this._state_8be2vx$=n,this.resumeMode=0,this.dispatcher.dispatch_5bn72i$(i,this);else{var r=_e().eventLoop_8be2vx$;if(r.isUnconfinedLoopActive)this._state_8be2vx$=n,this.resumeMode=0,r.dispatchUnconfined_4avnfa$(this);else{r.incrementUseCount_6taknv$(!0);try{for(this.context,this.continuation.resumeWith_tl1gpc$(t);r.processUnconfinedEvent(););}catch(t){if(!e.isType(t,w))throw t;this.handleFatalException_mseuzz$(t,null)}finally{r.decrementUseCount_6taknv$(!0)}}}},Vn.prototype.resumeCancellableWith_tl1gpc$=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeCancellableWith_tl1gpc$",g((function(){var i=t.kotlinx.coroutines.toState_dwruuz$,n=e.kotlin.Unit,r=e.wrapFunction,o=Error,s=t.kotlinx.coroutines.Job,a=e.kotlin.Result,l=e.kotlin.createFailure_tcv7n7$;return r((function(){var i=t.kotlinx.coroutines.Job,r=e.kotlin.Result,o=e.kotlin.createFailure_tcv7n7$;return function(t,e){return function(){var s,a=t;t:do{var l=a.context.get_j3r2sn$(i.Key);if(null!=l&&!l.isActive){var u=l.getCancellationException();a.resumeWith_tl1gpc$(new r(o(u))),s=!0;break t}s=!1}while(0);if(!s){var p=t,c=e;p.context,p.continuation.resumeWith_tl1gpc$(c)}return n}}})),function(t){var n=i(t);if(this.dispatcher.isDispatchNeeded_1fupul$(this.context))this._state_8be2vx$=n,this.resumeMode=1,this.dispatcher.dispatch_5bn72i$(this.context,this);else{var r=_e().eventLoop_8be2vx$;if(r.isUnconfinedLoopActive)this._state_8be2vx$=n,this.resumeMode=1,r.dispatchUnconfined_4avnfa$(this);else{r.incrementUseCount_6taknv$(!0);try{var u;t:do{var p=this.context.get_j3r2sn$(s.Key);if(null!=p&&!p.isActive){var c=p.getCancellationException();this.resumeWith_tl1gpc$(new a(l(c))),u=!0;break t}u=!1}while(0);for(u||(this.context,this.continuation.resumeWith_tl1gpc$(t));r.processUnconfinedEvent(););}catch(t){if(!e.isType(t,o))throw t;this.handleFatalException_mseuzz$(t,null)}finally{r.decrementUseCount_6taknv$(!0)}}}}}))),Vn.prototype.resumeCancelled=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeCancelled",g((function(){var i=t.kotlinx.coroutines.Job,n=e.kotlin.Result,r=e.kotlin.createFailure_tcv7n7$;return function(){var t=this.context.get_j3r2sn$(i.Key);if(null!=t&&!t.isActive){var e=t.getCancellationException();return this.resumeWith_tl1gpc$(new n(r(e))),!0}return!1}}))),Vn.prototype.resumeUndispatchedWith_tl1gpc$=v("kotlinx-coroutines-core.kotlinx.coroutines.DispatchedContinuation.resumeUndispatchedWith_tl1gpc$",(function(t){this.context,this.continuation.resumeWith_tl1gpc$(t)})),Vn.prototype.dispatchYield_6v298r$=function(t,e){this._state_8be2vx$=e,this.resumeMode=1,this.dispatcher.dispatchYield_5bn72i$(t,this)},Vn.prototype.toString=function(){return"DispatchedContinuation["+this.dispatcher+", "+Pr(this.continuation)+"]"},Object.defineProperty(Vn.prototype,"context",{get:function(){return this.continuation.context}}),Vn.$metadata$={kind:s,simpleName:"DispatchedContinuation",interfaces:[a,ko,Kn]},Kn.prototype.cancelResult_83a7kv$=function(t,e){},Kn.prototype.getSuccessfulResult_tpy1pm$=function(t){var i;return null==(i=t)||e.isType(i,r)?i:o()},Kn.prototype.getExceptionalResult_8ea4ql$=function(t){var i,n;return null!=(n=e.isType(i=t,Rt)?i:null)?n.cause:null},Kn.prototype.run=function(){var t,i=null;try{var n=(e.isType(t=this.delegate,Vn)?t:o()).continuation,r=n.context,s=this.takeState(),a=this.getExceptionalResult_8ea4ql$(s),l=Wn(this.resumeMode)?r.get_j3r2sn$(xe()):null;if(null!=a||null==l||l.isActive)if(null!=a)n.resumeWith_tl1gpc$(new f(S(a)));else{var u=this.getSuccessfulResult_tpy1pm$(s);n.resumeWith_tl1gpc$(new f(u))}else{var c=l.getCancellationException();this.cancelResult_83a7kv$(s,c),n.resumeWith_tl1gpc$(new f(S(xo(c))))}}catch(t){if(!e.isType(t,w))throw t;i=t}finally{var h;try{h=new f(p)}catch(t){if(!e.isType(t,w))throw t;h=new f(S(t))}var d=h;this.handleFatalException_mseuzz$(i,d.exceptionOrNull())}},Kn.prototype.handleFatalException_mseuzz$=function(t,e){if(null!==t||null!==e){var i=new ye("Fatal exception in coroutines machinery for "+this+". Please read KDoc to 'handleFatalException' method and report this incident to maintainers",q(null!=t?t:e));Vt(this.delegate.context,i)}},Kn.$metadata$={kind:s,simpleName:"DispatchedTask",interfaces:[uo]},Jn.prototype.plus_11rb$=function(t){var i,n,s,a;if(null==(i=this.holder_0))a=new Jn(t);else if(e.isType(i,G))(e.isType(n=this.holder_0,G)?n:o()).add_11rb$(t),a=new Jn(this.holder_0);else{var l=d(4);l.add_11rb$(null==(s=this.holder_0)||e.isType(s,r)?s:o()),l.add_11rb$(t),a=new Jn(l)}return a},Jn.prototype.forEachReversed_qlkmfe$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.InlineList.forEachReversed_qlkmfe$",g((function(){var t=Object,i=e.throwCCE,n=e.kotlin.collections.ArrayList;return function(r){var o,s,a;if(null!=(o=this.holder_0))if(e.isType(o,n))for(var l=e.isType(a=this.holder_0,n)?a:i(),u=l.size-1|0;u>=0;u--)r(l.get_za3lpa$(u));else r(null==(s=this.holder_0)||e.isType(s,t)?s:i())}}))),Jn.$metadata$={kind:s,simpleName:"InlineList",interfaces:[]},Jn.prototype.unbox=function(){return this.holder_0},Jn.prototype.toString=function(){return"InlineList(holder="+e.toString(this.holder_0)+")"},Jn.prototype.hashCode=function(){var t=0;return t=31*t+e.hashCode(this.holder_0)|0},Jn.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.holder_0,t.holder_0)},Object.defineProperty(Qn.prototype,"callerFrame",{configurable:!0,get:function(){var t;return null==(t=this.uCont)||e.isType(t,ko)?t:o()}}),Qn.prototype.getStackTraceElement=function(){return null},Object.defineProperty(Qn.prototype,"isScopedCoroutine",{configurable:!0,get:function(){return!0}}),Object.defineProperty(Qn.prototype,"parent_8be2vx$",{configurable:!0,get:function(){return this.parentContext.get_j3r2sn$(xe())}}),Qn.prototype.afterCompletion_s8jyv4$=function(t){Gn(h(this.uCont),It(t,this.uCont))},Qn.prototype.afterResume_s8jyv4$=function(t){this.uCont.resumeWith_tl1gpc$(It(t,this.uCont))},Qn.$metadata$={kind:s,simpleName:"ScopeCoroutine",interfaces:[ko,at]},tr.prototype.toString=function(){return this.symbol},tr.prototype.unbox_tpy1pm$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.Symbol.unbox_tpy1pm$",g((function(){var t=Object,i=e.throwCCE;return function(n){var r;return n===this?null:null==(r=n)||e.isType(r,t)?r:i()}}))),tr.$metadata$={kind:s,simpleName:"Symbol",interfaces:[]},cr.prototype.run=function(){this.closure$block()},cr.$metadata$={kind:s,interfaces:[lo]},hr.prototype.invoke_en0wgx$=function(t,e){this.invoke_ha2bmj$(t,null,e)},hr.$metadata$={kind:x,simpleName:"SelectBuilder",interfaces:[]},dr.$metadata$={kind:x,simpleName:"SelectClause0",interfaces:[]},fr.$metadata$={kind:x,simpleName:"SelectClause1",interfaces:[]},_r.$metadata$={kind:x,simpleName:"SelectClause2",interfaces:[]},mr.$metadata$={kind:x,simpleName:"SelectInstance",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.select_wd2ujs$",g((function(){var i=t.kotlinx.coroutines.selects.SelectBuilderImpl,n=Error;return function(t,r){var o;return e.suspendCall((o=t,function(t){var r=new i(t);try{o(r)}catch(t){if(!e.isType(t,n))throw t;r.handleBuilderException_tcv7n7$(t)}return r.getResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),$r.prototype.next=function(){return(t=this).number_0=t.number_0.inc();var t},$r.$metadata$={kind:s,simpleName:"SeqNumber",interfaces:[]},Object.defineProperty(yr.prototype,"callerFrame",{configurable:!0,get:function(){var t;return e.isType(t=this.uCont_0,ko)?t:null}}),yr.prototype.getStackTraceElement=function(){return null},Object.defineProperty(yr.prototype,"parentHandle_0",{configurable:!0,get:function(){return this._parentHandle_0},set:function(t){this._parentHandle_0=t}}),Object.defineProperty(yr.prototype,"context",{configurable:!0,get:function(){return this.uCont_0.context}}),Object.defineProperty(yr.prototype,"completion",{configurable:!0,get:function(){return this}}),yr.prototype.doResume_0=function(t,e){var i;for(this._result_0;;){var n=this._result_0;if(n===Sn){var r=t();if((i=this)._result_0===Sn&&(i._result_0=r,1))return}else{if(n!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this))return void e()}}},yr.prototype.resumeWith_tl1gpc$=function(t){t:do{for(this._result_0;;){var e=this._result_0;if(e===Sn){var i=jt(t);if((r=this)._result_0===Sn&&(r._result_0=i,1))break t}else{if(e!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this)){if(t.isFailure){var n=this.uCont_0;n.resumeWith_tl1gpc$(new f(S(xo(q(t.exceptionOrNull())))))}else this.uCont_0.resumeWith_tl1gpc$(t);break t}}}}while(0);var r},yr.prototype.resumeSelectWithException_tcv7n7$=function(t){t:do{for(this._result_0;;){var e=this._result_0;if(e===Sn){var i=new Rt(xo(t,this.uCont_0));if((n=this)._result_0===Sn&&(n._result_0=i,1))break t}else{if(e!==l)throw b("Already resumed");if(function(t){return t._result_0===l&&(t._result_0=Cn,!0)}(this)){h(this.uCont_0).resumeWith_tl1gpc$(new f(S(t)));break t}}}}while(0);var n},yr.prototype.getResult=function(){this.isSelected||this.initCancellability_0();var t,i=this._result_0;if(i===Sn){if((t=this)._result_0===Sn&&(t._result_0=l,1))return l;i=this._result_0}if(i===Cn)throw b("Already resumed");if(e.isType(i,Rt))throw i.cause;return i},yr.prototype.initCancellability_0=function(){var t;if(null!=(t=this.context.get_j3r2sn$(xe()))){var e=t,i=e.invokeOnCompletion_ct2b2z$(!0,void 0,new vr(this,e));this.parentHandle_0=i,this.isSelected&&i.dispose()}},vr.prototype.invoke=function(t){this.$outer.trySelect()&&this.$outer.resumeSelectWithException_tcv7n7$(this.job.getCancellationException())},vr.prototype.toString=function(){return"SelectOnCancelling["+this.$outer+"]"},vr.$metadata$={kind:s,simpleName:"SelectOnCancelling",interfaces:[ni]},yr.prototype.handleBuilderException_tcv7n7$=function(t){if(this.trySelect())this.resumeWith_tl1gpc$(new f(S(t)));else if(!e.isType(t,Gr)){var i=this.getResult();e.isType(i,Rt)&&i.cause===t||Vt(this.context,t)}},Object.defineProperty(yr.prototype,"isSelected",{configurable:!0,get:function(){for(this._state_0;;){var t=this._state_0;if(t===zn)return!1;if(!e.isType(t,Fn))return!0;t.perform_s8jyv4$(this)}}}),yr.prototype.disposeOnSelect_rvfg84$=function(t){var e=new xr(t);(this.isSelected||(this.addLast_l2j9rm$(e),this.isSelected))&&t.dispose()},yr.prototype.doAfterSelect_0=function(){var t;null!=(t=this.parentHandle_0)&&t.dispose();for(var i=this._next;!y(i,this);)e.isType(i,xr)&&i.handle.dispose(),i=i._next},yr.prototype.trySelect=function(){var t,e=this.trySelectOther_uc1cc4$(null);if(e===i)t=!0;else{if(null!=e)throw b(("Unexpected trySelectIdempotent result "+z(e)).toString());t=!1}return t},yr.prototype.trySelectOther_uc1cc4$=function(t){var n;for(this._state_0;;){var r=this._state_0;t:do{if(r===zn){if(null==t){if((n=this)._state_0!==zn||(n._state_0=null,0))break t}else{var o=new gr(t);if(!function(t){return t._state_0===zn&&(t._state_0=o,!0)}(this))break t;var s=o.perform_s8jyv4$(this);if(null!==s)return s}return this.doAfterSelect_0(),i}if(!e.isType(r,Fn))return null==t?null:r===t.desc?i:null;if(null!=t){var a=t.atomicOp;if(e.isType(a,br)&&a.impl===this)throw b("Cannot use matching select clauses on the same object".toString());if(a.isEarlierThan_bfmzsr$(r))return gn}r.perform_s8jyv4$(this)}while(0)}},gr.prototype.perform_s8jyv4$=function(t){var i,n=e.isType(i=t,yr)?i:o();this.otherOp.finishPrepare();var r,s=this.otherOp.atomicOp.decide_s8jyv4$(null),a=null==s?this.otherOp.desc:zn;return r=this,n._state_0===r&&(n._state_0=a),s},Object.defineProperty(gr.prototype,"atomicOp",{configurable:!0,get:function(){return this.otherOp.atomicOp}}),gr.$metadata$={kind:s,simpleName:"PairSelectOp",interfaces:[Fn]},yr.prototype.performAtomicTrySelect_6q0pxr$=function(t){return new br(this,t).perform_s8jyv4$(null)},yr.prototype.toString=function(){return"SelectInstance(state="+z(this._state_0)+", result="+z(this._result_0)+")"},Object.defineProperty(br.prototype,"opSequence",{configurable:!0,get:function(){return this.opSequence_oe6pw4$_0}}),br.prototype.prepare_11rb$=function(t){var i;if(null==t&&null!=(i=this.prepareSelectOp_0()))return i;try{return this.desc.prepare_4uxf5b$(this)}catch(i){throw e.isType(i,w)?(null==t&&this.undoPrepare_0(),i):i}},br.prototype.complete_19pj23$=function(t,e){this.completeSelect_0(e),this.desc.complete_ayrq83$(this,e)},br.prototype.prepareSelectOp_0=function(){var t;for(this.impl._state_0;;){var i=this.impl._state_0;if(i===this)return null;if(e.isType(i,Fn))i.perform_s8jyv4$(this.impl);else{if(i!==zn)return kn;if((t=this).impl._state_0===zn&&(t.impl._state_0=t,1))return null}}},br.prototype.undoPrepare_0=function(){var t;(t=this).impl._state_0===t&&(t.impl._state_0=zn)},br.prototype.completeSelect_0=function(t){var e,i=null==t,n=i?null:zn;(e=this).impl._state_0===e&&(e.impl._state_0=n,1)&&i&&this.impl.doAfterSelect_0()},br.prototype.toString=function(){return"AtomicSelectOp(sequence="+this.opSequence.toString()+")"},br.$metadata$={kind:s,simpleName:"AtomicSelectOp",interfaces:[Bn]},yr.prototype.invoke_nd4vgy$=function(t,e){t.registerSelectClause0_s9h9qd$(this,e)},yr.prototype.invoke_veq140$=function(t,e){t.registerSelectClause1_o3xas4$(this,e)},yr.prototype.invoke_ha2bmj$=function(t,e,i){t.registerSelectClause2_rol3se$(this,e,i)},yr.prototype.onTimeout_7xvrws$=function(t,e){if(t.compareTo_11rb$(R)<=0)this.trySelect()&&sr(e,this.completion);else{var i,n,r=new cr((i=this,n=e,function(){return i.trySelect()&&nr(n,i.completion),p}));this.disposeOnSelect_rvfg84$(ce(this.context).invokeOnTimeout_8irseu$(t,r))}},xr.$metadata$={kind:s,simpleName:"DisposeNode",interfaces:[mo]},yr.$metadata$={kind:s,simpleName:"SelectBuilderImpl",interfaces:[ko,a,mr,hr,bo]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.selectUnbiased_wd2ujs$",g((function(){var i=t.kotlinx.coroutines.selects.UnbiasedSelectBuilderImpl,n=Error;return function(t,r){var o;return e.suspendCall((o=t,function(t){var r=new i(t);try{o(r)}catch(t){if(!e.isType(t,n))throw t;r.handleBuilderException_tcv7n7$(t)}return r.initSelectResult()})(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver())}}))),wr.prototype.handleBuilderException_tcv7n7$=function(t){this.instance.handleBuilderException_tcv7n7$(t)},wr.prototype.initSelectResult=function(){if(!this.instance.isSelected)try{var t;for(it(this.clauses),t=this.clauses.iterator();t.hasNext();)t.next()()}catch(t){if(!e.isType(t,w))throw t;this.instance.handleBuilderException_tcv7n7$(t)}return this.instance.getResult()},wr.prototype.invoke_nd4vgy$=function(t,e){var i,n,r;this.clauses.add_11rb$((i=this,n=e,r=t,function(){return r.registerSelectClause0_s9h9qd$(i.instance,n),p}))},wr.prototype.invoke_veq140$=function(t,e){var i,n,r;this.clauses.add_11rb$((i=this,n=e,r=t,function(){return r.registerSelectClause1_o3xas4$(i.instance,n),p}))},wr.prototype.invoke_ha2bmj$=function(t,e,i){var n,r,o,s;this.clauses.add_11rb$((n=this,r=e,o=i,s=t,function(){return s.registerSelectClause2_rol3se$(n.instance,r,o),p}))},wr.prototype.onTimeout_7xvrws$=function(t,e){var i,n,r;this.clauses.add_11rb$((i=this,n=t,r=e,function(){return i.instance.onTimeout_7xvrws$(n,r),p}))},wr.$metadata$={kind:s,simpleName:"UnbiasedSelectBuilderImpl",interfaces:[hr]},v("kotlinx-coroutines-core.kotlinx.coroutines.selects.whileSelect_vmyjlh$",g((function(){var i=t.kotlinx.coroutines.selects.SelectBuilderImpl,n=Error;function r(t){return function(r){var o=new i(r);try{t(o)}catch(t){if(!e.isType(t,n))throw t;o.handleBuilderException_tcv7n7$(t)}return o.getResult()}}return function(t,i){for(;e.suspendCall(r(t)(e.coroutineReceiver())),e.coroutineResult(e.coroutineReceiver()););}}))),v("kotlinx-coroutines-core.kotlinx.coroutines.sync.withLock_8701tb$",(function(t,i,n,r){void 0===i&&(i=null),e.suspendCall(t.lock_s8jyv4$(i,e.coroutineReceiver()));try{return n()}finally{t.unlock_s8jyv4$(i)}})),zr.prototype.toString=function(){return"Empty["+this.locked.toString()+"]"},zr.$metadata$={kind:s,simpleName:"Empty",interfaces:[]},v("kotlinx-coroutines-core.kotlinx.coroutines.sync.withPermit_103m5a$",(function(t,i,n){e.suspendCall(t.acquire(e.coroutineReceiver()));try{return i()}finally{t.release()}})),kr.$metadata$={kind:s,simpleName:"CompletionHandlerBase",interfaces:[mo]},Sr.$metadata$={kind:s,simpleName:"CancelHandlerBase",interfaces:[]},Ir.$metadata$={kind:k,simpleName:"Dispatchers",interfaces:[]};var Rr,Lr=null;function Dr(){return null===Lr&&new Ir,Lr}function qr(t){ai.call(this),this.delegate=t}function Fr(){return new Br}function Br(){he.call(this)}function Ur(){he.call(this)}function Vr(){throw X("runBlocking event loop is not supported")}function Gr(t,e){U.call(this,t,e),this.name="CancellationException"}function Hr(t,e){return e=e||Object.create(Gr.prototype),Gr.call(e,t,null),e}function Wr(t,e,i){Gr.call(this,t,e),this.job_8be2vx$=i,this.name="JobCancellationException"}function Xr(t){return rt(t,R,Rr).toInt()}function Kr(){Dt.call(this),this.messageQueue_8be2vx$=new Yr(this)}function Yr(t){var e;this.$outer=t,ao.call(this),this.processQueue_8be2vx$=(e=this,function(){return e.process(),p})}function Zr(){Jr=this,Kr.call(this)}Object.defineProperty(qr.prototype,"immediate",{configurable:!0,get:function(){throw X("Immediate dispatching is not supported on JS")}}),qr.prototype.dispatch_5bn72i$=function(t,e){this.delegate.dispatch_5bn72i$(t,e)},qr.prototype.isDispatchNeeded_1fupul$=function(t){return this.delegate.isDispatchNeeded_1fupul$(t)},qr.prototype.dispatchYield_5bn72i$=function(t,e){this.delegate.dispatchYield_5bn72i$(t,e)},qr.prototype.toString=function(){var t;return null!=(t=this.toStringInternalImpl())?t:this.delegate.toString()},qr.$metadata$={kind:s,simpleName:"JsMainDispatcher",interfaces:[ai]},Br.prototype.dispatch_5bn72i$=function(t,e){Vr()},Br.$metadata$={kind:s,simpleName:"UnconfinedEventLoop",interfaces:[he]},Ur.prototype.unpark_0=function(){Vr()},Ur.prototype.reschedule_0=function(t,e){Vr()},Ur.$metadata$={kind:s,simpleName:"EventLoopImplPlatform",interfaces:[he]},Gr.$metadata$={kind:s,simpleName:"CancellationException",interfaces:[U]},Wr.prototype.toString=function(){return Gr.prototype.toString.call(this)+"; job="+this.job_8be2vx$},Wr.prototype.equals=function(t){return t===this||e.isType(t,Wr)&&y(t.message,this.message)&&y(t.job_8be2vx$,this.job_8be2vx$)&&y(t.cause,this.cause)},Wr.prototype.hashCode=function(){var t,e;return(31*((31*J(q(this.message))|0)+J(this.job_8be2vx$)|0)|0)+(null!=(e=null!=(t=this.cause)?J(t):null)?e:0)|0},Wr.$metadata$={kind:s,simpleName:"JobCancellationException",interfaces:[Gr]},Yr.prototype.schedule=function(){this.$outer.scheduleQueueProcessing()},Yr.prototype.reschedule=function(){setTimeout(this.processQueue_8be2vx$,0)},Yr.$metadata$={kind:s,simpleName:"ScheduledMessageQueue",interfaces:[ao]},Kr.prototype.dispatch_5bn72i$=function(t,e){this.messageQueue_8be2vx$.enqueue_771g0p$(e)},Kr.prototype.invokeOnTimeout_8irseu$=function(t,e){var i;return new no(setTimeout((i=e,function(){return i.run(),p}),Xr(t)))},Kr.prototype.scheduleResumeAfterDelay_egqmvs$=function(t,e){var i,n,r=setTimeout((i=e,n=this,function(){return i.resumeUndispatched_hyuxa3$(n,p),p}),Xr(t));e.invokeOnCancellation_f05bi3$(new no(r))},Kr.$metadata$={kind:s,simpleName:"SetTimeoutBasedDispatcher",interfaces:[pe,Dt]},Zr.prototype.scheduleQueueProcessing=function(){n.nextTick(this.messageQueue_8be2vx$.processQueue_8be2vx$)},Zr.$metadata$={kind:k,simpleName:"NodeDispatcher",interfaces:[Kr]};var Jr=null;function Qr(){return null===Jr&&new Zr,Jr}function to(){eo=this,Kr.call(this)}to.prototype.scheduleQueueProcessing=function(){setTimeout(this.messageQueue_8be2vx$.processQueue_8be2vx$,0)},to.$metadata$={kind:k,simpleName:"SetTimeoutDispatcher",interfaces:[Kr]};var eo=null;function io(){return null===eo&&new to,eo}function no(t){St.call(this),this.handle_0=t}function ro(t){Dt.call(this),this.window_0=t,this.queue_0=new so(this.window_0)}function oo(t,e){this.this$WindowDispatcher=t,this.closure$handle=e}function so(t){var e;ao.call(this),this.window_0=t,this.messageName_0="dispatchCoroutine",this.window_0.addEventListener("message",(e=this,function(t){return t.source==e.window_0&&t.data==e.messageName_0&&(t.stopPropagation(),e.process()),p}),!0)}function ao(){qn.call(this),this.yieldEvery=16,this.scheduled_0=!1}function lo(){}function uo(){}function po(t){}function co(t){var e,i;if(null!=(e=t.coroutineDispatcher))i=e;else{var n=new ro(t);t.coroutineDispatcher=n,i=n}return i}function ho(t){Hr("Flow was aborted, no more elements needed",this),this.owner=t,this.name="AbortFlowException"}function fo(){}function _o(t){return ot(t)}function mo(){this._next=this,this._prev=this,this._removed=!1}function $o(t,e){vo.call(this),this.queue=t,this.node=e}function yo(t){vo.call(this),this.queue=t,this.affectedNode_rjf1fm$_0=this.queue._next}function vo(){Un.call(this)}function go(t,e,i){Fn.call(this),this.affected=t,this.desc=e,this.atomicOp_khy6pf$_0=i}function bo(){mo.call(this)}function xo(t,e){return t}function wo(t){return t}function zo(t){return t}function ko(){}function So(t,e){}function Co(t){return null}function No(t){return 0}function Eo(){this.value_0=null}no.prototype.dispose=function(){clearTimeout(this.handle_0)},no.prototype.invoke=function(t){this.dispose()},no.prototype.toString=function(){return"ClearTimeout["+this.handle_0+"]"},no.$metadata$={kind:s,simpleName:"ClearTimeout",interfaces:[we,St]},ro.prototype.dispatch_5bn72i$=function(t,e){this.queue_0.enqueue_771g0p$(e)},ro.prototype.scheduleResumeAfterDelay_egqmvs$=function(t,e){var i,n;this.window_0.setTimeout((i=e,n=this,function(){return i.resumeUndispatched_hyuxa3$(n,p),p}),Xr(t))},oo.prototype.dispose=function(){this.this$WindowDispatcher.window_0.clearTimeout(this.closure$handle)},oo.$metadata$={kind:s,interfaces:[we]},ro.prototype.invokeOnTimeout_8irseu$=function(t,e){var i;return new oo(this,this.window_0.setTimeout((i=e,function(){return i.run(),p}),Xr(t)))},ro.$metadata$={kind:s,simpleName:"WindowDispatcher",interfaces:[pe,Dt]},so.prototype.schedule=function(){var t;Promise.resolve(p).then((t=this,function(e){return t.process(),p}))},so.prototype.reschedule=function(){this.window_0.postMessage(this.messageName_0,"*")},so.$metadata$={kind:s,simpleName:"WindowMessageQueue",interfaces:[ao]},ao.prototype.enqueue_771g0p$=function(t){this.addLast_trkh7z$(t),this.scheduled_0||(this.scheduled_0=!0,this.schedule())},ao.prototype.process=function(){try{for(var t=this.yieldEvery,e=0;e<t;e++){var i;if(null==(i=this.removeFirstOrNull()))return;i.run()}}finally{this.isEmpty?this.scheduled_0=!1:this.reschedule()}},ao.$metadata$={kind:s,simpleName:"MessageQueue",interfaces:[qn]},lo.$metadata$={kind:x,simpleName:"Runnable",interfaces:[]},uo.$metadata$={kind:s,simpleName:"SchedulerTask",interfaces:[lo]},ho.$metadata$={kind:s,simpleName:"AbortFlowException",interfaces:[Gr]},fo.prototype.tryLock=function(){return!0},fo.prototype.unlock=function(){},fo.$metadata$={kind:s,simpleName:"NoOpLock",interfaces:[]},Object.defineProperty(mo.prototype,"nextNode",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_nextNode",(function(){return this._next}))}),Object.defineProperty(mo.prototype,"prevNode",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_prevNode",(function(){return this._prev}))}),Object.defineProperty(mo.prototype,"isRemoved",{configurable:!0,get:v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.get_isRemoved",(function(){return this._removed}))}),mo.prototype.addLast_l2j9rm$=function(t){var e=this._prev;t._next=this,t._prev=e,e._next=t,this._prev=t},mo.prototype.remove=function(){if(this._removed)return!1;var t=this._prev,e=this._next;return t._next=e,e._prev=t,this._removed=!0,!0},mo.prototype.addOneIfEmpty_l2j9rm$=function(t){return this._next===this&&(this.addLast_l2j9rm$(t),!0)},mo.prototype.addLastIf_w327v9$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIf_w327v9$",(function(t,e){return!!e()&&(this.addLast_l2j9rm$(t),!0)})),mo.prototype.addLastIfPrev_s8xlln$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIfPrev_s8xlln$",(function(t,e){return!!e(this._prev)&&(this.addLast_l2j9rm$(t),!0)})),mo.prototype.addLastIfPrevAndIf_dzcug$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.addLastIfPrevAndIf_dzcug$",(function(t,e,i){return!!e(this._prev)&&!!i()&&(this.addLast_l2j9rm$(t),!0)})),mo.prototype.helpRemove=function(){},mo.prototype.removeFirstOrNull=function(){var t=this._next;if(t===this)return null;if(!t.remove())throw b("Should remove".toString());return t},mo.prototype.removeFirstIfIsInstanceOfOrPeekIf_14urrv$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListNode.removeFirstIfIsInstanceOfOrPeekIf_14urrv$",g((function(){var t=e.kotlin.IllegalStateException_init_pdl1vj$;return function(e,i,n){var r=this._next;if(r===this)return null;if(!i(r))return null;if(n(r))return r;if(!r.remove())throw t("Should remove".toString());return r}}))),mo.$metadata$={kind:s,simpleName:"LinkedListNode",interfaces:[]},Object.defineProperty($o.prototype,"affectedNode",{configurable:!0,get:function(){return this.queue._prev}}),$o.prototype.finishPrepare_xe32vn$=function(t){},$o.prototype.onComplete=function(){this.queue.addLast_l2j9rm$(this.node)},$o.prototype.finishOnSuccess_bpl3tg$=function(t,e){},$o.$metadata$={kind:s,simpleName:"AddLastDesc",interfaces:[vo]},Object.defineProperty(yo.prototype,"result",{configurable:!0,get:function(){var t;return null==(t=this.affectedNode)||e.isType(t,r)?t:o()}}),Object.defineProperty(yo.prototype,"affectedNode",{configurable:!0,get:function(){return this.affectedNode_rjf1fm$_0}}),yo.prototype.finishPrepare_xe32vn$=function(t){},yo.prototype.onComplete=function(){this.queue.removeFirstOrNull()},yo.prototype.finishOnSuccess_bpl3tg$=function(t,e){},yo.$metadata$={kind:s,simpleName:"RemoveFirstDesc",interfaces:[vo]},vo.prototype.onPrepare_xe32vn$=function(t){return this.finishPrepare_xe32vn$(t),null},vo.prototype.prepare_4uxf5b$=function(t){var e=this.affectedNode,i=this.failure_l2j9rm$(e);return null!=i?i:this.onPrepare_xe32vn$(new go(e,this,t))},vo.prototype.complete_ayrq83$=function(t,e){this.onComplete()},vo.prototype.failure_l2j9rm$=function(t){return null},vo.prototype.retry_ru8hrx$=function(t,e){return!1},vo.$metadata$={kind:s,simpleName:"AbstractAtomicDesc",interfaces:[Un]},Object.defineProperty(go.prototype,"atomicOp",{get:function(){return this.atomicOp_khy6pf$_0}}),go.prototype.perform_s8jyv4$=function(t){return null},go.prototype.finishPrepare=function(){},go.$metadata$={kind:s,simpleName:"PrepareOp",interfaces:[Fn]},Object.defineProperty(bo.prototype,"isEmpty",{configurable:!0,get:function(){return this._next===this}}),bo.prototype.forEach_jgwmnf$=v("kotlinx-coroutines-core.kotlinx.coroutines.internal.LinkedListHead.forEach_jgwmnf$",g((function(){var t=e.equals;return function(e,i,n){for(var r=this._next;!t(r,this);)i(r)&&n(r),r=r._next}}))),bo.prototype.remove=function(){throw st()},bo.$metadata$={kind:s,simpleName:"LinkedListHead",interfaces:[mo]},v("kotlinx-coroutines-core.kotlinx.coroutines.internal.recoverAndThrow_8o0b5c$",(function(t,e){throw t})),ko.$metadata$={kind:x,simpleName:"CoroutineStackFrame",interfaces:[]},Eo.prototype.get=function(){var t;return null==(t=this.value_0)||e.isType(t,r)?t:o()},Eo.prototype.set_11rb$=function(t){this.value_0=t},Eo.$metadata$={kind:s,simpleName:"CommonThreadLocal",interfaces:[]};var To=t.kotlinx||(t.kotlinx={}),Po=To.coroutines||(To.coroutines={});Po.AbstractCoroutine=at,Po.launch_s496o7$=function(t,e,i,n){void 0===e&&(e=_.EmptyCoroutineContext),void 0===i&&(i=ne());var r=Tr(t,e),o=i.isLazy?new ht(r,n):new ct(r,!0);return o.start_b5ul0p$(i,o,n),o},Po.async_pda6u4$=function(t,e,i,n){void 0===e&&(e=_.EmptyCoroutineContext),void 0===i&&(i=ne());var r=Tr(t,e),o=i.isLazy?new pt(r,n):new lt(r,!0);return o.start_b5ul0p$(i,o,n),o},Po.withContext_i5cbzn$=function(t,e,i){return(n=t,r=e,function(t){var e=t.context,i=e.plus_1fupul$(n);if(wi(i),i===e){var o=new Qn(i,t);return pr(o,o,r)}if(y(i.get_j3r2sn$($.Key),e.get_j3r2sn$($.Key))){var s=new dt(i,t);return pr(s,s,r)}var a=new ft(i,t);return a.initParentJob_8be2vx$(),rr(r,a,a),a.getResult()})(i);var n,r},Po.CancellableContinuation=_t,Po.getOrCreateCancellableContinuation_3j0xf1$=mt,Po.removeOnCancellation_1u31dd$=$t,Po.disposeOnCancellation_xredcy$=yt,Po.CancellableContinuationImpl=bt,Po.NotCompleted=xt,Po.CancelHandler=St,Po.CompletableDeferred=Tt,Po.CompletableDeferred_xptg6w$=function(t){return void 0===t&&(t=null),new Pt(t)},Po.CompletableJob=Mt,Po.toState_dwruuz$=jt,Po.toState_bd49bs$=At,Po.recoverResult_nnrdi1$=It,Po.CompletedExceptionally=Rt,Po.CancelledContinuation=Lt,Object.defineProperty(Dt,"Key",{get:Ut}),Po.CoroutineDispatcher=Dt,Po.handleCoroutineException_1ur55u$=Vt,Po.handlerException_l3aqr5$=Gt,Po.CoroutineExceptionHandler=Ht,Object.defineProperty(Ht,"Key",{get:Qt}),Po.CoroutineScope=te,Object.defineProperty(ee,"DEFAULT",{get:ne}),Object.defineProperty(ee,"LAZY",{get:re}),Object.defineProperty(ee,"ATOMIC",{get:oe}),Object.defineProperty(ee,"UNDISPATCHED",{get:se}),Po.CoroutineStart=ee,Po.CopyableThrowable=ae,Po.Deferred=le,Po.Delay=pe,Po.delay_s8cxhz$=function(t,e){var i;if(!(t.toNumber()<=0))return ue((i=t,function(t){return ce(t.context).scheduleResumeAfterDelay_egqmvs$(i,t),p}))(e)},Po.get_delay_tcgsej$=ce,Po.EventLoop=he,Object.defineProperty(Po,"ThreadLocalEventLoop",{get:_e}),Po.EventLoopImplBase=me,Po.CompletionHandlerException=$e,Po.CoroutinesInternalError=ye,Object.defineProperty(ve,"Key",{get:xe}),Po.Job=ve,Po.Job_5dx9e$=function(t){return void 0===t&&(t=null),new We(t)},Po.DisposableHandle=we,Po.ChildJob=ze,Po.ParentJob=ke,Po.ChildHandle=Se,Object.defineProperty(Po,"NonDisposableHandle",{get:Ie}),Po.JobSupport=Re,Po.boxIncomplete_ntq51o$=Ve,Po.unboxState_ntq51o$=Ge,Po.JobImpl=We,Po.Incomplete=Xe,Po.JobNode=Ke,Po.NodeList=Ye,Po.InactiveNodeList=Ze,Po.JobCancellingNode=ni,Po.ChildHandleNode=oi,Po.ChildContinuation=si,Po.MainCoroutineDispatcher=ai,Po.TimeoutCancellationException=ui,Object.defineProperty(Po,"Unconfined",{get:hi}),Object.defineProperty(di,"Key",{get:bi}),Po.YieldContext=di,Po.yield=xi,Po.checkCompletion_tcgsej$=wi,ki.SendBuffered=Oi;var Oo=Po.channels||(Po.channels={});Oo.AbstractSendChannel=ki,Oo.AbstractChannel=Mi,Oo.Send=Vi,Oo.ReceiveOrClosed=Gi,Oo.SendElement=Hi,Oo.Closed=Wi,Oo.Receive=Xi,Oo.ArrayChannel=Ki,Oo.BroadcastChannel=Zi,Oo.SendChannel=Ji,Oo.ReceiveChannel=Qi,tn.Closed=en,Object.defineProperty(tn,"Companion",{get:on}),Oo.ValueOrClosed=tn,Oo.ChannelIterator=sn,Object.defineProperty(ln,"Factory",{get:hn}),Oo.Channel=ln,Oo.Channel_ww73n8$=function(t){switch(void 0===t&&(t=0),t){case 0:return new Ln;case 2147483647:return new In;case-1:return new $n;case-2:return new Ki(hn().CHANNEL_DEFAULT_CAPACITY_8be2vx$);default:return new Ki(t)}},Oo.ClosedSendChannelException=dn,Oo.ClosedReceiveChannelException=fn,Oo.ChannelCoroutine=_n,Oo.cancelConsumed_v57n85$=function(t,i){var n,r,o;n=null!=i?null!=(o=e.isType(r=i,Gr)?r:null)?o:new Gr("Channel was consumed, consumer had failed",i):null,t.cancel_m4sck1$(n)},Oo.ConflatedBroadcastChannel=mn,Oo.ConflatedChannel=$n,Oo.LinkedListChannel=In,Oo.ProducerScope=Rn,Oo.RendezvousChannel=Ln;var Mo=Po.flow||(Po.flow={});Mo.FlowCollector=Dn;var jo=Mo.internal||(Mo.internal={});jo.checkOwnership_ygf9h9$=function(t,e){if(t.owner!==e)throw t};var Ao=Po.internal||(Po.internal={});Ao.ArrayQueue=qn,Ao.OpDescriptor=Fn,Ao.AtomicOp=Bn,Ao.AtomicDesc=Un,Po.DispatchedContinuation=Vn,Po.resumeCancellableWith_j7z4j2$=Gn,Po.yieldUndispatched_t90a9u$=Hn,Po.get_isCancellableMode_8e50z4$=Wn,Po.get_isDispatchedMode_8e50z4$=Xn,Po.DispatchedTask=Kn,Po.dispatch_h66hf9$=Yn,Po.resume_yw0jex$=Zn,Ao.recoverStackTrace_ak2v6d$=xo,Ao.InlineList=Jn,Ao.ScopeCoroutine=Qn,Ao.Symbol=tr,Ao.systemProp_vrsuct$=er,Ao.systemProp_ornks8$=ir;var Io=Po.intrinsics||(Po.intrinsics={});Io.startCoroutineCancellable_x18nsh$=nr,Io.startCoroutineCancellable_kew4v3$=rr,Io.startCoroutineCancellable_he7xzw$=or,Io.startCoroutineUnintercepted_81hn2s$=sr,Io.startCoroutineUnintercepted_kew4v3$=ar,Io.startCoroutineUndispatched_81hn2s$=lr,Io.startCoroutineUndispatched_kew4v3$=ur,Io.startUndispatchedOrReturn_nxbeil$=pr;var Ro=Po.selects||(Po.selects={});return Ro.SelectBuilder=hr,Ro.SelectClause0=dr,Ro.SelectClause1=fr,Ro.SelectClause2=_r,Ro.SelectInstance=mr,Ro.SeqNumber=$r,Ro.SelectBuilderImpl=yr,Ro.UnbiasedSelectBuilderImpl=wr,Po.CompletionHandlerBase=kr,Po.CancelHandlerBase=Sr,Po.invokeIt_beznmj$=Cr,Po.createDefaultDispatcher_8be2vx$=Nr,Object.defineProperty(Po,"DefaultDelay_8be2vx$",{get:Er}),Po.newCoroutineContext_7n4184$=Tr,Po.toDebugString_u0ddlz$=Pr,Po.get_coroutineName_tcgsej$=Or,Po.handleCoroutineExceptionImpl_yfv4gr$=Mr,Po.get_hexAddress_8ea4r1$=jr,Po.get_classSimpleName_8ea4r1$=Ar,Object.defineProperty(Po,"Dispatchers",{get:Dr}),Po.createEventLoop_8be2vx$=Fr,Po.UnconfinedEventLoop=Br,Po.EventLoopImplPlatform=Ur,Po.CancellationException_init_pdl1vj$=Hr,Po.CancellationException=Gr,Po.JobCancellationException=Wr,Kr.ScheduledMessageQueue=Yr,Po.SetTimeoutBasedDispatcher=Kr,Object.defineProperty(Po,"NodeDispatcher",{get:Qr}),Object.defineProperty(Po,"SetTimeoutDispatcher",{get:io}),Po.WindowDispatcher=ro,Po.MessageQueue=ao,Po.Runnable=lo,Po.SchedulerTask=uo,Po.get_taskContext_5sfo4y$=po,Po.asCoroutineDispatcher_nz12v2$=co,jo.AbortFlowException=ho,Ao.NoOpLock=fo,Ao.identitySet_46rbr$=_o,Ao.LinkedListNode=mo,Ao.AddLastDesc=$o,Ao.RemoveFirstDesc=yo,Ao.AbstractAtomicDesc=vo,Ao.PrepareOp=go,Ao.LinkedListHead=bo,Ao.recoverStackTrace_87698k$=wo,Ao.unwrap_87698k$=zo,Ao.CoroutineStackFrame=ko,Ao.initCause_oz8fe6$=So,Ao.systemProp_y4putb$=Co,Ao.threadContextElements_v4qu62$=No,Ao.CommonThreadLocal=Eo,ve.prototype.plus_1fupul$=P.prototype.plus_1fupul$,ve.prototype.fold_3cc69b$=P.prototype.fold_3cc69b$,ve.prototype.get_j3r2sn$=P.prototype.get_j3r2sn$,ve.prototype.minusKey_yeqjby$=P.prototype.minusKey_yeqjby$,ze.prototype.cancel=ve.prototype.cancel,ze.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,ze.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,ze.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,ze.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,ze.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,ze.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,ze.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ze.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,ke.prototype.cancel=ve.prototype.cancel,ke.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,ke.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,ke.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,ke.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,ke.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,ke.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,ke.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ke.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Re.prototype.cancel=ve.prototype.cancel,Re.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,Re.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,Re.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,Re.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,Re.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,Re.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Re.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,Re.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,le.prototype.cancel=ve.prototype.cancel,le.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,le.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,le.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,le.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,le.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,le.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,le.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,le.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,bt.prototype.cancel_dbl4no$=_t.prototype.cancel_dbl4no$,bt.prototype.tryResume_19pj23$=_t.prototype.tryResume_19pj23$,Tt.prototype.cancel=le.prototype.cancel,Tt.prototype.plus_dqr1mp$=le.prototype.plus_dqr1mp$,Tt.prototype.plus_1fupul$=le.prototype.plus_1fupul$,Tt.prototype.fold_3cc69b$=le.prototype.fold_3cc69b$,Tt.prototype.get_j3r2sn$=le.prototype.get_j3r2sn$,Tt.prototype.minusKey_yeqjby$=le.prototype.minusKey_yeqjby$,Tt.prototype.cancel_m4sck1$=le.prototype.cancel_m4sck1$,Tt.prototype.cancel_dbl4no$=le.prototype.cancel_dbl4no$,Tt.prototype.invokeOnCompletion_ct2b2z$=le.prototype.invokeOnCompletion_ct2b2z$,Mt.prototype.cancel=ve.prototype.cancel,Mt.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,Mt.prototype.plus_1fupul$=ve.prototype.plus_1fupul$,Mt.prototype.fold_3cc69b$=ve.prototype.fold_3cc69b$,Mt.prototype.get_j3r2sn$=ve.prototype.get_j3r2sn$,Mt.prototype.minusKey_yeqjby$=ve.prototype.minusKey_yeqjby$,Mt.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,Mt.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,Mt.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,Dt.prototype.get_j3r2sn$=$.prototype.get_j3r2sn$,Dt.prototype.minusKey_yeqjby$=$.prototype.minusKey_yeqjby$,Ht.prototype.fold_3cc69b$=P.prototype.fold_3cc69b$,Ht.prototype.get_j3r2sn$=P.prototype.get_j3r2sn$,Ht.prototype.minusKey_yeqjby$=P.prototype.minusKey_yeqjby$,Ht.prototype.plus_1fupul$=P.prototype.plus_1fupul$,me.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,me.prototype.invokeOnTimeout_8irseu$=pe.prototype.invokeOnTimeout_8irseu$,li.prototype.cancel=ve.prototype.cancel,li.prototype.plus_dqr1mp$=ve.prototype.plus_dqr1mp$,li.prototype.invokeOnCompletion_ct2b2z$=ve.prototype.invokeOnCompletion_ct2b2z$,li.prototype.cancel_m4sck1$=ve.prototype.cancel_m4sck1$,li.prototype.cancel_dbl4no$=ve.prototype.cancel_dbl4no$,ki.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,qi.prototype.next0=sn.prototype.next0,ln.prototype.cancel=Qi.prototype.cancel,ln.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,ln.prototype.cancel_m4sck1$=Qi.prototype.cancel_m4sck1$,ln.prototype.cancel_dbl4no$=Qi.prototype.cancel_dbl4no$,Mi.prototype.cancel=ln.prototype.cancel,Mi.prototype.cancel_dbl4no$=ln.prototype.cancel_dbl4no$,Mi.prototype.cancel_m4sck1$=ln.prototype.cancel_m4sck1$,Zi.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,Rn.prototype.close_dbl4no$=Ji.prototype.close_dbl4no$,Yi.prototype.close_dbl4no$=Rn.prototype.close_dbl4no$,_n.prototype.close_dbl4no$=ln.prototype.close_dbl4no$,mn.prototype.close_dbl4no$=Zi.prototype.close_dbl4no$,yr.prototype.invoke_en0wgx$=hr.prototype.invoke_en0wgx$,wr.prototype.invoke_en0wgx$=hr.prototype.invoke_en0wgx$,Kr.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,ro.prototype.delay_s8cxhz$=pe.prototype.delay_s8cxhz$,i=new tr("RESUME_TOKEN"),new tr("REMOVED_TASK"),new tr("CLOSED_EMPTY"),Ne=new tr("COMPLETING_ALREADY"),Ee=new tr("COMPLETING_WAITING_CHILDREN"),Te=new tr("COMPLETING_RETRY"),Pe=new tr("TOO_LATE_TO_CANCEL"),Oe=new tr("SEALED"),Me=new He(!1),je=new He(!0),_i=new tr("OFFER_SUCCESS"),mi=new tr("OFFER_FAILED"),$i=new tr("POLL_FAILED"),yi=new tr("ENQUEUE_FAILED"),vi=new tr("ON_CLOSE_HANDLER_INVOKED"),pn="Channel was closed",new tr("NONE"),new tr("PENDING"),new tr("NULL"),new tr("DONE"),er("kotlinx.coroutines.flow.defaultConcurrency",16,1,2147483647),vn=new tr("NO_DECISION"),gn=new tr("RETRY_ATOMIC"),new tr("CLOSED"),bn=new tr("UNDEFINED"),xn=new tr("REUSABLE_CLAIMED"),wn=new tr("REMOVE_PREPARED"),zn=new tr("NOT_SELECTED"),kn=new tr("ALREADY_SELECTED"),Sn=new tr("UNDECIDED"),Cn=new tr("RESUMED"),Nn=new $r,new tr("LOCK_FAIL"),new tr("ENQUEUE_FAIL"),new tr("UNLOCK_FAIL"),new tr("SELECT_SUCCESS"),En=new tr("LOCKED"),Tn=new tr("UNLOCKED"),new zr(En),new zr(Tn),er("kotlinx.coroutines.semaphore.maxSpinCycles",100),new tr("PERMIT"),new tr("TAKEN"),new tr("BROKEN"),new tr("CANCELLED"),er("kotlinx.coroutines.semaphore.segmentSize",16),Pn="undefined",On=0,Mn=!1,Rr=nt,t})?r.apply(e,o):r)||(t.exports=s)}).call(this,i(3))},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{o=o+(r=r+e[n++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var o=n,s=r+i;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,i){"use strict";var n=i(0),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,e.string2buf=function(t){var e,i,r,o,s,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(l),s=0,o=0;s<l;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,r,o,a=e||t.length,u=new Array(2*a);for(n=0,i=0;i<a;)if((r=t[i++])<128)u[n++]=r;else if((o=s[r])>4)u[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&i<a;)r=r<<6|63&t[i++],o--;o>1?u[n++]=65533:r<65536?u[n++]=r:(r-=65536,u[n++]=55296|r>>10&1023,u[n++]=56320|1023&r)}return l(u,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+s[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){t.exports=i(11)},function(t,e,i){var n,r,o;r=[e,i(1),i(12),i(4)],void 0===(o="function"==typeof(n=function(t,e,i,n){"use strict";var r=t.$$importsForInline$$||(t.$$importsForInline$$={}),o=e.throwUPAE,s=e.kotlin.Unit,a=i.de.fabmax.kool.scene.orbitInputTransform_uj7ww7$,l=i.de.fabmax.kool.util.SimpleShadowMap,u=i.de.fabmax.kool.util.ao.AoPipeline,p=i.de.fabmax.kool.util.ibl,c=i.de.fabmax.kool.util.gltf.GltfFile.ModelGenerateConfig,h=i.de.fabmax.kool.util.gltf.loadGltfModel_aln4ac$,d=e.ensureNotNull,f=e.kotlin.collections.first_7wnvza$,_=e.kotlin.math.abs_za3lpa$,m=i.de.fabmax.kool.util.Color,$=i.de.fabmax.kool.math.Vec3f,y=i.de.fabmax.kool.pipeline.shading.Albedo,v=i.de.fabmax.kool.pipeline.shading.pbrShader_skmpm9$,g=i.de.fabmax.kool.scene.colorMesh_gp9ews$,b=i.de.fabmax.kool.scene.textureMesh_pyaqjj$,x=i.de.fabmax.kool.scene,w=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,z=e.kotlin.coroutines.CoroutineImpl,k=i.de.fabmax.kool.math.scale_2qa7tb$,S=i.de.fabmax.kool.pipeline.shading.ModeledShader.TextureColor,C=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel,N=i.de.fabmax.kool.pipeline.shadermodel.ShaderNode,E=i.de.fabmax.kool.pipeline.shadermodel.ModelVar4f,T=i.de.fabmax.kool.pipeline.shadermodel.ShaderNodeIoVar,P=e.Kind.CLASS,O=e.Kind.OBJECT,M=e.kotlin.collections.ArrayList_init_287e2$,j=Math,A=i.de.fabmax.kool.math,I=e.kotlin.collections.addAll_ipc267$,R=i.de.fabmax.kool.util.RectProps,L=i.de.fabmax.kool.scene.Scene,D=e.kotlin.math.roundToInt_yrwdxr$,q=e.kotlin.math.log_lu1900$,F=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel.VertexStageBuilder,B=i.de.fabmax.kool.pipeline.shadermodel.ShaderModel.FragmentStageBuilder,U=e.Long.fromInt(500),V=n.kotlinx.coroutines.delay_s8cxhz$,G=i.de.fabmax.kool.pipeline.TexFormat,H=i.de.fabmax.kool.pipeline.AddressMode,W=i.de.fabmax.kool.pipeline.TextureProps,X=e.Long.fromInt(100),K=i.de.fabmax.kool.util.atmosphere.OpticalDepthLutPass,Y=i.de.fabmax.kool.util.deferred.DeferredPipelineConfig,Z=i.de.fabmax.kool.util.deferred.DeferredPipeline,J=i.de.fabmax.kool.scene.Group,Q=i.de.fabmax.kool.scene.PerspectiveCamera,tt=e.throwCCE,et=i.de.fabmax.kool.util.deferred.PbrSceneShader,it=i.de.fabmax.kool.util.deferred.PbrSceneShader.DeferredPbrConfig,nt=i.de.fabmax.kool.pipeline.shadermodel.MultiLightNode,rt=i.de.fabmax.kool.pipeline.shadermodel.PbrMaterialNode,ot=e.kotlin.to_ujzrz7$,st=i.de.fabmax.kool.util.ColorGradient,at=i.de.fabmax.kool.pipeline.GradientTexture,lt=i.de.fabmax.kool.pipeline.shadermodel.Texture1dNode,ut=i.de.fabmax.kool.pipeline.shadermodel.ModelVar3f,pt=i.de.fabmax.kool.math.MutableVec3f_init_czzhiu$,ct=i.de.fabmax.kool.scene.ui.zero,ht=i.de.fabmax.kool.scene.ui.pcs_8ca0d4$,dt=i.de.fabmax.kool.scene.ui.full,ft=i.de.fabmax.kool.scene.ui.Alignment,_t=i.de.fabmax.kool.scene.ui.Gravity,mt=i.de.fabmax.kool.toString_lcymw2$,$t=e.numberToInt,yt=i.de.fabmax.kool.math.MutableVec3f,vt=i.de.fabmax.kool.scene.Light,gt=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,bt=i.de.fabmax.kool.util.SphereProps,xt=i.de.fabmax.kool.pipeline.shading.UnlitMaterialConfig,wt=i.de.fabmax.kool.pipeline.shading.UnlitShader,zt=i.de.fabmax.kool.pipeline.ShaderStage,kt=e.kotlin.collections.firstOrNull_2p1efm$,St=(e.wrapFunction,e.equals),Ct=i.de.fabmax.kool.util.atmosphere.RaySphereIntersectionNode,Nt=i.de.fabmax.kool.util.atmosphere.AtmosphereNode,Et=i.de.fabmax.kool.pipeline.UniformMat4f,Tt=i.de.fabmax.kool.math.Vec2f,Pt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar2fConst,Ot=i.de.fabmax.kool.pipeline.shadermodel.ModelVar3fConst,Mt=i.de.fabmax.kool.pipeline.shading.ModeledShader,jt=i.de.fabmax.kool.pipeline.DepthCompareOp,At=i.de.fabmax.kool.pipeline.shadermodel.Texture2dNode,It=i.de.fabmax.kool.math.Mat4d,Rt=i.de.fabmax.kool.math.Vec3d,Lt=i.de.fabmax.kool.math.MutableVec3d_init_czzhiw$,Dt=i.de.fabmax.kool.scene.Scene.DragHandler,qt=i.de.fabmax.kool.pipeline.shading.PbrMaterialConfig,Ft=i.de.fabmax.kool.util.deferred.DeferredPbrShader,Bt=i.de.fabmax.kool.pipeline.shadermodel.UniformBufferMvp,Ut=i.de.fabmax.kool.pipeline.shadermodel.NamedVariableNode,Vt=i.de.fabmax.kool.util.deferred.DeferredPbrShader.MrtMultiplexNode,Gt=i.de.fabmax.kool.pipeline.shadermodel.StageInterfaceNode.OutputNode,Ht=i.de.fabmax.kool.pipeline.shadermodel.PushConstantNode3f,Wt=e.kotlin.math,Xt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1iConst,Kt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1fConst,Yt=i.de.fabmax.kool.math.Vec4f,Zt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar4fConst,Jt=i.de.fabmax.kool.pipeline.shadermodel.ModelVarMat4f,Qt=i.de.fabmax.kool.pipeline.shadermodel.ModelVar2f,te=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1f,ee=i.de.fabmax.kool.pipeline.shadermodel.ModelVar1i,ie=i.de.fabmax.kool.pipeline.Uniform4f,ne=i.de.fabmax.kool.pipeline.UniformColor,re=i.de.fabmax.kool.math.Random,oe=i.de.fabmax.kool.util.ColorGradient_init_5tenyj$,se=i.de.fabmax.kool.math.MutableVec4f_init,ae=i.de.fabmax.kool.scene.PointMesh,le=i.de.fabmax.kool.scene.pointMesh_zhxjay$,ue=i.de.fabmax.kool.math.smoothStep_y2kzbl$,pe=i.de.fabmax.kool.scene.group_2ylazs$,ce=i.de.fabmax.kool.pipeline.OffscreenRenderPass2d,he=i.de.fabmax.kool.pipeline.shading.AlphaModeBlend,de=i.de.fabmax.kool.scene.Skybox.SkyboxPosNode,fe=i.de.fabmax.kool.pipeline.shadermodel.UnlitMaterialNode,_e=i.de.fabmax.kool.pipeline.CullMethod,me=i.de.fabmax.kool.pipeline.shadermodel.PushConstantNode1f,$e=i.de.fabmax.kool.pipeline.Attribute,ye=i.de.fabmax.kool.util.IndexedVertexList_init_5jr6ei$,ve=i.de.fabmax.kool.scene.Mesh,ge=i.de.fabmax.kool.pipeline.FilterMethod,be=i.de.fabmax.kool.scene.PerspectiveCamera.Proxy,xe=i.de.fabmax.kool.pipeline.OffscreenRenderPass.ConfigBuilder,we=i.de.fabmax.kool.pipeline.OffscreenRenderPass.Config,ze=i.de.fabmax.kool.math.Mat4f,ke=i.de.fabmax.kool.pipeline.GlslType,Se=i.de.fabmax.kool.util.MeshInstanceList,Ce=e.kotlin.collections.listOf_i5x0yv$,Ne=i.de.fabmax.kool.util.IndexedVertexList,Ee=i.de.fabmax.kool.util.MutableColor_init_d7aj7k$,Te=e.kotlin.IllegalStateException_init_pdl1vj$,Pe=i.de.fabmax.kool.scene.defaultCamTransform_v4keia$,Oe=i.de.fabmax.kool.util.BoundingBox_init_4lfkt4$,Me=e.kotlin.collections.listOf_mh5how$,je=(i.de.fabmax.kool.util.createUint8Buffer_za3lpa$,e.toByte,i.de.fabmax.kool.pipeline.TextureData2d,i.de.fabmax.kool.pipeline.Texture2d),Ae=e.kotlin.collections.get_lastIndex_55thoc$,Ie=e.kotlin.ranges.until_dqglrj$,Re=i.de.fabmax.kool.util.SimpleShape,Le=i.de.fabmax.kool.util.Profile,De=(e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,e.kotlin.collections.ArrayList_init_ww73n8$,i.de.fabmax.kool.util.MeshBuilder),qe=(e.Kind.INTERFACE,e.kotlin.collections.last_2p1efm$),Fe=i.de.fabmax.kool.util,Be=(e.kotlin.collections.get_indices_tmsbgo$,e.kotlin.ranges.step_xsgg7u$,e.kotlin.collections.reversed_7wnvza$),Ue=e.kotlin.collections.checkIndexOverflow_za3lpa$,Ve=(i.de.fabmax.kool.util.MultiShape,i.de.fabmax.kool.pipeline.BlendMode,i.de.fabmax.kool.pipeline.shadermodel.Texture3dNode,i.de.fabmax.kool.math.Mat3f,i.de.fabmax.kool.pipeline.UniformMat3f,i.de.fabmax.kool.pipeline.Uniform2fv,i.de.fabmax.kool.util.PerfTimer),Ge=i.de.fabmax.kool.toString_j6vyb1$,He=(i.de.fabmax.kool.pipeline.TextureData3d,i.de.fabmax.kool.pipeline.Texture3d,i.de.fabmax.kool.util.Log.Level),We=i.de.fabmax.kool.scene.ui.uiScene_2d22y4$,Xe=i.de.fabmax.kool.scene.ui.dps_8ca0d4$,Ke=e.toString,Ye=i.de.fabmax.kool.util.Font,Ze=i.de.fabmax.kool.util.FontProps,Je=i.de.fabmax.kool.util.uiFont_a4r08d$,Qe=i.de.fabmax.kool.scene.ui.UiTheme,ti=i.de.fabmax.kool.scene.ui.BlankComponentUi,ei=i.de.fabmax.kool.scene.ui.theme_vvurn$,ii=i.de.fabmax.kool.scene.ui.SimpleComponentUi,ni=i.de.fabmax.kool.scene.wireframeMesh_hjnvxh$,ri=i.de.fabmax.kool.util.MutableColor_init,oi=e.kotlin.collections.get_indices_gzk92b$,si=e.kotlin.collections.first_2p1efm$,ai=i.de.fabmax.kool.math.MutableVec3f_init,li=i.de.fabmax.kool.util.CubeProps,ui=i.de.fabmax.kool.util.deferred.DeferredPointLights.PointLight,pi=i.de.fabmax.kool.createDefaultContext,ci=i.de.fabmax.kool.scene.ui.BlurredComponentUi,hi=e.getCallableRef,di=e.defineInlineFunction,fi=i.de.fabmax.kool.util.DebugOverlay.Position,_i=i.de.fabmax.kool.util.DebugOverlay,mi=e.kotlin.collections.mutableMapOf_qfcya0$,$i=e.kotlin.collections.List,yi=e.kotlin.collections.Map,vi=(i.de.fabmax.kool.pipeline.shading.ModeledShader.VertexColor,i.de.fabmax.kool.scene.ui.dp_wl4j30$,i.de.fabmax.kool.scene.ui.uns_8ca0d4$,i.de.fabmax.kool.scene.ui.embeddedUi_4gy91$,i.de.fabmax.kool.pipeline.shading.PbrShader),gi=i.de.fabmax.kool.math.MutableVec2f,bi=i.de.fabmax.kool.util.gltf.loadGltfFile_7e2ead$,xi=i.de.fabmax.kool.util.gltf.GltfFile.ModelMaterialConfig,wi=i.de.fabmax.kool.math.MutableVec3d_init,zi=i.de.fabmax.kool.util.GridProps,ki=i.de.fabmax.kool.scene.OrbitInputTransform.ZoomMethod,Si=i.de.fabmax.kool.math.Vec3f_init_mx4ult$,Ci=i.de.fabmax.kool.math.randomF_dleff0$,Ni=i.de.fabmax.kool.pipeline.shading.PhongShader,Ei=i.de.fabmax.kool.pipeline.shading.PhongShader.PhongConfig,Ti=i.de.fabmax.kool.pipeline.shadermodel.PhongMaterialNode,Pi=i.de.fabmax.kool.util.InstancedLodController.Instance,Oi=i.de.fabmax.kool.util.InstancedLodController,Mi=e.kotlin.collections.mutableListOf_i5x0yv$,ji=i.de.fabmax.kool.scene.LineMesh,Ai=i.de.fabmax.kool.pipeline.shading.ModeledShader.StaticColor,Ii=i.de.fabmax.kool.pipeline.SingleColorTexture,Ri=i.de.fabmax.kool.util.CylinderProps,Li=i.de.fabmax.kool.scene.Skybox.SkyboxCubeShader,Di=Array,qi=i.de.fabmax.kool.pipeline.shadermodel.RefractionSamplerNode,Fi=i.de.fabmax.kool.math.randomI,Bi=i.de.fabmax.kool.modules.mesh.ListEdgeHandler,Ui=i.de.fabmax.kool.modules.mesh.HalfEdgeMesh,Vi=i.de.fabmax.kool.modules.mesh.simplification.terminateOnFaceCountRel_14dthe$,Gi=i.de.fabmax.kool.modules.mesh.simplification.simplify_hem9$,Hi=e.kotlin.text.lastIndexOf_8eortd$,Wi=e.kotlin.text.lastIndexOf_l5u8uk$,Xi=e.kotlin.text.substring_fc3b62$,Ki=i.de.fabmax.kool.util.ibl.SkyCubeIblSystem,Yi=i.de.fabmax.kool.util.CascadedShadowMap,Zi=i.de.fabmax.kool.pipeline.shading.AlphaModeMask,Ji=i.de.fabmax.kool.now,Qi=i.de.fabmax.kool.util.spatial.pointKdTree_ffk80x$,tn=e.kotlin.js.internal.FloatCompanionObject,en=i.de.fabmax.kool.math.Vec3f_init_czzhiu$,nn=i.de.fabmax.kool.util.spatial.InRadiusTraverser,rn=i.de.fabmax.kool.math.PointDistribution,on=i.de.fabmax.kool.math.MutableVec2f_init,sn=i.de.fabmax.kool.math.BSplineVec2f,an=e.kotlin.collections.emptyList_287e2$,ln=e.kotlin.text.split_ip8yn$;function un(){bn(),Fo.call(this,"Ambient Occlusion"),this.autoRotate_0=!0,this.spotLight_0=!0,this.aoPipeline_953qvj$_0=this.aoPipeline_953qvj$_0,this.shadows_0=M()}function pn(t,e,i){return function(n){n.setMouseRotation_dleff0$(0,-20),n.unaryPlus_uv0sim$(t.camera),n.zoom=8;var r=n.onUpdate,o=function(t,e,i){return function(n,r){return t.autoRotate_0&&(i.verticalRotation+=3*e.deltaT),s}}(e,i,n);return r.add_11rb$(o),s}}function cn(t,e,i){return function(n){n.generate_v2sixm$(function(t){return function(e){for(var i=-3;i<=3;i++)for(var n=-3;n<=3;n++){var r=j.atan2(n,i)*A.RAD_2_DEG,o=_(i),a=_(n),l=j.max(o,a)/5;e.color=m.Companion.fromHsv_7b5o5w$(r,l,.75,1).toLinear(),e.transform.push();var u=t;e.translate_y2kzbl$(i,0,n),e.scale_y2kzbl$(.25,.25,.25),e.rotate_ad55pp$(-37.5,$.Companion.Y_AXIS),e.geometry_ejqx55$(u.geometry),e.transform.pop()}return s}}(t));var r=v(function(t,e){return function(i){return i.albedoSource=y.VERTEX_ALBEDO,I(i.shadowMaps,t.shadows_0),i.roughness=.1,i.useScreenSpaceAmbientOcclusion_9cjgzv$(t.aoPipeline_0.aoMap),i.useImageBasedLighting_po417x$(e),s}}(e,i));return n.shader=r,s}}function hn(t,e,i){return function(n){return n.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/brown_planks_03/brown_planks_03_diff_2k.jpg"),n.useOcclusionMap_9sobi5$(zo().pbrBasePath+"/brown_planks_03/brown_planks_03_AO_2k.jpg"),n.useNormalMap_9sobi5$(zo().pbrBasePath+"/brown_planks_03/brown_planks_03_Nor_2k.jpg"),n.useRoughnessMap_ivxn3r$(zo().pbrBasePath+"/brown_planks_03/brown_planks_03_rough_2k.jpg"),n.useScreenSpaceAmbientOcclusion_9cjgzv$(t.aoPipeline_0.aoMap),n.useImageBasedLighting_po417x$(e),I(n.shadowMaps,t.shadows_0),i.onDispose.add_11rb$(function(t){return function(e,i){var n,r,o,a;return null!=(n=t.albedoMap)&&n.dispose(),null!=(r=t.occlusionMap)&&r.dispose(),null!=(o=t.normalMap)&&o.dispose(),null!=(a=t.roughnessMap)&&a.dispose(),s}}(n)),s}}function dn(t,e){return function(i){i.isCastingShadow=!1,i.generate_v2sixm$(function(t){return function(e){e.transform.push();var i=t;e.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var n=new R;n.size.set_dleff0$(12,12),n.origin.set_y2kzbl$(n.size.x,n.size.y,0).scale_mx4ult$(-.5),i.setUvs_0(n,.06,0,.1955*n.size.x,.1955*n.size.y),e.rect_e5k3t5$(n),e.transform.pop(),e.transform.push();var r=t;e.translate_y2kzbl$(0,-.25,0),e.rotate_ad55pp$(90,$.Companion.X_AXIS);var o=new R;o.size.set_dleff0$(12,12),o.origin.set_y2kzbl$(o.size.x,o.size.y,0).scale_mx4ult$(-.5),r.setUvs_0(o,.06,0,.1955*o.size.x,.1955*o.size.y),e.rect_e5k3t5$(o),e.transform.pop(),e.transform.push();var a=t;e.translate_y2kzbl$(-6,-.125,0),e.rotate_ad55pp$(90,$.Companion.NEG_Y_AXIS),e.rotate_ad55pp$(90,$.Companion.Z_AXIS);var l=new R;l.size.set_dleff0$(.25,12),l.origin.set_y2kzbl$(l.size.x,l.size.y,0).scale_mx4ult$(-.5),a.setUvs_0(l,.06-.1955*l.size.x,0,.1955*l.size.x,.1955*l.size.y),e.rect_e5k3t5$(l),e.transform.pop(),e.transform.push();var u=t;e.translate_y2kzbl$(6,-.125,0),e.rotate_ad55pp$(90,$.Companion.Y_AXIS),e.rotate_ad55pp$(-90,$.Companion.Z_AXIS);var p=new R;p.size.set_dleff0$(.25,12),p.origin.set_y2kzbl$(p.size.x,p.size.y,0).scale_mx4ult$(-.5),u.setUvs_0(p,2.406,0,.1955*p.size.x,.1955*p.size.y),e.rect_e5k3t5$(p),e.transform.pop(),e.transform.push();var c=t;e.translate_y2kzbl$(0,-.125,6);var h=new R;h.size.set_dleff0$(12,.25),h.origin.set_y2kzbl$(h.size.x,h.size.y,0).scale_mx4ult$(-.5),c.setUvs_0(h,.06,2.346,.1955*h.size.x,.1955*h.size.y),e.rect_e5k3t5$(h),e.transform.pop(),e.transform.push();var d=t;e.translate_y2kzbl$(0,-.125,-6),e.rotate_ad55pp$(180,$.Companion.X_AXIS);var f=new R;return f.size.set_dleff0$(12,.25),f.origin.set_y2kzbl$(f.size.x,f.size.y,0).scale_mx4ult$(-.5),d.setUvs_0(f,.06,-.048875,.1955*f.size.x,.1955*f.size.y),e.rect_e5k3t5$(f),e.transform.pop(),s}}(t));var n=v(hn(t,e,i));return i.shader=n,s}}function fn(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$AoDemo=e,this.local$envMaps=void 0,this.local$$receiver=i}function _n(t){var e=new $(6,10,-6);return t.setSpot_nve3wz$(e,k(e,-1).norm(),40),t.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.2).toLinear(),500),s}function mn(t,e){return function(i){return i.toggleButton_8v9fdr$("Enabled",t.aoPipeline_0.isEnabled,function(t){return function(e){return t.aoPipeline_0.isEnabled=e.isEnabled,s}}(t)),i.toggleButton_8v9fdr$("Show AO Map",e.isVisible,function(t){return function(e){return t.isVisible=e.isEnabled,s}}(e)),i.sliderWithValue_xbu91d$("Radius:",t.aoPipeline_0.radius,.1,3,2,void 0,function(t){return function(e){return t.aoPipeline_0.radius=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Power:",q(t.aoPipeline_0.power,10),q(.2,10),q(5,10),2,void 0,function(t){return function(e){var i=t.aoPipeline_0,n=e.value;return i.power=j.pow(10,n),s}}(t)),i.sliderWithValue_xbu91d$("Strength:",t.aoPipeline_0.strength,0,5,2,void 0,function(t){return function(e){return t.aoPipeline_0.strength=e.value,s}}(t)),i.sliderWithValue_xbu91d$("AO Samples:",t.aoPipeline_0.kernelSz,4,128,0,void 0,function(t){return function(e){return t.aoPipeline_0.kernelSz=D(e.value),s}}(t)),i.sliderWithValue_xbu91d$("Map Size:",t.aoPipeline_0.mapSize,.1,1,1,void 0,function(t){return function(e){return t.aoPipeline_0.mapSize=D(10*e.value)/10,s}}(t)),s}}function $n(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Spot Light",t.spotLight_0,function(t){return function(e){return t.spotLight_0=e.isEnabled,t.updateLighting_0(),s}}(t)),s}}function yn(){gn=this}function vn(t,e){N.call(this,"red2gray",e),this.inRed=t,this.outGray=new T(new E("outGray"),this)}vn.prototype=Object.create(N.prototype),vn.prototype.constructor=vn,un.prototype=Object.create(Fo.prototype),un.prototype.constructor=un,Cn.prototype=Object.create(N.prototype),Cn.prototype.constructor=Cn,xn.prototype=Object.create(Fo.prototype),xn.prototype.constructor=xn,Vn.prototype=Object.create(N.prototype),Vn.prototype.constructor=Vn,Hn.prototype=Object.create(N.prototype),Hn.prototype.constructor=Hn,qn.prototype=Object.create(Mt.prototype),qn.prototype.constructor=qn,Kn.prototype=Object.create(J.prototype),Kn.prototype.constructor=Kn,tr.prototype=Object.create(N.prototype),tr.prototype.constructor=tr,Yn.prototype=Object.create(Ft.prototype),Yn.prototype.constructor=Yn,er.prototype=Object.create(N.prototype),er.prototype.constructor=er,ir.prototype=Object.create(N.prototype),ir.prototype.constructor=ir,nr.prototype=Object.create(N.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(N.prototype),rr.prototype.constructor=rr,fr.prototype=Object.create(wt.prototype),fr.prototype.constructor=fr,vr.prototype=Object.create(ve.prototype),vr.prototype.constructor=vr,or.prototype=Object.create(ce.prototype),or.prototype.constructor=or,xr.prototype=Object.create(ve.prototype),xr.prototype.constructor=xr,Vr.prototype=Object.create(J.prototype),Vr.prototype.constructor=Vr,ao.prototype=Object.create(Mt.prototype),ao.prototype.constructor=ao,Kr.prototype=Object.create(Fo.prototype),Kr.prototype.constructor=Kr,Bo.prototype=Object.create(Fo.prototype),Bo.prototype.constructor=Bo,is.prototype=Object.create(Fo.prototype),is.prototype.constructor=is,ns.prototype=Object.create(Fo.prototype),ns.prototype.constructor=ns,gs.prototype=Object.create(Pi.prototype),gs.prototype.constructor=gs,_s.prototype=Object.create(Fo.prototype),_s.prototype.constructor=_s,As.prototype=Object.create(J.prototype),As.prototype.constructor=As,ks.prototype=Object.create(Fo.prototype),ks.prototype.constructor=ks,Fs.prototype=Object.create(ra.prototype),Fs.prototype.constructor=Fs,Gs.prototype=Object.create(Fo.prototype),Gs.prototype.constructor=Gs,fa.prototype=Object.create(ra.prototype),fa.prototype.constructor=fa,Ll.prototype=Object.create(ra.prototype),Ll.prototype.constructor=Ll,Wl.prototype=Object.create(J.prototype),Wl.prototype.constructor=Wl,tu.prototype=Object.create(Fo.prototype),tu.prototype.constructor=tu,su.prototype=Object.create(J.prototype),su.prototype.constructor=su,lu.prototype=Object.create(ve.prototype),lu.prototype.constructor=lu,uu.prototype=Object.create(ve.prototype),uu.prototype.constructor=uu,pu.prototype=Object.create(Fo.prototype),pu.prototype.constructor=pu,Nu.prototype=Object.create(N.prototype),Nu.prototype.constructor=Nu,bu.prototype=Object.create(Fo.prototype),bu.prototype.constructor=bu,ju.prototype=Object.create(yt.prototype),ju.prototype.constructor=ju,Au.prototype=Object.create(yt.prototype),Au.prototype.constructor=Au,Iu.prototype=Object.create(rn.prototype),Iu.prototype.constructor=Iu,Object.defineProperty(un.prototype,"aoPipeline_0",{configurable:!0,get:function(){return null==this.aoPipeline_953qvj$_0?o("aoPipeline"):this.aoPipeline_953qvj$_0},set:function(t){this.aoPipeline_953qvj$_0=t}}),un.prototype.lateInit_aemszp$=function(t){this.updateLighting_0()},fn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},fn.prototype=Object.create(z.prototype),fn.prototype.constructor=fn,fn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,zo().envMapBasePath+"/mossy_forest_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:this.local$envMaps=this.result_0;var t=new c(!0,!1);if(this.state_0=3,this.result_0=h(this.local$$receiver,zo().modelBasePath+"/teapot.gltf.gz",t,void 0,this),this.result_0===w)return w;continue;case 3:var e=d(this.result_0),i=f(e.meshes.values);return this.local$this$.unaryPlus_uv0sim$(g("teapots",cn(i,this.local$this$AoDemo,this.local$envMaps))),this.local$this$.unaryPlus_uv0sim$(b("ground",!0,dn(this.local$this$AoDemo,this.local$envMaps))),this.local$this$.plusAssign_f1kmr1$(x.Skybox.cube_o7q6nm$(this.local$envMaps.reflectionMap,1)),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},un.prototype.setupMainScene_aemszp$=function(t){var e,i,n=new L(null);return n.unaryPlus_uv0sim$(a(n,void 0,pn(n,this,t))),this.shadows_0.add_11rb$(new l(n,0,2048)),this.aoPipeline_0=u.Companion.createForward_ushge7$(n),t.assetMgr.launch_eln4bt$((e=n,i=this,function(t,n,r){var o=new fn(e,i,t,this,n);return r?o:o.doResume(null)})),n},un.prototype.setUvs_0=function(t,e,i,n,r){t.texCoordUpperLeft.set_dleff0$(e,i),t.texCoordUpperRight.set_dleff0$(e+n,i),t.texCoordLowerLeft.set_dleff0$(e,i+r),t.texCoordLowerRight.set_dleff0$(e+n,i+r)},un.prototype.updateLighting_0=function(){var t;for(this.spotLight_0?this.mainScene.lighting.singleLight_q9zcvo$(_n):this.mainScene.lighting.lights.clear(),t=this.shadows_0.iterator();t.hasNext();)t.next().isShadowMapEnabled=this.spotLight_0},un.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,function(t){var i=t.image_vf5tfk$(void 0,new S(e.aoPipeline_0.aoMap,void 0,bn().aoMapColorModel()));i.isVisible=!1;var n=i;return t.section_yfmn31$("Ambient Occlusion",mn(e,n)),t.section_yfmn31$("Scene",$n(e)),s}));var e},yn.prototype.aoMapColorModel=function(){var t=new C("aoMap"),e={v:null},i=new F(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new B(t),r=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("colorTex"),e.v.output),o=n.addNode_u9w9by$(new vn(r.outColor,n.stage)).outGray;return n.colorOutput_a3v4si$(o),t},vn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inRed)},vn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outGray.declare()+" = vec4("+this.inRed.ref1f_61zpoe$()+", "+this.inRed.ref1f_61zpoe$()+", "+this.inRed.ref1f_61zpoe$()+", 1.0);")},vn.$metadata$={kind:P,simpleName:"Red2GrayNode",interfaces:[N]},yn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var gn=null;function bn(){return null===gn&&new yn,gn}function xn(){Dn(),Fo.call(this,"Atmosphere"),this.sunColor=m.Companion.WHITE;var t=new vt;t.setDirectional_czzhiu$($.Companion.NEG_Z_AXIS),t.setColor_y83vuj$(this.sunColor,5),this.sun=t,this.sunIntensity_0=1,this.time=.5,this.moonTime=0,this.animateTime_0=!0,this.timeSlider_0=null,this.textures=gt(),this.textures1d=gt(),this.deferredPipeline_enh35m$_0=this.deferredPipeline_enh35m$_0,this.atmoShader=new qn,this.earthGroup=new J("earth"),this.opticalDepthLutPass_1meau0$_0=this.opticalDepthLutPass_1meau0$_0,this.shadows_0=M(),this.camTransform_0=new Kn(Dn().earthRadius),this.menuContainer_3y52kp$_0=this.menuContainer_3y52kp$_0,this.loadingLabel_8f6fxf$_0=this.loadingLabel_8f6fxf$_0,this.loadingComplete_0=!1,this.sceneSetupComplete_0=!1}function wn(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$AtmosphereDemo=t,this.local$$receiver=e}function zn(t,e,i,n,r,o){z.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$key=i,this.local$path=n,this.local$props=r}function kn(t){var e=(new bt).icoDefaults();return e.steps=5,e.radius=1*Dn().earthRadius,t.icoSphere_mojs8w$(e),s}function Sn(t){t.isFrustumChecked=!1,t.generate_v2sixm$(kn);var e=new xt;return t.shader=new wt(e),s}function Cn(t,e){N.call(this,"earthLightColor",e),this.lightColorGradient=t,this.inWorldPos_widqn3$_0=this.inWorldPos_widqn3$_0,this.inFragToLight_2axofe$_0=this.inFragToLight_2axofe$_0,this.inRadiance_2axs4i$_0=this.inRadiance_2axs4i$_0,this.outRadiance=new T(new ut(this.name+"_outRadiance"),this)}function Nn(t){var e=new R;return e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function En(t){return t.layoutSpec.setOrigin_4ujscr$(ct(),ct(),ct()),t.layoutSpec.setSize_4ujscr$(ht(100),ht(100),dt()),t.textAlignment=new _t(ft.CENTER,ft.CENTER),s}function Tn(t){return function(e){return t.colorSlider_0(e,"R:",m.Companion.RED,t.atmoShader.scatteringCoeffs.x,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(e.value),s}}(t)),t.colorSlider_0(e,"G:",m.Companion.GREEN,t.atmoShader.scatteringCoeffs.y,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(void 0,e.value),s}}(t)),t.colorSlider_0(e,"B:",m.Companion.BLUE,t.atmoShader.scatteringCoeffs.z,0,2,function(t){return function(e){return t.updateScatteringCoeffs_0(void 0,void 0,e.value),s}}(t)),e.gap_mx4ult$(8),e.sliderWithValueSmall_jjtbof$("Pow:",t.atmoShader.scatteringCoeffPow,1,20,2,void 0,10,void 0,function(t){return function(e){return t.atmoShader.scatteringCoeffPow=e.value,s}}(t)),e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.scatteringCoeffStrength,.01,5,2,void 0,10,void 0,function(t){return function(e){return t.atmoShader.scatteringCoeffStrength=e.value,s}}(t)),s}}function Pn(t){return function(e){return t.colorSlider_0(e,"R:",m.Companion.RED,t.atmoShader.rayleighColor.r,0,4,function(t){return function(e){return t.updateRayleighColor_0(e.value),s}}(t)),t.colorSlider_0(e,"G:",m.Companion.GREEN,t.atmoShader.rayleighColor.g,0,4,function(t){return function(e){return t.updateRayleighColor_0(void 0,e.value),s}}(t)),t.colorSlider_0(e,"B:",m.Companion.BLUE,t.atmoShader.rayleighColor.b,0,4,function(t){return function(e){return t.updateRayleighColor_0(void 0,void 0,e.value),s}}(t)),e.gap_mx4ult$(8),e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.rayleighColor.a,0,2,void 0,void 0,10,void 0,function(t){return function(e){return t.updateRayleighColor_0(void 0,void 0,void 0,e.value),s}}(t)),s}}function On(t){return function(e){return e.sliderWithValueSmall_jjtbof$("Str:",t.atmoShader.mieColor.a,0,2,void 0,void 0,10,void 0,function(t){return function(e){return t.updateMieColor_0(void 0,void 0,void 0,e.value),s}}(t)),e.sliderWithValueSmall_jjtbof$("g:",t.atmoShader.mieG,.5,.999,3,void 0,10,void 0,function(t){return function(e){return t.atmoShader.mieG=e.value,s}}(t)),s}}function Mn(t){return mt(t,0)+" km"}function jn(t){return function(e){var i=Mn;return e.sliderWithValueSmall_jjtbof$("Thickness:",(t.atmoShader.atmosphereRadius-Dn().earthRadius)*Dn().kmPerUnit,10,1e3,void 0,i,24,void 0,function(t){return function(e){return t.updateAtmosphereThickness_0(e.value),s}}(t)),e.sliderWithValueSmall_jjtbof$("Falloff:",t.opticalDepthLutPass_0.densityFalloff,0,15,2,void 0,24,void 0,function(t){return function(e){return t.opticalDepthLutPass_0.densityFalloff=e.value,s}}(t)),s}}function An(t){var e=24*t,i=$t(e),n=$t(e%1*60),r=n<10?"0":"";return i.toString()+":"+r+n}function In(t){return function(e){e.sliderWithValueSmall_jjtbof$("Sun:",t.atmoShader.sunColor.a,.1,5,2,void 0,24,void 0,function(t){return function(e){return t.sunIntensity_0=e.value,t.updateSun_0(),s}}(t));var i=An;t.timeSlider_0=e.sliderWithValueSmall_jjtbof$("Time:",t.time,0,1,void 0,i,24,void 0,function(t){return function(e){return t.time=e.value,t.updateSun_0(),s}}(t)),e.toggleButton_8v9fdr$("Animate Time",t.animateTime_0,function(t){return function(e){return t.animateTime_0=e.isEnabled,s}}(t));var n=e.textWithValue_puj7f4$("Camera Height:",""),r=t;return n.onUpdate.add_11rb$(function(t,e){return function(i,n){var r=t.cameraHeight*Dn().kmPerUnit;return e.text=mt(r,1)+" km",s}}(r,n)),s}}function Rn(){Ln=this,this.kmPerUnit=100,this.earthRadius=6e3/this.kmPerUnit,this.earthAxisTilt=15,this.moonRadius=1750/this.kmPerUnit,this.moonDistScale=.25,this.moonDist=384400/this.kmPerUnit*this.moonDistScale,this.moonInclination=5.145;var t=this.moonDist/this.moonDistScale;this.keplerC=j.pow(t,3)/j.pow(27.32,2);var e=this.moonDist;this.moonT=j.pow(e,3)/this.keplerC,this.waterColorLow=m.Companion.fromHex_61zpoe$("0D1F56").toLinear(),this.waterColorHigh=m.Companion.fromHex_61zpoe$("020514").toLinear(),this.texMilkyway="Milkyway",this.texSun="Sun",this.texSunBg="Sun Background",this.texMoon="Moon"}un.$metadata$={kind:P,simpleName:"AoDemo",interfaces:[Fo]},Object.defineProperty(xn.prototype,"deferredPipeline",{configurable:!0,get:function(){return null==this.deferredPipeline_enh35m$_0?o("deferredPipeline"):this.deferredPipeline_enh35m$_0},set:function(t){this.deferredPipeline_enh35m$_0=t}}),Object.defineProperty(xn.prototype,"opticalDepthLutPass_0",{configurable:!0,get:function(){return null==this.opticalDepthLutPass_1meau0$_0?o("opticalDepthLutPass"):this.opticalDepthLutPass_1meau0$_0},set:function(t){this.opticalDepthLutPass_1meau0$_0=t}}),Object.defineProperty(xn.prototype,"menuContainer_0",{configurable:!0,get:function(){return null==this.menuContainer_3y52kp$_0?o("menuContainer"):this.menuContainer_3y52kp$_0},set:function(t){this.menuContainer_3y52kp$_0=t}}),Object.defineProperty(xn.prototype,"loadingLabel_0",{configurable:!0,get:function(){return null==this.loadingLabel_8f6fxf$_0?o("loadingLabel"):this.loadingLabel_8f6fxf$_0},set:function(t){this.loadingLabel_8f6fxf$_0=t}}),Object.defineProperty(xn.prototype,"cameraHeight",{configurable:!0,get:function(){return this.mainScene.camera.globalPos.distance_czzhiu$($.Companion.ZERO)-Dn().earthRadius}}),wn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},wn.prototype=Object.create(z.prototype),wn.prototype.constructor=wn,wn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=V(U,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Dn().texMilkyway,zo().awsBaseUrl+"/solarsystem/stars_bg.jpg",void 0,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Dn().texSun,zo().awsBaseUrl+"/solarsystem/sun.png",void 0,this),this.result_0===w)return w;continue;case 4:if(this.state_0=5,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Dn().texSunBg,zo().awsBaseUrl+"/solarsystem/sun_bg.png",void 0,this),this.result_0===w)return w;continue;case 5:if(this.state_0=6,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Dn().texMoon,zo().awsBaseUrl+"/solarsystem/moon.jpg",void 0,this),this.result_0===w)return w;continue;case 6:if(this.state_0=7,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Qn().texEarthDay,zo().awsBaseUrl+"/solarsystem/earth_day.jpg",void 0,this),this.result_0===w)return w;continue;case 7:if(this.state_0=8,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Qn().texEarthNight,zo().awsBaseUrl+"/solarsystem/earth_night.jpg",void 0,this),this.result_0===w)return w;continue;case 8:if(this.state_0=9,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Qn().texEarthNrm,zo().awsBaseUrl+"/solarsystem/earth_nrm.jpg",void 0,this),this.result_0===w)return w;continue;case 9:if(this.state_0=10,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Qn().texOceanNrm,zo().awsBaseUrl+"/solarsystem/oceanNrm.jpg",void 0,this),this.result_0===w)return w;continue;case 10:var t=new W(G.R,H.CLAMP_TO_EDGE,H.CLAMP_TO_EDGE,H.CLAMP_TO_EDGE);if(this.state_0=11,this.result_0=this.local$this$AtmosphereDemo.loadTex_0(this.local$$receiver,Qn().texEarthHeight,zo().awsBaseUrl+"/solarsystem/earth_height_8k.png",t,this),this.result_0===w)return w;continue;case 11:if(this.local$this$AtmosphereDemo.loadingLabel_0.text="Initializing Scene...",this.state_0=12,this.result_0=V(X,this),this.result_0===w)return w;continue;case 12:return this.local$this$AtmosphereDemo.loadingComplete_0=!0,s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},xn.prototype.lateInit_aemszp$=function(t){var e,i=this.camTransform_0;this.mainScene.registerDragHandler_y44tw7$(i),i.unaryPlus_uv0sim$(this.mainScene.camera),t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var r=new wn(e,t,this,i);return n?r:r.doResume(null)}))},zn.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},zn.prototype=Object.create(z.prototype),zn.prototype.constructor=zn,zn.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(void 0===this.local$props&&(this.local$props=new W),this.$this.loadingLabel_0.text='Loading texture "'+this.local$key+'"...',this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(this.local$path,this.local$props,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.$this.textures,e=this.result_0;return void t.put_xwzc9p$(this.local$key,e);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},xn.prototype.loadTex_0=function(t,e,i,n,r,o){var s=new zn(this,t,e,i,n,r);return o?s:s.doResume(null)},xn.prototype.setupMainScene_aemszp$=function(t){var i=new L(null);this.opticalDepthLutPass_0=new K,i.addOffscreenPass_m1c2kf$(this.opticalDepthLutPass_0),i.lighting.lights.clear();var n=i.lighting.lights,r=this.sun;n.add_11rb$(r);var o=this.shadows_0,a=new l(i,0);o.add_11rb$(a);var u=new Y;u.isWithEmissive=!0,u.isWithAmbientOcclusion=!1,u.isWithScreenSpaceReflections=!1,u.maxGlobalLights=1,u.shadowMaps=this.shadows_0,u.pbrSceneShader=this.makeDeferredPbrShader_0(u);var p=u;this.deferredPipeline=new Z(i,p),this.deferredPipeline.pbrPass.sceneShader.ambient=new m(.05,.05,.05).toLinear();var c=this.atmoShader;c.opticalDepthLut=this.opticalDepthLutPass_0.colorTexture,c.sceneColor=this.deferredPipeline.pbrPass.colorTexture,c.scenePos=this.deferredPipeline.mrtPass.positionAo,c.surfaceRadius=Dn().earthRadius,c.atmosphereRadius=6500/Dn().kmPerUnit,c.scatteringCoeffs=new $(.75,1.1,1.35),c.rayleighColor=new m(.5,.5,1,1),c.mieColor=new m(1,.35,.35,.5),c.mieG=.8,c.scatteringCoeffStrength=1;var h=new J;h.isFrustumChecked=!1,h.unaryPlus_uv0sim$(g("shadowEarth",Sn));var d,f,_,y=h;for(this.earthGroup.plusAssign_f1kmr1$(y),d=this.shadows_0.iterator();d.hasNext();){var v=d.next();v.drawNode=y,v.shadowBounds=this.earthGroup.bounds}return i.onUpdate.add_11rb$((f=this,_=y,function(t,i){var n,r;if(f.loadingComplete_0){f.sceneSetupComplete_0||(f.sceneSetupComplete_0=!0,f.finalizeSceneSetup_0(f.deferredPipeline),f.earthGroup.minusAssign_f1kmr1$(_));var o=e.isType(n=f.mainScene.camera,Q)?n:tt(),a=o.globalPos.length()-Dn().earthRadius;o.position.set_czzhiu$($.Companion.ZERO),o.lookAt.set_czzhiu$($.Companion.NEG_Z_AXIS);var l,u=.5*a;if(l=u<.003?.003:u>5?5:u,o.clipNear=l,o.clipFar=1e3*o.clipNear,f.animateTime_0){var p=i.deltaT/120;null!=(r=f.timeSlider_0)&&(r.value=(f.time+p)%1),f.moonTime=f.moonTime+p/Dn().moonT}}return s})),i.onDispose.add_11rb$(function(t){return function(e,i){var n,r;for(n=t.textures.values.iterator();n.hasNext();)n.next().dispose();for(r=t.textures1d.values.iterator();r.hasNext();)r.next().dispose();return s}}(this)),i},xn.prototype.makeDeferredPbrShader_0=function(t){var i=new it;i.isWithEmissive=t.isWithEmissive,i.isScrSpcAmbientOcclusion=t.isWithAmbientOcclusion,i.isScrSpcReflections=t.isWithScreenSpaceReflections,i.maxLights=t.maxGlobalLights,I(i.shadowMaps,this.shadows_0),i.useImageBasedLighting_po417x$(t.environmentMaps);var n,r,o=i,a=et.Companion.defaultDeferredPbrModel_ijjr66$(o),l=new B(a);t:do{var u;for(n=zt.ALL,u=a.stages.values.iterator();u.hasNext();){var p=u.next();if(0!=(p.stage.mask&n.mask)){var c,h=p.nodes,f=M();for(c=h.iterator();c.hasNext();){var _=c.next();e.isType(_,nt)&&f.add_11rb$(_)}var $=kt(f);if(null!=$){r=$;break t}}}r=null}while(0);var y,v,g=d(r);t:do{var b;for(y=zt.ALL,b=a.stages.values.iterator();b.hasNext();){var x=b.next();if(0!=(x.stage.mask&y.mask)){var w,z=x.nodes,k=M();for(w=z.iterator();w.hasNext();){var S=w.next();e.isType(S,rt)&&k.add_11rb$(S)}var C=kt(k);if(null!=C){v=C;break t}}}v=null}while(0);var N=d(v),E=l.texture1dNode_61zpoe$("tLightGradient"),T=l.addNode_u9w9by$(new Cn(E,l.stage));T.inWorldPos=N.inFragPos,T.inFragToLight=g.outFragToLightDirection,T.inRadiance=g.outRadiance,N.inRadiance=T.outRadiance;var P=a,O=90*A.DEG_2_RAD,R=ot(j.cos(O),m.Companion.MD_ORANGE.mix_y83vuj$(m.Companion.WHITE,.6).toLinear()),L=85*A.DEG_2_RAD,D=ot(j.cos(L),m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.6).toLinear()),q=80*A.DEG_2_RAD,F=ot(j.cos(q),m.Companion.WHITE.toLinear()),U=0*A.DEG_2_RAD,V=new at(new st([R,D,F,ot(j.cos(U),m.Companion.WHITE.toLinear())])),G=this.textures1d,H=Qn().texLightGradient;G.put_xwzc9p$(H,V);var W,X,K=new et(o,P);return K.onPipelineCreated.add_11rb$((W=V,X=P,function(t,i,n){var r,o,a,l,u=X;t:do{var p;for(a=zt.ALL,p=u.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&a.mask)){var h,d,f=c.nodes;e:do{var _;for(_=f.iterator();_.hasNext();){var m=_.next();if(St(m.name,"tLightGradient")&&e.isType(m,lt)){d=m;break e}}d=null}while(0);var $=null==(h=d)||e.isType(h,lt)?h:tt();if(null!=$){l=$;break t}}}l=null}while(0);return null!=(o=null!=(r=l)?r.sampler:null)&&(o.texture=W),s})),K},Object.defineProperty(Cn.prototype,"inWorldPos",{configurable:!0,get:function(){return null==this.inWorldPos_widqn3$_0?o("inWorldPos"):this.inWorldPos_widqn3$_0},set:function(t){this.inWorldPos_widqn3$_0=t}}),Object.defineProperty(Cn.prototype,"inFragToLight",{configurable:!0,get:function(){return null==this.inFragToLight_2axofe$_0?o("inFragToLight"):this.inFragToLight_2axofe$_0},set:function(t){this.inFragToLight_2axofe$_0=t}}),Object.defineProperty(Cn.prototype,"inRadiance",{configurable:!0,get:function(){return null==this.inRadiance_2axs4i$_0?o("inRadiance"):this.inRadiance_2axs4i$_0},set:function(t){this.inRadiance_2axs4i$_0=t}}),Cn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inWorldPos,this.inFragToLight,this.inRadiance])},Cn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                float "+this.name+"_l = clamp(dot(normalize("+this.inWorldPos.ref3f_61zpoe$()+"), "+this.inFragToLight.ref3f_61zpoe$()+"), 0.0, 1.0);\n                "+this.outRadiance.declare()+" = "+this.inRadiance.ref3f_61zpoe$()+" * "+t.sampleTexture1d_buzeal$(this.lightColorGradient.name,this.name+"_l")+".rgb;\n            ")},Cn.$metadata$={kind:P,simpleName:"EarthLightColorNode",interfaces:[N]},xn.prototype.finalizeSceneSetup_0=function(t){this.menuContainer_0.isVisible=!0,this.loadingLabel_0.isVisible=!1;var e,i=new or(this);this.atmoShader.skyColor=i.colorTexture,this.setupContent_0(t.contentGroup),this.mainScene.unaryPlus_uv0sim$(b(void 0,void 0,(e=this,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(Nn),t.shader=e.atmoShader,s}))),this.updateSun_0()},xn.prototype.setupContent_0=function(t){var e=this.earthGroup;e.isFrustumChecked=!1,e.unaryPlus_uv0sim$(this.camTransform_0);var i,n,r,o=new xr,a=new Yn(this.textures);a.heightMap=this.textures.get_11rb$(Qn().texEarthHeight),a.oceanNrmTex=this.textures.get_11rb$(Qn().texOceanNrm),o.shader=a,o.onUpdate.add_11rb$((i=this,n=o,r=a,function(t,e){var o,a,l,u,p,c;n.updateTiles_czzhiu$(i.mainScene.camera.globalPos);var h=i.cameraHeight*Dn().kmPerUnit/100,d=h<0?0:h>1?1:h;null!=(a=null!=(o=r.uWaterColor)?o.value:null)&&a.set_czzhhz$(Dn().waterColorLow.mix_y83vuj$(Dn().waterColorHigh,d)),null!=(u=null!=(l=r.uNormalShift)?l.value:null)&&u.set_7b5o5w$(.0051*e.time,.0037*e.time,-.0071*e.time,-.0039*e.time);var f=pt(i.sun.direction).scale_mx4ult$(-1);return null!=(c=null!=(p=r.uDirToSun)?p.value:null)&&(c.set_czzhiu$(f),t.toLocalCoords_w1lst9$(c,0)),i.atmoShader.dirToSun=f,s}));var l=o;e.unaryPlus_uv0sim$(l),e.onUpdate.add_11rb$(function(t,e){return function(i,n){return t.setIdentity(),t.rotate_ad55pp$(Dn().earthAxisTilt,$.Companion.NEG_X_AXIS),t.rotate_ad55pp$(360*e.time,$.Companion.Y_AXIS),s}}(e,this)),t.unaryPlus_uv0sim$(e)},xn.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,function(t){var i=t.uiRoot,n=e;return n.loadingLabel_0=i.label_tokfmu$("Loading...",En),i.unaryPlus_uv0sim$(n.loadingLabel_0),e.menuContainer_0=t.menuContainer,t.menuContainer.isVisible=!1,t.menuWidth=380,t.section_yfmn31$("Scattering",Tn(e)),t.section_yfmn31$("Rayleigh",Pn(e)),t.section_yfmn31$("Mie",On(e)),t.section_yfmn31$("Atmosphere",jn(e)),t.section_yfmn31$("View",In(e)),s}));var e},xn.prototype.updateSun_0=function(){var t=new yt(0,0,-1);this.atmoShader.dirToSun=t,this.atmoShader.sunColor=this.sunColor.withAlpha_mx4ult$(this.sunIntensity_0);var e=this.mainScene.lighting.lights.get_za3lpa$(0);e.setDirectional_czzhiu$(pt(t).scale_mx4ult$(-1)),e.setColor_y83vuj$(this.sunColor,5*this.sunIntensity_0)},xn.prototype.updateRayleighColor_0=function(t,e,i,n){void 0===t&&(t=this.atmoShader.rayleighColor.r),void 0===e&&(e=this.atmoShader.rayleighColor.g),void 0===i&&(i=this.atmoShader.rayleighColor.b),void 0===n&&(n=this.atmoShader.rayleighColor.a),this.atmoShader.rayleighColor=new m(t,e,i,n)},xn.prototype.updateMieColor_0=function(t,e,i,n){void 0===t&&(t=this.atmoShader.mieColor.r),void 0===e&&(e=this.atmoShader.mieColor.g),void 0===i&&(i=this.atmoShader.mieColor.b),void 0===n&&(n=this.atmoShader.mieColor.a),this.atmoShader.mieColor=new m(t,e,i,n)},xn.prototype.updateScatteringCoeffs_0=function(t,e,i){void 0===t&&(t=this.atmoShader.scatteringCoeffs.x),void 0===e&&(e=this.atmoShader.scatteringCoeffs.y),void 0===i&&(i=this.atmoShader.scatteringCoeffs.z),this.atmoShader.scatteringCoeffs=new $(t,e,i)},xn.prototype.updateAtmosphereThickness_0=function(t){var e=Dn().earthRadius+t/Dn().kmPerUnit;this.atmoShader.atmosphereRadius=e,this.opticalDepthLutPass_0.atmosphereRadius=e},xn.prototype.colorSlider_0=function(t,e,i,n,r,o,s){var a=t.sliderWithValueSmall_jjtbof$(e,n,r,o,void 0,void 0,10,void 0,s);return a.knobColor.setCustom_11rb$(i),a.trackColorHighlighted.setCustom_11rb$(i.mix_y83vuj$(m.Companion.BLACK,.5)),a},Rn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Ln=null;function Dn(){return null===Ln&&new Rn,Ln}function qn(){var t;Un(),Mt.call(this,Un().atmosphereModel_0()),this.opticalDepthLutNode_0=null,this.sceneColorNode_0=null,this.scenePosNode_0=null,this.skyColorNode_0=null,this.atmosphereNode_0=null,this.opticalDepthLut_p8nvlg$_0=null,this.sceneColor_bwjq5t$_0=null,this.scenePos_th0mjk$_0=null,this.skyColor_mqtgu2$_0=null,this.dirToSun_auak70$_0=new $(0,0,1),this.sunColor_wzy3ch$_0=m.Companion.WHITE,this.scatteringCoeffPow_atsxc5$_0=4.5,this.scatteringCoeffStrength_31rdhy$_0=1,this.scatteringCoeffs_4w0w4q$_0=new $(.5,.8,1),this.rayleighColor_1rrtao$_0=new m(.75,.75,.75,1),this.mieColor_ii078u$_0=new m(1,.9,.8,.3),this.mieG_ochup6$_0=.99,this.planetCenter_3pilph$_0=$.Companion.ZERO,this.surfaceRadius_rmfofh$_0=600,this.atmosphereRadius_w8w0fo$_0=609,this.onPipelineSetup.add_11rb$(Xn),this.onPipelineCreated.add_11rb$((t=this,function(i,n,r){var o,a,l,u,p,c,h,d,f,_,m,$=t,y=t.model;t:do{var v;for(_=zt.ALL,v=y.stages.values.iterator();v.hasNext();){var g=v.next();if(0!=(g.stage.mask&_.mask)){var b,x,w=g.nodes;e:do{var z;for(z=w.iterator();z.hasNext();){var k=z.next();if(St(k.name,"tOpticalDepthLut")&&e.isType(k,At)){x=k;break e}}x=null}while(0);var S=null==(b=x)||e.isType(b,At)?b:tt();if(null!=S){m=S;break t}}}m=null}while(0);$.opticalDepthLutNode_0=m,null!=(a=null!=(o=t.opticalDepthLutNode_0)?o.sampler:null)&&(a.texture=t.opticalDepthLut);var C,N,E=t,T=t.model;t:do{var P;for(C=zt.ALL,P=T.stages.values.iterator();P.hasNext();){var O=P.next();if(0!=(O.stage.mask&C.mask)){var j,A,I=O.nodes;e:do{var R;for(R=I.iterator();R.hasNext();){var L=R.next();if(St(L.name,"tSceneColor")&&e.isType(L,At)){A=L;break e}}A=null}while(0);var D=null==(j=A)||e.isType(j,At)?j:tt();if(null!=D){N=D;break t}}}N=null}while(0);E.sceneColorNode_0=N,null!=(u=null!=(l=t.sceneColorNode_0)?l.sampler:null)&&(u.texture=t.sceneColor);var q,F,B=t,U=t.model;t:do{var V;for(q=zt.ALL,V=U.stages.values.iterator();V.hasNext();){var G=V.next();if(0!=(G.stage.mask&q.mask)){var H,W,X=G.nodes;e:do{var K;for(K=X.iterator();K.hasNext();){var Y=K.next();if(St(Y.name,"tScenePos")&&e.isType(Y,At)){W=Y;break e}}W=null}while(0);var Z=null==(H=W)||e.isType(H,At)?H:tt();if(null!=Z){F=Z;break t}}}F=null}while(0);B.scenePosNode_0=F,null!=(c=null!=(p=t.scenePosNode_0)?p.sampler:null)&&(c.texture=t.scenePos);var J,Q,et=t,it=t.model;t:do{var nt;for(J=zt.ALL,nt=it.stages.values.iterator();nt.hasNext();){var rt=nt.next();if(0!=(rt.stage.mask&J.mask)){var ot,st,at=rt.nodes;e:do{var lt;for(lt=at.iterator();lt.hasNext();){var ut=lt.next();if(St(ut.name,"tSkyColor")&&e.isType(ut,At)){st=ut;break e}}st=null}while(0);var pt=null==(ot=st)||e.isType(ot,At)?ot:tt();if(null!=pt){Q=pt;break t}}}Q=null}while(0);et.skyColorNode_0=Q,null!=(d=null!=(h=t.skyColorNode_0)?h.sampler:null)&&(d.texture=t.skyColor);var ct,ht,dt=t,ft=t.model;t:do{var _t;for(ct=zt.ALL,_t=ft.stages.values.iterator();_t.hasNext();){var mt=_t.next();if(0!=(mt.stage.mask&ct.mask)){var $t,yt=mt.nodes,vt=M();for($t=yt.iterator();$t.hasNext();){var gt=$t.next();e.isType(gt,Nt)&&vt.add_11rb$(gt)}var bt=kt(vt);if(null!=bt){ht=bt;break t}}}ht=null}while(0);if(dt.atmosphereNode_0=ht,null!=(f=t.atmosphereNode_0)){var xt=t;f.uDirToSun.value.set_czzhiu$(xt.dirToSun),f.uPlanetCenter.value.set_czzhiu$(xt.planetCenter),f.uSurfaceRadius.value=xt.surfaceRadius,f.uAtmosphereRadius.value=xt.atmosphereRadius,f.uRayleighColor.value.set_czzhhz$(xt.rayleighColor),f.uMieColor.value.set_czzhhz$(xt.mieColor),f.uMieG.value=xt.mieG,f.uSunColor.value.set_czzhhz$(xt.sunColor),xt.updateScatteringCoeffs_0()}return s}))}function Fn(){Bn=this}xn.$metadata$={kind:P,simpleName:"AtmosphereDemo",interfaces:[Fo]},Object.defineProperty(qn.prototype,"opticalDepthLut",{configurable:!0,get:function(){return this.opticalDepthLut_p8nvlg$_0},set:function(t){var e,i;this.opticalDepthLut_p8nvlg$_0=t,null!=(i=null!=(e=this.opticalDepthLutNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(qn.prototype,"sceneColor",{configurable:!0,get:function(){return this.sceneColor_bwjq5t$_0},set:function(t){var e,i;this.sceneColor_bwjq5t$_0=t,null!=(i=null!=(e=this.sceneColorNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(qn.prototype,"scenePos",{configurable:!0,get:function(){return this.scenePos_th0mjk$_0},set:function(t){var e,i;this.scenePos_th0mjk$_0=t,null!=(i=null!=(e=this.scenePosNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(qn.prototype,"skyColor",{configurable:!0,get:function(){return this.skyColor_mqtgu2$_0},set:function(t){var e,i;this.skyColor_mqtgu2$_0=t,null!=(i=null!=(e=this.skyColorNode_0)?e.sampler:null)&&(i.texture=t)}}),Object.defineProperty(qn.prototype,"dirToSun",{configurable:!0,get:function(){return this.dirToSun_auak70$_0},set:function(t){var e,i,n;this.dirToSun_auak70$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uDirToSun:null)?i.value:null)&&n.set_czzhiu$(t)}}),Object.defineProperty(qn.prototype,"sunColor",{configurable:!0,get:function(){return this.sunColor_wzy3ch$_0},set:function(t){var e,i,n;this.sunColor_wzy3ch$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uSunColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(qn.prototype,"scatteringCoeffPow",{configurable:!0,get:function(){return this.scatteringCoeffPow_atsxc5$_0},set:function(t){this.scatteringCoeffPow_atsxc5$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(qn.prototype,"scatteringCoeffStrength",{configurable:!0,get:function(){return this.scatteringCoeffStrength_31rdhy$_0},set:function(t){this.scatteringCoeffStrength_31rdhy$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(qn.prototype,"scatteringCoeffs",{configurable:!0,get:function(){return this.scatteringCoeffs_4w0w4q$_0},set:function(t){this.scatteringCoeffs_4w0w4q$_0=t,this.updateScatteringCoeffs_0()}}),Object.defineProperty(qn.prototype,"rayleighColor",{configurable:!0,get:function(){return this.rayleighColor_1rrtao$_0},set:function(t){var e,i,n;this.rayleighColor_1rrtao$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uRayleighColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(qn.prototype,"mieColor",{configurable:!0,get:function(){return this.mieColor_ii078u$_0},set:function(t){var e,i,n;this.mieColor_ii078u$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uMieColor:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(qn.prototype,"mieG",{configurable:!0,get:function(){return this.mieG_ochup6$_0},set:function(t){var e,i;this.mieG_ochup6$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uMieG:null)&&(i.value=t)}}),Object.defineProperty(qn.prototype,"planetCenter",{configurable:!0,get:function(){return this.planetCenter_3pilph$_0},set:function(t){var e,i,n;this.planetCenter_3pilph$_0=t,null!=(n=null!=(i=null!=(e=this.atmosphereNode_0)?e.uPlanetCenter:null)?i.value:null)&&n.set_czzhiu$(t)}}),Object.defineProperty(qn.prototype,"surfaceRadius",{configurable:!0,get:function(){return this.surfaceRadius_rmfofh$_0},set:function(t){var e,i;this.surfaceRadius_rmfofh$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uSurfaceRadius:null)&&(i.value=t)}}),Object.defineProperty(qn.prototype,"atmosphereRadius",{configurable:!0,get:function(){return this.atmosphereRadius_w8w0fo$_0},set:function(t){var e,i;this.atmosphereRadius_w8w0fo$_0=t,null!=(i=null!=(e=this.atmosphereNode_0)?e.uAtmosphereRadius:null)&&(i.value=t)}}),qn.prototype.updateScatteringCoeffs_0=function(){var t,e,i;if(null!=(i=null!=(e=null!=(t=this.atmosphereNode_0)?t.uScatteringCoeffs:null)?e.value:null)){var n=this.scatteringCoeffs.x,r=this.scatteringCoeffPow;i.x=j.pow(n,r)*this.scatteringCoeffStrength;var o=this.scatteringCoeffs.y,s=this.scatteringCoeffPow;i.y=j.pow(o,s)*this.scatteringCoeffStrength;var a=this.scatteringCoeffs.z,l=this.scatteringCoeffPow;i.z=j.pow(a,l)*this.scatteringCoeffStrength}},Fn.prototype.atmosphereModel_0=function(){var t=new C,e={v:null},i={v:null},n={v:null},r=new F(t);e.v=r.mvpNode();var o=r.attrTexCoords().output,s=r.addNode_u9w9by$(new Vn(r.stage));s.inScreenPos=o;var a=s;n.v=r.stageInterfaceNode_iikjwn$("ifViewDir",a.outViewDir),i.v=r.stageInterfaceNode_iikjwn$("ifTexCoords",o),r.positionOutput=r.fullScreenQuadPositionNode_r20yfm$(o).outQuadPos;var l=new B(t);l.addNode_u9w9by$(new Ct(l.stage));var u=e.v.addToStage_llmhyc$(l.stage),p=l.texture2dNode_61zpoe$("tOpticalDepthLut"),c=l.texture2dSamplerNode_fzevit$(l.texture2dNode_61zpoe$("tSceneColor"),i.v.output).outColor,h=l.texture2dSamplerNode_fzevit$(l.texture2dNode_61zpoe$("tSkyColor"),i.v.output).outColor,d=l.texture2dSamplerNode_fzevit$(l.texture2dNode_61zpoe$("tScenePos"),i.v.output).outColor,f=l.addNode_u9w9by$(new Hn(l.stage));f.inViewPos=d;var _=f,m=l.addNode_u9w9by$(new Nt(p,l.stage));m.inSceneColor=c,m.inSceneDepth=l.splitNode_500t7j$(d,"z").output,m.inScenePos=_.outWorldPos,m.inSkyColor=h,m.inViewDepth=l.splitNode_500t7j$(d,"z").output,m.inCamPos=u.outCamPos,m.inLookDir=n.v.output;var $=m;return l.colorOutput_a3v4si$(l.hdrToLdrNode_r20yfm$($.outColor).outColor),t},Fn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Bn=null;function Un(){return null===Bn&&new Fn,Bn}function Vn(t){N.call(this,"xyToViewDir",t),this.uInvViewProjMat_0=new Et("uInvViewProjMat"),this.inScreenPos=new T(new Pt(Tt.Companion.ZERO)),this.outViewDir=new T(new ut(this.name+"_outWorldPos"),this)}function Gn(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewProjMat_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.uInvViewProjMat_0.value.set_d4zu6l$(i.renderPass.camera.invViewProj),s}}(t),s}}function Hn(t){N.call(this,"view2worldPos",t),this.uInvViewMat_0=new Et("uInvViewMat"),this.inViewPos=new T(new Ot($.Companion.ZERO)),this.outWorldPos=new T(new E(this.name+"_outWorldPos"),this)}function Wn(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewMat_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.uInvViewMat_0.value.set_d4zu6l$(i.renderPass.camera.invView),s}}(t),s}}function Xn(t,e,i){return t.depthTest=jt.DISABLED,s}function Kn(t){var e;J.call(this),this.earthRadius=t,this.planetRotX=0,this.planetRotY=0,this.lookRotX=0,this.lookRotY=0,this.camRotX=0,this.zoom=2,this.minZoom=.001,this.maxZoom=15,this.planetRot_0=new It,this.lookRot_0=new It,this.camRot_0=new It,this.planetRot_0.rotate_5820x2$(13,Rt.Companion.Y_AXIS),this.planetRot_0.rotate_5820x2$(40,Rt.Companion.NEG_X_AXIS),this.onUpdate.add_11rb$((e=this,function(t,i){var n=e.invTransform.transform_j7uy7i$(Lt(Rt.Companion.X_AXIS),0),r=e.invTransform.transform_j7uy7i$(Lt(Rt.Companion.Y_AXIS),0);return e.lookRot_0.setIdentity(),e.lookRot_0.rotate_5820x2$(e.lookRotY,Rt.Companion.Z_AXIS),e.lookRot_0.rotate_5820x2$(e.lookRotX,Rt.Companion.X_AXIS),e.camRot_0.setIdentity(),e.camRot_0.rotate_5820x2$(e.camRotX,Rt.Companion.X_AXIS),e.lookRot_0.transform_j7uy7i$(n,0),e.lookRot_0.transform_j7uy7i$(r,0),e.planetRot_0.rotate_5820x2$(e.planetRotX,n),e.planetRot_0.rotate_5820x2$(e.planetRotY,r),e.setIdentity(),e.mul_d4zu6l$(e.planetRot_0),e.translate_y2kzbl$(0,0,e.earthRadius),e.mul_d4zu6l$(e.lookRot_0),e.translate_y2kzbl$(0,0,e.earthRadius*e.zoom),e.mul_d4zu6l$(e.camRot_0),s}))}function Yn(t,i){var n;Qn(),void 0===i&&(i=Qn().shaderConfig_ol1b85$(t)),Ft.call(this,i,Qn().model_2ufela$(i)),this.tHeightMap_0=null,this.heightMap_etfhgu$_0=null,this.tOcean_0=null,this.oceanNrmTex_42rp2f$_0=null,this.uDirToSun=null,this.uNormalShift=null,this.uWaterColor=null,this.onPipelineCreated.add_11rb$((n=this,function(t,i,r){var o,a,l,u,p,c,h,d,f=n,_=n.model;t:do{var m;for(h=zt.ALL,m=_.stages.values.iterator();m.hasNext();){var $=m.next();if(0!=($.stage.mask&h.mask)){var y,v,g=$.nodes;e:do{var b;for(b=g.iterator();b.hasNext();){var x=b.next();if(St(x.name,"uDirToSun")&&e.isType(x,Ht)){v=x;break e}}v=null}while(0);var w=null==(y=v)||e.isType(y,Ht)?y:tt();if(null!=w){d=w;break t}}}d=null}while(0);f.uDirToSun=null!=(o=d)?o.uniform:null;var z,k,S=n.model;t:do{var C;for(z=zt.ALL,C=S.stages.values.iterator();C.hasNext();){var N=C.next();if(0!=(N.stage.mask&z.mask)){var E,T=N.nodes,P=M();for(E=T.iterator();E.hasNext();){var O=E.next();e.isType(O,rr)&&P.add_11rb$(O)}var j=kt(P);if(null!=j){k=j;break t}}}k=null}while(0);if(null!=(a=k)){var A=n;A.uNormalShift=a.uNormalShift,A.uWaterColor=a.uWaterColor}var I,R,L=n,D=n.model;t:do{var q;for(I=zt.ALL,q=D.stages.values.iterator();q.hasNext();){var F=q.next();if(0!=(F.stage.mask&I.mask)){var B,U,V=F.nodes;e:do{var G;for(G=V.iterator();G.hasNext();){var H=G.next();if(St(H.name,"tOceanNrm1")&&e.isType(H,At)){U=H;break e}}U=null}while(0);var W=null==(B=U)||e.isType(B,At)?B:tt();if(null!=W){R=W;break t}}}R=null}while(0);L.tOcean_0=null!=(l=R)?l.sampler:null,null!=(u=n.tOcean_0)&&(u.texture=n.oceanNrmTex);var X,K,Y=n,Z=n.model;t:do{var J;for(X=zt.ALL,J=Z.stages.values.iterator();J.hasNext();){var Q=J.next();if(0!=(Q.stage.mask&X.mask)){var et,it,nt=Q.nodes;e:do{var rt;for(rt=nt.iterator();rt.hasNext();){var ot=rt.next();if(St(ot.name,"tHeightMap")&&e.isType(ot,At)){it=ot;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,At)?et:tt();if(null!=st){K=st;break t}}}K=null}while(0);return Y.tHeightMap_0=null!=(p=K)?p.sampler:null,null!=(c=n.tHeightMap_0)&&(c.texture=n.heightMap),s}))}function Zn(){Jn=this,this.texEarthDay="Earth by Day",this.texEarthNight="Earth by Night",this.texEarthNrm="Earth Normal Map",this.texEarthHeight="Earth Height Map",this.texOceanNrm="Ocean Normal Map",this.texLightGradient="Light Gradient"}Vn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inScreenPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Gn(this))},Vn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec4 "+this.name+"_near = "+this.uInvViewProjMat_0+" * vec4("+this.inScreenPos.ref2f_61zpoe$()+" * 2.0 - 1.0, 0.0, 1.0);\n                vec4 "+this.name+"_far = "+this.uInvViewProjMat_0+" * vec4("+this.inScreenPos.ref2f_61zpoe$()+" * 2.0 - 1.0, 1.0, 1.0);\n                "+this.outViewDir.declare()+" = ("+this.name+"_far.xyz / "+this.name+"_far.w) - ("+this.name+"_near.xyz / "+this.name+"_near.w);\n            ")},Vn.$metadata$={kind:P,simpleName:"XyToViewDirNode",interfaces:[N]},Hn.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Wn(this))},Hn.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outWorldPos.declare()+" = "+this.uInvViewMat_0+" * vec4("+this.inViewPos.ref3f_61zpoe$()+", 1.0);")},Hn.$metadata$={kind:P,simpleName:"ViewToWorldPosNode",interfaces:[N]},qn.$metadata$={kind:P,simpleName:"AtmosphericScatteringShader",interfaces:[Mt]},Kn.prototype.handleDrag_urvnay$=function(t,e,i){if(!t.isEmpty()){var n=t.get_za3lpa$(0);if(!n.isConsumed_za3lpa$()&&n.isInViewport_hrtwbc$(e.mainRenderPass.viewport,i)){var r=this.zoom,o=j.min(r,10);if(n.isLeftButtonDown)this.planetRotX=-n.deltaY/15*j.pow(o,.6),this.planetRotY=-n.deltaX/15*j.pow(o,.6);else if(n.isRightButtonDown)this.lookRotX-=n.deltaY/10,this.lookRotY-=n.deltaX/10;else if(n.isMiddleButtonDown){var s,a=this.camRotX-n.deltaY/10;s=a<0?0:a>180?180:a,this.camRotX=s,this.lookRotY-=n.deltaX/10}var l,u=this.zoom*(1-n.deltaScroll/10),p=this.minZoom,c=this.maxZoom;l=u<p?p:u>c?c:u,this.zoom=l,n.consume_za3lpa$()}}},Kn.$metadata$={kind:P,simpleName:"EarthCamTransform",interfaces:[Dt,J]},Object.defineProperty(Yn.prototype,"heightMap",{configurable:!0,get:function(){return this.heightMap_etfhgu$_0},set:function(t){var e;this.heightMap_etfhgu$_0=t,null!=(e=this.tHeightMap_0)&&(e.texture=t)}}),Object.defineProperty(Yn.prototype,"oceanNrmTex",{configurable:!0,get:function(){return this.oceanNrmTex_42rp2f$_0},set:function(t){var e;this.oceanNrmTex_42rp2f$_0=t,null!=(e=this.tOcean_0)&&(e.texture=t)}}),Zn.prototype.shaderConfig_ol1b85$=function(t){var e=new qt;return e.useAlbedoMap_vzjalu$(t.get_11rb$(this.texEarthDay)),e.useEmissiveMap_vzjalu$(t.get_11rb$(this.texEarthNight)),e.useNormalMap_w253oa$(t.get_11rb$(this.texEarthNrm)),e.isInstanced=!0,e},Zn.prototype.model_2ufela$=function(t){var i,n,r,o,s,a,l=Ft.Companion.defaultMrtPbrModel_2ufela$(t),u={v:null},p={v:null},c={v:null},h=new F(l);t:do{var f;for(s=zt.ALL,f=l.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&s.mask)){var m,$=_.nodes,y=M();for(m=$.iterator();m.hasNext();){var v=m.next();e.isType(v,Bt)&&y.add_11rb$(v)}var g=kt(y);if(null!=g){a=g;break t}}}a=null}while(0);var b,x,w=d(a),z=h.multiplyNode_ze33is$(w.outViewMat,w.outModelMat).output;t:do{var k;for(b=zt.ALL,k=l.stages.values.iterator();k.hasNext();){var S=k.next();if(0!=(S.stage.mask&b.mask)){var C,N,E=S.nodes;e:do{var T;for(T=E.iterator();T.hasNext();){var P=T.next();if(St(P.name,"modelViewMat")&&e.isType(P,Ut)){N=P;break e}}N=null}while(0);var O=null==(C=N)||e.isType(C,Ut)?C:tt();if(null!=O){x=O;break t}}}x=null}while(0);var j=d(x).output,A=h.pushConstantNode3f_61zpoe$("uDirToSun").output,I=h.vec3TransformNode_vid4wo$(A,z,0).outVec3;u.v=h.stageInterfaceNode_iikjwn$("ifSunDirViewSpace",I);var R=h.instanceAttrModelMat().output,L=h.addNode_u9w9by$(new ir(h.stage));L.inModelMat=R,L.inTileName=h.instanceAttributeNode_nm2vx5$(Tr().ATTRIB_TILE_NAME).output,L.inXyPos=h.attrTexCoords().output;var D=L,q=h.texture2dNode_61zpoe$("tHeightMap"),U=h.addNode_u9w9by$(new er(q,h.stage));U.inTileName=h.instanceAttributeNode_nm2vx5$(Tr().ATTRIB_TILE_NAME).output,U.inEdgeFlag=h.attributeNode_nm2vx5$(Tr().ATTRIB_EDGE_FLAG).output,U.inEdgeMask=h.instanceAttributeNode_nm2vx5$(Tr().ATTRIB_EDGE_MASK).output,U.inRawTexCoord=h.attrTexCoords().output,U.inModelMat=R,U.inPosition=D.outPos,U.inNormal=D.outNrm,U.inTangent=D.outTan,U.inTexCoord=D.outTex,U.inStrength=h.constFloat_mx4ult$(.005),U.inNrmStrength=h.constFloat_mx4ult$(3);var V,G,H,W,X,K,Y,Z,J=U;t:do{var Q;for(V=zt.ALL,Q=l.stages.values.iterator();Q.hasNext();){var et=Q.next();if(0!=(et.stage.mask&V.mask)){var it,nt,rt=et.nodes;e:do{var ot;for(ot=rt.iterator();ot.hasNext();){var st=ot.next();if(St(st.name,"texCoordInput")&&e.isType(st,Ut)){nt=st;break e}}nt=null}while(0);var at=null==(it=nt)||e.isType(it,Ut)?it:tt();if(null!=at){G=at;break t}}}G=null}while(0);null!=(i=G)&&(i.input=D.outTex);t:do{var lt;for(H=zt.ALL,lt=l.stages.values.iterator();lt.hasNext();){var ut=lt.next();if(0!=(ut.stage.mask&H.mask)){var pt,ct,ht=ut.nodes;e:do{var dt;for(dt=ht.iterator();dt.hasNext();){var ft=dt.next();if(St(ft.name,"localTangentInput")&&e.isType(ft,Ut)){ct=ft;break e}}ct=null}while(0);var _t=null==(pt=ct)||e.isType(pt,Ut)?pt:tt();if(null!=_t){W=_t;break t}}}W=null}while(0);null!=(n=W)&&(n.input=D.outTan);t:do{var mt;for(X=zt.ALL,mt=l.stages.values.iterator();mt.hasNext();){var $t=mt.next();if(0!=($t.stage.mask&X.mask)){var yt,vt,gt=$t.nodes;e:do{var bt;for(bt=gt.iterator();bt.hasNext();){var xt=bt.next();if(St(xt.name,"localPosDisplaced")&&e.isType(xt,Ut)){vt=xt;break e}}vt=null}while(0);var wt=null==(yt=vt)||e.isType(yt,Ut)?yt:tt();if(null!=wt){K=wt;break t}}}K=null}while(0);null!=(r=K)&&(r.input=J.outPosition);t:do{var Ct;for(Y=zt.ALL,Ct=l.stages.values.iterator();Ct.hasNext();){var Nt=Ct.next();if(0!=(Nt.stage.mask&Y.mask)){var Et,Tt,Pt=Nt.nodes;e:do{var Ot;for(Ot=Pt.iterator();Ot.hasNext();){var Mt=Ot.next();if(St(Mt.name,"localNormalInput")&&e.isType(Mt,Ut)){Tt=Mt;break e}}Tt=null}while(0);var jt=null==(Et=Tt)||e.isType(Et,Ut)?Et:tt();if(null!=jt){Z=jt;break t}}}Z=null}while(0);null!=(o=Z)&&(o.input=J.outNormal),c.v=h.stageInterfaceNode_iikjwn$("ifNormalLocalNoBump",D.outNrm),p.v=h.stageInterfaceNode_iikjwn$("ifNormalNoBumpViewSpace",h.vec3TransformNode_vid4wo$(D.outNrm,j,0).outVec3);var At,It,Rt=new B(l);t:do{var Lt;for(At=zt.ALL,Lt=l.stages.values.iterator();Lt.hasNext();){var Dt=Lt.next();if(0!=(Dt.stage.mask&At.mask)){var qt,Ht=Dt.nodes,Wt=M();for(qt=Ht.iterator();qt.hasNext();){var Xt=qt.next();e.isType(Xt,Vt)&&Wt.add_11rb$(Xt)}var Kt=kt(Wt);if(null!=Kt){It=Kt;break t}}}It=null}while(0);var Yt,Zt,Jt=d(It);t:do{var Qt;for(Yt=zt.ALL,Qt=l.stages.values.iterator();Qt.hasNext();){var te=Qt.next();if(0!=(te.stage.mask&Yt.mask)){var ee,ie,ne=te.nodes;e:do{var re;for(re=ne.iterator();re.hasNext();){var oe=re.next();if(St(oe.name,"ifTangents")&&e.isType(oe,Gt)){ie=oe;break e}}ie=null}while(0);var se=null==(ee=ie)||e.isType(ee,Gt)?ee:tt();if(null!=se){Zt=se;break t}}}Zt=null}while(0);var ae=d(Zt),le=Jt.inAlbedo,ue=Rt.addNode_u9w9by$(new nr(le,Rt.stage));Jt.inRoughness=ue.outRoughness;var pe=Rt.addNode_u9w9by$(new rr(Rt.stage));pe.inOceanTex1=Rt.texture2dNode_61zpoe$("tOceanNrm1"),pe.inAlbedo=le,pe.inIsOcean=ue.outIsOcean,pe.inNormal=c.v.output,pe.inBumpNormal=Jt.inViewNormal,pe.inTangent=ae.output,Jt.inViewNormal=pe.outBumpNormal;var ce=pe,he=Rt.addNode_u9w9by$(new tr(Rt.stage));return he.inNormal=Rt.normalizeNode_r20yfm$(p.v.output).output,he.inSunDir=Rt.normalizeNode_r20yfm$(u.v.output).output,he.inAlbedo=ce.outColor,he.inEmissive=Jt.inEmissive,Jt.inAlbedo=he.outAlbedo,Jt.inEmissive=he.outEmissive,l},Zn.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Jn=null;function Qn(){return null===Jn&&new Zn,Jn}function tr(t){N.call(this,"earthDayNightMix",t),this.inNormal_8wrcbj$_0=this.inNormal_8wrcbj$_0,this.inSunDir_3sjfkp$_0=this.inSunDir_3sjfkp$_0,this.inAlbedo_bpcifj$_0=this.inAlbedo_bpcifj$_0,this.inEmissive_rf58nj$_0=this.inEmissive_rf58nj$_0,this.outAlbedo=new T(new E(this.name+"_outAlbedo"),this),this.outEmissive=new T(new E(this.name+"_outEmissive"),this)}function er(t,e){N.call(this,"heightMap",e),this.heightMap=t,this.inEdgeFlag=new T(new Xt(0)),this.inEdgeMask=new T(new Kt(0)),this.inSampleStep=new T(new Kt(1/40)),this.inTileName=new T(new Zt(Yt.Companion.ZERO)),this.inRawTexCoord=new T(new Pt(Tt.Companion.NEG_X_AXIS)),this.inModelMat=new T(new Jt("_")),this.inTexCoord=new T(new Pt(Tt.Companion.NEG_X_AXIS)),this.inNormal=new T(new Ot($.Companion.Y_AXIS)),this.inTangent=new T(new Ot($.Companion.X_AXIS)),this.inPosition=new T(new Ot($.Companion.ZERO)),this.inStrength=new T(new Kt(.01)),this.inNrmStrength=new T(new Kt(5)),this.outPosition=new T(new ut(this.name+"_outPos"),this),this.outNormal=new T(new ut(this.name+"_outNrm"),this)}function ir(t){N.call(this,"spherePos",t),this.inModelMat_w1xlm7$_0=this.inModelMat_w1xlm7$_0,this.inTileName_k27s37$_0=this.inTileName_k27s37$_0,this.inXyPos_4u55yz$_0=this.inXyPos_4u55yz$_0,this.outPos=new T(new ut("outSpherePos"),this),this.outNrm=new T(new ut("outSphereNrm"),this),this.outTan=new T(new E("outSphereTangent"),this),this.outTex=new T(new Qt("outSphereTexCoord"),this);var e=new Et("uUnprojMat");e.value.setPerspective_7b5o5w$(90,1,1,10).invert_mx4ult$(),this.uUnprojMat=e}function nr(t,e){N.call(this,"earthRoughness",e),this.inAlbedo=t,this.outRoughness=new T(new te("earth_outRoughness"),this),this.outIsOcean=new T(new ee("earth_outIsOcean"),this)}function rr(t){N.call(this,"earthOcean",t),this.inOceanTex1_im4351$_0=this.inOceanTex1_im4351$_0,this.inAlbedo_by8fn6$_0=this.inAlbedo_by8fn6$_0,this.inIsOcean_ouocah$_0=this.inIsOcean_ouocah$_0,this.inNormal_wkcae8$_0=this.inNormal_wkcae8$_0,this.inBumpNormal_23nj62$_0=this.inBumpNormal_23nj62$_0,this.inTangent_lew4co$_0=this.inTangent_lew4co$_0,this.outColor=new T(new E("ocean_outColor"),this),this.outBumpNormal=new T(new ut("ocean_outBump"),this),this.uNormalShift=new ie("uNormalShift"),this.uWaterColor=new ne("uWaterColor")}function or(t){var i,n,r=new J,o=new xe;o.name="SkyPass",o.setDynamicSize(),o.addColorTexture_1yho43$(br),o.clearDepthTexture(),ce.call(this,r,new we(o)),this.atmosphereDemo=t,this.content=e.isType(i=this.drawNode,J)?i:tt();var a,l,u,p=this.atmosphereDemo.mainScene,c=new be(e.isType(n=p.camera,Q)?n:tt());this.camera=c,this.onBeforeCollectDrawCommands.add_11rb$((a=c,l=p,function(t){return a.sync_hrtwbc$(l.mainRenderPass.viewport,t),a.clipNear=5,a.clipFar=5e3,s})),this.lighting=p.lighting,p.addOffscreenPass_m1c2kf$(this),p.onRenderScene.add_11rb$((u=this,function(t,e){var i=t.mainRenderPass.viewport.width,n=t.mainRenderPass.viewport.height;return i>0&&n>0&&(i!==u.width||n!==u.height)&&u.resize_w70mbp$(i,n,e),s}));var h=this.content;h.isFrustumChecked=!1,this.setupSky_0(h)}function sr(t){return t.texCoord.x=1-t.texCoord.x,s}function ar(t){t.vertexModFun=sr;var e=(new bt).uvDefaults();return e.steps=10,t.uvSphere_mojs8w$(e),s}function lr(t){for(var e=new re(56498561),i=oe([m.Companion.WHITE,m.Companion.MD_BLUE.mix_y83vuj$(m.Companion.WHITE,.5),m.Companion.MD_PINK.mix_y83vuj$(m.Companion.WHITE,.5),m.Companion.MD_YELLOW.mix_y83vuj$(m.Companion.WHITE,.5)]),n=0;n<=3e4;n++){var r,o,a,l=t.geometry;l.checkBufferSizes_za3lpa$(),r=l.vertexSizeF;for(var u=1;u<=r;u++)l.dataF.plusAssign_mx4ult$(0);o=l.vertexSizeI;for(var p=1;p<=o;p++)l.dataI.plusAssign_za3lpa$(0);l.vertexIt.index=(a=l.numVertices,l.numVertices=a+1|0,a);var c,h=l.vertexIt;h.color.set_czzhhz$(t.color);for(var f=1,_=1;f*f+_*_>1;)f=e.randomF_dleff0$(-1,1),_=e.randomF_dleff0$(-1,1);h.position.set_y2kzbl$(1.5*f,e.randomF_dleff0$(-1,1),1.5*_),h.position.x=h.position.x-.25,h.position.norm();var $=e.randomF_dleff0$(.1,1);h.color.set_czzhhz$(i.getColor_y2kzbl$(e.randomF()).scale_749b7q$($,se())),d(h.getFloatAttribute_nm2vx5$(ae.Companion.ATTRIB_POINT_SIZE)).f=1+.75*j.pow($,3),t.transform.transform_w1lst9$(h.position),t.hasNormals&&0!==h.normal.sqrLength()&&(t.transform.transform_w1lst9$(h.normal,0),h.normal.norm()),null!=(c=t.vertexModFun)&&c(h),l.bounds.add_czzhiu$(l.vertexIt.position),l.hasChanged=!0,l.numVertices,t.geometry.addIndex_za3lpa$(n)}return s}function ur(t){var e=new R;return e.size.set_dleff0$(3,3),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.origin.z=-10,t.rect_e5k3t5$(e),s}function pr(t){var e=new R;return e.size.set_dleff0$(1,1),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.origin.z=-10,t.rect_e5k3t5$(e),s}function cr(t,e,i,n,r,o){return function(a){a.isFrustumChecked=!1,a.unaryPlus_uv0sim$(t),a.rotate_ad55pp$(-60,$.Companion.X_AXIS);var l=a.onUpdate,u=function(t,e,i,n){return function(r,o){var a,l,u=t.atmosphereDemo.atmoShader.atmosphereRadius-t.atmosphereDemo.atmoShader.surfaceRadius,p=t.atmosphereDemo.cameraHeight/u,c=1.25*((p<.2?.2:p>1?1:p)-.2),h=pt(t.atmosphereDemo.mainScene.camera.globalPos).norm(),f=1-(1-c)*(1-ue(.1,.3,h.times_czzhiu$(t.atmosphereDemo.sun.direction))),_=new m(f,f,f,1);if(d(e.v).color=_,d(i.v).color=_,d(n.v).color=_.withAlpha_mx4ult$(.75),null!=(l=null!=(a=e.v)?a.uPtSizeMod:null)){var $=t.width/1920;l.value=j.max(.6,$)}return s}}(e,i,n,r);return l.add_11rb$(u),a.unaryPlus_uv0sim$(o),s}}function hr(t){return function(e){e.isFrustumChecked=!1,e.unaryPlus_uv0sim$(new vr(t));var i=e.onUpdate,n=function(t,e){return function(i,n){return t.setIdentity(),t.rotate_ad55pp$(Dn().moonInclination,$.Companion.X_AXIS),t.rotate_ad55pp$(360*e.atmosphereDemo.moonTime,$.Companion.Y_AXIS),t.translate_y2kzbl$(0,0,Dn().moonDist),s}}(e,t);return i.add_11rb$(n),s}}function dr(t,e,i){return t.cullMethod=_e.NO_CULLING,t.depthTest=jt.DISABLED,s}function fr(){var t;$r(),wt.call(this,$r().cfg_0,$r().model_0),this.uPtSizeMod=null,this.onPipelineSetup.add_11rb$(yr),this.onPipelineCreated.add_11rb$((t=this,function(i,n,r){var o,a,l,u=t,p=t.model;t:do{var c;for(a=zt.ALL,c=p.stages.values.iterator();c.hasNext();){var h=c.next();if(0!=(h.stage.mask&a.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(St($.name,"uPtSizeMod")&&e.isType($,me)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,me)?d:tt();if(null!=y){l=y;break t}}}l=null}while(0);return u.uPtSizeMod=null!=(o=l)?o.uniform:null,s}))}function _r(){mr=this,this.cfg_0=new xt;var t,i,n=wt.Companion.defaultUnlitModel_ws3dmo$(this.cfg_0),r=new F(n);t:do{var o;for(t=zt.ALL,o=n.stages.values.iterator();o.hasNext();){var s=o.next();if(0!=(s.stage.mask&t.mask)){var a,l=s.nodes,u=M();for(a=l.iterator();a.hasNext();){var p=a.next();e.isType(p,Bt)&&u.add_11rb$(p)}var c=kt(u);if(null!=c){i=c;break t}}}i=null}while(0);var h=d(i),f=r.pushConstantNode1f_61zpoe$("uPtSizeMod").output;r.pointSize_r20yfm$(r.multiplyNode_ze33is$(r.attributeNode_nm2vx5$(ae.Companion.ATTRIB_POINT_SIZE).output,f).output),r.positionOutput=r.addNode_u9w9by$(new de(h,r.attrPositions().output,r.stage)).outPosition;var _,m,$=new B(n);t:do{var y;for(_=zt.ALL,y=n.stages.values.iterator();y.hasNext();){var v=y.next();if(0!=(v.stage.mask&_.mask)){var g,b=v.nodes,x=M();for(g=b.iterator();g.hasNext();){var w=g.next();e.isType(w,fe)&&x.add_11rb$(w)}var z=kt(x);if(null!=z){m=z;break t}}}m=null}while(0);var k=d(m),S=$.pushConstantNodeColor_61zpoe$("uColor").output,C=$.multiplyNode_ze33is$(k.outColor,S).output;$.colorOutput_a3v4si$($.gammaNode_ze33is$(C).outColor),this.model_0=n}Object.defineProperty(tr.prototype,"inNormal",{configurable:!0,get:function(){return null==this.inNormal_8wrcbj$_0?o("inNormal"):this.inNormal_8wrcbj$_0},set:function(t){this.inNormal_8wrcbj$_0=t}}),Object.defineProperty(tr.prototype,"inSunDir",{configurable:!0,get:function(){return null==this.inSunDir_3sjfkp$_0?o("inSunDir"):this.inSunDir_3sjfkp$_0},set:function(t){this.inSunDir_3sjfkp$_0=t}}),Object.defineProperty(tr.prototype,"inAlbedo",{configurable:!0,get:function(){return null==this.inAlbedo_bpcifj$_0?o("inAlbedo"):this.inAlbedo_bpcifj$_0},set:function(t){this.inAlbedo_bpcifj$_0=t}}),Object.defineProperty(tr.prototype,"inEmissive",{configurable:!0,get:function(){return null==this.inEmissive_rf58nj$_0?o("inEmissive"):this.inEmissive_rf58nj$_0},set:function(t){this.inEmissive_rf58nj$_0=t}}),tr.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inNormal,this.inSunDir,this.inAlbedo,this.inEmissive])},tr.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float "+this.name+"_mix = (clamp(dot("+this.inNormal+", "+this.inSunDir+"), -0.05, 0.05) + 0.05) * 10.0;\n            "+this.outAlbedo.declare()+" = "+this.inAlbedo+" * "+this.name+"_mix;\n            "+this.outEmissive.declare()+" = "+this.inEmissive+" * (1.0 - "+this.name+"_mix) * 0.6;\n        ")},tr.$metadata$={kind:P,simpleName:"EarthDayNightMixNode",interfaces:[N]},Yn.$metadata$={kind:P,simpleName:"EarthShader",interfaces:[Ft]},er.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inEdgeFlag,this.inEdgeMask,this.inSampleStep,this.inTileName,this.inRawTexCoord,this.inModelMat]),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inTangent,this.inPosition,this.inStrength])},er.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("calcBumpedNormal","\n            vec3 calcBumpedNormal(vec3 n, vec4 t, vec3 bumpN, float strength) {\n                vec3 normal = normalize(n);\n                vec3 tangent = normalize(t.xyz);\n                tangent = normalize(tangent - dot(tangent, normal) * normal);\n                vec3 bitangent = cross(normal, tangent) * t.w;\n                mat3 tbn = mat3(tangent, bitangent, normal);\n                return normalize(mix(normal, tbn * bumpN, strength));\n            }\n        "),t.appendFunction_puj7f4$("sampleEdgeHeight","\n            float sampleEdgeHeight(mat4 modelMat, vec3 tileName, vec2 baseUv, vec2 sampleDir) {\n                vec3 p1 = uv2localPos(tileName, baseUv - sampleDir);\n                vec3 p2 = uv2localPos(tileName, baseUv + sampleDir);\n\n                vec4 worldPos1 = modelMat * vec4(p1, 1.0);\n                vec4 worldPos2 = modelMat * vec4(p2, 1.0);\n\n                vec2 worldUv1 = vec2(atan(worldPos1.x, worldPos1.z) / "+Wt.PI+" * 0.5 + 0.5, acos(worldPos1.y) / "+Wt.PI+");\n                vec2 worldUv2 = vec2(atan(worldPos2.x, worldPos2.z) / "+Wt.PI+" * 0.5 + 0.5, acos(worldPos2.y) / "+Wt.PI+");\n\n                float h1 = "+t.sampleTexture2d_buzeal$(this.heightMap.name,"worldUv1")+".x;\n                float h2 = "+t.sampleTexture2d_buzeal$(this.heightMap.name,"worldUv2")+".x;\n                return (h1 + h2) * 0.5;\n            }\n        "),t.appendMain_61zpoe$("\n            vec2 "+this.name+"_uv = "+this.inTexCoord.ref2f_61zpoe$()+";\n            float "+this.name+"_hCt = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv")+".x;\n            float "+this.name+"_hLt = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv - vec2(1.0 / 8192.0, 0.0)")+".x;\n            float "+this.name+"_hRt = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv + vec2(1.0 / 8192.0, 0.0)")+".x;\n            float "+this.name+"_hUp = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv - vec2(0.0, 1.0 / 8192.0)")+".x;\n            float "+this.name+"_hDn = "+t.sampleTexture2d_buzeal$(this.heightMap.name,this.name+"_uv + vec2(0.0, 1.0 / 8192.0)")+".x;\n            \n            float "+this.name+"_dx = ("+this.name+"_hCt - "+this.name+"_hRt) + ("+this.name+"_hLt - "+this.name+"_hCt);\n            float "+this.name+"_dy = ("+this.name+"_hUp - "+this.name+"_hCt) + ("+this.name+"_hCt - "+this.name+"_hDn);\n            \n            vec3 "+this.name+"_bumpNrm = normalize(vec3("+this.name+"_dx * "+this.inNrmStrength.ref1f_61zpoe$()+", "+this.name+"_dy * "+this.inNrmStrength.ref1f_61zpoe$()+", 1.0));\n            vec3 "+this.name+"_bumpTan = "+this.inTangent.ref3f_61zpoe$()+";\n            vec3 "+this.name+"_localNrm = calcBumpedNormal("+this.inNormal.ref3f_61zpoe$()+", vec4("+this.name+"_bumpTan, 1.0), "+this.name+"_bumpNrm, 1.0);\n            "+this.outNormal.declare()+" = "+this.name+"_localNrm;\n            \n            float "+this.name+"_disp = 0.0;\n            int "+this.name+"_edge = "+this.inEdgeFlag.ref1i_61zpoe$()+" & int("+this.inEdgeMask.ref1f_61zpoe$()+");\n            if ("+this.name+"_edge == 0) {\n                "+this.name+"_disp = "+this.name+"_hCt * "+this.inStrength.ref1f_61zpoe$()+";\n            } else if ("+this.name+"_edge >= 4) {\n                // upper / lower edge\n                "+this.name+"_disp = sampleEdgeHeight("+this.inModelMat+", "+this.inTileName.ref3f_61zpoe$()+", "+this.inRawTexCoord.ref2f_61zpoe$()+", vec2("+this.inSampleStep.ref1f_61zpoe$()+", 0.0)) * "+this.inStrength.ref1f_61zpoe$()+";\n            } else if ("+this.name+"_edge >= 1) {\n                // left / right edge\n                "+this.name+"_disp = sampleEdgeHeight("+this.inModelMat+", "+this.inTileName.ref3f_61zpoe$()+", "+this.inRawTexCoord.ref2f_61zpoe$()+", vec2(0.0, "+this.inSampleStep.ref1f_61zpoe$()+")) * "+this.inStrength.ref1f_61zpoe$()+";\n            }\n            \n            "+this.outPosition.declare()+" = "+this.inPosition.ref3f_61zpoe$()+" * (1.0 + "+this.name+"_disp);\n        ")},er.$metadata$={kind:P,simpleName:"HeightMapNode",interfaces:[N]},Object.defineProperty(ir.prototype,"inModelMat",{configurable:!0,get:function(){return null==this.inModelMat_w1xlm7$_0?o("inModelMat"):this.inModelMat_w1xlm7$_0},set:function(t){this.inModelMat_w1xlm7$_0=t}}),Object.defineProperty(ir.prototype,"inTileName",{configurable:!0,get:function(){return null==this.inTileName_k27s37$_0?o("inTileName"):this.inTileName_k27s37$_0},set:function(t){this.inTileName_k27s37$_0=t}}),Object.defineProperty(ir.prototype,"inXyPos",{configurable:!0,get:function(){return null==this.inXyPos_4u55yz$_0?o("inXyPos"):this.inXyPos_4u55yz$_0},set:function(t){this.inXyPos_4u55yz$_0=t}}),ir.prototype.setup_llmhyc$=function(t){var e;N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inModelMat,this.inTileName,this.inXyPos]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uUnprojMat}}(e)),s}))},ir.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("uv2localPos","\n            vec3 uv2localPos(vec3 tileName, vec2 uv) {\n                float tileScale = 1.0 / tileName.z;\n                vec2 tilePos = tileName.xy;\n                tilePos.x = tileName.z - 1.0 - tilePos.x;\n                vec2 projCoord = tilePos * tileScale + uv * tileScale;\n                projCoord = projCoord * 2.0 - 1.0;\n\n                vec4 unproj = uUnprojMat * vec4(projCoord, 1.0, 1.0);\n                return normalize(unproj.xyz / unproj.w * -1.0);\n            }\n        "),t.appendMain_61zpoe$("\n            vec2 "+this.name+"_uv = "+this.inXyPos.ref2f_61zpoe$()+";\n            "+this.name+"_uv.x = (1.0 - "+this.inTileName+".w) + "+this.name+"_uv.x * "+this.inTileName+".w;\n            \n            "+this.outNrm.declare()+" = uv2localPos("+this.inTileName.ref3f_61zpoe$()+", "+this.name+"_uv);\n            "+this.outPos.declare()+" = "+this.outNrm+" * 60.0;\n            \n            vec3 "+this.name+"_worldNrm = ("+this.inModelMat+" * vec4("+this.outNrm+", 0.0)).xyz;\n            vec3 "+this.name+"_worldTan = normalize(cross(vec3(0.0, 1.0, 0.0), "+this.name+"_worldNrm));\n            "+this.outTan.declare()+" = vec4(transpose(mat3("+this.inModelMat+")) * "+this.name+"_worldTan, 1.0);\n            "+this.outTex.declare()+" = vec2(atan("+this.name+"_worldNrm.x, "+this.name+"_worldNrm.z) / "+Wt.PI+" * 0.5 + 0.5, acos("+this.name+"_worldNrm.y) / "+Wt.PI+");\n        ")},ir.$metadata$={kind:P,simpleName:"SpherePosNode",interfaces:[N]},nr.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inAlbedo)},nr.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float "+this.name+"_relBlue = min("+this.inAlbedo+".b - "+this.inAlbedo+".r, "+this.inAlbedo+".b - "+this.inAlbedo+".g) / "+this.inAlbedo+".b;\n            float "+this.name+"_brightness = dot("+this.inAlbedo+".rgb, vec3(0.333));\n            \n            "+this.outRoughness.declare()+" = 1.0 - (0.3 + "+this.name+"_brightness * 0.4);\n            bool "+this.outIsOcean+" = "+this.name+"_relBlue > 0.2 || "+this.name+"_brightness < 0.002;\n            if ("+this.outIsOcean+") {\n                "+this.outRoughness+" = 0.22;\n            }\n        ")},nr.$metadata$={kind:P,simpleName:"EarthRoughnessNode",interfaces:[N]},Object.defineProperty(rr.prototype,"inOceanTex1",{configurable:!0,get:function(){return null==this.inOceanTex1_im4351$_0?o("inOceanTex1"):this.inOceanTex1_im4351$_0},set:function(t){this.inOceanTex1_im4351$_0=t}}),Object.defineProperty(rr.prototype,"inAlbedo",{configurable:!0,get:function(){return null==this.inAlbedo_by8fn6$_0?o("inAlbedo"):this.inAlbedo_by8fn6$_0},set:function(t){this.inAlbedo_by8fn6$_0=t}}),Object.defineProperty(rr.prototype,"inIsOcean",{configurable:!0,get:function(){return null==this.inIsOcean_ouocah$_0?o("inIsOcean"):this.inIsOcean_ouocah$_0},set:function(t){this.inIsOcean_ouocah$_0=t}}),Object.defineProperty(rr.prototype,"inNormal",{configurable:!0,get:function(){return null==this.inNormal_wkcae8$_0?o("inNormal"):this.inNormal_wkcae8$_0},set:function(t){this.inNormal_wkcae8$_0=t}}),Object.defineProperty(rr.prototype,"inBumpNormal",{configurable:!0,get:function(){return null==this.inBumpNormal_23nj62$_0?o("inBumpNormal"):this.inBumpNormal_23nj62$_0},set:function(t){this.inBumpNormal_23nj62$_0=t}}),Object.defineProperty(rr.prototype,"inTangent",{configurable:!0,get:function(){return null==this.inTangent_lew4co$_0?o("inTangent"):this.inTangent_lew4co$_0},set:function(t){this.inTangent_lew4co$_0=t}}),rr.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inIsOcean,this.inNormal,this.inBumpNormal,this.inTangent]);var e,i=t.pushConstants;i.unaryPlus_wq3w46$((e=this,function(){return e.uNormalShift})),i.unaryPlus_wq3w46$(function(t){return function(){return t.uWaterColor}}(this))},rr.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("cubeUv","\n                vec2 cubeUv(vec3 normal) {\n                    vec3 absN = abs(normal);\n                    float maxAxis = 1.0;\n                    vec2 uvc = vec2(1.0, 1.0);\n                    \n                    if (absN.x > absN.y && absN.x > absN.z) {\n                        maxAxis = absN.x;\n                        uvc = vec2(-normal.z * sign(normal.x), -normal.y);\n                    } else if (absN.y > absN.x && absN.y > absN.z) {\n                        maxAxis = absN.y;\n                        uvc = vec2(normal.x, normal.z * sign(normal.y));\n                    } else {\n                        maxAxis = absN.z;\n                        uvc = vec2(normal.x * sign(normal.z), -normal.y);\n                    }\n                    return 0.5 * (uvc / maxAxis + 1.0);\n                }\n            "),t.appendMain_61zpoe$("\n                "+this.outColor.declare()+" = "+this.inAlbedo.ref4f_61zpoe$()+";\n                "+this.outBumpNormal.declare()+" = "+this.inBumpNormal.ref3f_61zpoe$()+";\n                if ("+this.inIsOcean+") {\n                    vec2 oceanUvBase = cubeUv(normalize("+this.inNormal.ref3f_61zpoe$()+"));\n                    float s = 800.0;\n                    vec2 oceanUv1 = oceanUvBase * vec2(1.0 * s, 1.5 * s) + "+this.uNormalShift+".xy;\n                    vec2 oceanUv2 = oceanUvBase * vec2(1.69751 * s, 1.27841 * s) + "+this.uNormalShift+".zw;\n                    vec2 oceanUvStrength = oceanUvBase;\n                    \n                    vec3 oceanNrm1 = "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUv1")+".rgb * 2.0 - 1.0;\n                    vec3 oceanNrm2 = "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUv2")+".rgb * 2.0 - 1.0;\n                    vec3 oceanNrm = oceanNrm1 + oceanNrm2;\n                    float nrmStrength = smoothstep(0.3, 0.6, "+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUvStrength")+".r) * 0.7 + 0.3;\n                    oceanNrm.xy *= nrmStrength;\n                    \n                    //"+this.outColor+" = vec4("+t.sampleTexture2d_buzeal$(this.inOceanTex1.name,"oceanUvBase")+".rgb, 1.0);\n                    "+this.outColor+" = "+this.uWaterColor+";\n                    "+this.outBumpNormal+" = calcBumpedNormal("+this.inBumpNormal.ref3f_61zpoe$()+", "+this.inTangent.ref4f_61zpoe$()+", normalize(oceanNrm), 0.4);\n                }\n            ")},rr.$metadata$={kind:P,simpleName:"EarthOceanNode",interfaces:[N]},or.prototype.setupSky_0=function(t){var e,i,n,r,o=this.atmosphereDemo.textures,a={v:null},l={v:null},u={v:null},p=b(void 0,void 0,(e=o,i=this,n=a,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(ar),n.v=i.skyboxShader_0(e.get_11rb$(Dn().texMilkyway)),t.shader=n.v,s})),c=le(void 0,(r=l,function(t){return t.isFrustumChecked=!1,t.generate_v2sixm$(lr),r.v=new fr,t.shader=r.v,s})),h=b(void 0,void 0,function(t,e,i){return function(n){return n.isFrustumChecked=!1,n.generate_v2sixm$(ur),i.v=e.skyboxShader_0(t.get_11rb$(Dn().texSunBg)),n.shader=i.v,s}}(o,this,u)),d=b(void 0,void 0,function(t,e){return function(i){return i.isFrustumChecked=!1,i.generate_v2sixm$(pr),i.shader=e.skyboxShader_0(t.get_11rb$(Dn().texSun)),s}}(o,this));t.unaryPlus_uv0sim$(pe(void 0,cr(p,this,l,a,u,c))),t.unaryPlus_uv0sim$(h),t.unaryPlus_uv0sim$(d),t.unaryPlus_uv0sim$(pe("moonGroup",hr(this)))},or.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ce.prototype.dispose_aemszp$.call(this,t)},or.prototype.skyboxShader_0=function(t){var i=new xt;i.alphaMode=new he,i.useColorMap_vzjalu$(t,!0),i.color=m.Companion.WHITE;var n,r,o=i,s=wt.Companion.defaultUnlitModel_ws3dmo$(o),a=new F(s);t:do{var l;for(n=zt.ALL,l=s.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&n.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,Bt)&&h.add_11rb$(f)}var _=kt(h);if(null!=_){r=_;break t}}}r=null}while(0);var $=d(r);a.positionOutput=a.addNode_u9w9by$(new de($,a.attrPositions().output,a.stage)).outPosition;var y,v,g=new B(s);t:do{var b;for(y=zt.ALL,b=s.stages.values.iterator();b.hasNext();){var x=b.next();if(0!=(x.stage.mask&y.mask)){var w,z=x.nodes,k=M();for(w=z.iterator();w.hasNext();){var S=w.next();e.isType(S,fe)&&k.add_11rb$(S)}var C=kt(k);if(null!=C){v=C;break t}}}v=null}while(0);var N=d(v);g.colorOutput_a3v4si$(g.gammaNode_ze33is$(N.outColor).outColor);var E=new wt(o,s);return E.onPipelineSetup.add_11rb$(dr),E},_r.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var mr=null;function $r(){return null===mr&&new _r,mr}function yr(t,e,i){return t.depthTest=jt.DISABLED,s}function vr(t){this.$outer=t,ve.call(this,ye([$e.Companion.POSITIONS,$e.Companion.NORMALS,$e.Companion.TEXTURE_COORDS]),"moon"),this.isFrustumChecked=!1,this.generate_v2sixm$(gr);var e,i=v((e=this.$outer,function(t){return t.useAlbedoMap_vzjalu$(e.atmosphereDemo.textures.get_11rb$(Dn().texMoon)),t.roughness=.7,t.isHdrOutput=!0,s}));i.ambient=new m(.05,.05,.05).toLinear(),this.shader=i}function gr(t){t.rotate_ad55pp$(180,$.Companion.Y_AXIS);var e=(new bt).icoDefaults();return e.steps=4,e.radius=Dn().moonRadius,t.icoSphere_mojs8w$(e),s}function br(t){return t.colorFormat=G.RGBA_F16,t.minFilter=ge.NEAREST,t.magFilter=ge.NEAREST,s}function xr(){var t;Tr(),ve.call(this,new Ne(Ce([$e.Companion.POSITIONS,$e.Companion.NORMALS,$e.Companion.TANGENTS,$e.Companion.TEXTURE_COORDS,Tr().ATTRIB_EDGE_FLAG]))),this.tiles_0=null,this.zoomColors_0=Ce([Ee(m.Companion.MD_PURPLE).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_RED).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_AMBER).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_LIGHT_GREEN).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_BLUE).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_DEEP_PURPLE).mix_y83vuj$(m.Companion.WHITE,.6).toLinear(),Ee(m.Companion.MD_PINK).mix_y83vuj$(m.Companion.WHITE,.6).toLinear()]),this.front_0=new Cr(this,Ee(m.Companion.MD_RED)),this.back_0=new Cr(this,Ee(m.Companion.MD_GREEN)),this.right_0=new Cr(this,Ee(m.Companion.MD_BLUE)),this.left_0=new Cr(this,Ee(m.Companion.MD_YELLOW)),this.top_0=new Cr(this,Ee(m.Companion.MD_CYAN)),this.bottom_0=new Cr(this,Ee(m.Companion.MD_PURPLE)),this.faces_0=Ce([this.front_0,this.back_0,this.left_0,this.right_0,this.top_0,this.bottom_0]),this.centerFace_0=null,this.centerTileName_0=se(),this.oldCenterTileName_0=se(),this.tmpTileName_0=se(),this.isFrustumChecked=!1,this.front_0.up=this.top_0,this.front_0.right=this.right_0,this.front_0.down=this.bottom_0,this.front_0.left=this.left_0,this.right_0.up=this.top_0,this.right_0.right=this.back_0,this.right_0.down=this.bottom_0,this.right_0.left=this.front_0,this.back_0.up=this.top_0,this.back_0.right=this.left_0,this.back_0.down=this.bottom_0,this.back_0.left=this.right_0,this.left_0.up=this.top_0,this.left_0.right=this.front_0,this.left_0.down=this.bottom_0,this.left_0.left=this.back_0,this.top_0.up=this.back_0,this.top_0.right=this.right_0,this.top_0.down=this.front_0,this.top_0.left=this.left_0,this.bottom_0.up=this.front_0,this.bottom_0.right=this.right_0,this.bottom_0.down=this.back_0,this.bottom_0.left=this.left_0,this.generate_v2sixm$((t=this,function(e){return t.tileGrid_0(e,40),s})),this.tiles_0=new Se(Tr().INSTANCE_ATTRIBUTES_0),this.instances=this.tiles_0}function wr(t,e,i,n){Sr(),this.left=t,this.right=e,this.top=i,this.bottom=n}function zr(){kr=this,this.NO_EDGE=new wr(2147483647,2147483647,2147483647,2147483647)}fr.$metadata$={kind:P,simpleName:"StarShader",interfaces:[wt]},vr.$metadata$={kind:P,simpleName:"Moon",interfaces:[ve]},or.$metadata$={kind:P,simpleName:"SkyPass",interfaces:[ce]},xr.prototype.tileGrid_0=function(t,e){for(var i=e+1|0,n=0;n<=e;n++)for(var r=0;r<=e;r++){var o,s,a,l=t.geometry;l.checkBufferSizes_za3lpa$(),o=l.vertexSizeF;for(var u=1;u<=o;u++)l.dataF.plusAssign_mx4ult$(0);s=l.vertexSizeI;for(var p=1;p<=s;p++)l.dataI.plusAssign_za3lpa$(0);l.vertexIt.index=(a=l.numVertices,l.numVertices=a+1|0,a);var c,h,f=l.vertexIt;f.color.set_czzhhz$(t.color),f.texCoord.set_dleff0$(r/e,n/e),h=0===r&&n%2==1?2:r===e&&n%2==1?1:0===n&&r%2==1?4:n===e&&r%2==1?8:0,d(f.getIntAttribute_nm2vx5$(Tr().ATTRIB_EDGE_FLAG)).i=h,t.transform.transform_w1lst9$(f.position),t.hasNormals&&0!==f.normal.sqrLength()&&(t.transform.transform_w1lst9$(f.normal,0),f.normal.norm()),null!=(c=t.vertexModFun)&&c(f),l.bounds.add_czzhiu$(l.vertexIt.position),l.hasChanged=!0;var _=l.numVertices-1|0;r>0&&n>0&&(r%2==n%2?(t.geometry.addTriIndices_qt1dr2$(_-i-1|0,_,_-1|0),t.geometry.addTriIndices_qt1dr2$(_-i|0,_,_-i-1|0)):(t.geometry.addTriIndices_qt1dr2$(_-i|0,_,_-1|0),t.geometry.addTriIndices_qt1dr2$(_-i|0,_-1|0,_-i-1|0)))}},xr.prototype.updateTiles_czzhiu$=function(t){var e,i,n,r=this.toLocalCoords_w1lst9$(pt(t),1),o=r.length();if(0!==o){var s=pt(r).scale_mx4ult$(1/o),a=this.cubeFaceUv_0(s),l=a.component1(),u=a.component2(),p=$t(64*l.x),c=$t(64*l.y);if(this.encodeTileName_0(p,c,6,this.centerTileName_0),null==(e=this.centerTileName_0)||!e.equals(this.oldCenterTileName_0)){this.oldCenterTileName_0.set_czzhhz$(this.centerTileName_0),u!==this.centerFace_0&&(this.centerFace_0=u,this.applyRotations_0()),this.tiles_0.clear(),i=this.faces_0;for(var h=0;h!==i.size;++h)this.faces_0.get_za3lpa$(h).tileCnt=0;u.addTile_75mr7i$(p,c,6,Sr().NO_EDGE),u.buildGrid_4qozqa$(p,c,1,1,6),n=this.faces_0;for(var d=0;d!==n.size;++d)0===this.faces_0.get_za3lpa$(d).tileCnt&&this.faces_0.get_za3lpa$(d).addTile_75mr7i$(0,0,0,Sr().NO_EDGE)}}},xr.prototype.applyRotations_0=function(){this.front_0.mat.setIdentity(),this.back_0.mat.setIdentity(),this.left_0.mat.setIdentity(),this.right_0.mat.setIdentity(),this.top_0.mat.setIdentity(),this.bottom_0.mat.setIdentity(),this.centerFace_0===this.right_0?(this.top_0.mat.rotate_ad55pp$(90,$.Companion.Y_AXIS),this.bottom_0.mat.rotate_ad55pp$(90,$.Companion.Y_AXIS)):this.centerFace_0===this.left_0?(this.top_0.mat.rotate_ad55pp$(-90,$.Companion.Y_AXIS),this.bottom_0.mat.rotate_ad55pp$(-90,$.Companion.Y_AXIS)):this.centerFace_0===this.back_0?(this.top_0.mat.rotate_ad55pp$(180,$.Companion.Y_AXIS),this.bottom_0.mat.rotate_ad55pp$(180,$.Companion.Y_AXIS)):this.centerFace_0===this.top_0?(this.right_0.mat.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),this.back_0.mat.rotate_ad55pp$(180,$.Companion.Z_AXIS),this.left_0.mat.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS)):this.centerFace_0===this.bottom_0&&(this.right_0.mat.rotate_ad55pp$(90,$.Companion.X_AXIS),this.back_0.mat.rotate_ad55pp$(180,$.Companion.Z_AXIS),this.left_0.mat.rotate_ad55pp$(90,$.Companion.X_AXIS)),this.right_0.mat.rotate_ad55pp$(90,$.Companion.Y_AXIS),this.back_0.mat.rotate_ad55pp$(180,$.Companion.Y_AXIS),this.left_0.mat.rotate_ad55pp$(270,$.Companion.Y_AXIS),this.top_0.mat.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),this.bottom_0.mat.rotate_ad55pp$(-90,$.Companion.NEG_X_AXIS)},wr.prototype.getEdgeMask_vux9f0$=function(t,e){var i=0;return t===this.left&&(i|=1),t===this.right&&(i|=2),e===this.top&&(i|=4),e===this.bottom&&(i|=8),i},zr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var kr=null;function Sr(){return null===kr&&new zr,kr}function Cr(t,e){this.$outer=t,this.faceColor=e,this.up=null,this.right=null,this.down=null,this.left=null,this.mat=new ze,this.tileCnt=0}function Nr(){Er=this,this.TILE_GRID_SIZE=40,this.EDGE_LEFT=1,this.EDGE_RIGHT=2,this.EDGE_TOP=4,this.EDGE_BOTTOM=8,this.ATTRIB_EDGE_FLAG=new $e("aEdgeFlag",ke.INT),this.ATTRIB_EDGE_MASK=new $e("aEdgeMask",ke.FLOAT),this.ATTRIB_TILE_NAME=new $e("aTileName",ke.VEC_4F),this.INSTANCE_ATTRIBUTES_0=Ce([Se.Companion.MODEL_MAT,this.ATTRIB_TILE_NAME,this.ATTRIB_EDGE_MASK,$e.Companion.COLORS])}wr.$metadata$={kind:P,simpleName:"ZoomLevelEdge",interfaces:[]},Cr.prototype.buildGrid_4qozqa$=function(t,e,i,n,r){var o=t-1|0,s=t+i|0,a=e-1|0,l=e+n|0,u=o%2!=0?o-1|0:o,p=s%2==0?s+1|0:s,c=a%2!=0?a-1|0:a,h=l%2==0?l+1|0:l,d=new wr(u,p,c,h);this.addTileRow_gdy3kc$(o,s,a,r,d),this.addTileRow_gdy3kc$(o,s,l,r,d),this.addTileCol_gdy3kc$(a,l,o,r,d),this.addTileCol_gdy3kc$(a,l,s,r,d),o!==u&&this.addTileCol_gdy3kc$(a,l,u,r,d),s!==p&&this.addTileCol_gdy3kc$(a,l,p,r,d),a!==c&&this.addTileRow_gdy3kc$(u,p,c,r,d),l!==h&&this.addTileRow_gdy3kc$(u,p,h,r,d),r>1&&this.buildGrid_4qozqa$(u/2|0,c/2|0,(p-u+1|0)/2|0,(h-c+1|0)/2|0,r-1|0)},Cr.prototype.addTileRow_gdy3kc$=function(t,e,i,n,r){for(var o=t;o<=e;o++)this.addTile_75mr7i$(o,i,n,r)},Cr.prototype.addTileCol_gdy3kc$=function(t,e,i,n,r){for(var o=t;o<=e;o++)this.addTile_75mr7i$(i,o,n,r)},Cr.prototype.addTile_75mr7i$=function(t,e,i,n,r,o){var s,a,l,u;void 0===r&&(r=0),void 0===o&&(o=0);var p=n.getEdgeMask_vux9f0$(t,e),c=t+r|0,h=e+o|0,d=1<<i;if(0<=c&&c<d&&0<=h&&h<d){this.tileCnt=this.tileCnt+1|0;var f=this.$outer.tiles_0;this.$outer,f.checkBufferSize_za3lpa$();var _=f.dataF.position,m=this.$outer,$=f.dataF;$.put_q3cr5i$(this.mat.matrix),$.put_q3cr5i$(m.encodeTileName_0(c,h,i,m.tmpTileName_0).array),$.put_mx4ult$(p),$.put_q3cr5i$(m.zoomColors_0.get_za3lpa$(i).array);var y=f.dataF.position-_|0;if(y!==f.instanceSizeF)throw Te("Expected data to grow by "+f.instanceSizeF+" elements, instead it grew by "+y);f.numInstances=f.numInstances+1|0,f.hasChanged=!0}else(0|-d)<=t&&t<0&&0<=e&&e<d?null!=(s=this.left)&&s.addTile_75mr7i$(t,e,i,n,d):d<=t&&t<(2*d|0)&&0<=e&&e<d?null!=(a=this.right)&&a.addTile_75mr7i$(t,e,i,n,0|-d):0<=t&&t<d&&(0|-d)<=e&&e<0?null!=(l=this.up)&&l.addTile_75mr7i$(t,e,i,n,void 0,d):0<=t&&t<d&&d<=e&&e<(2*d|0)&&null!=(u=this.down)&&u.addTile_75mr7i$(t,e,i,n,void 0,0|-d)},Cr.$metadata$={kind:P,simpleName:"Face",interfaces:[]},xr.prototype.encodeTileName_0=function(t,e,i,n){var r=1<<i,o=t===((r/2|0)-1|0)?.99999:1;return n.set_7b5o5w$(t,e,r,o)},xr.prototype.cubeFaceUv_0=function(t){var e,i,n,r,o=t.x,s=j.abs(o),a=t.y,l=j.abs(a),u=t.z,p=j.abs(u);if(s>l&&s>p){e=s;var c=-t.z,h=t.x;i=c*j.sign(h),n=-t.y,r=t.x>0?this.right_0:this.left_0}else if(l>s&&l>p){e=l,i=t.x;var d=t.z,f=t.y;n=d*j.sign(f),r=t.y>0?this.top_0:this.bottom_0}else{e=p;var _=t.x,m=t.z;i=_*j.sign(m),n=-t.y,r=t.z>0?this.front_0:this.back_0}return ot(new Tt(.5*(i/e+1),.5*(n/e+1)),r)},Nr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Er=null;function Tr(){return null===Er&&new Nr,Er}function Pr(t,e){return We(void 0,void 0,void 0,(i=t,n=e,function(t,e){var r=new Or(e,t,i);return n(r),r.finish(),s}));var i,n}function Or(t,e,i){this.uiScene=t,this.uiRoot=e,this.menuWidth=300,this.menuHeight=0,this.menuContainer=null,this.menuY=-40,this.smallFontProps_0=new Ze(Ye.Companion.SYSTEM_FONT,14),this.smallFont=null;var n=this.uiRoot;this.smallFont=Je(this.smallFontProps_0.family,this.smallFontProps_0.sizePts,n.uiDpi,i,this.smallFontProps_0.style,this.smallFontProps_0.chars),n.theme=ei(Qe.Companion.DARK,Br),this.menuContainer=n.container_t34sov$("menu",Ur),n.unaryPlus_uv0sim$(this.menuContainer)}function Mr(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.menuY),ct()),i.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),i.textAlignment=new _t(ft.START,ft.CENTER);var n=i.onClick,r=function(t){return function(e,i,n,r){return t(e),s}}(e);return n.add_11rb$(r),s}}function jr(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ht(15),Xe(t.menuY),ct()),n.layoutSpec.setSize_4ujscr$(ht(70),Xe(35),dt()),n.text=Ke(e.current);var r=n.onClick,o=function(t,e){return function(i,n,r,o){var a=t.current;return i.text=Ke(t.next()),e(t.current,a),s}}(e,i);return r.add_11rb$(o),s}}function Ar(t,e,i,n){return function(r){r.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.menuY),ct()),r.layoutSpec.setSize_4ujscr$(ht(20),Xe(35),dt()),r.text="<";var o=r.onClick,a=function(t,e,i){return function(n,r,o,a){var l=t.current;return e.text=Ke(t.prev()),i(t.current,l),s}}(e,i,n);return o.add_11rb$(a),s}}function Ir(t,e,i,n){return function(r){r.layoutSpec.setOrigin_4ujscr$(ht(80),Xe(t.menuY),ct()),r.layoutSpec.setSize_4ujscr$(ht(20),Xe(35),dt()),r.text=">";var o=r.onClick,a=function(t,e,i){return function(n,r,o,a){var l=t.current;return e.text=Ke(t.next()),i(t.current,l),s}}(e,i,n);return o.add_11rb$(a),s}}function Rr(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.menuY),ct()),i.layoutSpec.setSize_4ujscr$(ht(100),Xe(35),dt());var n=i.onValueChanged,r=function(t){return function(e,i){return t(e),s}}(e);return n.add_11rb$(r),s}}function Lr(t,e,i,n){return function(r){r.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.menuY),ct()),r.layoutSpec.setSize_4ujscr$(ht(100),Xe(35),dt());var o=r.onValueChanged,a=function(t,e,i){return function(n,r){return e.text=t(n.value),i(n),s}}(e,i,n);return o.add_11rb$(a),s}}function Dr(t,e,i,n,r,o){return function(a){a.layoutSpec.setOrigin_4ujscr$(ht(t),Xe(e.menuY),ct()),a.layoutSpec.setSize_4ujscr$(ht(100-t-i),Xe(35),dt());var l=a.onValueChanged,u=function(t,e,i){return function(n,r){return e.text=t(n.value),i(n),s}}(n,r,o);return l.add_11rb$(u),s}}function qr(t){return new ti}function Fr(t){return new ti}function Br(t){return t.componentUi_mloaa0$(qr),t.containerUi_2t3ptw$(Fr),s}function Ur(t){return t.ui.setCustom_11rb$(new ii(t)),s}function Vr(t,e){var i,n,r;Wr(),J.call(this),this.relativeX=.05,this.relativeY=.05,this.relativeWidth=.33,this.aspectRatio=Wr().ASPECT_RATIO_VIEWPORT,this.unaryPlus_uv0sim$(b("image",void 0,(i=e,n=t,function(t){return t.generate_v2sixm$(Xr),t.shader=null!=i?i:new S(n),s}))),this.onUpdate.add_11rb$((r=this,function(t,e){var i=r.aspectRatio!==Wr().ASPECT_RATIO_VIEWPORT?r.aspectRatio:e.viewport.aspectRatio,n=e.viewport.width*r.relativeWidth,o=n/i;r.setIdentity();var a=e.viewport.width*r.relativeX,l=e.viewport.height*r.relativeY;return r.translate_y2kzbl$(a,l,0),r.scale_y2kzbl$(n,o,1),s}))}function Gr(){Hr=this,this.ASPECT_RATIO_VIEWPORT=0}xr.$metadata$={kind:P,simpleName:"SphereGridSystem",interfaces:[ve]},Or.prototype.button_9zrh0o$=function(t,e){var i={v:null};return i.v=this.uiRoot.button_9zrh0o$(t,Mr(this,e)),this.menuContainer.plusAssign_f1kmr1$(i.v),this.menuY-=35,i.v},Or.prototype.cycler_4ni5b8$=function(t,e,i){var n,r=this.uiRoot,o=this.menuContainer;null!=t&&(o.unaryPlus_uv0sim$(r.label_tokfmu$(t,(n=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(n.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(100),Xe(35),dt()),s}))),this.menuY-=35);var a=r.button_9zrh0o$("cycler-main",jr(this,e,i));o.unaryPlus_uv0sim$(a),o.unaryPlus_uv0sim$(r.button_9zrh0o$("cycle-left",Ar(this,e,a,i))),o.unaryPlus_uv0sim$(r.button_9zrh0o$("cycle-right",Ir(this,e,a,i))),this.menuY-=35},Or.prototype.gap_mx4ult$=function(t){this.menuY-=t},Or.prototype.image_vf5tfk$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i={v:null},n=this.uiRoot;return i.v=new Vr(t,e),n.unaryPlus_uv0sim$(i.v),i.v},Or.prototype.section_yfmn31$=function(t,e){this.title_61zpoe$(t),e(this)},Or.prototype.slider_d5clx2$=function(t,e,i,n){var r={v:null},o=this.uiRoot,s=this.menuContainer;return r.v=o.slider_91a1dk$("radiusSlider",e,i,t,Rr(this,n)),s.unaryPlus_uv0sim$(r.v),this.menuY-=35,r.v},Or.prototype.sliderWithValue_xbu91d$=function(t,e,i,n,r,o,a){var l;void 0===r&&(r=2),void 0===o&&(l=r,o=function(t){return mt(t,l)});var u,p={v:null},c=this.uiRoot,h=this.menuContainer;h.unaryPlus_uv0sim$(c.label_tokfmu$(t,(u=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(u.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(75),Xe(35),dt()),s})));var d=c.label_tokfmu$(o(e),function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(ht(75),Xe(t.menuY),ct()),e.layoutSpec.setSize_4ujscr$(ht(25),Xe(35),dt()),e.textAlignment=new _t(ft.END,ft.CENTER),s}}(this));return h.unaryPlus_uv0sim$(d),this.menuY-=35,p.v=c.slider_91a1dk$("slider",i,n,e,Lr(this,o,d,a)),h.unaryPlus_uv0sim$(p.v),this.menuY-=35,p.v},Or.prototype.sliderWithValueSmall_jjtbof$=function(t,e,i,n,r,o,a,l,u){var p;void 0===r&&(r=2),void 0===o&&(p=r,o=function(t){return mt(t,p)}),void 0===a&&(a=15),void 0===l&&(l=15);var c,h,d={v:null},f=this.uiRoot,_=this.menuContainer;_.unaryPlus_uv0sim$(f.label_tokfmu$(t,(c=this,h=a,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(c.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(h),Xe(35),dt()),s})));var m=f.label_tokfmu$(o(e),function(t,e){return function(i){return i.layoutSpec.setOrigin_4ujscr$(ht(100-t),Xe(e.menuY),ct()),i.layoutSpec.setSize_4ujscr$(ht(t),Xe(35),dt()),i.textAlignment=new _t(ft.END,ft.CENTER),s}}(l,this));return _.unaryPlus_uv0sim$(m),d.v=f.slider_91a1dk$("slider",i,n,e,Dr(a,this,l,o,m,u)),_.unaryPlus_uv0sim$(d.v),this.menuY-=35,d.v},Or.prototype.text_61zpoe$=function(t){var e,i={v:null};return i.v=this.uiRoot.label_tokfmu$(t,(e=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(e.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),s})),this.menuContainer.plusAssign_f1kmr1$(i.v),this.menuY-=35,i.v},Or.prototype.textWithValue_puj7f4$=function(t,e){var i,n={v:null},r=this.uiRoot;return this.menuContainer.plusAssign_f1kmr1$(r.label_tokfmu$(t,(i=this,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(i.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(50),Xe(30),dt()),s}))),n.v=r.label_tokfmu$(e,function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(ht(50),Xe(t.menuY),ct()),e.layoutSpec.setSize_4ujscr$(ht(50),Xe(30),dt()),e.textAlignment=new _t(ft.END,ft.CENTER),s}}(this)),this.menuContainer.plusAssign_f1kmr1$(n.v),this.menuY-=35,n.v},Or.prototype.title_61zpoe$=function(t){var e,i,n={v:null},r=this.uiRoot;return n.v=r.label_tokfmu$(t.toUpperCase(),(e=this,i=r,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(e.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),t.font.setCustom_11rb$(e.smallFont),t.textColor.setCustom_11rb$(i.theme.accentColor),t.textAlignment=new _t(ft.CENTER,ft.CENTER),s})),this.menuContainer.plusAssign_f1kmr1$(n.v),this.menuY-=35,n.v},Or.prototype.toggleButton_8v9fdr$=function(t,e,i){var n,r,o,a={v:null};return a.v=this.uiRoot.toggleButton_6j87po$(t,(n=this,r=e,o=i,function(t){t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(n.menuY),ct()),t.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),t.isEnabled=r;var e=t.onStateChange,i=o;return e.add_11rb$(i),s})),this.menuContainer.plusAssign_f1kmr1$(a.v),this.menuY-=35,a.v},Or.prototype.finish=function(){var t=this.menuContainer;0===this.menuHeight&&(this.menuHeight=-this.menuY-20),t.layoutSpec.setOrigin_4ujscr$(Xe(-this.menuWidth-120),Xe(-this.menuHeight-120),ct()),t.layoutSpec.setSize_4ujscr$(Xe(this.menuWidth),Xe(this.menuHeight),dt())},Or.$metadata$={kind:P,simpleName:"ControlUiBuilder",interfaces:[]},Gr.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Hr=null;function Wr(){return null===Hr&&new Gr,Hr}function Xr(t){var e=new R;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Kr(){fo(),Fo.call(this,"Deferred Shading"),this.deferredPipeline_4e1hwv$_0=this.deferredPipeline_4e1hwv$_0,this.objects_v6o6kw$_0=this.objects_v6o6kw$_0,this.objectShader_kt711w$_0=this.objectShader_kt711w$_0,this.lightPositionMesh_cedig8$_0=this.lightPositionMesh_cedig8$_0,this.lightVolumeMesh_k6bbw9$_0=this.lightVolumeMesh_k6bbw9$_0,this.autoRotate_0=!0,this.rand_0=new re(1337),this.lightCount_0=2e3,this.lights_0=M();var t=new Do(Ce([new so("Colorful",Ce([m.Companion.MD_RED,m.Companion.MD_PINK,m.Companion.MD_PURPLE,m.Companion.MD_DEEP_PURPLE,m.Companion.MD_INDIGO,m.Companion.MD_BLUE,m.Companion.MD_LIGHT_BLUE,m.Companion.MD_CYAN,m.Companion.MD_TEAL,m.Companion.MD_GREEN,m.Companion.MD_LIGHT_GREEN,m.Companion.MD_LIME,m.Companion.MD_YELLOW,m.Companion.MD_AMBER,m.Companion.MD_ORANGE,m.Companion.MD_DEEP_ORANGE])),new so("Hot-Cold",Ce([m.Companion.MD_PINK,m.Companion.MD_CYAN])),new so("Summer",Ce([m.Companion.MD_ORANGE,m.Companion.MD_BLUE,m.Companion.MD_GREEN])),new so("White",Me(m.Companion.WHITE))]));t.index=1,this.colorMap_0=t}function Yr(t,e){return function(i){i.setMouseRotation_dleff0$(0,-40),i.unaryPlus_uv0sim$(t.camera),i.zoom=28,i.maxZoom=50,i.translation.set_yvo9jy$(0,-11,0);var n=i.onUpdate,r=function(t,e){return function(i,n){return t.autoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(e,i);return n.add_11rb$(r),s}}function Zr(t){t.color=m.Companion.RED;var e=(new bt).icoDefaults();return e.steps=1,e.radius=.05,e.center.set_czzhiu$($.Companion.ZERO),t.icoSphere_mojs8w$(e),s}function Jr(t){return function(e){e.generate_v2sixm$(function(t){return function(e){for(var i=M(),n=0;n<=10;n++){var r=new De(ye([$e.Companion.POSITIONS,$e.Companion.NORMALS,$e.Companion.COLORS])),o=r.geometry;i.add_11rb$(o);var a=t,l=(new bt).icoDefaults();l.steps=3,l.radius=a.rand_0.randomF_dleff0$(.3,.4),l.center.set_y2kzbl$(0,.1+l.radius,0),r.icoSphere_mojs8w$(l)}for(var u=-19;u<=19;u++)for(var p=-19;p<=19;p++){e.color=m.Companion.WHITE,e.transform.push();var c=t;if(e.translate_y2kzbl$(u,0,p),(u+100|0)%2==(p+100|0)%2){var h=new li;h.size.set_y2kzbl$(c.rand_0.randomF_dleff0$(.6,.8),c.rand_0.randomF_dleff0$(.6,.95),c.rand_0.randomF_dleff0$(.6,.8)),h.origin.set_y2kzbl$(-h.size.x/2,.1,-h.size.z/2),e.cube_lhbb6w$(h)}else e.geometry_ejqx55$(i.get_za3lpa$(c.rand_0.randomI_n8acyv$(oi(i))));e.transform.pop()}return s}}(t));var i=new qt;i.roughness=.15;var n=i;return t.objectShader_0=new Ft(n),e.shader=t.objectShader_0,s}}function Qr(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.WHITE;var e=new R;return e.size.set_dleff0$(40,40),e.origin.set_y2kzbl$(e.size.x,e.size.y,0).scale_mx4ult$(-.5),e.generateTexCoords_mx4ult$(30),t.rect_e5k3t5$(e),s}function to(t){t.generate_v2sixm$(Qr);var e=new qt;e.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/futuristic-panels1/futuristic-panels1-albedo1.jpg"),e.useNormalMap_9sobi5$(zo().pbrBasePath+"/futuristic-panels1/futuristic-panels1-normal.jpg"),e.useRoughnessMap_ivxn3r$(zo().pbrBasePath+"/futuristic-panels1/futuristic-panels1-roughness.jpg"),e.useMetallicMap_ivxn3r$(zo().pbrBasePath+"/futuristic-panels1/futuristic-panels1-metallic.jpg"),e.useOcclusionMap_9sobi5$(zo().pbrBasePath+"/futuristic-panels1/futuristic-panels1-ao.jpg");var i,n=new Ft(e);return t.shader=n,t.onDispose.add_11rb$((i=n,function(t,e){var n,r,o,a,l,u;return null!=(n=i.albedoMap)&&n.dispose(),null!=(r=i.occlusionMap)&&r.dispose(),null!=(o=i.normalMap)&&o.dispose(),null!=(a=i.metallicMap)&&a.dispose(),null!=(l=i.roughnessMap)&&l.dispose(),null!=(u=i.displacementMap)&&u.dispose(),s})),s}function eo(t){return function(e){return e.sliderWithValue_xbu91d$("Light Count:",t.lightCount_0,1,5e3,0,void 0,function(t){return function(e){return t.lightCount_0=$t(e.value),t.updateLights_0(),s}}(t)),e.toggleButton_8v9fdr$("Light Positions",t.lightPositionMesh_0.isVisible,function(t){return function(e){return t.lightPositionMesh_0.isVisible=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Light Volumes",t.lightVolumeMesh_0.isVisible,function(t){return function(e){return t.lightVolumeMesh_0.isVisible=e.isEnabled,s}}(t)),e.cycler_4ni5b8$("Color Map:",t.colorMap_0,function(t){return function(e,i){return t.updateLightColors_0(),s}}(t)),s}}function io(t,e){return function(i){return i.toggleButton_8v9fdr$("Show Maps",si(t).isVisible,function(t){return function(e){var i;for(i=t.iterator();i.hasNext();)i.next().isVisible=e.isEnabled;return s}}(t)),i.toggleButton_8v9fdr$("Ambient Occlusion",e.deferredPipeline_0.isAoEnabled,function(t){return function(e){return t.deferredPipeline_0.isAoEnabled=e.isEnabled,s}}(e)),s}}function no(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Show Objects",t.objects_0.isVisible,function(t){return function(e){return t.objects_0.isVisible=e.isEnabled,t.updateLights_0(!0),s}}(t)),e.sliderWithValue_xbu91d$("Object Roughness:",t.objectShader_0.roughness,0,1,2,void 0,function(t){return function(e){return t.objectShader_0.roughness=e.value,s}}(t)),s}}function ro(t,e,i,n,r){this.$outer=t,this.startConst=e,this.startIt=i,this.travelDir=n,this.rows=r}function oo(t){this.light=t,this.startPos=ai(),this.dir=ai(),this.speed=1.5,this.travelPos=0,this.travelDist=10,this.startColor=m.Companion.WHITE,this.desiredColor=m.Companion.WHITE,this.colorMix=0}function so(t,e){this.name=t,this.colors=e}function ao(t){po(),Mt.call(this,po().shaderModel()),this.mrtPass=t}function lo(){uo=this}Vr.$metadata$={kind:P,simpleName:"UiImage",interfaces:[J]},Object.defineProperty(Kr.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_4e1hwv$_0?o("deferredPipeline"):this.deferredPipeline_4e1hwv$_0},set:function(t){this.deferredPipeline_4e1hwv$_0=t}}),Object.defineProperty(Kr.prototype,"objects_0",{configurable:!0,get:function(){return null==this.objects_v6o6kw$_0?o("objects"):this.objects_v6o6kw$_0},set:function(t){this.objects_v6o6kw$_0=t}}),Object.defineProperty(Kr.prototype,"objectShader_0",{configurable:!0,get:function(){return null==this.objectShader_kt711w$_0?o("objectShader"):this.objectShader_kt711w$_0},set:function(t){this.objectShader_kt711w$_0=t}}),Object.defineProperty(Kr.prototype,"lightPositionMesh_0",{configurable:!0,get:function(){return null==this.lightPositionMesh_cedig8$_0?o("lightPositionMesh"):this.lightPositionMesh_cedig8$_0},set:function(t){this.lightPositionMesh_cedig8$_0=t}}),Object.defineProperty(Kr.prototype,"lightVolumeMesh_0",{configurable:!0,get:function(){return null==this.lightVolumeMesh_k6bbw9$_0?o("lightVolumeMesh"):this.lightVolumeMesh_k6bbw9$_0},set:function(t){this.lightVolumeMesh_k6bbw9$_0=t}}),Kr.prototype.lateInit_aemszp$=function(t){this.updateLights_0()},Kr.prototype.setupMainScene_aemszp$=function(t){var e=new L(null);e.unaryPlus_uv0sim$(a(e,void 0,Yr(e,this))),e.lighting.lights.clear();var i=new Y;i.maxGlobalLights=0,i.isWithEmissive=!1,i.isWithAmbientOcclusion=!0,i.isWithScreenSpaceReflections=!1,i.isWithImageBasedLighting=!1;var n,r=i;return this.deferredPipeline_0=new Z(e,r),this.makeContent_0(this.deferredPipeline_0.contentGroup),e.unaryPlus_uv0sim$(this.deferredPipeline_0.renderOutput),this.makeLightOverlays_0(e),e.onUpdate.add_11rb$((n=this,function(t,e){var i;for(i=n.lights_0.iterator();i.hasNext();)i.next().animate_mx4ult$(e.deltaT);return s})),e},Kr.prototype.makeLightOverlays_0=function(t){var e;this.lightPositionMesh_0=g(void 0,(e=this,function(t){return t.isFrustumChecked=!1,t.isVisible=!0,t.generate_v2sixm$(Zr),t.shader=new Mt(e.instancedLightIndicatorModel_0()),s})),t.unaryPlus_uv0sim$(this.lightPositionMesh_0);var i=ni(this.deferredPipeline_0.pbrPass.dynamicPointLights.mesh.geometry);i.isFrustumChecked=!1,i.isVisible=!1,i.shader=new Mt(this.instancedLightIndicatorModel_0()),this.lightVolumeMesh_0=i,t.unaryPlus_uv0sim$(this.lightVolumeMesh_0);var n=new Se(Ce([Se.Companion.MODEL_MAT,$e.Companion.COLORS]),5e3),r=new Se(Ce([Se.Companion.MODEL_MAT,$e.Companion.COLORS]),5e3);this.lightPositionMesh_0.instances=n,this.lightVolumeMesh_0.instances=r;var o=new ze;t.onUpdate.add_11rb$(function(t,e,i,n){return function(r,o){if(t.lightPositionMesh_0.isVisible||t.lightVolumeMesh_0.isVisible){e.clear(),i.clear();var a,l=ri();for(a=t.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.iterator();a.hasNext();){var u=a.next(),p=n,c=t,h=e,d=i;if(p.setIdentity(),p.translate_czzhiu$(u.position),u.color.toSrgb_b0h0gw$(l),c.lightPositionMesh_0.isVisible){h.checkBufferSize_za3lpa$();var f=h.dataF.position,_=h.dataF;_.put_q3cr5i$(p.matrix),_.put_q3cr5i$(l.array);var m=h.dataF.position-f|0;if(m!==h.instanceSizeF)throw Te("Expected data to grow by "+h.instanceSizeF+" elements, instead it grew by "+m);h.numInstances=h.numInstances+1|0,h.hasChanged=!0}if(c.lightVolumeMesh_0.isVisible){var $=u.intensity,y=j.sqrt($);p.scale_y2kzbl$(y,y,y),d.checkBufferSize_za3lpa$();var v=d.dataF.position,g=d.dataF;g.put_q3cr5i$(p.matrix),g.put_q3cr5i$(l.array);var b=d.dataF.position-v|0;if(b!==d.instanceSizeF)throw Te("Expected data to grow by "+d.instanceSizeF+" elements, instead it grew by "+b);d.numInstances=d.numInstances+1|0,d.hasChanged=!0}}}return s}}(this,n,r,o))},Kr.prototype.makeContent_0=function(t){this.objects_0=g(void 0,Jr(this)),t.unaryPlus_uv0sim$(this.objects_0),t.unaryPlus_uv0sim$(b(void 0,!0,to))},Kr.prototype.updateLights_0=function(t){void 0===t&&(t=!1);var e=this.objects_0.isVisible?.7:0,i=Ce([new ro(this,new $(-19.5,.45,-20.5),new $(1,0,0),new $(0,0,1),40),new ro(this,new $(-20.5,.45,-19.5),new $(0,0,1),new $(1,0,0),40),new ro(this,new $(-19,.45+e,20.5),new $(1,0,0),new $(0,0,-1),39),new ro(this,new $(20.5,.45+e,-19),new $(0,0,1),new $(-1,0,0),39)]);if(t)this.lights_0.clear(),this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.clear();else for(;this.lights_0.size>this.lightCount_0;)this.lights_0.removeAt_za3lpa$(Ae(this.lights_0)),this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances.removeAt_za3lpa$(Ae(this.deferredPipeline_0.pbrPass.dynamicPointLights.lightInstances));for(;this.lights_0.size<this.lightCount_0;){var n=i.get_za3lpa$(this.rand_0.randomI_n8acyv$(oi(i))),r=this.rand_0.randomI_n8acyv$(Ie(0,n.rows)),o=this.deferredPipeline_0.pbrPass.dynamicPointLights,s=new ui;s.intensity=1,o.addPointLight_at6cwi$(s);var a=new oo(s);a.startColor=this.colorMap_0.current.getColor_za3lpa$(this.lights_0.size).toLinear(),a.desiredColor=a.startColor,a.colorMix=1;var l=a;this.lights_0.add_11rb$(l),n.setupLight_u83zut$(l,r,41,this.rand_0.randomF())}this.updateLightColors_0()},Kr.prototype.updateLightColors_0=function(){var t,e,i=0;for(t=this.lights_0.iterator();t.hasNext();){var n=t.next(),r=Ue((i=(e=i)+1|0,e));n.startColor=n.desiredColor,n.desiredColor=this.colorMap_0.current.getColor_za3lpa$(r).toLinear(),n.colorMix=0}},Kr.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,function(t){var i=M(),n=t.image_vf5tfk$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.albedoMetal,0,1));e.setupImage_0(n,.025,.025),i.add_11rb$(n);var r=t.image_vf5tfk$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.normalRoughness,1,.5));e.setupImage_0(r,.025,.35),i.add_11rb$(r);var o,a=t.image_vf5tfk$(void 0,e.gBufferShader_0(e.deferredPipeline_0.mrtPass.positionAo,10,.05));e.setupImage_0(a,.025,.675),i.add_11rb$(a);var l=t.image_vf5tfk$(void 0,new S(null!=(o=e.deferredPipeline_0.aoPipeline)?o.aoMap:null,void 0,bn().aoMapColorModel()));e.setupImage_0(l,.35,.35),i.add_11rb$(l);var u=t.image_vf5tfk$(void 0,new ao(e.deferredPipeline_0.mrtPass));return e.setupImage_0(u,.35,.675),i.add_11rb$(u),t.section_yfmn31$("Dynamic Lights",eo(e)),t.section_yfmn31$("Deferred Shading",io(i,e)),t.section_yfmn31$("Scene",no(e)),s}));var e},Kr.prototype.setupImage_0=function(t,e,i){t.isVisible=!1,t.relativeWidth=.3,t.relativeX=e,t.relativeY=i},ro.prototype.setupLight_u83zut$=function(t,e,i,n){t.startPos.set_czzhiu$(this.startIt).scale_mx4ult$(e).add_czzhiu$(this.startConst),t.dir.set_czzhiu$(this.travelDir),t.travelDist=i,t.travelPos=n*i,t.speed=.25*this.$outer.rand_0.randomF_dleff0$(1,3)},ro.$metadata$={kind:P,simpleName:"LightGroup",interfaces:[]},oo.prototype.animate_mx4ult$=function(t){this.travelPos+=t*this.speed,this.travelPos>this.travelDist&&(this.travelPos-=this.travelDist),this.light.position.set_czzhiu$(this.dir).scale_mx4ult$(this.travelPos).add_czzhiu$(this.startPos),this.colorMix<1&&(this.colorMix+=2*t,this.colorMix>1&&(this.colorMix=1),this.startColor.mix_jpxij3$(this.desiredColor,this.colorMix,this.light.color))},oo.$metadata$={kind:P,simpleName:"AnimatedLight",interfaces:[]},so.prototype.getColor_za3lpa$=function(t){return this.colors.get_za3lpa$(t%this.colors.size)},so.prototype.toString=function(){return this.name},so.$metadata$={kind:P,simpleName:"ColorMap",interfaces:[]},Kr.prototype.instancedLightIndicatorModel_0=function(){var t=new C("instancedLightIndicators"),e={v:null},i=new F(t);e.v=i.stageInterfaceNode_iikjwn$("ifColors",i.instanceAttributeNode_nm2vx5$($e.Companion.COLORS).output);var n=i.premultipliedMvpNode().outMvpMat,r=i.multiplyNode_ze33is$(n,i.instanceAttrModelMat().output).output;i.positionOutput=i.vec4TransformNode_9krp9t$(i.attrPositions().output,r).outVec4;var o=new B(t);return o.colorOutput_a3v4si$(o.unlitMaterialNode_r20yfm$(e.v.output).outColor),t},Kr.prototype.gBufferShader_0=function(t,e,i){return new S(t,void 0,this.rgbMapColorModel_0(e,i))},Kr.prototype.rgbMapColorModel_0=function(t,e){var i=new C("rgbMap"),n={v:null},r=new F(i);n.v=r.stageInterfaceNode_iikjwn$("ifTexCoords",r.attrTexCoords().output),r.positionOutput=r.simpleVertexPositionNode().outVec4;var o=new B(i),s=o.texture2dSamplerNode_fzevit$(o.texture2dNode_61zpoe$("colorTex"),n.v.output),a=o.splitNode_500t7j$(s.outColor,"rgb").output,l=o.multiplyNode_tuikh5$(o.addNode_ze33is$(a,new T(new Kt(t))).output,e);return o.colorOutput_a3v4si$(l.output,void 0,new T(new Kt(1))),i},ao.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s=this.model;t:do{var a;for(r=zt.ALL,a=s.stages.values.iterator();a.hasNext();){var l=a.next();if(0!=(l.stage.mask&r.mask)){var u,p,c=l.nodes;e:do{var h;for(h=c.iterator();h.hasNext();){var f=h.next();if(St(f.name,"positionAo")&&e.isType(f,At)){p=f;break e}}p=null}while(0);var _=null==(u=p)||e.isType(u,At)?u:tt();if(null!=_){o=_;break t}}}o=null}while(0);d(o).sampler.texture=this.mrtPass.positionAo;var m,$,y=this.model;t:do{var v;for(m=zt.ALL,v=y.stages.values.iterator();v.hasNext();){var g=v.next();if(0!=(g.stage.mask&m.mask)){var b,x,w=g.nodes;e:do{var z;for(z=w.iterator();z.hasNext();){var k=z.next();if(St(k.name,"normalRough")&&e.isType(k,At)){x=k;break e}}x=null}while(0);var S=null==(b=x)||e.isType(b,At)?b:tt();if(null!=S){$=S;break t}}}$=null}while(0);d($).sampler.texture=this.mrtPass.normalRoughness;var C,N,E=this.model;t:do{var T;for(C=zt.ALL,T=E.stages.values.iterator();T.hasNext();){var P=T.next();if(0!=(P.stage.mask&C.mask)){var O,M,j=P.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var I=A.next();if(St(I.name,"albedoMetal")&&e.isType(I,At)){M=I;break e}}M=null}while(0);var R=null==(O=M)||e.isType(O,At)?O:tt();if(null!=R){N=R;break t}}}N=null}while(0);d(N).sampler.texture=this.mrtPass.albedoMetal,Mt.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},lo.prototype.shaderModel=function(){var t=new C,e={v:null},i=new F(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new B(t),r=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("positionAo"),e.v.output),o=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("normalRough"),e.v.output),s=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("albedoMetal"),e.v.output),a=n.splitNode_500t7j$(r.outColor,"a").output,l=n.splitNode_500t7j$(o.outColor,"a").output,u=n.splitNode_500t7j$(s.outColor,"a").output,p=n.combineNode_m7a9qd$(ke.VEC_3F);p.inX=a,p.inY=l,p.inZ=u;var c=p;return n.colorOutput_a3v4si$(c.output,void 0,new T(new Kt(1))),t},lo.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var uo=null;function po(){return null===uo&&new lo,uo}function co(){ho=this,this.MAX_LIGHTS=5e3}ao.$metadata$={kind:P,simpleName:"MetalRoughAoTex",interfaces:[Mt]},co.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var ho=null;function fo(){return null===ho&&new co,ho}function _o(t,e,i){void 0===t&&(t=null),void 0===e&&(e=pi()),void 0===i&&(i=null);var n,r,o=null!=(r="string"==typeof(n=zo().demoProps.get_11rb$("assetsBaseDir"))?n:null)?r:"";o.length>0&&(e.assetMgr.assetsBaseDir=o),new mo(e,t,i)}function mo(t,i,n){var r,o;if(zo(),void 0===i&&(i=null),this.dbgOverlay_0=new _i(t,fi.LOWER_RIGHT),this.newScenes_0=M(),this.currentScenes_0=M(),this.defaultScene_0=new Lo("glTF Models",void 0,ko),this.demos_0=mi([ot("atmosphereDemo",new Lo("Atmospheric Scattering",void 0,So)),ot("proceduralDemo",new Lo("Procedural Geometry",void 0,Co)),ot("gltfDemo",new Lo("glTF Models",void 0,No)),ot("deferredDemo",new Lo("Deferred Shading",void 0,Eo)),ot("aoDemo",new Lo("Ambient Occlusion",void 0,To)),ot("ssrDemo",new Lo("Reflections",void 0,Po)),ot("pbrDemo",new Lo("PBR Materials",void 0,Oo)),ot("treeDemo",new Lo("Procedural Tree",void 0,Mo)),ot("instanceDemo",new Lo("Instanced Drawing",void 0,jo)),ot("simplificationDemo",new Lo("Simplification",void 0,Ao)),ot("helloWorldDemo",new Lo("Hello World",!0,Io)),ot("helloGltfDemo",new Lo("Hello glTF",!0,Ro))]),null!=n)for(o=n.iterator();o.hasNext();){var a=o.next(),l=this.demos_0,u=a.label;l.put_xwzc9p$(u,a)}var p,c,h=this.dbgOverlay_0.ui,d=zo();h.isVisible=null!=(c="boolean"==typeof(p=d.demoProps.get_11rb$("dbgOverlay.isVisible"))?p:null)&&c;var f=t.scenes,_=this.dbgOverlay_0.ui;f.add_11rb$(_);var m=t.scenes,$=this.demoOverlay_0(t);m.add_11rb$($);var y=t.onRender,v=hi("onRender",function(t,e){return t.onRender_0(e),s}.bind(null,this));y.add_11rb$(v);var g,b=this.demos_0,x=i,w=(null!=(r=(e.isType(g=b,yi)?g:tt()).get_11rb$(x))?r:this.defaultScene_0).sceneLoader(t);I(this.newScenes_0,w.setupScenes_aemszp$(t)),t.run()}function $o(t){return new ti}function yo(t){return t.componentUi_mloaa0$($o),t.containerUi_2t3ptw$(hi("BlurredComponentUi",(function(t){return new ci(t)}))),s}function vo(t,e,i,n,r){return function(o){o.layoutSpec.setOrigin_4ujscr$(ct(),Xe(t.v,!0),ct()),o.layoutSpec.setSize_4ujscr$(ht(100,!0),Xe(30,!0),dt()),o.textAlignment=new _t(ft.START,ft.CENTER),t.v-=35;var a=o.onClick,l=function(t,e,i,n){return function(r,o,a,l){var u=t.sceneLoader(e);return I(i.newScenes_0,u.setupScenes_aemszp$(e)),n.isOpen=!1,s}}(e,i,n,r);return a.add_11rb$(l),s}}function go(t){return function(e){e.layoutSpec.setOrigin_4ujscr$(ct(),Xe(10,!0),ct()),e.layoutSpec.setSize_4ujscr$(ht(100,!0),Xe(30,!0),dt()),e.text="Debug Info",e.isEnabled=t.dbgOverlay_0.ui.isVisible;var i=e.onStateChange,n=function(t){return function(e){return t.dbgOverlay_0.ui.isVisible=e.isEnabled,s}}(t);return i.add_11rb$(n),s}}function bo(t,e,i){return function(n){return n.unaryPlus_uv0sim$(i.container_t34sov$("demos",function(t,e,i,n){return function(r){r.ui.setCustom_11rb$(new ti),r.layoutSpec.setOrigin_4ujscr$(ct(),Xe(45,!0),ct()),r.layoutSpec.setSize_4ujscr$(dt(),ht(100,!0).minus_m986jv$(Xe(110,!0)),dt());var o,a,l={v:-30},u=t.demos_0.values,p=M();for(o=u.iterator();o.hasNext();){var c=o.next();c.isHidden||p.add_11rb$(c)}for(a=p.iterator();a.hasNext();){var h=a.next(),d=e,f=t,_=i;r.unaryPlus_uv0sim$(n.button_9zrh0o$(h.label,vo(l,h,d,f,_)))}return s}}(t,e,n,i))),n.unaryPlus_uv0sim$(i.toggleButton_6j87po$("showDbg",go(t))),s}}function xo(){wo=this,this.demoProps=gt()}Kr.$metadata$={kind:P,simpleName:"DeferredDemo",interfaces:[Fo]},mo.prototype.onRender_0=function(t){if(!this.newScenes_0.isEmpty()){var e,i,n;for(e=this.currentScenes_0.iterator();e.hasNext();){var r=e.next();t.scenes.remove_11rb$(r),r.dispose_aemszp$(t)}this.currentScenes_0.clear();var o=0;for(i=this.newScenes_0.iterator();i.hasNext();){var s=i.next();t.scenes.add_wxm5ur$(Ue((o=(n=o)+1|0,n)),s),this.currentScenes_0.add_11rb$(s)}this.newScenes_0.clear()}},mo.prototype.demoOverlay_0=function(t){return We(t.screenDpi,"demo-overlay",void 0,(e=this,i=t,function(t,n){return t.theme=ei(Qe.Companion.DARK,yo),t.content.ui.setCustom_11rb$(new ti),t.unaryPlus_63m4fk$(t.drawerMenu_enmky4$("menu","Demos",void 0,bo(e,i,t))),s}));var e,i},Object.defineProperty(xo.prototype,"awsBaseUrl",{configurable:!0,get:function(){var t,e;return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("awsBaseUrl"))?t:null)?e:"https://fabmax-kool-pbr.s3.eu-central-1.amazonaws.com"}}),Object.defineProperty(xo.prototype,"envMapBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/hdri";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.envMaps"))?t:null)?e:i}}),Object.defineProperty(xo.prototype,"pbrBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/materials";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.materials"))?t:null)?e:i}}),Object.defineProperty(xo.prototype,"modelBasePath",{configurable:!0,get:function(){var t,e,i=this.awsBaseUrl+"/models";return null!=(e="string"==typeof(t=this.demoProps.get_11rb$("pbrDemo.models"))?t:null)?e:i}}),xo.prototype.setProperty_bm4g0d$=function(t,e){this.demoProps.put_xwzc9p$(t,e)},xo.prototype.getProperty_umlfku$=di("kool-kool-demo.de.fabmax.kool.demo.Demo.Companion.getProperty_umlfku$",(function(t,e,i,n){var r,o;return null!=(o=e(r=this.demoProps.get_11rb$(i))?r:null)?o:n})),xo.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var wo=null;function zo(){return null===wo&&new xo,wo}function ko(t){return new Bo}function So(t){return new xn}function Co(t){return new tu}function No(t){return new Bo}function Eo(t){return new Kr}function To(t){return new un}function Po(t){return new ks}function Oo(t){return new Gs}function Mo(t){return new bu}function jo(t){return new _s}function Ao(t){return new pu}function Io(t){return new is}function Ro(t){return new ns}function Lo(t,e,i){void 0===e&&(e=!1),this.label=t,this.isHidden=e,this.sceneLoader=i}function Do(t){this.$delegate_ubybqq$_0=t,this.index=0}function qo(t,e){return e=e||Object.create(Do.prototype),Do.call(e,Ce(t.slice())),e}function Fo(t){this.name=t,this.scenes=M(),this.mainScene_w78jla$_0=this.mainScene_w78jla$_0,this.menuScene=null}function Bo(){Fo.call(this,"glTF Models"),this.foxAnimator_0=new es(this);var t,e=new Zo(this,"Flight Helmet",zo().modelBasePath+"/flight_helmet/FlightHelmet.gltf",4,$.Companion.ZERO,!1,new Rt(0,1.25,0),!1,3.5),i=new Zo(this,"Polly",zo().modelBasePath+"/project_polly_jpg.glb",3,$.Companion.ZERO,!1,new Rt(0,1.25,0),!1,3.5),n=new Zo(this,"Coffee Cart",zo().modelBasePath+"/CoffeeCart_01.glb",2,new $(0,-.01,0),!1,new Rt(0,1.75,0),!1,3.5),r=new Zo(this,"Camera",zo().modelBasePath+"/camera.glb",20,$.Companion.ZERO,!0,new Rt(0,.5,0),!1,5),o=new Zo(this,"Fox",zo().modelBasePath+"/fox.glb",.01,$.Companion.ZERO,!1,new Rt(0,1.25,0),!0,3.5);o.animate=(t=this,function(e,i,n){return t.foxAnimator_0.animate_t7fsfh$(e,n),s}),this.models_0=qo([e,i,n,r,o,new Zo(this,"Animated Box",zo().modelBasePath+"/BoxAnimated.gltf",1,new $(0,.5,0),!1,new Rt(0,1.5,0),!1,5),new Zo(this,"Morph Cube",zo().modelBasePath+"/AnimatedMorphCube.glb",1,new $(0,1,0),!1,new Rt(0,1,0),!1,3.5),new Zo(this,"Alpha Mode Test",zo().modelBasePath+"/AlphaBlendModeTest.glb",.5,new $(0,.06,0),!1,new Rt(0,.75,0),!1,3.5)]),this.orbitTransform_w8joii$_0=this.orbitTransform_w8joii$_0,this.camTranslationTarget_0=null,this.trackModel_0=!1,this.envMaps_wlbbl4$_0=this.envMaps_wlbbl4$_0,this.shadowsForward_0=M(),this.aoPipelineForward_0=null,this.contentGroupForward_0=new J,this.deferredPipeline_kn30ex$_0=this.deferredPipeline_kn30ex$_0,this.contentGroupDeferred_0=new J,this.animationSpeed_0=.5,this.animationTime_0=0,this.autoRotate_0=!0,this.useDeferredPipeline_0=!0,this.isAo_ct9a5s$_0=!0}function Uo(t,e,i,n,r,o){z.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$this$=t,this.local$this$GltfDemo=e,this.local$closure$ctx=i,this.local$$receiver=n}function Vo(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$ctx=i}function Go(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$ctx=i}function Ho(t,e){return function(i){i.setMouseRotation_dleff0$(0,-30),i.unaryPlus_uv0sim$(t.camera),i.zoom=e.models_0.current.zoom,i.translation.set_czzhiw$(e.models_0.current.lookAt);var n=i.onUpdate,r=function(t,e){return function(i,n){var r,o={v:t.camTranslationTarget_0};if(t.trackModel_0){var a=t.models_0.current.forwardModel;if(null!=a){var l=a.globalCenter;o.v=new Rt(l.x,l.y,l.z)}}else t.autoRotate_0&&(e.verticalRotation-=3*n.deltaT);if(null!=(r=o.v)){var u=e,p=t,c=Lt(u.translation).scale_14dthe$(.9).add_czzhiw$(Lt(r).scale_14dthe$(.1));u.translation.set_czzhiw$(c),c.distance_czzhiw$(r)<.01&&(p.camTranslationTarget_0=null)}return s}}(e,i);return n.add_11rb$(r),s}}function Wo(t,e,i){return function(n,r){return t.autoRotate_0&&(e.setIdentity(),e.rotate_5820x2$(3*i.time,Rt.Companion.Y_AXIS)),s}}function Xo(t,e){return function(i){var n;i.generate_v2sixm$(function(t){return function(e){return t.roundCylinder_0(e,4.1,.2),s}}(t));var r,o,a=new qt,l=t;e||(I(a.shadowMaps,l.shadowsForward_0),a.useScreenSpaceAmbientOcclusion_9cjgzv$(null!=(r=l.aoPipelineForward_0)?r.aoMap:null),a.useImageBasedLighting_po417x$(l.envMaps_0)),a.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/Fabric030/Fabric030_1K_Color2.jpg"),a.useNormalMap_9sobi5$(zo().pbrBasePath+"/Fabric030/Fabric030_1K_Normal.jpg"),a.useOcclusionMap_9sobi5$(zo().pbrBasePath+"/Fabric030/Fabric030_1K_AmbientOcclusion.jpg"),a.useRoughnessMap_ivxn3r$(zo().pbrBasePath+"/Fabric030/Fabric030_1K_Roughness.jpg"),i.onDispose.add_11rb$((o=a,function(t,e){var i,n,r,a;return null!=(i=o.albedoMap)&&i.dispose(),null!=(n=o.normalMap)&&n.dispose(),null!=(r=o.roughnessMap)&&r.dispose(),null!=(a=o.occlusionMap)&&a.dispose(),s}));var u=a;return n=e?new Ft(u):new vi(u),i.shader=n,s}}function Ko(t,e,i,n,r){z.call(this,r),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$$receiver=e,this.local$isDeferredShading=i,this.local$ctx=n}function Yo(t,e){return function(i){return i.cycler_4ni5b8$("Model:",t.models_0,function(t,e){return function(i,n){return e.cycleModel_0(n,i,t),s}}(e,t)),i.sliderWithValue_xbu91d$("Animation Speed:",t.animationSpeed_0,0,1,2,void 0,function(t){return function(e){return t.animationSpeed_0=e.value,s}}(t)),i.toggleButton_8v9fdr$("Deferred Shading",t.useDeferredPipeline_0,function(t){return function(e){return t.useDeferredPipeline_0=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.toggleButton_8v9fdr$("Ambient Occlusion",t.isAo_0,function(t){return function(e){return t.isAo_0=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.toggleButton_8v9fdr$("Screen Space Reflections",!0,function(t){return function(e){return t.deferredPipeline_0.isSsrEnabled=e.isEnabled,t.setupPipelines_0(),s}}(t)),i.sliderWithValue_xbu91d$("SSR Map Size:",.7,.1,1,1,void 0,function(t){return function(e){return t.deferredPipeline_0.reflectionMapSize=D(10*e.value)/10,s}}(t)),i.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),s}}function Zo(t,e,i,n,r,o,s,a,l){this.$outer=t,this.name=e,this.assetPath=i,this.scale=n,this.translation=r,this.generateNormals=o,this.lookAt=s,this.trackModel=a,this.zoom=l,this.forwardModel=null,this.deferredModel=null,this.isVisible=!1,this.animate=ts}function Jo(t,e,i,n){return function(r,o){return r.isVisible=t.isVisible,t.animate(n,e.animationTime_0,i),s}}function Qo(t,e,i,n){z.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$model=void 0,this.local$isDeferredShading=e,this.local$ctx=i}function ts(t,e,i){return t.applyAnimation_14dthe$(e),s}function es(t){this.$outer=t,this.angle=0,this.radius=3,this.position=wi()}function is(){Fo.call(this,"Hello World")}function ns(){Fo.call(this,"Hello glTF")}function rs(t){var e=new li;return e.colored_6taknv$(),e.centered(),t.cube_lhbb6w$(e),s}function os(t){return t.albedoSource=y.VERTEX_ALBEDO,t.metallic=0,t.roughness=.25,s}function ss(t){return t.generate_v2sixm$(rs),t.shader=v(os),s}function as(t){return t.setDirectional_czzhiu$(new $(-1,-1,-1)),t.setColor_y83vuj$(m.Companion.WHITE,5),s}function ls(){var t=new L(null);return Pe(t),t.unaryPlus_uv0sim$(g(void 0,ss)),t.lighting.singleLight_q9zcvo$(as),t}function us(t){return t.setSpot_nve3wz$(new $(5,6.25,7.5),new $(-1,-1.25,-1.5),45),t.setColor_y83vuj$(m.Companion.WHITE,300),s}function ps(t){var e=new zi;return t.grid_gtbnl3$(e),s}function cs(t,e){return function(i){return i.generate_v2sixm$(ps),i.shader=v(function(t,e){return function(i){return i.useStaticAlbedo_d7aj7k$(m.Companion.WHITE),i.useScreenSpaceAmbientOcclusion_9cjgzv$(t.aoMap),I(i.shadowMaps,e),s}}(t,e)),s}}function hs(t){return function(e,i){return t.applyAnimation_14dthe$(i.time),s}}function ds(t,e,i,n,r,o){z.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$shadows=t,this.local$closure$aoPipeline=e,this.local$this$=i,this.local$$receiver=n}function fs(t){var e=new L(null);Pe(e),e.lighting.singleLight_q9zcvo$(us);var i,n,r,o=Me(new l(e,0)),s=u.Companion.createForward_ushge7$(e);return e.unaryPlus_uv0sim$(g(void 0,cs(s,o))),t.assetMgr.launch_eln4bt$((i=o,n=s,r=e,function(t,e,o){var s=new ds(i,n,r,t,this,e);return o?s:s.doResume(null)})),e}function _s(){Fo.call(this,"Instanced Drawing"),this.nBunnies_0=10,this.isLodColors_0=!1,this.isAutoRotate_0=!0,this.modelCenter_0=ai(),this.modelRadius_0=1,this.lodController_0=new Oi,this.lods_0=Mi([new vs(8,10,Ee(m.Companion.MD_PURPLE)),new vs(32,20,Ee(m.Companion.MD_RED)),new vs(128,30,Ee(m.Companion.MD_AMBER)),new vs(500,40,Ee(m.Companion.MD_LIME)),new vs(2e3,50,Ee(m.Companion.MD_GREEN)),new vs(1e4,1e3,Ee(m.Companion.MD_BLUE))])}function ms(t,i){return function(n){var r=t.camera;e.isType(r,Q)||tt(),r.clipNear=1,r.clipFar=500,n.unaryPlus_uv0sim$(r),n.minZoom=1,n.maxZoom=250,n.zoomMethod=ki.ZOOM_CENTER,n.zoom=40,n.setMouseRotation_dleff0$(30,-40);var o=n.onUpdate,a=function(t,e){return function(i,n){return t.isAutoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(i,n);return o.add_11rb$(a),s}}function $s(t){return t.setDirectional_czzhiu$(Si(-1)),t.setColor_y83vuj$(m.Companion.WHITE,5),s}function ys(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$InstanceDemo=t,this.local$$receiver=e}function vs(t,e,i){this.maxInsts=t,this.maxDist=e,this.color=i,this.mesh=null}function gs(t,e,i){this.$outer=t,Pi.call(this),this.position=e,this.rotSpeed=120*i.length(),this.rotAxis=i.norm_5s4mqq$(ai()),this.color=ri()}function bs(t){var i=D(t);return e.imul(e.imul(i,i),i).toString()}function xs(t){return function(e){var i=bs;return e.sliderWithValue_xbu91d$("Bunnies:",t.nBunnies_0,5,20,void 0,i,function(t){return function(e){var i=D(e.value);return i!==t.nBunnies_0&&(t.nBunnies_0=i,t.setupInstances_0(t.lodController_0)),s}}(t)),e.toggleButton_8v9fdr$("Color by LOD",t.isLodColors_0,function(t){return function(e){return t.isLodColors_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Auto Rotate",t.isAutoRotate_0,function(t){return function(e){return t.isAutoRotate_0=e.isEnabled,s}}(t)),s}}function ws(t,i,n){return function(r,o){var a,l,u,p=t.lodController_0.getInstanceCount_za3lpa$(i),c=e.imul(p,null!=(u=null!=(l=null!=(a=t.lods_0.get_za3lpa$(i).mesh)?a.geometry:null)?l.numPrimitives:null)?u:0);return n.text=p.toString()+" insts / "+c+" tris",s}}function zs(t){return function(e){return e.section_yfmn31$("Scene",xs(t)),e.section_yfmn31$("Info",function(t){return function(e){var i;i=t.lods_0;for(var n=0;n!==i.size;++n){var r=e.textWithValue_puj7f4$("LOD "+n+":",""),o=t;r.onUpdate.add_11rb$(ws(o,n,r))}return s}}(t)),s}}function ks(){qs(),Fo.call(this,"Reflections"),this.deferredPipeline_v7oinh$_0=this.deferredPipeline_v7oinh$_0,this.lights_0=Ce([new As(this,m.Companion.MD_CYAN),new As(this,m.Companion.MD_RED),new As(this,m.Companion.MD_AMBER),new As(this,m.Companion.MD_GREEN)]),this.noSsrMap_0=new Ii(new m(0,0,0,0)),this.lightCount_0=4,this.lightPower_0=500,this.lightSaturation_0=.4,this.lightRandomness_0=.3,this.isScrSpcReflections_0=!0,this.autoRotate_0=!0,this.showLightIndicators_0=!0;var t=new Do(qs().matColors_0);t.index=1,this.colorCycler_0=t,this.roughness_0=.1,this.metallic_0=0,this.bunnyMesh_0=null,this.groundMesh_0=null,this.modelShader_0=null}function Ss(t,e){return function(i){i.unaryPlus_uv0sim$(t.camera),i.zoomMethod=ki.ZOOM_CENTER,i.zoom=17,i.maxZoom=50,i.translation.set_yvo9jy$(0,2,0),i.setMouseRotation_dleff0$(0,-5);var n=i.onUpdate,r=function(t,e){return function(i,n){return t.autoRotate_0&&(e.verticalRotation+=3*n.deltaT),s}}(e,i);return n.add_11rb$(r),s}}function Cs(t,e,i){return function(n,r){return t.dispose(),e.dispose(),i.dispose(),s}}function Ns(t){var e=new R;return t.rotate_ad55pp$(-90,$.Companion.X_AXIS),e.size.set_dleff0$(100,100),e.origin.set_y2kzbl$(-e.size.x/2,-e.size.y/2,0),e.generateTexCoords_mx4ult$(4),t.rect_e5k3t5$(e),s}function Es(t,e,i,n){return function(r){r.generate_v2sixm$(Ns),r.isCastingShadow=!1,t.groundMesh_0=r;var o=new qt,a=e,l=i,u=n;return o.useAlbedoMap_vzjalu$(a),o.useNormalMap_w253oa$(l),o.useRoughnessMap_vzjalu$(u),r.shader=new Ft(o),s}}function Ts(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$MultiLightDemo=e,this.local$floorAlbedo=void 0,this.local$floorNormal=void 0,this.local$$receiver=i}function Ps(t){return function(e){var i=qo([1,2,3,4]);return i.index=3,e.cycler_4ni5b8$("Lights:",i,function(t){return function(e,i){return t.lightCount_0=e,t.updateLighting_0(),s}}(t)),e.sliderWithValue_xbu91d$("Strength:",t.lightPower_0,0,1e3,0,void 0,function(t){return function(e){return t.lightPower_0=e.value,t.updateLighting_0(),s}}(t)),e.sliderWithValue_xbu91d$("Saturation:",t.lightSaturation_0,0,1,void 0,void 0,function(t){return function(e){return t.lightSaturation_0=e.value,t.updateLighting_0(),s}}(t)),s}}function Os(t,e){return function(i){return i.toggleButton_8v9fdr$("Enabled",t.deferredPipeline_0.isSsrEnabled,function(t){return function(e){return t.deferredPipeline_0.isSsrEnabled=e.isEnabled,s}}(t)),i.toggleButton_8v9fdr$("Show SSR Map",e.isVisible,function(t){return function(e){return t.isVisible=e.isEnabled,s}}(e)),i.sliderWithValue_xbu91d$("Map Size:",t.deferredPipeline_0.reflectionMapSize,.1,1,1,void 0,function(t){return function(e){return t.deferredPipeline_0.reflectionMapSize=D(10*e.value)/10,s}}(t)),s}}function Ms(t){return function(e){return e.cycler_4ni5b8$("Color:",t.colorCycler_0,function(t){return function(e,i){var n;return null!=(n=t.modelShader_0)&&(n.albedo=e.linColor),s}}(t)),e.sliderWithValue_xbu91d$("Roughness:",t.roughness_0,0,1,void 0,void 0,function(t){return function(e){var i;return t.roughness_0=e.value,null!=(i=t.modelShader_0)&&(i.roughness=e.value),s}}(t)),e.sliderWithValue_xbu91d$("Metallic:",t.metallic_0,0,1,void 0,void 0,function(t){return function(e){var i;return t.metallic_0=e.value,null!=(i=t.modelShader_0)&&(i.metallic=e.value),s}}(t)),s}}function js(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.toggleButton_8v9fdr$("Light Indicators",t.showLightIndicators_0,function(t){return function(e){return t.showLightIndicators_0=e.isEnabled,t.updateLighting_0(),s}}(t)),s}}function As(t,e){this.$outer=t,J.call(this),this.color=e,this.light=new vt;var i=new ji;i.isCastingShadow=!1,this.spotAngleMesh_0=i,this.isEnabled_0=!0,this.animPos_0=0,this.lightMeshShader_0=new Ai,this.meshPos_0=ai(),this.anglePos_0=0,this.rotOff_0=Ci(0,3),this.light.setSpot_nve3wz$($.Companion.ZERO,$.Companion.X_AXIS,50);var n,r=g(void 0,(n=this,function(t){return t.isCastingShadow=!1,t.generate_v2sixm$(Is),t.shader=n.lightMeshShader_0,s}));this.unaryPlus_uv0sim$(r),this.unaryPlus_uv0sim$(this.spotAngleMesh_0);var o=this.onUpdate,a=function(t,e){return function(i,n){t.autoRotate_0&&(e.animPos_0+=n.deltaT);var r=e.animPos_0/15+e.rotOff_0,o=j.cos(r)*t.lightRandomness_0;return e.light.spotAngle=60-20*o,e.updateSpotAngleMesh_0(),e.setIdentity(),e.rotate_ad55pp$(-10*e.animPos_0,$.Companion.Y_AXIS),e.translate_czzhiu$(e.meshPos_0),e.rotate_ad55pp$(e.anglePos_0,$.Companion.Y_AXIS),e.rotate_ad55pp$(30+20*o,$.Companion.Z_AXIS),e.transform.transform_w1lst9$(e.light.position.set_czzhiu$($.Companion.ZERO),1),e.transform.transform_w1lst9$(e.light.direction.set_czzhiu$($.Companion.NEG_X_AXIS),0),s}}(this.$outer,this);o.add_11rb$(a)}function Is(t){var e=(new bt).uvDefaults();e.radius=.1,t.uvSphere_mojs8w$(e),t.rotate_ad55pp$(90,$.Companion.Z_AXIS);var i=new Ri;i.bottomRadius=.015,i.topRadius=.015,i.height=.85,i.steps=4,t.cylinder_tnt2h$(i),t.translate_y2kzbl$(0,.85,0);var n=new Ri;return n.bottomRadius=.1,n.topRadius=.0025,n.height=.15,t.cylinder_tnt2h$(n),s}function Rs(t,e){this.name=t,this.linColor=e}function Ls(){Ds=this,this.matColors_0=Ce([new Rs("White",m.Companion.WHITE.toLinear()),new Rs("Red",m.Companion.MD_RED.toLinear()),new Rs("Pink",m.Companion.MD_PINK.toLinear()),new Rs("Purple",m.Companion.MD_PURPLE.toLinear()),new Rs("Deep Purple",m.Companion.MD_DEEP_PURPLE.toLinear()),new Rs("Indigo",m.Companion.MD_INDIGO.toLinear()),new Rs("Blue",m.Companion.MD_BLUE.toLinear()),new Rs("Cyan",m.Companion.MD_CYAN.toLinear()),new Rs("Teal",m.Companion.MD_TEAL.toLinear()),new Rs("Green",m.Companion.MD_GREEN.toLinear()),new Rs("Light Green",m.Companion.MD_LIGHT_GREEN.toLinear()),new Rs("Lime",m.Companion.MD_LIME.toLinear()),new Rs("Yellow",m.Companion.MD_YELLOW.toLinear()),new Rs("Amber",m.Companion.MD_AMBER.toLinear()),new Rs("Orange",m.Companion.MD_ORANGE.toLinear()),new Rs("Deep Orange",m.Companion.MD_DEEP_ORANGE.toLinear()),new Rs("Brown",m.Companion.MD_BROWN.toLinear()),new Rs("Grey",m.Companion.MD_GREY.toLinear()),new Rs("Blue Grey",m.Companion.MD_BLUE_GREY.toLinear()),new Rs("Almost Black",new m(.1,.1,.1).toLinear())])}mo.$metadata$={kind:P,simpleName:"Demo",interfaces:[]},Lo.$metadata$={kind:P,simpleName:"DemoEntry",interfaces:[]},Object.defineProperty(Do.prototype,"current",{configurable:!0,get:function(){return this.get_za3lpa$(this.index)}}),Do.prototype.next=function(){return this.index=(this.index+1|0)%this.size,this.current},Do.prototype.prev=function(){return this.index=(this.index+this.size-1+this.size|0)%this.size,this.current},Object.defineProperty(Do.prototype,"size",{get:function(){return this.$delegate_ubybqq$_0.size}}),Do.prototype.contains_11rb$=function(t){return this.$delegate_ubybqq$_0.contains_11rb$(t)},Do.prototype.containsAll_brywnq$=function(t){return this.$delegate_ubybqq$_0.containsAll_brywnq$(t)},Do.prototype.get_za3lpa$=function(t){return this.$delegate_ubybqq$_0.get_za3lpa$(t)},Do.prototype.indexOf_11rb$=function(t){return this.$delegate_ubybqq$_0.indexOf_11rb$(t)},Do.prototype.isEmpty=function(){return this.$delegate_ubybqq$_0.isEmpty()},Do.prototype.iterator=function(){return this.$delegate_ubybqq$_0.iterator()},Do.prototype.lastIndexOf_11rb$=function(t){return this.$delegate_ubybqq$_0.lastIndexOf_11rb$(t)},Do.prototype.listIterator=function(){return this.$delegate_ubybqq$_0.listIterator()},Do.prototype.listIterator_za3lpa$=function(t){return this.$delegate_ubybqq$_0.listIterator_za3lpa$(t)},Do.prototype.subList_vux9f0$=function(t,e){return this.$delegate_ubybqq$_0.subList_vux9f0$(t,e)},Do.$metadata$={kind:P,simpleName:"Cycler",interfaces:[$i]},Object.defineProperty(Fo.prototype,"mainScene",{configurable:!0,get:function(){return null==this.mainScene_w78jla$_0?o("mainScene"):this.mainScene_w78jla$_0},set:function(t){this.mainScene_w78jla$_0=t}}),Fo.prototype.setupScenes_aemszp$=function(t){var e;this.mainScene=this.setupMainScene_aemszp$(t);var i=this.scenes,n=this.mainScene;return i.add_11rb$(n),this.menuScene=this.setupMenu_aemszp$(t),null!=(e=this.menuScene)&&this.scenes.add_11rb$(e),this.lateInit_aemszp$(t),this.scenes},Fo.prototype.setupMenu_aemszp$=function(t){return null},Fo.prototype.lateInit_aemszp$=function(t){},Fo.$metadata$={kind:P,simpleName:"DemoScene",interfaces:[]},Object.defineProperty(Bo.prototype,"orbitTransform_0",{configurable:!0,get:function(){return null==this.orbitTransform_w8joii$_0?o("orbitTransform"):this.orbitTransform_w8joii$_0},set:function(t){this.orbitTransform_w8joii$_0=t}}),Object.defineProperty(Bo.prototype,"envMaps_0",{configurable:!0,get:function(){return null==this.envMaps_wlbbl4$_0?o("envMaps"):this.envMaps_wlbbl4$_0},set:function(t){this.envMaps_wlbbl4$_0=t}}),Object.defineProperty(Bo.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_kn30ex$_0?o("deferredPipeline"):this.deferredPipeline_kn30ex$_0},set:function(t){this.deferredPipeline_kn30ex$_0=t}}),Object.defineProperty(Bo.prototype,"isAo_0",{configurable:!0,get:function(){return this.isAo_ct9a5s$_0},set:function(t){this.isAo_ct9a5s$_0=t,this.deferredPipeline_0.isAoEnabled=t}}),Bo.prototype.lateInit_aemszp$=function(t){this.models_0.current.isVisible=!0,this.trackModel_0=this.models_0.current.trackModel},Uo.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Uo.prototype=Object.create(z.prototype),Uo.prototype.constructor=Uo,Uo.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,zo().envMapBasePath+"/shanghai_bund_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.local$this$GltfDemo.envMaps_0=this.result_0,this.local$this$.unaryPlus_uv0sim$(x.Skybox.cube_o7q6nm$(this.local$this$GltfDemo.envMaps_0.reflectionMap,1)),this.state_0=3,this.result_0=this.local$this$GltfDemo.makeDeferredContent_0(this.local$this$,this.local$closure$ctx,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$GltfDemo.makeForwardContent_0(this.local$this$,this.local$closure$ctx,this),this.result_0===w)return w;continue;case 4:return this.local$this$GltfDemo.setupPipelines_0(),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Bo.prototype.setupMainScene_aemszp$=function(t){var e,i,n,r,o,a=new L("gltfDemo");return this.setupLighting_0(a),this.setupCamera_0(a),t.assetMgr.launch_eln4bt$((e=a,i=this,n=t,function(t,r,o){var s=new Uo(e,i,n,t,this,r);return o?s:s.doResume(null)})),a.onUpdate.add_11rb$((r=t,o=this,function(t,e){return o.animationTime_0+=r.deltaT*o.animationSpeed_0,o.foxAnimator_0.updatePosition_aemszp$(r),s})),a},Bo.prototype.setupPipelines_0=function(){var t,e,i=this.useDeferredPipeline_0,n=!i;for(this.contentGroupForward_0.isVisible=n,e=this.shadowsForward_0.iterator();e.hasNext();)e.next().isShadowMapEnabled=n;null!=(t=this.aoPipelineForward_0)&&(t.isEnabled=n&&this.isAo_0),this.contentGroupDeferred_0.isVisible=i,this.deferredPipeline_0.isEnabled=i,this.deferredPipeline_0.isAoEnabled=this.isAo_0},Vo.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Vo.prototype=Object.create(z.prototype),Vo.prototype.constructor=Vo,Vo.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=u.Companion.createForward_ushge7$(this.local$$receiver);if(t.radius=.2,this.$this.aoPipelineForward_0=t,I(this.$this.shadowsForward_0,Ce([new l(this.local$$receiver,0,2048,this.$this.contentGroupForward_0),new l(this.local$$receiver,1,2048,this.$this.contentGroupForward_0)])),this.state_0=2,this.result_0=this.$this.setupContentGroup_0(this.$this.contentGroupForward_0,!1,this.local$ctx,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return void this.local$$receiver.unaryPlus_uv0sim$(this.$this.contentGroupForward_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Bo.prototype.makeForwardContent_0=function(t,e,i,n){var r=new Vo(this,t,e,i);return n?r:r.doResume(null)},Go.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Go.prototype=Object.create(z.prototype),Go.prototype.constructor=Go,Go.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,e=new Y;e.isWithAmbientOcclusion=!0,e.isWithScreenSpaceReflections=!0,e.isWithEmissive=!0,e.baseReflectionStep=.02,e.maxGlobalLights=2,e.useImageBasedLighting_po417x$(this.$this.envMaps_0);var i=e;if(this.$this.deferredPipeline_0=new Z(this.local$$receiver,i),null!=(t=this.$this.deferredPipeline_0.aoPipeline)&&(t.radius=.2),this.state_0=2,this.result_0=this.$this.setupContentGroup_0(this.$this.deferredPipeline_0.contentGroup,!0,this.local$ctx,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var n=this.$this.contentGroupDeferred_0;return n.isFrustumChecked=!1,n.unaryPlus_uv0sim$(this.$this.deferredPipeline_0.renderOutput),void this.local$$receiver.unaryPlus_uv0sim$(n);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Bo.prototype.makeDeferredContent_0=function(t,e,i,n){var r=new Go(this,t,e,i);return n?r:r.doResume(null)},Bo.prototype.setupCamera_0=function(t){this.orbitTransform_0=a(t,void 0,Ho(t,this)),t.unaryPlus_uv0sim$(this.orbitTransform_0)},Bo.prototype.setupLighting_0=function(t){t.lighting.lights.clear();var e=t.lighting.lights,i=new vt,n=new $(7,8,8),r=$.Companion.ZERO;i.setSpot_nve3wz$(n,r.subtract_2gj7b4$(n,ai()).norm(),25),i.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.3).toLinear(),500),e.add_11rb$(i);var o=t.lighting.lights,s=new vt,a=new $(-7,8,8),l=$.Companion.ZERO;s.setSpot_nve3wz$(a,l.subtract_2gj7b4$(a,ai()).norm(),25),s.setColor_y83vuj$(m.Companion.WHITE.mix_y83vuj$(m.Companion.MD_AMBER,.3).toLinear(),500),o.add_11rb$(s)},Ko.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ko.prototype=Object.create(z.prototype),Ko.prototype.constructor=Ko,Ko.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:this.local$$receiver.rotate_5820x2$(-60,Rt.Companion.Y_AXIS),this.local$$receiver.onUpdate.add_11rb$(Wo(this.$this,this.local$$receiver,this.local$ctx)),this.local$$receiver.unaryPlus_uv0sim$(b(void 0,!0,Xo(this.$this,this.local$isDeferredShading))),this.local$tmp$=this.$this.models_0.iterator(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(!this.local$tmp$.hasNext()){this.state_0=4;continue}var t,e=this.local$tmp$.next();if(this.state_0=3,this.result_0=e.load_ggm1l6$(this.local$isDeferredShading,this.local$ctx,this),this.result_0===w)return w;continue;case 3:null!=(t=this.result_0)&&this.local$$receiver.unaryPlus_uv0sim$(t),this.state_0=2;continue;case 4:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Bo.prototype.setupContentGroup_0=function(t,e,i,n,r){var o=new Ko(this,t,e,i,n);return r?o:o.doResume(null)},Bo.prototype.cycleModel_0=function(t,e,i){var n,r;t.isVisible=!1,i.runDelayed_hd6vpk$(1,(n=t,r=i,function(t){var e,i;return null!=(e=n.forwardModel)&&e.dispose_aemszp$(r),null!=(i=n.deferredModel)&&i.dispose_aemszp$(r),s})),e.isVisible=!0,this.orbitTransform_0.zoom=e.zoom,this.camTranslationTarget_0=e.lookAt,this.trackModel_0=e.trackModel},Bo.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,i=t,function(t){return t.section_yfmn31$("glTF models",Yo(e,i)),s}));var e,i},Bo.prototype.roundCylinder_0=function(t,i,n){for(var r=n/2,o=M(),s=0;s<=20;s++){var a=Wt.PI/20*s,l=j.sin(a)*r+i,u=j.cos(a)*r-r,p=new $(l,u,0);o.add_11rb$(p)}for(var c={v:0},h=0;h<=100;h++){var d,f,_=Wt.PI/100*h*2,m=0;for(d=o.iterator();d.hasNext();){var y=d.next(),v=Ue((m=(f=m)+1|0,f)),g=new gi(i+v/o.size*Wt.PI*r,0);g.scale_mx4ult$(.3),g.rotate_mx4ult$(_*A.RAD_2_DEG);var b=y.rotate_vqa64j$(_*A.RAD_2_DEG,$.Companion.Y_AXIS,ai()),x=t.vertex_n440gp$(b,$.Companion.ZERO,g);h>0&&v>0&&(t.geometry.addTriIndices_qt1dr2$(x-1|0,x-o.size-1|0,x-o.size|0),t.geometry.addTriIndices_qt1dr2$(x,x-1|0,x-o.size|0)),0===h&&0===v&&(c.v=x)}}for(var w=c.v+o.size-1|0,z=2;z<=100;z++)t.geometry.addTriIndices_qt1dr2$(c.v,c.v+e.imul(z-1|0,o.size)|0,c.v+e.imul(z,o.size)|0),t.geometry.addTriIndices_qt1dr2$(w,w+e.imul(z,o.size)|0,w+e.imul(z-1|0,o.size)|0);t.geometry.generateNormals()},Zo.prototype.toString=function(){return this.name},Qo.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Qo.prototype=Object.create(z.prototype),Qo.prototype.constructor=Qo,Qo.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.local$model={v:null},this.state_0=2,this.result_0=bi(this.local$ctx.assetMgr,this.$this.assetPath,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(null!=(t=this.result_0)){this.$this.$outer;var e,i,n=this.$this.$outer,r=new xi(this.local$isDeferredShading?n.deferredPipeline_0.shadowMaps:n.shadowsForward_0,this.local$isDeferredShading?null!=(e=n.deferredPipeline_0.aoPipeline)?e.aoMap:null:null!=(i=n.aoPipelineForward_0)?i.aoMap:null,n.envMaps_0,this.local$isDeferredShading),o=new c(this.$this.generateNormals,void 0,r,!0,!0,!0,!0,void 0,!0),s=t.makeModel_m0hq3v$(o);s.translate_czzhiu$(this.$this.translation),s.scale_mx4ult$(this.$this.scale),s.enableAnimation_za3lpa$(0),s.onUpdate.add_11rb$(Jo(this.$this,n,this.local$ctx,s)),this.local$model.v=s}return this.local$isDeferredShading?this.$this.deferredModel=this.local$model.v:this.$this.forwardModel=this.local$model.v,this.local$model.v;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Zo.prototype.load_ggm1l6$=function(t,e,i,n){var r=new Qo(this,t,e,i);return n?r:r.doResume(null)},Zo.$metadata$={kind:P,simpleName:"GltfModel",interfaces:[]},es.prototype.updatePosition_aemszp$=function(t){var e=2*this.$outer.animationSpeed_0;this.angle+=e*t.deltaT/this.radius},es.prototype.animate_t7fsfh$=function(t,e){if(this.$outer.animationSpeed_0<.5){var i=2*this.$outer.animationSpeed_0,n=1-i;t.setAnimationWeight_24o109$(0,n),t.setAnimationWeight_24o109$(1,i),t.setAnimationWeight_24o109$(2,0)}else{var r=2*(this.$outer.animationSpeed_0-.5),o=1-r;t.setAnimationWeight_24o109$(0,0),t.setAnimationWeight_24o109$(1,o),t.setAnimationWeight_24o109$(2,r)}t.applyAnimation_14dthe$(e.time),t.setIdentity(),this.position.set_yvo9jy$(this.radius,0,0).rotate_5820x2$(this.angle*A.RAD_2_DEG,Rt.Companion.Y_AXIS),t.translate_czzhiw$(this.position),t.rotate_5820x2$(this.angle*A.RAD_2_DEG+180,Rt.Companion.Y_AXIS),t.scale_14dthe$(.01)},es.$metadata$={kind:P,simpleName:"FoxAnimator",interfaces:[]},Bo.$metadata$={kind:P,simpleName:"GltfDemo",interfaces:[Fo]},is.prototype.setupMainScene_aemszp$=function(t){return ls()},is.$metadata$={kind:P,simpleName:"HelloWorldDemo",interfaces:[Fo]},ns.prototype.setupMainScene_aemszp$=function(t){return fs(t)},ns.$metadata$={kind:P,simpleName:"HelloGltfDemo",interfaces:[Fo]},ds.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ds.prototype=Object.create(z.prototype),ds.prototype.constructor=ds,ds.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,e=new xi(this.local$closure$shadows,this.local$closure$aoPipeline.aoMap),i=new c(void 0,void 0,e);if(this.state_0=2,this.result_0=h(this.local$$receiver,zo().modelBasePath+"/BoxAnimated.gltf",i,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var n;return null!=(t=this.result_0)?(this.local$this$.unaryPlus_uv0sim$(t),t.translate_y2kzbl$(0,.5,0),t.animations.isEmpty()||(t.enableAnimation_za3lpa$(0),t.onUpdate.add_11rb$(hs(t))),n=s):n=null,n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ys.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ys.prototype=Object.create(z.prototype),ys.prototype.constructor=ys,ys.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=bi(this.local$$receiver,zo().modelBasePath+"/bunny.gltf.gz",this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var e;return null!=(t=this.result_0)?(this.local$this$InstanceDemo.addLods_0(t),e=s):e=null,e;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},_s.prototype.setupMainScene_aemszp$=function(t){var e,i=new L(null);return i.unaryPlus_uv0sim$(a(i,void 0,ms(i,this))),i.lighting.singleLight_q9zcvo$($s),i.unaryPlus_uv0sim$(this.lodController_0),t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var r=new ys(e,t,this,i);return n?r:r.doResume(null)})),i},_s.prototype.addLods_0=function(t){var e;e=t.scenes;for(var i=0;i!==e.size;++i){var n,r=new c(!0,!1),o=f(t.makeModel_m0hq3v$(r,i).meshes.values),s=o.geometry;n=s.numVertices;for(var a=0;a<n;a++)s.vertexIt.index=a,s.vertexIt.position.scale_mx4ult$(.3).add_czzhiu$(new $(0,-1,0));o.geometry.rebuildBounds(),0===i&&(this.modelCenter_0.set_czzhiu$(o.geometry.bounds.center),this.modelRadius_0=o.geometry.bounds.max.distance_czzhiu$(o.geometry.bounds.center)),o.shader=this.instanceColorPbrShader_0(),o.isFrustumChecked=!1,this.lods_0.get_za3lpa$(i).mesh=o,o.instances=new Se(Ce([Se.Companion.MODEL_MAT,$e.Companion.COLORS]),this.lods_0.get_za3lpa$(i).maxInsts),this.lodController_0.addLod_od45r7$(o,this.lods_0.get_za3lpa$(i).maxDist)}this.setupInstances_0(this.lodController_0)},_s.prototype.setupInstances_0=function(t){var e,i,n,r=Ce([m.Companion.WHITE.toLinear(),m.Companion.MD_RED.toLinear(),m.Companion.MD_PINK.toLinear(),m.Companion.MD_PURPLE.toLinear(),m.Companion.MD_DEEP_PURPLE.toLinear(),m.Companion.MD_INDIGO.toLinear(),m.Companion.MD_BLUE.toLinear(),m.Companion.MD_CYAN.toLinear(),m.Companion.MD_TEAL.toLinear(),m.Companion.MD_GREEN.toLinear(),m.Companion.MD_LIGHT_GREEN.toLinear(),m.Companion.MD_LIME.toLinear(),m.Companion.MD_YELLOW.toLinear(),m.Companion.MD_AMBER.toLinear(),m.Companion.MD_ORANGE.toLinear(),m.Companion.MD_DEEP_ORANGE.toLinear(),m.Companion.MD_BROWN.toLinear(),m.Companion.MD_GREY.toLinear(),m.Companion.MD_BLUE_GREY.toLinear()]);t.instances.clear();var o=new re(17),s=.5*(this.nBunnies_0-1|0);e=this.nBunnies_0;for(var a=0;a<e;a++){i=this.nBunnies_0;for(var l=0;l<i;l++){n=this.nBunnies_0;for(var u=0;u<n;u++){var p=new yt(5*(a-s)+Ci(-2,2),5*(l-s)+Ci(-2,2),5*(u-s)+Ci(-2,2)),c=new yt(Ci(-1,1),Ci(-1,1),Ci(-1,1)),h=t.instances,d=new gs(this,p,c);d.color.set_czzhhz$(r.get_za3lpa$(o.randomI_n8acyv$(oi(r))).toLinear()),d.center.set_czzhiu$(this.modelCenter_0),d.radius=this.modelRadius_0,h.add_11rb$(d)}}}},_s.prototype.instanceColorPbrShader_0=function(){var t=new qt;t.albedoSource=y.STATIC_ALBEDO,t.isInstanced=!0,t.roughness=.5;var i,n,r=t,o=vi.Companion.defaultPbrModel_2ufela$(r),s={v:null},a=new F(o);s.v=a.stageInterfaceNode_iikjwn$("ifInstColor",a.instanceAttributeNode_nm2vx5$($e.Companion.COLORS).output),new B(o);t:do{var l;for(i=zt.ALL,l=o.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,rt)&&h.add_11rb$(f)}var _=kt(h);if(null!=_){n=_;break t}}}n=null}while(0);return d(n).inAlbedo=s.v.output,new vi(r,o)},_s.prototype.instanceColorPhongShader_0=function(){var t=new Ei;t.albedoSource=y.STATIC_ALBEDO,t.isInstanced=!0;var i,n,r=t,o=Ni.Companion.defaultPhongModel_m663ta$(r),s={v:null},a=new F(o);s.v=a.stageInterfaceNode_iikjwn$("ifInstColor",a.instanceAttributeNode_nm2vx5$($e.Companion.COLORS).output),new B(o);t:do{var l;for(i=zt.ALL,l=o.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var f=p.next();e.isType(f,Ti)&&h.add_11rb$(f)}var _=kt(h);if(null!=_){n=_;break t}}}n=null}while(0);return d(n).inAlbedo=s.v.output,new Ni(r,o)},vs.$metadata$={kind:P,simpleName:"Lod",interfaces:[]},gs.prototype.update_l2cg23$=function(t,e,i){this.instanceModelMat.setIdentity().translate_czzhiu$(this.position).rotate_ad55pp$(i.time*this.rotSpeed,this.rotAxis),Pi.prototype.update_l2cg23$.call(this,t,e,i)},gs.prototype.addInstanceData_bgc5cs$=function(t,e,i){this.$outer,e.checkBufferSize_za3lpa$();var n=e.dataF.position,r=this.$outer,o=e.dataF;o.put_q3cr5i$(this.instanceModelMat.matrix),r.isLodColors_0?o.put_q3cr5i$(r.lods_0.get_za3lpa$(t).color.array):o.put_q3cr5i$(this.color.array);var s=e.dataF.position-n|0;if(s!==e.instanceSizeF)throw Te("Expected data to grow by "+e.instanceSizeF+" elements, instead it grew by "+s);e.numInstances=e.numInstances+1|0,e.hasChanged=!0},gs.$metadata$={kind:P,simpleName:"BunnyInstance",interfaces:[Pi]},_s.prototype.setupMenu_aemszp$=function(t){return Pr(t,zs(this))},_s.$metadata$={kind:P,simpleName:"InstanceDemo",interfaces:[Fo]},Object.defineProperty(ks.prototype,"deferredPipeline_0",{configurable:!0,get:function(){return null==this.deferredPipeline_v7oinh$_0?o("deferredPipeline"):this.deferredPipeline_v7oinh$_0},set:function(t){this.deferredPipeline_v7oinh$_0=t}}),ks.prototype.lateInit_aemszp$=function(t){this.updateLighting_0()},Ts.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ts.prototype=Object.create(z.prototype),Ts.prototype.constructor=Ts,Ts.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(zo().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_COL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.local$floorAlbedo=this.result_0,this.state_0=3,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(zo().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_NRM_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 3:if(this.local$floorNormal=this.result_0,this.state_0=4,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(zo().pbrBasePath+"/woodfloor/WoodFlooringMahoganyAfricanSanded001_REFL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 4:var e=this.result_0;if(this.local$this$.onDispose.add_11rb$(Cs(this.local$floorAlbedo,this.local$floorNormal,e)),this.local$this$.unaryPlus_uv0sim$(b(void 0,!0,Es(this.local$this$MultiLightDemo,this.local$floorAlbedo,this.local$floorNormal,e))),this.state_0=5,this.result_0=bi(this.local$$receiver,zo().modelBasePath+"/bunny.gltf.gz",this),this.result_0===w)return w;continue;case 5:var i;if(null!=(t=this.result_0)){var n=this.local$this$MultiLightDemo,r=this.local$this$,o=new c(!0,!1),a=t.makeModel_m0hq3v$(o);n.bunnyMesh_0=f(a.meshes.values),r.unaryPlus_uv0sim$(a);var l=new qt;l.useStaticAlbedo_d7aj7k$(n.colorCycler_0.current.linColor),l.roughness=n.roughness_0,n.modelShader_0=new Ft(l),d(n.bunnyMesh_0).shader=n.modelShader_0,i=s}else i=null;return i;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ks.prototype.setupMainScene_aemszp$=function(t){var e,i=new L(null);for(i.unaryPlus_uv0sim$(a(i,void 0,Ss(i,this))),i.lighting.lights.clear(),e=this.lights_0.iterator();e.hasNext();){var n=e.next();i.lighting.lights.add_11rb$(n.light),i.unaryPlus_uv0sim$(n)}var r=i,o=p.EnvironmentHelper.singleColorEnvironment_6zt5da$(r,new m(.15,.15,.15)),l=new Y;l.isWithEmissive=!1,l.isWithAmbientOcclusion=!1,l.isWithScreenSpaceReflections=!1,l.isWithImageBasedLighting=!1,l.isWithScreenSpaceReflections=!0,l.useImageBasedLighting_po417x$(o);var u,c=l;this.deferredPipeline_0=new Z(r,c),r.plusAssign_f1kmr1$(this.deferredPipeline_0.renderOutput),r.plusAssign_f1kmr1$(x.Skybox.cube_o7q6nm$(o.reflectionMap,1)),r.onDispose.add_11rb$((u=this,function(t,e){return u.noSsrMap_0.dispose(),s}));var h,d,f=this.deferredPipeline_0.contentGroup;return t.assetMgr.launch_eln4bt$((h=f,d=this,function(t,e,i){var n=new Ts(h,d,t,this,e);return i?n:n.doResume(null)})),r},ks.prototype.updateLighting_0=function(){var t,e,i,n=0;for(e=this.lights_0.iterator();e.hasNext();){var r=e.next(),o=Ue((n=(i=n)+1|0,i));o<this.deferredPipeline_0.shadowMaps.size&&(this.deferredPipeline_0.shadowMaps.get_za3lpa$(o).isShadowMapEnabled=!1),r.disable_kc3nav$(this.mainScene.lighting)}var s,a=0,l=360/this.lightCount_0,u=this.lightCount_0,p=this.lights_0.size;t=j.min(u,p);for(var c=0;c<t;c++)this.lights_0.get_za3lpa$(c).setup_mx4ult$(a),this.lights_0.get_za3lpa$(c).enable_kc3nav$(this.mainScene.lighting),a+=l,c<this.deferredPipeline_0.shadowMaps.size&&(this.deferredPipeline_0.shadowMaps.get_za3lpa$(c).isShadowMapEnabled=!0);for(s=this.lights_0.iterator();s.hasNext();)s.next().updateVisibility()},ks.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,function(t){var i,n=t.image_vf5tfk$(null!=(i=e.deferredPipeline_0.reflectionDenoisePass)?i.colorTexture:null);return t.section_yfmn31$("Lights",Ps(e)),t.section_yfmn31$("Screen Space Reflections",Os(e,n)),t.section_yfmn31$("Material",Ms(e)),t.section_yfmn31$("Scene",js(e)),s}));var e},As.prototype.updateSpotAngleMesh_0=function(){var t=this.light.spotAngle*A.DEG_2_RAD/2,e=1*j.tan(t),i=this.lightMeshShader_0.color;this.spotAngleMesh_0.clear();for(var n=0;n<40;n++){var r=n/40*2*Wt.PI,o=(n+1|0)/40*2*Wt.PI;this.spotAngleMesh_0.addLine_b8opkg$(new $(-1,j.cos(r)*e,j.sin(r)*e),i,new $(-1,j.cos(o)*e,j.sin(o)*e),i)}var s=45*A.DEG_2_RAD,a=j.cos(s)*e;this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,a,a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,a,-a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,-a,-a),i),this.spotAngleMesh_0.addLine_b8opkg$($.Companion.ZERO,i,new $(-1,-a,a),i)},As.prototype.setup_mx4ult$=function(t){var e=t*A.DEG_2_RAD,i=10*j.cos(e),n=t*A.DEG_2_RAD,r=10*j.sin(n);this.meshPos_0.set_y2kzbl$(i,9,-r),this.anglePos_0=t;var o=m.Companion.WHITE.mix_jpxij3$(this.color,this.$outer.lightSaturation_0,ri());this.light.setColor_y83vuj$(o.toLinear(),this.$outer.lightPower_0),this.lightMeshShader_0.color=o,this.updateSpotAngleMesh_0()},As.prototype.enable_kc3nav$=function(t){this.isEnabled_0=!0;var e=t.lights;e.contains_11rb$(this.light)||e.add_11rb$(this.light),this.updateVisibility()},As.prototype.disable_kc3nav$=function(t){this.isEnabled_0=!1,t.lights.remove_11rb$(this.light),this.updateVisibility()},As.prototype.updateVisibility=function(){this.isVisible=this.isEnabled_0&&this.$outer.showLightIndicators_0},As.$metadata$={kind:P,simpleName:"LightMesh",interfaces:[J]},Rs.prototype.toString=function(){return this.name},Rs.$metadata$={kind:P,simpleName:"MatColor",interfaces:[]},Rs.prototype.component1=function(){return this.name},Rs.prototype.component2=function(){return this.linColor},Rs.prototype.copy_guvy9a$=function(t,e){return new Rs(void 0===t?this.name:t,void 0===e?this.linColor:e)},Rs.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.linColor)|0},Rs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.linColor,t.linColor)},Ls.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Ds=null;function qs(){return null===Ds&&new Ls,Ds}function Fs(t){ra.call(this,"Color Grid"),this.sphereProto=t,this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function Bs(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ht(15),Xe(t.v),ct()),i.layoutSpec.setSize_4ujscr$(ht(85),Xe(35),dt()),i.value=10;var n=i.onValueChanged,r=function(t){return function(e,i){var n;for(n=t.shaders_0.iterator();n.hasNext();)n.next().roughness=e.value/100;return s}}(e);return n.add_11rb$(r),s}}function Us(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ht(15),Xe(t.v),ct()),i.layoutSpec.setSize_4ujscr$(ht(85),Xe(35),dt()),i.value=0;var n=i.onValueChanged,r=function(t){return function(e,i){var n;for(n=t.shaders_0.iterator();n.hasNext();)n.next().metallic=e.value/100;return s}}(e);return n.add_11rb$(r),s}}function Vs(t,e,i,n){return function(r){r.isVisible=!1,r.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t-100),ct()),r.layoutSpec.setSize_4ujscr$(ht(100),Xe(100),dt());var o,a={v:-30};return r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),n.font.setCustom_11rb$(e),n.text="Material",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new _t(ft.CENTER,ft.CENTER),s}}(a,e,i))),a.v-=35,r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-roughness-lbl",(o=a,function(t){return t.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(o.v),ct()),t.layoutSpec.setSize_4ujscr$(ht(10),Xe(35),dt()),t.text="R:",s}))),r.unaryPlus_uv0sim$(i.slider_87iqh3$("mat-roughness-slider",Bs(a,n))),a.v-=35,r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-metallic-lbl",function(t){return function(e){return e.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.v),ct()),e.layoutSpec.setSize_4ujscr$(ht(10),Xe(35),dt()),e.text="M:",s}}(a))),r.unaryPlus_uv0sim$(i.slider_87iqh3$("mat-metallic-slider",Us(a,n))),s}}function Gs(){da(),Fo.call(this,"PBR Materials"),this.skybox_56jct1$_0=this.skybox_56jct1$_0,this.envMaps_chisr5$_0=this.envMaps_chisr5$_0,this.lightCycler_0=new Do(da().lightSetups_0),this.hdriCycler_0=new Do(da().hdriTextures_0);var t,e=Di(da().hdriTextures_0.size);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=null;this.loadedHdris_0=e,this.sphereProto_0=new oa,this.pbrContentCycler_0=new Do(Ce([new fa(this.sphereProto_0),new Fs(this.sphereProto_0),new Ll(this.sphereProto_0)])),this.autoRotate_4vo62z$_0=!0}function Hs(t){return t.isPressed}function Ws(t){return t.isPressed}function Xs(t,e,i){return function(n){n.unaryPlus_uv0sim$(t.camera);var r=n.onUpdate,o=function(t,e,i){return function(n,r){return t.autoRotate_0&&(i.verticalRotation+=2*e.deltaT),s}}(e,i,n);return r.add_11rb$(o),n.zoomMethod=ki.ZOOM_CENTER,n.zoom=20,s}}function Ks(t,e){return function(i){return i.cycler_4ni5b8$(null,t.hdriCycler_0,function(t,e){return function(i,n){return t.updateHdri_0(t.hdriCycler_0.index,e),s}}(t,e)),s}}function Ys(t){return function(e){return e.toggleButton_8v9fdr$("IBL Enabled",!0,function(t){return function(e){var i;for(i=t.pbrContentCycler_0.iterator();i.hasNext();)i.next().setUseImageBasedLighting_6taknv$(e.isEnabled);return s}}(t)),s}}function Zs(t){return function(e){return e.cycler_4ni5b8$(null,t.lightCycler_0,function(t){return function(e,i){return e.setup(t.mainScene),s}}(t)),s}}function Js(t,e){return e.hide(),t.show(),s}function Qs(t){return function(e){var i;for(e.cycler_4ni5b8$(null,t.pbrContentCycler_0,Js),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate_0,function(t){return function(e){return t.autoRotate_0=e.isEnabled,s}}(t)),e.menuY+=25,i=t.pbrContentCycler_0.iterator();i.hasNext();)i.next().createMenu_7fm8wr$(e.menuContainer,e.smallFont,e.menuY);return t.pbrContentCycler_0.current.show(),s}}function ta(t,i){return function(n){var r,o,a,l=t.envMaps_0;for(i.runDelayed_hd6vpk$(1,(o=l,function(t){return o.dispose(),s})),t.envMaps_0=p.EnvironmentHelper.hdriEnvironment_6k7uq0$(t.mainScene,n,!1),(e.isType(r=t.skybox_0.shader,Li)?r:tt()).environmentMap=t.envMaps_0.reflectionMap,a=t.pbrContentCycler_0.iterator();a.hasNext();)a.next().updateEnvironmentMap_wwmv4k$(t.envMaps_0);return s}}function ea(t,e,i,n,r,o){z.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$idx=t,this.local$this$PbrDemo=e,this.local$closure$recv=i,this.local$$receiver=n}function ia(t,e){this.hdriPath=t,this.name=e}function na(t,e){this.name=t,this.setup=e}function ra(t){this.name=t,this.content=null,this.ui=null,this.autoRotate=!0}function oa(){this.detailSphere=ye([$e.Companion.POSITIONS,$e.Companion.TEXTURE_COORDS,$e.Companion.NORMALS,$e.Companion.TANGENTS]),this.simpleSphere=ye([$e.Companion.POSITIONS,$e.Companion.NORMALS]);var t=new De(this.detailSphere);t.vertexModFun=sa;var e=(new bt).uvDefaults();e.steps=700,e.radius=7,t.uvSphere_mojs8w$(e),this.detailSphere.generateTangents_mx4ult$();var i=new De(this.simpleSphere),n=(new bt).uvDefaults();n.steps=100,n.radius=1,i.uvSphere_mojs8w$(n)}function sa(t){return t.texCoord.x=4*t.texCoord.x,t.texCoord.y=2*t.texCoord.y,s}function aa(){var t;ha=this,this.hdriTexProps_0=new W(void 0,void 0,void 0,void 0,ge.NEAREST,ge.NEAREST,!1,1),this.hdriTextures_0=Ce([new ia(zo().envMapBasePath+"/syferfontein_0d_clear_1k.rgbe.png","South Africa"),new ia(zo().envMapBasePath+"/circus_arena_1k.rgbe.png","Circus"),new ia(zo().envMapBasePath+"/newport_loft.rgbe.png","Loft"),new ia(zo().envMapBasePath+"/shanghai_bund_1k.rgbe.png","Shanghai"),new ia(zo().envMapBasePath+"/mossy_forest_1k.rgbe.png","Mossy Forest")]),this.lightStrength_0=250,this.lightExtent_0=10,this.lightSetups_0=Ce([new na("Off",la),new na("Front x1",(t=this,function(e){var i=(new vt).setPoint_czzhiu$(new $(0,0,1.5*t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,2*t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),s})),new na("Front x4",ua(this)),new na("Top x1",pa(this)),new na("Top x4",ca(this))])}function la(t){return t.lighting.lights.clear(),s}function ua(t){return function(e){var i=(new vt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),n=(new vt).setPoint_czzhiu$(new $(-t.lightExtent_0,-t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),r=(new vt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),o=(new vt).setPoint_czzhiu$(new $(t.lightExtent_0,-t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),e.lighting.lights.add_11rb$(n),e.lighting.lights.add_11rb$(r),e.lighting.lights.add_11rb$(o),s}}function pa(t){return function(e){var i=(new vt).setPoint_czzhiu$(new $(0,1.5*t.lightExtent_0,0)).setColor_y83vuj$(m.Companion.WHITE,2*t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),s}}function ca(t){return function(e){var i=(new vt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),n=(new vt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,-t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),r=(new vt).setPoint_czzhiu$(new $(-t.lightExtent_0,t.lightExtent_0,t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0),o=(new vt).setPoint_czzhiu$(new $(t.lightExtent_0,t.lightExtent_0,-t.lightExtent_0)).setColor_y83vuj$(m.Companion.WHITE,t.lightStrength_0);return e.lighting.lights.clear(),e.lighting.lights.add_11rb$(i),e.lighting.lights.add_11rb$(n),e.lighting.lights.add_11rb$(r),e.lighting.lights.add_11rb$(o),s}}ks.$metadata$={kind:P,simpleName:"MultiLightDemo",interfaces:[Fo]},Fs.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-color-container",Vs(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},Fs.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},Fs.prototype.createContent_wo93gw$=function(t,e,i){var n,r;return this.content=pe(void 0,(n=e,r=this,function(t){t.isVisible=!1,t.isFrustumChecked=!1;var e=r.makeSpheres_0(!0,n),i=r.makeSpheres_0(!1,n);i.isVisible=!1;var o=i;return t.unaryPlus_uv0sim$(e),t.unaryPlus_uv0sim$(o),r.iblContent_0=e,r.nonIblContent_0=o,s})),d(this.content)},Fs.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i;if(null!=(i=this.iblContent_0)){var n,r=e.isType(n=i.shader,vi)?n:tt();r.irradianceMap=t.irradianceMap,r.reflectionMap=t.reflectionMap,r.brdfLut=t.brdfLut}},Fs.prototype.makeSpheres_0=function(t,i){var n=M();I(n,m.Companion.MD_COLORS),n.remove_11rb$(m.Companion.MD_LIGHT_BLUE),n.remove_11rb$(m.Companion.MD_GREY),n.remove_11rb$(m.Companion.MD_BLUE_GREY);var r=m.Companion.WHITE;n.add_11rb$(r);var o=m.Companion.MD_GREY;n.add_11rb$(o);var s=m.Companion.MD_BLUE_GREY;n.add_11rb$(s);var a=new m(.1,.1,.1);n.add_11rb$(a);var l=new ve(new Ne(Ce([$e.Companion.POSITIONS,$e.Companion.NORMALS])),null);l.isFrustumChecked=!1,l.geometry.addGeometry_r7nl2o$(this.sphereProto.simpleSphere);var u=this.instancedPbrShader_0(t,i);this.shaders_0.add_11rb$(u),l.shader=u;for(var p=new Se(Ce([Se.Companion.MODEL_MAT,$e.Companion.COLORS]),e.imul(4,5)),c=new ze,h=0;h<4;h++)for(var d=0;d<5;d++){c.setIdentity(),c.translate_y2kzbl$(4.5*(-2+d),4.5*(1.5-h),0),c.scale_mx4ult$(1.5),p.checkBufferSize_za3lpa$();var f=p.dataF.position,_=p.dataF;_.put_q3cr5i$(c.matrix),_.put_q3cr5i$(n.get_za3lpa$((e.imul(h,5)+d|0)%n.size).toLinear().array);var $=p.dataF.position-f|0;if($!==p.instanceSizeF)throw Te("Expected data to grow by "+p.instanceSizeF+" elements, instead it grew by "+$);p.numInstances=p.numInstances+1|0,p.hasChanged=!0}return l.instances=p,l},Fs.prototype.instancedPbrShader_0=function(t,i){var n=new qt;n.albedoSource=y.STATIC_ALBEDO,n.roughness=.1,n.metallic=0,n.isInstanced=!0,t&&n.useImageBasedLighting_po417x$(i);var r,o,s=n,a=vi.Companion.defaultPbrModel_2ufela$(s),l={v:null},u=new F(a);l.v=u.stageInterfaceNode_iikjwn$("ifInstColors",u.instanceAttributeNode_nm2vx5$($e.Companion.COLORS).output),new B(a);t:do{var p;for(r=zt.ALL,p=a.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&r.mask)){var h,f,_=c.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(St($.name,"pbrMaterial")&&e.isType($,rt)){f=$;break e}}f=null}while(0);var v=null==(h=f)||e.isType(h,rt)?h:tt();if(null!=v){o=v;break t}}}o=null}while(0);return d(o).inAlbedo=l.v.output,new vi(s,a)},Fs.$metadata$={kind:P,simpleName:"ColorGridContent",interfaces:[ra]},Object.defineProperty(Gs.prototype,"skybox_0",{configurable:!0,get:function(){return null==this.skybox_56jct1$_0?o("skybox"):this.skybox_56jct1$_0},set:function(t){this.skybox_56jct1$_0=t}}),Object.defineProperty(Gs.prototype,"envMaps_0",{configurable:!0,get:function(){return null==this.envMaps_chisr5$_0?o("envMaps"):this.envMaps_chisr5$_0},set:function(t){this.envMaps_chisr5$_0=t}}),Object.defineProperty(Gs.prototype,"autoRotate_0",{configurable:!0,get:function(){return this.autoRotate_4vo62z$_0},set:function(t){var e;for(this.autoRotate_4vo62z$_0=t,e=this.pbrContentCycler_0.iterator();e.hasNext();)e.next().autoRotate=t}}),Gs.prototype.lateInit_aemszp$=function(t){var e,i,n=t.inputMgr.registerKeyListener_aviy8w$(-25,"Next environment map",Hs,(e=this,i=t,function(t){return e.hdriCycler_0.next(),e.updateHdri_0(e.hdriCycler_0.index,i),s})),r=t.inputMgr.registerKeyListener_aviy8w$(-26,"Prev environment map",Ws,function(t,e){return function(i){return t.hdriCycler_0.prev(),t.updateHdri_0(t.hdriCycler_0.index,e),s}}(this,t));this.mainScene.onDispose.add_11rb$(function(t,e,i,n){return function(r,o){t.inputMgr.removeKeyListener_abhb69$(e),t.inputMgr.removeKeyListener_abhb69$(i);var a,l=n.loadedHdris_0;for(a=0;a!==l.length;++a){var u=l[a];null!=u&&u.dispose()}return n.envMaps_0.dispose(),s}}(t,n,r,this))},Gs.prototype.setupMainScene_aemszp$=function(t){var e,i,n,r=new L(null);return this.lightCycler_0.current.setup(r),r.unaryPlus_uv0sim$(a(r,void 0,Xs(r,this,t))),this.loadHdri_0(this.hdriCycler_0.index,t,(e=r,i=this,n=t,function(t){var r;for(i.envMaps_0=p.EnvironmentHelper.hdriEnvironment_6k7uq0$(e,t,!1),i.skybox_0=x.Skybox.cube_o7q6nm$(i.envMaps_0.reflectionMap,1),e.plusAssign_f1kmr1$(i.skybox_0),r=i.pbrContentCycler_0.iterator();r.hasNext();){var o=r.next(),a=e;a.unaryPlus_uv0sim$(o.createContent_wo93gw$(a,i.envMaps_0,n))}return i.pbrContentCycler_0.current.show(),s})),r},Gs.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,i=t,function(t){return t.menuHeight=440,t.section_yfmn31$("Environment",Ks(e,i)),t.section_yfmn31$("Image Based Lighting",Ys(e)),t.section_yfmn31$("Discrete Lighting",Zs(e)),t.section_yfmn31$("Scene Content",Qs(e)),s}));var e,i},Gs.prototype.updateHdri_0=function(t,e){this.loadHdri_0(t,e,ta(this,e))},ea.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ea.prototype=Object.create(z.prototype),ea.prototype.constructor=ea,ea.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAndPrepareTexture_va0f2y$(da().hdriTextures_0.get_za3lpa$(this.local$closure$idx).hdriPath,da().hdriTexProps_0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return this.local$this$PbrDemo.loadedHdris_0[this.local$closure$idx]=t,this.local$closure$recv(t);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Gs.prototype.loadHdri_0=function(t,e,i){var n,r,o,s=this.loadedHdris_0[t];null==s?e.assetMgr.launch_eln4bt$((n=t,r=this,o=i,function(t,e,i){var s=new ea(n,r,o,t,this,e);return i?s:s.doResume(null)})):i(s)},ia.prototype.toString=function(){return this.name},ia.$metadata$={kind:P,simpleName:"Hdri",interfaces:[]},na.prototype.toString=function(){return this.name},na.$metadata$={kind:P,simpleName:"LightSetup",interfaces:[]},ra.prototype.show=function(){var t,e;null!=(t=this.content)&&(t.isVisible=!0),null!=(e=this.ui)&&(e.isVisible=!0)},ra.prototype.hide=function(){var t,e;null!=(t=this.content)&&(t.isVisible=!1),null!=(e=this.ui)&&(e.isVisible=!1)},ra.prototype.toString=function(){return this.name},ra.$metadata$={kind:P,simpleName:"PbrContent",interfaces:[]},oa.$metadata$={kind:P,simpleName:"SphereProto",interfaces:[]},aa.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var ha=null;function da(){return null===ha&&new aa,ha}function fa(t){Rl(),ra.call(this,"PBR Material"),this.sphereProto=t;var e=new Do(Rl().materials_0);e.index=3,this.matCycler=e,this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function _a(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ht(15),Xe(t.v),ct()),i.layoutSpec.setSize_4ujscr$(ht(70),Xe(35),dt()),i.text=e.currentMat.name;var n=i.onClick,r=function(t){return function(e,i,n,r){return e.text=t.nextMaterial_0().name,s}}(e);return n.add_11rb$(r),s}}function ma(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(20),Xe(35),dt()),n.text="<";var r=n.onClick,o=function(t,e){return function(i,n,r,o){return e.text=t.prevMaterial_0().name,s}}(e,i);return r.add_11rb$(o),s}}function $a(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ht(80),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(20),Xe(35),dt()),n.text=">";var r=n.onClick,o=function(t,e){return function(i,n,r,o){return e.text=t.nextMaterial_0().name,s}}(e,i);return r.add_11rb$(o),s}}function ya(t,e,i,n){return function(r){r.isVisible=!1,r.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t-60),ct()),r.layoutSpec.setSize_4ujscr$(ht(100),Xe(60),dt());var o={v:-30};r.unaryPlus_uv0sim$(i.label_tokfmu$("mat-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),n.font.setCustom_11rb$(e),n.text="Material",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new _t(ft.CENTER,ft.CENTER),s}}(o,e,i))),o.v-=30;var a=i.button_9zrh0o$("selected-mat",_a(o,n));return r.unaryPlus_uv0sim$(a),r.unaryPlus_uv0sim$(i.button_9zrh0o$("mat-left",ma(o,n,a))),r.unaryPlus_uv0sim$(i.button_9zrh0o$("mat-right",$a(o,n,a))),s}}function va(t,e,i,n){return function(r){r.isVisible=!1;var o=i.makeSphere_0(!0,t,e),a=i.makeSphere_0(!1,t,e);a.isVisible=!1;var l=a;r.unaryPlus_uv0sim$(o),r.unaryPlus_uv0sim$(l),i.iblContent_0=o,i.nonIblContent_0=l;var u=r.onUpdate,p=function(t,e,i){return function(n,r){return t.autoRotate&&i.rotate_ad55pp$(-2*e.deltaT,$.Companion.Y_AXIS),s}}(i,n,r);return u.add_11rb$(p),s}}function ga(t,e,i,n){return function(r){r.geometry.addGeometry_r7nl2o$(t.sphereProto.detailSphere);var o=v(function(t,e){return function(i){return i.albedoSource=y.TEXTURE_ALBEDO,i.isNormalMapped=!0,i.isRoughnessMapped=!0,i.isMetallicMapped=!0,i.isOcclusionMapped=!0,i.isDisplacementMapped=!0,i.displacementStrength=.25,t&&i.useImageBasedLighting_po417x$(e),s}}(e,i));r.shader=o,t.shaders_0.add_11rb$(o),t.updatePbrMaterial_0();var a=n.onDispose,l=function(t){return function(e,i){var n;for(n=t.matCycler.iterator();n.hasNext();)n.next().disposeMaps();return s}}(t);return a.add_11rb$(l),s}}function ba(t,e,i,n,r,o,s){this.name=t,this.albedo=e,this.normal=i,this.roughness=n,this.metallic=r,this.ao=o,this.displacement=s}function xa(){var t;Il=this,this.defaultMetallicTex_0=new Ii(m.Companion.BLACK),this.defaultAoTex_0=new Ii(m.Companion.WHITE),this.defaultDispTex_0=new Ii(m.Companion.BLACK),this.assetPath_0=zo().pbrBasePath,this.materials_0=Mi([new ba("Bamboo",new je(void 0,void 0,(t=this,function(e,i,n,r){var o=new wa(t,e,i,this,n);return r?o:o.doResume(null)})),new je(void 0,void 0,ka(this)),new je(void 0,void 0,Ca(this)),null,new je(void 0,void 0,Ea(this)),null),new ba("Castle Brick",new je(void 0,void 0,Pa(this)),new je(void 0,void 0,Ma(this)),new je(void 0,void 0,Aa(this)),null,new je(void 0,void 0,Ra(this)),new je(void 0,void 0,Da(this))),new ba("Granite",new je(void 0,void 0,Fa(this)),new je(void 0,void 0,Ua(this)),new je(void 0,void 0,Ga(this)),null,null,null),new ba("Weave Steel",new je(void 0,void 0,Wa(this)),new je(void 0,void 0,Ka(this)),new je(void 0,void 0,Za(this)),new je(void 0,void 0,Qa(this)),new je(void 0,void 0,el(this)),new je(void 0,void 0,nl(this))),new ba("Scuffed Plastic",new je(void 0,void 0,ol(this)),new je(void 0,void 0,al(this)),new je(void 0,void 0,ul(this)),null,new je(void 0,void 0,cl(this)),null),new ba("Snow Covered Path",new je(void 0,void 0,dl(this)),new je(void 0,void 0,_l(this)),new je(void 0,void 0,$l(this)),null,new je(void 0,void 0,vl(this)),new je(void 0,void 0,bl(this))),new ba("Marble",new je(void 0,void 0,wl(this)),new je(void 0,void 0,kl(this)),new je(void 0,void 0,Cl(this)),null,null,null),new ba("Onyx Tiles",new je(void 0,void 0,El(this)),new je(void 0,void 0,Pl(this)),new je(void 0,void 0,Ml(this)),null,null,new je(void 0,void 0,Al(this)))])}function wa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function za(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ka(t){return function(e,i,n,r){var o=new za(t,e,i,this,n);return r?o:o.doResume(null)}}function Sa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ca(t){return function(e,i,n,r){var o=new Sa(t,e,i,this,n);return r?o:o.doResume(null)}}function Na(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ea(t){return function(e,i,n,r){var o=new Na(t,e,i,this,n);return r?o:o.doResume(null)}}function Ta(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Pa(t){return function(e,i,n,r){var o=new Ta(t,e,i,this,n);return r?o:o.doResume(null)}}function Oa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ma(t){return function(e,i,n,r){var o=new Oa(t,e,i,this,n);return r?o:o.doResume(null)}}function ja(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Aa(t){return function(e,i,n,r){var o=new ja(t,e,i,this,n);return r?o:o.doResume(null)}}function Ia(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ra(t){return function(e,i,n,r){var o=new Ia(t,e,i,this,n);return r?o:o.doResume(null)}}function La(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Da(t){return function(e,i,n,r){var o=new La(t,e,i,this,n);return r?o:o.doResume(null)}}function qa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Fa(t){return function(e,i,n,r){var o=new qa(t,e,i,this,n);return r?o:o.doResume(null)}}function Ba(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ua(t){return function(e,i,n,r){var o=new Ba(t,e,i,this,n);return r?o:o.doResume(null)}}function Va(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ga(t){return function(e,i,n,r){var o=new Va(t,e,i,this,n);return r?o:o.doResume(null)}}function Ha(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Wa(t){return function(e,i,n,r){var o=new Ha(t,e,i,this,n);return r?o:o.doResume(null)}}function Xa(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ka(t){return function(e,i,n,r){var o=new Xa(t,e,i,this,n);return r?o:o.doResume(null)}}function Ya(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Za(t){return function(e,i,n,r){var o=new Ya(t,e,i,this,n);return r?o:o.doResume(null)}}function Ja(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Qa(t){return function(e,i,n,r){var o=new Ja(t,e,i,this,n);return r?o:o.doResume(null)}}function tl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function el(t){return function(e,i,n,r){var o=new tl(t,e,i,this,n);return r?o:o.doResume(null)}}function il(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function nl(t){return function(e,i,n,r){var o=new il(t,e,i,this,n);return r?o:o.doResume(null)}}function rl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ol(t){return function(e,i,n,r){var o=new rl(t,e,i,this,n);return r?o:o.doResume(null)}}function sl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function al(t){return function(e,i,n,r){var o=new sl(t,e,i,this,n);return r?o:o.doResume(null)}}function ll(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function ul(t){return function(e,i,n,r){var o=new ll(t,e,i,this,n);return r?o:o.doResume(null)}}function pl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function cl(t){return function(e,i,n,r){var o=new pl(t,e,i,this,n);return r?o:o.doResume(null)}}function hl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function dl(t){return function(e,i,n,r){var o=new hl(t,e,i,this,n);return r?o:o.doResume(null)}}function fl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function _l(t){return function(e,i,n,r){var o=new fl(t,e,i,this,n);return r?o:o.doResume(null)}}function ml(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function $l(t){return function(e,i,n,r){var o=new ml(t,e,i,this,n);return r?o:o.doResume(null)}}function yl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function vl(t){return function(e,i,n,r){var o=new yl(t,e,i,this,n);return r?o:o.doResume(null)}}function gl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function bl(t){return function(e,i,n,r){var o=new gl(t,e,i,this,n);return r?o:o.doResume(null)}}function xl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function wl(t){return function(e,i,n,r){var o=new xl(t,e,i,this,n);return r?o:o.doResume(null)}}function zl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function kl(t){return function(e,i,n,r){var o=new zl(t,e,i,this,n);return r?o:o.doResume(null)}}function Sl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Cl(t){return function(e,i,n,r){var o=new Sl(t,e,i,this,n);return r?o:o.doResume(null)}}function Nl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function El(t){return function(e,i,n,r){var o=new Nl(t,e,i,this,n);return r?o:o.doResume(null)}}function Tl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Pl(t){return function(e,i,n,r){var o=new Tl(t,e,i,this,n);return r?o:o.doResume(null)}}function Ol(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Ml(t){return function(e,i,n,r){var o=new Ol(t,e,i,this,n);return r?o:o.doResume(null)}}function jl(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$PbrMaterialContent$=t,this.local$it=i}function Al(t){return function(e,i,n,r){var o=new jl(t,e,i,this,n);return r?o:o.doResume(null)}}Gs.$metadata$={kind:P,simpleName:"PbrDemo",interfaces:[Fo]},Object.defineProperty(fa.prototype,"currentMat",{configurable:!0,get:function(){return this.matCycler.current}}),fa.prototype.nextMaterial_0=function(){return this.currentMat.disposeMaps(),this.matCycler.next(),this.updatePbrMaterial_0(),this.currentMat},fa.prototype.prevMaterial_0=function(){return this.currentMat.disposeMaps(),this.matCycler.prev(),this.updatePbrMaterial_0(),this.currentMat},fa.prototype.updatePbrMaterial_0=function(){var t;for(t=this.shaders_0.iterator();t.hasNext();){var e,i,n,r=t.next();r.albedoMap=this.currentMat.albedo,r.normalMap=this.currentMat.normal,r.roughnessMap=this.currentMat.roughness,r.metallicMap=null!=(e=this.currentMat.metallic)?e:Rl().defaultMetallicTex_0,r.occlusionMap=null!=(i=this.currentMat.ao)?i:Rl().defaultAoTex_0,r.displacementMap=null!=(n=this.currentMat.displacement)?n:Rl().defaultDispTex_0}},fa.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-mat-container",ya(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},fa.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},fa.prototype.createContent_wo93gw$=function(t,e,i){return this.content=pe(void 0,va(t,e,this,i)),d(this.content)},fa.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i,n,r;if(null!=(n=null!=(i=this.iblContent_0)?i.children:null))for(r=n.iterator();r.hasNext();){var o,s=r.next();e.isType(s,ve)||tt();var a=e.isType(o=s.shader,vi)?o:tt();a.irradianceMap=t.irradianceMap,a.reflectionMap=t.reflectionMap,a.brdfLut=t.brdfLut}},fa.prototype.makeSphere_0=function(t,e,i){return pe(void 0,(n=this,r=t,o=i,a=e,function(t){return t.unaryPlus_uv0sim$(b(void 0,!0,ga(n,r,o,a))),s}));var n,r,o,a},ba.prototype.disposeMaps=function(){var t,e,i;this.albedo.dispose(),this.normal.dispose(),this.roughness.dispose(),null!=(t=this.metallic)&&t.dispose(),null!=(e=this.ao)&&e.dispose(),null!=(i=this.displacement)&&i.dispose()},ba.$metadata$={kind:P,simpleName:"MaterialMaps",interfaces:[]},ba.prototype.component1=function(){return this.name},ba.prototype.component2=function(){return this.albedo},ba.prototype.component3=function(){return this.normal},ba.prototype.component4=function(){return this.roughness},ba.prototype.component5=function(){return this.metallic},ba.prototype.component6=function(){return this.ao},ba.prototype.component7=function(){return this.displacement},ba.prototype.copy_ld57qh$=function(t,e,i,n,r,o,s){return new ba(void 0===t?this.name:t,void 0===e?this.albedo:e,void 0===i?this.normal:i,void 0===n?this.roughness:n,void 0===r?this.metallic:r,void 0===o?this.ao:o,void 0===s?this.displacement:s)},ba.prototype.toString=function(){return"MaterialMaps(name="+e.toString(this.name)+", albedo="+e.toString(this.albedo)+", normal="+e.toString(this.normal)+", roughness="+e.toString(this.roughness)+", metallic="+e.toString(this.metallic)+", ao="+e.toString(this.ao)+", displacement="+e.toString(this.displacement)+")"},ba.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.albedo)|0)+e.hashCode(this.normal)|0)+e.hashCode(this.roughness)|0)+e.hashCode(this.metallic)|0)+e.hashCode(this.ao)|0)+e.hashCode(this.displacement)|0},ba.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.albedo,t.albedo)&&e.equals(this.normal,t.normal)&&e.equals(this.roughness,t.roughness)&&e.equals(this.metallic,t.metallic)&&e.equals(this.ao,t.ao)&&e.equals(this.displacement,t.displacement)},wa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},wa.prototype=Object.create(z.prototype),wa.prototype.constructor=wa,wa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-albedo.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},za.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},za.prototype=Object.create(z.prototype),za.prototype.constructor=za,za.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-normal.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Sa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Sa.prototype=Object.create(z.prototype),Sa.prototype.constructor=Sa,Sa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-roughness.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Na.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Na.prototype=Object.create(z.prototype),Na.prototype.constructor=Na,Na.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/bamboo-wood-semigloss/bamboo-wood-semigloss-ao.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ta.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ta.prototype=Object.create(z.prototype),Ta.prototype.constructor=Ta,Ta.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_diff_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Oa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Oa.prototype=Object.create(z.prototype),Oa.prototype.constructor=Oa,Oa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_nor_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ja.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ja.prototype=Object.create(z.prototype),ja.prototype.constructor=ja,ja.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_rough_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ia.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ia.prototype=Object.create(z.prototype),Ia.prototype.constructor=Ia,Ia.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_ao_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},La.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},La.prototype=Object.create(z.prototype),La.prototype.constructor=La,La.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/castle_brick/castle_brick_02_red_disp_2k.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},qa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},qa.prototype=Object.create(z.prototype),qa.prototype.constructor=qa,qa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-albedo4.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ba.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ba.prototype=Object.create(z.prototype),Ba.prototype.constructor=Ba,Ba.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-normal2.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Va.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Va.prototype=Object.create(z.prototype),Va.prototype.constructor=Va,Va.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/granitesmooth1/granitesmooth1-roughness3.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ha.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ha.prototype=Object.create(z.prototype),Ha.prototype.constructor=Ha,Ha.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_COL_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Xa.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Xa.prototype=Object.create(z.prototype),Xa.prototype.constructor=Xa,Xa.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_NRM_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ya.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ya.prototype=Object.create(z.prototype),Ya.prototype.constructor=Ya,Ya.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_ROUGHNESS_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ja.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ja.prototype=Object.create(z.prototype),Ja.prototype.constructor=Ja,Ja.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_METALNESS_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},tl.prototype=Object.create(z.prototype),tl.prototype.constructor=tl,tl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_AO_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},il.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},il.prototype=Object.create(z.prototype),il.prototype.constructor=il,il.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/MetalDesignerWeaveSteel002/MetalDesignerWeaveSteel002_DISP_2K_METALNESS.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},rl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},rl.prototype=Object.create(z.prototype),rl.prototype.constructor=rl,rl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic4-alb.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},sl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},sl.prototype=Object.create(z.prototype),sl.prototype.constructor=sl,sl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-normal.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ll.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ll.prototype=Object.create(z.prototype),ll.prototype.constructor=ll,ll.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-rough.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},pl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},pl.prototype=Object.create(z.prototype),pl.prototype.constructor=pl,pl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/scuffed-plastic-1/scuffed-plastic-ao.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},hl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},hl.prototype=Object.create(z.prototype),hl.prototype.constructor=hl,hl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_albedo.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},fl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},fl.prototype=Object.create(z.prototype),fl.prototype.constructor=fl,fl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_normal-dx.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ml.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},ml.prototype=Object.create(z.prototype),ml.prototype.constructor=ml,ml.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_roughness.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},yl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},yl.prototype=Object.create(z.prototype),yl.prototype.constructor=yl,yl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_ao.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},gl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},gl.prototype=Object.create(z.prototype),gl.prototype.constructor=gl,gl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/snowcoveredpath/snowcoveredpath_height.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},xl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},xl.prototype=Object.create(z.prototype),xl.prototype.constructor=xl,xl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-albedo2.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},zl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},zl.prototype=Object.create(z.prototype),zl.prototype.constructor=zl,zl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-normal.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Sl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Sl.prototype=Object.create(z.prototype),Sl.prototype.constructor=Sl,Sl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/streaked-marble/streaked-marble-roughness1.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Nl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Nl.prototype=Object.create(z.prototype),Nl.prototype.constructor=Nl,Nl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_COL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Tl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Tl.prototype=Object.create(z.prototype),Tl.prototype.constructor=Tl,Tl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_NRM_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ol.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},Ol.prototype=Object.create(z.prototype),Ol.prototype.constructor=Ol,Ol.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_REFL_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},jl.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},jl.prototype=Object.create(z.prototype),jl.prototype.constructor=jl,jl.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$this$PbrMaterialContent$.assetPath_0+"/TilesOnyxOpaloBlack001/TilesOnyxOpaloBlack001_DISP_2K.jpg",void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},xa.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Il=null;function Rl(){return null===Il&&new xa,Il}function Ll(t){Hl(),ra.call(this,"Roughness / Metal"),this.sphereProto=t,this.colors_0=new Do(Hl().matColors_0),this.shaders_0=M(),this.iblContent_0=null,this.nonIblContent_0=null}function Dl(t,e){return function(i){i.layoutSpec.setOrigin_4ujscr$(ht(15),Xe(t.v),ct()),i.layoutSpec.setSize_4ujscr$(ht(70),Xe(35),dt()),i.text=e.colors_0.current.name;var n=i.onClick,r=function(t){return function(e,i,n,r){var o;for(e.text=t.colors_0.next().name,o=t.shaders_0.iterator();o.hasNext();)o.next().albedo=t.colors_0.current.linColor;return s}}(e);return n.add_11rb$(r),s}}function ql(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(20),Xe(35),dt()),n.text="<";var r=n.onClick,o=function(t,e){return function(i,n,r,o){var a;for(e.text=t.colors_0.prev().name,a=t.shaders_0.iterator();a.hasNext();)a.next().albedo=t.colors_0.current.linColor;return s}}(e,i);return r.add_11rb$(o),s}}function Fl(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(ht(80),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(20),Xe(35),dt()),n.text=">";var r=n.onClick,o=function(t,e){return function(i,n,r,o){var a;for(e.text=t.colors_0.next().name,a=t.shaders_0.iterator();a.hasNext();)a.next().albedo=t.colors_0.current.linColor;return s}}(e,i);return r.add_11rb$(o),s}}function Bl(t,e,i,n){return function(r){r.isVisible=!1,r.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t-60),ct()),r.layoutSpec.setSize_4ujscr$(ht(100),Xe(60),dt());var o={v:-30};r.unaryPlus_uv0sim$(i.label_tokfmu$("color-lbl",function(t,e,i){return function(n){return n.layoutSpec.setOrigin_4ujscr$(ht(0),Xe(t.v),ct()),n.layoutSpec.setSize_4ujscr$(ht(100),Xe(30),dt()),n.font.setCustom_11rb$(e),n.text="Color",n.textColor.setCustom_11rb$(i.theme.accentColor),n.textAlignment=new _t(ft.CENTER,ft.CENTER),s}}(o,e,i))),o.v-=30;var a=i.button_9zrh0o$("selected-color",Dl(o,n));return r.unaryPlus_uv0sim$(a),r.unaryPlus_uv0sim$(i.button_9zrh0o$("color-left",ql(o,n,a))),r.unaryPlus_uv0sim$(i.button_9zrh0o$("color-right",Fl(o,n,a))),s}}function Ul(t,e){this.name=t,this.linColor=e}function Vl(){Gl=this,this.matColors_0=Ce([new Ul("Red",m.Companion.MD_RED.toLinear()),new Ul("Pink",m.Companion.MD_PINK.toLinear()),new Ul("Purple",m.Companion.MD_PURPLE.toLinear()),new Ul("Deep Purple",m.Companion.MD_DEEP_PURPLE.toLinear()),new Ul("Indigo",m.Companion.MD_INDIGO.toLinear()),new Ul("Blue",m.Companion.MD_BLUE.toLinear()),new Ul("Cyan",m.Companion.MD_CYAN.toLinear()),new Ul("Teal",m.Companion.MD_TEAL.toLinear()),new Ul("Green",m.Companion.MD_GREEN.toLinear()),new Ul("Light Green",m.Companion.MD_LIGHT_GREEN.toLinear()),new Ul("Lime",m.Companion.MD_LIME.toLinear()),new Ul("Yellow",m.Companion.MD_YELLOW.toLinear()),new Ul("Amber",m.Companion.MD_AMBER.toLinear()),new Ul("Orange",m.Companion.MD_ORANGE.toLinear()),new Ul("Deep Orange",m.Companion.MD_DEEP_ORANGE.toLinear()),new Ul("Brown",m.Companion.MD_BROWN.toLinear()),new Ul("White",m.Companion.WHITE.toLinear()),new Ul("Grey",m.Companion.MD_GREY.toLinear()),new Ul("Blue Grey",m.Companion.MD_BLUE_GREY.toLinear()),new Ul("Almost Black",new m(.1,.1,.1).toLinear())])}fa.$metadata$={kind:P,simpleName:"PbrMaterialContent",interfaces:[ra]},Ll.prototype.createMenu_7fm8wr$=function(t,e,i){var n=t.root;this.ui=n.container_t34sov$("pbr-rough-metal-container",Bl(i,e,n,this)),t.plusAssign_f1kmr1$(d(this.ui))},Ll.prototype.setUseImageBasedLighting_6taknv$=function(t){var e,i;null!=(e=this.iblContent_0)&&(e.isVisible=t),null!=(i=this.nonIblContent_0)&&(i.isVisible=!t)},Ll.prototype.createContent_wo93gw$=function(t,e,i){var n,r;return this.content=pe(void 0,(n=e,r=this,function(t){t.isVisible=!1,t.isFrustumChecked=!1;var e=r.makeSpheres_0(!0,n),i=r.makeSpheres_0(!1,n);i.isVisible=!1;var o=i;return t.unaryPlus_uv0sim$(e),t.unaryPlus_uv0sim$(o),r.iblContent_0=e,r.nonIblContent_0=o,s})),d(this.content)},Ll.prototype.updateEnvironmentMap_wwmv4k$=function(t){var i;if(null!=(i=this.iblContent_0)){var n,r=e.isType(n=i.shader,vi)?n:tt();r.irradianceMap=t.irradianceMap,r.reflectionMap=t.reflectionMap,r.brdfLut=t.brdfLut}},Ll.prototype.makeSpheres_0=function(t,i){var n=new ve(new Ne(Ce([$e.Companion.POSITIONS,$e.Companion.NORMALS])),null);n.isFrustumChecked=!1,n.geometry.addGeometry_r7nl2o$(this.sphereProto.simpleSphere);var r=this.instancedPbrShader_0(t,i);this.shaders_0.add_11rb$(r),n.shader=r;for(var o=new Se(Ce([Se.Companion.MODEL_MAT,$e.Companion.COLORS]),e.imul(7,7)),s=new ze,a=0;a<7;a++)for(var l=0;l<7;l++){s.setIdentity(),s.translate_y2kzbl$(2.5*(-3+l),2.5*(3-a),0),o.checkBufferSize_za3lpa$();var u=o.dataF.position,p=o.dataF;p.put_q3cr5i$(s.matrix);var c=l/6,h=j.max(c,.05),d=a/6;p.put_mx4ult$(h),p.put_mx4ult$(d),p.put_mx4ult$(0),p.put_mx4ult$(0);var f=o.dataF.position-u|0;if(f!==o.instanceSizeF)throw Te("Expected data to grow by "+o.instanceSizeF+" elements, instead it grew by "+f);o.numInstances=o.numInstances+1|0,o.hasChanged=!0}return n.instances=o,n},Ll.prototype.instancedPbrShader_0=function(t,i){var n=new qt;n.albedoSource=y.STATIC_ALBEDO,n.albedo=this.colors_0.current.linColor,n.isInstanced=!0,t&&n.useImageBasedLighting_po417x$(i);var r=n,o=vi.Companion.defaultPbrModel_2ufela$(r),s={v:null},a=new F(o);s.v=a.stageInterfaceNode_iikjwn$("ifInstColors",a.instanceAttributeNode_nm2vx5$($e.Companion.COLORS).output);var l,u,p=new B(o);t:do{var c;for(l=zt.ALL,c=o.stages.values.iterator();c.hasNext();){var h=c.next();if(0!=(h.stage.mask&l.mask)){var f,_,m=h.nodes;e:do{var $;for($=m.iterator();$.hasNext();){var v=$.next();if(St(v.name,"pbrMaterial")&&e.isType(v,rt)){_=v;break e}}_=null}while(0);var g=null==(f=_)||e.isType(f,rt)?f:tt();if(null!=g){u=g;break t}}}u=null}while(0);var b=d(u);return b.inRoughness=p.splitNode_500t7j$(s.v.output,"r").output,b.inMetallic=p.splitNode_500t7j$(s.v.output,"g").output,new vi(r,o)},Ul.$metadata$={kind:P,simpleName:"MatColor",interfaces:[]},Ul.prototype.component1=function(){return this.name},Ul.prototype.component2=function(){return this.linColor},Ul.prototype.copy_guvy9a$=function(t,e){return new Ul(void 0===t?this.name:t,void 0===e?this.linColor:e)},Ul.prototype.toString=function(){return"MatColor(name="+e.toString(this.name)+", linColor="+e.toString(this.linColor)+")"},Ul.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.linColor)|0},Ul.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.linColor,t.linColor)},Vl.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Gl=null;function Hl(){return null===Gl&&new Vl,Gl}function Wl(t,e){Ql(),J.call(this),this.pbrColorOut=t,this.ibl=e,this.unaryPlus_uv0sim$(this.makeWine_0()),this.unaryPlus_uv0sim$(this.makeBody_0()),this.unaryPlus_uv0sim$(this.makeShaft_0()),this.translate_y2kzbl$(7.5,0,2.5),this.scale_mx4ult$(.9)}function Xl(t){return function(e){return e.isOpaque=!1,e.generate_v2sixm$(function(t){return function(e){return t.makeBodyGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t)),e.shader=v(function(t){return function(e){return e.useImageBasedLighting_po417x$(t.ibl),e.roughness=0,e.alphaMode=new he,e.reflectionStrength=.3,s}}(t)),s}}function Kl(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeWineGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new qt;return i.roughness=0,i.emissive=new m(.3,0,.1).toLinear().withAlpha_mx4ult$(.8),i.useStaticAlbedo_d7aj7k$(new m(.3,0,.1).mix_y83vuj$(m.Companion.BLACK,.2).toLinear()),e.shader=new Ft(i),s}}function Yl(t,e,i){this.r=t,this.h=e,this.t=i}function Zl(){Jl=this,this.THICKNESS_0=new $e("aMatThickness",ke.FLOAT)}Ll.$metadata$={kind:P,simpleName:"RoughnesMetalGridContent",interfaces:[ra]},Wl.prototype.makeBody_0=function(){return g(void 0,Xl(this))},Wl.prototype.makeShaft_0=function(){var t,e=new ve(new Ne(Ce([$e.Companion.POSITIONS,$e.Companion.NORMALS,$e.Companion.COLORS,Ql().THICKNESS_0])),null);return e.generate_v2sixm$((t=this,function(e){return t.makeShaftGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s})),e.isOpaque=!1,e.shader=this.glasShader_0(),e},Wl.prototype.makeWine_0=function(){return g(void 0,Kl(this))},Wl.prototype.makeBodyGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.BLACK.withAlpha_mx4ult$(.1).toLinear();var e,i=new Le;for(t.circleShape_k80pjh$(i),e=Be(Ce([new Yl(1.3,9.1,1.5),new Yl(1.5,9.3,1),new Yl(3.97,11.8,1),new Yl(4.2,12.1,1),new Yl(4.45,12.6,1),new Yl(4.6,13.1,1),new Yl(4.65,13.5,1),new Yl(4.65,14.5,1),new Yl(4.58,15.5,1),new Yl(4.42,17,1),new Yl(4,20,1),new Yl(3.5,23,.5),new Yl(3.475,23.05,.5),new Yl(3.45,23,.5),new Yl(3.95,20,.5),new Yl(4.37,17,.5),new Yl(4.6,14.5,.5),new Yl(4.6,13.5,.5)])).iterator();e.hasNext();){var n=e.next();t.transform.push(),t.scale_y2kzbl$(n.r,n.r,1),t.translate_y2kzbl$(0,0,n.h),t.sample_afatab$(i,void 0,!0),t.transform.pop()}},Wl.prototype.makeShaftGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.color=m.Companion.DARK_GRAY.withAlpha_mx4ult$(.1).toLinear();var e=new Le;t.circleShape_k80pjh$(e);var i,n,r={v:.5};for(t.vertexModFun=(i=r,function(t){var e;return null!=(e=t.getFloatAttribute_nm2vx5$(Ql().THICKNESS_0))&&(e.f=i.v),s}),t.transform.push(),t.scale_y2kzbl$(4,4,1),t.sampleAndFillBottom_afatab$(e),t.transform.pop(),n=Ce([new Yl(4.1,.1,.5),new Yl(4,.2,.5),new Yl(2,.5,.75),new Yl(1.5,.65,1),new Yl(1,.95,1.5),new Yl(.75,1.25,2),new Yl(.5,2,5),new Yl(.4,3,20),new Yl(.4,7,20),new Yl(.5,8,20),new Yl(.6,8.25,2.5),new Yl(.9,8.65,1),new Yl(1.3,9.1,1)]).iterator();n.hasNext();){var o=n.next();t.transform.push(),t.scale_y2kzbl$(o.r,o.r,1),t.translate_y2kzbl$(0,0,o.h),r.v=o.t,t.sample_afatab$(e),t.transform.pop()}},Wl.prototype.makeWineGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var e,i=new Le;for(t.circleShape_k80pjh$(i),t.transform.push(),t.translate_y2kzbl$(0,0,10),t.sampleAndFillBottom_afatab$(i),t.transform.pop(),e=Ce([new Yl(1.28,9.1,1.5),new Yl(1.48,9.3,3),new Yl(3.95,11.8,7),new Yl(4.18,12.1,7),new Yl(4.43,12.6,7),new Yl(4.58,13.1,7),new Yl(4.63,13.5,7),new Yl(4.63,13.5,7),new Yl(4.57,13.4,7),new Yl(3,13.4,7),new Yl(1.5,13.4,7),new Yl(.5,13.4,7)]).iterator();e.hasNext();){var n=e.next();t.transform.push(),t.scale_y2kzbl$(n.r,n.r,1),t.translate_y2kzbl$(0,0,n.h),t.sample_afatab$(i),t.transform.pop()}t.fillTop_pvgy1j$(i)},Wl.prototype.glasShader_0=function(){var t=new qt;t.useRefraction_9cjgzv$(this.pbrColorOut),t.useImageBasedLighting_po417x$(this.ibl),t.roughness=0,t.alphaMode=new he;var i,n,r=t,o=vi.Companion.defaultPbrModel_2ufela$(r),s={v:null},a=new F(o);s.v=a.stageInterfaceNode_iikjwn$("ifThickness",a.attributeNode_nm2vx5$(Ql().THICKNESS_0).output),new B(o);t:do{var l;for(i=zt.ALL,l=o.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&i.mask)){var p,c=u.nodes,h=M();for(p=c.iterator();p.hasNext();){var d=p.next();e.isType(d,qi)&&h.add_11rb$(d)}var f=kt(h);if(null!=f){n=f;break t}}}n=null}while(0);return null!=n&&(n.inMaterialThickness=s.v.output),new vi(r,o)},Yl.$metadata$={kind:P,simpleName:"ExtrudeProps",interfaces:[]},Zl.$metadata$={kind:O,simpleName:"Companion",interfaces:[]};var Jl=null;function Ql(){return null===Jl&&new Zl,Jl}function tu(){Fo.call(this,"Procedural Geometry"),this.autoRotate=!0,this.roses_wwovcl$_0=this.roses_wwovcl$_0}function eu(t,e){return function(i){i.setMouseRotation_dleff0$(-20,-10),i.setMouseTranslation_y2kzbl$(0,16,0),i.zoom=40,i.unaryPlus_uv0sim$(t.camera);var n=i.onUpdate,r=function(t,e){return function(i,n){return t.autoRotate&&(e.verticalRotation+=5*n.deltaT),s}}(e,i);return n.add_11rb$(r),s}}function iu(t){return t.setDirectional_czzhiu$(new $(-1,-.3,-1)),t.setColor_y83vuj$(m.Companion.MD_AMBER.mix_y83vuj$(m.Companion.WHITE,.5).toLinear(),3),s}function nu(t,e,i,n,r){z.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$this$=t,this.local$this$ProceduralDemo=e,this.local$$receiver=i}function ru(t,e){return function(i){i.button_9zrh0o$("Empty Vase",function(t,e){return function(i){var n;for(n=t.roses.children.iterator();n.hasNext();)n.next().dispose_aemszp$(e);return t.roses.removeAllChildren(),s}}(t,e));var n,r={v:null},o={v:!0};return i.button_9zrh0o$("Generate Rose",function(t,e,i,n){return function(r){var o;if(!t.roses.children.isEmpty()&&e.v){var a=qe(t.roses.children);t.roses.removeNode_f1kmr1$(a),a.dispose_aemszp$(i)}var l=Fi();return null!=(o=n.v)&&(o.text=l.toString()),t.roses.makeRose_za3lpa$(l),s}}(t,o,e,r)),i.toggleButton_8v9fdr$("Replace Last Rose",o.v,(n=o,function(t){return n.v=t.isEnabled,s})),r.v=i.textWithValue_puj7f4$("Seed:",""),s}}function ou(t){return function(e){return e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function su(){J.call(this),this.makeRose_za3lpa$(1234),this.makeRose_za3lpa$(6415168),this.makeRose_za3lpa$(2541685),this.makeRose_za3lpa$(-336577773),this.makeRose_za3lpa$(1339055691),this.translate_y2kzbl$(-7.5,10.5,2.5)}function au(t){var e;this.shaftGrad=new st([ot(0,m.Companion.MD_BROWN_900.toLinear()),ot(.4,m.Companion.MD_BROWN.toLinear()),ot(1,m.Companion.MD_LIGHT_GREEN_600.toLinear())]),this.blossomLeafGrad=oe([m.Companion.MD_LIGHT_GREEN_600.toLinear(),m.Companion.MD_LIGHT_GREEN.mix_y83vuj$(m.Companion.MD_YELLOW_200,.5).toLinear()]),this.shaftMesh=null,this.leafMesh=null,this.shaftLeafMesh=null,this.blossomMesh=null,this.rand=new re(t),this.shaftTopTransform=new ze,this.shaftLeafTransform=new ze,this.shaftMesh=g(void 0,(e=this,function(t){t.generate_v2sixm$(function(t){return function(e){return t.makeShaftGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(e));var i=new qt;return i.roughness=.3,t.shader=new Ft(i),s})),this.shaftLeafMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeShaftLeafGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new qt;return i.roughness=.5,e.shader=new Ft(i),s}}(this)),this.leafMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeLeafGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new qt;return i.roughness=.5,e.shader=new Ft(i),s}}(this)),this.blossomMesh=g(void 0,function(t){return function(e){e.generate_v2sixm$(function(t){return function(e){return t.makeBlossomGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}}(t));var i=new qt;return i.roughness=.8,e.shader=new Ft(i),s}}(this)),this.applyTint_d7aj7k$(m.Companion.fromHsv_7b5o5w$(this.rand.randomF_dleff0$(0,360),.12,this.rand.randomF_dleff0$(.7,1),1).toLinear())}function lu(){var t;ve.call(this,ye([$e.Companion.POSITIONS,$e.Companion.NORMALS,$e.Companion.TEXTURE_COORDS,$e.Companion.TANGENTS])),this.isCastingShadow=!1,this.generate_v2sixm$((t=this,function(e){return t.makeGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),e.geometry.generateTangents_mx4ult$(),s}));var e=new qt;e.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/granitesmooth1/granitesmooth1-albedo4.jpg"),e.useNormalMap_9sobi5$(zo().pbrBasePath+"/granitesmooth1/granitesmooth1-normal2.jpg"),e.useRoughnessMap_ivxn3r$(zo().pbrBasePath+"/granitesmooth1/granitesmooth1-roughness3.jpg"),this.shader=new Ft(e)}function uu(){var t;ve.call(this,ye([$e.Companion.POSITIONS,$e.Companion.NORMALS,$e.Companion.COLORS])),this.generate_v2sixm$((t=this,function(e){return t.makeGeometry_0(e),e.geometry.removeDegeneratedTriangles(),e.geometry.generateNormals(),s}));var e=new qt;e.roughness=.3,this.shader=new Ft(e)}function pu(){Fo.call(this,"Simplification"),this.models=gt(),this.modelWireframe=new ji,this.srcModel=null,this.dispModel=new ve(ye([$e.Companion.POSITIONS,$e.Companion.NORMALS])),this.heMesh=null,this.simplifcationGrade=1,this.autoRun_z6bycc$_0=this.autoRun_z6bycc$_0,this.facesValLbl_1vvnvx$_0=this.facesValLbl_1vvnvx$_0,this.vertsValLbl_bpoadb$_0=this.vertsValLbl_bpoadb$_0,this.timeValLbl_itlx8a$_0=this.timeValLbl_itlx8a$_0,this.autoRotate=!0,this.dispModel.shader=v(gu),this.srcModel=this.makeCosGrid_0();var t=this.models,e=this.srcModel;t.put_xwzc9p$("cos",e),this.heMesh=new Ui(this.srcModel)}function cu(t,e,i,n){z.call(this,n),this.$controller=i,this.exceptionState_0=1,this.local$this$SimplificationDemo=t,this.local$$receiver=e}function hu(t,e){return function(i){i.unaryPlus_uv0sim$(t.dispModel),i.unaryPlus_uv0sim$(t.modelWireframe);var n=i.onUpdate,r=function(t,e,i){return function(n,r){return t.autoRotate&&i.rotate_ad55pp$(3*e.deltaT,$.Companion.Y_AXIS),s}}(t,e,i);return n.add_11rb$(r),s}}function du(t,e,i,n,r,o){z.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$$receiver=e,this.local$name=i,this.local$scale=n,this.local$offset=r}function fu(t){return function(e){return e.button_9zrh0o$("Cow",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("cow"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Teapot",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("teapot"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Bunny",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("bunny"))?i:t.srcModel,t.simplify(),s}}(t)),e.button_9zrh0o$("Cosine Grid",function(t){return function(e){var i;return t.srcModel=null!=(i=t.models.get_11rb$("cos"))?i:t.srcModel,t.simplify(),s}}(t)),s}}function _u(t){return s}function mu(t){return s}function $u(t){return function(e){var i=e.toggleButton_8v9fdr$("Draw Solid",t.dispModel.isVisible,_u),n=e.toggleButton_8v9fdr$("Draw Wireframe",t.modelWireframe.isVisible,mu),r=i.onStateChange,o=function(t,e){return function(i){return t.dispModel.isVisible=i.isEnabled,i.isEnabled||e.isEnabled||(e.isEnabled=!0),s}}(t,n);r.add_11rb$(o);var a=n.onStateChange,l=function(t,e){return function(i){return t.modelWireframe.isVisible=i.isEnabled,i.isEnabled||e.isEnabled||(e.isEnabled=!0),s}}(t,i);return a.add_11rb$(l),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function yu(t){return s}function vu(t){return function(e){return e.sliderWithValue_xbu91d$("Ratio:",100,1,100,void 0,void 0,function(t){return function(e){return t.simplifcationGrade=e.value/100,t.autoRun.isEnabled&&t.simplify(),s}}(t)),e.button_9zrh0o$("Update Mesh",function(t){return function(e){return t.simplify(),s}}(t)),t.autoRun=e.toggleButton_8v9fdr$("Auto Update",!0,yu),t.facesValLbl=e.textWithValue_puj7f4$("Faces:",""),t.vertsValLbl=e.textWithValue_puj7f4$("Vertices:",""),t.timeValLbl=e.textWithValue_puj7f4$("Time:",""),s}}function gu(t){return t.albedoSource=y.STATIC_ALBEDO,t.albedo=m.Companion.WHITE,t.roughness=.15,s}function bu(){Fo.call(this,"Procedural Tree"),this.treeGen=null,this.trunkMesh=null,this.leafMesh=null,this.autoRotate=!0,this.windSpeed=2.5,this.windAnimationPos=0,this.windStrength=1,this.lightDirection=new yt(-1,-1.5,-1).norm(),this.skySystem_q5b8gb$_0=this.skySystem_q5b8gb$_0;var t=new Iu(2.75,3,3.5);this.treeGen=new Ou(t,void 0,void 0,this.lightDirection),this.treeGen.generate_za3lpa$()}function xu(t,i,n,r){return function(o){o.generate_v2sixm$(function(t){return function(i){var n;n=He.INFO;var r=Ji();t.treeGen.buildTrunkMesh_84rojv$(i);var o=Fe.Log,a=e.getKClassFromExpression(i).simpleName;return n.level>=o.level.level&&o.printer(n,a,"Generated "+(i.geometry.numIndices/3|0)+" trunk triangles in "+Ge(Ji()-r,3)+" ms"),s}}(t));var a={v:null},l={v:null},u=new qt,p=i,c=n;u.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/bark_pine/Bark_Pine_baseColor.jpg"),u.useOcclusionMap_9sobi5$(zo().pbrBasePath+"/bark_pine/Bark_Pine_ambientOcclusion.jpg"),u.useNormalMap_9sobi5$(zo().pbrBasePath+"/bark_pine/Bark_Pine_normal.jpg"),u.useRoughnessMap_ivxn3r$(zo().pbrBasePath+"/bark_pine/Bark_Pine_roughness.jpg"),u.useImageBasedLighting_po417x$(p),u.shadowMaps.addAll_brywnq$(c),u.roughness=1;var h,d=u,f=new vi(d,t.treePbrModel_0(d));o.onDispose.add_11rb$((h=f,function(t,e){var i,n,r,o;return null!=(i=h.albedoMap)&&i.dispose(),null!=(n=h.occlusionMap)&&n.dispose(),null!=(r=h.normalMap)&&r.dispose(),null!=(o=h.roughnessMap)&&o.dispose(),s})),f.onPipelineCreated.add_11rb$(function(t,i,n){return function(r,o,a){var l,u,p,c,h=i,d=t.model;t:do{var f;for(p=zt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(St(g.name,"windAnim")&&e.isType(g,me)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,me)?m:tt();if(null!=b){c=b;break t}}}c=null}while(0);h.v=null!=(l=c)?l.uniform:null;var x,w,z=n,k=t.model;t:do{var S;for(x=zt.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&x.mask)){var N,E,T=C.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(St(O.name,"windStrength")&&e.isType(O,me)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,me)?N:tt();if(null!=M){w=M;break t}}}w=null}while(0);return z.v=null!=(u=w)?u.uniform:null,s}}(f,a,l)),o.shader=f;var _=o.onUpdate,m=function(t,e,i,n){return function(r,o){var a,l;return e.windAnimationPos+=t.deltaT*e.windSpeed,null!=(a=i.v)&&(a.value=e.windAnimationPos),null!=(l=n.v)&&(l.value=e.windStrength),s}}(r,t,a,l);return _.add_11rb$(m),s}}function wu(t,i,n){return function(r){r.generate_v2sixm$(function(t){return function(i){var n;n=He.INFO;var r=Ji();t.treeGen.buildLeafMesh_84rojv$(i);var o=Fe.Log,a=e.getKClassFromExpression(i).simpleName;return n.level>=o.level.level&&o.printer(n,a,"Generated "+(i.geometry.numIndices/3|0)+" leaf triangles in "+Ge(Ji()-r,3)+" ms"),s}}(t));var o={v:null},a={v:null},l=new qt,u=i,p=n;l.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/leaf.png"),l.useImageBasedLighting_po417x$(u),l.roughness=1,l.alphaMode=new Zi(.5),l.cullMethod=_e.NO_CULLING,l.lightBacksides=!0,l.shadowMaps.addAll_brywnq$(p);var c,h=l,f=new vi(h,t.treePbrModel_0(h));r.onDispose.add_11rb$((c=f,function(t,e){return d(c.albedoMap).dispose(),s})),f.onPipelineCreated.add_11rb$(function(t,i,n){return function(r,o,a){var l,u,p,c,h=i,d=t.model;t:do{var f;for(p=zt.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&p.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(St(g.name,"windAnim")&&e.isType(g,me)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,me)?m:tt();if(null!=b){c=b;break t}}}c=null}while(0);h.v=null!=(l=c)?l.uniform:null;var x,w,z=n,k=t.model;t:do{var S;for(x=zt.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&x.mask)){var N,E,T=C.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(St(O.name,"windStrength")&&e.isType(O,me)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,me)?N:tt();if(null!=M){w=M;break t}}}w=null}while(0);return z.v=null!=(u=w)?u.uniform:null,s}}(f,o,a)),r.shader=f;var _=r.onUpdate,m=function(t,e,i){return function(n,r){var o,a;return null!=(o=e.v)&&(o.value=t.windAnimationPos),null!=(a=i.v)&&(a.value=t.windStrength),s}}(t,o,a);return _.add_11rb$(m),s}}function zu(t,i,n){return function(r){var o;r.unaryPlus_uv0sim$(t.camera),r.minZoom=1,r.maxZoom=50,r.zoomMethod=ki.ZOOM_CENTER,r.zoom=6,r.setMouseRotation_dleff0$(0,-10),r.setMouseTranslation_y2kzbl$(0,2,0),(e.isType(o=t.camera,Q)?o:tt()).clipFar=50;var a=r.onUpdate,l=function(t,e,i){return function(n,r){return t.autoRotate&&(i.verticalRotation+=3*e.deltaT),s}}(i,n,r);return a.add_11rb$(l),s}}function ku(t){return function(i){return i.sliderWithValue_xbu91d$("Grow Distance:",t.treeGen.growDistance,.1,.4,void 0,void 0,function(t){return function(e){return t.treeGen.growDistance=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Kill Distance:",t.treeGen.killDistance,1,4,void 0,void 0,function(t){return function(e){return t.treeGen.killDistance=e.value,s}}(t)),i.sliderWithValue_xbu91d$("Attraction Points:",t.treeGen.numberOfAttractionPoints,100,1e4,void 0,void 0,function(t){return function(e){return t.treeGen.numberOfAttractionPoints=$t(e.value),s}}(t)),i.sliderWithValue_xbu91d$("Radius of Influence:",t.treeGen.radiusOfInfluence,.25,10,void 0,void 0,function(t){return function(e){return t.treeGen.radiusOfInfluence=e.value,s}}(t)),i.button_9zrh0o$("Generate Tree",function(t){return function(i){var n,r;if(t.treeGen.generate_za3lpa$(),null!=(n=t.trunkMesh)){var o=t,a=n.geometry,l=a.isBatchUpdate;a.isBatchUpdate=!0,a.clear();var u,p=new De(a);u=He.INFO;var c=Ji();o.treeGen.buildTrunkMesh_84rojv$(p),a.generateTangents_mx4ult$();var h=Fe.Log,d=e.getKClassFromExpression(a).simpleName;u.level>=h.level.level&&h.printer(u,d,"Generated "+(a.numIndices/3|0)+" trunk triangles in "+Ge(Ji()-c,3)+" ms"),a.hasChanged=!0,a.isBatchUpdate=l}if(null!=(r=t.leafMesh)){var f=t,_=r.geometry,m=_.isBatchUpdate;_.isBatchUpdate=!0,_.clear();var $,y=new De(_);$=He.INFO;var v=Ji();f.treeGen.buildLeafMesh_84rojv$(y);var g=Fe.Log,b=e.getKClassFromExpression(_).simpleName;$.level>=g.level.level&&g.printer($,b,"Generated "+(_.numIndices/3|0)+" leaf triangles in "+Ge(Ji()-v,3)+" ms"),_.hasChanged=!0,_.isBatchUpdate=m}return s}}(t)),s}}function Su(t){return function(e){return e.sliderWithValue_xbu91d$("Animation Speed",t.windSpeed,0,10,void 0,void 0,function(t){return function(e){return t.windSpeed=e.value,s}}(t)),e.sliderWithValue_xbu91d$("Animation Strength",t.windStrength,0,10,void 0,void 0,function(t){return function(e){return t.windStrength=e.value,s}}(t)),e.toggleButton_8v9fdr$("Toggle Leafs",!0,function(t){return function(e){var i;return null!=(i=t.leafMesh)&&(i.isVisible=e.isEnabled),s}}(t)),e.toggleButton_8v9fdr$("Auto Rotate",t.autoRotate,function(t){return function(e){return t.autoRotate=e.isEnabled,s}}(t)),s}}function Cu(t){return function(e){var i=e.sliderWithValueSmall_jjtbof$("Azimuth",0,0,360,0,void 0,25,void 0,function(t){return function(e){return t.skySystem_0.skyPass.azimuth=e.value,s}}(t)),n=e.sliderWithValueSmall_jjtbof$("Elevation",45,-90,90,0,void 0,25,void 0,function(t){return function(e){return t.skySystem_0.skyPass.elevation=e.value,s}}(t));e.toggleButton_8v9fdr$("Auto Update IBL Maps",!1,function(t){return function(e){return t.skySystem_0.isAutoUpdateIblMaps=e.isEnabled,s}}(t));var r=i.onDragFinished,o=function(t){return function(e,i){return t.skySystem_0.updateIblMaps(),s}}(t);r.add_11rb$(o);var a=n.onDragFinished,l=function(t){return function(e,i){return t.skySystem_0.updateIblMaps(),s}}(t);return a.add_11rb$(l),s}}function Nu(t){N.call(this,"windNode",t),this.inputPos=new T(new Ot($.Companion.ZERO)),this.inputAnim=new T(new Kt(0)),this.inputStrength=new T(new Kt(1)),this.outputPos=new T(new ut("windOutPos"),this)}function Eu(t){return t.texCoord.set_dleff0$(t.position.x,t.position.z).scale_mx4ult$(.2),s}function Tu(t){return function(e){e.transform.push();var i=t;e.color=m.Companion.LIGHT_GRAY.withAlpha_mx4ult$(.2),e.vertexModFun=Eu;var n,r=new zi;return r.sizeX=2*i,r.sizeY=2*i,r.stepsX=200,r.stepsY=200,r.heightFun=(n=r,function(t,e){var i=7*(t/n.stepsX-.5),r=7*(e/n.stepsY-.5),o=i*i+r*r,s=j.sqrt(o);return.2*j.cos(s)-.2}),e.grid_gtbnl3$(r),e.transform.pop(),e.geometry.generateTangents_mx4ult$(),s}}function Pu(t,e,i){return function(n){return n.useAlbedoMap_ivxn3r$(zo().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_diff_2k.jpg"),n.useNormalMap_9sobi5$(zo().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_Nor_2k.jpg"),n.useRoughnessMap_ivxn3r$(zo().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_rough_2k.jpg"),n.useOcclusionMap_9sobi5$(zo().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_AO_2k.jpg"),n.useDisplacementMap_9sobi5$(zo().pbrBasePath+"/brown_mud_leaves_01/brown_mud_leaves_01_disp_2k.jpg"),n.useImageBasedLighting_po417x$(t),n.shadowMaps.addAll_brywnq$(e),i.onDispose.add_11rb$(function(t){return function(e,i){var n,r,o,a,l;return null!=(n=t.albedoMap)&&n.dispose(),null!=(r=t.normalMap)&&r.dispose(),null!=(o=t.roughnessMap)&&o.dispose(),null!=(a=t.occlusionMap)&&a.dispose(),null!=(l=t.displacementMap)&&l.dispose(),s}}(n)),s}}function Ou(t,e,i,n,r){void 0===e&&(e=new $(0,1,0)),void 0===i&&(i=$.Companion.ZERO),void 0===n&&(n=null),void 0===r&&(r=A.defaultRandomInstance),this.distribution=t,this.baseTop=e,this.baseBot=i,this.primaryLightDir=n,this.random=r,this.radiusOfInfluence=1,this.growDistance=.15,this.killDistance=1.5,this.numberOfAttractionPoints=3e3,this.attractionPoints_0=M(),this.attractionPointsTree_0=Qi(an()),this.attractionPointTrav_0=new nn,this.treeNodes_0=M(),this.root_0=new Au(this)}function Mu(t){if(null!=t.parent){var e=d(t.parent).texV;t.texV=e+t.distance_czzhiu$(d(t.parent))/(2*t.radius*Wt.PI*1.5)}return s}function ju(t){pt(t,this),this.nearestNode_3mwxa2$_0=null,this.nearestNodeDist_dewf4c$_0=tn.MAX_VALUE,this.isOpen=!0}function Au(t){this.$outer=t,ai(this),this.children=M(),this.parent=null,this.branchDepth=0,this.influencingPts=M(),this.isFinished=!1,this.radius=.005,this.texV=0,this.uScale=1,this.vScale=3,this.circumPts=M()}function Iu(t,e,i,n){void 0===n&&(n=A.defaultRandomInstance),rn.call(this),this.centerY=t,this.width=e,this.height=i,this.random_0=n,this.borders_0=M(),this.tmpPt1_0=ai(),this.tmpPt2_0=on(),this.e00_0=on(),this.e01_0=on(),this.e10_0=on(),this.e11_0=on(),this.seedPts_0=M();for(var r=1;r<=8;r++){for(var o=new sn(3),s=0;s<=7;s++){var a=s/7*Wt.PI,l=1<=s&&s<7?this.random_0.randomF_dleff0$(.4,.6):.5,u=j.sin(a)*(this.width-.4)*l+.2,p=j.cos(a)*this.height*l+this.centerY,c=o.ctrlPoints,h=new gi(u,p);c.add_11rb$(h)}o.ctrlPoints.add_wxm5ur$(0,new gi(0,this.centerY+.5*this.height)),o.ctrlPoints.add_11rb$(new gi(0,this.centerY-.5*this.height)),o.addInterpolationEndpoints();for(var d=M(),f=0;f<=20;f++){var _=o.evaluate_f6p79m$(f/20,on());d.add_11rb$(_)}this.borders_0.add_11rb$(d)}this.seed_0()}function Ru(){_o(Lu().get_11rb$("demo"))}function Lu(){var t,e=gt();if(window.location.search.length>1)for(t=ln(window.location.search.substring(1),["&"]).iterator();t.hasNext();){var i=t.next(),n=ln(i,["="]);if(2===n.size){var r=n.get_za3lpa$(0),o=n.get_za3lpa$(1),s=decodeURIComponent(r).toString(),a=decodeURIComponent(o).toString();e.put_xwzc9p$(s,a)}}return e}Wl.$metadata$={kind:P,simpleName:"Glas",interfaces:[J]},Object.defineProperty(tu.prototype,"roses",{configurable:!0,get:function(){return null==this.roses_wwovcl$_0?o("roses"):this.roses_wwovcl$_0},set:function(t){this.roses_wwovcl$_0=t}}),nu.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},nu.prototype=Object.create(z.prototype),nu.prototype.constructor=nu,nu.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=p.EnvironmentHelper.hdriEnvironment_cj1d96$(this.local$this$,zo().envMapBasePath+"/syferfontein_0d_clear_1k.rgbe.png",this.local$$receiver,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;this.local$this$.unaryPlus_uv0sim$(x.Skybox.cube_o7q6nm$(t.reflectionMap,1));var e=new l(this.local$this$,0);e.optimizeForDirectionalLight=!0,e.shadowBounds=Oe(new $(-30,0,-30),new $(30,60,30));var i=e,n=new Y;n.isWithScreenSpaceReflections=!0,n.isWithAmbientOcclusion=!0,n.isWithEmissive=!0,n.maxGlobalLights=1,n.useImageBasedLighting_po417x$(t),n.useShadowMaps_gdx315$(Me(i));var r,o=n,a=new Z(this.local$this$,o),u=this.local$this$ProceduralDemo;null!=(r=a.aoPipeline)&&(r.radius=.6);var c=a.contentGroup;c.unaryPlus_uv0sim$(new Wl(d(a.pbrPass.colorTexture),t)),c.unaryPlus_uv0sim$(new uu),c.unaryPlus_uv0sim$(new lu),u.roses=new su,c.unaryPlus_uv0sim$(u.roses);var h=a;return i.drawNode=h.contentGroup,this.local$this$.unaryPlus_uv0sim$(h.renderOutput),s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tu.prototype.setupMainScene_aemszp$=function(t){var e,i,n=new L(null);return n.unaryPlus_uv0sim$(a(n,void 0,eu(n,this))),n.lighting.singleLight_q9zcvo$(iu),t.assetMgr.launch_eln4bt$((e=n,i=this,function(t,n,r){var o=new nu(e,i,t,this,n);return r?o:o.doResume(null)})),n},tu.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,i=t,function(t){return t.section_yfmn31$("Roses",ru(e,i)),t.section_yfmn31$("Scene",ou(e)),s}));var e,i},tu.$metadata$={kind:P,simpleName:"ProceduralDemo",interfaces:[Fo]},su.prototype.makeRose_za3lpa$=function(t){var e,i=new au(t);this.unaryPlus_uv0sim$(pe(void 0,(e=i,function(t){return t.unaryPlus_uv0sim$(e.shaftMesh),t.unaryPlus_uv0sim$(e.shaftLeafMesh),t.unaryPlus_uv0sim$(e.leafMesh),t.unaryPlus_uv0sim$(e.blossomMesh),s})))},au.prototype.applyTint_d7aj7k$=function(t){this.applyTint_0(this.shaftMesh.geometry,t),this.applyTint_0(this.shaftLeafMesh.geometry,t),this.applyTint_0(this.leafMesh.geometry,t),this.applyTint_0(this.blossomMesh.geometry,t)},au.prototype.applyTint_0=function(t,e){var i;i=t.numVertices;for(var n=0;n<i;n++){t.vertexIt.index=n;var r=t.vertexIt;r.color.r=r.color.r*e.r,r.color.g=r.color.g*e.g,r.color.b=r.color.b*e.b,r.color.a=r.color.a*e.a}},au.prototype.makeShaftGeometry_0=function(t){t.transform.push(),t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS);var e,i=new Le;t.circleShape_k80pjh$(i,.2,8);for(var n=this.rand.randomI_vux9f0$(2,3),r=0;r<6;r++){var o=new yt(this.rand.randomF_dleff0$(-1,1),this.rand.randomF_dleff0$(-1,1),0).norm();t.rotate_ad55pp$(this.rand.randomF_dleff0$(0,15),o);var s=this.rand.randomF_dleff0$(2,4),a=r/6;if(t.scale_y2kzbl$(.8,.8,1),t.translate_y2kzbl$(0,0,.1*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.15).mix_y83vuj$(m.Companion.BLACK,.25),t.sample_afatab$(i),t.scale_y2kzbl$(.8,.8,1),t.translate_y2kzbl$(0,0,.2*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.3),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.4*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.55),t.sample_afatab$(i),t.scale_y2kzbl$(1.25,1.25,1),t.translate_y2kzbl$(0,0,.2*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.7).mix_y83vuj$(m.Companion.BLACK,.25),t.sample_afatab$(i),t.scale_y2kzbl$(1.25,1.25,1),t.translate_y2kzbl$(0,0,.1*s),t.color=this.shaftGrad.getColor_y2kzbl$(a+1/6*.85).mix_y83vuj$(m.Companion.BLACK,.55),t.sample_afatab$(i),r===n)this.shaftLeafTransform.set_d4zu6j$(t.transform);else{e=this.rand.randomI_vux9f0$(0,1);for(var l=0;l<e;l++)this.makeThorn_0(t)}}t.translate_y2kzbl$(0,0,.2),t.transform.push(),t.scale_y2kzbl$(1.5,1.5,1),t.sample_afatab$(i),t.transform.pop(),t.translate_y2kzbl$(0,0,.15),t.transform.push(),t.scale_y2kzbl$(3,3,1),t.sample_afatab$(i),t.transform.pop(),t.fillTop_pvgy1j$(i),this.shaftTopTransform.set_d4zu6j$(t.transform),t.transform.pop()},au.prototype.makeThorn_0=function(t){t.transform.push();var e=new yt(this.rand.randomF_dleff0$(-1,1),this.rand.randomF_dleff0$(-1,1),0).norm();t.rotate_ad55pp$(90,e);var i=new yt(0,0,1).rotate_ad55pp$(-90,e).scale_mx4ult$(.1);t.translate_y2kzbl$(0,0,.1);var n=new Le;t.circleShape_k80pjh$(n,.18,8);for(var r=0;r<=4;r++){var o=r/4,s=1-o,a=j.pow(s,1.5);t.scale_y2kzbl$(a,a,1),t.sample_afatab$(n),t.scale_y2kzbl$(1/a,1/a,1),t.translate_y2kzbl$(0,0,.1*(1-o)),t.translate_czzhiu$(i)}t.transform.pop()},au.prototype.makeShaftLeafGeometry_0=function(t){t.transform.mul_d4zu6j$(this.shaftLeafTransform),t.rotate_ad55pp$(this.rand.randomF_dleff0$(0,360),$.Companion.Z_AXIS);for(var e=oe([this.shaftGrad.getColor_y2kzbl$(.7),m.Companion.MD_LIGHT_GREEN_900.toLinear()]),i=0;i<=1;i++){t.transform.push(),t.rotate_ad55pp$(this.rand.randomF_dleff0$(30,45),$.Companion.X_AXIS),t.color=e.getColor_y2kzbl$(0);var n=M(),r=this.rand.randomF_dleff0$(-4,4),o=this.rand.randomF_dleff0$(-4,4);t.transform.push();var s=new Le;t.circleShape_k80pjh$(s,.1,8),t.sample_afatab$(s),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.scale_y2kzbl$(.6,.6,1),t.sample_afatab$(s),t.scale_y2kzbl$(1/.6,1/.6,1),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.scale_y2kzbl$(.4,.4,1),t.sample_afatab$(s),t.scale_y2kzbl$(2.5,2.5,1);for(var a=0;a<=10;a++){t.color=e.getColor_y2kzbl$(a/10),t.translate_y2kzbl$(0,0,.4),t.rotate_ad55pp$(this.rand.randomF_dleff0$(2,4),$.Companion.X_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5)+r,$.Companion.Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5)+o,$.Companion.Z_AXIS);var l=.4*j.pow(.89,i);t.scale_y2kzbl$(l,l,1),t.sample_afatab$(s);var u=(new ze).set_d4zu6j$(t.transform).resetScale();n.add_11rb$(u),t.scale_y2kzbl$(1/l,1/l,1)}t.fillTop_pvgy1j$(s),t.transform.pop();var p=new Le;t.color=m.Companion.MD_LIGHT_GREEN_900.mix_y83vuj$(m.Companion.MD_BROWN_900,.4).toLinear();for(var c=M(),h=-6;h<=6;h++){var d=h/6,f=j.abs(d)-.5,y=j.pow(f,2)-.25,v=new $(-.5*y,.2*h,.15*_(h)*(.7+.3*d*d));c.add_11rb$(v)}var g=new Re(!0);p.shapes.add_11rb$(g);var b,x=g.positions,w=pt(si(c));for(w.x=w.x+.01,x.add_11rb$(w),b=c.iterator();b.hasNext();){var z=b.next(),k=g.positions,S=pt(z);S.x=S.x+.01,k.add_11rb$(S)}var C=g.positions,N=pt(qe(c));N.x=N.x+.01,C.add_11rb$(N);var E,T=g.positions,P=pt(qe(c));for(P.x=P.x-.01,T.add_11rb$(P),E=Be(c).iterator();E.hasNext();){var O=E.next(),A=g.positions,I=pt(O);I.x=I.x-.01,A.add_11rb$(I)}var R=g.positions,L=pt(si(c));L.x=L.x-.01,R.add_11rb$(L);var D=Mi([.6,.9,1,.95,.85,.7,.5,.35,.22,.12,.05]);t.transform.push();var q,F,B=this.rand.randomF_dleff0$(-60,60),U=0;for(q=n.iterator();q.hasNext();){var V=q.next(),G=Ue((U=(F=U)+1|0,F));t.transform.set_d4zu6j$(V),t.rotate_ad55pp$(B,$.Companion.Z_AXIS);for(var H=D.get_za3lpa$(G),W=G<Ae(D)?D.get_za3lpa$(G+1|0)+.05:0,X=1/H,K={v:1},Y=0;Y<=4;Y++){var Z=Y/4;K.v=H*(1-Z)+W*Z,t.translate_y2kzbl$(0,0,.06),t.rotate_ad55pp$(o/5,$.Companion.Z_AXIS),t.transform.push(),t.scale_y2kzbl$(K.v,K.v,K.v),t.sample_afatab$(p),t.transform.pop()}var J=t.color;t.scale_y2kzbl$(.8*K.v,K.v,K.v),t.translate_y2kzbl$(0,0,.02*X),t.color=J.mix_y83vuj$(m.Companion.BLACK,.4),t.sample_afatab$(p),t.translate_y2kzbl$(0,0,.01*X),t.sample_afatab$(p),t.scale_y2kzbl$(1.25,1,1),t.color=J,t.translate_y2kzbl$(0,0,.02*X),t.sample_afatab$(p)}t.transform.pop(),t.transform.pop(),t.rotate_ad55pp$(this.rand.randomF_dleff0$(160,220),$.Companion.Z_AXIS)}},au.prototype.withXyScale_0=function(t,e,i){t.scale_y2kzbl$(e,e,1),i(t),t.scale_y2kzbl$(1/e,1/e,1)},au.prototype.makeLeafGeometry_0=function(t){t.transform.push(),t.transform.mul_d4zu6j$(this.shaftTopTransform);for(var e=0;e<=5;e++){t.transform.push(),t.scale_y2kzbl$(.8,.8,.8),t.rotate_ad55pp$(60*e,$.Companion.Z_AXIS);for(var i=new Le,n=M(),r=.03,o=0;o<=10;o++){var s=(o/10*72-36)*A.DEG_2_RAD,a=5===o?-.05:0;if(5===o){var l=s-2*A.DEG_2_RAD,u=new Tt(j.cos(l)-.7+this.rand.randomF_dleff0$(-r,r),j.sin(l)+this.rand.randomF_dleff0$(-r,r));n.add_11rb$(u)}var p=new Tt(j.cos(s)-.7+this.rand.randomF_dleff0$(-r,r)+a,j.sin(s)+this.rand.randomF_dleff0$(-r,r));if(n.add_11rb$(p),5===o){var c=s+2*A.DEG_2_RAD,h=new Tt(j.cos(c)-.7+this.rand.randomF_dleff0$(-r,r),j.sin(c)+this.rand.randomF_dleff0$(-r,r));n.add_11rb$(h)}}var d,f,_=new Re(!0);for(i.shapes.add_11rb$(_),d=n.iterator();d.hasNext();){var m=d.next();_.xy_dleff0$(1.05*m.x,1.05*m.y)}for(f=Be(n).iterator();f.hasNext();){var y=f.next();_.xy_dleff0$(y.x,y.y)}t.rotate_ad55pp$(90,$.Companion.Y_AXIS);var v,g,b=Ce([.5,.7,.8,.93,1,.95,.8,.7,.6,.35,.2,.1,0]),x=0;for(v=b.iterator();v.hasNext();){var w=v.next();t.color=this.blossomLeafGrad.getColor_y2kzbl$(Ue((x=(g=x)+1|0,g))/Ae(b)),t.translate_y2kzbl$(0,0,.3),t.rotate_ad55pp$(100/b.size+this.rand.randomF_dleff0$(-8,8),$.Companion.NEG_Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-8,8),$.Companion.X_AXIS),t.transform.push(),t.scale_y2kzbl$(w,w,1),t.sample_afatab$(i),t.transform.pop()}t.transform.pop()}t.transform.pop()},au.prototype.makeBlossomGeometry_0=function(t){t.transform.push(),t.transform.mul_d4zu6j$(this.shaftTopTransform);for(var e=0;e<=17;e++){t.transform.push();var i=e/17*.8+.2;t.scale_y2kzbl$(i,i,1.2),t.rotate_ad55pp$(97*e,$.Companion.Z_AXIS);for(var n=new Le,r=M(),o=0;o<=10;o++){var s=(o/10*120-60)*A.DEG_2_RAD,a=new Tt(j.cos(s)-.9+this.rand.randomF_dleff0$(-.03,.03),j.sin(s)+this.rand.randomF_dleff0$(-.03,.03));r.add_11rb$(a)}var l,u,p=new Re(!0);for(n.shapes.add_11rb$(p),l=r.iterator();l.hasNext();){var c=l.next();p.xy_dleff0$(1.05*c.x,1.05*c.y)}for(u=Be(r).iterator();u.hasNext();){var h=u.next();p.xy_dleff0$(h.x,h.y)}t.rotate_ad55pp$(60,$.Companion.Y_AXIS);var d,f,_=Ce([.5,.9,1,.93,.8,.7,.72,.8,.95,1.05,1,.95,.85,.5]),y=0;for(d=_.iterator();d.hasNext();){var v=d.next(),g=Ue((y=(f=y)+1|0,f)),b=v*this.rand.randomF_dleff0$(.95,1.05);t.color=new m(1,.1,.1).toLinear(),t.translate_y2kzbl$(0,0,.2);var x=20*(.5-g/_.size);t.rotate_ad55pp$(x+this.rand.randomF_dleff0$(-5,5),$.Companion.NEG_Y_AXIS),t.rotate_ad55pp$(this.rand.randomF_dleff0$(-5,5),$.Companion.X_AXIS),t.transform.push(),t.scale_y2kzbl$(b,b,1),t.translate_y2kzbl$(.7*(1-b),.7*(1-b),0),t.sample_afatab$(n),t.transform.pop()}t.fillTop_pvgy1j$(n),t.transform.pop()}t.transform.pop()},au.$metadata$={kind:P,simpleName:"GeneratedRose",interfaces:[]},su.$metadata$={kind:P,simpleName:"Roses",interfaces:[J]},lu.prototype.makeGeometry_0=function(t){t.translate_y2kzbl$(0,-1,0),t.rotate_ad55pp$(90,$.Companion.X_AXIS);var e=new Le,i=new Re(!0);e.shapes.add_11rb$(i);for(var n=0;n<=100;n++){var r=2*Wt.PI*n/100;i.xy_dleff0$(30*j.cos(r),30*j.sin(r)),i.uv_dleff0$(0,0)}for(var o=i,s=0;s<=15;s++){var a=s/15;t.transform.push();var l,u,p=(1-a)*Wt.PI,c=1*j.cos(p),h=a*Wt.PI,d=(30+1*j.sin(h))/30,f=.04*(30+1*a*Wt.PI),_=0;for(l=o.texCoords.iterator();l.hasNext();){var m=l.next(),y=Ue((_=(u=_)+1|0,u));m.set_dleff0$(o.positions.get_za3lpa$(y).x,o.positions.get_za3lpa$(y).y).norm().scale_mx4ult$(f)}t.translate_y2kzbl$(0,0,c),t.scale_y2kzbl$(d,d,1),0===s?t.sampleAndFillBottom_afatab$(e):t.sample_afatab$(e),t.transform.pop()}t.fillTop_pvgy1j$(e)},lu.$metadata$={kind:P,simpleName:"Table",interfaces:[ve]},uu.prototype.makeGeometry_0=function(t){t.rotate_ad55pp$(90,$.Companion.NEG_X_AXIS),t.translate_y2kzbl$(-7.5,-2.5,0),t.scale_y2kzbl$(1.8,1.8,1.8),t.translate_y2kzbl$(0,0,.15);var e,i=oe([m.Companion.MD_BROWN,m.Companion.MD_BLUE_300]),n=Di(10);e=n.length-1|0;for(var r=0;r<=e;r++)n[r]=i.getColor_y2kzbl$(r/9).mix_y83vuj$(m.Companion.BLACK,.3);var o=oe(n.slice());this.makeGrid_0(t,i),this.makeTube_0(t,o)},uu.prototype.makeGrid_0=function(t,e){var i=new Le,n=new Re(!0);i.shapes.add_11rb$(n),n.xy_dleff0$(.8,1),n.xy_dleff0$(-.8,1),n.xy_dleff0$(-1,.8),n.xy_dleff0$(-1,-.8),n.xy_dleff0$(-.8,-1),n.xy_dleff0$(.8,-1),n.xy_dleff0$(1,-.8),n.xy_dleff0$(1,.8);for(var r=0;r<24;r++)for(var o=2*Wt.PI*r/24,s=0;s<=50;s++){t.transform.push();var a=s/50,l=180*a*(r%2==0?1:-1);t.color=e.getColor_y2kzbl$(a).toLinear(),t.rotate_ad55pp$(l,$.Companion.Z_AXIS);var u=1+(a-.5)*(a-.5)*4;t.translate_y2kzbl$(j.cos(o)*u,j.sin(o)*u,0),t.translate_y2kzbl$(0,0,10*a),t.rotate_ad55pp$(o*A.RAD_2_DEG,$.Companion.Z_AXIS),t.scale_y2kzbl$(.05,.05,1),t.sample_afatab$(i,0!==s),t.transform.pop()}},uu.prototype.makeTube_0=function(t,e){var i=new Le;t.circleShape_k80pjh$(i,2.2,60),t.transform.push();for(var n=0;n<=1;n++){var r=1===n;t.transform.push(),t.color=e.getColor_y2kzbl$(0).toLinear(),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,!1,r),t.scale_y2kzbl$(1/.97,1/.97,1),t.scale_y2kzbl$(.96,.96,1),t.sample_afatab$(i,void 0,r),t.scale_y2kzbl$(1/.96,1/.96,1),t.scale_y2kzbl$(.95,.95,1);for(var o=0;o<=20;o++){t.transform.push();var s=o/20,a=s*Wt.PI,l=1-.6*j.sin(a),u=s*Wt.PI,p=5-5*j.cos(u);t.color=e.getColor_y2kzbl$(s).toLinear(),t.translate_y2kzbl$(0,0,p),t.scale_y2kzbl$(l,l,1),t.sample_afatab$(i,void 0,r),t.transform.pop(),0===o&&t.fillTop_pvgy1j$(i)}t.translate_y2kzbl$(0,0,10),t.scale_y2kzbl$(1/.95,1/.95,1),t.scale_y2kzbl$(.96,.96,1),t.sample_afatab$(i,void 0,r),t.scale_y2kzbl$(1/.96,1/.96,1),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,void 0,r),t.transform.pop(),t.translate_y2kzbl$(0,0,-.15),t.scale_y2kzbl$(1,1,1.03)}t.transform.pop();for(var c=0;c<=1;c++)t.color=e.getColor_y2kzbl$(c).toLinear(),t.transform.push(),t.translate_y2kzbl$(0,0,10.15*c-.15),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i,!1),t.scale_y2kzbl$(1/.97,1/.97,1),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.03),t.scale_y2kzbl$(1.02,1.02,1),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.09),t.sample_afatab$(i),t.translate_y2kzbl$(0,0,.03),t.scale_y2kzbl$(1/1.02,1/1.02,1),t.sample_afatab$(i),t.scale_y2kzbl$(.97,.97,1),t.sample_afatab$(i),t.transform.pop()},uu.$metadata$={kind:P,simpleName:"Vase",interfaces:[ve]},Object.defineProperty(pu.prototype,"autoRun",{configurable:!0,get:function(){return null==this.autoRun_z6bycc$_0?o("autoRun"):this.autoRun_z6bycc$_0},set:function(t){this.autoRun_z6bycc$_0=t}}),Object.defineProperty(pu.prototype,"facesValLbl",{configurable:!0,get:function(){return null==this.facesValLbl_1vvnvx$_0?o("facesValLbl"):this.facesValLbl_1vvnvx$_0},set:function(t){this.facesValLbl_1vvnvx$_0=t}}),Object.defineProperty(pu.prototype,"vertsValLbl",{configurable:!0,get:function(){return null==this.vertsValLbl_bpoadb$_0?o("vertsValLbl"):this.vertsValLbl_bpoadb$_0},set:function(t){this.vertsValLbl_bpoadb$_0=t}}),Object.defineProperty(pu.prototype,"timeValLbl",{configurable:!0,get:function(){return null==this.timeValLbl_itlx8a$_0?o("timeValLbl"):this.timeValLbl_itlx8a$_0},set:function(t){this.timeValLbl_itlx8a$_0=t}}),cu.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},cu.prototype=Object.create(z.prototype),cu.prototype.constructor=cu,cu.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,zo().modelBasePath+"/bunny.gltf.gz",1,new $(0,-3,0),this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,zo().modelBasePath+"/cow.gltf.gz",1,$.Companion.ZERO,this),this.result_0===w)return w;continue;case 3:if(this.state_0=4,this.result_0=this.local$this$SimplificationDemo.loadModel_0(this.local$$receiver,zo().modelBasePath+"/teapot.gltf.gz",1,new $(0,-1.5,0),this),this.result_0===w)return w;continue;case 4:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},pu.prototype.lateInit_aemszp$=function(t){var e;t.assetMgr.launch_eln4bt$((e=this,function(t,i,n){var r=new cu(e,t,this,i);return n?r:r.doResume(null)})),this.simplify()},pu.prototype.setupMainScene_aemszp$=function(t){var e=new L(null);Pe(e);var i=e.lighting.lights;return i.clear(),i.add_11rb$((new vt).setDirectional_czzhiu$(new $(-1,-1,1)).setColor_y83vuj$(m.Companion.MD_RED.mix_y83vuj$(m.Companion.WHITE,.25).toLinear(),2)),i.add_11rb$((new vt).setDirectional_czzhiu$(new $(1,-1,-1)).setColor_y83vuj$(m.Companion.MD_CYAN.mix_y83vuj$(m.Companion.WHITE,.25).toLinear(),2)),e.unaryPlus_uv0sim$(pe(void 0,hu(this,t))),e},pu.prototype.simplify=function(){var t=new Ve,e=this.dispModel.geometry,i=e.isBatchUpdate;e.isBatchUpdate=!0,this.dispModel.geometry.clear(),this.dispModel.geometry.addGeometry_r7nl2o$(this.srcModel),this.heMesh=new Ui(this.dispModel.geometry,new Bi),this.simplifcationGrade<.999&&Gi(this.heMesh,Vi(this.simplifcationGrade));var n=this.modelWireframe.geometry,r=n.isBatchUpdate;n.isBatchUpdate=!0,this.modelWireframe.clear(),this.heMesh.generateWireframe_6olbr4$(this.modelWireframe,m.Companion.MD_LIME),n.hasChanged=!0,n.isBatchUpdate=r;var o=t.takeSecs();o>.5&&(this.autoRun.isEnabled=!1),this.facesValLbl.text=this.heMesh.faceCount.toString(),this.vertsValLbl.text=this.heMesh.vertCount.toString(),this.timeValLbl.text=Ge(o,2)+" s",e.hasChanged=!0,e.isBatchUpdate=i},du.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[z]},du.prototype=Object.create(z.prototype),du.prototype.constructor=du,du.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i=new c(!0,!1);if(this.state_0=2,this.result_0=h(this.local$$receiver,this.local$name,i,void 0,this),this.result_0===w)return w;continue;case 1:throw this.exception_0;case 2:if(null!=(t=this.result_0)){var n,r=f(t.meshes.values).geometry;n=r.numVertices;for(var o=0;o<n;o++)r.vertexIt.index=o,r.vertexIt.position.scale_mx4ult$(this.local$scale).add_czzhiu$(this.local$offset);var s=Xi(this.local$name,Ie(Hi(this.local$name,47)+1|0,Wi(this.local$name,".gltf.gz")));this.$this.models.put_xwzc9p$(s,r);var a,l=Fe.Log,u=He.DEBUG,p=e.getKClassFromExpression(this.local$$receiver).simpleName;u.level>=l.level.level&&l.printer(u,p,"loaded: "+this.local$name+", bounds: "+Ke(null!=(a=this.$this.models.get_11rb$(this.local$name))?a.bounds:null))}return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},pu.prototype.loadModel_0=function(t,e,i,n,r,o){var s=new du(this,t,e,i,n,r);return o?s:s.doResume(null)},pu.prototype.makeCosGrid_0=function(){var t=new De(ye([$e.Companion.POSITIONS,$e.Companion.NORMALS]));t.color=m.Companion.MD_RED;var e,i=new zi;return i.sizeX=10,i.sizeY=10,i.stepsX=30,i.stepsY=30,i.heightFun=(e=i,function(t,i){var n=10*(t/e.stepsX-.5),r=10*(i/e.stepsY-.5),o=n*n+r*r,s=j.sqrt(o);return 2*j.cos(s)}),t.grid_gtbnl3$(i),t.geometry},pu.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,function(t){return t.section_yfmn31$("Model",fu(e)),t.section_yfmn31$("Scene",$u(e)),t.section_yfmn31$("Simplification",vu(e)),s}));var e},pu.$metadata$={kind:P,simpleName:"SimplificationDemo",interfaces:[Fo]},Object.defineProperty(bu.prototype,"skySystem_0",{configurable:!0,get:function(){return null==this.skySystem_q5b8gb$_0?o("skySystem"):this.skySystem_q5b8gb$_0},set:function(t){this.skySystem_q5b8gb$_0=t}}),bu.prototype.setupMainScene_aemszp$=function(t){var e=new L(null),i=new Yi(e,0);i.maxRange=50;var n=Mi([i]);this.skySystem_0=new Ki(e),this.skySystem_0.isAutoUpdateIblMaps=!1,this.skySystem_0.setupOffscreenPasses();var r,o=this.skySystem_0.envMaps;return e.lighting.singleLight_q9zcvo$((r=this,function(t){return r.skySystem_0.skyPass.syncLights.add_11rb$(t),s})),e.unaryPlus_uv0sim$(this.makeTreeGroundGrid_0(10,n,o)),e.unaryPlus_uv0sim$(x.Skybox.cube_o7q6nm$(d(this.skySystem_0.skyPass.colorTexture))),this.trunkMesh=b(void 0,!0,xu(this,o,n,t)),this.leafMesh=b(void 0,void 0,wu(this,o,n)),e.unaryPlus_uv0sim$(d(this.trunkMesh)),e.unaryPlus_uv0sim$(d(this.leafMesh)),e.unaryPlus_uv0sim$(a(e,void 0,zu(e,this,t))),e},bu.prototype.setupMenu_aemszp$=function(t){return Pr(t,(e=this,function(t){return t.section_yfmn31$("Generator Settings",ku(e)),t.section_yfmn31$("Scene",Su(e)),t.section_yfmn31$("Light",Cu(e)),s}));var e},Nu.prototype.setup_llmhyc$=function(t){N.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inputPos,this.inputAnim,this.inputStrength])},Nu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            float r = clamp(sqrt("+this.inputPos.ref3f_61zpoe$()+".x * "+this.inputPos.ref3f_61zpoe$()+".x + "+this.inputPos.ref3f_61zpoe$()+".z * "+this.inputPos.ref3f_61zpoe$()+".z) - 0.25, 0.0, 2.0) + \n                        clamp("+this.inputPos.ref3f_61zpoe$()+".z - 1.0, 0.0, 1.0);\n            float windTx = cos("+this.inputPos.ref3f_61zpoe$()+".x * 10.0 + "+this.inputPos.ref3f_61zpoe$()+".y * 2.0 + "+this.inputAnim.ref1f_61zpoe$()+") * r * 0.01 * "+this.inputStrength.ref1f_61zpoe$()+";\n            float windTz = sin("+this.inputPos.ref3f_61zpoe$()+".z * 10.0 - "+this.inputPos.ref3f_61zpoe$()+".y * 2.0 + "+this.inputAnim.ref1f_61zpoe$()+" * 1.1f) * r * 0.01 * "+this.inputStrength.ref1f_61zpoe$()+";\n            "+this.outputPos.declare()+" = "+this.inputPos.ref3f_61zpoe$()+" + vec3(windTx, 0.0, windTz);\n        ")},Nu.$metadata$={kind:P,simpleName:"WindNode",interfaces:[N]},bu.prototype.treePbrModel_0=function(t){var i,n,r=vi.Companion.defaultPbrModel_2ufela$(t),o=new F(r);t:do{var s;for(i=zt.ALL,s=r.stages.values.iterator();s.hasNext();){var a=s.next();if(0!=(a.stage.mask&i.mask)){var l,u,p=a.nodes;e:do{var c;for(c=p.iterator();c.hasNext();){var h=c.next();if(St(h.name,"localPosInput")&&e.isType(h,Ut)){u=h;break e}}u=null}while(0);var f=null==(l=u)||e.isType(l,Ut)?l:tt();if(null!=f){n=f;break t}}}n=null}while(0);var _=d(n),m=o.addNode_u9w9by$(new Nu(r.vertexStageGraph));return m.inputPos=_.input,m.inputAnim=o.pushConstantNode1f_61zpoe$("windAnim").output,m.inputStrength=o.pushConstantNode1f_61zpoe$("windStrength").output,_.input=m.outputPos,r},bu.prototype.makeTreeGroundGrid_0=function(t,e,i){var n,r,o;return b(void 0,!0,(n=t/2|0,r=i,o=e,function(t){return t.generate_v2sixm$(Tu(n)),t.shader=v(Pu(r,o,t)),s}))},bu.$metadata$={kind:P,simpleName:"TreeDemo",interfaces:[Fo]},Object.defineProperty(Ou.prototype,"actualKillDistance",{configurable:!0,get:function(){return this.growDistance*this.killDistance}}),Ou.prototype.seedTree=function(){this.populateAttractionPoints_0(),this.treeNodes_0.clear(),this.root_0=new Au(this),this.root_0.set_czzhiu$(this.baseBot);var t=this.treeNodes_0,e=this.root_0;t.add_11rb$(e);for(var i=this.baseTop.subtract_2gj7b4$(this.baseBot,ai()).norm().scale_mx4ult$(this.growDistance),n=this.root_0;n.distance_czzhiu$(this.baseTop)>this.growDistance;){var r=new Au(this);r.set_czzhiu$(n).add_czzhiu$(i),n.addChild_15eqn9$(r),this.treeNodes_0.add_11rb$(r),n=r}},Ou.prototype.generate_za3lpa$=function(t){void 0===t&&(t=1e3);var i,n={v:0};i=He.INFO;var r,o=Ji();for(this.seedTree();r=n.v,n.v=r+1|0,r<t&&this.growSingleStep(););this.finishTree();var s=Fe.Log,a=e.getKClassFromExpression(this).simpleName;i.level>=s.level.level&&s.printer(i,a,"Generation done, took "+n.v+" iterations, "+this.treeNodes_0.size+" nodes in "+Ge(Ji()-o,3)+" ms")},Ou.prototype.growSingleStep=function(){var t,e,i,n,r,o,s,a;for(a=this.attractionPoints_0.iterator();a.hasNext();)a.next().nearestNode=null;for(t=this.treeNodes_0.iterator();t.hasNext();){var l=t.next();if(l.influencingPts.clear(),!l.isFinished)for(this.attractionPointTrav_0.setup_2qa7tb$(l,this.radiusOfInfluence).traverse_7efza$(this.attractionPointsTree_0),e=this.attractionPointTrav_0.result.iterator();e.hasNext();){var u=e.next();u.isOpen&&u.checkNearest_15eqn9$(l)}}for(i=this.attractionPoints_0.iterator();i.hasNext();){var p=i.next();p.isOpen&&null!=(r=null!=(n=p.nearestNode)?n.influencingPts:null)&&r.add_11rb$(p)}var c=M(),h=!1;for(o=this.treeNodes_0.iterator();o.hasNext();){var d=o.next();if(d.influencingPts.isEmpty())d.isFinished=!0;else{var f=ai();for(s=d.influencingPts.iterator();s.hasNext();){var _=s.next();f.plusAssign_czzhiu$(_.subtract_2gj7b4$(d,ai()).norm())}f.norm().scale_mx4ult$(this.growDistance);var m=new Au(this);if(m.set_czzhiu$(d).add_czzhiu$(f),!d.containsChild_15eqn9$(m)){var $;for(d.addChild_15eqn9$(m),c.add_11rb$(m),this.attractionPointTrav_0.setup_2qa7tb$(m,this.actualKillDistance).traverse_7efza$(this.attractionPointsTree_0),$=this.attractionPointTrav_0.result.iterator();$.hasNext();)$.next().isOpen=!1;h=!0}}}return this.treeNodes_0.addAll_brywnq$(c),h},Ou.prototype.finishTree=function(){var t;this.root_0.forEachTopDown_ttqnr0$((t=this,function(e){return null!=e.parent&&(e.plusAssign_czzhiu$(pt(d(e.parent)).subtract_czzhiu$(e).norm().scale_mx4ult$(.5*t.growDistance)),e.x=e.x+t.random.randomF_dleff0$(-.01,.01),e.y=e.y+t.random.randomF_dleff0$(-.01,.01),e.z=e.z+t.random.randomF_dleff0$(-.01,.01)),e.computeTrunkRadiusAndDepth(),e.computeCircumPoints(),s})),this.root_0.forEachBottomUp_ttqnr0$(Mu)},Ou.prototype.buildTrunkMesh_84rojv$=function(t){var e;for(e=this.treeNodes_0.iterator();e.hasNext();)e.next().buildTrunkMesh_84rojv$(t);t.geometry.removeDegeneratedTriangles()},Ou.prototype.buildLeafMesh_84rojv$=function(t){var e;for(e=this.treeNodes_0.iterator();e.hasNext();)e.next().buildLeafMesh_84rojv$(t);var i,n=t.geometry;i=n.numVertices;for(var r=0;r<i;r++){n.vertexIt.index=r;var o=n.vertexIt;null!=this.primaryLightDir?o.normal.dot_czzhiu$(this.primaryLightDir)>0&&o.normal.scale_mx4ult$(-1):o.normal.y<0&&o.normal.scale_mx4ult$(-1)}t.geometry.removeDegeneratedTriangles()},Ou.prototype.populateAttractionPoints_0=function(){var t;for(this.attractionPoints_0.clear(),t=this.distribution.nextPoints_za3lpa$(this.numberOfAttractionPoints).iterator();t.hasNext();){var e=t.next(),i=this.attractionPoints_0,n=new ju(e);i.add_11rb$(n)}this.attractionPointsTree_0=Qi(this.attractionPoints_0)},Object.defineProperty(ju.prototype,"nearestNode",{configurable:!0,get:function(){return this.nearestNode_3mwxa2$_0},set:function(t){this.nearestNode_3mwxa2$_0=t,null==t&&(this.nearestNodeDist=tn.MAX_VALUE)}}),Object.defineProperty(ju.prototype,"nearestNodeDist",{configurable:!0,get:function(){return this.nearestNodeDist_dewf4c$_0},set:function(t){this.nearestNodeDist_dewf4c$_0=t}}),ju.prototype.checkNearest_15eqn9$=function(t){var e=this.distance_czzhiu$(t);e<this.nearestNodeDist&&(this.nearestNode=t,this.nearestNodeDist=e)},ju.$metadata$={kind:P,simpleName:"AttractionPoint",interfaces:[yt]},Au.prototype.addChild_15eqn9$=function(t){this.children.add_11rb$(t),t.parent=this},Au.prototype.containsChild_15eqn9$=function(t){var e;for(e=this.children.iterator();e.hasNext();)if(e.next().isFuzzyEqual_2qa7tb$(t))return!0;return!1},Au.prototype.forEachBottomUp_ttqnr0$=function(t){var e;for(t(this),e=this.children.iterator();e.hasNext();)e.next().forEachBottomUp_ttqnr0$(t)},Au.prototype.forEachTopDown_ttqnr0$=function(t){var e;for(e=this.children.iterator();e.hasNext();)e.next().forEachTopDown_ttqnr0$(t);t(this)},Au.prototype.computeTrunkRadiusAndDepth=function(){var t,i,n;if(this.children.isEmpty())this.radius=.01,this.branchDepth=0;else{var r,o=0;for(r=this.children.iterator();r.hasNext();){var s=r.next().radius;o+=j.pow(s,2.25)}if(this.radius=j.pow(o,1/2.25),1===this.children.size)n=this.children.get_za3lpa$(0).branchDepth;else{var a,l=this.children;t:do{var u=l.iterator();if(!u.hasNext()){a=null;break t}var p=u.next();if(!u.hasNext()){a=p;break t}var c=p.branchDepth;do{var h=u.next(),d=h.branchDepth;e.compareTo(c,d)<0&&(p=h,c=d)}while(u.hasNext());a=p}while(0);n=(null!=(i=null!=(t=a)?t.branchDepth:null)?i:0)+1|0}this.branchDepth=n}null==this.parent&&(this.radius*=3,this.children.get_za3lpa$(0).radius=1.5*this.children.get_za3lpa$(0).radius,this.children.get_za3lpa$(0).computeCircumPoints())},Au.prototype.computeCircumPoints=function(){this.circumPts.clear();var t=null!=this.parent?this.subtract_2gj7b4$(d(this.parent),ai()).norm():this.children.get_za3lpa$(0).subtract_2gj7b4$(this,ai()).norm(),e=pt(t).scale_mx4ult$(-t.times_czzhiu$($.Companion.Z_AXIS)).add_czzhiu$($.Companion.Z_AXIS).norm().scale_mx4ult$(this.radius),i=e.z,n=e.x;e.rotate_ad55pp$(-j.atan2(i,n),t);for(var r=0;r<8;r++){var o=pt(e).add_czzhiu$(this);this.circumPts.add_11rb$(en(o)),e.rotate_ad55pp$(45,t)}},Au.prototype.buildTrunkMesh_84rojv$=function(t){var e=(this.radius>.05?2:1)*this.uScale,i=M();if(null!=this.parent)if(this.children.isEmpty()){var n,r,o,s=t.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);r=s.vertexSizeI;for(var l=1;l<=r;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(o=s.numVertices,s.numVertices=o+1|0,o);var u=s.vertexIt;u.position.set_czzhiu$(this),this.subtract_2gj7b4$(d(this.parent),u.normal).norm(),u.texCoord.set_dleff0$(0,this.texV*this.vScale),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0;for(var p=s.numVertices-1|0,c=0;c<=8;c++){var h,f,_,m=t.geometry;m.checkBufferSizes_za3lpa$(),h=m.vertexSizeF;for(var $=1;$<=h;$++)m.dataF.plusAssign_mx4ult$(0);f=m.vertexSizeI;for(var y=1;y<=f;y++)m.dataI.plusAssign_za3lpa$(0);m.vertexIt.index=(_=m.numVertices,m.numVertices=_+1|0,_);var v=m.vertexIt;v.position.set_czzhiu$(d(this.parent).circumPts.get_za3lpa$(c%8)),d(this.parent).circumPts.get_za3lpa$(c%8).subtract_2gj7b4$(d(this.parent),v.normal).norm(),v.texCoord.set_dleff0$(c/8*e,d(this.parent).texV*this.vScale),m.bounds.add_czzhiu$(m.vertexIt.position),m.hasChanged=!0;var g=m.numVertices-1|0;i.add_11rb$(g)}for(var b=0;b<8;b++)t.geometry.addTriIndices_qt1dr2$(p,i.get_za3lpa$(b),i.get_za3lpa$(b+1|0))}else{for(var x=0;x<=8;x++){var w,z,k,S=t.geometry;S.checkBufferSizes_za3lpa$(),w=S.vertexSizeF;for(var C=1;C<=w;C++)S.dataF.plusAssign_mx4ult$(0);z=S.vertexSizeI;for(var N=1;N<=z;N++)S.dataI.plusAssign_za3lpa$(0);S.vertexIt.index=(k=S.numVertices,S.numVertices=k+1|0,k);var E=S.vertexIt;E.position.set_czzhiu$(this.circumPts.get_za3lpa$(x%8)),this.circumPts.get_za3lpa$(x%8).subtract_2gj7b4$(this,E.normal).norm(),E.texCoord.set_dleff0$(x/8*e,this.texV*this.vScale),S.bounds.add_czzhiu$(S.vertexIt.position),S.hasChanged=!0;var T=S.numVertices-1|0;i.add_11rb$(T);var P,O,j,A=t.geometry;A.checkBufferSizes_za3lpa$(),P=A.vertexSizeF;for(var I=1;I<=P;I++)A.dataF.plusAssign_mx4ult$(0);O=A.vertexSizeI;for(var R=1;R<=O;R++)A.dataI.plusAssign_za3lpa$(0);A.vertexIt.index=(j=A.numVertices,A.numVertices=j+1|0,j);var L=A.vertexIt;L.position.set_czzhiu$(d(this.parent).circumPts.get_za3lpa$(x%8)),d(this.parent).circumPts.get_za3lpa$(x%8).subtract_2gj7b4$(d(this.parent),L.normal).norm(),L.texCoord.set_dleff0$(x/8*e,d(this.parent).texV*this.vScale),A.bounds.add_czzhiu$(A.vertexIt.position),A.hasChanged=!0;var D=A.numVertices-1|0;i.add_11rb$(D)}for(var q=0;q<8;q++)t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(2*q|0),i.get_za3lpa$(1+(2*q|0)|0),i.get_za3lpa$(2+(2*q|0)|0)),t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(1+(2*q|0)|0),i.get_za3lpa$(3+(2*q|0)|0),i.get_za3lpa$(2+(2*q|0)|0))}},Au.prototype.buildLeafMesh_84rojv$=function(t){if(this.branchDepth<=1&&null!=this.parent){var e=this.subtract_2gj7b4$(d(this.parent),ai()),i=e.length();e.norm();for(var n=1;n<=20;n++){this.$outer,t.transform.push();var r,o=this.$outer,s=pt(this.circumPts.get_za3lpa$(0)).subtract_czzhiu$(this).norm().scale_mx4ult$(this.radius+o.random.randomF_dleff0$(0,.15));s.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),e);var a=pt(e).scale_mx4ult$(o.random.randomF_dleff0$(0,i)).add_czzhiu$(s).add_czzhiu$(this);t.translate_czzhiu$(a);var l=0;do{e.dot_czzhiu$($.Companion.X_AXIS)<e.dot_czzhiu$($.Companion.Z_AXIS)?t.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),$.Companion.X_AXIS):t.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),$.Companion.Z_AXIS),t.rotate_ad55pp$(o.random.randomF_dleff0$(0,360),e);var u=null!=o.primaryLightDir;if(u){var p=t.transform.transform_w1lst9$(pt($.Companion.NEG_Z_AXIS),0).dot_czzhiu$(o.primaryLightDir);u=j.abs(p)<.1}}while(u&&(l=(r=l)+1|0,r<3));var c=t.vertex_n440gp$(new $(0,-.022,0),$.Companion.NEG_Z_AXIS,new Tt(0,0)),h=t.vertex_n440gp$(new $(0,.022,0),$.Companion.NEG_Z_AXIS,new Tt(0,1)),f=t.vertex_n440gp$(new $(.1,.022,0),$.Companion.NEG_Z_AXIS,new Tt(1,1)),_=t.vertex_n440gp$(new $(.1,-.022,0),$.Companion.NEG_Z_AXIS,new Tt(1,0));t.geometry.addIndices_pmhfmb$(new Int32Array([c,h,f,c,f,_])),t.transform.pop()}}},Au.$metadata$={kind:P,simpleName:"TreeNode",interfaces:[yt]},Ou.$metadata$={kind:P,simpleName:"TreeGenerator",interfaces:[]},Iu.prototype.seed_0=function(){this.seedPts_0.clear();for(var t=1;t<=10;t++){var e=this.seedPts_0,i=this.nextPointInBounds_0();e.add_11rb$(i)}},Iu.prototype.drawBorders_nl2my4$=function(t){var e;e=this.borders_0;for(var i=0;i!==e.size;++i){var n,r=i/this.borders_0.size*2*Wt.PI,o=this.borders_0.get_za3lpa$(i);n=o.size;for(var s=1;s<n;s++){var a=new $(-j.cos(r)*o.get_za3lpa$(s-1|0).x,o.get_za3lpa$(s-1|0).y,-j.sin(r)*o.get_za3lpa$(s-1|0).x),l=new $(-j.cos(r)*o.get_za3lpa$(s).x,o.get_za3lpa$(s).y,-j.sin(r)*o.get_za3lpa$(s).x);t.addLine_b8opkg$(a,m.Companion.ORANGE,l,m.Companion.ORANGE)}}},Iu.prototype.nextPoints_za3lpa$=function(t){return this.seed_0(),rn.prototype.nextPoints_za3lpa$.call(this,t)},Iu.prototype.nextPoint=function(){var t={v:null};t:for(;;){t.v=this.nextPointInBounds_0();var i,n=this.seedPts_0;e:do{var r=n.iterator();if(!r.hasNext()){i=null;break e}var o=r.next();if(!r.hasNext()){i=o;break e}var s=o.sqrDistance_czzhiu$(t.v);do{var a=r.next(),l=a.sqrDistance_czzhiu$(t.v);e.compareTo(s,l)>0&&(o=a,s=l)}while(r.hasNext());i=o}while(0);if(d(i).distance_czzhiu$(t.v)<this.random_0.randomF())break t}return t.v},Iu.prototype.nextPointInBounds_0=function(){for(var t=.5*this.width,e=.5*this.height;;){this.tmpPt1_0.set_y2kzbl$(this.random_0.randomF_dleff0$(-t,t),this.centerY+this.random_0.randomF_dleff0$(-e,e),this.random_0.randomF_dleff0$(-t,t));var i=this.tmpPt1_0.x*this.tmpPt1_0.x+this.tmpPt1_0.z*this.tmpPt1_0.z,n=j.sqrt(i),r=this.tmpPt1_0.y,o=this.tmpPt1_0.z,s=this.tmpPt1_0.x,a=j.atan2(o,s)/(2*Wt.PI)+.5,l=(a<0?0:a>1?1:a)*this.borders_0.size,u=$t(l),p=this.borders_0.size-1|0,c=j.min(u,p),h=(c+1|0)%this.borders_0.size,d=l-c,f=1-d;if(this.nearestEdge_0(n,r,this.borders_0.get_za3lpa$(c),this.e00_0,this.e01_0),this.nearestEdge_0(n,r,this.borders_0.get_za3lpa$(h),this.e10_0,this.e11_0),this.e00_0.scale_mx4ult$(f).add_czzhjp$(this.e10_0.scale_mx4ult$(d)),this.e01_0.scale_mx4ult$(f).add_czzhjp$(this.e11_0.scale_mx4ult$(d)),(n-this.e00_0.x)*(this.e01_0.y-this.e00_0.y)-(r-this.e00_0.y)*(this.e01_0.x-this.e00_0.x)>0)return en(this.tmpPt1_0)}},Iu.prototype.nearestEdge_0=function(t,e,i,n,r){var o,s=tn.MAX_VALUE,a=0;o=i.size-1|0;for(var l=0;l<o;l++){var u=this.edgeDist_0(t,e,n.set_czzhjp$(i.get_za3lpa$(l)),r.set_czzhjp$(i.get_za3lpa$(l+1|0)));u<s&&(s=u,a=l)}n.set_czzhjp$(i.get_za3lpa$(a)),r.set_czzhjp$(i.get_za3lpa$(a+1|0))},Iu.prototype.edgeDist_0=function(t,e,i,n){var r;n.subtract_q2ruao$(i,this.tmpPt2_0);var o=(t*this.tmpPt2_0.x+e*this.tmpPt2_0.y-i.times_czzhjp$(this.tmpPt2_0))/this.tmpPt2_0.times_czzhjp$(this.tmpPt2_0);if(o<0){var s=i.x-t,a=i.y-e,l=s*s+a*a;r=j.sqrt(l)}else if(o>1){var u=n.x-t,p=n.y-e,c=u*u+p*p;r=j.sqrt(c)}else{this.tmpPt2_0.scale_mx4ult$(o).add_czzhjp$(i);var h=this.tmpPt2_0.x-t,d=this.tmpPt2_0.y-e,f=h*h+d*d;r=j.sqrt(f)}return r},Iu.$metadata$={kind:P,simpleName:"TreeTopPointDistribution",interfaces:[rn]},r["kool-kool-core"]=i,Object.defineProperty(un,"Companion",{get:bn});var Du=t.de||(t.de={}),qu=Du.fabmax||(Du.fabmax={}),Fu=qu.kool||(qu.kool={}),Bu=Fu.demo||(Fu.demo={});Bu.AoDemo=un,Object.defineProperty(xn,"Companion",{get:Dn});var Uu=Bu.atmosphere||(Bu.atmosphere={});Uu.AtmosphereDemo=xn,Object.defineProperty(qn,"Companion",{get:Un}),Uu.AtmosphericScatteringShader=qn,Uu.EarthCamTransform=Kn,Object.defineProperty(Yn,"Companion",{get:Qn}),Uu.EarthShader=Yn,Uu.HeightMapNode=er,Uu.SpherePosNode=ir,Uu.EarthRoughnessNode=nr,Uu.EarthOceanNode=rr,Object.defineProperty(fr,"Companion",{get:$r}),or.StarShader=fr,Uu.SkyPass=or,Object.defineProperty(xr,"Companion",{get:Tr}),Uu.SphereGridSystem=xr,Bu.controlUi_egq1ks$=Pr,Bu.ControlUiBuilder=Or,Object.defineProperty(Vr,"Companion",{get:Wr}),Bu.UiImage=Vr,Object.defineProperty(Kr,"Companion",{get:fo}),Bu.DeferredDemo=Kr,Bu.demo_pk4zx3$=_o,Object.defineProperty(mo,"Companion",{get:zo}),Bu.Demo=mo,Bu.DemoEntry=Lo,Bu.Cycler_init_i5x0yv$=qo,Bu.Cycler=Do,Bu.DemoScene=Fo,Bu.GltfDemo=Bo,Bu.HelloWorldDemo=is,Bu.HelloGltfDemo=ns,Bu.helloWorldScene=ls,Bu.helloGltfScene_aemszp$=fs,Bu.InstanceDemo=_s,Object.defineProperty(ks,"Companion",{get:qs}),Bu.MultiLightDemo=ks;var Vu=Bu.pbr||(Bu.pbr={});Vu.ColorGridContent=Fs,Gs.PbrContent=ra,Gs.SphereProto=oa,Object.defineProperty(Gs,"Companion",{get:da}),Vu.PbrDemo=Gs,fa.MaterialMaps=ba,Object.defineProperty(fa,"Companion",{get:Rl}),Vu.PbrMaterialContent=fa,Object.defineProperty(Ll,"Companion",{get:Hl}),Vu.RoughnesMetalGridContent=Ll,Object.defineProperty(Wl,"Companion",{get:Ql});var Gu=Bu.procedural||(Bu.procedural={});return Gu.Glas=Wl,Gu.ProceduralDemo=tu,Gu.Roses=su,Gu.Table=lu,Gu.Vase=uu,Bu.SimplificationDemo=pu,Bu.TreeDemo=bu,Bu.TreeGenerator=Ou,Bu.TreeTopPointDistribution=Iu,t.main=Ru,t.getParams=Lu,Ru(),t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1),i(4),i(13)],void 0===(o="function"==typeof(n=function(t,e,n,r){"use strict";var o=t.$$importsForInline$$||(t.$$importsForInline$$={}),s=e.kotlin.Unit,a=e.kotlin.coroutines.intrinsics.COROUTINE_SUSPENDED,l=e.kotlin.coroutines.CoroutineImpl,u=e.kotlin.text.startsWith_7epoxm$,p=n.kotlinx.coroutines.CoroutineScope,c=e.throwCCE,h=n.kotlinx.coroutines.launch_s496o7$,d=e.kotlin.text.indexOf_8eortd$,f=e.kotlin.ranges.until_dqglrj$,_=e.kotlin.text.substring_fc3b62$,m=n.kotlinx.coroutines.CompletableDeferred_xptg6w$,$=e.Kind.CLASS,y=e.Kind.OBJECT,v=n.kotlinx.coroutines.Job_5dx9e$,g=n.kotlinx.coroutines.channels.Channel_ww73n8$,b=e.kotlin.collections.mutableListOf_i5x0yv$,x=e.ensureNotNull,w=e.kotlin.collections.ArrayList_init_ww73n8$,z=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,k=n.kotlinx.coroutines.selects.SelectBuilderImpl,S=Error,C=e.Long.ZERO,N=e.toChar,E=e.toBoxedChar,T=e.kotlin.Enum,P=e.throwISE,O=e.unboxChar,M=e.kotlin.collections.ArrayList_init_287e2$,j=e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,A=Math,I=Array,R=e.kotlin.collections.get_indices_gzk92b$,L=e.kotlin.ranges.reversed_zf1xzc$,D=e.kotlin.Exception,q=e.kotlin.collections.first_2p1efm$,F=e.kotlin.collections.last_2p1efm$,B=e.numberToInt,U=e.kotlin.math,V=Object,G=e.kotlin.IllegalArgumentException_init_pdl1vj$,H=e.kotlin.io.print_s8jyv4$,W=e.kotlin.io.println,X=e.defineInlineFunction,K=e.wrapFunction,Y=e.Kind.INTERFACE,Z=(e.kotlin.collections.get_indices_m7z4lg$,e.kotlin.collections.get_indices_tmsbgo$),J=e.kotlin.random.Random_za3lpa$,Q=e.kotlin.collections.shuffled_4173s5$,tt=e.kotlin.collections.checkIndexOverflow_za3lpa$,et=e.Long.fromInt(698769069),it=e.kotlin.math.abs_za3lpa$,nt=e.kotlin.math.abs_s8cxhz$,rt=e.Long.MAX_VALUE,ot=e.kotlin.js.internal.FloatCompanionObject,st=e.hashCode,at=e.kotlin.math.round_14dthe$,lt=e.kotlin.collections.Iterable,ut=e.kotlin.collections.removeAll_qafx1e$,pt=e.kotlin.Pair,ct=e.throwUPAE,ht=e.kotlin.collections.LinkedHashSet_init_287e2$,dt=e.kotlin.NoSuchElementException_init,ft=e.kotlin.collections.Iterator,_t=e.kotlin.to_ujzrz7$,mt=e.kotlin.NoSuchElementException,$t=e.kotlin.collections.sortWith_nqfjgj$,yt=e.kotlin.Comparator,vt=e.kotlin.js.internal.DoubleCompanionObject,gt=e.kotlin.collections.emptySet_287e2$,bt=e.kotlin.IllegalStateException_init_pdl1vj$,xt=e.kotlin.collections.get_lastIndex_55thoc$,wt=e.kotlin.collections.addAll_ipc267$,zt=e.kotlin.collections.filterNotNull_m3lr2h$,kt=e.kotlin.ULong,St=e.kotlin.collections.addAll_ye1y7v$,Ct=e.toString,Nt=e.kotlin.collections.emptyList_287e2$,Et=e.kotlin.collections.mutableMapOf_qfcya0$,Tt=e.kotlin.RuntimeException_init_pdl1vj$,Pt=e.Long.ONE,Ot=e.kotlin.text.StringBuilder_init,Mt=e.kotlin.collections.joinToString_fmv235$,jt=e.kotlin.io.println_s8jyv4$,At=e.kotlin.collections.listOf_i5x0yv$,It=e.kotlin.text.substringBefore_8cymmc$,Rt=e.kotlin.collections.mutableSetOf_i5x0yv$,Lt=e.equals,Dt=e.kotlin.math.roundToInt_yrwdxr$,qt=e.toByte,Ft=e.kotlin.collections.listOf_mh5how$,Bt=e.kotlin.ranges.IntRange,Ut=e.kotlin.text.toBoolean_5cw0du$,Vt=e.kotlin.text.toInt_pdl1vz$,Gt=e.kotlin.text.toDouble_pdl1vz$,Ht=e.kotlin.collections.joinTo_gcc71v$,Wt=e.kotlin.collections.MutableMap,Xt=e.kotlin.text.lastIndexOf_8eortd$,Kt=e.getCallableRef,Yt=e.kotlin.collections.maxOrNull_lvsncp$,Zt=e.kotlin.collections.distinct_7wnvza$,Jt=e.kotlin.collections.toList_7wnvza$,Qt=e.kotlin.collections.joinToString_cph1y3$,te=e.Long.fromInt(1431655765),ee=new e.Long(-1431655766,0),ie=e.Long.fromInt(858993459),ne=new e.Long(-858993460,0),re=e.Long.fromInt(252645135),oe=new e.Long(-252645136,0),se=e.Long.fromInt(16711935),ae=new e.Long(-16711936,0),le=e.kotlin.collections.shuffled_7wnvza$,ue=e.kotlin.collections.firstOrNull_2p1efm$,pe=e.kotlin.text.toInt_6ic1pp$,ce=e.kotlin.NumberFormatException,he=e.kotlin.collections.get_lastIndex_m7z4lg$,de=e.kotlin.collections.first_us0mfu$,fe=e.kotlin.collections.last_us0mfu$,_e=e.kotlin.collections.sortWith_iwcb0m$,me=e.kotlin.text.trimIndent_pdl1vz$,$e=e.kotlin.text.get_indices_gw00vp$,ye=e.kotlin.collections.Map,ve=r.kotlinx.serialization.internal.NullableSerializer,ge=e.kotlin.collections.setOf_i5x0yv$,be=r.kotlinx.serialization.internal.PluginGeneratedSerialDescriptor,xe=r.kotlinx.serialization.UnknownFieldException,we=r.kotlinx.serialization.internal,ze=r.kotlinx.serialization.internal.GeneratedSerializer,ke=r.kotlinx.serialization.MissingFieldException,Se=r.kotlinx.serialization.internal.ArrayListSerializer,Ce=e.kotlin.IndexOutOfBoundsException,Ne=e.kotlin.text.contains_sgbm27$,Ee=e.kotlin.text.endsWith_7epoxm$,Te=e.kotlin.text.decodeToString_964n91$,Pe=e.getKClass,Oe=e.createKType,Me=e.kotlin.collections.contains_2ws7j4$,je=r.kotlinx.serialization.json.Json_x26noe$,Ae=r.kotlinx.serialization.serializer_ca95z9$,Ie=r.kotlinx.serialization.KSerializer,Re=r.kotlinx.serialization.internal.LinkedHashMapSerializer,Le=e.kotlin.isNaN_81szk$,De=e.kotlin.collections.toList_us0mfu$,qe=(e.kotlin.collections.MutableList,e.kotlin.ranges.step_xsgg7u$),Fe=e.kotlin.collections.toMutableList_4c7yge$,Be=e.kotlin.text.iterator_gw00vp$,Ue=e.kotlin.collections.toIntArray_fx3nzu$,Ve=new e.Long(-1,0),Ge=e.kotlin.collections.copyToArray,He=e.kotlin.collections.Collection,We=e.kotlin.NotImplementedError,Xe=(e.kotlin.collections.MutableIterator,e.kotlin.collections.MutableCollection,e.kotlin.collections.removeAll_uhyeqt$),Ke=e.kotlin.collections.MutableMap.MutableEntry,Ye=e.kotlin.math.roundToLong_yrwdxr$,Ze=e.kotlin.IllegalStateException_init,Je=n.kotlinx.coroutines.async_pda6u4$,Qe=e.kotlin.text.lines_gw00vp$,ti=e.kotlin.text.StringBuilder;function ei(t){return function(i){var n=new k(i);try{t(n)}catch(t){if(!e.isType(t,S))throw t;n.handleBuilderException_tcv7n7$(t)}return n.getResult()}}function ii(t){di(),this.assetsBaseDir=t,this.job=v(),this.awaitedAssetsChannel_nphlkp$_0=g(),this.assetRefChannel_acu3lu$_0=g(2147483647),this.loadedAssetChannel_obd8me$_0=g();for(var e=w(8),i=0;i<8;i++){var n=e.add_11rb$;this.loadWorker_lf86lv$_0(this.assetRefChannel_acu3lu$_0,this.loadedAssetChannel_obd8me$_0),n.call(e,s)}this.workers_dv6i5$_0=e,this.loader_lxnfnl$_0=this.launch_eln4bt$(yi)}function ni(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetRefs=t,this.local$closure$loadedAssets=e,this.local$tmp$=void 0,this.local$$receiver=i}function ri(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$ref=e}function oi(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$block=t,this.local$this$AssetManager=e}function si(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e}function ai(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e,this.local$format=i}function li(t,e,i,n,r,o){l.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$awaitedAsset=void 0,this.local$assetPath=e,this.local$tilesX=i,this.local$tilesY=n,this.local$format=r}function ui(t,e,i,n,r,o,s,a){l.call(this,a),this.exceptionState_0=1,this.$this=t,this.local$ftd=void 0,this.local$bkd=void 0,this.local$ltd=void 0,this.local$rtd=void 0,this.local$upd=void 0,this.local$ft=e,this.local$bk=i,this.local$lt=n,this.local$rt=r,this.local$up=o,this.local$dn=s}function pi(t,e,i){this.$outer=t,void 0===i&&(i=m(this.$outer.job)),this.ref=e,this.awaiting=i}function ci(){hi=this,this.NUM_LOAD_WORKERS=8}gi.prototype=Object.create(vi.prototype),gi.prototype.constructor=gi,bi.prototype=Object.create(vi.prototype),bi.prototype.constructor=bi,wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,zi.prototype=Object.create(xi.prototype),zi.prototype.constructor=zi,Pi.prototype=Object.create(T.prototype),Pi.prototype.constructor=Pi,Mi.prototype=Object.create(Pi.prototype),Mi.prototype.constructor=Mi,Ii.prototype=Object.create(Pi.prototype),Ii.prototype.constructor=Ii,Di.prototype=Object.create(Pi.prototype),Di.prototype.constructor=Di,Bi.prototype=Object.create(Pi.prototype),Bi.prototype.constructor=Bi,Gi.prototype=Object.create(Pi.prototype),Gi.prototype.constructor=Gi,Xi.prototype=Object.create(Pi.prototype),Xi.prototype.constructor=Xi,Ti.prototype=Object.create(Ei.prototype),Ti.prototype.constructor=Ti,pn.prototype=Object.create(D.prototype),pn.prototype.constructor=pn,dn.prototype=Object.create(hn.prototype),dn.prototype.constructor=dn,kn.prototype=Object.create(bn.prototype),kn.prototype.constructor=kn,Mn.prototype=Object.create(En.prototype),Mn.prototype.constructor=Mn,ur.prototype=Object.create(rr.prototype),ur.prototype.constructor=ur,$r.prototype=Object.create(hr.prototype),$r.prototype.constructor=$r,zr.prototype=Object.create(vr.prototype),zr.prototype.constructor=zr,Or.prototype=Object.create(Sr.prototype),Or.prototype.constructor=Or,Fr.prototype=Object.create(Ir.prototype),Fr.prototype.constructor=Fr,Xr.prototype=Object.create(Ur.prototype),Xr.prototype.constructor=Xr,io.prototype=Object.create(Yr.prototype),io.prototype.constructor=io,uo.prototype=Object.create(ro.prototype),uo.prototype.constructor=uo,No.prototype=Object.create(co.prototype),No.prototype.constructor=No,jo.prototype=Object.create(Sr.prototype),jo.prototype.constructor=jo,vf.prototype=Object.create(Of.prototype),vf.prototype.constructor=vf,Po.prototype=Object.create(vf.prototype),Po.prototype.constructor=Po,XS.prototype=Object.create(WS.prototype),XS.prototype.constructor=XS,YS.prototype=Object.create(XS.prototype),YS.prototype.constructor=YS,Xo.prototype=Object.create(hC.prototype),Xo.prototype.constructor=Xo,Zo.prototype=Object.create(T.prototype),Zo.prototype.constructor=Zo,la.prototype=Object.create(Al.prototype),la.prototype.constructor=la,$a.prototype=Object.create(la.prototype),$a.prototype.constructor=$a,fs.prototype=Object.create($a.prototype),fs.prototype.constructor=fs,vs.prototype=Object.create(rp.prototype),vs.prototype.constructor=vs,ys.prototype=Object.create(fs.prototype),ys.prototype.constructor=ys,Bs.prototype=Object.create(qs.prototype),Bs.prototype.constructor=Bs,Fs.prototype=Object.create(Ds.prototype),Fs.prototype.constructor=Fs,Vs.prototype=Object.create(qs.prototype),Vs.prototype.constructor=Vs,Us.prototype=Object.create(Ds.prototype),Us.prototype.constructor=Us,Hs.prototype=Object.create(qs.prototype),Hs.prototype.constructor=Hs,Gs.prototype=Object.create(Ds.prototype),Gs.prototype.constructor=Gs,Xs.prototype=Object.create(qs.prototype),Xs.prototype.constructor=Xs,Ws.prototype=Object.create(Ds.prototype),Ws.prototype.constructor=Ws,Ys.prototype=Object.create(qs.prototype),Ys.prototype.constructor=Ys,Ks.prototype=Object.create(Ds.prototype),Ks.prototype.constructor=Ks,Zs.prototype=Object.create(T.prototype),Zs.prototype.constructor=Zs,da.prototype=Object.create(T.prototype),da.prototype.constructor=da,ga.prototype=Object.create(T.prototype),ga.prototype.constructor=ga,ya.prototype=Object.create(la.prototype),ya.prototype.constructor=ya,pl.prototype=Object.create(T.prototype),pl.prototype.constructor=pl,ml.prototype=Object.create(T.prototype),ml.prototype.constructor=ml,Cl.prototype=Object.create(T.prototype),Cl.prototype.constructor=Cl,Rl.prototype=Object.create(Al.prototype),Rl.prototype.constructor=Rl,ql.prototype=Object.create(T.prototype),ql.prototype.constructor=ql,Vl.prototype=Object.create(rp.prototype),Vl.prototype.constructor=Vl,Gl.prototype=Object.create(rp.prototype),Gl.prototype.constructor=Gl,Hl.prototype=Object.create(rp.prototype),Hl.prototype.constructor=Hl,Wl.prototype=Object.create(rp.prototype),Wl.prototype.constructor=Wl,Xl.prototype=Object.create(rp.prototype),Xl.prototype.constructor=Xl,Kl.prototype=Object.create(rp.prototype),Kl.prototype.constructor=Kl,Yl.prototype=Object.create(rp.prototype),Yl.prototype.constructor=Yl,Zl.prototype=Object.create(rp.prototype),Zl.prototype.constructor=Zl,Ql.prototype=Object.create(rp.prototype),Ql.prototype.constructor=Ql,eu.prototype=Object.create(rp.prototype),eu.prototype.constructor=eu,iu.prototype=Object.create(rp.prototype),iu.prototype.constructor=iu,nu.prototype=Object.create(rp.prototype),nu.prototype.constructor=nu,ru.prototype=Object.create(rp.prototype),ru.prototype.constructor=ru,ou.prototype=Object.create(rp.prototype),ou.prototype.constructor=ou,su.prototype=Object.create(rp.prototype),su.prototype.constructor=su,au.prototype=Object.create(rp.prototype),au.prototype.constructor=au,lu.prototype=Object.create(rp.prototype),lu.prototype.constructor=lu,uu.prototype=Object.create(lu.prototype),uu.prototype.constructor=uu,pu.prototype=Object.create(lu.prototype),pu.prototype.constructor=pu,cu.prototype=Object.create(lu.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(lu.prototype),hu.prototype.constructor=hu,du.prototype=Object.create(lu.prototype),du.prototype.constructor=du,fu.prototype=Object.create(rp.prototype),fu.prototype.constructor=fu,_u.prototype=Object.create(rp.prototype),_u.prototype.constructor=_u,mu.prototype=Object.create(rp.prototype),mu.prototype.constructor=mu,$u.prototype=Object.create(rp.prototype),$u.prototype.constructor=$u,yu.prototype=Object.create(rp.prototype),yu.prototype.constructor=yu,vu.prototype=Object.create(rp.prototype),vu.prototype.constructor=vu,bu.prototype=Object.create(gu.prototype),bu.prototype.constructor=bu,xu.prototype=Object.create(gu.prototype),xu.prototype.constructor=xu,wu.prototype=Object.create(gu.prototype),wu.prototype.constructor=wu,zu.prototype=Object.create(gu.prototype),zu.prototype.constructor=zu,ku.prototype=Object.create(gu.prototype),ku.prototype.constructor=ku,Su.prototype=Object.create(gu.prototype),Su.prototype.constructor=Su,Cu.prototype=Object.create(gu.prototype),Cu.prototype.constructor=Cu,Nu.prototype=Object.create(gu.prototype),Nu.prototype.constructor=Nu,Eu.prototype=Object.create(gu.prototype),Eu.prototype.constructor=Eu,Tu.prototype=Object.create(gu.prototype),Tu.prototype.constructor=Tu,Pu.prototype=Object.create(bu.prototype),Pu.prototype.constructor=Pu,Ou.prototype=Object.create(xu.prototype),Ou.prototype.constructor=Ou,Mu.prototype=Object.create(wu.prototype),Mu.prototype.constructor=Mu,ju.prototype=Object.create(zu.prototype),ju.prototype.constructor=ju,Au.prototype=Object.create(Su.prototype),Au.prototype.constructor=Au,Iu.prototype=Object.create(Cu.prototype),Iu.prototype.constructor=Iu,Ru.prototype=Object.create(Nu.prototype),Ru.prototype.constructor=Ru,Lu.prototype=Object.create(Eu.prototype),Lu.prototype.constructor=Lu,Du.prototype=Object.create(rp.prototype),Du.prototype.constructor=Du,qu.prototype=Object.create(rp.prototype),qu.prototype.constructor=qu,Fu.prototype=Object.create(rp.prototype),Fu.prototype.constructor=Fu,Bu.prototype=Object.create(rp.prototype),Bu.prototype.constructor=Bu,Uu.prototype=Object.create(rp.prototype),Uu.prototype.constructor=Uu,Vu.prototype=Object.create(rp.prototype),Vu.prototype.constructor=Vu,Gu.prototype=Object.create(rp.prototype),Gu.prototype.constructor=Gu,Hu.prototype=Object.create(rp.prototype),Hu.prototype.constructor=Hu,Wu.prototype=Object.create(rp.prototype),Wu.prototype.constructor=Wu,Xu.prototype=Object.create(rp.prototype),Xu.prototype.constructor=Xu,Ju.prototype=Object.create(Zu.prototype),Ju.prototype.constructor=Ju,Qu.prototype=Object.create(Zu.prototype),Qu.prototype.constructor=Qu,ip.prototype=Object.create(ep.prototype),ip.prototype.constructor=ip,np.prototype=Object.create(ep.prototype),np.prototype.constructor=np,ap.prototype=Object.create(sp.prototype),ap.prototype.constructor=ap,lp.prototype=Object.create(rp.prototype),lp.prototype.constructor=lp,pp.prototype=Object.create(rp.prototype),pp.prototype.constructor=pp,hp.prototype=Object.create(rp.prototype),hp.prototype.constructor=hp,cp.prototype=Object.create(sp.prototype),cp.prototype.constructor=cp,dp.prototype=Object.create(rp.prototype),dp.prototype.constructor=dp,_p.prototype=Object.create(rp.prototype),_p.prototype.constructor=_p,$p.prototype=Object.create(rp.prototype),$p.prototype.constructor=$p,yp.prototype=Object.create(rp.prototype),yp.prototype.constructor=yp,vp.prototype=Object.create(rp.prototype),vp.prototype.constructor=vp,wp.prototype=Object.create(rp.prototype),wp.prototype.constructor=wp,bp.prototype=Object.create(rp.prototype),bp.prototype.constructor=bp,Sp.prototype=Object.create(rp.prototype),Sp.prototype.constructor=Sp,zp.prototype=Object.create(rp.prototype),zp.prototype.constructor=zp,Cp.prototype=Object.create(rp.prototype),Cp.prototype.constructor=Cp,Ep.prototype=Object.create(rp.prototype),Ep.prototype.constructor=Ep,Pp.prototype=Object.create(rp.prototype),Pp.prototype.constructor=Pp,Mp.prototype=Object.create(rp.prototype),Mp.prototype.constructor=Mp,Ap.prototype=Object.create(rp.prototype),Ap.prototype.constructor=Ap,Ip.prototype=Object.create(rp.prototype),Ip.prototype.constructor=Ip,Rp.prototype=Object.create(Ip.prototype),Rp.prototype.constructor=Rp,Lp.prototype=Object.create(Ip.prototype),Lp.prototype.constructor=Lp,Dp.prototype=Object.create(Ip.prototype),Dp.prototype.constructor=Dp,qp.prototype=Object.create(Ip.prototype),qp.prototype.constructor=qp,Fp.prototype=Object.create(Ip.prototype),Fp.prototype.constructor=Fp,Bp.prototype=Object.create(Ip.prototype),Bp.prototype.constructor=Bp,Up.prototype=Object.create(Ip.prototype),Up.prototype.constructor=Up,Vp.prototype=Object.create(Ip.prototype),Vp.prototype.constructor=Vp,Gp.prototype=Object.create(Ip.prototype),Gp.prototype.constructor=Gp,Hp.prototype=Object.create(rp.prototype),Hp.prototype.constructor=Hp,Wp.prototype=Object.create(rp.prototype),Wp.prototype.constructor=Wp,Xp.prototype=Object.create(rp.prototype),Xp.prototype.constructor=Xp,Kp.prototype=Object.create(rp.prototype),Kp.prototype.constructor=Kp,Yp.prototype=Object.create(rp.prototype),Yp.prototype.constructor=Yp,Zp.prototype=Object.create(rp.prototype),Zp.prototype.constructor=Zp,Qp.prototype=Object.create(rp.prototype),Qp.prototype.constructor=Qp,tc.prototype=Object.create(rp.prototype),tc.prototype.constructor=tc,ec.prototype=Object.create(rp.prototype),ec.prototype.constructor=ec,ic.prototype=Object.create(rp.prototype),ic.prototype.constructor=ic,nc.prototype=Object.create(rp.prototype),nc.prototype.constructor=nc,rc.prototype=Object.create(rp.prototype),rc.prototype.constructor=rc,oc.prototype=Object.create(rp.prototype),oc.prototype.constructor=oc,sc.prototype=Object.create(T.prototype),sc.prototype.constructor=sc,fc.prototype=Object.create(T.prototype),fc.prototype.constructor=fc,bc.prototype=Object.create(gc.prototype),bc.prototype.constructor=bc,xc.prototype=Object.create(gc.prototype),xc.prototype.constructor=xc,wc.prototype=Object.create(gc.prototype),wc.prototype.constructor=wc,zc.prototype=Object.create(Ll.prototype),zc.prototype.constructor=zc,kc.prototype=Object.create(zc.prototype),kc.prototype.constructor=kc,Sc.prototype=Object.create(zc.prototype),Sc.prototype.constructor=Sc,Cc.prototype=Object.create(zc.prototype),Cc.prototype.constructor=Cc,Nc.prototype=Object.create(zc.prototype),Nc.prototype.constructor=Nc,jc.prototype=Object.create(zc.prototype),jc.prototype.constructor=jc,Lc.prototype=Object.create(zc.prototype),Lc.prototype.constructor=Lc,Uc.prototype=Object.create(zc.prototype),Uc.prototype.constructor=Uc,lh.prototype=Object.create(T.prototype),lh.prototype.constructor=lh,vh.prototype=Object.create(T.prototype),vh.prototype.constructor=vh,Nh.prototype=Object.create(yh.prototype),Nh.prototype.constructor=Nh,Eh.prototype=Object.create(yh.prototype),Eh.prototype.constructor=Eh,Oh.prototype=Object.create(yh.prototype),Oh.prototype.constructor=Oh,Mh.prototype=Object.create(yh.prototype),Mh.prototype.constructor=Mh,jh.prototype=Object.create(Eh.prototype),jh.prototype.constructor=jh,Vh.prototype=Object.create(Nh.prototype),Vh.prototype.constructor=Vh,Wh.prototype=Object.create(T.prototype),Wh.prototype.constructor=Wh,Zh.prototype=Object.create(T.prototype),Zh.prototype.constructor=Zh,nd.prototype=Object.create(id.prototype),nd.prototype.constructor=nd,ad.prototype=Object.create(id.prototype),ad.prototype.constructor=ad,md.prototype=Object.create(id.prototype),md.prototype.constructor=md,$d.prototype=Object.create(id.prototype),$d.prototype.constructor=$d,vd.prototype=Object.create(yd.prototype),vd.prototype.constructor=vd,bd.prototype=Object.create(yd.prototype),bd.prototype.constructor=bd,xd.prototype=Object.create(yd.prototype),xd.prototype.constructor=xd,wd.prototype=Object.create(yd.prototype),wd.prototype.constructor=wd,zd.prototype=Object.create(yd.prototype),zd.prototype.constructor=zd,kd.prototype=Object.create(yd.prototype),kd.prototype.constructor=kd,Sd.prototype=Object.create(yd.prototype),Sd.prototype.constructor=Sd,Cd.prototype=Object.create(yd.prototype),Cd.prototype.constructor=Cd,Nd.prototype=Object.create(yd.prototype),Nd.prototype.constructor=Nd,Ed.prototype=Object.create(yd.prototype),Ed.prototype.constructor=Ed,Td.prototype=Object.create(yd.prototype),Td.prototype.constructor=Td,Pd.prototype=Object.create(yd.prototype),Pd.prototype.constructor=Pd,Od.prototype=Object.create(yd.prototype),Od.prototype.constructor=Od,jd.prototype=Object.create(yd.prototype),jd.prototype.constructor=jd,Ad.prototype=Object.create(yd.prototype),Ad.prototype.constructor=Ad,Id.prototype=Object.create(yd.prototype),Id.prototype.constructor=Id,Fd.prototype=Object.create(T.prototype),Fd.prototype.constructor=Fd,Xd.prototype=Object.create(T.prototype),Xd.prototype.constructor=Xd,Hd.prototype=Object.create(Of.prototype),Hd.prototype.constructor=Hd,Qd.prototype=Object.create(Hd.prototype),Qd.prototype.constructor=Qd,tf.prototype=Object.create(Hd.prototype),tf.prototype.constructor=tf,ef.prototype=Object.create(tf.prototype),ef.prototype.constructor=ef,lf.prototype=Object.create(Of.prototype),lf.prototype.constructor=lf,cf.prototype=Object.create(T.prototype),cf.prototype.constructor=cf,mf.prototype=Object.create(vf.prototype),mf.prototype.constructor=mf,Pf.prototype=Object.create(lf.prototype),Pf.prototype.constructor=Pf,Uf.prototype=Object.create(T.prototype),Uf.prototype.constructor=Uf,Xf.prototype=Object.create(T.prototype),Xf.prototype.constructor=Xf,Bf.prototype=Object.create(lf.prototype),Bf.prototype.constructor=Bf,Qf.prototype=Object.create(Jf.prototype),Qf.prototype.constructor=Qf,t_.prototype=Object.create(vf.prototype),t_.prototype.constructor=t_,r_.prototype=Object.create(lf.prototype),r_.prototype.constructor=r_,p_.prototype=Object.create(zc.prototype),p_.prototype.constructor=p_,__.prototype=Object.create(zc.prototype),__.prototype.constructor=__,g_.prototype=Object.create(rp.prototype),g_.prototype.constructor=g_,Sm.prototype=Object.create(lf.prototype),Sm.prototype.constructor=Sm,L_.prototype=Object.create(Sm.prototype),L_.prototype.constructor=L_,T_.prototype=Object.create(L_.prototype),T_.prototype.constructor=T_,P_.prototype=Object.create(D_.prototype),P_.prototype.constructor=P_,A_.prototype=Object.create(j_.prototype),A_.prototype.constructor=A_,km.prototype=Object.create(P_.prototype),km.prototype.constructor=km,R_.prototype=Object.create(km.prototype),R_.prototype.constructor=R_,Tm.prototype=Object.create(Sm.prototype),Tm.prototype.constructor=Tm,I_.prototype=Object.create(Tm.prototype),I_.prototype.constructor=I_,F_.prototype=Object.create(T.prototype),F_.prototype.constructor=F_,sm.prototype=Object.create(om.prototype),sm.prototype.constructor=sm,um.prototype=Object.create(T.prototype),um.prototype.constructor=um,fm.prototype=Object.create(Sm.prototype),fm.prototype.constructor=fm,mm.prototype=Object.create(Sm.prototype),mm.prototype.constructor=mm,ym.prototype=Object.create(L_.prototype),ym.prototype.constructor=ym,vm.prototype=Object.create(D_.prototype),vm.prototype.constructor=vm,zm.prototype=Object.create(T_.prototype),zm.prototype.constructor=zm,jm.prototype=Object.create(Of.prototype),jm.prototype.constructor=jm,Am.prototype=Object.create(zc.prototype),Am.prototype.constructor=Am,Zm.prototype=Object.create(Dm.prototype),Zm.prototype.constructor=Zm,e$.prototype=Object.create(t$.prototype),e$.prototype.constructor=e$,i$.prototype=Object.create(t$.prototype),i$.prototype.constructor=i$,n$.prototype=Object.create(t$.prototype),n$.prototype.constructor=n$,r$.prototype=Object.create(t$.prototype),r$.prototype.constructor=r$,u$.prototype=Object.create(T.prototype),u$.prototype.constructor=u$,c$.prototype=Object.create(u$.prototype),c$.prototype.constructor=c$,f$.prototype=Object.create(u$.prototype),f$.prototype.constructor=f$,$$.prototype=Object.create(u$.prototype),$$.prototype.constructor=$$,g$.prototype=Object.create(l$.prototype),g$.prototype.constructor=g$,b$.prototype=Object.create(g$.prototype),b$.prototype.constructor=b$,x$.prototype=Object.create(l$.prototype),x$.prototype.constructor=x$,w$.prototype=Object.create(x$.prototype),w$.prototype.constructor=w$,z$.prototype=Object.create(l$.prototype),z$.prototype.constructor=z$,k$.prototype=Object.create(z$.prototype),k$.prototype.constructor=k$,S$.prototype=Object.create(l$.prototype),S$.prototype.constructor=S$,C$.prototype=Object.create(S$.prototype),C$.prototype.constructor=C$,O$.prototype=Object.create(N$.prototype),O$.prototype.constructor=O$,M$.prototype=Object.create(N$.prototype),M$.prototype.constructor=M$,A$.prototype=Object.create(j$.prototype),A$.prototype.constructor=A$,B$.prototype=Object.create(rp.prototype),B$.prototype.constructor=B$,V$.prototype=Object.create(rp.prototype),V$.prototype.constructor=V$,G$.prototype=Object.create(rp.prototype),G$.prototype.constructor=G$,q$.prototype=Object.create($a.prototype),q$.prototype.constructor=q$,ey.prototype=Object.create(rp.prototype),ey.prototype.constructor=ey,ty.prototype=Object.create($a.prototype),ty.prototype.constructor=ty,ay.prototype=Object.create(sy.prototype),ay.prototype.constructor=ay,ly.prototype=Object.create(sy.prototype),ly.prototype.constructor=ly,hy.prototype=Object.create(rp.prototype),hy.prototype.constructor=hy,dy.prototype=Object.create(rp.prototype),dy.prototype.constructor=dy,yy.prototype=Object.create(rp.prototype),yy.prototype.constructor=yy,fy.prototype=Object.create($a.prototype),fy.prototype.constructor=fy,Ey.prototype=Object.create(Yr.prototype),Ey.prototype.constructor=Ey,My.prototype=Object.create(Ey.prototype),My.prototype.constructor=My,Ky.prototype=Object.create(T.prototype),Ky.prototype.constructor=Ky,rv.prototype=Object.create(Sm.prototype),rv.prototype.constructor=rv,ov.prototype=Object.create(zc.prototype),ov.prototype.constructor=ov,pv.prototype=Object.create($a.prototype),pv.prototype.constructor=pv,_v.prototype=Object.create(zc.prototype),_v.prototype.constructor=_v,wv.prototype=Object.create(rp.prototype),wv.prototype.constructor=wv,zv.prototype=Object.create(rp.prototype),zv.prototype.constructor=zv,vv.prototype=Object.create(zc.prototype),vv.prototype.constructor=vv,Tv.prototype=Object.create(rp.prototype),Tv.prototype.constructor=Tv,Pv.prototype=Object.create(rp.prototype),Pv.prototype.constructor=Pv,Av.prototype=Object.create($a.prototype),Av.prototype.constructor=Av,Lv.prototype=Object.create(zc.prototype),Lv.prototype.constructor=Lv,Vv.prototype=Object.create(rp.prototype),Vv.prototype.constructor=Vv,Uv.prototype=Object.create($a.prototype),Uv.prototype.constructor=Uv,Xv.prototype=Object.create(zc.prototype),Xv.prototype.constructor=Xv,Yv.prototype=Object.create(rp.prototype),Yv.prototype.constructor=Yv,Wv.prototype=Object.create($a.prototype),Wv.prototype.constructor=Wv,eg.prototype=Object.create(rp.prototype),eg.prototype.constructor=eg,og.prototype=Object.create(Eh.prototype),og.prototype.constructor=og,Hg.prototype=Object.create(Gg.prototype),Hg.prototype.constructor=Hg,Wg.prototype=Object.create(Gg.prototype),Wg.prototype.constructor=Wg,Xg.prototype=Object.create(Gg.prototype),Xg.prototype.constructor=Xg,Kg.prototype=Object.create(Gg.prototype),Kg.prototype.constructor=Kg,Yg.prototype=Object.create(Gg.prototype),Yg.prototype.constructor=Yg,Zg.prototype=Object.create(Gg.prototype),Zg.prototype.constructor=Zg,Jg.prototype=Object.create(Gg.prototype),Jg.prototype.constructor=Jg,Yw.prototype=Object.create(rp.prototype),Yw.prototype.constructor=Yw,Kw.prototype=Object.create($a.prototype),Kw.prototype.constructor=Kw,rz.prototype=Object.create(rp.prototype),rz.prototype.constructor=rz,nz.prototype=Object.create(ya.prototype),nz.prototype.constructor=nz,az.prototype=Object.create(rp.prototype),az.prototype.constructor=az,lz.prototype=Object.create(rp.prototype),lz.prototype.constructor=lz,uz.prototype=Object.create(rp.prototype),uz.prototype.constructor=uz,cz.prototype=Object.create(rp.prototype),cz.prototype.constructor=cz,pz.prototype=Object.create(ya.prototype),pz.prototype.constructor=pz,vz.prototype=Object.create(rp.prototype),vz.prototype.constructor=vz,yz.prototype=Object.create(ya.prototype),yz.prototype.constructor=yz,Sz.prototype=Object.create($a.prototype),Sz.prototype.constructor=Sz,Tz.prototype=Object.create(zc.prototype),Tz.prototype.constructor=Tz,Ez.prototype=Object.create(ya.prototype),Ez.prototype.constructor=Ez,Kz.prototype=Object.create(T.prototype),Kz.prototype.constructor=Kz,tk.prototype=Object.create(T.prototype),tk.prototype.constructor=tk,ck.prototype=Object.create(Of.prototype),ck.prototype.constructor=ck,$k.prototype=Object.create(T.prototype),$k.prototype.constructor=$k,Kk.prototype=Object.create(Vk.prototype),Kk.prototype.constructor=Kk,iS.prototype=Object.create(OS.prototype),iS.prototype.constructor=iS,nS.prototype=Object.create(Sr.prototype),nS.prototype.constructor=nS,rS.prototype=Object.create(WS.prototype),rS.prototype.constructor=rS,oS.prototype=Object.create(WS.prototype),oS.prototype.constructor=oS,cS.prototype=Object.create(pS.prototype),cS.prototype.constructor=cS,hS.prototype=Object.create(pS.prototype),hS.prototype.constructor=hS,fS.prototype=Object.create(fs.prototype),fS.prototype.constructor=fS,vS.prototype=Object.create(BS.prototype),vS.prototype.constructor=vS,yS.prototype=Object.create(FS.prototype),yS.prototype.constructor=yS,ZS.prototype=Object.create(WS.prototype),ZS.prototype.constructor=ZS,QS.prototype=Object.create(ZS.prototype),QS.prototype.constructor=QS,eC.prototype=Object.create(ZS.prototype),eC.prototype.constructor=eC,gC.prototype=Object.create(ur.prototype),gC.prototype.constructor=gC,bC.prototype=Object.create(Or.prototype),bC.prototype.constructor=bC,xC.prototype=Object.create(io.prototype),xC.prototype.constructor=xC,wC.prototype=Object.create(My.prototype),wC.prototype.constructor=wC,kC.prototype=Object.create(zr.prototype),kC.prototype.constructor=kC,SC.prototype=Object.create(Xr.prototype),SC.prototype.constructor=SC,CC.prototype=Object.create(No.prototype),CC.prototype.constructor=CC,yC.prototype=Object.create(Or.prototype),yC.prototype.constructor=yC,UC.prototype=Object.create(id.prototype),UC.prototype.constructor=UC,VC.prototype=Object.create(id.prototype),VC.prototype.constructor=VC,GC.prototype=Object.create(ii.prototype),GC.prototype.constructor=GC,uN.prototype=Object.create(on.prototype),uN.prototype.constructor=uN,eE.prototype=Object.create(YN.prototype),eE.prototype.constructor=eE,iE.prototype=Object.create(YN.prototype),iE.prototype.constructor=iE,nE.prototype=Object.create(YN.prototype),nE.prototype.constructor=nE,rE.prototype=Object.create(YN.prototype),rE.prototype.constructor=rE,aE.prototype=Object.create(Ku.prototype),aE.prototype.constructor=aE,mE.prototype=Object.create(_E.prototype),mE.prototype.constructor=mE,yE.prototype=Object.create(_E.prototype),yE.prototype.constructor=yE,vE.prototype=Object.create(_E.prototype),vE.prototype.constructor=vE,gE.prototype=Object.create(_E.prototype),gE.prototype.constructor=gE,bE.prototype=Object.create(_E.prototype),bE.prototype.constructor=bE,Object.defineProperty(ii.prototype,"coroutineContext",{configurable:!0,get:function(){return this.job}}),ni.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ni.prototype=Object.create(l.prototype),ni.prototype.constructor=ni,ni.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;this.local$tmp$=this.local$closure$assetRefs.iterator(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$tmp$.hasNext(this),this.result_0===a)return a;continue;case 3:if(this.result_0){this.state_0=4;continue}this.state_0=7;continue;case 4:var e=this.local$tmp$.next();if(this.state_0=5,this.result_0=this.local$$receiver.loadAsset_lpb790$_0(e,this),this.result_0===a)return a;continue;case 5:if(t=this.result_0,this.state_0=6,this.result_0=this.local$closure$loadedAssets.send_11rb$(t,this),this.result_0===a)return a;continue;case 6:this.state_0=2;continue;case 7:return s;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.loadWorker_lf86lv$_0=function(t,e){var i,n;this.launch_eln4bt$((i=t,n=e,function(t,e,r){var o=new ni(i,n,t,this,e);return r?o:o.doResume(null)}))},ii.prototype.close=function(){this.job.cancel_m4sck1$()},ri.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ri.prototype=Object.create(l.prototype),ri.prototype.constructor=ri,ri.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(e.isType(this.local$ref,gi)){if(this.state_0=4,this.result_0=this.$this.loadRaw_ye9lq$(this.local$ref,this),this.result_0===a)return a;continue}if(e.isType(this.local$ref,bi)){if(this.state_0=2,this.result_0=this.$this.loadTexture_q13quj$(this.local$ref,this),this.result_0===a)return a;continue}this.local$tmp$=e.noWhenBranchMatched(),this.state_0=3;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=this.result_0,this.state_0=3;continue;case 3:this.state_0=5;continue;case 4:this.local$tmp$=this.result_0,this.state_0=5;continue;case 5:return this.local$tmp$;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.loadAsset_lpb790$_0=function(t,e,i){var n=new ri(this,t,e);return i?n:n.doResume(null)},ii.prototype.isHttpAsset_61zpoe$=function(t){return u(t,"http://",!0)||u(t,"https://",!0)||u(t,"data:",!0)},oi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},oi.prototype=Object.create(l.prototype),oi.prototype.constructor=oi,oi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$block(this.local$this$AssetManager,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.launch_eln4bt$=function(t){var i,n;h(e.isType(this,p)?this:c(),void 0,void 0,(i=t,n=this,function(t,e,r){var o=new oi(i,n,t,this,e);return r?o:o.doResume(null)}))},si.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},si.prototype=Object.create(l.prototype),si.prototype.constructor=si,si.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new gi(this.local$assetPath,!1):new gi(this.$this.assetsBaseDir+"/"+this.local$assetPath,!0);if(this.local$awaitedAsset=new pi(this.$this,n),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var r=e.isType(t=this.result_0,wi)?t:c();if(null!=(i=r.data)){var o=DE.Log,s=$k.DEBUG,l=e.getKClassFromExpression(this.$this).simpleName;s.level>=o.level.level&&o.printer(s,l,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+PC(i.capacity/1024/1024,1)+" mb)")}return r.data;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.loadAsset_61zpoe$=function(t,e,i){var n=new si(this,t,e);return i?n:n.doResume(null)},ai.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ai.prototype=Object.create(l.prototype),ai.prototype.constructor=ai,ai.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n;void 0===this.local$format&&(this.local$format=null);var r=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new bi(this.local$assetPath,!1,this.local$format,!1):new bi(this.$this.assetsBaseDir+"/"+this.local$assetPath,!0,this.local$format,!1);if(this.local$awaitedAsset=new pi(this.$this,r),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var o=e.isType(t=this.result_0,zi)?t:c();if(null!=(i=o.data)){var s=DE.Log,l=$k.DEBUG,u=e.getKClassFromExpression(this.$this).simpleName;l.level>=s.level.level&&s.printer(l,u,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+i.format+", "+i.width+"x"+i.height+")")}if(null==(n=o.data))throw cn("Failed loading texture");return n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.loadTextureData_9n4zzi$=function(t,e,i,n){var r=new ai(this,t,e,i);return n?r:r.doResume(null)},li.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},li.prototype=Object.create(l.prototype),li.prototype.constructor=li,li.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t,i,n;void 0===this.local$format&&(this.local$format=null);var r=this.$this.isHttpAsset_61zpoe$(this.local$assetPath)?new bi(this.local$assetPath,!1,this.local$format,!0,this.local$tilesX,this.local$tilesY):new bi(this.$this.assetsBaseDir+"/"+this.local$assetPath,!0,this.local$format,!0,this.local$tilesX,this.local$tilesY);if(this.local$awaitedAsset=new pi(this.$this,r),this.state_0=2,this.result_0=this.$this.awaitedAssetsChannel_nphlkp$_0.send_11rb$(this.local$awaitedAsset,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=this.local$awaitedAsset.awaiting.await(this),this.result_0===a)return a;continue;case 3:var o=e.isType(t=this.result_0,zi)?t:c();if(null!=(i=o.data)){var s=DE.Log,l=$k.DEBUG,u=e.getKClassFromExpression(this.$this).simpleName;l.level>=s.level.level&&s.printer(l,u,"Loaded "+this.$this.assetPathToName_61zpoe$(this.local$assetPath)+" ("+i.format+", "+i.width+"x"+i.height+"x"+i.depth+")")}if(null==(n=o.data))throw cn("Failed loading texture");return n;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.loadTextureAtlasData_elksmm$=function(t,e,i,n,r,o){var s=new li(this,t,e,i,n,r);return o?s:s.doResume(null)},ui.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ui.prototype=Object.create(l.prototype),ui.prototype.constructor=ui,ui.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$ft,void 0,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.local$ftd=this.result_0,this.state_0=3,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$bk,void 0,this),this.result_0===a)return a;continue;case 3:if(this.local$bkd=this.result_0,this.state_0=4,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$lt,void 0,this),this.result_0===a)return a;continue;case 4:if(this.local$ltd=this.result_0,this.state_0=5,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$rt,void 0,this),this.result_0===a)return a;continue;case 5:if(this.local$rtd=this.result_0,this.state_0=6,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$up,void 0,this),this.result_0===a)return a;continue;case 6:if(this.local$upd=this.result_0,this.state_0=7,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$dn,void 0,this),this.result_0===a)return a;continue;case 7:var t=this.result_0;return new $d(this.local$ftd,this.local$bkd,this.local$ltd,this.local$rtd,this.local$upd,t);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.prototype.loadCubeMapTextureData_r3y0ew$=function(t,e,i,n,r,o,s,a){var l=new ui(this,t,e,i,n,r,o,s);return a?l:l.doResume(null)},ii.prototype.loadAndPrepareTexture_va0f2y$=function(t,e,i,n){return void 0===e&&(e=new Hh),n?n(t,e,i):this.loadAndPrepareTexture_va0f2y$$default(t,e,i)},ii.prototype.loadAndPrepareCubeMap_oecnw4$=function(t,e,i,n,r,o,s,a,l){return void 0===s&&(s=new Hh),l?l(t,e,i,n,r,o,s,a):this.loadAndPrepareCubeMap_oecnw4$$default(t,e,i,n,r,o,s,a)},ii.prototype.loadAndPrepareTexture_siesr9$=function(t,e,i,n){return void 0===e&&(e=new Hh),void 0===i&&(i=null),n?n(t,e,i):this.loadAndPrepareTexture_siesr9$$default(t,e,i)},ii.prototype.loadAndPrepareCubeMap_q9pwzk$=function(t,e,i,n){return void 0===e&&(e=new Hh),void 0===i&&(i=null),n?n(t,e,i):this.loadAndPrepareCubeMap_q9pwzk$$default(t,e,i)},ii.prototype.assetPathToName_61zpoe$=function(t){var e;if(u(t,"data:",!0)){var i=d(t,59);e=_(t,f(0,i))}else e=t;return e},ii.prototype.cubeMapAssetPathToName_r3y0ew$=function(t,e,i,n,r,o){return"cubeMap(ft:"+this.assetPathToName_61zpoe$(t)+", bk:"+this.assetPathToName_61zpoe$(e)+", lt:"+this.assetPathToName_61zpoe$(i)+", rt:"+this.assetPathToName_61zpoe$(n)+", up:"+this.assetPathToName_61zpoe$(r)+", dn:"+this.assetPathToName_61zpoe$(o)+")"},pi.$metadata$={kind:$,simpleName:"AwaitedAsset",interfaces:[]},ci.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hi=null;function di(){return null===hi&&new ci,hi}function fi(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.local$closure$requested=t,this.local$this$=e,this.local$awaited=i}function _i(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$closure$requested=t,this.local$loaded=e}function mi(t,e){return function(i){var n,r;return i.invoke_veq140$(t.awaitedAssetsChannel_nphlkp$_0.onReceive,(n=e,r=t,function(t,e,i){var o=new fi(n,r,t,e);return i?o:o.doResume(null)})),i.invoke_veq140$(t.loadedAssetChannel_obd8me$_0.onReceive,function(t){return function(e,i,n){var r=new _i(t,e,i);return n?r:r.doResume(null)}}(e)),s}}function $i(t,e,i){l.call(this,i),this.$controller=e,this.exceptionState_0=1,this.local$requested=void 0,this.local$$receiver=t}function yi(t,e,i){var n=new $i(t,this,e);return i?n:n.doResume(null)}function vi(){}function gi(t,e){vi.call(this),this.url=t,this.isLocal=e}function bi(t,e,i,n,r,o){void 0===r&&(r=1),void 0===o&&(o=1),vi.call(this),this.url=t,this.isLocal=e,this.fmt=i,this.isAtlas=n,this.tilesX=r,this.tilesY=o}function xi(t,e){this.ref=t,this.successfull=e}function wi(t,e){xi.call(this,t,null!=e),this.data=e}function zi(t,e){xi.call(this,t,null!=e),this.data=e}function ki(){this.bufferAllocations=z(),this.totalBufferSize_mh5cfj$_0=C,this.textureAllocations=z(),this.totalTextureSize_4hd4e0$_0=C,this.pipelines=z(),this.numPipelineInstances_ikf7d6$_0=0,this.numDrawCommands_4id88y$_0=0,this.numPrimitives_jhh8ci$_0=0}function Si(){rn(),this.queuedKeyEvents_0=M(),this.keyEvents=M(),this.keyHandlers_0=z(),this.pointerState=new tn}function Ci(t){return t.isCharTyped}function Ni(t){return!0}function Ei(){this.id_yfac1g$_0=0,this.x_5rhhjp$_0=0,this.y_5rhhkk$_0=0,this.deltaX_8nh2op$_0=0,this.deltaY_8nh2nu$_0=0,this.dragDeltaX_yg2vql$_0=0,this.dragDeltaY_yg2vpq$_0=0,this.deltaScroll_trurwo$_0=0,this.buttonMask_uq1vpl$_0=0,this.buttonEventMask_dc8ngn$_0=0,this.isValid_cde91$_0=!1,this.consumptionMask_8be2vx$=0}function Ti(){Ei.call(this),this.updateState_0=Yi(),this.processedState_0=Yi(),this.lastUpdate=0}function Pi(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Oi(){Oi=function(){},new Mi,new Ii,new Di,new Bi,new Gi,new Xi}function Mi(){ji=this,Pi.call(this,"STARTED",0)}fi.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},fi.prototype=Object.create(l.prototype),fi.prototype.constructor=fi,fi.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.local$closure$requested.get_11rb$(this.local$awaited.ref);if(null==t){var e=this.local$closure$requested,i=this.local$awaited.ref,n=b([this.local$awaited]);if(e.put_xwzc9p$(i,n),this.state_0=2,this.result_0=this.local$this$.assetRefChannel_acu3lu$_0.send_11rb$(this.local$awaited.ref,this),this.result_0===a)return a;continue}return t.add_11rb$(this.local$awaited);case 1:throw this.exception_0;case 2:return this.result_0;case 3:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},_i.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},_i.prototype=Object.create(l.prototype),_i.prototype.constructor=_i,_i.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;for(t=x(this.local$closure$requested.remove_11rb$(this.local$loaded.ref)).iterator();t.hasNext();)t.next().awaiting.complete_11rb$(this.local$loaded);return s;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},$i.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},$i.prototype=Object.create(l.prototype),$i.prototype.constructor=$i,$i.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:this.local$requested=z(),this.state_0=2;continue;case 1:throw this.exception_0;case 2:if(this.state_0=3,this.result_0=ei(mi(this.local$$receiver,this.local$requested))(this),this.result_0===a)return a;continue;case 3:this.result_0,this.state_0=2;continue;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},ii.$metadata$={kind:$,simpleName:"AssetManager",interfaces:[p]},vi.$metadata$={kind:$,simpleName:"AssetRef",interfaces:[]},gi.$metadata$={kind:$,simpleName:"RawAssetRef",interfaces:[vi]},gi.prototype.component1=function(){return this.url},gi.prototype.component2=function(){return this.isLocal},gi.prototype.copy_ivxn3r$=function(t,e){return new gi(void 0===t?this.url:t,void 0===e?this.isLocal:e)},gi.prototype.toString=function(){return"RawAssetRef(url="+e.toString(this.url)+", isLocal="+e.toString(this.isLocal)+")"},gi.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.url)|0)+e.hashCode(this.isLocal)|0},gi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)&&e.equals(this.isLocal,t.isLocal)},bi.$metadata$={kind:$,simpleName:"TextureAssetRef",interfaces:[vi]},bi.prototype.component1=function(){return this.url},bi.prototype.component2=function(){return this.isLocal},bi.prototype.component3=function(){return this.fmt},bi.prototype.component4=function(){return this.isAtlas},bi.prototype.component5=function(){return this.tilesX},bi.prototype.component6=function(){return this.tilesY},bi.prototype.copy_7gae68$=function(t,e,i,n,r,o){return new bi(void 0===t?this.url:t,void 0===e?this.isLocal:e,void 0===i?this.fmt:i,void 0===n?this.isAtlas:n,void 0===r?this.tilesX:r,void 0===o?this.tilesY:o)},bi.prototype.toString=function(){return"TextureAssetRef(url="+e.toString(this.url)+", isLocal="+e.toString(this.isLocal)+", fmt="+e.toString(this.fmt)+", isAtlas="+e.toString(this.isAtlas)+", tilesX="+e.toString(this.tilesX)+", tilesY="+e.toString(this.tilesY)+")"},bi.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.url)|0)+e.hashCode(this.isLocal)|0)+e.hashCode(this.fmt)|0)+e.hashCode(this.isAtlas)|0)+e.hashCode(this.tilesX)|0)+e.hashCode(this.tilesY)|0},bi.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.url,t.url)&&e.equals(this.isLocal,t.isLocal)&&e.equals(this.fmt,t.fmt)&&e.equals(this.isAtlas,t.isAtlas)&&e.equals(this.tilesX,t.tilesX)&&e.equals(this.tilesY,t.tilesY)},xi.$metadata$={kind:$,simpleName:"LoadedAsset",interfaces:[]},wi.$metadata$={kind:$,simpleName:"LoadedRawAsset",interfaces:[xi]},zi.$metadata$={kind:$,simpleName:"LoadedTextureAsset",interfaces:[xi]},Object.defineProperty(ki.prototype,"totalBufferSize",{configurable:!0,get:function(){return this.totalBufferSize_mh5cfj$_0},set:function(t){this.totalBufferSize_mh5cfj$_0=t}}),Object.defineProperty(ki.prototype,"totalTextureSize",{configurable:!0,get:function(){return this.totalTextureSize_4hd4e0$_0},set:function(t){this.totalTextureSize_4hd4e0$_0=t}}),Object.defineProperty(ki.prototype,"numPipelineInstances",{configurable:!0,get:function(){return this.numPipelineInstances_ikf7d6$_0},set:function(t){this.numPipelineInstances_ikf7d6$_0=t}}),Object.defineProperty(ki.prototype,"numDrawCommands",{configurable:!0,get:function(){return this.numDrawCommands_4id88y$_0},set:function(t){this.numDrawCommands_4id88y$_0=t}}),Object.defineProperty(ki.prototype,"numPrimitives",{configurable:!0,get:function(){return this.numPrimitives_jhh8ci$_0},set:function(t){this.numPrimitives_jhh8ci$_0=t}}),ki.prototype.bufferAllocated_yhmem3$=function(t,i){var n;null!=(n=this.bufferAllocations.put_xwzc9p$(t,i))&&(this.totalBufferSize=this.totalBufferSize.subtract(e.Long.fromInt(n))),this.totalBufferSize=this.totalBufferSize.add(e.Long.fromInt(i))},ki.prototype.bufferDeleted_s8cxhz$=function(t){var i;null!=(i=this.bufferAllocations.remove_11rb$(t))&&(this.totalBufferSize=this.totalBufferSize.subtract(e.Long.fromInt(i)))},ki.prototype.textureAllocated_yhmem3$=function(t,i){var n;null!=(n=this.textureAllocations.put_xwzc9p$(t,i))&&(this.totalTextureSize=this.totalTextureSize.subtract(e.Long.fromInt(n))),this.totalTextureSize=this.totalTextureSize.add(e.Long.fromInt(i))},ki.prototype.textureDeleted_s8cxhz$=function(t){var i;null!=(i=this.textureAllocations.remove_11rb$(t))&&(this.totalTextureSize=this.totalTextureSize.subtract(e.Long.fromInt(i)))},ki.prototype.pipelineInstanceCreated_s8cxhz$=function(t){var e,i=(null!=(e=this.pipelines.get_11rb$(t))?e:0)+1|0;this.pipelines.put_xwzc9p$(t,i),this.numPipelineInstances=this.numPipelineInstances+1|0},ki.prototype.pipelineInstanceDestroyed_s8cxhz$=function(t){var e,i=(null!=(e=this.pipelines.get_11rb$(t))?e:0)-1|0;i>=0&&(this.pipelines.put_xwzc9p$(t,i),this.numPipelineInstances=this.numPipelineInstances-1|0)},ki.prototype.pipelineDestroyed_s8cxhz$=function(t){var e;null!=(e=this.pipelines.remove_11rb$(t))&&(this.numPipelineInstances=this.numPipelineInstances-e|0)},ki.prototype.resetPerFrameCounts=function(){this.numDrawCommands=0,this.numPrimitives=0},ki.prototype.addDrawCommandCount_za3lpa$=function(t){this.numDrawCommands=this.numDrawCommands+t|0},ki.prototype.addPrimitiveCount_za3lpa$=function(t){this.numPrimitives=this.numPrimitives+t|0},ki.$metadata$={kind:$,simpleName:"EngineStats",interfaces:[]},Si.prototype.registerKeyListener_i13a8v$=function(t,e,i,n){return void 0===i&&(i=Ci),this.registerKeyListener_aviy8w$(0|t,e,i,n)},Si.prototype.registerKeyListener_aviy8w$=function(t,i,n,r){void 0===n&&(n=Ni);var o,s=32<=t&&t<=126?"'"+String.fromCharCode(N(t))+"'":t.toString(),a=this.keyHandlers_0,l=a.get_11rb$(t);if(null==l){var u=M();a.put_xwzc9p$(t,u),o=u}else o=l;var p=o;if(!p.isEmpty()){var c=DE.Log,h=$k.WARN,d=e.getKClassFromExpression(this).simpleName;if(h.level>=c.level.level){var f,_=c.printer,m="Multiple bindings for key "+s+": ",$=w(j(p,10));for(f=p.iterator();f.hasNext();){var y=f.next();$.add_11rb$(y.name)}_.call(c,h,d,m+$)}}var v=new Zi(t,i,n,r);p.add_11rb$(v);var g=DE.Log,b=$k.DEBUG,x=e.getKClassFromExpression(this).simpleName;return b.level>=g.level.level&&g.printer(b,x,'Registered key handler: "'+i+'" [keyCode='+s+"]"),v},Si.prototype.removeKeyListener_abhb69$=function(t){var e;null!=(e=this.keyHandlers_0.get_11rb$(t.keyCode))&&e.remove_11rb$(t)},Si.prototype.onNewFrame_cwprtu$=function(t){var e;this.pointerState.onNewFrame_cwprtu$(t),this.keyEvents.clear(),this.keyEvents.addAll_brywnq$(this.queuedKeyEvents_0),this.queuedKeyEvents_0.clear(),e=this.keyEvents;for(var i=0;i!==e.size;++i){var n=this.keyEvents.get_za3lpa$(i),r=this.keyHandlers_0.get_11rb$(n.keyCode);if(null!=r)for(var o=0;o!==r.size;++o)r.get_za3lpa$(o).filter(n)&&r.get_za3lpa$(o).invoke_9cgpoj$(n)}},Si.prototype.keyEvent_qt1dr2$=function(t,e,i){var n=new Qi;n.keyCode=t,n.event=i,n.modifiers=e,this.queuedKeyEvents_0.add_11rb$(n)},Si.prototype.charTyped_s8itvh$=function(t){var e=new Qi;e.event=8,e.typedChar=E(t),e.keyCode=0|t,this.queuedKeyEvents_0.add_11rb$(e)},Si.prototype.handleTouchStart_nhq4am$=function(t,e,i){this.pointerState.handleTouchStart_qlj5un$(t,e,i)},Si.prototype.handleTouchEnd_za3lpa$=function(t){this.pointerState.handleTouchEnd_kcn2v3$(t)},Si.prototype.handleTouchCancel_za3lpa$=function(t){this.pointerState.handleTouchCancel_kcn2v3$(t)},Si.prototype.handleTouchMove_nhq4am$=function(t,e,i){this.pointerState.handleTouchMove_qlj5un$(t,e,i)},Si.prototype.handleMouseMove_dleff0$=function(t,e){this.pointerState.handleMouseMove_dob1fz$(t,e)},Si.prototype.handleMouseButtonState_fzusl$=function(t,e){this.pointerState.handleMouseButtonState_iwgtk$(t,e)},Si.prototype.handleMouseButtonStates_za3lpa$=function(t){this.pointerState.handleMouseButtonStates_kcn2v3$(t)},Si.prototype.handleMouseScroll_mx4ult$=function(t){this.pointerState.handleMouseScroll_nwfnho$(t)},Si.prototype.handleMouseExit=function(){this.pointerState.handleMouseExit_8be2vx$()},Object.defineProperty(Ei.prototype,"id",{configurable:!0,get:function(){return this.id_yfac1g$_0},set:function(t){this.id_yfac1g$_0=t}}),Object.defineProperty(Ei.prototype,"x",{configurable:!0,get:function(){return this.x_5rhhjp$_0},set:function(t){this.x_5rhhjp$_0=t}}),Object.defineProperty(Ei.prototype,"y",{configurable:!0,get:function(){return this.y_5rhhkk$_0},set:function(t){this.y_5rhhkk$_0=t}}),Object.defineProperty(Ei.prototype,"deltaX",{configurable:!0,get:function(){return this.deltaX_8nh2op$_0},set:function(t){this.deltaX_8nh2op$_0=t}}),Object.defineProperty(Ei.prototype,"deltaY",{configurable:!0,get:function(){return this.deltaY_8nh2nu$_0},set:function(t){this.deltaY_8nh2nu$_0=t}}),Object.defineProperty(Ei.prototype,"dragDeltaX",{configurable:!0,get:function(){return this.dragDeltaX_yg2vql$_0},set:function(t){this.dragDeltaX_yg2vql$_0=t}}),Object.defineProperty(Ei.prototype,"dragDeltaY",{configurable:!0,get:function(){return this.dragDeltaY_yg2vpq$_0},set:function(t){this.dragDeltaY_yg2vpq$_0=t}}),Object.defineProperty(Ei.prototype,"deltaScroll",{configurable:!0,get:function(){return this.deltaScroll_trurwo$_0},set:function(t){this.deltaScroll_trurwo$_0=t}}),Object.defineProperty(Ei.prototype,"buttonMask",{configurable:!0,get:function(){return this.buttonMask_uq1vpl$_0},set:function(t){this.buttonEventMask=this.buttonEventMask|this.buttonMask_uq1vpl$_0^t,this.buttonMask_uq1vpl$_0=t}}),Object.defineProperty(Ei.prototype,"buttonEventMask",{configurable:!0,get:function(){return this.buttonEventMask_dc8ngn$_0},set:function(t){this.buttonEventMask_dc8ngn$_0=t}}),Object.defineProperty(Ei.prototype,"isValid",{configurable:!0,get:function(){return this.isValid_cde91$_0},set:function(t){this.isValid_cde91$_0=t}}),Object.defineProperty(Ei.prototype,"isLeftButtonDown",{configurable:!0,get:function(){return 0!=(1&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isRightButtonDown",{configurable:!0,get:function(){return 0!=(2&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isMiddleButtonDown",{configurable:!0,get:function(){return 0!=(4&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isBackButtonDown",{configurable:!0,get:function(){return 0!=(8&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isForwardButtonDown",{configurable:!0,get:function(){return 0!=(16&this.buttonMask)}}),Object.defineProperty(Ei.prototype,"isLeftButtonEvent",{configurable:!0,get:function(){return 0!=(1&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isRightButtonEvent",{configurable:!0,get:function(){return 0!=(2&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isMiddleButtonEvent",{configurable:!0,get:function(){return 0!=(4&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isBackButtonEvent",{configurable:!0,get:function(){return 0!=(8&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isForwardButtonEvent",{configurable:!0,get:function(){return 0!=(16&this.buttonEventMask)}}),Object.defineProperty(Ei.prototype,"isLeftButtonPressed",{configurable:!0,get:function(){return this.isLeftButtonEvent&&this.isLeftButtonDown}}),Object.defineProperty(Ei.prototype,"isRightButtonPressed",{configurable:!0,get:function(){return this.isRightButtonEvent&&this.isRightButtonDown}}),Object.defineProperty(Ei.prototype,"isMiddleButtonPressed",{configurable:!0,get:function(){return this.isMiddleButtonEvent&&this.isMiddleButtonDown}}),Object.defineProperty(Ei.prototype,"isBackButtonPressed",{configurable:!0,get:function(){return this.isBackButtonEvent&&this.isBackButtonDown}}),Object.defineProperty(Ei.prototype,"isForwardButtonPressed",{configurable:!0,get:function(){return this.isForwardButtonEvent&&this.isForwardButtonDown}}),Object.defineProperty(Ei.prototype,"isLeftButtonReleased",{configurable:!0,get:function(){return this.isLeftButtonEvent&&!this.isLeftButtonDown}}),Object.defineProperty(Ei.prototype,"isRightButtonReleased",{configurable:!0,get:function(){return this.isRightButtonEvent&&!this.isRightButtonDown}}),Object.defineProperty(Ei.prototype,"isMiddleButtonReleased",{configurable:!0,get:function(){return this.isMiddleButtonEvent&&!this.isMiddleButtonDown}}),Object.defineProperty(Ei.prototype,"isBackButtonReleased",{configurable:!0,get:function(){return this.isBackButtonEvent&&!this.isBackButtonDown}}),Object.defineProperty(Ei.prototype,"isForwardButtonReleased",{configurable:!0,get:function(){return this.isForwardButtonEvent&&!this.isForwardButtonDown}}),Object.defineProperty(Ei.prototype,"isLeftButtonClicked",{configurable:!0,get:function(){var t=this.isLeftButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isRightButtonClicked",{configurable:!0,get:function(){var t=this.isRightButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isMiddleButtonClicked",{configurable:!0,get:function(){var t=this.isMiddleButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isBackButtonClicked",{configurable:!0,get:function(){var t=this.isBackButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Object.defineProperty(Ei.prototype,"isForwardButtonClicked",{configurable:!0,get:function(){var t=this.isForwardButtonReleased;if(t){var e=this.dragDeltaX,i=A.abs(e),n=this.dragDeltaY;t=i+A.abs(n)<5}return t}}),Ei.prototype.consume_za3lpa$=function(t){void 0===t&&(t=-1),this.consumptionMask_8be2vx$=this.consumptionMask_8be2vx$|t},Ei.prototype.isConsumed_za3lpa$=function(t){return void 0===t&&(t=-1),0!=(this.consumptionMask_8be2vx$&t)},Ei.prototype.isInViewport_hrtwbc$=function(t,e){var i=e.windowHeight-this.y;return this.isValid&&t.isInViewport_dleff0$(this.x,i)},Ei.$metadata$={kind:$,simpleName:"Pointer",interfaces:[]},Ti.prototype.setButtonMask_za3lpa$=function(t){this.buttonMask=t,(this.isLeftButtonPressed||this.isRightButtonPressed||this.isMiddleButtonPressed)&&(this.dragDeltaX=0,this.dragDeltaY=0)},Ti.prototype.startPointer_nhq4am$=function(t,e,i){this.movePointer_dleff0$(e,i),this.id=t,this.deltaX=0,this.deltaY=0,this.dragDeltaX=0,this.dragDeltaY=0,this.deltaScroll=0,this.updateState_0=Ai(),this.isValid=!0},Ti.prototype.movePointer_dleff0$=function(t,e){0!==this.buttonMask&&(this.dragDeltaX=this.dragDeltaX+(t-this.x),this.dragDeltaY=this.dragDeltaY+(e-this.y)),this.deltaX=this.deltaX+(t-this.x),this.deltaY=this.deltaY+(e-this.y),this.x=t,this.y=e,this.lastUpdate=TC()},Ti.prototype.endPointer=function(){var t;switch(this.processedState_0.name){case"ACTIVE":t=Wi();break;case"STARTED":t=Vi();break;default:t=Fi()}this.updateState_0=t},Ti.prototype.cancelPointer=function(){this.buttonMask=0,this.buttonEventMask=0,this.deltaX=0,this.deltaY=0,this.deltaScroll=0,this.dragDeltaX=0,this.dragDeltaY=0,this.updateState_0=Yi(),this.isValid=!1},Ti.prototype.update_sjovm5$=function(t,i){if(this.updateState_0!==Yi()&&i-this.lastUpdate>200){var n=DE.Log,r=$k.WARN,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"Pointer "+this.id+" timed out!"),this.cancelPointer()}switch(t.id=this.id,t.deltaX=this.deltaX,t.deltaY=this.deltaY,t.dragDeltaX=this.dragDeltaX,t.dragDeltaY=this.dragDeltaY,t.deltaScroll=this.deltaScroll,t.x=this.x,t.y=this.y,t.isValid=!0,t.consumptionMask_8be2vx$=0,t.buttonEventMask=0,this.updateState_0.name){case"STARTED":case"ENDED_BEFORE_STARTED":t.buttonMask=0;break;case"ACTIVE":case"ENDED_BEFORE_ACTIVE":t.buttonMask=this.buttonMask;break;case"ENDED":t.buttonMask=0;break;case"INVALID":this.isValid=!1,t.isValid=!1}this.deltaX=0,this.deltaY=0,this.deltaScroll=0,this.buttonEventMask=0,this.processedState_0=this.updateState_0,this.updateState_0=this.updateState_0.next()},Mi.prototype.next=function(){return Li()},Mi.$metadata$={kind:$,simpleName:"STARTED",interfaces:[Pi]};var ji=null;function Ai(){return Oi(),ji}function Ii(){Ri=this,Pi.call(this,"ACTIVE",1)}Ii.prototype.next=function(){return Li()},Ii.$metadata$={kind:$,simpleName:"ACTIVE",interfaces:[Pi]};var Ri=null;function Li(){return Oi(),Ri}function Di(){qi=this,Pi.call(this,"ENDED_BEFORE_STARTED",2)}Di.prototype.next=function(){return Vi()},Di.$metadata$={kind:$,simpleName:"ENDED_BEFORE_STARTED",interfaces:[Pi]};var qi=null;function Fi(){return Oi(),qi}function Bi(){Ui=this,Pi.call(this,"ENDED_BEFORE_ACTIVE",3)}Bi.prototype.next=function(){return Wi()},Bi.$metadata$={kind:$,simpleName:"ENDED_BEFORE_ACTIVE",interfaces:[Pi]};var Ui=null;function Vi(){return Oi(),Ui}function Gi(){Hi=this,Pi.call(this,"ENDED",4)}Gi.prototype.next=function(){return Yi()},Gi.$metadata$={kind:$,simpleName:"ENDED",interfaces:[Pi]};var Hi=null;function Wi(){return Oi(),Hi}function Xi(){Ki=this,Pi.call(this,"INVALID",5)}Xi.prototype.next=function(){return Yi()},Xi.$metadata$={kind:$,simpleName:"INVALID",interfaces:[Pi]};var Ki=null;function Yi(){return Oi(),Ki}function Zi(t,e,i,n){void 0===i&&(i=Ji),this.keyCode=t,this.name=e,this.filter=i,this.callback=n}function Ji(t){return!0}function Qi(){this.keyCode_56t57j$_0=0,this.modifiers_cmws0f$_0=0,this.event_4ycnw1$_0=0,this.typedChar_ne8il1$_0=N(0)}function tn(){var t,e=I(10);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=new Ei;this.pointers=e,this.lastPtrInput_0=0;var n,r=I(10);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=new Ti;this.inputPointers_0=r,this.compatGestureEvaluator_0=new aC,this.isEvaluatingCompatGestures=!0,this.primaryPointer=this.pointers[0]}function en(){nn=this,this.LEFT_BUTTON=0,this.LEFT_BUTTON_MASK=1,this.RIGHT_BUTTON=1,this.RIGHT_BUTTON_MASK=2,this.MIDDLE_BUTTON=2,this.MIDDLE_BUTTON_MASK=4,this.BACK_BUTTON=3,this.BACK_BUTTON_MASK=8,this.FORWARD_BUTTON=4,this.FORWARD_BUTTON_MASK=16,this.MAX_POINTERS=10,this.MOUSE_POINTER_ID=-1e6,this.CONSUMED_ALL=-1,this.CONSUMED_X=1,this.CONSUMED_Y=2,this.CONSUMED_SCROLL=4,this.CONSUMED_LEFT_BUTTON=8,this.CONSUMED_RIGHT_BUTTON=16,this.CONSUMED_MIDDLE_BUTTON=32,this.CONSUMED_BACK_BUTTON=64,this.CONSUMED_FORWARD_BUTTON=128,this.KEY_EV_UP=1,this.KEY_EV_DOWN=2,this.KEY_EV_REPEATED=4,this.KEY_EV_CHAR_TYPED=8,this.KEY_MOD_SHIFT=1,this.KEY_MOD_CTRL=2,this.KEY_MOD_ALT=4,this.KEY_MOD_SUPER=8,this.KEY_CTRL_LEFT=-1,this.KEY_CTRL_RIGHT=-2,this.KEY_SHIFT_LEFT=-3,this.KEY_SHIFT_RIGHT=-4,this.KEY_ALT_LEFT=-5,this.KEY_ALT_RIGHT=-6,this.KEY_SUPER_LEFT=-7,this.KEY_SUPER_RIGHT=-8,this.KEY_ESC=-9,this.KEY_MENU=-10,this.KEY_ENTER=-11,this.KEY_NP_ENTER=-12,this.KEY_NP_DIV=-13,this.KEY_NP_MUL=-14,this.KEY_NP_PLUS=-15,this.KEY_NP_MINUS=-16,this.KEY_BACKSPACE=-17,this.KEY_TAB=-18,this.KEY_DEL=-19,this.KEY_INSERT=-20,this.KEY_HOME=-21,this.KEY_END=-22,this.KEY_PAGE_UP=-23,this.KEY_PAGE_DOWN=-24,this.KEY_CURSOR_LEFT=-25,this.KEY_CURSOR_RIGHT=-26,this.KEY_CURSOR_UP=-27,this.KEY_CURSOR_DOWN=-28,this.KEY_F1=-29,this.KEY_F2=-30,this.KEY_F3=-31,this.KEY_F4=-32,this.KEY_F5=-33,this.KEY_F6=-34,this.KEY_F7=-35,this.KEY_F8=-36,this.KEY_F9=-37,this.KEY_F10=-38,this.KEY_F11=-39,this.KEY_F12=-40}Pi.$metadata$={kind:$,simpleName:"UpdateState",interfaces:[T]},Pi.values=function(){return[Ai(),Li(),Fi(),Vi(),Wi(),Yi()]},Pi.valueOf_61zpoe$=function(t){switch(t){case"STARTED":return Ai();case"ACTIVE":return Li();case"ENDED_BEFORE_STARTED":return Fi();case"ENDED_BEFORE_ACTIVE":return Vi();case"ENDED":return Wi();case"INVALID":return Yi();default:P("No enum constant de.fabmax.kool.InputManager.BufferedPointerInput.UpdateState."+t)}},Ti.$metadata$={kind:$,simpleName:"BufferedPointerInput",interfaces:[Ei]},Zi.prototype.invoke_9cgpoj$=function(t){this.callback(t)},Zi.$metadata$={kind:$,simpleName:"KeyEventListener",interfaces:[]},Object.defineProperty(Qi.prototype,"keyCode",{configurable:!0,get:function(){return this.keyCode_56t57j$_0},set:function(t){this.keyCode_56t57j$_0=t}}),Object.defineProperty(Qi.prototype,"modifiers",{configurable:!0,get:function(){return this.modifiers_cmws0f$_0},set:function(t){this.modifiers_cmws0f$_0=t}}),Object.defineProperty(Qi.prototype,"event",{configurable:!0,get:function(){return this.event_4ycnw1$_0},set:function(t){this.event_4ycnw1$_0=t}}),Object.defineProperty(Qi.prototype,"typedChar",{configurable:!0,get:function(){return E(this.typedChar_ne8il1$_0)},set:function(t){this.typedChar_ne8il1$_0=O(t)}}),Object.defineProperty(Qi.prototype,"isPressed",{configurable:!0,get:function(){return 0!=(2&this.event)}}),Object.defineProperty(Qi.prototype,"isRepeated",{configurable:!0,get:function(){return 0!=(4&this.event)}}),Object.defineProperty(Qi.prototype,"isReleased",{configurable:!0,get:function(){return 0!=(1&this.event)}}),Object.defineProperty(Qi.prototype,"isCharTyped",{configurable:!0,get:function(){return 0!=(8&this.event)}}),Object.defineProperty(Qi.prototype,"isShiftDown",{configurable:!0,get:function(){return 0!=(1&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isCtrlDown",{configurable:!0,get:function(){return 0!=(2&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isAltDown",{configurable:!0,get:function(){return 0!=(4&this.modifiers)}}),Object.defineProperty(Qi.prototype,"isSuperDown",{configurable:!0,get:function(){return 0!=(8&this.modifiers)}}),Qi.$metadata$={kind:$,simpleName:"KeyEvent",interfaces:[]},tn.prototype.getActivePointers_j71cmr$=function(t,e){var i;void 0===e&&(e=-1),t.clear(),i=this.pointers;for(var n=0;n!==i.length;++n)this.pointers[n].isValid&&!this.pointers[n].isConsumed_za3lpa$(e)&&t.add_11rb$(this.pointers[n])},tn.prototype.onNewFrame_cwprtu$=function(t){var e;e=this.pointers;for(var i=0;i!==e.length;++i)this.inputPointers_0[i].update_sjovm5$(this.pointers[i],this.lastPtrInput_0);if(this.isEvaluatingCompatGestures)switch(this.compatGestureEvaluator_0.evaluate_19cf9$(this,t),this.compatGestureEvaluator_0.currentGesture.type){case 1:this.primaryPointer.consumptionMask_8be2vx$=0,this.primaryPointer.deltaScroll=this.compatGestureEvaluator_0.currentGesture.dPinchAmount/20,this.primaryPointer.x=this.compatGestureEvaluator_0.currentGesture.centerCurrent.x,this.primaryPointer.y=this.compatGestureEvaluator_0.currentGesture.centerCurrent.y,this.primaryPointer.deltaX=this.compatGestureEvaluator_0.currentGesture.dCenter.x,this.primaryPointer.deltaY=this.compatGestureEvaluator_0.currentGesture.dCenter.y;break;case 2:this.primaryPointer.consumptionMask_8be2vx$=0,this.primaryPointer.x=this.compatGestureEvaluator_0.currentGesture.centerCurrent.x,this.primaryPointer.y=this.compatGestureEvaluator_0.currentGesture.centerCurrent.y,this.primaryPointer.deltaX=this.compatGestureEvaluator_0.currentGesture.dCenter.x,this.primaryPointer.deltaY=this.compatGestureEvaluator_0.currentGesture.dCenter.y,1===this.primaryPointer.buttonMask&&(this.primaryPointer.buttonMask=2,this.compatGestureEvaluator_0.currentGesture.numUpdates>1&&(this.primaryPointer.buttonEventMask=0))}},tn.prototype.getFreeInputPointer_8be2vx$=function(){var t;t=this.inputPointers_0;for(var e=0;e!==t.length;++e)if(!this.inputPointers_0[e].isValid)return this.inputPointers_0[e];return null},tn.prototype.findInputPointer_kcn2v3$=function(t){var e;e=this.inputPointers_0;for(var i=0;i!==e.length;++i)if(this.inputPointers_0[i].isValid&&this.inputPointers_0[i].id===t)return this.inputPointers_0[i];return null},tn.prototype.handleTouchStart_qlj5un$=function(t,e,i){var n;if(this.lastPtrInput_0=TC(),null!=(n=this.getFreeInputPointer_8be2vx$())){var r=n;r.startPointer_nhq4am$(t,e,i),r.buttonMask=1}},tn.prototype.handleTouchEnd_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(t))&&e.endPointer()},tn.prototype.handleTouchCancel_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(t))&&e.cancelPointer()},tn.prototype.handleTouchMove_qlj5un$=function(t,e,i){var n;this.lastPtrInput_0=TC(),null!=(n=this.findInputPointer_kcn2v3$(t))&&n.movePointer_dleff0$(e,i)},tn.prototype.handleMouseMove_dob1fz$=function(t,e){var i;this.lastPtrInput_0=TC();var n=this.findInputPointer_kcn2v3$(-1e6);if(null==n){if(null==(i=this.getFreeInputPointer_8be2vx$()))return;i.startPointer_nhq4am$(-1e6,t,e)}else n.movePointer_dleff0$(t,e)},tn.prototype.handleMouseButtonState_iwgtk$=function(t,e){var i;if(null!=(i=this.findInputPointer_kcn2v3$(-1e6))){var n=i;e?n.setButtonMask_za3lpa$(n.buttonMask|1<<t):n.setButtonMask_za3lpa$(n.buttonMask&~(1<<t))}},tn.prototype.handleMouseButtonStates_kcn2v3$=function(t){var e;null!=(e=this.findInputPointer_kcn2v3$(-1e6))&&e.setButtonMask_za3lpa$(t)},tn.prototype.handleMouseScroll_nwfnho$=function(t){var e;if(null!=(e=this.findInputPointer_kcn2v3$(-1e6))){var i=e;i.deltaScroll=i.deltaScroll+t}},tn.prototype.handleMouseExit_8be2vx$=function(){var t;null!=(t=this.findInputPointer_kcn2v3$(-1e6))&&t.cancelPointer()},tn.$metadata$={kind:$,simpleName:"PointerState",interfaces:[]},en.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var nn=null;function rn(){return null===nn&&new en,nn}function on(){un(),this.screenDpi=96,this.inputMgr=new Si,this.engineStats=new ki,this.projCorrectionMatrixScreen=new bn,this.projCorrectionMatrixOffscreen=new bn,this.depthBiasMatrix=(new bn).translate_yvo9jy$(.5,.5,.5).scale_yvo9jy$(.5,.5,.5),this.onRender=M(),this.time_q5mkh0$_0=0,this.deltaT_wdv5hn$_0=0,this.frameIdx_2g8w1r$_0=0,this.fps_a02wsa$_0=60,this.scenes=M(),this.backgroundScene_ibwr5x$_0=new r_("backgroundScene"),this.delayedCallbacks_puvmt7$_0=M(),this.disposablePipelines_8be2vx$=M();var t,e=new Float64Array(25);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=.017;this.frameTimes_6eiyeg$_0=e}function sn(t,e){this.callOnFrame=t,this.callback=e}function an(){ln=this,this.KOOL_VERSION="0.6.0-201102.2122"}Si.$metadata$={kind:$,simpleName:"InputManager",interfaces:[]},Object.defineProperty(on.prototype,"time",{configurable:!0,get:function(){return this.time_q5mkh0$_0},set:function(t){this.time_q5mkh0$_0=t}}),Object.defineProperty(on.prototype,"deltaT",{configurable:!0,get:function(){return this.deltaT_wdv5hn$_0},set:function(t){this.deltaT_wdv5hn$_0=t}}),Object.defineProperty(on.prototype,"frameIdx",{configurable:!0,get:function(){return this.frameIdx_2g8w1r$_0},set:function(t){this.frameIdx_2g8w1r$_0=t}}),Object.defineProperty(on.prototype,"fps",{configurable:!0,get:function(){return this.fps_a02wsa$_0},set:function(t){this.fps_a02wsa$_0=t}}),Object.defineProperty(on.prototype,"backgroundPasses",{configurable:!0,get:function(){return this.backgroundScene_ibwr5x$_0.offscreenPasses}}),on.prototype.runDelayed_hd6vpk$=function(t,e){var i=this.delayedCallbacks_puvmt7$_0,n=new sn(this.frameIdx+t|0,e);i.add_11rb$(n)},on.prototype.disposePipeline_i7l2g2$=function(t){this.disposablePipelines_8be2vx$.add_11rb$(t)},on.prototype.addBackgroundRenderPass_m1c2kf$=function(t){this.backgroundScene_ibwr5x$_0.addOffscreenPass_m1c2kf$(t)},on.prototype.removeBackgroundRenderPass_m1c2kf$=function(t){this.backgroundScene_ibwr5x$_0.removeOffscreenPass_m1c2kf$(t)},on.prototype.render_14dthe$=function(t){var e,i,n,r,o;if(!this.delayedCallbacks_puvmt7$_0.isEmpty())for(e=L(R(this.delayedCallbacks_puvmt7$_0)).iterator();e.hasNext();){var s=e.next(),a=this.delayedCallbacks_puvmt7$_0.get_za3lpa$(s);a.callOnFrame<=this.frameIdx&&(a.callback(this),this.delayedCallbacks_puvmt7$_0.removeAt_za3lpa$(s))}this.deltaT=t,this.time=this.time+t,this.frameIdx=this.frameIdx+1|0,this.frameTimes_6eiyeg$_0[this.frameIdx%this.frameTimes_6eiyeg$_0.length]=t;var l=0;i=this.frameTimes_6eiyeg$_0;for(var u=0;u!==i.length;++u)l+=this.frameTimes_6eiyeg$_0[u];this.fps=this.frameTimes_6eiyeg$_0.length/l*.1+.9*this.fps,this.inputMgr.onNewFrame_cwprtu$(this),n=this.onRender;for(var p=0;p!==n.size;++p)this.onRender.get_za3lpa$(p)(this);for(r=L(R(this.scenes)).iterator();r.hasNext();){var c=r.next();this.scenes.get_za3lpa$(c).isVisible&&this.scenes.get_za3lpa$(c).processInput_aemszp$(this)}this.backgroundScene_ibwr5x$_0.renderScene_aemszp$(this),o=this.scenes;for(var h=0;h!==o.size;++h)this.scenes.get_za3lpa$(h).isVisible&&this.scenes.get_za3lpa$(h).renderScene_aemszp$(this)},sn.$metadata$={kind:$,simpleName:"DelayedCallback",interfaces:[]},an.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ln=null;function un(){return null===ln&&new an,ln}function pn(t,e){D.call(this,t,e),this.name="KoolException"}function cn(t,e){return e=e||Object.create(pn.prototype),pn.call(e,t,null),e}function hn(t,e,i,n){this.degree=t,this.factory_o8y0vc$_0=e,this.copy_1qqihf$_0=i,this.mix_rjp6wa$_0=n,this.ctrlPoints=M(),this.knots_ks2m93$_0=M(),this.d_c5f19u$_0=M()}function dn(t){hn.call(this,t,fn,_n,mn)}function fn(){return pr()}function _n(t,e){return e.set_czzhjp$(t),s}function mn(t,e,i,n,r){return r.x=e.x*t+n.x*i,r.y=e.y*t+n.y*i,s}function $n(){gn(),this.matrix=new Float32Array(9),this.setIdentity()}function yn(){vn=this,this.tmpMatLock_0=new V,this.tmpMatA_0=new $n,this.tmpMatB_0=new $n}on.$metadata$={kind:$,simpleName:"KoolContext",interfaces:[]},pn.$metadata$={kind:$,simpleName:"KoolException",interfaces:[D]},hn.prototype.addInterpolationEndpoints=function(){var t;t=this.degree;for(var e=0;e<t;e++){this.ctrlPoints.add_wxm5ur$(0,q(this.ctrlPoints));var i=this.ctrlPoints,n=F(this.ctrlPoints);i.add_11rb$(n)}},hn.prototype.evaluate_f6p79m$=function(t,e){if(t<=0)this.copy_1qqihf$_0(q(this.ctrlPoints),e);else if(t>=1)this.copy_1qqihf$_0(F(this.ctrlPoints),e);else{this.checkTemps_dp4s6j$_0();var i=this.degree+t*(this.ctrlPoints.size-(2*this.degree|0)+1|0);this.deBoor_47z15v$_0(B(i),i,e)}return e},hn.prototype.deBoor_47z15v$_0=function(t,e,i){var n,r,o=this.degree,s=this.ctrlPoints.size-1|0,a=t<o?o:t>s?s:t;n=this.degree;for(var l=0;l<=n;l++)this.copy_1qqihf$_0(this.ctrlPoints.get_za3lpa$(l+a-this.degree|0),this.d_c5f19u$_0.get_za3lpa$(l));r=this.degree;for(var u=1;u<=r;u++)for(var p=this.degree;p>=u;p--){var c=(e-this.knots_ks2m93$_0.get_za3lpa$(p+a-this.degree|0))/(this.knots_ks2m93$_0.get_za3lpa$(p+1+a-u|0)-this.knots_ks2m93$_0.get_za3lpa$(p+a-this.degree|0));this.mix_rjp6wa$_0(1-c,this.d_c5f19u$_0.get_za3lpa$(p-1|0),c,this.d_c5f19u$_0.get_za3lpa$(p),this.d_c5f19u$_0.get_za3lpa$(p))}this.copy_1qqihf$_0(this.d_c5f19u$_0.get_za3lpa$(this.degree),i)},hn.prototype.checkTemps_dp4s6j$_0=function(){var t,e;if(this.knots_ks2m93$_0.size!==(this.ctrlPoints.size+this.degree|0)){this.knots_ks2m93$_0.clear(),t=this.ctrlPoints.size+this.degree|0;for(var i=0;i<t;i++)this.knots_ks2m93$_0.add_11rb$(i)}if(this.d_c5f19u$_0.size!==(this.degree+1|0)){this.d_c5f19u$_0.clear(),e=this.degree;for(var n=0;n<=e;n++){var r=this.d_c5f19u$_0,o=this.factory_o8y0vc$_0();r.add_11rb$(o)}}},hn.$metadata$={kind:$,simpleName:"BSpline",interfaces:[]},dn.$metadata$={kind:$,simpleName:"BSplineVec2f",interfaces:[hn]},$n.prototype.rotate_7b5o5w$=function(t,e,i,n){return gn().tmpMatLock_0,gn().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.set_d4zu7e$(this.mul_4w76o0$(gn().tmpMatA_0,gn().tmpMatB_0))},$n.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},$n.prototype.rotate_c240ly$=function(t,e,i,n,r){return r.set_d4zu7e$(this),r.rotate_7b5o5w$(t,e,i,n),r},$n.prototype.rotate_phvhih$=function(t,e,i){return this.rotate_c240ly$(t,e.x,e.y,e.z,i)},$n.prototype.transpose=function(){var t=this.get_za3lpa$(1);return this.set_24o109$(1,this.get_za3lpa$(3)),this.set_24o109$(3,t),t=this.get_za3lpa$(2),this.set_24o109$(2,this.get_za3lpa$(6)),this.set_24o109$(6,t),t=this.get_za3lpa$(5),this.set_24o109$(5,this.get_za3lpa$(7)),this.set_24o109$(7,t),this},$n.prototype.transpose_d4zu6j$=function(t){return t.set_24o109$(0,this.get_za3lpa$(0)),t.set_24o109$(1,this.get_za3lpa$(3)),t.set_24o109$(2,this.get_za3lpa$(6)),t.set_24o109$(3,this.get_za3lpa$(1)),t.set_24o109$(4,this.get_za3lpa$(4)),t.set_24o109$(5,this.get_za3lpa$(7)),t.set_24o109$(6,this.get_za3lpa$(2)),t.set_24o109$(7,this.get_za3lpa$(5)),t.set_24o109$(8,this.get_za3lpa$(8)),t},$n.prototype.invert=function(){gn().tmpMatLock_0;var t=this.invert_d4zu7e$(gn().tmpMatA_0);return t&&this.set_d4zu7e$(gn().tmpMatA_0),t},$n.prototype.invert_d4zu7e$=function(t){for(var e,i=0,n=0;n<=2;n++)i+=this.get_za3lpa$(n)*(this.get_za3lpa$(3+(n+1|0)%3|0)*this.get_za3lpa$(6+(n+2|0)%3|0)-this.get_za3lpa$(3+(n+2|0)%3|0)*this.get_za3lpa$(6+(n+1|0)%3|0));if(i>0){i=1/i;for(var r=0;r<=2;r++)for(var o=0;o<=2;o++)t.set_24o109$((3*r|0)+o|0,(this.get_za3lpa$(((o+1|0)%3*3|0)+(r+1|0)%3|0)*this.get_za3lpa$(((o+2|0)%3*3|0)+(r+2|0)%3|0)-this.get_za3lpa$(((o+1|0)%3*3|0)+(r+2|0)%3|0)*this.get_za3lpa$(((o+2|0)%3*3|0)+(r+1|0)%3|0))*i);e=!0}else e=!1;return e},$n.prototype.transform_5s4mqq$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2);return t.set_y2kzbl$(e,i,n)},$n.prototype.transform_2gj7b4$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2),e},$n.prototype.mul_d4zu7e$=function(t){return gn().tmpMatLock_0,this.mul_4w76o0$(t,gn().tmpMatA_0),this.set_d4zu7e$(gn().tmpMatA_0)},$n.prototype.mul_4w76o0$=function(t,e){for(var i=0;i<=2;i++)for(var n=0;n<=2;n++){for(var r=0,o=0;o<=2;o++)r+=this.get_za3lpa$(n+(3*o|0)|0)*t.get_za3lpa$((3*i|0)+o|0);e.set_24o109$((3*i|0)+n|0,r)}return e},$n.prototype.scale_y2kzbl$=function(t,e,i){for(var n=0;n<=2;n++)this.matrix[n]=this.matrix[n]*t,this.matrix[3+n|0]=this.matrix[3+n|0]*e,this.matrix[6+n|0]=this.matrix[6+n|0]*i;return this},$n.prototype.scale_czzhiu$=function(t){return this.scale_y2kzbl$(t.x,t.y,t.z)},$n.prototype.scale_g84k61$=function(t,e,i,n){for(var r=0;r<=2;r++)n.matrix[r]=this.matrix[r]*t,n.matrix[3+r|0]=this.matrix[3+r|0]*e,n.matrix[6+r|0]=this.matrix[6+r|0]*i;return n},$n.prototype.set_d4zu7e$=function(t){for(var e=0;e<=8;e++)this.set_24o109$(e,t.get_za3lpa$(e));return this},$n.prototype.set_hcyabg$=function(t){for(var e=0;e<=8;e++)this.set_24o109$(e,t.get_za3lpa$(e))},$n.prototype.setIdentity=function(){for(var t=1;t<=8;t++)this.set_24o109$(t,0);for(var e=0;e<=8;e+=4)this.set_24o109$(e,1);return this},$n.prototype.setRotate_7b5o5w$=function(t,e,i,n){var r,o=e,s=i,a=n,l=o*o+s*s+a*a,u=A.sqrt(l),p=1-u;if(r=EE.FUZZY_EQ_D,!(A.abs(p)<=r)){var c=1/u;o*=c,s*=c,a*=c}var h=t*(U.PI/180),d=A.sin(h),f=A.cos(h),_=1-f,m=o*s,$=s*a,y=a*o,v=o*d,g=s*d,b=a*d;return this.set_24o109$(0,o*o*_+f),this.set_24o109$(3,m*_-b),this.set_24o109$(6,y*_+g),this.set_24o109$(1,m*_+b),this.set_24o109$(4,s*s*_+f),this.set_24o109$(7,$*_-v),this.set_24o109$(2,y*_-g),this.set_24o109$(5,$*_+v),this.set_24o109$(8,a*a*_+f),this},$n.prototype.setRotate_czzhhz$=function(t){var e=t.w,i=t.x,n=t.y,r=t.z,o=e*e+i*i+n*n+r*r,s=A.sqrt(o);return s=1/(s*s),this.set_n0b4r3$(0,0,1-2*s*(n*n+r*r)),this.set_n0b4r3$(0,1,2*s*(i*n-r*e)),this.set_n0b4r3$(0,2,2*s*(i*r+n*e)),this.set_n0b4r3$(1,0,2*s*(i*n+r*e)),this.set_n0b4r3$(1,1,1-2*s*(i*i+r*r)),this.set_n0b4r3$(1,2,2*s*(n*r-i*e)),this.set_n0b4r3$(2,0,2*s*(i*r-n*e)),this.set_n0b4r3$(2,1,2*s*(n*r+i*e)),this.set_n0b4r3$(2,2,1-2*s*(i*i+n*n)),this},$n.prototype.getRotation_5s4mpv$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var r=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,o=(r+1|0)%3,s=(r+2|0)%3,a=this.get_vux9f0$(r,r)-this.get_vux9f0$(o,o)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_24o109$(r,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,o)-this.get_vux9f0$(o,s))*l,t.set_24o109$(o,(this.get_vux9f0$(o,r)+this.get_vux9f0$(r,o))*l),t.set_24o109$(s,(this.get_vux9f0$(s,r)+this.get_vux9f0$(r,s))*l)}return t},$n.prototype.get_za3lpa$=function(t){return this.matrix[t]},$n.prototype.get_vux9f0$=function(t,e){return this.matrix[(3*e|0)+t|0]},$n.prototype.set_24o109$=function(t,e){this.matrix[t]=e},$n.prototype.set_n0b4r3$=function(t,e,i){this.matrix[(3*e|0)+t|0]=i},$n.prototype.setColVec_ky00qo$=function(t,e){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z)},$n.prototype.getColVec_8irwuw$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e},$n.prototype.toBuffer_he122g$=function(t){return t.put_kgymra$(this.matrix,0,9),t.flip(),t},yn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vn=null;function gn(){return null===vn&&new yn,vn}function bn(){zn(),this.matrix_ntz8bm$_0=new Float64Array(16),this.offset_7ocvpo$_0=0,this.setIdentity()}function xn(){wn=this,this.tmpMatLock_0=new V,this.tmpMatA_0=new bn,this.tmpMatB_0=new bn}$n.$metadata$={kind:$,simpleName:"Mat3f",interfaces:[]},Object.defineProperty(bn.prototype,"matrix",{configurable:!0,get:function(){return this.matrix_ntz8bm$_0},set:function(t){this.matrix_ntz8bm$_0=t}}),Object.defineProperty(bn.prototype,"offset",{configurable:!0,get:function(){return this.offset_7ocvpo$_0},set:function(t){this.offset_7ocvpo$_0=t}}),bn.prototype.translate_yvo9jy$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[12+r|0]=this.matrix[12+r|0]+(this.matrix[r]*t+this.matrix[4+r|0]*e+this.matrix[8+r|0]*i)}return this},bn.prototype.translate_czzhiw$=function(t){return this.translate_yvo9jy$(t.x,t.y,t.z)},bn.prototype.translate_p4gs15$=function(t,e,i,n){for(var r=0;r<=11;r++)n.matrix[n.offset+r|0]=this.matrix[this.offset+r|0];for(var o=0;o<=3;o++){var s=this.offset+o|0;n.matrix[n.offset+12+o|0]=this.matrix[s]*t+this.matrix[4+s|0]*e+this.matrix[8+s|0]*i+this.matrix[12+s|0]}return n},bn.prototype.rotate_6y0v78$=function(t,e,i,n){return zn().tmpMatLock_0,zn().tmpMatA_0.setRotate_6y0v78$(t,e,i,n),this.set_d4zu6l$(this.mul_u47j3u$(zn().tmpMatA_0,zn().tmpMatB_0))},bn.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},bn.prototype.rotate_app323$=function(t,e,i,n,r){return zn().tmpMatLock_0,zn().tmpMatA_0.setRotate_6y0v78$(t,e,i,n),this.mul_u47j3u$(zn().tmpMatA_0,r)},bn.prototype.rotate_wwd6w1$=function(t,e,i){return this.rotate_app323$(t,e.x,e.y,e.z,i)},bn.prototype.scale_14dthe$=function(t){return this.scale_yvo9jy$(t,t,t)},bn.prototype.scale_yvo9jy$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[r]=this.matrix[r]*t,this.matrix[4+r|0]=this.matrix[4+r|0]*e,this.matrix[8+r|0]=this.matrix[8+r|0]*i}return this},bn.prototype.scale_czzhiw$=function(t){return this.scale_yvo9jy$(t.x,t.y,t.z)},bn.prototype.scale_p4gs15$=function(t,e,i,n){for(var r=0;r<=3;r++){var o=n.offset+r|0,s=this.offset+r|0;n.matrix[o]=this.matrix[s]*t,n.matrix[4+o|0]=this.matrix[4+s|0]*e,n.matrix[8+o|0]=this.matrix[8+s|0]*i,n.matrix[12+o|0]=this.matrix[12+s|0]}return n},bn.prototype.resetScale=function(){var t=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0),e=1/A.sqrt(t),i=this.get_vux9f0$(0,1)*this.get_vux9f0$(0,1)+this.get_vux9f0$(1,1)*this.get_vux9f0$(1,1)+this.get_vux9f0$(2,1)*this.get_vux9f0$(2,1),n=1/A.sqrt(i),r=this.get_vux9f0$(0,2)*this.get_vux9f0$(0,2)+this.get_vux9f0$(1,2)*this.get_vux9f0$(1,2)+this.get_vux9f0$(2,2)*this.get_vux9f0$(2,2),o=1/A.sqrt(r);return this.scale_yvo9jy$(e,n,o),this},bn.prototype.transpose=function(){return zn().tmpMatLock_0,this.set_d4zu6l$(this.transpose_d4zu6l$(zn().tmpMatA_0))},bn.prototype.transpose_d4zu6l$=function(t){for(var e=0;e<=3;e++){var i=(4*e|0)+this.offset|0;t.matrix[e+t.offset|0]=this.matrix[i],t.matrix[e+4+t.offset|0]=this.matrix[i+1|0],t.matrix[e+8+t.offset|0]=this.matrix[i+2|0],t.matrix[e+12+t.offset|0]=this.matrix[i+3|0]}return t},bn.prototype.invert_14dthe$=function(t){void 0===t&&(t=0),zn().tmpMatLock_0;var e=this.invert_23yxad$(zn().tmpMatA_0,t);return e&&this.set_d4zu6l$(zn().tmpMatA_0),e},bn.prototype.invert_23yxad$=function(t,e){void 0===e&&(e=0);var i=this.matrix[this.offset+0|0],n=this.matrix[this.offset+1|0],r=this.matrix[this.offset+2|0],o=this.matrix[this.offset+3|0],s=this.matrix[this.offset+4|0],a=this.matrix[this.offset+5|0],l=this.matrix[this.offset+6|0],u=this.matrix[this.offset+7|0],p=this.matrix[this.offset+8|0],c=this.matrix[this.offset+9|0],h=this.matrix[this.offset+10|0],d=this.matrix[this.offset+11|0],f=this.matrix[this.offset+12|0],_=this.matrix[this.offset+13|0],m=this.matrix[this.offset+14|0],$=this.matrix[this.offset+15|0],y=h*$,v=m*d,g=l*$,b=m*u,x=l*d,w=h*u,z=r*$,k=m*o,S=r*d,C=h*o,N=r*u,E=l*o,T=y*a+b*c+x*_-(v*a+g*c+w*_),P=v*n+z*c+C*_-(y*n+k*c+S*_),O=g*n+k*a+N*_-(b*n+z*a+E*_),M=w*n+S*a+E*c-(x*n+C*a+N*c),j=v*s+g*p+w*f-(y*s+b*p+x*f),I=y*i+k*p+S*f-(v*i+z*p+C*f),R=b*i+z*s+E*f-(g*i+k*s+N*f),L=x*i+C*s+N*p-(w*i+S*s+E*p),D=p*_,q=f*c,F=s*_,B=f*a,U=s*c,V=p*a,G=i*_,H=f*n,W=i*c,X=p*n,K=i*a,Y=s*n,Z=D*u+B*d+U*$-(q*u+F*d+V*$),J=q*o+G*d+X*$-(D*o+H*d+W*$),Q=F*o+H*u+K*$-(B*o+G*u+Y*$),tt=V*o+W*u+Y*d-(U*o+X*u+K*d),et=F*h+V*m+q*l-(U*m+D*l+B*h),it=W*m+D*r+H*h-(G*h+X*m+q*r),nt=G*l+Y*m+B*r-(K*m+F*r+H*l),rt=K*h+U*r+X*l-(W*l+Y*h+V*r),ot=i*T+s*P+p*O+f*M;if(A.abs(ot)<=e)return!1;var st=1/ot;return t.matrix[t.offset]=T*st,t.matrix[1+t.offset|0]=P*st,t.matrix[2+t.offset|0]=O*st,t.matrix[3+t.offset|0]=M*st,t.matrix[4+t.offset|0]=j*st,t.matrix[5+t.offset|0]=I*st,t.matrix[6+t.offset|0]=R*st,t.matrix[7+t.offset|0]=L*st,t.matrix[8+t.offset|0]=Z*st,t.matrix[9+t.offset|0]=J*st,t.matrix[10+t.offset|0]=Q*st,t.matrix[11+t.offset|0]=tt*st,t.matrix[12+t.offset|0]=et*st,t.matrix[13+t.offset|0]=it*st,t.matrix[14+t.offset|0]=nt*st,t.matrix[15+t.offset|0]=rt*st,!0},bn.prototype.transform_w1lst9$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),r=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_y2kzbl$(i,n,r)},bn.prototype.transform_a6wx89$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},bn.prototype.transform_5s4mpv$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),r=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_7b5o5w$(e,i,n,r)},bn.prototype.transform_uzu8ww$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},bn.prototype.transform_j7uy7i$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),r=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_yvo9jy$(i,n,r)},bn.prototype.transform_3odno2$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},bn.prototype.transform_5s4mpx$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),r=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_6y0v78$(e,i,n,r)},bn.prototype.transform_2x9ggw$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},bn.prototype.add_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=this.matrix[this.offset+e|0]+t.matrix[t.offset+e|0];return this},bn.prototype.mul_d4zu6l$=function(t){return zn().tmpMatLock_0,this.mul_u47j3u$(t,zn().tmpMatA_0),this.set_d4zu6l$(zn().tmpMatA_0)},bn.prototype.mul_u47j3u$=function(t,e){for(var i=0;i<=3;i++)for(var n=0;n<=3;n++){for(var r=0,o=0;o<=3;o++)r+=this.matrix[this.offset+n+(4*o|0)|0]*t.matrix[t.offset+(4*i|0)+o|0];e.matrix[e.offset+(4*i|0)+n|0]=r}return e},bn.prototype.set_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},bn.prototype.set_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},bn.prototype.set_d3e2cz$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.get_za3lpa$(e);return this},bn.prototype.setZero=function(){for(var t=0;t<=15;t++)this.matrix[this.offset+t|0]=0;return this},bn.prototype.setIdentity=function(){for(var t=1;t<=15;t++)this.matrix[this.offset+t|0]=0;return this.matrix[this.offset]=1,this.matrix[this.offset+5|0]=1,this.matrix[this.offset+10|0]=1,this.matrix[this.offset+15|0]=1,this},bn.prototype.setRotate_6y0v78$=function(t,e,i,n){var r=t*EE.DEG_2_RAD,o=e,s=i,a=n;this.matrix[this.offset+3|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1;var l=A.sin(r),u=A.cos(r);if(1===o&&0===s&&0===a)this.matrix[this.offset+5|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+6|0]=l,this.matrix[this.offset+9|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+0|0]=1;else if(0===o&&1===s&&0===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+8|0]=l,this.matrix[this.offset+2|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+5|0]=1;else if(0===o&&0===s&&1===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=u,this.matrix[this.offset+1|0]=l,this.matrix[this.offset+4|0]=-l,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=1;else{var p,c=o*o+s*s+a*a,h=A.sqrt(c);p=EE.FUZZY_EQ_D;var d=h-1;if(!(A.abs(d)<=p)){var f=1/h;o*=f,s*=f,a*=f}var _=1-u,m=o*s,$=s*a,y=a*o,v=o*l,g=s*l,b=a*l;this.matrix[this.offset+0|0]=o*o*_+u,this.matrix[this.offset+4|0]=m*_-b,this.matrix[this.offset+8|0]=y*_+g,this.matrix[this.offset+1|0]=m*_+b,this.matrix[this.offset+5|0]=s*s*_+u,this.matrix[this.offset+9|0]=$*_-v,this.matrix[this.offset+2|0]=y*_-g,this.matrix[this.offset+6|0]=$*_+v,this.matrix[this.offset+10|0]=a*a*_+u}return this},bn.prototype.setRotate_czzhi1$=function(t){var e=t.w,i=t.x,n=t.y,r=t.z,o=e*e+i*i+n*n+r*r,s=A.sqrt(o);return s=1/(s*s),this.set_224j3y$(0,0,1-2*s*(n*n+r*r)),this.set_224j3y$(0,1,2*s*(i*n-r*e)),this.set_224j3y$(0,2,2*s*(i*r+n*e)),this.set_224j3y$(0,3,0),this.set_224j3y$(1,0,2*s*(i*n+r*e)),this.set_224j3y$(1,1,1-2*s*(i*i+r*r)),this.set_224j3y$(1,2,2*s*(n*r-i*e)),this.set_224j3y$(1,3,0),this.set_224j3y$(2,0,2*s*(i*r-n*e)),this.set_224j3y$(2,1,2*s*(n*r+i*e)),this.set_224j3y$(2,2,1-2*s*(i*i+n*n)),this.set_224j3y$(2,3,0),this.set_224j3y$(3,0,0),this.set_224j3y$(3,1,0),this.set_224j3y$(3,2,0),this.set_224j3y$(3,3,1),this},bn.prototype.setLookAt_n440fu$=function(t,e,i){return this.setLookAt_enh5fx$_0(t.x,t.y,t.z,e.x,e.y,e.z,i.x,i.y,i.z)},bn.prototype.setLookAt_8ro9c0$=function(t,e,i){return this.setLookAt_enh5fx$_0(t.x,t.y,t.z,e.x,e.y,e.z,i.x,i.y,i.z)},bn.prototype.setLookAt_enh5fx$_0=function(t,e,i,n,r,o,s,a,l){var u=n-t,p=r-e,c=o-i,h=u*u+p*p+c*c,d=1/A.sqrt(h),f=(p*=d)*l-(c*=d)*a,_=c*s-(u*=d)*l,m=u*a-p*s,$=f*f+_*_+m*m,y=1/A.sqrt($),v=(_*=y)*c-(m*=y)*p,g=m*u-(f*=y)*c,b=f*p-_*u;return this.matrix[this.offset+0|0]=f,this.matrix[this.offset+1|0]=v,this.matrix[this.offset+2|0]=-u,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=_,this.matrix[this.offset+5|0]=g,this.matrix[this.offset+6|0]=-p,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=m,this.matrix[this.offset+9|0]=b,this.matrix[this.offset+10|0]=-c,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1,this.translate_yvo9jy$(-t,-e,-i)},bn.prototype.setOrthographic_w8lrqs$=function(t,e,i,n,r,o){return this.setOrthographic_15yvbs$(t,e,i,n,r,o)},bn.prototype.setOrthographic_15yvbs$=function(t,e,i,n,r,o){if(t===e)throw G("left == right");if(i===n)throw G("bottom == top");if(r===o)throw G("near == far");var s=1/(e-t),a=1/(n-i),l=1/(o-r),u=2*s,p=2*a,c=-2*l,h=-(e+t)*s,d=-(n+i)*a,f=-(o+r)*l;return this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=p,this.matrix[this.offset+10|0]=c,this.matrix[this.offset+12|0]=h,this.matrix[this.offset+13|0]=d,this.matrix[this.offset+14|0]=f,this.matrix[this.offset+15|0]=1,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+11|0]=0,this},bn.prototype.setPerspective_7b5o5w$=function(t,e,i,n){return this.setPerspective_6y0v78$(t,e,i,n)},bn.prototype.setPerspective_6y0v78$=function(t,e,i,n){var r=t*(U.PI/360),o=1/A.tan(r),s=1/(i-n);return this.matrix[this.offset+0|0]=o/e,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+5|0]=o,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=(n+i)*s,this.matrix[this.offset+11|0]=-1,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=2*n*i*s,this.matrix[this.offset+15|0]=0,this},bn.prototype.get_za3lpa$=function(t){return this.matrix[this.offset+t|0]},bn.prototype.get_vux9f0$=function(t,e){return this.matrix[this.offset+(4*e|0)+t|0]},bn.prototype.set_5wr77w$=function(t,e){this.matrix[this.offset+t|0]=e},bn.prototype.set_224j3y$=function(t,e,i){this.matrix[this.offset+(4*e|0)+t|0]=i},bn.prototype.setRow_umtdzk$=function(t,e,i){this.set_224j3y$(t,0,e.x),this.set_224j3y$(t,1,e.y),this.set_224j3y$(t,2,e.z),this.set_224j3y$(t,3,i)},bn.prototype.setRow_ky00rh$=function(t,e){this.set_224j3y$(t,0,e.x),this.set_224j3y$(t,1,e.y),this.set_224j3y$(t,2,e.z),this.set_224j3y$(t,3,e.w)},bn.prototype.getRow_8irwu3$=function(t,e){return e.x=this.get_vux9f0$(t,0),e.y=this.get_vux9f0$(t,1),e.z=this.get_vux9f0$(t,2),e.w=this.get_vux9f0$(t,3),e},bn.prototype.setCol_umtdzk$=function(t,e,i){this.set_224j3y$(0,t,e.x),this.set_224j3y$(1,t,e.y),this.set_224j3y$(2,t,e.z),this.set_224j3y$(3,t,i)},bn.prototype.setCol_ky00rh$=function(t,e){this.set_224j3y$(0,t,e.x),this.set_224j3y$(1,t,e.y),this.set_224j3y$(2,t,e.z),this.set_224j3y$(3,t,e.w)},bn.prototype.getCol_8irwu3$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e.w=this.get_vux9f0$(3,t),e},bn.prototype.getOrigin_5s4mqs$=function(t){return t.x=this.get_vux9f0$(0,3),t.y=this.get_vux9f0$(1,3),t.z=this.get_vux9f0$(2,3),t},bn.prototype.getRotation_5s4mpx$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var r=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,o=(r+1|0)%3,s=(r+2|0)%3,a=this.get_vux9f0$(r,r)-this.get_vux9f0$(o,o)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_5wr77w$(r,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,o)-this.get_vux9f0$(o,s))*l,t.set_5wr77w$(o,(this.get_vux9f0$(o,r)+this.get_vux9f0$(r,o))*l),t.set_5wr77w$(s,(this.get_vux9f0$(s,r)+this.get_vux9f0$(r,s))*l)}return t},bn.prototype.toBuffer_he122g$=function(t){for(var e=0;e<16;e++)t.put_mx4ult$(this.matrix[this.offset+e|0]);return t.flip(),t},bn.prototype.toList=function(){for(var t=M(),e=0;e<=15;e++){var i=this.matrix[this.offset+e|0];t.add_11rb$(i)}return t},bn.prototype.dump=function(){for(var t=0;t<=3;t++){for(var e=0;e<=3;e++)H(this.get_vux9f0$(t,e).toString()+" ");W()}},xn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var wn=null;function zn(){return null===wn&&new xn,wn}function kn(t){Nn(),void 0===t&&(t=32),bn.call(this),this.stackSize=t,this.stackIndex_51r8af$_0=0,this.matrix=new Float64Array(16*this.stackSize|0),this.setIdentity()}function Sn(){Cn=this,this.DEFAULT_STACK_SIZE=32}bn.$metadata$={kind:$,simpleName:"Mat4d",interfaces:[]},Sn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cn=null;function Nn(){return null===Cn&&new Sn,Cn}function En(){On(),this.matrix_cl37xc$_0=new Float32Array(16),this.offset_ix8w3y$_0=0,this.setIdentity()}function Tn(){Pn=this,this.tmpMatLock_0=new V,this.tmpMatA_0=new En,this.tmpMatB_0=new En}Object.defineProperty(kn.prototype,"stackIndex",{configurable:!0,get:function(){return this.stackIndex_51r8af$_0},set:function(t){this.stackIndex_51r8af$_0=t,this.offset=16*t|0}}),kn.prototype.push=function(){if(this.stackIndex>=this.stackSize)throw cn("Matrix stack overflow");for(var t=0;t<=15;t++)this.matrix[this.offset+16+t|0]=this.matrix[this.offset+t|0];return this.stackIndex=this.stackIndex+1|0,this},kn.prototype.pop=function(){if(this.stackIndex<=0)throw cn("Matrix stack underflow");return this.stackIndex=this.stackIndex-1|0,this},kn.prototype.reset=function(){return this.stackIndex=0,this.setIdentity(),this},kn.$metadata$={kind:$,simpleName:"Mat4dStack",interfaces:[bn]},Object.defineProperty(En.prototype,"matrix",{configurable:!0,get:function(){return this.matrix_cl37xc$_0},set:function(t){this.matrix_cl37xc$_0=t}}),Object.defineProperty(En.prototype,"offset",{configurable:!0,get:function(){return this.offset_ix8w3y$_0},set:function(t){this.offset_ix8w3y$_0=t}}),En.prototype.translate_y2kzbl$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[12+r|0]=this.matrix[12+r|0]+(this.matrix[r]*t+this.matrix[4+r|0]*e+this.matrix[8+r|0]*i)}return this},En.prototype.translate_czzhiu$=function(t){return this.translate_y2kzbl$(t.x,t.y,t.z)},En.prototype.translate_g84k6w$=function(t,e,i,n){for(var r=0;r<=11;r++)n.matrix[n.offset+r|0]=this.matrix[this.offset+r|0];for(var o=0;o<=3;o++){var s=this.offset+o|0;n.matrix[n.offset+12+o|0]=this.matrix[s]*t+this.matrix[4+s|0]*e+this.matrix[8+s|0]*i+this.matrix[12+s|0]}return n},En.prototype.rotate_7b5o5w$=function(t,e,i,n){return On().tmpMatLock_0,On().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.set_d4zu6j$(this.mul_93v2ma$(On().tmpMatA_0,On().tmpMatB_0))},En.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},En.prototype.rotate_c240mt$=function(t,e,i,n,r){return On().tmpMatLock_0,On().tmpMatA_0.setRotate_7b5o5w$(t,e,i,n),this.mul_93v2ma$(On().tmpMatA_0,r)},En.prototype.rotate_phvhhm$=function(t,e,i){return this.rotate_c240mt$(t,e.x,e.y,e.z,i)},En.prototype.rotate_d4zu7e$=function(t){return On().tmpMatLock_0,On().tmpMatA_0.setIdentity().setRotation_d4zu7e$(t),this.set_d4zu6j$(this.mul_93v2ma$(On().tmpMatA_0,On().tmpMatB_0)),s},En.prototype.scale_mx4ult$=function(t){return this.scale_y2kzbl$(t,t,t)},En.prototype.scale_y2kzbl$=function(t,e,i){for(var n=0;n<=3;n++){var r=this.offset+n|0;this.matrix[r]=this.matrix[r]*t,this.matrix[4+r|0]=this.matrix[4+r|0]*e,this.matrix[8+r|0]=this.matrix[8+r|0]*i}return this},En.prototype.scale_czzhiu$=function(t){return this.scale_y2kzbl$(t.x,t.y,t.z)},En.prototype.scale_g84k6w$=function(t,e,i,n){for(var r=0;r<=3;r++){var o=n.offset+r|0,s=this.offset+r|0;n.matrix[o]=this.matrix[s]*t,n.matrix[4+o|0]=this.matrix[4+s|0]*e,n.matrix[8+o|0]=this.matrix[8+s|0]*i,n.matrix[12+o|0]=this.matrix[12+s|0]}return n},En.prototype.resetScale=function(){var t=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0),e=1/A.sqrt(t),i=this.get_vux9f0$(0,1)*this.get_vux9f0$(0,1)+this.get_vux9f0$(1,1)*this.get_vux9f0$(1,1)+this.get_vux9f0$(2,1)*this.get_vux9f0$(2,1),n=1/A.sqrt(i),r=this.get_vux9f0$(0,2)*this.get_vux9f0$(0,2)+this.get_vux9f0$(1,2)*this.get_vux9f0$(1,2)+this.get_vux9f0$(2,2)*this.get_vux9f0$(2,2),o=1/A.sqrt(r);return this.scale_y2kzbl$(e,n,o),this},En.prototype.transpose=function(){return On().tmpMatLock_0,this.set_d4zu6j$(this.transpose_d4zu6j$(On().tmpMatA_0))},En.prototype.transpose_d4zu6j$=function(t){for(var e=0;e<=3;e++){var i=(4*e|0)+this.offset|0;t.matrix[e+t.offset|0]=this.matrix[i],t.matrix[e+4+t.offset|0]=this.matrix[i+1|0],t.matrix[e+8+t.offset|0]=this.matrix[i+2|0],t.matrix[e+12+t.offset|0]=this.matrix[i+3|0]}return t},En.prototype.invert_mx4ult$=function(t){void 0===t&&(t=0),On().tmpMatLock_0;var e=this.invert_8kv2li$(On().tmpMatA_0,t);return e&&this.set_d4zu6j$(On().tmpMatA_0),e},En.prototype.invert_8kv2li$=function(t,e){void 0===e&&(e=0);var i=this.matrix[this.offset+0|0],n=this.matrix[this.offset+1|0],r=this.matrix[this.offset+2|0],o=this.matrix[this.offset+3|0],s=this.matrix[this.offset+4|0],a=this.matrix[this.offset+5|0],l=this.matrix[this.offset+6|0],u=this.matrix[this.offset+7|0],p=this.matrix[this.offset+8|0],c=this.matrix[this.offset+9|0],h=this.matrix[this.offset+10|0],d=this.matrix[this.offset+11|0],f=this.matrix[this.offset+12|0],_=this.matrix[this.offset+13|0],m=this.matrix[this.offset+14|0],$=this.matrix[this.offset+15|0],y=h*$,v=m*d,g=l*$,b=m*u,x=l*d,w=h*u,z=r*$,k=m*o,S=r*d,C=h*o,N=r*u,E=l*o,T=y*a+b*c+x*_-(v*a+g*c+w*_),P=v*n+z*c+C*_-(y*n+k*c+S*_),O=g*n+k*a+N*_-(b*n+z*a+E*_),M=w*n+S*a+E*c-(x*n+C*a+N*c),j=v*s+g*p+w*f-(y*s+b*p+x*f),I=y*i+k*p+S*f-(v*i+z*p+C*f),R=b*i+z*s+E*f-(g*i+k*s+N*f),L=x*i+C*s+N*p-(w*i+S*s+E*p),D=p*_,q=f*c,F=s*_,B=f*a,U=s*c,V=p*a,G=i*_,H=f*n,W=i*c,X=p*n,K=i*a,Y=s*n,Z=D*u+B*d+U*$-(q*u+F*d+V*$),J=q*o+G*d+X*$-(D*o+H*d+W*$),Q=F*o+H*u+K*$-(B*o+G*u+Y*$),tt=V*o+W*u+Y*d-(U*o+X*u+K*d),et=F*h+V*m+q*l-(U*m+D*l+B*h),it=W*m+D*r+H*h-(G*h+X*m+q*r),nt=G*l+Y*m+B*r-(K*m+F*r+H*l),rt=K*h+U*r+X*l-(W*l+Y*h+V*r),ot=i*T+s*P+p*O+f*M;if(A.abs(ot)<=e)return!1;var st=1/ot;return t.matrix[t.offset]=T*st,t.matrix[1+t.offset|0]=P*st,t.matrix[2+t.offset|0]=O*st,t.matrix[3+t.offset|0]=M*st,t.matrix[4+t.offset|0]=j*st,t.matrix[5+t.offset|0]=I*st,t.matrix[6+t.offset|0]=R*st,t.matrix[7+t.offset|0]=L*st,t.matrix[8+t.offset|0]=Z*st,t.matrix[9+t.offset|0]=J*st,t.matrix[10+t.offset|0]=Q*st,t.matrix[11+t.offset|0]=tt*st,t.matrix[12+t.offset|0]=et*st,t.matrix[13+t.offset|0]=it*st,t.matrix[14+t.offset|0]=nt*st,t.matrix[15+t.offset|0]=rt*st,!0},En.prototype.transform_w1lst9$=function(t,e){void 0===e&&(e=1);var i=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),n=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),r=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3);return t.set_y2kzbl$(i,n,r)},En.prototype.transform_a6wx89$=function(t,e,i){return void 0===e&&(e=1),i.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+e*this.get_vux9f0$(0,3),i.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+e*this.get_vux9f0$(1,3),i.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+e*this.get_vux9f0$(2,3),i},En.prototype.transform_5s4mpv$=function(t){var e=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),i=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),n=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),r=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3);return t.set_7b5o5w$(e,i,n,r)},En.prototype.transform_uzu8ww$=function(t,e){return e.x=t.x*this.get_vux9f0$(0,0)+t.y*this.get_vux9f0$(0,1)+t.z*this.get_vux9f0$(0,2)+t.w*this.get_vux9f0$(0,3),e.y=t.x*this.get_vux9f0$(1,0)+t.y*this.get_vux9f0$(1,1)+t.z*this.get_vux9f0$(1,2)+t.w*this.get_vux9f0$(1,3),e.z=t.x*this.get_vux9f0$(2,0)+t.y*this.get_vux9f0$(2,1)+t.z*this.get_vux9f0$(2,2)+t.w*this.get_vux9f0$(2,3),e.w=t.x*this.get_vux9f0$(3,0)+t.y*this.get_vux9f0$(3,1)+t.z*this.get_vux9f0$(3,2)+t.w*this.get_vux9f0$(3,3),e},En.prototype.add_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=this.matrix[this.offset+e|0]+t.matrix[t.offset+e|0];return this},En.prototype.mul_d4zu6j$=function(t){return On().tmpMatLock_0,this.mul_93v2ma$(t,On().tmpMatA_0),this.set_d4zu6j$(On().tmpMatA_0)},En.prototype.mul_93v2ma$=function(t,e){for(var i=0;i<=3;i++)for(var n=0;n<=3;n++){for(var r=0,o=0;o<=3;o++)r+=this.matrix[this.offset+n+(4*o|0)|0]*t.matrix[t.offset+(4*i|0)+o|0];e.matrix[e.offset+(4*i|0)+n|0]=r}return e},En.prototype.set_d4zu6j$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},En.prototype.set_d4zu6l$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.matrix[t.offset+e|0];return this},En.prototype.set_hcyabg$=function(t){for(var e=0;e<=15;e++)this.matrix[this.offset+e|0]=t.get_za3lpa$(e);return this},En.prototype.setZero=function(){for(var t=0;t<=15;t++)this.matrix[this.offset+t|0]=0;return this},En.prototype.setIdentity=function(){for(var t=1;t<=15;t++)this.matrix[this.offset+t|0]=0;return this.matrix[this.offset]=1,this.matrix[this.offset+5|0]=1,this.matrix[this.offset+10|0]=1,this.matrix[this.offset+15|0]=1,this},En.prototype.setRotate_7b5o5w$=function(t,e,i,n){var r=t*EE.DEG_2_RAD,o=e,s=i,a=n;this.matrix[this.offset+3|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1;var l=A.sin(r),u=A.cos(r);if(1===o&&0===s&&0===a)this.matrix[this.offset+5|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+6|0]=l,this.matrix[this.offset+9|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+0|0]=1;else if(0===o&&1===s&&0===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+10|0]=u,this.matrix[this.offset+8|0]=l,this.matrix[this.offset+2|0]=-l,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+5|0]=1;else if(0===o&&0===s&&1===a)this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=u,this.matrix[this.offset+1|0]=l,this.matrix[this.offset+4|0]=-l,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=1;else{var p,c=o*o+s*s+a*a,h=A.sqrt(c);p=EE.FUZZY_EQ_F;var d=h-1;if(!(A.abs(d)<=p)){var f=1/h;o*=f,s*=f,a*=f}var _=1-u,m=o*s,$=s*a,y=a*o,v=o*l,g=s*l,b=a*l;this.matrix[this.offset+0|0]=o*o*_+u,this.matrix[this.offset+4|0]=m*_-b,this.matrix[this.offset+8|0]=y*_+g,this.matrix[this.offset+1|0]=m*_+b,this.matrix[this.offset+5|0]=s*s*_+u,this.matrix[this.offset+9|0]=$*_-v,this.matrix[this.offset+2|0]=y*_-g,this.matrix[this.offset+6|0]=$*_+v,this.matrix[this.offset+10|0]=a*a*_+u}return this},En.prototype.setRotate_czzhhz$=function(t){var e=t.w,i=t.x,n=t.y,r=t.z,o=e*e+i*i+n*n+r*r,s=A.sqrt(o);return s=1/(s*s),this.set_n0b4r3$(0,0,1-2*s*(n*n+r*r)),this.set_n0b4r3$(0,1,2*s*(i*n-r*e)),this.set_n0b4r3$(0,2,2*s*(i*r+n*e)),this.set_n0b4r3$(0,3,0),this.set_n0b4r3$(1,0,2*s*(i*n+r*e)),this.set_n0b4r3$(1,1,1-2*s*(i*i+r*r)),this.set_n0b4r3$(1,2,2*s*(n*r-i*e)),this.set_n0b4r3$(1,3,0),this.set_n0b4r3$(2,0,2*s*(i*r-n*e)),this.set_n0b4r3$(2,1,2*s*(n*r+i*e)),this.set_n0b4r3$(2,2,1-2*s*(i*i+n*n)),this.set_n0b4r3$(2,3,0),this.set_n0b4r3$(3,0,0),this.set_n0b4r3$(3,1,0),this.set_n0b4r3$(3,2,0),this.set_n0b4r3$(3,3,1),this},En.prototype.setRotation_d4zu7e$=function(t){for(var e=0;e<=2;e++)for(var i=0;i<=2;i++)this.set_n0b4r3$(e,i,t.get_vux9f0$(e,i));var n=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0)+this.get_vux9f0$(3,0)*this.get_vux9f0$(3,0),r=1/A.sqrt(n);this.scale_y2kzbl$(r,r,r)},En.prototype.setRotation_d4zu6j$=function(t){for(var e=0;e<=2;e++)for(var i=0;i<=2;i++)this.set_n0b4r3$(e,i,t.get_vux9f0$(e,i));var n=this.get_vux9f0$(0,0)*this.get_vux9f0$(0,0)+this.get_vux9f0$(1,0)*this.get_vux9f0$(1,0)+this.get_vux9f0$(2,0)*this.get_vux9f0$(2,0)+this.get_vux9f0$(3,0)*this.get_vux9f0$(3,0),r=1/A.sqrt(n);this.scale_y2kzbl$(r,r,r)},En.prototype.setLookAt_n440fu$=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n*n+r*r+o*o,a=1/A.sqrt(s);n*=a,o*=a;var l=(r*=a)*i.z-o*i.y,u=o*i.x-n*i.z,p=n*i.y-r*i.x,c=l*l+u*u+p*p,h=1/A.sqrt(c),d=(u*=h)*o-(p*=h)*r,f=p*n-(l*=h)*o,_=l*r-u*n;return this.matrix[this.offset+0|0]=l,this.matrix[this.offset+1|0]=d,this.matrix[this.offset+2|0]=-n,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=u,this.matrix[this.offset+5|0]=f,this.matrix[this.offset+6|0]=-r,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=p,this.matrix[this.offset+9|0]=_,this.matrix[this.offset+10|0]=-o,this.matrix[this.offset+11|0]=0,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=0,this.matrix[this.offset+15|0]=1,this.translate_y2kzbl$(-t.x,-t.y,-t.z)},En.prototype.setOrthographic_w8lrqs$=function(t,e,i,n,r,o){if(t===e)throw G("left == right");if(i===n)throw G("bottom == top");if(r===o)throw G("near == far");var s=1/(e-t),a=1/(n-i),l=1/(o-r),u=2*s,p=2*a,c=-2*l,h=-(e+t)*s,d=-(n+i)*a,f=-(o+r)*l;return this.matrix[this.offset+0|0]=u,this.matrix[this.offset+5|0]=p,this.matrix[this.offset+10|0]=c,this.matrix[this.offset+12|0]=h,this.matrix[this.offset+13|0]=d,this.matrix[this.offset+14|0]=f,this.matrix[this.offset+15|0]=1,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+11|0]=0,this},En.prototype.setPerspective_7b5o5w$=function(t,e,i,n){var r=t*(U.PI/360),o=1/A.tan(r),s=1/(i-n);return this.matrix[this.offset+0|0]=o/e,this.matrix[this.offset+1|0]=0,this.matrix[this.offset+2|0]=0,this.matrix[this.offset+3|0]=0,this.matrix[this.offset+4|0]=0,this.matrix[this.offset+5|0]=o,this.matrix[this.offset+6|0]=0,this.matrix[this.offset+7|0]=0,this.matrix[this.offset+8|0]=0,this.matrix[this.offset+9|0]=0,this.matrix[this.offset+10|0]=(n+i)*s,this.matrix[this.offset+11|0]=-1,this.matrix[this.offset+12|0]=0,this.matrix[this.offset+13|0]=0,this.matrix[this.offset+14|0]=2*n*i*s,this.matrix[this.offset+15|0]=0,this},En.prototype.get_za3lpa$=function(t){return this.matrix[this.offset+t|0]},En.prototype.get_vux9f0$=function(t,e){return this.matrix[this.offset+(4*e|0)+t|0]},En.prototype.set_24o109$=function(t,e){this.matrix[this.offset+t|0]=e},En.prototype.set_n0b4r3$=function(t,e,i){this.matrix[this.offset+(4*e|0)+t|0]=i},En.prototype.setRow_gdg6t7$=function(t,e,i){this.set_n0b4r3$(t,0,e.x),this.set_n0b4r3$(t,1,e.y),this.set_n0b4r3$(t,2,e.z),this.set_n0b4r3$(t,3,i)},En.prototype.setRow_ky00rj$=function(t,e){this.set_n0b4r3$(t,0,e.x),this.set_n0b4r3$(t,1,e.y),this.set_n0b4r3$(t,2,e.z),this.set_n0b4r3$(t,3,e.w)},En.prototype.getRow_8irwu1$=function(t,e){return e.x=this.get_vux9f0$(t,0),e.y=this.get_vux9f0$(t,1),e.z=this.get_vux9f0$(t,2),e.w=this.get_vux9f0$(t,3),e},En.prototype.setCol_gdg6t7$=function(t,e,i){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z),this.set_n0b4r3$(3,t,i)},En.prototype.setCol_ky00rj$=function(t,e){this.set_n0b4r3$(0,t,e.x),this.set_n0b4r3$(1,t,e.y),this.set_n0b4r3$(2,t,e.z),this.set_n0b4r3$(3,t,e.w)},En.prototype.getCol_8irwu1$=function(t,e){return e.x=this.get_vux9f0$(0,t),e.y=this.get_vux9f0$(1,t),e.z=this.get_vux9f0$(2,t),e.w=this.get_vux9f0$(3,t),e},En.prototype.getOrigin_5s4mqq$=function(t){return t.x=this.get_vux9f0$(0,3),t.y=this.get_vux9f0$(1,3),t.z=this.get_vux9f0$(2,3),t},En.prototype.getOrientation_d4zu7e$=function(t){return t.set_n0b4r3$(0,0,this.get_vux9f0$(0,0)),t.set_n0b4r3$(0,1,this.get_vux9f0$(0,1)),t.set_n0b4r3$(0,2,this.get_vux9f0$(0,2)),t.set_n0b4r3$(1,0,this.get_vux9f0$(1,0)),t.set_n0b4r3$(1,1,this.get_vux9f0$(1,1)),t.set_n0b4r3$(1,2,this.get_vux9f0$(1,2)),t.set_n0b4r3$(2,0,this.get_vux9f0$(2,0)),t.set_n0b4r3$(2,1,this.get_vux9f0$(2,1)),t.set_n0b4r3$(2,2,this.get_vux9f0$(2,2)),t},En.prototype.getOrientationTransposed_d4zu7e$=function(t){return t.set_n0b4r3$(0,0,this.get_vux9f0$(0,0)),t.set_n0b4r3$(0,1,this.get_vux9f0$(1,0)),t.set_n0b4r3$(0,2,this.get_vux9f0$(2,0)),t.set_n0b4r3$(1,0,this.get_vux9f0$(0,1)),t.set_n0b4r3$(1,1,this.get_vux9f0$(1,1)),t.set_n0b4r3$(1,2,this.get_vux9f0$(2,1)),t.set_n0b4r3$(2,0,this.get_vux9f0$(0,2)),t.set_n0b4r3$(2,1,this.get_vux9f0$(1,2)),t.set_n0b4r3$(2,2,this.get_vux9f0$(2,2)),t},En.prototype.getRotation_5s4mpv$=function(t){var e=this.get_vux9f0$(0,0)+this.get_vux9f0$(1,1)+this.get_vux9f0$(2,2);if(e>0){var i=e+1,n=A.sqrt(i);t.w=.5*n,n=.5/n,t.x=(this.get_vux9f0$(2,1)-this.get_vux9f0$(1,2))*n,t.y=(this.get_vux9f0$(0,2)-this.get_vux9f0$(2,0))*n,t.z=(this.get_vux9f0$(1,0)-this.get_vux9f0$(0,1))*n}else{var r=this.get_vux9f0$(0,0)<this.get_vux9f0$(1,1)?this.get_vux9f0$(1,1)<this.get_vux9f0$(2,2)?2:1:this.get_vux9f0$(0,0)<this.get_vux9f0$(2,2)?2:0,o=(r+1|0)%3,s=(r+2|0)%3,a=this.get_vux9f0$(r,r)-this.get_vux9f0$(o,o)-this.get_vux9f0$(s,s)+1,l=A.sqrt(a);t.set_24o109$(r,.5*l),l=.5/l,t.w=(this.get_vux9f0$(s,o)-this.get_vux9f0$(o,s))*l,t.set_24o109$(o,(this.get_vux9f0$(o,r)+this.get_vux9f0$(r,o))*l),t.set_24o109$(s,(this.get_vux9f0$(s,r)+this.get_vux9f0$(r,s))*l)}return t},En.prototype.toBuffer_he122g$=function(t){return t.put_kgymra$(this.matrix,this.offset,16),t.flip(),t},En.prototype.toList=function(){for(var t=M(),e=0;e<=15;e++){var i=this.matrix[this.offset+e|0];t.add_11rb$(i)}return t},En.prototype.dump=function(){for(var t=0;t<=3;t++){for(var e=0;e<=3;e++)H(this.get_vux9f0$(t,e).toString()+" ");W()}},Tn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Pn=null;function On(){return null===Pn&&new Tn,Pn}function Mn(t){Bn(),void 0===t&&(t=32),En.call(this),this.stackSize=t,this.stackIndex_rxi7m3$_0=0,this.matrix=new Float32Array(16*this.stackSize|0),this.setIdentity()}function jn(){Fn=this,this.DEFAULT_STACK_SIZE=32}En.$metadata$={kind:$,simpleName:"Mat4f",interfaces:[]},jn.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var An,In,Rn,Ln,Dn,qn,Fn=null;function Bn(){return null===Fn&&new jn,Fn}function Un(t,e){var i=A.max(t,e),n=A.log2(i);return B(A.floor(n))+1|0}function Vn(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=i.x-t.x,a=i.y-t.y,l=i.z-t.z,u=n*s+r*a+o*l,p=(n*n+r*r+o*o)*(s*s+a*a+l*l)-u*u;return.5*A.sqrt(p)}function Gn(t,e,i){var n=t.distance_czzhiu$(e),r=e.distance_czzhiu$(i),o=i.distance_czzhiu$(t),s=(n+r+o)/2,a=n*r*o/(8*(s-n)*(s-r)*(s-o));return A.abs(a)}function Hn(t,e){return t.get_za3lpa$(e)}function Wn(t,e,i){var n=t.get_za3lpa$(i);return t.set_wxm5ur$(i,t.get_za3lpa$(e)),t.set_wxm5ur$(e,n),s}function Xn(t,e,i,n){Kn(t,e.first,e.last,i,Hn,n,Wn)}function Kn(t,e,i,n,r,o,s){for(var a=e,l=i;l>a;){if((l-a|0)>600){var u=l-a+1|0,p=n-a+1|0,c=A.log(u),h=2*c/3,d=.5*A.exp(h),f=c*d*(u-d)/u,_=p-u/2,m=.5*A.sqrt(f)*A.sign(_),$=a,y=B(n-p*d/u+m),v=A.max($,y),g=l,b=B(n+(u-p|0)*d/u+m);Kn(t,v,A.min(g,b),n,r,o,s)}var x=r(t,n),w=a,z=l;for(s(t,a,n),o(r(t,l),x)>0&&s(t,l,a);w<z;){for(s(t,w,z),w=w+1|0,z=z-1|0;o(r(t,w),x)<0;)w=w+1|0;for(;z>=0&&o(r(t,z),x)>0;)z=z-1|0}0===o(r(t,a),x)?s(t,a,z):s(t,z=z+1|0,l),z<=n&&(a=z+1|0),n<=z&&(l=z-1|0)}}function Yn(){this.p=Mr(),this.n=Ar(Er().Y_AXIS)}function Zn(t,e,i){var n=Jn(t,e,i);return A.sqrt(n)}function Jn(t,e,i){return Qn(t.x,t.y,t.z,e,i)}function Qn(t,e,i,n,r){var o,s,a,l=(t*r.x+e*r.y+i*r.z-n.times_czzhiu$(r))/r.times_czzhiu$(r);return l<=0?(o=n.x-t,s=n.y-e,a=n.z-i):(o=r.x*l+n.x-t,s=r.y*l+n.y-e,a=r.z*l+n.z-i),o*o+s*s+a*a}function tr(){}function er(t){this.x_i5bv4$_0=t,this.y_i5bu9$_0=362436e3,this.z_i5bte$_0=521288629,this.c_i5cd7$_0=7654321}function ir(){this.origin=Mr(),this.direction=Mr()}function nr(){this.ray=new ir,this.intHitPosition_0=Mr(),this.intHitPositionLocal_0=Mr(),this.hitNode_s1zft8$_0=null,this.hitDistanceSqr_fy7zgf$_0=ot.MAX_VALUE}function rr(t,e){ar(),this.fields=new Float32Array(2),this.fields[0]=t,this.fields[1]=e}function or(){sr=this,this.ZERO=lr(0),this.X_AXIS=new rr(1,0),this.Y_AXIS=new rr(0,1),this.NEG_X_AXIS=new rr(-1,0),this.NEG_Y_AXIS=new rr(0,-1)}Object.defineProperty(Mn.prototype,"stackIndex",{configurable:!0,get:function(){return this.stackIndex_rxi7m3$_0},set:function(t){this.stackIndex_rxi7m3$_0=t,this.offset=16*t|0}}),Mn.prototype.push=function(){if(this.stackIndex>=this.stackSize)throw cn("Matrix stack overflow");for(var t=0;t<=15;t++)this.matrix[this.offset+16+t|0]=this.matrix[this.offset+t|0];return this.stackIndex=this.stackIndex+1|0,this},Mn.prototype.pop=function(){if(this.stackIndex<=0)throw cn("Matrix stack underflow");return this.stackIndex=this.stackIndex-1|0,this},Mn.prototype.reset=function(){return this.stackIndex=0,this.setIdentity(),this},Mn.$metadata$={kind:$,simpleName:"Mat4fStack",interfaces:[En]},Yn.prototype.intersectionPoint_lplggz$=function(t,e){var i,n=this.n.dot_czzhiu$(t.direction);if(i=EE.FUZZY_EQ_F,!(A.abs(n)<=i)){var r=this.p.subtract_2gj7b4$(t.origin,e).dot_czzhiu$(this.n)/n;return e.set_czzhiu$(t.direction).scale_mx4ult$(r).add_czzhiu$(t.origin),r>=0}return!1},Yn.prototype.toVec4=function(){return this.toVec4_5s4mpv$(no())},Yn.prototype.toVec4_5s4mpv$=function(t){return t.x=this.n.x,t.y=this.n.y,t.z=this.n.z,t.w=this.n.times_czzhiu$(this.p),t},Yn.$metadata$={kind:$,simpleName:"Plane",interfaces:[]},tr.prototype.nextPoints_za3lpa$=function(t){for(var e=M(),i=1;i<=t;i++){var n=this.nextPoint();e.add_11rb$(n)}return e},tr.$metadata$={kind:$,simpleName:"PointDistribution",interfaces:[]},er.prototype.randomI=function(){this.x_i5bv4$_0=12345+(69069*this.x_i5bv4$_0|0)|0,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0<<13,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0>>17,this.y_i5bu9$_0=this.y_i5bu9$_0^this.y_i5bu9$_0<<5;var t=et.multiply(e.Long.fromInt(this.z_i5bte$_0)).add(e.Long.fromInt(this.c_i5cd7$_0));return this.c_i5cd7$_0=t.shiftRight(32).toInt(),this.z_i5bte$_0=t.toInt(),this.x_i5bv4$_0+this.y_i5bu9$_0+this.z_i5bte$_0|0},er.prototype.randomI_vux9f0$=function(t,e){return it(this.randomI())%(e-t+1|0)+t|0},er.prototype.randomI_n8acyv$=function(t){return this.randomI_vux9f0$(t.first,t.last)},er.prototype.randomF=function(){return it(this.randomI())/2147483647},er.prototype.randomF_dleff0$=function(t,e){return this.randomF()*(e-t)+t},er.prototype.randomD=function(){var t=nt(e.Long.fromInt(this.randomI())).shiftLeft(32).or(nt(e.Long.fromInt(this.randomI())));return nt(t).toNumber()/rt.toNumber()},er.prototype.randomD_lu1900$=function(t,e){return this.randomD()*(e-t)+t},er.$metadata$={kind:$,simpleName:"Random",interfaces:[]},ir.prototype.set_nvyeur$=function(t){this.origin.set_czzhiu$(t.origin),this.direction.set_czzhiu$(t.direction)},ir.prototype.setFromLookAt_4lfkt4$=function(t,e){this.origin.set_czzhiu$(t),this.direction.set_czzhiu$(e).subtract_czzhiu$(t).norm()},ir.prototype.distanceToPoint_czzhiu$=function(t){return Zn(t,this.origin,this.direction)},ir.prototype.sqrDistanceToPoint_czzhiu$=function(t){return Jn(t,this.origin,this.direction)},ir.prototype.sqrDistanceToPoint_y2kzbl$=function(t,e,i){return Qn(t,e,i,this.origin,this.direction)},ir.prototype.transformBy_d4zu6j$=function(t){t.transform_w1lst9$(this.origin),t.transform_w1lst9$(this.direction,0).norm()},ir.prototype.transformBy_d4zu6l$=function(t){t.transform_w1lst9$(this.origin),t.transform_w1lst9$(this.direction,0).norm()},ir.prototype.toString=function(){return"{origin="+this.origin+", direction="+this.direction+"}"},ir.$metadata$={kind:$,simpleName:"Ray",interfaces:[]},Object.defineProperty(nr.prototype,"hitPosition",{configurable:!0,get:function(){return this.intHitPosition_0}}),Object.defineProperty(nr.prototype,"hitPositionLocal",{configurable:!0,get:function(){return this.intHitPositionLocal_0}}),Object.defineProperty(nr.prototype,"hitNode",{configurable:!0,get:function(){return this.hitNode_s1zft8$_0},set:function(t){this.hitNode_s1zft8$_0=t}}),Object.defineProperty(nr.prototype,"hitDistanceSqr",{configurable:!0,get:function(){return this.hitDistanceSqr_fy7zgf$_0},set:function(t){this.hitDistanceSqr_fy7zgf$_0=t}}),Object.defineProperty(nr.prototype,"isHit",{configurable:!0,get:function(){return this.hitDistanceSqr<ot.MAX_VALUE}}),nr.prototype.clear=function(){this.intHitPosition_0.set_czzhiu$(Er().ZERO),this.intHitPositionLocal_0.set_czzhiu$(Er().ZERO),this.hitNode=null,this.hitDistanceSqr=ot.MAX_VALUE},nr.prototype.setHit_vfk0k2$=function(t,e){this.intHitPosition_0.set_czzhiu$(this.ray.direction).scale_mx4ult$(e).add_czzhiu$(this.ray.origin),this.setHit_ulhqnp$(t,this.intHitPosition_0)},nr.prototype.setHit_ulhqnp$=function(t,e){this.intHitPosition_0.set_czzhiu$(e),this.intHitPositionLocal_0.set_czzhiu$(e),this.hitNode=t,this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin)},nr.prototype.transformBy_d4zu6j$=function(t){this.ray.transformBy_d4zu6j$(t),this.isHit&&(t.transform_w1lst9$(this.intHitPosition_0),this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin))},nr.prototype.transformBy_d4zu6l$=function(t){this.ray.transformBy_d4zu6l$(t),this.isHit&&(t.transform_w1lst9$(this.intHitPosition_0),this.hitDistanceSqr=this.hitPosition.sqrDistance_czzhiu$(this.ray.origin))},nr.$metadata$={kind:$,simpleName:"RayTest",interfaces:[]},Object.defineProperty(rr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(rr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),rr.prototype.add_q2ruao$=function(t,e){return e.set_czzhjp$(this).add_czzhjp$(t)},rr.prototype.distance_czzhjp$=function(t){var e=this.sqrDistance_czzhjp$(t);return A.sqrt(e)},rr.prototype.dot_czzhjp$=function(t){return this.x*t.x+this.y*t.y},rr.prototype.isFuzzyEqual_rnua8g$=function(t,e){void 0===e&&(e=Rn);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}return n},rr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},rr.prototype.mix_5uckat$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i},rr.prototype.mul_q2ruao$=function(t,e){return e.set_czzhjp$(this).mul_czzhjp$(t)},rr.prototype.norm_5s4mrl$=function(t){return t.set_czzhjp$(this).norm()},rr.prototype.rotate_749b9g$=function(t,e){return e.set_czzhjp$(this).rotate_mx4ult$(t)},rr.prototype.scale_749b9g$=function(t,e){return e.set_czzhjp$(this).scale_mx4ult$(t)},rr.prototype.sqrDistance_czzhjp$=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},rr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y},rr.prototype.subtract_q2ruao$=function(t,e){return e.set_czzhjp$(this).subtract_czzhjp$(t)},rr.prototype.get_za3lpa$=function(t){return this.fields[t]},rr.prototype.times_czzhjp$=function(t){return this.dot_czzhjp$(t)},rr.prototype.toString=function(){return"("+this.x+", "+this.y+")"},rr.prototype.toVec2d=function(){return new hr(this.x,this.y)},rr.prototype.toMutableVec2d=function(){return this.toMutableVec2d_5s4mrn$(yr())},rr.prototype.toMutableVec2d_5s4mrn$=function(t){return t.set_lu1900$(this.x,this.y)},rr.prototype.equals=function(t){return this===t||!!e.isType(t,rr)&&this.x===t.x&&this.y===t.y},rr.prototype.hashCode=function(){var t=st(this.x);return t=(31*t|0)+st(this.y)|0},or.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var sr=null;function ar(){return null===sr&&new or,sr}function lr(t,e){return e=e||Object.create(rr.prototype),rr.call(e,t,t),e}function ur(t,e){rr.call(this,t,e)}function pr(t){return t=t||Object.create(ur.prototype),ur.call(t,0,0),t}function cr(t,e){return e=e||Object.create(ur.prototype),ur.call(e,t.x,t.y),e}function hr(t,e){_r(),this.fields=new Float64Array(2),this.fields[0]=t,this.fields[1]=e}function dr(){fr=this,this.ZERO=mr(0),this.X_AXIS=new hr(1,0),this.Y_AXIS=new hr(0,1),this.NEG_X_AXIS=new hr(-1,0),this.NEG_Y_AXIS=new hr(0,-1)}rr.$metadata$={kind:$,simpleName:"Vec2f",interfaces:[]},Object.defineProperty(ur.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(ur.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(ur.prototype,"array",{configurable:!0,get:function(){return this.fields}}),ur.prototype.add_czzhjp$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},ur.prototype.mul_czzhjp$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},ur.prototype.norm=function(){return this.scale_mx4ult$(1/this.length())},ur.prototype.rotate_mx4ult$=function(t){var e=t*EE.DEG_2_RAD,i=A.cos(e),n=A.sin(e),r=this.x*i-this.y*n,o=this.x*n+this.y*i;return this.x=r,this.y=o,this},ur.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this},ur.prototype.set_dleff0$=function(t,e){return this.x=t,this.y=e,this},ur.prototype.set_czzhjp$=function(t){return this.x=t.x,this.y=t.y,this},ur.prototype.subtract_czzhjp$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},ur.prototype.divAssign_mx4ult$=function(t){this.scale_mx4ult$(1/t)},ur.prototype.minusAssign_czzhjp$=function(t){this.subtract_czzhjp$(t)},ur.prototype.plusAssign_czzhjp$=function(t){this.add_czzhjp$(t)},ur.prototype.set_24o109$=function(t,e){this.fields[t]=e},ur.prototype.timesAssign_mx4ult$=function(t){this.scale_mx4ult$(t)},ur.$metadata$={kind:$,simpleName:"MutableVec2f",interfaces:[rr]},Object.defineProperty(hr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(hr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),hr.prototype.add_b18iao$=function(t,e){return e.set_czzhjr$(this).add_czzhjr$(t)},hr.prototype.distance_czzhjr$=function(t){var e=this.sqrDistance_czzhjr$(t);return A.sqrt(e)},hr.prototype.dot_czzhjr$=function(t){return this.x*t.x+this.y*t.y},hr.prototype.isFuzzyEqual_f3xr3v$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}return n},hr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},hr.prototype.mix_3jrcj6$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i},hr.prototype.mul_b18iao$=function(t,e){return e.set_czzhjr$(this).mul_czzhjr$(t)},hr.prototype.norm_5s4mrn$=function(t){return t.set_czzhjr$(this).norm()},hr.prototype.rotate_b0flcl$=function(t,e){return e.set_czzhjr$(this).rotate_14dthe$(t)},hr.prototype.scale_b0flcl$=function(t,e){return e.set_czzhjr$(this).scale_14dthe$(t)},hr.prototype.sqrDistance_czzhjr$=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},hr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y},hr.prototype.subtract_b18iao$=function(t,e){return e.set_czzhjr$(this).subtract_czzhjr$(t)},hr.prototype.get_za3lpa$=function(t){return this.fields[t]},hr.prototype.times_czzhjr$=function(t){return this.dot_czzhjr$(t)},hr.prototype.toString=function(){return"("+this.x+", "+this.y+")"},hr.prototype.toVec2f=function(){return new rr(this.x,this.y)},hr.prototype.toMutableVec2f=function(){return this.toMutableVec2f_5s4mrl$(pr())},hr.prototype.toMutableVec2f_5s4mrl$=function(t){return t.set_dleff0$(this.x,this.y)},hr.prototype.equals=function(t){return this===t||!!e.isType(t,hr)&&this.x===t.x&&this.y===t.y},hr.prototype.hashCode=function(){var t=st(this.x);return t=(31*t|0)+st(this.y)|0},dr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fr=null;function _r(){return null===fr&&new dr,fr}function mr(t,e){return e=e||Object.create(hr.prototype),hr.call(e,t,t),e}function $r(t,e){hr.call(this,t,e)}function yr(t){return t=t||Object.create($r.prototype),$r.call(t,0,0),t}function vr(t,e){xr(),this.fields=new Int32Array(2),this.fields[0]=t,this.fields[1]=e}function gr(){br=this,this.ZERO=wr(0),this.X_AXIS=new vr(1,0),this.Y_AXIS=new vr(0,1),this.NEG_X_AXIS=new vr(-1,0),this.NEG_Y_AXIS=new vr(0,-1)}hr.$metadata$={kind:$,simpleName:"Vec2d",interfaces:[]},Object.defineProperty($r.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty($r.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),$r.prototype.add_czzhjr$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},$r.prototype.mul_czzhjr$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},$r.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},$r.prototype.rotate_14dthe$=function(t){var e=t*EE.DEG_2_RAD,i=A.cos(e),n=A.sin(e),r=this.x*i-this.y*n,o=this.x*n+this.y*i;return this.x=r,this.y=o,this},$r.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this},$r.prototype.set_lu1900$=function(t,e){return this.x=t,this.y=e,this},$r.prototype.set_czzhjr$=function(t){return this.x=t.x,this.y=t.y,this},$r.prototype.subtract_czzhjr$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},$r.prototype.divAssign_14dthe$=function(t){this.scale_14dthe$(1/t)},$r.prototype.minusAssign_czzhjr$=function(t){this.subtract_czzhjr$(t)},$r.prototype.plusAssign_czzhjr$=function(t){this.add_czzhjr$(t)},$r.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},$r.prototype.timesAssign_14dthe$=function(t){this.scale_14dthe$(t)},$r.$metadata$={kind:$,simpleName:"MutableVec2d",interfaces:[hr]},Object.defineProperty(vr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(vr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),vr.prototype.get_za3lpa$=function(t){return this.fields[t]},vr.prototype.toString=function(){return"("+this.x+", "+this.y+")"},vr.prototype.equals=function(t){return this===t||!!e.isType(t,co)&&this.x===t.x&&this.y===t.y},vr.prototype.hashCode=function(){var t=st(this.x);return t=(31*t|0)+st(this.y)|0},gr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var br=null;function xr(){return null===br&&new gr,br}function wr(t,e){return e=e||Object.create(vr.prototype),vr.call(e,t,t),e}function zr(t,e){vr.call(this,t,e),this.fields[0]=t,this.fields[1]=e}function kr(t){return t=t||Object.create(zr.prototype),zr.call(t,0,0),t}function Sr(t,e,i){Er(),this.fields=new Float32Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Cr(){Nr=this,this.ZERO=Tr(0),this.X_AXIS=new Sr(1,0,0),this.Y_AXIS=new Sr(0,1,0),this.Z_AXIS=new Sr(0,0,1),this.NEG_X_AXIS=new Sr(-1,0,0),this.NEG_Y_AXIS=new Sr(0,-1,0),this.NEG_Z_AXIS=new Sr(0,0,-1)}vr.$metadata$={kind:$,simpleName:"Vec2i",interfaces:[]},Object.defineProperty(zr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.fields[0]=t}}),Object.defineProperty(zr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.fields[1]=t}}),Object.defineProperty(zr.prototype,"array",{configurable:!0,get:function(){return this.fields}}),zr.prototype.set_czzhjm$=function(t){return this.x=t.x,this.y=t.y,this},zr.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},zr.$metadata$={kind:$,simpleName:"MutableVec2i",interfaces:[vr]},Object.defineProperty(Sr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Sr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Sr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Sr.prototype.add_2gj7b4$=function(t,e){return e.set_czzhiu$(this).add_czzhiu$(t)},Sr.prototype.cross_2gj7b4$=function(t,e){return e.x=this.y*t.z-this.z*t.y,e.y=this.z*t.x-this.x*t.z,e.z=this.x*t.y-this.y*t.x,e},Sr.prototype.distance_czzhiu$=function(t){var e=this.sqrDistance_czzhiu$(t);return A.sqrt(e)},Sr.prototype.dot_czzhiu$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Sr.prototype.isFuzzyEqual_2qa7tb$=function(t,e){void 0===e&&(e=Rn);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}return o},Sr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Sr.prototype.mix_a6wx89$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i},Sr.prototype.mul_2gj7b4$=function(t,e){return e.set_czzhiu$(this).mul_czzhiu$(t)},Sr.prototype.norm_5s4mqq$=function(t){return t.set_czzhiu$(this).norm()},Sr.prototype.planeSpace_t87wgk$=function(t,e){var i=this.z;if(A.abs(i)>Dn){var n=this.y*this.y+this.z*this.z,r=1/A.sqrt(n);t.x=0,t.y=-this.z*r,t.z=this.y*r,e.x=n*r,e.y=-this.x*t.z,e.z=this.x*t.y}else{var o=this.x*this.x+this.y*this.y,s=1/A.sqrt(o);t.x=-this.y*s,t.y=this.x*s,t.z=0,e.x=-this.z*t.y,e.y=this.z*t.x,e.z=o*s}},Sr.prototype.rotate_hx2y1u$=function(t,e,i,n,r){return r.set_czzhiu$(this).rotate_7b5o5w$(t,e,i,n)},Sr.prototype.rotate_vqa64j$=function(t,e,i){return i.set_czzhiu$(this).rotate_7b5o5w$(t,e.x,e.y,e.z)},Sr.prototype.scale_749b8l$=function(t,e){return e.set_czzhiu$(this).scale_mx4ult$(t)},Sr.prototype.sqrDistance_czzhiu$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},Sr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},Sr.prototype.subtract_2gj7b4$=function(t,e){return e.set_czzhiu$(this).subtract_czzhiu$(t)},Sr.prototype.get_za3lpa$=function(t){return this.fields[t]},Sr.prototype.times_czzhiu$=function(t){return this.dot_czzhiu$(t)},Sr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Sr.prototype.toVec3d=function(){return new Ir(this.x,this.y,this.z)},Sr.prototype.toMutableVec3d=function(){return this.toMutableVec3d_5s4mqs$(Br())},Sr.prototype.toMutableVec3d_5s4mqs$=function(t){return t.set_yvo9jy$(this.x,this.y,this.z)},Sr.prototype.equals=function(t){return this===t||!!e.isType(t,Sr)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Sr.prototype.hashCode=function(){var t=st(this.x);return t=(31*(t=(31*t|0)+st(this.y)|0)|0)+st(this.z)|0},Cr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Nr=null;function Er(){return null===Nr&&new Cr,Nr}function Tr(t,e){return e=e||Object.create(Sr.prototype),Sr.call(e,t,t,t),e}function Pr(t,e){return e=e||Object.create(Sr.prototype),Sr.call(e,t.x,t.y,t.z),e}function Or(t,e,i){Sr.call(this,t,e,i)}function Mr(t){return t=t||Object.create(Or.prototype),Or.call(t,0,0,0),t}function jr(t,e){return e=e||Object.create(Or.prototype),Or.call(e,t,t,t),e}function Ar(t,e){return e=e||Object.create(Or.prototype),Or.call(e,t.x,t.y,t.z),e}function Ir(t,e,i){Dr(),this.fields=new Float64Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Rr(){Lr=this,this.ZERO=qr(0),this.X_AXIS=new Ir(1,0,0),this.Y_AXIS=new Ir(0,1,0),this.Z_AXIS=new Ir(0,0,1),this.NEG_X_AXIS=new Ir(-1,0,0),this.NEG_Y_AXIS=new Ir(0,-1,0),this.NEG_Z_AXIS=new Ir(0,0,-1)}Sr.$metadata$={kind:$,simpleName:"Vec3f",interfaces:[]},Object.defineProperty(Or.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(Or.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(Or.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(Or.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Or.prototype.add_czzhiu$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this},Or.prototype.mul_czzhiu$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this},Or.prototype.norm=function(){var t=this.length();return 0!==t?this.scale_mx4ult$(1/t):this.set_czzhiu$(Er().ZERO)},Or.prototype.rotate_7b5o5w$=function(t,e,i,n){var r=t*EE.DEG_2_RAD,o=A.cos(r),s=1-o,a=A.sin(r),l=this.x*(e*e*s+o)+this.y*(e*i*s-n*a)+this.z*(e*n*s+i*a),u=this.x*(i*e*s+n*a)+this.y*(i*i*s+o)+this.z*(i*n*s-e*a),p=this.x*(e*n*s-i*a)+this.y*(i*n*s+e*a)+this.z*(n*n*s+o);return this.x=l,this.y=u,this.z=p,this},Or.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},Or.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this},Or.prototype.set_y2kzbl$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Or.prototype.set_czzhiu$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Or.prototype.subtract_czzhiu$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this},Or.prototype.divAssign_mx4ult$=function(t){this.scale_mx4ult$(1/t)},Or.prototype.minusAssign_czzhiu$=function(t){this.subtract_czzhiu$(t)},Or.prototype.plusAssign_czzhiu$=function(t){this.add_czzhiu$(t)},Or.prototype.set_24o109$=function(t,e){this.fields[t]=e},Or.prototype.timesAssign_mx4ult$=function(t){this.scale_mx4ult$(t)},Or.$metadata$={kind:$,simpleName:"MutableVec3f",interfaces:[Sr]},Object.defineProperty(Ir.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Ir.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Ir.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Ir.prototype.add_vgki2o$=function(t,e){return e.set_czzhiw$(this).add_czzhiw$(t)},Ir.prototype.cross_vgki2o$=function(t,e){return e.x=this.y*t.z-this.z*t.y,e.y=this.z*t.x-this.x*t.z,e.z=this.x*t.y-this.y*t.x,e},Ir.prototype.distance_czzhiw$=function(t){var e=this.sqrDistance_czzhiw$(t);return A.sqrt(e)},Ir.prototype.dot_czzhiw$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Ir.prototype.isFuzzyEqual_6nz8ey$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}return o},Ir.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Ir.prototype.mix_3odno2$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i},Ir.prototype.mul_vgki2o$=function(t,e){return e.set_czzhiw$(this).mul_czzhiw$(t)},Ir.prototype.norm_5s4mqs$=function(t){return t.set_czzhiw$(this).norm()},Ir.prototype.planeSpace_7vsg4s$=function(t,e){var i=this.z;if(A.abs(i)>Dn){var n=this.y*this.y+this.z*this.z,r=1/A.sqrt(n);t.x=0,t.y=-this.z*r,t.z=this.y*r,e.x=n*r,e.y=-this.x*t.z,e.z=this.x*t.y}else{var o=this.x*this.x+this.y*this.y,s=1/A.sqrt(o);t.x=-this.y*s,t.y=this.x*s,t.z=0,e.x=-this.z*t.y,e.y=this.z*t.x,e.z=o*s}},Ir.prototype.rotate_8uuoh8$=function(t,e,i,n,r){return r.set_czzhiw$(this).rotate_6y0v78$(t,e,i,n)},Ir.prototype.rotate_cvw8z2$=function(t,e,i){return i.set_czzhiw$(this).rotate_6y0v78$(t,e.x,e.y,e.z)},Ir.prototype.scale_b0flbq$=function(t,e){return e.set_czzhiw$(this).scale_14dthe$(t)},Ir.prototype.sqrDistance_czzhiw$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},Ir.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},Ir.prototype.subtract_vgki2o$=function(t,e){return e.set_czzhiw$(this).subtract_czzhiw$(t)},Ir.prototype.get_za3lpa$=function(t){return this.fields[t]},Ir.prototype.times_czzhiw$=function(t){return this.dot_czzhiw$(t)},Ir.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ir.prototype.toVec3f=function(){return new Sr(this.x,this.y,this.z)},Ir.prototype.toMutableVec3f=function(){return this.toMutableVec3f_5s4mqq$(Mr())},Ir.prototype.toMutableVec3f_5s4mqq$=function(t){return t.set_y2kzbl$(this.x,this.y,this.z)},Ir.prototype.equals=function(t){return this===t||!!e.isType(t,Ir)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Ir.prototype.hashCode=function(){var t=st(this.x);return t=(31*(t=(31*t|0)+st(this.y)|0)|0)+st(this.z)|0},Rr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Lr=null;function Dr(){return null===Lr&&new Rr,Lr}function qr(t,e){return e=e||Object.create(Ir.prototype),Ir.call(e,t,t,t),e}function Fr(t,e,i){Ir.call(this,t,e,i)}function Br(t){return t=t||Object.create(Fr.prototype),Fr.call(t,0,0,0),t}function Ur(t,e,i){Hr(),this.fields=new Int32Array(3),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Vr(){Gr=this,this.ZERO=Wr(0),this.X_AXIS=new Ur(1,0,0),this.Y_AXIS=new Ur(0,1,0),this.Z_AXIS=new Ur(0,0,1),this.NEG_X_AXIS=new Ur(-1,0,0),this.NEG_Y_AXIS=new Ur(0,-1,0),this.NEG_Z_AXIS=new Ur(0,0,-1)}Ir.$metadata$={kind:$,simpleName:"Vec3d",interfaces:[]},Object.defineProperty(Fr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(Fr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),Object.defineProperty(Fr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_5wr77w$(2,t)}}),Fr.prototype.add_czzhiw$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this},Fr.prototype.mul_czzhiw$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this},Fr.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},Fr.prototype.rotate_6y0v78$=function(t,e,i,n){var r=t*EE.DEG_2_RAD,o=A.cos(r),s=1-o,a=A.sin(r),l=this.x*(e*e*s+o)+this.y*(e*i*s-n*a)+this.z*(e*n*s+i*a),u=this.x*(i*e*s+n*a)+this.y*(i*i*s+o)+this.z*(i*n*s-e*a),p=this.x*(e*n*s-i*a)+this.y*(i*n*s+e*a)+this.z*(n*n*s+o);return this.x=l,this.y=u,this.z=p,this},Fr.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},Fr.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this},Fr.prototype.set_yvo9jy$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Fr.prototype.set_czzhiw$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Fr.prototype.subtract_czzhiw$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this},Fr.prototype.divAssign_14dthe$=function(t){this.scale_14dthe$(1/t)},Fr.prototype.minusAssign_czzhiw$=function(t){this.subtract_czzhiw$(t)},Fr.prototype.plusAssign_czzhiw$=function(t){this.add_czzhiw$(t)},Fr.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},Fr.prototype.timesAssign_14dthe$=function(t){this.scale_14dthe$(t)},Fr.$metadata$={kind:$,simpleName:"MutableVec3d",interfaces:[Ir]},Object.defineProperty(Ur.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Ur.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Ur.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Ur.prototype.get_za3lpa$=function(t){return this.fields[t]},Ur.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ur.prototype.equals=function(t){return this===t||!!e.isType(t,co)&&this.x===t.x&&this.y===t.y&&this.z===t.z},Ur.prototype.hashCode=function(){var t=st(this.x);return t=(31*(t=(31*t|0)+st(this.y)|0)|0)+st(this.z)|0},Vr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gr=null;function Hr(){return null===Gr&&new Vr,Gr}function Wr(t,e){return e=e||Object.create(Ur.prototype),Ur.call(e,t,t,t),e}function Xr(t,e,i){Ur.call(this,t,e,i),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i}function Kr(t){return t=t||Object.create(Xr.prototype),Xr.call(t,0,0,0),t}function Yr(t,e,i,n){Qr(),this.fields=new Float32Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function Zr(){Jr=this,this.ZERO=to(0),this.X_AXIS=new Yr(1,0,0,0),this.Y_AXIS=new Yr(0,1,0,0),this.Z_AXIS=new Yr(0,0,1,0),this.W_AXIS=new Yr(0,0,0,1),this.NEG_X_AXIS=new Yr(-1,0,0,0),this.NEG_Y_AXIS=new Yr(0,-1,0,0),this.NEG_Z_AXIS=new Yr(0,0,-1,0),this.NEG_W_AXIS=new Yr(0,0,0,-1)}Ur.$metadata$={kind:$,simpleName:"Vec3i",interfaces:[]},Object.defineProperty(Xr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_vux9f0$(0,t)}}),Object.defineProperty(Xr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_vux9f0$(1,t)}}),Object.defineProperty(Xr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_vux9f0$(2,t)}}),Object.defineProperty(Xr.prototype,"array",{configurable:!0,get:function(){return this.fields}}),Xr.prototype.set_qt1dr2$=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Xr.prototype.set_czzhir$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Xr.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},Xr.$metadata$={kind:$,simpleName:"MutableVec3i",interfaces:[Ur]},Object.defineProperty(Yr.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Yr.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Yr.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(Yr.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),Yr.prototype.add_uzu8ww$=function(t,e){return e.set_czzhhz$(this).add_czzhhz$(t)},Yr.prototype.distance_czzhhz$=function(t){var e=this.sqrDistance_czzhhz$(t);return A.sqrt(e)},Yr.prototype.dot_czzhhz$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},Yr.prototype.isFuzzyEqual_m79ulu$=function(t,e){void 0===e&&(e=Rn);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}var a=o;if(a){var l=this.w-t.w;a=A.abs(l)<=e}return a},Yr.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},Yr.prototype.mix_q86erb$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i.w=t.w*e+this.w*(1-e),i},Yr.prototype.mul_uzu8ww$=function(t,e){return e.set_czzhhz$(this).mul_czzhhz$(t)},Yr.prototype.norm_5s4mpv$=function(t){return t.set_czzhhz$(this).norm()},Yr.prototype.quatProduct_uzu8ww$=function(t,e){return e.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,e.y=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e.z=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,e.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,e},Yr.prototype.scale_749b7q$=function(t,e){return e.set_czzhhz$(this).scale_mx4ult$(t)},Yr.prototype.sqrDistance_czzhhz$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,r=this.z-t.w;return e*e+i*i+n*n+r*r},Yr.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Yr.prototype.subtract_uzu8ww$=function(t,e){return e.set_czzhhz$(this).subtract_czzhhz$(t)},Yr.prototype.getXyz_5s4mqq$=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t},Yr.prototype.get_za3lpa$=function(t){return this.fields[t]},Yr.prototype.times_czzhhz$=function(t){return this.dot_czzhhz$(t)},Yr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Yr.prototype.toVec4d=function(){return new ro(this.x,this.y,this.z,this.w)},Yr.prototype.toMutableVec4d=function(){return this.toMutableVec4d_5s4mpx$(po())},Yr.prototype.toMutableVec4d_5s4mpx$=function(t){return t.set_6y0v78$(this.x,this.y,this.z,this.w)},Yr.prototype.equals=function(t){return this===t||!!e.isType(t,Yr)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},Yr.prototype.hashCode=function(){var t=st(this.x);return t=(31*(t=(31*(t=(31*t|0)+st(this.y)|0)|0)+st(this.z)|0)|0)+st(this.w)|0},Zr.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jr=null;function Qr(){return null===Jr&&new Zr,Jr}function to(t,e){return e=e||Object.create(Yr.prototype),Yr.call(e,t,t,t,t),e}function eo(t,e,i){return i=i||Object.create(Yr.prototype),Yr.call(i,t.x,t.y,t.z,e),i}function io(t,e,i,n){Yr.call(this,t,e,i,n)}function no(t){return t=t||Object.create(io.prototype),io.call(t,0,0,0,0),t}function ro(t,e,i,n){ao(),this.fields=new Float64Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function oo(){so=this,this.ZERO=lo(0),this.X_AXIS=new ro(1,0,0,0),this.Y_AXIS=new ro(0,1,0,0),this.Z_AXIS=new ro(0,0,1,0),this.W_AXIS=new ro(0,0,0,1),this.NEG_X_AXIS=new ro(-1,0,0,0),this.NEG_Y_AXIS=new ro(0,-1,0,0),this.NEG_Z_AXIS=new ro(0,0,-1,0),this.NEG_W_AXIS=new ro(0,0,0,-1)}Yr.$metadata$={kind:$,simpleName:"Vec4f",interfaces:[]},Object.defineProperty(io.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(io.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(io.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(io.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_24o109$(3,t)}}),Object.defineProperty(io.prototype,"array",{configurable:!0,get:function(){return this.fields}}),io.prototype.add_czzhhz$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this},io.prototype.mul_czzhhz$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this},io.prototype.norm=function(){return this.scale_mx4ult$(1/this.length())},io.prototype.quatProduct_czzhhz$=function(t){var e=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,n=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,r=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return this.set_7b5o5w$(e,i,n,r),this},io.prototype.scale_mx4ult$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this},io.prototype.set_7b5o5w$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},io.prototype.set_czzhhz$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},io.prototype.set_2qa7tb$=function(t,e){return void 0===e&&(e=0),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this},io.prototype.subtract_czzhhz$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this},io.prototype.plusAssign_czzhhz$=function(t){this.add_czzhhz$(t)},io.prototype.minusAssign_czzhhz$=function(t){this.subtract_czzhhz$(t)},io.prototype.set_24o109$=function(t,e){this.fields[t]=e},io.$metadata$={kind:$,simpleName:"MutableVec4f",interfaces:[Yr]},Object.defineProperty(ro.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(ro.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(ro.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(ro.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),ro.prototype.add_2x9ggw$=function(t,e){return e.set_czzhi1$(this).add_czzhi1$(t)},ro.prototype.distance_czzhi1$=function(t){var e=this.sqrDistance_czzhi1$(t);return A.sqrt(e)},ro.prototype.dot_czzhi1$=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},ro.prototype.isFuzzyEqual_1rza9z$=function(t,e){void 0===e&&(e=Ln);var i=this.x-t.x,n=A.abs(i)<=e;if(n){var r=this.y-t.y;n=A.abs(r)<=e}var o=n;if(o){var s=this.z-t.z;o=A.abs(s)<=e}var a=o;if(a){var l=this.w-t.w;a=A.abs(l)<=e}return a},ro.prototype.length=function(){var t=this.sqrLength();return A.sqrt(t)},ro.prototype.mix_3szysy$=function(t,e,i){return i.x=t.x*e+this.x*(1-e),i.y=t.y*e+this.y*(1-e),i.z=t.z*e+this.z*(1-e),i.w=t.w*e+this.w*(1-e),i},ro.prototype.mul_2x9ggw$=function(t,e){return e.set_czzhi1$(this).mul_czzhi1$(t)},ro.prototype.norm_5s4mpx$=function(t){return t.set_czzhi1$(this).norm()},ro.prototype.quatProduct_2x9ggw$=function(t,e){return e.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,e.y=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e.z=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,e.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,e},ro.prototype.scale_b0flav$=function(t,e){return e.set_czzhi1$(this).scale_14dthe$(t)},ro.prototype.sqrDistance_czzhi1$=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,r=this.z-t.w;return e*e+i*i+n*n+r*r},ro.prototype.sqrLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},ro.prototype.subtract_2x9ggw$=function(t,e){return e.set_czzhi1$(this).subtract_czzhi1$(t)},ro.prototype.getXyz_5s4mqs$=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t},ro.prototype.get_za3lpa$=function(t){return this.fields[t]},ro.prototype.times_czzhi1$=function(t){return this.dot_czzhi1$(t)},ro.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},ro.prototype.toVec4f=function(){return new Yr(this.x,this.y,this.z,this.w)},ro.prototype.toMutableVec4f=function(){return this.toMutableVec4f_5s4mpv$(no())},ro.prototype.toMutableVec4f_5s4mpv$=function(t){return t.set_7b5o5w$(this.x,this.y,this.z,this.w)},ro.prototype.equals=function(t){return this===t||!!e.isType(t,ro)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},ro.prototype.hashCode=function(){var t=st(this.x);return t=(31*(t=(31*(t=(31*t|0)+st(this.y)|0)|0)+st(this.z)|0)|0)+st(this.w)|0},oo.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var so=null;function ao(){return null===so&&new oo,so}function lo(t,e){return e=e||Object.create(ro.prototype),ro.call(e,t,t,t,t),e}function uo(t,e,i,n){ro.call(this,t,e,i,n)}function po(t){return t=t||Object.create(uo.prototype),uo.call(t,0,0,0,0),t}function co(t,e,i,n){So(),this.fields=new Int32Array(4),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function ho(){ko=this,this.ZERO=Co(0),this.X_AXIS=new co(1,0,0,0),this.Y_AXIS=new co(0,1,0,0),this.Z_AXIS=new co(0,0,1,0),this.W_AXIS=new co(0,0,0,1),this.NEG_X_AXIS=new co(-1,0,0,0),this.NEG_Y_AXIS=new co(0,-1,0,0),this.NEG_Z_AXIS=new co(0,0,-1,0),this.NEG_W_AXIS=new co(0,0,0,-1)}ro.$metadata$={kind:$,simpleName:"Vec4d",interfaces:[]},Object.defineProperty(uo.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_5wr77w$(0,t)}}),Object.defineProperty(uo.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_5wr77w$(1,t)}}),Object.defineProperty(uo.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_5wr77w$(2,t)}}),Object.defineProperty(uo.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_5wr77w$(3,t)}}),uo.prototype.add_czzhi1$=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this},uo.prototype.mul_czzhi1$=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this},uo.prototype.norm=function(){return this.scale_14dthe$(1/this.length())},uo.prototype.quatProduct_czzhi1$=function(t){var e=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,n=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,r=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return this.set_6y0v78$(e,i,n,r),this},uo.prototype.scale_14dthe$=function(t){return this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this},uo.prototype.set_6y0v78$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},uo.prototype.set_czzhi1$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},uo.prototype.set_6nz8ey$=function(t,e){return void 0===e&&(e=0),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this},uo.prototype.subtract_czzhi1$=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this},uo.prototype.plusAssign_czzhi1$=function(t){this.add_czzhi1$(t)},uo.prototype.minusAssign_czzhi1$=function(t){this.subtract_czzhi1$(t)},uo.prototype.set_5wr77w$=function(t,e){this.fields[t]=e},uo.$metadata$={kind:$,simpleName:"MutableVec4d",interfaces:[ro]},Object.defineProperty(co.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(co.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(co.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(co.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),co.prototype.get_za3lpa$=function(t){return this.fields[t]},co.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},co.prototype.equals=function(t){return this===t||!!e.isType(t,co)&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},co.prototype.hashCode=function(){var t=st(this.x);return t=(31*(t=(31*(t=(31*t|0)+st(this.y)|0)|0)+st(this.z)|0)|0)+st(this.w)|0},ho.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var fo,_o,mo,$o,yo,vo,go,bo,xo,wo,zo,ko=null;function So(){return null===ko&&new ho,ko}function Co(t,e){return e=e||Object.create(co.prototype),co.call(e,t,t,t,t),e}function No(t,e,i,n){co.call(this,t,e,i,n),this.fields[0]=t,this.fields[1]=e,this.fields[2]=i,this.fields[3]=n}function Eo(t){return t=t||Object.create(No.prototype),No.call(t,0,0,0,0),t}function To(t,e){return t.cross_2gj7b4$(e,Mr())}function Po(t,e){var i,n,r,o;void 0===e&&(e=new Io),vf.call(this,t),this.edgeHandler=e,this.verts_0=null,this.positionOffset_0=x(t.attributeByteOffsets.get_11rb$(ds().POSITIONS)),this.tmpVec1_0=Mr(),this.tmpVec2_0=Mr(),this.tmpVec3_0=Mr(),this.vertexIt1_0=t.get_za3lpa$(0),this.vertexIt2_0=t.get_za3lpa$(0);for(var s=t.numVertices,a=w(s),l=0;l<s;l++)a.add_11rb$(new jo(this,l));this.verts_0=a,i=t.numIndices;for(var u=0;u<i;u+=3){var p=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u)),c=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u+1|0)),h=this.verts_0.get_za3lpa$(t.indices.get_za3lpa$(u+2|0)),d=new Ao(this,p,c),f=new Ao(this,c,h);d.next=f;var _=f,m=new Ao(this,h,p);_.next=m,m.next=d;var $,y,v,g=m;null!=(n=c.getEdgeTo_n38rgs$(p))?(n.opp=d,$=n):$=null,d.opp=$,null!=(r=h.getEdgeTo_n38rgs$(c))?(r.opp=_,y=r):y=null,_.opp=y,null!=(o=p.getEdgeTo_n38rgs$(h))?(o.opp=g,v=o):v=null,g.opp=v,this.edgeHandler.plusAssign_ebe40$(d),this.edgeHandler.plusAssign_ebe40$(_),this.edgeHandler.plusAssign_ebe40$(g)}}function Oo(){}function Mo(t,i){return function(n){if(n.isDeleted){var r=i,o=DE.Log,s=$k.WARN,a=e.getKClassFromExpression(r).simpleName;s.level>=o.level.level&&o.printer(s,a,"Deleted edge in v, edge.from == v: "+(n.from===t))}return n.isDeleted}}function jo(t,e){this.$outer=t,Tr(0,this),this.index=e,this.edges=M(),this.isDeleted_st01j9$_0=!1,this.meshDataIndex_8be2vx$=this.index}function Ao(t,e,i){this.$outer=t,this.from_t0m3rm$_0=e,this.to_z50l7l$_0=i,this.isDeleted_tjy89$_0=!1,this.treeNode_u2e3i4$_0=null,this.next_t4scix$_0=this.next_t4scix$_0,this.opp_nuqb1l$_0=null,e.edges.add_11rb$(this)}function Io(){this.edgeList=M(),this.numEdges_wlm1ja$_0=0}function Ro(t){return t.isDeleted}function Lo(t){this.this$ListEdgeHandler=t,this.i=0}function Do(t){OcTreeEdgeHandler$Companion_getInstance(),this.edgeTree=new OcTree(OcTreeEdgeHandler$Companion$HalfEdgeAdapter_getInstance(),void 0,t)}function qo(){}function Fo(){}function Bo(){this.tmpQ=new bn,this.tmpNrm0=Mr(),this.tmpNrm1=Mr(),this.tmpPos0=Mr(),this.tmpPos1=Mr()}function Uo(){return new Bo}function Vo(t){var e;this.vertex=t,this.errQuadric=(new bn).setZero(),this.isStickyVertex=!1,this.isBorder_qaaj7p$_0=!1,this.isDeleted_clri7e$_0=!1,this.tmpVec4_0=no(),e=this.vertex.edges;for(var i=0;i!==e.size;++i){var n=this.vertex.edges.get_za3lpa$(i);if(this.addPlane_0(n.computeTriPlane_5s4mpv$(this.tmpVec4_0)),null==n.opp){var r=this.tmpVec4_0.getXyz_5s4mqq$(Mr()),o=Ar(this.vertex).subtract_czzhiu$(n.to).norm(),s=r.cross_2gj7b4$(o,Mr());this.tmpVec4_0.set_2qa7tb$(s,-s.dot_czzhiu$(this.vertex)),this.addPlane_0(this.tmpVec4_0),this.isBorder=!0}if(null==n.next.next.opp){null==n.opp&&n.computeTriPlane_5s4mpv$(this.tmpVec4_0);var a=this.tmpVec4_0.getXyz_5s4mqq$(Mr()),l=Ar(n.next.next.from).subtract_czzhiu$(this.vertex).norm(),u=a.cross_2gj7b4$(l,Mr());this.tmpVec4_0.set_2qa7tb$(u,-u.dot_czzhiu$(this.vertex)),this.addPlane_0(this.tmpVec4_0),this.isBorder=!0}}}function Go(t,e){void 0===e&&(e=Uo()),this.termCrit=t,this.collapseStrategy=e,this.quadrics_h71pfh$_0=z(),this.candidates_gym04f$_0=new Xo,this.mesh_c14x7o$_aesyuh$_0=this.mesh_c14x7o$_aesyuh$_0,this.excludedEdges=ht(),this.stickyVertices=ht(),this.keepBorders=!1}function Ho(t,e,i,n){this.$outer=t,this.edge=e,this.q1=i,this.q2=n,this.error=0,this.collapsePos=Mr(),this.edgeId=new Wo(this.edge.from.index,this.edge.to.index),this.updateCollapsePosAndError()}function Wo(t,e){this.fromId=t,this.toId=e}function Xo(){hC.call(this),this.candidateMap=z()}function Ko(){}function Yo(t){this.closure$factor=t,this.targetFaceCnt=2147483647}function Zo(t,e,i,n,r){T.call(this),this.byteSize=i,this.isInt=n,this.glslType=r,this.name$=t,this.ordinal$=e}function Jo(){Jo=function(){},fo=new Zo("FLOAT",0,4,!1,"float"),_o=new Zo("VEC_2F",1,8,!1,"vec2"),mo=new Zo("VEC_3F",2,12,!1,"vec3"),$o=new Zo("VEC_4F",3,16,!1,"vec4"),yo=new Zo("INT",4,4,!0,"int"),vo=new Zo("VEC_2I",5,8,!0,"ivec2"),go=new Zo("VEC_3I",6,12,!0,"ivec3"),bo=new Zo("VEC_4I",7,16,!0,"ivec4"),xo=new Zo("MAT_2F",8,16,!1,"mat2"),wo=new Zo("MAT_3F",9,36,!1,"mat3"),zo=new Zo("MAT_4F",10,64,!1,"mat4")}function Qo(){return Jo(),fo}function ts(){return Jo(),_o}function es(){return Jo(),mo}function is(){return Jo(),$o}function ns(){return Jo(),yo}function rs(){return Jo(),vo}function os(){return Jo(),go}function ss(){return Jo(),bo}function as(){return Jo(),xo}function ls(){return Jo(),wo}function us(){return Jo(),zo}function ps(t,e){ds(),this.name=t,this.type=e,this.props=new qC(this)}function cs(){hs=this,this.POSITIONS=new ps("attrib_positions",es()),this.NORMALS=new ps("attrib_normals",es()),this.TANGENTS=new ps("attrib_tangents",is()),this.TEXTURE_COORDS=new ps("attrib_texture_coords",ts()),this.COLORS=new ps("attrib_colors",is()),this.JOINTS=new ps("attrib_joints",ss()),this.WEIGHTS=new ps("attrib_weights",is())}co.$metadata$={kind:$,simpleName:"Vec4i",interfaces:[]},Object.defineProperty(No.prototype,"x",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_vux9f0$(0,t)}}),Object.defineProperty(No.prototype,"y",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_vux9f0$(1,t)}}),Object.defineProperty(No.prototype,"z",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_vux9f0$(2,t)}}),Object.defineProperty(No.prototype,"w",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_vux9f0$(3,t)}}),Object.defineProperty(No.prototype,"array",{configurable:!0,get:function(){return this.fields}}),No.prototype.set_tjonv8$=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},No.prototype.set_czzhhw$=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},No.prototype.set_vux9f0$=function(t,e){this.fields[t]=e},No.$metadata$={kind:$,simpleName:"MutableVec4i",interfaces:[co]},Object.defineProperty(Po.prototype,"vertices",{configurable:!0,get:function(){return this.verts_0}}),Object.defineProperty(Po.prototype,"vertCount",{configurable:!0,get:function(){return this.verts_0.size}}),Object.defineProperty(Po.prototype,"faceCount",{configurable:!0,get:function(){return this.edgeHandler.numEdges/3|0}}),Oo.prototype.distinctTriangleEdges=function(){var t,e=M();for(t=this.iterator();t.hasNext();){var i=t.next();i.id.compareTo_11rb$(i.next.id)<0&&i.id.compareTo_11rb$(i.next.next.id)<0&&e.add_11rb$(i)}return e},Oo.$metadata$={kind:Y,simpleName:"EdgeHandler",interfaces:[lt]},Po.prototype.generateWireframe_6olbr4$=function(t,e){void 0===e&&(e=Oy().MD_PINK);var i,n,r=Mr(),o=Mr(),s=this.edgeHandler,a=M();for(i=s.iterator();i.hasNext();){var l=i.next();(null==l.opp||l.from.index<l.to.index)&&a.add_11rb$(l)}for(n=a.iterator();n.hasNext();){var u=n.next();r.set_czzhiu$(u.from),o.set_czzhiu$(u.to),t.addLine_b8opkg$(r,e,o,e)}},Po.prototype.sanitize=function(){for(var t,i,n,r=this.verts_0.iterator(),o=0;r.hasNext();){var s=r.next();s.isDeleted?r.remove():s.index=(o=(t=o)+1|0,t)}var a=this.verts_0.size;if(this.edgeHandler.rebuild(),this.edgeHandler.numEdges%3!=0){var l=DE.Log,u=$k.WARN,p=e.getKClassFromExpression(this).simpleName;u.level>=l.level.level&&l.printer(u,p,"Uneven edge count: "+this.edgeHandler.numEdges%3)}var c,h,d=M();for(i=this.verts_0.iterator();i.hasNext();){var f=i.next();for(ut(f.edges,Mo(f,this)),n=f.edges.iterator();n.hasNext();){var _=n.next(),m=_.from.index,$=_.next.from.index,y=_.next.next.from.index;if(m>=a||$>=a||y>=a){var v=DE.Log,g=$k.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Inconsistent triangle indices: i0="+m+", i1="+$+", i2="+y+", mesh has only "+a+" vertices"),d.add_11rb$(_)}}}for(c=this.edgeHandler.iterator();c.hasNext();){var x=c.next();if(x.from.isDeleted||x.from.index>=a||x.to.isDeleted||x.to.index>=a){var w=DE.Log,z=$k.WARN,k=e.getKClassFromExpression(this).simpleName;z.level>=w.level.level&&w.printer(z,k,"Inconsistent edge: "+x.from.index+" (del="+x.from.isDeleted+") -> "+x.to.index+" (del="+x.to.isDeleted+"), mesh has only "+a+" vertices"),d.add_11rb$(x)}if(x===x.next||x===x.next.next){var S=DE.Log,C=$k.WARN,N=e.getKClassFromExpression(this).simpleName;C.level>=S.level.level&&S.printer(C,N,"Invalid edge linkage: he == he.next || he == he.next.next"),d.add_11rb$(x)}}for(h=d.iterator();h.hasNext();)h.next().deleteTriangle()},Po.prototype.rebuild_dqye30$=function(t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.sanitize();var n,r,o,a=this.geometry,l=a.isBatchUpdate;a.isBatchUpdate=!0,(n=this,r=t,o=i,function(t){var i,a,l=n.geometry.vertexSizeF,u=n.geometry.vertexSizeI,p=n.verts_0.size,c=zE(e.imul(p,l)),h=u>0?wE(e.imul(p,u)):n.geometry.dataI;i=n.verts_0;for(var d=0;d!==i.size;++d){var f=n.verts_0.get_za3lpa$(d).meshDataIndex_8be2vx$;n.verts_0.get_za3lpa$(d).meshDataIndex_8be2vx$=n.verts_0.get_za3lpa$(d).index;for(var _=0;_<l;_++)c.put_mx4ult$(n.geometry.dataF.get_za3lpa$(e.imul(f,l)+_|0));if(u>0)for(var m=0;m<u;m++)h.put_za3lpa$(n.geometry.dataI.get_za3lpa$(e.imul(f,u)+m|0))}for(n.geometry.clearIndices(),a=n.edgeHandler.distinctTriangleEdges().iterator();a.hasNext();){var $=a.next();n.geometry.addIndex_za3lpa$($.from.index),n.geometry.addIndex_za3lpa$($.next.from.index),n.geometry.addIndex_za3lpa$($.next.next.from.index)}if(n.geometry.numIndices!==(3*n.faceCount|0)){var y=DE.Log,v=$k.WARN,g=e.getKClassFromExpression(t).simpleName;if(v.level>=y.level.level){var b=y.printer,x=n;b.call(y,v,g,"Inconsistent triangle count! MeshData: "+(x.geometry.numIndices/3|0)+", HalfEdgeMesh: "+x.faceCount)}}return n.geometry.dataF=c,n.geometry.dataI=h,n.geometry.numVertices=p,r&&n.geometry.generateNormals(),o&&n.geometry.generateTangents_mx4ult$(),s})(a),a.hasChanged=!0,a.isBatchUpdate=l,a.rebuildBounds()},Po.prototype.selectBorders=function(){var t,e,i=M(),n=ht(),r=M();for(t=this.edgeHandler.iterator();t.hasNext();){var o=t.next();if(null==o.opp){for(var s=o;!n.contains_11rb$(s);){r.add_11rb$(s),n.add_11rb$(s);var a,l=s.to.edges;t:do{var u;for(u=l.iterator();u.hasNext();){var p=u.next();if(null==p.opp&&!n.contains_11rb$(p)){a=p;break t}}a=null}while(0);if(null==(e=a))break;s=e}r.isEmpty()||(i.add_11rb$(r),r=M())}}return i},Po.prototype.subSelect_ojfeji$=function(t,e){void 0===e&&(e=0);for(var i=M(),n=ht(),r=ht(),o=b([t]);!o.isEmpty()&&(0===e||(i.size/3|0)<e);){var s=o.removeAt_za3lpa$(0);if(!r.contains_11rb$(s.id)){var a=s.id;r.add_11rb$(a),i.add_11rb$(s);var l=s.next,u=l.id;r.add_11rb$(u),i.add_11rb$(l);var p=s.next.next,c=p.id;if(r.add_11rb$(c),i.add_11rb$(p),null!=s.opp&&!r.contains_11rb$(x(s.opp).id)&&!n.contains_11rb$(x(s.opp).id)){var h=x(s.opp);o.add_11rb$(h)}if(null!=s.next.opp&&!r.contains_11rb$(x(s.next.opp).id)&&!n.contains_11rb$(x(s.next.opp).id)){var d=x(s.next.opp);o.add_11rb$(d)}if(null!=s.next.next.opp&&!r.contains_11rb$(x(s.next.next.opp).id)&&!n.contains_11rb$(x(s.next.next.opp).id)){var f=x(s.next.next.opp);o.add_11rb$(f)}}}return new pt(o,i)},Po.prototype.splitEdge_b49or$=function(t,e){var i,n,r,o=this.geometry;o.checkBufferSizes_za3lpa$(),i=o.vertexSizeF;for(var s=1;s<=i;s++)o.dataF.plusAssign_mx4ult$(0);n=o.vertexSizeI;for(var a=1;a<=n;a++)o.dataI.plusAssign_za3lpa$(0);o.vertexIt.index=(r=o.numVertices,o.numVertices=r+1|0,r);var l=o.vertexIt;l.position.set_czzhiu$(t.to).subtract_czzhiu$(t.from).scale_mx4ult$(e).add_czzhiu$(t.from),t.from.getMeshVertex_fs4kvg$(this.vertexIt1_0),t.to.getMeshVertex_fs4kvg$(this.vertexIt2_0),l.texCoord.set_czzhjp$(this.vertexIt2_0.texCoord).subtract_czzhjp$(this.vertexIt1_0.texCoord).scale_mx4ult$(e).add_czzhjp$(this.vertexIt1_0.texCoord),l.normal.set_czzhiu$(this.vertexIt2_0.normal).subtract_czzhiu$(this.vertexIt1_0.normal).scale_mx4ult$(e).add_czzhiu$(this.vertexIt1_0.normal),o.bounds.add_czzhiu$(o.vertexIt.position),o.hasChanged=!0;var u=new jo(this,o.numVertices-1|0);this.verts_0.add_11rb$(u);var p=t.to;t.updateTo_n38rgs$(u);var c=t.next.from.edges,h=t.next;c.remove_11rb$(h),t.next.updateFrom_n38rgs$(u);var d=u.edges,f=t.next;d.add_11rb$(f);var _,m=new Ao(this,u,p),$=new Ao(this,p,t.next.to);m.next=$,$.opp=t.next.opp,null!=(_=$.opp)&&(_.opp=$);var y=$,v=new Ao(this,t.next.to,u);y.next=v,v.next=m,v.opp=t.next,t.next.opp=v;var g=v;this.edgeHandler.plusAssign_ebe40$(m),this.edgeHandler.plusAssign_ebe40$(y),this.edgeHandler.plusAssign_ebe40$(g);var b=t.opp;if(null!=b){var x=b.to;b.updateTo_n38rgs$(u);var w=b.next.from.edges,z=b.next;w.remove_11rb$(z),b.next.updateFrom_n38rgs$(u);var k=u.edges,S=b.next;k.add_11rb$(S);var C,N=new Ao(this,u,x),E=new Ao(this,x,b.next.to);N.next=E,E.opp=b.next.opp,null!=(C=E.opp)&&(C.opp=E);var T=E,P=new Ao(this,b.next.to,u);T.next=P,P.next=N,P.opp=b.next,b.next.opp=P;var O=P;N.opp=t,t.opp=N,m.opp=b,b.opp=m,this.edgeHandler.plusAssign_ebe40$(N),this.edgeHandler.plusAssign_ebe40$(T),this.edgeHandler.plusAssign_ebe40$(O)}return u},Po.prototype.collapseEdge_b49or$=function(t,e){var i,n=t.from,r=t.to,o=t.next.opp;null!=o&&(t.next.opp=null,o.opp=null,o.updateTo_n38rgs$(n));var s=t.next.next.opp;null!=s&&(t.next.next.opp=null,s.opp=o,null!=o&&(o.opp=s));var a=t.opp;if(null!=a){var l=a.next.opp;null!=l&&(a.next.opp=null,l.opp=null);var u=a.next.next.opp;null!=u&&(r.edges.remove_11rb$(u),n.edges.add_11rb$(u),u.updateFrom_n38rgs$(n),u.next.next.updateTo_n38rgs$(n),a.next.next.opp=null,u.opp=l,null!=l&&(l.opp=u))}t.deleteTriangle(),null!=a&&a.deleteTriangle(),i=r.edges;for(var p=0;p!==i.size;++p){var c=r.edges.get_za3lpa$(p);c.updateFrom_n38rgs$(n),c.next.next.updateTo_n38rgs$(n);var h=c.opp;null!=h&&(h.updateTo_n38rgs$(n),h.next.updateFrom_n38rgs$(n)),n.edges.add_11rb$(c)}if(r.edges.clear(),r.delete(),0!==e){var d=n.x+(r.x-n.x)*e,f=n.y+(r.y-n.y)*e,_=n.z+(r.z-n.z)*e;n.updatePosition_y2kzbl$(d,f,_)}},Po.prototype.subMeshOf_u28ozl$=function(t){var e,i=new Dz(this.geometry.vertexAttributes),n=z(),r=this.geometry.vertexIt;for(e=t.iterator();e.hasNext();){var o=e.next();if(!n.keys.contains_11rb$(o.from.index)){var s,a,l,u=o.from.index;i.checkBufferSizes_za3lpa$(),s=i.vertexSizeF;for(var p=1;p<=s;p++)i.dataF.plusAssign_mx4ult$(0);a=i.vertexSizeI;for(var c=1;c<=a;c++)i.dataI.plusAssign_za3lpa$(0);i.vertexIt.index=(l=i.numVertices,i.numVertices=l+1|0,l);var h=i.vertexIt;r.index=o.from.index,h.set_fs4kvg$(r),i.bounds.add_czzhiu$(i.vertexIt.position),i.hasChanged=!0;var d=i.numVertices-1|0;n.put_xwzc9p$(u,d)}if(!n.keys.contains_11rb$(o.to.index)){var f,_,m,$=o.to.index;i.checkBufferSizes_za3lpa$(),f=i.vertexSizeF;for(var y=1;y<=f;y++)i.dataF.plusAssign_mx4ult$(0);_=i.vertexSizeI;for(var v=1;v<=_;v++)i.dataI.plusAssign_za3lpa$(0);i.vertexIt.index=(m=i.numVertices,i.numVertices=m+1|0,m);var g=i.vertexIt;r.index=o.to.index,g.set_fs4kvg$(r),i.bounds.add_czzhiu$(i.vertexIt.position),i.hasChanged=!0;var b=i.numVertices-1|0;n.put_xwzc9p$($,b)}}var w,k=ht();for(w=t.iterator();w.hasNext();){var S=w.next();if(!k.contains_11rb$(S.id)){i.addTriIndices_qt1dr2$(x(n.get_11rb$(S.from.index)),x(n.get_11rb$(S.next.from.index)),x(n.get_11rb$(S.next.next.from.index)));var C=S.id;k.add_11rb$(C);var N=S.next.id;k.add_11rb$(N);var E=S.next.next.id;k.add_11rb$(E)}}return i},Object.defineProperty(jo.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_st01j9$_0},set:function(t){this.isDeleted_st01j9$_0=t}}),Object.defineProperty(jo.prototype,"x",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0|0)}}),Object.defineProperty(jo.prototype,"y",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+1|0)}}),Object.defineProperty(jo.prototype,"z",{configurable:!0,get:function(){return this.$outer.geometry.dataF.get_za3lpa$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+2|0)}}),jo.prototype.setPosition_eyxpjg$=function(t,i,n){this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0|0,t),this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+1|0,i),this.$outer.geometry.dataF.set_24o109$(e.imul(this.index,this.$outer.geometry.vertexSizeF)+this.$outer.positionOffset_0+2|0,n)},jo.prototype.getMeshVertex_fs4kvg$=function(t){return t.index=this.index,t},jo.prototype.getEdgeTo_n38rgs$=function(t){var e;e=this.edges;for(var i=0;i!==e.size;++i)if(this.edges.get_za3lpa$(i).to===t)return this.edges.get_za3lpa$(i);return null},jo.prototype.delete=function(){for(;!this.edges.isEmpty();)F(this.edges).deleteTriangle();this.isDeleted=!0},jo.prototype.updatePosition_czzhiu$=function(t){this.updatePosition_y2kzbl$(t.x,t.y,t.z)},jo.prototype.updatePosition_y2kzbl$=function(t,e,i){this.$outer.edgeHandler.checkedUpdateVertexPosition_efzdnr$(this,t,e,i)},jo.$metadata$={kind:$,simpleName:"HalfEdgeVertex",interfaces:[Sr]},Object.defineProperty(Ao.prototype,"from",{configurable:!0,get:function(){return this.from_t0m3rm$_0},set:function(t){this.from_t0m3rm$_0=t}}),Object.defineProperty(Ao.prototype,"to",{configurable:!0,get:function(){return this.to_z50l7l$_0},set:function(t){this.to_z50l7l$_0=t}}),Object.defineProperty(Ao.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_tjy89$_0},set:function(t){this.isDeleted_tjy89$_0=t}}),Object.defineProperty(Ao.prototype,"treeNode",{configurable:!0,get:function(){return this.treeNode_u2e3i4$_0},set:function(t){this.treeNode_u2e3i4$_0=t}}),Object.defineProperty(Ao.prototype,"id",{configurable:!0,get:function(){return e.Long.fromInt(this.from.index).shiftLeft(32).or(e.Long.fromInt(this.to.index))}}),Object.defineProperty(Ao.prototype,"triId",{configurable:!0,get:function(){var t=this.id,e=this.next.id,i=this.next.next.id,n=e.compareTo_11rb$(i)<=0?e:i;return t.compareTo_11rb$(n)<=0?t:n}}),Object.defineProperty(Ao.prototype,"next",{configurable:!0,get:function(){return null==this.next_t4scix$_0?ct("next"):this.next_t4scix$_0},set:function(t){this.next_t4scix$_0=t}}),Object.defineProperty(Ao.prototype,"opp",{configurable:!0,get:function(){return this.opp_nuqb1l$_0},set:function(t){this.opp_nuqb1l$_0=t}}),Ao.prototype.computeLength=function(){return this.from.distance_czzhiu$(this.to)},Ao.prototype.computeTriArea=function(){return Vn(this.from,this.to,this.next.to)},Ao.prototype.computeTriAspectRatio=function(){return Gn(this.from,this.to,this.next.to)},Ao.prototype.computeTriNormal_5s4mqq$=function(t){return this.to.subtract_2gj7b4$(this.from,this.$outer.tmpVec1_0),this.next.to.subtract_2gj7b4$(this.from,this.$outer.tmpVec2_0),this.$outer.tmpVec1_0.cross_2gj7b4$(this.$outer.tmpVec2_0,t),t.norm()},Ao.prototype.computeTriPlane_5s4mpv$=function(t){return this.computeTriNormal_5s4mqq$(this.$outer.tmpVec3_0),t.set_2qa7tb$(this.$outer.tmpVec3_0,-this.$outer.tmpVec3_0.dot_czzhiu$(this.from)),t},Ao.prototype.collapse_mx4ult$=function(t){this.$outer.collapseEdge_b49or$(this,t)},Ao.prototype.split_mx4ult$=function(t){return this.$outer.splitEdge_b49or$(this,t)},Ao.prototype.deleteEdge_0=function(){var t;this.$outer.edgeHandler.minusAssign_ebe40$(this),this.isDeleted=!0,this.from.edges.remove_11rb$(this),null!=(t=this.opp)&&(t.opp=null),this.treeNode=null,this.opp=null},Ao.prototype.deleteTriangle=function(){this.deleteEdge_0(),this.next.deleteEdge_0(),this.next.next.deleteEdge_0()},Ao.prototype.updateFrom_n38rgs$=function(t){this.$outer.edgeHandler.checkedUpdateEdgeFrom_870n7c$(this,t)},Ao.prototype.updateTo_n38rgs$=function(t){this.$outer.edgeHandler.checkedUpdateEdgeTo_870n7c$(this,t)},Ao.prototype.toString=function(){return this.from.index.toString()+" -> "+this.to.index},Ao.$metadata$={kind:$,simpleName:"HalfEdge",interfaces:[]},Po.$metadata$={kind:$,simpleName:"HalfEdgeMesh",interfaces:[vf]},Object.defineProperty(Io.prototype,"numEdges",{configurable:!0,get:function(){return this.numEdges_wlm1ja$_0},set:function(t){this.numEdges_wlm1ja$_0=t}}),Io.prototype.plusAssign_ebe40$=function(t){if(t.isDeleted){var i=DE.Log,n=$k.WARN,r=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,r,"edge was deleted before"),t.isDeleted=!1,this.rebuild()}this.edgeList.add_11rb$(t),this.numEdges=this.numEdges+1|0},Io.prototype.minusAssign_ebe40$=function(t){if(t.isDeleted){var i=DE.Log,n=$k.WARN,r=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,r,"edge is already deleted"),this.rebuild()}else this.numEdges=this.numEdges-1|0},Io.prototype.checkedUpdateEdgeTo_870n7c$=function(t,e){t.to=e},Io.prototype.checkedUpdateEdgeFrom_870n7c$=function(t,e){t.from=e},Io.prototype.checkedUpdateVertexPosition_efzdnr$=function(t,e,i,n){t.setPosition_eyxpjg$(e,i,n)},Io.prototype.rebuild=function(){if(ut(this.edgeList,Ro),this.numEdges!==this.edgeList.size){var t=DE.Log,i=$k.WARN,n=e.getKClassFromExpression(this).simpleName;i.level>=t.level.level&&t.printer(i,n,"Wrong edge count: "+this.numEdges+" != "+this.edgeList.size),this.numEdges=this.edgeList.size}},Lo.prototype.hasNext=function(){for(;this.i<this.this$ListEdgeHandler.edgeList.size&&this.this$ListEdgeHandler.edgeList.get_za3lpa$(this.i).isDeleted;)this.i=this.i+1|0;return this.i<this.this$ListEdgeHandler.edgeList.size},Lo.prototype.next=function(){var t;if(!this.hasNext())throw dt();return this.this$ListEdgeHandler.edgeList.get_za3lpa$((t=this.i,this.i=t+1|0,t))},Lo.$metadata$={kind:$,interfaces:[ft]},Io.prototype.iterator=function(){return new Lo(this)},Io.$metadata$={kind:$,simpleName:"ListEdgeHandler",interfaces:[Oo]},Fo.$metadata$={kind:Y,simpleName:"CollapseStrategy",interfaces:[]},Bo.prototype.computeCollapsePosition_2pqe3s$=function(t,e,i){var n,r,o,s,a=0;n=t.vertex.edges;for(var l=0;l!==n.size;++l){var u=t.vertex.edges.get_za3lpa$(l);u.to!==e.vertex&&u.next.to!==e.vertex||(a=a+1|0)}if(a>2||a<(t.isBorder&&e.isBorder?1:2))return vt.MAX_VALUE;if(t.isStickyVertex&&e.isStickyVertex)return vt.MAX_VALUE;if(t.isStickyVertex)return i.set_czzhiu$(t.vertex),t.getError_czzhiu$(i)+e.getError_czzhiu$(i);if(e.isStickyVertex)return i.set_czzhiu$(e.vertex),t.getError_czzhiu$(i)+e.getError_czzhiu$(i);if(null!=(r=t.vertex.getEdgeTo_n38rgs$(e.vertex))&&null==r.next.opp&&null==r.next.next.opp)return vt.MAX_VALUE;if(null!=(o=e.vertex.getEdgeTo_n38rgs$(t.vertex))&&null==o.next.opp&&null==o.next.next.opp)return vt.MAX_VALUE;this.tmpQ.set_d4zu6l$(t.errQuadric),this.tmpQ.add_d4zu6l$(e.errQuadric),this.tmpQ.setRow_ky00rh$(3,ao().W_AXIS),this.tmpQ.invert_14dthe$(Ln)?(i.set_y2kzbl$(this.tmpQ.get_vux9f0$(0,3),this.tmpQ.get_vux9f0$(1,3),this.tmpQ.get_vux9f0$(2,3)),s=t.getError_czzhiu$(i)+e.getError_czzhiu$(i)):(e.vertex.subtract_2gj7b4$(t.vertex,i).scale_mx4ult$(.5).add_czzhiu$(t.vertex),s=t.vertex.distance_czzhiu$(e.vertex)/1e100);var p=s;return this.isRejected_0(t.vertex,e.vertex,i)||this.isRejected_0(e.vertex,t.vertex,i)?vt.MAX_VALUE:p},Bo.prototype.isRejected_0=function(t,e,i){var n,r;for(n=t.edges.iterator();n.hasNext();){var o=n.next();if(null==(r=o.to)||!r.equals(e)){if(o.computeTriNormal_5s4mqq$(this.tmpNrm0),this.newNormal_0(o,i,this.tmpNrm1),this.tmpNrm0.dot_czzhiu$(this.tmpNrm1)<0)return!0;if(Gn(i,o.to,o.next.to)>1e4)return!0}}return!1},Bo.prototype.newNormal_0=function(t,e,i){t.to.subtract_2gj7b4$(e,this.tmpPos0),t.next.to.subtract_2gj7b4$(e,this.tmpPos1),this.tmpPos0.cross_2gj7b4$(this.tmpPos1,i),i.norm()},Bo.$metadata$={kind:$,interfaces:[Fo]},Object.defineProperty(Vo.prototype,"isBorder",{configurable:!0,get:function(){return this.isBorder_qaaj7p$_0},set:function(t){this.isBorder_qaaj7p$_0=t}}),Object.defineProperty(Vo.prototype,"isDeleted",{configurable:!0,get:function(){return this.isDeleted_clri7e$_0},set:function(t){this.isDeleted_clri7e$_0=t}}),Vo.prototype.consume_zdf47l$=function(t){this.isBorder=this.isBorder||t.isBorder,this.errQuadric.add_d4zu6l$(t.errQuadric),t.isDeleted=!0},Vo.prototype.getError_czzhiu$=function(t){return this.errQuadric.transform_5s4mpv$(this.tmpVec4_0.set_2qa7tb$(t,1)),this.tmpVec4_0.x*t.x+this.tmpVec4_0.y*t.y+this.tmpVec4_0.z*t.z+this.tmpVec4_0.w},Vo.prototype.addPlane_0=function(t){this.errQuadric.set_224j3y$(0,0,this.errQuadric.get_vux9f0$(0,0)+t.x*t.x),this.errQuadric.set_224j3y$(1,0,this.errQuadric.get_vux9f0$(1,0)+t.x*t.y),this.errQuadric.set_224j3y$(2,0,this.errQuadric.get_vux9f0$(2,0)+t.x*t.z),this.errQuadric.set_224j3y$(3,0,this.errQuadric.get_vux9f0$(3,0)+t.x*t.w),this.errQuadric.set_224j3y$(0,1,this.errQuadric.get_vux9f0$(0,1)+t.y*t.x),this.errQuadric.set_224j3y$(1,1,this.errQuadric.get_vux9f0$(1,1)+t.y*t.y),this.errQuadric.set_224j3y$(2,1,this.errQuadric.get_vux9f0$(2,1)+t.y*t.z),this.errQuadric.set_224j3y$(3,1,this.errQuadric.get_vux9f0$(3,1)+t.y*t.w),this.errQuadric.set_224j3y$(0,2,this.errQuadric.get_vux9f0$(0,2)+t.z*t.x),this.errQuadric.set_224j3y$(1,2,this.errQuadric.get_vux9f0$(1,2)+t.z*t.y),this.errQuadric.set_224j3y$(2,2,this.errQuadric.get_vux9f0$(2,2)+t.z*t.z),this.errQuadric.set_224j3y$(3,2,this.errQuadric.get_vux9f0$(3,2)+t.z*t.w),this.errQuadric.set_224j3y$(0,3,this.errQuadric.get_vux9f0$(0,3)+t.w*t.x),this.errQuadric.set_224j3y$(1,3,this.errQuadric.get_vux9f0$(1,3)+t.w*t.y),this.errQuadric.set_224j3y$(2,3,this.errQuadric.get_vux9f0$(2,3)+t.w*t.z),this.errQuadric.set_224j3y$(3,3,this.errQuadric.get_vux9f0$(3,3)+t.w*t.w)},Vo.$metadata$={kind:$,simpleName:"ErrorQuadric",interfaces:[]},Object.defineProperty(Go.prototype,"mesh_c14x7o$_0",{configurable:!0,get:function(){return null==this.mesh_c14x7o$_aesyuh$_0?ct("mesh"):this.mesh_c14x7o$_aesyuh$_0},set:function(t){this.mesh_c14x7o$_aesyuh$_0=t}}),Go.prototype.simplifyMesh_mnbsaa$=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.mesh_c14x7o$_0=t;var r=DE.Log,o=$k.DEBUG,s=e.getKClassFromExpression(this).simpleName;o.level>=r.level.level&&r.printer(o,s,"Simplifying mesh: "+t.faceCount+" faces / "+t.vertCount+" vertices...");var a=new Yk;this.quadrics_h71pfh$_0.clear(),this.candidates_gym04f$_0.clear(),this.termCrit.init_nbf0q6$(t);var l=t.faceCount/2|0;this.rebuildCollapseQueue_sifma0$_0();for(var u={v:0};this.candidates_gym04f$_0.isNotEmpty()&&this.candidates_gym04f$_0.peek().error<vt.MAX_VALUE&&!this.termCrit.isFinished_6w1xds$(t,u.v);){t.faceCount<l&&(this.reshapeTriangles_ps2mgc$_0(),l=t.faceCount/2|0);var p=this.candidates_gym04f$_0.poll();if(p.edge.isDeleted||p.q1.isDeleted||p.q2.isDeleted){var c=DE.Log,h=$k.WARN,d=e.getKClassFromExpression(this).simpleName;h.level>=c.level.level&&c.printer(h,d,"Invalid edge: already deleted!")}else if(p.edgeId.fromId===p.edge.from.index&&p.edgeId.toId===p.edge.to.index){var f=p.error;if(p.updateCollapsePosAndError(),f===p.error){if(!(p.error<vt.MAX_VALUE)){var _=DE.Log,m=$k.DEBUG,$=e.getKClassFromExpression(this).simpleName;m.level>=_.level.level&&_.printer(m,$,"No more collapsable edges");break}u.v=p.collapse()}else this.candidates_gym04f$_0.plusAssign_g91td9$(p)}else{var y=DE.Log,v=$k.ERROR,g=e.getKClassFromExpression(this).simpleName;v.level>=y.level.level&&y.printer(v,g,"Invalid edge: inconsistent vertex indices"),this.rebuildCollapseQueue_sifma0$_0()}}t.rebuild_dqye30$(i,n);var b=DE.Log,x=$k.DEBUG,w=e.getKClassFromExpression(this).simpleName;x.level>=b.level.level&&b.printer(x,w,"Mesh simplification done! "+t.faceCount+" faces / "+t.vertCount+" vertices remain, last error: "+u.v+", took "+PC(a.takeSecs(),3)+" s")},Go.prototype.reshapeTriangles_ps2mgc$_0=function(){var t,e=Mr(),i=Mr();for(t=this.mesh_c14x7o$_0.edgeHandler.distinctTriangleEdges().iterator();t.hasNext();){var n=t.next();if(n.computeTriAspectRatio()>50){var r=n.computeLength(),o=n.next.computeLength(),s=n.next.next.computeLength(),a=r>o&&r>s?n:o>r&&o>s?n.next:n.next.next;e.set_czzhiu$(n.to).subtract_czzhiu$(n.from).norm(),i.set_czzhiu$(n.next.from).subtract_czzhiu$(n.next.to);var l=1-e.dot_czzhiu$(i)/a.computeLength();l>.1&&l<.9&&a.split_mx4ult$(l)}}this.rebuildCollapseQueue_sifma0$_0()},Go.prototype.rebuildCollapseQueue_sifma0$_0=function(){var t;for(this.candidates_gym04f$_0.clear(),t=this.mesh_c14x7o$_0.edgeHandler.iterator();t.hasNext();){var e=t.next();this.insertEdge_56qw8l$_0(e)}},Go.prototype.insertEdge_56qw8l$_0=function(t){if(!this.excludedEdges.contains_11rb$(t)&&(t.from.index<t.to.index||null==t.opp)){var e,i=this.quadrics_h71pfh$_0,n=t.from.index,r=i.get_11rb$(n);if(null==r){var o=new Vo(t.from);o.isStickyVertex=this.stickyVertices.contains_11rb$(t.from);var s=o;i.put_xwzc9p$(n,s),e=s}else e=r;var a,l=e,u=this.quadrics_h71pfh$_0,p=t.to.index,c=u.get_11rb$(p);if(null==c){var h=new Vo(t.to);h.isStickyVertex=this.stickyVertices.contains_11rb$(t.to);var d=h;u.put_xwzc9p$(p,d),a=d}else a=c;var f=a;l.isStickyVertex&&f.isStickyVertex||this.keepBorders&&(l.isBorder||f.isBorder)||this.candidates_gym04f$_0.plusAssign_g91td9$(new Ho(this,t,l,f))}},Ho.prototype.updateCollapsePosAndError=function(){this.error=this.$outer.collapseStrategy.computeCollapsePosition_2pqe3s$(this.q1,this.q2,this.collapsePos)},Ho.prototype.collapse=function(){if(this.$outer.quadrics_h71pfh$_0.remove_11rb$(this.q2.vertex.index)!==this.q2)throw bt("Quadric removal failed!");var t,e,i=ht();for(this.collectAffectedEdges_0(this.q1.vertex,i),this.collectAffectedEdges_0(this.q2.vertex,i),this.$outer,t=i.iterator();t.hasNext();){var n=t.next();this.$outer.candidates_gym04f$_0.removeByVertexIndices_vux9f0$(n.from.index,n.to.index)}for(this.q1.consume_zdf47l$(this.q2),this.edge.collapse_mx4ult$(0),this.q1.vertex.updatePosition_czzhiu$(this.collapsePos),i.clear(),this.collectAffectedEdges_0(this.q1.vertex,i),this.$outer,e=i.iterator();e.hasNext();){var r=e.next();this.$outer.insertEdge_56qw8l$_0(r)}return this.error},Ho.prototype.collectAffectedEdges_0=function(t,e){var i;for(i=t.edges.iterator();i.hasNext();){var n=i.next();e.add_11rb$(n);var r=n.next.next;e.add_11rb$(r)}},Ho.$metadata$={kind:$,simpleName:"CollapseCandidate",interfaces:[]},Wo.$metadata$={kind:$,simpleName:"EdgeId",interfaces:[]},Wo.prototype.component1=function(){return this.fromId},Wo.prototype.component2=function(){return this.toId},Wo.prototype.copy_vux9f0$=function(t,e){return new Wo(void 0===t?this.fromId:t,void 0===e?this.toId:e)},Wo.prototype.toString=function(){return"EdgeId(fromId="+e.toString(this.fromId)+", toId="+e.toString(this.toId)+")"},Wo.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.fromId)|0)+e.hashCode(this.toId)|0},Wo.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.fromId,t.fromId)&&e.equals(this.toId,t.toId)},Xo.prototype.isNotEmpty=function(){return!this.isEmpty()},Xo.prototype.peek=function(){return q(this.firstValue())},Xo.prototype.poll=function(){var t=this.firstValue(),e=t.removeAt_za3lpa$(xt(t));t.isEmpty()&&this.remove_11rb$(this.firstKey());var i=this.candidateMap,n=e.edgeId;return i.remove_11rb$(n),e},Xo.prototype.clear=function(){hC.prototype.clear.call(this),this.candidateMap.clear()},Xo.prototype.removeByVertexIndices_vux9f0$=function(t,e){var i=this.candidateMap.remove_11rb$(new Wo(t,e));return null!=i&&this.minusAssign_g91td9$(i),i},Xo.prototype.plusAssign_g91td9$=function(t){var e,i=t.error,n=this.get_11rb$(i);if(null==n){var r=M();this.put_xwzc9p$(i,r),e=r}else e=n;e.add_11rb$(t);var o=this.candidateMap,s=t.edgeId;o.put_xwzc9p$(s,t)},Xo.prototype.minusAssign_g91td9$=function(t){var e=this.get_11rb$(t.error);null!=e&&(e.remove_11rb$(t),e.isEmpty()&&this.remove_11rb$(t.error));var i=this.candidateMap,n=t.edgeId;i.remove_11rb$(n)},Xo.$metadata$={kind:$,simpleName:"CollapseCandidates",interfaces:[hC]},Go.$metadata$={kind:$,simpleName:"MeshSimplifier",interfaces:[]},Ko.prototype.init_nbf0q6$=function(t){},Ko.$metadata$={kind:Y,simpleName:"TermCriterion",interfaces:[]},Yo.prototype.init_nbf0q6$=function(t){this.targetFaceCnt=B(at(t.faceCount*this.closure$factor))},Yo.prototype.isFinished_6w1xds$=function(t,e){return t.faceCount<=this.targetFaceCnt},Yo.$metadata$={kind:$,interfaces:[Ko]},Zo.$metadata$={kind:$,simpleName:"GlslType",interfaces:[T]},Zo.values=function(){return[Qo(),ts(),es(),is(),ns(),rs(),os(),ss(),as(),ls(),us()]},Zo.valueOf_61zpoe$=function(t){switch(t){case"FLOAT":return Qo();case"VEC_2F":return ts();case"VEC_3F":return es();case"VEC_4F":return is();case"INT":return ns();case"VEC_2I":return rs();case"VEC_3I":return os();case"VEC_4I":return ss();case"MAT_2F":return as();case"MAT_3F":return ls();case"MAT_4F":return us();default:P("No enum constant de.fabmax.kool.pipeline.GlslType."+t)}},ps.prototype.toString=function(){return this.name},cs.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hs=null;function ds(){return null===hs&&new cs,hs}function fs(t,e){var i;$s(),$a.call(this,t,e),this.shadowPipelines_j0os6i$_0=z(),this.cullMethod=null,this.onAfterCollectDrawCommands.add_11rb$((i=this,function(t){var e;for(e=i.drawQueue.commands.iterator();e.hasNext();){var n=e.next();n.pipeline=i.getShadowPipeline_sbx4mf$(n.mesh,t)}return s}))}function _s(){ms=this}ps.$metadata$={kind:$,simpleName:"Attribute",interfaces:[]},ps.prototype.component1=function(){return this.name},ps.prototype.component2=function(){return this.type},ps.prototype.copy_xzl57b$=function(t,e){return new ps(void 0===t?this.name:t,void 0===e?this.type:e)},ps.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.type)|0},ps.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.type,t.type)},fs.prototype.getShadowPipeline_sbx4mf$=function(t,e){var i,n,r,o,s=null!=(r=null!=(n=this.cullMethod)?n:null!=(i=t.getPipeline_aemszp$(e))?i.cullMethod:null)?r:Tl(),a=this.shadowPipelines_j0os6i$_0,l=t.id,u=a.get_11rb$(l);if(null==u){var p=this.createPipeline_wgobnr$(t,s,e);a.put_xwzc9p$(l,p),o=p}else o=u;return o},fs.prototype.createPipeline_wgobnr$=function(t,e,i){var n,r=new tp("DepthShader"),o=new ip(r),a=o.premultipliedMvpNode().outMvpMat;if(null!=t.instances&&(a=o.multiplyNode_ze33is$(a,o.instanceAttrModelMat().output).output),null!=t.skin){var l=o.skinTransformNode_78eraa$(o.attrJoints().output,o.attrWeights().output);a=o.multiplyNode_ze33is$(a,l.outJointMat).output}var p={v:o.attrPositions().output};if(null!=(n=t.morphWeights)){var c=t.geometry.getMorphAttributes();if(!c.isEmpty()){var h,d,f=o.morphWeightsNode_za3lpa$(n.length),_=M();for(h=c.iterator();h.hasNext();){var m=h.next();u(m.name,ds().POSITIONS.name)&&_.add_11rb$(m)}for(d=_.iterator();d.hasNext();){var $=d.next(),y=o.getMorphWeightNode_dcktnw$(c.indexOf_11rb$($),f),v=o.multiplyNode_ze33is$(o.attributeNode_nm2vx5$($).output,y.outWeight);p.v=o.addNode_ze33is$(p.v,v.output).output}}}o.positionOutput=o.vec4TransformNode_9krp9t$(p.v,a).outVec4;var g=new np(r);g.colorOutput_a3v4si$(g.constVec4f_czzhhz$(Oy().RED));var b,x=new zc(r);return x.onPipelineSetup.add_11rb$((b=e,function(t,e,i){return t.blendMode=hl(),t.cullMethod=b,s})),x.createPipeline_sbx4mf$(t,i)},fs.prototype.dispose_aemszp$=function(t){var e;for($a.prototype.dispose_aemszp$.call(this,t),e=zt(this.shadowPipelines_j0os6i$_0.values).iterator();e.hasNext();){var i=e.next();t.disposePipeline_i7l2g2$(i)}},_s.prototype.defaultSetup_vux9f0$=function(t,e){var i=new pa;return i.name="DepthMapPass",i.setSize_vux9f0$(t,e),i.clearColorTexture(),i.setDepthTexture_6taknv$(!1),new ua(i)},_s.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ms=null;function $s(){return null===ms&&new _s,ms}function ys(t,e){var i;As(),fs.call(this,t,e),this.name="NormalLinearDepthMapPass",this.onAfterCollectDrawCommands.add_11rb$((i=this,function(t){return i.clearColor=new Ey(0,1,0,1),s}))}function vs(t,e){rp.call(this,"normalLinearDepth",e),this.inNormals=t,this.outColor=new op(new zu("normaLinearDepth"),this)}function gs(){js=this}fs.$metadata$={kind:$,simpleName:"DepthMapPass",interfaces:[$a]},ys.prototype.createPipeline_wgobnr$=function(t,e,i){if(!t.geometry.hasAttribute_nm2vx5$(ds().NORMALS))return null;var n,r=new tp("NormalLinearDepth Shader"),o={v:null},a=new ip(r),l=a.mvpNode(),p=a.multiplyNode_ze33is$(l.outViewMat,l.outModelMat).output,c=l.outMvpMat;if(null!=t.instances&&(c=a.multiplyNode_ze33is$(c,a.instanceAttrModelMat().output).output,p=a.multiplyNode_ze33is$(p,a.instanceAttrModelMat().output).output),null!=t.skin){var h=a.skinTransformNode_78eraa$(a.attrJoints().output,a.attrWeights().output);c=a.multiplyNode_ze33is$(c,h.outJointMat).output,p=a.multiplyNode_ze33is$(p,h.outJointMat).output}var d={v:a.attrPositions().output},f={v:a.attrNormals().output};if(null!=(n=t.morphWeights)){var _=t.geometry.getMorphAttributes();if(!_.isEmpty()){var m,$,y=a.morphWeightsNode_za3lpa$(n.length),v=M();for(m=_.iterator();m.hasNext();){var g=m.next();u(g.name,ds().POSITIONS.name)&&v.add_11rb$(g)}for($=v.iterator();$.hasNext();){var b=$.next(),x=a.getMorphWeightNode_dcktnw$(_.indexOf_11rb$(b),y),w=a.multiplyNode_ze33is$(a.attributeNode_nm2vx5$(b).output,x.outWeight);d.v=a.addNode_ze33is$(d.v,w.output).output}var z,k,S=M();for(z=_.iterator();z.hasNext();){var C=z.next();u(C.name,ds().NORMALS.name)&&S.add_11rb$(C)}for(k=S.iterator();k.hasNext();){var N=k.next(),E=a.getMorphWeightNode_dcktnw$(_.indexOf_11rb$(N),y),T=a.multiplyNode_ze33is$(a.attributeNode_nm2vx5$(N).output,E.outWeight);f.v=a.addNode_ze33is$(f.v,T.output).output}}}var P=a.vec3TransformNode_vid4wo$(f.v,p,0);o.v=a.stageInterfaceNode_iikjwn$("ifNormals",P.outVec3),a.positionOutput=a.vec4TransformNode_9krp9t$(d.v,c).outVec4;var O=new np(r),j=O.flipBacksideNormalNode_r20yfm$(o.v.output).outNormal,A=O.addNode_u9w9by$(new vs(j,O.stage));O.colorOutput_a3v4si$(A.outColor);var I,R=new zc(r);return R.onPipelineSetup.add_11rb$((I=e,function(t,e,i){return t.blendMode=hl(),t.cullMethod=I,s})),R.createPipeline_sbx4mf$(t,i)},vs.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                float d = gl_FragCoord.z / gl_FragCoord.w;\n                "+this.outColor.declare()+" = vec4(normalize("+this.inNormals.ref3f_61zpoe$()+"), -d);\n            ")},vs.$metadata$={kind:$,simpleName:"NormalLinearDepthNode",interfaces:[rp]},gs.prototype.normalLinearDepthSetup_0=function(t,e){var i=new pa;return i.name="NormalLinearDepthMapPass",i.setSize_vux9f0$(t,e),i.clearDepthTexture(),i.addColorTexture_farcsl$($h()),new ua(i)},gs.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bs,xs,ws,zs,ks,Ss,Cs,Ns,Es,Ts,Ps,Os,Ms,js=null;function As(){return null===js&&new gs,js}function Is(t,e,i,n){return void 0===i&&(i=e),n=n||Object.create(ys.prototype),ys.call(n,t,As().normalLinearDepthSetup_0(e,i)),n}function Rs(t,i){this.set=t,this.descriptors=i,this.longHash=null;var n,r={v:new kt(e.Long.ZERO)};for(n=this.descriptors.iterator();n.hasNext();){var o=n.next(),s=r.v,a=new kt(e.Long.fromInt(71023)),l=new kt(s.data.multiply(a.data)),u=o.longHash;r.v=new kt(l.data.add(u.data))}this.longHash=r.v}function Ls(){this.descriptors=M()}function Ds(t,i,n,r){this.binding=i,this.type=n,this.name=t.name,this.stages=Ny(t.stages),this.longHash=null;var o=r,s=o,a=new kt(e.Long.fromInt(71023)),l=new kt(s.data.multiply(a.data)),u=st(t.name),p=new kt(e.Long.fromInt(u)),c=o=new kt(l.data.add(p.data)),h=new kt(e.Long.fromInt(71023)),d=new kt(c.data.multiply(h.data)),f=this.type.hashCode(),_=new kt(e.Long.fromInt(f));o=new kt(d.data.add(_.data)),this.longHash=o}function qs(){this.name="",this.stages=ht()}function Fs(t,e,i){Ds.call(this,t,e,Qs(),i),this.arraySize=t.arraySize,this.onUpdate=t.onUpdate;var n,r=I(this.arraySize);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.textures=r}function Bs(){qs.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="texture"}function Us(t,e,i){Ds.call(this,t,e,ta(),i),this.arraySize=t.arraySize,this.isDepthSampler=t.isDepthSampler,this.onUpdate=t.onUpdate;var n,r=I(this.arraySize);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.textures=r}function Vs(){qs.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="texture"}function Gs(t,e,i){Ds.call(this,t,e,ea(),i),this.arraySize=t.arraySize,this.onUpdate=t.onUpdate;var n,r=I(this.arraySize);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.textures=r}function Hs(){qs.call(this),this.arraySize=1,this.onUpdate=null,this.onCreate=null,this.name="texture"}function Ws(t,e,i){Ds.call(this,t,e,ia(),i),this.arraySize=t.arraySize,this.isDepthSampler=t.isDepthSampler,this.onUpdate=t.onUpdate;var n,r=I(this.arraySize);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.textures=r}function Xs(){qs.call(this),this.arraySize=1,this.isDepthSampler=!1,this.onUpdate=null,this.onCreate=null,this.name="cubeTexture"}function Ks(t,e,i,n){Ds.call(this,t,e,na(),n),this.uniforms=i,this.instanceName=t.instanceName,this.onUpdate=t.onUpdate,this.layout_0=new sh(this.uniforms),this.size=this.layout_0.size}function Ys(){qs.call(this),this.instanceName=null,this.uniforms=M(),this.onUpdate=null,this.onCreate=null,this.name="Ubo"}function Zs(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Js(){Js=function(){},bs=new Zs("SAMPLER_1D",0),xs=new Zs("SAMPLER_2D",1),ws=new Zs("SAMPLER_3D",2),zs=new Zs("SAMPLER_CUBE",3),ks=new Zs("UNIFORM_BUFFER",4)}function Qs(){return Js(),bs}function ta(){return Js(),xs}function ea(){return Js(),ws}function ia(){return Js(),zs}function na(){return Js(),ks}function ra(t){this.renderPass=t,this.mesh_aolzlu$_0=this.mesh_aolzlu$_0,this.pipeline=null,this.modelMat=new En,this.viewMat=new En,this.projMat=new En,this.mvpMat=new En,this.mvpMatD_0=new bn}function oa(t){this.renderPass=t,this.mutCommands_0=M(),this.commandPool_0=M(),this.meshFilter=sa}function sa(t){return!0}function aa(){}function la(t,e){Al.call(this,t),this.config=e,this.isEnabled=!0,this.width_6fsav1$_0=this.config.width,this.height_4loxs4$_0=this.config.height;var i=new tf;i.projCorrectionMode=Jd(),this.camera_et6fa$_0=i,this.onSetupMipLevel=null,this.name=this.config.name;var n,r=I(this.config.nColorAttachments);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=null;this.clearColors=r,this.applyMipViewport_za3lpa$(0),0===this.width&&(this.width=16),0===this.height&&(this.height=16)}function ua(t){var i,n,r;if(this.name=t.name,this.width=t.width,this.height=t.height,this.mipLevels=t.mipLevels,this.drawMipLevels=t.drawMipLevels,this.depthRenderTarget=t.depthRenderTarget,this.colorRenderTarget=t.colorRenderTarget,n=this.depthRenderTarget===_a()&&null!=(i=t.depthAttachment)?new ca(i):null,this.depthAttachment=n,this.colorRenderTarget===_a()){var o,s=t.colorAttachments,a=w(j(s,10));for(o=s.iterator();o.hasNext();){var l=o.next();a.add_11rb$(new ca(l))}r=a}else r=Nt();if(this.colorAttachments=r,this.nColorAttachments=this.colorAttachments.size,this.colorRenderTarget===_a()&&this.colorAttachments.isEmpty())throw bt("colorAttachments must be configured if colorRenderTarget is TEXTURE");var u=this.colorRenderTarget===ma();if(u&&(u=!t.colorAttachments.isEmpty()),u){var p=DE.Log,c=$k.WARN,h=e.getKClassFromExpression(this).simpleName;c.level>=p.level.level&&p.printer(c,h,"colorAttachments are ignored if colorRenderTarget is RENDER_BUFFER")}if(this.depthRenderTarget===_a()&&null==this.depthAttachment)throw bt("depthAttachment must be configured if depthRenderTarget is TEXTURE");if(this.depthRenderTarget===ma()&&null!=t.depthAttachment){var d=DE.Log,f=$k.WARN,_=e.getKClassFromExpression(this).simpleName;f.level>=d.level.level&&d.printer(f,_,"depthAttachment is ignored if depthRenderTarget is RENDER_BUFFER")}}function pa(){this.name="OffscreenRenderPass",this.width=0,this.height=0,this.mipLevels=1,this.drawMipLevels=!0,this.colorRenderTarget=_a(),this.depthRenderTarget=ma(),this.colorAttachments=M(),this.depthAttachment=null}function ca(t){this.colorFormat=t.colorFormat,this.minFilter=t.minFilter,this.magFilter=t.magFilter,this.addressModeU=t.addressModeU,this.addressModeV=t.addressModeV,this.depthCompareOp=t.depthCompareOp,this.maxAnisotropy=1,this.providedTexture=t.providedTexture}function ha(){this.colorFormat=dh(),this.minFilter=Yh(),this.magFilter=Yh(),this.addressModeU=Qh(),this.addressModeV=Qh(),this.depthCompareOp=yl(),this.providedTexture=null}function da(t,e){T.call(this),this.name$=t,this.ordinal$=e}function fa(){fa=function(){},Ss=new da("TEXTURE",0),Cs=new da("RENDER_BUFFER",1)}function _a(){return fa(),Ss}function ma(){return fa(),Cs}function $a(t,e){la.call(this,t,e),this.impl_8be2vx$=new AC(this),this.depthTexture=this.makeDepthAttachmentTex_qnmoqa$_0(),this.colorTextures=this.makeColorAttachmentTexs_o5wgst$_0(),this.copyTargetsColor=M()}function ya(t,e){la.call(this,t,e),this.impl_8be2vx$=new IC(this),this.depthTexture=this.makeDepthAttachmentTex_17p1u7$_0(),this.colorTextures=this.makeColorAttachmentTexs_gs6cwg$_0(),this.copyTargetsColor=M(),this.onSetupView_3plctr$_0=this.onSetupView_3plctr$_0;var i,n=I(6);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new oa(this);if(this.drawQueues=n,this.defaultCubeMapCameraConfig_ubu93h$_0(),e.depthRenderTarget===_a())throw Tt("CubeMapDepthTexture not yet implemented");if(e.colorAttachments.size>1)throw Tt("CubeMap multiple render targets not yet implemented")}function va(t,e){this.lookAt=t,this.up=e}function ga(t,e,i){T.call(this),this.index=i,this.name$=t,this.ordinal$=e}function ba(){ba=function(){},Ns=new ga("FRONT",0,0),Es=new ga("BACK",1,1),Ts=new ga("LEFT",2,2),Ps=new ga("RIGHT",3,3),Os=new ga("UP",4,4),Ms=new ga("DOWN",5,5)}function xa(){return ba(),Ns}function wa(){return ba(),Es}function za(){return ba(),Ts}function ka(){return ba(),Ps}function Sa(){return ba(),Os}function Ca(){return ba(),Ms}function Na(){return[xa(),wa(),za(),ka(),Sa(),Ca()]}function Ea(t){var i;ul(),this.name=t.name,this.pipelineHash=null,this.pipelineInstanceId=(i=ul().instanceId_0,ul().instanceId_0=i.inc(),i),this.cullMethod=t.cullMethod,this.blendMode=t.blendMode,this.depthCompareOp=t.depthTest,this.isWriteDepth=t.isWriteDepth,this.lineWidth=t.lineWidth,this.layout=null,this.shaderCode=null;var n,r,o=t.vertexLayout.create(),s=t.descriptorSetLayouts,a=w(j(s,10)),l=0;for(n=s.iterator();n.hasNext();){var u=n.next();a.add_11rb$(u.create_za3lpa$(tt((l=(r=l)+1|0,r))))}var p,c=a,h=t.pushConstantRanges,d=w(j(h,10));for(p=h.iterator();p.hasNext();){var f=p.next();d.add_11rb$(f.create())}var _=d;this.layout=new Ta(o,c,_),this.shaderCode=t.shaderCodeGenerator(this.layout);var m=this.cullMethod.hashCode(),$={v:new kt(e.Long.fromInt(m))},y=$.v,v=new kt(e.Long.fromInt(71023)),g=new kt(y.data.multiply(v.data)),b=this.depthCompareOp.hashCode(),x=new kt(e.Long.fromInt(b));$.v=new kt(g.data.add(x.data));var z=$.v,k=new kt(e.Long.fromInt(71023)),S=new kt(z.data.multiply(k.data)),C=st(this.isWriteDepth),N=new kt(e.Long.fromInt(C));$.v=new kt(S.data.add(N.data));var E=$.v,T=new kt(e.Long.fromInt(71023)),P=new kt(E.data.multiply(T.data)),O=st(this.lineWidth),M=new kt(e.Long.fromInt(O));$.v=new kt(P.data.add(M.data));var A=$.v,I=new kt(e.Long.fromInt(71023)),R=new kt(A.data.multiply(I.data)),L=o.longHash;$.v=new kt(R.data.add(L.data));var D,q,F=$.v,B=new kt(e.Long.fromInt(71023)),U=new kt(F.data.multiply(B.data)),V=this.shaderCode.longHash;for($.v=new kt(U.data.add(V.data)),D=c.iterator();D.hasNext();){var G=D.next(),H=$.v,W=new kt(e.Long.fromInt(71023)),X=new kt(H.data.multiply(W.data)),K=G.longHash;$.v=new kt(X.data.add(K.data))}for(q=_.iterator();q.hasNext();){var Y=q.next(),Z=$.v,J=new kt(e.Long.fromInt(71023)),Q=new kt(Z.data.multiply(J.data)),et=Y.longHash;$.v=new kt(Q.data.add(et.data))}this.pipelineHash=$.v}function Ta(t,e,i){this.vertices=t,this.descriptorSets=e,this.pushConstantRanges=i}function Pa(){this.name="pipeline",this.cullMethod=Tl(),this.blendMode=hl(),this.depthTest=bl(),this.isWriteDepth=!0,this.lineWidth=1,this.shaderCodeGenerator_j5ii45$_0=this.shaderCodeGenerator_j5ii45$_0,this.vertexLayout=new qd,this.descriptorSetLayouts=M(),this.pushConstantRanges=M()}function Oa(){ll=this,this.instanceId_0=Pt}ys.$metadata$={kind:$,simpleName:"NormalLinearDepthMapPass",interfaces:[fs]},Ls.prototype.unaryPlus_ngusss$=function(t){this.descriptors.add_11rb$(t)},Ls.prototype.uniformBuffer_2ydyu8$=function(t,e,i){var n=new Ys;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Ls.prototype.texture1d_la8pbu$=function(t,e,i){var n=new Bs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Ls.prototype.texture2d_me4w2j$=function(t,e,i){var n=new Vs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Ls.prototype.texture3d_ni12t8$=function(t,e,i){var n=new Hs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Ls.prototype.textureCube_9fohmg$=function(t,e,i){var n=new Xs;n.name=t,St(n.stages,e),i(n),this.unaryPlus_ngusss$(n)},Ls.prototype.create_za3lpa$=function(t){for(var e=this.descriptors.size,i=w(e),n=0;n<e;n++)i.add_11rb$(this.descriptors.get_za3lpa$(n).create_za3lpa$(n));return new Rs(t,i)},Ls.prototype.clear=function(){this.descriptors.clear()},Ls.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Rs.$metadata$={kind:$,simpleName:"DescriptorSetLayout",interfaces:[]},qs.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Ds.$metadata$={kind:$,simpleName:"Descriptor",interfaces:[]},Object.defineProperty(Fs.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),Bs.prototype.create_za3lpa$=function(t){var i,n=Qs().hashCode(),r=new kt(e.Long.fromInt(n)),o=new kt(e.Long.fromInt(71023)),s=new Fs(this,t,new kt(r.data.multiply(o.data)));return null!=(i=this.onCreate)&&i(s),s},Bs.$metadata$={kind:$,simpleName:"Builder",interfaces:[qs]},Fs.$metadata$={kind:$,simpleName:"TextureSampler1d",interfaces:[Ds]},Object.defineProperty(Us.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),Vs.prototype.create_za3lpa$=function(t){var i,n=ta().hashCode(),r=new kt(e.Long.fromInt(n)),o=new kt(e.Long.fromInt(71023)),s=new Us(this,t,new kt(r.data.multiply(o.data)));return null!=(i=this.onCreate)&&i(s),s},Vs.$metadata$={kind:$,simpleName:"Builder",interfaces:[qs]},Us.$metadata$={kind:$,simpleName:"TextureSampler2d",interfaces:[Ds]},Object.defineProperty(Gs.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),Hs.prototype.create_za3lpa$=function(t){var i,n=ea().hashCode(),r=new kt(e.Long.fromInt(n)),o=new kt(e.Long.fromInt(71023)),s=new Gs(this,t,new kt(r.data.multiply(o.data)));return null!=(i=this.onCreate)&&i(s),s},Hs.$metadata$={kind:$,simpleName:"Builder",interfaces:[qs]},Gs.$metadata$={kind:$,simpleName:"TextureSampler3d",interfaces:[Ds]},Object.defineProperty(Ws.prototype,"texture",{configurable:!0,get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}}),Xs.prototype.create_za3lpa$=function(t){var i,n=ia().hashCode(),r=new kt(e.Long.fromInt(n)),o=new kt(e.Long.fromInt(71023)),s=new Ws(this,t,new kt(r.data.multiply(o.data)));return null!=(i=this.onCreate)&&i(s),s},Xs.$metadata$={kind:$,simpleName:"Builder",interfaces:[qs]},Ws.$metadata$={kind:$,simpleName:"TextureSamplerCube",interfaces:[Ds]},Ks.prototype.putTo_l6oshk$=function(t){this.layout_0.putTo_l6oshk$(t),t.flip()},Ks.prototype.uniform_ww73n8$=function(t){var i;return null==(i=this.uniforms.get_za3lpa$(t))||e.isType(i,V)?i:c()},Ys.prototype.unaryPlus_wq3w46$=function(t){this.uniforms.add_11rb$(t)},Ys.prototype.create_za3lpa$=function(t){for(var i,n=this.uniforms.size,r=w(n),o=0;o<n;o++)r.add_11rb$(this.uniforms.get_za3lpa$(o)());var s,a=r,l=na().hashCode(),u=new kt(e.Long.fromInt(l)),p=new kt(e.Long.fromInt(71023)),c={v:new kt(u.data.multiply(p.data))};for(s=a.iterator();s.hasNext();){var h=s.next(),d=c.v,f=new kt(e.Long.fromInt(71023)),_=new kt(d.data.multiply(f.data)),m=e.getKClassFromExpression(h).hashCode(),$=new kt(e.Long.fromInt(m));c.v=new kt(_.data.add($.data));var y=c.v,v=new kt(e.Long.fromInt(71023)),g=new kt(y.data.multiply(v.data)),b=st(h.name),x=new kt(e.Long.fromInt(b));c.v=new kt(g.data.add(x.data))}var z=new Ks(this,t,a,c.v);return null!=(i=this.onCreate)&&i(z),z},Ys.$metadata$={kind:$,simpleName:"Builder",interfaces:[qs]},Ks.$metadata$={kind:$,simpleName:"UniformBuffer",interfaces:[Ds]},Zs.$metadata$={kind:$,simpleName:"DescriptorType",interfaces:[T]},Zs.values=function(){return[Qs(),ta(),ea(),ia(),na()]},Zs.valueOf_61zpoe$=function(t){switch(t){case"SAMPLER_1D":return Qs();case"SAMPLER_2D":return ta();case"SAMPLER_3D":return ea();case"SAMPLER_CUBE":return ia();case"UNIFORM_BUFFER":return na();default:P("No enum constant de.fabmax.kool.pipeline.DescriptorType."+t)}},Object.defineProperty(ra.prototype,"mesh",{configurable:!0,get:function(){return null==this.mesh_aolzlu$_0?ct("mesh"):this.mesh_aolzlu$_0},set:function(t){this.mesh_aolzlu$_0=t}}),ra.prototype.captureMatrices=function(){this.modelMat.set_d4zu6l$(this.mesh.modelMat),this.viewMat.set_d4zu6l$(this.renderPass.camera.view),this.projMat.set_d4zu6l$(this.renderPass.camera.proj),this.renderPass.camera.viewProj.mul_u47j3u$(this.mesh.modelMat,this.mvpMatD_0),this.mvpMat.set_d4zu6l$(this.mvpMatD_0)},ra.$metadata$={kind:$,simpleName:"DrawCommand",interfaces:[]},Object.defineProperty(oa.prototype,"commands",{configurable:!0,get:function(){return this.mutCommands_0}}),oa.prototype.clear=function(){this.commandPool_0.addAll_brywnq$(this.mutCommands_0),this.mutCommands_0.clear()},oa.prototype.addMesh_sbx4mf$=function(t,e){var i;if(this.meshFilter(t)){var n=this.commandPool_0.isEmpty()?new ra(this.renderPass):this.commandPool_0.removeAt_za3lpa$(xt(this.commandPool_0));n.mesh=t,n.pipeline=t.getPipeline_aemszp$(e),n.captureMatrices(),this.mutCommands_0.add_11rb$(n),i=n}else i=null;return i},oa.$metadata$={kind:$,simpleName:"DrawQueue",interfaces:[]},aa.$metadata$={kind:Y,simpleName:"LoadedTexture",interfaces:[]},Object.defineProperty(la.prototype,"width",{configurable:!0,get:function(){return this.width_6fsav1$_0},set:function(t){this.width_6fsav1$_0=t}}),Object.defineProperty(la.prototype,"height",{configurable:!0,get:function(){return this.height_4loxs4$_0},set:function(t){this.height_4loxs4$_0=t}}),Object.defineProperty(la.prototype,"camera",{configurable:!0,get:function(){return this.camera_et6fa$_0},set:function(t){this.camera_et6fa$_0=t}}),la.prototype.getColorTexProps_za3lpa$=function(t){return void 0===t&&(t=0),this.config.colorAttachments.get_za3lpa$(t).getTextureProps_6taknv$(this.config.mipLevels>1)},la.prototype.getMipWidth_za3lpa$=function(t){return t<=0?this.width:this.width>>t},la.prototype.getMipHeight_za3lpa$=function(t){return t<=0?this.height:this.height>>t},la.prototype.applyMipViewport_za3lpa$=function(t){this.viewport.set_tjonv8$(0,0,this.getMipWidth_za3lpa$(t),this.getMipHeight_za3lpa$(t))},la.prototype.resize_w70mbp$=function(t,i,n){var r=DE.Log,o=$k.DEBUG,s=e.getKClassFromExpression(this).simpleName;if(o.level>=r.level.level&&r.printer(o,s,"OffscreenPass "+Ct(this.name)+" resized to "+t+" x "+i),0===this.config.width&&0===this.config.height)this.applySize_w70mbp$(t,i,n),this.applyMipViewport_za3lpa$(0);else{var a=DE.Log,l=$k.ERROR,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"OffscreenRenderPass "+Ct(this.name)+" cannot be resized: Size is fixed to "+this.config.width+" x "+this.config.height)}},la.prototype.applySize_w70mbp$=function(t,e,i){this.width=t,this.height=e},ua.$metadata$={kind:$,simpleName:"Config",interfaces:[]},pa.prototype.setDynamicSize=function(){this.width=0,this.height=0},pa.prototype.setSize_vux9f0$=function(t,e){this.width=t,this.height=e},pa.prototype.addMipLevels_ydzd23$=function(t,e,i){void 0===t&&(t=this.width),void 0===e&&(e=this.height),void 0===i&&(i=!0),this.mipLevels=Un(t,e),this.drawMipLevels=i},pa.prototype.clearDepthTexture=function(){this.depthRenderTarget=ma(),this.depthAttachment=null},pa.prototype.setDepthTexture_6taknv$=function(t){this.depthRenderTarget=_a();var e=new ha;t?(e.minFilter=Yh(),e.magFilter=Yh(),e.depthCompareOp=bl()):(e.minFilter=Kh(),e.magFilter=Kh(),e.depthCompareOp=yl()),this.depthAttachment=e},pa.prototype.clearColorTexture=function(){this.colorRenderTarget=ma(),this.colorAttachments.clear()},pa.prototype.addColorTexture_farcsl$=function(t){this.colorRenderTarget=_a();var e=this.colorAttachments,i=new ha;i.colorFormat=t,e.add_11rb$(i)},pa.prototype.addColorTexture_1yho43$=function(t){this.colorRenderTarget=_a();var e=this.colorAttachments,i=new ha;t(i),e.add_11rb$(i)},pa.$metadata$={kind:$,simpleName:"ConfigBuilder",interfaces:[]},Object.defineProperty(ca.prototype,"isProvided",{configurable:!0,get:function(){return null!=this.providedTexture}}),ca.prototype.getTextureProps_6taknv$=function(t){return new Hh(this.colorFormat,this.addressModeU,this.addressModeV,Qh(),this.minFilter,this.magFilter,t,this.maxAnisotropy)},ca.$metadata$={kind:$,simpleName:"TextureAttachmentConfig",interfaces:[]},ha.$metadata$={kind:$,simpleName:"TextureAttachmentConfigBuilder",interfaces:[]},da.$metadata$={kind:$,simpleName:"RenderTarget",interfaces:[T]},da.values=function(){return[_a(),ma()]},da.valueOf_61zpoe$=function(t){switch(t){case"TEXTURE":return _a();case"RENDER_BUFFER":return ma();default:P("No enum constant de.fabmax.kool.pipeline.OffscreenRenderPass.RenderTarget."+t)}},la.$metadata$={kind:$,simpleName:"OffscreenRenderPass",interfaces:[Al]},Object.defineProperty($a.prototype,"colorTexture",{configurable:!0,get:function(){return this.colorTextures.isEmpty()?null:this.colorTextures.get_za3lpa$(0)}}),$a.prototype.copyColor=function(){var t=new Eh(this.getColorTexProps_za3lpa$(),Ct(this.name)+"-copy-"+this.copyTargetsColor.size);return this.copyTargetsColor.add_11rb$(t),t},$a.prototype.dispose_aemszp$=function(t){var e;la.prototype.dispose_aemszp$.call(this,t),this.impl_8be2vx$.dispose_aemszp$(t),t.runDelayed_hd6vpk$(3,(e=this,function(t){var i,n;null==(null!=(i=e.config.depthAttachment)?i.providedTexture:null)&&null!=(n=e.depthTexture)&&n.dispose();var r,o,a=0;for(r=e.colorTextures.iterator();r.hasNext();){var l=r.next(),u=e,p=tt((a=(o=a)+1|0,o));u.config.colorAttachments.get_za3lpa$(p).isProvided||l.dispose()}return s}))},$a.prototype.applySize_w70mbp$=function(t,e,i){la.prototype.applySize_w70mbp$.call(this,t,e,i),this.impl_8be2vx$.applySize_w70mbp$(t,e,i)},$a.prototype.makeColorAttachmentTexs_o5wgst$_0=function(){var t,i,n=this.config.colorAttachments,r=w(j(n,10)),o=0;for(t=n.iterator();t.hasNext();){var s,a,l=t.next(),u=r.add_11rb$,p=tt((o=(i=o)+1|0,i));if(l.isProvided)s=e.isType(a=x(l.providedTexture),Eh)?a:c();else{var h=Ct(this.name)+"_color["+p+"]";s=new Eh(l.getTextureProps_6taknv$(this.config.mipLevels>1),h)}u.call(r,s)}return r},$a.prototype.makeDepthAttachmentTex_qnmoqa$_0=function(){var t,i;if(null!=(t=this.config.depthAttachment)){var n,r;if(t.isProvided)n=e.isType(r=x(t.providedTexture),Eh)?r:c();else{var o=Ct(this.name)+"_depth";n=new Eh(t.getTextureProps_6taknv$(this.config.mipLevels>1),o)}i=n}else i=null;return i},$a.$metadata$={kind:$,simpleName:"OffscreenRenderPass2d",interfaces:[la]},Object.defineProperty(ya.prototype,"colorTexture",{configurable:!0,get:function(){return this.colorTextures.isEmpty()?null:this.colorTextures.get_za3lpa$(0)}}),Object.defineProperty(ya.prototype,"onSetupView",{configurable:!0,get:function(){return null==this.onSetupView_3plctr$_0?ct("onSetupView"):this.onSetupView_3plctr$_0},set:function(t){this.onSetupView_3plctr$_0=t}}),ya.prototype.copyColor=function(){var t=new Mh(this.getColorTexProps_za3lpa$(),Ct(this.name)+"-"+this.copyTargetsColor.size);return this.copyTargetsColor.add_11rb$(t),t},ya.prototype.collectDrawCommands_aemszp$=function(t){var e,i;for(e=Na(),i=0;i!==e.length;++i){var n=e[i];this.drawQueue=this.drawQueues[n.index],this.onSetupView(n,t),la.prototype.collectDrawCommands_aemszp$.call(this,t)}},ya.prototype.dispose_aemszp$=function(t){var e;la.prototype.dispose_aemszp$.call(this,t),this.impl_8be2vx$.dispose_aemszp$(t),t.runDelayed_hd6vpk$(3,(e=this,function(t){var i,n;null==(null!=(i=e.config.depthAttachment)?i.providedTexture:null)&&null!=(n=e.depthTexture)&&n.dispose();var r,o,a=0;for(r=e.colorTextures.iterator();r.hasNext();){var l=r.next(),u=e,p=tt((a=(o=a)+1|0,o));null==u.config.colorAttachments.get_za3lpa$(p).providedTexture&&l.dispose()}return s}))},ya.prototype.applySize_w70mbp$=function(t,e,i){la.prototype.applySize_w70mbp$.call(this,t,e,i),this.impl_8be2vx$.applySize_w70mbp$(t,e,i)},ya.prototype.makeColorAttachmentTexs_gs6cwg$_0=function(){var t,i,n=this.config.colorAttachments,r=w(j(n,10)),o=0;for(t=n.iterator();t.hasNext();){var s,a,l=t.next(),u=r.add_11rb$,p=tt((o=(i=o)+1|0,i));if(l.isProvided)s=e.isType(a=l.providedTexture,Mh)?a:c();else{var h=Ct(this.name)+"_color["+p+"]";s=new Mh(l.getTextureProps_6taknv$(this.config.mipLevels>1),h)}u.call(r,s)}return r},ya.prototype.makeDepthAttachmentTex_17p1u7$_0=function(){var t,i;if(null!=(t=this.config.depthAttachment)){var n,r;if(t.isProvided)n=e.isType(r=t.providedTexture,Mh)?r:c();else{var o=Ct(this.name)+"_depth";n=new Mh(t.getTextureProps_6taknv$(this.config.mipLevels>1),o)}i=n}else i=null;return i},ya.prototype.defaultCubeMapCameraConfig_ubu93h$_0=function(){var t,i,n=Et([_t(xa(),new va(new Sr(0,0,1),Er().NEG_Y_AXIS)),_t(wa(),new va(new Sr(0,0,-1),Er().NEG_Y_AXIS)),_t(za(),new va(new Sr(-1,0,0),Er().NEG_Y_AXIS)),_t(ka(),new va(new Sr(1,0,0),Er().NEG_Y_AXIS)),_t(Sa(),new va(new Sr(0,1,0),Er().Z_AXIS)),_t(Ca(),new va(new Sr(0,-1,0),Er().NEG_Z_AXIS))]),r=this.camera;e.isType(r,tf)&&(r.position.set_czzhiu$(Er().ZERO),r.fovY=90,r.clipNear=.01,r.clipFar=10,r.projCorrectionMode=Jd()),this.onSetupView=(t=n,i=this,function(e,n){var r=x(t.get_11rb$(e));return i.camera.lookAt.set_czzhiu$(r.lookAt),i.camera.up.set_czzhiu$(r.up),s})},va.$metadata$={kind:$,simpleName:"ViewConfig",interfaces:[]},ga.$metadata$={kind:$,simpleName:"ViewDirection",interfaces:[T]},ga.values=Na,ga.valueOf_61zpoe$=function(t){switch(t){case"FRONT":return xa();case"BACK":return wa();case"LEFT":return za();case"RIGHT":return ka();case"UP":return Sa();case"DOWN":return Ca();default:P("No enum constant de.fabmax.kool.pipeline.OffscreenRenderPassCube.ViewDirection."+t)}},ya.$metadata$={kind:$,simpleName:"OffscreenRenderPassCube",interfaces:[la]},Ea.prototype.equals=function(t){var i;return this===t||!!e.isType(t,Ea)&&(null!=(i=this.pipelineHash)?i.equals(t.pipelineHash):null)},Ea.prototype.hashCode=function(){return this.pipelineHash.hashCode()},Ta.$metadata$={kind:$,simpleName:"Layout",interfaces:[]},Object.defineProperty(Pa.prototype,"shaderCodeGenerator",{configurable:!0,get:function(){return null==this.shaderCodeGenerator_j5ii45$_0?ct("shaderCodeGenerator"):this.shaderCodeGenerator_j5ii45$_0},set:function(t){this.shaderCodeGenerator_j5ii45$_0=t}}),Pa.prototype.create=function(){return new Ea(this)},Pa.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Oa.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ma,ja,Aa,Ia,Ra,La,Da,qa,Fa,Ba,Ua,Va,Ga,Ha,Wa,Xa,Ka,Ya,Za,Ja,Qa,tl,el,il,nl,rl,ol,sl,al,ll=null;function ul(){return null===ll&&new Oa,ll}function pl(t,e){T.call(this),this.name$=t,this.ordinal$=e}function cl(){cl=function(){},Ma=new pl("DISABLED",0),ja=new pl("BLEND_ADDITIVE",1),Aa=new pl("BLEND_MULTIPLY_ALPHA",2),Ia=new pl("BLEND_PREMULTIPLIED_ALPHA",3)}function hl(){return cl(),Ma}function dl(){return cl(),ja}function fl(){return cl(),Aa}function _l(){return cl(),Ia}function ml(t,e){T.call(this),this.name$=t,this.ordinal$=e}function $l(){$l=function(){},Ra=new ml("DISABLED",0),La=new ml("ALWAYS",1),Da=new ml("NEVER",2),qa=new ml("LESS",3),Fa=new ml("LESS_EQUAL",4),Ba=new ml("GREATER",5),Ua=new ml("GREATER_EQUAL",6),Va=new ml("EQUAL",7),Ga=new ml("NOT_EQUAL",8)}function yl(){return $l(),Ra}function vl(){return $l(),La}function gl(){return $l(),Da}function bl(){return $l(),qa}function xl(){return $l(),Fa}function wl(){return $l(),Ba}function zl(){return $l(),Ua}function kl(){return $l(),Va}function Sl(){return $l(),Ga}function Cl(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Nl(){Nl=function(){},Ha=new Cl("DEFAULT",0),Wa=new Cl("CULL_BACK_FACES",1),Xa=new Cl("CULL_FRONT_FACES",2),Ka=new Cl("NO_CULLING",3)}function El(){return Nl(),Ha}function Tl(){return Nl(),Wa}function Pl(){return Nl(),Xa}function Ol(){return Nl(),Ka}function Ml(t,e,i){this.longHash=e,this.pushConstants=i,this.name=t.name,this.instanceName=t.instanceName,this.stages=Ny(t.stages),this.layout_0=new sh(this.pushConstants),this.size=this.layout_0.size,this.buffer_0=kE(this.size),this.onUpdate=t.onUpdate}function jl(){this.name="PushConstants",this.instanceName=null,this.stages=ht(),this.pushConstants=M(),this.onUpdate=null}function Al(t){this.drawNode=t,this.name=null,this.dependencies=M(),this.viewport=new NC(0,0,0,0),this.lighting=null,this.isUpdateDrawNode=!0,this.updateEvent_2t7tkj$_0=null;var e,i=I(1);e=i.length-1|0;for(var n=0;n<=e;n++)i[n]=new Ey(.15,.15,.15,1);this.clearColors_ynhttt$_0=i,this.clearDepth=!0,this.drawQueue_mxdtqn$_0=new oa(this),this.onBeforeCollectDrawCommands=M(),this.onAfterCollectDrawCommands=M(),this.onAfterDraw=M()}function Il(t,e){this.renderPass=t,this.ctx=e}function Rl(t){Al.call(this,t),this.scene=t,this.useWindowViewport=!0,this.name="onscreen/"+Ct(this.scene.name),this.lighting=this.scene.lighting}function Ll(){this.onPipelineSetup=M(),this.onPipelineCreated=M()}function Dl(){}function ql(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Fl(){Fl=function(){},Ya=new ql("Y_UP",0),Za=new ql("Y_DOWN",1)}function Bl(){return Fl(),Ya}function Ul(){return Fl(),Za}function Vl(t){rp.call(this,"colorAlphaNode_"+t.nextNodeId,t),this.inColor=new op(new ju(Oy().MAGENTA),null),this.inAlpha=new op(new Pu(1),null),this.outAlphaColor=new op(new zu(this.name+"_outColor"),this)}function Gl(t){rp.call(this,"colorPreMult_"+t.nextNodeId,t),this.inColor=new op(new ju(Oy().MAGENTA)),this.outColor=new op(new zu(this.name+"_outColor"),this)}function Hl(t){rp.call(this,"gamma_"+t.nextNodeId,t),this.inColor=new op(new ju(Oy().MAGENTA)),this.inGamma=new op(new Pu(1/2.2)),this.outColor=new op(new zu(this.name+"_outColor"),this)}function Wl(t){rp.call(this,"hdrToLdr_"+t.nextNodeId,t),this.inColor=new op(new ju(Oy().MAGENTA)),this.inGamma=new op(new Pu(2.2)),this.outColor=new op(new zu(this.name+"_outColor"),this)}function Xl(t,e){void 0===e&&(e=1),rp.call(this,"fragmentColorOut",t,hc().mask),this.channels=e,this.alpha=null;var i,n=I(this.channels);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new op(new ju(Oy().MAGENTA));this.inColors=n}function Kl(t){rp.call(this,"fragmentDepthOut",t,hc().mask),this.inDepth=new op(new Pu(.5))}function Yl(t){rp.call(this,"discardAlpha_"+t.nextNodeId,t,hc().mask),this.inAlpha=new op(new Pu(1)),this.inAlphaCutoff=new op(new Pu(0))}function Zl(t,e){void 0===e&&(e=4),rp.call(this,"lightNd_"+t.nextNodeId,t),this.maxLights=e,this.uLightCnt_0=new Od("uLightCount"),this.uPositions_0=new Nd("uLightPositions",this.maxLights),this.uColors_0=new Nd("uLightColors",this.maxLights),this.uDirections_0=new Nd("uLightDirections",this.maxLights);var i,n=I(this.maxLights);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new op(new Pu(1));this.inShadowFacs=n,this.inFragPos=new op(new Mu(Er().ZERO)),this.inSpotInnerAngle=new op(new Pu(.8)),this.outLightCount=new op(new Su(this.uLightCnt_0.name),this),this.outFragToLightDirection=new op(new ku(this.name+"_outLightDirs"),this),this.outRadiance=new op(new ku(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function Jl(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uPositions_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uColors_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uDirections_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uLightCnt_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.encodeLightSetup_0(i),s}}(t),s}}function Ql(t){rp.call(this,"lightUniformDataNd_"+t.nextNodeId,t),this.light=null,this.uPosition_0=new wd("u"+this.name+"_pos"),this.uColor_0=new wd("u"+this.name+"_color"),this.uDirection_0=new wd("u"+this.name+"_dir"),this.outLightPos=new op(new zu(this.uPosition_0.name),this),this.outLightColor=new op(new zu(this.uColor_0.name),this),this.outLightDir=new op(new zu(this.uDirection_0.name),this)}function tu(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uPosition_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uColor_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uDirection_0}}(t)),e.onUpdate=function(t){return function(e,i){return t.encodeLightSetup_0(),s}}(t),s}}function eu(t){rp.call(this,"lightNd_"+t.nextNodeId,t),this.inLightPos=new op(new ju(Qr().ZERO)),this.inLightColor=new op(new ju(Qr().ZERO)),this.inLightDir=new op(new ju(new Yr(1,0,0,60))),this.inShaodwFac=new op(new Pu(1)),this.inFragPos=new op(new Mu(Er().ZERO)),this.inSpotInnerAngle=new op(new Pu(.8)),this.outLightCount=new op(new Au(1),this),this.outFragToLightDirection=new op(new wu(this.name+"_outLightDirs"),this),this.outRadiance=new op(new wu(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function iu(t){rp.call(this,"pointLightNd_"+t.nextNodeId,t),this.inLightPos=new op(new ju(Qr().ZERO)),this.inLightColor=new op(new ju(Qr().ZERO)),this.inShadowFac=new op(new Pu(1)),this.inFragPos=new op(new Mu(Er().ZERO)),this.outLightCount=new op(new Au(1),this),this.outFragToLightDirection=new op(new wu(this.name+"_outLightDirs"),this),this.outRadiance=new op(new wu(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function nu(t){rp.call(this,"spotLightNd_"+t.nextNodeId,t),this.inLightPos=new op(new ju(Qr().ZERO)),this.inLightColor=new op(new ju(Qr().ZERO)),this.inLightDir=new op(new ju(new Yr(1,0,0,60))),this.inShadowFac=new op(new Pu(1)),this.inFragPos=new op(new Mu(Er().ZERO)),this.inSpotInnerAngle=new op(new Pu(.8)),this.outLightCount=new op(new Au(1),this),this.outFragToLightDirection=new op(new wu(this.name+"_outLightDirs"),this),this.outRadiance=new op(new wu(this.name+"_outRadiance"),this),this.isReducedSoi=!1}function ru(t){rp.call(this,"Unlit Material",t,hc().mask),this.inColor=new op(new ju(Oy().MAGENTA)),this.outColor=new op(new zu("unlitMat_outColor"),this)}function ou(t){rp.call(this,"Phong Material",t,hc().mask),this.inAlbedo=new op(new ju(Oy().MAGENTA)),this.inNormal=new op(new Mu(Er().Z_AXIS)),this.inFragPos=new op(new Mu(Er().ZERO)),this.inCamPos=new op(new Mu(Er().ZERO)),this.inLightCount=new op(new Au(1)),this.inFragToLight=new op(new Mu(Er().Y_AXIS)),this.inRadiance=new op(new Mu(Tr(1))),this.inAmbient=new op(new Mu(Tr(.22))),this.inShininess=new op(new Pu(20)),this.inSpecularIntensity=new op(new Pu(1)),this.outColor=new op(new zu("phongMat_outColor"),this),this.lightBacksides=!1}function su(t,e,i){rp.call(this,"pbrMaterial",i,hc().mask),this.reflectionMap=t,this.brdfLut=e,this.inAlbedo=new op(new ju(Oy().MAGENTA)),this.inEmissive=new op(new ju(Oy().BLACK)),this.inNormal=new op(new Mu(Er().Z_AXIS)),this.inFragPos=new op(new Mu(Er().ZERO)),this.inViewDir=new op(new Mu(Er().ZERO)),this.inMetallic=new op(new Pu(0)),this.inRoughness=new op(new Pu(.1)),this.inAmbientOccl=new op(new Pu(1)),this.inLightCount=new op(new Au(0)),this.inFragToLight=new op(new Mu(Er().Y_AXIS)),this.inRadiance=new op(new Mu(Tr(0))),this.inIrradiance=new op(new Mu(Tr(.03))),this.inReflectionStrength=new op(new Pu(1)),this.inReflectionColor=new op(new Mu(Er().ZERO)),this.inReflectionWeight=new op(new Pu(0)),this.outColor=new op(new zu("pbrMat_outColor"),this),this.lightBacksides=!1}function au(t){rp.call(this,"pbrLightNode",t,hc().mask),this.inAlbedo=new op(new ju(Oy().MAGENTA)),this.inNormal=new op(new Mu(Er().Z_AXIS)),this.inFragPos=new op(new Mu(Er().ZERO)),this.inCamPos=new op(new Mu(Er().ZERO)),this.inMetallic=new op(new Pu(0)),this.inRoughness=new op(new Pu(.1)),this.inFragToLight=new op(new Mu(Er().Y_AXIS)),this.inRadiance=new op(new Mu(Tr(1))),this.inIrradiance=new op(new Mu(Tr(.03))),this.outColor=new op(new zu("pbrLight_outColor"),this),this.lightBacksides=!1}function lu(t,e){rp.call(this,"multiply_"+e.nextNodeId,e),this.left_8p0ptp$_0=new op(new Mu(Er().X_AXIS)),this.right=new op(new Pu(1)),this.output_q2fkhv$_0=new op(new wu(t+"_out"),this)}function uu(t){lu.call(this,"add_"+t.nextNodeId,t)}function pu(t){lu.call(this,"add_"+t.nextNodeId,t)}function cu(t){lu.call(this,"divide_"+t.nextNodeId,t)}function hu(t){lu.call(this,"multiply_"+t.nextNodeId,t)}function du(t){lu.call(this,"mix_"+t.nextNodeId,t),this.mixFac=new op(new Pu(.5))}function fu(t){rp.call(this,"vecFromColor_"+t.nextNodeId,t),this.input=new op(new Mu(Er().X_AXIS)),this.output=new op(new wu(this.name+"_out"),this)}function _u(t){rp.call(this,"dist_"+t.nextNodeId,t),this.inA=new op(new Mu(Er().ZERO)),this.inB=new op(new Mu(Er().ZERO)),this.output=new op(new bu(this.name+"_out"),this)}function mu(t){rp.call(this,"normalize_"+t.nextNodeId,t),this.input=new op(new Mu(Er().X_AXIS)),this.output=new op(new wu(this.name+"_out"),this)}function $u(t){rp.call(this,"viewDir_"+t.nextNodeId,t),this.inCamPos=new op(new Mu(Er().Z_AXIS)),this.inWorldPos=new op(new Mu(Er().ZERO)),this.output=new op(new wu(this.name+"_out"),this)}function yu(t){rp.call(this,"reflect_"+t.nextNodeId,t),this.inDirection=new op(new Mu(Er().X_AXIS)),this.inNormal=new op(new Mu(Er().Y_AXIS)),this.outDirection=new op(new wu(this.name+"_out"),this)}function vu(t){rp.call(this,"refract_"+t.nextNodeId,t),this.inDirection=new op(new Mu(Er().X_AXIS)),this.inNormal=new op(new Mu(Er().Y_AXIS)),this.inIor=new op(new Pu(1.4)),this.outDirection=new op(new wu(this.name+"_out"),this)}function gu(t,e,i){void 0===i&&(i=!1),this.name=t,this.type=e,this.isArray=i}function bu(t){gu.call(this,t,Qo())}function xu(t){gu.call(this,t,ts())}function wu(t){gu.call(this,t,es())}function zu(t){gu.call(this,t,is())}function ku(t){gu.call(this,t,es(),!0)}function Su(t){gu.call(this,t,ns())}function Cu(t){gu.call(this,t,rs())}function Nu(t){gu.call(this,t,os())}function Eu(t){gu.call(this,t,ss())}function Tu(t){gu.call(this,t,us())}function Pu(t){bu.call(this,"_"),this.value=t}function Ou(t){xu.call(this,"_"),this.value=t}function Mu(t){wu.call(this,"_"),this.value=t}function ju(t){zu.call(this,"_"),this.value=t}function Au(t){Su.call(this,"_"),this.value=t}function Iu(t){Cu.call(this,"_"),this.value=t}function Ru(t){Nu.call(this,"_"),this.value=t}function Lu(t){Eu.call(this,"_"),this.value=t}function Du(t,e,i){void 0===i&&(i=!1),rp.call(this,"tex1d_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.premultiply=i,this.inTexCoord=new op(new Pu(0)),this.outColor=new op(new zu(this.name+"_outColor"),this),this.texLod=null}function qu(t,e,i){void 0===i&&(i=!1),rp.call(this,"tex2d_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.premultiply=i,this.inTexCoord=new op(new Ou(ar().ZERO)),this.outColor=new op(new zu(this.name+"_outColor"),this),this.texLod=null}function Fu(t,e,i){void 0===i&&(i=!1),rp.call(this,"tex3d_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.premultiply=i,this.inTexCoord=new op(new Mu(Er().ZERO)),this.outColor=new op(new zu(this.name+"_outColor"),this),this.texLod=null}function Bu(t,e,i){void 0===i&&(i=!1),rp.call(this,"cubeSampler_"+t.name+"_"+e.nextNodeId,e),this.cubeMap=t,this.premultiply=i,this.inTexCoord=new op(new Mu(Er().NEG_X_AXIS)),this.outColor=new op(new zu(this.name+"_outColor"),this),this.texLod=null}function Uu(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),rp.call(this,"equi_rect_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.decodeRgbe=i,this.premultiply=n,this.inTexCoord=new op(new Mu(Er().X_AXIS)),this.outColor=new op(new zu(this.name+"_outColor"),this),this.texLod=null}function Vu(t,e){rp.call(this,"noise_sampler_"+t.name+"_"+e.nextNodeId,e),this.texture=t,this.inTexSize=new op(new Iu(new vr(16,16))),this.outNoise=new op(new zu(this.name+"_outNoise"),this)}function Gu(t,e){rp.call(this,"aoMapSampleNode_"+e.nextNodeId,e),this.aoMap=t,this.inViewport=new op(new ju(Qr().ZERO)),this.outAo=new op(new bu(this.name+"_outAo"),this)}function Hu(t,e){rp.call(this,"normalMapping_"+e.nextNodeId,e),this.texture=t,this.inTexCoord=new op(new Ou(ar().NEG_X_AXIS)),this.inNormal=new op(new Mu(Er().Y_AXIS)),this.inTangent=new op(new Mu(Er().X_AXIS)),this.inStrength=new op(new Pu(1)),this.outNormal=new op(new wu(this.name+"_outNormal"),this)}function Wu(t,e){rp.call(this,"dispMap_"+e.nextNodeId,e),this.texture=t,this.inTexCoord=new op(new Ou(ar().NEG_X_AXIS)),this.inNormal=new op(new Mu(Er().Y_AXIS)),this.inPosition=new op(new Mu(Er().ZERO)),this.inStrength=new op(new Pu(.1)),this.outPosition=new op(new wu(this.name+"_outPos"),this)}function Xu(t){rp.call(this,"refractionSampler_"+t.nextNodeId,t),this.reflectionMap=null,this.refractionColor_dpnwa6$_0=this.refractionColor_dpnwa6$_0,this.viewProj_5bee0e$_0=this.viewProj_5bee0e$_0,this.inMaterialThickness=new op(new Pu(1)),this.inRefractionDir=new op(new Mu(Er().ZERO)),this.inFragPos=new op(new Mu(Er().ZERO)),this.outColor=new op(new zu(this.name+"_outColor"),this)}function Ku(){}function Yu(t,e,i,n){void 0===n&&(n=1),this.location=t,this.variable=e,this.isFlat=i,this.locationInc=n}function Zu(t,e){this.model=t,this.stage=e,this.descriptorSet=new Ls,this.pushConstants=new jl,this.inputs=M(),this.mutOutputs_rh28ou$_0=M(),this.mutNodes=M(),this.nextNodeId_bjjntk$_0=1}function Ju(t){Zu.call(this,t,lc()),this.requiredVertexAttributes=ht(),this.requiredInstanceAttributes=ht(),this.positionOutput=new op(new ju(Qr().ZERO),null)}function Qu(t){Zu.call(this,t,hc())}function tp(t){void 0===t&&(t=""),this.modelInfo=t,this.stages=Et([_t(lc(),new Ju(this)),_t(hc(),new Qu(this))]),this.dumpCode=!1}function ep(t){this.stage=t}function ip(t){this.$outer=t,ep.call(this,this.$outer.vertexStageGraph)}function np(t){this.$outer=t,ep.call(this,this.$outer.fragmentStageGraph)}function rp(t,e,i){var n,r;void 0===i&&(i=dc().mask),this.name=t,this.graph=e,this.allowedStages=i,this.dependencies=ht(),n=(r=this.graph).nextNodeId,r.nextNodeId=n+1|0,this.nodeId=n}function op(t,e){void 0===e&&(e=null),this.variable=t,this.node=e}function sp(){this.lightIndex=0,this.depthMap_25rtms$_0=null}function ap(t,e,i){sp.call(this),this.ifPosLightSpace_0=new Jp("posLightSpace_"+e.nextNodeId,e,i),this.vertexNode=new lp(t,e),this.fragmentNode=new pp(t,i),this.lightIndex=t.lightIndex,e.addNode_j0v1fw$(this.ifPosLightSpace_0.vertexNode),i.addNode_j0v1fw$(this.ifPosLightSpace_0.fragmentNode),this.ifPosLightSpace_0.input=this.vertexNode.outPosLightSpace,this.fragmentNode.inPosLightSpace=this.ifPosLightSpace_0.output}function lp(t,e){rp.call(this,"lightSpaceTf_"+e.nextNodeId,e),this.shadowMap=t,this.uShadowMapVP=new Td(this.name+"_shadowMapVP"),this.inWorldPos=new op(new Mu(Er().ZERO)),this.outPosLightSpace=new op(new zu(this.name+"_posLightSpace"),this)}function up(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uShadowMapVP}}(t)),e.onUpdate=function(t){return function(e,i){return t.uShadowMapVP.value.set_d4zu6l$(t.shadowMap.lightViewProjMat),s}}(t),s}}function pp(t,e){rp.call(this,"shadowMap_"+e.nextNodeId,e,hc().mask),this.depthMap=null,this.inDepthOffset=new op(new Pu(t.optimizeForDirectionalLight?-.001:-.005)),this.inPosLightSpace=new op(new ju(Qr().ZERO)),this.outShadowFac=new op(new bu(this.name+"_shadowFac"),this),this.useDithering=!1}function cp(t,e,i){sp.call(this),this.shadowMap=t,this.vertexGraph=e,this.fragmentGraph=i,this.inViewPosition=new op(new Mu(Er().ZERO)),this.vertexNode=new dp(this.shadowMap,this.vertexGraph),this.fragmentNode=new _p(this.shadowMap,this.fragmentGraph),this.helperNd_0=new hp(this,this.vertexGraph),this.posLightSpace_0=new op(new zu("ifPosLightSpace_"+this.vertexGraph.nextNodeId+"["+this.shadowMap.numCascades+"]")),this.ifViewZ_0=new op(new bu("outViewZ_"+this.helperNd_0.nodeId)),this.lightIndex=this.shadowMap.lightIndex,this.vertexGraph.addNode_j0v1fw$(this.helperNd_0),this.fragmentNode.inPosLightSpace=this.posLightSpace_0,this.fragmentNode.inViewZ=this.ifViewZ_0}function hp(t,e){this.$outer=t,rp.call(this,"cascadedShadowHelper_"+e.nextNodeId,e)}function dp(t,e){rp.call(this,"lightSpaceTf_"+e.nextNodeId,e),this.shadowMap=t,this.uShadowMapVP=new Pd(this.name+"_shadowMapVPs",this.shadowMap.numCascades),this.inWorldPos=new op(new Mu(Er().ZERO)),this.outPosLightSpace=new op(new zu(this.name+"_posLightSpace["+this.shadowMap.numCascades+"]"),this)}function fp(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uShadowMapVP}}(t)),e.onUpdate=function(t){return function(e,i){var n;n=t.shadowMap.numCascades;for(var r=0;r<n;r++)t.uShadowMapVP.value[r].set_d4zu6l$(t.shadowMap.cascades[r].lightViewProjMat);return s}}(t),s}}function _p(t,e){rp.call(this,"cascadedShadowMap_"+e.nextNodeId,e,hc().mask),this.shadowMap=t,this.uViewSpaceRanges_0=new kd("uClipSpaceRanges_"+this.name,this.shadowMap.numCascades),this.depthMap=null,this.inDepthOffset=new op(new Pu(-.0025)),this.inPosLightSpace=new op(new ju(Qr().ZERO)),this.inViewZ=new op(new Pu(0)),this.outShadowFac=new op(new bu(this.name+"_shadowFac"),this),this.useDithering=!1}function mp(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewSpaceRanges_0}}(t)),e.onUpdate=function(t){return function(e,i){var n;n=t.shadowMap.numCascades;for(var r=0;r<n;r++)t.uViewSpaceRanges_0.value[r]=t.shadowMap.viewSpaceRanges[r];return s}}(t),s}}function $p(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),rp.call(this,"vec3MatTransform",t),this.w=e,this.invert=i,this.inMat=null,this.inVec=new op(new Mu(Er().ZERO)),this.outVec3=new op(new wu("vec3MatTransform"+this.nodeId+"_out"),this)}function yp(t,e){void 0===e&&(e=1),rp.call(this,"vec4MatTransform",t),this.w=e,this.inMat=null,this.inVec=new op(new Mu(Er().ZERO)),this.outVec4=new op(new zu("vec4MatTransform"+this.nodeId+"_out"),this)}function vp(t,e){rp.call(this,"skinTransform_"+t.nextNodeId,t),this.inJoints=new op(new Lu(So().ZERO)),this.inWeights=new op(new ju(Qr().X_AXIS)),this.uJointTransforms=new Pd("uJointTransforms",e),this.outJointMat=new op(new Tu(this.name+"_outMat"),this)}function gp(t){return function(e){var i=e.stages,n=t.graph.stage;return i.add_11rb$(n),e.unaryPlus_wq3w46$(function(t){return function(){return t.uJointTransforms}}(t)),e.onUpdate=function(t){return function(e,i){var n;if(null!=(n=i.mesh.skin)){var r,o=t,a=n.nodes.size,l=o.uJointTransforms.length;r=A.min(a,l);for(var u=0;u<r;u++){var p=n.nodes.get_za3lpa$(u);o.uJointTransforms.value[u].set_d4zu6j$(p.jointTransform)}}return s}}(t),s}}function bp(t){rp.call(this,"UboPremultipliedMvp",t),this.uMvp=new Td("modelViewProj"),this.outMvpMat=new op(new Tu(this.uMvp.name),this),this.visibleIn_0=Rt([t.stage])}function xp(t){return function(e){return wt(e.stages,t.visibleIn_0),e.unaryPlus_wq3w46$(function(t){return function(){return t.uMvp}}(t)),e.onUpdate=function(t){return function(e,i){return t.uMvp.value.set_d4zu6j$(i.mvpMat),s}}(t),s}}function wp(t,e){this.$outer=t,rp.call(this,"UboPremultipliedMvp.copy",e),this.outMvpMat=new op(new Tu(this.$outer.uMvp.name),this)}function zp(t){rp.call(this,"UboMvp",t),this.uModelMat=new Td("uModelMat"),this.uViewMat=new Td("uViewMat"),this.uProjMat=new Td("uProjMat"),this.uCamPos=new wd("uCamPos"),this.uViewport=new wd("uViewport"),this.outModelMat=new op(new Tu(this.uModelMat.name),this),this.outViewMat=new op(new Tu(this.uViewMat.name),this),this.outProjMat=new op(new Tu(this.uProjMat.name),this),this.outCamPos=new op(new zu(this.uCamPos.name),this),this.outViewport=new op(new zu(this.uViewport.name),this),this.outMvpMat=new op(new Tu("uMvp_outMvp"),this),this.visibleIn_0=Rt([t.stage])}function kp(t){return function(e){return wt(e.stages,t.visibleIn_0),e.unaryPlus_wq3w46$(function(t){return function(){return t.uModelMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uProjMat}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uCamPos}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewport}}(t)),e.onUpdate=function(t){return function(e,i){t.uModelMat.value.set_d4zu6j$(i.modelMat),t.uViewMat.value.set_d4zu6j$(i.viewMat),t.uProjMat.value.set_d4zu6j$(i.projMat),t.uCamPos.value.set_2qa7tb$(i.renderPass.camera.globalPos,1);var n=i.renderPass.viewport;return t.uViewport.value.set_7b5o5w$(n.x,n.ySigned,n.width,n.heightSigned),s}}(t),s}}function Sp(t,e){this.$outer=t,rp.call(this,"UboPremultipliedMvp.copy",e),this.outModelMat=new op(new Tu(this.$outer.uModelMat.name),this),this.outViewMat=new op(new Tu(this.$outer.uViewMat.name),this),this.outProjMat=new op(new Tu(this.$outer.uProjMat.name),this),this.outCamPos=new op(new zu(this.$outer.uCamPos.name),this),this.outViewport=new op(new zu(this.$outer.uViewport.name),this),this.outMvpMat=new op(new Tu("uMvp_outMvp"),this)}function Cp(t,e){rp.call(this,e,t),this.visibleIn=Rt([t.stage]),this.sampler_2qaow3$_0=this.sampler_2qaow3$_0,this.arraySize=1,this.isDepthTexture=!1}function Np(t){return function(e){return e.arraySize=t.arraySize,e.isDepthSampler=t.isDepthTexture,wt(e.stages,t.visibleIn),e.onCreate=function(t){return function(e){return t.sampler=e,s}}(t),s}}function Ep(t,e){rp.call(this,e,t),this.visibleIn=Rt([t.stage]),this.sampler_m79dj2$_0=this.sampler_m79dj2$_0,this.arraySize=1,this.isDepthTexture=!1}function Tp(t){return function(e){return e.arraySize=t.arraySize,e.isDepthSampler=t.isDepthTexture,wt(e.stages,t.visibleIn),e.onCreate=function(t){return function(e){return t.sampler=e,s}}(t),s}}function Pp(t,e){rp.call(this,e,t),this.visibleIn=Rt([t.stage]),this.sampler_nwam0x$_0=this.sampler_nwam0x$_0,this.arraySize=1}function Op(t){return function(e){return e.arraySize=t.arraySize,wt(e.stages,t.visibleIn),e.onCreate=function(t){return function(e){return t.sampler=e,s}}(t),s}}function Mp(t,e){rp.call(this,e,t),this.visibleIn=Rt([t.stage]),this.sampler_uy3n45$_0=this.sampler_uy3n45$_0,this.arraySize=1}function jp(t){return function(e){return e.arraySize=t.arraySize,wt(e.stages,t.visibleIn),e.onCreate=function(t){return function(e){return t.sampler=e,s}}(t),s}}function Ap(t,i){if(rp.call(this,"morphWeights_"+i.nextNodeId,i),this.nWeights=t,this.uWeights0_0=new wd(this.name+"_w0"),this.uWeights1_0=new wd(this.name+"_w1"),this.outWeights0=new op(new zu(this.uWeights0_0.name)),this.outWeights1=new op(new zu(this.uWeights1_0.name)),this.nWeights>8){var n=DE.Log,r=$k.ERROR,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"Currently only up to 8 morph target attributes are supported")}}function Ip(t,e){rp.call(this,t,e),this.visibleIn=Rt([e.stage]),this.onUpdate=null}function Rp(t,e){Ip.call(this,t.name,e),this.uniform_24s88i$_0=t,this.output_6ls89f$_0=new op(new bu(this.name),this)}function Lp(t,e){Ip.call(this,t.name,e),this.uniform_rl2ob1$_0=t,this.output_9us71w$_0=new op(new xu(this.name),this)}function Dp(t,e){Ip.call(this,t.name,e),this.uniform_dq6h4k$_0=t,this.output_d3s5ud$_0=new op(new wu(this.name),this)}function qp(t,e){Ip.call(this,t.name,e),this.uniform_fzofez$_0=t,this.output_gcs4mu$_0=new op(new zu(this.name),this)}function Fp(t,e){Ip.call(this,t.name,e),this.uniform_o737wi$_0=t,this.output_yy7l5r$_0=new op(new zu(this.name),this)}function Bp(t,e){Ip.call(this,t.name,e),this.uniform_7m7o4x$_0=t,this.output_p908nk$_0=new op(new Su(this.name),this)}function Up(t,e){Ip.call(this,t.name,e),this.uniform_xp1hao$_0=t,this.output_si07g1$_0=new op(new Cu(this.name),this)}function Vp(t,e){Ip.call(this,t.name,e),this.uniform_3z6kr5$_0=t,this.output_vr068i$_0=new op(new Nu(this.name),this)}function Gp(t,e){Ip.call(this,t.name,e),this.uniform_pqobse$_0=t,this.output_z0050z$_0=new op(new Eu(this.name),this)}function Hp(t){rp.call(this,"flipBacksideNormal_"+t.nextNodeId,t,hc().mask),this.inNormal=new op(new Mu(Er().Y_AXIS)),this.outNormal=new op(new wu(this.name+"_outNormal"),this)}function Wp(t,e){var i;switch(rp.call(this,"split_"+e.nextNodeId,e),this.outChannels=t,this.input=new op(new ju(Qr().ZERO)),this.outChannels.length){case 1:i=new op(new bu(this.name+"_out"),this);break;case 2:i=new op(new xu(this.name+"_out"),this);break;case 3:i=new op(new wu(this.name+"_out"),this);break;case 4:i=new op(new zu(this.name+"_out"),this);break;default:throw G("outChannels parameter must be between 1 and 4 characters long (e.g. 'xyz')")}this.output=i}function Xp(t,e){var i;switch(rp.call(this,"combine_"+e.nextNodeId,e),this.inX=new op(new Pu(0)),this.inY=new op(new Pu(0)),this.inZ=new op(new Pu(0)),this.inW=new op(new Pu(0)),t.name){case"VEC_2F":i=new op(new xu(this.name+"_out"),this);break;case"VEC_3F":i=new op(new wu(this.name+"_out"),this);break;case"VEC_4F":i=new op(new zu(this.name+"_out"),this);break;default:throw G("Only allowed out types are VEC_2F, VEC_3F and VEC_4F")}this.output=i}function Kp(t){rp.call(this,"combine31_"+t.nextNodeId,t),this.inXyz=new op(new Mu(Er().ZERO)),this.inW=new op(new Pu(0)),this.output=new op(new zu(this.name+"_out"),this)}function Yp(t,e){rp.call(this,t.name,e,lc().mask),this.attribute=t,this.output=new op(new gu(this.attribute.name,this.attribute.type),this)}function Zp(t,e){rp.call(this,t.name,e,lc().mask),this.attribute=t,this.output=new op(new gu(this.attribute.name,this.attribute.type),this)}function Jp(t,e,i){this.name=t,this.input_h7hmfg$_0=new op(new Pu(0)),this.output_ftovqj$_0=new op(new bu(this.name)),this.isFlat=!1,this.ifVar_hcczpo$_0=this.ifVar_hcczpo$_0,this.vertexNode=new Qp(this,e),this.fragmentNode=new tc(this,i)}function Qp(t,e){this.$outer=t,rp.call(this,this.$outer.name,e,lc().mask),this.ifNode=this.$outer}function tc(t,e){this.$outer=t,rp.call(this,this.$outer.name,e,hc().mask),this.ifNode=this.$outer}function ec(t){rp.call(this,"screenCoord_"+t.nextNodeId,t,hc().mask),this.inViewport=new op(new ju(Qr().ZERO)),this.outScreenCoord=new op(new zu("gl_FragCoord"),this),this.outNormalizedScreenCoord=new op(new wu(this.name+"_outNormalizedCoord"),this)}function ic(t){rp.call(this,"fullScreenQuad_"+t.nextNodeId,t),this.inTexCoord=new op(new Ou(ar().ZERO)),this.inDepth=new op(new Pu(.999)),this.outQuadPos=new op(new zu(this.name+"_outPos"),this)}function nc(t,e){rp.call(this,"getMorphWeight_"+e.nextNodeId,e),this.iWeight=t,this.inWeights0=new op(new ju(Qr().ZERO)),this.inWeights1=new op(new ju(Qr().ZERO)),this.outWeight=new op(new bu(this.name+"_outW"),this)}function rc(t,e){rp.call(this,t,e),this.input_llsvnw$_0=new op(new Pu(0)),this.output_a35q23$_0=new op(new gu(t,Qo()),this)}function oc(t){rp.call(this,"pointSz",t,lc().mask),this.inSize=new op(new Pu(1))}function sc(t,e,i){T.call(this),this.mask=i,this.name$=t,this.ordinal$=e}function ac(){ac=function(){},Ja=new sc("VERTEX_SHADER",0,1),Qa=new sc("TESSELEATION_CTRL",1,2),tl=new sc("TESSELATION_EVAL",2,4),el=new sc("GEOMETRY_SHADER",3,8),il=new sc("FRAGMENT_SHADER",4,16),nl=new sc("ALL",5,-1)}function lc(){return ac(),Ja}function uc(){return ac(),Qa}function pc(){return ac(),tl}function cc(){return ac(),el}function hc(){return ac(),il}function dc(){return ac(),nl}function fc(t,e){T.call(this),this.name$=t,this.ordinal$=e}function _c(){_c=function(){},rl=new fc("CUBE_MAP_ALBEDO",0),ol=new fc("STATIC_ALBEDO",1),sl=new fc("TEXTURE_ALBEDO",2),al=new fc("VERTEX_ALBEDO",3)}function mc(){return _c(),rl}function $c(){return _c(),ol}function yc(){return _c(),sl}function vc(){return _c(),al}function gc(){}function bc(){gc.call(this)}function xc(){gc.call(this)}function wc(t){gc.call(this),this.cutOff=t}function zc(t){Pc(),Ll.call(this),this.model=t}function kc(t,e){void 0===t&&(t=Oy().GRAY),void 0===e&&(e=Pc().staticColorModel_0()),zc.call(this,e),this.uColor_0=null,this.color_cjijrc$_0=t}function Sc(t){void 0===t&&(t=Pc().vertexColorModel_0()),zc.call(this,t)}function Cc(t,e,i){void 0===t&&(t=null),void 0===e&&(e="colorTex"),void 0===i&&(i=Pc().textureColorModel_0(e)),zc.call(this,i),this.texName_0=e,this.textureSampler_0=null,this.texture_smcrab$_0=t}function Nc(t,e,i){void 0===t&&(t=null),void 0===e&&(e="cubeMap"),void 0===i&&(i=Pc().cubeMapColorModel_0(e)),zc.call(this,i),this.texName_0=e,this.cubeMapSampler_0=null,this.texture_mz7wkp$_0=t}function Ec(){Tc=this}Ea.$metadata$={kind:$,simpleName:"Pipeline",interfaces:[]},pl.$metadata$={kind:$,simpleName:"BlendMode",interfaces:[T]},pl.values=function(){return[hl(),dl(),fl(),_l()]},pl.valueOf_61zpoe$=function(t){switch(t){case"DISABLED":return hl();case"BLEND_ADDITIVE":return dl();case"BLEND_MULTIPLY_ALPHA":return fl();case"BLEND_PREMULTIPLIED_ALPHA":return _l();default:P("No enum constant de.fabmax.kool.pipeline.BlendMode."+t)}},ml.$metadata$={kind:$,simpleName:"DepthCompareOp",interfaces:[T]},ml.values=function(){return[yl(),vl(),gl(),bl(),xl(),wl(),zl(),kl(),Sl()]},ml.valueOf_61zpoe$=function(t){switch(t){case"DISABLED":return yl();case"ALWAYS":return vl();case"NEVER":return gl();case"LESS":return bl();case"LESS_EQUAL":return xl();case"GREATER":return wl();case"GREATER_EQUAL":return zl();case"EQUAL":return kl();case"NOT_EQUAL":return Sl();default:P("No enum constant de.fabmax.kool.pipeline.DepthCompareOp."+t)}},Cl.$metadata$={kind:$,simpleName:"CullMethod",interfaces:[T]},Cl.values=function(){return[El(),Tl(),Pl(),Ol()]},Cl.valueOf_61zpoe$=function(t){switch(t){case"DEFAULT":return El();case"CULL_BACK_FACES":return Tl();case"CULL_FRONT_FACES":return Pl();case"NO_CULLING":return Ol();default:P("No enum constant de.fabmax.kool.pipeline.CullMethod."+t)}},Ml.prototype.toBuffer=function(){return this.layout_0.putTo_l6oshk$(this.buffer_0),this.buffer_0.flip(),this.buffer_0},jl.prototype.unaryPlus_wq3w46$=function(t){this.pushConstants.add_11rb$(t)},jl.prototype.create=function(){for(var t=this.pushConstants.size,i=w(t),n=0;n<t;n++)i.add_11rb$(this.pushConstants.get_za3lpa$(n)());var r,o,s=i,a=st(this.name),l={v:new kt(e.Long.fromInt(a))};for(r=this.stages.iterator();r.hasNext();){var u=r.next(),p=l.v,c=new kt(e.Long.fromInt(71023)),h=new kt(p.data.multiply(c.data)),d=u.hashCode(),f=new kt(e.Long.fromInt(d));l.v=new kt(h.data.add(f.data))}for(o=s.iterator();o.hasNext();){var _=o.next(),m=l.v,$=new kt(e.Long.fromInt(71023)),y=new kt(m.data.multiply($.data)),v=e.getKClassFromExpression(_).hashCode(),g=new kt(e.Long.fromInt(v));l.v=new kt(y.data.add(g.data));var b=l.v,x=new kt(e.Long.fromInt(71023)),z=new kt(b.data.multiply(x.data)),k=st(_.name),S=new kt(e.Long.fromInt(k));l.v=new kt(z.data.add(S.data))}return new Ml(this,l.v,s)},jl.prototype.clear=function(){this.stages.clear(),this.pushConstants.clear()},jl.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Ml.$metadata$={kind:$,simpleName:"PushConstantRange",interfaces:[]},Object.defineProperty(Al.prototype,"clearColors",{configurable:!0,get:function(){return this.clearColors_ynhttt$_0},set:function(t){this.clearColors_ynhttt$_0=t}}),Object.defineProperty(Al.prototype,"clearColor",{configurable:!0,get:function(){return this.clearColors[0]},set:function(t){this.clearColors[0]=t}}),Object.defineProperty(Al.prototype,"drawQueue",{configurable:!0,get:function(){return this.drawQueue_mxdtqn$_0},set:function(t){this.drawQueue_mxdtqn$_0=t}}),Al.prototype.updateEvent_nkvecu$_0=function(t){var e,i;if(null!=(e=this.updateEvent_2t7tkj$_0))i=e;else{var n=new Il(this,t);this.updateEvent_2t7tkj$_0=n,i=n}return i},Al.prototype.dependsOn_yqp8fe$=function(t){this.dependencies.add_11rb$(t)},Al.prototype.update_aemszp$=function(t){this.isUpdateDrawNode&&this.drawNode.update_kma0q5$(this.updateEvent_nkvecu$_0(t))},Al.prototype.collectDrawCommands_aemszp$=function(t){this.beforeCollectDrawCommands_aemszp$(t),this.drawNode.collectDrawCommands_kma0q5$(this.updateEvent_nkvecu$_0(t)),this.afterCollectDrawCommands_aemszp$(t)},Al.prototype.addMesh_sbx4mf$=function(t,e){return this.drawQueue.addMesh_sbx4mf$(t,e)},Al.prototype.beforeCollectDrawCommands_aemszp$=function(t){var e;this.drawQueue.clear(),e=this.onBeforeCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onBeforeCollectDrawCommands.get_za3lpa$(i)(t);this.camera.updateCamera_fd1mc0$(t,this.viewport)},Al.prototype.afterCollectDrawCommands_aemszp$=function(t){var e;e=this.onAfterCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onAfterCollectDrawCommands.get_za3lpa$(i)(t)},Al.prototype.afterDraw_aemszp$=function(t){var e;e=this.onAfterDraw;for(var i=0;i!==e.size;++i)this.onAfterDraw.get_za3lpa$(i)(t)},Al.prototype.dispose_aemszp$=function(t){},Object.defineProperty(Il.prototype,"time",{configurable:!0,get:function(){return this.ctx.time}}),Object.defineProperty(Il.prototype,"deltaT",{configurable:!0,get:function(){return this.ctx.deltaT}}),Object.defineProperty(Il.prototype,"frameIndex",{configurable:!0,get:function(){return this.ctx.frameIdx}}),Object.defineProperty(Il.prototype,"camera",{configurable:!0,get:function(){return this.renderPass.camera}}),Object.defineProperty(Il.prototype,"viewport",{configurable:!0,get:function(){return this.renderPass.viewport}}),Il.prototype.component1=function(){return this.renderPass},Il.prototype.component2=function(){return this.ctx},Il.$metadata$={kind:$,simpleName:"UpdateEvent",interfaces:[]},Al.$metadata$={kind:$,simpleName:"RenderPass",interfaces:[]},Object.defineProperty(Rl.prototype,"camera",{configurable:!0,get:function(){return this.scene.camera}}),Rl.prototype.collectDrawCommands_aemszp$=function(t){this.useWindowViewport&&t.getWindowViewport_ahq5yh$(this.viewport),Al.prototype.collectDrawCommands_aemszp$.call(this,t)},Rl.$metadata$={kind:$,simpleName:"ScreenRenderPass",interfaces:[Al]},Ll.prototype.createPipeline_sbx4mf$=function(t,e){var i=new Pa;i.vertexLayout.primitiveType=t.geometry.primitiveType,this.onPipelineSetup_x08qbx$(i,t,e);var n=i.create();return this.onPipelineCreated_vp7qhs$(n,t,e),n},Ll.prototype.onPipelineSetup_x08qbx$=function(t,e,i){var n;for(n=this.onPipelineSetup.iterator();n.hasNext();)n.next()(t,e,i)},Ll.prototype.onPipelineCreated_vp7qhs$=function(t,e,i){var n;for(n=this.onPipelineCreated.iterator();n.hasNext();)n.next()(t,e,i)},Ll.$metadata$={kind:$,simpleName:"Shader",interfaces:[]},Dl.prototype.sampleTexture1d_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTexture1d_buzeal$$default(t,e,i)},Dl.prototype.sampleTexture2d_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTexture2d_buzeal$$default(t,e,i)},Dl.prototype.sampleTexture3d_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTexture3d_buzeal$$default(t,e,i)},Dl.prototype.sampleTextureCube_buzeal$=function(t,e,i,n){return void 0===i&&(i=null),n?n(t,e,i):this.sampleTextureCube_buzeal$$default(t,e,i)},ql.$metadata$={kind:$,simpleName:"ClipSpaceOrientation",interfaces:[T]},ql.values=function(){return[Bl(),Ul()]},ql.valueOf_61zpoe$=function(t){switch(t){case"Y_UP":return Bl();case"Y_DOWN":return Ul();default:P("No enum constant de.fabmax.kool.pipeline.shadermodel.CodeGenerator.ClipSpaceOrientation."+t)}},Dl.$metadata$={kind:Y,simpleName:"CodeGenerator",interfaces:[]},Vl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inAlpha])},Vl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outAlphaColor.declare()+" = vec4("+this.inColor.ref3f_61zpoe$()+", "+this.inColor.ref4f_61zpoe$()+".a * "+this.inAlpha.ref1f_61zpoe$()+");\n            ")},Vl.$metadata$={kind:$,simpleName:"ColorAlphaNode",interfaces:[rp]},Gl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inColor)},Gl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4("+this.inColor.ref3f_61zpoe$()+" * "+this.inColor.ref4f_61zpoe$()+".a, "+this.inColor.ref4f_61zpoe$()+".a);")},Gl.$metadata$={kind:$,simpleName:"PremultiplyColorNode",interfaces:[rp]},Hl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inGamma])},Hl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4(pow("+this.inColor.ref3f_61zpoe$()+", vec3(1.0/"+this.inGamma.ref1f_61zpoe$()+")), "+this.inColor.ref4f_61zpoe$()+".a);")},Hl.$metadata$={kind:$,simpleName:"GammaNode",interfaces:[rp]},Wl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inColor,this.inGamma])},Wl.prototype.generateUncharted2_0=function(t){t.appendFunction_puj7f4$("uncharted2","\n            vec3 uncharted2Tonemap_func(vec3 x) {\n                float A = 0.15;     // shoulder strength\n                float B = 0.50;     // linear strength\n                float C = 0.10;     // linear angle\n                float D = 0.20;     // toe strength\n                float E = 0.02;     // toe numerator\n                float F = 0.30;     // toe denominator  --\x3e E/F = toe angle\n                return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n            }\n            \n            vec3 uncharted2Tonemap(vec3 rgbLinear) {\n                float W = 11.2;     // linear white point value\n                float ExposureBias = 2.0;\n                vec3 curr = uncharted2Tonemap_func(ExposureBias * rgbLinear);\n                vec3 whiteScale = 1.0 / uncharted2Tonemap_func(vec3(W));\n                return curr * whiteScale;\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = uncharted2Tonemap("+this.inColor.ref3f_61zpoe$()+");\n            "+this.outColor.declare()+" = vec4(pow("+this.name+"_color, vec3(1.0/"+this.inGamma.ref1f_61zpoe$()+")), "+this.inColor.ref4f_61zpoe$()+".a);\n        ")},Wl.prototype.generateReinhard_0=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = "+this.inColor.ref3f_61zpoe$()+" / ("+this.inColor.ref3f_61zpoe$()+" + vec3(1.0));\n            "+this.outColor.declare()+" = vec4(pow("+this.name+"_color, vec3(1.0/"+this.inGamma.ref1f_61zpoe$()+")), "+this.inColor.ref4f_61zpoe$()+".a);\n        ")},Wl.prototype.generateJimHejlRichardBurgessDawson_0=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_color = max(vec3(0), "+this.inColor.ref3f_61zpoe$()+" - 0.004);\n            "+this.outColor.declare()+" = vec4(("+this.name+"_color * (6.2 * "+this.name+"_color + 0.5)) / ("+this.name+"_color * (6.2 * "+this.name+"_color + 1.7) + 0.06), 1.0);\n        ")},Wl.prototype.generateCode_626509$=function(t){this.generateUncharted2_0(t)},Wl.$metadata$={kind:$,simpleName:"HdrToLdrNode",interfaces:[rp]},Xl.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$(this.inColors.slice()),null!=(e=this.alpha)&&this.dependsOn_7qvs0d$(e)},Xl.prototype.generateCode_626509$=function(t){var e,i,n=Ot();e=this.channels;for(var r=0;r<e;r++)n.append_pdl1vj$("layout(location="+r+") out vec4 fragOutColor_"+r+";\n");t.appendFunction_puj7f4$("fragOut",n.toString()),i=this.channels;for(var o=0;o<i;o++){var s=this.alpha;null!=s?t.appendMain_61zpoe$("fragOutColor_"+o+" = vec4("+this.inColors[o].ref3f_61zpoe$()+", "+s.ref1f_61zpoe$()+");"):t.appendMain_61zpoe$("fragOutColor_"+o+" = "+this.inColors[o].ref4f_61zpoe$()+";")}},Xl.$metadata$={kind:$,simpleName:"FragmentColorOutNode",interfaces:[rp]},Kl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inDepth)},Kl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("gl_FragDepth = "+this.inDepth.ref1f_61zpoe$()+";")},Kl.$metadata$={kind:$,simpleName:"FragmentDepthOutNode",interfaces:[rp]},Yl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlpha,this.inAlphaCutoff])},Yl.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("if ("+this.inAlpha.ref1f_61zpoe$()+" <= "+this.inAlphaCutoff.ref1f_61zpoe$()+") { discard; }")},Yl.$metadata$={kind:$,simpleName:"DiscardAlphaNode",interfaces:[rp]},Zl.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$(this.inShadowFacs.slice()),this.dependsOn_8ak6wm$([this.inFragPos,this.inSpotInnerAngle]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Jl(this))},Zl.prototype.encodeLightSetup_0=function(t){var e,i=t.renderPass.lighting;if(null!=i){var n=this.uLightCnt_0,r=i.lights.size,o=this.maxLights;n.value=A.min(r,o),e=this.uLightCnt_0.value;for(var s=0;s<e;s++){var a=i.lights.get_za3lpa$(s);this.uColors_0.value[s].set_czzhhz$(a.color),this.uPositions_0.value[s].set_2qa7tb$(a.position,a.type.encoded);var l=this.uDirections_0.value[s],u=a.direction,p=a.spotAngle/2*EE.DEG_2_RAD;l.set_2qa7tb$(u,A.cos(p))}}else this.uLightCnt_0.value=0},Zl.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("light_getFragToLight","\n            vec3 light_getFragToLight(int idx, vec3 fragPos) {\n                if ("+this.uPositions_0.name+"[idx].w == float("+df().encoded+")) {\n                    return -"+this.uDirections_0.name+"[idx].xyz;\n                }\n                // same for point and spot lights\n                return "+this.uPositions_0.name+"[idx].xyz - fragPos;\n            }\n            ");var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("light_getRadiance","\n            vec3 light_getRadiance(int idx, vec3 fragToLight, float innerAngle) {\n                if ("+this.uPositions_0.name+"[idx].w == float("+df().encoded+")) {\n                    return "+this.uColors_0.name+"[idx].rgb * "+this.uColors_0.name+"[idx].w;\n                }\n                float dist = length(fragToLight);\n                float power = "+this.uColors_0.name+"[idx].w;\n                "+e+"\n                if ("+this.uPositions_0.name+"[idx].w == float("+ff().encoded+")) {\n                    return "+this.uColors_0.name+"[idx].rgb * strength;\n                } else {\n                    // spot light\n                    vec3 lightDir = -normalize(fragToLight);\n                    float spotAng = "+this.uDirections_0.name+"[idx].w;\n                    float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                    float ang = dot(lightDir, "+this.uDirections_0.name+"[idx].xyz);\n                    float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                    return "+this.uColors_0.name+"[idx].rgb * strength * angVal;\n                }\n            }\n            ");var i,n=f(0,this.maxLights),r=w(j(n,10));for(i=n.iterator();i.hasNext();){var o=i.next();r.add_11rb$(this.inShadowFacs[o].ref1f_61zpoe$())}var s,a=Mt(r,", "),l=f(0,this.maxLights),u=w(j(l,10));for(s=l.iterator();s.hasNext();)s.next(),u.add_11rb$("vec3(0.0)");var p=Mt(u,", ");t.appendMain_61zpoe$("\n            float[] "+this.name+"_shadowFacs = float[] ("+a+");\n            "+this.outFragToLightDirection.declare()+" = vec3["+this.maxLights+"]("+p+");\n            "+this.outRadiance.declare()+" = vec3["+this.maxLights+"]("+p+");\n            for (int i = 0; i < "+this.uLightCnt_0+"; i++) {\n                "+this.outFragToLightDirection.ref3f_61zpoe$("i")+" = light_getFragToLight(i, "+this.inFragPos.ref3f_61zpoe$()+");\n                "+this.outRadiance.ref3f_61zpoe$("i")+" = light_getRadiance(i, "+this.outFragToLightDirection.ref3f_61zpoe$("i")+", "+this.inSpotInnerAngle.ref1f_61zpoe$("i")+") * "+this.name+"_shadowFacs[i];\n            }\n            ")},Zl.$metadata$={kind:$,simpleName:"MultiLightNode",interfaces:[rp]},Ql.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],tu(this))},Ql.prototype.encodeLightSetup_0=function(){var t=this.light;if(null!=t){this.uColor_0.value.set_czzhhz$(t.color),this.uPosition_0.value.set_2qa7tb$(t.position,t.type.encoded);var e=this.uDirection_0.value,i=t.direction,n=t.spotAngle/2*EE.DEG_2_RAD;e.set_2qa7tb$(i,A.cos(n))}else this.uColor_0.value.set_czzhhz$(Qr().ZERO)},Ql.$metadata$={kind:$,simpleName:"SingleLightUniformDataNode",interfaces:[rp]},eu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShaodwFac,this.inLightPos,this.inLightDir,this.inLightColor])},eu.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("light_getFragToLight","\n            vec3 light_getFragToLight(vec3 fragPos, vec4 lightPos, vec4 lightDir) {\n                if (lightPos.w == float("+df().encoded+")) {\n                    return -lightDir.xyz;\n                }\n                // same for point and spot lights\n                return lightPos.xyz - fragPos;\n            }\n            ");var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("light_getRadiance","\n            vec3 light_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor, vec4 lightDir, float innerAngle) {\n                if (lightPos.w == float("+df().encoded+")) {\n                    return lightColor.rgb * lightColor.w;\n                }\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                if (lightPos.w == float("+ff().encoded+")) {\n                    return lightColor.rgb * strength;\n                } else {\n                    // spot light\n                    vec3 negFtl = -normalize(fragToLight);\n                    float spotAng = lightDir.w;\n                    float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                    float ang = dot(negFtl, lightDir.xyz);\n                    float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                    return lightColor.rgb * strength * angVal;\n                }\n            }\n            "),t.appendMain_61zpoe$("\n            "+this.outFragToLightDirection.declare()+" = light_getFragToLight("+this.inFragPos.ref3f_61zpoe$()+", "+this.inLightPos.ref3f_61zpoe$()+", "+this.inLightDir.ref3f_61zpoe$()+");\n            "+this.outRadiance.declare()+" = light_getRadiance("+this.outFragToLightDirection.ref3f_61zpoe$()+",\n                         "+this.inLightPos.ref3f_61zpoe$()+", "+this.inLightColor.ref4f_61zpoe$()+", "+this.inLightDir.ref4f_61zpoe$()+",\n                         "+this.inSpotInnerAngle.ref1f_61zpoe$()+") * "+this.inShaodwFac.ref1f_61zpoe$()+";\n        ")},eu.$metadata$={kind:$,simpleName:"SingleLightNode",interfaces:[rp]},iu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inLightPos,this.inLightColor,this.inShadowFac,this.inFragPos])},iu.prototype.generateCode_626509$=function(t){var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("pointLight_getRadiance","\n            vec3 pointLight_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor) {\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                return lightColor.rgb * strength;\n            }\n            "),t.appendMain_61zpoe$("\n            "+this.outFragToLightDirection.declare()+" = "+this.inLightPos.ref3f_61zpoe$()+" - "+this.inFragPos.ref3f_61zpoe$()+";\n            "+this.outRadiance.declare()+" = pointLight_getRadiance("+this.outFragToLightDirection+", "+this.inLightPos.ref4f_61zpoe$()+",\n                        "+this.inLightColor.ref4f_61zpoe$()+") * "+this.inShadowFac.ref1f_61zpoe$()+";\n        ")},iu.$metadata$={kind:$,simpleName:"SinglePointLightNode",interfaces:[rp]},nu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inShadowFac,this.inLightPos,this.inLightDir,this.inLightColor])},nu.prototype.generateCode_626509$=function(t){var e=this.isReducedSoi?"\n                float powerSqrt = sqrt(power);\n                float strength = clamp(power / (1.0 + dist * dist) * (powerSqrt - dist) / powerSqrt, 0.0, power);\n            ":"float strength = power / (1.0 + dist * dist);";t.appendFunction_puj7f4$("spotLight_getRadiance","\n            vec3 "+this.name+"_getRadiance(vec3 fragToLight, vec4 lightPos, vec4 lightColor, vec4 lightDir, float innerAngle) {\n                float dist = length(fragToLight);\n                float power = lightColor.w;\n                "+e+"\n                vec3 negFtl = -normalize(fragToLight);\n                float spotAng = lightDir.w;\n                float innerAng = spotAng + (1.0 - spotAng) * (1.0 - innerAngle);\n                float ang = dot(negFtl, lightDir.xyz);\n                float angVal = cos(clamp((innerAng - ang) / (innerAng - spotAng), 0.0, 1.0) * "+U.PI+") * 0.5 + 0.5;\n                return lightColor.rgb * strength * angVal;\n            }\n            "),t.appendMain_61zpoe$("\n            "+this.outFragToLightDirection.declare()+" = "+this.inLightPos.ref3f_61zpoe$()+" - "+this.inFragPos.ref3f_61zpoe$()+";\n            "+this.outRadiance.declare()+" = spotLight_getRadiance("+this.outFragToLightDirection+", "+this.inLightPos.ref4f_61zpoe$()+",\n                        "+this.inLightColor.ref4f_61zpoe$()+", "+this.inSpotInnerAngle+") * "+this.inShadowFac.ref1f_61zpoe$()+";\n        ")},nu.$metadata$={kind:$,simpleName:"SingleSpotLightNode",interfaces:[rp]},ru.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inColor)},ru.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outColor.declare()+" = vec4("+this.inColor.ref3f_61zpoe$()+" * "+this.inColor.ref4f_61zpoe$()+".a, "+this.inColor.ref4f_61zpoe$()+".a);")},ru.$metadata$={kind:$,simpleName:"UnlitMaterialNode",interfaces:[rp]},ou.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inNormal,this.inFragPos,this.inCamPos]),this.dependsOn_8ak6wm$([this.inLightCount,this.inFragToLight,this.inRadiance,this.inAmbient,this.inShininess,this.inSpecularIntensity])},ou.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec3 phongMat_v = normalize("+this.inFragPos.ref3f_61zpoe$()+" - "+this.inCamPos.ref3f_61zpoe$()+");\n            vec3 phongMat_n = normalize("+this.inNormal.ref3f_61zpoe$()+");\n            \n            vec3 phongMat_ambient = "+this.inAlbedo.ref3f_61zpoe$()+" * "+this.inAmbient.ref3f_61zpoe$()+";\n            vec3 phongMat_diffuse = vec3(0);\n            vec3 phongMat_specular = vec3(0);\n            for (int i = 0; i < "+this.inLightCount.ref1i_61zpoe$()+"; i++) {\n                vec3 phongMat_l = normalize("+this.inFragToLight.ref3f_61zpoe$("i")+");\n                vec3 radiance = "+this.inRadiance.ref3f_61zpoe$("i")+";\n                \n                "+(this.lightBacksides?"if (dot(phongMat_n, phongMat_l) < 0.0) { phongMat_n *= -1.0; }":"")+"\n        \n                float phongMat_cosTheta = clamp(dot(phongMat_n, phongMat_l), 0.0, 1.0);\n                vec3 phongMat_r = reflect(phongMat_l, phongMat_n);\n                float phongMat_cosAlpha = clamp(dot(phongMat_v, phongMat_r), 0.0, 1.0);\n                \n                phongMat_diffuse += "+this.inAlbedo.ref4f_61zpoe$()+".rgb * radiance * phongMat_cosTheta;\n                phongMat_specular += "+this.inSpecularIntensity.ref1f_61zpoe$()+" * radiance *\n                        pow(phongMat_cosAlpha, "+this.inShininess.ref1f_61zpoe$()+") * "+this.inAlbedo.ref4f_61zpoe$()+".a;\n            } \n            \n            vec3 phongMat_color = phongMat_ambient + phongMat_diffuse + phongMat_specular;\n            "+this.outColor.declare()+" = vec4(phongMat_color * "+this.inAlbedo.ref4f_61zpoe$()+".a, "+this.inAlbedo.ref4f_61zpoe$()+".a);\n            ")},ou.$metadata$={kind:$,simpleName:"PhongMaterialNode",interfaces:[rp]},su.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inEmissive,this.inNormal,this.inFragPos,this.inViewDir]),this.dependsOn_8ak6wm$([this.inMetallic,this.inRoughness,this.inAmbientOccl]),this.dependsOn_8ak6wm$([this.inFragToLight,this.inRadiance,this.inIrradiance,this.inReflectionColor,this.inReflectionWeight]),this.dependsOn_lhtstx$(this.reflectionMap),this.dependsOn_lhtstx$(this.brdfLut)},su.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("fresnelSchlick","\n            vec3 fresnelSchlick(float cosTheta, vec3 F0) {\n                return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("fresnelSchlickRoughness","\n            vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness) {\n                return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("DistributionGGX","\n            float DistributionGGX(vec3 N, vec3 H, float roughness) {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0);\n                float NdotH2 = NdotH*NdotH;\n            \t\n                float num = a2;\n                float denom = (NdotH2 * (a2 - 1.0) + 1.0);\n                denom = 3.141592653589793 * denom * denom;\n            \t\n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySchlickGGX","\n            float GeometrySchlickGGX(float NdotV, float roughness) {\n                float r = (roughness + 1.0);\n                float k = (r*r) / 8.0;\n                \n                float num   = NdotV;\n                float denom = NdotV * (1.0 - k) + k;\n                \n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySmith","\n            float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                float NdotV = max(dot(N, V), 0.0);\n                float NdotL = max(dot(N, L), 0.0);\n                float ggx2  = GeometrySchlickGGX(NdotV, roughness);\n                float ggx1  = GeometrySchlickGGX(NdotL, roughness);\n                \n                return ggx1 * ggx2;\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 albedo = "+this.inAlbedo.ref3f_61zpoe$()+";\n            vec3 V = -"+this.inViewDir.ref3f_61zpoe$()+";\n            vec3 N = "+this.inNormal.ref3f_61zpoe$()+";\n            \n            float rough = clamp("+this.inRoughness.ref1f_61zpoe$()+", 0.05, 1.0);\n            float metal = "+this.inMetallic.ref1f_61zpoe$()+";\n            \n            vec3 F0 = vec3(0.04); \n            F0 = mix(F0, albedo, metal);\n    \n            vec3 Lo = vec3(0.0);\n            \n            for (int i = 0; i < "+this.inLightCount.ref1i_61zpoe$()+"; i++) {\n                // calculate per-light radiance\n                vec3 L = normalize("+this.inFragToLight.ref3f_61zpoe$("i")+");\n                vec3 H = normalize(V + L);\n                vec3 radiance = "+this.inRadiance.ref3f_61zpoe$("i")+";\n        \n                "+(this.lightBacksides?"N *= sign(dot(N, L));":"")+"\n        \n                // cook-torrance BRDF\n                float NDF = DistributionGGX(N, H, rough); \n                float G = GeometrySmith(N, V, L, rough);\n                vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);\n                \n                vec3 kS = F;\n                vec3 kD = vec3(1.0) - kS;\n                kD *= 1.0 - metal;\n                \n                vec3 numerator = NDF * G * F;\n                float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0);\n                vec3 specular = numerator / max(denominator, 0.001);\n                    \n                // add to outgoing radiance Lo\n                float NdotL = max(dot(N, L), 0.0);\n                Lo += (kD * albedo / "+U.PI+" + specular) * radiance * NdotL;\n            }\n            "),null!=this.reflectionMap&&null!=this.brdfLut?this.generateFinalIbl_0(t,this.reflectionMap,this.brdfLut):this.generateFinalNonIbl_0(t)},su.prototype.generateFinalNonIbl_0=function(t){t.appendMain_61zpoe$("\n            vec3 kS = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, rough);\n            vec3 kD = 1.0 - kS;\n            vec3 diffuse = "+this.inIrradiance.ref3f_61zpoe$()+" * albedo;\n            vec3 ambient = (kD * diffuse) * "+this.inAmbientOccl.ref1f_61zpoe$()+";\n\n            vec3 color = (ambient + Lo + "+this.inEmissive.ref3f_61zpoe$()+") * "+this.inAlbedo.ref4f_61zpoe$()+".a;\n            "+this.outColor.declare()+" = vec4(color, "+this.inAlbedo.ref4f_61zpoe$()+".a);\n        ")},su.prototype.generateFinalIbl_0=function(t,e,i){t.appendMain_61zpoe$("\n            vec3 F = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, rough);\n            vec3 kS = F;\n            vec3 kD = 1.0 - kS;\n            kD *= 1.0 - metal;\n            vec3 diffuse = "+this.inIrradiance.ref3f_61zpoe$()+" * albedo;\n\n            // sample reflection map\n            vec3 R = reflect(-V, N);\n            const float MAX_REFLECTION_LOD = 6.0;\n            vec3 prefilteredColor = "+t.sampleTexture2d_buzeal$(e.name,"R","rough * MAX_REFLECTION_LOD")+".rgb;\n            prefilteredColor = mix(prefilteredColor, clamp("+this.inReflectionColor.ref3f_61zpoe$()+", 0.0, 5.0), "+this.inReflectionWeight.ref1f_61zpoe$()+");\n\n            vec2 brdfUv = vec2(max(dot(N, V), 0.0), rough);\n            vec2 envBRDF = "+t.sampleTexture2d_buzeal$(i.name,"brdfUv")+".rg;\n            vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);\n            vec3 ambient = (kD * diffuse) * "+this.inAmbientOccl.ref1f_61zpoe$()+";\n            vec3 reflection = specular * "+this.inAmbientOccl.ref1f_61zpoe$()+" * "+this.inReflectionStrength.ref1f_61zpoe$()+";\n            vec3 color = (ambient + Lo + "+this.inEmissive.ref3f_61zpoe$()+") * "+this.inAlbedo.ref4f_61zpoe$()+".a + reflection;\n            "+this.outColor.declare()+" = vec4(color, "+this.inAlbedo.ref4f_61zpoe$()+".a);\n        ")},su.$metadata$={kind:$,simpleName:"PbrMaterialNode",interfaces:[rp]},au.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inAlbedo,this.inNormal,this.inFragPos,this.inCamPos,this.inFragToLight,this.inRadiance,this.inIrradiance])},au.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("fresnelSchlick","\n            vec3 fresnelSchlick(float cosTheta, vec3 F0) {\n                return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\n            }\n        "),t.appendFunction_puj7f4$("DistributionGGX","\n            float DistributionGGX(vec3 N, vec3 H, float roughness) {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0);\n                float NdotH2 = NdotH*NdotH;\n            \t\n                float num = a2;\n                float denom = (NdotH2 * (a2 - 1.0) + 1.0);\n                denom = 3.141592653589793 * denom * denom;\n            \t\n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySchlickGGX","\n            float GeometrySchlickGGX(float NdotV, float roughness) {\n                float r = (roughness + 1.0);\n                float k = (r*r) / 8.0;\n                \n                float num   = NdotV;\n                float denom = NdotV * (1.0 - k) + k;\n                \n                return num / denom;\n            }\n        "),t.appendFunction_puj7f4$("GeometrySmith","\n            float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                float NdotV = max(dot(N, V), 0.0);\n                float NdotL = max(dot(N, L), 0.0);\n                float ggx2  = GeometrySchlickGGX(NdotV, roughness);\n                float ggx1  = GeometrySchlickGGX(NdotL, roughness);\n                \n                return ggx1 * ggx2;\n            }\n        ");var e=this.lightBacksides?"true":"dot("+this.inFragToLight+", "+this.inNormal.ref3f_61zpoe$()+") > 0.0";t.appendMain_61zpoe$("\n            vec3 radiance = vec3(0.0);\n            bool normalOk = "+e+";\n            if (normalOk) {\n                radiance = "+this.inRadiance.ref3f_61zpoe$()+";\n            }\n            \n            "+this.outColor.declare()+" = vec4(0.0, 0.0, 0.0, 1.0);\n            if (normalOk && dot(radiance, radiance) > 0.0) {\n                vec3 albedo = "+this.inAlbedo.ref3f_61zpoe$()+";\n                vec3 V = normalize("+this.inCamPos.ref3f_61zpoe$()+" - "+this.inFragPos.ref3f_61zpoe$()+");\n                vec3 N = normalize("+this.inNormal.ref3f_61zpoe$()+");\n                \n                float rough = clamp("+this.inRoughness.ref1f_61zpoe$()+", 0.05, 1.0);\n                float metal = "+this.inMetallic.ref1f_61zpoe$()+";\n                \n                vec3 F0 = vec3(0.04); \n                F0 = mix(F0, albedo, metal);\n        \n                vec3 L = normalize("+this.inFragToLight+");\n                vec3 H = normalize(V + L);\n                "+(this.lightBacksides?"N *= sign(dot(N, L));":"")+"\n        \n                // cook-torrance BRDF\n                float NDF = DistributionGGX(N, H, rough); \n                float G = GeometrySmith(N, V, L, rough);\n                vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);\n                \n                vec3 kS = F;\n                vec3 kD = vec3(1.0) - kS;\n                kD *= 1.0 - metal;\n                \n                vec3 numerator = NDF * G * F;\n                float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0);\n                vec3 specular = numerator / max(denominator, 0.001);\n                    \n                // add to outgoing radiance Lo\n                float NdotL = max(dot(N, L), 0.0);\n                "+this.outColor.name+" = vec4((kD * albedo / "+U.PI+" + specular) * radiance * NdotL, 1.0);\n            }\n            ")},au.$metadata$={kind:$,simpleName:"PbrLightNode",interfaces:[rp]},Object.defineProperty(lu.prototype,"left",{configurable:!0,get:function(){return this.left_8p0ptp$_0},set:function(t){this.output=new op(new gu(this.name+"_out",t.variable.type),this),this.left_8p0ptp$_0=t}}),Object.defineProperty(lu.prototype,"output",{configurable:!0,get:function(){return this.output_q2fkhv$_0},set:function(t){this.output_q2fkhv$_0=t}}),lu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.left,this.right])},lu.$metadata$={kind:$,simpleName:"MathOpNode",interfaces:[rp]},uu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" + "+this.right+";")},uu.$metadata$={kind:$,simpleName:"AddNode",interfaces:[lu]},pu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" - "+this.right+";")},pu.$metadata$={kind:$,simpleName:"SubtractNode",interfaces:[lu]},cu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" / "+this.right+";")},cu.$metadata$={kind:$,simpleName:"DivideNode",interfaces:[lu]},hu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.left+" * "+this.right+";")},hu.$metadata$={kind:$,simpleName:"MultiplyNode",interfaces:[lu]},du.prototype.setup_llmhyc$=function(t){lu.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.mixFac)},du.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = mix("+this.left+", "+this.right+", "+this.mixFac.ref1f_61zpoe$()+");")},du.$metadata$={kind:$,simpleName:"MixNode",interfaces:[lu]},fu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},fu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = ("+this.input.ref3f_61zpoe$()+" - 0.5) * 2.0;")},fu.$metadata$={kind:$,simpleName:"VecFromColorNode",interfaces:[rp]},_u.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inA,this.inB])},_u.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = length("+this.inA+" - "+this.inB+");")},_u.$metadata$={kind:$,simpleName:"DistanceNode",interfaces:[rp]},mu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},mu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = normalize("+this.input.ref3f_61zpoe$()+");")},mu.$metadata$={kind:$,simpleName:"NormalizeNode",interfaces:[rp]},$u.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inCamPos,this.inWorldPos])},$u.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = normalize("+this.inWorldPos.ref3f_61zpoe$()+" - "+this.inCamPos.ref3f_61zpoe$()+");")},$u.$metadata$={kind:$,simpleName:"ViewDirNode",interfaces:[rp]},yu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDirection,this.inNormal])},yu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outDirection.declare()+" = reflect("+this.inDirection.ref3f_61zpoe$()+", "+this.inNormal.ref3f_61zpoe$()+");")},yu.$metadata$={kind:$,simpleName:"ReflectNode",interfaces:[rp]},vu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDirection,this.inNormal])},vu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outDirection.declare()+" = refract("+this.inDirection.ref3f_61zpoe$()+", "+this.inNormal.ref3f_61zpoe$()+", "+this.inIor.ref1f_61zpoe$()+");")},vu.$metadata$={kind:$,simpleName:"RefractNode",interfaces:[rp]},gu.prototype.glslType=function(){return this.type.glslType},gu.prototype.declare=function(){var t=this.isArray?"[]":"";return this.glslType()+t+" "+this.name},gu.prototype.refAsType_fz5f65$=function(t,e){switch(void 0===e&&(e=""),t.name){case"FLOAT":return this.ref1f_61zpoe$(e);case"VEC_2F":return this.ref2f_61zpoe$(e);case"VEC_3F":return this.ref3f_61zpoe$(e);case"VEC_4F":return this.ref4f_61zpoe$(e);case"INT":return this.ref1i_61zpoe$(e);case"VEC_2I":return this.ref2i_61zpoe$(e);case"VEC_3I":return this.ref3i_61zpoe$(e);case"VEC_4I":return this.ref4i_61zpoe$(e);default:if(t===this.type)return this.name;throw cn(this.type.toString()+" cannot be converted to "+t)}},gu.prototype.ref1f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e=this.name+i;break;case"VEC_2F":case"VEC_3F":case"VEC_4F":e=this.name+i+".x";break;case"INT":e="float("+this.name+i+")";break;case"VEC_2I":case"VEC_3I":case"VEC_4I":e="float("+this.name+i+".x)";break;default:throw cn(this.type.toString()+" cannot be converted to float")}return e},gu.prototype.ref1f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref1f_61zpoe$$default(t)},gu.prototype.ref2f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="vec2("+this.name+i+", 0.0)";break;case"VEC_2F":e=this.name+i;break;case"VEC_3F":case"VEC_4F":e=this.name+i+".xy";break;case"INT":e="vec2(float("+this.name+i+"), 0.0)";break;case"VEC_2I":case"VEC_3I":case"VEC_4I":e="vec2(float("+this.name+i+".x), float("+this.name+i+".y))";break;default:throw cn(this.type.toString()+" cannot be converted to vec2")}return e},gu.prototype.ref2f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref2f_61zpoe$$default(t)},gu.prototype.ref3f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="vec3("+this.name+i+", 0.0, 0.0)";break;case"VEC_2F":e="vec3("+this.name+i+", 0.0)";break;case"VEC_3F":e=this.name+i;break;case"VEC_4F":e=this.name+i+".xyz";break;case"INT":e="vec3(float("+this.name+i+"), 0.0, 0.0)";break;case"VEC_2I":e="vec3(float("+this.name+i+".x), float("+this.name+i+".y), 0.0)";break;case"VEC_3I":case"VEC_4I":e="vec3(float("+this.name+i+".x), float("+this.name+i+".y), float("+this.name+i+".z))";break;default:throw cn(this.type.toString()+" cannot be converted to vec3")}return e},gu.prototype.ref3f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref3f_61zpoe$$default(t)},gu.prototype.ref4f_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="vec4("+this.name+i+", 0.0, 0.0, 0.0)";break;case"VEC_2F":e="vec4("+this.name+i+", 0.0, 0.0)";break;case"VEC_3F":e="vec4("+this.name+i+", 0.0)";break;case"VEC_4F":e=this.name+i;break;case"INT":e="vec4(float("+this.name+i+"), 0.0, 0.0, 0.0)";break;case"VEC_2I":e="vec4(float("+this.name+i+".x), float("+this.name+i+".y), 0.0, 0.0)";break;case"VEC_3I":e="vec4(float("+this.name+i+".x), float("+this.name+i+".y), float("+this.name+i+".z), 0.0)";break;case"VEC_4I":e="vec4(float("+this.name+i+".x), float("+this.name+i+".y), float("+this.name+i+".z), float("+this.name+i+".w))";break;default:throw cn(this.type.toString()+" cannot be converted to vec4")}return e},gu.prototype.ref4f_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref4f_61zpoe$$default(t)},gu.prototype.ref1i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="int("+this.name+i+")";break;case"VEC_2F":case"VEC_3F":case"VEC_4F":e="int("+this.name+i+".x)";break;case"INT":e=this.name+i;break;case"VEC_2I":case"VEC_3I":case"VEC_4I":e=this.name+i+".x";break;default:throw cn(this.type.toString()+" cannot be converted to int")}return e},gu.prototype.ref1i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref1i_61zpoe$$default(t)},gu.prototype.ref2i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="ivec2(int("+this.name+i+"), 0)";break;case"VEC_2F":case"VEC_3F":case"VEC_4F":e="ivec2(int("+this.name+i+".x), int("+this.name+i+".y))";break;case"INT":e="ivec2("+this.name+i+", 0)";break;case"VEC_2I":e=this.name+i;break;case"VEC_3I":case"VEC_4I":e="ivec2("+this.name+i+".xy)";break;default:throw cn(this.type.toString()+" cannot be converted to ivec2")}return e},gu.prototype.ref2i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref2i_61zpoe$$default(t)},gu.prototype.ref3i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="ivec3(int("+this.name+i+"), 0, 0)";break;case"VEC_2F":e="ivec3(int("+this.name+i+".x), int("+this.name+i+".y), 0)";break;case"VEC_3F":case"VEC_4F":e="ivec3(int("+this.name+i+".x), int("+this.name+i+".y), int("+this.name+i+".z))";break;case"INT":e="ivec3("+this.name+i+", 0, 0)";break;case"VEC_2I":e="ivec3("+this.name+i+", 0)";break;case"VEC_3I":e=this.name+i;break;case"VEC_4I":e="ivec3("+this.name+i+".xyz)";break;default:throw cn(this.type.toString()+" cannot be converted to ivec3")}return e},gu.prototype.ref3i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref3i_61zpoe$$default(t)},gu.prototype.ref4i_61zpoe$$default=function(t){var e,i=this.isArray?"["+t+"]":"";switch(this.type.name){case"FLOAT":e="ivec4(int("+this.name+i+"), 0, 0, 0)";break;case"VEC_2F":e="ivec4(int("+this.name+i+".x), int("+this.name+i+".y), 0, 0)";break;case"VEC_3F":e="ivec4(int("+this.name+i+".x), int("+this.name+i+".x), int("+this.name+i+".z), 0)";break;case"VEC_4F":e="ivec4(int("+this.name+i+".x), int("+this.name+i+".x), int("+this.name+i+".z), int("+this.name+i+".w))";break;case"INT":e="ivec4("+this.name+i+", 0, 0, 0)";break;case"VEC_2I":e="ivec4("+this.name+i+", 0, 0)";break;case"VEC_3I":e="ivec4("+this.name+i+", 0)";break;case"VEC_4I":e=this.name+i;break;default:throw cn(this.type.toString()+" cannot be converted to ivec4")}return e},gu.prototype.ref4i_61zpoe$=function(t,e){return void 0===t&&(t="0"),e?e(t):this.ref4i_61zpoe$$default(t)},gu.$metadata$={kind:$,simpleName:"ModelVar",interfaces:[]},bu.$metadata$={kind:$,simpleName:"ModelVar1f",interfaces:[gu]},xu.$metadata$={kind:$,simpleName:"ModelVar2f",interfaces:[gu]},wu.$metadata$={kind:$,simpleName:"ModelVar3f",interfaces:[gu]},zu.$metadata$={kind:$,simpleName:"ModelVar4f",interfaces:[gu]},ku.$metadata$={kind:$,simpleName:"ModelVar3fv",interfaces:[gu]},Su.$metadata$={kind:$,simpleName:"ModelVar1i",interfaces:[gu]},Cu.$metadata$={kind:$,simpleName:"ModelVar2i",interfaces:[gu]},Nu.$metadata$={kind:$,simpleName:"ModelVar3i",interfaces:[gu]},Eu.$metadata$={kind:$,simpleName:"ModelVar4i",interfaces:[gu]},Tu.$metadata$={kind:$,simpleName:"ModelVarMat4f",interfaces:[gu]},Pu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value+")"},Pu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value+"), 0.0)"},Pu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value+"), 0.0, 0.0)"},Pu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value+"), 0.0, 0.0, 0.0)"},Pu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value+")"},Pu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value+"), 0)"},Pu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value+"), 0, 0)"},Pu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value+"), 0, 0, 0)"},Pu.$metadata$={kind:$,simpleName:"ModelVar1fConst",interfaces:[bu]},Ou.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Ou.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Ou.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), 0.0)"},Ou.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), 0.0, 0.0)"},Ou.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Ou.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},Ou.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), 0)"},Ou.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), 0, 0)"},Ou.$metadata$={kind:$,simpleName:"ModelVar2fConst",interfaces:[xu]},Mu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Mu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Mu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Mu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), 0.0)"},Mu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Mu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},Mu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"))"},Mu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"), 0)"},Mu.$metadata$={kind:$,simpleName:"ModelVar3fConst",interfaces:[wu]},ju.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},ju.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},ju.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},ju.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), float("+this.value.w+"))"},ju.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},ju.prototype.ref2i_61zpoe$$default=function(t){return"ivec2(int("+this.value.x+"), int("+this.value.y+"))"},ju.prototype.ref3i_61zpoe$$default=function(t){return"ivec3(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"))"},ju.prototype.ref4i_61zpoe$$default=function(t){return"ivec4(int("+this.value.x+"), int("+this.value.y+"), int("+this.value.z+"), int("+this.value.w+"))"},ju.$metadata$={kind:$,simpleName:"ModelVar4fConst",interfaces:[zu]},Au.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value+")"},Au.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value+"), 0.0)"},Au.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value+"), 0.0, 0.0)"},Au.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value+"), 0.0, 0.0, 0.0)"},Au.prototype.ref1i_61zpoe$$default=function(t){return this.value.toString()},Au.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value+", 0)"},Au.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value+", 0, 0)"},Au.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value+", 0, 0, 0)"},Au.$metadata$={kind:$,simpleName:"ModelVar1iConst",interfaces:[Su]},Iu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Iu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Iu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), 0.0)"},Iu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), 0.0, 0.0)"},Iu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Iu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value.x+", "+this.value.y+")"},Iu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value.x+", "+this.value.y+", 0)"},Iu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value.x+", "+this.value.y+", 0, 0)"},Iu.$metadata$={kind:$,simpleName:"ModelVar2iConst",interfaces:[Cu]},Ru.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Ru.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Ru.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Ru.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), 0.0)"},Ru.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Ru.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value.x+", "+this.value.y+")"},Ru.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value.x+", "+this.value.y+", "+this.value.z+")"},Ru.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value.x+", "+this.value.y+", "+this.value.z+", 0)"},Ru.$metadata$={kind:$,simpleName:"ModelVar3iConst",interfaces:[Nu]},Lu.prototype.ref1f_61zpoe$$default=function(t){return"float("+this.value.x+")"},Lu.prototype.ref2f_61zpoe$$default=function(t){return"vec2(float("+this.value.x+"), float("+this.value.y+"))"},Lu.prototype.ref3f_61zpoe$$default=function(t){return"vec3(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"))"},Lu.prototype.ref4f_61zpoe$$default=function(t){return"vec4(float("+this.value.x+"), float("+this.value.y+"), float("+this.value.z+"), float("+this.value.w+"))"},Lu.prototype.ref1i_61zpoe$$default=function(t){return"int("+this.value.x+")"},Lu.prototype.ref2i_61zpoe$$default=function(t){return"ivec2("+this.value.x+", "+this.value.y+")"},Lu.prototype.ref3i_61zpoe$$default=function(t){return"ivec3("+this.value.x+", "+this.value.y+", "+this.value.z+")"},Lu.prototype.ref4i_61zpoe$$default=function(t){return"ivec4("+this.value.x+", "+this.value.y+", "+this.value.z+", "+this.value.w+")"},Lu.$metadata$={kind:$,simpleName:"ModelVar4iConst",interfaces:[Eu]},Du.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},Du.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture1d_buzeal$(this.texture.name,this.inTexCoord.ref1f_61zpoe$(),e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture1d_buzeal$(this.texture.name,this.inTexCoord.ref1f_61zpoe$())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},Du.$metadata$={kind:$,simpleName:"Texture1dSamplerNode",interfaces:[rp]},qu.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},qu.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$(),e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},qu.$metadata$={kind:$,simpleName:"Texture2dSamplerNode",interfaces:[rp]},Fu.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},Fu.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture3d_buzeal$(this.texture.name,this.inTexCoord.ref3f_61zpoe$(),e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture3d_buzeal$(this.texture.name,this.inTexCoord.ref3f_61zpoe$())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},Fu.$metadata$={kind:$,simpleName:"Texture3dSamplerNode",interfaces:[rp]},Bu.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.cubeMap),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},Bu.prototype.generateCode_626509$=function(t){var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTextureCube_buzeal$(this.cubeMap.name,this.inTexCoord.ref3f_61zpoe$(),e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTextureCube_buzeal$(this.cubeMap.name,this.inTexCoord.ref3f_61zpoe$())+";"),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},Bu.$metadata$={kind:$,simpleName:"TextureCubeSamplerNode",interfaces:[rp]},Uu.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexCoord),null!=(e=this.texLod)&&this.dependsOn_7qvs0d$(e)},Uu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec3 "+this.name+"_in = normalize("+this.inTexCoord.ref3f_61zpoe$()+");\n            vec2 "+this.name+"_uv = vec2(atan("+this.name+"_in.z, "+this.name+"_in.x), -asin("+this.name+"_in.y));\n            "+this.name+"_uv *= vec2(0.1591, 0.3183);\n            "+this.name+"_uv += 0.5;            \n        ");var e=this.texLod;null!=e?t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_uv",e.ref1f_61zpoe$())+";"):t.appendMain_61zpoe$(this.outColor.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_uv")+";"),this.decodeRgbe&&t.appendMain_61zpoe$("\n                vec3 "+this.name+"_fRgb = "+this.outColor+".rgb;\n                float "+this.name+"_fExp = "+this.outColor+".a * 255.0 - 128.0;\n                "+this.outColor+" = vec4("+this.name+"_fRgb * pow(2.0, "+this.name+"_fExp), 1.0);\n            "),this.premultiply&&t.appendMain_61zpoe$(this.outColor.ref3f_61zpoe$()+" *= "+this.outColor.ref4f_61zpoe$()+".a;")},Uu.$metadata$={kind:$,simpleName:"EquiRectSamplerNode",interfaces:[rp]},Vu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture),this.dependsOn_7qvs0d$(this.inTexSize)},Vu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            vec2 "+this.name+"_texCoord = (vec2(ivec2(gl_FragCoord.xy) % "+this.inTexSize.ref2i_61zpoe$()+") + 0.5) / "+this.inTexSize.ref2f_61zpoe$()+";\n            "+this.outNoise.declare()+" = "+t.sampleTexture2d_buzeal$(this.texture.name,this.name+"_texCoord")+";\n        ")},Vu.$metadata$={kind:$,simpleName:"NoiseTextureSamplerNode",interfaces:[rp]},Gu.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.aoMap),this.dependsOn_7qvs0d$(this.inViewport),rp.prototype.setup_llmhyc$.call(this,t)},Gu.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec2 aoMapSamplePos = gl_FragCoord.xy - "+this.inViewport.ref2f_61zpoe$()+";\n                aoMapSamplePos.x /= "+this.inViewport+".z;\n                aoMapSamplePos.y /= "+this.inViewport+".w;\n                "+this.outAo.declare()+" = "+t.sampleTexture2d_buzeal$(this.aoMap.name,"aoMapSamplePos")+".r;\n            ")},Gu.$metadata$={kind:$,simpleName:"AoMapSampleNode",interfaces:[rp]},Hu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inTangent,this.inStrength])},Hu.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("calcBumpedNormal","\n            vec3 calcBumpedNormal(vec3 n, vec4 t, vec3 bumpN, float strength) {\n                vec3 normal = normalize(n);\n                vec3 tangent = normalize(t.xyz);\n                tangent = normalize(tangent - dot(tangent, normal) * normal);\n                vec3 bitangent = cross(normal, tangent) * t.w;\n                mat3 tbn = mat3(tangent, bitangent, normal);\n                return normalize(mix(normal, tbn * bumpN, strength));\n            }\n        "),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_bumpN = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$())+".xyz * 2.0 - 1.0;\n            "+this.outNormal.declare()+" = calcBumpedNormal("+this.inNormal.ref3f_61zpoe$()+", "+this.inTangent.ref4f_61zpoe$()+", "+this.name+"_bumpN, "+this.inStrength.ref1f_61zpoe$()+");\n        ")},Hu.$metadata$={kind:$,simpleName:"NormalMapNode",interfaces:[rp]},Wu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inNormal,this.inPosition,this.inStrength])},Wu.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t),t.appendMain_61zpoe$("\n            float "+this.name+"_disp = "+t.sampleTexture2d_buzeal$(this.texture.name,this.inTexCoord.ref2f_61zpoe$())+".x * "+this.inStrength.ref1f_61zpoe$()+";\n            "+this.outPosition.declare()+" = "+this.inPosition.ref3f_61zpoe$()+" + "+this.inNormal.ref3f_61zpoe$()+" * "+this.name+"_disp;\n        ")},Wu.$metadata$={kind:$,simpleName:"DisplacementMapNode",interfaces:[rp]},Object.defineProperty(Xu.prototype,"refractionColor",{configurable:!0,get:function(){return null==this.refractionColor_dpnwa6$_0?ct("refractionColor"):this.refractionColor_dpnwa6$_0},set:function(t){this.refractionColor_dpnwa6$_0=t}}),Object.defineProperty(Xu.prototype,"viewProj",{configurable:!0,get:function(){return null==this.viewProj_5bee0e$_0?ct("viewProj"):this.viewProj_5bee0e$_0},set:function(t){this.viewProj_5bee0e$_0=t}}),Xu.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.refractionColor),this.dependsOn_lhtstx$(this.reflectionMap),this.dependsOn_8ak6wm$([this.viewProj,this.inRefractionDir,this.inFragPos,this.inMaterialThickness])},Xu.prototype.generateCode_626509$=function(t){var e,i,n=null!=(i=null!=(e=this.reflectionMap)?t.sampleTextureCube_buzeal$(e.name,this.inRefractionDir.ref3f_61zpoe$()):null)?i:"vec4(0.0)";t.appendMain_61zpoe$("\n                vec3 "+this.name+"_refrPos = "+this.inFragPos.ref3f_61zpoe$()+" + "+this.inRefractionDir.ref3f_61zpoe$()+" * "+this.inMaterialThickness.ref1f_61zpoe$()+";\n                vec4 "+this.name+"_clip = "+this.viewProj+" * vec4("+this.name+"_refrPos, 1.0);\n                vec2 "+this.name+"_refrSample = ("+this.name+"_clip.xy / "+this.name+"_clip.w) * 0.5 + 0.5;\n                \n                bool "+this.name+"_useReflMap = "+this.name+"_refrSample.x < 0.0 || "+this.name+"_refrSample.x > 1.0\n                                        || "+this.name+"_refrSample.y < 0.0 || "+this.name+"_refrSample.y > 1.0;\n                \n                "+this.outColor.declare()+" = vec4(0.0);\n                if (!"+this.name+"_useReflMap) {\n                    "+this.outColor+" = "+t.sampleTexture2d_buzeal$(this.refractionColor.name,this.name+"_refrSample")+";\n                }\n                if ("+this.outColor+".a == 0.0) {\n                    "+this.outColor+" = "+n+";\n                }\n            ")},Xu.$metadata$={kind:$,simpleName:"RefractionSamplerNode",interfaces:[rp]},Ku.$metadata$={kind:$,simpleName:"ShaderGenerator",interfaces:[]},Yu.$metadata$={kind:$,simpleName:"ShaderInterfaceIoVar",interfaces:[]},Object.defineProperty(Zu.prototype,"outputs",{configurable:!0,get:function(){return this.mutOutputs_rh28ou$_0}}),Object.defineProperty(Zu.prototype,"nodes",{configurable:!0,get:function(){return this.mutNodes}}),Object.defineProperty(Zu.prototype,"nextNodeId",{configurable:!0,get:function(){return this.nextNodeId_bjjntk$_0},set:function(t){this.nextNodeId_bjjntk$_0=t}}),Zu.prototype.findNode_45s15y$=X("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderGraph.findNode_45s15y$",K((function(){var t=e.equals,i=e.throwCCE;return function(e,n,r){var o,s,a=this.nodes;t:do{var l;for(l=a.iterator();l.hasNext();){var u=l.next();if(t(u.name,r)&&n(u)){s=u;break t}}s=null}while(0);return null==(o=s)||n(o)?o:i()}}))),Zu.prototype.addStageOutput_ca2n0y$=function(t,e,i){var n;void 0===i&&(i=1);var r=0;for(n=this.mutOutputs_rh28ou$_0.iterator();n.hasNext();)r=r+n.next().locationInc|0;var o=new Yu(r,t,e,i);return this.mutOutputs_rh28ou$_0.add_11rb$(o),o},Zu.prototype.addNode_j0v1fw$=function(t){if(t.graph!==this)throw bt("Node can only be added to it's parent graph");this.mutNodes.add_11rb$(t)},Zu.prototype.clear=function(){this.descriptorSet.clear(),this.pushConstants.clear(),this.inputs.clear(),this.mutOutputs_rh28ou$_0.clear()},Zu.prototype.setup=function(){var t;for(t=this.nodes.iterator();t.hasNext();)t.next().setup_llmhyc$(this)},Zu.prototype.generateCode_626509$=function(t){var e;for(this.sortNodesByDependencies_dlleyv$_0(),e=this.nodes.iterator();e.hasNext();)e.next().generateCode_626509$(t)},Zu.prototype.sortNodesByDependencies_dlleyv$_0=function(){for(var t=ht();!this.nodes.isEmpty();){for(var e=this.mutNodes.iterator(),i=!1;e.hasNext();){var n=e.next();t.containsAll_brywnq$(n.dependencies)&&(t.add_11rb$(n),e.remove(),i=!0)}if(!i){var r;for(jt(this.model.modelInfo+" - Remaining nodes:"),r=this.nodes.iterator();r.hasNext();){var o,s=r.next();for(jt(s.name),o=s.dependencies.iterator();o.hasNext();){var a=o.next(),l=t.contains_11rb$(a)?"[ok]":"[missing]";jt("    -> "+a.name+" "+l)}}throw bt("Unable to resolve shader graph (circular or missing dependency?)")}}this.mutNodes.addAll_brywnq$(t)},Zu.$metadata$={kind:$,simpleName:"ShaderGraph",interfaces:[]},Ju.$metadata$={kind:$,simpleName:"VertexShaderGraph",interfaces:[Zu]},Qu.$metadata$={kind:$,simpleName:"FragmentShaderGraph",interfaces:[Zu]},Object.defineProperty(tp.prototype,"vertexStageGraph",{configurable:!0,get:function(){var t;return e.isType(t=this.stages.get_11rb$(lc()),Ju)?t:c()}}),Object.defineProperty(tp.prototype,"fragmentStageGraph",{configurable:!0,get:function(){var t;return e.isType(t=this.stages.get_11rb$(hc()),Qu)?t:c()}}),tp.prototype.findNode_3klnlw$=X("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderModel.findNode_3klnlw$",K((function(){var i=t.de.fabmax.kool.pipeline.ShaderStage,n=e.kotlin.Unit,r=e.wrapFunction,o=e.equals,s=e.throwCCE;return r((function(){var t=e.equals,i=e.throwCCE;return function(e,r,o,s){return function(o){if(0!=(o.stage.mask&e.mask)){var a,l,u=s,p=r,c=o.nodes;t:do{var h;for(h=c.iterator();h.hasNext();){var d=h.next();if(t(d.name,p)&&u(d)){l=d;break t}}l=null}while(0);var f=null==(a=l)||u(a)?a:i();if(null!=f)return f}return n}}})),function(t,e,n,r){var a;for(void 0===r&&(r=i.ALL),a=this.stages.values.iterator();a.hasNext();){var l=a.next();if(0!=(l.stage.mask&r.mask)){var u,p,c=l.nodes;t:do{var h;for(h=c.iterator();h.hasNext();){var d=h.next();if(o(d.name,n)&&e(d)){p=d;break t}}p=null}while(0);var f=null==(u=p)||e(u)?u:s();if(null!=f)return f}}return null}}))),tp.prototype.findNodeByType_vinsr2$=X("kool-kool-core.de.fabmax.kool.pipeline.shadermodel.ShaderModel.findNodeByType_vinsr2$",K((function(){var i=t.de.fabmax.kool.pipeline.ShaderStage,n=e.kotlin.collections.firstOrNull_2p1efm$,r=e.kotlin.Unit,o=e.wrapFunction,s=e.kotlin.collections.ArrayList_init_287e2$;return o((function(){var t=e.kotlin.collections.ArrayList_init_287e2$;return function(e,i,o){return function(i){if(0!=(i.stage.mask&e.mask)){var s,a=o,l=i.nodes,u=t();for(s=l.iterator();s.hasNext();){var p=s.next();a(p)&&u.add_11rb$(p)}var c=n(u);if(null!=c)return c}return r}}})),function(t,e,r){var o;for(void 0===r&&(r=i.ALL),o=this.stages.values.iterator();o.hasNext();){var a=o.next();if(0!=(a.stage.mask&r.mask)){var l,u=a.nodes,p=s();for(l=u.iterator();l.hasNext();){var c=l.next();e(c)&&p.add_11rb$(c)}var h=n(p);if(null!=h)return h}}return null}}))),tp.prototype.setup_xbeod6$=function(t,e){var i,n;for(e.name=this.modelInfo,i=this.stages.values.iterator();i.hasNext();)i.next().clear();for(n=this.stages.values.iterator();n.hasNext();)n.next().setup();this.setupAttributes_0(t,e);var r,o,a=new jl,l=M(),u=new Ls;for(r=this.stages.values.iterator();r.hasNext();){var p,c=r.next();wt(u.descriptors,c.descriptorSet.descriptors),wt(a.pushConstants,c.pushConstants.pushConstants),wt(a.stages,c.pushConstants.stages),null!=(p=c.pushConstants.onUpdate)&&l.add_11rb$(p)}u.descriptors.isEmpty()||e.descriptorSetLayouts.add_11rb$(u),a.pushConstants.isEmpty()||(e.pushConstantRanges.add_11rb$(a),l.isEmpty()||(a.onUpdate=(o=l,function(t,e){for(var i=0;i!==o.size;++i)o.get_za3lpa$(i)(t,e);return s})))},tp.prototype.setupAttributes_0=function(t,e){var i,n,r,o={v:0},s=t.geometry,a=M(),l=M(),u=0;for(i=this.vertexStageGraph.requiredVertexAttributes.iterator();i.hasNext();){var p,c=i.next();if(null==(p=s.attributeByteOffsets.get_11rb$(c)))throw new mt("Mesh does not include required vertex attribute: "+c.name);var h=p;if(c.type.isInt){var d=new Dd(o.v,h,c);l.add_11rb$(d)}else{var f=new Dd(o.v,h,c);a.add_11rb$(f)}o.v=o.v+c.props.nSlots|0}n=e.vertexLayout.bindings;var _=new Ld((u=(r=u)+1|0,r),Ud(),a,s.byteStrideF);if(n.add_11rb$(_),!l.isEmpty()){var m,$;m=e.vertexLayout.bindings;var y=new Ld((u=($=u)+1|0,$),Ud(),l,s.byteStrideI);m.add_11rb$(y)}var v=t.instances;if(null!=v){var g,b=M();for(g=this.vertexStageGraph.requiredInstanceAttributes.iterator();g.hasNext();){var x,w=g.next();if(null==(x=v.attributeOffsets.get_11rb$(w)))throw new mt("Mesh does not include required instance attribute: "+w.name);var z=x,k=new Dd(o.v,z,w);b.add_11rb$(k),o.v=o.v+w.props.nSlots|0}var S=e.vertexLayout.bindings,C=new Ld(u,Vd(),b,v.strideBytesF);S.add_11rb$(C)}else if(!this.vertexStageGraph.requiredInstanceAttributes.isEmpty())throw bt("Shader model requires instance attributes, but mesh doesn't provide any")},ep.prototype.addNode_u9w9by$=function(t){return this.stage.addNode_j0v1fw$(t),t},ep.prototype.combineNode_m7a9qd$=function(t){return this.addNode_u9w9by$(new Xp(t,this.stage))},ep.prototype.combineXyzWNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Kp(this.stage));return null!=t&&(i.inXyz=t),null!=e&&(i.inW=e),i},ep.prototype.splitNode_500t7j$=function(t,e){var i=this.addNode_u9w9by$(new Wp(e,this.stage));return i.input=t,i},ep.prototype.addNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new uu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},ep.prototype.subtractNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new pu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},ep.prototype.divideNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new cu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},ep.prototype.multiplyNode_tuikh5$=function(t,e){return this.multiplyNode_ze33is$(t,new op(new Pu(e)))},ep.prototype.multiplyNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new hu(this.stage));return null!=t&&(i.left=t),null!=e&&(i.right=e),i},ep.prototype.mixNode_92v6he$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new du(this.stage));return null!=t&&(n.left=t),null!=e&&(n.right=e),null!=i&&(n.mixFac=i),n},ep.prototype.vecFromColorNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new fu(this.stage));return null!=t&&(e.input=t),e},ep.prototype.viewDirNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new $u(this.stage));return null!=t&&(i.inCamPos=t),null!=e&&(i.inWorldPos=e),i},ep.prototype.distanceNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new _u(this.stage));return null!=t&&(i.inA=t),null!=e&&(i.inB=e),i},ep.prototype.normalizeNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new mu(this.stage));return null!=t&&(e.input=t),e},ep.prototype.reflectNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new yu(this.stage));return null!=t&&(i.inDirection=t),null!=e&&(i.inNormal=e),i},ep.prototype.refractNode_92v6he$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new vu(this.stage));return null!=t&&(n.inDirection=t),null!=e&&(n.inNormal=e),null!=i&&(n.inIor=i),n},ep.prototype.normalMapNode_pp0pk4$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=this.addNode_u9w9by$(new Hu(t,this.stage));return null!=e&&(r.inTexCoord=e),null!=i&&(r.inNormal=i),null!=n&&(r.inTangent=n),r},ep.prototype.displacementMapNode_kq6xq$=function(t,e,i,n,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=this.addNode_u9w9by$(new Wu(t,this.stage));return null!=e&&(o.inTexCoord=e),null!=i&&(o.inPosition=i),null!=n&&(o.inNormal=n),null!=r&&(o.inStrength=r),o},ep.prototype.gammaNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Hl(this.stage));return null!=t&&(i.inColor=t),null!=e&&(i.inGamma=e),i},ep.prototype.hdrToLdrNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Wl(this.stage));return null!=t&&(e.inColor=t),e},ep.prototype.premultiplyColorNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Gl(this.stage));return null!=t&&(e.inColor=t),e},ep.prototype.colorAlphaNode_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Vl(this.stage));return null!=t&&(i.inColor=t),null!=e&&(i.inAlpha=e),i},ep.prototype.namedVariable_wtmwsg$=function(t,e){void 0===e&&(e=null);var i=this.addNode_u9w9by$(new rc(t,this.stage));return null!=e&&(i.input=e),i},ep.prototype.constFloat_mx4ult$=function(t){return new op(new Pu(t))},ep.prototype.constVec2f_czzhjp$=function(t){return new op(new Ou(t))},ep.prototype.constVec3f_czzhiu$=function(t){return new op(new Mu(t))},ep.prototype.constVec4f_czzhhz$=function(t){return new op(new ju(t))},ep.prototype.constInt_za3lpa$=function(t){return new op(new Au(t))},ep.prototype.constVec2i_czzhjm$=function(t){return new op(new Iu(t))},ep.prototype.constVec3i_czzhir$=function(t){return new op(new Ru(t))},ep.prototype.constVec4i_czzhhw$=function(t){return new op(new Lu(t))},ep.prototype.pushConstantNode1f_61zpoe$=function(t){return this.addNode_u9w9by$(new Rp(new vd(t),this.stage))},ep.prototype.pushConstantNode2f_61zpoe$=function(t){return this.addNode_u9w9by$(new Lp(new bd(t),this.stage))},ep.prototype.pushConstantNode3f_61zpoe$=function(t){return this.addNode_u9w9by$(new Dp(new xd(t),this.stage))},ep.prototype.pushConstantNode4f_61zpoe$=function(t){return this.addNode_u9w9by$(new qp(new wd(t),this.stage))},ep.prototype.pushConstantNodeColor_61zpoe$=function(t){return this.addNode_u9w9by$(new Fp(new zd(t),this.stage))},ep.prototype.pushConstantNode1f_978i2u$=function(t){return this.addNode_u9w9by$(new Rp(t,this.stage))},ep.prototype.pushConstantNode2f_978i3p$=function(t){return this.addNode_u9w9by$(new Lp(t,this.stage))},ep.prototype.pushConstantNode3f_978i4k$=function(t){return this.addNode_u9w9by$(new Dp(t,this.stage))},ep.prototype.pushConstantNode4f_978i5f$=function(t){return this.addNode_u9w9by$(new qp(t,this.stage))},ep.prototype.pushConstantNodeColor_uqrny$=function(t){return this.addNode_u9w9by$(new Fp(t,this.stage))},ep.prototype.pushConstantNode1i_61zpoe$=function(t){return this.addNode_u9w9by$(new Bp(new Od(t),this.stage))},ep.prototype.pushConstantNode2i_61zpoe$=function(t){return this.addNode_u9w9by$(new Up(new jd(t),this.stage))},ep.prototype.pushConstantNode3i_61zpoe$=function(t){return this.addNode_u9w9by$(new Vp(new Ad(t),this.stage))},ep.prototype.pushConstantNode4i_61zpoe$=function(t){return this.addNode_u9w9by$(new Gp(new Id(t),this.stage))},ep.prototype.pushConstantNode1i_978i2x$=function(t){return this.addNode_u9w9by$(new Bp(t,this.stage))},ep.prototype.pushConstantNode2i_978i3s$=function(t){return this.addNode_u9w9by$(new Up(t,this.stage))},ep.prototype.pushConstantNode3i_978i4n$=function(t){return this.addNode_u9w9by$(new Vp(t,this.stage))},ep.prototype.pushConstantNode4i_978i5i$=function(t){return this.addNode_u9w9by$(new Gp(t,this.stage))},ep.prototype.morphWeightsNode_za3lpa$=function(t){return this.addNode_u9w9by$(new Ap(t,this.stage))},ep.prototype.getMorphWeightNode_dcktnw$=function(t,e){return this.getMorphWeightNode_5bdpk2$(t,e.outWeights0,e.outWeights1)},ep.prototype.getMorphWeightNode_5bdpk2$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new nc(t,this.stage));return null!=e&&(n.inWeights0=e),null!=i&&(n.inWeights1=i),n},ep.prototype.texture1dNode_61zpoe$=function(t){return this.addNode_u9w9by$(new Cp(this.stage,t))},ep.prototype.texture2dNode_61zpoe$=function(t){return this.addNode_u9w9by$(new Ep(this.stage,t))},ep.prototype.texture3dNode_61zpoe$=function(t){return this.addNode_u9w9by$(new Pp(this.stage,t))},ep.prototype.textureCubeNode_61zpoe$=function(t){return this.addNode_u9w9by$(new Mp(this.stage,t))},ep.prototype.texture1dSamplerNode_nbj0ac$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new Du(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},ep.prototype.texture2dSamplerNode_fzevit$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new qu(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},ep.prototype.texture3dSamplerNode_8naqra$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new Fu(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},ep.prototype.textureCubeSamplerNode_ub8j0u$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=this.addNode_u9w9by$(new Bu(t,this.stage,i));return null!=e&&(n.inTexCoord=e),n},ep.prototype.noiseTextureSamplerNode_bg7ra4$=function(t,e){void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Vu(t,this.stage));return null!=e&&(i.inTexSize=e),i},ep.prototype.equiRectSamplerNode_ju0u0s$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.addNode_u9w9by$(new Uu(t,this.stage,i,n));return null!=e&&(r.inTexCoord=e),r},ep.prototype.vec3TransformNode_vid4wo$=function(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),void 0===n&&(n=!1);var r=this.addNode_u9w9by$(new $p(this.stage,i,n));return null!=t&&(r.inVec=t),null!=e&&(r.inMat=e),r},ep.prototype.vec4TransformNode_9krp9t$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1);var n=this.addNode_u9w9by$(new yp(this.stage,i));return null!=t&&(n.inVec=t),null!=e&&(n.inMat=e),n},ep.$metadata$={kind:$,simpleName:"StageBuilder",interfaces:[]},Object.defineProperty(ip.prototype,"positionOutput",{configurable:!0,get:function(){return this.$outer.vertexStageGraph.positionOutput},set:function(t){this.$outer.vertexStageGraph.positionOutput=t}}),ip.prototype.attrColors=function(){return this.attributeNode_nm2vx5$(ds().COLORS)},ip.prototype.attrNormals=function(){return this.attributeNode_nm2vx5$(ds().NORMALS)},ip.prototype.attrPositions=function(){return this.attributeNode_nm2vx5$(ds().POSITIONS)},ip.prototype.attrTangents=function(){return this.attributeNode_nm2vx5$(ds().TANGENTS)},ip.prototype.attrTexCoords=function(){return this.attributeNode_nm2vx5$(ds().TEXTURE_COORDS)},ip.prototype.attrJoints=function(){return this.attributeNode_nm2vx5$(ds().JOINTS)},ip.prototype.attrWeights=function(){return this.attributeNode_nm2vx5$(ds().WEIGHTS)},ip.prototype.attributeNode_nm2vx5$=function(t){return this.addNode_u9w9by$(new Yp(t,this.stage))},ip.prototype.instanceAttrModelMat=function(){return this.instanceAttributeNode_nm2vx5$(Uk().MODEL_MAT)},ip.prototype.instanceAttributeNode_nm2vx5$=function(t){return this.addNode_u9w9by$(new Zp(t,this.stage))},ip.prototype.pointSize_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new oc(this.stage));return null!=t&&(e.inSize=t),e},ip.prototype.stageInterfaceNode_iikjwn$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1);var n=new Jp(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);return n.isFlat=i,null!=e&&(n.input=e),this.addNode_u9w9by$(n.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(n.fragmentNode),n},ip.prototype.mvpNode=function(){return this.addNode_u9w9by$(new zp(this.stage))},ip.prototype.skinTransformNode_78eraa$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=64);var n=this.addNode_u9w9by$(new vp(this.stage,i));return null!=t&&(n.inJoints=t),null!=e&&(n.inWeights=e),n},ip.prototype.premultipliedMvpNode=function(){return this.addNode_u9w9by$(new bp(this.stage))},ip.prototype.simpleShadowMapNode_7yd351$=function(t,e,i){void 0===i&&(i=null);var n=new ap(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);this.addNode_u9w9by$(n.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(n.fragmentNode);var r=new Ep(this.$outer.fragmentStageGraph,e);r.isDepthTexture=!0;var o=r;return this.$outer.fragmentStageGraph.addNode_j0v1fw$(o),null!=i&&(n.inWorldPos=i),n.depthMap=o,n},ip.prototype.cascadedShadowMapNode_zw58l$=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=new cp(t,this.$outer.vertexStageGraph,this.$outer.fragmentStageGraph);this.addNode_u9w9by$(r.vertexNode),this.$outer.fragmentStageGraph.addNode_j0v1fw$(r.fragmentNode);var o=new Ep(this.$outer.fragmentStageGraph,e);o.isDepthTexture=!0,o.arraySize=t.numCascades;var s=o;return this.$outer.fragmentStageGraph.addNode_j0v1fw$(s),null!=n&&(r.inWorldPos=n),null!=i&&(r.inViewPosition=i),r.depthMap=s,r},ip.prototype.simpleVertexPositionNode=function(){return this.vec4TransformNode_9krp9t$(this.attrPositions().output,this.premultipliedMvpNode().outMvpMat)},ip.prototype.fullScreenQuadPositionNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new ic(this.stage));return null!=t&&(e.inTexCoord=t),e},ip.$metadata$={kind:$,simpleName:"VertexStageBuilder",interfaces:[ep]},np.prototype.flipBacksideNormalNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Hp(this.stage));return null!=t&&(e.inNormal=t),e},np.prototype.multiLightNode_d76fwk$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=4);var i=this.addNode_u9w9by$(new Zl(this.stage,e));return null!=t&&(i.inFragPos=t),i},np.prototype.singleLightNode_ycjtt8$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new eu(this.stage));if(null!=t){var i=this.addNode_u9w9by$(new Ql(this.stage));i.light=t,e.inLightPos=i.outLightPos,e.inLightDir=i.outLightDir,e.inLightColor=i.outLightColor}return e},np.prototype.screenCoordNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new ec(this.stage));return null!=t&&(e.inViewport=t),e},np.prototype.deferredSimpleShadowMapNode_dhoqzq$=function(t,e,i){var n=this.addNode_u9w9by$(new Ep(this.stage,e));n.isDepthTexture=!0;var r=n,o=this.addNode_u9w9by$(new lp(t,this.stage));o.inWorldPos=i;var s=o,a=this.addNode_u9w9by$(new pp(t,this.stage));return a.inPosLightSpace=s.outPosLightSpace,a.depthMap=r,a},np.prototype.deferredCascadedShadowMapNode_y1yrn$=function(t,e,i,n){var r=this.addNode_u9w9by$(new Ep(this.stage,e));r.isDepthTexture=!0,r.arraySize=t.numCascades;var o=r,s=this.addNode_u9w9by$(new dp(t,this.stage));s.inWorldPos=n;var a=s,l=this.addNode_u9w9by$(new _p(t,this.stage));return l.inViewZ=this.splitNode_500t7j$(i,"z").output,l.inPosLightSpace=a.outPosLightSpace,l.depthMap=o,l},np.prototype.unlitMaterialNode_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new ru(this.stage));return null!=t&&(e.inColor=t),e},np.prototype.phongMaterialNode_4h00d0$=function(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=this.addNode_u9w9by$(new ou(this.stage));return null!=t&&(r.inAlbedo=t),null!=e&&(r.inNormal=e),null!=n&&(r.inCamPos=n),null!=i&&(r.inFragPos=i),r},np.prototype.pbrMaterialNode_aple27$=function(t,e,i,n,r,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null);var s=this.addNode_u9w9by$(new su(t,e,this.stage));return null!=i&&(s.inAlbedo=i),null!=n&&(s.inNormal=n),null!=o&&(s.inViewDir=o),null!=r&&(s.inFragPos=r),s},np.prototype.pbrLightNode=function(){return this.addNode_u9w9by$(new au(this.stage))},np.prototype.colorOutput_a3v4si$=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===i&&(i=null);var n=this.addNode_u9w9by$(new Xl(this.stage,e));return null!=t&&(n.inColors[0]=t),n.alpha=i,n},np.prototype.discardAlpha_ze33is$=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.addNode_u9w9by$(new Yl(this.stage));return null!=t&&(i.inAlpha=t),null!=e&&(i.inAlphaCutoff=e),i},np.prototype.depthOutput_r20yfm$=function(t){void 0===t&&(t=null);var e=this.addNode_u9w9by$(new Kl(this.stage));return null!=t&&(e.inDepth=t),e},np.$metadata$={kind:$,simpleName:"FragmentStageBuilder",interfaces:[ep]},tp.$metadata$={kind:$,simpleName:"ShaderModel",interfaces:[]},rp.prototype.dependsOn_lhtstx$=function(t){null!=t&&t!==this&&this.dependencies.add_11rb$(t)},rp.prototype.dependsOn_7qvs0d$=function(t){this.dependsOn_lhtstx$(t.node)},rp.prototype.dependsOn_8ak6wm$=function(t){var e;for(e=0;e!==t.length;++e){var i=t[e];this.dependsOn_7qvs0d$(i)}},rp.prototype.setup_llmhyc$=function(t){if(0==(t.stage.mask&this.allowedStages)){var e="Unallowed shader stage ("+t.stage+" for node "+this.name;throw bt(e.toString())}},rp.prototype.generateCode_626509$=function(t){},rp.$metadata$={kind:$,simpleName:"ShaderNode",interfaces:[]},Object.defineProperty(op.prototype,"name",{configurable:!0,get:function(){return this.variable.name}}),op.prototype.declare=function(){return this.variable.declare()},op.prototype.ref1f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref1f_61zpoe$(t)},op.prototype.ref2f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref2f_61zpoe$(t)},op.prototype.ref3f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref3f_61zpoe$(t)},op.prototype.ref4f_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref4f_61zpoe$(t)},op.prototype.ref1i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref1i_61zpoe$(t)},op.prototype.ref2i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref2i_61zpoe$(t)},op.prototype.ref3i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref3i_61zpoe$(t)},op.prototype.ref4i_61zpoe$=function(t){return void 0===t&&(t="0"),this.variable.ref4i_61zpoe$(t)},op.prototype.refAsType_fz5f65$=function(t,e){return void 0===e&&(e="0"),this.variable.refAsType_fz5f65$(t,e)},op.prototype.toString=function(){var t;switch(this.variable.type.name){case"FLOAT":t=this.ref1f_61zpoe$();break;case"VEC_2F":t=this.ref2f_61zpoe$();break;case"VEC_3F":t=this.ref3f_61zpoe$();break;case"VEC_4F":t=this.ref4f_61zpoe$();break;default:t=this.refAsType_fz5f65$(this.variable.type)}return t},op.$metadata$={kind:$,simpleName:"ShaderNodeIoVar",interfaces:[]},Object.defineProperty(sp.prototype,"depthMap",{configurable:!0,get:function(){return this.depthMap_25rtms$_0},set:function(t){this.depthMap_25rtms$_0=t}}),sp.$metadata$={kind:$,simpleName:"ShadowMapNode",interfaces:[]},Object.defineProperty(ap.prototype,"inWorldPos",{configurable:!0,get:function(){return this.vertexNode.inWorldPos},set:function(t){this.vertexNode.inWorldPos=t}}),Object.defineProperty(ap.prototype,"inDepthOffset",{configurable:!0,get:function(){return this.fragmentNode.inDepthOffset},set:function(t){this.fragmentNode.inDepthOffset=t}}),Object.defineProperty(ap.prototype,"depthMap",{configurable:!0,get:function(){return this.fragmentNode.depthMap},set:function(t){this.fragmentNode.depthMap=t}}),Object.defineProperty(ap.prototype,"outShadowFac",{configurable:!0,get:function(){return this.fragmentNode.outShadowFac}}),ap.$metadata$={kind:$,simpleName:"SimpleShadowMapNode",interfaces:[sp]},lp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inWorldPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],up(this))},lp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outPosLightSpace.declare()+" = "+this.uShadowMapVP.name+" * vec4("+this.inWorldPos.ref3f_61zpoe$()+", 1.0);")},lp.$metadata$={kind:$,simpleName:"SimpleShadowMapTransformNode",interfaces:[rp]},pp.prototype.setup_llmhyc$=function(t){var e;if(rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDepthOffset,this.inPosLightSpace]),null==(e=this.depthMap))throw cn("Depth map input not set");this.dependsOn_lhtstx$(e)},pp.prototype.generateCode_626509$=function(t){var e;if(null==(e=this.depthMap))throw cn("Depth map input not set");var i=e,n=Ot(),r={v:0};if(this.useDithering){var o;for(n.append_pdl1vj$("vec2 "+this.name+"_offset = vec2(float(fract(gl_FragCoord.x * 0.5) > 0.25), float(fract(gl_FragCoord.y * 0.5) > 0.25));"),o=At([new rr(-1.5,.5),new rr(.5,.5),new rr(-1.5,-1.5),new rr(.5,-1.5)]).iterator();o.hasNext();){var s=o.next(),a="vec4("+this.name+"_pos.xy + ("+this.name+"_offset + vec2("+s.x+", "+s.y+")) * "+this.name+"_scale * "+this.name+"_pos.w, "+this.name+"_pos.z, "+this.name+"_pos.w)";n.append_pdl1vj$(this.outShadowFac.name+" += "+t.sampleTexture2dDepth_puj7f4$(i.name,a)+";\n"),r.v=r.v+1|0}}else{for(var l,u=M(),p=0;p<=3;p++)for(var c=0;c<=3;c++){var h=new rr(-1.5+c,-1.5+p);u.add_11rb$(h)}for(l=u.iterator();l.hasNext();){var d=l.next(),f="vec4("+this.name+"_pos.xy + (vec2("+d.x+", "+d.y+")) * "+this.name+"_scale * "+this.name+"_pos.w, "+this.name+"_pos.z, "+this.name+"_pos.w)";n.append_pdl1vj$(this.outShadowFac.name+" += "+t.sampleTexture2dDepth_puj7f4$(i.name,f)+";\n"),r.v=r.v+1|0}}t.appendMain_61zpoe$("\n            vec4 "+this.name+"_pos = "+this.inPosLightSpace.ref4f_61zpoe$()+";\n            \n            // check shadow map bounds\n            "+this.outShadowFac.declare()+" = 1.0;\n            vec3 "+this.name+"_posW = "+this.name+"_pos.xyz / "+this.name+"_pos.w;\n            if ("+this.name+"_posW.x > 0.0 && "+this.name+"_posW.x < 1.0\n                && "+this.name+"_posW.y > 0.0 && "+this.name+"_posW.y < 1.0\n                && "+this.name+"_posW.z > -1.0 && "+this.name+"_posW.z < 1.0) {\n            \n                float "+this.name+"_size = float(textureSize("+i.name+", 0).x);\n                float "+this.name+"_scale = 1.0 / float("+this.name+"_size);\n                "+this.name+"_pos.z += "+this.inDepthOffset.ref1f_61zpoe$()+";\n                "+this.outShadowFac.name+" = 0.0;\n                "+n+"\n                "+this.outShadowFac.name+" *= "+1/r.v+";\n            }\n        ")},pp.$metadata$={kind:$,simpleName:"SimpleShadowMapFragmentNode",interfaces:[rp]},Object.defineProperty(cp.prototype,"inWorldPos",{configurable:!0,get:function(){return this.vertexNode.inWorldPos},set:function(t){this.vertexNode.inWorldPos=t}}),Object.defineProperty(cp.prototype,"inDepthOffset",{configurable:!0,get:function(){return this.fragmentNode.inDepthOffset},set:function(t){this.fragmentNode.inDepthOffset=t}}),Object.defineProperty(cp.prototype,"depthMap",{configurable:!0,get:function(){return this.fragmentNode.depthMap},set:function(t){this.fragmentNode.depthMap=t}}),Object.defineProperty(cp.prototype,"outShadowFac",{configurable:!0,get:function(){return this.fragmentNode.outShadowFac}}),hp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.$outer.inViewPosition,this.$outer.vertexNode.outPosLightSpace]);var e=this.$outer.fragmentGraph.inputs,i=this.$outer.vertexGraph.addStageOutput_ca2n0y$(this.$outer.posLightSpace_0.variable,!1,this.$outer.shadowMap.numCascades);e.add_11rb$(i);var n=this.$outer.fragmentGraph.inputs,r=this.$outer.vertexGraph.addStageOutput_ca2n0y$(this.$outer.ifViewZ_0.variable,!1);n.add_11rb$(r)},hp.prototype.generateCode_626509$=function(t){var e;t.appendMain_61zpoe$(this.$outer.ifViewZ_0.name+" = "+this.$outer.inViewPosition+".z;"),e=this.$outer.shadowMap.numCascades;for(var i=0;i<e;i++)t.appendMain_61zpoe$(It(this.$outer.posLightSpace_0.name,91)+"["+i+"] = "+It(this.$outer.vertexNode.outPosLightSpace.name,91)+"["+i+"];")},hp.$metadata$={kind:$,simpleName:"CascadedShadowHelperNd",interfaces:[rp]},cp.$metadata$={kind:$,simpleName:"CascadedShadowMapNode",interfaces:[sp]},dp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inWorldPos),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],fp(this))},dp.prototype.generateCode_626509$=function(t){var e;t.appendMain_61zpoe$(this.outPosLightSpace.declare()+";"),e=this.shadowMap.numCascades;for(var i=0;i<e;i++)t.appendMain_61zpoe$(It(this.outPosLightSpace.name,91)+"["+i+"] = "+this.uShadowMapVP.name+"["+i+"] * vec4("+this.inWorldPos.ref3f_61zpoe$()+", 1.0);")},dp.$metadata$={kind:$,simpleName:"CascadedShadowMapTransformNode",interfaces:[rp]},_p.prototype.setup_llmhyc$=function(t){var e;if(rp.prototype.setup_llmhyc$.call(this,t),null==(e=this.depthMap))throw cn("Depth map input not set");this.dependsOn_lhtstx$(e),this.dependsOn_8ak6wm$([this.inDepthOffset,this.inPosLightSpace,this.inViewZ]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],mp(this))},_p.prototype.generateCode_626509$=function(t){var e,i;if(null==(e=this.depthMap))throw cn("Depth map input not set");var n=e,r=Ot(),o={v:0};if(this.useDithering){var s;for(r.append_pdl1vj$("vec2 offset = vec2(float(fract(gl_FragCoord.x * 0.5) > 0.25), float(fract(gl_FragCoord.y * 0.5) > 0.25));"),s=At([new rr(-1.5,.5),new rr(.5,.5),new rr(-1.5,-1.5),new rr(.5,-1.5)]).iterator();s.hasNext();){var a=s.next(),l="vec4(projPos.xy + (offset + vec2("+a.x+", "+a.y+")) * texScale * projPos.w, projPos.z, projPos.w)";r.append_pdl1vj$("shadowFac += "+t.sampleTexture2dDepth_puj7f4$("shadowTex",l)+";\n"),o.v=o.v+1|0}}else{for(var u,p=M(),c=0;c<=3;c++)for(var h=0;h<=3;h++){var d=new rr(-1.5+h,-1.5+c);p.add_11rb$(d)}for(u=p.iterator();u.hasNext();){var f=u.next(),_="vec4(projPos.xy + (vec2("+f.x+", "+f.y+")) * texScale * projPos.w, projPos.z, projPos.w)";r.append_pdl1vj$("shadowFac += "+t.sampleTexture2dDepth_puj7f4$("shadowTex",_)+";\n"),o.v=o.v+1|0}}t.appendFunction_puj7f4$("cascadedShadowFac","\n            float cascadedShadowFac(sampler2DShadow shadowTex, vec4 projPos, float depthOffset) {\n                float texSize = float(textureSize(shadowTex, 0).x);\n                float texScale = 1.0 / float(texSize);\n                projPos.z += depthOffset;\n                float shadowFac = 0.0;\n                if (projPos.z >= 1.0) {\n                    shadowFac = 1.0;\n                } else {\n                    "+r+"\n                    shadowFac *= "+1/o.v+";\n                }\n                return shadowFac;\n            }\n        "),t.appendMain_61zpoe$("\n                "+this.outShadowFac.declare()+" = 1.0;\n            "),i=this.shadowMap.numCascades;for(var m=0;m<i;m++)t.appendMain_61zpoe$("\n                    if ("+this.inViewZ.ref1f_61zpoe$()+" >= "+this.uViewSpaceRanges_0.name+"["+m+"]) {\n                        "+this.outShadowFac.name+" = cascadedShadowFac("+n.name+"["+m+"], "+It(this.inPosLightSpace.name,91)+"["+m+"], "+this.inDepthOffset.ref1f_61zpoe$()+");\n                    }\n                "),m<(this.shadowMap.numCascades-1|0)&&t.appendMain_61zpoe$(" else ")},_p.$metadata$={kind:$,simpleName:"CascadedShadowMapFragmentNode",interfaces:[rp]},$p.prototype.setup_llmhyc$=function(t){var e,i;if(rp.prototype.setup_llmhyc$.call(this,t),e=this.inVec,null==(i=this.inMat))throw cn("Matrix input not set");this.dependsOn_8ak6wm$([e,i])},$p.prototype.generateCode_626509$=function(t){var e;if(null==(e=this.inMat))throw cn("Matrix input not set");var i=e,n=this.inVec.variable.type===is()?this.inVec.ref4f_61zpoe$():"vec4("+this.inVec.ref3f_61zpoe$()+", "+this.w+")",r=this.invert?"-":"";t.appendMain_61zpoe$(this.outVec3.declare()+" = "+r+"("+i.refAsType_fz5f65$(us())+" * "+n+").xyz;")},$p.$metadata$={kind:$,simpleName:"Vec3TransformNode",interfaces:[rp]},yp.prototype.setup_llmhyc$=function(t){var e,i;if(rp.prototype.setup_llmhyc$.call(this,t),e=this.inVec,null==(i=this.inMat))throw cn("Matrix input not set");this.dependsOn_8ak6wm$([e,i])},yp.prototype.generateCode_626509$=function(t){var e,i;if(null==(i=null!=(e=this.inMat)?e.variable:null))throw cn("Matrix input not set");var n=i,r=this.inVec.variable.type===is()?this.inVec.ref4f_61zpoe$():"vec4("+this.inVec.ref3f_61zpoe$()+", "+this.w+")";t.appendMain_61zpoe$(this.outVec4.declare()+" = "+n.refAsType_fz5f65$(us())+" * "+r+";")},yp.$metadata$={kind:$,simpleName:"Vec4TransformNode",interfaces:[rp]},vp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inJoints,this.inWeights]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[],gp(this))},vp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outJointMat.declare()+" = "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".x] * "+this.inWeights.ref4f_61zpoe$()+".x;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".y] * "+this.inWeights.ref4f_61zpoe$()+".y;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".z] * "+this.inWeights.ref4f_61zpoe$()+".z;\n            "+this.outJointMat.name+" += "+this.uJointTransforms+"["+this.inJoints.ref4i_61zpoe$()+".w] * "+this.inWeights.ref4f_61zpoe$()+".w;\n        ")},vp.$metadata$={kind:$,simpleName:"SkinTransformNode",interfaces:[rp]},bp.prototype.addToStage_llmhyc$=function(t){var e=new wp(this,t);return this.visibleIn_0.add_11rb$(t.stage),t.addNode_j0v1fw$(e),e},bp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[],xp(this))},wp.$metadata$={kind:$,simpleName:"StageCopy",interfaces:[rp]},bp.$metadata$={kind:$,simpleName:"UniformBufferPremultipliedMvp",interfaces:[rp]},zp.prototype.addToStage_llmhyc$=function(t){var e=new Sp(this,t);return this.visibleIn_0.add_11rb$(t.stage),t.addNode_j0v1fw$(e),e},zp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],kp(this))},zp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outMvpMat.declare()+" = "+this.outProjMat.name+" * "+this.outViewMat.name+" * "+this.outModelMat.name+";")},Sp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outMvpMat.declare()+" = "+this.outProjMat.name+" * "+this.outViewMat.name+" * "+this.outModelMat.name+";")},Sp.$metadata$={kind:$,simpleName:"StageCopy",interfaces:[rp]},zp.$metadata$={kind:$,simpleName:"UniformBufferMvp",interfaces:[rp]},Object.defineProperty(Cp.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_2qaow3$_0?ct("sampler"):this.sampler_2qaow3$_0},set:function(t){this.sampler_2qaow3$_0=t}}),Cp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.texture1d_la8pbu$(this.name,[t.stage],Np(this))},Cp.$metadata$={kind:$,simpleName:"Texture1dNode",interfaces:[rp]},Object.defineProperty(Ep.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_m79dj2$_0?ct("sampler"):this.sampler_m79dj2$_0},set:function(t){this.sampler_m79dj2$_0=t}}),Ep.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.texture2d_me4w2j$(this.name,[t.stage],Tp(this))},Ep.$metadata$={kind:$,simpleName:"Texture2dNode",interfaces:[rp]},Object.defineProperty(Pp.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_nwam0x$_0?ct("sampler"):this.sampler_nwam0x$_0},set:function(t){this.sampler_nwam0x$_0=t}}),Pp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.texture3d_ni12t8$(this.name,[t.stage],Op(this))},Pp.$metadata$={kind:$,simpleName:"Texture3dNode",interfaces:[rp]},Object.defineProperty(Mp.prototype,"sampler",{configurable:!0,get:function(){return null==this.sampler_uy3n45$_0?ct("sampler"):this.sampler_uy3n45$_0},set:function(t){this.sampler_uy3n45$_0=t}}),Mp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.textureCube_9fohmg$(this.name,[t.stage],jp(this))},Mp.$metadata$={kind:$,simpleName:"TextureCubeNode",interfaces:[rp]},Ap.prototype.setup_llmhyc$=function(t){if(rp.prototype.setup_llmhyc$.call(this,t),this.nWeights>0){var e=t.pushConstants,i=e.stages,n=t.stage;i.add_11rb$(n),e.unaryPlus_wq3w46$((r=this,function(){return r.uWeights0_0})),this.nWeights>4&&e.unaryPlus_wq3w46$(function(t){return function(){return t.uWeights1_0}}(this)),e.onUpdate=function(t){return function(e,i){var n;if(null!=(n=i.mesh.morphWeights)){var r,o,a=t;r=A.min(4,n.length);for(var l=0;l<r;l++)a.uWeights0_0.value.set_24o109$(l,n[l]);var u=n.length-4|0;o=A.min(4,u);for(var p=0;p<o;p++)a.uWeights1_0.value.set_24o109$(p,n[p+4|0])}return s}}(this)}var r},Ap.$metadata$={kind:$,simpleName:"MorphWeightsNode",interfaces:[rp]},Ip.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t);var e,i=t.pushConstants;wt(i.stages,this.visibleIn),i.unaryPlus_wq3w46$((e=this,function(){return e.uniform})),i.onUpdate=this.onUpdate},Ip.$metadata$={kind:$,simpleName:"PushConstantNode",interfaces:[rp]},Object.defineProperty(Rp.prototype,"uniform",{get:function(){return this.uniform_24s88i$_0}}),Object.defineProperty(Rp.prototype,"output",{configurable:!0,get:function(){return this.output_6ls89f$_0}}),Rp.$metadata$={kind:$,simpleName:"PushConstantNode1f",interfaces:[Ip]},Object.defineProperty(Lp.prototype,"uniform",{get:function(){return this.uniform_rl2ob1$_0}}),Object.defineProperty(Lp.prototype,"output",{configurable:!0,get:function(){return this.output_9us71w$_0}}),Lp.$metadata$={kind:$,simpleName:"PushConstantNode2f",interfaces:[Ip]},Object.defineProperty(Dp.prototype,"uniform",{get:function(){return this.uniform_dq6h4k$_0}}),Object.defineProperty(Dp.prototype,"output",{configurable:!0,get:function(){return this.output_d3s5ud$_0}}),Dp.$metadata$={kind:$,simpleName:"PushConstantNode3f",interfaces:[Ip]},Object.defineProperty(qp.prototype,"uniform",{get:function(){return this.uniform_fzofez$_0}}),Object.defineProperty(qp.prototype,"output",{configurable:!0,get:function(){return this.output_gcs4mu$_0}}),qp.$metadata$={kind:$,simpleName:"PushConstantNode4f",interfaces:[Ip]},Object.defineProperty(Fp.prototype,"uniform",{get:function(){return this.uniform_o737wi$_0}}),Object.defineProperty(Fp.prototype,"output",{configurable:!0,get:function(){return this.output_yy7l5r$_0}}),Fp.$metadata$={kind:$,simpleName:"PushConstantNodeColor",interfaces:[Ip]},Object.defineProperty(Bp.prototype,"uniform",{get:function(){return this.uniform_7m7o4x$_0}}),Object.defineProperty(Bp.prototype,"output",{configurable:!0,get:function(){return this.output_p908nk$_0}}),Bp.$metadata$={kind:$,simpleName:"PushConstantNode1i",interfaces:[Ip]},Object.defineProperty(Up.prototype,"uniform",{get:function(){return this.uniform_xp1hao$_0}}),Object.defineProperty(Up.prototype,"output",{configurable:!0,get:function(){return this.output_si07g1$_0}}),Up.$metadata$={kind:$,simpleName:"PushConstantNode2i",interfaces:[Ip]},Object.defineProperty(Vp.prototype,"uniform",{get:function(){return this.uniform_3z6kr5$_0}}),Object.defineProperty(Vp.prototype,"output",{configurable:!0,get:function(){return this.output_vr068i$_0}}),Vp.$metadata$={kind:$,simpleName:"PushConstantNode3i",interfaces:[Ip]},Object.defineProperty(Gp.prototype,"uniform",{get:function(){return this.uniform_pqobse$_0}}),Object.defineProperty(Gp.prototype,"output",{configurable:!0,get:function(){return this.output_z0050z$_0}}),Gp.$metadata$={kind:$,simpleName:"PushConstantNode4i",interfaces:[Ip]},Hp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inNormal)},Hp.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t),t.appendMain_61zpoe$("\n            "+this.outNormal.declare()+" = "+this.inNormal.ref3f_61zpoe$()+" * (float(gl_FrontFacing) * 2.0 - 1.0);\n        ")},Hp.$metadata$={kind:$,simpleName:"FlipBacksideNormalNode",interfaces:[rp]},Wp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},Wp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.input.name+"."+this.outChannels+";")},Wp.$metadata$={kind:$,simpleName:"SplitNode",interfaces:[rp]},Xp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inX,this.inY,this.inZ,this.inW])},Xp.prototype.generateCode_626509$=function(t){switch(this.output.variable.type.name){case"VEC_2F":t.appendMain_61zpoe$(this.output.declare()+" = vec2("+this.inX.ref1f_61zpoe$()+", "+this.inY.ref1f_61zpoe$()+");");break;case"VEC_3F":t.appendMain_61zpoe$(this.output.declare()+" = vec3("+this.inX.ref1f_61zpoe$()+", "+this.inY.ref1f_61zpoe$()+", "+this.inZ.ref1f_61zpoe$()+");");break;case"VEC_4F":t.appendMain_61zpoe$(this.output.declare()+" = vec4("+this.inX.ref1f_61zpoe$()+", "+this.inY.ref1f_61zpoe$()+", "+this.inZ.ref1f_61zpoe$()+", "+this.inW.ref1f_61zpoe$()+");");break;default:throw G("Only allowed out types are VEC_2F, VEC_3F and VEC_4F")}},Xp.$metadata$={kind:$,simpleName:"CombineNode",interfaces:[rp]},Kp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inXyz,this.inW])},Kp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = vec4("+this.inXyz.ref3f_61zpoe$()+", "+this.inW.ref1f_61zpoe$()+");")},Kp.$metadata$={kind:$,simpleName:"Combine31Node",interfaces:[rp]},Yp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),e.isType(t,Ju)||c();var i=t.requiredVertexAttributes,n=this.attribute;i.add_11rb$(n)},Yp.$metadata$={kind:$,simpleName:"AttributeNode",interfaces:[rp]},Zp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),e.isType(t,Ju)||c();var i=t.requiredInstanceAttributes,n=this.attribute;i.add_11rb$(n)},Zp.$metadata$={kind:$,simpleName:"InstanceAttributeNode",interfaces:[rp]},Object.defineProperty(Jp.prototype,"input",{configurable:!0,get:function(){return this.input_h7hmfg$_0},set:function(t){this.output=new op(new gu(this.name,t.variable.type),this.fragmentNode),this.input_h7hmfg$_0=t}}),Object.defineProperty(Jp.prototype,"output",{configurable:!0,get:function(){return this.output_ftovqj$_0},set:function(t){this.output_ftovqj$_0=t}}),Object.defineProperty(Jp.prototype,"ifVar_0",{configurable:!0,get:function(){return null==this.ifVar_hcczpo$_0?ct("ifVar"):this.ifVar_hcczpo$_0},set:function(t){this.ifVar_hcczpo$_0=t}}),Object.defineProperty(Qp.prototype,"input",{configurable:!0,get:function(){return this.ifNode.input},set:function(t){this.ifNode.input=t}}),Qp.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input),this.$outer.ifVar_0=t.addStageOutput_ca2n0y$(this.$outer.output.variable,this.$outer.isFlat)},Qp.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.$outer.output.name+" = "+this.input.refAsType_fz5f65$(this.$outer.output.variable.type)+";")},Qp.$metadata$={kind:$,simpleName:"InputNode",interfaces:[rp]},Object.defineProperty(tc.prototype,"output",{configurable:!0,get:function(){return this.ifNode.output}}),tc.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t);var e=t.inputs,i=this.$outer.ifVar_0;e.add_11rb$(i)},tc.$metadata$={kind:$,simpleName:"OutputNode",interfaces:[rp]},Jp.$metadata$={kind:$,simpleName:"StageInterfaceNode",interfaces:[]},ec.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewport)},ec.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n            "+this.outNormalizedScreenCoord.declare()+" = "+this.outScreenCoord.ref3f_61zpoe$()+";\n            "+this.outNormalizedScreenCoord+".xy - "+this.inViewport.ref2f_61zpoe$()+";\n            "+this.outNormalizedScreenCoord+".xy /= "+this.inViewport.ref4f_61zpoe$()+".zw;\n        ")},ec.$metadata$={kind:$,simpleName:"ScreenCoordNode",interfaces:[rp]},ic.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inTexCoord,this.inDepth])},ic.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outQuadPos.declare()+" = vec4("+this.inTexCoord.ref2f_61zpoe$()+" * 2.0 - 1.0, "+this.inDepth.ref1f_61zpoe$()+", 1.0);")},ic.$metadata$={kind:$,simpleName:"FullScreenQuadTexPosNode",interfaces:[rp]},nc.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inWeights0,this.inWeights1])},nc.prototype.generateCode_626509$=function(t){var e,i=this.iWeight<4?this.inWeights0:this.inWeights1;switch(this.iWeight%4){case 0:e="x";break;case 1:e="y";break;case 2:e="z";break;default:e="w"}var n=e;t.appendMain_61zpoe$(this.outWeight.declare()+" = "+i.ref4f_61zpoe$()+"."+n+";")},nc.$metadata$={kind:$,simpleName:"GetMorphWeightNode",interfaces:[rp]},Object.defineProperty(rc.prototype,"input",{configurable:!0,get:function(){return this.input_llsvnw$_0},set:function(t){this.input_llsvnw$_0=t,this.output=new op(new gu(this.name,t.variable.type),this)}}),Object.defineProperty(rc.prototype,"output",{configurable:!0,get:function(){return this.output_a35q23$_0},set:function(t){this.output_a35q23$_0=t}}),rc.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.input)},rc.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.output.declare()+" = "+this.input+";")},rc.$metadata$={kind:$,simpleName:"NamedVariableNode",interfaces:[rp]},oc.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inSize)},oc.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("gl_PointSize = "+this.inSize.ref1f_61zpoe$()+";")},oc.$metadata$={kind:$,simpleName:"PointSizeNode",interfaces:[rp]},sc.$metadata$={kind:$,simpleName:"ShaderStage",interfaces:[T]},sc.values=function(){return[lc(),uc(),pc(),cc(),hc(),dc()]},sc.valueOf_61zpoe$=function(t){switch(t){case"VERTEX_SHADER":return lc();case"TESSELEATION_CTRL":return uc();case"TESSELATION_EVAL":return pc();case"GEOMETRY_SHADER":return cc();case"FRAGMENT_SHADER":return hc();case"ALL":return dc();default:P("No enum constant de.fabmax.kool.pipeline.ShaderStage."+t)}},fc.$metadata$={kind:$,simpleName:"Albedo",interfaces:[T]},fc.values=function(){return[mc(),$c(),yc(),vc()]},fc.valueOf_61zpoe$=function(t){switch(t){case"CUBE_MAP_ALBEDO":return mc();case"STATIC_ALBEDO":return $c();case"TEXTURE_ALBEDO":return yc();case"VERTEX_ALBEDO":return vc();default:P("No enum constant de.fabmax.kool.pipeline.shading.Albedo."+t)}},gc.$metadata$={kind:$,simpleName:"AlphaMode",interfaces:[]},bc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))},bc.prototype.hashCode=function(){return e.getKClassFromExpression(this).hashCode()},bc.$metadata$={kind:$,simpleName:"AlphaModeBlend",interfaces:[gc]},xc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))},xc.prototype.hashCode=function(){return e.getKClassFromExpression(this).hashCode()},xc.$metadata$={kind:$,simpleName:"AlphaModeOpaque",interfaces:[gc]},wc.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,wc)||c(),this.cutOff===t.cutOff)},wc.prototype.hashCode=function(){return st(this.cutOff)},wc.$metadata$={kind:$,simpleName:"AlphaModeMask",interfaces:[gc]},zc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){var n,r;this.model.setup_xbeod6$(e,t),t.shaderCodeGenerator=(n=i,r=this,function(t){return n.shaderGenerator.generateShader_lvmec3$(r.model,t,n)}),Ll.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Object.defineProperty(kc.prototype,"color",{configurable:!0,get:function(){return this.color_cjijrc$_0},set:function(t){var e,i;this.color_cjijrc$_0=t,null!=(i=null!=(e=this.uColor_0)?e.value:null)&&i.set_czzhhz$(t)}}),kc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u=this.model;t:do{var p;for(a=sc.ALL,p=u.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&a.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(Lt($.name,"uStaticColor")&&e.isType($,Fp)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,Fp)?d:c();if(null!=y){l=y;break t}}}l=null}while(0);this.uColor_0=null!=(r=l)?r.uniform:null,null!=(s=null!=(o=this.uColor_0)?o.value:null)&&s.set_czzhhz$(this.color),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},kc.$metadata$={kind:$,simpleName:"StaticColor",interfaces:[zc]},Sc.$metadata$={kind:$,simpleName:"VertexColor",interfaces:[zc]},Object.defineProperty(Cc.prototype,"texture",{configurable:!0,get:function(){return this.texture_smcrab$_0},set:function(t){var e;this.texture_smcrab$_0=t,null!=(e=this.textureSampler_0)&&(e.texture=t)}}),Cc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l=this.model,u=this.texName_0;t:do{var p;for(s=sc.ALL,p=l.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&s.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(Lt($.name,u)&&e.isType($,Ep)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,Ep)?d:c();if(null!=y){a=y;break t}}}a=null}while(0);this.textureSampler_0=null!=(r=a)?r.sampler:null,null!=(o=this.textureSampler_0)&&(o.texture=this.texture),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Cc.$metadata$={kind:$,simpleName:"TextureColor",interfaces:[zc]},Object.defineProperty(Nc.prototype,"texture",{configurable:!0,get:function(){return this.texture_mz7wkp$_0},set:function(t){var e;this.texture_mz7wkp$_0=t,null!=(e=this.cubeMapSampler_0)&&(e.texture=t)}}),Nc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l=this.model,u=this.texName_0;t:do{var p;for(s=sc.ALL,p=l.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&s.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(Lt($.name,u)&&e.isType($,Mp)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,Mp)?d:c();if(null!=y){a=y;break t}}}a=null}while(0);this.cubeMapSampler_0=null!=(r=a)?r.sampler:null,null!=(o=this.cubeMapSampler_0)&&(o.texture=this.texture),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Nc.$metadata$={kind:$,simpleName:"CubeMapColor",interfaces:[zc]},Ec.prototype.staticColorModel_0=function(){var t=new tp("ModeledShader.staticColor()"),e=new ip(t);e.positionOutput=e.simpleVertexPositionNode().outVec4;var i=new np(t),n=i.pushConstantNodeColor_61zpoe$("uStaticColor");return i.colorOutput_a3v4si$(i.unlitMaterialNode_r20yfm$(n.output).outColor),t},Ec.prototype.vertexColorModel_0=function(){var t=new tp("ModeledShader.vertexColor()"),e={v:null},i=new ip(t);e.v=i.stageInterfaceNode_iikjwn$("ifColors",i.attrColors().output),i.positionOutput=i.simpleVertexPositionNode().outVec4;var n=new np(t);return n.colorOutput_a3v4si$(n.unlitMaterialNode_r20yfm$(e.v.output).outColor),t},Ec.prototype.textureColorModel_0=function(t){var e=new tp("ModeledShader.textureColor()"),i={v:null},n=new ip(e);i.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),n.positionOutput=n.simpleVertexPositionNode().outVec4;var r=new np(e),o=r.texture2dSamplerNode_fzevit$(r.texture2dNode_61zpoe$(t),i.v.output);return r.colorOutput_a3v4si$(r.unlitMaterialNode_r20yfm$(o.outColor).outColor),e},Ec.prototype.cubeMapColorModel_0=function(t){var e=new tp("ModeledShader.cubeMapColor()"),i={v:null},n=new ip(e),r=n.mvpNode(),o=n.vec4TransformNode_9krp9t$(n.attrPositions().output,r.outModelMat,1);i.v=n.stageInterfaceNode_iikjwn$("ifFragPos",o.outVec4),n.positionOutput=n.vec4TransformNode_9krp9t$(n.attrPositions().output,r.outMvpMat).outVec4;var s=new np(e),a=s.normalizeNode_r20yfm$(i.v.output),l=s.textureCubeSamplerNode_ub8j0u$(s.textureCubeNode_61zpoe$(t),a.output);return s.colorOutput_a3v4si$(s.unlitMaterialNode_r20yfm$(l.outColor).outColor),e},Ec.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Tc=null;function Pc(){return null===Tc&&new Ec,Tc}function Oc(){this.albedoSource=vc(),this.isEmissiveMapped=!1,this.isNormalMapped=!1,this.isRoughnessMapped=!1,this.isMetallicMapped=!1,this.isOcclusionMapped=!1,this.isDisplacementMapped=!1,this.isInstanced=!1,this.isSkinned=!1,this.maxJoints=64,this.morphAttributes=M(),this.isMultiplyAlbedoMap=!1,this.isMultiplyEmissiveMap=!1,this.isMultiplyRoughnessMap=!1,this.isMultiplyMetallicMap=!1,this.isImageBasedLighting=!1,this.isScrSpcAmbientOcclusion=!1,this.isRefraction=!1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.cullMethod=Tl(),this.alphaMode=new xc,this.isHdrOutput=!1,this.roughnessChannel="r",this.roughnessTexName="tRoughness",this.metallicChannel="r",this.metallicTexName="tMetallic",this.occlusionChannel="r",this.occlusionTexName="tOcclusion",this.albedo=Oy().GRAY,this.emissive=Oy().BLACK,this.roughness=.5,this.metallic=0,this.refractionIor=1.4,this.materialThickness=1,this.normalStrength=1,this.displacementStrength=.1,this.occlusionStrength=1,this.reflectionStrength=1,this.albedoMap=null,this.emissiveMap=null,this.normalMap=null,this.displacementMap=null,this.roughnessMap=null,this.metallicMap=null,this.occlusionMap=null,this.environmentMaps=null,this.scrSpcAmbientOcclusionMap=null,this.refractionColorMap=null}function Mc(t){var e=new Oc;return t(e),new jc(e)}function jc(t,i){Rc(),void 0===i&&(i=Rc().defaultPbrModel_2ufela$(t)),zc.call(this,i),this.cullMethod_0=t.cullMethod,this.isBlending_0=e.isType(t.alphaMode,bc);var n,r=I(t.shadowMaps.size);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=t.shadowMaps.get_za3lpa$(o);this.shadowMaps_0=r,this.isReceivingShadow_0=!t.shadowMaps.isEmpty(),this.uRoughness_0=null,this.uMetallic_0=null,this.uAlbedo_0=null,this.uEmissive_0=null,this.uReflectionStrength_0=null,this.metallic_3y0qh7$_0=t.metallic,this.roughness_6ti3qe$_0=t.roughness,this.albedo_iz6fyn$_0=t.albedo,this.emissive_ybel2l$_0=t.emissive,this.reflectionStrength_itx8hq$_0=t.reflectionStrength,this.albedoSampler_0=null,this.emissiveSampler_0=null,this.normalSampler_0=null,this.metallicSampler_0=null,this.roughnessSampler_0=null,this.occlusionSampler_0=null,this.displacementSampler_0=null,this.uDispStrength_0=null,this.metallicTexName_0=t.metallicTexName,this.roughnessTexName_0=t.roughnessTexName,this.occlusionTexName_0=t.occlusionTexName,this.albedoMap_el88rd$_0=t.albedoMap,this.emissiveMap_frsh8l$_0=t.emissiveMap,this.normalMap_4f5ej9$_0=t.normalMap,this.metallicMap_uadmur$_0=t.metallicMap,this.roughnessMap_c1s1r6$_0=t.roughnessMap,this.occlusionMap_npdkt7$_0=t.occlusionMap,this.displacementMap_lffg8r$_0=t.displacementMap,this.displacementStrength_mpg4z2$_0=t.displacementStrength,this.uAmbient_0=null;var s,a,l,u,p=I(this.shadowMaps_0.length);s=p.length-1|0;for(var c=0;c<=s;c++)p[c]=null;this.depthSamplers_0=p,this.ambient_5b16r2$_0=new Ey(.03,.03,.03,1),this.irradianceMapSampler_0=null,this.reflectionMapSampler_0=null,this.brdfLutSampler_0=null,this.irradianceMap_wb8dgm$_0=null!=(a=t.environmentMaps)?a.irradianceMap:null,this.reflectionMap_oydyp3$_0=null!=(l=t.environmentMaps)?l.reflectionMap:null,this.brdfLut_qrgoz5$_0=null!=(u=t.environmentMaps)?u.brdfLut:null,this.ssaoSampler_0=null,this.scrSpcAmbientOcclusionMap_94u3nd$_0=t.scrSpcAmbientOcclusionMap,this.uMaterialThickness_0=null,this.materialThickness_egefyb$_0=t.materialThickness,this.refractionColorSampler_0=null,this.refractionColorMap_mqtkjo$_0=t.refractionColorMap}function Ac(){Ic=this}zc.$metadata$={kind:$,simpleName:"ModeledShader",interfaces:[Ll]},Oc.prototype.useStaticAlbedo_d7aj7k$=function(t){this.albedoSource=$c(),this.albedo=t},Oc.prototype.useAlbedoMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useAlbedoMap_vzjalu$(Th(t),e)},Oc.prototype.useAlbedoMap_vzjalu$=function(t,e){void 0===e&&(e=!1),this.albedoMap=t,this.isMultiplyAlbedoMap=e,this.albedoSource=yc()},Oc.prototype.useNormalMap_9sobi5$=function(t,e){void 0===e&&(e=this.normalStrength),this.useNormalMap_w253oa$(Th(t),e)},Oc.prototype.useNormalMap_w253oa$=function(t,e){void 0===e&&(e=this.normalStrength),this.normalMap=t,this.normalStrength=e,this.isNormalMapped=!0},Oc.prototype.useOcclusionMap_9sobi5$=function(t,e){void 0===e&&(e=this.occlusionStrength),this.useOcclusionMap_w253oa$(Th(t),e)},Oc.prototype.useOcclusionMap_w253oa$=function(t,e){void 0===e&&(e=this.occlusionStrength),this.occlusionMap=t,this.occlusionStrength=e,this.isOcclusionMapped=!0},Oc.prototype.useDisplacementMap_9sobi5$=function(t,e){void 0===e&&(e=this.displacementStrength),this.useDisplacementMap_w253oa$(Th(t),e)},Oc.prototype.useDisplacementMap_w253oa$=function(t,e){void 0===e&&(e=this.displacementStrength),this.displacementMap=t,this.displacementStrength=e,this.isDisplacementMapped=!0},Oc.prototype.useEmissiveMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useEmissiveMap_vzjalu$(Th(t),e)},Oc.prototype.useEmissiveMap_vzjalu$=function(t,e){void 0===e&&(e=!1),this.emissiveMap=t,this.isMultiplyEmissiveMap=e,this.isEmissiveMapped=!0},Oc.prototype.useMetallicMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useMetallicMap_vzjalu$(Th(t),e)},Oc.prototype.useMetallicMap_vzjalu$=function(t,e){void 0===e&&(e=!1),this.metallicMap=t,this.isMultiplyMetallicMap=e,this.isMetallicMapped=!0},Oc.prototype.useRoughnessMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useRoughnessMap_vzjalu$(Th(t),e)},Oc.prototype.useRoughnessMap_vzjalu$=function(t,e){void 0===e&&(e=!1),this.roughnessMap=t,this.isMultiplyRoughnessMap=e,this.isRoughnessMapped=!0},Oc.prototype.useScreenSpaceAmbientOcclusion_9cjgzv$=function(t){this.scrSpcAmbientOcclusionMap=t,this.isScrSpcAmbientOcclusion=!0},Oc.prototype.useRefraction_9cjgzv$=function(t){this.refractionColorMap=t,this.isRefraction=null!=this.refractionColorMap},Oc.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isImageBasedLighting=null!=t},Oc.prototype.requiresTexCoords=function(){return this.albedoSource===yc()||this.isNormalMapped||this.isRoughnessMapped||this.isMetallicMapped||this.isOcclusionMapped||this.isDisplacementMapped},Oc.$metadata$={kind:$,simpleName:"PbrMaterialConfig",interfaces:[]},Object.defineProperty(jc.prototype,"metallic",{configurable:!0,get:function(){return this.metallic_3y0qh7$_0},set:function(t){var e,i;this.metallic_3y0qh7$_0=t,null!=(i=null!=(e=this.uMetallic_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(jc.prototype,"roughness",{configurable:!0,get:function(){return this.roughness_6ti3qe$_0},set:function(t){var e,i;this.roughness_6ti3qe$_0=t,null!=(i=null!=(e=this.uRoughness_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(jc.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_iz6fyn$_0},set:function(t){var e,i,n;this.albedo_iz6fyn$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(jc.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_ybel2l$_0},set:function(t){var e,i,n;this.emissive_ybel2l$_0=t,null!=(n=null!=(i=null!=(e=this.uEmissive_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(jc.prototype,"reflectionStrength",{configurable:!0,get:function(){return this.reflectionStrength_itx8hq$_0},set:function(t){var e,i;this.reflectionStrength_itx8hq$_0=t,null!=(i=null!=(e=this.uReflectionStrength_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(jc.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_el88rd$_0},set:function(t){var e;this.albedoMap_el88rd$_0=t,null!=(e=this.albedoSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"emissiveMap",{configurable:!0,get:function(){return this.emissiveMap_frsh8l$_0},set:function(t){var e;this.emissiveMap_frsh8l$_0=t,null!=(e=this.emissiveSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_4f5ej9$_0},set:function(t){var e;this.normalMap_4f5ej9$_0=t,null!=(e=this.normalSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"metallicMap",{configurable:!0,get:function(){return this.metallicMap_uadmur$_0},set:function(t){var e;this.metallicMap_uadmur$_0=t,null!=(e=this.metallicSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"roughnessMap",{configurable:!0,get:function(){return this.roughnessMap_c1s1r6$_0},set:function(t){var e;this.roughnessMap_c1s1r6$_0=t,null!=(e=this.roughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"occlusionMap",{configurable:!0,get:function(){return this.occlusionMap_npdkt7$_0},set:function(t){var e;this.occlusionMap_npdkt7$_0=t,null!=(e=this.occlusionSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"displacementMap",{configurable:!0,get:function(){return this.displacementMap_lffg8r$_0},set:function(t){var e;this.displacementMap_lffg8r$_0=t,null!=(e=this.displacementSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"displacementStrength",{configurable:!0,get:function(){return this.displacementStrength_mpg4z2$_0},set:function(t){var e,i;this.displacementStrength_mpg4z2$_0=t,null!=(i=null!=(e=this.uDispStrength_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(jc.prototype,"ambient",{configurable:!0,get:function(){return this.ambient_5b16r2$_0},set:function(t){var e,i,n;this.ambient_5b16r2$_0=t,null!=(n=null!=(i=null!=(e=this.uAmbient_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(jc.prototype,"irradianceMap",{configurable:!0,get:function(){return this.irradianceMap_wb8dgm$_0},set:function(t){var e;this.irradianceMap_wb8dgm$_0=t,null!=(e=this.irradianceMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"reflectionMap",{configurable:!0,get:function(){return this.reflectionMap_oydyp3$_0},set:function(t){var e;this.reflectionMap_oydyp3$_0=t,null!=(e=this.reflectionMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"brdfLut",{configurable:!0,get:function(){return this.brdfLut_qrgoz5$_0},set:function(t){var e;this.brdfLut_qrgoz5$_0=t,null!=(e=this.brdfLutSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"scrSpcAmbientOcclusionMap",{configurable:!0,get:function(){return this.scrSpcAmbientOcclusionMap_94u3nd$_0},set:function(t){var e;this.scrSpcAmbientOcclusionMap_94u3nd$_0=t,null!=(e=this.ssaoSampler_0)&&(e.texture=t)}}),Object.defineProperty(jc.prototype,"materialThickness",{configurable:!0,get:function(){return this.materialThickness_egefyb$_0},set:function(t){var e,i;this.materialThickness_egefyb$_0=t,null!=(i=null!=(e=this.uMaterialThickness_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(jc.prototype,"refractionColorMap",{configurable:!0,get:function(){return this.refractionColorMap_mqtkjo$_0},set:function(t){var e;this.refractionColorMap_mqtkjo$_0=t,null!=(e=this.refractionColorSampler_0)&&(e.texture=t)}}),jc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_0,t.blendMode=this.isBlending_0?_l():hl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},jc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,T,P,O,M,j,A,I,R,L,D,q,F,B,U,V,G,H,W=this.model;t:do{var X;for(G=sc.ALL,X=W.stages.values.iterator();X.hasNext();){var K=X.next();if(0!=(K.stage.mask&G.mask)){var Y,Z,J=K.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(Lt(tt.name,"uMetallic")&&e.isType(tt,Rp)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,Rp)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);this.uMetallic_0=H,null!=(r=this.uMetallic_0)&&(r.uniform.value=this.metallic);var it,nt,rt=this.model;t:do{var ot;for(it=sc.ALL,ot=rt.stages.values.iterator();ot.hasNext();){var st=ot.next();if(0!=(st.stage.mask&it.mask)){var at,lt,ut=st.nodes;e:do{var pt;for(pt=ut.iterator();pt.hasNext();){var ct=pt.next();if(Lt(ct.name,"uRoughness")&&e.isType(ct,Rp)){lt=ct;break e}}lt=null}while(0);var ht=null==(at=lt)||e.isType(at,Rp)?at:c();if(null!=ht){nt=ht;break t}}}nt=null}while(0);this.uRoughness_0=nt,null!=(o=this.uRoughness_0)&&(o.uniform.value=this.roughness);var dt,ft,_t=this.model;t:do{var mt;for(dt=sc.ALL,mt=_t.stages.values.iterator();mt.hasNext();){var $t=mt.next();if(0!=($t.stage.mask&dt.mask)){var yt,vt,gt=$t.nodes;e:do{var bt;for(bt=gt.iterator();bt.hasNext();){var xt=bt.next();if(Lt(xt.name,"uAlbedo")&&e.isType(xt,Fp)){vt=xt;break e}}vt=null}while(0);var wt=null==(yt=vt)||e.isType(yt,Fp)?yt:c();if(null!=wt){ft=wt;break t}}}ft=null}while(0);this.uAlbedo_0=ft,null!=(l=null!=(a=null!=(s=this.uAlbedo_0)?s.uniform:null)?a.value:null)&&l.set_czzhhz$(this.albedo);var zt,kt,St=this.model;t:do{var Ct;for(zt=sc.ALL,Ct=St.stages.values.iterator();Ct.hasNext();){var Nt=Ct.next();if(0!=(Nt.stage.mask&zt.mask)){var Et,Tt,Pt=Nt.nodes;e:do{var Ot;for(Ot=Pt.iterator();Ot.hasNext();){var Mt=Ot.next();if(Lt(Mt.name,"uEmissive")&&e.isType(Mt,Fp)){Tt=Mt;break e}}Tt=null}while(0);var jt=null==(Et=Tt)||e.isType(Et,Fp)?Et:c();if(null!=jt){kt=jt;break t}}}kt=null}while(0);this.uEmissive_0=kt,null!=(h=null!=(p=null!=(u=this.uEmissive_0)?u.uniform:null)?p.value:null)&&h.set_czzhhz$(this.emissive);var At,It,Rt=this.model;t:do{var Dt;for(At=sc.ALL,Dt=Rt.stages.values.iterator();Dt.hasNext();){var qt=Dt.next();if(0!=(qt.stage.mask&At.mask)){var Ft,Bt,Ut=qt.nodes;e:do{var Vt;for(Vt=Ut.iterator();Vt.hasNext();){var Gt=Vt.next();if(Lt(Gt.name,"uReflectionStrength")&&e.isType(Gt,Rp)){Bt=Gt;break e}}Bt=null}while(0);var Ht=null==(Ft=Bt)||e.isType(Ft,Rp)?Ft:c();if(null!=Ht){It=Ht;break t}}}It=null}while(0);this.uReflectionStrength_0=It,null!=(f=null!=(d=this.uReflectionStrength_0)?d.uniform:null)&&(f.value=this.reflectionStrength);var Wt,Xt,Kt=this.model;t:do{var Yt;for(Wt=sc.ALL,Yt=Kt.stages.values.iterator();Yt.hasNext();){var Zt=Yt.next();if(0!=(Zt.stage.mask&Wt.mask)){var Jt,Qt,te=Zt.nodes;e:do{var ee;for(ee=te.iterator();ee.hasNext();){var ie=ee.next();if(Lt(ie.name,"uAmbient")&&e.isType(ie,Fp)){Qt=ie;break e}}Qt=null}while(0);var ne=null==(Jt=Qt)||e.isType(Jt,Fp)?Jt:c();if(null!=ne){Xt=ne;break t}}}Xt=null}while(0);if(this.uAmbient_0=Xt,null!=($=null!=(m=null!=(_=this.uAmbient_0)?_.uniform:null)?m.value:null)&&$.set_czzhhz$(this.ambient),this.isReceivingShadow_0){y=this.depthSamplers_0;for(var re=0;re!==y.length;++re){var oe,se,ae,le=this.model,ue="depthMap_"+re;t:do{var pe;for(se=sc.ALL,pe=le.stages.values.iterator();pe.hasNext();){var ce=pe.next();if(0!=(ce.stage.mask&se.mask)){var he,de,fe=ce.nodes;e:do{var _e;for(_e=fe.iterator();_e.hasNext();){var me=_e.next();if(Lt(me.name,ue)&&e.isType(me,Ep)){de=me;break e}}de=null}while(0);var $e=null==(he=de)||e.isType(he,Ep)?he:c();if(null!=$e){ae=$e;break t}}}ae=null}while(0);var ye=null!=(oe=ae)?oe.sampler:null;this.depthSamplers_0[re]=ye,this.shadowMaps_0[re].setupSampler_wl9pml$(ye)}}var ve,ge,be=this.model;t:do{var xe;for(ve=sc.ALL,xe=be.stages.values.iterator();xe.hasNext();){var we=xe.next();if(0!=(we.stage.mask&ve.mask)){var ze,ke,Se=we.nodes;e:do{var Ce;for(Ce=Se.iterator();Ce.hasNext();){var Ne=Ce.next();if(Lt(Ne.name,"irradianceMap")&&e.isType(Ne,Mp)){ke=Ne;break e}}ke=null}while(0);var Ee=null==(ze=ke)||e.isType(ze,Mp)?ze:c();if(null!=Ee){ge=Ee;break t}}}ge=null}while(0);this.irradianceMapSampler_0=null!=(v=ge)?v.sampler:null,null!=(g=this.irradianceMapSampler_0)&&(g.texture=this.irradianceMap);var Te,Pe,Oe=this.model;t:do{var Me;for(Te=sc.ALL,Me=Oe.stages.values.iterator();Me.hasNext();){var je=Me.next();if(0!=(je.stage.mask&Te.mask)){var Ae,Ie,Re=je.nodes;e:do{var Le;for(Le=Re.iterator();Le.hasNext();){var De=Le.next();if(Lt(De.name,"reflectionMap")&&e.isType(De,Mp)){Ie=De;break e}}Ie=null}while(0);var qe=null==(Ae=Ie)||e.isType(Ae,Mp)?Ae:c();if(null!=qe){Pe=qe;break t}}}Pe=null}while(0);this.reflectionMapSampler_0=null!=(b=Pe)?b.sampler:null,null!=(x=this.reflectionMapSampler_0)&&(x.texture=this.reflectionMap);var Fe,Be,Ue=this.model;t:do{var Ve;for(Fe=sc.ALL,Ve=Ue.stages.values.iterator();Ve.hasNext();){var Ge=Ve.next();if(0!=(Ge.stage.mask&Fe.mask)){var He,We,Xe=Ge.nodes;e:do{var Ke;for(Ke=Xe.iterator();Ke.hasNext();){var Ye=Ke.next();if(Lt(Ye.name,"brdfLut")&&e.isType(Ye,Ep)){We=Ye;break e}}We=null}while(0);var Ze=null==(He=We)||e.isType(He,Ep)?He:c();if(null!=Ze){Be=Ze;break t}}}Be=null}while(0);this.brdfLutSampler_0=null!=(w=Be)?w.sampler:null,null!=(z=this.brdfLutSampler_0)&&(z.texture=this.brdfLut);var Je,Qe,ti=this.model;t:do{var ei;for(Je=sc.ALL,ei=ti.stages.values.iterator();ei.hasNext();){var ii=ei.next();if(0!=(ii.stage.mask&Je.mask)){var ni,ri,oi=ii.nodes;e:do{var si;for(si=oi.iterator();si.hasNext();){var ai=si.next();if(Lt(ai.name,"ssaoMap")&&e.isType(ai,Ep)){ri=ai;break e}}ri=null}while(0);var li=null==(ni=ri)||e.isType(ni,Ep)?ni:c();if(null!=li){Qe=li;break t}}}Qe=null}while(0);this.ssaoSampler_0=null!=(k=Qe)?k.sampler:null,null!=(S=this.ssaoSampler_0)&&(S.texture=this.scrSpcAmbientOcclusionMap);var ui,pi,ci=this.model;t:do{var hi;for(ui=sc.ALL,hi=ci.stages.values.iterator();hi.hasNext();){var di=hi.next();if(0!=(di.stage.mask&ui.mask)){var fi,_i,mi=di.nodes;e:do{var $i;for($i=mi.iterator();$i.hasNext();){var yi=$i.next();if(Lt(yi.name,"uMaterialThickness")&&e.isType(yi,Rp)){_i=yi;break e}}_i=null}while(0);var vi=null==(fi=_i)||e.isType(fi,Rp)?fi:c();if(null!=vi){pi=vi;break t}}}pi=null}while(0);this.uMaterialThickness_0=pi,null!=(C=this.uMaterialThickness_0)&&(C.uniform.value=this.materialThickness);var gi,bi,xi=this.model;t:do{var wi;for(gi=sc.ALL,wi=xi.stages.values.iterator();wi.hasNext();){var zi=wi.next();if(0!=(zi.stage.mask&gi.mask)){var ki,Si,Ci=zi.nodes;e:do{var Ni;for(Ni=Ci.iterator();Ni.hasNext();){var Ei=Ni.next();if(Lt(Ei.name,"tRefractionColor")&&e.isType(Ei,Ep)){Si=Ei;break e}}Si=null}while(0);var Ti=null==(ki=Si)||e.isType(ki,Ep)?ki:c();if(null!=Ti){bi=Ti;break t}}}bi=null}while(0);this.refractionColorSampler_0=null!=(N=bi)?N.sampler:null,null!=(E=this.refractionColorSampler_0)&&(E.texture=this.refractionColorMap);var Pi,Oi,Mi=this.model;t:do{var ji;for(Pi=sc.ALL,ji=Mi.stages.values.iterator();ji.hasNext();){var Ai=ji.next();if(0!=(Ai.stage.mask&Pi.mask)){var Ii,Ri,Li=Ai.nodes;e:do{var Di;for(Di=Li.iterator();Di.hasNext();){var qi=Di.next();if(Lt(qi.name,"tAlbedo")&&e.isType(qi,Ep)){Ri=qi;break e}}Ri=null}while(0);var Fi=null==(Ii=Ri)||e.isType(Ii,Ep)?Ii:c();if(null!=Fi){Oi=Fi;break t}}}Oi=null}while(0);this.albedoSampler_0=null!=(T=Oi)?T.sampler:null,null!=(P=this.albedoSampler_0)&&(P.texture=this.albedoMap);var Bi,Ui,Vi=this.model;t:do{var Gi;for(Bi=sc.ALL,Gi=Vi.stages.values.iterator();Gi.hasNext();){var Hi=Gi.next();if(0!=(Hi.stage.mask&Bi.mask)){var Wi,Xi,Ki=Hi.nodes;e:do{var Yi;for(Yi=Ki.iterator();Yi.hasNext();){var Zi=Yi.next();if(Lt(Zi.name,"tEmissive")&&e.isType(Zi,Ep)){Xi=Zi;break e}}Xi=null}while(0);var Ji=null==(Wi=Xi)||e.isType(Wi,Ep)?Wi:c();if(null!=Ji){Ui=Ji;break t}}}Ui=null}while(0);this.emissiveSampler_0=null!=(O=Ui)?O.sampler:null,null!=(M=this.emissiveSampler_0)&&(M.texture=this.emissiveMap);var Qi,tn,en=this.model;t:do{var nn;for(Qi=sc.ALL,nn=en.stages.values.iterator();nn.hasNext();){var rn=nn.next();if(0!=(rn.stage.mask&Qi.mask)){var on,sn,an=rn.nodes;e:do{var ln;for(ln=an.iterator();ln.hasNext();){var un=ln.next();if(Lt(un.name,"tNormal")&&e.isType(un,Ep)){sn=un;break e}}sn=null}while(0);var pn=null==(on=sn)||e.isType(on,Ep)?on:c();if(null!=pn){tn=pn;break t}}}tn=null}while(0);this.normalSampler_0=null!=(j=tn)?j.sampler:null,null!=(A=this.normalSampler_0)&&(A.texture=this.normalMap);var cn,hn,dn=this.model,fn=this.metallicTexName_0;t:do{var _n;for(cn=sc.ALL,_n=dn.stages.values.iterator();_n.hasNext();){var mn=_n.next();if(0!=(mn.stage.mask&cn.mask)){var $n,yn,vn=mn.nodes;e:do{var gn;for(gn=vn.iterator();gn.hasNext();){var bn=gn.next();if(Lt(bn.name,fn)&&e.isType(bn,Ep)){yn=bn;break e}}yn=null}while(0);var xn=null==($n=yn)||e.isType($n,Ep)?$n:c();if(null!=xn){hn=xn;break t}}}hn=null}while(0);this.metallicSampler_0=null!=(I=hn)?I.sampler:null,null!=(R=this.metallicSampler_0)&&(R.texture=this.metallicMap);var wn,zn,kn=this.model,Sn=this.roughnessTexName_0;t:do{var Cn;for(wn=sc.ALL,Cn=kn.stages.values.iterator();Cn.hasNext();){var Nn=Cn.next();if(0!=(Nn.stage.mask&wn.mask)){var En,Tn,Pn=Nn.nodes;e:do{var On;for(On=Pn.iterator();On.hasNext();){var Mn=On.next();if(Lt(Mn.name,Sn)&&e.isType(Mn,Ep)){Tn=Mn;break e}}Tn=null}while(0);var jn=null==(En=Tn)||e.isType(En,Ep)?En:c();if(null!=jn){zn=jn;break t}}}zn=null}while(0);this.roughnessSampler_0=null!=(L=zn)?L.sampler:null,null!=(D=this.roughnessSampler_0)&&(D.texture=this.roughnessMap);var An,In,Rn=this.model,Ln=this.occlusionTexName_0;t:do{var Dn;for(An=sc.ALL,Dn=Rn.stages.values.iterator();Dn.hasNext();){var qn=Dn.next();if(0!=(qn.stage.mask&An.mask)){var Fn,Bn,Un=qn.nodes;e:do{var Vn;for(Vn=Un.iterator();Vn.hasNext();){var Gn=Vn.next();if(Lt(Gn.name,Ln)&&e.isType(Gn,Ep)){Bn=Gn;break e}}Bn=null}while(0);var Hn=null==(Fn=Bn)||e.isType(Fn,Ep)?Fn:c();if(null!=Hn){In=Hn;break t}}}In=null}while(0);this.occlusionSampler_0=null!=(q=In)?q.sampler:null,null!=(F=this.occlusionSampler_0)&&(F.texture=this.occlusionMap);var Wn,Xn,Kn=this.model;t:do{var Yn;for(Wn=sc.ALL,Yn=Kn.stages.values.iterator();Yn.hasNext();){var Zn=Yn.next();if(0!=(Zn.stage.mask&Wn.mask)){var Jn,Qn,tr=Zn.nodes;e:do{var er;for(er=tr.iterator();er.hasNext();){var ir=er.next();if(Lt(ir.name,"tDisplacement")&&e.isType(ir,Ep)){Qn=ir;break e}}Qn=null}while(0);var nr=null==(Jn=Qn)||e.isType(Jn,Ep)?Jn:c();if(null!=nr){Xn=nr;break t}}}Xn=null}while(0);this.displacementSampler_0=null!=(B=Xn)?B.sampler:null,null!=(U=this.displacementSampler_0)&&(U.texture=this.displacementMap);var rr,or,sr=this.model;t:do{var ar;for(rr=sc.ALL,ar=sr.stages.values.iterator();ar.hasNext();){var lr=ar.next();if(0!=(lr.stage.mask&rr.mask)){var ur,pr,cr=lr.nodes;e:do{var hr;for(hr=cr.iterator();hr.hasNext();){var dr=hr.next();if(Lt(dr.name,"uDispStrength")&&e.isType(dr,Rp)){pr=dr;break e}}pr=null}while(0);var fr=null==(ur=pr)||e.isType(ur,Rp)?ur:c();if(null!=fr){or=fr;break t}}}or=null}while(0);this.uDispStrength_0=or,null!=(V=this.uDispStrength_0)&&(V.uniform.value=this.displacementStrength),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Ac.prototype.defaultPbrModel_2ufela$=function(t){var i,n,r,o=new tp("defaultPbrModel()"),s={v:null},a={v:null},l={v:null},p={v:null},c={v:null},h={v:null},d=M(),f=new ip(o);h.v=f.mvpNode();var _=f.namedVariable_wtmwsg$("modelMat",h.v.outModelMat),m=f.namedVariable_wtmwsg$("mvpMat",h.v.outMvpMat),$=_.output,y=m.output;if(t.isInstanced&&(_.input=f.multiplyNode_ze33is$(h.v.outModelMat,f.instanceAttrModelMat().output).output,m.input=f.multiplyNode_ze33is$(h.v.outMvpMat,f.instanceAttrModelMat().output).output),t.isSkinned){var v=f.skinTransformNode_78eraa$(f.attrJoints().output,f.attrWeights().output,t.maxJoints);_.input=f.multiplyNode_ze33is$(_.input,v.outJointMat).output,m.input=f.multiplyNode_ze33is$(m.input,v.outJointMat).output}if(t.requiresTexCoords()){var g=f.namedVariable_wtmwsg$("texCoordInput",f.attrTexCoords().output);i=f.stageInterfaceNode_iikjwn$("ifTexCoords",g.output)}else i=null;c.v=i,n=t.albedoSource===vc()?f.stageInterfaceNode_iikjwn$("ifColors",f.attrColors().output):null,s.v=n;var b,w,k=t.morphAttributes.isEmpty()?null:f.morphWeightsNode_za3lpa$(t.morphAttributes.size),S=f.namedVariable_wtmwsg$("localPosInput",f.attrPositions().output),C=f.namedVariable_wtmwsg$("localNormalInput",f.attrNormals().output),N={v:S.output},E=t.morphAttributes,T=M();for(b=E.iterator();b.hasNext();){var P=b.next();u(P.name,ds().POSITIONS.name)&&T.add_11rb$(P)}for(w=T.iterator();w.hasNext();){var O=w.next(),j=f.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(O),x(k)),A=f.multiplyNode_ze33is$(f.attributeNode_nm2vx5$(O).output,j.outWeight);N.v=f.addNode_ze33is$(N.v,A.output).output}var I,R,L=f.namedVariable_wtmwsg$("localPosMorphed",N.v),D={v:C.output},q=t.morphAttributes,F=M();for(I=q.iterator();I.hasNext();){var B=I.next();u(B.name,ds().NORMALS.name)&&F.add_11rb$(B)}for(R=F.iterator();R.hasNext();){var U=R.next(),V=f.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(U),x(k)),G=f.multiplyNode_ze33is$(f.attributeNode_nm2vx5$(U).output,V.outWeight);D.v=f.addNode_ze33is$(D.v,G.output).output}var H=f.namedVariable_wtmwsg$("localNormalMorphed",D.v);if(t.isNormalMapped){var W,X,K=f.namedVariable_wtmwsg$("localTangentInput",f.attrTangents().output),Y={v:f.splitNode_500t7j$(K.output,"xyz").output},Z=t.morphAttributes,J=M();for(W=Z.iterator();W.hasNext();){var Q=W.next();u(Q.name,ds().TANGENTS.name)&&J.add_11rb$(Q)}for(X=J.iterator();X.hasNext();){var et=X.next(),it=f.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(et),x(k)),nt=f.multiplyNode_ze33is$(f.attributeNode_nm2vx5$(et).output,it.outWeight);Y.v=f.addNode_ze33is$(Y.v,nt.output).output}var rt=f.vec3TransformNode_vid4wo$(Y.v,$,0),ot=f.combineXyzWNode_ze33is$(rt.outVec3,f.splitNode_500t7j$(K.output,"w").output);r=f.stageInterfaceNode_iikjwn$("ifTangents",ot.output)}else r=null;l.v=r;var st=f.namedVariable_wtmwsg$("localPosDisplaced",L.output);if(t.isDisplacementMapped){var at=f.texture2dNode_61zpoe$("tDisplacement"),lt=f.displacementMapNode_kq6xq$(at,x(c.v).input,L.output,H.output);lt.inStrength=f.pushConstantNode1f_61zpoe$("uDispStrength").output;var ut=lt;st.input=ut.outPosition}var pt=f.vec3TransformNode_vid4wo$(st.output,$,1).outVec3;p.v=f.stageInterfaceNode_iikjwn$("ifFragPos",pt);var ct=f.vec3TransformNode_vid4wo$(H.output,$,0);a.v=f.stageInterfaceNode_iikjwn$("ifNormals",ct.outVec3);var ht,dt,ft=f.vec4TransformNode_9krp9t$(pt,h.v.outViewMat).outVec4,_t=0;for(ht=t.shadowMaps.iterator();ht.hasNext();){var mt=ht.next(),$t=tt((_t=(dt=_t)+1|0,dt));if(e.isType(mt,mS)){var yt=f.cascadedShadowMapNode_zw58l$(mt,"depthMap_"+$t,ft,pt);d.add_11rb$(yt)}else if(e.isType(mt,fS)){var vt=f.simpleShadowMapNode_7yd351$(mt,"depthMap_"+$t,pt);d.add_11rb$(vt)}}f.positionOutput=f.vec4TransformNode_9krp9t$(st.output,y).outVec4;var gt,xt,wt,zt,kt,St=new np(o);switch(t.albedoSource.name){case"VERTEX_ALBEDO":gt=x(s.v).output;break;case"STATIC_ALBEDO":gt=St.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var Ct=St.texture2dSamplerNode_fzevit$(St.texture2dNode_61zpoe$("tAlbedo"),x(c.v).output),Nt=St.gammaNode_ze33is$(Ct.outColor);if(t.isMultiplyAlbedoMap){var Et=St.pushConstantNodeColor_61zpoe$("uAlbedo").output;gt=St.multiplyNode_ze33is$(Nt.outColor,Et).output}else gt=Nt.outColor;break;case"CUBE_MAP_ALBEDO":throw bt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:gt=e.noWhenBranchMatched()}var Tt={v:gt};null!=(wt=e.isType(xt=t.alphaMode,wc)?xt:null)&&St.discardAlpha_ze33is$(St.splitNode_500t7j$(Tt.v,"a").output,St.constFloat_mx4ult$(wt.cutOff)),e.isType(t.alphaMode,bc)||(Tt.v=St.combineXyzWNode_ze33is$(Tt.v,St.constFloat_mx4ult$(1)).output);var Pt,Ot=h.v.addToStage_llmhyc$(o.fragmentStageGraph),Mt=St.multiLightNode_d76fwk$(p.v.output,t.maxLights);for(Pt=d.iterator();Pt.hasNext();){var jt=Pt.next();Mt.inShadowFacs[jt.lightIndex]=jt.outShadowFac}if(t.isNormalMapped&&null!=l.v){var At=St.normalMapNode_pp0pk4$(St.texture2dNode_61zpoe$("tNormal"),x(c.v).output,a.v.output,l.v.output);At.inStrength=St.constFloat_mx4ult$(t.normalStrength),zt=At.outNormal}else zt=a.v.output;var It={v:zt};It.v=St.normalizeNode_r20yfm$(St.flipBacksideNormalNode_r20yfm$(It.v).outNormal).output;var Rt,Lt,Dt,qt=St.viewDirNode_ze33is$(Ot.outCamPos,p.v.output).output;if(t.isImageBasedLighting){var Ft=St.textureCubeNode_61zpoe$("irradianceMap");Dt=St.textureCubeSamplerNode_ub8j0u$(Ft,a.v.output),Rt=St.textureCubeNode_61zpoe$("reflectionMap"),Lt=St.texture2dNode_61zpoe$("brdfLut")}else Dt=null,Rt=null,Lt=null;var Bt,Ut,Vt,Gt,Ht,Wt=St.pbrMaterialNode_aple27$(Rt,Lt),Xt=Dt;if(Wt.inAlbedo=Tt.v,Wt.inNormal=It.v,Wt.lightBacksides=t.lightBacksides,Wt.inFragPos=p.v.output,Wt.inViewDir=qt,Wt.inReflectionStrength=St.pushConstantNode1f_61zpoe$("uReflectionStrength").output,Wt.inLightCount=Mt.outLightCount,Wt.inFragToLight=Mt.outFragToLightDirection,Wt.inRadiance=Mt.outRadiance,Wt.inIrradiance=null!=(Bt=null!=Xt?Xt.outColor:null)?Bt:St.pushConstantNodeColor_61zpoe$("uAmbient").output,t.isEmissiveMapped){var Kt=St.texture2dSamplerNode_fzevit$(St.texture2dNode_61zpoe$("tEmissive"),x(c.v).output).outColor,Yt=St.gammaNode_ze33is$(Kt).outColor;if(t.isMultiplyEmissiveMap){var Zt=St.pushConstantNodeColor_61zpoe$("uEmissive").output;Ut=St.multiplyNode_ze33is$(Yt,Zt).output}else Ut=Yt;Wt.inEmissive=Ut}else Wt.inEmissive=St.pushConstantNodeColor_61zpoe$("uEmissive").output;var Jt=z();if(t.isRoughnessMapped){var Qt=St.texture2dSamplerNode_fzevit$(St.texture2dNode_61zpoe$(t.roughnessTexName),x(c.v).output).outColor,te=t.roughnessTexName;Jt.put_xwzc9p$(te,Qt);var ee=St.splitNode_500t7j$(Qt,t.roughnessChannel).output;if(t.isMultiplyRoughnessMap){var ie=St.pushConstantNode1f_61zpoe$("uRoughness").output;Vt=St.multiplyNode_ze33is$(ee,ie).output}else Vt=ee;Wt.inRoughness=Vt}else Wt.inRoughness=St.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var ne,re=t.metallicTexName,oe=Jt.get_11rb$(re);if(null==oe){var se=St.texture2dSamplerNode_fzevit$(St.texture2dNode_61zpoe$(t.metallicTexName),x(c.v).output).outColor;Jt.put_xwzc9p$(re,se),ne=se}else ne=oe;var ae=ne,le=t.metallicTexName;Jt.put_xwzc9p$(le,ae);var ue=St.splitNode_500t7j$(ae,t.metallicChannel).output;if(t.isMultiplyMetallicMap){var pe=St.pushConstantNode1f_61zpoe$("uMetallic").output;Gt=St.multiplyNode_ze33is$(ue,pe).output}else Gt=ue;Wt.inMetallic=Gt}else Wt.inMetallic=St.pushConstantNode1f_61zpoe$("uMetallic").output;var ce=St.constFloat_mx4ult$(1);if(t.isOcclusionMapped){var he,de=t.occlusionTexName,fe=Jt.get_11rb$(de);if(null==fe){var _e=St.texture2dSamplerNode_fzevit$(St.texture2dNode_61zpoe$(t.occlusionTexName),x(c.v).output).outColor;Jt.put_xwzc9p$(de,_e),he=_e}else he=fe;var me=he,$e=t.occlusionTexName;Jt.put_xwzc9p$($e,me);var ye=St.splitNode_500t7j$(me,t.occlusionChannel).output;if(1!==t.occlusionStrength){var ve=t.occlusionStrength;Ht=St.addNode_ze33is$(St.constFloat_mx4ult$(1-ve),St.multiplyNode_tuikh5$(ye,ve).output).output}else Ht=ye;ce=Ht}if(t.isScrSpcAmbientOcclusion){var ge=St.texture2dNode_61zpoe$("ssaoMap"),be=St.addNode_u9w9by$(new Gu(ge,St.stage));be.inViewport=Ot.outViewport,ce=t.isOcclusionMapped?St.multiplyNode_ze33is$(ce,be.outAo).output:be.outAo}Wt.inAmbientOccl=ce;var xe=Wt,we=xe.outColor;if(t.isRefraction){var ze=St.addNode_u9w9by$(new Xu(St.stage));ze.reflectionMap=Rt,ze.refractionColor=St.texture2dNode_61zpoe$("tRefractionColor"),ze.viewProj=St.multiplyNode_ze33is$(Ot.outProjMat,Ot.outViewMat).output,ze.inMaterialThickness=St.pushConstantNode1f_61zpoe$("uMaterialThickness").output,ze.inFragPos=p.v.output,ze.inRefractionDir=St.refractNode_92v6he$(qt,It.v,St.constFloat_mx4ult$(1/t.refractionIor)).outDirection;var ke=ze.outColor,Se=St.subtractNode_ze33is$(St.constFloat_mx4ult$(1),St.splitNode_500t7j$(xe.outColor,"a").output).output,Ce=St.multiplyNode_ze33is$(ke,Se).output;we=St.combineXyzWNode_ze33is$(St.addNode_ze33is$(we,Ce).output,St.constFloat_mx4ult$(1)).output}return t.isHdrOutput||(we=St.hdrToLdrNode_r20yfm$(we).outColor),kt=t.alphaMode,e.isType(kt,bc)?St.colorOutput_a3v4si$(we):e.isType(kt,wc)||e.isType(kt,xc)?St.colorOutput_a3v4si$(we,void 0,St.constFloat_mx4ult$(1)):e.noWhenBranchMatched(),o},Ac.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ic=null;function Rc(){return null===Ic&&new Ac,Ic}function Lc(t,i){Fc(),void 0===i&&(i=Fc().defaultPhongModel_m663ta$(t)),zc.call(this,i),this.cullMethod_0=t.cullMethod,this.isBlending_0=e.isType(t.alphaMode,bc);var n,r=I(t.shadowMaps.size);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=t.shadowMaps.get_za3lpa$(o);this.shadowMaps_0=r,this.isReceivingShadow_0=!t.shadowMaps.isEmpty(),this.uShininess_0=null,this.uSpecularIntensity_0=null,this.albedoSampler_0=null,this.normalSampler_0=null,this.uAlbedo_0=null,this.shininess_9rzino$_0=t.shininess,this.specularIntensity_immrg6$_0=t.specularIntensity,this.albedo_xrasdd$_0=t.albedo,this.albedoMap_wcysax$_0=t.albedoMap,this.normalMap_dcl50b$_0=t.normalMap;var s,a=I(this.shadowMaps_0.length);s=a.length-1|0;for(var l=0;l<=s;l++)a[l]=null;this.depthSamplers_0=a}function Dc(){qc=this}jc.$metadata$={kind:$,simpleName:"PbrShader",interfaces:[zc]},Object.defineProperty(Lc.prototype,"shininess",{configurable:!0,get:function(){return this.shininess_9rzino$_0},set:function(t){var e,i;this.shininess_9rzino$_0=t,null!=(i=null!=(e=this.uShininess_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Lc.prototype,"specularIntensity",{configurable:!0,get:function(){return this.specularIntensity_immrg6$_0},set:function(t){var e,i;this.specularIntensity_immrg6$_0=t,null!=(i=null!=(e=this.uSpecularIntensity_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Lc.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_xrasdd$_0},set:function(t){var e,i,n;this.albedo_xrasdd$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Lc.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_wcysax$_0},set:function(t){var e;this.albedoMap_wcysax$_0=t,null!=(e=this.albedoSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lc.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_dcl50b$_0},set:function(t){var e;this.normalMap_dcl50b$_0=t,null!=(e=this.normalSampler_0)&&(e.texture=t)}}),Lc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_0,t.blendMode=this.isBlending_0?_l():hl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Lc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v=this.model;t:do{var g;for($=sc.ALL,g=v.stages.values.iterator();g.hasNext();){var b=g.next();if(0!=(b.stage.mask&$.mask)){var x,w,z=b.nodes;e:do{var k;for(k=z.iterator();k.hasNext();){var S=k.next();if(Lt(S.name,"uShininess")&&e.isType(S,Rp)){w=S;break e}}w=null}while(0);var C=null==(x=w)||e.isType(x,Rp)?x:c();if(null!=C){y=C;break t}}}y=null}while(0);this.uShininess_0=y,null!=(o=null!=(r=this.uShininess_0)?r.uniform:null)&&(o.value=this.shininess);var N,E,T=this.model;t:do{var P;for(N=sc.ALL,P=T.stages.values.iterator();P.hasNext();){var O=P.next();if(0!=(O.stage.mask&N.mask)){var M,j,A=O.nodes;e:do{var I;for(I=A.iterator();I.hasNext();){var R=I.next();if(Lt(R.name,"uSpecularIntensity")&&e.isType(R,Rp)){j=R;break e}}j=null}while(0);var L=null==(M=j)||e.isType(M,Rp)?M:c();if(null!=L){E=L;break t}}}E=null}while(0);this.uSpecularIntensity_0=E,null!=(a=null!=(s=this.uSpecularIntensity_0)?s.uniform:null)&&(a.value=this.specularIntensity);var D,q,F=this.model;t:do{var B;for(D=sc.ALL,B=F.stages.values.iterator();B.hasNext();){var U=B.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var X=W.next();if(Lt(X.name,"uAlbedo")&&e.isType(X,Fp)){G=X;break e}}G=null}while(0);var K=null==(V=G)||e.isType(V,Fp)?V:c();if(null!=K){q=K;break t}}}q=null}while(0);this.uAlbedo_0=q,null!=(p=null!=(u=null!=(l=this.uAlbedo_0)?l.uniform:null)?u.value:null)&&p.set_czzhhz$(this.albedo);var Y,Z,J=this.model;t:do{var Q;for(Y=sc.ALL,Q=J.stages.values.iterator();Q.hasNext();){var tt=Q.next();if(0!=(tt.stage.mask&Y.mask)){var et,it,nt=tt.nodes;e:do{var rt;for(rt=nt.iterator();rt.hasNext();){var ot=rt.next();if(Lt(ot.name,"tAlbedo")&&e.isType(ot,Ep)){it=ot;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,Ep)?et:c();if(null!=st){Z=st;break t}}}Z=null}while(0);this.albedoSampler_0=null!=(h=Z)?h.sampler:null,null!=(d=this.albedoSampler_0)&&(d.texture=this.albedoMap);var at,lt,ut=this.model;t:do{var pt;for(at=sc.ALL,pt=ut.stages.values.iterator();pt.hasNext();){var ct=pt.next();if(0!=(ct.stage.mask&at.mask)){var ht,dt,ft=ct.nodes;e:do{var _t;for(_t=ft.iterator();_t.hasNext();){var mt=_t.next();if(Lt(mt.name,"tNormal")&&e.isType(mt,Ep)){dt=mt;break e}}dt=null}while(0);var $t=null==(ht=dt)||e.isType(ht,Ep)?ht:c();if(null!=$t){lt=$t;break t}}}lt=null}while(0);if(this.normalSampler_0=null!=(f=lt)?f.sampler:null,null!=(_=this.normalSampler_0)&&(_.texture=this.normalMap),this.isReceivingShadow_0){m=this.depthSamplers_0;for(var yt=0;yt!==m.length;++yt){var vt,gt,bt,xt=this.model,wt="depthMap_"+yt;t:do{var zt;for(gt=sc.ALL,zt=xt.stages.values.iterator();zt.hasNext();){var kt=zt.next();if(0!=(kt.stage.mask&gt.mask)){var St,Ct,Nt=kt.nodes;e:do{var Et;for(Et=Nt.iterator();Et.hasNext();){var Tt=Et.next();if(Lt(Tt.name,wt)&&e.isType(Tt,Ep)){Ct=Tt;break e}}Ct=null}while(0);var Pt=null==(St=Ct)||e.isType(St,Ep)?St:c();if(null!=Pt){bt=Pt;break t}}}bt=null}while(0);var Ot=null!=(vt=bt)?vt.sampler:null;this.depthSamplers_0[yt]=Ot,this.shadowMaps_0[yt].setupSampler_wl9pml$(Ot)}}zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Dc.prototype.defaultPhongModel_m663ta$=function(t){var i,n,r,o,s,a=new tp("defaultPhongModel()"),l={v:null},u={v:null},p={v:null},c={v:null},h={v:null},d={v:null},f=M(),_=new ip(a);if(d.v=_.mvpNode(),t.isInstanced?(o=_.multiplyNode_ze33is$(d.v.outModelMat,_.instanceAttrModelMat().output).output,s=_.multiplyNode_ze33is$(d.v.outMvpMat,_.instanceAttrModelMat().output).output):(o=d.v.outModelMat,s=d.v.outMvpMat),i=t.albedoSource===vc()?_.stageInterfaceNode_iikjwn$("ifColors",_.attrColors().output):null,u.v=i,n=t.requiresTexCoords()?_.stageInterfaceNode_iikjwn$("ifTexCoords",_.attrTexCoords().output):null,p.v=n,t.isNormalMapped){var m=_.attrTangents().output,$=_.vec3TransformNode_vid4wo$(_.splitNode_500t7j$(m,"xyz").output,o,0),y=_.combineXyzWNode_ze33is$($.outVec3,_.splitNode_500t7j$(m,"w").output);r=_.stageInterfaceNode_iikjwn$("ifTangents",y.output)}else r=null;c.v=r;var v=_.vec3TransformNode_vid4wo$(_.attrNormals().output,o,0);l.v=_.stageInterfaceNode_iikjwn$("ifNormals",v.outVec3);var g=_.vec3TransformNode_vid4wo$(_.attrPositions().output,o,1).outVec3;h.v=_.stageInterfaceNode_iikjwn$("ifFragPos",g);var b,w,z=_.vec4TransformNode_9krp9t$(g,d.v.outViewMat).outVec4,k=0;for(b=t.shadowMaps.iterator();b.hasNext();){var S=b.next(),C=tt((k=(w=k)+1|0,w));if(e.isType(S,mS)){var N=_.cascadedShadowMapNode_zw58l$(S,"depthMap_"+C,z,g);f.add_11rb$(N)}else if(e.isType(S,fS)){var E=_.simpleShadowMapNode_7yd351$(S,"depthMap_"+C,g);f.add_11rb$(E)}}_.positionOutput=_.vec4TransformNode_9krp9t$(_.attrPositions().output,s).outVec4;var T,P,O=new np(a),j=d.v.addToStage_llmhyc$(a.fragmentStageGraph),A=O.multiLightNode_d76fwk$(h.v.output,t.maxLights);for(P=f.iterator();P.hasNext();){var I=P.next();A.inShadowFacs[I.lightIndex]=I.outShadowFac}switch(t.albedoSource.name){case"VERTEX_ALBEDO":T=x(u.v).output;break;case"STATIC_ALBEDO":T=O.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":T=O.texture2dSamplerNode_fzevit$(O.texture2dNode_61zpoe$("tAlbedo"),x(p.v).output,!1).outColor;break;case"CUBE_MAP_ALBEDO":throw bt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:T=e.noWhenBranchMatched()}var R=T,L=t.isNormalMapped&&null!=c.v?O.normalMapNode_pp0pk4$(O.texture2dNode_61zpoe$("tNormal"),x(p.v).output,l.v.output,c.v.output).outNormal:l.v.output,D=O.phongMaterialNode_4h00d0$(R,L,h.v.output,j.outCamPos);D.lightBacksides=t.lightBacksides,D.inShininess=O.pushConstantNode1f_61zpoe$("uShininess").output,D.inSpecularIntensity=O.pushConstantNode1f_61zpoe$("uSpecularIntensity").output;var q=D;return O.colorOutput_a3v4si$(q.outColor),a},Dc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var qc=null;function Fc(){return null===qc&&new Dc,qc}function Bc(){this.albedoSource=vc(),this.isNormalMapped=!1,this.albedo=Oy().GRAY,this.shininess=20,this.specularIntensity=1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.cullMethod=Tl(),this.alphaMode=new xc,this.isInstanced=!1,this.albedoMap=null,this.normalMap=null}function Uc(t,i){rh(),void 0===i&&(i=rh().defaultUnlitModel_ws3dmo$(t)),zc.call(this,i),this.cullMethod_ci460b$_0=t.cullMethod,this.isBlending_6tbhot$_0=e.isType(t.alphaMode,bc),this.uColor_cc6m7u$_0=null,this.color_l79ks7$_0=t.color,this.colorSampler_he8fz1$_0=null,this.colorMap_h0jju9$_0=t.colorMap,this.colorCubeSampler_b56oeg$_0=null,this.colorCubeMap_moycys$_0=t.colorCubeMap}function Vc(){nh=this}Bc.prototype.useAlbedoMap_61zpoe$=function(t){this.useAlbedoMap_9cjgzv$(Th(t))},Bc.prototype.useAlbedoMap_9cjgzv$=function(t){this.albedoMap=t,this.albedoSource=yc()},Bc.prototype.useNormalMap_61zpoe$=function(t){this.useNormalMap_9cjgzv$(Th(t))},Bc.prototype.useNormalMap_9cjgzv$=function(t){this.normalMap=t,this.isNormalMapped=!0},Bc.prototype.requiresTexCoords=function(){return this.albedoSource===yc()||this.isNormalMapped},Bc.$metadata$={kind:$,simpleName:"PhongConfig",interfaces:[]},Lc.$metadata$={kind:$,simpleName:"PhongShader",interfaces:[zc]},Object.defineProperty(Uc.prototype,"color",{configurable:!0,get:function(){return this.color_l79ks7$_0},set:function(t){var e,i,n;this.color_l79ks7$_0=t,null!=(n=null!=(i=null!=(e=this.uColor_cc6m7u$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Uc.prototype,"colorMap",{configurable:!0,get:function(){return this.colorMap_h0jju9$_0},set:function(t){var e;this.colorMap_h0jju9$_0=t,null!=(e=this.colorSampler_he8fz1$_0)&&(e.texture=t)}}),Object.defineProperty(Uc.prototype,"colorCubeMap",{configurable:!0,get:function(){return this.colorCubeMap_moycys$_0},set:function(t){var e;this.colorCubeMap_moycys$_0=t,null!=(e=this.colorCubeSampler_b56oeg$_0)&&(e.texture=t)}}),Uc.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_ci460b$_0,t.blendMode=this.isBlending_6tbhot$_0?_l():hl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Uc.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h=this.model;t:do{var d;for(u=sc.ALL,d=h.stages.values.iterator();d.hasNext();){var f=d.next();if(0!=(f.stage.mask&u.mask)){var _,m,$=f.nodes;e:do{var y;for(y=$.iterator();y.hasNext();){var v=y.next();if(Lt(v.name,"uColor")&&e.isType(v,Fp)){m=v;break e}}m=null}while(0);var g=null==(_=m)||e.isType(_,Fp)?_:c();if(null!=g){p=g;break t}}}p=null}while(0);this.uColor_cc6m7u$_0=p,null!=(s=null!=(o=null!=(r=this.uColor_cc6m7u$_0)?r.uniform:null)?o.value:null)&&s.set_czzhhz$(this.color);var b,x,w=this.model;t:do{var z;for(b=sc.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&b.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var T=E.next();if(Lt(T.name,"tColor")&&e.isType(T,Ep)){C=T;break e}}C=null}while(0);var P=null==(S=C)||e.isType(S,Ep)?S:c();if(null!=P){x=P;break t}}}x=null}while(0);this.colorSampler_he8fz1$_0=null!=(a=x)?a.sampler:null,null!=(l=this.colorSampler_he8fz1$_0)&&(l.texture=this.colorMap),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Vc.prototype.defaultUnlitModel_ws3dmo$=function(t){var i,n,r,o,s,a=new tp("defaultPbrModel()"),l={v:null},p={v:null},c={v:null},h=new ip(a),d=h.mvpNode();if(t.isInstanced?(o=h.multiplyNode_ze33is$(d.outModelMat,h.instanceAttrModelMat().output).output,s=h.multiplyNode_ze33is$(d.outMvpMat,h.instanceAttrModelMat().output).output):(o=d.outModelMat,s=d.outMvpMat),t.isSkinned){var f=h.skinTransformNode_78eraa$(h.attrJoints().output,h.attrWeights().output,t.maxJoints);o=h.multiplyNode_ze33is$(o,f.outJointMat).output,s=h.multiplyNode_ze33is$(s,f.outJointMat).output}i=t.requiresTexCoords()?h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output):null,p.v=i,n=t.colorSource===vc()?h.stageInterfaceNode_iikjwn$("ifColors",h.attrColors().output):null,l.v=n;var _,m,$=t.morphAttributes.isEmpty()?null:h.morphWeightsNode_za3lpa$(t.morphAttributes.size),y={v:h.attrPositions().output},v=t.morphAttributes,g=M();for(_=v.iterator();_.hasNext();){var b=_.next();u(b.name,ds().POSITIONS.name)&&g.add_11rb$(b)}for(m=g.iterator();m.hasNext();){var w=m.next(),z=h.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(w),x($)),k=h.multiplyNode_ze33is$(h.attributeNode_nm2vx5$(w).output,z.outWeight);y.v=h.addNode_ze33is$(y.v,k.output).output}if(t.colorSource===mc()){var S=h.vec3TransformNode_vid4wo$(y.v,o,1).outVec3;r=h.stageInterfaceNode_iikjwn$("ifFragPos",S)}else r=null;c.v=r,h.positionOutput=h.vec4TransformNode_9krp9t$(y.v,s).outVec4;var C,N,E,T=new np(a);switch(t.colorSource.name){case"VERTEX_ALBEDO":C=x(l.v).output;break;case"STATIC_ALBEDO":C=T.pushConstantNodeColor_61zpoe$("uColor").output;break;case"TEXTURE_ALBEDO":var P=T.texture2dSamplerNode_fzevit$(T.texture2dNode_61zpoe$("tColor"),x(p.v).output);if(t.isMultiplyColorMap){var O=T.pushConstantNodeColor_61zpoe$("uColor").output;C=T.multiplyNode_ze33is$(P.outColor,O).output}else C=P.outColor;break;case"CUBE_MAP_ALBEDO":var j=T.textureCubeSamplerNode_ub8j0u$(T.textureCubeNode_61zpoe$("tCubeColor"),x(c.v).output);if(t.isMultiplyColorMap){var A=T.pushConstantNodeColor_61zpoe$("uColor").output;C=T.multiplyNode_ze33is$(j.outColor,A).output}else C=j.outColor;break;default:C=e.noWhenBranchMatched()}var I={v:C};return null!=(E=e.isType(N=t.alphaMode,wc)?N:null)&&T.discardAlpha_ze33is$(T.splitNode_500t7j$(I.v,"a").output,T.constFloat_mx4ult$(E.cutOff)),e.isType(t.alphaMode,bc)||(I.v=T.combineXyzWNode_ze33is$(I.v,T.constFloat_mx4ult$(1)).output),T.colorOutput_a3v4si$(T.unlitMaterialNode_r20yfm$(I.v).outColor),a},Vc.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gc,Hc,Wc,Xc,Kc,Yc,Zc,Jc,Qc,th,eh,ih,nh=null;function rh(){return null===nh&&new Vc,nh}function oh(){this.colorSource=vc(),this.isMultiplyColorMap=!1,this.isInstanced=!1,this.isSkinned=!1,this.maxJoints=64,this.morphAttributes=M(),this.cullMethod=Tl(),this.alphaMode=new xc,this.color=Oy().GRAY,this.colorMap=null,this.colorCubeMap=null}function sh(t){var e;this.elements_0=M(),this.size=0;var i=0;for(e=t.iterator();e.hasNext();){var n=e.next(),r=new ah(n,i);this.elements_0.add_11rb$(r),i=i+(n.size+r.padding)|0}this.size=i}function ah(t,i){var n;switch(this.uniform=t,this.offset=0,this.padding=0,this.uniform.typeSize){case 4:n=4;break;case 8:n=8;break;default:n=16}var r=n;this.offset=e.imul((i+r-1|0)/r|0,r),this.padding=this.offset-i|0}function lh(t,e,i,n){T.call(this),this.channels=i,this.hasAlpha=n,this.name$=t,this.ordinal$=e}function uh(){uh=function(){},Gc=new lh("R",0,1,!1),Hc=new lh("RG",1,2,!1),Wc=new lh("RGB",2,3,!1),Xc=new lh("RGBA",3,4,!0),Kc=new lh("R_F16",4,1,!1),Yc=new lh("RG_F16",5,2,!1),Zc=new lh("RGB_F16",6,3,!1),Jc=new lh("RGBA_F16",7,4,!0)}function ph(){return uh(),Gc}function ch(){return uh(),Hc}function hh(){return uh(),Wc}function dh(){return uh(),Xc}function fh(){return uh(),Kc}function _h(){return uh(),Yc}function mh(){return uh(),Zc}function $h(){return uh(),Jc}function yh(t,e,i){Ch(),this.props=t,this.name=e,this.loader=i,this.loadedTexture=null,this.loadingState=bh()}function vh(t,e){T.call(this),this.name$=t,this.ordinal$=e}function gh(){gh=function(){},Qc=new vh("NOT_LOADED",0),th=new vh("LOADING",1),eh=new vh("LOADED",2),ih=new vh("LOADING_FAILED",3)}function bh(){return gh(),Qc}function xh(){return gh(),th}function wh(){return gh(),eh}function zh(){return gh(),ih}function kh(){Sh=this}Uc.$metadata$={kind:$,simpleName:"UnlitShader",interfaces:[zc]},oh.prototype.useStaticColor_d7aj7k$=function(t){this.colorSource=$c(),this.color=t},oh.prototype.useColorMap_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.useColorMap_vzjalu$(Th(t),e)},oh.prototype.useColorMap_vzjalu$=function(t,e){void 0===e&&(e=!1),this.colorMap=t,this.isMultiplyColorMap=e,this.colorSource=yc()},oh.prototype.useColorCubeMap_z6ghij$=function(t,e){void 0===e&&(e=!1),this.colorCubeMap=t,this.isMultiplyColorMap=e,this.colorSource=mc()},oh.prototype.requiresTexCoords=function(){return this.colorSource===yc()},oh.$metadata$={kind:$,simpleName:"UnlitMaterialConfig",interfaces:[]},sh.prototype.putTo_l6oshk$=function(t){var e;e=this.elements_0;for(var i=0;i!==e.size;++i)this.elements_0.get_za3lpa$(i).putTo_l6oshk$(t)},ah.prototype.putTo_l6oshk$=function(t){var e;e=this.padding;for(var i=0;i<e;i++)t.putUint8_s8j3t7$(0);this.uniform.putTo_l6oshk$(t)},ah.$metadata$={kind:$,simpleName:"Element",interfaces:[]},sh.$metadata$={kind:$,simpleName:"Std140Layout",interfaces:[]},lh.$metadata$={kind:$,simpleName:"TexFormat",interfaces:[T]},lh.values=function(){return[ph(),ch(),hh(),dh(),fh(),_h(),mh(),$h()]},lh.valueOf_61zpoe$=function(t){switch(t){case"R":return ph();case"RG":return ch();case"RGB":return hh();case"RGBA":return dh();case"R_F16":return fh();case"RG_F16":return _h();case"RGB_F16":return mh();case"RGBA_F16":return $h();default:P("No enum constant de.fabmax.kool.pipeline.TexFormat."+t)}},yh.prototype.dispose=function(){var t;null!=(t=this.loadedTexture)&&t.dispose(),this.loadedTexture=null,this.loadingState=bh()},yh.prototype.toString=function(){return"Texture"+this.type+"(name: "+Ct(this.name)+")"},vh.$metadata$={kind:$,simpleName:"LoadingState",interfaces:[T]},vh.values=function(){return[bh(),xh(),wh(),zh()]},vh.valueOf_61zpoe$=function(t){switch(t){case"NOT_LOADED":return bh();case"LOADING":return xh();case"LOADED":return wh();case"LOADING_FAILED":return zh();default:P("No enum constant de.fabmax.kool.pipeline.Texture.LoadingState."+t)}},kh.prototype.estimatedTexSize_4qozqa$=function(t,i,n,r,o){for(var s=1,a=.25,l=2;l<=r;l++)s+=a,a*=.25;return Dt(e.imul(e.imul(e.imul(t,i),n),o)*s)},kh.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Sh=null;function Ch(){return null===Sh&&new kh,Sh}function Nh(t,e,i){void 0===t&&(t=new Hh),void 0===e&&(e=null),void 0===i&&(i=null),yh.call(this,t,e,i),this.type_e3yczn$_0="1D"}function Eh(t,e,i){void 0===t&&(t=new Hh),void 0===e&&(e=null),void 0===i&&(i=null),yh.call(this,t,e,i),this.type_epo42k$_0="2D"}function Th(t,e,i,n){var r,o;return void 0===e&&(e=null),void 0===i&&(i=new Hh),n=n||Object.create(Eh.prototype),Eh.call(n,i,e,(r=t,o=i,function(t,e,i,n){var s=new Ph(r,o,t,e,this,i);return n?s:s.doResume(null)})),n}function Ph(t,e,i,n,r,o){l.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$assetPath=t,this.local$closure$props=e,this.local$it=n}function Oh(t,e,i){void 0===t&&(t=new Hh),void 0===e&&(e=null),void 0===i&&(i=null),yh.call(this,t,e,i),this.type_rhtgud$_0="3D"}function Mh(t,e,i){void 0===t&&(t=new Hh),void 0===e&&(e=null),void 0===i&&(i=null),yh.call(this,t,e,i),this.type_qg0qm9$_0="Cube"}function jh(t){var e;Bh(),Eh.call(this,new Hh(void 0,void 0,void 0,void 0,Kh(),Kh(),!1,1),t.toString(),(e=t,function(t,i,n,r){var o=new Uh(e,t,i,this,n);return r?o:o.doResume(null)})),this.type_yd4wgl$_0="SingleColor"}function Ah(){Fh=this,this.colorData_0=z()}yh.$metadata$={kind:$,simpleName:"Texture",interfaces:[]},Object.defineProperty(Nh.prototype,"type",{configurable:!0,get:function(){return this.type_e3yczn$_0}}),Nh.$metadata$={kind:$,simpleName:"Texture1d",interfaces:[yh]},Object.defineProperty(Eh.prototype,"type",{configurable:!0,get:function(){return this.type_epo42k$_0}}),Eh.$metadata$={kind:$,simpleName:"Texture2d",interfaces:[yh]},Ph.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Ph.prototype=Object.create(l.prototype),Ph.prototype.constructor=Ph,Ph.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$closure$assetPath,this.local$closure$props.format,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(Oh.prototype,"type",{configurable:!0,get:function(){return this.type_rhtgud$_0}}),Oh.$metadata$={kind:$,simpleName:"Texture3d",interfaces:[yh]},Object.defineProperty(Mh.prototype,"type",{configurable:!0,get:function(){return this.type_qg0qm9$_0}}),Mh.$metadata$={kind:$,simpleName:"TextureCube",interfaces:[yh]},Object.defineProperty(jh.prototype,"type",{configurable:!0,get:function(){return this.type_yd4wgl$_0}}),Ah.prototype.getColorTextureData_0=function(t){var e,i=this.colorData_0,n=i.get_11rb$(t);if(null==n){var r=_d().singleColor_d7aj7k$(t);i.put_xwzc9p$(t,r),e=r}else e=n;return e},Ah.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ih,Rh,Lh,Dh,qh,Fh=null;function Bh(){return null===Fh&&new Ah,Fh}function Uh(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$color=t}function Vh(t,e){var i,n;void 0===e&&(e=256),Nh.call(this,new Hh(void 0,Qh(),Qh(),void 0,Yh(),Yh(),!1,1),"gradientTex-"+e,(i=t,n=e,function(t,e,r,o){var s=new Gh(i,n,t,e,this,r);return o?s:s.doResume(null)})),this.type_h4ikwq$_0="Gradient"}function Gh(t,e,i,n,r,o){l.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$gradient=t,this.local$closure$size=e}function Hh(t,e,i,n,r,o,s,a){void 0===t&&(t=dh()),void 0===e&&(e=ed()),void 0===i&&(i=ed()),void 0===n&&(n=ed()),void 0===r&&(r=Yh()),void 0===o&&(o=Yh()),void 0===s&&(s=!0),void 0===a&&(a=4),this.format=t,this.addressModeU=e,this.addressModeV=i,this.addressModeW=n,this.minFilter=r,this.magFilter=o,this.mipMapping=s,this.maxAnisotropy=a}function Wh(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Xh(){Xh=function(){},Ih=new Wh("NEAREST",0),Rh=new Wh("LINEAR",1)}function Kh(){return Xh(),Ih}function Yh(){return Xh(),Rh}function Zh(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Jh(){Jh=function(){},Lh=new Zh("CLAMP_TO_EDGE",0),Dh=new Zh("MIRRORED_REPEAT",1),qh=new Zh("REPEAT",2)}function Qh(){return Jh(),Lh}function td(){return Jh(),Dh}function ed(){return Jh(),qh}function id(){this.width_g2mups$_0=0,this.height_9y5xsp$_0=0,this.depth_p4h6ql$_0=0,this.format_yfgg89$_0=dh()}function nd(t,e,i){sd(),id.call(this),this.data_8b7fmx$_0=t,this.width=e,this.height=1,this.depth=1,this.format=i}function rd(){od=this}Uh.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Uh.prototype=Object.create(l.prototype),Uh.prototype.constructor=Uh,Uh.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return Bh().getColorTextureData_0(this.local$closure$color);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},jh.$metadata$={kind:$,simpleName:"SingleColorTexture",interfaces:[Eh]},Object.defineProperty(Vh.prototype,"type",{configurable:!0,get:function(){return this.type_h4ikwq$_0}}),Gh.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Gh.prototype=Object.create(l.prototype),Gh.prototype.constructor=Gh,Gh.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return sd().gradient_mjek1u$(this.local$closure$gradient,this.local$closure$size);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Vh.$metadata$={kind:$,simpleName:"GradientTexture",interfaces:[Nh]},Hh.$metadata$={kind:$,simpleName:"TextureProps",interfaces:[]},Hh.prototype.component1=function(){return this.format},Hh.prototype.component2=function(){return this.addressModeU},Hh.prototype.component3=function(){return this.addressModeV},Hh.prototype.component4=function(){return this.addressModeW},Hh.prototype.component5=function(){return this.minFilter},Hh.prototype.component6=function(){return this.magFilter},Hh.prototype.component7=function(){return this.mipMapping},Hh.prototype.component8=function(){return this.maxAnisotropy},Hh.prototype.copy_1w7iuy$=function(t,e,i,n,r,o,s,a){return new Hh(void 0===t?this.format:t,void 0===e?this.addressModeU:e,void 0===i?this.addressModeV:i,void 0===n?this.addressModeW:n,void 0===r?this.minFilter:r,void 0===o?this.magFilter:o,void 0===s?this.mipMapping:s,void 0===a?this.maxAnisotropy:a)},Hh.prototype.toString=function(){return"TextureProps(format="+e.toString(this.format)+", addressModeU="+e.toString(this.addressModeU)+", addressModeV="+e.toString(this.addressModeV)+", addressModeW="+e.toString(this.addressModeW)+", minFilter="+e.toString(this.minFilter)+", magFilter="+e.toString(this.magFilter)+", mipMapping="+e.toString(this.mipMapping)+", maxAnisotropy="+e.toString(this.maxAnisotropy)+")"},Hh.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.format)|0)+e.hashCode(this.addressModeU)|0)+e.hashCode(this.addressModeV)|0)+e.hashCode(this.addressModeW)|0)+e.hashCode(this.minFilter)|0)+e.hashCode(this.magFilter)|0)+e.hashCode(this.mipMapping)|0)+e.hashCode(this.maxAnisotropy)|0},Hh.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.format,t.format)&&e.equals(this.addressModeU,t.addressModeU)&&e.equals(this.addressModeV,t.addressModeV)&&e.equals(this.addressModeW,t.addressModeW)&&e.equals(this.minFilter,t.minFilter)&&e.equals(this.magFilter,t.magFilter)&&e.equals(this.mipMapping,t.mipMapping)&&e.equals(this.maxAnisotropy,t.maxAnisotropy)},Wh.$metadata$={kind:$,simpleName:"FilterMethod",interfaces:[T]},Wh.values=function(){return[Kh(),Yh()]},Wh.valueOf_61zpoe$=function(t){switch(t){case"NEAREST":return Kh();case"LINEAR":return Yh();default:P("No enum constant de.fabmax.kool.pipeline.FilterMethod."+t)}},Zh.$metadata$={kind:$,simpleName:"AddressMode",interfaces:[T]},Zh.values=function(){return[Qh(),td(),ed()]},Zh.valueOf_61zpoe$=function(t){switch(t){case"CLAMP_TO_EDGE":return Qh();case"MIRRORED_REPEAT":return td();case"REPEAT":return ed();default:P("No enum constant de.fabmax.kool.pipeline.AddressMode."+t)}},Object.defineProperty(id.prototype,"width",{configurable:!0,get:function(){return this.width_g2mups$_0},set:function(t){this.width_g2mups$_0=t}}),Object.defineProperty(id.prototype,"height",{configurable:!0,get:function(){return this.height_9y5xsp$_0},set:function(t){this.height_9y5xsp$_0=t}}),Object.defineProperty(id.prototype,"depth",{configurable:!0,get:function(){return this.depth_p4h6ql$_0},set:function(t){this.depth_p4h6ql$_0=t}}),Object.defineProperty(id.prototype,"format",{configurable:!0,get:function(){return this.format_yfgg89$_0},set:function(t){this.format_yfgg89$_0=t}}),id.$metadata$={kind:$,simpleName:"TextureData",interfaces:[]},Object.defineProperty(nd.prototype,"data",{get:function(){return this.data_8b7fmx$_0}}),rd.prototype.gradient_mjek1u$=function(t,e){for(var i=xE(4*e|0),n=jy(),r=0;r<e;r++)t.getColorInterpolated_vsomir$(r/(e-1),n),i.set_6t1wet$(0+(4*r|0)|0,qt(Dt(255*n.r))),i.set_6t1wet$(1+(4*r|0)|0,qt(Dt(255*n.g))),i.set_6t1wet$(2+(4*r|0)|0,qt(Dt(255*n.b))),i.set_6t1wet$(3+(4*r|0)|0,qt(Dt(255*n.a)));return new nd(i,e,dh())},rd.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var od=null;function sd(){return null===od&&new rd,od}function ad(t,e,i,n){_d(),id.call(this),this.data_kif1fa$_0=t,this.width=e,this.height=i,this.depth=1,this.format=n}function ld(){fd=this}nd.$metadata$={kind:$,simpleName:"TextureData1d",interfaces:[id]},Object.defineProperty(ad.prototype,"data",{get:function(){return this.data_kif1fa$_0}}),ld.prototype.singleColor_d7aj7k$=function(t){var e=xE(4);return e.set_6t1wet$(0,qt(Dt(255*t.r))),e.set_6t1wet$(1,qt(Dt(255*t.g))),e.set_6t1wet$(2,qt(Dt(255*t.b))),e.set_6t1wet$(3,qt(Dt(255*t.a))),new ad(e,1,1,dh())},ld.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ud,pd,cd,hd,dd,fd=null;function _d(){return null===fd&&new ld,fd}function md(t,e,i,n,r){id.call(this),this.data_lp2jhn$_0=t,this.width=e,this.height=i,this.depth=n,this.format=r}function $d(t,e,i,n,r,o){id.call(this),this.front=t,this.back=e,this.left=i,this.right=n,this.up=r,this.down=o,this.width=this.front.width,this.height=this.front.height,this.depth=1,this.format=this.front.format}function yd(t,e){this.value=t,this.name=e,this.length_pgm1d5$_0=1}function vd(t){yd.call(this,0,t),this.size_i0aw35$_0=4}function gd(t,e,i){return i=i||Object.create(vd.prototype),vd.call(i,e),i.value=t,i}function bd(t){yd.call(this,pr(),t),this.size_o76ots$_0=8}function xd(t){yd.call(this,Mr(),t),this.size_4mfs8f$_0=16}function wd(t){yd.call(this,no(),t),this.size_xg29am$_0=16}function zd(t){yd.call(this,jy(),t),this.size_tg5r8j$_0=16}function kd(t,e){yd.call(this,new Float32Array(e),t),this.length_4yln86$_0=e,this.size_jukhwb$_0=16*this.length|0,this.typeSize_inwio1$_0=4}function Sd(t,e){var i,n=I(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=pr();yd.call(this,n,t),this.length_or99bd$_0=e,this.size_a1jiw4$_0=16*this.length|0}function Cd(t,e){var i,n=I(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=Mr();yd.call(this,n,t),this.length_gjzw48$_0=e,this.size_v3gial$_0=16*this.length|0}function Nd(t,e){var i,n=I(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=no();yd.call(this,n,t),this.length_d5v0fb$_0=e,this.size_17chi6$_0=16*this.length|0}function Ed(t){yd.call(this,new $n,t),this.size_aq1f2r$_0=36}function Td(t){yd.call(this,new En,t),this.size_i3l1zg$_0=64}function Pd(t,e){var i,n=I(e);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=new En;yd.call(this,n,t),this.length_m05swr$_0=e,this.size_mobkps$_0=64*this.length|0}function Od(t){yd.call(this,0,t),this.size_8zmb7w$_0=4}function Md(t,e,i){return i=i||Object.create(Od.prototype),Od.call(i,e),i.value=t,i}function jd(t){yd.call(this,kr(),t),this.size_ju05ub$_0=8}function Ad(t){yd.call(this,Kr(),t),this.size_mdhf2m$_0=12}function Id(t){yd.call(this,Eo(),t),this.size_6g51zl$_0=16}function Rd(t,i){this.bindings=t,this.primitiveType=i,this.longHash=null;var n,r=this.primitiveType.hashCode();n=new kt(e.Long.fromInt(r));var o,s={v:new kt(new kt(e.Long.fromInt(71023)).data.multiply(n.data))};for(o=this.bindings.iterator();o.hasNext();){var a=o.next(),l=s.v,u=new kt(e.Long.fromInt(71023)),p=new kt(l.data.multiply(u.data)),c=a.longHash;s.v=new kt(p.data.add(c.data))}this.longHash=s.v}function Ld(t,i,n,r){if(void 0===r){var o,s=0;for(o=n.iterator();o.hasNext();)s=s+o.next().attribute.type.byteSize|0;r=s}this.binding=t,this.inputRate=i,this.vertexAttributes=n,this.strideBytes=r,this.longHash=null;var a=this.binding,l={v:new kt(e.Long.fromInt(a))},u=l.v,p=new kt(e.Long.fromInt(71023)),c=new kt(u.data.multiply(p.data)),h=this.inputRate.hashCode(),d=new kt(e.Long.fromInt(h));l.v=new kt(c.data.add(d.data));var f,_=l.v,m=new kt(e.Long.fromInt(71023)),$=new kt(_.data.multiply(m.data)),y=this.strideBytes,v=new kt(e.Long.fromInt(y));for(l.v=new kt($.data.add(v.data)),f=this.vertexAttributes.iterator();f.hasNext();){var g=f.next(),b=l.v,x=new kt(e.Long.fromInt(71023)),w=new kt(b.data.multiply(x.data)),z=g.hashCode(),k=new kt(e.Long.fromInt(z));l.v=new kt(w.data.add(k.data))}this.longHash=l.v}function Dd(t,e,i){this.location=t,this.offset=e,this.attribute=i}function qd(){this.primitiveType=Qz(),this.bindings=M()}function Fd(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Bd(){Bd=function(){},ud=new Fd("VERTEX",0),pd=new Fd("INSTANCE",1)}function Ud(){return Bd(),ud}function Vd(){return Bd(),pd}function Gd(t,e){return PC(t,e)}function Hd(t){var e;void 0===t&&(t="camera"),Of.call(this,t),this.position=new Or(0,0,1),this.lookAt=Ar(Er().ZERO),this.up=Ar(Er().Y_AXIS),this.aspectRatio=1,this.useViewportAspectRatio=!0,this.globalRange_4hi0xu$_0=0,this.globalPosMut=Mr(),this.globalLookAtMut=Mr(),this.globalUpMut=Mr(),this.globalRightMut=Mr(),this.globalLookDirMut=Mr(),this.proj=new bn,this.view=new bn,this.lazyInvProj_tohv7i$_0=new Wd((e=this,function(t){return e.proj.invert_23yxad$(t),s})),this.lazyInvView_trmos6$_0=new Wd(function(t){return function(e){return t.view.invert_23yxad$(e),s}}(this)),this.lazyViewProj_dqyl7q$_0=new Wd(function(t){return function(e){return t.proj.mul_u47j3u$(t.view,e),s}}(this)),this.lazyInvViewProj_vy3fmv$_0=new Wd(function(t){return function(e){return t.viewProj.invert_23yxad$(e),s}}(this)),this.projCorrectionMode=Zd(),this.projCorrected_2lfajw$_0=new bn,this.tmpVec3_txabpe$_0=Mr(),this.tmpVec4_txabq9$_0=no()}function Wd(t){this.update=t,this.isDirty=!0,this.mat_0=new bn}function Xd(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Kd(){Kd=function(){},cd=new Xd("NONE",0),hd=new Xd("ONSCREEN",1),dd=new Xd("OFFSCREEN",2)}function Yd(){return Kd(),cd}function Zd(){return Kd(),hd}function Jd(){return Kd(),dd}function Qd(t){void 0===t&&(t="orthographicCam"),Hd.call(this,t),this.left=-10,this.right=10,this.bottom=-10,this.top=10,this.near=-10,this.far=10,this.isClipToViewport=!1,this.isKeepAspectRatio=!0,this.tmpNodeCenter_dwzowq$_0=Mr()}function tf(t){void 0===t&&(t="perspectiveCam"),Hd.call(this,t),this.clipNear=.1,this.clipFar=100,this.fovY=60,this.fovX_7k9npl$_0=0,this.sphereFacX_87yued$_0=1,this.sphereFacY_87yuf8$_0=1,this.tangX_ey6fwg$_0=1,this.tangY_ey6fvl$_0=1,this.tmpNodeCenter_hw7d0$_0=Mr()}function ef(t){tf.call(this),this.master=t,this.useViewportAspectRatio=!1,this.projCorrectionMode=Jd()}function nf(){this.upperLeft=Mr(),this.upperRight=Mr(),this.lowerLeft=Mr(),this.lowerRight=Mr()}ad.$metadata$={kind:$,simpleName:"TextureData2d",interfaces:[id]},Object.defineProperty(md.prototype,"data",{get:function(){return this.data_lp2jhn$_0}}),md.$metadata$={kind:$,simpleName:"TextureData3d",interfaces:[id]},Object.defineProperty($d.prototype,"data",{configurable:!0,get:function(){return this.front.data}}),$d.$metadata$={kind:$,simpleName:"TextureDataCube",interfaces:[id]},Object.defineProperty(yd.prototype,"typeSize",{configurable:!0,get:function(){return this.size}}),Object.defineProperty(yd.prototype,"length",{configurable:!0,get:function(){return this.length_pgm1d5$_0}}),yd.prototype.toString=function(){return this.name},yd.$metadata$={kind:$,simpleName:"Uniform",interfaces:[]},Object.defineProperty(vd.prototype,"size",{configurable:!0,get:function(){return this.size_i0aw35$_0}}),vd.prototype.putTo_l6oshk$=function(t){t.putFloat32_mx4ult$(this.value)},vd.$metadata$={kind:$,simpleName:"Uniform1f",interfaces:[yd]},Object.defineProperty(bd.prototype,"size",{configurable:!0,get:function(){return this.size_o76ots$_0}}),bd.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},bd.$metadata$={kind:$,simpleName:"Uniform2f",interfaces:[yd]},Object.defineProperty(xd.prototype,"size",{configurable:!0,get:function(){return this.size_4mfs8f$_0}}),xd.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array),t.putUint32_za3lpa$(0)},xd.$metadata$={kind:$,simpleName:"Uniform3f",interfaces:[yd]},Object.defineProperty(wd.prototype,"size",{configurable:!0,get:function(){return this.size_xg29am$_0}}),wd.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},wd.$metadata$={kind:$,simpleName:"Uniform4f",interfaces:[yd]},Object.defineProperty(zd.prototype,"size",{configurable:!0,get:function(){return this.size_tg5r8j$_0}}),zd.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.array)},zd.$metadata$={kind:$,simpleName:"UniformColor",interfaces:[yd]},Object.defineProperty(kd.prototype,"length",{get:function(){return this.length_4yln86$_0}}),Object.defineProperty(kd.prototype,"size",{configurable:!0,get:function(){return this.size_jukhwb$_0}}),Object.defineProperty(kd.prototype,"typeSize",{configurable:!0,get:function(){return this.typeSize_inwio1$_0}}),kd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_mx4ult$(this.value[i]),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0)},kd.$metadata$={kind:$,simpleName:"Uniform1fv",interfaces:[yd]},Object.defineProperty(Sd.prototype,"length",{get:function(){return this.length_or99bd$_0}}),Object.defineProperty(Sd.prototype,"size",{configurable:!0,get:function(){return this.size_a1jiw4$_0}}),Sd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array),t.putUint32_za3lpa$(0),t.putUint32_za3lpa$(0)},Sd.$metadata$={kind:$,simpleName:"Uniform2fv",interfaces:[yd]},Object.defineProperty(Cd.prototype,"length",{get:function(){return this.length_gjzw48$_0}}),Object.defineProperty(Cd.prototype,"size",{configurable:!0,get:function(){return this.size_v3gial$_0}}),Cd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array),t.putUint32_za3lpa$(0)},Cd.$metadata$={kind:$,simpleName:"Uniform3fv",interfaces:[yd]},Object.defineProperty(Nd.prototype,"length",{get:function(){return this.length_d5v0fb$_0}}),Object.defineProperty(Nd.prototype,"size",{configurable:!0,get:function(){return this.size_17chi6$_0}}),Nd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].array)},Nd.$metadata$={kind:$,simpleName:"Uniform4fv",interfaces:[yd]},Object.defineProperty(Ed.prototype,"size",{configurable:!0,get:function(){return this.size_aq1f2r$_0}}),Ed.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.matrix)},Ed.$metadata$={kind:$,simpleName:"UniformMat3f",interfaces:[yd]},Object.defineProperty(Td.prototype,"size",{configurable:!0,get:function(){return this.size_i3l1zg$_0}}),Td.prototype.putTo_l6oshk$=function(t){t.putFloat32_q3cr5i$(this.value.matrix)},Td.$metadata$={kind:$,simpleName:"UniformMat4f",interfaces:[yd]},Object.defineProperty(Pd.prototype,"length",{get:function(){return this.length_m05swr$_0}}),Object.defineProperty(Pd.prototype,"size",{configurable:!0,get:function(){return this.size_mobkps$_0}}),Pd.prototype.putTo_l6oshk$=function(t){var e;e=this.length;for(var i=0;i<e;i++)t.putFloat32_q3cr5i$(this.value[i].matrix)},Pd.$metadata$={kind:$,simpleName:"UniformMat4fv",interfaces:[yd]},Object.defineProperty(Od.prototype,"size",{configurable:!0,get:function(){return this.size_8zmb7w$_0}}),Od.prototype.putTo_l6oshk$=function(t){t.putInt32_za3lpa$(this.value)},Od.$metadata$={kind:$,simpleName:"Uniform1i",interfaces:[yd]},Object.defineProperty(jd.prototype,"size",{configurable:!0,get:function(){return this.size_ju05ub$_0}}),jd.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},jd.$metadata$={kind:$,simpleName:"Uniform2i",interfaces:[yd]},Object.defineProperty(Ad.prototype,"size",{configurable:!0,get:function(){return this.size_mdhf2m$_0}}),Ad.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},Ad.$metadata$={kind:$,simpleName:"Uniform3i",interfaces:[yd]},Object.defineProperty(Id.prototype,"size",{configurable:!0,get:function(){return this.size_6g51zl$_0}}),Id.prototype.putTo_l6oshk$=function(t){t.putInt32_q5rwfd$(this.value.array)},Id.$metadata$={kind:$,simpleName:"Uniform4i",interfaces:[yd]},Ld.$metadata$={kind:$,simpleName:"Binding",interfaces:[]},Ld.prototype.component1=function(){return this.binding},Ld.prototype.component2=function(){return this.inputRate},Ld.prototype.component3=function(){return this.vertexAttributes},Ld.prototype.component4=function(){return this.strideBytes},Ld.prototype.copy_beujkh$=function(t,e,i,n){return new Ld(void 0===t?this.binding:t,void 0===e?this.inputRate:e,void 0===i?this.vertexAttributes:i,void 0===n?this.strideBytes:n)},Ld.prototype.toString=function(){return"Binding(binding="+e.toString(this.binding)+", inputRate="+e.toString(this.inputRate)+", vertexAttributes="+e.toString(this.vertexAttributes)+", strideBytes="+e.toString(this.strideBytes)+")"},Ld.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.binding)|0)+e.hashCode(this.inputRate)|0)+e.hashCode(this.vertexAttributes)|0)+e.hashCode(this.strideBytes)|0},Ld.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.binding,t.binding)&&e.equals(this.inputRate,t.inputRate)&&e.equals(this.vertexAttributes,t.vertexAttributes)&&e.equals(this.strideBytes,t.strideBytes)},Object.defineProperty(Dd.prototype,"name",{configurable:!0,get:function(){return this.attribute.name}}),Object.defineProperty(Dd.prototype,"type",{configurable:!0,get:function(){return this.attribute.type}}),Dd.$metadata$={kind:$,simpleName:"VertexAttribute",interfaces:[]},Dd.prototype.component1=function(){return this.location},Dd.prototype.component2=function(){return this.offset},Dd.prototype.component3=function(){return this.attribute},Dd.prototype.copy_767q6x$=function(t,e,i){return new Dd(void 0===t?this.location:t,void 0===e?this.offset:e,void 0===i?this.attribute:i)},Dd.prototype.toString=function(){return"VertexAttribute(location="+e.toString(this.location)+", offset="+e.toString(this.offset)+", attribute="+e.toString(this.attribute)+")"},Dd.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.location)|0)+e.hashCode(this.offset)|0)+e.hashCode(this.attribute)|0},Dd.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.location,t.location)&&e.equals(this.offset,t.offset)&&e.equals(this.attribute,t.attribute)},qd.prototype.create=function(){return new Rd(Cy(this.bindings),this.primitiveType)},qd.$metadata$={kind:$,simpleName:"Builder",interfaces:[]},Rd.$metadata$={kind:$,simpleName:"VertexLayout",interfaces:[]},Fd.$metadata$={kind:$,simpleName:"InputRate",interfaces:[T]},Fd.values=function(){return[Ud(),Vd()]},Fd.valueOf_61zpoe$=function(t){switch(t){case"VERTEX":return Ud();case"INSTANCE":return Vd();default:P("No enum constant de.fabmax.kool.pipeline.InputRate."+t)}},Object.defineProperty(Hd.prototype,"globalPos",{configurable:!0,get:function(){return this.globalPosMut}}),Object.defineProperty(Hd.prototype,"globalLookAt",{configurable:!0,get:function(){return this.globalLookAtMut}}),Object.defineProperty(Hd.prototype,"globalUp",{configurable:!0,get:function(){return this.globalUpMut}}),Object.defineProperty(Hd.prototype,"globalRight",{configurable:!0,get:function(){return this.globalRightMut}}),Object.defineProperty(Hd.prototype,"globalLookDir",{configurable:!0,get:function(){return this.globalLookDirMut}}),Object.defineProperty(Hd.prototype,"globalRange",{configurable:!0,get:function(){return this.globalRange_4hi0xu$_0},set:function(t){this.globalRange_4hi0xu$_0=t}}),Object.defineProperty(Hd.prototype,"invProj",{configurable:!0,get:function(){return this.lazyInvProj_tohv7i$_0.get()}}),Object.defineProperty(Hd.prototype,"invView",{configurable:!0,get:function(){return this.lazyInvView_trmos6$_0.get()}}),Object.defineProperty(Hd.prototype,"viewProj",{configurable:!0,get:function(){return this.lazyViewProj_dqyl7q$_0.get()}}),Object.defineProperty(Hd.prototype,"invViewProj",{configurable:!0,get:function(){return this.lazyInvViewProj_vy3fmv$_0.get()}}),Hd.prototype.updateCamera_fd1mc0$=function(t,e){this.useViewportAspectRatio&&(this.aspectRatio=e.aspectRatio),this.updateViewMatrix(),this.updateProjectionMatrix(),this.projCorrectionMode===Zd()?(t.projCorrectionMatrixScreen.mul_u47j3u$(this.proj,this.projCorrected_2lfajw$_0),this.proj.set_d4zu6l$(this.projCorrected_2lfajw$_0)):this.projCorrectionMode===Jd()&&(t.projCorrectionMatrixOffscreen.mul_u47j3u$(this.proj,this.projCorrected_2lfajw$_0),this.proj.set_d4zu6l$(this.projCorrected_2lfajw$_0)),this.lazyInvProj_tohv7i$_0.isDirty=!0,this.lazyViewProj_dqyl7q$_0.isDirty=!0,this.lazyInvViewProj_vy3fmv$_0.isDirty=!0},Hd.prototype.updateViewMatrix=function(){this.toGlobalCoords_w1lst9$(this.globalPosMut.set_czzhiu$(this.position)),this.toGlobalCoords_w1lst9$(this.globalLookAtMut.set_czzhiu$(this.lookAt)),this.toGlobalCoords_w1lst9$(this.globalUpMut.set_czzhiu$(this.up),0).norm(),this.globalLookDirMut.set_czzhiu$(this.globalLookAtMut).subtract_czzhiu$(this.globalPosMut),this.globalRange=this.globalLookDirMut.length(),this.globalLookDirMut.scale_mx4ult$(1/this.globalRange),this.globalLookDirMut.cross_2gj7b4$(this.globalUpMut,this.globalRightMut).norm(),this.globalRightMut.cross_2gj7b4$(this.globalLookDirMut,this.globalUpMut).norm(),this.view.setLookAt_n440fu$(this.globalPosMut,this.globalLookAtMut,this.globalUpMut),this.lazyInvView_trmos6$_0.isDirty=!0},Hd.prototype.computePickRay_2cu1go$=function(t,e,i,n){return e.isValid&&this.computePickRay_k7d561$(t,e.x,e.y,i,n)},Hd.prototype.computePickRay_k7d561$=function(t,e,i,n,r){var o=this.unProjectScreen_c0y950$(this.tmpVec3_txabpe$_0.set_y2kzbl$(e,i,0),n,r,t.origin);return(o=o&&this.unProjectScreen_c0y950$(this.tmpVec3_txabpe$_0.set_y2kzbl$(e,i,1),n,r,t.direction))&&(t.direction.subtract_czzhiu$(t.origin),t.direction.norm()),o},Hd.prototype.initRayTes_clwnka$=function(t,e,i,n){return e.isValid&&this.initRayTes_r53qw5$(t,e.x,e.y,i,n)},Hd.prototype.initRayTes_r53qw5$=function(t,e,i,n,r){return t.clear(),this.computePickRay_k7d561$(t.ray,e,i,n,r)},Hd.prototype.isInFrustum_f1kmr1$=function(t){return this.isInFrustum_2qa7tb$(t.globalCenter,t.globalRadius)},Hd.prototype.project_2gj7b4$=function(t,e){this.tmpVec4_txabq9$_0.set_7b5o5w$(t.x,t.y,t.z,1),this.viewProj.transform_5s4mpv$(this.tmpVec4_txabq9$_0);var i,n=this.tmpVec4_txabq9$_0.w;return i=EE.FUZZY_EQ_F,!(A.abs(n)<=i||(e.set_y2kzbl$(this.tmpVec4_txabq9$_0.x,this.tmpVec4_txabq9$_0.y,this.tmpVec4_txabq9$_0.z).scale_mx4ult$(1/this.tmpVec4_txabq9$_0.w),0))},Hd.prototype.project_2gj7bz$=function(t,e){return this.viewProj.transform_5s4mpv$(e.set_7b5o5w$(t.x,t.y,t.z,1))},Hd.prototype.projectScreen_c0y950$=function(t,e,i,n){return!!this.project_2gj7b4$(t,n)&&(n.x=.5*(1+n.x)*e.width+e.x,n.y=i.windowHeight-.5*(1+n.y)*e.height+e.y,n.z=.5*(1+n.z),!0)},Hd.prototype.unProjectScreen_c0y950$=function(t,e,i,n){var r=t.x-e.x,o=i.windowHeight-t.y-e.y;this.tmpVec4_txabq9$_0.set_7b5o5w$(2*r/e.width-1,2*o/e.height-1,2*t.z-1,1),this.invViewProj.transform_5s4mpv$(this.tmpVec4_txabq9$_0);var s=1/this.tmpVec4_txabq9$_0.w;return n.set_y2kzbl$(this.tmpVec4_txabq9$_0.x*s,this.tmpVec4_txabq9$_0.y*s,this.tmpVec4_txabq9$_0.z*s),!0},Wd.prototype.get=function(){return this.isDirty&&(this.update(this.mat_0),this.isDirty=!1),this.mat_0},Wd.$metadata$={kind:$,simpleName:"LazyMatrix",interfaces:[]},Xd.$metadata$={kind:$,simpleName:"ProjCorrectionMode",interfaces:[T]},Xd.values=function(){return[Yd(),Zd(),Jd()]},Xd.valueOf_61zpoe$=function(t){switch(t){case"NONE":return Yd();case"ONSCREEN":return Zd();case"OFFSCREEN":return Jd();default:P("No enum constant de.fabmax.kool.scene.Camera.ProjCorrectionMode."+t)}},Hd.$metadata$={kind:$,simpleName:"Camera",interfaces:[Of]},Qd.prototype.setCentered_y2kzbl$=function(t,e,i){this.top=.5*t,this.bottom=-this.top,this.right=this.aspectRatio*this.top,this.left=-this.right,this.near=e,this.far=i},Qd.prototype.updateCamera_fd1mc0$=function(t,e){if(this.isClipToViewport)this.left=0,this.right=e.width,this.bottom=0,this.top=e.height;else if(this.isKeepAspectRatio){var i=this.top-this.bottom,n=e.aspectRatio*i,r=this.left+.5*(this.right-this.left);this.left=r-.5*n,this.right=r+.5*n}Hd.prototype.updateCamera_fd1mc0$.call(this,t,e)},Qd.prototype.updateProjectionMatrix=function(){this.left!==this.right&&this.bottom!==this.top&&this.near!==this.far&&this.proj.setOrthographic_w8lrqs$(this.left,this.right,this.bottom,this.top,this.near,this.far)},Qd.prototype.computeFrustumPlane_jwr40o$=function(t,e){this.invView.transform_w1lst9$(e.upperLeft.set_y2kzbl$(this.left,this.top,-t)),this.invView.transform_w1lst9$(e.upperRight.set_y2kzbl$(this.right,this.top,-t)),this.invView.transform_w1lst9$(e.lowerLeft.set_y2kzbl$(this.left,this.bottom,-t)),this.invView.transform_w1lst9$(e.lowerRight.set_y2kzbl$(this.right,this.bottom,-t))},Qd.prototype.isInFrustum_2qa7tb$=function(t,e){this.tmpNodeCenter_dwzowq$_0.set_czzhiu$(t),this.tmpNodeCenter_dwzowq$_0.subtract_czzhiu$(this.globalPos);var i=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalRight);if(i>this.right+e||i<this.left-e)return!1;var n=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalUp);if(n>this.top+e||n<this.bottom-e)return!1;var r=this.tmpNodeCenter_dwzowq$_0.dot_czzhiu$(this.globalLookDir);return!(r>this.far+e||r<this.near-e)},Qd.$metadata$={kind:$,simpleName:"OrthographicCamera",interfaces:[Hd]},Object.defineProperty(tf.prototype,"fovX",{configurable:!0,get:function(){return this.fovX_7k9npl$_0},set:function(t){this.fovX_7k9npl$_0=t}}),tf.prototype.updateProjectionMatrix=function(){this.proj.setPerspective_7b5o5w$(this.fovY,this.aspectRatio,this.clipNear,this.clipFar);var t=this.fovY*EE.DEG_2_RAD/2;this.sphereFacY_87yuf8$_0=1/A.cos(t),this.tangY_ey6fvl$_0=A.tan(t);var e=this.tangY_ey6fvl$_0*this.aspectRatio,i=A.atan(e);this.sphereFacX_87yued$_0=1/A.cos(i),this.tangX_ey6fwg$_0=A.tan(i),this.fovX=2*i*EE.RAD_2_DEG},tf.prototype.computeFrustumPlane_jwr40o$=function(t,e){var i=t*this.tangX_ey6fwg$_0,n=t*this.tangY_ey6fvl$_0;this.invView.transform_w1lst9$(e.upperLeft.set_y2kzbl$(-i,n,-t)),this.invView.transform_w1lst9$(e.upperRight.set_y2kzbl$(i,n,-t)),this.invView.transform_w1lst9$(e.lowerLeft.set_y2kzbl$(-i,-n,-t)),this.invView.transform_w1lst9$(e.lowerRight.set_y2kzbl$(i,-n,-t))},tf.prototype.isInFrustum_2qa7tb$=function(t,e){this.tmpNodeCenter_hw7d0$_0.set_czzhiu$(t),this.tmpNodeCenter_hw7d0$_0.subtract_czzhiu$(this.globalPos);var i=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalLookDir);if(i>this.clipFar+e||i<this.clipNear-e)return!1;var n=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalUp),r=e*this.sphereFacY_87yuf8$_0;if(n>(i*=this.tangY_ey6fvl$_0)+r||n<-i-r)return!1;var o=this.tmpNodeCenter_hw7d0$_0.dot_czzhiu$(this.globalRight);return r=e*this.sphereFacX_87yued$_0,!(o>(i*=this.aspectRatio)+r||o<-i-r)},ef.prototype.sync_hrtwbc$=function(t,e){this.master.updateCamera_fd1mc0$(e,t),this.position.set_czzhiu$(this.master.globalPos),this.lookAt.set_czzhiu$(this.master.globalLookAt),this.up.set_czzhiu$(this.master.globalUp),this.aspectRatio=this.master.aspectRatio,this.fovY=this.master.fovY,this.clipNear=this.master.clipNear,this.clipFar=this.master.clipFar},ef.$metadata$={kind:$,simpleName:"Proxy",interfaces:[tf]},tf.$metadata$={kind:$,simpleName:"PerspectiveCamera",interfaces:[Hd]},nf.prototype.set_lj9zd1$=function(t){this.upperLeft.set_czzhiu$(t.upperLeft),this.upperRight.set_czzhiu$(t.upperRight),this.lowerLeft.set_czzhiu$(t.lowerLeft),this.lowerRight.set_czzhiu$(t.lowerRight)},nf.$metadata$={kind:$,simpleName:"FrustumPlane",interfaces:[]};var rf,of,sf,af=K((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function lf(t){void 0===t&&(t=null),Of.call(this,t),this.intChildren=M(),this.childrenBounds=new gy,this.transform=new bn,this.invTransform=new bn,this.isIdentity=!1,this.isDirty=!1,this.tmpTransformVec_vl4onp$_0=Mr(),this.tmpBounds_8xwcjs$_0=new gy,this.setIdentity()}function uf(){this.lights=b([(new pf).setDirectional_czzhiu$(Tr(-1)).setColor_y83vuj$(Oy().WHITE,1)])}function pf(){this.color=Ay(Oy().WHITE),this.type=df(),this.direction=jr(1),this.position=Mr(),this.spotAngle=60}function cf(t,e,i){T.call(this),this.encoded=i,this.name$=t,this.ordinal$=e}function hf(){hf=function(){},rf=new cf("DIRECTIONAL",0,0),of=new cf("POINT",1,1),sf=new cf("SPOT",2,2)}function df(){return hf(),rf}function ff(){return hf(),of}function _f(){return hf(),sf}function mf(t,e){void 0===t&&(t=Xz([ds().POSITIONS,ds().COLORS])),void 0===e&&(e=null),vf.call(this,t,e),t.primitiveType=Zz(),this.rayTest=Tf().nopTest();var i=new oh;this.shader=new Uc(i)}function $f(t,e){void 0===t&&(t=null);var i=new vf(new Dz(At([ds().POSITIONS,ds().NORMALS,ds().COLORS])),t);return e(i),i}function yf(t,e,i){void 0===t&&(t=null),void 0===e&&(e=!1);var n=b([ds().POSITIONS,ds().NORMALS,ds().TEXTURE_COORDS]);if(e){var r=ds().TANGENTS;n.add_11rb$(r)}var o=new vf(new Dz(n),t);i(o);var s=o;return e&&s.geometry.generateTangents_mx4ult$(),s}function vf(t,e){var i;xf(),void 0===e&&(e=null),Of.call(this,e),this.geometry=t,this.id=(i=xf().instanceId_0,xf().instanceId_0=i.inc(),i),this.instances=null,this.morphWeights=null,this.skin=null,this.isOpaque=!0,this.shader_cdun6p$_0=null,this.pipeline_fj0dqa$_0=null,this.discardedPipelines_d0j47k$_0=M(),this.rayTest=Tf().boundsTest()}function gf(){bf=this,this.instanceId_0=Pt}Object.defineProperty(lf.prototype,"children",{configurable:!0,get:function(){return this.intChildren}}),Object.defineProperty(lf.prototype,"size",{configurable:!0,get:function(){return this.intChildren.size}}),lf.prototype.checkInverse=function(){this.isDirty&&(this.transform.invert_23yxad$(this.invTransform),this.isDirty=!1)},lf.prototype.setDirty=function(){this.isDirty=!0,this.isIdentity=!1},lf.prototype.update_kma0q5$=function(t){var e;Of.prototype.update_kma0q5$.call(this,t),this.childrenBounds.clear(),e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).update_kma0q5$(t),this.childrenBounds.add_ea4od8$(this.intChildren.get_za3lpa$(i).bounds);this.setLocalBounds(),this.globalCenterMut.set_czzhiu$(this.bounds.center),this.globalExtentMut.set_czzhiu$(this.bounds.max),this.modelMat.transform_w1lst9$(this.globalCenterMut),this.modelMat.transform_w1lst9$(this.globalExtentMut),this.globalRadius=this.globalCenter.distance_czzhiu$(this.globalExtentMut),this.bounds.isEmpty||this.isIdentity||(this.tmpBounds_8xwcjs$_0.clear(),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.min.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.min.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.max.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.min.x,this.bounds.max.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.min.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.min.y,this.bounds.max.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.max.y,this.bounds.min.z),1)),this.tmpBounds_8xwcjs$_0.add_czzhiu$(this.transform.transform_w1lst9$(this.tmpTransformVec_vl4onp$_0.set_y2kzbl$(this.bounds.max.x,this.bounds.max.y,this.bounds.max.z),1)),this.bounds.set_ea4od8$(this.tmpBounds_8xwcjs$_0))},lf.prototype.setLocalBounds=function(){this.bounds.set_ea4od8$(this.childrenBounds)},lf.prototype.updateModelMat=function(){Of.prototype.updateModelMat.call(this),this.isIdentity||this.modelMat.mul_d4zu6l$(this.transform)},lf.prototype.rayTest_jljx4v$=function(t){var e;this.isIdentity||(this.checkInverse(),t.transformBy_d4zu6l$(this.invTransform)),e=this.intChildren;for(var i=0;i!==e.size;++i){var n=this.intChildren.get_za3lpa$(i);if(n.isPickable&&n.isVisible){var r=n.bounds.hitDistanceSqr_nvyeur$(t.ray);r<ot.MAX_VALUE&&r<=t.hitDistanceSqr&&n.rayTest_jljx4v$(t)}}this.isIdentity||t.transformBy_d4zu6l$(this.transform)},lf.prototype.getTransform_d4zu6j$=function(t){return t.set_d4zu6l$(this.transform)},lf.prototype.getInverseTransform_d4zu6j$=function(t){return this.checkInverse(),t.set_d4zu6l$(this.invTransform)},lf.prototype.collectDrawCommands_kma0q5$=function(t){var e;if(Of.prototype.collectDrawCommands_kma0q5$.call(this,t),this.isRendered){e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).collectDrawCommands_kma0q5$(t)}},lf.prototype.dispose_aemszp$=function(t){var e;Of.prototype.dispose_aemszp$.call(this,t),e=this.intChildren;for(var i=0;i!==e.size;++i)this.intChildren.get_za3lpa$(i).dispose_aemszp$(t)},lf.prototype.get_61zpoe$=function(t){var e;if(Lt(t,this.name))return this;e=this.intChildren;for(var i=0;i!==e.size;++i){var n=this.intChildren.get_za3lpa$(i).get_61zpoe$(t);if(null!=n)return n}return null},lf.prototype.addNode_xtids1$$default=function(t,e){e>=0?this.intChildren.add_wxm5ur$(e,t):this.intChildren.add_11rb$(t),t.parent=this,this.bounds.add_ea4od8$(t.bounds)},lf.prototype.addNode_xtids1$=function(t,e,i){void 0===e&&(e=-1),i?i(t,e):this.addNode_xtids1$$default(t,e)},lf.prototype.sortChildrenBy_mq7kdd$=function(t){var e=this.intChildren;e.size>1&&$t(e,new yt(af(t)))},lf.prototype.removeNode_f1kmr1$=function(t){return!!this.intChildren.remove_11rb$(t)&&(t.parent=null,!0)},lf.prototype.removeAllChildren=function(){var t;t=this.intChildren;for(var e=0;e!==t.size;++e)this.intChildren.get_za3lpa$(e).parent=null;this.intChildren.clear()},lf.prototype.findNode_61zpoe$=function(t){var e;if(Lt(t,this.name))return this;e=this.children;for(var i=0;i!==e.size;++i){var n=this.children.get_za3lpa$(i).findNode_61zpoe$(t);if(null!=n)return n}return null},lf.prototype.containsNode_f1kmr1$=function(t){return this.intChildren.contains_11rb$(t)},lf.prototype.plusAssign_f1kmr1$=function(t){this.addNode_xtids1$(t)},lf.prototype.minusAssign_f1kmr1$=function(t){this.removeNode_f1kmr1$(t)},lf.prototype.unaryPlus_uv0sim$=function(t){this.addNode_xtids1$(t)},lf.prototype.translate_czzhiu$=function(t){return this.translate_y2kzbl$(t.x,t.y,t.z)},lf.prototype.translate_y2kzbl$=function(t,e,i){return this.translate_yvo9jy$(t,e,i)},lf.prototype.translate_czzhiw$=function(t){return this.translate_yvo9jy$(t.x,t.y,t.z)},lf.prototype.translate_yvo9jy$=function(t,e,i){return this.transform.translate_yvo9jy$(t,e,i),this.setDirty(),this},lf.prototype.rotate_ad55pp$=function(t,e){return this.rotate_7b5o5w$(t,e.x,e.y,e.z)},lf.prototype.rotate_7b5o5w$=function(t,e,i,n){return this.rotate_6y0v78$(t,e,i,n)},lf.prototype.rotate_5820x2$=function(t,e){return this.rotate_6y0v78$(t,e.x,e.y,e.z)},lf.prototype.rotate_6y0v78$=function(t,e,i,n){return this.transform.rotate_6y0v78$(t,e,i,n),this.setDirty(),this},lf.prototype.scale_mx4ult$=function(t){return this.scale_yvo9jy$(t,t,t)},lf.prototype.scale_y2kzbl$=function(t,e,i){return this.scale_yvo9jy$(t,e,i)},lf.prototype.scale_14dthe$=function(t){return this.scale_yvo9jy$(t,t,t)},lf.prototype.scale_yvo9jy$=function(t,e,i){return this.transform.scale_yvo9jy$(t,e,i),this.setDirty(),this},lf.prototype.mul_d4zu6l$=function(t){return this.transform.mul_d4zu6l$(t),this.setDirty(),this},lf.prototype.set_d4zu6j$=function(t){return this.transform.set_d4zu6j$(t),this.setDirty(),this},lf.prototype.set_d4zu6l$=function(t){return this.transform.set_d4zu6l$(t),this.setDirty(),this},lf.prototype.setIdentity=function(){return this.transform.setIdentity(),this.invTransform.setIdentity(),this.isDirty=!1,this.isIdentity=!0,this},lf.$metadata$={kind:$,simpleName:"Group",interfaces:[Of]},uf.prototype.singleLight_q9zcvo$=function(t){this.lights.clear();var e=this.lights,i=new pf;t(i),e.add_11rb$(i)},uf.$metadata$={kind:$,simpleName:"Lighting",interfaces:[]},pf.prototype.setColor_y83vuj$=function(t,e){return this.color.set_czzhhz$(t),this.color.a=e,this},pf.prototype.setDirectional_czzhiu$=function(t){return this.type=df(),this.direction.set_czzhiu$(t).norm(),this.position.set_czzhiu$(Er().ZERO),this.spotAngle=0,this},pf.prototype.setPoint_czzhiu$=function(t){return this.type=ff(),this.position.set_czzhiu$(t),this.direction.set_czzhiu$(Er().ZERO),this.spotAngle=0,this},pf.prototype.setSpot_nve3wz$=function(t,e,i){return this.type=_f(),this.position.set_czzhiu$(t),this.direction.set_czzhiu$(e).norm(),this.spotAngle=i,this},cf.$metadata$={kind:$,simpleName:"Type",interfaces:[T]},cf.values=function(){return[df(),ff(),_f()]},cf.valueOf_61zpoe$=function(t){switch(t){case"DIRECTIONAL":return df();case"POINT":return ff();case"SPOT":return _f();default:P("No enum constant de.fabmax.kool.scene.Light.Type."+t)}},pf.$metadata$={kind:$,simpleName:"Light",interfaces:[]},mf.prototype.addLine_nbf24k$=function(t,e,i){return this.addLine_b8opkg$(t,i,e,i)},mf.prototype.addLine_b8opkg$=function(t,e,i,n){var r,o,a,l,u,p={v:0},c=this.geometry,h=c.isBatchUpdate;return c.isBatchUpdate=!0,(r=t,o=e,a=p,l=i,u=n,function(t){return a.v=t.addVertex_lv7vxo$(r,null,o,null),t.addVertex_lv7vxo$(l,null,u,null),t.addIndex_za3lpa$(a.v),t.addIndex_za3lpa$(a.v+1|0),s})(c),c.hasChanged=!0,c.isBatchUpdate=h,p.v},mf.prototype.addLineString_k3xgzo$=function(t,e){var i;i=xt(t);for(var n=0;n<i;n++)this.addLine_b8opkg$(t.get_za3lpa$(n),e,t.get_za3lpa$(n+1|0),e)},mf.prototype.addWireframe_hjnvxh$=function(t,i){if(void 0===i&&(i=null),t.primitiveType!==Qz())throw cn("Supplied mesh is not a triangle mesh: "+t.primitiveType);var n,r,o,a,l=ht(),u=this.geometry,p=u.isBatchUpdate;u.isBatchUpdate=!0,(n=t,r=this,o=i,a=l,function(t){var i,l,u=n.get_za3lpa$(0),p=t.numVertices;i=n.numVertices;for(var c=0;c<i;c++){u.index=c;var h,d,f,_=r.geometry;_.checkBufferSizes_za3lpa$(),h=_.vertexSizeF;for(var m=1;m<=h;m++)_.dataF.plusAssign_mx4ult$(0);d=_.vertexSizeI;for(var $=1;$<=d;$++)_.dataI.plusAssign_za3lpa$(0);_.vertexIt.index=(f=_.numVertices,_.numVertices=f+1|0,f);var y=o,v=_.vertexIt;v.position.set_czzhiu$(u.position),v.color.set_czzhhz$(null!=y?y:u.color),_.bounds.add_czzhiu$(_.vertexIt.position),_.hasChanged=!0,_.numVertices}l=n.numIndices;for(var g=0;g<l;g+=3){var b=p+n.indices.get_za3lpa$(g)|0,x=p+n.indices.get_za3lpa$(g+1|0)|0,w=p+n.indices.get_za3lpa$(g+2|0)|0,z=e.Long.fromInt(A.min(b,x)).shiftLeft(32).or(e.Long.fromInt(A.max(b,x))),k=e.Long.fromInt(A.min(x,w)).shiftLeft(32).or(e.Long.fromInt(A.max(x,w))),S=e.Long.fromInt(A.min(w,b)).shiftLeft(32).or(e.Long.fromInt(A.max(w,b)));a.contains_11rb$(z)||(r.geometry.addIndex_za3lpa$(b),r.geometry.addIndex_za3lpa$(x),a.add_11rb$(z)),a.contains_11rb$(k)||(r.geometry.addIndex_za3lpa$(x),r.geometry.addIndex_za3lpa$(w),a.add_11rb$(k)),a.contains_11rb$(S)||(r.geometry.addIndex_za3lpa$(w),r.geometry.addIndex_za3lpa$(b),a.add_11rb$(S))}return s})(u),u.hasChanged=!0,u.isBatchUpdate=p},mf.prototype.addNormals_325j0g$=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=1);var n,r,o,a,l=t.isBatchUpdate;t.isBatchUpdate=!0,(n=t,r=i,o=e,a=this,function(t){var e,i=Mr(),l=n;e=l.numVertices;for(var u=0;u<e;u++){l.vertexIt.index=u;var p=r,c=o,h=a,d=l.vertexIt;i.set_czzhiu$(d.normal).scale_mx4ult$(p).add_czzhiu$(d.position);var f=null!=c?c:d.color;h.addLine_b8opkg$(d.position,f,i,f)}return s})(t),t.hasChanged=!0,t.isBatchUpdate=l},mf.prototype.clear=function(){this.geometry.clear(),this.bounds.clear()},mf.prototype.addBoundingBox_j1pmtk$=function(t,e){var i,n,r=this.geometry,o=r.isBatchUpdate;r.isBatchUpdate=!0,(i=t,n=e,function(t){var e,r,o;t.checkBufferSizes_za3lpa$(),e=t.vertexSizeF;for(var a=1;a<=e;a++)t.dataF.plusAssign_mx4ult$(0);r=t.vertexSizeI;for(var l=1;l<=r;l++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(o=t.numVertices,t.numVertices=o+1|0,o);var u=i,p=n,c=t.vertexIt;c.position.set_y2kzbl$(u.min.x,u.min.y,u.min.z),c.color.set_czzhhz$(p),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var h,d,f,_=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),h=t.vertexSizeF;for(var m=1;m<=h;m++)t.dataF.plusAssign_mx4ult$(0);d=t.vertexSizeI;for(var $=1;$<=d;$++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(f=t.numVertices,t.numVertices=f+1|0,f);var y=i,v=n,g=t.vertexIt;g.position.set_y2kzbl$(y.min.x,y.min.y,y.max.z),g.color.set_czzhhz$(v),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var b,x,w,z=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),b=t.vertexSizeF;for(var k=1;k<=b;k++)t.dataF.plusAssign_mx4ult$(0);x=t.vertexSizeI;for(var S=1;S<=x;S++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(w=t.numVertices,t.numVertices=w+1|0,w);var C=i,N=n,E=t.vertexIt;E.position.set_y2kzbl$(C.min.x,C.max.y,C.max.z),E.color.set_czzhhz$(N),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var T,P,O,M=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),T=t.vertexSizeF;for(var j=1;j<=T;j++)t.dataF.plusAssign_mx4ult$(0);P=t.vertexSizeI;for(var A=1;A<=P;A++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(O=t.numVertices,t.numVertices=O+1|0,O);var I=i,R=n,L=t.vertexIt;L.position.set_y2kzbl$(I.min.x,I.max.y,I.min.z),L.color.set_czzhhz$(R),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var D,q,F,B=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),D=t.vertexSizeF;for(var U=1;U<=D;U++)t.dataF.plusAssign_mx4ult$(0);q=t.vertexSizeI;for(var V=1;V<=q;V++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(F=t.numVertices,t.numVertices=F+1|0,F);var G=i,H=n,W=t.vertexIt;W.position.set_y2kzbl$(G.max.x,G.min.y,G.min.z),W.color.set_czzhhz$(H),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var X,K,Y,Z=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),X=t.vertexSizeF;for(var J=1;J<=X;J++)t.dataF.plusAssign_mx4ult$(0);K=t.vertexSizeI;for(var Q=1;Q<=K;Q++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(Y=t.numVertices,t.numVertices=Y+1|0,Y);var tt=i,et=n,it=t.vertexIt;it.position.set_y2kzbl$(tt.max.x,tt.min.y,tt.max.z),it.color.set_czzhhz$(et),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var nt,rt,ot,st=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),nt=t.vertexSizeF;for(var at=1;at<=nt;at++)t.dataF.plusAssign_mx4ult$(0);rt=t.vertexSizeI;for(var lt=1;lt<=rt;lt++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(ot=t.numVertices,t.numVertices=ot+1|0,ot);var ut=i,pt=n,ct=t.vertexIt;ct.position.set_y2kzbl$(ut.max.x,ut.max.y,ut.max.z),ct.color.set_czzhhz$(pt),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var ht,dt,ft,_t=t.numVertices-1|0;t.checkBufferSizes_za3lpa$(),ht=t.vertexSizeF;for(var mt=1;mt<=ht;mt++)t.dataF.plusAssign_mx4ult$(0);dt=t.vertexSizeI;for(var $t=1;$t<=dt;$t++)t.dataI.plusAssign_za3lpa$(0);t.vertexIt.index=(ft=t.numVertices,t.numVertices=ft+1|0,ft);var yt=i,vt=n,gt=t.vertexIt;gt.position.set_y2kzbl$(yt.max.x,yt.max.y,yt.min.z),gt.color.set_czzhhz$(vt),t.bounds.add_czzhiu$(t.vertexIt.position),t.hasChanged=!0;var bt=t.numVertices-1|0;return t.addIndices_pmhfmb$(new Int32Array([_,z,z,M,M,B,B,_,Z,st,st,_t,_t,bt,bt,Z,_,Z,z,st,M,_t,B,bt])),s})(r),r.hasChanged=!0,r.isBatchUpdate=o},mf.$metadata$={kind:$,simpleName:"LineMesh",interfaces:[vf]},Object.defineProperty(vf.prototype,"shader",{configurable:!0,get:function(){return this.shader_cdun6p$_0},set:function(t){var e;this.shader_cdun6p$_0=t,null!=(e=this.pipeline_fj0dqa$_0)&&this.discardedPipelines_d0j47k$_0.add_11rb$(e),this.pipeline_fj0dqa$_0=null}}),Object.defineProperty(vf.prototype,"bounds",{configurable:!0,get:function(){return this.geometry.bounds}}),vf.prototype.generate_v2sixm$=function(t){var e,i=this.geometry,n=i.isBatchUpdate;i.isBatchUpdate=!0,(e=t,function(t){return t.clear(),e(new Ck(t)),s})(i),i.hasChanged=!0,i.isBatchUpdate=n},vf.prototype.getPipeline_aemszp$=function(t){var e,i,n;if(!this.discardedPipelines_d0j47k$_0.isEmpty()){var r;for(r=this.discardedPipelines_d0j47k$_0.iterator();r.hasNext();){var o=r.next();t.disposePipeline_i7l2g2$(o)}this.discardedPipelines_d0j47k$_0.clear()}if(null!=(i=this.pipeline_fj0dqa$_0))n=i;else{var s;if(null!=(e=this.shader)){var a=e.createPipeline_sbx4mf$(this,t);this.pipeline_fj0dqa$_0=a,s=a}else s=null;n=s}return n},vf.prototype.rayTest_jljx4v$=function(t){this.rayTest.rayTest_jljx4v$(t)},vf.prototype.dispose_aemszp$=function(t){var e;Of.prototype.dispose_aemszp$.call(this,t),null!=(e=this.pipeline_fj0dqa$_0)&&t.disposePipeline_i7l2g2$(e),this.pipeline_fj0dqa$_0=null},vf.prototype.collectDrawCommands_kma0q5$=function(t){Of.prototype.collectDrawCommands_kma0q5$.call(this,t),this.isRendered&&(this.geometry.hasChanged&&!this.geometry.isBatchUpdate&&(this.geometry.isRebuildBoundsOnSync&&this.geometry.rebuildBounds(),this.rayTest.onMeshDataChanged_f1jspk$(this)),t.renderPass.addMesh_sbx4mf$(this,t.ctx))},gf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bf=null;function xf(){return null===bf&&new gf,bf}function wf(){Tf()}function zf(){Ef=this}function kf(){}function Sf(){this.mesh=null}function Cf(t){this.closure$mesh=t,this.triangleTree=null,this.rayTraverser=new eC}function Nf(t){this.closure$mesh=t,this.edgeTree=null,this.rayTraverser=new QS}vf.$metadata$={kind:$,simpleName:"Mesh",interfaces:[Of]},wf.prototype.onMeshDataChanged_f1jspk$=function(t){},kf.prototype.rayTest_jljx4v$=function(t){},kf.$metadata$={kind:$,interfaces:[wf]},zf.prototype.nopTest=function(){return new kf},Sf.prototype.onMeshDataChanged_f1jspk$=function(t){this.mesh=t},Sf.prototype.rayTest_jljx4v$=function(t){var e;if(null!=(e=this.mesh)){var i=e,n=i.bounds.hitDistanceSqr_nvyeur$(t.ray);n<ot.MAX_VALUE&&n<=t.hitDistanceSqr&&t.setHit_vfk0k2$(i,A.sqrt(n))}},Sf.$metadata$={kind:$,interfaces:[wf]},zf.prototype.boundsTest=function(){return new Sf},Cf.prototype.onMeshDataChanged_f1jspk$=function(t){this.triangleTree=gS(DS().getTriangles_r7nl2o$(t.geometry))},Cf.prototype.rayTest_jljx4v$=function(t){var e;this.rayTraverser.setup_nvyeur$(t.ray),null!=(e=this.triangleTree)&&this.rayTraverser.traverse_7efza$(e),this.rayTraverser.distanceSqr<t.hitDistanceSqr&&t.setHit_vfk0k2$(this.closure$mesh,this.rayTraverser.distance)},Cf.$metadata$={kind:$,interfaces:[wf]},Nf.prototype.onMeshDataChanged_f1jspk$=function(t){this.edgeTree=bS(AS().getEdges_r7nl2o$(t.geometry))},Nf.prototype.rayTest_jljx4v$=function(t){var e;this.rayTraverser.setup_nvyeur$(t.ray),null!=(e=this.edgeTree)&&this.rayTraverser.traverse_7efza$(e),this.rayTraverser.distanceSqr<t.hitDistanceSqr&&t.setHit_vfk0k2$(this.closure$mesh,this.rayTraverser.distance)},Nf.$metadata$={kind:$,interfaces:[wf]},zf.prototype.geometryTest_f1jspk$=function(t){var e;switch(t.geometry.primitiveType.name){case"TRIANGLES":e=new Cf(t);break;case"LINES":e=new Nf(t);break;default:throw G("Mesh primitive type must be either GL_TRIANGLES or GL_LINES")}return e},zf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ef=null;function Tf(){return null===Ef&&new zf,Ef}function Pf(t){void 0===t&&(t=null),lf.call(this,t),this.nodes=z(),this.meshes=z(),this.textures=z(),this.animations=M(),this.skins=M()}function Of(t){qf(),void 0===t&&(t=null),this.name=t,this.onUpdate=M(),this.onCollectDrawCommands=M(),this.onDispose=M(),this.onHoverEnter=M(),this.onHover=M(),this.onHoverExit=M(),this.tags=new E_,this.bounds_ba5obo$_0=new gy,this.globalRadius_3g00fw$_0=0,this.globalCenterMut=Mr(),this.globalExtentMut=Mr(),this.modelMat=new bn,this.modelMatDirty=!1,this.modelMatInvLazy_yq9j4d$_0=new bn,this.parent_302581$_0=null,this.isVisible_mqrc8j$_0=!0,this.isCastingShadow=!0,this.isPickable_b77vbo$_0=!0,this.isFrustumChecked_un4x7a$_0=!0,this.isRendered=!0}function Mf(){Df=this,this.MODEL_MAT_IDENTITY_0=new bn}wf.$metadata$={kind:Y,simpleName:"MeshRayTest",interfaces:[]},Pf.prototype.disableAllAnimations=function(){this.enableAnimation_za3lpa$(-1)},Pf.prototype.enableAnimation_za3lpa$=function(t){var e;e=this.animations;for(var i=0;i!==e.size;++i)this.animations.get_za3lpa$(i).weight=i===t?1:0},Pf.prototype.setAnimationWeight_24o109$=function(t,e){R(this.animations).contains_mef7kx$(t)&&(this.animations.get_za3lpa$(t).weight=e)},Pf.prototype.applyAnimation_14dthe$=function(t){var e,i,n=!0;e=this.animations;for(var r=0;r!==e.size;++r)this.animations.get_za3lpa$(r).weight>0&&(this.animations.get_za3lpa$(r).apply_8555vt$(t,n),n=!1);i=this.skins;for(var o=0;o!==i.size;++o)this.skins.get_za3lpa$(o).updateJointTransforms()},Pf.prototype.printHierarchy=function(){this.printHierarchy_0(this,"")},Pf.prototype.printHierarchy_0=function(t,i){var n,r,o=i+Ct(t.name)+" [",s=t.children,a=M();for(n=s.iterator();n.hasNext();){var l=n.next();e.isType(l,vf)&&a.add_11rb$(l)}for(jt(o+a.size+" meshes]"),r=t.children.iterator();r.hasNext();){var u=r.next();e.isType(u,lf)?this.printHierarchy_0(u,i+"    "):jt(i+"    "+Ct(u.name))}},Pf.prototype.dispose_aemszp$=function(t){var e;for(e=this.textures.values.iterator();e.hasNext();)e.next().dispose();lf.prototype.dispose_aemszp$.call(this,t)},Pf.$metadata$={kind:$,simpleName:"Model",interfaces:[lf]},Object.defineProperty(Of.prototype,"bounds",{configurable:!0,get:function(){return this.bounds_ba5obo$_0}}),Object.defineProperty(Of.prototype,"globalCenter",{configurable:!0,get:function(){return this.globalCenterMut}}),Object.defineProperty(Of.prototype,"globalRadius",{configurable:!0,get:function(){return this.globalRadius_3g00fw$_0},set:function(t){this.globalRadius_3g00fw$_0=t}}),Object.defineProperty(Of.prototype,"modelMatInv",{configurable:!0,get:function(){return this.checkModelMatInv_vk7bqf$_0()}}),Object.defineProperty(Of.prototype,"parent",{configurable:!0,get:function(){return this.parent_302581$_0},set:function(t){this.parent_302581$_0=t}}),Object.defineProperty(Of.prototype,"isVisible",{configurable:!0,get:function(){return this.isVisible_mqrc8j$_0},set:function(t){this.isVisible_mqrc8j$_0=t}}),Object.defineProperty(Of.prototype,"isPickable",{configurable:!0,get:function(){return this.isPickable_b77vbo$_0},set:function(t){this.isPickable_b77vbo$_0=t}}),Object.defineProperty(Of.prototype,"isFrustumChecked",{configurable:!0,get:function(){return this.isFrustumChecked_un4x7a$_0},set:function(t){this.isFrustumChecked_un4x7a$_0=t}}),Of.prototype.update_kma0q5$=function(t){var e;e=this.onUpdate;for(var i=0;i!==e.size;++i)this.onUpdate.get_za3lpa$(i)(this,t);this.updateModelMat(),this.globalCenterMut.set_czzhiu$(this.bounds.center),this.globalExtentMut.set_czzhiu$(this.bounds.max),this.modelMat.transform_w1lst9$(this.globalCenterMut),this.modelMat.transform_w1lst9$(this.globalExtentMut),this.globalRadius=this.globalCenter.distance_czzhiu$(this.globalExtentMut)},Of.prototype.updateModelMat=function(){var t,e;this.modelMat.set_d4zu6l$(null!=(e=null!=(t=this.parent)?t.modelMat:null)?e:qf().MODEL_MAT_IDENTITY_0),this.modelMatDirty=!0},Of.prototype.collectDrawCommands_kma0q5$=function(t){var e;if(this.isRendered=this.checkIsVisible_6otzq7$(t.camera,t.ctx),this.isRendered){e=this.onCollectDrawCommands;for(var i=0;i!==e.size;++i)this.onCollectDrawCommands.get_za3lpa$(i)(this,t)}},Of.prototype.dispose_aemszp$=function(t){var e;e=this.onDispose;for(var i=0;i!==e.size;++i)this.onDispose.get_za3lpa$(i)(this,t)},Of.prototype.toGlobalCoords_w1lst9$$default=function(t,e){return this.modelMat.transform_w1lst9$(t,e),t},Of.prototype.toGlobalCoords_w1lst9$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toGlobalCoords_w1lst9$$default(t,e)},Of.prototype.toGlobalCoords_j7uy7i$$default=function(t,e){return this.modelMat.transform_j7uy7i$(t,e),t},Of.prototype.toGlobalCoords_j7uy7i$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toGlobalCoords_j7uy7i$$default(t,e)},Of.prototype.toLocalCoords_w1lst9$$default=function(t,e){return this.modelMatInv.transform_w1lst9$(t,e),t},Of.prototype.toLocalCoords_w1lst9$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toLocalCoords_w1lst9$$default(t,e)},Of.prototype.toLocalCoords_j7uy7i$$default=function(t,e){return this.modelMatInv.transform_j7uy7i$(t,e),t},Of.prototype.toLocalCoords_j7uy7i$=function(t,e,i){return void 0===e&&(e=1),i?i(t,e):this.toLocalCoords_j7uy7i$$default(t,e)},Of.prototype.rayTest_jljx4v$=function(t){},Of.prototype.get_61zpoe$=function(t){return Lt(t,this.name)?this:null},Of.prototype.checkIsVisible_6otzq7$=function(t,e){return!!this.isVisible&&(!(this.isFrustumChecked&&!this.bounds.isEmpty)||t.isInFrustum_f1kmr1$(this))},Of.prototype.findNode_61zpoe$=function(t){return Lt(t,this.name)?this:null},Of.prototype.findParentOfType_287e2$=X("kool-kool-core.de.fabmax.kool.scene.Node.findParentOfType_287e2$",K((function(){var t=e.throwCCE;return function(e,i){for(var n,r=this.parent;null!=r&&!i(r);)r=r.parent;return i(n=r)?n:t()}}))),Of.prototype.checkModelMatInv_vk7bqf$_0=function(){return this.modelMatDirty&&(this.modelMat.invert_23yxad$(this.modelMatInvLazy_yq9j4d$_0),this.modelMatDirty=!1),this.modelMatInvLazy_yq9j4d$_0},Mf.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var jf,Af,If,Rf,Lf,Df=null;function qf(){return null===Df&&new Mf,Df}function Ff(t,e,i){void 0===e&&(e=null);var n=new Bf(t,e);return i(n),n}function Bf(t,e){var i;void 0===e&&(e=null),lf.call(this,e),this.leftDragMethod=Hf(),this.middleDragMethod=Gf(),this.rightDragMethod=Wf(),this.zoomMethod=Zf(),this.verticalAxis=Dr().Y_AXIS,this.horizontalAxis=Dr().X_AXIS,this.minHorizontalRot=-90,this.maxHorizontalRot=90,this.translation=Br(),this.verticalRotation=0,this.horizontalRotation=0,this.zoom_os17wm$_0=10,this.isKeepingStandardTransform=!1,this.invertRotX=!1,this.invertRotY=!1,this.minZoom=1,this.maxZoom=100,this.translationBounds=null,this.panMethod=new Qf,this.vertRotAnimator=new R$(0),this.horiRotAnimator=new R$(0),this.zoomAnimator=new R$(this.zoom),this.prevButtonMask_ajfzw$_0=0,this.dragMethod_errtco$_0=Gf(),this.dragStart_84bd5l$_0=!1,this.deltaPos_l16i4v$_0=pr(),this.deltaScroll_dymhuq$_0=0,this.ptrPos_jb68ux$_0=pr(),this.panPlane_eoagge$_0=new Yn,this.pointerHitStart_dvxvk5$_0=Mr(),this.pointerHit_a6l7qh$_0=Mr(),this.tmpVec1_ioqh9p$_0=Mr(),this.tmpVec2_ioqh8u$_0=Mr(),this.mouseTransform_3g2ewq$_0=new bn,this.mouseTransformInv_t9oczn$_0=new bn,this.smoothness_swf2pk$_0=0,this.smoothness=.5,this.panPlane_eoagge$_0.p.set_czzhiu$(Er().ZERO),this.panPlane_eoagge$_0.n.set_czzhiu$(Er().Y_AXIS),t.registerDragHandler_y44tw7$(this),this.onUpdate.add_11rb$((i=this,function(t,e){var n=e.component1(),r=e.component2();return i.doCamTransform_kff6gu$_0(n,r),s}))}function Uf(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Vf(){Vf=function(){},jf=new Uf("NONE",0),Af=new Uf("ROTATE",1),If=new Uf("PAN",2)}function Gf(){return Vf(),jf}function Hf(){return Vf(),Af}function Wf(){return Vf(),If}function Xf(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Kf(){Kf=function(){},Rf=new Xf("ZOOM_CENTER",0),Lf=new Xf("ZOOM_TRANSLATE",1)}function Yf(){return Kf(),Rf}function Zf(){return Kf(),Lf}function Jf(){}function Qf(){Jf.call(this),this.panPlane=new Yn,this.pointerRay_0=new ir}function t_(t,e){n_(),void 0===t&&(t=Xz([ds().POSITIONS,n_().ATTRIB_POINT_SIZE,ds().COLORS])),void 0===e&&(e=null),vf.call(this,t,e),t.primitiveType=Jz(),this.rayTest=Tf().nopTest();var i=new oh,n=rh().defaultUnlitModel_ws3dmo$(i),r=new ip(n);r.pointSize_r20yfm$(r.attributeNode_nm2vx5$(n_().ATTRIB_POINT_SIZE).output);var o=n;this.shader=new Uc(i,o)}function e_(){i_=this,this.ATTRIB_POINT_SIZE=new ps("aPointSize",Qo())}Of.$metadata$={kind:$,simpleName:"Node",interfaces:[ig]},Object.defineProperty(Bf.prototype,"zoom",{configurable:!0,get:function(){return this.zoom_os17wm$_0},set:function(t){var e,i=this.minZoom,n=this.maxZoom;e=t<i?i:t>n?n:t,this.zoom_os17wm$_0=e}}),Object.defineProperty(Bf.prototype,"smoothness",{configurable:!0,get:function(){return this.smoothness_swf2pk$_0},set:function(t){var e;this.smoothness_swf2pk$_0=t,e=EE.FUZZY_EQ_D;var i=A.abs(t)<=e?0:50/t;this.vertRotAnimator.stiffness=i,this.horiRotAnimator.stiffness=i,this.zoomAnimator.stiffness=i}}),Bf.prototype.setMouseRotation_dleff0$=function(t,e){this.setMouseRotation_lu1900$(t,e)},Bf.prototype.setMouseRotation_lu1900$=function(t,e){this.vertRotAnimator.set_14dthe$(t),this.horiRotAnimator.set_14dthe$(e),this.verticalRotation=t,this.horizontalRotation=e},Bf.prototype.setMouseTranslation_y2kzbl$=function(t,e,i){this.setMouseTranslation_yvo9jy$(t,e,i)},Bf.prototype.setMouseTranslation_yvo9jy$=function(t,e,i){this.translation.set_yvo9jy$(t,e,i)},Bf.prototype.resetZoom_mx4ult$=function(t){this.resetZoom_14dthe$(t)},Bf.prototype.resetZoom_14dthe$=function(t){this.zoom=t,this.zoomAnimator.set_14dthe$(this.zoom)},Bf.prototype.updateTransform=function(){var t;null!=(t=this.translationBounds)&&t.clampToBounds_5s4mqs$(this.translation),this.isKeepingStandardTransform&&(this.mouseTransform_3g2ewq$_0.invert_23yxad$(this.mouseTransformInv_t9oczn$_0),this.mul_d4zu6l$(this.mouseTransformInv_t9oczn$_0));var e=this.zoomAnimator.actual,i=this.vertRotAnimator.actual,n=this.horiRotAnimator.actual;this.mouseTransform_3g2ewq$_0.setIdentity(),this.mouseTransform_3g2ewq$_0.translate_yvo9jy$(this.translation.x,this.translation.y,this.translation.z),this.mouseTransform_3g2ewq$_0.scale_yvo9jy$(e,e,e),this.mouseTransform_3g2ewq$_0.rotate_5820x2$(i,this.verticalAxis),this.mouseTransform_3g2ewq$_0.rotate_5820x2$(n,this.horizontalAxis),this.isKeepingStandardTransform?this.mul_d4zu6l$(this.mouseTransform_3g2ewq$_0):this.set_d4zu6l$(this.mouseTransform_3g2ewq$_0)},Bf.prototype.doCamTransform_kff6gu$_0=function(t,e){var i,n,r,o,s,a,l;if(this.dragMethod_errtco$_0===Wf()&&this.panMethod.computePanPoint_467c2i$(this.pointerHit_a6l7qh$_0,t,this.ptrPos_jb68ux$_0,e))if(this.dragStart_84bd5l$_0)this.dragStart_84bd5l$_0=!1,this.pointerHitStart_dvxvk5$_0.set_czzhiu$(this.pointerHit_a6l7qh$_0),this.stopSmoothMotion_ph0bif$_0();else{var u=1-this.smoothness,p=u<.1?.1:u>1?1:u;this.tmpVec1_ioqh9p$_0.set_czzhiu$(this.pointerHitStart_dvxvk5$_0).subtract_czzhiu$(this.pointerHit_a6l7qh$_0).scale_mx4ult$(p),null!=(i=this.parent)&&i.toLocalCoords_w1lst9$(this.tmpVec1_ioqh9p$_0,0);var c=this.tmpVec1_ioqh9p$_0.length();c>.5*t.camera.globalRange&&this.tmpVec1_ioqh9p$_0.scale_mx4ult$(.5*t.camera.globalRange/c),this.add_1k1qf7$_0(this.translation,this.tmpVec1_ioqh9p$_0)}else this.pointerHit_a6l7qh$_0.set_czzhiu$(t.camera.globalLookAt);var h,d=this.deltaScroll_dymhuq$_0;if(h=EE.FUZZY_EQ_F,A.abs(d)<=h||(this.zoom=this.zoom*(1-this.deltaScroll_dymhuq$_0/10),this.deltaScroll_dymhuq$_0=0),this.dragMethod_errtco$_0===Hf()){o=this.verticalRotation,r=this.deltaPos_l16i4v$_0.x/3,n=this.invertRotX?-1:1,this.verticalRotation=o-r*n,l=this.horizontalRotation,a=this.deltaPos_l16i4v$_0.y/3,s=this.invertRotY?-1:1,this.horizontalRotation=l-a*s;var f,_=this.horizontalRotation,m=this.minHorizontalRot,$=this.maxHorizontalRot;f=_<m?m:_>$?$:_,this.horizontalRotation=f,this.deltaPos_l16i4v$_0.set_czzhjp$(ar().ZERO)}this.vertRotAnimator.desired=this.verticalRotation,this.horiRotAnimator.desired=this.horizontalRotation,this.zoomAnimator.desired=this.zoom;var y,v=this.zoomAnimator.actual,g=this.zoomAnimator.animate_mx4ult$(e.deltaT);y=EE.FUZZY_EQ_D;var b=v-g;A.abs(b)<=y||this.zoomMethod!==Zf()||this.computeZoomTranslationPerspective_axn3gs$(t.camera,v,g),this.vertRotAnimator.animate_mx4ult$(e.deltaT),this.horiRotAnimator.animate_mx4ult$(e.deltaT),this.updateTransform()},Bf.prototype.computeZoomTranslationPerspective_axn3gs$=function(t,e,i){var n,r=i/e;t.globalPos.subtract_2gj7b4$(this.pointerHit_a6l7qh$_0,this.tmpVec1_ioqh9p$_0).scale_mx4ult$(r).add_czzhiu$(this.pointerHit_a6l7qh$_0),t.globalPos.subtract_2gj7b4$(t.globalLookAt,this.tmpVec2_ioqh8u$_0).scale_mx4ult$(r).add_czzhiu$(t.globalLookAt),this.tmpVec1_ioqh9p$_0.subtract_czzhiu$(this.tmpVec2_ioqh8u$_0),null!=(n=this.parent)&&n.toLocalCoords_w1lst9$(this.tmpVec1_ioqh9p$_0,0),this.add_1k1qf7$_0(this.translation,this.tmpVec1_ioqh9p$_0)},Bf.prototype.stopSmoothMotion_ph0bif$_0=function(){this.vertRotAnimator.set_14dthe$(this.vertRotAnimator.actual),this.horiRotAnimator.set_14dthe$(this.horiRotAnimator.actual),this.zoomAnimator.set_14dthe$(this.zoomAnimator.actual),this.verticalRotation=this.vertRotAnimator.actual,this.horizontalRotation=this.horiRotAnimator.actual,this.zoom=this.zoomAnimator.actual},Bf.prototype.handleDrag_urvnay$=function(t,e,i){var n;t.isEmpty()||t.get_za3lpa$(0).isConsumed_za3lpa$()||!t.get_za3lpa$(0).isInViewport_hrtwbc$(e.mainRenderPass.viewport,i)?(this.deltaPos_l16i4v$_0.set_czzhjp$(ar().ZERO),this.deltaScroll_dymhuq$_0=0):(0===t.get_za3lpa$(0).buttonEventMask&&t.get_za3lpa$(0).buttonMask===this.prevButtonMask_ajfzw$_0||(n=t.get_za3lpa$(0).isLeftButtonDown?this.leftDragMethod:t.get_za3lpa$(0).isRightButtonDown?this.rightDragMethod:t.get_za3lpa$(0).isMiddleButtonDown?this.middleDragMethod:Gf(),this.dragMethod_errtco$_0=n,this.dragStart_84bd5l$_0=this.dragMethod_errtco$_0!==Gf()),this.prevButtonMask_ajfzw$_0=t.get_za3lpa$(0).buttonMask,this.ptrPos_jb68ux$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y),this.deltaPos_l16i4v$_0.set_dleff0$(t.get_za3lpa$(0).deltaX,t.get_za3lpa$(0).deltaY),this.deltaScroll_dymhuq$_0=t.get_za3lpa$(0).deltaScroll,t.get_za3lpa$(0).consume_za3lpa$())},Bf.prototype.add_1k1qf7$_0=function(t,e){t.x=t.x+e.x,t.y=t.y+e.y,t.z=t.z+e.z},Uf.$metadata$={kind:$,simpleName:"DragMethod",interfaces:[T]},Uf.values=function(){return[Gf(),Hf(),Wf()]},Uf.valueOf_61zpoe$=function(t){switch(t){case"NONE":return Gf();case"ROTATE":return Hf();case"PAN":return Wf();default:P("No enum constant de.fabmax.kool.scene.OrbitInputTransform.DragMethod."+t)}},Xf.$metadata$={kind:$,simpleName:"ZoomMethod",interfaces:[T]},Xf.values=function(){return[Yf(),Zf()]},Xf.valueOf_61zpoe$=function(t){switch(t){case"ZOOM_CENTER":return Yf();case"ZOOM_TRANSLATE":return Zf();default:P("No enum constant de.fabmax.kool.scene.OrbitInputTransform.ZoomMethod."+t)}},Bf.$metadata$={kind:$,simpleName:"OrbitInputTransform",interfaces:[o_,lf]},Jf.$metadata$={kind:$,simpleName:"PanBase",interfaces:[]},Qf.prototype.computePanPoint_467c2i$=function(t,e,i,n){return this.panPlane.p.set_czzhiu$(e.camera.globalLookAt),this.panPlane.n.set_czzhiu$(e.camera.globalLookDir),e.camera.computePickRay_k7d561$(this.pointerRay_0,i.x,i.y,e.viewport,n)&&this.panPlane.intersectionPoint_lplggz$(this.pointerRay_0,t)},Qf.$metadata$={kind:$,simpleName:"CameraOrthogonalPan",interfaces:[Jf]},t_.prototype.addPoint_tohjaj$=function(t){var e,i,n,r=this.geometry;r.checkBufferSizes_za3lpa$(),e=r.vertexSizeF;for(var o=1;o<=e;o++)r.dataF.plusAssign_mx4ult$(0);i=r.vertexSizeI;for(var s=1;s<=i;s++)r.dataI.plusAssign_za3lpa$(0);r.vertexIt.index=(n=r.numVertices,r.numVertices=n+1|0,n),t(r.vertexIt),r.bounds.add_czzhiu$(r.vertexIt.position),r.hasChanged=!0;var a=r.numVertices-1|0;return this.geometry.addIndex_za3lpa$(a),a},t_.prototype.addPoint_y9lm7v$=function(t,e,i){var n,r,o,s=this.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);r=s.vertexSizeI;for(var l=1;l<=r;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(o=s.numVertices,s.numVertices=o+1|0,o);var u,p=s.vertexIt;p.position.set_czzhiu$(t),p.color.set_czzhhz$(i),null!=(u=p.getFloatAttribute_nm2vx5$(n_().ATTRIB_POINT_SIZE))&&(u.f=e),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0;var c=s.numVertices-1|0;return this.geometry.addIndex_za3lpa$(c),c},t_.prototype.clear=function(){this.geometry.clear(),this.bounds.clear()},e_.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var i_=null;function n_(){return null===i_&&new e_,i_}function r_(t){void 0===t&&(t=null),lf.call(this,t),this.lighting=new uf,this.camera=new tf,this.onRenderScene=M(),this.mainRenderPass=new Rl(this),this.mutOffscreenPasses_2k8cox$_0=M(),this.addOffscreenPasses_g83fdg$_0=M(),this.remOffscreenPasses_yrwi31$_0=M(),this.isPickingEnabled=!0,this.rayTest_odjp91$_0=new nr,this.hoverNode_ab2f3d$_0=null,this.dragPtrs_mbcqtw$_0=M(),this.dragHandlers_ipew8g$_0=M(),this.disposables_mcwga4$_0=M()}function o_(){}function s_(){N_=this}function a_(t){var e=new Rk;return e.centered(),t.cube_lhbb6w$(e),s}function l_(t){return t.texCoord.x=1-t.texCoord.x,s}function u_(t){t.vertexModFun=l_;var e=(new Ak).uvDefaults();return e.steps=10,t.uvSphere_mojs8w$(e),s}function p_(t,i,n,r){var o,a;d_(),void 0===i&&(i=0),zc.call(this,d_().skyboxCubeShaderModel_vzi7zj$(i,n,r)),this.cubeMapSampler_0=null,this.environmentMap_dc5v0g$_0=t,this.onPipelineSetup.add_11rb$(f_),this.onPipelineCreated.add_11rb$((o=this,a=t,function(t,i,n){var r,l,u,p,h=o,d=o.model;t:do{var f;for(u=sc.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&u.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(Lt(g.name,"skyboxCube")&&e.isType(g,Mp)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,Mp)?m:c();if(null!=b){p=b;break t}}}p=null}while(0);return h.cubeMapSampler_0=null!=(r=p)?r.sampler:null,null!=(l=o.cubeMapSampler_0)&&(l.texture=a),s}))}function c_(){h_=this}t_.$metadata$={kind:$,simpleName:"PointMesh",interfaces:[vf]},Object.defineProperty(r_.prototype,"offscreenPasses",{configurable:!0,get:function(){return this.mutOffscreenPasses_2k8cox$_0}}),Object.defineProperty(r_.prototype,"isFrustumChecked",{configurable:!0,get:function(){return!1},set:function(t){}}),r_.prototype.addOffscreenPass_m1c2kf$=function(t){this.addOffscreenPasses_g83fdg$_0.add_11rb$(t)},r_.prototype.removeOffscreenPass_m1c2kf$=function(t){this.remOffscreenPasses_yrwi31$_0.add_11rb$(t)},r_.prototype.addOffscreenPasses_g83fdg$_1=function(){if(!this.addOffscreenPasses_g83fdg$_0.isEmpty()){var t;for(t=this.addOffscreenPasses_g83fdg$_0.iterator();t.hasNext();){var e=t.next();this.mutOffscreenPasses_2k8cox$_0.contains_11rb$(e)||this.mutOffscreenPasses_2k8cox$_0.add_11rb$(e)}this.addOffscreenPasses_g83fdg$_0.clear()}},r_.prototype.removeOffscreenPasses_fgywi7$_0=function(){this.remOffscreenPasses_yrwi31$_0.isEmpty()||(this.mutOffscreenPasses_2k8cox$_0.removeAll_brywnq$(this.remOffscreenPasses_yrwi31$_0),this.remOffscreenPasses_yrwi31$_0.clear())},r_.prototype.renderScene_aemszp$=function(t){var e,i;this.removeOffscreenPasses_fgywi7$_0(),this.addOffscreenPasses_g83fdg$_1(),e=this.onRenderScene;for(var n=0;n!==e.size;++n)this.onRenderScene.get_za3lpa$(n)(this,t);this.mainRenderPass.update_aemszp$(t),i=this.offscreenPasses;for(var r=0;r!==i.size;++r){var o=this.offscreenPasses.get_za3lpa$(r);o.isEnabled&&(o.update_aemszp$(t),o.collectDrawCommands_aemszp$(t))}this.mainRenderPass.collectDrawCommands_aemszp$(t)},r_.prototype.processInput_aemszp$=function(t){this.handleInput_gqm22e$_0(t)},r_.prototype.update_kma0q5$=function(t){var e;e=this.disposables_mcwga4$_0;for(var i=0;i!==e.size;++i)this.disposables_mcwga4$_0.get_za3lpa$(i).dispose_aemszp$(t.ctx);this.disposables_mcwga4$_0.clear(),lf.prototype.update_kma0q5$.call(this,t)},r_.prototype.dispose_ipew3$=function(t){this.disposables_mcwga4$_0.add_11rb$(t)},r_.prototype.dispose_aemszp$=function(t){var e,i;for(i=this.disposables_mcwga4$_0.iterator();i.hasNext();)i.next().dispose_aemszp$(t);this.disposables_mcwga4$_0.clear(),this.mainRenderPass.dispose_aemszp$(t),e=this.offscreenPasses;for(var n=0;n!==e.size;++n)this.offscreenPasses.get_za3lpa$(n).dispose_aemszp$(t);this.remOffscreenPasses_yrwi31$_0.clear(),this.mutOffscreenPasses_2k8cox$_0.clear(),lf.prototype.dispose_aemszp$.call(this,t)},r_.prototype.registerDragHandler_y44tw7$=function(t){this.dragHandlers_ipew8g$_0.contains_11rb$(t)||this.dragHandlers_ipew8g$_0.add_11rb$(t)},r_.prototype.removeDragHandler_y44tw7$=function(t){this.dragHandlers_ipew8g$_0.remove_11rb$(t)},r_.prototype.computeRay_wswg9$=function(t,e,i){return this.camera.computePickRay_2cu1go$(i,t,this.mainRenderPass.viewport,e)},r_.prototype.handleInput_gqm22e$_0=function(t){var e,i,n,r=null,o=this.hoverNode_ab2f3d$_0,s=t.inputMgr.pointerState.primaryPointer;if(this.isPickingEnabled&&s.isValid&&!s.isConsumed_za3lpa$()){if(s.isInViewport_hrtwbc$(this.mainRenderPass.viewport,t)&&this.camera.initRayTes_clwnka$(this.rayTest_odjp91$_0,s,this.mainRenderPass.viewport,t)&&(this.rayTest_jljx4v$(this.rayTest_odjp91$_0),this.rayTest_odjp91$_0.isHit&&(r=this.rayTest_odjp91$_0.hitNode)),!Lt(o,r)){if(null!=o){e=o.onHoverExit;for(var a=0;a!==e.size;++a)o.onHoverExit.get_za3lpa$(a)(o,s,this.rayTest_odjp91$_0,t)}if(null!=r){i=r.onHoverEnter;for(var l=0;l!==i.size;++l)r.onHoverEnter.get_za3lpa$(l)(r,s,this.rayTest_odjp91$_0,t)}this.hoverNode_ab2f3d$_0=r}if(null!=r&&Lt(o,r)){n=r.onHover;for(var u=0;u!==n.size;++u)r.onHover.get_za3lpa$(u)(r,s,this.rayTest_odjp91$_0,t)}this.handleDrag_dsfjhm$_0(t)}},r_.prototype.handleDrag_dsfjhm$_0=function(t){var e,i;this.dragPtrs_mbcqtw$_0.clear(),e=t.inputMgr.pointerState.pointers;for(var n=0;n!==e.length;++n){var r=t.inputMgr.pointerState.pointers[n];r.isValid&&r.isInViewport_hrtwbc$(this.mainRenderPass.viewport,t)&&(0!==r.buttonMask||0!==r.buttonEventMask||0!==r.deltaScroll)&&this.dragPtrs_mbcqtw$_0.add_11rb$(r)}for(i=L(R(this.dragHandlers_ipew8g$_0)).iterator();i.hasNext();){var o=i.next();this.dragHandlers_ipew8g$_0.get_za3lpa$(o).handleDrag_urvnay$(this.dragPtrs_mbcqtw$_0,this,t)}},o_.$metadata$={kind:Y,simpleName:"DragHandler",interfaces:[]},r_.$metadata$={kind:$,simpleName:"Scene",interfaces:[lf]},s_.prototype.cube_o7q6nm$=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=!1);var r=new vf(new Dz(Ft(ds().POSITIONS)),"skybox-cube");return r.generate_v2sixm$(a_),r.isFrustumChecked=!1,r.isCastingShadow=!1,r.shader=new p_(t,e,i,n),r},s_.prototype.sphere_457yi7$=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=!1);var r=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),"skybox-cube");return r.generate_v2sixm$(u_),r.isFrustumChecked=!1,r.isCastingShadow=!1,r.shader=new __(t,e,i,n),r},Object.defineProperty(p_.prototype,"environmentMap",{configurable:!0,get:function(){return this.environmentMap_dc5v0g$_0},set:function(t){var e;this.environmentMap_dc5v0g$_0=t,null!=(e=this.cubeMapSampler_0)&&(e.texture=t)}}),c_.prototype.skyboxCubeShaderModel_vzi7zj$=function(t,e,i){var n=new tp("skybox-cube"),r={v:null},o=new ip(n),s=o.mvpNode(),a=o.vec3TransformNode_vid4wo$(o.attrPositions().output,s.outModelMat,1);r.v=o.stageInterfaceNode_iikjwn$("ifLocalPos",a.outVec3),o.positionOutput=o.addNode_u9w9by$(new g_(s,o.attrPositions().output,o.stage)).outPosition;var l=new np(n),u=l.textureCubeSamplerNode_ub8j0u$(l.textureCubeNode_61zpoe$("skyboxCube"),r.v.output);return 0!==t&&(u.texLod=new op(new Pu(t))),e===i?l.colorOutput_a3v4si$(u.outColor):e?l.colorOutput_a3v4si$(l.hdrToLdrNode_r20yfm$(u.outColor).outColor):l.colorOutput_a3v4si$(l.gammaNode_ze33is$(u.outColor).outColor),n},c_.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var h_=null;function d_(){return null===h_&&new c_,h_}function f_(t,e,i){return t.cullMethod=Pl(),t.depthTest=xl(),s}function __(t,i,n,r){var o,a;y_(),void 0===i&&(i=0),zc.call(this,y_().skyboxSphereShaderModel_vzi7zj$(i,n,r)),this.textureSampler_0=null,this.environmentMap_gq82hk$_0=t,this.onPipelineSetup.add_11rb$(v_),this.onPipelineCreated.add_11rb$((o=this,a=t,function(t,i,n){var r,l,u,p,h=o,d=o.model;t:do{var f;for(u=sc.ALL,f=d.stages.values.iterator();f.hasNext();){var _=f.next();if(0!=(_.stage.mask&u.mask)){var m,$,y=_.nodes;e:do{var v;for(v=y.iterator();v.hasNext();){var g=v.next();if(Lt(g.name,"skyboxSphere")&&e.isType(g,Ep)){$=g;break e}}$=null}while(0);var b=null==(m=$)||e.isType(m,Ep)?m:c();if(null!=b){p=b;break t}}}p=null}while(0);return h.textureSampler_0=null!=(r=p)?r.sampler:null,null!=(l=o.textureSampler_0)&&(l.texture=a),s}))}function m_(){$_=this}p_.$metadata$={kind:$,simpleName:"SkyboxCubeShader",interfaces:[zc]},Object.defineProperty(__.prototype,"environmentMap",{configurable:!0,get:function(){return this.environmentMap_gq82hk$_0},set:function(t){var e;this.environmentMap_gq82hk$_0=t,null!=(e=this.textureSampler_0)&&(e.texture=t)}}),m_.prototype.skyboxSphereShaderModel_vzi7zj$=function(t,e,i){var n=new tp("skybox-sphere"),r={v:null},o=new ip(n),s=o.mvpNode();r.v=o.stageInterfaceNode_iikjwn$("ifUv",o.attrTexCoords().output),o.positionOutput=o.addNode_u9w9by$(new g_(s,o.attrPositions().output,o.stage)).outPosition;var a=new np(n),l=a.texture2dSamplerNode_fzevit$(a.texture2dNode_61zpoe$("skyboxSphere"),r.v.output);return 0!==t&&(l.texLod=new op(new Pu(t))),e===i?a.colorOutput_a3v4si$(l.outColor):e?a.colorOutput_a3v4si$(a.hdrToLdrNode_r20yfm$(l.outColor).outColor):a.colorOutput_a3v4si$(a.gammaNode_ze33is$(l.outColor).outColor),n},m_.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var $_=null;function y_(){return null===$_&&new m_,$_}function v_(t,e,i){return t.cullMethod=Pl(),t.depthTest=xl(),s}function g_(t,e,i){rp.call(this,"skyboxPos",i,lc().mask),this.mvp=t,this.inPos=e,this.outPosition=new op(new zu("skyboxPos_outPosition"),this)}__.$metadata$={kind:$,simpleName:"SkyboxSphereShader",interfaces:[zc]},g_.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inPos),this.dependsOn_lhtstx$(this.mvp)},g_.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outPosition.declare()+" = ("+this.mvp.outMvpMat+" * vec4("+this.inPos.ref3f_61zpoe$()+", 0.0)).xyww;")},g_.$metadata$={kind:$,simpleName:"SkyboxPosNode",interfaces:[rp]},s_.$metadata$={kind:y,simpleName:"Skybox",interfaces:[]};var b_,x_,w_,z_,k_,S_,C_,N_=null;function E_(t){void 0===t&&(t=z()),this.tags_0=t}function T_(t,e){var i;L_.call(this,t,e),this.onClick=M(),this.textColorHovered=new Jm(Oy().WHITE),this.isPressed_xi0anj$_0=!1,this.isHovered_k6sd62$_0=!1,this.ptrDownPos=pr(),this.textAlignment=new lm(hm(),hm()),this.onHoverEnter.add_11rb$((i=this,function(t,e,n,r){return i.isHovered=!0,s})),this.onHoverExit.add_11rb$(function(t){return function(e,i,n,r){return t.isHovered=!1,t.isPressed=!1,s}}(this)),this.onHover.add_11rb$(function(t){return function(e,i,n,r){return i.isLeftButtonEvent&&(i.isLeftButtonDown?(t.ptrDownPos.set_dleff0$(n.hitPositionLocal.x-t.componentBounds.min.x,n.hitPositionLocal.y-t.componentBounds.min.y),t.isPressed=!0):t.isPressed&&(t.isPressed=!1,t.ptrDownPos.x=t.ptrDownPos.x-(n.hitPositionLocal.x-t.componentBounds.min.x),t.ptrDownPos.y=t.ptrDownPos.y-(n.hitPositionLocal.y-t.componentBounds.min.y),t.ptrDownPos.length()<em(t,5)&&t.fireOnClick_kjsf19$(i,n,r))),s}}(this))}function P_(t,e){var i;D_.call(this,t,e),this.button=t,this.hoverAnimator=new O$(new A$(0,1)),this.colorWeightStd=1,this.colorWeightHovered=0,this.hoverEnterListener=(i=this,function(t,e,n,r){return i.hoverAnimator.duration=.1,i.hoverAnimator.speed=1,s}),this.hoverExitListener=function(t){return function(e,i,n,r){return t.hoverAnimator.duration=.2,t.hoverAnimator.speed=-1,s}}(this)}function O_(){}function M_(){}function j_(t){this.component=t,this.geometry=new Dz(Lm().UI_MESH_ATTRIBS),this.meshBuilder=new Ck(this.geometry),this.mesh=new vf(this.geometry),this.shader=new Am,this.color=new Jm(Oy().BLACK.withAlpha_mx4ult$(.5))}function A_(t){j_.call(this,t)}function I_(t,e,i,n){var r,o,a;Tm.call(this,i,n),this.menuAnimator_0=new M$(new A$(0,1)),this.menuButton_8be2vx$_2ldp8u$_0=this.menuButton_8be2vx$_2ldp8u$_0,this.menuAnimator_0.duration=.25,this.menuAnimator_0.speed=-1,this.menuAnimator_0.value.onUpdate=(r=this,function(t){return r.setScrollOffset_y2kzbl$(em(r,40)*(1-t),0,0),r.alpha=t,s}),this.layoutSpec.setOrigin_4ujscr$(W_(),W_(),W_()),this.layoutSpec.setSize_4ujscr$(t,Z_(100,!0),X_()),this.alpha=0,null!=e&&(this.unaryPlus_uv0sim$(n.label_tokfmu$("title",(o=e,a=n,function(t){return t.layoutSpec.setOrigin_4ujscr$(W_(),Y_(-50,!0),W_()),t.layoutSpec.setSize_4ujscr$(Z_(100,!0),Y_(40,!0),X_()),t.textAlignment=new lm(hm(),hm()),t.text=o,t.textColor.setCustom_11rb$(a.theme.accentColor),t.onUpdate.add_11rb$(function(t,e){return function(i,n){return t.v&&(t.v=!1,e.font.setCustom_11rb$(Km(e,n.ctx))),s}}({v:!0},t)),s}))),this.unaryPlus_uv0sim$(n.component_qphi6d$("divider",function(t){return function(e){e.layoutSpec.setOrigin_4ujscr$(Z_(5),Y_(-58,!0),W_()),e.layoutSpec.setSize_4ujscr$(Z_(90),Y_(1,!0),X_());var i=new j_(e);return i.color.setCustom_11rb$(t.theme.accentColor),e.ui.setCustom_11rb$(i),s}}(n)))),n.toggleButton_6j87po$(i+"-menuButton",function(t){return function(e){return t.menuButton_8be2vx$=e,e.ui.setCustom_11rb$(new R_(t,e)),e.layoutSpec.setOrigin_4ujscr$(Y_(10,!0),Y_(-50,!0),W_()),e.layoutSpec.setSize_4ujscr$(Y_(40,!0),Y_(40,!0),X_()),s}}(this))}function R_(t,e){this.$outer=t,km.call(this,e,new M_)}function L_(t,e){Sm.call(this,t,e),this.text_qvo458$_0=t,this.textAlignment_ux8xbn$_0=new lm(cm(),hm()),this.font=new Jm(null),this.textColor=new Jm(Oy().WHITE)}function D_(t,e){this.label=t,this.baseUi_tctiu8$_0=e,this.font=this.label.font.prop,this.textColor=jy(),this.geom=new Dz(Lm().UI_MESH_ATTRIBS),this.meshBuilder=new Ck(this.geom),this.mesh=new vf(this.geom),this.shader=new Am,this.textStartX=0,this.textWidth=0,this.textBaseline=0}function q_(){this.width=K_(0),this.height=K_(0),this.depth=K_(0),this.x=K_(0),this.y=K_(0),this.z=K_(0)}function F_(t,e){T.call(this),this.name$=t,this.ordinal$=e}function B_(){B_=function(){},b_=new F_("UN",0),x_=new F_("DP",1),w_=new F_("MM",2),z_=new F_("PC",3)}function U_(){return B_(),b_}function V_(){return B_(),x_}function G_(){return B_(),w_}function H_(){return B_(),z_}function W_(){return new om(0,U_())}function X_(){return new om(100,H_())}function K_(t,e){return void 0===e&&(e=!0),new om(t,U_(),e)}function Y_(t,e){return void 0===e&&(e=!0),new om(t,V_(),e)}function Z_(t,e){return void 0===e&&(e=!0),new om(t,H_(),e)}function J_(t,e){return e*t/100}function Q_(t,e){return t*e/96}function tm(t,e){return t*e/25.4}function em(t,e){return Q_(e,t.dpi)}function im(t,e){return at(e*t/100)}function nm(t,e){return at(t*e/96)}function rm(t,e){return at(t*e/25.4)}function om(t,e,i){void 0===i&&(i=!0),this.value=t,this.unit=e,this.roundToUnit=i}function sm(t,e,i){om.call(this,0,U_()),this.left=t,this.right=e,this.add=i}function am(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n}function lm(t,e){this.xAlignment=t,this.yAlignment=e}function um(t,e){T.call(this),this.name$=t,this.ordinal$=e}function pm(){pm=function(){},k_=new um("START",0),S_=new um("CENTER",1),C_=new um("END",2)}function cm(){return pm(),k_}function hm(){return pm(),S_}function dm(){return pm(),C_}function fm(t,e,i){void 0===i&&(i=Ct(e.name)+"-scroll"),Sm.call(this,i,e.root),this.scrollTarget=e,this.trackColor=Oy().GRAY.withAlpha_mx4ult$(.2),this.handleColor=Oy().GRAY.withAlpha_mx4ult$(.75),this.verticalTrackBounds=new gy,this.verticalHandleBounds=new gy,this.horizontalTrackBounds=new gy,this.horizontalHandleBounds=new gy,this.scrollPosY_ted4vc$_0=new I$(0),this.scrollPosYGuard_vhhi7b$_0=new I$(0),this.pickRay_m6hrch$_0=new ir,this.padding.set_m986jv$(Y_(3)),this.layoutSpec.setOrigin_4ujscr$(W_(),W_(),W_()),this.layoutSpec.setSize_4ujscr$(this.scrollTarget.layoutSpec.width,this.scrollTarget.layoutSpec.height,this.scrollTarget.layoutSpec.depth),this.scrollPosY_ted4vc$_0.stiffness=300,this.scrollPosYGuard_vhhi7b$_0.stiffness=500,t.registerDragHandler_y44tw7$(this)}function _m(t){this.scrollHandler=t,this.geom=Xz([ds().POSITIONS,ds().NORMALS,ds().COLORS]),this.meshBuilder=new Ck(this.geom),this.mesh=new vf(this.geom)}function mm(t,e,i,n,r){var o,a;Sm.call(this,t,r),this.onValueChanged=M(),this.onDragFinished=M(),this.trackColor=Oy().GRAY,this.trackColorHighlighted=new Jm(Oy().LIGHT_GRAY),this.knobColor=new Jm(Oy().WHITE),this.trackWidth=0,this.knobSize=0,this.knobPosition=pr(),this.min_c38r2y$_0=e,this.max_c38wrw$_0=i,this.value_ymubdz$_0=n,this.pickRay_0=new ir,this.hitPlane_0=new Yn,this.hitPos_0=Mr(),this.initHitPos_0=Mr(),this.startDrag_0=!1,this.startDragValue_0=0,this.hitPlane_0.n.set_czzhiu$(Er().Z_AXIS),this.onHover.add_11rb$((o=this,a=r,function(t,e,i,n){var r=i.hitPositionLocal.x-o.componentBounds.min.x,l=i.hitPositionLocal.y-o.componentBounds.min.y;return e.isLeftButtonEvent&&e.isLeftButtonDown&&o.isOverKnob_0(r,l)&&(a.scene.registerDragHandler_y44tw7$(o),o.startDrag_0=!0),s}))}function $m(t,e){this.slider=t,this.baseUi=e,this.geom=new Dz(Lm().UI_MESH_ATTRIBS),this.meshBuilder=new Ck(this.geom),this.mesh=new vf(this.geom),this.shader=new Am}function ym(t,e){var i;L_.call(this,t,e),this.editText=new gm,this.onUpdate.add_11rb$((i=this,function(t,e){var n,r=e.ctx;if(!r.inputMgr.keyEvents.isEmpty()){for(n=r.inputMgr.keyEvents.iterator();n.hasNext();){var o=n.next();if(o.isCharTyped)i.editText.charTyped_s8itvh$(O(o.typedChar));else if(o.isPressed)switch(o.keyCode){case-17:i.editText.backspace();break;case-19:i.editText.deleteSelection();break;case-25:o.isCtrlDown?i.editText.moveCaret_fzusl$(3,o.isShiftDown):i.editText.moveCaret_fzusl$(1,o.isShiftDown);break;case-26:o.isCtrlDown?i.editText.moveCaret_fzusl$(4,o.isShiftDown):i.editText.moveCaret_fzusl$(2,o.isShiftDown);break;case-21:i.editText.moveCaret_fzusl$(5,o.isShiftDown);break;case-22:i.editText.moveCaret_fzusl$(6,o.isShiftDown)}}i.text=i.editText.toString()}return s}))}function vm(t,e){D_.call(this,t,e),this.textField=t,this.caretAlphaAnimator_mmbcs$_0=new M$(new A$(0,1)),this.caretColor_qpd03i$_0=jy(),this.caretDrawPos_hkh11t$_0=new A$(0,0),this.caretPosAnimator_3ucebe$_0=new O$(this.caretDrawPos_hkh11t$_0),this.caretAlphaAnimator_mmbcs$_0.duration=.5,this.caretAlphaAnimator_mmbcs$_0.repeating=P$().REPEAT_TOGGLE_DIR,this.caretPosAnimator_3ucebe$_0.duration=.1}function gm(t){wm(),void 0===t&&(t=""),this.text_x0rs8x$_0=t,this.caretPosition_lco9r8$_0=0,this.selectionStart_trwhxy$_0=0}function bm(){xm=this,this.MOVE_LEFT=1,this.MOVE_RIGHT=2,this.MOVE_WORD_LEFT=3,this.MOVE_WORD_RIGHT=4,this.MOVE_START=5,this.MOVE_END=6}E_.prototype.addTag_61zpoe$=function(t){var e=d(t,61);if(e>=0){var i=_(t,new Bt(0,e-1|0)),n=e+1|0,r=t.substring(n);this.set_4w9ihe$(i,r)}else this.set_4w9ihe$(t,null)},E_.prototype.set_4w9ihe$=function(t,e){this.put_xwzc9p$(t,null!=e?e.toString():null)},E_.prototype.plusAssign_61zpoe$=function(t){this.addTag_61zpoe$(t)},E_.prototype.hasTag_jyasbz$=function(t,e){return void 0===e&&(e=null),this.containsKey_11rb$(t)&&Lt(this.get_11rb$(t),e)},E_.prototype.getBoolean_ivxn3r$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Ut(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},E_.prototype.getInt_bm4lxs$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Vt(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},E_.prototype.getFloat_9sobi5$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Gt(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},E_.prototype.getDouble_io5o9c$=function(t,i){var n,r=this.get_11rb$(t);if(null==r)n=i;else try{n=Gt(r)}catch(t){if(!e.isType(t,D))throw t;n=i}return n},E_.prototype.getTyped_pt3pci$=X("kool-kool-core.de.fabmax.kool.scene.Tags.getTyped_pt3pci$",K((function(){var t=e.kotlin.Exception;return function(i,n,r){var o,s=this.get_11rb$(i);if(null==s)o=n;else try{o=r(s)}catch(i){if(!e.isType(i,t))throw i;o=n}return o}}))),E_.prototype.toString=function(){var t,e=Ot(),i=w(this.size);for(t=this.entries.iterator();t.hasNext();){var n=t.next(),r=i.add_11rb$,o=n.key,s=n.value;r.call(i,null!=s?o+"="+Ct(s):o)}return Ht(i,e,void 0,"[","]"),e.toString()},Object.defineProperty(E_.prototype,"entries",{get:function(){return this.tags_0.entries}}),Object.defineProperty(E_.prototype,"keys",{get:function(){return this.tags_0.keys}}),Object.defineProperty(E_.prototype,"size",{get:function(){return this.tags_0.size}}),Object.defineProperty(E_.prototype,"values",{get:function(){return this.tags_0.values}}),E_.prototype.clear=function(){return this.tags_0.clear()},E_.prototype.containsKey_11rb$=function(t){return this.tags_0.containsKey_11rb$(t)},E_.prototype.containsValue_11rc$=function(t){return this.tags_0.containsValue_11rc$(t)},E_.prototype.get_11rb$=function(t){return this.tags_0.get_11rb$(t)},E_.prototype.isEmpty=function(){return this.tags_0.isEmpty()},E_.prototype.put_xwzc9p$=function(t,e){return this.tags_0.put_xwzc9p$(t,e)},E_.prototype.putAll_a2k3zr$=function(t){return this.tags_0.putAll_a2k3zr$(t)},E_.prototype.remove_11rb$=function(t){return this.tags_0.remove_11rb$(t)},E_.$metadata$={kind:$,simpleName:"Tags",interfaces:[Wt]},Object.defineProperty(T_.prototype,"isPressed",{configurable:!0,get:function(){return this.isPressed_xi0anj$_0},set:function(t){this.isPressed_xi0anj$_0=t}}),Object.defineProperty(T_.prototype,"isHovered",{configurable:!0,get:function(){return this.isHovered_k6sd62$_0},set:function(t){this.isHovered_k6sd62$_0=t}}),T_.prototype.fireOnClick_kjsf19$=function(t,e,i){var n;n=this.onClick;for(var r=0;r!==n.size;++r)this.onClick.get_za3lpa$(r)(this,t,e,i)},T_.prototype.setThemeProps_aemszp$=function(t){L_.prototype.setThemeProps_aemszp$.call(this,t),this.textColorHovered.setTheme_11rb$(this.root.theme.accentColor)},T_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newButtonUi_t4rm0v$(this)},T_.$metadata$={kind:$,simpleName:"Button",interfaces:[L_]},P_.prototype.createUi_aemszp$=function(t){var e;D_.prototype.createUi_aemszp$.call(this,t),this.hoverAnimator.speed=0,this.hoverAnimator.value.onUpdate=(e=this,function(t){return e.colorWeightHovered=t,e.colorWeightStd=1-t,e.button.requestUiUpdate(),s});var i=this.button.onHoverEnter,n=this.hoverEnterListener;i.add_11rb$(n);var r=this.button.onHoverExit,o=this.hoverExitListener;r.add_11rb$(o)},P_.prototype.updateTextColor=function(){this.textColor.clear(),this.textColor.add_m79ulu$(this.button.textColor.apply(),this.colorWeightStd),this.textColor.add_m79ulu$(this.button.textColorHovered.apply(),this.colorWeightHovered)},P_.prototype.dispose_aemszp$=function(t){D_.prototype.dispose_aemszp$.call(this,t);var e=this.button.onHoverEnter,i=this.hoverEnterListener;e.remove_11rb$(i);var n=this.button.onHoverExit,r=this.hoverExitListener;n.remove_11rb$(r)},P_.prototype.onRender_aemszp$=function(t){D_.prototype.onRender_aemszp$.call(this,t),this.hoverAnimator.tick_aemszp$(t)},P_.$metadata$={kind:$,simpleName:"ButtonUi",interfaces:[D_]},O_.prototype.updateComponentAlpha=function(){},O_.prototype.createUi_aemszp$=function(t){},O_.prototype.updateUi_aemszp$=function(t){},O_.prototype.onRender_aemszp$=function(t){},O_.prototype.dispose_aemszp$=function(t){},O_.$metadata$={kind:Y,simpleName:"ComponentUi",interfaces:[ig]},M_.$metadata$={kind:$,simpleName:"BlankComponentUi",interfaces:[O_]},j_.prototype.updateComponentAlpha=function(){this.shader.alpha=this.component.alpha},j_.prototype.createUi_aemszp$=function(t){this.color.setTheme_11rb$(this.component.root.theme.backgroundColor).apply(),this.mesh.shader=this.shader,this.component.addNode_xtids1$(this.mesh,0)},j_.prototype.dispose_aemszp$=function(t){this.component.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},j_.prototype.updateUi_aemszp$=function(t){this.color.setTheme_11rb$(this.component.root.theme.backgroundColor).apply(),this.component.setupBuilder_84rojv$(this.meshBuilder),this.meshBuilder.color=this.color.prop;var e=this.meshBuilder,i=new Ik;i.size.set_dleff0$(this.component.width,this.component.height),i.zeroTexCoords(),e.rect_e5k3t5$(i)},j_.prototype.onRender_aemszp$=function(t){},j_.$metadata$={kind:$,simpleName:"SimpleComponentUi",interfaces:[O_]},A_.$metadata$={kind:$,simpleName:"BlurredComponentUi",interfaces:[j_]},Object.defineProperty(I_.prototype,"menuButton_8be2vx$",{configurable:!0,get:function(){return null==this.menuButton_8be2vx$_2ldp8u$_0?ct("menuButton"):this.menuButton_8be2vx$_2ldp8u$_0},set:function(t){this.menuButton_8be2vx$_2ldp8u$_0=t}}),Object.defineProperty(I_.prototype,"isOpen",{configurable:!0,get:function(){return this.menuButton_8be2vx$.isEnabled},set:function(t){this.menuButton_8be2vx$.isEnabled=t}}),Object.defineProperty(I_.prototype,"animationPos",{configurable:!0,get:function(){return this.menuAnimator_0.value.value}}),R_.prototype.createUi_aemszp$=function(t){km.prototype.createUi_aemszp$.call(this,t),this.knobAnimator.duration=.5,this.knobAnimator.value.onUpdate;var e,i,n=this.tb.onStateChange,r=(e=this,i=this.$outer,function(t){return i.menuAnimator_0.speed=e.tb.isEnabled?1:-1,s});n.add_11rb$(r),this.mesh.shader=new Am},R_.prototype.onRender_aemszp$=function(t){km.prototype.onRender_aemszp$.call(this,t),this.$outer.menuAnimator_0.tick_aemszp$(t)},R_.prototype.updateUi_aemszp$=function(t){var e=.5*this.tb.width,i=.18*this.tb.height,n=-e/2,r=em(this.tb,2.5);this.updateTextColor(),this.tb.setupBuilder_84rojv$(this.meshBuilder);var o=this.meshBuilder;o.color=new Ey(0,0,0,0);var s=new Ek;s.zeroTexCoords();var a=this.tb.width,l=this.tb.height;s.radius=A.min(a,l)/2,s.center.set_y2kzbl$(this.tb.width/2,this.tb.height/2,-4),s.steps=30,o.circle_59f34t$(s);var u=this.knobAnimator.value.value*-e*.1,p=e-this.knobAnimator.value.value*e*.4;o.color=this.textColor,o.translate_y2kzbl$(this.tb.width/2,this.tb.height/2,0),o.rotate_ad55pp$(180-180*this.knobAnimator.value.value,Er().Z_AXIS),o.transform.push(),o.translate_y2kzbl$(u,i,0),o.rotate_ad55pp$(45*this.knobAnimator.value.value,Er().Z_AXIS);var c=new Ik;c.origin.set_y2kzbl$(n,-r/2,0),c.size.set_dleff0$(p,r),c.zeroTexCoords(),o.rect_e5k3t5$(c),o.transform.pop();var h=new Ik;h.origin.set_y2kzbl$(n,-r/2,0),h.size.set_dleff0$(e,r),o.rect_e5k3t5$(h),o.transform.push(),o.translate_y2kzbl$(u,-i,0),o.rotate_ad55pp$(-45*this.knobAnimator.value.value,Er().Z_AXIS);var d=new Ik;d.origin.set_y2kzbl$(n,-r/2,0),d.size.set_dleff0$(p,r),o.rect_e5k3t5$(d),o.transform.pop()},R_.$metadata$={kind:$,simpleName:"MenuButtonUi",interfaces:[km]},I_.$metadata$={kind:$,simpleName:"DrawerMenu",interfaces:[Tm]},Object.defineProperty(L_.prototype,"text",{configurable:!0,get:function(){return this.text_qvo458$_0},set:function(t){Lt(t,this.text_qvo458$_0)||(this.text_qvo458$_0=t,this.requestUiUpdate())}}),Object.defineProperty(L_.prototype,"textAlignment",{configurable:!0,get:function(){return this.textAlignment_ux8xbn$_0},set:function(t){null!=t&&t.equals(this.textAlignment_ux8xbn$_0)||(this.textAlignment_ux8xbn$_0=t,this.requestUiUpdate())}}),L_.prototype.setThemeProps_aemszp$=function(t){Sm.prototype.setThemeProps_aemszp$.call(this,t),this.font.setTheme_11rb$(Xm(this,t)),this.textColor.setTheme_11rb$(this.root.theme.foregroundColor)},L_.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newLabelUi_wviu0r$(this)},L_.$metadata$={kind:$,simpleName:"Label",interfaces:[Sm]},D_.prototype.updateComponentAlpha=function(){this.baseUi_tctiu8$_0.updateComponentAlpha(),this.shader.alpha=this.label.alpha},D_.prototype.createUi_aemszp$=function(t){this.baseUi_tctiu8$_0.createUi_aemszp$(t),this.mesh.shader=this.shader,this.label.plusAssign_f1kmr1$(this.mesh)},D_.prototype.updateUi_aemszp$=function(t){this.baseUi_tctiu8$_0.updateUi_aemszp$(t),this.label.font.isUpdate||null!=this.label.font.prop||this.label.font.setCustom_11rb$(lg().defaultFont_aemszp$(t)),this.label.font.isUpdate&&(this.font=this.label.font.apply(),this.shader.font=this.font),this.label.setupBuilder_84rojv$(this.meshBuilder),this.updateTextColor(),this.computeTextMetrics(),this.renderText_aemszp$(t)},D_.prototype.onRender_aemszp$=function(t){this.baseUi_tctiu8$_0.onRender_aemszp$(t)},D_.prototype.dispose_aemszp$=function(t){this.baseUi_tctiu8$_0.dispose_aemszp$(t),this.label.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},D_.prototype.computeTextMetrics=function(){var t,i,n,r,o,s,a,l;switch(this.textWidth=null!=(i=null!=(t=this.font)?t.textWidth_61zpoe$(this.label.text):null)?i:0,this.label.textAlignment.xAlignment.name){case"START":n=this.label.padding.left.toUnits_dleff0$(this.label.width,this.label.dpi);break;case"CENTER":n=(this.label.width-this.textWidth)/2;break;case"END":n=this.label.width-this.textWidth-this.label.padding.right.toUnits_dleff0$(this.label.width,this.label.dpi);break;default:n=e.noWhenBranchMatched()}switch(this.textStartX=n,this.label.textAlignment.yAlignment.name){case"START":l=this.label.height-this.label.padding.top.toUnits_dleff0$(this.label.width,this.label.dpi)-(null!=(o=null!=(r=this.font)?r.normHeight:null)?o:0);break;case"CENTER":l=(this.label.height-(null!=(a=null!=(s=this.font)?s.normHeight:null)?a:0))/2;break;case"END":l=this.label.padding.bottom.toUnits_dleff0$(this.label.height,this.label.dpi);break;default:l=e.noWhenBranchMatched()}this.textBaseline=l},D_.prototype.renderText_aemszp$=function(t){this.meshBuilder.color=this.textColor;var e=this.font;if(null!=e){var i=this.meshBuilder,n=new Dk(e);n.origin.set_y2kzbl$(this.textStartX,this.textBaseline,em(this.label,.1)),n.text=this.label.text,i.text_s8z339$(n,0)}},D_.prototype.updateTextColor=function(){this.textColor.set_czzhhz$(this.label.textColor.apply())},D_.$metadata$={kind:$,simpleName:"LabelUi",interfaces:[O_]},q_.prototype.setOrigin_4ujscr$=function(t,e,i){this.x=t,this.y=e,this.z=i},q_.prototype.setSize_4ujscr$=function(t,e,i){this.width=t,this.height=e,this.depth=i},q_.prototype.set_m6ih2k$=function(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.x=t.x,this.y=t.y,this.z=t.z},q_.$metadata$={kind:$,simpleName:"LayoutSpec",interfaces:[]},F_.$metadata$={kind:$,simpleName:"SizeUnit",interfaces:[T]},F_.values=function(){return[U_(),V_(),G_(),H_()]},F_.valueOf_61zpoe$=function(t){switch(t){case"UN":return U_();case"DP":return V_();case"MM":return G_();case"PC":return H_();default:P("No enum constant de.fabmax.kool.scene.ui.SizeUnit."+t)}},om.prototype.toUnits_dleff0$=function(t,i){var n;if(this.roundToUnit)switch(this.unit.name){case"UN":n=at(this.value);break;case"DP":n=nm(this.value,i);break;case"MM":n=rm(this.value,i);break;case"PC":n=im(this.value,t);break;default:n=e.noWhenBranchMatched()}else switch(this.unit.name){case"UN":n=this.value;break;case"DP":n=Q_(this.value,i);break;case"MM":n=tm(this.value,i);break;case"PC":n=J_(this.value,t);break;default:n=e.noWhenBranchMatched()}return n},om.prototype.plus_m986jv$=function(t){return new sm(this,t,!0)},om.prototype.minus_m986jv$=function(t){return new sm(this,t,!1)},om.prototype.equals=function(t){return this===t||!!e.isType(t,om)&&this.value===t.value&&this.unit===t.unit&&this.roundToUnit===t.roundToUnit},om.prototype.hashCode=function(){var t=st(this.value);return t=(31*(t=(31*t|0)+this.unit.hashCode()|0)|0)+st(this.roundToUnit)|0},om.$metadata$={kind:$,simpleName:"SizeSpec",interfaces:[]},sm.prototype.toUnits_dleff0$=function(t,e){var i=this.left.toUnits_dleff0$(t,e),n=this.right.toUnits_dleff0$(t,e);return this.add?i+n:i-n},sm.$metadata$={kind:$,simpleName:"CombSizeSpec",interfaces:[om]},am.prototype.set_m986jv$=function(t){this.set_107250$(t,t,t,t)},am.prototype.set_107250$=function(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n},am.$metadata$={kind:$,simpleName:"Margin",interfaces:[]},am.prototype.component1=function(){return this.top},am.prototype.component2=function(){return this.bottom},am.prototype.component3=function(){return this.left},am.prototype.component4=function(){return this.right},am.prototype.copy_107250$=function(t,e,i,n){return new am(void 0===t?this.top:t,void 0===e?this.bottom:e,void 0===i?this.left:i,void 0===n?this.right:n)},am.prototype.toString=function(){return"Margin(top="+e.toString(this.top)+", bottom="+e.toString(this.bottom)+", left="+e.toString(this.left)+", right="+e.toString(this.right)+")"},am.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.top)|0)+e.hashCode(this.bottom)|0)+e.hashCode(this.left)|0)+e.hashCode(this.right)|0},am.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.top,t.top)&&e.equals(this.bottom,t.bottom)&&e.equals(this.left,t.left)&&e.equals(this.right,t.right)},lm.$metadata$={kind:$,simpleName:"Gravity",interfaces:[]},lm.prototype.component1=function(){return this.xAlignment},lm.prototype.component2=function(){return this.yAlignment},lm.prototype.copy_9pkgn0$=function(t,e){return new lm(void 0===t?this.xAlignment:t,void 0===e?this.yAlignment:e)},lm.prototype.toString=function(){return"Gravity(xAlignment="+e.toString(this.xAlignment)+", yAlignment="+e.toString(this.yAlignment)+")"},lm.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.xAlignment)|0)+e.hashCode(this.yAlignment)|0},lm.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.xAlignment,t.xAlignment)&&e.equals(this.yAlignment,t.yAlignment)},um.$metadata$={kind:$,simpleName:"Alignment",interfaces:[T]},um.values=function(){return[cm(),hm(),dm()]},um.valueOf_61zpoe$=function(t){switch(t){case"START":return cm();case"CENTER":return hm();case"END":return dm();default:P("No enum constant de.fabmax.kool.scene.ui.Alignment."+t)}},fm.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newScrollHandlerUi_dz938y$(this)},fm.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){this.drawBounds.set_ea4od8$(this.scrollTarget.drawBounds),this.bounds.set_ea4od8$(this.drawBounds)},fm.prototype.handleDrag_urvnay$=function(t,e,i){if(0!==this.alpha){!t.isEmpty()&&!t.get_za3lpa$(0).isConsumed_za3lpa$()&&this.computeLocalPickRay_wswg9$(t.get_za3lpa$(0),i,this.pickRay_m6hrch$_0)&&this.bounds.hitDistanceSqr_nvyeur$(this.pickRay_m6hrch$_0)<ot.MAX_VALUE&&(this.scrollPosY_ted4vc$_0.desired=this.scrollPosY_ted4vc$_0.desired+50*t.get_za3lpa$(0).deltaScroll,t.get_za3lpa$(0).consume_za3lpa$()),this.scrollPosY_ted4vc$_0.desired>0&&(this.scrollPosY_ted4vc$_0.desired>this.scrollPosYGuard_vhhi7b$_0.actual&&(this.scrollPosYGuard_vhhi7b$_0.actual=this.scrollPosY_ted4vc$_0.desired),this.scrollPosYGuard_vhhi7b$_0.desired=0,this.scrollPosY_ted4vc$_0.desired=this.scrollPosYGuard_vhhi7b$_0.animate_mx4ult$(i.deltaT));var n=this.scrollTarget.drawBounds.size.y-this.scrollTarget.contentBounds.size.y;this.scrollPosY_ted4vc$_0.desired<n&&(this.scrollPosY_ted4vc$_0.desired<this.scrollPosYGuard_vhhi7b$_0.actual&&(this.scrollPosYGuard_vhhi7b$_0.actual=this.scrollPosY_ted4vc$_0.desired),this.scrollPosYGuard_vhhi7b$_0.desired=n,this.scrollPosY_ted4vc$_0.desired=this.scrollPosYGuard_vhhi7b$_0.animate_mx4ult$(i.deltaT)),this.scrollPosY_ted4vc$_0.animate_mx4ult$(i.deltaT);var r,o=this.scrollTarget.scrollOffset.y,s=this.scrollPosY_ted4vc$_0.actual;r=EE.FUZZY_EQ_F;var a=o-s;A.abs(a)<=r||this.scrollTarget.setScrollOffset_y2kzbl$(0,this.scrollPosY_ted4vc$_0.actual,0)}},fm.prototype.rayTest_jljx4v$=function(t){if(0!==this.alpha){var e=this.verticalTrackBounds.hitDistanceSqr_nvyeur$(t.ray),i=this.horizontalTrackBounds.hitDistanceSqr_nvyeur$(t.ray),n=A.min(e,i);n<ot.MAX_VALUE&&n<=t.hitDistanceSqr&&t.setHit_vfk0k2$(this,A.sqrt(n))}},fm.$metadata$={kind:$,simpleName:"ScrollHandler",interfaces:[o_,Sm]},_m.prototype.updateComponentAlpha=function(){},_m.prototype.createUi_aemszp$=function(t){this.scrollHandler.plusAssign_f1kmr1$(this.mesh)},_m.prototype.updateUi_aemszp$=function(t){this.meshBuilder.clear(),this.meshBuilder.identity(),this.computeTrackBounds(),this.drawVerticalBar(),this.drawHorizontalBar()},_m.prototype.computeTrackBounds=function(){var t=this.scrollHandler.scrollTarget,e=t.drawBounds.size.y<t.contentBounds.size.y,i=t.drawBounds.size.x<t.contentBounds.size.x,n=t.drawBounds.size.x,r=t.drawBounds.size.y,o=this.scrollHandler.padding.top.toUnits_dleff0$(r,this.scrollHandler.dpi),s=this.scrollHandler.padding.bottom.toUnits_dleff0$(r,this.scrollHandler.dpi),a=this.scrollHandler.padding.left.toUnits_dleff0$(n,this.scrollHandler.dpi),l=this.scrollHandler.padding.right.toUnits_dleff0$(n,this.scrollHandler.dpi),u=em(this.scrollHandler,6),p=em(this.scrollHandler,.1),c=em(this.scrollHandler,.25);if(e){var h=n-l-u,d=this.scrollHandler.padding.bottom.toUnits_dleff0$(r,this.scrollHandler.dpi)+(i?u+l:0),f=u,_=r-o-s-(i?u+l:0);this.scrollHandler.verticalTrackBounds.set_w8lrqs$(h,d,p,h+f,d+_,p).move_czzhiu$(t.drawBounds.min);var m=t.drawBounds.size.y/t.contentBounds.size.y*_,$=em(this.scrollHandler,12),y=m<$?$:m>_?_:m,v=y-m,g=_-(v<0?0:v>_?_:v),b=(t.drawBounds.min.y-t.contentBounds.min.y)/t.contentBounds.size.y*g+d,x=d+_-y,w=b<d?d:b>x?x:b;this.scrollHandler.verticalHandleBounds.set_w8lrqs$(h,w,c,h+f,w+y,c).move_czzhiu$(t.drawBounds.min)}else this.scrollHandler.verticalTrackBounds.clear(),this.scrollHandler.verticalHandleBounds.clear();if(i){var z=a,k=s,S=this.scrollHandler.width-a-l-(e?u+l:0),C=u;this.scrollHandler.horizontalTrackBounds.set_w8lrqs$(z,k,p,z+S,k+C,p).move_czzhiu$(t.drawBounds.min);var N=t.drawBounds.size.x/t.contentBounds.size.x*S,E=em(this.scrollHandler,12),T=N<E?E:N>S?S:N,P=T-N,O=S-(P<0?0:P>S?S:P),M=(t.drawBounds.min.x-t.contentBounds.min.x)/t.contentBounds.size.x*O+z,j=z+S-T,A=M<z?z:M>j?j:M;this.scrollHandler.horizontalHandleBounds.set_w8lrqs$(A,k,c,A+T,k+C,c).move_czzhiu$(t.drawBounds.min)}else this.scrollHandler.horizontalTrackBounds.clear(),this.scrollHandler.horizontalHandleBounds.clear()},_m.prototype.drawVerticalBar=function(){this.drawDefaultBar_xyh9j8$_0(this.scrollHandler.verticalTrackBounds,this.scrollHandler.verticalHandleBounds)},_m.prototype.drawHorizontalBar=function(){this.drawDefaultBar_xyh9j8$_0(this.scrollHandler.horizontalTrackBounds,this.scrollHandler.horizontalHandleBounds)},_m.prototype.drawDefaultBar_xyh9j8$_0=function(t,e){if(!t.isEmpty){this.meshBuilder.color=this.scrollHandler.trackColor;var i=this.meshBuilder,n=new Ik;n.origin.set_y2kzbl$(t.min.x,t.min.y,t.min.z),n.size.set_dleff0$(t.size.x,t.size.y);var r=t.size.x,o=t.size.y;n.cornerRadius=A.min(r,o)/2,n.cornerSteps=4,n.zeroTexCoords(),i.rect_e5k3t5$(n)}if(!e.isEmpty){this.meshBuilder.color=this.scrollHandler.handleColor;var s=this.meshBuilder,a=new Ik;a.origin.set_y2kzbl$(e.min.x,e.min.y,e.min.z),a.size.set_dleff0$(e.size.x,e.size.y);var l=e.size.x,u=e.size.y;a.cornerRadius=A.min(l,u)/2,a.cornerSteps=4,a.zeroTexCoords(),s.rect_e5k3t5$(a)}},_m.prototype.onRender_aemszp$=function(t){},_m.prototype.dispose_aemszp$=function(t){this.scrollHandler.minusAssign_f1kmr1$(this.mesh),this.mesh.dispose_aemszp$(t)},_m.$metadata$={kind:$,simpleName:"ScrollHandlerUi",interfaces:[O_]},Object.defineProperty(mm.prototype,"min",{configurable:!0,get:function(){return this.min_c38r2y$_0},set:function(t){t!==this.min_c38r2y$_0&&(this.min_c38r2y$_0=t,this.requestUiUpdate())}}),Object.defineProperty(mm.prototype,"max",{configurable:!0,get:function(){return this.max_c38wrw$_0},set:function(t){t!==this.max_c38wrw$_0&&(this.max_c38wrw$_0=t,this.requestUiUpdate())}}),Object.defineProperty(mm.prototype,"value",{configurable:!0,get:function(){return this.value_ymubdz$_0},set:function(t){var e;if(t!==this.value_ymubdz$_0){var i,n=this.min,r=this.max;i=t<n?n:t>r?r:t,this.value_ymubdz$_0=i,this.requestUiUpdate(),e=this.onValueChanged;for(var o=0;o!==e.size;++o)this.onValueChanged.get_za3lpa$(o)(this,this.value_ymubdz$_0)}}}),mm.prototype.setValue_y2kzbl$=function(t,e,i){this.min=t,this.max=e,this.value=i},mm.prototype.isOverKnob_0=function(t,e){var i=t-this.knobPosition.x,n=e-this.knobPosition.y;return i*i+n*n<this.knobSize*this.knobSize},mm.prototype.handleDrag_urvnay$=function(t,e,i){if(1===t.size&&!t.get_za3lpa$(0).isConsumed_za3lpa$()&&t.get_za3lpa$(0).isLeftButtonDown&&this.computeLocalPickRay_wswg9$(t.get_za3lpa$(0),i,this.pickRay_0)){if(this.hitPlane_0.intersectionPoint_lplggz$(this.pickRay_0,this.hitPos_0)){this.startDrag_0&&(this.startDrag_0=!1,this.initHitPos_0.set_czzhiu$(this.hitPos_0),this.startDragValue_0=this.value);var n=this.hitPos_0.x-this.initHitPos_0.x;this.value=this.startDragValue_0+n/this.trackWidth*(this.max-this.min)}t.get_za3lpa$(0).consume_za3lpa$()}else{var r;for(e.removeDragHandler_y44tw7$(this),r=this.onDragFinished.iterator();r.hasNext();)r.next()(this,this.value)}},mm.prototype.setThemeProps_aemszp$=function(t){Sm.prototype.setThemeProps_aemszp$.call(this,t),this.knobColor.setTheme_11rb$(this.root.theme.accentColor),this.trackColorHighlighted.setTheme_11rb$(jy().add_m79ulu$(this.root.theme.accentColor,.4))},mm.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newSliderUi_l85jm8$(this)},mm.$metadata$={kind:$,simpleName:"Slider",interfaces:[o_,Sm]},$m.prototype.updateComponentAlpha=function(){this.baseUi.updateComponentAlpha(),this.shader.alpha=this.slider.alpha},$m.prototype.createUi_aemszp$=function(t){this.baseUi.createUi_aemszp$(t),this.mesh.shader=this.shader,this.slider.plusAssign_f1kmr1$(this.mesh)},$m.prototype.dispose_aemszp$=function(t){this.baseUi.dispose_aemszp$(t),this.mesh.dispose_aemszp$(t),this.slider.minusAssign_f1kmr1$(this.mesh)},$m.prototype.updateUi_aemszp$=function(t){this.baseUi.updateUi_aemszp$(t),this.slider.knobSize=em(this.slider,10);var e=em(this.slider,6),i=this.slider.padding.left.toUnits_dleff0$(this.slider.width,this.slider.dpi)+this.slider.knobSize,n=(this.slider.height-e)/2,r=(this.slider.value-this.slider.min)/(this.slider.max-this.slider.min);if(this.slider.trackWidth=this.slider.width-i-this.slider.knobSize-this.slider.padding.right.toUnits_dleff0$(this.slider.width,this.slider.dpi),this.slider.knobPosition.set_dleff0$(i+this.slider.trackWidth*r,this.slider.height/2),this.slider.setupBuilder_84rojv$(this.meshBuilder),this.slider.value>this.slider.min){this.meshBuilder.color=this.slider.trackColorHighlighted.apply();var o=this.meshBuilder,s=new Ik;s.origin.set_y2kzbl$(i,n,em(this.slider,.1)),s.size.set_dleff0$(this.slider.knobPosition.x-i+e,e),s.cornerRadius=e/2,s.cornerSteps=4,s.zeroTexCoords(),o.rect_e5k3t5$(s)}if(this.slider.value<this.slider.max){this.meshBuilder.color=this.slider.trackColor;var a=this.meshBuilder,l=new Ik;l.origin.set_y2kzbl$(this.slider.knobPosition.x-e,n,em(this.slider,.1)),l.size.set_dleff0$(this.slider.trackWidth-this.slider.knobPosition.x+i+e,e),l.cornerRadius=e/2,l.cornerSteps=4,l.zeroTexCoords(),a.rect_e5k3t5$(l)}this.meshBuilder.color=this.slider.knobColor.apply();var u=this.meshBuilder,p=new Ek;p.zeroTexCoords(),p.center.set_y2kzbl$(this.slider.knobPosition.x,this.slider.knobPosition.y,em(this.slider,.2)),p.radius=this.slider.knobSize,p.steps=30,u.circle_59f34t$(p)},$m.prototype.onRender_aemszp$=function(t){this.baseUi.onRender_aemszp$(t)},$m.$metadata$={kind:$,simpleName:"SliderUi",interfaces:[O_]},ym.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newTextFieldUi_p39bdq$(this)},ym.$metadata$={kind:$,simpleName:"TextField",interfaces:[L_]},vm.prototype.onRender_aemszp$=function(t){this.textField.requestUiUpdate(),D_.prototype.onRender_aemszp$.call(this,t)},vm.prototype.renderText_aemszp$=function(t){var e,i,n,r,o,s,a,l=this.label.padding.left.toUnits_dleff0$(this.label.width,this.label.dpi),u=this.label.width-this.label.padding.right.toUnits_dleff0$(this.label.width,this.label.dpi),p=this.textBaseline-.2*(null!=(r=null!=(n=null!=(i=null!=(e=this.font)?e.charMap:null)?i.fontProps:null)?n.sizePts:null)?r:0),c={v:this.textStartX},h={v:this.textStartX};if(this.textField.editText.caretPosition>0||this.textField.editText.selectionStart>0){var d=this.textField.editText.caretPosition,f=this.textField.editText.selectionStart;o=A.max(d,f)-1|0;for(var _=0;_<=o;_++){var m=null!=(a=null!=(s=this.font)?s.charWidth_s8itvh$(O(this.textField.editText.get_za3lpa$(_))):null)?a:0;_<this.textField.editText.caretPosition&&(c.v+=m),_<this.textField.editText.selectionStart&&(h.v+=m)}}c.v!==this.caretDrawPos_hkh11t$_0.to&&(this.caretDrawPos_hkh11t$_0.from=this.caretDrawPos_hkh11t$_0.value,this.caretDrawPos_hkh11t$_0.to=c.v,this.caretPosAnimator_3ucebe$_0.progress=0,this.caretPosAnimator_3ucebe$_0.speed=1),c.v=this.caretPosAnimator_3ucebe$_0.tick_aemszp$(t);var $,y,v,g,b=this.meshBuilder;if(b.transform.push(),b.translate_y2kzbl$(0,0,em(this.label,.1)),this.meshBuilder.color=this.label.root.theme.accentColor,this.meshBuilder.line_s2l86p$(l,p,u,p,em(this.label,1.5)),this.textField.editText.selectionStart!==this.textField.editText.caretPosition){this.caretColor_qpd03i$_0.set_czzhhz$(this.label.root.theme.accentColor),this.caretColor_qpd03i$_0.a=.4,this.meshBuilder.color=this.caretColor_qpd03i$_0;var x,w,z,k,S=this.meshBuilder,C=new Ik;C.origin.set_y2kzbl$(c.v,p,0),C.size.set_dleff0$(h.v-c.v,1.2*(null!=(k=null!=(z=null!=(w=null!=(x=this.font)?x.charMap:null)?w.fontProps:null)?z.sizePts:null)?k:0)),C.zeroTexCoords(),S.rect_e5k3t5$(C)}this.caretColor_qpd03i$_0.set_czzhhz$(this.label.root.theme.accentColor),this.caretColor_qpd03i$_0.a=this.caretAlphaAnimator_mmbcs$_0.tick_aemszp$(t),this.meshBuilder.color=this.caretColor_qpd03i$_0,this.meshBuilder.line_s2l86p$(c.v,p,c.v,this.textBaseline+(null!=(g=null!=(v=null!=(y=null!=($=this.font)?$.charMap:null)?y.fontProps:null)?v.sizePts:null)?g:0),em(this.label,1.5)),b.transform.pop(),D_.prototype.renderText_aemszp$.call(this,t)},vm.$metadata$={kind:$,simpleName:"TextFieldUi",interfaces:[D_]},Object.defineProperty(gm.prototype,"text",{configurable:!0,get:function(){return this.text_x0rs8x$_0},set:function(t){this.caretPosition>t.length&&(this.caretPosition=t.length),this.selectionStart>t.length&&(this.selectionStart=t.length),this.text_x0rs8x$_0=t}}),Object.defineProperty(gm.prototype,"caretPosition",{configurable:!0,get:function(){return this.caretPosition_lco9r8$_0},set:function(t){var e,i=this.text.length;e=t<0?0:t>i?i:t,this.caretPosition_lco9r8$_0=e}}),Object.defineProperty(gm.prototype,"selectionStart",{configurable:!0,get:function(){return this.selectionStart_trwhxy$_0},set:function(t){var e,i=this.text.length;e=t<0?0:t>i?i:t,this.selectionStart_trwhxy$_0=e}}),gm.prototype.charTyped_s8itvh$=function(t){this.replaceSelection_61zpoe$(String.fromCharCode(t))},gm.prototype.moveCaret_fzusl$=function(t,e){switch(t){case 1:this.caretPosition=this.caretPosition-1|0;break;case 2:this.caretPosition=this.caretPosition+1|0;break;case 5:this.caretPosition=0;break;case 6:this.caretPosition=this.text.length;break;case 3:this.moveWordLeft_0();break;case 4:this.moveWordRight_0()}e||(this.selectionStart=this.caretPosition)},gm.prototype.moveWordLeft_0=function(){if(this.caretPosition>0){var t=this.text,e=this.caretPosition,i=Xt(t.substring(0,e),32);this.caretPosition=i<0?0:i}},gm.prototype.moveWordRight_0=function(){if(this.caretPosition<this.text.length){var t=d(this.text,32,this.caretPosition);this.caretPosition=t<0?this.text.length:t+1|0}},gm.prototype.backspace=function(){if(this.selectionStart!==this.caretPosition)this.replaceSelection_61zpoe$("");else if(this.caretPosition>0){this.selectionStart=(this.caretPosition=this.caretPosition-1|0,this.caretPosition);var t=this.text,e=this.caretPosition,i=t.substring(0,e),n=this.text,r=this.caretPosition+1|0;this.text=i+n.substring(r)}},gm.prototype.deleteSelection=function(){if(this.selectionStart!==this.caretPosition)this.replaceSelection_61zpoe$("");else if(this.caretPosition<this.text.length){var t=this.text,e=this.caretPosition,i=t.substring(0,e),n=this.text,r=this.caretPosition+1|0;this.text=i+n.substring(r)}},gm.prototype.replaceSelection_61zpoe$=function(t){var e=this.selectionStart,i=this.caretPosition,n=A.min(e,i),r=this.selectionStart,o=this.caretPosition,s=A.max(r,o);this.text=this.text.substring(0,n)+t+this.text.substring(s);var a=this.selectionStart,l=this.caretPosition;this.caretPosition=A.min(a,l)+t.length|0,this.selectionStart=this.caretPosition},gm.prototype.get_za3lpa$=function(t){return E(this.text.charCodeAt(t))},gm.prototype.toString=function(){return this.text},bm.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var xm=null;function wm(){return null===xm&&new bm,xm}function zm(t,e,i){void 0===i&&(i=!1),T_.call(this,t,e),this.onStateChange=M(),this.knobColorOn=Oy().WHITE,this.knobColorOff=Oy().LIGHT_GRAY,this.trackColorOff=Oy().GRAY,this.trackColorOn=Oy().LIGHT_GRAY,this.isEnabled_gffhto$_0=i,this.textAlignment=new lm(cm(),hm())}function km(t,e){var i;P_.call(this,t,e),this.tb=t,this.knobAnimator=new M$(new A$(0,1)),this.knobColor=jy(),this.trackColor=jy(),this.stateChangedListener=(i=this,function(t){return t.isEnabled?i.knobAnimator.speed=1:i.knobAnimator.speed=-1,s})}function Sm(t,e){lf.call(this,t),this.root=e,this.componentBounds=new gy,this.drawBounds=new gy,this.layoutSpec=new q_,this.padding_iyk9nn$_0=new am(Y_(16),Y_(16),Y_(16),Y_(16)),this.ui=new Jm(new M_),this.alpha_e9jtsg$_0=1,this.isThemeUpdate_yv706e$_0=!0,this.isUiUpdate_l4k16n$_0=!0,this.onHoverEnter.add_11rb$(Cm),this.onHoverExit.add_11rb$(Nm),this.onHover.add_11rb$(Em)}function Cm(t,i,n,r){var o,a,l=e.isType(o=t.parent,Sm)?o:null;if(null!=l){a=l.onHoverEnter;for(var u=0;u!==a.size;++u)l.onHoverEnter.get_za3lpa$(u)(l,i,n,r)}return s}function Nm(t,i,n,r){var o,a,l=e.isType(o=t.parent,Sm)?o:null;if(null!=l){a=l.onHoverExit;for(var u=0;u!==a.size;++u)l.onHoverExit.get_za3lpa$(u)(l,i,n,r)}return s}function Em(t,i,n,r){var o,a,l=e.isType(o=t.parent,Sm)?o:null;if(null!=l){a=l.onHover;for(var u=0;u!==a.size;++u)l.onHover.get_za3lpa$(u)(l,i,n,r)}return s}function Tm(t,e){Sm.call(this,t,e),this.posInParent=Mr(),this.contentScale=1,this.customTransform=Pm,this.scrollOffsetMut=Mr(),this.isScrollDirty=!0,this.childComponents_65igag$_0=M(),this.scrollHandler_xer21f$_0=null,this.tmpChildBounds_j2uogg$_0=new gy,this.tmpVec1_md9h9y$_0=Mr(),this.tmpVec2_md9hat$_0=Mr()}function Pm(t){return s}function Om(t,e,i,n,r,o){void 0===r&&(r=300);var s=new jm(t,r);return s.contentHeight=n,s.globalWidth=e,s.globalHeight=i,o(s),s}function Mm(t,e,i,n){void 0===t&&(t=96),void 0===e&&(e=null),void 0===i&&(i=!0);var r,o,a=new r_(null!=e?e:"uiScene"),l=new Qd;return l.isClipToViewport=!0,l.near=-1e3,l.far=1e3,a.camera=l,i&&(a.mainRenderPass.clearColor=null),a.unaryPlus_uv0sim$(Om(a,1,1,null,t,(r=n,o=a,function(t){return t.isFillViewport=!0,r(t,o),s}))),a}function jm(t,e,i){void 0===i&&(i="UiRoot"),Of.call(this,i),this.scene=t,this.uiDpi=e,this.globalWidth_rlfw80$_0=1,this.globalHeight_5sxs8p$_0=1,this.globalDepth_ijlk77$_0=1,this.isFillViewport_fr53nm$_0=!1,this.theme_208sxy$_0=Hm().DARK,this.content=new Tm(i+"-content",this),this.contentHeight_17xsyl$_0=null,this.isLayoutNeeded_0=!0,this.content.parent=this,this.content.layoutSpec.setSize_4ujscr$(Z_(100),Z_(100),Z_(100))}function Am(t){Lm(),void 0===t&&(t=new jh(Oy().WHITE)),zc.call(this,Lm().uiShaderModel_0()),this.uAlpha_0=null,this.uFontSampler_0=null,this.alpha_dkua5e$_0=1,this.font_1rx0e3$_0=t}function Im(){Rm=this,this.UI_MESH_ATTRIBS=At([ds().POSITIONS,ds().TEXTURE_COORDS,ds().COLORS]),this.U_ALPHA_0="uAlpha",this.U_FONT_TEX_0="uFontTex"}gm.$metadata$={kind:$,simpleName:"EditableText",interfaces:[]},Object.defineProperty(zm.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_gffhto$_0},set:function(t){t!==this.isEnabled_gffhto$_0&&(this.isEnabled_gffhto$_0=t,this.fireStateChanged())}}),zm.prototype.fireStateChanged=function(){var t;t=this.onStateChange;for(var e=0;e!==t.size;++e)this.onStateChange.get_za3lpa$(e)(this)},zm.prototype.fireOnClick_kjsf19$=function(t,e,i){this.isEnabled=!this.isEnabled,T_.prototype.fireOnClick_kjsf19$.call(this,t,e,i)},zm.prototype.setThemeProps_aemszp$=function(t){T_.prototype.setThemeProps_aemszp$.call(this,t),this.knobColorOn=this.root.theme.accentColor,this.trackColorOn=jy().add_m79ulu$(this.root.theme.accentColor,.4)},zm.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.newToggleButtonUi_r83hfv$(this)},zm.$metadata$={kind:$,simpleName:"ToggleButton",interfaces:[T_]},km.prototype.createUi_aemszp$=function(t){var e,i,n;P_.prototype.createUi_aemszp$.call(this,t),this.knobAnimator.speed=0,this.knobAnimator.duration=.15,i=this.knobAnimator.value,e=this.tb.isEnabled?1:0,i.value=e,this.knobAnimator.value.onUpdate=(n=this,function(t){return n.tb.requestUiUpdate(),s});var r=this.tb.onStateChange,o=this.stateChangedListener;r.add_11rb$(o)},km.prototype.dispose_aemszp$=function(t){P_.prototype.dispose_aemszp$.call(this,t);var e=this.tb.onStateChange,i=this.stateChangedListener;e.remove_11rb$(i)},km.prototype.updateUi_aemszp$=function(t){P_.prototype.updateUi_aemszp$.call(this,t);var e=this.tb.padding.right.toUnits_dleff0$(this.tb.width,this.tb.dpi),i=em(this.tb,24),n=em(this.tb,6),r=em(this.tb,10),o=this.tb.width-e-i-r,s=(this.tb.height-n)/2,a=this.knobAnimator.value.value;this.trackColor.clear(),this.trackColor.add_m79ulu$(this.tb.trackColorOff,1-a),this.trackColor.add_m79ulu$(this.tb.trackColorOn,a),this.meshBuilder.color=this.trackColor;var l=this.meshBuilder,u=new Ik;u.origin.set_y2kzbl$(o,s,em(this.tb,.1)),u.size.set_dleff0$(i,n),u.cornerRadius=n/2,u.cornerSteps=4,u.zeroTexCoords(),l.rect_e5k3t5$(u),this.knobColor.clear(),this.knobColor.add_m79ulu$(this.tb.knobColorOff,1-a),this.knobColor.add_m79ulu$(this.tb.knobColorOn,a),this.meshBuilder.color=this.knobColor;var p=this.meshBuilder,c=new Ek;c.zeroTexCoords(),c.center.set_y2kzbl$(o+i*a,s+n/2,em(this.tb,.2)),c.radius=r,c.steps=30,p.circle_59f34t$(c)},km.prototype.onRender_aemszp$=function(t){P_.prototype.onRender_aemszp$.call(this,t),this.knobAnimator.tick_aemszp$(t)},km.$metadata$={kind:$,simpleName:"ToggleButtonUi",interfaces:[P_]},Object.defineProperty(Sm.prototype,"posX",{configurable:!0,get:function(){return this.componentBounds.min.x}}),Object.defineProperty(Sm.prototype,"posY",{configurable:!0,get:function(){return this.componentBounds.min.y}}),Object.defineProperty(Sm.prototype,"posZ",{configurable:!0,get:function(){return this.componentBounds.min.z}}),Object.defineProperty(Sm.prototype,"width",{configurable:!0,get:function(){return this.componentBounds.size.x}}),Object.defineProperty(Sm.prototype,"height",{configurable:!0,get:function(){return this.componentBounds.size.y}}),Object.defineProperty(Sm.prototype,"depth",{configurable:!0,get:function(){return this.componentBounds.size.z}}),Object.defineProperty(Sm.prototype,"padding",{configurable:!0,get:function(){return this.padding_iyk9nn$_0},set:function(t){var e;null!=(e=this.padding_iyk9nn$_0)&&e.equals(t)||(this.padding_iyk9nn$_0=t,this.isUiUpdate_l4k16n$_0=!0)}}),Object.defineProperty(Sm.prototype,"alpha",{configurable:!0,get:function(){return this.alpha_e9jtsg$_0},set:function(t){this.alpha_e9jtsg$_0!==t&&(this.alpha_e9jtsg$_0=t,this.updateComponentAlpha())}}),Object.defineProperty(Sm.prototype,"dpi",{configurable:!0,get:function(){return this.root.uiDpi}}),Sm.prototype.addNode_xtids1$$default=function(t,i){this.addNode_xtids1$(t,i,lf.prototype.addNode_xtids1$$default.bind(this)),e.isType(t,Sm)&&(t.alpha=this.alpha)},Sm.prototype.setupBuilder_84rojv$=function(t){t.clear(),t.identity(),t.translate_czzhiu$(this.componentBounds.min)},Sm.prototype.requestThemeUpdate=function(){this.isThemeUpdate_yv706e$_0=!0},Sm.prototype.requestUiUpdate=function(){this.isUiUpdate_l4k16n$_0=!0},Sm.prototype.updateComponentAlpha=function(){this.ui.prop.updateComponentAlpha()},Sm.prototype.updateUi_aemszp$=function(t){this.ui.prop.updateUi_aemszp$(t)},Sm.prototype.updateTheme_aemszp$=function(t){this.ui.prop.dispose_aemszp$(t),this.ui.setTheme_11rb$(this.createThemeUi_aemszp$(t)).apply(),this.setThemeProps_aemszp$(t),this.ui.prop.createUi_aemszp$(t),this.ui.prop.updateComponentAlpha(),this.requestUiUpdate()},Sm.prototype.updateComponent_aemszp$=function(t){var i,n;if(this.isThemeUpdate_yv706e$_0&&(this.isThemeUpdate_yv706e$_0=!1,this.updateTheme_aemszp$(t)),this.isUiUpdate_l4k16n$_0)for(this.isUiUpdate_l4k16n$_0=!1,this.updateUi_aemszp$(t),this.isFrustumChecked=this.root.isFrustumChecked,n=this.children.iterator();n.hasNext();)n.next().isFrustumChecked=this.root.isFrustumChecked;this.setDrawBoundsFromWrappedComponentBounds_hf6scw$(e.isType(i=this.parent,Tm)?i:null,t)},Sm.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){if(null!=t){var i=this.componentBounds.min.x,n=t.drawBounds.min.x,r=A.max(i,n),o=this.componentBounds.min.y,s=t.drawBounds.min.y,a=A.max(o,s),l=this.componentBounds.min.z,u=t.drawBounds.min.z,p=A.max(l,u),c=this.componentBounds.max.x,h=t.drawBounds.max.x,d=A.min(c,h),f=this.componentBounds.max.y,_=t.drawBounds.max.y,m=A.min(f,_),$=this.componentBounds.max.z,y=t.drawBounds.max.z,v=A.min($,y);r>=d||a>=m||p>=v?this.drawBounds.clear():this.drawBounds.set_w8lrqs$(r,a,p,d,m,v)}else this.drawBounds.set_ea4od8$(this.componentBounds);this.bounds.set_ea4od8$(this.drawBounds)},Sm.prototype.setLocalBounds=function(){this.bounds.set_ea4od8$(this.drawBounds)},Sm.prototype.setThemeProps_aemszp$=function(t){},Sm.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.componentUi(this)},Sm.prototype.collectDrawCommands_kma0q5$=function(t){this.isVisible&&this.alpha>0&&!this.bounds.isEmpty&&(this.ui.prop.onRender_aemszp$(t.ctx),lf.prototype.collectDrawCommands_kma0q5$.call(this,t))},Sm.prototype.doLayout_sq5703$=function(t,i){var n;this.componentBounds.isFuzzyEqual_ea4od8$(t)||(this.componentBounds.set_ea4od8$(t),this.requestUiUpdate()),this.setDrawBoundsFromWrappedComponentBounds_hf6scw$(e.isType(n=this.parent,Tm)?n:null,i)},Sm.prototype.rayTest_jljx4v$=function(t){if(0!==this.alpha){var i=t.hitNode;lf.prototype.rayTest_jljx4v$.call(this,t),i===t.hitNode||e.isType(t.hitNode,Sm)||t.setHit_ulhqnp$(this,t.hitPosition)}},Sm.prototype.computeLocalPickRay_wswg9$=function(t,e,i){var n=this.root.scene.computeRay_wswg9$(t,e,i);return n&&(this.toLocalCoords_w1lst9$(i.origin),this.toLocalCoords_w1lst9$(i.direction,0).norm()),n},Sm.$metadata$={kind:$,simpleName:"UiComponent",interfaces:[lf]},Object.defineProperty(Tm.prototype,"contentBounds",{configurable:!0,get:function(){return this.childrenBounds}}),Object.defineProperty(Tm.prototype,"scrollOffset",{configurable:!0,get:function(){return this.scrollOffsetMut}}),Tm.prototype.updateTheme_aemszp$=function(t){var e;Sm.prototype.updateTheme_aemszp$.call(this,t),e=this.childComponents_65igag$_0;for(var i=0;i!==e.size;++i)this.childComponents_65igag$_0.get_za3lpa$(i).requestThemeUpdate()},Tm.prototype.updateComponentAlpha=function(){var t;Sm.prototype.updateComponentAlpha.call(this),t=this.childComponents_65igag$_0;for(var e=0;e!==t.size;++e)this.childComponents_65igag$_0.get_za3lpa$(e).alpha=this.alpha},Tm.prototype.updateComponent_aemszp$=function(t){var e,i;this.isScrollDirty&&(this.isScrollDirty=!1,null!=(e=this.scrollHandler_xer21f$_0)&&e.requestUiUpdate(),this.updateTransform()),Sm.prototype.updateComponent_aemszp$.call(this,t),i=this.childComponents_65igag$_0;for(var n=0;n!==i.size;++n)this.childComponents_65igag$_0.get_za3lpa$(n).updateComponent_aemszp$(t)},Tm.prototype.doLayout_sq5703$=function(t,e){var i;this.applyBounds_sq5703$(t,e),this.contentBounds.clear(),i=this.childComponents_65igag$_0;for(var n=0;n!==i.size;++n){var r=this.childComponents_65igag$_0.get_za3lpa$(n);this.computeChildLayoutBounds_q1axsv$(this.tmpChildBounds_j2uogg$_0,r,e),this.contentBounds.add_ea4od8$(this.tmpChildBounds_j2uogg$_0),r.doLayout_sq5703$(this.tmpChildBounds_j2uogg$_0,e)}},Tm.prototype.createThemeUi_aemszp$=function(t){return this.root.theme.containerUi(this)},Tm.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$=function(t,e){Sm.prototype.setDrawBoundsFromWrappedComponentBounds_hf6scw$.call(this,t,e),this.drawBounds.isEmpty?this.bounds.clear():(this.drawBounds.move_czzhiu$(this.scrollOffset),this.syncNodeBounds_aemszp$(e))},Tm.prototype.setLocalBounds=function(){var t;this.childrenBounds.clear(),t=this.childComponents_65igag$_0;for(var e=0;e!==t.size;++e)this.childrenBounds.add_ea4od8$(this.childComponents_65igag$_0.get_za3lpa$(e).componentBounds);this.bounds.set_ea4od8$(this.childrenBounds)},Tm.prototype.applyBounds_sq5703$=function(t,e){t.size.isFuzzyEqual_2qa7tb$(this.componentBounds.size)&&t.min.isFuzzyEqual_2qa7tb$(this.posInParent)||(this.posInParent.set_czzhiu$(t.min),this.updateTransform(),this.componentBounds.set_4lfkt4$(Er().ZERO,t.size),this.drawBounds.set_ea4od8$(this.componentBounds),this.syncNodeBounds_aemszp$(e),this.requestUiUpdate())},Tm.prototype.syncNodeBounds_aemszp$=function(t){var e,i,n,r,o,s;this.tmpVec1_md9h9y$_0.set_czzhiu$(this.drawBounds.min),this.tmpVec2_md9hat$_0.set_czzhiu$(this.drawBounds.max),this.transform.transform_w1lst9$(this.tmpVec1_md9h9y$_0),this.transform.transform_w1lst9$(this.tmpVec2_md9hat$_0),this.tmpVec1_md9h9y$_0.x<this.tmpVec2_md9hat$_0.x?(e=this.tmpVec1_md9h9y$_0.x,i=this.tmpVec2_md9hat$_0.x):(e=this.tmpVec2_md9hat$_0.x,i=this.tmpVec2_md9hat$_0.x),this.tmpVec1_md9h9y$_0.y<this.tmpVec2_md9hat$_0.y?(n=this.tmpVec1_md9h9y$_0.y,r=this.tmpVec2_md9hat$_0.y):(n=this.tmpVec2_md9hat$_0.y,r=this.tmpVec1_md9h9y$_0.y),this.tmpVec1_md9h9y$_0.z<this.tmpVec2_md9hat$_0.z?(o=this.tmpVec1_md9h9y$_0.z,s=this.tmpVec2_md9hat$_0.z):(o=this.tmpVec2_md9hat$_0.z,s=this.tmpVec1_md9h9y$_0.z),this.bounds.set_w8lrqs$(e,n,o,i,r,s)},Tm.prototype.updateTransform=function(){this.customTransform(this.setIdentity().scale_y2kzbl$(this.contentScale,this.contentScale,this.contentScale).translate_czzhiu$(this.posInParent).translate_y2kzbl$(-this.scrollOffsetMut.x,-this.scrollOffsetMut.y,-this.scrollOffsetMut.z))},Tm.prototype.computeChildLayoutBounds_q1axsv$=function(t,e,i){var n=e.layoutSpec.x.toUnits_dleff0$(this.componentBounds.size.x,this.dpi),r=e.layoutSpec.y.toUnits_dleff0$(this.componentBounds.size.y,this.dpi),o=e.layoutSpec.z.toUnits_dleff0$(this.componentBounds.size.z,this.dpi),s=e.layoutSpec.width.toUnits_dleff0$(this.componentBounds.size.x,this.dpi),a=e.layoutSpec.height.toUnits_dleff0$(this.componentBounds.size.y,this.dpi),l=e.layoutSpec.depth.toUnits_dleff0$(this.componentBounds.size.z,this.dpi);n<0&&(n+=this.width),r<0&&(r+=this.height),o<0&&(o+=this.depth),t.set_w8lrqs$(n,r,o,n+s,r+a,o+l)},Tm.prototype.setScrollOffset_czzhiu$=function(t){this.setScrollOffset_y2kzbl$(t.x,t.y,t.z)},Tm.prototype.setScrollOffset_y2kzbl$=function(t,e,i){t===this.scrollOffsetMut.x&&e===this.scrollOffsetMut.y&&i===this.scrollOffsetMut.z||(this.scrollOffsetMut.set_y2kzbl$(t,e,i),this.isScrollDirty=!0)},Tm.prototype.requestUpdateTransform=function(){this.isScrollDirty=!0},Tm.prototype.addNode_xtids1$$default=function(t,i){var n=!this.children.isEmpty()&&i<0&&e.isType(F(this.children),fm)?xt(this.children):i;this.addNode_xtids1$(t,n,Sm.prototype.addNode_xtids1$$default.bind(this)),e.isType(t,Sm)&&(this.childComponents_65igag$_0.add_11rb$(t),e.isType(t,fm)&&(this.scrollHandler_xer21f$_0=t))},Tm.prototype.removeNode_f1kmr1$=function(t){return e.isType(t,Sm)&&(this.childComponents_65igag$_0.remove_11rb$(t),Lt(t,this.scrollHandler_xer21f$_0)&&(this.scrollHandler_xer21f$_0=null)),Sm.prototype.removeNode_f1kmr1$.call(this,t)},Tm.prototype.removeAllChildren=function(){Sm.prototype.removeAllChildren.call(this),this.childComponents_65igag$_0.clear(),this.scrollHandler_xer21f$_0=null},Tm.$metadata$={kind:$,simpleName:"UiContainer",interfaces:[Sm]},Object.defineProperty(jm.prototype,"globalWidth",{configurable:!0,get:function(){return this.globalWidth_rlfw80$_0},set:function(t){t!==this.globalWidth_rlfw80$_0&&(this.globalWidth_rlfw80$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(jm.prototype,"globalHeight",{configurable:!0,get:function(){return this.globalHeight_5sxs8p$_0},set:function(t){t!==this.globalHeight_5sxs8p$_0&&(this.globalHeight_5sxs8p$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(jm.prototype,"globalDepth",{configurable:!0,get:function(){return this.globalDepth_ijlk77$_0},set:function(t){t!==this.globalDepth_ijlk77$_0&&(this.globalDepth_ijlk77$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(jm.prototype,"isFillViewport",{configurable:!0,get:function(){return this.isFillViewport_fr53nm$_0},set:function(t){t!==this.isFillViewport_fr53nm$_0&&(this.isFillViewport_fr53nm$_0=t,this.isLayoutNeeded_0=!0)}}),Object.defineProperty(jm.prototype,"theme",{configurable:!0,get:function(){return this.theme_208sxy$_0},set:function(t){Lt(t,this.theme_208sxy$_0)||(this.theme_208sxy$_0=t,this.content.requestThemeUpdate())}}),Object.defineProperty(jm.prototype,"contentHeight",{configurable:!0,get:function(){return this.contentHeight_17xsyl$_0},set:function(t){this.contentHeight_17xsyl$_0=t,this.isLayoutNeeded_0=!0}}),Object.defineProperty(jm.prototype,"bounds",{configurable:!0,get:function(){return this.content.bounds}}),jm.prototype.setGlobalSize_y2kzbl$=function(t,e,i){this.isFillViewport=!1,this.globalWidth=t,this.globalHeight=e,this.globalDepth=i},jm.prototype.requestLayout=function(){this.isLayoutNeeded_0=!0},jm.prototype.update_kma0q5$=function(t){var e=this.scene.mainRenderPass.viewport;if(!this.isFillViewport||this.globalWidth===e.width&&this.globalHeight===e.height||(this.globalWidth=e.width,this.globalHeight=e.height),this.isLayoutNeeded_0){this.isLayoutNeeded_0=!1;var i=1,n=this.contentHeight;null!=n&&(i=1/(n.toUnits_dleff0$(this.globalHeight,this.uiDpi)/this.globalHeight));var r=(new gy).set_w8lrqs$(0,0,0,this.globalWidth/i,this.globalHeight/i,this.globalDepth/i);this.content.contentScale=i,this.content.doLayout_sq5703$(r,t.ctx)}this.content.update_kma0q5$(t),Of.prototype.update_kma0q5$.call(this,t),this.content.updateComponent_aemszp$(t.ctx)},jm.prototype.collectDrawCommands_kma0q5$=function(t){Of.prototype.collectDrawCommands_kma0q5$.call(this,t),this.content.collectDrawCommands_kma0q5$(t)},jm.prototype.dispose_aemszp$=function(t){Of.prototype.dispose_aemszp$.call(this,t),this.content.dispose_aemszp$(t)},jm.prototype.rayTest_jljx4v$=function(t){Of.prototype.rayTest_jljx4v$.call(this,t),this.content.rayTest_jljx4v$(t)},jm.prototype.unaryPlus_uv0sim$=function(t){this.content.addNode_xtids1$(t)},jm.prototype.unaryPlus_63m4fk$=function(t){this.content.addNode_xtids1$(t),this.content.addNode_xtids1$(t.menuButton_8be2vx$)},jm.prototype.component_qphi6d$=function(t,e){var i=new Sm(t,this);return e(i),i},jm.prototype.container_t34sov$=function(t,e){var i=new Tm(t,this);return e(i),i},jm.prototype.drawerMenu_enmky4$=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=Y_(250,!0));var r=new I_(i,e,t,this);return n(r),r},jm.prototype.button_9zrh0o$=function(t,e){var i=new T_(t,this);return e(i),i},jm.prototype.label_tokfmu$=function(t,e){var i=new L_(t,this);return e(i),i},jm.prototype.slider_87iqh3$=function(t,e){return this.slider_91a1dk$(t,0,100,50,e)},jm.prototype.slider_91a1dk$=function(t,e,i,n,r){var o=new mm(t,e,i,n,this);return r(o),o},jm.prototype.textField_peizi7$=function(t,e){var i=new ym(t,this);return e(i),i},jm.prototype.toggleButton_6j87po$=function(t,e){var i=new zm(t,this);return e(i),i},jm.$metadata$={kind:$,simpleName:"UiRoot",interfaces:[Of]},Object.defineProperty(Am.prototype,"alpha",{configurable:!0,get:function(){return this.alpha_dkua5e$_0},set:function(t){var e,i;this.alpha_dkua5e$_0=t,null!=(i=null!=(e=this.uAlpha_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Am.prototype,"font",{configurable:!0,get:function(){return this.font_1rx0e3$_0},set:function(t){var e;this.font_1rx0e3$_0=t,null!=(e=this.uFontSampler_0)&&(e.texture=t)}}),Am.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.blendMode=_l(),t.cullMethod=Ol(),t.depthTest=xl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Am.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p=this.model,h=Lm().U_ALPHA_0;t:do{var d;for(l=sc.ALL,d=p.stages.values.iterator();d.hasNext();){var f=d.next();if(0!=(f.stage.mask&l.mask)){var _,m,$=f.nodes;e:do{var y;for(y=$.iterator();y.hasNext();){var v=y.next();if(Lt(v.name,h)&&e.isType(v,Rp)){m=v;break e}}m=null}while(0);var g=null==(_=m)||e.isType(_,Rp)?_:c();if(null!=g){u=g;break t}}}u=null}while(0);this.uAlpha_0=u,null!=(o=null!=(r=this.uAlpha_0)?r.uniform:null)&&(o.value=this.alpha);var b,x,w=this.model,z=Lm().U_FONT_TEX_0;t:do{var k;for(b=sc.ALL,k=w.stages.values.iterator();k.hasNext();){var S=k.next();if(0!=(S.stage.mask&b.mask)){var C,N,E=S.nodes;e:do{var T;for(T=E.iterator();T.hasNext();){var P=T.next();if(Lt(P.name,z)&&e.isType(P,Ep)){N=P;break e}}N=null}while(0);var O=null==(C=N)||e.isType(C,Ep)?C:c();if(null!=O){x=O;break t}}}x=null}while(0);this.uFontSampler_0=null!=(s=x)?s.sampler:null,null!=(a=this.uFontSampler_0)&&(a.texture=this.font),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Im.prototype.uiShaderModel_0=function(){var t=new tp("UI Shader"),e={v:null},i={v:null},n=new ip(t);e.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),i.v=n.stageInterfaceNode_iikjwn$("ifColors",n.attrColors().output),n.positionOutput=n.simpleVertexPositionNode().outVec4;var r=new np(t),o=r.pushConstantNode1f_61zpoe$(this.U_ALPHA_0),s=r.texture2dSamplerNode_fzevit$(r.texture2dNode_61zpoe$(this.U_FONT_TEX_0),e.v.output),a=r.multiplyNode_ze33is$(s.outColor,o.output),l=r.colorAlphaNode_ze33is$(i.v.output,a.output);return r.colorOutput_a3v4si$(r.unlitMaterialNode_r20yfm$(l.outAlphaColor).outColor),t},Im.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Rm=null;function Lm(){return null===Rm&&new Im,Rm}function Dm(){Hm(),this.backgroundColor_yt8dmb$_0=Oy().BLACK,this.foregroundColor_sxfy5a$_0=Oy().WHITE,this.accentColor_2rzgrt$_0=Oy().LIME,this.standardFontProps_v4eg6a$_0=new rg(lg().SYSTEM_FONT,20),this.titleFontProps_idgbxl$_0=new rg(lg().SYSTEM_FONT,28),this.componentUi_rare29$_0=Kt("BlurredComponentUi",(function(t){return new A_(t)})),this.containerUi_233tf$_0=Wm,this.buttonUi_667cek$_0=Kt("ButtonUi",(function(t,e){return new P_(t,e)})),this.labelUi_9aobqe$_0=Kt("LabelUi",(function(t,e){return new D_(t,e)})),this.scrollHandlerUi_k8xkq9$_0=Kt("ScrollHandlerUi",(function(t){return new _m(t)})),this.sliderUi_76d1mr$_0=Kt("SliderUi",(function(t,e){return new $m(t,e)})),this.textFieldUi_fr4mch$_0=Kt("TextFieldUi",(function(t,e){return new vm(t,e)})),this.toggleButtonUi_2tk5m0$_0=Kt("ToggleButtonUi",(function(t,e){return new km(t,e)}))}function qm(){Gm=this,this.DARK=Ym(void 0,Fm),this.DARK_SIMPLE=Ym(this.DARK,Bm),this.LIGHT=Ym(void 0,Um),this.LIGHT_SIMPLE=Ym(this.LIGHT,Vm)}function Fm(t){return t.backgroundColor_d7aj7k$(Oy().fromHex_61zpoe$("00141980")),t.foregroundColor_d7aj7k$(Oy().WHITE),t.accentColor_d7aj7k$(Oy().LIME),s}function Bm(t){return t.componentUi_mloaa0$(Kt("SimpleComponentUi",(function(t){return new j_(t)}))),s}function Um(t){return t.backgroundColor_d7aj7k$(Oy().WHITE.withAlpha_mx4ult$(.6)),t.foregroundColor_d7aj7k$(Oy().MD_BLUE_GREY_900),t.accentColor_d7aj7k$(Oy().MD_PINK),s}function Vm(t){return t.componentUi_mloaa0$(Kt("SimpleComponentUi",(function(t){return new j_(t)}))),s}Am.$metadata$={kind:$,simpleName:"UiShader",interfaces:[zc]},Object.defineProperty(Dm.prototype,"backgroundColor",{configurable:!0,get:function(){return this.backgroundColor_yt8dmb$_0},set:function(t){this.backgroundColor_yt8dmb$_0=t}}),Object.defineProperty(Dm.prototype,"foregroundColor",{configurable:!0,get:function(){return this.foregroundColor_sxfy5a$_0},set:function(t){this.foregroundColor_sxfy5a$_0=t}}),Object.defineProperty(Dm.prototype,"accentColor",{configurable:!0,get:function(){return this.accentColor_2rzgrt$_0},set:function(t){this.accentColor_2rzgrt$_0=t}}),Dm.prototype.standardFont_oei9ky$=function(t,e){return ng(this.standardFontProps.family,this.standardFontProps.sizePts,t,e,this.standardFontProps.style,this.standardFontProps.chars)},Object.defineProperty(Dm.prototype,"standardFontProps",{configurable:!0,get:function(){return this.standardFontProps_v4eg6a$_0},set:function(t){this.standardFontProps_v4eg6a$_0=t}}),Dm.prototype.titleFont_oei9ky$=function(t,e){return ng(this.titleFontProps.family,this.titleFontProps.sizePts,t,e,this.titleFontProps.style,this.titleFontProps.chars)},Object.defineProperty(Dm.prototype,"titleFontProps",{configurable:!0,get:function(){return this.titleFontProps_idgbxl$_0},set:function(t){this.titleFontProps_idgbxl$_0=t}}),Dm.prototype.newComponentUi_gzmg0q$=function(t){return this.componentUi(t)},Object.defineProperty(Dm.prototype,"componentUi",{configurable:!0,get:function(){return this.componentUi_rare29$_0},set:function(t){this.componentUi_rare29$_0=t}}),Dm.prototype.newContainerUi_xcf31a$=function(t){return this.containerUi(t)},Object.defineProperty(Dm.prototype,"containerUi",{configurable:!0,get:function(){return this.containerUi_233tf$_0},set:function(t){this.containerUi_233tf$_0=t}}),Dm.prototype.newButtonUi_t4rm0v$=function(t){return this.buttonUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(Dm.prototype,"buttonUi",{configurable:!0,get:function(){return this.buttonUi_667cek$_0},set:function(t){this.buttonUi_667cek$_0=t}}),Dm.prototype.newLabelUi_wviu0r$=function(t){return this.labelUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(Dm.prototype,"labelUi",{configurable:!0,get:function(){return this.labelUi_9aobqe$_0},set:function(t){this.labelUi_9aobqe$_0=t}}),Dm.prototype.newScrollHandlerUi_dz938y$=function(t){return this.scrollHandlerUi(t)},Object.defineProperty(Dm.prototype,"scrollHandlerUi",{configurable:!0,get:function(){return this.scrollHandlerUi_k8xkq9$_0},set:function(t){this.scrollHandlerUi_k8xkq9$_0=t}}),Dm.prototype.newSliderUi_l85jm8$=function(t){return this.sliderUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(Dm.prototype,"sliderUi",{configurable:!0,get:function(){return this.sliderUi_76d1mr$_0},set:function(t){this.sliderUi_76d1mr$_0=t}}),Dm.prototype.newTextFieldUi_p39bdq$=function(t){return this.textFieldUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(Dm.prototype,"textFieldUi",{configurable:!0,get:function(){return this.textFieldUi_fr4mch$_0},set:function(t){this.textFieldUi_fr4mch$_0=t}}),Dm.prototype.newToggleButtonUi_r83hfv$=function(t){return this.toggleButtonUi(t,this.newComponentUi_gzmg0q$(t))},Object.defineProperty(Dm.prototype,"toggleButtonUi",{configurable:!0,get:function(){return this.toggleButtonUi_2tk5m0$_0},set:function(t){this.toggleButtonUi_2tk5m0$_0=t}}),qm.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Gm=null;function Hm(){return null===Gm&&new qm,Gm}function Wm(t){return new M_}function Xm(t,e){return t.root.theme.standardFont_oei9ky$(t.dpi,e)}function Km(t,e){return t.root.theme.titleFont_oei9ky$(t.dpi,e)}function Ym(t,e){void 0===t&&(t=null);var i=new Zm(t);return e(i),i}function Zm(t){Dm.call(this),null!=t&&(this.backgroundColor=t.backgroundColor,this.foregroundColor=t.foregroundColor,this.accentColor=t.accentColor,this.standardFontProps=t.standardFontProps,this.titleFontProps=t.titleFontProps,this.componentUi=t.componentUi,this.containerUi=t.containerUi,this.buttonUi=t.buttonUi,this.labelUi=t.labelUi,this.scrollHandlerUi=t.scrollHandlerUi,this.sliderUi=t.sliderUi,this.textFieldUi=t.textFieldUi,this.toggleButtonUi=t.toggleButtonUi)}function Jm(t){this.prop_5ushja$_0=t,this.themeVal_jacv1h$_0=t,this.isThemeSet_n9zltm$_0=!1,this.customVal_5f7u1l$_0=t,this.isCustom_s2c3c2$_0=!1}function Qm(t){this.name=t,this.channels=M(),this.weight=1,this.speed=1,this.duration_dwtdbj$_0=1,this.animationNodes_0=M()}function t$(t,e){this.name=t,this.animationNode=e,this.keys=new hC,this.duration=0}function e$(t,e){t$.call(this,t,e)}function i$(t,e){t$.call(this,t,e)}function n$(t,e){t$.call(this,t,e)}function r$(t,e){t$.call(this,t,e)}function o$(){}function s$(t){this.target=t,this.initTranslation_0=Br(),this.initRotation_0=po(),this.initScale_0=new Fr(1,1,1),this.animTranslation_0=Br(),this.animRotation_0=po(),this.animScale_0=Br(),this.quatRotMat_0=new bn,this.weightedTransformMat_0=new bn;var e=po();this.target.transform.getCol_8irwu3$(3,e),this.initTranslation_0.set_yvo9jy$(e.x,e.y,e.z),this.target.transform.getRotation_5s4mpx$(this.initRotation_0);var i=this.target.transform.getCol_8irwu3$(0,e).length(),n=this.target.transform.getCol_8irwu3$(0,e).length(),r=this.target.transform.getCol_8irwu3$(0,e).length();this.initScale_0.set_yvo9jy$(i,n,r)}function a$(t){this.target=t,this.weights_0=new Float32Array(1)}function l$(t){this.time=t,this.interpolation=d$()}function u$(t,e){T.call(this),this.name$=t,this.ordinal$=e}function p$(){p$=function(){},new c$,new f$,new $$}function c$(){h$=this,u$.call(this,"LINEAR",0)}Dm.$metadata$={kind:$,simpleName:"UiTheme",interfaces:[]},Zm.prototype.backgroundColor_d7aj7k$=function(t){this.backgroundColor=t},Zm.prototype.foregroundColor_d7aj7k$=function(t){this.foregroundColor=t},Zm.prototype.accentColor_d7aj7k$=function(t){this.accentColor=t},Zm.prototype.standardFont_ttufcy$=function(t){this.standardFontProps=t},Zm.prototype.titleFont_ttufcy$=function(t){this.titleFontProps=t},Zm.prototype.componentUi_mloaa0$=function(t){this.componentUi=t},Zm.prototype.containerUi_2t3ptw$=function(t){this.containerUi=t},Zm.prototype.buttonUi_layl6g$=function(t){this.buttonUi=t},Zm.prototype.labelUi_zicoma$=function(t){this.labelUi=t},Zm.prototype.scrollHandlerUi_4p1ygc$=function(t){this.scrollHandlerUi=t},Zm.prototype.sliderUi_artm94$=function(t){this.sliderUi=t},Zm.prototype.textFieldUi_5ax6ok$=function(t){this.textFieldUi=t},Zm.prototype.toggleButtonUi_50ge0o$=function(t){this.toggleButtonUi=t},Zm.$metadata$={kind:$,simpleName:"ThemeBuilder",interfaces:[Dm]},Object.defineProperty(Jm.prototype,"prop",{configurable:!0,get:function(){return this.prop_5ushja$_0},set:function(t){this.prop_5ushja$_0=t}}),Object.defineProperty(Jm.prototype,"themeVal",{configurable:!0,get:function(){return this.themeVal_jacv1h$_0},set:function(t){this.themeVal_jacv1h$_0=t}}),Object.defineProperty(Jm.prototype,"isThemeSet",{configurable:!0,get:function(){return this.isThemeSet_n9zltm$_0},set:function(t){this.isThemeSet_n9zltm$_0=t}}),Object.defineProperty(Jm.prototype,"customVal",{configurable:!0,get:function(){return this.customVal_5f7u1l$_0},set:function(t){this.customVal_5f7u1l$_0=t}}),Object.defineProperty(Jm.prototype,"isCustom",{configurable:!0,get:function(){return this.isCustom_s2c3c2$_0},set:function(t){this.isCustom_s2c3c2$_0=t}}),Object.defineProperty(Jm.prototype,"isUpdate",{configurable:!0,get:function(){return this.isCustom&&!Lt(this.prop,this.customVal)||!this.isCustom&&this.isThemeSet&&!Lt(this.prop,this.themeVal)}}),Jm.prototype.setTheme_11rb$=function(t){return this.themeVal=t,this.isThemeSet=!0,this},Jm.prototype.setCustom_11rb$=function(t){return this.customVal=t,this.isCustom=!0,this},Jm.prototype.clearCustom=function(){this.isCustom=!1},Jm.prototype.apply=function(){return this.isCustom?this.prop=this.customVal:this.isThemeSet&&(this.prop=this.themeVal),this.prop},Jm.$metadata$={kind:$,simpleName:"ThemeOrCustomProp",interfaces:[]},Object.defineProperty(Qm.prototype,"duration",{configurable:!0,get:function(){return this.duration_dwtdbj$_0},set:function(t){this.duration_dwtdbj$_0=t}}),Qm.prototype.prepareAnimation=function(){var t,e,i,n=this.channels,r=w(j(n,10));for(e=n.iterator();e.hasNext();){var o=e.next();r.add_11rb$(o.lastKeyTime)}for(this.duration=null!=(t=Yt(r))?t:0,i=this.channels.iterator();i.hasNext();)i.next().duration=this.duration;var s,a=this.animationNodes_0,l=this.channels,u=w(j(l,10));for(s=l.iterator();s.hasNext();){var p=s.next();u.add_11rb$(p.animationNode)}wt(a,Zt(u))},Qm.prototype.apply_8555vt$=function(t,e){var i,n,r,o;void 0===e&&(e=!0);var s=t*this.speed%this.duration;i=this.animationNodes_0;for(var a=0;a!==i.size;++a)this.animationNodes_0.get_za3lpa$(a).initTransform();n=this.channels;for(var l=0;l!==n.size;++l)this.channels.get_za3lpa$(l).apply_mx4ult$(s);if(1===this.weight){r=this.animationNodes_0;for(var u=0;u!==r.size;++u)this.animationNodes_0.get_za3lpa$(u).applyTransform()}else{o=this.animationNodes_0;for(var p=0;p!==o.size;++p)this.animationNodes_0.get_za3lpa$(p).applyTransformWeighted_8ca0d4$(this.weight,e)}},Qm.prototype.printChannels=function(){var t;for(jt(Ct(this.name)+" channels:"),t=this.channels.iterator();t.hasNext();){var e=t.next();jt("  "+Ct(e.name)+" [node: "+Ct(e.animationNode.name)+"]"),e.printKeys_61zpoe$("    ")}},Qm.$metadata$={kind:$,simpleName:"Animation",interfaces:[]},Object.defineProperty(t$.prototype,"lastKeyTime",{configurable:!0,get:function(){return this.keys.lastKey()}}),t$.prototype.apply_mx4ult$=function(t){var e=this.keys.floorValue_trkh7z$(t);if(null==e){var i,n=this.lastKeyTime,r=this.duration;i=EE.FUZZY_EQ_F;var o=n-r;e=A.abs(o)<=i?this.keys.lastValue():this.keys.firstValue()}e.apply_8kwor9$(t,this.keys.higherValue_trkh7z$(t),this.animationNode)},t$.prototype.printKeys_61zpoe$=function(t){var e;void 0===t&&(t="");var i=Jt(this.keys.values),n=i.size;e=A.min(5,n);for(var r=0;r<e;r++)jt(t+i.get_za3lpa$(r));i.size>5&&jt(t+"  ..."+(i.size-5|0)+" more")},t$.$metadata$={kind:$,simpleName:"AnimationChannel",interfaces:[]},e$.$metadata$={kind:$,simpleName:"TranslationAnimationChannel",interfaces:[t$]},i$.$metadata$={kind:$,simpleName:"RotationAnimationChannel",interfaces:[t$]},n$.$metadata$={kind:$,simpleName:"ScaleAnimationChannel",interfaces:[t$]},r$.$metadata$={kind:$,simpleName:"WeightAnimationChannel",interfaces:[t$]},o$.prototype.initTransform=function(){},o$.prototype.setTranslation_czzhiw$=function(t){},o$.prototype.setRotation_czzhi1$=function(t){},o$.prototype.setScale_czzhiw$=function(t){},o$.prototype.setWeights_q3cr5i$=function(t){},o$.$metadata$={kind:Y,simpleName:"AnimationNode",interfaces:[]},Object.defineProperty(s$.prototype,"name",{configurable:!0,get:function(){return this.target.name}}),s$.prototype.initTransform=function(){this.animTranslation_0.set_czzhiw$(this.initTranslation_0),this.animRotation_0.set_czzhi1$(this.initRotation_0),this.animScale_0.set_czzhiw$(this.initScale_0)},s$.prototype.applyTransform=function(){this.target.setIdentity(),this.target.translate_czzhiw$(this.animTranslation_0),this.target.mul_d4zu6l$(this.quatRotMat_0.setRotate_czzhi1$(this.animRotation_0)),this.target.scale_yvo9jy$(this.animScale_0.x,this.animScale_0.y,this.animScale_0.z)},s$.prototype.applyTransformWeighted_8ca0d4$=function(t,e){if(this.weightedTransformMat_0.setIdentity(),this.weightedTransformMat_0.translate_czzhiw$(this.animTranslation_0),this.weightedTransformMat_0.mul_d4zu6l$(this.quatRotMat_0.setRotate_czzhi1$(this.animRotation_0)),this.weightedTransformMat_0.scale_yvo9jy$(this.animScale_0.x,this.animScale_0.y,this.animScale_0.z),e)for(var i=0;i<=15;i++)this.target.transform.matrix[i]=this.weightedTransformMat_0.matrix[i]*t;else for(var n=0;n<=15;n++)this.target.transform.matrix[n]=this.target.transform.matrix[n]+this.weightedTransformMat_0.matrix[n]*t;this.target.setDirty()},s$.prototype.setTranslation_czzhiw$=function(t){this.animTranslation_0.set_czzhiw$(t)},s$.prototype.setRotation_czzhi1$=function(t){this.animRotation_0.set_czzhi1$(t)},s$.prototype.setScale_czzhiw$=function(t){this.animScale_0.set_czzhiw$(t)},s$.$metadata$={kind:$,simpleName:"AnimatedTransformGroup",interfaces:[o$]},Object.defineProperty(a$.prototype,"name",{configurable:!0,get:function(){return this.target.name}}),a$.prototype.applyTransform=function(){this.target.morphWeights=this.weights_0},a$.prototype.applyTransformWeighted_8ca0d4$=function(t,e){var i,n=this.target.morphWeights;null!=n&&n.length===this.weights_0.length||(n=new Float32Array(this.weights_0.length),this.target.morphWeights=n),i=this.weights_0;for(var r=0;r!==i.length;++r)n[r]=e?this.weights_0[r]*t:n[r]+this.weights_0[r]*t},a$.prototype.setWeights_q3cr5i$=function(t){this.weights_0.length!==t.length&&(this.weights_0=new Float32Array(t.length));for(var e=0;e!==t.length;++e)this.weights_0[e]=t[e]},a$.$metadata$={kind:$,simpleName:"MorphAnimatedMesh",interfaces:[o$]},l$.prototype.interpolationPos_dleff0$=function(t,e){var i;if(this.time!==e){var n=this.time<e?this.time:0;i=this.interpolation.getInterpolationPos_mx4ult$((t-n)/(e-n))}else i=0;return i},l$.prototype.toString=function(){return Gd(this.time,2)+" -> ["+this.interpolation+"]"},c$.prototype.getInterpolationPos_mx4ult$=function(t){return t},c$.$metadata$={kind:$,simpleName:"LINEAR",interfaces:[u$]};var h$=null;function d$(){return p$(),h$}function f$(){_$=this,u$.call(this,"STEP",1)}f$.prototype.getInterpolationPos_mx4ult$=function(t){return 0},f$.$metadata$={kind:$,simpleName:"STEP",interfaces:[u$]};var _$=null;function m$(){return p$(),_$}function $$(){y$=this,u$.call(this,"CUBICSPLINE",2)}$$.prototype.getInterpolationPos_mx4ult$=function(t){return t},$$.$metadata$={kind:$,simpleName:"CUBICSPLINE",interfaces:[u$]};var y$=null;function v$(){return p$(),y$}function g$(t,e){l$.call(this,t),this.rotation=e,this.tmpRotation_2somu9$_0=po(),this.qa_lcvm40$_0=po(),this.qb_lcvm4v$_0=po(),this.qc_lcvm5q$_0=po()}function b$(t,e,i,n){g$.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=po(),this.p1_0=po(),this.m0_0=po(),this.m1_0=po()}function x$(t,e){l$.call(this,t),this.translation=e,this.tmpTranslation_1fj65v$_0=Br()}function w$(t,e,i,n){x$.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=Br(),this.p1_0=Br(),this.m0_0=Br(),this.m1_0=Br()}function z$(t,e){l$.call(this,t),this.scale=e,this.tmpScale_fz7pzv$_0=Br()}function k$(t,e,i,n){z$.call(this,t,e),this.startTan=i,this.endTan=n,this.p0_0=Br(),this.p1_0=Br(),this.m0_0=Br(),this.m1_0=Br()}function S$(t,e){l$.call(this,t),this.weights=e,this.tmpW=new Float32Array(1)}function C$(t,e,i,n){S$.call(this,t,e),this.startTan=i,this.endTan=n}function N$(t){P$(),this.value=t,this.duration=1,this.speed=1,this.repeating=P$().ONCE,this.progress=0}function E$(){T$=this,this.ONCE=1,this.REPEAT=2,this.REPEAT_TOGGLE_DIR=3}u$.$metadata$={kind:$,simpleName:"Interpolation",interfaces:[T]},u$.values=function(){return[d$(),m$(),v$()]},u$.valueOf_61zpoe$=function(t){switch(t){case"LINEAR":return d$();case"STEP":return m$();case"CUBICSPLINE":return v$();default:P("No enum constant de.fabmax.kool.util.animation.AnimationKey.Interpolation."+t)}},l$.$metadata$={kind:$,simpleName:"AnimationKey",interfaces:[]},g$.prototype.apply_8kwor9$=function(t,e,i){null==e?this.tmpRotation_2somu9$_0.set_czzhi1$(this.rotation):this.slerp_6dcy83$_0(this.rotation,e.rotation,this.interpolationPos_dleff0$(t,e.time),this.tmpRotation_2somu9$_0),i.setRotation_czzhi1$(this.tmpRotation_2somu9$_0)},g$.prototype.toString=function(){return Gd(this.time,2)+" -> rotation: "+this.rotation+" ["+this.interpolation+"]"},g$.prototype.slerp_6dcy83$_0=function(t,e,i,n){t.norm_5s4mpx$(this.qa_lcvm40$_0),e.norm_5s4mpx$(this.qb_lcvm4v$_0);var r=i<0?0:i>1?1:i,o=this.qa_lcvm40$_0.dot_czzhi1$(this.qb_lcvm4v$_0),s=o<-1?-1:o>1?1:o;if(s<0&&(this.qa_lcvm40$_0.scale_14dthe$(-1),s=-s),s>.9999995)this.qb_lcvm4v$_0.subtract_2x9ggw$(this.qa_lcvm40$_0,n).scale_14dthe$(r).add_czzhi1$(this.qa_lcvm40$_0).norm();else{var a=s,l=A.acos(a)*r;this.qa_lcvm40$_0.scale_b0flav$(-s,this.qc_lcvm5q$_0).add_czzhi1$(this.qb_lcvm4v$_0).norm(),this.qa_lcvm40$_0.scale_14dthe$(A.cos(l)),this.qc_lcvm5q$_0.scale_14dthe$(A.sin(l)),n.set_czzhi1$(this.qa_lcvm40$_0).add_czzhi1$(this.qc_lcvm5q$_0)}return n},g$.$metadata$={kind:$,simpleName:"RotationKey",interfaces:[l$]},b$.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setRotation_czzhi1$(this.rotation);else{var n=this.interpolationPos_dleff0$(t,e.time),r=n*n,o=n*n*n,s=2*o-3*r+1,a=o-2*r+n,l=-2*o+3*r,u=o-r;this.p0_0.set_czzhi1$(this.rotation).scale_14dthe$(s),this.m0_0.set_czzhi1$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhi1$(e.rotation).scale_14dthe$(l),this.m1_0.set_czzhi1$(this.endTan).scale_14dthe$(u),i.setRotation_czzhi1$(this.p0_0.add_czzhi1$(this.m0_0).add_czzhi1$(this.p1_0).add_czzhi1$(this.m1_0).norm())}},b$.$metadata$={kind:$,simpleName:"CubicRotationKey",interfaces:[g$]},x$.prototype.apply_8kwor9$=function(t,e,i){null==e?i.setTranslation_czzhiw$(this.translation):(e.translation.subtract_vgki2o$(this.translation,this.tmpTranslation_1fj65v$_0).scale_14dthe$(this.interpolationPos_dleff0$(t,e.time)).add_czzhiw$(this.translation),i.setTranslation_czzhiw$(this.tmpTranslation_1fj65v$_0))},x$.prototype.toString=function(){return Gd(this.time,2)+" -> translation: "+this.translation+" ["+this.interpolation+"]"},x$.$metadata$={kind:$,simpleName:"TranslationKey",interfaces:[l$]},w$.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setTranslation_czzhiw$(this.translation);else{var n=this.interpolationPos_dleff0$(t,e.time),r=n*n,o=n*n*n,s=2*o-3*r+1,a=o-2*r+n,l=-2*o+3*r,u=o-r;this.p0_0.set_czzhiw$(this.translation).scale_14dthe$(s),this.m0_0.set_czzhiw$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhiw$(e.translation).scale_14dthe$(l),this.m1_0.set_czzhiw$(this.endTan).scale_14dthe$(u),i.setTranslation_czzhiw$(this.p0_0.add_czzhiw$(this.m0_0).add_czzhiw$(this.p1_0).add_czzhiw$(this.m1_0))}},w$.$metadata$={kind:$,simpleName:"CubicTranslationKey",interfaces:[x$]},z$.prototype.apply_8kwor9$=function(t,e,i){null==e?i.setScale_czzhiw$(this.scale):(e.scale.subtract_vgki2o$(this.scale,this.tmpScale_fz7pzv$_0).scale_14dthe$(this.interpolationPos_dleff0$(t,e.time)).add_czzhiw$(this.scale),i.setScale_czzhiw$(this.tmpScale_fz7pzv$_0))},z$.prototype.toString=function(){return Gd(this.time,2)+" -> scale: "+this.scale+" ["+this.interpolation+"]"},z$.$metadata$={kind:$,simpleName:"ScaleKey",interfaces:[l$]},k$.prototype.apply_8kwor9$=function(t,e,i){if(null==e)i.setScale_czzhiw$(this.scale);else{var n=this.interpolationPos_dleff0$(t,e.time),r=n*n,o=n*n*n,s=2*o-3*r+1,a=o-2*r+n,l=-2*o+3*r,u=o-r;this.p0_0.set_czzhiw$(this.scale).scale_14dthe$(s),this.m0_0.set_czzhiw$(this.startTan).scale_14dthe$(a),this.p1_0.set_czzhiw$(e.scale).scale_14dthe$(l),this.m1_0.set_czzhiw$(this.endTan).scale_14dthe$(u),i.setScale_czzhiw$(this.p0_0.add_czzhiw$(this.m0_0).add_czzhiw$(this.p1_0).add_czzhiw$(this.m1_0))}},k$.$metadata$={kind:$,simpleName:"CubicScaleKey",interfaces:[z$]},S$.prototype.apply_8kwor9$=function(t,e,i){var n,r;if(this.tmpW.length!==this.weights.length&&(this.tmpW=new Float32Array(this.weights.length)),null==e){n=this.weights;for(var o=0;o!==n.length;++o)this.tmpW[o]=this.weights[o]}else{r=this.weights;for(var s=0;s!==r.length;++s)this.tmpW[s]=(e.weights[s]-this.weights[s])*this.interpolationPos_dleff0$(t,e.time)+this.weights[s]}i.setWeights_q3cr5i$(this.tmpW)},S$.prototype.toString=function(){return Gd(this.time,2)+" -> weight: ("+Qt(this.weights,", ")+") ["+this.interpolation+"]"},S$.$metadata$={kind:$,simpleName:"WeightKey",interfaces:[l$]},C$.prototype.apply_8kwor9$=function(t,e,i){var n,r;if(this.tmpW.length!==this.weights.length&&(this.tmpW=new Float32Array(this.weights.length)),null==e){n=this.weights;for(var o=0;o!==n.length;++o)this.tmpW[o]=this.weights[o]}else{var s=this.interpolationPos_dleff0$(t,e.time),a=s*s,l=s*s*s,u=2*l-3*a+1,p=l-2*a+s,c=-2*l+3*a,h=l-a;r=this.weights;for(var d=0;d!==r.length;++d){var f=this.weights[d]*u,_=this.startTan[d]*p,m=e.weights[d]*c,$=this.endTan[d]*h;this.tmpW[d]=f+_+m+$}}i.setWeights_q3cr5i$(this.tmpW)},C$.$metadata$={kind:$,simpleName:"CubicWeightKey",interfaces:[S$]},E$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var T$=null;function P$(){return null===T$&&new E$,T$}function O$(t){N$.call(this,t)}function M$(t){N$.call(this,t)}function j$(t){this.value=t,this.onUpdate=null}function A$(t,e){j$.call(this,t),this.from=t,this.to=e}function I$(t){this.desired=t,this.actual=t,this.speed_t20eng$_0=0,this.damping_0=0,this.stiffness_h7kl9w$_0=0,this.stiffness=100}function R$(t){this.desired=t,this.actual=t,this.speed_e6bbiv$_0=0,this.damping_0=0,this.stiffness_bla035$_0=0,this.stiffness=100}function L$(){this.nodes=M()}function D$(t,e){this.joint=t,this.inverseBindMatrix=e,this.jointTransform=new En,this.tmpMat4f_0=new En,this.parent_0=null,this.children_0=M()}function q$(t,i,n,r){X$();var o,a=new lf,l=new pa;l.name="AmbientOcclusionPass",l.setSize_vux9f0$(n,r),l.clearDepthTexture(),l.addColorTexture_farcsl$(dh()),$a.call(this,a,new ua(l)),this.aoSetup=i,this.radius=1,this.strength=1.25,this.power=1.5,this.bias=.05,this.kernelSz_cjciej$_0=32,this.aoUniforms_0=null,this.aoNode_0=null,this.noiseTex_0=this.makeNoiseTexture_0(),this.clearColor=Oy().WHITE;var u=e.isType(o=this.drawNode,lf)?o:c(),p=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);p.generate_v2sixm$(K$);var h=new tp("AoPass"),d={v:null},f=new ip(h);d.v=f.stageInterfaceNode_iikjwn$("ifTexCoords",f.attrTexCoords().output),f.positionOutput=f.fullScreenQuadPositionNode_r20yfm$(f.attrTexCoords().output).outQuadPos;var _,m,$,y,v=new np(h),g=v.texture2dNode_61zpoe$("noiseTex"),b=v.addNode_u9w9by$(new B$(this,t,!0,v.stage));if(this.aoSetup.isDeferred)_=v.texture2dNode_61zpoe$("positionTex"),m="z",$=v.splitNode_500t7j$(v.texture2dSamplerNode_fzevit$(_,d.v.output).outColor,"xyz").output,y=v.splitNode_500t7j$(v.texture2dSamplerNode_fzevit$(v.texture2dNode_61zpoe$("normalTex"),d.v.output).outColor,"xyz").output;else{_=v.texture2dNode_61zpoe$("normalDepthTex"),m="a";var w=v.texture2dSamplerNode_fzevit$(_,d.v.output).outColor;y=v.splitNode_500t7j$(w,"xyz").output;var z=v.addNode_u9w9by$(new V$(b,v.stage));z.inDepth=v.splitNode_500t7j$(w,"a").output,z.inScreenPos=d.v.output,$=z.outPosition}var k=v.addNode_u9w9by$(new G$(this,b,g,_,m,v.stage));k.inScreenPos=d.v.output,k.inOrigin=$,k.inNormal=y,v.colorOutput_a3v4si$(k.outColor);var S,C,N=h,E=new zc(N);E.onPipelineCreated.add_11rb$((S=this,C=N,function(t,i,n){var r,o,a;if(S.aoSetup.isForward){var l,u,p=C;t:do{var h;for(l=sc.ALL,h=p.stages.values.iterator();h.hasNext();){var d=h.next();if(0!=(d.stage.mask&l.mask)){var f,_,m=d.nodes;e:do{var $;for($=m.iterator();$.hasNext();){var y=$.next();if(Lt(y.name,"normalDepthTex")&&e.isType(y,Ep)){_=y;break e}}_=null}while(0);var v=null==(f=_)||e.isType(f,Ep)?f:c();if(null!=v){u=v;break t}}}u=null}while(0);x(u).sampler.texture=null!=(r=S.aoSetup.linearDepthPass)?r.colorTexture:null}else{var g,b,w=C;t:do{var z;for(g=sc.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&g.mask)){var N,E,T=k.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(Lt(O.name,"positionTex")&&e.isType(O,Ep)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,Ep)?N:c();if(null!=M){b=M;break t}}}b=null}while(0);x(b).sampler.texture=null!=(o=S.aoSetup.mrtPass)?o.positionAo:null;var j,A,I=C;t:do{var R;for(j=sc.ALL,R=I.stages.values.iterator();R.hasNext();){var L=R.next();if(0!=(L.stage.mask&j.mask)){var D,q,F=L.nodes;e:do{var B;for(B=F.iterator();B.hasNext();){var U=B.next();if(Lt(U.name,"normalTex")&&e.isType(U,Ep)){q=U;break e}}q=null}while(0);var V=null==(D=q)||e.isType(D,Ep)?D:c();if(null!=V){A=V;break t}}}A=null}while(0);x(A).sampler.texture=null!=(a=S.aoSetup.mrtPass)?a.normalRoughness:null}var G,H,W=C;t:do{var X;for(G=sc.ALL,X=W.stages.values.iterator();X.hasNext();){var K=X.next();if(0!=(K.stage.mask&G.mask)){var Y,Z,J=K.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(Lt(tt.name,"noiseTex")&&e.isType(tt,Ep)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,Ep)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);x(H).sampler.texture=S.noiseTex_0;var it,nt,rt=S,ot=C;t:do{var st;for(it=sc.ALL,st=ot.stages.values.iterator();st.hasNext();){var at=st.next();if(0!=(at.stage.mask&it.mask)){var lt,ut,pt=at.nodes;e:do{var ct;for(ct=pt.iterator();ct.hasNext();){var ht=ct.next();if(Lt(ht.name,"aoUniforms")&&e.isType(ht,B$)){ut=ht;break e}}ut=null}while(0);var dt=null==(lt=ut)||e.isType(lt,B$)?lt:c();if(null!=dt){nt=dt;break t}}}nt=null}while(0);rt.aoUniforms_0=nt;var ft,_t,mt=S,$t=C;t:do{var yt;for(ft=sc.ALL,yt=$t.stages.values.iterator();yt.hasNext();){var vt=yt.next();if(0!=(vt.stage.mask&ft.mask)){var gt,bt,xt=vt.nodes;e:do{var wt;for(wt=xt.iterator();wt.hasNext();){var zt=wt.next();if(Lt(zt.name,"aoNode")&&e.isType(zt,G$)){bt=zt;break e}}bt=null}while(0);var kt=null==(gt=bt)||e.isType(gt,G$)?gt:c();if(null!=kt){_t=kt;break t}}}_t=null}while(0);return mt.aoNode_0=_t,S.setKernelSize_0(S.kernelSz),s})),p.shader=E,u.unaryPlus_uv0sim$(p)}function F$(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$data=t}function B$(t,e,i,n){this.$outer=t,rp.call(this,"aoUniforms",n),this.cam=e,this.withInvProj=i,this.uKernel=new Cd("uKernel",128),this.uKernelN=Md(32,"uKernelN"),this.uProj=new Td("uProj"),this.uInvProj=new Td("uInvProj"),this.uNoiseScale=new bd("uNoiseScale"),this.uRadius=new vd("uRadius"),this.uStrength=new vd("uStrength"),this.uPower=new vd("uPower"),this.uBias=new vd("uBias")}function U$(t,e){return function(i){return i.unaryPlus_wq3w46$(function(t){return function(){return t.uKernel}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uProj}}(t)),t.withInvProj&&i.unaryPlus_wq3w46$(function(t){return function(){return t.uInvProj}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uNoiseScale}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uRadius}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uStrength}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uPower}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uBias}}(t)),i.unaryPlus_wq3w46$(function(t){return function(){return t.uKernelN}}(t)),i.onUpdate=function(t,e){return function(i,n){return t.uProj.value.set_d4zu6l$(t.cam.proj),t.uNoiseScale.value.set_dleff0$(e.width/4,e.height/4),t.uRadius.value=e.radius,t.uStrength.value=e.strength,t.uPower.value=e.power,t.uBias.value=e.bias,t.withInvProj&&t.uInvProj.value.set_d4zu6l$(t.cam.invProj),s}}(t,e),s}}function V$(t,e){rp.call(this,"unprojectPos",e),this.aoUniforms=t,this.inDepth=new op(new Pu(1)),this.inScreenPos=new op(new Ou(ar().ZERO)),this.outPosition=new op(new wu(this.name+"_outPos"),this)}function G$(t,e,i,n,r,o){this.$outer=t,rp.call(this,"aoNode",o),this.aoUniforms=e,this.noiseTex=i,this.depthTex=n,this.depthComponent=r,this.inScreenPos=new op(new Ou(ar().ZERO)),this.inOrigin=new op(new Mu(Er().ZERO)),this.inNormal=new op(new Mu(Er().Y_AXIS)),this.outColor=new op(new zu("colorOut"),this)}function H$(){W$=this,this.MAX_KERNEL_SIZE=128}N$.prototype.tick_aemszp$=function(t){var e,i=this.speed;if(e=EE.FUZZY_EQ_F,!(A.abs(i)<=e)){if(this.progress+=t.deltaT*this.speed/this.duration,this.progress>=1&&this.speed>0)switch(this.repeating){case 1:this.progress=1,this.speed=0;break;case 2:this.progress=0;break;case 3:this.progress=1,this.speed=-this.speed}else if(this.progress<=0&&this.speed<0)switch(this.repeating){case 1:this.progress=0,this.speed=0;break;case 2:this.progress=1;break;case 3:this.progress=0,this.speed=-this.speed}var n,r=this.progress;n=r<0?0:r>1?1:r,this.progress=n,this.value.interpolate_mx4ult$(this.interpolate_mx4ult$(this.progress))}return this.value.value},N$.$metadata$={kind:$,simpleName:"Animator",interfaces:[]},O$.prototype.interpolate_mx4ult$=function(t){return t},O$.$metadata$={kind:$,simpleName:"LinearAnimator",interfaces:[N$]},M$.prototype.interpolate_mx4ult$=function(t){var e=t*U.PI;return.5-.5*A.cos(e)},M$.$metadata$={kind:$,simpleName:"CosAnimator",interfaces:[N$]},j$.prototype.interpolate_mx4ult$=function(t){var e;this.updateValue_mx4ult$(t),null!=(e=this.onUpdate)&&e(this.value)},j$.$metadata$={kind:$,simpleName:"InterpolatedValue",interfaces:[]},A$.prototype.updateValue_mx4ult$=function(t){this.value=this.from+(this.to-this.from)*t},A$.$metadata$={kind:$,simpleName:"InterpolatedFloat",interfaces:[j$]},Object.defineProperty(I$.prototype,"speed",{configurable:!0,get:function(){return this.speed_t20eng$_0},set:function(t){this.speed_t20eng$_0=t}}),Object.defineProperty(I$.prototype,"stiffness",{configurable:!0,get:function(){return this.stiffness_h7kl9w$_0},set:function(t){this.stiffness_h7kl9w$_0=t;var e=this.stiffness;this.damping_0=2*A.sqrt(e)}}),I$.prototype.set_mx4ult$=function(t){this.desired=t,this.actual=t,this.speed=0},I$.prototype.animate_mx4ult$=function(t){if(0===this.stiffness||t>.2)return this.actual=this.desired,this.actual;for(var e=0;e<t;){var i=t-e,n=A.min(.05,i);e+=n+.001;var r=this.desired-this.actual;this.speed=this.speed+(r*this.stiffness-this.speed*this.damping_0)*n;var o,s=this.speed*n,a=A.abs(s);o=EE.FUZZY_EQ_F,A.abs(a)<=o?this.actual=this.desired:this.actual+=s}return this.actual},I$.$metadata$={kind:$,simpleName:"SpringDamperFloat",interfaces:[]},Object.defineProperty(R$.prototype,"speed",{configurable:!0,get:function(){return this.speed_e6bbiv$_0},set:function(t){this.speed_e6bbiv$_0=t}}),Object.defineProperty(R$.prototype,"stiffness",{configurable:!0,get:function(){return this.stiffness_bla035$_0},set:function(t){this.stiffness_bla035$_0=t;var e=this.stiffness;this.damping_0=2*A.sqrt(e)}}),R$.prototype.set_14dthe$=function(t){this.desired=t,this.actual=t,this.speed=0},R$.prototype.animate_mx4ult$=function(t){if(0===this.stiffness||t>.2)return this.actual=this.desired,this.actual;for(var e=0;e<t;){var i=t-e,n=A.min(.05,i);e+=n+.001;var r=this.desired-this.actual;this.speed=this.speed+(r*this.stiffness-this.speed*this.damping_0)*n;var o,s=this.speed*n,a=A.abs(s);o=EE.FUZZY_EQ_D,A.abs(a)<=o?this.actual=this.desired:this.actual+=s}return this.actual},R$.$metadata$={kind:$,simpleName:"SpringDamperDouble",interfaces:[]},L$.prototype.updateJointTransforms=function(){var t;t=this.nodes;for(var e=0;e!==t.size;++e)this.nodes.get_za3lpa$(e).hasParent||this.nodes.get_za3lpa$(e).updateJointTransform()},L$.prototype.printHierarchy=function(){var t,e,i=this.nodes,n=M();for(t=i.iterator();t.hasNext();){var r=t.next();r.hasParent||n.add_11rb$(r)}for(e=n.iterator();e.hasNext();)e.next().printHierarchy_61zpoe$("")},Object.defineProperty(D$.prototype,"hasParent",{configurable:!0,get:function(){return null!=this.parent_0}}),D$.prototype.addChild_j3a3b7$=function(t){t.parent_0=this,this.children_0.add_11rb$(t)},D$.prototype.updateJointTransform=function(){var t;this.jointTransform.set_d4zu6l$(this.joint.transform),t=this.children_0;for(var e=0;e!==t.size;++e)this.children_0.get_za3lpa$(e).updateJointTransform_0(this.jointTransform);this.jointTransform.mul_d4zu6j$(this.inverseBindMatrix)},D$.prototype.updateJointTransform_0=function(t){var e;this.tmpMat4f_0.set_d4zu6l$(this.joint.transform),this.jointTransform.set_d4zu6j$(t).mul_d4zu6j$(this.tmpMat4f_0),e=this.children_0;for(var i=0;i!==e.size;++i)this.children_0.get_za3lpa$(i).updateJointTransform_0(this.jointTransform);this.jointTransform.mul_d4zu6j$(this.inverseBindMatrix)},D$.prototype.printHierarchy_61zpoe$=function(t){var e;for(jt(t+Ct(this.joint.name)),e=this.children_0.iterator();e.hasNext();)e.next().printHierarchy_61zpoe$(t+"    ")},D$.$metadata$={kind:$,simpleName:"SkinNode",interfaces:[]},L$.$metadata$={kind:$,simpleName:"Skin",interfaces:[]},Object.defineProperty(q$.prototype,"kernelSz",{configurable:!0,get:function(){return this.kernelSz_cjciej$_0},set:function(t){this.kernelSz_cjciej$_0=t,this.setKernelSize_0(t)}}),q$.prototype.setKernelSize_0=function(t){var e,i=A.min(t,128);if(null!=(e=this.aoNode_0)){var n,r=f(0,i),o=w(j(r,10));for(n=r.iterator();n.hasNext();){var s=n.next()/i;o.add_11rb$.call(o,this.lerp_0(.1,1,A.pow(s,2)))}for(var a=Q(o,J(17)),l=0;l<i;l++){var u=this.hammersley_0(l,i),p=2*U.PI*u.x,c=1-u.y,h=A.sqrt(c),d=1-h*h,_=A.sqrt(d),m=new Or(_*A.cos(p),_*A.sin(p),h);e.aoUniforms.uKernel.value[l]=m.norm().scale_mx4ult$(a.get_za3lpa$(l))}e.aoUniforms.uKernelN.value=i}},q$.prototype.radicalInverse_0=function(t){var i=e.Long.fromInt(t);return 2.3283064e-10*(i=(i=(i=(i=(i=i.shiftLeft(16).or(i.shiftRight(16))).and(te).shiftLeft(1).or(i.and(ee).shiftRight(1))).and(ie).shiftLeft(2).or(i.and(ne).shiftRight(2))).and(re).shiftLeft(4).or(i.and(oe).shiftRight(4))).and(se).shiftLeft(8).or(i.and(ae).shiftRight(8))).toNumber()},q$.prototype.hammersley_0=function(t,e){return new rr(t/e,this.radicalInverse_0(t))},q$.prototype.lerp_0=function(t,e,i){return t+i*(e-t)},F$.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},F$.prototype=Object.create(l.prototype),F$.prototype.constructor=F$,F$.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$data;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},q$.prototype.makeNoiseTexture_0=function(){var t,e=xE(64),i=f(0,16),n=w(j(i,10));for(t=i.iterator();t.hasNext();){var r=t.next();n.add_11rb$(U.PI*r/8)}for(var o=le(n),s=0;s<16;s++){var a=o.get_za3lpa$(s),l=A.cos(a),u=A.sin(a);e.set_6t1wet$(0+(4*s|0)|0,qt(B(255*(.5*l+.5)))),e.set_6t1wet$(1+(4*s|0)|0,qt(B(255*(.5*u+.5)))),e.set_6t1wet$(2+(4*s|0)|0,0),e.set_6t1wet$(3+(4*s|0)|0,1)}var p,c=new ad(e,4,4,dh());return new Eh(new Hh(dh(),ed(),ed(),void 0,Kh(),Kh(),!1,1),"ao_noise_tex",(p=c,function(t,e,i,n){var r=new F$(p,t,e,this,i);return n?r:r.doResume(null)}))},q$.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),this.noiseTex_0.dispose(),$a.prototype.dispose_aemszp$.call(this,t)},B$.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t);var e=t.descriptorSet;this.$outer;var i=this.$outer;e.uniformBuffer_2ydyu8$(this.name,[t.stage],U$(this,i))},B$.$metadata$={kind:$,simpleName:"AoUniforms",interfaces:[rp]},V$.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inDepth,this.inScreenPos])},V$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec4 projPos = vec4("+this.inScreenPos.ref2f_61zpoe$()+" * 2.0 - vec2(1.0), 1.0, 1.0);\n                vec4 viewPos = "+this.aoUniforms.uInvProj+" * projPos;\n                "+this.outPosition.declare()+" = viewPos.xyz / viewPos.w;\n                "+this.outPosition+" *= ("+this.inDepth.ref1f_61zpoe$()+" / "+this.outPosition+".z);\n            ")},V$.$metadata$={kind:$,simpleName:"UnprojectPosNode",interfaces:[rp]},G$.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noiseTex),this.dependsOn_8ak6wm$([this.inScreenPos,this.inOrigin]),rp.prototype.setup_llmhyc$.call(this,t)},G$.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                if ("+this.inOrigin+".z > 0.0) {\n                    discard;\n                }\n                \n                // compute kernel rotation\n                vec2 noiseCoord = "+this.inScreenPos.ref2f_61zpoe$()+" * "+this.aoUniforms.uNoiseScale+";\n                vec3 rotVec = "+t.sampleTexture2d_buzeal$(this.noiseTex.name,"noiseCoord")+".xyz * 2.0 - 1.0;\n                vec3 tangent = normalize(rotVec - "+this.inNormal.ref3f_61zpoe$()+" * dot(rotVec, "+this.inNormal.ref3f_61zpoe$()+"));\n                vec3 bitangent = cross("+this.inNormal.ref3f_61zpoe$()+", tangent);\n                mat3 tbn = mat3(tangent, bitangent, "+this.inNormal.ref3f_61zpoe$()+");\n                \n                float occlusion = 0.0;\n                float bias = "+this.aoUniforms.uBias+" * "+this.aoUniforms.uRadius+";\n                for (int i = 0; i < "+this.aoUniforms.uKernelN+"; i++) {\n                    vec3 kernel = tbn * "+this.aoUniforms.uKernel+"[i];\n                    vec3 samplePos = "+this.inOrigin+" + kernel * "+this.aoUniforms.uRadius+";\n                    \n                    vec4 sampleProj = "+this.aoUniforms.uProj+" * vec4(samplePos, 1.0);\n                    sampleProj.xyz /= sampleProj.w;\n                    sampleProj.xy = sampleProj.xy * 0.5 + 0.5;\n                    \n                    if (sampleProj.x > 0.0 && sampleProj.x < 1.0 && sampleProj.y > 0.0 && sampleProj.y < 1.0 && sampleProj.z > 0.0) {\n                        float sampleDepth = "+t.sampleTexture2d_buzeal$(this.depthTex.name,"sampleProj.xy")+"."+this.depthComponent+";\n                        float rangeCheck = 1.0 - smoothstep(0.0, 1.0, abs("+this.inOrigin+".z - sampleDepth) / (4.0 * "+this.aoUniforms.uRadius+"));\n                        float occlusionInc = clamp((sampleDepth - (samplePos.z + bias)) * 10.0, 0.0, 1.0);\n                        occlusion += occlusionInc * rangeCheck;\n                    }\n                }\n                occlusion /= float("+this.aoUniforms.uKernelN+");\n                float occlFac = pow(clamp(1.0 - occlusion * "+this.aoUniforms.uStrength+", 0.0, 1.0), "+this.aoUniforms.uPower+");\n                \n                "+this.outColor.declare()+" = vec4(occlFac, 0.0, 0.0, 1.0);\n            ")},G$.$metadata$={kind:$,simpleName:"AoNode",interfaces:[rp]},H$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var W$=null;function X$(){return null===W$&&new H$,W$}function K$(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Y$(t,e){Q$(),this.mrtPass=t,this.linearDepthPass=e}function Z$(){J$=this}q$.$metadata$={kind:$,simpleName:"AmbientOcclusionPass",interfaces:[$a]},Object.defineProperty(Y$.prototype,"isDeferred",{configurable:!0,get:function(){return null!=this.mrtPass}}),Object.defineProperty(Y$.prototype,"isForward",{configurable:!0,get:function(){return null!=this.linearDepthPass}}),Z$.prototype.deferred_u6tred$=function(t){return new Y$(t,null)},Z$.prototype.forward_xscw1l$=function(t){return new Y$(null,t)},Z$.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var J$=null;function Q$(){return null===J$&&new Z$,J$}function ty(t,i,n){var r,o=new lf,a=new pa;a.name="AoDenoisePass",a.setSize_vux9f0$(t.config.width,t.config.height),a.addColorTexture_farcsl$(ph()),a.clearDepthTexture(),$a.call(this,o,new ua(a)),this.uRadius_0=gd(1,"uRadius"),this.clearAndDisable=!1,this.denoiseMesh_0=null,this.clearMesh_0=null,this.clearColor=Oy().BLACK;var l=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(iy);var u=new tp("AoDenoisePass"),p={v:null},h=new ip(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.fullScreenQuadPositionNode_r20yfm$(h.attrTexCoords().output).outQuadPos;var d=new np(u),f=d.texture2dNode_61zpoe$("noisyAo"),_=d.texture2dNode_61zpoe$("depth"),m=d.pushConstantNode1f_978i2u$(this.uRadius_0),$=d.addNode_u9w9by$(new ey(f,_,n,d.stage));$.inScreenPos=p.v.output,$.radius=m.output,d.colorOutput_a3v4si$($.outColor);var y,v,g,b=u,w=new zc(b);w.onPipelineSetup.add_11rb$(ny),w.onPipelineCreated.add_11rb$((y=t,v=b,g=i,function(t,i,n){var r,o,a=v;t:do{var l;for(r=sc.ALL,l=a.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&r.mask)){var p,h,d=u.nodes;e:do{var f;for(f=d.iterator();f.hasNext();){var _=f.next();if(Lt(_.name,"noisyAo")&&e.isType(_,Ep)){h=_;break e}}h=null}while(0);var m=null==(p=h)||e.isType(p,Ep)?p:c();if(null!=m){o=m;break t}}}o=null}while(0);x(o).sampler.texture=y.colorTexture;var $,b,w=v;t:do{var z;for($=sc.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&$.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var T=E.next();if(Lt(T.name,"depth")&&e.isType(T,Ep)){C=T;break e}}C=null}while(0);var P=null==(S=C)||e.isType(S,Ep)?S:c();if(null!=P){b=P;break t}}}b=null}while(0);return x(b).sampler.texture=g,s})),l.shader=w,this.denoiseMesh_0=l;var z=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);z.isVisible=!1,z.generate_v2sixm$(ry);var k=new tp("ClearAoDenoisePass"),S=new ip(k);S.mvpNode(),S.positionOutput=S.fullScreenQuadPositionNode_r20yfm$(S.attrTexCoords().output).outQuadPos;var C=new np(k);C.colorOutput_a3v4si$(C.constVec4f_czzhhz$(Oy().WHITE));var N=new zc(k);N.onPipelineSetup.add_11rb$(oy),z.shader=N,this.clearMesh_0=z;var E=e.isType(r=this.drawNode,lf)?r:c();E.unaryPlus_uv0sim$(this.denoiseMesh_0),E.unaryPlus_uv0sim$(this.clearMesh_0)}function ey(t,e,i,n){rp.call(this,"blurNode",n),this.noisyAo=t,this.depth=e,this.depthComponent=i,this.inScreenPos=new op(new Ou(ar().ZERO)),this.radius=new op(new Pu(1)),this.outColor=new op(new zu("colorOut"),this)}function iy(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function ny(t,e,i){return t.blendMode=hl(),t.depthTest=yl(),s}function ry(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function oy(t,e,i){return t.blendMode=hl(),t.depthTest=yl(),s}function sy(){cy(),this.mapSize=.5,this.isEnabled_ubfkyk$_0=!0}function ay(t){var i;sy.call(this),this.depthPass=null,this.aoPass_i8vqld$_0=null,this.denoisePass_wz7oly$_0=null,this.mapWidth_0=0,this.mapHeight_0=0;var n,r,o,a=new ef(e.isType(i=t.camera,tf)?i:c());this.depthPass=Is(t,this.mapWidth_0,this.mapHeight_0),this.depthPass.camera=a,this.depthPass.isUpdateDrawNode=!1,this.depthPass.onBeforeCollectDrawCommands.add_11rb$((n=a,r=t,function(t){return n.sync_hrtwbc$(r.mainRenderPass.viewport,t),s})),this.aoPass_i8vqld$_0=new q$(a,Q$().forward_xscw1l$(this.depthPass),this.mapWidth_0,this.mapHeight_0),this.aoPass.dependsOn_yqp8fe$(this.depthPass),this.denoisePass_wz7oly$_0=new ty(this.aoPass,x(this.depthPass.colorTexture),"a"),t.addOffscreenPass_m1c2kf$(this.depthPass),t.addOffscreenPass_m1c2kf$(this.aoPass),t.addOffscreenPass_m1c2kf$(this.denoisePass),t.onRenderScene.add_11rb$((o=this,function(t,e){var i=B(t.mainRenderPass.viewport.width*o.mapSize),n=B(t.mainRenderPass.viewport.height*o.mapSize);return o.isEnabled&&i>0&&n>0&&(i!==o.aoPass.width||n!==o.aoPass.height)&&(o.depthPass.resize_w70mbp$(i,n,e),o.aoPass.resize_w70mbp$(i,n,e)),o.isEnabled&&i>0&&n>0&&(i!==o.denoisePass.width||n!==o.denoisePass.height)&&o.denoisePass.resize_w70mbp$(i,n,e),s}))}function ly(t,e){var i,n;sy.call(this),this.aoPass_6v2ifx$_0=null,this.denoisePass_mxbezy$_0=null,this.mapWidth_0=0,this.mapHeight_0=0,this.aoPass_6v2ifx$_0=new q$(e.camera,Q$().deferred_u6tred$(e),this.mapWidth_0,this.mapHeight_0),this.aoPass.dependsOn_yqp8fe$(e),this.denoisePass_mxbezy$_0=new ty(this.aoPass,e.positionAo,"z"),t.addOffscreenPass_m1c2kf$(this.aoPass),t.addOffscreenPass_m1c2kf$(this.denoisePass),t.onRenderScene.add_11rb$((i=e,n=this,function(t,e){var r=B(i.width*n.mapSize),o=B(i.height*n.mapSize);return n.isEnabled&&r>0&&o>0&&(r!==n.aoPass.width||o!==n.aoPass.height)&&n.aoPass.resize_w70mbp$(r,o,e),n.isEnabled&&r>0&&o>0&&(r!==n.denoisePass.width||o!==n.denoisePass.height)&&n.denoisePass.resize_w70mbp$(r,o,e),s}))}function uy(){py=this}Y$.$metadata$={kind:$,simpleName:"AoSetup",interfaces:[]},Object.defineProperty(ty.prototype,"radius",{configurable:!0,get:function(){return this.uRadius_0.value},set:function(t){this.uRadius_0.value=t}}),ty.prototype.update_aemszp$=function(t){var e;this.clearAndDisable&&(this.resize_w70mbp$(1,1,t),this.clearAndDisable=!1,this.denoiseMesh_0.isVisible=!1,this.clearMesh_0.isVisible=!0,t.runDelayed_hd6vpk$(5,(e=this,function(t){return e.isEnabled=!1,e.denoiseMesh_0.isVisible=!0,e.clearMesh_0.isVisible=!1,s}))),$a.prototype.update_aemszp$.call(this,t)},ty.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},ey.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noisyAo),this.dependsOn_lhtstx$(this.depth),this.dependsOn_8ak6wm$([this.inScreenPos,this.radius]),rp.prototype.setup_llmhyc$.call(this,t)},ey.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                int blurSize = 4;\n                vec2 texelSize = 1.0 / vec2(textureSize("+this.noisyAo.name+", 0));\n                float depthOri = "+t.sampleTexture2d_buzeal$(this.depth.name,this.inScreenPos.ref2f_61zpoe$())+"."+this.depthComponent+";\n                float depthThreshold = "+this.radius.ref1f_61zpoe$()+" * 0.1;\n                \n                float result = 0.0;\n                float weight = 0.0;\n                vec2 hlim = vec2(float(-blurSize) * 0.5 + 0.5);\n                for (int x = 0; x < blurSize; x++) {\n                    for (int y = 0; y < blurSize; y++) {\n                        vec2 uv = "+this.inScreenPos.ref2f_61zpoe$()+" + (hlim + vec2(float(x), float(y))) * texelSize;\n                        float w = 1.0 - step(depthThreshold, abs("+t.sampleTexture2d_buzeal$(this.depth.name,"uv")+"."+this.depthComponent+" - depthOri)) * 0.99;\n                        \n                        result += "+t.sampleTexture2d_buzeal$(this.noisyAo.name,"uv")+".r * w;\n                        weight += w;\n                    }\n                }\n                result /= weight;\n                "+this.outColor.declare()+" = vec4(result, result, result, 1.0);\n            ")},ey.$metadata$={kind:$,simpleName:"BlurNode",interfaces:[rp]},ty.$metadata$={kind:$,simpleName:"AoDenoisePass",interfaces:[$a]},Object.defineProperty(sy.prototype,"aoMap",{configurable:!0,get:function(){return x(this.denoisePass.colorTexture)}}),Object.defineProperty(sy.prototype,"radius",{configurable:!0,get:function(){return this.aoPass.radius},set:function(t){this.aoPass.radius=t,this.denoisePass.radius=t}}),Object.defineProperty(sy.prototype,"strength",{configurable:!0,get:function(){return this.aoPass.strength},set:function(t){this.aoPass.strength=t}}),Object.defineProperty(sy.prototype,"power",{configurable:!0,get:function(){return this.aoPass.power},set:function(t){this.aoPass.power=t}}),Object.defineProperty(sy.prototype,"bias",{configurable:!0,get:function(){return this.aoPass.bias},set:function(t){this.aoPass.bias=t}}),Object.defineProperty(sy.prototype,"kernelSz",{configurable:!0,get:function(){return this.aoPass.kernelSz},set:function(t){this.aoPass.kernelSz=t}}),Object.defineProperty(sy.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_ubfkyk$_0},set:function(t){this.isEnabled_ubfkyk$_0=t,this.updateEnabled()}}),sy.prototype.updateEnabled=function(){this.aoPass.isEnabled=this.isEnabled,this.isEnabled?(this.denoisePass.isEnabled=!0,this.denoisePass.clearAndDisable=!1):this.denoisePass.clearAndDisable=!0},Object.defineProperty(ay.prototype,"aoPass",{configurable:!0,get:function(){return this.aoPass_i8vqld$_0}}),Object.defineProperty(ay.prototype,"denoisePass",{configurable:!0,get:function(){return this.denoisePass_wz7oly$_0}}),ay.prototype.updateEnabled=function(){sy.prototype.updateEnabled.call(this),this.depthPass.isEnabled=this.isEnabled},ay.$metadata$={kind:$,simpleName:"ForwardAoPipeline",interfaces:[sy]},Object.defineProperty(ly.prototype,"aoPass",{configurable:!0,get:function(){return this.aoPass_6v2ifx$_0}}),Object.defineProperty(ly.prototype,"denoisePass",{configurable:!0,get:function(){return this.denoisePass_mxbezy$_0}}),ly.$metadata$={kind:$,simpleName:"DeferredAoPipeline",interfaces:[sy]},uy.prototype.createForward_ushge7$=function(t){return new ay(t)},uy.prototype.createDeferred_4lrvgg$=function(t,e){return new ly(t,e)},uy.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var py=null;function cy(){return null===py&&new uy,py}function hy(t){rp.call(this,"raySphereIntersection",t)}function dy(t,e){rp.call(this,"atmosphereNode",e),this.opticalDepthLut=t,this.inSceneColor=new op(new ju(Oy().MAGENTA)),this.inSceneDepth=new op(new Pu(0)),this.inScenePos=new op(new Mu(Er().ZERO)),this.inSkyColor=new op(new ju(Oy().MAGENTA)),this.inViewDepth=new op(new Pu(0)),this.inCamPos=new op(new Mu(Er().ZERO)),this.inLookDir=new op(new Mu(Er().Z_AXIS)),this.uDirToSun=new xd("uDirToSun"),this.uPlanetCenter=new xd("uPlanetCenter"),this.uSurfaceRadius=new vd("uSurfaceRadius"),this.uAtmosphereRadius=new vd("uAtmosphereRadius"),this.uScatteringCoeffs=new xd("uScatteringCoeffs"),this.uMieG=new vd("uMieG"),this.uMieColor=new zd("uMieColor"),this.uRayleighColor=new zd("uRayleighColor"),this.uSunColor=new zd("uSunColor"),this.outColor=new op(new zu("outColor"),this)}function fy(){$y();var t,i=new lf,n=new pa;n.name="OpticalDepthLutPass",n.setSize_vux9f0$(512,512),n.addColorTexture_farcsl$(_h()),n.clearDepthTexture(),$a.call(this,i,new ua(n)),this.lutNode_0=null,this.atmosphereRadius_fokv28$_0=65,this.surfaceRadius_nmta75$_0=60,this.densityFalloff_h12ebs$_0=9,this.clearColor=null;var r=new Qd;r.projCorrectionMode=Jd(),r.isKeepAspectRatio=!1,r.left=0,r.right=1,r.top=1,r.bottom=0,this.camera=r;var o=e.isType(t=this.drawNode,lf)?t:c(),a=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);a.generate_v2sixm$(vy);var l=new tp("Optical Depth LUT"),u={v:null},p=new ip(l);u.v=p.stageInterfaceNode_iikjwn$("ifTexCoords",p.attrTexCoords().output),p.positionOutput=p.simpleVertexPositionNode().outVec4;var h=new np(l),d=h.addNode_u9w9by$(new yy(h.stage));d.inTexCoords=u.v.output;var f=d;h.colorOutput_a3v4si$(f.outColor);var _,m,$=l,y=new zc($);y.onPipelineCreated.add_11rb$((_=$,m=this,function(t,i,n){var r,o,a,l=m,u=_;t:do{var p;for(o=sc.ALL,p=u.stages.values.iterator();p.hasNext();){var c=p.next();if(0!=(c.stage.mask&o.mask)){var h,d=c.nodes,f=M();for(h=d.iterator();h.hasNext();){var $=h.next();e.isType($,yy)&&f.add_11rb$($)}var y=ue(f);if(null!=y){a=y;break t}}}a=null}while(0);if(l.lutNode_0=a,null!=(r=m.lutNode_0)){var v=m;r.uAtmosphereRadius.value=v.atmosphereRadius,r.uSurfaceRadius.value=v.surfaceRadius,r.uDensityFalloff.value=v.densityFalloff}return s})),a.shader=y,o.unaryPlus_uv0sim$(a),this.onAfterDraw.add_11rb$(function(t){return function(e){return t.isEnabled=!1,s}}(this))}function _y(){my=this,this.LUT_SIZE_X=512,this.LUT_SIZE_Y=512}sy.$metadata$={kind:$,simpleName:"AoPipeline",interfaces:[]},hy.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("raySphereIntersection","\n                bool raySphereIntersection(vec3 rayOrigin, vec3 rayDir, vec3 center, float radius, out float d1, out float d2) {\n                    vec3 centerToOri = rayOrigin - center;\n                    float a = dot(rayDir, rayDir);\n                    float b = 2.0 * dot(rayDir, centerToOri);\n                    float c = dot(centerToOri, centerToOri) - radius * radius;\n                    \n                    float discriminant = b * b - 4.0 * a * c;\n                    if (discriminant < 0.0) {\n                        return false;\n                    } else {\n                        float q = -0.5 * (b + sign(b) * sqrt(discriminant));\n                        float t1 = q / a;\n                        float t2 = c / q;\n                        d1 = min(t1, t2);\n                        d2 = max(t1, t2);\n                        return d2 > 0.0;\n                    }\n                }\n            "),t.appendFunction_puj7f4$("rayPointDistance","\n                vec4 rayPointDistance(vec3 rayOrigin, vec3 rayDir, vec3 point) {\n                    vec3 w = point - rayOrigin;\n                    float c1 = dot(w, rayDir);\n                    float c2 = dot(rayDir, rayDir);\n                    vec3 pn = rayOrigin + rayDir * (c1 / c2);\n                    float dist = length(pn - point) * sign(c1);\n                    return vec4(pn, dist);\n                }\n            ")},hy.$metadata$={kind:$,simpleName:"RaySphereIntersectionNode",interfaces:[rp]},dy.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inSceneColor,this.inSceneDepth,this.inScenePos,this.inSkyColor,this.inViewDepth,this.inCamPos,this.inLookDir]),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uDirToSun}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uPlanetCenter}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uRayleighColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uMieColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uScatteringCoeffs}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSunColor}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSurfaceRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uAtmosphereRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uMieG}}(e)),s}))},dy.prototype.printUniforms=function(){jt("uDirToSun: "+this.uDirToSun.value),jt("uPlanetCenter: "+this.uPlanetCenter.value),jt("uSurfaceRadius: "+this.uSurfaceRadius.value),jt("uAtmosphereRadius: "+this.uAtmosphereRadius.value),jt("uScatteringCoeffs: "+this.uScatteringCoeffs.value),jt("uMieG: "+this.uMieG.value),jt("uMieColor: "+this.uMieColor.value),jt("uRayleighColor: "+this.uRayleighColor.value),jt("uSunColor: "+this.uSunColor.value)},dy.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("phaseFunRayleigh","\n                vec3 phaseFunRayleigh(float cosTheta) {\n                    //vec3 phase = vec3(1.0 + clamp(cosTheta, 0.0, 1.0));\n                    //vec3 phase = vec3(1.0 + smoothstep(0.0, 1.0, cosTheta));\n                    vec3 phase = vec3(1.5 + cosTheta * 0.5);\n                    return phase * "+this.uRayleighColor+".rgb * "+this.uRayleighColor+".a;\n                }\n            "),t.appendFunction_puj7f4$("phaseFunMie","\n                vec3 phaseFunMie(float cosTheta, float g) {\n                    float g2 = g * g;\n                    float f1 = (3.0 * (1.0 - g2)) / (2.0 * (2.0 + g2));\n                    float f2 = (1.0 + cosTheta * cosTheta) / pow(1.0 + g2 - 2.0 * g * cosTheta, 1.5);\n                    return vec3(f1 * f2) * "+this.uMieColor+".rgb * "+this.uMieColor+".a;\n                }\n            "),t.appendFunction_puj7f4$("opticalDepthLut","\n                vec2 opticalDepthLut(float altitude, float cosTheta) {\n                    return "+t.sampleTexture2d_buzeal$(this.opticalDepthLut.name,"vec2(cosTheta * 0.5 + 0.5, altitude)")+".xy;\n                }\n            "),t.appendFunction_puj7f4$("opticalDepthLenLut","\n                float opticalDepthLenLut(vec3 origin, vec3 dir, float len) {\n                    float atmosphereThickness = "+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+";\n                    \n                    vec3 p1 = origin;\n                    vec3 p2 = origin + dir * len;\n                    float altitude1 = (length(p1) - "+this.uSurfaceRadius+") / atmosphereThickness;\n                    float altitude2 = (length(p2) - "+this.uSurfaceRadius+") / atmosphereThickness;\n                    \n                    if (altitude1 > altitude2) {\n                        // swap points and direction if ray is pointing downwards\n                        p1 = p2;\n                        p2 = origin;\n                        \n                        float swapAlt = altitude1;\n                        altitude1 = altitude2;\n                        altitude2 = swapAlt;\n                        \n                        dir = -dir;\n                    }\n                    \n                    float depth1 = opticalDepthLut(altitude1, dot(dir, normalize(p1))).x;\n                    float depth2 = opticalDepthLut(altitude2, dot(dir, normalize(p2))).x;\n                    return depth1 - depth2;\n                }\n            "),t.appendFunction_puj7f4$("scatterLight","\n                vec3 scatterLight(vec3 origin, vec3 dir, float rayLength, vec3 dirToSun) {\n                    float atmosphereThickness = "+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+";\n                    float stepSize = rayLength / float(11);\n                    vec3 inScatterPt = origin;\n                    vec3 inScatteredLight = vec3(0.0);\n                    \n                    for (int i = 0; i < 10; i++) {\n                        inScatterPt += dir * stepSize;\n                        \n                        float dPlanetIn, dPlanetOut;\n                        bool planetHit = raySphereIntersection(inScatterPt, dirToSun, vec3(0.0), "+this.uSurfaceRadius+", dPlanetIn, dPlanetOut);\n                        float dThroughPlanet = (dPlanetOut - dPlanetIn) * float(planetHit);\n                        float planetLenThresh = "+this.uSurfaceRadius+" / 3.0;\n                        \n                        if (dThroughPlanet < planetLenThresh) {\n                            vec3 verticalDir = normalize(inScatterPt);\n                            float cosTheta = dot(dirToSun, verticalDir);\n                            float altitude = (length(inScatterPt) - "+this.uSurfaceRadius+") / atmosphereThickness;\n    \n                            float viewRayOpticalDepth = opticalDepthLenLut(origin, dir, stepSize * float(i));\n                            vec2 opticalDepthToSun = opticalDepthLut(altitude, cosTheta);\n                            float sunRayOpticalDepth = opticalDepthToSun.x;\n                            float localDensity = opticalDepthToSun.y;\n                            vec3 transmittance = exp(-(sunRayOpticalDepth + viewRayOpticalDepth) * "+this.uScatteringCoeffs+");\n    \n                            float planetBlend = 1.0 - dThroughPlanet / planetLenThresh;\n                            inScatteredLight += localDensity * transmittance * "+this.uScatteringCoeffs+" * stepSize * planetBlend;\n                        }\n                    }\n                    \n                    float sunAngle = dot(dir, dirToSun);\n                    vec3 rayleigh = phaseFunRayleigh(sunAngle);\n                    vec3 mie = phaseFunMie(sunAngle, "+this.uMieG+");\n                    return (rayleigh + mie) * inScatteredLight * "+this.uSunColor+".rgb * "+this.uSunColor+".a;\n                }\n            "),t.appendMain_61zpoe$("\n                float dAtmoIn, dAtmoOut;\n                vec3 camOri = "+this.inCamPos.ref3f_61zpoe$()+" - "+this.uPlanetCenter+";\n                vec3 nrmLookDir = normalize("+this.inLookDir.ref3f_61zpoe$()+");\n                bool hitAtmo = raySphereIntersection(camOri, nrmLookDir, vec3(0.0), "+this.uAtmosphereRadius+", dAtmoIn, dAtmoOut);\n                \n                "+this.outColor.declare()+" = "+this.inSceneColor+";\n                if ("+this.inSceneDepth+" > 0.0) {\n                    "+this.outColor+" = "+this.inSkyColor+";\n                }\n                if (hitAtmo) {\n                    // dAtmoIn is negative if camera is inside atmosphere\n                    float dToAtmo = max(0.0, dAtmoIn);\n                    float dThroughAtmo = dAtmoOut - dToAtmo;\n                    if ("+this.inViewDepth.ref1f_61zpoe$()+" < 0.0) {\n                        float sceneDepth = length("+this.inCamPos.ref3f_61zpoe$()+" - "+this.inScenePos.ref3f_61zpoe$()+");\n                        dThroughAtmo = min(dThroughAtmo, sceneDepth - dToAtmo);\n                    }\n\n                    // scattering\n                    vec3 atmoHitPt = camOri + nrmLookDir * dToAtmo;\n                    vec3 light = scatterLight(atmoHitPt, nrmLookDir, dThroughAtmo, "+this.uDirToSun+");\n                    "+this.outColor+".rgb += light;\n                    \n                    //"+this.outColor+" = vec4(dThroughAtmo / 20.0, dToAtmo, 0.0, 1.0);\n                }\n            ")},dy.$metadata$={kind:$,simpleName:"AtmosphereNode",interfaces:[rp]},Object.defineProperty(fy.prototype,"atmosphereRadius",{configurable:!0,get:function(){return this.atmosphereRadius_fokv28$_0},set:function(t){var e,i;this.atmosphereRadius_fokv28$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uAtmosphereRadius:null)&&(i.value=t),this.update()}}),Object.defineProperty(fy.prototype,"surfaceRadius",{configurable:!0,get:function(){return this.surfaceRadius_nmta75$_0},set:function(t){var e,i;this.surfaceRadius_nmta75$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uSurfaceRadius:null)&&(i.value=t),this.update()}}),Object.defineProperty(fy.prototype,"densityFalloff",{configurable:!0,get:function(){return this.densityFalloff_h12ebs$_0},set:function(t){var e,i;this.densityFalloff_h12ebs$_0=t,null!=(i=null!=(e=this.lutNode_0)?e.uDensityFalloff:null)&&(i.value=t),this.update()}}),fy.prototype.update=function(){this.isEnabled=!0},fy.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},_y.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var my=null;function $y(){return null===my&&new _y,my}function yy(t){rp.call(this,"opticalDepthLut",t),this.inTexCoords=new op(new Ou(ar().ZERO)),this.outColor=new op(new zu("brdfLut_outColor"),this),this.uAtmosphereRadius=new vd("uAtmosphereRadius"),this.uSurfaceRadius=new vd("uSurfaceRadius"),this.uDensityFalloff=new vd("uDensityFalloff")}function vy(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function gy(){this.mutMin_0=Mr(),this.mutMax_0=Mr(),this.mutSize_0=Mr(),this.mutCenter_0=Mr(),this.isEmpty_xiuk4h$_0=!0,this.min=this.mutMin_0,this.max=this.mutMax_0,this.size=this.mutSize_0,this.center=this.mutCenter_0,this.isBatchUpdate_4nlnat$_0=!1}function by(){}function xy(){}function wy(){}function zy(){}function ky(){}function Sy(){}function Cy(t){for(var e=t.size,i=w(e),n=0;n<e;n++)i.add_11rb$(t.get_za3lpa$(n));return i}function Ny(t){var e=ht();return e.addAll_brywnq$(t),e}function Ey(t,e,i,n){Oy(),void 0===n&&(n=1),Yr.call(this,t,e,i,n)}function Ty(){Py=this,this.BLACK=new Ey(0,0,0,1),this.DARK_GRAY=new Ey(.25,.25,.25,1),this.GRAY=new Ey(.5,.5,.5,1),this.LIGHT_GRAY=new Ey(.75,.75,.75,1),this.WHITE=new Ey(1,1,1,1),this.RED=new Ey(1,0,0,1),this.GREEN=new Ey(0,1,0,1),this.BLUE=new Ey(0,0,1,1),this.YELLOW=new Ey(1,1,0,1),this.CYAN=new Ey(0,1,1,1),this.MAGENTA=new Ey(1,0,1,1),this.ORANGE=new Ey(1,.5,0,1),this.LIME=new Ey(.7,1,0,1),this.LIGHT_RED=new Ey(1,.5,.5,1),this.LIGHT_GREEN=new Ey(.5,1,.5,1),this.LIGHT_BLUE=new Ey(.5,.5,1,1),this.LIGHT_YELLOW=new Ey(1,1,.5,1),this.LIGHT_CYAN=new Ey(.5,1,1,1),this.LIGHT_MAGENTA=new Ey(1,.5,1,1),this.LIGHT_ORANGE=new Ey(1,.75,.5,1),this.DARK_RED=new Ey(.5,0,0,1),this.DARK_GREEN=new Ey(0,.5,0,1),this.DARK_BLUE=new Ey(0,0,.5,1),this.DARK_YELLOW=new Ey(.5,.5,0,1),this.DARK_CYAN=new Ey(0,.5,.5,1),this.DARK_MAGENTA=new Ey(.5,0,.5,1),this.DARK_ORANGE=new Ey(.5,.25,0,1),this.MD_RED_50=this.fromHex_61zpoe$("FFEBEE"),this.MD_RED_100=this.fromHex_61zpoe$("FFCDD2"),this.MD_RED_200=this.fromHex_61zpoe$("EF9A9A"),this.MD_RED_300=this.fromHex_61zpoe$("E57373"),this.MD_RED_400=this.fromHex_61zpoe$("EF5350"),this.MD_RED_500=this.fromHex_61zpoe$("F44336"),this.MD_RED_600=this.fromHex_61zpoe$("E53935"),this.MD_RED_700=this.fromHex_61zpoe$("D32F2F"),this.MD_RED_800=this.fromHex_61zpoe$("C62828"),this.MD_RED_900=this.fromHex_61zpoe$("B71C1C"),this.MD_RED_A100=this.fromHex_61zpoe$("FF8A80"),this.MD_RED_A200=this.fromHex_61zpoe$("FF5252"),this.MD_RED_A400=this.fromHex_61zpoe$("FF1744"),this.MD_RED_A700=this.fromHex_61zpoe$("D50000"),this.MD_RED=this.MD_RED_500,this.MD_PINK_50=this.fromHex_61zpoe$("FCE4EC"),this.MD_PINK_100=this.fromHex_61zpoe$("F8BBD0"),this.MD_PINK_200=this.fromHex_61zpoe$("F48FB1"),this.MD_PINK_300=this.fromHex_61zpoe$("F06292"),this.MD_PINK_400=this.fromHex_61zpoe$("EC407A"),this.MD_PINK_500=this.fromHex_61zpoe$("E91E63"),this.MD_PINK_600=this.fromHex_61zpoe$("D81B60"),this.MD_PINK_700=this.fromHex_61zpoe$("C2185B"),this.MD_PINK_800=this.fromHex_61zpoe$("AD1457"),this.MD_PINK_900=this.fromHex_61zpoe$("880E4F"),this.MD_PINK_A100=this.fromHex_61zpoe$("FF80AB"),this.MD_PINK_A200=this.fromHex_61zpoe$("FF4081"),this.MD_PINK_A400=this.fromHex_61zpoe$("F50057"),this.MD_PINK_A700=this.fromHex_61zpoe$("C51162"),this.MD_PINK=this.MD_PINK_500,this.MD_PURPLE_50=this.fromHex_61zpoe$("F3E5F5"),this.MD_PURPLE_100=this.fromHex_61zpoe$("E1BEE7"),this.MD_PURPLE_200=this.fromHex_61zpoe$("CE93D8"),this.MD_PURPLE_300=this.fromHex_61zpoe$("BA68C8"),this.MD_PURPLE_400=this.fromHex_61zpoe$("AB47BC"),this.MD_PURPLE_500=this.fromHex_61zpoe$("9C27B0"),this.MD_PURPLE_600=this.fromHex_61zpoe$("8E24AA"),this.MD_PURPLE_700=this.fromHex_61zpoe$("7B1FA2"),this.MD_PURPLE_800=this.fromHex_61zpoe$("6A1B9A"),this.MD_PURPLE_900=this.fromHex_61zpoe$("4A148C"),this.MD_PURPLE_A100=this.fromHex_61zpoe$("EA80FC"),this.MD_PURPLE_A200=this.fromHex_61zpoe$("E040FB"),this.MD_PURPLE_A400=this.fromHex_61zpoe$("D500F9"),this.MD_PURPLE_A700=this.fromHex_61zpoe$("AA00FF"),this.MD_PURPLE=this.MD_PURPLE_500,this.MD_DEEP_PURPLE_50=this.fromHex_61zpoe$("EDE7F6"),this.MD_DEEP_PURPLE_100=this.fromHex_61zpoe$("D1C4E9"),this.MD_DEEP_PURPLE_200=this.fromHex_61zpoe$("B39DDB"),this.MD_DEEP_PURPLE_300=this.fromHex_61zpoe$("9575CD"),this.MD_DEEP_PURPLE_400=this.fromHex_61zpoe$("7E57C2"),this.MD_DEEP_PURPLE_500=this.fromHex_61zpoe$("673AB7"),this.MD_DEEP_PURPLE_600=this.fromHex_61zpoe$("5E35B1"),this.MD_DEEP_PURPLE_700=this.fromHex_61zpoe$("512DA8"),this.MD_DEEP_PURPLE_800=this.fromHex_61zpoe$("4527A0"),this.MD_DEEP_PURPLE_900=this.fromHex_61zpoe$("311B92"),this.MD_DEEP_PURPLE_A100=this.fromHex_61zpoe$("B388FF"),this.MD_DEEP_PURPLE_A200=this.fromHex_61zpoe$("7C4DFF"),this.MD_DEEP_PURPLE_A400=this.fromHex_61zpoe$("651FFF"),this.MD_DEEP_PURPLE_A700=this.fromHex_61zpoe$("6200EA"),this.MD_DEEP_PURPLE=this.MD_DEEP_PURPLE_500,this.MD_INDIGO_50=this.fromHex_61zpoe$("E8EAF6"),this.MD_INDIGO_100=this.fromHex_61zpoe$("C5CAE9"),this.MD_INDIGO_200=this.fromHex_61zpoe$("9FA8DA"),this.MD_INDIGO_300=this.fromHex_61zpoe$("7986CB"),this.MD_INDIGO_400=this.fromHex_61zpoe$("5C6BC0"),this.MD_INDIGO_500=this.fromHex_61zpoe$("3F51B5"),this.MD_INDIGO_600=this.fromHex_61zpoe$("3949AB"),this.MD_INDIGO_700=this.fromHex_61zpoe$("303F9F"),this.MD_INDIGO_800=this.fromHex_61zpoe$("283593"),this.MD_INDIGO_900=this.fromHex_61zpoe$("1A237E"),this.MD_INDIGO_A100=this.fromHex_61zpoe$("8C9EFF"),this.MD_INDIGO_A200=this.fromHex_61zpoe$("536DFE"),this.MD_INDIGO_A400=this.fromHex_61zpoe$("3D5AFE"),this.MD_INDIGO_A700=this.fromHex_61zpoe$("304FFE"),this.MD_INDIGO=this.MD_INDIGO_500,this.MD_BLUE_50=this.fromHex_61zpoe$("E3F2FD"),this.MD_BLUE_100=this.fromHex_61zpoe$("BBDEFB"),this.MD_BLUE_200=this.fromHex_61zpoe$("90CAF9"),this.MD_BLUE_300=this.fromHex_61zpoe$("64B5F6"),this.MD_BLUE_400=this.fromHex_61zpoe$("42A5F5"),this.MD_BLUE_500=this.fromHex_61zpoe$("2196F3"),this.MD_BLUE_600=this.fromHex_61zpoe$("1E88E5"),this.MD_BLUE_700=this.fromHex_61zpoe$("1976D2"),this.MD_BLUE_800=this.fromHex_61zpoe$("1565C0"),this.MD_BLUE_900=this.fromHex_61zpoe$("0D47A1"),this.MD_BLUE_A100=this.fromHex_61zpoe$("82B1FF"),this.MD_BLUE_A200=this.fromHex_61zpoe$("448AFF"),this.MD_BLUE_A400=this.fromHex_61zpoe$("2979FF"),this.MD_BLUE_A700=this.fromHex_61zpoe$("2962FF"),this.MD_BLUE=this.MD_BLUE_500,this.MD_LIGHT_BLUE_50=this.fromHex_61zpoe$("E1F5FE"),this.MD_LIGHT_BLUE_100=this.fromHex_61zpoe$("B3E5FC"),this.MD_LIGHT_BLUE_200=this.fromHex_61zpoe$("81D4FA"),this.MD_LIGHT_BLUE_300=this.fromHex_61zpoe$("4FC3F7"),this.MD_LIGHT_BLUE_400=this.fromHex_61zpoe$("29B6F6"),this.MD_LIGHT_BLUE_500=this.fromHex_61zpoe$("03A9F4"),this.MD_LIGHT_BLUE_600=this.fromHex_61zpoe$("039BE5"),this.MD_LIGHT_BLUE_700=this.fromHex_61zpoe$("0288D1"),this.MD_LIGHT_BLUE_800=this.fromHex_61zpoe$("0277BD"),this.MD_LIGHT_BLUE_900=this.fromHex_61zpoe$("01579B"),this.MD_LIGHT_BLUE_A100=this.fromHex_61zpoe$("80D8FF"),this.MD_LIGHT_BLUE_A200=this.fromHex_61zpoe$("40C4FF"),this.MD_LIGHT_BLUE_A400=this.fromHex_61zpoe$("00B0FF"),this.MD_LIGHT_BLUE_A700=this.fromHex_61zpoe$("0091EA"),this.MD_LIGHT_BLUE=this.MD_LIGHT_BLUE_500,this.MD_CYAN_50=this.fromHex_61zpoe$("E0F7FA"),this.MD_CYAN_100=this.fromHex_61zpoe$("B2EBF2"),this.MD_CYAN_200=this.fromHex_61zpoe$("80DEEA"),this.MD_CYAN_300=this.fromHex_61zpoe$("4DD0E1"),this.MD_CYAN_400=this.fromHex_61zpoe$("26C6DA"),this.MD_CYAN_500=this.fromHex_61zpoe$("00BCD4"),this.MD_CYAN_600=this.fromHex_61zpoe$("00ACC1"),this.MD_CYAN_700=this.fromHex_61zpoe$("0097A7"),this.MD_CYAN_800=this.fromHex_61zpoe$("00838F"),this.MD_CYAN_900=this.fromHex_61zpoe$("006064"),this.MD_CYAN_A100=this.fromHex_61zpoe$("84FFFF"),this.MD_CYAN_A200=this.fromHex_61zpoe$("18FFFF"),this.MD_CYAN_A400=this.fromHex_61zpoe$("00E5FF"),this.MD_CYAN_A700=this.fromHex_61zpoe$("00B8D4"),this.MD_CYAN=this.MD_CYAN_500,this.MD_TEAL_50=this.fromHex_61zpoe$("E0F2F1"),this.MD_TEAL_100=this.fromHex_61zpoe$("B2DFDB"),this.MD_TEAL_200=this.fromHex_61zpoe$("80CBC4"),this.MD_TEAL_300=this.fromHex_61zpoe$("4DB6AC"),this.MD_TEAL_400=this.fromHex_61zpoe$("26A69A"),this.MD_TEAL_500=this.fromHex_61zpoe$("009688"),this.MD_TEAL_600=this.fromHex_61zpoe$("00897B"),this.MD_TEAL_700=this.fromHex_61zpoe$("00796B"),this.MD_TEAL_800=this.fromHex_61zpoe$("00695C"),this.MD_TEAL_900=this.fromHex_61zpoe$("004D40"),this.MD_TEAL_A100=this.fromHex_61zpoe$("A7FFEB"),this.MD_TEAL_A200=this.fromHex_61zpoe$("64FFDA"),this.MD_TEAL_A400=this.fromHex_61zpoe$("1DE9B6"),this.MD_TEAL_A700=this.fromHex_61zpoe$("00BFA5"),this.MD_TEAL=this.MD_TEAL_500,this.MD_GREEN_50=this.fromHex_61zpoe$("E8F5E9"),this.MD_GREEN_100=this.fromHex_61zpoe$("C8E6C9"),this.MD_GREEN_200=this.fromHex_61zpoe$("A5D6A7"),this.MD_GREEN_300=this.fromHex_61zpoe$("81C784"),this.MD_GREEN_400=this.fromHex_61zpoe$("66BB6A"),this.MD_GREEN_500=this.fromHex_61zpoe$("4CAF50"),this.MD_GREEN_600=this.fromHex_61zpoe$("43A047"),this.MD_GREEN_700=this.fromHex_61zpoe$("388E3C"),this.MD_GREEN_800=this.fromHex_61zpoe$("2E7D32"),this.MD_GREEN_900=this.fromHex_61zpoe$("1B5E20"),this.MD_GREEN_A100=this.fromHex_61zpoe$("B9F6CA"),this.MD_GREEN_A200=this.fromHex_61zpoe$("69F0AE"),this.MD_GREEN_A400=this.fromHex_61zpoe$("00E676"),this.MD_GREEN_A700=this.fromHex_61zpoe$("00C853"),this.MD_GREEN=this.MD_GREEN_500,this.MD_LIGHT_GREEN_50=this.fromHex_61zpoe$("F1F8E9"),this.MD_LIGHT_GREEN_100=this.fromHex_61zpoe$("DCEDC8"),this.MD_LIGHT_GREEN_200=this.fromHex_61zpoe$("C5E1A5"),this.MD_LIGHT_GREEN_300=this.fromHex_61zpoe$("AED581"),this.MD_LIGHT_GREEN_400=this.fromHex_61zpoe$("9CCC65"),this.MD_LIGHT_GREEN_500=this.fromHex_61zpoe$("8BC34A"),this.MD_LIGHT_GREEN_600=this.fromHex_61zpoe$("7CB342"),this.MD_LIGHT_GREEN_700=this.fromHex_61zpoe$("689F38"),this.MD_LIGHT_GREEN_800=this.fromHex_61zpoe$("558B2F"),this.MD_LIGHT_GREEN_900=this.fromHex_61zpoe$("33691E"),this.MD_LIGHT_GREEN_A100=this.fromHex_61zpoe$("CCFF90"),this.MD_LIGHT_GREEN_A200=this.fromHex_61zpoe$("B2FF59"),this.MD_LIGHT_GREEN_A400=this.fromHex_61zpoe$("76FF03"),this.MD_LIGHT_GREEN_A700=this.fromHex_61zpoe$("64DD17"),this.MD_LIGHT_GREEN=this.MD_LIGHT_GREEN_500,this.MD_LIME_50=this.fromHex_61zpoe$("F9FBE7"),this.MD_LIME_100=this.fromHex_61zpoe$("F0F4C3"),this.MD_LIME_200=this.fromHex_61zpoe$("E6EE9C"),this.MD_LIME_300=this.fromHex_61zpoe$("DCE775"),this.MD_LIME_400=this.fromHex_61zpoe$("D4E157"),this.MD_LIME_500=this.fromHex_61zpoe$("CDDC39"),this.MD_LIME_600=this.fromHex_61zpoe$("C0CA33"),this.MD_LIME_700=this.fromHex_61zpoe$("AFB42B"),this.MD_LIME_800=this.fromHex_61zpoe$("9E9D24"),this.MD_LIME_900=this.fromHex_61zpoe$("827717"),this.MD_LIME_A100=this.fromHex_61zpoe$("F4FF81"),this.MD_LIME_A200=this.fromHex_61zpoe$("EEFF41"),this.MD_LIME_A400=this.fromHex_61zpoe$("C6FF00"),this.MD_LIME_A700=this.fromHex_61zpoe$("AEEA00"),this.MD_LIME=this.MD_LIME_500,this.MD_YELLOW_50=this.fromHex_61zpoe$("FFFDE7"),this.MD_YELLOW_100=this.fromHex_61zpoe$("FFF9C4"),this.MD_YELLOW_200=this.fromHex_61zpoe$("FFF59D"),this.MD_YELLOW_300=this.fromHex_61zpoe$("FFF176"),this.MD_YELLOW_400=this.fromHex_61zpoe$("FFEE58"),this.MD_YELLOW_500=this.fromHex_61zpoe$("FFEB3B"),this.MD_YELLOW_600=this.fromHex_61zpoe$("FDD835"),this.MD_YELLOW_700=this.fromHex_61zpoe$("FBC02D"),this.MD_YELLOW_800=this.fromHex_61zpoe$("F9A825"),this.MD_YELLOW_900=this.fromHex_61zpoe$("F57F17"),this.MD_YELLOW_A100=this.fromHex_61zpoe$("FFFF8D"),this.MD_YELLOW_A200=this.fromHex_61zpoe$("FFFF00"),this.MD_YELLOW_A400=this.fromHex_61zpoe$("FFEA00"),this.MD_YELLOW_A700=this.fromHex_61zpoe$("FFD600"),this.MD_YELLOW=this.MD_YELLOW_500,this.MD_AMBER_50=this.fromHex_61zpoe$("FFF8E1"),this.MD_AMBER_100=this.fromHex_61zpoe$("FFECB3"),this.MD_AMBER_200=this.fromHex_61zpoe$("FFE082"),this.MD_AMBER_300=this.fromHex_61zpoe$("FFD54F"),this.MD_AMBER_400=this.fromHex_61zpoe$("FFCA28"),this.MD_AMBER_500=this.fromHex_61zpoe$("FFC107"),this.MD_AMBER_600=this.fromHex_61zpoe$("FFB300"),this.MD_AMBER_700=this.fromHex_61zpoe$("FFA000"),this.MD_AMBER_800=this.fromHex_61zpoe$("FF8F00"),this.MD_AMBER_900=this.fromHex_61zpoe$("FF6F00"),this.MD_AMBER_A100=this.fromHex_61zpoe$("FFE57F"),this.MD_AMBER_A200=this.fromHex_61zpoe$("FFD740"),this.MD_AMBER_A400=this.fromHex_61zpoe$("FFC400"),this.MD_AMBER_A700=this.fromHex_61zpoe$("FFAB00"),this.MD_AMBER=this.MD_AMBER_500,this.MD_ORANGE_50=this.fromHex_61zpoe$("FFF3E0"),this.MD_ORANGE_100=this.fromHex_61zpoe$("FFE0B2"),this.MD_ORANGE_200=this.fromHex_61zpoe$("FFCC80"),this.MD_ORANGE_300=this.fromHex_61zpoe$("FFB74D"),this.MD_ORANGE_400=this.fromHex_61zpoe$("FFA726"),this.MD_ORANGE_500=this.fromHex_61zpoe$("FF9800"),this.MD_ORANGE_600=this.fromHex_61zpoe$("FB8C00"),this.MD_ORANGE_700=this.fromHex_61zpoe$("F57C00"),this.MD_ORANGE_800=this.fromHex_61zpoe$("EF6C00"),this.MD_ORANGE_900=this.fromHex_61zpoe$("E65100"),this.MD_ORANGE_A100=this.fromHex_61zpoe$("FFD180"),this.MD_ORANGE_A200=this.fromHex_61zpoe$("FFAB40"),this.MD_ORANGE_A400=this.fromHex_61zpoe$("FF9100"),this.MD_ORANGE_A700=this.fromHex_61zpoe$("FF6D00"),this.MD_ORANGE=this.MD_ORANGE_500,this.MD_DEEP_ORANGE_50=this.fromHex_61zpoe$("FBE9E7"),this.MD_DEEP_ORANGE_100=this.fromHex_61zpoe$("FFCCBC"),this.MD_DEEP_ORANGE_200=this.fromHex_61zpoe$("FFAB91"),this.MD_DEEP_ORANGE_300=this.fromHex_61zpoe$("FF8A65"),this.MD_DEEP_ORANGE_400=this.fromHex_61zpoe$("FF7043"),this.MD_DEEP_ORANGE_500=this.fromHex_61zpoe$("FF5722"),this.MD_DEEP_ORANGE_600=this.fromHex_61zpoe$("F4511E"),this.MD_DEEP_ORANGE_700=this.fromHex_61zpoe$("E64A19"),this.MD_DEEP_ORANGE_800=this.fromHex_61zpoe$("D84315"),this.MD_DEEP_ORANGE_900=this.fromHex_61zpoe$("BF360C"),this.MD_DEEP_ORANGE_A100=this.fromHex_61zpoe$("FF9E80"),this.MD_DEEP_ORANGE_A200=this.fromHex_61zpoe$("FF6E40"),this.MD_DEEP_ORANGE_A400=this.fromHex_61zpoe$("FF3D00"),this.MD_DEEP_ORANGE_A700=this.fromHex_61zpoe$("DD2C00"),this.MD_DEEP_ORANGE=this.MD_DEEP_ORANGE_500,this.MD_BROWN_50=this.fromHex_61zpoe$("EFEBE9"),this.MD_BROWN_100=this.fromHex_61zpoe$("D7CCC8"),this.MD_BROWN_200=this.fromHex_61zpoe$("BCAAA4"),this.MD_BROWN_300=this.fromHex_61zpoe$("A1887F"),this.MD_BROWN_400=this.fromHex_61zpoe$("8D6E63"),this.MD_BROWN_500=this.fromHex_61zpoe$("795548"),this.MD_BROWN_600=this.fromHex_61zpoe$("6D4C41"),this.MD_BROWN_700=this.fromHex_61zpoe$("5D4037"),this.MD_BROWN_800=this.fromHex_61zpoe$("4E342E"),this.MD_BROWN_900=this.fromHex_61zpoe$("3E2723"),this.MD_BROWN=this.MD_BROWN_500,this.MD_GREY_50=this.fromHex_61zpoe$("FAFAFA"),this.MD_GREY_100=this.fromHex_61zpoe$("F5F5F5"),this.MD_GREY_200=this.fromHex_61zpoe$("EEEEEE"),this.MD_GREY_300=this.fromHex_61zpoe$("E0E0E0"),this.MD_GREY_400=this.fromHex_61zpoe$("BDBDBD"),this.MD_GREY_500=this.fromHex_61zpoe$("9E9E9E"),this.MD_GREY_600=this.fromHex_61zpoe$("757575"),this.MD_GREY_700=this.fromHex_61zpoe$("616161"),this.MD_GREY_800=this.fromHex_61zpoe$("424242"),this.MD_GREY_900=this.fromHex_61zpoe$("212121"),this.MD_GREY=this.MD_GREY_500,this.MD_BLUE_GREY_50=this.fromHex_61zpoe$("ECEFF1"),this.MD_BLUE_GREY_100=this.fromHex_61zpoe$("CFD8DC"),this.MD_BLUE_GREY_200=this.fromHex_61zpoe$("B0BEC5"),this.MD_BLUE_GREY_300=this.fromHex_61zpoe$("90A4AE"),this.MD_BLUE_GREY_400=this.fromHex_61zpoe$("78909C"),this.MD_BLUE_GREY_500=this.fromHex_61zpoe$("607D8B"),this.MD_BLUE_GREY_600=this.fromHex_61zpoe$("546E7A"),this.MD_BLUE_GREY_700=this.fromHex_61zpoe$("455A64"),this.MD_BLUE_GREY_800=this.fromHex_61zpoe$("37474F"),this.MD_BLUE_GREY_900=this.fromHex_61zpoe$("263238"),this.MD_BLUE_GREY=this.MD_BLUE_GREY_500,this.MD_COLORS=At([this.MD_RED,this.MD_PINK,this.MD_PURPLE,this.MD_DEEP_PURPLE,this.MD_INDIGO,this.MD_BLUE,this.MD_LIGHT_BLUE,this.MD_CYAN,this.MD_TEAL,this.MD_GREEN,this.MD_LIGHT_GREEN,this.MD_LIME,this.MD_YELLOW,this.MD_AMBER,this.MD_ORANGE,this.MD_DEEP_ORANGE,this.MD_BROWN,this.MD_GREY,this.MD_BLUE_GREY])}yy.prototype.setup_llmhyc$=function(t){var e;rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inTexCoords),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],(e=this,function(t){return t.unaryPlus_wq3w46$(function(t){return function(){return t.uAtmosphereRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uSurfaceRadius}}(e)),t.unaryPlus_wq3w46$(function(t){return function(){return t.uDensityFalloff}}(e)),s}))},yy.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("rayLength","\n                float rayLength(vec3 rayOrigin, vec3 rayDir) {\n                    float a = dot(rayDir, rayDir);\n                    float b = 2.0 * dot(rayDir, rayOrigin);\n                    float c = dot(rayOrigin, rayOrigin) - "+this.uAtmosphereRadius+" * "+this.uAtmosphereRadius+";\n                    \n                    float discriminant = b * b - 4.0 * a * c;\n                    if (discriminant < 0.0) {\n                        return -1.0;\n                    } else {\n                        float q = -0.5 * (b + sign(b) * sqrt(discriminant));\n                        float t1 = q / a;\n                        float t2 = c / q;\n                        return max(t1, t2);\n                    }\n                }\n            "),t.appendFunction_puj7f4$("densityAtAltitude","\n                float densityAtAltitude(float altitude) {\n                    float nH = clamp(altitude / ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+"), 0.0, 1.0);\n\n                    // exponential density\n                    //float h = nH;\n\n                    // exponential density with cut-off\n                    //float cutOff = 0.2;\n                    //float h = nH * (1.0 - cutOff) + cutOff;\n                    \n                    // reduced density at low altitudes\n                    float x = nH * 10.0;\n                    float f = 0.3 * (2.0 + 3.0 * x * exp(-x)) * (10.0 - x) / 10.0;\n                    float h = 1.0 - f;\n                    \n                    return exp(-clamp(h, 0.0, 1.0) * "+this.uDensityFalloff+") * (1.0 - smoothstep(0.0, 1.0, nH));\n                }\n            "),t.appendFunction_puj7f4$("opticalDepth","\n                float opticalDepth(vec3 origin, vec3 dir, float rayLength) {\n                    vec3 samplePt = origin;\n                    float stepSize = rayLength / float(101);\n                    float opticalDepth = 0.0;\n                    for (int i = 0; i < 100; i++) {\n                        samplePt += dir * stepSize;\n                        opticalDepth += densityAtAltitude(length(samplePt) - "+this.uSurfaceRadius+") * stepSize;\n                    }\n                    return opticalDepth;\n                }\n            "),t.appendMain_61zpoe$("\n                float cosAngle = "+this.inTexCoords.ref2f_61zpoe$()+".x * 2.0 - 1.0;\n                float altitude = "+this.inTexCoords.ref2f_61zpoe$()+".y * ("+this.uAtmosphereRadius+" - "+this.uSurfaceRadius+");\n                \n                vec3 origin = vec3("+this.uSurfaceRadius+" + altitude, 0.0, 0.0);\n                vec3 direction = vec3(cosAngle, sin(acos(cosAngle)), 0.0);\n                \n                float shift = "+this.uAtmosphereRadius+" * 2.0;\n                float rayLen = rayLength(origin - direction * shift, direction) - shift;\n                float opticalDepth = opticalDepth(origin, direction, rayLen);\n                \n                "+this.outColor.declare()+" = vec4(opticalDepth, densityAtAltitude(altitude), 0.0, 1.0);\n            ")},yy.$metadata$={kind:$,simpleName:"OpticalDepthLutNode",interfaces:[rp]},fy.$metadata$={kind:$,simpleName:"OpticalDepthLutPass",interfaces:[$a]},Object.defineProperty(gy.prototype,"isEmpty",{configurable:!0,get:function(){return this.isEmpty_xiuk4h$_0},set:function(t){this.isEmpty_xiuk4h$_0=t}}),Object.defineProperty(gy.prototype,"isBatchUpdate",{configurable:!0,get:function(){return this.isBatchUpdate_4nlnat$_0},set:function(t){this.isBatchUpdate_4nlnat$_0=t,t||this.updateSizeAndCenter_0()}}),gy.prototype.updateSizeAndCenter_0=function(){this.isBatchUpdate||(this.mutMax_0.subtract_2gj7b4$(this.mutMin_0,this.mutSize_0),this.size.scale_749b8l$(.5,this.mutCenter_0).add_czzhiu$(this.min))},gy.prototype.addPoint_0=function(t){this.isEmpty?(this.mutMin_0.set_czzhiu$(t),this.mutMax_0.set_czzhiu$(t),this.isEmpty=!1):(t.x<this.min.x&&(this.mutMin_0.x=t.x),t.y<this.min.y&&(this.mutMin_0.y=t.y),t.z<this.min.z&&(this.mutMin_0.z=t.z),t.x>this.max.x&&(this.mutMax_0.x=t.x),t.y>this.max.y&&(this.mutMax_0.y=t.y),t.z>this.max.z&&(this.mutMax_0.z=t.z))},gy.prototype.batchUpdate_xanadp$=X("kool-kool-core.de.fabmax.kool.util.BoundingBox.batchUpdate_xanadp$",(function(t){var e=this.isBatchUpdate;this.isBatchUpdate=!0,t(this),this.isBatchUpdate=e})),gy.prototype.isFuzzyEqual_ea4od8$=function(t){return this.isEmpty===t.isEmpty&&this.min.isFuzzyEqual_2qa7tb$(t.min)&&this.max.isFuzzyEqual_2qa7tb$(t.max)},gy.prototype.clear=function(){return this.isEmpty=!0,this.mutMin_0.set_czzhiu$(Er().ZERO),this.mutMax_0.set_czzhiu$(Er().ZERO),this.updateSizeAndCenter_0(),this},gy.prototype.add_czzhiu$=function(t){return this.addPoint_0(t),this.updateSizeAndCenter_0(),this},gy.prototype.add_uqk38n$=function(t){return this.add_3y53ni$(t,R(t)),this},gy.prototype.add_3y53ni$=function(t,e){var i,n,r;i=e.first,n=e.last,r=e.step;for(var o=i;o<=n;o+=r)this.addPoint_0(t.get_za3lpa$(o));return this.updateSizeAndCenter_0(),this},gy.prototype.add_ea4od8$=function(t){return t.isEmpty||(this.addPoint_0(t.min),this.addPoint_0(t.max),this.updateSizeAndCenter_0()),this},gy.prototype.expand_czzhiu$=function(t){if(this.isEmpty)throw cn("Empty BoundingBox cannot be expanded");return this.mutMin_0.minusAssign_czzhiu$(t),this.mutMax_0.plusAssign_czzhiu$(t),this.updateSizeAndCenter_0(),this},gy.prototype.signedExpand_czzhiu$=function(t){if(this.isEmpty)throw cn("Empty BoundingBox cannot be expanded");return t.x>0?this.mutMax_0.x=this.mutMax_0.x+t.x:this.mutMin_0.x=this.mutMin_0.x+t.x,t.y>0?this.mutMax_0.y=this.mutMax_0.y+t.y:this.mutMin_0.y=this.mutMin_0.y+t.y,t.z>0?this.mutMax_0.z=this.mutMax_0.z+t.z:this.mutMin_0.z=this.mutMin_0.z+t.z,this.updateSizeAndCenter_0(),this},gy.prototype.set_ea4od8$=function(t){return this.mutMin_0.set_czzhiu$(t.min),this.mutMax_0.set_czzhiu$(t.max),this.mutSize_0.set_czzhiu$(t.size),this.mutCenter_0.set_czzhiu$(t.center),this.isEmpty=t.isEmpty,this},gy.prototype.set_4lfkt4$=function(t,e){return this.isEmpty=!1,this.mutMin_0.set_czzhiu$(t),this.mutMax_0.set_czzhiu$(e),this.updateSizeAndCenter_0(),this},gy.prototype.set_w8lrqs$=function(t,e,i,n,r,o){return this.isEmpty=!1,this.mutMin_0.set_y2kzbl$(t,e,i),this.mutMax_0.set_y2kzbl$(n,r,o),this.updateSizeAndCenter_0(),this},gy.prototype.move_czzhiu$=function(t){return this.move_y2kzbl$(t.x,t.y,t.z)},gy.prototype.move_y2kzbl$=function(t,e,i){if(this.isEmpty)throw cn("Empty BoundingBox cannot be moved");return this.mutMin_0.x=this.mutMin_0.x+t,this.mutMin_0.y=this.mutMin_0.y+e,this.mutMin_0.z=this.mutMin_0.z+i,this.mutMax_0.x=this.mutMax_0.x+t,this.mutMax_0.y=this.mutMax_0.y+e,this.mutMax_0.z=this.mutMax_0.z+i,this.mutCenter_0.x=this.mutCenter_0.x+t,this.mutCenter_0.y=this.mutCenter_0.y+e,this.mutCenter_0.z=this.mutCenter_0.z+i,this},gy.prototype.setMerged_hnxjto$=function(t,e){var i=this.mutMin_0,n=t.min.x,r=e.min.x;i.x=A.min(n,r);var o=this.mutMin_0,s=t.min.y,a=e.min.y;o.y=A.min(s,a);var l=this.mutMin_0,u=t.min.z,p=e.min.z;l.z=A.min(u,p);var c=this.mutMax_0,h=t.max.x,d=e.max.x;c.x=A.max(h,d);var f=this.mutMax_0,_=t.max.y,m=e.max.y;f.y=A.max(_,m);var $=this.mutMax_0,y=t.max.z,v=e.max.z;return $.z=A.max(y,v),this.isEmpty=!1,this.updateSizeAndCenter_0(),this},gy.prototype.contains_czzhiu$=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z},gy.prototype.contains_y2kzbl$=function(t,e,i){return t>=this.min.x&&t<=this.max.x&&e>=this.min.y&&e<=this.max.y&&i>=this.min.z&&i<=this.max.z},gy.prototype.contains_ea4od8$=function(t){return this.contains_czzhiu$(t.min)&&this.contains_czzhiu$(t.max)},gy.prototype.isIntersecting_ea4od8$=function(t){return this.min.x<=t.max.x&&this.max.x>=t.min.x&&this.min.y<=t.max.y&&this.max.y>=t.min.y&&this.min.z<=t.max.z&&this.max.z>=t.min.z},gy.prototype.clampToBounds_5s4mqq$=function(t){var e,i=t.x,n=this.min.x,r=this.max.x;e=i<n?n:i>r?r:i,t.x=e;var o,s=t.y,a=this.min.y,l=this.max.y;o=s<a?a:s>l?l:s,t.y=o;var u,p=t.z,c=this.min.z,h=this.max.z;u=p<c?c:p>h?h:p,t.z=u},gy.prototype.clampToBounds_5s4mqs$=function(t){var e,i=t.x,n=this.min.x,r=this.max.x;e=i<n?n:i>r?r:i,t.x=e;var o,s=t.y,a=this.min.y,l=this.max.y;o=s<a?a:s>l?l:s,t.y=o;var u,p=t.z,c=this.min.z,h=this.max.z;u=p<c?c:p>h?h:p,t.z=u},gy.prototype.pointDistance_czzhiu$=function(t){var e=this.pointDistanceSqr_czzhiu$(t);return A.sqrt(e)},gy.prototype.pointDistanceSqr_czzhiu$=function(t){if(this.contains_czzhiu$(t))return 0;var e=0,i=0,n=0,r=t.x-this.min.x;return(r<0||(r=this.max.x-t.x)<0)&&(e=r),((r=t.y-this.min.y)<0||(r=this.max.y-t.y)<0)&&(i=r),((r=t.z-this.min.z)<0||(r=this.max.z-t.z)<0)&&(n=r),e*e+i*i+n*n},gy.prototype.hitDistanceSqr_nvyeur$=function(t){var e,i,n,r,o,s;if(this.isEmpty)return ot.MAX_VALUE;if(this.contains_czzhiu$(t.origin))return 0;var a=1/t.direction.x;if(a>=0?(e=(this.min.x-t.origin.x)*a,i=(this.max.x-t.origin.x)*a):(e=(this.max.x-t.origin.x)*a,i=(this.min.x-t.origin.x)*a),(a=1/t.direction.y)>=0?(n=(this.min.y-t.origin.y)*a,r=(this.max.y-t.origin.y)*a):(n=(this.max.y-t.origin.y)*a,r=(this.min.y-t.origin.y)*a),e>r||n>i)return ot.MAX_VALUE;if(n>e&&(e=n),r<i&&(i=r),(a=1/t.direction.z)>=0?(o=(this.min.z-t.origin.z)*a,s=(this.max.z-t.origin.z)*a):(o=(this.max.z-t.origin.z)*a,s=(this.min.z-t.origin.z)*a),e>s||o>i)return ot.MAX_VALUE;if(o>e&&(e=o),e>0){var l=t.direction.x*e,u=l*l;return u+=(l=t.direction.y*e)*l,(u+=(l=t.direction.z*e)*l)/t.direction.sqrLength()}return ot.MAX_VALUE},gy.prototype.toString=function(){return this.isEmpty?"[empty]":"[min="+this.min+", max="+this.max+"]"},gy.prototype.equals=function(t){var i,n;return this===t||!!e.isType(t,gy)&&this.isEmpty===t.isEmpty&&!(null==(i=this.min)||!i.equals(t.min))&&!(null==(n=this.max)||!n.equals(t.max))},gy.prototype.hashCode=function(){var t=st(this.isEmpty);return t=(31*(t=(31*t|0)+this.min.hashCode()|0)|0)+this.max.hashCode()|0},gy.$metadata$={kind:$,simpleName:"BoundingBox",interfaces:[]},by.prototype.removeAt_za3lpa$=function(t){this.position>t&&(this.position=this.position-1|0),this.limit>t&&(this.limit=this.limit-1|0)},by.$metadata$={kind:Y,simpleName:"Buffer",interfaces:[]},xy.prototype.plusAssign_s8j3t7$=function(t){this.put_s8j3t7$(t)},xy.prototype.put_fqrh44$=function(t){return this.put_mj6st8$(t,0,t.length)},xy.prototype.toArray=function(){var t,e=new Int8Array(this.capacity);t=this.capacity;for(var i=0;i<t;i++)e[i]=this.get_za3lpa$(i);return e},xy.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_6t1wet$(i,this.get_za3lpa$(i+1|0));by.prototype.removeAt_za3lpa$.call(this,t)},xy.$metadata$={kind:Y,simpleName:"Uint8Buffer",interfaces:[by]},wy.prototype.plusAssign_mq22fl$=function(t){this.put_mq22fl$(t)},wy.prototype.put_gmedm2$=function(t){return this.put_359eei$(t,0,t.length)},wy.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_2bqt6h$(i,this.get_za3lpa$(i+1|0));by.prototype.removeAt_za3lpa$.call(this,t)},wy.$metadata$={kind:Y,simpleName:"Uint16Buffer",interfaces:[by]},zy.prototype.plusAssign_za3lpa$=function(t){this.put_za3lpa$(t)},zy.prototype.put_q5rwfd$=function(t){return this.put_nd5v6f$(t,0,t.length)},zy.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_vux9f0$(i,this.get_za3lpa$(i+1|0));by.prototype.removeAt_za3lpa$.call(this,t)},zy.$metadata$={kind:Y,simpleName:"Uint32Buffer",interfaces:[by]},ky.prototype.plusAssign_mx4ult$=function(t){this.put_mx4ult$(t)},ky.prototype.put_q3cr5i$=function(t){return this.put_kgymra$(t,0,t.length)},ky.prototype.removeAt_za3lpa$=function(t){var e;e=this.position;for(var i=t;i<e;i++)this.set_24o109$(i,this.get_za3lpa$(i+1|0));by.prototype.removeAt_za3lpa$.call(this,t)},ky.$metadata$={kind:Y,simpleName:"Float32Buffer",interfaces:[by]},Sy.prototype.putInt8_s8j3t7$=function(t){return this.putUint8_s8j3t7$(t)},Sy.prototype.putInt8_fqrh44$=function(t){return this.putUint8_fqrh44$(t)},Sy.prototype.putInt8_mj6st8$=function(t,e,i){return this.putUint8_mj6st8$(t,e,i)},Sy.prototype.putInt8_ay2i3f$=function(t){return this.putUint8_ay2i3f$(t)},Sy.prototype.putInt16_mq22fl$=function(t){return this.putUint16_mq22fl$(t)},Sy.prototype.putInt16_gmedm2$=function(t){return this.putUint16_gmedm2$(t)},Sy.prototype.putInt16_359eei$=function(t,e,i){return this.putUint16_359eei$(t,e,i)},Sy.prototype.putInt16_8k344i$=function(t){return this.putUint16_8k344i$(t)},Sy.prototype.putInt32_za3lpa$=function(t){return this.putUint32_za3lpa$(t)},Sy.prototype.putInt32_q5rwfd$=function(t){return this.putUint32_q5rwfd$(t)},Sy.prototype.putInt32_nd5v6f$=function(t,e,i){return this.putUint32_nd5v6f$(t,e,i)},Sy.prototype.putInt32_7hqxcs$=function(t){return this.putUint32_7hqxcs$(t)},Sy.prototype.putUint8_fqrh44$=function(t){return this.putUint8_mj6st8$(t,0,t.length)},Sy.prototype.putUint16_gmedm2$=function(t){return this.putUint16_359eei$(t,0,t.length)},Sy.prototype.putUint32_q5rwfd$=function(t){return this.putUint32_nd5v6f$(t,0,t.length)},Sy.prototype.putFloat32_q3cr5i$=function(t){return this.putFloat32_kgymra$(t,0,t.length)},Sy.prototype.removeAt_za3lpa$=function(t){throw cn("MixedBuffer does not support element removal")},Sy.$metadata$={kind:Y,simpleName:"MixedBuffer",interfaces:[by]},Object.defineProperty(Ey.prototype,"r",{configurable:!0,get:function(){return this.get_za3lpa$(0)}}),Object.defineProperty(Ey.prototype,"g",{configurable:!0,get:function(){return this.get_za3lpa$(1)}}),Object.defineProperty(Ey.prototype,"b",{configurable:!0,get:function(){return this.get_za3lpa$(2)}}),Object.defineProperty(Ey.prototype,"a",{configurable:!0,get:function(){return this.get_za3lpa$(3)}}),Ey.prototype.mix_y83vuj$=function(t,e){return this.mix_jpxij3$(t,e,jy())},Ey.prototype.mix_jpxij3$=function(t,e,i){return i.r=t.r*e+this.r*(1-e),i.g=t.g*e+this.g*(1-e),i.b=t.b*e+this.b*(1-e),i.a=t.a*e+this.a*(1-e),i},Ey.prototype.withAlpha_mx4ult$=function(t){return new My(this.r,this.g,this.b,t)},Ey.prototype.toLinear=function(){return this.gamma_mx4ult$(2.2)},Ey.prototype.toLinear_b0h0gw$=function(t){return this.gamma_ccloyr$(2.2,t)},Ey.prototype.toSrgb=function(){return this.gamma_mx4ult$(1/2.2)},Ey.prototype.toSrgb_b0h0gw$=function(t){return this.gamma_ccloyr$(1/2.2,t)},Ey.prototype.gamma_mx4ult$=function(t){return this.gamma_ccloyr$(t,jy())},Ey.prototype.gamma_ccloyr$=function(t,e){var i=this.r,n=A.pow(i,t),r=this.g,o=A.pow(r,t),s=this.b;return e.set_7b5o5w$(n,o,A.pow(s,t),this.a)},Ty.prototype.fromHsv_7b5o5w$=function(t,e,i,n){return jy().setHsv_7b5o5w$(t,e,i,n)},Ty.prototype.fromHex_61zpoe$=function(t){if(0===t.length)return this.BLACK;var i=t;35===i.charCodeAt(0)&&(i=i.substring(1));var n=0,r=0,o=0,s=1;try{if(3===i.length){var a=pe(i.substring(0,1),16),l=pe(i.substring(1,2),16),u=pe(i.substring(2,3),16);n=(a|a<<4)/255,r=(l|l<<4)/255,o=(u|u<<4)/255}else if(4===i.length){var p=pe(i.substring(0,1),16),c=pe(i.substring(1,2),16),h=pe(i.substring(2,3),16),d=pe(i.substring(2,3),16);n=(p|p<<4)/255,r=(c|c<<4)/255,o=(h|h<<4)/255,s=(d|d<<4)/255}else 6===i.length?(n=pe(i.substring(0,2),16)/255,r=pe(i.substring(2,4),16)/255,o=pe(i.substring(4,6),16)/255):8===i.length&&(n=pe(i.substring(0,2),16)/255,r=pe(i.substring(2,4),16)/255,o=pe(i.substring(4,6),16)/255,s=pe(i.substring(6,8),16)/255)}catch(i){if(!e.isType(i,ce))throw i;var f=DE.Log,_=$k.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"invalid color code: "+t+", "+i)}return new Ey(n,r,o,s)},Ty.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Py=null;function Oy(){return null===Py&&new Ty,Py}function My(t,e,i,n){Ey.call(this,t,e,i,n)}function jy(t){return t=t||Object.create(My.prototype),My.call(t,0,0,0,1),t}function Ay(t,e){return e=e||Object.create(My.prototype),My.call(e,t.r,t.g,t.b,t.a),e}Ey.$metadata$={kind:$,simpleName:"Color",interfaces:[Yr]},Object.defineProperty(My.prototype,"r",{configurable:!0,get:function(){return this.get_za3lpa$(0)},set:function(t){this.set_24o109$(0,t)}}),Object.defineProperty(My.prototype,"g",{configurable:!0,get:function(){return this.get_za3lpa$(1)},set:function(t){this.set_24o109$(1,t)}}),Object.defineProperty(My.prototype,"b",{configurable:!0,get:function(){return this.get_za3lpa$(2)},set:function(t){this.set_24o109$(2,t)}}),Object.defineProperty(My.prototype,"a",{configurable:!0,get:function(){return this.get_za3lpa$(3)},set:function(t){this.set_24o109$(3,t)}}),Object.defineProperty(My.prototype,"array",{configurable:!0,get:function(){return this.fields}}),My.prototype.add_czzhhz$=function(t){return this.r=this.r+t.x,this.g=this.g+t.y,this.b=this.b+t.z,this.a=this.a+t.w,this},My.prototype.add_m79ulu$=function(t,e){return this.r=this.r+t.x*e,this.g=this.g+t.y*e,this.b=this.b+t.z*e,this.a=this.a+t.w*e,this},My.prototype.subtract_czzhhz$=function(t){return this.r=this.r-t.x,this.g=this.g-t.y,this.b=this.b-t.z,this.a=this.a-t.w,this},My.prototype.scale_mx4ult$=function(t){return this.r=this.r*t,this.g=this.g*t,this.b=this.b*t,this.a=this.a*t,this},My.prototype.scaleRgb_mx4ult$=function(t){return this.r=this.r*t,this.g=this.g*t,this.b=this.b*t,this},My.prototype.clear=function(){return this.set_7b5o5w$(0,0,0,0),this},My.prototype.set_7b5o5w$=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this},My.prototype.set_czzhhz$=function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this.a=t.w,this},My.prototype.set_24o109$=function(t,e){this.fields[t]=e},My.prototype.setHsv_7b5o5w$=function(t,e,i,n){var r=t%360;r<0&&(r+=360);var o=B(r/60),s=r/60-o,a=i*(1-e),l=i*(1-e*s),u=i*(1-e*(1-s));switch(o){case 1:this.set_7b5o5w$(l,i,a,n);break;case 2:this.set_7b5o5w$(a,i,u,n);break;case 3:this.set_7b5o5w$(a,l,i,n);break;case 4:this.set_7b5o5w$(u,a,i,n);break;case 5:this.set_7b5o5w$(i,a,l,n);break;default:this.set_7b5o5w$(i,u,a,n)}return this},My.$metadata$={kind:$,simpleName:"MutableColor",interfaces:[Ey]};var Iy=K((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function Ry(t,e){Vy(),void 0===e&&(e=256);var i,n,r,o,s,a=I(e);i=a.length-1|0;for(var l=0;l<=i;l++)a[l]=jy();if(this.gradient_0=a,t.length<2)throw cn("ColorGradient requires at least two colors");t.length>1&&_e(t,new yt(Iy(Gy)));var u=de(t).first,p=fe(t).first,c=0,h=t[(n=c,c=n+1|0,n)],d=t[(r=c,c=r+1|0,r)];o=e;for(var f=0;f<o;f++){for(var _=f/(e-1)*(p-u)+u;_>d.first;){h=d;var m=(c=(s=c)+1|0,s);d=t[A.min(m,t.length)]}var $=1-(_-h.first)/(d.first-h.first);this.gradient_0[f].set_czzhhz$(h.second).scale_mx4ult$($).add_m79ulu$(d.second,1-$)}}function Ly(){Uy=this,this.DEFAULT_N=256,this.JET=Hy([Oy().BLUE,Oy().CYAN,Oy().GREEN,Oy().YELLOW,Oy().RED,Oy().MAGENTA]),this.JET_MD=Hy([Oy().MD_BLUE,Oy().MD_CYAN,Oy().MD_GREEN,Oy().MD_YELLOW,Oy().MD_RED,Oy().MD_PURPLE]),this.RED_YELLOW_GREEN=Hy([Oy().RED,Oy().YELLOW,Oy().GREEN]),this.RED_YELLOW_GREEN_MD=Hy([Oy().MD_RED,Oy().MD_YELLOW,Oy().MD_GREEN]),this.RED_WHITE_BLUE=new Ry([_t(0,new Ey(.35,0,0,1)),_t(.35,new Ey(.81,.39,0,1)),_t(.5,Oy().WHITE),_t(.75,new Ey(0,.5,1,1)),_t(1,new Ey(0,.18,.47,1))]),this.PLASMA=Hy([new Ey(.0504,.0298,.528,1),new Ey(.1324,.0223,.5633,1),new Ey(.1934,.0184,.5903,1),new Ey(.2546,.0139,.6154,1),new Ey(.3062,.0089,.6337,1),new Ey(.3564,.0038,.6478,1),new Ey(.4055,7e-4,.657,1),new Ey(.4596,.0036,.6603,1),new Ey(.5065,.0163,.6562,1),new Ey(.5517,.0431,.6453,1),new Ey(.595,.0772,.6279,1),new Ey(.636,.1121,.6052,1),new Ey(.6792,.1518,.5752,1),new Ey(.7149,.1873,.5463,1),new Ey(.7483,.2227,.5168,1),new Ey(.7796,.2581,.4875,1),new Ey(.8126,.2979,.4553,1),new Ey(.8402,.3336,.4275,1),new Ey(.8661,.3697,.4001,1),new Ey(.8903,.4064,.3731,1),new Ey(.9155,.4488,.3429,1),new Ey(.9356,.4877,.316,1),new Ey(.9534,.528,.2889,1),new Ey(.9685,.5697,.2617,1),new Ey(.9806,.613,.2346,1),new Ey(.9899,.6638,.2049,1),new Ey(.9941,.7107,.1801,1),new Ey(.9939,.7593,.1591,1),new Ey(.9886,.8096,.1454,1),new Ey(.9763,.868,.1434,1),new Ey(.9593,.9214,.1516,1),new Ey(.94,.9752,.1313,1)]),this.VIRIDIS=Hy([new Ey(.267,.0049,.3294,1),new Ey(.277,.0503,.3757,1),new Ey(.2823,.095,.4173,1),new Ey(.2826,.1409,.4575,1),new Ey(.278,.1804,.4867,1),new Ey(.2693,.2188,.5096,1),new Ey(.2573,.2561,.5266,1),new Ey(.2412,.2965,.5397,1),new Ey(.2259,.3308,.5473,1),new Ey(.2105,.3637,.5522,1),new Ey(.1959,.3954,.5553,1),new Ey(.1823,.4262,.5571,1),new Ey(.1681,.46,.5581,1),new Ey(.1563,.4896,.5579,1),new Ey(.1448,.5191,.5566,1),new Ey(.1337,.5485,.5535,1),new Ey(.1235,.5817,.5474,1),new Ey(.1194,.6111,.539,1),new Ey(.1248,.6405,.5271,1),new Ey(.1433,.6695,.5112,1),new Ey(.1807,.7014,.4882,1),new Ey(.2264,.7289,.4628,1),new Ey(.2815,.7552,.4326,1),new Ey(.3441,.78,.3974,1),new Ey(.4129,.803,.3573,1),new Ey(.4966,.8264,.3064,1),new Ey(.5756,.8446,.2564,1),new Ey(.6576,.8602,.2031,1),new Ey(.7414,.8734,.1496,1),new Ey(.8353,.886,.1026,1),new Ey(.9162,.8961,.1007,1),new Ey(.9932,.9062,.1439,1)])}Ry.prototype.getColor_y2kzbl$=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var n=this.gradient_0,r=B((t-e)/(i-e)*this.gradient_0.length),o=this.gradient_0.length-1|0;return n[r<0?0:r>o?o:r]},Ry.prototype.getColorInterpolated_vsomir$=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=1);var r=(t-i)/(n-i)*this.gradient_0.length,o=this.gradient_0.length-1,s=r<0?0:r>o?o:r,a=B(s),l=this.gradient_0.length-1|0,u=a<0?0:a>l?l:a,p=u+1|0,c=this.gradient_0.length-1|0,h=p<0?0:p>c?c:p,d=h-s,f=1-d,_=this.gradient_0[h];return e.set_czzhhz$(this.gradient_0[u]).scale_mx4ult$(f),e.r=e.r+_.r*d,e.g=e.g+_.g*d,e.b=e.b+_.b*d,e.a=e.a+_.a*d,e},Ry.prototype.inverted=function(){var t,e=I(this.gradient_0.length);t=e.length-1|0;for(var i=0;i<=t;i++)e[i]=_t(i,this.gradient_0[he(this.gradient_0)-i|0]);return new Ry(e.slice(),this.gradient_0.length)},Ly.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Dy,qy,Fy,By,Uy=null;function Vy(){return null===Uy&&new Ly,Uy}function Gy(t){return t.first}function Hy(t,e,i){void 0===e&&(e=256),i=i||Object.create(Ry.prototype);var n,r=I(t.length);n=r.length-1|0;for(var o=0;o<=n;o++)r[o]=_t(o,t[o]);return Ry.call(i,r.slice(),e),i}function Wy(t,e){void 0===e&&(e=0),this.data=t,this.byteOffset=e,this.index=0}function Xy(t,e){var i,n,r;void 0===e&&(e=Jy()),this.ui=null,this.xOffset_un9ppf$_0=0,this.menuContainer_pm7z9i$_0=this.menuContainer_pm7z9i$_0,this.ui=Mm(t.screenDpi,"debug-overlay",void 0,(i=this,n=t,r=e,function(t,e){return t.theme=Ym(Hm().DARK_SIMPLE,iv),t.content.ui.setCustom_11rb$(new M_),t.unaryPlus_uv0sim$(t.container_t34sov$("dbgPanel",function(t,e,i,n){return function(r){var o;t.menuContainer_0=r,r.customTransform=function(t){return function(e){return e.translate_y2kzbl$(t.xOffset,0,0),s}}(t);var a=168+18*e.getSysInfos().size;switch(i.name){case"UPPER_LEFT":r.layoutSpec.setOrigin_4ujscr$(W_(),Y_(-a,!0),W_());break;case"UPPER_RIGHT":r.layoutSpec.setOrigin_4ujscr$(Y_(-180,!0),Y_(-a,!0),W_());break;case"LOWER_LEFT":r.layoutSpec.setOrigin_4ujscr$(W_(),W_(),W_());break;case"LOWER_RIGHT":r.layoutSpec.setOrigin_4ujscr$(Y_(-180,!0),W_(),W_())}r.layoutSpec.setSize_4ujscr$(Y_(180,!0),Y_(a,!0),X_());var l=new rv(n);l.layoutSpec.setOrigin_4ujscr$(W_(),Y_(-40,!0),W_()),l.layoutSpec.setSize_4ujscr$(Y_(180,!0),Y_(40,!0),X_()),r.unaryPlus_uv0sim$(l),r.unaryPlus_uv0sim$(n.label_tokfmu$("lblFps",function(t,e){return function(i){var n;return i.layoutSpec.setOrigin_4ujscr$(W_(),Y_(-37,!0),W_()),i.layoutSpec.setSize_4ujscr$(Y_(t,!0),Y_(37,!0),X_()),i.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),i.textAlignment=new lm(hm(),hm()),i.text="",i.font.setCustom_11rb$(Hm().DARK_SIMPLE.standardFont_oei9ky$(i.dpi,e)),i.textColor.setCustom_11rb$(i.root.theme.accentColor),i.onUpdate.add_11rb$((n=i,function(t,e){return n.text=PC(e.ctx.fps,1)+" fps",s})),s}}(180,e)));var u,p,c={v:-60};r.unaryPlus_uv0sim$(n.label_tokfmu$("lblKoolVersion",(u=c,p=180,function(t){return t.layoutSpec.setOrigin_4ujscr$(W_(),Y_(u.v,!0),W_()),t.layoutSpec.setSize_4ujscr$(Y_(p,!0),Y_(18,!0),X_()),t.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),t.textAlignment=new lm(dm(),hm()),t.text="Kool v0.6.0-201102.2122",s}))),c.v-=18,o=e.getSysInfos();for(var h=0;h!==o.size;++h)r.unaryPlus_uv0sim$(n.label_tokfmu$("lblSysInfo_"+h,nv(c,180,h))),c.v-=18;return r.unaryPlus_uv0sim$(n.label_tokfmu$("lblVpSize",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){return t.windowWidth===e.v&&t.windowHeight===i.v||(e.v=t.windowWidth,i.v=t.windowHeight,n.text="Viewport: "+t.windowWidth+"x"+t.windowHeight),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblUpTime",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm()),n.text="Up: 00:00.00";var r=n.onUpdate,o=function(t,e,i){return function(n,r){if(e.v-=t.deltaT,e.v<0){e.v+=1;var o=""+Ct(B(t.time/3600));1===o.length&&(o="0"+o);var a=""+Ct(B(t.time%3600/60));1===a.length&&(a="0"+a);var l=""+Ct(B(t.time%60));1===l.length&&(l="0"+l),i.text="Up: "+o+":"+a+"."+l}return s}}(i,{v:1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumTextures",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){var a=t.engineStats.textureAllocations.size,l=t.engineStats.totalTextureSize.toNumber();return a===e.v&&l===i.v||(e.v=a,i.v=l,n.text=a.toString()+" Textures: "+PC(l/1048576,1)+"M"),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumBuffers",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){var a=t.engineStats.bufferAllocations.size,l=t.engineStats.totalBufferSize.toNumber();return a===e.v&&l===i.v||(e.v=a,i.v=l,n.text=a.toString()+" Buffers: "+PC(l/1048576,1)+"M"),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumShaders",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm());var r=n.onUpdate,o=function(t,e,i,n){return function(r,o){var a=t.engineStats.pipelines.size,l=t.engineStats.numDrawCommands;return l===e.v&&a===i.v||(i.v=a,e.v=l,n.text=a.toString()+" Shaders / "+l+" Cmds"),s}}(i,{v:-1},{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),c.v-=18,r.unaryPlus_uv0sim$(n.label_tokfmu$("lblNumFaces",function(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm());var r=n.onUpdate,o=function(t,e,i){return function(n,r){var o=t.engineStats.numPrimitives;return o!==e.v&&(e.v=o,i.text=o.toString()+" Faces"),s}}(i,{v:-1},n);return r.add_11rb$(o),s}}(c,180,e))),s}}(i,n,r,t))),s})),this.ui.isPickingEnabled=!1}function Ky(t,e){T.call(this),this.name$=t,this.ordinal$=e}function Yy(){Yy=function(){},Dy=new Ky("UPPER_LEFT",0),qy=new Ky("UPPER_RIGHT",1),Fy=new Ky("LOWER_LEFT",2),By=new Ky("LOWER_RIGHT",3)}function Zy(){return Yy(),Dy}function Jy(){return Yy(),qy}function Qy(){return Yy(),Fy}function tv(){return Yy(),By}function ev(t){return new M_}function iv(t){return t.componentUi_mloaa0$(ev),t.containerUi_2t3ptw$(Kt("SimpleComponentUi",(function(t){return new j_(t)}))),t.standardFont_ttufcy$(new rg(lg().SYSTEM_FONT,12)),s}function nv(t,e,i){return function(n){n.layoutSpec.setOrigin_4ujscr$(W_(),Y_(t.v,!0),W_()),n.layoutSpec.setSize_4ujscr$(Y_(e,!0),Y_(18,!0),X_()),n.padding=new am(W_(),W_(),Y_(4,!0),Y_(4,!0)),n.textAlignment=new lm(dm(),hm()),n.text="";var r=n.onUpdate,o=function(t,e){return function(i,n){return e.text=n.ctx.getSysInfos().get_za3lpa$(t),s}}(i,n);return r.add_11rb$(o),s}}function rv(t){Sm.call(this,"deltaT",t),this.graphMesh=null,this.graphGeom=new Dz(Lm().UI_MESH_ATTRIBS),this.graphBuilder=new Ck(this.graphGeom),this.graphVertex=this.graphGeom.get_za3lpa$(0),this.graphIdx=0,this.prevDeltaT=0,this.graphMesh=new vf(this.graphGeom),this.graphMesh.geometry.usage=ik(),this.graphMesh.shader=new Am}function ov(t){lv(),zc.call(this,lv().shaderModel_l5ebkw$(t)),this.deferredCameraNode_0=null,this.sceneCamera_f7edkp$_0=t.sceneCamera,this.positionAoSampler_0=null,this.normalRoughnessSampler_0=null,this.albedoMetalSampler_0=null,this.positionAo_ot9dej$_0=t.positionAo,this.normalRoughness_mouyfl$_0=t.normalRoughness,this.albedoMetal_35ktqu$_0=t.albedoMetal}function sv(){av=this,this.LIGHT_POS=new ps("aLightPos",is()),this.LIGHT_DIR=new ps("aLightDir",is())}Ry.$metadata$={kind:$,simpleName:"ColorGradient",interfaces:[]},Wy.prototype.hasRemaining=function(){return this.index<this.data.capacity},Wy.prototype.readByte=function(){var t;return this.data.get_za3lpa$(this.byteOffset+(t=this.index,this.index=t+1|0,t)|0)},Wy.prototype.readUByte=function(){var t;return 255&this.data.get_za3lpa$(this.byteOffset+(t=this.index,this.index=t+1|0,t)|0)},Wy.prototype.readShort=function(){var t=this.readUShort();return t>32767&&(t=t-65536|0),t},Wy.prototype.readUShort=function(){for(var t=0,e=0;e<=1;e++)t|=this.readUByte()<<(8*e|0);return t},Wy.prototype.readInt=function(){return this.readUInt()},Wy.prototype.readUInt=function(){for(var t=0,e=0;e<=3;e++)t|=this.readUByte()<<(8*e|0);return t},Wy.prototype.readFloat=function(){var t=this.readUInt();return e.floatFromBits(t)},Wy.prototype.readData_za3lpa$=function(t){for(var e,i=xE(t),n=0;n<t;n++)i.set_6t1wet$(n,this.data.get_za3lpa$((e=this.index,this.index=e+1|0,e)));return i},Wy.prototype.skipBytes_za3lpa$=function(t){this.index=this.index+t|0},Wy.$metadata$={kind:$,simpleName:"DataStream",interfaces:[]},Object.defineProperty(Xy.prototype,"xOffset",{configurable:!0,get:function(){return this.xOffset_un9ppf$_0},set:function(t){this.xOffset_un9ppf$_0!==t&&(this.xOffset_un9ppf$_0=t,this.menuContainer_0.requestUpdateTransform())}}),Object.defineProperty(Xy.prototype,"menuContainer_0",{configurable:!0,get:function(){return null==this.menuContainer_pm7z9i$_0?ct("menuContainer"):this.menuContainer_pm7z9i$_0},set:function(t){this.menuContainer_pm7z9i$_0=t}}),Ky.$metadata$={kind:$,simpleName:"Position",interfaces:[T]},Ky.values=function(){return[Zy(),Jy(),Qy(),tv()]},Ky.valueOf_61zpoe$=function(t){switch(t){case"UPPER_LEFT":return Zy();case"UPPER_RIGHT":return Jy();case"LOWER_LEFT":return Qy();case"LOWER_RIGHT":return tv();default:P("No enum constant de.fabmax.kool.util.DebugOverlay.Position."+t)}},Xy.$metadata$={kind:$,simpleName:"DebugOverlay",interfaces:[]},rv.prototype.collectDrawCommands_kma0q5$=function(t){var e=Oy().WHITE;this.prevDeltaT>.05?e=Oy().RED:this.prevDeltaT>.025&&(e=Oy().YELLOW),this.setCurrentBarColor_d7aj7k$(e),this.prevDeltaT=t.deltaT,this.graphIdx=(this.graphIdx+4|0)%(4*B(this.width)|0),this.graphVertex.index=this.graphIdx;var i,n,r=this.graphVertex.position.y,o=250*t.deltaT,s=this.height,a=A.min(o,s);(i=this.graphVertex).index=i.index+1|0,this.graphVertex.position.y=r+a,(n=this.graphVertex).index=n.index+1|0,this.graphVertex.position.y=r+a,this.setCurrentBarColor_d7aj7k$(Oy().MAGENTA),this.graphGeom.hasChanged=!0,Sm.prototype.collectDrawCommands_kma0q5$.call(this,t)},rv.prototype.setCurrentBarColor_d7aj7k$=function(t){this.graphVertex.index=this.graphIdx;for(var e=0;e<=3;e++)this.graphVertex.index=this.graphIdx+e|0,this.graphVertex.color.set_czzhhz$(t)},rv.prototype.updateUi_aemszp$=function(t){Sm.prototype.updateUi_aemszp$.call(this,t),this.setupBuilder_84rojv$(this.graphBuilder),this.graphBuilder.color=Oy().WHITE;var e,i=this.graphBuilder;i.transform.push(),i.translate_y2kzbl$(0,0,0),e=B(this.width);for(var n=1;n<=e;n++)this.graphBuilder.line_s2l86p$(n-.5,0,n-.5,1,1);i.transform.pop()},rv.prototype.updateTheme_aemszp$=function(t){Sm.prototype.updateTheme_aemszp$.call(this,t),this.minusAssign_f1kmr1$(this.graphMesh),this.plusAssign_f1kmr1$(this.graphMesh)},rv.$metadata$={kind:$,simpleName:"DeltaTGraph",interfaces:[Sm]},Object.defineProperty(ov.prototype,"sceneCamera",{configurable:!0,get:function(){return this.sceneCamera_f7edkp$_0},set:function(t){var e;this.sceneCamera_f7edkp$_0=t,null!=(e=this.deferredCameraNode_0)&&(e.sceneCam=t)}}),Object.defineProperty(ov.prototype,"positionAo",{configurable:!0,get:function(){return this.positionAo_ot9dej$_0},set:function(t){var e;this.positionAo_ot9dej$_0=t,null!=(e=this.positionAoSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"normalRoughness",{configurable:!0,get:function(){return this.normalRoughness_mouyfl$_0},set:function(t){var e;this.normalRoughness_mouyfl$_0=t,null!=(e=this.normalRoughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(ov.prototype,"albedoMetal",{configurable:!0,get:function(){return this.albedoMetal_35ktqu$_0},set:function(t){var e;this.albedoMetal_35ktqu$_0=t,null!=(e=this.albedoMetalSampler_0)&&(e.texture=t)}}),ov.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.blendMode=dl(),t.cullMethod=Pl(),t.depthTest=yl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},ov.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f=this.model;t:do{var _;for(h=sc.ALL,_=f.stages.values.iterator();_.hasNext();){var m=_.next();if(0!=(m.stage.mask&h.mask)){var $,y,v=m.nodes;e:do{var g;for(g=v.iterator();g.hasNext();){var b=g.next();if(Lt(b.name,"deferredCam")&&e.isType(b,Pv)){y=b;break e}}y=null}while(0);var x=null==($=y)||e.isType($,Pv)?$:c();if(null!=x){d=x;break t}}}d=null}while(0);this.deferredCameraNode_0=d,null!=(r=this.deferredCameraNode_0)&&(r.sceneCam=this.sceneCamera);var w,z,k=this.model;t:do{var S;for(w=sc.ALL,S=k.stages.values.iterator();S.hasNext();){var C=S.next();if(0!=(C.stage.mask&w.mask)){var N,E,T=C.nodes;e:do{var P;for(P=T.iterator();P.hasNext();){var O=P.next();if(Lt(O.name,"positionAo")&&e.isType(O,Ep)){E=O;break e}}E=null}while(0);var M=null==(N=E)||e.isType(N,Ep)?N:c();if(null!=M){z=M;break t}}}z=null}while(0);this.positionAoSampler_0=null!=(o=z)?o.sampler:null,null!=(s=this.positionAoSampler_0)&&(s.texture=this.positionAo);var j,A,I=this.model;t:do{var R;for(j=sc.ALL,R=I.stages.values.iterator();R.hasNext();){var L=R.next();if(0!=(L.stage.mask&j.mask)){var D,q,F=L.nodes;e:do{var B;for(B=F.iterator();B.hasNext();){var U=B.next();if(Lt(U.name,"normalRoughness")&&e.isType(U,Ep)){q=U;break e}}q=null}while(0);var V=null==(D=q)||e.isType(D,Ep)?D:c();if(null!=V){A=V;break t}}}A=null}while(0);this.normalRoughnessSampler_0=null!=(a=A)?a.sampler:null,null!=(l=this.normalRoughnessSampler_0)&&(l.texture=this.normalRoughness);var G,H,W=this.model;t:do{var X;for(G=sc.ALL,X=W.stages.values.iterator();X.hasNext();){var K=X.next();if(0!=(K.stage.mask&G.mask)){var Y,Z,J=K.nodes;e:do{var Q;for(Q=J.iterator();Q.hasNext();){var tt=Q.next();if(Lt(tt.name,"albedoMetal")&&e.isType(tt,Ep)){Z=tt;break e}}Z=null}while(0);var et=null==(Y=Z)||e.isType(Y,Ep)?Y:c();if(null!=et){H=et;break t}}}H=null}while(0);this.albedoMetalSampler_0=null!=(u=H)?u.sampler:null,null!=(p=this.albedoMetalSampler_0)&&(p.texture=this.albedoMetal),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},sv.prototype.shaderModel_l5ebkw$=function(t){var e,i=new tp("point light shader model"),n={v:null},r={v:null},o={v:null},s={v:null},a=new ip(i),l=a.instanceAttrModelMat().output,u=a.multiplyNode_ze33is$(a.premultipliedMvpNode().outMvpMat,l).output;a.positionOutput=a.vec4TransformNode_9krp9t$(a.attrPositions().output,u).outVec4,n.v=a.stageInterfaceNode_iikjwn$("ifFragCoords",a.positionOutput),r.v=a.stageInterfaceNode_iikjwn$("ifLightColor",a.instanceAttributeNode_nm2vx5$(ds().COLORS).output,!0),o.v=a.stageInterfaceNode_iikjwn$("ifLightPos",a.instanceAttributeNode_nm2vx5$(this.LIGHT_POS).output,!0),e=t.lightType===ff()?null:a.stageInterfaceNode_iikjwn$("ifLightDir",a.instanceAttributeNode_nm2vx5$(this.LIGHT_DIR).output,!0),s.v=e;var p=new np(i),c=p.divideNode_ze33is$(p.splitNode_500t7j$(n.v.output,"xy").output,p.splitNode_500t7j$(n.v.output,"w").output).output,h=p.addNode_ze33is$(p.multiplyNode_tuikh5$(c,.5).output,new op(new Pu(.5))).output,d=p.addNode_u9w9by$(new zv(p.stage));d.inPositionAo=p.texture2dSamplerNode_fzevit$(p.texture2dNode_61zpoe$("positionAo"),h).outColor,d.inNormalRough=p.texture2dSamplerNode_fzevit$(p.texture2dNode_61zpoe$("normalRoughness"),h).outColor,d.inAlbedoMetallic=p.texture2dSamplerNode_fzevit$(p.texture2dNode_61zpoe$("albedoMetal"),h).outColor;var f=d;p.addNode_u9w9by$(new Tv(p.stage)).inViewPos=f.outViewPos;var _=p.addNode_u9w9by$(new Pv(p.stage)),m=p.vec3TransformNode_vid4wo$(f.outViewPos,_.outInvViewMat,1).outVec3,$=p.vec3TransformNode_vid4wo$(f.outViewNormal,_.outInvViewMat,0).outVec3,y=p.pbrLightNode();if(y.lightBacksides=t.lightBacksides,y.inFragPos=m,y.inNormal=$,y.inCamPos=_.outCamPos,y.inAlbedo=f.outAlbedo,y.inMetallic=f.outMetallic,y.inRoughness=f.outRoughness,t.lightType===_f()){var v=p.addNode_u9w9by$(new nu(p.stage));v.isReducedSoi=!0,v.inLightPos=o.v.output,v.inLightColor=r.v.output,v.inLightDir=x(s.v).output,v.inFragPos=m;var g=v;y.inFragToLight=g.outFragToLightDirection,y.inRadiance=g.outRadiance}else{var b=p.addNode_u9w9by$(new iu(p.stage));b.isReducedSoi=!0,b.inLightPos=o.v.output,b.inLightColor=r.v.output,b.inFragPos=m;var w=b;y.inFragToLight=w.outFragToLightDirection,y.inRadiance=w.outRadiance}var z=y;return p.colorOutput_a3v4si$(z.outColor),i},sv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var av=null;function lv(){return null===av&&new sv,av}function uv(){this.lightType_vh4r6w$_0=ff(),this.sceneCamera=null,this.lightBacksides=!1,this.positionAo=null,this.normalRoughness=null,this.albedoMetal=null}function pv(t,i){dv(),void 0===i&&(i=!1);var n,r,o,a=new lf,l=new pa,u=i;for(l.name="DeferredMrtPass",l.setDynamicSize(),l.setDepthTexture_6taknv$(!1),n=(u?dv().FORMATS_DEFERRED_EMISSIVE:dv().FORMATS_DEFERRED).iterator();n.hasNext();){var p=n.next();l.addColorTexture_farcsl$(p)}$a.call(this,a,new ua(l)),this.withEmissive=i,this.content=e.isType(r=this.drawNode,lf)?r:c(),this.alphaMeshes_8be2vx$=M();var h,d,f=new ef(e.isType(o=t.camera,tf)?o:c());this.camera=f,this.onBeforeCollectDrawCommands.add_11rb$((h=f,d=t,function(t){return h.sync_hrtwbc$(d.mainRenderPass.viewport,t),s})),t.addOffscreenPass_m1c2kf$(this),this.clearColors[0]=new Ey(0,0,1,0),this.clearColors[1]=null,this.clearColors[2]=null,this.withEmissive&&(this.clearColors[3]=null),this.content.isFrustumChecked=!1,this.drawQueue.meshFilter=fv}function cv(){hv=this,this.FMT_POSITION_AO=$h(),this.FMT_NORMAL_ROUGH=$h(),this.FMT_ALBEDO_METAL=dh(),this.FMT_EMISSIVE=dh(),this.FORMATS_DEFERRED=At([this.FMT_POSITION_AO,this.FMT_NORMAL_ROUGH,this.FMT_ALBEDO_METAL]),this.FORMATS_DEFERRED_EMISSIVE=At([this.FMT_POSITION_AO,this.FMT_NORMAL_ROUGH,this.FMT_ALBEDO_METAL,this.FMT_EMISSIVE])}Object.defineProperty(uv.prototype,"lightType",{configurable:!0,get:function(){return this.lightType_vh4r6w$_0},set:function(t){var i;if(t===df()){var n=DE.Log,r=$k.ERROR,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"Directional lights are not supported for deferred lights, use global lighting instead."),i=ff()}else i=t;this.lightType_vh4r6w$_0=i}}),uv.$metadata$={kind:$,simpleName:"Config",interfaces:[]},ov.$metadata$={kind:$,simpleName:"DeferredLightShader",interfaces:[zc]},Object.defineProperty(pv.prototype,"positionAo",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(0)}}),Object.defineProperty(pv.prototype,"normalRoughness",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(1)}}),Object.defineProperty(pv.prototype,"albedoMetal",{configurable:!0,get:function(){return this.colorTextures.get_za3lpa$(2)}}),Object.defineProperty(pv.prototype,"emissive",{configurable:!0,get:function(){return this.withEmissive?this.colorTextures.get_za3lpa$(3):null}}),pv.prototype.collectDrawCommands_aemszp$=function(t){this.alphaMeshes_8be2vx$.clear(),$a.prototype.collectDrawCommands_aemszp$.call(this,t)},pv.prototype.addMesh_sbx4mf$=function(t,e){var i;return t.isOpaque?i=$a.prototype.addMesh_sbx4mf$.call(this,t,e):(this.alphaMeshes_8be2vx$.add_11rb$(t),i=null),i},pv.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},cv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hv=null;function dv(){return null===hv&&new cv,hv}function fv(t){return t.isOpaque}function _v(t,e){yv(),zc.call(this,yv().outputModel_0()),this.pbrOutput_0=t,this.depth_0=e}function mv(){$v=this}pv.$metadata$={kind:$,simpleName:"DeferredMrtPass",interfaces:[$a]},_v.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l=this.model;t:do{var u;for(s=sc.ALL,u=l.stages.values.iterator();u.hasNext();){var p=u.next();if(0!=(p.stage.mask&s.mask)){var h,d,f=p.nodes;e:do{var _;for(_=f.iterator();_.hasNext();){var m=_.next();if(Lt(m.name,"deferredPbrOutput")&&e.isType(m,Ep)){d=m;break e}}d=null}while(0);var $=null==(h=d)||e.isType(h,Ep)?h:c();if(null!=$){a=$;break t}}}a=null}while(0);var y=null!=(r=a)?r.sampler:null;null!=y&&(y.texture=this.pbrOutput_0);var v,g,b=this.model;t:do{var x;for(v=sc.ALL,x=b.stages.values.iterator();x.hasNext();){var w=x.next();if(0!=(w.stage.mask&v.mask)){var z,k,S=w.nodes;e:do{var C;for(C=S.iterator();C.hasNext();){var N=C.next();if(Lt(N.name,"deferredDepthOutput")&&e.isType(N,Ep)){k=N;break e}}k=null}while(0);var E=null==(z=k)||e.isType(z,Ep)?z:c();if(null!=E){g=E;break t}}}g=null}while(0);var T=null!=(o=g)?o.sampler:null;null!=T&&(T.texture=this.depth_0),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},mv.prototype.outputModel_0=function(){var t=new tp("DeferredOutputShader"),e={v:null},i=new ip(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.fullScreenQuadPositionNode_r20yfm$(i.attrTexCoords().output).outQuadPos;var n=new np(t),r=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("deferredPbrOutput"),e.v.output);n.colorOutput_a3v4si$(n.hdrToLdrNode_r20yfm$(r.outColor).outColor);var o=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("deferredDepthOutput"),e.v.output);return n.depthOutput_r20yfm$(o.outColor),t},mv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var $v=null;function yv(){return null===$v&&new mv,$v}function vv(t,e){xv(),void 0===e&&(e=xv().defaultMrtPbrModel_2ufela$(t)),zc.call(this,e),this.cullMethod_aft819$_0=t.cullMethod,this.uRoughness_l04x3p$_0=null,this.uMetallic_zgqm06$_0=null,this.uAlbedo_4phmdc$_0=null,this.uEmissive_2p1vku$_0=null,this.metallic_mwthg9$_0=t.metallic,this.roughness_cztq66$_0=t.roughness,this.albedo_9owvlf$_0=t.albedo,this.emissive_9uv8z3$_0=t.emissive,this.albedoSampler_4xngv3$_0=null,this.emissiveSampler_7gr0w3$_0=null,this.normalSampler_9dwwj7$_0=null,this.metallicSampler_2ylj7p$_0=null,this.roughnessSampler_3dp96a$_0=null,this.occlusionSampler_slvtxn$_0=null,this.displacementSampler_8zs1vn$_0=null,this.uDispStrength_86lbd6$_0=null,this.metallicTexName_o5b24b$_0=t.metallicTexName,this.roughnessTexName_ht09qc$_0=t.roughnessTexName,this.occlusionTexName_l8ip4v$_0=t.occlusionTexName,this.albedoMap_583l57$_0=t.albedoMap,this.emissiveMap_lef1wp$_0=t.emissiveMap,this.normalMap_o8h8ft$_0=t.normalMap,this.metallicMap_onr26n$_0=t.metallicMap,this.roughnessMap_kdfn22$_0=t.roughnessMap,this.occlusionMap_ewiscp$_0=t.occlusionMap,this.displacementMap_1yztpl$_0=t.displacementMap,this.displacementStrength_i48dea$_0=t.displacementStrength}function gv(){bv=this}_v.$metadata$={kind:$,simpleName:"DeferredOutputShader",interfaces:[zc]},Object.defineProperty(vv.prototype,"metallic",{configurable:!0,get:function(){return this.metallic_mwthg9$_0},set:function(t){var e,i;this.metallic_mwthg9$_0=t,null!=(i=null!=(e=this.uMetallic_zgqm06$_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(vv.prototype,"roughness",{configurable:!0,get:function(){return this.roughness_cztq66$_0},set:function(t){var e,i;this.roughness_cztq66$_0=t,null!=(i=null!=(e=this.uRoughness_l04x3p$_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(vv.prototype,"albedo",{configurable:!0,get:function(){return this.albedo_9owvlf$_0},set:function(t){var e,i,n;this.albedo_9owvlf$_0=t,null!=(n=null!=(i=null!=(e=this.uAlbedo_4phmdc$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(vv.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_9uv8z3$_0},set:function(t){var e,i,n;this.emissive_9uv8z3$_0=t,null!=(n=null!=(i=null!=(e=this.uEmissive_2p1vku$_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(vv.prototype,"albedoMap",{configurable:!0,get:function(){return this.albedoMap_583l57$_0},set:function(t){var e;this.albedoMap_583l57$_0=t,null!=(e=this.albedoSampler_4xngv3$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"emissiveMap",{configurable:!0,get:function(){return this.emissiveMap_lef1wp$_0},set:function(t){var e;this.emissiveMap_lef1wp$_0=t,null!=(e=this.emissiveSampler_7gr0w3$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"normalMap",{configurable:!0,get:function(){return this.normalMap_o8h8ft$_0},set:function(t){var e;this.normalMap_o8h8ft$_0=t,null!=(e=this.normalSampler_9dwwj7$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"metallicMap",{configurable:!0,get:function(){return this.metallicMap_onr26n$_0},set:function(t){var e;this.metallicMap_onr26n$_0=t,null!=(e=this.metallicSampler_2ylj7p$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"roughnessMap",{configurable:!0,get:function(){return this.roughnessMap_kdfn22$_0},set:function(t){var e;this.roughnessMap_kdfn22$_0=t,null!=(e=this.roughnessSampler_3dp96a$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"occlusionMap",{configurable:!0,get:function(){return this.occlusionMap_ewiscp$_0},set:function(t){var e;this.occlusionMap_ewiscp$_0=t,null!=(e=this.occlusionSampler_slvtxn$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"displacementMap",{configurable:!0,get:function(){return this.displacementMap_1yztpl$_0},set:function(t){var e;this.displacementMap_1yztpl$_0=t,null!=(e=this.displacementSampler_8zs1vn$_0)&&(e.texture=t)}}),Object.defineProperty(vv.prototype,"displacementStrength",{configurable:!0,get:function(){return this.displacementStrength_i48dea$_0},set:function(t){var e,i;this.displacementStrength_i48dea$_0=t,null!=(i=null!=(e=this.uDispStrength_86lbd6$_0)?e.uniform:null)&&(i.value=t)}}),vv.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.cullMethod=this.cullMethod_aft819$_0,t.blendMode=hl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},vv.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,T=this.model;t:do{var P;for(N=sc.ALL,P=T.stages.values.iterator();P.hasNext();){var O=P.next();if(0!=(O.stage.mask&N.mask)){var M,j,A=O.nodes;e:do{var I;for(I=A.iterator();I.hasNext();){var R=I.next();if(Lt(R.name,"uMetallic")&&e.isType(R,Rp)){j=R;break e}}j=null}while(0);var L=null==(M=j)||e.isType(M,Rp)?M:c();if(null!=L){E=L;break t}}}E=null}while(0);this.uMetallic_zgqm06$_0=E,null!=(r=this.uMetallic_zgqm06$_0)&&(r.uniform.value=this.metallic);var D,q,F=this.model;t:do{var B;for(D=sc.ALL,B=F.stages.values.iterator();B.hasNext();){var U=B.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var X=W.next();if(Lt(X.name,"uRoughness")&&e.isType(X,Rp)){G=X;break e}}G=null}while(0);var K=null==(V=G)||e.isType(V,Rp)?V:c();if(null!=K){q=K;break t}}}q=null}while(0);this.uRoughness_l04x3p$_0=q,null!=(o=this.uRoughness_l04x3p$_0)&&(o.uniform.value=this.roughness);var Y,Z,J=this.model;t:do{var Q;for(Y=sc.ALL,Q=J.stages.values.iterator();Q.hasNext();){var tt=Q.next();if(0!=(tt.stage.mask&Y.mask)){var et,it,nt=tt.nodes;e:do{var rt;for(rt=nt.iterator();rt.hasNext();){var ot=rt.next();if(Lt(ot.name,"uAlbedo")&&e.isType(ot,Fp)){it=ot;break e}}it=null}while(0);var st=null==(et=it)||e.isType(et,Fp)?et:c();if(null!=st){Z=st;break t}}}Z=null}while(0);this.uAlbedo_4phmdc$_0=Z,null!=(l=null!=(a=null!=(s=this.uAlbedo_4phmdc$_0)?s.uniform:null)?a.value:null)&&l.set_czzhhz$(this.albedo);var at,lt,ut=this.model;t:do{var pt;for(at=sc.ALL,pt=ut.stages.values.iterator();pt.hasNext();){var ct=pt.next();if(0!=(ct.stage.mask&at.mask)){var ht,dt,ft=ct.nodes;e:do{var _t;for(_t=ft.iterator();_t.hasNext();){var mt=_t.next();if(Lt(mt.name,"uEmissive")&&e.isType(mt,Fp)){dt=mt;break e}}dt=null}while(0);var $t=null==(ht=dt)||e.isType(ht,Fp)?ht:c();if(null!=$t){lt=$t;break t}}}lt=null}while(0);this.uEmissive_2p1vku$_0=lt,null!=(h=null!=(p=null!=(u=this.uEmissive_2p1vku$_0)?u.uniform:null)?p.value:null)&&h.set_czzhhz$(this.emissive);var yt,vt,gt=this.model;t:do{var bt;for(yt=sc.ALL,bt=gt.stages.values.iterator();bt.hasNext();){var xt=bt.next();if(0!=(xt.stage.mask&yt.mask)){var wt,zt,kt=xt.nodes;e:do{var St;for(St=kt.iterator();St.hasNext();){var Ct=St.next();if(Lt(Ct.name,"tAlbedo")&&e.isType(Ct,Ep)){zt=Ct;break e}}zt=null}while(0);var Nt=null==(wt=zt)||e.isType(wt,Ep)?wt:c();if(null!=Nt){vt=Nt;break t}}}vt=null}while(0);this.albedoSampler_4xngv3$_0=null!=(d=vt)?d.sampler:null,null!=(f=this.albedoSampler_4xngv3$_0)&&(f.texture=this.albedoMap);var Et,Tt,Pt=this.model;t:do{var Ot;for(Et=sc.ALL,Ot=Pt.stages.values.iterator();Ot.hasNext();){var Mt=Ot.next();if(0!=(Mt.stage.mask&Et.mask)){var jt,At,It=Mt.nodes;e:do{var Rt;for(Rt=It.iterator();Rt.hasNext();){var Dt=Rt.next();if(Lt(Dt.name,"tEmissive")&&e.isType(Dt,Ep)){At=Dt;break e}}At=null}while(0);var qt=null==(jt=At)||e.isType(jt,Ep)?jt:c();if(null!=qt){Tt=qt;break t}}}Tt=null}while(0);this.emissiveSampler_7gr0w3$_0=null!=(_=Tt)?_.sampler:null,null!=(m=this.emissiveSampler_7gr0w3$_0)&&(m.texture=this.emissiveMap);var Ft,Bt,Ut=this.model;t:do{var Vt;for(Ft=sc.ALL,Vt=Ut.stages.values.iterator();Vt.hasNext();){var Gt=Vt.next();if(0!=(Gt.stage.mask&Ft.mask)){var Ht,Wt,Xt=Gt.nodes;e:do{var Kt;for(Kt=Xt.iterator();Kt.hasNext();){var Yt=Kt.next();if(Lt(Yt.name,"tNormal")&&e.isType(Yt,Ep)){Wt=Yt;break e}}Wt=null}while(0);var Zt=null==(Ht=Wt)||e.isType(Ht,Ep)?Ht:c();if(null!=Zt){Bt=Zt;break t}}}Bt=null}while(0);this.normalSampler_9dwwj7$_0=null!=($=Bt)?$.sampler:null,null!=(y=this.normalSampler_9dwwj7$_0)&&(y.texture=this.normalMap);var Jt,Qt,te=this.model,ee=this.metallicTexName_o5b24b$_0;t:do{var ie;for(Jt=sc.ALL,ie=te.stages.values.iterator();ie.hasNext();){var ne=ie.next();if(0!=(ne.stage.mask&Jt.mask)){var re,oe,se=ne.nodes;e:do{var ae;for(ae=se.iterator();ae.hasNext();){var le=ae.next();if(Lt(le.name,ee)&&e.isType(le,Ep)){oe=le;break e}}oe=null}while(0);var ue=null==(re=oe)||e.isType(re,Ep)?re:c();if(null!=ue){Qt=ue;break t}}}Qt=null}while(0);this.metallicSampler_2ylj7p$_0=null!=(v=Qt)?v.sampler:null,null!=(g=this.metallicSampler_2ylj7p$_0)&&(g.texture=this.metallicMap);var pe,ce,he=this.model,de=this.roughnessTexName_ht09qc$_0;t:do{var fe;for(pe=sc.ALL,fe=he.stages.values.iterator();fe.hasNext();){var _e=fe.next();if(0!=(_e.stage.mask&pe.mask)){var me,$e,ye=_e.nodes;e:do{var ve;for(ve=ye.iterator();ve.hasNext();){var ge=ve.next();if(Lt(ge.name,de)&&e.isType(ge,Ep)){$e=ge;break e}}$e=null}while(0);var be=null==(me=$e)||e.isType(me,Ep)?me:c();if(null!=be){ce=be;break t}}}ce=null}while(0);this.roughnessSampler_3dp96a$_0=null!=(b=ce)?b.sampler:null,null!=(x=this.roughnessSampler_3dp96a$_0)&&(x.texture=this.roughnessMap);var xe,we,ze=this.model,ke=this.occlusionTexName_l8ip4v$_0;t:do{var Se;for(xe=sc.ALL,Se=ze.stages.values.iterator();Se.hasNext();){var Ce=Se.next();if(0!=(Ce.stage.mask&xe.mask)){var Ne,Ee,Te=Ce.nodes;e:do{var Pe;for(Pe=Te.iterator();Pe.hasNext();){var Oe=Pe.next();if(Lt(Oe.name,ke)&&e.isType(Oe,Ep)){Ee=Oe;break e}}Ee=null}while(0);var Me=null==(Ne=Ee)||e.isType(Ne,Ep)?Ne:c();if(null!=Me){we=Me;break t}}}we=null}while(0);this.occlusionSampler_slvtxn$_0=null!=(w=we)?w.sampler:null,null!=(z=this.occlusionSampler_slvtxn$_0)&&(z.texture=this.occlusionMap);var je,Ae,Ie=this.model;t:do{var Re;for(je=sc.ALL,Re=Ie.stages.values.iterator();Re.hasNext();){var Le=Re.next();if(0!=(Le.stage.mask&je.mask)){var De,qe,Fe=Le.nodes;e:do{var Be;for(Be=Fe.iterator();Be.hasNext();){var Ue=Be.next();if(Lt(Ue.name,"tDisplacement")&&e.isType(Ue,Ep)){qe=Ue;break e}}qe=null}while(0);var Ve=null==(De=qe)||e.isType(De,Ep)?De:c();if(null!=Ve){Ae=Ve;break t}}}Ae=null}while(0);this.displacementSampler_8zs1vn$_0=null!=(k=Ae)?k.sampler:null,null!=(S=this.displacementSampler_8zs1vn$_0)&&(S.texture=this.displacementMap);var Ge,He,We=this.model;t:do{var Xe;for(Ge=sc.ALL,Xe=We.stages.values.iterator();Xe.hasNext();){var Ke=Xe.next();if(0!=(Ke.stage.mask&Ge.mask)){var Ye,Ze,Je=Ke.nodes;e:do{var Qe;for(Qe=Je.iterator();Qe.hasNext();){var ti=Qe.next();if(Lt(ti.name,"uDispStrength")&&e.isType(ti,Rp)){Ze=ti;break e}}Ze=null}while(0);var ei=null==(Ye=Ze)||e.isType(Ye,Rp)?Ye:c();if(null!=ei){He=ei;break t}}}He=null}while(0);this.uDispStrength_86lbd6$_0=He,null!=(C=this.uDispStrength_86lbd6$_0)&&(C.uniform.value=this.displacementStrength),zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},gv.prototype.defaultMrtPbrModel_2ufela$=function(t){var i,n,r,o=new tp("defaultMrtPbrModel()"),s={v:null},a={v:null},l={v:null},p={v:null},c={v:null},h={v:null},d=new ip(o);h.v=d.mvpNode();var f=d.namedVariable_wtmwsg$("modelMat",h.v.outModelMat),_=d.namedVariable_wtmwsg$("mvpMat",h.v.outMvpMat),m=f.output,$=_.output;if(t.isInstanced&&(f.input=d.multiplyNode_ze33is$(h.v.outModelMat,d.instanceAttrModelMat().output).output,_.input=d.multiplyNode_ze33is$(h.v.outMvpMat,d.instanceAttrModelMat().output).output),t.isSkinned){var y=d.skinTransformNode_78eraa$(d.attrJoints().output,d.attrWeights().output,t.maxJoints);f.input=d.multiplyNode_ze33is$(f.input,y.outJointMat).output,_.input=d.multiplyNode_ze33is$(_.input,y.outJointMat).output}var v=d.namedVariable_wtmwsg$("modelViewMat",d.multiplyNode_ze33is$(h.v.outViewMat,m).output).output;if(t.requiresTexCoords()){var g=d.namedVariable_wtmwsg$("texCoordInput",d.attrTexCoords().output);i=d.stageInterfaceNode_iikjwn$("ifTexCoords",g.output)}else i=null;c.v=i,n=t.albedoSource===vc()?d.stageInterfaceNode_iikjwn$("ifColors",d.attrColors().output):null,s.v=n;var b,w,k=t.morphAttributes.isEmpty()?null:d.morphWeightsNode_za3lpa$(t.morphAttributes.size),S=d.namedVariable_wtmwsg$("localPosInput",d.attrPositions().output),C=d.namedVariable_wtmwsg$("localNormalInput",d.attrNormals().output),N={v:S.output},E=t.morphAttributes,T=M();for(b=E.iterator();b.hasNext();){var P=b.next();u(P.name,ds().POSITIONS.name)&&T.add_11rb$(P)}for(w=T.iterator();w.hasNext();){var O=w.next(),j=d.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(O),x(k)),A=d.multiplyNode_ze33is$(d.attributeNode_nm2vx5$(O).output,j.outWeight);N.v=d.addNode_ze33is$(N.v,A.output).output}var I,R,L=d.namedVariable_wtmwsg$("localPosMorphed",N.v),D={v:C.output},q=t.morphAttributes,F=M();for(I=q.iterator();I.hasNext();){var B=I.next();u(B.name,ds().NORMALS.name)&&F.add_11rb$(B)}for(R=F.iterator();R.hasNext();){var U=R.next(),V=d.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(U),x(k)),G=d.multiplyNode_ze33is$(d.attributeNode_nm2vx5$(U).output,V.outWeight);D.v=d.addNode_ze33is$(D.v,G.output).output}var H=d.namedVariable_wtmwsg$("localNormalMorphed",D.v);if(t.isNormalMapped){var W,X,K=d.namedVariable_wtmwsg$("localTangentInput",d.attrTangents().output),Y={v:d.splitNode_500t7j$(K.output,"xyz").output},Z=t.morphAttributes,J=M();for(W=Z.iterator();W.hasNext();){var Q=W.next();u(Q.name,ds().TANGENTS.name)&&J.add_11rb$(Q)}for(X=J.iterator();X.hasNext();){var tt=X.next(),et=d.getMorphWeightNode_dcktnw$(t.morphAttributes.indexOf_11rb$(tt),x(k)),it=d.multiplyNode_ze33is$(d.attributeNode_nm2vx5$(tt).output,et.outWeight);Y.v=d.addNode_ze33is$(Y.v,it.output).output}var nt=d.vec3TransformNode_vid4wo$(Y.v,v,0),rt=d.combineXyzWNode_ze33is$(nt.outVec3,d.splitNode_500t7j$(K.output,"w").output);r=d.stageInterfaceNode_iikjwn$("ifTangents",rt.output)}else r=null;l.v=r;var ot=d.namedVariable_wtmwsg$("localPosDisplaced",L.output);if(t.isDisplacementMapped){var st=d.texture2dNode_61zpoe$("tDisplacement"),at=d.displacementMapNode_kq6xq$(st,x(c.v).input,L.output,H.output);at.inStrength=d.pushConstantNode1f_61zpoe$("uDispStrength").output;var lt=at;ot.input=lt.outPosition}var ut=d.vec3TransformNode_vid4wo$(H.output,v,0).outVec3;a.v=d.stageInterfaceNode_iikjwn$("ifNormals",ut);var pt=d.vec3TransformNode_vid4wo$(ot.output,v,1).outVec3;p.v=d.stageInterfaceNode_iikjwn$("ifViewPos",pt),d.positionOutput=d.vec4TransformNode_9krp9t$(ot.output,$).outVec4;var ct,ht,dt,ft,_t,mt,$t,yt,vt=new np(o),gt=p.v.output;switch(t.albedoSource.name){case"VERTEX_ALBEDO":ct=x(s.v).output;break;case"STATIC_ALBEDO":ct=vt.pushConstantNodeColor_61zpoe$("uAlbedo").output;break;case"TEXTURE_ALBEDO":var xt=vt.texture2dSamplerNode_fzevit$(vt.texture2dNode_61zpoe$("tAlbedo"),x(c.v).output),wt=vt.gammaNode_ze33is$(xt.outColor);if(t.isMultiplyAlbedoMap){var zt=vt.pushConstantNodeColor_61zpoe$("uAlbedo").output;ct=vt.multiplyNode_ze33is$(wt.outColor,zt).output}else ct=wt.outColor;break;case"CUBE_MAP_ALBEDO":throw bt("CUBE_MAP_ALBEDO is not allowed for PbrShader");default:ct=e.noWhenBranchMatched()}var kt={v:ct};if(null!=(dt=e.isType(ht=t.alphaMode,wc)?ht:null)&&vt.discardAlpha_ze33is$(vt.splitNode_500t7j$(kt.v,"a").output,vt.constFloat_mx4ult$(dt.cutOff)),e.isType(t.alphaMode,bc)||(kt.v=vt.combineXyzWNode_ze33is$(kt.v,vt.constFloat_mx4ult$(1)).output),t.isEmissiveMapped){var St=vt.texture2dSamplerNode_fzevit$(vt.texture2dNode_61zpoe$("tEmissive"),x(c.v).output).outColor;if(t.isMultiplyEmissiveMap){var Ct=vt.pushConstantNodeColor_61zpoe$("uEmissive").output;ft=vt.multiplyNode_ze33is$(St,Ct).output}else ft=St}else ft=vt.pushConstantNodeColor_61zpoe$("uEmissive").output;var Nt=ft,Et=vt.normalizeNode_r20yfm$(a.v.output).output;if(t.isNormalMapped&&null!=l.v){var Tt=vt.normalMapNode_pp0pk4$(vt.texture2dNode_61zpoe$("tNormal"),x(c.v).output,Et,l.v.output);Tt.inStrength=new op(new Pu(t.normalStrength)),_t=Tt.outNormal}else _t=Et;var Pt,Ot,Mt={v:_t};Mt.v=vt.flipBacksideNormalNode_r20yfm$(Mt.v).outNormal;var jt={v:vt.constFloat_mx4ult$(1)},At=z();if(t.isRoughnessMapped){var It=vt.texture2dSamplerNode_fzevit$(vt.texture2dNode_61zpoe$(t.roughnessTexName),x(c.v).output).outColor,Rt=t.roughnessTexName;At.put_xwzc9p$(Rt,It);var Lt=vt.splitNode_500t7j$(It,t.roughnessChannel).output;if(t.isMultiplyRoughnessMap){var Dt=vt.pushConstantNode1f_61zpoe$("uRoughness").output;mt=vt.multiplyNode_ze33is$(Lt,Dt).output}else mt=Lt;Pt=mt}else Pt=vt.pushConstantNode1f_61zpoe$("uRoughness").output;if(t.isMetallicMapped){var qt,Ft=t.metallicTexName,Bt=At.get_11rb$(Ft);if(null==Bt){var Ut=vt.texture2dSamplerNode_fzevit$(vt.texture2dNode_61zpoe$(t.metallicTexName),x(c.v).output).outColor;At.put_xwzc9p$(Ft,Ut),qt=Ut}else qt=Bt;var Vt=qt,Gt=t.metallicTexName;At.put_xwzc9p$(Gt,Vt);var Ht=vt.splitNode_500t7j$(Vt,t.metallicChannel).output;if(t.isMultiplyMetallicMap){var Wt=vt.pushConstantNode1f_61zpoe$("uMetallic").output;$t=vt.multiplyNode_ze33is$(Ht,Wt).output}else $t=Ht;Ot=$t}else Ot=vt.pushConstantNode1f_61zpoe$("uMetallic").output;if(t.isOcclusionMapped){var Xt,Kt=t.occlusionTexName,Yt=At.get_11rb$(Kt);if(null==Yt){var Zt=vt.texture2dSamplerNode_fzevit$(vt.texture2dNode_61zpoe$(t.occlusionTexName),x(c.v).output).outColor;At.put_xwzc9p$(Kt,Zt),Xt=Zt}else Xt=Yt;var Jt=Xt,Qt=t.occlusionTexName;At.put_xwzc9p$(Qt,Jt);var te=vt.splitNode_500t7j$(Jt,t.occlusionChannel).output;if(1!==t.occlusionStrength){var ee=t.occlusionStrength;yt=vt.addNode_ze33is$(vt.constFloat_mx4ult$(1-ee),vt.multiplyNode_tuikh5$(te,ee).output).output}else yt=te;jt.v=yt}var ie=vt.addNode_u9w9by$(new wv(vt.stage)),ne=Pt,re=Ot;ie.inViewPos=gt,ie.inAlbedo=kt.v,ie.inEmissive=Nt,ie.inViewNormal=Mt.v,ie.inRoughness=ne,ie.inMetallic=re,ie.inAo=jt.v;var oe=ie,se=vt.colorOutput_a3v4si$(void 0,4);return se.inColors[0]=oe.outPositionAo,se.inColors[1]=oe.outNormalRough,se.inColors[2]=oe.outAlbedoMetallic,se.inColors[3]=oe.outEmissive,o},gv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bv=null;function xv(){return null===bv&&new gv,bv}function wv(t){rp.call(this,"mrtMultiplex",t,hc().mask),this.inViewPos=new op(new Mu(Er().ZERO)),this.inAlbedo=new op(new Mu(Er().ZERO)),this.inEmissive=new op(new Mu(Er().ZERO)),this.inViewNormal=new op(new Mu(Er().ZERO)),this.inRoughness=new op(new Pu(.5)),this.inMetallic=new op(new Pu(0)),this.inAo=new op(new Pu(1)),this.outPositionAo=new op(new zu("outPositionAo"),this),this.outNormalRough=new op(new zu("outNormalRough"),this),this.outAlbedoMetallic=new op(new zu("outAlbedoMetallic"),this),this.outEmissive=new op(new zu("outEmissive"),this)}function zv(t){rp.call(this,"mrtDeMultiplex",t,hc().mask),this.inPositionAo=new op(new ju(Qr().ZERO)),this.inNormalRough=new op(new ju(Qr().ZERO)),this.inAlbedoMetallic=new op(new ju(Qr().ZERO)),this.inEmissive=new op(new Mu(Er().ZERO)),this.outViewPos=new op(new zu("outViewPos"),this),this.outAlbedo=new op(new zu("outAlbedo"),this),this.outEmissive=new op(new wu("outEmissive"),this),this.outViewNormal=new op(new wu("outViewNormal"),this),this.outRoughness=new op(new bu("outRoughness"),this),this.outMetallic=new op(new bu("outMetallic"),this),this.outAo=new op(new bu("outAo"),this)}function kv(t,e){var i,n;this.scene=t,this.mrtPass=null,this.pbrPass=null,this.aoPipeline=null,this.reflectionPass=null,this.reflectionDenoisePass=null,this.shadowMaps=null,this.renderOutput=null,this.noSsrMap_0=new jh(new Ey(0,0,0,0)),this.maxGlobalLights_0=e.maxGlobalLights,this.isAoAvailable_0=e.isWithAmbientOcclusion,this.isssrAvailable_0=e.isWithScreenSpaceReflections,this.isEnabled_4awwas$_0=!0,this.isAoEnabled_1ruccy$_0=this.isAoAvailable_0,this.isSsrEnabled_blaxhc$_0=this.isssrAvailable_0,this.reflectionMapSize=.7,this.mrtPass=new pv(this.scene,e.isWithEmissive),this.aoPipeline=e.isWithAmbientOcclusion?cy().createDeferred_4lrvgg$(this.scene,this.mrtPass):null,this.shadowMaps=null!=(i=e.shadowMaps)?i:this.createShadowMapsFromSceneLights_0();var r,o=e.pbrSceneShader;if(null==o){var a=new Bv;a.isWithEmissive=e.isWithEmissive,a.isScrSpcAmbientOcclusion=e.isWithAmbientOcclusion,a.isScrSpcReflections=e.isWithScreenSpaceReflections,a.maxLights=e.maxGlobalLights,wt(a.shadowMaps,this.shadowMaps),a.useImageBasedLighting_po417x$(e.environmentMaps),o=new Lv(a)}o.setMrtMaps_u6tred$(this.mrtPass),this.pbrPass=new Av(this.scene,this.mrtPass,o),this.pbrPass.sceneShader.scrSpcAmbientOcclusionMap=null!=(n=this.aoPipeline)?n.aoMap:null,e.isWithScreenSpaceReflections?(this.reflectionPass=new Wv(this.mrtPass,this.pbrPass,e.baseReflectionStep),this.reflectionDenoisePass=new Uv(this.reflectionPass,this.mrtPass.positionAo),this.pbrPass.sceneShader.scrSpcReflectionMap=this.reflectionDenoisePass.colorTexture,this.scene.addOffscreenPass_m1c2kf$(this.reflectionPass),this.scene.addOffscreenPass_m1c2kf$(this.reflectionDenoisePass)):(this.reflectionPass=null,this.reflectionDenoisePass=null),this.renderOutput=this.pbrPass.createOutputQuad(),this.scene.onRenderScene.add_11rb$((r=this,function(t,e){var i,n=t.mainRenderPass.viewport.width,o=t.mainRenderPass.viewport.height;if(n>0&&o>0&&(n!==r.mrtPass.width||o!==r.mrtPass.height)&&(r.mrtPass.resize_w70mbp$(n,o,e),r.pbrPass.resize_w70mbp$(n,o,e)),null!=(i=r.reflectionPass)){var a,l=r,u=Dt(n*l.reflectionMapSize),p=Dt(o*l.reflectionMapSize);u>0&&p>0&&(u!==i.width||p!==i.height)&&(i.resize_w70mbp$(u,p,e),null!=(a=l.reflectionDenoisePass)&&a.resize_w70mbp$(u,p,e))}return s})),this.scene.onDispose.add_11rb$(function(t){return function(e,i){return t.noSsrMap_0.dispose(),s}}(this))}function Sv(){this.isWithEmissive=!1,this.isWithAmbientOcclusion=!0,this.isWithScreenSpaceReflections=!0,this.isWithImageBasedLighting=!1,this.maxGlobalLights=4,this.lightBacksides=!1,this.baseReflectionStep=.1,this.environmentMaps=null,this.shadowMaps=null,this.pbrSceneShader=null}function Cv(t){this.lightInstances=M(),this.isDynamic=!0,this.lightInstanceData_0=new qk(At([Uk().MODEL_MAT,lv().LIGHT_POS,ds().COLORS]),1e4),this.modelMat_0=new En,this.encodedLightData_0=new Float32Array(8);var e=new vf(new Dz(Ft(ds().POSITIONS)),null);e.isFrustumChecked=!1,e.instances=this.lightInstanceData_0,e.generate_v2sixm$(Ev);var i=new uv;i.lightType=ff(),i.sceneCamera=t.camera,i.positionAo=t.positionAo,i.normalRoughness=t.normalRoughness,i.albedoMetal=t.albedoMetal;var n,r=i;e.shader=new ov(r),e.onUpdate.add_11rb$((n=this,function(t,e){return n.isDynamic&&n.updateLightData(),s})),this.mesh=e}function Nv(){this.position=Mr(),this.color=Ay(Oy().WHITE),this.intensity=1}function Ev(t){var e=(new Ak).icoDefaults();return e.steps=0,e.radius=1.176,t.icoSphere_mojs8w$(e),s}function Tv(t){rp.call(this,"discardClear",t),this.inViewPos=new op(new ju(Qr().ZERO))}function Pv(t){rp.call(this,"deferredCam",t),this.uProjMat_0=new Td("uProjMat"),this.uInvViewMat_0=new Td("uInvViewMat"),this.uCamPos_0=new wd("uCamPos"),this.uViewport_0=new wd("uViewport"),this.outProjMat=new op(new Tu(this.uProjMat_0.name),this),this.outInvViewMat=new op(new Tu(this.uInvViewMat_0.name),this),this.outCamPos=new op(new zu(this.uCamPos_0.name),this),this.outViewport=new op(new zu(this.uViewport_0.name),this),this.sceneCam=null}function Ov(t){return function(e){return e.unaryPlus_wq3w46$(function(t){return function(){return t.uProjMat_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uInvViewMat_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uCamPos_0}}(t)),e.unaryPlus_wq3w46$(function(t){return function(){return t.uViewport_0}}(t)),e.onUpdate=function(t){return function(e,i){var n=t.sceneCam;null!=n&&(t.uProjMat_0.value.set_d4zu6l$(n.proj),t.uInvViewMat_0.value.set_d4zu6l$(n.invView),t.uCamPos_0.value.set_2qa7tb$(n.globalPos,1));var r=i.renderPass.viewport;return t.uViewport_0.value.set_7b5o5w$(r.x,r.y,r.width,r.height),s}}(t),s}}function Mv(t,e){this.maxSpotAngle=t,this.lightInstances=M(),this.isDynamic=!0,this.lightInstanceData_0=new qk(At([Uk().MODEL_MAT,lv().LIGHT_POS,lv().LIGHT_DIR,ds().COLORS]),1e4),this.modelMat_0=new En,this.encodedLightData_0=new Float32Array(12),this.tmpLightDir_0=Mr();var i,n=new vf(new Dz(Ft(ds().POSITIONS)),null);n.isFrustumChecked=!1,n.instances=this.lightInstanceData_0,n.generate_v2sixm$((i=this,function(t){return i.makeHalfSphereCone_0(t,i.maxSpotAngle,1.17),s}));var r=new uv;r.lightType=_f(),r.sceneCamera=e.camera,r.positionAo=e.positionAo,r.normalRoughness=e.normalRoughness,r.albedoMetal=e.albedoMetal;var o=r;n.shader=new ov(o),n.onUpdate.add_11rb$(function(t){return function(e,i){return t.isDynamic&&t.updateLightData(),s}}(this)),this.mesh=n}function jv(){this.position=Mr(),this.orientation=new $n,this.spotAngle=60,this.color=Ay(Oy().WHITE),this.intensity=1}function Av(t,i,n){var r,o=new lf,a=new pa;a.name="PbrLightingPass",a.setSize_vux9f0$(i.config.width,i.config.height),a.addColorTexture_farcsl$($h()),a.clearDepthTexture(),$a.call(this,o,new ua(a)),this.mrtPass=i,this.sceneShader=n,this.dynamicPointLights=new Cv(this.mrtPass),this.staticPointLights=new Cv(this.mrtPass),this.mutSpotLights_0=M(),this.content=e.isType(r=this.drawNode,lf)?r:c(),this.dynamicPointLights.isDynamic=!0,this.staticPointLights.isDynamic=!1,this.lighting=t.lighting,this.clearColor=new Ey(0,0,0,0),this.camera=this.mrtPass.camera,t.addOffscreenPass_m1c2kf$(this);var l=this.content;l.isFrustumChecked=!1;var u,p,h=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);h.isFrustumChecked=!1,h.generate_v2sixm$(Rv),h.shader=this.sceneShader,l.unaryPlus_uv0sim$(h),l.unaryPlus_uv0sim$(this.dynamicPointLights.mesh),l.unaryPlus_uv0sim$(this.staticPointLights.mesh),this.dependsOn_yqp8fe$(this.mrtPass),t.mainRenderPass.onAfterCollectDrawCommands.add_11rb$((u=this,p=t,function(t){var e;if(u.isEnabled){e=u.mrtPass.alphaMeshes_8be2vx$;for(var i=0;i!==e.size;++i)p.mainRenderPass.drawQueue.addMesh_sbx4mf$(u.mrtPass.alphaMeshes_8be2vx$.get_za3lpa$(i),t)}return s}))}function Iv(t){var e=new Ik;return e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Rv(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Lv(t,e){var i,n,r;Fv(),void 0===e&&(e=Fv().defaultDeferredPbrModel_ijjr66$(t)),zc.call(this,e),this.deferredCameraNode_0=null,this.sceneCamera_79hi92$_0=null,this.depthSampler_0=null,this.positionAoSampler_0=null,this.normalRoughnessSampler_0=null,this.albedoMetalSampler_0=null,this.emissiveSampler_0=null,this.depth_tvzo14$_0=null,this.positionAo_xpzjm6$_0=null,this.normalRoughness_ruv8si$_0=null,this.albedoMetal_4sc1kt$_0=null,this.emissive_4k8acu$_0=null,this.uAmbient_0=null,this.ambient_kdw3d9$_0=new Ey(.03,.03,.03,1),this.irradianceMapSampler_0=null,this.reflectionMapSampler_0=null,this.brdfLutSampler_0=null,this.irradianceMap_33niit$_0=null!=(i=t.environmentMaps)?i.irradianceMap:null,this.reflectionMap_496w8q$_0=null!=(n=t.environmentMaps)?n.reflectionMap:null,this.brdfLut_bolscy$_0=null!=(r=t.environmentMaps)?r.brdfLut:null,this.ssaoSampler_0=null,this.scrSpcAmbientOcclusionMap_4r7yg8$_0=null,this.ssrSampler_0=null,this.scrSpcReflectionMap_b22z3y$_0=null;var o,s=I(t.shadowMaps.size);o=s.length-1|0;for(var a=0;a<=o;a++)s[a]=t.shadowMaps.get_za3lpa$(a);this.shadowMaps_0=s;var l,u=I(this.shadowMaps_0.length);l=u.length-1|0;for(var p=0;p<=l;p++)u[p]=null;this.depthSamplers_0=u,this.isReceivingShadow_0=!t.shadowMaps.isEmpty()}function Dv(){qv=this}wv.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inViewPos,this.inAlbedo,this.inEmissive,this.inViewNormal,this.inRoughness,this.inMetallic,this.inAo])},wv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                "+this.outPositionAo.declare()+" = vec4("+this.inViewPos.ref3f_61zpoe$()+", "+this.inAo.ref1f_61zpoe$()+");\n                "+this.outNormalRough.declare()+" = vec4("+this.inViewNormal.ref3f_61zpoe$()+", "+this.inRoughness.ref1f_61zpoe$()+");\n                "+this.outAlbedoMetallic.declare()+" = vec4("+this.inAlbedo.ref3f_61zpoe$()+", "+this.inMetallic.ref1f_61zpoe$()+");\n                "+this.outEmissive.declare()+" = vec4("+this.inEmissive.ref3f_61zpoe$()+", 1.0);\n            ")},wv.$metadata$={kind:$,simpleName:"MrtMultiplexNode",interfaces:[rp]},zv.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inPositionAo,this.inNormalRough,this.inAlbedoMetallic])},zv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                "+this.outViewPos.declare()+" = vec4("+this.inPositionAo.ref3f_61zpoe$()+", 1.0);\n                "+this.outAlbedo.declare()+" = vec4("+this.inAlbedoMetallic.ref3f_61zpoe$()+", 1.0);\n                "+this.outEmissive.declare()+" = "+this.inEmissive.ref3f_61zpoe$()+";\n                "+this.outViewNormal.declare()+" = normalize("+this.inNormalRough.ref3f_61zpoe$()+");\n                "+this.outRoughness.declare()+" = "+this.inNormalRough.ref4f_61zpoe$()+".a;\n                "+this.outMetallic.declare()+" = "+this.inAlbedoMetallic.ref4f_61zpoe$()+".a;\n                "+this.outAo.declare()+" = "+this.inPositionAo.ref4f_61zpoe$()+".a;\n            ")},zv.$metadata$={kind:$,simpleName:"MrtDeMultiplexNode",interfaces:[rp]},vv.$metadata$={kind:$,simpleName:"DeferredPbrShader",interfaces:[zc]},Object.defineProperty(kv.prototype,"contentGroup",{configurable:!0,get:function(){return this.mrtPass.content}}),Object.defineProperty(kv.prototype,"isEnabled",{configurable:!0,get:function(){return this.isEnabled_4awwas$_0},set:function(t){this.isEnabled_4awwas$_0=t,this.updateEnabled_0()}}),Object.defineProperty(kv.prototype,"isAoEnabled",{configurable:!0,get:function(){return this.isAoEnabled_1ruccy$_0},set:function(t){this.isAoEnabled_1ruccy$_0=t&&this.isAoAvailable_0,this.updateEnabled_0()}}),Object.defineProperty(kv.prototype,"isSsrEnabled",{configurable:!0,get:function(){return this.isSsrEnabled_blaxhc$_0},set:function(t){this.isSsrEnabled_blaxhc$_0=t&&this.isssrAvailable_0,this.updateEnabled_0()}}),kv.prototype.updateEnabled_0=function(){var t,e,i,n,r;for(r=this.shadowMaps.iterator();r.hasNext();)r.next().isShadowMapEnabled=this.isEnabled;null!=(t=this.aoPipeline)&&(t.isEnabled=this.isEnabled&&this.isAoEnabled),this.mrtPass.isEnabled=this.isEnabled,this.pbrPass.isEnabled=this.isEnabled,null!=(e=this.reflectionPass)&&(e.isEnabled=this.isEnabled&&this.isSsrEnabled),null!=(i=this.reflectionDenoisePass)&&(i.isEnabled=this.isEnabled&&this.isSsrEnabled),this.pbrPass.sceneShader.scrSpcReflectionMap=this.isSsrEnabled?null!=(n=this.reflectionDenoisePass)?n.colorTexture:null:this.noSsrMap_0},kv.prototype.createShadowMapsFromSceneLights_0=function(){var t,i,n=M(),r=this.maxGlobalLights_0,o=this.scene.lighting.lights.size;t=A.min(r,o);for(var s=0;s<t;s++){switch(this.scene.lighting.lights.get_za3lpa$(s).type.name){case"DIRECTIONAL":i=new mS(this.scene,s,void 0,void 0,void 0,this.mrtPass.content);break;case"SPOT":i=new fS(this.scene,s,void 0,this.mrtPass.content);break;case"POINT":var a=DE.Log,l=$k.WARN,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"Point light shadow maps not yet supported"),i=null;break;default:i=e.noWhenBranchMatched()}var p=i;null!=p&&n.add_11rb$(p)}return n},kv.$metadata$={kind:$,simpleName:"DeferredPipeline",interfaces:[]},Sv.prototype.useShadowMaps_gdx315$=function(t){this.shadowMaps=t},Sv.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isWithImageBasedLighting=null!=t},Sv.$metadata$={kind:$,simpleName:"DeferredPipelineConfig",interfaces:[]},Cv.prototype.updateLightData=function(){var t;this.lightInstanceData_0.clear();var e=this.lightInstances.size,i=this.lightInstanceData_0.maxInstances;t=A.min(e,i);for(var n=0;n<t;n++){var r=this.lightInstanceData_0;r.checkBufferSize_za3lpa$();var o=r.dataF.position,s=r.dataF;this.encodeLight_0(this.lightInstances.get_za3lpa$(n)),s.put_q3cr5i$(this.modelMat_0.matrix),s.put_q3cr5i$(this.encodedLightData_0);var a=r.dataF.position-o|0;if(a!==r.instanceSizeF)throw bt("Expected data to grow by "+r.instanceSizeF+" elements, instead it grew by "+a);r.numInstances=r.numInstances+1|0,r.hasChanged=!0}},Cv.prototype.encodeLight_0=function(t){this.modelMat_0.setIdentity(),this.modelMat_0.translate_czzhiu$(t.position);var e=t.intensity,i=A.sqrt(e);this.modelMat_0.scale_y2kzbl$(i,i,i),this.encodedLightData_0[0]=t.position.x,this.encodedLightData_0[1]=t.position.y,this.encodedLightData_0[2]=t.position.z,this.encodedLightData_0[3]=ff().encoded,this.encodedLightData_0[4]=t.color.r,this.encodedLightData_0[5]=t.color.g,this.encodedLightData_0[6]=t.color.b,this.encodedLightData_0[7]=t.intensity},Cv.prototype.addPointLight_at6cwi$=function(t){this.lightInstances.add_11rb$(t)},Cv.prototype.addPointLight_v2bnrz$=X("kool-kool-core.de.fabmax.kool.util.deferred.DeferredPointLights.addPointLight_v2bnrz$",K((function(){var e=t.de.fabmax.kool.util.deferred.DeferredPointLights.PointLight;return function(t){var i=new e;return t(i),this.addPointLight_at6cwi$(i),i}}))),Cv.prototype.removePointLight_at6cwi$=function(t){this.lightInstances.remove_11rb$(t)},Nv.$metadata$={kind:$,simpleName:"PointLight",interfaces:[]},Cv.$metadata$={kind:$,simpleName:"DeferredPointLights",interfaces:[]},Tv.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inViewPos)},Tv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("if ("+this.inViewPos.name+".z > 0.0) { discard; }")},Tv.$metadata$={kind:$,simpleName:"DiscardClearNode",interfaces:[rp]},Pv.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),t.descriptorSet.uniformBuffer_2ydyu8$(this.name,[t.stage],Ov(this))},Pv.$metadata$={kind:$,simpleName:"DeferredCameraNode",interfaces:[rp]},Mv.prototype.updateLightData=function(){var t;this.lightInstanceData_0.clear();var e=this.lightInstances.size,i=this.lightInstanceData_0.maxInstances;t=A.min(e,i);for(var n=0;n<t;n++){var r=this.lightInstanceData_0;r.checkBufferSize_za3lpa$();var o=r.dataF.position,s=r.dataF;this.encodeLight_0(this.lightInstances.get_za3lpa$(n)),s.put_q3cr5i$(this.modelMat_0.matrix),s.put_q3cr5i$(this.encodedLightData_0);var a=r.dataF.position-o|0;if(a!==r.instanceSizeF)throw bt("Expected data to grow by "+r.instanceSizeF+" elements, instead it grew by "+a);r.numInstances=r.numInstances+1|0,r.hasChanged=!0}},Mv.prototype.encodeLight_0=function(t){this.modelMat_0.setIdentity(),this.modelMat_0.translate_czzhiu$(t.position);var e=t.intensity,i=A.sqrt(e);this.modelMat_0.scale_y2kzbl$(i,i,i),this.modelMat_0.rotate_d4zu7e$(t.orientation),this.tmpLightDir_0.set_czzhiu$(Er().X_AXIS),t.orientation.transform_5s4mqq$(this.tmpLightDir_0),this.encodedLightData_0[0]=t.position.x,this.encodedLightData_0[1]=t.position.y,this.encodedLightData_0[2]=t.position.z,this.encodedLightData_0[3]=_f().encoded,this.encodedLightData_0[4]=this.tmpLightDir_0.x,this.encodedLightData_0[5]=this.tmpLightDir_0.y,this.encodedLightData_0[6]=this.tmpLightDir_0.z;var n=this.encodedLightData_0,r=this.maxSpotAngle,o=t.spotAngle,s=A.min(r,o)/2*EE.DEG_2_RAD;n[7]=A.cos(s),this.encodedLightData_0[8]=t.color.r,this.encodedLightData_0[9]=t.color.g,this.encodedLightData_0[10]=t.color.b,this.encodedLightData_0[11]=t.intensity},Mv.prototype.addSpotLight_sdnkeo$=function(t){this.lightInstances.add_11rb$(t)},Mv.prototype.addSpotLight_g3dtq9$=X("kool-kool-core.de.fabmax.kool.util.deferred.DeferredSpotLights.addSpotLight_g3dtq9$",K((function(){var e=t.de.fabmax.kool.util.deferred.DeferredSpotLights.SpotLight;return function(t){var i=new e;return t(i),this.addSpotLight_sdnkeo$(i),i}}))),Mv.prototype.removeSpotLight_sdnkeo$=function(t){this.lightInstances.remove_11rb$(t)},jv.prototype.setDirection_czzhiu$=function(t){var e=t.dot_czzhiu$(Er().Y_AXIS),i=A.abs(e)>.9?Er().X_AXIS:Er().Y_AXIS,n=t.cross_2gj7b4$(i,Mr()),r=t.cross_2gj7b4$(n,Mr());this.orientation.setColVec_ky00qo$(0,t),this.orientation.setColVec_ky00qo$(1,n),this.orientation.setColVec_ky00qo$(2,r)},jv.$metadata$={kind:$,simpleName:"SpotLight",interfaces:[]},Mv.prototype.makeHalfSphereCone_0=function(t,e,i){for(var n=(e<0?0:e>360?360:e)/2,r=B(4*n/180),o=t.vertex_n440gp$(new Sr(i,0,0),Er().X_AXIS),s=0;s<8;s++){var a=45*EE.DEG_2_RAD,l=n*EE.DEG_2_RAD,u=A.min(a,l),p=A.cos(u)*i,c=A.sin(u)*i,h=2*U.PI*s/8,d=A.sin(h)*c,f=2*U.PI*s/8,_=new Sr(p,d,A.cos(f)*c),m=t.vertex_n440gp$(_,_);s>0&&t.geometry.addTriIndices_qt1dr2$(o,m,m-1|0),7===s&&t.geometry.addTriIndices_qt1dr2$(o,m-8+1|0,m)}for(var $=0;$<r;$++)for(var y=$<(r-1|0)?45*($+2|0)*EE.DEG_2_RAD:n*EE.DEG_2_RAD,v=0;v<8;v++){var g=A.cos(y)*i,b=A.sin(y)*i,x=2*U.PI*v/8,w=A.sin(x)*b,z=2*U.PI*v/8,k=new Sr(g,w,A.cos(z)*b),S=t.vertex_n440gp$(k,k);v>0&&(t.geometry.addTriIndices_qt1dr2$(S,S-1|0,S-8|0),t.geometry.addTriIndices_qt1dr2$(S-1|0,S-8-1|0,S-8|0)),7===v&&(t.geometry.addTriIndices_qt1dr2$(S,S-8|0,S-16+1|0),t.geometry.addTriIndices_qt1dr2$(S-8+1|0,S,S-16+1|0))}for(var C=t.vertex_n440gp$(new Sr(-.1,0,0),Er().NEG_X_AXIS),N=0;N<8;N++)N<7?t.geometry.addTriIndices_qt1dr2$(C,C-8+N|0,C-8+N+1|0):t.geometry.addTriIndices_qt1dr2$(C,C-1|0,C-8|0)},Mv.$metadata$={kind:$,simpleName:"DeferredSpotLights",interfaces:[]},Object.defineProperty(Av.prototype,"spotLights",{configurable:!0,get:function(){return this.mutSpotLights_0}}),Av.prototype.addSpotLights_mx4ult$=function(t){var e=new Mv(t,this.mrtPass);return this.content.plusAssign_f1kmr1$(e.mesh),this.mutSpotLights_0.add_11rb$(e),e},Av.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},Av.prototype.createOutputQuad=function(){return yf(void 0,void 0,(t=this,function(e){return e.isFrustumChecked=!1,e.generate_v2sixm$(Iv),e.shader=new _v(x(t.colorTexture),x(t.mrtPass.depthTexture)),s}));var t},Av.$metadata$={kind:$,simpleName:"PbrLightingPass",interfaces:[$a]},Object.defineProperty(Lv.prototype,"sceneCamera",{configurable:!0,get:function(){return this.sceneCamera_79hi92$_0},set:function(t){var e;this.sceneCamera_79hi92$_0=t,null!=(e=this.deferredCameraNode_0)&&(e.sceneCam=t)}}),Object.defineProperty(Lv.prototype,"depth",{configurable:!0,get:function(){return this.depth_tvzo14$_0},set:function(t){var e;this.depth_tvzo14$_0=t,null!=(e=this.depthSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"positionAo",{configurable:!0,get:function(){return this.positionAo_xpzjm6$_0},set:function(t){var e;this.positionAo_xpzjm6$_0=t,null!=(e=this.positionAoSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"normalRoughness",{configurable:!0,get:function(){return this.normalRoughness_ruv8si$_0},set:function(t){var e;this.normalRoughness_ruv8si$_0=t,null!=(e=this.normalRoughnessSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"albedoMetal",{configurable:!0,get:function(){return this.albedoMetal_4sc1kt$_0},set:function(t){var e;this.albedoMetal_4sc1kt$_0=t,null!=(e=this.albedoMetalSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"emissive",{configurable:!0,get:function(){return this.emissive_4k8acu$_0},set:function(t){var e;this.emissive_4k8acu$_0=t,null!=(e=this.emissiveSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"ambient",{configurable:!0,get:function(){return this.ambient_kdw3d9$_0},set:function(t){var e,i,n;this.ambient_kdw3d9$_0=t,null!=(n=null!=(i=null!=(e=this.uAmbient_0)?e.uniform:null)?i.value:null)&&n.set_czzhhz$(t)}}),Object.defineProperty(Lv.prototype,"irradianceMap",{configurable:!0,get:function(){return this.irradianceMap_33niit$_0},set:function(t){var e;this.irradianceMap_33niit$_0=t,null!=(e=this.irradianceMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"reflectionMap",{configurable:!0,get:function(){return this.reflectionMap_496w8q$_0},set:function(t){var e;this.reflectionMap_496w8q$_0=t,null!=(e=this.reflectionMapSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"brdfLut",{configurable:!0,get:function(){return this.brdfLut_bolscy$_0},set:function(t){var e;this.brdfLut_bolscy$_0=t,null!=(e=this.brdfLutSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"scrSpcAmbientOcclusionMap",{configurable:!0,get:function(){return this.scrSpcAmbientOcclusionMap_4r7yg8$_0},set:function(t){var e;this.scrSpcAmbientOcclusionMap_4r7yg8$_0=t,null!=(e=this.ssaoSampler_0)&&(e.texture=t)}}),Object.defineProperty(Lv.prototype,"scrSpcReflectionMap",{configurable:!0,get:function(){return this.scrSpcReflectionMap_b22z3y$_0},set:function(t){var e;this.scrSpcReflectionMap_b22z3y$_0=t,null!=(e=this.ssrSampler_0)&&(e.texture=t)}}),Lv.prototype.setMrtMaps_u6tred$=function(t){this.sceneCamera=t.camera,this.depth=t.depthTexture,this.positionAo=t.positionAo,this.normalRoughness=t.normalRoughness,this.albedoMetal=t.albedoMetal,this.emissive=t.emissive},Lv.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.depthTest=vl(),t.blendMode=hl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Lv.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S,C,N,E,T,P,O=this.model;t:do{var M;for(T=sc.ALL,M=O.stages.values.iterator();M.hasNext();){var j=M.next();if(0!=(j.stage.mask&T.mask)){var A,I,R=j.nodes;e:do{var L;for(L=R.iterator();L.hasNext();){var D=L.next();if(Lt(D.name,"deferredCam")&&e.isType(D,Pv)){I=D;break e}}I=null}while(0);var q=null==(A=I)||e.isType(A,Pv)?A:c();if(null!=q){P=q;break t}}}P=null}while(0);this.deferredCameraNode_0=P,null!=(r=this.deferredCameraNode_0)&&(r.sceneCam=this.sceneCamera);var F,B,U=this.model;t:do{var V;for(F=sc.ALL,V=U.stages.values.iterator();V.hasNext();){var G=V.next();if(0!=(G.stage.mask&F.mask)){var H,W,X=G.nodes;e:do{var K;for(K=X.iterator();K.hasNext();){var Y=K.next();if(Lt(Y.name,"depth")&&e.isType(Y,Ep)){W=Y;break e}}W=null}while(0);var Z=null==(H=W)||e.isType(H,Ep)?H:c();if(null!=Z){B=Z;break t}}}B=null}while(0);this.depthSampler_0=null!=(o=B)?o.sampler:null,null!=(s=this.depthSampler_0)&&(s.texture=this.depth);var J,Q,tt=this.model;t:do{var et;for(J=sc.ALL,et=tt.stages.values.iterator();et.hasNext();){var it=et.next();if(0!=(it.stage.mask&J.mask)){var nt,rt,ot=it.nodes;e:do{var st;for(st=ot.iterator();st.hasNext();){var at=st.next();if(Lt(at.name,"positionAo")&&e.isType(at,Ep)){rt=at;break e}}rt=null}while(0);var lt=null==(nt=rt)||e.isType(nt,Ep)?nt:c();if(null!=lt){Q=lt;break t}}}Q=null}while(0);this.positionAoSampler_0=null!=(a=Q)?a.sampler:null,null!=(l=this.positionAoSampler_0)&&(l.texture=this.positionAo);var ut,pt,ct=this.model;t:do{var ht;for(ut=sc.ALL,ht=ct.stages.values.iterator();ht.hasNext();){var dt=ht.next();if(0!=(dt.stage.mask&ut.mask)){var ft,_t,mt=dt.nodes;e:do{var $t;for($t=mt.iterator();$t.hasNext();){var yt=$t.next();if(Lt(yt.name,"normalRoughness")&&e.isType(yt,Ep)){_t=yt;break e}}_t=null}while(0);var vt=null==(ft=_t)||e.isType(ft,Ep)?ft:c();if(null!=vt){pt=vt;break t}}}pt=null}while(0);this.normalRoughnessSampler_0=null!=(u=pt)?u.sampler:null,null!=(p=this.normalRoughnessSampler_0)&&(p.texture=this.normalRoughness);var gt,bt,xt=this.model;t:do{var wt;for(gt=sc.ALL,wt=xt.stages.values.iterator();wt.hasNext();){var zt=wt.next();if(0!=(zt.stage.mask&gt.mask)){var kt,St,Ct=zt.nodes;e:do{var Nt;for(Nt=Ct.iterator();Nt.hasNext();){var Et=Nt.next();if(Lt(Et.name,"albedoMetal")&&e.isType(Et,Ep)){St=Et;break e}}St=null}while(0);var Tt=null==(kt=St)||e.isType(kt,Ep)?kt:c();if(null!=Tt){bt=Tt;break t}}}bt=null}while(0);this.albedoMetalSampler_0=null!=(h=bt)?h.sampler:null,null!=(d=this.albedoMetalSampler_0)&&(d.texture=this.albedoMetal);var Pt,Ot,Mt=this.model;t:do{var jt;for(Pt=sc.ALL,jt=Mt.stages.values.iterator();jt.hasNext();){var At=jt.next();if(0!=(At.stage.mask&Pt.mask)){var It,Rt,Dt=At.nodes;e:do{var qt;for(qt=Dt.iterator();qt.hasNext();){var Ft=qt.next();if(Lt(Ft.name,"emissive")&&e.isType(Ft,Ep)){Rt=Ft;break e}}Rt=null}while(0);var Bt=null==(It=Rt)||e.isType(It,Ep)?It:c();if(null!=Bt){Ot=Bt;break t}}}Ot=null}while(0);this.emissiveSampler_0=null!=(f=Ot)?f.sampler:null,null!=(_=this.emissiveSampler_0)&&(_.texture=this.emissive);var Ut,Vt,Gt=this.model;t:do{var Ht;for(Ut=sc.ALL,Ht=Gt.stages.values.iterator();Ht.hasNext();){var Wt=Ht.next();if(0!=(Wt.stage.mask&Ut.mask)){var Xt,Kt,Yt=Wt.nodes;e:do{var Zt;for(Zt=Yt.iterator();Zt.hasNext();){var Jt=Zt.next();if(Lt(Jt.name,"uAmbient")&&e.isType(Jt,Fp)){Kt=Jt;break e}}Kt=null}while(0);var Qt=null==(Xt=Kt)||e.isType(Xt,Fp)?Xt:c();if(null!=Qt){Vt=Qt;break t}}}Vt=null}while(0);this.uAmbient_0=Vt,null!=(y=null!=($=null!=(m=this.uAmbient_0)?m.uniform:null)?$.value:null)&&y.set_czzhhz$(this.ambient);var te,ee,ie=this.model;t:do{var ne;for(te=sc.ALL,ne=ie.stages.values.iterator();ne.hasNext();){var re=ne.next();if(0!=(re.stage.mask&te.mask)){var oe,se,ae=re.nodes;e:do{var le;for(le=ae.iterator();le.hasNext();){var ue=le.next();if(Lt(ue.name,"irradianceMap")&&e.isType(ue,Mp)){se=ue;break e}}se=null}while(0);var pe=null==(oe=se)||e.isType(oe,Mp)?oe:c();if(null!=pe){ee=pe;break t}}}ee=null}while(0);this.irradianceMapSampler_0=null!=(v=ee)?v.sampler:null,null!=(g=this.irradianceMapSampler_0)&&(g.texture=this.irradianceMap);var ce,he,de=this.model;t:do{var fe;for(ce=sc.ALL,fe=de.stages.values.iterator();fe.hasNext();){var _e=fe.next();if(0!=(_e.stage.mask&ce.mask)){var me,$e,ye=_e.nodes;e:do{var ve;for(ve=ye.iterator();ve.hasNext();){var ge=ve.next();if(Lt(ge.name,"reflectionMap")&&e.isType(ge,Mp)){$e=ge;break e}}$e=null}while(0);var be=null==(me=$e)||e.isType(me,Mp)?me:c();if(null!=be){he=be;break t}}}he=null}while(0);this.reflectionMapSampler_0=null!=(b=he)?b.sampler:null,null!=(x=this.reflectionMapSampler_0)&&(x.texture=this.reflectionMap);var xe,we,ze=this.model;t:do{var ke;for(xe=sc.ALL,ke=ze.stages.values.iterator();ke.hasNext();){var Se=ke.next();if(0!=(Se.stage.mask&xe.mask)){var Ce,Ne,Ee=Se.nodes;e:do{var Te;for(Te=Ee.iterator();Te.hasNext();){var Pe=Te.next();if(Lt(Pe.name,"brdfLut")&&e.isType(Pe,Ep)){Ne=Pe;break e}}Ne=null}while(0);var Oe=null==(Ce=Ne)||e.isType(Ce,Ep)?Ce:c();if(null!=Oe){we=Oe;break t}}}we=null}while(0);this.brdfLutSampler_0=null!=(w=we)?w.sampler:null,null!=(z=this.brdfLutSampler_0)&&(z.texture=this.brdfLut);var Me,je,Ae=this.model;t:do{var Ie;for(Me=sc.ALL,Ie=Ae.stages.values.iterator();Ie.hasNext();){var Re=Ie.next();if(0!=(Re.stage.mask&Me.mask)){var Le,De,qe=Re.nodes;e:do{var Fe;for(Fe=qe.iterator();Fe.hasNext();){var Be=Fe.next();if(Lt(Be.name,"ssaoMap")&&e.isType(Be,Ep)){De=Be;break e}}De=null}while(0);var Ue=null==(Le=De)||e.isType(Le,Ep)?Le:c();if(null!=Ue){je=Ue;break t}}}je=null}while(0);this.ssaoSampler_0=null!=(k=je)?k.sampler:null,null!=(S=this.ssaoSampler_0)&&(S.texture=this.scrSpcAmbientOcclusionMap);var Ve,Ge,He=this.model;t:do{var We;for(Ve=sc.ALL,We=He.stages.values.iterator();We.hasNext();){var Xe=We.next();if(0!=(Xe.stage.mask&Ve.mask)){var Ke,Ye,Ze=Xe.nodes;e:do{var Je;for(Je=Ze.iterator();Je.hasNext();){var Qe=Je.next();if(Lt(Qe.name,"ssrMap")&&e.isType(Qe,Ep)){Ye=Qe;break e}}Ye=null}while(0);var ti=null==(Ke=Ye)||e.isType(Ke,Ep)?Ke:c();if(null!=ti){Ge=ti;break t}}}Ge=null}while(0);if(this.ssrSampler_0=null!=(C=Ge)?C.sampler:null,null!=(N=this.ssrSampler_0)&&(N.texture=this.scrSpcReflectionMap),this.isReceivingShadow_0){E=this.depthSamplers_0;for(var ei=0;ei!==E.length;++ei){var ii,ni,ri,oi=this.model,si="depthMap_"+ei;t:do{var ai;for(ni=sc.ALL,ai=oi.stages.values.iterator();ai.hasNext();){var li=ai.next();if(0!=(li.stage.mask&ni.mask)){var ui,pi,ci=li.nodes;e:do{var hi;for(hi=ci.iterator();hi.hasNext();){var di=hi.next();if(Lt(di.name,si)&&e.isType(di,Ep)){pi=di;break e}}pi=null}while(0);var fi=null==(ui=pi)||e.isType(ui,Ep)?ui:c();if(null!=fi){ri=fi;break t}}}ri=null}while(0);var _i=null!=(ii=ri)?ii.sampler:null;this.depthSamplers_0[ei]=_i,this.shadowMaps_0[ei].setupSampler_wl9pml$(_i)}}zc.prototype.onPipelineCreated_vp7qhs$.call(this,t,i,n)},Dv.prototype.defaultDeferredPbrModel_ijjr66$=function(t){var i=new tp("defaultDeferredPbrModel()"),n={v:null},r=new ip(i);n.v=r.stageInterfaceNode_iikjwn$("ifTexCoords",r.attrTexCoords().output),r.positionOutput=r.fullScreenQuadPositionNode_r20yfm$(r.attrTexCoords().output).outQuadPos;var o=new np(i),s=n.v.output,a=o.texture2dNode_61zpoe$("positionAo"),l=o.addNode_u9w9by$(new zv(o.stage));l.inPositionAo=o.texture2dSamplerNode_fzevit$(a,s).outColor,l.inNormalRough=o.texture2dSamplerNode_fzevit$(o.texture2dNode_61zpoe$("normalRoughness"),s).outColor,l.inAlbedoMetallic=o.texture2dSamplerNode_fzevit$(o.texture2dNode_61zpoe$("albedoMetal"),s).outColor,t.isWithEmissive&&(l.inEmissive=o.gammaNode_ze33is$(o.texture2dSamplerNode_fzevit$(o.texture2dNode_61zpoe$("emissive"),s).outColor).outColor);var u=l;o.addNode_u9w9by$(new Tv(o.stage)).inViewPos=u.outViewPos;var p,c,h,d=o.addNode_u9w9by$(new Pv(o.stage)),f=o.vec3TransformNode_vid4wo$(u.outViewPos,d.outInvViewMat,1).outVec3,_=o.vec3TransformNode_vid4wo$(u.outViewNormal,d.outInvViewMat,0).outVec3,m={v:null};if(t.maxLights>0){var $,y;m.v=o.multiLightNode_d76fwk$(f,t.maxLights);var v=0;for($=t.shadowMaps.iterator();$.hasNext();){var g,b=$.next(),x=tt((v=(y=v)+1|0,y));g=e.isType(b,mS)?o.deferredCascadedShadowMapNode_y1yrn$(b,"depthMap_"+x,u.outViewPos,f).outShadowFac:e.isType(b,fS)?o.deferredSimpleShadowMapNode_dhoqzq$(b,"depthMap_"+x,f).outShadowFac:new op(new Pu(1)),m.v.inShadowFacs[x]=g}}if(t.isImageBasedLighting){var w=o.textureCubeNode_61zpoe$("irradianceMap");h=o.textureCubeSamplerNode_ub8j0u$(w,_),p=o.textureCubeNode_61zpoe$("reflectionMap"),c=o.texture2dNode_61zpoe$("brdfLut")}else h=null,p=null,c=null;var z,k=o.pbrMaterialNode_aple27$(p,c),S=h;k.lightBacksides=t.lightBacksides,k.inFragPos=f,k.inNormal=_,k.inViewDir=o.viewDirNode_ze33is$(d.outCamPos,f).output,null!=m.v&&(k.inLightCount=m.v.outLightCount,k.inFragToLight=m.v.outFragToLightDirection,k.inRadiance=m.v.outRadiance),k.inIrradiance=null!=(z=null!=S?S.outColor:null)?z:o.pushConstantNodeColor_61zpoe$("uAmbient").output,k.inAlbedo=u.outAlbedo,k.inEmissive=u.outEmissive,k.inMetallic=u.outMetallic,k.inRoughness=u.outRoughness;var C=u.outAo;if(t.isScrSpcAmbientOcclusion){var N=o.texture2dNode_61zpoe$("ssaoMap"),E=o.addNode_u9w9by$(new Gu(N,k.graph));E.inViewport=d.outViewport,C=o.multiplyNode_ze33is$(C,E.outAo).output}if(k.inAmbientOccl=C,t.isScrSpcReflections){var T=o.texture2dSamplerNode_fzevit$(o.texture2dNode_61zpoe$("ssrMap"),s).outColor;k.inReflectionColor=o.gammaNode_ze33is$(T).outColor,k.inReflectionWeight=o.splitNode_500t7j$(T,"a").output}var P=k;o.colorOutput_a3v4si$(P.outColor);var O=o.texture2dSamplerNode_fzevit$(o.texture2dNode_61zpoe$("depth"),s);return o.depthOutput_r20yfm$(O.outColor),i},Dv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var qv=null;function Fv(){return null===qv&&new Dv,qv}function Bv(){this.isImageBasedLighting=!1,this.isScrSpcAmbientOcclusion=!1,this.isScrSpcReflections=!1,this.isWithEmissive=!1,this.maxLights=4,this.shadowMaps=M(),this.lightBacksides=!1,this.environmentMaps=null}function Uv(t,i){var n,r=new lf,o=new pa;o.name="ReflectionDenoisePass",o.setSize_vux9f0$(t.config.width,t.config.height),o.addColorTexture_farcsl$(dh()),o.clearDepthTexture(),$a.call(this,r,new ua(o)),this.clearColor=new Ey(0,0,0,0);var a=e.isType(n=this.drawNode,lf)?n:c(),l=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(Gv);var u=new tp("ReflectionDenoisePass"),p={v:null},h=new ip(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.fullScreenQuadPositionNode_r20yfm$(h.attrTexCoords().output).outQuadPos;var d=new np(u),f=d.texture2dNode_61zpoe$("noisyRefl"),_=d.texture2dNode_61zpoe$("positionAo"),m=d.addNode_u9w9by$(new Vv(this,f,_,d.stage));m.inScreenPos=p.v.output,d.colorOutput_a3v4si$(m.outColor);var $,y,v,g=u,b=new zc(g);b.onPipelineSetup.add_11rb$(Hv),b.onPipelineCreated.add_11rb$(($=t,y=g,v=i,function(t,i,n){var r,o,a=y;t:do{var l;for(r=sc.ALL,l=a.stages.values.iterator();l.hasNext();){var u=l.next();if(0!=(u.stage.mask&r.mask)){var p,h,d=u.nodes;e:do{var f;for(f=d.iterator();f.hasNext();){var _=f.next();if(Lt(_.name,"noisyRefl")&&e.isType(_,Ep)){h=_;break e}}h=null}while(0);var m=null==(p=h)||e.isType(p,Ep)?p:c();if(null!=m){o=m;break t}}}o=null}while(0);x(o).sampler.texture=$.colorTexture;var g,b,w=y;t:do{var z;for(g=sc.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&g.mask)){var S,C,N=k.nodes;e:do{var E;for(E=N.iterator();E.hasNext();){var T=E.next();if(Lt(T.name,"positionAo")&&e.isType(T,Ep)){C=T;break e}}C=null}while(0);var P=null==(S=C)||e.isType(S,Ep)?S:c();if(null!=P){b=P;break t}}}b=null}while(0);return x(b).sampler.texture=v,s})),l.shader=b,a.unaryPlus_uv0sim$(l),this.dependsOn_yqp8fe$(t)}function Vv(t,e,i,n){this.$outer=t,rp.call(this,"blurNode",n),this.noisyRefl=e,this.depthTex=i,this.inScreenPos=new op(new Ou(ar().ZERO)),this.outColor=new op(new zu("colorOut"),this)}function Gv(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Hv(t,e,i){return t.depthTest=vl(),t.blendMode=hl(),s}function Wv(t,i,n){Qv();var r,o=new lf,s=new pa;s.name="ReflectionPass",s.setSize_vux9f0$(i.config.width,i.config.height),s.addColorTexture_farcsl$(dh()),s.clearDepthTexture(),$a.call(this,o,new ua(s)),this.mrtPass=t,this.pbrLightingPass=i,this.baseReflectionStep=n,this.uRoughThreshLow_0=null,this.roughnessThresholdLow_2pd7lz$_0=.5,this.uRoughThreshHigh_0=null,this.roughnessThresholdHigh_cqy6xj$_0=.6,this.uMaxIterations_0=null,this.scrSpcReflectionIterations_4w6b2n$_0=24,this.noiseTex_0=this.generateScrSpcReflectionNoiseTex_0(),this.clearColor=new Ey(0,0,0,0);var a=e.isType(r=this.drawNode,lf)?r:c();a.isFrustumChecked=!1;var l=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.isFrustumChecked=!1,l.generate_v2sixm$(tg),l.shader=new Xv(this),a.unaryPlus_uv0sim$(l),this.dependsOn_yqp8fe$(this.mrtPass)}function Xv(t){this.$outer=t,zc.call(this,this.$outer.reflectionShaderModel_0())}function Kv(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$data=t}function Yv(t){rp.call(this,"discardRough",t),this.inRoughness=new op(new Pu(0)),this.inThreshHigh=new op(new Pu(.6)),this.inThreshLow=new op(new Pu(.5)),this.outWeight=new op(new bu("outRoughWeight"),this)}function Zv(){Jv=this,this.NOISE_SIZE=4}Bv.prototype.useImageBasedLighting_po417x$=function(t){this.environmentMaps=t,this.isImageBasedLighting=null!=t},Bv.$metadata$={kind:$,simpleName:"DeferredPbrConfig",interfaces:[]},Lv.$metadata$={kind:$,simpleName:"PbrSceneShader",interfaces:[zc]},Uv.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},Vv.prototype.setup_llmhyc$=function(t){this.dependsOn_lhtstx$(this.noisyRefl),this.dependsOn_lhtstx$(this.depthTex),rp.prototype.setup_llmhyc$.call(this,t)},Vv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                int blurSize = 4;\n                vec2 texelSize = 1.0 / vec2(textureSize("+this.noisyRefl.name+", 0));\n                float depthOri = "+t.sampleTexture2d_buzeal$(this.depthTex.name,this.inScreenPos.ref2f_61zpoe$())+".z;\n                float depthThreshold = max(0.3, depthOri * 0.05);\n                "+this.outColor.declare()+" = vec4(0.0);\n                \n                float weight = 0.0;\n                vec2 hlim = vec2(float(-blurSize) * 0.5 + 0.5);\n                for (int x = 0; x < blurSize; x++) {\n                    for (int y = 0; y < blurSize; y++) {\n                        vec2 uv = "+this.inScreenPos.ref2f_61zpoe$()+" + (hlim + vec2(float(x), float(y))) * texelSize;\n                        float w = 1.0 - step(depthThreshold, abs("+t.sampleTexture2d_buzeal$(this.depthTex.name,"uv")+".z - depthOri)) * 0.99;\n                        \n                        "+this.outColor+" += "+t.sampleTexture2d_buzeal$(this.noisyRefl.name,"uv")+" * w;\n                        weight += w;\n                    }\n                }\n                "+this.outColor+" /= weight;\n            ")},Vv.$metadata$={kind:$,simpleName:"BlurNode",interfaces:[rp]},Uv.$metadata$={kind:$,simpleName:"ReflectionDenoisePass",interfaces:[$a]},Object.defineProperty(Wv.prototype,"roughnessThresholdLow",{configurable:!0,get:function(){return this.roughnessThresholdLow_2pd7lz$_0},set:function(t){var e,i;this.roughnessThresholdLow_2pd7lz$_0=t,null!=(i=null!=(e=this.uRoughThreshLow_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Wv.prototype,"roughnessThresholdHigh",{configurable:!0,get:function(){return this.roughnessThresholdHigh_cqy6xj$_0},set:function(t){var e,i;this.roughnessThresholdHigh_cqy6xj$_0=t,null!=(i=null!=(e=this.uRoughThreshHigh_0)?e.uniform:null)&&(i.value=t)}}),Object.defineProperty(Wv.prototype,"scrSpcReflectionIterations",{configurable:!0,get:function(){return this.scrSpcReflectionIterations_4w6b2n$_0},set:function(t){var e,i;this.scrSpcReflectionIterations_4w6b2n$_0=t,null!=(i=null!=(e=this.uMaxIterations_0)?e.uniform:null)&&(i.value=t)}}),Wv.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),this.noiseTex_0.dispose(),$a.prototype.dispose_aemszp$.call(this,t)},Xv.prototype.onPipelineSetup_x08qbx$=function(t,e,i){t.depthTest=vl(),t.blendMode=hl(),zc.prototype.onPipelineSetup_x08qbx$.call(this,t,e,i)},Xv.prototype.onPipelineCreated_vp7qhs$=function(t,i,n){var r,o,s,a,l,u,p,h,d,f,_,m,$=this.model;t:do{var y;for(_=sc.ALL,y=$.stages.values.iterator();y.hasNext();){var v=y.next();if(0!=(v.stage.mask&_.mask)){var g,b,x=v.nodes;e:do{var w;for(w=x.iterator();w.hasNext();){var z=w.next();if(Lt(z.name,"deferredCam")&&e.isType(z,Pv)){b=z;break e}}b=null}while(0);var k=null==(g=b)||e.isType(g,Pv)?g:c();if(null!=k){m=k;break t}}}m=null}while(0);var S=m;null!=S&&(this.$outer,S.sceneCam=this.$outer.mrtPass.camera);var C,N,E=this.model;t:do{var T;for(C=sc.ALL,T=E.stages.values.iterator();T.hasNext();){var P=T.next();if(0!=(P.stage.mask&C.mask)){var O,M,j=P.nodes;e:do{var A;for(A=j.iterator();A.hasNext();){var I=A.next();if(Lt(I.name,"positionAo")&&e.isType(I,Ep)){M=I;break e}}M=null}while(0);var R=null==(O=M)||e.isType(O,Ep)?O:c();if(null!=R){N=R;break t}}}N=null}while(0);var L=null!=(r=N)?r.sampler:null;null!=L&&(this.$outer,L.texture=this.$outer.mrtPass.positionAo);var D,q,F=this.model;t:do{var B;for(D=sc.ALL,B=F.stages.values.iterator();B.hasNext();){var U=B.next();if(0!=(U.stage.mask&D.mask)){var V,G,H=U.nodes;e:do{var W;for(W=H.iterator();W.hasNext();){var X=W.next();if(Lt(X.name,"normalRoughness")&&e.isType(X,Ep)){G=X;break e}}G=null}while(0);var K=null==(V=G)||e.isType(V,Ep)?V:c();if(null!=K){q=K;break t}}}q=null}while(0);var Y=null!=(o=q)?o.sampler:null;null!=Y&&(this.$outer,Y.texture=this.$outer.mrtPass.normalRoughness);var Z,J,Q=this.model;t:do{var tt;for(Z=sc.ALL,tt=Q.stages.values.iterator();tt.hasNext();){var et=tt.next();if(0!=(et.stage.mask&Z.mask)){var it,nt,rt=et.nodes;e:do{var ot;for(ot=rt.iterator();ot.hasNext();){var st=ot.next();if(Lt(st.name,"ssrMap")&&e.isType(st,Ep)){nt=st;break e}}nt=null}while(0);var at=null==(it=nt)||e.isType(it,Ep)?it:c();if(null!=at){J=at;break t}}}J=null}while(0);var lt=null!=(s=J)?s.sampler:null;null!=lt&&(this.$outer,lt.texture=this.$outer.pbrLightingPass.colorTexture);var ut,pt,ct=this.model;t:do{var ht;for(ut=sc.ALL,ht=ct.stages.values.iterator();ht.hasNext();){var dt=ht.next();if(0!=(dt.stage.mask&ut.mask)){var ft,_t,mt=dt.nodes;e:do{var $t;for($t=mt.iterator();$t.hasNext();){var yt=$t.next();if(Lt(yt.name,"ssrNoiseTex")&&e.isType(yt,Ep)){_t=yt;break e}}_t=null}while(0);var vt=null==(ft=_t)||e.isType(ft,Ep)?ft:c();if(null!=vt){pt=vt;break t}}}pt=null}while(0);var gt=null!=(a=pt)?a.sampler:null;null!=gt&&(this.$outer,gt.texture=this.$outer.noiseTex_0);var bt,xt,wt=this.$outer,zt=this.model;t:do{var kt;for(bt=sc.ALL,kt=zt.stages.values.iterator();kt.hasNext();){var St=kt.next();if(0!=(St.stage.mask&bt.mask)){var Ct,Nt,Et=St.nodes;e:do{var Tt;for(Tt=Et.iterator();Tt.hasNext();){var Pt=Tt.next();if(Lt(Pt.name,"uRoughThreshLow")&&e.isType(Pt,Rp)){Nt=Pt;break e}}Nt=null}while(0);var Ot=null==(Ct=Nt)||e.isType(Ct,Rp)?Ct:c();if(null!=Ot){xt=Ot;break t}}}xt=null}while(0);wt.uRoughThreshLow_0=xt,null!=(u=null!=(l=this.$outer.uRoughThreshLow_0)?l.uniform:null)&&(u.value=this.$outer.roughnessThresholdLow);var Mt,jt,At=this.$outer,It=this.model;t:do{var Rt;for(Mt=sc.ALL,Rt=It.stages.values.iterator();Rt.hasNext();){var Dt=Rt.next();if(0!=(Dt.stage.mask&Mt.mask)){var qt,Ft,Bt=Dt.nodes;e:do{var Ut;for(Ut=Bt.iterator();Ut.hasNext();){var Vt=Ut.next();if(Lt(Vt.name,"uRoughThreshHigh")&&e.isType(Vt,Rp)){Ft=Vt;break e}}Ft=null}while(0);var Gt=null==(qt=Ft)||e.isType(qt,Rp)?qt:c();if(null!=Gt){jt=Gt;break t}}}jt=null}while(0);At.uRoughThreshHigh_0=jt,null!=(h=null!=(p=this.$outer.uRoughThreshHigh_0)?p.uniform:null)&&(h.value=this.$outer.roughnessThresholdHigh);var Ht,Wt,Xt=this.$outer,Kt=this.model;t:do{var Yt;for(Ht=sc.ALL,Yt=Kt.stages.values.iterator();Yt.hasNext();){var Zt=Yt.next();if(0!=(Zt.stage.mask&Ht.mask)){var Jt,Qt,te=Zt.nodes;e:do{var ee;for(ee=te.iterator();ee.hasNext();){var ie=ee.next();if(Lt(ie.name,"uMaxIterations")&&e.isType(ie,Bp)){Qt=ie;break e}}Qt=null}while(0);var ne=null==(Jt=Qt)||e.isType(Jt,Bp)?Jt:c();if(null!=ne){Wt=ne;break t}}}Wt=null}while(0);Xt.uMaxIterations_0=Wt,null!=(f=null!=(d=this.$outer.uMaxIterations_0)?d.uniform:null)&&(f.value=this.$outer.scrSpcReflectionIterations)},Xv.$metadata$={kind:$,simpleName:"ReflectionShader",interfaces:[zc]},Wv.prototype.reflectionShaderModel_0=function(){var t=new tp("ReflectionShaderModel"),e={v:null},i=new ip(t);e.v=i.stageInterfaceNode_iikjwn$("ifTexCoords",i.attrTexCoords().output),i.positionOutput=i.fullScreenQuadPositionNode_r20yfm$(i.attrTexCoords().output).outQuadPos;var n=new np(t),r=e.v.output,o=n.texture2dNode_61zpoe$("positionAo"),s=n.addNode_u9w9by$(new zv(n.stage));s.inPositionAo=n.texture2dSamplerNode_fzevit$(o,r).outColor,s.inNormalRough=n.texture2dSamplerNode_fzevit$(n.texture2dNode_61zpoe$("normalRoughness"),r).outColor;var a=s,l=n.addNode_u9w9by$(new Yv(n.stage));l.inRoughness=a.outRoughness,l.inThreshLow=n.pushConstantNode1f_61zpoe$("uRoughThreshLow").output,l.inThreshHigh=n.pushConstantNode1f_61zpoe$("uRoughThreshHigh").output;var u=l,p=n.addNode_u9w9by$(new Pv(n.stage)),c=n.texture2dNode_61zpoe$("ssrNoiseTex"),h=n.noiseTextureSamplerNode_bg7ra4$(c,n.constVec2i_czzhjm$(new vr(4,4))).outNoise,d=n.texture2dNode_61zpoe$("ssrMap"),f=a.outViewPos,_=n.normalizeNode_r20yfm$(f).output,m=n.splitNode_500t7j$(h,"a").output,$=n.reflectNode_ze33is$(_,n.normalizeNode_r20yfm$(a.outViewNormal).output).outDirection,y=n.vecFromColorNode_r20yfm$(n.splitNode_500t7j$(h,"xyz").output).output,v=n.multiplyNode_ze33is$(y,a.outRoughness).output,g=n.normalizeNode_r20yfm$(n.addNode_ze33is$($,v).output).output,b=n.addNode_u9w9by$(new eg(o,n.stage));b.inProjMat=p.outProjMat,b.inRayOrigin=f,b.inRayDirection=g,b.inRayOffset=m,b.maxIterations=n.pushConstantNode1i_61zpoe$("uMaxIterations").output,b.baseStepFac=n.constFloat_mx4ult$(this.baseReflectionStep);var x=b,w=n.texture2dSamplerNode_fzevit$(d,x.outSamplePos).outColor,z=n.multiplyNode_ze33is$(x.outSampleWeight,u.outWeight).output,k=n.gammaNode_ze33is$(w,n.constFloat_mx4ult$(2.2)).outColor;return n.colorOutput_a3v4si$(n.combineXyzWNode_ze33is$(k,z).output),t},Kv.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Kv.prototype=Object.create(l.prototype),Kv.prototype.constructor=Kv,Kv.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$data;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Wv.prototype.generateScrSpcReflectionNoiseTex_0=function(){var t,i=xE(4*e.imul(4,4)|0),n=new er(501930763),r=Mr();t=e.imul(4,4);for(var o=0;o<t;o++){do{r.set_y2kzbl$(n.randomF_dleff0$(-1,1),n.randomF_dleff0$(-1,1),n.randomF_dleff0$(-1,1))}while(r.length()>1);r.norm().scale_mx4ult$(.25),i.set_6t1wet$(0+(4*o|0)|0,qt(B(127.5*(r.x+1)))),i.set_6t1wet$(1+(4*o|0)|0,qt(B(127.5*(r.y+1)))),i.set_6t1wet$(2+(4*o|0)|0,qt(B(127.5*(r.z+1)))),i.set_6t1wet$(3+(4*o|0)|0,qt(n.randomI_n8acyv$(new Bt(0,255))))}var s,a=new ad(i,4,4,dh());return new Eh(new Hh(dh(),ed(),ed(),void 0,Kh(),Kh(),!1,1),"ssr_noise_tex",(s=a,function(t,e,i,n){var r=new Kv(s,t,e,this,i);return n?r:r.doResume(null)}))},Yv.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inRoughness,this.inThreshHigh,this.inThreshLow])},Yv.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                if ("+this.inRoughness.ref1f_61zpoe$()+" > "+this.inThreshHigh.ref1f_61zpoe$()+") discard;\n                "+this.outWeight.declare()+" = 1.0 - (clamp("+this.inRoughness.ref1f_61zpoe$()+", "+this.inThreshLow.ref1f_61zpoe$()+", "+this.inThreshHigh.ref1f_61zpoe$()+") - "+this.inThreshLow.ref1f_61zpoe$()+")\n                        / ("+this.inThreshHigh.ref1f_61zpoe$()+" - "+this.inThreshLow.ref1f_61zpoe$()+");\n            ")},Yv.$metadata$={kind:$,simpleName:"DiscardRoughSurfacesNode",interfaces:[rp]},Zv.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Jv=null;function Qv(){return null===Jv&&new Zv,Jv}function tg(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function eg(t,e){rp.call(this,"rayTrace_"+e.nextNodeId,e),this.positionTex=t,this.baseStepFac=new op(new Pu(.02)),this.stepIncFac=new op(new Pu(1.2)),this.maxIterations=new op(new Au(24)),this.maxRefinements=new op(new Au(5)),this.inProjMat=new op(new Tu("_")),this.inRayOrigin=new op(new Mu(Er().ZERO)),this.inRayDirection=new op(new Mu(Er().Z_AXIS)),this.inRayOffset=new op(new Mu(Er().Z_AXIS)),this.outRayPos=new op(new wu(this.name+"_outPos"),this),this.outSamplePos=new op(new wu(this.name+"_outSamplePos"),this),this.outSampleWeight=new op(new bu(this.name+"_outHitWeight"),this),this.outCost=new op(new bu(this.name+"_outSteps"),this)}function ig(){}function ng(t,e,i,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=lg().STD_CHARS),pg(new rg(t,e*i/96,r,o),n)}function rg(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=lg().STD_CHARS),this.family=t,this.sizePts=e,this.style=i,this.chars=n}function og(t){var e;lg(),Eh.call(this,new Hh(void 0,Qh(),Qh()),t.toString(),(e=t,function(t,i,n,r){var o=new ug(e,t,i,this,n);return r?o:o.doResume(null)})),this.charMap=t,this.type_hczp3w$_0="Font",this.lineSpace=1.2*this.charMap.fontProps.sizePts,this.normHeight=.7*this.charMap.fontProps.sizePts}function sg(){ag=this,this.PLAIN=0,this.BOLD=1,this.ITALIC=2,this.SYSTEM_FONT='-apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',this.STD_CHARS=null,this.DEFAULT_FONT_PROPS=null;for(var t="",e=32;e<=126;e++)t+=String.fromCharCode(N(e));t+="",this.STD_CHARS=t,this.DEFAULT_FONT_PROPS=new rg(this.SYSTEM_FONT,12)}Wv.$metadata$={kind:$,simpleName:"ReflectionPass",interfaces:[$a]},eg.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.baseStepFac,this.stepIncFac,this.maxIterations,this.maxRefinements]),this.dependsOn_8ak6wm$([this.inProjMat,this.inRayOrigin,this.inRayDirection,this.inRayOffset])},eg.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("projectViewPos","\n            vec3 projectViewPos(vec3 viewPos) {\n                vec4 proj = "+this.inProjMat+" * vec4(viewPos, 1.0);\n                return (proj.xyz / proj.w) * 0.5 + 0.5;\n            }\n        "),t.appendFunction_puj7f4$("linearStep",me("\n            float linearStep(float edge0, float edge1, float x) {\n                float f = clamp(x, edge0, edge1);\n                return (f - edge0) / (edge1 - edge0);\n            }\n        ")),t.appendMain_61zpoe$("\n            vec3 "+this.name+"_rayPos = "+this.inRayOrigin.ref3f_61zpoe$()+";\n            vec3 "+this.name+"_rayStepPos = "+this.name+"_rayPos;\n            float "+this.name+"_rayStep = -"+this.name+"_rayPos.z * "+this.baseStepFac.ref1f_61zpoe$()+";\n            float "+this.name+"_rayOffset = "+this.inRayOffset.ref1f_61zpoe$()+";\n            \n            float "+this.name+"_sampleDepth = 0.0;\n            float "+this.name+"_dDepth = 0.0;\n            bool "+this.name+"_refineHit = false;\n\n            int "+this.name+"_iSteps, "+this.name+"_iRef;\n            for ("+this.name+"_iSteps = 0, "+this.name+"_iRef = 0; "+this.name+"_iSteps < "+this.maxIterations.ref1i_61zpoe$()+" && "+this.name+"_iRef < "+this.maxRefinements.ref1i_61zpoe$()+"; "+this.name+"_iSteps++) {\n                "+this.name+"_rayStepPos += "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep;\n                "+this.name+"_rayPos = "+this.name+"_rayStepPos + "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep * "+this.name+"_rayOffset * "+this.stepIncFac.ref1f_61zpoe$()+";\n                \n                vec2 "+this.name+"_samplePos = projectViewPos("+this.name+"_rayPos).xy;\n                if ("+this.name+"_samplePos.x < 0.0 || "+this.name+"_samplePos.x > 1.0\n                        || "+this.name+"_samplePos.x < 0.0 || "+this.name+"_samplePos.x > 1.0\n                        || "+this.name+"_rayPos.z > 0.0) {\n                    break;\n                }\n                \n                "+this.name+"_sampleDepth = "+t.sampleTexture2d_buzeal$(this.positionTex.name,this.name+"_samplePos")+".z;\n\n                // set a large depth if sampleDepth is positive (clear value)\n                "+this.name+"_sampleDepth -= 1e5 * step(0.1, "+this.name+"_sampleDepth);\n                \n                // diff between ray position depth and scene depth\n                //   negative -> ray pos is behind scene depth, i.e. covered by an object\n                //   positive -> ray pos is in front of scene\n                "+this.name+"_dDepth = "+this.name+"_rayPos.z - "+this.name+"_sampleDepth;\n                \n                if (!"+this.name+"_refineHit) {\n                    // search for hit\n                    if ("+this.name+"_dDepth < 0.0 && "+this.name+"_dDepth > (-"+this.name+"_rayStep - 0.2)) {\n                        // hit -> roll back position to previous ray position and start refinement\n                        "+this.name+"_rayStepPos = "+this.name+"_rayPos - "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep;\n                        "+this.name+"_rayOffset = 0.0;\n                        "+this.name+"_rayStep *= 0.5;\n                        "+this.name+"_refineHit = true;\n                    } else {\n                        // no hit, increase step size\n                        "+this.name+"_rayStep *= "+this.stepIncFac.ref1f_61zpoe$()+";\n                    }\n\n                } else {\n                    // refine hit position\n                    "+this.name+"_rayStep = 0.5 * abs("+this.name+"_rayStep) * sign("+this.name+"_dDepth);\n                    "+this.name+"_iRef++;\n                }\n            }\n            \n            "+this.outCost.declare()+" = float("+this.name+"_iSteps) / "+this.maxIterations.ref1f_61zpoe$()+";\n            "+this.outSampleWeight.declare()+" = 0.0;\n            "+this.outRayPos.declare()+" = vec3(0.0);\n            "+this.outSamplePos.declare()+" = vec3(0.0);\n            \n            if ("+this.maxIterations.ref1i_61zpoe$()+" > 0) {\n                "+this.outRayPos+" = "+this.name+"_rayPos + "+this.inRayDirection.ref3f_61zpoe$()+" * "+this.name+"_rayStep;\n                "+this.outSamplePos+" = projectViewPos("+this.outRayPos+");\n                \n                "+this.outSampleWeight+" = \n                              linearStep(0.0, 0.1, "+this.outSamplePos+".x) * (1.0 - linearStep(0.9, 1.0, "+this.outSamplePos+".x))\n                            * linearStep(0.0, 0.1, "+this.outSamplePos+".y) * (1.0 - linearStep(0.9, 1.0, "+this.outSamplePos+".y))\n                            * (1.0 - step(0.9999, "+this.outSamplePos+".z))\n                            * (1.0 - linearStep(0.0, -"+this.name+"_rayPos.z / 10.0, abs("+this.name+"_dDepth)));\n            }\n        ")},eg.$metadata$={kind:$,simpleName:"ScreenSpaceRayTraceNode",interfaces:[rp]},ig.$metadata$={kind:Y,simpleName:"Disposable",interfaces:[]},rg.prototype.toString=function(){return"FontProps("+this.family+", "+this.sizePts+"pts, "+this.style+")"},rg.$metadata$={kind:$,simpleName:"FontProps",interfaces:[]},rg.prototype.component1=function(){return this.family},rg.prototype.component2=function(){return this.sizePts},rg.prototype.component3=function(){return this.style},rg.prototype.component4=function(){return this.chars},rg.prototype.copy_aw0137$=function(t,e,i,n){return new rg(void 0===t?this.family:t,void 0===e?this.sizePts:e,void 0===i?this.style:i,void 0===n?this.chars:n)},rg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.family)|0)+e.hashCode(this.sizePts)|0)+e.hashCode(this.style)|0)+e.hashCode(this.chars)|0},rg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.family,t.family)&&e.equals(this.sizePts,t.sizePts)&&e.equals(this.style,t.style)&&e.equals(this.chars,t.chars)},Object.defineProperty(og.prototype,"type",{configurable:!0,get:function(){return this.type_hczp3w$_0}}),og.prototype.textWidth_61zpoe$=function(t){var e,i,n,r,o=0,s=0;i=(e=$e(t)).first,n=e.last,r=e.step;for(var a=i;a<=n;a+=r){var l=t.charCodeAt(a);(o+=this.charWidth_s8itvh$(l))>s&&(s=o),10===l&&(o=0)}return s},og.prototype.charWidth_s8itvh$=function(t){var e,i;return null!=(i=null!=(e=this.charMap.get_11rb$(E(t)))?e.advance:null)?i:0},og.prototype.toString=function(){return"Font("+this.charMap.fontProps+")"},sg.prototype.defaultFont_aemszp$=function(t){return pg(this.DEFAULT_FONT_PROPS,t)},sg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ag=null;function lg(){return null===ag&&new sg,ag}function ug(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$charMap=t}function pg(t,e,i){return i=i||Object.create(og.prototype),og.call(i,e.assetMgr.createCharMap_ttufcy$(t)),i}function cg(){this.width=0,this.height=0,this.xOffset=0,this.yBaseline=0,this.advance=0,this.uvMin=pr(),this.uvMax=pr()}function hg(t,e,i){this.textureData=t,this.map_0=e,this.fontProps=i}function dg(t,e,i,n,r,o,s,a,l,u){mg(),void 0===t&&(t=-1),void 0===e&&(e=0),void 0===n&&(n=!1),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===u&&(u=null),this.bufferView=t,this.byteOffset=e,this.componentType=i,this.normalized=n,this.count=r,this.type=o,this.max=s,this.min=a,this.sparse=l,this.name=u,this.bufferViewRef=null}function fg(){_g=this,this.TYPE_SCALAR="SCALAR",this.TYPE_VEC2="VEC2",this.TYPE_VEC3="VEC3",this.TYPE_VEC4="VEC4",this.TYPE_MAT2="MAT2",this.TYPE_MAT3="MAT3",this.TYPE_MAT4="MAT4",this.COMP_TYPE_BYTE=5120,this.COMP_TYPE_UNSIGNED_BYTE=5121,this.COMP_TYPE_SHORT=5122,this.COMP_TYPE_UNSIGNED_SHORT=5123,this.COMP_TYPE_INT=5124,this.COMP_TYPE_UNSIGNED_INT=5125,this.COMP_TYPE_FLOAT=5126,this.COMP_INT_TYPES=ge([5120,5121,5122,5123,5124,5125])}ug.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ug.prototype=Object.create(l.prototype),ug.prototype.constructor=ug,ug.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$charMap.textureData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},og.$metadata$={kind:$,simpleName:"Font",interfaces:[Eh]},cg.$metadata$={kind:$,simpleName:"CharMetrics",interfaces:[]},Object.defineProperty(hg.prototype,"entries",{get:function(){return this.map_0.entries}}),Object.defineProperty(hg.prototype,"keys",{get:function(){return this.map_0.keys}}),Object.defineProperty(hg.prototype,"size",{get:function(){return this.map_0.size}}),Object.defineProperty(hg.prototype,"values",{get:function(){return this.map_0.values}}),hg.prototype.containsKey_11rb$=function(t){return this.map_0.containsKey_11rb$(t)},hg.prototype.containsValue_11rc$=function(t){return this.map_0.containsValue_11rc$(t)},hg.prototype.get_11rb$=function(t){return this.map_0.get_11rb$(t)},hg.prototype.isEmpty=function(){return this.map_0.isEmpty()},hg.$metadata$={kind:$,simpleName:"CharMap",interfaces:[ye]},fg.prototype.serializer=function(){return Ug()},fg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _g=null;function mg(){return null===_g&&new fg,_g}function $g(t,e,i){gg(),this.count=t,this.indices=e,this.values=i}function yg(){vg=this}yg.prototype.serializer=function(){return wg()},yg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var vg=null;function gg(){return null===vg&&new yg,vg}function bg(){this.descriptor_xehwm7$_0=new be("de.fabmax.kool.util.gltf.GltfAccessor.Sparse",this,3),this.descriptor.addElement_ivxn3r$("count",!1),this.descriptor.addElement_ivxn3r$("indices",!1),this.descriptor.addElement_ivxn3r$("values",!1),xg=this}Object.defineProperty(bg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_xehwm7$_0}}),bg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.count),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,Pg(),e.indices),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,Dg(),e.values),i.endStructure_24f42q$(this.descriptor)},bg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeSerializableElement_12e8id$(this.descriptor,1,Pg(),n),o|=2;break;case 2:r=s.decodeSerializableElement_12e8id$(this.descriptor,2,Dg(),r),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),zg(o,i,n,r,null)},bg.prototype.childSerializers=function(){return[we.IntSerializer,Pg(),Dg()]},bg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var xg=null;function wg(){return null===xg&&new bg,xg}function zg(t,e,i,n,r){var o=r||Object.create($g.prototype);if(0==(1&t))throw new ke("count");if(o.count=e,0==(2&t))throw new ke("indices");if(o.indices=i,0==(4&t))throw new ke("values");return o.values=n,o}function kg(t,e,i){Ng(),void 0===e&&(e=0),this.bufferView=t,this.byteOffset=e,this.componentType=i,this.bufferViewRef_8okve9$_0=this.bufferViewRef_8okve9$_0}function Sg(){Cg=this}$g.$metadata$={kind:$,simpleName:"Sparse",interfaces:[]},$g.prototype.component1=function(){return this.count},$g.prototype.component2=function(){return this.indices},$g.prototype.component3=function(){return this.values},$g.prototype.copy_x8d0af$=function(t,e,i){return new $g(void 0===t?this.count:t,void 0===e?this.indices:e,void 0===i?this.values:i)},$g.prototype.toString=function(){return"Sparse(count="+e.toString(this.count)+", indices="+e.toString(this.indices)+", values="+e.toString(this.values)+")"},$g.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.count)|0)+e.hashCode(this.indices)|0)+e.hashCode(this.values)|0},$g.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.count,t.count)&&e.equals(this.indices,t.indices)&&e.equals(this.values,t.values)},Object.defineProperty(kg.prototype,"bufferViewRef",{configurable:!0,get:function(){return null==this.bufferViewRef_8okve9$_0?ct("bufferViewRef"):this.bufferViewRef_8okve9$_0},set:function(t){this.bufferViewRef_8okve9$_0=t}}),Sg.prototype.serializer=function(){return Pg()},Sg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Cg=null;function Ng(){return null===Cg&&new Sg,Cg}function Eg(){this.descriptor_9z4dbk$_0=new be("de.fabmax.kool.util.gltf.GltfAccessor.SparseIndices",this,3),this.descriptor.addElement_ivxn3r$("bufferView",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("componentType",!1),Tg=this}Object.defineProperty(Eg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_9z4dbk$_0}}),Eg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),Lt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.componentType),i.endStructure_24f42q$(this.descriptor)},Eg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeIntElement_szpzho$(this.descriptor,2),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),Og(o,i,n,r,null)},Eg.prototype.childSerializers=function(){return[we.IntSerializer,we.IntSerializer,we.IntSerializer]},Eg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Tg=null;function Pg(){return null===Tg&&new Eg,Tg}function Og(t,e,i,n,r){var o=r||Object.create(kg.prototype);if(0==(1&t))throw new ke("bufferView");if(o.bufferView=e,o.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ke("componentType");return o.componentType=n,o}function Mg(t,e){Ig(),void 0===e&&(e=0),this.bufferView=t,this.byteOffset=e,this.bufferViewRef_s3axfo$_0=this.bufferViewRef_s3axfo$_0}function jg(){Ag=this}kg.$metadata$={kind:$,simpleName:"SparseIndices",interfaces:[]},kg.prototype.component1=function(){return this.bufferView},kg.prototype.component2=function(){return this.byteOffset},kg.prototype.component3=function(){return this.componentType},kg.prototype.copy_qt1dr2$=function(t,e,i){return new kg(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e,void 0===i?this.componentType:i)},kg.prototype.toString=function(){return"SparseIndices(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+", componentType="+e.toString(this.componentType)+")"},kg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.componentType)|0},kg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.componentType,t.componentType)},Object.defineProperty(Mg.prototype,"bufferViewRef",{configurable:!0,get:function(){return null==this.bufferViewRef_s3axfo$_0?ct("bufferViewRef"):this.bufferViewRef_s3axfo$_0},set:function(t){this.bufferViewRef_s3axfo$_0=t}}),jg.prototype.serializer=function(){return Dg()},jg.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Ag=null;function Ig(){return null===Ag&&new jg,Ag}function Rg(){this.descriptor_qz2of1$_0=new be("de.fabmax.kool.util.gltf.GltfAccessor.SparseValues",this,2),this.descriptor.addElement_ivxn3r$("bufferView",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),Lg=this}Object.defineProperty(Rg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_qz2of1$_0}}),Rg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),Lt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.endStructure_24f42q$(this.descriptor)},Rg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=o.decodeIntElement_szpzho$(this.descriptor,1),r|=2;break;case-1:break t;default:throw new xe(e)}return o.endStructure_24f42q$(this.descriptor),qg(r,i,n,null)},Rg.prototype.childSerializers=function(){return[we.IntSerializer,we.IntSerializer]},Rg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Lg=null;function Dg(){return null===Lg&&new Rg,Lg}function qg(t,e,i,n){var r=n||Object.create(Mg.prototype);if(0==(1&t))throw new ke("bufferView");return r.bufferView=e,r.byteOffset=0==(2&t)?0:i,r}function Fg(){this.descriptor_6qddyh$_0=new be("de.fabmax.kool.util.gltf.GltfAccessor",this,10),this.descriptor.addElement_ivxn3r$("bufferView",!0),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("componentType",!1),this.descriptor.addElement_ivxn3r$("normalized",!0),this.descriptor.addElement_ivxn3r$("count",!1),this.descriptor.addElement_ivxn3r$("type",!1),this.descriptor.addElement_ivxn3r$("max",!0),this.descriptor.addElement_ivxn3r$("min",!0),this.descriptor.addElement_ivxn3r$("sparse",!0),this.descriptor.addElement_ivxn3r$("name",!0),Bg=this}Mg.$metadata$={kind:$,simpleName:"SparseValues",interfaces:[]},Mg.prototype.component1=function(){return this.bufferView},Mg.prototype.component2=function(){return this.byteOffset},Mg.prototype.copy_vux9f0$=function(t,e){return new Mg(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e)},Mg.prototype.toString=function(){return"SparseValues(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+")"},Mg.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0},Mg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)},Object.defineProperty(Fg.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_6qddyh$_0}}),Fg.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.bufferView,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.bufferView),Lt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.componentType),Lt(e.normalized,!1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeBooleanElement_qh7jdn$(this.descriptor,3,e.normalized),i.encodeIntElement_ptg7oe$(this.descriptor,4,e.count),i.encodeStringElement_iij8qq$(this.descriptor,5,e.type),Lt(e.max,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,6,new Se(we.FloatSerializer),e.max),Lt(e.min,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,7,new Se(we.FloatSerializer),e.min),Lt(e.sparse,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,8,wg(),e.sparse),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,9,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Fg.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c,h=0,d=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=d.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=d.decodeIntElement_szpzho$(this.descriptor,0),h|=1;break;case 1:n=d.decodeIntElement_szpzho$(this.descriptor,1),h|=2;break;case 2:r=d.decodeIntElement_szpzho$(this.descriptor,2),h|=4;break;case 3:o=d.decodeBooleanElement_szpzho$(this.descriptor,3),h|=8;break;case 4:s=d.decodeIntElement_szpzho$(this.descriptor,4),h|=16;break;case 5:a=d.decodeStringElement_szpzho$(this.descriptor,5),h|=32;break;case 6:l=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,6,new Se(we.FloatSerializer),l),h|=64;break;case 7:u=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,7,new Se(we.FloatSerializer),u),h|=128;break;case 8:p=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,8,wg(),p),h|=256;break;case 9:c=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,9,we.StringSerializer,c),h|=512;break;case-1:break t;default:throw new xe(e)}return d.endStructure_24f42q$(this.descriptor),Vg(h,i,n,r,o,s,a,l,u,p,c,null)},Fg.prototype.childSerializers=function(){return[we.IntSerializer,we.IntSerializer,we.IntSerializer,we.BooleanSerializer,we.IntSerializer,we.StringSerializer,new ve(new Se(we.FloatSerializer)),new ve(new Se(we.FloatSerializer)),new ve(wg()),new ve(we.StringSerializer)]},Fg.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Bg=null;function Ug(){return null===Bg&&new Fg,Bg}function Vg(t,e,i,n,r,o,s,a,l,u,p,c){var h=c||Object.create(dg.prototype);if(h.bufferView=0==(1&t)?-1:e,h.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ke("componentType");if(h.componentType=n,h.normalized=0!=(8&t)&&r,0==(16&t))throw new ke("count");if(h.count=o,0==(32&t))throw new ke("type");return h.type=s,h.max=0==(64&t)?null:a,h.min=0==(128&t)?null:l,h.sparse=0==(256&t)?null:u,h.name=0==(512&t)?null:p,h.bufferViewRef=null,h}function Gg(t){var i,n,r,o;switch(this.accessor=t,this.elemByteSize_7rvvqx$_0=0,this.byteStride_tkyqsw$_0=0,this.buffer_erynjj$_0=this.accessor.bufferViewRef,this.stream_lcz6z5$_0=null,this.sparseIndexStream_2vmodr$_0=null,this.sparseValueStream_1f0jfy$_0=null,this.sparseIndexType_mlp9rd$_0=0,this.nextSparseIndex_bp7us$_0=0,this.index_hw47f3$_0=0,i=null!=this.buffer_erynjj$_0?new Wy(this.buffer_erynjj$_0.bufferRef.data,this.accessor.byteOffset+this.buffer_erynjj$_0.byteOffset|0):null,this.stream_lcz6z5$_0=i,null!=this.accessor.sparse?(this.sparseIndexStream_2vmodr$_0=new Wy(this.accessor.sparse.indices.bufferViewRef.bufferRef.data,this.accessor.sparse.indices.bufferViewRef.byteOffset),this.sparseValueStream_1f0jfy$_0=new Wy(this.accessor.sparse.values.bufferViewRef.bufferRef.data,this.accessor.sparse.values.bufferViewRef.byteOffset),this.sparseIndexType_mlp9rd$_0=this.accessor.sparse.indices.componentType,this.nextSparseIndex_bp7us$_0=this.nextIntComponent_jcyej8$_0(this.sparseIndexStream_2vmodr$_0,this.sparseIndexType_mlp9rd$_0)):(this.sparseIndexStream_2vmodr$_0=null,this.sparseValueStream_1f0jfy$_0=null,this.sparseIndexType_mlp9rd$_0=0,this.nextSparseIndex_bp7us$_0=-1),this.accessor.componentType){case 5120:case 5121:n=1;break;case 5122:case 5123:n=2;break;case 5124:case 5125:case 5126:n=4;break;default:throw G("Unknown accessor component type: "+this.accessor.componentType)}var s=n;switch(this.accessor.type){case"SCALAR":r=1;break;case"VEC2":r=2;break;case"VEC3":r=3;break;case"VEC4":case"MAT2":r=4;break;case"MAT3":r=9;break;case"MAT4":r=16;break;default:throw G("Unsupported accessor type: "+this.accessor.type)}var a=r;this.elemByteSize_7rvvqx$_0=e.imul(s,a),o=null!=this.buffer_erynjj$_0&&this.buffer_erynjj$_0.byteStride>0?this.buffer_erynjj$_0.byteStride:this.elemByteSize_7rvvqx$_0,this.byteStride_tkyqsw$_0=o}function Hg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_SCALAR))throw G("IntAccessor requires accessor type "+mg().TYPE_SCALAR+", provided was "+t.type);if(!mg().COMP_INT_TYPES.contains_11rb$(t.componentType))throw G("IntAccessor requires a (byte / short / int) component type, provided was "+t.componentType)}function Wg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_SCALAR))throw G("Vec2fAccessor requires accessor type "+mg().TYPE_SCALAR+", provided was "+t.type);if(5126!==t.componentType)throw G("FloatAccessor requires a float component type, provided was "+t.componentType)}function Xg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_VEC2))throw G("Vec2fAccessor requires accessor type "+mg().TYPE_VEC2+", provided was "+t.type);if(5126!==t.componentType)throw G("Vec2fAccessor requires a float component type, provided was "+t.componentType)}function Kg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_VEC3))throw G("Vec3fAccessor requires accessor type "+mg().TYPE_VEC3+", provided was "+t.type);if(5126!==t.componentType)throw G("Vec3fAccessor requires a float component type, provided was "+t.componentType)}function Yg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_VEC4))throw G("Vec4fAccessor requires accessor type "+mg().TYPE_VEC4+", provided was "+t.type);if(5126!==t.componentType)throw G("Vec4fAccessor requires a float component type, provided was "+t.componentType)}function Zg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_VEC4))throw G("Vec4iAccessor requires accessor type "+mg().TYPE_VEC4+", provided was "+t.type);if(!mg().COMP_INT_TYPES.contains_11rb$(t.componentType))throw G("Vec4fAccessor requires a (byte / short / int) component type, provided was "+t.componentType)}function Jg(t){if(Gg.call(this,t),!Lt(t.type,mg().TYPE_MAT4))throw G("Mat4fAccessor requires accessor type "+mg().TYPE_MAT4+", provided was "+t.type);if(5126!==t.componentType)throw G("Mat4fAccessor requires a float component type, provided was "+t.componentType)}function Qg(t,e,i){Sb(),void 0===i&&(i=null),this.channels=t,this.samplers=e,this.name=i}function tb(t,e){nb(),this.sampler=t,this.target=e,this.samplerRef_jhnz8x$_0=this.samplerRef_jhnz8x$_0}function eb(){ib=this}dg.$metadata$={kind:$,simpleName:"GltfAccessor",interfaces:[]},dg.prototype.component1=function(){return this.bufferView},dg.prototype.component2=function(){return this.byteOffset},dg.prototype.component3=function(){return this.componentType},dg.prototype.component4=function(){return this.normalized},dg.prototype.component5=function(){return this.count},dg.prototype.component6=function(){return this.type},dg.prototype.component7=function(){return this.max},dg.prototype.component8=function(){return this.min},dg.prototype.component9=function(){return this.sparse},dg.prototype.component10=function(){return this.name},dg.prototype.copy_4gbanh$=function(t,e,i,n,r,o,s,a,l,u){return new dg(void 0===t?this.bufferView:t,void 0===e?this.byteOffset:e,void 0===i?this.componentType:i,void 0===n?this.normalized:n,void 0===r?this.count:r,void 0===o?this.type:o,void 0===s?this.max:s,void 0===a?this.min:a,void 0===l?this.sparse:l,void 0===u?this.name:u)},dg.prototype.toString=function(){return"GltfAccessor(bufferView="+e.toString(this.bufferView)+", byteOffset="+e.toString(this.byteOffset)+", componentType="+e.toString(this.componentType)+", normalized="+e.toString(this.normalized)+", count="+e.toString(this.count)+", type="+e.toString(this.type)+", max="+e.toString(this.max)+", min="+e.toString(this.min)+", sparse="+e.toString(this.sparse)+", name="+e.toString(this.name)+")"},dg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.bufferView)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.componentType)|0)+e.hashCode(this.normalized)|0)+e.hashCode(this.count)|0)+e.hashCode(this.type)|0)+e.hashCode(this.max)|0)+e.hashCode(this.min)|0)+e.hashCode(this.sparse)|0)+e.hashCode(this.name)|0},dg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.componentType,t.componentType)&&e.equals(this.normalized,t.normalized)&&e.equals(this.count,t.count)&&e.equals(this.type,t.type)&&e.equals(this.max,t.max)&&e.equals(this.min,t.min)&&e.equals(this.sparse,t.sparse)&&e.equals(this.name,t.name)},Object.defineProperty(Gg.prototype,"index",{configurable:!0,get:function(){return this.index_hw47f3$_0},set:function(t){var i;this.index_hw47f3$_0=t,null!=(i=this.stream_lcz6z5$_0)&&(i.index=e.imul(t,this.byteStride_tkyqsw$_0))}}),Gg.prototype.selectDataStream_ji0jaj$_0=function(){return this.index!==this.nextSparseIndex_bp7us$_0?this.stream_lcz6z5$_0:this.sparseValueStream_1f0jfy$_0},Gg.prototype.nextInt=function(){var t,e;if(this.index<this.accessor.count)return null!=(e=null!=(t=this.selectDataStream_ji0jaj$_0())?this.nextIntComponent_jcyej8$_0(t,this.accessor.componentType):null)?e:0;throw new Ce("Accessor overflow")},Gg.prototype.nextFloat=function(){var t,e;if(this.index<this.accessor.count)return null!=(e=null!=(t=this.selectDataStream_ji0jaj$_0())?t.readFloat():null)?e:0;throw new Ce("Accessor overflow")},Gg.prototype.nextDouble=function(){return this.nextFloat()},Gg.prototype.nextIntComponent_jcyej8$_0=function(t,e){var i;switch(e){case 5120:i=t.readByte();break;case 5121:i=t.readUByte();break;case 5122:i=t.readShort();break;case 5123:i=t.readUShort();break;case 5124:i=t.readInt();break;case 5125:i=t.readUInt();break;default:throw G("Invalid component type: "+e)}return i},Gg.prototype.advance=function(){var t;this.index===this.nextSparseIndex_bp7us$_0&&!0===(null!=(t=this.sparseIndexStream_2vmodr$_0)?t.hasRemaining():null)&&(this.nextSparseIndex_bp7us$_0=this.nextIntComponent_jcyej8$_0(this.sparseIndexStream_2vmodr$_0,this.sparseIndexType_mlp9rd$_0)),this.index=this.index+1|0},Gg.$metadata$={kind:$,simpleName:"DataStreamAccessor",interfaces:[]},Hg.prototype.next=function(){if(this.index<this.accessor.count){var t=this.nextInt();return this.advance(),t}throw new Ce("Accessor overflow")},Hg.$metadata$={kind:$,simpleName:"IntAccessor",interfaces:[Gg]},Wg.prototype.next=function(){var t=this.nextFloat();return this.advance(),t},Wg.prototype.nextD=function(){return this.next()},Wg.$metadata$={kind:$,simpleName:"FloatAccessor",interfaces:[Gg]},Xg.prototype.next=function(){return this.next_5s4mrl$(pr())},Xg.prototype.next_5s4mrl$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),this.advance(),t},Xg.prototype.nextD=function(){return this.nextD_5s4mrn$(yr())},Xg.prototype.nextD_5s4mrn$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),this.advance(),t},Xg.$metadata$={kind:$,simpleName:"Vec2fAccessor",interfaces:[Gg]},Kg.prototype.next=function(){return this.next_5s4mqq$(Mr())},Kg.prototype.next_5s4mqq$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),t.z=this.nextFloat(),this.advance(),t},Kg.prototype.nextD=function(){return this.nextD_5s4mqs$(Br())},Kg.prototype.nextD_5s4mqs$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),t.z=this.nextDouble(),this.advance(),t},Kg.$metadata$={kind:$,simpleName:"Vec3fAccessor",interfaces:[Gg]},Yg.prototype.next=function(){return this.next_5s4mpv$(no())},Yg.prototype.next_5s4mpv$=function(t){return t.x=this.nextFloat(),t.y=this.nextFloat(),t.z=this.nextFloat(),t.w=this.nextFloat(),this.advance(),t},Yg.prototype.nextD=function(){return this.nextD_5s4mpx$(po())},Yg.prototype.nextD_5s4mpx$=function(t){return t.x=this.nextDouble(),t.y=this.nextDouble(),t.z=this.nextDouble(),t.w=this.nextDouble(),this.advance(),t},Yg.$metadata$={kind:$,simpleName:"Vec4fAccessor",interfaces:[Gg]},Zg.prototype.next=function(){return this.next_5s4mps$(Eo())},Zg.prototype.next_5s4mps$=function(t){return t.x=this.nextInt(),t.y=this.nextInt(),t.z=this.nextInt(),t.w=this.nextInt(),this.advance(),t},Zg.$metadata$={kind:$,simpleName:"Vec4iAccessor",interfaces:[Gg]},Jg.prototype.next=function(){return this.next_d4zu6j$(new En)},Jg.prototype.next_d4zu6j$=function(t){for(var e=0;e<=15;e++)t.matrix[e]=this.nextFloat();return this.advance(),t},Jg.prototype.nextD=function(){return this.nextD_d4zu6l$(new bn)},Jg.prototype.nextD_d4zu6l$=function(t){for(var e=0;e<=15;e++)t.matrix[e]=this.nextDouble();return this.advance(),t},Jg.$metadata$={kind:$,simpleName:"Mat4fAccessor",interfaces:[Gg]},Object.defineProperty(tb.prototype,"samplerRef",{configurable:!0,get:function(){return null==this.samplerRef_jhnz8x$_0?ct("samplerRef"):this.samplerRef_jhnz8x$_0},set:function(t){this.samplerRef_jhnz8x$_0=t}}),eb.prototype.serializer=function(){return sb()},eb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var ib=null;function nb(){return null===ib&&new eb,ib}function rb(){this.descriptor_lxi57x$_0=new be("de.fabmax.kool.util.gltf.GltfAnimation.Channel",this,2),this.descriptor.addElement_ivxn3r$("sampler",!1),this.descriptor.addElement_ivxn3r$("target",!1),ob=this}Object.defineProperty(rb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_lxi57x$_0}}),rb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.sampler),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,fb(),e.target),i.endStructure_24f42q$(this.descriptor)},rb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=o.decodeSerializableElement_12e8id$(this.descriptor,1,fb(),n),r|=2;break;case-1:break t;default:throw new xe(e)}return o.endStructure_24f42q$(this.descriptor),ab(r,i,n,null)},rb.prototype.childSerializers=function(){return[we.IntSerializer,fb()]},rb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var ob=null;function sb(){return null===ob&&new rb,ob}function ab(t,e,i,n){var r=n||Object.create(tb.prototype);if(0==(1&t))throw new ke("sampler");if(r.sampler=e,0==(2&t))throw new ke("target");return r.target=i,r}function lb(t,e){cb(),void 0===t&&(t=-1),this.node=t,this.path=e,this.nodeRef=null}function ub(){pb=this,this.PATH_TRANSLATION="translation",this.PATH_ROTATION="rotation",this.PATH_SCALE="scale",this.PATH_WEIGHTS="weights"}tb.$metadata$={kind:$,simpleName:"Channel",interfaces:[]},tb.prototype.component1=function(){return this.sampler},tb.prototype.component2=function(){return this.target},tb.prototype.copy_16lfz8$=function(t,e){return new tb(void 0===t?this.sampler:t,void 0===e?this.target:e)},tb.prototype.toString=function(){return"Channel(sampler="+e.toString(this.sampler)+", target="+e.toString(this.target)+")"},tb.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.sampler)|0)+e.hashCode(this.target)|0},tb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.sampler,t.sampler)&&e.equals(this.target,t.target)},ub.prototype.serializer=function(){return fb()},ub.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pb=null;function cb(){return null===pb&&new ub,pb}function hb(){this.descriptor_8uby97$_0=new be("de.fabmax.kool.util.gltf.GltfAnimation.Target",this,2),this.descriptor.addElement_ivxn3r$("node",!0),this.descriptor.addElement_ivxn3r$("path",!1),db=this}Object.defineProperty(hb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_8uby97$_0}}),hb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.node,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.node),i.encodeStringElement_iij8qq$(this.descriptor,1,e.path),i.endStructure_24f42q$(this.descriptor)},hb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeIntElement_szpzho$(this.descriptor,0),r|=1;break;case 1:n=o.decodeStringElement_szpzho$(this.descriptor,1),r|=2;break;case-1:break t;default:throw new xe(e)}return o.endStructure_24f42q$(this.descriptor),_b(r,i,n,null)},hb.prototype.childSerializers=function(){return[we.IntSerializer,we.StringSerializer]},hb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var db=null;function fb(){return null===db&&new hb,db}function _b(t,e,i,n){var r=n||Object.create(lb.prototype);if(r.node=0==(1&t)?-1:e,0==(2&t))throw new ke("path");return r.path=i,r.nodeRef=null,r}function mb(t,e,i){vb(),void 0===e&&(e=vb().INTERPOLATION_LINEAR),this.input=t,this.interpolation=e,this.output=i,this.inputAccessorRef_83hs5f$_0=this.inputAccessorRef_83hs5f$_0,this.outputAccessorRef_fq2m6i$_0=this.outputAccessorRef_fq2m6i$_0}function $b(){yb=this,this.INTERPOLATION_LINEAR="LINEAR",this.INTERPOLATION_STEP="STEP",this.INTERPOLATION_CUBICSPLINE="CUBICSPLINE"}lb.$metadata$={kind:$,simpleName:"Target",interfaces:[]},lb.prototype.component1=function(){return this.node},lb.prototype.component2=function(){return this.path},lb.prototype.copy_19mbxw$=function(t,e){return new lb(void 0===t?this.node:t,void 0===e?this.path:e)},lb.prototype.toString=function(){return"Target(node="+e.toString(this.node)+", path="+e.toString(this.path)+")"},lb.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.node)|0)+e.hashCode(this.path)|0},lb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.node,t.node)&&e.equals(this.path,t.path)},Object.defineProperty(mb.prototype,"inputAccessorRef",{configurable:!0,get:function(){return null==this.inputAccessorRef_83hs5f$_0?ct("inputAccessorRef"):this.inputAccessorRef_83hs5f$_0},set:function(t){this.inputAccessorRef_83hs5f$_0=t}}),Object.defineProperty(mb.prototype,"outputAccessorRef",{configurable:!0,get:function(){return null==this.outputAccessorRef_fq2m6i$_0?ct("outputAccessorRef"):this.outputAccessorRef_fq2m6i$_0},set:function(t){this.outputAccessorRef_fq2m6i$_0=t}}),$b.prototype.serializer=function(){return xb()},$b.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var yb=null;function vb(){return null===yb&&new $b,yb}function gb(){this.descriptor_vtcpaw$_0=new be("de.fabmax.kool.util.gltf.GltfAnimation.Sampler",this,3),this.descriptor.addElement_ivxn3r$("input",!1),this.descriptor.addElement_ivxn3r$("interpolation",!0),this.descriptor.addElement_ivxn3r$("output",!1),bb=this}Object.defineProperty(gb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vtcpaw$_0}}),gb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.input),Lt(e.interpolation,vb().INTERPOLATION_LINEAR)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeStringElement_iij8qq$(this.descriptor,1,e.interpolation),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.output),i.endStructure_24f42q$(this.descriptor)},gb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeStringElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeIntElement_szpzho$(this.descriptor,2),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),wb(o,i,n,r,null)},gb.prototype.childSerializers=function(){return[we.IntSerializer,we.StringSerializer,we.IntSerializer]},gb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var bb=null;function xb(){return null===bb&&new gb,bb}function wb(t,e,i,n,r){var o=r||Object.create(mb.prototype);if(0==(1&t))throw new ke("input");if(o.input=e,o.interpolation=0==(2&t)?vb().INTERPOLATION_LINEAR:i,0==(4&t))throw new ke("output");return o.output=n,o}function zb(){kb=this}mb.$metadata$={kind:$,simpleName:"Sampler",interfaces:[]},mb.prototype.component1=function(){return this.input},mb.prototype.component2=function(){return this.interpolation},mb.prototype.component3=function(){return this.output},mb.prototype.copy_jl0c9m$=function(t,e,i){return new mb(void 0===t?this.input:t,void 0===e?this.interpolation:e,void 0===i?this.output:i)},mb.prototype.toString=function(){return"Sampler(input="+e.toString(this.input)+", interpolation="+e.toString(this.interpolation)+", output="+e.toString(this.output)+")"},mb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.input)|0)+e.hashCode(this.interpolation)|0)+e.hashCode(this.output)|0},mb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.input,t.input)&&e.equals(this.interpolation,t.interpolation)&&e.equals(this.output,t.output)},zb.prototype.serializer=function(){return Eb()},zb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var kb=null;function Sb(){return null===kb&&new zb,kb}function Cb(){this.descriptor_tnzh7m$_0=new be("de.fabmax.kool.util.gltf.GltfAnimation",this,3),this.descriptor.addElement_ivxn3r$("channels",!1),this.descriptor.addElement_ivxn3r$("samplers",!1),this.descriptor.addElement_ivxn3r$("name",!0),Nb=this}Object.defineProperty(Cb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_tnzh7m$_0}}),Cb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Se(sb()),e.channels),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new Se(xb()),e.samplers),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Cb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeSerializableElement_12e8id$(this.descriptor,0,new Se(sb()),i),o|=1;break;case 1:n=s.decodeSerializableElement_12e8id$(this.descriptor,1,new Se(xb()),n),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,we.StringSerializer,r),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),Tb(o,i,n,r,null)},Cb.prototype.childSerializers=function(){return[new Se(sb()),new Se(xb()),new ve(we.StringSerializer)]},Cb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Nb=null;function Eb(){return null===Nb&&new Cb,Nb}function Tb(t,e,i,n,r){var o=r||Object.create(Qg.prototype);if(0==(1&t))throw new ke("channels");if(o.channels=e,0==(2&t))throw new ke("samplers");return o.samplers=i,o.name=0==(4&t)?null:n,o}function Pb(t,e,i,n){jb(),void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.copyright=t,this.generator=e,this.version=i,this.minVersion=n}function Ob(){Mb=this}Qg.$metadata$={kind:$,simpleName:"GltfAnimation",interfaces:[]},Qg.prototype.component1=function(){return this.channels},Qg.prototype.component2=function(){return this.samplers},Qg.prototype.component3=function(){return this.name},Qg.prototype.copy_gie5zu$=function(t,e,i){return new Qg(void 0===t?this.channels:t,void 0===e?this.samplers:e,void 0===i?this.name:i)},Qg.prototype.toString=function(){return"GltfAnimation(channels="+e.toString(this.channels)+", samplers="+e.toString(this.samplers)+", name="+e.toString(this.name)+")"},Qg.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.channels)|0)+e.hashCode(this.samplers)|0)+e.hashCode(this.name)|0},Qg.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.channels,t.channels)&&e.equals(this.samplers,t.samplers)&&e.equals(this.name,t.name)},Ob.prototype.serializer=function(){return Rb()},Ob.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Mb=null;function jb(){return null===Mb&&new Ob,Mb}function Ab(){this.descriptor_jo73ey$_0=new be("de.fabmax.kool.util.gltf.GltfAsset",this,4),this.descriptor.addElement_ivxn3r$("copyright",!0),this.descriptor.addElement_ivxn3r$("generator",!0),this.descriptor.addElement_ivxn3r$("version",!1),this.descriptor.addElement_ivxn3r$("minVersion",!0),Ib=this}Object.defineProperty(Ab.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_jo73ey$_0}}),Ab.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.copyright,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,we.StringSerializer,e.copyright),Lt(e.generator,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,we.StringSerializer,e.generator),i.encodeStringElement_iij8qq$(this.descriptor,2,e.version),Lt(e.minVersion,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,we.StringSerializer,e.minVersion),i.endStructure_24f42q$(this.descriptor)},Ab.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,we.StringSerializer,i),s|=1;break;case 1:n=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,we.StringSerializer,n),s|=2;break;case 2:r=a.decodeStringElement_szpzho$(this.descriptor,2),s|=4;break;case 3:o=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,we.StringSerializer,o),s|=8;break;case-1:break t;default:throw new xe(e)}return a.endStructure_24f42q$(this.descriptor),Lb(s,i,n,r,o,null)},Ab.prototype.childSerializers=function(){return[new ve(we.StringSerializer),new ve(we.StringSerializer),we.StringSerializer,new ve(we.StringSerializer)]},Ab.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Ib=null;function Rb(){return null===Ib&&new Ab,Ib}function Lb(t,e,i,n,r,o){var s=o||Object.create(Pb.prototype);if(s.copyright=0==(1&t)?null:e,s.generator=0==(2&t)?null:i,0==(4&t))throw new ke("version");return s.version=n,s.minVersion=0==(8&t)?null:r,s}function Db(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$tmp$=void 0,this.local$file=void 0,this.local$modelBasePath=void 0,this.local$tmp$_1=void 0,this.local$element=void 0,this.local$$receiver=t,this.local$assetPath=e}function qb(t,e,i,n){var r=new Db(t,e,i);return n?r:r.doResume(null)}function Fb(t,e,i,n,r){l.call(this,r),this.exceptionState_0=1,this.local$$receiver=t,this.local$assetPath=e,this.local$modelCfg=i,this.local$scene=n}function Bb(t){return Ee(t,".glb",!0)||Ee(t,".glb.gz",!0)}function Ub(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$$receiver=t,this.local$assetPath=e}function Vb(t,e,i,n){var r=new Ub(t,e,i);return n?r:r.doResume(null)}function Gb(t,e,i){l.call(this,i),this.exceptionState_0=1,this.local$tmp$=void 0,this.local$$receiver=t,this.local$assetPath=e}function Hb(t,e,i,n){var r=new Gb(t,e,i);return n?r:r.doResume(null)}function Wb(t,e,i){Yb(),void 0===t&&(t=null),void 0===i&&(i=null),this.uri=t,this.byteLength=e,this.name=i,this.data_5ej3ir$_0=this.data_5ej3ir$_0}function Xb(){Kb=this}Pb.$metadata$={kind:$,simpleName:"GltfAsset",interfaces:[]},Pb.prototype.component1=function(){return this.copyright},Pb.prototype.component2=function(){return this.generator},Pb.prototype.component3=function(){return this.version},Pb.prototype.component4=function(){return this.minVersion},Pb.prototype.copy_iz7fdb$=function(t,e,i,n){return new Pb(void 0===t?this.copyright:t,void 0===e?this.generator:e,void 0===i?this.version:i,void 0===n?this.minVersion:n)},Pb.prototype.toString=function(){return"GltfAsset(copyright="+e.toString(this.copyright)+", generator="+e.toString(this.generator)+", version="+e.toString(this.version)+", minVersion="+e.toString(this.minVersion)+")"},Pb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.copyright)|0)+e.hashCode(this.generator)|0)+e.hashCode(this.version)|0)+e.hashCode(this.minVersion)|0},Pb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.copyright,t.copyright)&&e.equals(this.generator,t.generator)&&e.equals(this.version,t.version)&&e.equals(this.minVersion,t.minVersion)},Db.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Db.prototype=Object.create(l.prototype),Db.prototype.constructor=Db,Db.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(m=this.local$assetPath,Ee(m,".gltf",!0)||Ee(m,".gltf.gz",!0)){if(this.state_0=4,this.result_0=Vb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue}if(Bb(this.local$assetPath)){if(this.state_0=2,this.result_0=Hb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue}this.local$tmp$=null,this.state_0=3;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=this.result_0,this.state_0=3;continue;case 3:this.state_0=5;continue;case 4:this.local$tmp$=this.result_0,this.state_0=5;continue;case 5:if(this.local$file=this.local$tmp$,Ne(this.local$assetPath,47)){var e=Xt(this.local$assetPath,47);t=this.local$assetPath.substring(0,e)}else t=".";if(this.local$modelBasePath=t,null!=this.local$file){var i,n=this.local$file.buffers,r=M();for(i=n.iterator();i.hasNext();){var o=i.next();null!=o.uri&&r.add_11rb$(o)}this.local$tmp$_1=r.iterator(),this.state_0=6;continue}this.state_0=9;continue;case 6:if(!this.local$tmp$_1.hasNext()){this.state_0=8;continue}this.local$element=this.local$tmp$_1.next();var s=x(this.local$element.uri),l=u(s,"data:",!0)?s:this.local$modelBasePath+"/"+s;if(this.state_0=7,this.result_0=this.local$$receiver.loadAsset_61zpoe$(l,this),this.result_0===a)return a;continue;case 7:this.local$element.data=x(this.result_0),this.state_0=6;continue;case 8:var p,c,h=this.local$file.images,d=M();for(p=h.iterator();p.hasNext();){var f=p.next();null!=f.uri&&d.add_11rb$(f)}for(c=d.iterator();c.hasNext();){var _=c.next();_.uri=this.local$modelBasePath+"/"+Ct(_.uri)}this.local$file.updateReferences_8be2vx$(),this.state_0=9;continue;case 9:return this.local$file;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}var m},Fb.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Fb.prototype=Object.create(l.prototype),Fb.prototype.constructor=Fb,Fb.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t;if(void 0===this.local$modelCfg&&(this.local$modelCfg=new px),void 0===this.local$scene&&(this.local$scene=0),this.state_0=2,this.result_0=qb(this.local$$receiver,this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return null!=(t=this.result_0)?t.makeModel_m0hq3v$(this.local$modelCfg,this.local$scene):null;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ub.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Ub.prototype=Object.create(l.prototype),Ub.prototype.constructor=Ub,Ub.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAsset_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return null!=t&&Ee(this.local$assetPath,".gz",!0)&&(t=this.local$$receiver.inflate_ay2i3f$(t)),null!=t?$x().fromJson_61zpoe$(Te(t.toArray())):null;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Gb.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Gb.prototype=Object.create(l.prototype),Gb.prototype.constructor=Gb,Gb.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$$receiver.loadAsset_61zpoe$(this.local$assetPath,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:if(this.local$tmp$=this.result_0,null==this.local$tmp$)return null;this.state_0=3;continue;case 3:var t=this.local$tmp$;Ee(this.local$assetPath,".gz",!0)&&(t=this.local$$receiver.inflate_ay2i3f$(t));var i=new Wy(t),n=i.readUInt(),r=i.readUInt();if(i.readUInt(),1179937895!==n)throw cn("Unexpected glTF magic number: "+n+" (should be 1179937895 / 'glTF')");if(2!==r){var o=DE.Log,s=$k.WARN,l=e.getKClassFromExpression(this.local$$receiver).simpleName;s.level>=o.level.level&&o.printer(s,l,"Unexpected glTF version: "+r+" (should be 2) - stuff might not work as expected")}var u=i.readUInt(),p={v:i.readUInt()};if(1313821514!==p.v)throw cn("Unexpected chunk type for chunk 0: "+p.v+" (should be 1313821514 / 'JSON')");for(var c=i.readData_za3lpa$(u).toArray(),h=$x().fromJson_61zpoe$(Te(c)),d={v:1};i.hasRemaining();){if(u=i.readUInt(),p.v=i.readUInt(),5130562===p.v)h.buffers.get_za3lpa$(d.v-1|0).data=i.readData_za3lpa$(u);else{var f=DE.Log,_=$k.WARN,m=e.getKClassFromExpression(this.local$$receiver).simpleName;_.level>=f.level.level&&f.printer(_,m,"Unexpected chunk type for chunk "+d.v+": "+p.v+" (should be 5130562 / ' BIN')"),i.index=i.index+u|0}d.v=d.v+1|0}return h;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Object.defineProperty(Wb.prototype,"data",{configurable:!0,get:function(){return null==this.data_5ej3ir$_0?ct("data"):this.data_5ej3ir$_0},set:function(t){this.data_5ej3ir$_0=t}}),Xb.prototype.serializer=function(){return Qb()},Xb.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Kb=null;function Yb(){return null===Kb&&new Xb,Kb}function Zb(){this.descriptor_ou5fio$_0=new be("de.fabmax.kool.util.gltf.GltfBuffer",this,3),this.descriptor.addElement_ivxn3r$("uri",!0),this.descriptor.addElement_ivxn3r$("byteLength",!1),this.descriptor.addElement_ivxn3r$("name",!0),Jb=this}Object.defineProperty(Zb.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_ou5fio$_0}}),Zb.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.uri,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,we.StringSerializer,e.uri),i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteLength),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Zb.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,we.StringSerializer,i),o|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,we.StringSerializer,r),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),tx(o,i,n,r,null)},Zb.prototype.childSerializers=function(){return[new ve(we.StringSerializer),we.IntSerializer,new ve(we.StringSerializer)]},Zb.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Jb=null;function Qb(){return null===Jb&&new Zb,Jb}function tx(t,e,i,n,r){var o=r||Object.create(Wb.prototype);if(o.uri=0==(1&t)?null:e,0==(2&t))throw new ke("byteLength");return o.byteLength=i,o.name=0==(4&t)?null:n,o}function ex(t,e,i,n,r,o){rx(),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=null),this.buffer=t,this.byteOffset=e,this.byteLength=i,this.byteStride=n,this.target=r,this.name=o,this.bufferRef_y7hzt1$_0=this.bufferRef_y7hzt1$_0}function ix(){nx=this}Wb.$metadata$={kind:$,simpleName:"GltfBuffer",interfaces:[]},Wb.prototype.component1=function(){return this.uri},Wb.prototype.component2=function(){return this.byteLength},Wb.prototype.component3=function(){return this.name},Wb.prototype.copy_xf6674$=function(t,e,i){return new Wb(void 0===t?this.uri:t,void 0===e?this.byteLength:e,void 0===i?this.name:i)},Wb.prototype.toString=function(){return"GltfBuffer(uri="+e.toString(this.uri)+", byteLength="+e.toString(this.byteLength)+", name="+e.toString(this.name)+")"},Wb.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.uri)|0)+e.hashCode(this.byteLength)|0)+e.hashCode(this.name)|0},Wb.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.uri,t.uri)&&e.equals(this.byteLength,t.byteLength)&&e.equals(this.name,t.name)},Object.defineProperty(ex.prototype,"bufferRef",{configurable:!0,get:function(){return null==this.bufferRef_y7hzt1$_0?ct("bufferRef"):this.bufferRef_y7hzt1$_0},set:function(t){this.bufferRef_y7hzt1$_0=t}}),ex.prototype.getData=function(){var t,e=xE(this.byteLength);t=this.byteLength;for(var i=0;i<t;i++)e.set_6t1wet$(i,this.bufferRef.data.get_za3lpa$(this.byteOffset+i|0));return e},ix.prototype.serializer=function(){return ax()},ix.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var nx=null;function rx(){return null===nx&&new ix,nx}function ox(){this.descriptor_7gwufp$_0=new be("de.fabmax.kool.util.gltf.GltfBufferView",this,6),this.descriptor.addElement_ivxn3r$("buffer",!1),this.descriptor.addElement_ivxn3r$("byteOffset",!0),this.descriptor.addElement_ivxn3r$("byteLength",!1),this.descriptor.addElement_ivxn3r$("byteStride",!0),this.descriptor.addElement_ivxn3r$("target",!0),this.descriptor.addElement_ivxn3r$("name",!0),sx=this}Object.defineProperty(ox.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7gwufp$_0}}),ox.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.buffer),Lt(e.byteOffset,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.byteOffset),i.encodeIntElement_ptg7oe$(this.descriptor,2,e.byteLength),Lt(e.byteStride,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeIntElement_ptg7oe$(this.descriptor,3,e.byteStride),Lt(e.target,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeIntElement_ptg7oe$(this.descriptor,4,e.target),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},ox.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l=0,u=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=u.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=u.decodeIntElement_szpzho$(this.descriptor,0),l|=1;break;case 1:n=u.decodeIntElement_szpzho$(this.descriptor,1),l|=2;break;case 2:r=u.decodeIntElement_szpzho$(this.descriptor,2),l|=4;break;case 3:o=u.decodeIntElement_szpzho$(this.descriptor,3),l|=8;break;case 4:s=u.decodeIntElement_szpzho$(this.descriptor,4),l|=16;break;case 5:a=u.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,we.StringSerializer,a),l|=32;break;case-1:break t;default:throw new xe(e)}return u.endStructure_24f42q$(this.descriptor),lx(l,i,n,r,o,s,a,null)},ox.prototype.childSerializers=function(){return[we.IntSerializer,we.IntSerializer,we.IntSerializer,we.IntSerializer,we.IntSerializer,new ve(we.StringSerializer)]},ox.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var sx=null;function ax(){return null===sx&&new ox,sx}function lx(t,e,i,n,r,o,s,a){var l=a||Object.create(ex.prototype);if(0==(1&t))throw new ke("buffer");if(l.buffer=e,l.byteOffset=0==(2&t)?0:i,0==(4&t))throw new ke("byteLength");return l.byteLength=n,l.byteStride=0==(8&t)?0:r,l.target=0==(16&t)?0:o,l.name=0==(32&t)?null:s,l}function ux(t,e,i,n,r,o,s,a,l,u,p,c,h,d,f){$x(),void 0===t&&(t=Nt()),void 0===e&&(e=Nt()),void 0===i&&(i=Nt()),void 0===n&&(n=Nt()),void 0===o&&(o=Nt()),void 0===s&&(s=Nt()),void 0===a&&(a=Nt()),void 0===l&&(l=Nt()),void 0===u&&(u=Nt()),void 0===p&&(p=Nt()),void 0===c&&(c=0),void 0===h&&(h=Nt()),void 0===d&&(d=Nt()),void 0===f&&(f=Nt()),this.extensionsUsed=t,this.extensionsRequired=e,this.accessors=i,this.animations=n,this.asset=r,this.buffers=o,this.bufferViews=s,this.images=a,this.materials=l,this.meshes=u,this.nodes=p,this.scene=c,this.scenes=h,this.skins=d,this.textures=f}function px(t,e,i,n,r,o,s,a,l,u,p){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=new cx),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===l&&(l=!1),void 0===u&&(u=!0),void 0===p&&(p=null),this.generateNormals=t,this.applyMaterials=e,this.materialConfig=i,this.loadAnimations=n,this.applySkins=r,this.applyMorphTargets=o,this.applyTransforms=s,this.removeEmptyNodes=a,this.mergeMeshesByMaterial=l,this.sortNodesByAlpha=u,this.pbrBlock=p}function cx(t,e,i,n){void 0===t&&(t=Nt()),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),this.shadowMaps=t,this.scrSpcAmbientOcclusionMap=e,this.environmentMaps=i,this.isDeferredShading=n}function hx(t,e){this.$outer=t,this.cfg=e,this.modelAnimations=M(),this.modelNodes=z(),this.meshesByMaterial=z(),this.meshMaterials=z()}function dx(t){return function(e){var i;i=e.numVertices;for(var n=0;n<i;n++){e.vertexIt.index=n;var r=t,o=e.vertexIt;r.transform_w1lst9$(o.position,1),r.transform_w1lst9$(o.normal,0);var a=o.tangent.getXyz_5s4mqq$(Mr());r.transform_w1lst9$(a,0),o.tangent.set_2qa7tb$(a,o.tangent.w)}return s}}function fx(){mx=this,this.GLB_FILE_MAGIC=1179937895,this.GLB_CHUNK_MAGIC_JSON=1313821514,this.GLB_CHUNK_MAGIC_BIN=5130562}function _x(t){return t.isLenient=!0,t.ignoreUnknownKeys=!0,t.allowSpecialFloatingPointValues=!0,t.useArrayPolymorphism=!0,s}ex.$metadata$={kind:$,simpleName:"GltfBufferView",interfaces:[]},ex.prototype.component1=function(){return this.buffer},ex.prototype.component2=function(){return this.byteOffset},ex.prototype.component3=function(){return this.byteLength},ex.prototype.component4=function(){return this.byteStride},ex.prototype.component5=function(){return this.target},ex.prototype.component6=function(){return this.name},ex.prototype.copy_o3471x$=function(t,e,i,n,r,o){return new ex(void 0===t?this.buffer:t,void 0===e?this.byteOffset:e,void 0===i?this.byteLength:i,void 0===n?this.byteStride:n,void 0===r?this.target:r,void 0===o?this.name:o)},ex.prototype.toString=function(){return"GltfBufferView(buffer="+e.toString(this.buffer)+", byteOffset="+e.toString(this.byteOffset)+", byteLength="+e.toString(this.byteLength)+", byteStride="+e.toString(this.byteStride)+", target="+e.toString(this.target)+", name="+e.toString(this.name)+")"},ex.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.buffer)|0)+e.hashCode(this.byteOffset)|0)+e.hashCode(this.byteLength)|0)+e.hashCode(this.byteStride)|0)+e.hashCode(this.target)|0)+e.hashCode(this.name)|0},ex.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.buffer,t.buffer)&&e.equals(this.byteOffset,t.byteOffset)&&e.equals(this.byteLength,t.byteLength)&&e.equals(this.byteStride,t.byteStride)&&e.equals(this.target,t.target)&&e.equals(this.name,t.name)},ux.prototype.makeModel_m0hq3v$=function(t,e){return void 0===t&&(t=new px),void 0===e&&(e=this.scene),new hx(this,t).makeModel_m76q01$(this.scenes.get_za3lpa$(e))},ux.prototype.updateReferences_8be2vx$=function(){var t,e,i;for(t=this.accessors.iterator();t.hasNext();){var n,r=t.next();r.bufferView>=0&&(r.bufferViewRef=this.bufferViews.get_za3lpa$(r.bufferView)),null!=(n=r.sparse)&&(n.indices.bufferViewRef=this.bufferViews.get_za3lpa$(n.indices.bufferView),n.values.bufferViewRef=this.bufferViews.get_za3lpa$(n.values.bufferView))}for(e=this.animations.iterator();e.hasNext();){var o,s,a=e.next();for(o=a.samplers.iterator();o.hasNext();){var l=o.next();l.inputAccessorRef=this.accessors.get_za3lpa$(l.input),l.outputAccessorRef=this.accessors.get_za3lpa$(l.output)}for(s=a.channels.iterator();s.hasNext();){var u=s.next();u.samplerRef=a.samplers.get_za3lpa$(u.sampler),u.target.node>=0&&(u.target.nodeRef=this.nodes.get_za3lpa$(u.target.node))}}for(i=this.bufferViews.iterator();i.hasNext();){var p=i.next();p.bufferRef=this.buffers.get_za3lpa$(p.buffer)}var c,h,d,f,_,m,$,y=this.images,v=M();for(c=y.iterator();c.hasNext();){var g=c.next();g.bufferView>=0&&v.add_11rb$(g)}for(h=v.iterator();h.hasNext();){var b=h.next();b.bufferViewRef=this.bufferViews.get_za3lpa$(b.bufferView)}for(d=this.meshes.iterator();d.hasNext();){var x;for(x=d.next().primitives.iterator();x.hasNext();){var z=x.next();z.material>=0&&(z.materialRef=this.materials.get_za3lpa$(z.material))}}for(f=this.nodes.iterator();f.hasNext();){var k,S=f.next(),C=S.children,N=w(j(C,10));for(k=C.iterator();k.hasNext();){var E=k.next();N.add_11rb$(this.nodes.get_za3lpa$(E))}S.childRefs=N,S.mesh>=0&&(S.meshRef=this.meshes.get_za3lpa$(S.mesh)),S.skin>=0&&(S.skinRef=this.skins.get_za3lpa$(S.skin))}for(_=this.scenes.iterator();_.hasNext();){var T,P=_.next(),O=P.nodes,A=w(j(O,10));for(T=O.iterator();T.hasNext();){var I=T.next();A.add_11rb$(this.nodes.get_za3lpa$(I))}P.nodeRefs=A}for(m=this.skins.iterator();m.hasNext();){var R=m.next();R.inverseBindMatrices>=0&&(R.inverseBindMatrixAccessorRef=this.accessors.get_za3lpa$(R.inverseBindMatrices));var L,D=R.joints,q=w(j(D,10));for(L=D.iterator();L.hasNext();){var F=L.next();q.add_11rb$(this.nodes.get_za3lpa$(F))}R.jointRefs=q}for($=this.textures.iterator();$.hasNext();){var B=$.next();B.imageRef=this.images.get_za3lpa$(B.source)}},px.$metadata$={kind:$,simpleName:"ModelGenerateConfig",interfaces:[]},cx.$metadata$={kind:$,simpleName:"ModelMaterialConfig",interfaces:[]},hx.prototype.makeModel_m76q01$=function(t){var e,i,n,r=new Pf(null!=(e=t.name)?e:"model_scene");for(i=t.nodeRefs.iterator();i.hasNext();){var o=i.next();r.plusAssign_f1kmr1$(this.makeNode_0(o,r,this.cfg))}for(this.cfg.loadAnimations&&this.makeTrsAnimations_0(),this.cfg.loadAnimations&&this.makeSkins_0(r),n=this.modelNodes.entries.iterator();n.hasNext();){var s=n.next(),a=s.key,l=s.value;this.createMeshes_0(a,r,l,this.cfg)}this.cfg.loadAnimations&&this.makeMorphAnimations_0();var u,p,c=this.modelAnimations,h=M();for(u=c.iterator();u.hasNext();){var d=u.next();d.channels.isEmpty()||h.add_11rb$(d)}for(p=h.iterator();p.hasNext();){var f=p.next();f.prepareAnimation(),r.animations.add_11rb$(f)}return r.disableAllAnimations(),this.cfg.applyTransforms&&r.animations.isEmpty()&&this.applyTransforms_0(r),this.cfg.mergeMeshesByMaterial&&this.mergeMeshesByMaterial_0(r),this.cfg.sortNodesByAlpha&&this.sortNodesByAlpha_0(r),this.cfg.removeEmptyNodes&&this.removeEmpty_0(r),r},hx.prototype.removeEmpty_0=function(t){var i,n,r=t.children,o=M();for(i=r.iterator();i.hasNext();){var s=i.next();e.isType(s,lf)&&o.add_11rb$(s)}for(n=o.iterator();n.hasNext();){var a=n.next();this.removeEmpty_0(a),a.children.isEmpty()&&t.removeNode_f1kmr1$(a)}},hx.prototype.makeTrsAnimations_0=function(){var t;for(t=this.$outer.animations.iterator();t.hasNext();){var i=t.next(),n=new Qm(i.name);this.modelAnimations.add_11rb$(n);var r,o=z();for(r=i.channels.iterator();r.hasNext();){var s,a=r.next(),l=this.modelNodes,u=a.target.nodeRef,p=(e.isType(s=l,ye)?s:c()).get_11rb$(u);if(null!=p){var h,d=o.get_11rb$(p);if(null==d){var f=new s$(p);o.put_xwzc9p$(p,f),h=f}else h=d;var _=h;switch(a.target.path){case"translation":this.makeTranslationAnimation_0(a,_,n);break;case"rotation":this.makeRotationAnimation_0(a,_,n);break;case"scale":this.makeScaleAnimation_0(a,_,n)}}}}},hx.prototype.makeTranslationAnimation_0=function(t,i,n){var r,o,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(Lt(a.type,mg().TYPE_SCALAR)&&5126===a.componentType)if(Lt(l.type,mg().TYPE_VEC3)&&5126===l.componentType){var u=new e$(Ct(n.name)+"_translation",i);switch(t.samplerRef.interpolation){case"STEP":r=m$();break;case"CUBICSPLINE":r=v$();break;default:r=d$()}var p=r;n.channels.add_11rb$(u);var c=new Wg(a),h=new Kg(l),d=a.count,f=l.count;o=A.min(d,f);for(var _=0;_<o;_++){var m=c.next();if(p===v$()){var $=h.nextD();s=new w$(m,h.nextD(),$,h.nextD())}else s=new x$(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=DE.Log,g=$k.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported translation animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var x=DE.Log,w=$k.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported translation animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},hx.prototype.makeRotationAnimation_0=function(t,i,n){var r,o,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(Lt(a.type,mg().TYPE_SCALAR)&&5126===a.componentType)if(Lt(l.type,mg().TYPE_VEC4)&&5126===l.componentType){var u=new i$(Ct(n.name)+"_rotation",i);switch(t.samplerRef.interpolation){case"STEP":r=m$();break;case"CUBICSPLINE":r=v$();break;default:r=d$()}var p=r;n.channels.add_11rb$(u);var c=new Wg(a),h=new Yg(l),d=a.count,f=l.count;o=A.min(d,f);for(var _=0;_<o;_++){var m=c.next();if(p===v$()){var $=h.nextD();s=new b$(m,h.nextD(),$,h.nextD())}else s=new g$(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=DE.Log,g=$k.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported rotation animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC4 and 5126 (float)")}else{var x=DE.Log,w=$k.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported rotation animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},hx.prototype.makeScaleAnimation_0=function(t,i,n){var r,o,s,a=t.samplerRef.inputAccessorRef,l=t.samplerRef.outputAccessorRef;if(Lt(a.type,mg().TYPE_SCALAR)&&5126===a.componentType)if(Lt(l.type,mg().TYPE_VEC3)&&5126===l.componentType){var u=new n$(Ct(n.name)+"_scale",i);switch(t.samplerRef.interpolation){case"STEP":r=m$();break;case"CUBICSPLINE":r=v$();break;default:r=d$()}var p=r;n.channels.add_11rb$(u);var c=new Wg(a),h=new Kg(l),d=a.count,f=l.count;o=A.min(d,f);for(var _=0;_<o;_++){var m=c.next();if(p===v$()){var $=h.nextD();s=new k$(m,h.nextD(),$,h.nextD())}else s=new z$(m,h.nextD());var y=s;y.interpolation=p,u.keys.put_xwzc9p$(m,y)}}else{var v=DE.Log,g=$k.WARN,b=e.getKClassFromExpression(this).simpleName;g.level>=v.level.level&&v.printer(g,b,"Unsupported scale animation output accessor: type = "+l.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var x=DE.Log,w=$k.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Unsupported scale animation input accessor: type = "+a.type+", component type = "+a.componentType+", should be SCALAR and 5126 (float)")}},hx.prototype.makeMorphAnimations_0=function(){var t,i,n=0;for(t=this.$outer.animations.iterator();t.hasNext();){var r,o=t.next(),s=tt((n=(i=n)+1|0,i));for(r=o.channels.iterator();r.hasNext();){var a,l,u,p=r.next();if(Lt(p.target.path,cb().PATH_WEIGHTS)){var h,d,f,_=this.modelAnimations.get_za3lpa$(s),m=null!=(a=p.target.nodeRef)?a.meshRef:null,$=this.modelNodes,y=p.target.nodeRef,v=(e.isType(h=$,ye)?h:c()).get_11rb$(y);if(null!=(l=null!=v?v.children:null)){var g,b=M();for(g=l.iterator();g.hasNext();){var w=g.next();e.isType(w,vf)&&b.add_11rb$(w)}d=b}else d=null;if(null!=(u=d))for(f=u.iterator();f.hasNext();){var z=f.next();this.makeWeightAnimation_0(x(m),p,new a$(z),_)}}}}},hx.prototype.makeWeightAnimation_0=function(t,i,n,r){var o,s,a,l=i.samplerRef.inputAccessorRef,u=i.samplerRef.outputAccessorRef;if(Lt(l.type,mg().TYPE_SCALAR)&&5126===l.componentType)if(Lt(u.type,mg().TYPE_SCALAR)&&5126===u.componentType){var p=new r$(Ct(r.name)+"_weight",n);switch(i.samplerRef.interpolation){case"STEP":o=m$();break;case"CUBICSPLINE":o=v$();break;default:o=d$()}var c=o;r.channels.add_11rb$(p);var h,d=t.primitives.get_za3lpa$(0).targets,f=0;for(h=t.primitives.get_za3lpa$(0).targets.iterator();h.hasNext();)f=f+h.next().size|0;var _=f,m=new Wg(l),$=new Wg(u),y=l.count,v=u.count;s=A.min(y,v);for(var g=0;g<s;g++){var b=m.next();if(c===v$()){for(var x=new Float32Array(_),w=new Float32Array(_),z=new Float32Array(_),k=0,S=0;S!==d.size;++S){var C,N,E=$.next();C=d.get_za3lpa$(S).size;for(var T=0;T<C;T++)x[(N=k,k=N+1|0,N)]=E}k=0;for(var P=0;P!==d.size;++P){var O,M,j=$.next();O=d.get_za3lpa$(P).size;for(var I=0;I<O;I++)w[(M=k,k=M+1|0,M)]=j}k=0;for(var R=0;R!==d.size;++R){var L,D,q=$.next();L=d.get_za3lpa$(R).size;for(var F=0;F<L;F++)z[(D=k,k=D+1|0,D)]=q}a=new C$(b,w,x,z)}else{for(var B=new Float32Array(_),U=0,V=0;V!==d.size;++V){var G,H,W=$.next();G=d.get_za3lpa$(V).size;for(var X=0;X<G;X++)B[(H=U,U=H+1|0,H)]=W}a=new S$(b,B)}var K=a;K.interpolation=c,p.keys.put_xwzc9p$(b,K)}}else{var Y=DE.Log,Z=$k.WARN,J=e.getKClassFromExpression(this).simpleName;Z.level>=Y.level.level&&Y.printer(Z,J,"Unsupported weight animation output accessor: type = "+u.type+", component type = "+l.componentType+", should be VEC3 and 5126 (float)")}else{var Q=DE.Log,tt=$k.WARN,et=e.getKClassFromExpression(this).simpleName;tt.level>=Q.level.level&&Q.printer(tt,et,"Unsupported weight animation input accessor: type = "+l.type+", component type = "+l.componentType+", should be SCALAR and 5126 (float)")}},hx.prototype.makeSkins_0=function(t){var e;for(e=this.$outer.skins.iterator();e.hasNext();){var i,n=e.next(),r=new L$,o=null!=(i=n.inverseBindMatrixAccessorRef)?new Jg(i):null;if(null!=o){var s,a,l=z();for(s=n.jointRefs.iterator();s.hasNext();){var u=s.next(),p=new D$(x(this.modelNodes.get_11rb$(u)),o.next());r.nodes.add_11rb$(p),l.put_xwzc9p$(u,p)}for(a=n.jointRefs.iterator();a.hasNext();){var c,h=a.next(),d=l.get_11rb$(h);if(null!=d)for(c=h.childRefs.iterator();c.hasNext();){var f=c.next(),_=l.get_11rb$(f);null!=_&&d.addChild_j3a3b7$(_)}}t.skins.add_11rb$(r)}}},hx.prototype.sortNodesByAlpha_0=function(t){var i,n,r=z(),o=0;for(i=t.children.iterator();i.hasNext();){var s=i.next(),a=1;e.isType(s,vf)&&!s.isOpaque?a=0:e.isType(s,lf)&&(a=this.sortNodesByAlpha_0(s));var l=a;r.put_xwzc9p$(s,l),o+=a}return t.sortChildrenBy_mq7kdd$((n=r,function(t){var e;return-(null!=(e=n.get_11rb$(t))?e:1)})),t.children.isEmpty()||(o/=t.children.size),o},hx.prototype.mergeMeshesByMaterial_0=function(t){this.mergeMeshesByMaterial_1(t)},hx.prototype.mergeMeshesByMaterial_1=function(t){var i,n,r,o=t.children,s=M();for(i=o.iterator();i.hasNext();){var a=i.next();e.isType(a,lf)&&s.add_11rb$(a)}for(n=s.iterator();n.hasNext();){var l=n.next();this.mergeMeshesByMaterial_1(l)}for(r=this.meshesByMaterial.values.iterator();r.hasNext();){var u,p,h=r.next(),d=t.children,f=M();for(p=d.iterator();p.hasNext();){var _=p.next();Me(h,_)&&f.add_11rb$(_)}var m,$=w(j(f,10));for(m=f.iterator();m.hasNext();){var y,v=m.next();$.add_11rb$(e.isType(y=v,vf)?y:c())}var g=$;if(g.size>1){var b=g.get_za3lpa$(0);u=g.size;for(var x=1;x<u;x++){var z=g.get_za3lpa$(x);Lt(z.geometry.attributeHash,b.geometry.attributeHash)&&(b.geometry.addGeometry_r7nl2o$(z.geometry),t.removeNode_f1kmr1$(z))}}}},hx.prototype.applyTransforms_0=function(t){var e=new kn;e.setIdentity(),this.applyTransforms_1(t,e,t)},hx.prototype.applyTransforms_1=function(t,i,n){i.push(),i.mul_d4zu6l$(t.transform);var r,o,s=t.children,a=M();for(r=s.iterator();r.hasNext();){var l=r.next();e.isType(l,vf)&&a.add_11rb$(l)}for(o=a.iterator();o.hasNext();){var u=o.next(),p=u.geometry,c=p.isBatchUpdate;p.isBatchUpdate=!0,dx(i)(p),p.hasChanged=!0,p.isBatchUpdate=c,p.rebuildBounds(),Lt(n,t)||n.plusAssign_f1kmr1$(u)}var h,d,f=t.children,_=M();for(h=f.iterator();h.hasNext();){var m=h.next();e.isType(m,lf)&&_.add_11rb$(m)}for(d=_.iterator();d.hasNext();){var $=d.next();this.applyTransforms_1($,i,n),t.removeNode_f1kmr1$($)}i.pop()},hx.prototype.makeNode_0=function(t,e,i){var n,r,o=null!=(n=t.name)?n:"node_"+e.nodes.size,s=new lf(o);if(this.modelNodes.put_xwzc9p$(t,s),e.nodes.put_xwzc9p$(o,s),null!=t.matrix){var a,l=s.transform,u=t.matrix,p=w(j(u,10));for(a=u.iterator();a.hasNext();){var c=a.next();p.add_11rb$(c)}l.set_d3e2cz$(p)}else{if(null!=t.translation&&s.translate_y2kzbl$(t.translation.get_za3lpa$(0),t.translation.get_za3lpa$(1),t.translation.get_za3lpa$(2)),null!=t.rotation){var h=(new bn).setRotate_czzhi1$(new ro(t.rotation.get_za3lpa$(0),t.rotation.get_za3lpa$(1),t.rotation.get_za3lpa$(2),t.rotation.get_za3lpa$(3)));s.transform.mul_d4zu6l$(h)}null!=t.scale&&s.scale_y2kzbl$(t.scale.get_za3lpa$(0),t.scale.get_za3lpa$(1),t.scale.get_za3lpa$(2))}for(r=t.childRefs.iterator();r.hasNext();){var d=r.next();s.plusAssign_f1kmr1$(this.makeNode_0(d,e,i))}return s},hx.prototype.createMeshes_0=function(t,i,n,r){var o,s;if(null!=(s=null!=(o=t.meshRef)?o.primitives:null)){var a,l;this.$outer;var u=0;for(a=s.iterator();a.hasNext();){var p,c,h=a.next(),d=this.$outer,f=tt((u=(l=u)+1|0,l)),_=(null!=(c=null!=(p=t.meshRef)?p.name:null)?c:Ct(n.name)+".mesh")+"_"+f,m=h.toGeometry_pfr3gu$(r.generateNormals,d.accessors);if(!m.isEmpty()){var $=new vf(m,_);n.plusAssign_f1kmr1$($);var y,v=this.meshesByMaterial,g=h.material,b=v.get_11rb$(g);if(null==b){var w=ht();v.put_xwzc9p$(g,w),y=w}else y=b;y.add_11rb$($);var z=this.meshMaterials,k=h.materialRef;if(z.put_xwzc9p$($,k),r.loadAnimations&&r.applySkins&&t.skin>=0){$.skin=i.skins.get_za3lpa$(t.skin);var S=d.skins.get_za3lpa$(t.skin).skeleton;S>=0&&(n.minusAssign_f1kmr1$($),x(this.modelNodes.get_11rb$(d.nodes.get_za3lpa$(S))).plusAssign_f1kmr1$($)),$.isFrustumChecked=!1}var C=r.loadAnimations&&r.applyMorphTargets;if(C&&(C=!h.targets.isEmpty()),C){var N,E=Float32Array,T=0;for(N=h.targets.iterator();N.hasNext();)T=T+N.next().size|0;$.morphWeights=new E(T),$.isFrustumChecked=!1}if(r.applyMaterials){var P,O,M,j,A,I,R,L,D={v:r.materialConfig.isDeferredShading},q=h.attributes.containsKey_11rb$(Yx().ATTRIBUTE_COLOR_0),F=new Oc,B=h.materialRef;null!=B?B.applyTo_rmmby8$(F,q,d):(F.albedo=Oy().GRAY,F.albedoSource=$c()),null!=$.skin&&(F.isSkinned=!0),null!=$.morphWeights&&wt(F.morphAttributes,$.geometry.getMorphAttributes());var U,V=r.materialConfig;if(wt(F.shadowMaps,V.shadowMaps),null!=(U=V.scrSpcAmbientOcclusionMap)&&F.useScreenSpaceAmbientOcclusion_9cjgzv$(U),F.useImageBasedLighting_po417x$(V.environmentMaps),null!=(P=r.pbrBlock)&&P(F,h),e.isType(F.alphaMode,bc)&&($.isOpaque=!1,D.v=!1),null!=(O=F.albedoMap)){var G,H;H=i.textures;var W=null!=(G=O.name)?G:"tex_"+i.textures.size;H.put_xwzc9p$(W,O)}if(null!=(M=F.emissiveMap)){var X,K;K=i.textures;var Y=null!=(X=M.name)?X:"tex_"+i.textures.size;K.put_xwzc9p$(Y,M)}if(null!=(j=F.normalMap)){var Z,J;J=i.textures;var Q=null!=(Z=j.name)?Z:"tex_"+i.textures.size;J.put_xwzc9p$(Q,j)}if(null!=(A=F.roughnessMap)){var et,it;it=i.textures;var nt=null!=(et=A.name)?et:"tex_"+i.textures.size;it.put_xwzc9p$(nt,A)}if(null!=(I=F.metallicMap)){var rt,ot;ot=i.textures;var st=null!=(rt=I.name)?rt:"tex_"+i.textures.size;ot.put_xwzc9p$(st,I)}if(null!=(R=F.occlusionMap)){var at,lt;lt=i.textures;var ut=null!=(at=R.name)?at:"tex_"+i.textures.size;lt.put_xwzc9p$(ut,R)}if(null!=(L=F.displacementMap)){var pt,ct;ct=i.textures;var dt=null!=(pt=L.name)?pt:"tex_"+i.textures.size;ct.put_xwzc9p$(dt,L)}var ft=F;D.v?(ft.isHdrOutput=!0,$.shader=new vv(ft)):(ft.isHdrOutput=!1,$.shader=new jc(ft))}i.meshes.put_xwzc9p$(_,$)}}}},hx.$metadata$={kind:$,simpleName:"ModelGenerator",interfaces:[]},fx.prototype.fromJson_61zpoe$=function(t){var i,n=je(void 0,_x);return n.decodeFromString_awif5v$(e.isType(i=Ae(n.serializersModule,Oe(Pe(ux),[],!1)),Ie)?i:c(),t)},fx.prototype.serializer=function(){return gx()},fx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var mx=null;function $x(){return null===mx&&new fx,mx}function yx(){this.descriptor_sl1tf8$_0=new be("de.fabmax.kool.util.gltf.GltfFile",this,15),this.descriptor.addElement_ivxn3r$("extensionsUsed",!0),this.descriptor.addElement_ivxn3r$("extensionsRequired",!0),this.descriptor.addElement_ivxn3r$("accessors",!0),this.descriptor.addElement_ivxn3r$("animations",!0),this.descriptor.addElement_ivxn3r$("asset",!1),this.descriptor.addElement_ivxn3r$("buffers",!0),this.descriptor.addElement_ivxn3r$("bufferViews",!0),this.descriptor.addElement_ivxn3r$("images",!0),this.descriptor.addElement_ivxn3r$("materials",!0),this.descriptor.addElement_ivxn3r$("meshes",!0),this.descriptor.addElement_ivxn3r$("nodes",!0),this.descriptor.addElement_ivxn3r$("scene",!0),this.descriptor.addElement_ivxn3r$("scenes",!0),this.descriptor.addElement_ivxn3r$("skins",!0),this.descriptor.addElement_ivxn3r$("textures",!0),vx=this}Object.defineProperty(yx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_sl1tf8$_0}}),yx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.extensionsUsed,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Se(we.StringSerializer),e.extensionsUsed),Lt(e.extensionsRequired,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new Se(we.StringSerializer),e.extensionsRequired),Lt(e.accessors,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeSerializableElement_r4qlx7$(this.descriptor,2,new Se(Ug()),e.accessors),Lt(e.animations,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeSerializableElement_r4qlx7$(this.descriptor,3,new Se(Eb()),e.animations),i.encodeSerializableElement_r4qlx7$(this.descriptor,4,Rb(),e.asset),Lt(e.buffers,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeSerializableElement_r4qlx7$(this.descriptor,5,new Se(Qb()),e.buffers),Lt(e.bufferViews,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeSerializableElement_r4qlx7$(this.descriptor,6,new Se(ax()),e.bufferViews),Lt(e.images,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeSerializableElement_r4qlx7$(this.descriptor,7,new Se(Nx()),e.images),Lt(e.materials,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeSerializableElement_r4qlx7$(this.descriptor,8,new Se(Vx()),e.materials),Lt(e.meshes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeSerializableElement_r4qlx7$(this.descriptor,9,new Se(sw()),e.meshes),Lt(e.nodes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,10)||i.encodeSerializableElement_r4qlx7$(this.descriptor,10,new Se(fw()),e.nodes),Lt(e.scene,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,11)||i.encodeIntElement_ptg7oe$(this.descriptor,11,e.scene),Lt(e.scenes,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,12)||i.encodeSerializableElement_r4qlx7$(this.descriptor,12,new Se(xw()),e.scenes),Lt(e.skins,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,13)||i.encodeSerializableElement_r4qlx7$(this.descriptor,13,new Se(Tw()),e.skins),Lt(e.textures,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,14)||i.encodeSerializableElement_r4qlx7$(this.descriptor,14,new Se(Dw()),e.textures),i.endStructure_24f42q$(this.descriptor)},yx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,$=0,y=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=y.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=y.decodeSerializableElement_12e8id$(this.descriptor,0,new Se(we.StringSerializer),i),$|=1;break;case 1:n=y.decodeSerializableElement_12e8id$(this.descriptor,1,new Se(we.StringSerializer),n),$|=2;break;case 2:r=y.decodeSerializableElement_12e8id$(this.descriptor,2,new Se(Ug()),r),$|=4;break;case 3:o=y.decodeSerializableElement_12e8id$(this.descriptor,3,new Se(Eb()),o),$|=8;break;case 4:s=y.decodeSerializableElement_12e8id$(this.descriptor,4,Rb(),s),$|=16;break;case 5:a=y.decodeSerializableElement_12e8id$(this.descriptor,5,new Se(Qb()),a),$|=32;break;case 6:l=y.decodeSerializableElement_12e8id$(this.descriptor,6,new Se(ax()),l),$|=64;break;case 7:u=y.decodeSerializableElement_12e8id$(this.descriptor,7,new Se(Nx()),u),$|=128;break;case 8:p=y.decodeSerializableElement_12e8id$(this.descriptor,8,new Se(Vx()),p),$|=256;break;case 9:c=y.decodeSerializableElement_12e8id$(this.descriptor,9,new Se(sw()),c),$|=512;break;case 10:h=y.decodeSerializableElement_12e8id$(this.descriptor,10,new Se(fw()),h),$|=1024;break;case 11:d=y.decodeIntElement_szpzho$(this.descriptor,11),$|=2048;break;case 12:f=y.decodeSerializableElement_12e8id$(this.descriptor,12,new Se(xw()),f),$|=4096;break;case 13:_=y.decodeSerializableElement_12e8id$(this.descriptor,13,new Se(Tw()),_),$|=8192;break;case 14:m=y.decodeSerializableElement_12e8id$(this.descriptor,14,new Se(Dw()),m),$|=16384;break;case-1:break t;default:throw new xe(e)}return y.endStructure_24f42q$(this.descriptor),bx($,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,null)},yx.prototype.childSerializers=function(){return[new Se(we.StringSerializer),new Se(we.StringSerializer),new Se(Ug()),new Se(Eb()),Rb(),new Se(Qb()),new Se(ax()),new Se(Nx()),new Se(Vx()),new Se(sw()),new Se(fw()),we.IntSerializer,new Se(xw()),new Se(Tw()),new Se(Dw())]},yx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var vx=null;function gx(){return null===vx&&new yx,vx}function bx(t,e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m){var $=m||Object.create(ux.prototype);if($.extensionsUsed=0==(1&t)?Nt():e,$.extensionsRequired=0==(2&t)?Nt():i,$.accessors=0==(4&t)?Nt():n,$.animations=0==(8&t)?Nt():r,0==(16&t))throw new ke("asset");return $.asset=o,$.buffers=0==(32&t)?Nt():s,$.bufferViews=0==(64&t)?Nt():a,$.images=0==(128&t)?Nt():l,$.materials=0==(256&t)?Nt():u,$.meshes=0==(512&t)?Nt():p,$.nodes=0==(1024&t)?Nt():c,$.scene=0==(2048&t)?0:h,$.scenes=0==(4096&t)?Nt():d,$.skins=0==(8192&t)?Nt():f,$.textures=0==(16384&t)?Nt():_,$}function xx(t,e,i,n){kx(),void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=-1),void 0===n&&(n=null),this.uri=t,this.mimeType=e,this.bufferView=i,this.name=n,this.bufferViewRef=null}function wx(){zx=this}ux.$metadata$={kind:$,simpleName:"GltfFile",interfaces:[]},ux.prototype.component1=function(){return this.extensionsUsed},ux.prototype.component2=function(){return this.extensionsRequired},ux.prototype.component3=function(){return this.accessors},ux.prototype.component4=function(){return this.animations},ux.prototype.component5=function(){return this.asset},ux.prototype.component6=function(){return this.buffers},ux.prototype.component7=function(){return this.bufferViews},ux.prototype.component8=function(){return this.images},ux.prototype.component9=function(){return this.materials},ux.prototype.component10=function(){return this.meshes},ux.prototype.component11=function(){return this.nodes},ux.prototype.component12=function(){return this.scene},ux.prototype.component13=function(){return this.scenes},ux.prototype.component14=function(){return this.skins},ux.prototype.component15=function(){return this.textures},ux.prototype.copy_2qvmcu$=function(t,e,i,n,r,o,s,a,l,u,p,c,h,d,f){return new ux(void 0===t?this.extensionsUsed:t,void 0===e?this.extensionsRequired:e,void 0===i?this.accessors:i,void 0===n?this.animations:n,void 0===r?this.asset:r,void 0===o?this.buffers:o,void 0===s?this.bufferViews:s,void 0===a?this.images:a,void 0===l?this.materials:l,void 0===u?this.meshes:u,void 0===p?this.nodes:p,void 0===c?this.scene:c,void 0===h?this.scenes:h,void 0===d?this.skins:d,void 0===f?this.textures:f)},ux.prototype.toString=function(){return"GltfFile(extensionsUsed="+e.toString(this.extensionsUsed)+", extensionsRequired="+e.toString(this.extensionsRequired)+", accessors="+e.toString(this.accessors)+", animations="+e.toString(this.animations)+", asset="+e.toString(this.asset)+", buffers="+e.toString(this.buffers)+", bufferViews="+e.toString(this.bufferViews)+", images="+e.toString(this.images)+", materials="+e.toString(this.materials)+", meshes="+e.toString(this.meshes)+", nodes="+e.toString(this.nodes)+", scene="+e.toString(this.scene)+", scenes="+e.toString(this.scenes)+", skins="+e.toString(this.skins)+", textures="+e.toString(this.textures)+")"},ux.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.extensionsUsed)|0)+e.hashCode(this.extensionsRequired)|0)+e.hashCode(this.accessors)|0)+e.hashCode(this.animations)|0)+e.hashCode(this.asset)|0)+e.hashCode(this.buffers)|0)+e.hashCode(this.bufferViews)|0)+e.hashCode(this.images)|0)+e.hashCode(this.materials)|0)+e.hashCode(this.meshes)|0)+e.hashCode(this.nodes)|0)+e.hashCode(this.scene)|0)+e.hashCode(this.scenes)|0)+e.hashCode(this.skins)|0)+e.hashCode(this.textures)|0},ux.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.extensionsUsed,t.extensionsUsed)&&e.equals(this.extensionsRequired,t.extensionsRequired)&&e.equals(this.accessors,t.accessors)&&e.equals(this.animations,t.animations)&&e.equals(this.asset,t.asset)&&e.equals(this.buffers,t.buffers)&&e.equals(this.bufferViews,t.bufferViews)&&e.equals(this.images,t.images)&&e.equals(this.materials,t.materials)&&e.equals(this.meshes,t.meshes)&&e.equals(this.nodes,t.nodes)&&e.equals(this.scene,t.scene)&&e.equals(this.scenes,t.scenes)&&e.equals(this.skins,t.skins)&&e.equals(this.textures,t.textures)},wx.prototype.serializer=function(){return Nx()},wx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var zx=null;function kx(){return null===zx&&new wx,zx}function Sx(){this.descriptor_bk6hkl$_0=new be("de.fabmax.kool.util.gltf.GltfImage",this,4),this.descriptor.addElement_ivxn3r$("uri",!0),this.descriptor.addElement_ivxn3r$("mimeType",!0),this.descriptor.addElement_ivxn3r$("bufferView",!0),this.descriptor.addElement_ivxn3r$("name",!0),Cx=this}Object.defineProperty(Sx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_bk6hkl$_0}}),Sx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.uri,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,we.StringSerializer,e.uri),Lt(e.mimeType,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,we.StringSerializer,e.mimeType),Lt(e.bufferView,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.bufferView),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Sx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,we.StringSerializer,i),s|=1;break;case 1:n=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,we.StringSerializer,n),s|=2;break;case 2:r=a.decodeIntElement_szpzho$(this.descriptor,2),s|=4;break;case 3:o=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,we.StringSerializer,o),s|=8;break;case-1:break t;default:throw new xe(e)}return a.endStructure_24f42q$(this.descriptor),Ex(s,i,n,r,o,null)},Sx.prototype.childSerializers=function(){return[new ve(we.StringSerializer),new ve(we.StringSerializer),we.IntSerializer,new ve(we.StringSerializer)]},Sx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Cx=null;function Nx(){return null===Cx&&new Sx,Cx}function Ex(t,e,i,n,r,o){var s=o||Object.create(xx.prototype);return s.uri=0==(1&t)?null:e,s.mimeType=0==(2&t)?null:i,s.bufferView=0==(4&t)?-1:n,s.name=0==(8&t)?null:r,s.bufferViewRef=null,s}function Tx(t,e,i,n,r,o,s,a,l){Fx(),void 0===t&&(t=null),void 0===e&&(e=new Px(At([.5,.5,.5,1]))),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=Fx().ALPHA_MODE_OPAQUE),void 0===a&&(a=.5),void 0===l&&(l=!1),this.name=t,this.pbrMetallicRoughness=e,this.normalTexture=i,this.occlusionTexture=n,this.emissiveTexture=r,this.emissiveFactor=o,this.alphaMode=s,this.alphaCutoff=a,this.doubleSided=l}function Px(t,e,i,n,r){jx(),void 0===t&&(t=At([1,1,1,1])),void 0===e&&(e=null),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=null),this.baseColorFactor=t,this.baseColorTexture=e,this.metallicFactor=i,this.roughnessFactor=n,this.metallicRoughnessTexture=r}function Ox(){Mx=this}xx.$metadata$={kind:$,simpleName:"GltfImage",interfaces:[]},xx.prototype.component1=function(){return this.uri},xx.prototype.component2=function(){return this.mimeType},xx.prototype.component3=function(){return this.bufferView},xx.prototype.component4=function(){return this.name},xx.prototype.copy_82a7yt$=function(t,e,i,n){return new xx(void 0===t?this.uri:t,void 0===e?this.mimeType:e,void 0===i?this.bufferView:i,void 0===n?this.name:n)},xx.prototype.toString=function(){return"GltfImage(uri="+e.toString(this.uri)+", mimeType="+e.toString(this.mimeType)+", bufferView="+e.toString(this.bufferView)+", name="+e.toString(this.name)+")"},xx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.uri)|0)+e.hashCode(this.mimeType)|0)+e.hashCode(this.bufferView)|0)+e.hashCode(this.name)|0},xx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.uri,t.uri)&&e.equals(this.mimeType,t.mimeType)&&e.equals(this.bufferView,t.bufferView)&&e.equals(this.name,t.name)},Tx.prototype.applyTo_rmmby8$=function(t,e,i){var n,r,o,s,a,l,u,p,c,h,d,f,_=null!=(n=this.pbrMetallicRoughness.baseColorTexture)?n.getTexture_vd9sc9$(i):null,m=null!=(r=this.emissiveTexture)?r.getTexture_vd9sc9$(i):null,$=null!=(o=this.normalTexture)?o.getTexture_vd9sc9$(i):null,y=null!=(s=this.pbrMetallicRoughness.metallicRoughnessTexture)?s.getTexture_vd9sc9$(i):null,v=null!=(a=this.pbrMetallicRoughness.metallicRoughnessTexture)?a.getTexture_vd9sc9$(i):null,g=null!=(l=this.occlusionTexture)?l.getTexture_vd9sc9$(i):null,b=this.pbrMetallicRoughness.baseColorFactor;switch(this.alphaMode){case"BLEND":u=new bc;break;case"MASK":u=new wc(this.alphaCutoff);break;default:u=new xc}t.alphaMode=u,p=this.doubleSided?Ol():Tl(),t.cullMethod=p,c=4===b.size?new Ey(b.get_za3lpa$(0),b.get_za3lpa$(1),b.get_za3lpa$(2),b.get_za3lpa$(3)):Oy().WHITE,t.albedo=c,e?t.albedoSource=vc():null!=_?(t.albedoSource=yc(),t.albedoMap=_,null!=(h=t.albedo)&&h.equals(Oy().WHITE)||(t.isMultiplyAlbedoMap=!0)):t.albedoSource=$c(),null!=m&&(t.isEmissiveMapped=!0,t.emissiveMap=m,null!=this.emissiveFactor&&(t.isMultiplyEmissiveMap=!0)),null!=this.emissiveFactor&&(t.emissive=new Ey(this.emissiveFactor.get_za3lpa$(0),this.emissiveFactor.get_za3lpa$(1),this.emissiveFactor.get_za3lpa$(2),1)),null!=$?(t.isNormalMapped=!0,t.normalMap=$):t.isNormalMapped=!1,t.roughness=this.pbrMetallicRoughness.roughnessFactor,null!=v?(t.isRoughnessMapped=!0,t.roughnessMap=v,1!==this.pbrMetallicRoughness.roughnessFactor&&(t.isMultiplyRoughnessMap=!0)):t.isRoughnessMapped=!1,t.metallic=this.pbrMetallicRoughness.metallicFactor,null!=y?(t.isMetallicMapped=!0,t.metallicMap=y,1!==this.pbrMetallicRoughness.metallicFactor&&(t.isMultiplyMetallicMap=!0)):t.isMetallicMapped=!1,null!=g?(t.isOcclusionMapped=!0,t.occlusionMap=g,t.occlusionStrength=null!=(f=null!=(d=this.occlusionTexture)?d.strength:null)?f:1):t.isOcclusionMapped=!1,t.isRoughnessMapped&&(v!==y&&v!==g?(t.roughnessChannel="r",t.roughnessTexName="tRoughness"):(t.roughnessChannel="g",t.roughnessTexName=v===y&&v===g?"tOcclRoughMetal":v===y?"tRoughMetal":"tOcclRough")),t.isMetallicMapped&&(y!==v&&y!==g?(t.metallicChannel="r",t.metallicTexName="tMetallic"):(t.metallicChannel="b",y===v&&y===g?t.metallicTexName="tOcclRoughMetal":y===v?t.metallicTexName="tRoughMetal":t.roughnessTexName="tOcclMetal")),t.isOcclusionMapped&&(g!==v&&g!==y?(t.occlusionChannel="r",t.occlusionTexName="tOcclusion"):(t.occlusionChannel="r",g===v&&g===y?t.occlusionTexName="tOcclRoughMetal":t.roughnessTexName=g===v?"tOcclRough":"tOcclMetal"))},Ox.prototype.serializer=function(){return Rx()},Ox.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Mx=null;function jx(){return null===Mx&&new Ox,Mx}function Ax(){this.descriptor_2b7y8e$_0=new be("de.fabmax.kool.util.gltf.GltfMaterial.PbrMetallicRoughness",this,5),this.descriptor.addElement_ivxn3r$("baseColorFactor",!0),this.descriptor.addElement_ivxn3r$("baseColorTexture",!0),this.descriptor.addElement_ivxn3r$("metallicFactor",!0),this.descriptor.addElement_ivxn3r$("roughnessFactor",!0),this.descriptor.addElement_ivxn3r$("metallicRoughnessTexture",!0),Ix=this}Object.defineProperty(Ax.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_2b7y8e$_0}}),Ax.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.baseColorFactor,At([1,1,1,1]))&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Se(we.FloatSerializer),e.baseColorFactor),Lt(e.baseColorTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,Ww(),e.baseColorTexture),Lt(e.metallicFactor,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeFloatElement_lf6hpt$(this.descriptor,2,e.metallicFactor),Lt(e.roughnessFactor,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeFloatElement_lf6hpt$(this.descriptor,3,e.roughnessFactor),Lt(e.metallicRoughnessTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,4,Ww(),e.metallicRoughnessTexture),i.endStructure_24f42q$(this.descriptor)},Ax.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a=0,l=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=l.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=l.decodeSerializableElement_12e8id$(this.descriptor,0,new Se(we.FloatSerializer),i),a|=1;break;case 1:n=l.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,Ww(),n),a|=2;break;case 2:r=l.decodeFloatElement_szpzho$(this.descriptor,2),a|=4;break;case 3:o=l.decodeFloatElement_szpzho$(this.descriptor,3),a|=8;break;case 4:s=l.decodeNullableSerializableElement_8viuyw$(this.descriptor,4,Ww(),s),a|=16;break;case-1:break t;default:throw new xe(e)}return l.endStructure_24f42q$(this.descriptor),Lx(a,i,n,r,o,s,null)},Ax.prototype.childSerializers=function(){return[new Se(we.FloatSerializer),new ve(Ww()),we.FloatSerializer,we.FloatSerializer,new ve(Ww())]},Ax.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Ix=null;function Rx(){return null===Ix&&new Ax,Ix}function Lx(t,e,i,n,r,o,s){var a=s||Object.create(Px.prototype);return a.baseColorFactor=0==(1&t)?At([1,1,1,1]):e,a.baseColorTexture=0==(2&t)?null:i,a.metallicFactor=0==(4&t)?1:n,a.roughnessFactor=0==(8&t)?1:r,a.metallicRoughnessTexture=0==(16&t)?null:o,a}function Dx(){qx=this,this.ALPHA_MODE_BLEND="BLEND",this.ALPHA_MODE_MASK="MASK",this.ALPHA_MODE_OPAQUE="OPAQUE"}Px.$metadata$={kind:$,simpleName:"PbrMetallicRoughness",interfaces:[]},Px.prototype.component1=function(){return this.baseColorFactor},Px.prototype.component2=function(){return this.baseColorTexture},Px.prototype.component3=function(){return this.metallicFactor},Px.prototype.component4=function(){return this.roughnessFactor},Px.prototype.component5=function(){return this.metallicRoughnessTexture},Px.prototype.copy_x3y116$=function(t,e,i,n,r){return new Px(void 0===t?this.baseColorFactor:t,void 0===e?this.baseColorTexture:e,void 0===i?this.metallicFactor:i,void 0===n?this.roughnessFactor:n,void 0===r?this.metallicRoughnessTexture:r)},Px.prototype.toString=function(){return"PbrMetallicRoughness(baseColorFactor="+e.toString(this.baseColorFactor)+", baseColorTexture="+e.toString(this.baseColorTexture)+", metallicFactor="+e.toString(this.metallicFactor)+", roughnessFactor="+e.toString(this.roughnessFactor)+", metallicRoughnessTexture="+e.toString(this.metallicRoughnessTexture)+")"},Px.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.baseColorFactor)|0)+e.hashCode(this.baseColorTexture)|0)+e.hashCode(this.metallicFactor)|0)+e.hashCode(this.roughnessFactor)|0)+e.hashCode(this.metallicRoughnessTexture)|0},Px.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.baseColorFactor,t.baseColorFactor)&&e.equals(this.baseColorTexture,t.baseColorTexture)&&e.equals(this.metallicFactor,t.metallicFactor)&&e.equals(this.roughnessFactor,t.roughnessFactor)&&e.equals(this.metallicRoughnessTexture,t.metallicRoughnessTexture)},Dx.prototype.serializer=function(){return Vx()},Dx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var qx=null;function Fx(){return null===qx&&new Dx,qx}function Bx(){this.descriptor_esy7m1$_0=new be("de.fabmax.kool.util.gltf.GltfMaterial",this,9),this.descriptor.addElement_ivxn3r$("name",!0),this.descriptor.addElement_ivxn3r$("pbrMetallicRoughness",!0),this.descriptor.addElement_ivxn3r$("normalTexture",!0),this.descriptor.addElement_ivxn3r$("occlusionTexture",!0),this.descriptor.addElement_ivxn3r$("emissiveTexture",!0),this.descriptor.addElement_ivxn3r$("emissiveFactor",!0),this.descriptor.addElement_ivxn3r$("alphaMode",!0),this.descriptor.addElement_ivxn3r$("alphaCutoff",!0),this.descriptor.addElement_ivxn3r$("doubleSided",!0),Ux=this}Object.defineProperty(Bx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_esy7m1$_0}}),Bx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,0,we.StringSerializer,e.name),Lt(e.pbrMetallicRoughness,new Px(At([.5,.5,.5,1])))&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,Rx(),e.pbrMetallicRoughness),Lt(e.normalTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,Ww(),e.normalTexture),Lt(e.occlusionTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,Ww(),e.occlusionTexture),Lt(e.emissiveTexture,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,4,Ww(),e.emissiveTexture),Lt(e.emissiveFactor,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,new Se(we.FloatSerializer),e.emissiveFactor),Lt(e.alphaMode,Fx().ALPHA_MODE_OPAQUE)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeStringElement_iij8qq$(this.descriptor,6,e.alphaMode),Lt(e.alphaCutoff,.5)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeFloatElement_lf6hpt$(this.descriptor,7,e.alphaCutoff),Lt(e.doubleSided,!1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeBooleanElement_qh7jdn$(this.descriptor,8,e.doubleSided),i.endStructure_24f42q$(this.descriptor)},Bx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c=0,h=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=h.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,0,we.StringSerializer,i),c|=1;break;case 1:n=h.decodeSerializableElement_12e8id$(this.descriptor,1,Rx(),n),c|=2;break;case 2:r=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,Ww(),r),c|=4;break;case 3:o=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,Ww(),o),c|=8;break;case 4:s=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,4,Ww(),s),c|=16;break;case 5:a=h.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,new Se(we.FloatSerializer),a),c|=32;break;case 6:l=h.decodeStringElement_szpzho$(this.descriptor,6),c|=64;break;case 7:u=h.decodeFloatElement_szpzho$(this.descriptor,7),c|=128;break;case 8:p=h.decodeBooleanElement_szpzho$(this.descriptor,8),c|=256;break;case-1:break t;default:throw new xe(e)}return h.endStructure_24f42q$(this.descriptor),Gx(c,i,n,r,o,s,a,l,u,p,null)},Bx.prototype.childSerializers=function(){return[new ve(we.StringSerializer),Rx(),new ve(Ww()),new ve(Ww()),new ve(Ww()),new ve(new Se(we.FloatSerializer)),we.StringSerializer,we.FloatSerializer,we.BooleanSerializer]},Bx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Ux=null;function Vx(){return null===Ux&&new Bx,Ux}function Gx(t,e,i,n,r,o,s,a,l,u,p){var c=p||Object.create(Tx.prototype);return c.name=0==(1&t)?null:e,c.pbrMetallicRoughness=0==(2&t)?new Px(At([.5,.5,.5,1])):i,c.normalTexture=0==(4&t)?null:n,c.occlusionTexture=0==(8&t)?null:r,c.emissiveTexture=0==(16&t)?null:o,c.emissiveFactor=0==(32&t)?null:s,c.alphaMode=0==(64&t)?Fx().ALPHA_MODE_OPAQUE:a,c.alphaCutoff=0==(128&t)?.5:l,c.doubleSided=0!=(256&t)&&u,c}function Hx(t,e,i){nw(),void 0===e&&(e=null),void 0===i&&(i=null),this.primitives=t,this.weights=e,this.name=i}function Wx(t,e,i,n,r){Yx(),void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===n&&(n=4),void 0===r&&(r=Nt()),this.attributes=t,this.indices=e,this.material=i,this.mode=n,this.targets=r,this.materialRef=null}function Xx(){Kx=this,this.MODE_POINTS=0,this.MODE_LINES=1,this.MODE_LINE_LOOP=2,this.MODE_LINE_STRIP=3,this.MODE_TRIANGLES=4,this.MODE_TRIANGLE_STRIP=5,this.MODE_TRIANGLE_FAN=6,this.MODE_QUADS=7,this.MODE_QUAD_STRIP=8,this.MODE_POLYGON=9,this.ATTRIBUTE_POSITION="POSITION",this.ATTRIBUTE_NORMAL="NORMAL",this.ATTRIBUTE_TANGENT="TANGENT",this.ATTRIBUTE_TEXCOORD_0="TEXCOORD_0",this.ATTRIBUTE_TEXCOORD_1="TEXCOORD_1",this.ATTRIBUTE_COLOR_0="COLOR_0",this.ATTRIBUTE_JOINTS_0="JOINTS_0",this.ATTRIBUTE_WEIGHTS_0="WEIGHTS_0"}Tx.$metadata$={kind:$,simpleName:"GltfMaterial",interfaces:[]},Tx.prototype.component1=function(){return this.name},Tx.prototype.component2=function(){return this.pbrMetallicRoughness},Tx.prototype.component3=function(){return this.normalTexture},Tx.prototype.component4=function(){return this.occlusionTexture},Tx.prototype.component5=function(){return this.emissiveTexture},Tx.prototype.component6=function(){return this.emissiveFactor},Tx.prototype.component7=function(){return this.alphaMode},Tx.prototype.component8=function(){return this.alphaCutoff},Tx.prototype.component9=function(){return this.doubleSided},Tx.prototype.copy_rgcvd8$=function(t,e,i,n,r,o,s,a,l){return new Tx(void 0===t?this.name:t,void 0===e?this.pbrMetallicRoughness:e,void 0===i?this.normalTexture:i,void 0===n?this.occlusionTexture:n,void 0===r?this.emissiveTexture:r,void 0===o?this.emissiveFactor:o,void 0===s?this.alphaMode:s,void 0===a?this.alphaCutoff:a,void 0===l?this.doubleSided:l)},Tx.prototype.toString=function(){return"GltfMaterial(name="+e.toString(this.name)+", pbrMetallicRoughness="+e.toString(this.pbrMetallicRoughness)+", normalTexture="+e.toString(this.normalTexture)+", occlusionTexture="+e.toString(this.occlusionTexture)+", emissiveTexture="+e.toString(this.emissiveTexture)+", emissiveFactor="+e.toString(this.emissiveFactor)+", alphaMode="+e.toString(this.alphaMode)+", alphaCutoff="+e.toString(this.alphaCutoff)+", doubleSided="+e.toString(this.doubleSided)+")"},Tx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.name)|0)+e.hashCode(this.pbrMetallicRoughness)|0)+e.hashCode(this.normalTexture)|0)+e.hashCode(this.occlusionTexture)|0)+e.hashCode(this.emissiveTexture)|0)+e.hashCode(this.emissiveFactor)|0)+e.hashCode(this.alphaMode)|0)+e.hashCode(this.alphaCutoff)|0)+e.hashCode(this.doubleSided)|0},Tx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.name,t.name)&&e.equals(this.pbrMetallicRoughness,t.pbrMetallicRoughness)&&e.equals(this.normalTexture,t.normalTexture)&&e.equals(this.occlusionTexture,t.occlusionTexture)&&e.equals(this.emissiveTexture,t.emissiveTexture)&&e.equals(this.emissiveFactor,t.emissiveFactor)&&e.equals(this.alphaMode,t.alphaMode)&&e.equals(this.alphaCutoff,t.alphaCutoff)&&e.equals(this.doubleSided,t.doubleSided)},Wx.prototype.toGeometry_pfr3gu$=function(t,i){var n,r,o,s,a,l,u,p,c,h,d,f=this.indices>=0?i.get_za3lpa$(this.indices):null,_=null!=(n=this.attributes.get_11rb$(Yx().ATTRIBUTE_POSITION))?i.get_za3lpa$(n):null,m=null!=(r=this.attributes.get_11rb$(Yx().ATTRIBUTE_NORMAL))?i.get_za3lpa$(r):null,$=null!=(o=this.attributes.get_11rb$(Yx().ATTRIBUTE_TANGENT))?i.get_za3lpa$(o):null,y=null!=(s=this.attributes.get_11rb$(Yx().ATTRIBUTE_TEXCOORD_0))?i.get_za3lpa$(s):null,v=null!=(a=this.attributes.get_11rb$(Yx().ATTRIBUTE_COLOR_0))?i.get_za3lpa$(a):null,g=null!=(l=this.attributes.get_11rb$(Yx().ATTRIBUTE_JOINTS_0))?i.get_za3lpa$(l):null,b=null!=(u=this.attributes.get_11rb$(Yx().ATTRIBUTE_WEIGHTS_0))?i.get_za3lpa$(u):null;if(this.attributes.containsKey_11rb$(Yx().ATTRIBUTE_TEXCOORD_1)){var x=DE.Log,w=$k.WARN,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Second set of UVs is not yet supported and therefore ignored")}if(null==_){var k=DE.Log,S=$k.WARN,C=e.getKClassFromExpression(this).simpleName;return S.level>=k.level.level&&k.printer(S,C,"MeshPrimitive without position attribute"),Xz([])}var N=!1,E=M(),T=ds().POSITIONS;E.add_11rb$(T);var P=ds().NORMALS;if(E.add_11rb$(P),null!=v){var O=ds().COLORS;E.add_11rb$(O)}if(null!=y){var j=ds().TEXTURE_COORDS;E.add_11rb$(j)}if(null!=$){var A=ds().TANGENTS;E.add_11rb$(A)}else if(null!=(null!=(p=this.materialRef)?p.normalTexture:null)){var I=ds().TANGENTS;E.add_11rb$(I),N=!0}if(null!=g){var R=ds().JOINTS;E.add_11rb$(R)}if(null!=b){var L=ds().WEIGHTS;E.add_11rb$(L)}var D=this.makeMorphTargetAccessors_0(i);wt(E,D.keys);var q=new Dz(E),F=new Kg(_),B=null!=m?new Kg(m):null,U=null!=$?new Yg($):null,V=null!=y?new Xg(y):null,G=null!=v?new Yg(v):null,H=null!=g?new Zg(g):null,W=null!=b?new Yg(b):null;c=_.count;for(var X=0;X<c;X++){var K,Y,Z;q.checkBufferSizes_za3lpa$(),K=q.vertexSizeF;for(var J=1;J<=K;J++)q.dataF.plusAssign_mx4ult$(0);Y=q.vertexSizeI;for(var Q=1;Q<=Y;Q++)q.dataI.plusAssign_za3lpa$(0);q.vertexIt.index=(Z=q.numVertices,q.numVertices=Z+1|0,Z);var tt,et,it=q.vertexIt;for(F.next_5s4mqq$(it.position),null!=B&&B.next_5s4mqq$(it.normal),null!=U&&U.next_5s4mpv$(it.tangent),null!=V&&V.next_5s4mrl$(it.texCoord),null!=(tt=null!=G?G.next():null)&&it.color.set_czzhhz$(tt),null!=H&&H.next_5s4mps$(it.joints),null!=W&&W.next_5s4mpv$(it.weights),et=D.entries.iterator();et.hasNext();){var nt,rt=et.next(),ot=rt.key,st=rt.value;null!=(nt=it.getVec3fAttribute_nm2vx5$(ot))&&st.next_5s4mqq$(nt)}q.bounds.add_czzhiu$(q.vertexIt.position),q.hasChanged=!0,q.numVertices}if(null!=f){var at=new Hg(f);h=f.count;for(var lt=0;lt<h;lt++)q.addIndex_za3lpa$(at.next())}else{d=_.count;for(var ut=0;ut<d;ut++)q.addIndex_za3lpa$(ut)}return N&&q.generateTangents_mx4ult$(),(t||null==m)&&q.generateNormals(),q},Wx.prototype.makeMorphTargetAccessors_0=function(t){var e,i,n=z(),r=0;for(e=this.targets.iterator();e.hasNext();){var o,s,a,l=e.next(),u="_"+(tt((r=(i=r)+1|0,i))+1|0);if(null!=(o=l.get_11rb$(Yx().ATTRIBUTE_NORMAL))){var p=new ps(ds().NORMALS.name+u,es()),c=new Kg(t.get_za3lpa$(o));n.put_xwzc9p$(p,c)}if(null!=(s=l.get_11rb$(Yx().ATTRIBUTE_POSITION))){var h=new ps(ds().POSITIONS.name+u,es()),d=new Kg(t.get_za3lpa$(s));n.put_xwzc9p$(h,d)}if(null!=(a=l.get_11rb$(Yx().ATTRIBUTE_TANGENT))){var f=new ps(ds().TANGENTS.name+u,es()),_=new Kg(t.get_za3lpa$(a));n.put_xwzc9p$(f,_)}}return n},Xx.prototype.serializer=function(){return Qx()},Xx.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Kx=null;function Yx(){return null===Kx&&new Xx,Kx}function Zx(){this.descriptor_6bhnca$_0=new be("de.fabmax.kool.util.gltf.GltfMesh.Primitive",this,5),this.descriptor.addElement_ivxn3r$("attributes",!1),this.descriptor.addElement_ivxn3r$("indices",!0),this.descriptor.addElement_ivxn3r$("material",!0),this.descriptor.addElement_ivxn3r$("mode",!0),this.descriptor.addElement_ivxn3r$("targets",!0),Jx=this}Object.defineProperty(Zx.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_6bhnca$_0}}),Zx.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Re(we.StringSerializer,we.IntSerializer),e.attributes),Lt(e.indices,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.indices),Lt(e.material,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.material),Lt(e.mode,4)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeIntElement_ptg7oe$(this.descriptor,3,e.mode),Lt(e.targets,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeSerializableElement_r4qlx7$(this.descriptor,4,new Se(new Re(we.StringSerializer,we.IntSerializer)),e.targets),i.endStructure_24f42q$(this.descriptor)},Zx.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a=0,l=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=l.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=l.decodeSerializableElement_12e8id$(this.descriptor,0,new Re(we.StringSerializer,we.IntSerializer),i),a|=1;break;case 1:n=l.decodeIntElement_szpzho$(this.descriptor,1),a|=2;break;case 2:r=l.decodeIntElement_szpzho$(this.descriptor,2),a|=4;break;case 3:o=l.decodeIntElement_szpzho$(this.descriptor,3),a|=8;break;case 4:s=l.decodeSerializableElement_12e8id$(this.descriptor,4,new Se(new Re(we.StringSerializer,we.IntSerializer)),s),a|=16;break;case-1:break t;default:throw new xe(e)}return l.endStructure_24f42q$(this.descriptor),tw(a,i,n,r,o,s,null)},Zx.prototype.childSerializers=function(){return[new Re(we.StringSerializer,we.IntSerializer),we.IntSerializer,we.IntSerializer,we.IntSerializer,new Se(new Re(we.StringSerializer,we.IntSerializer))]},Zx.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Jx=null;function Qx(){return null===Jx&&new Zx,Jx}function tw(t,e,i,n,r,o,s){var a=s||Object.create(Wx.prototype);if(0==(1&t))throw new ke("attributes");return a.attributes=e,a.indices=0==(2&t)?-1:i,a.material=0==(4&t)?-1:n,a.mode=0==(8&t)?4:r,a.targets=0==(16&t)?Nt():o,a.materialRef=null,a}function ew(){iw=this}Wx.$metadata$={kind:$,simpleName:"Primitive",interfaces:[]},Wx.prototype.component1=function(){return this.attributes},Wx.prototype.component2=function(){return this.indices},Wx.prototype.component3=function(){return this.material},Wx.prototype.component4=function(){return this.mode},Wx.prototype.component5=function(){return this.targets},Wx.prototype.copy_nzvr0p$=function(t,e,i,n,r){return new Wx(void 0===t?this.attributes:t,void 0===e?this.indices:e,void 0===i?this.material:i,void 0===n?this.mode:n,void 0===r?this.targets:r)},Wx.prototype.toString=function(){return"Primitive(attributes="+e.toString(this.attributes)+", indices="+e.toString(this.indices)+", material="+e.toString(this.material)+", mode="+e.toString(this.mode)+", targets="+e.toString(this.targets)+")"},Wx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.attributes)|0)+e.hashCode(this.indices)|0)+e.hashCode(this.material)|0)+e.hashCode(this.mode)|0)+e.hashCode(this.targets)|0},Wx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.attributes,t.attributes)&&e.equals(this.indices,t.indices)&&e.equals(this.material,t.material)&&e.equals(this.mode,t.mode)&&e.equals(this.targets,t.targets)},ew.prototype.serializer=function(){return sw()},ew.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var iw=null;function nw(){return null===iw&&new ew,iw}function rw(){this.descriptor_82b5j7$_0=new be("de.fabmax.kool.util.gltf.GltfMesh",this,3),this.descriptor.addElement_ivxn3r$("primitives",!1),this.descriptor.addElement_ivxn3r$("weights",!0),this.descriptor.addElement_ivxn3r$("name",!0),ow=this}Object.defineProperty(rw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_82b5j7$_0}}),rw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Se(Qx()),e.primitives),Lt(e.weights,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,new Se(we.FloatSerializer),e.weights),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},rw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeSerializableElement_12e8id$(this.descriptor,0,new Se(Qx()),i),o|=1;break;case 1:n=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,new Se(we.FloatSerializer),n),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,we.StringSerializer,r),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),aw(o,i,n,r,null)},rw.prototype.childSerializers=function(){return[new Se(Qx()),new ve(new Se(we.FloatSerializer)),new ve(we.StringSerializer)]},rw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var ow=null;function sw(){return null===ow&&new rw,ow}function aw(t,e,i,n,r){var o=r||Object.create(Hx.prototype);if(0==(1&t))throw new ke("primitives");return o.primitives=e,o.weights=0==(2&t)?null:i,o.name=0==(4&t)?null:n,o}function lw(t,e,i,n,r,o,s,a,l,u){cw(),void 0===t&&(t=-1),void 0===e&&(e=Nt()),void 0===i&&(i=-1),void 0===n&&(n=null),void 0===r&&(r=-1),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===u&&(u=null),this.camera=t,this.children=e,this.skin=i,this.matrix=n,this.mesh=r,this.rotation=o,this.scale=s,this.translation=a,this.weights=l,this.name=u,this.childRefs_cmm67z$_0=this.childRefs_cmm67z$_0,this.meshRef=null,this.skinRef=null}function uw(){pw=this}Hx.$metadata$={kind:$,simpleName:"GltfMesh",interfaces:[]},Hx.prototype.component1=function(){return this.primitives},Hx.prototype.component2=function(){return this.weights},Hx.prototype.component3=function(){return this.name},Hx.prototype.copy_fdi4sq$=function(t,e,i){return new Hx(void 0===t?this.primitives:t,void 0===e?this.weights:e,void 0===i?this.name:i)},Hx.prototype.toString=function(){return"GltfMesh(primitives="+e.toString(this.primitives)+", weights="+e.toString(this.weights)+", name="+e.toString(this.name)+")"},Hx.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.primitives)|0)+e.hashCode(this.weights)|0)+e.hashCode(this.name)|0},Hx.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.primitives,t.primitives)&&e.equals(this.weights,t.weights)&&e.equals(this.name,t.name)},Object.defineProperty(lw.prototype,"childRefs",{configurable:!0,get:function(){return null==this.childRefs_cmm67z$_0?ct("childRefs"):this.childRefs_cmm67z$_0},set:function(t){this.childRefs_cmm67z$_0=t}}),uw.prototype.serializer=function(){return fw()},uw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var pw=null;function cw(){return null===pw&&new uw,pw}function hw(){this.descriptor_t10j82$_0=new be("de.fabmax.kool.util.gltf.GltfNode",this,10),this.descriptor.addElement_ivxn3r$("camera",!0),this.descriptor.addElement_ivxn3r$("children",!0),this.descriptor.addElement_ivxn3r$("skin",!0),this.descriptor.addElement_ivxn3r$("matrix",!0),this.descriptor.addElement_ivxn3r$("mesh",!0),this.descriptor.addElement_ivxn3r$("rotation",!0),this.descriptor.addElement_ivxn3r$("scale",!0),this.descriptor.addElement_ivxn3r$("translation",!0),this.descriptor.addElement_ivxn3r$("weights",!0),this.descriptor.addElement_ivxn3r$("name",!0),dw=this}Object.defineProperty(hw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_t10j82$_0}}),hw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.camera,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.camera),Lt(e.children,Nt())&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeSerializableElement_r4qlx7$(this.descriptor,1,new Se(we.IntSerializer),e.children),Lt(e.skin,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.skin),Lt(e.matrix,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,new Se(we.FloatSerializer),e.matrix),Lt(e.mesh,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,4)||i.encodeIntElement_ptg7oe$(this.descriptor,4,e.mesh),Lt(e.rotation,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,5)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,5,new Se(we.FloatSerializer),e.rotation),Lt(e.scale,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,6)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,6,new Se(we.FloatSerializer),e.scale),Lt(e.translation,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,7)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,7,new Se(we.FloatSerializer),e.translation),Lt(e.weights,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,8)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,8,new Se(we.FloatSerializer),e.weights),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,9)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,9,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},hw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s,a,l,u,p,c,h=0,d=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=d.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=d.decodeIntElement_szpzho$(this.descriptor,0),h|=1;break;case 1:n=d.decodeSerializableElement_12e8id$(this.descriptor,1,new Se(we.IntSerializer),n),h|=2;break;case 2:r=d.decodeIntElement_szpzho$(this.descriptor,2),h|=4;break;case 3:o=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,new Se(we.FloatSerializer),o),h|=8;break;case 4:s=d.decodeIntElement_szpzho$(this.descriptor,4),h|=16;break;case 5:a=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,5,new Se(we.FloatSerializer),a),h|=32;break;case 6:l=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,6,new Se(we.FloatSerializer),l),h|=64;break;case 7:u=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,7,new Se(we.FloatSerializer),u),h|=128;break;case 8:p=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,8,new Se(we.FloatSerializer),p),h|=256;break;case 9:c=d.decodeNullableSerializableElement_8viuyw$(this.descriptor,9,we.StringSerializer,c),h|=512;break;case-1:break t;default:throw new xe(e)}return d.endStructure_24f42q$(this.descriptor),_w(h,i,n,r,o,s,a,l,u,p,c,null)},hw.prototype.childSerializers=function(){return[we.IntSerializer,new Se(we.IntSerializer),we.IntSerializer,new ve(new Se(we.FloatSerializer)),we.IntSerializer,new ve(new Se(we.FloatSerializer)),new ve(new Se(we.FloatSerializer)),new ve(new Se(we.FloatSerializer)),new ve(new Se(we.FloatSerializer)),new ve(we.StringSerializer)]},hw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var dw=null;function fw(){return null===dw&&new hw,dw}function _w(t,e,i,n,r,o,s,a,l,u,p,c){var h=c||Object.create(lw.prototype);return h.camera=0==(1&t)?-1:e,h.children=0==(2&t)?Nt():i,h.skin=0==(4&t)?-1:n,h.matrix=0==(8&t)?null:r,h.mesh=0==(16&t)?-1:o,h.rotation=0==(32&t)?null:s,h.scale=0==(64&t)?null:a,h.translation=0==(128&t)?null:l,h.weights=0==(256&t)?null:u,h.name=0==(512&t)?null:p,h.meshRef=null,h.skinRef=null,h}function mw(t,e){vw(),void 0===e&&(e=null),this.nodes=t,this.name=e,this.nodeRefs_fy674b$_0=this.nodeRefs_fy674b$_0}function $w(){yw=this}lw.$metadata$={kind:$,simpleName:"GltfNode",interfaces:[]},lw.prototype.component1=function(){return this.camera},lw.prototype.component2=function(){return this.children},lw.prototype.component3=function(){return this.skin},lw.prototype.component4=function(){return this.matrix},lw.prototype.component5=function(){return this.mesh},lw.prototype.component6=function(){return this.rotation},lw.prototype.component7=function(){return this.scale},lw.prototype.component8=function(){return this.translation},lw.prototype.component9=function(){return this.weights},lw.prototype.component10=function(){return this.name},lw.prototype.copy_gbbj5h$=function(t,e,i,n,r,o,s,a,l,u){return new lw(void 0===t?this.camera:t,void 0===e?this.children:e,void 0===i?this.skin:i,void 0===n?this.matrix:n,void 0===r?this.mesh:r,void 0===o?this.rotation:o,void 0===s?this.scale:s,void 0===a?this.translation:a,void 0===l?this.weights:l,void 0===u?this.name:u)},lw.prototype.toString=function(){return"GltfNode(camera="+e.toString(this.camera)+", children="+e.toString(this.children)+", skin="+e.toString(this.skin)+", matrix="+e.toString(this.matrix)+", mesh="+e.toString(this.mesh)+", rotation="+e.toString(this.rotation)+", scale="+e.toString(this.scale)+", translation="+e.toString(this.translation)+", weights="+e.toString(this.weights)+", name="+e.toString(this.name)+")"},lw.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.camera)|0)+e.hashCode(this.children)|0)+e.hashCode(this.skin)|0)+e.hashCode(this.matrix)|0)+e.hashCode(this.mesh)|0)+e.hashCode(this.rotation)|0)+e.hashCode(this.scale)|0)+e.hashCode(this.translation)|0)+e.hashCode(this.weights)|0)+e.hashCode(this.name)|0},lw.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.camera,t.camera)&&e.equals(this.children,t.children)&&e.equals(this.skin,t.skin)&&e.equals(this.matrix,t.matrix)&&e.equals(this.mesh,t.mesh)&&e.equals(this.rotation,t.rotation)&&e.equals(this.scale,t.scale)&&e.equals(this.translation,t.translation)&&e.equals(this.weights,t.weights)&&e.equals(this.name,t.name)},Object.defineProperty(mw.prototype,"nodeRefs",{configurable:!0,get:function(){return null==this.nodeRefs_fy674b$_0?ct("nodeRefs"):this.nodeRefs_fy674b$_0},set:function(t){this.nodeRefs_fy674b$_0=t}}),$w.prototype.serializer=function(){return xw()},$w.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var yw=null;function vw(){return null===yw&&new $w,yw}function gw(){this.descriptor_mfdw2u$_0=new be("de.fabmax.kool.util.gltf.GltfScene",this,2),this.descriptor.addElement_ivxn3r$("nodes",!1),this.descriptor.addElement_ivxn3r$("name",!0),bw=this}Object.defineProperty(gw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_mfdw2u$_0}}),gw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,new Se(we.IntSerializer),e.nodes),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},gw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r=0,o=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=o.decodeSerializableElement_12e8id$(this.descriptor,0,new Se(we.IntSerializer),i),r|=1;break;case 1:n=o.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,we.StringSerializer,n),r|=2;break;case-1:break t;default:throw new xe(e)}return o.endStructure_24f42q$(this.descriptor),ww(r,i,n,null)},gw.prototype.childSerializers=function(){return[new Se(we.IntSerializer),new ve(we.StringSerializer)]},gw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var bw=null;function xw(){return null===bw&&new gw,bw}function ww(t,e,i,n){var r=n||Object.create(mw.prototype);if(0==(1&t))throw new ke("nodes");return r.nodes=e,r.name=0==(2&t)?null:i,r}function zw(t,e,i,n){Cw(),void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=null),this.inverseBindMatrices=t,this.skeleton=e,this.joints=i,this.name=n,this.inverseBindMatrixAccessorRef=null,this.jointRefs_tdme4q$_0=this.jointRefs_tdme4q$_0}function kw(){Sw=this}mw.$metadata$={kind:$,simpleName:"GltfScene",interfaces:[]},mw.prototype.component1=function(){return this.nodes},mw.prototype.component2=function(){return this.name},mw.prototype.copy_jfrl1g$=function(t,e){return new mw(void 0===t?this.nodes:t,void 0===e?this.name:e)},mw.prototype.toString=function(){return"GltfScene(nodes="+e.toString(this.nodes)+", name="+e.toString(this.name)+")"},mw.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.nodes)|0)+e.hashCode(this.name)|0},mw.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.nodes,t.nodes)&&e.equals(this.name,t.name)},Object.defineProperty(zw.prototype,"jointRefs",{configurable:!0,get:function(){return null==this.jointRefs_tdme4q$_0?ct("jointRefs"):this.jointRefs_tdme4q$_0},set:function(t){this.jointRefs_tdme4q$_0=t}}),kw.prototype.serializer=function(){return Tw()},kw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Sw=null;function Cw(){return null===Sw&&new kw,Sw}function Nw(){this.descriptor_73xgz7$_0=new be("de.fabmax.kool.util.gltf.GltfSkin",this,4),this.descriptor.addElement_ivxn3r$("inverseBindMatrices",!0),this.descriptor.addElement_ivxn3r$("skeleton",!0),this.descriptor.addElement_ivxn3r$("joints",!1),this.descriptor.addElement_ivxn3r$("name",!0),Ew=this}Object.defineProperty(Nw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_73xgz7$_0}}),Nw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.inverseBindMatrices,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.inverseBindMatrices),Lt(e.skeleton,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.skeleton),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,new Se(we.IntSerializer),e.joints),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,3,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Nw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeIntElement_szpzho$(this.descriptor,0),s|=1;break;case 1:n=a.decodeIntElement_szpzho$(this.descriptor,1),s|=2;break;case 2:r=a.decodeSerializableElement_12e8id$(this.descriptor,2,new Se(we.IntSerializer),r),s|=4;break;case 3:o=a.decodeNullableSerializableElement_8viuyw$(this.descriptor,3,we.StringSerializer,o),s|=8;break;case-1:break t;default:throw new xe(e)}return a.endStructure_24f42q$(this.descriptor),Pw(s,i,n,r,o,null)},Nw.prototype.childSerializers=function(){return[we.IntSerializer,we.IntSerializer,new Se(we.IntSerializer),new ve(we.StringSerializer)]},Nw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Ew=null;function Tw(){return null===Ew&&new Nw,Ew}function Pw(t,e,i,n,r,o){var s=o||Object.create(zw.prototype);if(s.inverseBindMatrices=0==(1&t)?-1:e,s.skeleton=0==(2&t)?-1:i,0==(4&t))throw new ke("joints");return s.joints=n,s.name=0==(8&t)?null:r,s.inverseBindMatrixAccessorRef=null,s}function Ow(t,e,i){Iw(),void 0===t&&(t=-1),void 0===e&&(e=0),void 0===i&&(i=null),this.sampler=t,this.source=e,this.name=i,this.imageRef_gjfsvw$_0=this.imageRef_gjfsvw$_0,this.createdTex_0=null}function Mw(t,e,i,n,r,o){l.call(this,o),this.$controller=r,this.exceptionState_0=1,this.local$closure$uri=t,this.local$this$GltfTexture=e,this.local$assetMgr=n}function jw(){Aw=this}zw.$metadata$={kind:$,simpleName:"GltfSkin",interfaces:[]},zw.prototype.component1=function(){return this.inverseBindMatrices},zw.prototype.component2=function(){return this.skeleton},zw.prototype.component3=function(){return this.joints},zw.prototype.component4=function(){return this.name},zw.prototype.copy_1a8yv8$=function(t,e,i,n){return new zw(void 0===t?this.inverseBindMatrices:t,void 0===e?this.skeleton:e,void 0===i?this.joints:i,void 0===n?this.name:n)},zw.prototype.toString=function(){return"GltfSkin(inverseBindMatrices="+e.toString(this.inverseBindMatrices)+", skeleton="+e.toString(this.skeleton)+", joints="+e.toString(this.joints)+", name="+e.toString(this.name)+")"},zw.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.inverseBindMatrices)|0)+e.hashCode(this.skeleton)|0)+e.hashCode(this.joints)|0)+e.hashCode(this.name)|0},zw.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.inverseBindMatrices,t.inverseBindMatrices)&&e.equals(this.skeleton,t.skeleton)&&e.equals(this.joints,t.joints)&&e.equals(this.name,t.name)},Object.defineProperty(Ow.prototype,"imageRef",{configurable:!0,get:function(){return null==this.imageRef_gjfsvw$_0?ct("imageRef"):this.imageRef_gjfsvw$_0},set:function(t){this.imageRef_gjfsvw$_0=t}}),Mw.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Mw.prototype=Object.create(l.prototype),Mw.prototype.constructor=Mw,Mw.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(null!=this.local$closure$uri){if(this.state_0=3,this.result_0=this.local$assetMgr.loadTextureData_9n4zzi$(this.local$closure$uri,void 0,this),this.result_0===a)return a;continue}if(this.state_0=2,this.result_0=this.local$assetMgr.createTextureData_asds6l$(x(this.local$this$GltfTexture.imageRef.bufferViewRef).getData(),x(this.local$this$GltfTexture.imageRef.mimeType),this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:case 3:return this.result_0;case 4:return;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Ow.prototype.makeTexture=function(){var t,e;if(null==this.createdTex_0){var i=this.imageRef.uri,n=null==i||u(i,"data:",!0)?"gltf_tex_"+this.source:i;this.createdTex_0=new Eh(new Hh,n,(t=i,e=this,function(i,n,r,o){var s=new Mw(t,e,i,n,this,r);return o?s:s.doResume(null)}))}return x(this.createdTex_0)},jw.prototype.serializer=function(){return Dw()},jw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Aw=null;function Iw(){return null===Aw&&new jw,Aw}function Rw(){this.descriptor_grd8gb$_0=new be("de.fabmax.kool.util.gltf.GltfTexture",this,3),this.descriptor.addElement_ivxn3r$("sampler",!0),this.descriptor.addElement_ivxn3r$("source",!0),this.descriptor.addElement_ivxn3r$("name",!0),Lw=this}Object.defineProperty(Rw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_grd8gb$_0}}),Rw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);Lt(e.sampler,-1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||i.encodeIntElement_ptg7oe$(this.descriptor,0,e.sampler),Lt(e.source,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeIntElement_ptg7oe$(this.descriptor,1,e.source),Lt(e.name,null)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,we.StringSerializer,e.name),i.endStructure_24f42q$(this.descriptor)},Rw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o=0,s=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=s.decodeIntElement_szpzho$(this.descriptor,0),o|=1;break;case 1:n=s.decodeIntElement_szpzho$(this.descriptor,1),o|=2;break;case 2:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,we.StringSerializer,r),o|=4;break;case-1:break t;default:throw new xe(e)}return s.endStructure_24f42q$(this.descriptor),qw(o,i,n,r,null)},Rw.prototype.childSerializers=function(){return[we.IntSerializer,we.IntSerializer,new ve(we.StringSerializer)]},Rw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Lw=null;function Dw(){return null===Lw&&new Rw,Lw}function qw(t,e,i,n,r){var o=r||Object.create(Ow.prototype);return o.sampler=0==(1&t)?-1:e,o.source=0==(2&t)?0:i,o.name=0==(4&t)?null:n,o.createdTex_0=null,o}function Fw(t,e,i,n){Vw(),void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=1),this.index=t,this.strength=e,this.texCoord=i,this.scale=n}function Bw(){Uw=this}Ow.$metadata$={kind:$,simpleName:"GltfTexture",interfaces:[]},Ow.prototype.component1=function(){return this.sampler},Ow.prototype.component2=function(){return this.source},Ow.prototype.component3=function(){return this.name},Ow.prototype.copy_273qip$=function(t,e,i){return new Ow(void 0===t?this.sampler:t,void 0===e?this.source:e,void 0===i?this.name:i)},Ow.prototype.toString=function(){return"GltfTexture(sampler="+e.toString(this.sampler)+", source="+e.toString(this.source)+", name="+e.toString(this.name)+")"},Ow.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*t+e.hashCode(this.sampler)|0)+e.hashCode(this.source)|0)+e.hashCode(this.name)|0},Ow.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.sampler,t.sampler)&&e.equals(this.source,t.source)&&e.equals(this.name,t.name)},Fw.prototype.getTexture_vd9sc9$=function(t){return t.textures.get_za3lpa$(this.index).makeTexture()},Bw.prototype.serializer=function(){return Ww()},Bw.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Uw=null;function Vw(){return null===Uw&&new Bw,Uw}function Gw(){this.descriptor_yo1hoj$_0=new be("de.fabmax.kool.util.gltf.GltfTextureInfo",this,4),this.descriptor.addElement_ivxn3r$("index",!1),this.descriptor.addElement_ivxn3r$("strength",!0),this.descriptor.addElement_ivxn3r$("texCoord",!0),this.descriptor.addElement_ivxn3r$("scale",!0),Hw=this}Object.defineProperty(Gw.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yo1hoj$_0}}),Gw.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeIntElement_ptg7oe$(this.descriptor,0,e.index),Lt(e.strength,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||i.encodeFloatElement_lf6hpt$(this.descriptor,1,e.strength),Lt(e.texCoord,0)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,2)||i.encodeIntElement_ptg7oe$(this.descriptor,2,e.texCoord),Lt(e.scale,1)&&!i.shouldEncodeElementDefault_szpzho$(this.descriptor,3)||i.encodeFloatElement_lf6hpt$(this.descriptor,3,e.scale),i.endStructure_24f42q$(this.descriptor)},Gw.prototype.deserialize_bq71mq$=function(t){var e,i,n,r,o,s=0,a=t.beginStructure_24f42q$(this.descriptor);t:for(;;)switch(e=a.decodeElementIndex_24f42q$(this.descriptor)){case 0:i=a.decodeIntElement_szpzho$(this.descriptor,0),s|=1;break;case 1:n=a.decodeFloatElement_szpzho$(this.descriptor,1),s|=2;break;case 2:r=a.decodeIntElement_szpzho$(this.descriptor,2),s|=4;break;case 3:o=a.decodeFloatElement_szpzho$(this.descriptor,3),s|=8;break;case-1:break t;default:throw new xe(e)}return a.endStructure_24f42q$(this.descriptor),Xw(s,i,n,r,o,null)},Gw.prototype.childSerializers=function(){return[we.IntSerializer,we.FloatSerializer,we.IntSerializer,we.FloatSerializer]},Gw.$metadata$={kind:y,simpleName:"$serializer",interfaces:[ze]};var Hw=null;function Ww(){return null===Hw&&new Gw,Hw}function Xw(t,e,i,n,r,o){var s=o||Object.create(Fw.prototype);if(0==(1&t))throw new ke("index");return s.index=e,s.strength=0==(2&t)?1:i,s.texCoord=0==(4&t)?0:n,s.scale=0==(8&t)?1:r,s}function Kw(t){var i,n=new lf,r=new pa;r.name="BrdfLutPass",r.setSize_vux9f0$(512,512),r.addColorTexture_farcsl$(_h()),r.clearDepthTexture(),$a.call(this,n,new ua(r)),this.isAutoRemove=!0,this.clearColor=null;var o=new Qd;o.projCorrectionMode=Jd(),o.isKeepAspectRatio=!1,o.left=0,o.right=1,o.top=1,o.bottom=0,this.camera=o;var a=e.isType(i=this.drawNode,lf)?i:c(),l=new vf(new Dz(At([ds().POSITIONS,ds().TEXTURE_COORDS])),null);l.generate_v2sixm$(Zw);var u=new tp("BRDF LUT"),p={v:null},h=new ip(u);p.v=h.stageInterfaceNode_iikjwn$("ifTexCoords",h.attrTexCoords().output),h.positionOutput=h.simpleVertexPositionNode().outVec4;var d=new np(u),f=d.addNode_u9w9by$(new Yw(d.stage));f.inTexCoords=p.v.output;var _=f;d.colorOutput_a3v4si$(_.outColor);var m,$,y=u;l.shader=new zc(y),a.unaryPlus_uv0sim$(l),this.onAfterDraw.add_11rb$((m=this,$=t,function(t){var i=m,n=DE.Log,r=$k.DEBUG,o=e.getKClassFromExpression(i).simpleName;return r.level>=n.level.level&&n.printer(r,o,"Generated BRDF look-up table"),m.isAutoRemove?($.removeOffscreenPass_m1c2kf$(m),t.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(t,m))):m.isEnabled=!1,s}))}function Yw(t){rp.call(this,"brdfLut",t),this.inTexCoords=new op(new Ou(ar().ZERO)),this.outColor=new op(new zu("brdfLut_outColor"),this)}function Zw(t){var e=new Ik;return e.size.set_dleff0$(1,1),e.mirrorTexCoordsY(),t.rect_e5k3t5$(e),s}function Jw(){ez=this}function Qw(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$bgColor=t}function tz(t,e,i,n,r,o){l.call(this,o),this.exceptionState_0=1,this.$this=t,this.local$scene=e,this.local$hdriPath=i,this.local$assetManager=n,this.local$autoDispose=r}Fw.$metadata$={kind:$,simpleName:"GltfTextureInfo",interfaces:[]},Fw.prototype.component1=function(){return this.index},Fw.prototype.component2=function(){return this.strength},Fw.prototype.component3=function(){return this.texCoord},Fw.prototype.component4=function(){return this.scale},Fw.prototype.copy_scorqy$=function(t,e,i,n){return new Fw(void 0===t?this.index:t,void 0===e?this.strength:e,void 0===i?this.texCoord:i,void 0===n?this.scale:n)},Fw.prototype.toString=function(){return"GltfTextureInfo(index="+e.toString(this.index)+", strength="+e.toString(this.strength)+", texCoord="+e.toString(this.texCoord)+", scale="+e.toString(this.scale)+")"},Fw.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.index)|0)+e.hashCode(this.strength)|0)+e.hashCode(this.texCoord)|0)+e.hashCode(this.scale)|0},Fw.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.index,t.index)&&e.equals(this.strength,t.strength)&&e.equals(this.texCoord,t.texCoord)&&e.equals(this.scale,t.scale)},Kw.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},Yw.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inTexCoords)},Yw.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("brdfLut","\n                float RadicalInverse_VdC(uint bits) {\n                    bits = (bits << 16u) | (bits >> 16u);\n                    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n                }\n                \n                vec2 Hammersley(uint i, uint N) {\n                    return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n                }\n                \n                vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) {\n                    float a = roughness*roughness;\n                    \n                    float phi = 2.0 * 3.141592653589793 * Xi.x;\n                    float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\n                    float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n                    \n                    // from spherical coordinates to cartesian coordinates\n                    vec3 H;\n                    H.x = cos(phi) * sinTheta;\n                    H.y = sin(phi) * sinTheta;\n                    H.z = cosTheta;\n                    \n                    // from tangent-space vector to world-space sample vector\n                    vec3 up = abs(N.z) < 0.9999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n                    vec3 tangent = normalize(cross(up, N));\n                    vec3 bitangent = cross(N, tangent);\n                    \n                    vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                    return normalize(sampleVec);\n                }\n                \n                float GeometrySchlickGGX(float NdotV, float roughness) {\n                    float a = roughness;\n                    float k = (a * a) / 2.0;\n                \n                    float nom   = NdotV;\n                    float denom = NdotV * (1.0 - k) + k;\n                \n                    return nom / denom;\n                }\n                \n                float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) {\n                    float NdotV = max(dot(N, V), 0.0);\n                    float NdotL = max(dot(N, L), 0.0);\n                    float ggx2 = GeometrySchlickGGX(NdotV, roughness);\n                    float ggx1 = GeometrySchlickGGX(NdotL, roughness);\n                \n                    return ggx1 * ggx2;\n                }\n                \n                vec2 IntegrateBRDF(float NdotV, float roughness) {\n                    vec3 V;\n                    V.x = sqrt(1.0 - NdotV*NdotV);\n                    V.y = 0.0;\n                    V.z = NdotV;\n                \n                    float A = 0.0;\n                    float B = 0.0;\n                \n                    vec3 N = vec3(0.0, 0.0, 1.0);\n                \n                    const uint SAMPLE_COUNT = 1024u;\n                    for(uint i = 0u; i < SAMPLE_COUNT; ++i) {\n                        vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                        vec3 H  = ImportanceSampleGGX(Xi, N, roughness);\n                        vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n                \n                        float NdotL = max(L.z, 0.0);\n                        float NdotH = max(H.z, 0.0);\n                        float VdotH = max(dot(V, H), 0.0);\n                \n                        if(NdotL > 0.0) {\n                            float G = GeometrySmith(N, V, L, roughness);\n                            float G_Vis = (G * VdotH) / (NdotH * NdotV);\n                            float Fc = pow(1.0 - VdotH, 5.0);\n                \n                            A += (1.0 - Fc) * G_Vis;\n                            B += Fc * G_Vis;\n                        }\n                    }\n                    A /= float(SAMPLE_COUNT);\n                    B /= float(SAMPLE_COUNT);\n                    return vec2(A, B);\n                }\n            "),t.appendMain_61zpoe$("\n                vec2 integratedBRDF = IntegrateBRDF("+this.inTexCoords.ref2f_61zpoe$()+".x, "+this.inTexCoords.ref2f_61zpoe$()+".y);\n                "+this.outColor.declare()+" = vec4(integratedBRDF, 0.0, 1.0);\n            ")},Yw.$metadata$={kind:$,simpleName:"BrdfLutNode",interfaces:[rp]},Kw.$metadata$={kind:$,simpleName:"BrdfLutPass",interfaces:[$a]},Qw.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},Qw.prototype=Object.create(l.prototype),Qw.prototype.constructor=Qw,Qw.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return new $d(this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor,this.local$closure$bgColor);case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Jw.prototype.singleColorEnvironment_6zt5da$=function(t,e,i){void 0===i&&(i=!0);var n,r=_d().singleColor_d7aj7k$(e.toLinear()),o=new Mh(new Hh(void 0,Qh(),Qh(),Qh(),Kh(),Kh(),!1,1),"singleColorEnv-"+e,(n=r,function(t,e,i,r){var o=new Qw(n,t,e,this,i);return r?o:o.doResume(null)})),a=new Kw(t),l=new Eh(a.config.colorAttachments.get_za3lpa$(0).getTextureProps_6taknv$(!1),"singleColorEnv-brdf");a.copyTargetsColor.add_11rb$(l);var u,p=new iz(o,o,l);return i&&t.onDispose.add_11rb$((u=p,function(t,e){return u.dispose(),s})),t.addOffscreenPass_m1c2kf$(a),p},Jw.prototype.gradientColorEnvironment_hfkvyz$=function(t,e,i,n){void 0===n&&(n=!0);var r=new nz(t,e,i),o=fz().irradianceMapFromCube_cv6i6k$(t,x(r.colorTexture)),a=xz().reflectionMapFromCube_cv6i6k$(t,x(r.colorTexture)),l=new Kw(t);o.dependsOn_yqp8fe$(r),a.dependsOn_yqp8fe$(r);var u,p=new iz(o.copyColor(),a.copyColor(),l.copyColor());return n&&t.onDispose.add_11rb$((u=p,function(t,e){return u.dispose(),s})),t.addOffscreenPass_m1c2kf$(r),t.addOffscreenPass_m1c2kf$(o),t.addOffscreenPass_m1c2kf$(a),t.addOffscreenPass_m1c2kf$(l),p},tz.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},tz.prototype=Object.create(l.prototype),tz.prototype.constructor=tz,tz.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:void 0===this.local$autoDispose&&(this.local$autoDispose=!0);var t=new Hh(void 0,void 0,void 0,void 0,Kh(),Kh(),!1,1);if(this.state_0=2,this.result_0=this.local$assetManager.loadAndPrepareTexture_va0f2y$(this.local$hdriPath,t,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var e=this.result_0;return this.$this.hdriEnvironment_6k7uq0$(this.local$scene,e,this.local$autoDispose);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},Jw.prototype.hdriEnvironment_cj1d96$=function(t,e,i,n,r,o){var s=new tz(this,t,e,i,n,r);return o?s:s.doResume(null)},Jw.prototype.hdriEnvironment_6k7uq0$=function(t,e,i){void 0===i&&(i=!0);var n=new Sz(t,e),r=fz().irradianceMapFromHdri_8b80en$(t,x(n.colorTexture)),o=xz().reflectionMapFromHdri_8b80en$(t,x(n.colorTexture)),a=new Kw(t);r.dependsOn_yqp8fe$(n),o.dependsOn_yqp8fe$(n);var l,u=new iz(r.copyColor(),o.copyColor(),a.copyColor());return i&&t.onDispose.add_11rb$((l=u,function(t,e){return l.dispose(),s})),t.addOffscreenPass_m1c2kf$(n),t.addOffscreenPass_m1c2kf$(r),t.addOffscreenPass_m1c2kf$(o),t.addOffscreenPass_m1c2kf$(a),u},Jw.$metadata$={kind:y,simpleName:"EnvironmentHelper",interfaces:[]};var ez=null;function iz(t,e,i){this.irradianceMap=t,this.reflectionMap=e,this.brdfLut=i}function nz(t,i,n,r){void 0===r&&(r=128);var o,a,l=new lf,u=new pa,p=r;u.name="GradientEnvGenerator",u.setSize_vux9f0$(p,p),u.addColorTexture_farcsl$($h()),u.clearDepthTexture(),ya.call(this,l,new ua(u)),this.gradientTex_0=this.makeGradientTex_0(i,2*r|0,n),(e.isType(o=this.drawNode,lf)?o:c()).unaryPlus_uv0sim$(yf(void 0,void 0,(a=this,function(t){return t.generate_v2sixm$(oz),t.shader=new Cc(a.gradientTex_0,"gradTex",a.gradientEnvModel_0()),x(t.shader).onPipelineSetup.add_11rb$(sz),s}))),this.onAfterDraw.add_11rb$(function(t,i,n){return function(r){var o=t,a=DE.Log,l=$k.DEBUG,u=e.getKClassFromExpression(o).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Generated gradient cube map"),i.removeOffscreenPass_m1c2kf$(t),n.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(n,t)),s}}(this,t,n))}function rz(t){rp.call(this,"posToUv",t),this.inPos=new op(new Mu(Er().Y_AXIS)),this.outUv=new op(new xu("outUv"),this)}function oz(t){var e=new Rk;return e.centered(),t.cube_lhbb6w$(e),s}function sz(t,e,i){return t.depthTest=yl(),t.cullMethod=Ol(),s}function az(t,e){rp.call(this,"envCubeSampler",e),this.texture=t,this.maxLightIntensity=new op(new Pu(5e3))}function lz(t,e){rp.call(this,"envEquiRectSampler",e),this.texture=t}function uz(t){rp.call(this,"rgbeDecoder",t),this.inRgbe=new op(new ju(Qr().ZERO)),this.maxLightIntensity=new op(new Pu(20)),this.outColor=new op(new wu("decodedRgbe"),this)}function pz(t,i,n,r){fz();var o,a=new lf,l=new pa;l.name="IrradianceMapPass",l.setSize_vux9f0$(r,r),l.addColorTexture_farcsl$($h()),l.clearDepthTexture(),ya.call(this,a,new ua(l)),this.isAutoRemove=!0,this.clearColor=null;var u=e.isType(o=this.drawNode,lf)?o:c(),p=new vf(new Dz(Ft(ds().POSITIONS)),null);p.generate_v2sixm$(_z);var h=new tp("IrradianceMapPass"),d={v:null},f=new ip(h);d.v=f.stageInterfaceNode_iikjwn$("ifLocalPos",f.attrPositions().output),f.positionOutput=f.simpleVertexPositionNode().outVec4;var _=new np(h);null!=i?_.addNode_u9w9by$(new lz(_.texture2dNode_61zpoe$("colorTex"),_.stage)):_.addNode_u9w9by$(new az(_.textureCubeNode_61zpoe$("colorTex"),_.stage));var m=_.addNode_u9w9by$(new cz(_.stage));m.inLocalPos=d.v.output;var $=m;_.colorOutput_a3v4si$($.outColor);var y,v,g,b,x=h;if(null!=i){var w=new Cc(i,"colorTex",x);w.onPipelineSetup.add_11rb$(mz),p.shader=w}else{var z=new Nc(n,"colorTex",x);z.onPipelineSetup.add_11rb$($z),p.shader=z}u.unaryPlus_uv0sim$(p),this.onAfterDraw.add_11rb$((y=i,v=this,g=n,b=t,function(t){if(null!=y){var i=v,n=DE.Log,r=$k.DEBUG,o=e.getKClassFromExpression(i).simpleName;r.level>=n.level.level&&n.printer(r,o,"Generated irradiance map from HDRI: "+Ct(y.name))}else{var a=v,l=DE.Log,u=$k.DEBUG,p=e.getKClassFromExpression(a).simpleName;if(u.level>=l.level.level){var c=l.printer,h=g;c.call(l,u,p,"Generated irradiance map from cube map: "+Ct(null!=h?h.name:null))}}return v.isAutoRemove?(b.removeOffscreenPass_m1c2kf$(v),t.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(t,v))):v.isEnabled=!1,s}))}function cz(t){rp.call(this,"convIrradiance",t),this.inLocalPos=new op(new Mu(Er().X_AXIS)),this.outColor=new op(new zu("convIrradiance_outColor"),this)}function hz(){dz=this}iz.prototype.dispose=function(){this.irradianceMap.dispose(),this.reflectionMap.dispose(),this.brdfLut.dispose()},iz.$metadata$={kind:$,simpleName:"EnvironmentMaps",interfaces:[]},nz.prototype.makeGradientTex_0=function(t,e,i){for(var n=xE(4*e|0),r=jy(),o=0;o<e;o++)t.getColorInterpolated_vsomir$(1-o/e,r),n.set_6t1wet$(0+(4*o|0)|0,qt(B(255*r.r))),n.set_6t1wet$(1+(4*o|0)|0,qt(B(255*r.g))),n.set_6t1wet$(2+(4*o|0)|0,qt(B(255*r.b))),n.set_6t1wet$(3+(4*o|0)|0,qt(255));var s=new ad(n,e,1,dh()),a=new Hh(void 0,Qh(),Qh(),void 0,void 0,void 0,!1,1);return i.assetMgr.loadAndPrepareTexture_siesr9$(s,a,"gradientEnvTex")},nz.prototype.gradientEnvModel_0=function(){var t=new tp("gradientEnvModel()"),e={v:null},i=new ip(t),n=i.mvpNode(),r=i.attrPositions().output,o=i.vec3TransformNode_vid4wo$(r,n.outModelMat,1).outVec3;e.v=i.stageInterfaceNode_iikjwn$("ifFragPos",o),i.positionOutput=i.vec4TransformNode_9krp9t$(r,n.outMvpMat).outVec4;var s=new np(t),a=s.addNode_u9w9by$(new rz(s.stage));a.inPos=e.v.output;var l=s.texture2dSamplerNode_fzevit$(s.texture2dNode_61zpoe$("gradTex"),a.outUv),u=s.gammaNode_ze33is$(l.outColor).outColor;return s.colorOutput_a3v4si$(u),t},rz.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inPos)},rz.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$(this.outUv.declare()+" = vec2(acos(normalize("+this.inPos.ref3f_61zpoe$()+").y) / "+U.PI+", 0.0);")},rz.$metadata$={kind:$,simpleName:"PosToUvNode",interfaces:[rp]},nz.$metadata$={kind:$,simpleName:"GradientCubeGenerator",interfaces:[ya]},az.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture)},az.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("sampleEnv","\n                vec3 sampleEnv(vec3 texCoord, float mipLevel) {\n                    vec3 envColor = "+t.sampleTextureCube_buzeal$(this.texture.name,"texCoord","mipLevel")+".rgb;\n                    return min(envColor, vec3("+this.maxLightIntensity.ref1f_61zpoe$()+"));\n                }\n            ")},az.$metadata$={kind:$,simpleName:"EnvCubeSamplerNode",interfaces:[rp]},lz.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_lhtstx$(this.texture)},lz.prototype.generateCode_626509$=function(t){t.appendFunction_puj7f4$("sampleEnv","\n                vec3 sampleEnv(vec3 texCoord, float mipLevel) {\n                    vec3 equiRect_in = normalize(texCoord);\n                    vec2 uv = vec2(atan(equiRect_in.z, equiRect_in.x), -asin(equiRect_in.y));\n                    uv *= vec2(0.1591, 0.3183);\n                    uv += 0.5;\n                    return "+t.sampleTexture2d_buzeal$(this.texture.name,"uv","mipLevel")+".rgb;\n                }\n            ")},lz.$metadata$={kind:$,simpleName:"EnvEquiRectSamplerNode",interfaces:[rp]},uz.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_8ak6wm$([this.inRgbe,this.maxLightIntensity])},uz.prototype.generateCode_626509$=function(t){t.appendMain_61zpoe$("\n                vec3 fRgb = "+this.inRgbe.ref3f_61zpoe$()+";\n                float fExp = "+this.inRgbe.ref4f_61zpoe$()+".a * 255.0 - 128.0;\n                "+this.outColor.declare()+" = min(fRgb * pow(2.0, fExp), vec3("+this.maxLightIntensity.ref1f_61zpoe$()+"));\n            ")},uz.$metadata$={kind:$,simpleName:"RgbeDecoderNode",interfaces:[rp]},pz.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ya.prototype.dispose_aemszp$.call(this,t)},cz.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inLocalPos)},cz.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t);var e=2*U.PI,i=.5*U.PI;t.appendMain_61zpoe$("\n                vec3 normal = normalize("+this.inLocalPos.ref3f_61zpoe$()+");\n                vec3 up = vec3(0.0, 1.0, 0.0);\n                vec3 right = normalize(cross(up, normal));\n                up = cross(normal, right);\n\n                float sampleDelta = 0.03737;\n                vec3 irradiance = vec3(0.0);\n                int nrSamples = 0; \n\n                for (float theta = 0.0; theta < "+i+"; theta += sampleDelta) {\n                    float deltaPhi = sampleDelta / sin(theta);\n                    for (float phi = 0.0; phi < "+e+"; phi += deltaPhi) {\n                        vec3 tempVec = cos(phi) * right + sin(phi) * up;\n                        vec3 sampleVector = cos(theta) * normal + sin(theta) * tempVec;\n                        vec3 envColor = sampleEnv(sampleVector, 3.0);\n                        irradiance += envColor * cos(theta) * 0.6;\n                        nrSamples++;\n                    }\n                }\n                irradiance = irradiance * "+U.PI+" / float(nrSamples);\n                "+this.outColor.declare()+" = vec4(irradiance, 1.0);\n            ")},cz.$metadata$={kind:$,simpleName:"ConvoluteIrradianceNode",interfaces:[rp]},hz.prototype.irradianceMapFromHdri_8b80en$=function(t,e,i){return void 0===i&&(i=16),new pz(t,e,null,i)},hz.prototype.irradianceMapFromCube_cv6i6k$=function(t,e,i){return void 0===i&&(i=16),new pz(t,null,e,i)},hz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var dz=null;function fz(){return null===dz&&new hz,dz}function _z(t){var e=new Rk;return e.centered(),t.cube_lhbb6w$(e),s}function mz(t,e,i){return t.cullMethod=Pl(),s}function $z(t,e,i){return t.cullMethod=Pl(),s}function yz(t,i,n,r){xz();var o,a,l=new lf,u=new pa;u.name="ReflectionMapPass",u.setSize_vux9f0$(r,r),u.mipLevels=7,u.addColorTexture_farcsl$($h()),u.clearDepthTexture(),ya.call(this,l,new ua(u)),this.parentScene=t,this.uRoughness_0=gd(.5,"uRoughness"),this.isAutoRemove=!0,this.isEnabled=!0,this.onSetupMipLevel=(a=this,function(t,e){return a.uRoughness_0.value=t/(a.config.mipLevels-1|0),s});var p=e.isType(o=this.drawNode,lf)?o:c(),h=new vf(new Dz(Ft(ds().POSITIONS)),"reflectionMap");h.generate_v2sixm$(wz);var d=new tp("Reflectance Convolution Sampler"),f={v:null},_=new ip(d);f.v=_.stageInterfaceNode_iikjwn$("ifLocalPos",_.attrPositions().output),_.positionOutput=_.simpleVertexPositionNode().outVec4;var m=new np(d);null!=i?m.addNode_u9w9by$(new lz(m.texture2dNode_61zpoe$("colorTex"),m.stage)):m.addNode_u9w9by$(new az(m.textureCubeNode_61zpoe$("colorTex"),m.stage));var $=m.addNode_u9w9by$(new vz(m.stage));$.inLocalPos=f.v.output,$.inRoughness=m.pushConstantNode1f_978i2u$(this.uRoughness_0).output;var y=$;m.colorOutput_a3v4si$(y.outColor);var v=d;if(null!=i){var g=new Cc(i,"colorTex",v);g.onPipelineSetup.add_11rb$(zz),h.shader=g}else{var b=new Nc(n,"colorTex",v);b.onPipelineSetup.add_11rb$(kz),h.shader=b}p.unaryPlus_uv0sim$(h),this.onAfterDraw.add_11rb$(function(t,i,n){return function(r){if(null!=t){var o=i,a=DE.Log,l=$k.DEBUG,u=e.getKClassFromExpression(o).simpleName;l.level>=a.level.level&&a.printer(l,u,"Generated reflection map from HDRI: "+Ct(t.name))}else{var p=i,c=DE.Log,h=$k.DEBUG,d=e.getKClassFromExpression(p).simpleName;if(h.level>=c.level.level){var f=c.printer,_=n;f.call(c,h,d,"Generated reflection map from cube map: "+Ct(null!=_?_.name:null))}}return i.isAutoRemove?(i.parentScene.removeOffscreenPass_m1c2kf$(i),r.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(r,i))):i.isEnabled=!1,s}}(i,this,n))}function vz(t){rp.call(this,"convIrradiance",t),this.inLocalPos=new op(new Mu(Er().X_AXIS)),this.inRoughness=new op(new Pu(0)),this.maxLightIntensity=new op(new Pu(5e3)),this.outColor=new op(new zu("convReflection_outColor"),this)}function gz(){bz=this}pz.$metadata$={kind:$,simpleName:"IrradianceMapPass",interfaces:[ya]},yz.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),ya.prototype.dispose_aemszp$.call(this,t)},vz.prototype.setup_llmhyc$=function(t){rp.prototype.setup_llmhyc$.call(this,t),this.dependsOn_7qvs0d$(this.inLocalPos),this.dependsOn_7qvs0d$(this.maxLightIntensity)},vz.prototype.generateCode_626509$=function(t){rp.prototype.generateCode_626509$.call(this,t),t.appendFunction_puj7f4$("reflMapFuncs","\n                float RadicalInverse_VdC(uint bits) {\n                    bits = (bits << 16u) | (bits >> 16u);\n                    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n                }\n                \n                vec2 Hammersley(uint i, uint N) {\n                    return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n                }\n                \n                vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) {\n                    float a = roughness*roughness;\n                    \n                    float phi = 2.0 * 3.141592653589793 * Xi.x;\n                    float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\n                    float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n                    \n                    // from spherical coordinates to cartesian coordinates\n                    vec3 H;\n                    H.x = cos(phi) * sinTheta;\n                    H.y = sin(phi) * sinTheta;\n                    H.z = cosTheta;\n                    \n                    // from tangent-space vector to world-space sample vector\n                    vec3 up = abs(N.z) < 0.9999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n                    vec3 tangent = normalize(cross(up, N));\n                    vec3 bitangent = cross(N, tangent);\n                    \n                    vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                    return normalize(sampleVec);\n                }\n            "),t.appendMain_61zpoe$("\n                vec3 N = normalize("+this.inLocalPos.ref3f_61zpoe$()+");\n                vec3 R = N;\n                vec3 V = R;\n                \n                float mipLevel = "+this.inRoughness.ref1f_61zpoe$()+" * 16.0;\n                uint SAMPLE_COUNT = uint(1024.0 * (1.0 + mipLevel));\n                float totalWeight = 0.0;\n                vec3 prefilteredColor = vec3(0.0);\n                for(uint i = 0u; i < SAMPLE_COUNT; ++i) {\n                    vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                    vec3 H  = ImportanceSampleGGX(Xi, N, "+this.inRoughness.ref1f_61zpoe$()+");\n                    vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n            \n                    float NdotL = max(dot(N, L), 0.0);\n                    if(NdotL > 0.0) {\n                        prefilteredColor += sampleEnv(L, mipLevel) * NdotL;\n                        totalWeight += NdotL;\n                    }\n                }\n                prefilteredColor = prefilteredColor / totalWeight;\n                "+this.outColor.declare()+" = vec4(prefilteredColor, 1.0);\n            ")},vz.$metadata$={kind:$,simpleName:"ConvoluteReflectionNode",interfaces:[rp]},gz.prototype.reflectionMapFromHdri_8b80en$=function(t,e,i){return void 0===i&&(i=256),new yz(t,e,null,i)},gz.prototype.reflectionMapFromCube_cv6i6k$=function(t,e,i){return void 0===i&&(i=256),new yz(t,null,e,i)},gz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var bz=null;function xz(){return null===bz&&new gz,bz}function wz(t){var e=new Rk;return e.centered(),t.cube_lhbb6w$(e),s}function zz(t,e,i){return t.cullMethod=Pl(),s}function kz(t,e,i){return t.cullMethod=Pl(),s}function Sz(t,i){var n,r,o,a,l,u,p=new lf,h=new pa,d=null!=(r=null!=(n=i.loadedTexture)?n.width:null)?r:1024,f=null!=(a=null!=(o=i.loadedTexture)?o.height:null)?a:512,_=A.max(d,f);h.name="RgbeDecoder",h.setSize_vux9f0$(_,_),h.addColorTexture_farcsl$($h()),h.clearDepthTexture(),h.addMipLevels_ydzd23$(void 0,void 0,!1),$a.call(this,p,new ua(h)),(e.isType(l=this.drawNode,lf)?l:c()).unaryPlus_uv0sim$(yf(void 0,void 0,(u=i,function(t){t.isFrustumChecked=!1,t.generate_v2sixm$(Cz);var e=new tp("RgbeDecoder"),i={v:null},n=new ip(e);i.v=n.stageInterfaceNode_iikjwn$("ifTexCoords",n.attrTexCoords().output),n.positionOutput=n.fullScreenQuadPositionNode_r20yfm$(n.attrTexCoords().output).outQuadPos;var r=new np(e),o=r.addNode_u9w9by$(new uz(r.stage));o.inRgbe=r.texture2dSamplerNode_fzevit$(r.texture2dNode_61zpoe$("colorTex"),i.v.output).outColor;var a=o;r.colorOutput_a3v4si$(a.outColor);var l=new Cc(u,"colorTex",e);return l.onPipelineSetup.add_11rb$(Nz),t.shader=l,s}))),this.onAfterDraw.add_11rb$(function(t,i,n){return function(r){var o=i,a=DE.Log,l=$k.DEBUG,u=e.getKClassFromExpression(o).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Converted RGBe to linear: "+Ct(t.name)),n.removeOffscreenPass_m1c2kf$(i),r.runDelayed_hd6vpk$(1,function(t,e){return function(i){return e.dispose_aemszp$(t),s}}(r,i)),s}}(i,this,t))}function Cz(t){var e=new Ik;return t.rect_e5k3t5$(e),s}function Nz(t,e,i){return t.cullMethod=Ol(),s}function Ez(t,i){void 0===i&&(i=256);var n,r=new lf,o=new pa,a=i;o.name="SkyCubePass",o.setSize_vux9f0$(a,a),o.addColorTexture_farcsl$($h()),o.clearDepthTexture(),ya.call(this,r,new ua(o)),this.syncLights=M(),this.azimuth_rc8r83$_0=0,this.elevation_kytf7i$_0=60,this.lightGradient_0=new Ry([_t(-90,Oy().BLACK),_t(-2,Oy().BLACK),_t(0,Oy().MD_ORANGE.mix_y83vuj$(Oy().WHITE,.6).toLinear().scale_mx4ult$(.7)),_t(5,Oy().MD_AMBER.mix_y83vuj$(Oy().WHITE,.6).toLinear()),_t(10,Oy().WHITE),_t(90,Oy().WHITE)]),this.sunLight_0=(new pf).setDirectional_czzhiu$(new Sr(-1,-1,-1)).setColor_y83vuj$(Oy().WHITE,3),this.groundShader=null,this.skyShader_0=new Tz(t);var l=new uf;l.lights.clear();var u=l.lights,p=this.sunLight_0;u.add_11rb$(p),this.lighting=l,this.groundShader=Mc(Az);var h,d=e.isType(n=this.drawNode,lf)?n:c();d.unaryPlus_uv0sim$(yf(void 0,void 0,(h=this,function(t){return t.generate_v2sixm$(Iz),t.shader=h.skyShader_0,s}))),d.unaryPlus_uv0sim$($f(void 0,function(t){return function(e){return e.generate_v2sixm$(Rz),e.shader=t.groundShader,s}}(this))),this.onBeforeCollectDrawCommands.add_11rb$(function(t){return function(e){var i;if(t.updateSunLight_0(),null!=(i=t.skyShader_0.atmoNode)){var n=t;i.uDirToSun.value.set_czzhiu$(n.sunLight_0.direction).scale_mx4ult$(-1),i.uSunColor.value.set_czzhhz$(n.sunLight_0.color),i.uSunColor.value.a=i.uSunColor.value.a/3}return s}}(this)),this.onAfterDraw.add_11rb$(function(t){return function(e){return t.isEnabled=!1,s}}(this))}function Tz(t){var i,n;Mz(),zc.call(this,Mz().model()),this.atmoNode=null,this.onPipelineSetup.add_11rb$(jz),this.onPipelineCreated.add_11rb$((i=t,n=this,function(t,r,o){var a,l,u=n.model;t:do{var p;for(a=sc.ALL,p=u.stages.values.iterator();p.hasNext();){var h=p.next();if(0!=(h.stage.mask&a.mask)){var d,f,_=h.nodes;e:do{var m;for(m=_.iterator();m.hasNext();){var $=m.next();if(Lt($.name,"tOpticalDepthLut")&&e.isType($,Ep)){f=$;break e}}f=null}while(0);var y=null==(d=f)||e.isType(d,Ep)?d:c();if(null!=y){l=y;break t}}}l=null}while(0);x(l).sampler.texture=i;var v,g,b=n,w=n.model;t:do{var z;for(v=sc.ALL,z=w.stages.values.iterator();z.hasNext();){var k=z.next();if(0!=(k.stage.mask&v.mask)){var S,C=k.nodes,N=M();for(S=C.iterator();S.hasNext();){var E=S.next();e.isType(E,dy)&&N.add_11rb$(E)}var T=ue(N);if(null!=T){g=T;break t}}}g=null}while(0);var P=x(g);return P.uPlanetCenter.value.set_y2kzbl$(0,-60,0),P.uSurfaceRadius.value=60,P.uAtmosphereRadius.value=65,P.uScatteringCoeffs.value.set_y2kzbl$(.274,1.536,3.859),P.uRayleighColor.value.set_7b5o5w$(.5,.5,1,1),P.uMieColor.value.set_7b5o5w$(1,.35,.35,.5),P.uMieG.value=.8,b.atmoNode=P,s}))}function Pz(){Oz=this}yz.$metadata$={kind:$,simpleName:"ReflectionMapPass",interfaces:[ya]},Sz.prototype.dispose_aemszp$=function(t){this.drawNode.dispose_aemszp$(t),$a.prototype.dispose_aemszp$.call(this,t)},Sz.$metadata$={kind:$,simpleName:"RgbeDecoder",interfaces:[$a]},Object.defineProperty(Ez.prototype,"azimuth",{configurable:!0,get:function(){return this.azimuth_rc8r83$_0},set:function(t){this.azimuth_rc8r83$_0=t,this.isEnabled=!0}}),Object.defineProperty(Ez.prototype,"elevation",{configurable:!0,get:function(){return this.elevation_kytf7i$_0},set:function(t){var e;e=t<-90?-90:t>90?90:t,this.elevation_kytf7i$_0=e,this.isEnabled=!0}}),Ez.prototype.updateSunLight_0=function(){var t,e=-this.azimuth*EE.DEG_2_RAD,i=U.PI/2-this.elevation*EE.DEG_2_RAD;this.sunLight_0.direction.z=-A.sin(i)*A.cos(e),this.sunLight_0.direction.x=-A.sin(i)*A.sin(e),this.sunLight_0.direction.y=-A.cos(i);var n=this.lightGradient_0.getColorInterpolated_vsomir$(this.elevation,jy(),-90,90),r=n.r*n.r+n.g*n.g+n.b*n.b,o=A.sqrt(r);for(t=this.syncLights.iterator();t.hasNext();){var s=t.next();s.setDirectional_czzhiu$(this.sunLight_0.direction),s.setColor_y83vuj$(n,o*this.sunLight_0.color.a)}},Pz.prototype.model=function(){var t=new tp,e={v:null},i={v:null},n=new ip(t);e.v=n.mvpNode();var r=n.attrPositions().output,o=n.vec3TransformNode_vid4wo$(r,e.v.outModelMat,1).outVec3;i.v=n.stageInterfaceNode_iikjwn$("ifFragPos",o),n.positionOutput=n.vec4TransformNode_9krp9t$(r,e.v.outMvpMat).outVec4;var s=new np(t);s.addNode_u9w9by$(new hy(s.stage));var a=e.v.addToStage_llmhyc$(s.stage),l=s.texture2dNode_61zpoe$("tOpticalDepthLut"),u=s.viewDirNode_ze33is$(a.outCamPos,i.v.output).output,p=s.addNode_u9w9by$(new dy(l,s.stage));p.inSceneColor=s.constVec4f_czzhhz$(new Ey(.02,.07,.15).toLinear()),p.inSkyColor=s.constVec4f_czzhhz$(new Ey(.02,.07,.15).toLinear()),p.inScenePos=i.v.output,p.inCamPos=a.outCamPos,p.inLookDir=u;var c=p;return s.colorOutput_a3v4si$(c.outColor),t},Pz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Oz=null;function Mz(){return null===Oz&&new Pz,Oz}function jz(t,e,i){return t.depthTest=yl(),t.cullMethod=Ol(),s}function Az(t){return t.isHdrOutput=!0,t.useStaticAlbedo_d7aj7k$(Oy().MD_BROWN.toLinear()),t.roughness=.8,s}function Iz(t){var e=(new Ak).icoDefaults();return e.steps=2,t.icoSphere_mojs8w$(e),s}function Rz(t){t.translate_y2kzbl$(0,-.011,0),t.rotate_ad55pp$(-90,Er().X_AXIS);var e=new Ek;return e.radius=9,e.steps=100,t.circle_59f34t$(e),s}function Lz(t){var e;this.parentScene=t,this.opticalDepthLutPass=new fy,this.skyPass=new Ez(x(this.opticalDepthLutPass.colorTexture)),this.brdfLutPass=new Kw(this.parentScene),this.irradianceMapPass=fz().irradianceMapFromCube_cv6i6k$(this.parentScene,x(this.skyPass.colorTexture),8),this.reflectionMapPass=xz().reflectionMapFromCube_cv6i6k$(this.parentScene,x(this.skyPass.colorTexture),128),this.envMaps=new iz(x(this.irradianceMapPass.colorTexture),x(this.reflectionMapPass.colorTexture),x(this.brdfLutPass.colorTexture)),this.isAutoUpdateIblMaps=!0,this.brdfLutPass.isAutoRemove=!1,this.irradianceMapPass.isAutoRemove=!1,this.reflectionMapPass.isAutoRemove=!1,this.skyPass.onAfterDraw.add_11rb$((e=this,function(t){return e.isAutoUpdateIblMaps&&e.updateIblMaps(),s}))}function Dz(t){Wz(),this.vertexAttributes=t;var i,n,r=this.vertexAttributes,o=C;for(i=r.iterator();i.hasNext();){var s=i.next();o=o.multiply(e.Long.fromInt(31)).add(e.Long.fromInt(s.hashCode()))}this.attributeHash=o,this.vertexSizeF=0,this.byteStrideF=0,this.vertexSizeI=0,this.byteStrideI=0,this.attributeByteOffsets=null,this.primitiveType=Qz(),this.usage=nk(),this.numVertices=0,this.dataF=null,this.dataI=null,this.indices=wE(1e3),this.bounds=new gy,this.vertexIt=null,this.isRebuildBoundsOnSync=!1,this.hasChanged=!0,this.isBatchUpdate=!1;var a=0,l=0,u=z();for(n=this.vertexAttributes.iterator();n.hasNext();){var p=n.next();if(p.type===as()||p.type===ls()||p.type===us())throw G("Matrix types are not supported as vertex attributes");if(p.type.isInt){var c=l;u.put_xwzc9p$(p,c),l=l+p.type.byteSize|0}else{var h=a;u.put_xwzc9p$(p,h),a=a+p.type.byteSize|0}}this.attributeByteOffsets=u,this.vertexSizeF=a/4|0,this.byteStrideF=a,this.vertexSizeI=l/4|0,this.byteStrideI=l,this.dataF=zE(1e3*a|0),this.dataI=wE(1e3*l|0),this.vertexIt=new yC(this,0)}function qz(){Hz=this,this.INITIAL_SIZE_0=1e3,this.GROW_FACTOR_0=2}Tz.$metadata$={kind:$,simpleName:"SkyShader",interfaces:[zc]},Ez.$metadata$={kind:$,simpleName:"SkyCubePass",interfaces:[ya]},Lz.prototype.updateIblMaps=function(){this.irradianceMapPass.isEnabled=!0,this.reflectionMapPass.isEnabled=!0},Lz.prototype.setupOffscreenPasses=function(){this.parentScene.addOffscreenPass_m1c2kf$(this.opticalDepthLutPass),this.parentScene.addOffscreenPass_m1c2kf$(this.brdfLutPass),this.parentScene.addOffscreenPass_m1c2kf$(this.skyPass),this.parentScene.addOffscreenPass_m1c2kf$(this.irradianceMapPass),this.parentScene.addOffscreenPass_m1c2kf$(this.reflectionMapPass)},Lz.$metadata$={kind:$,simpleName:"SkyCubeIblSystem",interfaces:[]},Object.defineProperty(Dz.prototype,"numIndices",{configurable:!0,get:function(){return this.indices.position}}),Object.defineProperty(Dz.prototype,"numPrimitives",{configurable:!0,get:function(){return this.numIndices/this.primitiveType.nVertices|0}}),Object.defineProperty(Dz.prototype,"lastIndex",{configurable:!0,get:function(){return this.numVertices-1|0}}),Dz.prototype.getMorphAttributes=function(){var t,e=M();for(t=this.vertexAttributes.iterator();t.hasNext();){var i=t.next();(u(i.name,ds().NORMALS.name+"_")||u(i.name,ds().POSITIONS.name+"_")||u(i.name,ds().TANGENTS.name+"_"))&&e.add_11rb$(i)}return e},Dz.prototype.isEmpty=function(){return 0===this.numVertices||0===this.numIndices},Dz.prototype.increaseDataSizeF_0=function(t){var e=zE(t);this.dataF.flip(),e.put_he122g$(this.dataF),this.dataF=e},Dz.prototype.increaseDataSizeI_0=function(t){var e=wE(t);this.dataI.flip(),e.put_7hqxcs$(this.dataI),this.dataI=e},Dz.prototype.increaseIndicesSize_0=function(t){var e=wE(t);this.indices.flip(),e.put_7hqxcs$(this.indices),this.indices=e},Dz.prototype.checkBufferSizes_za3lpa$=function(t){if(void 0===t&&(t=1),this.dataF.remaining<e.imul(this.vertexSizeF,t)){var i=B(at(this.dataF.capacity*Wz().GROW_FACTOR_0)),n=e.imul(this.numVertices+t|0,this.vertexSizeF);this.increaseDataSizeF_0(A.max(i,n))}if(this.dataI.remaining<e.imul(this.vertexSizeI,t)){var r=B(at(this.dataI.capacity*Wz().GROW_FACTOR_0)),o=e.imul(this.numVertices+t|0,this.vertexSizeI);this.increaseDataSizeI_0(A.max(r,o))}},Dz.prototype.checkIndexSize_za3lpa$=function(t){if(void 0===t&&(t=1),this.indices.remaining<t){var e=B(at(this.indices.capacity*Wz().GROW_FACTOR_0)),i=this.numVertices+t|0;this.increaseIndicesSize_0(A.max(e,i))}},Dz.prototype.hasAttribute_nm2vx5$=function(t){return this.vertexAttributes.contains_11rb$(t)},Dz.prototype.batchUpdate_gj3khe$=X("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.batchUpdate_gj3khe$",(function(t,e){void 0===t&&(t=!1);var i=this.isBatchUpdate;this.isBatchUpdate=!0,e(this),this.hasChanged=!0,this.isBatchUpdate=i,t&&this.rebuildBounds()})),Dz.prototype.addVertex_tohjaj$=X("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.addVertex_tohjaj$",(function(t){var e,i,n;this.checkBufferSizes_za3lpa$(),e=this.vertexSizeF;for(var r=1;r<=e;r++)this.dataF.plusAssign_mx4ult$(0);i=this.vertexSizeI;for(var o=1;o<=i;o++)this.dataI.plusAssign_za3lpa$(0);return this.vertexIt.index=(n=this.numVertices,this.numVertices=n+1|0,n),t(this.vertexIt),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices-1|0})),Dz.prototype.addVertex_lv7vxo$=function(t,e,i,n){var r,o,s;void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.checkBufferSizes_za3lpa$(),r=this.vertexSizeF;for(var a=1;a<=r;a++)this.dataF.plusAssign_mx4ult$(0);o=this.vertexSizeI;for(var l=1;l<=o;l++)this.dataI.plusAssign_za3lpa$(0);this.vertexIt.index=(s=this.numVertices,this.numVertices=s+1|0,s);var u=this.vertexIt;return u.position.set_czzhiu$(t),null!=e&&u.normal.set_czzhiu$(e),null!=i&&u.color.set_czzhhz$(i),null!=n&&u.texCoord.set_czzhjp$(n),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices-1|0},Dz.prototype.addGeometry_r7nl2o$=function(t){var e,i,n=this.numVertices;this.checkBufferSizes_za3lpa$(t.numVertices),e=t.numVertices;for(var r=0;r<e;r++){var o,s,a;this.checkBufferSizes_za3lpa$(),o=this.vertexSizeF;for(var l=1;l<=o;l++)this.dataF.plusAssign_mx4ult$(0);s=this.vertexSizeI;for(var u=1;u<=s;u++)this.dataI.plusAssign_za3lpa$(0);this.vertexIt.index=(a=this.numVertices,this.numVertices=a+1|0,a);var p=this.vertexIt;t.vertexIt.index=r,p.set_fs4kvg$(t.vertexIt),this.bounds.add_czzhiu$(this.vertexIt.position),this.hasChanged=!0,this.numVertices}this.checkIndexSize_za3lpa$(t.indices.position),i=t.indices.position;for(var c=0;c<i;c++)this.addIndex_za3lpa$(n+t.indices.get_za3lpa$(c)|0)},Dz.prototype.addIndex_za3lpa$=function(t){0===this.indices.remaining&&this.checkIndexSize_za3lpa$(),this.indices.plusAssign_za3lpa$(t)},Dz.prototype.addIndices_pmhfmb$=function(t){for(var e=0;e!==t.length;++e)this.addIndex_za3lpa$(t[e]);this.hasChanged=!0},Dz.prototype.addIndices_pqoyrt$=function(t){for(var e=0;e!==t.size;++e)this.addIndex_za3lpa$(t.get_za3lpa$(e))},Dz.prototype.addTriIndices_qt1dr2$=function(t,e,i){this.addIndex_za3lpa$(t),this.addIndex_za3lpa$(e),this.addIndex_za3lpa$(i)},Dz.prototype.rebuildBounds=function(){var t;this.bounds.clear(),t=this.numVertices;for(var e=0;e<t;e++)this.vertexIt.index=e,this.bounds.add_czzhiu$(this.vertexIt.position)},Dz.prototype.clear=function(){this.numVertices=0,this.dataF.position=0,this.dataF.limit=this.dataF.capacity,this.dataI.position=0,this.dataI.limit=this.dataI.capacity,this.indices.position=0,this.indices.limit=this.indices.capacity,this.hasChanged=!0},Dz.prototype.clearIndices=function(){this.indices.position=0,this.indices.limit=this.indices.capacity},Dz.prototype.shrinkIndices_za3lpa$=function(t){if(t>this.indices.position)throw cn("new size must be less (or equal) than old size");this.indices.position=t,this.indices.limit=this.indices.capacity},Dz.prototype.shrinkVertices_za3lpa$=function(t){if(t>this.numVertices)throw cn("new size must be less (or equal) than old size");this.numVertices=t,this.dataF.position=e.imul(t,this.vertexSizeF),this.dataF.limit=this.dataF.capacity,this.dataI.position=e.imul(t,this.vertexSizeI),this.dataI.limit=this.dataI.capacity},Dz.prototype.get_za3lpa$=function(t){if(t<0||t>=(this.dataF.capacity/this.vertexSizeF|0))throw cn("Vertex index out of bounds: "+t);return new yC(this,t)},Dz.prototype.forEach_tohjaj$=X("kool-kool-core.de.fabmax.kool.util.IndexedVertexList.forEach_tohjaj$",(function(t){var e;e=this.numVertices;for(var i=0;i<e;i++)this.vertexIt.index=i,t(this.vertexIt)})),Dz.prototype.removeDegeneratedTriangles=function(){var t,e,i,n,r=this.get_za3lpa$(0),o=this.get_za3lpa$(1),s=this.get_za3lpa$(2),a=Mr(),l=Mr(),u=new Int32Array(this.numIndices),p=0;t=this.numIndices;for(var c=0;c<t;c+=3){r.index=this.indices.get_za3lpa$(c),o.index=this.indices.get_za3lpa$(c+1|0),s.index=this.indices.get_za3lpa$(c+2|0),o.position.subtract_2gj7b4$(r.position,a).norm(),s.position.subtract_2gj7b4$(r.position,l).norm();var h=Vn(r.position,o.position,s.position),d=!(null!=a&&a.equals(Er().ZERO)||null!=l&&l.equals(Er().ZERO));if(d){var f=a.times_czzhiu$(l);d=1!==A.abs(f)}d&&!Le(h)&&h>0&&(u[(e=p,p=e+1|0,e)]=this.indices.get_za3lpa$(c),u[(i=p,p=i+1|0,i)]=this.indices.get_za3lpa$(c+1|0),u[(n=p,p=n+1|0,n)]=this.indices.get_za3lpa$(c+2|0))}p!==this.numIndices&&(this.indices.clear(),this.indices.put_nd5v6f$(u,0,p))},Dz.prototype.generateNormals=function(){var t,i,n;if(this.vertexAttributes.contains_11rb$(ds().NORMALS)){if(this.primitiveType!==Qz())throw cn("Normal generation is only supported for triangle meshes");var r=this.get_za3lpa$(0),o=this.get_za3lpa$(1),s=this.get_za3lpa$(2),a=Mr(),l=Mr(),u=Mr();t=this.numVertices;for(var p=0;p<t;p++)r.index=p,r.normal.set_czzhiu$(Er().ZERO);i=this.numIndices;for(var c=0;c<i;c+=3){if(r.index=this.indices.get_za3lpa$(c),o.index=this.indices.get_za3lpa$(c+1|0),s.index=this.indices.get_za3lpa$(c+2|0),r.index>this.numVertices||o.index>this.numVertices||s.index>this.numVertices){var h=DE.Log,d=$k.ERROR,f=e.getKClassFromExpression(this).simpleName;d.level>=h.level.level&&h.printer(d,f,"index to large "+r.index+", "+o.index+", "+s.index+", sz: "+this.numVertices)}o.position.subtract_2gj7b4$(r.position,a).norm(),s.position.subtract_2gj7b4$(r.position,l).norm();var _=Vn(r.position,o.position,s.position);if(a.cross_2gj7b4$(l,u).norm().scale_mx4ult$(_),null!=u&&u.equals(Er().ZERO)||Le(u.x)||Le(u.y)||Le(u.z)){var m=DE.Log,$=$k.WARN,y=e.getKClassFromExpression(this).simpleName;$.level>=m.level.level&&m.printer($,y,"generate normals: degenerated triangle, a = "+_+", e1 = "+a+", e2 = "+l)}else r.normal.plusAssign_czzhiu$(u),o.normal.plusAssign_czzhiu$(u),s.normal.plusAssign_czzhiu$(u)}n=this.numVertices;for(var v=0;v<n;v++)r.index=v,r.normal.norm()}},Dz.prototype.generateTangents_mx4ult$=function(t){var i,n,r;if(void 0===t&&(t=1),this.vertexAttributes.contains_11rb$(ds().TANGENTS)){if(this.primitiveType!==Qz())throw cn("Normal generation is only supported for triangle meshes");var o=this.get_za3lpa$(0),s=this.get_za3lpa$(1),a=this.get_za3lpa$(2),l=Mr(),u=Mr(),p=Mr();i=this.numVertices;for(var c=0;c<i;c++)o.index=c,o.tangent.set_2qa7tb$(Er().ZERO);n=this.numIndices;for(var h=0;h<n;h+=3){o.index=this.indices.get_za3lpa$(h),s.index=this.indices.get_za3lpa$(h+1|0),a.index=this.indices.get_za3lpa$(h+2|0),s.position.subtract_2gj7b4$(o.position,l),a.position.subtract_2gj7b4$(o.position,u);var d=s.texCoord.x-o.texCoord.x,f=s.texCoord.y-o.texCoord.y,_=a.texCoord.x-o.texCoord.x,m=a.texCoord.y-o.texCoord.y,$=1/(d*m-_*f);if(Le($)){var y=DE.Log,v=$k.WARN,g=e.getKClassFromExpression(this).simpleName;v.level>=y.level.level&&y.printer(v,g,"generate tangents: degenerated triangle, e1 = "+l+", e2 = "+u)}else p.x=$*(m*l.x-f*u.x),p.y=$*(m*l.y-f*u.y),p.z=$*(m*l.z-f*u.z),o.tangent.plusAssign_czzhhz$(eo(p,0)),s.tangent.plusAssign_czzhhz$(eo(p,0)),a.tangent.plusAssign_czzhhz$(eo(p,0))}r=this.numVertices;for(var b=0;b<r;b++)o.index=b,0===o.normal.sqrLength()&&o.normal.set_czzhiu$(Er().Y_AXIS),0!==o.tangent.sqrLength()?(o.tangent.norm(),o.tangent.w=t):o.tangent.set_2qa7tb$(Er().X_AXIS)}},qz.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Fz,Bz,Uz,Vz,Gz,Hz=null;function Wz(){return null===Hz&&new qz,Hz}function Xz(t,e){return e=e||Object.create(Dz.prototype),Dz.call(e,De(t)),e}function Kz(t,e,i){T.call(this),this.nVertices=i,this.name$=t,this.ordinal$=e}function Yz(){Yz=function(){},Fz=new Kz("LINES",0,2),Bz=new Kz("POINTS",1,1),Uz=new Kz("TRIANGLES",2,3)}function Zz(){return Yz(),Fz}function Jz(){return Yz(),Bz}function Qz(){return Yz(),Uz}function tk(t,e){T.call(this),this.name$=t,this.ordinal$=e}function ek(){ek=function(){},Vz=new tk("DYNAMIC",0),Gz=new tk("STATIC",1)}function ik(){return ek(),Vz}function nk(){return ek(),Gz}Dz.$metadata$={kind:$,simpleName:"IndexedVertexList",interfaces:[]},Kz.$metadata$={kind:$,simpleName:"PrimitiveType",interfaces:[T]},Kz.values=function(){return[Zz(),Jz(),Qz()]},Kz.valueOf_61zpoe$=function(t){switch(t){case"LINES":return Zz();case"POINTS":return Jz();case"TRIANGLES":return Qz();default:P("No enum constant de.fabmax.kool.util.PrimitiveType."+t)}},tk.$metadata$={kind:$,simpleName:"Usage",interfaces:[T]},tk.values=function(){return[ik(),nk()]},tk.valueOf_61zpoe$=function(t){switch(t){case"DYNAMIC":return ik();case"STATIC":return nk();default:P("No enum constant de.fabmax.kool.util.Usage."+t)}};var rk,ok,sk,ak,lk,uk,pk=K((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function ck(t){void 0===t&&(t=null),Of.call(this,t),this.instances=M(),this.lods_0=M()}function hk(t){return t.maxDistance}function dk(t){return t.camDistance}function fk(t,e,i){this.$outer=t,this.mesh=e,this.maxDistance=i,this.instances=M()}function _k(){this.instanceModelMat=new En,this.center=Mr(),this.radius=1,this.globalRadius_jgtua1$_0=0,this.camDistance_n2u3ce$_0=0,this.isInFrustum_77t0d9$_0=!1,this.globalCenterMut_46d76q$_0=Mr(),this.globalExtentMut_q2k453$_0=Mr()}function mk(){Sk=this,this.DEFAULT_PRINTER=kk,this.level=gk(),this.printer=this.DEFAULT_PRINTER}function $k(t,e,i,n){T.call(this),this.level=i,this.indicator=E(n),this.name$=t,this.ordinal$=e}function yk(){yk=function(){},rk=new $k("TRACE",0,0,84),ok=new $k("DEBUG",1,1,68),sk=new $k("INFO",2,2,73),ak=new $k("WARN",3,3,87),lk=new $k("ERROR",4,4,69),uk=new $k("OFF",5,5,120)}function vk(){return yk(),rk}function gk(){return yk(),ok}function bk(){return yk(),sk}function xk(){return yk(),ak}function wk(){return yk(),lk}function zk(){return yk(),uk}function kk(t,e,i){return jt(String.fromCharCode(O(t.indicator))+"/"+Ct(e)+": "+i),s}Object.defineProperty(ck.prototype,"isFrustumChecked",{configurable:!0,get:function(){return!1},set:function(t){}}),ck.prototype.getInstanceCount_za3lpa$=function(t){return t<this.lods_0.size?this.lods_0.get_za3lpa$(t).instances.size:0},ck.prototype.addLod_od45r7$=function(t,e){var i=this.lods_0,n=new fk(this,t,e);i.add_11rb$(n);var r=this.lods_0;r.size>1&&$t(r,new yt(pk(hk))),t.parent=this},ck.prototype.update_kma0q5$=function(t){var e,i,n;Of.prototype.update_kma0q5$.call(this,t),e=this.lods_0;for(var r=0;r!==e.size;++r)this.lods_0.get_za3lpa$(r).instances.clear();var o=t.camera;i=this.instances;for(var s=0;s!==i.size;++s){var a=this.instances.get_za3lpa$(s);if(a.update_l2cg23$(this,o,t.ctx),a.isInFrustum)for(var l=xt(this.lods_0);l>=0;l--)if(0===l||a.camDistance>this.lods_0.get_za3lpa$(l-1|0).maxDistance){this.lods_0.get_za3lpa$(l).instances.add_11rb$(a);break}}n=this.lods_0;for(var u=0;u!==n.size;++u){var p=this.lods_0.get_za3lpa$(u);if(p.instances.size>p.maxInstances){var c=p.instances;for(c.size>1&&$t(c,new yt(pk(dk)));p.instances.size>p.maxInstances;){var h=p.instances.removeAt_za3lpa$(xt(p.instances));u<xt(this.lods_0)&&this.lods_0.get_za3lpa$(u+1|0).instances.add_11rb$(h)}}p.updateInstances_2shagh$(u,t.ctx),p.mesh.update_kma0q5$(t)}},ck.prototype.collectDrawCommands_kma0q5$=function(t){var e;Of.prototype.collectDrawCommands_kma0q5$.call(this,t),e=this.lods_0;for(var i=0;i!==e.size;++i)this.lods_0.get_za3lpa$(i).mesh.collectDrawCommands_kma0q5$(t)},ck.prototype.dispose_aemszp$=function(t){var e;Of.prototype.dispose_aemszp$.call(this,t),e=this.lods_0;for(var i=0;i!==e.size;++i)this.lods_0.get_za3lpa$(i).mesh.dispose_aemszp$(t)},Object.defineProperty(fk.prototype,"maxInstances",{configurable:!0,get:function(){var t,e;return null!=(e=null!=(t=this.mesh.instances)?t.maxInstances:null)?e:0}}),fk.prototype.updateInstances_2shagh$=function(t,e){var i,n;if(null!=(i=this.mesh.instances))for(i.clear(),n=this.instances.iterator();n.hasNext();)n.next().addInstanceData_bgc5cs$(t,i,e)},fk.$metadata$={kind:$,simpleName:"Lod",interfaces:[]},Object.defineProperty(_k.prototype,"globalCenter",{configurable:!0,get:function(){return this.globalCenterMut_46d76q$_0}}),Object.defineProperty(_k.prototype,"globalRadius",{configurable:!0,get:function(){return this.globalRadius_jgtua1$_0},set:function(t){this.globalRadius_jgtua1$_0=t}}),Object.defineProperty(_k.prototype,"camDistance",{configurable:!0,get:function(){return this.camDistance_n2u3ce$_0},set:function(t){this.camDistance_n2u3ce$_0=t}}),Object.defineProperty(_k.prototype,"isInFrustum",{configurable:!0,get:function(){return this.isInFrustum_77t0d9$_0},set:function(t){this.isInFrustum_77t0d9$_0=t}}),_k.prototype.update_l2cg23$=function(t,e,i){this.globalCenterMut_46d76q$_0.set_czzhiu$(this.center),this.globalExtentMut_q2k453$_0.set_czzhiu$(this.center).x=this.globalExtentMut_q2k453$_0.set_czzhiu$(this.center).x+this.radius,this.instanceModelMat.transform_w1lst9$(this.globalCenterMut_46d76q$_0),this.instanceModelMat.transform_w1lst9$(this.globalExtentMut_q2k453$_0),t.modelMat.transform_w1lst9$(this.globalCenterMut_46d76q$_0),t.modelMat.transform_w1lst9$(this.globalExtentMut_q2k453$_0),this.globalRadius=this.globalCenterMut_46d76q$_0.distance_czzhiu$(this.globalExtentMut_q2k453$_0),this.isInFrustum=e.isInFrustum_2qa7tb$(this.globalCenterMut_46d76q$_0,this.globalRadius),this.camDistance=e.globalPos.distance_czzhiu$(this.globalCenterMut_46d76q$_0)},_k.prototype.addInstanceData_bgc5cs$=function(t,e,i){e.checkBufferSize_za3lpa$();var n=e.dataF.position;e.dataF.put_q3cr5i$(this.instanceModelMat.matrix);var r=e.dataF.position-n|0;if(r!==e.instanceSizeF)throw bt("Expected data to grow by "+e.instanceSizeF+" elements, instead it grew by "+r);e.numInstances=e.numInstances+1|0,e.hasChanged=!0},_k.$metadata$={kind:$,simpleName:"Instance",interfaces:[]},ck.$metadata$={kind:$,simpleName:"InstancedLodController",interfaces:[Of]},mk.prototype.tExt_jzryxz$=X("kool-kool-core.de.fabmax.kool.util.Log.tExt_jzryxz$",K((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.TRACE,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),mk.prototype.t_fkbaij$=X("kool-kool-core.de.fabmax.kool.util.Log.t_fkbaij$",K((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.TRACE;n.level>=this.level.level&&this.printer(n,t,i())}}))),mk.prototype.dExt_jzryxz$=X("kool-kool-core.de.fabmax.kool.util.Log.dExt_jzryxz$",K((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.DEBUG,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),mk.prototype.d_fkbaij$=X("kool-kool-core.de.fabmax.kool.util.Log.d_fkbaij$",K((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.DEBUG;n.level>=this.level.level&&this.printer(n,t,i())}}))),mk.prototype.iExt_jzryxz$=X("kool-kool-core.de.fabmax.kool.util.Log.iExt_jzryxz$",K((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.INFO,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),mk.prototype.i_fkbaij$=X("kool-kool-core.de.fabmax.kool.util.Log.i_fkbaij$",K((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.INFO;n.level>=this.level.level&&this.printer(n,t,i())}}))),mk.prototype.wExt_jzryxz$=X("kool-kool-core.de.fabmax.kool.util.Log.wExt_jzryxz$",K((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.WARN,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),mk.prototype.w_fkbaij$=X("kool-kool-core.de.fabmax.kool.util.Log.w_fkbaij$",K((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.WARN;n.level>=this.level.level&&this.printer(n,t,i())}}))),mk.prototype.eExt_jzryxz$=X("kool-kool-core.de.fabmax.kool.util.Log.eExt_jzryxz$",K((function(){var i=t.de.fabmax.kool.util.Log.Level;return function(t,n){var r=i.ERROR,o=e.getKClassFromExpression(t).simpleName;r.level>=this.level.level&&this.printer(r,o,n())}}))),mk.prototype.e_fkbaij$=X("kool-kool-core.de.fabmax.kool.util.Log.e_fkbaij$",K((function(){var e=t.de.fabmax.kool.util.Log.Level;return function(t,i){var n=e.ERROR;n.level>=this.level.level&&this.printer(n,t,i())}}))),mk.prototype.logExt_askb8u$=X("kool-kool-core.de.fabmax.kool.util.Log.logExt_askb8u$",(function(t,i,n){var r=e.getKClassFromExpression(i).simpleName;t.level>=this.level.level&&this.printer(t,r,n())})),mk.prototype.log_f0yxhs$=X("kool-kool-core.de.fabmax.kool.util.Log.log_f0yxhs$",(function(t,e,i){t.level>=this.level.level&&this.printer(t,e,i())})),$k.$metadata$={kind:$,simpleName:"Level",interfaces:[T]},$k.values=function(){return[vk(),gk(),bk(),xk(),wk(),zk()]},$k.valueOf_61zpoe$=function(t){switch(t){case"TRACE":return vk();case"DEBUG":return gk();case"INFO":return bk();case"WARN":return xk();case"ERROR":return wk();case"OFF":return zk();default:P("No enum constant de.fabmax.kool.util.Log.Level."+t)}},mk.$metadata$={kind:y,simpleName:"Log",interfaces:[]};var Sk=null;function Ck(t){this.geometry=t,this.transform=new Mn,this.color=Oy().GRAY,this.vertexModFun=null,this.hasNormals=this.geometry.hasAttribute_nm2vx5$(ds().NORMALS)}function Nk(){this.x=.5257311,this.z=.8506508,this.n=0,this.verts=b([new Sr(-this.x,this.n,this.z),new Sr(this.x,this.n,this.z),new Sr(-this.x,this.n,-this.z),new Sr(this.x,this.n,-this.z),new Sr(this.n,this.z,this.x),new Sr(this.n,this.z,-this.x),new Sr(this.n,-this.z,this.x),new Sr(this.n,-this.z,-this.x),new Sr(this.z,this.x,this.n),new Sr(-this.z,this.x,this.n),new Sr(this.z,-this.x,this.n),new Sr(-this.z,-this.x,this.n)]),this.uvVerts=M(),this.faces=b([4,0,1,9,0,4,5,9,4,5,4,8,8,4,1,10,8,1,3,8,10,3,5,8,2,5,3,7,2,3,10,7,3,6,7,10,11,7,6,0,11,6,1,0,6,1,6,10,0,9,11,11,9,2,2,9,5,2,7,11]),this.midVerts_0=z()}function Ek(){this.radius=1,this.steps=20,this.center=Mr(),this.startDeg=0,this.sweepDeg=360,this.uvCenter=pr(),this.uvRadius=0,this.fullTexCoords()}function Tk(){jk(),this.center=Mr(),this.xDir=Ar(Er().X_AXIS),this.yDir=Ar(Er().NEG_Z_AXIS),this.sizeX=10,this.sizeY=10,this.stepsX=10,this.stepsY=10,this.heightFun=jk().ZERO_HEIGHT}function Pk(){Mk=this,this.ZERO_HEIGHT=Ok}function Ok(t,e){return 0}Ck.prototype.vertex_tohjaj$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.vertex_tohjaj$",(function(t){var e,i,n,r=this.geometry;r.checkBufferSizes_za3lpa$(),e=r.vertexSizeF;for(var o=1;o<=e;o++)r.dataF.plusAssign_mx4ult$(0);i=r.vertexSizeI;for(var s=1;s<=i;s++)r.dataI.plusAssign_za3lpa$(0);r.vertexIt.index=(n=r.numVertices,r.numVertices=n+1|0,n);var a,l=r.vertexIt;return l.color.set_czzhhz$(this.color),t(l),this.transform.transform_w1lst9$(l.position),this.hasNormals&&0!==l.normal.sqrLength()&&(this.transform.transform_w1lst9$(l.normal,0),l.normal.norm()),null!=(a=this.vertexModFun)&&a(l),r.bounds.add_czzhiu$(r.vertexIt.position),r.hasChanged=!0,r.numVertices-1|0})),Ck.prototype.vertex_n440gp$$default=function(t,e,i){var n,r,o,s=this.geometry;s.checkBufferSizes_za3lpa$(),n=s.vertexSizeF;for(var a=1;a<=n;a++)s.dataF.plusAssign_mx4ult$(0);r=s.vertexSizeI;for(var l=1;l<=r;l++)s.dataI.plusAssign_za3lpa$(0);s.vertexIt.index=(o=s.numVertices,s.numVertices=o+1|0,o);var u,p=s.vertexIt;return p.color.set_czzhhz$(this.color),p.position.set_czzhiu$(t),p.normal.set_czzhiu$(e),p.texCoord.set_czzhjp$(i),this.transform.transform_w1lst9$(p.position),this.hasNormals&&0!==p.normal.sqrLength()&&(this.transform.transform_w1lst9$(p.normal,0),p.normal.norm()),null!=(u=this.vertexModFun)&&u(p),s.bounds.add_czzhiu$(s.vertexIt.position),s.hasChanged=!0,s.numVertices-1|0},Ck.prototype.vertex_n440gp$=function(t,e,i,n){return void 0===i&&(i=ar().ZERO),n?n(t,e,i):this.vertex_n440gp$$default(t,e,i)},Ck.prototype.withTransform_v2sixm$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.withTransform_v2sixm$",(function(t){this.transform.push(),t(this),this.transform.pop()})),Ck.prototype.withColor_2f8443$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.withColor_2f8443$",(function(t,e){var i=this.color;null!=t&&(this.color=t),e(this),this.color=i})),Ck.prototype.clear=function(){this.geometry.clear(),this.identity()},Ck.prototype.identity=function(){return this.transform.setIdentity()},Ck.prototype.translate_czzhiu$=function(t){return this.transform.translate_y2kzbl$(t.x,t.y,t.z)},Ck.prototype.translate_y2kzbl$=function(t,e,i){return this.transform.translate_y2kzbl$(t,e,i)},Ck.prototype.rotate_ad55pp$=function(t,e){return this.transform.rotate_ad55pp$(t,e)},Ck.prototype.rotate_7b5o5w$=function(t,e,i,n){return this.transform.rotate_7b5o5w$(t,e,i,n)},Ck.prototype.scale_y2kzbl$=function(t,e,i){return this.transform.scale_y2kzbl$(t,e,i)},Ck.prototype.setCoordSystem_xq1mqt$=function(t,e,i,n){void 0===n&&(n=null);var r=n;null==r&&(r=To(e,i)),this.transform.setIdentity(),this.transform.set_n0b4r3$(0,0,e.x),this.transform.set_n0b4r3$(1,0,e.y),this.transform.set_n0b4r3$(2,0,e.z),this.transform.set_n0b4r3$(0,1,i.x),this.transform.set_n0b4r3$(1,1,i.y),this.transform.set_n0b4r3$(2,1,i.z),this.transform.set_n0b4r3$(0,2,r.x),this.transform.set_n0b4r3$(1,2,r.y),this.transform.set_n0b4r3$(2,2,r.z),this.transform.set_n0b4r3$(0,3,t.x),this.transform.set_n0b4r3$(1,3,t.y),this.transform.set_n0b4r3$(2,3,t.z)},Ck.prototype.profile_qgzkbv$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.profile_qgzkbv$",K((function(){var e=t.de.fabmax.kool.util.Profile;return function(t){var i=new e;return t(i),i}}))),Ck.prototype.multiShape_itjjuo$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.multiShape_itjjuo$",K((function(){var e=t.de.fabmax.kool.util.MultiShape;return function(t,i){var n=new e;return t.shapes.add_11rb$(n),i(n),n}}))),Ck.prototype.simpleShape_ggyesq$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.simpleShape_ggyesq$",K((function(){var e=t.de.fabmax.kool.util.SimpleShape;return function(t,i,n){var r=new e(i);return t.shapes.add_11rb$(r),n(r),r}}))),Ck.prototype.circleShape_k80pjh$=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=40);var n=new cS(!0);t.shapes.add_11rb$(n);for(var r=0;r<i;r++){var o=2*U.PI*r/i;n.xy_dleff0$(A.cos(o)*e,A.sin(o)*e)}return n},Ck.prototype.sample_afatab$=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i)},Ck.prototype.sampleAndFillBottom_afatab$=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i),t.fillBottom_84rojv$(this)},Ck.prototype.fillBottom_pvgy1j$=function(t){t.fillBottom_84rojv$(this)},Ck.prototype.sampleAndFillTop_afatab$=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.sample_l28n3f$(this,e,i),t.fillTop_84rojv$(this)},Ck.prototype.fillTop_pvgy1j$=function(t){t.fillTop_84rojv$(this)},Ck.prototype.circle_5yji8k$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.circle_5yji8k$",K((function(){var e=t.de.fabmax.kool.util.CircleProps;return function(t){var i=new e;t(i),this.circle_59f34t$(i)}}))),Ck.prototype.circle_59f34t$=function(t){var e,i=0,n=this.vertex_n440gp$(t.center,Er().Z_AXIS,t.uvCenter);e=t.steps;for(var r=0;r<=e;r++){var o,s,a,l=(t.startDeg+t.sweepDeg*r/t.steps)*EE.DEG_2_RAD,u=A.cos(l),p=A.sin(l),c=t.center.x+t.radius*u,h=t.center.y+t.radius*p,d=this.geometry;d.checkBufferSizes_za3lpa$(),o=d.vertexSizeF;for(var f=1;f<=o;f++)d.dataF.plusAssign_mx4ult$(0);s=d.vertexSizeI;for(var _=1;_<=s;_++)d.dataI.plusAssign_za3lpa$(0);d.vertexIt.index=(a=d.numVertices,d.numVertices=a+1|0,a);var m,$=d.vertexIt;$.color.set_czzhhz$(this.color),$.position.set_y2kzbl$(c,h,t.center.z),$.normal.set_czzhiu$(Er().Z_AXIS),$.texCoord.set_dleff0$(u,-p).scale_mx4ult$(t.uvRadius).add_czzhjp$(t.uvCenter),this.transform.transform_w1lst9$($.position),this.hasNormals&&0!==$.normal.sqrLength()&&(this.transform.transform_w1lst9$($.normal,0),$.normal.norm()),null!=(m=this.vertexModFun)&&m($),d.bounds.add_czzhiu$(d.vertexIt.position),d.hasChanged=!0;var y=d.numVertices-1|0;r>0&&this.geometry.addTriIndices_qt1dr2$(n,i,y),i=y}},Ck.prototype.uvSphere_ybunu9$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.uvSphere_ybunu9$",K((function(){var e=t.de.fabmax.kool.util.SphereProps;return function(t){var i=(new e).uvDefaults();t(i),this.uvSphere_mojs8w$(i)}}))),Ck.prototype.uvSphere_mojs8w$=function(t){var e,i,n,r,o=t.steps/2|0,s=A.max(o,4),a=new Int32Array(1+(2*s|0)|0),l=new Int32Array(1+(2*s|0)|0),u={v:U.PI*(s-1|0)/s},p=u.v,c=A.sin(p)*t.radius,h=u.v,d={v:A.cos(h)*t.radius};e=2*s|0;for(var f=0;f<=e;f++){var _,m,$,y=U.PI*f/s,v=-y,g=A.cos(v)*c,b=-y,x=A.sin(b)*c,w=l,z=this.geometry;z.checkBufferSizes_za3lpa$(),_=z.vertexSizeF;for(var k=1;k<=_;k++)z.dataF.plusAssign_mx4ult$(0);m=z.vertexSizeI;for(var S=1;S<=m;S++)z.dataI.plusAssign_za3lpa$(0);z.vertexIt.index=($=z.numVertices,z.numVertices=$+1|0,$);var C,N=z.vertexIt;if(N.color.set_czzhhz$(this.color),N.position.set_y2kzbl$(g,d.v,x).add_czzhiu$(t.center),N.normal.set_y2kzbl$(g,d.v,x).scale_mx4ult$(1/t.radius),N.texCoord.set_czzhjp$(t.texCoordGenerator(u.v,y)),this.transform.transform_w1lst9$(N.position),this.hasNormals&&0!==N.normal.sqrLength()&&(this.transform.transform_w1lst9$(N.normal,0),N.normal.norm()),null!=(C=this.vertexModFun)&&C(N),z.bounds.add_czzhiu$(z.vertexIt.position),z.hasChanged=!0,w[f]=z.numVertices-1|0,f>0){var E,T,P,O=this.geometry;O.checkBufferSizes_za3lpa$(),E=O.vertexSizeF;for(var M=1;M<=E;M++)O.dataF.plusAssign_mx4ult$(0);T=O.vertexSizeI;for(var j=1;j<=T;j++)O.dataI.plusAssign_za3lpa$(0);O.vertexIt.index=(P=O.numVertices,O.numVertices=P+1|0,P);var I,R=O.vertexIt;R.color.set_czzhhz$(this.color),R.position.set_y2kzbl$(t.center.x,t.center.y-t.radius,t.center.z),R.normal.set_czzhiu$(Er().NEG_Y_AXIS),R.texCoord.set_czzhjp$(t.texCoordGenerator(U.PI,y)),this.transform.transform_w1lst9$(R.position),this.hasNormals&&0!==R.normal.sqrLength()&&(this.transform.transform_w1lst9$(R.normal,0),R.normal.norm()),null!=(I=this.vertexModFun)&&I(R),O.bounds.add_czzhiu$(O.vertexIt.position),O.hasChanged=!0;var L=O.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(L,l[f],l[f-1|0])}}i=s-1|0;for(var D=2;D<=i;D++){var q=a;a=l,l=q,u.v=U.PI*(s-D|0)/s;var F=u.v;c=A.sin(F)*t.radius;var B=u.v;d.v=A.cos(B)*t.radius,n=2*s|0;for(var V=0;V<=n;V++){var G,H,W,X=U.PI*V/s,K=-X,Y=A.cos(K)*c,Z=-X,J=A.sin(Z)*c,Q=l,tt=this.geometry;tt.checkBufferSizes_za3lpa$(),G=tt.vertexSizeF;for(var et=1;et<=G;et++)tt.dataF.plusAssign_mx4ult$(0);H=tt.vertexSizeI;for(var it=1;it<=H;it++)tt.dataI.plusAssign_za3lpa$(0);tt.vertexIt.index=(W=tt.numVertices,tt.numVertices=W+1|0,W);var nt,rt=tt.vertexIt;rt.color.set_czzhhz$(this.color),rt.position.set_y2kzbl$(Y,d.v,J).add_czzhiu$(t.center),rt.normal.set_y2kzbl$(Y,d.v,J).scale_mx4ult$(1/t.radius),rt.texCoord.set_czzhjp$(t.texCoordGenerator(u.v,X)),this.transform.transform_w1lst9$(rt.position),this.hasNormals&&0!==rt.normal.sqrLength()&&(this.transform.transform_w1lst9$(rt.normal,0),rt.normal.norm()),null!=(nt=this.vertexModFun)&&nt(rt),tt.bounds.add_czzhiu$(tt.vertexIt.position),tt.hasChanged=!0,Q[V]=tt.numVertices-1|0,V>0&&(this.geometry.addTriIndices_qt1dr2$(a[V-1|0],l[V],l[V-1|0]),this.geometry.addTriIndices_qt1dr2$(a[V-1|0],a[V],l[V]))}}r=2*s|0;for(var ot=1;ot<=r;ot++){var st,at,lt,ut=this.geometry;ut.checkBufferSizes_za3lpa$(),st=ut.vertexSizeF;for(var pt=1;pt<=st;pt++)ut.dataF.plusAssign_mx4ult$(0);at=ut.vertexSizeI;for(var ct=1;ct<=at;ct++)ut.dataI.plusAssign_za3lpa$(0);ut.vertexIt.index=(lt=ut.numVertices,ut.numVertices=lt+1|0,lt);var ht,dt=ut.vertexIt;dt.color.set_czzhhz$(this.color),dt.position.set_y2kzbl$(t.center.x,t.center.y+t.radius,t.center.z),dt.normal.set_czzhiu$(Er().Y_AXIS),dt.texCoord.set_czzhjp$(t.texCoordGenerator(0,U.PI*ot/s)),this.transform.transform_w1lst9$(dt.position),this.hasNormals&&0!==dt.normal.sqrLength()&&(this.transform.transform_w1lst9$(dt.normal,0),dt.normal.norm()),null!=(ht=this.vertexModFun)&&ht(dt),ut.bounds.add_czzhiu$(ut.vertexIt.position),ut.hasChanged=!0;var ft=ut.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(ft,l[ot-1|0],l[ot])}},Ck.prototype.icoSphere_ybunu9$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.icoSphere_ybunu9$",K((function(){var e=t.de.fabmax.kool.util.SphereProps;return function(t){var i=(new e).icoDefaults();t(i),this.icoSphere_mojs8w$(i)}}))),Nk.prototype.getMidVertex_vux9f0$=function(t,e){var i,n=1048576*A.min(t,e)+A.max(t,e),r=this.midVerts_0,o=r.get_11rb$(n);if(null==o){var s=this.verts.size,a=this.verts,l=Ar(this.verts.get_za3lpa$(t)).add_czzhiu$(this.verts.get_za3lpa$(e)).norm();a.add_11rb$(l);var u=s;r.put_xwzc9p$(n,u),i=u}else i=o;return i},Nk.prototype.subdivide=function(){var t,e,i,n,r,o,s,a,l,u,p,c,h,d,f=new Int32Array(4*this.faces.size|0),_=0;for(t=qe(R(this.faces),3).iterator();t.hasNext();){var m=t.next(),$=this.faces.get_za3lpa$(m),y=this.faces.get_za3lpa$(m+1|0),v=this.faces.get_za3lpa$(m+2|0),g=this.getMidVertex_vux9f0$($,y),b=this.getMidVertex_vux9f0$(y,v),x=this.getMidVertex_vux9f0$(v,$);f[(e=_,_=e+1|0,e)]=$,f[(i=_,_=i+1|0,i)]=g,f[(n=_,_=n+1|0,n)]=x,f[(r=_,_=r+1|0,r)]=y,f[(o=_,_=o+1|0,o)]=b,f[(s=_,_=s+1|0,s)]=g,f[(a=_,_=a+1|0,a)]=v,f[(l=_,_=l+1|0,l)]=x,f[(u=_,_=u+1|0,u)]=b,f[(p=_,_=p+1|0,p)]=g,f[(c=_,_=c+1|0,c)]=b,f[(h=_,_=h+1|0,h)]=x}for(this.faces.clear(),d=0;d!==f.length;++d){var w=f[d];this.faces.add_11rb$(w)}},Nk.prototype.subdivide_za3lpa$=function(t){var i;if(t<=8)i=t;else{var n=DE.Log,r=$k.WARN,o=e.getKClassFromExpression(this).simpleName;r.level>=n.level.level&&n.printer(r,o,"clamping too large number of iterations for ico-sphere ("+t+") to 8"),i=8}for(var s=i,a=0;a<s;a++)this.subdivide()},Nk.prototype.generateUvs=function(){var t,e,i=U.PI,n=this.verts,r=w(j(n,10));for(e=n.iterator();e.hasNext();){var o=e.next(),s=r.add_11rb$,a=o.x,l=o.z,u=(A.atan2(a,l)+i)/(2*i),p=o.y;s.call(r,_t(o,new rr(u,A.acos(p)/i)))}var c=Fe(r);for(this.uvVerts=c,t=qe(R(this.faces),3).iterator();t.hasNext();)for(var h=t.next(),d=0;d<=2;d++){var f=h+d|0,_=h+(d+1|0)%3|0,m=h+(d+2|0)%3|0,$=c.get_za3lpa$(this.faces.get_za3lpa$(f)).second.x,y=c.get_za3lpa$(this.faces.get_za3lpa$(_)).second.x,v=c.get_za3lpa$(this.faces.get_za3lpa$(m)).second.x;if($-y>.5&&$-v>.5){var g=Pr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).first),b=cr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).second);b.x=b.x-1;var x=b;this.faces.set_wxm5ur$(f,c.size);var z=_t(g,x);c.add_11rb$(z)}else if(y-$>.5&&v-$>.5){var k=Pr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).first),S=cr(c.get_za3lpa$(this.faces.get_za3lpa$(f)).second);S.x=S.x+1;var C=S;this.faces.set_wxm5ur$(f,c.size);var N=_t(k,C);c.add_11rb$(N)}}},Nk.$metadata$={kind:$,simpleName:"IcoGenerator",interfaces:[]},Ck.prototype.icoSphere_mojs8w$=function(t){var e,i,n=new Nk;n.subdivide_za3lpa$(t.steps),n.generateUvs();var r=U.PI,o=this.geometry.numVertices;for(e=n.uvVerts.iterator();e.hasNext();){var s,a,l,u=e.next(),p=this.geometry;p.checkBufferSizes_za3lpa$(),s=p.vertexSizeF;for(var c=1;c<=s;c++)p.dataF.plusAssign_mx4ult$(0);a=p.vertexSizeI;for(var h=1;h<=a;h++)p.dataI.plusAssign_za3lpa$(0);p.vertexIt.index=(l=p.numVertices,p.numVertices=l+1|0,l);var d,f=p.vertexIt;f.color.set_czzhhz$(this.color),f.normal.set_czzhiu$(u.first).norm(),f.position.set_czzhiu$(u.first).scale_mx4ult$(t.radius).add_czzhiu$(t.center),f.texCoord.set_czzhjp$(t.texCoordGenerator(u.second.y*r,2*u.second.x*r)),this.transform.transform_w1lst9$(f.position),this.hasNormals&&0!==f.normal.sqrLength()&&(this.transform.transform_w1lst9$(f.normal,0),f.normal.norm()),null!=(d=this.vertexModFun)&&d(f),p.bounds.add_czzhiu$(p.vertexIt.position),p.hasChanged=!0}for(i=qe(R(n.faces),3).iterator();i.hasNext();){var _=i.next();this.geometry.addTriIndices_qt1dr2$(o+n.faces.get_za3lpa$(_)|0,o+n.faces.get_za3lpa$(1+_|0)|0,o+n.faces.get_za3lpa$(2+_|0)|0)}},Ck.prototype.rect_6h1xlk$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.rect_6h1xlk$",K((function(){var e=t.de.fabmax.kool.util.RectProps;return function(t){var i=new e;t(i),this.rect_e5k3t5$(i)}}))),Ck.prototype.rect_e5k3t5$=function(t){if(t.fixNegativeSize(),0===t.cornerRadius){var e,i,n,r=this.geometry;r.checkBufferSizes_za3lpa$(),e=r.vertexSizeF;for(var o=1;o<=e;o++)r.dataF.plusAssign_mx4ult$(0);i=r.vertexSizeI;for(var s=1;s<=i;s++)r.dataI.plusAssign_za3lpa$(0);r.vertexIt.index=(n=r.numVertices,r.numVertices=n+1|0,n);var a,l=r.vertexIt;l.color.set_czzhhz$(this.color),l.position.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),l.normal.set_czzhiu$(Er().Z_AXIS),l.texCoord.set_czzhjp$(t.texCoordLowerLeft),this.transform.transform_w1lst9$(l.position),this.hasNormals&&0!==l.normal.sqrLength()&&(this.transform.transform_w1lst9$(l.normal,0),l.normal.norm()),null!=(a=this.vertexModFun)&&a(l),r.bounds.add_czzhiu$(r.vertexIt.position),r.hasChanged=!0;var u,p,c,h=r.numVertices-1|0,d=this.geometry;d.checkBufferSizes_za3lpa$(),u=d.vertexSizeF;for(var f=1;f<=u;f++)d.dataF.plusAssign_mx4ult$(0);p=d.vertexSizeI;for(var _=1;_<=p;_++)d.dataI.plusAssign_za3lpa$(0);d.vertexIt.index=(c=d.numVertices,d.numVertices=c+1|0,c);var m,$=d.vertexIt;$.color.set_czzhhz$(this.color),$.position.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),$.normal.set_czzhiu$(Er().Z_AXIS),$.texCoord.set_czzhjp$(t.texCoordLowerRight),this.transform.transform_w1lst9$($.position),this.hasNormals&&0!==$.normal.sqrLength()&&(this.transform.transform_w1lst9$($.normal,0),$.normal.norm()),null!=(m=this.vertexModFun)&&m($),d.bounds.add_czzhiu$(d.vertexIt.position),d.hasChanged=!0;var y,v,g,b=d.numVertices-1|0,x=this.geometry;x.checkBufferSizes_za3lpa$(),y=x.vertexSizeF;for(var w=1;w<=y;w++)x.dataF.plusAssign_mx4ult$(0);v=x.vertexSizeI;for(var z=1;z<=v;z++)x.dataI.plusAssign_za3lpa$(0);x.vertexIt.index=(g=x.numVertices,x.numVertices=g+1|0,g);var k,S=x.vertexIt;S.color.set_czzhhz$(this.color),S.position.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),S.normal.set_czzhiu$(Er().Z_AXIS),S.texCoord.set_czzhjp$(t.texCoordUpperRight),this.transform.transform_w1lst9$(S.position),this.hasNormals&&0!==S.normal.sqrLength()&&(this.transform.transform_w1lst9$(S.normal,0),S.normal.norm()),null!=(k=this.vertexModFun)&&k(S),x.bounds.add_czzhiu$(x.vertexIt.position),x.hasChanged=!0;var C,N,E,T=x.numVertices-1|0,P=this.geometry;P.checkBufferSizes_za3lpa$(),C=P.vertexSizeF;for(var O=1;O<=C;O++)P.dataF.plusAssign_mx4ult$(0);N=P.vertexSizeI;for(var M=1;M<=N;M++)P.dataI.plusAssign_za3lpa$(0);P.vertexIt.index=(E=P.numVertices,P.numVertices=E+1|0,E);var j,A=P.vertexIt;A.color.set_czzhhz$(this.color),A.position.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),A.normal.set_czzhiu$(Er().Z_AXIS),A.texCoord.set_czzhjp$(t.texCoordUpperLeft),this.transform.transform_w1lst9$(A.position),this.hasNormals&&0!==A.normal.sqrLength()&&(this.transform.transform_w1lst9$(A.normal,0),A.normal.norm()),null!=(j=this.vertexModFun)&&j(A),P.bounds.add_czzhiu$(P.vertexIt.position),P.hasChanged=!0;var I=P.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(h,b,T),this.geometry.addTriIndices_qt1dr2$(h,T,I)}else{var R=t.origin.x,L=t.origin.y,D=t.origin.z,q=t.size.x,F=t.size.y,B=R+t.cornerRadius,U=L+t.cornerRadius,V=q-2*t.cornerRadius,G=F-2*t.cornerRadius,H=Er().Z_AXIS,W=(t.texCoordUpperRight.x-t.texCoordUpperLeft.x)*t.cornerRadius/q,X=(t.texCoordUpperRight.y-t.texCoordLowerRight.y)*t.cornerRadius/F,K=Mr(),Y=pr();if(G>0){var Z=this.vertex_n440gp$(K.set_y2kzbl$(R,U,D),H,Y.set_dleff0$(0,X).add_czzhjp$(t.texCoordLowerLeft)),J=this.vertex_n440gp$(K.set_y2kzbl$(R+q,U,D),H,Y.set_dleff0$(0,X).add_czzhjp$(t.texCoordLowerRight)),Q=this.vertex_n440gp$(K.set_y2kzbl$(R+q,U+G,D),H,Y.set_dleff0$(0,-X).add_czzhjp$(t.texCoordUpperRight)),tt=this.vertex_n440gp$(K.set_y2kzbl$(R,U+G,D),H,Y.set_dleff0$(0,-X).add_czzhjp$(t.texCoordUpperLeft));this.geometry.addTriIndices_qt1dr2$(Z,J,Q),this.geometry.addTriIndices_qt1dr2$(Z,Q,tt)}if(V>0){var et=this.vertex_n440gp$(K.set_y2kzbl$(B,L,D),H,Y.set_dleff0$(W,0).add_czzhjp$(t.texCoordLowerLeft)),it=this.vertex_n440gp$(K.set_y2kzbl$(B+V,L,D),H,Y.set_dleff0$(-W,0).add_czzhjp$(t.texCoordLowerRight)),nt=this.vertex_n440gp$(K.set_y2kzbl$(B+V,U,D),H,Y.set_dleff0$(-W,X).add_czzhjp$(t.texCoordLowerRight)),rt=this.vertex_n440gp$(K.set_y2kzbl$(B,U,D),H,Y.set_dleff0$(W,X).add_czzhjp$(t.texCoordLowerLeft));this.geometry.addTriIndices_qt1dr2$(et,it,nt),this.geometry.addTriIndices_qt1dr2$(et,nt,rt),et=this.vertex_n440gp$(K.set_y2kzbl$(B,U+G,D),H,Y.set_dleff0$(W,-X).add_czzhjp$(t.texCoordUpperLeft)),it=this.vertex_n440gp$(K.set_y2kzbl$(B+V,U+G,D),H,Y.set_dleff0$(-W,-X).add_czzhjp$(t.texCoordUpperRight)),nt=this.vertex_n440gp$(K.set_y2kzbl$(B+V,L+F,D),H,Y.set_dleff0$(-W,0).add_czzhjp$(t.texCoordUpperRight)),rt=this.vertex_n440gp$(K.set_y2kzbl$(B,L+F,D),H,Y.set_dleff0$(W,0).add_czzhjp$(t.texCoordUpperLeft)),this.geometry.addTriIndices_qt1dr2$(et,it,nt),this.geometry.addTriIndices_qt1dr2$(et,nt,rt)}var ot=new Ek;ot.center.set_y2kzbl$(B+V,U+G,D),ot.startDeg=0,ot.sweepDeg=90,ot.radius=t.cornerRadius,ot.steps=t.cornerSteps,ot.uvCenter.set_dleff0$(-W,-X).add_czzhjp$(t.texCoordUpperRight),ot.uvRadius=W,this.circle_59f34t$(ot);var st=new Ek;st.center.set_y2kzbl$(B,U+G,D),st.startDeg=90,st.sweepDeg=90,st.radius=t.cornerRadius,st.steps=t.cornerSteps,st.uvCenter.set_dleff0$(W,-X).add_czzhjp$(t.texCoordUpperLeft),st.uvRadius=W,this.circle_59f34t$(st);var at=new Ek;at.center.set_y2kzbl$(B,U,D),at.startDeg=180,at.sweepDeg=90,at.radius=t.cornerRadius,at.steps=t.cornerSteps,at.uvCenter.set_dleff0$(W,X).add_czzhjp$(t.texCoordLowerLeft),at.uvRadius=W,this.circle_59f34t$(at);var lt=new Ek;lt.center.set_y2kzbl$(B+V,U,D),lt.startDeg=270,lt.sweepDeg=90,lt.radius=t.cornerRadius,lt.steps=t.cornerSteps,lt.uvCenter.set_dleff0$(-W,X).add_czzhjp$(t.texCoordLowerRight),lt.uvRadius=W,this.circle_59f34t$(lt)}},Ck.prototype.line_uy9yj5$=function(t,e,i){this.line_s2l86p$(t.x,t.y,e.x,e.y,i)},Ck.prototype.line_s2l86p$=function(t,e,i,n,r){var o,s,a,l=i-t,u=n-e,p=l*l+u*u,c=A.sqrt(p),h=.25*r*l/c,d=.25*r*u/c,f=(l+=h+h)/(c+=.5*r)*r/2,_=(u+=d+d)/c*r/2,m=t-h+_,$=e-d-f,y=i+h+_,v=n+d-f,g=i+h-_,b=n+d+f,x=t-h-_,w=e-d+f,z=this.geometry;z.checkBufferSizes_za3lpa$(),o=z.vertexSizeF;for(var k=1;k<=o;k++)z.dataF.plusAssign_mx4ult$(0);s=z.vertexSizeI;for(var S=1;S<=s;S++)z.dataI.plusAssign_za3lpa$(0);z.vertexIt.index=(a=z.numVertices,z.numVertices=a+1|0,a);var C,N=z.vertexIt;N.color.set_czzhhz$(this.color),N.position.set_y2kzbl$(m,$,0),N.normal.set_czzhiu$(Er().Z_AXIS),this.transform.transform_w1lst9$(N.position),this.hasNormals&&0!==N.normal.sqrLength()&&(this.transform.transform_w1lst9$(N.normal,0),N.normal.norm()),null!=(C=this.vertexModFun)&&C(N),z.bounds.add_czzhiu$(z.vertexIt.position),z.hasChanged=!0;var E,T,P,O=z.numVertices-1|0,M=this.geometry;M.checkBufferSizes_za3lpa$(),E=M.vertexSizeF;for(var j=1;j<=E;j++)M.dataF.plusAssign_mx4ult$(0);T=M.vertexSizeI;for(var I=1;I<=T;I++)M.dataI.plusAssign_za3lpa$(0);M.vertexIt.index=(P=M.numVertices,M.numVertices=P+1|0,P);var R,L=M.vertexIt;L.color.set_czzhhz$(this.color),L.position.set_y2kzbl$(y,v,0),L.normal.set_czzhiu$(Er().Z_AXIS),this.transform.transform_w1lst9$(L.position),this.hasNormals&&0!==L.normal.sqrLength()&&(this.transform.transform_w1lst9$(L.normal,0),L.normal.norm()),null!=(R=this.vertexModFun)&&R(L),M.bounds.add_czzhiu$(M.vertexIt.position),M.hasChanged=!0;var D,q,F,B=M.numVertices-1|0,U=this.geometry;U.checkBufferSizes_za3lpa$(),D=U.vertexSizeF;for(var V=1;V<=D;V++)U.dataF.plusAssign_mx4ult$(0);q=U.vertexSizeI;for(var G=1;G<=q;G++)U.dataI.plusAssign_za3lpa$(0);U.vertexIt.index=(F=U.numVertices,U.numVertices=F+1|0,F);var H,W=U.vertexIt;W.color.set_czzhhz$(this.color),W.position.set_y2kzbl$(g,b,0),W.normal.set_czzhiu$(Er().Z_AXIS),this.transform.transform_w1lst9$(W.position),this.hasNormals&&0!==W.normal.sqrLength()&&(this.transform.transform_w1lst9$(W.normal,0),W.normal.norm()),null!=(H=this.vertexModFun)&&H(W),U.bounds.add_czzhiu$(U.vertexIt.position),U.hasChanged=!0;var X,K,Y,Z=U.numVertices-1|0,J=this.geometry;J.checkBufferSizes_za3lpa$(),X=J.vertexSizeF;for(var Q=1;Q<=X;Q++)J.dataF.plusAssign_mx4ult$(0);K=J.vertexSizeI;for(var tt=1;tt<=K;tt++)J.dataI.plusAssign_za3lpa$(0);J.vertexIt.index=(Y=J.numVertices,J.numVertices=Y+1|0,Y);var et,it=J.vertexIt;it.color.set_czzhhz$(this.color),it.position.set_y2kzbl$(x,w,0),it.normal.set_czzhiu$(Er().Z_AXIS),this.transform.transform_w1lst9$(it.position),this.hasNormals&&0!==it.normal.sqrLength()&&(this.transform.transform_w1lst9$(it.normal,0),it.normal.norm()),null!=(et=this.vertexModFun)&&et(it),J.bounds.add_czzhiu$(J.vertexIt.position),J.hasChanged=!0;var nt=J.numVertices-1|0;this.geometry.addTriIndices_qt1dr2$(O,B,Z),this.geometry.addTriIndices_qt1dr2$(O,Z,nt)},Ck.prototype.lineArc_b3rrsf$=function(t,e,i,n,r,o,s){void 0===s&&(s=3);for(var a=B(at(A.abs(r)/s)),l=A.max(1,a),u=r/l,p=n*EE.DEG_2_RAD,c=u*EE.DEG_2_RAD,h=0;h<l;h++){var d=p+c*h,f=d+c,_=t+A.cos(d)*i,m=e+A.sin(d)*i,$=t+A.cos(f)*i,y=e+A.sin(f)*i;this.line_s2l86p$(_,m,$,y,o)}},Ck.prototype.cube_xdlx95$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.cube_xdlx95$",K((function(){var e=t.de.fabmax.kool.util.CubeProps;return function(t){var i=new e;t(i),this.cube_lhbb6w$(i)}}))),Ck.prototype.cube_lhbb6w$=function(t){var e=Mr();t.fixNegativeSize();var i=t.frontColor,n=this.color;null!=i&&(this.color=i);var r=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(0,1)),o=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(1,1)),s=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(1,0)),a=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Z_AXIS,new rr(0,0));this.geometry.addTriIndices_qt1dr2$(r,o,s),this.geometry.addTriIndices_qt1dr2$(r,s,a),this.color=n;var l=t.rightColor,u=this.color;null!=l&&(this.color=l);var p=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().X_AXIS,new rr(1,1)),c=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().X_AXIS,new rr(1,0)),h=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().X_AXIS,new rr(0,0)),d=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),Er().X_AXIS,new rr(0,1));this.geometry.addTriIndices_qt1dr2$(p,c,h),this.geometry.addTriIndices_qt1dr2$(p,h,d),this.color=u;var f=t.backColor,_=this.color;null!=f&&(this.color=f);var m=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().NEG_Z_AXIS,new rr(1,0)),$=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().NEG_Z_AXIS,new rr(0,0)),y=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().NEG_Z_AXIS,new rr(0,1)),v=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().NEG_Z_AXIS,new rr(1,1));this.geometry.addTriIndices_qt1dr2$(m,$,y),this.geometry.addTriIndices_qt1dr2$(m,y,v),this.color=_;var g=t.leftColor,b=this.color;null!=g&&(this.color=g);var x=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),Er().NEG_X_AXIS,new rr(1,1)),w=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().NEG_X_AXIS,new rr(1,0)),z=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().NEG_X_AXIS,new rr(0,0)),k=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().NEG_X_AXIS,new rr(0,1));this.geometry.addTriIndices_qt1dr2$(x,w,z),this.geometry.addTriIndices_qt1dr2$(x,z,k),this.color=b;var S=t.topColor,C=this.color;null!=S&&(this.color=S);var N=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Y_AXIS,new rr(0,1)),E=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z+t.size.z),Er().Y_AXIS,new rr(1,1)),T=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y+t.size.y,t.origin.z),Er().Y_AXIS,new rr(1,0)),P=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y+t.size.y,t.origin.z),Er().Y_AXIS,new rr(0,0));this.geometry.addTriIndices_qt1dr2$(N,E,T),this.geometry.addTriIndices_qt1dr2$(N,T,P),this.color=C;var O=t.bottomColor,M=this.color;null!=O&&(this.color=O);var j=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z),Er().NEG_Y_AXIS,new rr(0,1)),A=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z),Er().NEG_Y_AXIS,new rr(1,1)),I=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x+t.size.x,t.origin.y,t.origin.z+t.size.z),Er().NEG_Y_AXIS,new rr(1,0)),R=this.vertex_n440gp$(e.set_y2kzbl$(t.origin.x,t.origin.y,t.origin.z+t.size.z),Er().NEG_Y_AXIS,new rr(0,0));this.geometry.addTriIndices_qt1dr2$(j,A,I),this.geometry.addTriIndices_qt1dr2$(j,I,R),this.color=M},Ck.prototype.cylinder_z0gg86$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.cylinder_z0gg86$",K((function(){var e=t.de.fabmax.kool.util.CylinderProps;return function(t){var i=new e;t(i),this.cylinder_tnt2h$(i)}}))),Ck.prototype.cylinder_tnt2h$=function(t){var e,i=Mr();if(t.fixNegativeSize(),t.bottomFill){this.transform.push(),this.translate_czzhiu$(t.origin),this.rotate_ad55pp$(90,Er().X_AXIS);var n=new Ek;n.steps=t.steps,n.radius=t.bottomRadius,this.circle_59f34t$(n),this.transform.pop()}if(t.topFill){this.transform.push(),this.translate_y2kzbl$(t.origin.x,t.origin.y+t.height,t.origin.z),this.rotate_ad55pp$(-90,Er().X_AXIS);var r=new Ek;r.steps=t.steps,r.radius=t.topRadius,this.circle_59f34t$(r),this.transform.pop()}var o=t.bottomRadius-t.topRadius,s=o*o+t.height*t.height,a=o/A.sqrt(s),l=90-A.acos(a)*EE.RAD_2_DEG,u=0,p=0;e=t.steps;for(var c=0;c<=e;c++){var h=c*U.PI*2/t.steps,d=A.cos(h),f=c*U.PI*2/t.steps,_=A.sin(f),m=t.origin.x+t.bottomRadius*d,$=t.origin.z+t.bottomRadius*_,y=t.origin.x+t.topRadius*d,v=t.origin.z+t.topRadius*_;i.set_y2kzbl$(d,0,_).rotate_7b5o5w$(l,_,0,d);var g,b,x,w=this.geometry;w.checkBufferSizes_za3lpa$(),g=w.vertexSizeF;for(var z=1;z<=g;z++)w.dataF.plusAssign_mx4ult$(0);b=w.vertexSizeI;for(var k=1;k<=b;k++)w.dataI.plusAssign_za3lpa$(0);w.vertexIt.index=(x=w.numVertices,w.numVertices=x+1|0,x);var S,C=w.vertexIt;C.color.set_czzhhz$(this.color),C.position.set_y2kzbl$(m,t.origin.y,$),C.normal.set_czzhiu$(i),this.transform.transform_w1lst9$(C.position),this.hasNormals&&0!==C.normal.sqrLength()&&(this.transform.transform_w1lst9$(C.normal,0),C.normal.norm()),null!=(S=this.vertexModFun)&&S(C),w.bounds.add_czzhiu$(w.vertexIt.position),w.hasChanged=!0;var N,E,T,P=w.numVertices-1|0,O=this.geometry;O.checkBufferSizes_za3lpa$(),N=O.vertexSizeF;for(var M=1;M<=N;M++)O.dataF.plusAssign_mx4ult$(0);E=O.vertexSizeI;for(var j=1;j<=E;j++)O.dataI.plusAssign_za3lpa$(0);O.vertexIt.index=(T=O.numVertices,O.numVertices=T+1|0,T);var I,R=O.vertexIt;R.color.set_czzhhz$(this.color),R.position.set_y2kzbl$(y,t.origin.y+t.height,v),R.normal.set_czzhiu$(i),this.transform.transform_w1lst9$(R.position),this.hasNormals&&0!==R.normal.sqrLength()&&(this.transform.transform_w1lst9$(R.normal,0),R.normal.norm()),null!=(I=this.vertexModFun)&&I(R),O.bounds.add_czzhiu$(O.vertexIt.position),O.hasChanged=!0;var L=O.numVertices-1|0;c>0&&(this.geometry.addTriIndices_qt1dr2$(u,p,P),this.geometry.addTriIndices_qt1dr2$(p,L,P)),u=P,p=L}},Ck.prototype.grid_vs3byi$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.grid_vs3byi$",K((function(){var e=t.de.fabmax.kool.util.GridProps;return function(t){var i=new e;t(i),this.grid_gtbnl3$(i)}}))),Ck.prototype.grid_gtbnl3$=function(t){var i,n,r,o,s=Mr(),a=-t.sizeX/2,l=-t.sizeY/2,u=t.sizeX/t.stepsX,p=t.sizeY/t.stepsY,c=t.stepsX+1|0;t.xDir.cross_2gj7b4$(t.yDir,s).norm(),i=t.stepsY;for(var h=0;h<=i;h++){n=t.stepsX;for(var d=0;d<=n;d++){var f,_,m,$=a+d*u,y=l+h*p,v=t.heightFun(d,h),g=this.geometry;g.checkBufferSizes_za3lpa$(),f=g.vertexSizeF;for(var b=1;b<=f;b++)g.dataF.plusAssign_mx4ult$(0);_=g.vertexSizeI;for(var x=1;x<=_;x++)g.dataI.plusAssign_za3lpa$(0);g.vertexIt.index=(m=g.numVertices,g.numVertices=m+1|0,m);var w,z=g.vertexIt;z.color.set_czzhhz$(this.color),z.position.set_czzhiu$(t.center),z.position.x=z.position.x+(t.xDir.x*$+t.yDir.x*y+s.x*v),z.position.y=z.position.y+(t.xDir.y*$+t.yDir.y*y+s.y*v),z.position.z=z.position.z+(t.xDir.z*$+t.yDir.z*y+s.z*v),z.texCoord.set_dleff0$(d/t.stepsX,h/t.stepsY),this.transform.transform_w1lst9$(z.position),this.hasNormals&&0!==z.normal.sqrLength()&&(this.transform.transform_w1lst9$(z.normal,0),z.normal.norm()),null!=(w=this.vertexModFun)&&w(z),g.bounds.add_czzhiu$(g.vertexIt.position),g.hasChanged=!0;var k=g.numVertices-1|0;d>0&&h>0&&(d%2==h%2?(this.geometry.addTriIndices_qt1dr2$(k-c-1|0,k,k-1|0),this.geometry.addTriIndices_qt1dr2$(k-c|0,k,k-c-1|0)):(this.geometry.addTriIndices_qt1dr2$(k-c|0,k,k-1|0),this.geometry.addTriIndices_qt1dr2$(k-c|0,k-1|0,k-c-1|0)))}}var S=this.geometry.numIndices-(6*e.imul(t.stepsX,t.stepsY)|0)|0,C=Mr(),N=Mr(),E=this.geometry.get_za3lpa$(0),T=this.geometry.get_za3lpa$(0),P=this.geometry.get_za3lpa$(0);r=this.geometry.numIndices;for(var O=S;O<r;O+=3)E.index=this.geometry.indices.get_za3lpa$(O),T.index=this.geometry.indices.get_za3lpa$(O+1|0),P.index=this.geometry.indices.get_za3lpa$(O+2|0),T.position.subtract_2gj7b4$(E.position,C).norm(),P.position.subtract_2gj7b4$(E.position,N).norm(),C.cross_2gj7b4$(N,s).norm(),E.normal.add_czzhiu$(s),T.normal.add_czzhiu$(s),P.normal.add_czzhiu$(s);var M=this.geometry.numVertices-e.imul(t.stepsX+1|0,t.stepsY+1|0)|0;o=this.geometry.numVertices;for(var j=M;j<o;j++)E.index=j,E.normal.norm()},Ck.prototype.geometry_ejqx55$=function(t,e){var i;if(void 0===e&&(e=!1),t.primitiveType!==Qz())throw cn("Only triangle geometry can be added");var n,r=this.geometry.numVertices,o=this.color;n=t.numVertices;for(var s=0;s<n;s++){t.vertexIt.index=s;var a=t.vertexIt;e&&(this.color=a.color),this.vertex_n440gp$(a.position,a.normal,a.texCoord)}i=t.numIndices;for(var l=0;l<i;l++)this.geometry.addIndex_za3lpa$(r+t.indices.get_za3lpa$(l)|0);this.color=o},Ck.prototype.text_7d71kc$=X("kool-kool-core.de.fabmax.kool.util.MeshBuilder.text_7d71kc$",K((function(){var e=t.de.fabmax.kool.util.TextProps;return function(t,i,n){void 0===i&&(i=0);var r=new e(t);n(r),this.text_s8z339$(r,i)}}))),Ck.prototype.text_s8z339$=function(t,e){var i;if(void 0===e&&(e=0),this.transform.push(),0!==e){var n=e/t.font.charMap.fontProps.sizePts;this.scale_y2kzbl$(n,n,n)}this.translate_czzhiu$(t.origin);var r={v:0};for(i=Be(t.text);i.hasNext();){var o=O(i.next());10===o&&(this.translate_y2kzbl$(0,-t.font.lineSpace,0),r.v=0);var s=t.font.charMap.get_11rb$(E(o));if(null!=s){var a=new Ik;a.origin.set_y2kzbl$(r.v-s.xOffset,s.yBaseline-s.height,0),a.size.set_dleff0$(s.width,s.height),a.texCoordUpperLeft.set_czzhjp$(s.uvMin),a.texCoordUpperRight.set_dleff0$(s.uvMax.x,s.uvMin.y),a.texCoordLowerLeft.set_dleff0$(s.uvMin.x,s.uvMax.y),a.texCoordLowerRight.set_czzhjp$(s.uvMax),this.rect_e5k3t5$(a),r.v+=s.advance}}this.transform.pop()},Ck.$metadata$={kind:$,simpleName:"MeshBuilder",interfaces:[]},Ek.prototype.zeroTexCoords=function(){this.uvCenter.set_czzhjp$(ar().ZERO),this.uvRadius=0},Ek.prototype.fullTexCoords=function(){this.uvCenter.set_dleff0$(.5,.5),this.uvRadius=.5},Ek.$metadata$={kind:$,simpleName:"CircleProps",interfaces:[]},Pk.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Mk=null;function jk(){return null===Mk&&new Pk,Mk}function Ak(){var t;this.radius=1,this.steps=5,this.center=Mr(),this.uv_0=pr(),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)})}function Ik(){this.cornerRadius=0,this.cornerSteps=8,this.origin=Mr(),this.size=new ur(1,1),this.texCoordUpperLeft=pr(),this.texCoordUpperRight=pr(),this.texCoordLowerLeft=pr(),this.texCoordLowerRight=pr(),this.generateTexCoords_mx4ult$(1)}function Rk(){this.origin=Mr(),this.size=new Or(1,1,1),this.topColor=null,this.bottomColor=null,this.leftColor=null,this.rightColor=null,this.frontColor=null,this.backColor=null}function Lk(){this.bottomRadius=1,this.topRadius=1,this.steps=20,this.height=1,this.topFill=!0,this.bottomFill=!0,this.origin=Mr()}function Dk(t){this.font=t,this.text="",this.origin=Mr()}function qk(t,i){var n;Uk(),void 0===i&&(i=1e3),this.instanceAttributes=t,this.maxInstances=i,this.attributeOffsets=null,this.instanceSizeF=0,this.strideBytesF=0,this.usage=ik(),this.numInstances=0,this.dataF=null,this.hasChanged=!0;var r=0,o=z();for(n=this.instanceAttributes.iterator();n.hasNext();){var s=n.next();if(s.type.isInt)throw G("For now only float attributes are supported");var a=r;o.put_xwzc9p$(s,a),r=r+s.type.byteSize|0}this.attributeOffsets=o,this.instanceSizeF=r/4|0,this.strideBytesF=r,this.dataF=zE(e.imul(r,this.maxInstances))}function Fk(){Bk=this,this.MODEL_MAT=new ps("attrib_model_mat",us())}Tk.$metadata$={kind:$,simpleName:"GridProps",interfaces:[]},Ak.prototype.defaultTexCoordGenerator_0=function(t,e){return this.uv_0.set_dleff0$(e/(2*U.PI),t/U.PI)},Ak.prototype.icoDefaults=function(){var t;return this.radius=1,this.steps=2,this.center.set_czzhiu$(Er().ZERO),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)}),this},Ak.prototype.uvDefaults=function(){var t;return this.radius=1,this.steps=20,this.center.set_czzhiu$(Er().ZERO),this.texCoordGenerator=(t=this,function(e,i){return t.defaultTexCoordGenerator_0(e,i)}),this},Ak.$metadata$={kind:$,simpleName:"SphereProps",interfaces:[]},Object.defineProperty(Ik.prototype,"width",{configurable:!0,get:function(){return this.size.x},set:function(t){this.size.x=t}}),Object.defineProperty(Ik.prototype,"height",{configurable:!0,get:function(){return this.size.y},set:function(t){this.size.y=t}}),Ik.prototype.fixNegativeSize=function(){this.size.x<0&&(this.origin.x=this.origin.x+this.size.x,this.size.x=-this.size.x),this.size.y<0&&(this.origin.y=this.origin.y+this.size.y,this.size.y=-this.size.y)},Ik.prototype.zeroTexCoords=function(){this.generateTexCoords_mx4ult$(0)},Ik.prototype.generateTexCoords_mx4ult$=function(t){void 0===t&&(t=1),this.texCoordUpperLeft.set_dleff0$(0,0),this.texCoordUpperRight.set_dleff0$(t,0),this.texCoordLowerLeft.set_dleff0$(0,t),this.texCoordLowerRight.set_dleff0$(t,t)},Ik.prototype.mirrorTexCoordsX=function(){var t=this.texCoordUpperLeft.x,e=this.texCoordLowerLeft.x;this.texCoordUpperLeft.x=this.texCoordUpperRight.x,this.texCoordUpperRight.x=t,this.texCoordLowerLeft.x=this.texCoordLowerRight.x,this.texCoordLowerRight.x=e},Ik.prototype.mirrorTexCoordsY=function(){var t=this.texCoordUpperLeft.y,e=this.texCoordUpperRight.y;this.texCoordUpperLeft.y=this.texCoordLowerLeft.y,this.texCoordLowerLeft.y=t,this.texCoordUpperRight.y=this.texCoordLowerRight.y,this.texCoordLowerRight.y=e},Ik.$metadata$={kind:$,simpleName:"RectProps",interfaces:[]},Object.defineProperty(Rk.prototype,"width",{configurable:!0,get:function(){return this.size.x},set:function(t){this.size.x=t}}),Object.defineProperty(Rk.prototype,"height",{configurable:!0,get:function(){return this.size.y},set:function(t){this.size.y=t}}),Object.defineProperty(Rk.prototype,"depth",{configurable:!0,get:function(){return this.size.z},set:function(t){this.size.z=t}}),Rk.prototype.fixNegativeSize=function(){this.size.x<0&&(this.origin.x=this.origin.x+this.size.x,this.size.x=-this.size.x),this.size.y<0&&(this.origin.y=this.origin.y+this.size.y,this.size.y=-this.size.y),this.size.z<0&&(this.origin.z=this.origin.z+this.size.z,this.size.z=-this.size.z)},Rk.prototype.centered=function(){this.origin.x=this.origin.x-this.size.x/2,this.origin.y=this.origin.y-this.size.y/2,this.origin.z=this.origin.z-this.size.z/2},Rk.prototype.colored_6taknv$=function(t){void 0===t&&(t=!0),t?(this.frontColor=Oy().MD_RED.toLinear(),this.rightColor=Oy().MD_AMBER.toLinear(),this.backColor=Oy().MD_INDIGO.toLinear(),this.leftColor=Oy().MD_CYAN.toLinear(),this.topColor=Oy().MD_PURPLE.toLinear(),this.bottomColor=Oy().MD_GREEN.toLinear()):(this.frontColor=Oy().MD_RED,this.rightColor=Oy().MD_AMBER,this.backColor=Oy().MD_INDIGO,this.leftColor=Oy().MD_CYAN,this.topColor=Oy().MD_PURPLE,this.bottomColor=Oy().MD_GREEN)},Rk.$metadata$={kind:$,simpleName:"CubeProps",interfaces:[]},Lk.prototype.fixNegativeSize=function(){this.height<0&&(this.origin.y=this.origin.y+this.height,this.height=-this.height)},Lk.$metadata$={kind:$,simpleName:"CylinderProps",interfaces:[]},Dk.$metadata$={kind:$,simpleName:"TextProps",interfaces:[]},qk.prototype.checkBufferSize_za3lpa$=function(t){if(void 0===t&&(t=1),(this.numInstances+t|0)>this.maxInstances)throw cn("Maximum number of instances exceeded, create with increased maxInstances")},qk.prototype.addInstance_u9cxs7$=X("kool-kool-core.de.fabmax.kool.util.MeshInstanceList.addInstance_u9cxs7$",K((function(){var t=e.kotlin.IllegalStateException_init_pdl1vj$;return function(e){this.checkBufferSize_za3lpa$();var i=this.dataF.position;e(this.dataF);var n=this.dataF.position-i|0;if(n!==this.instanceSizeF)throw t("Expected data to grow by "+this.instanceSizeF+" elements, instead it grew by "+n);this.numInstances=this.numInstances+1|0,this.hasChanged=!0}}))),qk.prototype.clear=function(){this.numInstances=0,this.dataF.position=0,this.dataF.limit=this.dataF.capacity,this.hasChanged=!0},Fk.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Bk=null;function Uk(){return null===Bk&&new Fk,Bk}function Vk(t,e){Wk(),this.maxSize_tysx8i$_0=t,this.factory_vv2li5$_0=e,this.recyclingStack_cbi09h$_0=M()}function Gk(){Hk=this,this.DEFAULT_MAX_SIZE=1e4}qk.$metadata$={kind:$,simpleName:"MeshInstanceList",interfaces:[]},Vk.prototype.get=function(){return this.recyclingStack_cbi09h$_0.isEmpty()?this.factory_vv2li5$_0():this.recyclingStack_cbi09h$_0.removeAt_za3lpa$(xt(this.recyclingStack_cbi09h$_0))},Vk.prototype.recycle_trkh7z$=function(t){if(this.recyclingStack_cbi09h$_0.size<this.maxSize_tysx8i$_0)this.recyclingStack_cbi09h$_0.add_11rb$(t);else{var i=DE.Log,n=$k.DEBUG,r=e.getKClassFromExpression(this).simpleName;n.level>=i.level.level&&i.printer(n,r,"Discarding recycled object "+e.getKClassFromExpression(t)+", stack is full: "+this.recyclingStack_cbi09h$_0.size)}return this},Gk.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var Hk=null;function Wk(){return null===Hk&&new Gk,Hk}function Xk(t,e){return e=e||Object.create(Vk.prototype),Vk.call(e,1e4,t),e}function Kk(t){Xk(t,this),this.liveObjects_0=M()}function Yk(){this.tStart_0=0,this.reset()}function Zk(){sS=this}function Jk(t,e,i){this.vertices=t,this.indices=e,this.normal=i}function Qk(t,i){this.outerRing=null,this.innerRings=M(),this.verts=M(),this.vertTree=null,this.edgeTree=null,this.vertInTriTrav=new rS,this.edgeIntersectionTrav=new oS,this.triangles=M(),this.triEdges=z();var n,r,o,s={v:0},a=w(j(t,10));for(n=t.iterator();n.hasNext();){var l,u=n.next();a.add_11rb$(new nS((l=s.v,s.v=l+1|0,l),u))}for(this.outerRing=new eS(a),r=i.iterator();r.hasNext();){var p,c=r.next(),h=this.innerRings,d=w(j(c,10));for(p=c.iterator();p.hasNext();){var f,_=p.next();d.add_11rb$(new nS((f=s.v,s.v=f+1|0,f),_))}var m=new eS(d);h.add_11rb$(m)}for(wt(this.verts,this.outerRing.points),o=this.innerRings.iterator();o.hasNext();){var $=o.next();wt(this.verts,$.points)}var y,v,g,b=M();for(this.addRingEdges_0(b,this.outerRing),y=this.innerRings.iterator();y.hasNext();){var x=y.next();this.addRingEdges_0(b,x)}for(this.edgeTree=new yS(b,NS()),this.vertTree=new yS(this.verts,kS()),v=this.innerRings.iterator();v.hasNext();){var k=v.next();this.insertBridgeEdge_0(k)}for(g=this.verts.iterator();g.hasNext();){var S=g.next();this.updateIsEar_0(S)}for(var C=this.verts.size-2|0;C>0;){var N=this.nextEarTip_0();if(null==N){var E=DE.Log,T=$k.ERROR,P=e.getKClassFromExpression(this).simpleName;T.level>=E.level.level&&E.printer(T,P,"Triangulation failed: No more ear clipping candidates");break}this.clip_0(N),C=C-1|0}}function tS(t,i,n){this.v1=t,this.v2=i,this.v3=n,this.k1=e.Long.fromInt(this.v1.index).shiftLeft(32).or(e.Long.fromInt(this.v2.index)),this.k2=e.Long.fromInt(this.v2.index).shiftLeft(32).or(e.Long.fromInt(this.v3.index)),this.k3=e.Long.fromInt(this.v3.index).shiftLeft(32).or(e.Long.fromInt(this.v1.index)),this.a1=aS().interiorAngle_0(this.v3,this.v1,this.v2),this.a2=aS().interiorAngle_0(this.v1,this.v2,this.v3),this.a3=180-this.a1-this.a2;var r=this.a1,o=this.a2,s=this.a3,a=A.min(o,s);this.minA=A.min(r,a),this.longest=0,this.longestK=null;var l=this.v1.distance_czzhiu$(this.v2),u=this.v2.distance_czzhiu$(this.v3),p=this.v3.distance_czzhiu$(this.v1);l>u&&l>p?(this.longest=l,this.longestK=this.k1):u>l&&u>p?(this.longest=u,this.longestK=this.k2):(this.longest=p,this.longestK=this.k3)}function eS(t){this.points=null;var e,i=M();for(e=t.iterator();e.hasNext();){var n=e.next();(i.isEmpty()||n.distance_czzhiu$(F(i))>1e-4)&&i.add_11rb$(n)}F(i).distance_czzhiu$(q(i))<1e-4&&i.removeAt_za3lpa$(xt(i)),this.points=i}function iS(t,e){OS.call(this,t,e),t.nextEdge=this,e.prevEdge=this}function nS(t,e){Pr(e,this),this.index=t,this.interiorAngle=0,this.isEar=!1,this.isOpen=!0,this.prevEdge_gh04s7$_0=this.prevEdge_gh04s7$_0,this.nextEdge_hknyfd$_0=this.nextEdge_hknyfd$_0}function rS(){WS.call(this),this.v1_tcfd5c$_0=this.v1_tcfd5c$_0,this.v2_tcfd4h$_0=this.v2_tcfd4h$_0,this.v3_tcfd3m$_0=this.v3_tcfd3m$_0,this.min=pr(),this.max=pr(),this.result=M()}function oS(){WS.call(this),this.edge_ses85y$_0=this.edge_ses85y$_0,this.min=pr(),this.max=pr(),this.result=M()}Vk.$metadata$={kind:$,simpleName:"ObjectRecycler",interfaces:[]},Object.defineProperty(Kk.prototype,"size",{configurable:!0,get:function(){return this.liveObjects_0.size}}),Kk.prototype.get_za3lpa$=function(t){return this.liveObjects_0.get_za3lpa$(t)},Kk.prototype.get=function(){var t=Vk.prototype.get.call(this);return this.liveObjects_0.add_11rb$(t),t},Kk.prototype.recycle_trkh7z$=function(t){return this.liveObjects_0.remove_11rb$(t),Vk.prototype.recycle_trkh7z$.call(this,t)},Kk.prototype.use_oh3mgy$=X("kool-kool-core.de.fabmax.kool.util.ObjectPool.use_oh3mgy$",(function(t){var e=this.get();t(e),this.recycle_trkh7z$(e)})),Kk.prototype.recycleAll=function(){var t;t=this.liveObjects_0;for(var e=0;e!==t.size;++e)Vk.prototype.recycle_trkh7z$.call(this,this.liveObjects_0.get_za3lpa$(e));this.liveObjects_0.clear()},Kk.$metadata$={kind:$,simpleName:"ObjectPool",interfaces:[Vk]},Yk.prototype.reset=function(){this.tStart_0=TC()},Yk.prototype.takeSecs=function(){return this.takeMs()/1e3},Yk.prototype.takeMs=function(){return TC()-this.tStart_0},Yk.$metadata$={kind:$,simpleName:"PerfTimer",interfaces:[]},Zk.prototype.fillPolygon_3v8xej$=function(t,e){void 0===e&&(e=Nt());var i=this.computeNormal_uqk38n$(t),n=this.projectXy_gpxhmj$(t,i);this.xyArea_uqk38n$(n)<0&&(i.scale_mx4ult$(-1),n=this.projectXy_gpxhmj$(t,i));var r,o=w(j(e,10));for(r=e.iterator();r.hasNext();){var s=r.next();o.add_11rb$(this.projectXy_gpxhmj$(s,i))}var a,l=new Qk(n,o),u=M();for(wt(u,t),a=e.iterator();a.hasNext();){var p=a.next();wt(u,p)}var c,h=M();for(c=l.triangles.iterator();c.hasNext();){var d=c.next(),f=d.v1.index;h.add_11rb$(f);var _=d.v2.index;h.add_11rb$(_);var m=d.v3.index;h.add_11rb$(m)}return new Jk(Ge(u),Ue(h),i)},Zk.prototype.computeNormal_uqk38n$=function(t){var e,i,n=b([t.get_za3lpa$(0)]);for(i=t.iterator();i.hasNext();){var r,o=i.next(),s=o.distance_czzhiu$(F(n));r=EE.FUZZY_EQ_F,A.abs(s)<=r||n.add_11rb$(o)}for(var a=Ar(n.get_za3lpa$(1)).subtract_czzhiu$(n.get_za3lpa$(0)).norm(),l=Ar(n.get_za3lpa$(2)).subtract_czzhiu$(n.get_za3lpa$(1)).norm(),u=2;;){var p=l.times_czzhiu$(a);if(!(A.abs(p)>.8&&u<n.size))break;l.set_czzhiu$(n.get_za3lpa$((u+1|0)%n.size)).subtract_czzhiu$(n.get_za3lpa$((e=u,u=e+1|0,e))).norm()}return a.cross_2gj7b4$(l,Mr())},Zk.prototype.projectXy_gpxhmj$=function(t,e){var i=e.times_czzhiu$(Er().X_AXIS),n=A.abs(i)<.7?Ar(Er().X_AXIS):Ar(Er().Z_AXIS),r=e.cross_2gj7b4$(n,Mr()).norm();r.cross_2gj7b4$(e,n).norm();var o,s=w(j(t,10));for(o=t.iterator();o.hasNext();){var a=o.next();s.add_11rb$(new Sr(a.times_czzhiu$(n),a.times_czzhiu$(r),0))}return s},Zk.prototype.xyArea_uqk38n$=function(t){for(var e=0,i=0;i!==t.size;++i){var n=t.get_za3lpa$(i),r=t.get_za3lpa$((i+1|0)%t.size);e+=n.x*r.y-n.y*r.x}return.5*e},Zk.prototype.interiorAngle_0=function(t,e,i){var n=t.y-e.y,r=t.x-e.x,o=A.atan2(n,r),s=i.y-e.y,a=i.x-e.x,l=(o-A.atan2(s,a))*EE.RAD_2_DEG;return l<0?l+360:l},Object.defineProperty(Jk.prototype,"numTriangles",{configurable:!0,get:function(){return this.indices.length/3|0}}),Jk.$metadata$={kind:$,simpleName:"TriangulatedPolygon",interfaces:[]},Qk.prototype.addRingEdges_0=function(t,e){var i;i=e.points;for(var n=0;n!==i.size;++n){var r=new iS(e.points.get_za3lpa$(n),e.points.get_za3lpa$((n+1|0)%e.points.size));t.add_11rb$(r)}},Qk.prototype.insertBridgeEdge_0=function(t){var i,n=null;i=t.points;for(var r=0;r!==i.size;++r){var o;o=this.outerRing.points;for(var s=0;s!==o.size;++s){var a=new OS(t.points.get_za3lpa$(r),this.outerRing.points.get_za3lpa$(s));(null==n||a.length<n.length)&&this.noEdgeIntersect_0(a)&&(n=a)}}if(null!=n){var l=n.pt0,u=l.prevEdge.pt0,p=new nS(l.index,l);this.verts.add_11rb$(p);var c=n.pt1,h=c.nextEdge.pt1,d=new nS(c.index,c);this.verts.add_11rb$(d),new iS(u,p),new iS(d,h),new iS(c,l),new iS(p,d)}else{var f=DE.Log,_=$k.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"No suitable bridge edge for hole insertion")}},Qk.prototype.nextEarTip_0=function(){var t,e={v:null};for(t=this.verts.iterator();t.hasNext();){var i=t.next();i.isOpen&&i.isEar&&(null==e.v||x(e.v).interiorAngle>i.interiorAngle)&&(e.v=i)}return e.v},Qk.prototype.clip_0=function(t){t.isOpen=!1;var e=new tS(t.prevEdge.pt0,t,t.nextEdge.pt1);this.addTriangle_0(e);var i=new iS(t.prevEdge.pt0,t.nextEdge.pt1);this.updateIsEar_0(i.pt0),this.updateIsEar_0(i.pt1),e.minA<30&&this.trySwap_0(e)},Qk.prototype.addTriangle_0=function(t){this.triangles.add_11rb$(t);var e=this.triEdges,i=t.k1;e.put_xwzc9p$(i,t);var n=this.triEdges,r=t.k2;n.put_xwzc9p$(r,t);var o=this.triEdges,s=t.k3;o.put_xwzc9p$(s,t)},Qk.prototype.removeTriangle_0=function(t){this.triangles.remove_11rb$(t),this.triEdges.remove_11rb$(t.k1),this.triEdges.remove_11rb$(t.k2),this.triEdges.remove_11rb$(t.k3)},Qk.prototype.trySwap_0=function(t){var e=this.triEdges.get_11rb$(this.opp_0(t.longestK));if(null!=e){var i,n,r=e.containsIndex_za3lpa$(t.v1.index)?e.containsIndex_za3lpa$(t.v2.index)?At([t.v3,t.v1,e.oppVertex_vux9f0$(t.v1.index,t.v2.index),t.v2]):At([t.v2,t.v3,e.oppVertex_vux9f0$(t.v3.index,t.v1.index),t.v1]):At([t.v1,t.v2,e.oppVertex_vux9f0$(t.v2.index,t.v3.index),t.v3]);t.containsIndex_za3lpa$(r.get_za3lpa$(0).index)&&t.containsIndex_za3lpa$(r.get_za3lpa$(1).index)&&t.containsIndex_za3lpa$(r.get_za3lpa$(2).index)?(i=new tS(r.get_za3lpa$(0),r.get_za3lpa$(1),r.get_za3lpa$(3)),n=new tS(r.get_za3lpa$(3),r.get_za3lpa$(1),r.get_za3lpa$(2))):(i=new tS(r.get_za3lpa$(0),r.get_za3lpa$(1),r.get_za3lpa$(2)),n=new tS(r.get_za3lpa$(0),r.get_za3lpa$(2),r.get_za3lpa$(3)));var o=i.minA,s=n.minA,a=A.min(o,s),l=t.minA,u=e.minA;a>A.min(l,u)&&(this.removeTriangle_0(t),this.removeTriangle_0(e),this.addTriangle_0(i),this.addTriangle_0(n))}},Qk.prototype.opp_0=function(t){var e=t.shiftRight(32).and(Ve);return t.and(Ve).shiftLeft(32).or(e)},Qk.prototype.updateIsEar_0=function(t){var e;t.updateInteriorAngle(),e=!(t.interiorAngle>=180)&&this.noVertexInside_0(t.prevEdge.pt0,t,t.nextEdge.pt1),t.isEar=e},Qk.prototype.noVertexInside_0=function(t,e,i){return this.vertInTriTrav.setup_6vy1vz$(t,e,i).traverse_7efza$(this.vertTree),this.vertInTriTrav.result.isEmpty()},Qk.prototype.noEdgeIntersect_0=function(t){return this.edgeIntersectionTrav.setup_vktcv1$(t).traverse_7efza$(this.edgeTree),this.edgeIntersectionTrav.result.isEmpty()},Qk.$metadata$={kind:$,simpleName:"Triangulator",interfaces:[]},tS.prototype.oppVertex_vux9f0$=function(t,e){return this.v1.index!==t&&this.v1.index!==e?this.v1:this.v2.index!==t&&this.v2.index!==e?this.v2:this.v3},tS.prototype.containsIndex_za3lpa$=function(t){return this.v1.index===t||this.v2.index===t||this.v3.index===t},tS.$metadata$={kind:$,simpleName:"PolyTri",interfaces:[]},eS.$metadata$={kind:$,simpleName:"PolyRing",interfaces:[]},iS.$metadata$={kind:$,simpleName:"PolyEdge",interfaces:[OS]},Object.defineProperty(nS.prototype,"prevEdge",{configurable:!0,get:function(){return null==this.prevEdge_gh04s7$_0?ct("prevEdge"):this.prevEdge_gh04s7$_0},set:function(t){this.prevEdge_gh04s7$_0=t}}),Object.defineProperty(nS.prototype,"nextEdge",{configurable:!0,get:function(){return null==this.nextEdge_hknyfd$_0?ct("nextEdge"):this.nextEdge_hknyfd$_0},set:function(t){this.nextEdge_hknyfd$_0=t}}),nS.prototype.updateInteriorAngle=function(){this.interiorAngle=aS().interiorAngle_0(this.prevEdge.pt0,this,this.nextEdge.pt1)},nS.$metadata$={kind:$,simpleName:"PolyVertex",interfaces:[Sr]},Object.defineProperty(rS.prototype,"v1",{configurable:!0,get:function(){return null==this.v1_tcfd5c$_0?ct("v1"):this.v1_tcfd5c$_0},set:function(t){this.v1_tcfd5c$_0=t}}),Object.defineProperty(rS.prototype,"v2",{configurable:!0,get:function(){return null==this.v2_tcfd4h$_0?ct("v2"):this.v2_tcfd4h$_0},set:function(t){this.v2_tcfd4h$_0=t}}),Object.defineProperty(rS.prototype,"v3",{configurable:!0,get:function(){return null==this.v3_tcfd3m$_0?ct("v3"):this.v3_tcfd3m$_0},set:function(t){this.v3_tcfd3m$_0=t}}),rS.prototype.setup_6vy1vz$=function(t,e,i){this.v1=t,this.v2=e,this.v3=i,this.result.clear();var n=this.min,r=t.x,o=e.x,s=i.x,a=A.min(o,s),l=A.min(r,a),u=t.y,p=e.y,c=i.y,h=A.min(p,c);n.set_dleff0$(l,A.min(u,h));var d=this.max,f=t.x,_=e.x,m=i.x,$=A.max(_,m),y=A.max(f,$),v=t.y,g=e.y,b=i.y,x=A.max(g,b);return d.set_dleff0$(y,A.max(v,x)),this},rS.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var r=e.children.get_za3lpa$(n),o=r.bounds;this.min.x<=o.max.x&&this.max.x>=o.min.x&&this.min.y<=o.max.y&&this.max.y>=o.min.y&&this.traverseNode_4w85ke$(t,r)}},rS.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s),l=a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y,u=a.index!==this.v1.index&&a.index!==this.v2.index&&a.index!==this.v3.index;l&&u&&this.isPointInTriangle_0(a,this.v1,this.v2,this.v3)&&this.result.add_11rb$(a)}},rS.prototype.isPointInTriangle_0=function(t,e,i,n){var r=this.pointEdgeSign_0(t,e,i),o=this.pointEdgeSign_0(t,i,n),s=this.pointEdgeSign_0(t,n,e);return!((r<0||o<0||s<0)&&(r>0||o>0||s>0))},rS.prototype.pointEdgeSign_0=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},rS.$metadata$={kind:$,simpleName:"VertsInTriTraverser",interfaces:[WS]},Object.defineProperty(oS.prototype,"edge",{configurable:!0,get:function(){return null==this.edge_ses85y$_0?ct("edge"):this.edge_ses85y$_0},set:function(t){this.edge_ses85y$_0=t}}),oS.prototype.setup_vktcv1$=function(t){this.edge=t,this.result.clear();var e=this.min,i=t.pt0.x,n=t.pt1.x,r=A.min(i,n),o=t.pt0.y,s=t.pt1.y;e.set_dleff0$(r,A.min(o,s));var a=this.max,l=t.pt0.x,u=t.pt1.x,p=A.max(l,u),c=t.pt0.y,h=t.pt1.y;return a.set_dleff0$(p,A.max(c,h)),this},oS.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var r=e.children.get_za3lpa$(n),o=r.bounds;this.min.x<=o.max.x&&this.max.x>=o.min.x&&this.min.y<=o.max.y&&this.max.y>=o.min.y&&this.traverseNode_4w85ke$(t,r)}},oS.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s),l=a.pt0.x,u=a.pt1.x,p=A.min(l,u),c=a.pt0.y,h=a.pt1.y,d=A.min(c,h),f=a.pt0.x,_=a.pt1.x,m=A.max(f,_),$=a.pt0.y,y=a.pt1.y,v=A.max($,y);this.min.x<=m&&this.max.x>=p&&this.min.y<=v&&this.max.y>=d&&this.isEdgeIntersect_0(this.edge.pt0,this.edge.pt1,a.pt0,a.pt1)&&this.result.add_11rb$(a)}},oS.prototype.isEdgeIntersect_0=function(t,e,i,n){var r,o=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(r=EE.FUZZY_EQ_F,!(A.abs(o)<=r)){var s=t.x*e.y-t.y*e.x,a=i.x*n.y-i.y*n.x,l=(s*(i.x-n.x)-a*(t.x-e.x))/o,u=(s*(i.y-n.y)-a*(t.y-e.y))/o,p=l-t.x,c=u-t.y,h=e.x-t.x,d=e.y-t.y,f=l-i.x,_=u-i.y,m=n.x-i.x,$=n.y-i.y;return p*p+c*c<h*h+d*d&&f*f+_*_<m*m+$*$&&p*h+c*d>0&&f*m+_*$>0}return!1},oS.$metadata$={kind:$,simpleName:"EdgeIntersectTraverser",interfaces:[WS]},Zk.$metadata$={kind:y,simpleName:"PolyUtil",interfaces:[]};var sS=null;function aS(){return null===sS&&new Zk,sS}function lS(){}function uS(){this.shapes_h2hckg$_0=M()}function pS(){}function cS(t){pS.call(this),this.isClosed=t,this.positions_4d3v1q$_0=M(),this.normals=M(),this.texCoords=M(),this.color=null,this.prevIndices_0=M(),this.vertIndices_0=M()}function hS(){pS.call(this),this.shapes_tpeukb$_0=M()}function dS(){}function fS(t,e,i,n){void 0===i&&(i=2048),void 0===n&&(n=t);var r,o=n,a=new pa,l=i;a.name="SimpleShadowMap",a.setSize_vux9f0$(l,l),a.setDepthTexture_6taknv$(!0),a.clearColorTexture(),fs.call(this,o,new ua(a)),this.scene=t,this.lightIndex=e,this.lightViewProjMat=new bn,this.optimizeForDirectionalLight=!1,this.sceneCam=this.scene.camera,this.clipNear=1,this.clipFar=100,this.shadowBounds=null,this.nearSceneCamPlane_0=new nf,this.farSceneCamPlane_0=new nf,this.shadowCamBounds_0=new gy,this.tmpVec_0=Mr(),this.isUpdateDrawNode=!1,this.scene.addOffscreenPass_m1c2kf$(this),this.drawQueue.meshFilter=_S,this.onBeforeCollectDrawCommands.add_11rb$((r=this,function(t){if(r.lightIndex<r.scene.lighting.lights.size){var e=r.scene.lighting.lights.get_za3lpa$(r.lightIndex);r.setupCamera_0(e),r.camera.updateCamera_fd1mc0$(t,r.viewport),t.depthBiasMatrix.mul_u47j3u$(r.camera.viewProj,r.lightViewProjMat)}return s}))}function _S(t){return t.isCastingShadow}function mS(t,e,i,n,r,o){void 0===i&&(i=100),void 0===n&&(n=3),void 0===r&&(r=2048),void 0===o&&(o=t),this.lightIndex=e,this.maxRange=i,this.numCascades=n;var a,l=I(this.numCascades);a=l.length-1|0;for(var u=0;u<=a;u++){var p=A.pow(u,2),c=this.numCascades,h=p/A.pow(c,2),d=u+1|0,f=A.pow(d,2),_=this.numCascades,m=f/A.pow(_,2);l[u]=new $S(h,m)}this.mapRanges=l;var $,y,v=I(this.numCascades);$=v.length-1|0;for(var g=0;g<=$;g++){var b=new fS(t,this.lightIndex,r,o);b.optimizeForDirectionalLight=!0,v[g]=b}if(this.cascades=v,this.viewSpaceRanges=new Float32Array(this.numCascades),this.numCascades>8)throw cn("Too many shadow cascades: "+this.numCascades+" (maximum is 8)");this.cascades[0].onBeforeCollectDrawCommands.add_11rb$((y=this,function(t){var e;e=y.numCascades;for(var i=0;i<e;i++){var n=y.mapRanges[i].near*y.maxRange,r=y.mapRanges[i].far*y.maxRange,o=2*A.sqrt(r);y.cascades[i].clipNear=n,y.cascades[i].clipFar=r+o,y.viewSpaceRanges[i]=-r}return s}))}function $S(t,e){this.near=t,this.far=e}function yS(t,i,n){void 0===n&&(n=20),FS.call(this,i),this.root_7kvd7y$_0=null;for(var r,o=t.size,s=Kt("get",function(t,e){return t.get_za3lpa$(e)}.bind(null,t)),a=w(o),l=0;l<o;l++)a.add_11rb$(s(l));this.items_0=a,this.cmpX_0=(r=i,function(t,i){return e.compareTo(r.getMinX_trkh7z$(t),r.getMinX_trkh7z$(i))}),this.cmpY_0=function(t){return function(i,n){return e.compareTo(t.getMinY_trkh7z$(i),t.getMinY_trkh7z$(n))}}(i),this.cmpZ_0=function(t){return function(i,n){return e.compareTo(t.getMinZ_trkh7z$(i),t.getMinZ_trkh7z$(n))}}(i),this.root_7kvd7y$_0=new vS(this,R(t),0,n)}function vS(t,e,i,n){var r,o,s,a;this.$outer=t,BS.call(this,this.$outer,i),this.nodeRange_cforgo$_0=e,this.children_ay15fy$_0=M(),this.size_ugdyxc$_0=0;var l=Mr();this.size_ugdyxc$_0=this.nodeRange.last-this.nodeRange.first+1|0;var u=this.bounds;this.$outer;var p=u.isBatchUpdate;u.isBatchUpdate=!0;var c,h,d,f,_=this.$outer;h=(c=this.nodeRange).first,d=c.last,f=c.step;for(var m=h;m<=d;m+=f){var $=this.items.get_za3lpa$(m);u.add_czzhiu$(_.itemAdapter.getMin_hm1yd1$($,l)),u.add_czzhiu$(_.itemAdapter.getMax_hm1yd1$($,l))}if(u.isBatchUpdate=p,(this.nodeRange.last-this.nodeRange.first|0)>n){var y=this.$outer.cmpX_0;this.bounds.size.y>this.bounds.size.x&&this.bounds.size.y>this.bounds.size.z?y=this.$outer.cmpY_0:this.bounds.size.z>this.bounds.size.x&&this.bounds.size.z>this.bounds.size.y&&(y=this.$outer.cmpZ_0);var v=this.nodeRange.first+((this.nodeRange.last-this.nodeRange.first|0)/2|0)|0;Xn(this.$outer.items_0,this.nodeRange,v,y),this.children.add_11rb$(new vS(this.$outer,new Bt(this.nodeRange.first,v),i+1|0,n)),this.children.add_11rb$(new vS(this.$outer,new Bt(v+1|0,this.nodeRange.last),i+1|0,n))}else{o=(r=this.nodeRange).first,s=r.last,a=r.step;for(var g=o;g<=s;g+=a)this.$outer.itemAdapter.setNode_kvimhn$(this.items.get_za3lpa$(g),this)}}function gS(t,e){return void 0===e&&(e=10),new yS(t,PS(),e)}function bS(t,e){return void 0===e&&(e=10),new yS(t,NS(),e)}function xS(){}function wS(){zS=this}lS.$metadata$={kind:Y,simpleName:"ShapeContainer",interfaces:[]},Object.defineProperty(uS.prototype,"shapes",{configurable:!0,get:function(){return this.shapes_h2hckg$_0}}),uS.prototype.sample_l28n3f$=function(t,e,i){var n;for(n=this.shapes.iterator();n.hasNext();)n.next().sample_l28n3f$(t,e,i)},uS.prototype.fillTop_84rojv$=function(t){var e;for(e=this.shapes.iterator();e.hasNext();)e.next().fillTop_84rojv$(t)},uS.prototype.fillBottom_84rojv$=function(t){var e;for(e=this.shapes.iterator();e.hasNext();)e.next().fillBottom_84rojv$(t)},uS.$metadata$={kind:$,simpleName:"Profile",interfaces:[lS]},pS.$metadata$={kind:$,simpleName:"Shape",interfaces:[]},Object.defineProperty(cS.prototype,"positions",{configurable:!0,get:function(){return this.positions_4d3v1q$_0}}),Object.defineProperty(cS.prototype,"sampledVertIndices",{configurable:!0,get:function(){return this.vertIndices_0}}),Object.defineProperty(cS.prototype,"nVerts",{configurable:!0,get:function(){return this.positions.size}}),cS.prototype.getNormal_za3lpa$=function(t){return t<this.normals.size?this.normals.get_za3lpa$(t):Er().ZERO},cS.prototype.getTexCoord_za3lpa$=function(t){return t<this.texCoords.size?this.texCoords.get_za3lpa$(t):ar().ZERO},cS.prototype.xy_dleff0$=function(t,e){var i=this.positions,n=new Or(t,e,0);i.add_11rb$(n)},cS.prototype.xz_dleff0$=function(t,e){var i=this.positions,n=new Or(t,0,e);i.add_11rb$(n)},cS.prototype.uv_dleff0$=function(t,e){var i=this.texCoords,n=new ur(t,e);i.add_11rb$(n)},cS.prototype.normal_y2kzbl$=function(t,e,i){var n=this.normals,r=new Or(t,e,i);n.add_11rb$(r)},cS.prototype.setTexCoordsX_mx4ult$=function(t){var e;for(e=this.texCoords.iterator();e.hasNext();)e.next().x=t},cS.prototype.setTexCoordsY_mx4ult$=function(t){var e;for(e=this.texCoords.iterator();e.hasNext();)e.next().y=t},cS.prototype.sample_l28n3f$=function(t,e,i){var n,r,o;this.prevIndices_0.clear(),this.prevIndices_0.addAll_brywnq$(this.vertIndices_0),this.vertIndices_0.clear(),null!=(n=this.color)&&(t.color=n);var s=0;for(r=this.positions.iterator();r.hasNext();){var a=r.next(),l=tt((s=(o=s)+1|0,o)),u=this.vertIndices_0,p=t.vertex_n440gp$(a,this.getNormal_za3lpa$(l),this.getTexCoord_za3lpa$(l));u.add_11rb$(p)}e&&this.connect_xe2xvh$(t,this.prevIndices_0,i)},cS.prototype.connect_xe2xvh$=function(t,e,i){var n;if(!e.isEmpty()){n=e.size;for(var r=1;r<n;r++)i?(t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r),e.get_za3lpa$(r)),t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r))):(t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),e.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(r)),t.geometry.addTriIndices_qt1dr2$(e.get_za3lpa$(r-1|0),this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(r-1|0)));var o=this.isClosed;o&&(o=!this.prevIndices_0.isEmpty()),o&&(i?(t.geometry.addTriIndices_qt1dr2$(F(e),q(this.vertIndices_0),q(e)),t.geometry.addTriIndices_qt1dr2$(F(e),F(this.vertIndices_0),q(this.vertIndices_0))):(t.geometry.addTriIndices_qt1dr2$(F(e),q(e),q(this.vertIndices_0)),t.geometry.addTriIndices_qt1dr2$(F(e),q(this.vertIndices_0),F(this.vertIndices_0))))}},cS.prototype.fillTop_84rojv$=function(t){var e,i=aS().fillPolygon_3v8xej$(this.positions);for(e=qe(Z(i.indices),3).iterator();e.hasNext();){var n=e.next(),r=i.indices[n],o=i.indices[n+1|0],s=i.indices[n+2|0];t.geometry.addTriIndices_qt1dr2$(this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(o),this.vertIndices_0.get_za3lpa$(s))}},cS.prototype.fillBottom_84rojv$=function(t){var e,i=aS().fillPolygon_3v8xej$(this.positions);for(e=qe(Z(i.indices),3).iterator();e.hasNext();){var n=e.next(),r=i.indices[n],o=i.indices[n+1|0],s=i.indices[n+2|0];t.geometry.addTriIndices_qt1dr2$(this.vertIndices_0.get_za3lpa$(r),this.vertIndices_0.get_za3lpa$(s),this.vertIndices_0.get_za3lpa$(o))}},cS.$metadata$={kind:$,simpleName:"SimpleShape",interfaces:[pS]},Object.defineProperty(hS.prototype,"shapes",{configurable:!0,get:function(){return this.shapes_tpeukb$_0}}),Object.defineProperty(hS.prototype,"positions",{configurable:!0,get:function(){var t,e=this.shapes,i=M();for(t=e.iterator();t.hasNext();){var n=t.next().positions;wt(i,n)}return i}}),Object.defineProperty(hS.prototype,"sampledVertIndices",{configurable:!0,get:function(){var t,e=this.shapes,i=M();for(t=e.iterator();t.hasNext();){var n=t.next().sampledVertIndices;wt(i,n)}return i}}),hS.prototype.sample_l28n3f$=function(t,e,i){var n;for(n=this.shapes.iterator();n.hasNext();)n.next().sample_l28n3f$(t,e,i)},hS.prototype.fillTop_84rojv$=function(t){var e,i=this.sampledVertIndices,n=aS().fillPolygon_3v8xej$(this.positions);for(e=qe(Z(n.indices),3).iterator();e.hasNext();){var r=e.next(),o=n.indices[r],s=n.indices[r+1|0],a=n.indices[r+2|0];t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(o),i.get_za3lpa$(s),i.get_za3lpa$(a))}},hS.prototype.fillBottom_84rojv$=function(t){var e,i=this.sampledVertIndices,n=aS().fillPolygon_3v8xej$(this.positions);for(e=qe(Z(n.indices),3).iterator();e.hasNext();){var r=e.next(),o=n.indices[r],s=n.indices[r+1|0],a=n.indices[r+2|0];t.geometry.addTriIndices_qt1dr2$(i.get_za3lpa$(o),i.get_za3lpa$(a),i.get_za3lpa$(s))}},hS.$metadata$={kind:$,simpleName:"MultiShape",interfaces:[lS,pS]},dS.$metadata$={kind:Y,simpleName:"ShadowMap",interfaces:[]},Object.defineProperty(fS.prototype,"isShadowMapEnabled",{configurable:!0,get:function(){return this.isEnabled},set:function(t){this.isEnabled=t}}),fS.prototype.dispose_aemszp$=function(t){this.scene.removeOffscreenPass_m1c2kf$(this),fs.prototype.dispose_aemszp$.call(this,t)},fS.prototype.setupSampler_wl9pml$=function(t){null!=t&&(t.texture=this.depthTexture)},fS.prototype.setupCamera_0=function(t){switch(t.type.name){case"DIRECTIONAL":this.setupDirectionalLightCamera_0(t);break;case"SPOT":this.setupSpotLightCamera_0(t);break;case"POINT":throw new We}},fS.prototype.setupSpotLightCamera_0=function(t){var i=this.camera;e.isType(i,tf)||((i=new tf).projCorrectionMode=Jd(),this.camera=i),i.position.set_czzhiu$(t.position),i.lookAt.set_czzhiu$(t.position).add_czzhiu$(t.direction),i.fovY=t.spotAngle,i.clipNear=this.clipNear,i.clipFar=this.clipFar},fS.prototype.setupDirectionalLightCamera_0=function(t){var i=this.camera;e.isType(i,Qd)||((i=new Qd).projCorrectionMode=Jd(),this.camera=i),i.position.set_czzhiu$(Er().ZERO),i.lookAt.set_czzhiu$(t.direction);var n=this.shadowBounds;null!=n?(this.shadowCamBounds_0.clear(),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.min.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.min.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.max.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.min.x,n.max.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.min.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.min.y,n.max.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.max.y,n.min.z),1)),this.shadowCamBounds_0.add_czzhiu$(i.view.transform_w1lst9$(this.tmpVec_0.set_y2kzbl$(n.max.x,n.max.y,n.max.z),1))):(this.sceneCam.computeFrustumPlane_jwr40o$(this.clipNear,this.nearSceneCamPlane_0),this.sceneCam.computeFrustumPlane_jwr40o$(this.clipFar,this.farSceneCamPlane_0),this.transform_0(i.view,this.nearSceneCamPlane_0),this.transform_0(i.view,this.farSceneCamPlane_0),this.setPlanes_0(this.shadowCamBounds_0,this.nearSceneCamPlane_0,this.farSceneCamPlane_0)),i.left=this.shadowCamBounds_0.min.x,i.right=this.shadowCamBounds_0.max.x,i.bottom=this.shadowCamBounds_0.min.y,i.top=this.shadowCamBounds_0.max.y,i.near=-this.shadowCamBounds_0.max.z-20,i.far=-this.shadowCamBounds_0.min.z},fS.prototype.transform_0=function(t,e){t.transform_w1lst9$(e.upperLeft),t.transform_w1lst9$(e.upperRight),t.transform_w1lst9$(e.lowerLeft),t.transform_w1lst9$(e.lowerRight)},fS.prototype.setPlanes_0=function(t,e,i){var n=t.isBatchUpdate;t.isBatchUpdate=!0,t.clear(),t.add_czzhiu$(e.upperLeft),t.add_czzhiu$(e.upperRight),t.add_czzhiu$(e.lowerLeft),t.add_czzhiu$(e.lowerRight),t.add_czzhiu$(i.upperLeft),t.add_czzhiu$(i.upperRight),t.add_czzhiu$(i.lowerLeft),t.add_czzhiu$(i.lowerRight),t.isBatchUpdate=n},fS.$metadata$={kind:$,simpleName:"SimpleShadowMap",interfaces:[dS,fs]},Object.defineProperty(mS.prototype,"drawNode",{configurable:!0,get:function(){return this.cascades[0].drawNode},set:function(t){var e,i=this.cascades;for(e=0;e!==i.length;++e)i[e].drawNode=t}}),Object.defineProperty(mS.prototype,"isShadowMapEnabled",{configurable:!0,get:function(){return this.cascades[0].isEnabled},set:function(t){var e,i=this.cascades;for(e=0;e!==i.length;++e)i[e].isEnabled=t}}),mS.prototype.setMapRanges_8cqhcw$=function(t){var e,i=0,n=this.mapRanges.length;e=A.min(t.length,n);for(var r=0;r<e;r++)this.mapRanges[r].near=i,this.mapRanges[r].far=t[r],i=t[r]},mS.prototype.setupSampler_wl9pml$=function(t){if(null!=t){var e,i,n=this.cascades,r=0;for(e=0;e!==n.length;++e){var o=n[e];t.textures[(i=r,r=i+1|0,i)]=o.depthTexture}}},$S.prototype.toString=function(){return"["+this.near+".."+this.far+"]"},$S.$metadata$={kind:$,simpleName:"MapRange",interfaces:[]},mS.$metadata$={kind:$,simpleName:"CascadedShadowMap",interfaces:[dS]},Object.defineProperty(yS.prototype,"root",{configurable:!0,get:function(){return this.root_7kvd7y$_0}}),Object.defineProperty(yS.prototype,"size",{configurable:!0,get:function(){return this.items_0.size}}),yS.prototype.contains_11rb$=function(t){return this.root.contains_uargzz$(t)},yS.prototype.containsAll_brywnq$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next();if(!this.contains_11rb$(i))return!1}return!0},yS.prototype.isEmpty=function(){return this.items_0.isEmpty()},yS.prototype.iterator=function(){return this.items_0.iterator()},Object.defineProperty(vS.prototype,"nodeRange",{get:function(){return this.nodeRange_cforgo$_0}}),Object.defineProperty(vS.prototype,"children",{configurable:!0,get:function(){return this.children_ay15fy$_0}}),Object.defineProperty(vS.prototype,"size",{configurable:!0,get:function(){return this.size_ugdyxc$_0}}),Object.defineProperty(vS.prototype,"items",{configurable:!0,get:function(){return this.$outer.items_0}}),vS.prototype.contains_uargzz$=function(t){var e,i,n,r;if(this.isLeaf){i=(e=this.nodeRange).first,n=e.last,r=e.step;for(var o=i;o<=n;o+=r)if(Lt(this.items.get_za3lpa$(o),t))return!0;return!1}return this.children.get_za3lpa$(0).bounds.contains_y2kzbl$(this.$outer.itemAdapter.getMinX_trkh7z$(t),this.$outer.itemAdapter.getMinY_trkh7z$(t),this.$outer.itemAdapter.getMinZ_trkh7z$(t))?this.children.get_za3lpa$(0).contains_uargzz$(t):!!this.children.get_za3lpa$(1).bounds.contains_y2kzbl$(this.$outer.itemAdapter.getMinX_trkh7z$(t),this.$outer.itemAdapter.getMinY_trkh7z$(t),this.$outer.itemAdapter.getMinZ_trkh7z$(t))&&this.children.get_za3lpa$(1).contains_uargzz$(t)},vS.$metadata$={kind:$,simpleName:"KdNode",interfaces:[BS]},yS.$metadata$={kind:$,simpleName:"KdTree",interfaces:[FS]},xS.prototype.getCenterX_trkh7z$=function(t){return.5*(this.getMinX_trkh7z$(t)+this.getMaxX_trkh7z$(t))},xS.prototype.getCenterY_trkh7z$=function(t){return.5*(this.getMinY_trkh7z$(t)+this.getMaxY_trkh7z$(t))},xS.prototype.getCenterZ_trkh7z$=function(t){return.5*(this.getMinZ_trkh7z$(t)+this.getMaxZ_trkh7z$(t))},xS.prototype.getSzX_trkh7z$=function(t){return this.getMaxX_trkh7z$(t)-this.getMinX_trkh7z$(t)},xS.prototype.getSzY_trkh7z$=function(t){return this.getMaxY_trkh7z$(t)-this.getMinY_trkh7z$(t)},xS.prototype.getSzZ_trkh7z$=function(t){return this.getMaxZ_trkh7z$(t)-this.getMinZ_trkh7z$(t)},xS.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getMinX_trkh7z$(t),this.getMinY_trkh7z$(t),this.getMinZ_trkh7z$(t))},xS.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getMaxX_trkh7z$(t),this.getMaxY_trkh7z$(t),this.getMaxZ_trkh7z$(t))},xS.prototype.getCenter_hm1yd1$=function(t,e){return e.set_y2kzbl$(this.getCenterX_trkh7z$(t),this.getCenterY_trkh7z$(t),this.getCenterZ_trkh7z$(t))},xS.prototype.setNode_kvimhn$=function(t,e){},xS.$metadata$={kind:Y,simpleName:"ItemAdapter",interfaces:[]},wS.prototype.getMinX_trkh7z$=function(t){return t.x},wS.prototype.getMinY_trkh7z$=function(t){return t.y},wS.prototype.getMinZ_trkh7z$=function(t){return t.z},wS.prototype.getMaxX_trkh7z$=function(t){return t.x},wS.prototype.getMaxY_trkh7z$=function(t){return t.y},wS.prototype.getMaxZ_trkh7z$=function(t){return t.z},wS.prototype.getCenterX_trkh7z$=function(t){return t.x},wS.prototype.getCenterY_trkh7z$=function(t){return t.y},wS.prototype.getCenterZ_trkh7z$=function(t){return t.z},wS.prototype.getSzX_trkh7z$=function(t){return 0},wS.prototype.getSzY_trkh7z$=function(t){return 0},wS.prototype.getSzZ_trkh7z$=function(t){return 0},wS.prototype.getMin_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},wS.prototype.getCenter_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},wS.prototype.getMax_hm1yd1$=function(t,e){return e.set_czzhiu$(t)},wS.$metadata$={kind:y,simpleName:"Vec3fAdapter",interfaces:[xS]};var zS=null;function kS(){return null===zS&&new wS,zS}function SS(){CS=this}SS.prototype.getMinX_trkh7z$=function(t){return t.minX},SS.prototype.getMinY_trkh7z$=function(t){return t.minY},SS.prototype.getMinZ_trkh7z$=function(t){return t.minZ},SS.prototype.getMaxX_trkh7z$=function(t){return t.maxX},SS.prototype.getMaxY_trkh7z$=function(t){return t.maxY},SS.prototype.getMaxZ_trkh7z$=function(t){return t.maxZ},SS.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.minX,t.minY,t.minZ)},SS.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.maxX,t.maxY,t.maxZ)},SS.$metadata$={kind:y,simpleName:"EdgeAdapter",interfaces:[xS]};var CS=null;function NS(){return null===CS&&new SS,CS}function ES(){TS=this}ES.prototype.getMinX_trkh7z$=function(t){return t.minX},ES.prototype.getMinY_trkh7z$=function(t){return t.minY},ES.prototype.getMinZ_trkh7z$=function(t){return t.minZ},ES.prototype.getMaxX_trkh7z$=function(t){return t.maxX},ES.prototype.getMaxY_trkh7z$=function(t){return t.maxY},ES.prototype.getMaxZ_trkh7z$=function(t){return t.maxZ},ES.prototype.getMin_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.minX,t.minY,t.minZ)},ES.prototype.getMax_hm1yd1$=function(t,e){return e.set_y2kzbl$(t.maxX,t.maxY,t.maxZ)},ES.$metadata$={kind:y,simpleName:"TriangleAdapter",interfaces:[xS]};var TS=null;function PS(){return null===TS&&new ES,TS}function OS(t,e){AS(),this.pt0=t,this.pt1=e,this.e=null,this.length=0,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.tmpVec_j9agx3$_0=Mr(),this.tmpResult_bszuwa$_0=Mr(),this.e=this.pt1.subtract_2gj7b4$(this.pt0,Mr()).norm(),this.length=this.pt0.distance_czzhiu$(this.pt1);var i=this.pt0.x,n=this.pt1.x;this.minX=A.min(i,n);var r=this.pt0.y,o=this.pt1.y;this.minY=A.min(r,o);var s=this.pt0.z,a=this.pt1.z;this.minZ=A.min(s,a);var l=this.pt0.x,u=this.pt1.x;this.maxX=A.max(l,u);var p=this.pt0.y,c=this.pt1.y;this.maxY=A.max(p,c);var h=this.pt0.z,d=this.pt1.z;this.maxZ=A.max(h,d)}function MS(){jS=this}OS.prototype.rayDistanceSqr_nvyeur$=function(t){return t.sqrDistanceToPoint_czzhiu$(this.nearestPointOnEdge_lplggz$(t,this.tmpResult_bszuwa$_0))},OS.prototype.nearestPointOnEdge_lplggz$=function(t,e){var i,n=this.e.times_czzhiu$(t.direction),r=1-n*n;if(i=EE.FUZZY_EQ_F,A.abs(r)<=i)return e.set_czzhiu$(this.pt0.sqrDistance_czzhiu$(t.origin)<this.pt1.sqrDistance_czzhiu$(t.origin)?this.pt0:this.pt1);t.origin.subtract_2gj7b4$(this.pt0,this.tmpVec_j9agx3$_0);var o,s=(this.tmpVec_j9agx3$_0.times_czzhiu$(this.e)-this.tmpVec_j9agx3$_0.times_czzhiu$(t.direction)*n)/r;if(s>0){var a=this.e,l=this.length;o=a.scale_749b8l$(A.min(s,l),e).add_czzhiu$(this.pt0)}else o=e.set_czzhiu$(this.pt0);return o},MS.prototype.getEdges_r7nl2o$=function(t){var e;if(t.primitiveType!==Zz())throw G("Supplied meshData must have primitiveType GL_LINES");var i=M();e=t.numIndices;for(var n=0;n<e;n+=2){var r=t.indices.get_za3lpa$(n),o=t.indices.get_za3lpa$(n+1|0),s=t.vertexIt;s.index=r;var a=Pr(s),l=t.vertexIt;l.index=o;var u=new OS(a,Pr(l));i.add_11rb$(u)}return i},MS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var jS=null;function AS(){return null===jS&&new MS,jS}function IS(t,e,i){DS(),this.pt0=t,this.pt1=e,this.pt2=i,this.e1=null,this.e2=null,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.tmpS_4hszl1$_0=Mr(),this.tmpP_4hszig$_0=Mr(),this.tmpQ_4hszjb$_0=Mr(),this.e1=this.pt1.subtract_2gj7b4$(this.pt0,Mr()),this.e2=this.pt2.subtract_2gj7b4$(this.pt0,Mr());var n=this.pt0.x,r=this.pt1.x,o=this.pt2.x;this.minX=A.min(n,r,o);var s=this.pt0.y,a=this.pt1.y,l=this.pt2.y;this.minY=A.min(s,a,l);var u=this.pt0.z,p=this.pt1.z,c=this.pt2.z;this.minZ=A.min(u,p,c);var h=this.pt0.x,d=this.pt1.x,f=this.pt2.x;this.maxX=A.max(h,d,f);var _=this.pt0.y,m=this.pt1.y,$=this.pt2.y;this.maxY=A.max(_,m,$);var y=this.pt0.z,v=this.pt1.z,g=this.pt2.z;this.maxZ=A.max(y,v,g)}function RS(){LS=this}OS.$metadata$={kind:$,simpleName:"Edge",interfaces:[]},IS.prototype.hitDistance_nvyeur$=function(t){t.origin.subtract_2gj7b4$(this.pt0,this.tmpS_4hszl1$_0),t.direction.cross_2gj7b4$(this.e2,this.tmpP_4hszig$_0),this.tmpS_4hszl1$_0.cross_2gj7b4$(this.e1,this.tmpQ_4hszjb$_0);var e=1/this.tmpP_4hszig$_0.times_czzhiu$(this.e1),i=e*this.tmpQ_4hszjb$_0.times_czzhiu$(this.e2),n=e*this.tmpP_4hszig$_0.times_czzhiu$(this.tmpS_4hszl1$_0),r=e*this.tmpQ_4hszjb$_0.times_czzhiu$(t.direction);return n>=0&&r>=0&&n+r<=1&&i>=0?i:ot.MAX_VALUE},RS.prototype.getTriangles_r7nl2o$=function(t){var e,i=M();e=t.numIndices;for(var n=0;n<e;n+=3){var r=qS(t,n);i.add_11rb$(r)}return i},RS.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var LS=null;function DS(){return null===LS&&new RS,LS}function qS(t,e,i){i=i||Object.create(IS.prototype);var n=Mr();t.vertexIt.index=t.indices.get_za3lpa$(e),n.set_czzhiu$(t.vertexIt.position);var r=Mr();t.vertexIt.index=t.indices.get_za3lpa$(e+1|0),r.set_czzhiu$(t.vertexIt.position);var o=Mr();if(t.vertexIt.index=t.indices.get_za3lpa$(e+2|0),o.set_czzhiu$(t.vertexIt.position),IS.call(i,n,r,o),t.primitiveType!==Qz())throw G("Supplied geometry data must have primitiveType TRIANGLES");return i}function FS(t){this.itemAdapter=t}function BS(t,e){this.$outer=t,this.depth=e,this.bounds=new gy,this.traversalOrder=0}IS.$metadata$={kind:$,simpleName:"Triangle",interfaces:[]},FS.prototype.drawNodeBounds_nl2my4$=function(t){this.root.drawNodeBounds_nl2my4$(t)},Object.defineProperty(BS.prototype,"isLeaf",{configurable:!0,get:function(){return this.children.isEmpty()}}),BS.prototype.drawNodeBounds_nl2my4$=function(t){var e,i=Vy().JET_MD.getColor_y2kzbl$(this.depth%6.7/6.7);t.addBoundingBox_j1pmtk$(this.bounds,i),e=this.children;for(var n=0;n!==e.size;++n)this.children.get_za3lpa$(n).drawNodeBounds_nl2my4$(t)},BS.$metadata$={kind:$,simpleName:"Node",interfaces:[]},FS.$metadata$={kind:$,simpleName:"SpatialTree",interfaces:[He]};var US=K((function(){var t=e.kotlin.comparisons.compareValues_s00gnj$;return function(e){return function(i,n){var r=e;return t(r(i),r(n))}}}));function VS(){}function GS(){}function HS(){}function WS(){}function XS(){WS.call(this),this.center=Mr(),this.pointDistance=new KS}function KS(){}function YS(){XS.call(this),this.result=M(),this.radius_z1vvhm$_0=1,this.radiusSqr=1}function ZS(){var t;WS.call(this),this.ray=new ir,this.nearest_75fjy0$_0=null,this.distance_vfh9yx$_0=0,this.distanceSqr_1nwg87$_0=ot.MAX_VALUE,this.rayDistance=new JS,this.childLists_3dbot1$_0=new nC((t=this,function(e){return t.rayDistance.nodeSqrDistanceToRay_m0emyn$(e,t.ray)}))}function JS(){}function QS(){ZS.call(this),this.rayDistance=new tC}function tC(){}function eC(){ZS.call(this),this.hitPoint=Mr(),this.rayDistance=new iC}function iC(){}function nC(t){this.childDist=t,this.childListRecycler=new Kk(oC),this.childComparator=new yt(US(sC))}function rC(t,e,i){this.$outer=t,this.dist=e,this.node=i}function oC(){return M()}function sC(t){return t.dist}function aC(){pC(),this.currentGesture_nrwzky$_0=new cC,this.activePointers_ajelte$_0=M(),this.tmpVec1_vwccvm$_0=pr(),this.tmpVec2_vwccwh$_0=pr(),this.startPositions=z(),this.screenDpi=96}function lC(){uC=this,this.INVALID=0,this.INDETERMINATE=-1,this.PINCH=1,this.TWO_FINGER_DRAG=2}VS.prototype.nodeSqrDistanceToPoint_fpn9fm$=function(t,e){return t.bounds.pointDistanceSqr_czzhiu$(e)},VS.prototype.itemSqrDistanceToPoint_xpaqv3$=function(t,e,i){var n=t.itemAdapter.getCenterX_trkh7z$(e)-i.x,r=t.itemAdapter.getCenterY_trkh7z$(e)-i.y,o=t.itemAdapter.getCenterZ_trkh7z$(e)-i.z;return n*n+r*r+o*o},VS.$metadata$={kind:Y,simpleName:"PointDistance",interfaces:[]},HS.prototype.nodeSqrDistanceToRay_m0emyn$=function(t,e){return t.bounds.hitDistanceSqr_nvyeur$(e)},HS.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){return i.sqrDistanceToPoint_y2kzbl$(t.itemAdapter.getCenterX_trkh7z$(e),t.itemAdapter.getCenterY_trkh7z$(e),t.itemAdapter.getCenterZ_trkh7z$(e))},HS.$metadata$={kind:Y,simpleName:"RayDistance",interfaces:[]},WS.prototype.traverse_7efza$=function(t){this.traverseNode_4w85ke$(t,t.root)},WS.prototype.traverseNode_4w85ke$=function(t,e){e.isLeaf?this.traverseLeaf_4w85ke$(t,e):this.traverseChildren_4w85ke$(t,e)},WS.$metadata$={kind:$,simpleName:"SpatialTreeTraverser",interfaces:[]},XS.prototype.setup_czzhiu$=function(t){this.center.set_czzhiu$(t)},KS.$metadata$={kind:$,interfaces:[VS]},XS.$metadata$={kind:$,simpleName:"CenterPointTraverser",interfaces:[WS]},Object.defineProperty(YS.prototype,"radius",{configurable:!0,get:function(){return this.radius_z1vvhm$_0},set:function(t){this.radius_z1vvhm$_0=t}}),YS.prototype.setup_2qa7tb$=function(t,e){return XS.prototype.setup_czzhiu$.call(this,t),this.radius=e,this.radiusSqr=e*e,this},YS.prototype.traverse_7efza$=function(t){this.result.clear(),XS.prototype.traverse_7efza$.call(this,t)},YS.prototype.traverseChildren_4w85ke$=function(t,e){var i;i=e.children;for(var n=0;n!==i.size;++n){var r=e.children.get_za3lpa$(n);this.pointDistance.nodeSqrDistanceToPoint_fpn9fm$(r,this.center)<this.radiusSqr&&this.traverseNode_4w85ke$(t,r)}},YS.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s);this.pointDistance.itemSqrDistanceToPoint_xpaqv3$(t,a,this.center)<this.radiusSqr&&this.result.add_11rb$(a)}},YS.$metadata$={kind:$,simpleName:"InRadiusTraverser",interfaces:[XS]},Object.defineProperty(ZS.prototype,"nearest",{configurable:!0,get:function(){return this.nearest_75fjy0$_0},set:function(t){this.nearest_75fjy0$_0=t}}),Object.defineProperty(ZS.prototype,"distance",{configurable:!0,get:function(){return this.distance_vfh9yx$_0},set:function(t){this.distance_vfh9yx$_0=t}}),Object.defineProperty(ZS.prototype,"distanceSqr",{configurable:!0,get:function(){return this.distanceSqr_1nwg87$_0},set:function(t){this.distanceSqr_1nwg87$_0=t}}),ZS.prototype.setup_nvyeur$=function(t){return this.ray.set_nvyeur$(t),this.nearest=null,this.distanceSqr=ot.MAX_VALUE,this},ZS.prototype.traverse_7efza$=function(t){var e;if(WS.prototype.traverse_7efza$.call(this,t),this.distanceSqr!==ot.MAX_VALUE){var i=this.distanceSqr;e=A.sqrt(i)}else e=ot.MAX_VALUE;this.distance=e},ZS.prototype.traverseChildren_4w85ke$=function(t,e){var i,n,r,o=this.childLists_3dbot1$_0,s=e.children.size,a=o.childListRecycler,l=a.get();if(l.size!==s)if(l.size<s){i=s-l.size|0;for(var u=1;u<=i;u++){var p=new rC(o,0,null);l.add_11rb$(p)}}else for(;l.size>s;)l.removeAt_za3lpa$(xt(l));n=e.children;for(var c=0;c!==n.size;++c)l.get_za3lpa$(c).setChildNode_wy56ps$(e.children.get_za3lpa$(c));this.childLists_3dbot1$_0.sortByDistance_pjnhek$(l),r=e.children;for(var h=0;h!==r.size;++h){var d=l.get_za3lpa$(h);if(!(d.dist<this.distanceSqr))break;this.traverseNode_4w85ke$(t,x(d.node))}a.recycle_trkh7z$(l)},ZS.prototype.traverseLeaf_4w85ke$=function(t,e){var i,n,r,o;n=(i=e.nodeRange).first,r=i.last,o=i.step;for(var s=n;s<=r;s+=o){var a=e.items.get_za3lpa$(s),l=this.rayDistance.itemSqrDistanceToRay_bo5c3m$(t,a,this.ray);l<this.distanceSqr&&(this.nearest=a,this.distanceSqr=l)}},JS.$metadata$={kind:$,interfaces:[HS]},ZS.$metadata$={kind:$,simpleName:"NearestToRayTraverser",interfaces:[WS]},tC.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){return e.rayDistanceSqr_nvyeur$(i)},tC.$metadata$={kind:$,interfaces:[HS]},QS.$metadata$={kind:$,simpleName:"NearestEdgeToRayTraverser",interfaces:[ZS]},Object.defineProperty(eC.prototype,"isHit",{configurable:!0,get:function(){return null!=this.nearest}}),eC.prototype.setup_nvyeur$=function(t){return this.hitPoint.set_czzhiu$(Er().ZERO),ZS.prototype.setup_nvyeur$.call(this,t),this},eC.prototype.traverse_7efza$=function(t){ZS.prototype.traverse_7efza$.call(this,t),this.isHit&&this.hitPoint.set_czzhiu$(this.ray.direction).scale_mx4ult$(this.distance).add_czzhiu$(this.ray.origin)},iC.prototype.itemSqrDistanceToRay_bo5c3m$=function(t,e,i){var n=e.hitDistance_nvyeur$(i);return n<ot.MAX_VALUE?n*n:ot.MAX_VALUE},iC.$metadata$={kind:$,interfaces:[HS]},eC.$metadata$={kind:$,simpleName:"TriangleHitTraverser",interfaces:[ZS]},nC.prototype.use_swptr5$=X("kool-kool-core.de.fabmax.kool.util.spatial.ChildNodesWithDistance.use_swptr5$",K((function(){var i=t.de.fabmax.kool.util.spatial.ChildNodesWithDistance.Child,n=e.kotlin.collections.get_lastIndex_55thoc$;return function(t,e){var r,o=this.childListRecycler,s=o.get();if(s.size!==t)if(s.size<t){r=t-s.size|0;for(var a=1;a<=r;a++){var l=new i(this,0,null);s.add_11rb$(l)}}else for(;s.size>t;)s.removeAt_za3lpa$(n(s));e(s),o.recycle_trkh7z$(s)}}))),nC.prototype.sortByDistance_pjnhek$=function(t){$t(t,this.childComparator)},rC.prototype.setChildNode_wy56ps$=function(t){this.node=t,this.dist=this.$outer.childDist(t)},rC.$metadata$={kind:$,simpleName:"Child",interfaces:[]},nC.$metadata$={kind:$,simpleName:"ChildNodesWithDistance",interfaces:[]},Object.defineProperty(aC.prototype,"currentGesture",{configurable:!0,get:function(){return this.currentGesture_nrwzky$_0},set:function(t){this.currentGesture_nrwzky$_0=t}}),aC.prototype.evaluate_19cf9$=function(t,e){if(this.screenDpi=e.screenDpi,t.getActivePointers_j71cmr$(this.activePointers_ajelte$_0),this.activePointers_ajelte$_0.size>1)switch(this.currentGesture.type){case 0:this.onGestureInit_mcn869$(this.activePointers_ajelte$_0);break;case-1:this.onDetermineGesture_mcn869$(this.activePointers_ajelte$_0);break;case 1:case 2:this.handleGesture_mcn869$(this.activePointers_ajelte$_0)}else this.currentGesture.type=0,this.startPositions.clear()},aC.prototype.onGestureInit_mcn869$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next(),n=this.startPositions,r=i.id,o=new rr(i.x,i.y);n.put_xwzc9p$(r,o)}this.currentGesture.type=-1},aC.prototype.onDetermineGesture_mcn869$=function(t){var e;Xe(this.startPositions.keys,(e=t,function(t){var i,n=e;t:do{var r;for(r=n.iterator();r.hasNext();){var o=r.next();if(o.id===t){i=o;break t}}i=null}while(0);return null==i}));var i,n,r=M();for(i=t.iterator();i.hasNext();){var o=i.next();this.startPositions.containsKey_11rb$(o.id)||r.add_11rb$(o)}for(n=r.iterator();n.hasNext();){var s=n.next(),a=this.startPositions,l=s.id,u=new rr(s.x,s.y);a.put_xwzc9p$(l,u)}this.isPinch_mcn869$(t)?this.currentGesture.type=1:this.isTwoFingerDrag_mcn869$(t)&&(this.currentGesture.type=2)},aC.prototype.isPinch_mcn869$=function(t){return 2===t.size&&(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.tmpVec1_vwccvm$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec2_vwccwh$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec1_vwccvm$_0.length()>5&&this.tmpVec2_vwccwh$_0.length()>5&&this.tmpVec1_vwccvm$_0.times_czzhjp$(this.tmpVec2_vwccwh$_0)<0)&&(this.tmpVec1_vwccvm$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.currentGesture.init_4s1jvi$(1,this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),this.handleGesture_mcn869$(t),!0)},aC.prototype.isTwoFingerDrag_mcn869$=function(t){return 2===t.size&&(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y).subtract_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.tmpVec1_vwccvm$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec2_vwccwh$_0.scale_mx4ult$(96/this.screenDpi),this.tmpVec1_vwccvm$_0.length()>5&&this.tmpVec2_vwccwh$_0.length()>5&&this.tmpVec1_vwccvm$_0.times_czzhjp$(this.tmpVec2_vwccwh$_0)>0)&&(this.tmpVec1_vwccvm$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(0).id))),this.tmpVec2_vwccwh$_0.set_czzhjp$(x(this.startPositions.get_11rb$(t.get_za3lpa$(1).id))),this.currentGesture.init_4s1jvi$(2,this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),this.handleGesture_mcn869$(t),!0)},aC.prototype.handleGesture_mcn869$=function(t){2===t.size?(this.tmpVec1_vwccvm$_0.set_dleff0$(t.get_za3lpa$(0).x,t.get_za3lpa$(0).y),this.tmpVec2_vwccwh$_0.set_dleff0$(t.get_za3lpa$(1).x,t.get_za3lpa$(1).y),this.currentGesture.update_enjys2$(this.tmpVec1_vwccvm$_0,this.tmpVec2_vwccwh$_0,this.screenDpi),t.get_za3lpa$(0).consume_za3lpa$(),t.get_za3lpa$(1).consume_za3lpa$()):this.currentGesture.type=0},lC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var uC=null;function pC(){return null===uC&&new lC,uC}function cC(){this.centerStart=pr(),this.centerCurrent=pr(),this.centerShift=pr(),this.dCenter=pr(),this.pinchAmountStart=0,this.pinchAmountCurrent=0,this.dPinchAmount=0,this.type=0,this.numUpdates=0}function hC(){mC(),this.cmp_ta02bd$_0=$C,this.root_g0oxgl$_0=null,this.size_g153xi$_0=0}function dC(t,e,i,n){this.$outer=t,this.parent=n,this.key_qa5ejk$_0=e,this.value_owqnua$_0=i,this.left=null,this.right=null,this.color=mC().BLACK_0}function fC(){_C=this,this.BLACK_0=!1,this.RED_0=!0}Object.defineProperty(cC.prototype,"pinchAmountRel",{configurable:!0,get:function(){return(this.pinchAmountCurrent-this.pinchAmountStart)/this.pinchAmountStart+1}}),cC.prototype.init_4s1jvi$=function(t,e,i,n){this.type=t,this.centerStart.set_czzhjp$(e).add_czzhjp$(i).scale_mx4ult$(.5),this.centerCurrent.set_czzhjp$(this.centerStart),this.centerShift.set_czzhjp$(ar().ZERO),this.dCenter.set_czzhjp$(ar().ZERO),this.pinchAmountStart=96*e.distance_czzhjp$(i)/n,this.pinchAmountCurrent=this.pinchAmountStart,this.dPinchAmount=0,this.numUpdates=0},cC.prototype.update_enjys2$=function(t,e,i){this.dCenter.set_czzhjp$(t).add_czzhjp$(e).scale_mx4ult$(.5).subtract_czzhjp$(this.centerCurrent),this.centerCurrent.set_czzhjp$(t).add_czzhjp$(e).scale_mx4ult$(.5),this.centerShift.set_czzhjp$(this.centerCurrent).subtract_czzhjp$(this.centerStart);var n=96*t.distance_czzhjp$(e)/i;this.dPinchAmount=n-this.pinchAmountCurrent,this.pinchAmountCurrent=n,this.numUpdates=this.numUpdates+1|0},cC.$metadata$={kind:$,simpleName:"Gesture",interfaces:[]},aC.$metadata$={kind:$,simpleName:"TouchGestureEvaluator",interfaces:[]},Object.defineProperty(hC.prototype,"size",{configurable:!0,get:function(){return this.size_g153xi$_0},set:function(t){this.size_g153xi$_0=t}}),hC.prototype.clear=function(){this.root_g0oxgl$_0=null,this.size=0},hC.prototype.isEmpty=function(){return 0===this.size},hC.prototype.firstEntry=function(){var t=this.root_g0oxgl$_0;if(null!=t)for(;null!=(null!=t?t.left:null);)t=x(t.left);if(null==t)throw dt();return t},hC.prototype.firstValue=function(){return this.firstEntry().value},hC.prototype.firstKey=function(){return this.firstEntry().key},hC.prototype.lastEntry=function(){var t=this.root_g0oxgl$_0;if(null!=t)for(;null!=(null!=t?t.right:null);)t=x(t.right);if(null==t)throw dt();return t},hC.prototype.lastValue=function(){return this.lastEntry().value},hC.prototype.lastKey=function(){return this.lastEntry().key},hC.prototype.ceilingEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;){var i=this.cmp_ta02bd$_0(t,e.key);if(i<0){if(null==e.left)return e;e=e.left}else{if(!(i>0))return e;if(null==e.right){for(var n=e.parent,r=e;null!=n&&r===n.right;)r=n,n=n.parent;return n}e=e.right}}return null},hC.prototype.ceilingKey_trkh7z$=function(t){var e;return null!=(e=this.ceilingEntry_trkh7z$(t))?e.key:null},hC.prototype.ceilingValue_trkh7z$=function(t){var e;return null!=(e=this.ceilingEntry_trkh7z$(t))?e.value:null},hC.prototype.floorEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;){var i=this.cmp_ta02bd$_0(t,e.key);if(i>0){if(null==e.right)return e;e=e.right}else{if(!(i<0))return e;if(null==e.left){for(var n=e.parent,r=e;null!=n&&r===n.left;)r=n,n=n.parent;return n}e=e.left}}return null},hC.prototype.floorKey_trkh7z$=function(t){var e;return null!=(e=this.floorEntry_trkh7z$(t))?e.key:null},hC.prototype.floorValue_trkh7z$=function(t){var e;return null!=(e=this.floorEntry_trkh7z$(t))?e.value:null},hC.prototype.higherEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;)if(this.cmp_ta02bd$_0(t,e.key)<0){if(null==e.left)return e;e=e.left}else{if(null==e.right){for(var i=e.parent,n=e;null!=i&&n===i.right;)n=i,i=i.parent;return i}e=e.right}return null},hC.prototype.higherKey_trkh7z$=function(t){var e;return null!=(e=this.higherEntry_trkh7z$(t))?e.key:null},hC.prototype.higherValue_trkh7z$=function(t){var e;return null!=(e=this.higherEntry_trkh7z$(t))?e.value:null},hC.prototype.lowerEntry_trkh7z$=function(t){for(var e=this.root_g0oxgl$_0;null!=e;)if(this.cmp_ta02bd$_0(t,e.key)>0){if(null==e.right)return e;e=e.right}else{if(null==e.left){for(var i=e.parent,n=e;null!=i&&n===i.left;)n=i,i=i.parent;return i}e=e.left}return null},hC.prototype.lowerKey_trkh7z$=function(t){var e;return null!=(e=this.lowerEntry_trkh7z$(t))?e.key:null},hC.prototype.lowerValue_trkh7z$=function(t){var e;return null!=(e=this.lowerEntry_trkh7z$(t))?e.value:null},hC.prototype.put_xwzc9p$=function(t,e){var i;if(null==this.root_g0oxgl$_0)this.root_g0oxgl$_0=new dC(this,t,e,null);else{var n,r=this.root_g0oxgl$_0;do{if(n=x(r),this.cmp_ta02bd$_0(t,r.key)<0)i=r.left;else{if(!(this.cmp_ta02bd$_0(t,r.key)>0))return r.setValue_11rc$(e);i=r.right}r=i}while(null!=r);var o=new dC(this,t,e,n);this.cmp_ta02bd$_0(t,n.key)<0?n.left=o:n.right=o,this.fixAfterInsertion_9avj2i$_0(o)}return this.size=this.size+1|0,null},hC.prototype.remove_11rb$=function(t){var e,i;if(null!=(e=this.getEntry_iowdmk$_0(t))){var n=e.value;this.deleteEntry_xb9s9j$_0(e),i=n}else i=null;return i},hC.prototype.get_11rb$=function(t){var e;return null!=(e=this.getEntry_iowdmk$_0(t))?e.value:null},Object.defineProperty(hC.prototype,"entries",{configurable:!0,get:function(){var t,i=ht();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,dC)?t:c();null!=n;){var r=n;i.add_11rb$(r),n=this.successor_78gl9k$_0(n)}return i}}),Object.defineProperty(hC.prototype,"keys",{configurable:!0,get:function(){var t,i=ht();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,dC)?t:c();null!=n;){var r=n.key;i.add_11rb$(r),n=this.successor_78gl9k$_0(n)}return i}}),Object.defineProperty(hC.prototype,"values",{configurable:!0,get:function(){var t,i=ht();if(!this.isEmpty())for(var n=null==(t=this.firstEntry())||e.isType(t,dC)?t:c();null!=n;){var r=n.value;i.add_11rb$(r),n=this.successor_78gl9k$_0(n)}return i}}),hC.prototype.containsKey_11rb$=function(t){return null!=this.getEntry_iowdmk$_0(t)},hC.prototype.containsValue_11rc$=function(t){return this.values.contains_11rb$(t)},hC.prototype.putAll_a2k3zr$=function(t){var e;for(e=t.entries.iterator();e.hasNext();){var i=e.next();this.put_xwzc9p$(i.key,i.value)}},hC.prototype.getEntry_iowdmk$_0=function(t){for(var e,i=this.root_g0oxgl$_0;null!=i;){if(this.cmp_ta02bd$_0(t,i.key)<0)e=i.left;else{if(!(this.cmp_ta02bd$_0(t,i.key)>0))return i;e=i.right}i=e}return null},hC.prototype.deleteEntry_xb9s9j$_0=function(t){var e=t;if(this.size=this.size-1|0,null!=e.left&&null!=e.right){var i=x(this.successor_78gl9k$_0(e));e.key=i.key,e.value=i.value,e=i}var n=null!=e.left?e.left:e.right;null!=n?(n.parent=e.parent,null==e.parent?this.root_g0oxgl$_0=n:e===x(e.parent).left?x(e.parent).left=n:x(e.parent).right=n,e.left=null,e.right=null,e.parent=null,e.color===mC().BLACK_0&&this.fixAfterDeletion_6ssue5$_0(n)):null==e.parent?this.root_g0oxgl$_0=null:(e.color===mC().BLACK_0&&this.fixAfterDeletion_6ssue5$_0(e),null!=e.parent&&(e===x(e.parent).left?x(e.parent).left=null:e===x(e.parent).right&&(x(e.parent).right=null),e.parent=null))},hC.prototype.fixAfterInsertion_9avj2i$_0=function(t){var e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S=t;for(null!=S&&(S.color=mC().RED_0);null!=S&&!Lt(S,this.root_g0oxgl$_0)&&this.color_3jivvv$_0(S.parent)===mC().RED_0;)if(S.parent===(null!=(i=null!=(e=S.parent)?e.parent:null)?i.left:null)){var C=null!=(r=null!=(n=S.parent)?n.parent:null)?r.right:null;this.color_3jivvv$_0(C)===mC().RED_0?(null!=(o=S.parent)&&(o.color=mC().BLACK_0),null!=C&&(C.color=mC().BLACK_0),null!=(a=null!=(s=S.parent)?s.parent:null)&&(a.color=mC().RED_0),S=null!=(l=S.parent)?l.parent:null):(S===(null!=(u=S.parent)?u.right:null)&&(S=S.parent,this.rotateLeft_xtlw1j$_0(S)),null!=(p=null!=S?S.parent:null)&&(p.color=mC().BLACK_0),null!=(h=null!=(c=null!=S?S.parent:null)?c.parent:null)&&(h.color=mC().RED_0),this.rotateRight_ltp9a$_0(null!=(d=null!=S?S.parent:null)?d.parent:null))}else{var N=null!=(_=null!=(f=S.parent)?f.parent:null)?_.left:null;this.color_3jivvv$_0(N)===mC().RED_0?(null!=(m=S.parent)&&(m.color=mC().BLACK_0),null!=N&&(N.color=mC().BLACK_0),null!=(y=null!=($=S.parent)?$.parent:null)&&(y.color=mC().RED_0),S=null!=(v=S.parent)?v.parent:null):(S===(null!=(g=S.parent)?g.left:null)&&(S=S.parent,this.rotateRight_ltp9a$_0(S)),null!=(b=null!=S?S.parent:null)&&(b.color=mC().BLACK_0),null!=(w=null!=(x=null!=S?S.parent:null)?x.parent:null)&&(w.color=mC().RED_0),this.rotateLeft_xtlw1j$_0(null!=(z=null!=S?S.parent:null)?z.parent:null))}null!=(k=this.root_g0oxgl$_0)&&(k.color=mC().BLACK_0)},hC.prototype.fixAfterDeletion_6ssue5$_0=function(t){for(var e,i,n,r,o,s,a,l,u,p,c,h,d,f,_,m=t;!Lt(m,this.root_g0oxgl$_0)&&m.color===mC().BLACK_0;)if(Lt(m,null!=(e=m.parent)?e.left:null)){var $=null!=(i=m.parent)?i.right:null;this.color_3jivvv$_0($)===mC().RED_0&&(null!=$&&($.color=mC().BLACK_0),null!=(n=m.parent)&&(n.color=mC().RED_0),this.rotateLeft_xtlw1j$_0(m.parent),$=null!=(r=m.parent)?r.right:null),this.color_3jivvv$_0(null!=$?$.left:null)===mC().BLACK_0&&this.color_3jivvv$_0(null!=$?$.right:null)===mC().BLACK_0?(null!=$&&($.color=mC().RED_0),m=x(m.parent)):(this.color_3jivvv$_0(null!=$?$.right:null)===mC().BLACK_0&&(null!=(o=null!=$?$.left:null)&&(o.color=mC().BLACK_0),null!=$&&($.color=mC().RED_0),this.rotateRight_ltp9a$_0($),$=null!=(s=m.parent)?s.right:null),null!=$&&($.color=this.color_3jivvv$_0(m.parent)),null!=(a=m.parent)&&(a.color=mC().BLACK_0),null!=(l=null!=$?$.right:null)&&(l.color=mC().BLACK_0),this.rotateLeft_xtlw1j$_0(m.parent),m=x(this.root_g0oxgl$_0))}else{var y=null!=(u=m.parent)?u.left:null;this.color_3jivvv$_0(y)===mC().RED_0&&(null!=y&&(y.color=mC().BLACK_0),null!=(p=null!=y?y.parent:null)&&(p.color=mC().RED_0),this.rotateRight_ltp9a$_0(m.parent),y=null!=(c=m.parent)?c.left:null),this.color_3jivvv$_0(null!=y?y.right:null)===mC().BLACK_0&&this.color_3jivvv$_0(null!=y?y.left:null)===mC().BLACK_0?(null!=y&&(y.color=mC().RED_0),m=x(m.parent)):(this.color_3jivvv$_0(null!=y?y.left:null)===mC().BLACK_0&&(null!=(h=null!=y?y.right:null)&&(h.color=mC().BLACK_0),null!=y&&(y.color=mC().RED_0),this.rotateLeft_xtlw1j$_0(y),y=null!=(d=m.parent)?d.left:null),null!=y&&(y.color=this.color_3jivvv$_0(m.parent)),null!=(f=m.parent)&&(f.color=mC().BLACK_0),null!=(_=null!=y?y.left:null)&&(_.color=mC().BLACK_0),this.rotateRight_ltp9a$_0(m.parent),m=x(this.root_g0oxgl$_0))}m.color=mC().BLACK_0},hC.prototype.rotateLeft_xtlw1j$_0=function(t){var e,i,n;if(null!=t){var r,o=t.right;t.right=null!=o?o.left:null,null!=(null!=o?o.left:null)&&null!=(e=o.left)&&(e.parent=t),null!=o&&(o.parent=t.parent),null==t.parent?this.root_g0oxgl$_0=o:(null!=(r=t.parent)?r.left:null)===t?null!=(i=t.parent)&&(i.left=o):null!=(n=t.parent)&&(n.right=o),null!=o&&(o.left=t),t.parent=o}},hC.prototype.rotateRight_ltp9a$_0=function(t){var e,i,n;if(null!=t){var r,o=t.left;t.left=null!=o?o.right:null,null!=(null!=o?o.right:null)&&null!=(e=o.right)&&(e.parent=t),null!=o&&(o.parent=t.parent),null==t.parent?this.root_g0oxgl$_0=o:(null!=(r=t.parent)?r.right:null)===t?null!=(i=t.parent)&&(i.right=o):null!=(n=t.parent)&&(n.left=o),null!=o&&(o.right=t),t.parent=o}},hC.prototype.color_3jivvv$_0=function(t){var e;return null!=(e=null!=t?t.color:null)?e:mC().BLACK_0},hC.prototype.successor_78gl9k$_0=function(t){var e;if(null==t)e=null;else if(null!=t.right){for(var i=x(t.right);null!=i.left;)i=x(i.left);e=i}else{for(var n=t.parent,r=t;null!=n&&Lt(r,n.right);)r=n,n=n.parent;e=n}return e},hC.prototype.predecessor_3j2kg5$_0=function(t){var e;if(null==t)e=null;else if(null!=t.left){for(var i=x(t.left);null!=i.right;)i=x(i.right);e=i}else{for(var n=t.parent,r=t;null!=n&&Lt(r,n.left);)r=n,n=n.parent;e=n}return e},Object.defineProperty(dC.prototype,"key",{configurable:!0,get:function(){return this.key_qa5ejk$_0},set:function(t){this.key_qa5ejk$_0=t}}),Object.defineProperty(dC.prototype,"value",{configurable:!0,get:function(){return this.value_owqnua$_0},set:function(t){this.value_owqnua$_0=t}}),dC.prototype.setValue_11rc$=function(t){var e=this.value;return this.value=t,e},dC.$metadata$={kind:$,simpleName:"MapEntry",interfaces:[Ke]},fC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var _C=null;function mC(){return null===_C&&new fC,_C}function $C(t,i){var n;return e.compareTo(e.isComparable(n=t)?n:c(),i)}function yC(t,i){var n,r,o,s,a,l,u,p;Mr(this),this.data=t,this.offsetF_0=e.imul(i,this.data.vertexSizeF),this.offsetI_0=e.imul(i,this.data.vertexSizeI),this.index_qsqbze$_0=i,this.position=null,this.normal=null,this.tangent=null,this.color=null,this.texCoord=null,this.joints=null,this.weights=null,this.attributeViews_0=null;var c=z();for(this.attributeViews_0=c,n=this.data.attributeByteOffsets.entries.iterator();n.hasNext();){var h=n.next();switch(h.key.type.name){case"FLOAT":var d=h.key,f=new vC(this,h.value/4|0);c.put_xwzc9p$(d,f);break;case"VEC_2F":var _=h.key,m=new gC(this,h.value/4|0);c.put_xwzc9p$(_,m);break;case"VEC_3F":var $=h.key,y=new bC(this,h.value/4|0);c.put_xwzc9p$($,y);break;case"VEC_4F":var v=h.key,g=new xC(this,h.value/4|0);c.put_xwzc9p$(v,g);break;case"INT":var b=h.key,x=new zC(this,h.value/4|0);c.put_xwzc9p$(b,x);break;case"VEC_2I":var w=h.key,k=new kC(this,h.value/4|0);c.put_xwzc9p$(w,k);break;case"VEC_3I":var S=h.key,C=new SC(this,h.value/4|0);c.put_xwzc9p$(S,C);break;case"VEC_4I":var N=h.key,E=new CC(this,h.value/4|0);c.put_xwzc9p$(N,E);break;default:throw G(h.key.type.toString()+" is not a valid vertex attribute")}}this.position=null!=(r=this.getVec3fAttribute_nm2vx5$(ds().POSITIONS))?r:new bC(this,-1),this.normal=null!=(o=this.getVec3fAttribute_nm2vx5$(ds().NORMALS))?o:new bC(this,-1),this.tangent=null!=(s=this.getVec4fAttribute_nm2vx5$(ds().TANGENTS))?s:new xC(this,-1),this.texCoord=null!=(a=this.getVec2fAttribute_nm2vx5$(ds().TEXTURE_COORDS))?a:new gC(this,-1),this.color=null!=(l=this.getColorAttribute_nm2vx5$(ds().COLORS))?l:new wC(this,new xC(this,-1)),this.joints=null!=(u=this.getVec4iAttribute_nm2vx5$(ds().JOINTS))?u:new CC(this,-1),this.weights=null!=(p=this.getVec4fAttribute_nm2vx5$(ds().WEIGHTS))?p:new xC(this,-1)}function vC(t,e){this.$outer=t,this.attribOffset_0=e}function gC(t,e){this.$outer=t,pr(this),this.attribOffset_0=e}function bC(t,e){this.$outer=t,Mr(this),this.attribOffset=e}function xC(t,e){this.$outer=t,no(this),this.attribOffset=e}function wC(t,e){this.$outer=t,jy(this),this.vecView=e}function zC(t,e){this.$outer=t,this.attribOffset_0=e}function kC(t,e){this.$outer=t,kr(this),this.attribOffset_0=e}function SC(t,e){this.$outer=t,Kr(this),this.attribOffset_0=e}function CC(t,e){this.$outer=t,Eo(this),this.attribOffset_0=e}function NC(t,e,i,n){this.x=t,this.ySigned=e,this.width=i,this.heightSigned=n}function EC(t){return jC().createContext_s8od96$(t)}function TC(){var t;return"number"==typeof(t=performance.now())?t:c()}function PC(t,i){var n=i<0?0:i>12?12:i,r=t<0?"-":"",o=A.abs(t);if(0===n)return r+Ye(o).toString();var s=Ye(A.pow(10,n)),a=Ye(o%1*s.toNumber());Lt(a,s)&&(a=C,o+=1);for(var l=a.toString();l.length<n;)l="0"+l;return r+e.Long.fromNumber(o).toString()+"."+l}function OC(){var t,i;MC=this,this.dpi=0,this.ctx=null;var n=document.getElementById("dpiMeasure");if(null==n){var r=DE.Log,o=$k.WARN,s=e.getKClassFromExpression(this).simpleName;o.level>=r.level.level&&r.printer(o,s,"dpiMeasure element not found, falling back to 96 dpi");var a=DE.Log,l=$k.WARN,u=e.getKClassFromExpression(this).simpleName;l.level>=a.level.level&&a.printer(l,u,"Add this hidden div to your html:");var p=DE.Log,h=$k.WARN,d=e.getKClassFromExpression(this).simpleName;h.level>=p.level.level&&p.printer(h,d,'<div id="dpiMeasure" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>'),i=96}else i=(e.isType(t=n,HTMLDivElement)?t:c()).offsetWidth;this.dpi=i}hC.$metadata$={kind:$,simpleName:"TreeMap",interfaces:[Wt]},Object.defineProperty(yC.prototype,"index",{configurable:!0,get:function(){return this.index_qsqbze$_0},set:function(t){this.index_qsqbze$_0=t,this.offsetF_0=e.imul(t,this.data.vertexSizeF),this.offsetI_0=e.imul(t,this.data.vertexSizeI)}}),yC.prototype.get_za3lpa$=function(t){return this.position.get_za3lpa$(t)},yC.prototype.set_24o109$=function(t,e){this.position.set_24o109$(t,e)},yC.prototype.set_fs4kvg$=function(t){var i,n,r,o,s,a,l,u,p;for(i=this.attributeViews_0.keys.iterator();i.hasNext();){var h=i.next(),d=t.attributeViews_0.get_11rb$(h);null!=d&&(e.isType(d,vC)?(e.isType(n=this.attributeViews_0.get_11rb$(h),vC)?n:c()).f=d.f:e.isType(d,gC)?(e.isType(r=this.attributeViews_0.get_11rb$(h),gC)?r:c()).set_czzhjp$(d):e.isType(d,bC)?(e.isType(o=this.attributeViews_0.get_11rb$(h),bC)?o:c()).set_czzhiu$(d):e.isType(d,xC)?(e.isType(s=this.attributeViews_0.get_11rb$(h),xC)?s:c()).set_czzhhz$(d):e.isType(d,zC)?(e.isType(a=this.attributeViews_0.get_11rb$(h),zC)?a:c()).i=d.i:e.isType(d,kC)?(e.isType(l=this.attributeViews_0.get_11rb$(h),kC)?l:c()).set_czzhjm$(d):e.isType(d,SC)?(e.isType(u=this.attributeViews_0.get_11rb$(h),SC)?u:c()).set_czzhir$(d):e.isType(d,CC)&&(e.isType(p=this.attributeViews_0.get_11rb$(h),CC)?p:c()).set_czzhhw$(d))}},yC.prototype.getFloatAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,vC)?i:c()},yC.prototype.getVec2fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,ur)?i:c()},yC.prototype.getVec3fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,Or)?i:c()},yC.prototype.getVec4fAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,io)?i:c()},yC.prototype.getColorAttribute_nm2vx5$=function(t){var i,n;return null!=(i=this.attributeViews_0.get_11rb$(t))?new wC(this,e.isType(n=i,xC)?n:c()):null},yC.prototype.getIntAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,zC)?i:c()},yC.prototype.getVec2iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,kC)?i:c()},yC.prototype.getVec3iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,SC)?i:c()},yC.prototype.getVec4iAttribute_nm2vx5$=function(t){var i;return null==(i=this.attributeViews_0.get_11rb$(t))||e.isType(i,CC)?i:c()},Object.defineProperty(vC.prototype,"f",{configurable:!0,get:function(){return this.attribOffset_0<0?0:this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset_0|0)},set:function(t){this.attribOffset_0>=0&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset_0|0,t)}}),vC.$metadata$={kind:$,simpleName:"FloatView",interfaces:[]},gC.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=1?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset_0+t|0):0},gC.prototype.set_24o109$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=1&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset_0+t|0,e)},gC.$metadata$={kind:$,simpleName:"Vec2fView",interfaces:[ur]},bC.prototype.get_za3lpa$=function(t){return this.attribOffset>=0&&0<=t&&t<=2?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset+t|0):0},bC.prototype.set_24o109$=function(t,e){this.attribOffset>=0&&0<=t&&t<=2&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset+t|0,e)},bC.$metadata$={kind:$,simpleName:"Vec3fView",interfaces:[Or]},xC.prototype.get_za3lpa$=function(t){return this.attribOffset>=0&&0<=t&&t<=3?this.$outer.data.dataF.get_za3lpa$(this.$outer.offsetF_0+this.attribOffset+t|0):0},xC.prototype.set_24o109$=function(t,e){this.attribOffset>=0&&0<=t&&t<=3&&this.$outer.data.dataF.set_24o109$(this.$outer.offsetF_0+this.attribOffset+t|0,e)},xC.$metadata$={kind:$,simpleName:"Vec4fView",interfaces:[io]},wC.prototype.get_za3lpa$=function(t){return this.vecView.get_za3lpa$(t)},wC.prototype.set_24o109$=function(t,e){this.vecView.set_24o109$(t,e)},wC.$metadata$={kind:$,simpleName:"ColorWrapView",interfaces:[My]},Object.defineProperty(zC.prototype,"i",{configurable:!0,get:function(){return this.attribOffset_0<0?0:this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0|0)},set:function(t){this.attribOffset_0>=0&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0|0,t)}}),zC.$metadata$={kind:$,simpleName:"IntView",interfaces:[]},kC.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=1?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},kC.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=1&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},kC.$metadata$={kind:$,simpleName:"Vec2iView",interfaces:[zr]},SC.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=2?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},SC.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=2&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},SC.$metadata$={kind:$,simpleName:"Vec3iView",interfaces:[Xr]},CC.prototype.get_za3lpa$=function(t){return this.attribOffset_0>=0&&0<=t&&t<=3?this.$outer.data.dataI.get_za3lpa$(this.$outer.offsetI_0+this.attribOffset_0+t|0):0},CC.prototype.set_vux9f0$=function(t,e){this.attribOffset_0>=0&&0<=t&&t<=3&&this.$outer.data.dataI.set_vux9f0$(this.$outer.offsetI_0+this.attribOffset_0+t|0,e)},CC.$metadata$={kind:$,simpleName:"Vec4iView",interfaces:[No]},yC.$metadata$={kind:$,simpleName:"VertexView",interfaces:[Or]},Object.defineProperty(NC.prototype,"y",{configurable:!0,get:function(){return this.heightSigned<0?this.ySigned+this.heightSigned|0:this.ySigned}}),Object.defineProperty(NC.prototype,"height",{configurable:!0,get:function(){return it(this.heightSigned)}}),Object.defineProperty(NC.prototype,"aspectRatio",{configurable:!0,get:function(){return this.width/this.height}}),NC.prototype.isInViewport_dleff0$=function(t,e){return t>=this.x&&t<(this.x+this.width|0)&&e>=e&&e<e+this.height},NC.prototype.set_tjonv8$=function(t,e,i,n){this.x=t,this.width=i,this.ySigned=e,this.heightSigned=n},NC.$metadata$={kind:$,simpleName:"Viewport",interfaces:[]},Object.defineProperty(OC.prototype,"gl",{configurable:!0,get:function(){var t,e;if(null==(e=null!=(t=this.ctx)?t.gl_8be2vx$:null))throw cn("Platform.createContext() not called");return e}}),OC.prototype.createContext_s8od96$=function(t){if(null!=this.ctx)throw cn("Context was already created (multi-context is currently not supported in js");return this.ctx=new uN(t),x(this.ctx)},OC.$metadata$={kind:y,simpleName:"JsImpl",interfaces:[]};var MC=null;function jC(){return null===MC&&new OC,MC}function AC(t){var e;this.offscreenPass=t,this.fbos_0=M(),this.rbos_0=M(),this.drawMipLevels_0=this.offscreenPass.config.drawMipLevels,e=this.drawMipLevels_0?this.offscreenPass.config.mipLevels:1,this.renderMipLevels_0=e,this.isCreated_0=!1;var i,n=I(this.offscreenPass.config.nColorAttachments);i=n.length-1|0;for(var r=0;r<=i;r++)n[r]=null;this.colorTexs_0=n,this.depthTex_0=null}function IC(t){DC(),this.offscreenPass=t,this.fbos_0=M(),this.rbos_0=M(),this.isCreated_0=!1,this.colorTex_0=null}function RC(){LC=this;var t,e=I(6);t=e.length-1|0;for(var i=0;i<=t;i++){var n;t:do{switch(i){case 0:n=ka();break t;case 1:n=za();break t;case 2:n=Sa();break t;case 3:n=Ca();break t;case 4:n=xa();break t;case 5:n=wa();break t;default:throw Ze()}}while(0);e[i]=n}this.VIEWS_0=e}AC.prototype.draw_44a5h0$=function(t){var e,i,n;if(this.isCreated_0||this.create_0(t),this.isCreated_0){e=this.renderMipLevels_0;for(var r=0;r<e;r++)null!=(i=this.offscreenPass.onSetupMipLevel)&&i(r,t),this.offscreenPass.applyMipViewport_za3lpa$(r),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(r)),t.queueRenderer_8be2vx$.renderQueue_e0goaf$(this.offscreenPass.drawQueue);if(!this.drawMipLevels_0){n=this.colorTexs_0;for(var o=0;o!==n.length;++o)t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.colorTexs_0[o]),t.gl_8be2vx$.generateMipmap(WebGLRenderingContext.TEXTURE_2D)}this.copyToTextures_0(t),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)}},AC.prototype.copyToTextures_0=function(t){var i,n,r;i=this.renderMipLevels_0;for(var o=0;o<i;o++){t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(o)),t.gl_8be2vx$.readBuffer(WebGLRenderingContext.COLOR_ATTACHMENT0),n=this.offscreenPass.copyTargetsColor;for(var s=0;s!==n.size;++s){var a,l,u,p,h,d,f=this.offscreenPass.copyTargetsColor.get_za3lpa$(s),_=null!=(l=null!=(a=f.loadedTexture)?a.width:null)?l:0,m=null!=(p=null!=(u=f.loadedTexture)?u.height:null)?p:0;_===this.offscreenPass.width&&m===this.offscreenPass.height||(null!=(h=f.loadedTexture)&&h.dispose(),this.createCopyTexColor_0(f,t),_=x(f.loadedTexture).width,m=x(f.loadedTexture).height),_>>=o,m>>=o;var $=e.isType(d=f.loadedTexture,EN)?d:c();t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,$.texture),t.gl_8be2vx$.copyTexSubImage2D(WebGLRenderingContext.TEXTURE_2D,o,0,0,0,0,_,m)}}if(!this.drawMipLevels_0){r=this.offscreenPass.copyTargetsColor;for(var y=0;y!==r.size;++y){var v,g=this.offscreenPass.copyTargetsColor.get_za3lpa$(y),b=e.isType(v=g.loadedTexture,EN)?v:c();t.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_2D,b.texture),t.gl_8be2vx$.generateMipmap(WebGLRenderingContext.TEXTURE_2D)}}},AC.prototype.dispose_aemszp$=function(t){var i,n,r,o,s;for(e.isType(t,uN)||c(),r=this.fbos_0.iterator();r.hasNext();){var a=r.next();t.gl_8be2vx$.deleteFramebuffer(a)}for(o=this.rbos_0.iterator();o.hasNext();){var l=o.next();t.gl_8be2vx$.deleteRenderbuffer(l)}for(this.fbos_0.clear(),this.rbos_0.clear(),s=this.offscreenPass.colorTextures.iterator();s.hasNext();){var u=s.next();u.loadingState===wh()&&u.dispose()}null!=(i=this.offscreenPass.depthTexture)&&i.loadingState===wh()&&i.dispose(),n=this.colorTexs_0;for(var p=0;p!==n.length;++p)this.colorTexs_0[p]=null;this.depthTex_0=null,this.isCreated_0=!1},AC.prototype.applySize_w70mbp$=function(t,i,n){var r;this.dispose_aemszp$(n),this.create_0(e.isType(r=n,uN)?r:c())},AC.prototype.create_0=function(t){var e,i=t.gl_8be2vx$;this.offscreenPass.config.colorRenderTarget===_a()&&this.createColorTexs_0(t),this.offscreenPass.config.depthRenderTarget===_a()&&this.createDepthTex_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){var r=this.offscreenPass.getMipWidth_za3lpa$(n),o=this.offscreenPass.getMipHeight_za3lpa$(n),s=i.createFramebuffer();if(i.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,s),this.offscreenPass.config.colorRenderTarget===_a()){var a,l,u=this.colorTexs_0,p=0;for(a=0;a!==u.length;++a){var c=u[a],h=(p=(l=p)+1|0,l);i.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0+h|0,WebGLRenderingContext.TEXTURE_2D,c,n)}var d,f=new Int32Array(this.colorTexs_0.length);d=f.length-1|0;for(var _=0;_<=d;_++)f[_]=WebGLRenderingContext.COLOR_ATTACHMENT0+_|0;var m=f;i.drawBuffers(m)}else{var $=i.createRenderbuffer();i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,$),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,$N(ph()),r,o),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,WebGLRenderingContext.RENDERBUFFER,$),this.rbos_0.add_11rb$($)}if(this.offscreenPass.config.depthRenderTarget===_a())i.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.TEXTURE_2D,this.depthTex_0,n);else{var y=i.createRenderbuffer();i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,y),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,WebGL2RenderingContext.DEPTH_COMPONENT24,r,o),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.RENDERBUFFER,y),this.rbos_0.add_11rb$(y)}this.fbos_0.add_11rb$(s)}this.isCreated_0=!0},AC.prototype.createColorTexs_0=function(t){var i;i=this.offscreenPass.colorTextures;for(var n=0;n!==i.size;++n){var r,o=this.offscreenPass.config.colorAttachments.get_za3lpa$(n);if(null!=o.providedTexture)this.colorTexs_0[n]=(e.isType(r=o.providedTexture.loadedTexture,EN)?r:c()).texture;else{var s=o.colorFormat,a=$N(s),l=this.offscreenPass.width,u=this.offscreenPass.height,p=this.offscreenPass.config.mipLevels,h=Ch().estimatedTexSize_4qozqa$(l,u,1,p,gN(s)),d=new EN(t,WebGLRenderingContext.TEXTURE_2D,t.gl_8be2vx$.createTexture(),h);d.setSize_qt1dr2$(l,u,1),d.applySamplerProps_xetyfc$(this.offscreenPass.colorTextures.get_za3lpa$(n).props),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,p,a,l,u),this.colorTexs_0[n]=d.texture,this.offscreenPass.colorTextures.get_za3lpa$(n).loadedTexture=d,this.offscreenPass.colorTextures.get_za3lpa$(n).loadingState=wh()}}},AC.prototype.createDepthTex_0=function(t){var i,n=x(this.offscreenPass.config.depthAttachment);if(null!=n.providedTexture)this.depthTex_0=(e.isType(i=n.providedTexture.loadedTexture,EN)?i:c()).texture;else{var r=WebGL2RenderingContext.DEPTH_COMPONENT24,o=this.offscreenPass.width,s=this.offscreenPass.height,a=this.offscreenPass.config.mipLevels,l=this.offscreenPass.config.depthAttachment,u=Ch().estimatedTexSize_4qozqa$(o,s,1,a,4),p=new EN(t,WebGLRenderingContext.TEXTURE_2D,t.gl_8be2vx$.createTexture(),u);p.setSize_qt1dr2$(o,s,1),p.applySamplerProps_xetyfc$(x(this.offscreenPass.depthTexture).props),l.depthCompareOp!==yl()&&(t.gl_8be2vx$.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGL2RenderingContext.TEXTURE_COMPARE_MODE,WebGL2RenderingContext.COMPARE_REF_TO_TEXTURE),t.gl_8be2vx$.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGL2RenderingContext.TEXTURE_COMPARE_FUNC,bN(l.depthCompareOp))),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,a,r,o,s),this.depthTex_0=p.texture,this.offscreenPass.depthTexture.loadedTexture=p,this.offscreenPass.depthTexture.loadingState=wh()}},AC.prototype.createCopyTexColor_0=function(t,e){var i=$N(t.props.format),n=this.offscreenPass.width,r=this.offscreenPass.height,o=this.offscreenPass.config.mipLevels,s=Ch().estimatedTexSize_4qozqa$(n,r,1,o,gN(t.props.format)),a=new EN(e,WebGLRenderingContext.TEXTURE_2D,e.gl_8be2vx$.createTexture(),s);a.setSize_qt1dr2$(n,r,1),a.applySamplerProps_xetyfc$(t.props),e.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_2D,o,i,n,r),t.loadedTexture=a,t.loadingState=wh()},AC.$metadata$={kind:$,simpleName:"OffscreenPass2dImpl",interfaces:[]},IC.prototype.draw_44a5h0$=function(t){var e,i;this.isCreated_0||this.create_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){null!=(i=this.offscreenPass.onSetupMipLevel)&&i(n,t),this.offscreenPass.applyMipViewport_za3lpa$(n),t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbos_0.get_za3lpa$(n));for(var r=0;r<6;r++){var o=DC().VIEWS_0[r],s=this.offscreenPass.drawQueues[o.index];t.gl_8be2vx$.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X+r|0,this.colorTex_0,n),t.queueRenderer_8be2vx$.renderQueue_e0goaf$(s),this.copyToTextures_0(r,n,t)}}t.gl_8be2vx$.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)},IC.prototype.copyToTextures_0=function(t,i,n){var r;n.gl_8be2vx$.readBuffer(WebGLRenderingContext.COLOR_ATTACHMENT0),r=this.offscreenPass.copyTargetsColor;for(var o=0;o!==r.size;++o){var s,a,l,u,p,h,d=this.offscreenPass.copyTargetsColor.get_za3lpa$(o),f=null!=(a=null!=(s=d.loadedTexture)?s.width:null)?a:0,_=null!=(u=null!=(l=d.loadedTexture)?l.height:null)?u:0;f===this.offscreenPass.width&&_===this.offscreenPass.height||(null!=(p=d.loadedTexture)&&p.dispose(),this.createCopyTexColor_0(d,n),f=x(d.loadedTexture).width,_=x(d.loadedTexture).height),f>>=i,_>>=i;var m=e.isType(h=d.loadedTexture,EN)?h:c();n.gl_8be2vx$.bindTexture(WebGLRenderingContext.TEXTURE_CUBE_MAP,m.texture),n.gl_8be2vx$.copyTexSubImage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X+t|0,i,0,0,0,0,f,_)}},IC.prototype.dispose_aemszp$=function(t){var i,n,r,o;for(e.isType(t,uN)||c(),n=this.fbos_0.iterator();n.hasNext();){var s=n.next();t.gl_8be2vx$.deleteFramebuffer(s)}for(r=this.rbos_0.iterator();r.hasNext();){var a=r.next();t.gl_8be2vx$.deleteRenderbuffer(a)}for(this.fbos_0.clear(),this.rbos_0.clear(),o=this.offscreenPass.colorTextures.iterator();o.hasNext();){var l=o.next();l.loadingState===wh()&&l.dispose()}null!=(i=this.offscreenPass.depthTexture)&&i.loadingState===wh()&&i.dispose(),this.colorTex_0=null,this.isCreated_0=!1},IC.prototype.applySize_w70mbp$=function(t,i,n){var r;this.dispose_aemszp$(n),this.create_0(e.isType(r=n,uN)?r:c())},IC.prototype.create_0=function(t){var e,i=t.gl_8be2vx$;this.createColorTex_0(t),e=this.offscreenPass.config.mipLevels;for(var n=0;n<e;n++){var r=i.createFramebuffer(),o=i.createRenderbuffer(),s=this.offscreenPass.getMipWidth_za3lpa$(n),a=this.offscreenPass.getMipHeight_za3lpa$(n);i.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,r),i.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,o),i.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,WebGL2RenderingContext.DEPTH_COMPONENT24,s,a),i.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.DEPTH_ATTACHMENT,WebGLRenderingContext.RENDERBUFFER,o),this.fbos_0.add_11rb$(r),this.rbos_0.add_11rb$(o)}this.isCreated_0=!0},IC.prototype.createColorTex_0=function(t){var e=this.offscreenPass.config.colorAttachments.get_za3lpa$(0).colorFormat,i=$N(e),n=this.offscreenPass.width,r=this.offscreenPass.height,o=this.offscreenPass.config.mipLevels,s=Ch().estimatedTexSize_4qozqa$(n,r,6,o,gN(e)),a=new EN(t,WebGLRenderingContext.TEXTURE_CUBE_MAP,t.gl_8be2vx$.createTexture(),s);a.setSize_qt1dr2$(n,r,1),a.applySamplerProps_xetyfc$(x(this.offscreenPass.colorTexture).props),t.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP,o,i,n,r),this.colorTex_0=a.texture,x(this.offscreenPass.colorTexture).loadedTexture=a,x(this.offscreenPass.colorTexture).loadingState=wh()},IC.prototype.createCopyTexColor_0=function(t,e){var i=$N(t.props.format),n=this.offscreenPass.width,r=this.offscreenPass.height,o=this.offscreenPass.config.mipLevels,s=Ch().estimatedTexSize_4qozqa$(n,r,6,o,gN(t.props.format)),a=new EN(e,WebGLRenderingContext.TEXTURE_CUBE_MAP,e.gl_8be2vx$.createTexture(),s);a.setSize_qt1dr2$(n,r,1),a.applySamplerProps_xetyfc$(t.props),e.gl_8be2vx$.texStorage2D(WebGLRenderingContext.TEXTURE_CUBE_MAP,o,i,n,r),t.loadedTexture=a,t.loadingState=wh()},RC.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var LC=null;function DC(){return null===LC&&new RC,LC}function qC(t){switch(this.nSlots=0,this.attribSize=0,t.type.name){case"FLOAT":this.nSlots=1,this.attribSize=1;break;case"VEC_2F":this.nSlots=1,this.attribSize=2;break;case"VEC_3F":this.nSlots=1,this.attribSize=3;break;case"VEC_4F":this.nSlots=1,this.attribSize=4;break;case"MAT_2F":this.nSlots=2,this.attribSize=2;break;case"MAT_3F":this.nSlots=3,this.attribSize=3;break;case"MAT_4F":this.nSlots=4,this.attribSize=4;break;case"INT":this.nSlots=1,this.attribSize=1;break;case"VEC_2I":this.nSlots=1,this.attribSize=2;break;case"VEC_3I":this.nSlots=1,this.attribSize=3;break;case"VEC_4I":this.nSlots=1,this.attribSize=4;break;default:e.noWhenBranchMatched()}}function FC(t,i){this.vertexSrc=t,this.fragmentSrc=i;var n=st(this.vertexSrc),r=new kt(new kt(e.Long.fromInt(n)).data.shiftLeft(32)),o=st(this.fragmentSrc),s=new kt(e.Long.fromInt(o));this.longHash=new kt(r.data.add(s.data))}function BC(t,i){var n,r;this.maxWidth=t,this.maxHeight=i,this.canvas_0=e.isType(n=document.createElement("canvas"),HTMLCanvasElement)?n:c(),this.canvasCtx_0=null,this.charMaps_0=z(),this.canvas_0.width=this.maxWidth,this.canvas_0.height=this.maxHeight,this.canvasCtx_0=e.isType(r=this.canvas_0.getContext("2d"),CanvasRenderingContext2D)?r:c()}function UC(t,e){if(id.call(this),this.data_a0fx42$_0=t,!t.complete)throw bt("Image must be complete");this.width=t.width,this.height=t.height,this.depth=1,null!=e&&(this.format=e)}function VC(t,i,n,r){var o,s;if(id.call(this),this.data_e6041x$_0=null,!t.complete)throw bt("Image must be complete");this.width=t.width/i|0,this.height=t.height/n|0,this.depth=e.imul(i,n),null!=r&&(this.format=r);var a=e.isType(o=document.createElement("canvas"),HTMLCanvasElement)?o:c();a.width=this.width,a.height=this.height;var l,u=e.isType(s=a.getContext("2d"),CanvasRenderingContext2D)?s:c(),p=I(this.depth);l=p.length-1|0;for(var h=0;h<=l;h++){var d=h%i,f=h/n|0,_=this.width,m=this.height;u.drawImage(t,d*_,f*m,_,m,0,0,_,m),p[h]=u.getImageData(0,0,_,m)}this.data_e6041x$_0=p}function GC(t,e){lN(),ii.call(this,t),this.ctx=e,this.pako_0=i(14),this.fontGenerator_0=new BC(2048,2048)}function HC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$rawRef=e}function WC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$textureRef=e}function XC(t,e){return function(i){return t.complete_11rb$(e)}}function KC(t,e){return function(i,n,r,o,s){return u(t.url,"data:")?e.completeExceptionally_tcv7n7$(cn("Failed loading tex from data URL")):e.completeExceptionally_tcv7n7$(cn("Failed loading tex from "+t.url))}}function YC(t,e,i){l.call(this,i),this.exceptionState_0=1,this.$this=t,this.local$tmp$=void 0,this.local$ref=e}function ZC(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$loader=t,this.local$this$JsAssetManager=e,this.local$$receiver=i}function JC(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$assetPath=t,this.local$it=i}function QC(t){return function(e,i,n,r){var o=new JC(t,e,i,this,n);return r?o:o.doResume(null)}}function tN(t,e,i,n){l.call(this,n),this.exceptionState_0=1,this.$this=t,this.local$tex=void 0,this.local$assetPath=e,this.local$props=i}function eN(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$texData=t}function iN(t,e,i,n,r,o,s,a,u,p){l.call(this,p),this.$controller=u,this.exceptionState_0=1,this.local$closure$ft=t,this.local$closure$bk=e,this.local$closure$lt=i,this.local$closure$rt=n,this.local$closure$up=r,this.local$closure$dn=o,this.local$it=a}function nN(t,e,i,n,r,o){return function(s,a,l,u){var p=new iN(t,e,i,n,r,o,s,a,this,l);return u?p:p.doResume(null)}}function rN(t,e,i,n,r,o,s,a,u){l.call(this,u),this.exceptionState_0=1,this.$this=t,this.local$tex=void 0,this.local$ft=e,this.local$bk=i,this.local$lt=n,this.local$rt=r,this.local$up=o,this.local$dn=s,this.local$props=a}function oN(t,e,i,n,r){l.call(this,r),this.$controller=n,this.exceptionState_0=1,this.local$closure$texData=t}function sN(){aN=this,this.MAX_GENERATED_TEX_WIDTH_0=2048,this.MAX_GENERATED_TEX_HEIGHT_0=2048}IC.$metadata$={kind:$,simpleName:"OffscreenPassCubeImpl",interfaces:[]},qC.$metadata$={kind:$,simpleName:"PlatformAttributeProps",interfaces:[]},FC.$metadata$={kind:$,simpleName:"ShaderCode",interfaces:[]},BC.prototype.getCharMap_ttufcy$=function(t){var e,i=this.charMaps_0,n=i.get_11rb$(t);if(null==n){var r=this.generateCharMap_0(t);i.put_xwzc9p$(t,r),e=r}else e=n;return e},BC.prototype.generateCharMap_0=function(t){var i;this.canvasCtx_0.clearRect(0,0,this.maxWidth,this.maxHeight);var n="lighter ";0!=(1&t.style)&&(n="bold "),0!=(2&t.style)&&(n+="italic ");var r=z(),o=this.makeMap_0(t,n,r),s=this.canvasCtx_0.getImageData(0,0,this.maxWidth,o),a=xE(e.imul(this.maxWidth,o));i=a.capacity;for(var l=0;l<i;l++)a.put_s8j3t7$(s.data[3+(4*l|0)|0]);return new hg(new ad(a,this.maxWidth,o,ph()),r,t)},BC.prototype.makeMap_0=function(t,e,i){var n,r;this.canvasCtx_0.font=e+t.sizePts+"px "+t.family,this.canvasCtx_0.fillStyle="#ffffff";var o=at(1.1*t.sizePts),s=at(.5*t.sizePts),a=at(1.6*t.sizePts);this.canvasCtx_0.beginPath(),this.canvasCtx_0.moveTo(.5,0),this.canvasCtx_0.lineTo(.5,1),this.canvasCtx_0.stroke();var l=1,u=o;for(n=Be(t.chars);n.hasNext();){var p=O(n.next());106===p&&(l+=.1*t.sizePts);var c=String.fromCharCode(p),h=at(this.canvasCtx_0.measureText(c).width),d=at(h+6);if(l+d>this.maxWidth&&(l=0,(u+=a+10)+s>this.maxHeight))break;var f=h,_=a,m=new cg;m.width=f,m.height=_,m.xOffset=0,m.yBaseline=o,m.advance=m.width,m.uvMin.set_dleff0$(l+3,u-o),m.uvMax.set_dleff0$(l+3+f,u-o+_);var $=E(p);i.put_xwzc9p$($,m),this.canvasCtx_0.fillText(c,l+3,u),l+=d}var y=this.maxWidth,v=this.nextPow2_0(u+s);for(r=i.values.iterator();r.hasNext();){var g=r.next();g.uvMin.x=g.uvMin.x/y,g.uvMin.y=g.uvMin.y/v,g.uvMax.x=g.uvMax.x/y,g.uvMax.y=g.uvMax.y/v}return v},BC.prototype.nextPow2_0=function(t){for(var e=16;e<t&&e<this.maxHeight;)e<<=1;return e},BC.$metadata$={kind:$,simpleName:"FontMapGenerator",interfaces:[]},Object.defineProperty(UC.prototype,"data",{configurable:!0,get:function(){return this.data_a0fx42$_0}}),UC.$metadata$={kind:$,simpleName:"ImageTextureData",interfaces:[id]},Object.defineProperty(VC.prototype,"data",{configurable:!0,get:function(){return this.data_e6041x$_0}}),VC.$metadata$={kind:$,simpleName:"ImageAtlasTextureData",interfaces:[id]},HC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},HC.prototype=Object.create(l.prototype),HC.prototype.constructor=HC,HC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadRaw_0(this.local$rawRef.url,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new wi(this.local$rawRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadRaw_ye9lq$=function(t,e,i){var n=new HC(this,t,e);return i?n:n.doResume(null)},WC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},WC.prototype=Object.create(l.prototype),WC.prototype.constructor=WC,WC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.$this.loadImage_0(this.local$textureRef,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return new zi(this.local$textureRef,this.result_0);default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadTexture_q13quj$=function(t,e,i){var n=new WC(this,t,e);return i?n:n.doResume(null)},GC.prototype.loadRaw_0=function(t,i){var n,r,o=m(this.job),a=new XMLHttpRequest;return a.responseType="arraybuffer",a.onload=(n=a,r=o,function(t){var i,o=new Uint8Array(e.isType(i=n.response,ArrayBuffer)?i:c());return r.complete_11rb$(new mE(o))}),a.onerror=function(t,i,n){return function(r){t.complete_11rb$(null);var o=n,a=DE.Log,l=$k.ERROR,u=e.getKClassFromExpression(o).simpleName;return l.level>=a.level.level&&a.printer(l,u,"Failed loading resource "+i+": "+r),s}}(o,t,this),a.open("GET",t),a.send(),o.await(i)},YC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},YC.prototype=Object.create(l.prototype),YC.prototype.constructor=YC,YC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=m(),e=new Image;if(e.onload=XC(t,e),e.onerror=KC(this.local$ref,t),e.crossOrigin="","decoding"in e&&(e.decoding="async"),e.src=this.local$ref.url,this.local$ref.isAtlas){if(this.state_0=3,this.result_0=t.await(this),this.result_0===a)return a;continue}if(this.state_0=2,this.result_0=t.await(this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:this.local$tmp$=new UC(this.result_0,this.local$ref.fmt),this.state_0=4;continue;case 3:this.local$tmp$=new VC(this.result_0,this.local$ref.tilesX,this.local$ref.tilesY,this.local$ref.fmt),this.state_0=4;continue;case 4:return this.local$tmp$;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadImage_0=function(t,e,i){var n=new YC(this,t,e);return i?n:n.doResume(null)},ZC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},ZC.prototype=Object.create(l.prototype),ZC.prototype.constructor=ZC,ZC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$closure$loader(this.local$$receiver,this.local$this$JsAssetManager,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadTextureAsync_72pzmk$=function(t){return Je(this,void 0,void 0,(e=t,i=this,function(t,n,r){var o=new ZC(e,i,t,this,n);return r?o:o.doResume(null)}));var e,i},GC.prototype.createCharMap_ttufcy$=function(t){return this.fontGenerator_0.getCharMap_ttufcy$(t)},GC.prototype.inflate_ay2i3f$=function(t){var i,n,r=(e.isType(i=t,mE)?i:c()).buffer;return new mE(e.isType(n=this.pako_0.inflate(r),Uint8Array)?n:c())},GC.prototype.createTextureData_asds6l$=function(t,i,n){for(var r,o,s,a=(e.isType(r=t,mE)?r:c()).buffer,l=[],u=0;u<a.length;u+=32768)l.push(String.fromCharCode.apply(null,a.subarray(u,u+32768)));s=l.join("");var p=new bi("data:"+i+";base64,"+("string"==typeof(o=window.btoa(s))?o:c()),!0,null,!1);return this.loadImage_0(p,n)},JC.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},JC.prototype=Object.create(l.prototype),JC.prototype.constructor=JC,JC.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadTextureData_9n4zzi$(this.local$closure$assetPath,void 0,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},tN.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},tN.prototype=Object.create(l.prototype),tN.prototype.constructor=tN,tN.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.local$tex=new Eh(this.local$props,this.$this.assetPathToName_61zpoe$(this.local$assetPath),QC(this.local$assetPath)),this.state_0=2,this.result_0=this.$this.loadTextureData_9n4zzi$(this.local$assetPath,this.local$props.format,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var t=this.result_0;return this.local$tex.loadedTexture=dE().loadTexture2d_hlfduu$(this.$this.ctx,this.local$props,t),this.local$tex.loadingState=wh(),this.local$tex;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadAndPrepareTexture_va0f2y$$default=function(t,e,i,n){var r=new tN(this,t,e,i);return n?r:r.doResume(null)},eN.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},eN.prototype=Object.create(l.prototype),eN.prototype.constructor=eN,eN.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$texData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadAndPrepareTexture_siesr9$$default=function(t,e,i){var n,r=new Eh(e,i,(n=t,function(t,e,i,r){var o=new eN(n,t,e,this,i);return r?o:o.doResume(null)}));return r.loadedTexture=dE().loadTexture2d_hlfduu$(this.ctx,e,t),r.loadingState=wh(),r},iN.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},iN.prototype=Object.create(l.prototype),iN.prototype.constructor=iN,iN.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:if(this.state_0=2,this.result_0=this.local$it.loadCubeMapTextureData_r3y0ew$(this.local$closure$ft,this.local$closure$bk,this.local$closure$lt,this.local$closure$rt,this.local$closure$up,this.local$closure$dn,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:return this.result_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},rN.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},rN.prototype=Object.create(l.prototype),rN.prototype.constructor=rN,rN.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:var t=this.$this.cubeMapAssetPathToName_r3y0ew$(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn);if(this.local$tex=new Mh(this.local$props,t,nN(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn)),this.state_0=2,this.result_0=this.$this.loadCubeMapTextureData_r3y0ew$(this.local$ft,this.local$bk,this.local$lt,this.local$rt,this.local$up,this.local$dn,this),this.result_0===a)return a;continue;case 1:throw this.exception_0;case 2:var e=this.result_0;return this.local$tex.loadedTexture=dE().loadTextureCube_deh7i3$(this.$this.ctx,this.local$props,e),this.local$tex.loadingState=wh(),this.local$tex;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadAndPrepareCubeMap_oecnw4$$default=function(t,e,i,n,r,o,s,a,l){var u=new rN(this,t,e,i,n,r,o,s,a);return l?u:u.doResume(null)},oN.$metadata$={kind:e.Kind.CLASS,simpleName:null,interfaces:[l]},oN.prototype=Object.create(l.prototype),oN.prototype.constructor=oN,oN.prototype.doResume=function(){for(;;)try{switch(this.state_0){case 0:return this.local$closure$texData;case 1:throw this.exception_0;default:throw this.state_0=1,new Error("State Machine Unreachable execution")}}catch(t){if(1===this.state_0)throw this.exceptionState_0=this.state_0,t;this.state_0=this.exceptionState_0,this.exception_0=t}},GC.prototype.loadAndPrepareCubeMap_q9pwzk$$default=function(t,e,i){var n,r=new Mh(e,i,(n=t,function(t,e,i,r){var o=new oN(n,t,e,this,i);return r?o:o.doResume(null)}));return r.loadedTexture=dE().loadTextureCube_deh7i3$(this.ctx,e,t),r.loadingState=wh(),r},sN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var aN=null;function lN(){return null===aN&&new sN,aN}function uN(t){var i,n,r,o,a;dN(),on.call(this),this.props=t,this.assetMgr_z54vt4$_0=new GC(this.props.assetsBaseDir,this),this.shaderGenerator_d0v5kq$_0=new aE,this.queueRenderer_8be2vx$=new oE(this),this.afterRenderActions_8be2vx$=M(),this.windowWidth_7sdnb6$_0=0,this.windowHeight_xsf9ux$_0=0,this.canvas_0=null,this.gl_8be2vx$=null,this.sysInfo_0=M(),this.animationMillis_0=0,this.glCapabilities=new fN,this.canvas_0=e.isType(i=document.getElementById(this.props.canvasName),HTMLCanvasElement)?i:c();var l=this.canvas_0.getContext("webgl2");if(null==l&&(l=this.canvas_0.getContext("experimental-webgl2")),null==l)throw alert("Unable to initialize WebGL2 context. Your browser may not support it."),cn("WebGL2 context required");this.gl_8be2vx$=e.isType(n=l,WebGL2RenderingContext)?n:c(),this.sysInfo_0.add_11rb$("WebGL 2.0"),this.glCapabilities.maxTexUnits=this.gl_8be2vx$.getParameter(WebGLRenderingContext.MAX_TEXTURE_IMAGE_UNITS),this.glCapabilities.hasFloatTextures=null!=this.gl_8be2vx$.getExtension("EXT_color_buffer_float");var u,p=null!=(o=null!=(r=this.gl_8be2vx$.getExtension("EXT_texture_filter_anisotropic"))?r:this.gl_8be2vx$.getExtension("MOZ_EXT_texture_filter_anisotropic"))?o:this.gl_8be2vx$.getExtension("WEBKIT_EXT_texture_filter_anisotropic");null!=p&&(this.glCapabilities.maxAnisotropy="number"==typeof(a=this.gl_8be2vx$.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT))?a:c(),this.glCapabilities.glTextureMaxAnisotropyExt=p.TEXTURE_MAX_ANISOTROPY_EXT),this.screenDpi=jC().dpi,this.windowWidth=this.canvas_0.clientWidth,this.windowHeight=this.canvas_0.clientHeight,this.canvas_0.oncontextmenu=Kt("preventDefault",(function(t){return t.preventDefault(),s})),this.canvas_0.onmousemove=(u=this,function(t){var e=u.canvas_0.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top;return u.inputMgr.handleMouseMove_dleff0$(i,n),s}),this.canvas_0.onmousedown=function(t){return function(e){return t.inputMgr.handleMouseButtonStates_za3lpa$(e.buttons),s}}(this),this.canvas_0.onmouseup=function(t){return function(e){return t.inputMgr.handleMouseButtonStates_za3lpa$(e.buttons),s}}(this),this.canvas_0.onmouseleave=function(t){return function(e){return t.inputMgr.handleMouseExit(),s}}(this),this.canvas_0.onwheel=function(t){return function(e){var i=-e.deltaY/3;return 0===e.deltaMode&&(i/=30),t.inputMgr.handleMouseScroll_mx4ult$(i),e.preventDefault(),s}}(this),this.canvas_0.addEventListener("touchstart",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchStart_nhq4am$(l.identifier,_N(l),mN(l))}return s}}(this),!1),this.canvas_0.addEventListener("touchend",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchEnd_za3lpa$(l.identifier)}return s}}(this),!1),this.canvas_0.addEventListener("touchcancel",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchCancel_za3lpa$(l.identifier)}return s}}(this),!1),this.canvas_0.addEventListener("touchmove",function(t){return function(i){var n,r;i.preventDefault();var o=(e.isType(n=i,TouchEvent)?n:c()).changedTouches;r=o.length;for(var a=0;a<r;a++){var l=o.item(a);t.inputMgr.handleTouchMove_nhq4am$(l.identifier,_N(l),mN(l))}return s}}(this),!1),document.onkeydown=function(t){return function(e){return t.handleKeyDown_0(e),s}}(this),document.onkeyup=function(t){return function(e){return t.handleKeyUp_0(e),s}}(this)}function pN(){this.canvasName="glCanvas",this.excludedKeyCodes=Rt(["F5"]),this.assetsBaseDir="./assets"}function cN(){hN=this,this.KEY_CODE_MAP=Et([_t("ControlLeft",-1),_t("ControlRight",-2),_t("ShiftLeft",-3),_t("ShiftRight",-4),_t("AltLeft",-5),_t("AltRight",-6),_t("MetaLeft",-7),_t("MetaRight",-8),_t("Escape",-9),_t("ContextMenu",-10),_t("Enter",-11),_t("NumpadEnter",-12),_t("NumpadDivide",-13),_t("NumpadMultiply",-14),_t("NumpadAdd",-15),_t("NumpadSubtract",-16),_t("Backspace",-17),_t("Tab",-18),_t("Delete",-19),_t("Insert",-20),_t("Home",-21),_t("End",-22),_t("PageUp",-23),_t("PageDown",-24),_t("ArrowLeft",-25),_t("ArrowRight",-26),_t("ArrowUp",-27),_t("ArrowDown",-28),_t("F1",-29),_t("F2",-30),_t("F3",-31),_t("F4",-32),_t("F5",-33),_t("F6",-34),_t("F7",-35),_t("F8",-36),_t("F9",-37),_t("F10",-38),_t("F11",-39),_t("F12",-40),_t("Space",32)])}GC.$metadata$={kind:$,simpleName:"JsAssetManager",interfaces:[ii]},Object.defineProperty(uN.prototype,"assetMgr",{configurable:!0,get:function(){return this.assetMgr_z54vt4$_0}}),Object.defineProperty(uN.prototype,"shaderGenerator",{configurable:!0,get:function(){return this.shaderGenerator_d0v5kq$_0}}),Object.defineProperty(uN.prototype,"windowWidth",{configurable:!0,get:function(){return this.windowWidth_7sdnb6$_0},set:function(t){this.windowWidth_7sdnb6$_0=t}}),Object.defineProperty(uN.prototype,"windowHeight",{configurable:!0,get:function(){return this.windowHeight_xsf9ux$_0},set:function(t){this.windowHeight_xsf9ux$_0=t}}),uN.prototype.handleKeyDown_0=function(t){var e=this.translateKeyCode_0(t.code);if(0!==e){var i=0;t.altKey&&(i|=4),t.ctrlKey&&(i|=2),t.shiftKey&&(i|=1),t.metaKey&&(i|=8);var n=2;t.repeat&&(n|=4),this.inputMgr.keyEvent_qt1dr2$(e,i,n)}1===t.key.length&&this.inputMgr.charTyped_s8itvh$(t.key.charCodeAt(0)),this.props.excludedKeyCodes.contains_11rb$(t.code)||t.preventDefault()},uN.prototype.handleKeyUp_0=function(t){var e=this.translateKeyCode_0(t.code);if(0!==e){var i=0;t.altKey&&(i|=4),t.ctrlKey&&(i|=2),t.shiftKey&&(i|=1),t.metaKey&&(i|=8),this.inputMgr.keyEvent_qt1dr2$(e,i,1)}this.props.excludedKeyCodes.contains_11rb$(t.code)||t.preventDefault()},uN.prototype.translateKeyCode_0=function(t){var e;return 4===t.length&&u(t,"Key")?0|t.charCodeAt(3):null!=(e=dN().KEY_CODE_MAP.get_11rb$(t))?e:0},uN.prototype.renderFrame_0=function(t){var e,i=(t-this.animationMillis_0)/1e3;this.animationMillis_0=t,this.windowWidth=this.canvas_0.clientWidth,this.windowHeight=this.canvas_0.clientHeight,this.windowWidth===this.canvas_0.width&&this.windowHeight===this.canvas_0.height||(this.canvas_0.width=this.windowWidth,this.canvas_0.height=this.windowHeight),this.render_14dthe$(i),this.draw_0(),this.gl_8be2vx$.finish(),window.requestAnimationFrame((e=this,function(t){return e.renderFrame_0(t),s}))},uN.prototype.draw_0=function(){var t,e;this.disposablePipelines_8be2vx$.isEmpty()||(this.queueRenderer_8be2vx$.disposePipelines_z4np8a$(this.disposablePipelines_8be2vx$),this.disposablePipelines_8be2vx$.clear()),this.engineStats.resetPerFrameCounts(),t=this.backgroundPasses;for(var i=0;i!==t.size;++i)this.backgroundPasses.get_za3lpa$(i).isEnabled&&(this.drawOffscreen_0(this.backgroundPasses.get_za3lpa$(i)),this.backgroundPasses.get_za3lpa$(i).afterDraw_aemszp$(this));e=this.scenes;for(var n=0;n!==e.size;++n){var r,o=this.scenes.get_za3lpa$(n);if(o.isVisible){r=o.offscreenPasses;for(var s=0;s!==r.size;++s)o.offscreenPasses.get_za3lpa$(s).isEnabled&&(this.drawOffscreen_0(o.offscreenPasses.get_za3lpa$(s)),o.offscreenPasses.get_za3lpa$(s).afterDraw_aemszp$(this));this.queueRenderer_8be2vx$.renderQueue_e0goaf$(o.mainRenderPass.drawQueue),o.mainRenderPass.afterDraw_aemszp$(this)}}if(!this.afterRenderActions_8be2vx$.isEmpty()){var a;for(a=this.afterRenderActions_8be2vx$.iterator();a.hasNext();)a.next()();this.afterRenderActions_8be2vx$.clear()}},uN.prototype.drawOffscreen_0=function(t){if(e.isType(t,$a))t.impl_8be2vx$.draw_44a5h0$(this);else{if(!e.isType(t,ya))throw G("Offscreen pass type not implemented: "+t);t.impl_8be2vx$.draw_44a5h0$(this)}},uN.prototype.openUrl_61zpoe$=function(t){window.open(t)},uN.prototype.run=function(){var t;window.requestAnimationFrame((t=this,function(e){return t.renderFrame_0(e),s}))},uN.prototype.destroy=function(){},uN.prototype.getSysInfos=function(){return this.sysInfo_0},uN.prototype.getWindowViewport_ahq5yh$=function(t){t.set_tjonv8$(0,0,this.windowWidth,this.windowHeight)},pN.$metadata$={kind:$,simpleName:"InitProps",interfaces:[]},cN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var hN=null;function dN(){return null===hN&&new cN,hN}function fN(){this.maxTexUnits_pg826n$_0=16,this.hasFloatTextures_jm9wjj$_0=!1,this.maxAnisotropy_q24ucr$_0=1,this.glTextureMaxAnisotropyExt_a0zvh2$_0=0}function _N(t){var i,n,r,o;return t.clientX-(null!=(o=null!=(r=null!=(n=e.isType(i=t.target,HTMLCanvasElement)?i:null)?n.clientLeft:null)?r:null)?o:0)}function mN(t){var i,n,r,o;return t.clientY-(null!=(o=null!=(r=null!=(n=e.isType(i=t.target,HTMLCanvasElement)?i:null)?n.clientTop:null)?r:null)?o:0)}function $N(t){switch(t.name){case"R":return WebGL2RenderingContext.R8;case"RG":return WebGL2RenderingContext.RG8;case"RGB":return WebGL2RenderingContext.RGB8;case"RGBA":return WebGL2RenderingContext.RGBA8;case"R_F16":return WebGL2RenderingContext.R16F;case"RG_F16":return WebGL2RenderingContext.RG16F;case"RGB_F16":return WebGL2RenderingContext.RGB16F;case"RGBA_F16":return WebGL2RenderingContext.RGBA16F;default:return e.noWhenBranchMatched()}}function yN(t){switch(t.name){case"R":case"RG":case"RGB":case"RGBA":return WebGLRenderingContext.UNSIGNED_BYTE;case"R_F16":case"RG_F16":case"RGB_F16":case"RGBA_F16":return WebGLRenderingContext.FLOAT;default:return e.noWhenBranchMatched()}}function vN(t){switch(t.name){case"R":return WebGL2RenderingContext.RED;case"RG":return WebGL2RenderingContext.RG;case"RGB":return WebGLRenderingContext.RGB;case"RGBA":return WebGLRenderingContext.RGBA;case"R_F16":return WebGL2RenderingContext.RED;case"RG_F16":return WebGL2RenderingContext.RG;case"RGB_F16":return WebGLRenderingContext.RGB;case"RGBA_F16":return WebGLRenderingContext.RGBA;default:return e.noWhenBranchMatched()}}function gN(t){switch(t.name){case"R":return 1;case"RG":return 2;case"RGB":return 3;case"RGBA":return 4;case"R_F16":return 2;case"RG_F16":return 4;case"RGB_F16":return 6;case"RGBA_F16":return 8;default:return e.noWhenBranchMatched()}}function bN(t){switch(t.name){case"DISABLED":return 0;case"ALWAYS":return WebGLRenderingContext.ALWAYS;case"NEVER":return WebGLRenderingContext.NEVER;case"LESS":return WebGLRenderingContext.LESS;case"LESS_EQUAL":return WebGLRenderingContext.LEQUAL;case"GREATER":return WebGLRenderingContext.GREATER;case"GREATER_EQUAL":return WebGLRenderingContext.GEQUAL;case"EQUAL":return WebGLRenderingContext.EQUAL;case"NOT_EQUAL":return WebGLRenderingContext.NOTEQUAL;default:return e.noWhenBranchMatched()}}function xN(t,e){var i;kN(),this.target=t,this.bufferId=(i=kN().nextBufferId_0,kN().nextBufferId_0=i.inc(),i),this.buffer=e.gl_8be2vx$.createBuffer()}function wN(){zN=this,this.nextBufferId_0=Pt}uN.$metadata$={kind:$,simpleName:"JsContext",interfaces:[on]},Object.defineProperty(fN.prototype,"maxTexUnits",{configurable:!0,get:function(){return this.maxTexUnits_pg826n$_0},set:function(t){this.maxTexUnits_pg826n$_0=t}}),Object.defineProperty(fN.prototype,"hasFloatTextures",{configurable:!0,get:function(){return this.hasFloatTextures_jm9wjj$_0},set:function(t){this.hasFloatTextures_jm9wjj$_0=t}}),Object.defineProperty(fN.prototype,"maxAnisotropy",{configurable:!0,get:function(){return this.maxAnisotropy_q24ucr$_0},set:function(t){this.maxAnisotropy_q24ucr$_0=t}}),Object.defineProperty(fN.prototype,"glTextureMaxAnisotropyExt",{configurable:!0,get:function(){return this.glTextureMaxAnisotropyExt_a0zvh2$_0},set:function(t){this.glTextureMaxAnisotropyExt_a0zvh2$_0=t}}),fN.$metadata$={kind:$,simpleName:"GlCapabilities",interfaces:[]},xN.prototype.delete_44a5h0$=function(t){t.engineStats.bufferDeleted_s8cxhz$(this.bufferId),t.gl_8be2vx$.deleteBuffer(this.buffer)},xN.prototype.bind_44a5h0$=function(t){t.gl_8be2vx$.bindBuffer(this.target,this.buffer)},xN.prototype.setData_phhdsy$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,gE)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,4*t.capacity|0),t.limit=o,t.position=s},xN.prototype.setData_1p7ty3$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,mE)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,t.capacity),t.limit=o,t.position=s},xN.prototype.setData_8qu3as$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,yE)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,2*t.capacity|0),t.limit=o,t.position=s},xN.prototype.setData_ysni9y$=function(t,i,n){var r,o=t.limit,s=t.position;t.flip(),this.bind_44a5h0$(n),n.engineStats.bufferDeleted_s8cxhz$(this.bufferId),n.gl_8be2vx$.bufferData(this.target,(e.isType(r=t,vE)?r:c()).buffer,i),n.engineStats.bufferAllocated_yhmem3$(this.bufferId,4*t.capacity|0),t.limit=o,t.position=s},xN.prototype.unbind_44a5h0$=function(t){t.gl_8be2vx$.bindBuffer(this.target,null)},wN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var zN=null;function kN(){return null===zN&&new wN,zN}function SN(t,i,n){var r,o,s;for(this.prog=t,this.ctx=n,this.pipelineId_0=i.pipelineHash.data,this.attributes_0=z(),this.instanceAttributes_0=z(),this.uniformLocations_0=z(),this.instances_0=z(),r=i.layout.vertices.bindings.iterator();r.hasNext();){var a,l=r.next();for(a=l.vertexAttributes.iterator();a.hasNext();){var u=a.next();switch(l.inputRate.name){case"VERTEX":var p=this.attributes_0,c=u.attribute.name;p.put_xwzc9p$(c,u);break;case"INSTANCE":var h=this.instanceAttributes_0,d=u.attribute.name;h.put_xwzc9p$(d,u)}}}for(o=i.layout.descriptorSets.iterator();o.hasNext();){var f;for(f=o.next().descriptors.iterator();f.hasNext();){var _,m=f.next();if(e.isType(m,Ks))for(_=m.uniforms.iterator();_.hasNext();){var $=_.next(),y=this.uniformLocations_0,v=$.name,g=Ft(this.ctx.gl_8be2vx$.getUniformLocation(this.prog,$.name));y.put_xwzc9p$(v,g)}else if(e.isType(m,Fs)){var b=this.uniformLocations_0,x=m.name,w=this.getUniformLocations_0(m.name,m.arraySize);b.put_xwzc9p$(x,w)}else if(e.isType(m,Us)){var k=this.uniformLocations_0,S=m.name,C=this.getUniformLocations_0(m.name,m.arraySize);k.put_xwzc9p$(S,C)}else if(e.isType(m,Gs)){var N=this.uniformLocations_0,E=m.name,T=this.getUniformLocations_0(m.name,m.arraySize);N.put_xwzc9p$(E,T)}else{if(!e.isType(m,Ws))throw bt("Descriptor type not implemented: "+m);var P=this.uniformLocations_0,O=m.name,M=this.getUniformLocations_0(m.name,m.arraySize);P.put_xwzc9p$(O,M)}}}for(s=i.layout.pushConstantRanges.iterator();s.hasNext();){var j;for(j=s.next().pushConstants.iterator();j.hasNext();){var A=j.next(),I=this.uniformLocations_0,R=A.name,L=Ft(this.ctx.gl_8be2vx$.getUniformLocation(this.prog,A.name));I.put_xwzc9p$(R,L)}}}function CN(t,i,n){var r,o;for(this.$outer=t,this.mesh=i,this.pipeline=n,this.pushConstants_0=M(),this.ubos_0=M(),this.textures1d_0=M(),this.textures2d_0=M(),this.textures3d_0=M(),this.texturesCube_0=M(),this.mappings_0=M(),this.attributeBinders_0=M(),this.instanceAttribBinders_0=M(),this.dataBufferF_0=null,this.dataBufferI_0=null,this.indexBuffer_0=null,this.instanceBuffer_0=null,this.buffersSet_0=!1,this.nextTexUnit_0=WebGLRenderingContext.TEXTURE0,this.numIndices=0,this.indexType=0,this.primitiveType=0,r=this.pipeline.layout.descriptorSets.iterator();r.hasNext();){var s;for(s=r.next().descriptors.iterator();s.hasNext();){var a=s.next();if(e.isType(a,Ks))this.mapUbo_0(a);else if(e.isType(a,Fs))this.mapTexture1d_0(a);else if(e.isType(a,Us))this.mapTexture2d_0(a);else if(e.isType(a,Gs))this.mapTexture3d_0(a);else{if(!e.isType(a,Ws))throw new We("An operation is not implemented: "+a.toString());this.mapTextureCube_0(a)}}}for(o=this.pipeline.layout.pushConstantRanges.iterator();o.hasNext();){var l=o.next();this.mapPushConstants_0(l)}this.$outer.ctx.engineStats.pipelineInstanceCreated_s8cxhz$(this.$outer.pipelineId_0)}function NN(t,e){this.vbo=t,this.loc=e}function EN(t,e,i,n){var r;ON(),this.ctx=t,this.target=e,this.texture=i,this.texId=(r=ON().nextTexId_0,ON().nextTexId_0=r.inc(),r),this.isDestroyed_hoph69$_0=!1,this.width_8gbh1k$_0=0,this.height_d6ao4v$_0=0,this.depth_hi5t2d$_0=0,this.ctx.engineStats.textureAllocated_yhmem3$(this.texId,n)}function TN(){PN=this,this.nextTexId_0=Pt}xN.$metadata$={kind:$,simpleName:"BufferResource",interfaces:[]},SN.prototype.getUniformLocations_0=function(t,e){var i=M();if(e>1)for(var n=0;n<e;n++){var r=this.ctx.gl_8be2vx$.getUniformLocation(this.prog,t+"["+n+"]");i.add_11rb$(r)}else{var o=this.ctx.gl_8be2vx$.getUniformLocation(this.prog,t);i.add_11rb$(o)}return i},SN.prototype.use=function(){var t,e;for(this.ctx.gl_8be2vx$.useProgram(this.prog),t=this.attributes_0.values.iterator();t.hasNext();){var i,n=t.next();i=n.attribute.props.nSlots;for(var r=0;r<i;r++){var o=n.location+r|0;this.ctx.gl_8be2vx$.enableVertexAttribArray(o),this.ctx.gl_8be2vx$.vertexAttribDivisor(o,0)}}for(e=this.instanceAttributes_0.values.iterator();e.hasNext();){var s,a=e.next();s=a.attribute.props.nSlots;for(var l=0;l<s;l++){var u=a.location+l|0;this.ctx.gl_8be2vx$.enableVertexAttribArray(u),this.ctx.gl_8be2vx$.vertexAttribDivisor(u,1)}}},SN.prototype.unUse=function(){var t,e;for(t=this.attributes_0.values.iterator();t.hasNext();){var i,n=t.next();i=n.attribute.props.nSlots;for(var r=0;r<i;r++)this.ctx.gl_8be2vx$.disableVertexAttribArray(n.location+r|0)}for(e=this.instanceAttributes_0.values.iterator();e.hasNext();){var o,s=e.next();o=s.attribute.props.nSlots;for(var a=0;a<o;a++)this.ctx.gl_8be2vx$.disableVertexAttribArray(s.location+a|0)}},SN.prototype.bindInstance_ye1q9v$=function(t){var e,i=x(t.pipeline),n=this.instances_0,r=i.pipelineInstanceId,o=n.get_11rb$(r);if(null==o){var s=new CN(this,t.mesh,i);n.put_xwzc9p$(r,s),e=s}else e=o;var a=e;return a.bindInstance_ye1q9v$(t)?a:null},SN.prototype.destroyInstance_lfrgcb$=function(t){var e;null!=(e=this.instances_0.remove_11rb$(t.pipelineInstanceId))&&(e.destroyInstance(),this.ctx.engineStats.pipelineInstanceDestroyed_s8cxhz$(this.pipelineId_0))},SN.prototype.isEmpty=function(){return this.instances_0.isEmpty()},SN.prototype.destroy=function(){this.ctx.engineStats.pipelineDestroyed_s8cxhz$(this.pipelineId_0),this.ctx.gl_8be2vx$.deleteProgram(this.prog)},CN.prototype.mapPushConstants_0=function(t){this.pushConstants_0.add_11rb$(t);var e,i=t.pushConstants;for(this.$outer,e=i.iterator();e.hasNext();){var n,r,o=e.next(),s=this.$outer;n=this.mappings_0;var a=IN().mappedUniform_lwhlub$(o,null!=(r=s.uniformLocations_0.get_11rb$(o.name))?r.get_za3lpa$(0):null);n.add_11rb$(a)}},CN.prototype.mapUbo_0=function(t){this.ubos_0.add_11rb$(t);var e,i=t.uniforms;for(this.$outer,e=i.iterator();e.hasNext();){var n,r,o=e.next(),s=this.$outer;n=this.mappings_0;var a=IN().mappedUniform_lwhlub$(o,null!=(r=s.uniformLocations_0.get_11rb$(o.name))?r.get_za3lpa$(0):null);n.add_11rb$(a)}},CN.prototype.mapTexture1d_0=function(t){var e;if(this.textures1d_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new eE(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},CN.prototype.mapTexture2d_0=function(t){var e;if(this.textures2d_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new iE(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},CN.prototype.mapTexture3d_0=function(t){var e;if(this.textures3d_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new nE(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},CN.prototype.mapTextureCube_0=function(t){var e;if(this.texturesCube_0.add_11rb$(t),null!=(e=this.$outer.uniformLocations_0.get_11rb$(t.name))){var i=this.mappings_0,n=new rE(t,this.nextTexUnit_0,e);i.add_11rb$(n),this.nextTexUnit_0=this.nextTexUnit_0+e.size|0}},CN.prototype.bindInstance_ye1q9v$=function(t){var e,i,n,r,o,s,a,l;e=this.pushConstants_0;for(var u=0;u!==e.size;++u){var p;null!=(p=this.pushConstants_0.get_za3lpa$(u).onUpdate)&&p(this.pushConstants_0.get_za3lpa$(u),t)}i=this.ubos_0;for(var c=0;c!==i.size;++c){var h;null!=(h=this.ubos_0.get_za3lpa$(c).onUpdate)&&h(this.ubos_0.get_za3lpa$(c),t)}n=this.textures1d_0;for(var d=0;d!==n.size;++d){var f;null!=(f=this.textures1d_0.get_za3lpa$(d).onUpdate)&&f(this.textures1d_0.get_za3lpa$(d),t)}r=this.textures2d_0;for(var _=0;_!==r.size;++_){var m;null!=(m=this.textures2d_0.get_za3lpa$(_).onUpdate)&&m(this.textures2d_0.get_za3lpa$(_),t)}o=this.textures3d_0;for(var $=0;$!==o.size;++$){var y;null!=(y=this.textures3d_0.get_za3lpa$($).onUpdate)&&y(this.textures3d_0.get_za3lpa$($),t)}s=this.texturesCube_0;for(var v=0;v!==s.size;++v){var g;null!=(g=this.texturesCube_0.get_za3lpa$(v).onUpdate)&&g(this.texturesCube_0.get_za3lpa$(v),t)}var b=!0;a=this.mappings_0;for(var x=0;x!==a.size;++x)b=b&&this.mappings_0.get_za3lpa$(x).setUniform_44a5h0$(this.$outer.ctx);if(this.checkBuffers_0(),b){null!=(l=this.indexBuffer_0)&&l.bind_44a5h0$(this.$outer.ctx);var w,z=this.attributeBinders_0;for(this.$outer,w=z.iterator();w.hasNext();){var k=w.next();k.vbo.bindAttribute_9sni52$(k.loc,this.$outer.ctx)}var S,C=this.instanceAttribBinders_0;for(this.$outer,S=C.iterator();S.hasNext();){var N=S.next();N.vbo.bindAttribute_9sni52$(N.loc,this.$outer.ctx)}}return b},CN.prototype.destroyInstance=function(){var t,e,i,n;null!=(t=this.dataBufferF_0)&&t.delete_44a5h0$(this.$outer.ctx),null!=(e=this.dataBufferI_0)&&e.delete_44a5h0$(this.$outer.ctx),null!=(i=this.indexBuffer_0)&&i.delete_44a5h0$(this.$outer.ctx),null!=(n=this.instanceBuffer_0)&&n.delete_44a5h0$(this.$outer.ctx),this.dataBufferF_0=null,this.dataBufferI_0=null,this.indexBuffer_0=null,this.instanceBuffer_0=null,this.pushConstants_0.clear(),this.ubos_0.clear(),this.textures1d_0.clear(),this.textures2d_0.clear(),this.textures3d_0.clear(),this.texturesCube_0.clear(),this.mappings_0.clear(),this.attributeBinders_0.clear(),this.instanceAttribBinders_0.clear()},CN.prototype.checkBuffers_0=function(){var t,e,i,n,r,o,a,l=this.mesh.geometry;null==this.indexBuffer_0&&(this.indexBuffer_0=new xN(WebGLRenderingContext.ELEMENT_ARRAY_BUFFER,this.$outer.ctx));var u=!1;if(null==this.dataBufferF_0)for(this.dataBufferF_0=new xN(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),t=l.vertexAttributes.iterator();t.hasNext();){var p=t.next();if(p.type.isInt)u=!0;else{var c=l.byteStrideF,h=x(l.attributeByteOffsets.get_11rb$(p))/4|0;wt(this.instanceAttribBinders_0,this.$outer.makeAttribBinders_0(this.$outer.attributes_0,p,x(this.dataBufferF_0),c,h))}}if(u&&null==this.dataBufferI_0)for(this.dataBufferI_0=new xN(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),e=l.vertexAttributes.iterator();e.hasNext();){var d=e.next();if(d.type.isInt&&null!=(i=this.$outer.attributes_0.get_11rb$(d.name))){var f=new fE(x(this.dataBufferI_0),d.type.byteSize/4|0,l.byteStrideI,x(l.attributeByteOffsets.get_11rb$(d))/4|0,WebGLRenderingContext.INT),_=this.attributeBinders_0,m=new NN(f,i.location);_.add_11rb$(m)}}var $,y,v=this.mesh.instances;if(null!=v){var g=this.instanceBuffer_0;if(null==g)for(g=new xN(WebGLRenderingContext.ARRAY_BUFFER,this.$outer.ctx),this.instanceBuffer_0=g,n=v.instanceAttributes.iterator();n.hasNext();){var b=n.next(),w=v.strideBytesF,z=x(v.attributeOffsets.get_11rb$(b))/4|0;wt(this.instanceAttribBinders_0,this.$outer.makeAttribBinders_0(this.$outer.instanceAttributes_0,b,x(this.instanceBuffer_0),w,z))}v.hasChanged&&(g.setData_phhdsy$(v.dataF,this.$outer.glUsage_0(v.usage),this.$outer.ctx),this.$outer.ctx.afterRenderActions_8be2vx$.add_11rb$(($=v,function(){return $.hasChanged=!1,s})))}if(!l.isBatchUpdate&&(l.hasChanged||!this.buffersSet_0)){var k=this.$outer.glUsage_0(l.usage);this.indexType=WebGLRenderingContext.UNSIGNED_INT,null!=(r=this.indexBuffer_0)&&r.setData_ysni9y$(l.indices,k,this.$outer.ctx),this.primitiveType=this.$outer.glElemType_0(this.pipeline.layout.vertices.primitiveType),this.numIndices=l.numIndices,null!=(o=this.dataBufferF_0)&&o.setData_phhdsy$(l.dataF,k,this.$outer.ctx),null!=(a=this.dataBufferI_0)&&a.setData_ysni9y$(l.dataI,k,this.$outer.ctx),this.$outer.ctx.afterRenderActions_8be2vx$.add_11rb$((y=l,function(){return y.hasChanged=!1,s})),this.buffersSet_0=!0}},CN.$metadata$={kind:$,simpleName:"ShaderInstance",interfaces:[]},SN.prototype.makeAttribBinders_0=function(t,i,n,r,o){var s,a=M();if(null!=(s=t.get_11rb$(i.name))){var l;l=i.props.nSlots;for(var u=0;u<l;u++){var p=o+e.imul(i.props.attribSize,u)|0,c=new NN(new fE(n,i.props.attribSize,r,p,WebGLRenderingContext.FLOAT),s.location+u|0);a.add_11rb$(c)}}return a},SN.prototype.glElemType_0=function(t){var i;switch(t.name){case"LINES":i=WebGLRenderingContext.LINES;break;case"POINTS":i=WebGLRenderingContext.POINTS;break;case"TRIANGLES":i=WebGLRenderingContext.TRIANGLES;break;default:i=e.noWhenBranchMatched()}return i},SN.prototype.glUsage_0=function(t){var i;switch(t.name){case"DYNAMIC":i=WebGLRenderingContext.DYNAMIC_DRAW;break;case"STATIC":i=WebGLRenderingContext.STATIC_DRAW;break;default:i=e.noWhenBranchMatched()}return i},NN.$metadata$={kind:$,simpleName:"AttributeOnLocation",interfaces:[]},NN.prototype.component1=function(){return this.vbo},NN.prototype.component2=function(){return this.loc},NN.prototype.copy_oubs2w$=function(t,e){return new NN(void 0===t?this.vbo:t,void 0===e?this.loc:e)},NN.prototype.toString=function(){return"AttributeOnLocation(vbo="+e.toString(this.vbo)+", loc="+e.toString(this.loc)+")"},NN.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.vbo)|0)+e.hashCode(this.loc)|0},NN.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.vbo,t.vbo)&&e.equals(this.loc,t.loc)},SN.$metadata$={kind:$,simpleName:"CompiledShader",interfaces:[]},Object.defineProperty(EN.prototype,"isDestroyed",{configurable:!0,get:function(){return this.isDestroyed_hoph69$_0},set:function(t){this.isDestroyed_hoph69$_0=t}}),Object.defineProperty(EN.prototype,"width",{configurable:!0,get:function(){return this.width_8gbh1k$_0},set:function(t){this.width_8gbh1k$_0=t}}),Object.defineProperty(EN.prototype,"height",{configurable:!0,get:function(){return this.height_d6ao4v$_0},set:function(t){this.height_d6ao4v$_0=t}}),Object.defineProperty(EN.prototype,"depth",{configurable:!0,get:function(){return this.depth_hi5t2d$_0},set:function(t){this.depth_hi5t2d$_0=t}}),EN.prototype.setSize_qt1dr2$=function(t,e,i){this.width=t,this.height=e,this.depth=i},EN.prototype.applySamplerProps_xetyfc$=function(t){var i=this.ctx.gl_8be2vx$;i.bindTexture(this.target,this.texture),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_MIN_FILTER,this.glMinFilterMethod_0(t.minFilter,t.mipMapping)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_MAG_FILTER,this.glMagFilterMethod_0(t.magFilter)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_WRAP_S,this.glAddressMode_0(t.addressModeU)),i.texParameteri(this.target,WebGLRenderingContext.TEXTURE_WRAP_T,this.glAddressMode_0(t.addressModeV)),this.target===WebGL2RenderingContext.TEXTURE_3D&&i.texParameteri(this.target,WebGL2RenderingContext.TEXTURE_WRAP_R,this.glAddressMode_0(t.addressModeW));var n=t.maxAnisotropy,r=this.ctx.glCapabilities.maxAnisotropy,o=A.min(n,r);if(o>1&&i.texParameteri(this.target,this.ctx.glCapabilities.glTextureMaxAnisotropyExt,o),o>1&&(t.minFilter===Kh()||t.magFilter===Kh())){var s=DE.Log,a=$k.WARN,l=e.getKClassFromExpression(this).simpleName;a.level>=s.level.level&&s.printer(a,l,"Texture filtering is NEAREST but anisotropy is "+o+" (> 1)")}},EN.prototype.dispose=function(){this.isDestroyed=!0,this.ctx.gl_8be2vx$.deleteTexture(this.texture),this.ctx.engineStats.textureDeleted_s8cxhz$(this.texId)},EN.prototype.glMinFilterMethod_0=function(t,i){var n;switch(t.name){case"NEAREST":n=i?WebGLRenderingContext.NEAREST_MIPMAP_NEAREST:WebGLRenderingContext.NEAREST;break;case"LINEAR":n=i?WebGLRenderingContext.LINEAR_MIPMAP_LINEAR:WebGLRenderingContext.LINEAR;break;default:n=e.noWhenBranchMatched()}return n},EN.prototype.glMagFilterMethod_0=function(t){var i;switch(t.name){case"NEAREST":i=WebGLRenderingContext.NEAREST;break;case"LINEAR":i=WebGLRenderingContext.LINEAR;break;default:i=e.noWhenBranchMatched()}return i},EN.prototype.glAddressMode_0=function(t){var i;switch(t.name){case"CLAMP_TO_EDGE":i=WebGLRenderingContext.CLAMP_TO_EDGE;break;case"MIRRORED_REPEAT":i=WebGLRenderingContext.MIRRORED_REPEAT;break;case"REPEAT":i=WebGLRenderingContext.REPEAT;break;default:i=e.noWhenBranchMatched()}return i},TN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var PN=null;function ON(){return null===PN&&new TN,PN}function MN(){IN()}function jN(){AN=this}EN.$metadata$={kind:$,simpleName:"LoadedTextureWebGl",interfaces:[aa]},jN.prototype.mappedUniform_lwhlub$=function(t,i){var n;if(e.isType(t,vd))n=new RN(t,i);else if(e.isType(t,bd))n=new LN(t,i);else if(e.isType(t,xd))n=new DN(t,i);else if(e.isType(t,wd))n=new qN(t,i);else if(e.isType(t,kd))n=new FN(t,i);else if(e.isType(t,Sd))n=new BN(t,i);else if(e.isType(t,Cd))n=new UN(t,i);else if(e.isType(t,Nd))n=new VN(t,i);else if(e.isType(t,zd))n=new GN(t,i);else if(e.isType(t,Ed))n=new HN(t,i);else if(e.isType(t,Td))n=new WN(t,i);else if(e.isType(t,Pd))n=new XN(t,i);else{if(!e.isType(t,Od))throw new We("An operation is not implemented: Uniform type mapping not implemented");n=new KN(t,i)}return n},jN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var AN=null;function IN(){return null===AN&&new jN,AN}function RN(t,e){this.uniform=t,this.location=e}function LN(t,e){this.uniform=t,this.location=e}function DN(t,e){this.uniform=t,this.location=e}function qN(t,e){this.uniform=t,this.location=e}function FN(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(this.uniform.length)}function BN(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(2*this.uniform.length|0)}function UN(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(3*this.uniform.length|0)}function VN(t,e){this.uniform=t,this.location=e,this.buffer_0=new Float32Array(4*this.uniform.length|0)}function GN(t,e){this.uniform=t,this.location=e}function HN(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(9)}function WN(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(16)}function XN(t,e){this.uniform=t,this.location=e,this.buf_0=new Float32Array(16*this.uniform.length|0)}function KN(t,e){this.uniform=t,this.location=e}function YN(t,e){tE(),this.texUnit=t,this.target=e}function ZN(){QN=this,this.loadedTextures_0=z()}function JN(t){return t.isDestroyed}MN.$metadata$={kind:Y,simpleName:"MappedUniform",interfaces:[]},RN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform1f(this.location,this.uniform.value),!0},RN.$metadata$={kind:$,simpleName:"MappedUniform1f",interfaces:[MN]},LN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform2f(this.location,this.uniform.value.x,this.uniform.value.y),!0},LN.$metadata$={kind:$,simpleName:"MappedUniform2f",interfaces:[MN]},DN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform3f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z),!0},DN.$metadata$={kind:$,simpleName:"MappedUniform3f",interfaces:[MN]},qN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform4f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z,this.uniform.value.w),!0},qN.$metadata$={kind:$,simpleName:"MappedUniform4f",interfaces:[MN]},FN.prototype.setUniform_44a5h0$=function(t){var e;e=this.uniform.length;for(var i=0;i<e;i++)this.buffer_0[i]=this.uniform.value[i];return t.gl_8be2vx$.uniform1fv(this.location,this.buffer_0),!0},FN.$metadata$={kind:$,simpleName:"MappedUniform1fv",interfaces:[MN]},BN.prototype.setUniform_44a5h0$=function(t){var e,i,n,r=0;e=this.uniform.length;for(var o=0;o<e;o++)this.buffer_0[(i=r,r=i+1|0,i)]=this.uniform.value[o].x,this.buffer_0[(n=r,r=n+1|0,n)]=this.uniform.value[o].y;return t.gl_8be2vx$.uniform2fv(this.location,this.buffer_0),!0},BN.$metadata$={kind:$,simpleName:"MappedUniform2fv",interfaces:[MN]},UN.prototype.setUniform_44a5h0$=function(t){var e,i,n,r,o=0;e=this.uniform.length;for(var s=0;s<e;s++)this.buffer_0[(i=o,o=i+1|0,i)]=this.uniform.value[s].x,this.buffer_0[(n=o,o=n+1|0,n)]=this.uniform.value[s].y,this.buffer_0[(r=o,o=r+1|0,r)]=this.uniform.value[s].z;return t.gl_8be2vx$.uniform3fv(this.location,this.buffer_0),!0},UN.$metadata$={kind:$,simpleName:"MappedUniform3fv",interfaces:[MN]},VN.prototype.setUniform_44a5h0$=function(t){var e,i,n,r,o,s=0;e=this.uniform.length;for(var a=0;a<e;a++)this.buffer_0[(i=s,s=i+1|0,i)]=this.uniform.value[a].x,this.buffer_0[(n=s,s=n+1|0,n)]=this.uniform.value[a].y,this.buffer_0[(r=s,s=r+1|0,r)]=this.uniform.value[a].z,this.buffer_0[(o=s,s=o+1|0,o)]=this.uniform.value[a].w;return t.gl_8be2vx$.uniform4fv(this.location,this.buffer_0),!0},VN.$metadata$={kind:$,simpleName:"MappedUniform4fv",interfaces:[MN]},GN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform4f(this.location,this.uniform.value.x,this.uniform.value.y,this.uniform.value.z,this.uniform.value.w),!0},GN.$metadata$={kind:$,simpleName:"MappedUniformColor",interfaces:[MN]},HN.prototype.setUniform_44a5h0$=function(t){for(var e=0;e<=8;e++)this.buf_0[e]=this.uniform.value.matrix[e];return t.gl_8be2vx$.uniformMatrix3fv(this.location,!1,this.buf_0),!0},HN.$metadata$={kind:$,simpleName:"MappedUniformMat3f",interfaces:[MN]},WN.prototype.setUniform_44a5h0$=function(t){for(var e=0;e<=15;e++)this.buf_0[e]=this.uniform.value.matrix[e];return t.gl_8be2vx$.uniformMatrix4fv(this.location,!1,this.buf_0),!0},WN.$metadata$={kind:$,simpleName:"MappedUniformMat4f",interfaces:[MN]},XN.prototype.setUniform_44a5h0$=function(t){var e,i,n=0;e=this.uniform.length;for(var r=0;r<e;r++)for(var o=0;o<16;o++)this.buf_0[(i=n,n=i+1|0,i)]=this.uniform.value[r].matrix[o];return t.gl_8be2vx$.uniformMatrix4fv(this.location,!1,this.buf_0),!0},XN.$metadata$={kind:$,simpleName:"MappedUniformMat4fv",interfaces:[MN]},KN.prototype.setUniform_44a5h0$=function(t){return t.gl_8be2vx$.uniform1i(this.location,this.uniform.value),!0},KN.$metadata$={kind:$,simpleName:"MappedUniform1i",interfaces:[MN]},YN.prototype.checkLoadingState_1iftbi$=function(t,i,n){var r,o,a,l,u,p,h=t.gl_8be2vx$;if(i.loadingState===bh()&&null!=(r=i.loader)){i.loadingState=xh();var d=t.assetMgr.loadTextureAsync_72pzmk$(r);d.invokeOnCompletion_f05bi3$((a=i,l=this,u=d,p=t,function(t){if(jt("tex loaded: "+a),null!=t){var i=l,n=DE.Log,r=$k.ERROR,o=e.getKClassFromExpression(i).simpleName;r.level>=n.level.level&&n.printer(r,o,"Texture loading failed: "+Ct(t)),a.loadingState=zh()}else a.loadedTexture=tE().getLoadedTex_0(u.getCompleted(),a,p),a.loadingState=wh();return s}))}if(i.loadingState===wh()){var f=e.isType(o=i.loadedTexture,EN)?o:c();return h.activeTexture(this.texUnit+n|0),h.bindTexture(this.target,f.texture),!0}return!1},ZN.prototype.getLoadedTex_0=function(t,i,n){Xe(this.loadedTextures_0.values,JN);var r,o=this.loadedTextures_0,s=o.get_11rb$(t);if(null==s){var a,l;if(e.isType(i,Nh))l=dE().loadTexture1d_hlfduu$(n,i.props,t);else if(e.isType(i,Eh))l=dE().loadTexture2d_hlfduu$(n,i.props,t);else if(e.isType(i,Oh))l=dE().loadTexture3d_hlfduu$(n,i.props,t);else{if(!e.isType(i,Mh))throw G("Unsupported texture type");l=dE().loadTextureCube_deh7i3$(n,i.props,e.isType(a=t,$d)?a:c())}var u=l;o.put_xwzc9p$(t,u),r=u}else r=s;return r},ZN.$metadata$={kind:y,simpleName:"Companion",interfaces:[]};var QN=null;function tE(){return null===QN&&new ZN,QN}function eE(t,e,i){YN.call(this,e,WebGLRenderingContext.TEXTURE_2D),this.sampler1d_0=t,this.locations=i}function iE(t,e,i){YN.call(this,e,WebGLRenderingContext.TEXTURE_2D),this.sampler2d_0=t,this.locations=i}function nE(t,e,i){YN.call(this,e,WebGL2RenderingContext.TEXTURE_3D),this.sampler3d_0=t,this.locations=i}function rE(t,e,i){YN.call(this,e,WebGLRenderingContext.TEXTURE_CUBE_MAP),this.samplerCube_0=t,this.locations=i}function oE(t){this.ctx=t,this.glAttribs_0=new sE(this),this.shaderMgr_0=new pE(this.ctx),this.colorBuffer_0=new Float32Array(4)}function sE(t){this.$outer=t,this.actIsWriteDepth=!0,this.depthTest=null,this.cullMethod=null,this.lineWidth=0}function aE(){Ku.call(this)}function lE(t){return"// "+t+"\n"}function uE(){this.functions=z(),this.mainCode=M()}function pE(t){this.ctx=t,this.shaders=z(),this.currentShader=null}function cE(){hE=this}YN.$metadata$={kind:$,simpleName:"MappedUniformTex",interfaces:[MN]},eE.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.sampler1d_0.arraySize;for(var r=0;r<e;r++){var o=this.sampler1d_0.textures[r];null!=o&&this.checkLoadingState_1iftbi$(t,o,r)?jC().gl.uniform1i(this.locations.get_za3lpa$(r),this.texUnit-WebGLRenderingContext.TEXTURE0+r|0):n=!1,i=i+1|0}return n},eE.$metadata$={kind:$,simpleName:"MappedUniformTex1d",interfaces:[YN]},iE.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.sampler2d_0.arraySize;for(var r=0;r<e;r++){var o=this.sampler2d_0.textures[r];null!=o&&this.checkLoadingState_1iftbi$(t,o,r)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(r),this.texUnit-WebGLRenderingContext.TEXTURE0+r|0):n=!1,i=i+1|0}return n},iE.$metadata$={kind:$,simpleName:"MappedUniformTex2d",interfaces:[YN]},nE.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.sampler3d_0.arraySize;for(var r=0;r<e;r++){var o=this.sampler3d_0.textures[r];null!=o&&this.checkLoadingState_1iftbi$(t,o,r)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(r),this.texUnit-WebGLRenderingContext.TEXTURE0+r|0):n=!1,i=i+1|0}return n},nE.$metadata$={kind:$,simpleName:"MappedUniformTex3d",interfaces:[YN]},rE.prototype.setUniform_44a5h0$=function(t){var e,i=this.texUnit,n=!0;e=this.samplerCube_0.arraySize;for(var r=0;r<e;r++){var o=this.samplerCube_0.textures[r];null!=o&&this.checkLoadingState_1iftbi$(t,o,r)?t.gl_8be2vx$.uniform1i(this.locations.get_za3lpa$(r),this.texUnit-WebGLRenderingContext.TEXTURE0+r|0):n=!1,i=i+1|0}return n},rE.$metadata$={kind:$,simpleName:"MappedUniformTexCube",interfaces:[YN]},Object.defineProperty(oE.prototype,"gl_0",{configurable:!0,get:function(){return this.ctx.gl_8be2vx$}}),oE.prototype.disposePipelines_z4np8a$=function(t){var e;for(e=t.iterator();e.hasNext();){var i=e.next();this.shaderMgr_0.deleteShader_lfrgcb$(i)}},oE.prototype.renderQueue_e0goaf$=function(t){var i,n,r,o,s,a,l=t.renderPass;if(this.ctx.gl_8be2vx$.viewport(l.viewport.x,l.viewport.y,l.viewport.width,l.viewport.height),e.isType(l,$a)){r=l.config.nColorAttachments;for(var u=0;u<r;u++)null!=(s=null!=(o=l.clearColors[u])?o:l.clearColor)&&(this.colorBuffer_0[0]=s.r,this.colorBuffer_0[1]=s.g,this.colorBuffer_0[2]=s.b,this.colorBuffer_0[3]=s.a,this.ctx.gl_8be2vx$.clearBufferfv(WebGL2RenderingContext.COLOR,u,this.colorBuffer_0));l.clearDepth&&this.ctx.gl_8be2vx$.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT)}else{null!=(a=l.clearColor)&&this.ctx.gl_8be2vx$.clearColor(a.r,a.g,a.b,a.a);var p=this.clearMask_0(l);0!==p&&this.ctx.gl_8be2vx$.clear(p)}for(i=t.commands.iterator();i.hasNext();){var c,h=i.next();if(null!=(n=h.pipeline)&&(this.glAttribs_0.setupPipelineAttribs_lfrgcb$(n),h.mesh.geometry.numIndices>0&&null!=(c=this.shaderMgr_0.setupShader_ye1q9v$(h))&&0!==c.indexType)){var d=h.mesh.instances;null==d?(this.gl_0.drawElements(c.primitiveType,c.numIndices,c.indexType,0),this.ctx.engineStats.addPrimitiveCount_za3lpa$(h.mesh.geometry.numPrimitives)):d.numInstances>0&&(this.gl_0.drawElementsInstanced(c.primitiveType,c.numIndices,c.indexType,0,d.numInstances),this.ctx.engineStats.addPrimitiveCount_za3lpa$(e.imul(h.mesh.geometry.numPrimitives,d.numInstances))),this.ctx.engineStats.addDrawCommandCount_za3lpa$(1)}}},sE.prototype.setupPipelineAttribs_lfrgcb$=function(t){this.setBlendMode_0(t.blendMode),this.setDepthTest_0(t.depthCompareOp),this.setWriteDepth_0(t.isWriteDepth),this.setCullMethod_0(t.cullMethod),this.lineWidth!==t.lineWidth&&(this.lineWidth=t.lineWidth,this.$outer.gl_0.lineWidth(t.lineWidth))},sE.prototype.setCullMethod_0=function(t){if(!Lt(this.cullMethod,t))switch(this.cullMethod=t,t.name){case"DEFAULT":case"CULL_BACK_FACES":this.$outer.gl_0.enable(WebGLRenderingContext.CULL_FACE),this.$outer.gl_0.cullFace(WebGLRenderingContext.BACK);break;case"CULL_FRONT_FACES":this.$outer.gl_0.enable(WebGLRenderingContext.CULL_FACE),this.$outer.gl_0.cullFace(WebGLRenderingContext.FRONT);break;case"NO_CULLING":this.$outer.gl_0.disable(WebGLRenderingContext.CULL_FACE)}},sE.prototype.setWriteDepth_0=function(t){this.actIsWriteDepth!==t&&(this.actIsWriteDepth=t,this.$outer.gl_0.depthMask(t))},sE.prototype.setDepthTest_0=function(t){Lt(this.depthTest,t)||(this.depthTest=t,t===yl()?this.$outer.gl_0.disable(WebGLRenderingContext.DEPTH_TEST):(this.$outer.gl_0.enable(WebGLRenderingContext.DEPTH_TEST),this.$outer.gl_0.depthFunc(bN(t))))},sE.prototype.setBlendMode_0=function(t){switch(t.name){case"DISABLED":this.$outer.gl_0.disable(WebGLRenderingContext.BLEND);break;case"BLEND_ADDITIVE":this.$outer.gl_0.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND);break;case"BLEND_MULTIPLY_ALPHA":this.$outer.gl_0.blendFunc(WebGLRenderingContext.SRC_ALPHA,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND);break;case"BLEND_PREMULTIPLIED_ALPHA":this.$outer.gl_0.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),this.$outer.gl_0.enable(WebGLRenderingContext.BLEND)}},sE.$metadata$={kind:$,simpleName:"GlAttribs",interfaces:[]},oE.prototype.clearMask_0=function(t){var e=0;return t.clearDepth&&(e=WebGLRenderingContext.DEPTH_BUFFER_BIT),null!=t.clearColor&&(e|=WebGLRenderingContext.COLOR_BUFFER_BIT),e},oE.$metadata$={kind:$,simpleName:"QueueRendererWebGl",interfaces:[]},aE.prototype.generateShader_lvmec3$=function(t,e,i){var n=this.generateCode_0(t,e);return new FC(n.component1(),n.component2())},aE.prototype.generateCode_0=function(t,e){var i=this.generateVertexShaderCode_0(t,e),n=this.generateFragmentShaderCode_0(t,e);return t.dumpCode&&(jt("Vertex shader:\n"+i),jt("Fragment shader:\n"+n)),_t(i,n)},aE.prototype.generateVertexShaderCode_0=function(t,e){var i=new uE;return t.vertexStageGraph.generateCode_626509$(i),me("\n            #version 300 es\n            "+this.infoStr_0(t)+"\n            \n            // descriptor layout / uniforms "+this.generateDescriptorBindings_0(e,lc())+"\n            // vertex attributes "+this.generateAttributeBindings_0(e)+"\n            // outputs "+this.generateStageOutputs_0(t.vertexStageGraph)+"\n            // functions\n            "+i.generateFunctions()+"\n            \n            void main() {\n                "+i.generateMain()+"\n                gl_Position = "+t.vertexStageGraph.positionOutput.variable.ref4f_61zpoe$()+";\n            }\n        ")},aE.prototype.generateFragmentShaderCode_0=function(t,e){var i=new uE;return t.fragmentStageGraph.generateCode_626509$(i),me("\n            #version 300 es\n            precision highp float;\n            precision highp sampler2DShadow;\n            precision highp sampler3D;\n            "+this.infoStr_0(t)+"\n\n            // descriptor layout / uniforms "+this.generateDescriptorBindings_0(e,hc())+"\n            // inputs "+this.generateStageInputs_0(t.fragmentStageGraph)+"\n            // functions\n            "+i.generateFunctions()+"\n            \n            void main() {\n                "+i.generateMain()+"\n            }\n        ")},aE.prototype.infoStr_0=function(t){return Mt(Qe(t.modelInfo),void 0,void 0,void 0,void 0,void 0,lE)},aE.prototype.generateDescriptorBindings_0=function(t,i){var n,r=new ti("\n");for(n=t.descriptorSets.iterator();n.hasNext();){var o;for(o=n.next().descriptors.iterator();o.hasNext();){var s=o.next();if(s.stages.contains_11rb$(i))if(e.isType(s,Ks))r.append_pdl1vj$(this.generateUniformBuffer_0(s));else if(e.isType(s,Fs))r.append_pdl1vj$(this.generateTextureSampler1d_0(s));else if(e.isType(s,Us))r.append_pdl1vj$(this.generateTextureSampler2d_0(s));else if(e.isType(s,Gs))r.append_pdl1vj$(this.generateTextureSampler3d_0(s));else{if(!e.isType(s,Ws))throw new We("An operation is not implemented: Descriptor type not implemented: "+s);r.append_pdl1vj$(this.generateTextureSamplerCube_0(s))}}}var a,l,u=t.pushConstantRanges,p=M();for(a=u.iterator();a.hasNext();){var c=a.next();c.stages.contains_11rb$(i)&&p.add_11rb$(c)}if(!p.isEmpty())for(l=t.pushConstantRanges.iterator();l.hasNext();){var h;for(h=l.next().pushConstants.iterator();h.hasNext();){var d=h.next();this.appendln_0(r,"uniform "+this.declare_0(d)+";")}}return r.toString()},aE.prototype.generateUniformBuffer_0=function(t){var e,i=Ot();for(e=t.uniforms.iterator();e.hasNext();){var n=e.next();this.appendln_0(i,"uniform "+this.declare_0(n)+";")}return i.toString()},aE.prototype.generateTextureSampler1d_0=function(t){var e=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform sampler2D "+t.name+e+";\n"},aE.prototype.generateTextureSampler2d_0=function(t){var e=t.isDepthSampler?"sampler2DShadow":"sampler2D",i=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform "+e+" "+t.name+i+";\n"},aE.prototype.generateTextureSampler3d_0=function(t){var e=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform sampler3D "+t.name+e+";\n"},aE.prototype.generateTextureSamplerCube_0=function(t){var e=t.isDepthSampler?"samplerCubeShadow":"samplerCube",i=t.arraySize>1?"["+t.arraySize+"]":"";return"uniform "+e+" "+t.name+i+";\n"},aE.prototype.generateAttributeBindings_0=function(t){var e,i=new ti("\n");for(e=t.vertices.bindings.iterator();e.hasNext();){var n;for(n=e.next().vertexAttributes.iterator();n.hasNext();){var r=n.next();this.appendln_0(i,"layout(location="+r.location+") in "+r.type.glslType+" "+r.name+";")}}return i.toString()},aE.prototype.generateStageInputs_0=function(t){var e,i=new ti("\n");for(e=t.inputs.iterator();e.hasNext();){var n=e.next(),r=n.isFlat?"flat":"";this.appendln_0(i,r+" in "+n.variable.glslType()+" "+n.variable.name+";")}return i.toString()},aE.prototype.generateStageOutputs_0=function(t){var e,i=new ti("\n");for(e=t.outputs.iterator();e.hasNext();){var n=e.next(),r=n.isFlat?"flat":"";this.appendln_0(i,r+" out "+n.variable.glslType()+" "+n.variable.name+";")}return i.toString()},aE.prototype.appendln_0=function(t,e){return t.append_pdl1vj$(e+"\n")},aE.prototype.declare_0=function(t){var i;if(e.isType(t,vd))i="float "+t.name;else if(e.isType(t,bd))i="vec2 "+t.name;else if(e.isType(t,xd))i="vec3 "+t.name;else if(e.isType(t,wd))i="vec4 "+t.name;else if(e.isType(t,zd))i="vec4 "+t.name;else if(e.isType(t,kd))i="float "+t.name+"["+t.length+"]";else if(e.isType(t,Sd))i="vec2 "+t.name+"["+t.length+"]";else if(e.isType(t,Cd))i="vec3 "+t.name+"["+t.length+"]";else if(e.isType(t,Nd))i="vec4 "+t.name+"["+t.length+"]";else if(e.isType(t,Ed))i="mat3 "+t.name;else if(e.isType(t,Td))i="mat4 "+t.name;else if(e.isType(t,Pd))i="mat4 "+t.name+"["+t.length+"]";else{if(!e.isType(t,Od))throw new We("An operation is not implemented: Uniform type name not implemented: "+t);i="int "+t.name}return i},uE.prototype.appendFunction_puj7f4$=function(t,e){this.functions.put_xwzc9p$(t,e)},uE.prototype.appendMain_61zpoe$=function(t){this.mainCode.add_11rb$(t)},uE.prototype.sampleTexture1d_buzeal$$default=function(t,e,i){return this.sampleTexture_0(t,"vec2("+e+", 0.0)",i)},uE.prototype.sampleTexture2d_buzeal$$default=function(t,e,i){return this.sampleTexture_0(t,e,i)},uE.prototype.sampleTexture2dDepth_puj7f4$=function(t,e){return"textureProj("+t+", "+e+")"},uE.prototype.sampleTexture3d_buzeal$$default=function(t,e,i){return this.sampleTexture_0(t,e,i)},uE.prototype.sampleTextureCube_buzeal$$default=function(t,e,i){return this.sampleTexture_0(t,e,i)},uE.prototype.generateFunctions=function(){return Mt(this.functions.values,"\n")},uE.prototype.generateMain=function(){return Mt(this.mainCode,"\n")},uE.prototype.sampleTexture_0=function(t,e,i){return null==i?"texture("+t+", "+e+")":"textureLod("+t+", "+e+", "+Ct(i)+")"},uE.$metadata$={kind:$,simpleName:"CodeGen",interfaces:[Dl]},aE.$metadata$={kind:$,simpleName:"ShaderGeneratorImplWebGl",interfaces:[Ku]},Object.defineProperty(pE.prototype,"gl_0",{configurable:!0,get:function(){return this.ctx.gl_8be2vx$}}),pE.prototype.setupShader_ye1q9v$=function(t){var e,i,n=x(t.pipeline),r=this.shaders,o=r.get_11rb$(n);if(null==o){var s=new SN(this.compileShader_0(n.shaderCode),n,this.ctx);r.put_xwzc9p$(n,s),i=s}else i=o;var a=i;return a!==this.currentShader&&(null!=(e=this.currentShader)&&e.unUse(),this.currentShader=a,a.use()),a.bindInstance_ye1q9v$(t)},pE.prototype.deleteShader_lfrgcb$=function(t){var e=this.shaders.get_11rb$(t);null!=e&&(e.destroyInstance_lfrgcb$(t),e.isEmpty()&&(Lt(e,this.currentShader)&&(e.unUse(),this.currentShader=null),e.destroy(),this.shaders.remove_11rb$(t)))},pE.prototype.compileShader_0=function(t){var i=this.gl_0.createShader(WebGLRenderingContext.VERTEX_SHADER);this.gl_0.shaderSource(i,t.vertexSrc),this.gl_0.compileShader(i);var n=this.gl_0.getShaderParameter(i,WebGLRenderingContext.COMPILE_STATUS);if(!Lt(n,!0)){var r=this.gl_0.getShaderInfoLog(i),o=DE.Log,s=$k.ERROR,a=e.getKClassFromExpression(this).simpleName;s.level>=o.level.level&&o.printer(s,a,"Vertex shader compilation failed:\n"+Ct(r));var l=DE.Log,u=$k.ERROR,p=e.getKClassFromExpression(this).simpleName;throw u.level>=l.level.level&&l.printer(u,p,"Shader source: \n"+this.formatShaderSrc_0(t.vertexSrc)),cn("Vertex shader compilation failed: "+Ct(r))}var c=this.gl_0.createShader(WebGLRenderingContext.FRAGMENT_SHADER);this.gl_0.shaderSource(c,t.fragmentSrc),this.gl_0.compileShader(c);var h=this.gl_0.getShaderParameter(c,WebGLRenderingContext.COMPILE_STATUS);if(!Lt(h,!0)){var d=this.gl_0.getShaderInfoLog(c),f=DE.Log,_=$k.ERROR,m=e.getKClassFromExpression(this).simpleName;_.level>=f.level.level&&f.printer(_,m,"Fragment shader compilation failed:\n"+Ct(d));var $=DE.Log,y=$k.ERROR,v=e.getKClassFromExpression(this).simpleName;throw y.level>=$.level.level&&$.printer(y,v,"Shader source: \n"+this.formatShaderSrc_0(t.fragmentSrc)),cn("Fragment shader compilation failed: "+Ct(d))}var g=this.gl_0.createProgram();if(this.gl_0.attachShader(g,i),this.gl_0.attachShader(g,c),this.gl_0.linkProgram(g),this.gl_0.deleteShader(i),this.gl_0.deleteShader(c),!Lt(this.gl_0.getProgramParameter(g,WebGLRenderingContext.LINK_STATUS),!0)){var b=this.gl_0.getProgramInfoLog(g),x=DE.Log,w=$k.ERROR,z=e.getKClassFromExpression(this).simpleName;w.level>=x.level.level&&x.printer(w,z,"Shader linkage failed:\n"+Ct(b));var k=DE.Log,S=$k.ERROR,C=e.getKClassFromExpression(this).simpleName;S.level>=k.level.level&&k.printer(S,C,"Vertex shader source: \n"+this.formatShaderSrc_0(t.vertexSrc));var N=DE.Log,E=$k.ERROR,T=e.getKClassFromExpression(this).simpleName;throw E.level>=N.level.level&&N.printer(E,T,"Fragment shader source: \n"+this.formatShaderSrc_0(t.fragmentSrc)),cn("Shader linkage failed: "+Ct(b))}return g},pE.prototype.formatShaderSrc_0=function(t){var e,i,n=Ot(),r=0;for(e=Qe(t).iterator();e.hasNext();){var o=e.next();n.append_pdl1vj$((tt((i=r,r=i+1|0,i))+1|0).toString()+" "+o+"\n")}return n.toString()},pE.$metadata$={kind:$,simpleName:"ShaderManager",interfaces:[]},cE.prototype.loadTexture1d_hlfduu$=function(t,e,i){var n=new EN(t,WebGLRenderingContext.TEXTURE_2D,jC().gl.createTexture(),this.estimateTexSize_0(i));return n.setSize_qt1dr2$(i.width,1,1),n.applySamplerProps_xetyfc$(e),this.texImage2d_0(jC().gl,WebGLRenderingContext.TEXTURE_2D,i),e.mipMapping&&jC().gl.generateMipmap(WebGLRenderingContext.TEXTURE_2D),n},cE.prototype.loadTexture2d_hlfduu$=function(t,e,i){var n=t.gl_8be2vx$,r=new EN(t,WebGLRenderingContext.TEXTURE_2D,n.createTexture(),this.estimateTexSize_0(i));return r.setSize_qt1dr2$(i.width,i.height,1),r.applySamplerProps_xetyfc$(e),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_2D,i),e.mipMapping&&n.generateMipmap(WebGLRenderingContext.TEXTURE_2D),r},cE.prototype.loadTexture3d_hlfduu$=function(t,i,n){var r,o,s=new EN(t,WebGL2RenderingContext.TEXTURE_3D,jC().gl.createTexture(),this.estimateTexSize_0(n));if(s.setSize_qt1dr2$(n.width,n.height,n.depth),s.applySamplerProps_xetyfc$(i),e.isType(n,md))jC().gl.texImage3D(WebGL2RenderingContext.TEXTURE_3D,0,$N(n.format),n.width,n.height,n.depth,0,vN(n.format),yN(n.format),(e.isType(r=n.data,mE)?r:c()).buffer);else if(e.isType(n,VC)){jC().gl.texStorage3D(WebGL2RenderingContext.TEXTURE_3D,1,$N(n.format),n.width,n.height,n.depth),o=n.depth;for(var a=0;a<o;a++)jC().gl.texSubImage3D(WebGL2RenderingContext.TEXTURE_3D,0,0,0,a,n.width,n.height,1,vN(n.format),yN(n.format),n.data[a])}return i.mipMapping&&jC().gl.generateMipmap(WebGL2RenderingContext.TEXTURE_3D),s},cE.prototype.loadTextureCube_deh7i3$=function(t,e,i){var n=t.gl_8be2vx$,r=new EN(t,WebGLRenderingContext.TEXTURE_CUBE_MAP,n.createTexture(),this.estimateTexSize_0(i));return r.setSize_qt1dr2$(i.width,i.height,1),r.applySamplerProps_xetyfc$(e),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X,i.right),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_X,i.left),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_Y,i.up),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_Y,i.down),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_POSITIVE_Z,i.back),this.texImage2d_0(n,WebGLRenderingContext.TEXTURE_CUBE_MAP_NEGATIVE_Z,i.front),e.mipMapping&&n.generateMipmap(WebGLRenderingContext.TEXTURE_CUBE_MAP),r},cE.prototype.estimateTexSize_0=function(t){var i=e.isType(t,$d)?6:1,n=t.width,r=t.height,o=A.max(n,r),s=A.log2(o),a=B(A.floor(s))+1|0;return Ch().estimatedTexSize_4qozqa$(t.width,t.height,i,a,gN(t.format))},cE.prototype.texImage2d_0=function(t,i,n){var r,o;if(t.pixelStorei(WebGLRenderingContext.UNPACK_COLORSPACE_CONVERSION_WEBGL,WebGLRenderingContext.NONE),e.isType(n,nd))t.texImage2D(i,0,$N(n.format),n.width,1,0,vN(n.format),yN(n.format),(e.isType(r=n.data,mE)?r:c()).buffer);else if(e.isType(n,ad))t.texImage2D(i,0,$N(n.format),n.width,n.height,0,vN(n.format),yN(n.format),(e.isType(o=n.data,mE)?o:c()).buffer);else{if(!e.isType(n,UC))throw G("Invalid TextureData type for texImage2d: "+n);t.texImage2D(i,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,n.data)}},cE.$metadata$={kind:y,simpleName:"TextureLoader",interfaces:[]};var hE=null;function dE(){return null===hE&&new cE,hE}function fE(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=WebGLRenderingContext.FLOAT),this.vbo=t,this.elemSize=e,this.strideBytes=i,this.offset=n,this.type=r}function _E(t,e){this.capacity_tfbtga$_0=t,this.buffer=e(),this.limit_wr5sjr$_0=this.capacity,this.position_xkur2v$_0=0}function mE(t){var e;_E.call(this,t.length,(e=t,function(){return e}))}function $E(t,e){return e=e||Object.create(mE.prototype),mE.call(e,new Uint8Array(t)),e}function yE(t){var e;_E.call(this,t,(e=t,function(){return new Uint16Array(e)}))}function vE(t){var e;_E.call(this,t,(e=t,function(){return new Uint32Array(e)}))}function gE(t){var e;_E.call(this,t,(e=t,function(){return new Float32Array(e)}))}function bE(t){var e;_E.call(this,t,(e=t,function(){return new DataView(new ArrayBuffer(e))}))}function xE(t){return $E(t)}function wE(t){return new vE(t)}function zE(t){return new gE(t)}function kE(t){return new bE(t)}fE.prototype.bindAttribute_9sni52$=function(t,e){this.vbo.bind_44a5h0$(e),this.type===WebGLRenderingContext.INT||this.type===WebGLRenderingContext.UNSIGNED_INT?e.gl_8be2vx$.vertexAttribIPointer(t,this.elemSize,this.type,this.strideBytes,4*this.offset|0):e.gl_8be2vx$.vertexAttribPointer(t,this.elemSize,this.type,!1,this.strideBytes,4*this.offset|0)},fE.$metadata$={kind:$,simpleName:"VboBinder",interfaces:[]},Object.defineProperty(_E.prototype,"capacity",{get:function(){return this.capacity_tfbtga$_0}}),Object.defineProperty(_E.prototype,"limit",{configurable:!0,get:function(){return this.limit_wr5sjr$_0},set:function(t){if(t<0||t>this.capacity)throw cn("Limit is out of bounds: "+t+" (capacity: "+this.capacity+")");this.limit_wr5sjr$_0=t,this.position>t&&(this.position=t)}}),Object.defineProperty(_E.prototype,"position",{configurable:!0,get:function(){return this.position_xkur2v$_0},set:function(t){this.position_xkur2v$_0=t}}),Object.defineProperty(_E.prototype,"remaining",{configurable:!0,get:function(){return this.limit-this.position|0}}),_E.prototype.flip=function(){this.limit=this.position,this.position=0},_E.prototype.clear=function(){this.limit=this.capacity,this.position=0},_E.$metadata$={kind:$,simpleName:"GenericBuffer",interfaces:[by]},mE.prototype.get_za3lpa$=function(t){return this.buffer[t]},mE.prototype.set_6t1wet$=function(t,e){this.buffer[t]=e},mE.prototype.put_mj6st8$=function(t,e,i){var n,r;n=e+i|0;for(var o=e;o<n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},mE.prototype.put_s8j3t7$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},mE.prototype.put_ay2i3f$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_s8j3t7$(t.get_za3lpa$(n));return this},mE.$metadata$={kind:$,simpleName:"Uint8BufferImpl",interfaces:[_E,xy]},yE.prototype.get_za3lpa$=function(t){return this.buffer[t]},yE.prototype.set_2bqt6h$=function(t,e){this.buffer[t]=e},yE.prototype.put_359eei$=function(t,e,i){var n,r;n=e+i-1|0;for(var o=e;o<=n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},yE.prototype.put_mq22fl$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},yE.prototype.put_8k344i$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_mq22fl$(t.get_za3lpa$(n));return this},yE.$metadata$={kind:$,simpleName:"Uint16BufferImpl",interfaces:[_E,wy]},vE.prototype.get_za3lpa$=function(t){return this.buffer[t]},vE.prototype.set_vux9f0$=function(t,e){this.buffer[t]=e},vE.prototype.put_nd5v6f$=function(t,e,i){var n,r;n=e+i-1|0;for(var o=e;o<=n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},vE.prototype.put_za3lpa$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},vE.prototype.put_7hqxcs$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_za3lpa$(t.get_za3lpa$(n));return this},vE.$metadata$={kind:$,simpleName:"Uint32BufferImpl",interfaces:[_E,zy]},gE.prototype.get_za3lpa$=function(t){return this.buffer[t]},gE.prototype.set_24o109$=function(t,e){this.buffer[t]=e},gE.prototype.put_kgymra$=function(t,e,i){var n,r;n=e+i|0;for(var o=e;o<n;o++)this.buffer[(r=this.position,this.position=r+1|0,r)]=t[o];return this},gE.prototype.put_mx4ult$=function(t){var e;return this.buffer[(e=this.position,this.position=e+1|0,e)]=t,this},gE.prototype.put_he122g$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.put_mx4ult$(t.get_za3lpa$(n));return this},gE.$metadata$={kind:$,simpleName:"Float32BufferImpl",interfaces:[_E,ky]},bE.prototype.putUint8_s8j3t7$=function(t){var e;return this.buffer.setUint8((e=this.position,this.position=e+1|0,e),t),this},bE.prototype.putUint8_mj6st8$=function(t,e,i){var n,r;n=e+i|0;for(var o=e;o<n;o++)this.buffer.setUint8((r=this.position,this.position=r+1|0,r),t[o]);return this},bE.prototype.putUint8_ay2i3f$=function(t){var e,i,n;e=t.position,i=t.limit;for(var r=e;r<i;r++)this.buffer.setUint8((n=this.position,this.position=n+1|0,n),t.get_za3lpa$(r));return this},bE.prototype.putUint16_mq22fl$=function(t){return this.buffer.setUint16(this.position,t),this.position=this.position+2|0,this},bE.prototype.putUint16_359eei$=function(t,e,i){var n;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setUint16(this.position,t[r]),this.position=this.position+2|0;return this},bE.prototype.putUint16_8k344i$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setUint16(this.position,t.get_za3lpa$(n)),this.position=this.position+2|0;return this},bE.prototype.putUint32_za3lpa$=function(t){return this.buffer.setUint32(this.position,t),this.position=this.position+4|0,this},bE.prototype.putUint32_nd5v6f$=function(t,e,i){var n;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setUint32(this.position,t[r]),this.position=this.position+4|0;return this},bE.prototype.putUint32_7hqxcs$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setUint32(this.position,t.get_za3lpa$(n)),this.position=this.position+4|0;return this},bE.prototype.putFloat32_mx4ult$=function(t){return this.buffer.setFloat32(this.position,t),this.position=this.position+4|0,this},bE.prototype.putFloat32_kgymra$=function(t,e,i){var n;n=e+i|0;for(var r=e;r<n;r++)this.buffer.setFloat32(this.position,t[r]),this.position=this.position+4|0;return this},bE.prototype.putFloat32_he122g$=function(t){var e,i;e=t.position,i=t.limit;for(var n=e;n<i;n++)this.buffer.setFloat32(this.position,t.get_za3lpa$(n)),this.position=this.position+4|0;return this},bE.$metadata$={kind:$,simpleName:"MixedBufferImpl",interfaces:[_E,Sy]},ii.AwaitedAsset=pi,Object.defineProperty(ii,"Companion",{get:di}),o["kotlinx-coroutines-core"]=n;var SE=t.de||(t.de={}),CE=SE.fabmax||(SE.fabmax={}),NE=CE.kool||(CE.kool={});NE.AssetManager=ii,NE.AssetRef=vi,NE.RawAssetRef=gi,NE.TextureAssetRef=bi,NE.LoadedAsset=xi,NE.LoadedRawAsset=wi,NE.LoadedTextureAsset=zi,NE.EngineStats=ki,Si.Pointer=Ei,Object.defineProperty(Pi,"STARTED",{get:Ai}),Object.defineProperty(Pi,"ACTIVE",{get:Li}),Object.defineProperty(Pi,"ENDED_BEFORE_STARTED",{get:Fi}),Object.defineProperty(Pi,"ENDED_BEFORE_ACTIVE",{get:Vi}),Object.defineProperty(Pi,"ENDED",{get:Wi}),Object.defineProperty(Pi,"INVALID",{get:Yi}),Ti.UpdateState=Pi,Si.BufferedPointerInput=Ti,Si.KeyEventListener=Zi,Si.KeyEvent=Qi,Si.PointerState=tn,Object.defineProperty(Si,"Companion",{get:rn}),NE.InputManager=Si,Object.defineProperty(on,"Companion",{get:un}),NE.KoolContext=on,NE.KoolException_init_61zpoe$=cn,NE.KoolException=pn;var EE=NE.math||(NE.math={});EE.BSpline=hn,EE.BSplineVec2f=dn,Object.defineProperty($n,"Companion",{get:gn}),EE.Mat3f=$n,Object.defineProperty(bn,"Companion",{get:zn}),EE.Mat4d=bn,Object.defineProperty(kn,"Companion",{get:Nn}),EE.Mat4dStack=kn,Object.defineProperty(En,"Companion",{get:On}),EE.Mat4f=En,Object.defineProperty(Mn,"Companion",{get:Bn}),EE.Mat4fStack=Mn,Object.defineProperty(EE,"DEG_2_RAD",{get:function(){return An}}),Object.defineProperty(EE,"RAD_2_DEG",{get:function(){return In}}),Object.defineProperty(EE,"FUZZY_EQ_F",{get:function(){return Rn}}),Object.defineProperty(EE,"FUZZY_EQ_D",{get:function(){return Ln}}),EE.getNumMipLevels_vux9f0$=Un,EE.smoothStep_y2kzbl$=function(t,e,i){var n,r=(i-t)/(e-t);return(n=r<0?0:r>1?1:r)*n*(3-2*n)},EE.triArea_n440fu$=Vn,EE.triAspectRatio_n440fu$=Gn,EE.partition_iuu93u$=Xn,EE.partition_6k0an1$=Kn,EE.Plane=Yn,EE.distanceToRay_f1pxpf$=Zn,EE.sqrDistanceToRay_f1pxpf$=Jn,EE.sqrDistancePointToRay_dthv57$=Qn,EE.PointDistribution=tr,Object.defineProperty(EE,"defaultRandomInstance",{get:function(){return qn}}),EE.randomI=function(){return qn.randomI()},EE.randomF_dleff0$=function(t,e){return qn.randomF_dleff0$(t,e)},EE.Random=er,EE.Ray=ir,EE.RayTest=nr,Object.defineProperty(rr,"Companion",{get:ar}),EE.Vec2f_init_mx4ult$=lr,EE.Vec2f=rr,EE.MutableVec2f_init=pr,EE.MutableVec2f_init_czzhjp$=cr,EE.MutableVec2f=ur,Object.defineProperty(hr,"Companion",{get:_r}),EE.Vec2d_init_14dthe$=mr,EE.Vec2d=hr,EE.MutableVec2d_init=yr,EE.MutableVec2d=$r,Object.defineProperty(vr,"Companion",{get:xr}),EE.Vec2i_init_za3lpa$=wr,EE.Vec2i=vr,EE.MutableVec2i_init=kr,EE.MutableVec2i=zr,Object.defineProperty(Sr,"Companion",{get:Er}),EE.Vec3f_init_mx4ult$=Tr,EE.Vec3f_init_czzhiu$=Pr,EE.Vec3f=Sr,EE.MutableVec3f_init=Mr,EE.MutableVec3f_init_mx4ult$=jr,EE.MutableVec3f_init_czzhiu$=Ar,EE.MutableVec3f=Or,Object.defineProperty(Ir,"Companion",{get:Dr}),EE.Vec3d_init_14dthe$=qr,EE.Vec3d=Ir,EE.MutableVec3d_init=Br,EE.MutableVec3d_init_czzhiw$=function(t,e){return e=e||Object.create(Fr.prototype),Fr.call(e,t.x,t.y,t.z),e},EE.MutableVec3d=Fr,Object.defineProperty(Ur,"Companion",{get:Hr}),EE.Vec3i_init_za3lpa$=Wr,EE.Vec3i=Ur,EE.MutableVec3i_init=Kr,EE.MutableVec3i=Xr,Object.defineProperty(Yr,"Companion",{get:Qr}),EE.Vec4f_init_mx4ult$=to,EE.Vec4f_init_2qa7tb$=eo,EE.Vec4f=Yr,EE.MutableVec4f_init=no,EE.MutableVec4f=io,Object.defineProperty(ro,"Companion",{get:ao}),EE.Vec4d_init_14dthe$=lo,EE.Vec4d=ro,EE.MutableVec4d_init=po,EE.MutableVec4d=uo,Object.defineProperty(co,"Companion",{get:So}),EE.Vec4i_init_za3lpa$=Co,EE.Vec4i=co,EE.MutableVec4i_init=Eo,EE.MutableVec4i=No,EE.scale_2qa7tb$=function(t,e){return t.scale_749b8l$(e,Mr())},EE.cross_4lfkt4$=To;var TE=NE.modules||(NE.modules={});Po.EdgeHandler=Oo,Po.HalfEdgeVertex=jo,Po.HalfEdge=Ao;var PE=TE.mesh||(TE.mesh={});PE.HalfEdgeMesh=Po,PE.ListEdgeHandler=Io,PE.OcTreeEdgeHandler=Do;var OE=PE.simplification||(PE.simplification={});OE.CollapseStrategy=Fo,OE.defaultCollapseStrategy=Uo,OE.ErrorQuadric=Vo,OE.simplify_hem9$=function(t,e,i){void 0===i&&(i=gt());var n=new Go(e);wt(n.excludedEdges,i),n.simplifyMesh_mnbsaa$(t)},OE.MeshSimplifier=Go,OE.TermCriterion=Ko,OE.terminateOnFaceCountRel_14dthe$=function(t){return new Yo(t)},Object.defineProperty(Zo,"FLOAT",{get:Qo}),Object.defineProperty(Zo,"VEC_2F",{get:ts}),Object.defineProperty(Zo,"VEC_3F",{get:es}),Object.defineProperty(Zo,"VEC_4F",{get:is}),Object.defineProperty(Zo,"INT",{get:ns}),Object.defineProperty(Zo,"VEC_2I",{get:rs}),Object.defineProperty(Zo,"VEC_3I",{get:os}),Object.defineProperty(Zo,"VEC_4I",{get:ss}),Object.defineProperty(Zo,"MAT_2F",{get:as}),Object.defineProperty(Zo,"MAT_3F",{get:ls}),Object.defineProperty(Zo,"MAT_4F",{get:us});var ME=NE.pipeline||(NE.pipeline={});ME.GlslType=Zo,Object.defineProperty(ps,"Companion",{get:ds}),ME.Attribute=ps,Object.defineProperty(fs,"Companion",{get:$s}),ME.DepthMapPass=fs,Object.defineProperty(ys,"Companion",{get:As}),ME.NormalLinearDepthMapPass_init_br7tm5$=Is,ME.NormalLinearDepthMapPass=ys,Rs.Builder=Ls,ME.DescriptorSetLayout=Rs,Ds.Builder=qs,ME.Descriptor=Ds,Fs.Builder=Bs,ME.TextureSampler1d=Fs,Us.Builder=Vs,ME.TextureSampler2d=Us,Gs.Builder=Hs,ME.TextureSampler3d=Gs,Ws.Builder=Xs,ME.TextureSamplerCube=Ws,Ks.Builder=Ys,ME.UniformBuffer=Ks,Object.defineProperty(Zs,"SAMPLER_1D",{get:Qs}),Object.defineProperty(Zs,"SAMPLER_2D",{get:ta}),Object.defineProperty(Zs,"SAMPLER_3D",{get:ea}),Object.defineProperty(Zs,"SAMPLER_CUBE",{get:ia}),Object.defineProperty(Zs,"UNIFORM_BUFFER",{get:na}),ME.DescriptorType=Zs;var jE=ME.drawqueue||(ME.drawqueue={});jE.DrawCommand=ra,jE.DrawQueue=oa,ME.LoadedTexture=aa,ME.OffscreenRenderPass=la,la.Config=ua,la.ConfigBuilder=pa,la.TextureAttachmentConfig=ca,la.TextureAttachmentConfigBuilder=ha,Object.defineProperty(da,"TEXTURE",{get:_a}),Object.defineProperty(da,"RENDER_BUFFER",{get:ma}),la.RenderTarget=da,ME.OffscreenRenderPass2d=$a,Object.defineProperty(ga,"FRONT",{get:xa}),Object.defineProperty(ga,"BACK",{get:wa}),Object.defineProperty(ga,"LEFT",{get:za}),Object.defineProperty(ga,"RIGHT",{get:ka}),Object.defineProperty(ga,"UP",{get:Sa}),Object.defineProperty(ga,"DOWN",{get:Ca}),ya.ViewDirection=ga,ME.OffscreenRenderPassCube=ya,Ea.Layout=Ta,Ea.Builder=Pa,Object.defineProperty(Ea,"Companion",{get:ul}),ME.Pipeline=Ea,Object.defineProperty(pl,"DISABLED",{get:hl}),Object.defineProperty(pl,"BLEND_ADDITIVE",{get:dl}),Object.defineProperty(pl,"BLEND_MULTIPLY_ALPHA",{get:fl}),Object.defineProperty(pl,"BLEND_PREMULTIPLIED_ALPHA",{get:_l}),ME.BlendMode=pl,Object.defineProperty(ml,"DISABLED",{get:yl}),Object.defineProperty(ml,"ALWAYS",{get:vl}),Object.defineProperty(ml,"NEVER",{get:gl}),Object.defineProperty(ml,"LESS",{get:bl}),Object.defineProperty(ml,"LESS_EQUAL",{get:xl}),Object.defineProperty(ml,"GREATER",{get:wl}),Object.defineProperty(ml,"GREATER_EQUAL",{get:zl}),Object.defineProperty(ml,"EQUAL",{get:kl}),Object.defineProperty(ml,"NOT_EQUAL",{get:Sl}),ME.DepthCompareOp=ml,Object.defineProperty(Cl,"DEFAULT",{get:El}),Object.defineProperty(Cl,"CULL_BACK_FACES",{get:Tl}),Object.defineProperty(Cl,"CULL_FRONT_FACES",{get:Pl}),Object.defineProperty(Cl,"NO_CULLING",{get:Ol}),ME.CullMethod=Cl,Ml.Builder=jl,ME.PushConstantRange=Ml,Al.UpdateEvent=Il,ME.RenderPass=Al,ME.ScreenRenderPass=Rl,ME.Shader=Ll,Object.defineProperty(ql,"Y_UP",{get:Bl}),Object.defineProperty(ql,"Y_DOWN",{get:Ul}),Dl.ClipSpaceOrientation=ql;var AE=ME.shadermodel||(ME.shadermodel={});AE.CodeGenerator=Dl,AE.ColorAlphaNode=Vl,AE.PremultiplyColorNode=Gl,AE.GammaNode=Hl,AE.HdrToLdrNode=Wl,AE.FragmentColorOutNode=Xl,AE.FragmentDepthOutNode=Kl,AE.DiscardAlphaNode=Yl,AE.MultiLightNode=Zl,AE.SingleLightUniformDataNode=Ql,AE.SingleLightNode=eu,AE.SinglePointLightNode=iu,AE.SingleSpotLightNode=nu,AE.UnlitMaterialNode=ru,AE.PhongMaterialNode=ou,AE.PbrMaterialNode=su,AE.PbrLightNode=au,AE.MathOpNode=lu,AE.AddNode=uu,AE.SubtractNode=pu,AE.DivideNode=cu,AE.MultiplyNode=hu,AE.MixNode=du,AE.VecFromColorNode=fu,AE.DistanceNode=_u,AE.NormalizeNode=mu,AE.ViewDirNode=$u,AE.ReflectNode=yu,AE.RefractNode=vu,AE.ModelVar=gu,AE.ModelVar1f=bu,AE.ModelVar2f=xu,AE.ModelVar3f=wu,AE.ModelVar4f=zu,AE.ModelVar3fv=ku,AE.ModelVar1i=Su,AE.ModelVar2i=Cu,AE.ModelVar3i=Nu,AE.ModelVar4i=Eu,AE.ModelVarMat4f=Tu,AE.ModelVar1fConst=Pu,AE.ModelVar2fConst=Ou,AE.ModelVar3fConst=Mu,AE.ModelVar4fConst=ju,AE.ModelVar1iConst=Au,AE.ModelVar2iConst=Iu,AE.ModelVar3iConst=Ru,AE.ModelVar4iConst=Lu,AE.Texture1dSamplerNode=Du,AE.Texture2dSamplerNode=qu,AE.Texture3dSamplerNode=Fu,AE.TextureCubeSamplerNode=Bu,AE.EquiRectSamplerNode=Uu,AE.NoiseTextureSamplerNode=Vu,AE.AoMapSampleNode=Gu,AE.NormalMapNode=Hu,AE.DisplacementMapNode=Wu,AE.RefractionSamplerNode=Xu,AE.ShaderGenerator=Ku,AE.ShaderInterfaceIoVar=Yu,AE.ShaderGraph=Zu,AE.VertexShaderGraph=Ju,AE.FragmentShaderGraph=Qu,ME.ShaderStage=sc,tp.StageBuilder=ep,tp.VertexStageBuilder=ip,tp.FragmentStageBuilder=np,AE.ShaderModel=tp,AE.ShaderNode=rp,AE.ShaderNodeIoVar=op,AE.ShadowMapNode=sp,AE.SimpleShadowMapNode=ap,AE.SimpleShadowMapTransformNode=lp,AE.SimpleShadowMapFragmentNode=pp,AE.CascadedShadowMapNode=cp,AE.CascadedShadowMapTransformNode=dp,AE.CascadedShadowMapFragmentNode=_p,AE.Vec3TransformNode=$p,AE.Vec4TransformNode=yp,AE.SkinTransformNode=vp,bp.StageCopy=wp,AE.UniformBufferPremultipliedMvp=bp,zp.StageCopy=Sp,AE.UniformBufferMvp=zp,AE.Texture1dNode=Cp,AE.Texture2dNode=Ep,AE.Texture3dNode=Pp,AE.TextureCubeNode=Mp,AE.MorphWeightsNode=Ap,AE.PushConstantNode=Ip,AE.PushConstantNode1f=Rp,AE.PushConstantNode2f=Lp,AE.PushConstantNode3f=Dp,AE.PushConstantNode4f=qp,AE.PushConstantNodeColor=Fp,AE.PushConstantNode1i=Bp,AE.PushConstantNode2i=Up,AE.PushConstantNode3i=Vp,AE.PushConstantNode4i=Gp,AE.FlipBacksideNormalNode=Hp,AE.SplitNode=Wp,AE.CombineNode=Xp,AE.Combine31Node=Kp,AE.AttributeNode=Yp,AE.InstanceAttributeNode=Zp,Jp.InputNode=Qp,Jp.OutputNode=tc,AE.StageInterfaceNode=Jp,AE.ScreenCoordNode=ec,AE.FullScreenQuadTexPosNode=ic,AE.GetMorphWeightNode=nc,AE.NamedVariableNode=rc,AE.PointSizeNode=oc,Object.defineProperty(sc,"VERTEX_SHADER",{get:lc}),Object.defineProperty(sc,"TESSELEATION_CTRL",{get:uc}),Object.defineProperty(sc,"TESSELATION_EVAL",{get:pc}),Object.defineProperty(sc,"GEOMETRY_SHADER",{get:cc}),Object.defineProperty(sc,"FRAGMENT_SHADER",{get:hc}),Object.defineProperty(sc,"ALL",{get:dc}),Object.defineProperty(fc,"CUBE_MAP_ALBEDO",{get:mc}),Object.defineProperty(fc,"STATIC_ALBEDO",{get:$c}),Object.defineProperty(fc,"TEXTURE_ALBEDO",{get:yc}),Object.defineProperty(fc,"VERTEX_ALBEDO",{get:vc});var IE=ME.shading||(ME.shading={});IE.Albedo=fc,IE.AlphaMode=gc,IE.AlphaModeBlend=bc,IE.AlphaModeOpaque=xc,IE.AlphaModeMask=wc,zc.StaticColor=kc,zc.VertexColor=Sc,zc.TextureColor=Cc,zc.CubeMapColor=Nc,Object.defineProperty(zc,"Companion",{get:Pc}),IE.ModeledShader=zc,IE.PbrMaterialConfig=Oc,IE.pbrShader_skmpm9$=Mc,Object.defineProperty(jc,"Companion",{get:Rc}),IE.PbrShader=jc,Object.defineProperty(Lc,"Companion",{get:Fc}),Lc.PhongConfig=Bc,IE.PhongShader=Lc,Object.defineProperty(Uc,"Companion",{get:rh}),IE.UnlitShader=Uc,IE.UnlitMaterialConfig=oh,ME.Std140Layout=sh,Object.defineProperty(lh,"R",{get:ph}),Object.defineProperty(lh,"RG",{get:ch}),Object.defineProperty(lh,"RGB",{get:hh}),Object.defineProperty(lh,"RGBA",{get:dh}),Object.defineProperty(lh,"R_F16",{get:fh}),Object.defineProperty(lh,"RG_F16",{get:_h}),Object.defineProperty(lh,"RGB_F16",{get:mh}),Object.defineProperty(lh,"RGBA_F16",{get:$h}),ME.TexFormat=lh,Object.defineProperty(vh,"NOT_LOADED",{get:bh}),Object.defineProperty(vh,"LOADING",{get:xh}),Object.defineProperty(vh,"LOADED",{get:wh}),Object.defineProperty(vh,"LOADING_FAILED",{get:zh}),yh.LoadingState=vh,Object.defineProperty(yh,"Companion",{get:Ch}),ME.Texture=yh,ME.Texture1d=Nh,ME.Texture2d_init_wabggl$=Th,ME.Texture2d=Eh,ME.Texture3d=Oh,ME.TextureCube=Mh,Object.defineProperty(jh,"Companion",{get:Bh}),ME.SingleColorTexture=jh,ME.GradientTexture=Vh,ME.TextureProps=Hh,Object.defineProperty(Wh,"NEAREST",{get:Kh}),Object.defineProperty(Wh,"LINEAR",{get:Yh}),ME.FilterMethod=Wh,Object.defineProperty(Zh,"CLAMP_TO_EDGE",{get:Qh}),Object.defineProperty(Zh,"MIRRORED_REPEAT",{get:td}),Object.defineProperty(Zh,"REPEAT",{get:ed}),ME.AddressMode=Zh,ME.TextureData=id,Object.defineProperty(nd,"Companion",{get:sd}),ME.TextureData1d=nd,Object.defineProperty(ad,"Companion",{get:_d}),ME.TextureData2d=ad,ME.TextureData3d=md,ME.TextureDataCube=$d,ME.Uniform=yd,ME.Uniform1f_init_1isgrl$=gd,ME.Uniform1f=vd,ME.Uniform2f=bd,ME.Uniform3f=xd,ME.Uniform4f=wd,ME.UniformColor=zd,ME.Uniform1fv=kd,ME.Uniform2fv=Sd,ME.Uniform3fv=Cd,ME.Uniform4fv=Nd,ME.UniformMat3f=Ed,ME.UniformMat4f=Td,ME.UniformMat4fv=Pd,ME.Uniform1i_init_19mbxw$=Md,ME.Uniform1i=Od,ME.Uniform2i=jd,ME.Uniform3i=Ad,ME.Uniform4i=Id,Rd.Binding=Ld,Rd.VertexAttribute=Dd,Rd.Builder=qd,ME.VertexLayout=Rd,Object.defineProperty(Fd,"VERTEX",{get:Ud}),Object.defineProperty(Fd,"INSTANCE",{get:Vd}),ME.InputRate=Fd,NE.toString_lcymw2$=Gd,Object.defineProperty(Xd,"NONE",{get:Yd}),Object.defineProperty(Xd,"ONSCREEN",{get:Zd}),Object.defineProperty(Xd,"OFFSCREEN",{get:Jd}),Hd.ProjCorrectionMode=Xd;var RE=NE.scene||(NE.scene={});RE.Camera=Hd,RE.OrthographicCamera=Qd,tf.Proxy=ef,RE.PerspectiveCamera=tf,RE.FrustumPlane=nf,RE.group_2ylazs$=function(t,e){void 0===t&&(t=null);var i=new lf(t);return e(i),i},RE.Group=lf,RE.Lighting=uf,Object.defineProperty(cf,"DIRECTIONAL",{get:df}),Object.defineProperty(cf,"POINT",{get:ff}),Object.defineProperty(cf,"SPOT",{get:_f}),pf.Type=cf,RE.Light=pf,RE.wireframeMesh_hjnvxh$=function(t,e){void 0===e&&(e=null);var i=new mf;return i.addWireframe_hjnvxh$(t,e),i},RE.LineMesh=mf,RE.colorMesh_gp9ews$=$f,RE.textureMesh_pyaqjj$=yf,Object.defineProperty(vf,"Companion",{get:xf}),RE.Mesh=vf,Object.defineProperty(wf,"Companion",{get:Tf}),RE.MeshRayTest=wf,RE.Model=Pf,Object.defineProperty(Of,"Companion",{get:qf}),RE.Node=Of,RE.orbitInputTransform_uj7ww7$=Ff,RE.defaultCamTransform_v4keia$=function(t){var e,i=Ff(t,void 0,(e=t,function(t){return t.setMouseRotation_dleff0$(20,-30),t.unaryPlus_uv0sim$(e.camera),s}));return t.unaryPlus_uv0sim$(i),i},Object.defineProperty(Uf,"NONE",{get:Gf}),Object.defineProperty(Uf,"ROTATE",{get:Hf}),Object.defineProperty(Uf,"PAN",{get:Wf}),Bf.DragMethod=Uf,Object.defineProperty(Xf,"ZOOM_CENTER",{get:Yf}),Object.defineProperty(Xf,"ZOOM_TRANSLATE",{get:Zf}),Bf.ZoomMethod=Xf,RE.OrbitInputTransform=Bf,RE.PanBase=Jf,RE.CameraOrthogonalPan=Qf,RE.pointMesh_zhxjay$=function(t,e){void 0===t&&(t=null);var i=new t_(void 0,t);return e(i),i},Object.defineProperty(t_,"Companion",{get:n_}),RE.PointMesh=t_,r_.DragHandler=o_,RE.Scene=r_,Object.defineProperty(p_,"Companion",{get:d_}),s_.prototype.SkyboxCubeShader=p_,Object.defineProperty(__,"Companion",{get:y_}),s_.prototype.SkyboxSphereShader=__,s_.prototype.SkyboxPosNode=g_,Object.defineProperty(RE,"Skybox",{get:function(){return null===N_&&new s_,N_}}),RE.Tags=E_;var LE=RE.ui||(RE.ui={});LE.Button=T_,LE.ButtonUi=P_,LE.ComponentUi=O_,LE.BlankComponentUi=M_,LE.SimpleComponentUi=j_,LE.BlurredComponentUi=A_,LE.DrawerMenu=I_,LE.Label=L_,LE.LabelUi=D_,LE.LayoutSpec=q_,Object.defineProperty(F_,"UN",{get:U_}),Object.defineProperty(F_,"DP",{get:V_}),Object.defineProperty(F_,"MM",{get:G_}),Object.defineProperty(F_,"PC",{get:H_}),LE.SizeUnit=F_,LE.zero=W_,LE.full=X_,LE.uns_8ca0d4$=K_,LE.dps_8ca0d4$=Y_,LE.pcs_8ca0d4$=Z_,LE.pc_dleff0$=J_,LE.dp_dleff0$=Q_,LE.mm_dleff0$=tm,LE.dp_wl4j30$=em,LE.pcR_dleff0$=im,LE.dpR_dleff0$=nm,LE.mmR_dleff0$=rm,LE.SizeSpec=om,LE.Margin=am,LE.Gravity=lm,Object.defineProperty(um,"START",{get:cm}),Object.defineProperty(um,"CENTER",{get:hm}),Object.defineProperty(um,"END",{get:dm}),LE.Alignment=um,LE.ScrollHandler=fm,LE.ScrollHandlerUi=_m,LE.Slider=mm,LE.SliderUi=$m,LE.TextField=ym,LE.TextFieldUi=vm,Object.defineProperty(gm,"Companion",{get:wm}),LE.EditableText=gm,LE.ToggleButton=zm,LE.ToggleButtonUi=km,LE.UiComponent=Sm,LE.UiContainer=Tm,LE.embeddedUi_4gy91$=Om,LE.uiScene_2d22y4$=Mm,LE.UiRoot=jm,Object.defineProperty(Am,"Companion",{get:Lm}),LE.UiShader=Am,Object.defineProperty(Dm,"Companion",{get:Hm}),LE.UiTheme=Dm,LE.standardFont_mt8j6u$=Xm,LE.titleFont_mt8j6u$=Km,LE.theme_vvurn$=Ym,LE.ThemeBuilder=Zm,LE.ThemeOrCustomProp=Jm;var DE=NE.util||(NE.util={}),qE=DE.animation||(DE.animation={});qE.Animation=Qm,qE.AnimationChannel=t$,qE.TranslationAnimationChannel=e$,qE.RotationAnimationChannel=i$,qE.ScaleAnimationChannel=n$,qE.WeightAnimationChannel=r$,qE.AnimationNode=o$,qE.AnimatedTransformGroup=s$,qE.MorphAnimatedMesh=a$,Object.defineProperty(u$,"LINEAR",{get:d$}),Object.defineProperty(u$,"STEP",{get:m$}),Object.defineProperty(u$,"CUBICSPLINE",{get:v$}),l$.Interpolation=u$,qE.AnimationKey=l$,qE.RotationKey=g$,qE.CubicRotationKey=b$,qE.TranslationKey=x$,qE.CubicTranslationKey=w$,qE.ScaleKey=z$,qE.CubicScaleKey=k$,qE.WeightKey=S$,qE.CubicWeightKey=C$,Object.defineProperty(N$,"Companion",{get:P$}),qE.Animator=N$,qE.LinearAnimator=O$,qE.CosAnimator=M$,qE.InterpolatedValue=j$,qE.InterpolatedFloat=A$,qE.SpringDamperFloat=I$,qE.SpringDamperDouble=R$,L$.SkinNode=D$,qE.Skin=L$,Object.defineProperty(q$,"Companion",{get:X$});var FE=DE.ao||(DE.ao={});FE.AmbientOcclusionPass=q$,Object.defineProperty(Y$,"Companion",{get:Q$}),FE.AoSetup=Y$,FE.AoDenoisePass=ty,sy.ForwardAoPipeline=ay,sy.DeferredAoPipeline=ly,Object.defineProperty(sy,"Companion",{get:cy}),FE.AoPipeline=sy;var BE=DE.atmosphere||(DE.atmosphere={});BE.RaySphereIntersectionNode=hy,BE.AtmosphereNode=dy,Object.defineProperty(fy,"Companion",{get:$y}),BE.OpticalDepthLutPass=fy,DE.BoundingBox_init_4lfkt4$=function(t,e,i){return i=i||Object.create(gy.prototype),gy.call(i),i.set_4lfkt4$(t,e),i},DE.BoundingBox=gy,DE.Buffer=by,DE.Uint8Buffer=xy,DE.Uint16Buffer=wy,DE.Uint32Buffer=zy,DE.Float32Buffer=ky,DE.MixedBuffer=Sy,DE.copy_2p1efm$=Cy,DE.copy_cgavii$=Ny,Object.defineProperty(Ey,"Companion",{get:Oy}),DE.Color=Ey,DE.MutableColor_init=jy,DE.MutableColor_init_d7aj7k$=Ay,DE.MutableColor=My,Object.defineProperty(Ry,"Companion",{get:Vy}),DE.ColorGradient_init_5tenyj$=Hy,DE.ColorGradient=Ry,DE.DataStream=Wy,Object.defineProperty(Ky,"UPPER_LEFT",{get:Zy}),Object.defineProperty(Ky,"UPPER_RIGHT",{get:Jy}),Object.defineProperty(Ky,"LOWER_LEFT",{get:Qy}),Object.defineProperty(Ky,"LOWER_RIGHT",{get:tv}),Xy.Position=Ky,DE.DebugOverlay=Xy,Object.defineProperty(ov,"Companion",{get:lv}),ov.Config=uv;var UE=DE.deferred||(DE.deferred={});UE.DeferredLightShader=ov,Object.defineProperty(pv,"Companion",{get:dv}),UE.DeferredMrtPass=pv,Object.defineProperty(_v,"Companion",{get:yv}),UE.DeferredOutputShader=_v,Object.defineProperty(vv,"Companion",{get:xv}),vv.MrtMultiplexNode=wv,vv.MrtDeMultiplexNode=zv,UE.DeferredPbrShader=vv,UE.DeferredPipeline=kv,UE.DeferredPipelineConfig=Sv,Cv.PointLight=Nv,UE.DeferredPointLights=Cv,UE.DiscardClearNode=Tv,UE.DeferredCameraNode=Pv,Mv.SpotLight=jv,UE.DeferredSpotLights=Mv,UE.PbrLightingPass=Av,Object.defineProperty(Lv,"Companion",{get:Fv}),Lv.DeferredPbrConfig=Bv,UE.PbrSceneShader=Lv,UE.ReflectionDenoisePass=Uv,Object.defineProperty(Wv,"Companion",{get:Qv}),UE.ReflectionPass=Wv,UE.ScreenSpaceRayTraceNode=eg,DE.Disposable=ig,DE.uiFont_a4r08d$=ng,DE.FontProps=rg,Object.defineProperty(og,"Companion",{get:lg}),DE.Font_init_8tzsp9$=pg,DE.Font=og,DE.CharMetrics=cg,DE.CharMap=hg,Object.defineProperty(dg,"Companion",{get:mg}),Object.defineProperty($g,"Companion",{get:gg}),Object.defineProperty($g,"$serializer",{get:wg}),dg.Sparse_init_c4f9z2$=zg,dg.Sparse=$g,Object.defineProperty(kg,"Companion",{get:Ng}),Object.defineProperty(kg,"$serializer",{get:Pg}),dg.SparseIndices_init_ei4ty7$=Og,dg.SparseIndices=kg,Object.defineProperty(Mg,"Companion",{get:Ig}),Object.defineProperty(Mg,"$serializer",{get:Dg}),dg.SparseValues_init_tup0k7$=qg,dg.SparseValues=Mg,Object.defineProperty(dg,"$serializer",{get:Ug});var VE=DE.gltf||(DE.gltf={});VE.GltfAccessor_init_xcc4mb$=Vg,VE.GltfAccessor=dg,VE.DataStreamAccessor=Gg,VE.IntAccessor=Hg,VE.FloatAccessor=Wg,VE.Vec2fAccessor=Xg,VE.Vec3fAccessor=Kg,VE.Vec4fAccessor=Yg,VE.Vec4iAccessor=Zg,VE.Mat4fAccessor=Jg,Object.defineProperty(tb,"Companion",{get:nb}),Object.defineProperty(tb,"$serializer",{get:sb}),Qg.Channel_init_izej1q$=ab,Qg.Channel=tb,Object.defineProperty(lb,"Companion",{get:cb}),Object.defineProperty(lb,"$serializer",{get:fb}),Qg.Target_init_woby6u$=_b,Qg.Target=lb,Object.defineProperty(mb,"Companion",{get:vb}),Object.defineProperty(mb,"$serializer",{get:xb}),Qg.Sampler_init_vbg14u$=wb,Qg.Sampler=mb,Object.defineProperty(Qg,"Companion",{get:Sb}),Object.defineProperty(Qg,"$serializer",{get:Eb}),VE.GltfAnimation_init_u8627j$=Tb,VE.GltfAnimation=Qg,Object.defineProperty(Pb,"Companion",{get:jb}),Object.defineProperty(Pb,"$serializer",{get:Rb}),VE.GltfAsset_init_6zcyl3$=Lb,VE.GltfAsset=Pb,VE.loadGltfFile_7e2ead$=qb,VE.loadGltfModel_aln4ac$=function(t,e,i,n,r,o){var s=new Fb(t,e,i,n,r);return o?s:s.doResume(null)},Object.defineProperty(Wb,"Companion",{get:Yb}),Object.defineProperty(Wb,"$serializer",{get:Qb}),VE.GltfBuffer_init_7vc2qp$=tx,VE.GltfBuffer=Wb,Object.defineProperty(ex,"Companion",{get:rx}),Object.defineProperty(ex,"$serializer",{get:ax}),VE.GltfBufferView_init_m5zzca$=lx,VE.GltfBufferView=ex,ux.ModelGenerateConfig=px,ux.ModelMaterialConfig=cx,o["kotlinx-serialization-kotlinx-serialization-core-jsLegacy"]=r,Object.defineProperty(ux,"Companion",{get:$x}),Object.defineProperty(ux,"$serializer",{get:gx}),VE.GltfFile_init_iuf0kj$=bx,VE.GltfFile=ux,Object.defineProperty(xx,"Companion",{get:kx}),Object.defineProperty(xx,"$serializer",{get:Nx}),VE.GltfImage_init_kfyxti$=Ex,VE.GltfImage=xx,Object.defineProperty(Px,"Companion",{get:jx}),Object.defineProperty(Px,"$serializer",{get:Rx}),Tx.PbrMetallicRoughness_init_t9ohaw$=Lx,Tx.PbrMetallicRoughness=Px,Object.defineProperty(Tx,"Companion",{get:Fx}),Object.defineProperty(Tx,"$serializer",{get:Vx}),VE.GltfMaterial_init_6sdafb$=Gx,VE.GltfMaterial=Tx,Object.defineProperty(Wx,"Companion",{get:Yx}),Object.defineProperty(Wx,"$serializer",{get:Qx}),Hx.Primitive_init_g6eddi$=tw,Hx.Primitive=Wx,Object.defineProperty(Hx,"Companion",{get:nw}),Object.defineProperty(Hx,"$serializer",{get:sw}),VE.GltfMesh_init_bdgbz6$=aw,VE.GltfMesh=Hx,Object.defineProperty(lw,"Companion",{get:cw}),Object.defineProperty(lw,"$serializer",{get:fw}),VE.GltfNode_init_fw4yk9$=_w,VE.GltfNode=lw,Object.defineProperty(mw,"Companion",{get:vw}),Object.defineProperty(mw,"$serializer",{get:xw}),VE.GltfScene_init_ldvoza$=ww,VE.GltfScene=mw,Object.defineProperty(zw,"Companion",{get:Cw}),Object.defineProperty(zw,"$serializer",{get:Tw}),VE.GltfSkin_init_t9evm2$=Pw,VE.GltfSkin=zw,Object.defineProperty(Ow,"Companion",{get:Iw}),Object.defineProperty(Ow,"$serializer",{get:Dw}),VE.GltfTexture_init_k7m1pc$=qw,VE.GltfTexture=Ow,Object.defineProperty(Fw,"Companion",{get:Vw}),Object.defineProperty(Fw,"$serializer",{get:Ww}),VE.GltfTextureInfo_init_vneh73$=Xw,VE.GltfTextureInfo=Fw;var GE=DE.ibl||(DE.ibl={});GE.BrdfLutPass=Kw,Object.defineProperty(GE,"EnvironmentHelper",{get:function(){return null===ez&&new Jw,ez}}),GE.EnvironmentMaps=iz,GE.GradientCubeGenerator=nz,GE.EnvCubeSamplerNode=az,GE.EnvEquiRectSamplerNode=lz,GE.RgbeDecoderNode=uz,Object.defineProperty(pz,"Companion",{get:fz}),GE.IrradianceMapPass=pz,Object.defineProperty(yz,"Companion",{get:xz}),GE.ReflectionMapPass=yz,GE.RgbeDecoder=Sz,GE.SkyCubePass=Ez,GE.SkyCubeIblSystem=Lz,Object.defineProperty(Dz,"Companion",{get:Wz}),DE.IndexedVertexList_init_5jr6ei$=Xz,DE.IndexedVertexList=Dz,Object.defineProperty(Kz,"LINES",{get:Zz}),Object.defineProperty(Kz,"POINTS",{get:Jz}),Object.defineProperty(Kz,"TRIANGLES",{get:Qz}),DE.PrimitiveType=Kz,Object.defineProperty(tk,"DYNAMIC",{get:ik}),Object.defineProperty(tk,"STATIC",{get:nk}),DE.Usage=tk,ck.Instance=_k,DE.InstancedLodController=ck,mk.prototype.Level=$k,Object.defineProperty($k,"TRACE",{get:vk}),Object.defineProperty($k,"DEBUG",{get:gk}),Object.defineProperty($k,"INFO",{get:bk}),Object.defineProperty($k,"WARN",{get:xk}),Object.defineProperty($k,"ERROR",{get:wk}),Object.defineProperty($k,"OFF",{get:zk}),Object.defineProperty(DE,"Log",{get:function(){return null===Sk&&new mk,Sk}}),DE.MeshBuilder=Ck,DE.CircleProps=Ek,Object.defineProperty(Tk,"Companion",{get:jk}),DE.GridProps=Tk,DE.SphereProps=Ak,DE.RectProps=Ik,DE.CubeProps=Rk,DE.CylinderProps=Lk,DE.TextProps=Dk,Object.defineProperty(qk,"Companion",{get:Uk}),DE.MeshInstanceList=qk,Object.defineProperty(Vk,"Companion",{get:Wk}),DE.ObjectRecycler_init_9ce4rd$=Xk,DE.ObjectRecycler=Vk,DE.ObjectPool=Kk,DE.PerfTimer=Yk,NE.now=TC,NE.toString_j6vyb1$=PC,Zk.prototype.TriangulatedPolygon=Jk,Object.defineProperty(DE,"PolyUtil",{get:aS}),DE.ShapeContainer=lS,DE.Profile=uS,DE.Shape=pS,DE.SimpleShape=cS,DE.MultiShape=hS,DE.ShadowMap=dS,DE.SimpleShadowMap=fS,mS.MapRange=$S,DE.CascadedShadowMap=mS,yS.KdNode=vS;var HE=DE.spatial||(DE.spatial={});HE.KdTree=yS,HE.pointKdTree_ffk80x$=function(t,e){return void 0===e&&(e=20),new yS(t,kS(),e)},HE.triangleKdTree_uvzo00$=gS,HE.edgeKdTree_jn4zy3$=bS,HE.ItemAdapter=xS,Object.defineProperty(HE,"Vec3fAdapter",{get:kS}),Object.defineProperty(HE,"EdgeAdapter",{get:NS}),Object.defineProperty(HE,"TriangleAdapter",{get:PS}),Object.defineProperty(OS,"Companion",{get:AS}),HE.Edge=OS,Object.defineProperty(IS,"Companion",{get:DS}),HE.Triangle_init_olctmm$=qS,HE.Triangle=IS,FS.Node=BS,HE.SpatialTree=FS,HE.PointDistance=VS,HE.BoundingSphereDistance=GS,HE.RayDistance=HS,HE.SpatialTreeTraverser=WS,HE.CenterPointTraverser=XS,HE.InRadiusTraverser=YS,HE.NearestToRayTraverser=ZS,HE.NearestEdgeToRayTraverser=QS,HE.TriangleHitTraverser=eC,nC.Child=rC,HE.ChildNodesWithDistance=nC,Object.defineProperty(aC,"Companion",{get:pC}),aC.Gesture=cC,DE.TouchGestureEvaluator=aC,Object.defineProperty(hC,"Companion",{get:mC}),DE.TreeMap=hC,yC.FloatView=vC,yC.IntView=zC,yC.Vec2iView=kC,yC.Vec3iView=SC,yC.Vec4iView=CC,DE.VertexView=yC,DE.Viewport=NC,NE.createDefaultContext=function(){return EC(new pN)},NE.createContext_s8od96$=EC,Object.defineProperty(NE,"JsImpl",{get:jC}),ME.OffscreenPass2dImpl=AC,Object.defineProperty(IC,"Companion",{get:DC}),ME.OffscreenPassCubeImpl=IC,ME.PlatformAttributeProps=qC,ME.ShaderCode=FC;var WE=NE.platform||(NE.platform={});WE.FontMapGenerator=BC,WE.ImageTextureData=UC,WE.ImageAtlasTextureData=VC,Object.defineProperty(GC,"Companion",{get:lN}),WE.JsAssetManager=GC,uN.InitProps=pN,Object.defineProperty(uN,"Companion",{get:dN}),WE.JsContext=uN,WE.GlCapabilities=fN,WE.get_elementX_wgrwqm$=_N,WE.get_elementY_wgrwqm$=mN,WE.get_glInternalFormat_my8d90$=$N,WE.get_glType_my8d90$=yN,WE.get_glFormat_my8d90$=vN,WE.get_pxSize_my8d90$=gN,WE.get_glOp_jstu7d$=bN,Object.defineProperty(xN,"Companion",{get:kN});var XE=WE.webgl||(WE.webgl={});return XE.BufferResource=xN,SN.ShaderInstance=CN,XE.CompiledShader=SN,Object.defineProperty(EN,"Companion",{get:ON}),XE.LoadedTextureWebGl=EN,Object.defineProperty(MN,"Companion",{get:IN}),XE.MappedUniform=MN,XE.MappedUniform1f=RN,XE.MappedUniform2f=LN,XE.MappedUniform3f=DN,XE.MappedUniform4f=qN,XE.MappedUniform1fv=FN,XE.MappedUniform2fv=BN,XE.MappedUniform3fv=UN,XE.MappedUniform4fv=VN,XE.MappedUniformColor=GN,XE.MappedUniformMat3f=HN,XE.MappedUniformMat4f=WN,XE.MappedUniformMat4fv=XN,XE.MappedUniform1i=KN,Object.defineProperty(YN,"Companion",{get:tE}),XE.MappedUniformTex=YN,XE.MappedUniformTex1d=eE,XE.MappedUniformTex2d=iE,XE.MappedUniformTex3d=nE,XE.MappedUniformTexCube=rE,XE.QueueRendererWebGl=oE,XE.ShaderGeneratorImplWebGl=aE,XE.ShaderManager=pE,Object.defineProperty(XE,"TextureLoader",{get:dE}),XE.VboBinder=fE,DE.GenericBuffer=_E,DE.Uint8BufferImpl_init_za3lpa$=$E,DE.Uint8BufferImpl=mE,DE.Uint16BufferImpl=yE,DE.Uint32BufferImpl=vE,DE.Float32BufferImpl=gE,DE.MixedBufferImpl=bE,DE.createUint8Buffer_za3lpa$=xE,DE.createUint32Buffer_za3lpa$=wE,DE.createFloat32Buffer_za3lpa$=zE,DE.createMixedBuffer_za3lpa$=kE,Io.prototype.distinctTriangleEdges=Oo.prototype.distinctTriangleEdges,qo.prototype.getMin_hm1yd1$=xS.prototype.getMin_hm1yd1$,qo.prototype.getMax_hm1yd1$=xS.prototype.getMax_hm1yd1$,qo.prototype.getCenter_hm1yd1$=xS.prototype.getCenter_hm1yd1$,Do.prototype.distinctTriangleEdges=Oo.prototype.distinctTriangleEdges,Ko.prototype.init_nbf0q6$,Ko.prototype.init_nbf0q6$,kf.prototype.onMeshDataChanged_f1jspk$=wf.prototype.onMeshDataChanged_f1jspk$,M_.prototype.updateComponentAlpha=O_.prototype.updateComponentAlpha,M_.prototype.createUi_aemszp$=O_.prototype.createUi_aemszp$,M_.prototype.updateUi_aemszp$=O_.prototype.updateUi_aemszp$,M_.prototype.onRender_aemszp$=O_.prototype.onRender_aemszp$,M_.prototype.dispose_aemszp$=O_.prototype.dispose_aemszp$,s$.prototype.setWeights_q3cr5i$=o$.prototype.setWeights_q3cr5i$,a$.prototype.initTransform=o$.prototype.initTransform,a$.prototype.setTranslation_czzhiw$=o$.prototype.setTranslation_czzhiw$,a$.prototype.setRotation_czzhi1$=o$.prototype.setRotation_czzhi1$,a$.prototype.setScale_czzhiw$=o$.prototype.setScale_czzhiw$,bg.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,bg.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Eg.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Eg.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Rg.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Rg.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Fg.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Fg.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,rb.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,rb.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,hb.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,hb.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,gb.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,gb.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Cb.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Cb.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Ab.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Ab.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Zb.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Zb.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,ox.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,ox.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,yx.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,yx.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Sx.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Sx.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Ax.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Ax.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Bx.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Bx.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Zx.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Zx.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,rw.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,rw.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,hw.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,hw.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,gw.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,gw.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Nw.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Nw.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Rw.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Rw.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,Gw.prototype.patch_h7kg3r$=ze.prototype.patch_h7kg3r$,Gw.prototype.typeParametersSerializers=ze.prototype.typeParametersSerializers,wS.prototype.setNode_kvimhn$=xS.prototype.setNode_kvimhn$,SS.prototype.getCenterX_trkh7z$=xS.prototype.getCenterX_trkh7z$,SS.prototype.getCenterY_trkh7z$=xS.prototype.getCenterY_trkh7z$,SS.prototype.getCenterZ_trkh7z$=xS.prototype.getCenterZ_trkh7z$,SS.prototype.getSzX_trkh7z$=xS.prototype.getSzX_trkh7z$,SS.prototype.getSzY_trkh7z$=xS.prototype.getSzY_trkh7z$,SS.prototype.getSzZ_trkh7z$=xS.prototype.getSzZ_trkh7z$,SS.prototype.getCenter_hm1yd1$=xS.prototype.getCenter_hm1yd1$,SS.prototype.setNode_kvimhn$=xS.prototype.setNode_kvimhn$,ES.prototype.getCenterX_trkh7z$=xS.prototype.getCenterX_trkh7z$,ES.prototype.getCenterY_trkh7z$=xS.prototype.getCenterY_trkh7z$,ES.prototype.getCenterZ_trkh7z$=xS.prototype.getCenterZ_trkh7z$,ES.prototype.getSzX_trkh7z$=xS.prototype.getSzX_trkh7z$,ES.prototype.getSzY_trkh7z$=xS.prototype.getSzY_trkh7z$,ES.prototype.getSzZ_trkh7z$=xS.prototype.getSzZ_trkh7z$,ES.prototype.getCenter_hm1yd1$=xS.prototype.getCenter_hm1yd1$,ES.prototype.setNode_kvimhn$=xS.prototype.setNode_kvimhn$,GS.prototype.nodeSqrDistanceToPoint_fpn9fm$=VS.prototype.nodeSqrDistanceToPoint_fpn9fm$,KS.prototype.nodeSqrDistanceToPoint_fpn9fm$=VS.prototype.nodeSqrDistanceToPoint_fpn9fm$,KS.prototype.itemSqrDistanceToPoint_xpaqv3$=VS.prototype.itemSqrDistanceToPoint_xpaqv3$,JS.prototype.nodeSqrDistanceToRay_m0emyn$=HS.prototype.nodeSqrDistanceToRay_m0emyn$,JS.prototype.itemSqrDistanceToRay_bo5c3m$=HS.prototype.itemSqrDistanceToRay_bo5c3m$,tC.prototype.nodeSqrDistanceToRay_m0emyn$=HS.prototype.nodeSqrDistanceToRay_m0emyn$,iC.prototype.nodeSqrDistanceToRay_m0emyn$=HS.prototype.nodeSqrDistanceToRay_m0emyn$,uE.prototype.sampleTexture1d_buzeal$=Dl.prototype.sampleTexture1d_buzeal$,uE.prototype.sampleTexture2d_buzeal$=Dl.prototype.sampleTexture2d_buzeal$,uE.prototype.sampleTexture3d_buzeal$=Dl.prototype.sampleTexture3d_buzeal$,uE.prototype.sampleTextureCube_buzeal$=Dl.prototype.sampleTextureCube_buzeal$,_E.prototype.removeAt_za3lpa$=by.prototype.removeAt_za3lpa$,mE.prototype.put_fqrh44$=xy.prototype.put_fqrh44$,mE.prototype.plusAssign_s8j3t7$=xy.prototype.plusAssign_s8j3t7$,mE.prototype.toArray=xy.prototype.toArray,mE.prototype.removeAt_za3lpa$=xy.prototype.removeAt_za3lpa$,yE.prototype.put_gmedm2$=wy.prototype.put_gmedm2$,yE.prototype.plusAssign_mq22fl$=wy.prototype.plusAssign_mq22fl$,yE.prototype.removeAt_za3lpa$=wy.prototype.removeAt_za3lpa$,vE.prototype.put_q5rwfd$=zy.prototype.put_q5rwfd$,vE.prototype.plusAssign_za3lpa$=zy.prototype.plusAssign_za3lpa$,vE.prototype.removeAt_za3lpa$=zy.prototype.removeAt_za3lpa$,gE.prototype.put_q3cr5i$=ky.prototype.put_q3cr5i$,gE.prototype.plusAssign_mx4ult$=ky.prototype.plusAssign_mx4ult$,gE.prototype.removeAt_za3lpa$=ky.prototype.removeAt_za3lpa$,bE.prototype.putUint8_fqrh44$=Sy.prototype.putUint8_fqrh44$,bE.prototype.putUint16_gmedm2$=Sy.prototype.putUint16_gmedm2$,bE.prototype.putUint32_q5rwfd$=Sy.prototype.putUint32_q5rwfd$,bE.prototype.putFloat32_q3cr5i$=Sy.prototype.putFloat32_q3cr5i$,bE.prototype.putInt8_s8j3t7$=Sy.prototype.putInt8_s8j3t7$,bE.prototype.putInt8_fqrh44$=Sy.prototype.putInt8_fqrh44$,bE.prototype.putInt8_mj6st8$=Sy.prototype.putInt8_mj6st8$,bE.prototype.putInt8_ay2i3f$=Sy.prototype.putInt8_ay2i3f$,bE.prototype.putInt16_mq22fl$=Sy.prototype.putInt16_mq22fl$,bE.prototype.putInt16_gmedm2$=Sy.prototype.putInt16_gmedm2$,bE.prototype.putInt16_359eei$=Sy.prototype.putInt16_359eei$,bE.prototype.putInt16_8k344i$=Sy.prototype.putInt16_8k344i$,bE.prototype.putInt32_za3lpa$=Sy.prototype.putInt32_za3lpa$,bE.prototype.putInt32_q5rwfd$=Sy.prototype.putInt32_q5rwfd$,bE.prototype.putInt32_nd5v6f$=Sy.prototype.putInt32_nd5v6f$,bE.prototype.putInt32_7hqxcs$=Sy.prototype.putInt32_7hqxcs$,bE.prototype.removeAt_za3lpa$=Sy.prototype.removeAt_za3lpa$,An=U.PI/180,In=180/U.PI,Rn=1e-5,Ln=1e-10,Dn=.70710677,qn=new er(B(TC())),t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(t,e){"use strict";var i=e.getKClass,n=e.Kind.CLASS,r=e.kotlin.Annotation,o=e.throwCCE,s=e.defineInlineFunction,a=e.wrapFunction,l=e.kotlin.Unit,u=e.kotlin.text.toLong_pdl1vz$,p=e.Kind.OBJECT,c=e.kotlin.collections.emptyList_287e2$,h=e.equals,d=e.hashCode,f=e.toString,_=e.kotlin.collections.collectionSizeOrDefault_ba2ldo$,m=e.kotlin.collections.ArrayList_init_ww73n8$,$=e.Kind.INTERFACE,y=e.kotlin.collections.Iterator,v=e.kotlin.collections.Iterable,g=e.kotlin.collections.toList_us0mfu$,b=e.kotlin.collections.ArrayList_init_287e2$,x=e.kotlin.collections.HashSet_init_287e2$,w=e.arrayEquals,z=e.kotlin.ranges.until_dqglrj$,k=e.kotlin.collections.joinToString_fmv235$,S=e.kotlin.collections.toBooleanArray_xmyvgf$,C=e.kotlin.collections.withIndex_us0mfu$,N=e.kotlin.to_ujzrz7$,E=e.kotlin.collections.toMap_6hr0sd$,T=e.kotlin.lazy_klfg04$,P=e.kotlin.text.isBlank_gw00vp$,O=e.kotlin.IllegalArgumentException_init_pdl1vj$,M=e.kotlin.collections.copyToArray,j=e.arrayHashCode,A=e.ensureNotNull,I=e.kotlin.IllegalStateException_init_pdl1vj$,R=e.toBoxedChar,L=Object,D=e.kotlin.text.toIntOrNull_pdl1vz$,q=e.kotlin.collections.getValue_t9ocha$,F=e.kotlin.collections.asList_us0mfu$,B=e.kotlin.collections.ArrayList_init_mqih57$,U=e.kotlin.collections.ArrayList,V=e.kotlin.collections.LinkedHashSet,G=e.kotlin.collections.LinkedHashSet_init_mqih57$,H=e.kotlin.collections.HashSet,W=e.kotlin.collections.HashSet_init_mqih57$,X=e.kotlin.collections.LinkedHashMap_init_q3lmfv$,K=e.kotlin.collections.LinkedHashMap,Y=e.kotlin.collections.LinkedHashMap_init_73mtqc$,Z=e.kotlin.collections.HashMap_init_q3lmfv$,J=e.kotlin.collections.HashMap,Q=e.kotlin.collections.HashMap_init_73mtqc$,tt=e.kotlin.collections.LinkedHashSet_init_287e2$,et=(e.kotlin.collections.indexOf_mjy6jw$,e.arrayToString,e.kotlin.collections.get_indices_m7z4lg$),it=Array,nt=e.toByte,rt=e.kotlin.ranges.CharRange,ot=(e.kotlin.text.StringBuilder_init_za3lpa$,e.kotlin.collections.HashSet_init_ww73n8$),st=e.kotlin.reflect.KClass,at=e.kotlin.IndexOutOfBoundsException,lt=(e.kotlin.js.internal.ByteCompanionObject,e.kotlin.ranges.coerceAtLeast_dqglrj$),ut=e.kotlin.collections.copyOf_mrm5p$,pt=(e.kotlin.js.internal.ShortCompanionObject,e.kotlin.collections.copyOf_m2jy6x$),ct=(e.kotlin.js.internal.IntCompanionObject,e.kotlin.collections.copyOf_c03ot6$),ht=(e.kotlin.js.internal.LongCompanionObject,e.kotlin.collections.copyOf_3aefkx$),dt=(e.kotlin.js.internal.FloatCompanionObject,e.kotlin.collections.copyOf_rblqex$),ft=(e.kotlin.js.internal.DoubleCompanionObject,e.kotlin.collections.copyOf_xgrzbe$),_t=e.unboxChar,mt=(e.kotlin.js.internal.CharCompanionObject,e.kotlin.collections.copyOf_gtcw5h$),$t=(e.kotlin.js.internal.BooleanCompanionObject,e.kotlin.collections.copyOf_1qu12l$),yt=e.kotlin.reflect.js.internal.PrimitiveClasses.stringClass,vt=(e.kotlin.js.internal.StringCompanionObject,e.BoxedChar),gt=e.kotlin.reflect.js.internal.PrimitiveClasses.charArrayClass,bt=e.kotlin.reflect.js.internal.PrimitiveClasses.doubleClass,xt=e.kotlin.reflect.js.internal.PrimitiveClasses.doubleArrayClass,wt=e.kotlin.reflect.js.internal.PrimitiveClasses.floatClass,zt=e.kotlin.reflect.js.internal.PrimitiveClasses.floatArrayClass,kt=e.Long,St=e.kotlin.reflect.js.internal.PrimitiveClasses.longArrayClass,Ct=e.kotlin.reflect.js.internal.PrimitiveClasses.intClass,Nt=e.kotlin.reflect.js.internal.PrimitiveClasses.intArrayClass,Et=e.kotlin.reflect.js.internal.PrimitiveClasses.shortClass,Tt=e.kotlin.reflect.js.internal.PrimitiveClasses.shortArrayClass,Pt=e.kotlin.reflect.js.internal.PrimitiveClasses.byteClass,Ot=e.kotlin.reflect.js.internal.PrimitiveClasses.byteArrayClass,Mt=e.kotlin.reflect.js.internal.PrimitiveClasses.booleanClass,jt=e.kotlin.reflect.js.internal.PrimitiveClasses.booleanArrayClass,At=e.kotlin,It=e.kotlin.collections.mapOf_qfcya0$,Rt=e.kotlin.text.capitalize_pdl1vz$,Lt=e.kotlin.text.equals_igcy3c$,Dt=e.kotlin.text.trimIndent_pdl1vz$,qt=e.kotlin.collections.last_2p1efm$,Ft=e.kotlin.collections.lastOrNull_2p1efm$,Bt=e.kotlin.collections.get_lastIndex_55thoc$,Ut=e.kotlin.collections.Map.Entry,Vt=e.kotlin.Triple,Gt=e.kotlin.ranges.coerceAtMost_dqglrj$,Ht=e.toChar,Wt=e.kotlin.text.concatToString_wlitf7$,Xt=e.kotlin.text.toByte_pdl1vz$,Kt=e.kotlin.text.toShort_pdl1vz$,Yt=e.kotlin.text.toInt_pdl1vz$,Zt=e.kotlin.isFinite_81szk$,Jt=e.kotlin.text.toDouble_pdl1vz$,Qt=e.kotlin.isFinite_yrwdxr$,te=e.kotlin.text.single_gw00vp$,ee=Error,ie=e.kotlin.text.iterator_gw00vp$,ne=e.toShort,re=e.kotlin.collections.toList_7wnvza$,oe=e.kotlin.collections.Map,se=e.throwUPAE,ae=e.kotlin.Enum,le=e.throwISE,ue=e.kotlin.text.StringBuilder_init,pe=e.kotlin.collections.List,ce=e.kotlin.text.toLongOrNull_pdl1vz$,he=e.kotlin.text.toDoubleOrNull_pdl1vz$,de=e.kotlin.UnsupportedOperationException_init_pdl1vj$,fe=(e.kotlin.NotImplementedError,e.kotlin.collections.emptyMap_q3lmfv$),_e=e.kotlin.IllegalArgumentException,me=e.kotlin.collections.zip_r9t3v7$,$e=e.kotlin.collections.Grouping,ye=e.kotlin.collections.mapCapacity_za3lpa$,ve=e.kotlin.collections.LinkedHashMap_init_bwtc7$,ge=e.getCallableRef,be=e.kotlin.collections.MutableList,xe=e.kotlin.collections.Set,we=e.kotlin.collections.MutableSet,ze=e.kotlin.collections.MutableMap,ke=e.kotlin.Pair,Se=new e.Long(-1,2097151),Ce=(Math,e.kotlin.math.abs_s8cxhz$,e.kotlin.collections.get_indices_l1lu5t$),Ne=e.kotlin.js.get_js_1yb8b7$,Ee=e.kotlin.reflect.js.internal.PrimitiveClasses.arrayClass,Te=e.findAssociatedObject_yjf3nl$;function Pe(t){var i;return t.descriptor.isNullable?e.isType(i=t,Gl)?i:o():new or(t)}function Oe(t,e){return new hs(t,e)}function Me(t,e){return new ps(t,e)}function je(t,e,i){return new ds(t,e,i)}function Ae(t){return Co()}function Ie(){return Vr()}function Re(t){return lo()}function Le(){return gr()}function De(t){return co()}function qe(){return zr()}function Fe(t){return _o()}function Be(){return Nr()}function Ue(t){return yo()}function Ve(){return Or()}function Ge(t){return bo()}function He(){return Ir()}function We(t){return zo()}function Xe(){return qr()}function Ke(t){return oo()}function Ye(){return Kr()}function Ze(t){return io()}function Je(t){return ns()}function Qe(t,e){return new Jn(t,e)}function ti(t){return new Qn(t)}function ei(t,e){return new ir(t,e)}function ii(t,e,i){this.serializableClass_0=t,this.fallbackSerializer_0=e,this.typeParametersSerializers_0=i,this.descriptor_ay3qfp$_0=withContext(ci("kotlinx.serialization.ContextualSerializer",bi(),[]),this.serializableClass_0)}function ni(t){this.closure$iterator=t}function ri(){}function oi(t){this.this$elementDescriptors=t,this.elementsLeft_0=t.elementsCount}function si(t){return new ni((e=t,function(){return new oi(e)}));var e}function ai(t){return l}function li(t,e,i){if(void 0===i&&(i=ai),P(t))throw O("Blank serial names are prohibited".toString());var n=new di(t);return i(n),new fi(t,Qi(),n.elementNames_8be2vx$.size,g(e),n)}function ui(t,e){if(P(t))throw O("Blank serial names are prohibited".toString());return Jr(t,e)}function pi(t){return l}function ci(t,e,i,n){if(void 0===n&&(n=pi),P(t))throw O("Blank serial names are prohibited".toString());if(h(e,Qi()))throw O("For StructureKind.CLASS please use 'buildClassSerialDescriptor' instead".toString());var r=new di(t);return n(r),new fi(t,e,r.elementNames_8be2vx$.size,g(i),r)}function hi(t){return new qn(t)}function di(t){this.serialName=t,this.isNullable=!1,this.annotations=c(),this.elementNames_8be2vx$=b(),this.uniqueNames_0=x(),this.elementDescriptors_8be2vx$=b(),this.elementAnnotations_8be2vx$=b(),this.elementOptionality_8be2vx$=b()}function fi(t,e,i,n,r){this.serialName_btmdyn$_0=t,this.kind_589tly$_0=e,this.elementsCount_wewqc2$_0=i,this.annotations_efqcf6$_0=r.annotations,this.elementNames_0=M(r.elementNames_8be2vx$),this.elementDescriptors_0=ur(r.elementDescriptors_8be2vx$),this.elementAnnotations_0=M(r.elementAnnotations_8be2vx$),this.elementOptionality_0=S(r.elementOptionality_8be2vx$);var o,s,a=C(this.elementNames_0),l=m(_(a,10));for(o=a.iterator();o.hasNext();){var u=o.next();l.add_11rb$(N(u.value,u.index))}this.name2Index_0=E(l),this.typeParametersDescriptors_0=ur(n),this._hashCode_6e2cwc$_0=T((s=this,function(){var t=s,e=s.typeParametersDescriptors_0,i=d(t.serialName);i=(31*i|0)+j(e)|0;var n,r=si(t),o=1;for(n=r.iterator();n.hasNext();){var a,l=31*o|0,u=n.next().serialName;o=l+(null!=(a=null!=u?d(u):null)?a:0)|0}var p,c=o,h=1;for(p=r.iterator();p.hasNext();){var f,_=31*h|0,m=p.next().kind;h=_+(null!=(f=null!=m?d(m):null)?f:0)|0}return i=(31*(i=(31*i|0)+c|0)|0)+h|0}))}function _i(){}function mi(){$i=this,_i.call(this)}mi.prototype=Object.create(_i.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,Si.prototype=Object.create(xi.prototype),Si.prototype.constructor=Si,Ei.prototype=Object.create(xi.prototype),Ei.prototype.constructor=Ei,Oi.prototype=Object.create(xi.prototype),Oi.prototype.constructor=Oi,Ai.prototype=Object.create(xi.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(xi.prototype),Li.prototype.constructor=Li,Fi.prototype=Object.create(xi.prototype),Fi.prototype.constructor=Fi,Vi.prototype=Object.create(xi.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(xi.prototype),Wi.prototype.constructor=Wi,Yi.prototype=Object.create(_i.prototype),Yi.prototype.constructor=Yi,Zi.prototype=Object.create(Yi.prototype),Zi.prototype.constructor=Zi,tn.prototype=Object.create(Yi.prototype),tn.prototype.constructor=tn,rn.prototype=Object.create(Yi.prototype),rn.prototype.constructor=rn,an.prototype=Object.create(Yi.prototype),an.prototype.constructor=an,pn.prototype=Object.create(_i.prototype),pn.prototype.constructor=pn,cn.prototype=Object.create(pn.prototype),cn.prototype.constructor=cn,fn.prototype=Object.create(pn.prototype),fn.prototype.constructor=fn,Ln.prototype=Object.create(In.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(In.prototype),Dn.prototype.constructor=Dn,qn.prototype=Object.create(In.prototype),qn.prototype.constructor=qn,Fn.prototype=Object.create(In.prototype),Fn.prototype.constructor=Fn,Bn.prototype=Object.create(In.prototype),Bn.prototype.constructor=Bn,Un.prototype=Object.create(In.prototype),Un.prototype.constructor=Un,Vn.prototype=Object.create(Rn.prototype),Vn.prototype.constructor=Vn,Gn.prototype=Object.create(Rn.prototype),Gn.prototype.constructor=Gn,Hn.prototype=Object.create(Rn.prototype),Hn.prototype.constructor=Hn,Xn.prototype=Object.create(Wn.prototype),Xn.prototype.constructor=Xn,Kn.prototype=Object.create(Wn.prototype),Kn.prototype.constructor=Kn,Zn.prototype=Object.create(Xn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Xn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Xn.prototype),Qn.prototype.constructor=Qn,tr.prototype=Object.create(Xn.prototype),tr.prototype.constructor=tr,er.prototype=Object.create(Xn.prototype),er.prototype.constructor=er,ir.prototype=Object.create(Kn.prototype),ir.prototype.constructor=ir,nr.prototype=Object.create(Kn.prototype),nr.prototype.constructor=nr,yr.prototype=Object.create(Zn.prototype),yr.prototype.constructor=yr,br.prototype=Object.create(Yn.prototype),br.prototype.constructor=br,xr.prototype=Object.create(Zn.prototype),xr.prototype.constructor=xr,kr.prototype=Object.create(Yn.prototype),kr.prototype.constructor=kr,Sr.prototype=Object.create(Zn.prototype),Sr.prototype.constructor=Sr,Er.prototype=Object.create(Yn.prototype),Er.prototype.constructor=Er,Tr.prototype=Object.create(Zn.prototype),Tr.prototype.constructor=Tr,Mr.prototype=Object.create(Yn.prototype),Mr.prototype.constructor=Mr,jr.prototype=Object.create(Zn.prototype),jr.prototype.constructor=jr,Rr.prototype=Object.create(Yn.prototype),Rr.prototype.constructor=Rr,Lr.prototype=Object.create(Zn.prototype),Lr.prototype.constructor=Lr,Fr.prototype=Object.create(Yn.prototype),Fr.prototype.constructor=Fr,Br.prototype=Object.create(Zn.prototype),Br.prototype.constructor=Br,Gr.prototype=Object.create(Yn.prototype),Gr.prototype.constructor=Gr,Hr.prototype=Object.create(Zn.prototype),Hr.prototype.constructor=Hr,Yr.prototype=Object.create(Yn.prototype),Yr.prototype.constructor=Yr,ss.prototype=Object.create(os.prototype),ss.prototype.constructor=ss,ls.prototype=Object.create(as.prototype),ls.prototype.constructor=ls,ps.prototype=Object.create(us.prototype),ps.prototype.constructor=ps,hs.prototype=Object.create(us.prototype),hs.prototype.constructor=hs,uu.prototype=Object.create(_e.prototype),uu.prototype.constructor=uu,_s.prototype=Object.create(uu.prototype),_s.prototype.constructor=_s,ms.prototype=Object.create(_s.prototype),ms.prototype.constructor=ms,$s.prototype=Object.create(_s.prototype),$s.prototype.constructor=$s,Hs.prototype=Object.create(mn.prototype),Hs.prototype.constructor=Hs,Ws.prototype=Object.create($n.prototype),Ws.prototype.constructor=Ws,ia.prototype=Object.create(ls.prototype),ia.prototype.constructor=ia,na.prototype=Object.create(ia.prototype),na.prototype.constructor=na,ra.prototype=Object.create(ia.prototype),ra.prototype.constructor=ra,oa.prototype=Object.create(ra.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(ia.prototype),sa.prototype.constructor=sa,la.prototype=Object.create(ss.prototype),la.prototype.constructor=la,ua.prototype=Object.create(la.prototype),ua.prototype.constructor=ua,pa.prototype=Object.create(la.prototype),pa.prototype.constructor=pa,ca.prototype=Object.create(pa.prototype),ca.prototype.constructor=ca,ha.prototype=Object.create(la.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(ae.prototype),da.prototype.constructor=da,xa.prototype=Object.create(ba.prototype),xa.prototype.constructor=xa,Na.prototype=Object.create(ba.prototype),Na.prototype.constructor=Na,Aa.prototype=Object.create(Pa.prototype),Aa.prototype.constructor=Aa,Ba.prototype=Object.create(Aa.prototype),Ba.prototype.constructor=Ba,Ua.prototype=Object.create(Aa.prototype),Ua.prototype.constructor=Ua,Ha.prototype=Object.create(Pa.prototype),Ha.prototype.constructor=Ha,Za.prototype=Object.create(Pa.prototype),Za.prototype.constructor=Za,Xl.prototype=Object.create(ae.prototype),Xl.prototype.constructor=Xl,tu.prototype=Object.create(Ql.prototype),tu.prototype.constructor=tu,ou.prototype=Object.create(Mn.prototype),ou.prototype.constructor=ou,cu.prototype=Object.create(uu.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(uu.prototype),hu.prototype.constructor=hu,ni.prototype.iterator=function(){return this.closure$iterator()},ni.$metadata$={kind:n,interfaces:[v]},Object.defineProperty(ri.prototype,"isNullable",{configurable:!0,get:function(){return!1}}),Object.defineProperty(ri.prototype,"annotations",{configurable:!0,get:function(){return c()}}),ri.$metadata$={kind:$,simpleName:"SerialDescriptor",interfaces:[]},oi.prototype.hasNext=function(){return this.elementsLeft_0>0},oi.prototype.next=function(){var t,e,i;return i=this.this$elementDescriptors.elementsCount,t=this.elementsLeft_0,this.elementsLeft_0=t-1|0,e=t,this.this$elementDescriptors.getElementDescriptor_za3lpa$(i-e|0)},oi.$metadata$={kind:n,interfaces:[y]},di.prototype.element_vxrguq$=function(t,e,i,n){if(void 0===i&&(i=c()),void 0===n&&(n=!1),!this.uniqueNames_0.add_11rb$(t))throw O(("Element with name '"+t+"' is already registered").toString());this.elementNames_8be2vx$.add_11rb$(t),this.elementDescriptors_8be2vx$.add_11rb$(e),this.elementAnnotations_8be2vx$.add_11rb$(i),this.elementOptionality_8be2vx$.add_11rb$(n)},di.prototype.descriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.descriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.serializer_saj79j$,r=t.kotlinx.serialization.KSerializer,o=e.throwCCE;return function(t,s){var a;return(e.isType(a=n(i(t)),r)?a:o()).descriptor}}))),di.prototype.listDescriptor_24f42q$=function(t){return hi(t)},di.prototype.listDescriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.listDescriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.listSerialDescriptor_24f42q$,r=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a){var l;return n((e.isType(l=r(i(t)),o)?l:s()).descriptor)}}))),di.prototype.mapDescriptor_2ezn58$=function(t,e){return new Hn(t,e)},di.prototype.mapDescriptor_q3lmfv$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.mapDescriptor_q3lmfv$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.mapSerialDescriptor_2ezn58$,r=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a,l,u){var p,c;return n((e.isType(p=r(i(t)),o)?p:s()).descriptor,(e.isType(c=r(i(l)),o)?c:s()).descriptor)}}))),di.prototype.setDescriptor_24f42q$=function(t){return new Un(t)},di.prototype.setDescriptor_287e2$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.descriptors.ClassSerialDescriptorBuilder.setDescriptor_287e2$",a((function(){var i=e.getReifiedTypeParameterKType,n=t.kotlinx.serialization.descriptors.setSerialDescriptor_24f42q$,r=t.kotlinx.serialization.serializer_saj79j$,o=t.kotlinx.serialization.KSerializer,s=e.throwCCE;return function(t,a){var l;return n((e.isType(l=r(i(t)),o)?l:s()).descriptor)}}))),di.$metadata$={kind:n,simpleName:"ClassSerialDescriptorBuilder",interfaces:[]},Object.defineProperty(fi.prototype,"serialName",{get:function(){return this.serialName_btmdyn$_0}}),Object.defineProperty(fi.prototype,"kind",{get:function(){return this.kind_589tly$_0}}),Object.defineProperty(fi.prototype,"elementsCount",{get:function(){return this.elementsCount_wewqc2$_0}}),Object.defineProperty(fi.prototype,"annotations",{configurable:!0,get:function(){return this.annotations_efqcf6$_0}}),Object.defineProperty(fi.prototype,"_hashCode_0",{configurable:!0,get:function(){return this._hashCode_6e2cwc$_0.value}}),fi.prototype.getElementName_za3lpa$=function(t){return $u(this.elementNames_0,t)},fi.prototype.getElementIndex_61zpoe$=function(t){var e;return null!=(e=this.name2Index_0.get_11rb$(t))?e:-3},fi.prototype.getElementAnnotations_za3lpa$=function(t){return $u(this.elementAnnotations_0,t)},fi.prototype.getElementDescriptor_za3lpa$=function(t){return $u(this.elementDescriptors_0,t)},fi.prototype.isElementOptional_za3lpa$=function(t){return yu(this.elementOptionality_0,t)},fi.prototype.equals=function(t){var i;t:do{var n;if(this===t){i=!0;break t}if(!e.isType(t,fi)){i=!1;break t}if(!h(this.serialName,t.serialName)){i=!1;break t}if(!w(this.typeParametersDescriptors_0,t.typeParametersDescriptors_0)){i=!1;break t}if(this.elementsCount!==t.elementsCount){i=!1;break t}n=this.elementsCount;for(var r=0;r<n;r++){if(!h(this.getElementDescriptor_za3lpa$(r).serialName,t.getElementDescriptor_za3lpa$(r).serialName)){i=!1;break t}if(!h(this.getElementDescriptor_za3lpa$(r).kind,t.getElementDescriptor_za3lpa$(r).kind)){i=!1;break t}}i=!0}while(0);return i},fi.prototype.hashCode=function(){return this._hashCode_0},fi.prototype.toString=function(){return k(z(0,this.elementsCount),", ",this.serialName+"(",")",void 0,void 0,(t=this,function(e){return t.getElementName_za3lpa$(e)+": "+t.getElementDescriptor_za3lpa$(e).serialName}));var t},fi.$metadata$={kind:n,simpleName:"SerialDescriptorImpl",interfaces:[ri]},mi.$metadata$={kind:p,simpleName:"ENUM",interfaces:[_i]};var $i=null;function yi(){return null===$i&&new mi,$i}function vi(){gi=this,_i.call(this)}vi.$metadata$={kind:p,simpleName:"CONTEXTUAL",interfaces:[_i]};var gi=null;function bi(){return null===gi&&new vi,gi}function xi(){_i.call(this)}function wi(){zi=this,xi.call(this)}_i.prototype.toString=function(){return A(e.getKClassFromExpression(this).simpleName)},_i.prototype.hashCode=function(){return d(this.toString())},_i.$metadata$={kind:n,simpleName:"SerialKind",interfaces:[]},wi.$metadata$={kind:p,simpleName:"BOOLEAN",interfaces:[xi]};var zi=null;function ki(){return null===zi&&new wi,zi}function Si(){Ci=this,xi.call(this)}Si.$metadata$={kind:p,simpleName:"BYTE",interfaces:[xi]};var Ci=null;function Ni(){return null===Ci&&new Si,Ci}function Ei(){Ti=this,xi.call(this)}Ei.$metadata$={kind:p,simpleName:"CHAR",interfaces:[xi]};var Ti=null;function Pi(){return null===Ti&&new Ei,Ti}function Oi(){Mi=this,xi.call(this)}Oi.$metadata$={kind:p,simpleName:"SHORT",interfaces:[xi]};var Mi=null;function ji(){return null===Mi&&new Oi,Mi}function Ai(){Ii=this,xi.call(this)}Ai.$metadata$={kind:p,simpleName:"INT",interfaces:[xi]};var Ii=null;function Ri(){return null===Ii&&new Ai,Ii}function Li(){Di=this,xi.call(this)}Li.$metadata$={kind:p,simpleName:"LONG",interfaces:[xi]};var Di=null;function qi(){return null===Di&&new Li,Di}function Fi(){Bi=this,xi.call(this)}Fi.$metadata$={kind:p,simpleName:"FLOAT",interfaces:[xi]};var Bi=null;function Ui(){return null===Bi&&new Fi,Bi}function Vi(){Gi=this,xi.call(this)}Vi.$metadata$={kind:p,simpleName:"DOUBLE",interfaces:[xi]};var Gi=null;function Hi(){return null===Gi&&new Vi,Gi}function Wi(){Xi=this,xi.call(this)}Wi.$metadata$={kind:p,simpleName:"STRING",interfaces:[xi]};var Xi=null;function Ki(){return null===Xi&&new Wi,Xi}function Yi(){_i.call(this)}function Zi(){Ji=this,Yi.call(this)}xi.$metadata$={kind:n,simpleName:"PrimitiveKind",interfaces:[_i]},Zi.$metadata$={kind:p,simpleName:"CLASS",interfaces:[Yi]};var Ji=null;function Qi(){return null===Ji&&new Zi,Ji}function tn(){en=this,Yi.call(this)}tn.$metadata$={kind:p,simpleName:"LIST",interfaces:[Yi]};var en=null;function nn(){return null===en&&new tn,en}function rn(){on=this,Yi.call(this)}rn.$metadata$={kind:p,simpleName:"MAP",interfaces:[Yi]};var on=null;function sn(){return null===on&&new rn,on}function an(){ln=this,Yi.call(this)}an.$metadata$={kind:p,simpleName:"OBJECT",interfaces:[Yi]};var ln=null;function un(){return null===ln&&new an,ln}function pn(){_i.call(this)}function cn(){hn=this,pn.call(this)}Yi.$metadata$={kind:n,simpleName:"StructureKind",interfaces:[_i]},cn.$metadata$={kind:p,simpleName:"SEALED",interfaces:[pn]};var hn=null;function dn(){return null===hn&&new cn,hn}function fn(){_n=this,pn.call(this)}fn.$metadata$={kind:p,simpleName:"OPEN",interfaces:[pn]};var _n=null;function mn(){this.updateMode_koclvo$_0=Zl()}function $n(){}function yn(){}function vn(){Tn()}function gn(){En=this,this.DECODE_DONE=-1,this.UNKNOWN_NAME=-3,this.READ_DONE=-1,this.READ_ALL=-2}pn.$metadata$={kind:n,simpleName:"PolymorphicKind",interfaces:[_i]},Object.defineProperty(mn.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),Object.defineProperty(mn.prototype,"updateMode",{configurable:!0,get:function(){return this.updateMode_koclvo$_0}}),mn.prototype.decodeValue=function(){throw pu(e.getKClassFromExpression(this).toString()+" can't retrieve untyped values")},mn.prototype.decodeNotNullMark=function(){return!0},mn.prototype.decodeNull=function(){return null},mn.prototype.decodeBoolean=function(){var t;return"boolean"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeByte=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeShort=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeInt=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeLong=function(){var t;return e.isType(t=this.decodeValue(),e.Long)?t:o()},mn.prototype.decodeFloat=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeDouble=function(){var t;return"number"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeChar=function(){var t;return e.isChar(t=this.decodeValue())?t:o()},mn.prototype.decodeString=function(){var t;return"string"==typeof(t=this.decodeValue())?t:o()},mn.prototype.decodeEnum_24f42q$=function(t){var e;return"number"==typeof(e=this.decodeValue())?e:o()},mn.prototype.decodeSerializableValue_19c8k5$$default=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},mn.prototype.decodeSerializableValue_19c8k5$=function(t,e,i){return void 0===e&&(e=null),i?i(t,e):this.decodeSerializableValue_19c8k5$$default(t,e)},mn.prototype.beginStructure_jvp2sb$=function(t,e){return this},mn.prototype.endStructure_24f42q$=function(t){},mn.prototype.decodeBooleanElement_szpzho$=function(t,e){return this.decodeBoolean()},mn.prototype.decodeByteElement_szpzho$=function(t,e){return this.decodeByte()},mn.prototype.decodeShortElement_szpzho$=function(t,e){return this.decodeShort()},mn.prototype.decodeIntElement_szpzho$=function(t,e){return this.decodeInt()},mn.prototype.decodeLongElement_szpzho$=function(t,e){return this.decodeLong()},mn.prototype.decodeFloatElement_szpzho$=function(t,e){return this.decodeFloat()},mn.prototype.decodeDoubleElement_szpzho$=function(t,e){return this.decodeDouble()},mn.prototype.decodeCharElement_szpzho$=function(t,e){return this.decodeChar()},mn.prototype.decodeStringElement_szpzho$=function(t,e){return this.decodeString()},mn.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.decodeSerializableValue_19c8k5$(i,n)},mn.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return i.descriptor.isNullable||this.decodeNotNullMark()?this.decodeSerializableValue_19c8k5$(i,n):this.decodeNull()},mn.$metadata$={kind:n,simpleName:"AbstractDecoder",interfaces:[vn,yn]},Object.defineProperty($n.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),$n.prototype.beginStructure_jvp2sb$=function(t,e){return this},$n.prototype.endStructure_24f42q$=function(t){},$n.prototype.encodeElement_szpzho$=function(t,e){return!0},$n.prototype.encodeValue_za3rmp$=function(t){throw pu("Non-serializable "+e.getKClassFromExpression(t)+" is not supported by "+e.getKClassFromExpression(this)+" encoder")},$n.prototype.encodeNull=function(){throw pu("'null' is not supported by default")},$n.prototype.encodeBoolean_6taknv$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeByte_s8j3t7$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeShort_mq22fl$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeInt_za3lpa$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeLong_s8cxhz$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeFloat_mx4ult$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeDouble_14dthe$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeChar_s8itvh$=function(t){this.encodeValue_za3rmp$(R(t))},$n.prototype.encodeString_61zpoe$=function(t){this.encodeValue_za3rmp$(t)},$n.prototype.encodeEnum_szpzho$=function(t,e){this.encodeValue_za3rmp$(e)},$n.prototype.encodeBooleanElement_qh7jdn$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeBoolean_6taknv$(i)},$n.prototype.encodeByteElement_j0u8y3$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeByte_s8j3t7$(i)},$n.prototype.encodeShortElement_l83pjl$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeShort_mq22fl$(i)},$n.prototype.encodeIntElement_ptg7oe$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeInt_za3lpa$(i)},$n.prototype.encodeLongElement_j0o2mv$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeLong_s8cxhz$(i)},$n.prototype.encodeFloatElement_lf6hpt$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeFloat_mx4ult$(i)},$n.prototype.encodeDoubleElement_powrwi$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeDouble_14dthe$(i)},$n.prototype.encodeCharElement_j0tz0d$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeChar_s8itvh$(i)},$n.prototype.encodeStringElement_iij8qq$=function(t,e,i){this.encodeElement_szpzho$(t,e)&&this.encodeString_61zpoe$(i)},$n.prototype.encodeSerializableElement_r4qlx7$=function(t,e,i,n){this.encodeElement_szpzho$(t,e)&&this.encodeSerializableValue_tf03ej$(i,n)},$n.prototype.encodeNullableSerializableElement_qw92s8$=function(t,e,i,n){this.encodeElement_szpzho$(t,e)&&this.encodeNullableSerializableValue_f4686g$(i,n)},$n.$metadata$={kind:n,simpleName:"AbstractEncoder",interfaces:[On,Pn]},Object.defineProperty(yn.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),yn.prototype.beginStructure_24f42q$=function(t){return this.beginStructure_jvp2sb$(t,[].slice())},yn.prototype.beginStructure_jvp2sb$=function(t,e){return this.beginStructure_24f42q$(t)},yn.prototype.decodeSerializableValue_w63s0f$=function(t){return t.deserialize_bq71mq$(this)},yn.prototype.decodeNullableSerializableValue_aae3ea$=function(t){return t.descriptor.isNullable||this.decodeNotNullMark()?this.decodeSerializableValue_w63s0f$(t):this.decodeNull()},yn.prototype.updateSerializableValue_19c8k5$=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},yn.prototype.updateNullableSerializableValue_exmlbs$=function(t,e){return this.decodeNullableSerializableValue_aae3ea$(t)},yn.$metadata$={kind:$,simpleName:"Decoder",interfaces:[]},gn.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var bn,xn,wn,zn,kn,Sn,Cn,Nn,En=null;function Tn(){return null===En&&new gn,En}function Pn(){}function On(){}function Mn(){}function jn(t,e){var i="in the scope of '"+f(e.simpleName)+"'";throw pu(null==t?"Class discriminator was missing and no default polymorphic serializers were registered "+i:"Class '"+f(t)+"' is not registered for polymorphic serialization "+i+".\nMark the base class as 'sealed' or register the serializer explicitly.")}function An(t,e){var i;return jn(null!=(i=t.simpleName)?i:t.toString(),e)}function In(t){this.elementDescriptor=t,this.elementsCount_axr0xc$_0=1}function Rn(t,e,i){this.serialName_ra35nx$_0=t,this.keyDescriptor=e,this.valueDescriptor=i,this.elementsCount_qp2ocq$_0=2}function Ln(t){In.call(this,t),this.serialName_reprdi$_0=t.serialName+"Array"}function Dn(t){In.call(this,t)}function qn(t){In.call(this,t)}function Fn(t,e){In.call(this,e),this.serialName_ej0k1l$_0=t}function Bn(t){In.call(this,t)}function Un(t){In.call(this,t)}function Vn(t,e,i){Rn.call(this,t,e,i)}function Gn(t,e){Rn.call(this,kn,t,e)}function Hn(t,e){Rn.call(this,Sn,t,e)}function Wn(){}function Xn(t){Wn.call(this),this.elementSerializer_6sofm1$_0=t}function Kn(t,e){Wn.call(this),this.keySerializer=t,this.valueSerializer=e}function Yn(){}function Zn(t){Xn.call(this,t),this.descriptor_o3qkn1$_0=new Ln(t.descriptor)}function Jn(t,e){Xn.call(this,e),this.kClass_0=t,this.descriptor_8482jr$_0=new Dn(e.descriptor)}function Qn(t){Xn.call(this,t),this.descriptor_7uwoa2$_0=new qn(t.descriptor)}function tr(t){Xn.call(this,t),this.descriptor_vnfc7m$_0=new Bn(t.descriptor)}function er(t){Xn.call(this,t),this.descriptor_yqpz47$_0=new Un(t.descriptor)}function ir(t,e){Kn.call(this,t,e),this.descriptor_pixp0o$_0=new Gn(t.descriptor,e.descriptor)}function nr(t,e){Kn.call(this,t,e),this.descriptor_kvyydd$_0=new Hn(t.descriptor,e.descriptor)}function rr(t,e){this.values_0=e,this.descriptor_ulj9cc$_0=ci(t,yi(),[],EnumSerializer$descriptor$lambda(this,t))}function or(t){this.serializer_0=t,this.descriptor_kbvl2k$_0=new sr(this.serializer_0.descriptor)}function sr(t){this.original_8be2vx$=t,this.serialName_szvoqg$_0=this.original_8be2vx$.serialName+"?"}function ar(t,e){this.objectInstance_0=e,this.descriptor_uhy216$_0=ci(t,un(),[])}function lr(t){var i;if(e.isType(t,_r))return t.namesSet_8be2vx$;var n=ot(t.elementsCount);i=t.elementsCount;for(var r=0;r<i;r++){var o=t.getElementName_za3lpa$(r);n.add_11rb$(o)}return n}function ur(t){var e,i;return null!=(i=null!=(e=null==t||t.isEmpty()?null:t)?M(e):null)?i:Cn}function pr(t){this.original_s64f0k$_0=T(t)}function cr(t){return new pr(t)}function hr(t){throw pu("Serializer for class '"+f(t.simpleName)+"' is not found.\nMark the class as @Serializable or provide the serializer explicitly.")}function dr(t){var i,n,r=t.classifier;if(!e.isType(r,st))throw I(("Only KClass supported as classifier, got "+f(r)).toString());return i=r,e.isType(n=i,st)?n:o()}function fr(t,e){var i=t.getElementIndex_61zpoe$(e);if(-3===i)throw pu(t.serialName+" does not contain element with name '"+e+"'");return i}function _r(t,i,n){void 0===i&&(i=null),this.serialName_igazkg$_0=t,this.generatedSerializer_0=i,this.elementsCount_qx3iur$_0=n,this.added_0=-1;var r,o,s=it(this.elementsCount);r=s.length-1|0;for(var a=0;a<=r;a++)s[a]="[UNINITIALIZED]";this.names_0=s,this.propertiesAnnotations_0=e.newArray(this.elementsCount,null),this.classAnnotations_0=null,this.elementsOptionality_0=e.booleanArray(this.elementsCount),this.indices_73aj4y$_0=T((o=this,function(){return o.buildIndices_0()})),this.typeParameterDescriptors_ggwkl6$_0=T(function(t){return function(){var e,i,n;if(null!=(i=null!=(e=t.generatedSerializer_0)?e.typeParametersSerializers():null)){var r,o=m(i.length);for(r=0;r!==i.length;++r){var s=i[r];o.add_11rb$(s.descriptor)}n=o}else n=null;return ur(n)}}(this)),this._hashCode_61j445$_0=T(function(t){return function(){var e=t,i=t.typeParameterDescriptors_0,n=d(e.serialName);n=(31*n|0)+j(i)|0;var r,o=si(e),s=1;for(r=o.iterator();r.hasNext();){var a,l=31*s|0,u=r.next().serialName;s=l+(null!=(a=null!=u?d(u):null)?a:0)|0}var p,c=s,h=1;for(p=o.iterator();p.hasNext();){var f,_=31*h|0,m=p.next().kind;h=_+(null!=(f=null!=m?d(m):null)?f:0)|0}return n=(31*(n=(31*n|0)+c|0)|0)+h|0}}(this))}function mr(){}function $r(){}function yr(){vr=this,Zn.call(this,Re())}Object.defineProperty(vn.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),vn.prototype.decodeSequentially=function(){return!1},vn.prototype.decodeCollectionSize_24f42q$=function(t){return-1},vn.prototype.decodeSerializableElement_186mnl$=function(t,e,i){return this.decodeSerializableElement_12e8id$(t,e,i,null)},vn.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.decodeSerializableElement_186mnl$(t,e,i)},vn.prototype.decodeSerializableElement_12e8id$=function(t,e,i,n,r){return void 0===n&&(n=null),r?r(t,e,i,n):this.decodeSerializableElement_12e8id$$default(t,e,i,n)},vn.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return this.decodeNullableSerializableElement_pzkbua$(t,e,i)},vn.prototype.decodeNullableSerializableElement_8viuyw$=function(t,e,i,n,r){return void 0===n&&(n=null),r?r(t,e,i,n):this.decodeNullableSerializableElement_8viuyw$$default(t,e,i,n)},vn.prototype.decodeNullableSerializableElement_pzkbua$=function(t,e,i){return this.decodeNullableSerializableElement_8viuyw$(t,e,i,null)},vn.prototype.updateSerializableElement_12e8id$=function(t,e,i,n){return this.decodeSerializableElement_12e8id$(t,e,i,n)},vn.prototype.updateNullableSerializableElement_8viuyw$=function(t,e,i,n){return this.decodeNullableSerializableElement_8viuyw$(t,e,i,n)},vn.$metadata$={kind:$,simpleName:"CompositeDecoder",interfaces:[]},Pn.prototype.encodeNotNullMark=function(){},Pn.prototype.beginStructure_24f42q$=function(t){return this.beginStructure_jvp2sb$(t,[].slice())},Pn.prototype.beginStructure_jvp2sb$=function(t,e){return this.beginStructure_24f42q$(t)},Pn.prototype.beginCollection_szpzho$=function(t,e){return this.beginCollection_m8o8wh$(t,e,[].slice())},Pn.prototype.beginCollection_m8o8wh$=function(t,e,i){return this.beginStructure_24f42q$(t)},Pn.prototype.encodeSerializableValue_tf03ej$=function(t,e){t.serialize_55azsf$(this,e)},Pn.prototype.encodeNullableSerializableValue_f4686g$=function(t,i){var n;if(t.descriptor.isNullable)return this.encodeSerializableValue_tf03ej$(e.isType(n=t,Hl)?n:o(),i);null==i?this.encodeNull():(this.encodeNotNullMark(),this.encodeSerializableValue_tf03ej$(t,i))},Pn.$metadata$={kind:$,simpleName:"Encoder",interfaces:[]},On.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return!0},On.prototype.encodeNonSerializableElement_ptgdlt$=function(t,e,i){},On.$metadata$={kind:$,simpleName:"CompositeEncoder",interfaces:[]},Mn.prototype.serialize_55azsf$=function(t,i){var n=nu(this,t,i),r=this.descriptor,s=t.beginStructure_24f42q$(r);try{var a;s.encodeStringElement_iij8qq$(this.descriptor,0,n.descriptor.serialName),s.encodeSerializableElement_r4qlx7$(this.descriptor,1,e.isType(a=n,Hl)?a:o(),i)}finally{s.endStructure_24f42q$(r)}},Mn.prototype.deserialize_bq71mq$=function(t){var i,n=this.descriptor,r=t.beginStructure_24f42q$(n);try{var s,a,l={v:null},u=null;if(r.decodeSequentially())return this.decodeSequentially_j3xsyv$_0(r);t:for(;;){var p=r.decodeElementIndex_24f42q$(this.descriptor);switch(p){case-1:break t;case 0:l.v=r.decodeStringElement_szpzho$(this.descriptor,p);break;case 1:var c,h=l.v;if(null==h)throw O("Cannot read polymorphic value before its type token".toString());c=h,l.v=c;var d=iu(this,r,l.v);u=r.decodeSerializableElement_12e8id$(this.descriptor,p,d);break;default:throw pu("Invalid index in polymorphic deserialization of "+(null!=(s=l.v)?s:"unknown class")+"\n Expected 0, 1 or DECODE_DONE(-1), but found "+p)}}var _,m=u;if(null==m){var $="Polymorphic value has not been read for class "+f(l.v);throw O($.toString())}_=m,i=e.isType(a=_,L)?a:o()}finally{r.endStructure_24f42q$(n)}return i},Mn.prototype.decodeSequentially_j3xsyv$_0=function(t){var e=t.decodeStringElement_szpzho$(this.descriptor,0),i=iu(this,t,e);return t.decodeSerializableElement_12e8id$(this.descriptor,1,i)},Mn.prototype.findPolymorphicSerializerOrNull_ca6uye$=function(t,e){return t.serializersModule.getPolymorphic_l2fy3k$(this.baseClass,e)},Mn.prototype.findPolymorphicSerializerOrNull_kjsxpj$=function(t,e){return t.serializersModule.getPolymorphic_joiicr$(this.baseClass,e)},Mn.$metadata$={kind:n,simpleName:"AbstractPolymorphicSerializer",interfaces:[Gl]},Object.defineProperty(In.prototype,"kind",{configurable:!0,get:function(){return nn()}}),Object.defineProperty(In.prototype,"elementsCount",{configurable:!0,get:function(){return this.elementsCount_axr0xc$_0}}),In.prototype.getElementName_za3lpa$=function(t){return t.toString()},In.prototype.getElementIndex_61zpoe$=function(t){var e;if(null==(e=D(t)))throw O(t+" is not a valid list index");return e},In.prototype.isElementOptional_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return!1},In.prototype.getElementAnnotations_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return c()},In.prototype.getElementDescriptor_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return this.elementDescriptor},In.prototype.equals=function(t){return this===t||!!e.isType(t,In)&&!(!h(this.elementDescriptor,t.elementDescriptor)||!h(this.serialName,t.serialName))},In.prototype.hashCode=function(){return(31*d(this.elementDescriptor)|0)+d(this.serialName)|0},In.prototype.toString=function(){return this.serialName+"("+this.elementDescriptor+")"},In.$metadata$={kind:n,simpleName:"ListLikeDescriptor",interfaces:[ri]},Object.defineProperty(Rn.prototype,"serialName",{get:function(){return this.serialName_ra35nx$_0}}),Object.defineProperty(Rn.prototype,"kind",{configurable:!0,get:function(){return sn()}}),Object.defineProperty(Rn.prototype,"elementsCount",{configurable:!0,get:function(){return this.elementsCount_qp2ocq$_0}}),Rn.prototype.getElementName_za3lpa$=function(t){return t.toString()},Rn.prototype.getElementIndex_61zpoe$=function(t){var e;if(null==(e=D(t)))throw O(t+" is not a valid map index");return e},Rn.prototype.isElementOptional_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return!1},Rn.prototype.getElementAnnotations_za3lpa$=function(t){if(!(t>=0)){var e="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(e.toString())}return c()},Rn.prototype.getElementDescriptor_za3lpa$=function(t){var e;if(!(t>=0)){var i="Illegal index "+t+", "+this.serialName+" expects only non-negative indices";throw O(i.toString())}switch(t%2){case 0:e=this.keyDescriptor;break;case 1:e=this.valueDescriptor;break;default:throw I("Unreached".toString())}return e},Rn.prototype.equals=function(t){return this===t||!!e.isType(t,Rn)&&!!h(this.serialName,t.serialName)&&!!h(this.keyDescriptor,t.keyDescriptor)&&!!h(this.valueDescriptor,t.valueDescriptor)},Rn.prototype.hashCode=function(){var t=d(this.serialName);return t=(31*(t=(31*t|0)+d(this.keyDescriptor)|0)|0)+d(this.valueDescriptor)|0},Rn.prototype.toString=function(){return this.serialName+"("+this.keyDescriptor+", "+this.valueDescriptor+")"},Rn.$metadata$={kind:n,simpleName:"MapLikeDescriptor",interfaces:[ri]},Object.defineProperty(Ln.prototype,"serialName",{configurable:!0,get:function(){return this.serialName_reprdi$_0}}),Ln.$metadata$={kind:n,simpleName:"PrimitiveArrayDescriptor",interfaces:[In]},Object.defineProperty(Dn.prototype,"serialName",{configurable:!0,get:function(){return bn}}),Dn.$metadata$={kind:n,simpleName:"ArrayClassDesc",interfaces:[In]},Object.defineProperty(qn.prototype,"serialName",{configurable:!0,get:function(){return xn}}),qn.$metadata$={kind:n,simpleName:"ArrayListClassDesc",interfaces:[In]},Object.defineProperty(Fn.prototype,"serialName",{get:function(){return this.serialName_ej0k1l$_0}}),Fn.$metadata$={kind:n,simpleName:"NamedListClassDescriptor",interfaces:[In]},Object.defineProperty(Bn.prototype,"serialName",{configurable:!0,get:function(){return wn}}),Bn.$metadata$={kind:n,simpleName:"LinkedHashSetClassDesc",interfaces:[In]},Object.defineProperty(Un.prototype,"serialName",{configurable:!0,get:function(){return zn}}),Un.$metadata$={kind:n,simpleName:"HashSetClassDesc",interfaces:[In]},Vn.$metadata$={kind:n,simpleName:"NamedMapClassDescriptor",interfaces:[Rn]},Gn.$metadata$={kind:n,simpleName:"LinkedHashMapClassDesc",interfaces:[Rn]},Hn.$metadata$={kind:n,simpleName:"HashMapClassDesc",interfaces:[Rn]},Wn.prototype.merge_h7kg3q$=function(t,e){var i,n=null!=(i=null!=e?this.toBuilder_wikn$(e):null)?i:this.builder(),r=this.builderSize_wili$(n),o=t.beginStructure_24f42q$(this.descriptor);if(o.decodeSequentially())this.readAll_8oyp34$(o,n,r,this.readSize_bl0yv7$_0(o,n));else for(;;){var s=o.decodeElementIndex_24f42q$(this.descriptor);if(-1===s)break;this.readElement_8pvye7$(o,r+s|0,n)}return o.endStructure_24f42q$(this.descriptor),this.toResult_wili$(n)},Wn.prototype.deserialize_bq71mq$=function(t){return this.merge_h7kg3q$(t,null)},Wn.prototype.readSize_bl0yv7$_0=function(t,e){var i=t.decodeCollectionSize_24f42q$(this.descriptor);return this.checkCapacity_rk7bw8$(e,i),i},Wn.prototype.readElement_8pvye7$=function(t,e,i,n,r){void 0===n&&(n=!0),r?r(t,e,i,n):this.readElement_8pvye7$$default(t,e,i,n)},Wn.$metadata$={kind:n,simpleName:"AbstractCollectionSerializer",interfaces:[Gl]},Xn.prototype.serialize_55azsf$=function(t,e){for(var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i),r=this.collectionIterator_wikn$(e),o=0;o<i;o++)n.encodeSerializableElement_r4qlx7$(this.descriptor,o,this.elementSerializer_6sofm1$_0,r.next());n.endStructure_24f42q$(this.descriptor)},Xn.prototype.readAll_8oyp34$=function(t,e,i,n){if(!(n>=0))throw O("Size must be known in advance when using READ_ALL".toString());for(var r=0;r<n;r++)this.readElement_8pvye7$(t,i+r|0,e,!1)},Xn.prototype.readElement_8pvye7$$default=function(t,e,i,n){this.insert_p422l$(i,e,t.decodeSerializableElement_12e8id$(this.descriptor,e,this.elementSerializer_6sofm1$_0))},Xn.$metadata$={kind:n,simpleName:"ListLikeSerializer",interfaces:[Wn]},Kn.prototype.readAll_8oyp34$=function(t,e,i,n){var r;if(!(n>=0))throw O("Size must be known in advance when using READ_ALL".toString());r=2*n|0;for(var o=0;o<r;o+=2)this.readElement_8pvye7$(t,i+o|0,e,!1)},Kn.prototype.readElement_8pvye7$$default=function(t,i,n,r){var o,s=t.decodeSerializableElement_12e8id$(this.descriptor,i,this.keySerializer);if(r){var a=t.decodeElementIndex_24f42q$(this.descriptor);if(a!==(i+1|0))throw O(("Value must follow key in a map, index for key: "+i+", returned index for value: "+a).toString());o=a}else o=i+1|0;var l=o,u=n.containsKey_11rb$(s)&&!e.isType(this.valueSerializer.descriptor.kind,xi)?t.decodeSerializableElement_12e8id$(this.descriptor,l,this.valueSerializer,q(n,s)):t.decodeSerializableElement_12e8id$(this.descriptor,l,this.valueSerializer);n.put_xwzc9p$(s,u)},Kn.prototype.serialize_55azsf$=function(t,e){for(var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i),r=this.collectionIterator_wikn$(e),o={v:0};r.hasNext();){var s,a,l=r.next(),u=l.key,p=l.value;n.encodeSerializableElement_r4qlx7$(this.descriptor,(s=o.v,o.v=s+1|0,s),this.keySerializer,u),n.encodeSerializableElement_r4qlx7$(this.descriptor,(a=o.v,o.v=a+1|0,a),this.valueSerializer,p)}n.endStructure_24f42q$(this.descriptor)},Kn.$metadata$={kind:n,simpleName:"MapLikeSerializer",interfaces:[Wn]},Yn.prototype.ensureCapacity_za3lpa$=function(t,e){void 0===t&&(t=this.position+1|0),e?e(t):this.ensureCapacity_za3lpa$$default(t)},Yn.$metadata$={kind:n,simpleName:"PrimitiveArrayBuilder",interfaces:[]},Object.defineProperty(Zn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_o3qkn1$_0}}),Zn.prototype.builderSize_wili$=function(t){return t.position},Zn.prototype.toResult_wili$=function(t){return t.build()},Zn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Zn.prototype.collectionIterator_wikn$=function(t){throw I("This method lead to boxing and must not be used, use writeContents instead".toString())},Zn.prototype.insert_p422l$=function(t,e,i){throw I("This method lead to boxing and must not be used, use Builder.append instead".toString())},Zn.prototype.builder=function(){return this.toBuilder_wikn$(this.empty())},Zn.prototype.serialize_55azsf$=function(t,e){var i=this.collectionSize_wikn$(e),n=t.beginCollection_szpzho$(this.descriptor,i);this.writeContent_q3xt5$(n,e,i),n.endStructure_24f42q$(this.descriptor)},Zn.prototype.deserialize_bq71mq$=function(t){return this.merge_h7kg3q$(t,null)},Zn.$metadata$={kind:n,simpleName:"PrimitiveArraySerializer",interfaces:[Xn]},Object.defineProperty(Jn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_8482jr$_0}}),Jn.prototype.collectionSize_wikn$=function(t){return t.length},Jn.prototype.collectionIterator_wikn$=function(t){return e.arrayIterator(t)},Jn.prototype.builder=function(){return b()},Jn.prototype.builderSize_wili$=function(t){return t.size},Jn.prototype.toResult_wili$=function(t){return gu(t,this.kClass_0)},Jn.prototype.toBuilder_wikn$=function(t){return B(F(t))},Jn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Jn.prototype.insert_p422l$=function(t,e,i){t.add_wxm5ur$(e,i)},Jn.$metadata$={kind:n,simpleName:"ReferenceArraySerializer",interfaces:[Xn]},Object.defineProperty(Qn.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7uwoa2$_0}}),Qn.prototype.collectionSize_wikn$=function(t){return t.size},Qn.prototype.collectionIterator_wikn$=function(t){return t.iterator()},Qn.prototype.builder=function(){return b()},Qn.prototype.builderSize_wili$=function(t){return t.size},Qn.prototype.toResult_wili$=function(t){return t},Qn.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,U)?i:null)?n:B(t)},Qn.prototype.checkCapacity_rk7bw8$=function(t,e){t.ensureCapacity_za3lpa$(e)},Qn.prototype.insert_p422l$=function(t,e,i){t.add_wxm5ur$(e,i)},Qn.$metadata$={kind:n,simpleName:"ArrayListSerializer",interfaces:[Xn]},Object.defineProperty(tr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vnfc7m$_0}}),tr.prototype.collectionSize_wikn$=function(t){return t.size},tr.prototype.collectionIterator_wikn$=function(t){return t.iterator()},tr.prototype.builder=function(){return tt()},tr.prototype.builderSize_wili$=function(t){return t.size},tr.prototype.toResult_wili$=function(t){return t},tr.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,V)?i:null)?n:G(t)},tr.prototype.checkCapacity_rk7bw8$=function(t,e){},tr.prototype.insert_p422l$=function(t,e,i){t.add_11rb$(i)},tr.$metadata$={kind:n,simpleName:"LinkedHashSetSerializer",interfaces:[Xn]},Object.defineProperty(er.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yqpz47$_0}}),er.prototype.collectionSize_wikn$=function(t){return t.size},er.prototype.collectionIterator_wikn$=function(t){return t.iterator()},er.prototype.builder=function(){return x()},er.prototype.builderSize_wili$=function(t){return t.size},er.prototype.toResult_wili$=function(t){return t},er.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,H)?i:null)?n:W(t)},er.prototype.checkCapacity_rk7bw8$=function(t,e){},er.prototype.insert_p422l$=function(t,e,i){t.add_11rb$(i)},er.$metadata$={kind:n,simpleName:"HashSetSerializer",interfaces:[Xn]},Object.defineProperty(ir.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_pixp0o$_0}}),ir.prototype.collectionSize_wikn$=function(t){return t.size},ir.prototype.collectionIterator_wikn$=function(t){return t.entries.iterator()},ir.prototype.builder=function(){return X()},ir.prototype.builderSize_wili$=function(t){return t.size},ir.prototype.toResult_wili$=function(t){return t},ir.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,K)?i:null)?n:Y(t)},ir.prototype.checkCapacity_rk7bw8$=function(t,e){},ir.prototype.insertKeyValuePair_fbr58l$=function(t,e,i,n){t.put_xwzc9p$(i,n)},ir.$metadata$={kind:n,simpleName:"LinkedHashMapSerializer",interfaces:[Kn]},Object.defineProperty(nr.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kvyydd$_0}}),nr.prototype.collectionSize_wikn$=function(t){return t.size},nr.prototype.collectionIterator_wikn$=function(t){return t.entries.iterator()},nr.prototype.builder=function(){return Z()},nr.prototype.builderSize_wili$=function(t){return t.size},nr.prototype.toResult_wili$=function(t){return t},nr.prototype.toBuilder_wikn$=function(t){var i,n;return null!=(n=e.isType(i=t,J)?i:null)?n:Q(t)},nr.prototype.checkCapacity_rk7bw8$=function(t,e){},nr.prototype.insertKeyValuePair_fbr58l$=function(t,e,i,n){t.put_xwzc9p$(i,n)},nr.$metadata$={kind:n,simpleName:"HashMapSerializer",interfaces:[Kn]},Object.defineProperty(or.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kbvl2k$_0}}),or.prototype.serialize_55azsf$=function(t,e){null!=e?(t.encodeNotNullMark(),t.encodeSerializableValue_tf03ej$(this.serializer_0,e)):t.encodeNull()},or.prototype.deserialize_bq71mq$=function(t){return t.decodeNotNullMark()?t.decodeSerializableValue_w63s0f$(this.serializer_0):t.decodeNull()},or.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,or)||o(),!!h(this.serializer_0,t.serializer_0))},or.prototype.hashCode=function(){return d(this.serializer_0)},or.$metadata$={kind:n,simpleName:"NullableSerializer",interfaces:[Gl]},Object.defineProperty(sr.prototype,"serialName",{configurable:!0,get:function(){return this.serialName_szvoqg$_0}}),Object.defineProperty(sr.prototype,"isNullable",{configurable:!0,get:function(){return!0}}),sr.prototype.equals=function(t){return this===t||!!e.isType(t,sr)&&!!h(this.original_8be2vx$,t.original_8be2vx$)},sr.prototype.toString=function(){return this.original_8be2vx$.toString()+"?"},sr.prototype.hashCode=function(){return 31*d(this.original_8be2vx$)|0},Object.defineProperty(sr.prototype,"annotations",{get:function(){return this.original_8be2vx$.annotations}}),Object.defineProperty(sr.prototype,"elementsCount",{get:function(){return this.original_8be2vx$.elementsCount}}),Object.defineProperty(sr.prototype,"kind",{get:function(){return this.original_8be2vx$.kind}}),sr.prototype.getElementAnnotations_za3lpa$=function(t){return this.original_8be2vx$.getElementAnnotations_za3lpa$(t)},sr.prototype.getElementDescriptor_za3lpa$=function(t){return this.original_8be2vx$.getElementDescriptor_za3lpa$(t)},sr.prototype.getElementIndex_61zpoe$=function(t){return this.original_8be2vx$.getElementIndex_61zpoe$(t)},sr.prototype.getElementName_za3lpa$=function(t){return this.original_8be2vx$.getElementName_za3lpa$(t)},sr.prototype.isElementOptional_za3lpa$=function(t){return this.original_8be2vx$.isElementOptional_za3lpa$(t)},sr.$metadata$={kind:n,simpleName:"SerialDescriptorForNullable",interfaces:[ri]},Object.defineProperty(ar.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_uhy216$_0}}),ar.prototype.serialize_55azsf$=function(t,e){t.beginStructure_24f42q$(this.descriptor).endStructure_24f42q$(this.descriptor)},ar.prototype.deserialize_bq71mq$=function(t){return t.beginStructure_24f42q$(this.descriptor).endStructure_24f42q$(this.descriptor),this.objectInstance_0},ar.$metadata$={kind:n,simpleName:"ObjectSerializer",interfaces:[Gl]},Object.defineProperty(pr.prototype,"original_0",{configurable:!0,get:function(){return this.original_s64f0k$_0.value}}),Object.defineProperty(pr.prototype,"serialName",{configurable:!0,get:function(){return this.original_0.serialName}}),Object.defineProperty(pr.prototype,"kind",{configurable:!0,get:function(){return this.original_0.kind}}),Object.defineProperty(pr.prototype,"elementsCount",{configurable:!0,get:function(){return this.original_0.elementsCount}}),pr.prototype.getElementName_za3lpa$=function(t){return this.original_0.getElementName_za3lpa$(t)},pr.prototype.getElementIndex_61zpoe$=function(t){return this.original_0.getElementIndex_61zpoe$(t)},pr.prototype.getElementAnnotations_za3lpa$=function(t){return this.original_0.getElementAnnotations_za3lpa$(t)},pr.prototype.getElementDescriptor_za3lpa$=function(t){return this.original_0.getElementDescriptor_za3lpa$(t)},pr.prototype.isElementOptional_za3lpa$=function(t){return this.original_0.isElementOptional_za3lpa$(t)},pr.$metadata$={kind:n,interfaces:[ri]},Object.defineProperty(_r.prototype,"serialName",{get:function(){return this.serialName_igazkg$_0}}),Object.defineProperty(_r.prototype,"elementsCount",{get:function(){return this.elementsCount_qx3iur$_0}}),Object.defineProperty(_r.prototype,"kind",{configurable:!0,get:function(){return Qi()}}),Object.defineProperty(_r.prototype,"annotations",{configurable:!0,get:function(){var t;return null!=(t=this.classAnnotations_0)?t:c()}}),Object.defineProperty(_r.prototype,"namesSet_8be2vx$",{configurable:!0,get:function(){return this.indices_0.keys}}),Object.defineProperty(_r.prototype,"indices_0",{configurable:!0,get:function(){return this.indices_73aj4y$_0.value}}),Object.defineProperty(_r.prototype,"typeParameterDescriptors_0",{configurable:!0,get:function(){return this.typeParameterDescriptors_ggwkl6$_0.value}}),Object.defineProperty(_r.prototype,"_hashCode_0",{configurable:!0,get:function(){return this._hashCode_61j445$_0.value}}),_r.prototype.addElement_ivxn3r$=function(t,e){void 0===e&&(e=!1),this.names_0[(this.added_0=this.added_0+1|0,this.added_0)]=t,this.elementsOptionality_0[this.added_0]=e,this.propertiesAnnotations_0[this.added_0]=null},_r.prototype.pushAnnotation_yj921w$=function(t){var e,i=this.propertiesAnnotations_0[this.added_0];if(null==i){var n=m(1);this.propertiesAnnotations_0[this.added_0]=n,e=n}else e=i;e.add_11rb$(t)},_r.prototype.pushClassAnnotation_yj921w$=function(t){null==this.classAnnotations_0&&(this.classAnnotations_0=m(1)),A(this.classAnnotations_0).add_11rb$(t)},_r.prototype.getElementDescriptor_za3lpa$=function(t){var e,i,n,r;if(null==(r=null!=(n=null!=(i=null!=(e=this.generatedSerializer_0)?e.childSerializers():null)?i[t]:null)?n.descriptor:null))throw new at(this.serialName+" descriptor has only "+this.elementsCount+" elements, index: "+t);return r},_r.prototype.isElementOptional_za3lpa$=function(t){return yu(this.elementsOptionality_0,t)},_r.prototype.getElementAnnotations_za3lpa$=function(t){var e;return null!=(e=$u(this.propertiesAnnotations_0,t))?e:c()},_r.prototype.getElementName_za3lpa$=function(t){return $u(this.names_0,t)},_r.prototype.getElementIndex_61zpoe$=function(t){var e;return null!=(e=this.indices_0.get_11rb$(t))?e:-3},_r.prototype.buildIndices_0=function(){var t,e=Z();t=this.names_0;for(var i=0;i!==t.length;++i){var n=this.names_0[i];e.put_xwzc9p$(n,i)}return e},_r.prototype.equals=function(t){var i;t:do{var n;if(this===t){i=!0;break t}if(!e.isType(t,_r)){i=!1;break t}if(!h(this.serialName,t.serialName)){i=!1;break t}if(!w(this.typeParameterDescriptors_0,t.typeParameterDescriptors_0)){i=!1;break t}if(this.elementsCount!==t.elementsCount){i=!1;break t}n=this.elementsCount;for(var r=0;r<n;r++){if(!h(this.getElementDescriptor_za3lpa$(r).serialName,t.getElementDescriptor_za3lpa$(r).serialName)){i=!1;break t}if(!h(this.getElementDescriptor_za3lpa$(r).kind,t.getElementDescriptor_za3lpa$(r).kind)){i=!1;break t}}i=!0}while(0);return i},_r.prototype.hashCode=function(){return this._hashCode_0},_r.prototype.toString=function(){return k(this.indices_0.entries,", ",this.serialName+"(",")",void 0,void 0,(t=this,function(e){return e.key+": "+t.getElementDescriptor_za3lpa$(e.value).serialName}));var t},_r.$metadata$={kind:n,simpleName:"PluginGeneratedSerialDescriptor",interfaces:[ri]},mr.prototype.typeParametersSerializers=function(){return Nn},mr.$metadata$={kind:$,simpleName:"GeneratedSerializer",interfaces:[Gl]},$r.$metadata$={kind:$,simpleName:"SerializerFactory",interfaces:[]},yr.prototype.collectionSize_wikn$=function(t){return t.length},yr.prototype.toBuilder_wikn$=function(t){return new br(t)},yr.prototype.empty=function(){return new Int8Array(0)},yr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e99oo$(t.decodeByteElement_szpzho$(this.descriptor,e))},yr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeByteElement_j0u8y3$(this.descriptor,n,e[n])},yr.$metadata$={kind:p,simpleName:"ByteArraySerializer",interfaces:[Zn,Gl]};var vr=null;function gr(){return null===vr&&new yr,vr}function br(t){Yn.call(this),this.buffer_0=t,this.position_8vrcnd$_0=t.length,this.ensureCapacity_za3lpa$(10)}function xr(){wr=this,Zn.call(this,De())}Object.defineProperty(br.prototype,"position",{configurable:!0,get:function(){return this.position_8vrcnd$_0},set:function(t){this.position_8vrcnd$_0=t}}),br.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ut(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},br.prototype.append_8e99oo$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},br.prototype.build=function(){return ut(this.buffer_0,this.position)},br.$metadata$={kind:n,simpleName:"ByteArrayBuilder",interfaces:[Yn]},xr.prototype.collectionSize_wikn$=function(t){return t.length},xr.prototype.toBuilder_wikn$=function(t){return new kr(t)},xr.prototype.empty=function(){return new Int16Array(0)},xr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_o3ifnw$(t.decodeShortElement_szpzho$(this.descriptor,e))},xr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeShortElement_l83pjl$(this.descriptor,n,e[n])},xr.$metadata$={kind:p,simpleName:"ShortArraySerializer",interfaces:[Zn,Gl]};var wr=null;function zr(){return null===wr&&new xr,wr}function kr(t){Yn.call(this),this.buffer_0=t,this.position_aswgsb$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Sr(){Cr=this,Zn.call(this,Fe())}Object.defineProperty(kr.prototype,"position",{configurable:!0,get:function(){return this.position_aswgsb$_0},set:function(t){this.position_aswgsb$_0=t}}),kr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=pt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},kr.prototype.append_o3ifnw$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},kr.prototype.build=function(){return pt(this.buffer_0,this.position)},kr.$metadata$={kind:n,simpleName:"ShortArrayBuilder",interfaces:[Yn]},Sr.prototype.collectionSize_wikn$=function(t){return t.length},Sr.prototype.toBuilder_wikn$=function(t){return new Er(t)},Sr.prototype.empty=function(){return new Int32Array(0)},Sr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_kcn2v3$(t.decodeIntElement_szpzho$(this.descriptor,e))},Sr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeIntElement_ptg7oe$(this.descriptor,n,e[n])},Sr.$metadata$={kind:p,simpleName:"IntArraySerializer",interfaces:[Zn,Gl]};var Cr=null;function Nr(){return null===Cr&&new Sr,Cr}function Er(t){Yn.call(this),this.buffer_0=t,this.position_9owhjc$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Tr(){Pr=this,Zn.call(this,Ue())}Object.defineProperty(Er.prototype,"position",{configurable:!0,get:function(){return this.position_9owhjc$_0},set:function(t){this.position_9owhjc$_0=t}}),Er.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ct(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Er.prototype.append_kcn2v3$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Er.prototype.build=function(){return ct(this.buffer_0,this.position)},Er.$metadata$={kind:n,simpleName:"IntArrayBuilder",interfaces:[Yn]},Tr.prototype.collectionSize_wikn$=function(t){return t.length},Tr.prototype.toBuilder_wikn$=function(t){return new Mr(t)},Tr.prototype.empty=function(){return e.longArray(0)},Tr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e33dg$(t.decodeLongElement_szpzho$(this.descriptor,e))},Tr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeLongElement_j0o2mv$(this.descriptor,n,e[n])},Tr.$metadata$={kind:p,simpleName:"LongArraySerializer",interfaces:[Zn,Gl]};var Pr=null;function Or(){return null===Pr&&new Tr,Pr}function Mr(t){Yn.call(this),this.buffer_0=t,this.position_kthxoj$_0=t.length,this.ensureCapacity_za3lpa$(10)}function jr(){Ar=this,Zn.call(this,Ge())}Object.defineProperty(Mr.prototype,"position",{configurable:!0,get:function(){return this.position_kthxoj$_0},set:function(t){this.position_kthxoj$_0=t}}),Mr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ht(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Mr.prototype.append_8e33dg$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Mr.prototype.build=function(){return ht(this.buffer_0,this.position)},Mr.$metadata$={kind:n,simpleName:"LongArrayBuilder",interfaces:[Yn]},jr.prototype.collectionSize_wikn$=function(t){return t.length},jr.prototype.toBuilder_wikn$=function(t){return new Rr(t)},jr.prototype.empty=function(){return new Float32Array(0)},jr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_nwfnho$(t.decodeFloatElement_szpzho$(this.descriptor,e))},jr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeFloatElement_lf6hpt$(this.descriptor,n,e[n])},jr.$metadata$={kind:p,simpleName:"FloatArraySerializer",interfaces:[Zn,Gl]};var Ar=null;function Ir(){return null===Ar&&new jr,Ar}function Rr(t){Yn.call(this),this.buffer_0=t,this.position_gfqw9x$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Lr(){Dr=this,Zn.call(this,We())}Object.defineProperty(Rr.prototype,"position",{configurable:!0,get:function(){return this.position_gfqw9x$_0},set:function(t){this.position_gfqw9x$_0=t}}),Rr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=dt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Rr.prototype.append_nwfnho$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Rr.prototype.build=function(){return dt(this.buffer_0,this.position)},Rr.$metadata$={kind:n,simpleName:"FloatArrayBuilder",interfaces:[Yn]},Lr.prototype.collectionSize_wikn$=function(t){return t.length},Lr.prototype.toBuilder_wikn$=function(t){return new Fr(t)},Lr.prototype.empty=function(){return new Float64Array(0)},Lr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_tq0o01$(t.decodeDoubleElement_szpzho$(this.descriptor,e))},Lr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeDoubleElement_powrwi$(this.descriptor,n,e[n])},Lr.$metadata$={kind:p,simpleName:"DoubleArraySerializer",interfaces:[Zn,Gl]};var Dr=null;function qr(){return null===Dr&&new Lr,Dr}function Fr(t){Yn.call(this),this.buffer_0=t,this.position_qka0uq$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Br(){Ur=this,Zn.call(this,Ae())}Object.defineProperty(Fr.prototype,"position",{configurable:!0,get:function(){return this.position_qka0uq$_0},set:function(t){this.position_qka0uq$_0=t}}),Fr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=ft(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Fr.prototype.append_tq0o01$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Fr.prototype.build=function(){return ft(this.buffer_0,this.position)},Fr.$metadata$={kind:n,simpleName:"DoubleArrayBuilder",interfaces:[Yn]},Br.prototype.collectionSize_wikn$=function(t){return t.length},Br.prototype.toBuilder_wikn$=function(t){return new Gr(t)},Br.prototype.empty=function(){return e.charArray(0)},Br.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_8e8zqy$(_t(t.decodeCharElement_szpzho$(this.descriptor,e)))},Br.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeCharElement_j0tz0d$(this.descriptor,n,e[n])},Br.$metadata$={kind:p,simpleName:"CharArraySerializer",interfaces:[Zn,Gl]};var Ur=null;function Vr(){return null===Ur&&new Br,Ur}function Gr(t){Yn.call(this),this.buffer_0=t,this.position_tpcwbb$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Hr(){Xr=this,Zn.call(this,Ke())}Object.defineProperty(Gr.prototype,"position",{configurable:!0,get:function(){return this.position_tpcwbb$_0},set:function(t){this.position_tpcwbb$_0=t}}),Gr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=mt(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Gr.prototype.append_8e8zqy$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Gr.prototype.build=function(){return mt(this.buffer_0,this.position)},Gr.$metadata$={kind:n,simpleName:"CharArrayBuilder",interfaces:[Yn]},Hr.prototype.collectionSize_wikn$=function(t){return t.length},Hr.prototype.toBuilder_wikn$=function(t){return new Yr(t)},Hr.prototype.empty=function(){return e.booleanArray(0)},Hr.prototype.readElement_8pvye7$$default=function(t,e,i,n){i.append_vft4zs$(t.decodeBooleanElement_szpzho$(this.descriptor,e))},Hr.prototype.writeContent_q3xt5$=function(t,e,i){for(var n=0;n<i;n++)t.encodeBooleanElement_qh7jdn$(this.descriptor,n,e[n])},Hr.$metadata$={kind:p,simpleName:"BooleanArraySerializer",interfaces:[Zn,Gl]};var Wr,Xr=null;function Kr(){return null===Xr&&new Hr,Xr}function Yr(t){Yn.call(this),this.buffer_0=t,this.position_fkn8lr$_0=t.length,this.ensureCapacity_za3lpa$(10)}function Zr(t,e){this.serialName_h9gugr$_0=t,this.kind_rqp61y$_0=e}function Jr(t,e){return function(t){var e,i=Wr.keys;for(e=i.iterator();e.hasNext();){var n=e.next(),r=Rt(A(n.simpleName));if(Lt(t,"kotlin."+r,!0)||Lt(t,r,!0))throw O(Dt("\n                The name of serial descriptor should uniquely identify associated serializer.\n                For serial name "+t+" there already exist "+Rt(r)+"Serializer.\n                Please refer to SerialDescriptor documentation for additional information.\n            "))}}(t),new Zr(t,e)}function Qr(t){var i;return null==(i=Wr.get_11rb$(t))||e.isType(i,Gl)?i:o()}function to(){eo=this,this.$delegate_t0wm8i$_0=new ar("kotlin.Unit",l)}Object.defineProperty(Yr.prototype,"position",{configurable:!0,get:function(){return this.position_fkn8lr$_0},set:function(t){this.position_fkn8lr$_0=t}}),Yr.prototype.ensureCapacity_za3lpa$$default=function(t){this.buffer_0.length<t&&(this.buffer_0=$t(this.buffer_0,lt(t,2*this.buffer_0.length|0)))},Yr.prototype.append_vft4zs$=function(t){var e;this.ensureCapacity_za3lpa$(),this.buffer_0[(e=this.position,this.position=e+1|0,e)]=t},Yr.prototype.build=function(){return $t(this.buffer_0,this.position)},Yr.$metadata$={kind:n,simpleName:"BooleanArrayBuilder",interfaces:[Yn]},Object.defineProperty(Zr.prototype,"serialName",{get:function(){return this.serialName_h9gugr$_0}}),Object.defineProperty(Zr.prototype,"kind",{get:function(){return this.kind_rqp61y$_0}}),Object.defineProperty(Zr.prototype,"elementsCount",{configurable:!0,get:function(){return 0}}),Zr.prototype.getElementName_za3lpa$=function(t){return this.error_0()},Zr.prototype.getElementIndex_61zpoe$=function(t){return this.error_0()},Zr.prototype.isElementOptional_za3lpa$=function(t){return this.error_0()},Zr.prototype.getElementDescriptor_za3lpa$=function(t){return this.error_0()},Zr.prototype.getElementAnnotations_za3lpa$=function(t){return this.error_0()},Zr.prototype.toString=function(){return"PrimitiveDescriptor("+this.serialName+")"},Zr.prototype.error_0=function(){throw I("Primitive descriptor does not have elements")},Zr.$metadata$={kind:n,simpleName:"PrimitiveSerialDescriptor",interfaces:[ri]},Object.defineProperty(to.prototype,"descriptor",{get:function(){return this.$delegate_t0wm8i$_0.descriptor}}),to.prototype.deserialize_bq71mq$=function(t){return this.$delegate_t0wm8i$_0.deserialize_bq71mq$(t)},to.prototype.patch_h7kg3r$=function(t,e){return this.$delegate_t0wm8i$_0.patch_h7kg3r$(t,e)},to.prototype.serialize_55azsf$=function(t,e){return this.$delegate_t0wm8i$_0.serialize_55azsf$(t,e)},to.$metadata$={kind:p,simpleName:"UnitSerializer",interfaces:[Gl]};var eo=null;function io(){return null===eo&&new to,eo}function no(){ro=this,this.descriptor_vdtvaz$_0=new Zr("kotlin.Boolean",ki())}Object.defineProperty(no.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_vdtvaz$_0}}),no.prototype.serialize_55azsf$=function(t,e){t.encodeBoolean_6taknv$(e)},no.prototype.deserialize_bq71mq$=function(t){return t.decodeBoolean()},no.$metadata$={kind:p,simpleName:"BooleanSerializer",interfaces:[Gl]};var ro=null;function oo(){return null===ro&&new no,ro}function so(){ao=this,this.descriptor_f6vlf1$_0=new Zr("kotlin.Byte",Ni())}Object.defineProperty(so.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_f6vlf1$_0}}),so.prototype.serialize_55azsf$=function(t,e){t.encodeByte_s8j3t7$(e)},so.prototype.deserialize_bq71mq$=function(t){return t.decodeByte()},so.$metadata$={kind:p,simpleName:"ByteSerializer",interfaces:[Gl]};var ao=null;function lo(){return null===ao&&new so,ao}function uo(){po=this,this.descriptor_yvjeup$_0=new Zr("kotlin.Short",ji())}Object.defineProperty(uo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_yvjeup$_0}}),uo.prototype.serialize_55azsf$=function(t,e){t.encodeShort_mq22fl$(e)},uo.prototype.deserialize_bq71mq$=function(t){return t.decodeShort()},uo.$metadata$={kind:p,simpleName:"ShortSerializer",interfaces:[Gl]};var po=null;function co(){return null===po&&new uo,po}function ho(){fo=this,this.descriptor_xrjflq$_0=new Zr("kotlin.Int",Ri())}Object.defineProperty(ho.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_xrjflq$_0}}),ho.prototype.serialize_55azsf$=function(t,e){t.encodeInt_za3lpa$(e)},ho.prototype.deserialize_bq71mq$=function(t){return t.decodeInt()},ho.$metadata$={kind:p,simpleName:"IntSerializer",interfaces:[Gl]};var fo=null;function _o(){return null===fo&&new ho,fo}function mo(){$o=this,this.descriptor_q4z687$_0=new Zr("kotlin.Long",qi())}Object.defineProperty(mo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_q4z687$_0}}),mo.prototype.serialize_55azsf$=function(t,e){t.encodeLong_s8cxhz$(e)},mo.prototype.deserialize_bq71mq$=function(t){return t.decodeLong()},mo.$metadata$={kind:p,simpleName:"LongSerializer",interfaces:[Gl]};var $o=null;function yo(){return null===$o&&new mo,$o}function vo(){go=this,this.descriptor_7mw1sh$_0=new Zr("kotlin.Float",Ui())}Object.defineProperty(vo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_7mw1sh$_0}}),vo.prototype.serialize_55azsf$=function(t,e){t.encodeFloat_mx4ult$(e)},vo.prototype.deserialize_bq71mq$=function(t){return t.decodeFloat()},vo.$metadata$={kind:p,simpleName:"FloatSerializer",interfaces:[Gl]};var go=null;function bo(){return null===go&&new vo,go}function xo(){wo=this,this.descriptor_2hn2sc$_0=new Zr("kotlin.Double",Hi())}Object.defineProperty(xo.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_2hn2sc$_0}}),xo.prototype.serialize_55azsf$=function(t,e){t.encodeDouble_14dthe$(e)},xo.prototype.deserialize_bq71mq$=function(t){return t.decodeDouble()},xo.$metadata$={kind:p,simpleName:"DoubleSerializer",interfaces:[Gl]};var wo=null;function zo(){return null===wo&&new xo,wo}function ko(){So=this,this.descriptor_5mpy8x$_0=new Zr("kotlin.Char",Pi())}Object.defineProperty(ko.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_5mpy8x$_0}}),ko.prototype.serialize_55azsf$=function(t,e){t.encodeChar_s8itvh$(e)},ko.prototype.deserialize_bq71mq$=function(t){return t.decodeChar()},ko.$metadata$={kind:p,simpleName:"CharSerializer",interfaces:[Gl]};var So=null;function Co(){return null===So&&new ko,So}function No(){is=this,this.descriptor_sum718$_0=new Zr("kotlin.String",Ki())}Object.defineProperty(No.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_sum718$_0}}),No.prototype.serialize_55azsf$=function(t,e){t.encodeString_61zpoe$(e)},No.prototype.deserialize_bq71mq$=function(t){return t.decodeString()},No.$metadata$={kind:p,simpleName:"StringSerializer",interfaces:[Gl]};var Eo,To,Po,Oo,Mo,jo,Ao,Io,Ro,Lo,Do,qo,Fo,Bo,Uo,Vo,Go,Ho,Wo,Xo,Ko,Yo,Zo,Jo,Qo,ts,es,is=null;function ns(){return null===is&&new No,is}function rs(){}function os(){this.tagStack_cfsfm$_0=b()}function ss(t){void 0===t&&(t=""),os.call(this),this.rootName=t}function as(){this.updateMode_cp3ftw$_0=Zl(),this.tagStack_h2rpra$_0=b(),this.flag_kguhq4$_0=!1}function ls(t){void 0===t&&(t=""),as.call(this),this.rootName=t}function us(t,e){this.keySerializer=t,this.valueSerializer=e}function ps(t,e){var i,n;us.call(this,t,e),this.descriptor_cnmk75$_0=ci("kotlin.collections.Map.Entry",sn(),[],(i=t,n=e,function(t){return t.element_vxrguq$("key",i.descriptor),t.element_vxrguq$("value",n.descriptor),l}))}function cs(t,e){this.key_7uv6mv$_0=t,this.value_gjenjd$_0=e}function hs(t,e){var i,n;us.call(this,t,e),this.descriptor_utc4rp$_0=li("kotlin.Pair",[],(i=t,n=e,function(t){return t.element_vxrguq$("first",i.descriptor),t.element_vxrguq$("second",n.descriptor),l}))}function ds(t,e,i){var n;this.aSerializer_0=t,this.bSerializer_0=e,this.cSerializer_0=i,this.descriptor_73a6vr$_0=li("kotlin.Triple",[],(n=this,function(t){return t.element_vxrguq$("first",n.aSerializer_0.descriptor),t.element_vxrguq$("second",n.bSerializer_0.descriptor),t.element_vxrguq$("third",n.cSerializer_0.descriptor),l}))}function fs(t,e,i,n,r,o,s,a,l,u,p){void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o="    "),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===l&&(l="type"),void 0===u&&(u=!1),void 0===p&&(p=Il),this.encodeDefaults=t,this.ignoreUnknownKeys=e,this.isLenient=i,this.allowStructuredMapKeys=n,this.prettyPrint=r,this.prettyPrintIndent=o,this.coerceInputValues=s,this.useArrayPolymorphism=a,this.classDiscriminator=l,this.allowSpecialFloatingPointValues=u,this.serializersModule=p}function _s(t){pu(t,this),this.name="JsonException"}function ms(t,e){_s.call(this,t>=0?"Unexpected JSON token at offset "+t+": "+e:e),this.name="JsonDecodingException"}function $s(t){_s.call(this,t),this.name="JsonEncodingException"}function ys(t,e,i){return new ms(t,e+"\nJSON input: "+Ss(i,t))}function vs(t,e){return new $s("Unexpected special floating-point value "+t.toString()+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+Ss(e))}function gs(t,e,i){return new $s(ws(t,e,i))}function bs(t,e,i){return new ms(-1,ws(t,e,i))}function xs(t,e){t.fail_bm4lxs$("Unexpected special floating-point value "+e.toString()+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. "+Po)}function ws(t,e,i){return"Unexpected special floating-point value "+t.toString()+" with key "+e+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+Ss(i)}function zs(t,e){return new ms(-1,"Encountered unknown key '"+t+"'.\nUse 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.\nCurrent input: "+Ss(e))}function ks(t){return new $s("Value of type '"+t.serialName+"' can't be used in JSON as a key in the map. It should have either primitive or enum kind, but its kind is '"+t.kind+"'.\n"+Mo)}function Ss(t,e){if(void 0===e&&(e=-1),t.length<200)return t;if(-1===e){var i=t.length-60|0;return i<=0?t:"....."+t.substring(i)}var n=e-30|0,r=e+30|0,o=n<=0?"":".....",s=r>=t.length?"":".....",a=lt(n,0),l=Gt(r,t.length);return o+t.substring(a,l)+s}function Cs(t,e){this.reader_0=e,this.isLenient_0=t.isLenient}function Ns(){As=this,this.ESCAPE_2_CHAR=e.charArray(117);for(var t=0;t<=31;t++)this.initC2ESC_0(t,Vo);this.initC2ESC_0(8,98),this.initC2ESC_0(9,116),this.initC2ESC_0(10,110),this.initC2ESC_0(12,102),this.initC2ESC_0(13,114),this.initC2ESC_1(47,47),this.initC2ESC_1(Fo,Fo),this.initC2ESC_1(Bo,Bo)}Object.defineProperty(os.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),os.prototype.encodeTaggedValue_dpg7wc$=function(t,i){throw pu("Non-serializable "+e.getKClassFromExpression(i)+" is not supported by "+e.getKClassFromExpression(this)+" encoder")},os.prototype.encodeTaggedNotNullMark_11rb$=function(t){},os.prototype.encodeTaggedNull_11rb$=function(t){throw pu("null is not supported")},os.prototype.encodeTaggedInt_dpg1yx$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedByte_19qe40$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedShort_veccj0$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedLong_19wkf8$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedFloat_vlf4p8$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedDouble_e37ph5$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedBoolean_iuyhfk$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedChar_19qo1q$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,R(e))},os.prototype.encodeTaggedString_l9l8mx$=function(t,e){this.encodeTaggedValue_dpg7wc$(t,e)},os.prototype.encodeTaggedEnum_4xdzqf$=function(t,e,i){this.encodeTaggedValue_dpg7wc$(t,i)},os.prototype.encodeElement_qp90hq$_0=function(t,e){var i=this.getTag_av9bu7$(t,e);return this.pushTag_11rb$(i),!0},os.prototype.encodeNotNullMark=function(){this.encodeTaggedNotNullMark_11rb$(this.currentTag)},os.prototype.encodeNull=function(){this.encodeTaggedNull_11rb$(this.popTag())},os.prototype.encodeBoolean_6taknv$=function(t){this.encodeTaggedBoolean_iuyhfk$(this.popTag(),t)},os.prototype.encodeByte_s8j3t7$=function(t){this.encodeTaggedByte_19qe40$(this.popTag(),t)},os.prototype.encodeShort_mq22fl$=function(t){this.encodeTaggedShort_veccj0$(this.popTag(),t)},os.prototype.encodeInt_za3lpa$=function(t){this.encodeTaggedInt_dpg1yx$(this.popTag(),t)},os.prototype.encodeLong_s8cxhz$=function(t){this.encodeTaggedLong_19wkf8$(this.popTag(),t)},os.prototype.encodeFloat_mx4ult$=function(t){this.encodeTaggedFloat_vlf4p8$(this.popTag(),t)},os.prototype.encodeDouble_14dthe$=function(t){this.encodeTaggedDouble_e37ph5$(this.popTag(),t)},os.prototype.encodeChar_s8itvh$=function(t){this.encodeTaggedChar_19qo1q$(this.popTag(),t)},os.prototype.encodeString_61zpoe$=function(t){this.encodeTaggedString_l9l8mx$(this.popTag(),t)},os.prototype.encodeEnum_szpzho$=function(t,e){this.encodeTaggedEnum_4xdzqf$(this.popTag(),t,e)},os.prototype.beginStructure_jvp2sb$=function(t,e){return this},os.prototype.endStructure_24f42q$=function(t){this.tagStack_cfsfm$_0.isEmpty()||this.popTag(),this.endEncode_24f42q$(t)},os.prototype.endEncode_24f42q$=function(t){},os.prototype.encodeBooleanElement_qh7jdn$=function(t,e,i){this.encodeTaggedBoolean_iuyhfk$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeByteElement_j0u8y3$=function(t,e,i){this.encodeTaggedByte_19qe40$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeShortElement_l83pjl$=function(t,e,i){this.encodeTaggedShort_veccj0$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeIntElement_ptg7oe$=function(t,e,i){this.encodeTaggedInt_dpg1yx$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeLongElement_j0o2mv$=function(t,e,i){this.encodeTaggedLong_19wkf8$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeFloatElement_lf6hpt$=function(t,e,i){this.encodeTaggedFloat_vlf4p8$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeDoubleElement_powrwi$=function(t,e,i){this.encodeTaggedDouble_e37ph5$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeCharElement_j0tz0d$=function(t,e,i){this.encodeTaggedChar_19qo1q$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeStringElement_iij8qq$=function(t,e,i){this.encodeTaggedString_l9l8mx$(this.getTag_av9bu7$(t,e),i)},os.prototype.encodeSerializableElement_r4qlx7$=function(t,e,i,n){this.encodeElement_qp90hq$_0(t,e)&&this.encodeSerializableValue_tf03ej$(i,n)},os.prototype.encodeNullableSerializableElement_qw92s8$=function(t,e,i,n){this.encodeElement_qp90hq$_0(t,e)&&this.encodeNullableSerializableValue_f4686g$(i,n)},Object.defineProperty(os.prototype,"currentTag",{configurable:!0,get:function(){return qt(this.tagStack_cfsfm$_0)}}),Object.defineProperty(os.prototype,"currentTagOrNull",{configurable:!0,get:function(){return Ft(this.tagStack_cfsfm$_0)}}),os.prototype.pushTag_11rb$=function(t){this.tagStack_cfsfm$_0.add_11rb$(t)},os.prototype.popTag=function(){if(this.tagStack_cfsfm$_0.isEmpty())throw pu("No tag in stack for requested element");return this.tagStack_cfsfm$_0.removeAt_za3lpa$(Bt(this.tagStack_cfsfm$_0))},os.$metadata$={kind:n,simpleName:"TaggedEncoder",interfaces:[On,Pn]},ss.prototype.getTag_av9bu7$=function(t,e){return this.nested_61zpoe$(this.elementName_szpzho$(t,e))},ss.prototype.nested_61zpoe$=function(t){var e;return this.composeName_puj7f4$(null!=(e=this.currentTagOrNull)?e:this.rootName,t)},ss.prototype.elementName_szpzho$=function(t,e){return t.getElementName_za3lpa$(e)},ss.prototype.composeName_puj7f4$=function(t,e){return 0===t.length?e:t+"."+e},ss.$metadata$={kind:n,simpleName:"NamedValueEncoder",interfaces:[os]},Object.defineProperty(as.prototype,"serializersModule",{configurable:!0,get:function(){return Il}}),Object.defineProperty(as.prototype,"updateMode",{configurable:!0,get:function(){return this.updateMode_cp3ftw$_0}}),as.prototype.decodeTaggedValue_11rb$=function(t){throw pu(e.getKClassFromExpression(this).toString()+" can't retrieve untyped values")},as.prototype.decodeTaggedNotNullMark_11rb$=function(t){return!0},as.prototype.decodeTaggedNull_11rb$=function(t){return null},as.prototype.decodeTaggedBoolean_11rb$=function(t){var e;return"boolean"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedByte_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedShort_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedInt_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedLong_11rb$=function(t){var i;return e.isType(i=this.decodeTaggedValue_11rb$(t),e.Long)?i:o()},as.prototype.decodeTaggedFloat_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedDouble_11rb$=function(t){var e;return"number"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedChar_11rb$=function(t){var i;return e.isChar(i=this.decodeTaggedValue_11rb$(t))?i:o()},as.prototype.decodeTaggedString_11rb$=function(t){var e;return"string"==typeof(e=this.decodeTaggedValue_11rb$(t))?e:o()},as.prototype.decodeTaggedEnum_gaombr$=function(t,e){var i;return"number"==typeof(i=this.decodeTaggedValue_11rb$(t))?i:o()},as.prototype.decodeSerializableValue_19c8k5$=function(t,e){return this.decodeSerializableValue_w63s0f$(t)},as.prototype.decodeNotNullMark=function(){return this.decodeTaggedNotNullMark_11rb$(this.currentTag)},as.prototype.decodeNull=function(){return null},as.prototype.decodeBoolean=function(){return this.decodeTaggedBoolean_11rb$(this.popTag())},as.prototype.decodeByte=function(){return this.decodeTaggedByte_11rb$(this.popTag())},as.prototype.decodeShort=function(){return this.decodeTaggedShort_11rb$(this.popTag())},as.prototype.decodeInt=function(){return this.decodeTaggedInt_11rb$(this.popTag())},as.prototype.decodeLong=function(){return this.decodeTaggedLong_11rb$(this.popTag())},as.prototype.decodeFloat=function(){return this.decodeTaggedFloat_11rb$(this.popTag())},as.prototype.decodeDouble=function(){return this.decodeTaggedDouble_11rb$(this.popTag())},as.prototype.decodeChar=function(){return this.decodeTaggedChar_11rb$(this.popTag())},as.prototype.decodeString=function(){return this.decodeTaggedString_11rb$(this.popTag())},as.prototype.decodeEnum_24f42q$=function(t){return this.decodeTaggedEnum_gaombr$(this.popTag(),t)},as.prototype.beginStructure_jvp2sb$=function(t,e){return this},as.prototype.endStructure_24f42q$=function(t){},as.prototype.decodeBooleanElement_szpzho$=function(t,e){return this.decodeTaggedBoolean_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeByteElement_szpzho$=function(t,e){return this.decodeTaggedByte_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeShortElement_szpzho$=function(t,e){return this.decodeTaggedShort_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeIntElement_szpzho$=function(t,e){return this.decodeTaggedInt_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeLongElement_szpzho$=function(t,e){return this.decodeTaggedLong_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeFloatElement_szpzho$=function(t,e){return this.decodeTaggedFloat_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeDoubleElement_szpzho$=function(t,e){return this.decodeTaggedDouble_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeCharElement_szpzho$=function(t,e){return this.decodeTaggedChar_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeStringElement_szpzho$=function(t,e){return this.decodeTaggedString_11rb$(this.getTag_av9bu7$(t,e))},as.prototype.decodeSerializableElement_12e8id$$default=function(t,e,i,n){return this.tagBlock_lngyui$_0(this.getTag_av9bu7$(t,e),(r=i,o=n,s=this,function(){return s.decodeSerializableValue_19c8k5$(r,o)}));var r,o,s},as.prototype.decodeNullableSerializableElement_8viuyw$$default=function(t,e,i,n){return this.tagBlock_lngyui$_0(this.getTag_av9bu7$(t,e),(r=this,o=i,s=n,function(){return r.decodeNotNullMark()?r.decodeSerializableValue_19c8k5$(o,s):r.decodeNull()}));var r,o,s},as.prototype.tagBlock_lngyui$_0=function(t,e){this.pushTag_11rb$(t);var i=e();return this.flag_kguhq4$_0||this.popTag(),this.flag_kguhq4$_0=!1,i},Object.defineProperty(as.prototype,"currentTag",{configurable:!0,get:function(){return qt(this.tagStack_h2rpra$_0)}}),Object.defineProperty(as.prototype,"currentTagOrNull",{configurable:!0,get:function(){return Ft(this.tagStack_h2rpra$_0)}}),as.prototype.pushTag_11rb$=function(t){this.tagStack_h2rpra$_0.add_11rb$(t)},as.prototype.copyTagsTo_lgvuxj$=function(t){t.tagStack_h2rpra$_0.addAll_brywnq$(this.tagStack_h2rpra$_0)},as.prototype.popTag=function(){var t=this.tagStack_h2rpra$_0.removeAt_za3lpa$(Bt(this.tagStack_h2rpra$_0));return this.flag_kguhq4$_0=!0,t},as.$metadata$={kind:n,simpleName:"TaggedDecoder",interfaces:[vn,yn]},ls.prototype.getTag_av9bu7$=function(t,e){return this.nested_61zpoe$(this.elementName_szpzho$(t,e))},ls.prototype.nested_61zpoe$=function(t){var e;return this.composeName_puj7f4$(null!=(e=this.currentTagOrNull)?e:this.rootName,t)},ls.prototype.elementName_szpzho$=function(t,e){return t.getElementName_za3lpa$(e)},ls.prototype.composeName_puj7f4$=function(t,e){return 0===t.length?e:t+"."+e},ls.$metadata$={kind:n,simpleName:"NamedValueDecoder",interfaces:[as]},us.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,this.keySerializer,this.get_key_wili$(e)),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,this.valueSerializer,this.get_value_wili$(e)),i.endStructure_24f42q$(this.descriptor)},us.prototype.deserialize_bq71mq$=function(t){var i,n,r=t.beginStructure_24f42q$(this.descriptor);if(r.decodeSequentially()){var s=r.decodeSerializableElement_12e8id$(this.descriptor,0,this.keySerializer),a=r.decodeSerializableElement_12e8id$(this.descriptor,1,this.valueSerializer);return this.toResult_xwzc9p$(s,a)}var l=Eo,u=Eo;t:for(;;){var p=r.decodeElementIndex_24f42q$(this.descriptor);switch(p){case-1:break t;case 0:l=r.decodeSerializableElement_12e8id$(this.descriptor,0,this.keySerializer);break;case 1:u=r.decodeSerializableElement_12e8id$(this.descriptor,1,this.valueSerializer);break;default:throw pu("Invalid index: "+p)}}if(r.endStructure_24f42q$(this.descriptor),l===Eo)throw pu("Element 'key' is missing");if(u===Eo)throw pu("Element 'value' is missing");return this.toResult_xwzc9p$(null==(i=l)||e.isType(i,L)?i:o(),null==(n=u)||e.isType(n,L)?n:o())},us.$metadata$={kind:n,simpleName:"KeyValueSerializer",interfaces:[Gl]},Object.defineProperty(cs.prototype,"key",{get:function(){return this.key_7uv6mv$_0}}),Object.defineProperty(cs.prototype,"value",{get:function(){return this.value_gjenjd$_0}}),cs.$metadata$={kind:n,simpleName:"MapEntry",interfaces:[Ut]},cs.prototype.component1=function(){return this.key},cs.prototype.component2=function(){return this.value},cs.prototype.copy_xwzc9p$=function(t,e){return new cs(void 0===t?this.key:t,void 0===e?this.value:e)},cs.prototype.toString=function(){return"MapEntry(key="+e.toString(this.key)+", value="+e.toString(this.value)+")"},cs.prototype.hashCode=function(){var t=0;return t=31*(t=31*t+e.hashCode(this.key)|0)+e.hashCode(this.value)|0},cs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.key,t.key)&&e.equals(this.value,t.value)},Object.defineProperty(ps.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_cnmk75$_0}}),ps.prototype.get_key_wili$=function(t){return t.key},ps.prototype.get_value_wili$=function(t){return t.value},ps.prototype.toResult_xwzc9p$=function(t,e){return new cs(t,e)},ps.$metadata$={kind:n,simpleName:"MapEntrySerializer",interfaces:[us]},Object.defineProperty(hs.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_utc4rp$_0}}),hs.prototype.get_key_wili$=function(t){return t.first},hs.prototype.get_value_wili$=function(t){return t.second},hs.prototype.toResult_xwzc9p$=function(t,e){return N(t,e)},hs.$metadata$={kind:n,simpleName:"PairSerializer",interfaces:[us]},Object.defineProperty(ds.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_73a6vr$_0}}),ds.prototype.serialize_55azsf$=function(t,e){var i=t.beginStructure_24f42q$(this.descriptor);i.encodeSerializableElement_r4qlx7$(this.descriptor,0,this.aSerializer_0,e.first),i.encodeSerializableElement_r4qlx7$(this.descriptor,1,this.bSerializer_0,e.second),i.encodeSerializableElement_r4qlx7$(this.descriptor,2,this.cSerializer_0,e.third),i.endStructure_24f42q$(this.descriptor)},ds.prototype.deserialize_bq71mq$=function(t){var e=t.beginStructure_24f42q$(this.descriptor);return e.decodeSequentially()?this.decodeSequentially_0(e):this.decodeStructure_0(e)},ds.prototype.decodeSequentially_0=function(t){var e=t.decodeSerializableElement_12e8id$(this.descriptor,0,this.aSerializer_0),i=t.decodeSerializableElement_12e8id$(this.descriptor,1,this.bSerializer_0),n=t.decodeSerializableElement_12e8id$(this.descriptor,2,this.cSerializer_0);return t.endStructure_24f42q$(this.descriptor),new Vt(e,i,n)},ds.prototype.decodeStructure_0=function(t){var i,n,r,s=Eo,a=Eo,l=Eo;t:for(;;){var u=t.decodeElementIndex_24f42q$(this.descriptor);switch(u){case-1:break t;case 0:s=t.decodeSerializableElement_12e8id$(this.descriptor,0,this.aSerializer_0);break;case 1:a=t.decodeSerializableElement_12e8id$(this.descriptor,1,this.bSerializer_0);break;case 2:l=t.decodeSerializableElement_12e8id$(this.descriptor,2,this.cSerializer_0);break;default:throw pu("Unexpected index "+u)}}if(t.endStructure_24f42q$(this.descriptor),s===Eo)throw pu("Element 'first' is missing");if(a===Eo)throw pu("Element 'second' is missing");if(l===Eo)throw pu("Element 'third' is missing");return new Vt(null==(i=s)||e.isType(i,L)?i:o(),null==(n=a)||e.isType(n,L)?n:o(),null==(r=l)||e.isType(r,L)?r:o())},ds.$metadata$={kind:n,simpleName:"TripleSerializer",interfaces:[Gl]},fs.$metadata$={kind:n,simpleName:"JsonConf",interfaces:[]},fs.prototype.component1=function(){return this.encodeDefaults},fs.prototype.component2=function(){return this.ignoreUnknownKeys},fs.prototype.component3=function(){return this.isLenient},fs.prototype.component4=function(){return this.allowStructuredMapKeys},fs.prototype.component5=function(){return this.prettyPrint},fs.prototype.component6=function(){return this.prettyPrintIndent},fs.prototype.component7=function(){return this.coerceInputValues},fs.prototype.component8=function(){return this.useArrayPolymorphism},fs.prototype.component9=function(){return this.classDiscriminator},fs.prototype.component10=function(){return this.allowSpecialFloatingPointValues},fs.prototype.component11=function(){return this.serializersModule},fs.prototype.copy_2joh8z$=function(t,e,i,n,r,o,s,a,l,u,p){return new fs(void 0===t?this.encodeDefaults:t,void 0===e?this.ignoreUnknownKeys:e,void 0===i?this.isLenient:i,void 0===n?this.allowStructuredMapKeys:n,void 0===r?this.prettyPrint:r,void 0===o?this.prettyPrintIndent:o,void 0===s?this.coerceInputValues:s,void 0===a?this.useArrayPolymorphism:a,void 0===l?this.classDiscriminator:l,void 0===u?this.allowSpecialFloatingPointValues:u,void 0===p?this.serializersModule:p)},fs.prototype.toString=function(){return"JsonConf(encodeDefaults="+e.toString(this.encodeDefaults)+", ignoreUnknownKeys="+e.toString(this.ignoreUnknownKeys)+", isLenient="+e.toString(this.isLenient)+", allowStructuredMapKeys="+e.toString(this.allowStructuredMapKeys)+", prettyPrint="+e.toString(this.prettyPrint)+", prettyPrintIndent="+e.toString(this.prettyPrintIndent)+", coerceInputValues="+e.toString(this.coerceInputValues)+", useArrayPolymorphism="+e.toString(this.useArrayPolymorphism)+", classDiscriminator="+e.toString(this.classDiscriminator)+", allowSpecialFloatingPointValues="+e.toString(this.allowSpecialFloatingPointValues)+", serializersModule="+e.toString(this.serializersModule)+")"},fs.prototype.hashCode=function(){var t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+e.hashCode(this.encodeDefaults)|0)+e.hashCode(this.ignoreUnknownKeys)|0)+e.hashCode(this.isLenient)|0)+e.hashCode(this.allowStructuredMapKeys)|0)+e.hashCode(this.prettyPrint)|0)+e.hashCode(this.prettyPrintIndent)|0)+e.hashCode(this.coerceInputValues)|0)+e.hashCode(this.useArrayPolymorphism)|0)+e.hashCode(this.classDiscriminator)|0)+e.hashCode(this.allowSpecialFloatingPointValues)|0)+e.hashCode(this.serializersModule)|0},fs.prototype.equals=function(t){return this===t||null!==t&&"object"==typeof t&&Object.getPrototypeOf(this)===Object.getPrototypeOf(t)&&e.equals(this.encodeDefaults,t.encodeDefaults)&&e.equals(this.ignoreUnknownKeys,t.ignoreUnknownKeys)&&e.equals(this.isLenient,t.isLenient)&&e.equals(this.allowStructuredMapKeys,t.allowStructuredMapKeys)&&e.equals(this.prettyPrint,t.prettyPrint)&&e.equals(this.prettyPrintIndent,t.prettyPrintIndent)&&e.equals(this.coerceInputValues,t.coerceInputValues)&&e.equals(this.useArrayPolymorphism,t.useArrayPolymorphism)&&e.equals(this.classDiscriminator,t.classDiscriminator)&&e.equals(this.allowSpecialFloatingPointValues,t.allowSpecialFloatingPointValues)&&e.equals(this.serializersModule,t.serializersModule)},_s.$metadata$={kind:n,simpleName:"JsonException",interfaces:[uu]},ms.$metadata$={kind:n,simpleName:"JsonDecodingException",interfaces:[_s]},$s.$metadata$={kind:n,simpleName:"JsonEncodingException",interfaces:[_s]},Cs.prototype.readObject_0=function(){var t=this.reader_0;t.tokenClass!==Ko&&(R(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected start of the object",t.tokenPosition_0)),this.reader_0.nextToken();var e=this.reader_0,i=this.reader_0.tokenClass!==Wo,n=this.reader_0.currentPosition;i||e.fail_bm4lxs$("Unexpected leading comma",n);for(var r=X(),o=!1;this.reader_0.canBeginValue;){o=!1;var s=this.isLenient_0?this.reader_0.takeString():this.reader_0.takeStringQuoted(),a=this.reader_0;a.tokenClass!==Xo&&(R(Ht(a.tokenClass)),a.fail_bm4lxs$("Expected ':'",a.tokenPosition_0)),this.reader_0.nextToken();var l=this.read();if(r.put_xwzc9p$(s,l),this.reader_0.tokenClass!==Wo){var u=this.reader_0;u.tokenClass!==Yo&&(R(Ht(u.tokenClass)),u.fail_bm4lxs$("Expected end of the object or comma",u.tokenPosition_0))}else o=!0,this.reader_0.nextToken()}var p=this.reader_0,c=!o&&this.reader_0.tokenClass===Yo,h=this.reader_0.currentPosition;return c||p.fail_bm4lxs$("Expected end of the object",h),this.reader_0.nextToken(),new Ha(r)},Cs.prototype.readArray_0=function(){var t=this.reader_0;t.tokenClass!==Zo&&(R(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected start of the array",t.tokenPosition_0)),this.reader_0.nextToken();var e=this.reader_0,i=this.reader_0.tokenClass!==Wo,n=this.reader_0.currentPosition;i||e.fail_bm4lxs$("Unexpected leading comma",n);for(var r=b(),o=!1;this.reader_0.canBeginValue;){o=!1;var s=this.read();if(r.add_11rb$(s),this.reader_0.tokenClass!==Wo){var a=this.reader_0;a.tokenClass!==Jo&&(R(Ht(a.tokenClass)),a.fail_bm4lxs$("Expected end of the array or comma",a.tokenPosition_0))}else o=!0,this.reader_0.nextToken()}var l=this.reader_0,u=!o,p=this.reader_0.currentPosition;return u||l.fail_bm4lxs$("Unexpected trailing comma",p),this.reader_0.nextToken(),new Za(r)},Cs.prototype.readValue_0=function(t){return new Ba(this.isLenient_0?this.reader_0.takeString():t?this.reader_0.takeStringQuoted():this.reader_0.takeString(),t)},Cs.prototype.read=function(){var t;switch(this.reader_0.canBeginValue||this.reader_0.fail_bm4lxs$("Can't begin reading value from here"),this.reader_0.tokenClass){case 10:var e=Ga();this.reader_0.nextToken(),t=e;break;case 1:t=this.readValue_0(!0);break;case 0:t=this.readValue_0(!1);break;case 6:t=this.readObject_0();break;case 8:t=this.readArray_0();break;default:t=this.reader_0.fail_bm4lxs$("Can't begin reading element, unexpected token")}return t},Cs.$metadata$={kind:n,simpleName:"JsonParser",interfaces:[]},Ns.prototype.initC2ESC_0=function(t,e){e!==Vo&&(this.ESCAPE_2_CHAR[0|e]=Ht(t))},Ns.prototype.initC2ESC_1=function(t,e){this.initC2ESC_0(0|t,e)},Ns.$metadata$={kind:p,simpleName:"EscapeCharMappings",interfaces:[]};var Es,Ts,Ps,Os,Ms,js,As=null;function Is(){return null===As&&new Ns,As}function Rs(t,e,i){t[e]=i}function Ls(t,e,i){Rs(t,0|e,i)}function Ds(t){return(0|t)<126?es[0|t]:Go}function qs(t){return _t(t<117?Is().ESCAPE_2_CHAR[t]:Uo)}function Fs(t){this.source_0=t,this.currentPosition=0,this.tokenClass=ts,this.tokenPosition_0=0,this.offset_0=-1,this.length_0=0,this.buf_0=e.charArray(16),this.nextToken()}function Bs(t,i,n){var r,s,a=e.isType(r=i,Mn)?r:o(),l=nu(a,t,e.isType(s=n,L)?s:o());return function(t,i,n){if(e.isType(t,ou)&&lr(i.descriptor).contains_11rb$(n)){var r=t.descriptor.serialName,o=i.descriptor.serialName;throw I(("Sealed class '"+o+"' cannot be serialized as base class '"+r+"' because it has property name that conflicts with JSON class discriminator '"+n+"'. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism").toString())}}(a,l,t.json.configuration_8be2vx$.classDiscriminator),Us(l.descriptor.kind),l}function Us(t){if(e.isType(t,mi))throw I("Enums cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead".toString());if(e.isType(t,xi))throw I("Primitives cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead".toString());if(e.isType(t,pn))throw I("Actual serializer for polymorphic cannot be polymorphic itself".toString())}function Vs(t,n){var r,s,a,l;if(!e.isType(n,Mn)||t.json.configuration_8be2vx$.useArrayPolymorphism)return n.deserialize_bq71mq$(t);var u=t.decodeJsonElement(),p=n.descriptor;if(!e.isType(u,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+p.serialName+", but had "+e.getKClassFromExpression(u));var c,h,d=u,_=t.json.configuration_8be2vx$.classDiscriminator,m=null!=(s=null!=(r=d.get_11rb$(_))?el(r):null)?s.content:null;c=null!=(a=n.findPolymorphicSerializerOrNull_ca6uye$(t,m))?e.isType(h=a,Wl)?h:o():null;var $=null!=(l=c)?l:function(t,e){throw ys(-1,"Polymorphic serializer was not found for "+(null==t?"missing class discriminator ('null')":"class discriminator '"+f(t)+"'"),e.toString())}(m,d);return ea(t.json,_,d,$)}function Gs(t,e){this.useArrayPolymorphism_0=t,this.discriminator_0=e}function Hs(t,e,i){mn.call(this),this.json_n7tmf6$_0=t,this.mode_0=e,this.reader_8be2vx$=i,this.serializersModule_5carun$_0=this.json.serializersModule,this.currentIndex_0=-1,this.configuration_0=this.json.configuration_8be2vx$}function Ws(t,e,i,n){$n.call(this),this.composer_0=t,this.json_8uu1uy$_0=e,this.mode_0=i,this.modeReuseCache_0=n,this.serializersModule_tvtxsn$_0=this.json.serializersModule,this.configuration_0=this.json.configuration_8be2vx$,this.forceQuoting_0=!1,this.writePolymorphic_0=!1;var r=this.mode_0.ordinal;null===this.modeReuseCache_0[r]&&this.modeReuseCache_0[r]===this||(this.modeReuseCache_0[r]=this)}function Xs(t,e){this.sb_8be2vx$=t,this.json_0=e,this.level_0=0,this.writingFirst_4lagic$_0=!0}function Ks(t,e,i,n,r){return r=r||Object.create(Ws.prototype),Ws.call(r,new Xs(t,e),e,i,n),r}function Ys(t){var e=15&t;return Ht(e<10?e+48|0:e-10+97|0)}function Zs(t,e){var i;t.append_s8itvh$(Fo);for(var n=0,r=e.length,o=0;o<r;o++){var s=0|e.charCodeAt(o);if(!(s>=Es.length)&&null!=(i=Es[s])){var a=i;t.append_ezbsdh$(e,n,o),t.append_pdl1vj$(a),n=o+1|0}}t.append_ezbsdh$(e,n,r),t.append_s8itvh$(Fo)}function Js(t){var e;if(null==(e=Qs(t)))throw I(t+" does not represent a Boolean");return e}function Qs(t){return!!Lt(t,"true",!0)||!Lt(t,"false",!0)&&null}function ta(t,i,n){var r;return(e.isType(i,Ha)?new ra(t,i):e.isType(i,Za)?new sa(t,i):e.isType(i,Ba)||h(i,Ga())?new na(t,e.isType(r=i,Aa)?r:o()):e.noWhenBranchMatched()).decodeSerializableValue_w63s0f$(n)}function ea(t,e,i,n){return new ra(t,i,e,n.descriptor).decodeSerializableValue_w63s0f$(n)}function ia(t,e){ls.call(this),this.json_nf7dq8$_0=t,this.value_admuh1$_0=e,this.configuration_0=this.json.configuration_8be2vx$}function na(t,e){ia.call(this,t,e),this.value_icegni$_0=e,this.pushTag_11rb$(Ts)}function ra(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),ia.call(this,t,e),this.value_nyd9q1$_0=e,this.polyDiscriminator_0=i,this.polyDescriptor_0=n,this.position_0=0}function oa(t,e){ra.call(this,t,e),this.value_ozc1lj$_0=e,this.keys_0=re(this.value.keys),this.size_0=2*this.keys_0.size|0,this.position_1=-1}function sa(t,e){ia.call(this,t,e),this.value_z81zg7$_0=e,this.size_0=this.value.size,this.currentIndex_0=-1}function aa(t,e,i){var n,r={v:null};return new pa(t,(n=r,function(t){return n.v=t,l})).encodeSerializableValue_tf03ej$(i,e),null==r.v?se("result"):r.v}function la(t,e){ss.call(this),this.json_927t60$_0=t,this.nodeConsumer=e,this.configuration_0=this.json.configuration_8be2vx$,this.writePolymorphic_0=!1}function ua(t,e){la.call(this,t,e),this.content_0=null,this.pushTag_11rb$(Ts)}function pa(t,e){la.call(this,t,e),this.content_0=X()}function ca(t,e){pa.call(this,t,e),this.tag_s622uw$_0=this.tag_s622uw$_0,this.isKey_0=!0}function ha(t,e){la.call(this,t,e),this.array_0=b()}function da(t,e,i,n){ae.call(this),this.begin=R(i),this.end=R(n),this.name$=t,this.ordinal$=e,this.beginTc=Ds(_t(this.begin)),this.endTc=Ds(_t(this.end))}function fa(){fa=function(){},Ps=new da("OBJ",0,Ro,Lo),Os=new da("LIST",1,Do,qo),Ms=new da("MAP",2,Ro,Lo),js=new da("POLY_OBJ",3,Do,qo)}function _a(){return fa(),Ps}function ma(){return fa(),Os}function $a(){return fa(),Ms}function ya(){return fa(),js}function va(){return[_a(),ma(),$a(),ya()]}function ga(t,i){var n;if(n=i.kind,e.isType(n,pn))return ya();if(h(n,nn()))return ma();if(h(n,sn())){var r,o=i.getElementDescriptor_za3lpa$(0),s=o.kind;if(e.isType(s,xi)||h(s,_i.ENUM))r=$a();else{if(!t.configuration_8be2vx$.allowStructuredMapKeys)throw ks(o);r=ma()}return r}return _a()}function ba(t){Sa(),this.configuration_8be2vx$=t}function xa(){ka=this,ba.call(this,new fs)}Object.defineProperty(Fs.prototype,"isDone",{configurable:!0,get:function(){return this.tokenClass===ts}}),Object.defineProperty(Fs.prototype,"canBeginValue",{configurable:!0,get:function(){switch(this.tokenClass){case 8:case 6:case 0:case 1:case 10:return!0;default:return!1}}}),Fs.prototype.requireTokenClass_mvfnf3$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.json.internal.JsonReader.requireTokenClass_mvfnf3$",a((function(){var t=e.toChar,i=e.toBoxedChar;return function(e,n){this.tokenClass!==e&&this.fail_bm4lxs$(n(i(t(this.tokenClass))),this.tokenPosition_0)}}))),Fs.prototype.takeString=function(){return this.tokenClass!==Go&&this.tokenClass!==Ho&&this.fail_bm4lxs$("Expected string or non-null literal",this.tokenPosition_0),this.takeStringInternal_0()},Fs.prototype.peekString_6taknv$=function(t){return this.tokenClass===Ho||t&&this.tokenClass===Go?this.takeStringInternal_0(!1):null},Fs.prototype.takeStringQuoted=function(){switch(this.tokenClass){case 1:break;case 10:this.fail_bm4lxs$("Expected string literal but 'null' literal was found.\nUse 'coerceInputValues = true' in 'Json {}` builder to coerce nulls to default values.",this.tokenPosition_0);break;default:this.fail_bm4lxs$("Expected string literal with quotes.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",this.tokenPosition_0)}return this.takeStringInternal_0()},Fs.prototype.takeBooleanStringUnquoted=function(){return this.tokenClass!==Go&&this.fail_bm4lxs$("Expected start of the unquoted boolean literal.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",this.tokenPosition_0),this.takeStringInternal_0()},Fs.prototype.takeStringInternal_0=function(t){var e;if(void 0===t&&(t=!0),this.offset_0<0)e=Wt(this.buf_0,0,0+this.length_0|0);else{var i=this.source_0,n=this.offset_0,r=this.offset_0+this.length_0|0;e=i.substring(n,r)}var o=e;return t&&this.nextToken(),o},Fs.prototype.append_0=function(t){var e;this.length_0>=this.buf_0.length&&(this.buf_0=mt(this.buf_0,2*this.buf_0.length|0)),this.buf_0[(e=this.length_0,this.length_0=e+1|0,e)]=t},Fs.prototype.appendRange_0=function(t,e,i){var n=i-e|0,r=this.length_0,o=r+n|0;o>this.buf_0.length&&(this.buf_0=mt(this.buf_0,lt(o,2*this.buf_0.length|0)));for(var s=0;s<n;s++)this.buf_0[r+s|0]=t.charCodeAt(e+s|0);this.length_0=this.length_0+n|0},Fs.prototype.nextToken=function(){for(var t=this.source_0,e=this.currentPosition;e<t.length;){var i=Ds(t.charCodeAt(e));switch(i){case 3:e=e+1|0;break;case 0:return void this.nextLiteral_0(t,e);case 1:return void this.nextString_0(t,e);default:return this.tokenPosition_0=e,this.tokenClass=i,void(this.currentPosition=e+1|0)}}this.tokenPosition_0=e,this.tokenClass=ts},Fs.prototype.nextLiteral_0=function(t,e){this.tokenPosition_0=e,this.offset_0=e;for(var i=e;i<t.length&&Ds(t.charCodeAt(i))===Go;)i=i+1|0;this.currentPosition=i,this.length_0=i-this.offset_0|0,this.tokenClass=function(t,e,i,n){var r=n.length;if(i!==r)return!1;for(var o=0;o<r;o++)if(t.charCodeAt(e+o|0)!==n.charCodeAt(o))return!1;return!0}(t,this.offset_0,this.length_0,jo)?Qo:Go},Fs.prototype.nextString_0=function(t,e){this.tokenPosition_0=e,this.length_0=0;for(var i=e+1|0,n=i;t.charCodeAt(i)!==Fo;)if(t.charCodeAt(i)===Bo){this.appendRange_0(t,n,i);var r=this.appendEsc_0(t,i+1|0);i=r,n=r}else(i=i+1|0)>=t.length&&this.fail_bm4lxs$("EOF",i);n===(e+1|0)?(this.offset_0=n,this.length_0=i-n|0):(this.appendRange_0(t,n,i),this.offset_0=-1),this.currentPosition=i+1|0,this.tokenClass=Ho},Fs.prototype.appendEsc_0=function(t,e){var i,n=e,r=n;n<t.length||this.fail_bm4lxs$("Unexpected EOF after escape character",r);var o=t.charCodeAt((n=(i=n)+1|0,i));if(o===Vo)return this.appendHex_0(t,n);var s=qs(0|o),a=n;return s!==Uo||this.fail_bm4lxs$("Invalid escaped char '"+String.fromCharCode(o)+"'",a),this.append_0(s),n},Fs.prototype.appendHex_0=function(t,e){var i,n,r,o,s=e;return this.append_0(Ht((this.fromHexChar_0(t,(s=(i=s)+1|0,i))<<12)+(this.fromHexChar_0(t,(s=(n=s)+1|0,n))<<8)+(this.fromHexChar_0(t,(s=(r=s)+1|0,r))<<4)+this.fromHexChar_0(t,(s=(o=s)+1|0,o))|0)),s},Fs.prototype.skipElement=function(){if(this.tokenClass===Ko||this.tokenClass===Zo){var t=b();do{switch(this.tokenClass){case 8:case 6:t.add_11rb$(this.tokenClass);break;case 9:if(qt(t)!==Zo)throw ys(this.currentPosition,"found ] instead of }",this.source_0);t.removeAt_za3lpa$(t.size-1|0);break;case 7:if(qt(t)!==Ko)throw ys(this.currentPosition,"found } instead of ]",this.source_0);t.removeAt_za3lpa$(t.size-1|0)}var e;this.nextToken(),e=!t.isEmpty()}while(e)}else this.nextToken()},Fs.prototype.toString=function(){return"JsonReader(source='"+this.source_0+"', currentPosition="+this.currentPosition+", tokenClass="+this.tokenClass+", tokenPosition="+this.tokenPosition_0+", offset="+this.offset_0+")"},Fs.prototype.fail_bm4lxs$=function(t,e){throw void 0===e&&(e=this.currentPosition),ys(e,t,this.source_0)},Fs.prototype.require_wqn2ds$=s("kotlinx-serialization-kotlinx-serialization-core-jsLegacy.kotlinx.serialization.json.internal.JsonReader.require_wqn2ds$",(function(t,e,i){void 0===e&&(e=this.currentPosition),t||this.fail_bm4lxs$(i(),e)})),Fs.prototype.fromHexChar_0=function(t,e){e<t.length||this.fail_bm4lxs$("Unexpected EOF during unicode escape",e);var i=t.charCodeAt(e);return new rt(48,57).contains_mef7kx$(i)?(0|i)-48|0:new rt(97,102).contains_mef7kx$(i)?(0|i)-97+10|0:new rt(65,70).contains_mef7kx$(i)?(0|i)-65+10|0:this.fail_bm4lxs$("Invalid toHexChar char '"+String.fromCharCode(i)+"' in unicode escape")},Fs.$metadata$={kind:n,simpleName:"JsonReader",interfaces:[]},Gs.prototype.contextual_cfhkba$=function(t,e){},Gs.prototype.polymorphic_kfyidi$=function(t,e,i){var n=i.descriptor;this.checkKind_0(n,e),this.useArrayPolymorphism_0||this.checkDiscriminatorCollisions_0(n,e)},Gs.prototype.checkKind_0=function(t,i){var n=t.kind;if(e.isType(n,pn)||h(n,bi()))throw O("Serializer for "+f(i.simpleName)+" can't be registered as a subclass for polymorphic serialization because its kind "+n+" is not concrete. To work with multiple hierarchies, register it as a base class.");if(!this.useArrayPolymorphism_0&&(h(n,nn())||h(n,sn())||e.isType(n,xi)||e.isType(n,mi)))throw O("Serializer for "+f(i.simpleName)+" of kind "+n+" cannot be serialized polymorphically with class discriminator.")},Gs.prototype.checkDiscriminatorCollisions_0=function(t,e){var i;i=t.elementsCount;for(var n=0;n<i;n++){var r=t.getElementName_za3lpa$(n);if(h(r,this.discriminator_0))throw O("Polymorphic serializer for "+e+" has property '"+r+"' that conflicts with JSON class discriminator. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism")}},Gs.prototype.polymorphicDefault_yd5wsm$=function(t,e){},Gs.$metadata$={kind:n,simpleName:"PolymorphismValidator",interfaces:[eu]},Object.defineProperty(Hs.prototype,"json",{get:function(){return this.json_n7tmf6$_0}}),Object.defineProperty(Hs.prototype,"serializersModule",{configurable:!0,get:function(){return this.serializersModule_5carun$_0}}),Object.defineProperty(Hs.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),Hs.prototype.decodeJsonElement=function(){return new Cs(this.json.configuration_8be2vx$,this.reader_8be2vx$).read()},Hs.prototype.decodeSerializableValue_w63s0f$=function(t){return Vs(this,t)},Hs.prototype.beginStructure_24f42q$=function(t){var e,i=ga(this.json,t);if(_t(i.begin)!==Uo){var n=this.reader_8be2vx$;n.tokenClass!==i.beginTc&&(R(Ht(n.tokenClass)),n.fail_bm4lxs$("Expected '"+String.fromCharCode(_t(i.begin))+", kind: "+t.kind+"'",n.tokenPosition_0)),this.reader_8be2vx$.nextToken()}switch(i.name){case"LIST":case"MAP":case"POLY_OBJ":e=new Hs(this.json,i,this.reader_8be2vx$);break;default:e=this.mode_0===i?this:new Hs(this.json,i,this.reader_8be2vx$)}return e},Hs.prototype.endStructure_24f42q$=function(t){if(_t(this.mode_0.end)!==Uo){var e=this.reader_8be2vx$;e.tokenClass!==this.mode_0.endTc&&(R(Ht(e.tokenClass)),e.fail_bm4lxs$("Expected '"+String.fromCharCode(_t(this.mode_0.end))+"'",e.tokenPosition_0)),this.reader_8be2vx$.nextToken()}},Hs.prototype.decodeNotNullMark=function(){return this.reader_8be2vx$.tokenClass!==Qo},Hs.prototype.decodeNull=function(){var t=this.reader_8be2vx$;return t.tokenClass!==Qo&&(R(Ht(t.tokenClass)),t.fail_bm4lxs$("Expected 'null' literal",t.tokenPosition_0)),this.reader_8be2vx$.nextToken(),null},Hs.prototype.decodeElementIndex_24f42q$=function(t){var e,i=this.reader_8be2vx$.tokenClass;if(i===Wo){var n=this.reader_8be2vx$,r=-1!==this.currentIndex_0,o=this.reader_8be2vx$.currentPosition;r||n.fail_bm4lxs$("Unexpected leading comma",o),this.reader_8be2vx$.nextToken()}switch(this.mode_0.name){case"LIST":e=this.decodeListIndex_0(i);break;case"MAP":e=this.decodeMapIndex_0(i);break;case"POLY_OBJ":switch(this.currentIndex_0=this.currentIndex_0+1|0,this.currentIndex_0){case 0:e=0;break;case 1:e=1;break;default:e=-1}break;default:e=this.decodeObjectIndex_0(i,t)}return e},Hs.prototype.decodeMapIndex_0=function(t){var e;if(t!==Wo&&this.currentIndex_0%2==1){var i=this.reader_8be2vx$;i.tokenClass!==Yo&&(R(Ht(i.tokenClass)),i.fail_bm4lxs$("Expected end of the object or comma",i.tokenPosition_0))}if(this.currentIndex_0%2==0){var n=this.reader_8be2vx$;n.tokenClass!==Xo&&(R(Ht(n.tokenClass)),n.fail_bm4lxs$("Expected ':' after the key",n.tokenPosition_0)),this.reader_8be2vx$.nextToken()}if(this.reader_8be2vx$.canBeginValue)this.currentIndex_0=this.currentIndex_0+1|0,e=this.currentIndex_0;else{var r,o=this.reader_8be2vx$,s=t!==Wo;r=o.currentPosition,s||o.fail_bm4lxs$("Unexpected trailing comma",r),e=-1}return e},Hs.prototype.coerceInputValue_0=function(t,e){var i,n=t.getElementDescriptor_za3lpa$(e);if(this.reader_8be2vx$.tokenClass===Qo&&!n.isNullable)return!0;if(h(n.kind,yi())){if(null==(i=this.reader_8be2vx$.peekString_6taknv$(this.configuration_0.isLenient)))return!1;var r=i;if(-3===n.getElementIndex_61zpoe$(r))return!0}return!1},Hs.prototype.decodeObjectIndex_0=function(t,e){var i;for(t!==Wo||this.reader_8be2vx$.canBeginValue||this.reader_8be2vx$.fail_bm4lxs$("Unexpected trailing comma");this.reader_8be2vx$.canBeginValue;){this.currentIndex_0=this.currentIndex_0+1|0;var n=this.decodeString(),r=this.reader_8be2vx$;r.tokenClass!==Xo&&(R(Ht(r.tokenClass)),r.fail_bm4lxs$("Expected ':'",r.tokenPosition_0)),this.reader_8be2vx$.nextToken();var o=e.getElementIndex_61zpoe$(n);if(-3!==o){if(!this.configuration_0.coerceInputValues||!this.coerceInputValue_0(e,o))return o;i=!1}else i=!0;if(i&&!this.configuration_0.ignoreUnknownKeys?this.reader_8be2vx$.fail_bm4lxs$("Encountered an unknown key '"+n+"'.\n"+Oo):this.reader_8be2vx$.skipElement(),this.reader_8be2vx$.tokenClass===Wo){this.reader_8be2vx$.nextToken();var s=this.reader_8be2vx$,a=this.reader_8be2vx$.canBeginValue,l=this.reader_8be2vx$.currentPosition;a||s.fail_bm4lxs$("Unexpected trailing comma",l)}}return-1},Hs.prototype.decodeListIndex_0=function(t){var e;if(t!==Wo&&-1!==this.currentIndex_0){var i=this.reader_8be2vx$;i.tokenClass!==Jo&&(R(Ht(i.tokenClass)),i.fail_bm4lxs$("Expected end of the array or comma",i.tokenPosition_0))}if(this.reader_8be2vx$.canBeginValue)this.currentIndex_0=this.currentIndex_0+1|0,e=this.currentIndex_0;else{var n,r=this.reader_8be2vx$,o=t!==Wo;n=r.currentPosition,o||r.fail_bm4lxs$("Unexpected trailing comma",n),e=-1}return e},Hs.prototype.decodeBoolean=function(){return this.configuration_0.isLenient?Js(this.reader_8be2vx$.takeString()):Js(this.reader_8be2vx$.takeBooleanStringUnquoted())},Hs.prototype.decodeByte=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Xt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'byte'")}return t},Hs.prototype.decodeShort=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Kt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'short'")}return t},Hs.prototype.decodeInt=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Yt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'int'")}return t},Hs.prototype.decodeLong=function(){var t,i=this.reader_8be2vx$.takeString();try{t=u(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'long'")}return t},Hs.prototype.decodeFloat=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Jt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'float'")}var n=t;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Zt(n))return n;xs(this.reader_8be2vx$,n)},Hs.prototype.decodeDouble=function(){var t,i=this.reader_8be2vx$.takeString();try{t=Jt(i)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'double'")}var n=t;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Qt(n))return n;xs(this.reader_8be2vx$,n)},Hs.prototype.decodeChar=function(){var t,i=this.reader_8be2vx$.takeString();try{t=R(te(i))}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse 'char'")}return t},Hs.prototype.decodeString=function(){return this.configuration_0.isLenient?this.reader_8be2vx$.takeString():this.reader_8be2vx$.takeStringQuoted()},Hs.prototype.parse_0=function(t,i,n){try{return n(t)}catch(t){if(!e.isType(t,ee))throw t;this.reader_8be2vx$.fail_bm4lxs$("Failed to parse '"+i+"'")}},Hs.prototype.decodeEnum_24f42q$=function(t){return fr(t,this.decodeString())},Hs.$metadata$={kind:n,simpleName:"StreamingJsonDecoder",interfaces:[mn,Ta]},Object.defineProperty(Ws.prototype,"json",{get:function(){return this.json_8uu1uy$_0}}),Object.defineProperty(Ws.prototype,"serializersModule",{configurable:!0,get:function(){return this.serializersModule_tvtxsn$_0}}),Ws.prototype.encodeJsonElement_qiw0cd$=function(t){this.encodeSerializableValue_tf03ej$(vl(),t)},Ws.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return this.configuration_0.encodeDefaults},Ws.prototype.encodeSerializableValue_tf03ej$=function(t,i){t:do{var n,r;if(!e.isType(t,Mn)||this.json.configuration_8be2vx$.useArrayPolymorphism){t.serialize_55azsf$(this,i);break t}var s=Bs(this,e.isType(r=t,Gl)?r:o(),e.isType(n=i,L)?n:o());this.writePolymorphic_0=!0,s.serialize_55azsf$(this,i)}while(0)},Ws.prototype.encodeTypeInfo_0=function(t){this.composer_0.nextItem(),this.encodeString_61zpoe$(this.configuration_0.classDiscriminator),this.composer_0.print_s8itvh$(Io),this.composer_0.space(),this.encodeString_61zpoe$(t.serialName)},Ws.prototype.beginStructure_24f42q$=function(t){var e,i=ga(this.json,t);return _t(i.begin)!==Uo&&(this.composer_0.print_s8itvh$(_t(i.begin)),this.composer_0.indent()),this.writePolymorphic_0&&(this.writePolymorphic_0=!1,this.encodeTypeInfo_0(t)),this.mode_0===i?this:null!=(e=this.modeReuseCache_0[i.ordinal])?e:new Ws(this.composer_0,this.json,i,this.modeReuseCache_0)},Ws.prototype.endStructure_24f42q$=function(t){_t(this.mode_0.end)!==Uo&&(this.composer_0.unIndent(),this.composer_0.nextItem(),this.composer_0.print_s8itvh$(_t(this.mode_0.end)))},Ws.prototype.encodeElement_szpzho$=function(t,e){var i;switch(this.mode_0.name){case"LIST":this.composer_0.writingFirst||this.composer_0.print_s8itvh$(Ao),this.composer_0.nextItem();break;case"MAP":this.composer_0.writingFirst?(this.forceQuoting_0=!0,this.composer_0.nextItem()):(e%2==0?(this.composer_0.print_s8itvh$(Ao),this.composer_0.nextItem(),i=!0):(this.composer_0.print_s8itvh$(Io),this.composer_0.space(),i=!1),this.forceQuoting_0=i);break;case"POLY_OBJ":0===e&&(this.forceQuoting_0=!0),1===e&&(this.composer_0.print_s8itvh$(Ao),this.composer_0.space(),this.forceQuoting_0=!1);break;default:this.composer_0.writingFirst||this.composer_0.print_s8itvh$(Ao),this.composer_0.nextItem(),this.encodeString_61zpoe$(t.getElementName_za3lpa$(e)),this.composer_0.print_s8itvh$(Io),this.composer_0.space()}return!0},Ws.prototype.encodeNull=function(){this.composer_0.print_61zpoe$(jo)},Ws.prototype.encodeBoolean_6taknv$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_6taknv$(t)},Ws.prototype.encodeByte_s8j3t7$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_s8j3t7$(t)},Ws.prototype.encodeShort_mq22fl$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_mq22fl$(t)},Ws.prototype.encodeInt_za3lpa$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_za3lpa$(t)},Ws.prototype.encodeLong_s8cxhz$=function(t){this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_s8cxhz$(t)},Ws.prototype.encodeFloat_mx4ult$=function(t){if(this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_mx4ult$(t),!this.configuration_0.allowSpecialFloatingPointValues&&!Zt(t))throw vs(t,this.composer_0.sb_8be2vx$.toString())},Ws.prototype.encodeDouble_14dthe$=function(t){if(this.forceQuoting_0?this.encodeString_61zpoe$(t.toString()):this.composer_0.print_14dthe$(t),!this.configuration_0.allowSpecialFloatingPointValues&&!Qt(t))throw vs(t,this.composer_0.sb_8be2vx$.toString())},Ws.prototype.encodeChar_s8itvh$=function(t){this.encodeString_61zpoe$(String.fromCharCode(t))},Ws.prototype.encodeString_61zpoe$=function(t){this.composer_0.printQuoted_61zpoe$(t)},Ws.prototype.encodeEnum_szpzho$=function(t,e){this.encodeString_61zpoe$(t.getElementName_za3lpa$(e))},Object.defineProperty(Xs.prototype,"writingFirst",{configurable:!0,get:function(){return this.writingFirst_4lagic$_0},set:function(t){this.writingFirst_4lagic$_0=t}}),Xs.prototype.indent=function(){this.writingFirst=!0,this.level_0=this.level_0+1|0},Xs.prototype.unIndent=function(){this.level_0=this.level_0-1|0},Xs.prototype.nextItem=function(){if(this.writingFirst=!1,this.json_0.configuration_8be2vx$.prettyPrint){this.print_61zpoe$("\n");for(var t=this.level_0,e=0;e<t;e++)this.print_61zpoe$(this.json_0.configuration_8be2vx$.prettyPrintIndent)}},Xs.prototype.space=function(){this.json_0.configuration_8be2vx$.prettyPrint&&this.print_s8itvh$(32)},Xs.prototype.print_s8itvh$=function(t){return this.sb_8be2vx$.append_s8itvh$(t)},Xs.prototype.print_61zpoe$=function(t){return this.sb_8be2vx$.append_pdl1vj$(t)},Xs.prototype.print_mx4ult$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Xs.prototype.print_14dthe$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Xs.prototype.print_s8j3t7$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Xs.prototype.print_mq22fl$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Xs.prototype.print_za3lpa$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Xs.prototype.print_s8cxhz$=function(t){return this.sb_8be2vx$.append_s8jyv4$(t)},Xs.prototype.print_6taknv$=function(t){return this.sb_8be2vx$.append_6taknv$(t)},Xs.prototype.printQuoted_61zpoe$=function(t){Zs(this.sb_8be2vx$,t)},Xs.$metadata$={kind:n,simpleName:"Composer",interfaces:[]},Ws.$metadata$={kind:n,simpleName:"StreamingJsonEncoder",interfaces:[$n,Ul]},Object.defineProperty(ia.prototype,"json",{get:function(){return this.json_nf7dq8$_0}}),Object.defineProperty(ia.prototype,"value",{get:function(){return this.value_admuh1$_0}}),Object.defineProperty(ia.prototype,"serializersModule",{configurable:!0,get:function(){return this.json.serializersModule}}),Object.defineProperty(ia.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),ia.prototype.currentObject_0=function(){var t,e;return null!=(e=null!=(t=this.currentTagOrNull)?this.currentElement_61zpoe$(t):null)?e:this.value},ia.prototype.decodeJsonElement=function(){return this.currentObject_0()},ia.prototype.decodeSerializableValue_w63s0f$=function(t){return Vs(this,t)},ia.prototype.composeName_puj7f4$=function(t,e){return e},ia.prototype.beginStructure_24f42q$=function(t){var n,r,o=this.currentObject_0();if(n=t.kind,h(n,nn())||e.isType(n,pn)){var s=this.json;if(!e.isType(o,Za))throw new ms(-1,"Expected "+i(Za)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));r=new sa(s,o)}else if(h(n,sn())){var a,l=this.json,u=t.getElementDescriptor_za3lpa$(0),p=u.kind;if(e.isType(p,xi)||h(p,_i.ENUM)){var c=this.json;if(!e.isType(o,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));a=new oa(c,o)}else{if(!l.configuration_8be2vx$.allowStructuredMapKeys)throw ks(u);var d=this.json;if(!e.isType(o,Za))throw new ms(-1,"Expected "+i(Za)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));a=new sa(d,o)}r=a}else{var f=this.json;if(!e.isType(o,Ha))throw new ms(-1,"Expected "+i(Ha)+" as the serialized body of "+t.serialName+", but had "+e.getKClassFromExpression(o));r=new ra(f,o)}return r},ia.prototype.endStructure_24f42q$=function(t){},ia.prototype.getValue_61zpoe$=function(t){var i,n,r=this.currentElement_61zpoe$(t);if(null==(n=e.isType(i=r,Aa)?i:null))throw ys(-1,"Expected JsonPrimitive at "+t+", found "+r,this.currentObject_0().toString());return n},ia.prototype.decodeTaggedEnum_gaombr$=function(t,e){return fr(e,this.getValue_61zpoe$(t).content)},ia.prototype.decodeTaggedNull_11rb$=function(t){return null},ia.prototype.decodeTaggedNotNullMark_11rb$=function(t){return this.currentElement_61zpoe$(t)!==Ga()},ia.prototype.decodeTaggedBoolean_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);if(!this.json.configuration_8be2vx$.isLenient&&(e.isType(i=n,Ba)?i:o()).isString)throw ys(-1,"Boolean literal for key '"+t+"' should be unquoted.\n"+To,this.currentObject_0().toString());return ll(n)},ia.prototype.decodeTaggedByte_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=nt(il(n))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'byte'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedShort_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=ne(il(n))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'short'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedInt_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=il(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'int'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedLong_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=nl(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'long'",this.currentObject_0().toString()):t}return i},ia.prototype.decodeTaggedFloat_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=al(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'float'",this.currentObject_0().toString()):t}var r=i;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Zt(r))return r;throw bs(r,t,this.currentObject_0().toString())},ia.prototype.decodeTaggedDouble_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=ol(n)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'double'",this.currentObject_0().toString()):t}var r=i;if(this.json.configuration_8be2vx$.allowSpecialFloatingPointValues||Qt(r))return r;throw bs(r,t,this.currentObject_0().toString())},ia.prototype.decodeTaggedChar_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);try{i=R(te(n.content))}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse 'char'",this.currentObject_0().toString()):t}return i},ia.prototype.primitive_0=function(t,i,n){try{return n(t)}catch(t){throw e.isType(t,ee)?ys(-1,"Failed to parse '"+i+"'",this.currentObject_0().toString()):t}},ia.prototype.decodeTaggedString_11rb$=function(t){var i,n=this.getValue_61zpoe$(t);if(!this.json.configuration_8be2vx$.isLenient&&!(e.isType(i=n,Ba)?i:o()).isString)throw ys(-1,"String literal for key '"+t+"' should be quoted.\n"+To,this.currentObject_0().toString());return n.content},ia.$metadata$={kind:n,simpleName:"AbstractJsonTreeDecoder",interfaces:[Ta,ls]},Object.defineProperty(na.prototype,"value",{get:function(){return this.value_icegni$_0}}),na.prototype.decodeElementIndex_24f42q$=function(t){return 0},na.prototype.currentElement_61zpoe$=function(t){if(t!==Ts)throw O("This input can only handle primitives with 'primitive' tag".toString());return this.value},na.$metadata$={kind:n,simpleName:"JsonPrimitiveDecoder",interfaces:[ia]},Object.defineProperty(ra.prototype,"value",{get:function(){return this.value_nyd9q1$_0}}),ra.prototype.coerceInputValue_0=function(t,i,n){var r,o,s,a=t.getElementDescriptor_za3lpa$(i);if(e.isType(this.currentElement_61zpoe$(n),Ua)&&!a.isNullable)return!0;if(h(a.kind,yi())){if(null==(s=null!=(o=e.isType(r=this.currentElement_61zpoe$(n),Aa)?r:null)?pl(o):null))return!1;var l=s;if(-3===a.getElementIndex_61zpoe$(l))return!0}return!1},ra.prototype.decodeElementIndex_24f42q$=function(t){for(var i;this.position_0<t.elementsCount;){var n,r=this.getTag_av9bu7$(t,(i=this.position_0,this.position_0=i+1|0,i)),s=this.value;if((e.isType(n=s,oe)?n:o()).containsKey_11rb$(r)&&(!this.configuration_0.coerceInputValues||!this.coerceInputValue_0(t,this.position_0-1|0,r)))return this.position_0-1|0}return-1},ra.prototype.currentElement_61zpoe$=function(t){return q(this.value,t)},ra.prototype.beginStructure_24f42q$=function(t){return t===this.polyDescriptor_0?this:ia.prototype.beginStructure_24f42q$.call(this,t)},ra.prototype.endStructure_24f42q$=function(t){var i;if(!this.configuration_0.ignoreUnknownKeys&&!e.isType(t.kind,pn)){var n=lr(t);for(i=this.value.keys.iterator();i.hasNext();){var r=i.next();if(!n.contains_11rb$(r)&&!h(r,this.polyDiscriminator_0))throw zs(r,this.value.toString())}}},ra.$metadata$={kind:n,simpleName:"JsonTreeDecoder",interfaces:[ia]},Object.defineProperty(oa.prototype,"value",{get:function(){return this.value_ozc1lj$_0}}),oa.prototype.elementName_szpzho$=function(t,e){var i=e/2|0;return this.keys_0.get_za3lpa$(i)},oa.prototype.decodeElementIndex_24f42q$=function(t){for(;this.position_1<(this.size_0-1|0);)return this.position_1=this.position_1+1|0,this.position_1;return-1},oa.prototype.currentElement_61zpoe$=function(t){return this.position_1%2==0?Fa(t):q(this.value,t)},oa.prototype.endStructure_24f42q$=function(t){},oa.$metadata$={kind:n,simpleName:"JsonTreeMapDecoder",interfaces:[ra]},Object.defineProperty(sa.prototype,"value",{get:function(){return this.value_z81zg7$_0}}),sa.prototype.elementName_szpzho$=function(t,e){return e.toString()},sa.prototype.currentElement_61zpoe$=function(t){return this.value.get_za3lpa$(Yt(t))},sa.prototype.decodeElementIndex_24f42q$=function(t){for(;this.currentIndex_0<(this.size_0-1|0);)return this.currentIndex_0=this.currentIndex_0+1|0,this.currentIndex_0;return-1},sa.$metadata$={kind:n,simpleName:"JsonTreeListDecoder",interfaces:[ia]},Object.defineProperty(la.prototype,"json",{get:function(){return this.json_927t60$_0}}),Object.defineProperty(la.prototype,"serializersModule",{configurable:!0,get:function(){return this.json.serializersModule}}),la.prototype.encodeJsonElement_qiw0cd$=function(t){this.encodeSerializableValue_tf03ej$(vl(),t)},la.prototype.shouldEncodeElementDefault_szpzho$=function(t,e){return this.configuration_0.encodeDefaults},la.prototype.composeName_puj7f4$=function(t,e){return e},la.prototype.encodeTaggedNull_11rb$=function(t){this.putElement_zafu29$(t,Ga())},la.prototype.encodeTaggedInt_dpg1yx$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedByte_19qe40$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedShort_veccj0$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedLong_19wkf8$=function(t,e){this.putElement_zafu29$(t,qa(e))},la.prototype.encodeTaggedFloat_vlf4p8$=function(t,e){if(this.putElement_zafu29$(t,qa(e)),!this.configuration_0.allowSpecialFloatingPointValues&&!Zt(e))throw gs(e,t,this.getCurrent().toString())},la.prototype.encodeSerializableValue_tf03ej$=function(t,i){if(null!=this.currentTagOrNull||!e.isType(t.descriptor.kind,xi)&&t.descriptor.kind!==yi())t:do{var n,r;if(!e.isType(t,Mn)||this.json.configuration_8be2vx$.useArrayPolymorphism){t.serialize_55azsf$(this,i);break t}var s=Bs(this,e.isType(r=t,Gl)?r:o(),e.isType(n=i,L)?n:o());this.writePolymorphic_0=!0,s.serialize_55azsf$(this,i)}while(0);else{var a=new ua(this.json,this.nodeConsumer);a.encodeSerializableValue_tf03ej$(t,i),a.endEncode_24f42q$(t.descriptor)}},la.prototype.encodeTaggedDouble_e37ph5$=function(t,e){if(this.putElement_zafu29$(t,qa(e)),!this.configuration_0.allowSpecialFloatingPointValues&&!Qt(e))throw gs(e,t,this.getCurrent().toString())},la.prototype.encodeTaggedBoolean_iuyhfk$=function(t,e){this.putElement_zafu29$(t,Da(e))},la.prototype.encodeTaggedChar_19qo1q$=function(t,e){this.putElement_zafu29$(t,Fa(String.fromCharCode(e)))},la.prototype.encodeTaggedString_l9l8mx$=function(t,e){this.putElement_zafu29$(t,Fa(e))},la.prototype.encodeTaggedEnum_4xdzqf$=function(t,e,i){this.putElement_zafu29$(t,Fa(e.getElementName_za3lpa$(i)))},la.prototype.encodeTaggedValue_dpg7wc$=function(t,e){this.putElement_zafu29$(t,Fa(e.toString()))},la.prototype.beginStructure_24f42q$=function(t){var i,n,r,o=null==this.currentTagOrNull?this.nodeConsumer:(r=this,function(t){return r.putElement_zafu29$(r.currentTag,t),l});if(i=t.kind,h(i,nn())||e.isType(i,pn))n=new ha(this.json,o);else if(h(i,sn())){var s,a=this.json,u=t.getElementDescriptor_za3lpa$(0),p=u.kind;if(e.isType(p,xi)||h(p,_i.ENUM))s=new ca(this.json,o);else{if(!a.configuration_8be2vx$.allowStructuredMapKeys)throw ks(u);s=new ha(this.json,o)}n=s}else n=new pa(this.json,o);var c=n;return this.writePolymorphic_0&&(this.writePolymorphic_0=!1,c.putElement_zafu29$(this.configuration_0.classDiscriminator,Fa(t.serialName))),c},la.prototype.endEncode_24f42q$=function(t){this.nodeConsumer(this.getCurrent())},la.$metadata$={kind:n,simpleName:"AbstractJsonTreeEncoder",interfaces:[Ul,ss]},ua.prototype.putElement_zafu29$=function(t,e){if(t!==Ts)throw O("This output can only consume primitives with 'primitive' tag".toString());if(null!=this.content_0)throw O("Primitive element was already recorded. Does call to .encodeXxx happen more than once?".toString());this.content_0=e},ua.prototype.getCurrent=function(){var t=this.content_0;if(null==t)throw O("Primitive element has not been recorded. Is call to .encodeXxx is missing in serializer?".toString());return t},ua.$metadata$={kind:n,simpleName:"JsonPrimitiveEncoder",interfaces:[la]},pa.prototype.putElement_zafu29$=function(t,e){this.content_0.put_xwzc9p$(t,e)},pa.prototype.getCurrent=function(){return new Ha(this.content_0)},pa.$metadata$={kind:n,simpleName:"JsonTreeEncoder",interfaces:[la]},Object.defineProperty(ca.prototype,"tag_0",{configurable:!0,get:function(){return null==this.tag_s622uw$_0?se("tag"):this.tag_s622uw$_0},set:function(t){this.tag_s622uw$_0=t}}),ca.prototype.putElement_zafu29$=function(t,i){var n;if(this.isKey_0){if(e.isType(i,Aa))n=i.content;else{if(e.isType(i,Ha))throw ks(Pl().descriptor);if(e.isType(i,Za))throw ks(Ll().descriptor);n=e.noWhenBranchMatched()}this.tag_0=n,this.isKey_0=!1}else{var r=this.content_0,o=this.tag_0;r.put_xwzc9p$(o,i),this.isKey_0=!0}},ca.prototype.getCurrent=function(){return new Ha(this.content_0)},ca.$metadata$={kind:n,simpleName:"JsonTreeMapEncoder",interfaces:[pa]},ha.prototype.elementName_szpzho$=function(t,e){return e.toString()},ha.prototype.putElement_zafu29$=function(t,e){var i=Yt(t);this.array_0.add_wxm5ur$(i,e)},ha.prototype.getCurrent=function(){return new Za(this.array_0)},ha.$metadata$={kind:n,simpleName:"JsonTreeListEncoder",interfaces:[la]},da.$metadata$={kind:n,simpleName:"WriteMode",interfaces:[ae]},da.values=va,da.valueOf_61zpoe$=function(t){switch(t){case"OBJ":return _a();case"LIST":return ma();case"MAP":return $a();case"POLY_OBJ":return ya();default:le("No enum constant kotlinx.serialization.json.internal.WriteMode."+t)}},Object.defineProperty(ba.prototype,"serializersModule",{configurable:!0,get:function(){return this.configuration_8be2vx$.serializersModule}}),xa.$metadata$={kind:p,simpleName:"Default",interfaces:[ba]};var wa,za,ka=null;function Sa(){return null===ka&&new xa,ka}function Ca(t){this.encodeDefaults=t.encodeDefaults,this.ignoreUnknownKeys=t.ignoreUnknownKeys,this.isLenient=t.isLenient,this.allowStructuredMapKeys=t.allowStructuredMapKeys,this.prettyPrint=t.prettyPrint,this.prettyPrintIndent=t.prettyPrintIndent,this.coerceInputValues=t.coerceInputValues,this.useArrayPolymorphism=t.useArrayPolymorphism,this.classDiscriminator=t.classDiscriminator,this.allowSpecialFloatingPointValues=t.allowSpecialFloatingPointValues,this.serializersModule=t.serializersModule,this.serializeSpecialFloatingPointValues=!1,this.indent="    ",this.strictMode=!0,this.unquoted=!1,this.unquotedPrint=!1,this.serialModule=Il}function Na(t){ba.call(this,t),this.validateConfiguration_0()}function Ea(t){this.baseClass_saxo55$_0=t,this.descriptor_fdk25h$_0=ci("JsonContentPolymorphicSerializer<"+f(this.baseClass_saxo55$_0.simpleName)+">",dn(),[])}function Ta(){}function Pa(){ja()}function Oa(){Ma=this}ba.prototype.encodeToString_tf03ej$=function(t,i){var n=ue();return Ks(n,this,_a(),e.newArray(va().length,null)).encodeSerializableValue_tf03ej$(t,i),n.toString()},ba.prototype.decodeFromString_awif5v$=function(t,e){var i=new Fs(e),n=new Hs(this,_a(),i).decodeSerializableValue_w63s0f$(t);if(!i.isDone)throw I(("Reader has not consumed the whole input: "+i).toString());return n},ba.prototype.encodeToJsonElement_tf03ej$=function(t,e){return aa(this,e,t)},ba.prototype.decodeFromJsonElement_htt2tq$=function(t,e){return ta(this,e,t)},ba.prototype.parseToJsonElement_61zpoe$=function(t){return this.decodeFromString_awif5v$(vl(),t)},ba.$metadata$={kind:n,simpleName:"Json",interfaces:[lu]},Ca.prototype.build_8be2vx$=function(){if(this.useArrayPolymorphism&&!h(this.classDiscriminator,za))throw O("Class discriminator should not be specified when array polymorphism is specified".toString());if(this.prettyPrint){if(!h(this.prettyPrintIndent,wa)){var t,e=this.prettyPrintIndent;t:do{var i;for(i=ie(e);i.hasNext();){var n=_t(i.next()),r=R(n);if(32!==_t(r)&&9!==_t(r)&&13!==_t(r)&&10!==_t(r)){t=!1;break t}}t=!0}while(0);if(!t){var o="Only whitespace, tab, newline and carriage return are allowed as pretty print symbols. Had "+this.prettyPrintIndent;throw O(o.toString())}}}else if(!h(this.prettyPrintIndent,wa))throw O("Indent should not be specified when default printing mode is used".toString());return new fs(this.encodeDefaults,this.ignoreUnknownKeys,this.isLenient,this.allowStructuredMapKeys,this.prettyPrint,this.prettyPrintIndent,this.coerceInputValues,this.useArrayPolymorphism,this.classDiscriminator,this.allowSpecialFloatingPointValues,this.serializersModule)},Ca.prototype.buildConfiguration=function(){throw I("Deprecated and should not be called".toString())},Ca.prototype.buildModule=function(){throw I("Deprecated and should not be called".toString())},Ca.$metadata$={kind:n,simpleName:"JsonBuilder",interfaces:[]},Na.prototype.validateConfiguration_0=function(){if(!h(this.serializersModule,Il)){var t=new Gs(this.configuration_8be2vx$.useArrayPolymorphism,this.configuration_8be2vx$.classDiscriminator);this.serializersModule.dumpTo_ukvgvw$(t)}},Na.$metadata$={kind:n,simpleName:"JsonImpl",interfaces:[ba]},Object.defineProperty(Ta.prototype,"updateMode",{configurable:!0,get:function(){return Zl()}}),Ta.$metadata$={kind:$,simpleName:"JsonDecoder",interfaces:[vn,yn]},Oa.prototype.serializer=function(){return vl()},Oa.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ma=null;function ja(){return null===Ma&&new Oa,Ma}function Aa(){La(),Pa.call(this)}function Ia(){Ra=this}Pa.$metadata$={kind:n,simpleName:"JsonElement",interfaces:[]},Aa.prototype.toString=function(){return this.content},Ia.prototype.serializer=function(){return xl()},Ia.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ra=null;function La(){return null===Ra&&new Ia,Ra}function Da(t){return null==t?Ga():new Ba(t,!1)}function qa(t){return null==t?Ga():new Ba(t,!1)}function Fa(t){return null==t?Ga():new Ba(t,!0)}function Ba(t,e){Aa.call(this),this.isString_jhh1on$_0=e,this.content_prrjtz$_0=t.toString()}function Ua(){Va=this,Aa.call(this),this.content_w1vkof$_0="null"}Aa.$metadata$={kind:n,simpleName:"JsonPrimitive",interfaces:[Pa]},Object.defineProperty(Ba.prototype,"isString",{get:function(){return this.isString_jhh1on$_0}}),Object.defineProperty(Ba.prototype,"content",{configurable:!0,get:function(){return this.content_prrjtz$_0}}),Ba.prototype.toString=function(){var t;if(this.isString){var e=ue();Zs(e,this.content),t=e.toString()}else t=this.content;return t},Ba.prototype.equals=function(t){var i;return this===t||!(null==t||null==(i=e.getKClassFromExpression(this))||!i.equals(e.getKClassFromExpression(t)))&&(e.isType(t,Ba)||o(),this.isString===t.isString&&!!h(this.content,t.content))},Ba.prototype.hashCode=function(){var t=d(this.isString);return t=(31*t|0)+d(this.content)|0},Ba.$metadata$={kind:n,simpleName:"JsonLiteral",interfaces:[Aa]},Object.defineProperty(Ua.prototype,"isString",{configurable:!0,get:function(){return!1}}),Object.defineProperty(Ua.prototype,"content",{configurable:!0,get:function(){return this.content_w1vkof$_0}}),Ua.$metadata$={kind:p,simpleName:"JsonNull",interfaces:[Aa]};var Va=null;function Ga(){return null===Va&&new Ua,Va}function Ha(t){Ya(),Pa.call(this),this.content_0=t}function Wa(t){return'"'+t.key+'":'+t.value}function Xa(){Ka=this}Ha.prototype.equals=function(t){return h(this.content_0,t)},Ha.prototype.hashCode=function(){return d(this.content_0)},Ha.prototype.toString=function(){return k(this.content_0.entries,",","{","}",void 0,void 0,Wa)},Xa.prototype.serializer=function(){return Pl()},Xa.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Ka=null;function Ya(){return null===Ka&&new Xa,Ka}function Za(t){tl(),Pa.call(this),this.content_0=t}function Ja(){Qa=this}Object.defineProperty(Ha.prototype,"entries",{get:function(){return this.content_0.entries}}),Object.defineProperty(Ha.prototype,"keys",{get:function(){return this.content_0.keys}}),Object.defineProperty(Ha.prototype,"size",{get:function(){return this.content_0.size}}),Object.defineProperty(Ha.prototype,"values",{get:function(){return this.content_0.values}}),Ha.prototype.containsKey_11rb$=function(t){return this.content_0.containsKey_11rb$(t)},Ha.prototype.containsValue_11rc$=function(t){return this.content_0.containsValue_11rc$(t)},Ha.prototype.get_11rb$=function(t){return this.content_0.get_11rb$(t)},Ha.prototype.isEmpty=function(){return this.content_0.isEmpty()},Ha.$metadata$={kind:n,simpleName:"JsonObject",interfaces:[oe,Pa]},Za.prototype.equals=function(t){return h(this.content_0,t)},Za.prototype.hashCode=function(){return d(this.content_0)},Za.prototype.toString=function(){return k(this.content_0,",","[","]")},Ja.prototype.serializer=function(){return Ll()},Ja.$metadata$={kind:p,simpleName:"Companion",interfaces:[]};var Qa=null;function tl(){return null===Qa&&new Ja,Qa}function el(t){var i,n;return null!=(n=e.isType(i=t,Aa)?i:null)?n:function(t,i){throw O("Element "+e.getKClassFromExpression(t)+" is not a "+i)}(t,"JsonPrimitive")}function il(t){return Yt(t.content)}function nl(t){return u(t.content)}function rl(t){return ce(t.content)}function ol(t){return Jt(t.content)}function sl(t){return he(t.content)}function al(t){return Jt(t.content)}function ll(t){return Js(t.content)}function ul(t){return Qs(t.content)}function pl(t){return e.isType(t,Ua)?null:t.content}function cl(){yl=this,this.descriptor_u8kpse$_0=ci("kotlinx.serialization.json.JsonElement",dn(),[],$l)}function hl(){return xl().descriptor}function dl(){return kl().descriptor}function fl(){return Nl().descriptor}function _l(){return Pl().descriptor}function ml(){return Ll().descriptor}function $l(t){return t.element_vxrguq$("JsonPrimitive",cr(hl)),t.element_vxrguq$("JsonNull",cr(dl)),t.element_vxrguq$("JsonLiteral",cr(fl)),t.element_vxrguq$("JsonObject",cr(_l)),t.element_vxrguq$("JsonArray",cr(ml)),l}Object.defineProperty(Za.prototype,"size",{get:function(){return this.content_0.size}}),Za.prototype.contains_11rb$=function(t){return this.content_0.contains_11rb$(t)},Za.prototype.containsAll_brywnq$=function(t){return this.content_0.containsAll_brywnq$(t)},Za.prototype.get_za3lpa$=function(t){return this.content_0.get_za3lpa$(t)},Za.prototype.indexOf_11rb$=function(t){return this.content_0.indexOf_11rb$(t)},Za.prototype.isEmpty=function(){return this.content_0.isEmpty()},Za.prototype.iterator=function(){return this.content_0.iterator()},Za.prototype.lastIndexOf_11rb$=function(t){return this.content_0.lastIndexOf_11rb$(t)},Za.prototype.listIterator=function(){return this.content_0.listIterator()},Za.prototype.listIterator_za3lpa$=function(t){return this.content_0.listIterator_za3lpa$(t)},Za.prototype.subList_vux9f0$=function(t,e){return this.content_0.subList_vux9f0$(t,e)},Za.$metadata$={kind:n,simpleName:"JsonArray",interfaces:[pe,Pa]},Object.defineProperty(cl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_u8kpse$_0}}),cl.prototype.serialize_55azsf$=function(t,i){Dl(t),e.isType(i,Aa)?t.encodeSerializableValue_tf03ej$(xl(),i):e.isType(i,Ha)?t.encodeSerializableValue_tf03ej$(Pl(),i):e.isType(i,Za)&&t.encodeSerializableValue_tf03ej$(Ll(),i)},cl.prototype.deserialize_bq71mq$=function(t){return Fl(t).decodeJsonElement()},cl.$metadata$={kind:p,simpleName:"JsonElementSerializer",interfaces:[Gl]};var yl=null;function vl(){return null===yl&&new cl,yl}function gl(){bl=this,this.descriptor_1d7xi5$_0=ci("kotlinx.serialization.json.JsonPrimitive",Ki(),[])}Object.defineProperty(gl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_1d7xi5$_0}}),gl.prototype.serialize_55azsf$=function(t,i){var n;return Dl(t),e.isType(i,Ua)?t.encodeSerializableValue_tf03ej$(kl(),Ga()):t.encodeSerializableValue_tf03ej$(Nl(),e.isType(n=i,Ba)?n:o())},gl.prototype.deserialize_bq71mq$=function(t){var i=Fl(t).decodeJsonElement();if(!e.isType(i,Aa))throw ys(-1,"Unexpected JSON element, expected JsonPrimitive, had "+e.getKClassFromExpression(i),i.toString());return i},gl.$metadata$={kind:p,simpleName:"JsonPrimitiveSerializer",interfaces:[Gl]};var bl=null;function xl(){return null===bl&&new gl,bl}function wl(){zl=this,this.descriptor_kuqqdr$_0=ci("kotlinx.serialization.json.JsonNull",yi(),[])}Object.defineProperty(wl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_kuqqdr$_0}}),wl.prototype.serialize_55azsf$=function(t,e){Dl(t),t.encodeNull()},wl.prototype.deserialize_bq71mq$=function(t){return ql(t),t.decodeNull(),Ga()},wl.$metadata$={kind:p,simpleName:"JsonNullSerializer",interfaces:[Gl]};var zl=null;function kl(){return null===zl&&new wl,zl}function Sl(){Cl=this,this.descriptor_fnzu3f$_0=ui("kotlinx.serialization.json.JsonLiteral",Ki())}Object.defineProperty(Sl.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_fnzu3f$_0}}),Sl.prototype.serialize_55azsf$=function(t,e){if(Dl(t),e.isString)return t.encodeString_61zpoe$(e.content);var i=rl(e);if(null!=i)return t.encodeLong_s8cxhz$(i);var n=sl(e);if(null!=n)return t.encodeDouble_14dthe$(n);var r=ul(e);if(null!=r)return t.encodeBoolean_6taknv$(r);t.encodeString_61zpoe$(e.content)},Sl.prototype.deserialize_bq71mq$=function(t){var i=Fl(t).decodeJsonElement();if(!e.isType(i,Ba))throw ys(-1,"Unexpected JSON element, expected JsonLiteral, had "+e.getKClassFromExpression(i),i.toString());return i},Sl.$metadata$={kind:p,simpleName:"JsonLiteralSerializer",interfaces:[Gl]};var Cl=null;function Nl(){return null===Cl&&new Sl,Cl}function El(){Tl=this,this.descriptor_a992tj$_0=new Vn("kotlinx.serialization.json.JsonObject",Je().descriptor,vl().descriptor)}Object.defineProperty(El.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_a992tj$_0}}),El.prototype.serialize_55azsf$=function(t,e){Dl(t),ei(Je(),vl()).serialize_55azsf$(t,e)},El.prototype.deserialize_bq71mq$=function(t){return ql(t),new Ha(ei(Je(),vl()).deserialize_bq71mq$(t))},El.$metadata$={kind:p,simpleName:"JsonObjectSerializer",interfaces:[Gl]};var Tl=null;function Pl(){return null===Tl&&new El,Tl}function Ol(){Rl=this,this.descriptor_935ivj$_0=new Fn("kotlinx.serialization.json.JsonArray",vl().descriptor)}Object.defineProperty(Ol.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_935ivj$_0}}),Ol.prototype.serialize_55azsf$=function(t,e){Dl(t),ti(vl()).serialize_55azsf$(t,e)},Ol.prototype.deserialize_bq71mq$=function(t){return ql(t),new Za(ti(vl()).deserialize_bq71mq$(t))},Ol.$metadata$={kind:p,simpleName:"JsonArraySerializer",interfaces:[Gl]};var Ml,jl,Al,Il,Rl=null;function Ll(){return null===Rl&&new Ol,Rl}function Dl(t){Bl(t)}function ql(t){Fl(t)}function Fl(t){var i,n;if(null==(n=e.isType(i=t,Ta)?i:null))throw I("This serializer can be used only with Json format.Expected Decoder to be JsonDecoder, got "+e.getKClassFromExpression(t));return n}function Bl(t){var i,n;if(null==(n=e.isType(i=t,Ul)?i:null))throw I("This serializer can be used only with Json format.Expected Encoder to be JsonEncoder, got "+e.getKClassFromExpression(t));return n}function Ul(){}function Vl(t){this.tSerializer_nuzucf$_0=t}function Gl(){}function Hl(){}function Wl(){}function Xl(t,e){ae.call(this),this.name$=t,this.ordinal$=e}function Kl(){Kl=function(){},Ml=new Xl("BANNED",0),jl=new Xl("OVERWRITE",1),Al=new Xl("UPDATE",2)}function Yl(){return Kl(),Ml}function Zl(){return Kl(),jl}function Jl(){return Kl(),Al}function Ql(){}function tu(t,e,i,n){Ql.call(this),this.class2Serializer_0=t,this.polyBase2Serializers=e,this.polyBase2NamedSerializers_0=i,this.polyBase2DefaultProvider_0=n}function eu(){}function iu(t,e,i){var n;return null!=(n=t.findPolymorphicSerializerOrNull_ca6uye$(e,i))?n:jn(i,t.baseClass)}function nu(t,i,n){var r;return null!=(r=t.findPolymorphicSerializerOrNull_kjsxpj$(i,n))?r:An(e.getKClassFromExpression(n),t.baseClass)}function ru(t,e){this.this$groupingBy=t,this.closure$keySelector=e}function ou(t,e,i,n){var r,o;if(Mn.call(this),this.baseClass_a0a98o$_0=e,this.descriptor_gganzq$_0=ci(t,dn(),[],(r=this,o=n,function(t){t.element_vxrguq$("type",Je().descriptor);var e=ci("kotlinx.serialization.Sealed<"+f(r.baseClass.simpleName)+">",bi(),[],function(t){return function(e){var i,n=t;for(i=0;i!==n.length;++i){var r=n[i].descriptor;e.element_vxrguq$(r.serialName,r)}return l}}(o));return t.element_vxrguq$("value",e),l})),this.class2Serializer_0=null,this.serialName2Serializer_0=null,i.length!==n.length)throw O("All subclasses of sealed class "+f(this.baseClass.simpleName)+" should be marked @Serializable");this.class2Serializer_0=E(me(i,n));var s,a=new ru(this.class2Serializer_0.entries,su),u=X();for(s=a.sourceIterator();s.hasNext();){var p=s.next(),c=a.keyOf_11rb$(p),h=u.get_11rb$(c),d=u.put_xwzc9p$;if(null==h&&u.containsKey_11rb$(c),null!=h)throw I(("Multiple sealed subclasses of '"+this.baseClass+"' have the same serial name '"+c+"': '"+h.key+"', '"+p.key+"'").toString());d.call(u,c,p)}var _,m=ve(ye(u.size));for(_=u.entries.iterator();_.hasNext();){var $=_.next();m.put_xwzc9p$($.key,$.value.value)}this.serialName2Serializer_0=m}function su(t){return t.value.descriptor.serialName}function au(){}function lu(){}function uu(){this.name="SerializationException"}function pu(t,e){return e=e||Object.create(uu.prototype),O(t,e),uu.call(e),e}function cu(t){pu("Field '"+t+"' is required, but it was missing",this),this.name="MissingFieldException"}function hu(t){pu("An unknown field for index "+t,this),this.name="UnknownFieldException"}function du(t,i){var n,r,s,a,l,u,p=dr(i),c=i.isMarkedNullable,h=fu(t,i);return null!=h?e.isType(a=mu(h,c),Gl)?a:o():(l=null!=(r=null!=(n=t.getContextual_lmshww$(p))?mu(n,c):null)?e.isType(u=r,Gl)?u:o():null,null!=(s=l)?s:hr(dr(i)))}function fu(t,n){var r,s,a,l=dr(n),u=n.arguments,p=m(_(u,10));for(a=u.iterator();a.hasNext();){var c,d=a.next(),$=p.add_11rb$,y=d.type;if(null==y)throw O(("Star projections in type arguments are not allowed, but had "+n).toString());c=y,$.call(p,c)}var v,g=p;return null!=(s=g.isEmpty()?null!=(r=_u(l))?r:t.getContextual_lmshww$(l):function(t,n,r){var s,a,l,u=ge("serializer",function(t,e){return du(t,e)}.bind(null,t)),p=m(_(n,10));for(l=n.iterator();l.hasNext();){var c=l.next();p.add_11rb$(u(c))}var d=p;if(h(r,i(pe))||h(r,i(be))||h(r,i(U)))a=new Qn(d.get_za3lpa$(0));else if(h(r,i(H)))a=new er(d.get_za3lpa$(0));else if(h(r,i(xe))||h(r,i(we))||h(r,i(V)))a=new tr(d.get_za3lpa$(0));else if(h(r,i(J)))a=new nr(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(oe))||h(r,i(ze))||h(r,i(K)))a=new ir(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(Ut)))a=Me(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(ke)))a=Oe(d.get_za3lpa$(0),d.get_za3lpa$(1));else if(h(r,i(Vt)))a=je(d.get_za3lpa$(0),d.get_za3lpa$(1),d.get_za3lpa$(2));else{var $;if(wu(r))return e.isType($=Qe(e.isType(s=n.get_za3lpa$(0).classifier,st)?s:o(),d.get_za3lpa$(0)),Gl)?$:o();var y=xu(r,M(d).slice());if(null==y){var v="Can't find a method to construct serializer for type "+f(r.simpleName)+". Make sure this class is marked as @Serializable or provide serializer explicitly.";throw O(v.toString())}a=y}return a}(t,g,l))?e.isType(v=s,Gl)?v:o():null}function _u(t){var e;return null!=(e=vu(t))?e:Qr(t)}function mu(t,i){var n;return i?Pe(t):e.isType(n=t,Gl)?n:o()}function $u(t,e){if(!et(t).contains_mef7kx$(e))throw new at("Index "+e+" out of bounds "+et(t));return t[e]}function yu(t,e){if(!Ce(t).contains_mef7kx$(e))throw new at("Index "+e+" out of bounds "+Ce(t));return t[e]}function vu(t){var i,n,r;return null!=(r=xu(t,[]))?r:e.isType(n=null!=(i=Ne(t).Companion)?i.serializer():null,Gl)?n:null}function gu(t,e){return M(t)}function bu(t,e){return e.isInstance_s8jyv4$(t)}function xu(t,n){var r,s,a;try{var l=Te(t,i(zu));a=e.isType(l,Gl)?e.isType(r=l,Gl)?r:o():e.isType(l,$r)?e.isType(s=l.serializer_lu48y9$(n.slice()),Gl)?s:o():null}catch(t){a=null}return a}function wu(t){return null!=t?t.equals(Ee):null}function zu(t){this.serializer=t}Ul.$metadata$={kind:$,simpleName:"JsonEncoder",interfaces:[On,Pn]},Gl.prototype.patch_h7kg3r$=function(t,e){throw de("Not implemented, should not be called")},Gl.$metadata$={kind:$,simpleName:"KSerializer",interfaces:[Wl,Hl]},Hl.$metadata$={kind:$,simpleName:"SerializationStrategy",interfaces:[]},Wl.$metadata$={kind:$,simpleName:"DeserializationStrategy",interfaces:[]},Xl.$metadata$={kind:n,simpleName:"UpdateMode",interfaces:[ae]},Xl.values=function(){return[Yl(),Zl(),Jl()]},Xl.valueOf_61zpoe$=function(t){switch(t){case"BANNED":return Yl();case"OVERWRITE":return Zl();case"UPDATE":return Jl();default:le("No enum constant kotlinx.serialization.UpdateMode."+t)}},Ql.$metadata$={kind:n,simpleName:"SerializersModule",interfaces:[]},tu.prototype.getPolymorphic_joiicr$=function(t,i){var n,r;return bu(i,t)&&e.isType(r=null!=(n=this.polyBase2Serializers.get_11rb$(t))?n.get_11rb$(e.getKClassFromExpression(i)):null,Hl)?r:null},tu.prototype.getPolymorphic_l2fy3k$=function(t,i){var n,r,s,a,l,u;l=null!=(n=this.polyBase2NamedSerializers_0.get_11rb$(t))?(e.isType(u=n,oe)?u:o()).get_11rb$(i):null;var p=e.isType(r=l,Gl)?r:null;return null!=p?p:null!=(a="function"==typeof(s=this.polyBase2DefaultProvider_0.get_11rb$(t))?s:null)?a(i):null},tu.prototype.getContextual_lmshww$=function(t){var i;return e.isType(i=this.class2Serializer_0.get_11rb$(t),Gl)?i:null},tu.prototype.dumpTo_ukvgvw$=function(t){var i,n,r;for(i=this.class2Serializer_0.entries.iterator();i.hasNext();){var s,a,l=i.next(),u=l.key,p=l.value;t.contextual_cfhkba$(e.isType(s=u,st)?s:o(),e.isType(a=p,Gl)?a:o())}for(n=this.polyBase2Serializers.entries.iterator();n.hasNext();){var c,h=n.next(),d=h.key;for(c=h.value.entries.iterator();c.hasNext();){var f,_,m,$=c.next(),y=$.key,v=$.value;t.polymorphic_kfyidi$(e.isType(f=d,st)?f:o(),e.isType(_=y,st)?_:o(),e.isType(m=v,Gl)?m:o())}}for(r=this.polyBase2DefaultProvider_0.entries.iterator();r.hasNext();){var g,b,x=r.next(),w=x.key,z=x.value;t.polymorphicDefault_yd5wsm$(e.isType(g=w,st)?g:o(),"function"==typeof(b=z)?b:o())}},tu.$metadata$={kind:n,simpleName:"SerialModuleImpl",interfaces:[Ql]},eu.$metadata$={kind:$,simpleName:"SerializersModuleCollector",interfaces:[]},ru.prototype.sourceIterator=function(){return this.this$groupingBy.iterator()},ru.prototype.keyOf_11rb$=function(t){return this.closure$keySelector(t)},ru.$metadata$={kind:n,interfaces:[$e]},Object.defineProperty(ou.prototype,"baseClass",{get:function(){return this.baseClass_a0a98o$_0}}),Object.defineProperty(ou.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_gganzq$_0}}),ou.prototype.findPolymorphicSerializerOrNull_ca6uye$=function(t,i){var n,r,s=this.serialName2Serializer_0;return null!=(n=(e.isType(r=s,oe)?r:o()).get_11rb$(i))?n:Mn.prototype.findPolymorphicSerializerOrNull_ca6uye$.call(this,t,i)},ou.prototype.findPolymorphicSerializerOrNull_kjsxpj$=function(t,i){var n,r,s;return null!=(r=null!=(n=this.class2Serializer_0.get_11rb$(e.getKClassFromExpression(i)))?n:Mn.prototype.findPolymorphicSerializerOrNull_kjsxpj$.call(this,t,i))?e.isType(s=r,Hl)?s:o():null},ou.$metadata$={kind:n,simpleName:"SealedClassSerializer",interfaces:[Mn]},au.$metadata$={kind:$,simpleName:"SerialFormat",interfaces:[]},lu.$metadata$={kind:$,simpleName:"StringFormat",interfaces:[au]},uu.$metadata$={kind:n,simpleName:"SerializationException",interfaces:[_e]},cu.$metadata$={kind:n,simpleName:"MissingFieldException",interfaces:[uu]},hu.$metadata$={kind:n,simpleName:"UnknownFieldException",interfaces:[uu]},zu.$metadata$={kind:n,simpleName:"SerializableWith",interfaces:[r]};var ku=t.kotlinx||(t.kotlinx={}),Su=ku.serialization||(ku.serialization={}),Cu=Su.builtins||(Su.builtins={});Cu.get_nullable_2418p6$=Pe,Cu.PairSerializer_2yqygg$=Oe,Cu.MapEntrySerializer_2yqygg$=Me,Cu.TripleSerializer_jww85o$=je,Cu.serializer_n24eoe$=Ae,Cu.CharArraySerializer=Ie,Cu.serializer_k5zfx8$=Re,Cu.ByteArraySerializer=Le,Cu.serializer_qetqea$=De,Cu.ShortArraySerializer=qe,Cu.serializer_qn7glr$=Fe,Cu.IntArraySerializer=Be,Cu.serializer_vbrujs$=Ue,Cu.LongArraySerializer=Ve,Cu.serializer_y9phqa$=Ge,Cu.FloatArraySerializer=He,Cu.serializer_6a53gt$=We,Cu.DoubleArraySerializer=Xe,Cu.serializer_jtjczu$=Ke,Cu.BooleanArraySerializer=Ye,Cu.serializer_mours2$=Ze,Cu.serializer_6eet4j$=Je,Cu.ArraySerializer_8tn5u0$=Qe,Cu.ListSerializer_swdriu$=ti,Cu.MapSerializer_2yqygg$=ei,Su.ContextualSerializer=ii;var Nu=Su.descriptors||(Su.descriptors={});Nu.SerialDescriptor=ri,Nu.get_elementDescriptors_583jlf$=si,Nu.buildClassSerialDescriptor_dowfwv$=li,Nu.PrimitiveSerialDescriptor_xytc2a$=ui,Nu.buildSerialDescriptor_2yu4m$=ci,Nu.listSerialDescriptor_24f42q$=hi,Nu.mapSerialDescriptor_2ezn58$=function(t,e){return new Hn(t,e)},Nu.setSerialDescriptor_24f42q$=function(t){return new Un(t)},Nu.ClassSerialDescriptorBuilder=di,Nu.SerialDescriptorImpl=fi,Object.defineProperty(_i,"ENUM",{get:yi}),Object.defineProperty(_i,"CONTEXTUAL",{get:bi}),Nu.SerialKind=_i,Object.defineProperty(xi,"BOOLEAN",{get:ki}),Object.defineProperty(xi,"BYTE",{get:Ni}),Object.defineProperty(xi,"CHAR",{get:Pi}),Object.defineProperty(xi,"SHORT",{get:ji}),Object.defineProperty(xi,"INT",{get:Ri}),Object.defineProperty(xi,"LONG",{get:qi}),Object.defineProperty(xi,"FLOAT",{get:Ui}),Object.defineProperty(xi,"DOUBLE",{get:Hi}),Object.defineProperty(xi,"STRING",{get:Ki}),Nu.PrimitiveKind=xi,Object.defineProperty(Yi,"CLASS",{get:Qi}),Object.defineProperty(Yi,"LIST",{get:nn}),Object.defineProperty(Yi,"MAP",{get:sn}),Object.defineProperty(Yi,"OBJECT",{get:un}),Nu.StructureKind=Yi,Object.defineProperty(pn,"SEALED",{get:dn}),Object.defineProperty(pn,"OPEN",{get:function(){return null===_n&&new fn,_n}}),Nu.PolymorphicKind=pn;var Eu=Su.encoding||(Su.encoding={});Eu.AbstractDecoder=mn,Eu.AbstractEncoder=$n,Eu.Decoder=yn,Object.defineProperty(vn,"Companion",{get:Tn}),Eu.CompositeDecoder=vn,Eu.Encoder=Pn,Eu.CompositeEncoder=On;var Tu=Su.internal||(Su.internal={});Tu.AbstractPolymorphicSerializer=Mn,Tu.throwSubtypeNotRegistered_it6qj1$=jn,Tu.throwSubtypeNotRegistered_zgnrn5$=An,Tu.ListLikeDescriptor=In,Tu.MapLikeDescriptor=Rn,Tu.PrimitiveArrayDescriptor=Ln,Tu.ArrayClassDesc=Dn,Tu.ArrayListClassDesc=qn,Tu.NamedListClassDescriptor=Fn,Tu.LinkedHashSetClassDesc=Bn,Tu.HashSetClassDesc=Un,Tu.NamedMapClassDescriptor=Vn,Tu.LinkedHashMapClassDesc=Gn,Tu.HashMapClassDesc=Hn,Tu.AbstractCollectionSerializer=Wn,Tu.ListLikeSerializer=Xn,Tu.MapLikeSerializer=Kn,Tu.PrimitiveArrayBuilder=Yn,Tu.PrimitiveArraySerializer=Zn,Tu.ReferenceArraySerializer=Jn,Tu.ArrayListSerializer=Qn,Tu.LinkedHashSetSerializer=tr,Tu.HashSetSerializer=er,Tu.LinkedHashMapSerializer=ir,Tu.HashMapSerializer=nr,Tu.EnumSerializer=rr,Tu.NullableSerializer=or,Tu.SerialDescriptorForNullable=sr,Tu.ObjectSerializer=ar,Tu.cachedSerialNames_tie8r4$=lr,Tu.compactArray_b0lhx2$=ur,Tu.defer_nmpjmt$=cr,Su.KSerializer=Gl,Su.SerializationStrategy=Hl,Su.DeserializationStrategy=Wl,Tu.serializerNotRegistered_lu5d9p$=hr,Tu.kclass_7v1px$=dr,Tu.getElementIndexOrThrow_luk6xe$=fr,Tu.PluginGeneratedSerialDescriptor=_r,Tu.GeneratedSerializer=mr,Tu.SerializerFactory=$r,Object.defineProperty(Tu,"ByteArraySerializer",{get:gr}),Tu.ByteArrayBuilder=br,Object.defineProperty(Tu,"ShortArraySerializer",{get:zr}),Tu.ShortArrayBuilder=kr,Object.defineProperty(Tu,"IntArraySerializer",{get:Nr}),Tu.IntArrayBuilder=Er,Object.defineProperty(Tu,"LongArraySerializer",{get:Or}),Tu.LongArrayBuilder=Mr,Object.defineProperty(Tu,"FloatArraySerializer",{get:Ir}),Tu.FloatArrayBuilder=Rr,Object.defineProperty(Tu,"DoubleArraySerializer",{get:qr}),Tu.DoubleArrayBuilder=Fr,Object.defineProperty(Tu,"CharArraySerializer",{get:Vr}),Tu.CharArrayBuilder=Gr,Object.defineProperty(Tu,"BooleanArraySerializer",{get:Kr}),Tu.BooleanArrayBuilder=Yr,Tu.PrimitiveSerialDescriptor=Zr,Tu.PrimitiveDescriptorSafe_2z23zl$=Jr,Tu.builtinSerializerOrNull_beh9s$=Qr,Object.defineProperty(Tu,"UnitSerializer",{get:io}),Object.defineProperty(Tu,"BooleanSerializer",{get:oo}),Object.defineProperty(Tu,"ByteSerializer",{get:lo}),Object.defineProperty(Tu,"ShortSerializer",{get:co}),Object.defineProperty(Tu,"IntSerializer",{get:_o}),Object.defineProperty(Tu,"LongSerializer",{get:yo}),Object.defineProperty(Tu,"FloatSerializer",{get:bo}),Object.defineProperty(Tu,"DoubleSerializer",{get:zo}),Object.defineProperty(Tu,"CharSerializer",{get:Co}),Object.defineProperty(Tu,"StringSerializer",{get:ns}),Tu.Migration=rs,Tu.TaggedEncoder=os,Tu.NamedValueEncoder=ss,Tu.TaggedDecoder=as,Tu.NamedValueDecoder=ls,Tu.KeyValueSerializer=us,Tu.MapEntrySerializer=ps,Tu.PairSerializer=hs,Tu.TripleSerializer=ds;var Pu=Su.json||(Su.json={}),Ou=Pu.internal||(Pu.internal={});Ou.JsonConf=fs,Ou.JsonException=_s,Ou.JsonDecodingException=ms,Ou.JsonEncodingException=$s,Ou.JsonDecodingException_kx378j$=ys,Ou.InvalidFloatingPointEncoded_qwibp1$=vs,Ou.InvalidFloatingPointEncoded_x0xb19$=gs,Ou.InvalidFloatingPointDecoded_x0xb19$=bs,Ou.throwInvalidFloatingPointDecoded_nyj901$=xs,Ou.UnknownKeyException_wdz5eb$=zs,Ou.InvalidKeyKindException_jo479d$=ks,Ou.JsonParser=Cs,Object.defineProperty(Ou,"EscapeCharMappings",{get:Is}),Ou.charToTokenClass_8e8zqy$=Ds,Ou.escapeToChar_kcn2v3$=qs,Ou.JsonReader=Fs,Ou.checkKind_x1ow4c$=Us,Ou.decodeSerializableValuePolymorphic_3uiavc$=Vs,Ou.PolymorphismValidator=Gs,Ou.StreamingJsonDecoder=Hs,Ws.Composer=Xs,Ou.StreamingJsonEncoder_init_e4t9r6$=Ks,Ou.StreamingJsonEncoder=Ws,Ou.printQuoted_jigvc$=Zs,Ou.toBooleanStrict_7efafi$=Js,Ou.toBooleanStrictOrNull_7efafi$=Qs,Ou.readJson_ijhaef$=ta,Ou.readPolymorphicJson_nnpnh6$=ea,Ou.writeJson_4dixew$=aa,Object.defineProperty(da,"OBJ",{get:_a}),Object.defineProperty(da,"LIST",{get:ma}),Object.defineProperty(da,"MAP",{get:$a}),Object.defineProperty(da,"POLY_OBJ",{get:ya}),Ou.WriteMode=da,Ou.switchMode_q3nfcb$=ga,Object.defineProperty(ba,"Default",{get:Sa}),Pu.Json=ba,Pu.Json_x26noe$=function(t,e){void 0===t&&(t=Sa());var i=new Ca(t.configuration_8be2vx$);return e(i),new Na(i.build_8be2vx$())},Pu.JsonBuilder=Ca,Pu.JsonContentPolymorphicSerializer=Ea,Pu.JsonDecoder=Ta,Object.defineProperty(Pa,"Companion",{get:ja}),Pu.JsonElement=Pa,Object.defineProperty(Aa,"Companion",{get:La}),Pu.JsonPrimitive=Aa,Pu.JsonPrimitive_1v8dbw$=Da,Pu.JsonPrimitive_rcaewn$=qa,Pu.JsonPrimitive_pdl1vj$=Fa,Pu.JsonLiteral=Ba,Object.defineProperty(Pu,"JsonNull",{get:Ga}),Object.defineProperty(Ha,"Companion",{get:Ya}),Pu.JsonObject=Ha,Object.defineProperty(Za,"Companion",{get:tl}),Pu.JsonArray=Za,Pu.get_jsonPrimitive_u3sd3g$=el,Pu.get_int_59esu7$=il,Pu.get_long_59esu7$=nl,Pu.get_longOrNull_59esu7$=rl,Pu.get_double_59esu7$=ol,Pu.get_doubleOrNull_59esu7$=sl,Pu.get_float_59esu7$=al,Pu.get_boolean_59esu7$=ll,Pu.get_booleanOrNull_59esu7$=ul,Pu.get_contentOrNull_59esu7$=pl,Object.defineProperty(Pu,"JsonElementSerializer",{get:vl}),Object.defineProperty(Pu,"JsonPrimitiveSerializer",{get:xl}),Object.defineProperty(Pu,"JsonNullSerializer",{get:kl}),Object.defineProperty(Pu,"JsonObjectSerializer",{get:Pl}),Object.defineProperty(Pu,"JsonArraySerializer",{get:Ll}),Pu.asJsonDecoder_k984l0$=Fl,Pu.asJsonEncoder_vwx09w$=Bl,Pu.JsonEncoder=Ul,Pu.JsonTransformingSerializer=Vl,Object.defineProperty(Xl,"BANNED",{get:Yl}),Object.defineProperty(Xl,"OVERWRITE",{get:Zl}),Object.defineProperty(Xl,"UPDATE",{get:Jl}),Su.UpdateMode=Xl;var Mu=Su.modules||(Su.modules={});Mu.SerializersModule=Ql,Mu.SerialModuleImpl=tu,Mu.SerializersModuleCollector=eu,Su.findPolymorphicSerializer_uce5au$=iu,Su.findPolymorphicSerializer_dz33bw$=nu,Su.SealedClassSerializer=ou,Su.SerialFormat=au,Su.StringFormat=lu,Su.SerializationException_init_pdl1vj$=pu,Su.SerializationException=uu,Su.MissingFieldException=cu,Su.UnknownFieldException=hu,Su.serializer_saj79j$=function(t){var e;return mu(null!=(e=fu(Il,t))?e:hr(dr(t)),t.isMarkedNullable)},Su.serializer_ca95z9$=du,Su.serializerOrNull_1yb8b7$=_u,Tu.getChecked_4bqw6o$=$u,Tu.getChecked_3zu3yo$=yu,Tu.compiledSerializerImpl_beh9s$=vu,Tu.toNativeArrayImpl_wfz7v1$=gu,Tu.isInstanceOf_ofcvxk$=bu,Tu.constructSerializerForGivenTypeArgs_f7nown$=xu,Tu.isReferenceArray_79m3vz$=wu,Su.SerializableWith=zu,Gl.prototype.patch_h7kg3r$,ii.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(fi.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),mn.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,mn.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,mn.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,mn.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,mn.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,mn.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,mn.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,mn.prototype.decodeSequentially=vn.prototype.decodeSequentially,mn.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,mn.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,mn.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,mn.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,mn.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,$n.prototype.beginStructure_24f42q$=Pn.prototype.beginStructure_24f42q$,$n.prototype.encodeNotNullMark=Pn.prototype.encodeNotNullMark,$n.prototype.beginCollection_szpzho$=Pn.prototype.beginCollection_szpzho$,$n.prototype.beginCollection_m8o8wh$=Pn.prototype.beginCollection_m8o8wh$,$n.prototype.encodeSerializableValue_tf03ej$=Pn.prototype.encodeSerializableValue_tf03ej$,$n.prototype.encodeNullableSerializableValue_f4686g$=Pn.prototype.encodeNullableSerializableValue_f4686g$,$n.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,$n.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,Mn.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(In.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(In.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),Object.defineProperty(Rn.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(Rn.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),Wn.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(_r.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),rr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,or.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ar.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(pr.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(pr.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),mr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,yr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,xr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Sr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Tr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,jr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Lr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Br.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Hr.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(Zr.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(Zr.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),no.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,so.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,uo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ho.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,mo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,vo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,xo.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ko.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,No.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Object.defineProperty(rs.prototype,"isNullable",Object.getOwnPropertyDescriptor(ri.prototype,"isNullable")),Object.defineProperty(rs.prototype,"annotations",Object.getOwnPropertyDescriptor(ri.prototype,"annotations")),os.prototype.beginStructure_24f42q$=Pn.prototype.beginStructure_24f42q$,os.prototype.beginCollection_szpzho$=Pn.prototype.beginCollection_szpzho$,os.prototype.beginCollection_m8o8wh$=Pn.prototype.beginCollection_m8o8wh$,os.prototype.encodeSerializableValue_tf03ej$=Pn.prototype.encodeSerializableValue_tf03ej$,os.prototype.encodeNullableSerializableValue_f4686g$=Pn.prototype.encodeNullableSerializableValue_f4686g$,os.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,os.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,as.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,as.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,as.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,as.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,as.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,as.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,as.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,as.prototype.decodeSequentially=vn.prototype.decodeSequentially,as.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,as.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,as.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,as.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,as.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,us.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,ds.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Ta.prototype.beginStructure_24f42q$=yn.prototype.beginStructure_24f42q$,Ta.prototype.beginStructure_jvp2sb$=yn.prototype.beginStructure_jvp2sb$,Ta.prototype.decodeSerializableValue_w63s0f$=yn.prototype.decodeSerializableValue_w63s0f$,Ta.prototype.decodeNullableSerializableValue_aae3ea$=yn.prototype.decodeNullableSerializableValue_aae3ea$,Ta.prototype.updateSerializableValue_19c8k5$=yn.prototype.updateSerializableValue_19c8k5$,Ta.prototype.updateNullableSerializableValue_exmlbs$=yn.prototype.updateNullableSerializableValue_exmlbs$,Ta.prototype.decodeSequentially=vn.prototype.decodeSequentially,Ta.prototype.decodeCollectionSize_24f42q$=vn.prototype.decodeCollectionSize_24f42q$,Ta.prototype.decodeSerializableElement_186mnl$=vn.prototype.decodeSerializableElement_186mnl$,Ta.prototype.decodeSerializableElement_12e8id$$default=vn.prototype.decodeSerializableElement_12e8id$$default,Ta.prototype.decodeNullableSerializableElement_8viuyw$$default=vn.prototype.decodeNullableSerializableElement_8viuyw$$default,Ta.prototype.decodeNullableSerializableElement_pzkbua$=vn.prototype.decodeNullableSerializableElement_pzkbua$,Ta.prototype.updateSerializableElement_12e8id$=vn.prototype.updateSerializableElement_12e8id$,Ta.prototype.updateNullableSerializableElement_8viuyw$=vn.prototype.updateNullableSerializableElement_8viuyw$,Ta.prototype.decodeSerializableElement_12e8id$=vn.prototype.decodeSerializableElement_12e8id$,Ta.prototype.decodeNullableSerializableElement_8viuyw$=vn.prototype.decodeNullableSerializableElement_8viuyw$,Hs.prototype.decodeNullableSerializableValue_aae3ea$=Ta.prototype.decodeNullableSerializableValue_aae3ea$,Hs.prototype.updateSerializableValue_19c8k5$=Ta.prototype.updateSerializableValue_19c8k5$,Hs.prototype.updateNullableSerializableValue_exmlbs$=Ta.prototype.updateNullableSerializableValue_exmlbs$,Hs.prototype.decodeSequentially=Ta.prototype.decodeSequentially,Hs.prototype.decodeCollectionSize_24f42q$=Ta.prototype.decodeCollectionSize_24f42q$,Hs.prototype.decodeSerializableElement_186mnl$=Ta.prototype.decodeSerializableElement_186mnl$,Hs.prototype.decodeNullableSerializableElement_pzkbua$=Ta.prototype.decodeNullableSerializableElement_pzkbua$,Hs.prototype.updateSerializableElement_12e8id$=Ta.prototype.updateSerializableElement_12e8id$,Hs.prototype.updateNullableSerializableElement_8viuyw$=Ta.prototype.updateNullableSerializableElement_8viuyw$,Ul.prototype.encodeNotNullMark=Pn.prototype.encodeNotNullMark,Ul.prototype.beginStructure_24f42q$=Pn.prototype.beginStructure_24f42q$,Ul.prototype.beginStructure_jvp2sb$=Pn.prototype.beginStructure_jvp2sb$,Ul.prototype.beginCollection_szpzho$=Pn.prototype.beginCollection_szpzho$,Ul.prototype.beginCollection_m8o8wh$=Pn.prototype.beginCollection_m8o8wh$,Ul.prototype.encodeSerializableValue_tf03ej$=Pn.prototype.encodeSerializableValue_tf03ej$,Ul.prototype.encodeNullableSerializableValue_f4686g$=Pn.prototype.encodeNullableSerializableValue_f4686g$,Ul.prototype.shouldEncodeElementDefault_szpzho$=On.prototype.shouldEncodeElementDefault_szpzho$,Ul.prototype.encodeNonSerializableElement_ptgdlt$=On.prototype.encodeNonSerializableElement_ptgdlt$,Ws.prototype.encodeNotNullMark=Ul.prototype.encodeNotNullMark,Ws.prototype.beginCollection_szpzho$=Ul.prototype.beginCollection_szpzho$,Ws.prototype.beginCollection_m8o8wh$=Ul.prototype.beginCollection_m8o8wh$,Ws.prototype.encodeNullableSerializableValue_f4686g$=Ul.prototype.encodeNullableSerializableValue_f4686g$,Ws.prototype.encodeNonSerializableElement_ptgdlt$=Ul.prototype.encodeNonSerializableElement_ptgdlt$,Ea.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,cl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,gl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,wl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Sl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,El.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Ol.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,Vl.prototype.patch_h7kg3r$=Gl.prototype.patch_h7kg3r$,bn="kotlin.Array",xn="kotlin.collections.ArrayList",wn="kotlin.collections.LinkedHashSet",zn="kotlin.collections.HashSet",kn="kotlin.collections.LinkedHashMap",Sn="kotlin.collections.HashMap",Cn=[],Nn=[],Wr=It([N(yt,Je()),N(i(vt),Ae()),N(gt,Ie()),N(bt,We()),N(xt,Xe()),N(wt,Ge()),N(zt,He()),N(i(kt),Ue()),N(St,Ve()),N(Ct,Fe()),N(Nt,Be()),N(Et,De()),N(Tt,qe()),N(Pt,Re()),N(Ot,Le()),N(Mt,Ke()),N(jt,Ye()),N(i(Object.getPrototypeOf(At.Unit).constructor),Ze())]),Eo=new L,To="Use 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",Po="It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'",Oo="Use 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.",Mo="Use 'allowStructuredMapKeys = true' in 'Json {}' builder to convert such maps to [key1, value1, key2, value2,...] arrays.",jo="null",Ao=44,Io=58,Ro=123,Lo=125,Do=91,qo=93,Fo=34,Bo=92,Uo=Ht(0),Vo=117,Go=0,Ho=1,Wo=4,Xo=5,Ko=6,Yo=7,Zo=8,Jo=9,Qo=10,ts=12;for(var ju=new Int8Array(126),Au=0;Au<=32;Au++)Rs(ju,Au,11);Rs(ju,9,3),Rs(ju,10,3),Rs(ju,13,3),Rs(ju,32,3),Ls(ju,Ao,Wo),Ls(ju,Io,Xo),Ls(ju,Ro,Ko),Ls(ju,Lo,Yo),Ls(ju,Do,Zo),Ls(ju,qo,Jo),Ls(ju,Fo,Ho),Ls(ju,Bo,2),es=ju;for(var Iu=e.newArray(128,null),Ru=0;Ru<=31;Ru++){var Lu=Ys(Ru>>12),Du=Ys(Ru>>8),qu=Ys(Ru>>4),Fu=Ys(Ru);Iu[Ru]="\\u"+String.fromCharCode(Lu)+String.fromCharCode(Du)+String.fromCharCode(qu)+String.fromCharCode(Fu)}return Iu[34]='\\"',Iu[92]="\\\\",Iu[9]="\\t",Iu[8]="\\b",Iu[10]="\\n",Iu[13]="\\r",Iu[12]="\\f",Es=Iu,Ts="primitive",wa="    ",za="type",Il=new tu(fe(),fe(),fe(),fe()),Se.toNumber(),t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";var n={};(0,i(0).assign)(n,i(15),i(18),i(9)),t.exports=n},function(t,e,i){"use strict";var n=i(16),r=i(0),o=i(7),s=i(2),a=i(8),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=n.deflateSetDictionary(this.strm,p)))throw new Error(s[i]);this._dict_set=!0}}function p(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}u.prototype.push=function(t,e){var i,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(i=n.deflate(a,s))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),a.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,i){"use strict";var n,r=i(0),o=i(17),s=i(5),a=i(6),l=i(2);function u(t,e){return t.msg=l[e],e}function p(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function h(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function d(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,h(t.strm)}function f(t,e){t.pending_buf[t.pending++]=e}function _(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,p=t.w_mask,c=t.prev,h=t.strstart+258,d=u[o+s-1],f=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(i=e)+s]===f&&u[i+s-1]===d&&u[i]===u[o]&&u[++i]===u[o+1]){o+=2,i++;do{}while(u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&o<h);if(n=258-(h-o),o=h-258,n>s){if(t.match_start=e,s=n,n>=a)break;d=u[o+s-1],f=u[o+s]}}}while((e=c[e&p])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function $(t){var e,i,n,o,l,u,p,c,h,d,f=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-262)){r.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--i);e=i=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--i);o+=f}if(0===t.strm.avail_in)break;if(u=t.strm,p=t.window,c=t.strstart+t.lookahead,h=o,d=void 0,(d=u.avail_in)>h&&(d=h),i=0===d?0:(u.avail_in-=d,r.arraySet(p,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=s(u.adler,p,d,c):2===u.state.wrap&&(u.adler=a(u.adler,p,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function y(t,e){for(var i,n;;){if(t.lookahead<262){if($(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=m(t,i)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function v(t,e){for(var i,n,r;;){if(t.lookahead<262){if($(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=m(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function g(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):u(t,-2)}function w(t){var e,i=x(t);return 0===i&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function z(t,e,i,n,o,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||8!==i||n<8||n>15||e<0||e>9||s<0||s>4)return u(t,-2);8===n&&(n=9);var l=new b;return t.state=l,l.strm=t,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,w(t)}n=[new g(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if($(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new g(4,4,8,4,y),new g(4,5,16,8,y),new g(4,6,32,32,y),new g(4,4,16,16,v),new g(8,16,32,32,v),new g(8,16,128,128,v),new g(8,32,128,256,v),new g(32,128,258,1024,v),new g(32,258,258,4096,v)],e.deflateInit=function(t,e){return z(t,e,8,15,8,0)},e.deflateInit2=z,e.deflateReset=w,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var i,r,s,l;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(r.strm=t,i=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,f(r,31),f(r,139),f(r,8),r.gzhead?(f(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),f(r,255&r.gzhead.time),f(r,r.gzhead.time>>8&255),f(r,r.gzhead.time>>16&255),f(r,r.gzhead.time>>24&255),f(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),f(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(f(r,255&r.gzhead.extra.length),f(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(f(r,0),f(r,0),f(r,0),f(r,0),f(r,0),f(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),f(r,3),r.status=113);else{var m=8+(r.w_bits-8<<4)<<8;m|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(m|=32),m+=31-m%31,r.status=113,_(r,m),0!==r.strstart&&(_(r,t.adler>>>16),_(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),h(t),s=r.pending,r.pending!==r.pending_buf_size));)f(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),h(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,f(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),h(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,f(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&h(t),r.pending+2<=r.pending_buf_size&&(f(r,255&t.adler),f(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(h(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(i)&&4!==e)return u(t,-5);if(666===r.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var y=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&($(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=258){if($(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){s=t.strstart+258;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):n[r.level].func(r,e);if(3!==y&&4!==y||(r.status=666),1===y||3===y)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===y&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),h(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(f(r,255&t.adler),f(r,t.adler>>8&255),f(r,t.adler>>16&255),f(r,t.adler>>24&255),f(r,255&t.total_in),f(r,t.total_in>>8&255),f(r,t.total_in>>16&255),f(r,t.total_in>>24&255)):(_(r,t.adler>>>16),_(r,65535&t.adler)),h(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var i,n,o,a,l,u,p,h,d=e.length;if(!t||!t.state)return-2;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return-2;for(1===a&&(t.adler=s(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new r.Buf8(i.w_size),r.arraySet(h,e,d-i.w_size,i.w_size,0),e=h,d=i.w_size),l=t.avail_in,u=t.next_in,p=t.input,t.avail_in=d,t.next_in=0,t.input=e,$(i);i.lookahead>=3;){n=i.strstart,o=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--o);i.strstart=n,i.lookahead=2,$(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=u,t.input=p,t.avail_in=l,i.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(0);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);r(u);var p=new Array(60);r(p);var c=new Array(512);r(c);var h=new Array(256);r(h);var d=new Array(29);r(d);var f,_,m,$=new Array(30);function y(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function v(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function g(t){return t<256?c[t]:c[256+(t>>>7)]}function b(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function w(t,e,i){x(t,i[2*e],i[2*e+1])}function z(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function k(t,e,i){var n,r,o=new Array(16),s=0;for(n=1;n<=15;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=z(o[a]++,a))}}function S(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function C(t){t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function N(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function E(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&N(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!N(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function T(t,e,i){var n,r,a,l,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===n?w(t,r,e):(w(t,(a=h[r])+256+1,e),0!==(l=o[a])&&x(t,r-=d[a],l),w(t,a=g(--n),i),0!==(l=s[a])&&x(t,n-=$[a],l))}while(u<t.last_lit);w(t,256,e)}function P(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<l;i++)0!==o[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)E(t,o,i);r=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,E(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,o,s,a,l=e.dyn_tree,u=e.max_code,p=e.stat_desc.static_tree,c=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,_=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(o=l[2*l[2*(n=t.heap[i])+1]+1]+1)>f&&(o=f,_++),l[2*n+1]=o,n>u||(t.bl_count[o]++,s=0,n>=d&&(s=h[n-d]),a=l[2*n],t.opt_len+=a*(o+s),c&&(t.static_len+=a*(p[2*n+1]+s)));if(0!==_){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,_-=2}while(_>0);for(o=f;0!==o;o--)for(n=t.bl_count[o];0!==n;)(r=t.heap[--i])>u||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),n--)}}(t,e),k(o,u,t.bl_count)}function O(t,e,i){var n,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<l&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))}function M(t,e,i){var n,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<l&&r===s)){if(a<u)do{w(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(w(t,r,t.bl_tree),a--),w(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(w(t,17,t.bl_tree),x(t,a-3,3)):(w(t,18,t.bl_tree),x(t,a-11,7));a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4)}}r($);var j=!1;function A(t,e,i,r){x(t,0+(r?1:0),3),function(t,e,i,r){C(t),r&&(b(t,i),b(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){j||(!function(){var t,e,i,n,r,l=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<o[n];t++)h[i++]=n;for(h[i-1]=n,r=0,n=0;n<16;n++)for($[n]=r,t=0;t<1<<s[n];t++)c[r++]=n;for(r>>=7;n<30;n++)for($[n]=r<<7,t=0;t<1<<s[n]-7;t++)c[256+r++]=n;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(k(u,287,l),t=0;t<30;t++)p[2*t+1]=5,p[2*t]=z(t,5);f=new y(u,o,257,286,15),_=new y(p,s,0,30,15),m=new y(new Array(0),a,0,19,7)}(),j=!0),t.l_desc=new v(t.dyn_ltree,f),t.d_desc=new v(t.dyn_dtree,_),t.bl_desc=new v(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,S(t)},e._tr_stored_block=A,e._tr_flush_block=function(t,e,i,n){var r,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),P(t,t.l_desc),P(t,t.d_desc),s=function(t){var e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==e?A(t,e,i,n):4===t.strategy||o===r?(x(t,2+(n?1:0),3),T(t,u,p)):(x(t,4+(n?1:0),3),function(t,e,i,n){var r;for(x(t,e-257,5),x(t,i-1,5),x(t,n-4,4),r=0;r<n;r++)x(t,t.bl_tree[2*l[r]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),T(t,t.dyn_ltree,t.dyn_dtree)),S(t),n&&C(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(h[i]+256+1)]++,t.dyn_dtree[2*g(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),w(t,256,u),function(t){16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(19),r=i(0),o=i(7),s=i(9),a=i(2),l=i(8),u=i(22),p=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===p.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[i])}function h(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}c.prototype.push=function(t,e){var i,a,l,u,c,h=this.strm,d=this.options.chunkSize,f=this.options.dictionary,_=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===p.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new r.Buf8(d),h.next_out=0,h.avail_out=d),(i=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(i=n.inflateSetDictionary(this.strm,f)),i===s.Z_BUF_ERROR&&!0===_&&(i=s.Z_OK,_=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&i!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),u=h.next_out-l,c=o.buf2string(h.output,l),h.next_out=u,h.avail_out=d-u,u&&r.arraySet(h.output,h.output,l,u,0),this.onData(c)):this.onData(r.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(_=!0)}while((h.avail_in>0||0===h.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),h.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=h,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.ungzip=h},function(t,e,i){"use strict";var n=i(0),r=i(5),o=i(6),s=i(20),a=i(21);function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,p(t)):-2}function h(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,c(t))):-2}function d(t,e){var i,n;return t?(n=new u,t.state=n,n.window=null,0!==(i=h(t,e))&&(t.state=null),i):-2}var f,_,m=!0;function $(t){if(m){var e;for(f=new n.Buf32(512),_=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,f,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,_,0,t.work,{bits:5}),m=!1}t.lencode=f,t.lenbits=9,t.distcode=_,t.distbits=5}function y(t,e,i,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),n.arraySet(s.window,e,i-r,o,s.wnext),(r-=o)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=c,e.inflateReset2=h,e.inflateResetKeep=p,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var i,u,p,c,h,d,f,_,m,v,g,b,x,w,z,k,S,C,N,E,T,P,O,M,j=0,A=new n.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),h=t.next_out,p=t.output,f=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,_=i.hold,m=i.bits,v=d,g=f,P=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(2&i.wrap&&35615===_){i.check=0,A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0),_=0,m=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&_)){t.msg="unknown compression method",i.mode=30;break}if(m-=4,T=8+(15&(_>>>=4)),0===i.wbits)i.wbits=T;else if(T>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<T,t.adler=i.check=1,i.mode=512&_?10:12,_=0,m=0;break;case 2:for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(i.flags=_,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=_>>8&1),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0)),_=0,m=0,i.mode=3;case 3:for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.head&&(i.head.time=_),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,A[2]=_>>>16&255,A[3]=_>>>24&255,i.check=o(i.check,A,4,0)),_=0,m=0,i.mode=4;case 4:for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.head&&(i.head.xflags=255&_,i.head.os=_>>8),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0)),_=0,m=0,i.mode=5;case 5:if(1024&i.flags){for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.length=_,i.head&&(i.head.extra_len=_),512&i.flags&&(A[0]=255&_,A[1]=_>>>8&255,i.check=o(i.check,A,2,0)),_=0,m=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((b=i.length)>d&&(b=d),b&&(i.head&&(T=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,u,c,b,T)),512&i.flags&&(i.check=o(i.check,u,b,c)),d-=b,c+=b,i.length-=b),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===d)break t;b=0;do{T=u[c+b++],i.head&&T&&i.length<65536&&(i.head.name+=String.fromCharCode(T))}while(T&&b<d);if(512&i.flags&&(i.check=o(i.check,u,b,c)),d-=b,c+=b,T)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===d)break t;b=0;do{T=u[c+b++],i.head&&T&&i.length<65536&&(i.head.comment+=String.fromCharCode(T))}while(T&&b<d);if(512&i.flags&&(i.check=o(i.check,u,b,c)),d-=b,c+=b,T)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;m<16;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}_=0,m=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}t.adler=i.check=l(_),_=0,m=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){_>>>=7&m,m-=7&m,i.mode=27;break}for(;m<3;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}switch(i.last=1&_,m-=1,3&(_>>>=1)){case 0:i.mode=14;break;case 1:if($(i),i.mode=20,6===e){_>>>=2,m-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}_>>>=2,m-=2;break;case 14:for(_>>>=7&m,m-=7&m;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if((65535&_)!=(_>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&_,_=0,m=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(b=i.length){if(b>d&&(b=d),b>f&&(b=f),0===b)break t;n.arraySet(p,u,c,b,h),d-=b,c+=b,f-=b,h+=b,i.length-=b;break}i.mode=12;break;case 17:for(;m<14;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(i.nlen=257+(31&_),_>>>=5,m-=5,i.ndist=1+(31&_),_>>>=5,m-=5,i.ncode=4+(15&_),_>>>=4,m-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;m<3;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.lens[I[i.have++]]=7&_,_>>>=3,m-=3}for(;i.have<19;)i.lens[I[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},P=a(0,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,P){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;k=(j=i.lencode[_&(1<<i.lenbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(S<16)_>>>=z,m-=z,i.lens[i.have++]=S;else{if(16===S){for(M=z+2;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_>>>=z,m-=z,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}T=i.lens[i.have-1],b=3+(3&_),_>>>=2,m-=2}else if(17===S){for(M=z+3;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}m-=z,T=0,b=3+(7&(_>>>=z)),_>>>=3,m-=3}else{for(M=z+7;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}m-=z,T=0,b=11+(127&(_>>>=z)),_>>>=7,m-=7}if(i.have+b>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;b--;)i.lens[i.have++]=T}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,O={bits:i.lenbits},P=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,P){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},P=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,P){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(d>=6&&f>=258){t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,s(t,g),h=t.next_out,p=t.output,f=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,_=i.hold,m=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;k=(j=i.lencode[_&(1<<i.lenbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(k&&0==(240&k)){for(C=z,N=k,E=S;k=(j=i.lencode[E+((_&(1<<C+N)-1)>>C)])>>>16&255,S=65535&j,!(C+(z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}_>>>=C,m-=C,i.back+=C}if(_>>>=z,m-=z,i.back+=z,i.length=S,0===k){i.mode=26;break}if(32&k){i.back=-1,i.mode=12;break}if(64&k){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&k,i.mode=22;case 22:if(i.extra){for(M=i.extra;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.length+=_&(1<<i.extra)-1,_>>>=i.extra,m-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;k=(j=i.distcode[_&(1<<i.distbits)-1])>>>16&255,S=65535&j,!((z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(0==(240&k)){for(C=z,N=k,E=S;k=(j=i.distcode[E+((_&(1<<C+N)-1)>>C)])>>>16&255,S=65535&j,!(C+(z=j>>>24)<=m);){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}_>>>=C,m-=C,i.back+=C}if(_>>>=z,m-=z,i.back+=z,64&k){t.msg="invalid distance code",i.mode=30;break}i.offset=S,i.extra=15&k,i.mode=24;case 24:if(i.extra){for(M=i.extra;m<M;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}i.offset+=_&(1<<i.extra)-1,_>>>=i.extra,m-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===f)break t;if(b=g-f,i.offset>b){if((b=i.offset-b)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}b>i.wnext?(b-=i.wnext,x=i.wsize-b):x=i.wnext-b,b>i.length&&(b=i.length),w=i.window}else w=p,x=h-i.offset,b=i.length;b>f&&(b=f),f-=b,i.length-=b;do{p[h++]=w[x++]}while(--b);0===i.length&&(i.mode=21);break;case 26:if(0===f)break t;p[h++]=i.length,f--,i.mode=21;break;case 27:if(i.wrap){for(;m<32;){if(0===d)break t;d--,_|=u[c++]<<m,m+=8}if(g-=f,t.total_out+=g,i.total+=g,g&&(t.adler=i.check=i.flags?o(i.check,p,g,h-g):r(i.check,p,g,h-g)),g=f,(i.flags?_:l(_))!==i.check){t.msg="incorrect data check",i.mode=30;break}_=0,m=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;m<32;){if(0===d)break t;d--,_+=u[c++]<<m,m+=8}if(_!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}_=0,m=0}i.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=h,t.avail_out=f,t.next_in=c,t.avail_in=d,i.hold=_,i.bits=m,(i.wsize||g!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&y(t,t.output,t.next_out,g-t.avail_out)?(i.mode=31,-4):(v-=t.avail_in,g-=t.avail_out,t.total_in+=v,t.total_out+=g,i.total+=g,i.wrap&&g&&(t.adler=i.check=i.flags?o(i.check,p,g,t.next_out-g):r(i.check,p,g,t.next_out-g)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===v&&0===g||4===e)&&0===P&&(P=-5),P)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?-2:(i.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&r(1,e,n,0)!==i.check?-3:y(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,o,s,a,l,u,p,c,h,d,f,_,m,$,y,v,g,b,x,w,z,k,S;i=t.state,n=t.next_in,k=t.input,r=n+(t.avail_in-5),o=t.next_out,S=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=i.dmax,u=i.wsize,p=i.whave,c=i.wnext,h=i.window,d=i.hold,f=i.bits,_=i.lencode,m=i.distcode,$=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),v=_[d&$];e:for(;;){if(d>>>=g=v>>>24,f-=g,0===(g=v>>>16&255))S[o++]=65535&v;else{if(!(16&g)){if(0==(64&g)){v=_[(65535&v)+(d&(1<<g)-1)];continue e}if(32&g){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}b=65535&v,(g&=15)&&(f<g&&(d+=k[n++]<<f,f+=8),b+=d&(1<<g)-1,d>>>=g,f-=g),f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),v=m[d&y];i:for(;;){if(d>>>=g=v>>>24,f-=g,!(16&(g=v>>>16&255))){if(0==(64&g)){v=m[(65535&v)+(d&(1<<g)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&v,f<(g&=15)&&(d+=k[n++]<<f,(f+=8)<g&&(d+=k[n++]<<f,f+=8)),(x+=d&(1<<g)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=g,f-=g,x>(g=o-s)){if((g=x-g)>p&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(w=0,z=h,0===c){if(w+=u-g,g<b){b-=g;do{S[o++]=h[w++]}while(--g);w=o-x,z=S}}else if(c<g){if(w+=u+c-g,(g-=c)<b){b-=g;do{S[o++]=h[w++]}while(--g);if(w=0,c<b){b-=g=c;do{S[o++]=h[w++]}while(--g);w=o-x,z=S}}}else if(w+=c-g,g<b){b-=g;do{S[o++]=h[w++]}while(--g);w=o-x,z=S}for(;b>2;)S[o++]=z[w++],S[o++]=z[w++],S[o++]=z[w++],b-=3;b&&(S[o++]=z[w++],b>1&&(S[o++]=z[w++]))}else{w=o-x;do{S[o++]=S[w++],S[o++]=S[w++],S[o++]=S[w++],b-=3}while(b>2);b&&(S[o++]=S[w++],b>1&&(S[o++]=S[w++]))}break}}break}}while(n<r&&o<a);n-=b=f>>3,d&=(1<<(f-=b<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=d,i.bits=f}},function(t,e,i){"use strict";var n=i(0),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,l,u,p,c,h){var d,f,_,m,$,y,v,g,b,x=h.bits,w=0,z=0,k=0,S=0,C=0,N=0,E=0,T=0,P=0,O=0,M=null,j=0,A=new n.Buf16(16),I=new n.Buf16(16),R=null,L=0;for(w=0;w<=15;w++)A[w]=0;for(z=0;z<l;z++)A[e[i+z]]++;for(C=x,S=15;S>=1&&0===A[S];S--);if(C>S&&(C=S),0===S)return u[p++]=20971520,u[p++]=20971520,h.bits=1,0;for(k=1;k<S&&0===A[k];k++);for(C<k&&(C=k),T=1,w=1;w<=15;w++)if(T<<=1,(T-=A[w])<0)return-1;if(T>0&&(0===t||1!==S))return-1;for(I[1]=0,w=1;w<15;w++)I[w+1]=I[w]+A[w];for(z=0;z<l;z++)0!==e[i+z]&&(c[I[e[i+z]]++]=z);if(0===t?(M=R=c,y=19):1===t?(M=r,j-=257,R=o,L-=257,y=256):(M=s,R=a,y=-1),O=0,z=0,w=k,$=p,N=C,E=0,_=-1,m=(P=1<<C)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){v=w-E,c[z]<y?(g=0,b=c[z]):c[z]>y?(g=R[L+c[z]],b=M[j+c[z]]):(g=96,b=0),d=1<<w-E,k=f=1<<N;do{u[$+(O>>E)+(f-=d)]=v<<24|g<<16|b|0}while(0!==f);for(d=1<<w-1;O&d;)d>>=1;if(0!==d?(O&=d-1,O+=d):O=0,z++,0==--A[w]){if(w===S)break;w=e[i+c[z]]}if(w>C&&(O&m)!==_){for(0===E&&(E=C),$+=k,T=1<<(N=w-E);N+E<S&&!((T-=A[N+E])<=0);)N++,T<<=1;if(P+=1<<N,1===t&&P>852||2===t&&P>592)return 1;u[_=O&m]=C<<24|N<<16|$-p|0}}return 0!==O&&(u[$+O]=w-E<<24|64<<16|0),h.bits=C,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])}));
//# sourceMappingURL=kool-demo.js.map